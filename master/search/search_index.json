{"config":{"indexing":"full","lang":["en"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"\u6b22\u8fce\u9605\u8bfbNebulaGraph 3.6.0 \u6587\u6863 \u00b6 Note \u672c\u6587\u6863\u66f4\u65b0\u65f6\u95f42023-10-25\uff0cGitHub commit f88fdfa \u3002\u8be5\u7248\u672c\u4e3b\u8272\u7cfb\u4e3a\"\u6851\u8272\"\uff0c\u8272\u53f7\u4e3a #55295B\u3002 \u5feb\u901f\u5f00\u59cb \u00b6 \u5feb\u901f\u5f00\u59cb \u90e8\u7f72\u8981\u6c42 nGQL \u547d\u4ee4\u6c47\u603b FAQ \u751f\u6001\u5de5\u5177 Academy \u8bfe\u7a0b \u6700\u65b0\u53d1\u5e03 \u00b6 NebulaGraph 3.6.0 NebulaGraph Dashboard Community NebulaGraph Studio \u5176\u4ed6\u8d44\u6599 \u00b6 \u5b66\u4e60\u8def\u5f84 \u5f15\u7528 NebulaGraph \u8bba\u575b \u4e3b\u9875 \u7cfb\u5217\u89c6\u9891 \u82f1\u6587\u6587\u6863 \u56fe\u4f8b\u8bf4\u660e \u00b6 Note \u989d\u5916\u7684\u4fe1\u606f\u6216\u8005\u64cd\u4f5c\u76f8\u5173\u7684\u63d0\u9192\u7b49\u3002 Caution \u9700\u8981\u4e25\u683c\u9075\u5b88\u7684\u6ce8\u610f\u4e8b\u9879\u3002\u4e0d\u9075\u5b88 caution \u53ef\u80fd\u5bfc\u81f4\u7cfb\u7edf\u6545\u969c\u3001\u6570\u636e\u4e22\u5931\u3001\u5b89\u5168\u95ee\u9898\u7b49\u3002 Danger \u4f1a\u5f15\u53d1\u5371\u9669\u7684\u4e8b\u9879\u3002\u4e0d\u9075\u5b88 danger \u5fc5\u5b9a\u4f1a\u5bfc\u81f4\u7cfb\u7edf\u6545\u969c\u3001\u6570\u636e\u4e22\u5931\u3001\u5b89\u5168\u95ee\u9898\u7b49\u3002 Performance \u6027\u80fd\u8c03\u4f18\u65f6\u9700\u8981\u6ce8\u610f\u7684\u4e8b\u9879\u3002 Faq \u5e38\u89c1\u95ee\u9898\u3002 Compatibility nGQL \u4e0e openCypher \u7684\u517c\u5bb9\u6027\u6216 nGQL \u5f53\u524d\u7248\u672c\u4e0e\u5386\u53f2\u7248\u672c\u7684\u517c\u5bb9\u6027\u3002 Enterpriseonly \u63cf\u8ff0\u793e\u533a\u7248\u548c\u4f01\u4e1a\u7248\u7684\u5dee\u5f02\u3002 \u4fee\u6539\u6587\u6863\u4e2d\u7684\u9519\u8bef \u00b6 NebulaGraph\u6587\u6863\u4ee5 Markdown \u8bed\u8a00\u7f16\u5199\u3002\u5355\u51fb\u6587\u6863\u6807\u9898\u53f3\u4e0a\u4fa7\u7684\u94c5\u7b14\u56fe\u6807\u5373\u53ef\u63d0\u4ea4\u4fee\u6539\u5efa\u8bae\u3002","title":"\u524d\u8a00"},{"location":"#nebulagraph_360","text":"Note \u672c\u6587\u6863\u66f4\u65b0\u65f6\u95f42023-10-25\uff0cGitHub commit f88fdfa \u3002\u8be5\u7248\u672c\u4e3b\u8272\u7cfb\u4e3a\"\u6851\u8272\"\uff0c\u8272\u53f7\u4e3a #55295B\u3002","title":"\u6b22\u8fce\u9605\u8bfbNebulaGraph 3.6.0 \u6587\u6863"},{"location":"#_1","text":"\u5feb\u901f\u5f00\u59cb \u90e8\u7f72\u8981\u6c42 nGQL \u547d\u4ee4\u6c47\u603b FAQ \u751f\u6001\u5de5\u5177 Academy \u8bfe\u7a0b","title":"\u5feb\u901f\u5f00\u59cb"},{"location":"#_2","text":"NebulaGraph 3.6.0 NebulaGraph Dashboard Community NebulaGraph Studio","title":"\u6700\u65b0\u53d1\u5e03"},{"location":"#_3","text":"\u5b66\u4e60\u8def\u5f84 \u5f15\u7528 NebulaGraph \u8bba\u575b \u4e3b\u9875 \u7cfb\u5217\u89c6\u9891 \u82f1\u6587\u6587\u6863","title":"\u5176\u4ed6\u8d44\u6599"},{"location":"#_4","text":"Note \u989d\u5916\u7684\u4fe1\u606f\u6216\u8005\u64cd\u4f5c\u76f8\u5173\u7684\u63d0\u9192\u7b49\u3002 Caution \u9700\u8981\u4e25\u683c\u9075\u5b88\u7684\u6ce8\u610f\u4e8b\u9879\u3002\u4e0d\u9075\u5b88 caution \u53ef\u80fd\u5bfc\u81f4\u7cfb\u7edf\u6545\u969c\u3001\u6570\u636e\u4e22\u5931\u3001\u5b89\u5168\u95ee\u9898\u7b49\u3002 Danger \u4f1a\u5f15\u53d1\u5371\u9669\u7684\u4e8b\u9879\u3002\u4e0d\u9075\u5b88 danger \u5fc5\u5b9a\u4f1a\u5bfc\u81f4\u7cfb\u7edf\u6545\u969c\u3001\u6570\u636e\u4e22\u5931\u3001\u5b89\u5168\u95ee\u9898\u7b49\u3002 Performance \u6027\u80fd\u8c03\u4f18\u65f6\u9700\u8981\u6ce8\u610f\u7684\u4e8b\u9879\u3002 Faq \u5e38\u89c1\u95ee\u9898\u3002 Compatibility nGQL \u4e0e openCypher \u7684\u517c\u5bb9\u6027\u6216 nGQL \u5f53\u524d\u7248\u672c\u4e0e\u5386\u53f2\u7248\u672c\u7684\u517c\u5bb9\u6027\u3002 Enterpriseonly \u63cf\u8ff0\u793e\u533a\u7248\u548c\u4f01\u4e1a\u7248\u7684\u5dee\u5f02\u3002","title":"\u56fe\u4f8b\u8bf4\u660e"},{"location":"#_5","text":"NebulaGraph\u6587\u6863\u4ee5 Markdown \u8bed\u8a00\u7f16\u5199\u3002\u5355\u51fb\u6587\u6863\u6807\u9898\u53f3\u4e0a\u4fa7\u7684\u94c5\u7b14\u56fe\u6807\u5373\u53ef\u63d0\u4ea4\u4fee\u6539\u5efa\u8bae\u3002","title":"\u4fee\u6539\u6587\u6863\u4e2d\u7684\u9519\u8bef"},{"location":"nebula-bench/","text":"NebulaGraph Bench \u00b6 NebulaGraph Bench \u662f\u4e00\u6b3e\u5229\u7528 LDBC \u6570\u636e\u96c6\u5bf9NebulaGraph\u8fdb\u884c\u6027\u80fd\u6d4b\u8bd5\u7684\u5de5\u5177\u3002 \u9002\u7528\u573a\u666f \u00b6 \u751f\u6210\u6d4b\u8bd5\u6570\u636e\u5e76\u5bfc\u5165NebulaGraph\u3002 \u5bf9NebulaGraph\u96c6\u7fa4\u8fdb\u884c\u6027\u80fd\u6d4b\u8bd5\u3002 \u66f4\u65b0\u8bf4\u660e \u00b6 Release \u8be6\u7ec6\u4f7f\u7528\u8bf4\u660e\u8bf7\u53c2\u89c1 NebulaGraph Bench \u3002","title":"NebulaGraph Bench"},{"location":"nebula-bench/#nebulagraph_bench","text":"NebulaGraph Bench \u662f\u4e00\u6b3e\u5229\u7528 LDBC \u6570\u636e\u96c6\u5bf9NebulaGraph\u8fdb\u884c\u6027\u80fd\u6d4b\u8bd5\u7684\u5de5\u5177\u3002","title":"NebulaGraph Bench"},{"location":"nebula-bench/#_1","text":"\u751f\u6210\u6d4b\u8bd5\u6570\u636e\u5e76\u5bfc\u5165NebulaGraph\u3002 \u5bf9NebulaGraph\u96c6\u7fa4\u8fdb\u884c\u6027\u80fd\u6d4b\u8bd5\u3002","title":"\u9002\u7528\u573a\u666f"},{"location":"nebula-bench/#_2","text":"Release \u8be6\u7ec6\u4f7f\u7528\u8bf4\u660e\u8bf7\u53c2\u89c1 NebulaGraph Bench \u3002","title":"\u66f4\u65b0\u8bf4\u660e"},{"location":"nebula-console/","text":"NebulaGraph Console \u00b6 NebulaGraph Console \u662fNebulaGraph\u7684\u539f\u751f\u547d\u4ee4\u884c\u5ba2\u6237\u7aef\uff0c\u7528\u4e8e\u8fde\u63a5NebulaGraph\u96c6\u7fa4\u5e76\u6267\u884c\u67e5\u8be2\uff0c\u540c\u65f6\u652f\u6301\u7ba1\u7406\u53c2\u6570\u3001\u5bfc\u51fa\u547d\u4ee4\u7684\u6267\u884c\u7ed3\u679c\u3001\u5bfc\u5165\u6d4b\u8bd5\u6570\u636e\u96c6\u7b49\u529f\u80fd\u3002 \u7248\u672c\u5bf9\u7167\u8868 \u00b6 \u53c2\u89c1 Github \u3002 \u83b7\u53d6 NebulaGraph Console \u00b6 NebulaGraph Console \u7684\u83b7\u53d6\u65b9\u5f0f\u5982\u4e0b\uff1a \u4ece GitHub \u53d1\u5e03\u9875 \u4e0b\u8f7d\u4e8c\u8fdb\u5236\u6587\u4ef6\u3002 \u7f16\u8bd1\u6e90\u7801\u83b7\u53d6\u4e8c\u8fdb\u5236\u6587\u4ef6\u3002\u7f16\u8bd1\u65b9\u6cd5\u53c2\u89c1 Install from source code \u3002 \u529f\u80fd\u8bf4\u660e \u00b6 \u8fde\u63a5NebulaGraph \u00b6 \u8fd0\u884c\u4e8c\u8fdb\u5236\u6587\u4ef6 nebula-console \u8fde\u63a5NebulaGraph\u7684\u547d\u4ee4\u8bed\u6cd5\u5982\u4e0b\uff1a <path_of_console> -addr <ip> -port <port> -u <username> -p <password> path_of_console \u662f NebulaGraph Console \u4e8c\u8fdb\u5236\u6587\u4ef6\u7684\u5b58\u50a8\u8def\u5f84\u3002 \u5f00\u542f SSL \u52a0\u5bc6\u540e\uff0c\u9700\u8981\u53cc\u5411\u8ba4\u8bc1\u65f6\uff0c\u8fde\u63a5\u65f6\u9700\u8981\u6307\u5b9a SSL \u76f8\u5173\u53c2\u6570\u3002 \u793a\u4f8b\u5982\u4e0b\uff1a \u76f4\u63a5\u8fde\u63a5NebulaGraph ./nebula-console -addr 192 .168.8.100 -port 9669 -u root -p nebula \u5f00\u542f SSL \u52a0\u5bc6\u4e14\u9700\u8981\u53cc\u5411\u8ba4\u8bc1 ./nebula-console -addr 192 .168.8.100 -port 9669 -u root -p nebula -enable_ssl -ssl_root_ca_path /home/xxx/cert/root.crt -ssl_cert_path /home/xxx/cert/client.crt -ssl_private_key_path /home/xxx/cert/client.key \u5e38\u7528\u53c2\u6570\u7684\u8bf4\u660e\u5982\u4e0b\u3002 \u53c2\u6570 \u8bf4\u660e -h/-help \u663e\u793a\u5e2e\u52a9\u83dc\u5355\u3002 -addr/-address \u8bbe\u7f6e\u8981\u8fde\u63a5\u7684 Graph \u670d\u52a1\u7684 IP \u5730\u5740\u3002\u9ed8\u8ba4\u5730\u5740\u4e3a 127.0.0.1\u3002 -P/-port \u8bbe\u7f6e\u8981\u8fde\u63a5\u7684 Graph \u670d\u52a1\u7684\u7aef\u53e3\u3002\u9ed8\u8ba4\u7aef\u53e3\u4e3a 9669\u3002 -u/-user \u8bbe\u7f6eNebulaGraph\u8d26\u53f7\u7684\u7528\u6237\u540d\u3002\u672a\u542f\u7528\u8eab\u4efd\u8ba4\u8bc1\u65f6\uff0c\u53ef\u4ee5\u4f7f\u7528\u4efb\u610f\u5df2\u5b58\u5728\u7684\u7528\u6237\u540d\uff08\u9ed8\u8ba4\u4e3a root \uff09\u3002 -p/-password \u8bbe\u7f6e\u7528\u6237\u540d\u5bf9\u5e94\u7684\u5bc6\u7801\u3002\u672a\u542f\u7528\u8eab\u4efd\u8ba4\u8bc1\u65f6\uff0c\u5bc6\u7801\u53ef\u4ee5\u586b\u5199\u4efb\u610f\u5b57\u7b26\u3002 -t/-timeout \u8bbe\u7f6e\u6574\u6570\u7c7b\u578b\u7684\u8fde\u63a5\u8d85\u65f6\u65f6\u95f4\u3002\u5355\u4f4d\u4e3a\u6beb\u79d2\uff0c\u9ed8\u8ba4\u503c\u4e3a 120\u3002 -e/-eval \u8bbe\u7f6e\u5b57\u7b26\u4e32\u7c7b\u578b\u7684 nGQL \u8bed\u53e5\u3002\u8fde\u63a5\u6210\u529f\u540e\u4f1a\u6267\u884c\u4e00\u6b21\u8be5\u8bed\u53e5\u5e76\u8fd4\u56de\u7ed3\u679c\uff0c\u7136\u540e\u81ea\u52a8\u65ad\u5f00\u8fde\u63a5\u3002 -f/-file \u8bbe\u7f6e\u5b58\u50a8 nGQL \u8bed\u53e5\u7684\u6587\u4ef6\u7684\u8def\u5f84\u3002\u8fde\u63a5\u6210\u529f\u540e\u4f1a\u6267\u884c\u8be5\u6587\u4ef6\u5185\u7684 nGQL \u8bed\u53e5\u5e76\u8fd4\u56de\u7ed3\u679c\uff0c\u6267\u884c\u5b8c\u6bd5\u540e\u81ea\u52a8\u65ad\u5f00\u8fde\u63a5\u3002 -enable_ssl \u8fde\u63a5NebulaGraph\u65f6\u4f7f\u7528 SSL \u52a0\u5bc6\u53cc\u5411\u8ba4\u8bc1\u3002 -ssl_root_ca_path \u6307\u5b9a CA \u6839\u8bc1\u4e66\u7684\u5b58\u50a8\u8def\u5f84\u3002 -ssl_cert_path \u6307\u5b9a SSL \u516c\u94a5\u8bc1\u4e66\u7684\u5b58\u50a8\u8def\u5f84\u3002 -ssl_private_key_path \u6307\u5b9a SSL \u5bc6\u94a5\u7684\u5b58\u50a8\u8def\u5f84\u3002 -ssl_insecure_skip_verify \u6307\u5b9a\u5ba2\u6237\u7aef\u662f\u5426\u8df3\u8fc7\u9a8c\u8bc1\u670d\u52a1\u7aef\u7684\u8bc1\u4e66\u94fe\u548c\u4e3b\u673a\u540d\u3002\u9ed8\u8ba4\u4e3a false \u3002\u5982\u679c\u8bbe\u7f6e\u4e3a true \uff0c\u5219\u63a5\u53d7\u670d\u52a1\u7aef\u63d0\u4f9b\u7684\u4efb\u4f55\u8bc1\u4e66\u94fe\u548c\u4e3b\u673a\u540d\u3002 \u66f4\u591a\u53c2\u6570\u53c2\u89c1 \u9879\u76ee\u4ed3\u5e93 \u3002 \u7ba1\u7406\u53c2\u6570 \u00b6 NebulaGraph Console \u53ef\u4ee5\u4fdd\u5b58\u53c2\u6570\uff0c\u7528\u4e8e\u53c2\u6570\u5316\u67e5\u8be2\u3002 Note VID \u4e0d\u652f\u6301\u53c2\u6570\u5316\u67e5\u8be2\u3002 SAMPLE \u5b50\u53e5\u4e2d\u4e0d\u652f\u6301\u53c2\u6570\u5316\u67e5\u8be2\u3002 \u4f1a\u8bdd\u91ca\u653e\u540e\uff0c\u53c2\u6570\u4e0d\u4f1a\u4fdd\u7559\u3002 \u4fdd\u5b58\u53c2\u6570\u547d\u4ee4\u5982\u4e0b\uff1a nebula> :param <param_name> => <param_value>; \u793a\u4f8b\uff1a nebula> :param p1 => \"Tim Duncan\"; nebula> MATCH (v:player{name:$p1})-[:follow]->(n) RETURN v,n; +----------------------------------------------------+-------------------------------------------------------+ | v | n | +----------------------------------------------------+-------------------------------------------------------+ | (\"player100\" :player{age: 42, name: \"Tim Duncan\"}) | (\"player125\" :player{age: 41, name: \"Manu Ginobili\"}) | | (\"player100\" :player{age: 42, name: \"Tim Duncan\"}) | (\"player101\" :player{age: 36, name: \"Tony Parker\"}) | +----------------------------------------------------+-------------------------------------------------------+ nebula> :param p2 => {\"a\":3,\"b\":false,\"c\":\"Tim Duncan\"}; nebula> RETURN $p2.b AS b; +-------+ | b | +-------+ | false | +-------+ \u67e5\u770b\u5f53\u524d\u4fdd\u5b58\u7684\u6240\u6709\u53c2\u6570\uff0c\u547d\u4ee4\u5982\u4e0b\uff1a nebula> :params; \u67e5\u770b\u6307\u5b9a\u53c2\u6570\uff0c\u547d\u4ee4\u5982\u4e0b\uff1a nebula> :params <param_name>; \u5220\u9664\u6307\u5b9a\u53c2\u6570\uff0c\u547d\u4ee4\u5982\u4e0b\uff1a nebula> :param <param_name> =>; \u5bfc\u51fa\u6267\u884c\u7ed3\u679c \u00b6 \u5bfc\u51fa\u547d\u4ee4\u6267\u884c\u7684\u8fd4\u56de\u7ed3\u679c\uff0c\u53ef\u4ee5\u4fdd\u5b58\u4e3a CSV \u6587\u4ef6\u3001 DOT \u6587\u4ef6\u6216\u8005 Profile/Explain \u7ed3\u679c\u3002 Note \u6587\u4ef6\u4fdd\u5b58\u5728\u5f53\u524d\u5de5\u4f5c\u76ee\u5f55\u4e2d\uff0c\u5373 Linux \u547d\u4ee4 pwd \u663e\u793a\u7684\u76ee\u5f55\u3002 \u547d\u4ee4\u53ea\u5bf9\u4e0b\u4e00\u6761\u67e5\u8be2\u8bed\u53e5\u751f\u6548\u3002 DOT \u6587\u4ef6\u7684\u5185\u5bb9\u53ef\u4ee5\u590d\u5236\u540e\u5728 GraphvizOnline \u7f51\u9875\u4e2d\u7c98\u8d34\uff0c\u751f\u6210\u53ef\u89c6\u5316\u7684\u6267\u884c\u8ba1\u5212\u56fe\u3002 \u5bfc\u51fa CSV \u6587\u4ef6\u547d\u4ee4\u5982\u4e0b\uff1a nebula> :CSV <file_name.csv>; \u5bfc\u51fa DOT \u6587\u4ef6\u547d\u4ee4\u5982\u4e0b\uff1a nebula> :dot <file_name.dot>; \u793a\u4f8b\uff1a nebula> :dot a.dot; nebula> PROFILE FORMAT=\"dot\" GO FROM \"player100\" OVER follow; \u5bfc\u51fa PROFILE/EXPLAIN \u7ed3\u679c\u5230\u6587\u4ef6\u547d\u4ee4\u5982\u4e0b\uff1a nebula> :profile <file_name>; \u6216\u8005 nebula> :explain <file_name>; Note \u76f8\u6bd4\u4e8e Studio \u4e2d\u7684\u622a\u56fe\u3001CSV \u6587\u4ef6\uff0c\u56e0\u4e3a\u4fdd\u6709\u66f4\u591a\u4fe1\u606f\u91cf\u548c\u62e5\u6709\u66f4\u597d\u7684\u53ef\u8bfb\u6027\uff0c\u7ecf\u7531\u6b64\u547d\u4ee4\u8f93\u51fa\u7684\u6587\u672c\u6587\u4ef6\u5185\u5bb9\u662f\u9996\u63a8\u7684\u5728 GitHub issue\u3001\u8bba\u575b\u4e2d\u62a5\u544a\u6267\u884c\u8ba1\u5212\u3001\u56fe\u67e5\u8be2\u8c03\u4f18\u7684\u65b9\u5f0f\u3002 \u793a\u4f8b\uff1a nebula> :profile profile.log nebula> PROFILE GO FROM \"player102\" OVER serve YIELD dst(edge); nebula> :profile profile.dot nebula> PROFILE FORMAT=\"dot\" GO FROM \"player102\" OVER serve YIELD dst(edge); nebula> :explain explain.log nebula> EXPLAIN GO FROM \"player102\" OVER serve YIELD dst(edge); \u52a0\u8f7d\u6d4b\u8bd5\u6570\u636e\u96c6 \u00b6 \u6d4b\u8bd5\u6570\u636e\u96c6\u540d\u79f0\u4e3a basketballplayer\uff0c\u8be6\u7ec6 Schema \u4fe1\u606f\u548c\u6570\u636e\u4fe1\u606f\u8bf7\u4f7f\u7528\u76f8\u5173 SHOW \u547d\u4ee4\u67e5\u770b\u3002 \u52a0\u8f7d\u6d4b\u8bd5\u6570\u636e\u96c6\u547d\u4ee4\u5982\u4e0b\uff1a nebula> :play basketballplayer; \u91cd\u590d\u6267\u884c\u8bed\u53e5 \u00b6 \u91cd\u590d\u6267\u884c\u4e0b\u4e00\u4e2a\u547d\u4ee4 N \u6b21\uff0c\u7136\u540e\u6253\u5370\u5e73\u5747\u6267\u884c\u65f6\u95f4\u3002\u547d\u4ee4\u5982\u4e0b\uff1a nebula> :repeat N; \u793a\u4f8b\uff1a nebula> :repeat 3; nebula> GO FROM \"player100\" OVER follow YIELD dst(edge); +-------------+ | dst(EDGE) | +-------------+ | \"player101\" | | \"player125\" | +-------------+ Got 2 rows (time spent 2602/3214 us) Fri, 20 Aug 2021 06:36:05 UTC +-------------+ | dst(EDGE) | +-------------+ | \"player101\" | | \"player125\" | +-------------+ Got 2 rows (time spent 583/849 us) Fri, 20 Aug 2021 06:36:05 UTC +-------------+ | dst(EDGE) | +-------------+ | \"player101\" | | \"player125\" | +-------------+ Got 2 rows (time spent 496/671 us) Fri, 20 Aug 2021 06:36:05 UTC Executed 3 times, (total time spent 3681/4734 us), (average time spent 1227/1578 us) \u7761\u7720 \u00b6 \u7761\u7720 N \u79d2\u3002\u5e38\u7528\u4e8e\u4fee\u6539 Schema \u7684\u64cd\u4f5c\u4e2d\uff0c\u56e0\u4e3a\u4fee\u6539 Schema \u662f\u5f02\u6b65\u5b9e\u73b0\u7684\uff0c\u9700\u8981\u5728\u4e0b\u4e00\u4e2a\u5fc3\u8df3\u5468\u671f\u624d\u540c\u6b65\u6570\u636e\u3002\u547d\u4ee4\u5982\u4e0b\uff1a nebula> :sleep N; \u65ad\u5f00\u8fde\u63a5 \u00b6 \u7528\u6237\u53ef\u4ee5\u4f7f\u7528 :EXIT \u6216\u8005 :QUIT \u4eceNebulaGraph\u65ad\u5f00\u8fde\u63a5\u3002\u4e3a\u65b9\u4fbf\u4f7f\u7528\uff0cNebulaGraph Console \u652f\u6301\u4f7f\u7528\u4e0d\u5e26\u5192\u53f7\uff08:\uff09\u7684\u5c0f\u5199\u547d\u4ee4\uff0c\u4f8b\u5982 quit \u3002 \u793a\u4f8b\uff1a nebula> :QUIT; Bye root!","title":"NebulaGraph Console"},{"location":"nebula-console/#nebulagraph_console","text":"NebulaGraph Console \u662fNebulaGraph\u7684\u539f\u751f\u547d\u4ee4\u884c\u5ba2\u6237\u7aef\uff0c\u7528\u4e8e\u8fde\u63a5NebulaGraph\u96c6\u7fa4\u5e76\u6267\u884c\u67e5\u8be2\uff0c\u540c\u65f6\u652f\u6301\u7ba1\u7406\u53c2\u6570\u3001\u5bfc\u51fa\u547d\u4ee4\u7684\u6267\u884c\u7ed3\u679c\u3001\u5bfc\u5165\u6d4b\u8bd5\u6570\u636e\u96c6\u7b49\u529f\u80fd\u3002","title":"NebulaGraph Console"},{"location":"nebula-console/#_1","text":"\u53c2\u89c1 Github \u3002","title":"\u7248\u672c\u5bf9\u7167\u8868"},{"location":"nebula-console/#nebulagraph_console_1","text":"NebulaGraph Console \u7684\u83b7\u53d6\u65b9\u5f0f\u5982\u4e0b\uff1a \u4ece GitHub \u53d1\u5e03\u9875 \u4e0b\u8f7d\u4e8c\u8fdb\u5236\u6587\u4ef6\u3002 \u7f16\u8bd1\u6e90\u7801\u83b7\u53d6\u4e8c\u8fdb\u5236\u6587\u4ef6\u3002\u7f16\u8bd1\u65b9\u6cd5\u53c2\u89c1 Install from source code \u3002","title":"\u83b7\u53d6 NebulaGraph Console"},{"location":"nebula-console/#_2","text":"","title":"\u529f\u80fd\u8bf4\u660e"},{"location":"nebula-console/#nebulagraph","text":"\u8fd0\u884c\u4e8c\u8fdb\u5236\u6587\u4ef6 nebula-console \u8fde\u63a5NebulaGraph\u7684\u547d\u4ee4\u8bed\u6cd5\u5982\u4e0b\uff1a <path_of_console> -addr <ip> -port <port> -u <username> -p <password> path_of_console \u662f NebulaGraph Console \u4e8c\u8fdb\u5236\u6587\u4ef6\u7684\u5b58\u50a8\u8def\u5f84\u3002 \u5f00\u542f SSL \u52a0\u5bc6\u540e\uff0c\u9700\u8981\u53cc\u5411\u8ba4\u8bc1\u65f6\uff0c\u8fde\u63a5\u65f6\u9700\u8981\u6307\u5b9a SSL \u76f8\u5173\u53c2\u6570\u3002 \u793a\u4f8b\u5982\u4e0b\uff1a \u76f4\u63a5\u8fde\u63a5NebulaGraph ./nebula-console -addr 192 .168.8.100 -port 9669 -u root -p nebula \u5f00\u542f SSL \u52a0\u5bc6\u4e14\u9700\u8981\u53cc\u5411\u8ba4\u8bc1 ./nebula-console -addr 192 .168.8.100 -port 9669 -u root -p nebula -enable_ssl -ssl_root_ca_path /home/xxx/cert/root.crt -ssl_cert_path /home/xxx/cert/client.crt -ssl_private_key_path /home/xxx/cert/client.key \u5e38\u7528\u53c2\u6570\u7684\u8bf4\u660e\u5982\u4e0b\u3002 \u53c2\u6570 \u8bf4\u660e -h/-help \u663e\u793a\u5e2e\u52a9\u83dc\u5355\u3002 -addr/-address \u8bbe\u7f6e\u8981\u8fde\u63a5\u7684 Graph \u670d\u52a1\u7684 IP \u5730\u5740\u3002\u9ed8\u8ba4\u5730\u5740\u4e3a 127.0.0.1\u3002 -P/-port \u8bbe\u7f6e\u8981\u8fde\u63a5\u7684 Graph \u670d\u52a1\u7684\u7aef\u53e3\u3002\u9ed8\u8ba4\u7aef\u53e3\u4e3a 9669\u3002 -u/-user \u8bbe\u7f6eNebulaGraph\u8d26\u53f7\u7684\u7528\u6237\u540d\u3002\u672a\u542f\u7528\u8eab\u4efd\u8ba4\u8bc1\u65f6\uff0c\u53ef\u4ee5\u4f7f\u7528\u4efb\u610f\u5df2\u5b58\u5728\u7684\u7528\u6237\u540d\uff08\u9ed8\u8ba4\u4e3a root \uff09\u3002 -p/-password \u8bbe\u7f6e\u7528\u6237\u540d\u5bf9\u5e94\u7684\u5bc6\u7801\u3002\u672a\u542f\u7528\u8eab\u4efd\u8ba4\u8bc1\u65f6\uff0c\u5bc6\u7801\u53ef\u4ee5\u586b\u5199\u4efb\u610f\u5b57\u7b26\u3002 -t/-timeout \u8bbe\u7f6e\u6574\u6570\u7c7b\u578b\u7684\u8fde\u63a5\u8d85\u65f6\u65f6\u95f4\u3002\u5355\u4f4d\u4e3a\u6beb\u79d2\uff0c\u9ed8\u8ba4\u503c\u4e3a 120\u3002 -e/-eval \u8bbe\u7f6e\u5b57\u7b26\u4e32\u7c7b\u578b\u7684 nGQL \u8bed\u53e5\u3002\u8fde\u63a5\u6210\u529f\u540e\u4f1a\u6267\u884c\u4e00\u6b21\u8be5\u8bed\u53e5\u5e76\u8fd4\u56de\u7ed3\u679c\uff0c\u7136\u540e\u81ea\u52a8\u65ad\u5f00\u8fde\u63a5\u3002 -f/-file \u8bbe\u7f6e\u5b58\u50a8 nGQL \u8bed\u53e5\u7684\u6587\u4ef6\u7684\u8def\u5f84\u3002\u8fde\u63a5\u6210\u529f\u540e\u4f1a\u6267\u884c\u8be5\u6587\u4ef6\u5185\u7684 nGQL \u8bed\u53e5\u5e76\u8fd4\u56de\u7ed3\u679c\uff0c\u6267\u884c\u5b8c\u6bd5\u540e\u81ea\u52a8\u65ad\u5f00\u8fde\u63a5\u3002 -enable_ssl \u8fde\u63a5NebulaGraph\u65f6\u4f7f\u7528 SSL \u52a0\u5bc6\u53cc\u5411\u8ba4\u8bc1\u3002 -ssl_root_ca_path \u6307\u5b9a CA \u6839\u8bc1\u4e66\u7684\u5b58\u50a8\u8def\u5f84\u3002 -ssl_cert_path \u6307\u5b9a SSL \u516c\u94a5\u8bc1\u4e66\u7684\u5b58\u50a8\u8def\u5f84\u3002 -ssl_private_key_path \u6307\u5b9a SSL \u5bc6\u94a5\u7684\u5b58\u50a8\u8def\u5f84\u3002 -ssl_insecure_skip_verify \u6307\u5b9a\u5ba2\u6237\u7aef\u662f\u5426\u8df3\u8fc7\u9a8c\u8bc1\u670d\u52a1\u7aef\u7684\u8bc1\u4e66\u94fe\u548c\u4e3b\u673a\u540d\u3002\u9ed8\u8ba4\u4e3a false \u3002\u5982\u679c\u8bbe\u7f6e\u4e3a true \uff0c\u5219\u63a5\u53d7\u670d\u52a1\u7aef\u63d0\u4f9b\u7684\u4efb\u4f55\u8bc1\u4e66\u94fe\u548c\u4e3b\u673a\u540d\u3002 \u66f4\u591a\u53c2\u6570\u53c2\u89c1 \u9879\u76ee\u4ed3\u5e93 \u3002","title":"\u8fde\u63a5NebulaGraph"},{"location":"nebula-console/#_3","text":"NebulaGraph Console \u53ef\u4ee5\u4fdd\u5b58\u53c2\u6570\uff0c\u7528\u4e8e\u53c2\u6570\u5316\u67e5\u8be2\u3002 Note VID \u4e0d\u652f\u6301\u53c2\u6570\u5316\u67e5\u8be2\u3002 SAMPLE \u5b50\u53e5\u4e2d\u4e0d\u652f\u6301\u53c2\u6570\u5316\u67e5\u8be2\u3002 \u4f1a\u8bdd\u91ca\u653e\u540e\uff0c\u53c2\u6570\u4e0d\u4f1a\u4fdd\u7559\u3002 \u4fdd\u5b58\u53c2\u6570\u547d\u4ee4\u5982\u4e0b\uff1a nebula> :param <param_name> => <param_value>; \u793a\u4f8b\uff1a nebula> :param p1 => \"Tim Duncan\"; nebula> MATCH (v:player{name:$p1})-[:follow]->(n) RETURN v,n; +----------------------------------------------------+-------------------------------------------------------+ | v | n | +----------------------------------------------------+-------------------------------------------------------+ | (\"player100\" :player{age: 42, name: \"Tim Duncan\"}) | (\"player125\" :player{age: 41, name: \"Manu Ginobili\"}) | | (\"player100\" :player{age: 42, name: \"Tim Duncan\"}) | (\"player101\" :player{age: 36, name: \"Tony Parker\"}) | +----------------------------------------------------+-------------------------------------------------------+ nebula> :param p2 => {\"a\":3,\"b\":false,\"c\":\"Tim Duncan\"}; nebula> RETURN $p2.b AS b; +-------+ | b | +-------+ | false | +-------+ \u67e5\u770b\u5f53\u524d\u4fdd\u5b58\u7684\u6240\u6709\u53c2\u6570\uff0c\u547d\u4ee4\u5982\u4e0b\uff1a nebula> :params; \u67e5\u770b\u6307\u5b9a\u53c2\u6570\uff0c\u547d\u4ee4\u5982\u4e0b\uff1a nebula> :params <param_name>; \u5220\u9664\u6307\u5b9a\u53c2\u6570\uff0c\u547d\u4ee4\u5982\u4e0b\uff1a nebula> :param <param_name> =>;","title":"\u7ba1\u7406\u53c2\u6570"},{"location":"nebula-console/#_4","text":"\u5bfc\u51fa\u547d\u4ee4\u6267\u884c\u7684\u8fd4\u56de\u7ed3\u679c\uff0c\u53ef\u4ee5\u4fdd\u5b58\u4e3a CSV \u6587\u4ef6\u3001 DOT \u6587\u4ef6\u6216\u8005 Profile/Explain \u7ed3\u679c\u3002 Note \u6587\u4ef6\u4fdd\u5b58\u5728\u5f53\u524d\u5de5\u4f5c\u76ee\u5f55\u4e2d\uff0c\u5373 Linux \u547d\u4ee4 pwd \u663e\u793a\u7684\u76ee\u5f55\u3002 \u547d\u4ee4\u53ea\u5bf9\u4e0b\u4e00\u6761\u67e5\u8be2\u8bed\u53e5\u751f\u6548\u3002 DOT \u6587\u4ef6\u7684\u5185\u5bb9\u53ef\u4ee5\u590d\u5236\u540e\u5728 GraphvizOnline \u7f51\u9875\u4e2d\u7c98\u8d34\uff0c\u751f\u6210\u53ef\u89c6\u5316\u7684\u6267\u884c\u8ba1\u5212\u56fe\u3002 \u5bfc\u51fa CSV \u6587\u4ef6\u547d\u4ee4\u5982\u4e0b\uff1a nebula> :CSV <file_name.csv>; \u5bfc\u51fa DOT \u6587\u4ef6\u547d\u4ee4\u5982\u4e0b\uff1a nebula> :dot <file_name.dot>; \u793a\u4f8b\uff1a nebula> :dot a.dot; nebula> PROFILE FORMAT=\"dot\" GO FROM \"player100\" OVER follow; \u5bfc\u51fa PROFILE/EXPLAIN \u7ed3\u679c\u5230\u6587\u4ef6\u547d\u4ee4\u5982\u4e0b\uff1a nebula> :profile <file_name>; \u6216\u8005 nebula> :explain <file_name>; Note \u76f8\u6bd4\u4e8e Studio \u4e2d\u7684\u622a\u56fe\u3001CSV \u6587\u4ef6\uff0c\u56e0\u4e3a\u4fdd\u6709\u66f4\u591a\u4fe1\u606f\u91cf\u548c\u62e5\u6709\u66f4\u597d\u7684\u53ef\u8bfb\u6027\uff0c\u7ecf\u7531\u6b64\u547d\u4ee4\u8f93\u51fa\u7684\u6587\u672c\u6587\u4ef6\u5185\u5bb9\u662f\u9996\u63a8\u7684\u5728 GitHub issue\u3001\u8bba\u575b\u4e2d\u62a5\u544a\u6267\u884c\u8ba1\u5212\u3001\u56fe\u67e5\u8be2\u8c03\u4f18\u7684\u65b9\u5f0f\u3002 \u793a\u4f8b\uff1a nebula> :profile profile.log nebula> PROFILE GO FROM \"player102\" OVER serve YIELD dst(edge); nebula> :profile profile.dot nebula> PROFILE FORMAT=\"dot\" GO FROM \"player102\" OVER serve YIELD dst(edge); nebula> :explain explain.log nebula> EXPLAIN GO FROM \"player102\" OVER serve YIELD dst(edge);","title":"\u5bfc\u51fa\u6267\u884c\u7ed3\u679c"},{"location":"nebula-console/#_5","text":"\u6d4b\u8bd5\u6570\u636e\u96c6\u540d\u79f0\u4e3a basketballplayer\uff0c\u8be6\u7ec6 Schema \u4fe1\u606f\u548c\u6570\u636e\u4fe1\u606f\u8bf7\u4f7f\u7528\u76f8\u5173 SHOW \u547d\u4ee4\u67e5\u770b\u3002 \u52a0\u8f7d\u6d4b\u8bd5\u6570\u636e\u96c6\u547d\u4ee4\u5982\u4e0b\uff1a nebula> :play basketballplayer;","title":"\u52a0\u8f7d\u6d4b\u8bd5\u6570\u636e\u96c6"},{"location":"nebula-console/#_6","text":"\u91cd\u590d\u6267\u884c\u4e0b\u4e00\u4e2a\u547d\u4ee4 N \u6b21\uff0c\u7136\u540e\u6253\u5370\u5e73\u5747\u6267\u884c\u65f6\u95f4\u3002\u547d\u4ee4\u5982\u4e0b\uff1a nebula> :repeat N; \u793a\u4f8b\uff1a nebula> :repeat 3; nebula> GO FROM \"player100\" OVER follow YIELD dst(edge); +-------------+ | dst(EDGE) | +-------------+ | \"player101\" | | \"player125\" | +-------------+ Got 2 rows (time spent 2602/3214 us) Fri, 20 Aug 2021 06:36:05 UTC +-------------+ | dst(EDGE) | +-------------+ | \"player101\" | | \"player125\" | +-------------+ Got 2 rows (time spent 583/849 us) Fri, 20 Aug 2021 06:36:05 UTC +-------------+ | dst(EDGE) | +-------------+ | \"player101\" | | \"player125\" | +-------------+ Got 2 rows (time spent 496/671 us) Fri, 20 Aug 2021 06:36:05 UTC Executed 3 times, (total time spent 3681/4734 us), (average time spent 1227/1578 us)","title":"\u91cd\u590d\u6267\u884c\u8bed\u53e5"},{"location":"nebula-console/#_7","text":"\u7761\u7720 N \u79d2\u3002\u5e38\u7528\u4e8e\u4fee\u6539 Schema \u7684\u64cd\u4f5c\u4e2d\uff0c\u56e0\u4e3a\u4fee\u6539 Schema \u662f\u5f02\u6b65\u5b9e\u73b0\u7684\uff0c\u9700\u8981\u5728\u4e0b\u4e00\u4e2a\u5fc3\u8df3\u5468\u671f\u624d\u540c\u6b65\u6570\u636e\u3002\u547d\u4ee4\u5982\u4e0b\uff1a nebula> :sleep N;","title":"\u7761\u7720"},{"location":"nebula-console/#_8","text":"\u7528\u6237\u53ef\u4ee5\u4f7f\u7528 :EXIT \u6216\u8005 :QUIT \u4eceNebulaGraph\u65ad\u5f00\u8fde\u63a5\u3002\u4e3a\u65b9\u4fbf\u4f7f\u7528\uff0cNebulaGraph Console \u652f\u6301\u4f7f\u7528\u4e0d\u5e26\u5192\u53f7\uff08:\uff09\u7684\u5c0f\u5199\u547d\u4ee4\uff0c\u4f8b\u5982 quit \u3002 \u793a\u4f8b\uff1a nebula> :QUIT; Bye root!","title":"\u65ad\u5f00\u8fde\u63a5"},{"location":"1.introduction/1.what-is-nebula-graph/","text":"\u4ec0\u4e48\u662fNebulaGraph \u00b6 NebulaGraph\u662f\u4e00\u6b3e\u5f00\u6e90\u7684\u3001\u5206\u5e03\u5f0f\u7684\u3001\u6613\u6269\u5c55\u7684\u539f\u751f\u56fe\u6570\u636e\u5e93\uff0c\u80fd\u591f\u627f\u8f7d\u5305\u542b\u6570\u5343\u4ebf\u4e2a\u70b9\u548c\u6570\u4e07\u4ebf\u6761\u8fb9\u7684\u8d85\u5927\u89c4\u6a21\u6570\u636e\u96c6\uff0c\u5e76\u4e14\u63d0\u4f9b\u6beb\u79d2\u7ea7\u67e5\u8be2\u3002 \u4ec0\u4e48\u662f\u56fe\u6570\u636e\u5e93 \u00b6 \u56fe\u6570\u636e\u5e93\u662f\u4e13\u95e8\u5b58\u50a8\u5e9e\u5927\u7684\u56fe\u5f62\u7f51\u7edc\u5e76\u4ece\u4e2d\u68c0\u7d22\u4fe1\u606f\u7684\u6570\u636e\u5e93\u3002\u5b83\u53ef\u4ee5\u5c06\u56fe\u4e2d\u7684\u6570\u636e\u9ad8\u6548\u5b58\u50a8\u4e3a\u70b9\uff08Vertex\uff09\u548c\u8fb9\uff08Edge\uff09\uff0c\u8fd8\u53ef\u4ee5\u5c06\u5c5e\u6027\uff08Property\uff09\u9644\u52a0\u5230\u70b9\u548c\u8fb9\u4e0a\u3002 \u56fe\u6570\u636e\u5e93\u9002\u5408\u5b58\u50a8\u5927\u591a\u6570\u4ece\u73b0\u5b9e\u62bd\u8c61\u51fa\u7684\u6570\u636e\u7c7b\u578b\u3002\u4e16\u754c\u4e0a\u51e0\u4e4e\u6240\u6709\u9886\u57df\u7684\u4e8b\u7269\u90fd\u6709\u5185\u5728\u8054\u7cfb\uff0c\u50cf\u5173\u7cfb\u578b\u6570\u636e\u5e93\u8fd9\u6837\u7684\u5efa\u6a21\u7cfb\u7edf\u4f1a\u63d0\u53d6\u5b9e\u4f53\u4e4b\u95f4\u7684\u5173\u7cfb\uff0c\u5e76\u5c06\u5173\u7cfb\u5355\u72ec\u5b58\u50a8\u5230\u8868\u548c\u5217\u4e2d\uff0c\u800c\u5b9e\u4f53\u7684\u7c7b\u578b\u548c\u5c5e\u6027\u5b58\u50a8\u5728\u5176\u4ed6\u5217\u751a\u81f3\u5176\u4ed6\u8868\u4e2d\uff0c\u8fd9\u4f7f\u5f97\u6570\u636e\u7ba1\u7406\u8d39\u65f6\u8d39\u529b\u3002 NebulaGraph\u4f5c\u4e3a\u4e00\u4e2a\u5178\u578b\u7684\u56fe\u6570\u636e\u5e93\uff0c\u53ef\u4ee5\u5c06\u4e30\u5bcc\u7684\u5173\u7cfb\u901a\u8fc7\u8fb9\u53ca\u5176\u7c7b\u578b\u548c\u5c5e\u6027\u81ea\u7136\u5730\u5448\u73b0\u3002 NebulaGraph\u7684\u4f18\u52bf \u00b6 \u5f00\u6e90 \u00b6 NebulaGraph\u662f\u5728 Apache 2.0 \u6761\u6b3e\u4e0b\u5f00\u53d1\u7684\u3002\u8d8a\u6765\u8d8a\u591a\u7684\u4eba\uff0c\u5982\u6570\u636e\u5e93\u5f00\u53d1\u4eba\u5458\u3001\u6570\u636e\u79d1\u5b66\u5bb6\u3001\u5b89\u5168\u4e13\u5bb6\u3001\u7b97\u6cd5\u5de5\u7a0b\u5e08\uff0c\u90fd\u53c2\u4e0e\u5230NebulaGraph\u7684\u8bbe\u8ba1\u548c\u5f00\u53d1\u4e2d\u6765\uff0c\u6b22\u8fce\u8bbf\u95ee NebulaGraph GitHub \u4e3b\u9875 \u53c2\u4e0e\u5f00\u6e90\u9879\u76ee\u3002 \u9ad8\u6027\u80fd \u00b6 \u57fa\u4e8e\u56fe\u6570\u636e\u5e93\u7684\u7279\u6027\u4f7f\u7528 C++ \u7f16\u5199\u7684NebulaGraph\uff0c\u53ef\u4ee5\u63d0\u4f9b\u6beb\u79d2\u7ea7\u67e5\u8be2\u3002\u4f17\u591a\u6570\u636e\u5e93\u4e2d\uff0cNebulaGraph\u5728\u56fe\u6570\u636e\u670d\u52a1\u9886\u57df\u5c55\u73b0\u4e86\u5353\u8d8a\u7684\u6027\u80fd\uff0c\u6570\u636e\u89c4\u6a21\u8d8a\u5927\uff0cNebulaGraph\u4f18\u52bf\u5c31\u8d8a\u5927\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1 NebulaGraph benchmarking \u9875\u9762 \u3002 \u6613\u6269\u5c55 \u00b6 NebulaGraph\u91c7\u7528 shared-nothing \u67b6\u6784\uff0c\u652f\u6301\u5728\u4e0d\u505c\u6b62\u6570\u636e\u5e93\u670d\u52a1\u7684\u60c5\u51b5\u4e0b\u6269\u7f29\u5bb9\u3002 \u6613\u5f00\u53d1 \u00b6 NebulaGraph\u63d0\u4f9b Java\u3001Python\u3001C++ \u548c Go \u7b49\u6d41\u884c\u7f16\u7a0b\u8bed\u8a00\u7684\u5ba2\u6237\u7aef\uff0c\u66f4\u591a\u5ba2\u6237\u7aef\u4ecd\u5728\u5f00\u53d1\u4e2d\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1 NebulaGraph clients \u3002 \u9ad8\u53ef\u9760\u8bbf\u95ee\u63a7\u5236 \u00b6 NebulaGraph\u652f\u6301\u4e25\u683c\u7684\u89d2\u8272\u8bbf\u95ee\u63a7\u5236\u548c LDAP\uff08Lightweight Directory Access Protocol\uff09\u7b49\u5916\u90e8\u8ba4\u8bc1\u670d\u52a1\uff0c\u80fd\u591f\u6709\u6548\u63d0\u9ad8\u6570\u636e\u5b89\u5168\u6027\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1 \u9a8c\u8bc1\u548c\u6388\u6743 \u3002 \u751f\u6001\u591a\u6837\u5316 \u00b6 NebulaGraph\u5f00\u653e\u4e86\u8d8a\u6765\u8d8a\u591a\u7684\u539f\u751f\u5de5\u5177\uff0c\u4f8b\u5982 NebulaGraph Studio \u3001 NebulaGraph Console \u3001 NebulaGraph Exchange \u7b49\uff0c\u66f4\u591a\u5de5\u5177\u53ef\u4ee5\u67e5\u770b \u751f\u6001\u5de5\u5177\u6982\u89c8 \u3002 \u6b64\u5916\uff0cNebulaGraph\u8fd8\u5177\u5907\u4e0e Spark\u3001Flink\u3001HBase \u7b49\u4ea7\u54c1\u6574\u5408\u7684\u80fd\u529b\uff0c\u5728\u8fd9\u4e2a\u5145\u6ee1\u6311\u6218\u4e0e\u673a\u9047\u7684\u65f6\u4ee3\uff0c\u5927\u5927\u589e\u5f3a\u4e86\u81ea\u8eab\u7684\u7ade\u4e89\u529b\u3002 \u517c\u5bb9 openCypher \u67e5\u8be2\u8bed\u8a00 \u00b6 NebulaGraph\u67e5\u8be2\u8bed\u8a00\uff0c\u7b80\u79f0\u4e3a nGQL\uff0c\u662f\u4e00\u79cd\u58f0\u660e\u6027\u7684\u3001\u90e8\u5206\u517c\u5bb9 openCypher \u7684\u6587\u672c\u67e5\u8be2\u8bed\u8a00\uff0c\u6613\u4e8e\u7406\u89e3\u548c\u4f7f\u7528\u3002\u8be6\u7ec6\u8bed\u6cd5\u8bf7\u53c2\u89c1 nGQL \u6307\u5357 \u3002 \u9762\u5411\u672a\u6765\u786c\u4ef6\uff0c\u8bfb\u5199\u5e73\u8861 \u00b6 \u95ea\u5b58\u578b\u8bbe\u5907\u6709\u7740\u6781\u9ad8\u7684\u6027\u80fd\uff0c\u5e76\u4e14 \u4ef7\u683c\u5feb\u901f\u4e0b\u964d \uff0cNebulaGraph\u662f\u4e00\u4e2a\u9762\u5411 SSD \u8bbe\u8ba1\u7684\u4ea7\u54c1\uff0c\u76f8\u6bd4\u4e8e\u57fa\u4e8e HDD + \u5927\u5185\u5b58\u7684\u4ea7\u54c1\uff0c\u66f4\u9002\u5408\u9762\u5411\u672a\u6765\u7684\u786c\u4ef6\u8d8b\u52bf\uff0c\u4e5f\u66f4\u5bb9\u6613\u505a\u5230\u8bfb\u5199\u5e73\u8861\u3002 \u7075\u6d3b\u6570\u636e\u5efa\u6a21 \u00b6 \u7528\u6237\u53ef\u4ee5\u8f7b\u677e\u5730\u5728NebulaGraph\u4e2d\u5efa\u7acb\u6570\u636e\u6a21\u578b\uff0c\u4e0d\u5fc5\u5c06\u6570\u636e\u5f3a\u5236\u8f6c\u6362\u4e3a\u5173\u7cfb\u8868\u3002\u800c\u4e14\u53ef\u4ee5\u81ea\u7531\u589e\u52a0\u3001\u66f4\u65b0\u548c\u5220\u9664\u5c5e\u6027\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1 \u6570\u636e\u6a21\u578b \u3002 \u5e7f\u53d7\u6b22\u8fce \u00b6 \u817e\u8baf\u3001\u7f8e\u56e2\u3001\u4eac\u4e1c\u3001\u5feb\u624b\u3001360 \u7b49\u79d1\u6280\u5de8\u5934\u90fd\u5728\u4f7f\u7528NebulaGraph\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1 NebulaGraph\u5b98\u7f51 \u3002 \u9002\u7528\u573a\u666f \u00b6 NebulaGraph\u53ef\u7528\u4e8e\u5404\u79cd\u57fa\u4e8e\u56fe\u7684\u4e1a\u52a1\u573a\u666f\u3002\u4e3a\u8282\u7ea6\u8f6c\u6362\u5404\u7c7b\u6570\u636e\u5230\u5173\u7cfb\u578b\u6570\u636e\u5e93\u7684\u65f6\u95f4\uff0c\u4ee5\u53ca\u907f\u514d\u590d\u6742\u67e5\u8be2\uff0c\u5efa\u8bae\u4f7f\u7528NebulaGraph\u3002 \u6b3a\u8bc8\u68c0\u6d4b \u00b6 \u91d1\u878d\u673a\u6784\u5fc5\u987b\u4ed4\u7ec6\u7814\u7a76\u5927\u91cf\u7684\u4ea4\u6613\u4fe1\u606f\uff0c\u624d\u80fd\u68c0\u6d4b\u51fa\u6f5c\u5728\u7684\u91d1\u878d\u6b3a\u8bc8\u884c\u4e3a\uff0c\u5e76\u4e86\u89e3\u67d0\u4e2a\u6b3a\u8bc8\u884c\u4e3a\u548c\u8bbe\u5907\u7684\u5185\u5728\u5173\u8054\u3002\u8fd9\u79cd\u573a\u666f\u53ef\u4ee5\u901a\u8fc7\u56fe\u6765\u5efa\u6a21\uff0c\u7136\u540e\u501f\u52a9NebulaGraph\uff0c\u53ef\u4ee5\u5f88\u5bb9\u6613\u5730\u68c0\u6d4b\u51fa\u8bc8\u9a97\u56e2\u4f19\u6216\u5176\u4ed6\u590d\u6742\u8bc8\u9a97\u884c\u4e3a\u3002 \u5b9e\u65f6\u63a8\u8350 \u00b6 NebulaGraph\u80fd\u591f\u53ca\u65f6\u5904\u7406\u8bbf\u95ee\u8005\u4ea7\u751f\u7684\u5b9e\u65f6\u4fe1\u606f\uff0c\u5e76\u4e14\u7cbe\u51c6\u63a8\u9001\u6587\u7ae0\u3001\u89c6\u9891\u3001\u4ea7\u54c1\u548c\u670d\u52a1\u3002 \u77e5\u8bc6\u56fe\u8c31 \u00b6 \u81ea\u7136\u8bed\u8a00\u53ef\u4ee5\u8f6c\u5316\u4e3a\u77e5\u8bc6\u56fe\u8c31\uff0c\u5b58\u50a8\u5728NebulaGraph\u4e2d\u3002\u7528\u81ea\u7136\u8bed\u8a00\u7ec4\u7ec7\u7684\u95ee\u9898\u53ef\u4ee5\u901a\u8fc7\u667a\u80fd\u95ee\u7b54\u7cfb\u7edf\u4e2d\u7684\u8bed\u4e49\u89e3\u6790\u5668\u8fdb\u884c\u89e3\u6790\u5e76\u91cd\u65b0\u7ec4\u7ec7\uff0c\u7136\u540e\u4ece\u77e5\u8bc6\u56fe\u8c31\u4e2d\u68c0\u7d22\u51fa\u95ee\u9898\u7684\u53ef\u80fd\u7b54\u6848\uff0c\u63d0\u4f9b\u7ed9\u63d0\u95ee\u4eba\u3002 \u793e\u4ea4\u7f51\u7edc \u00b6 \u4eba\u9645\u5173\u7cfb\u4fe1\u606f\u662f\u5178\u578b\u7684\u56fe\u6570\u636e\uff0cNebulaGraph\u53ef\u4ee5\u8f7b\u677e\u5904\u7406\u6570\u5341\u4ebf\u4eba\u548c\u6570\u4e07\u4ebf\u4eba\u9645\u5173\u7cfb\u7684\u793e\u4ea4\u7f51\u7edc\u4fe1\u606f\uff0c\u5e76\u5728\u6d77\u91cf\u5e76\u53d1\u7684\u60c5\u51b5\u4e0b\uff0c\u63d0\u4f9b\u5feb\u901f\u7684\u597d\u53cb\u63a8\u8350\u548c\u5de5\u4f5c\u5c97\u4f4d\u67e5\u8be2\u3002 \u89c6\u9891 \u00b6 \u7528\u6237\u4e5f\u53ef\u4ee5\u901a\u8fc7\u89c6\u9891\u4e86\u89e3\u4ec0\u4e48\u662f\u56fe\u6570\u636e\u3002 NebulaGraph\u4ecb\u7ecd\u89c6\u9891 \uff0801 \u5206 39 \u79d2\uff09 \u4e3b\u9898\u6f14\u8bb2 \u00b6 \u67e5\u770b \u6f14\u8bb2 \u5feb\u901f\u4e86\u89e3\u56fe\u6570\u636e\u5e93\u6982\u51b5\u3002 \u76f8\u5173\u94fe\u63a5 \u00b6 \u5b98\u65b9\u7f51\u7ad9 \u6587\u6863\u9996\u9875 \u535a\u5ba2\u9996\u9875 \u8bba\u575b GitHub","title":"\u4ec0\u4e48\u662f NebulaGraph"},{"location":"1.introduction/1.what-is-nebula-graph/#nebulagraph","text":"NebulaGraph\u662f\u4e00\u6b3e\u5f00\u6e90\u7684\u3001\u5206\u5e03\u5f0f\u7684\u3001\u6613\u6269\u5c55\u7684\u539f\u751f\u56fe\u6570\u636e\u5e93\uff0c\u80fd\u591f\u627f\u8f7d\u5305\u542b\u6570\u5343\u4ebf\u4e2a\u70b9\u548c\u6570\u4e07\u4ebf\u6761\u8fb9\u7684\u8d85\u5927\u89c4\u6a21\u6570\u636e\u96c6\uff0c\u5e76\u4e14\u63d0\u4f9b\u6beb\u79d2\u7ea7\u67e5\u8be2\u3002","title":"\u4ec0\u4e48\u662fNebulaGraph"},{"location":"1.introduction/1.what-is-nebula-graph/#_1","text":"\u56fe\u6570\u636e\u5e93\u662f\u4e13\u95e8\u5b58\u50a8\u5e9e\u5927\u7684\u56fe\u5f62\u7f51\u7edc\u5e76\u4ece\u4e2d\u68c0\u7d22\u4fe1\u606f\u7684\u6570\u636e\u5e93\u3002\u5b83\u53ef\u4ee5\u5c06\u56fe\u4e2d\u7684\u6570\u636e\u9ad8\u6548\u5b58\u50a8\u4e3a\u70b9\uff08Vertex\uff09\u548c\u8fb9\uff08Edge\uff09\uff0c\u8fd8\u53ef\u4ee5\u5c06\u5c5e\u6027\uff08Property\uff09\u9644\u52a0\u5230\u70b9\u548c\u8fb9\u4e0a\u3002 \u56fe\u6570\u636e\u5e93\u9002\u5408\u5b58\u50a8\u5927\u591a\u6570\u4ece\u73b0\u5b9e\u62bd\u8c61\u51fa\u7684\u6570\u636e\u7c7b\u578b\u3002\u4e16\u754c\u4e0a\u51e0\u4e4e\u6240\u6709\u9886\u57df\u7684\u4e8b\u7269\u90fd\u6709\u5185\u5728\u8054\u7cfb\uff0c\u50cf\u5173\u7cfb\u578b\u6570\u636e\u5e93\u8fd9\u6837\u7684\u5efa\u6a21\u7cfb\u7edf\u4f1a\u63d0\u53d6\u5b9e\u4f53\u4e4b\u95f4\u7684\u5173\u7cfb\uff0c\u5e76\u5c06\u5173\u7cfb\u5355\u72ec\u5b58\u50a8\u5230\u8868\u548c\u5217\u4e2d\uff0c\u800c\u5b9e\u4f53\u7684\u7c7b\u578b\u548c\u5c5e\u6027\u5b58\u50a8\u5728\u5176\u4ed6\u5217\u751a\u81f3\u5176\u4ed6\u8868\u4e2d\uff0c\u8fd9\u4f7f\u5f97\u6570\u636e\u7ba1\u7406\u8d39\u65f6\u8d39\u529b\u3002 NebulaGraph\u4f5c\u4e3a\u4e00\u4e2a\u5178\u578b\u7684\u56fe\u6570\u636e\u5e93\uff0c\u53ef\u4ee5\u5c06\u4e30\u5bcc\u7684\u5173\u7cfb\u901a\u8fc7\u8fb9\u53ca\u5176\u7c7b\u578b\u548c\u5c5e\u6027\u81ea\u7136\u5730\u5448\u73b0\u3002","title":"\u4ec0\u4e48\u662f\u56fe\u6570\u636e\u5e93"},{"location":"1.introduction/1.what-is-nebula-graph/#nebulagraph_1","text":"","title":"NebulaGraph\u7684\u4f18\u52bf"},{"location":"1.introduction/1.what-is-nebula-graph/#_2","text":"NebulaGraph\u662f\u5728 Apache 2.0 \u6761\u6b3e\u4e0b\u5f00\u53d1\u7684\u3002\u8d8a\u6765\u8d8a\u591a\u7684\u4eba\uff0c\u5982\u6570\u636e\u5e93\u5f00\u53d1\u4eba\u5458\u3001\u6570\u636e\u79d1\u5b66\u5bb6\u3001\u5b89\u5168\u4e13\u5bb6\u3001\u7b97\u6cd5\u5de5\u7a0b\u5e08\uff0c\u90fd\u53c2\u4e0e\u5230NebulaGraph\u7684\u8bbe\u8ba1\u548c\u5f00\u53d1\u4e2d\u6765\uff0c\u6b22\u8fce\u8bbf\u95ee NebulaGraph GitHub \u4e3b\u9875 \u53c2\u4e0e\u5f00\u6e90\u9879\u76ee\u3002","title":"\u5f00\u6e90"},{"location":"1.introduction/1.what-is-nebula-graph/#_3","text":"\u57fa\u4e8e\u56fe\u6570\u636e\u5e93\u7684\u7279\u6027\u4f7f\u7528 C++ \u7f16\u5199\u7684NebulaGraph\uff0c\u53ef\u4ee5\u63d0\u4f9b\u6beb\u79d2\u7ea7\u67e5\u8be2\u3002\u4f17\u591a\u6570\u636e\u5e93\u4e2d\uff0cNebulaGraph\u5728\u56fe\u6570\u636e\u670d\u52a1\u9886\u57df\u5c55\u73b0\u4e86\u5353\u8d8a\u7684\u6027\u80fd\uff0c\u6570\u636e\u89c4\u6a21\u8d8a\u5927\uff0cNebulaGraph\u4f18\u52bf\u5c31\u8d8a\u5927\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1 NebulaGraph benchmarking \u9875\u9762 \u3002","title":"\u9ad8\u6027\u80fd"},{"location":"1.introduction/1.what-is-nebula-graph/#_4","text":"NebulaGraph\u91c7\u7528 shared-nothing \u67b6\u6784\uff0c\u652f\u6301\u5728\u4e0d\u505c\u6b62\u6570\u636e\u5e93\u670d\u52a1\u7684\u60c5\u51b5\u4e0b\u6269\u7f29\u5bb9\u3002","title":"\u6613\u6269\u5c55"},{"location":"1.introduction/1.what-is-nebula-graph/#_5","text":"NebulaGraph\u63d0\u4f9b Java\u3001Python\u3001C++ \u548c Go \u7b49\u6d41\u884c\u7f16\u7a0b\u8bed\u8a00\u7684\u5ba2\u6237\u7aef\uff0c\u66f4\u591a\u5ba2\u6237\u7aef\u4ecd\u5728\u5f00\u53d1\u4e2d\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1 NebulaGraph clients \u3002","title":"\u6613\u5f00\u53d1"},{"location":"1.introduction/1.what-is-nebula-graph/#_6","text":"NebulaGraph\u652f\u6301\u4e25\u683c\u7684\u89d2\u8272\u8bbf\u95ee\u63a7\u5236\u548c LDAP\uff08Lightweight Directory Access Protocol\uff09\u7b49\u5916\u90e8\u8ba4\u8bc1\u670d\u52a1\uff0c\u80fd\u591f\u6709\u6548\u63d0\u9ad8\u6570\u636e\u5b89\u5168\u6027\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1 \u9a8c\u8bc1\u548c\u6388\u6743 \u3002","title":"\u9ad8\u53ef\u9760\u8bbf\u95ee\u63a7\u5236"},{"location":"1.introduction/1.what-is-nebula-graph/#_7","text":"NebulaGraph\u5f00\u653e\u4e86\u8d8a\u6765\u8d8a\u591a\u7684\u539f\u751f\u5de5\u5177\uff0c\u4f8b\u5982 NebulaGraph Studio \u3001 NebulaGraph Console \u3001 NebulaGraph Exchange \u7b49\uff0c\u66f4\u591a\u5de5\u5177\u53ef\u4ee5\u67e5\u770b \u751f\u6001\u5de5\u5177\u6982\u89c8 \u3002 \u6b64\u5916\uff0cNebulaGraph\u8fd8\u5177\u5907\u4e0e Spark\u3001Flink\u3001HBase \u7b49\u4ea7\u54c1\u6574\u5408\u7684\u80fd\u529b\uff0c\u5728\u8fd9\u4e2a\u5145\u6ee1\u6311\u6218\u4e0e\u673a\u9047\u7684\u65f6\u4ee3\uff0c\u5927\u5927\u589e\u5f3a\u4e86\u81ea\u8eab\u7684\u7ade\u4e89\u529b\u3002","title":"\u751f\u6001\u591a\u6837\u5316"},{"location":"1.introduction/1.what-is-nebula-graph/#opencypher","text":"NebulaGraph\u67e5\u8be2\u8bed\u8a00\uff0c\u7b80\u79f0\u4e3a nGQL\uff0c\u662f\u4e00\u79cd\u58f0\u660e\u6027\u7684\u3001\u90e8\u5206\u517c\u5bb9 openCypher \u7684\u6587\u672c\u67e5\u8be2\u8bed\u8a00\uff0c\u6613\u4e8e\u7406\u89e3\u548c\u4f7f\u7528\u3002\u8be6\u7ec6\u8bed\u6cd5\u8bf7\u53c2\u89c1 nGQL \u6307\u5357 \u3002","title":"\u517c\u5bb9 openCypher \u67e5\u8be2\u8bed\u8a00"},{"location":"1.introduction/1.what-is-nebula-graph/#_8","text":"\u95ea\u5b58\u578b\u8bbe\u5907\u6709\u7740\u6781\u9ad8\u7684\u6027\u80fd\uff0c\u5e76\u4e14 \u4ef7\u683c\u5feb\u901f\u4e0b\u964d \uff0cNebulaGraph\u662f\u4e00\u4e2a\u9762\u5411 SSD \u8bbe\u8ba1\u7684\u4ea7\u54c1\uff0c\u76f8\u6bd4\u4e8e\u57fa\u4e8e HDD + \u5927\u5185\u5b58\u7684\u4ea7\u54c1\uff0c\u66f4\u9002\u5408\u9762\u5411\u672a\u6765\u7684\u786c\u4ef6\u8d8b\u52bf\uff0c\u4e5f\u66f4\u5bb9\u6613\u505a\u5230\u8bfb\u5199\u5e73\u8861\u3002","title":"\u9762\u5411\u672a\u6765\u786c\u4ef6\uff0c\u8bfb\u5199\u5e73\u8861"},{"location":"1.introduction/1.what-is-nebula-graph/#_9","text":"\u7528\u6237\u53ef\u4ee5\u8f7b\u677e\u5730\u5728NebulaGraph\u4e2d\u5efa\u7acb\u6570\u636e\u6a21\u578b\uff0c\u4e0d\u5fc5\u5c06\u6570\u636e\u5f3a\u5236\u8f6c\u6362\u4e3a\u5173\u7cfb\u8868\u3002\u800c\u4e14\u53ef\u4ee5\u81ea\u7531\u589e\u52a0\u3001\u66f4\u65b0\u548c\u5220\u9664\u5c5e\u6027\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1 \u6570\u636e\u6a21\u578b \u3002","title":"\u7075\u6d3b\u6570\u636e\u5efa\u6a21"},{"location":"1.introduction/1.what-is-nebula-graph/#_10","text":"\u817e\u8baf\u3001\u7f8e\u56e2\u3001\u4eac\u4e1c\u3001\u5feb\u624b\u3001360 \u7b49\u79d1\u6280\u5de8\u5934\u90fd\u5728\u4f7f\u7528NebulaGraph\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1 NebulaGraph\u5b98\u7f51 \u3002","title":"\u5e7f\u53d7\u6b22\u8fce"},{"location":"1.introduction/1.what-is-nebula-graph/#_11","text":"NebulaGraph\u53ef\u7528\u4e8e\u5404\u79cd\u57fa\u4e8e\u56fe\u7684\u4e1a\u52a1\u573a\u666f\u3002\u4e3a\u8282\u7ea6\u8f6c\u6362\u5404\u7c7b\u6570\u636e\u5230\u5173\u7cfb\u578b\u6570\u636e\u5e93\u7684\u65f6\u95f4\uff0c\u4ee5\u53ca\u907f\u514d\u590d\u6742\u67e5\u8be2\uff0c\u5efa\u8bae\u4f7f\u7528NebulaGraph\u3002","title":"\u9002\u7528\u573a\u666f"},{"location":"1.introduction/1.what-is-nebula-graph/#_12","text":"\u91d1\u878d\u673a\u6784\u5fc5\u987b\u4ed4\u7ec6\u7814\u7a76\u5927\u91cf\u7684\u4ea4\u6613\u4fe1\u606f\uff0c\u624d\u80fd\u68c0\u6d4b\u51fa\u6f5c\u5728\u7684\u91d1\u878d\u6b3a\u8bc8\u884c\u4e3a\uff0c\u5e76\u4e86\u89e3\u67d0\u4e2a\u6b3a\u8bc8\u884c\u4e3a\u548c\u8bbe\u5907\u7684\u5185\u5728\u5173\u8054\u3002\u8fd9\u79cd\u573a\u666f\u53ef\u4ee5\u901a\u8fc7\u56fe\u6765\u5efa\u6a21\uff0c\u7136\u540e\u501f\u52a9NebulaGraph\uff0c\u53ef\u4ee5\u5f88\u5bb9\u6613\u5730\u68c0\u6d4b\u51fa\u8bc8\u9a97\u56e2\u4f19\u6216\u5176\u4ed6\u590d\u6742\u8bc8\u9a97\u884c\u4e3a\u3002","title":"\u6b3a\u8bc8\u68c0\u6d4b"},{"location":"1.introduction/1.what-is-nebula-graph/#_13","text":"NebulaGraph\u80fd\u591f\u53ca\u65f6\u5904\u7406\u8bbf\u95ee\u8005\u4ea7\u751f\u7684\u5b9e\u65f6\u4fe1\u606f\uff0c\u5e76\u4e14\u7cbe\u51c6\u63a8\u9001\u6587\u7ae0\u3001\u89c6\u9891\u3001\u4ea7\u54c1\u548c\u670d\u52a1\u3002","title":"\u5b9e\u65f6\u63a8\u8350"},{"location":"1.introduction/1.what-is-nebula-graph/#_14","text":"\u81ea\u7136\u8bed\u8a00\u53ef\u4ee5\u8f6c\u5316\u4e3a\u77e5\u8bc6\u56fe\u8c31\uff0c\u5b58\u50a8\u5728NebulaGraph\u4e2d\u3002\u7528\u81ea\u7136\u8bed\u8a00\u7ec4\u7ec7\u7684\u95ee\u9898\u53ef\u4ee5\u901a\u8fc7\u667a\u80fd\u95ee\u7b54\u7cfb\u7edf\u4e2d\u7684\u8bed\u4e49\u89e3\u6790\u5668\u8fdb\u884c\u89e3\u6790\u5e76\u91cd\u65b0\u7ec4\u7ec7\uff0c\u7136\u540e\u4ece\u77e5\u8bc6\u56fe\u8c31\u4e2d\u68c0\u7d22\u51fa\u95ee\u9898\u7684\u53ef\u80fd\u7b54\u6848\uff0c\u63d0\u4f9b\u7ed9\u63d0\u95ee\u4eba\u3002","title":"\u77e5\u8bc6\u56fe\u8c31"},{"location":"1.introduction/1.what-is-nebula-graph/#_15","text":"\u4eba\u9645\u5173\u7cfb\u4fe1\u606f\u662f\u5178\u578b\u7684\u56fe\u6570\u636e\uff0cNebulaGraph\u53ef\u4ee5\u8f7b\u677e\u5904\u7406\u6570\u5341\u4ebf\u4eba\u548c\u6570\u4e07\u4ebf\u4eba\u9645\u5173\u7cfb\u7684\u793e\u4ea4\u7f51\u7edc\u4fe1\u606f\uff0c\u5e76\u5728\u6d77\u91cf\u5e76\u53d1\u7684\u60c5\u51b5\u4e0b\uff0c\u63d0\u4f9b\u5feb\u901f\u7684\u597d\u53cb\u63a8\u8350\u548c\u5de5\u4f5c\u5c97\u4f4d\u67e5\u8be2\u3002","title":"\u793e\u4ea4\u7f51\u7edc"},{"location":"1.introduction/1.what-is-nebula-graph/#_16","text":"\u7528\u6237\u4e5f\u53ef\u4ee5\u901a\u8fc7\u89c6\u9891\u4e86\u89e3\u4ec0\u4e48\u662f\u56fe\u6570\u636e\u3002 NebulaGraph\u4ecb\u7ecd\u89c6\u9891 \uff0801 \u5206 39 \u79d2\uff09","title":"\u89c6\u9891"},{"location":"1.introduction/1.what-is-nebula-graph/#_17","text":"\u67e5\u770b \u6f14\u8bb2 \u5feb\u901f\u4e86\u89e3\u56fe\u6570\u636e\u5e93\u6982\u51b5\u3002","title":"\u4e3b\u9898\u6f14\u8bb2"},{"location":"1.introduction/1.what-is-nebula-graph/#_18","text":"\u5b98\u65b9\u7f51\u7ad9 \u6587\u6863\u9996\u9875 \u535a\u5ba2\u9996\u9875 \u8bba\u575b GitHub","title":"\u76f8\u5173\u94fe\u63a5"},{"location":"1.introduction/2.1.path/","text":"\u8def\u5f84 \u00b6 \u56fe\u8bba\u4e2d\u4e00\u4e2a\u975e\u5e38\u91cd\u8981\u7684\u6982\u5ff5\u662f\u8def\u5f84\uff0c\u8def\u5f84\u662f\u6307\u4e00\u4e2a\u6709\u9650\u6216\u65e0\u9650\u7684\u8fb9\u5e8f\u5217\uff0c\u8fd9\u4e9b\u8fb9\u8fde\u63a5\u7740\u4e00\u7cfb\u5217\u7684\u70b9\u3002 \u8def\u5f84\u7684\u7c7b\u578b\u5206\u4e3a\u4e09\u79cd\uff1a walk \u3001 trail \u3001 path \u3002\u5173\u4e8e\u8def\u5f84\u7684\u8be6\u7ec6\u8bf4\u660e\uff0c\u8bf7\u53c2\u89c1 \u7ef4\u57fa\u767e\u79d1 \u3002 \u672c\u6587\u4ee5\u4e0b\u56fe\u4e3a\u4f8b\u8fdb\u884c\u7b80\u5355\u4ecb\u7ecd\u3002 walk \u00b6 walk \u7c7b\u578b\u7684\u8def\u5f84\u7531\u6709\u9650\u6216\u65e0\u9650\u7684\u8fb9\u5e8f\u5217\u6784\u6210\u3002\u904d\u5386\u65f6\u70b9\u548c\u8fb9\u53ef\u4ee5\u91cd\u590d\u3002 \u67e5\u770b\u793a\u4f8b\u56fe\uff0c\u7531\u4e8e C\u3001D\u3001E \u6784\u6210\u4e86\u4e00\u4e2a\u73af\uff0c\u56e0\u6b64\u8be5\u56fe\u5305\u542b\u65e0\u9650\u4e2a\u8def\u5f84\uff0c\u4f8b\u5982 A->B->C->D->E \u3001 A->B->C->D->E->C \u3001 A->B->C->D->E->C->D \u3002 Note GO \u8bed\u53e5\u91c7\u7528\u7684\u662f walk \u7c7b\u578b\u8def\u5f84\u3002 trail \u00b6 trail \u7c7b\u578b\u7684\u8def\u5f84\u7531\u6709\u9650\u7684\u8fb9\u5e8f\u5217\u6784\u6210\u3002\u904d\u5386\u65f6\u53ea\u6709\u70b9\u53ef\u4ee5\u91cd\u590d\uff0c\u8fb9\u4e0d\u53ef\u4ee5\u91cd\u590d\u3002\u67ef\u5c3c\u65af\u5821\u4e03\u6865\u95ee\u9898\u7684\u8def\u5f84\u7c7b\u578b\u5c31\u662f trail \u3002 \u67e5\u770b\u793a\u4f8b\u56fe\uff0c\u7531\u4e8e\u8fb9\u4e0d\u53ef\u4ee5\u91cd\u590d\uff0c\u6240\u4ee5\u8be5\u56fe\u5305\u542b\u6709\u9650\u4e2a\u8def\u5f84\uff0c\u6700\u957f\u8def\u5f84\u7531 5 \u6761\u8fb9\u7ec4\u6210\uff1a A->B->C->D->E->C \u3002 Note MATCH \u3001 FIND PATH \u548c GET SUBGRAPH \u8bed\u53e5\u91c7\u7528\u7684\u662f trail \u7c7b\u578b\u8def\u5f84\u3002 \u5728 trail \u7c7b\u578b\u4e2d\uff0c\u8fd8\u6709 cycle \u548c circuit \u4e24\u79cd\u7279\u6b8a\u7684\u8def\u5f84\u7c7b\u578b\uff0c\u4ee5\u4e0b\u56fe\u4e3a\u4f8b\u5bf9\u8fd9\u4e24\u79cd\u7279\u6b8a\u7684\u8def\u5f84\u7c7b\u578b\u8fdb\u884c\u4ecb\u7ecd\u3002 cycle cycle \u662f\u5c01\u95ed\u7684 trail \u7c7b\u578b\u7684\u8def\u5f84\uff0c\u904d\u5386\u65f6\u8fb9\u4e0d\u53ef\u4ee5\u91cd\u590d\uff0c\u8d77\u70b9\u548c\u7ec8\u70b9\u91cd\u590d\uff0c\u5e76\u4e14\u6ca1\u6709\u5176\u4ed6\u70b9\u91cd\u590d\u3002\u5728\u6b64\u793a\u4f8b\u56fe\u4e2d\uff0c\u6700\u957f\u8def\u5f84\u7531\u4e09\u6761\u8fb9\u7ec4\u6210\uff1a A->B->C->A \u6216 C->D->E->C . circuit circuit \u4e5f\u662f\u5c01\u95ed\u7684 trail \u7c7b\u578b\u7684\u8def\u5f84\uff0c\u904d\u5386\u65f6\u8fb9\u4e0d\u53ef\u4ee5\u91cd\u590d\uff0c\u9664\u8d77\u70b9\u548c\u7ec8\u70b9\u91cd\u590d\u5916\uff0c\u53ef\u80fd\u5b58\u5728\u5176\u4ed6\u70b9\u91cd\u590d\u3002\u5728\u6b64\u793a\u4f8b\u56fe\u4e2d\uff0c\u6700\u957f\u8def\u5f84\u4e3a\uff1a A->B->C->D->E->C->A \u3002 path \u00b6 path \u7c7b\u578b\u7684\u8def\u5f84\u7531\u6709\u9650\u7684\u8fb9\u5e8f\u5217\u6784\u6210\u3002\u904d\u5386\u65f6\u70b9\u548c\u8fb9\u90fd\u4e0d\u53ef\u4ee5\u91cd\u590d\u3002 \u67e5\u770b\u793a\u4f8b\u56fe\uff0c\u7531\u4e8e\u70b9\u548c\u8fb9\u90fd\u4e0d\u53ef\u4ee5\u91cd\u590d\uff0c\u6240\u4ee5\u8be5\u56fe\u5305\u542b\u6709\u9650\u4e2a\u8def\u5f84\uff0c\u6700\u957f\u8def\u5f84\u7531 4 \u6761\u8fb9\u7ec4\u6210\uff1a A->B->C->D->E \u3002 \u89c6\u9891 \u00b6 \u7528\u6237\u4e5f\u53ef\u4ee5\u89c2\u770b\u89c6\u9891\u4e86\u89e3\u8def\u5f84\u7684\u76f8\u5173\u6982\u5ff5\u3002 Path \uff0803 \u5206 09 \u79d2\uff09","title":"\u8def\u5f84"},{"location":"1.introduction/2.1.path/#_1","text":"\u56fe\u8bba\u4e2d\u4e00\u4e2a\u975e\u5e38\u91cd\u8981\u7684\u6982\u5ff5\u662f\u8def\u5f84\uff0c\u8def\u5f84\u662f\u6307\u4e00\u4e2a\u6709\u9650\u6216\u65e0\u9650\u7684\u8fb9\u5e8f\u5217\uff0c\u8fd9\u4e9b\u8fb9\u8fde\u63a5\u7740\u4e00\u7cfb\u5217\u7684\u70b9\u3002 \u8def\u5f84\u7684\u7c7b\u578b\u5206\u4e3a\u4e09\u79cd\uff1a walk \u3001 trail \u3001 path \u3002\u5173\u4e8e\u8def\u5f84\u7684\u8be6\u7ec6\u8bf4\u660e\uff0c\u8bf7\u53c2\u89c1 \u7ef4\u57fa\u767e\u79d1 \u3002 \u672c\u6587\u4ee5\u4e0b\u56fe\u4e3a\u4f8b\u8fdb\u884c\u7b80\u5355\u4ecb\u7ecd\u3002","title":"\u8def\u5f84"},{"location":"1.introduction/2.1.path/#walk","text":"walk \u7c7b\u578b\u7684\u8def\u5f84\u7531\u6709\u9650\u6216\u65e0\u9650\u7684\u8fb9\u5e8f\u5217\u6784\u6210\u3002\u904d\u5386\u65f6\u70b9\u548c\u8fb9\u53ef\u4ee5\u91cd\u590d\u3002 \u67e5\u770b\u793a\u4f8b\u56fe\uff0c\u7531\u4e8e C\u3001D\u3001E \u6784\u6210\u4e86\u4e00\u4e2a\u73af\uff0c\u56e0\u6b64\u8be5\u56fe\u5305\u542b\u65e0\u9650\u4e2a\u8def\u5f84\uff0c\u4f8b\u5982 A->B->C->D->E \u3001 A->B->C->D->E->C \u3001 A->B->C->D->E->C->D \u3002 Note GO \u8bed\u53e5\u91c7\u7528\u7684\u662f walk \u7c7b\u578b\u8def\u5f84\u3002","title":"walk"},{"location":"1.introduction/2.1.path/#trail","text":"trail \u7c7b\u578b\u7684\u8def\u5f84\u7531\u6709\u9650\u7684\u8fb9\u5e8f\u5217\u6784\u6210\u3002\u904d\u5386\u65f6\u53ea\u6709\u70b9\u53ef\u4ee5\u91cd\u590d\uff0c\u8fb9\u4e0d\u53ef\u4ee5\u91cd\u590d\u3002\u67ef\u5c3c\u65af\u5821\u4e03\u6865\u95ee\u9898\u7684\u8def\u5f84\u7c7b\u578b\u5c31\u662f trail \u3002 \u67e5\u770b\u793a\u4f8b\u56fe\uff0c\u7531\u4e8e\u8fb9\u4e0d\u53ef\u4ee5\u91cd\u590d\uff0c\u6240\u4ee5\u8be5\u56fe\u5305\u542b\u6709\u9650\u4e2a\u8def\u5f84\uff0c\u6700\u957f\u8def\u5f84\u7531 5 \u6761\u8fb9\u7ec4\u6210\uff1a A->B->C->D->E->C \u3002 Note MATCH \u3001 FIND PATH \u548c GET SUBGRAPH \u8bed\u53e5\u91c7\u7528\u7684\u662f trail \u7c7b\u578b\u8def\u5f84\u3002 \u5728 trail \u7c7b\u578b\u4e2d\uff0c\u8fd8\u6709 cycle \u548c circuit \u4e24\u79cd\u7279\u6b8a\u7684\u8def\u5f84\u7c7b\u578b\uff0c\u4ee5\u4e0b\u56fe\u4e3a\u4f8b\u5bf9\u8fd9\u4e24\u79cd\u7279\u6b8a\u7684\u8def\u5f84\u7c7b\u578b\u8fdb\u884c\u4ecb\u7ecd\u3002 cycle cycle \u662f\u5c01\u95ed\u7684 trail \u7c7b\u578b\u7684\u8def\u5f84\uff0c\u904d\u5386\u65f6\u8fb9\u4e0d\u53ef\u4ee5\u91cd\u590d\uff0c\u8d77\u70b9\u548c\u7ec8\u70b9\u91cd\u590d\uff0c\u5e76\u4e14\u6ca1\u6709\u5176\u4ed6\u70b9\u91cd\u590d\u3002\u5728\u6b64\u793a\u4f8b\u56fe\u4e2d\uff0c\u6700\u957f\u8def\u5f84\u7531\u4e09\u6761\u8fb9\u7ec4\u6210\uff1a A->B->C->A \u6216 C->D->E->C . circuit circuit \u4e5f\u662f\u5c01\u95ed\u7684 trail \u7c7b\u578b\u7684\u8def\u5f84\uff0c\u904d\u5386\u65f6\u8fb9\u4e0d\u53ef\u4ee5\u91cd\u590d\uff0c\u9664\u8d77\u70b9\u548c\u7ec8\u70b9\u91cd\u590d\u5916\uff0c\u53ef\u80fd\u5b58\u5728\u5176\u4ed6\u70b9\u91cd\u590d\u3002\u5728\u6b64\u793a\u4f8b\u56fe\u4e2d\uff0c\u6700\u957f\u8def\u5f84\u4e3a\uff1a A->B->C->D->E->C->A \u3002","title":"trail"},{"location":"1.introduction/2.1.path/#path","text":"path \u7c7b\u578b\u7684\u8def\u5f84\u7531\u6709\u9650\u7684\u8fb9\u5e8f\u5217\u6784\u6210\u3002\u904d\u5386\u65f6\u70b9\u548c\u8fb9\u90fd\u4e0d\u53ef\u4ee5\u91cd\u590d\u3002 \u67e5\u770b\u793a\u4f8b\u56fe\uff0c\u7531\u4e8e\u70b9\u548c\u8fb9\u90fd\u4e0d\u53ef\u4ee5\u91cd\u590d\uff0c\u6240\u4ee5\u8be5\u56fe\u5305\u542b\u6709\u9650\u4e2a\u8def\u5f84\uff0c\u6700\u957f\u8def\u5f84\u7531 4 \u6761\u8fb9\u7ec4\u6210\uff1a A->B->C->D->E \u3002","title":"path"},{"location":"1.introduction/2.1.path/#_2","text":"\u7528\u6237\u4e5f\u53ef\u4ee5\u89c2\u770b\u89c6\u9891\u4e86\u89e3\u8def\u5f84\u7684\u76f8\u5173\u6982\u5ff5\u3002 Path \uff0803 \u5206 09 \u79d2\uff09","title":"\u89c6\u9891"},{"location":"1.introduction/2.data-model/","text":"\u6570\u636e\u6a21\u578b \u00b6 \u672c\u6587\u4ecb\u7ecdNebulaGraph\u7684\u6570\u636e\u6a21\u578b\u3002\u6570\u636e\u6a21\u578b\u662f\u4e00\u79cd\u7ec4\u7ec7\u6570\u636e\u5e76\u8bf4\u660e\u5b83\u4eec\u5982\u4f55\u76f8\u4e92\u5173\u8054\u7684\u6a21\u578b\u3002 \u6570\u636e\u6a21\u578b \u00b6 NebulaGraph\u6570\u636e\u6a21\u578b\u4f7f\u7528 6 \u79cd\u57fa\u672c\u7684\u6570\u636e\u6a21\u578b\uff1a \u56fe\u7a7a\u95f4\uff08Space\uff09 \u56fe\u7a7a\u95f4\u7528\u4e8e\u9694\u79bb\u4e0d\u540c\u56e2\u961f\u6216\u8005\u9879\u76ee\u7684\u6570\u636e\u3002\u4e0d\u540c\u56fe\u7a7a\u95f4\u7684\u6570\u636e\u662f\u76f8\u4e92\u9694\u79bb\u7684\uff0c\u53ef\u4ee5\u6307\u5b9a\u4e0d\u540c\u7684\u5b58\u50a8\u526f\u672c\u6570\u3001\u6743\u9650\u3001\u5206\u7247\u7b49\u3002 \u70b9\uff08Vertex\uff09 \u70b9\u7528\u6765\u4fdd\u5b58\u5b9e\u4f53\u5bf9\u8c61\uff0c\u7279\u70b9\u5982\u4e0b\uff1a \u70b9\u662f\u7528\u70b9\u6807\u8bc6\u7b26\uff08 VID \uff09\u6807\u8bc6\u7684\u3002 VID \u5728\u540c\u4e00\u56fe\u7a7a\u95f4\u4e2d\u552f\u4e00\u3002VID \u662f\u4e00\u4e2a int64\uff0c\u6216\u8005 fixed_string(N)\u3002 \u70b9\u53ef\u4ee5\u6709 0 \u5230\u591a\u4e2a Tag\u3002 Compatibility NebulaGraph 2.x \u53ca\u4ee5\u4e0b\u7248\u672c\u4e2d\u7684\u70b9\u5fc5\u987b\u5305\u542b\u81f3\u5c11\u4e00\u4e2a Tag\u3002 \u8fb9\uff08Edge\uff09 \u8fb9\u662f\u7528\u6765\u8fde\u63a5\u70b9\u7684\uff0c\u8868\u793a\u4e24\u4e2a\u70b9\u4e4b\u95f4\u7684\u5173\u7cfb\u6216\u884c\u4e3a\uff0c\u7279\u70b9\u5982\u4e0b\uff1a \u4e24\u70b9\u4e4b\u95f4\u53ef\u4ee5\u6709\u591a\u6761\u8fb9\u3002 \u8fb9\u662f\u6709\u65b9\u5411\u7684\uff0c\u4e0d\u5b58\u5728\u65e0\u5411\u8fb9\u3002 \u56db\u5143\u7ec4 <\u8d77\u70b9 VID\u3001Edge type\u3001\u8fb9\u6392\u5e8f\u503c (rank)\u3001\u7ec8\u70b9 VID> \u7528\u4e8e\u552f\u4e00\u6807\u8bc6\u4e00\u6761\u8fb9\u3002\u8fb9\u6ca1\u6709 EID\u3002 \u4e00\u6761\u8fb9\u6709\u4e14\u4ec5\u6709\u4e00\u4e2a Edge type\u3002 \u4e00\u6761\u8fb9\u6709\u4e14\u4ec5\u6709\u4e00\u4e2a Rank\uff0c\u7c7b\u578b\u4e3a int64\uff0c\u9ed8\u8ba4\u503c\u4e3a 0\u3002 \u5173\u4e8e Rank \u53ef\u4ee5\u7528\u6765\u533a\u5206 Edge type\u3001\u8d77\u59cb\u70b9\u3001\u76ee\u7684\u70b9\u90fd\u76f8\u540c\u7684\u8fb9\u3002\u8be5\u503c\u5b8c\u5168\u7531\u7528\u6237\u81ea\u5df1\u6307\u5b9a\u3002 \u8bfb\u53d6\u65f6\u5fc5\u987b\u81ea\u884c\u53d6\u5f97\u5168\u90e8\u7684 Rank \u503c\u540e\u6392\u5e8f\u8fc7\u6ee4\u548c\u62fc\u63a5\u3002 \u4e0d\u652f\u6301\u8bf8\u5982 next(), pre(), head(), tail(), max(), min(), lessThan(), moreThan() \u7b49\u51fd\u6570\u529f\u80fd\uff0c\u4e5f\u4e0d\u80fd\u901a\u8fc7\u521b\u5efa\u7d22\u5f15\u52a0\u901f\u8bbf\u95ee\u6216\u8005\u6761\u4ef6\u8fc7\u6ee4\u3002 \u6807\u7b7e\uff08Tag\uff09 Tag \u7531\u4e00\u7ec4\u4e8b\u5148\u9884\u5b9a\u4e49\u7684\u5c5e\u6027\u6784\u6210\u3002 \u8fb9\u7c7b\u578b\uff08Edge type\uff09 Edge type \u7531\u4e00\u7ec4\u4e8b\u5148\u9884\u5b9a\u4e49\u7684\u5c5e\u6027\u6784\u6210\u3002 \u5c5e\u6027\uff08Property\uff09 \u5c5e\u6027\u662f\u6307\u4ee5\u952e\u503c\u5bf9\uff08Key-value pair\uff09\u5f62\u5f0f\u8868\u793a\u7684\u4fe1\u606f\u3002 Note Tag \u548c Edge type \u7684\u4f5c\u7528\uff0c\u7c7b\u4f3c\u4e8e\u5173\u7cfb\u578b\u6570\u636e\u5e93\u4e2d\u201c\u70b9\u8868\u201d\u548c\u201c\u8fb9\u8868\u201d\u7684\u8868\u7ed3\u6784\u3002 \u6709\u5411\u5c5e\u6027\u56fe \u00b6 NebulaGraph\u4f7f\u7528\u6709\u5411\u5c5e\u6027\u56fe\u6a21\u578b\uff0c\u6307\u70b9\u548c\u8fb9\u6784\u6210\u7684\u56fe\uff0c\u8fd9\u4e9b\u8fb9\u662f\u6709\u65b9\u5411\u7684\uff0c\u70b9\u548c\u8fb9\u90fd\u53ef\u4ee5\u6709\u5c5e\u6027\u3002 \u4e0b\u8868\u4e3a\u7bee\u7403\u8fd0\u52a8\u5458\u6570\u636e\u96c6\u7684\u7ed3\u6784\u793a\u4f8b\uff0c\u5305\u62ec\u4e24\u79cd\u7c7b\u578b\u7684\u70b9\uff08 player \u3001 team \uff09\u548c\u4e24\u79cd\u7c7b\u578b\u7684\u8fb9\uff08 serve \u3001 follow \uff09\u3002 \u7c7b\u578b \u540d\u79f0 \u5c5e\u6027\u540d\uff08\u6570\u636e\u7c7b\u578b\uff09 \u8bf4\u660e Tag player name (string) age\uff08int\uff09 \u8868\u793a\u7403\u5458\u3002 Tag team name (string) \u8868\u793a\u7403\u961f\u3002 Edge type serve start_year (int) end_year (int) \u8868\u793a\u7403\u5458\u7684\u884c\u4e3a\u3002 \u8be5\u884c\u4e3a\u5c06\u7403\u5458\u548c\u7403\u961f\u8054\u7cfb\u8d77\u6765\uff0c\u65b9\u5411\u662f\u4ece\u7403\u5458\u5230\u7403\u961f\u3002 Edge type follow degree (int) \u8868\u793a\u7403\u5458\u7684\u884c\u4e3a\u3002 \u8be5\u884c\u4e3a\u5c06\u4e24\u4e2a\u7403\u5458\u8054\u7cfb\u8d77\u6765\uff0c\u65b9\u5411\u662f\u4ece\u4e00\u4e2a\u7403\u5458\u5230\u53e6\u4e00\u4e2a\u7403\u5458\u3002 Note NebulaGraph\u4e2d\u6ca1\u6709\u65e0\u5411\u8fb9\uff0c\u53ea\u652f\u6301\u6709\u5411\u8fb9\u3002 Compatibility \u7531\u4e8eNebulaGraph 3.6.0 \u7684\u6570\u636e\u6a21\u578b\u4e2d\uff0c\u5141\u8bb8\u5b58\u5728\"\u60ac\u6302\u8fb9\"\uff0c\u56e0\u6b64\u5728\u589e\u5220\u65f6\uff0c\u7528\u6237\u9700\u81ea\u884c\u4fdd\u8bc1\u201c\u4e00\u6761\u8fb9\u6240\u5bf9\u5e94\u7684\u8d77\u70b9\u548c\u7ec8\u70b9\u201d\u7684\u5b58\u5728\u6027\u3002\u8be6\u89c1 INSERT VERTEX \u3001 DELETE VERTEX \u3001 INSERT EDGE \u3001 DELETE EDGE \u3002 \u4e0d\u652f\u6301 openCypher \u4e2d\u7684 MERGE \u8bed\u53e5\u3002","title":"\u6570\u636e\u6a21\u578b"},{"location":"1.introduction/2.data-model/#_1","text":"\u672c\u6587\u4ecb\u7ecdNebulaGraph\u7684\u6570\u636e\u6a21\u578b\u3002\u6570\u636e\u6a21\u578b\u662f\u4e00\u79cd\u7ec4\u7ec7\u6570\u636e\u5e76\u8bf4\u660e\u5b83\u4eec\u5982\u4f55\u76f8\u4e92\u5173\u8054\u7684\u6a21\u578b\u3002","title":"\u6570\u636e\u6a21\u578b"},{"location":"1.introduction/2.data-model/#_2","text":"NebulaGraph\u6570\u636e\u6a21\u578b\u4f7f\u7528 6 \u79cd\u57fa\u672c\u7684\u6570\u636e\u6a21\u578b\uff1a \u56fe\u7a7a\u95f4\uff08Space\uff09 \u56fe\u7a7a\u95f4\u7528\u4e8e\u9694\u79bb\u4e0d\u540c\u56e2\u961f\u6216\u8005\u9879\u76ee\u7684\u6570\u636e\u3002\u4e0d\u540c\u56fe\u7a7a\u95f4\u7684\u6570\u636e\u662f\u76f8\u4e92\u9694\u79bb\u7684\uff0c\u53ef\u4ee5\u6307\u5b9a\u4e0d\u540c\u7684\u5b58\u50a8\u526f\u672c\u6570\u3001\u6743\u9650\u3001\u5206\u7247\u7b49\u3002 \u70b9\uff08Vertex\uff09 \u70b9\u7528\u6765\u4fdd\u5b58\u5b9e\u4f53\u5bf9\u8c61\uff0c\u7279\u70b9\u5982\u4e0b\uff1a \u70b9\u662f\u7528\u70b9\u6807\u8bc6\u7b26\uff08 VID \uff09\u6807\u8bc6\u7684\u3002 VID \u5728\u540c\u4e00\u56fe\u7a7a\u95f4\u4e2d\u552f\u4e00\u3002VID \u662f\u4e00\u4e2a int64\uff0c\u6216\u8005 fixed_string(N)\u3002 \u70b9\u53ef\u4ee5\u6709 0 \u5230\u591a\u4e2a Tag\u3002 Compatibility NebulaGraph 2.x \u53ca\u4ee5\u4e0b\u7248\u672c\u4e2d\u7684\u70b9\u5fc5\u987b\u5305\u542b\u81f3\u5c11\u4e00\u4e2a Tag\u3002 \u8fb9\uff08Edge\uff09 \u8fb9\u662f\u7528\u6765\u8fde\u63a5\u70b9\u7684\uff0c\u8868\u793a\u4e24\u4e2a\u70b9\u4e4b\u95f4\u7684\u5173\u7cfb\u6216\u884c\u4e3a\uff0c\u7279\u70b9\u5982\u4e0b\uff1a \u4e24\u70b9\u4e4b\u95f4\u53ef\u4ee5\u6709\u591a\u6761\u8fb9\u3002 \u8fb9\u662f\u6709\u65b9\u5411\u7684\uff0c\u4e0d\u5b58\u5728\u65e0\u5411\u8fb9\u3002 \u56db\u5143\u7ec4 <\u8d77\u70b9 VID\u3001Edge type\u3001\u8fb9\u6392\u5e8f\u503c (rank)\u3001\u7ec8\u70b9 VID> \u7528\u4e8e\u552f\u4e00\u6807\u8bc6\u4e00\u6761\u8fb9\u3002\u8fb9\u6ca1\u6709 EID\u3002 \u4e00\u6761\u8fb9\u6709\u4e14\u4ec5\u6709\u4e00\u4e2a Edge type\u3002 \u4e00\u6761\u8fb9\u6709\u4e14\u4ec5\u6709\u4e00\u4e2a Rank\uff0c\u7c7b\u578b\u4e3a int64\uff0c\u9ed8\u8ba4\u503c\u4e3a 0\u3002 \u5173\u4e8e Rank \u53ef\u4ee5\u7528\u6765\u533a\u5206 Edge type\u3001\u8d77\u59cb\u70b9\u3001\u76ee\u7684\u70b9\u90fd\u76f8\u540c\u7684\u8fb9\u3002\u8be5\u503c\u5b8c\u5168\u7531\u7528\u6237\u81ea\u5df1\u6307\u5b9a\u3002 \u8bfb\u53d6\u65f6\u5fc5\u987b\u81ea\u884c\u53d6\u5f97\u5168\u90e8\u7684 Rank \u503c\u540e\u6392\u5e8f\u8fc7\u6ee4\u548c\u62fc\u63a5\u3002 \u4e0d\u652f\u6301\u8bf8\u5982 next(), pre(), head(), tail(), max(), min(), lessThan(), moreThan() \u7b49\u51fd\u6570\u529f\u80fd\uff0c\u4e5f\u4e0d\u80fd\u901a\u8fc7\u521b\u5efa\u7d22\u5f15\u52a0\u901f\u8bbf\u95ee\u6216\u8005\u6761\u4ef6\u8fc7\u6ee4\u3002 \u6807\u7b7e\uff08Tag\uff09 Tag \u7531\u4e00\u7ec4\u4e8b\u5148\u9884\u5b9a\u4e49\u7684\u5c5e\u6027\u6784\u6210\u3002 \u8fb9\u7c7b\u578b\uff08Edge type\uff09 Edge type \u7531\u4e00\u7ec4\u4e8b\u5148\u9884\u5b9a\u4e49\u7684\u5c5e\u6027\u6784\u6210\u3002 \u5c5e\u6027\uff08Property\uff09 \u5c5e\u6027\u662f\u6307\u4ee5\u952e\u503c\u5bf9\uff08Key-value pair\uff09\u5f62\u5f0f\u8868\u793a\u7684\u4fe1\u606f\u3002 Note Tag \u548c Edge type \u7684\u4f5c\u7528\uff0c\u7c7b\u4f3c\u4e8e\u5173\u7cfb\u578b\u6570\u636e\u5e93\u4e2d\u201c\u70b9\u8868\u201d\u548c\u201c\u8fb9\u8868\u201d\u7684\u8868\u7ed3\u6784\u3002","title":"\u6570\u636e\u6a21\u578b"},{"location":"1.introduction/2.data-model/#_3","text":"NebulaGraph\u4f7f\u7528\u6709\u5411\u5c5e\u6027\u56fe\u6a21\u578b\uff0c\u6307\u70b9\u548c\u8fb9\u6784\u6210\u7684\u56fe\uff0c\u8fd9\u4e9b\u8fb9\u662f\u6709\u65b9\u5411\u7684\uff0c\u70b9\u548c\u8fb9\u90fd\u53ef\u4ee5\u6709\u5c5e\u6027\u3002 \u4e0b\u8868\u4e3a\u7bee\u7403\u8fd0\u52a8\u5458\u6570\u636e\u96c6\u7684\u7ed3\u6784\u793a\u4f8b\uff0c\u5305\u62ec\u4e24\u79cd\u7c7b\u578b\u7684\u70b9\uff08 player \u3001 team \uff09\u548c\u4e24\u79cd\u7c7b\u578b\u7684\u8fb9\uff08 serve \u3001 follow \uff09\u3002 \u7c7b\u578b \u540d\u79f0 \u5c5e\u6027\u540d\uff08\u6570\u636e\u7c7b\u578b\uff09 \u8bf4\u660e Tag player name (string) age\uff08int\uff09 \u8868\u793a\u7403\u5458\u3002 Tag team name (string) \u8868\u793a\u7403\u961f\u3002 Edge type serve start_year (int) end_year (int) \u8868\u793a\u7403\u5458\u7684\u884c\u4e3a\u3002 \u8be5\u884c\u4e3a\u5c06\u7403\u5458\u548c\u7403\u961f\u8054\u7cfb\u8d77\u6765\uff0c\u65b9\u5411\u662f\u4ece\u7403\u5458\u5230\u7403\u961f\u3002 Edge type follow degree (int) \u8868\u793a\u7403\u5458\u7684\u884c\u4e3a\u3002 \u8be5\u884c\u4e3a\u5c06\u4e24\u4e2a\u7403\u5458\u8054\u7cfb\u8d77\u6765\uff0c\u65b9\u5411\u662f\u4ece\u4e00\u4e2a\u7403\u5458\u5230\u53e6\u4e00\u4e2a\u7403\u5458\u3002 Note NebulaGraph\u4e2d\u6ca1\u6709\u65e0\u5411\u8fb9\uff0c\u53ea\u652f\u6301\u6709\u5411\u8fb9\u3002 Compatibility \u7531\u4e8eNebulaGraph 3.6.0 \u7684\u6570\u636e\u6a21\u578b\u4e2d\uff0c\u5141\u8bb8\u5b58\u5728\"\u60ac\u6302\u8fb9\"\uff0c\u56e0\u6b64\u5728\u589e\u5220\u65f6\uff0c\u7528\u6237\u9700\u81ea\u884c\u4fdd\u8bc1\u201c\u4e00\u6761\u8fb9\u6240\u5bf9\u5e94\u7684\u8d77\u70b9\u548c\u7ec8\u70b9\u201d\u7684\u5b58\u5728\u6027\u3002\u8be6\u89c1 INSERT VERTEX \u3001 DELETE VERTEX \u3001 INSERT EDGE \u3001 DELETE EDGE \u3002 \u4e0d\u652f\u6301 openCypher \u4e2d\u7684 MERGE \u8bed\u53e5\u3002","title":"\u6709\u5411\u5c5e\u6027\u56fe"},{"location":"1.introduction/3.vid/","text":"\u70b9 VID \u00b6 \u5728\u4e00\u4e2a\u56fe\u7a7a\u95f4\u4e2d\uff0c\u4e00\u4e2a\u70b9\u7531\u70b9\u7684 ID \u552f\u4e00\u6807\u8bc6\uff0c\u5373 VID \u6216 Vertex ID\u3002 VID \u7684\u7279\u70b9 \u00b6 VID \u6570\u636e\u7c7b\u578b\u53ea\u53ef\u4ee5\u4e3a\u5b9a\u957f\u5b57\u7b26\u4e32 FIXED_STRING(<N>) \u6216 INT64 \u3002\u4e00\u4e2a\u56fe\u7a7a\u95f4\u53ea\u80fd\u9009\u7528\u5176\u4e2d\u4e00\u79cd VID \u7c7b\u578b\u3002 VID \u5728\u4e00\u4e2a\u56fe\u7a7a\u95f4\u4e2d\u5fc5\u987b\u552f\u4e00\uff0c\u5176\u4f5c\u7528\u7c7b\u4f3c\u4e8e\u5173\u7cfb\u578b\u6570\u636e\u5e93\u4e2d\u7684\u4e3b\u952e\uff08\u7d22\u5f15+\u552f\u4e00\u7ea6\u675f\uff09\u3002\u4f46\u4e0d\u540c\u56fe\u7a7a\u95f4\u4e2d\u7684 VID \u662f\u5b8c\u5168\u72ec\u7acb\u65e0\u5173\u7684\u3002 \u70b9 VID \u7684\u751f\u6210\u65b9\u5f0f\u5fc5\u987b\u7531\u7528\u6237\u81ea\u884c\u6307\u5b9a\uff0c\u7cfb\u7edf\u4e0d\u63d0\u4f9b\u81ea\u589e ID \u6216\u8005 UUID\u3002 VID \u76f8\u540c\u7684\u70b9\uff0c\u4f1a\u88ab\u8ba4\u4e3a\u662f\u540c\u4e00\u4e2a\u70b9\u3002\u4f8b\u5982\uff1a VID \u76f8\u5f53\u4e8e\u4e00\u4e2a\u5b9e\u4f53\u7684\u552f\u4e00\u6807\u53f7\uff0c\u4f8b\u5982\u4e00\u4e2a\u4eba\u7684\u8eab\u4efd\u8bc1\u53f7\u3002Tag \u76f8\u5f53\u4e8e\u5b9e\u4f53\u6240\u62e5\u6709\u7684\u7c7b\u578b\uff0c\u4f8b\u5982\"\u6ef4\u6ef4\u53f8\u673a\"\u548c\"\u8001\u677f\"\u3002\u4e0d\u540c\u7684 Tag \u53c8\u76f8\u5e94\u5b9a\u4e49\u4e86\u4e24\u7ec4\u4e0d\u540c\u7684\u5c5e\u6027\uff0c\u4f8b\u5982\"\u9a7e\u7167\u53f7\u3001\u9a7e\u9f84\u3001\u63a5\u5355\u91cf\u3001\u63a5\u5355\u5c0f\u53f7\"\u548c\"\u5de5\u53f7\u3001\u85aa\u6c34\u3001\u503a\u52a1\u989d\u5ea6\u3001\u5546\u52a1\u7535\u8bdd\"\u3002 \u540c\u65f6\u64cd\u4f5c\u76f8\u540c VID \u5e76\u4e14\u76f8\u540c Tag \u7684\u4e24\u6761 INSERT \u8bed\u53e5\uff08\u5747\u65e0 IF NOT EXISTS \u53c2\u6570\uff09\uff0c\u665a\u5199\u5165\u7684 INSERT \u4f1a\u8986\u76d6\u5148\u5199\u5165\u7684\u3002 \u540c\u65f6\u64cd\u4f5c\u5305\u542b\u76f8\u540c VID \u4f46\u662f\u4e24\u4e2a\u4e0d\u540c TAG A \u548c TAG B \u7684\u4e24\u6761 INSERT \u8bed\u53e5\uff0c\u5bf9 TAG A \u7684\u64cd\u4f5c\u4e0d\u4f1a\u5f71\u54cd TAG B \u3002 VID \u901a\u5e38\u4f1a\u88ab\uff08LSM-tree \u65b9\u5f0f\uff09\u7d22\u5f15\u5e76\u7f13\u5b58\u5728\u5185\u5b58\u4e2d\uff0c\u56e0\u6b64\u76f4\u63a5\u8bbf\u95ee VID \u7684\u6027\u80fd\u6700\u9ad8\u3002 VID \u4f7f\u7528\u5efa\u8bae \u00b6 NebulaGraph 1.x \u53ea\u652f\u6301 VID \u7c7b\u578b\u4e3a INT64 \uff0c\u4ece 2.x \u5f00\u59cb\u652f\u6301 INT64 \u548c FIXED_STRING(<N>) \u3002\u5728 CREATE SPACE \u4e2d\u901a\u8fc7\u53c2\u6570 vid_type \u53ef\u4ee5\u6307\u5b9a VID \u7c7b\u578b\u3002 \u53ef\u4ee5\u4f7f\u7528 id() \u51fd\u6570\uff0c\u6307\u5b9a\u6216\u5f15\u7528\u8be5\u70b9\u7684 VID\u3002 \u53ef\u4ee5\u4f7f\u7528 LOOKUP \u6216\u8005 MATCH \u8bed\u53e5\uff0c\u6765\u901a\u8fc7\u5c5e\u6027\u7d22\u5f15\u67e5\u627e\u5bf9\u5e94\u7684 VID\u3002 \u6027\u80fd\u4e0a\uff0c\u76f4\u63a5\u901a\u8fc7 VID \u627e\u5230\u70b9\u7684\u8bed\u53e5\u6027\u80fd\u6700\u9ad8\uff0c\u4f8b\u5982 DELETE xxx WHERE id(xxx) == \"player100\" \uff0c\u6216\u8005 GO FROM \"player100\" \u7b49\u8bed\u53e5\u3002\u901a\u8fc7\u5c5e\u6027\u5148\u67e5\u627e VID\uff0c\u518d\u8fdb\u884c\u56fe\u64cd\u4f5c\u7684\u6027\u80fd\u4f1a\u53d8\u5dee\uff0c\u4f8b\u5982 LOOKUP | GO FROM $-.ids \u7b49\u8bed\u53e5\uff0c\u76f8\u6bd4\u524d\u8005\u591a\u4e86\u4e00\u6b21\u5185\u5b58\u6216\u786c\u76d8\u7684\u968f\u673a\u8bfb\uff08 LOOKUP \uff09\u4ee5\u53ca\u4e00\u6b21\u5e8f\u5217\u5316\uff08 | \uff09\u3002 VID \u751f\u6210\u5efa\u8bae \u00b6 VID \u7684\u751f\u6210\u5de5\u4f5c\u5b8c\u5168\u4ea4\u7ed9\u5e94\u7528\u7aef\uff0c\u6709\u4e00\u4e9b\u901a\u7528\u7684\u5efa\u8bae\uff1a \uff08\u6700\u4f18\uff09\u901a\u8fc7\u6709\u552f\u4e00\u6027\u7684\u4e3b\u952e\u6216\u8005\u5c5e\u6027\u6765\u76f4\u63a5\u4f5c\u4e3a VID\uff1b\u5c5e\u6027\u8bbf\u95ee\u4f9d\u8d56\u4e8e VID; \u901a\u8fc7\u6709\u552f\u4e00\u6027\u7684\u5c5e\u6027\u7ec4\u5408\u6765\u751f\u6210 VID\uff0c\u5c5e\u6027\u8bbf\u95ee\u4f9d\u8d56\u4e8e\u5c5e\u6027\u7d22\u5f15\u3002 \u901a\u8fc7 snowflake \u7b49\u7b97\u6cd5\u751f\u6210 VID\uff0c\u5c5e\u6027\u8bbf\u95ee\u4f9d\u8d56\u4e8e\u5c5e\u6027\u7d22\u5f15\u3002 \u5982\u679c\u4e2a\u522b\u8bb0\u5f55\u7684\u4e3b\u952e\u7279\u522b\u957f\uff0c\u4f46\u7edd\u5927\u591a\u6570\u8bb0\u5f55\u7684\u4e3b\u952e\u90fd\u5f88\u77ed\u7684\u60c5\u51b5\uff0c\u4e0d\u8981\u5c06 FIXED_STRING(<N>) \u7684 N \u8bbe\u7f6e\u6210\u8d85\u5927\uff0c\u8fd9\u4f1a\u6d6a\u8d39\u5927\u91cf\u5185\u5b58\u548c\u786c\u76d8\uff0c\u4e5f\u4f1a\u964d\u4f4e\u6027\u80fd\u3002\u6b64\u65f6\u53ef\u901a\u8fc7 BASE64\uff0cMD5\uff0chash \u7f16\u7801\u52a0\u62fc\u63a5\u7684\u65b9\u5f0f\u6765\u751f\u6210\u3002 \u5982\u679c\u7528 hash \u65b9\u5f0f\u751f\u6210 int64 VID\uff1a\u5728\u6709 10 \u4ebf\u4e2a\u70b9\u7684\u60c5\u51b5\u4e0b\uff0c\u53d1\u751f hash \u51b2\u7a81\u7684\u6982\u7387\u5927\u7ea6\u662f 1/10\u3002\u8fb9\u7684\u6570\u91cf\u4e0e\u78b0\u649e\u7684\u6982\u7387\u65e0\u5173\u3002 \u5b9a\u4e49\u548c\u4fee\u6539 VID \u4e0e\u5176\u6570\u636e\u7c7b\u578b \u00b6 VID \u7684\u6570\u636e\u7c7b\u578b\u5fc5\u987b\u5728 \u521b\u5efa\u56fe\u7a7a\u95f4 \u65f6\u5b9a\u4e49\uff0c\u4e14\u4e00\u65e6\u5b9a\u4e49\u65e0\u6cd5\u4fee\u6539\u3002 VID \u5fc5\u987b\u5728 \u63d2\u5165\u70b9 \u65f6\u8bbe\u7f6e\uff0c\u4e14\u4e00\u65e6\u8bbe\u7f6e\u65e0\u6cd5\u4fee\u6539\u3002 \"\u67e5\u8be2\u8d77\u59cb\u70b9\"( start vid ) \u4e0e\u5168\u5c40\u626b\u63cf \u00b6 \u7edd\u5927\u591a\u6570\u60c5\u51b5\u4e0b\uff0cNebulaGraph\u7684\u67e5\u8be2\u8bed\u53e5\uff08 MATCH \u3001 GO \u3001 LOOKUP \uff09\u7684\u6267\u884c\u8ba1\u5212\uff0c\u5fc5\u987b\u8981\u901a\u8fc7\u4e00\u5b9a\u65b9\u5f0f\u627e\u5230\u67e5\u8be2\u8d77\u59cb\u70b9\u7684 VID\uff08 start vid \uff09\u3002 \u5b9a\u4f4d start vid \u53ea\u6709\u4e24\u79cd\u65b9\u5f0f\uff1a \u4f8b\u5982 GO FROM \"player100\" OVER \u662f\u5728\u8bed\u53e5\u4e2d\u663e\u5f0f\u7684\u6307\u660e start vid \u662f \"player100\"\uff1b \u4f8b\u5982 LOOKUP ON player WHERE player.name == \"Tony Parker\" \u6216\u8005 MATCH (v:player {name:\"Tony Parker\"}) \uff0c\u662f\u901a\u8fc7\u5c5e\u6027 player.name \u7684\u7d22\u5f15\u6765\u5b9a\u4f4d\u5230 start vid \uff1b","title":"VID"},{"location":"1.introduction/3.vid/#vid","text":"\u5728\u4e00\u4e2a\u56fe\u7a7a\u95f4\u4e2d\uff0c\u4e00\u4e2a\u70b9\u7531\u70b9\u7684 ID \u552f\u4e00\u6807\u8bc6\uff0c\u5373 VID \u6216 Vertex ID\u3002","title":"\u70b9 VID"},{"location":"1.introduction/3.vid/#vid_1","text":"VID \u6570\u636e\u7c7b\u578b\u53ea\u53ef\u4ee5\u4e3a\u5b9a\u957f\u5b57\u7b26\u4e32 FIXED_STRING(<N>) \u6216 INT64 \u3002\u4e00\u4e2a\u56fe\u7a7a\u95f4\u53ea\u80fd\u9009\u7528\u5176\u4e2d\u4e00\u79cd VID \u7c7b\u578b\u3002 VID \u5728\u4e00\u4e2a\u56fe\u7a7a\u95f4\u4e2d\u5fc5\u987b\u552f\u4e00\uff0c\u5176\u4f5c\u7528\u7c7b\u4f3c\u4e8e\u5173\u7cfb\u578b\u6570\u636e\u5e93\u4e2d\u7684\u4e3b\u952e\uff08\u7d22\u5f15+\u552f\u4e00\u7ea6\u675f\uff09\u3002\u4f46\u4e0d\u540c\u56fe\u7a7a\u95f4\u4e2d\u7684 VID \u662f\u5b8c\u5168\u72ec\u7acb\u65e0\u5173\u7684\u3002 \u70b9 VID \u7684\u751f\u6210\u65b9\u5f0f\u5fc5\u987b\u7531\u7528\u6237\u81ea\u884c\u6307\u5b9a\uff0c\u7cfb\u7edf\u4e0d\u63d0\u4f9b\u81ea\u589e ID \u6216\u8005 UUID\u3002 VID \u76f8\u540c\u7684\u70b9\uff0c\u4f1a\u88ab\u8ba4\u4e3a\u662f\u540c\u4e00\u4e2a\u70b9\u3002\u4f8b\u5982\uff1a VID \u76f8\u5f53\u4e8e\u4e00\u4e2a\u5b9e\u4f53\u7684\u552f\u4e00\u6807\u53f7\uff0c\u4f8b\u5982\u4e00\u4e2a\u4eba\u7684\u8eab\u4efd\u8bc1\u53f7\u3002Tag \u76f8\u5f53\u4e8e\u5b9e\u4f53\u6240\u62e5\u6709\u7684\u7c7b\u578b\uff0c\u4f8b\u5982\"\u6ef4\u6ef4\u53f8\u673a\"\u548c\"\u8001\u677f\"\u3002\u4e0d\u540c\u7684 Tag \u53c8\u76f8\u5e94\u5b9a\u4e49\u4e86\u4e24\u7ec4\u4e0d\u540c\u7684\u5c5e\u6027\uff0c\u4f8b\u5982\"\u9a7e\u7167\u53f7\u3001\u9a7e\u9f84\u3001\u63a5\u5355\u91cf\u3001\u63a5\u5355\u5c0f\u53f7\"\u548c\"\u5de5\u53f7\u3001\u85aa\u6c34\u3001\u503a\u52a1\u989d\u5ea6\u3001\u5546\u52a1\u7535\u8bdd\"\u3002 \u540c\u65f6\u64cd\u4f5c\u76f8\u540c VID \u5e76\u4e14\u76f8\u540c Tag \u7684\u4e24\u6761 INSERT \u8bed\u53e5\uff08\u5747\u65e0 IF NOT EXISTS \u53c2\u6570\uff09\uff0c\u665a\u5199\u5165\u7684 INSERT \u4f1a\u8986\u76d6\u5148\u5199\u5165\u7684\u3002 \u540c\u65f6\u64cd\u4f5c\u5305\u542b\u76f8\u540c VID \u4f46\u662f\u4e24\u4e2a\u4e0d\u540c TAG A \u548c TAG B \u7684\u4e24\u6761 INSERT \u8bed\u53e5\uff0c\u5bf9 TAG A \u7684\u64cd\u4f5c\u4e0d\u4f1a\u5f71\u54cd TAG B \u3002 VID \u901a\u5e38\u4f1a\u88ab\uff08LSM-tree \u65b9\u5f0f\uff09\u7d22\u5f15\u5e76\u7f13\u5b58\u5728\u5185\u5b58\u4e2d\uff0c\u56e0\u6b64\u76f4\u63a5\u8bbf\u95ee VID \u7684\u6027\u80fd\u6700\u9ad8\u3002","title":"VID \u7684\u7279\u70b9"},{"location":"1.introduction/3.vid/#vid_2","text":"NebulaGraph 1.x \u53ea\u652f\u6301 VID \u7c7b\u578b\u4e3a INT64 \uff0c\u4ece 2.x \u5f00\u59cb\u652f\u6301 INT64 \u548c FIXED_STRING(<N>) \u3002\u5728 CREATE SPACE \u4e2d\u901a\u8fc7\u53c2\u6570 vid_type \u53ef\u4ee5\u6307\u5b9a VID \u7c7b\u578b\u3002 \u53ef\u4ee5\u4f7f\u7528 id() \u51fd\u6570\uff0c\u6307\u5b9a\u6216\u5f15\u7528\u8be5\u70b9\u7684 VID\u3002 \u53ef\u4ee5\u4f7f\u7528 LOOKUP \u6216\u8005 MATCH \u8bed\u53e5\uff0c\u6765\u901a\u8fc7\u5c5e\u6027\u7d22\u5f15\u67e5\u627e\u5bf9\u5e94\u7684 VID\u3002 \u6027\u80fd\u4e0a\uff0c\u76f4\u63a5\u901a\u8fc7 VID \u627e\u5230\u70b9\u7684\u8bed\u53e5\u6027\u80fd\u6700\u9ad8\uff0c\u4f8b\u5982 DELETE xxx WHERE id(xxx) == \"player100\" \uff0c\u6216\u8005 GO FROM \"player100\" \u7b49\u8bed\u53e5\u3002\u901a\u8fc7\u5c5e\u6027\u5148\u67e5\u627e VID\uff0c\u518d\u8fdb\u884c\u56fe\u64cd\u4f5c\u7684\u6027\u80fd\u4f1a\u53d8\u5dee\uff0c\u4f8b\u5982 LOOKUP | GO FROM $-.ids \u7b49\u8bed\u53e5\uff0c\u76f8\u6bd4\u524d\u8005\u591a\u4e86\u4e00\u6b21\u5185\u5b58\u6216\u786c\u76d8\u7684\u968f\u673a\u8bfb\uff08 LOOKUP \uff09\u4ee5\u53ca\u4e00\u6b21\u5e8f\u5217\u5316\uff08 | \uff09\u3002","title":"VID \u4f7f\u7528\u5efa\u8bae"},{"location":"1.introduction/3.vid/#vid_3","text":"VID \u7684\u751f\u6210\u5de5\u4f5c\u5b8c\u5168\u4ea4\u7ed9\u5e94\u7528\u7aef\uff0c\u6709\u4e00\u4e9b\u901a\u7528\u7684\u5efa\u8bae\uff1a \uff08\u6700\u4f18\uff09\u901a\u8fc7\u6709\u552f\u4e00\u6027\u7684\u4e3b\u952e\u6216\u8005\u5c5e\u6027\u6765\u76f4\u63a5\u4f5c\u4e3a VID\uff1b\u5c5e\u6027\u8bbf\u95ee\u4f9d\u8d56\u4e8e VID; \u901a\u8fc7\u6709\u552f\u4e00\u6027\u7684\u5c5e\u6027\u7ec4\u5408\u6765\u751f\u6210 VID\uff0c\u5c5e\u6027\u8bbf\u95ee\u4f9d\u8d56\u4e8e\u5c5e\u6027\u7d22\u5f15\u3002 \u901a\u8fc7 snowflake \u7b49\u7b97\u6cd5\u751f\u6210 VID\uff0c\u5c5e\u6027\u8bbf\u95ee\u4f9d\u8d56\u4e8e\u5c5e\u6027\u7d22\u5f15\u3002 \u5982\u679c\u4e2a\u522b\u8bb0\u5f55\u7684\u4e3b\u952e\u7279\u522b\u957f\uff0c\u4f46\u7edd\u5927\u591a\u6570\u8bb0\u5f55\u7684\u4e3b\u952e\u90fd\u5f88\u77ed\u7684\u60c5\u51b5\uff0c\u4e0d\u8981\u5c06 FIXED_STRING(<N>) \u7684 N \u8bbe\u7f6e\u6210\u8d85\u5927\uff0c\u8fd9\u4f1a\u6d6a\u8d39\u5927\u91cf\u5185\u5b58\u548c\u786c\u76d8\uff0c\u4e5f\u4f1a\u964d\u4f4e\u6027\u80fd\u3002\u6b64\u65f6\u53ef\u901a\u8fc7 BASE64\uff0cMD5\uff0chash \u7f16\u7801\u52a0\u62fc\u63a5\u7684\u65b9\u5f0f\u6765\u751f\u6210\u3002 \u5982\u679c\u7528 hash \u65b9\u5f0f\u751f\u6210 int64 VID\uff1a\u5728\u6709 10 \u4ebf\u4e2a\u70b9\u7684\u60c5\u51b5\u4e0b\uff0c\u53d1\u751f hash \u51b2\u7a81\u7684\u6982\u7387\u5927\u7ea6\u662f 1/10\u3002\u8fb9\u7684\u6570\u91cf\u4e0e\u78b0\u649e\u7684\u6982\u7387\u65e0\u5173\u3002","title":"VID \u751f\u6210\u5efa\u8bae"},{"location":"1.introduction/3.vid/#vid_4","text":"VID \u7684\u6570\u636e\u7c7b\u578b\u5fc5\u987b\u5728 \u521b\u5efa\u56fe\u7a7a\u95f4 \u65f6\u5b9a\u4e49\uff0c\u4e14\u4e00\u65e6\u5b9a\u4e49\u65e0\u6cd5\u4fee\u6539\u3002 VID \u5fc5\u987b\u5728 \u63d2\u5165\u70b9 \u65f6\u8bbe\u7f6e\uff0c\u4e14\u4e00\u65e6\u8bbe\u7f6e\u65e0\u6cd5\u4fee\u6539\u3002","title":"\u5b9a\u4e49\u548c\u4fee\u6539 VID \u4e0e\u5176\u6570\u636e\u7c7b\u578b"},{"location":"1.introduction/3.vid/#start_vid","text":"\u7edd\u5927\u591a\u6570\u60c5\u51b5\u4e0b\uff0cNebulaGraph\u7684\u67e5\u8be2\u8bed\u53e5\uff08 MATCH \u3001 GO \u3001 LOOKUP \uff09\u7684\u6267\u884c\u8ba1\u5212\uff0c\u5fc5\u987b\u8981\u901a\u8fc7\u4e00\u5b9a\u65b9\u5f0f\u627e\u5230\u67e5\u8be2\u8d77\u59cb\u70b9\u7684 VID\uff08 start vid \uff09\u3002 \u5b9a\u4f4d start vid \u53ea\u6709\u4e24\u79cd\u65b9\u5f0f\uff1a \u4f8b\u5982 GO FROM \"player100\" OVER \u662f\u5728\u8bed\u53e5\u4e2d\u663e\u5f0f\u7684\u6307\u660e start vid \u662f \"player100\"\uff1b \u4f8b\u5982 LOOKUP ON player WHERE player.name == \"Tony Parker\" \u6216\u8005 MATCH (v:player {name:\"Tony Parker\"}) \uff0c\u662f\u901a\u8fc7\u5c5e\u6027 player.name \u7684\u7d22\u5f15\u6765\u5b9a\u4f4d\u5230 start vid \uff1b","title":"\"\u67e5\u8be2\u8d77\u59cb\u70b9\"(start vid) \u4e0e\u5168\u5c40\u626b\u63cf"},{"location":"1.introduction/3.nebula-graph-architecture/1.architecture-overview/","text":"NebulaGraph\u67b6\u6784\u603b\u89c8 \u00b6 NebulaGraph\u7531\u4e09\u79cd\u670d\u52a1\u6784\u6210\uff1aGraph \u670d\u52a1\u3001Meta \u670d\u52a1\u548c Storage \u670d\u52a1\uff0c\u662f\u4e00\u79cd\u5b58\u50a8\u4e0e\u8ba1\u7b97\u5206\u79bb\u7684\u67b6\u6784\u3002 \u6bcf\u4e2a\u670d\u52a1\u90fd\u6709\u53ef\u6267\u884c\u7684\u4e8c\u8fdb\u5236\u6587\u4ef6\u548c\u5bf9\u5e94\u8fdb\u7a0b\uff0c\u7528\u6237\u53ef\u4ee5\u4f7f\u7528\u8fd9\u4e9b\u4e8c\u8fdb\u5236\u6587\u4ef6\u5728\u4e00\u4e2a\u6216\u591a\u4e2a\u8ba1\u7b97\u673a\u4e0a\u90e8\u7f72NebulaGraph\u96c6\u7fa4\u3002 \u4e0b\u56fe\u5c55\u793a\u4e86NebulaGraph\u96c6\u7fa4\u7684\u7ecf\u5178\u67b6\u6784\u3002 Meta \u670d\u52a1 \u00b6 \u5728NebulaGraph\u67b6\u6784\u4e2d\uff0cMeta \u670d\u52a1\u662f\u7531 nebula-metad \u8fdb\u7a0b\u63d0\u4f9b\u7684\uff0c\u8d1f\u8d23\u6570\u636e\u7ba1\u7406\uff0c\u4f8b\u5982 Schema \u64cd\u4f5c\u3001\u96c6\u7fa4\u7ba1\u7406\u548c\u7528\u6237\u6743\u9650\u7ba1\u7406\u7b49\u3002 Meta \u670d\u52a1\u7684\u8be6\u7ec6\u8bf4\u660e\uff0c\u8bf7\u53c2\u89c1 Meta \u670d\u52a1 \u3002 Graph \u670d\u52a1\u548c Storage \u670d\u52a1 \u00b6 NebulaGraph\u91c7\u7528\u8ba1\u7b97\u5b58\u50a8\u5206\u79bb\u67b6\u6784\u3002Graph \u670d\u52a1\u8d1f\u8d23\u5904\u7406\u8ba1\u7b97\u8bf7\u6c42\uff0cStorage \u670d\u52a1\u8d1f\u8d23\u5b58\u50a8\u6570\u636e\u3002\u5b83\u4eec\u7531\u4e0d\u540c\u7684\u8fdb\u7a0b\u63d0\u4f9b\uff0cGraph \u670d\u52a1\u662f\u7531 nebula-graphd \u8fdb\u7a0b\u63d0\u4f9b\uff0cStorage \u670d\u52a1\u662f\u7531 nebula-storaged \u8fdb\u7a0b\u63d0\u4f9b\u3002\u8ba1\u7b97\u5b58\u50a8\u5206\u79bb\u67b6\u6784\u7684\u4f18\u52bf\u5982\u4e0b\uff1a \u6613\u6269\u5c55 \u5206\u5e03\u5f0f\u67b6\u6784\u4fdd\u8bc1\u4e86 Graph \u670d\u52a1\u548c Storage \u670d\u52a1\u7684\u7075\u6d3b\u6027\uff0c\u65b9\u4fbf\u6269\u5bb9\u548c\u7f29\u5bb9\u3002 \u9ad8\u53ef\u7528 \u5982\u679c\u63d0\u4f9b Graph \u670d\u52a1\u7684\u670d\u52a1\u5668\u6709\u4e00\u90e8\u5206\u51fa\u73b0\u6545\u969c\uff0c\u5176\u4f59\u670d\u52a1\u5668\u53ef\u4ee5\u7ee7\u7eed\u4e3a\u5ba2\u6237\u7aef\u63d0\u4f9b\u670d\u52a1\uff0c\u800c\u4e14 Storage \u670d\u52a1\u5b58\u50a8\u7684\u6570\u636e\u4e0d\u4f1a\u4e22\u5931\u3002\u670d\u52a1\u6062\u590d\u901f\u5ea6\u8f83\u5feb\uff0c\u751a\u81f3\u80fd\u505a\u5230\u7528\u6237\u65e0\u611f\u77e5\u3002 \u8282\u7ea6\u6210\u672c \u8ba1\u7b97\u5b58\u50a8\u5206\u79bb\u67b6\u6784\u80fd\u591f\u63d0\u9ad8\u8d44\u6e90\u5229\u7528\u7387\uff0c\u800c\u4e14\u53ef\u6839\u636e\u4e1a\u52a1\u9700\u6c42\u7075\u6d3b\u63a7\u5236\u6210\u672c\u3002 \u66f4\u591a\u53ef\u80fd\u6027 \u57fa\u4e8e\u5206\u79bb\u67b6\u6784\u7684\u7279\u6027\uff0cGraph \u670d\u52a1\u5c06\u53ef\u4ee5\u5728\u66f4\u591a\u7c7b\u578b\u7684\u5b58\u50a8\u5f15\u64ce\u4e0a\u5355\u72ec\u8fd0\u884c\uff0cStorage \u670d\u52a1\u4e5f\u53ef\u4ee5\u4e3a\u591a\u79cd\u76ee\u7684\u8ba1\u7b97\u5f15\u64ce\u63d0\u4f9b\u670d\u52a1\u3002 Graph \u670d\u52a1\u548c Storage \u670d\u52a1\u7684\u8be6\u7ec6\u8bf4\u660e\uff0c\u8bf7\u53c2\u89c1 Graph \u670d\u52a1 \u548c Storage \u670d\u52a1 \u3002","title":"\u67b6\u6784\u603b\u89c8"},{"location":"1.introduction/3.nebula-graph-architecture/1.architecture-overview/#nebulagraph","text":"NebulaGraph\u7531\u4e09\u79cd\u670d\u52a1\u6784\u6210\uff1aGraph \u670d\u52a1\u3001Meta \u670d\u52a1\u548c Storage \u670d\u52a1\uff0c\u662f\u4e00\u79cd\u5b58\u50a8\u4e0e\u8ba1\u7b97\u5206\u79bb\u7684\u67b6\u6784\u3002 \u6bcf\u4e2a\u670d\u52a1\u90fd\u6709\u53ef\u6267\u884c\u7684\u4e8c\u8fdb\u5236\u6587\u4ef6\u548c\u5bf9\u5e94\u8fdb\u7a0b\uff0c\u7528\u6237\u53ef\u4ee5\u4f7f\u7528\u8fd9\u4e9b\u4e8c\u8fdb\u5236\u6587\u4ef6\u5728\u4e00\u4e2a\u6216\u591a\u4e2a\u8ba1\u7b97\u673a\u4e0a\u90e8\u7f72NebulaGraph\u96c6\u7fa4\u3002 \u4e0b\u56fe\u5c55\u793a\u4e86NebulaGraph\u96c6\u7fa4\u7684\u7ecf\u5178\u67b6\u6784\u3002","title":"NebulaGraph\u67b6\u6784\u603b\u89c8"},{"location":"1.introduction/3.nebula-graph-architecture/1.architecture-overview/#meta","text":"\u5728NebulaGraph\u67b6\u6784\u4e2d\uff0cMeta \u670d\u52a1\u662f\u7531 nebula-metad \u8fdb\u7a0b\u63d0\u4f9b\u7684\uff0c\u8d1f\u8d23\u6570\u636e\u7ba1\u7406\uff0c\u4f8b\u5982 Schema \u64cd\u4f5c\u3001\u96c6\u7fa4\u7ba1\u7406\u548c\u7528\u6237\u6743\u9650\u7ba1\u7406\u7b49\u3002 Meta \u670d\u52a1\u7684\u8be6\u7ec6\u8bf4\u660e\uff0c\u8bf7\u53c2\u89c1 Meta \u670d\u52a1 \u3002","title":"Meta \u670d\u52a1"},{"location":"1.introduction/3.nebula-graph-architecture/1.architecture-overview/#graph_storage","text":"NebulaGraph\u91c7\u7528\u8ba1\u7b97\u5b58\u50a8\u5206\u79bb\u67b6\u6784\u3002Graph \u670d\u52a1\u8d1f\u8d23\u5904\u7406\u8ba1\u7b97\u8bf7\u6c42\uff0cStorage \u670d\u52a1\u8d1f\u8d23\u5b58\u50a8\u6570\u636e\u3002\u5b83\u4eec\u7531\u4e0d\u540c\u7684\u8fdb\u7a0b\u63d0\u4f9b\uff0cGraph \u670d\u52a1\u662f\u7531 nebula-graphd \u8fdb\u7a0b\u63d0\u4f9b\uff0cStorage \u670d\u52a1\u662f\u7531 nebula-storaged \u8fdb\u7a0b\u63d0\u4f9b\u3002\u8ba1\u7b97\u5b58\u50a8\u5206\u79bb\u67b6\u6784\u7684\u4f18\u52bf\u5982\u4e0b\uff1a \u6613\u6269\u5c55 \u5206\u5e03\u5f0f\u67b6\u6784\u4fdd\u8bc1\u4e86 Graph \u670d\u52a1\u548c Storage \u670d\u52a1\u7684\u7075\u6d3b\u6027\uff0c\u65b9\u4fbf\u6269\u5bb9\u548c\u7f29\u5bb9\u3002 \u9ad8\u53ef\u7528 \u5982\u679c\u63d0\u4f9b Graph \u670d\u52a1\u7684\u670d\u52a1\u5668\u6709\u4e00\u90e8\u5206\u51fa\u73b0\u6545\u969c\uff0c\u5176\u4f59\u670d\u52a1\u5668\u53ef\u4ee5\u7ee7\u7eed\u4e3a\u5ba2\u6237\u7aef\u63d0\u4f9b\u670d\u52a1\uff0c\u800c\u4e14 Storage \u670d\u52a1\u5b58\u50a8\u7684\u6570\u636e\u4e0d\u4f1a\u4e22\u5931\u3002\u670d\u52a1\u6062\u590d\u901f\u5ea6\u8f83\u5feb\uff0c\u751a\u81f3\u80fd\u505a\u5230\u7528\u6237\u65e0\u611f\u77e5\u3002 \u8282\u7ea6\u6210\u672c \u8ba1\u7b97\u5b58\u50a8\u5206\u79bb\u67b6\u6784\u80fd\u591f\u63d0\u9ad8\u8d44\u6e90\u5229\u7528\u7387\uff0c\u800c\u4e14\u53ef\u6839\u636e\u4e1a\u52a1\u9700\u6c42\u7075\u6d3b\u63a7\u5236\u6210\u672c\u3002 \u66f4\u591a\u53ef\u80fd\u6027 \u57fa\u4e8e\u5206\u79bb\u67b6\u6784\u7684\u7279\u6027\uff0cGraph \u670d\u52a1\u5c06\u53ef\u4ee5\u5728\u66f4\u591a\u7c7b\u578b\u7684\u5b58\u50a8\u5f15\u64ce\u4e0a\u5355\u72ec\u8fd0\u884c\uff0cStorage \u670d\u52a1\u4e5f\u53ef\u4ee5\u4e3a\u591a\u79cd\u76ee\u7684\u8ba1\u7b97\u5f15\u64ce\u63d0\u4f9b\u670d\u52a1\u3002 Graph \u670d\u52a1\u548c Storage \u670d\u52a1\u7684\u8be6\u7ec6\u8bf4\u660e\uff0c\u8bf7\u53c2\u89c1 Graph \u670d\u52a1 \u548c Storage \u670d\u52a1 \u3002","title":"Graph \u670d\u52a1\u548c Storage \u670d\u52a1"},{"location":"1.introduction/3.nebula-graph-architecture/2.meta-service/","text":"Meta \u670d\u52a1 \u00b6 \u672c\u6587\u4ecb\u7ecd Meta \u670d\u52a1\u7684\u67b6\u6784\u548c\u529f\u80fd\u3002 Meta \u670d\u52a1\u67b6\u6784 \u00b6 Meta \u670d\u52a1\u662f\u7531 nebula-metad \u8fdb\u7a0b\u63d0\u4f9b\u7684\uff0c\u7528\u6237\u53ef\u4ee5\u6839\u636e\u573a\u666f\u914d\u7f6e nebula-metad \u8fdb\u7a0b\u6570\u91cf\uff1a \u6d4b\u8bd5\u73af\u5883\u4e2d\uff0c\u7528\u6237\u53ef\u4ee5\u5728NebulaGraph\u96c6\u7fa4\u4e2d\u90e8\u7f72 1 \u4e2a\u6216 3 \u4e2a nebula-metad \u8fdb\u7a0b\u3002\u5982\u679c\u8981\u90e8\u7f72 3 \u4e2a\uff0c\u7528\u6237\u53ef\u4ee5\u5c06\u5b83\u4eec\u90e8\u7f72\u5728 1 \u53f0\u673a\u5668\u4e0a\uff0c\u6216\u8005\u5206\u522b\u90e8\u7f72\u5728\u4e0d\u540c\u7684\u673a\u5668\u4e0a\u3002 \u751f\u4ea7\u73af\u5883\u4e2d\uff0c\u5efa\u8bae\u5728NebulaGraph\u96c6\u7fa4\u4e2d\u90e8\u7f72 3 \u4e2a nebula-metad \u8fdb\u7a0b\u3002\u8bf7\u5c06\u8fd9\u4e9b\u8fdb\u7a0b\u90e8\u7f72\u5728\u4e0d\u540c\u7684\u673a\u5668\u4e0a\u4ee5\u4fdd\u8bc1\u9ad8\u53ef\u7528\u3002 \u6240\u6709 nebula-metad \u8fdb\u7a0b\u6784\u6210\u4e86\u57fa\u4e8e Raft \u534f\u8bae\u7684\u96c6\u7fa4\uff0c\u5176\u4e2d\u4e00\u4e2a\u8fdb\u7a0b\u662f leader\uff0c\u5176\u4ed6\u8fdb\u7a0b\u90fd\u662f follower\u3002 leader \u662f\u7531\u591a\u6570\u6d3e\u9009\u4e3e\u51fa\u6765\uff0c\u53ea\u6709 leader \u80fd\u591f\u5bf9\u5ba2\u6237\u7aef\u6216\u5176\u4ed6\u7ec4\u4ef6\u63d0\u4f9b\u670d\u52a1\uff0c\u5176\u4ed6 follower \u4f5c\u4e3a\u5019\u8865\uff0c\u5982\u679c leader \u51fa\u73b0\u6545\u969c\uff0c\u4f1a\u5728\u6240\u6709 follower \u4e2d\u9009\u4e3e\u51fa\u65b0\u7684 leader\u3002 Note leader \u548c follower \u7684\u6570\u636e\u901a\u8fc7 Raft \u534f\u8bae\u4fdd\u6301\u4e00\u81f4\uff0c\u56e0\u6b64 leader \u6545\u969c\u548c\u9009\u4e3e\u65b0 leader \u4e0d\u4f1a\u5bfc\u81f4\u6570\u636e\u4e0d\u4e00\u81f4\u3002\u66f4\u591a\u5173\u4e8e Raft \u7684\u4ecb\u7ecd\u89c1 Storage \u670d\u52a1 \u3002 Meta \u670d\u52a1\u529f\u80fd \u00b6 \u7ba1\u7406\u7528\u6237\u8d26\u53f7 \u00b6 Meta \u670d\u52a1\u4e2d\u5b58\u50a8\u4e86\u7528\u6237\u7684\u8d26\u53f7\u548c\u6743\u9650\u4fe1\u606f\uff0c\u5f53\u5ba2\u6237\u7aef\u901a\u8fc7\u8d26\u53f7\u53d1\u9001\u8bf7\u6c42\u7ed9 Meta \u670d\u52a1\uff0cMeta \u670d\u52a1\u4f1a\u68c0\u67e5\u8d26\u53f7\u4fe1\u606f\uff0c\u4ee5\u53ca\u8be5\u8d26\u53f7\u662f\u5426\u6709\u5bf9\u5e94\u7684\u8bf7\u6c42\u6743\u9650\u3002 \u66f4\u591aNebulaGraph\u7684\u8bbf\u95ee\u63a7\u5236\u8bf4\u660e\uff0c\u8bf7\u53c2\u89c1 \u8eab\u4efd\u9a8c\u8bc1 \u3002 \u7ba1\u7406\u5206\u7247 \u00b6 Meta \u670d\u52a1\u8d1f\u8d23\u5b58\u50a8\u548c\u7ba1\u7406\u5206\u7247\u7684\u4f4d\u7f6e\u4fe1\u606f\uff0c\u5e76\u4e14\u4fdd\u8bc1\u5206\u7247\u7684\u8d1f\u8f7d\u5747\u8861\u3002 \u7ba1\u7406\u56fe\u7a7a\u95f4 \u00b6 NebulaGraph\u652f\u6301\u591a\u4e2a\u56fe\u7a7a\u95f4\uff0c\u4e0d\u540c\u56fe\u7a7a\u95f4\u5185\u7684\u6570\u636e\u662f\u5b89\u5168\u9694\u79bb\u7684\u3002Meta \u670d\u52a1\u5b58\u50a8\u6240\u6709\u56fe\u7a7a\u95f4\u7684\u5143\u6570\u636e\uff08\u975e\u5b8c\u6574\u6570\u636e\uff09\uff0c\u5e76\u8ddf\u8e2a\u6570\u636e\u7684\u53d8\u66f4\uff0c\u4f8b\u5982\u589e\u52a0\u6216\u5220\u9664\u56fe\u7a7a\u95f4\u3002 \u7ba1\u7406 Schema \u4fe1\u606f \u00b6 NebulaGraph\u662f\u5f3a\u7c7b\u578b\u56fe\u6570\u636e\u5e93\uff0c\u5b83\u7684 Schema \u5305\u62ec Tag\u3001Edge type\u3001Tag \u5c5e\u6027\u548c Edge type \u5c5e\u6027\u3002 Meta \u670d\u52a1\u4e2d\u5b58\u50a8\u4e86 Schema \u4fe1\u606f\uff0c\u540c\u65f6\u8fd8\u8d1f\u8d23 Schema \u7684\u6dfb\u52a0\u3001\u4fee\u6539\u548c\u5220\u9664\uff0c\u5e76\u8bb0\u5f55\u5b83\u4eec\u7684\u7248\u672c\u3002 \u66f4\u591aNebulaGraph\u7684 Schema \u4fe1\u606f\uff0c\u8bf7\u53c2\u89c1 \u6570\u636e\u6a21\u578b \u3002 \u7ba1\u7406 TTL \u4fe1\u606f \u00b6 Meta \u670d\u52a1\u5b58\u50a8 TTL\uff08Time To Live\uff09\u5b9a\u4e49\u4fe1\u606f\uff0c\u53ef\u4ee5\u7528\u4e8e\u8bbe\u7f6e\u6570\u636e\u751f\u547d\u5468\u671f\u3002\u6570\u636e\u8fc7\u671f\u540e\uff0c\u4f1a\u7531 Storage \u670d\u52a1\u8fdb\u884c\u5904\u7406\uff0c\u5177\u4f53\u8fc7\u7a0b\u53c2\u89c1 TTL \u3002 \u7ba1\u7406\u4f5c\u4e1a \u00b6 Meta \u670d\u52a1\u4e2d\u7684\u4f5c\u4e1a\u7ba1\u7406\u6a21\u5757\u8d1f\u8d23\u4f5c\u4e1a\u7684\u521b\u5efa\u3001\u6392\u961f\u3001\u67e5\u8be2\u548c\u5220\u9664\u3002","title":"Meta \u670d\u52a1"},{"location":"1.introduction/3.nebula-graph-architecture/2.meta-service/#meta","text":"\u672c\u6587\u4ecb\u7ecd Meta \u670d\u52a1\u7684\u67b6\u6784\u548c\u529f\u80fd\u3002","title":"Meta \u670d\u52a1"},{"location":"1.introduction/3.nebula-graph-architecture/2.meta-service/#meta_1","text":"Meta \u670d\u52a1\u662f\u7531 nebula-metad \u8fdb\u7a0b\u63d0\u4f9b\u7684\uff0c\u7528\u6237\u53ef\u4ee5\u6839\u636e\u573a\u666f\u914d\u7f6e nebula-metad \u8fdb\u7a0b\u6570\u91cf\uff1a \u6d4b\u8bd5\u73af\u5883\u4e2d\uff0c\u7528\u6237\u53ef\u4ee5\u5728NebulaGraph\u96c6\u7fa4\u4e2d\u90e8\u7f72 1 \u4e2a\u6216 3 \u4e2a nebula-metad \u8fdb\u7a0b\u3002\u5982\u679c\u8981\u90e8\u7f72 3 \u4e2a\uff0c\u7528\u6237\u53ef\u4ee5\u5c06\u5b83\u4eec\u90e8\u7f72\u5728 1 \u53f0\u673a\u5668\u4e0a\uff0c\u6216\u8005\u5206\u522b\u90e8\u7f72\u5728\u4e0d\u540c\u7684\u673a\u5668\u4e0a\u3002 \u751f\u4ea7\u73af\u5883\u4e2d\uff0c\u5efa\u8bae\u5728NebulaGraph\u96c6\u7fa4\u4e2d\u90e8\u7f72 3 \u4e2a nebula-metad \u8fdb\u7a0b\u3002\u8bf7\u5c06\u8fd9\u4e9b\u8fdb\u7a0b\u90e8\u7f72\u5728\u4e0d\u540c\u7684\u673a\u5668\u4e0a\u4ee5\u4fdd\u8bc1\u9ad8\u53ef\u7528\u3002 \u6240\u6709 nebula-metad \u8fdb\u7a0b\u6784\u6210\u4e86\u57fa\u4e8e Raft \u534f\u8bae\u7684\u96c6\u7fa4\uff0c\u5176\u4e2d\u4e00\u4e2a\u8fdb\u7a0b\u662f leader\uff0c\u5176\u4ed6\u8fdb\u7a0b\u90fd\u662f follower\u3002 leader \u662f\u7531\u591a\u6570\u6d3e\u9009\u4e3e\u51fa\u6765\uff0c\u53ea\u6709 leader \u80fd\u591f\u5bf9\u5ba2\u6237\u7aef\u6216\u5176\u4ed6\u7ec4\u4ef6\u63d0\u4f9b\u670d\u52a1\uff0c\u5176\u4ed6 follower \u4f5c\u4e3a\u5019\u8865\uff0c\u5982\u679c leader \u51fa\u73b0\u6545\u969c\uff0c\u4f1a\u5728\u6240\u6709 follower \u4e2d\u9009\u4e3e\u51fa\u65b0\u7684 leader\u3002 Note leader \u548c follower \u7684\u6570\u636e\u901a\u8fc7 Raft \u534f\u8bae\u4fdd\u6301\u4e00\u81f4\uff0c\u56e0\u6b64 leader \u6545\u969c\u548c\u9009\u4e3e\u65b0 leader \u4e0d\u4f1a\u5bfc\u81f4\u6570\u636e\u4e0d\u4e00\u81f4\u3002\u66f4\u591a\u5173\u4e8e Raft \u7684\u4ecb\u7ecd\u89c1 Storage \u670d\u52a1 \u3002","title":"Meta \u670d\u52a1\u67b6\u6784"},{"location":"1.introduction/3.nebula-graph-architecture/2.meta-service/#meta_2","text":"","title":"Meta \u670d\u52a1\u529f\u80fd"},{"location":"1.introduction/3.nebula-graph-architecture/2.meta-service/#_1","text":"Meta \u670d\u52a1\u4e2d\u5b58\u50a8\u4e86\u7528\u6237\u7684\u8d26\u53f7\u548c\u6743\u9650\u4fe1\u606f\uff0c\u5f53\u5ba2\u6237\u7aef\u901a\u8fc7\u8d26\u53f7\u53d1\u9001\u8bf7\u6c42\u7ed9 Meta \u670d\u52a1\uff0cMeta \u670d\u52a1\u4f1a\u68c0\u67e5\u8d26\u53f7\u4fe1\u606f\uff0c\u4ee5\u53ca\u8be5\u8d26\u53f7\u662f\u5426\u6709\u5bf9\u5e94\u7684\u8bf7\u6c42\u6743\u9650\u3002 \u66f4\u591aNebulaGraph\u7684\u8bbf\u95ee\u63a7\u5236\u8bf4\u660e\uff0c\u8bf7\u53c2\u89c1 \u8eab\u4efd\u9a8c\u8bc1 \u3002","title":"\u7ba1\u7406\u7528\u6237\u8d26\u53f7"},{"location":"1.introduction/3.nebula-graph-architecture/2.meta-service/#_2","text":"Meta \u670d\u52a1\u8d1f\u8d23\u5b58\u50a8\u548c\u7ba1\u7406\u5206\u7247\u7684\u4f4d\u7f6e\u4fe1\u606f\uff0c\u5e76\u4e14\u4fdd\u8bc1\u5206\u7247\u7684\u8d1f\u8f7d\u5747\u8861\u3002","title":"\u7ba1\u7406\u5206\u7247"},{"location":"1.introduction/3.nebula-graph-architecture/2.meta-service/#_3","text":"NebulaGraph\u652f\u6301\u591a\u4e2a\u56fe\u7a7a\u95f4\uff0c\u4e0d\u540c\u56fe\u7a7a\u95f4\u5185\u7684\u6570\u636e\u662f\u5b89\u5168\u9694\u79bb\u7684\u3002Meta \u670d\u52a1\u5b58\u50a8\u6240\u6709\u56fe\u7a7a\u95f4\u7684\u5143\u6570\u636e\uff08\u975e\u5b8c\u6574\u6570\u636e\uff09\uff0c\u5e76\u8ddf\u8e2a\u6570\u636e\u7684\u53d8\u66f4\uff0c\u4f8b\u5982\u589e\u52a0\u6216\u5220\u9664\u56fe\u7a7a\u95f4\u3002","title":"\u7ba1\u7406\u56fe\u7a7a\u95f4"},{"location":"1.introduction/3.nebula-graph-architecture/2.meta-service/#schema","text":"NebulaGraph\u662f\u5f3a\u7c7b\u578b\u56fe\u6570\u636e\u5e93\uff0c\u5b83\u7684 Schema \u5305\u62ec Tag\u3001Edge type\u3001Tag \u5c5e\u6027\u548c Edge type \u5c5e\u6027\u3002 Meta \u670d\u52a1\u4e2d\u5b58\u50a8\u4e86 Schema \u4fe1\u606f\uff0c\u540c\u65f6\u8fd8\u8d1f\u8d23 Schema \u7684\u6dfb\u52a0\u3001\u4fee\u6539\u548c\u5220\u9664\uff0c\u5e76\u8bb0\u5f55\u5b83\u4eec\u7684\u7248\u672c\u3002 \u66f4\u591aNebulaGraph\u7684 Schema \u4fe1\u606f\uff0c\u8bf7\u53c2\u89c1 \u6570\u636e\u6a21\u578b \u3002","title":"\u7ba1\u7406 Schema \u4fe1\u606f"},{"location":"1.introduction/3.nebula-graph-architecture/2.meta-service/#ttl","text":"Meta \u670d\u52a1\u5b58\u50a8 TTL\uff08Time To Live\uff09\u5b9a\u4e49\u4fe1\u606f\uff0c\u53ef\u4ee5\u7528\u4e8e\u8bbe\u7f6e\u6570\u636e\u751f\u547d\u5468\u671f\u3002\u6570\u636e\u8fc7\u671f\u540e\uff0c\u4f1a\u7531 Storage \u670d\u52a1\u8fdb\u884c\u5904\u7406\uff0c\u5177\u4f53\u8fc7\u7a0b\u53c2\u89c1 TTL \u3002","title":"\u7ba1\u7406 TTL \u4fe1\u606f"},{"location":"1.introduction/3.nebula-graph-architecture/2.meta-service/#_4","text":"Meta \u670d\u52a1\u4e2d\u7684\u4f5c\u4e1a\u7ba1\u7406\u6a21\u5757\u8d1f\u8d23\u4f5c\u4e1a\u7684\u521b\u5efa\u3001\u6392\u961f\u3001\u67e5\u8be2\u548c\u5220\u9664\u3002","title":"\u7ba1\u7406\u4f5c\u4e1a"},{"location":"1.introduction/3.nebula-graph-architecture/3.graph-service/","text":"Graph \u670d\u52a1 \u00b6 Graph \u670d\u52a1\u4e3b\u8981\u8d1f\u8d23\u5904\u7406\u67e5\u8be2\u8bf7\u6c42\uff0c\u5305\u62ec\u89e3\u6790\u67e5\u8be2\u8bed\u53e5\u3001\u6821\u9a8c\u8bed\u53e5\u3001\u751f\u6210\u6267\u884c\u8ba1\u5212\u4ee5\u53ca\u6309\u7167\u6267\u884c\u8ba1\u5212\u6267\u884c\u56db\u4e2a\u5927\u6b65\u9aa4\uff0c\u672c\u6587\u5c06\u57fa\u4e8e\u8fd9\u4e9b\u6b65\u9aa4\u4ecb\u7ecd Graph \u670d\u52a1\u3002 Graph \u670d\u52a1\u67b6\u6784 \u00b6 \u67e5\u8be2\u8bf7\u6c42\u53d1\u9001\u5230 Graph \u670d\u52a1\u540e\uff0c\u4f1a\u7531\u5982\u4e0b\u6a21\u5757\u4f9d\u6b21\u5904\u7406\uff1a Parser \uff1a\u8bcd\u6cd5\u8bed\u6cd5\u89e3\u6790\u6a21\u5757\u3002 Validator \uff1a\u8bed\u4e49\u6821\u9a8c\u6a21\u5757\u3002 Planner \uff1a\u6267\u884c\u8ba1\u5212\u4e0e\u4f18\u5316\u5668\u6a21\u5757\u3002 Executor \uff1a\u6267\u884c\u5f15\u64ce\u6a21\u5757\u3002 Parser \u00b6 Parser \u6a21\u5757\u6536\u5230\u8bf7\u6c42\u540e\uff0c\u901a\u8fc7 Flex\uff08\u8bcd\u6cd5\u5206\u6790\u5de5\u5177\uff09\u548c Bison\uff08\u8bed\u6cd5\u5206\u6790\u5de5\u5177\uff09\u751f\u6210\u7684\u8bcd\u6cd5\u8bed\u6cd5\u89e3\u6790\u5668\uff0c\u5c06\u8bed\u53e5\u8f6c\u6362\u4e3a\u62bd\u8c61\u8bed\u6cd5\u6811\uff08AST\uff09\uff0c\u5728\u8bed\u6cd5\u89e3\u6790\u9636\u6bb5\u4f1a\u62e6\u622a\u4e0d\u7b26\u5408\u8bed\u6cd5\u89c4\u5219\u7684\u8bed\u53e5\u3002 \u4f8b\u5982 GO FROM \"Tim\" OVER like WHERE properties(edge).likeness > 8.0 YIELD dst(edge) \u8bed\u53e5\u8f6c\u6362\u7684 AST \u5982\u4e0b\u3002 Validator \u00b6 Validator \u6a21\u5757\u5bf9\u751f\u6210\u7684 AST \u8fdb\u884c\u8bed\u4e49\u6821\u9a8c\uff0c\u4e3b\u8981\u5305\u62ec\uff1a \u6821\u9a8c\u5143\u6570\u636e\u4fe1\u606f \u6821\u9a8c\u8bed\u53e5\u4e2d\u7684\u5143\u6570\u636e\u4fe1\u606f\u662f\u5426\u6b63\u786e\u3002 \u4f8b\u5982\u89e3\u6790 OVER \u3001 WHERE \u548c YIELD \u8bed\u53e5\u65f6\uff0c\u4f1a\u67e5\u627e Schema \u6821\u9a8c Edge type\u3001Tag \u7684\u4fe1\u606f\u662f\u5426\u5b58\u5728\uff0c\u6216\u8005\u63d2\u5165\u6570\u636e\u65f6\u6821\u9a8c\u63d2\u5165\u7684\u6570\u636e\u7c7b\u578b\u548c Schema \u4e2d\u7684\u662f\u5426\u4e00\u81f4\u3002 \u6821\u9a8c\u4e0a\u4e0b\u6587\u5f15\u7528\u4fe1\u606f \u6821\u9a8c\u5f15\u7528\u7684\u53d8\u91cf\u662f\u5426\u5b58\u5728\u6216\u8005\u5f15\u7528\u7684\u5c5e\u6027\u662f\u5426\u5c5e\u4e8e\u53d8\u91cf\u3002 \u4f8b\u5982\u8bed\u53e5 $var = GO FROM \"Tim\" OVER like YIELD dst(edge) AS ID; GO FROM $var.ID OVER serve YIELD dst(edge) \uff0cValidator \u6a21\u5757\u9996\u5148\u4f1a\u68c0\u67e5\u53d8\u91cf var \u662f\u5426\u5b9a\u4e49\uff0c\u5176\u6b21\u518d\u68c0\u67e5\u5c5e\u6027 ID \u662f\u5426\u5c5e\u4e8e\u53d8\u91cf var \u3002 \u6821\u9a8c\u7c7b\u578b\u63a8\u65ad \u63a8\u65ad\u8868\u8fbe\u5f0f\u7684\u7ed3\u679c\u7c7b\u578b\uff0c\u5e76\u6839\u636e\u5b50\u53e5\u6821\u9a8c\u7c7b\u578b\u662f\u5426\u6b63\u786e\u3002 \u4f8b\u5982 WHERE \u5b50\u53e5\u8981\u6c42\u7ed3\u679c\u662f bool \u3001 null \u6216\u8005 empty \u3002 \u6821\u9a8c * \u4ee3\u8868\u7684\u4fe1\u606f \u67e5\u8be2\u8bed\u53e5\u4e2d\u5305\u542b * \u65f6\uff0c\u6821\u9a8c\u5b50\u53e5\u65f6\u9700\u8981\u5c06 * \u6d89\u53ca\u7684 Schema \u90fd\u8fdb\u884c\u6821\u9a8c\u3002 \u4f8b\u5982\u8bed\u53e5 GO FROM \"Tim\" OVER * YIELD dst(edge), properties(edge).likeness, dst(edge) \uff0c\u6821\u9a8c OVER \u5b50\u53e5\u65f6\u9700\u8981\u6821\u9a8c\u6240\u6709\u7684 Edge type\uff0c\u5982\u679c Edge type \u5305\u542b like \u548c serve \uff0c\u8be5\u8bed\u53e5\u4f1a\u5c55\u5f00\u4e3a GO FROM \"Tim\" OVER like,serve YIELD dst(edge), properties(edge).likeness, dst(edge) \u3002 \u6821\u9a8c\u8f93\u5165\u8f93\u51fa \u6821\u9a8c\u7ba1\u9053\u7b26\uff08|\uff09\u524d\u540e\u7684\u4e00\u81f4\u6027\u3002 \u4f8b\u5982\u8bed\u53e5 GO FROM \"Tim\" OVER like YIELD dst(edge) AS ID | GO FROM $-.ID OVER serve YIELD dst(edge) \uff0cValidator \u6a21\u5757\u4f1a\u6821\u9a8c $-.ID \u5728\u7ba1\u9053\u7b26\u5de6\u4fa7\u662f\u5426\u5df2\u7ecf\u5b9a\u4e49\u3002 \u6821\u9a8c\u5b8c\u6210\u540e\uff0cValidator \u6a21\u5757\u8fd8\u4f1a\u751f\u6210\u4e00\u4e2a\u9ed8\u8ba4\u53ef\u6267\u884c\uff0c\u4f46\u662f\u672a\u8fdb\u884c\u4f18\u5316\u7684\u6267\u884c\u8ba1\u5212\uff0c\u5b58\u50a8\u5728\u76ee\u5f55 src/planner \u5185\u3002 Planner \u00b6 \u5982\u679c\u914d\u7f6e\u6587\u4ef6 nebula-graphd.conf \u4e2d enable_optimizer \u8bbe\u7f6e\u4e3a false \uff0cPlanner \u6a21\u5757\u4e0d\u4f1a\u4f18\u5316 Validator \u6a21\u5757\u751f\u6210\u7684\u6267\u884c\u8ba1\u5212\uff0c\u800c\u662f\u76f4\u63a5\u4ea4\u7ed9 Executor \u6a21\u5757\u6267\u884c\u3002 \u5982\u679c\u914d\u7f6e\u6587\u4ef6 nebula-graphd.conf \u4e2d enable_optimizer \u8bbe\u7f6e\u4e3a true \uff0cPlanner \u6a21\u5757\u4f1a\u5bf9 Validator \u6a21\u5757\u751f\u6210\u7684\u6267\u884c\u8ba1\u5212\u8fdb\u884c\u4f18\u5316\u3002\u5982\u4e0b\u56fe\u6240\u793a\u3002 \u4f18\u5316\u524d \u5982\u4e0a\u56fe\u53f3\u4fa7\u672a\u4f18\u5316\u7684\u6267\u884c\u8ba1\u5212\uff0c\u6bcf\u4e2a\u8282\u70b9\u4f9d\u8d56\u53e6\u4e00\u4e2a\u8282\u70b9\uff0c\u4f8b\u5982\u6839\u8282\u70b9 Project \u4f9d\u8d56 Filter \u3001 Filter \u4f9d\u8d56 GetNeighbor \uff0c\u6700\u7ec8\u627e\u5230\u53f6\u5b50\u8282\u70b9 Start \uff0c\u624d\u80fd\u5f00\u59cb\u6267\u884c\uff08\u5e76\u975e\u771f\u6b63\u6267\u884c\uff09\u3002 \u5728\u8fd9\u4e2a\u8fc7\u7a0b\u4e2d\uff0c\u6bcf\u4e2a\u8282\u70b9\u4f1a\u6709\u5bf9\u5e94\u7684\u8f93\u5165\u53d8\u91cf\u548c\u8f93\u51fa\u53d8\u91cf\uff0c\u8fd9\u4e9b\u53d8\u91cf\u5b58\u50a8\u5728\u4e00\u4e2a\u54c8\u5e0c\u8868\u4e2d\u3002\u7531\u4e8e\u6267\u884c\u8ba1\u5212\u4e0d\u662f\u771f\u6b63\u6267\u884c\uff0c\u6240\u4ee5\u54c8\u5e0c\u8868\u4e2d\u6bcf\u4e2a key \u7684 value \u503c\u90fd\u4e3a\u7a7a\uff08\u9664\u4e86 Start \u8282\u70b9\uff0c\u8d77\u59cb\u6570\u636e\u4f1a\u5b58\u50a8\u5728\u8be5\u8282\u70b9\u7684\u8f93\u5165\u53d8\u91cf\u4e2d\uff09\u3002\u54c8\u5e0c\u8868\u5b9a\u4e49\u5728\u4ed3\u5e93 nebula-graph \u5185\u7684 src/context/ExecutionContext.cpp \u4e2d\u3002 \u4f8b\u5982\u54c8\u5e0c\u8868\u7684\u540d\u79f0\u4e3a ResultMap \uff0c\u5728\u5efa\u7acb Filter \u8fd9\u4e2a\u8282\u70b9\u65f6\uff0c\u5b9a\u4e49\u8be5\u8282\u70b9\u4ece ResultMap[\"GN1\"] \u4e2d\u8bfb\u53d6\u6570\u636e\uff0c\u7136\u540e\u5c06\u7ed3\u679c\u5b58\u50a8\u5728 ResultMap[\"Filter2\"] \u4e2d\uff0c\u4f9d\u6b21\u7c7b\u63a8\uff0c\u5c06\u6bcf\u4e2a\u8282\u70b9\u7684\u8f93\u5165\u8f93\u51fa\u90fd\u786e\u5b9a\u597d\u3002 \u4f18\u5316\u8fc7\u7a0b Planner \u6a21\u5757\u76ee\u524d\u7684\u4f18\u5316\u65b9\u5f0f\u662f RBO\uff08rule-based optimization\uff09\uff0c\u5373\u9884\u5b9a\u4e49\u4f18\u5316\u89c4\u5219\uff0c\u7136\u540e\u5bf9 Validator \u6a21\u5757\u751f\u6210\u7684\u9ed8\u8ba4\u6267\u884c\u8ba1\u5212\u8fdb\u884c\u4f18\u5316\u3002\u65b0\u7684\u4f18\u5316\u89c4\u5219 CBO\uff08cost-based optimization\uff09\u6b63\u5728\u5f00\u53d1\u4e2d\u3002\u4f18\u5316\u4ee3\u7801\u5b58\u50a8\u5728\u4ed3\u5e93 nebula-graph \u7684\u76ee\u5f55 src/optimizer/ \u5185\u3002 RBO \u662f\u4e00\u4e2a\u81ea\u5e95\u5411\u4e0a\u7684\u63a2\u7d22\u8fc7\u7a0b\uff0c\u5373\u5bf9\u4e8e\u6bcf\u4e2a\u89c4\u5219\u800c\u8a00\uff0c\u90fd\u4f1a\u7531\u6267\u884c\u8ba1\u5212\u7684\u6839\u8282\u70b9\uff08\u793a\u4f8b\u662f Project \uff09\u5f00\u59cb\uff0c\u4e00\u6b65\u6b65\u5411\u4e0b\u63a2\u7d22\u5230\u6700\u5e95\u5c42\u7684\u8282\u70b9\uff0c\u5728\u8fc7\u7a0b\u4e2d\u67e5\u770b\u662f\u5426\u53ef\u4ee5\u5339\u914d\u89c4\u5219\u3002 \u5982\u4e0a\u56fe\u6240\u793a\uff0c\u63a2\u7d22\u5230\u8282\u70b9 Filter \u65f6\uff0c\u53d1\u73b0\u4f9d\u8d56\u7684\u8282\u70b9\u662f GetNeighbor \uff0c\u5339\u914d\u9884\u5148\u5b9a\u4e49\u7684\u89c4\u5219\uff0c\u5c31\u4f1a\u5c06 Filter \u878d\u5165\u5230 GetNeighbor \u4e2d\uff0c\u7136\u540e\u79fb\u9664\u8282\u70b9 Filter \uff0c\u7ee7\u7eed\u5339\u914d\u4e0b\u4e00\u4e2a\u89c4\u5219\u3002\u5728\u6267\u884c\u9636\u6bb5\uff0c\u5f53\u7b97\u5b50 GetNeighbor \u8c03\u7528 Storage \u670d\u52a1\u7684\u63a5\u53e3\u83b7\u53d6\u4e00\u4e2a\u70b9\u7684\u90bb\u8fb9\u65f6\uff0cStorage \u670d\u52a1\u5185\u90e8\u4f1a\u76f4\u63a5\u5c06\u4e0d\u7b26\u5408\u6761\u4ef6\u7684\u8fb9\u8fc7\u6ee4\u6389\uff0c\u8fd9\u6837\u53ef\u4ee5\u6781\u5927\u5730\u51cf\u5c11\u4f20\u8f93\u7684\u6570\u636e\u91cf\uff0c\u8be5\u4f18\u5316\u79f0\u4e3a\u8fc7\u6ee4\u4e0b\u63a8\u3002 Executor \u00b6 Executor \u6a21\u5757\u5305\u542b\u8c03\u5ea6\u5668\uff08Scheduler\uff09\u548c\u6267\u884c\u5668\uff08Executor\uff09\uff0c\u901a\u8fc7\u8c03\u5ea6\u5668\u8c03\u5ea6\u6267\u884c\u8ba1\u5212\uff0c\u8ba9\u6267\u884c\u5668\u6839\u636e\u6267\u884c\u8ba1\u5212\u751f\u6210\u5bf9\u5e94\u7684\u6267\u884c\u7b97\u5b50\uff0c\u4ece\u53f6\u5b50\u8282\u70b9\u5f00\u59cb\u6267\u884c\uff0c\u76f4\u5230\u6839\u8282\u70b9\u7ed3\u675f\u3002\u5982\u4e0b\u56fe\u6240\u793a\u3002 \u6bcf\u4e00\u4e2a\u6267\u884c\u8ba1\u5212\u8282\u70b9\u90fd\u4e00\u4e00\u5bf9\u5e94\u4e00\u4e2a\u6267\u884c\u7b97\u5b50\uff0c\u8282\u70b9\u7684\u8f93\u5165\u8f93\u51fa\u5728\u4f18\u5316\u6267\u884c\u8ba1\u5212\u65f6\u5df2\u7ecf\u786e\u5b9a\uff0c\u6bcf\u4e2a\u7b97\u5b50\u53ea\u9700\u8981\u62ff\u5230\u8f93\u5165\u53d8\u91cf\u4e2d\u7684\u503c\u8fdb\u884c\u8ba1\u7b97\uff0c\u6700\u540e\u5c06\u8ba1\u7b97\u7ed3\u679c\u653e\u5165\u5bf9\u5e94\u7684\u8f93\u51fa\u53d8\u91cf\u4e2d\u5373\u53ef\uff0c\u6240\u4ee5\u53ea\u9700\u8981\u4ece\u8282\u70b9 Start \u4e00\u6b65\u6b65\u6267\u884c\uff0c\u6700\u540e\u4e00\u4e2a\u7b97\u5b50\u7684\u8f93\u51fa\u53d8\u91cf\u4f1a\u4f5c\u4e3a\u6700\u7ec8\u7ed3\u679c\u8fd4\u56de\u7ed9\u5ba2\u6237\u7aef\u3002 \u4ee3\u7801\u7ed3\u6784 \u00b6 NebulaGraph\u7684\u4ee3\u7801\u5c42\u6b21\u7ed3\u6784\u5982\u4e0b\uff1a | --src | --graph | --context //\u6821\u9a8c\u671f\u548c\u6267\u884c\u671f\u4e0a\u4e0b\u6587 | --executor //\u6267\u884c\u7b97\u5b50 | --gc //\u5783\u573e\u6536\u96c6\u5668 | --optimizer //\u4f18\u5316\u89c4\u5219 | --planner //\u6267\u884c\u8ba1\u5212\u7ed3\u6784 | --scheduler //\u8c03\u5ea6\u5668 | --service //\u5bf9\u5916\u670d\u52a1\u7ba1\u7406 | --session //\u4f1a\u8bdd\u7ba1\u7406 | --stats //\u8fd0\u884c\u6307\u6807 | --util //\u57fa\u7840\u7ec4\u4ef6 | --validator //\u8bed\u53e5\u6821\u9a8c | --visitor //visitor\u8868\u8fbe\u5f0f \u89c6\u9891 \u00b6 \u7528\u6237\u4e5f\u53ef\u4ee5\u901a\u8fc7\u89c6\u9891\u5168\u65b9\u4f4d\u4e86\u89e3NebulaGraph\u7684\u67e5\u8be2\u5f15\u64ce\u3002 nMeetup\u00b7\u4e0a\u6d77 \uff5c\u5168\u9762\u89e3\u6790 Query Engine \uff0833 \u5206 30 \u79d2\uff09","title":"Graph \u670d\u52a1"},{"location":"1.introduction/3.nebula-graph-architecture/3.graph-service/#graph","text":"Graph \u670d\u52a1\u4e3b\u8981\u8d1f\u8d23\u5904\u7406\u67e5\u8be2\u8bf7\u6c42\uff0c\u5305\u62ec\u89e3\u6790\u67e5\u8be2\u8bed\u53e5\u3001\u6821\u9a8c\u8bed\u53e5\u3001\u751f\u6210\u6267\u884c\u8ba1\u5212\u4ee5\u53ca\u6309\u7167\u6267\u884c\u8ba1\u5212\u6267\u884c\u56db\u4e2a\u5927\u6b65\u9aa4\uff0c\u672c\u6587\u5c06\u57fa\u4e8e\u8fd9\u4e9b\u6b65\u9aa4\u4ecb\u7ecd Graph \u670d\u52a1\u3002","title":"Graph \u670d\u52a1"},{"location":"1.introduction/3.nebula-graph-architecture/3.graph-service/#graph_1","text":"\u67e5\u8be2\u8bf7\u6c42\u53d1\u9001\u5230 Graph \u670d\u52a1\u540e\uff0c\u4f1a\u7531\u5982\u4e0b\u6a21\u5757\u4f9d\u6b21\u5904\u7406\uff1a Parser \uff1a\u8bcd\u6cd5\u8bed\u6cd5\u89e3\u6790\u6a21\u5757\u3002 Validator \uff1a\u8bed\u4e49\u6821\u9a8c\u6a21\u5757\u3002 Planner \uff1a\u6267\u884c\u8ba1\u5212\u4e0e\u4f18\u5316\u5668\u6a21\u5757\u3002 Executor \uff1a\u6267\u884c\u5f15\u64ce\u6a21\u5757\u3002","title":"Graph \u670d\u52a1\u67b6\u6784"},{"location":"1.introduction/3.nebula-graph-architecture/3.graph-service/#parser","text":"Parser \u6a21\u5757\u6536\u5230\u8bf7\u6c42\u540e\uff0c\u901a\u8fc7 Flex\uff08\u8bcd\u6cd5\u5206\u6790\u5de5\u5177\uff09\u548c Bison\uff08\u8bed\u6cd5\u5206\u6790\u5de5\u5177\uff09\u751f\u6210\u7684\u8bcd\u6cd5\u8bed\u6cd5\u89e3\u6790\u5668\uff0c\u5c06\u8bed\u53e5\u8f6c\u6362\u4e3a\u62bd\u8c61\u8bed\u6cd5\u6811\uff08AST\uff09\uff0c\u5728\u8bed\u6cd5\u89e3\u6790\u9636\u6bb5\u4f1a\u62e6\u622a\u4e0d\u7b26\u5408\u8bed\u6cd5\u89c4\u5219\u7684\u8bed\u53e5\u3002 \u4f8b\u5982 GO FROM \"Tim\" OVER like WHERE properties(edge).likeness > 8.0 YIELD dst(edge) \u8bed\u53e5\u8f6c\u6362\u7684 AST \u5982\u4e0b\u3002","title":"Parser"},{"location":"1.introduction/3.nebula-graph-architecture/3.graph-service/#validator","text":"Validator \u6a21\u5757\u5bf9\u751f\u6210\u7684 AST \u8fdb\u884c\u8bed\u4e49\u6821\u9a8c\uff0c\u4e3b\u8981\u5305\u62ec\uff1a \u6821\u9a8c\u5143\u6570\u636e\u4fe1\u606f \u6821\u9a8c\u8bed\u53e5\u4e2d\u7684\u5143\u6570\u636e\u4fe1\u606f\u662f\u5426\u6b63\u786e\u3002 \u4f8b\u5982\u89e3\u6790 OVER \u3001 WHERE \u548c YIELD \u8bed\u53e5\u65f6\uff0c\u4f1a\u67e5\u627e Schema \u6821\u9a8c Edge type\u3001Tag \u7684\u4fe1\u606f\u662f\u5426\u5b58\u5728\uff0c\u6216\u8005\u63d2\u5165\u6570\u636e\u65f6\u6821\u9a8c\u63d2\u5165\u7684\u6570\u636e\u7c7b\u578b\u548c Schema \u4e2d\u7684\u662f\u5426\u4e00\u81f4\u3002 \u6821\u9a8c\u4e0a\u4e0b\u6587\u5f15\u7528\u4fe1\u606f \u6821\u9a8c\u5f15\u7528\u7684\u53d8\u91cf\u662f\u5426\u5b58\u5728\u6216\u8005\u5f15\u7528\u7684\u5c5e\u6027\u662f\u5426\u5c5e\u4e8e\u53d8\u91cf\u3002 \u4f8b\u5982\u8bed\u53e5 $var = GO FROM \"Tim\" OVER like YIELD dst(edge) AS ID; GO FROM $var.ID OVER serve YIELD dst(edge) \uff0cValidator \u6a21\u5757\u9996\u5148\u4f1a\u68c0\u67e5\u53d8\u91cf var \u662f\u5426\u5b9a\u4e49\uff0c\u5176\u6b21\u518d\u68c0\u67e5\u5c5e\u6027 ID \u662f\u5426\u5c5e\u4e8e\u53d8\u91cf var \u3002 \u6821\u9a8c\u7c7b\u578b\u63a8\u65ad \u63a8\u65ad\u8868\u8fbe\u5f0f\u7684\u7ed3\u679c\u7c7b\u578b\uff0c\u5e76\u6839\u636e\u5b50\u53e5\u6821\u9a8c\u7c7b\u578b\u662f\u5426\u6b63\u786e\u3002 \u4f8b\u5982 WHERE \u5b50\u53e5\u8981\u6c42\u7ed3\u679c\u662f bool \u3001 null \u6216\u8005 empty \u3002 \u6821\u9a8c * \u4ee3\u8868\u7684\u4fe1\u606f \u67e5\u8be2\u8bed\u53e5\u4e2d\u5305\u542b * \u65f6\uff0c\u6821\u9a8c\u5b50\u53e5\u65f6\u9700\u8981\u5c06 * \u6d89\u53ca\u7684 Schema \u90fd\u8fdb\u884c\u6821\u9a8c\u3002 \u4f8b\u5982\u8bed\u53e5 GO FROM \"Tim\" OVER * YIELD dst(edge), properties(edge).likeness, dst(edge) \uff0c\u6821\u9a8c OVER \u5b50\u53e5\u65f6\u9700\u8981\u6821\u9a8c\u6240\u6709\u7684 Edge type\uff0c\u5982\u679c Edge type \u5305\u542b like \u548c serve \uff0c\u8be5\u8bed\u53e5\u4f1a\u5c55\u5f00\u4e3a GO FROM \"Tim\" OVER like,serve YIELD dst(edge), properties(edge).likeness, dst(edge) \u3002 \u6821\u9a8c\u8f93\u5165\u8f93\u51fa \u6821\u9a8c\u7ba1\u9053\u7b26\uff08|\uff09\u524d\u540e\u7684\u4e00\u81f4\u6027\u3002 \u4f8b\u5982\u8bed\u53e5 GO FROM \"Tim\" OVER like YIELD dst(edge) AS ID | GO FROM $-.ID OVER serve YIELD dst(edge) \uff0cValidator \u6a21\u5757\u4f1a\u6821\u9a8c $-.ID \u5728\u7ba1\u9053\u7b26\u5de6\u4fa7\u662f\u5426\u5df2\u7ecf\u5b9a\u4e49\u3002 \u6821\u9a8c\u5b8c\u6210\u540e\uff0cValidator \u6a21\u5757\u8fd8\u4f1a\u751f\u6210\u4e00\u4e2a\u9ed8\u8ba4\u53ef\u6267\u884c\uff0c\u4f46\u662f\u672a\u8fdb\u884c\u4f18\u5316\u7684\u6267\u884c\u8ba1\u5212\uff0c\u5b58\u50a8\u5728\u76ee\u5f55 src/planner \u5185\u3002","title":"Validator"},{"location":"1.introduction/3.nebula-graph-architecture/3.graph-service/#planner","text":"\u5982\u679c\u914d\u7f6e\u6587\u4ef6 nebula-graphd.conf \u4e2d enable_optimizer \u8bbe\u7f6e\u4e3a false \uff0cPlanner \u6a21\u5757\u4e0d\u4f1a\u4f18\u5316 Validator \u6a21\u5757\u751f\u6210\u7684\u6267\u884c\u8ba1\u5212\uff0c\u800c\u662f\u76f4\u63a5\u4ea4\u7ed9 Executor \u6a21\u5757\u6267\u884c\u3002 \u5982\u679c\u914d\u7f6e\u6587\u4ef6 nebula-graphd.conf \u4e2d enable_optimizer \u8bbe\u7f6e\u4e3a true \uff0cPlanner \u6a21\u5757\u4f1a\u5bf9 Validator \u6a21\u5757\u751f\u6210\u7684\u6267\u884c\u8ba1\u5212\u8fdb\u884c\u4f18\u5316\u3002\u5982\u4e0b\u56fe\u6240\u793a\u3002 \u4f18\u5316\u524d \u5982\u4e0a\u56fe\u53f3\u4fa7\u672a\u4f18\u5316\u7684\u6267\u884c\u8ba1\u5212\uff0c\u6bcf\u4e2a\u8282\u70b9\u4f9d\u8d56\u53e6\u4e00\u4e2a\u8282\u70b9\uff0c\u4f8b\u5982\u6839\u8282\u70b9 Project \u4f9d\u8d56 Filter \u3001 Filter \u4f9d\u8d56 GetNeighbor \uff0c\u6700\u7ec8\u627e\u5230\u53f6\u5b50\u8282\u70b9 Start \uff0c\u624d\u80fd\u5f00\u59cb\u6267\u884c\uff08\u5e76\u975e\u771f\u6b63\u6267\u884c\uff09\u3002 \u5728\u8fd9\u4e2a\u8fc7\u7a0b\u4e2d\uff0c\u6bcf\u4e2a\u8282\u70b9\u4f1a\u6709\u5bf9\u5e94\u7684\u8f93\u5165\u53d8\u91cf\u548c\u8f93\u51fa\u53d8\u91cf\uff0c\u8fd9\u4e9b\u53d8\u91cf\u5b58\u50a8\u5728\u4e00\u4e2a\u54c8\u5e0c\u8868\u4e2d\u3002\u7531\u4e8e\u6267\u884c\u8ba1\u5212\u4e0d\u662f\u771f\u6b63\u6267\u884c\uff0c\u6240\u4ee5\u54c8\u5e0c\u8868\u4e2d\u6bcf\u4e2a key \u7684 value \u503c\u90fd\u4e3a\u7a7a\uff08\u9664\u4e86 Start \u8282\u70b9\uff0c\u8d77\u59cb\u6570\u636e\u4f1a\u5b58\u50a8\u5728\u8be5\u8282\u70b9\u7684\u8f93\u5165\u53d8\u91cf\u4e2d\uff09\u3002\u54c8\u5e0c\u8868\u5b9a\u4e49\u5728\u4ed3\u5e93 nebula-graph \u5185\u7684 src/context/ExecutionContext.cpp \u4e2d\u3002 \u4f8b\u5982\u54c8\u5e0c\u8868\u7684\u540d\u79f0\u4e3a ResultMap \uff0c\u5728\u5efa\u7acb Filter \u8fd9\u4e2a\u8282\u70b9\u65f6\uff0c\u5b9a\u4e49\u8be5\u8282\u70b9\u4ece ResultMap[\"GN1\"] \u4e2d\u8bfb\u53d6\u6570\u636e\uff0c\u7136\u540e\u5c06\u7ed3\u679c\u5b58\u50a8\u5728 ResultMap[\"Filter2\"] \u4e2d\uff0c\u4f9d\u6b21\u7c7b\u63a8\uff0c\u5c06\u6bcf\u4e2a\u8282\u70b9\u7684\u8f93\u5165\u8f93\u51fa\u90fd\u786e\u5b9a\u597d\u3002 \u4f18\u5316\u8fc7\u7a0b Planner \u6a21\u5757\u76ee\u524d\u7684\u4f18\u5316\u65b9\u5f0f\u662f RBO\uff08rule-based optimization\uff09\uff0c\u5373\u9884\u5b9a\u4e49\u4f18\u5316\u89c4\u5219\uff0c\u7136\u540e\u5bf9 Validator \u6a21\u5757\u751f\u6210\u7684\u9ed8\u8ba4\u6267\u884c\u8ba1\u5212\u8fdb\u884c\u4f18\u5316\u3002\u65b0\u7684\u4f18\u5316\u89c4\u5219 CBO\uff08cost-based optimization\uff09\u6b63\u5728\u5f00\u53d1\u4e2d\u3002\u4f18\u5316\u4ee3\u7801\u5b58\u50a8\u5728\u4ed3\u5e93 nebula-graph \u7684\u76ee\u5f55 src/optimizer/ \u5185\u3002 RBO \u662f\u4e00\u4e2a\u81ea\u5e95\u5411\u4e0a\u7684\u63a2\u7d22\u8fc7\u7a0b\uff0c\u5373\u5bf9\u4e8e\u6bcf\u4e2a\u89c4\u5219\u800c\u8a00\uff0c\u90fd\u4f1a\u7531\u6267\u884c\u8ba1\u5212\u7684\u6839\u8282\u70b9\uff08\u793a\u4f8b\u662f Project \uff09\u5f00\u59cb\uff0c\u4e00\u6b65\u6b65\u5411\u4e0b\u63a2\u7d22\u5230\u6700\u5e95\u5c42\u7684\u8282\u70b9\uff0c\u5728\u8fc7\u7a0b\u4e2d\u67e5\u770b\u662f\u5426\u53ef\u4ee5\u5339\u914d\u89c4\u5219\u3002 \u5982\u4e0a\u56fe\u6240\u793a\uff0c\u63a2\u7d22\u5230\u8282\u70b9 Filter \u65f6\uff0c\u53d1\u73b0\u4f9d\u8d56\u7684\u8282\u70b9\u662f GetNeighbor \uff0c\u5339\u914d\u9884\u5148\u5b9a\u4e49\u7684\u89c4\u5219\uff0c\u5c31\u4f1a\u5c06 Filter \u878d\u5165\u5230 GetNeighbor \u4e2d\uff0c\u7136\u540e\u79fb\u9664\u8282\u70b9 Filter \uff0c\u7ee7\u7eed\u5339\u914d\u4e0b\u4e00\u4e2a\u89c4\u5219\u3002\u5728\u6267\u884c\u9636\u6bb5\uff0c\u5f53\u7b97\u5b50 GetNeighbor \u8c03\u7528 Storage \u670d\u52a1\u7684\u63a5\u53e3\u83b7\u53d6\u4e00\u4e2a\u70b9\u7684\u90bb\u8fb9\u65f6\uff0cStorage \u670d\u52a1\u5185\u90e8\u4f1a\u76f4\u63a5\u5c06\u4e0d\u7b26\u5408\u6761\u4ef6\u7684\u8fb9\u8fc7\u6ee4\u6389\uff0c\u8fd9\u6837\u53ef\u4ee5\u6781\u5927\u5730\u51cf\u5c11\u4f20\u8f93\u7684\u6570\u636e\u91cf\uff0c\u8be5\u4f18\u5316\u79f0\u4e3a\u8fc7\u6ee4\u4e0b\u63a8\u3002","title":"Planner"},{"location":"1.introduction/3.nebula-graph-architecture/3.graph-service/#executor","text":"Executor \u6a21\u5757\u5305\u542b\u8c03\u5ea6\u5668\uff08Scheduler\uff09\u548c\u6267\u884c\u5668\uff08Executor\uff09\uff0c\u901a\u8fc7\u8c03\u5ea6\u5668\u8c03\u5ea6\u6267\u884c\u8ba1\u5212\uff0c\u8ba9\u6267\u884c\u5668\u6839\u636e\u6267\u884c\u8ba1\u5212\u751f\u6210\u5bf9\u5e94\u7684\u6267\u884c\u7b97\u5b50\uff0c\u4ece\u53f6\u5b50\u8282\u70b9\u5f00\u59cb\u6267\u884c\uff0c\u76f4\u5230\u6839\u8282\u70b9\u7ed3\u675f\u3002\u5982\u4e0b\u56fe\u6240\u793a\u3002 \u6bcf\u4e00\u4e2a\u6267\u884c\u8ba1\u5212\u8282\u70b9\u90fd\u4e00\u4e00\u5bf9\u5e94\u4e00\u4e2a\u6267\u884c\u7b97\u5b50\uff0c\u8282\u70b9\u7684\u8f93\u5165\u8f93\u51fa\u5728\u4f18\u5316\u6267\u884c\u8ba1\u5212\u65f6\u5df2\u7ecf\u786e\u5b9a\uff0c\u6bcf\u4e2a\u7b97\u5b50\u53ea\u9700\u8981\u62ff\u5230\u8f93\u5165\u53d8\u91cf\u4e2d\u7684\u503c\u8fdb\u884c\u8ba1\u7b97\uff0c\u6700\u540e\u5c06\u8ba1\u7b97\u7ed3\u679c\u653e\u5165\u5bf9\u5e94\u7684\u8f93\u51fa\u53d8\u91cf\u4e2d\u5373\u53ef\uff0c\u6240\u4ee5\u53ea\u9700\u8981\u4ece\u8282\u70b9 Start \u4e00\u6b65\u6b65\u6267\u884c\uff0c\u6700\u540e\u4e00\u4e2a\u7b97\u5b50\u7684\u8f93\u51fa\u53d8\u91cf\u4f1a\u4f5c\u4e3a\u6700\u7ec8\u7ed3\u679c\u8fd4\u56de\u7ed9\u5ba2\u6237\u7aef\u3002","title":"Executor"},{"location":"1.introduction/3.nebula-graph-architecture/3.graph-service/#_1","text":"NebulaGraph\u7684\u4ee3\u7801\u5c42\u6b21\u7ed3\u6784\u5982\u4e0b\uff1a | --src | --graph | --context //\u6821\u9a8c\u671f\u548c\u6267\u884c\u671f\u4e0a\u4e0b\u6587 | --executor //\u6267\u884c\u7b97\u5b50 | --gc //\u5783\u573e\u6536\u96c6\u5668 | --optimizer //\u4f18\u5316\u89c4\u5219 | --planner //\u6267\u884c\u8ba1\u5212\u7ed3\u6784 | --scheduler //\u8c03\u5ea6\u5668 | --service //\u5bf9\u5916\u670d\u52a1\u7ba1\u7406 | --session //\u4f1a\u8bdd\u7ba1\u7406 | --stats //\u8fd0\u884c\u6307\u6807 | --util //\u57fa\u7840\u7ec4\u4ef6 | --validator //\u8bed\u53e5\u6821\u9a8c | --visitor //visitor\u8868\u8fbe\u5f0f","title":"\u4ee3\u7801\u7ed3\u6784"},{"location":"1.introduction/3.nebula-graph-architecture/3.graph-service/#_2","text":"\u7528\u6237\u4e5f\u53ef\u4ee5\u901a\u8fc7\u89c6\u9891\u5168\u65b9\u4f4d\u4e86\u89e3NebulaGraph\u7684\u67e5\u8be2\u5f15\u64ce\u3002 nMeetup\u00b7\u4e0a\u6d77 \uff5c\u5168\u9762\u89e3\u6790 Query Engine \uff0833 \u5206 30 \u79d2\uff09","title":"\u89c6\u9891"},{"location":"1.introduction/3.nebula-graph-architecture/4.storage-service/","text":"Storage \u670d\u52a1 \u00b6 NebulaGraph\u7684\u5b58\u50a8\u5305\u542b\u4e24\u4e2a\u90e8\u5206\uff0c\u4e00\u4e2a\u662f Meta \u76f8\u5173\u7684\u5b58\u50a8\uff0c\u79f0\u4e3a Meta \u670d\u52a1\uff0c\u5728\u524d\u6587\u5df2\u6709\u4ecb\u7ecd\u3002 \u53e6\u4e00\u4e2a\u662f\u5177\u4f53\u6570\u636e\u76f8\u5173\u7684\u5b58\u50a8\uff0c\u79f0\u4e3a Storage \u670d\u52a1\u3002\u5176\u8fd0\u884c\u5728 nebula-storaged \u8fdb\u7a0b\u4e2d\u3002\u672c\u6587\u4ec5\u4ecb\u7ecd Storage \u670d\u52a1\u7684\u67b6\u6784\u8bbe\u8ba1\u3002 \u4f18\u52bf \u00b6 \u9ad8\u6027\u80fd\uff08\u81ea\u7814 KVStore\uff09 \u6613\u6c34\u5e73\u6269\u5c55\uff08Shared-nothing \u67b6\u6784\uff0c\u4e0d\u4f9d\u8d56 NAS \u7b49\u786c\u4ef6\u8bbe\u5907\uff09 \u5f3a\u4e00\u81f4\u6027\uff08Raft\uff09 \u9ad8\u53ef\u7528\u6027\uff08Raft\uff09 \u652f\u6301\u5411\u7b2c\u4e09\u65b9\u7cfb\u7edf\u8fdb\u884c\u540c\u6b65\uff08\u4f8b\u5982 \u5168\u6587\u7d22\u5f15 \uff09 Storage \u670d\u52a1\u67b6\u6784 \u00b6 Storage \u670d\u52a1\u662f\u7531 nebula-storaged \u8fdb\u7a0b\u63d0\u4f9b\u7684\uff0c\u7528\u6237\u53ef\u4ee5\u6839\u636e\u573a\u666f\u914d\u7f6e nebula-storaged \u8fdb\u7a0b\u6570\u91cf\uff0c\u4f8b\u5982\u6d4b\u8bd5\u73af\u5883 1 \u4e2a\uff0c\u751f\u4ea7\u73af\u5883 3 \u4e2a\u3002 \u6240\u6709 nebula-storaged \u8fdb\u7a0b\u6784\u6210\u4e86\u57fa\u4e8e Raft \u534f\u8bae\u7684\u96c6\u7fa4\uff0c\u6574\u4e2a\u670d\u52a1\u67b6\u6784\u53ef\u4ee5\u5206\u4e3a\u4e09\u5c42\uff0c\u4ece\u4e0a\u5230\u4e0b\u4f9d\u6b21\u4e3a\uff1a Storage interface \u5c42 Storage \u670d\u52a1\u7684\u6700\u4e0a\u5c42\uff0c\u5b9a\u4e49\u4e86\u4e00\u7cfb\u5217\u548c\u56fe\u76f8\u5173\u7684 API\u3002API \u8bf7\u6c42\u4f1a\u5728\u8fd9\u4e00\u5c42\u88ab\u7ffb\u8bd1\u6210\u4e00\u7ec4\u9488\u5bf9 \u5206\u7247 \u7684 KV \u64cd\u4f5c\uff0c\u4f8b\u5982\uff1a getNeighbors \uff1a\u67e5\u8be2\u4e00\u6279\u70b9\u7684\u51fa\u8fb9\u6216\u8005\u5165\u8fb9\uff0c\u8fd4\u56de\u8fb9\u4ee5\u53ca\u5bf9\u5e94\u7684\u5c5e\u6027\uff0c\u5e76\u4e14\u652f\u6301\u6761\u4ef6\u8fc7\u6ee4\u3002 insert vertex/edge \uff1a\u63d2\u5165\u4e00\u6761\u70b9\u6216\u8005\u8fb9\u53ca\u5176\u5c5e\u6027\u3002 getProps \uff1a\u83b7\u53d6\u4e00\u4e2a\u70b9\u6216\u8005\u4e00\u6761\u8fb9\u7684\u5c5e\u6027\u3002 \u6b63\u662f\u8fd9\u4e00\u5c42\u7684\u5b58\u5728\uff0c\u4f7f\u5f97 Storage \u670d\u52a1\u53d8\u6210\u4e86\u771f\u6b63\u7684\u56fe\u5b58\u50a8\uff0c\u5426\u5219 Storage \u670d\u52a1\u53ea\u662f\u4e00\u4e2a KV \u5b58\u50a8\u670d\u52a1\u3002 Consensus \u5c42 Storage \u670d\u52a1\u7684\u4e2d\u95f4\u5c42\uff0c\u5b9e\u73b0\u4e86 Multi Group Raft \uff0c\u4fdd\u8bc1\u5f3a\u4e00\u81f4\u6027\u548c\u9ad8\u53ef\u7528\u6027\u3002 Store Engine \u5c42 Storage \u670d\u52a1\u7684\u6700\u5e95\u5c42\uff0c\u662f\u4e00\u4e2a\u5355\u673a\u7248\u672c\u5730\u5b58\u50a8\u5f15\u64ce\uff0c\u63d0\u4f9b\u5bf9\u672c\u5730\u6570\u636e\u7684 get \u3001 put \u3001 scan \u7b49\u64cd\u4f5c\u3002\u76f8\u5173\u63a5\u53e3\u5b58\u50a8\u5728 KVStore.h \u548c KVEngine.h \u6587\u4ef6\uff0c\u7528\u6237\u53ef\u4ee5\u6839\u636e\u4e1a\u52a1\u9700\u6c42\u5b9a\u5236\u5f00\u53d1\u76f8\u5173\u7684\u672c\u5730\u5b58\u50a8\u63d2\u4ef6\u3002 \u4e0b\u6587\u5c06\u57fa\u4e8e\u67b6\u6784\u4ecb\u7ecd Storage \u670d\u52a1\u7684\u90e8\u5206\u7279\u6027\u3002 Storage \u5199\u5165\u6d41\u7a0b \u00b6 KVStore \u00b6 NebulaGraph\u4f7f\u7528\u81ea\u884c\u5f00\u53d1\u7684 KVStore\uff0c\u800c\u4e0d\u662f\u5176\u4ed6\u5f00\u6e90 KVStore\uff0c\u539f\u56e0\u5982\u4e0b\uff1a \u9700\u8981\u9ad8\u6027\u80fd KVStore\u3002 \u9700\u8981\u4ee5\u5e93\u7684\u5f62\u5f0f\u63d0\u4f9b\uff0c\u5b9e\u73b0\u9ad8\u6548\u8ba1\u7b97\u4e0b\u63a8\u3002\u5bf9\u4e8e\u5f3a Schema \u7684NebulaGraph\u6765\u8bf4\uff0c\u8ba1\u7b97\u4e0b\u63a8\u65f6\u5982\u4f55\u63d0\u4f9b Schema \u4fe1\u606f\uff0c\u662f\u9ad8\u6548\u7684\u5173\u952e\u3002 \u9700\u8981\u6570\u636e\u5f3a\u4e00\u81f4\u6027\u3002 \u57fa\u4e8e\u4e0a\u8ff0\u539f\u56e0\uff0cNebulaGraph\u4f7f\u7528 RocksDB \u4f5c\u4e3a\u672c\u5730\u5b58\u50a8\u5f15\u64ce\uff0c\u5b9e\u73b0\u4e86\u81ea\u5df1\u7684 KVStore\uff0c\u6709\u5982\u4e0b\u4f18\u52bf\uff1a \u5bf9\u4e8e\u591a\u786c\u76d8\u673a\u5668\uff0cNebulaGraph\u53ea\u9700\u914d\u7f6e\u591a\u4e2a\u4e0d\u540c\u7684\u6570\u636e\u76ee\u5f55\u5373\u53ef\u5145\u5206\u5229\u7528\u591a\u786c\u76d8\u7684\u5e76\u53d1\u80fd\u529b\u3002 \u7531 Meta \u670d\u52a1\u7edf\u4e00\u7ba1\u7406\u6240\u6709 Storage \u670d\u52a1\uff0c\u53ef\u4ee5\u6839\u636e\u6240\u6709\u5206\u7247\u7684\u5206\u5e03\u60c5\u51b5\u548c\u72b6\u6001\uff0c\u624b\u52a8\u8fdb\u884c\u8d1f\u8f7d\u5747\u8861\u3002 Note \u4e0d\u652f\u6301\u81ea\u52a8\u8d1f\u8f7d\u5747\u8861\u662f\u4e3a\u4e86\u9632\u6b62\u81ea\u52a8\u6570\u636e\u642c\u8fc1\u5f71\u54cd\u7ebf\u4e0a\u4e1a\u52a1\u3002 \u5b9a\u5236\u9884\u5199\u65e5\u5fd7\uff08WAL\uff09\uff0c\u6bcf\u4e2a\u5206\u7247\u90fd\u6709\u81ea\u5df1\u7684 WAL\u3002 \u652f\u6301\u591a\u4e2a\u56fe\u7a7a\u95f4\uff0c\u4e0d\u540c\u56fe\u7a7a\u95f4\u76f8\u4e92\u9694\u79bb\uff0c\u6bcf\u4e2a\u56fe\u7a7a\u95f4\u53ef\u4ee5\u8bbe\u7f6e\u81ea\u5df1\u7684\u5206\u7247\u6570\u548c\u526f\u672c\u6570\u3002 \u6570\u636e\u5b58\u50a8\u683c\u5f0f \u00b6 \u56fe\u5b58\u50a8\u7684\u4e3b\u8981\u6570\u636e\u662f\u70b9\u548c\u8fb9\uff0cNebulaGraph\u5c06\u70b9\u548c\u8fb9\u7684\u4fe1\u606f\u5b58\u50a8\u4e3a key\uff0c\u540c\u65f6\u5c06\u70b9\u548c\u8fb9\u7684\u5c5e\u6027\u4fe1\u606f\u5b58\u50a8\u5728 value \u4e2d\uff0c\u4ee5\u4fbf\u66f4\u9ad8\u6548\u5730\u4f7f\u7528\u5c5e\u6027\u8fc7\u6ee4\u3002 \u70b9\u6570\u636e\u5b58\u50a8\u683c\u5f0f \u76f8\u6bd4NebulaGraph 2.x \u7248\u672c\uff0c3.x \u7248\u672c\u5728\u5f00\u542f \u65e0 Tag \u7684\u70b9\u914d\u7f6e\u540e\uff0c\u6bcf\u4e2a\u70b9\u591a\u4e86\u4e00\u4e2a\u4e0d\u542b TagID \u5b57\u6bb5\u5e76\u4e14\u65e0 value \u7684 key\u3002 \u5b57\u6bb5 \u8bf4\u660e Type key \u7c7b\u578b\u3002\u957f\u5ea6\u4e3a 1 \u5b57\u8282\u3002 PartID \u6570\u636e\u5206\u7247\u7f16\u53f7\u3002\u957f\u5ea6\u4e3a 3 \u5b57\u8282\u3002\u6b64\u5b57\u6bb5\u4e3b\u8981\u7528\u4e8e Storage \u8d1f\u8f7d\u5747\u8861\uff08balance\uff09\u65f6\u65b9\u4fbf\u6839\u636e\u524d\u7f00\u626b\u63cf\u6574\u4e2a\u5206\u7247\u7684\u6570\u636e\u3002 VertexID \u70b9 ID\u3002\u5f53\u70b9 ID \u7c7b\u578b\u4e3a int \u65f6\uff0c\u957f\u5ea6\u4e3a 8 \u5b57\u8282\uff1b\u5f53\u70b9 ID \u7c7b\u578b\u4e3a string \u65f6\uff0c\u957f\u5ea6\u4e3a\u521b\u5efa\u56fe\u7a7a\u95f4\u65f6\u6307\u5b9a\u7684 fixed_string \u957f\u5ea6\u3002 TagID \u70b9\u5173\u8054\u7684 Tag ID\u3002\u957f\u5ea6\u4e3a 4 \u5b57\u8282\u3002 SerializedValue \u5e8f\u5217\u5316\u7684 value\uff0c\u7528\u4e8e\u4fdd\u5b58\u70b9\u7684\u5c5e\u6027\u4fe1\u606f\u3002 \u8fb9\u6570\u636e\u5b58\u50a8\u683c\u5f0f \u5b57\u6bb5 \u8bf4\u660e Type key \u7c7b\u578b\u3002\u957f\u5ea6\u4e3a 1 \u5b57\u8282\u3002 PartID \u6570\u636e\u5206\u7247\u7f16\u53f7\u3002\u957f\u5ea6\u4e3a 3 \u5b57\u8282\u3002\u6b64\u5b57\u6bb5\u4e3b\u8981\u7528\u4e8e Storage \u8d1f\u8f7d\u5747\u8861\uff08balance\uff09\u65f6\u65b9\u4fbf\u6839\u636e\u524d\u7f00\u626b\u63cf\u6574\u4e2a\u5206\u7247\u7684\u6570\u636e\u3002 VertexID \u70b9 ID\u3002\u524d\u4e00\u4e2a VertexID \u5728\u51fa\u8fb9\u91cc\u8868\u793a\u8d77\u59cb\u70b9 ID\uff0c\u5728\u5165\u8fb9\u91cc\u8868\u793a\u76ee\u7684\u70b9 ID\uff1b\u540e\u4e00\u4e2a VertexID \u51fa\u8fb9\u91cc\u8868\u793a\u76ee\u7684\u70b9 ID\uff0c\u5728\u5165\u8fb9\u91cc\u8868\u793a\u8d77\u59cb\u70b9 ID\u3002 Edge type \u8fb9\u7684\u7c7b\u578b\u3002\u5927\u4e8e 0 \u8868\u793a\u51fa\u8fb9\uff0c\u5c0f\u4e8e 0 \u8868\u793a\u5165\u8fb9\u3002\u957f\u5ea6\u4e3a 4 \u5b57\u8282\u3002 Rank \u7528\u6765\u5904\u7406\u4e24\u70b9\u4e4b\u95f4\u6709\u591a\u4e2a\u540c\u7c7b\u578b\u8fb9\u7684\u60c5\u51b5\u3002\u7528\u6237\u53ef\u4ee5\u6839\u636e\u81ea\u5df1\u7684\u9700\u6c42\u8fdb\u884c\u8bbe\u7f6e\uff0c\u4f8b\u5982\u5b58\u653e\u4ea4\u6613\u65f6\u95f4\u3001\u4ea4\u6613\u6d41\u6c34\u53f7\u7b49\u3002\u957f\u5ea6\u4e3a 8 \u5b57\u8282\uff0c PlaceHolder \u9884\u7559\u5b57\u6bb5\u3002\u957f\u5ea6\u4e3a 1 \u5b57\u8282\u3002 SerializedValue \u5e8f\u5217\u5316\u7684 value\uff0c\u7528\u4e8e\u4fdd\u5b58\u8fb9\u7684\u5c5e\u6027\u4fe1\u606f\u3002 \u5c5e\u6027\u8bf4\u660e \u00b6 NebulaGraph\u4f7f\u7528\u5f3a\u7c7b\u578b Schema\u3002 \u5bf9\u4e8e\u70b9\u6216\u8fb9\u7684\u5c5e\u6027\u4fe1\u606f\uff0cNebulaGraph\u4f1a\u5c06\u5c5e\u6027\u4fe1\u606f\u7f16\u7801\u540e\u6309\u987a\u5e8f\u5b58\u50a8\u3002\u7531\u4e8e\u5b9a\u957f\u5c5e\u6027\u7684\u957f\u5ea6\u662f\u56fa\u5b9a\u7684\uff0c\u67e5\u8be2\u65f6\u53ef\u4ee5\u6839\u636e\u504f\u79fb\u91cf\u5feb\u901f\u67e5\u8be2\u3002\u5728\u89e3\u7801\u4e4b\u524d\uff0c\u9700\u8981\u5148\u4ece Meta \u670d\u52a1\u4e2d\u67e5\u8be2\u5177\u4f53\u7684 Schema \u4fe1\u606f\uff08\u5e76\u7f13\u5b58\uff09\u3002\u540c\u65f6\u4e3a\u4e86\u652f\u6301\u5728\u7ebf\u53d8\u66f4 Schema\uff0c\u5728\u7f16\u7801\u5c5e\u6027\u65f6\uff0c\u4f1a\u52a0\u5165\u5bf9\u5e94\u7684 Schema \u7248\u672c\u4fe1\u606f\u3002 \u6570\u636e\u5206\u7247 \u00b6 \u7531\u4e8e\u8d85\u5927\u89c4\u6a21\u5173\u7cfb\u7f51\u7edc\u7684\u8282\u70b9\u6570\u91cf\u9ad8\u8fbe\u767e\u4ebf\u5230\u5343\u4ebf\uff0c\u800c\u8fb9\u7684\u6570\u91cf\u66f4\u4f1a\u9ad8\u8fbe\u4e07\u4ebf\uff0c\u5373\u4f7f\u4ec5\u5b58\u50a8\u70b9\u548c\u8fb9\u4e24\u8005\u4e5f\u8fdc\u5927\u4e8e\u4e00\u822c\u670d\u52a1\u5668\u7684\u5bb9\u91cf\u3002\u56e0\u6b64\u9700\u8981\u6709\u65b9\u6cd5\u5c06\u56fe\u5143\u7d20\u5207\u5272\uff0c\u5e76\u5b58\u50a8\u5728\u4e0d\u540c\u903b\u8f91\u5206\u7247\uff08Partition\uff09\u4e0a\u3002NebulaGraph\u91c7\u7528\u8fb9\u5206\u5272\u7684\u65b9\u5f0f\u3002 \u5207\u8fb9\u4e0e\u5b58\u50a8\u653e\u5927 \u00b6 NebulaGraph\u4e2d\u903b\u8f91\u4e0a\u7684\u4e00\u6761\u8fb9\u5bf9\u5e94\u7740\u786c\u76d8\u4e0a\u7684\u4e24\u4e2a\u952e\u503c\u5bf9\uff08key-value pair\uff09\uff0c\u5728\u8fb9\u7684\u6570\u91cf\u548c\u5c5e\u6027\u8f83\u591a\u65f6\uff0c\u5b58\u50a8\u653e\u5927\u73b0\u8c61\u8f83\u660e\u663e\u3002\u8fb9\u7684\u5b58\u50a8\u65b9\u5f0f\u5982\u4e0b\u56fe\u6240\u793a\u3002 \u4e0a\u56fe\u4ee5\u6700\u7b80\u5355\u7684\u4e24\u4e2a\u70b9\u548c\u4e00\u6761\u8fb9\u4e3a\u4f8b\uff0c\u8d77\u70b9 SrcVertex \u901a\u8fc7\u8fb9 EdgeA \u8fde\u63a5\u76ee\u7684\u70b9 DstVertex\uff0c\u5f62\u6210\u8def\u5f84 (SrcVertex)-[EdgeA]->(DstVertex) \u3002\u8fd9\u4e24\u4e2a\u70b9\u548c\u4e00\u6761\u8fb9\u4f1a\u4ee5 6 \u4e2a\u952e\u503c\u5bf9\u7684\u5f62\u5f0f\u4fdd\u5b58\u5728\u5b58\u50a8\u5c42\u7684\u4e24\u4e2a\u4e0d\u540c\u5206\u7247\uff0c\u5373 Partition x \u548c Partition y \u4e2d\uff0c\u8be6\u7ec6\u8bf4\u660e\u5982\u4e0b\uff1a \u70b9 SrcVertex \u7684\u952e\u503c\u4fdd\u5b58\u5728 Partition x \u4e2d\u3002 \u8fb9 EdgeA \u7684\u7b2c\u4e00\u4efd\u952e\u503c\uff0c\u8fd9\u91cc\u7528 EdgeA_Out \u8868\u793a\uff0c\u4e0e SrcVertex \u4e00\u540c\u4fdd\u5b58\u5728 Partition x \u4e2d\u3002key \u7684\u5b57\u6bb5\u6709 Type\u3001PartID\uff08x\uff09\u3001VID\uff08Src\uff0c\u5373\u70b9 SrcVertex \u7684 ID\uff09\u3001EdgeType\uff08\u7b26\u53f7\u4e3a\u6b63\uff0c\u4ee3\u8868\u8fb9\u65b9\u5411\u4e3a\u51fa\uff09\u3001Rank\uff080\uff09\u3001VID\uff08Dst\uff0c\u5373\u70b9 DstVertex \u7684 ID\uff09\u548c PlaceHolder\u3002SerializedValue \u5373 Value\uff0c\u662f\u5e8f\u5217\u5316\u7684\u8fb9\u5c5e\u6027\u3002 \u70b9 DstVertex \u7684\u952e\u503c\u4fdd\u5b58\u5728 Partition y \u4e2d\u3002 \u8fb9 EdgeA \u7684\u7b2c\u4e8c\u4efd\u952e\u503c\uff0c\u8fd9\u91cc\u7528 EdgeA_In \u8868\u793a\uff0c\u4e0e DstVertex \u4e00\u540c\u4fdd\u5b58\u5728 Partition y \u4e2d\u3002key \u7684\u5b57\u6bb5\u6709 Type\u3001PartID\uff08y\uff09\u3001VID\uff08Dst\uff0c\u5373\u70b9 DstVertex \u7684 ID\uff09\u3001EdgeType\uff08\u7b26\u53f7\u4e3a\u8d1f\uff0c\u4ee3\u8868\u8fb9\u65b9\u5411\u4e3a\u5165\uff09\u3001Rank\uff080\uff09\u3001VID\uff08Src\uff0c\u5373\u70b9 SrcVertex \u7684 ID\uff09\u548c PlaceHolder\u3002SerializedValue \u5373 Value\uff0c\u662f\u5e8f\u5217\u5316\u7684\u8fb9\u5c5e\u6027\uff0c\u4e0e EdgeA_Out \u4e2d\u8be5\u90e8\u5206\u7684\u5b8c\u5168\u76f8\u540c\u3002 EdgeA_Out \u548c EdgeA_In \u4ee5\u65b9\u5411\u76f8\u53cd\u7684\u4e24\u6761\u8fb9\u7684\u5f62\u5f0f\u5b58\u5728\u4e8e\u5b58\u50a8\u5c42\uff0c\u4e8c\u8005\u7ec4\u5408\u6210\u4e86\u903b\u8f91\u4e0a\u7684\u4e00\u6761\u8fb9 EdgeA\u3002EdgeA_Out \u7528\u4e8e\u4ece\u8d77\u70b9\u5f00\u59cb\u7684\u904d\u5386\u8bf7\u6c42\uff0c\u4f8b\u5982 (a)-[]->() \uff1bEdgeA_In \u7528\u4e8e\u6307\u5411\u76ee\u7684\u70b9\u7684\u904d\u5386\u8bf7\u6c42\uff0c\u6216\u8005\u8bf4\u4ece\u76ee\u7684\u70b9\u5f00\u59cb\uff0c\u6cbf\u7740\u8fb9\u7684\u65b9\u5411\u9006\u5e8f\u8fdb\u884c\u7684\u904d\u5386\u8bf7\u6c42\uff0c\u4f8b\u5982\u4f8b\u5982 ()-[]->(a) \u3002 \u5982 EdgeA_Out \u548c EdgeA_In \u4e00\u6837\uff0cNebulaGraph\u5197\u4f59\u4e86\u5b58\u50a8\u6bcf\u6761\u8fb9\u7684\u4fe1\u606f\uff0c\u5bfc\u81f4\u5b58\u50a8\u8fb9\u6240\u9700\u7684\u5b9e\u9645\u7a7a\u95f4\u7ffb\u500d\u3002\u56e0\u4e3a\u8fb9\u5bf9\u5e94\u7684 key \u5360\u7528\u7684\u786c\u76d8\u7a7a\u95f4\u8f83\u5c0f\uff0c\u4f46 value \u5360\u7528\u7684\u7a7a\u95f4\u4e0e\u5c5e\u6027\u503c\u7684\u957f\u5ea6\u548c\u6570\u91cf\u6210\u6b63\u6bd4\uff0c\u6240\u4ee5\uff0c\u5f53\u8fb9\u7684\u5c5e\u6027\u503c\u8f83\u5927\u6216\u6570\u91cf\u8f83\u591a\u65f6\u5019\uff0c\u786c\u76d8\u7a7a\u95f4\u5360\u7528\u91cf\u4f1a\u6bd4\u8f83\u5927\u3002 \u5206\u7247\u7b97\u6cd5 \u00b6 \u5206\u7247\u7b56\u7565\u91c7\u7528 \u9759\u6001 Hash \u7684\u65b9\u5f0f\uff0c\u5373\u5bf9\u70b9 VID \u8fdb\u884c\u53d6\u6a21\u64cd\u4f5c\uff0c\u540c\u4e00\u4e2a\u70b9\u7684\u6240\u6709 Tag\u3001\u51fa\u8fb9\u548c\u5165\u8fb9\u4fe1\u606f\u90fd\u4f1a\u5b58\u50a8\u5230\u540c\u4e00\u4e2a\u5206\u7247\uff0c\u8fd9\u79cd\u65b9\u5f0f\u6781\u5927\u5730\u63d0\u5347\u4e86\u67e5\u8be2\u6548\u7387\u3002 Note \u521b\u5efa\u56fe\u7a7a\u95f4\u65f6\u9700\u6307\u5b9a\u5206\u7247\u6570\u91cf\uff0c\u5206\u7247\u6570\u91cf\u8bbe\u7f6e\u540e\u65e0\u6cd5\u4fee\u6539\uff0c\u5efa\u8bae\u8bbe\u7f6e\u65f6\u63d0\u524d\u6ee1\u8db3\u4e1a\u52a1\u5c06\u6765\u7684\u6269\u5bb9\u9700\u6c42\u3002 \u591a\u673a\u96c6\u7fa4\u90e8\u7f72\u65f6\uff0c\u5206\u7247\u5206\u5e03\u5728\u96c6\u7fa4\u5185\u7684\u4e0d\u540c\u673a\u5668\u4e0a\u3002\u5206\u7247\u6570\u91cf\u5728 CREATE SPACE \u8bed\u53e5\u4e2d\u6307\u5b9a\uff0c\u6b64\u540e\u4e0d\u53ef\u66f4\u6539\u3002 \u5982\u679c\u9700\u8981\u5c06\u67d0\u4e9b\u70b9\u653e\u7f6e\u5728\u76f8\u540c\u7684\u5206\u7247\uff08\u4f8b\u5982\u5728\u4e00\u53f0\u673a\u5668\u4e0a\uff09\uff0c\u53ef\u4ee5\u53c2\u8003 \u516c\u5f0f\u6216\u4ee3\u7801 \u3002 \u4e0b\u6587\u7528\u7b80\u5355\u4ee3\u7801\u8bf4\u660e VID \u548c\u5206\u7247\u7684\u5173\u7cfb\u3002 // \u5982\u679c ID \u957f\u5ea6\u4e3a 8\uff0c\u4e3a\u4e86\u517c\u5bb9 1.0\uff0c\u5c06\u6570\u636e\u7c7b\u578b\u89c6\u4e3a int64\u3002 uint64_t vid = 0; if (id.size() == 8) { memcpy(static_cast<void*>(&vid), id.data(), 8); } else { MurmurHash2 hash; vid = hash(id.data()); } PartitionID pId = vid % numParts + 1; \u7b80\u5355\u6765\u8bf4\uff0c\u4e0a\u8ff0\u4ee3\u7801\u662f\u5c06\u4e00\u4e2a\u56fa\u5b9a\u7684\u5b57\u7b26\u4e32\u8fdb\u884c\u54c8\u5e0c\u8ba1\u7b97\uff0c\u8f6c\u6362\u6210\u6570\u636e\u7c7b\u578b\u4e3a int64 \u7684\u6570\u5b57\uff08int64 \u6570\u5b57\u7684\u54c8\u5e0c\u8ba1\u7b97\u7ed3\u679c\u662f\u6570\u5b57\u672c\u8eab\uff09\uff0c\u5c06\u6570\u5b57\u53d6\u6a21\uff0c\u7136\u540e\u52a0 1\uff0c\u5373\uff1a pId = vid % numParts + 1 ; \u793a\u4f8b\u7684\u90e8\u5206\u53c2\u6570\u8bf4\u660e\u5982\u4e0b\u3002 \u53c2\u6570 \u8bf4\u660e % \u53d6\u6a21\u8fd0\u7b97\u3002 numParts VID \u6240\u5728\u56fe\u7a7a\u95f4\u7684\u5206\u7247\u6570\uff0c\u5373 CREATE SPACE \u8bed\u53e5\u4e2d\u7684 partition_num \u503c\u3002 pId VID \u6240\u5728\u5206\u7247\u7684 ID\u3002 \u4f8b\u5982\u6709 100 \u4e2a\u5206\u7247\uff0c VID \u4e3a 1\u3001101 \u548c 1001 \u7684\u4e09\u4e2a\u70b9\u5c06\u4f1a\u5b58\u50a8\u5728\u76f8\u540c\u7684\u5206\u7247\u3002\u5206\u7247 ID \u548c\u673a\u5668\u5730\u5740\u4e4b\u95f4\u7684\u6620\u5c04\u662f\u968f\u673a\u7684\uff0c\u6240\u4ee5\u4e0d\u80fd\u5047\u5b9a\u4efb\u4f55\u4e24\u4e2a\u5206\u7247\u4f4d\u4e8e\u540c\u4e00\u53f0\u673a\u5668\u4e0a\u3002 Raft \u00b6 \u5173\u4e8e Raft \u7684\u7b80\u5355\u4ecb\u7ecd \u00b6 \u5206\u5e03\u5f0f\u7cfb\u7edf\u4e2d\uff0c\u540c\u4e00\u4efd\u6570\u636e\u901a\u5e38\u4f1a\u6709\u591a\u4e2a\u526f\u672c\uff0c\u8fd9\u6837\u5373\u4f7f\u5c11\u6570\u526f\u672c\u53d1\u751f\u6545\u969c\uff0c\u7cfb\u7edf\u4ecd\u53ef\u6b63\u5e38\u8fd0\u884c\u3002\u8fd9\u5c31\u9700\u8981\u4e00\u5b9a\u7684\u6280\u672f\u624b\u6bb5\u6765\u4fdd\u8bc1\u591a\u4e2a\u526f\u672c\u4e4b\u95f4\u7684\u4e00\u81f4\u6027\u3002 \u57fa\u672c\u539f\u7406\uff1aRaft \u5c31\u662f\u4e00\u79cd\u7528\u4e8e\u4fdd\u8bc1\u591a\u526f\u672c\u4e00\u81f4\u6027\u7684\u534f\u8bae\u3002Raft \u91c7\u7528\u591a\u4e2a\u526f\u672c\u4e4b\u95f4\u7ade\u9009\u7684\u65b9\u5f0f\uff0c\u8d62\u5f97\u201d\u8d85\u8fc7\u534a\u6570\u201d\u526f\u672c\u6295\u7968\u7684\uff08\u5019\u9009\uff09\u526f\u672c\u6210\u4e3a Leader\uff0c\u7531 Leader \u4ee3\u8868\u6240\u6709\u526f\u672c\u5bf9\u5916\u63d0\u4f9b\u670d\u52a1\uff1b\u5176\u4ed6 Follower \u4f5c\u4e3a\u5907\u4efd\u3002\u5f53\u8be5 Leader \u51fa\u73b0\u5f02\u5e38\u540e\uff08\u901a\u4fe1\u6545\u969c\u3001\u8fd0\u7ef4\u547d\u4ee4\u7b49\uff09\uff0c\u5176\u4f59 Follower \u8fdb\u884c\u65b0\u4e00\u8f6e\u9009\u4e3e\uff0c\u6295\u7968\u51fa\u4e00\u4e2a\u65b0\u7684 Leader\u3002Leader \u548c Follower \u4e4b\u95f4\u901a\u8fc7\u5fc3\u8df3\u7684\u65b9\u5f0f\u76f8\u4e92\u63a2\u6d4b\u662f\u5426\u5b58\u6d3b\uff0c\u5e76\u4ee5 Raft-wal \u7684\u65b9\u5f0f\u5199\u5165\u786c\u76d8\uff0c\u8d85\u8fc7\u591a\u4e2a\u5fc3\u8df3\u4ecd\u65e0\u54cd\u5e94\u7684\u526f\u672c\u4f1a\u88ab\u8ba4\u4e3a\u53d1\u751f\u6545\u969c\u3002 Note \u56e0\u4e3a Raft-wal \u9700\u8981\u5b9a\u671f\u5199\u786c\u76d8\uff0c\u5982\u679c\u786c\u76d8\u5199\u80fd\u529b\u74f6\u9888\u4f1a\u5bfc\u81f4 Raft \u5fc3\u8df3\u5931\u8d25\uff0c\u5bfc\u81f4\u91cd\u65b0\u53d1\u8d77\u9009\u4e3e\u3002\u786c\u76d8 IO \u4e25\u91cd\u5835\u585e\u60c5\u51b5\u4e0b\uff0c\u4f1a\u5bfc\u81f4\u957f\u671f\u65e0\u6cd5\u9009\u4e3e\u51fa Leader\u3002 \u8bfb\u5199\u6d41\u7a0b\uff1a\u5bf9\u4e8e\u5ba2\u6237\u7aef\u7684\u6bcf\u4e2a\u5199\u5165\u8bf7\u6c42\uff0cLeader \u4f1a\u5c06\u8be5\u5199\u5165\u4ee5 Raft-wal \u7684\u65b9\u5f0f\uff0c\u5c06\u8be5\u6761\u540c\u6b65\u7ed9\u5176\u4ed6 Follower\uff0c\u5e76\u53ea\u6709\u5728\u201c\u8d85\u8fc7\u534a\u6570\u201d\u526f\u672c\u90fd\u6210\u529f\u6536\u5230 Raft-wal \u540e\uff0c\u624d\u4f1a\u8fd4\u56de\u5ba2\u6237\u7aef\u8be5\u5199\u5165\u6210\u529f\u3002\u5bf9\u4e8e\u5ba2\u6237\u7aef\u7684\u6bcf\u4e2a\u8bfb\u53d6\u8bf7\u6c42\uff0c\u90fd\u76f4\u63a5\u8bbf\u95ee Leader\uff0c\u800c Follower \u5e76\u4e0d\u53c2\u4e0e\u8bfb\u8bf7\u6c42\u670d\u52a1\u3002 \u6545\u969c\u6d41\u7a0b\uff1a\u573a\u666f 1\uff1a\u8003\u8651\u4e00\u4e2a\u914d\u7f6e\u4e3a\u5355\u526f\u672c\uff08\u56fe\u7a7a\u95f4\uff09\u7684\u96c6\u7fa4\uff1b\u5982\u679c\u7cfb\u7edf\u53ea\u6709\u4e00\u4e2a\u526f\u672c\u65f6\uff0c\u5176\u81ea\u8eab\u5c31\u662f Leader\uff1b\u5982\u679c\u5176\u53d1\u751f\u6545\u969c\uff0c\u7cfb\u7edf\u5c06\u5b8c\u5168\u4e0d\u53ef\u7528\u3002\u573a\u666f 2\uff1a\u8003\u8651\u4e00\u4e2a\u914d\u7f6e\u4e3a 3 \u526f\u672c\uff08\u56fe\u7a7a\u95f4\uff09\u7684\u96c6\u7fa4\uff1b\u5982\u679c\u7cfb\u7edf\u6709 3 \u4e2a\u526f\u672c\uff0c\u5176\u4e2d\u4e00\u4e2a\u526f\u672c\u662f Leader\uff0c\u5176\u4ed6 2 \u4e2a\u526f\u672c\u662f Follower\uff1b\u5373\u4f7f\u539f Leader \u53d1\u751f\u6545\u969c\uff0c\u5269\u4e0b\u4e24\u4e2a\u526f\u672c\u4ecd\u53ef\u6295\u7968\u51fa\u4e00\u4e2a\u65b0\u7684 Leader\uff08\u4ee5\u53ca\u4e00\u4e2a Follower\uff09\uff0c\u6b64\u65f6\u7cfb\u7edf\u4ecd\u53ef\u4f7f\u7528\uff1b\u4f46\u662f\u5f53\u8fd9 2 \u4e2a\u526f\u672c\u4e2d\u4efb\u4e00\u8005\u518d\u6b21\u53d1\u751f\u6545\u969c\u540e\uff0c\u7531\u4e8e\u6295\u7968\u4eba\u6570\u4e0d\u8db3\uff0c\u7cfb\u7edf\u5c06\u5b8c\u5168\u4e0d\u53ef\u7528\u3002 Note Raft \u591a\u526f\u672c\u7684\u65b9\u5f0f\u4e0e HDFS \u591a\u526f\u672c\u7684\u65b9\u5f0f\u662f\u4e0d\u540c\u7684\uff0cRaft \u57fa\u4e8e\u201c\u591a\u6570\u6d3e\u201d\u6295\u7968\uff0c\u56e0\u6b64\u526f\u672c\u6570\u91cf\u4e0d\u80fd\u662f\u5076\u6570\u3002 Multi Group Raft \u00b6 \u7531\u4e8e Storage \u670d\u52a1\u9700\u8981\u652f\u6301\u96c6\u7fa4\u5206\u5e03\u5f0f\u67b6\u6784\uff0c\u6240\u4ee5\u57fa\u4e8e Raft \u534f\u8bae\u5b9e\u73b0\u4e86 Multi Group Raft\uff0c\u5373\u6bcf\u4e2a\u5206\u7247\u7684\u6240\u6709\u526f\u672c\u5171\u540c\u7ec4\u6210\u4e00\u4e2a Raft group\uff0c\u5176\u4e2d\u4e00\u4e2a\u526f\u672c\u662f leader\uff0c\u5176\u4ed6\u526f\u672c\u662f follower\uff0c\u4ece\u800c\u5b9e\u73b0\u5f3a\u4e00\u81f4\u6027\u548c\u9ad8\u53ef\u7528\u6027\u3002Raft \u7684\u90e8\u5206\u5b9e\u73b0\u5982\u4e0b\u3002 \u7531\u4e8e Raft \u65e5\u5fd7\u4e0d\u5141\u8bb8\u7a7a\u6d1e\uff0cNebulaGraph\u4f7f\u7528 Multi Group Raft \u7f13\u89e3\u6b64\u95ee\u9898\uff0c\u5206\u7247\u6570\u91cf\u8f83\u591a\u65f6\uff0c\u53ef\u4ee5\u6709\u6548\u63d0\u9ad8NebulaGraph\u7684\u6027\u80fd\u3002\u4f46\u662f\u5206\u7247\u6570\u91cf\u592a\u591a\u4f1a\u589e\u52a0\u5f00\u9500\uff0c\u4f8b\u5982 Raft group \u5185\u90e8\u5b58\u50a8\u7684\u72b6\u6001\u4fe1\u606f\u3001WAL \u6587\u4ef6\uff0c\u6216\u8005\u8d1f\u8f7d\u8fc7\u4f4e\u65f6\u7684\u6279\u91cf\u64cd\u4f5c\u3002 \u5b9e\u73b0 Multi Group Raft \u6709 2 \u4e2a\u5173\u952e\u70b9\uff1a \u5171\u4eab Transport \u5c42 \u6bcf\u4e00\u4e2a Raft group \u5185\u90e8\u90fd\u9700\u8981\u5411\u5bf9\u5e94\u7684 peer \u53d1\u9001\u6d88\u606f\uff0c\u5982\u679c\u4e0d\u80fd\u5171\u4eab Transport \u5c42\uff0c\u4f1a\u5bfc\u81f4\u8fde\u63a5\u7684\u5f00\u9500\u5de8\u5927\u3002 \u5171\u4eab\u7ebf\u7a0b\u6c60 \u5982\u679c\u4e0d\u5171\u4eab\u4e00\u7ec4\u7ebf\u7a0b\u6c60\uff0c\u4f1a\u9020\u6210\u7cfb\u7edf\u7684\u7ebf\u7a0b\u6570\u8fc7\u591a\uff0c\u5bfc\u81f4\u5927\u91cf\u7684\u4e0a\u4e0b\u6587\u5207\u6362\u5f00\u9500\u3002 \u6279\u91cf\uff08Batch\uff09\u64cd\u4f5c \u00b6 NebulaGraph\u4e2d\uff0c\u6bcf\u4e2a\u5206\u7247\u90fd\u662f\u4e32\u884c\u5199\u65e5\u5fd7\uff0c\u4e3a\u4e86\u63d0\u9ad8\u541e\u5410\uff0c\u5199\u65e5\u5fd7\u65f6\u9700\u8981\u505a\u6279\u91cf\u64cd\u4f5c\uff0c\u4f46\u662f\u7531\u4e8eNebulaGraph\u5229\u7528 WAL \u5b9e\u73b0\u4e00\u4e9b\u7279\u6b8a\u529f\u80fd\uff0c\u9700\u8981\u5bf9\u6279\u91cf\u64cd\u4f5c\u8fdb\u884c\u5206\u7ec4\uff0c\u8fd9\u662fNebulaGraph\u7684\u7279\u8272\u3002 \u4f8b\u5982\u65e0\u9501 CAS \u64cd\u4f5c\u9700\u8981\u4e4b\u524d\u7684 WAL \u5168\u90e8\u63d0\u4ea4\u540e\u624d\u80fd\u6267\u884c\uff0c\u5982\u679c\u4e00\u4e2a\u6279\u91cf\u5199\u5165\u7684 WAL \u91cc\u5305\u542b\u4e86 CAS \u7c7b\u578b\u7684 WAL\uff0c\u5c31\u9700\u8981\u62c6\u5206\u6210\u7c92\u5ea6\u66f4\u5c0f\u7684\u51e0\u4e2a\u7ec4\uff0c\u8fd8\u8981\u4fdd\u8bc1\u8fd9\u51e0\u7ec4 WAL \u4e32\u884c\u63d0\u4ea4\u3002 leader \u5207\u6362\uff08Transfer Leadership\uff09 \u00b6 leader \u5207\u6362\u5bf9\u4e8e\u8d1f\u8f7d\u5747\u8861\u81f3\u5173\u91cd\u8981\uff0c\u5f53\u628a\u67d0\u4e2a\u5206\u7247\u4ece\u4e00\u53f0\u673a\u5668\u8fc1\u79fb\u5230\u53e6\u4e00\u53f0\u673a\u5668\u65f6\uff0c\u9996\u5148\u4f1a\u68c0\u67e5\u5206\u7247\u662f\u4e0d\u662f leader\uff0c\u5982\u679c\u662f\u7684\u8bdd\uff0c\u9700\u8981\u5148\u5207\u6362 leader\uff0c\u6570\u636e\u8fc1\u79fb\u5b8c\u6bd5\u4e4b\u540e\uff0c\u901a\u5e38\u8fd8\u8981\u91cd\u65b0 \u5747\u8861 leader \u5206\u5e03 \u3002 \u5bf9\u4e8e leader \u6765\u8bf4\uff0c\u63d0\u4ea4 leader \u5207\u6362\u547d\u4ee4\u65f6\uff0c\u5c31\u4f1a\u653e\u5f03\u81ea\u5df1\u7684 leader \u8eab\u4efd\uff0c\u5f53 follower \u6536\u5230 leader \u5207\u6362\u547d\u4ee4\u65f6\uff0c\u5c31\u4f1a\u53d1\u8d77\u9009\u4e3e\u3002 \u6210\u5458\u53d8\u66f4 \u00b6 \u4e3a\u4e86\u907f\u514d\u8111\u88c2\uff0c\u5f53\u4e00\u4e2a Raft group \u7684\u6210\u5458\u53d1\u751f\u53d8\u5316\u65f6\uff0c\u9700\u8981\u6709\u4e00\u4e2a\u4e2d\u95f4\u72b6\u6001\uff0c\u8be5\u72b6\u6001\u4e0b\u65b0\u65e7 group \u7684\u591a\u6570\u6d3e\u9700\u8981\u6709\u91cd\u53e0\u7684\u90e8\u5206\uff0c\u8fd9\u6837\u5c31\u9632\u6b62\u4e86\u65b0\u7684 group \u6216\u65e7\u7684 group \u5355\u65b9\u9762\u505a\u51fa\u51b3\u5b9a\u3002\u4e3a\u4e86\u66f4\u52a0\u7b80\u5316\uff0cDiego Ongaro \u5728\u81ea\u5df1\u7684\u535a\u58eb\u8bba\u6587\u4e2d\u63d0\u51fa\u6bcf\u6b21\u53ea\u589e\u51cf\u4e00\u4e2a peer \u7684\u65b9\u5f0f\uff0c\u4ee5\u4fdd\u8bc1\u65b0\u65e7 group \u7684\u591a\u6570\u6d3e\u603b\u662f\u6709\u91cd\u53e0\u3002NebulaGraph\u4e5f\u91c7\u7528\u4e86\u8fd9\u4e2a\u65b9\u5f0f\uff0c\u53ea\u4e0d\u8fc7\u589e\u52a0\u6210\u5458\u548c\u79fb\u9664\u6210\u5458\u7684\u5b9e\u73b0\u6709\u6240\u533a\u522b\u3002\u5177\u4f53\u5b9e\u73b0\u65b9\u5f0f\u8bf7\u53c2\u89c1 Raft Part class \u91cc addPeer/removePeer \u7684\u5b9e\u73b0\u3002 \u4e0e HDFS \u7684\u533a\u522b \u00b6 Storage \u670d\u52a1\u57fa\u4e8e Raft \u534f\u8bae\u5b9e\u73b0\u7684\u5206\u5e03\u5f0f\u67b6\u6784\uff0c\u4e0e HDFS \u7684\u5206\u5e03\u5f0f\u67b6\u6784\u6709\u4e00\u4e9b\u533a\u522b\u3002\u4f8b\u5982\uff1a Storage \u670d\u52a1\u672c\u8eab\u901a\u8fc7 Raft \u534f\u8bae\u4fdd\u8bc1\u4e00\u81f4\u6027\uff0c\u526f\u672c\u6570\u91cf\u901a\u5e38\u4e3a\u5947\u6570\uff0c\u65b9\u4fbf\u8fdb\u884c\u9009\u4e3e leader\uff0c\u800c HDFS \u5b58\u50a8\u5177\u4f53\u6570\u636e\u7684 DataNode \u9700\u8981\u901a\u8fc7 NameNode \u4fdd\u8bc1\u4e00\u81f4\u6027\uff0c\u5bf9\u526f\u672c\u6570\u91cf\u6ca1\u6709\u8981\u6c42\u3002 Storage \u670d\u52a1\u53ea\u6709 leader \u526f\u672c\u63d0\u4f9b\u8bfb\u5199\u670d\u52a1\uff0c\u800c HDFS \u7684\u6240\u6709\u526f\u672c\u90fd\u53ef\u4ee5\u63d0\u4f9b\u8bfb\u5199\u670d\u52a1\u3002 Storage \u670d\u52a1\u65e0\u6cd5\u4fee\u6539\u526f\u672c\u6570\u91cf\uff0c\u53ea\u80fd\u5728\u521b\u5efa\u56fe\u7a7a\u95f4\u65f6\u6307\u5b9a\u526f\u672c\u6570\u91cf\uff0c\u800c HDFS \u53ef\u4ee5\u8c03\u6574\u526f\u672c\u6570\u91cf\u3002 Storage \u670d\u52a1\u662f\u76f4\u63a5\u8bbf\u95ee\u6587\u4ef6\u7cfb\u7edf\uff0c\u800c HDFS \u7684\u4e0a\u5c42\uff08\u4f8b\u5982 HBase\uff09\u9700\u8981\u5148\u8bbf\u95ee HDFS\uff0c\u518d\u8bbf\u95ee\u5230\u6587\u4ef6\u7cfb\u7edf\uff0c\u8fdc\u7a0b\u8fc7\u7a0b\u8c03\u7528\uff08RPC\uff09\u6b21\u6570\u66f4\u591a\u3002 \u603b\u800c\u8a00\u4e4b\uff0cStorage \u670d\u52a1\u66f4\u52a0\u8f7b\u91cf\u7ea7\uff0c\u7cbe\u7b80\u4e86\u4e00\u4e9b\u529f\u80fd\uff0c\u67b6\u6784\u6ca1\u6709 HDFS \u590d\u6742\uff0c\u53ef\u4ee5\u6709\u6548\u63d0\u9ad8\u5c0f\u5757\u5b58\u50a8\u7684\u8bfb\u5199\u6027\u80fd\u3002","title":"Storage \u670d\u52a1"},{"location":"1.introduction/3.nebula-graph-architecture/4.storage-service/#storage","text":"NebulaGraph\u7684\u5b58\u50a8\u5305\u542b\u4e24\u4e2a\u90e8\u5206\uff0c\u4e00\u4e2a\u662f Meta \u76f8\u5173\u7684\u5b58\u50a8\uff0c\u79f0\u4e3a Meta \u670d\u52a1\uff0c\u5728\u524d\u6587\u5df2\u6709\u4ecb\u7ecd\u3002 \u53e6\u4e00\u4e2a\u662f\u5177\u4f53\u6570\u636e\u76f8\u5173\u7684\u5b58\u50a8\uff0c\u79f0\u4e3a Storage \u670d\u52a1\u3002\u5176\u8fd0\u884c\u5728 nebula-storaged \u8fdb\u7a0b\u4e2d\u3002\u672c\u6587\u4ec5\u4ecb\u7ecd Storage \u670d\u52a1\u7684\u67b6\u6784\u8bbe\u8ba1\u3002","title":"Storage \u670d\u52a1"},{"location":"1.introduction/3.nebula-graph-architecture/4.storage-service/#_1","text":"\u9ad8\u6027\u80fd\uff08\u81ea\u7814 KVStore\uff09 \u6613\u6c34\u5e73\u6269\u5c55\uff08Shared-nothing \u67b6\u6784\uff0c\u4e0d\u4f9d\u8d56 NAS \u7b49\u786c\u4ef6\u8bbe\u5907\uff09 \u5f3a\u4e00\u81f4\u6027\uff08Raft\uff09 \u9ad8\u53ef\u7528\u6027\uff08Raft\uff09 \u652f\u6301\u5411\u7b2c\u4e09\u65b9\u7cfb\u7edf\u8fdb\u884c\u540c\u6b65\uff08\u4f8b\u5982 \u5168\u6587\u7d22\u5f15 \uff09","title":"\u4f18\u52bf"},{"location":"1.introduction/3.nebula-graph-architecture/4.storage-service/#storage_1","text":"Storage \u670d\u52a1\u662f\u7531 nebula-storaged \u8fdb\u7a0b\u63d0\u4f9b\u7684\uff0c\u7528\u6237\u53ef\u4ee5\u6839\u636e\u573a\u666f\u914d\u7f6e nebula-storaged \u8fdb\u7a0b\u6570\u91cf\uff0c\u4f8b\u5982\u6d4b\u8bd5\u73af\u5883 1 \u4e2a\uff0c\u751f\u4ea7\u73af\u5883 3 \u4e2a\u3002 \u6240\u6709 nebula-storaged \u8fdb\u7a0b\u6784\u6210\u4e86\u57fa\u4e8e Raft \u534f\u8bae\u7684\u96c6\u7fa4\uff0c\u6574\u4e2a\u670d\u52a1\u67b6\u6784\u53ef\u4ee5\u5206\u4e3a\u4e09\u5c42\uff0c\u4ece\u4e0a\u5230\u4e0b\u4f9d\u6b21\u4e3a\uff1a Storage interface \u5c42 Storage \u670d\u52a1\u7684\u6700\u4e0a\u5c42\uff0c\u5b9a\u4e49\u4e86\u4e00\u7cfb\u5217\u548c\u56fe\u76f8\u5173\u7684 API\u3002API \u8bf7\u6c42\u4f1a\u5728\u8fd9\u4e00\u5c42\u88ab\u7ffb\u8bd1\u6210\u4e00\u7ec4\u9488\u5bf9 \u5206\u7247 \u7684 KV \u64cd\u4f5c\uff0c\u4f8b\u5982\uff1a getNeighbors \uff1a\u67e5\u8be2\u4e00\u6279\u70b9\u7684\u51fa\u8fb9\u6216\u8005\u5165\u8fb9\uff0c\u8fd4\u56de\u8fb9\u4ee5\u53ca\u5bf9\u5e94\u7684\u5c5e\u6027\uff0c\u5e76\u4e14\u652f\u6301\u6761\u4ef6\u8fc7\u6ee4\u3002 insert vertex/edge \uff1a\u63d2\u5165\u4e00\u6761\u70b9\u6216\u8005\u8fb9\u53ca\u5176\u5c5e\u6027\u3002 getProps \uff1a\u83b7\u53d6\u4e00\u4e2a\u70b9\u6216\u8005\u4e00\u6761\u8fb9\u7684\u5c5e\u6027\u3002 \u6b63\u662f\u8fd9\u4e00\u5c42\u7684\u5b58\u5728\uff0c\u4f7f\u5f97 Storage \u670d\u52a1\u53d8\u6210\u4e86\u771f\u6b63\u7684\u56fe\u5b58\u50a8\uff0c\u5426\u5219 Storage \u670d\u52a1\u53ea\u662f\u4e00\u4e2a KV \u5b58\u50a8\u670d\u52a1\u3002 Consensus \u5c42 Storage \u670d\u52a1\u7684\u4e2d\u95f4\u5c42\uff0c\u5b9e\u73b0\u4e86 Multi Group Raft \uff0c\u4fdd\u8bc1\u5f3a\u4e00\u81f4\u6027\u548c\u9ad8\u53ef\u7528\u6027\u3002 Store Engine \u5c42 Storage \u670d\u52a1\u7684\u6700\u5e95\u5c42\uff0c\u662f\u4e00\u4e2a\u5355\u673a\u7248\u672c\u5730\u5b58\u50a8\u5f15\u64ce\uff0c\u63d0\u4f9b\u5bf9\u672c\u5730\u6570\u636e\u7684 get \u3001 put \u3001 scan \u7b49\u64cd\u4f5c\u3002\u76f8\u5173\u63a5\u53e3\u5b58\u50a8\u5728 KVStore.h \u548c KVEngine.h \u6587\u4ef6\uff0c\u7528\u6237\u53ef\u4ee5\u6839\u636e\u4e1a\u52a1\u9700\u6c42\u5b9a\u5236\u5f00\u53d1\u76f8\u5173\u7684\u672c\u5730\u5b58\u50a8\u63d2\u4ef6\u3002 \u4e0b\u6587\u5c06\u57fa\u4e8e\u67b6\u6784\u4ecb\u7ecd Storage \u670d\u52a1\u7684\u90e8\u5206\u7279\u6027\u3002","title":"Storage \u670d\u52a1\u67b6\u6784"},{"location":"1.introduction/3.nebula-graph-architecture/4.storage-service/#storage_2","text":"","title":"Storage \u5199\u5165\u6d41\u7a0b"},{"location":"1.introduction/3.nebula-graph-architecture/4.storage-service/#kvstore","text":"NebulaGraph\u4f7f\u7528\u81ea\u884c\u5f00\u53d1\u7684 KVStore\uff0c\u800c\u4e0d\u662f\u5176\u4ed6\u5f00\u6e90 KVStore\uff0c\u539f\u56e0\u5982\u4e0b\uff1a \u9700\u8981\u9ad8\u6027\u80fd KVStore\u3002 \u9700\u8981\u4ee5\u5e93\u7684\u5f62\u5f0f\u63d0\u4f9b\uff0c\u5b9e\u73b0\u9ad8\u6548\u8ba1\u7b97\u4e0b\u63a8\u3002\u5bf9\u4e8e\u5f3a Schema \u7684NebulaGraph\u6765\u8bf4\uff0c\u8ba1\u7b97\u4e0b\u63a8\u65f6\u5982\u4f55\u63d0\u4f9b Schema \u4fe1\u606f\uff0c\u662f\u9ad8\u6548\u7684\u5173\u952e\u3002 \u9700\u8981\u6570\u636e\u5f3a\u4e00\u81f4\u6027\u3002 \u57fa\u4e8e\u4e0a\u8ff0\u539f\u56e0\uff0cNebulaGraph\u4f7f\u7528 RocksDB \u4f5c\u4e3a\u672c\u5730\u5b58\u50a8\u5f15\u64ce\uff0c\u5b9e\u73b0\u4e86\u81ea\u5df1\u7684 KVStore\uff0c\u6709\u5982\u4e0b\u4f18\u52bf\uff1a \u5bf9\u4e8e\u591a\u786c\u76d8\u673a\u5668\uff0cNebulaGraph\u53ea\u9700\u914d\u7f6e\u591a\u4e2a\u4e0d\u540c\u7684\u6570\u636e\u76ee\u5f55\u5373\u53ef\u5145\u5206\u5229\u7528\u591a\u786c\u76d8\u7684\u5e76\u53d1\u80fd\u529b\u3002 \u7531 Meta \u670d\u52a1\u7edf\u4e00\u7ba1\u7406\u6240\u6709 Storage \u670d\u52a1\uff0c\u53ef\u4ee5\u6839\u636e\u6240\u6709\u5206\u7247\u7684\u5206\u5e03\u60c5\u51b5\u548c\u72b6\u6001\uff0c\u624b\u52a8\u8fdb\u884c\u8d1f\u8f7d\u5747\u8861\u3002 Note \u4e0d\u652f\u6301\u81ea\u52a8\u8d1f\u8f7d\u5747\u8861\u662f\u4e3a\u4e86\u9632\u6b62\u81ea\u52a8\u6570\u636e\u642c\u8fc1\u5f71\u54cd\u7ebf\u4e0a\u4e1a\u52a1\u3002 \u5b9a\u5236\u9884\u5199\u65e5\u5fd7\uff08WAL\uff09\uff0c\u6bcf\u4e2a\u5206\u7247\u90fd\u6709\u81ea\u5df1\u7684 WAL\u3002 \u652f\u6301\u591a\u4e2a\u56fe\u7a7a\u95f4\uff0c\u4e0d\u540c\u56fe\u7a7a\u95f4\u76f8\u4e92\u9694\u79bb\uff0c\u6bcf\u4e2a\u56fe\u7a7a\u95f4\u53ef\u4ee5\u8bbe\u7f6e\u81ea\u5df1\u7684\u5206\u7247\u6570\u548c\u526f\u672c\u6570\u3002","title":"KVStore"},{"location":"1.introduction/3.nebula-graph-architecture/4.storage-service/#_2","text":"\u56fe\u5b58\u50a8\u7684\u4e3b\u8981\u6570\u636e\u662f\u70b9\u548c\u8fb9\uff0cNebulaGraph\u5c06\u70b9\u548c\u8fb9\u7684\u4fe1\u606f\u5b58\u50a8\u4e3a key\uff0c\u540c\u65f6\u5c06\u70b9\u548c\u8fb9\u7684\u5c5e\u6027\u4fe1\u606f\u5b58\u50a8\u5728 value \u4e2d\uff0c\u4ee5\u4fbf\u66f4\u9ad8\u6548\u5730\u4f7f\u7528\u5c5e\u6027\u8fc7\u6ee4\u3002 \u70b9\u6570\u636e\u5b58\u50a8\u683c\u5f0f \u76f8\u6bd4NebulaGraph 2.x \u7248\u672c\uff0c3.x \u7248\u672c\u5728\u5f00\u542f \u65e0 Tag \u7684\u70b9\u914d\u7f6e\u540e\uff0c\u6bcf\u4e2a\u70b9\u591a\u4e86\u4e00\u4e2a\u4e0d\u542b TagID \u5b57\u6bb5\u5e76\u4e14\u65e0 value \u7684 key\u3002 \u5b57\u6bb5 \u8bf4\u660e Type key \u7c7b\u578b\u3002\u957f\u5ea6\u4e3a 1 \u5b57\u8282\u3002 PartID \u6570\u636e\u5206\u7247\u7f16\u53f7\u3002\u957f\u5ea6\u4e3a 3 \u5b57\u8282\u3002\u6b64\u5b57\u6bb5\u4e3b\u8981\u7528\u4e8e Storage \u8d1f\u8f7d\u5747\u8861\uff08balance\uff09\u65f6\u65b9\u4fbf\u6839\u636e\u524d\u7f00\u626b\u63cf\u6574\u4e2a\u5206\u7247\u7684\u6570\u636e\u3002 VertexID \u70b9 ID\u3002\u5f53\u70b9 ID \u7c7b\u578b\u4e3a int \u65f6\uff0c\u957f\u5ea6\u4e3a 8 \u5b57\u8282\uff1b\u5f53\u70b9 ID \u7c7b\u578b\u4e3a string \u65f6\uff0c\u957f\u5ea6\u4e3a\u521b\u5efa\u56fe\u7a7a\u95f4\u65f6\u6307\u5b9a\u7684 fixed_string \u957f\u5ea6\u3002 TagID \u70b9\u5173\u8054\u7684 Tag ID\u3002\u957f\u5ea6\u4e3a 4 \u5b57\u8282\u3002 SerializedValue \u5e8f\u5217\u5316\u7684 value\uff0c\u7528\u4e8e\u4fdd\u5b58\u70b9\u7684\u5c5e\u6027\u4fe1\u606f\u3002 \u8fb9\u6570\u636e\u5b58\u50a8\u683c\u5f0f \u5b57\u6bb5 \u8bf4\u660e Type key \u7c7b\u578b\u3002\u957f\u5ea6\u4e3a 1 \u5b57\u8282\u3002 PartID \u6570\u636e\u5206\u7247\u7f16\u53f7\u3002\u957f\u5ea6\u4e3a 3 \u5b57\u8282\u3002\u6b64\u5b57\u6bb5\u4e3b\u8981\u7528\u4e8e Storage \u8d1f\u8f7d\u5747\u8861\uff08balance\uff09\u65f6\u65b9\u4fbf\u6839\u636e\u524d\u7f00\u626b\u63cf\u6574\u4e2a\u5206\u7247\u7684\u6570\u636e\u3002 VertexID \u70b9 ID\u3002\u524d\u4e00\u4e2a VertexID \u5728\u51fa\u8fb9\u91cc\u8868\u793a\u8d77\u59cb\u70b9 ID\uff0c\u5728\u5165\u8fb9\u91cc\u8868\u793a\u76ee\u7684\u70b9 ID\uff1b\u540e\u4e00\u4e2a VertexID \u51fa\u8fb9\u91cc\u8868\u793a\u76ee\u7684\u70b9 ID\uff0c\u5728\u5165\u8fb9\u91cc\u8868\u793a\u8d77\u59cb\u70b9 ID\u3002 Edge type \u8fb9\u7684\u7c7b\u578b\u3002\u5927\u4e8e 0 \u8868\u793a\u51fa\u8fb9\uff0c\u5c0f\u4e8e 0 \u8868\u793a\u5165\u8fb9\u3002\u957f\u5ea6\u4e3a 4 \u5b57\u8282\u3002 Rank \u7528\u6765\u5904\u7406\u4e24\u70b9\u4e4b\u95f4\u6709\u591a\u4e2a\u540c\u7c7b\u578b\u8fb9\u7684\u60c5\u51b5\u3002\u7528\u6237\u53ef\u4ee5\u6839\u636e\u81ea\u5df1\u7684\u9700\u6c42\u8fdb\u884c\u8bbe\u7f6e\uff0c\u4f8b\u5982\u5b58\u653e\u4ea4\u6613\u65f6\u95f4\u3001\u4ea4\u6613\u6d41\u6c34\u53f7\u7b49\u3002\u957f\u5ea6\u4e3a 8 \u5b57\u8282\uff0c PlaceHolder \u9884\u7559\u5b57\u6bb5\u3002\u957f\u5ea6\u4e3a 1 \u5b57\u8282\u3002 SerializedValue \u5e8f\u5217\u5316\u7684 value\uff0c\u7528\u4e8e\u4fdd\u5b58\u8fb9\u7684\u5c5e\u6027\u4fe1\u606f\u3002","title":"\u6570\u636e\u5b58\u50a8\u683c\u5f0f"},{"location":"1.introduction/3.nebula-graph-architecture/4.storage-service/#_3","text":"NebulaGraph\u4f7f\u7528\u5f3a\u7c7b\u578b Schema\u3002 \u5bf9\u4e8e\u70b9\u6216\u8fb9\u7684\u5c5e\u6027\u4fe1\u606f\uff0cNebulaGraph\u4f1a\u5c06\u5c5e\u6027\u4fe1\u606f\u7f16\u7801\u540e\u6309\u987a\u5e8f\u5b58\u50a8\u3002\u7531\u4e8e\u5b9a\u957f\u5c5e\u6027\u7684\u957f\u5ea6\u662f\u56fa\u5b9a\u7684\uff0c\u67e5\u8be2\u65f6\u53ef\u4ee5\u6839\u636e\u504f\u79fb\u91cf\u5feb\u901f\u67e5\u8be2\u3002\u5728\u89e3\u7801\u4e4b\u524d\uff0c\u9700\u8981\u5148\u4ece Meta \u670d\u52a1\u4e2d\u67e5\u8be2\u5177\u4f53\u7684 Schema \u4fe1\u606f\uff08\u5e76\u7f13\u5b58\uff09\u3002\u540c\u65f6\u4e3a\u4e86\u652f\u6301\u5728\u7ebf\u53d8\u66f4 Schema\uff0c\u5728\u7f16\u7801\u5c5e\u6027\u65f6\uff0c\u4f1a\u52a0\u5165\u5bf9\u5e94\u7684 Schema \u7248\u672c\u4fe1\u606f\u3002","title":"\u5c5e\u6027\u8bf4\u660e"},{"location":"1.introduction/3.nebula-graph-architecture/4.storage-service/#_4","text":"\u7531\u4e8e\u8d85\u5927\u89c4\u6a21\u5173\u7cfb\u7f51\u7edc\u7684\u8282\u70b9\u6570\u91cf\u9ad8\u8fbe\u767e\u4ebf\u5230\u5343\u4ebf\uff0c\u800c\u8fb9\u7684\u6570\u91cf\u66f4\u4f1a\u9ad8\u8fbe\u4e07\u4ebf\uff0c\u5373\u4f7f\u4ec5\u5b58\u50a8\u70b9\u548c\u8fb9\u4e24\u8005\u4e5f\u8fdc\u5927\u4e8e\u4e00\u822c\u670d\u52a1\u5668\u7684\u5bb9\u91cf\u3002\u56e0\u6b64\u9700\u8981\u6709\u65b9\u6cd5\u5c06\u56fe\u5143\u7d20\u5207\u5272\uff0c\u5e76\u5b58\u50a8\u5728\u4e0d\u540c\u903b\u8f91\u5206\u7247\uff08Partition\uff09\u4e0a\u3002NebulaGraph\u91c7\u7528\u8fb9\u5206\u5272\u7684\u65b9\u5f0f\u3002","title":"\u6570\u636e\u5206\u7247"},{"location":"1.introduction/3.nebula-graph-architecture/4.storage-service/#_5","text":"NebulaGraph\u4e2d\u903b\u8f91\u4e0a\u7684\u4e00\u6761\u8fb9\u5bf9\u5e94\u7740\u786c\u76d8\u4e0a\u7684\u4e24\u4e2a\u952e\u503c\u5bf9\uff08key-value pair\uff09\uff0c\u5728\u8fb9\u7684\u6570\u91cf\u548c\u5c5e\u6027\u8f83\u591a\u65f6\uff0c\u5b58\u50a8\u653e\u5927\u73b0\u8c61\u8f83\u660e\u663e\u3002\u8fb9\u7684\u5b58\u50a8\u65b9\u5f0f\u5982\u4e0b\u56fe\u6240\u793a\u3002 \u4e0a\u56fe\u4ee5\u6700\u7b80\u5355\u7684\u4e24\u4e2a\u70b9\u548c\u4e00\u6761\u8fb9\u4e3a\u4f8b\uff0c\u8d77\u70b9 SrcVertex \u901a\u8fc7\u8fb9 EdgeA \u8fde\u63a5\u76ee\u7684\u70b9 DstVertex\uff0c\u5f62\u6210\u8def\u5f84 (SrcVertex)-[EdgeA]->(DstVertex) \u3002\u8fd9\u4e24\u4e2a\u70b9\u548c\u4e00\u6761\u8fb9\u4f1a\u4ee5 6 \u4e2a\u952e\u503c\u5bf9\u7684\u5f62\u5f0f\u4fdd\u5b58\u5728\u5b58\u50a8\u5c42\u7684\u4e24\u4e2a\u4e0d\u540c\u5206\u7247\uff0c\u5373 Partition x \u548c Partition y \u4e2d\uff0c\u8be6\u7ec6\u8bf4\u660e\u5982\u4e0b\uff1a \u70b9 SrcVertex \u7684\u952e\u503c\u4fdd\u5b58\u5728 Partition x \u4e2d\u3002 \u8fb9 EdgeA \u7684\u7b2c\u4e00\u4efd\u952e\u503c\uff0c\u8fd9\u91cc\u7528 EdgeA_Out \u8868\u793a\uff0c\u4e0e SrcVertex \u4e00\u540c\u4fdd\u5b58\u5728 Partition x \u4e2d\u3002key \u7684\u5b57\u6bb5\u6709 Type\u3001PartID\uff08x\uff09\u3001VID\uff08Src\uff0c\u5373\u70b9 SrcVertex \u7684 ID\uff09\u3001EdgeType\uff08\u7b26\u53f7\u4e3a\u6b63\uff0c\u4ee3\u8868\u8fb9\u65b9\u5411\u4e3a\u51fa\uff09\u3001Rank\uff080\uff09\u3001VID\uff08Dst\uff0c\u5373\u70b9 DstVertex \u7684 ID\uff09\u548c PlaceHolder\u3002SerializedValue \u5373 Value\uff0c\u662f\u5e8f\u5217\u5316\u7684\u8fb9\u5c5e\u6027\u3002 \u70b9 DstVertex \u7684\u952e\u503c\u4fdd\u5b58\u5728 Partition y \u4e2d\u3002 \u8fb9 EdgeA \u7684\u7b2c\u4e8c\u4efd\u952e\u503c\uff0c\u8fd9\u91cc\u7528 EdgeA_In \u8868\u793a\uff0c\u4e0e DstVertex \u4e00\u540c\u4fdd\u5b58\u5728 Partition y \u4e2d\u3002key \u7684\u5b57\u6bb5\u6709 Type\u3001PartID\uff08y\uff09\u3001VID\uff08Dst\uff0c\u5373\u70b9 DstVertex \u7684 ID\uff09\u3001EdgeType\uff08\u7b26\u53f7\u4e3a\u8d1f\uff0c\u4ee3\u8868\u8fb9\u65b9\u5411\u4e3a\u5165\uff09\u3001Rank\uff080\uff09\u3001VID\uff08Src\uff0c\u5373\u70b9 SrcVertex \u7684 ID\uff09\u548c PlaceHolder\u3002SerializedValue \u5373 Value\uff0c\u662f\u5e8f\u5217\u5316\u7684\u8fb9\u5c5e\u6027\uff0c\u4e0e EdgeA_Out \u4e2d\u8be5\u90e8\u5206\u7684\u5b8c\u5168\u76f8\u540c\u3002 EdgeA_Out \u548c EdgeA_In \u4ee5\u65b9\u5411\u76f8\u53cd\u7684\u4e24\u6761\u8fb9\u7684\u5f62\u5f0f\u5b58\u5728\u4e8e\u5b58\u50a8\u5c42\uff0c\u4e8c\u8005\u7ec4\u5408\u6210\u4e86\u903b\u8f91\u4e0a\u7684\u4e00\u6761\u8fb9 EdgeA\u3002EdgeA_Out \u7528\u4e8e\u4ece\u8d77\u70b9\u5f00\u59cb\u7684\u904d\u5386\u8bf7\u6c42\uff0c\u4f8b\u5982 (a)-[]->() \uff1bEdgeA_In \u7528\u4e8e\u6307\u5411\u76ee\u7684\u70b9\u7684\u904d\u5386\u8bf7\u6c42\uff0c\u6216\u8005\u8bf4\u4ece\u76ee\u7684\u70b9\u5f00\u59cb\uff0c\u6cbf\u7740\u8fb9\u7684\u65b9\u5411\u9006\u5e8f\u8fdb\u884c\u7684\u904d\u5386\u8bf7\u6c42\uff0c\u4f8b\u5982\u4f8b\u5982 ()-[]->(a) \u3002 \u5982 EdgeA_Out \u548c EdgeA_In \u4e00\u6837\uff0cNebulaGraph\u5197\u4f59\u4e86\u5b58\u50a8\u6bcf\u6761\u8fb9\u7684\u4fe1\u606f\uff0c\u5bfc\u81f4\u5b58\u50a8\u8fb9\u6240\u9700\u7684\u5b9e\u9645\u7a7a\u95f4\u7ffb\u500d\u3002\u56e0\u4e3a\u8fb9\u5bf9\u5e94\u7684 key \u5360\u7528\u7684\u786c\u76d8\u7a7a\u95f4\u8f83\u5c0f\uff0c\u4f46 value \u5360\u7528\u7684\u7a7a\u95f4\u4e0e\u5c5e\u6027\u503c\u7684\u957f\u5ea6\u548c\u6570\u91cf\u6210\u6b63\u6bd4\uff0c\u6240\u4ee5\uff0c\u5f53\u8fb9\u7684\u5c5e\u6027\u503c\u8f83\u5927\u6216\u6570\u91cf\u8f83\u591a\u65f6\u5019\uff0c\u786c\u76d8\u7a7a\u95f4\u5360\u7528\u91cf\u4f1a\u6bd4\u8f83\u5927\u3002","title":"\u5207\u8fb9\u4e0e\u5b58\u50a8\u653e\u5927"},{"location":"1.introduction/3.nebula-graph-architecture/4.storage-service/#_6","text":"\u5206\u7247\u7b56\u7565\u91c7\u7528 \u9759\u6001 Hash \u7684\u65b9\u5f0f\uff0c\u5373\u5bf9\u70b9 VID \u8fdb\u884c\u53d6\u6a21\u64cd\u4f5c\uff0c\u540c\u4e00\u4e2a\u70b9\u7684\u6240\u6709 Tag\u3001\u51fa\u8fb9\u548c\u5165\u8fb9\u4fe1\u606f\u90fd\u4f1a\u5b58\u50a8\u5230\u540c\u4e00\u4e2a\u5206\u7247\uff0c\u8fd9\u79cd\u65b9\u5f0f\u6781\u5927\u5730\u63d0\u5347\u4e86\u67e5\u8be2\u6548\u7387\u3002 Note \u521b\u5efa\u56fe\u7a7a\u95f4\u65f6\u9700\u6307\u5b9a\u5206\u7247\u6570\u91cf\uff0c\u5206\u7247\u6570\u91cf\u8bbe\u7f6e\u540e\u65e0\u6cd5\u4fee\u6539\uff0c\u5efa\u8bae\u8bbe\u7f6e\u65f6\u63d0\u524d\u6ee1\u8db3\u4e1a\u52a1\u5c06\u6765\u7684\u6269\u5bb9\u9700\u6c42\u3002 \u591a\u673a\u96c6\u7fa4\u90e8\u7f72\u65f6\uff0c\u5206\u7247\u5206\u5e03\u5728\u96c6\u7fa4\u5185\u7684\u4e0d\u540c\u673a\u5668\u4e0a\u3002\u5206\u7247\u6570\u91cf\u5728 CREATE SPACE \u8bed\u53e5\u4e2d\u6307\u5b9a\uff0c\u6b64\u540e\u4e0d\u53ef\u66f4\u6539\u3002 \u5982\u679c\u9700\u8981\u5c06\u67d0\u4e9b\u70b9\u653e\u7f6e\u5728\u76f8\u540c\u7684\u5206\u7247\uff08\u4f8b\u5982\u5728\u4e00\u53f0\u673a\u5668\u4e0a\uff09\uff0c\u53ef\u4ee5\u53c2\u8003 \u516c\u5f0f\u6216\u4ee3\u7801 \u3002 \u4e0b\u6587\u7528\u7b80\u5355\u4ee3\u7801\u8bf4\u660e VID \u548c\u5206\u7247\u7684\u5173\u7cfb\u3002 // \u5982\u679c ID \u957f\u5ea6\u4e3a 8\uff0c\u4e3a\u4e86\u517c\u5bb9 1.0\uff0c\u5c06\u6570\u636e\u7c7b\u578b\u89c6\u4e3a int64\u3002 uint64_t vid = 0; if (id.size() == 8) { memcpy(static_cast<void*>(&vid), id.data(), 8); } else { MurmurHash2 hash; vid = hash(id.data()); } PartitionID pId = vid % numParts + 1; \u7b80\u5355\u6765\u8bf4\uff0c\u4e0a\u8ff0\u4ee3\u7801\u662f\u5c06\u4e00\u4e2a\u56fa\u5b9a\u7684\u5b57\u7b26\u4e32\u8fdb\u884c\u54c8\u5e0c\u8ba1\u7b97\uff0c\u8f6c\u6362\u6210\u6570\u636e\u7c7b\u578b\u4e3a int64 \u7684\u6570\u5b57\uff08int64 \u6570\u5b57\u7684\u54c8\u5e0c\u8ba1\u7b97\u7ed3\u679c\u662f\u6570\u5b57\u672c\u8eab\uff09\uff0c\u5c06\u6570\u5b57\u53d6\u6a21\uff0c\u7136\u540e\u52a0 1\uff0c\u5373\uff1a pId = vid % numParts + 1 ; \u793a\u4f8b\u7684\u90e8\u5206\u53c2\u6570\u8bf4\u660e\u5982\u4e0b\u3002 \u53c2\u6570 \u8bf4\u660e % \u53d6\u6a21\u8fd0\u7b97\u3002 numParts VID \u6240\u5728\u56fe\u7a7a\u95f4\u7684\u5206\u7247\u6570\uff0c\u5373 CREATE SPACE \u8bed\u53e5\u4e2d\u7684 partition_num \u503c\u3002 pId VID \u6240\u5728\u5206\u7247\u7684 ID\u3002 \u4f8b\u5982\u6709 100 \u4e2a\u5206\u7247\uff0c VID \u4e3a 1\u3001101 \u548c 1001 \u7684\u4e09\u4e2a\u70b9\u5c06\u4f1a\u5b58\u50a8\u5728\u76f8\u540c\u7684\u5206\u7247\u3002\u5206\u7247 ID \u548c\u673a\u5668\u5730\u5740\u4e4b\u95f4\u7684\u6620\u5c04\u662f\u968f\u673a\u7684\uff0c\u6240\u4ee5\u4e0d\u80fd\u5047\u5b9a\u4efb\u4f55\u4e24\u4e2a\u5206\u7247\u4f4d\u4e8e\u540c\u4e00\u53f0\u673a\u5668\u4e0a\u3002","title":"\u5206\u7247\u7b97\u6cd5"},{"location":"1.introduction/3.nebula-graph-architecture/4.storage-service/#raft","text":"","title":"Raft"},{"location":"1.introduction/3.nebula-graph-architecture/4.storage-service/#raft_1","text":"\u5206\u5e03\u5f0f\u7cfb\u7edf\u4e2d\uff0c\u540c\u4e00\u4efd\u6570\u636e\u901a\u5e38\u4f1a\u6709\u591a\u4e2a\u526f\u672c\uff0c\u8fd9\u6837\u5373\u4f7f\u5c11\u6570\u526f\u672c\u53d1\u751f\u6545\u969c\uff0c\u7cfb\u7edf\u4ecd\u53ef\u6b63\u5e38\u8fd0\u884c\u3002\u8fd9\u5c31\u9700\u8981\u4e00\u5b9a\u7684\u6280\u672f\u624b\u6bb5\u6765\u4fdd\u8bc1\u591a\u4e2a\u526f\u672c\u4e4b\u95f4\u7684\u4e00\u81f4\u6027\u3002 \u57fa\u672c\u539f\u7406\uff1aRaft \u5c31\u662f\u4e00\u79cd\u7528\u4e8e\u4fdd\u8bc1\u591a\u526f\u672c\u4e00\u81f4\u6027\u7684\u534f\u8bae\u3002Raft \u91c7\u7528\u591a\u4e2a\u526f\u672c\u4e4b\u95f4\u7ade\u9009\u7684\u65b9\u5f0f\uff0c\u8d62\u5f97\u201d\u8d85\u8fc7\u534a\u6570\u201d\u526f\u672c\u6295\u7968\u7684\uff08\u5019\u9009\uff09\u526f\u672c\u6210\u4e3a Leader\uff0c\u7531 Leader \u4ee3\u8868\u6240\u6709\u526f\u672c\u5bf9\u5916\u63d0\u4f9b\u670d\u52a1\uff1b\u5176\u4ed6 Follower \u4f5c\u4e3a\u5907\u4efd\u3002\u5f53\u8be5 Leader \u51fa\u73b0\u5f02\u5e38\u540e\uff08\u901a\u4fe1\u6545\u969c\u3001\u8fd0\u7ef4\u547d\u4ee4\u7b49\uff09\uff0c\u5176\u4f59 Follower \u8fdb\u884c\u65b0\u4e00\u8f6e\u9009\u4e3e\uff0c\u6295\u7968\u51fa\u4e00\u4e2a\u65b0\u7684 Leader\u3002Leader \u548c Follower \u4e4b\u95f4\u901a\u8fc7\u5fc3\u8df3\u7684\u65b9\u5f0f\u76f8\u4e92\u63a2\u6d4b\u662f\u5426\u5b58\u6d3b\uff0c\u5e76\u4ee5 Raft-wal \u7684\u65b9\u5f0f\u5199\u5165\u786c\u76d8\uff0c\u8d85\u8fc7\u591a\u4e2a\u5fc3\u8df3\u4ecd\u65e0\u54cd\u5e94\u7684\u526f\u672c\u4f1a\u88ab\u8ba4\u4e3a\u53d1\u751f\u6545\u969c\u3002 Note \u56e0\u4e3a Raft-wal \u9700\u8981\u5b9a\u671f\u5199\u786c\u76d8\uff0c\u5982\u679c\u786c\u76d8\u5199\u80fd\u529b\u74f6\u9888\u4f1a\u5bfc\u81f4 Raft \u5fc3\u8df3\u5931\u8d25\uff0c\u5bfc\u81f4\u91cd\u65b0\u53d1\u8d77\u9009\u4e3e\u3002\u786c\u76d8 IO \u4e25\u91cd\u5835\u585e\u60c5\u51b5\u4e0b\uff0c\u4f1a\u5bfc\u81f4\u957f\u671f\u65e0\u6cd5\u9009\u4e3e\u51fa Leader\u3002 \u8bfb\u5199\u6d41\u7a0b\uff1a\u5bf9\u4e8e\u5ba2\u6237\u7aef\u7684\u6bcf\u4e2a\u5199\u5165\u8bf7\u6c42\uff0cLeader \u4f1a\u5c06\u8be5\u5199\u5165\u4ee5 Raft-wal \u7684\u65b9\u5f0f\uff0c\u5c06\u8be5\u6761\u540c\u6b65\u7ed9\u5176\u4ed6 Follower\uff0c\u5e76\u53ea\u6709\u5728\u201c\u8d85\u8fc7\u534a\u6570\u201d\u526f\u672c\u90fd\u6210\u529f\u6536\u5230 Raft-wal \u540e\uff0c\u624d\u4f1a\u8fd4\u56de\u5ba2\u6237\u7aef\u8be5\u5199\u5165\u6210\u529f\u3002\u5bf9\u4e8e\u5ba2\u6237\u7aef\u7684\u6bcf\u4e2a\u8bfb\u53d6\u8bf7\u6c42\uff0c\u90fd\u76f4\u63a5\u8bbf\u95ee Leader\uff0c\u800c Follower \u5e76\u4e0d\u53c2\u4e0e\u8bfb\u8bf7\u6c42\u670d\u52a1\u3002 \u6545\u969c\u6d41\u7a0b\uff1a\u573a\u666f 1\uff1a\u8003\u8651\u4e00\u4e2a\u914d\u7f6e\u4e3a\u5355\u526f\u672c\uff08\u56fe\u7a7a\u95f4\uff09\u7684\u96c6\u7fa4\uff1b\u5982\u679c\u7cfb\u7edf\u53ea\u6709\u4e00\u4e2a\u526f\u672c\u65f6\uff0c\u5176\u81ea\u8eab\u5c31\u662f Leader\uff1b\u5982\u679c\u5176\u53d1\u751f\u6545\u969c\uff0c\u7cfb\u7edf\u5c06\u5b8c\u5168\u4e0d\u53ef\u7528\u3002\u573a\u666f 2\uff1a\u8003\u8651\u4e00\u4e2a\u914d\u7f6e\u4e3a 3 \u526f\u672c\uff08\u56fe\u7a7a\u95f4\uff09\u7684\u96c6\u7fa4\uff1b\u5982\u679c\u7cfb\u7edf\u6709 3 \u4e2a\u526f\u672c\uff0c\u5176\u4e2d\u4e00\u4e2a\u526f\u672c\u662f Leader\uff0c\u5176\u4ed6 2 \u4e2a\u526f\u672c\u662f Follower\uff1b\u5373\u4f7f\u539f Leader \u53d1\u751f\u6545\u969c\uff0c\u5269\u4e0b\u4e24\u4e2a\u526f\u672c\u4ecd\u53ef\u6295\u7968\u51fa\u4e00\u4e2a\u65b0\u7684 Leader\uff08\u4ee5\u53ca\u4e00\u4e2a Follower\uff09\uff0c\u6b64\u65f6\u7cfb\u7edf\u4ecd\u53ef\u4f7f\u7528\uff1b\u4f46\u662f\u5f53\u8fd9 2 \u4e2a\u526f\u672c\u4e2d\u4efb\u4e00\u8005\u518d\u6b21\u53d1\u751f\u6545\u969c\u540e\uff0c\u7531\u4e8e\u6295\u7968\u4eba\u6570\u4e0d\u8db3\uff0c\u7cfb\u7edf\u5c06\u5b8c\u5168\u4e0d\u53ef\u7528\u3002 Note Raft \u591a\u526f\u672c\u7684\u65b9\u5f0f\u4e0e HDFS \u591a\u526f\u672c\u7684\u65b9\u5f0f\u662f\u4e0d\u540c\u7684\uff0cRaft \u57fa\u4e8e\u201c\u591a\u6570\u6d3e\u201d\u6295\u7968\uff0c\u56e0\u6b64\u526f\u672c\u6570\u91cf\u4e0d\u80fd\u662f\u5076\u6570\u3002","title":"\u5173\u4e8e Raft \u7684\u7b80\u5355\u4ecb\u7ecd"},{"location":"1.introduction/3.nebula-graph-architecture/4.storage-service/#multi_group_raft","text":"\u7531\u4e8e Storage \u670d\u52a1\u9700\u8981\u652f\u6301\u96c6\u7fa4\u5206\u5e03\u5f0f\u67b6\u6784\uff0c\u6240\u4ee5\u57fa\u4e8e Raft \u534f\u8bae\u5b9e\u73b0\u4e86 Multi Group Raft\uff0c\u5373\u6bcf\u4e2a\u5206\u7247\u7684\u6240\u6709\u526f\u672c\u5171\u540c\u7ec4\u6210\u4e00\u4e2a Raft group\uff0c\u5176\u4e2d\u4e00\u4e2a\u526f\u672c\u662f leader\uff0c\u5176\u4ed6\u526f\u672c\u662f follower\uff0c\u4ece\u800c\u5b9e\u73b0\u5f3a\u4e00\u81f4\u6027\u548c\u9ad8\u53ef\u7528\u6027\u3002Raft \u7684\u90e8\u5206\u5b9e\u73b0\u5982\u4e0b\u3002 \u7531\u4e8e Raft \u65e5\u5fd7\u4e0d\u5141\u8bb8\u7a7a\u6d1e\uff0cNebulaGraph\u4f7f\u7528 Multi Group Raft \u7f13\u89e3\u6b64\u95ee\u9898\uff0c\u5206\u7247\u6570\u91cf\u8f83\u591a\u65f6\uff0c\u53ef\u4ee5\u6709\u6548\u63d0\u9ad8NebulaGraph\u7684\u6027\u80fd\u3002\u4f46\u662f\u5206\u7247\u6570\u91cf\u592a\u591a\u4f1a\u589e\u52a0\u5f00\u9500\uff0c\u4f8b\u5982 Raft group \u5185\u90e8\u5b58\u50a8\u7684\u72b6\u6001\u4fe1\u606f\u3001WAL \u6587\u4ef6\uff0c\u6216\u8005\u8d1f\u8f7d\u8fc7\u4f4e\u65f6\u7684\u6279\u91cf\u64cd\u4f5c\u3002 \u5b9e\u73b0 Multi Group Raft \u6709 2 \u4e2a\u5173\u952e\u70b9\uff1a \u5171\u4eab Transport \u5c42 \u6bcf\u4e00\u4e2a Raft group \u5185\u90e8\u90fd\u9700\u8981\u5411\u5bf9\u5e94\u7684 peer \u53d1\u9001\u6d88\u606f\uff0c\u5982\u679c\u4e0d\u80fd\u5171\u4eab Transport \u5c42\uff0c\u4f1a\u5bfc\u81f4\u8fde\u63a5\u7684\u5f00\u9500\u5de8\u5927\u3002 \u5171\u4eab\u7ebf\u7a0b\u6c60 \u5982\u679c\u4e0d\u5171\u4eab\u4e00\u7ec4\u7ebf\u7a0b\u6c60\uff0c\u4f1a\u9020\u6210\u7cfb\u7edf\u7684\u7ebf\u7a0b\u6570\u8fc7\u591a\uff0c\u5bfc\u81f4\u5927\u91cf\u7684\u4e0a\u4e0b\u6587\u5207\u6362\u5f00\u9500\u3002","title":"Multi Group Raft"},{"location":"1.introduction/3.nebula-graph-architecture/4.storage-service/#batch","text":"NebulaGraph\u4e2d\uff0c\u6bcf\u4e2a\u5206\u7247\u90fd\u662f\u4e32\u884c\u5199\u65e5\u5fd7\uff0c\u4e3a\u4e86\u63d0\u9ad8\u541e\u5410\uff0c\u5199\u65e5\u5fd7\u65f6\u9700\u8981\u505a\u6279\u91cf\u64cd\u4f5c\uff0c\u4f46\u662f\u7531\u4e8eNebulaGraph\u5229\u7528 WAL \u5b9e\u73b0\u4e00\u4e9b\u7279\u6b8a\u529f\u80fd\uff0c\u9700\u8981\u5bf9\u6279\u91cf\u64cd\u4f5c\u8fdb\u884c\u5206\u7ec4\uff0c\u8fd9\u662fNebulaGraph\u7684\u7279\u8272\u3002 \u4f8b\u5982\u65e0\u9501 CAS \u64cd\u4f5c\u9700\u8981\u4e4b\u524d\u7684 WAL \u5168\u90e8\u63d0\u4ea4\u540e\u624d\u80fd\u6267\u884c\uff0c\u5982\u679c\u4e00\u4e2a\u6279\u91cf\u5199\u5165\u7684 WAL \u91cc\u5305\u542b\u4e86 CAS \u7c7b\u578b\u7684 WAL\uff0c\u5c31\u9700\u8981\u62c6\u5206\u6210\u7c92\u5ea6\u66f4\u5c0f\u7684\u51e0\u4e2a\u7ec4\uff0c\u8fd8\u8981\u4fdd\u8bc1\u8fd9\u51e0\u7ec4 WAL \u4e32\u884c\u63d0\u4ea4\u3002","title":"\u6279\u91cf\uff08Batch\uff09\u64cd\u4f5c"},{"location":"1.introduction/3.nebula-graph-architecture/4.storage-service/#leader_transfer_leadership","text":"leader \u5207\u6362\u5bf9\u4e8e\u8d1f\u8f7d\u5747\u8861\u81f3\u5173\u91cd\u8981\uff0c\u5f53\u628a\u67d0\u4e2a\u5206\u7247\u4ece\u4e00\u53f0\u673a\u5668\u8fc1\u79fb\u5230\u53e6\u4e00\u53f0\u673a\u5668\u65f6\uff0c\u9996\u5148\u4f1a\u68c0\u67e5\u5206\u7247\u662f\u4e0d\u662f leader\uff0c\u5982\u679c\u662f\u7684\u8bdd\uff0c\u9700\u8981\u5148\u5207\u6362 leader\uff0c\u6570\u636e\u8fc1\u79fb\u5b8c\u6bd5\u4e4b\u540e\uff0c\u901a\u5e38\u8fd8\u8981\u91cd\u65b0 \u5747\u8861 leader \u5206\u5e03 \u3002 \u5bf9\u4e8e leader \u6765\u8bf4\uff0c\u63d0\u4ea4 leader \u5207\u6362\u547d\u4ee4\u65f6\uff0c\u5c31\u4f1a\u653e\u5f03\u81ea\u5df1\u7684 leader \u8eab\u4efd\uff0c\u5f53 follower \u6536\u5230 leader \u5207\u6362\u547d\u4ee4\u65f6\uff0c\u5c31\u4f1a\u53d1\u8d77\u9009\u4e3e\u3002","title":"leader \u5207\u6362\uff08Transfer Leadership\uff09"},{"location":"1.introduction/3.nebula-graph-architecture/4.storage-service/#_7","text":"\u4e3a\u4e86\u907f\u514d\u8111\u88c2\uff0c\u5f53\u4e00\u4e2a Raft group \u7684\u6210\u5458\u53d1\u751f\u53d8\u5316\u65f6\uff0c\u9700\u8981\u6709\u4e00\u4e2a\u4e2d\u95f4\u72b6\u6001\uff0c\u8be5\u72b6\u6001\u4e0b\u65b0\u65e7 group \u7684\u591a\u6570\u6d3e\u9700\u8981\u6709\u91cd\u53e0\u7684\u90e8\u5206\uff0c\u8fd9\u6837\u5c31\u9632\u6b62\u4e86\u65b0\u7684 group \u6216\u65e7\u7684 group \u5355\u65b9\u9762\u505a\u51fa\u51b3\u5b9a\u3002\u4e3a\u4e86\u66f4\u52a0\u7b80\u5316\uff0cDiego Ongaro \u5728\u81ea\u5df1\u7684\u535a\u58eb\u8bba\u6587\u4e2d\u63d0\u51fa\u6bcf\u6b21\u53ea\u589e\u51cf\u4e00\u4e2a peer \u7684\u65b9\u5f0f\uff0c\u4ee5\u4fdd\u8bc1\u65b0\u65e7 group \u7684\u591a\u6570\u6d3e\u603b\u662f\u6709\u91cd\u53e0\u3002NebulaGraph\u4e5f\u91c7\u7528\u4e86\u8fd9\u4e2a\u65b9\u5f0f\uff0c\u53ea\u4e0d\u8fc7\u589e\u52a0\u6210\u5458\u548c\u79fb\u9664\u6210\u5458\u7684\u5b9e\u73b0\u6709\u6240\u533a\u522b\u3002\u5177\u4f53\u5b9e\u73b0\u65b9\u5f0f\u8bf7\u53c2\u89c1 Raft Part class \u91cc addPeer/removePeer \u7684\u5b9e\u73b0\u3002","title":"\u6210\u5458\u53d8\u66f4"},{"location":"1.introduction/3.nebula-graph-architecture/4.storage-service/#hdfs","text":"Storage \u670d\u52a1\u57fa\u4e8e Raft \u534f\u8bae\u5b9e\u73b0\u7684\u5206\u5e03\u5f0f\u67b6\u6784\uff0c\u4e0e HDFS \u7684\u5206\u5e03\u5f0f\u67b6\u6784\u6709\u4e00\u4e9b\u533a\u522b\u3002\u4f8b\u5982\uff1a Storage \u670d\u52a1\u672c\u8eab\u901a\u8fc7 Raft \u534f\u8bae\u4fdd\u8bc1\u4e00\u81f4\u6027\uff0c\u526f\u672c\u6570\u91cf\u901a\u5e38\u4e3a\u5947\u6570\uff0c\u65b9\u4fbf\u8fdb\u884c\u9009\u4e3e leader\uff0c\u800c HDFS \u5b58\u50a8\u5177\u4f53\u6570\u636e\u7684 DataNode \u9700\u8981\u901a\u8fc7 NameNode \u4fdd\u8bc1\u4e00\u81f4\u6027\uff0c\u5bf9\u526f\u672c\u6570\u91cf\u6ca1\u6709\u8981\u6c42\u3002 Storage \u670d\u52a1\u53ea\u6709 leader \u526f\u672c\u63d0\u4f9b\u8bfb\u5199\u670d\u52a1\uff0c\u800c HDFS \u7684\u6240\u6709\u526f\u672c\u90fd\u53ef\u4ee5\u63d0\u4f9b\u8bfb\u5199\u670d\u52a1\u3002 Storage \u670d\u52a1\u65e0\u6cd5\u4fee\u6539\u526f\u672c\u6570\u91cf\uff0c\u53ea\u80fd\u5728\u521b\u5efa\u56fe\u7a7a\u95f4\u65f6\u6307\u5b9a\u526f\u672c\u6570\u91cf\uff0c\u800c HDFS \u53ef\u4ee5\u8c03\u6574\u526f\u672c\u6570\u91cf\u3002 Storage \u670d\u52a1\u662f\u76f4\u63a5\u8bbf\u95ee\u6587\u4ef6\u7cfb\u7edf\uff0c\u800c HDFS \u7684\u4e0a\u5c42\uff08\u4f8b\u5982 HBase\uff09\u9700\u8981\u5148\u8bbf\u95ee HDFS\uff0c\u518d\u8bbf\u95ee\u5230\u6587\u4ef6\u7cfb\u7edf\uff0c\u8fdc\u7a0b\u8fc7\u7a0b\u8c03\u7528\uff08RPC\uff09\u6b21\u6570\u66f4\u591a\u3002 \u603b\u800c\u8a00\u4e4b\uff0cStorage \u670d\u52a1\u66f4\u52a0\u8f7b\u91cf\u7ea7\uff0c\u7cbe\u7b80\u4e86\u4e00\u4e9b\u529f\u80fd\uff0c\u67b6\u6784\u6ca1\u6709 HDFS \u590d\u6742\uff0c\u53ef\u4ee5\u6709\u6548\u63d0\u9ad8\u5c0f\u5757\u5b58\u50a8\u7684\u8bfb\u5199\u6027\u80fd\u3002","title":"\u4e0e HDFS \u7684\u533a\u522b"},{"location":"14.client/1.nebula-client/","text":"\u5ba2\u6237\u7aef\u4ecb\u7ecd \u00b6 NebulaGraph\u63d0\u4f9b\u591a\u79cd\u7c7b\u578b\u5ba2\u6237\u7aef\uff0c\u4fbf\u4e8e\u7528\u6237\u8fde\u63a5\u3001\u7ba1\u7406NebulaGraph\u56fe\u6570\u636e\u5e93\u3002 NebulaGraph Console \uff1a\u539f\u751f CLI \u5ba2\u6237\u7aef NebulaGraph CPP \uff1aC++ \u5ba2\u6237\u7aef NebulaGraph Java \uff1aJava \u5ba2\u6237\u7aef NebulaGraph Python \uff1aPython \u5ba2\u6237\u7aef NebulaGraph Go \uff1aGo \u5ba2\u6237\u7aef Note \u76ee\u524d\u4ec5 NebulaGraph Java \u5ba2\u6237\u7aef\u652f\u6301\u7ebf\u7a0b\u5b89\u5168\uff08thread-safe\uff09\u3002 Caution \u4ee5\u4e0b\u5ba2\u6237\u7aef\u5de5\u5177\u4e5f\u53ef\u7528\u4e8e\u8fde\u63a5\u548c\u7ba1\u7406NebulaGraph\u3002\u4ed6\u4eec\u7531\u975e\u5e38\u9177\u7684\u793e\u533a\u7528\u6237\u63d0\u4f9b\u548c\u7ef4\u62a4\uff0c\u6b22\u8fce\u5927\u5bb6\u53c2\u4e0e\u6d4b\u8bd5\u548c\u8d21\u732e\u3002 NebulaGraph PHP NebulaGraph Node NebulaGraph .net NebulaGraph JDBC NebulaGraph Carina\uff08Python ORM\uff09 NORM\uff08Golang ORM\uff09 Graph-Ocean\uff08Java ORM\uff09 NebulaGraph Ngbatis\uff08MyBatis \u98ce\u683c\u7684 Java ORM\uff09","title":"\u5ba2\u6237\u7aef\u4ecb\u7ecd"},{"location":"14.client/1.nebula-client/#_1","text":"NebulaGraph\u63d0\u4f9b\u591a\u79cd\u7c7b\u578b\u5ba2\u6237\u7aef\uff0c\u4fbf\u4e8e\u7528\u6237\u8fde\u63a5\u3001\u7ba1\u7406NebulaGraph\u56fe\u6570\u636e\u5e93\u3002 NebulaGraph Console \uff1a\u539f\u751f CLI \u5ba2\u6237\u7aef NebulaGraph CPP \uff1aC++ \u5ba2\u6237\u7aef NebulaGraph Java \uff1aJava \u5ba2\u6237\u7aef NebulaGraph Python \uff1aPython \u5ba2\u6237\u7aef NebulaGraph Go \uff1aGo \u5ba2\u6237\u7aef Note \u76ee\u524d\u4ec5 NebulaGraph Java \u5ba2\u6237\u7aef\u652f\u6301\u7ebf\u7a0b\u5b89\u5168\uff08thread-safe\uff09\u3002 Caution \u4ee5\u4e0b\u5ba2\u6237\u7aef\u5de5\u5177\u4e5f\u53ef\u7528\u4e8e\u8fde\u63a5\u548c\u7ba1\u7406NebulaGraph\u3002\u4ed6\u4eec\u7531\u975e\u5e38\u9177\u7684\u793e\u533a\u7528\u6237\u63d0\u4f9b\u548c\u7ef4\u62a4\uff0c\u6b22\u8fce\u5927\u5bb6\u53c2\u4e0e\u6d4b\u8bd5\u548c\u8d21\u732e\u3002 NebulaGraph PHP NebulaGraph Node NebulaGraph .net NebulaGraph JDBC NebulaGraph Carina\uff08Python ORM\uff09 NORM\uff08Golang ORM\uff09 Graph-Ocean\uff08Java ORM\uff09 NebulaGraph Ngbatis\uff08MyBatis \u98ce\u683c\u7684 Java ORM\uff09","title":"\u5ba2\u6237\u7aef\u4ecb\u7ecd"},{"location":"14.client/3.nebula-cpp-client/","text":"NebulaGraph CPP \u00b6 NebulaGraph CPP \u662f\u4e00\u6b3e C++ \u8bed\u8a00\u7684\u5ba2\u6237\u7aef\uff0c\u53ef\u4ee5\u8fde\u63a5\u3001\u7ba1\u7406NebulaGraph\u56fe\u6570\u636e\u5e93\u3002 \u4f7f\u7528\u9650\u5236 \u00b6 \u8bf7\u786e\u4fdd\u5df2\u5b89\u88c5 C++ \u4e14 GCC \u7248\u672c\u4e3a 4.8 \u53ca\u4ee5\u4e0a\u3002 \u7248\u672c\u5bf9\u7167\u8868 \u00b6 \u53c2\u89c1 Github \u3002 \u5b89\u88c5 NebulaGraph CPP \u00b6 \u672c\u6587\u4ecb\u7ecd\u901a\u8fc7\u7f16\u8bd1\u65b9\u5f0f\u5b89\u88c5 NebulaGraph CPP\u3002 \u524d\u63d0\u6761\u4ef6 \u00b6 \u51c6\u5907\u6b63\u786e\u7684\u7f16\u8bd1\u73af\u5883\uff0c\u8be6\u60c5\u8bf7\u53c2\u89c1 \u8f6f\u786c\u4ef6\u8981\u6c42\u548c\u5b89\u88c5\u4e09\u65b9\u5e93\u4f9d\u8d56\u5305 \u3002 \u786e\u4fdd\u5df2\u5b89\u88c5 C++ \u4e14 GCC \u7248\u672c\u4e3a\uff1a{10.1.0 | 9.3.0 | 9.2.0 | 9.1.0 | 8.3.0 | 7.5.0 | 7.1.0}\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1 gcc_preset_versions \u53c2\u6570 \u3002 \u5b89\u88c5\u6b65\u9aa4 \u00b6 \u514b\u9686 NebulaGraph CPP \u6e90\u7801\u5230\u673a\u5668\u3002 \uff08\u63a8\u8350\uff09\u5982\u679c\u9700\u8981\u5b89\u88c5\u6307\u5b9a\u7248\u672c\u7684 NebulaGraph CPP\uff0c\u8bf7\u4f7f\u7528\u9009\u9879 --branch \u6307\u5b9a\u5206\u652f\u3002\u4f8b\u5982\u5b89\u88c5 v3.4.0\u53d1\u5e03\u7248\u672c\uff0c\u8bf7\u6267\u884c\u5982\u4e0b\u547d\u4ee4\uff1a $ git clone --branch release-3.4 https://github.com/vesoft-inc/nebula-cpp.git \u5982\u679c\u9700\u8981\u5b89\u88c5\u65e5\u5e38\u5f00\u53d1\u7248\u672c\uff0c\u8bf7\u6267\u884c\u5982\u4e0b\u547d\u4ee4\u4e0b\u8f7d master \u5206\u652f\u7684\u6e90\u7801\uff1a $ git clone https://github.com/vesoft-inc/nebula-cpp.git \u8fdb\u5165\u76ee\u5f55 nebula-cpp\u3002 $ cd nebula-cpp \u521b\u5efa\u76ee\u5f55 build \u5e76\u8fdb\u5165\u8be5\u76ee\u5f55\u3002 $ mkdir build && cd build \u4f7f\u7528 CMake \u751f\u6210 makefile \u6587\u4ef6\u3002 Note \u9ed8\u8ba4\u5b89\u88c5\u8def\u5f84\u4e3a /usr/local/nebula \uff0c\u5982\u679c\u9700\u8981\u4fee\u6539\u8def\u5f84\uff0c\u8bf7\u5728\u4e0b\u65b9\u547d\u4ee4\u5185\u589e\u52a0\u53c2\u6570 -DCMAKE_INSTALL_PREFIX=<installation_path> \u3002 $ cmake -DCMAKE_BUILD_TYPE = Release .. Note \u5982\u679c g++ \u4e0d\u652f\u6301 C++11\uff0c\u8bf7\u6dfb\u52a0\u9009\u9879 -DDISABLE_CXX11_ABI=ON \u3002 \u7f16\u8bd1 NebulaGraph CPP\u3002 \u4e3a\u4e86\u9002\u5f53\u5730\u52a0\u5feb\u7f16\u8bd1\u901f\u5ea6\uff0c\u53ef\u4ee5\u4f7f\u7528\u9009\u9879 -j \u5e76\u884c\u7f16\u8bd1\u3002\u5e76\u884c\u6570\u91cf N \u5efa\u8bae\u4e3a \\(\\min(\\text{CPU}\u6838\u6570\uff0c\\frac{\u5185\u5b58 (GB)}{2})\\) \u3002 $ make -j { N } \u5b89\u88c5 NebulaGraph CPP\u3002 $ sudo make install \u66f4\u65b0\u52a8\u6001\u94fe\u63a5\u5e93\u3002 $ sudo ldconfig \u4f7f\u7528\u65b9\u6cd5 \u00b6 \u5c06 CPP \u6587\u4ef6\u7f16\u8bd1\u4e3a\u53ef\u6267\u884c\u6587\u4ef6\u5373\u53ef\u3002\u63a5\u4e0b\u6765\u4ee5 SessionExample.cpp \u4e3a\u4f8b\uff0c\u4ecb\u7ecd\u5982\u4f55\u64cd\u4f5c\u3002 \u4f7f\u7528 \u793a\u4f8b\u4ee3\u7801 \u521b\u5efa SessionExample.cpp \u6587\u4ef6\u3002 \u7f16\u8bd1\u6587\u4ef6\uff0c\u547d\u4ee4\u5982\u4e0b\uff1a $ LIBRARY_PATH = <library_folder_path>: $LIBRARY_PATH g++ -std = c++11 SessionExample.cpp -I<include_folder_path> -lnebula_graph_client -o session_example library_folder_path \uff1aNebulaGraph\u52a8\u6001\u5e93\u6587\u4ef6\u5b58\u50a8\u8def\u5f84\uff0c\u9ed8\u8ba4\u4e3a /usr/local/nebula/lib64 \u3002 include_folder_path \uff1aNebulaGraph\u5934\u6587\u4ef6\u5b58\u50a8\u8def\u5f84\uff0c\u9ed8\u8ba4\u4e3a /usr/local/nebula/include \u3002 \u793a\u4f8b\uff1a $ LIBRARY_PATH = /usr/local/nebula/lib64: $LIBRARY_PATH g++ -std = c++11 SessionExample.cpp -I/usr/local/nebula/include -lnebula_graph_client -o session_example \u6838\u5fc3\u4ee3\u7801 \u00b6 NebulaGraph CPP \u5ba2\u6237\u7aef\u63d0\u4f9b Session Pool \u548c Connection Pool \u4e24\u79cd\u65b9\u5f0f\u8fde\u63a5NebulaGraph\u3002\u4f7f\u7528 Connection Pool \u9700\u8981\u7528\u6237\u81ea\u884c\u7ba1\u7406 Session \u5b9e\u4f8b\u3002 Session Pool \u8be6\u7ec6\u793a\u4f8b\u8bf7\u53c2\u89c1 SessionPoolExample \u3002 Connection Pool \u8be6\u7ec6\u793a\u4f8b\u8bf7\u53c2\u89c1 SessionExample \u3002","title":"NebulaGraph CPP"},{"location":"14.client/3.nebula-cpp-client/#nebulagraph_cpp","text":"NebulaGraph CPP \u662f\u4e00\u6b3e C++ \u8bed\u8a00\u7684\u5ba2\u6237\u7aef\uff0c\u53ef\u4ee5\u8fde\u63a5\u3001\u7ba1\u7406NebulaGraph\u56fe\u6570\u636e\u5e93\u3002","title":"NebulaGraph CPP"},{"location":"14.client/3.nebula-cpp-client/#_1","text":"\u8bf7\u786e\u4fdd\u5df2\u5b89\u88c5 C++ \u4e14 GCC \u7248\u672c\u4e3a 4.8 \u53ca\u4ee5\u4e0a\u3002","title":"\u4f7f\u7528\u9650\u5236"},{"location":"14.client/3.nebula-cpp-client/#_2","text":"\u53c2\u89c1 Github \u3002","title":"\u7248\u672c\u5bf9\u7167\u8868"},{"location":"14.client/3.nebula-cpp-client/#nebulagraph_cpp_1","text":"\u672c\u6587\u4ecb\u7ecd\u901a\u8fc7\u7f16\u8bd1\u65b9\u5f0f\u5b89\u88c5 NebulaGraph CPP\u3002","title":"\u5b89\u88c5 NebulaGraph CPP"},{"location":"14.client/3.nebula-cpp-client/#_3","text":"\u51c6\u5907\u6b63\u786e\u7684\u7f16\u8bd1\u73af\u5883\uff0c\u8be6\u60c5\u8bf7\u53c2\u89c1 \u8f6f\u786c\u4ef6\u8981\u6c42\u548c\u5b89\u88c5\u4e09\u65b9\u5e93\u4f9d\u8d56\u5305 \u3002 \u786e\u4fdd\u5df2\u5b89\u88c5 C++ \u4e14 GCC \u7248\u672c\u4e3a\uff1a{10.1.0 | 9.3.0 | 9.2.0 | 9.1.0 | 8.3.0 | 7.5.0 | 7.1.0}\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1 gcc_preset_versions \u53c2\u6570 \u3002","title":"\u524d\u63d0\u6761\u4ef6"},{"location":"14.client/3.nebula-cpp-client/#_4","text":"\u514b\u9686 NebulaGraph CPP \u6e90\u7801\u5230\u673a\u5668\u3002 \uff08\u63a8\u8350\uff09\u5982\u679c\u9700\u8981\u5b89\u88c5\u6307\u5b9a\u7248\u672c\u7684 NebulaGraph CPP\uff0c\u8bf7\u4f7f\u7528\u9009\u9879 --branch \u6307\u5b9a\u5206\u652f\u3002\u4f8b\u5982\u5b89\u88c5 v3.4.0\u53d1\u5e03\u7248\u672c\uff0c\u8bf7\u6267\u884c\u5982\u4e0b\u547d\u4ee4\uff1a $ git clone --branch release-3.4 https://github.com/vesoft-inc/nebula-cpp.git \u5982\u679c\u9700\u8981\u5b89\u88c5\u65e5\u5e38\u5f00\u53d1\u7248\u672c\uff0c\u8bf7\u6267\u884c\u5982\u4e0b\u547d\u4ee4\u4e0b\u8f7d master \u5206\u652f\u7684\u6e90\u7801\uff1a $ git clone https://github.com/vesoft-inc/nebula-cpp.git \u8fdb\u5165\u76ee\u5f55 nebula-cpp\u3002 $ cd nebula-cpp \u521b\u5efa\u76ee\u5f55 build \u5e76\u8fdb\u5165\u8be5\u76ee\u5f55\u3002 $ mkdir build && cd build \u4f7f\u7528 CMake \u751f\u6210 makefile \u6587\u4ef6\u3002 Note \u9ed8\u8ba4\u5b89\u88c5\u8def\u5f84\u4e3a /usr/local/nebula \uff0c\u5982\u679c\u9700\u8981\u4fee\u6539\u8def\u5f84\uff0c\u8bf7\u5728\u4e0b\u65b9\u547d\u4ee4\u5185\u589e\u52a0\u53c2\u6570 -DCMAKE_INSTALL_PREFIX=<installation_path> \u3002 $ cmake -DCMAKE_BUILD_TYPE = Release .. Note \u5982\u679c g++ \u4e0d\u652f\u6301 C++11\uff0c\u8bf7\u6dfb\u52a0\u9009\u9879 -DDISABLE_CXX11_ABI=ON \u3002 \u7f16\u8bd1 NebulaGraph CPP\u3002 \u4e3a\u4e86\u9002\u5f53\u5730\u52a0\u5feb\u7f16\u8bd1\u901f\u5ea6\uff0c\u53ef\u4ee5\u4f7f\u7528\u9009\u9879 -j \u5e76\u884c\u7f16\u8bd1\u3002\u5e76\u884c\u6570\u91cf N \u5efa\u8bae\u4e3a \\(\\min(\\text{CPU}\u6838\u6570\uff0c\\frac{\u5185\u5b58 (GB)}{2})\\) \u3002 $ make -j { N } \u5b89\u88c5 NebulaGraph CPP\u3002 $ sudo make install \u66f4\u65b0\u52a8\u6001\u94fe\u63a5\u5e93\u3002 $ sudo ldconfig","title":"\u5b89\u88c5\u6b65\u9aa4"},{"location":"14.client/3.nebula-cpp-client/#_5","text":"\u5c06 CPP \u6587\u4ef6\u7f16\u8bd1\u4e3a\u53ef\u6267\u884c\u6587\u4ef6\u5373\u53ef\u3002\u63a5\u4e0b\u6765\u4ee5 SessionExample.cpp \u4e3a\u4f8b\uff0c\u4ecb\u7ecd\u5982\u4f55\u64cd\u4f5c\u3002 \u4f7f\u7528 \u793a\u4f8b\u4ee3\u7801 \u521b\u5efa SessionExample.cpp \u6587\u4ef6\u3002 \u7f16\u8bd1\u6587\u4ef6\uff0c\u547d\u4ee4\u5982\u4e0b\uff1a $ LIBRARY_PATH = <library_folder_path>: $LIBRARY_PATH g++ -std = c++11 SessionExample.cpp -I<include_folder_path> -lnebula_graph_client -o session_example library_folder_path \uff1aNebulaGraph\u52a8\u6001\u5e93\u6587\u4ef6\u5b58\u50a8\u8def\u5f84\uff0c\u9ed8\u8ba4\u4e3a /usr/local/nebula/lib64 \u3002 include_folder_path \uff1aNebulaGraph\u5934\u6587\u4ef6\u5b58\u50a8\u8def\u5f84\uff0c\u9ed8\u8ba4\u4e3a /usr/local/nebula/include \u3002 \u793a\u4f8b\uff1a $ LIBRARY_PATH = /usr/local/nebula/lib64: $LIBRARY_PATH g++ -std = c++11 SessionExample.cpp -I/usr/local/nebula/include -lnebula_graph_client -o session_example","title":"\u4f7f\u7528\u65b9\u6cd5"},{"location":"14.client/3.nebula-cpp-client/#_6","text":"NebulaGraph CPP \u5ba2\u6237\u7aef\u63d0\u4f9b Session Pool \u548c Connection Pool \u4e24\u79cd\u65b9\u5f0f\u8fde\u63a5NebulaGraph\u3002\u4f7f\u7528 Connection Pool \u9700\u8981\u7528\u6237\u81ea\u884c\u7ba1\u7406 Session \u5b9e\u4f8b\u3002 Session Pool \u8be6\u7ec6\u793a\u4f8b\u8bf7\u53c2\u89c1 SessionPoolExample \u3002 Connection Pool \u8be6\u7ec6\u793a\u4f8b\u8bf7\u53c2\u89c1 SessionExample \u3002","title":"\u6838\u5fc3\u4ee3\u7801"},{"location":"14.client/4.nebula-java-client/","text":"NebulaGraph Java \u00b6 NebulaGraph Java \u662f\u4e00\u6b3e Java \u8bed\u8a00\u7684\u5ba2\u6237\u7aef\uff0c\u53ef\u4ee5\u8fde\u63a5\u3001\u7ba1\u7406NebulaGraph\u56fe\u6570\u636e\u5e93\u3002 \u524d\u63d0\u6761\u4ef6 \u00b6 \u5df2\u5b89\u88c5 Java\uff0c\u7248\u672c\u4e3a 8.0 \u53ca\u4ee5\u4e0a\u3002 \u7248\u672c\u5bf9\u7167\u8868 \u00b6 \u53c2\u89c1 Github \u3002 \u4e0b\u8f7d NebulaGraph Java \u00b6 \uff08\u63a8\u8350\uff09\u5982\u679c\u9700\u8981\u4f7f\u7528\u6307\u5b9a\u7248\u672c\u7684 NebulaGraph Java\uff0c\u8bf7\u4f7f\u7528\u9009\u9879 --branch \u6307\u5b9a\u5206\u652f\u3002\u4f8b\u5982\u4f7f\u7528 v3.6.1\u53d1\u5e03\u7248\u672c\uff0c\u8bf7\u6267\u884c\u5982\u4e0b\u547d\u4ee4\uff1a $ git clone --branch release-3.6 https://github.com/vesoft-inc/nebula-java.git \u5982\u679c\u9700\u8981\u5b89\u88c5\u65e5\u5e38\u5f00\u53d1\u7248\u672c\uff0c\u8bf7\u6267\u884c\u5982\u4e0b\u547d\u4ee4\u4e0b\u8f7d master \u5206\u652f\u7684\u6e90\u7801\uff1a $ git clone https://github.com/vesoft-inc/nebula-java.git \u4f7f\u7528\u65b9\u6cd5 \u00b6 Note \u5efa\u8bae\u4e00\u4e2a\u7ebf\u7a0b\u4f7f\u7528\u4e00\u4e2a\u4f1a\u8bdd\uff0c\u5982\u679c\u591a\u4e2a\u7ebf\u7a0b\u4f7f\u7528\u540c\u4e00\u4e2a\u4f1a\u8bdd\uff0c\u4f1a\u964d\u4f4e\u6548\u7387\u3002 \u4f7f\u7528 IDEA \u7b49\u5de5\u5177\u5bfc\u5165 Maven \u9879\u76ee\uff0c\u8bf7\u5728 pom.xml \u4e2d\u6dfb\u52a0\u5982\u4e0b\u4f9d\u8d56\uff1a Note 3.0.0-SNAPSHOT \u4e3a\u65e5\u5e38\u7814\u53d1\u7248\u672c\uff0c\u53ef\u80fd\u5b58\u5728\u672a\u77e5\u95ee\u9898\uff0c\u5efa\u8bae\u4f7f\u7528 release \u7248\u672c\u53f7\u66ff\u6362 3.0.0-SNAPSHOT \u3002 <dependency> <groupId>com.vesoft</groupId> <artifactId>client</artifactId> <version>3.0.0-SNAPSHOT</version> </dependency> \u5982\u679c\u65e0\u6cd5\u4e0b\u8f7d\u65e5\u5e38\u7814\u53d1\u7248\u672c\u7684\u4f9d\u8d56\uff0c\u8bf7\u5728 pom.xml \u4e2d\u6dfb\u52a0\u5982\u4e0b\u5185\u5bb9\uff08release \u7248\u672c\u4e0d\u9700\u8981\u6dfb\u52a0\uff09\uff1a <repositories> <repository> <id>snapshots</id> <url>https://oss.sonatype.org/content/repositories/snapshots/</url> </repository> </repositories> \u5982\u679c\u6ca1\u6709 Maven \u7ba1\u7406\u9879\u76ee\uff0c\u8bf7\u624b\u52a8 \u4e0b\u8f7d JAR \u5305 \u8fdb\u884c\u5b89\u88c5\u3002 \u6838\u5fc3\u4ee3\u7801 \u00b6 NebulaGraph Java \u5ba2\u6237\u7aef\u63d0\u4f9b Connection Pool \u548c Session Pool \u4e24\u79cd\u4f7f\u7528\u65b9\u5f0f\uff0c\u4f7f\u7528 Connection Pool \u9700\u8981\u7528\u6237\u81ea\u884c\u7ba1\u7406 Session \u5b9e\u4f8b\u3002 Session Pool \u8be6\u7ec6\u793a\u4f8b\u8bf7\u53c2\u89c1 GraphSessionPoolExample \u3002 Connection Pool \u8be6\u7ec6\u793a\u4f8b\u8bf7\u53c2\u89c1 GraphClientExample \u3002 Java \u76f8\u5173\u5e93 \u00b6 \u4ee5\u4e0b\u7531\u975e\u5e38\u9177\u7684\u793e\u533a\u7528\u6237\u63d0\u4f9b\u548c\u7ef4\u62a4\uff0c\u6b22\u8fce\u5927\u5bb6\u53c2\u4e0e\u6d4b\u8bd5\u548c\u8d21\u732e\u3002 java-jdbc java-orm java-springboot demo ngbatis","title":"NebulaGraph Java"},{"location":"14.client/4.nebula-java-client/#nebulagraph_java","text":"NebulaGraph Java \u662f\u4e00\u6b3e Java \u8bed\u8a00\u7684\u5ba2\u6237\u7aef\uff0c\u53ef\u4ee5\u8fde\u63a5\u3001\u7ba1\u7406NebulaGraph\u56fe\u6570\u636e\u5e93\u3002","title":"NebulaGraph Java"},{"location":"14.client/4.nebula-java-client/#_1","text":"\u5df2\u5b89\u88c5 Java\uff0c\u7248\u672c\u4e3a 8.0 \u53ca\u4ee5\u4e0a\u3002","title":"\u524d\u63d0\u6761\u4ef6"},{"location":"14.client/4.nebula-java-client/#_2","text":"\u53c2\u89c1 Github \u3002","title":"\u7248\u672c\u5bf9\u7167\u8868"},{"location":"14.client/4.nebula-java-client/#nebulagraph_java_1","text":"\uff08\u63a8\u8350\uff09\u5982\u679c\u9700\u8981\u4f7f\u7528\u6307\u5b9a\u7248\u672c\u7684 NebulaGraph Java\uff0c\u8bf7\u4f7f\u7528\u9009\u9879 --branch \u6307\u5b9a\u5206\u652f\u3002\u4f8b\u5982\u4f7f\u7528 v3.6.1\u53d1\u5e03\u7248\u672c\uff0c\u8bf7\u6267\u884c\u5982\u4e0b\u547d\u4ee4\uff1a $ git clone --branch release-3.6 https://github.com/vesoft-inc/nebula-java.git \u5982\u679c\u9700\u8981\u5b89\u88c5\u65e5\u5e38\u5f00\u53d1\u7248\u672c\uff0c\u8bf7\u6267\u884c\u5982\u4e0b\u547d\u4ee4\u4e0b\u8f7d master \u5206\u652f\u7684\u6e90\u7801\uff1a $ git clone https://github.com/vesoft-inc/nebula-java.git","title":"\u4e0b\u8f7d NebulaGraph Java"},{"location":"14.client/4.nebula-java-client/#_3","text":"Note \u5efa\u8bae\u4e00\u4e2a\u7ebf\u7a0b\u4f7f\u7528\u4e00\u4e2a\u4f1a\u8bdd\uff0c\u5982\u679c\u591a\u4e2a\u7ebf\u7a0b\u4f7f\u7528\u540c\u4e00\u4e2a\u4f1a\u8bdd\uff0c\u4f1a\u964d\u4f4e\u6548\u7387\u3002 \u4f7f\u7528 IDEA \u7b49\u5de5\u5177\u5bfc\u5165 Maven \u9879\u76ee\uff0c\u8bf7\u5728 pom.xml \u4e2d\u6dfb\u52a0\u5982\u4e0b\u4f9d\u8d56\uff1a Note 3.0.0-SNAPSHOT \u4e3a\u65e5\u5e38\u7814\u53d1\u7248\u672c\uff0c\u53ef\u80fd\u5b58\u5728\u672a\u77e5\u95ee\u9898\uff0c\u5efa\u8bae\u4f7f\u7528 release \u7248\u672c\u53f7\u66ff\u6362 3.0.0-SNAPSHOT \u3002 <dependency> <groupId>com.vesoft</groupId> <artifactId>client</artifactId> <version>3.0.0-SNAPSHOT</version> </dependency> \u5982\u679c\u65e0\u6cd5\u4e0b\u8f7d\u65e5\u5e38\u7814\u53d1\u7248\u672c\u7684\u4f9d\u8d56\uff0c\u8bf7\u5728 pom.xml \u4e2d\u6dfb\u52a0\u5982\u4e0b\u5185\u5bb9\uff08release \u7248\u672c\u4e0d\u9700\u8981\u6dfb\u52a0\uff09\uff1a <repositories> <repository> <id>snapshots</id> <url>https://oss.sonatype.org/content/repositories/snapshots/</url> </repository> </repositories> \u5982\u679c\u6ca1\u6709 Maven \u7ba1\u7406\u9879\u76ee\uff0c\u8bf7\u624b\u52a8 \u4e0b\u8f7d JAR \u5305 \u8fdb\u884c\u5b89\u88c5\u3002","title":"\u4f7f\u7528\u65b9\u6cd5"},{"location":"14.client/4.nebula-java-client/#_4","text":"NebulaGraph Java \u5ba2\u6237\u7aef\u63d0\u4f9b Connection Pool \u548c Session Pool \u4e24\u79cd\u4f7f\u7528\u65b9\u5f0f\uff0c\u4f7f\u7528 Connection Pool \u9700\u8981\u7528\u6237\u81ea\u884c\u7ba1\u7406 Session \u5b9e\u4f8b\u3002 Session Pool \u8be6\u7ec6\u793a\u4f8b\u8bf7\u53c2\u89c1 GraphSessionPoolExample \u3002 Connection Pool \u8be6\u7ec6\u793a\u4f8b\u8bf7\u53c2\u89c1 GraphClientExample \u3002","title":"\u6838\u5fc3\u4ee3\u7801"},{"location":"14.client/4.nebula-java-client/#java","text":"\u4ee5\u4e0b\u7531\u975e\u5e38\u9177\u7684\u793e\u533a\u7528\u6237\u63d0\u4f9b\u548c\u7ef4\u62a4\uff0c\u6b22\u8fce\u5927\u5bb6\u53c2\u4e0e\u6d4b\u8bd5\u548c\u8d21\u732e\u3002 java-jdbc java-orm java-springboot demo ngbatis","title":"Java \u76f8\u5173\u5e93"},{"location":"14.client/5.nebula-python-client/","text":"NebulaGraph Python \u00b6 NebulaGraph Python \u662f\u4e00\u6b3e Python \u8bed\u8a00\u7684\u5ba2\u6237\u7aef\uff0c\u53ef\u4ee5\u8fde\u63a5\u3001\u7ba1\u7406NebulaGraph\u56fe\u6570\u636e\u5e93\u3002 \u524d\u63d0\u6761\u4ef6 \u00b6 \u5df2\u5b89\u88c5 Python\uff0c\u7248\u672c\u4e3a 3.6 \u53ca\u4ee5\u4e0a\u3002 \u7248\u672c\u5bf9\u7167\u8868 \u00b6 \u53c2\u89c1 Github \u3002 \u5b89\u88c5 NebulaGraph Python \u00b6 pip \u5b89\u88c5 \u00b6 $ pip install nebula3-python == <version> \u514b\u9686\u6e90\u7801\u5b89\u88c5 \u00b6 \u514b\u9686 NebulaGraph Python \u6e90\u7801\u5230\u673a\u5668\u3002 \uff08\u63a8\u8350\uff09\u5982\u679c\u9700\u8981\u5b89\u88c5\u6307\u5b9a\u7248\u672c\u7684 NebulaGraph Python\uff0c\u8bf7\u4f7f\u7528\u9009\u9879 --branch \u6307\u5b9a\u5206\u652f\u3002\u4f8b\u5982\u5b89\u88c5 v3.4.0\u53d1\u5e03\u7248\u672c\uff0c\u8bf7\u6267\u884c\u5982\u4e0b\u547d\u4ee4\uff1a $ git clone --branch release-3.4 https://github.com/vesoft-inc/nebula-python.git \u5982\u679c\u9700\u8981\u5b89\u88c5\u65e5\u5e38\u5f00\u53d1\u7248\u672c\uff0c\u8bf7\u6267\u884c\u5982\u4e0b\u547d\u4ee4\u4e0b\u8f7d master \u5206\u652f\u7684\u6e90\u7801\uff1a $ git clone https://github.com/vesoft-inc/nebula-python.git \u8fdb\u5165\u76ee\u5f55 nebula-python\u3002 $ cd nebula-python \u6267\u884c\u5982\u4e0b\u547d\u4ee4\u5b89\u88c5\u3002 $ pip install . \u6838\u5fc3\u4ee3\u7801 \u00b6 NebulaGraph Python \u5ba2\u6237\u7aef\u63d0\u4f9b Connection Pool \u548c Session Pool \u4e24\u79cd\u4f7f\u7528\u65b9\u5f0f\uff0c\u4f7f\u7528 Connection Pool \u9700\u8981\u7528\u6237\u81ea\u884c\u7ba1\u7406 Session \u5b9e\u4f8b\u3002 Session Pool \u8be6\u7ec6\u793a\u4f8b\u8bf7\u53c2\u89c1 SessinPoolExample.py \u3002 \u4f7f\u7528\u9650\u5236\u8bf7\u53c2\u89c1 Example of using session pool \u3002 Connection Pool \u8be6\u7ec6\u793a\u4f8b\u8bf7\u53c2\u89c1 Example \u3002","title":"NebulaGraph Python"},{"location":"14.client/5.nebula-python-client/#nebulagraph_python","text":"NebulaGraph Python \u662f\u4e00\u6b3e Python \u8bed\u8a00\u7684\u5ba2\u6237\u7aef\uff0c\u53ef\u4ee5\u8fde\u63a5\u3001\u7ba1\u7406NebulaGraph\u56fe\u6570\u636e\u5e93\u3002","title":"NebulaGraph Python"},{"location":"14.client/5.nebula-python-client/#_1","text":"\u5df2\u5b89\u88c5 Python\uff0c\u7248\u672c\u4e3a 3.6 \u53ca\u4ee5\u4e0a\u3002","title":"\u524d\u63d0\u6761\u4ef6"},{"location":"14.client/5.nebula-python-client/#_2","text":"\u53c2\u89c1 Github \u3002","title":"\u7248\u672c\u5bf9\u7167\u8868"},{"location":"14.client/5.nebula-python-client/#nebulagraph_python_1","text":"","title":"\u5b89\u88c5 NebulaGraph Python"},{"location":"14.client/5.nebula-python-client/#pip","text":"$ pip install nebula3-python == <version>","title":"pip \u5b89\u88c5"},{"location":"14.client/5.nebula-python-client/#_3","text":"\u514b\u9686 NebulaGraph Python \u6e90\u7801\u5230\u673a\u5668\u3002 \uff08\u63a8\u8350\uff09\u5982\u679c\u9700\u8981\u5b89\u88c5\u6307\u5b9a\u7248\u672c\u7684 NebulaGraph Python\uff0c\u8bf7\u4f7f\u7528\u9009\u9879 --branch \u6307\u5b9a\u5206\u652f\u3002\u4f8b\u5982\u5b89\u88c5 v3.4.0\u53d1\u5e03\u7248\u672c\uff0c\u8bf7\u6267\u884c\u5982\u4e0b\u547d\u4ee4\uff1a $ git clone --branch release-3.4 https://github.com/vesoft-inc/nebula-python.git \u5982\u679c\u9700\u8981\u5b89\u88c5\u65e5\u5e38\u5f00\u53d1\u7248\u672c\uff0c\u8bf7\u6267\u884c\u5982\u4e0b\u547d\u4ee4\u4e0b\u8f7d master \u5206\u652f\u7684\u6e90\u7801\uff1a $ git clone https://github.com/vesoft-inc/nebula-python.git \u8fdb\u5165\u76ee\u5f55 nebula-python\u3002 $ cd nebula-python \u6267\u884c\u5982\u4e0b\u547d\u4ee4\u5b89\u88c5\u3002 $ pip install .","title":"\u514b\u9686\u6e90\u7801\u5b89\u88c5"},{"location":"14.client/5.nebula-python-client/#_4","text":"NebulaGraph Python \u5ba2\u6237\u7aef\u63d0\u4f9b Connection Pool \u548c Session Pool \u4e24\u79cd\u4f7f\u7528\u65b9\u5f0f\uff0c\u4f7f\u7528 Connection Pool \u9700\u8981\u7528\u6237\u81ea\u884c\u7ba1\u7406 Session \u5b9e\u4f8b\u3002 Session Pool \u8be6\u7ec6\u793a\u4f8b\u8bf7\u53c2\u89c1 SessinPoolExample.py \u3002 \u4f7f\u7528\u9650\u5236\u8bf7\u53c2\u89c1 Example of using session pool \u3002 Connection Pool \u8be6\u7ec6\u793a\u4f8b\u8bf7\u53c2\u89c1 Example \u3002","title":"\u6838\u5fc3\u4ee3\u7801"},{"location":"14.client/6.nebula-go-client/","text":"NebulaGraph Go \u00b6 NebulaGraph Go \u662f\u4e00\u6b3e Go \u8bed\u8a00\u7684\u5ba2\u6237\u7aef\uff0c\u53ef\u4ee5\u8fde\u63a5\u3001\u7ba1\u7406NebulaGraph\u56fe\u6570\u636e\u5e93\u3002 \u524d\u63d0\u6761\u4ef6 \u00b6 \u5df2\u5b89\u88c5 Go\uff0c\u7248\u672c\u4e3a 1.13 \u53ca\u4ee5\u4e0a\u3002 \u7248\u672c\u5bf9\u7167\u8868 \u00b6 \u53c2\u89c1 Github \u3002 \u4e0b\u8f7d NebulaGraph Go \u00b6 \uff08\u63a8\u8350\uff09\u5982\u679c\u9700\u8981\u4e0b\u8f7d\u6307\u5b9a\u7248\u672c\u7684 NebulaGraph Go\uff0c\u8bf7\u4f7f\u7528\u9009\u9879 --branch \u6307\u5b9a\u5206\u652f\u3002\u4f8b\u5982\u5b89\u88c5 v3.6.1\u53d1\u5e03\u7248\u672c\uff0c\u8bf7\u6267\u884c\u5982\u4e0b\u547d\u4ee4\uff1a $ git clone --branch release-3.6 https://github.com/vesoft-inc/nebula-go.git \u5982\u679c\u9700\u8981\u5b89\u88c5\u65e5\u5e38\u5f00\u53d1\u7248\u672c\uff0c\u8bf7\u6267\u884c\u5982\u4e0b\u547d\u4ee4\u4e0b\u8f7d master \u5206\u652f\u7684\u6e90\u7801\uff1a $ git clone https://github.com/vesoft-inc/nebula-go.git \u5b89\u88c5\u6216\u66f4\u65b0 \u00b6 \u5b89\u88c5\u6216\u66f4\u65b0\u7684\u547d\u4ee4\u5982\u4e0b\uff1a $ go get -u -v github.com/vesoft-inc/nebula-go@<tag> tag \uff1a\u6307\u5b9a\u5206\u652f\u3002\u4f8b\u5982 master \u6216 release-3.6 \u3002 \u6838\u5fc3\u4ee3\u7801 \u00b6 NebulaGraph GO \u5ba2\u6237\u7aef\u63d0\u4f9b Connection Pool \u548c Session Pool \u4e24\u79cd\u4f7f\u7528\u65b9\u5f0f\uff0c\u4f7f\u7528 Connection Pool \u9700\u8981\u7528\u6237\u81ea\u884c\u7ba1\u7406 Session \u5b9e\u4f8b\u3002 Session Pool \u8be6\u7ec6\u793a\u4f8b\u8bf7\u53c2\u89c1 session_pool_example.go \u3002 \u4f7f\u7528\u9650\u5236\u8bf7\u53c2\u89c1 Usage example \u3002 Connection Pool \u8be6\u7ec6\u793a\u4f8b\u8bf7\u53c2\u89c1 graph_client_basic_example \u548c graph_client_goroutines_example \u3002","title":"NebulaGraph Go"},{"location":"14.client/6.nebula-go-client/#nebulagraph_go","text":"NebulaGraph Go \u662f\u4e00\u6b3e Go \u8bed\u8a00\u7684\u5ba2\u6237\u7aef\uff0c\u53ef\u4ee5\u8fde\u63a5\u3001\u7ba1\u7406NebulaGraph\u56fe\u6570\u636e\u5e93\u3002","title":"NebulaGraph Go"},{"location":"14.client/6.nebula-go-client/#_1","text":"\u5df2\u5b89\u88c5 Go\uff0c\u7248\u672c\u4e3a 1.13 \u53ca\u4ee5\u4e0a\u3002","title":"\u524d\u63d0\u6761\u4ef6"},{"location":"14.client/6.nebula-go-client/#_2","text":"\u53c2\u89c1 Github \u3002","title":"\u7248\u672c\u5bf9\u7167\u8868"},{"location":"14.client/6.nebula-go-client/#nebulagraph_go_1","text":"\uff08\u63a8\u8350\uff09\u5982\u679c\u9700\u8981\u4e0b\u8f7d\u6307\u5b9a\u7248\u672c\u7684 NebulaGraph Go\uff0c\u8bf7\u4f7f\u7528\u9009\u9879 --branch \u6307\u5b9a\u5206\u652f\u3002\u4f8b\u5982\u5b89\u88c5 v3.6.1\u53d1\u5e03\u7248\u672c\uff0c\u8bf7\u6267\u884c\u5982\u4e0b\u547d\u4ee4\uff1a $ git clone --branch release-3.6 https://github.com/vesoft-inc/nebula-go.git \u5982\u679c\u9700\u8981\u5b89\u88c5\u65e5\u5e38\u5f00\u53d1\u7248\u672c\uff0c\u8bf7\u6267\u884c\u5982\u4e0b\u547d\u4ee4\u4e0b\u8f7d master \u5206\u652f\u7684\u6e90\u7801\uff1a $ git clone https://github.com/vesoft-inc/nebula-go.git","title":"\u4e0b\u8f7d NebulaGraph Go"},{"location":"14.client/6.nebula-go-client/#_3","text":"\u5b89\u88c5\u6216\u66f4\u65b0\u7684\u547d\u4ee4\u5982\u4e0b\uff1a $ go get -u -v github.com/vesoft-inc/nebula-go@<tag> tag \uff1a\u6307\u5b9a\u5206\u652f\u3002\u4f8b\u5982 master \u6216 release-3.6 \u3002","title":"\u5b89\u88c5\u6216\u66f4\u65b0"},{"location":"14.client/6.nebula-go-client/#_4","text":"NebulaGraph GO \u5ba2\u6237\u7aef\u63d0\u4f9b Connection Pool \u548c Session Pool \u4e24\u79cd\u4f7f\u7528\u65b9\u5f0f\uff0c\u4f7f\u7528 Connection Pool \u9700\u8981\u7528\u6237\u81ea\u884c\u7ba1\u7406 Session \u5b9e\u4f8b\u3002 Session Pool \u8be6\u7ec6\u793a\u4f8b\u8bf7\u53c2\u89c1 session_pool_example.go \u3002 \u4f7f\u7528\u9650\u5236\u8bf7\u53c2\u89c1 Usage example \u3002 Connection Pool \u8be6\u7ec6\u793a\u4f8b\u8bf7\u53c2\u89c1 graph_client_basic_example \u548c graph_client_goroutines_example \u3002","title":"\u6838\u5fc3\u4ee3\u7801"},{"location":"15.contribution/how-to-contribute/","text":"\u5982\u4f55\u8d21\u732e\u4ee3\u7801\u548c\u6587\u6863 \u00b6 \u5f00\u59cb\u4e4b\u524d \u00b6 GitHub \u6216\u793e\u533a\u63d0\u4ea4\u95ee\u9898 \u00b6 \u6b22\u8fce\u4e3a\u9879\u76ee\u8d21\u732e\u4efb\u4f55\u4ee3\u7801\u6216\u6587\u6863\uff0c\u4f46\u662f\u5efa\u8bae\u5148\u5728 GitHub \u6216 \u793e\u533a \u4e0a\u63d0\u4ea4\u4e00\u4e2a\u95ee\u9898\uff0c\u548c\u5927\u5bb6\u5171\u540c\u8ba8\u8bba\u3002 \u7b7e\u7f72\u8d21\u732e\u8005\u8bb8\u53ef\u534f\u8bae\uff08CLA\uff09 \u00b6 \u4ec0\u4e48\u662f CLA \uff1f \u7b7e\u7f72\u534f\u8bae\u94fe\u63a5\uff1a vesoft inc. Contributor License Agreement \u5355\u51fb\u6309\u94ae Sign in with GitHub to agree \u7b7e\u7f72\u534f\u8bae\u3002 \u5982\u679c\u6709\u4efb\u4f55\u95ee\u9898\uff0c\u8bf7\u53d1\u9001\u90ae\u4ef6\u81f3 info@vesoft.com \u3002 \u4fee\u6539\u5355\u7bc7\u6587\u6863 \u00b6 NebulaGraph\u6587\u6863\u4ee5 Markdown \u8bed\u8a00\u7f16\u5199\u3002\u5355\u51fb\u6587\u6863\u6807\u9898\u53f3\u4fa7\u7684\u94c5\u7b14\u56fe\u6807\u5373\u53ef\u63d0\u4ea4\u4fee\u6539\u5efa\u8bae\u3002 \u8be5\u65b9\u6cd5\u4ec5\u9002\u7528\u4e8e\u4fee\u6539\u5355\u7bc7\u6587\u6863\u3002 \u6279\u91cf\u4fee\u6539\u6216\u65b0\u589e\u6587\u4ef6 \u00b6 \u8be5\u65b9\u6cd5\u9002\u7528\u4e8e\u8d21\u732e\u4ee3\u7801\u3001\u6279\u91cf\u4fee\u6539\u591a\u7bc7\u6587\u6863\u6216\u8005\u65b0\u589e\u6587\u6863\u3002 Step 1\uff1a\u901a\u8fc7 GitHub fork \u4ed3\u5e93 \u00b6 NebulaGraph\u9879\u76ee\u6709\u5f88\u591a \u4ed3\u5e93 \uff0c\u4ee5 NebulaGraph\u4ed3\u5e93 \u4e3a\u4f8b\uff1a \u8bbf\u95ee github.com/vesoft-inc/nebula \u3002 \u5728\u53f3\u4e0a\u89d2\u5355\u51fb\u6309\u94ae Fork \uff0c\u7136\u540e\u5355\u51fb\u7528\u6237\u540d\uff0c\u5373\u53ef fork \u51faNebulaGraph\u4ed3\u5e93\u3002 Step 2\uff1a\u5c06\u5206\u652f\u514b\u9686\u5230\u672c\u5730 \u00b6 \u5b9a\u4e49\u672c\u5730\u5de5\u4f5c\u76ee\u5f55\u3002 # \u5b9a\u4e49\u5de5\u4f5c\u76ee\u5f55\u3002 working_dir = $HOME /Workspace \u5c06 user \u8bbe\u7f6e\u4e3a GitHub \u7684\u7528\u6237\u540d\u3002 user ={ GitHub \u7528\u6237\u540d } \u514b\u9686\u4ee3\u7801\u3002 mkdir -p $working_dir cd $working_dir git clone https://github.com/ $user /nebula.git # \u6216\uff1agit clone git@github.com:$user/nebula.git cd $working_dir /nebula git remote add upstream https://github.com/vesoft-inc/nebula.git # \u6216\uff1agit remote add upstream git@github.com:vesoft-inc/nebula.git # \u7531\u4e8e\u6ca1\u6709\u5199\u8bbf\u95ee\u6743\u9650\uff0c\u8bf7\u52ff\u63a8\u9001\u81f3\u4e0a\u6e38\u4e3b\u5206\u652f\u3002 git remote set-url --push upstream no_push # \u786e\u8ba4\u8fdc\u7a0b\u5206\u652f\u6709\u6548\u3002 # \u6b63\u786e\u7684\u683c\u5f0f\u4e3a\uff1a # origin git@github.com:$(user)/nebula.git (fetch) # origin git@github.com:$(user)/nebula.git (push) # upstream https://github.com/vesoft-inc/nebula (fetch) # upstream no_push (push) git remote -v \uff08\u53ef\u9009\uff09\u5b9a\u4e49 pre-commit hook\u3002 \u8bf7\u5c06NebulaGraph\u7684 pre-commit hook \u8fde\u63a5\u5230 .git \u76ee\u5f55\u3002 hook \u5c06\u68c0\u67e5 commit\uff0c\u5305\u62ec\u683c\u5f0f\u3001\u6784\u5efa\u3001\u6587\u6863\u751f\u6210\u7b49\u3002 cd $working_dir /nebula/.git/hooks ln -s $working_dir /nebula/.linters/cpp/hooks/pre-commit.sh . pre-commit hook \u6709\u65f6\u5019\u53ef\u80fd\u65e0\u6cd5\u6b63\u5e38\u6267\u884c\uff0c\u7528\u6237\u5fc5\u987b\u624b\u52a8\u6267\u884c\u3002 cd $working_dir /nebula/.git/hooks chmod +x pre-commit Step 3\uff1a\u5206\u652f \u00b6 \u66f4\u65b0\u672c\u5730\u4e3b\u5206\u652f\u3002 cd $working_dir /nebula git fetch upstream git checkout master git rebase upstream/master \u4ece\u4e3b\u5206\u652f\u521b\u5efa\u5e76\u5207\u6362\u5206\u652f\uff1a git checkout -b myfeature Note \u7531\u4e8e\u4e00\u4e2a PR \u901a\u5e38\u5305\u542b\u591a\u4e2a commits\uff0c\u6700\u7ec8\u5408\u5165 upstream/master \u5206\u652f\u65f6\uff0c\u6211\u4eec\u4f1a\u5c06\u8fd9\u4e9b commits \u6324\u538b\uff08squash\uff09\u6210\u4e00\u4e2a commit \u8fdb\u884c\u5408\u5e76\u3002\u56e0\u6b64\u5f3a\u70c8\u5efa\u8bae\u521b\u5efa\u4e00\u4e2a\u72ec\u7acb\u7684\u5206\u652f\u8fdb\u884c\u66f4\u6539\uff0c\u8fd9\u6837\u5728\u5408\u5165\u65f6\u624d\u5bb9\u6613\u88ab\u6324\u538b\u3002\u5408\u5e76\u540e\uff0c\u8fd9\u4e2a\u5206\u652f\u53ef\u4ee5\u88ab\u4e22\u5f03\u3002\u5982\u679c\u672a\u521b\u5efa\u5355\u72ec\u7684\u5206\u652f\uff0c\u800c\u662f\u76f4\u63a5\u5c06 commits \u63d0\u4ea4\u81f3 origin/master\uff0c\u5728\u5408\u5165\u65f6\uff0c\u53ef\u80fd\u4f1a\u51fa\u73b0\u95ee\u9898\u3002 \u82e5\u672a\u521b\u5efa\u5355\u72ec\u7684\u5206\u652f\uff08\u6216\u662f origin/master \u5408\u5e76\u4e86\u5176\u4ed6\u7684\u5206\u652f\u7b49\uff09\uff0c\u5bfc\u81f4 origin/master \u548c upstream/master \u4e0d\u4e00\u81f4\u65f6\uff0c\u7528\u6237\u53ef\u4ee5\u4f7f\u7528 hard reset \u5f3a\u5236\u4e24\u8005\u8fdb\u884c\u4e00\u81f4\u3002\u4f8b\u5982\uff1a git fetch upstream git checkout master git reset --hard upstream/master git push --force origin master Step 4\uff1a\u5f00\u53d1 \u00b6 \u4ee3\u7801\u98ce\u683c NebulaGraph\u91c7\u7528 cpplint \u6765\u786e\u4fdd\u4ee3\u7801\u7b26\u5408 Google \u7684\u4ee3\u7801\u98ce\u683c\u6307\u5357\u3002\u68c0\u67e5\u5668\u5c06\u5728\u63d0\u4ea4\u4ee3\u7801\u4e4b\u524d\u6267\u884c\u3002 \u5355\u5143\u6d4b\u8bd5\u8981\u6c42 \u8bf7\u4e3a\u65b0\u529f\u80fd\u6216 Bug \u4fee\u590d\u6dfb\u52a0\u5355\u5143\u6d4b\u8bd5\u3002 \u6784\u5efa\u4ee3\u7801\u65f6\u5f00\u542f\u5355\u5143\u6d4b\u8bd5 \u8be6\u60c5\u8bf7\u53c2\u89c1 \u4f7f\u7528\u6e90\u7801\u5b89\u88c5NebulaGraph \u3002 Note \u8bf7\u786e\u4fdd\u5df2\u8bbe\u7f6e -DENABLE_TESTING = ON \u542f\u7528\u6784\u5efa\u5355\u5143\u6d4b\u8bd5\u3002 \u8fd0\u884c\u6240\u6709\u5355\u5143\u6d4b\u8bd5 \u5728 nebula \u6839\u76ee\u5f55\u6267\u884c\u5982\u4e0b\u547d\u4ee4\uff1a cd nebula/build ctest -j $( nproc ) Step 5\uff1a\u4fdd\u6301\u5206\u652f\u540c\u6b65 \u00b6 # \u5f53\u5904\u4e8e myfeature \u5206\u652f\u65f6\u3002 git fetch upstream git rebase upstream/master \u5728\u5176\u4ed6\u8d21\u732e\u8005\u5c06 PR \u5408\u5e76\u5230\u57fa\u7840\u5206\u652f\u4e4b\u540e\uff0c\u7528\u6237\u9700\u8981\u66f4\u65b0 head \u5206\u652f\u3002 Step 6\uff1aCommit \u00b6 \u63d0\u4ea4\u4ee3\u7801\u66f4\u6539\uff1a git commit -a \u7528\u6237\u53ef\u4ee5\u4f7f\u7528\u547d\u4ee4 --amend \u91cd\u65b0\u7f16\u8f91\u4e4b\u524d\u7684\u4ee3\u7801\u3002 Step 7\uff1aPush \u00b6 \u9700\u8981\u5ba1\u6838\u6216\u79bb\u7ebf\u5907\u4efd\u4ee3\u7801\u65f6\uff0c\u53ef\u4ee5\u5c06\u672c\u5730\u4ed3\u5e93\u521b\u5efa\u7684\u5206\u652f push \u5230 GitHub \u7684\u8fdc\u7a0b\u4ed3\u5e93\u3002 git push origin myfeature Step 8\uff1a\u521b\u5efa pull request \u00b6 \u8bbf\u95ee fork \u51fa\u7684\u4ed3\u5e93 https://github.com/$user/nebula \uff08\u66ff\u6362\u6b64\u5904\u7684\u7528\u6237\u540d $user )\u3002 \u5355\u51fb myfeature \u5206\u652f\u65c1\u7684\u6309\u94ae Compare & pull request \u3002 Step 9\uff1a\u4ee3\u7801\u5ba1\u67e5 \u00b6 pull request \u521b\u5efa\u540e\uff0c\u81f3\u5c11\u9700\u8981\u4e24\u4eba\u5ba1\u67e5\u3002\u5ba1\u67e5\u4eba\u5458\u5c06\u8fdb\u884c\u5f7b\u5e95\u7684\u4ee3\u7801\u5ba1\u67e5\uff0c\u4ee5\u786e\u4fdd\u53d8\u66f4\u6ee1\u8db3\u5b58\u50a8\u5e93\u7684\u8d21\u732e\u51c6\u5219\u548c\u5176\u4ed6\u8d28\u91cf\u6807\u51c6\u3002 \u6dfb\u52a0\u6d4b\u8bd5\u7528\u4f8b \u00b6 \u6dfb\u52a0\u6d4b\u8bd5\u7528\u4f8b\u7684\u65b9\u6cd5\u53c2\u89c1 How to add test cases \u3002 \u6350\u8d60\u9879\u76ee \u00b6 Step 1\uff1a\u786e\u8ba4\u9879\u76ee\u6350\u8d60 \u00b6 \u901a\u8fc7\u90ae\u4ef6\u3001\u5fae\u4fe1\u3001Slack \u7b49\u65b9\u5f0f\u8054\u7edcNebulaGraph\u5b98\u65b9\u4eba\u5458\uff0c\u786e\u8ba4\u6350\u8d60\u9879\u76ee\u4e00\u4e8b\u3002\u9879\u76ee\u5c06\u88ab\u6350\u8d60\u81f3 NebulaGraph Contrib \u7ec4\u7ec7\u4e0b\u3002 \u90ae\u4ef6\u5730\u5740\uff1ainfo@vesoft.com \u5fae\u4fe1\uff1aNebulaGraphbot Slack\uff1a Join Slack Step 2\uff1a\u83b7\u53d6\u9879\u76ee\u63a5\u6536\u4eba\u4fe1\u606f \u00b6 \u7531NebulaGraph\u5b98\u65b9\u4eba\u5458\u7ed9\u51faNebulaGraph Contrib \u7684\u9879\u76ee\u63a5\u6536\u8005 ID\u3002 Step 3\uff1a\u6350\u8d60\u9879\u76ee \u00b6 \u7531\u60a8\u5c06\u9879\u76ee\u8f6c\u79fb\u81f3\u672c\u6b21\u6350\u8d60\u7684\u9879\u76ee\u63a5\u53d7\u4eba\uff0c\u5e76\u7531\u9879\u76ee\u63a5\u6536\u8005\u5c06\u8be5\u9879\u76ee\u8f6c\u79fb\u81f3 NebulaGraph Contrib \u7ec4\u7ec7\u4e0b\u3002\u6350\u8d60\u540e\uff0c\u60a8\u5c06\u4ee5 Maintain \u89d2\u8272\u7ee7\u7eed\u4e3b\u5bfc\u793e\u533a\u9879\u76ee\u7684\u53d1\u5c55\u3002 GitHub \u4e0a\u8f6c\u79fb\u4ed3\u5e93\u7684\u64cd\u4f5c\uff0c\u8bf7\u53c2\u89c1 Transferring a repository owned by your user account \u3002","title":"\u793e\u533a\u53c2\u4e0e"},{"location":"15.contribution/how-to-contribute/#_1","text":"","title":"\u5982\u4f55\u8d21\u732e\u4ee3\u7801\u548c\u6587\u6863"},{"location":"15.contribution/how-to-contribute/#_2","text":"","title":"\u5f00\u59cb\u4e4b\u524d"},{"location":"15.contribution/how-to-contribute/#github","text":"\u6b22\u8fce\u4e3a\u9879\u76ee\u8d21\u732e\u4efb\u4f55\u4ee3\u7801\u6216\u6587\u6863\uff0c\u4f46\u662f\u5efa\u8bae\u5148\u5728 GitHub \u6216 \u793e\u533a \u4e0a\u63d0\u4ea4\u4e00\u4e2a\u95ee\u9898\uff0c\u548c\u5927\u5bb6\u5171\u540c\u8ba8\u8bba\u3002","title":"GitHub \u6216\u793e\u533a\u63d0\u4ea4\u95ee\u9898"},{"location":"15.contribution/how-to-contribute/#cla","text":"\u4ec0\u4e48\u662f CLA \uff1f \u7b7e\u7f72\u534f\u8bae\u94fe\u63a5\uff1a vesoft inc. Contributor License Agreement \u5355\u51fb\u6309\u94ae Sign in with GitHub to agree \u7b7e\u7f72\u534f\u8bae\u3002 \u5982\u679c\u6709\u4efb\u4f55\u95ee\u9898\uff0c\u8bf7\u53d1\u9001\u90ae\u4ef6\u81f3 info@vesoft.com \u3002","title":"\u7b7e\u7f72\u8d21\u732e\u8005\u8bb8\u53ef\u534f\u8bae\uff08CLA\uff09"},{"location":"15.contribution/how-to-contribute/#_3","text":"NebulaGraph\u6587\u6863\u4ee5 Markdown \u8bed\u8a00\u7f16\u5199\u3002\u5355\u51fb\u6587\u6863\u6807\u9898\u53f3\u4fa7\u7684\u94c5\u7b14\u56fe\u6807\u5373\u53ef\u63d0\u4ea4\u4fee\u6539\u5efa\u8bae\u3002 \u8be5\u65b9\u6cd5\u4ec5\u9002\u7528\u4e8e\u4fee\u6539\u5355\u7bc7\u6587\u6863\u3002","title":"\u4fee\u6539\u5355\u7bc7\u6587\u6863"},{"location":"15.contribution/how-to-contribute/#_4","text":"\u8be5\u65b9\u6cd5\u9002\u7528\u4e8e\u8d21\u732e\u4ee3\u7801\u3001\u6279\u91cf\u4fee\u6539\u591a\u7bc7\u6587\u6863\u6216\u8005\u65b0\u589e\u6587\u6863\u3002","title":"\u6279\u91cf\u4fee\u6539\u6216\u65b0\u589e\u6587\u4ef6"},{"location":"15.contribution/how-to-contribute/#step_1_github_fork","text":"NebulaGraph\u9879\u76ee\u6709\u5f88\u591a \u4ed3\u5e93 \uff0c\u4ee5 NebulaGraph\u4ed3\u5e93 \u4e3a\u4f8b\uff1a \u8bbf\u95ee github.com/vesoft-inc/nebula \u3002 \u5728\u53f3\u4e0a\u89d2\u5355\u51fb\u6309\u94ae Fork \uff0c\u7136\u540e\u5355\u51fb\u7528\u6237\u540d\uff0c\u5373\u53ef fork \u51faNebulaGraph\u4ed3\u5e93\u3002","title":"Step 1\uff1a\u901a\u8fc7 GitHub fork \u4ed3\u5e93"},{"location":"15.contribution/how-to-contribute/#step_2","text":"\u5b9a\u4e49\u672c\u5730\u5de5\u4f5c\u76ee\u5f55\u3002 # \u5b9a\u4e49\u5de5\u4f5c\u76ee\u5f55\u3002 working_dir = $HOME /Workspace \u5c06 user \u8bbe\u7f6e\u4e3a GitHub \u7684\u7528\u6237\u540d\u3002 user ={ GitHub \u7528\u6237\u540d } \u514b\u9686\u4ee3\u7801\u3002 mkdir -p $working_dir cd $working_dir git clone https://github.com/ $user /nebula.git # \u6216\uff1agit clone git@github.com:$user/nebula.git cd $working_dir /nebula git remote add upstream https://github.com/vesoft-inc/nebula.git # \u6216\uff1agit remote add upstream git@github.com:vesoft-inc/nebula.git # \u7531\u4e8e\u6ca1\u6709\u5199\u8bbf\u95ee\u6743\u9650\uff0c\u8bf7\u52ff\u63a8\u9001\u81f3\u4e0a\u6e38\u4e3b\u5206\u652f\u3002 git remote set-url --push upstream no_push # \u786e\u8ba4\u8fdc\u7a0b\u5206\u652f\u6709\u6548\u3002 # \u6b63\u786e\u7684\u683c\u5f0f\u4e3a\uff1a # origin git@github.com:$(user)/nebula.git (fetch) # origin git@github.com:$(user)/nebula.git (push) # upstream https://github.com/vesoft-inc/nebula (fetch) # upstream no_push (push) git remote -v \uff08\u53ef\u9009\uff09\u5b9a\u4e49 pre-commit hook\u3002 \u8bf7\u5c06NebulaGraph\u7684 pre-commit hook \u8fde\u63a5\u5230 .git \u76ee\u5f55\u3002 hook \u5c06\u68c0\u67e5 commit\uff0c\u5305\u62ec\u683c\u5f0f\u3001\u6784\u5efa\u3001\u6587\u6863\u751f\u6210\u7b49\u3002 cd $working_dir /nebula/.git/hooks ln -s $working_dir /nebula/.linters/cpp/hooks/pre-commit.sh . pre-commit hook \u6709\u65f6\u5019\u53ef\u80fd\u65e0\u6cd5\u6b63\u5e38\u6267\u884c\uff0c\u7528\u6237\u5fc5\u987b\u624b\u52a8\u6267\u884c\u3002 cd $working_dir /nebula/.git/hooks chmod +x pre-commit","title":"Step 2\uff1a\u5c06\u5206\u652f\u514b\u9686\u5230\u672c\u5730"},{"location":"15.contribution/how-to-contribute/#step_3","text":"\u66f4\u65b0\u672c\u5730\u4e3b\u5206\u652f\u3002 cd $working_dir /nebula git fetch upstream git checkout master git rebase upstream/master \u4ece\u4e3b\u5206\u652f\u521b\u5efa\u5e76\u5207\u6362\u5206\u652f\uff1a git checkout -b myfeature Note \u7531\u4e8e\u4e00\u4e2a PR \u901a\u5e38\u5305\u542b\u591a\u4e2a commits\uff0c\u6700\u7ec8\u5408\u5165 upstream/master \u5206\u652f\u65f6\uff0c\u6211\u4eec\u4f1a\u5c06\u8fd9\u4e9b commits \u6324\u538b\uff08squash\uff09\u6210\u4e00\u4e2a commit \u8fdb\u884c\u5408\u5e76\u3002\u56e0\u6b64\u5f3a\u70c8\u5efa\u8bae\u521b\u5efa\u4e00\u4e2a\u72ec\u7acb\u7684\u5206\u652f\u8fdb\u884c\u66f4\u6539\uff0c\u8fd9\u6837\u5728\u5408\u5165\u65f6\u624d\u5bb9\u6613\u88ab\u6324\u538b\u3002\u5408\u5e76\u540e\uff0c\u8fd9\u4e2a\u5206\u652f\u53ef\u4ee5\u88ab\u4e22\u5f03\u3002\u5982\u679c\u672a\u521b\u5efa\u5355\u72ec\u7684\u5206\u652f\uff0c\u800c\u662f\u76f4\u63a5\u5c06 commits \u63d0\u4ea4\u81f3 origin/master\uff0c\u5728\u5408\u5165\u65f6\uff0c\u53ef\u80fd\u4f1a\u51fa\u73b0\u95ee\u9898\u3002 \u82e5\u672a\u521b\u5efa\u5355\u72ec\u7684\u5206\u652f\uff08\u6216\u662f origin/master \u5408\u5e76\u4e86\u5176\u4ed6\u7684\u5206\u652f\u7b49\uff09\uff0c\u5bfc\u81f4 origin/master \u548c upstream/master \u4e0d\u4e00\u81f4\u65f6\uff0c\u7528\u6237\u53ef\u4ee5\u4f7f\u7528 hard reset \u5f3a\u5236\u4e24\u8005\u8fdb\u884c\u4e00\u81f4\u3002\u4f8b\u5982\uff1a git fetch upstream git checkout master git reset --hard upstream/master git push --force origin master","title":"Step 3\uff1a\u5206\u652f"},{"location":"15.contribution/how-to-contribute/#step_4","text":"\u4ee3\u7801\u98ce\u683c NebulaGraph\u91c7\u7528 cpplint \u6765\u786e\u4fdd\u4ee3\u7801\u7b26\u5408 Google \u7684\u4ee3\u7801\u98ce\u683c\u6307\u5357\u3002\u68c0\u67e5\u5668\u5c06\u5728\u63d0\u4ea4\u4ee3\u7801\u4e4b\u524d\u6267\u884c\u3002 \u5355\u5143\u6d4b\u8bd5\u8981\u6c42 \u8bf7\u4e3a\u65b0\u529f\u80fd\u6216 Bug \u4fee\u590d\u6dfb\u52a0\u5355\u5143\u6d4b\u8bd5\u3002 \u6784\u5efa\u4ee3\u7801\u65f6\u5f00\u542f\u5355\u5143\u6d4b\u8bd5 \u8be6\u60c5\u8bf7\u53c2\u89c1 \u4f7f\u7528\u6e90\u7801\u5b89\u88c5NebulaGraph \u3002 Note \u8bf7\u786e\u4fdd\u5df2\u8bbe\u7f6e -DENABLE_TESTING = ON \u542f\u7528\u6784\u5efa\u5355\u5143\u6d4b\u8bd5\u3002 \u8fd0\u884c\u6240\u6709\u5355\u5143\u6d4b\u8bd5 \u5728 nebula \u6839\u76ee\u5f55\u6267\u884c\u5982\u4e0b\u547d\u4ee4\uff1a cd nebula/build ctest -j $( nproc )","title":"Step 4\uff1a\u5f00\u53d1"},{"location":"15.contribution/how-to-contribute/#step_5","text":"# \u5f53\u5904\u4e8e myfeature \u5206\u652f\u65f6\u3002 git fetch upstream git rebase upstream/master \u5728\u5176\u4ed6\u8d21\u732e\u8005\u5c06 PR \u5408\u5e76\u5230\u57fa\u7840\u5206\u652f\u4e4b\u540e\uff0c\u7528\u6237\u9700\u8981\u66f4\u65b0 head \u5206\u652f\u3002","title":"Step 5\uff1a\u4fdd\u6301\u5206\u652f\u540c\u6b65"},{"location":"15.contribution/how-to-contribute/#step_6commit","text":"\u63d0\u4ea4\u4ee3\u7801\u66f4\u6539\uff1a git commit -a \u7528\u6237\u53ef\u4ee5\u4f7f\u7528\u547d\u4ee4 --amend \u91cd\u65b0\u7f16\u8f91\u4e4b\u524d\u7684\u4ee3\u7801\u3002","title":"Step 6\uff1aCommit"},{"location":"15.contribution/how-to-contribute/#step_7push","text":"\u9700\u8981\u5ba1\u6838\u6216\u79bb\u7ebf\u5907\u4efd\u4ee3\u7801\u65f6\uff0c\u53ef\u4ee5\u5c06\u672c\u5730\u4ed3\u5e93\u521b\u5efa\u7684\u5206\u652f push \u5230 GitHub \u7684\u8fdc\u7a0b\u4ed3\u5e93\u3002 git push origin myfeature","title":"Step 7\uff1aPush"},{"location":"15.contribution/how-to-contribute/#step_8_pull_request","text":"\u8bbf\u95ee fork \u51fa\u7684\u4ed3\u5e93 https://github.com/$user/nebula \uff08\u66ff\u6362\u6b64\u5904\u7684\u7528\u6237\u540d $user )\u3002 \u5355\u51fb myfeature \u5206\u652f\u65c1\u7684\u6309\u94ae Compare & pull request \u3002","title":"Step 8\uff1a\u521b\u5efa pull request"},{"location":"15.contribution/how-to-contribute/#step_9","text":"pull request \u521b\u5efa\u540e\uff0c\u81f3\u5c11\u9700\u8981\u4e24\u4eba\u5ba1\u67e5\u3002\u5ba1\u67e5\u4eba\u5458\u5c06\u8fdb\u884c\u5f7b\u5e95\u7684\u4ee3\u7801\u5ba1\u67e5\uff0c\u4ee5\u786e\u4fdd\u53d8\u66f4\u6ee1\u8db3\u5b58\u50a8\u5e93\u7684\u8d21\u732e\u51c6\u5219\u548c\u5176\u4ed6\u8d28\u91cf\u6807\u51c6\u3002","title":"Step 9\uff1a\u4ee3\u7801\u5ba1\u67e5"},{"location":"15.contribution/how-to-contribute/#_5","text":"\u6dfb\u52a0\u6d4b\u8bd5\u7528\u4f8b\u7684\u65b9\u6cd5\u53c2\u89c1 How to add test cases \u3002","title":"\u6dfb\u52a0\u6d4b\u8bd5\u7528\u4f8b"},{"location":"15.contribution/how-to-contribute/#_6","text":"","title":"\u6350\u8d60\u9879\u76ee"},{"location":"15.contribution/how-to-contribute/#step_1","text":"\u901a\u8fc7\u90ae\u4ef6\u3001\u5fae\u4fe1\u3001Slack \u7b49\u65b9\u5f0f\u8054\u7edcNebulaGraph\u5b98\u65b9\u4eba\u5458\uff0c\u786e\u8ba4\u6350\u8d60\u9879\u76ee\u4e00\u4e8b\u3002\u9879\u76ee\u5c06\u88ab\u6350\u8d60\u81f3 NebulaGraph Contrib \u7ec4\u7ec7\u4e0b\u3002 \u90ae\u4ef6\u5730\u5740\uff1ainfo@vesoft.com \u5fae\u4fe1\uff1aNebulaGraphbot Slack\uff1a Join Slack","title":"Step 1\uff1a\u786e\u8ba4\u9879\u76ee\u6350\u8d60"},{"location":"15.contribution/how-to-contribute/#step_6","text":"\u7531NebulaGraph\u5b98\u65b9\u4eba\u5458\u7ed9\u51faNebulaGraph Contrib \u7684\u9879\u76ee\u63a5\u6536\u8005 ID\u3002","title":"Step 2\uff1a\u83b7\u53d6\u9879\u76ee\u63a5\u6536\u4eba\u4fe1\u606f"},{"location":"15.contribution/how-to-contribute/#step_7","text":"\u7531\u60a8\u5c06\u9879\u76ee\u8f6c\u79fb\u81f3\u672c\u6b21\u6350\u8d60\u7684\u9879\u76ee\u63a5\u53d7\u4eba\uff0c\u5e76\u7531\u9879\u76ee\u63a5\u6536\u8005\u5c06\u8be5\u9879\u76ee\u8f6c\u79fb\u81f3 NebulaGraph Contrib \u7ec4\u7ec7\u4e0b\u3002\u6350\u8d60\u540e\uff0c\u60a8\u5c06\u4ee5 Maintain \u89d2\u8272\u7ee7\u7eed\u4e3b\u5bfc\u793e\u533a\u9879\u76ee\u7684\u53d1\u5c55\u3002 GitHub \u4e0a\u8f6c\u79fb\u4ed3\u5e93\u7684\u64cd\u4f5c\uff0c\u8bf7\u53c2\u89c1 Transferring a repository owned by your user account \u3002","title":"Step 3\uff1a\u6350\u8d60\u9879\u76ee"},{"location":"2.quick-start/1.quick-start-overview/","text":"\u57fa\u4e8e Docker \u5feb\u901f\u90e8\u7f72 \u00b6 NebulaGraph \u63d0\u4f9b\u4e86\u57fa\u4e8e Docker \u7684\u5feb\u901f\u90e8\u7f72\u65b9\u5f0f\uff0c\u53ef\u4ee5\u5728\u51e0\u5206\u949f\u5185\u5b8c\u6210\u90e8\u7f72\u3002 \u4f7f\u7528 Docker Desktop \u4f7f\u7528 Docker Compose \u6309\u7167\u4ee5\u4e0b\u6b65\u9aa4\u53ef\u4ee5\u5feb\u901f\u5728 Docker Desktop \u4e2d\u90e8\u7f72NebulaGraph\u3002 \u5b89\u88c5 Docker Desktop \u3002 Caution \u5982\u679c\u5728 Windows \u7aef\u5b89\u88c5 Docker Desktop \u9700 \u5b89\u88c5 WSL 2 \u3002 \u5728\u4eea\u8868\u76d8\u4e2d\u5355\u51fb Extensions \u6216 Add Extensions \u6253\u5f00Extensions Marketplace \u641c\u7d22NebulaGraph \uff0c\u4e5f\u53ef\u4ee5\u70b9\u51fb NebulaGraph \u5728 Docker Desktop \u6253\u5f00\u3002 \u5bfc\u822a\u5230NebulaGraph\u7684\u6269\u5c55\u5e02\u573a\u3002 \u70b9\u51fb Install \u4e0b\u8f7dNebulaGraph\u3002 \u5728\u6709\u66f4\u65b0\u7684\u65f6\u5019\uff0c\u53ef\u4ee5\u70b9\u51fb Update \u66f4\u65b0\u5230\u6700\u65b0\u7248\u672c\u3002 \u89c6\u9891\u4ecb\u7ecd \u4f7f\u7528 Docker Compose \u53ef\u4ee5\u57fa\u4e8e\u51c6\u5907\u597d\u7684\u914d\u7f6e\u6587\u4ef6\u5feb\u901f\u90e8\u7f72NebulaGraph\u670d\u52a1\uff0c\u4ec5\u5efa\u8bae\u5728\u6d4b\u8bd5NebulaGraph\u529f\u80fd\u65f6\u4f7f\u7528\u8be5\u65b9\u5f0f\u3002 \u524d\u63d0\u6761\u4ef6 \u00b6 \u4e3b\u673a\u4e0a\u5b89\u88c5\u5982\u4e0b\u5e94\u7528\u7a0b\u5e8f\u3002 \u5e94\u7528\u7a0b\u5e8f \u63a8\u8350\u7248\u672c \u5b98\u65b9\u5b89\u88c5\u53c2\u8003 Docker \u6700\u65b0\u7248\u672c Install Docker Engine Docker Compose \u6700\u65b0\u7248\u672c Install Docker Compose Git \u6700\u65b0\u7248\u672c Download Git \u5982\u679c\u4f7f\u7528\u975e root \u7528\u6237\u90e8\u7f72NebulaGraph\uff0c\u8bf7\u6388\u6743\u8be5\u7528\u6237 Docker \u76f8\u5173\u7684\u6743\u9650\u3002\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u89c1 Manage Docker as a non-root user \u3002 \u542f\u52a8\u4e3b\u673a\u4e0a\u7684 Docker \u670d\u52a1\u3002 \u5982\u679c\u5df2\u7ecf\u901a\u8fc7 Docker Compose \u5728\u4e3b\u673a\u4e0a\u90e8\u7f72\u4e86\u53e6\u4e00\u4e2a\u7248\u672c\u7684NebulaGraph\uff0c\u4e3a\u907f\u514d\u517c\u5bb9\u6027\u95ee\u9898\uff0c\u9700\u8981\u5220\u9664\u76ee\u5f55 nebula-docker-compose/data \u3002 \u90e8\u7f72NebulaGraph \u00b6 \u901a\u8fc7 Git \u514b\u9686 nebula-docker-compose \u4ed3\u5e93\u7684 3.6.0 \u5206\u652f\u5230\u4e3b\u673a\u3002 Danger master \u5206\u652f\u5305\u542b\u6700\u65b0\u7684\u672a\u6d4b\u8bd5\u4ee3\u7801\u3002\u8bf7 \u4e0d\u8981 \u5728\u751f\u4ea7\u73af\u5883\u4f7f\u7528\u6b64\u7248\u672c\u3002 $ git clone -b release-3.6 https://github.com/vesoft-inc/nebula-docker-compose.git Note Docker Compose \u7684 x.y \u7248\u672c\u5bf9\u9f50\u5185\u6838\u7684 x.y \u7248\u672c\uff0c\u5bf9\u4e8e\u5185\u6838 z \u7248\u672c\uff0cDocker Compose \u4e0d\u4f1a\u53d1\u5e03\u5bf9\u5e94\u7684 z \u7248\u672c\uff0c\u4f46\u662f\u4f1a\u62c9\u53d6 z \u7248\u672c\u7684\u5185\u6838\u955c\u50cf\u3002 \u5207\u6362\u81f3\u76ee\u5f55 nebula-docker-compose \u3002 $ cd nebula-docker-compose/ \u6267\u884c\u5982\u4e0b\u547d\u4ee4\u542f\u52a8NebulaGraph\u670d\u52a1\u3002 Note \u5982\u679c\u957f\u671f\u672a\u5185\u6838\u66f4\u65b0\u955c\u50cf\uff0c\u8bf7\u5148\u66f4\u65b0 NebulaGraph\u955c\u50cf \u548c NebulaGraph Console \u955c\u50cf \u3002 \u6267\u884c\u547d\u4ee4\u540e\u7684\u8fd4\u56de\u7ed3\u679c\u56e0\u5b89\u88c5\u76ee\u5f55\u4e0d\u540c\u800c\u4e0d\u540c\u3002 [ nebula-docker-compose ] $ docker-compose up -d Creating nebula-docker-compose_metad0_1 ... done Creating nebula-docker-compose_metad2_1 ... done Creating nebula-docker-compose_metad1_1 ... done Creating nebula-docker-compose_storaged0_1 ... done Creating nebula-docker-compose_storaged1_1 ... done Creating nebula-docker-compose_storaged2_1 ... done Compatibility \u4ece 3.1 \u7248\u672c\u5f00\u59cb\uff0cDocker-compose \u4f1a\u81ea\u52a8\u542f\u52a8 NebulaGraph Console \u955c\u50cf\u7684\u5bb9\u5668\uff0c\u5e76\u5c06 Storage \u4e3b\u673a\u589e\u52a0\u81f3\u96c6\u7fa4\u4e2d\uff08\u5373 ADD HOSTS \u547d\u4ee4\uff09\u3002 Note \u4e0a\u8ff0\u670d\u52a1\u7684\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u89c1 \u67b6\u6784\u603b\u89c8 \u3002 \u8fde\u63a5NebulaGraph \u00b6 \u8fde\u63a5NebulaGraph\u6709\u4e24\u79cd\u65b9\u5f0f\uff1a \u5728\u5bb9\u5668\u5916\u901a\u8fc7 Nebula Console \u8fde\u63a5\u3002\u56e0\u4e3a\u5bb9\u5668\u7684\u914d\u7f6e\u6587\u4ef6\u4e2d\u5c06 Graph \u670d\u52a1\u7684\u5916\u90e8\u6620\u5c04\u7aef\u53e3\u4e5f\u56fa\u5b9a\u4e3a 9669\uff0c\u56e0\u6b64\u53ef\u4ee5\u76f4\u63a5\u901a\u8fc7\u9ed8\u8ba4\u7aef\u53e3\u8fde\u63a5\u3002\u8be6\u60c5\u53c2\u89c1 \u8fde\u63a5NebulaGraph \u3002 \u767b\u5f55\u5b89\u88c5\u4e86 NebulaGraph Console \u7684\u5bb9\u5668\uff0c\u7136\u540e\u518d\u8fde\u63a5 Graph \u670d\u52a1\u3002\u672c\u5c0f\u8282\u4ecb\u7ecd\u8fd9\u79cd\u65b9\u5f0f\u3002 \u4f7f\u7528 docker-compose ps \u547d\u4ee4\u67e5\u770b NebulaGraph Console \u5bb9\u5668\u540d\u79f0\u3002 $ docker-compose ps Name Command State Ports ---------------------------------------------------------------------------------------------- nebula-docker-compose_console_1 sh -c sleep 3 && Up nebula-co ... ...... \u8fdb\u5165 NebulaGraph Console \u5bb9\u5668\u4e2d\u3002 $ docker exec -it nebula-docker-compose_console_1 /bin/sh / # \u901a\u8fc7 NebulaGraph Console \u8fde\u63a5NebulaGraph\u3002 / # ./usr/local/bin/nebula-console -u <user_name> -p <password> --address=graphd --port=9669 Note \u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u8eab\u4efd\u8ba4\u8bc1\u529f\u80fd\u662f\u5173\u95ed\u7684\uff0c\u53ea\u80fd\u4f7f\u7528\u5df2\u5b58\u5728\u7684\u7528\u6237\u540d\uff08\u9ed8\u8ba4\u4e3a root \uff09\u548c\u4efb\u610f\u5bc6\u7801\u767b\u5f55\u3002\u5982\u679c\u60f3\u4f7f\u7528\u8eab\u4efd\u8ba4\u8bc1\uff0c\u8bf7\u53c2\u89c1 \u8eab\u4efd\u8ba4\u8bc1 \u3002 \u67e5\u770b\u96c6\u7fa4\u72b6\u6001\u3002 nebula> SHOW HOSTS ; +-------------+------+----------+--------------+----------------------+------------------------+---------+ | Host | Port | Status | Leader count | Leader distribution | Partition distribution | Version | +-------------+------+----------+--------------+----------------------+------------------------+---------+ | \"storaged0\" | 9779 | \"ONLINE\" | 0 | \"No valid partition\" | \"No valid partition\" | \"3.6.0\" | | \"storaged1\" | 9779 | \"ONLINE\" | 0 | \"No valid partition\" | \"No valid partition\" | \"3.6.0\" | | \"storaged2\" | 9779 | \"ONLINE\" | 0 | \"No valid partition\" | \"No valid partition\" | \"3.6.0\" | +-------------+------+----------+--------------+----------------------+------------------------+---------+ \u6267\u884c\u4e24\u6b21 exit \u53ef\u4ee5\u9000\u51fa\u5bb9\u5668\u3002 \u67e5\u770bNebulaGraph\u670d\u52a1\u7684\u72b6\u6001\u548c\u7aef\u53e3 \u00b6 \u6267\u884c\u547d\u4ee4 docker-compose ps \u53ef\u4ee5\u5217\u51faNebulaGraph\u670d\u52a1\u7684\u72b6\u6001\u548c\u7aef\u53e3\u3002 Note NebulaGraph\u9ed8\u8ba4\u4f7f\u7528 9669 \u7aef\u53e3\u4e3a\u5ba2\u6237\u7aef\u63d0\u4f9b\u670d\u52a1\uff0c\u5982\u679c\u9700\u8981\u4fee\u6539\u7aef\u53e3\uff0c\u8bf7\u4fee\u6539\u76ee\u5f55 nebula-docker-compose \u5185\u7684\u6587\u4ef6 docker-compose.yaml \uff0c\u7136\u540e\u91cd\u542fNebulaGraph\u670d\u52a1\u3002 $ docker-compose ps nebula-docker-compose_console_1 sh -c sleep 3 && Up nebula-co ... nebula-docker-compose_graphd1_1 /usr/local/nebula/bin/nebu ... Up 0 .0.0.0:49174->19669/tcp,:::49174->19669/tcp, 0 .0.0.0:49171->19670/tcp,:::49171->19670/tcp, 0 .0.0.0:49177->9669/tcp,:::49177->9669/tcp nebula-docker-compose_graphd2_1 /usr/local/nebula/bin/nebu ... Up 0 .0.0.0:49175->19669/tcp,:::49175->19669/tcp, 0 .0.0.0:49172->19670/tcp,:::49172->19670/tcp, 0 .0.0.0:49178->9669/tcp,:::49178->9669/tcp nebula-docker-compose_graphd_1 /usr/local/nebula/bin/nebu ... Up 0 .0.0.0:49180->19669/tcp,:::49180->19669/tcp, 0 .0.0.0:49179->19670/tcp,:::49179->19670/tcp, 0 .0.0.0:9669->9669/tcp,:::9669->9669/tcp nebula-docker-compose_metad0_1 /usr/local/nebula/bin/nebu ... Up 0 .0.0.0:49157->19559/tcp,:::49157->19559/tcp, 0 .0.0.0:49154->19560/tcp,:::49154->19560/tcp, 0 .0.0.0:49160->9559/tcp,:::49160->9559/tcp, 9560 /tcp nebula-docker-compose_metad1_1 /usr/local/nebula/bin/nebu ... Up 0 .0.0.0:49156->19559/tcp,:::49156->19559/tcp, 0 .0.0.0:49153->19560/tcp,:::49153->19560/tcp, 0 .0.0.0:49159->9559/tcp,:::49159->9559/tcp, 9560 /tcp nebula-docker-compose_metad2_1 /usr/local/nebula/bin/nebu ... Up 0 .0.0.0:49158->19559/tcp,:::49158->19559/tcp, 0 .0.0.0:49155->19560/tcp,:::49155->19560/tcp, 0 .0.0.0:49161->9559/tcp,:::49161->9559/tcp, 9560 /tcp nebula-docker-compose_storaged0_1 /usr/local/nebula/bin/nebu ... Up 0 .0.0.0:49166->19779/tcp,:::49166->19779/tcp, 0 .0.0.0:49163->19780/tcp,:::49163->19780/tcp, 9777 /tcp, 9778 /tcp, 0 .0.0.0:49169->9779/tcp,:::49169->9779/tcp, 9780 /tcp nebula-docker-compose_storaged1_1 /usr/local/nebula/bin/nebu ... Up 0 .0.0.0:49165->19779/tcp,:::49165->19779/tcp, 0 .0.0.0:49162->19780/tcp,:::49162->19780/tcp, 9777 /tcp, 9778 /tcp, 0 .0.0.0:49168->9779/tcp,:::49168->9779/tcp, 9780 /tcp nebula-docker-compose_storaged2_1 /usr/local/nebula/bin/nebu ... Up 0 .0.0.0:49167->19779/tcp,:::49167->19779/tcp, 0 .0.0.0:49164->19780/tcp,:::49164->19780/tcp, 9777 /tcp, 9778 /tcp, 0 .0.0.0:49170->9779/tcp,:::49170->9779/tcp, 9780 /tcp \u5982\u679c\u670d\u52a1\u6709\u5f02\u5e38\uff0c\u7528\u6237\u53ef\u4ee5\u5148\u786e\u8ba4\u5f02\u5e38\u7684\u5bb9\u5668\u540d\u79f0\uff08\u4f8b\u5982 nebula-docker-compose_graphd2_1 \uff09, \u7136\u540e\u6267\u884c docker ps \u67e5\u770b\u5bf9\u5e94\u7684 CONTAINER ID \uff08\u793a\u4f8b\u4e3a 2a6c56c405f5 )\u3002 [ nebula-docker-compose ] $ docker ps CONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES 2a6c56c405f5 vesoft/nebula-graphd:nightly \"/usr/local/nebula/b\u2026\" 36 minutes ago Up 36 minutes ( healthy ) 0 .0.0.0:49230->9669/tcp, 0 .0.0.0:49229->19669/tcp, 0 .0.0.0:49228->19670/tcp nebula-docker-compose_graphd2_1 7042e0a8e83d vesoft/nebula-storaged:nightly \"./bin/nebula-storag\u2026\" 36 minutes ago Up 36 minutes ( healthy ) 9777 -9778/tcp, 9780 /tcp, 0 .0.0.0:49227->9779/tcp, 0 .0.0.0:49226->19779/tcp, 0 .0.0.0:49225->19780/tcp nebula-docker-compose_storaged2_1 18e3ea63ad65 vesoft/nebula-storaged:nightly \"./bin/nebula-storag\u2026\" 36 minutes ago Up 36 minutes ( healthy ) 9777 -9778/tcp, 9780 /tcp, 0 .0.0.0:49219->9779/tcp, 0 .0.0.0:49218->19779/tcp, 0 .0.0.0:49217->19780/tcp nebula-docker-compose_storaged0_1 4dcabfe8677a vesoft/nebula-graphd:nightly \"/usr/local/nebula/b\u2026\" 36 minutes ago Up 36 minutes ( healthy ) 0 .0.0.0:49224->9669/tcp, 0 .0.0.0:49223->19669/tcp, 0 .0.0.0:49222->19670/tcp nebula-docker-compose_graphd1_1 a74054c6ae25 vesoft/nebula-graphd:nightly \"/usr/local/nebula/b\u2026\" 36 minutes ago Up 36 minutes ( healthy ) 0 .0.0.0:9669->9669/tcp, 0 .0.0.0:49221->19669/tcp, 0 .0.0.0:49220->19670/tcp nebula-docker-compose_graphd_1 880025a3858c vesoft/nebula-storaged:nightly \"./bin/nebula-storag\u2026\" 36 minutes ago Up 36 minutes ( healthy ) 9777 -9778/tcp, 9780 /tcp, 0 .0.0.0:49216->9779/tcp, 0 .0.0.0:49215->19779/tcp, 0 .0.0.0:49214->19780/tcp nebula-docker-compose_storaged1_1 45736a32a23a vesoft/nebula-metad:nightly \"./bin/nebula-metad \u2026\" 36 minutes ago Up 36 minutes ( healthy ) 9560 /tcp, 0 .0.0.0:49213->9559/tcp, 0 .0.0.0:49212->19559/tcp, 0 .0.0.0:49211->19560/tcp nebula-docker-compose_metad0_1 3b2c90eb073e vesoft/nebula-metad:nightly \"./bin/nebula-metad \u2026\" 36 minutes ago Up 36 minutes ( healthy ) 9560 /tcp, 0 .0.0.0:49207->9559/tcp, 0 .0.0.0:49206->19559/tcp, 0 .0.0.0:49205->19560/tcp nebula-docker-compose_metad2_1 7bb31b7a5b3f vesoft/nebula-metad:nightly \"./bin/nebula-metad \u2026\" 36 minutes ago Up 36 minutes ( healthy ) 9560 /tcp, 0 .0.0.0:49210->9559/tcp, 0 .0.0.0:49209->19559/tcp, 0 .0.0.0:49208->19560/tcp nebula-docker-compose_metad1_1 \u6700\u540e\u767b\u5f55\u5bb9\u5668\u6392\u67e5\u95ee\u9898 [ nebula-docker-compose ] $ docker exec -it 2a6c56c405f5 bash [ root@2a6c56c405f5 nebula ] # \u67e5\u770bNebulaGraph\u670d\u52a1\u7684\u6570\u636e\u548c\u65e5\u5fd7 \u00b6 NebulaGraph\u7684\u6240\u6709\u6570\u636e\u548c\u65e5\u5fd7\u90fd\u6301\u4e45\u5316\u5b58\u50a8\u5728 nebula-docker-compose/data \u548c nebula-docker-compose/logs \u76ee\u5f55\u4e2d\u3002 \u76ee\u5f55\u7684\u7ed3\u6784\u5982\u4e0b\uff1a nebula-docker-compose/ |-- docker-compose.yaml \u251c\u2500\u2500 data \u2502 \u251c\u2500\u2500 meta0 \u2502 \u251c\u2500\u2500 meta1 \u2502 \u251c\u2500\u2500 meta2 \u2502 \u251c\u2500\u2500 storage0 \u2502 \u251c\u2500\u2500 storage1 \u2502 \u2514\u2500\u2500 storage2 \u2514\u2500\u2500 logs \u251c\u2500\u2500 graph \u251c\u2500\u2500 graph1 \u251c\u2500\u2500 graph2 \u251c\u2500\u2500 meta0 \u251c\u2500\u2500 meta1 \u251c\u2500\u2500 meta2 \u251c\u2500\u2500 storage0 \u251c\u2500\u2500 storage1 \u2514\u2500\u2500 storage2 \u505c\u6b62NebulaGraph\u670d\u52a1 \u00b6 \u7528\u6237\u53ef\u4ee5\u6267\u884c\u5982\u4e0b\u547d\u4ee4\u505c\u6b62NebulaGraph\u670d\u52a1\uff1a $ docker-compose down \u5982\u679c\u8fd4\u56de\u5982\u4e0b\u4fe1\u606f\uff0c\u8868\u793a\u5df2\u7ecf\u6210\u529f\u505c\u6b62\u670d\u52a1\u3002 Stopping nebula-docker-compose_console_1 ... done Stopping nebula-docker-compose_graphd1_1 ... done Stopping nebula-docker-compose_graphd_1 ... done Stopping nebula-docker-compose_graphd2_1 ... done Stopping nebula-docker-compose_storaged1_1 ... done Stopping nebula-docker-compose_storaged0_1 ... done Stopping nebula-docker-compose_storaged2_1 ... done Stopping nebula-docker-compose_metad2_1 ... done Stopping nebula-docker-compose_metad0_1 ... done Stopping nebula-docker-compose_metad1_1 ... done Removing nebula-docker-compose_console_1 ... done Removing nebula-docker-compose_graphd1_1 ... done Removing nebula-docker-compose_graphd_1 ... done Removing nebula-docker-compose_graphd2_1 ... done Removing nebula-docker-compose_storaged1_1 ... done Removing nebula-docker-compose_storaged0_1 ... done Removing nebula-docker-compose_storaged2_1 ... done Removing nebula-docker-compose_metad2_1 ... done Removing nebula-docker-compose_metad0_1 ... done Removing nebula-docker-compose_metad1_1 ... done Removing network nebula-docker-compose_nebula-net Danger \u547d\u4ee4 docker-compose down -v \u7684\u53c2\u6570 -v \u5c06\u4f1a \u5220\u9664 \u6240\u6709\u672c\u5730\u7684\u6570\u636e\u3002\u5982\u679c\u4f7f\u7528\u7684\u662f nightly \u7248\u672c\uff0c\u5e76\u4e14\u6709\u4e00\u4e9b\u517c\u5bb9\u6027\u95ee\u9898\uff0c\u8bf7\u5c1d\u8bd5\u8fd9\u4e2a\u547d\u4ee4\u3002 \u4fee\u6539\u914d\u7f6e \u00b6 Docker Compose \u90e8\u7f72\u7684NebulaGraph\uff0c\u914d\u7f6e\u6587\u4ef6\u4f4d\u7f6e\u4e3a nebula-docker-compose/docker-compose.yaml \uff0c\u4fee\u6539\u8be5\u6587\u4ef6\u5185\u7684\u914d\u7f6e\u5e76\u91cd\u542f\u670d\u52a1\u5373\u53ef\u4f7f\u65b0\u914d\u7f6e\u751f\u6548\u3002 \u5177\u4f53\u7684\u914d\u7f6e\u8bf4\u660e\u8bf7\u53c2\u89c1 \u914d\u7f6e\u7ba1\u7406 \u3002 \u5e38\u89c1\u95ee\u9898 \u00b6 \u5982\u4f55\u56fa\u5b9a Docker \u6620\u5c04\u5230\u5916\u90e8\u7684\u7aef\u53e3\uff1f \u00b6 \u5728\u76ee\u5f55 nebula-docker-compose \u5185\u4fee\u6539\u6587\u4ef6 docker-compose.yaml \uff0c\u5c06\u5bf9\u5e94\u670d\u52a1\u7684 ports \u8bbe\u7f6e\u4e3a\u56fa\u5b9a\u6620\u5c04\uff0c\u4f8b\u5982\uff1a graphd: image: vesoft/nebula-graphd:release-3.6 ... ports: - 9669 :9669 - 19669 - 19670 9669:9669 \u8868\u793a\u5185\u90e8\u7684 9669 \u6620\u5c04\u5230\u5916\u90e8\u7684\u7aef\u53e3\u4e5f\u662f 9669\uff0c\u4e0b\u65b9\u7684 19669 \u8868\u793a\u5185\u90e8\u7684 19669 \u6620\u5c04\u5230\u5916\u90e8\u7684\u7aef\u53e3\u662f\u968f\u673a\u7684\u3002 \u5982\u4f55\u5347\u7ea7/\u66f4\u65b0NebulaGraph\u670d\u52a1\u7684 Docker \u955c\u50cf\uff1f \u00b6 \u5728\u6587\u4ef6 nebula-docker-compose/docker-compose.yaml \u4e2d\uff0c\u627e\u5230\u6240\u6709\u670d\u52a1\u7684 image \u5e76\u4fee\u6539\u5176\u503c\u4e3a\u76f8\u5e94\u7684\u955c\u50cf\u7248\u672c\u3002 \u5728\u76ee\u5f55 nebula-docker-compose \u5185\u6267\u884c\u547d\u4ee4 docker-compose pull \uff0c\u66f4\u65b0 Graph \u670d\u52a1\u3001Storage \u670d\u52a1\u3001Meta \u670d\u52a1\u548c NebulaGraph Console \u7684\u955c\u50cf\u3002 \u6267\u884c\u547d\u4ee4 docker-compose up -d \u542f\u52a8NebulaGraph\u670d\u52a1\u3002 \u901a\u8fc7 NebulaGraph Console \u8fde\u63a5NebulaGraph\u540e\uff0c\u5206\u522b\u6267\u884c\u547d\u4ee4 SHOW HOSTS GRAPH \u3001 SHOW HOSTS STORAGE \u3001 SHOW HOSTS META \u67e5\u770b\u5404\u670d\u52a1\u7248\u672c\u3002 \u6267\u884c\u547d\u4ee4 docker-compose pull \u62a5\u9519 ERROR: toomanyrequests \u00b6 \u53ef\u80fd\u9047\u5230\u5982\u4e0b\u9519\u8bef\uff1a ERROR: toomanyrequests: You have reached your pull rate limit. You may increase the limit by authenticating and upgrading: https://www.docker.com/increase-rate-limit \u4ee5\u4e0a\u9519\u8bef\u8868\u793a\u5df2\u8fbe\u5230 Docker Hub \u7684\u901f\u7387\u9650\u5236\u3002\u89e3\u51b3\u65b9\u6848\u8bf7\u53c2\u89c1 Understanding Docker Hub Rate Limiting \u3002 \u5982\u4f55\u66f4\u65b0 NebulaGraph Console\uff1f \u00b6 docker-compose pull \u4f1a\u540c\u65f6\u66f4\u65b0NebulaGraph\u670d\u52a1\u548c NebulaGraph Console\u3002","title":"\u57fa\u4e8e Docker"},{"location":"2.quick-start/1.quick-start-overview/#docker","text":"NebulaGraph \u63d0\u4f9b\u4e86\u57fa\u4e8e Docker \u7684\u5feb\u901f\u90e8\u7f72\u65b9\u5f0f\uff0c\u53ef\u4ee5\u5728\u51e0\u5206\u949f\u5185\u5b8c\u6210\u90e8\u7f72\u3002 \u4f7f\u7528 Docker Desktop \u4f7f\u7528 Docker Compose \u6309\u7167\u4ee5\u4e0b\u6b65\u9aa4\u53ef\u4ee5\u5feb\u901f\u5728 Docker Desktop \u4e2d\u90e8\u7f72NebulaGraph\u3002 \u5b89\u88c5 Docker Desktop \u3002 Caution \u5982\u679c\u5728 Windows \u7aef\u5b89\u88c5 Docker Desktop \u9700 \u5b89\u88c5 WSL 2 \u3002 \u5728\u4eea\u8868\u76d8\u4e2d\u5355\u51fb Extensions \u6216 Add Extensions \u6253\u5f00Extensions Marketplace \u641c\u7d22NebulaGraph \uff0c\u4e5f\u53ef\u4ee5\u70b9\u51fb NebulaGraph \u5728 Docker Desktop \u6253\u5f00\u3002 \u5bfc\u822a\u5230NebulaGraph\u7684\u6269\u5c55\u5e02\u573a\u3002 \u70b9\u51fb Install \u4e0b\u8f7dNebulaGraph\u3002 \u5728\u6709\u66f4\u65b0\u7684\u65f6\u5019\uff0c\u53ef\u4ee5\u70b9\u51fb Update \u66f4\u65b0\u5230\u6700\u65b0\u7248\u672c\u3002 \u89c6\u9891\u4ecb\u7ecd \u4f7f\u7528 Docker Compose \u53ef\u4ee5\u57fa\u4e8e\u51c6\u5907\u597d\u7684\u914d\u7f6e\u6587\u4ef6\u5feb\u901f\u90e8\u7f72NebulaGraph\u670d\u52a1\uff0c\u4ec5\u5efa\u8bae\u5728\u6d4b\u8bd5NebulaGraph\u529f\u80fd\u65f6\u4f7f\u7528\u8be5\u65b9\u5f0f\u3002","title":"\u57fa\u4e8e Docker \u5feb\u901f\u90e8\u7f72"},{"location":"2.quick-start/1.quick-start-overview/#_1","text":"\u4e3b\u673a\u4e0a\u5b89\u88c5\u5982\u4e0b\u5e94\u7528\u7a0b\u5e8f\u3002 \u5e94\u7528\u7a0b\u5e8f \u63a8\u8350\u7248\u672c \u5b98\u65b9\u5b89\u88c5\u53c2\u8003 Docker \u6700\u65b0\u7248\u672c Install Docker Engine Docker Compose \u6700\u65b0\u7248\u672c Install Docker Compose Git \u6700\u65b0\u7248\u672c Download Git \u5982\u679c\u4f7f\u7528\u975e root \u7528\u6237\u90e8\u7f72NebulaGraph\uff0c\u8bf7\u6388\u6743\u8be5\u7528\u6237 Docker \u76f8\u5173\u7684\u6743\u9650\u3002\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u89c1 Manage Docker as a non-root user \u3002 \u542f\u52a8\u4e3b\u673a\u4e0a\u7684 Docker \u670d\u52a1\u3002 \u5982\u679c\u5df2\u7ecf\u901a\u8fc7 Docker Compose \u5728\u4e3b\u673a\u4e0a\u90e8\u7f72\u4e86\u53e6\u4e00\u4e2a\u7248\u672c\u7684NebulaGraph\uff0c\u4e3a\u907f\u514d\u517c\u5bb9\u6027\u95ee\u9898\uff0c\u9700\u8981\u5220\u9664\u76ee\u5f55 nebula-docker-compose/data \u3002","title":"\u524d\u63d0\u6761\u4ef6"},{"location":"2.quick-start/1.quick-start-overview/#nebulagraph","text":"\u901a\u8fc7 Git \u514b\u9686 nebula-docker-compose \u4ed3\u5e93\u7684 3.6.0 \u5206\u652f\u5230\u4e3b\u673a\u3002 Danger master \u5206\u652f\u5305\u542b\u6700\u65b0\u7684\u672a\u6d4b\u8bd5\u4ee3\u7801\u3002\u8bf7 \u4e0d\u8981 \u5728\u751f\u4ea7\u73af\u5883\u4f7f\u7528\u6b64\u7248\u672c\u3002 $ git clone -b release-3.6 https://github.com/vesoft-inc/nebula-docker-compose.git Note Docker Compose \u7684 x.y \u7248\u672c\u5bf9\u9f50\u5185\u6838\u7684 x.y \u7248\u672c\uff0c\u5bf9\u4e8e\u5185\u6838 z \u7248\u672c\uff0cDocker Compose \u4e0d\u4f1a\u53d1\u5e03\u5bf9\u5e94\u7684 z \u7248\u672c\uff0c\u4f46\u662f\u4f1a\u62c9\u53d6 z \u7248\u672c\u7684\u5185\u6838\u955c\u50cf\u3002 \u5207\u6362\u81f3\u76ee\u5f55 nebula-docker-compose \u3002 $ cd nebula-docker-compose/ \u6267\u884c\u5982\u4e0b\u547d\u4ee4\u542f\u52a8NebulaGraph\u670d\u52a1\u3002 Note \u5982\u679c\u957f\u671f\u672a\u5185\u6838\u66f4\u65b0\u955c\u50cf\uff0c\u8bf7\u5148\u66f4\u65b0 NebulaGraph\u955c\u50cf \u548c NebulaGraph Console \u955c\u50cf \u3002 \u6267\u884c\u547d\u4ee4\u540e\u7684\u8fd4\u56de\u7ed3\u679c\u56e0\u5b89\u88c5\u76ee\u5f55\u4e0d\u540c\u800c\u4e0d\u540c\u3002 [ nebula-docker-compose ] $ docker-compose up -d Creating nebula-docker-compose_metad0_1 ... done Creating nebula-docker-compose_metad2_1 ... done Creating nebula-docker-compose_metad1_1 ... done Creating nebula-docker-compose_storaged0_1 ... done Creating nebula-docker-compose_storaged1_1 ... done Creating nebula-docker-compose_storaged2_1 ... done Compatibility \u4ece 3.1 \u7248\u672c\u5f00\u59cb\uff0cDocker-compose \u4f1a\u81ea\u52a8\u542f\u52a8 NebulaGraph Console \u955c\u50cf\u7684\u5bb9\u5668\uff0c\u5e76\u5c06 Storage \u4e3b\u673a\u589e\u52a0\u81f3\u96c6\u7fa4\u4e2d\uff08\u5373 ADD HOSTS \u547d\u4ee4\uff09\u3002 Note \u4e0a\u8ff0\u670d\u52a1\u7684\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u89c1 \u67b6\u6784\u603b\u89c8 \u3002","title":"\u90e8\u7f72NebulaGraph"},{"location":"2.quick-start/1.quick-start-overview/#nebulagraph_1","text":"\u8fde\u63a5NebulaGraph\u6709\u4e24\u79cd\u65b9\u5f0f\uff1a \u5728\u5bb9\u5668\u5916\u901a\u8fc7 Nebula Console \u8fde\u63a5\u3002\u56e0\u4e3a\u5bb9\u5668\u7684\u914d\u7f6e\u6587\u4ef6\u4e2d\u5c06 Graph \u670d\u52a1\u7684\u5916\u90e8\u6620\u5c04\u7aef\u53e3\u4e5f\u56fa\u5b9a\u4e3a 9669\uff0c\u56e0\u6b64\u53ef\u4ee5\u76f4\u63a5\u901a\u8fc7\u9ed8\u8ba4\u7aef\u53e3\u8fde\u63a5\u3002\u8be6\u60c5\u53c2\u89c1 \u8fde\u63a5NebulaGraph \u3002 \u767b\u5f55\u5b89\u88c5\u4e86 NebulaGraph Console \u7684\u5bb9\u5668\uff0c\u7136\u540e\u518d\u8fde\u63a5 Graph \u670d\u52a1\u3002\u672c\u5c0f\u8282\u4ecb\u7ecd\u8fd9\u79cd\u65b9\u5f0f\u3002 \u4f7f\u7528 docker-compose ps \u547d\u4ee4\u67e5\u770b NebulaGraph Console \u5bb9\u5668\u540d\u79f0\u3002 $ docker-compose ps Name Command State Ports ---------------------------------------------------------------------------------------------- nebula-docker-compose_console_1 sh -c sleep 3 && Up nebula-co ... ...... \u8fdb\u5165 NebulaGraph Console \u5bb9\u5668\u4e2d\u3002 $ docker exec -it nebula-docker-compose_console_1 /bin/sh / # \u901a\u8fc7 NebulaGraph Console \u8fde\u63a5NebulaGraph\u3002 / # ./usr/local/bin/nebula-console -u <user_name> -p <password> --address=graphd --port=9669 Note \u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u8eab\u4efd\u8ba4\u8bc1\u529f\u80fd\u662f\u5173\u95ed\u7684\uff0c\u53ea\u80fd\u4f7f\u7528\u5df2\u5b58\u5728\u7684\u7528\u6237\u540d\uff08\u9ed8\u8ba4\u4e3a root \uff09\u548c\u4efb\u610f\u5bc6\u7801\u767b\u5f55\u3002\u5982\u679c\u60f3\u4f7f\u7528\u8eab\u4efd\u8ba4\u8bc1\uff0c\u8bf7\u53c2\u89c1 \u8eab\u4efd\u8ba4\u8bc1 \u3002 \u67e5\u770b\u96c6\u7fa4\u72b6\u6001\u3002 nebula> SHOW HOSTS ; +-------------+------+----------+--------------+----------------------+------------------------+---------+ | Host | Port | Status | Leader count | Leader distribution | Partition distribution | Version | +-------------+------+----------+--------------+----------------------+------------------------+---------+ | \"storaged0\" | 9779 | \"ONLINE\" | 0 | \"No valid partition\" | \"No valid partition\" | \"3.6.0\" | | \"storaged1\" | 9779 | \"ONLINE\" | 0 | \"No valid partition\" | \"No valid partition\" | \"3.6.0\" | | \"storaged2\" | 9779 | \"ONLINE\" | 0 | \"No valid partition\" | \"No valid partition\" | \"3.6.0\" | +-------------+------+----------+--------------+----------------------+------------------------+---------+ \u6267\u884c\u4e24\u6b21 exit \u53ef\u4ee5\u9000\u51fa\u5bb9\u5668\u3002","title":"\u8fde\u63a5NebulaGraph"},{"location":"2.quick-start/1.quick-start-overview/#nebulagraph_2","text":"\u6267\u884c\u547d\u4ee4 docker-compose ps \u53ef\u4ee5\u5217\u51faNebulaGraph\u670d\u52a1\u7684\u72b6\u6001\u548c\u7aef\u53e3\u3002 Note NebulaGraph\u9ed8\u8ba4\u4f7f\u7528 9669 \u7aef\u53e3\u4e3a\u5ba2\u6237\u7aef\u63d0\u4f9b\u670d\u52a1\uff0c\u5982\u679c\u9700\u8981\u4fee\u6539\u7aef\u53e3\uff0c\u8bf7\u4fee\u6539\u76ee\u5f55 nebula-docker-compose \u5185\u7684\u6587\u4ef6 docker-compose.yaml \uff0c\u7136\u540e\u91cd\u542fNebulaGraph\u670d\u52a1\u3002 $ docker-compose ps nebula-docker-compose_console_1 sh -c sleep 3 && Up nebula-co ... nebula-docker-compose_graphd1_1 /usr/local/nebula/bin/nebu ... Up 0 .0.0.0:49174->19669/tcp,:::49174->19669/tcp, 0 .0.0.0:49171->19670/tcp,:::49171->19670/tcp, 0 .0.0.0:49177->9669/tcp,:::49177->9669/tcp nebula-docker-compose_graphd2_1 /usr/local/nebula/bin/nebu ... Up 0 .0.0.0:49175->19669/tcp,:::49175->19669/tcp, 0 .0.0.0:49172->19670/tcp,:::49172->19670/tcp, 0 .0.0.0:49178->9669/tcp,:::49178->9669/tcp nebula-docker-compose_graphd_1 /usr/local/nebula/bin/nebu ... Up 0 .0.0.0:49180->19669/tcp,:::49180->19669/tcp, 0 .0.0.0:49179->19670/tcp,:::49179->19670/tcp, 0 .0.0.0:9669->9669/tcp,:::9669->9669/tcp nebula-docker-compose_metad0_1 /usr/local/nebula/bin/nebu ... Up 0 .0.0.0:49157->19559/tcp,:::49157->19559/tcp, 0 .0.0.0:49154->19560/tcp,:::49154->19560/tcp, 0 .0.0.0:49160->9559/tcp,:::49160->9559/tcp, 9560 /tcp nebula-docker-compose_metad1_1 /usr/local/nebula/bin/nebu ... Up 0 .0.0.0:49156->19559/tcp,:::49156->19559/tcp, 0 .0.0.0:49153->19560/tcp,:::49153->19560/tcp, 0 .0.0.0:49159->9559/tcp,:::49159->9559/tcp, 9560 /tcp nebula-docker-compose_metad2_1 /usr/local/nebula/bin/nebu ... Up 0 .0.0.0:49158->19559/tcp,:::49158->19559/tcp, 0 .0.0.0:49155->19560/tcp,:::49155->19560/tcp, 0 .0.0.0:49161->9559/tcp,:::49161->9559/tcp, 9560 /tcp nebula-docker-compose_storaged0_1 /usr/local/nebula/bin/nebu ... Up 0 .0.0.0:49166->19779/tcp,:::49166->19779/tcp, 0 .0.0.0:49163->19780/tcp,:::49163->19780/tcp, 9777 /tcp, 9778 /tcp, 0 .0.0.0:49169->9779/tcp,:::49169->9779/tcp, 9780 /tcp nebula-docker-compose_storaged1_1 /usr/local/nebula/bin/nebu ... Up 0 .0.0.0:49165->19779/tcp,:::49165->19779/tcp, 0 .0.0.0:49162->19780/tcp,:::49162->19780/tcp, 9777 /tcp, 9778 /tcp, 0 .0.0.0:49168->9779/tcp,:::49168->9779/tcp, 9780 /tcp nebula-docker-compose_storaged2_1 /usr/local/nebula/bin/nebu ... Up 0 .0.0.0:49167->19779/tcp,:::49167->19779/tcp, 0 .0.0.0:49164->19780/tcp,:::49164->19780/tcp, 9777 /tcp, 9778 /tcp, 0 .0.0.0:49170->9779/tcp,:::49170->9779/tcp, 9780 /tcp \u5982\u679c\u670d\u52a1\u6709\u5f02\u5e38\uff0c\u7528\u6237\u53ef\u4ee5\u5148\u786e\u8ba4\u5f02\u5e38\u7684\u5bb9\u5668\u540d\u79f0\uff08\u4f8b\u5982 nebula-docker-compose_graphd2_1 \uff09, \u7136\u540e\u6267\u884c docker ps \u67e5\u770b\u5bf9\u5e94\u7684 CONTAINER ID \uff08\u793a\u4f8b\u4e3a 2a6c56c405f5 )\u3002 [ nebula-docker-compose ] $ docker ps CONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES 2a6c56c405f5 vesoft/nebula-graphd:nightly \"/usr/local/nebula/b\u2026\" 36 minutes ago Up 36 minutes ( healthy ) 0 .0.0.0:49230->9669/tcp, 0 .0.0.0:49229->19669/tcp, 0 .0.0.0:49228->19670/tcp nebula-docker-compose_graphd2_1 7042e0a8e83d vesoft/nebula-storaged:nightly \"./bin/nebula-storag\u2026\" 36 minutes ago Up 36 minutes ( healthy ) 9777 -9778/tcp, 9780 /tcp, 0 .0.0.0:49227->9779/tcp, 0 .0.0.0:49226->19779/tcp, 0 .0.0.0:49225->19780/tcp nebula-docker-compose_storaged2_1 18e3ea63ad65 vesoft/nebula-storaged:nightly \"./bin/nebula-storag\u2026\" 36 minutes ago Up 36 minutes ( healthy ) 9777 -9778/tcp, 9780 /tcp, 0 .0.0.0:49219->9779/tcp, 0 .0.0.0:49218->19779/tcp, 0 .0.0.0:49217->19780/tcp nebula-docker-compose_storaged0_1 4dcabfe8677a vesoft/nebula-graphd:nightly \"/usr/local/nebula/b\u2026\" 36 minutes ago Up 36 minutes ( healthy ) 0 .0.0.0:49224->9669/tcp, 0 .0.0.0:49223->19669/tcp, 0 .0.0.0:49222->19670/tcp nebula-docker-compose_graphd1_1 a74054c6ae25 vesoft/nebula-graphd:nightly \"/usr/local/nebula/b\u2026\" 36 minutes ago Up 36 minutes ( healthy ) 0 .0.0.0:9669->9669/tcp, 0 .0.0.0:49221->19669/tcp, 0 .0.0.0:49220->19670/tcp nebula-docker-compose_graphd_1 880025a3858c vesoft/nebula-storaged:nightly \"./bin/nebula-storag\u2026\" 36 minutes ago Up 36 minutes ( healthy ) 9777 -9778/tcp, 9780 /tcp, 0 .0.0.0:49216->9779/tcp, 0 .0.0.0:49215->19779/tcp, 0 .0.0.0:49214->19780/tcp nebula-docker-compose_storaged1_1 45736a32a23a vesoft/nebula-metad:nightly \"./bin/nebula-metad \u2026\" 36 minutes ago Up 36 minutes ( healthy ) 9560 /tcp, 0 .0.0.0:49213->9559/tcp, 0 .0.0.0:49212->19559/tcp, 0 .0.0.0:49211->19560/tcp nebula-docker-compose_metad0_1 3b2c90eb073e vesoft/nebula-metad:nightly \"./bin/nebula-metad \u2026\" 36 minutes ago Up 36 minutes ( healthy ) 9560 /tcp, 0 .0.0.0:49207->9559/tcp, 0 .0.0.0:49206->19559/tcp, 0 .0.0.0:49205->19560/tcp nebula-docker-compose_metad2_1 7bb31b7a5b3f vesoft/nebula-metad:nightly \"./bin/nebula-metad \u2026\" 36 minutes ago Up 36 minutes ( healthy ) 9560 /tcp, 0 .0.0.0:49210->9559/tcp, 0 .0.0.0:49209->19559/tcp, 0 .0.0.0:49208->19560/tcp nebula-docker-compose_metad1_1 \u6700\u540e\u767b\u5f55\u5bb9\u5668\u6392\u67e5\u95ee\u9898 [ nebula-docker-compose ] $ docker exec -it 2a6c56c405f5 bash [ root@2a6c56c405f5 nebula ] #","title":"\u67e5\u770bNebulaGraph\u670d\u52a1\u7684\u72b6\u6001\u548c\u7aef\u53e3"},{"location":"2.quick-start/1.quick-start-overview/#nebulagraph_3","text":"NebulaGraph\u7684\u6240\u6709\u6570\u636e\u548c\u65e5\u5fd7\u90fd\u6301\u4e45\u5316\u5b58\u50a8\u5728 nebula-docker-compose/data \u548c nebula-docker-compose/logs \u76ee\u5f55\u4e2d\u3002 \u76ee\u5f55\u7684\u7ed3\u6784\u5982\u4e0b\uff1a nebula-docker-compose/ |-- docker-compose.yaml \u251c\u2500\u2500 data \u2502 \u251c\u2500\u2500 meta0 \u2502 \u251c\u2500\u2500 meta1 \u2502 \u251c\u2500\u2500 meta2 \u2502 \u251c\u2500\u2500 storage0 \u2502 \u251c\u2500\u2500 storage1 \u2502 \u2514\u2500\u2500 storage2 \u2514\u2500\u2500 logs \u251c\u2500\u2500 graph \u251c\u2500\u2500 graph1 \u251c\u2500\u2500 graph2 \u251c\u2500\u2500 meta0 \u251c\u2500\u2500 meta1 \u251c\u2500\u2500 meta2 \u251c\u2500\u2500 storage0 \u251c\u2500\u2500 storage1 \u2514\u2500\u2500 storage2","title":"\u67e5\u770bNebulaGraph\u670d\u52a1\u7684\u6570\u636e\u548c\u65e5\u5fd7"},{"location":"2.quick-start/1.quick-start-overview/#nebulagraph_4","text":"\u7528\u6237\u53ef\u4ee5\u6267\u884c\u5982\u4e0b\u547d\u4ee4\u505c\u6b62NebulaGraph\u670d\u52a1\uff1a $ docker-compose down \u5982\u679c\u8fd4\u56de\u5982\u4e0b\u4fe1\u606f\uff0c\u8868\u793a\u5df2\u7ecf\u6210\u529f\u505c\u6b62\u670d\u52a1\u3002 Stopping nebula-docker-compose_console_1 ... done Stopping nebula-docker-compose_graphd1_1 ... done Stopping nebula-docker-compose_graphd_1 ... done Stopping nebula-docker-compose_graphd2_1 ... done Stopping nebula-docker-compose_storaged1_1 ... done Stopping nebula-docker-compose_storaged0_1 ... done Stopping nebula-docker-compose_storaged2_1 ... done Stopping nebula-docker-compose_metad2_1 ... done Stopping nebula-docker-compose_metad0_1 ... done Stopping nebula-docker-compose_metad1_1 ... done Removing nebula-docker-compose_console_1 ... done Removing nebula-docker-compose_graphd1_1 ... done Removing nebula-docker-compose_graphd_1 ... done Removing nebula-docker-compose_graphd2_1 ... done Removing nebula-docker-compose_storaged1_1 ... done Removing nebula-docker-compose_storaged0_1 ... done Removing nebula-docker-compose_storaged2_1 ... done Removing nebula-docker-compose_metad2_1 ... done Removing nebula-docker-compose_metad0_1 ... done Removing nebula-docker-compose_metad1_1 ... done Removing network nebula-docker-compose_nebula-net Danger \u547d\u4ee4 docker-compose down -v \u7684\u53c2\u6570 -v \u5c06\u4f1a \u5220\u9664 \u6240\u6709\u672c\u5730\u7684\u6570\u636e\u3002\u5982\u679c\u4f7f\u7528\u7684\u662f nightly \u7248\u672c\uff0c\u5e76\u4e14\u6709\u4e00\u4e9b\u517c\u5bb9\u6027\u95ee\u9898\uff0c\u8bf7\u5c1d\u8bd5\u8fd9\u4e2a\u547d\u4ee4\u3002","title":"\u505c\u6b62NebulaGraph\u670d\u52a1"},{"location":"2.quick-start/1.quick-start-overview/#_2","text":"Docker Compose \u90e8\u7f72\u7684NebulaGraph\uff0c\u914d\u7f6e\u6587\u4ef6\u4f4d\u7f6e\u4e3a nebula-docker-compose/docker-compose.yaml \uff0c\u4fee\u6539\u8be5\u6587\u4ef6\u5185\u7684\u914d\u7f6e\u5e76\u91cd\u542f\u670d\u52a1\u5373\u53ef\u4f7f\u65b0\u914d\u7f6e\u751f\u6548\u3002 \u5177\u4f53\u7684\u914d\u7f6e\u8bf4\u660e\u8bf7\u53c2\u89c1 \u914d\u7f6e\u7ba1\u7406 \u3002","title":"\u4fee\u6539\u914d\u7f6e"},{"location":"2.quick-start/1.quick-start-overview/#_3","text":"","title":"\u5e38\u89c1\u95ee\u9898"},{"location":"2.quick-start/1.quick-start-overview/#docker_1","text":"\u5728\u76ee\u5f55 nebula-docker-compose \u5185\u4fee\u6539\u6587\u4ef6 docker-compose.yaml \uff0c\u5c06\u5bf9\u5e94\u670d\u52a1\u7684 ports \u8bbe\u7f6e\u4e3a\u56fa\u5b9a\u6620\u5c04\uff0c\u4f8b\u5982\uff1a graphd: image: vesoft/nebula-graphd:release-3.6 ... ports: - 9669 :9669 - 19669 - 19670 9669:9669 \u8868\u793a\u5185\u90e8\u7684 9669 \u6620\u5c04\u5230\u5916\u90e8\u7684\u7aef\u53e3\u4e5f\u662f 9669\uff0c\u4e0b\u65b9\u7684 19669 \u8868\u793a\u5185\u90e8\u7684 19669 \u6620\u5c04\u5230\u5916\u90e8\u7684\u7aef\u53e3\u662f\u968f\u673a\u7684\u3002","title":"\u5982\u4f55\u56fa\u5b9a Docker \u6620\u5c04\u5230\u5916\u90e8\u7684\u7aef\u53e3\uff1f"},{"location":"2.quick-start/1.quick-start-overview/#nebulagraph_docker","text":"\u5728\u6587\u4ef6 nebula-docker-compose/docker-compose.yaml \u4e2d\uff0c\u627e\u5230\u6240\u6709\u670d\u52a1\u7684 image \u5e76\u4fee\u6539\u5176\u503c\u4e3a\u76f8\u5e94\u7684\u955c\u50cf\u7248\u672c\u3002 \u5728\u76ee\u5f55 nebula-docker-compose \u5185\u6267\u884c\u547d\u4ee4 docker-compose pull \uff0c\u66f4\u65b0 Graph \u670d\u52a1\u3001Storage \u670d\u52a1\u3001Meta \u670d\u52a1\u548c NebulaGraph Console \u7684\u955c\u50cf\u3002 \u6267\u884c\u547d\u4ee4 docker-compose up -d \u542f\u52a8NebulaGraph\u670d\u52a1\u3002 \u901a\u8fc7 NebulaGraph Console \u8fde\u63a5NebulaGraph\u540e\uff0c\u5206\u522b\u6267\u884c\u547d\u4ee4 SHOW HOSTS GRAPH \u3001 SHOW HOSTS STORAGE \u3001 SHOW HOSTS META \u67e5\u770b\u5404\u670d\u52a1\u7248\u672c\u3002","title":"\u5982\u4f55\u5347\u7ea7/\u66f4\u65b0NebulaGraph\u670d\u52a1\u7684 Docker \u955c\u50cf\uff1f"},{"location":"2.quick-start/1.quick-start-overview/#docker-compose_pullerror_toomanyrequests","text":"\u53ef\u80fd\u9047\u5230\u5982\u4e0b\u9519\u8bef\uff1a ERROR: toomanyrequests: You have reached your pull rate limit. You may increase the limit by authenticating and upgrading: https://www.docker.com/increase-rate-limit \u4ee5\u4e0a\u9519\u8bef\u8868\u793a\u5df2\u8fbe\u5230 Docker Hub \u7684\u901f\u7387\u9650\u5236\u3002\u89e3\u51b3\u65b9\u6848\u8bf7\u53c2\u89c1 Understanding Docker Hub Rate Limiting \u3002","title":"\u6267\u884c\u547d\u4ee4docker-compose pull\u62a5\u9519ERROR: toomanyrequests"},{"location":"2.quick-start/1.quick-start-overview/#nebulagraph_console","text":"docker-compose pull \u4f1a\u540c\u65f6\u66f4\u65b0NebulaGraph\u670d\u52a1\u548c NebulaGraph Console\u3002","title":"\u5982\u4f55\u66f4\u65b0 NebulaGraph Console\uff1f"},{"location":"2.quick-start/2.start-free-trial-on-cloud/","text":"\u4ece\u4e91\u5f00\u59cb\uff08\u514d\u8d39\u8bd5\u7528\uff09 \u00b6 \u7528\u6237\u53ef\u4ee5\u5728\u963f\u91cc\u4e91\u4e91\u5e02\u573a\u4e0a\u514d\u8d39\u8bd5\u7528NebulaGraph\u3002\u65e0\u9700\u4e0b\u8f7d\u548c\u5b89\u88c5\u4efb\u4f55\u8f6f\u4ef6\uff0c\u53ea\u9700\u7b80\u5355\u7684\u70b9\u51fb\u64cd\u4f5c\uff0c\u5373\u53ef\u5728\u4e91\u7aef\u4f53\u9a8c\u5230NebulaGraph\u7684\u5f3a\u5927\u529f\u80fd\u3002\u7acb\u5373\u5355\u51fb \u514d\u8d39\u8bd5\u7528 \uff0c\u63a2\u7d22NebulaGraph\u7684\u9b45\u529b\u3002","title":"\u4ece\u4e91\u5f00\u59cb\uff08\u514d\u8d39\u8bd5\u7528\uff09"},{"location":"2.quick-start/2.start-free-trial-on-cloud/#_1","text":"\u7528\u6237\u53ef\u4ee5\u5728\u963f\u91cc\u4e91\u4e91\u5e02\u573a\u4e0a\u514d\u8d39\u8bd5\u7528NebulaGraph\u3002\u65e0\u9700\u4e0b\u8f7d\u548c\u5b89\u88c5\u4efb\u4f55\u8f6f\u4ef6\uff0c\u53ea\u9700\u7b80\u5355\u7684\u70b9\u51fb\u64cd\u4f5c\uff0c\u5373\u53ef\u5728\u4e91\u7aef\u4f53\u9a8c\u5230NebulaGraph\u7684\u5f3a\u5927\u529f\u80fd\u3002\u7acb\u5373\u5355\u51fb \u514d\u8d39\u8bd5\u7528 \uff0c\u63a2\u7d22NebulaGraph\u7684\u9b45\u529b\u3002","title":"\u4ece\u4e91\u5f00\u59cb\uff08\u514d\u8d39\u8bd5\u7528\uff09"},{"location":"2.quick-start/6.cheatsheet-for-ngql-command/","text":"nGQL \u547d\u4ee4\u6c47\u603b \u00b6 \u51fd\u6570 \u00b6 \u6570\u5b66\u51fd\u6570 \u51fd\u6570 \u8bf4\u660e double abs(double x) \u8fd4\u56de x \u7684\u7edd\u5bf9\u503c\u3002 double floor(double x) \u8fd4\u56de\u5c0f\u4e8e\u6216\u7b49\u4e8e x \u7684\u6700\u5927\u6574\u6570\u3002 double ceil(double x) \u8fd4\u56de\u5927\u4e8e\u6216\u7b49\u4e8e x \u7684\u6700\u5c0f\u6574\u6570\u3002 double round(double x) \u8fd4\u56de\u79bb x \u6700\u8fd1\u7684\u6574\u6570\u503c\uff0c\u5982\u679c x \u6070\u597d\u5728\u4e2d\u95f4\uff0c\u5219\u8fd4\u56de\u79bb 0 \u8f83\u8fdc\u7684\u6574\u6570\u3002 double sqrt(double x) \u8fd4\u56de x \u7684\u5e73\u65b9\u6839\u3002 double cbrt(double x) \u8fd4\u56de x \u7684\u7acb\u65b9\u6839\u3002 double hypot(double x, double y) \u8fd4\u56de\u76f4\u89d2\u4e09\u89d2\u5f62\uff08\u76f4\u89d2\u8fb9\u957f\u4e3a x \u548c y\uff09\u7684\u659c\u8fb9\u957f\u3002 double pow(double x, double y) \u8fd4\u56de x y \u7684\u503c\u3002 double exp(double x) \u8fd4\u56de e x \u7684\u503c\u3002 double exp2(double x) \u8fd4\u56de 2 x \u7684\u503c\u3002 double log(double x) \u8fd4\u56de\u4ee5\u81ea\u7136\u6570 e \u4e3a\u5e95 x \u7684\u5bf9\u6570\u3002 double log2(double x) \u8fd4\u56de\u4ee5 2 \u4e3a\u5e95 x \u7684\u5bf9\u6570\u3002 double log10(double x) \u8fd4\u56de\u4ee5 10 \u4e3a\u5e95 x \u7684\u5bf9\u6570\u3002 double sin(double x) \u8fd4\u56de x \u7684\u6b63\u5f26\u503c\u3002 double asin(double x) \u8fd4\u56de x \u7684\u53cd\u6b63\u5f26\u503c\u3002 double cos(double x) \u8fd4\u56de x \u7684\u4f59\u5f26\u503c\u3002 double acos(double x) \u8fd4\u56de x \u7684\u53cd\u4f59\u5f26\u503c\u3002 double tan(double x) \u8fd4\u56de x \u7684\u6b63\u5207\u503c\u3002 double atan(double x) \u8fd4\u56de x \u7684\u53cd\u6b63\u5207\u503c\u3002 double rand() \u8fd4\u56de [0,1) \u5185\u7684\u968f\u673a\u6d6e\u70b9\u6570\u3002 int rand32(int min, int max) \u8fd4\u56de [min, max) \u5185\u7684\u4e00\u4e2a\u968f\u673a 32 \u4f4d\u6574\u6570\u3002 \u7528\u6237\u53ef\u4ee5\u53ea\u4f20\u5165\u4e00\u4e2a\u53c2\u6570\uff0c\u8be5\u53c2\u6570\u4f1a\u5224\u5b9a\u4e3a max \uff0c\u6b64\u65f6 min \u9ed8\u8ba4\u4e3a 0 \u3002 \u5982\u679c\u4e0d\u4f20\u5165\u53c2\u6570\uff0c\u6b64\u65f6\u4f1a\u4ece\u5e26\u7b26\u53f7\u7684 32 \u4f4d int \u8303\u56f4\u5185\u968f\u673a\u8fd4\u56de\u3002 int rand64(int min, int max) \u8fd4\u56de [min, max) \u5185\u7684\u4e00\u4e2a\u968f\u673a 64 \u4f4d\u6574\u6570\u3002 \u7528\u6237\u53ef\u4ee5\u53ea\u4f20\u5165\u4e00\u4e2a\u53c2\u6570\uff0c\u8be5\u53c2\u6570\u4f1a\u5224\u5b9a\u4e3a max \uff0c\u6b64\u65f6 min \u9ed8\u8ba4\u4e3a 0 \u3002 \u5982\u679c\u4e0d\u4f20\u5165\u53c2\u6570\uff0c\u6b64\u65f6\u4f1a\u4ece\u5e26\u7b26\u53f7\u7684 64 \u4f4d int \u8303\u56f4\u5185\u968f\u673a\u8fd4\u56de\u3002 bit_and() \u9010\u4f4d\u505a AND \u64cd\u4f5c\u3002 bit_or() \u9010\u4f4d\u505a OR \u64cd\u4f5c\u3002 bit_xor() \u9010\u4f4d\u505a XOR \u64cd\u4f5c\u3002 int size() \u8fd4\u56de\u5217\u8868\u6216\u6620\u5c04\u4e2d\u5143\u7d20\u7684\u6570\u91cf\uff0c\u6216\u5b57\u7b26\u4e32\u7684\u957f\u5ea6\u3002 int range(int start, int end, int step) \u8fd4\u56de [start,end] \u4e2d\u6307\u5b9a\u6b65\u957f\u7684\u503c\u7ec4\u6210\u7684\u5217\u8868\u3002\u6b65\u957f step \u9ed8\u8ba4\u4e3a 1\u3002 int sign(double x) \u8fd4\u56de x \u7684\u6b63\u8d1f\u53f7\u3002 \u5982\u679c x \u4e3a 0 \uff0c\u5219\u8fd4\u56de 0 \u3002 \u5982\u679c x \u4e3a\u8d1f\u6570\uff0c\u5219\u8fd4\u56de -1 \u3002 \u5982\u679c x \u4e3a\u6b63\u6570\uff0c\u5219\u8fd4\u56de 1 \u3002 double e() \u8fd4\u56de\u81ea\u7136\u5bf9\u6570\u7684\u5e95 e\uff082.718281828459045\uff09\u3002 double pi() \u8fd4\u56de\u6570\u5b66\u5e38\u6570\u03c0\uff083.141592653589793\uff09\u3002 double radians() \u5c06\u89d2\u5ea6\u8f6c\u6362\u4e3a\u5f27\u5ea6\u3002 radians(180) \u8fd4\u56de 3.141592653589793 \u3002 \u805a\u5408\u51fd\u6570 \u51fd\u6570 \u8bf4\u660e avg() \u8fd4\u56de\u53c2\u6570\u7684\u5e73\u5747\u503c\u3002 count() \u8bed\u6cd5\uff1a count({expr | *}) \u3002 count() \u8fd4\u56de\u603b\u884c\u6570\uff08\u5305\u62ec NULL\uff09\u3002 count(expr) \u8fd4\u56de\u6ee1\u8db3\u8868\u8fbe\u5f0f\u7684\u975e\u7a7a\u503c\u7684\u603b\u6570\u3002 count() \u548c size() \u662f\u4e0d\u540c\u7684\u3002 max() \u8fd4\u56de\u53c2\u6570\u7684\u6700\u5927\u503c\u3002 min() \u8fd4\u56de\u53c2\u6570\u7684\u6700\u5c0f\u503c\u3002 collect() collect() \u51fd\u6570\u8fd4\u56de\u4e00\u4e2a\u7b26\u5408\u8868\u8fbe\u5f0f\u8fd4\u56de\u7ed3\u679c\u7684\u5217\u8868\u3002\u8be5\u51fd\u6570\u53ef\u4ee5\u5c06\u591a\u6761\u8bb0\u5f55\u6216\u503c\u5408\u5e76\u8fdb\u4e00\u4e2a\u5217\u8868\uff0c\u5b9e\u73b0\u6570\u636e\u805a\u5408\u3002 std() \u8fd4\u56de\u53c2\u6570\u7684\u603b\u4f53\u6807\u51c6\u5dee\u3002 sum() \u8fd4\u56de\u53c2\u6570\u7684\u548c\u3002 \u5b57\u7b26\u4e32\u51fd\u6570 \u51fd\u6570 \u8bf4\u660e int strcasecmp(string a, string b) \u6bd4\u8f83\u4e24\u4e2a\u5b57\u7b26\u4e32\uff08\u4e0d\u533a\u5206\u5927\u5c0f\u5199\uff09\u3002\u5f53 a=b \u65f6\uff0c\u8fd4\u56de 0\uff0c\u5f53 a>b \u662f\uff0c\u8fd4\u56de\u5927\u4e8e 0 \u7684\u6570\uff0c\u5f53 a<b \u65f6\uff0c\u8fd4\u56de\u5c0f\u4e8e 0 \u7684\u6570\u3002 string lower(string a) \u8fd4\u56de\u5c0f\u5199\u5f62\u5f0f\u7684\u5b57\u7b26\u4e32\u3002 string toLower(string a) \u548c lower() \u76f8\u540c\u3002 string upper(string a) \u8fd4\u56de\u5927\u5199\u5f62\u5f0f\u7684\u5b57\u7b26\u4e32\u3002 string toUpper(string a) \u548c upper() \u76f8\u540c\u3002 int length(a) \u8fd4\u56de\u7ed9\u5b9a\u5b57\u7b26\u4e32\u7684\u957f\u5ea6\u6216\u8def\u5f84\u7684\u957f\u5ea6\uff0c\u5355\u4f4d\u5206\u522b\u662f\u5b57\u8282\u548c\u8df3\u6570\u3002 string trim(string a) \u5220\u9664\u5b57\u7b26\u4e32\u5934\u90e8\u548c\u5c3e\u90e8\u7684\u7a7a\u683c\u3002 string ltrim(string a) \u5220\u9664\u5b57\u7b26\u4e32\u5934\u90e8\u7684\u7a7a\u683c\u3002 string rtrim(string a) \u5220\u9664\u5b57\u7b26\u4e32\u5c3e\u90e8\u7684\u7a7a\u683c\u3002 string left(string a, int count) \u8fd4\u56de\u5b57\u7b26\u4e32\u5de6\u4fa7 count \u4e2a\u5b57\u7b26\u7ec4\u6210\u7684\u5b50\u5b57\u7b26\u4e32\u3002\u5982\u679c count \u8d85\u8fc7\u5b57\u7b26\u4e32 a \u7684\u957f\u5ea6\uff0c\u5219\u8fd4\u56de\u5b57\u7b26\u4e32 a\u3002 string right(string a, int count) \u8fd4\u56de\u5b57\u7b26\u4e32\u53f3\u4fa7 count \u4e2a\u5b57\u7b26\u7ec4\u6210\u7684\u5b50\u5b57\u7b26\u4e32\u3002\u5982\u679c count \u8d85\u8fc7\u5b57\u7b26\u4e32 a \u7684\u957f\u5ea6\uff0c\u5219\u8fd4\u56de\u5b57\u7b26\u4e32 a\u3002 string lpad(string a, int size, string letters) \u5728\u5b57\u7b26\u4e32 a \u7684\u5de6\u4fa7\u586b\u5145 letters \u5b57\u7b26\u4e32\uff0c\u5e76\u8fd4\u56de size \u957f\u5ea6\u7684\u5b57\u7b26\u4e32\u3002 string rpad(string a, int size, string letters) \u5728\u5b57\u7b26\u4e32 a \u7684\u53f3\u4fa7\u586b\u5145 letters \u5b57\u7b26\u4e32\uff0c\u5e76\u8fd4\u56de size \u957f\u5ea6\u7684\u5b57\u7b26\u4e32\u3002 string substr(string a, int pos, int count) \u4ece\u5b57\u7b26\u4e32 a \u7684\u6307\u5b9a\u4f4d\u7f6e pos \u5f00\u59cb\uff08\u4e0d\u5305\u62ec pos \u4f4d\u7f6e\u7684\u5b57\u7b26\uff09\uff0c\u63d0\u53d6\u53f3\u4fa7\u7684 count \u4e2a\u5b57\u7b26\uff0c\u7ec4\u6210\u65b0\u7684\u5b57\u7b26\u4e32\u5e76\u8fd4\u56de\u3002 string substring(string a, int pos, int count) \u548c substr() \u76f8\u540c\u3002 string reverse(string) \u9006\u5e8f\u8fd4\u56de\u5b57\u7b26\u4e32\u3002 string replace(string a, string b, string c) \u5c06\u5b57\u7b26\u4e32 a \u4e2d\u7684\u5b50\u5b57\u7b26\u4e32 b \u66ff\u6362\u4e3a\u5b57\u7b26\u4e32 c\u3002 list split(string a, string b) \u5728\u5b50\u5b57\u7b26\u4e32 b \u5904\u62c6\u5206\u5b57\u7b26\u4e32 a\uff0c\u8fd4\u56de\u4e00\u4e2a\u5b57\u7b26\u4e32\u5217\u8868\u3002 concat() concat() \u51fd\u6570\u81f3\u5c11\u9700\u8981\u4e24\u4e2a\u6216\u4ee5\u4e0a\u5b57\u7b26\u4e32\u53c2\u6570\uff0c\u5e76\u5c06\u6240\u6709\u53c2\u6570\u8fde\u63a5\u6210\u4e00\u4e2a\u5b57\u7b26\u4e32\u3002 \u8bed\u6cd5\uff1a concat(string1,string2,...) concat_ws() concat_ws() \u51fd\u6570\u5c06\u4e24\u4e2a\u6216\u4ee5\u4e0a\u5b57\u7b26\u4e32\u53c2\u6570\u4e0e\u9884\u5b9a\u4e49\u7684\u5206\u9694\u7b26\uff08separator\uff09\u76f8\u8fde\u63a5\u3002 extract() extract() \u4ece\u6307\u5b9a\u5b57\u7b26\u4e32\u4e2d\u63d0\u53d6\u7b26\u5408\u6b63\u5219\u8868\u8fbe\u5f0f\u7684\u5b50\u5b57\u7b26\u4e32\u3002 json_extract() json_extract() \u5c06\u6307\u5b9a JSON \u5b57\u7b26\u4e32\u8f6c\u6362\u4e3a map \u7c7b\u578b\u3002 \u65e5\u671f\u65f6\u95f4\u51fd\u6570 \u51fd\u6570 \u8bf4\u660e int now() \u6839\u636e\u5f53\u524d\u7cfb\u7edf\u8fd4\u56de\u5f53\u524d\u65f6\u95f4\u6233\u3002 timestamp timestamp() \u6839\u636e\u5f53\u524d\u7cfb\u7edf\u8fd4\u56de\u5f53\u524d\u65f6\u95f4\u6233\u3002 date date() \u6839\u636e\u5f53\u524d\u7cfb\u7edf\u8fd4\u56de\u5f53\u524d\u65e5\u671f\uff08UTC \u65f6\u95f4\uff09\u3002 time time() \u6839\u636e\u5f53\u524d\u7cfb\u7edf\u8fd4\u56de\u5f53\u524d\u65f6\u95f4\uff08UTC \u65f6\u95f4\uff09\u3002 datetime datetime() \u6839\u636e\u5f53\u524d\u7cfb\u7edf\u8fd4\u56de\u5f53\u524d\u65e5\u671f\u548c\u65f6\u95f4\uff08UTC \u65f6\u95f4\uff09\u3002 Schema \u76f8\u5173\u51fd\u6570 \u539f\u751f nGQL \u8bed\u53e5\u9002\u7528 \u51fd\u6570 \u8bf4\u660e id(vertex) \u8fd4\u56de\u70b9 ID\u3002\u6570\u636e\u7c7b\u578b\u548c\u70b9 ID \u7684\u7c7b\u578b\u4fdd\u6301\u4e00\u81f4\u3002 map properties(vertex) \u8fd4\u56de\u70b9\u7684\u6240\u6709\u5c5e\u6027\u3002 map properties(edge) \u8fd4\u56de\u8fb9\u7684\u6240\u6709\u5c5e\u6027\u3002 string type(edge) \u8fd4\u56de\u8fb9\u7684 Edge type\u3002 src(edge) \u8fd4\u56de\u8fb9\u7684\u8d77\u59cb\u70b9 ID\u3002\u6570\u636e\u7c7b\u578b\u548c\u70b9 ID \u7684\u7c7b\u578b\u4fdd\u6301\u4e00\u81f4\u3002 dst(edge) \u8fd4\u56de\u8fb9\u7684\u76ee\u7684\u70b9 ID\u3002\u6570\u636e\u7c7b\u578b\u548c\u70b9 ID \u7684\u7c7b\u578b\u4fdd\u6301\u4e00\u81f4\u3002 int rank(edge) \u8fd4\u56de\u8fb9\u7684 rank\u3002 vertex \u8fd4\u56de\u70b9\u7684\u4fe1\u606f\u3002\u5305\u62ec\u70b9 ID\u3001Tag\u3001\u5c5e\u6027\u548c\u503c\u3002 edge \u8fd4\u56de\u8fb9\u7684\u4fe1\u606f\u3002\u5305\u62ec Edge type\u3001\u8d77\u59cb\u70b9 ID\u3001\u76ee\u7684\u70b9 ID\u3001rank\u3001\u5c5e\u6027\u548c\u503c\u3002 vertices \u8fd4\u56de\u5b50\u56fe\u4e2d\u7684\u70b9\u7684\u4fe1\u606f\u3002\u8be6\u60c5\u53c2\u89c1 GET SUBGRAPH \u3002 edges \u8fd4\u56de\u5b50\u56fe\u4e2d\u7684\u8fb9\u7684\u4fe1\u606f\u3002\u8be6\u60c5\u53c2\u89c1 GET SUBGRAPH \u3002 path \u8fd4\u56de\u8def\u5f84\u4fe1\u606f\u3002\u8be6\u60c5\u53c2\u89c1 FIND PATH \u3002 openCypher \u517c\u5bb9\u8bed\u53e5\u9002\u7528 \u51fd\u6570 \u8bf4\u660e id(<vertex>) \u8fd4\u56de\u70b9 ID\u3002\u6570\u636e\u7c7b\u578b\u548c\u70b9 ID \u7684\u7c7b\u578b\u4fdd\u6301\u4e00\u81f4\u3002 list tags(<vertex>) \u8fd4\u56de\u70b9\u7684 Tag\uff0c\u4e0e labels() \u4f5c\u7528\u76f8\u540c\u3002 list labels(<vertex>) \u8fd4\u56de\u70b9\u7684 Tag\uff0c\u4e0e tags() \u4f5c\u7528\u76f8\u540c\uff0c\u7528\u4e8e\u517c\u5bb9 openCypher \u8bed\u6cd5\u3002 map properties(<vertex_or_edge>) \u8fd4\u56de\u70b9\u6216\u8fb9\u7684\u6240\u6709\u5c5e\u6027\u3002 string type(<edge>) \u8fd4\u56de\u8fb9\u7684 Edge type\u3002 src(<edge>) \u8fd4\u56de\u8fb9\u7684\u8d77\u59cb\u70b9 ID\u3002\u6570\u636e\u7c7b\u578b\u548c\u70b9 ID \u7684\u7c7b\u578b\u4fdd\u6301\u4e00\u81f4\u3002 dst(<edge>) \u8fd4\u56de\u8fb9\u7684\u76ee\u7684\u70b9 ID\u3002\u6570\u636e\u7c7b\u578b\u548c\u70b9 ID \u7684\u7c7b\u578b\u4fdd\u6301\u4e00\u81f4\u3002 vertex startNode(<path>) \u83b7\u53d6\u4e00\u6761\u8fb9\u6216\u4e00\u6761\u8def\u5f84\u5e76\u8fd4\u56de\u5b83\u7684\u8d77\u59cb\u70b9 ID\u3002 string endNode(<path>) \u83b7\u53d6\u4e00\u6761\u8fb9\u6216\u4e00\u6761\u8def\u5f84\u5e76\u8fd4\u56de\u5b83\u7684\u76ee\u7684\u70b9 ID\u3002 int rank(<edge>) \u8fd4\u56de\u8fb9\u7684 rank\u3002 \u5217\u8868\u51fd\u6570 \u51fd\u6570 \u8bf4\u660e keys(expr) \u8fd4\u56de\u4e00\u4e2a\u5217\u8868\uff0c\u5305\u542b\u5b57\u7b26\u4e32\u5f62\u5f0f\u7684\u70b9\u3001\u8fb9\u6216\u6620\u5c04\u7684\u6240\u6709\u5c5e\u6027\u3002 labels(vertex) \u8fd4\u56de\u70b9\u7684 Tag \u5217\u8868\u3002 nodes(path) \u8fd4\u56de\u8def\u5f84\u4e2d\u6240\u6709\u70b9\u7684\u5217\u8868\u3002 range(start, end [, step]) \u8fd4\u56de [start,end] \u8303\u56f4\u5185\u56fa\u5b9a\u6b65\u957f\u7684\u5217\u8868\uff0c\u9ed8\u8ba4\u6b65\u957f step \u4e3a 1\u3002 relationships(path) \u8fd4\u56de\u8def\u5f84\u4e2d\u6240\u6709\u5173\u7cfb\u7684\u5217\u8868\u3002 reverse(list) \u8fd4\u56de\u5c06\u539f\u5217\u8868\u9006\u5e8f\u6392\u5217\u7684\u65b0\u5217\u8868\u3002 tail(list) \u8fd4\u56de\u4e0d\u5305\u542b\u539f\u5217\u8868\u7b2c\u4e00\u4e2a\u5143\u7d20\u7684\u65b0\u5217\u8868\u3002 head(list) \u8fd4\u56de\u5217\u8868\u7684\u7b2c\u4e00\u4e2a\u5143\u7d20\u3002 last(list) \u8fd4\u56de\u5217\u8868\u7684\u6700\u540e\u4e00\u4e2a\u5143\u7d20\u3002 reduce() \u5c06\u8868\u8fbe\u5f0f\u9010\u4e2a\u5e94\u7528\u4e8e\u5217\u8868\u4e2d\u7684\u5143\u7d20\uff0c\u7136\u540e\u548c\u7d2f\u52a0\u5668\u4e2d\u7684\u5f53\u524d\u7ed3\u679c\u7d2f\u52a0\uff0c\u6700\u540e\u8fd4\u56de\u5b8c\u6574\u7ed3\u679c\u3002 \u7c7b\u578b\u8f6c\u6362\u51fd\u6570 \u51fd\u6570 \u8bf4\u660e bool toBoolean() \u5c06\u5b57\u7b26\u4e32\u8f6c\u6362\u4e3a\u5e03\u5c14\u3002 float toFloat() \u5c06\u6574\u6570\u6216\u5b57\u7b26\u4e32\u8f6c\u6362\u4e3a\u6d6e\u70b9\u6570\u3002 string toString() \u5c06\u4efb\u610f\u6570\u636e\u7c7b\u578b\u8f6c\u6362\u4e3a\u5b57\u7b26\u4e32\u7c7b\u578b\u3002 int toInteger() \u5c06\u6d6e\u70b9\u6216\u5b57\u7b26\u4e32\u8f6c\u6362\u4e3a\u6574\u6570\u3002 set toSet() \u5c06\u5217\u8868\u6216\u96c6\u5408\u8f6c\u6362\u4e3a\u96c6\u5408\u3002 int hash() hash() \u51fd\u6570\u8fd4\u56de\u53c2\u6570\u7684\u54c8\u5e0c\u503c\u3002\u5176\u53c2\u6570\u53ef\u4ee5\u662f\u6570\u5b57\u3001\u5b57\u7b26\u4e32\u3001\u5217\u8868\u3001\u5e03\u5c14\u503c\u3001NULL \u7b49\u7c7b\u578b\u7684\u503c\uff0c\u6216\u8005\u8ba1\u7b97\u7ed3\u679c\u4e3a\u8fd9\u4e9b\u7c7b\u578b\u7684\u8868\u8fbe\u5f0f\u3002 \u8c13\u8bcd\u51fd\u6570 \u8c13\u8bcd\u51fd\u6570\u53ea\u8fd4\u56de true \u6216 false \uff0c\u901a\u5e38\u7528\u4e8e WHERE \u5b50\u53e5\u4e2d\u3002 <predicate>(<variable> IN <list> WHERE <condition>) \u51fd\u6570 \u8bf4\u660e exists() \u5982\u679c\u6307\u5b9a\u7684\u5c5e\u6027\u5728\u70b9\u3001\u8fb9\u6216\u6620\u5c04\u4e2d\u5b58\u5728\uff0c\u5219\u8fd4\u56de true \uff0c\u5426\u5219\u8fd4\u56de false \u3002 any() \u5982\u679c\u6307\u5b9a\u7684\u8c13\u8bcd\u9002\u7528\u4e8e\u5217\u8868\u4e2d\u7684\u81f3\u5c11\u4e00\u4e2a\u5143\u7d20\uff0c\u5219\u8fd4\u56de true \uff0c\u5426\u5219\u8fd4\u56de false \u3002 all() \u5982\u679c\u6307\u5b9a\u7684\u8c13\u8bcd\u9002\u7528\u4e8e\u5217\u8868\u4e2d\u7684\u6bcf\u4e2a\u5143\u7d20\uff0c\u5219\u8fd4\u56de true \uff0c\u5426\u5219\u8fd4\u56de false \u3002 none() \u5982\u679c\u6307\u5b9a\u7684\u8c13\u8bcd\u4e0d\u9002\u7528\u4e8e\u5217\u8868\u4e2d\u7684\u4efb\u4f55\u4e00\u4e2a\u5143\u7d20\uff0c\u5219\u8fd4\u56de true \uff0c\u5426\u5219\u8fd4\u56de false \u3002 single() \u5982\u679c\u6307\u5b9a\u7684\u8c13\u8bcd\u9002\u7528\u4e8e\u5217\u8868\u4e2d\u7684\u552f\u4e00\u4e00\u4e2a\u5143\u7d20\uff0c\u5219\u8fd4\u56de true \uff0c\u5426\u5219\u8fd4\u56de false \u3002 \u6761\u4ef6\u8868\u8fbe\u5f0f\u51fd\u6570 \u51fd\u6570 \u8bf4\u660e CASE \u4f7f\u7528\u6761\u4ef6\u6765\u8fc7\u6ee4 nGQL \u67e5\u8be2\u8bed\u53e5\u7684\u7ed3\u679c\uff0c\u5e38\u7528\u4e8e YIELD \u548c RETURN \u5b50\u53e5\u4e2d\u3002 CASE \u8868\u8fbe\u5f0f\u4f1a\u904d\u5386\u6240\u6709\u6761\u4ef6\uff0c\u5e76\u5728\u6ee1\u8db3\u7b2c\u4e00\u4e2a\u6761\u4ef6\u65f6\u505c\u6b62\u8bfb\u53d6\u540e\u7eed\u6761\u4ef6\uff0c\u7136\u540e\u8fd4\u56de\u7ed3\u679c\u3002 \u5982\u679c\u4e0d\u6ee1\u8db3\u4efb\u4f55\u6761\u4ef6\uff0c\u5c06\u901a\u8fc7 ELSE \u5b50\u53e5\u8fd4\u56de\u7ed3\u679c\u3002\u5982\u679c\u6ca1\u6709 ELSE \u5b50\u53e5\u4e14\u4e0d\u6ee1\u8db3\u4efb\u4f55\u6761\u4ef6\uff0c\u5219\u8fd4\u56de NULL \u3002 coalesce() \u8fd4\u56de\u6240\u6709\u8868\u8fbe\u5f0f\u4e2d\u7b2c\u4e00\u4e2a\u975e\u7a7a\u5143\u7d20\u3002 \u901a\u7528\u67e5\u8be2\u8bed\u53e5 \u00b6 MATCH MATCH <pattern> [<clause_1>] RETURN <output> [<clause_2>]; \u6a21\u5f0f \u793a\u4f8b \u8bf4\u660e \u5339\u914d\u70b9 (v) \u7528\u6237\u53ef\u4ee5\u5728\u4e00\u5bf9\u62ec\u53f7\u4e2d\u4f7f\u7528\u81ea\u5b9a\u4e49\u53d8\u91cf\u6765\u8868\u793a\u6a21\u5f0f\u4e2d\u7684\u70b9\u3002\u4f8b\u5982 (v) \u3002 \u5339\u914d Tag MATCH (v:player) RETURN v \u7528\u6237\u53ef\u4ee5\u5728\u70b9\u7684\u53f3\u4fa7\u7528 :<tag_name> \u8868\u793a\u6a21\u5f0f\u4e2d\u7684 Tag\u3002 \u5339\u914d\u591a Tag MATCH (v:player:team) RETURN v \u7528\u6237\u53ef\u4ee5\u7528\u82f1\u6587\u5192\u53f7\uff08:\uff09\u5339\u914d\u591a Tag \u7684\u70b9\u3002 \u5339\u914d\u70b9\u7684\u5c5e\u6027 MATCH (v:player{name:\"Tim Duncan\"}) RETURN v MATCH (v) WITH v, properties(v) as props, keys(properties(v)) as kk WHERE [i in kk where props[i] == \"Tim Duncan\"] RETURN v \u7528\u6237\u53ef\u4ee5\u5728 Tag \u7684\u53f3\u4fa7\u7528 {<prop_name>: <prop_value>} \u8868\u793a\u6a21\u5f0f\u4e2d\u70b9\u7684\u5c5e\u6027\uff1b\u6216\u8005\u4e0d\u6307\u5b9a Tag \u76f4\u63a5\u5339\u914d\u70b9\u7684\u5c5e\u6027\u3002 \u5339\u914d\u5355\u70b9 ID MATCH (v) WHERE id(v) == 'player101' RETURN v \u7528\u6237\u53ef\u4ee5\u4f7f\u7528\u70b9 ID \u53bb\u5339\u914d\u70b9\u3002 id() \u51fd\u6570\u53ef\u4ee5\u68c0\u7d22\u70b9\u7684 ID\u3002 \u5339\u914d\u591a\u70b9 ID MATCH (v:player { name: 'Tim Duncan' })--(v2) WHERE id(v2) IN [\"player101\", \"player102\"] RETURN v2 \u8981\u5339\u914d\u591a\u4e2a\u70b9\u7684 ID\uff0c\u53ef\u4ee5\u7528 WHERE id(v) IN [vid_list] \u3002 \u5339\u914d\u8fde\u63a5\u7684\u70b9 MATCH (v:player{name:\"Tim Duncan\"})--(v2) RETURN v2.player.name AS Name \u7528\u6237\u53ef\u4ee5\u4f7f\u7528 -- \u7b26\u53f7\u8868\u793a\u4e24\u4e2a\u65b9\u5411\u7684\u8fb9\uff0c\u5e76\u5339\u914d\u8fd9\u4e9b\u8fb9\u8fde\u63a5\u7684\u70b9\u3002\u7528\u6237\u53ef\u4ee5\u5728 -- \u7b26\u53f7\u4e0a\u589e\u52a0 < \u6216 > \u7b26\u53f7\u6307\u5b9a\u8fb9\u7684\u65b9\u5411\u3002 \u5339\u914d\u8def\u5f84 MATCH p=(v:player{name:\"Tim Duncan\"})-->(v2) RETURN p \u8fde\u63a5\u8d77\u6765\u7684\u70b9\u548c\u8fb9\u6784\u6210\u4e86\u8def\u5f84\u3002\u7528\u6237\u53ef\u4ee5\u4f7f\u7528\u81ea\u5b9a\u4e49\u53d8\u91cf\u547d\u540d\u8def\u5f84\u3002 \u5339\u914d\u8fb9 MATCH (v:player{name:\"Tim Duncan\"})-[e]-(v2) RETURN e MATCH ()<-[e]-() RETURN e \u9664\u4e86\u7528 -- \u3001 --> \u3001 <-- \u8868\u793a\u672a\u547d\u540d\u7684\u8fb9\u4e4b\u5916\uff0c\u7528\u6237\u8fd8\u53ef\u4ee5\u5728\u65b9\u62ec\u53f7\u4e2d\u4f7f\u7528\u81ea\u5b9a\u4e49\u53d8\u91cf\u547d\u540d\u8fb9\u3002\u4f8b\u5982 -[e]- \u3002 \u5339\u914d Edge type MATCH ()-[e:follow]->() RETURN e \u548c\u70b9\u4e00\u6837\uff0c\u7528\u6237\u53ef\u4ee5\u7528 :<edge_type> \u8868\u793a\u6a21\u5f0f\u4e2d\u7684 Edge type\uff0c\u4f8b\u5982 -[e:follow]- \u3002 \u5339\u914d\u8fb9\u7684\u5c5e\u6027 MATCH (v:player{name:\"Tim Duncan\"})-[e:follow{degree:95}]->(v2) RETURN e MATCH ()-[e]->() WITH e, properties(e) as props, keys(properties(e)) as kk WHERE [i in kk where props[i] == 90] RETURN e \u7528\u6237\u53ef\u4ee5\u7528 {<prop_name>: <prop_value>} \u8868\u793a\u6a21\u5f0f\u4e2d Edge type \u7684\u5c5e\u6027\uff0c\u4f8b\u5982 [e:follow{likeness:95}] \uff1b\u6216\u8005\u4e0d\u6307\u5b9a Edge type \u76f4\u63a5\u5339\u914d\u8fb9\u7684\u5c5e\u6027\u3002 \u5339\u914d\u591a\u4e2a Edge type MATCH (v:player{name:\"Tim Duncan\"})-[e:follow | :serve]->(v2) RETURN e \u4f7f\u7528 | \u53ef\u4ee5\u5339\u914d\u591a\u4e2a Edge type\uff0c\u4f8b\u5982 [e:follow | :serve] \u3002\u7b2c\u4e00\u4e2a Edge type \u524d\u7684\u82f1\u6587\u5192\u53f7\uff08:\uff09\u4e0d\u53ef\u7701\u7565\uff0c\u540e\u7eed Edge type \u524d\u7684\u82f1\u6587\u5192\u53f7\u53ef\u4ee5\u7701\u7565\uff0c\u4f8b\u5982 [e:follow | serve] \u3002 \u5339\u914d\u591a\u6761\u8fb9 MATCH (v:player{name:\"Tim Duncan\"})-[]->(v2)<-[e:serve]-(v3) RETURN v2, v3 \u7528\u6237\u53ef\u4ee5\u6269\u5c55\u6a21\u5f0f\uff0c\u5339\u914d\u8def\u5f84\u4e2d\u7684\u591a\u6761\u8fb9\u3002 \u5339\u914d\u5b9a\u957f\u8def\u5f84 MATCH p=(v:player{name:\"Tim Duncan\"})-[e:follow*2]->(v2) RETURN DISTINCT v2 AS Friends \u7528\u6237\u53ef\u4ee5\u5728\u6a21\u5f0f\u4e2d\u4f7f\u7528 :<edge_type>*<hop> \u5339\u914d\u5b9a\u957f\u8def\u5f84\u3002 hop \u5fc5\u987b\u662f\u4e00\u4e2a\u975e\u8d1f\u6574\u6570\u3002 e \u7684\u6570\u636e\u7c7b\u578b\u662f\u5217\u8868\u3002 \u5339\u914d\u53d8\u957f\u8def\u5f84 MATCH p=(v:player{name:\"Tim Duncan\"})-[e:follow*1..3]->(v2) RETURN v2 AS Friends minHop \uff1a\u53ef\u9009\u9879\u3002\u8868\u793a\u8def\u5f84\u7684\u6700\u5c0f\u957f\u5ea6\u3002 minHop \u5fc5\u987b\u662f\u4e00\u4e2a\u975e\u8d1f\u6574\u6570\uff0c\u9ed8\u8ba4\u503c\u4e3a 1\u3002 maxHop \uff1a\u53ef\u9009\u9879\u3002\u8868\u793a\u8def\u5f84\u7684\u6700\u5927\u957f\u5ea6\u3002 maxHop \u5fc5\u987b\u662f\u4e00\u4e2a\u975e\u8d1f\u6574\u6570\uff0c\u9ed8\u8ba4\u4e3a\u65e0\u7a77\u5927\u3002 e \u7684\u6570\u636e\u7c7b\u578b\u662f\u5217\u8868\u3002 \u5339\u914d\u591a\u4e2a Edge type \u7684\u53d8\u957f\u8def\u5f84 MATCH p=(v:player{name:\"Tim Duncan\"})-[e:follow | serve*2]->(v2) RETURN DISTINCT v2 \u7528\u6237\u53ef\u4ee5\u5728\u53d8\u957f\u6216\u5b9a\u957f\u6a21\u5f0f\u4e2d\u6307\u5b9a\u591a\u4e2a Edge type\u3002 hop \u3001 minHop \u548c maxHop \u5bf9\u6240\u6709 Edge type \u90fd\u751f\u6548\u3002 e \u7684\u6570\u636e\u7c7b\u578b\u662f\u5217\u8868\u3002 \u68c0\u7d22\u70b9\u6216\u8fb9\u7684\u4fe1\u606f MATCH (v:player{name:\"Tim Duncan\"}) RETURN v MATCH (v:player{name:\"Tim Duncan\"})-[e]->(v2) RETURN e \u4f7f\u7528 RETURN {<vertex_name> | <edge_name>} \u68c0\u7d22\u70b9\u6216\u8fb9\u7684\u6240\u6709\u4fe1\u606f\u3002 \u68c0\u7d22\u70b9 ID MATCH (v:player{name:\"Tim Duncan\"}) RETURN id(v) \u4f7f\u7528 id() \u51fd\u6570\u68c0\u7d22\u70b9 ID\u3002 \u68c0\u7d22 Tag MATCH (v:player{name:\"Tim Duncan\"}) RETURN labels(v) \u4f7f\u7528 labels() \u51fd\u6570\u68c0\u7d22\u70b9\u4e0a\u7684 Tag \u5217\u8868\u3002 \u68c0\u7d22\u5217\u8868 labels(v) \u4e2d\u7684\u7b2c N \u4e2a\u5143\u7d20\uff0c\u53ef\u4ee5\u4f7f\u7528 labels(v)[n-1] \u3002 \u68c0\u7d22\u70b9\u6216\u8fb9\u7684\u5355\u4e2a\u5c5e\u6027 MATCH (v:player{name:\"Tim Duncan\"}) RETURN v.player.age \u4f7f\u7528 RETURN {<vertex_name> | <edge_name>}.<property> \u68c0\u7d22\u5355\u4e2a\u5c5e\u6027\u3002 \u4f7f\u7528 AS \u8bbe\u7f6e\u5c5e\u6027\u7684\u522b\u540d\u3002 \u68c0\u7d22\u70b9\u6216\u8fb9\u7684\u6240\u6709\u5c5e\u6027 MATCH p=(v:player{name:\"Tim Duncan\"})-[]->(v2) RETURN properties(v2) \u4f7f\u7528 properties() \u51fd\u6570\u68c0\u7d22\u70b9\u6216\u8fb9\u7684\u6240\u6709\u5c5e\u6027\u3002 \u68c0\u7d22 Edge type MATCH p=(v:player{name:\"Tim Duncan\"})-[e]->() RETURN DISTINCT type(e) \u4f7f\u7528 type() \u51fd\u6570\u68c0\u7d22\u5339\u914d\u7684 Edge type\u3002 \u68c0\u7d22\u8def\u5f84 MATCH p=(v:player{name:\"Tim Duncan\"})-[*3]->() RETURN p \u4f7f\u7528 RETURN <path_name> \u68c0\u7d22\u5339\u914d\u8def\u5f84\u7684\u6240\u6709\u4fe1\u606f\u3002 \u68c0\u7d22\u8def\u5f84\u4e2d\u7684\u70b9 MATCH p=(v:player{name:\"Tim Duncan\"})-[]->(v2) RETURN nodes(p) \u4f7f\u7528 nodes() \u51fd\u6570\u68c0\u7d22\u8def\u5f84\u4e2d\u7684\u6240\u6709\u70b9\u3002 \u68c0\u7d22\u8def\u5f84\u4e2d\u7684\u8fb9 MATCH p=(v:player{name:\"Tim Duncan\"})-[]->(v2) RETURN relationships(p) \u4f7f\u7528 relationships() \u51fd\u6570\u68c0\u7d22\u8def\u5f84\u4e2d\u7684\u6240\u6709\u8fb9\u3002 \u68c0\u7d22\u8def\u5f84\u957f\u5ea6 MATCH p=(v:player{name:\"Tim Duncan\"})-[*..2]->(v2) RETURN p AS Paths, length(p) AS Length \u4f7f\u7528 length() \u51fd\u6570\u68c0\u7d22\u8def\u5f84\u7684\u957f\u5ea6\u3002 OPTIONAL MATCH \u6a21\u5f0f \u793a\u4f8b \u8bf4\u660e \u4f5c\u4e3a MATCH \u8bed\u53e5\u7684\u53ef\u9009\u9879\u53bb\u5339\u914d\u56fe\u6570\u636e\u5e93\u4e2d\u7684\u6a21\u5f0f MATCH (m)-[]->(n) WHERE id(m)==\"player100\" OPTIONAL MATCH (n)-[]->(l) RETURN id(m),id(n),id(l) \u5982\u679c\u56fe\u6570\u636e\u5e93\u4e2d\u6ca1\u6709\u5bf9\u5e94\u7684\u6a21\u5f0f\uff0c\u5bf9\u5e94\u7684\u5217\u8fd4\u56de NULL \u3002 LOOKUP LOOKUP ON {<vertex_tag> | <edge_type>} [WHERE <expression> [AND <expression> ...]] YIELD <return_list> [AS <alias>] \u6a21\u5f0f \u793a\u4f8b \u8bf4\u660e \u68c0\u7d22\u70b9 LOOKUP ON player WHERE player.name == \"Tony Parker\" YIELD player.name AS name, player.age AS age \u8fd4\u56de Tag \u4e3a player \u4e14 name \u4e3a Tony Parker \u7684\u70b9\u3002 \u68c0\u7d22\u8fb9 LOOKUP ON follow WHERE follow.degree == 90 YIELD follow.degree \u8fd4\u56de Edge type \u4e3a follow \u4e14 degree \u4e3a 90 \u7684\u8fb9\u3002 \u901a\u8fc7 Tag \u5217\u51fa\u6240\u6709\u70b9 LOOKUP ON player YIELD properties(vertex),id(vertex) \u67e5\u627e\u6240\u6709 Tag \u4e3a player \u7684\u70b9 VID\u3002 \u901a\u8fc7 Edge type \u5217\u51fa\u8fb9 LOOKUP ON follow YIELD edge AS e \u67e5\u627e Edge type \u4e3a follow \u7684\u6240\u6709\u8fb9\u7684\u4fe1\u606f\u3002 \u7edf\u8ba1\u70b9 LOOKUP ON player YIELD id(vertex)| YIELD COUNT(*) AS Player_Count \u7edf\u8ba1 Tag \u4e3a player \u7684\u70b9\u3002 \u7edf\u8ba1\u8fb9 LOOKUP ON follow YIELD edge as e | YIELD COUNT(*) AS Like_Count \u7edf\u8ba1 Edge type \u4e3a follow \u7684\u8fb9\u3002 GO GO [[<M> TO] <N> {STEP|STEPS} ] FROM <vertex_list> OVER <edge_type_list> [{REVERSELY | BIDIRECT}] [ WHERE <conditions> ] YIELD [DISTINCT] <return_list> [{SAMPLE <sample_list> | LIMIT <limit_list>}] [| GROUP BY {col_name | expr | position} YIELD <col_name>] [| ORDER BY <expression> [{ASC | DESC}]] [| LIMIT [<offset_value>,] <number_rows>] \u793a\u4f8b \u8bf4\u660e GO FROM \"player102\" OVER serve YIELD dst(edge) \u8fd4\u56de player102 \u6240\u5c5e\u961f\u4f0d\u3002 GO 2 STEPS FROM \"player102\" OVER follow YIELD dst(edge) \u8fd4\u56de\u8ddd\u79bb player102 \u4e24\u8df3\u7684\u670b\u53cb\u3002 GO FROM \"player100\", \"player102\" OVER serve WHERE properties(edge).start_year > 1995 YIELD DISTINCT properties($$).name AS team_name, properties(edge).start_year AS start_year, properties($^).name AS player_name \u6dfb\u52a0\u8fc7\u6ee4\u6761\u4ef6\u3002 GO FROM \"player100\" OVER follow, serve YIELD properties(edge).degree, properties(edge).start_year \u904d\u5386\u591a\u4e2a Edge type\u3002\u5c5e\u6027\u6ca1\u6709\u503c\u65f6\uff0c\u4f1a\u663e\u793a NULL \u3002 GO FROM \"player100\" OVER follow REVERSELY YIELD src(edge) AS destination \u8fd4\u56de player100 \u5165\u65b9\u5411\u7684\u90bb\u5c45\u70b9\u3002 GO FROM \"player100\" OVER follow REVERSELY YIELD src(edge) AS id | GO FROM $-.id OVER serve WHERE properties($^).age > 20 YIELD properties($^).name AS FriendOf, properties($$).name AS Team \u67e5\u8be2 player100 \u7684\u670b\u53cb\u548c\u670b\u53cb\u6240\u5c5e\u961f\u4f0d\u3002 GO FROM \"player102\" OVER follow YIELD dst(edge) AS both \u8fd4\u56de player102 \u6240\u6709\u90bb\u5c45\u70b9\u3002 GO 2 STEPS FROM \"player100\" OVER follow YIELD src(edge) AS src, dst(edge) AS dst, properties($$).age AS age | GROUP BY $-.dst YIELD $-.dst AS dst, collect_set($-.src) AS src, collect($-.age) AS age \u6839\u636e\u5e74\u9f84\u5206\u7ec4\u3002 FETCH \u83b7\u53d6\u70b9\u7684\u5c5e\u6027\u503c FETCH PROP ON {<tag_name>[, tag_name ...] | *} <vid> [, vid ...] YIELD <return_list> [AS <alias>] \u793a\u4f8b \u8bf4\u660e FETCH PROP ON player \"player100\" YIELD properties(vertex) \u5728 FETCH \u8bed\u53e5\u4e2d\u6307\u5b9a Tag \u83b7\u53d6\u5bf9\u5e94\u70b9\u7684\u5c5e\u6027\u503c\u3002 FETCH PROP ON player \"player100\" YIELD player.name AS name \u4f7f\u7528 YIELD \u5b50\u53e5\u6307\u5b9a\u8fd4\u56de\u7684\u5c5e\u6027\u3002 FETCH PROP ON player \"player101\", \"player102\", \"player103\" YIELD properties(vertex) \u6307\u5b9a\u591a\u4e2a\u70b9 ID \u83b7\u53d6\u591a\u4e2a\u70b9\u7684\u5c5e\u6027\u503c\uff0c\u70b9\u4e4b\u95f4\u7528\u82f1\u6587\u9017\u53f7\uff08,\uff09\u5206\u9694\u3002 FETCH PROP ON player, t1 \"player100\", \"player103\" YIELD properties(vertex) \u5728 FETCH \u8bed\u53e5\u4e2d\u6307\u5b9a\u591a\u4e2a Tag \u83b7\u53d6\u5c5e\u6027\u503c\u3002Tag \u4e4b\u95f4\u7528\u82f1\u6587\u9017\u53f7\uff08,\uff09\u5206\u9694\u3002 FETCH PROP ON * \"player100\", \"player106\", \"team200\" YIELD properties(vertex) \u5728 FETCH \u8bed\u53e5\u4e2d\u4f7f\u7528 * \u83b7\u53d6\u5f53\u524d\u56fe\u7a7a\u95f4\u6240\u6709\u6807\u7b7e\u91cc\uff0c\u70b9\u7684\u5c5e\u6027\u503c\u3002 \u83b7\u53d6\u8fb9\u7684\u5c5e\u6027\u503c FETCH PROP ON <edge_type> <src_vid> -> <dst_vid>[@<rank>] [, <src_vid> -> <dst_vid> ...] YIELD <output>; \u793a\u4f8b \u8bf4\u660e FETCH PROP ON serve \"player100\" -> \"team204\" YIELD properties(edge) \u83b7\u53d6\u8fde\u63a5 player100 \u548c team204 \u7684\u8fb9 serve \u7684\u6240\u6709\u5c5e\u6027\u503c\u3002 FETCH PROP ON serve \"player100\" -> \"team204\" YIELD serve.start_year \u4f7f\u7528 YIELD \u5b50\u53e5\u6307\u5b9a\u8fd4\u56de\u7684\u5c5e\u6027\u3002 FETCH PROP ON serve \"player100\" -> \"team204\", \"player133\" -> \"team202\" YIELD properties(edge) \u6307\u5b9a\u591a\u4e2a\u8fb9\u6a21\u5f0f ( <src_vid> -> <dst_vid>[@<rank>] ) \u83b7\u53d6\u591a\u4e2a\u8fb9\u7684\u5c5e\u6027\u503c\u3002\u6a21\u5f0f\u4e4b\u95f4\u7528\u82f1\u6587\u9017\u53f7\uff08,\uff09\u5206\u9694\u3002 FETCH PROP ON serve \"player100\" -> \"team204\"@1 YIELD properties(edge) \u8981\u83b7\u53d6 rank \u4e0d\u4e3a 0 \u7684\u8fb9\uff0c\u8bf7\u5728 FETCH \u8bed\u53e5\u4e2d\u8bbe\u7f6e rank\u3002 GO FROM \"player101\" OVER follow YIELD follow._src AS s, follow._dst AS d | FETCH PROP ON follow $-.s -> $-.d YIELD follow.degree \u8fd4\u56de\u4ece\u70b9 player101 \u5f00\u59cb\u7684 follow \u8fb9\u7684 degree \u503c\u3002 $var = GO FROM \"player101\" OVER follow YIELD follow._src AS s, follow._dst AS d; FETCH PROP ON follow $var.s -> $var.d YIELD follow.degree \u81ea\u5b9a\u4e49\u53d8\u91cf\u6784\u5efa\u67e5\u8be2\u3002 SHOW \u8bed\u53e5 \u8bed\u6cd5 \u793a\u4f8b \u8bf4\u660e SHOW CHARSET SHOW CHARSET SHOW CHARSET \u663e\u793a\u5f53\u524d\u7684\u5b57\u7b26\u96c6\u3002 SHOW COLLATION SHOW COLLATION SHOW COLLATION \u663e\u793a\u5f53\u524d\u7684\u6392\u5e8f\u89c4\u5219\u3002 SHOW CREATE SPACE SHOW CREATE SPACE <space_name> SHOW CREATE SPACE basketballplayer \u663e\u793a\u6307\u5b9a\u56fe\u7a7a\u95f4\u7684\u521b\u5efa\u8bed\u53e5\u3002 SHOW CREATE TAG/EDGE SHOW CREATE {TAG <tag_name> | EDGE <edge_name>} SHOW CREATE TAG player \u663e\u793a\u6307\u5b9a Tag/Edge type \u7684\u57fa\u672c\u4fe1\u606f\u3002 SHOW HOSTS SHOW HOSTS [GRAPH | STORAGE | META] SHOW HOSTS SHOW HOSTS GRAPH \u663e\u793a Graph\u3001Storage\u3001Meta \u670d\u52a1\u4e3b\u673a\u4fe1\u606f\u3001\u7248\u672c\u4fe1\u606f\u3002 SHOW INDEX STATUS SHOW {TAG | EDGE} INDEX STATUS SHOW TAG INDEX STATUS \u91cd\u5efa\u539f\u751f\u7d22\u5f15\u7684\u4f5c\u4e1a\u72b6\u6001\uff0c\u4ee5\u4fbf\u786e\u5b9a\u91cd\u5efa\u7d22\u5f15\u662f\u5426\u6210\u529f\u3002 SHOW INDEXES SHOW {TAG | EDGE} INDEXES SHOW TAG INDEXES \u5217\u51fa\u5f53\u524d\u56fe\u7a7a\u95f4\u5185\u7684\u6240\u6709 Tag \u548c Edge type\uff08\u5305\u62ec\u5c5e\u6027\uff09\u7684\u7d22\u5f15\u3002 SHOW PARTS SHOW PARTS [<part_id>] SHOW PARTS \u663e\u793a\u56fe\u7a7a\u95f4\u4e2d\u6307\u5b9a\u5206\u7247\u6216\u6240\u6709\u5206\u7247\u7684\u4fe1\u606f\u3002 SHOW ROLES SHOW ROLES IN <space_name> SHOW ROLES in basketballplayer \u663e\u793a\u5206\u914d\u7ed9\u7528\u6237\u7684\u89d2\u8272\u4fe1\u606f\u3002 SHOW SNAPSHOTS SHOW SNAPSHOTS SHOW SNAPSHOTS \u663e\u793a\u6240\u6709\u5feb\u7167\u4fe1\u606f\u3002 SHOW SPACES SHOW SPACES SHOW SPACES \u663e\u793a\u73b0\u5b58\u7684\u56fe\u7a7a\u95f4\u3002 SHOW STATS SHOW STATS SHOW STATS \u663e\u793a\u6700\u8fd1 STATS \u4f5c\u4e1a\u6536\u96c6\u7684\u56fe\u7a7a\u95f4\u7edf\u8ba1\u4fe1\u606f\u3002 SHOW TAGS/EDGES SHOW TAGS | EDGES SHOW TAGS \u3001 SHOW EDGES \u663e\u793a\u5f53\u524d\u56fe\u7a7a\u95f4\u5185\u7684\u6240\u6709 Tag/Edge type\u3002 SHOW USERS SHOW USERS SHOW USERS \u663e\u793a\u7528\u6237\u4fe1\u606f\u3002 SHOW SESSIONS SHOW SESSIONS SHOW SESSIONS \u663e\u793a\u6240\u6709\u4f1a\u8bdd\u4fe1\u606f\u3002 SHOW SESSIONS SHOW SESSION <Session_Id> SHOW SESSION 1623304491050858 \u6307\u5b9a\u4f1a\u8bdd ID \u8fdb\u884c\u67e5\u770b\u3002 SHOW QUERIES SHOW [ALL] QUERIES SHOW QUERIES \u67e5\u770b\u5f53\u524d Session \u4e2d\u6b63\u5728\u6267\u884c\u7684\u67e5\u8be2\u8bf7\u6c42\u4fe1\u606f\u3002 SHOW META LEADER SHOW META LEADER SHOW META LEADER \u663e\u793a\u5f53\u524d Meta \u96c6\u7fa4\u7684 leader \u4fe1\u606f\u3002 \u5b50\u53e5\u548c\u9009\u9879 \u00b6 \u5b50\u53e5 \u8bed\u6cd5 \u793a\u4f8b \u8bf4\u660e GROUP BY GROUP BY <var> YIELD <var>, <aggregation_function(var)> GO FROM \"player100\" OVER follow BIDIRECT YIELD $$.player.name as Name | GROUP BY $-.Name YIELD $-.Name as Player, count(*) AS Name_Count \u67e5\u627e\u6240\u6709\u8fde\u63a5\u5230 player100 \u7684\u70b9\uff0c\u5e76\u6839\u636e\u4ed6\u4eec\u7684\u59d3\u540d\u8fdb\u884c\u5206\u7ec4\uff0c\u8fd4\u56de\u59d3\u540d\u7684\u51fa\u73b0\u6b21\u6570\u3002 LIMIT YIELD <var> [| LIMIT [<offset_value>,] <number_rows>] GO FROM \"player100\" OVER follow REVERSELY YIELD $$.player.name AS Friend, $$.player.age AS Age | ORDER BY $-.Age, $-.Friend | LIMIT 1, 3 \u4ece\u6392\u5e8f\u7ed3\u679c\u4e2d\u8fd4\u56de\u7b2c 2 \u884c\u5f00\u59cb\u7684 3 \u884c\u6570\u636e\u3002 SKIP RETURN <var> [SKIP <offset>] [LIMIT <number_rows>] MATCH (v:player{name:\"Tim Duncan\"}) --> (v2) RETURN v2.player.name AS Name, v2.player.age AS Age ORDER BY Age DESC SKIP 1 \u7528\u6237\u53ef\u4ee5\u5355\u72ec\u4f7f\u7528 SKIP <offset> \u8bbe\u7f6e\u504f\u79fb\u91cf\uff0c\u540e\u9762\u4e0d\u9700\u8981\u6dfb\u52a0 LIMIT <number_rows> \u3002 SAMPLE <go_statement> SAMPLE <sample_list>; GO 3 STEPS FROM \"player100\" OVER * YIELD properties($$).name AS NAME, properties($$).age AS Age SAMPLE [1,2,3]; \u5728\u7ed3\u679c\u96c6\u4e2d\u5747\u5300\u53d6\u6837\u5e76\u8fd4\u56de\u6307\u5b9a\u6570\u91cf\u7684\u6570\u636e\u3002 ORDER BY <YIELD clause> ORDER BY <expression> [ASC | DESC] [, <expression> [ASC | DESC] ...] FETCH PROP ON player \"player100\", \"player101\", \"player102\", \"player103\" YIELD player.age AS age, player.name AS name | ORDER BY $-.age ASC, $-.name DESC ORDER BY \u5b50\u53e5\u6307\u5b9a\u8f93\u51fa\u7ed3\u679c\u7684\u6392\u5e8f\u89c4\u5219\u3002 RETURN RETURN {<vertex_name>|<edge_name>|<vertex_name>.<property>|<edge_name>.<property>|...} MATCH (v:player) RETURN v.player.name, v.player.age LIMIT 3 \u8fd4\u56de\u70b9\u7684\u5c5e\u6027\u4e3a name \u548c age \u7684\u524d\u4e09\u884c\u503c\u3002 TTL CREATE TAG <tag_name>(<property_name_1> <property_value_1>, <property_name_2> <property_value_2>, ...) ttl_duration= <value_int>, ttl_col = <property_name> CREATE TAG t2(a int, b int, c string) ttl_duration= 100, ttl_col = \"a\" \u521b\u5efa Tag \u5e76\u8bbe\u7f6e TTL \u9009\u9879\u3002 WHERE WHERE {<vertex|edge_alias>.<property_name> {>|==|<|...} <value>...} MATCH (v:player) WHERE v.player.name == \"Tim Duncan\" XOR (v.player.age < 30 AND v.player.name == \"Yao Ming\") OR NOT (v.player.name == \"Yao Ming\" OR v.player.name == \"Tim Duncan\") RETURN v.player.name, v.player.age WHERE \u5b50\u53e5\u53ef\u4ee5\u6839\u636e\u6761\u4ef6\u8fc7\u6ee4\u8f93\u51fa\u7ed3\u679c\uff0c\u901a\u5e38\u7528\u4e8e GO \u548c LOOKUP \u8bed\u53e5\uff0c MATCH \u548c WITH \u8bed\u53e5\u3002 YIELD YIELD [DISTINCT] <col> [AS <alias>] [, <col> [AS <alias>] ...] [WHERE <conditions>]; GO FROM \"player100\" OVER follow YIELD dst(edge) AS ID | FETCH PROP ON player $-.ID YIELD player.age AS Age | YIELD AVG($-.Age) as Avg_age, count(*)as Num_friends \u67e5\u627e player100 \u5173\u6ce8\u7684 player\uff0c\u5e76\u8ba1\u7b97\u4ed6\u4eec\u7684\u5e73\u5747\u5e74\u9f84\u3002 WITH MATCH $expressions WITH {nodes()|labels()|...} MATCH p=(v:player{name:\"Tim Duncan\"})--() WITH nodes(p) AS n UNWIND n AS n1 RETURN DISTINCT n1 WITH \u5b50\u53e5\u53ef\u4ee5\u83b7\u53d6\u5e76\u5904\u7406\u67e5\u8be2\u524d\u534a\u90e8\u5206\u7684\u7ed3\u679c\uff0c\u5e76\u5c06\u5904\u7406\u7ed3\u679c\u4f5c\u4e3a\u8f93\u5165\u4f20\u9012\u7ed9\u67e5\u8be2\u7684\u540e\u534a\u90e8\u5206\u3002 UNWIND UNWIND <list> AS <alias> <RETURN clause> UNWIND [1,2,3] AS n RETURN n \u62c6\u5206\u5217\u8868\u3002 \u56fe\u7a7a\u95f4\u8bed\u53e5 \u00b6 \u8bed\u53e5 \u8bed\u6cd5 \u793a\u4f8b \u8bf4\u660e CREATE SPACE CREATE SPACE [IF NOT EXISTS] <graph_space_name> ( [partition_num = <partition_number>,] [replica_factor = <replica_number>,] vid_type = {FIXED_STRING(<N>) | INT[64]} ) [COMMENT = '<comment>'] CREATE SPACE my_space_1 (vid_type=FIXED_STRING(30)) \u521b\u5efa\u4e00\u4e2a\u65b0\u7684\u56fe\u7a7a\u95f4\u3002 CREATE SPACE CREATE SPACE <new_graph_space_name> AS <old_graph_space_name> CREATE SPACE my_space_4 as my_space_3 \u514b\u9686\u73b0\u6709\u56fe\u7a7a\u95f4\u7684 Schema\u3002 USE USE <graph_space_name> USE space1 \u6307\u5b9a\u4e00\u4e2a\u56fe\u7a7a\u95f4\uff0c\u6216\u5207\u6362\u5230\u53e6\u4e00\u4e2a\u56fe\u7a7a\u95f4\uff0c\u5c06\u5176\u4f5c\u4e3a\u540e\u7eed\u67e5\u8be2\u7684\u5de5\u4f5c\u7a7a\u95f4\u3002 SHOW SPACES SHOW SPACES SHOW SPACES \u5217\u51faNebulaGraph\u793a\u4f8b\u4e2d\u7684\u6240\u6709\u56fe\u7a7a\u95f4\u3002 DESCRIBE SPACE DESC[RIBE] SPACE <graph_space_name> DESCRIBE SPACE basketballplayer \u663e\u793a\u6307\u5b9a\u56fe\u7a7a\u95f4\u7684\u4fe1\u606f\u3002 CLEAR SPACE CLEAR SPACE [IF EXISTS] <graph_space_name> \u6e05\u7a7a\u56fe\u7a7a\u95f4\u4e2d\u7684\u70b9\u548c\u8fb9\uff0c\u4f46\u4e0d\u4f1a\u5220\u9664\u56fe\u7a7a\u95f4\u672c\u8eab\u4ee5\u53ca\u5176\u4e2d\u7684 Schema \u4fe1\u606f\u3002 DROP SPACE DROP SPACE [IF EXISTS] <graph_space_name> DROP SPACE basketballplayer \u5220\u9664\u6307\u5b9a\u56fe\u7a7a\u95f4\u7684\u6240\u6709\u5185\u5bb9\u3002 TAG \u8bed\u53e5 \u00b6 \u8bed\u53e5 \u8bed\u6cd5 \u793a\u4f8b \u8bf4\u660e CREATE TAG CREATE TAG [IF NOT EXISTS] <tag_name> ( <prop_name> <data_type> [NULL | NOT NULL] [DEFAULT <default_value>] [COMMENT '<comment>'] [{, <prop_name> <data_type> [NULL | NOT NULL] [DEFAULT <default_value>] [COMMENT '<comment>']} ...] ) [TTL_DURATION = <ttl_duration>] [TTL_COL = <prop_name>] [COMMENT = '<comment>'] CREATE TAG woman(name string, age int, married bool, salary double, create_time timestamp) TTL_DURATION = 100, TTL_COL = \"create_time\" \u901a\u8fc7\u6307\u5b9a\u540d\u79f0\u521b\u5efa\u4e00\u4e2a Tag\u3002 DROP TAG DROP TAG [IF EXISTS] <tag_name> DROP TAG test; \u5220\u9664\u5f53\u524d\u5de5\u4f5c\u7a7a\u95f4\u5185\u6240\u6709\u70b9\u4e0a\u7684\u6307\u5b9a Tag\u3002 ALTER TAG ALTER TAG <tag_name> <alter_definition> [, alter_definition] ...] [ttl_definition [, ttl_definition] ... ] [COMMENT = '<comment>'] ALTER TAG t1 ADD (p3 int, p4 string) \u4fee\u6539 Tag \u7684\u7ed3\u6784\u3002\u4f8b\u5982\u589e\u5220\u5c5e\u6027\u3001\u4fee\u6539\u6570\u636e\u7c7b\u578b\uff0c\u4e5f\u53ef\u4ee5\u4e3a\u5c5e\u6027\u8bbe\u7f6e\u3001\u4fee\u6539 TTL \uff08Time-To-Live)\u3002 SHOW TAGS SHOW TAGS SHOW TAGS \u663e\u793a\u5f53\u524d\u56fe\u7a7a\u95f4\u5185\u7684\u6240\u6709 Tag \u540d\u79f0\u3002 DESCRIBE TAG DESC[RIBE] TAG <tag_name> DESCRIBE TAG player \u67e5\u770b\u6307\u5b9a Tag \u7684\u8be6\u7ec6\u4fe1\u606f\uff0c\u4f8b\u5982\u5b57\u6bb5\u540d\u79f0\u3001\u6570\u636e\u7c7b\u578b\u7b49\u3002 DELETE TAG DELETE TAG <tag_name_list> FROM <VID> DELETE TAG test1 FROM \"test\" \u5220\u9664\u6307\u5b9a\u70b9\u4e0a\u7684\u6307\u5b9a Tag\u3002 Edge type \u8bed\u53e5 \u00b6 \u8bed\u53e5 \u8bed\u6cd5 \u793a\u4f8b \u8bf4\u660e CREATE EDGE CREATE EDGE [IF NOT EXISTS] <edge_type_name> ( <prop_name> <data_type> [NULL | NOT NULL] [DEFAULT <default_value>] [COMMENT '<comment>'] [{, <prop_name> <data_type> [NULL | NOT NULL] [DEFAULT <default_value>] [COMMENT '<comment>']} ...] ) [TTL_DURATION = <ttl_duration>] [TTL_COL = <prop_name>] [COMMENT = '<comment>'] CREATE EDGE e1(p1 string, p2 int, p3 timestamp) TTL_DURATION = 100, TTL_COL = \"p2\" \u6307\u5b9a\u540d\u79f0\u521b\u5efa\u4e00\u4e2a Edge type\u3002 DROP EDGE DROP EDGE [IF EXISTS] <edge_type_name> DROP EDGE e1 \u5220\u9664\u5f53\u524d\u5de5\u4f5c\u7a7a\u95f4\u5185\u7684\u6307\u5b9a Edge type\u3002 ALTER EDGE ALTER EDGE <edge_type_name> <alter_definition> [, alter_definition] ...] [ttl_definition [, ttl_definition] ... ] [COMMENT = '<comment>'] ALTER EDGE e1 ADD (p3 int, p4 string) \u4fee\u6539 Edge type \u7684\u7ed3\u6784\u3002 SHOW EDGES SHOW EDGES SHOW EDGES \u663e\u793a\u5f53\u524d\u56fe\u7a7a\u95f4\u5185\u7684\u6240\u6709 Edge type \u540d\u79f0\u3002 DESCRIBE EDGE DESC[RIBE] EDGE <edge_type_name> DESCRIBE EDGE follow \u67e5\u770b\u6307\u5b9a Edge type \u7684\u8be6\u7ec6\u4fe1\u606f\uff0c\u4f8b\u5982\u5b57\u6bb5\u540d\u79f0\u3001\u6570\u636e\u7c7b\u578b\u7b49\u3002 \u70b9\u8bed\u53e5 \u00b6 \u8bed\u53e5 \u8bed\u6cd5 \u793a\u4f8b \u8bf4\u660e INSERT VERTEX INSERT VERTEX [IF NOT EXISTS] [tag_props, [tag_props] ...] VALUES <vid>: ([prop_value_list]) INSERT VERTEX t2 (name, age) VALUES \"13\":(\"n3\", 12), \"14\":(\"n4\", 8) \u5728NebulaGraph\u5b9e\u4f8b\u7684\u6307\u5b9a\u56fe\u7a7a\u95f4\u4e2d\u63d2\u5165\u4e00\u4e2a\u6216\u591a\u4e2a\u70b9\u3002 DELETE VERTEX DELETE VERTEX <vid> [, <vid> ...] DELETE VERTEX \"team1\" \u5220\u9664\u70b9\uff0c\u4ee5\u53ca\u70b9\u5173\u8054\u7684\u51fa\u8fb9\u548c\u5165\u8fb9\u3002 UPDATE VERTEX UPDATE VERTEX ON <tag_name> <vid> SET <update_prop> [WHEN <condition>] [YIELD <output>] UPDATE VERTEX ON player \"player101\" SET age = age + 2 \u4fee\u6539\u70b9\u4e0a Tag \u7684\u5c5e\u6027\u503c\u3002 UPSERT VERTEX UPSERT VERTEX ON <tag> <vid> SET <update_prop> [WHEN <condition>] [YIELD <output>] UPSERT VERTEX ON player \"player667\" SET age = 31 \u7ed3\u5408 UPDATE \u548c INSERT \uff0c\u5982\u679c\u70b9\u5b58\u5728\uff0c\u4f1a\u4fee\u6539\u70b9\u7684\u5c5e\u6027\u503c\uff1b\u5982\u679c\u70b9\u4e0d\u5b58\u5728\uff0c\u4f1a\u63d2\u5165\u65b0\u7684\u70b9\u3002 \u8fb9\u8bed\u53e5 \u00b6 \u8bed\u53e5 \u8bed\u6cd5 \u793a\u4f8b \u8bf4\u660e INSERT EDGE INSERT EDGE [IF NOT EXISTS] <edge_type> ( <prop_name_list> ) VALUES <src_vid> -> <dst_vid>[@<rank>] : ( <prop_value_list> ) [, <src_vid> -> <dst_vid>[@<rank>] : ( <prop_value_list> ), ...] INSERT EDGE e2 (name, age) VALUES \"11\"->\"13\":(\"n1\", 1) \u5728NebulaGraph\u5b9e\u4f8b\u7684\u6307\u5b9a\u56fe\u7a7a\u95f4\u4e2d\u63d2\u5165\u4e00\u6761\u6216\u591a\u6761\u8fb9\u3002 DELETE EDGE DELETE EDGE <edge_type> <src_vid> -> <dst_vid>[@<rank>] [, <src_vid> -> <dst_vid>[@<rank>] ...] DELETE EDGE serve \"player100\" -> \"team204\"@0 \u5220\u9664\u8fb9\u3002\u4e00\u6b21\u53ef\u4ee5\u5220\u9664\u4e00\u6761\u6216\u591a\u6761\u8fb9\u3002 UPDATE EDGE UPDATE EDGE ON <edge_type> <src_vid> -> <dst_vid> [@<rank>] SET <update_prop> [WHEN <condition>] [YIELD <output>] UPDATE EDGE ON serve \"player100\" -> \"team204\"@0 SET start_year = start_year + 1 \u4fee\u6539\u8fb9\u4e0a Edge type \u7684\u5c5e\u6027\u3002 UPSERT EDGE UPSERT EDGE ON <edge_type> <src_vid> -> <dst_vid> [@rank] SET <update_prop> [WHEN <condition>] [YIELD <properties>] UPSERT EDGE on serve \"player666\" -> \"team200\"@0 SET end_year = 2021 \u7ed3\u5408 UPDATE \u548c INSERT \uff0c\u5982\u679c\u8fb9\u5b58\u5728\uff0c\u4f1a\u66f4\u65b0\u8fb9\u7684\u5c5e\u6027\uff1b\u5982\u679c\u8fb9\u4e0d\u5b58\u5728\uff0c\u4f1a\u63d2\u5165\u65b0\u7684\u8fb9\u3002 \u7d22\u5f15 \u00b6 \u539f\u751f\u7d22\u5f15 \u7d22\u5f15\u914d\u5408 LOOKUP \u548c MATCH \u8bed\u53e5\u4f7f\u7528\u3002 \u8bed\u53e5 \u8bed\u6cd5 \u793a\u4f8b \u8bf4\u660e CREATE INDEX CREATE {TAG | EDGE} INDEX [IF NOT EXISTS] <index_name> ON {<tag_name> | <edge_name>} ([<prop_name_list>]) [COMMENT = '<comment>'] CREATE TAG INDEX player_index on player() \u5bf9 Tag\u3001EdgeType \u6216\u5176\u5c5e\u6027\u521b\u5efa\u539f\u751f\u7d22\u5f15\u3002 SHOW CREATE INDEX SHOW CREATE {TAG | EDGE} INDEX <index_name> show create tag index index_2 \u521b\u5efa Tag \u6216\u8005 Edge type \u65f6\u4f7f\u7528\u7684 nGQL \u8bed\u53e5\uff0c\u5176\u4e2d\u5305\u542b\u7d22\u5f15\u7684\u8be6\u7ec6\u4fe1\u606f\uff0c\u4f8b\u5982\u5176\u5173\u8054\u7684\u5c5e\u6027\u3002 SHOW INDEXES SHOW {TAG | EDGE} INDEXES SHOW TAG INDEXES \u5217\u51fa\u5f53\u524d\u56fe\u7a7a\u95f4\u5185\u7684\u6240\u6709 Tag \u548c Edge type\uff08\u5305\u62ec\u5c5e\u6027\uff09\u7684\u7d22\u5f15\u3002 DESCRIBE INDEX DESCRIBE {TAG | EDGE} INDEX <index_name> DESCRIBE TAG INDEX player_index_0 \u67e5\u770b\u6307\u5b9a\u7d22\u5f15\u7684\u4fe1\u606f\uff0c\u5305\u62ec\u7d22\u5f15\u7684\u5c5e\u6027\u540d\u79f0\uff08Field\uff09\u548c\u6570\u636e\u7c7b\u578b\uff08Type\uff09\u3002 REBUILD INDEX REBUILD {TAG | EDGE} INDEX [<index_name_list>] REBUILD TAG INDEX single_person_index \u91cd\u5efa\u7d22\u5f15\u3002\u7d22\u5f15\u529f\u80fd\u4e0d\u4f1a\u81ea\u52a8\u5bf9\u5176\u521b\u5efa\u4e4b\u524d\u5df2\u5b58\u5728\u7684\u5b58\u91cf\u6570\u636e\u751f\u6548\u3002 SHOW INDEX STATUS SHOW {TAG | EDGE} INDEX STATUS SHOW TAG INDEX STATUS \u67e5\u770b\u7d22\u5f15\u540d\u79f0\u548c\u5bf9\u5e94\u7684\u72b6\u6001\u3002 DROP INDEX DROP {TAG | EDGE} INDEX [IF EXISTS] <index_name> DROP TAG INDEX player_index_0 \u5220\u9664\u5f53\u524d\u56fe\u7a7a\u95f4\u4e2d\u5df2\u5b58\u5728\u7684\u7d22\u5f15\u3002 \u5168\u6587\u7d22\u5f15 \u8bed\u6cd5 \u793a\u4f8b \u8bf4\u660e SIGN IN TEXT SERVICE [(<elastic_ip:port> [,<username>, <password>]), (<elastic_ip:port>), ...] SIGN IN TEXT SERVICE (127.0.0.1:9200) NebulaGraph\u7684\u5168\u6587\u7d22\u5f15\u662f\u57fa\u4e8e Elasticsearch \u5b9e\u73b0\uff0c\u90e8\u7f72 Elasticsearch \u96c6\u7fa4\u4e4b\u540e\uff0c\u53ef\u4ee5\u4f7f\u7528 SIGN IN \u8bed\u53e5\u767b\u5f55 Elasticsearch \u5ba2\u6237\u7aef\u3002 SHOW TEXT SEARCH CLIENTS SHOW TEXT SEARCH CLIENTS \u5217\u51fa\u6587\u672c\u641c\u7d22\u5ba2\u6237\u7aef\u3002 SIGN OUT TEXT SERVICE SIGN OUT TEXT SERVICE \u9000\u51fa\u6240\u6709\u6587\u672c\u641c\u7d22\u5ba2\u6237\u7aef\u3002 CREATE FULLTEXT {TAG | EDGE} INDEX <index_name> ON {<tag_name> | <edge_name>} ([<prop_name_list>]) CREATE FULLTEXT TAG INDEX nebula_index_1 ON player(name) \u521b\u5efa\u5168\u6587\u7d22\u5f15\u3002 SHOW FULLTEXT INDEXES SHOW FULLTEXT INDEXES \u663e\u793a\u5168\u6587\u7d22\u5f15\u3002 REBUILD FULLTEXT INDEX REBUILD FULLTEXT INDEX \u91cd\u5efa\u5168\u6587\u7d22\u5f15\u3002 DROP FULLTEXT INDEX <index_name> DROP FULLTEXT INDEX nebula_index_1 \u5220\u9664\u5168\u6587\u7d22\u5f15\u3002 LOOKUP ON {<tag> | <edge_type>} WHERE <expression> [YIELD <return_list>] LOOKUP ON player WHERE FUZZY(player.name, \"Tim Dunncan\", AUTO, OR) YIELD player.name \u4f7f\u7528\u67e5\u8be2\u9009\u9879\u3002 \u5b50\u56fe\u548c\u8def\u5f84 \u00b6 \u7c7b\u578b \u8bed\u6cd5 \u793a\u4f8b \u8bf4\u660e \u5b50\u56fe GET SUBGRAPH [WITH PROP] [<step_count> {STEP|STEPS}] FROM {<vid>, <vid>...} [{IN | OUT | BOTH} <edge_type>, <edge_type>...] YIELD [VERTICES AS <vertex_alias>] [,EDGES AS <edge_alias>] GET SUBGRAPH 1 STEPS FROM \"player100\" YIELD VERTICES AS nodes, EDGES AS relationships \u6307\u5b9a Edge type \u7684\u8d77\u59cb\u70b9\u53ef\u4ee5\u5230\u8fbe\u7684\u70b9\u548c\u8fb9\u7684\u4fe1\u606f\uff0c\u8fd4\u56de\u5b50\u56fe\u4fe1\u606f\u3002 \u8def\u5f84 FIND { SHORTEST | ALL | NOLOOP } PATH [WITH PROP] FROM <vertex_id_list> TO <vertex_id_list> OVER <edge_type_list> [REVERSELY | BIDIRECT] [<WHERE clause>] [UPTO <N> {STEP|STEPS}] YIELD path as <alias> [| ORDER BY $-.path] [| LIMIT <M>] FIND SHORTEST PATH FROM \"player102\" TO \"team204\" OVER * YIELD path as p \u67e5\u627e\u6307\u5b9a\u8d77\u59cb\u70b9\u548c\u76ee\u7684\u70b9\u4e4b\u95f4\u7684\u8def\u5f84\u3002\u8fd4\u56de\u7684\u8def\u5f84\u683c\u5f0f\u7c7b\u4f3c\u4e8e (<vertex_id>)-[:<edge_type_name>@<rank>]->(<vertex_id) \u3002 \u67e5\u8be2\u8c03\u4f18 \u00b6 \u7c7b\u578b \u8bed\u6cd5 \u793a\u4f8b \u8bf4\u660e EXPLAIN EXPLAIN [format=\"row\" | \"dot\"] <your_nGQL_statement> EXPLAIN format=\"row\" SHOW TAGS EXPLAIN format=\"dot\" SHOW TAGS \u8f93\u51fa nGQL \u8bed\u53e5\u7684\u6267\u884c\u8ba1\u5212\uff0c\u4f46\u4e0d\u4f1a\u6267\u884c nGQL \u8bed\u53e5\u3002 PROFILE PROFILE [format=\"row\" | \"dot\"] <your_nGQL_statement> PROFILE format=\"row\" SHOW TAGS EXPLAIN format=\"dot\" SHOW TAGS \u6267\u884c nGQL \u8bed\u53e5\uff0c\u7136\u540e\u8f93\u51fa\u6267\u884c\u8ba1\u5212\u548c\u6267\u884c\u6982\u8981\u3002 \u8fd0\u7ef4 \u00b6 SUBMIT JOB BALANCE \u8bed\u6cd5 \u8bf4\u660e SUBMIT JOB BALANCE LEADER \u542f\u52a8\u4efb\u52a1\u5747\u8861\u5206\u5e03\u6240\u6709\u56fe\u7a7a\u95f4\u4e2d\u7684 leader\u3002\u8be5\u547d\u4ee4\u4f1a\u8fd4\u56de\u4efb\u52a1 ID\u3002 \u4f5c\u4e1a\u7ba1\u7406 \u8bed\u6cd5 \u8bf4\u660e SUBMIT JOB COMPACT \u89e6\u53d1 RocksDB \u7684\u957f\u8017\u65f6 compact \u64cd\u4f5c\u3002 SUBMIT JOB FLUSH \u5c06\u5185\u5b58\u4e2d\u7684 RocksDB memfile \u5199\u5165\u786c\u76d8\u3002 SUBMIT JOB STATS \u542f\u52a8\u4e00\u4e2a\u4f5c\u4e1a\uff0c\u8be5\u4f5c\u4e1a\u5bf9\u5f53\u524d\u56fe\u7a7a\u95f4\u8fdb\u884c\u7edf\u8ba1\u3002\u4f5c\u4e1a\u5b8c\u6210\u540e\uff0c\u7528\u6237\u53ef\u4ee5\u4f7f\u7528 SHOW STATS \u8bed\u53e5\u5217\u51fa\u7edf\u8ba1\u7ed3\u679c\u3002 SHOW JOB <job_id> \u663e\u793a\u5f53\u524d\u56fe\u7a7a\u95f4\u5185\u6307\u5b9a\u4f5c\u4e1a\u548c\u76f8\u5173\u4efb\u52a1\u7684\u4fe1\u606f\u3002Meta \u670d\u52a1\u5c06 SUBMIT JOB \u8bf7\u6c42\u89e3\u6790\u4e3a\u591a\u4e2a\u4efb\u52a1\uff0c\u7136\u540e\u5206\u914d\u7ed9\u8fdb\u7a0b nebula-storaged\u3002 SHOW JOBS \u5217\u51fa\u5f53\u524d\u56fe\u7a7a\u95f4\u5185\u6240\u6709\u672a\u8fc7\u671f\u7684\u4f5c\u4e1a\u3002 STOP JOB \u505c\u6b62\u5f53\u524d\u56fe\u7a7a\u95f4\u5185\u672a\u5b8c\u6210\u7684\u4f5c\u4e1a\u3002 RECOVER JOB \u91cd\u65b0\u6267\u884c\u5f53\u524d\u56fe\u7a7a\u95f4\u5185\u5931\u8d25\u7684\u4f5c\u4e1a\uff0c\u5e76\u8fd4\u56de\u5df2\u6062\u590d\u7684\u4f5c\u4e1a\u6570\u91cf\u3002 \u7ec8\u6b62\u67e5\u8be2 \u8bed\u6cd5 \u793a\u4f8b \u8bf4\u660e KILL QUERY (session=<session_id>, plan=<plan_id>) KILL QUERY(SESSION=1625553545984255,PLAN=163) \u5728\u4e00\u4e2a\u4f1a\u8bdd\u4e2d\u6267\u884c\u547d\u4ee4\u7ec8\u6b62\u53e6\u4e00\u4e2a\u4f1a\u8bdd\u4e2d\u7684\u67e5\u8be2\u3002","title":"nGQL \u547d\u4ee4\u6c47\u603b"},{"location":"2.quick-start/6.cheatsheet-for-ngql-command/#ngql","text":"","title":"nGQL \u547d\u4ee4\u6c47\u603b"},{"location":"2.quick-start/6.cheatsheet-for-ngql-command/#_1","text":"\u6570\u5b66\u51fd\u6570 \u51fd\u6570 \u8bf4\u660e double abs(double x) \u8fd4\u56de x \u7684\u7edd\u5bf9\u503c\u3002 double floor(double x) \u8fd4\u56de\u5c0f\u4e8e\u6216\u7b49\u4e8e x \u7684\u6700\u5927\u6574\u6570\u3002 double ceil(double x) \u8fd4\u56de\u5927\u4e8e\u6216\u7b49\u4e8e x \u7684\u6700\u5c0f\u6574\u6570\u3002 double round(double x) \u8fd4\u56de\u79bb x \u6700\u8fd1\u7684\u6574\u6570\u503c\uff0c\u5982\u679c x \u6070\u597d\u5728\u4e2d\u95f4\uff0c\u5219\u8fd4\u56de\u79bb 0 \u8f83\u8fdc\u7684\u6574\u6570\u3002 double sqrt(double x) \u8fd4\u56de x \u7684\u5e73\u65b9\u6839\u3002 double cbrt(double x) \u8fd4\u56de x \u7684\u7acb\u65b9\u6839\u3002 double hypot(double x, double y) \u8fd4\u56de\u76f4\u89d2\u4e09\u89d2\u5f62\uff08\u76f4\u89d2\u8fb9\u957f\u4e3a x \u548c y\uff09\u7684\u659c\u8fb9\u957f\u3002 double pow(double x, double y) \u8fd4\u56de x y \u7684\u503c\u3002 double exp(double x) \u8fd4\u56de e x \u7684\u503c\u3002 double exp2(double x) \u8fd4\u56de 2 x \u7684\u503c\u3002 double log(double x) \u8fd4\u56de\u4ee5\u81ea\u7136\u6570 e \u4e3a\u5e95 x \u7684\u5bf9\u6570\u3002 double log2(double x) \u8fd4\u56de\u4ee5 2 \u4e3a\u5e95 x \u7684\u5bf9\u6570\u3002 double log10(double x) \u8fd4\u56de\u4ee5 10 \u4e3a\u5e95 x \u7684\u5bf9\u6570\u3002 double sin(double x) \u8fd4\u56de x \u7684\u6b63\u5f26\u503c\u3002 double asin(double x) \u8fd4\u56de x \u7684\u53cd\u6b63\u5f26\u503c\u3002 double cos(double x) \u8fd4\u56de x \u7684\u4f59\u5f26\u503c\u3002 double acos(double x) \u8fd4\u56de x \u7684\u53cd\u4f59\u5f26\u503c\u3002 double tan(double x) \u8fd4\u56de x \u7684\u6b63\u5207\u503c\u3002 double atan(double x) \u8fd4\u56de x \u7684\u53cd\u6b63\u5207\u503c\u3002 double rand() \u8fd4\u56de [0,1) \u5185\u7684\u968f\u673a\u6d6e\u70b9\u6570\u3002 int rand32(int min, int max) \u8fd4\u56de [min, max) \u5185\u7684\u4e00\u4e2a\u968f\u673a 32 \u4f4d\u6574\u6570\u3002 \u7528\u6237\u53ef\u4ee5\u53ea\u4f20\u5165\u4e00\u4e2a\u53c2\u6570\uff0c\u8be5\u53c2\u6570\u4f1a\u5224\u5b9a\u4e3a max \uff0c\u6b64\u65f6 min \u9ed8\u8ba4\u4e3a 0 \u3002 \u5982\u679c\u4e0d\u4f20\u5165\u53c2\u6570\uff0c\u6b64\u65f6\u4f1a\u4ece\u5e26\u7b26\u53f7\u7684 32 \u4f4d int \u8303\u56f4\u5185\u968f\u673a\u8fd4\u56de\u3002 int rand64(int min, int max) \u8fd4\u56de [min, max) \u5185\u7684\u4e00\u4e2a\u968f\u673a 64 \u4f4d\u6574\u6570\u3002 \u7528\u6237\u53ef\u4ee5\u53ea\u4f20\u5165\u4e00\u4e2a\u53c2\u6570\uff0c\u8be5\u53c2\u6570\u4f1a\u5224\u5b9a\u4e3a max \uff0c\u6b64\u65f6 min \u9ed8\u8ba4\u4e3a 0 \u3002 \u5982\u679c\u4e0d\u4f20\u5165\u53c2\u6570\uff0c\u6b64\u65f6\u4f1a\u4ece\u5e26\u7b26\u53f7\u7684 64 \u4f4d int \u8303\u56f4\u5185\u968f\u673a\u8fd4\u56de\u3002 bit_and() \u9010\u4f4d\u505a AND \u64cd\u4f5c\u3002 bit_or() \u9010\u4f4d\u505a OR \u64cd\u4f5c\u3002 bit_xor() \u9010\u4f4d\u505a XOR \u64cd\u4f5c\u3002 int size() \u8fd4\u56de\u5217\u8868\u6216\u6620\u5c04\u4e2d\u5143\u7d20\u7684\u6570\u91cf\uff0c\u6216\u5b57\u7b26\u4e32\u7684\u957f\u5ea6\u3002 int range(int start, int end, int step) \u8fd4\u56de [start,end] \u4e2d\u6307\u5b9a\u6b65\u957f\u7684\u503c\u7ec4\u6210\u7684\u5217\u8868\u3002\u6b65\u957f step \u9ed8\u8ba4\u4e3a 1\u3002 int sign(double x) \u8fd4\u56de x \u7684\u6b63\u8d1f\u53f7\u3002 \u5982\u679c x \u4e3a 0 \uff0c\u5219\u8fd4\u56de 0 \u3002 \u5982\u679c x \u4e3a\u8d1f\u6570\uff0c\u5219\u8fd4\u56de -1 \u3002 \u5982\u679c x \u4e3a\u6b63\u6570\uff0c\u5219\u8fd4\u56de 1 \u3002 double e() \u8fd4\u56de\u81ea\u7136\u5bf9\u6570\u7684\u5e95 e\uff082.718281828459045\uff09\u3002 double pi() \u8fd4\u56de\u6570\u5b66\u5e38\u6570\u03c0\uff083.141592653589793\uff09\u3002 double radians() \u5c06\u89d2\u5ea6\u8f6c\u6362\u4e3a\u5f27\u5ea6\u3002 radians(180) \u8fd4\u56de 3.141592653589793 \u3002 \u805a\u5408\u51fd\u6570 \u51fd\u6570 \u8bf4\u660e avg() \u8fd4\u56de\u53c2\u6570\u7684\u5e73\u5747\u503c\u3002 count() \u8bed\u6cd5\uff1a count({expr | *}) \u3002 count() \u8fd4\u56de\u603b\u884c\u6570\uff08\u5305\u62ec NULL\uff09\u3002 count(expr) \u8fd4\u56de\u6ee1\u8db3\u8868\u8fbe\u5f0f\u7684\u975e\u7a7a\u503c\u7684\u603b\u6570\u3002 count() \u548c size() \u662f\u4e0d\u540c\u7684\u3002 max() \u8fd4\u56de\u53c2\u6570\u7684\u6700\u5927\u503c\u3002 min() \u8fd4\u56de\u53c2\u6570\u7684\u6700\u5c0f\u503c\u3002 collect() collect() \u51fd\u6570\u8fd4\u56de\u4e00\u4e2a\u7b26\u5408\u8868\u8fbe\u5f0f\u8fd4\u56de\u7ed3\u679c\u7684\u5217\u8868\u3002\u8be5\u51fd\u6570\u53ef\u4ee5\u5c06\u591a\u6761\u8bb0\u5f55\u6216\u503c\u5408\u5e76\u8fdb\u4e00\u4e2a\u5217\u8868\uff0c\u5b9e\u73b0\u6570\u636e\u805a\u5408\u3002 std() \u8fd4\u56de\u53c2\u6570\u7684\u603b\u4f53\u6807\u51c6\u5dee\u3002 sum() \u8fd4\u56de\u53c2\u6570\u7684\u548c\u3002 \u5b57\u7b26\u4e32\u51fd\u6570 \u51fd\u6570 \u8bf4\u660e int strcasecmp(string a, string b) \u6bd4\u8f83\u4e24\u4e2a\u5b57\u7b26\u4e32\uff08\u4e0d\u533a\u5206\u5927\u5c0f\u5199\uff09\u3002\u5f53 a=b \u65f6\uff0c\u8fd4\u56de 0\uff0c\u5f53 a>b \u662f\uff0c\u8fd4\u56de\u5927\u4e8e 0 \u7684\u6570\uff0c\u5f53 a<b \u65f6\uff0c\u8fd4\u56de\u5c0f\u4e8e 0 \u7684\u6570\u3002 string lower(string a) \u8fd4\u56de\u5c0f\u5199\u5f62\u5f0f\u7684\u5b57\u7b26\u4e32\u3002 string toLower(string a) \u548c lower() \u76f8\u540c\u3002 string upper(string a) \u8fd4\u56de\u5927\u5199\u5f62\u5f0f\u7684\u5b57\u7b26\u4e32\u3002 string toUpper(string a) \u548c upper() \u76f8\u540c\u3002 int length(a) \u8fd4\u56de\u7ed9\u5b9a\u5b57\u7b26\u4e32\u7684\u957f\u5ea6\u6216\u8def\u5f84\u7684\u957f\u5ea6\uff0c\u5355\u4f4d\u5206\u522b\u662f\u5b57\u8282\u548c\u8df3\u6570\u3002 string trim(string a) \u5220\u9664\u5b57\u7b26\u4e32\u5934\u90e8\u548c\u5c3e\u90e8\u7684\u7a7a\u683c\u3002 string ltrim(string a) \u5220\u9664\u5b57\u7b26\u4e32\u5934\u90e8\u7684\u7a7a\u683c\u3002 string rtrim(string a) \u5220\u9664\u5b57\u7b26\u4e32\u5c3e\u90e8\u7684\u7a7a\u683c\u3002 string left(string a, int count) \u8fd4\u56de\u5b57\u7b26\u4e32\u5de6\u4fa7 count \u4e2a\u5b57\u7b26\u7ec4\u6210\u7684\u5b50\u5b57\u7b26\u4e32\u3002\u5982\u679c count \u8d85\u8fc7\u5b57\u7b26\u4e32 a \u7684\u957f\u5ea6\uff0c\u5219\u8fd4\u56de\u5b57\u7b26\u4e32 a\u3002 string right(string a, int count) \u8fd4\u56de\u5b57\u7b26\u4e32\u53f3\u4fa7 count \u4e2a\u5b57\u7b26\u7ec4\u6210\u7684\u5b50\u5b57\u7b26\u4e32\u3002\u5982\u679c count \u8d85\u8fc7\u5b57\u7b26\u4e32 a \u7684\u957f\u5ea6\uff0c\u5219\u8fd4\u56de\u5b57\u7b26\u4e32 a\u3002 string lpad(string a, int size, string letters) \u5728\u5b57\u7b26\u4e32 a \u7684\u5de6\u4fa7\u586b\u5145 letters \u5b57\u7b26\u4e32\uff0c\u5e76\u8fd4\u56de size \u957f\u5ea6\u7684\u5b57\u7b26\u4e32\u3002 string rpad(string a, int size, string letters) \u5728\u5b57\u7b26\u4e32 a \u7684\u53f3\u4fa7\u586b\u5145 letters \u5b57\u7b26\u4e32\uff0c\u5e76\u8fd4\u56de size \u957f\u5ea6\u7684\u5b57\u7b26\u4e32\u3002 string substr(string a, int pos, int count) \u4ece\u5b57\u7b26\u4e32 a \u7684\u6307\u5b9a\u4f4d\u7f6e pos \u5f00\u59cb\uff08\u4e0d\u5305\u62ec pos \u4f4d\u7f6e\u7684\u5b57\u7b26\uff09\uff0c\u63d0\u53d6\u53f3\u4fa7\u7684 count \u4e2a\u5b57\u7b26\uff0c\u7ec4\u6210\u65b0\u7684\u5b57\u7b26\u4e32\u5e76\u8fd4\u56de\u3002 string substring(string a, int pos, int count) \u548c substr() \u76f8\u540c\u3002 string reverse(string) \u9006\u5e8f\u8fd4\u56de\u5b57\u7b26\u4e32\u3002 string replace(string a, string b, string c) \u5c06\u5b57\u7b26\u4e32 a \u4e2d\u7684\u5b50\u5b57\u7b26\u4e32 b \u66ff\u6362\u4e3a\u5b57\u7b26\u4e32 c\u3002 list split(string a, string b) \u5728\u5b50\u5b57\u7b26\u4e32 b \u5904\u62c6\u5206\u5b57\u7b26\u4e32 a\uff0c\u8fd4\u56de\u4e00\u4e2a\u5b57\u7b26\u4e32\u5217\u8868\u3002 concat() concat() \u51fd\u6570\u81f3\u5c11\u9700\u8981\u4e24\u4e2a\u6216\u4ee5\u4e0a\u5b57\u7b26\u4e32\u53c2\u6570\uff0c\u5e76\u5c06\u6240\u6709\u53c2\u6570\u8fde\u63a5\u6210\u4e00\u4e2a\u5b57\u7b26\u4e32\u3002 \u8bed\u6cd5\uff1a concat(string1,string2,...) concat_ws() concat_ws() \u51fd\u6570\u5c06\u4e24\u4e2a\u6216\u4ee5\u4e0a\u5b57\u7b26\u4e32\u53c2\u6570\u4e0e\u9884\u5b9a\u4e49\u7684\u5206\u9694\u7b26\uff08separator\uff09\u76f8\u8fde\u63a5\u3002 extract() extract() \u4ece\u6307\u5b9a\u5b57\u7b26\u4e32\u4e2d\u63d0\u53d6\u7b26\u5408\u6b63\u5219\u8868\u8fbe\u5f0f\u7684\u5b50\u5b57\u7b26\u4e32\u3002 json_extract() json_extract() \u5c06\u6307\u5b9a JSON \u5b57\u7b26\u4e32\u8f6c\u6362\u4e3a map \u7c7b\u578b\u3002 \u65e5\u671f\u65f6\u95f4\u51fd\u6570 \u51fd\u6570 \u8bf4\u660e int now() \u6839\u636e\u5f53\u524d\u7cfb\u7edf\u8fd4\u56de\u5f53\u524d\u65f6\u95f4\u6233\u3002 timestamp timestamp() \u6839\u636e\u5f53\u524d\u7cfb\u7edf\u8fd4\u56de\u5f53\u524d\u65f6\u95f4\u6233\u3002 date date() \u6839\u636e\u5f53\u524d\u7cfb\u7edf\u8fd4\u56de\u5f53\u524d\u65e5\u671f\uff08UTC \u65f6\u95f4\uff09\u3002 time time() \u6839\u636e\u5f53\u524d\u7cfb\u7edf\u8fd4\u56de\u5f53\u524d\u65f6\u95f4\uff08UTC \u65f6\u95f4\uff09\u3002 datetime datetime() \u6839\u636e\u5f53\u524d\u7cfb\u7edf\u8fd4\u56de\u5f53\u524d\u65e5\u671f\u548c\u65f6\u95f4\uff08UTC \u65f6\u95f4\uff09\u3002 Schema \u76f8\u5173\u51fd\u6570 \u539f\u751f nGQL \u8bed\u53e5\u9002\u7528 \u51fd\u6570 \u8bf4\u660e id(vertex) \u8fd4\u56de\u70b9 ID\u3002\u6570\u636e\u7c7b\u578b\u548c\u70b9 ID \u7684\u7c7b\u578b\u4fdd\u6301\u4e00\u81f4\u3002 map properties(vertex) \u8fd4\u56de\u70b9\u7684\u6240\u6709\u5c5e\u6027\u3002 map properties(edge) \u8fd4\u56de\u8fb9\u7684\u6240\u6709\u5c5e\u6027\u3002 string type(edge) \u8fd4\u56de\u8fb9\u7684 Edge type\u3002 src(edge) \u8fd4\u56de\u8fb9\u7684\u8d77\u59cb\u70b9 ID\u3002\u6570\u636e\u7c7b\u578b\u548c\u70b9 ID \u7684\u7c7b\u578b\u4fdd\u6301\u4e00\u81f4\u3002 dst(edge) \u8fd4\u56de\u8fb9\u7684\u76ee\u7684\u70b9 ID\u3002\u6570\u636e\u7c7b\u578b\u548c\u70b9 ID \u7684\u7c7b\u578b\u4fdd\u6301\u4e00\u81f4\u3002 int rank(edge) \u8fd4\u56de\u8fb9\u7684 rank\u3002 vertex \u8fd4\u56de\u70b9\u7684\u4fe1\u606f\u3002\u5305\u62ec\u70b9 ID\u3001Tag\u3001\u5c5e\u6027\u548c\u503c\u3002 edge \u8fd4\u56de\u8fb9\u7684\u4fe1\u606f\u3002\u5305\u62ec Edge type\u3001\u8d77\u59cb\u70b9 ID\u3001\u76ee\u7684\u70b9 ID\u3001rank\u3001\u5c5e\u6027\u548c\u503c\u3002 vertices \u8fd4\u56de\u5b50\u56fe\u4e2d\u7684\u70b9\u7684\u4fe1\u606f\u3002\u8be6\u60c5\u53c2\u89c1 GET SUBGRAPH \u3002 edges \u8fd4\u56de\u5b50\u56fe\u4e2d\u7684\u8fb9\u7684\u4fe1\u606f\u3002\u8be6\u60c5\u53c2\u89c1 GET SUBGRAPH \u3002 path \u8fd4\u56de\u8def\u5f84\u4fe1\u606f\u3002\u8be6\u60c5\u53c2\u89c1 FIND PATH \u3002 openCypher \u517c\u5bb9\u8bed\u53e5\u9002\u7528 \u51fd\u6570 \u8bf4\u660e id(<vertex>) \u8fd4\u56de\u70b9 ID\u3002\u6570\u636e\u7c7b\u578b\u548c\u70b9 ID \u7684\u7c7b\u578b\u4fdd\u6301\u4e00\u81f4\u3002 list tags(<vertex>) \u8fd4\u56de\u70b9\u7684 Tag\uff0c\u4e0e labels() \u4f5c\u7528\u76f8\u540c\u3002 list labels(<vertex>) \u8fd4\u56de\u70b9\u7684 Tag\uff0c\u4e0e tags() \u4f5c\u7528\u76f8\u540c\uff0c\u7528\u4e8e\u517c\u5bb9 openCypher \u8bed\u6cd5\u3002 map properties(<vertex_or_edge>) \u8fd4\u56de\u70b9\u6216\u8fb9\u7684\u6240\u6709\u5c5e\u6027\u3002 string type(<edge>) \u8fd4\u56de\u8fb9\u7684 Edge type\u3002 src(<edge>) \u8fd4\u56de\u8fb9\u7684\u8d77\u59cb\u70b9 ID\u3002\u6570\u636e\u7c7b\u578b\u548c\u70b9 ID \u7684\u7c7b\u578b\u4fdd\u6301\u4e00\u81f4\u3002 dst(<edge>) \u8fd4\u56de\u8fb9\u7684\u76ee\u7684\u70b9 ID\u3002\u6570\u636e\u7c7b\u578b\u548c\u70b9 ID \u7684\u7c7b\u578b\u4fdd\u6301\u4e00\u81f4\u3002 vertex startNode(<path>) \u83b7\u53d6\u4e00\u6761\u8fb9\u6216\u4e00\u6761\u8def\u5f84\u5e76\u8fd4\u56de\u5b83\u7684\u8d77\u59cb\u70b9 ID\u3002 string endNode(<path>) \u83b7\u53d6\u4e00\u6761\u8fb9\u6216\u4e00\u6761\u8def\u5f84\u5e76\u8fd4\u56de\u5b83\u7684\u76ee\u7684\u70b9 ID\u3002 int rank(<edge>) \u8fd4\u56de\u8fb9\u7684 rank\u3002 \u5217\u8868\u51fd\u6570 \u51fd\u6570 \u8bf4\u660e keys(expr) \u8fd4\u56de\u4e00\u4e2a\u5217\u8868\uff0c\u5305\u542b\u5b57\u7b26\u4e32\u5f62\u5f0f\u7684\u70b9\u3001\u8fb9\u6216\u6620\u5c04\u7684\u6240\u6709\u5c5e\u6027\u3002 labels(vertex) \u8fd4\u56de\u70b9\u7684 Tag \u5217\u8868\u3002 nodes(path) \u8fd4\u56de\u8def\u5f84\u4e2d\u6240\u6709\u70b9\u7684\u5217\u8868\u3002 range(start, end [, step]) \u8fd4\u56de [start,end] \u8303\u56f4\u5185\u56fa\u5b9a\u6b65\u957f\u7684\u5217\u8868\uff0c\u9ed8\u8ba4\u6b65\u957f step \u4e3a 1\u3002 relationships(path) \u8fd4\u56de\u8def\u5f84\u4e2d\u6240\u6709\u5173\u7cfb\u7684\u5217\u8868\u3002 reverse(list) \u8fd4\u56de\u5c06\u539f\u5217\u8868\u9006\u5e8f\u6392\u5217\u7684\u65b0\u5217\u8868\u3002 tail(list) \u8fd4\u56de\u4e0d\u5305\u542b\u539f\u5217\u8868\u7b2c\u4e00\u4e2a\u5143\u7d20\u7684\u65b0\u5217\u8868\u3002 head(list) \u8fd4\u56de\u5217\u8868\u7684\u7b2c\u4e00\u4e2a\u5143\u7d20\u3002 last(list) \u8fd4\u56de\u5217\u8868\u7684\u6700\u540e\u4e00\u4e2a\u5143\u7d20\u3002 reduce() \u5c06\u8868\u8fbe\u5f0f\u9010\u4e2a\u5e94\u7528\u4e8e\u5217\u8868\u4e2d\u7684\u5143\u7d20\uff0c\u7136\u540e\u548c\u7d2f\u52a0\u5668\u4e2d\u7684\u5f53\u524d\u7ed3\u679c\u7d2f\u52a0\uff0c\u6700\u540e\u8fd4\u56de\u5b8c\u6574\u7ed3\u679c\u3002 \u7c7b\u578b\u8f6c\u6362\u51fd\u6570 \u51fd\u6570 \u8bf4\u660e bool toBoolean() \u5c06\u5b57\u7b26\u4e32\u8f6c\u6362\u4e3a\u5e03\u5c14\u3002 float toFloat() \u5c06\u6574\u6570\u6216\u5b57\u7b26\u4e32\u8f6c\u6362\u4e3a\u6d6e\u70b9\u6570\u3002 string toString() \u5c06\u4efb\u610f\u6570\u636e\u7c7b\u578b\u8f6c\u6362\u4e3a\u5b57\u7b26\u4e32\u7c7b\u578b\u3002 int toInteger() \u5c06\u6d6e\u70b9\u6216\u5b57\u7b26\u4e32\u8f6c\u6362\u4e3a\u6574\u6570\u3002 set toSet() \u5c06\u5217\u8868\u6216\u96c6\u5408\u8f6c\u6362\u4e3a\u96c6\u5408\u3002 int hash() hash() \u51fd\u6570\u8fd4\u56de\u53c2\u6570\u7684\u54c8\u5e0c\u503c\u3002\u5176\u53c2\u6570\u53ef\u4ee5\u662f\u6570\u5b57\u3001\u5b57\u7b26\u4e32\u3001\u5217\u8868\u3001\u5e03\u5c14\u503c\u3001NULL \u7b49\u7c7b\u578b\u7684\u503c\uff0c\u6216\u8005\u8ba1\u7b97\u7ed3\u679c\u4e3a\u8fd9\u4e9b\u7c7b\u578b\u7684\u8868\u8fbe\u5f0f\u3002 \u8c13\u8bcd\u51fd\u6570 \u8c13\u8bcd\u51fd\u6570\u53ea\u8fd4\u56de true \u6216 false \uff0c\u901a\u5e38\u7528\u4e8e WHERE \u5b50\u53e5\u4e2d\u3002 <predicate>(<variable> IN <list> WHERE <condition>) \u51fd\u6570 \u8bf4\u660e exists() \u5982\u679c\u6307\u5b9a\u7684\u5c5e\u6027\u5728\u70b9\u3001\u8fb9\u6216\u6620\u5c04\u4e2d\u5b58\u5728\uff0c\u5219\u8fd4\u56de true \uff0c\u5426\u5219\u8fd4\u56de false \u3002 any() \u5982\u679c\u6307\u5b9a\u7684\u8c13\u8bcd\u9002\u7528\u4e8e\u5217\u8868\u4e2d\u7684\u81f3\u5c11\u4e00\u4e2a\u5143\u7d20\uff0c\u5219\u8fd4\u56de true \uff0c\u5426\u5219\u8fd4\u56de false \u3002 all() \u5982\u679c\u6307\u5b9a\u7684\u8c13\u8bcd\u9002\u7528\u4e8e\u5217\u8868\u4e2d\u7684\u6bcf\u4e2a\u5143\u7d20\uff0c\u5219\u8fd4\u56de true \uff0c\u5426\u5219\u8fd4\u56de false \u3002 none() \u5982\u679c\u6307\u5b9a\u7684\u8c13\u8bcd\u4e0d\u9002\u7528\u4e8e\u5217\u8868\u4e2d\u7684\u4efb\u4f55\u4e00\u4e2a\u5143\u7d20\uff0c\u5219\u8fd4\u56de true \uff0c\u5426\u5219\u8fd4\u56de false \u3002 single() \u5982\u679c\u6307\u5b9a\u7684\u8c13\u8bcd\u9002\u7528\u4e8e\u5217\u8868\u4e2d\u7684\u552f\u4e00\u4e00\u4e2a\u5143\u7d20\uff0c\u5219\u8fd4\u56de true \uff0c\u5426\u5219\u8fd4\u56de false \u3002 \u6761\u4ef6\u8868\u8fbe\u5f0f\u51fd\u6570 \u51fd\u6570 \u8bf4\u660e CASE \u4f7f\u7528\u6761\u4ef6\u6765\u8fc7\u6ee4 nGQL \u67e5\u8be2\u8bed\u53e5\u7684\u7ed3\u679c\uff0c\u5e38\u7528\u4e8e YIELD \u548c RETURN \u5b50\u53e5\u4e2d\u3002 CASE \u8868\u8fbe\u5f0f\u4f1a\u904d\u5386\u6240\u6709\u6761\u4ef6\uff0c\u5e76\u5728\u6ee1\u8db3\u7b2c\u4e00\u4e2a\u6761\u4ef6\u65f6\u505c\u6b62\u8bfb\u53d6\u540e\u7eed\u6761\u4ef6\uff0c\u7136\u540e\u8fd4\u56de\u7ed3\u679c\u3002 \u5982\u679c\u4e0d\u6ee1\u8db3\u4efb\u4f55\u6761\u4ef6\uff0c\u5c06\u901a\u8fc7 ELSE \u5b50\u53e5\u8fd4\u56de\u7ed3\u679c\u3002\u5982\u679c\u6ca1\u6709 ELSE \u5b50\u53e5\u4e14\u4e0d\u6ee1\u8db3\u4efb\u4f55\u6761\u4ef6\uff0c\u5219\u8fd4\u56de NULL \u3002 coalesce() \u8fd4\u56de\u6240\u6709\u8868\u8fbe\u5f0f\u4e2d\u7b2c\u4e00\u4e2a\u975e\u7a7a\u5143\u7d20\u3002","title":"\u51fd\u6570"},{"location":"2.quick-start/6.cheatsheet-for-ngql-command/#_2","text":"MATCH MATCH <pattern> [<clause_1>] RETURN <output> [<clause_2>]; \u6a21\u5f0f \u793a\u4f8b \u8bf4\u660e \u5339\u914d\u70b9 (v) \u7528\u6237\u53ef\u4ee5\u5728\u4e00\u5bf9\u62ec\u53f7\u4e2d\u4f7f\u7528\u81ea\u5b9a\u4e49\u53d8\u91cf\u6765\u8868\u793a\u6a21\u5f0f\u4e2d\u7684\u70b9\u3002\u4f8b\u5982 (v) \u3002 \u5339\u914d Tag MATCH (v:player) RETURN v \u7528\u6237\u53ef\u4ee5\u5728\u70b9\u7684\u53f3\u4fa7\u7528 :<tag_name> \u8868\u793a\u6a21\u5f0f\u4e2d\u7684 Tag\u3002 \u5339\u914d\u591a Tag MATCH (v:player:team) RETURN v \u7528\u6237\u53ef\u4ee5\u7528\u82f1\u6587\u5192\u53f7\uff08:\uff09\u5339\u914d\u591a Tag \u7684\u70b9\u3002 \u5339\u914d\u70b9\u7684\u5c5e\u6027 MATCH (v:player{name:\"Tim Duncan\"}) RETURN v MATCH (v) WITH v, properties(v) as props, keys(properties(v)) as kk WHERE [i in kk where props[i] == \"Tim Duncan\"] RETURN v \u7528\u6237\u53ef\u4ee5\u5728 Tag \u7684\u53f3\u4fa7\u7528 {<prop_name>: <prop_value>} \u8868\u793a\u6a21\u5f0f\u4e2d\u70b9\u7684\u5c5e\u6027\uff1b\u6216\u8005\u4e0d\u6307\u5b9a Tag \u76f4\u63a5\u5339\u914d\u70b9\u7684\u5c5e\u6027\u3002 \u5339\u914d\u5355\u70b9 ID MATCH (v) WHERE id(v) == 'player101' RETURN v \u7528\u6237\u53ef\u4ee5\u4f7f\u7528\u70b9 ID \u53bb\u5339\u914d\u70b9\u3002 id() \u51fd\u6570\u53ef\u4ee5\u68c0\u7d22\u70b9\u7684 ID\u3002 \u5339\u914d\u591a\u70b9 ID MATCH (v:player { name: 'Tim Duncan' })--(v2) WHERE id(v2) IN [\"player101\", \"player102\"] RETURN v2 \u8981\u5339\u914d\u591a\u4e2a\u70b9\u7684 ID\uff0c\u53ef\u4ee5\u7528 WHERE id(v) IN [vid_list] \u3002 \u5339\u914d\u8fde\u63a5\u7684\u70b9 MATCH (v:player{name:\"Tim Duncan\"})--(v2) RETURN v2.player.name AS Name \u7528\u6237\u53ef\u4ee5\u4f7f\u7528 -- \u7b26\u53f7\u8868\u793a\u4e24\u4e2a\u65b9\u5411\u7684\u8fb9\uff0c\u5e76\u5339\u914d\u8fd9\u4e9b\u8fb9\u8fde\u63a5\u7684\u70b9\u3002\u7528\u6237\u53ef\u4ee5\u5728 -- \u7b26\u53f7\u4e0a\u589e\u52a0 < \u6216 > \u7b26\u53f7\u6307\u5b9a\u8fb9\u7684\u65b9\u5411\u3002 \u5339\u914d\u8def\u5f84 MATCH p=(v:player{name:\"Tim Duncan\"})-->(v2) RETURN p \u8fde\u63a5\u8d77\u6765\u7684\u70b9\u548c\u8fb9\u6784\u6210\u4e86\u8def\u5f84\u3002\u7528\u6237\u53ef\u4ee5\u4f7f\u7528\u81ea\u5b9a\u4e49\u53d8\u91cf\u547d\u540d\u8def\u5f84\u3002 \u5339\u914d\u8fb9 MATCH (v:player{name:\"Tim Duncan\"})-[e]-(v2) RETURN e MATCH ()<-[e]-() RETURN e \u9664\u4e86\u7528 -- \u3001 --> \u3001 <-- \u8868\u793a\u672a\u547d\u540d\u7684\u8fb9\u4e4b\u5916\uff0c\u7528\u6237\u8fd8\u53ef\u4ee5\u5728\u65b9\u62ec\u53f7\u4e2d\u4f7f\u7528\u81ea\u5b9a\u4e49\u53d8\u91cf\u547d\u540d\u8fb9\u3002\u4f8b\u5982 -[e]- \u3002 \u5339\u914d Edge type MATCH ()-[e:follow]->() RETURN e \u548c\u70b9\u4e00\u6837\uff0c\u7528\u6237\u53ef\u4ee5\u7528 :<edge_type> \u8868\u793a\u6a21\u5f0f\u4e2d\u7684 Edge type\uff0c\u4f8b\u5982 -[e:follow]- \u3002 \u5339\u914d\u8fb9\u7684\u5c5e\u6027 MATCH (v:player{name:\"Tim Duncan\"})-[e:follow{degree:95}]->(v2) RETURN e MATCH ()-[e]->() WITH e, properties(e) as props, keys(properties(e)) as kk WHERE [i in kk where props[i] == 90] RETURN e \u7528\u6237\u53ef\u4ee5\u7528 {<prop_name>: <prop_value>} \u8868\u793a\u6a21\u5f0f\u4e2d Edge type \u7684\u5c5e\u6027\uff0c\u4f8b\u5982 [e:follow{likeness:95}] \uff1b\u6216\u8005\u4e0d\u6307\u5b9a Edge type \u76f4\u63a5\u5339\u914d\u8fb9\u7684\u5c5e\u6027\u3002 \u5339\u914d\u591a\u4e2a Edge type MATCH (v:player{name:\"Tim Duncan\"})-[e:follow | :serve]->(v2) RETURN e \u4f7f\u7528 | \u53ef\u4ee5\u5339\u914d\u591a\u4e2a Edge type\uff0c\u4f8b\u5982 [e:follow | :serve] \u3002\u7b2c\u4e00\u4e2a Edge type \u524d\u7684\u82f1\u6587\u5192\u53f7\uff08:\uff09\u4e0d\u53ef\u7701\u7565\uff0c\u540e\u7eed Edge type \u524d\u7684\u82f1\u6587\u5192\u53f7\u53ef\u4ee5\u7701\u7565\uff0c\u4f8b\u5982 [e:follow | serve] \u3002 \u5339\u914d\u591a\u6761\u8fb9 MATCH (v:player{name:\"Tim Duncan\"})-[]->(v2)<-[e:serve]-(v3) RETURN v2, v3 \u7528\u6237\u53ef\u4ee5\u6269\u5c55\u6a21\u5f0f\uff0c\u5339\u914d\u8def\u5f84\u4e2d\u7684\u591a\u6761\u8fb9\u3002 \u5339\u914d\u5b9a\u957f\u8def\u5f84 MATCH p=(v:player{name:\"Tim Duncan\"})-[e:follow*2]->(v2) RETURN DISTINCT v2 AS Friends \u7528\u6237\u53ef\u4ee5\u5728\u6a21\u5f0f\u4e2d\u4f7f\u7528 :<edge_type>*<hop> \u5339\u914d\u5b9a\u957f\u8def\u5f84\u3002 hop \u5fc5\u987b\u662f\u4e00\u4e2a\u975e\u8d1f\u6574\u6570\u3002 e \u7684\u6570\u636e\u7c7b\u578b\u662f\u5217\u8868\u3002 \u5339\u914d\u53d8\u957f\u8def\u5f84 MATCH p=(v:player{name:\"Tim Duncan\"})-[e:follow*1..3]->(v2) RETURN v2 AS Friends minHop \uff1a\u53ef\u9009\u9879\u3002\u8868\u793a\u8def\u5f84\u7684\u6700\u5c0f\u957f\u5ea6\u3002 minHop \u5fc5\u987b\u662f\u4e00\u4e2a\u975e\u8d1f\u6574\u6570\uff0c\u9ed8\u8ba4\u503c\u4e3a 1\u3002 maxHop \uff1a\u53ef\u9009\u9879\u3002\u8868\u793a\u8def\u5f84\u7684\u6700\u5927\u957f\u5ea6\u3002 maxHop \u5fc5\u987b\u662f\u4e00\u4e2a\u975e\u8d1f\u6574\u6570\uff0c\u9ed8\u8ba4\u4e3a\u65e0\u7a77\u5927\u3002 e \u7684\u6570\u636e\u7c7b\u578b\u662f\u5217\u8868\u3002 \u5339\u914d\u591a\u4e2a Edge type \u7684\u53d8\u957f\u8def\u5f84 MATCH p=(v:player{name:\"Tim Duncan\"})-[e:follow | serve*2]->(v2) RETURN DISTINCT v2 \u7528\u6237\u53ef\u4ee5\u5728\u53d8\u957f\u6216\u5b9a\u957f\u6a21\u5f0f\u4e2d\u6307\u5b9a\u591a\u4e2a Edge type\u3002 hop \u3001 minHop \u548c maxHop \u5bf9\u6240\u6709 Edge type \u90fd\u751f\u6548\u3002 e \u7684\u6570\u636e\u7c7b\u578b\u662f\u5217\u8868\u3002 \u68c0\u7d22\u70b9\u6216\u8fb9\u7684\u4fe1\u606f MATCH (v:player{name:\"Tim Duncan\"}) RETURN v MATCH (v:player{name:\"Tim Duncan\"})-[e]->(v2) RETURN e \u4f7f\u7528 RETURN {<vertex_name> | <edge_name>} \u68c0\u7d22\u70b9\u6216\u8fb9\u7684\u6240\u6709\u4fe1\u606f\u3002 \u68c0\u7d22\u70b9 ID MATCH (v:player{name:\"Tim Duncan\"}) RETURN id(v) \u4f7f\u7528 id() \u51fd\u6570\u68c0\u7d22\u70b9 ID\u3002 \u68c0\u7d22 Tag MATCH (v:player{name:\"Tim Duncan\"}) RETURN labels(v) \u4f7f\u7528 labels() \u51fd\u6570\u68c0\u7d22\u70b9\u4e0a\u7684 Tag \u5217\u8868\u3002 \u68c0\u7d22\u5217\u8868 labels(v) \u4e2d\u7684\u7b2c N \u4e2a\u5143\u7d20\uff0c\u53ef\u4ee5\u4f7f\u7528 labels(v)[n-1] \u3002 \u68c0\u7d22\u70b9\u6216\u8fb9\u7684\u5355\u4e2a\u5c5e\u6027 MATCH (v:player{name:\"Tim Duncan\"}) RETURN v.player.age \u4f7f\u7528 RETURN {<vertex_name> | <edge_name>}.<property> \u68c0\u7d22\u5355\u4e2a\u5c5e\u6027\u3002 \u4f7f\u7528 AS \u8bbe\u7f6e\u5c5e\u6027\u7684\u522b\u540d\u3002 \u68c0\u7d22\u70b9\u6216\u8fb9\u7684\u6240\u6709\u5c5e\u6027 MATCH p=(v:player{name:\"Tim Duncan\"})-[]->(v2) RETURN properties(v2) \u4f7f\u7528 properties() \u51fd\u6570\u68c0\u7d22\u70b9\u6216\u8fb9\u7684\u6240\u6709\u5c5e\u6027\u3002 \u68c0\u7d22 Edge type MATCH p=(v:player{name:\"Tim Duncan\"})-[e]->() RETURN DISTINCT type(e) \u4f7f\u7528 type() \u51fd\u6570\u68c0\u7d22\u5339\u914d\u7684 Edge type\u3002 \u68c0\u7d22\u8def\u5f84 MATCH p=(v:player{name:\"Tim Duncan\"})-[*3]->() RETURN p \u4f7f\u7528 RETURN <path_name> \u68c0\u7d22\u5339\u914d\u8def\u5f84\u7684\u6240\u6709\u4fe1\u606f\u3002 \u68c0\u7d22\u8def\u5f84\u4e2d\u7684\u70b9 MATCH p=(v:player{name:\"Tim Duncan\"})-[]->(v2) RETURN nodes(p) \u4f7f\u7528 nodes() \u51fd\u6570\u68c0\u7d22\u8def\u5f84\u4e2d\u7684\u6240\u6709\u70b9\u3002 \u68c0\u7d22\u8def\u5f84\u4e2d\u7684\u8fb9 MATCH p=(v:player{name:\"Tim Duncan\"})-[]->(v2) RETURN relationships(p) \u4f7f\u7528 relationships() \u51fd\u6570\u68c0\u7d22\u8def\u5f84\u4e2d\u7684\u6240\u6709\u8fb9\u3002 \u68c0\u7d22\u8def\u5f84\u957f\u5ea6 MATCH p=(v:player{name:\"Tim Duncan\"})-[*..2]->(v2) RETURN p AS Paths, length(p) AS Length \u4f7f\u7528 length() \u51fd\u6570\u68c0\u7d22\u8def\u5f84\u7684\u957f\u5ea6\u3002 OPTIONAL MATCH \u6a21\u5f0f \u793a\u4f8b \u8bf4\u660e \u4f5c\u4e3a MATCH \u8bed\u53e5\u7684\u53ef\u9009\u9879\u53bb\u5339\u914d\u56fe\u6570\u636e\u5e93\u4e2d\u7684\u6a21\u5f0f MATCH (m)-[]->(n) WHERE id(m)==\"player100\" OPTIONAL MATCH (n)-[]->(l) RETURN id(m),id(n),id(l) \u5982\u679c\u56fe\u6570\u636e\u5e93\u4e2d\u6ca1\u6709\u5bf9\u5e94\u7684\u6a21\u5f0f\uff0c\u5bf9\u5e94\u7684\u5217\u8fd4\u56de NULL \u3002 LOOKUP LOOKUP ON {<vertex_tag> | <edge_type>} [WHERE <expression> [AND <expression> ...]] YIELD <return_list> [AS <alias>] \u6a21\u5f0f \u793a\u4f8b \u8bf4\u660e \u68c0\u7d22\u70b9 LOOKUP ON player WHERE player.name == \"Tony Parker\" YIELD player.name AS name, player.age AS age \u8fd4\u56de Tag \u4e3a player \u4e14 name \u4e3a Tony Parker \u7684\u70b9\u3002 \u68c0\u7d22\u8fb9 LOOKUP ON follow WHERE follow.degree == 90 YIELD follow.degree \u8fd4\u56de Edge type \u4e3a follow \u4e14 degree \u4e3a 90 \u7684\u8fb9\u3002 \u901a\u8fc7 Tag \u5217\u51fa\u6240\u6709\u70b9 LOOKUP ON player YIELD properties(vertex),id(vertex) \u67e5\u627e\u6240\u6709 Tag \u4e3a player \u7684\u70b9 VID\u3002 \u901a\u8fc7 Edge type \u5217\u51fa\u8fb9 LOOKUP ON follow YIELD edge AS e \u67e5\u627e Edge type \u4e3a follow \u7684\u6240\u6709\u8fb9\u7684\u4fe1\u606f\u3002 \u7edf\u8ba1\u70b9 LOOKUP ON player YIELD id(vertex)| YIELD COUNT(*) AS Player_Count \u7edf\u8ba1 Tag \u4e3a player \u7684\u70b9\u3002 \u7edf\u8ba1\u8fb9 LOOKUP ON follow YIELD edge as e | YIELD COUNT(*) AS Like_Count \u7edf\u8ba1 Edge type \u4e3a follow \u7684\u8fb9\u3002 GO GO [[<M> TO] <N> {STEP|STEPS} ] FROM <vertex_list> OVER <edge_type_list> [{REVERSELY | BIDIRECT}] [ WHERE <conditions> ] YIELD [DISTINCT] <return_list> [{SAMPLE <sample_list> | LIMIT <limit_list>}] [| GROUP BY {col_name | expr | position} YIELD <col_name>] [| ORDER BY <expression> [{ASC | DESC}]] [| LIMIT [<offset_value>,] <number_rows>] \u793a\u4f8b \u8bf4\u660e GO FROM \"player102\" OVER serve YIELD dst(edge) \u8fd4\u56de player102 \u6240\u5c5e\u961f\u4f0d\u3002 GO 2 STEPS FROM \"player102\" OVER follow YIELD dst(edge) \u8fd4\u56de\u8ddd\u79bb player102 \u4e24\u8df3\u7684\u670b\u53cb\u3002 GO FROM \"player100\", \"player102\" OVER serve WHERE properties(edge).start_year > 1995 YIELD DISTINCT properties($$).name AS team_name, properties(edge).start_year AS start_year, properties($^).name AS player_name \u6dfb\u52a0\u8fc7\u6ee4\u6761\u4ef6\u3002 GO FROM \"player100\" OVER follow, serve YIELD properties(edge).degree, properties(edge).start_year \u904d\u5386\u591a\u4e2a Edge type\u3002\u5c5e\u6027\u6ca1\u6709\u503c\u65f6\uff0c\u4f1a\u663e\u793a NULL \u3002 GO FROM \"player100\" OVER follow REVERSELY YIELD src(edge) AS destination \u8fd4\u56de player100 \u5165\u65b9\u5411\u7684\u90bb\u5c45\u70b9\u3002 GO FROM \"player100\" OVER follow REVERSELY YIELD src(edge) AS id | GO FROM $-.id OVER serve WHERE properties($^).age > 20 YIELD properties($^).name AS FriendOf, properties($$).name AS Team \u67e5\u8be2 player100 \u7684\u670b\u53cb\u548c\u670b\u53cb\u6240\u5c5e\u961f\u4f0d\u3002 GO FROM \"player102\" OVER follow YIELD dst(edge) AS both \u8fd4\u56de player102 \u6240\u6709\u90bb\u5c45\u70b9\u3002 GO 2 STEPS FROM \"player100\" OVER follow YIELD src(edge) AS src, dst(edge) AS dst, properties($$).age AS age | GROUP BY $-.dst YIELD $-.dst AS dst, collect_set($-.src) AS src, collect($-.age) AS age \u6839\u636e\u5e74\u9f84\u5206\u7ec4\u3002 FETCH \u83b7\u53d6\u70b9\u7684\u5c5e\u6027\u503c FETCH PROP ON {<tag_name>[, tag_name ...] | *} <vid> [, vid ...] YIELD <return_list> [AS <alias>] \u793a\u4f8b \u8bf4\u660e FETCH PROP ON player \"player100\" YIELD properties(vertex) \u5728 FETCH \u8bed\u53e5\u4e2d\u6307\u5b9a Tag \u83b7\u53d6\u5bf9\u5e94\u70b9\u7684\u5c5e\u6027\u503c\u3002 FETCH PROP ON player \"player100\" YIELD player.name AS name \u4f7f\u7528 YIELD \u5b50\u53e5\u6307\u5b9a\u8fd4\u56de\u7684\u5c5e\u6027\u3002 FETCH PROP ON player \"player101\", \"player102\", \"player103\" YIELD properties(vertex) \u6307\u5b9a\u591a\u4e2a\u70b9 ID \u83b7\u53d6\u591a\u4e2a\u70b9\u7684\u5c5e\u6027\u503c\uff0c\u70b9\u4e4b\u95f4\u7528\u82f1\u6587\u9017\u53f7\uff08,\uff09\u5206\u9694\u3002 FETCH PROP ON player, t1 \"player100\", \"player103\" YIELD properties(vertex) \u5728 FETCH \u8bed\u53e5\u4e2d\u6307\u5b9a\u591a\u4e2a Tag \u83b7\u53d6\u5c5e\u6027\u503c\u3002Tag \u4e4b\u95f4\u7528\u82f1\u6587\u9017\u53f7\uff08,\uff09\u5206\u9694\u3002 FETCH PROP ON * \"player100\", \"player106\", \"team200\" YIELD properties(vertex) \u5728 FETCH \u8bed\u53e5\u4e2d\u4f7f\u7528 * \u83b7\u53d6\u5f53\u524d\u56fe\u7a7a\u95f4\u6240\u6709\u6807\u7b7e\u91cc\uff0c\u70b9\u7684\u5c5e\u6027\u503c\u3002 \u83b7\u53d6\u8fb9\u7684\u5c5e\u6027\u503c FETCH PROP ON <edge_type> <src_vid> -> <dst_vid>[@<rank>] [, <src_vid> -> <dst_vid> ...] YIELD <output>; \u793a\u4f8b \u8bf4\u660e FETCH PROP ON serve \"player100\" -> \"team204\" YIELD properties(edge) \u83b7\u53d6\u8fde\u63a5 player100 \u548c team204 \u7684\u8fb9 serve \u7684\u6240\u6709\u5c5e\u6027\u503c\u3002 FETCH PROP ON serve \"player100\" -> \"team204\" YIELD serve.start_year \u4f7f\u7528 YIELD \u5b50\u53e5\u6307\u5b9a\u8fd4\u56de\u7684\u5c5e\u6027\u3002 FETCH PROP ON serve \"player100\" -> \"team204\", \"player133\" -> \"team202\" YIELD properties(edge) \u6307\u5b9a\u591a\u4e2a\u8fb9\u6a21\u5f0f ( <src_vid> -> <dst_vid>[@<rank>] ) \u83b7\u53d6\u591a\u4e2a\u8fb9\u7684\u5c5e\u6027\u503c\u3002\u6a21\u5f0f\u4e4b\u95f4\u7528\u82f1\u6587\u9017\u53f7\uff08,\uff09\u5206\u9694\u3002 FETCH PROP ON serve \"player100\" -> \"team204\"@1 YIELD properties(edge) \u8981\u83b7\u53d6 rank \u4e0d\u4e3a 0 \u7684\u8fb9\uff0c\u8bf7\u5728 FETCH \u8bed\u53e5\u4e2d\u8bbe\u7f6e rank\u3002 GO FROM \"player101\" OVER follow YIELD follow._src AS s, follow._dst AS d | FETCH PROP ON follow $-.s -> $-.d YIELD follow.degree \u8fd4\u56de\u4ece\u70b9 player101 \u5f00\u59cb\u7684 follow \u8fb9\u7684 degree \u503c\u3002 $var = GO FROM \"player101\" OVER follow YIELD follow._src AS s, follow._dst AS d; FETCH PROP ON follow $var.s -> $var.d YIELD follow.degree \u81ea\u5b9a\u4e49\u53d8\u91cf\u6784\u5efa\u67e5\u8be2\u3002 SHOW \u8bed\u53e5 \u8bed\u6cd5 \u793a\u4f8b \u8bf4\u660e SHOW CHARSET SHOW CHARSET SHOW CHARSET \u663e\u793a\u5f53\u524d\u7684\u5b57\u7b26\u96c6\u3002 SHOW COLLATION SHOW COLLATION SHOW COLLATION \u663e\u793a\u5f53\u524d\u7684\u6392\u5e8f\u89c4\u5219\u3002 SHOW CREATE SPACE SHOW CREATE SPACE <space_name> SHOW CREATE SPACE basketballplayer \u663e\u793a\u6307\u5b9a\u56fe\u7a7a\u95f4\u7684\u521b\u5efa\u8bed\u53e5\u3002 SHOW CREATE TAG/EDGE SHOW CREATE {TAG <tag_name> | EDGE <edge_name>} SHOW CREATE TAG player \u663e\u793a\u6307\u5b9a Tag/Edge type \u7684\u57fa\u672c\u4fe1\u606f\u3002 SHOW HOSTS SHOW HOSTS [GRAPH | STORAGE | META] SHOW HOSTS SHOW HOSTS GRAPH \u663e\u793a Graph\u3001Storage\u3001Meta \u670d\u52a1\u4e3b\u673a\u4fe1\u606f\u3001\u7248\u672c\u4fe1\u606f\u3002 SHOW INDEX STATUS SHOW {TAG | EDGE} INDEX STATUS SHOW TAG INDEX STATUS \u91cd\u5efa\u539f\u751f\u7d22\u5f15\u7684\u4f5c\u4e1a\u72b6\u6001\uff0c\u4ee5\u4fbf\u786e\u5b9a\u91cd\u5efa\u7d22\u5f15\u662f\u5426\u6210\u529f\u3002 SHOW INDEXES SHOW {TAG | EDGE} INDEXES SHOW TAG INDEXES \u5217\u51fa\u5f53\u524d\u56fe\u7a7a\u95f4\u5185\u7684\u6240\u6709 Tag \u548c Edge type\uff08\u5305\u62ec\u5c5e\u6027\uff09\u7684\u7d22\u5f15\u3002 SHOW PARTS SHOW PARTS [<part_id>] SHOW PARTS \u663e\u793a\u56fe\u7a7a\u95f4\u4e2d\u6307\u5b9a\u5206\u7247\u6216\u6240\u6709\u5206\u7247\u7684\u4fe1\u606f\u3002 SHOW ROLES SHOW ROLES IN <space_name> SHOW ROLES in basketballplayer \u663e\u793a\u5206\u914d\u7ed9\u7528\u6237\u7684\u89d2\u8272\u4fe1\u606f\u3002 SHOW SNAPSHOTS SHOW SNAPSHOTS SHOW SNAPSHOTS \u663e\u793a\u6240\u6709\u5feb\u7167\u4fe1\u606f\u3002 SHOW SPACES SHOW SPACES SHOW SPACES \u663e\u793a\u73b0\u5b58\u7684\u56fe\u7a7a\u95f4\u3002 SHOW STATS SHOW STATS SHOW STATS \u663e\u793a\u6700\u8fd1 STATS \u4f5c\u4e1a\u6536\u96c6\u7684\u56fe\u7a7a\u95f4\u7edf\u8ba1\u4fe1\u606f\u3002 SHOW TAGS/EDGES SHOW TAGS | EDGES SHOW TAGS \u3001 SHOW EDGES \u663e\u793a\u5f53\u524d\u56fe\u7a7a\u95f4\u5185\u7684\u6240\u6709 Tag/Edge type\u3002 SHOW USERS SHOW USERS SHOW USERS \u663e\u793a\u7528\u6237\u4fe1\u606f\u3002 SHOW SESSIONS SHOW SESSIONS SHOW SESSIONS \u663e\u793a\u6240\u6709\u4f1a\u8bdd\u4fe1\u606f\u3002 SHOW SESSIONS SHOW SESSION <Session_Id> SHOW SESSION 1623304491050858 \u6307\u5b9a\u4f1a\u8bdd ID \u8fdb\u884c\u67e5\u770b\u3002 SHOW QUERIES SHOW [ALL] QUERIES SHOW QUERIES \u67e5\u770b\u5f53\u524d Session \u4e2d\u6b63\u5728\u6267\u884c\u7684\u67e5\u8be2\u8bf7\u6c42\u4fe1\u606f\u3002 SHOW META LEADER SHOW META LEADER SHOW META LEADER \u663e\u793a\u5f53\u524d Meta \u96c6\u7fa4\u7684 leader \u4fe1\u606f\u3002","title":"\u901a\u7528\u67e5\u8be2\u8bed\u53e5"},{"location":"2.quick-start/6.cheatsheet-for-ngql-command/#_3","text":"\u5b50\u53e5 \u8bed\u6cd5 \u793a\u4f8b \u8bf4\u660e GROUP BY GROUP BY <var> YIELD <var>, <aggregation_function(var)> GO FROM \"player100\" OVER follow BIDIRECT YIELD $$.player.name as Name | GROUP BY $-.Name YIELD $-.Name as Player, count(*) AS Name_Count \u67e5\u627e\u6240\u6709\u8fde\u63a5\u5230 player100 \u7684\u70b9\uff0c\u5e76\u6839\u636e\u4ed6\u4eec\u7684\u59d3\u540d\u8fdb\u884c\u5206\u7ec4\uff0c\u8fd4\u56de\u59d3\u540d\u7684\u51fa\u73b0\u6b21\u6570\u3002 LIMIT YIELD <var> [| LIMIT [<offset_value>,] <number_rows>] GO FROM \"player100\" OVER follow REVERSELY YIELD $$.player.name AS Friend, $$.player.age AS Age | ORDER BY $-.Age, $-.Friend | LIMIT 1, 3 \u4ece\u6392\u5e8f\u7ed3\u679c\u4e2d\u8fd4\u56de\u7b2c 2 \u884c\u5f00\u59cb\u7684 3 \u884c\u6570\u636e\u3002 SKIP RETURN <var> [SKIP <offset>] [LIMIT <number_rows>] MATCH (v:player{name:\"Tim Duncan\"}) --> (v2) RETURN v2.player.name AS Name, v2.player.age AS Age ORDER BY Age DESC SKIP 1 \u7528\u6237\u53ef\u4ee5\u5355\u72ec\u4f7f\u7528 SKIP <offset> \u8bbe\u7f6e\u504f\u79fb\u91cf\uff0c\u540e\u9762\u4e0d\u9700\u8981\u6dfb\u52a0 LIMIT <number_rows> \u3002 SAMPLE <go_statement> SAMPLE <sample_list>; GO 3 STEPS FROM \"player100\" OVER * YIELD properties($$).name AS NAME, properties($$).age AS Age SAMPLE [1,2,3]; \u5728\u7ed3\u679c\u96c6\u4e2d\u5747\u5300\u53d6\u6837\u5e76\u8fd4\u56de\u6307\u5b9a\u6570\u91cf\u7684\u6570\u636e\u3002 ORDER BY <YIELD clause> ORDER BY <expression> [ASC | DESC] [, <expression> [ASC | DESC] ...] FETCH PROP ON player \"player100\", \"player101\", \"player102\", \"player103\" YIELD player.age AS age, player.name AS name | ORDER BY $-.age ASC, $-.name DESC ORDER BY \u5b50\u53e5\u6307\u5b9a\u8f93\u51fa\u7ed3\u679c\u7684\u6392\u5e8f\u89c4\u5219\u3002 RETURN RETURN {<vertex_name>|<edge_name>|<vertex_name>.<property>|<edge_name>.<property>|...} MATCH (v:player) RETURN v.player.name, v.player.age LIMIT 3 \u8fd4\u56de\u70b9\u7684\u5c5e\u6027\u4e3a name \u548c age \u7684\u524d\u4e09\u884c\u503c\u3002 TTL CREATE TAG <tag_name>(<property_name_1> <property_value_1>, <property_name_2> <property_value_2>, ...) ttl_duration= <value_int>, ttl_col = <property_name> CREATE TAG t2(a int, b int, c string) ttl_duration= 100, ttl_col = \"a\" \u521b\u5efa Tag \u5e76\u8bbe\u7f6e TTL \u9009\u9879\u3002 WHERE WHERE {<vertex|edge_alias>.<property_name> {>|==|<|...} <value>...} MATCH (v:player) WHERE v.player.name == \"Tim Duncan\" XOR (v.player.age < 30 AND v.player.name == \"Yao Ming\") OR NOT (v.player.name == \"Yao Ming\" OR v.player.name == \"Tim Duncan\") RETURN v.player.name, v.player.age WHERE \u5b50\u53e5\u53ef\u4ee5\u6839\u636e\u6761\u4ef6\u8fc7\u6ee4\u8f93\u51fa\u7ed3\u679c\uff0c\u901a\u5e38\u7528\u4e8e GO \u548c LOOKUP \u8bed\u53e5\uff0c MATCH \u548c WITH \u8bed\u53e5\u3002 YIELD YIELD [DISTINCT] <col> [AS <alias>] [, <col> [AS <alias>] ...] [WHERE <conditions>]; GO FROM \"player100\" OVER follow YIELD dst(edge) AS ID | FETCH PROP ON player $-.ID YIELD player.age AS Age | YIELD AVG($-.Age) as Avg_age, count(*)as Num_friends \u67e5\u627e player100 \u5173\u6ce8\u7684 player\uff0c\u5e76\u8ba1\u7b97\u4ed6\u4eec\u7684\u5e73\u5747\u5e74\u9f84\u3002 WITH MATCH $expressions WITH {nodes()|labels()|...} MATCH p=(v:player{name:\"Tim Duncan\"})--() WITH nodes(p) AS n UNWIND n AS n1 RETURN DISTINCT n1 WITH \u5b50\u53e5\u53ef\u4ee5\u83b7\u53d6\u5e76\u5904\u7406\u67e5\u8be2\u524d\u534a\u90e8\u5206\u7684\u7ed3\u679c\uff0c\u5e76\u5c06\u5904\u7406\u7ed3\u679c\u4f5c\u4e3a\u8f93\u5165\u4f20\u9012\u7ed9\u67e5\u8be2\u7684\u540e\u534a\u90e8\u5206\u3002 UNWIND UNWIND <list> AS <alias> <RETURN clause> UNWIND [1,2,3] AS n RETURN n \u62c6\u5206\u5217\u8868\u3002","title":"\u5b50\u53e5\u548c\u9009\u9879"},{"location":"2.quick-start/6.cheatsheet-for-ngql-command/#_4","text":"\u8bed\u53e5 \u8bed\u6cd5 \u793a\u4f8b \u8bf4\u660e CREATE SPACE CREATE SPACE [IF NOT EXISTS] <graph_space_name> ( [partition_num = <partition_number>,] [replica_factor = <replica_number>,] vid_type = {FIXED_STRING(<N>) | INT[64]} ) [COMMENT = '<comment>'] CREATE SPACE my_space_1 (vid_type=FIXED_STRING(30)) \u521b\u5efa\u4e00\u4e2a\u65b0\u7684\u56fe\u7a7a\u95f4\u3002 CREATE SPACE CREATE SPACE <new_graph_space_name> AS <old_graph_space_name> CREATE SPACE my_space_4 as my_space_3 \u514b\u9686\u73b0\u6709\u56fe\u7a7a\u95f4\u7684 Schema\u3002 USE USE <graph_space_name> USE space1 \u6307\u5b9a\u4e00\u4e2a\u56fe\u7a7a\u95f4\uff0c\u6216\u5207\u6362\u5230\u53e6\u4e00\u4e2a\u56fe\u7a7a\u95f4\uff0c\u5c06\u5176\u4f5c\u4e3a\u540e\u7eed\u67e5\u8be2\u7684\u5de5\u4f5c\u7a7a\u95f4\u3002 SHOW SPACES SHOW SPACES SHOW SPACES \u5217\u51faNebulaGraph\u793a\u4f8b\u4e2d\u7684\u6240\u6709\u56fe\u7a7a\u95f4\u3002 DESCRIBE SPACE DESC[RIBE] SPACE <graph_space_name> DESCRIBE SPACE basketballplayer \u663e\u793a\u6307\u5b9a\u56fe\u7a7a\u95f4\u7684\u4fe1\u606f\u3002 CLEAR SPACE CLEAR SPACE [IF EXISTS] <graph_space_name> \u6e05\u7a7a\u56fe\u7a7a\u95f4\u4e2d\u7684\u70b9\u548c\u8fb9\uff0c\u4f46\u4e0d\u4f1a\u5220\u9664\u56fe\u7a7a\u95f4\u672c\u8eab\u4ee5\u53ca\u5176\u4e2d\u7684 Schema \u4fe1\u606f\u3002 DROP SPACE DROP SPACE [IF EXISTS] <graph_space_name> DROP SPACE basketballplayer \u5220\u9664\u6307\u5b9a\u56fe\u7a7a\u95f4\u7684\u6240\u6709\u5185\u5bb9\u3002","title":"\u56fe\u7a7a\u95f4\u8bed\u53e5"},{"location":"2.quick-start/6.cheatsheet-for-ngql-command/#tag","text":"\u8bed\u53e5 \u8bed\u6cd5 \u793a\u4f8b \u8bf4\u660e CREATE TAG CREATE TAG [IF NOT EXISTS] <tag_name> ( <prop_name> <data_type> [NULL | NOT NULL] [DEFAULT <default_value>] [COMMENT '<comment>'] [{, <prop_name> <data_type> [NULL | NOT NULL] [DEFAULT <default_value>] [COMMENT '<comment>']} ...] ) [TTL_DURATION = <ttl_duration>] [TTL_COL = <prop_name>] [COMMENT = '<comment>'] CREATE TAG woman(name string, age int, married bool, salary double, create_time timestamp) TTL_DURATION = 100, TTL_COL = \"create_time\" \u901a\u8fc7\u6307\u5b9a\u540d\u79f0\u521b\u5efa\u4e00\u4e2a Tag\u3002 DROP TAG DROP TAG [IF EXISTS] <tag_name> DROP TAG test; \u5220\u9664\u5f53\u524d\u5de5\u4f5c\u7a7a\u95f4\u5185\u6240\u6709\u70b9\u4e0a\u7684\u6307\u5b9a Tag\u3002 ALTER TAG ALTER TAG <tag_name> <alter_definition> [, alter_definition] ...] [ttl_definition [, ttl_definition] ... ] [COMMENT = '<comment>'] ALTER TAG t1 ADD (p3 int, p4 string) \u4fee\u6539 Tag \u7684\u7ed3\u6784\u3002\u4f8b\u5982\u589e\u5220\u5c5e\u6027\u3001\u4fee\u6539\u6570\u636e\u7c7b\u578b\uff0c\u4e5f\u53ef\u4ee5\u4e3a\u5c5e\u6027\u8bbe\u7f6e\u3001\u4fee\u6539 TTL \uff08Time-To-Live)\u3002 SHOW TAGS SHOW TAGS SHOW TAGS \u663e\u793a\u5f53\u524d\u56fe\u7a7a\u95f4\u5185\u7684\u6240\u6709 Tag \u540d\u79f0\u3002 DESCRIBE TAG DESC[RIBE] TAG <tag_name> DESCRIBE TAG player \u67e5\u770b\u6307\u5b9a Tag \u7684\u8be6\u7ec6\u4fe1\u606f\uff0c\u4f8b\u5982\u5b57\u6bb5\u540d\u79f0\u3001\u6570\u636e\u7c7b\u578b\u7b49\u3002 DELETE TAG DELETE TAG <tag_name_list> FROM <VID> DELETE TAG test1 FROM \"test\" \u5220\u9664\u6307\u5b9a\u70b9\u4e0a\u7684\u6307\u5b9a Tag\u3002","title":"TAG \u8bed\u53e5"},{"location":"2.quick-start/6.cheatsheet-for-ngql-command/#edge_type","text":"\u8bed\u53e5 \u8bed\u6cd5 \u793a\u4f8b \u8bf4\u660e CREATE EDGE CREATE EDGE [IF NOT EXISTS] <edge_type_name> ( <prop_name> <data_type> [NULL | NOT NULL] [DEFAULT <default_value>] [COMMENT '<comment>'] [{, <prop_name> <data_type> [NULL | NOT NULL] [DEFAULT <default_value>] [COMMENT '<comment>']} ...] ) [TTL_DURATION = <ttl_duration>] [TTL_COL = <prop_name>] [COMMENT = '<comment>'] CREATE EDGE e1(p1 string, p2 int, p3 timestamp) TTL_DURATION = 100, TTL_COL = \"p2\" \u6307\u5b9a\u540d\u79f0\u521b\u5efa\u4e00\u4e2a Edge type\u3002 DROP EDGE DROP EDGE [IF EXISTS] <edge_type_name> DROP EDGE e1 \u5220\u9664\u5f53\u524d\u5de5\u4f5c\u7a7a\u95f4\u5185\u7684\u6307\u5b9a Edge type\u3002 ALTER EDGE ALTER EDGE <edge_type_name> <alter_definition> [, alter_definition] ...] [ttl_definition [, ttl_definition] ... ] [COMMENT = '<comment>'] ALTER EDGE e1 ADD (p3 int, p4 string) \u4fee\u6539 Edge type \u7684\u7ed3\u6784\u3002 SHOW EDGES SHOW EDGES SHOW EDGES \u663e\u793a\u5f53\u524d\u56fe\u7a7a\u95f4\u5185\u7684\u6240\u6709 Edge type \u540d\u79f0\u3002 DESCRIBE EDGE DESC[RIBE] EDGE <edge_type_name> DESCRIBE EDGE follow \u67e5\u770b\u6307\u5b9a Edge type \u7684\u8be6\u7ec6\u4fe1\u606f\uff0c\u4f8b\u5982\u5b57\u6bb5\u540d\u79f0\u3001\u6570\u636e\u7c7b\u578b\u7b49\u3002","title":"Edge type \u8bed\u53e5"},{"location":"2.quick-start/6.cheatsheet-for-ngql-command/#_5","text":"\u8bed\u53e5 \u8bed\u6cd5 \u793a\u4f8b \u8bf4\u660e INSERT VERTEX INSERT VERTEX [IF NOT EXISTS] [tag_props, [tag_props] ...] VALUES <vid>: ([prop_value_list]) INSERT VERTEX t2 (name, age) VALUES \"13\":(\"n3\", 12), \"14\":(\"n4\", 8) \u5728NebulaGraph\u5b9e\u4f8b\u7684\u6307\u5b9a\u56fe\u7a7a\u95f4\u4e2d\u63d2\u5165\u4e00\u4e2a\u6216\u591a\u4e2a\u70b9\u3002 DELETE VERTEX DELETE VERTEX <vid> [, <vid> ...] DELETE VERTEX \"team1\" \u5220\u9664\u70b9\uff0c\u4ee5\u53ca\u70b9\u5173\u8054\u7684\u51fa\u8fb9\u548c\u5165\u8fb9\u3002 UPDATE VERTEX UPDATE VERTEX ON <tag_name> <vid> SET <update_prop> [WHEN <condition>] [YIELD <output>] UPDATE VERTEX ON player \"player101\" SET age = age + 2 \u4fee\u6539\u70b9\u4e0a Tag \u7684\u5c5e\u6027\u503c\u3002 UPSERT VERTEX UPSERT VERTEX ON <tag> <vid> SET <update_prop> [WHEN <condition>] [YIELD <output>] UPSERT VERTEX ON player \"player667\" SET age = 31 \u7ed3\u5408 UPDATE \u548c INSERT \uff0c\u5982\u679c\u70b9\u5b58\u5728\uff0c\u4f1a\u4fee\u6539\u70b9\u7684\u5c5e\u6027\u503c\uff1b\u5982\u679c\u70b9\u4e0d\u5b58\u5728\uff0c\u4f1a\u63d2\u5165\u65b0\u7684\u70b9\u3002","title":"\u70b9\u8bed\u53e5"},{"location":"2.quick-start/6.cheatsheet-for-ngql-command/#_6","text":"\u8bed\u53e5 \u8bed\u6cd5 \u793a\u4f8b \u8bf4\u660e INSERT EDGE INSERT EDGE [IF NOT EXISTS] <edge_type> ( <prop_name_list> ) VALUES <src_vid> -> <dst_vid>[@<rank>] : ( <prop_value_list> ) [, <src_vid> -> <dst_vid>[@<rank>] : ( <prop_value_list> ), ...] INSERT EDGE e2 (name, age) VALUES \"11\"->\"13\":(\"n1\", 1) \u5728NebulaGraph\u5b9e\u4f8b\u7684\u6307\u5b9a\u56fe\u7a7a\u95f4\u4e2d\u63d2\u5165\u4e00\u6761\u6216\u591a\u6761\u8fb9\u3002 DELETE EDGE DELETE EDGE <edge_type> <src_vid> -> <dst_vid>[@<rank>] [, <src_vid> -> <dst_vid>[@<rank>] ...] DELETE EDGE serve \"player100\" -> \"team204\"@0 \u5220\u9664\u8fb9\u3002\u4e00\u6b21\u53ef\u4ee5\u5220\u9664\u4e00\u6761\u6216\u591a\u6761\u8fb9\u3002 UPDATE EDGE UPDATE EDGE ON <edge_type> <src_vid> -> <dst_vid> [@<rank>] SET <update_prop> [WHEN <condition>] [YIELD <output>] UPDATE EDGE ON serve \"player100\" -> \"team204\"@0 SET start_year = start_year + 1 \u4fee\u6539\u8fb9\u4e0a Edge type \u7684\u5c5e\u6027\u3002 UPSERT EDGE UPSERT EDGE ON <edge_type> <src_vid> -> <dst_vid> [@rank] SET <update_prop> [WHEN <condition>] [YIELD <properties>] UPSERT EDGE on serve \"player666\" -> \"team200\"@0 SET end_year = 2021 \u7ed3\u5408 UPDATE \u548c INSERT \uff0c\u5982\u679c\u8fb9\u5b58\u5728\uff0c\u4f1a\u66f4\u65b0\u8fb9\u7684\u5c5e\u6027\uff1b\u5982\u679c\u8fb9\u4e0d\u5b58\u5728\uff0c\u4f1a\u63d2\u5165\u65b0\u7684\u8fb9\u3002","title":"\u8fb9\u8bed\u53e5"},{"location":"2.quick-start/6.cheatsheet-for-ngql-command/#_7","text":"\u539f\u751f\u7d22\u5f15 \u7d22\u5f15\u914d\u5408 LOOKUP \u548c MATCH \u8bed\u53e5\u4f7f\u7528\u3002 \u8bed\u53e5 \u8bed\u6cd5 \u793a\u4f8b \u8bf4\u660e CREATE INDEX CREATE {TAG | EDGE} INDEX [IF NOT EXISTS] <index_name> ON {<tag_name> | <edge_name>} ([<prop_name_list>]) [COMMENT = '<comment>'] CREATE TAG INDEX player_index on player() \u5bf9 Tag\u3001EdgeType \u6216\u5176\u5c5e\u6027\u521b\u5efa\u539f\u751f\u7d22\u5f15\u3002 SHOW CREATE INDEX SHOW CREATE {TAG | EDGE} INDEX <index_name> show create tag index index_2 \u521b\u5efa Tag \u6216\u8005 Edge type \u65f6\u4f7f\u7528\u7684 nGQL \u8bed\u53e5\uff0c\u5176\u4e2d\u5305\u542b\u7d22\u5f15\u7684\u8be6\u7ec6\u4fe1\u606f\uff0c\u4f8b\u5982\u5176\u5173\u8054\u7684\u5c5e\u6027\u3002 SHOW INDEXES SHOW {TAG | EDGE} INDEXES SHOW TAG INDEXES \u5217\u51fa\u5f53\u524d\u56fe\u7a7a\u95f4\u5185\u7684\u6240\u6709 Tag \u548c Edge type\uff08\u5305\u62ec\u5c5e\u6027\uff09\u7684\u7d22\u5f15\u3002 DESCRIBE INDEX DESCRIBE {TAG | EDGE} INDEX <index_name> DESCRIBE TAG INDEX player_index_0 \u67e5\u770b\u6307\u5b9a\u7d22\u5f15\u7684\u4fe1\u606f\uff0c\u5305\u62ec\u7d22\u5f15\u7684\u5c5e\u6027\u540d\u79f0\uff08Field\uff09\u548c\u6570\u636e\u7c7b\u578b\uff08Type\uff09\u3002 REBUILD INDEX REBUILD {TAG | EDGE} INDEX [<index_name_list>] REBUILD TAG INDEX single_person_index \u91cd\u5efa\u7d22\u5f15\u3002\u7d22\u5f15\u529f\u80fd\u4e0d\u4f1a\u81ea\u52a8\u5bf9\u5176\u521b\u5efa\u4e4b\u524d\u5df2\u5b58\u5728\u7684\u5b58\u91cf\u6570\u636e\u751f\u6548\u3002 SHOW INDEX STATUS SHOW {TAG | EDGE} INDEX STATUS SHOW TAG INDEX STATUS \u67e5\u770b\u7d22\u5f15\u540d\u79f0\u548c\u5bf9\u5e94\u7684\u72b6\u6001\u3002 DROP INDEX DROP {TAG | EDGE} INDEX [IF EXISTS] <index_name> DROP TAG INDEX player_index_0 \u5220\u9664\u5f53\u524d\u56fe\u7a7a\u95f4\u4e2d\u5df2\u5b58\u5728\u7684\u7d22\u5f15\u3002 \u5168\u6587\u7d22\u5f15 \u8bed\u6cd5 \u793a\u4f8b \u8bf4\u660e SIGN IN TEXT SERVICE [(<elastic_ip:port> [,<username>, <password>]), (<elastic_ip:port>), ...] SIGN IN TEXT SERVICE (127.0.0.1:9200) NebulaGraph\u7684\u5168\u6587\u7d22\u5f15\u662f\u57fa\u4e8e Elasticsearch \u5b9e\u73b0\uff0c\u90e8\u7f72 Elasticsearch \u96c6\u7fa4\u4e4b\u540e\uff0c\u53ef\u4ee5\u4f7f\u7528 SIGN IN \u8bed\u53e5\u767b\u5f55 Elasticsearch \u5ba2\u6237\u7aef\u3002 SHOW TEXT SEARCH CLIENTS SHOW TEXT SEARCH CLIENTS \u5217\u51fa\u6587\u672c\u641c\u7d22\u5ba2\u6237\u7aef\u3002 SIGN OUT TEXT SERVICE SIGN OUT TEXT SERVICE \u9000\u51fa\u6240\u6709\u6587\u672c\u641c\u7d22\u5ba2\u6237\u7aef\u3002 CREATE FULLTEXT {TAG | EDGE} INDEX <index_name> ON {<tag_name> | <edge_name>} ([<prop_name_list>]) CREATE FULLTEXT TAG INDEX nebula_index_1 ON player(name) \u521b\u5efa\u5168\u6587\u7d22\u5f15\u3002 SHOW FULLTEXT INDEXES SHOW FULLTEXT INDEXES \u663e\u793a\u5168\u6587\u7d22\u5f15\u3002 REBUILD FULLTEXT INDEX REBUILD FULLTEXT INDEX \u91cd\u5efa\u5168\u6587\u7d22\u5f15\u3002 DROP FULLTEXT INDEX <index_name> DROP FULLTEXT INDEX nebula_index_1 \u5220\u9664\u5168\u6587\u7d22\u5f15\u3002 LOOKUP ON {<tag> | <edge_type>} WHERE <expression> [YIELD <return_list>] LOOKUP ON player WHERE FUZZY(player.name, \"Tim Dunncan\", AUTO, OR) YIELD player.name \u4f7f\u7528\u67e5\u8be2\u9009\u9879\u3002","title":"\u7d22\u5f15"},{"location":"2.quick-start/6.cheatsheet-for-ngql-command/#_8","text":"\u7c7b\u578b \u8bed\u6cd5 \u793a\u4f8b \u8bf4\u660e \u5b50\u56fe GET SUBGRAPH [WITH PROP] [<step_count> {STEP|STEPS}] FROM {<vid>, <vid>...} [{IN | OUT | BOTH} <edge_type>, <edge_type>...] YIELD [VERTICES AS <vertex_alias>] [,EDGES AS <edge_alias>] GET SUBGRAPH 1 STEPS FROM \"player100\" YIELD VERTICES AS nodes, EDGES AS relationships \u6307\u5b9a Edge type \u7684\u8d77\u59cb\u70b9\u53ef\u4ee5\u5230\u8fbe\u7684\u70b9\u548c\u8fb9\u7684\u4fe1\u606f\uff0c\u8fd4\u56de\u5b50\u56fe\u4fe1\u606f\u3002 \u8def\u5f84 FIND { SHORTEST | ALL | NOLOOP } PATH [WITH PROP] FROM <vertex_id_list> TO <vertex_id_list> OVER <edge_type_list> [REVERSELY | BIDIRECT] [<WHERE clause>] [UPTO <N> {STEP|STEPS}] YIELD path as <alias> [| ORDER BY $-.path] [| LIMIT <M>] FIND SHORTEST PATH FROM \"player102\" TO \"team204\" OVER * YIELD path as p \u67e5\u627e\u6307\u5b9a\u8d77\u59cb\u70b9\u548c\u76ee\u7684\u70b9\u4e4b\u95f4\u7684\u8def\u5f84\u3002\u8fd4\u56de\u7684\u8def\u5f84\u683c\u5f0f\u7c7b\u4f3c\u4e8e (<vertex_id>)-[:<edge_type_name>@<rank>]->(<vertex_id) \u3002","title":"\u5b50\u56fe\u548c\u8def\u5f84"},{"location":"2.quick-start/6.cheatsheet-for-ngql-command/#_9","text":"\u7c7b\u578b \u8bed\u6cd5 \u793a\u4f8b \u8bf4\u660e EXPLAIN EXPLAIN [format=\"row\" | \"dot\"] <your_nGQL_statement> EXPLAIN format=\"row\" SHOW TAGS EXPLAIN format=\"dot\" SHOW TAGS \u8f93\u51fa nGQL \u8bed\u53e5\u7684\u6267\u884c\u8ba1\u5212\uff0c\u4f46\u4e0d\u4f1a\u6267\u884c nGQL \u8bed\u53e5\u3002 PROFILE PROFILE [format=\"row\" | \"dot\"] <your_nGQL_statement> PROFILE format=\"row\" SHOW TAGS EXPLAIN format=\"dot\" SHOW TAGS \u6267\u884c nGQL \u8bed\u53e5\uff0c\u7136\u540e\u8f93\u51fa\u6267\u884c\u8ba1\u5212\u548c\u6267\u884c\u6982\u8981\u3002","title":"\u67e5\u8be2\u8c03\u4f18"},{"location":"2.quick-start/6.cheatsheet-for-ngql-command/#_10","text":"SUBMIT JOB BALANCE \u8bed\u6cd5 \u8bf4\u660e SUBMIT JOB BALANCE LEADER \u542f\u52a8\u4efb\u52a1\u5747\u8861\u5206\u5e03\u6240\u6709\u56fe\u7a7a\u95f4\u4e2d\u7684 leader\u3002\u8be5\u547d\u4ee4\u4f1a\u8fd4\u56de\u4efb\u52a1 ID\u3002 \u4f5c\u4e1a\u7ba1\u7406 \u8bed\u6cd5 \u8bf4\u660e SUBMIT JOB COMPACT \u89e6\u53d1 RocksDB \u7684\u957f\u8017\u65f6 compact \u64cd\u4f5c\u3002 SUBMIT JOB FLUSH \u5c06\u5185\u5b58\u4e2d\u7684 RocksDB memfile \u5199\u5165\u786c\u76d8\u3002 SUBMIT JOB STATS \u542f\u52a8\u4e00\u4e2a\u4f5c\u4e1a\uff0c\u8be5\u4f5c\u4e1a\u5bf9\u5f53\u524d\u56fe\u7a7a\u95f4\u8fdb\u884c\u7edf\u8ba1\u3002\u4f5c\u4e1a\u5b8c\u6210\u540e\uff0c\u7528\u6237\u53ef\u4ee5\u4f7f\u7528 SHOW STATS \u8bed\u53e5\u5217\u51fa\u7edf\u8ba1\u7ed3\u679c\u3002 SHOW JOB <job_id> \u663e\u793a\u5f53\u524d\u56fe\u7a7a\u95f4\u5185\u6307\u5b9a\u4f5c\u4e1a\u548c\u76f8\u5173\u4efb\u52a1\u7684\u4fe1\u606f\u3002Meta \u670d\u52a1\u5c06 SUBMIT JOB \u8bf7\u6c42\u89e3\u6790\u4e3a\u591a\u4e2a\u4efb\u52a1\uff0c\u7136\u540e\u5206\u914d\u7ed9\u8fdb\u7a0b nebula-storaged\u3002 SHOW JOBS \u5217\u51fa\u5f53\u524d\u56fe\u7a7a\u95f4\u5185\u6240\u6709\u672a\u8fc7\u671f\u7684\u4f5c\u4e1a\u3002 STOP JOB \u505c\u6b62\u5f53\u524d\u56fe\u7a7a\u95f4\u5185\u672a\u5b8c\u6210\u7684\u4f5c\u4e1a\u3002 RECOVER JOB \u91cd\u65b0\u6267\u884c\u5f53\u524d\u56fe\u7a7a\u95f4\u5185\u5931\u8d25\u7684\u4f5c\u4e1a\uff0c\u5e76\u8fd4\u56de\u5df2\u6062\u590d\u7684\u4f5c\u4e1a\u6570\u91cf\u3002 \u7ec8\u6b62\u67e5\u8be2 \u8bed\u6cd5 \u793a\u4f8b \u8bf4\u660e KILL QUERY (session=<session_id>, plan=<plan_id>) KILL QUERY(SESSION=1625553545984255,PLAN=163) \u5728\u4e00\u4e2a\u4f1a\u8bdd\u4e2d\u6267\u884c\u547d\u4ee4\u7ec8\u6b62\u53e6\u4e00\u4e2a\u4f1a\u8bdd\u4e2d\u7684\u67e5\u8be2\u3002","title":"\u8fd0\u7ef4"},{"location":"2.quick-start/3.quick-start-on-premise/2.install-nebula-graph/","text":"\u5b89\u88c5NebulaGraph \u00b6 RPM \u548c DEB \u662f Linux \u7cfb\u7edf\u4e0b\u5e38\u89c1\u7684\u4e24\u79cd\u5b89\u88c5\u5305\u683c\u5f0f\uff0c\u672c\u6587\u4ecb\u7ecd\u5982\u4f55\u4f7f\u7528 RPM \u6216 DEB \u6587\u4ef6\u5728\u4e00\u53f0\u673a\u5668\u4e0a\u5feb\u901f\u5b89\u88c5NebulaGraph\u3002 Note \u90e8\u7f72NebulaGraph\u96c6\u7fa4\u7684\u65b9\u5f0f\u53c2\u89c1 \u4f7f\u7528 RPM/DEB \u5305\u90e8\u7f72\u96c6\u7fa4 \u3002 \u524d\u63d0\u6761\u4ef6 \u00b6 \u5b89\u88c5 wget \u5de5\u5177\u3002 \u4e0b\u8f7d\u5b89\u88c5\u5305 \u00b6 Note \u5f53\u524d\u4ec5\u652f\u6301\u5728 Linux \u7cfb\u7edf\u4e0b\u5b89\u88c5NebulaGraph\uff0c\u4e14\u4ec5\u652f\u6301 CentOS 7.x\u3001CentOS 8.x\u3001Ubuntu 16.04\u3001Ubuntu 18.04\u3001Ubuntu 20.04 \u64cd\u4f5c\u7cfb\u7edf\u3002 \u5982\u679c\u7528\u6237\u4f7f\u7528\u7684\u662f\u56fd\u4ea7\u5316\u7684 Linux \u64cd\u4f5c\u7cfb\u7edf\uff0c\u8bf7 \u5b89\u88c5\u4f01\u4e1a\u7248NebulaGraph \u3002 \u963f\u91cc\u4e91 OSS \u4e0b\u8f7d \u00b6 \u4e0b\u8f7d release \u7248\u672c URL \u683c\u5f0f\u5982\u4e0b\uff1a //Centos 7 https://oss-cdn.nebula-graph.com.cn/package/<release_version>/nebula-graph-<release_version>.el7.x86_64.rpm //Centos 8 https://oss-cdn.nebula-graph.com.cn/package/<release_version>/nebula-graph-<release_version>.el8.x86_64.rpm //Ubuntu 1604 https://oss-cdn.nebula-graph.com.cn/package/<release_version>/nebula-graph-<release_version>.ubuntu1604.amd64.deb //Ubuntu 1804 https://oss-cdn.nebula-graph.com.cn/package/<release_version>/nebula-graph-<release_version>.ubuntu1804.amd64.deb //Ubuntu 2004 https://oss-cdn.nebula-graph.com.cn/package/<release_version>/nebula-graph-<release_version>.ubuntu2004.amd64.deb \u4f8b\u5982\u8981\u4e0b\u8f7d\u9002\u7528\u4e8e Centos 7.5 \u7684 3.6.0 \u5b89\u88c5\u5305\uff1a wget https://oss-cdn.nebula-graph.com.cn/package/3.6.0/nebula-graph-3.6.0.el7.x86_64.rpm wget https://oss-cdn.nebula-graph.com.cn/package/3.6.0/nebula-graph-3.6.0.el7.x86_64.rpm.sha256sum.txt \u4e0b\u8f7d\u9002\u7528\u4e8e ubuntu 1804 \u7684 3.6.0 \u5b89\u88c5\u5305\uff1a wget https://oss-cdn.nebula-graph.com.cn/package/3.6.0/nebula-graph-3.6.0.ubuntu1804.amd64.deb wget https://oss-cdn.nebula-graph.com.cn/package/3.6.0/nebula-graph-3.6.0.ubuntu1804.amd64.deb.sha256sum.txt \u4e0b\u8f7d\u65e5\u5e38\u5f00\u53d1\u7248\u672c (nightly) Danger nightly \u7248\u672c\u901a\u5e38\u7528\u4e8e\u6d4b\u8bd5\u65b0\u529f\u80fd\u3001\u65b0\u7279\u6027\uff0c\u8bf7 \u4e0d\u8981 \u5728\u751f\u4ea7\u73af\u5883\u4e2d\u4f7f\u7528 nightly \u7248\u672c\u3002 nightly \u7248\u672c\u4e0d\u4fdd\u8bc1\u6bcf\u65e5\u90fd\u80fd\u5b8c\u6574\u53d1\u5e03\uff0c\u4e5f\u4e0d\u4fdd\u8bc1\u662f\u5426\u4f1a\u66f4\u6539\u6587\u4ef6\u540d\u3002 URL \u683c\u5f0f\u5982\u4e0b\uff1a //Centos 7 https://oss-cdn.nebula-graph.com.cn/package/nightly/<yyyy.mm.dd>/nebula-graph-<yyyy.mm.dd>-nightly.el7.x86_64.rpm //Centos 8 https://oss-cdn.nebula-graph.com.cn/package/nightly/<yyyy.mm.dd>/nebula-graph-<yyyy.mm.dd>-nightly.el8.x86_64.rpm //Ubuntu 1604 https://oss-cdn.nebula-graph.com.cn/package/nightly/<yyyy.mm.dd>/nebula-graph-<yyyy.mm.dd>-nightly.ubuntu1604.amd64.deb //Ubuntu 1804 https://oss-cdn.nebula-graph.com.cn/package/nightly/<yyyy.mm.dd>/nebula-graph-<yyyy.mm.dd>-nightly.ubuntu1804.amd64.deb //Ubuntu 2004 https://oss-cdn.nebula-graph.com.cn/package/nightly/<yyyy.mm.dd>/nebula-graph-<yyyy.mm.dd>-nightly.ubuntu2004.amd64.deb \u4f8b\u5982\u8981\u4e0b\u8f7d 2021.11.24 \u9002\u7528\u4e8e Centos 7.5 \u7684 2.x \u5b89\u88c5\u5305\uff1a wget https://oss-cdn.nebula-graph.com.cn/package/nightly/2021.11.24/nebula-graph-2021.11.24-nightly.el7.x86_64.rpm wget https://oss-cdn.nebula-graph.com.cn/package/nightly/2021.11.24/nebula-graph-2021.11.24-nightly.el7.x86_64.rpm.sha256sum.txt \u8981\u4e0b\u8f7d 2021.11.24 \u9002\u7528\u4e8e Ubuntu 1804 \u7684 2.x \u5b89\u88c5\u5305\uff1a wget https://oss-cdn.nebula-graph.com.cn/package/nightly/2021.11.24/nebula-graph-2021.11.24-nightly.ubuntu1804.amd64.deb wget https://oss-cdn.nebula-graph.com.cn/package/nightly/2021.11.24/nebula-graph-2021.11.24-nightly.ubuntu1804.amd64.deb.sha256sum.txt \u5b89\u88c5NebulaGraph \u00b6 \u5b89\u88c5 RPM \u5305 $ sudo rpm -ivh --prefix = <installation_path> <package_name> --prefix \u4e3a\u53ef\u9009\u9879\uff0c\u7528\u4e8e\u6307\u5b9a\u5b89\u88c5\u8def\u5f84\u3002\u5982\u4e0d\u8bbe\u7f6e\uff0c\u7cfb\u7edf\u4f1a\u5c06NebulaGraph\u5b89\u88c5\u5230\u9ed8\u8ba4\u8def\u5f84 /usr/local/nebula/ \u3002 \u4f8b\u5982\uff0c\u8981\u5728\u9ed8\u8ba4\u8def\u5f84\u4e0b\u5b89\u88c53.6.0\u7248\u672c\u7684 RPM \u5305\uff0c\u8fd0\u884c\u5982\u4e0b\u547d\u4ee4\uff1a sudo rpm -ivh nebula-graph-3.6.0.el7.x86_64.rpm \u5b89\u88c5 DEB \u5305 $ sudo dpkg -i <package_name> Note \u4f7f\u7528 DEB \u5305\u5b89\u88c5NebulaGraph\u65f6\u4e0d\u652f\u6301\u81ea\u5b9a\u4e49\u5b89\u88c5\u8def\u5f84\u3002\u9ed8\u8ba4\u5b89\u88c5\u8def\u5f84\u4e3a /usr/local/nebula/ \u3002 \u4f8b\u5982\u5b89\u88c53.6.0\u7248\u672c\u7684 DEB \u5305\uff1a sudo dpkg -i nebula-graph-3.6.0.ubuntu1804.amd64.deb \u540e\u7eed\u64cd\u4f5c \u00b6 \u542f\u52a8NebulaGraph \u8fde\u63a5NebulaGraph","title":"\u6b65\u9aa4 1\uff1a\u5b89\u88c5 NebulaGraph"},{"location":"2.quick-start/3.quick-start-on-premise/2.install-nebula-graph/#nebulagraph","text":"RPM \u548c DEB \u662f Linux \u7cfb\u7edf\u4e0b\u5e38\u89c1\u7684\u4e24\u79cd\u5b89\u88c5\u5305\u683c\u5f0f\uff0c\u672c\u6587\u4ecb\u7ecd\u5982\u4f55\u4f7f\u7528 RPM \u6216 DEB \u6587\u4ef6\u5728\u4e00\u53f0\u673a\u5668\u4e0a\u5feb\u901f\u5b89\u88c5NebulaGraph\u3002 Note \u90e8\u7f72NebulaGraph\u96c6\u7fa4\u7684\u65b9\u5f0f\u53c2\u89c1 \u4f7f\u7528 RPM/DEB \u5305\u90e8\u7f72\u96c6\u7fa4 \u3002","title":"\u5b89\u88c5NebulaGraph"},{"location":"2.quick-start/3.quick-start-on-premise/2.install-nebula-graph/#_1","text":"\u5b89\u88c5 wget \u5de5\u5177\u3002","title":"\u524d\u63d0\u6761\u4ef6"},{"location":"2.quick-start/3.quick-start-on-premise/2.install-nebula-graph/#_2","text":"Note \u5f53\u524d\u4ec5\u652f\u6301\u5728 Linux \u7cfb\u7edf\u4e0b\u5b89\u88c5NebulaGraph\uff0c\u4e14\u4ec5\u652f\u6301 CentOS 7.x\u3001CentOS 8.x\u3001Ubuntu 16.04\u3001Ubuntu 18.04\u3001Ubuntu 20.04 \u64cd\u4f5c\u7cfb\u7edf\u3002 \u5982\u679c\u7528\u6237\u4f7f\u7528\u7684\u662f\u56fd\u4ea7\u5316\u7684 Linux \u64cd\u4f5c\u7cfb\u7edf\uff0c\u8bf7 \u5b89\u88c5\u4f01\u4e1a\u7248NebulaGraph \u3002","title":"\u4e0b\u8f7d\u5b89\u88c5\u5305"},{"location":"2.quick-start/3.quick-start-on-premise/2.install-nebula-graph/#oss","text":"\u4e0b\u8f7d release \u7248\u672c URL \u683c\u5f0f\u5982\u4e0b\uff1a //Centos 7 https://oss-cdn.nebula-graph.com.cn/package/<release_version>/nebula-graph-<release_version>.el7.x86_64.rpm //Centos 8 https://oss-cdn.nebula-graph.com.cn/package/<release_version>/nebula-graph-<release_version>.el8.x86_64.rpm //Ubuntu 1604 https://oss-cdn.nebula-graph.com.cn/package/<release_version>/nebula-graph-<release_version>.ubuntu1604.amd64.deb //Ubuntu 1804 https://oss-cdn.nebula-graph.com.cn/package/<release_version>/nebula-graph-<release_version>.ubuntu1804.amd64.deb //Ubuntu 2004 https://oss-cdn.nebula-graph.com.cn/package/<release_version>/nebula-graph-<release_version>.ubuntu2004.amd64.deb \u4f8b\u5982\u8981\u4e0b\u8f7d\u9002\u7528\u4e8e Centos 7.5 \u7684 3.6.0 \u5b89\u88c5\u5305\uff1a wget https://oss-cdn.nebula-graph.com.cn/package/3.6.0/nebula-graph-3.6.0.el7.x86_64.rpm wget https://oss-cdn.nebula-graph.com.cn/package/3.6.0/nebula-graph-3.6.0.el7.x86_64.rpm.sha256sum.txt \u4e0b\u8f7d\u9002\u7528\u4e8e ubuntu 1804 \u7684 3.6.0 \u5b89\u88c5\u5305\uff1a wget https://oss-cdn.nebula-graph.com.cn/package/3.6.0/nebula-graph-3.6.0.ubuntu1804.amd64.deb wget https://oss-cdn.nebula-graph.com.cn/package/3.6.0/nebula-graph-3.6.0.ubuntu1804.amd64.deb.sha256sum.txt \u4e0b\u8f7d\u65e5\u5e38\u5f00\u53d1\u7248\u672c (nightly) Danger nightly \u7248\u672c\u901a\u5e38\u7528\u4e8e\u6d4b\u8bd5\u65b0\u529f\u80fd\u3001\u65b0\u7279\u6027\uff0c\u8bf7 \u4e0d\u8981 \u5728\u751f\u4ea7\u73af\u5883\u4e2d\u4f7f\u7528 nightly \u7248\u672c\u3002 nightly \u7248\u672c\u4e0d\u4fdd\u8bc1\u6bcf\u65e5\u90fd\u80fd\u5b8c\u6574\u53d1\u5e03\uff0c\u4e5f\u4e0d\u4fdd\u8bc1\u662f\u5426\u4f1a\u66f4\u6539\u6587\u4ef6\u540d\u3002 URL \u683c\u5f0f\u5982\u4e0b\uff1a //Centos 7 https://oss-cdn.nebula-graph.com.cn/package/nightly/<yyyy.mm.dd>/nebula-graph-<yyyy.mm.dd>-nightly.el7.x86_64.rpm //Centos 8 https://oss-cdn.nebula-graph.com.cn/package/nightly/<yyyy.mm.dd>/nebula-graph-<yyyy.mm.dd>-nightly.el8.x86_64.rpm //Ubuntu 1604 https://oss-cdn.nebula-graph.com.cn/package/nightly/<yyyy.mm.dd>/nebula-graph-<yyyy.mm.dd>-nightly.ubuntu1604.amd64.deb //Ubuntu 1804 https://oss-cdn.nebula-graph.com.cn/package/nightly/<yyyy.mm.dd>/nebula-graph-<yyyy.mm.dd>-nightly.ubuntu1804.amd64.deb //Ubuntu 2004 https://oss-cdn.nebula-graph.com.cn/package/nightly/<yyyy.mm.dd>/nebula-graph-<yyyy.mm.dd>-nightly.ubuntu2004.amd64.deb \u4f8b\u5982\u8981\u4e0b\u8f7d 2021.11.24 \u9002\u7528\u4e8e Centos 7.5 \u7684 2.x \u5b89\u88c5\u5305\uff1a wget https://oss-cdn.nebula-graph.com.cn/package/nightly/2021.11.24/nebula-graph-2021.11.24-nightly.el7.x86_64.rpm wget https://oss-cdn.nebula-graph.com.cn/package/nightly/2021.11.24/nebula-graph-2021.11.24-nightly.el7.x86_64.rpm.sha256sum.txt \u8981\u4e0b\u8f7d 2021.11.24 \u9002\u7528\u4e8e Ubuntu 1804 \u7684 2.x \u5b89\u88c5\u5305\uff1a wget https://oss-cdn.nebula-graph.com.cn/package/nightly/2021.11.24/nebula-graph-2021.11.24-nightly.ubuntu1804.amd64.deb wget https://oss-cdn.nebula-graph.com.cn/package/nightly/2021.11.24/nebula-graph-2021.11.24-nightly.ubuntu1804.amd64.deb.sha256sum.txt","title":"\u963f\u91cc\u4e91 OSS \u4e0b\u8f7d"},{"location":"2.quick-start/3.quick-start-on-premise/2.install-nebula-graph/#nebulagraph_1","text":"\u5b89\u88c5 RPM \u5305 $ sudo rpm -ivh --prefix = <installation_path> <package_name> --prefix \u4e3a\u53ef\u9009\u9879\uff0c\u7528\u4e8e\u6307\u5b9a\u5b89\u88c5\u8def\u5f84\u3002\u5982\u4e0d\u8bbe\u7f6e\uff0c\u7cfb\u7edf\u4f1a\u5c06NebulaGraph\u5b89\u88c5\u5230\u9ed8\u8ba4\u8def\u5f84 /usr/local/nebula/ \u3002 \u4f8b\u5982\uff0c\u8981\u5728\u9ed8\u8ba4\u8def\u5f84\u4e0b\u5b89\u88c53.6.0\u7248\u672c\u7684 RPM \u5305\uff0c\u8fd0\u884c\u5982\u4e0b\u547d\u4ee4\uff1a sudo rpm -ivh nebula-graph-3.6.0.el7.x86_64.rpm \u5b89\u88c5 DEB \u5305 $ sudo dpkg -i <package_name> Note \u4f7f\u7528 DEB \u5305\u5b89\u88c5NebulaGraph\u65f6\u4e0d\u652f\u6301\u81ea\u5b9a\u4e49\u5b89\u88c5\u8def\u5f84\u3002\u9ed8\u8ba4\u5b89\u88c5\u8def\u5f84\u4e3a /usr/local/nebula/ \u3002 \u4f8b\u5982\u5b89\u88c53.6.0\u7248\u672c\u7684 DEB \u5305\uff1a sudo dpkg -i nebula-graph-3.6.0.ubuntu1804.amd64.deb","title":"\u5b89\u88c5NebulaGraph"},{"location":"2.quick-start/3.quick-start-on-premise/2.install-nebula-graph/#_3","text":"\u542f\u52a8NebulaGraph \u8fde\u63a5NebulaGraph","title":"\u540e\u7eed\u64cd\u4f5c"},{"location":"2.quick-start/3.quick-start-on-premise/3.1add-storage-hosts/","text":"\u6ce8\u518c Storage \u670d\u52a1 \u00b6 \u9996\u6b21\u8fde\u63a5\u5230NebulaGraph\u540e\uff0c\u9700\u8981\u5148\u6dfb\u52a0 Storage \u4e3b\u673a\uff0c\u5e76\u786e\u8ba4\u4e3b\u673a\u90fd\u5904\u4e8e\u5728\u7ebf\u72b6\u6001\u3002 \u5386\u53f2\u7248\u672c\u517c\u5bb9\u6027 \u4eceNebulaGraph 3.0.0 \u7248\u672c\u5f00\u59cb\uff0c\u5fc5\u987b\u5148\u4f7f\u7528 ADD HOSTS \u6dfb\u52a0\u4e3b\u673a\uff0c\u624d\u80fd\u6b63\u5e38\u901a\u8fc7 Storage \u670d\u52a1\u8bfb\u5199\u6570\u636e\u3002 \u524d\u63d0\u6761\u4ef6 \u00b6 \u5df2 \u8fde\u63a5NebulaGraph\u670d\u52a1 \u3002 \u64cd\u4f5c\u6b65\u9aa4 \u00b6 \u6dfb\u52a0 Storage \u4e3b\u673a\u3002 \u6267\u884c\u5982\u4e0b\u547d\u4ee4\u6dfb\u52a0\u4e3b\u673a\uff1a ADD HOSTS <ip>:<port> [,<ip>:<port> ...]; \u793a\u4f8b\uff1a nebula> ADD HOSTS 192.168.10.100:9779, 192.168.10.101:9779, 192.168.10.102:9779; Caution \u8bf7\u786e\u4fdd\u6dfb\u52a0\u7684\u4e3b\u673a IP \u548c\u914d\u7f6e\u6587\u4ef6 nebula-storaged.conf \u4e2d local_ip \u914d\u7f6e\u7684 IP \u4e00\u81f4\uff0c\u5426\u5219\u4f1a\u5bfc\u81f4\u6dfb\u52a0 Storage \u4e3b\u673a\u5931\u8d25\u3002\u5173\u4e8e\u914d\u7f6e\u6587\u4ef6\u7684\u8be6\u60c5\uff0c\u53c2\u89c1 \u914d\u7f6e\u7ba1\u7406 \u3002 \u68c0\u67e5\u4e3b\u673a\u72b6\u6001\uff0c\u786e\u8ba4\u5168\u90e8\u5728\u7ebf\u3002 nebula> SHOW HOSTS; +------------------+------+----------+--------------+---------------------- +------------------------+---------+ | Host | Port | Status | Leader count | Leader distribution | Partition distribution | Version | +------------------+------+----------+--------------+---------------------- +------------------------+---------+ | \"192.168.10.100\" | 9779 | \"ONLINE\" | 0 | \"No valid partition\" | \"No valid partition\" | \"3.6.0\" | | \"192.168.10.101\" | 9779 | \"ONLINE\" | 0 | \"No valid partition\" | \"No valid partition\" | \"3.6.0\" | | \"192.168.10.102\" | 9779 | \"ONLINE\" | 0 | \"No valid partition\" | \"No valid partition\" | \"3.6.0\" | +------------------+------+----------+--------------+---------------------- +------------------------+---------+ \u5728\u8fd4\u56de\u7ed3\u679c\u7684 Status \u5217\uff0c\u53ef\u4ee5\u770b\u5230\u6240\u6709 Storage \u4e3b\u673a\u90fd\u5728\u7ebf\u3002","title":"\u6b65\u9aa4 4\uff1a\u6ce8\u518c Storage \u670d\u52a1"},{"location":"2.quick-start/3.quick-start-on-premise/3.1add-storage-hosts/#storage","text":"\u9996\u6b21\u8fde\u63a5\u5230NebulaGraph\u540e\uff0c\u9700\u8981\u5148\u6dfb\u52a0 Storage \u4e3b\u673a\uff0c\u5e76\u786e\u8ba4\u4e3b\u673a\u90fd\u5904\u4e8e\u5728\u7ebf\u72b6\u6001\u3002 \u5386\u53f2\u7248\u672c\u517c\u5bb9\u6027 \u4eceNebulaGraph 3.0.0 \u7248\u672c\u5f00\u59cb\uff0c\u5fc5\u987b\u5148\u4f7f\u7528 ADD HOSTS \u6dfb\u52a0\u4e3b\u673a\uff0c\u624d\u80fd\u6b63\u5e38\u901a\u8fc7 Storage \u670d\u52a1\u8bfb\u5199\u6570\u636e\u3002","title":"\u6ce8\u518c Storage \u670d\u52a1"},{"location":"2.quick-start/3.quick-start-on-premise/3.1add-storage-hosts/#_1","text":"\u5df2 \u8fde\u63a5NebulaGraph\u670d\u52a1 \u3002","title":"\u524d\u63d0\u6761\u4ef6"},{"location":"2.quick-start/3.quick-start-on-premise/3.1add-storage-hosts/#_2","text":"\u6dfb\u52a0 Storage \u4e3b\u673a\u3002 \u6267\u884c\u5982\u4e0b\u547d\u4ee4\u6dfb\u52a0\u4e3b\u673a\uff1a ADD HOSTS <ip>:<port> [,<ip>:<port> ...]; \u793a\u4f8b\uff1a nebula> ADD HOSTS 192.168.10.100:9779, 192.168.10.101:9779, 192.168.10.102:9779; Caution \u8bf7\u786e\u4fdd\u6dfb\u52a0\u7684\u4e3b\u673a IP \u548c\u914d\u7f6e\u6587\u4ef6 nebula-storaged.conf \u4e2d local_ip \u914d\u7f6e\u7684 IP \u4e00\u81f4\uff0c\u5426\u5219\u4f1a\u5bfc\u81f4\u6dfb\u52a0 Storage \u4e3b\u673a\u5931\u8d25\u3002\u5173\u4e8e\u914d\u7f6e\u6587\u4ef6\u7684\u8be6\u60c5\uff0c\u53c2\u89c1 \u914d\u7f6e\u7ba1\u7406 \u3002 \u68c0\u67e5\u4e3b\u673a\u72b6\u6001\uff0c\u786e\u8ba4\u5168\u90e8\u5728\u7ebf\u3002 nebula> SHOW HOSTS; +------------------+------+----------+--------------+---------------------- +------------------------+---------+ | Host | Port | Status | Leader count | Leader distribution | Partition distribution | Version | +------------------+------+----------+--------------+---------------------- +------------------------+---------+ | \"192.168.10.100\" | 9779 | \"ONLINE\" | 0 | \"No valid partition\" | \"No valid partition\" | \"3.6.0\" | | \"192.168.10.101\" | 9779 | \"ONLINE\" | 0 | \"No valid partition\" | \"No valid partition\" | \"3.6.0\" | | \"192.168.10.102\" | 9779 | \"ONLINE\" | 0 | \"No valid partition\" | \"No valid partition\" | \"3.6.0\" | +------------------+------+----------+--------------+---------------------- +------------------------+---------+ \u5728\u8fd4\u56de\u7ed3\u679c\u7684 Status \u5217\uff0c\u53ef\u4ee5\u770b\u5230\u6240\u6709 Storage \u4e3b\u673a\u90fd\u5728\u7ebf\u3002","title":"\u64cd\u4f5c\u6b65\u9aa4"},{"location":"2.quick-start/3.quick-start-on-premise/3.connect-to-nebula-graph/","text":"\u8fde\u63a5NebulaGraph \u00b6 \u672c\u6587\u4ecb\u7ecd\u5982\u4f55\u4f7f\u7528\u539f\u751f\u547d\u4ee4\u884c\u5ba2\u6237\u7aef NebulaGraph Console \u8fde\u63a5NebulaGraph\u3002 Caution \u9996\u6b21\u8fde\u63a5\u5230NebulaGraph\u540e\uff0c\u5fc5\u987b\u5148 \u6ce8\u518c Storage \u670d\u52a1 \uff0c\u624d\u80fd\u6b63\u5e38\u67e5\u8be2\u6570\u636e\u3002 NebulaGraph\u652f\u6301\u591a\u79cd\u7c7b\u578b\u7684\u5ba2\u6237\u7aef\uff0c\u5305\u62ec\u547d\u4ee4\u884c\u5ba2\u6237\u7aef\u3001\u53ef\u89c6\u5316\u754c\u9762\u5ba2\u6237\u7aef\u548c\u6d41\u884c\u7f16\u7a0b\u8bed\u8a00\u5ba2\u6237\u7aef\u3002\u8be6\u60c5\u53c2\u89c1 \u5ba2\u6237\u7aef\u5217\u8868 \u3002 \u524d\u63d0\u6761\u4ef6 \u00b6 NebulaGraph\u670d\u52a1\u5df2 \u542f\u52a8 \u3002 \u8fd0\u884c NebulaGraph Console \u7684\u673a\u5668\u548c\u8fd0\u884cNebulaGraph\u7684\u670d\u52a1\u5668\u7f51\u7edc\u4e92\u901a\u3002 NebulaGraph Console \u7684\u7248\u672c\u517c\u5bb9NebulaGraph\u7684\u7248\u672c\u3002 Note \u7248\u672c\u76f8\u540c\u7684 NebulaGraph Console \u548cNebulaGraph\u517c\u5bb9\u7a0b\u5ea6\u6700\u9ad8\uff0c\u7248\u672c\u4e0d\u540c\u7684 NebulaGraph Console \u8fde\u63a5NebulaGraph\u65f6\uff0c\u53ef\u80fd\u4f1a\u6709\u517c\u5bb9\u95ee\u9898\uff0c\u6216\u8005\u65e0\u6cd5\u8fde\u63a5\u5e76\u62a5\u9519 incompatible version between client and server \u3002 \u64cd\u4f5c\u6b65\u9aa4 \u00b6 \u5728 NebulaGraph Console \u4e0b\u8f7d\u9875\u9762 \uff0c\u786e\u8ba4\u9700\u8981\u7684\u7248\u672c\uff0c\u5355\u51fb Assets \u3002 Note \u5efa\u8bae\u9009\u62e9 \u6700\u65b0 \u7248\u672c\u3002 \u5728 Assets \u533a\u57df\u627e\u5230\u673a\u5668\u8fd0\u884c\u6240\u9700\u7684\u4e8c\u8fdb\u5236\u6587\u4ef6\uff0c\u4e0b\u8f7d\u6587\u4ef6\u5230\u673a\u5668\u4e0a\u3002 \uff08\u53ef\u9009\uff09\u4e3a\u65b9\u4fbf\u4f7f\u7528\uff0c\u91cd\u547d\u540d\u6587\u4ef6\u4e3a nebula-console \u3002 Note \u5728 Windows \u7cfb\u7edf\u4e2d\uff0c\u8bf7\u91cd\u547d\u540d\u4e3a nebula-console.exe \u3002 \u5728\u8fd0\u884c NebulaGraph Console \u7684\u673a\u5668\u4e0a\u6267\u884c\u5982\u4e0b\u547d\u4ee4\uff0c\u4e3a\u7528\u6237\u6388\u4e88 nebula-console \u6587\u4ef6\u7684\u6267\u884c\u6743\u9650\u3002 Note Windows \u7cfb\u7edf\u8bf7\u8df3\u8fc7\u6b64\u6b65\u9aa4\u3002 $ chmod 111 nebula-console \u5728\u547d\u4ee4\u884c\u754c\u9762\u4e2d\uff0c\u5207\u6362\u5de5\u4f5c\u76ee\u5f55\u81f3 nebula-console \u6587\u4ef6\u6240\u5728\u76ee\u5f55\u3002 \u6267\u884c\u5982\u4e0b\u547d\u4ee4\u8fde\u63a5NebulaGraph\u3002 Linux \u6216 macOS $ ./nebula-console -addr <ip> -port <port> -u <username> -p <password> [ -t 120 ] [ -e \"nGQL_statement\" | -f filename.nGQL ] Windows > nebula-console . exe -addr < ip > -port < port > -u < username > -p < password > [ -t 120 ] [ -e \"nGQL_statement\" | -f filename . nGQL ] \u53c2\u6570\u8bf4\u660e\u5982\u4e0b\u3002 \u53c2\u6570 \u8bf4\u660e -h/-help \u663e\u793a\u5e2e\u52a9\u83dc\u5355\u3002 -addr/-address \u8bbe\u7f6e\u8981\u8fde\u63a5\u7684 Graph \u670d\u52a1\u7684 IP \u5730\u5740\u3002\u9ed8\u8ba4\u5730\u5740\u4e3a 127.0.0.1\u3002 -P/-port \u8bbe\u7f6e\u8981\u8fde\u63a5\u7684 Graph \u670d\u52a1\u7684\u7aef\u53e3\u3002\u9ed8\u8ba4\u7aef\u53e3\u4e3a 9669\u3002 -u/-user \u8bbe\u7f6eNebulaGraph\u8d26\u53f7\u7684\u7528\u6237\u540d\u3002\u672a\u542f\u7528\u8eab\u4efd\u8ba4\u8bc1\u65f6\uff0c\u53ef\u4ee5\u4f7f\u7528\u4efb\u610f\u5df2\u5b58\u5728\u7684\u7528\u6237\u540d\uff08\u9ed8\u8ba4\u4e3a root \uff09\u3002 -p/-password \u8bbe\u7f6e\u7528\u6237\u540d\u5bf9\u5e94\u7684\u5bc6\u7801\u3002\u672a\u542f\u7528\u8eab\u4efd\u8ba4\u8bc1\u65f6\uff0c\u5bc6\u7801\u53ef\u4ee5\u586b\u5199\u4efb\u610f\u5b57\u7b26\u3002 -t/-timeout \u8bbe\u7f6e\u6574\u6570\u7c7b\u578b\u7684\u8fde\u63a5\u8d85\u65f6\u65f6\u95f4\u3002\u5355\u4f4d\u4e3a\u6beb\u79d2\uff0c\u9ed8\u8ba4\u503c\u4e3a 120\u3002 -e/-eval \u8bbe\u7f6e\u5b57\u7b26\u4e32\u7c7b\u578b\u7684 nGQL \u8bed\u53e5\u3002\u8fde\u63a5\u6210\u529f\u540e\u4f1a\u6267\u884c\u4e00\u6b21\u8be5\u8bed\u53e5\u5e76\u8fd4\u56de\u7ed3\u679c\uff0c\u7136\u540e\u81ea\u52a8\u65ad\u5f00\u8fde\u63a5\u3002 -f/-file \u8bbe\u7f6e\u5b58\u50a8 nGQL \u8bed\u53e5\u7684\u6587\u4ef6\u7684\u8def\u5f84\u3002\u8fde\u63a5\u6210\u529f\u540e\u4f1a\u6267\u884c\u8be5\u6587\u4ef6\u5185\u7684 nGQL \u8bed\u53e5\u5e76\u8fd4\u56de\u7ed3\u679c\uff0c\u6267\u884c\u5b8c\u6bd5\u540e\u81ea\u52a8\u65ad\u5f00\u8fde\u63a5\u3002 -enable_ssl \u8fde\u63a5NebulaGraph\u65f6\u4f7f\u7528 SSL \u52a0\u5bc6\u3002 -ssl_root_ca_path \u6307\u5b9a CA \u8bc1\u4e66\u7684\u5b58\u50a8\u8def\u5f84\u3002 -ssl_cert_path \u6307\u5b9a CRT \u8bc1\u4e66\u7684\u5b58\u50a8\u8def\u5f84\u3002 -ssl_private_key_path \u6307\u5b9a\u79c1\u94a5\u6587\u4ef6\u7684\u5b58\u50a8\u8def\u5f84\u3002 \u66f4\u591a\u53c2\u6570\u53c2\u89c1 \u9879\u76ee\u4ed3\u5e93 \u3002","title":"\u6b65\u9aa4 3\uff1a\u8fde\u63a5 NebulaGraph"},{"location":"2.quick-start/3.quick-start-on-premise/3.connect-to-nebula-graph/#nebulagraph","text":"\u672c\u6587\u4ecb\u7ecd\u5982\u4f55\u4f7f\u7528\u539f\u751f\u547d\u4ee4\u884c\u5ba2\u6237\u7aef NebulaGraph Console \u8fde\u63a5NebulaGraph\u3002 Caution \u9996\u6b21\u8fde\u63a5\u5230NebulaGraph\u540e\uff0c\u5fc5\u987b\u5148 \u6ce8\u518c Storage \u670d\u52a1 \uff0c\u624d\u80fd\u6b63\u5e38\u67e5\u8be2\u6570\u636e\u3002 NebulaGraph\u652f\u6301\u591a\u79cd\u7c7b\u578b\u7684\u5ba2\u6237\u7aef\uff0c\u5305\u62ec\u547d\u4ee4\u884c\u5ba2\u6237\u7aef\u3001\u53ef\u89c6\u5316\u754c\u9762\u5ba2\u6237\u7aef\u548c\u6d41\u884c\u7f16\u7a0b\u8bed\u8a00\u5ba2\u6237\u7aef\u3002\u8be6\u60c5\u53c2\u89c1 \u5ba2\u6237\u7aef\u5217\u8868 \u3002","title":"\u8fde\u63a5NebulaGraph"},{"location":"2.quick-start/3.quick-start-on-premise/3.connect-to-nebula-graph/#_1","text":"NebulaGraph\u670d\u52a1\u5df2 \u542f\u52a8 \u3002 \u8fd0\u884c NebulaGraph Console \u7684\u673a\u5668\u548c\u8fd0\u884cNebulaGraph\u7684\u670d\u52a1\u5668\u7f51\u7edc\u4e92\u901a\u3002 NebulaGraph Console \u7684\u7248\u672c\u517c\u5bb9NebulaGraph\u7684\u7248\u672c\u3002 Note \u7248\u672c\u76f8\u540c\u7684 NebulaGraph Console \u548cNebulaGraph\u517c\u5bb9\u7a0b\u5ea6\u6700\u9ad8\uff0c\u7248\u672c\u4e0d\u540c\u7684 NebulaGraph Console \u8fde\u63a5NebulaGraph\u65f6\uff0c\u53ef\u80fd\u4f1a\u6709\u517c\u5bb9\u95ee\u9898\uff0c\u6216\u8005\u65e0\u6cd5\u8fde\u63a5\u5e76\u62a5\u9519 incompatible version between client and server \u3002","title":"\u524d\u63d0\u6761\u4ef6"},{"location":"2.quick-start/3.quick-start-on-premise/3.connect-to-nebula-graph/#_2","text":"\u5728 NebulaGraph Console \u4e0b\u8f7d\u9875\u9762 \uff0c\u786e\u8ba4\u9700\u8981\u7684\u7248\u672c\uff0c\u5355\u51fb Assets \u3002 Note \u5efa\u8bae\u9009\u62e9 \u6700\u65b0 \u7248\u672c\u3002 \u5728 Assets \u533a\u57df\u627e\u5230\u673a\u5668\u8fd0\u884c\u6240\u9700\u7684\u4e8c\u8fdb\u5236\u6587\u4ef6\uff0c\u4e0b\u8f7d\u6587\u4ef6\u5230\u673a\u5668\u4e0a\u3002 \uff08\u53ef\u9009\uff09\u4e3a\u65b9\u4fbf\u4f7f\u7528\uff0c\u91cd\u547d\u540d\u6587\u4ef6\u4e3a nebula-console \u3002 Note \u5728 Windows \u7cfb\u7edf\u4e2d\uff0c\u8bf7\u91cd\u547d\u540d\u4e3a nebula-console.exe \u3002 \u5728\u8fd0\u884c NebulaGraph Console \u7684\u673a\u5668\u4e0a\u6267\u884c\u5982\u4e0b\u547d\u4ee4\uff0c\u4e3a\u7528\u6237\u6388\u4e88 nebula-console \u6587\u4ef6\u7684\u6267\u884c\u6743\u9650\u3002 Note Windows \u7cfb\u7edf\u8bf7\u8df3\u8fc7\u6b64\u6b65\u9aa4\u3002 $ chmod 111 nebula-console \u5728\u547d\u4ee4\u884c\u754c\u9762\u4e2d\uff0c\u5207\u6362\u5de5\u4f5c\u76ee\u5f55\u81f3 nebula-console \u6587\u4ef6\u6240\u5728\u76ee\u5f55\u3002 \u6267\u884c\u5982\u4e0b\u547d\u4ee4\u8fde\u63a5NebulaGraph\u3002 Linux \u6216 macOS $ ./nebula-console -addr <ip> -port <port> -u <username> -p <password> [ -t 120 ] [ -e \"nGQL_statement\" | -f filename.nGQL ] Windows > nebula-console . exe -addr < ip > -port < port > -u < username > -p < password > [ -t 120 ] [ -e \"nGQL_statement\" | -f filename . nGQL ] \u53c2\u6570\u8bf4\u660e\u5982\u4e0b\u3002 \u53c2\u6570 \u8bf4\u660e -h/-help \u663e\u793a\u5e2e\u52a9\u83dc\u5355\u3002 -addr/-address \u8bbe\u7f6e\u8981\u8fde\u63a5\u7684 Graph \u670d\u52a1\u7684 IP \u5730\u5740\u3002\u9ed8\u8ba4\u5730\u5740\u4e3a 127.0.0.1\u3002 -P/-port \u8bbe\u7f6e\u8981\u8fde\u63a5\u7684 Graph \u670d\u52a1\u7684\u7aef\u53e3\u3002\u9ed8\u8ba4\u7aef\u53e3\u4e3a 9669\u3002 -u/-user \u8bbe\u7f6eNebulaGraph\u8d26\u53f7\u7684\u7528\u6237\u540d\u3002\u672a\u542f\u7528\u8eab\u4efd\u8ba4\u8bc1\u65f6\uff0c\u53ef\u4ee5\u4f7f\u7528\u4efb\u610f\u5df2\u5b58\u5728\u7684\u7528\u6237\u540d\uff08\u9ed8\u8ba4\u4e3a root \uff09\u3002 -p/-password \u8bbe\u7f6e\u7528\u6237\u540d\u5bf9\u5e94\u7684\u5bc6\u7801\u3002\u672a\u542f\u7528\u8eab\u4efd\u8ba4\u8bc1\u65f6\uff0c\u5bc6\u7801\u53ef\u4ee5\u586b\u5199\u4efb\u610f\u5b57\u7b26\u3002 -t/-timeout \u8bbe\u7f6e\u6574\u6570\u7c7b\u578b\u7684\u8fde\u63a5\u8d85\u65f6\u65f6\u95f4\u3002\u5355\u4f4d\u4e3a\u6beb\u79d2\uff0c\u9ed8\u8ba4\u503c\u4e3a 120\u3002 -e/-eval \u8bbe\u7f6e\u5b57\u7b26\u4e32\u7c7b\u578b\u7684 nGQL \u8bed\u53e5\u3002\u8fde\u63a5\u6210\u529f\u540e\u4f1a\u6267\u884c\u4e00\u6b21\u8be5\u8bed\u53e5\u5e76\u8fd4\u56de\u7ed3\u679c\uff0c\u7136\u540e\u81ea\u52a8\u65ad\u5f00\u8fde\u63a5\u3002 -f/-file \u8bbe\u7f6e\u5b58\u50a8 nGQL \u8bed\u53e5\u7684\u6587\u4ef6\u7684\u8def\u5f84\u3002\u8fde\u63a5\u6210\u529f\u540e\u4f1a\u6267\u884c\u8be5\u6587\u4ef6\u5185\u7684 nGQL \u8bed\u53e5\u5e76\u8fd4\u56de\u7ed3\u679c\uff0c\u6267\u884c\u5b8c\u6bd5\u540e\u81ea\u52a8\u65ad\u5f00\u8fde\u63a5\u3002 -enable_ssl \u8fde\u63a5NebulaGraph\u65f6\u4f7f\u7528 SSL \u52a0\u5bc6\u3002 -ssl_root_ca_path \u6307\u5b9a CA \u8bc1\u4e66\u7684\u5b58\u50a8\u8def\u5f84\u3002 -ssl_cert_path \u6307\u5b9a CRT \u8bc1\u4e66\u7684\u5b58\u50a8\u8def\u5f84\u3002 -ssl_private_key_path \u6307\u5b9a\u79c1\u94a5\u6587\u4ef6\u7684\u5b58\u50a8\u8def\u5f84\u3002 \u66f4\u591a\u53c2\u6570\u53c2\u89c1 \u9879\u76ee\u4ed3\u5e93 \u3002","title":"\u64cd\u4f5c\u6b65\u9aa4"},{"location":"2.quick-start/3.quick-start-on-premise/4.nebula-graph-crud/","text":"\u4f7f\u7528\u5e38\u7528 nGQL\uff08CRUD \u547d\u4ee4\uff09 \u00b6 \u672c\u6587\u4ecb\u7ecdNebulaGraph\u67e5\u8be2\u8bed\u8a00\u7684\u57fa\u7840\u8bed\u6cd5\uff0c\u5305\u62ec\u7528\u4e8e Schema \u521b\u5efa\u548c\u5e38\u7528\u589e\u5220\u6539\u67e5\u64cd\u4f5c\u7684\u8bed\u53e5\u3002 \u5982\u9700\u4e86\u89e3\u66f4\u591a\u8bed\u53e5\u7684\u7528\u6cd5\uff0c\u53c2\u89c1 nGQL \u6307\u5357 \u3002 \u4f7f\u7528\u8bf4\u660e \u00b6 \u56fe\u7a7a\u95f4\u548c Schema \u00b6 \u4e00\u4e2aNebulaGraph\u5b9e\u4f8b\u7531\u4e00\u4e2a\u6216\u591a\u4e2a\u56fe\u7a7a\u95f4\u7ec4\u6210\u3002\u6bcf\u4e2a\u56fe\u7a7a\u95f4\u90fd\u662f\u7269\u7406\u9694\u79bb\u7684\uff0c\u7528\u6237\u53ef\u4ee5\u5728\u540c\u4e00\u4e2a\u5b9e\u4f8b\u4e2d\u4f7f\u7528\u4e0d\u540c\u7684\u56fe\u7a7a\u95f4\u5b58\u50a8\u4e0d\u540c\u7684\u6570\u636e\u96c6\u3002 \u4e3a\u4e86\u5728\u56fe\u7a7a\u95f4\u4e2d\u63d2\u5165\u6570\u636e\uff0c\u9700\u8981\u4e3a\u56fe\u6570\u636e\u5e93\u5b9a\u4e49\u4e00\u4e2a Schema\u3002NebulaGraph\u7684 Schema \u662f\u7531\u5982\u4e0b\u51e0\u90e8\u5206\u7ec4\u6210\u3002 \u7ec4\u6210\u90e8\u5206 \u8bf4\u660e \u70b9\uff08Vertex\uff09 \u8868\u793a\u73b0\u5b9e\u4e16\u754c\u4e2d\u7684\u5b9e\u4f53\u3002\u4e00\u4e2a\u70b9\u53ef\u4ee5\u6709 0 \u5230\u591a\u4e2a\u6807\u7b7e\u3002 \u6807\u7b7e\uff08Tag\uff09 \u70b9\u7684\u7c7b\u578b\uff0c\u5b9a\u4e49\u4e86\u4e00\u7ec4\u63cf\u8ff0\u70b9\u7c7b\u578b\u7684\u5c5e\u6027\u3002 \u8fb9\uff08Edge\uff09 \u8868\u793a\u4e24\u4e2a\u70b9\u4e4b\u95f4 \u6709\u65b9\u5411 \u7684\u5173\u7cfb\u3002 \u8fb9\u7c7b\u578b\uff08Edge type\uff09 \u8fb9\u7684\u7c7b\u578b\uff0c\u5b9a\u4e49\u4e86\u4e00\u7ec4\u63cf\u8ff0\u8fb9\u7684\u7c7b\u578b\u7684\u5c5e\u6027\u3002 \u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u89c1 \u6570\u636e\u7ed3\u6784 \u3002 \u672c\u6587\u5c06\u4f7f\u7528\u4e0b\u56fe\u7684\u6570\u636e\u96c6\u6f14\u793a\u57fa\u7840\u64cd\u4f5c\u7684\u8bed\u6cd5\u3002 \u5f02\u6b65\u5b9e\u73b0\u521b\u5efa\u548c\u4fee\u6539 \u00b6 Caution \u5728NebulaGraph\u4e2d\uff0c\u4e0b\u5217\u521b\u5efa\u548c\u4fee\u6539\u64cd\u4f5c\u662f\u5f02\u6b65\u5b9e\u73b0\u7684\u3002\u8981\u5728 \u4e0b\u4e00\u4e2a \u5fc3\u8df3\u5468\u671f\u4e4b\u540e\u624d\u80fd\u751f\u6548\uff0c\u5426\u5219\u8bbf\u95ee\u4f1a\u62a5\u9519\u3002\u4e3a\u786e\u4fdd\u6570\u636e\u540c\u6b65\uff0c\u540e\u7eed\u64cd\u4f5c\u80fd\u987a\u5229\u8fdb\u884c\uff0c\u8bf7\u7b49\u5f85 2 \u4e2a\u5fc3\u8df3\u5468\u671f\uff0820 \u79d2\uff09\u3002 CREATE SPACE CREATE TAG CREATE EDGE ALTER TAG ALTER EDGE CREATE TAG INDEX CREATE EDGE INDEX Note \u9ed8\u8ba4\u5fc3\u8df3\u5468\u671f\u662f 10 \u79d2\u3002\u4fee\u6539\u5fc3\u8df3\u5468\u671f\u53c2\u6570 heartbeat_interval_secs \uff0c\u8bf7\u53c2\u89c1 \u914d\u7f6e\u7b80\u4ecb \u3002 \u7b2c\u4e00\u6b65\uff1a\u521b\u5efa\u548c\u9009\u62e9\u56fe\u7a7a\u95f4 \u00b6 nGQL \u8bed\u6cd5 \u00b6 \u521b\u5efa\u56fe\u7a7a\u95f4 CREATE SPACE [IF NOT EXISTS] <graph_space_name> ( [partition_num = <partition_number>,] [replica_factor = <replica_number>,] vid_type = {FIXED_STRING(<N>) | INT64} ) [COMMENT = '<comment>']; \u53c2\u6570\u8be6\u60c5\u8bf7\u53c2\u89c1 CREATE SPACE \u3002 \u5217\u51fa\u521b\u5efa\u6210\u529f\u7684\u56fe\u7a7a\u95f4 nebula> SHOW SPACES; \u9009\u62e9\u6570\u636e\u5e93 USE <graph_space_name>; \u793a\u4f8b \u00b6 \u6267\u884c\u5982\u4e0b\u8bed\u53e5\u521b\u5efa\u540d\u4e3a basketballplayer \u7684\u56fe\u7a7a\u95f4\u3002 nebula> CREATE SPACE basketballplayer(partition_num=15, replica_factor=1, vid_type=fixed_string(30)); Note \u5982\u679c\u62a5\u9519\u63d0\u793a [ERROR (-1005)]: Host not enough! \uff0c\u8bf7\u68c0\u67e5\u662f\u5426\u5df2 \u6dfb\u52a0 Storage \u4e3b\u673a \u3002 \u6267\u884c\u547d\u4ee4 SHOW HOSTS \u68c0\u67e5\u5206\u7247\u7684\u5206\u5e03\u60c5\u51b5\uff0c\u786e\u4fdd\u5e73\u8861\u5206\u5e03\u3002 nebula> SHOW HOSTS; +-------------+-----------+-----------+--------------+----------------------------------+------------------------+---------+ | Host | Port | Status | Leader count | Leader distribution | Partition distribution | Version | +-------------+-----------+-----------+--------------+----------------------------------+------------------------+---------+ | \"storaged0\" | 9779 | \"ONLINE\" | 5 | \"basketballplayer:5\" | \"basketballplayer:5\" | \"3.6.0\" | | \"storaged1\" | 9779 | \"ONLINE\" | 5 | \"basketballplayer:5\" | \"basketballplayer:5\" | \"3.6.0\" | | \"storaged2\" | 9779 | \"ONLINE\" | 5 | \"basketballplayer:5\" | \"basketballplayer:5\" | \"3.6.0\" | +-------------+-----------+-----------+--------------+----------------------------------+------------------------+---------+ \u5982\u679c Leader distribution \u5206\u5e03\u4e0d\u5747\u5300\uff0c\u8bf7\u6267\u884c\u547d\u4ee4 BALANCE LEADER \u91cd\u65b0\u5206\u914d\u3002\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u89c1 Storage \u8d1f\u8f7d\u5747\u8861 \u3002 \u9009\u62e9\u56fe\u7a7a\u95f4 basketballplayer \u3002 nebula[(none)]> USE basketballplayer; \u7528\u6237\u53ef\u4ee5\u6267\u884c\u547d\u4ee4 SHOW SPACES \u67e5\u770b\u521b\u5efa\u7684\u56fe\u7a7a\u95f4\u3002 nebula> SHOW SPACES; +--------------------+ | Name | +--------------------+ | \"basketballplayer\" | +--------------------+ \u7b2c\u4e8c\u6b65\uff1a\u521b\u5efa Tag \u548c Edge type \u00b6 nGQL \u8bed\u6cd5 \u00b6 CREATE {TAG | EDGE} [IF NOT EXISTS] {<tag_name> | <edge_type_name>} ( <prop_name> <data_type> [NULL | NOT NULL] [DEFAULT <default_value>] [COMMENT '<comment>'] [{, <prop_name> <data_type> [NULL | NOT NULL] [DEFAULT <default_value>] [COMMENT '<comment>']} ...] ) [TTL_DURATION = <ttl_duration>] [TTL_COL = <prop_name>] [COMMENT = '<comment>']; \u53c2\u6570\u8be6\u60c5\u8bf7\u53c2\u89c1 CREATE TAG \u548c CREATE EDGE \u3002 \u793a\u4f8b \u00b6 \u521b\u5efa Tag: player \u548c team \uff0c\u4ee5\u53ca Edge type: follow \u548c serve \u3002\u8bf4\u660e\u5982\u4e0b\u8868\u3002 \u540d\u79f0 \u7c7b\u578b \u5c5e\u6027 player Tag name (string), age (int) team Tag name (string) follow Edge type degree (int) serve Edge type start_year (int), end_year (int) nebula> CREATE TAG player(name string, age int); nebula> CREATE TAG team(name string); nebula> CREATE EDGE follow(degree int); nebula> CREATE EDGE serve(start_year int, end_year int); \u7b2c\u4e09\u6b65\uff1a\u63d2\u5165\u6570\u636e \u00b6 \u7528\u6237\u53ef\u4ee5\u4f7f\u7528 INSERT \u8bed\u53e5\uff0c\u57fa\u4e8e\u73b0\u6709\u7684 Tag \u63d2\u5165\u70b9\uff0c\u6216\u8005\u57fa\u4e8e\u73b0\u6709\u7684 Edge type \u63d2\u5165\u8fb9\u3002 nGQL \u8bed\u6cd5 \u00b6 \u63d2\u5165\u70b9 INSERT VERTEX [IF NOT EXISTS] [tag_props, [tag_props] ...] VALUES <vid>: ([prop_value_list]) tag_props: tag_name ([prop_name_list]) prop_name_list: [prop_name [, prop_name] ...] prop_value_list: [prop_value [, prop_value] ...] vid \u662f Vertex ID \u7684\u7f29\u5199\uff0c vid \u5728\u4e00\u4e2a\u56fe\u7a7a\u95f4\u4e2d\u662f\u552f\u4e00\u7684\u3002\u53c2\u6570\u8be6\u60c5\u8bf7\u53c2\u89c1 INSERT VERTEX \u3002 \u63d2\u5165\u8fb9 INSERT EDGE [IF NOT EXISTS] <edge_type> ( <prop_name_list> ) VALUES <src_vid> -> <dst_vid>[@<rank>] : ( <prop_value_list> ) [, <src_vid> -> <dst_vid>[@<rank>] : ( <prop_value_list> ), ...]; <prop_name_list> ::= [ <prop_name> [, <prop_name> ] ...] <prop_value_list> ::= [ <prop_value> [, <prop_value> ] ...] \u53c2\u6570\u8be6\u60c5\u8bf7\u53c2\u89c1 INSERT EDGE \u3002 \u793a\u4f8b \u00b6 \u63d2\u5165\u4ee3\u8868\u7403\u5458\u548c\u7403\u961f\u7684\u70b9\u3002 nebula> INSERT VERTEX player(name, age) VALUES \"player100\":(\"Tim Duncan\", 42); nebula> INSERT VERTEX player(name, age) VALUES \"player101\":(\"Tony Parker\", 36); nebula> INSERT VERTEX player(name, age) VALUES \"player102\":(\"LaMarcus Aldridge\", 33); nebula> INSERT VERTEX team(name) VALUES \"team203\":(\"Trail Blazers\"), \"team204\":(\"Spurs\"); \u63d2\u5165\u4ee3\u8868\u7403\u5458\u548c\u7403\u961f\u4e4b\u95f4\u5173\u7cfb\u7684\u8fb9\u3002 nebula> INSERT EDGE follow(degree) VALUES \"player101\" -> \"player100\":(95); nebula> INSERT EDGE follow(degree) VALUES \"player101\" -> \"player102\":(90); nebula> INSERT EDGE follow(degree) VALUES \"player102\" -> \"player100\":(75); nebula> INSERT EDGE serve(start_year, end_year) VALUES \"player101\" -> \"team204\":(1999, 2018),\"player102\" -> \"team203\":(2006, 2015); \u7b2c\u56db\u6b65\uff1a\u67e5\u8be2\u6570\u636e \u00b6 GO \u8bed\u53e5\u53ef\u4ee5\u6839\u636e\u6307\u5b9a\u7684\u6761\u4ef6\u904d\u5386\u6570\u636e\u5e93\u3002 GO \u8bed\u53e5\u4ece\u4e00\u4e2a\u6216\u591a\u4e2a\u70b9\u5f00\u59cb\uff0c\u6cbf\u7740\u4e00\u6761\u6216\u591a\u6761\u8fb9\u904d\u5386\uff0c\u8fd4\u56de YIELD \u5b50\u53e5\u4e2d\u6307\u5b9a\u7684\u4fe1\u606f\u3002 FETCH \u8bed\u53e5\u53ef\u4ee5\u83b7\u5f97\u70b9\u6216\u8fb9\u7684\u5c5e\u6027\u3002 LOOKUP \u8bed\u53e5\u662f\u57fa\u4e8e \u7d22\u5f15 \u7684\uff0c\u548c WHERE \u5b50\u53e5\u4e00\u8d77\u4f7f\u7528\uff0c\u67e5\u627e\u7b26\u5408\u7279\u5b9a\u6761\u4ef6\u7684\u6570\u636e\u3002 MATCH \u8bed\u53e5\u662f\u67e5\u8be2\u56fe\u6570\u636e\u6700\u5e38\u7528\u7684\uff0c\u53ef\u4ee5\u7075\u6d3b\u7684\u63cf\u8ff0\u5404\u79cd\u56fe\u6a21\u5f0f\uff0c\u4f46\u662f\u5b83\u4f9d\u8d56 \u7d22\u5f15 \u53bb\u5339\u914dNebulaGraph\u4e2d\u7684\u6570\u636e\u6a21\u578b\uff0c\u6027\u80fd\u4e5f\u8fd8\u9700\u8981\u8c03\u4f18\u3002 nGQL \u8bed\u6cd5 \u00b6 GO GO [[<M> TO] <N> {STEP|STEPS}] FROM <vertex_list> OVER <edge_type_list> [{REVERSELY | BIDIRECT}] [ WHERE <conditions> ] YIELD [DISTINCT] <return_list> [{ SAMPLE <sample_list> | <limit_by_list_clause> }] [| GROUP BY {<col_name> | expression> | <position>} YIELD <col_name>] [| ORDER BY <expression> [{ASC | DESC}]] [| LIMIT [<offset>,] <number_rows>]; FETCH \u67e5\u8be2 Tag \u5c5e\u6027 FETCH PROP ON {<tag_name>[, tag_name ...] | *} <vid> [, vid ...] YIELD <return_list> [AS <alias>]; \u67e5\u8be2\u8fb9\u5c5e\u6027 FETCH PROP ON <edge_type> <src_vid> -> <dst_vid>[@<rank>] [, <src_vid> -> <dst_vid> ...] YIELD <output>; LOOKUP LOOKUP ON {<vertex_tag> | <edge_type>} [WHERE <expression> [AND <expression> ...]] YIELD <return_list> [AS <alias>]; <return_list> <prop_name> [AS <col_alias>] [, <prop_name> [AS <prop_alias>] ...]; MATCH MATCH <pattern> [<clause_1>] RETURN <output> [<clause_2>]; GO \u8bed\u53e5\u793a\u4f8b \u00b6 \u4ece VID \u4e3a player101 \u7684\u7403\u5458\u5f00\u59cb\uff0c\u6cbf\u7740\u8fb9 follow \u627e\u5230\u8fde\u63a5\u7684\u7403\u5458\u3002 nebula> GO FROM \"player101\" OVER follow YIELD id($$); +-------------+ | id($$) | +-------------+ | \"player100\" | | \"player102\" | +-------------+ \u4ece VID \u4e3a player101 \u7684\u7403\u5458\u5f00\u59cb\uff0c\u6cbf\u7740\u8fb9 follow \u67e5\u627e\u5e74\u9f84\u5927\u4e8e\u6216\u7b49\u4e8e 35 \u5c81\u7684\u7403\u5458\uff0c\u5e76\u8fd4\u56de\u4ed6\u4eec\u7684\u59d3\u540d\u548c\u5e74\u9f84\uff0c\u540c\u65f6\u91cd\u547d\u540d\u5bf9\u5e94\u7684\u5217\u3002 nebula> GO FROM \"player101\" OVER follow WHERE properties($$).age >= 35 \\ YIELD properties($$).name AS Teammate, properties($$).age AS Age; +-----------------+-----+ | Teammate | Age | +-----------------+-----+ | \"Tim Duncan\" | 42 | +-----------------+-----+ \u5b50\u53e5/\u7b26\u53f7 \u8bf4\u660e YIELD \u6307\u5b9a\u8be5\u67e5\u8be2\u9700\u8981\u8fd4\u56de\u7684\u503c\u6216\u7ed3\u679c\u3002 $$ \u8868\u793a\u8fb9\u7684\u7ec8\u70b9\u3002 \\ \u8868\u793a\u6362\u884c\u7ee7\u7eed\u8f93\u5165\u3002 \u4ece VID \u4e3a player101 \u7684\u7403\u5458\u5f00\u59cb\uff0c\u6cbf\u7740\u8fb9 follow \u67e5\u627e\u8fde\u63a5\u7684\u7403\u5458\uff0c\u7136\u540e\u68c0\u7d22\u8fd9\u4e9b\u7403\u5458\u7684\u7403\u961f\u3002\u4e3a\u4e86\u5408\u5e76\u8fd9\u4e24\u4e2a\u67e5\u8be2\u8bf7\u6c42\uff0c\u53ef\u4ee5\u4f7f\u7528\u7ba1\u9053\u7b26\u6216\u4e34\u65f6\u53d8\u91cf\u3002 \u4f7f\u7528\u7ba1\u9053\u7b26 nebula> GO FROM \"player101\" OVER follow YIELD dst(edge) AS id | \\ GO FROM $-.id OVER serve YIELD properties($$).name AS Team, \\ properties($^).name AS Player; +-----------------+---------------------+ | Team | Player | +-----------------+---------------------+ | \"Trail Blazers\" | \"LaMarcus Aldridge\" | +-----------------+---------------------+ \u5b50\u53e5/\u7b26\u53f7 \u8bf4\u660e $^ \u8868\u793a\u8fb9\u7684\u8d77\u70b9\u3002 | \u7ec4\u5408\u591a\u4e2a\u67e5\u8be2\u7684\u7ba1\u9053\u7b26\uff0c\u5c06\u524d\u4e00\u4e2a\u67e5\u8be2\u7684\u7ed3\u679c\u96c6\u7528\u4e8e\u540e\u4e00\u4e2a\u67e5\u8be2\u3002 $- \u8868\u793a\u7ba1\u9053\u7b26\u524d\u9762\u7684\u67e5\u8be2\u8f93\u51fa\u7684\u7ed3\u679c\u96c6\u3002 \u4f7f\u7528\u4e34\u65f6\u53d8\u91cf Note \u5f53\u590d\u5408\u8bed\u53e5\u4f5c\u4e3a\u4e00\u4e2a\u6574\u4f53\u63d0\u4ea4\u7ed9\u670d\u52a1\u5668\u65f6\uff0c\u5176\u4e2d\u7684\u4e34\u65f6\u53d8\u91cf\u4f1a\u5728\u8bed\u53e5\u7ed3\u675f\u65f6\u88ab\u91ca\u653e\u3002 nebula> $var = GO FROM \"player101\" OVER follow YIELD dst(edge) AS id; \\ GO FROM $var.id OVER serve YIELD properties($$).name AS Team, \\ properties($^).name AS Player; +-----------------+---------------------+ | Team | Player | +-----------------+---------------------+ | \"Trail Blazers\" | \"LaMarcus Aldridge\" | +-----------------+---------------------+ FETCH \u8bed\u53e5\u793a\u4f8b \u00b6 \u67e5\u8be2 VID \u4e3a player100 \u7684\u7403\u5458\u7684\u5c5e\u6027\u3002 nebula> FETCH PROP ON player \"player100\" YIELD properties(vertex); +-------------------------------+ | properties(VERTEX) | +-------------------------------+ | {age: 42, name: \"Tim Duncan\"} | +-------------------------------+ Note LOOKUP \u548c MATCH \u7684\u793a\u4f8b\u5728\u4e0b\u6587\u7684 \u7d22\u5f15 \u90e8\u5206\u67e5\u770b\u3002 \u5176\u4ed6\u64cd\u4f5c \u00b6 \u4fee\u6539\u70b9\u548c\u8fb9 \u00b6 \u7528\u6237\u53ef\u4ee5\u4f7f\u7528 UPDATE \u8bed\u53e5\u6216 UPSERT \u8bed\u53e5\u4fee\u6539\u73b0\u6709\u6570\u636e\u3002 UPSERT \u662f UPDATE \u548c INSERT \u7684\u7ed3\u5408\u4f53\u3002\u5f53\u4f7f\u7528 UPSERT \u66f4\u65b0\u4e00\u4e2a\u70b9\u6216\u8fb9\uff0c\u5982\u679c\u5b83\u4e0d\u5b58\u5728\uff0c\u6570\u636e\u5e93\u4f1a\u81ea\u52a8\u63d2\u5165\u4e00\u4e2a\u65b0\u7684\u70b9\u6216\u8fb9\u3002 Note \u6bcf\u4e2a partition \u5185\u90e8\uff0c UPSERT \u64cd\u4f5c\u662f\u4e00\u4e2a\u4e32\u884c\u64cd\u4f5c\uff0c\u6240\u4ee5\u6267\u884c\u901f\u5ea6\u6bd4\u6267\u884c INSERT \u6216 UPDATE \u6162\u5f88\u591a\u3002\u5176\u4ec5\u5728\u591a\u4e2a partition \u4e4b\u95f4\u6709\u5e76\u53d1\u3002 nGQL \u8bed\u6cd5 \u00b6 UPDATE \u70b9 UPDATE VERTEX <vid> SET <properties to be updated> [WHEN <condition>] [YIELD <columns>]; UPDATE \u8fb9 UPDATE EDGE ON <edge_type> <source vid> -> <destination vid> [@rank] SET <properties to be updated> [WHEN <condition>] [YIELD <columns to be output>]; UPSERT \u70b9\u6216\u8fb9 UPSERT {VERTEX <vid> | EDGE <edge_type>} SET <update_columns> [WHEN <condition>] [YIELD <columns>]; \u793a\u4f8b \u00b6 \u7528 UPDATE \u4fee\u6539 VID \u4e3a player100 \u7684\u7403\u5458\u7684 name \u5c5e\u6027\uff0c\u7136\u540e\u7528 FETCH \u8bed\u53e5\u68c0\u67e5\u7ed3\u679c\u3002 nebula> UPDATE VERTEX \"player100\" SET player.name = \"Tim\"; nebula> FETCH PROP ON player \"player100\" YIELD properties(vertex); +------------------------+ | properties(VERTEX) | +------------------------+ | {age: 42, name: \"Tim\"} | +------------------------+ \u7528 UPDATE \u4fee\u6539\u67d0\u6761\u8fb9\u7684 degree \u5c5e\u6027\uff0c\u7136\u540e\u7528 FETCH \u68c0\u67e5\u7ed3\u679c\u3002 nebula> UPDATE EDGE ON follow \"player101\" -> \"player100\" SET degree = 96; nebula> FETCH PROP ON follow \"player101\" -> \"player100\" YIELD properties(edge); +------------------+ | properties(EDGE) | +------------------+ | {degree: 96} | +------------------+ \u7528 INSERT \u63d2\u5165\u4e00\u4e2a VID \u4e3a player111 \u7684\u70b9\uff0c\u7136\u540e\u7528 UPSERT \u66f4\u65b0\u5b83\u3002 nebula> INSERT VERTEX player(name,age) VALUES \"player111\":(\"David West\", 38); nebula> UPSERT VERTEX \"player111\" SET player.name = \"David\", player.age = $^.player.age + 11 \\ WHEN $^.player.name == \"David West\" AND $^.player.age > 20 \\ YIELD $^.player.name AS Name, $^.player.age AS Age; +---------+-----+ | Name | Age | +---------+-----+ | \"David\" | 49 | +---------+-----+ \u5220\u9664\u70b9\u548c\u8fb9 \u00b6 nGQL \u8bed\u6cd5 \u00b6 \u5220\u9664\u70b9 DELETE VERTEX <vid1>[, <vid2>...] \u5220\u9664\u8fb9 DELETE EDGE <edge_type> <src_vid> -> <dst_vid>[@<rank>] [, <src_vid> -> <dst_vid>...] \u793a\u4f8b \u00b6 \u5220\u9664\u70b9 nebula> DELETE VERTEX \"player111\", \"team203\"; \u5220\u9664\u8fb9 nebula> DELETE EDGE follow \"player101\" -> \"team204\"; \u4f7f\u7528\u7d22\u5f15 \u00b6 \u7528\u6237\u53ef\u4ee5\u901a\u8fc7 CREATE INDEX \u8bed\u53e5\u4e3a Tag \u548c Edge type \u589e\u52a0\u7d22\u5f15\u3002 \u4f7f\u7528\u7d22\u5f15\u5fc5\u8bfb MATCH \u548c LOOKUP \u8bed\u53e5\u7684\u6267\u884c\u90fd\u4f9d\u8d56\u7d22\u5f15\uff0c\u4f46\u662f\u7d22\u5f15\u4f1a\u5bfc\u81f4\u5199\u6027\u80fd\u5927\u5e45\u964d\u4f4e \u3002\u8bf7 \u4e0d\u8981\u968f\u610f \u5728\u751f\u4ea7\u73af\u5883\u4e2d\u4f7f\u7528\u7d22\u5f15\uff0c\u9664\u975e\u5f88\u6e05\u695a\u4f7f\u7528\u7d22\u5f15\u5bf9\u4e1a\u52a1\u7684\u5f71\u54cd\u3002 \u5fc5\u987b \u4e3a\u201c\u5df2\u5199\u5165\u4f46\u672a\u6784\u5efa\u7d22\u5f15\u201d\u7684\u6570\u636e\u91cd\u5efa\u7d22\u5f15\uff0c\u5426\u5219\u65e0\u6cd5\u5728 MATCH \u548c LOOKUP \u8bed\u53e5\u4e2d\u8fd4\u56de\u8fd9\u4e9b\u6570\u636e\u3002\u53c2\u89c1 \u91cd\u5efa\u7d22\u5f15 \u3002 nGQL \u8bed\u6cd5 \u00b6 \u521b\u5efa\u7d22\u5f15 CREATE {TAG | EDGE} INDEX [IF NOT EXISTS] <index_name> ON {<tag_name> | <edge_name>} ([<prop_name_list>]) [COMMENT = '<comment>']; \u91cd\u5efa\u7d22\u5f15 REBUILD {TAG | EDGE} INDEX <index_name>; Note \u4e3a\u6ca1\u6709\u6307\u5b9a\u957f\u5ea6\u7684\u53d8\u91cf\u5c5e\u6027\u521b\u5efa\u7d22\u5f15\u65f6\uff0c\u9700\u8981\u6307\u5b9a\u7d22\u5f15\u957f\u5ea6\u3002\u5728 utf-8 \u7f16\u7801\u4e2d\uff0c\u4e00\u4e2a\u4e2d\u6587\u5b57\u7b26\u5360 3 \u5b57\u8282\uff0c\u8bf7\u6839\u636e\u53d8\u91cf\u5c5e\u6027\u957f\u5ea6\u8bbe\u7f6e\u5408\u9002\u7684\u7d22\u5f15\u957f\u5ea6\u3002\u4f8b\u5982 10 \u4e2a\u4e2d\u6587\u5b57\u7b26\uff0c\u7d22\u5f15\u957f\u5ea6\u9700\u8981\u4e3a 30\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1 \u521b\u5efa\u7d22\u5f15 \u3002 \u57fa\u4e8e\u7d22\u5f15\u7684 LOOKUP \u548c MATCH \u793a\u4f8b \u00b6 \u786e\u4fdd LOOKUP \u6216 MATCH \u6709\u4e00\u4e2a\u7d22\u5f15\u53ef\u7528\u3002\u5982\u679c\u6ca1\u6709\uff0c\u8bf7\u5148\u521b\u5efa\u7d22\u5f15\u3002 \u627e\u5230 Tag \u4e3a player \u7684\u70b9\u7684\u4fe1\u606f\uff0c\u5b83\u7684 name \u5c5e\u6027\u503c\u4e3a Tony Parker \u3002 // \u4e3a name \u5c5e\u6027\u521b\u5efa\u7d22\u5f15 player_index_1\u3002 nebula> CREATE TAG INDEX IF NOT EXISTS player_index_1 ON player(name(20)); // \u91cd\u5efa\u7d22\u5f15\u786e\u4fdd\u80fd\u5bf9\u5df2\u5b58\u5728\u6570\u636e\u751f\u6548\u3002 nebula> REBUILD TAG INDEX player_index_1 +------------+ | New Job Id | +------------+ | 31 | +------------+ // \u4f7f\u7528 LOOKUP \u8bed\u53e5\u68c0\u7d22\u70b9\u7684\u5c5e\u6027\u3002 nebula> LOOKUP ON player WHERE player.name == \"Tony Parker\" \\ YIELD properties(vertex).name AS name, properties(vertex).age AS age; +---------------+-----+ | name | age | +---------------+-----+ | \"Tony Parker\" | 36 | +---------------+-----+ // \u4f7f\u7528 MATCH \u8bed\u53e5\u68c0\u7d22\u70b9\u7684\u5c5e\u6027\u3002 nebula> MATCH (v:player{name:\"Tony Parker\"}) RETURN v; +-----------------------------------------------------+ | v | +-----------------------------------------------------+ | (\"player101\" :player{age: 36, name: \"Tony Parker\"}) | +-----------------------------------------------------+","title":"\u6b65\u9aa4 5\uff1a\u4f7f\u7528\u57fa\u672c nGQL \u547d\u4ee4"},{"location":"2.quick-start/3.quick-start-on-premise/4.nebula-graph-crud/#ngqlcrud","text":"\u672c\u6587\u4ecb\u7ecdNebulaGraph\u67e5\u8be2\u8bed\u8a00\u7684\u57fa\u7840\u8bed\u6cd5\uff0c\u5305\u62ec\u7528\u4e8e Schema \u521b\u5efa\u548c\u5e38\u7528\u589e\u5220\u6539\u67e5\u64cd\u4f5c\u7684\u8bed\u53e5\u3002 \u5982\u9700\u4e86\u89e3\u66f4\u591a\u8bed\u53e5\u7684\u7528\u6cd5\uff0c\u53c2\u89c1 nGQL \u6307\u5357 \u3002","title":"\u4f7f\u7528\u5e38\u7528 nGQL\uff08CRUD \u547d\u4ee4\uff09"},{"location":"2.quick-start/3.quick-start-on-premise/4.nebula-graph-crud/#_1","text":"","title":"\u4f7f\u7528\u8bf4\u660e"},{"location":"2.quick-start/3.quick-start-on-premise/4.nebula-graph-crud/#schema","text":"\u4e00\u4e2aNebulaGraph\u5b9e\u4f8b\u7531\u4e00\u4e2a\u6216\u591a\u4e2a\u56fe\u7a7a\u95f4\u7ec4\u6210\u3002\u6bcf\u4e2a\u56fe\u7a7a\u95f4\u90fd\u662f\u7269\u7406\u9694\u79bb\u7684\uff0c\u7528\u6237\u53ef\u4ee5\u5728\u540c\u4e00\u4e2a\u5b9e\u4f8b\u4e2d\u4f7f\u7528\u4e0d\u540c\u7684\u56fe\u7a7a\u95f4\u5b58\u50a8\u4e0d\u540c\u7684\u6570\u636e\u96c6\u3002 \u4e3a\u4e86\u5728\u56fe\u7a7a\u95f4\u4e2d\u63d2\u5165\u6570\u636e\uff0c\u9700\u8981\u4e3a\u56fe\u6570\u636e\u5e93\u5b9a\u4e49\u4e00\u4e2a Schema\u3002NebulaGraph\u7684 Schema \u662f\u7531\u5982\u4e0b\u51e0\u90e8\u5206\u7ec4\u6210\u3002 \u7ec4\u6210\u90e8\u5206 \u8bf4\u660e \u70b9\uff08Vertex\uff09 \u8868\u793a\u73b0\u5b9e\u4e16\u754c\u4e2d\u7684\u5b9e\u4f53\u3002\u4e00\u4e2a\u70b9\u53ef\u4ee5\u6709 0 \u5230\u591a\u4e2a\u6807\u7b7e\u3002 \u6807\u7b7e\uff08Tag\uff09 \u70b9\u7684\u7c7b\u578b\uff0c\u5b9a\u4e49\u4e86\u4e00\u7ec4\u63cf\u8ff0\u70b9\u7c7b\u578b\u7684\u5c5e\u6027\u3002 \u8fb9\uff08Edge\uff09 \u8868\u793a\u4e24\u4e2a\u70b9\u4e4b\u95f4 \u6709\u65b9\u5411 \u7684\u5173\u7cfb\u3002 \u8fb9\u7c7b\u578b\uff08Edge type\uff09 \u8fb9\u7684\u7c7b\u578b\uff0c\u5b9a\u4e49\u4e86\u4e00\u7ec4\u63cf\u8ff0\u8fb9\u7684\u7c7b\u578b\u7684\u5c5e\u6027\u3002 \u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u89c1 \u6570\u636e\u7ed3\u6784 \u3002 \u672c\u6587\u5c06\u4f7f\u7528\u4e0b\u56fe\u7684\u6570\u636e\u96c6\u6f14\u793a\u57fa\u7840\u64cd\u4f5c\u7684\u8bed\u6cd5\u3002","title":"\u56fe\u7a7a\u95f4\u548c Schema"},{"location":"2.quick-start/3.quick-start-on-premise/4.nebula-graph-crud/#_2","text":"Caution \u5728NebulaGraph\u4e2d\uff0c\u4e0b\u5217\u521b\u5efa\u548c\u4fee\u6539\u64cd\u4f5c\u662f\u5f02\u6b65\u5b9e\u73b0\u7684\u3002\u8981\u5728 \u4e0b\u4e00\u4e2a \u5fc3\u8df3\u5468\u671f\u4e4b\u540e\u624d\u80fd\u751f\u6548\uff0c\u5426\u5219\u8bbf\u95ee\u4f1a\u62a5\u9519\u3002\u4e3a\u786e\u4fdd\u6570\u636e\u540c\u6b65\uff0c\u540e\u7eed\u64cd\u4f5c\u80fd\u987a\u5229\u8fdb\u884c\uff0c\u8bf7\u7b49\u5f85 2 \u4e2a\u5fc3\u8df3\u5468\u671f\uff0820 \u79d2\uff09\u3002 CREATE SPACE CREATE TAG CREATE EDGE ALTER TAG ALTER EDGE CREATE TAG INDEX CREATE EDGE INDEX Note \u9ed8\u8ba4\u5fc3\u8df3\u5468\u671f\u662f 10 \u79d2\u3002\u4fee\u6539\u5fc3\u8df3\u5468\u671f\u53c2\u6570 heartbeat_interval_secs \uff0c\u8bf7\u53c2\u89c1 \u914d\u7f6e\u7b80\u4ecb \u3002","title":"\u5f02\u6b65\u5b9e\u73b0\u521b\u5efa\u548c\u4fee\u6539"},{"location":"2.quick-start/3.quick-start-on-premise/4.nebula-graph-crud/#_3","text":"","title":"\u7b2c\u4e00\u6b65\uff1a\u521b\u5efa\u548c\u9009\u62e9\u56fe\u7a7a\u95f4"},{"location":"2.quick-start/3.quick-start-on-premise/4.nebula-graph-crud/#ngql","text":"\u521b\u5efa\u56fe\u7a7a\u95f4 CREATE SPACE [IF NOT EXISTS] <graph_space_name> ( [partition_num = <partition_number>,] [replica_factor = <replica_number>,] vid_type = {FIXED_STRING(<N>) | INT64} ) [COMMENT = '<comment>']; \u53c2\u6570\u8be6\u60c5\u8bf7\u53c2\u89c1 CREATE SPACE \u3002 \u5217\u51fa\u521b\u5efa\u6210\u529f\u7684\u56fe\u7a7a\u95f4 nebula> SHOW SPACES; \u9009\u62e9\u6570\u636e\u5e93 USE <graph_space_name>;","title":"nGQL \u8bed\u6cd5"},{"location":"2.quick-start/3.quick-start-on-premise/4.nebula-graph-crud/#_4","text":"\u6267\u884c\u5982\u4e0b\u8bed\u53e5\u521b\u5efa\u540d\u4e3a basketballplayer \u7684\u56fe\u7a7a\u95f4\u3002 nebula> CREATE SPACE basketballplayer(partition_num=15, replica_factor=1, vid_type=fixed_string(30)); Note \u5982\u679c\u62a5\u9519\u63d0\u793a [ERROR (-1005)]: Host not enough! \uff0c\u8bf7\u68c0\u67e5\u662f\u5426\u5df2 \u6dfb\u52a0 Storage \u4e3b\u673a \u3002 \u6267\u884c\u547d\u4ee4 SHOW HOSTS \u68c0\u67e5\u5206\u7247\u7684\u5206\u5e03\u60c5\u51b5\uff0c\u786e\u4fdd\u5e73\u8861\u5206\u5e03\u3002 nebula> SHOW HOSTS; +-------------+-----------+-----------+--------------+----------------------------------+------------------------+---------+ | Host | Port | Status | Leader count | Leader distribution | Partition distribution | Version | +-------------+-----------+-----------+--------------+----------------------------------+------------------------+---------+ | \"storaged0\" | 9779 | \"ONLINE\" | 5 | \"basketballplayer:5\" | \"basketballplayer:5\" | \"3.6.0\" | | \"storaged1\" | 9779 | \"ONLINE\" | 5 | \"basketballplayer:5\" | \"basketballplayer:5\" | \"3.6.0\" | | \"storaged2\" | 9779 | \"ONLINE\" | 5 | \"basketballplayer:5\" | \"basketballplayer:5\" | \"3.6.0\" | +-------------+-----------+-----------+--------------+----------------------------------+------------------------+---------+ \u5982\u679c Leader distribution \u5206\u5e03\u4e0d\u5747\u5300\uff0c\u8bf7\u6267\u884c\u547d\u4ee4 BALANCE LEADER \u91cd\u65b0\u5206\u914d\u3002\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u89c1 Storage \u8d1f\u8f7d\u5747\u8861 \u3002 \u9009\u62e9\u56fe\u7a7a\u95f4 basketballplayer \u3002 nebula[(none)]> USE basketballplayer; \u7528\u6237\u53ef\u4ee5\u6267\u884c\u547d\u4ee4 SHOW SPACES \u67e5\u770b\u521b\u5efa\u7684\u56fe\u7a7a\u95f4\u3002 nebula> SHOW SPACES; +--------------------+ | Name | +--------------------+ | \"basketballplayer\" | +--------------------+","title":"\u793a\u4f8b"},{"location":"2.quick-start/3.quick-start-on-premise/4.nebula-graph-crud/#tag_edge_type","text":"","title":"\u7b2c\u4e8c\u6b65\uff1a\u521b\u5efa Tag \u548c Edge type"},{"location":"2.quick-start/3.quick-start-on-premise/4.nebula-graph-crud/#ngql_1","text":"CREATE {TAG | EDGE} [IF NOT EXISTS] {<tag_name> | <edge_type_name>} ( <prop_name> <data_type> [NULL | NOT NULL] [DEFAULT <default_value>] [COMMENT '<comment>'] [{, <prop_name> <data_type> [NULL | NOT NULL] [DEFAULT <default_value>] [COMMENT '<comment>']} ...] ) [TTL_DURATION = <ttl_duration>] [TTL_COL = <prop_name>] [COMMENT = '<comment>']; \u53c2\u6570\u8be6\u60c5\u8bf7\u53c2\u89c1 CREATE TAG \u548c CREATE EDGE \u3002","title":"nGQL \u8bed\u6cd5"},{"location":"2.quick-start/3.quick-start-on-premise/4.nebula-graph-crud/#_5","text":"\u521b\u5efa Tag: player \u548c team \uff0c\u4ee5\u53ca Edge type: follow \u548c serve \u3002\u8bf4\u660e\u5982\u4e0b\u8868\u3002 \u540d\u79f0 \u7c7b\u578b \u5c5e\u6027 player Tag name (string), age (int) team Tag name (string) follow Edge type degree (int) serve Edge type start_year (int), end_year (int) nebula> CREATE TAG player(name string, age int); nebula> CREATE TAG team(name string); nebula> CREATE EDGE follow(degree int); nebula> CREATE EDGE serve(start_year int, end_year int);","title":"\u793a\u4f8b"},{"location":"2.quick-start/3.quick-start-on-premise/4.nebula-graph-crud/#_6","text":"\u7528\u6237\u53ef\u4ee5\u4f7f\u7528 INSERT \u8bed\u53e5\uff0c\u57fa\u4e8e\u73b0\u6709\u7684 Tag \u63d2\u5165\u70b9\uff0c\u6216\u8005\u57fa\u4e8e\u73b0\u6709\u7684 Edge type \u63d2\u5165\u8fb9\u3002","title":"\u7b2c\u4e09\u6b65\uff1a\u63d2\u5165\u6570\u636e"},{"location":"2.quick-start/3.quick-start-on-premise/4.nebula-graph-crud/#ngql_2","text":"\u63d2\u5165\u70b9 INSERT VERTEX [IF NOT EXISTS] [tag_props, [tag_props] ...] VALUES <vid>: ([prop_value_list]) tag_props: tag_name ([prop_name_list]) prop_name_list: [prop_name [, prop_name] ...] prop_value_list: [prop_value [, prop_value] ...] vid \u662f Vertex ID \u7684\u7f29\u5199\uff0c vid \u5728\u4e00\u4e2a\u56fe\u7a7a\u95f4\u4e2d\u662f\u552f\u4e00\u7684\u3002\u53c2\u6570\u8be6\u60c5\u8bf7\u53c2\u89c1 INSERT VERTEX \u3002 \u63d2\u5165\u8fb9 INSERT EDGE [IF NOT EXISTS] <edge_type> ( <prop_name_list> ) VALUES <src_vid> -> <dst_vid>[@<rank>] : ( <prop_value_list> ) [, <src_vid> -> <dst_vid>[@<rank>] : ( <prop_value_list> ), ...]; <prop_name_list> ::= [ <prop_name> [, <prop_name> ] ...] <prop_value_list> ::= [ <prop_value> [, <prop_value> ] ...] \u53c2\u6570\u8be6\u60c5\u8bf7\u53c2\u89c1 INSERT EDGE \u3002","title":"nGQL \u8bed\u6cd5"},{"location":"2.quick-start/3.quick-start-on-premise/4.nebula-graph-crud/#_7","text":"\u63d2\u5165\u4ee3\u8868\u7403\u5458\u548c\u7403\u961f\u7684\u70b9\u3002 nebula> INSERT VERTEX player(name, age) VALUES \"player100\":(\"Tim Duncan\", 42); nebula> INSERT VERTEX player(name, age) VALUES \"player101\":(\"Tony Parker\", 36); nebula> INSERT VERTEX player(name, age) VALUES \"player102\":(\"LaMarcus Aldridge\", 33); nebula> INSERT VERTEX team(name) VALUES \"team203\":(\"Trail Blazers\"), \"team204\":(\"Spurs\"); \u63d2\u5165\u4ee3\u8868\u7403\u5458\u548c\u7403\u961f\u4e4b\u95f4\u5173\u7cfb\u7684\u8fb9\u3002 nebula> INSERT EDGE follow(degree) VALUES \"player101\" -> \"player100\":(95); nebula> INSERT EDGE follow(degree) VALUES \"player101\" -> \"player102\":(90); nebula> INSERT EDGE follow(degree) VALUES \"player102\" -> \"player100\":(75); nebula> INSERT EDGE serve(start_year, end_year) VALUES \"player101\" -> \"team204\":(1999, 2018),\"player102\" -> \"team203\":(2006, 2015);","title":"\u793a\u4f8b"},{"location":"2.quick-start/3.quick-start-on-premise/4.nebula-graph-crud/#_8","text":"GO \u8bed\u53e5\u53ef\u4ee5\u6839\u636e\u6307\u5b9a\u7684\u6761\u4ef6\u904d\u5386\u6570\u636e\u5e93\u3002 GO \u8bed\u53e5\u4ece\u4e00\u4e2a\u6216\u591a\u4e2a\u70b9\u5f00\u59cb\uff0c\u6cbf\u7740\u4e00\u6761\u6216\u591a\u6761\u8fb9\u904d\u5386\uff0c\u8fd4\u56de YIELD \u5b50\u53e5\u4e2d\u6307\u5b9a\u7684\u4fe1\u606f\u3002 FETCH \u8bed\u53e5\u53ef\u4ee5\u83b7\u5f97\u70b9\u6216\u8fb9\u7684\u5c5e\u6027\u3002 LOOKUP \u8bed\u53e5\u662f\u57fa\u4e8e \u7d22\u5f15 \u7684\uff0c\u548c WHERE \u5b50\u53e5\u4e00\u8d77\u4f7f\u7528\uff0c\u67e5\u627e\u7b26\u5408\u7279\u5b9a\u6761\u4ef6\u7684\u6570\u636e\u3002 MATCH \u8bed\u53e5\u662f\u67e5\u8be2\u56fe\u6570\u636e\u6700\u5e38\u7528\u7684\uff0c\u53ef\u4ee5\u7075\u6d3b\u7684\u63cf\u8ff0\u5404\u79cd\u56fe\u6a21\u5f0f\uff0c\u4f46\u662f\u5b83\u4f9d\u8d56 \u7d22\u5f15 \u53bb\u5339\u914dNebulaGraph\u4e2d\u7684\u6570\u636e\u6a21\u578b\uff0c\u6027\u80fd\u4e5f\u8fd8\u9700\u8981\u8c03\u4f18\u3002","title":"\u7b2c\u56db\u6b65\uff1a\u67e5\u8be2\u6570\u636e"},{"location":"2.quick-start/3.quick-start-on-premise/4.nebula-graph-crud/#ngql_3","text":"GO GO [[<M> TO] <N> {STEP|STEPS}] FROM <vertex_list> OVER <edge_type_list> [{REVERSELY | BIDIRECT}] [ WHERE <conditions> ] YIELD [DISTINCT] <return_list> [{ SAMPLE <sample_list> | <limit_by_list_clause> }] [| GROUP BY {<col_name> | expression> | <position>} YIELD <col_name>] [| ORDER BY <expression> [{ASC | DESC}]] [| LIMIT [<offset>,] <number_rows>]; FETCH \u67e5\u8be2 Tag \u5c5e\u6027 FETCH PROP ON {<tag_name>[, tag_name ...] | *} <vid> [, vid ...] YIELD <return_list> [AS <alias>]; \u67e5\u8be2\u8fb9\u5c5e\u6027 FETCH PROP ON <edge_type> <src_vid> -> <dst_vid>[@<rank>] [, <src_vid> -> <dst_vid> ...] YIELD <output>; LOOKUP LOOKUP ON {<vertex_tag> | <edge_type>} [WHERE <expression> [AND <expression> ...]] YIELD <return_list> [AS <alias>]; <return_list> <prop_name> [AS <col_alias>] [, <prop_name> [AS <prop_alias>] ...]; MATCH MATCH <pattern> [<clause_1>] RETURN <output> [<clause_2>];","title":"nGQL \u8bed\u6cd5"},{"location":"2.quick-start/3.quick-start-on-premise/4.nebula-graph-crud/#go","text":"\u4ece VID \u4e3a player101 \u7684\u7403\u5458\u5f00\u59cb\uff0c\u6cbf\u7740\u8fb9 follow \u627e\u5230\u8fde\u63a5\u7684\u7403\u5458\u3002 nebula> GO FROM \"player101\" OVER follow YIELD id($$); +-------------+ | id($$) | +-------------+ | \"player100\" | | \"player102\" | +-------------+ \u4ece VID \u4e3a player101 \u7684\u7403\u5458\u5f00\u59cb\uff0c\u6cbf\u7740\u8fb9 follow \u67e5\u627e\u5e74\u9f84\u5927\u4e8e\u6216\u7b49\u4e8e 35 \u5c81\u7684\u7403\u5458\uff0c\u5e76\u8fd4\u56de\u4ed6\u4eec\u7684\u59d3\u540d\u548c\u5e74\u9f84\uff0c\u540c\u65f6\u91cd\u547d\u540d\u5bf9\u5e94\u7684\u5217\u3002 nebula> GO FROM \"player101\" OVER follow WHERE properties($$).age >= 35 \\ YIELD properties($$).name AS Teammate, properties($$).age AS Age; +-----------------+-----+ | Teammate | Age | +-----------------+-----+ | \"Tim Duncan\" | 42 | +-----------------+-----+ \u5b50\u53e5/\u7b26\u53f7 \u8bf4\u660e YIELD \u6307\u5b9a\u8be5\u67e5\u8be2\u9700\u8981\u8fd4\u56de\u7684\u503c\u6216\u7ed3\u679c\u3002 $$ \u8868\u793a\u8fb9\u7684\u7ec8\u70b9\u3002 \\ \u8868\u793a\u6362\u884c\u7ee7\u7eed\u8f93\u5165\u3002 \u4ece VID \u4e3a player101 \u7684\u7403\u5458\u5f00\u59cb\uff0c\u6cbf\u7740\u8fb9 follow \u67e5\u627e\u8fde\u63a5\u7684\u7403\u5458\uff0c\u7136\u540e\u68c0\u7d22\u8fd9\u4e9b\u7403\u5458\u7684\u7403\u961f\u3002\u4e3a\u4e86\u5408\u5e76\u8fd9\u4e24\u4e2a\u67e5\u8be2\u8bf7\u6c42\uff0c\u53ef\u4ee5\u4f7f\u7528\u7ba1\u9053\u7b26\u6216\u4e34\u65f6\u53d8\u91cf\u3002 \u4f7f\u7528\u7ba1\u9053\u7b26 nebula> GO FROM \"player101\" OVER follow YIELD dst(edge) AS id | \\ GO FROM $-.id OVER serve YIELD properties($$).name AS Team, \\ properties($^).name AS Player; +-----------------+---------------------+ | Team | Player | +-----------------+---------------------+ | \"Trail Blazers\" | \"LaMarcus Aldridge\" | +-----------------+---------------------+ \u5b50\u53e5/\u7b26\u53f7 \u8bf4\u660e $^ \u8868\u793a\u8fb9\u7684\u8d77\u70b9\u3002 | \u7ec4\u5408\u591a\u4e2a\u67e5\u8be2\u7684\u7ba1\u9053\u7b26\uff0c\u5c06\u524d\u4e00\u4e2a\u67e5\u8be2\u7684\u7ed3\u679c\u96c6\u7528\u4e8e\u540e\u4e00\u4e2a\u67e5\u8be2\u3002 $- \u8868\u793a\u7ba1\u9053\u7b26\u524d\u9762\u7684\u67e5\u8be2\u8f93\u51fa\u7684\u7ed3\u679c\u96c6\u3002 \u4f7f\u7528\u4e34\u65f6\u53d8\u91cf Note \u5f53\u590d\u5408\u8bed\u53e5\u4f5c\u4e3a\u4e00\u4e2a\u6574\u4f53\u63d0\u4ea4\u7ed9\u670d\u52a1\u5668\u65f6\uff0c\u5176\u4e2d\u7684\u4e34\u65f6\u53d8\u91cf\u4f1a\u5728\u8bed\u53e5\u7ed3\u675f\u65f6\u88ab\u91ca\u653e\u3002 nebula> $var = GO FROM \"player101\" OVER follow YIELD dst(edge) AS id; \\ GO FROM $var.id OVER serve YIELD properties($$).name AS Team, \\ properties($^).name AS Player; +-----------------+---------------------+ | Team | Player | +-----------------+---------------------+ | \"Trail Blazers\" | \"LaMarcus Aldridge\" | +-----------------+---------------------+","title":"GO\u8bed\u53e5\u793a\u4f8b"},{"location":"2.quick-start/3.quick-start-on-premise/4.nebula-graph-crud/#fetch","text":"\u67e5\u8be2 VID \u4e3a player100 \u7684\u7403\u5458\u7684\u5c5e\u6027\u3002 nebula> FETCH PROP ON player \"player100\" YIELD properties(vertex); +-------------------------------+ | properties(VERTEX) | +-------------------------------+ | {age: 42, name: \"Tim Duncan\"} | +-------------------------------+ Note LOOKUP \u548c MATCH \u7684\u793a\u4f8b\u5728\u4e0b\u6587\u7684 \u7d22\u5f15 \u90e8\u5206\u67e5\u770b\u3002","title":"FETCH\u8bed\u53e5\u793a\u4f8b"},{"location":"2.quick-start/3.quick-start-on-premise/4.nebula-graph-crud/#_9","text":"","title":"\u5176\u4ed6\u64cd\u4f5c"},{"location":"2.quick-start/3.quick-start-on-premise/4.nebula-graph-crud/#_10","text":"\u7528\u6237\u53ef\u4ee5\u4f7f\u7528 UPDATE \u8bed\u53e5\u6216 UPSERT \u8bed\u53e5\u4fee\u6539\u73b0\u6709\u6570\u636e\u3002 UPSERT \u662f UPDATE \u548c INSERT \u7684\u7ed3\u5408\u4f53\u3002\u5f53\u4f7f\u7528 UPSERT \u66f4\u65b0\u4e00\u4e2a\u70b9\u6216\u8fb9\uff0c\u5982\u679c\u5b83\u4e0d\u5b58\u5728\uff0c\u6570\u636e\u5e93\u4f1a\u81ea\u52a8\u63d2\u5165\u4e00\u4e2a\u65b0\u7684\u70b9\u6216\u8fb9\u3002 Note \u6bcf\u4e2a partition \u5185\u90e8\uff0c UPSERT \u64cd\u4f5c\u662f\u4e00\u4e2a\u4e32\u884c\u64cd\u4f5c\uff0c\u6240\u4ee5\u6267\u884c\u901f\u5ea6\u6bd4\u6267\u884c INSERT \u6216 UPDATE \u6162\u5f88\u591a\u3002\u5176\u4ec5\u5728\u591a\u4e2a partition \u4e4b\u95f4\u6709\u5e76\u53d1\u3002","title":"\u4fee\u6539\u70b9\u548c\u8fb9"},{"location":"2.quick-start/3.quick-start-on-premise/4.nebula-graph-crud/#ngql_4","text":"UPDATE \u70b9 UPDATE VERTEX <vid> SET <properties to be updated> [WHEN <condition>] [YIELD <columns>]; UPDATE \u8fb9 UPDATE EDGE ON <edge_type> <source vid> -> <destination vid> [@rank] SET <properties to be updated> [WHEN <condition>] [YIELD <columns to be output>]; UPSERT \u70b9\u6216\u8fb9 UPSERT {VERTEX <vid> | EDGE <edge_type>} SET <update_columns> [WHEN <condition>] [YIELD <columns>];","title":"nGQL \u8bed\u6cd5"},{"location":"2.quick-start/3.quick-start-on-premise/4.nebula-graph-crud/#_11","text":"\u7528 UPDATE \u4fee\u6539 VID \u4e3a player100 \u7684\u7403\u5458\u7684 name \u5c5e\u6027\uff0c\u7136\u540e\u7528 FETCH \u8bed\u53e5\u68c0\u67e5\u7ed3\u679c\u3002 nebula> UPDATE VERTEX \"player100\" SET player.name = \"Tim\"; nebula> FETCH PROP ON player \"player100\" YIELD properties(vertex); +------------------------+ | properties(VERTEX) | +------------------------+ | {age: 42, name: \"Tim\"} | +------------------------+ \u7528 UPDATE \u4fee\u6539\u67d0\u6761\u8fb9\u7684 degree \u5c5e\u6027\uff0c\u7136\u540e\u7528 FETCH \u68c0\u67e5\u7ed3\u679c\u3002 nebula> UPDATE EDGE ON follow \"player101\" -> \"player100\" SET degree = 96; nebula> FETCH PROP ON follow \"player101\" -> \"player100\" YIELD properties(edge); +------------------+ | properties(EDGE) | +------------------+ | {degree: 96} | +------------------+ \u7528 INSERT \u63d2\u5165\u4e00\u4e2a VID \u4e3a player111 \u7684\u70b9\uff0c\u7136\u540e\u7528 UPSERT \u66f4\u65b0\u5b83\u3002 nebula> INSERT VERTEX player(name,age) VALUES \"player111\":(\"David West\", 38); nebula> UPSERT VERTEX \"player111\" SET player.name = \"David\", player.age = $^.player.age + 11 \\ WHEN $^.player.name == \"David West\" AND $^.player.age > 20 \\ YIELD $^.player.name AS Name, $^.player.age AS Age; +---------+-----+ | Name | Age | +---------+-----+ | \"David\" | 49 | +---------+-----+","title":"\u793a\u4f8b"},{"location":"2.quick-start/3.quick-start-on-premise/4.nebula-graph-crud/#_12","text":"","title":"\u5220\u9664\u70b9\u548c\u8fb9"},{"location":"2.quick-start/3.quick-start-on-premise/4.nebula-graph-crud/#ngql_5","text":"\u5220\u9664\u70b9 DELETE VERTEX <vid1>[, <vid2>...] \u5220\u9664\u8fb9 DELETE EDGE <edge_type> <src_vid> -> <dst_vid>[@<rank>] [, <src_vid> -> <dst_vid>...]","title":"nGQL \u8bed\u6cd5"},{"location":"2.quick-start/3.quick-start-on-premise/4.nebula-graph-crud/#_13","text":"\u5220\u9664\u70b9 nebula> DELETE VERTEX \"player111\", \"team203\"; \u5220\u9664\u8fb9 nebula> DELETE EDGE follow \"player101\" -> \"team204\";","title":"\u793a\u4f8b"},{"location":"2.quick-start/3.quick-start-on-premise/4.nebula-graph-crud/#_14","text":"\u7528\u6237\u53ef\u4ee5\u901a\u8fc7 CREATE INDEX \u8bed\u53e5\u4e3a Tag \u548c Edge type \u589e\u52a0\u7d22\u5f15\u3002 \u4f7f\u7528\u7d22\u5f15\u5fc5\u8bfb MATCH \u548c LOOKUP \u8bed\u53e5\u7684\u6267\u884c\u90fd\u4f9d\u8d56\u7d22\u5f15\uff0c\u4f46\u662f\u7d22\u5f15\u4f1a\u5bfc\u81f4\u5199\u6027\u80fd\u5927\u5e45\u964d\u4f4e \u3002\u8bf7 \u4e0d\u8981\u968f\u610f \u5728\u751f\u4ea7\u73af\u5883\u4e2d\u4f7f\u7528\u7d22\u5f15\uff0c\u9664\u975e\u5f88\u6e05\u695a\u4f7f\u7528\u7d22\u5f15\u5bf9\u4e1a\u52a1\u7684\u5f71\u54cd\u3002 \u5fc5\u987b \u4e3a\u201c\u5df2\u5199\u5165\u4f46\u672a\u6784\u5efa\u7d22\u5f15\u201d\u7684\u6570\u636e\u91cd\u5efa\u7d22\u5f15\uff0c\u5426\u5219\u65e0\u6cd5\u5728 MATCH \u548c LOOKUP \u8bed\u53e5\u4e2d\u8fd4\u56de\u8fd9\u4e9b\u6570\u636e\u3002\u53c2\u89c1 \u91cd\u5efa\u7d22\u5f15 \u3002","title":"\u4f7f\u7528\u7d22\u5f15"},{"location":"2.quick-start/3.quick-start-on-premise/4.nebula-graph-crud/#ngql_6","text":"\u521b\u5efa\u7d22\u5f15 CREATE {TAG | EDGE} INDEX [IF NOT EXISTS] <index_name> ON {<tag_name> | <edge_name>} ([<prop_name_list>]) [COMMENT = '<comment>']; \u91cd\u5efa\u7d22\u5f15 REBUILD {TAG | EDGE} INDEX <index_name>; Note \u4e3a\u6ca1\u6709\u6307\u5b9a\u957f\u5ea6\u7684\u53d8\u91cf\u5c5e\u6027\u521b\u5efa\u7d22\u5f15\u65f6\uff0c\u9700\u8981\u6307\u5b9a\u7d22\u5f15\u957f\u5ea6\u3002\u5728 utf-8 \u7f16\u7801\u4e2d\uff0c\u4e00\u4e2a\u4e2d\u6587\u5b57\u7b26\u5360 3 \u5b57\u8282\uff0c\u8bf7\u6839\u636e\u53d8\u91cf\u5c5e\u6027\u957f\u5ea6\u8bbe\u7f6e\u5408\u9002\u7684\u7d22\u5f15\u957f\u5ea6\u3002\u4f8b\u5982 10 \u4e2a\u4e2d\u6587\u5b57\u7b26\uff0c\u7d22\u5f15\u957f\u5ea6\u9700\u8981\u4e3a 30\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1 \u521b\u5efa\u7d22\u5f15 \u3002","title":"nGQL \u8bed\u6cd5"},{"location":"2.quick-start/3.quick-start-on-premise/4.nebula-graph-crud/#lookupmatch","text":"\u786e\u4fdd LOOKUP \u6216 MATCH \u6709\u4e00\u4e2a\u7d22\u5f15\u53ef\u7528\u3002\u5982\u679c\u6ca1\u6709\uff0c\u8bf7\u5148\u521b\u5efa\u7d22\u5f15\u3002 \u627e\u5230 Tag \u4e3a player \u7684\u70b9\u7684\u4fe1\u606f\uff0c\u5b83\u7684 name \u5c5e\u6027\u503c\u4e3a Tony Parker \u3002 // \u4e3a name \u5c5e\u6027\u521b\u5efa\u7d22\u5f15 player_index_1\u3002 nebula> CREATE TAG INDEX IF NOT EXISTS player_index_1 ON player(name(20)); // \u91cd\u5efa\u7d22\u5f15\u786e\u4fdd\u80fd\u5bf9\u5df2\u5b58\u5728\u6570\u636e\u751f\u6548\u3002 nebula> REBUILD TAG INDEX player_index_1 +------------+ | New Job Id | +------------+ | 31 | +------------+ // \u4f7f\u7528 LOOKUP \u8bed\u53e5\u68c0\u7d22\u70b9\u7684\u5c5e\u6027\u3002 nebula> LOOKUP ON player WHERE player.name == \"Tony Parker\" \\ YIELD properties(vertex).name AS name, properties(vertex).age AS age; +---------------+-----+ | name | age | +---------------+-----+ | \"Tony Parker\" | 36 | +---------------+-----+ // \u4f7f\u7528 MATCH \u8bed\u53e5\u68c0\u7d22\u70b9\u7684\u5c5e\u6027\u3002 nebula> MATCH (v:player{name:\"Tony Parker\"}) RETURN v; +-----------------------------------------------------+ | v | +-----------------------------------------------------+ | (\"player101\" :player{age: 36, name: \"Tony Parker\"}) | +-----------------------------------------------------+","title":"\u57fa\u4e8e\u7d22\u5f15\u7684LOOKUP\u548cMATCH\u793a\u4f8b"},{"location":"2.quick-start/3.quick-start-on-premise/5.start-stop-service/","text":"\u542f\u52a8NebulaGraph\u670d\u52a1 \u00b6 NebulaGraph\u652f\u6301\u901a\u8fc7\u811a\u672c\u7ba1\u7406\u670d\u52a1\u3002 \u4f7f\u7528\u811a\u672c\u7ba1\u7406\u670d\u52a1 \u00b6 \u4f7f\u7528\u811a\u672c nebula.service \u7ba1\u7406\u670d\u52a1\uff0c\u5305\u62ec\u542f\u52a8\u3001\u505c\u6b62\u3001\u91cd\u542f\u3001\u4e2d\u6b62\u548c\u67e5\u770b\u3002 Note nebula.service \u7684\u9ed8\u8ba4\u8def\u5f84\u662f /usr/local/nebula/scripts \uff0c\u5982\u679c\u4fee\u6539\u8fc7\u5b89\u88c5\u8def\u5f84\uff0c\u8bf7\u4f7f\u7528\u5b9e\u9645\u8def\u5f84\u3002 \u8bed\u6cd5 \u00b6 $ sudo /usr/local/nebula/scripts/nebula.service [ -v ] [ -c <config_file_path> ] <start | stop | restart | kill | status> <metad | graphd | storaged | all> \u53c2\u6570 \u8bf4\u660e -v \u663e\u793a\u8be6\u7ec6\u8c03\u8bd5\u4fe1\u606f\u3002 -c \u6307\u5b9a\u914d\u7f6e\u6587\u4ef6\u8def\u5f84\uff0c\u9ed8\u8ba4\u8def\u5f84\u4e3a /usr/local/nebula/etc/ \u3002 start \u542f\u52a8\u670d\u52a1\u3002 stop \u505c\u6b62\u670d\u52a1\u3002 restart \u91cd\u542f\u670d\u52a1\u3002 kill \u4e2d\u6b62\u670d\u52a1\u3002 status \u67e5\u770b\u670d\u52a1\u72b6\u6001\u3002 metad \u7ba1\u7406 Meta \u670d\u52a1\u3002 graphd \u7ba1\u7406 Graph \u670d\u52a1\u3002 storaged \u7ba1\u7406 Storage \u670d\u52a1\u3002 all \u7ba1\u7406\u6240\u6709\u670d\u52a1\u3002 \u542f\u52a8NebulaGraph\u670d\u52a1 \u00b6 \u6267\u884c\u5982\u4e0b\u547d\u4ee4\u542f\u52a8\u670d\u52a1\uff1a $ sudo /usr/local/nebula/scripts/nebula.service start all [ INFO ] Starting nebula-metad... [ INFO ] Done [ INFO ] Starting nebula-graphd... [ INFO ] Done [ INFO ] Starting nebula-storaged... [ INFO ] Done \u505c\u6b62NebulaGraph\u670d\u52a1 \u00b6 Danger \u8bf7\u52ff\u4f7f\u7528 kill -9 \u547d\u4ee4\u5f3a\u5236\u7ec8\u6b62\u8fdb\u7a0b\uff0c\u5426\u5219\u53ef\u80fd\u8f83\u5c0f\u6982\u7387\u51fa\u73b0\u6570\u636e\u4e22\u5931\u3002 \u6267\u884c\u5982\u4e0b\u547d\u4ee4\u505c\u6b62NebulaGraph\u670d\u52a1\uff1a $ sudo /usr/local/nebula/scripts/nebula.service stop all [ INFO ] Stopping nebula-metad... [ INFO ] Done [ INFO ] Stopping nebula-graphd... [ INFO ] Done [ INFO ] Stopping nebula-storaged... [ INFO ] Done \u67e5\u770bNebulaGraph\u670d\u52a1 \u00b6 \u6267\u884c\u5982\u4e0b\u547d\u4ee4\u67e5\u770bNebulaGraph\u670d\u52a1\u72b6\u6001\uff1a $ sudo /usr/local/nebula/scripts/nebula.service status all \u5982\u679c\u8fd4\u56de\u5982\u4e0b\u7ed3\u679c\uff0c\u8868\u793aNebulaGraph\u670d\u52a1\u6b63\u5e38\u8fd0\u884c\u3002 [ INFO ] nebula-metad ( 33fd35e ) : Running as 29020 , Listening on 9559 [ INFO ] nebula-graphd ( 33fd35e ) : Running as 29095 , Listening on 9669 [ WARN ] nebula-storaged after v3.0.0 will not start service until it is added to cluster. [ WARN ] See Manage Storage hosts:ADD HOSTS in https://docs.nebula-graph.io/ [ INFO ] nebula-storaged ( 33fd35e ) : Running as 29147 , Listening on 9779 Note \u6b63\u5e38\u542f\u52a8NebulaGraph\u540e\uff0c nebula-storaged \u8fdb\u7a0b\u7684\u7aef\u53e3\u663e\u793a\u7ea2\u8272\u3002\u8fd9\u662f\u56e0\u4e3a nebula-storaged \u5728\u542f\u52a8\u6d41\u7a0b\u4e2d\u4f1a\u7b49\u5f85 nebula-metad \u6dfb\u52a0\u5f53\u524d Storage \u670d\u52a1\uff0c\u5f53\u524d Storage \u670d\u52a1\u6536\u5230 Ready \u4fe1\u53f7\u540e\u624d\u4f1a\u6b63\u5f0f\u542f\u52a8\u670d\u52a1\u3002\u4ece 3.0.0 \u7248\u672c\u5f00\u59cb\uff0c\u5728\u914d\u7f6e\u6587\u4ef6\u4e2d\u6dfb\u52a0\u7684 Storage \u8282\u70b9\u65e0\u6cd5\u76f4\u63a5\u8bfb\u5199\uff0c\u914d\u7f6e\u6587\u4ef6\u7684\u4f5c\u7528\u4ec5\u4ec5\u662f\u5c06 Storage \u8282\u70b9\u6ce8\u518c\u81f3 Meta \u670d\u52a1\u4e2d\u3002\u5fc5\u987b\u4f7f\u7528 ADD HOSTS \u547d\u4ee4\u540e\uff0c\u624d\u80fd\u6b63\u5e38\u8bfb\u5199 Storage \u8282\u70b9\u3002\u66f4\u591a\u4fe1\u606f\uff0c\u53c2\u89c1 \u7ba1\u7406 Storage \u4e3b\u673a \u3002 \u5982\u679c\u8fd4\u56de\u7c7b\u4f3c\u5982\u4e0b\u7ed3\u679c\uff0c\u8868\u793aNebulaGraph\u670d\u52a1\u5f02\u5e38\uff0c\u53ef\u4ee5\u6839\u636e\u5f02\u5e38\u670d\u52a1\u4fe1\u606f\u8fdb\u4e00\u6b65\u6392\u67e5\uff0c\u6216\u8005\u5728 NebulaGraph\u793e\u533a \u5bfb\u6c42\u5e2e\u52a9\u3002 [ INFO ] nebula-metad: Running as 25600 , Listening on 9559 [ INFO ] nebula-graphd: Exited [ INFO ] nebula-storaged: Running as 25646 , Listening on 9779 NebulaGraph\u670d\u52a1\u7531 Meta \u670d\u52a1\u3001Graph \u670d\u52a1\u548c Storage \u670d\u52a1\u5171\u540c\u63d0\u4f9b\uff0c\u8fd9\u4e09\u79cd\u670d\u52a1\u7684\u914d\u7f6e\u6587\u4ef6\u90fd\u4fdd\u5b58\u5728\u5b89\u88c5\u76ee\u5f55\u7684 etc \u76ee\u5f55\u5185\uff0c\u9ed8\u8ba4\u8def\u5f84\u4e3a /usr/local/nebula/etc/ \uff0c\u7528\u6237\u53ef\u4ee5\u68c0\u67e5\u76f8\u5e94\u7684\u914d\u7f6e\u6587\u4ef6\u6392\u67e5\u95ee\u9898\u3002 \u4e0b\u4e00\u6b65 \u00b6 \u8fde\u63a5NebulaGraph","title":"\u6b65\u9aa4 2\uff1a\u542f\u52a8 NebulaGraph"},{"location":"2.quick-start/3.quick-start-on-premise/5.start-stop-service/#nebulagraph","text":"NebulaGraph\u652f\u6301\u901a\u8fc7\u811a\u672c\u7ba1\u7406\u670d\u52a1\u3002","title":"\u542f\u52a8NebulaGraph\u670d\u52a1"},{"location":"2.quick-start/3.quick-start-on-premise/5.start-stop-service/#_1","text":"\u4f7f\u7528\u811a\u672c nebula.service \u7ba1\u7406\u670d\u52a1\uff0c\u5305\u62ec\u542f\u52a8\u3001\u505c\u6b62\u3001\u91cd\u542f\u3001\u4e2d\u6b62\u548c\u67e5\u770b\u3002 Note nebula.service \u7684\u9ed8\u8ba4\u8def\u5f84\u662f /usr/local/nebula/scripts \uff0c\u5982\u679c\u4fee\u6539\u8fc7\u5b89\u88c5\u8def\u5f84\uff0c\u8bf7\u4f7f\u7528\u5b9e\u9645\u8def\u5f84\u3002","title":"\u4f7f\u7528\u811a\u672c\u7ba1\u7406\u670d\u52a1"},{"location":"2.quick-start/3.quick-start-on-premise/5.start-stop-service/#_2","text":"$ sudo /usr/local/nebula/scripts/nebula.service [ -v ] [ -c <config_file_path> ] <start | stop | restart | kill | status> <metad | graphd | storaged | all> \u53c2\u6570 \u8bf4\u660e -v \u663e\u793a\u8be6\u7ec6\u8c03\u8bd5\u4fe1\u606f\u3002 -c \u6307\u5b9a\u914d\u7f6e\u6587\u4ef6\u8def\u5f84\uff0c\u9ed8\u8ba4\u8def\u5f84\u4e3a /usr/local/nebula/etc/ \u3002 start \u542f\u52a8\u670d\u52a1\u3002 stop \u505c\u6b62\u670d\u52a1\u3002 restart \u91cd\u542f\u670d\u52a1\u3002 kill \u4e2d\u6b62\u670d\u52a1\u3002 status \u67e5\u770b\u670d\u52a1\u72b6\u6001\u3002 metad \u7ba1\u7406 Meta \u670d\u52a1\u3002 graphd \u7ba1\u7406 Graph \u670d\u52a1\u3002 storaged \u7ba1\u7406 Storage \u670d\u52a1\u3002 all \u7ba1\u7406\u6240\u6709\u670d\u52a1\u3002","title":"\u8bed\u6cd5"},{"location":"2.quick-start/3.quick-start-on-premise/5.start-stop-service/#nebulagraph_1","text":"\u6267\u884c\u5982\u4e0b\u547d\u4ee4\u542f\u52a8\u670d\u52a1\uff1a $ sudo /usr/local/nebula/scripts/nebula.service start all [ INFO ] Starting nebula-metad... [ INFO ] Done [ INFO ] Starting nebula-graphd... [ INFO ] Done [ INFO ] Starting nebula-storaged... [ INFO ] Done","title":"\u542f\u52a8NebulaGraph\u670d\u52a1"},{"location":"2.quick-start/3.quick-start-on-premise/5.start-stop-service/#nebulagraph_2","text":"Danger \u8bf7\u52ff\u4f7f\u7528 kill -9 \u547d\u4ee4\u5f3a\u5236\u7ec8\u6b62\u8fdb\u7a0b\uff0c\u5426\u5219\u53ef\u80fd\u8f83\u5c0f\u6982\u7387\u51fa\u73b0\u6570\u636e\u4e22\u5931\u3002 \u6267\u884c\u5982\u4e0b\u547d\u4ee4\u505c\u6b62NebulaGraph\u670d\u52a1\uff1a $ sudo /usr/local/nebula/scripts/nebula.service stop all [ INFO ] Stopping nebula-metad... [ INFO ] Done [ INFO ] Stopping nebula-graphd... [ INFO ] Done [ INFO ] Stopping nebula-storaged... [ INFO ] Done","title":"\u505c\u6b62NebulaGraph\u670d\u52a1"},{"location":"2.quick-start/3.quick-start-on-premise/5.start-stop-service/#nebulagraph_3","text":"\u6267\u884c\u5982\u4e0b\u547d\u4ee4\u67e5\u770bNebulaGraph\u670d\u52a1\u72b6\u6001\uff1a $ sudo /usr/local/nebula/scripts/nebula.service status all \u5982\u679c\u8fd4\u56de\u5982\u4e0b\u7ed3\u679c\uff0c\u8868\u793aNebulaGraph\u670d\u52a1\u6b63\u5e38\u8fd0\u884c\u3002 [ INFO ] nebula-metad ( 33fd35e ) : Running as 29020 , Listening on 9559 [ INFO ] nebula-graphd ( 33fd35e ) : Running as 29095 , Listening on 9669 [ WARN ] nebula-storaged after v3.0.0 will not start service until it is added to cluster. [ WARN ] See Manage Storage hosts:ADD HOSTS in https://docs.nebula-graph.io/ [ INFO ] nebula-storaged ( 33fd35e ) : Running as 29147 , Listening on 9779 Note \u6b63\u5e38\u542f\u52a8NebulaGraph\u540e\uff0c nebula-storaged \u8fdb\u7a0b\u7684\u7aef\u53e3\u663e\u793a\u7ea2\u8272\u3002\u8fd9\u662f\u56e0\u4e3a nebula-storaged \u5728\u542f\u52a8\u6d41\u7a0b\u4e2d\u4f1a\u7b49\u5f85 nebula-metad \u6dfb\u52a0\u5f53\u524d Storage \u670d\u52a1\uff0c\u5f53\u524d Storage \u670d\u52a1\u6536\u5230 Ready \u4fe1\u53f7\u540e\u624d\u4f1a\u6b63\u5f0f\u542f\u52a8\u670d\u52a1\u3002\u4ece 3.0.0 \u7248\u672c\u5f00\u59cb\uff0c\u5728\u914d\u7f6e\u6587\u4ef6\u4e2d\u6dfb\u52a0\u7684 Storage \u8282\u70b9\u65e0\u6cd5\u76f4\u63a5\u8bfb\u5199\uff0c\u914d\u7f6e\u6587\u4ef6\u7684\u4f5c\u7528\u4ec5\u4ec5\u662f\u5c06 Storage \u8282\u70b9\u6ce8\u518c\u81f3 Meta \u670d\u52a1\u4e2d\u3002\u5fc5\u987b\u4f7f\u7528 ADD HOSTS \u547d\u4ee4\u540e\uff0c\u624d\u80fd\u6b63\u5e38\u8bfb\u5199 Storage \u8282\u70b9\u3002\u66f4\u591a\u4fe1\u606f\uff0c\u53c2\u89c1 \u7ba1\u7406 Storage \u4e3b\u673a \u3002 \u5982\u679c\u8fd4\u56de\u7c7b\u4f3c\u5982\u4e0b\u7ed3\u679c\uff0c\u8868\u793aNebulaGraph\u670d\u52a1\u5f02\u5e38\uff0c\u53ef\u4ee5\u6839\u636e\u5f02\u5e38\u670d\u52a1\u4fe1\u606f\u8fdb\u4e00\u6b65\u6392\u67e5\uff0c\u6216\u8005\u5728 NebulaGraph\u793e\u533a \u5bfb\u6c42\u5e2e\u52a9\u3002 [ INFO ] nebula-metad: Running as 25600 , Listening on 9559 [ INFO ] nebula-graphd: Exited [ INFO ] nebula-storaged: Running as 25646 , Listening on 9779 NebulaGraph\u670d\u52a1\u7531 Meta \u670d\u52a1\u3001Graph \u670d\u52a1\u548c Storage \u670d\u52a1\u5171\u540c\u63d0\u4f9b\uff0c\u8fd9\u4e09\u79cd\u670d\u52a1\u7684\u914d\u7f6e\u6587\u4ef6\u90fd\u4fdd\u5b58\u5728\u5b89\u88c5\u76ee\u5f55\u7684 etc \u76ee\u5f55\u5185\uff0c\u9ed8\u8ba4\u8def\u5f84\u4e3a /usr/local/nebula/etc/ \uff0c\u7528\u6237\u53ef\u4ee5\u68c0\u67e5\u76f8\u5e94\u7684\u914d\u7f6e\u6587\u4ef6\u6392\u67e5\u95ee\u9898\u3002","title":"\u67e5\u770bNebulaGraph\u670d\u52a1"},{"location":"2.quick-start/3.quick-start-on-premise/5.start-stop-service/#_3","text":"\u8fde\u63a5NebulaGraph","title":"\u4e0b\u4e00\u6b65"},{"location":"20.appendix/0.FAQ/","text":"\u5e38\u89c1\u95ee\u9898 FAQ \u00b6 \u672c\u6587\u5217\u51fa\u4e86\u4f7f\u7528NebulaGraph 3.6.0 \u65f6\u53ef\u80fd\u9047\u5230\u7684\u5e38\u89c1\u95ee\u9898\uff0c\u7528\u6237\u53ef\u4ee5\u4f7f\u7528\u6587\u6863\u4e2d\u5fc3\u6216\u8005\u6d4f\u89c8\u5668\u7684\u641c\u7d22\u529f\u80fd\u67e5\u627e\u76f8\u5e94\u95ee\u9898\u3002 \u5982\u679c\u6309\u7167\u6587\u4e2d\u7684\u5efa\u8bae\u65e0\u6cd5\u89e3\u51b3\u95ee\u9898\uff0c\u8bf7\u5230 NebulaGraph \u8bba\u575b \u63d0\u95ee\u6216\u63d0\u4ea4 GitHub issue \u3002 \u5173\u4e8e\u672c\u624b\u518c \u00b6 \u4e3a\u4ec0\u4e48\u624b\u518c\u793a\u4f8b\u548c\u7cfb\u7edf\u884c\u4e3a\u4e0d\u4e00\u81f4\uff1f \u00b6 NebulaGraph\u4e00\u76f4\u5728\u6301\u7eed\u5f00\u53d1\uff0c\u529f\u80fd\u6216\u64cd\u4f5c\u7684\u884c\u4e3a\u53ef\u80fd\u4f1a\u6709\u53d8\u5316\uff0c\u5982\u679c\u53d1\u73b0\u4e0d\u4e00\u81f4\uff0c\u8bf7\u63d0\u4ea4 issue \u901a\u77e5NebulaGraph\u56e2\u961f\u3002 Note \u5982\u679c\u53d1\u73b0\u672c\u6587\u6863\u4e2d\u7684\u9519\u8bef\uff1a \u7528\u6237\u53ef\u4ee5\u70b9\u51fb\u9875\u9762\u9876\u90e8\u53f3\u4e0a\u89d2\u7684\"\u94c5\u7b14\"\u56fe\u6807\u8fdb\u5165\u7f16\u8f91\u9875\u9762\u3002 \u4f7f\u7528 Markdown \u4fee\u6539\u6587\u6863\u3002\u5b8c\u6210\u540e\u70b9\u51fb\u9875\u9762\u5e95\u90e8\u7684 \"Commit changes\"\uff0c\u8fd9\u4f1a\u89e6\u53d1\u4e00\u4e2a GitHub pull request\u3002 \u5b8c\u6210 CLA \u7b7e\u7f72 \uff0c\u5e76\u4e14\u81f3\u5c11 2 \u4f4d reviewer \u5ba1\u6838\u901a\u8fc7\u5373\u53ef\u5408\u5e76\u3002 \u5173\u4e8e\u5386\u53f2\u517c\u5bb9\u6027 \u00b6 X \u7248\u672c\u517c\u5bb9\u6027 NebulaGraph 3.6.0 \u4e0e \u5386\u53f2\u7248\u672c \uff08\u5305\u62ecNebulaGraph 1.x \u548c 2.x) \u7684\u6570\u636e\u683c\u5f0f\u3001\u5ba2\u6237\u7aef\u901a\u4fe1\u534f\u8bae\u5747 \u53cc\u5411\u4e0d\u517c\u5bb9 \u3002 \u4f7f\u7528 \u8001\u7248\u672c \u5ba2\u6237\u7aef\u8fde\u63a5 \u65b0\u7248\u672c \u670d\u52a1\u7aef\uff0c\u4f1a\u5bfc\u81f4\u670d\u52a1\u8fdb\u7a0b \u9000\u51fa \u3002 \u6570\u636e\u683c\u5f0f\u5347\u7ea7\u53c2\u89c1 \u5347\u7ea7NebulaGraph\u5386\u53f2\u7248\u672c\u81f3\u5f53\u524d\u7248\u672c \u3002 \u5ba2\u6237\u7aef\u4e0e\u5de5\u5177\u5747\u9700\u8981 \u4e0b\u8f7d\u5bf9\u5e94\u7248\u672c \u3002 \u5173\u4e8e\u6267\u884c\u62a5\u9519 \u00b6 \u5982\u4f55\u5904\u7406\u9519\u8bef\u4fe1\u606f -1005:GraphMemoryExceeded: (-2600\uff09 \u00b6 \u8fd9\u4e2a\u9519\u8bef\u662f\u7531 Memory Tracker \u53d1\u51fa\u7684\uff0c\u5b83\u5728\u89c2\u5bdf\u5230\u5185\u5b58\u4f7f\u7528\u8d85\u8fc7\u4e86\u8bbe\u5b9a\u9608\u503c\u65f6\u53d1\u51fa\u8b66\u62a5\u3002\u8fd9\u4e2a\u673a\u5236\u53ef\u4ee5\u5e2e\u52a9\u907f\u514d\u670d\u52a1\u8fdb\u7a0b\u88ab\u7cfb\u7edf\u7684 OOM\uff08Out of Memory\uff09killer \u7ec8\u6b62\u3002\u89e3\u51b3\u6b65\u9aa4\uff1a \u68c0\u67e5\u5185\u5b58\u4f7f\u7528\u60c5\u51b5\uff1a\u9996\u5148\uff0c\u4f60\u9700\u8981\u67e5\u770b\u547d\u4ee4\u6267\u884c\u8fc7\u7a0b\u4e2d\u7684\u5185\u5b58\u7528\u91cf\u3002\u5982\u679c\u5185\u5b58\u4f7f\u7528\u91cf\u786e\u5b9e\u5f88\u9ad8\uff0c\u90a3\u4e48\u8fd9\u4e2a\u9519\u8bef\u53ef\u80fd\u662f\u9884\u671f\u4e2d\u7684\u60c5\u51b5\u3002 \u68c0\u67e5 Memory Tracker \u7684\u914d\u7f6e\uff1a\u5982\u679c\u5185\u5b58\u4f7f\u7528\u91cf\u5e76\u4e0d\u9ad8\uff0c\u68c0\u67e5 Memory Tracker \u7684\u76f8\u5173\u914d\u7f6e\u3002\u8fd9\u5305\u62ec memory_tracker_untracked_reserved_memory_mb \uff08\u672a\u88ab\u8ddf\u8e2a\u7684\u9884\u7559\u5185\u5b58\u91cf\uff0c\u5355\u4f4d\u4e3a MB\uff09\uff0c memory_tracker_limit_ratio \uff08\u5185\u5b58\u9650\u5236\u6bd4\u4f8b\uff09\uff0c\u4ee5\u53ca memory_purge_enabled \uff08\u662f\u5426\u542f\u7528\u5185\u5b58\u6e05\u7406\uff09\u3002\u5173\u4e8e Memory Tracker \u7684\u914d\u7f6e\uff0c\u53c2\u89c1 memory tracker \u914d\u7f6e \u3002 \u4f18\u5316\u914d\u7f6e\uff1a\u6839\u636e\u5b9e\u9645\u60c5\u51b5\uff0c\u8c03\u6574\u8fd9\u4e9b\u914d\u7f6e\u3002\u4f8b\u5982\uff0c\u5982\u679c\u53ef\u7528\u5185\u5b58\u9650\u5236\u8fc7\u4f4e\uff0c\u53ef\u4ee5\u8c03\u9ad8 memory_tracker_limit_ratio \u7684\u503c\u3002 \u5982\u4f55\u5904\u7406\u9519\u8bef\u4fe1\u606f SemanticError: Missing yield clause \u00b6 \u4eceNebulaGraph 3.0.0 \u5f00\u59cb\uff0c\u67e5\u8be2\u8bed\u53e5 LOOKUP \u3001 GO \u3001 FETCH \u5fc5\u987b\u7528 YIELD \u5b50\u53e5\u6307\u5b9a\u8f93\u51fa\u7ed3\u679c\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1 YIELD \u3002 \u5982\u4f55\u5904\u7406\u9519\u8bef\u4fe1\u606f Host not enough! \u00b6 \u4ece 3.0.0 \u7248\u672c\u5f00\u59cb\uff0c\u5728\u914d\u7f6e\u6587\u4ef6\u4e2d\u6dfb\u52a0\u7684 Storage \u8282\u70b9\u65e0\u6cd5\u76f4\u63a5\u8bfb\u5199\uff0c\u914d\u7f6e\u6587\u4ef6\u7684\u4f5c\u7528\u4ec5\u4ec5\u662f\u5c06 Storage \u8282\u70b9\u6ce8\u518c\u81f3 Meta \u670d\u52a1\u4e2d\u3002\u5fc5\u987b\u4f7f\u7528 ADD HOSTS \u547d\u4ee4\u540e\uff0c\u624d\u80fd\u6b63\u5e38\u8bfb\u5199 Storage \u8282\u70b9\u3002\u8be6\u60c5\u53c2\u89c1 \u7ba1\u7406 Storage \u4e3b\u673a \u3002 \u5982\u4f55\u5904\u7406\u9519\u8bef\u4fe1\u606f To get the property of the vertex in 'v.age', should use the format 'var.tag.prop' \u00b6 \u4ece 3.0.0 \u7248\u672c\u5f00\u59cb\uff0c pattern \u652f\u6301\u540c\u65f6\u5339\u914d\u591a\u4e2a Tag\uff0c\u6240\u4ee5\u8fd4\u56de\u5c5e\u6027\u65f6\uff0c\u9700\u8981\u989d\u5916\u6307\u5b9a Tag \u540d\u79f0\u3002\u5373\u4ece RETURN \u53d8\u91cf\u540d.\u5c5e\u6027\u540d \u6539\u4e3a RETURN \u53d8\u91cf\u540d.Tag\u540d.\u5c5e\u6027\u540d \u3002 \u5982\u4f55\u5904\u7406\u9519\u8bef\u4fe1\u606f Storage Error E_RPC_FAILURE \u00b6 \u62a5\u9519\u539f\u56e0\u901a\u5e38\u4e3a Graph \u670d\u52a1\u5411 Storage \u670d\u52a1\u8bf7\u6c42\u4e86\u8fc7\u591a\u7684\u6570\u636e\uff0c\u5bfc\u81f4 Storage \u670d\u52a1\u8d85\u65f6\u3002\u8bf7\u5c1d\u8bd5\u4ee5\u4e0b\u89e3\u51b3\u65b9\u6848\uff1a \u4fee\u6539\u914d\u7f6e\u6587\u4ef6 \uff1a\u5728 nebula-graphd.conf \u6587\u4ef6\u4e2d\u4fee\u6539 --storage_client_timeout_ms \u53c2\u6570\u7684\u503c\uff0c\u4ee5\u589e\u52a0 Storage client \u7684\u8fde\u63a5\u8d85\u65f6\u65f6\u95f4\u3002\u8be5\u503c\u7684\u5355\u4f4d\u4e3a\u6beb\u79d2\uff08ms\uff09\u3002\u4f8b\u5982\uff0c\u8bbe\u7f6e --storage_client_timeout_ms=60000 \u3002\u5982\u679c nebula-graphd.conf \u6587\u4ef6\u4e2d\u672a\u914d\u7f6e\u8be5\u53c2\u6570\uff0c\u8bf7\u624b\u52a8\u589e\u52a0\u3002\u63d0\u793a\uff1a\u8bf7\u5728\u914d\u7f6e\u6587\u4ef6\u5f00\u5934\u6dfb\u52a0 --local_config=true \u518d\u91cd\u542f\u670d\u52a1\u3002 \u4f18\u5316\u67e5\u8be2\u8bed\u53e5\uff1a\u51cf\u5c11\u5168\u5e93\u626b\u63cf\u578b\u7684\u67e5\u8be2\uff0c\u65e0\u8bba\u662f\u5426\u7528 LIMIT \u9650\u5236\u4e86\u8fd4\u56de\u7ed3\u679c\u7684\u6570\u91cf\uff1b\u7528 GO \u8bed\u53e5\u6539\u5199 MATCH \u8bed\u53e5\uff08\u524d\u8005\u6709\u4f18\u5316\uff0c\u540e\u8005\u65e0\u4f18\u5316\uff09\u3002 \u68c0\u67e5 Storaged \u662f\u5426\u53d1\u751f\u8fc7 OOM\u3002( dmesg |grep nebula )\u3002 \u4e3a Storage \u670d\u52a1\u5668\u63d0\u4f9b\u6027\u80fd\u66f4\u597d\u7684 SSD \u6216\u8005\u5185\u5b58\u3002 \u91cd\u8bd5\u8bf7\u6c42\u3002 \u5982\u4f55\u5904\u7406\u9519\u8bef\u4fe1\u606f The leader has changed. Try again later \u00b6 \u5df2\u77e5\u95ee\u9898\uff0c\u901a\u5e38\u9700\u8981\u91cd\u8bd5 1-N \u6b21 (N==partition \u6570\u91cf\uff09\u3002\u539f\u56e0\u4e3a meta client \u66f4\u65b0 leader \u7f13\u5b58\u9700\u8981 1-2 \u4e2a\u5fc3\u8df3\u6216\u8005\u901a\u8fc7\u9519\u8bef\u89e6\u53d1\u5f3a\u5236\u66f4\u65b0\u3002 \u5982\u679c\u767b\u5f55NebulaGraph\u65f6\uff0c\u51fa\u73b0\u8be5\u62a5\u9519\uff0c\u53ef\u4ee5\u8003\u8651\u4f7f\u7528 df -h \u67e5\u770b\u78c1\u76d8\u7a7a\u95f4\uff0c\u68c0\u67e5\u672c\u5730\u78c1\u76d8\u7a7a\u95f4\u662f\u5426\u5df2\u6ee1\u3002 \u7f16\u8bd1 Exchange\u3001Connectors\u3001Algorithm \u65f6\u65e0\u6cd5\u4e0b\u8f7d SNAPSHOT \u5305 \u00b6 \u73b0\u8c61\uff1a\u7f16\u8bd1\u65f6\u63d0\u793a Could not find artifact com.vesoft:client:jar:xxx-SNAPSHOT \u3002 \u539f\u56e0\uff1a\u672c\u5730 maven \u6ca1\u6709\u914d\u7f6e\u7528\u4e8e\u4e0b\u8f7d SNAPSHOT \u7684\u4ed3\u5e93\u3002maven \u4e2d\u9ed8\u8ba4\u7684 central \u4ed3\u5e93\u7528\u4e8e\u5b58\u653e\u6b63\u5f0f\u53d1\u5e03\u7248\u672c\uff0c\u800c\u4e0d\u662f\u5f00\u53d1\u7248\u672c\uff08SNAPSHOT\uff09\u3002 \u89e3\u51b3\u65b9\u6848\uff1a\u5728 maven \u7684 setting.xml\u6587\u4ef6\u7684 profiles \u4f5c\u7528\u57df\u5185\u4e2d\u589e\u52a0\u4ee5\u4e0b\u914d\u7f6e\uff1a <profile> <activation> <activeByDefault>true</activeByDefault> </activation> <repositories> <repository> <id>snapshots</id> <url>https://oss.sonatype.org/content/repositories/snapshots/</url> <snapshots> <enabled>true</enabled> </snapshots> </repository> </repositories> </profile> \u5982\u4f55\u5904\u7406\u9519\u8bef\u4fe1\u606f [ERROR (-1004)]: SyntaxError: syntax error near \uff1f \u00b6 \u5927\u90e8\u5206\u60c5\u51b5\u4e0b\uff0c\u67e5\u8be2\u8bed\u53e5\u9700\u8981\u6709 YIELD \u6216 RETURN \uff0c\u8bf7\u68c0\u67e5\u67e5\u8be2\u8bed\u53e5\u662f\u5426\u5305\u542b\u3002 \u5982\u4f55\u5904\u7406\u9519\u8bef\u4fe1\u606f can\u2019t solve the start vids from the sentence \u00b6 \u67e5\u8be2\u5f15\u64ce\u9700\u8981\u77e5\u9053\u4ece\u54ea\u4e9b VID \u5f00\u59cb\u56fe\u904d\u5386\u3002\u8fd9\u4e9b\u5f00\u59cb\u56fe\u904d\u5386\u7684 VID\uff0c\u6216\u8005\u901a\u8fc7\u7528\u6237\u6307\u5b9a\uff0c\u4f8b\u5982\uff1a > GO FROM ${vids} ... > MATCH (src) WHERE id(src) == ${vids} # \u5f00\u59cb\u56fe\u904d\u5386\u7684 VID \u901a\u8fc7\u5982\u4e0a\u529e\u6cd5\u6307\u5b9a \u6216\u8005\u901a\u8fc7\u4e00\u4e2a\u5c5e\u6027\u7d22\u5f15\u6765\u5f97\u5230\uff0c\u4f8b\u5982\uff1a # CREATE TAG INDEX IF NOT EXISTS i_player ON player(name(20)); # REBUILD TAG INDEX i_player; > LOOKUP ON player WHERE player.name == \"abc\" | ... YIELD ... > MATCH (src) WHERE src.name == \"abc\" ... # \u901a\u8fc7\u70b9\u5c5e\u6027 name \u7684\u7d22\u5f15\uff0c\u6765\u5f97\u5230 VID \u5426\u5219\uff0c\u5c31\u4f1a\u629b\u51fa\u8fd9\u6837\u4e00\u4e2a\u5f02\u5e38 can\u2019t solve the start vids from the sentence \u3002 \u5982\u4f55\u5904\u7406\u9519\u8bef\u4fe1\u606f Wrong vertex id type: 1001 \u00b6 \u68c0\u67e5\u8f93\u5165\u7684 VID \u7c7b\u578b\u662f\u5426\u662f create space \u8bbe\u7f6e\u7684 INT64 \u6216 FIXED_STRING(N) \u3002\u8be6\u60c5\u8bf7\u53c2\u89c1 create space \u3002 \u5982\u4f55\u5904\u7406\u9519\u8bef\u4fe1\u606f The VID must be a 64-bit integer or a string fitting space vertex id length limit. \u00b6 \u68c0\u67e5\u8f93\u5165\u7684 VID \u662f\u5426\u8d85\u8fc7\u9650\u5236\u957f\u5ea6\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1 create space \u3002 \u5982\u4f55\u5904\u7406\u9519\u8bef\u4fe1\u606f edge conflict \u6216 vertex conflict \u00b6 Storage \u670d\u52a1\u5728\u6beb\u79d2\u7ea7\u65f6\u95f4\u5185\u591a\u6b21\u6536\u5230\u63d2\u5165\u6216\u8005\u66f4\u65b0\u540c\u4e00\u70b9\u6216\u8fb9\u7684\u8bf7\u6c42\u65f6\uff0c\u53ef\u80fd\u8fd4\u56de\u8be5\u9519\u8bef\u3002\u8bf7\u7a0d\u540e\u91cd\u8bd5\u3002 \u5982\u4f55\u5904\u7406\u9519\u8bef\u4fe1\u606f RPC failure in MetaClient: Connection refused \u00b6 \u62a5\u9519\u539f\u56e0\u901a\u5e38\u4e3a metad \u670d\u52a1\u72b6\u6001\u5f02\u5e38\uff0c\u6216\u662f metad \u548c graphd \u670d\u52a1\u6240\u5728\u673a\u5668\u7f51\u7edc\u4e0d\u901a\u3002\u8bf7\u5c1d\u8bd5\u4ee5\u4e0b\u89e3\u51b3\u65b9\u6848\uff1a \u5728 metad \u6240\u5728\u670d\u52a1\u5668\u67e5\u770b\u4e0b metad \u670d\u52a1\u72b6\u6001\uff0c\u5982\u679c\u670d\u52a1\u72b6\u6001\u5f02\u5e38\uff0c\u53ef\u4ee5\u91cd\u65b0\u542f\u52a8 metad \u670d\u52a1\u3002 \u5728\u62a5\u9519\u670d\u52a1\u5668\u4e0b\u4f7f\u7528 telnet meta-ip:port \u67e5\u770b\u7f51\u7edc\u72b6\u6001\u3002 \u68c0\u67e5\u914d\u7f6e\u6587\u4ef6\u4e2d\u7684\u7aef\u53e3\u914d\u7f6e\uff0c\u5982\u679c\u7aef\u53e3\u53f7\u4e0e\u8fde\u63a5\u65f6\u4f7f\u7528\u7684\u4e0d\u540c\uff0c\u6539\u7528\u914d\u7f6e\u6587\u4ef6\u4e2d\u7684\u7aef\u53e3\u6216\u8005\u4fee\u6539\u914d\u7f6e\u3002 \u5982\u4f55\u5904\u7406 nebula-graph.INFO \u4e2d\u9519\u8bef\u65e5\u5fd7 StorageClientBase.inl:214] Request to \"x.x.x.x\":9779 failed: N6apache6thrift9transport19TTransportExceptionE: Timed Out \u00b6 \u62a5\u9519\u539f\u56e0\u53ef\u80fd\u662f\u67e5\u8be2\u7684\u6570\u636e\u91cf\u6bd4\u8f83\u5927\uff0cstoraged \u5904\u7406\u8d85\u65f6\u3002\u8bf7\u5c1d\u8bd5\u4ee5\u4e0b\u89e3\u51b3\u65b9\u6cd5\uff1a \u5bfc\u5165\u6570\u636e\u65f6\uff0c\u624b\u52a8 compaction \uff0c\u52a0\u901f\u8bfb\u7684\u901f\u5ea6\u3002 \u589e\u52a0 Graph \u670d\u52a1\u4e0e Storage \u670d\u52a1\u7684 RPC \u8fde\u63a5\u8d85\u65f6\u65f6\u95f4\uff0c\u5728 nebula-graphd.conf \u6587\u4ef6\u91cc\u9762\u4fee\u6539 --storage_client_timeout_ms \u53c2\u6570\u7684\u503c\u3002\u8be5\u503c\u7684\u5355\u4f4d\u4e3a\u6beb\u79d2\uff08ms\uff09\uff0c\u9ed8\u8ba4\u503c\u4e3a 60000 \u6beb\u79d2\u3002 \u5982\u4f55\u5904\u7406 nebula-storaged.INFO \u4e2d\u9519\u8bef\u65e5\u5fd7 MetaClient.cpp:65] Heartbeat failed, status:Wrong cluster! \u6216\u8005 nebula-metad.INFO \u542b\u6709\u9519\u8bef\u65e5\u5fd7 HBProcessor.cpp:54] Reject wrong cluster host \"x.x.x.x\":9771! \u00b6 \u62a5\u9519\u7684\u539f\u56e0\u53ef\u80fd\u662f\u7528\u6237\u4fee\u6539\u4e86 metad \u7684 ip \u6216\u8005\u7aef\u53e3\u4fe1\u606f\uff0c\u6216\u8005 storage \u4e4b\u524d\u52a0\u5165\u8fc7\u5176\u4ed6\u96c6\u7fa4\u3002\u8bf7\u5c1d\u8bd5\u4ee5\u4e0b\u89e3\u51b3\u65b9\u6cd5\uff1a \u7528\u6237\u5230 storage \u90e8\u7f72\u7684\u673a\u5668\u6240\u5728\u7684\u5b89\u88c5\u76ee\u5f55\uff08\u9ed8\u8ba4\u5b89\u88c5\u76ee\u5f55\u4e3a /usr/local/nebula \uff09\u4e0b\u9762\u5c06 cluster.id \u6587\u4ef6\u5220\u9664\uff0c\u7136\u540e\u91cd\u542f storaged \u670d\u52a1\u3002 \u5982\u4f55\u5904\u7406\u62a5\u9519\u4fe1\u606f Storage Error: More than one request trying to add/update/delete one edge/vertex at he same time. \u00b6 \u4e0a\u8ff0\u62a5\u9519\u8868\u793a\u5f53\u524d\u7248\u672c\u4e0d\u5141\u8bb8\u540c\u65f6\u5bf9\u4e00\u4e2a\u70b9\u6216\u8005\u4e00\u6761\u8fb9\u8fdb\u884c\u5e76\u53d1\u64cd\u4f5c\u3002\u5982\u51fa\u73b0\u6b64\u62a5\u9519\u8bf7\u91cd\u65b0\u6267\u884c\u64cd\u4f5c\u547d\u4ee4\u3002 \u5173\u4e8e\u8bbe\u8ba1\u4e0e\u529f\u80fd \u00b6 \u8fd4\u56de\u6d88\u606f\u4e2d time spent \u7684\u542b\u4e49\u662f\u4ec0\u4e48\uff1f \u00b6 \u5c06\u547d\u4ee4 SHOW SPACES \u8fd4\u56de\u7684\u6d88\u606f\u4f5c\u4e3a\u793a\u4f8b\uff1a nebula> SHOW SPACES; +--------------------+ | Name | +--------------------+ | \"basketballplayer\" | +--------------------+ Got 1 rows (time spent 1235/1934 us) \u7b2c\u4e00\u4e2a\u6570\u5b57 1235 \u8868\u793a\u6570\u636e\u5e93\u672c\u8eab\u6267\u884c\u8be5\u547d\u4ee4\u82b1\u8d39\u7684\u65f6\u95f4\uff0c\u5373\u67e5\u8be2\u5f15\u64ce\u4ece\u5ba2\u6237\u7aef\u63a5\u6536\u5230\u4e00\u4e2a\u67e5\u8be2\uff0c\u7136\u540e\u4ece\u5b58\u50a8\u670d\u52a1\u5668\u83b7\u53d6\u6570\u636e\u5e76\u6267\u884c\u4e00\u7cfb\u5217\u8ba1\u7b97\u6240\u82b1\u8d39\u7684\u65f6\u95f4\u3002 \u7b2c\u4e8c\u4e2a\u6570\u5b57 1934 \u8868\u793a\u4ece\u5ba2\u6237\u7aef\u89d2\u5ea6\u770b\u6240\u82b1\u8d39\u7684\u65f6\u95f4\uff0c\u5373\u4ece\u5ba2\u6237\u7aef\u53d1\u9001\u8bf7\u6c42\u3001\u63a5\u6536\u7ed3\u679c\uff0c\u7136\u540e\u5728\u5c4f\u5e55\u4e0a\u663e\u793a\u7ed3\u679c\u6240\u82b1\u8d39\u7684\u65f6\u95f4\u3002 \u4e3a\u4ec0\u4e48\u5728\u6b63\u5e38\u8fde\u63a5NebulaGraph\u540e\uff0c nebula-storaged \u8fdb\u7a0b\u7684\u7aef\u53e3\u53f7\u4e00\u76f4\u663e\u793a\u7ea2\u8272\uff1f \u00b6 nebula-storaged \u8fdb\u7a0b\u7684\u7aef\u53e3\u53f7\u7684\u7ea2\u8272\u95ea\u70c1\u72b6\u6001\u662f\u56e0\u4e3a nebula-storaged \u5728\u542f\u52a8\u6d41\u7a0b\u4e2d\u4f1a\u7b49\u5f85 nebula-metad \u6dfb\u52a0\u5f53\u524d Storage \u670d\u52a1\uff0c\u5f53\u524d Storage \u670d\u52a1\u6536\u5230 Ready \u4fe1\u53f7\u540e\u624d\u4f1a\u6b63\u5f0f\u542f\u52a8\u670d\u52a1\u3002\u4ece 3.0.0 \u7248\u672c\u5f00\u59cb\uff0cMeta \u670d\u52a1\u65e0\u6cd5\u76f4\u63a5\u8bfb\u5199\u5728\u914d\u7f6e\u6587\u4ef6\u4e2d\u6dfb\u52a0\u7684 Storage \u670d\u52a1\uff0c\u914d\u7f6e\u6587\u4ef6\u7684\u4f5c\u7528\u4ec5\u4ec5\u662f\u5c06 Storage \u670d\u52a1\u6ce8\u518c\u81f3 Meta \u670d\u52a1\u4e2d\u3002\u7528\u6237\u5fc5\u987b\u4f7f\u7528 ADD HOSTS \u547d\u4ee4\u540e\uff0c\u624d\u80fd\u4f7f Meta \u670d\u52a1\u6b63\u5e38\u8bfb\u5199 Storage \u670d\u52a1\u3002\u66f4\u591a\u4fe1\u606f\uff0c\u53c2\u89c1 \u7ba1\u7406 Storage \u4e3b\u673a \u3002 \u4e3a\u4ec0\u4e48NebulaGraph\u7684\u8fd4\u56de\u7ed3\u679c\u6bcf\u884c\u4e4b\u95f4\u6ca1\u6709\u6a2a\u7ebf\u5206\u9694\u4e86\uff1f \u00b6 \u8fd9\u662f NebulaGraph Console 2.6.0 \u7248\u672c\u7684\u53d8\u52a8\u9020\u6210\u7684\uff0c\u4e0d\u662fNebulaGraph\u5185\u6838\u7684\u53d8\u66f4\uff0c\u4e0d\u5f71\u54cd\u8fd4\u56de\u6570\u636e\u672c\u8eab\u7684\u5185\u5bb9\u3002 \u5173\u4e8e\u60ac\u6302\u8fb9 \u00b6 \u60ac\u6302\u8fb9 (Dangling edge) \u662f\u6307\u4e00\u6761\u8fb9\u7684\u8d77\u70b9\u6216\u8005\u7ec8\u70b9\u5728\u6570\u636e\u5e93\u4e2d\u4e0d\u5b58\u5728\u3002 NebulaGraph 3.6.0 \u7684\u6570\u636e\u6a21\u578b\u4e2d\uff0c\u7531\u4e8e\u8bbe\u8ba1\u5141\u8bb8\u56fe\u4e2d\u5b58\u5728\u201c\u60ac\u6302\u8fb9\u201d\uff1b \u6ca1\u6709 openCypher \u4e2d\u7684 MERGE \u8bed\u53e5\u3002 \u5bf9\u4e8e\u60ac\u6302\u8fb9\u7684\u4fdd\u8bc1\u5b8c\u5168\u4f9d\u8d56\u5e94\u7528\u5c42\u9762\u3002 \u8be6\u89c1 INSERT VERTEX , DELETE VERTEX , INSERT EDGE , DELETE EDGE \u3002 \u53ef\u4ee5\u5728 CREATE SPACE \u65f6\u8bbe\u7f6e replica_factor \u4e3a\u5076\u6570\uff08\u4f8b\u5982\u8bbe\u7f6e\u4e3a 2\uff09\u5417\uff1f \u00b6 \u4e0d\u8981\u8fd9\u6837\u8bbe\u7f6e\u3002 Storage \u670d\u52a1\u4f7f\u7528 Raft \u534f\u8bae\uff08\u591a\u6570\u8868\u51b3\uff09\uff0c\u4e3a\u4fdd\u8bc1\u53ef\u7528\u6027\uff0c\u8981\u6c42\u51fa\u6545\u969c\u7684\u526f\u672c\u6570\u91cf\u4e0d\u80fd\u8fbe\u5230\u4e00\u534a\u3002 \u5f53\u673a\u5668\u6570\u91cf\u4e3a 1 \u65f6\uff0c replica_factor \u53ea\u80fd\u8bbe\u7f6e\u4e3a 1 \u3002 \u5f53\u673a\u5668\u6570\u91cf\u8db3\u591f\u65f6\uff0c\u5982\u679c replica_factor=2 \uff0c\u5f53\u5176\u4e2d\u4e00\u4e2a\u526f\u672c\u6545\u969c\u65f6\uff0c\u5c31\u4f1a\u5bfc\u81f4\u7cfb\u7edf\u65e0\u6cd5\u6b63\u5e38\u5de5\u4f5c\uff1b\u5982\u679c replica_factor=4 \uff0c\u53ea\u80fd\u6709\u4e00\u4e2a\u526f\u672c\u53ef\u4ee5\u51fa\u73b0\u6545\u969c\uff0c\u8fd9\u548c replica_factor=3 \u662f\u4e00\u6837\u3002\u4ee5\u6b64\u7c7b\u63a8\uff0c\u6240\u4ee5 replica_factor \u8bbe\u7f6e\u4e3a\u5947\u6570\u5373\u53ef\u3002 \u5efa\u8bae\u5728\u751f\u4ea7\u73af\u5883\u4e2d\u8bbe\u7f6e replica_factor=3 \uff0c\u6d4b\u8bd5\u73af\u5883\u4e2d\u8bbe\u7f6e replica_factor=1 \uff0c\u4e0d\u8981\u4f7f\u7528\u5076\u6570\u3002 \u662f\u5426\u652f\u6301\u505c\u6b62\u6216\u8005\u4e2d\u65ad\u6162\u67e5\u8be2 \u00b6 \u652f\u6301\u3002 \u8be6\u60c5\u8bf7\u53c2\u89c1 \u7ec8\u6b62\u67e5\u8be2 \u3002 \u4f7f\u7528 GO \u548c MATCH \u6267\u884c\u76f8\u540c\u8bed\u4e49\u7684\u67e5\u8be2\uff0c\u67e5\u8be2\u7ed3\u679c\u4e3a\u4ec0\u4e48\u4e0d\u540c\uff1f \u00b6 \u539f\u56e0\u53ef\u80fd\u6709\u4ee5\u4e0b\u51e0\u79cd\uff1a GO \u67e5\u8be2\u5230\u4e86\u60ac\u6302\u8fb9\u3002 RETURN \u547d\u4ee4\u672a\u6307\u5b9a\u6392\u5e8f\u65b9\u5f0f\u3002 \u89e6\u53d1\u4e86 Storage \u670d\u52a1\u4e2d max_edge_returned_per_vertex \u5b9a\u4e49\u7684\u7a20\u5bc6\u70b9\u622a\u65ad\u9650\u5236\u3002 \u8def\u5f84\u7684\u7c7b\u578b\u4e0d\u540c\uff0c\u5bfc\u81f4\u67e5\u8be2\u7ed3\u679c\u53ef\u80fd\u4f1a\u4e0d\u540c\u3002 GO \u8bed\u53e5\u91c7\u7528\u7684\u662f walk \u7c7b\u578b\uff0c\u904d\u5386\u65f6\u70b9\u548c\u8fb9\u53ef\u4ee5\u91cd\u590d\u3002 MATCH \u8bed\u53e5\u517c\u5bb9 openCypher\uff0c\u91c7\u7528\u7684\u662f trail \u7c7b\u578b\uff0c\u904d\u5386\u65f6\u53ea\u6709\u70b9\u53ef\u4ee5\u91cd\u590d\uff0c\u8fb9\u4e0d\u53ef\u4ee5\u91cd\u590d\u3002 \u56e0\u8def\u5f84\u7c7b\u578b\u4e0d\u540c\u5bfc\u81f4\u67e5\u8be2\u7ed3\u679c\u4e0d\u540c\u7684\u793a\u4f8b\u56fe\u548c\u8bf4\u660e\u5982\u4e0b\u3002 \u4ece\u70b9 A \u5f00\u59cb\u67e5\u8be2\u8ddd\u79bb 5 \u8df3\u7684\u70b9\uff0c\u90fd\u4f1a\u67e5\u8be2\u5230\u70b9 C\uff08 A->B->C->D->E->C \uff09\uff0c\u67e5\u8be2 6 \u8df3\u7684\u70b9\u65f6\uff0c GO \u8bed\u53e5\u4f1a\u67e5\u8be2\u5230\u70b9 D\uff08 A->B->C->D->E->C->D \uff09\uff0c\u56e0\u4e3a\u8fb9 C->D \u53ef\u4ee5\u91cd\u590d\u67e5\u8be2\uff0c\u800c MATCH \u8bed\u53e5\u67e5\u8be2\u4e3a\u7a7a\uff0c\u56e0\u4e3a\u8fb9\u4e0d\u53ef\u4ee5\u91cd\u590d\u3002 \u6240\u4ee5\u4f7f\u7528 GO \u548c MATCH \u6267\u884c\u76f8\u540c\u8bed\u4e49\u7684\u67e5\u8be2\uff0c\u53ef\u80fd\u4f1a\u51fa\u73b0 MATCH \u8bed\u53e5\u7684\u67e5\u8be2\u7ed3\u679c\u6bd4 GO \u8bed\u53e5\u5c11\u3002 \u5173\u4e8e\u8def\u5f84\u7684\u8be6\u7ec6\u8bf4\u660e\uff0c\u8bf7\u53c2\u89c1 \u7ef4\u57fa\u767e\u79d1 \u3002 \u5982\u4f55\u7edf\u8ba1\u6bcf\u79cd Tag \u6709\u591a\u5c11\u4e2a\u70b9\uff0c\u6bcf\u4e2a Edge type \u6709\u591a\u5c11\u6761\u8fb9\uff1f \u00b6 \u8bf7\u53c2\u89c1 show-stats \u3002 \u5982\u4f55\u83b7\u53d6\u6bcf\u79cd Tag \u7684\u6240\u6709\u70b9\uff0c\u6216\u8005\u6bcf\u79cd Edge type \u7684\u6240\u6709\u8fb9\uff1f \u00b6 \u5efa\u7acb\u5e76\u91cd\u5efa\u7d22\u5f15\u3002 > CREATE TAG INDEX IF NOT EXISTS i_player ON player(); > REBUILD TAG INDEX i_player; \u4f7f\u7528 LOOKUP \u6216 MATCH \u8bed\u53e5\u3002\u4f8b\u5982\uff1a > LOOKUP ON player; > MATCH (n:player) RETURN n; \u66f4\u591a\u8be6\u60c5\u8bf7\u53c2\u89c1 INDEX \u3001 LOOKUP \u548c MATCH \u3002 \u80fd\u4e0d\u80fd\u7528\u4e2d\u6587\u5b57\u7b26\u505a\u6807\u8bc6\u7b26\uff0c\u6bd4\u5982\u56fe\u7a7a\u95f4\u3001Tag\u3001Edge type\u3001\u5c5e\u6027\u3001\u7d22\u5f15\u7684\u540d\u79f0\uff1f \u00b6 \u80fd\uff0c\u8be6\u60c5\u53c2\u89c1 \u5173\u952e\u5b57\u548c\u4fdd\u7559\u5b57 \u3002 \u83b7\u53d6\u6307\u5b9a\u70b9\u7684\u51fa\u5ea6\uff08\u6216\u8005\u5165\u5ea6\uff09? \u00b6 \u4e00\u4e2a\u70b9\u7684\u201c\u51fa\u5ea6\u201d\u662f\u6307\u4ece\u8be5\u70b9\u51fa\u53d1\u7684\u201c\u8fb9\u201d\u7684\u6761\u6570\u3002\u5165\u5ea6\uff0c\u662f\u6307\u6307\u5411\u8be5\u70b9\u7684\u8fb9\u7684\u6761\u6570\u3002 nebula > MATCH (s)-[e]->() WHERE id(s) == \"given\" RETURN count(e); #\u51fa\u5ea6 nebula > MATCH (s)<-[e]-() WHERE id(s) == \"given\" RETURN count(e); #\u5165\u5ea6 \u56e0\u4e3a\u6ca1\u6709\u5bf9\u51fa\u5ea6\u548c\u5165\u5ea6\u7684\u8fdb\u884c\u7279\u6b8a\u5904\u7406\uff08\u4f8b\u5982\u7d22\u5f15\u6216\u8005\u7f13\u5b58\uff09\uff0c\u8fd9\u662f\u4e00\u4e2a\u8f83\u6162\u7684\u64cd\u4f5c\u3002\u7279\u522b\u5f53\u9047\u5230 \u8d85\u7ea7\u8282\u70b9 \u65f6\uff0c\u53ef\u80fd\u4f1a\u53d1\u751fOOM\u3002 \u662f\u5426\u6709\u529e\u6cd5\u5feb\u901f\u83b7\u53d6\u201c\u6240\u6709\u201d\u70b9\u7684\u51fa\u5ea6\u548c\u5165\u5ea6\uff1f \u00b6 \u6ca1\u6709\u76f4\u63a5\u547d\u4ee4\u3002 \u53ef\u4ee5\u4f7f\u7528 NebulaGraph Algorithm \u3002 \u5173\u4e8e\u8fd0\u7ef4 \u00b6 \u8fd0\u884c\u65e5\u5fd7\u6587\u4ef6\u8fc7\u5927\u65f6\u5982\u4f55\u56de\u6536\u65e5\u5fd7\uff1f \u00b6 NebulaGraph\u7684\u8fd0\u884c\u65e5\u5fd7\u9ed8\u8ba4\u5728 /usr/local/nebula/logs/ \u4e0b\uff0c\u6b63\u5e38 INFO \u7ea7\u522b\u65e5\u5fd7\u6587\u4ef6\u4e3a nebula-graphd.INFO, nebula-storaged.INFO, nebula-metad.INFO \uff0c\u62a5\u8b66\u548c\u9519\u8bef\u7ea7\u522b\u540e\u7f00\u4e3a .WARNING \u548c .ERROR \u3002 NebulaGraph\u4f7f\u7528 glog \u6253\u5370\u65e5\u5fd7\u3002glog \u6ca1\u6709\u65e5\u5fd7\u56de\u6536\u7684\u529f\u80fd\uff0c\u7528\u6237\u53ef\u4ee5\uff1a \u5728\u4e09\u79cd\u670d\u52a1\u7684\u914d\u7f6e\u6587\u4ef6\u5185\u6dfb\u52a0\u53c2\u6570 timestamp_in_logfile_name=true \uff08\u65e5\u5fd7\u6587\u4ef6\u6dfb\u52a0\u65f6\u95f4\u6233\uff09\u548c max_log_size=500 \uff08\u65e5\u5fd7\u5927\u5c0f\u9650\u5236\uff0c\u5355\u4f4d MB\uff09\uff0c\u7136\u540e\u4f7f\u7528 crontab \u8bbe\u7f6e\u5b9a\u671f\u4efb\u52a1\u56de\u6536\u65e5\u5fd7\u6587\u4ef6\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1 Glog should delete old log files automatically \u3002 \u4f7f\u7528 logrotate \u5b9e\u73b0 \u65e5\u5fd7\u8f6e\u8be2 \u3002\u4f7f\u7528 logrotate \u7ba1\u7406\u65e5\u5fd7\u524d\u9700\u4fee\u6539\u76f8\u5e94NebulaGraph\u670d\u52a1\u7684\u914d\u7f6e\uff0c\u5c06 timestamp_in_logfile_name \u53c2\u6570\u7684\u503c\u6539\u6210 false \u3002 \u5982\u4f55\u67e5\u770bNebulaGraph\u7248\u672c \u00b6 \u670d\u52a1\u8fd0\u884c\u65f6\uff1a nebula-console \u4e2d\u6267\u884c\u547d\u4ee4 SHOW HOSTS META \uff0c\u8be6\u89c1 SHOW HOSTS \u670d\u52a1\u672a\u8fd0\u884c\u65f6\uff1a\u5728\u5b89\u88c5\u8def\u5f84\u7684 bin \u76ee\u5f55\u5185\uff0c\u6267\u884c ./<binary_name> --version \u547d\u4ee4\uff0c\u53ef\u4ee5\u67e5\u770b\u5230 version \u548c GitHub \u4e0a\u7684 commit ID\uff0c\u4f8b\u5982\uff1a $ ./nebula-graphd --version Docker Compose \u90e8\u7f72 \u67e5\u770b Docker Compose \u90e8\u7f72\u7684NebulaGraph\u7248\u672c\uff0c\u65b9\u5f0f\u548c\u7f16\u8bd1\u5b89\u88c5\u7c7b\u4f3c\uff0c\u53ea\u662f\u8981\u5148\u8fdb\u5165\u5bb9\u5668\u5185\u90e8\uff0c\u793a\u4f8b\u547d\u4ee4\u5982\u4e0b\uff1a docker exec -it nebula-docker-compose_graphd_1 bash cd bin/ ./nebula-graphd --version RPM/DEB \u5305\u5b89\u88c5 \u6267\u884c rpm -qa |grep nebula \u5373\u53ef\u67e5\u770b\u7248\u672c\u3002 \u4fee\u6539 Host \u540d\u79f0\u540e\uff0c\u65e7\u7684 Host \u4e00\u76f4\u663e\u793a OFFLINE \u600e\u4e48\u529e\uff1f \u00b6 OFFLINE \u72b6\u6001\u7684 Host \u5c06\u5728\u4e00\u5929\u540e\u81ea\u52a8\u5220\u9664\u3002 \u5982\u4f55\u67e5\u770b dmp \u6587\u4ef6\uff1f \u00b6 dmp \u6587\u4ef6\u662f\u9519\u8bef\u62a5\u544a\u6587\u4ef6\uff0c\u8be6\u7ec6\u8bb0\u5f55\u4e86\u8fdb\u7a0b\u9000\u51fa\u7684\u4fe1\u606f\uff0c\u53ef\u4ee5\u7528\u64cd\u4f5c\u7cfb\u7edf\u81ea\u5e26\u7684 gdb \u5de5\u5177\u67e5\u770b\u3002Coredump \u6587\u4ef6\u9ed8\u8ba4\u4fdd\u5b58\u5728\u542f\u52a8\u4e8c\u8fdb\u5236\u7684\u5f53\u524d\u76ee\u5f55\u4e0b\uff08\u9ed8\u8ba4\u4e3a /usr/local/nebula \u76ee\u5f55\uff09\uff0c\u5728NebulaGraph\u670d\u52a1 crash \u65f6\uff0c\u7cfb\u7edf\u4f1a\u81ea\u52a8\u751f\u6210\u3002 \u67e5\u770b Core \u6587\u4ef6\u8fdb\u7a0b\u540d\u5b57\uff0cpid \u4e00\u822c\u4e3a\u6570\u503c\u3002 $ file core.<pid> \u4f7f\u7528 gdb \u8c03\u8bd5\u3002 $ gdb <process.name> core.<pid> \u67e5\u770b\u6587\u4ef6\u5185\u5bb9\u3002 $(gdb) bt \u4f8b\u5982\uff1a $ file core.1316027 core.1316027: ELF 64 -bit LSB core file, x86-64, version 1 ( SYSV ) , SVR4-style, from '/home/workspace/fork/nebula-debug/bin/nebula-metad --flagfile /home/k' , real uid: 1008 , effective uid: 1008 , real gid: 1008 , effective gid: 1008 , execfn: '/home/workspace/fork/nebula-debug/bin/nebula-metad' , platform: 'x86_64' $ gdb /home/workspace/fork/nebula-debug/bin/nebula-metad core.1316027 $( gdb ) bt #0 0x00007f9de58fecf5 in __memcpy_ssse3_back () from /lib64/libc.so.6 #1 0x0000000000eb2299 in void std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >::_M_construct<char*>(char*, char*, std::forward_iterator_tag) () #2 0x0000000000ef71a7 in nebula::meta::cpp2::QueryDesc::QueryDesc(nebula::meta::cpp2::QueryDesc const&) () ... \u5982\u679c\u7528\u6237\u4e0d\u6e05\u695a dmp \u6253\u5370\u51fa\u6765\u7684\u76f8\u5173\u4fe1\u606f\uff0c\u53ef\u4ee5\u5c06\u6253\u5370\u51fa\u6765\u7684\u5185\u5bb9\uff0c\u5e26\u4e0a\u64cd\u4f5c\u7cfb\u7edf\u7248\u672c\u3001\u786c\u4ef6\u914d\u7f6e\u3001Core\u6587\u4ef6\u4ea7\u751f\u524d\u540e\u7684\u9519\u8bef\u65e5\u5fd7\u548c\u53ef\u80fd\u5bfc\u81f4\u9519\u8bef\u7684\u64cd\u4f5c\u8d34\u5728 NebulaGraph \u8bba\u575b \u4e0a\u5bfb\u6c42\u5e2e\u52a9\u3002 \u5982\u4f55\u901a\u8fc7 systemctl \u8bbe\u7f6e\u5f00\u673a\u81ea\u52a8\u542f\u52a8NebulaGraph\u670d\u52a1\uff1f \u00b6 \u6267\u884c systemctl enable \u542f\u52a8 metad\u3001graphd \u548c storaged \u670d\u52a1\u3002 [root]# systemctl enable nebula-metad.service Created symlink from /etc/systemd/system/multi-user.target.wants/nebula-metad.service to /usr/lib/systemd/system/nebula-metad.service. [root]# systemctl enable nebula-graphd.service Created symlink from /etc/systemd/system/multi-user.target.wants/nebula-graphd.service to /usr/lib/systemd/system/nebula-graphd.service. [root]# systemctl enable nebula-storaged.service Created symlink from /etc/systemd/system/multi-user.target.wants/nebula-storaged.service to /usr/lib/systemd/system/nebula-storaged.service. \u914d\u7f6e metad\u3001graphd \u548c storaged \u7684 service \u6587\u4ef6\uff0c\u8bbe\u7f6e\u670d\u52a1\u81ea\u52a8\u62c9\u8d77\u3002 Caution \u5728\u914d\u7f6eservice\u6587\u4ef6\u65f6\u9700\u6ce8\u610f\u4ee5\u4e0b\u51e0\u70b9\uff1a - PIDFile\u3001ExecStart\u3001ExecReload\u3001ExecStop \u53c2\u6570\u7684\u8def\u5f84\u9700\u8981\u4e0e\u670d\u52a1\u5668\u4e0a\u7684\u4e00\u81f4\u3002 - RestartSec \u4e3a\u91cd\u542f\u524d\u7b49\u5f85\u7684\u65f6\u957f(\u79d2)\uff0c\u53ef\u6839\u636e\u5b9e\u9645\u60c5\u51b5\u4fee\u6539\u3002 - \uff08\u53ef\u9009\uff09StartLimitInterval \u4e3a\u65e0\u9650\u6b21\u91cd\u542f\uff0c\u9ed8\u8ba4\u662f 10 \u79d2\u5185\u5982\u679c\u91cd\u542f\u8d85\u8fc7 5 \u6b21\u5219\u4e0d\u518d\u91cd\u542f\uff0c\u8bbe\u7f6e\u4e3a 0 \u8868\u793a\u4e0d\u9650\u6b21\u6570\u91cd\u542f\u3002 - \uff08\u53ef\u9009\uff09LimitNOFILE \u4e3a\u670d\u52a1\u6700\u5927\u6587\u4ef6\u6253\u5f00\u6570\uff0c\u9ed8\u8ba4\u4e3a1024\uff0c\u53ef\u6839\u636e\u5b9e\u9645\u60c5\u51b5\u4fee\u6539\u3002 \u914d\u7f6e metad \u670d\u52a1\u7684 service \u6587\u4ef6\uff1a $ vi /usr/lib/systemd/system/nebula-metad.service [Unit] Description=Nebula Graph Metad Service After=network.target [Service ] Type=forking Restart=always RestartSec=15s PIDFile=/usr/local/nebula/pids/nebula-metad.pid ExecStart=/usr/local/nebula/scripts/nebula.service start metad ExecReload=/usr/local/nebula/scripts/nebula.service restart metad ExecStop=/usr/local/nebula/scripts/nebula.service stop metad PrivateTmp=true StartLimitInterval=0 LimitNOFILE=1024 [Install] WantedBy=multi-user.target \u914d\u7f6e graphd \u670d\u52a1\u7684 service \u6587\u4ef6\uff1a $ vi /usr/lib/systemd/system/nebula-graphd.service [Unit] Description=Nebula Graph Graphd Service After=network.target [Service] Type=forking Restart=always RestartSec=15s PIDFile=/usr/local/nebula/pids/nebula-graphd.pid ExecStart=/usr/local/nebula/scripts/nebula.service start graphd ExecReload=/usr/local/nebula/scripts/nebula.service restart graphd ExecStop=/usr/local/nebula/scripts/nebula.service stop graphd PrivateTmp=true StartLimitInterval=0 LimitNOFILE=1024 [Install] WantedBy=multi-user.target \u914d\u7f6e storaged \u670d\u52a1\u7684 service \u6587\u4ef6\uff1a $ vi /usr/lib/systemd/system/nebula-storaged.service [Unit] Description=Nebula Graph Storaged Service After=network.target [Service] Type=forking Restart=always RestartSec=15s PIDFile=/usr/local/nebula/pids/nebula-storaged.pid ExecStart=/usr/local/nebula/scripts/nebula.service start storaged ExecReload=/usr/local/nebula/scripts/nebula.service restart storaged ExecStop=/usr/local/nebula/scripts/nebula.service stop storaged PrivateTmp=true StartLimitInterval=0 LimitNOFILE=1024 [Install] WantedBy=multi-user.target reload \u914d\u7f6e\u6587\u4ef6\u3002 [root]# sudo systemctl daemon-reload \u91cd\u542f\u670d\u52a1\u3002 $ systemctl restart nebula-metad.service $ systemctl restart nebula-graphd.service $ systemctl restart nebula-storaged.service \u5173\u4e8e\u8fde\u63a5 \u00b6 \u9632\u706b\u5899\u4e2d\u9700\u8981\u5f00\u653e\u54ea\u4e9b\u7aef\u53e3\uff1f \u00b6 \u5982\u679c\u6ca1\u6709\u4fee\u6539\u8fc7 \u914d\u7f6e\u6587\u4ef6 \u4e2d\u9884\u8bbe\u7684\u7aef\u53e3\uff0c\u8bf7\u5728\u9632\u706b\u5899\u4e2d\u5f00\u653e\u5982\u4e0b\u7aef\u53e3\uff1a \u670d\u52a1\u7c7b\u578b \u7aef\u53e3 Meta 9559, 9560, 19559 Graph 9669, 19669 Storage 9777 ~ 9780, 19779 \u5982\u679c\u4fee\u6539\u8fc7\u914d\u7f6e\u6587\u4ef6\u4e2d\u9884\u8bbe\u7684\u7aef\u53e3\uff0c\u8bf7\u627e\u51fa\u5b9e\u9645\u4f7f\u7528\u7684\u7aef\u53e3\u5e76\u5728\u9632\u706b\u5899\u4e2d\u5f00\u653e\u5b83\u4eec\u3002 \u66f4\u591a\u7aef\u53e3\u4fe1\u606f\uff0c\u53c2\u89c1 \u516c\u53f8\u4ea7\u54c1\u7aef\u53e3\u5168\u96c6 \u3002 \u5982\u4f55\u6d4b\u8bd5\u7aef\u53e3\u662f\u5426\u5df2\u5f00\u653e\uff1f \u00b6 \u7528\u6237\u53ef\u4ee5\u4f7f\u7528\u5982\u4e0b telnet \u547d\u4ee4\u68c0\u67e5\u7aef\u53e3\u72b6\u6001\uff1a telnet <ip> <port> Note \u5982\u679c\u65e0\u6cd5\u4f7f\u7528 telnet \u547d\u4ee4\uff0c\u8bf7\u5148\u68c0\u67e5\u4e3b\u673a\u4e2d\u662f\u5426\u5b89\u88c5\u5e76\u542f\u52a8\u4e86 telnet\u3002 \u793a\u4f8b\uff1a // \u5982\u679c\u7aef\u53e3\u5df2\u5f00\u653e\uff1a $ telnet 192 .168.1.10 9669 Trying 192 .168.1.10... Connected to 192 .168.1.10. Escape character is '^]' . // \u5982\u679c\u7aef\u53e3\u672a\u5f00\u653e\uff1a $ telnet 192 .168.1.10 9777 Trying 192 .168.1.10... telnet: connect to address 192 .168.1.10: Connection refused \u4f1a\u8bdd\u6570\u91cf\u8fbe\u5230 max_sessions_per_ip_per_user \u6240\u8bbe\u503c\u4e0a\u9650\u65f6\u600e\u4e48\u529e\uff1f \u00b6 \u5f53\u4f1a\u8bdd\u6570\u91cf\u8fbe\u5230\u4e0a\u9650\u65f6\uff0c\u5373\u8d85\u8fc7 max_sessions_per_ip_per_user \u6240\u8bbe\u503c\uff0c\u5728\u8fde\u63a5NebulaGraph\u7684\u65f6\u5019\uff0c\u4f1a\u51fa\u73b0\u4ee5\u4e0b\u62a5\u9519\uff1a Fail to create a new session from connection pool, fail to authenticate, error: Create Session failed: Too many sessions created from 127.0.0.1 by user root. the threshold is 2. You can change it by modifying 'max_sessions_per_ip_per_user' in nebula-graphd.conf \u7528\u6237\u53ef\u4ee5\u901a\u8fc7\u4ee5\u4e0b\u4e09\u79cd\u65b9\u5f0f\u89e3\u51b3\u95ee\u9898\uff1a \u6267\u884c KILL SESSION \u547d\u4ee4\uff0c\u5173\u95ed\u4e0d\u9700\u8981\u7684 Session\u3002\u8be6\u60c5\u53c2\u89c1 \u7ec8\u6b62\u4f1a\u8bdd \u3002 \u5728 Graph \u670d\u52a1\u7684\u914d\u7f6e\u6587\u4ef6 nebula_graphd.conf \u4e2d\u589e\u5927 max_sessions_per_ip_per_user \u7684\u503c\uff0c\u589e\u52a0\u53ef\u4ee5\u521b\u5efa\u7684\u4f1a\u8bdd\u603b\u6570\u3002\u91cd\u542f Graph \u670d\u52a1\u4f7f\u914d\u7f6e\u751f\u6548\u3002 \u5728 Graph \u670d\u52a1\u7684\u914d\u7f6e\u6587\u4ef6 nebula_graphd.conf \u4e2d\u51cf\u5c0f session_idle_timeout_secs \u53c2\u6570\u7684\u503c\uff0c\u964d\u4f4e\u7a7a\u95f2\u4f1a\u8bdd\u7684\u8d85\u65f6\u65f6\u95f4\u3002\u91cd\u542f Graph \u670d\u52a1\u4f7f\u914d\u7f6e\u751f\u6548\u3002 \u5173\u4e8e\u6269\u5bb9\u3001\u7f29\u5bb9 \u00b6 Warning \u96c6\u7fa4\u6269\u7f29\u5bb9\u529f\u80fd\u672a\u6b63\u5f0f\u5728\u793e\u533a\u7248\u4e2d\u53d1\u5e03\u3002\u4ee5\u4e0b\u6d89\u53ca SUBMIT JOB BALANCE DATA REMOVE \u548c SUBMIT JOB BALANCE DATA \u7684\u64cd\u4f5c\u5728\u793e\u533a\u7248\u4e2d\u5747\u4e3a\u5b9e\u9a8c\u6027\u529f\u80fd\uff0c\u529f\u80fd\u672a\u7a33\u5b9a\u3002\u5982\u9700\u4f7f\u7528\uff0c\u8bf7\u5148\u505a\u597d\u6570\u636e\u5907\u4efd\uff0c\u5e76\u4e14\u5728 Graph \u914d\u7f6e\u6587\u4ef6 \u4e2d\u5c06 enable_experimental_feature \u548c enable_data_balance \u5747\u8bbe\u7f6e\u4e3a true \u3002 \u5982\u4f55\u589e\u52a0\u6216\u51cf\u5c11 Meta\u3001Graph\u3001Storage \u8282\u70b9\u7684\u6570\u91cf \u00b6 NebulaGraph 3.6.0 \u672a\u63d0\u4f9b\u8fd0\u7ef4\u547d\u4ee4\u4ee5\u5b9e\u73b0\u81ea\u52a8\u6269\u7f29\u5bb9\uff0c\u4f46\u53ef\u53c2\u8003\u4ee5\u4e0b\u6b65\u9aa4\u5b9e\u73b0\u624b\u52a8\u6269\u7f29\u5bb9\uff1a Meta \u7684\u6269\u5bb9\u548c\u7f29\u5bb9\uff1a Meta \u4e0d\u652f\u6301\u81ea\u52a8\u6269\u7f29\u5bb9\u3002 Note \u7528\u6237\u53ef\u4ee5\u4f7f\u7528 \u811a\u672c\u5de5\u5177 \u8fc1\u79fb Meta \u670d\u52a1\uff0c\u4f46\u662f\u9700\u8981\u81ea\u884c\u4fee\u6539 Graph \u670d\u52a1\u548c Storage \u670d\u52a1\u7684\u914d\u7f6e\u6587\u4ef6\u4e2d\u7684 Meta \u8bbe\u7f6e\u3002 Graph \u7684\u7f29\u5bb9\uff1a\u5c06\u8be5 Graph \u7684 IP \u4ece client \u7684\u4ee3\u7801\u4e2d\u79fb\u9664\uff0c\u5173\u95ed\u8be5 Graph \u8fdb\u7a0b\u3002 Graph \u7684\u6269\u5bb9\uff1a\u5728\u65b0\u673a\u5668\u4e0a\u51c6\u5907 Graph \u4e8c\u8fdb\u5236\u6587\u4ef6\u548c\u914d\u7f6e\u6587\u4ef6\uff0c\u5728\u914d\u7f6e\u6587\u4ef6\u4e2d\u4fee\u6539\u6216\u589e\u52a0\u5df2\u5728\u8fd0\u884c\u7684 Meta \u5730\u5740\uff0c\u542f\u52a8 Graph \u8fdb\u7a0b\u3002 Storage \u7684\u7f29\u5bb9\uff1a\u6267\u884c SUBMIT JOB BALANCE DATA REMOVE <ip:port> \u548c DROP HOSTS <ip:port> \u3002\u5b8c\u6210\u540e\u5173\u95ed Storage \u8fdb\u7a0b\u3002 Caution \u6267\u884c\u8be5\u547d\u4ee4\u8fc1\u79fb\u6307\u5b9a Storage \u8282\u70b9\u4e2d\u7684\u5206\u7247\u6570\u636e\u524d\uff0c\u9700\u8981\u786e\u4fdd\u5176\u4ed6 Storage \u8282\u70b9\u6570\u91cf\u8db3\u591f\u4ee5\u6ee1\u8db3\u8bbe\u7f6e\u7684\u526f\u672c\u6570\u3002\u4f8b\u5982\uff0c\u5982\u679c\u8bbe\u7f6e\u4e86\u526f\u672c\u6570\u4e3a 3\uff0c\u90a3\u4e48\u5728\u6267\u884c\u8be5\u547d\u4ee4\u524d\uff0c\u9700\u8981\u786e\u4fdd\u5176\u4ed6 Storage \u8282\u70b9\u6570\u91cf\u5927\u4e8e\u7b49\u4e8e 3\u3002 \u5982\u679c\u5f85\u8fc1\u79fb\u7684 Storage \u8282\u70b9\u4e2d\u6709\u591a\u4e2a\u56fe\u7a7a\u95f4\u7684\u5206\u7247\uff0c\u9700\u8981\u5206\u522b\u5728\u6bcf\u4e2a\u56fe\u7a7a\u95f4\u5185\u6267\u884c\u8be5\u547d\u4ee4\u4ee5\u8fc1\u79fb\u8be5 Storage \u8282\u70b9\u4e2d\u7684\u6240\u6709\u5206\u7247\u3002 Storage \u7684\u6269\u5bb9\uff1a\u5728\u65b0\u673a\u5668\u4e0a\u51c6\u5907 Storage \u4e8c\u8fdb\u5236\u6587\u4ef6\u548c\u914d\u7f6e\u6587\u4ef6\uff0c\u5728\u914d\u7f6e\u6587\u4ef6\u4e2d\u4fee\u6539\u6216\u589e\u52a0\u5df2\u5728\u8fd0\u884c\u7684 Meta \u5730\u5740\uff0c\u7136\u540e\u6ce8\u518c Storage \u5230 Meta \u5e76\u542f\u52a8 Storage \u8fdb\u7a0b\u3002\u8be6\u60c5\u53c2\u89c1 \u6ce8\u518c Storage \u670d\u52a1 \u3002 Storage \u6269\u7f29\u5bb9\u4e4b\u540e\uff0c\u6839\u636e\u9700\u8981\u6267\u884c SUBMIT JOB BALANCE DATA \u5c06\u5f53\u524d\u56fe\u7a7a\u95f4\u7684\u5206\u7247\u5e73\u5747\u5206\u914d\u5230\u6240\u6709 Storage \u8282\u70b9\u4e2d\u548c\u6267\u884c SUBMIT JOB BALANCE LEADER \u547d\u4ee4\u5747\u8861\u5206\u5e03\u6240\u6709\u56fe\u7a7a\u95f4\u4e2d\u7684 leader\u3002\u8fd0\u884c\u547d\u4ee4\u524d\uff0c\u9700\u8981\u9009\u62e9\u4e00\u4e2a\u56fe\u7a7a\u95f4\u3002 \u5982\u4f55\u5728 Storage \u8282\u70b9\u4e2d\u589e\u52a0\u6216\u51cf\u5c11\u78c1\u76d8 \u00b6 \u76ee\u524d\uff0cStorage \u4e0d\u652f\u6301\u52a8\u6001\u8bc6\u522b\u65b0\u7684\u78c1\u76d8\u3002\u53ef\u4ee5\u901a\u8fc7\u4ee5\u4e0b\u6b65\u9aa4\u5728\u5206\u5e03\u5f0f\u96c6\u7fa4\u7684 Storage \u8282\u70b9\u4e2d\u589e\u52a0\u6216\u51cf\u5c11\u78c1\u76d8\uff08\u4e0d\u652f\u6301\u5bf9\u5355\u4e2a Storage \u8282\u70b9\u7684\u96c6\u7fa4\u589e\u52a0\u6216\u51cf\u5c11\u78c1\u76d8\uff09\uff1a \u6267\u884c SUBMIT JOB BALANCE DATA REMOVE <ip:port> \u5c06\u5f85\u589e\u52a0\u6216\u51cf\u5c11\u78c1\u76d8\u7684 Storage \u8282\u70b9\u8fc1\u5230\u5176\u4ed6 Storage \u8282\u70b9\u4e2d\u3002 Caution \u6267\u884c\u8be5\u547d\u4ee4\u8fc1\u79fb\u6307\u5b9a Storage \u8282\u70b9\u4e2d\u7684\u5206\u7247\u6570\u636e\u524d\uff0c\u9700\u8981\u786e\u4fdd\u5176\u4ed6 Storage \u8282\u70b9\u6570\u91cf\u8db3\u591f\u4ee5\u6ee1\u8db3\u8bbe\u7f6e\u7684\u526f\u672c\u6570\u3002\u4f8b\u5982\uff0c\u5982\u679c\u8bbe\u7f6e\u4e86\u526f\u672c\u6570\u4e3a 3\uff0c\u90a3\u4e48\u5728\u6267\u884c\u8be5\u547d\u4ee4\u524d\uff0c\u9700\u8981\u786e\u4fdd\u5176\u4ed6 Storage \u8282\u70b9\u6570\u91cf\u5927\u4e8e\u7b49\u4e8e 3\u3002 \u5982\u679c\u5f85\u8fc1\u79fb\u7684 Storage \u8282\u70b9\u4e2d\u6709\u591a\u4e2a\u56fe\u7a7a\u95f4\u7684\u5206\u7247\uff0c\u9700\u8981\u5206\u522b\u5728\u6bcf\u4e2a\u56fe\u7a7a\u95f4\u5185\u6267\u884c\u8be5\u547d\u4ee4\u4ee5\u8fc1\u79fb\u8be5 Storage \u8282\u70b9\u4e2d\u7684\u6240\u6709\u5206\u7247\u3002 \u6267\u884c DROP HOSTS <ip:port> \u79fb\u9664\u5f85\u589e\u52a0\u6216\u51cf\u5c11\u78c1\u76d8\u7684 Storage \u8282\u70b9\u3002 \u5728\u6240\u6709 Storage \u8282\u70b9\u914d\u7f6e\u6587\u4ef6\u4e2d\u901a\u8fc7 --data_path \u914d\u7f6e\u65b0\u589e\u6216\u51cf\u5c11\u78c1\u76d8\u8def\u5f84\uff0c\u8be6\u60c5\u53c2\u89c1 Storage \u914d\u7f6e\u6587\u4ef6 \u3002 \u6267\u884c ADD HOSTS <ip:port> \u91cd\u65b0\u6dfb\u52a0\u5f85\u589e\u52a0\u6216\u51cf\u5c11\u78c1\u76d8\u7684 Storage \u8282\u70b9\u3002 \u6839\u636e\u9700\u8981\u6267\u884c SUBMIT JOB BALANCE DATA \u5c06\u5f53\u524d\u56fe\u7a7a\u95f4\u7684\u5206\u7247\u5e73\u5747\u5206\u914d\u5230\u6240\u6709 Storage \u8282\u70b9\u4e2d\u548c\u6267\u884c SUBMIT JOB BALANCE LEADER \u547d\u4ee4\u5747\u8861\u5206\u5e03\u6240\u6709\u56fe\u7a7a\u95f4\u4e2d\u7684 leader\u3002\u8fd0\u884c\u547d\u4ee4\u524d\uff0c\u9700\u8981\u9009\u62e9\u4e00\u4e2a\u56fe\u7a7a\u95f4\u3002","title":"\u5e38\u89c1\u95ee\u9898"},{"location":"20.appendix/0.FAQ/#faq","text":"\u672c\u6587\u5217\u51fa\u4e86\u4f7f\u7528NebulaGraph 3.6.0 \u65f6\u53ef\u80fd\u9047\u5230\u7684\u5e38\u89c1\u95ee\u9898\uff0c\u7528\u6237\u53ef\u4ee5\u4f7f\u7528\u6587\u6863\u4e2d\u5fc3\u6216\u8005\u6d4f\u89c8\u5668\u7684\u641c\u7d22\u529f\u80fd\u67e5\u627e\u76f8\u5e94\u95ee\u9898\u3002 \u5982\u679c\u6309\u7167\u6587\u4e2d\u7684\u5efa\u8bae\u65e0\u6cd5\u89e3\u51b3\u95ee\u9898\uff0c\u8bf7\u5230 NebulaGraph \u8bba\u575b \u63d0\u95ee\u6216\u63d0\u4ea4 GitHub issue \u3002","title":"\u5e38\u89c1\u95ee\u9898 FAQ"},{"location":"20.appendix/0.FAQ/#_1","text":"","title":"\u5173\u4e8e\u672c\u624b\u518c"},{"location":"20.appendix/0.FAQ/#_2","text":"NebulaGraph\u4e00\u76f4\u5728\u6301\u7eed\u5f00\u53d1\uff0c\u529f\u80fd\u6216\u64cd\u4f5c\u7684\u884c\u4e3a\u53ef\u80fd\u4f1a\u6709\u53d8\u5316\uff0c\u5982\u679c\u53d1\u73b0\u4e0d\u4e00\u81f4\uff0c\u8bf7\u63d0\u4ea4 issue \u901a\u77e5NebulaGraph\u56e2\u961f\u3002 Note \u5982\u679c\u53d1\u73b0\u672c\u6587\u6863\u4e2d\u7684\u9519\u8bef\uff1a \u7528\u6237\u53ef\u4ee5\u70b9\u51fb\u9875\u9762\u9876\u90e8\u53f3\u4e0a\u89d2\u7684\"\u94c5\u7b14\"\u56fe\u6807\u8fdb\u5165\u7f16\u8f91\u9875\u9762\u3002 \u4f7f\u7528 Markdown \u4fee\u6539\u6587\u6863\u3002\u5b8c\u6210\u540e\u70b9\u51fb\u9875\u9762\u5e95\u90e8\u7684 \"Commit changes\"\uff0c\u8fd9\u4f1a\u89e6\u53d1\u4e00\u4e2a GitHub pull request\u3002 \u5b8c\u6210 CLA \u7b7e\u7f72 \uff0c\u5e76\u4e14\u81f3\u5c11 2 \u4f4d reviewer \u5ba1\u6838\u901a\u8fc7\u5373\u53ef\u5408\u5e76\u3002","title":"\u4e3a\u4ec0\u4e48\u624b\u518c\u793a\u4f8b\u548c\u7cfb\u7edf\u884c\u4e3a\u4e0d\u4e00\u81f4\uff1f"},{"location":"20.appendix/0.FAQ/#_3","text":"X \u7248\u672c\u517c\u5bb9\u6027 NebulaGraph 3.6.0 \u4e0e \u5386\u53f2\u7248\u672c \uff08\u5305\u62ecNebulaGraph 1.x \u548c 2.x) \u7684\u6570\u636e\u683c\u5f0f\u3001\u5ba2\u6237\u7aef\u901a\u4fe1\u534f\u8bae\u5747 \u53cc\u5411\u4e0d\u517c\u5bb9 \u3002 \u4f7f\u7528 \u8001\u7248\u672c \u5ba2\u6237\u7aef\u8fde\u63a5 \u65b0\u7248\u672c \u670d\u52a1\u7aef\uff0c\u4f1a\u5bfc\u81f4\u670d\u52a1\u8fdb\u7a0b \u9000\u51fa \u3002 \u6570\u636e\u683c\u5f0f\u5347\u7ea7\u53c2\u89c1 \u5347\u7ea7NebulaGraph\u5386\u53f2\u7248\u672c\u81f3\u5f53\u524d\u7248\u672c \u3002 \u5ba2\u6237\u7aef\u4e0e\u5de5\u5177\u5747\u9700\u8981 \u4e0b\u8f7d\u5bf9\u5e94\u7248\u672c \u3002","title":"\u5173\u4e8e\u5386\u53f2\u517c\u5bb9\u6027"},{"location":"20.appendix/0.FAQ/#_4","text":"","title":"\u5173\u4e8e\u6267\u884c\u62a5\u9519"},{"location":"20.appendix/0.FAQ/#-1005graphmemoryexceeded_-2600","text":"\u8fd9\u4e2a\u9519\u8bef\u662f\u7531 Memory Tracker \u53d1\u51fa\u7684\uff0c\u5b83\u5728\u89c2\u5bdf\u5230\u5185\u5b58\u4f7f\u7528\u8d85\u8fc7\u4e86\u8bbe\u5b9a\u9608\u503c\u65f6\u53d1\u51fa\u8b66\u62a5\u3002\u8fd9\u4e2a\u673a\u5236\u53ef\u4ee5\u5e2e\u52a9\u907f\u514d\u670d\u52a1\u8fdb\u7a0b\u88ab\u7cfb\u7edf\u7684 OOM\uff08Out of Memory\uff09killer \u7ec8\u6b62\u3002\u89e3\u51b3\u6b65\u9aa4\uff1a \u68c0\u67e5\u5185\u5b58\u4f7f\u7528\u60c5\u51b5\uff1a\u9996\u5148\uff0c\u4f60\u9700\u8981\u67e5\u770b\u547d\u4ee4\u6267\u884c\u8fc7\u7a0b\u4e2d\u7684\u5185\u5b58\u7528\u91cf\u3002\u5982\u679c\u5185\u5b58\u4f7f\u7528\u91cf\u786e\u5b9e\u5f88\u9ad8\uff0c\u90a3\u4e48\u8fd9\u4e2a\u9519\u8bef\u53ef\u80fd\u662f\u9884\u671f\u4e2d\u7684\u60c5\u51b5\u3002 \u68c0\u67e5 Memory Tracker \u7684\u914d\u7f6e\uff1a\u5982\u679c\u5185\u5b58\u4f7f\u7528\u91cf\u5e76\u4e0d\u9ad8\uff0c\u68c0\u67e5 Memory Tracker \u7684\u76f8\u5173\u914d\u7f6e\u3002\u8fd9\u5305\u62ec memory_tracker_untracked_reserved_memory_mb \uff08\u672a\u88ab\u8ddf\u8e2a\u7684\u9884\u7559\u5185\u5b58\u91cf\uff0c\u5355\u4f4d\u4e3a MB\uff09\uff0c memory_tracker_limit_ratio \uff08\u5185\u5b58\u9650\u5236\u6bd4\u4f8b\uff09\uff0c\u4ee5\u53ca memory_purge_enabled \uff08\u662f\u5426\u542f\u7528\u5185\u5b58\u6e05\u7406\uff09\u3002\u5173\u4e8e Memory Tracker \u7684\u914d\u7f6e\uff0c\u53c2\u89c1 memory tracker \u914d\u7f6e \u3002 \u4f18\u5316\u914d\u7f6e\uff1a\u6839\u636e\u5b9e\u9645\u60c5\u51b5\uff0c\u8c03\u6574\u8fd9\u4e9b\u914d\u7f6e\u3002\u4f8b\u5982\uff0c\u5982\u679c\u53ef\u7528\u5185\u5b58\u9650\u5236\u8fc7\u4f4e\uff0c\u53ef\u4ee5\u8c03\u9ad8 memory_tracker_limit_ratio \u7684\u503c\u3002","title":"\u5982\u4f55\u5904\u7406\u9519\u8bef\u4fe1\u606f-1005:GraphMemoryExceeded: (-2600\uff09"},{"location":"20.appendix/0.FAQ/#semanticerror_missing_yield_clause","text":"\u4eceNebulaGraph 3.0.0 \u5f00\u59cb\uff0c\u67e5\u8be2\u8bed\u53e5 LOOKUP \u3001 GO \u3001 FETCH \u5fc5\u987b\u7528 YIELD \u5b50\u53e5\u6307\u5b9a\u8f93\u51fa\u7ed3\u679c\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1 YIELD \u3002","title":"\u5982\u4f55\u5904\u7406\u9519\u8bef\u4fe1\u606fSemanticError: Missing yield clause"},{"location":"20.appendix/0.FAQ/#host_not_enough","text":"\u4ece 3.0.0 \u7248\u672c\u5f00\u59cb\uff0c\u5728\u914d\u7f6e\u6587\u4ef6\u4e2d\u6dfb\u52a0\u7684 Storage \u8282\u70b9\u65e0\u6cd5\u76f4\u63a5\u8bfb\u5199\uff0c\u914d\u7f6e\u6587\u4ef6\u7684\u4f5c\u7528\u4ec5\u4ec5\u662f\u5c06 Storage \u8282\u70b9\u6ce8\u518c\u81f3 Meta \u670d\u52a1\u4e2d\u3002\u5fc5\u987b\u4f7f\u7528 ADD HOSTS \u547d\u4ee4\u540e\uff0c\u624d\u80fd\u6b63\u5e38\u8bfb\u5199 Storage \u8282\u70b9\u3002\u8be6\u60c5\u53c2\u89c1 \u7ba1\u7406 Storage \u4e3b\u673a \u3002","title":"\u5982\u4f55\u5904\u7406\u9519\u8bef\u4fe1\u606fHost not enough!"},{"location":"20.appendix/0.FAQ/#to_get_the_property_of_the_vertex_in_vage_should_use_the_format_vartagprop","text":"\u4ece 3.0.0 \u7248\u672c\u5f00\u59cb\uff0c pattern \u652f\u6301\u540c\u65f6\u5339\u914d\u591a\u4e2a Tag\uff0c\u6240\u4ee5\u8fd4\u56de\u5c5e\u6027\u65f6\uff0c\u9700\u8981\u989d\u5916\u6307\u5b9a Tag \u540d\u79f0\u3002\u5373\u4ece RETURN \u53d8\u91cf\u540d.\u5c5e\u6027\u540d \u6539\u4e3a RETURN \u53d8\u91cf\u540d.Tag\u540d.\u5c5e\u6027\u540d \u3002","title":"\u5982\u4f55\u5904\u7406\u9519\u8bef\u4fe1\u606fTo get the property of the vertex in 'v.age', should use the format 'var.tag.prop'"},{"location":"20.appendix/0.FAQ/#storage_error_e_rpc_failure","text":"\u62a5\u9519\u539f\u56e0\u901a\u5e38\u4e3a Graph \u670d\u52a1\u5411 Storage \u670d\u52a1\u8bf7\u6c42\u4e86\u8fc7\u591a\u7684\u6570\u636e\uff0c\u5bfc\u81f4 Storage \u670d\u52a1\u8d85\u65f6\u3002\u8bf7\u5c1d\u8bd5\u4ee5\u4e0b\u89e3\u51b3\u65b9\u6848\uff1a \u4fee\u6539\u914d\u7f6e\u6587\u4ef6 \uff1a\u5728 nebula-graphd.conf \u6587\u4ef6\u4e2d\u4fee\u6539 --storage_client_timeout_ms \u53c2\u6570\u7684\u503c\uff0c\u4ee5\u589e\u52a0 Storage client \u7684\u8fde\u63a5\u8d85\u65f6\u65f6\u95f4\u3002\u8be5\u503c\u7684\u5355\u4f4d\u4e3a\u6beb\u79d2\uff08ms\uff09\u3002\u4f8b\u5982\uff0c\u8bbe\u7f6e --storage_client_timeout_ms=60000 \u3002\u5982\u679c nebula-graphd.conf \u6587\u4ef6\u4e2d\u672a\u914d\u7f6e\u8be5\u53c2\u6570\uff0c\u8bf7\u624b\u52a8\u589e\u52a0\u3002\u63d0\u793a\uff1a\u8bf7\u5728\u914d\u7f6e\u6587\u4ef6\u5f00\u5934\u6dfb\u52a0 --local_config=true \u518d\u91cd\u542f\u670d\u52a1\u3002 \u4f18\u5316\u67e5\u8be2\u8bed\u53e5\uff1a\u51cf\u5c11\u5168\u5e93\u626b\u63cf\u578b\u7684\u67e5\u8be2\uff0c\u65e0\u8bba\u662f\u5426\u7528 LIMIT \u9650\u5236\u4e86\u8fd4\u56de\u7ed3\u679c\u7684\u6570\u91cf\uff1b\u7528 GO \u8bed\u53e5\u6539\u5199 MATCH \u8bed\u53e5\uff08\u524d\u8005\u6709\u4f18\u5316\uff0c\u540e\u8005\u65e0\u4f18\u5316\uff09\u3002 \u68c0\u67e5 Storaged \u662f\u5426\u53d1\u751f\u8fc7 OOM\u3002( dmesg |grep nebula )\u3002 \u4e3a Storage \u670d\u52a1\u5668\u63d0\u4f9b\u6027\u80fd\u66f4\u597d\u7684 SSD \u6216\u8005\u5185\u5b58\u3002 \u91cd\u8bd5\u8bf7\u6c42\u3002","title":"\u5982\u4f55\u5904\u7406\u9519\u8bef\u4fe1\u606fStorage Error E_RPC_FAILURE"},{"location":"20.appendix/0.FAQ/#the_leader_has_changed_try_again_later","text":"\u5df2\u77e5\u95ee\u9898\uff0c\u901a\u5e38\u9700\u8981\u91cd\u8bd5 1-N \u6b21 (N==partition \u6570\u91cf\uff09\u3002\u539f\u56e0\u4e3a meta client \u66f4\u65b0 leader \u7f13\u5b58\u9700\u8981 1-2 \u4e2a\u5fc3\u8df3\u6216\u8005\u901a\u8fc7\u9519\u8bef\u89e6\u53d1\u5f3a\u5236\u66f4\u65b0\u3002 \u5982\u679c\u767b\u5f55NebulaGraph\u65f6\uff0c\u51fa\u73b0\u8be5\u62a5\u9519\uff0c\u53ef\u4ee5\u8003\u8651\u4f7f\u7528 df -h \u67e5\u770b\u78c1\u76d8\u7a7a\u95f4\uff0c\u68c0\u67e5\u672c\u5730\u78c1\u76d8\u7a7a\u95f4\u662f\u5426\u5df2\u6ee1\u3002","title":"\u5982\u4f55\u5904\u7406\u9519\u8bef\u4fe1\u606fThe leader has changed. Try again later"},{"location":"20.appendix/0.FAQ/#exchangeconnectorsalgorithm_snapshot","text":"\u73b0\u8c61\uff1a\u7f16\u8bd1\u65f6\u63d0\u793a Could not find artifact com.vesoft:client:jar:xxx-SNAPSHOT \u3002 \u539f\u56e0\uff1a\u672c\u5730 maven \u6ca1\u6709\u914d\u7f6e\u7528\u4e8e\u4e0b\u8f7d SNAPSHOT \u7684\u4ed3\u5e93\u3002maven \u4e2d\u9ed8\u8ba4\u7684 central \u4ed3\u5e93\u7528\u4e8e\u5b58\u653e\u6b63\u5f0f\u53d1\u5e03\u7248\u672c\uff0c\u800c\u4e0d\u662f\u5f00\u53d1\u7248\u672c\uff08SNAPSHOT\uff09\u3002 \u89e3\u51b3\u65b9\u6848\uff1a\u5728 maven \u7684 setting.xml\u6587\u4ef6\u7684 profiles \u4f5c\u7528\u57df\u5185\u4e2d\u589e\u52a0\u4ee5\u4e0b\u914d\u7f6e\uff1a <profile> <activation> <activeByDefault>true</activeByDefault> </activation> <repositories> <repository> <id>snapshots</id> <url>https://oss.sonatype.org/content/repositories/snapshots/</url> <snapshots> <enabled>true</enabled> </snapshots> </repository> </repositories> </profile>","title":"\u7f16\u8bd1 Exchange\u3001Connectors\u3001Algorithm \u65f6\u65e0\u6cd5\u4e0b\u8f7d SNAPSHOT \u5305"},{"location":"20.appendix/0.FAQ/#error_-1004_syntaxerror_syntax_error_near","text":"\u5927\u90e8\u5206\u60c5\u51b5\u4e0b\uff0c\u67e5\u8be2\u8bed\u53e5\u9700\u8981\u6709 YIELD \u6216 RETURN \uff0c\u8bf7\u68c0\u67e5\u67e5\u8be2\u8bed\u53e5\u662f\u5426\u5305\u542b\u3002","title":"\u5982\u4f55\u5904\u7406\u9519\u8bef\u4fe1\u606f[ERROR (-1004)]: SyntaxError: syntax error near\uff1f"},{"location":"20.appendix/0.FAQ/#cant_solve_the_start_vids_from_the_sentence","text":"\u67e5\u8be2\u5f15\u64ce\u9700\u8981\u77e5\u9053\u4ece\u54ea\u4e9b VID \u5f00\u59cb\u56fe\u904d\u5386\u3002\u8fd9\u4e9b\u5f00\u59cb\u56fe\u904d\u5386\u7684 VID\uff0c\u6216\u8005\u901a\u8fc7\u7528\u6237\u6307\u5b9a\uff0c\u4f8b\u5982\uff1a > GO FROM ${vids} ... > MATCH (src) WHERE id(src) == ${vids} # \u5f00\u59cb\u56fe\u904d\u5386\u7684 VID \u901a\u8fc7\u5982\u4e0a\u529e\u6cd5\u6307\u5b9a \u6216\u8005\u901a\u8fc7\u4e00\u4e2a\u5c5e\u6027\u7d22\u5f15\u6765\u5f97\u5230\uff0c\u4f8b\u5982\uff1a # CREATE TAG INDEX IF NOT EXISTS i_player ON player(name(20)); # REBUILD TAG INDEX i_player; > LOOKUP ON player WHERE player.name == \"abc\" | ... YIELD ... > MATCH (src) WHERE src.name == \"abc\" ... # \u901a\u8fc7\u70b9\u5c5e\u6027 name \u7684\u7d22\u5f15\uff0c\u6765\u5f97\u5230 VID \u5426\u5219\uff0c\u5c31\u4f1a\u629b\u51fa\u8fd9\u6837\u4e00\u4e2a\u5f02\u5e38 can\u2019t solve the start vids from the sentence \u3002","title":"\u5982\u4f55\u5904\u7406\u9519\u8bef\u4fe1\u606fcan\u2019t solve the start vids from the sentence"},{"location":"20.appendix/0.FAQ/#wrong_vertex_id_type_1001","text":"\u68c0\u67e5\u8f93\u5165\u7684 VID \u7c7b\u578b\u662f\u5426\u662f create space \u8bbe\u7f6e\u7684 INT64 \u6216 FIXED_STRING(N) \u3002\u8be6\u60c5\u8bf7\u53c2\u89c1 create space \u3002","title":"\u5982\u4f55\u5904\u7406\u9519\u8bef\u4fe1\u606fWrong vertex id type: 1001"},{"location":"20.appendix/0.FAQ/#the_vid_must_be_a_64-bit_integer_or_a_string_fitting_space_vertex_id_length_limit","text":"\u68c0\u67e5\u8f93\u5165\u7684 VID \u662f\u5426\u8d85\u8fc7\u9650\u5236\u957f\u5ea6\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1 create space \u3002","title":"\u5982\u4f55\u5904\u7406\u9519\u8bef\u4fe1\u606fThe VID must be a 64-bit integer or a string fitting space vertex id length limit."},{"location":"20.appendix/0.FAQ/#edge_conflict_vertex_conflict","text":"Storage \u670d\u52a1\u5728\u6beb\u79d2\u7ea7\u65f6\u95f4\u5185\u591a\u6b21\u6536\u5230\u63d2\u5165\u6216\u8005\u66f4\u65b0\u540c\u4e00\u70b9\u6216\u8fb9\u7684\u8bf7\u6c42\u65f6\uff0c\u53ef\u80fd\u8fd4\u56de\u8be5\u9519\u8bef\u3002\u8bf7\u7a0d\u540e\u91cd\u8bd5\u3002","title":"\u5982\u4f55\u5904\u7406\u9519\u8bef\u4fe1\u606f edge conflict \u6216 vertex conflict"},{"location":"20.appendix/0.FAQ/#rpc_failure_in_metaclient_connection_refused","text":"\u62a5\u9519\u539f\u56e0\u901a\u5e38\u4e3a metad \u670d\u52a1\u72b6\u6001\u5f02\u5e38\uff0c\u6216\u662f metad \u548c graphd \u670d\u52a1\u6240\u5728\u673a\u5668\u7f51\u7edc\u4e0d\u901a\u3002\u8bf7\u5c1d\u8bd5\u4ee5\u4e0b\u89e3\u51b3\u65b9\u6848\uff1a \u5728 metad \u6240\u5728\u670d\u52a1\u5668\u67e5\u770b\u4e0b metad \u670d\u52a1\u72b6\u6001\uff0c\u5982\u679c\u670d\u52a1\u72b6\u6001\u5f02\u5e38\uff0c\u53ef\u4ee5\u91cd\u65b0\u542f\u52a8 metad \u670d\u52a1\u3002 \u5728\u62a5\u9519\u670d\u52a1\u5668\u4e0b\u4f7f\u7528 telnet meta-ip:port \u67e5\u770b\u7f51\u7edc\u72b6\u6001\u3002 \u68c0\u67e5\u914d\u7f6e\u6587\u4ef6\u4e2d\u7684\u7aef\u53e3\u914d\u7f6e\uff0c\u5982\u679c\u7aef\u53e3\u53f7\u4e0e\u8fde\u63a5\u65f6\u4f7f\u7528\u7684\u4e0d\u540c\uff0c\u6539\u7528\u914d\u7f6e\u6587\u4ef6\u4e2d\u7684\u7aef\u53e3\u6216\u8005\u4fee\u6539\u914d\u7f6e\u3002","title":"\u5982\u4f55\u5904\u7406\u9519\u8bef\u4fe1\u606f RPC failure in MetaClient: Connection refused"},{"location":"20.appendix/0.FAQ/#nebula-graphinfo_storageclientbaseinl214_request_to_xxxx9779_failed_n6apache6thrift9transport19ttransportexceptione_timed_out","text":"\u62a5\u9519\u539f\u56e0\u53ef\u80fd\u662f\u67e5\u8be2\u7684\u6570\u636e\u91cf\u6bd4\u8f83\u5927\uff0cstoraged \u5904\u7406\u8d85\u65f6\u3002\u8bf7\u5c1d\u8bd5\u4ee5\u4e0b\u89e3\u51b3\u65b9\u6cd5\uff1a \u5bfc\u5165\u6570\u636e\u65f6\uff0c\u624b\u52a8 compaction \uff0c\u52a0\u901f\u8bfb\u7684\u901f\u5ea6\u3002 \u589e\u52a0 Graph \u670d\u52a1\u4e0e Storage \u670d\u52a1\u7684 RPC \u8fde\u63a5\u8d85\u65f6\u65f6\u95f4\uff0c\u5728 nebula-graphd.conf \u6587\u4ef6\u91cc\u9762\u4fee\u6539 --storage_client_timeout_ms \u53c2\u6570\u7684\u503c\u3002\u8be5\u503c\u7684\u5355\u4f4d\u4e3a\u6beb\u79d2\uff08ms\uff09\uff0c\u9ed8\u8ba4\u503c\u4e3a 60000 \u6beb\u79d2\u3002","title":"\u5982\u4f55\u5904\u7406 nebula-graph.INFO \u4e2d\u9519\u8bef\u65e5\u5fd7 StorageClientBase.inl:214] Request to \"x.x.x.x\":9779 failed: N6apache6thrift9transport19TTransportExceptionE: Timed Out"},{"location":"20.appendix/0.FAQ/#nebula-storagedinfo_metaclientcpp65_heartbeat_failed_statuswrong_cluster_nebula-metadinfo_hbprocessorcpp54_reject_wrong_cluster_host_xxxx9771","text":"\u62a5\u9519\u7684\u539f\u56e0\u53ef\u80fd\u662f\u7528\u6237\u4fee\u6539\u4e86 metad \u7684 ip \u6216\u8005\u7aef\u53e3\u4fe1\u606f\uff0c\u6216\u8005 storage \u4e4b\u524d\u52a0\u5165\u8fc7\u5176\u4ed6\u96c6\u7fa4\u3002\u8bf7\u5c1d\u8bd5\u4ee5\u4e0b\u89e3\u51b3\u65b9\u6cd5\uff1a \u7528\u6237\u5230 storage \u90e8\u7f72\u7684\u673a\u5668\u6240\u5728\u7684\u5b89\u88c5\u76ee\u5f55\uff08\u9ed8\u8ba4\u5b89\u88c5\u76ee\u5f55\u4e3a /usr/local/nebula \uff09\u4e0b\u9762\u5c06 cluster.id \u6587\u4ef6\u5220\u9664\uff0c\u7136\u540e\u91cd\u542f storaged \u670d\u52a1\u3002","title":"\u5982\u4f55\u5904\u7406 nebula-storaged.INFO \u4e2d\u9519\u8bef\u65e5\u5fd7 MetaClient.cpp:65] Heartbeat failed, status:Wrong cluster! \u6216\u8005 nebula-metad.INFO \u542b\u6709\u9519\u8bef\u65e5\u5fd7HBProcessor.cpp:54] Reject wrong cluster host \"x.x.x.x\":9771!"},{"location":"20.appendix/0.FAQ/#storage_error_more_than_one_request_trying_to_addupdatedelete_one_edgevertex_at_he_same_time","text":"\u4e0a\u8ff0\u62a5\u9519\u8868\u793a\u5f53\u524d\u7248\u672c\u4e0d\u5141\u8bb8\u540c\u65f6\u5bf9\u4e00\u4e2a\u70b9\u6216\u8005\u4e00\u6761\u8fb9\u8fdb\u884c\u5e76\u53d1\u64cd\u4f5c\u3002\u5982\u51fa\u73b0\u6b64\u62a5\u9519\u8bf7\u91cd\u65b0\u6267\u884c\u64cd\u4f5c\u547d\u4ee4\u3002","title":"\u5982\u4f55\u5904\u7406\u62a5\u9519\u4fe1\u606fStorage Error: More than one request trying to add/update/delete one edge/vertex at he same time."},{"location":"20.appendix/0.FAQ/#_5","text":"","title":"\u5173\u4e8e\u8bbe\u8ba1\u4e0e\u529f\u80fd"},{"location":"20.appendix/0.FAQ/#time_spent","text":"\u5c06\u547d\u4ee4 SHOW SPACES \u8fd4\u56de\u7684\u6d88\u606f\u4f5c\u4e3a\u793a\u4f8b\uff1a nebula> SHOW SPACES; +--------------------+ | Name | +--------------------+ | \"basketballplayer\" | +--------------------+ Got 1 rows (time spent 1235/1934 us) \u7b2c\u4e00\u4e2a\u6570\u5b57 1235 \u8868\u793a\u6570\u636e\u5e93\u672c\u8eab\u6267\u884c\u8be5\u547d\u4ee4\u82b1\u8d39\u7684\u65f6\u95f4\uff0c\u5373\u67e5\u8be2\u5f15\u64ce\u4ece\u5ba2\u6237\u7aef\u63a5\u6536\u5230\u4e00\u4e2a\u67e5\u8be2\uff0c\u7136\u540e\u4ece\u5b58\u50a8\u670d\u52a1\u5668\u83b7\u53d6\u6570\u636e\u5e76\u6267\u884c\u4e00\u7cfb\u5217\u8ba1\u7b97\u6240\u82b1\u8d39\u7684\u65f6\u95f4\u3002 \u7b2c\u4e8c\u4e2a\u6570\u5b57 1934 \u8868\u793a\u4ece\u5ba2\u6237\u7aef\u89d2\u5ea6\u770b\u6240\u82b1\u8d39\u7684\u65f6\u95f4\uff0c\u5373\u4ece\u5ba2\u6237\u7aef\u53d1\u9001\u8bf7\u6c42\u3001\u63a5\u6536\u7ed3\u679c\uff0c\u7136\u540e\u5728\u5c4f\u5e55\u4e0a\u663e\u793a\u7ed3\u679c\u6240\u82b1\u8d39\u7684\u65f6\u95f4\u3002","title":"\u8fd4\u56de\u6d88\u606f\u4e2d time spent \u7684\u542b\u4e49\u662f\u4ec0\u4e48\uff1f"},{"location":"20.appendix/0.FAQ/#nebulagraphnebula-storaged","text":"nebula-storaged \u8fdb\u7a0b\u7684\u7aef\u53e3\u53f7\u7684\u7ea2\u8272\u95ea\u70c1\u72b6\u6001\u662f\u56e0\u4e3a nebula-storaged \u5728\u542f\u52a8\u6d41\u7a0b\u4e2d\u4f1a\u7b49\u5f85 nebula-metad \u6dfb\u52a0\u5f53\u524d Storage \u670d\u52a1\uff0c\u5f53\u524d Storage \u670d\u52a1\u6536\u5230 Ready \u4fe1\u53f7\u540e\u624d\u4f1a\u6b63\u5f0f\u542f\u52a8\u670d\u52a1\u3002\u4ece 3.0.0 \u7248\u672c\u5f00\u59cb\uff0cMeta \u670d\u52a1\u65e0\u6cd5\u76f4\u63a5\u8bfb\u5199\u5728\u914d\u7f6e\u6587\u4ef6\u4e2d\u6dfb\u52a0\u7684 Storage \u670d\u52a1\uff0c\u914d\u7f6e\u6587\u4ef6\u7684\u4f5c\u7528\u4ec5\u4ec5\u662f\u5c06 Storage \u670d\u52a1\u6ce8\u518c\u81f3 Meta \u670d\u52a1\u4e2d\u3002\u7528\u6237\u5fc5\u987b\u4f7f\u7528 ADD HOSTS \u547d\u4ee4\u540e\uff0c\u624d\u80fd\u4f7f Meta \u670d\u52a1\u6b63\u5e38\u8bfb\u5199 Storage \u670d\u52a1\u3002\u66f4\u591a\u4fe1\u606f\uff0c\u53c2\u89c1 \u7ba1\u7406 Storage \u4e3b\u673a \u3002","title":"\u4e3a\u4ec0\u4e48\u5728\u6b63\u5e38\u8fde\u63a5NebulaGraph\u540e\uff0cnebula-storaged\u8fdb\u7a0b\u7684\u7aef\u53e3\u53f7\u4e00\u76f4\u663e\u793a\u7ea2\u8272\uff1f"},{"location":"20.appendix/0.FAQ/#nebulagraph","text":"\u8fd9\u662f NebulaGraph Console 2.6.0 \u7248\u672c\u7684\u53d8\u52a8\u9020\u6210\u7684\uff0c\u4e0d\u662fNebulaGraph\u5185\u6838\u7684\u53d8\u66f4\uff0c\u4e0d\u5f71\u54cd\u8fd4\u56de\u6570\u636e\u672c\u8eab\u7684\u5185\u5bb9\u3002","title":"\u4e3a\u4ec0\u4e48NebulaGraph\u7684\u8fd4\u56de\u7ed3\u679c\u6bcf\u884c\u4e4b\u95f4\u6ca1\u6709\u6a2a\u7ebf\u5206\u9694\u4e86\uff1f"},{"location":"20.appendix/0.FAQ/#_6","text":"\u60ac\u6302\u8fb9 (Dangling edge) \u662f\u6307\u4e00\u6761\u8fb9\u7684\u8d77\u70b9\u6216\u8005\u7ec8\u70b9\u5728\u6570\u636e\u5e93\u4e2d\u4e0d\u5b58\u5728\u3002 NebulaGraph 3.6.0 \u7684\u6570\u636e\u6a21\u578b\u4e2d\uff0c\u7531\u4e8e\u8bbe\u8ba1\u5141\u8bb8\u56fe\u4e2d\u5b58\u5728\u201c\u60ac\u6302\u8fb9\u201d\uff1b \u6ca1\u6709 openCypher \u4e2d\u7684 MERGE \u8bed\u53e5\u3002 \u5bf9\u4e8e\u60ac\u6302\u8fb9\u7684\u4fdd\u8bc1\u5b8c\u5168\u4f9d\u8d56\u5e94\u7528\u5c42\u9762\u3002 \u8be6\u89c1 INSERT VERTEX , DELETE VERTEX , INSERT EDGE , DELETE EDGE \u3002","title":"\u5173\u4e8e\u60ac\u6302\u8fb9"},{"location":"20.appendix/0.FAQ/#create_spacereplica_factor_2","text":"\u4e0d\u8981\u8fd9\u6837\u8bbe\u7f6e\u3002 Storage \u670d\u52a1\u4f7f\u7528 Raft \u534f\u8bae\uff08\u591a\u6570\u8868\u51b3\uff09\uff0c\u4e3a\u4fdd\u8bc1\u53ef\u7528\u6027\uff0c\u8981\u6c42\u51fa\u6545\u969c\u7684\u526f\u672c\u6570\u91cf\u4e0d\u80fd\u8fbe\u5230\u4e00\u534a\u3002 \u5f53\u673a\u5668\u6570\u91cf\u4e3a 1 \u65f6\uff0c replica_factor \u53ea\u80fd\u8bbe\u7f6e\u4e3a 1 \u3002 \u5f53\u673a\u5668\u6570\u91cf\u8db3\u591f\u65f6\uff0c\u5982\u679c replica_factor=2 \uff0c\u5f53\u5176\u4e2d\u4e00\u4e2a\u526f\u672c\u6545\u969c\u65f6\uff0c\u5c31\u4f1a\u5bfc\u81f4\u7cfb\u7edf\u65e0\u6cd5\u6b63\u5e38\u5de5\u4f5c\uff1b\u5982\u679c replica_factor=4 \uff0c\u53ea\u80fd\u6709\u4e00\u4e2a\u526f\u672c\u53ef\u4ee5\u51fa\u73b0\u6545\u969c\uff0c\u8fd9\u548c replica_factor=3 \u662f\u4e00\u6837\u3002\u4ee5\u6b64\u7c7b\u63a8\uff0c\u6240\u4ee5 replica_factor \u8bbe\u7f6e\u4e3a\u5947\u6570\u5373\u53ef\u3002 \u5efa\u8bae\u5728\u751f\u4ea7\u73af\u5883\u4e2d\u8bbe\u7f6e replica_factor=3 \uff0c\u6d4b\u8bd5\u73af\u5883\u4e2d\u8bbe\u7f6e replica_factor=1 \uff0c\u4e0d\u8981\u4f7f\u7528\u5076\u6570\u3002","title":"\u53ef\u4ee5\u5728CREATE SPACE\u65f6\u8bbe\u7f6ereplica_factor\u4e3a\u5076\u6570\uff08\u4f8b\u5982\u8bbe\u7f6e\u4e3a 2\uff09\u5417\uff1f"},{"location":"20.appendix/0.FAQ/#_7","text":"\u652f\u6301\u3002 \u8be6\u60c5\u8bf7\u53c2\u89c1 \u7ec8\u6b62\u67e5\u8be2 \u3002","title":"\u662f\u5426\u652f\u6301\u505c\u6b62\u6216\u8005\u4e2d\u65ad\u6162\u67e5\u8be2"},{"location":"20.appendix/0.FAQ/#gomatch","text":"\u539f\u56e0\u53ef\u80fd\u6709\u4ee5\u4e0b\u51e0\u79cd\uff1a GO \u67e5\u8be2\u5230\u4e86\u60ac\u6302\u8fb9\u3002 RETURN \u547d\u4ee4\u672a\u6307\u5b9a\u6392\u5e8f\u65b9\u5f0f\u3002 \u89e6\u53d1\u4e86 Storage \u670d\u52a1\u4e2d max_edge_returned_per_vertex \u5b9a\u4e49\u7684\u7a20\u5bc6\u70b9\u622a\u65ad\u9650\u5236\u3002 \u8def\u5f84\u7684\u7c7b\u578b\u4e0d\u540c\uff0c\u5bfc\u81f4\u67e5\u8be2\u7ed3\u679c\u53ef\u80fd\u4f1a\u4e0d\u540c\u3002 GO \u8bed\u53e5\u91c7\u7528\u7684\u662f walk \u7c7b\u578b\uff0c\u904d\u5386\u65f6\u70b9\u548c\u8fb9\u53ef\u4ee5\u91cd\u590d\u3002 MATCH \u8bed\u53e5\u517c\u5bb9 openCypher\uff0c\u91c7\u7528\u7684\u662f trail \u7c7b\u578b\uff0c\u904d\u5386\u65f6\u53ea\u6709\u70b9\u53ef\u4ee5\u91cd\u590d\uff0c\u8fb9\u4e0d\u53ef\u4ee5\u91cd\u590d\u3002 \u56e0\u8def\u5f84\u7c7b\u578b\u4e0d\u540c\u5bfc\u81f4\u67e5\u8be2\u7ed3\u679c\u4e0d\u540c\u7684\u793a\u4f8b\u56fe\u548c\u8bf4\u660e\u5982\u4e0b\u3002 \u4ece\u70b9 A \u5f00\u59cb\u67e5\u8be2\u8ddd\u79bb 5 \u8df3\u7684\u70b9\uff0c\u90fd\u4f1a\u67e5\u8be2\u5230\u70b9 C\uff08 A->B->C->D->E->C \uff09\uff0c\u67e5\u8be2 6 \u8df3\u7684\u70b9\u65f6\uff0c GO \u8bed\u53e5\u4f1a\u67e5\u8be2\u5230\u70b9 D\uff08 A->B->C->D->E->C->D \uff09\uff0c\u56e0\u4e3a\u8fb9 C->D \u53ef\u4ee5\u91cd\u590d\u67e5\u8be2\uff0c\u800c MATCH \u8bed\u53e5\u67e5\u8be2\u4e3a\u7a7a\uff0c\u56e0\u4e3a\u8fb9\u4e0d\u53ef\u4ee5\u91cd\u590d\u3002 \u6240\u4ee5\u4f7f\u7528 GO \u548c MATCH \u6267\u884c\u76f8\u540c\u8bed\u4e49\u7684\u67e5\u8be2\uff0c\u53ef\u80fd\u4f1a\u51fa\u73b0 MATCH \u8bed\u53e5\u7684\u67e5\u8be2\u7ed3\u679c\u6bd4 GO \u8bed\u53e5\u5c11\u3002 \u5173\u4e8e\u8def\u5f84\u7684\u8be6\u7ec6\u8bf4\u660e\uff0c\u8bf7\u53c2\u89c1 \u7ef4\u57fa\u767e\u79d1 \u3002","title":"\u4f7f\u7528GO\u548cMATCH\u6267\u884c\u76f8\u540c\u8bed\u4e49\u7684\u67e5\u8be2\uff0c\u67e5\u8be2\u7ed3\u679c\u4e3a\u4ec0\u4e48\u4e0d\u540c\uff1f"},{"location":"20.appendix/0.FAQ/#tag_edge_type","text":"\u8bf7\u53c2\u89c1 show-stats \u3002","title":"\u5982\u4f55\u7edf\u8ba1\u6bcf\u79cd Tag \u6709\u591a\u5c11\u4e2a\u70b9\uff0c\u6bcf\u4e2a Edge type \u6709\u591a\u5c11\u6761\u8fb9\uff1f"},{"location":"20.appendix/0.FAQ/#tag_edge_type_1","text":"\u5efa\u7acb\u5e76\u91cd\u5efa\u7d22\u5f15\u3002 > CREATE TAG INDEX IF NOT EXISTS i_player ON player(); > REBUILD TAG INDEX i_player; \u4f7f\u7528 LOOKUP \u6216 MATCH \u8bed\u53e5\u3002\u4f8b\u5982\uff1a > LOOKUP ON player; > MATCH (n:player) RETURN n; \u66f4\u591a\u8be6\u60c5\u8bf7\u53c2\u89c1 INDEX \u3001 LOOKUP \u548c MATCH \u3002","title":"\u5982\u4f55\u83b7\u53d6\u6bcf\u79cd Tag \u7684\u6240\u6709\u70b9\uff0c\u6216\u8005\u6bcf\u79cd Edge type \u7684\u6240\u6709\u8fb9\uff1f"},{"location":"20.appendix/0.FAQ/#tagedge_type","text":"\u80fd\uff0c\u8be6\u60c5\u53c2\u89c1 \u5173\u952e\u5b57\u548c\u4fdd\u7559\u5b57 \u3002","title":"\u80fd\u4e0d\u80fd\u7528\u4e2d\u6587\u5b57\u7b26\u505a\u6807\u8bc6\u7b26\uff0c\u6bd4\u5982\u56fe\u7a7a\u95f4\u3001Tag\u3001Edge type\u3001\u5c5e\u6027\u3001\u7d22\u5f15\u7684\u540d\u79f0\uff1f"},{"location":"20.appendix/0.FAQ/#_8","text":"\u4e00\u4e2a\u70b9\u7684\u201c\u51fa\u5ea6\u201d\u662f\u6307\u4ece\u8be5\u70b9\u51fa\u53d1\u7684\u201c\u8fb9\u201d\u7684\u6761\u6570\u3002\u5165\u5ea6\uff0c\u662f\u6307\u6307\u5411\u8be5\u70b9\u7684\u8fb9\u7684\u6761\u6570\u3002 nebula > MATCH (s)-[e]->() WHERE id(s) == \"given\" RETURN count(e); #\u51fa\u5ea6 nebula > MATCH (s)<-[e]-() WHERE id(s) == \"given\" RETURN count(e); #\u5165\u5ea6 \u56e0\u4e3a\u6ca1\u6709\u5bf9\u51fa\u5ea6\u548c\u5165\u5ea6\u7684\u8fdb\u884c\u7279\u6b8a\u5904\u7406\uff08\u4f8b\u5982\u7d22\u5f15\u6216\u8005\u7f13\u5b58\uff09\uff0c\u8fd9\u662f\u4e00\u4e2a\u8f83\u6162\u7684\u64cd\u4f5c\u3002\u7279\u522b\u5f53\u9047\u5230 \u8d85\u7ea7\u8282\u70b9 \u65f6\uff0c\u53ef\u80fd\u4f1a\u53d1\u751fOOM\u3002","title":"\u83b7\u53d6\u6307\u5b9a\u70b9\u7684\u51fa\u5ea6\uff08\u6216\u8005\u5165\u5ea6\uff09?"},{"location":"20.appendix/0.FAQ/#_9","text":"\u6ca1\u6709\u76f4\u63a5\u547d\u4ee4\u3002 \u53ef\u4ee5\u4f7f\u7528 NebulaGraph Algorithm \u3002","title":"\u662f\u5426\u6709\u529e\u6cd5\u5feb\u901f\u83b7\u53d6\u201c\u6240\u6709\u201d\u70b9\u7684\u51fa\u5ea6\u548c\u5165\u5ea6\uff1f"},{"location":"20.appendix/0.FAQ/#_10","text":"","title":"\u5173\u4e8e\u8fd0\u7ef4"},{"location":"20.appendix/0.FAQ/#_11","text":"NebulaGraph\u7684\u8fd0\u884c\u65e5\u5fd7\u9ed8\u8ba4\u5728 /usr/local/nebula/logs/ \u4e0b\uff0c\u6b63\u5e38 INFO \u7ea7\u522b\u65e5\u5fd7\u6587\u4ef6\u4e3a nebula-graphd.INFO, nebula-storaged.INFO, nebula-metad.INFO \uff0c\u62a5\u8b66\u548c\u9519\u8bef\u7ea7\u522b\u540e\u7f00\u4e3a .WARNING \u548c .ERROR \u3002 NebulaGraph\u4f7f\u7528 glog \u6253\u5370\u65e5\u5fd7\u3002glog \u6ca1\u6709\u65e5\u5fd7\u56de\u6536\u7684\u529f\u80fd\uff0c\u7528\u6237\u53ef\u4ee5\uff1a \u5728\u4e09\u79cd\u670d\u52a1\u7684\u914d\u7f6e\u6587\u4ef6\u5185\u6dfb\u52a0\u53c2\u6570 timestamp_in_logfile_name=true \uff08\u65e5\u5fd7\u6587\u4ef6\u6dfb\u52a0\u65f6\u95f4\u6233\uff09\u548c max_log_size=500 \uff08\u65e5\u5fd7\u5927\u5c0f\u9650\u5236\uff0c\u5355\u4f4d MB\uff09\uff0c\u7136\u540e\u4f7f\u7528 crontab \u8bbe\u7f6e\u5b9a\u671f\u4efb\u52a1\u56de\u6536\u65e5\u5fd7\u6587\u4ef6\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1 Glog should delete old log files automatically \u3002 \u4f7f\u7528 logrotate \u5b9e\u73b0 \u65e5\u5fd7\u8f6e\u8be2 \u3002\u4f7f\u7528 logrotate \u7ba1\u7406\u65e5\u5fd7\u524d\u9700\u4fee\u6539\u76f8\u5e94NebulaGraph\u670d\u52a1\u7684\u914d\u7f6e\uff0c\u5c06 timestamp_in_logfile_name \u53c2\u6570\u7684\u503c\u6539\u6210 false \u3002","title":"\u8fd0\u884c\u65e5\u5fd7\u6587\u4ef6\u8fc7\u5927\u65f6\u5982\u4f55\u56de\u6536\u65e5\u5fd7\uff1f"},{"location":"20.appendix/0.FAQ/#nebulagraph_1","text":"\u670d\u52a1\u8fd0\u884c\u65f6\uff1a nebula-console \u4e2d\u6267\u884c\u547d\u4ee4 SHOW HOSTS META \uff0c\u8be6\u89c1 SHOW HOSTS \u670d\u52a1\u672a\u8fd0\u884c\u65f6\uff1a\u5728\u5b89\u88c5\u8def\u5f84\u7684 bin \u76ee\u5f55\u5185\uff0c\u6267\u884c ./<binary_name> --version \u547d\u4ee4\uff0c\u53ef\u4ee5\u67e5\u770b\u5230 version \u548c GitHub \u4e0a\u7684 commit ID\uff0c\u4f8b\u5982\uff1a $ ./nebula-graphd --version Docker Compose \u90e8\u7f72 \u67e5\u770b Docker Compose \u90e8\u7f72\u7684NebulaGraph\u7248\u672c\uff0c\u65b9\u5f0f\u548c\u7f16\u8bd1\u5b89\u88c5\u7c7b\u4f3c\uff0c\u53ea\u662f\u8981\u5148\u8fdb\u5165\u5bb9\u5668\u5185\u90e8\uff0c\u793a\u4f8b\u547d\u4ee4\u5982\u4e0b\uff1a docker exec -it nebula-docker-compose_graphd_1 bash cd bin/ ./nebula-graphd --version RPM/DEB \u5305\u5b89\u88c5 \u6267\u884c rpm -qa |grep nebula \u5373\u53ef\u67e5\u770b\u7248\u672c\u3002","title":"\u5982\u4f55\u67e5\u770bNebulaGraph\u7248\u672c"},{"location":"20.appendix/0.FAQ/#host_host_offline","text":"OFFLINE \u72b6\u6001\u7684 Host \u5c06\u5728\u4e00\u5929\u540e\u81ea\u52a8\u5220\u9664\u3002","title":"\u4fee\u6539 Host \u540d\u79f0\u540e\uff0c\u65e7\u7684 Host \u4e00\u76f4\u663e\u793a OFFLINE \u600e\u4e48\u529e\uff1f"},{"location":"20.appendix/0.FAQ/#dmp","text":"dmp \u6587\u4ef6\u662f\u9519\u8bef\u62a5\u544a\u6587\u4ef6\uff0c\u8be6\u7ec6\u8bb0\u5f55\u4e86\u8fdb\u7a0b\u9000\u51fa\u7684\u4fe1\u606f\uff0c\u53ef\u4ee5\u7528\u64cd\u4f5c\u7cfb\u7edf\u81ea\u5e26\u7684 gdb \u5de5\u5177\u67e5\u770b\u3002Coredump \u6587\u4ef6\u9ed8\u8ba4\u4fdd\u5b58\u5728\u542f\u52a8\u4e8c\u8fdb\u5236\u7684\u5f53\u524d\u76ee\u5f55\u4e0b\uff08\u9ed8\u8ba4\u4e3a /usr/local/nebula \u76ee\u5f55\uff09\uff0c\u5728NebulaGraph\u670d\u52a1 crash \u65f6\uff0c\u7cfb\u7edf\u4f1a\u81ea\u52a8\u751f\u6210\u3002 \u67e5\u770b Core \u6587\u4ef6\u8fdb\u7a0b\u540d\u5b57\uff0cpid \u4e00\u822c\u4e3a\u6570\u503c\u3002 $ file core.<pid> \u4f7f\u7528 gdb \u8c03\u8bd5\u3002 $ gdb <process.name> core.<pid> \u67e5\u770b\u6587\u4ef6\u5185\u5bb9\u3002 $(gdb) bt \u4f8b\u5982\uff1a $ file core.1316027 core.1316027: ELF 64 -bit LSB core file, x86-64, version 1 ( SYSV ) , SVR4-style, from '/home/workspace/fork/nebula-debug/bin/nebula-metad --flagfile /home/k' , real uid: 1008 , effective uid: 1008 , real gid: 1008 , effective gid: 1008 , execfn: '/home/workspace/fork/nebula-debug/bin/nebula-metad' , platform: 'x86_64' $ gdb /home/workspace/fork/nebula-debug/bin/nebula-metad core.1316027 $( gdb ) bt #0 0x00007f9de58fecf5 in __memcpy_ssse3_back () from /lib64/libc.so.6 #1 0x0000000000eb2299 in void std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >::_M_construct<char*>(char*, char*, std::forward_iterator_tag) () #2 0x0000000000ef71a7 in nebula::meta::cpp2::QueryDesc::QueryDesc(nebula::meta::cpp2::QueryDesc const&) () ... \u5982\u679c\u7528\u6237\u4e0d\u6e05\u695a dmp \u6253\u5370\u51fa\u6765\u7684\u76f8\u5173\u4fe1\u606f\uff0c\u53ef\u4ee5\u5c06\u6253\u5370\u51fa\u6765\u7684\u5185\u5bb9\uff0c\u5e26\u4e0a\u64cd\u4f5c\u7cfb\u7edf\u7248\u672c\u3001\u786c\u4ef6\u914d\u7f6e\u3001Core\u6587\u4ef6\u4ea7\u751f\u524d\u540e\u7684\u9519\u8bef\u65e5\u5fd7\u548c\u53ef\u80fd\u5bfc\u81f4\u9519\u8bef\u7684\u64cd\u4f5c\u8d34\u5728 NebulaGraph \u8bba\u575b \u4e0a\u5bfb\u6c42\u5e2e\u52a9\u3002","title":"\u5982\u4f55\u67e5\u770b dmp \u6587\u4ef6\uff1f"},{"location":"20.appendix/0.FAQ/#systemctl_nebulagraph","text":"\u6267\u884c systemctl enable \u542f\u52a8 metad\u3001graphd \u548c storaged \u670d\u52a1\u3002 [root]# systemctl enable nebula-metad.service Created symlink from /etc/systemd/system/multi-user.target.wants/nebula-metad.service to /usr/lib/systemd/system/nebula-metad.service. [root]# systemctl enable nebula-graphd.service Created symlink from /etc/systemd/system/multi-user.target.wants/nebula-graphd.service to /usr/lib/systemd/system/nebula-graphd.service. [root]# systemctl enable nebula-storaged.service Created symlink from /etc/systemd/system/multi-user.target.wants/nebula-storaged.service to /usr/lib/systemd/system/nebula-storaged.service. \u914d\u7f6e metad\u3001graphd \u548c storaged \u7684 service \u6587\u4ef6\uff0c\u8bbe\u7f6e\u670d\u52a1\u81ea\u52a8\u62c9\u8d77\u3002 Caution \u5728\u914d\u7f6eservice\u6587\u4ef6\u65f6\u9700\u6ce8\u610f\u4ee5\u4e0b\u51e0\u70b9\uff1a - PIDFile\u3001ExecStart\u3001ExecReload\u3001ExecStop \u53c2\u6570\u7684\u8def\u5f84\u9700\u8981\u4e0e\u670d\u52a1\u5668\u4e0a\u7684\u4e00\u81f4\u3002 - RestartSec \u4e3a\u91cd\u542f\u524d\u7b49\u5f85\u7684\u65f6\u957f(\u79d2)\uff0c\u53ef\u6839\u636e\u5b9e\u9645\u60c5\u51b5\u4fee\u6539\u3002 - \uff08\u53ef\u9009\uff09StartLimitInterval \u4e3a\u65e0\u9650\u6b21\u91cd\u542f\uff0c\u9ed8\u8ba4\u662f 10 \u79d2\u5185\u5982\u679c\u91cd\u542f\u8d85\u8fc7 5 \u6b21\u5219\u4e0d\u518d\u91cd\u542f\uff0c\u8bbe\u7f6e\u4e3a 0 \u8868\u793a\u4e0d\u9650\u6b21\u6570\u91cd\u542f\u3002 - \uff08\u53ef\u9009\uff09LimitNOFILE \u4e3a\u670d\u52a1\u6700\u5927\u6587\u4ef6\u6253\u5f00\u6570\uff0c\u9ed8\u8ba4\u4e3a1024\uff0c\u53ef\u6839\u636e\u5b9e\u9645\u60c5\u51b5\u4fee\u6539\u3002 \u914d\u7f6e metad \u670d\u52a1\u7684 service \u6587\u4ef6\uff1a $ vi /usr/lib/systemd/system/nebula-metad.service [Unit] Description=Nebula Graph Metad Service After=network.target [Service ] Type=forking Restart=always RestartSec=15s PIDFile=/usr/local/nebula/pids/nebula-metad.pid ExecStart=/usr/local/nebula/scripts/nebula.service start metad ExecReload=/usr/local/nebula/scripts/nebula.service restart metad ExecStop=/usr/local/nebula/scripts/nebula.service stop metad PrivateTmp=true StartLimitInterval=0 LimitNOFILE=1024 [Install] WantedBy=multi-user.target \u914d\u7f6e graphd \u670d\u52a1\u7684 service \u6587\u4ef6\uff1a $ vi /usr/lib/systemd/system/nebula-graphd.service [Unit] Description=Nebula Graph Graphd Service After=network.target [Service] Type=forking Restart=always RestartSec=15s PIDFile=/usr/local/nebula/pids/nebula-graphd.pid ExecStart=/usr/local/nebula/scripts/nebula.service start graphd ExecReload=/usr/local/nebula/scripts/nebula.service restart graphd ExecStop=/usr/local/nebula/scripts/nebula.service stop graphd PrivateTmp=true StartLimitInterval=0 LimitNOFILE=1024 [Install] WantedBy=multi-user.target \u914d\u7f6e storaged \u670d\u52a1\u7684 service \u6587\u4ef6\uff1a $ vi /usr/lib/systemd/system/nebula-storaged.service [Unit] Description=Nebula Graph Storaged Service After=network.target [Service] Type=forking Restart=always RestartSec=15s PIDFile=/usr/local/nebula/pids/nebula-storaged.pid ExecStart=/usr/local/nebula/scripts/nebula.service start storaged ExecReload=/usr/local/nebula/scripts/nebula.service restart storaged ExecStop=/usr/local/nebula/scripts/nebula.service stop storaged PrivateTmp=true StartLimitInterval=0 LimitNOFILE=1024 [Install] WantedBy=multi-user.target reload \u914d\u7f6e\u6587\u4ef6\u3002 [root]# sudo systemctl daemon-reload \u91cd\u542f\u670d\u52a1\u3002 $ systemctl restart nebula-metad.service $ systemctl restart nebula-graphd.service $ systemctl restart nebula-storaged.service","title":"\u5982\u4f55\u901a\u8fc7 systemctl \u8bbe\u7f6e\u5f00\u673a\u81ea\u52a8\u542f\u52a8NebulaGraph\u670d\u52a1\uff1f"},{"location":"20.appendix/0.FAQ/#_12","text":"","title":"\u5173\u4e8e\u8fde\u63a5"},{"location":"20.appendix/0.FAQ/#_13","text":"\u5982\u679c\u6ca1\u6709\u4fee\u6539\u8fc7 \u914d\u7f6e\u6587\u4ef6 \u4e2d\u9884\u8bbe\u7684\u7aef\u53e3\uff0c\u8bf7\u5728\u9632\u706b\u5899\u4e2d\u5f00\u653e\u5982\u4e0b\u7aef\u53e3\uff1a \u670d\u52a1\u7c7b\u578b \u7aef\u53e3 Meta 9559, 9560, 19559 Graph 9669, 19669 Storage 9777 ~ 9780, 19779 \u5982\u679c\u4fee\u6539\u8fc7\u914d\u7f6e\u6587\u4ef6\u4e2d\u9884\u8bbe\u7684\u7aef\u53e3\uff0c\u8bf7\u627e\u51fa\u5b9e\u9645\u4f7f\u7528\u7684\u7aef\u53e3\u5e76\u5728\u9632\u706b\u5899\u4e2d\u5f00\u653e\u5b83\u4eec\u3002 \u66f4\u591a\u7aef\u53e3\u4fe1\u606f\uff0c\u53c2\u89c1 \u516c\u53f8\u4ea7\u54c1\u7aef\u53e3\u5168\u96c6 \u3002","title":"\u9632\u706b\u5899\u4e2d\u9700\u8981\u5f00\u653e\u54ea\u4e9b\u7aef\u53e3\uff1f"},{"location":"20.appendix/0.FAQ/#_14","text":"\u7528\u6237\u53ef\u4ee5\u4f7f\u7528\u5982\u4e0b telnet \u547d\u4ee4\u68c0\u67e5\u7aef\u53e3\u72b6\u6001\uff1a telnet <ip> <port> Note \u5982\u679c\u65e0\u6cd5\u4f7f\u7528 telnet \u547d\u4ee4\uff0c\u8bf7\u5148\u68c0\u67e5\u4e3b\u673a\u4e2d\u662f\u5426\u5b89\u88c5\u5e76\u542f\u52a8\u4e86 telnet\u3002 \u793a\u4f8b\uff1a // \u5982\u679c\u7aef\u53e3\u5df2\u5f00\u653e\uff1a $ telnet 192 .168.1.10 9669 Trying 192 .168.1.10... Connected to 192 .168.1.10. Escape character is '^]' . // \u5982\u679c\u7aef\u53e3\u672a\u5f00\u653e\uff1a $ telnet 192 .168.1.10 9777 Trying 192 .168.1.10... telnet: connect to address 192 .168.1.10: Connection refused","title":"\u5982\u4f55\u6d4b\u8bd5\u7aef\u53e3\u662f\u5426\u5df2\u5f00\u653e\uff1f"},{"location":"20.appendix/0.FAQ/#max_sessions_per_ip_per_user","text":"\u5f53\u4f1a\u8bdd\u6570\u91cf\u8fbe\u5230\u4e0a\u9650\u65f6\uff0c\u5373\u8d85\u8fc7 max_sessions_per_ip_per_user \u6240\u8bbe\u503c\uff0c\u5728\u8fde\u63a5NebulaGraph\u7684\u65f6\u5019\uff0c\u4f1a\u51fa\u73b0\u4ee5\u4e0b\u62a5\u9519\uff1a Fail to create a new session from connection pool, fail to authenticate, error: Create Session failed: Too many sessions created from 127.0.0.1 by user root. the threshold is 2. You can change it by modifying 'max_sessions_per_ip_per_user' in nebula-graphd.conf \u7528\u6237\u53ef\u4ee5\u901a\u8fc7\u4ee5\u4e0b\u4e09\u79cd\u65b9\u5f0f\u89e3\u51b3\u95ee\u9898\uff1a \u6267\u884c KILL SESSION \u547d\u4ee4\uff0c\u5173\u95ed\u4e0d\u9700\u8981\u7684 Session\u3002\u8be6\u60c5\u53c2\u89c1 \u7ec8\u6b62\u4f1a\u8bdd \u3002 \u5728 Graph \u670d\u52a1\u7684\u914d\u7f6e\u6587\u4ef6 nebula_graphd.conf \u4e2d\u589e\u5927 max_sessions_per_ip_per_user \u7684\u503c\uff0c\u589e\u52a0\u53ef\u4ee5\u521b\u5efa\u7684\u4f1a\u8bdd\u603b\u6570\u3002\u91cd\u542f Graph \u670d\u52a1\u4f7f\u914d\u7f6e\u751f\u6548\u3002 \u5728 Graph \u670d\u52a1\u7684\u914d\u7f6e\u6587\u4ef6 nebula_graphd.conf \u4e2d\u51cf\u5c0f session_idle_timeout_secs \u53c2\u6570\u7684\u503c\uff0c\u964d\u4f4e\u7a7a\u95f2\u4f1a\u8bdd\u7684\u8d85\u65f6\u65f6\u95f4\u3002\u91cd\u542f Graph \u670d\u52a1\u4f7f\u914d\u7f6e\u751f\u6548\u3002","title":"\u4f1a\u8bdd\u6570\u91cf\u8fbe\u5230max_sessions_per_ip_per_user\u6240\u8bbe\u503c\u4e0a\u9650\u65f6\u600e\u4e48\u529e\uff1f"},{"location":"20.appendix/0.FAQ/#_15","text":"Warning \u96c6\u7fa4\u6269\u7f29\u5bb9\u529f\u80fd\u672a\u6b63\u5f0f\u5728\u793e\u533a\u7248\u4e2d\u53d1\u5e03\u3002\u4ee5\u4e0b\u6d89\u53ca SUBMIT JOB BALANCE DATA REMOVE \u548c SUBMIT JOB BALANCE DATA \u7684\u64cd\u4f5c\u5728\u793e\u533a\u7248\u4e2d\u5747\u4e3a\u5b9e\u9a8c\u6027\u529f\u80fd\uff0c\u529f\u80fd\u672a\u7a33\u5b9a\u3002\u5982\u9700\u4f7f\u7528\uff0c\u8bf7\u5148\u505a\u597d\u6570\u636e\u5907\u4efd\uff0c\u5e76\u4e14\u5728 Graph \u914d\u7f6e\u6587\u4ef6 \u4e2d\u5c06 enable_experimental_feature \u548c enable_data_balance \u5747\u8bbe\u7f6e\u4e3a true \u3002","title":"\u5173\u4e8e\u6269\u5bb9\u3001\u7f29\u5bb9"},{"location":"20.appendix/0.FAQ/#metagraphstorage","text":"NebulaGraph 3.6.0 \u672a\u63d0\u4f9b\u8fd0\u7ef4\u547d\u4ee4\u4ee5\u5b9e\u73b0\u81ea\u52a8\u6269\u7f29\u5bb9\uff0c\u4f46\u53ef\u53c2\u8003\u4ee5\u4e0b\u6b65\u9aa4\u5b9e\u73b0\u624b\u52a8\u6269\u7f29\u5bb9\uff1a Meta \u7684\u6269\u5bb9\u548c\u7f29\u5bb9\uff1a Meta \u4e0d\u652f\u6301\u81ea\u52a8\u6269\u7f29\u5bb9\u3002 Note \u7528\u6237\u53ef\u4ee5\u4f7f\u7528 \u811a\u672c\u5de5\u5177 \u8fc1\u79fb Meta \u670d\u52a1\uff0c\u4f46\u662f\u9700\u8981\u81ea\u884c\u4fee\u6539 Graph \u670d\u52a1\u548c Storage \u670d\u52a1\u7684\u914d\u7f6e\u6587\u4ef6\u4e2d\u7684 Meta \u8bbe\u7f6e\u3002 Graph \u7684\u7f29\u5bb9\uff1a\u5c06\u8be5 Graph \u7684 IP \u4ece client \u7684\u4ee3\u7801\u4e2d\u79fb\u9664\uff0c\u5173\u95ed\u8be5 Graph \u8fdb\u7a0b\u3002 Graph \u7684\u6269\u5bb9\uff1a\u5728\u65b0\u673a\u5668\u4e0a\u51c6\u5907 Graph \u4e8c\u8fdb\u5236\u6587\u4ef6\u548c\u914d\u7f6e\u6587\u4ef6\uff0c\u5728\u914d\u7f6e\u6587\u4ef6\u4e2d\u4fee\u6539\u6216\u589e\u52a0\u5df2\u5728\u8fd0\u884c\u7684 Meta \u5730\u5740\uff0c\u542f\u52a8 Graph \u8fdb\u7a0b\u3002 Storage \u7684\u7f29\u5bb9\uff1a\u6267\u884c SUBMIT JOB BALANCE DATA REMOVE <ip:port> \u548c DROP HOSTS <ip:port> \u3002\u5b8c\u6210\u540e\u5173\u95ed Storage \u8fdb\u7a0b\u3002 Caution \u6267\u884c\u8be5\u547d\u4ee4\u8fc1\u79fb\u6307\u5b9a Storage \u8282\u70b9\u4e2d\u7684\u5206\u7247\u6570\u636e\u524d\uff0c\u9700\u8981\u786e\u4fdd\u5176\u4ed6 Storage \u8282\u70b9\u6570\u91cf\u8db3\u591f\u4ee5\u6ee1\u8db3\u8bbe\u7f6e\u7684\u526f\u672c\u6570\u3002\u4f8b\u5982\uff0c\u5982\u679c\u8bbe\u7f6e\u4e86\u526f\u672c\u6570\u4e3a 3\uff0c\u90a3\u4e48\u5728\u6267\u884c\u8be5\u547d\u4ee4\u524d\uff0c\u9700\u8981\u786e\u4fdd\u5176\u4ed6 Storage \u8282\u70b9\u6570\u91cf\u5927\u4e8e\u7b49\u4e8e 3\u3002 \u5982\u679c\u5f85\u8fc1\u79fb\u7684 Storage \u8282\u70b9\u4e2d\u6709\u591a\u4e2a\u56fe\u7a7a\u95f4\u7684\u5206\u7247\uff0c\u9700\u8981\u5206\u522b\u5728\u6bcf\u4e2a\u56fe\u7a7a\u95f4\u5185\u6267\u884c\u8be5\u547d\u4ee4\u4ee5\u8fc1\u79fb\u8be5 Storage \u8282\u70b9\u4e2d\u7684\u6240\u6709\u5206\u7247\u3002 Storage \u7684\u6269\u5bb9\uff1a\u5728\u65b0\u673a\u5668\u4e0a\u51c6\u5907 Storage \u4e8c\u8fdb\u5236\u6587\u4ef6\u548c\u914d\u7f6e\u6587\u4ef6\uff0c\u5728\u914d\u7f6e\u6587\u4ef6\u4e2d\u4fee\u6539\u6216\u589e\u52a0\u5df2\u5728\u8fd0\u884c\u7684 Meta \u5730\u5740\uff0c\u7136\u540e\u6ce8\u518c Storage \u5230 Meta \u5e76\u542f\u52a8 Storage \u8fdb\u7a0b\u3002\u8be6\u60c5\u53c2\u89c1 \u6ce8\u518c Storage \u670d\u52a1 \u3002 Storage \u6269\u7f29\u5bb9\u4e4b\u540e\uff0c\u6839\u636e\u9700\u8981\u6267\u884c SUBMIT JOB BALANCE DATA \u5c06\u5f53\u524d\u56fe\u7a7a\u95f4\u7684\u5206\u7247\u5e73\u5747\u5206\u914d\u5230\u6240\u6709 Storage \u8282\u70b9\u4e2d\u548c\u6267\u884c SUBMIT JOB BALANCE LEADER \u547d\u4ee4\u5747\u8861\u5206\u5e03\u6240\u6709\u56fe\u7a7a\u95f4\u4e2d\u7684 leader\u3002\u8fd0\u884c\u547d\u4ee4\u524d\uff0c\u9700\u8981\u9009\u62e9\u4e00\u4e2a\u56fe\u7a7a\u95f4\u3002","title":"\u5982\u4f55\u589e\u52a0\u6216\u51cf\u5c11 Meta\u3001Graph\u3001Storage \u8282\u70b9\u7684\u6570\u91cf"},{"location":"20.appendix/0.FAQ/#storage","text":"\u76ee\u524d\uff0cStorage \u4e0d\u652f\u6301\u52a8\u6001\u8bc6\u522b\u65b0\u7684\u78c1\u76d8\u3002\u53ef\u4ee5\u901a\u8fc7\u4ee5\u4e0b\u6b65\u9aa4\u5728\u5206\u5e03\u5f0f\u96c6\u7fa4\u7684 Storage \u8282\u70b9\u4e2d\u589e\u52a0\u6216\u51cf\u5c11\u78c1\u76d8\uff08\u4e0d\u652f\u6301\u5bf9\u5355\u4e2a Storage \u8282\u70b9\u7684\u96c6\u7fa4\u589e\u52a0\u6216\u51cf\u5c11\u78c1\u76d8\uff09\uff1a \u6267\u884c SUBMIT JOB BALANCE DATA REMOVE <ip:port> \u5c06\u5f85\u589e\u52a0\u6216\u51cf\u5c11\u78c1\u76d8\u7684 Storage \u8282\u70b9\u8fc1\u5230\u5176\u4ed6 Storage \u8282\u70b9\u4e2d\u3002 Caution \u6267\u884c\u8be5\u547d\u4ee4\u8fc1\u79fb\u6307\u5b9a Storage \u8282\u70b9\u4e2d\u7684\u5206\u7247\u6570\u636e\u524d\uff0c\u9700\u8981\u786e\u4fdd\u5176\u4ed6 Storage \u8282\u70b9\u6570\u91cf\u8db3\u591f\u4ee5\u6ee1\u8db3\u8bbe\u7f6e\u7684\u526f\u672c\u6570\u3002\u4f8b\u5982\uff0c\u5982\u679c\u8bbe\u7f6e\u4e86\u526f\u672c\u6570\u4e3a 3\uff0c\u90a3\u4e48\u5728\u6267\u884c\u8be5\u547d\u4ee4\u524d\uff0c\u9700\u8981\u786e\u4fdd\u5176\u4ed6 Storage \u8282\u70b9\u6570\u91cf\u5927\u4e8e\u7b49\u4e8e 3\u3002 \u5982\u679c\u5f85\u8fc1\u79fb\u7684 Storage \u8282\u70b9\u4e2d\u6709\u591a\u4e2a\u56fe\u7a7a\u95f4\u7684\u5206\u7247\uff0c\u9700\u8981\u5206\u522b\u5728\u6bcf\u4e2a\u56fe\u7a7a\u95f4\u5185\u6267\u884c\u8be5\u547d\u4ee4\u4ee5\u8fc1\u79fb\u8be5 Storage \u8282\u70b9\u4e2d\u7684\u6240\u6709\u5206\u7247\u3002 \u6267\u884c DROP HOSTS <ip:port> \u79fb\u9664\u5f85\u589e\u52a0\u6216\u51cf\u5c11\u78c1\u76d8\u7684 Storage \u8282\u70b9\u3002 \u5728\u6240\u6709 Storage \u8282\u70b9\u914d\u7f6e\u6587\u4ef6\u4e2d\u901a\u8fc7 --data_path \u914d\u7f6e\u65b0\u589e\u6216\u51cf\u5c11\u78c1\u76d8\u8def\u5f84\uff0c\u8be6\u60c5\u53c2\u89c1 Storage \u914d\u7f6e\u6587\u4ef6 \u3002 \u6267\u884c ADD HOSTS <ip:port> \u91cd\u65b0\u6dfb\u52a0\u5f85\u589e\u52a0\u6216\u51cf\u5c11\u78c1\u76d8\u7684 Storage \u8282\u70b9\u3002 \u6839\u636e\u9700\u8981\u6267\u884c SUBMIT JOB BALANCE DATA \u5c06\u5f53\u524d\u56fe\u7a7a\u95f4\u7684\u5206\u7247\u5e73\u5747\u5206\u914d\u5230\u6240\u6709 Storage \u8282\u70b9\u4e2d\u548c\u6267\u884c SUBMIT JOB BALANCE LEADER \u547d\u4ee4\u5747\u8861\u5206\u5e03\u6240\u6709\u56fe\u7a7a\u95f4\u4e2d\u7684 leader\u3002\u8fd0\u884c\u547d\u4ee4\u524d\uff0c\u9700\u8981\u9009\u62e9\u4e00\u4e2a\u56fe\u7a7a\u95f4\u3002","title":"\u5982\u4f55\u5728 Storage \u8282\u70b9\u4e2d\u589e\u52a0\u6216\u51cf\u5c11\u78c1\u76d8"},{"location":"20.appendix/6.eco-tool-version/","text":"\u751f\u6001\u5de5\u5177\u6982\u89c8 \u00b6 NebulaGraph Studio \u00b6 NebulaGraph Studio\uff08\u7b80\u79f0 Studio\uff09\u662f\u4e00\u6b3e\u53ef\u4ee5\u901a\u8fc7 Web \u8bbf\u95ee\u7684\u56fe\u6570\u636e\u5e93\u53ef\u89c6\u5316\u5de5\u5177\uff0c\u642d\u914dNebulaGraph\u4f7f\u7528\uff0c\u63d0\u4f9b\u6784\u56fe\u3001\u6570\u636e\u5bfc\u5165\u3001\u7f16\u5199 nGQL \u67e5\u8be2\u3001\u56fe\u63a2\u7d22\u7b49\u4e00\u7ad9\u5f0f\u670d\u52a1\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1 \u4ec0\u4e48\u662f NebulaGraph Studio \u3002 Note Studio \u7248\u672c\u53d1\u5e03\u8282\u594f\u72ec\u7acb\u4e8eNebulaGraph\u5185\u6838\uff0c\u5176\u547d\u540d\u65b9\u5f0f\u4e5f\u4e0d\u53c2\u7167\u5185\u6838\u547d\u540d\u89c4\u5219\uff0c\u4e24\u8005\u517c\u5bb9\u5bf9\u5e94\u5173\u7cfb\u5982\u4e0b\u8868\u3002 NebulaGraph\u7248\u672c Studio \u7248\u672c v3.6.0 v3.8.0 NebulaGraph Dashboard\uff08\u793e\u533a\u7248\uff09 \u00b6 NebulaGraph Dashboard\uff08\u7b80\u79f0 Dashboard\uff09\u662f\u4e00\u6b3e\u7528\u4e8e\u76d1\u63a7NebulaGraph\u96c6\u7fa4\u4e2d\u673a\u5668\u548c\u670d\u52a1\u72b6\u6001\u7684\u53ef\u89c6\u5316\u5de5\u5177\u3002\u8be6\u60c5\u53c2\u89c1 \u4ec0\u4e48\u662f NebulaGraph Dashboard \u3002 NebulaGraph\u7248\u672c Dashboard \u793e\u533a\u7248\u672c v3.6.0 v3.4.0 NebulaGraph Stats Exporter \u00b6 nebula-stats-exporter \u5c06\u76d1\u63a7\u6570\u636e\u5bfc\u5165Prometheus\u3002 NebulaGraph\u7248\u672c Stats Exporter \u7248\u672c v3.6.0 v3.3.0 NebulaGraph Exchange \u00b6 NebulaGraph Exchange\uff08\u7b80\u79f0 Exchange\uff09\u662f\u4e00\u6b3e Apache Spark\u2122 \u5e94\u7528\uff0c\u7528\u4e8e\u5728\u5206\u5e03\u5f0f\u73af\u5883\u4e2d\u5c06\u96c6\u7fa4\u4e2d\u7684\u6570\u636e\u6279\u91cf\u8fc1\u79fb\u5230NebulaGraph\u4e2d\uff0c\u80fd\u652f\u6301\u591a\u79cd\u4e0d\u540c\u683c\u5f0f\u7684\u6279\u5f0f\u6570\u636e\u548c\u6d41\u5f0f\u6570\u636e\u7684\u8fc1\u79fb\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1 \u4ec0\u4e48\u662f NebulaGraph Exchange \u3002 NebulaGraph\u7248\u672c Exchange \u7248\u672c v3.6.0 v3.6.0 NebulaGraph Operator \u00b6 NebulaGraph Operator\uff08\u7b80\u79f0 Operator\uff09\u662f\u7528\u4e8e\u5728 Kubernetes \u7cfb\u7edf\u4e0a\u81ea\u52a8\u5316\u90e8\u7f72\u548c\u8fd0\u7ef4NebulaGraph\u96c6\u7fa4\u7684\u5de5\u5177\u3002\u4f9d\u6258\u4e8e Kubernetes \u6269\u5c55\u673a\u5236\uff0cNebulaGraph\u5c06\u5176\u8fd0\u7ef4\u9886\u57df\u7684\u77e5\u8bc6\u5168\u9762\u6ce8\u5165\u81f3 Kubernetes \u7cfb\u7edf\u4e2d\uff0c\u8ba9NebulaGraph\u6210\u4e3a\u771f\u6b63\u7684\u4e91\u539f\u751f\u56fe\u6570\u636e\u5e93\u3002\u8be6\u60c5\u8bf7\u53c2\u8003 \u4ec0\u4e48\u662f NebulaGraph Operator \u3002 NebulaGraph\u7248\u672c Operator \u7248\u672c v3.6.0 v1.5.0 NebulaGraph Importer \u00b6 NebulaGraph Importer\uff08\u7b80\u79f0 Importer\uff09\u662f\u4e00\u6b3eNebulaGraph\u7684 CSV \u6587\u4ef6\u5bfc\u5165\u5de5\u5177\u3002Importer \u53ef\u4ee5\u8bfb\u53d6\u672c\u5730\u7684 CSV \u6587\u4ef6\uff0c\u7136\u540e\u5bfc\u5165\u6570\u636e\u81f3NebulaGraph\u4e2d\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1 \u4ec0\u4e48\u662f NebulaGraph Importer \u3002 NebulaGraph\u7248\u672c Importer \u7248\u672c v3.6.0 v4.1.0 NebulaGraph Spark Connector \u00b6 NebulaGraph Spark Connector \u662f\u4e00\u4e2a Spark \u8fde\u63a5\u5668\uff0c\u63d0\u4f9b\u901a\u8fc7 Spark \u6807\u51c6\u5f62\u5f0f\u8bfb\u5199NebulaGraph\u6570\u636e\u7684\u80fd\u529b\u3002NebulaGraph Spark Connector \u7531 Reader \u548c Writer \u4e24\u90e8\u5206\u7ec4\u6210\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1 \u4ec0\u4e48\u662f NebulaGraph Spark Connector \u3002 NebulaGraph\u7248\u672c Spark Connector \u7248\u672c v3.6.0 v3.6.0 NebulaGraph Flink Connector \u00b6 NebulaGraph Flink Connector \u662f\u4e00\u6b3e\u5e2e\u52a9 Flink \u7528\u6237\u5feb\u901f\u8bbf\u95eeNebulaGraph\u7684\u8fde\u63a5\u5668\uff0c\u652f\u6301\u4eceNebulaGraph\u4e2d\u8bfb\u53d6\u6570\u636e\uff0c\u6216\u8005\u5c06\u5176\u4ed6\u5916\u90e8\u6570\u636e\u6e90\u8bfb\u53d6\u7684\u6570\u636e\u5199\u5165NebulaGraph\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1 \u4ec0\u4e48\u662f NebulaGraph Flink Connector \u3002 NebulaGraph\u7248\u672c Flink Connector \u7248\u672c v3.6.0 v3.5.0 NebulaGraph Algorithm \u00b6 NebulaGraph Algorithm\uff08\u7b80\u79f0 Algorithm\uff09\u662f\u4e00\u6b3e\u57fa\u4e8e GraphX \u7684 Spark \u5e94\u7528\u7a0b\u5e8f\uff0c\u901a\u8fc7\u63d0\u4ea4 Spark \u4efb\u52a1\u7684\u5f62\u5f0f\u4f7f\u7528\u5b8c\u6574\u7684\u7b97\u6cd5\u5de5\u5177\u5bf9NebulaGraph\u6570\u636e\u5e93\u4e2d\u7684\u6570\u636e\u6267\u884c\u56fe\u8ba1\u7b97\uff0c\u4e5f\u53ef\u4ee5\u901a\u8fc7\u7f16\u7a0b\u5f62\u5f0f\u8c03\u7528 lib \u5e93\u4e0b\u7684\u7b97\u6cd5\u9488\u5bf9 DataFrame \u6267\u884c\u56fe\u8ba1\u7b97\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1 \u4ec0\u4e48\u662f NebulaGraph Algorithm \u3002 NebulaGraph\u7248\u672c Algorithm \u7248\u672c v3.6.0 v3.0.0 NebulaGraph Console \u00b6 NebulaGraph Console \u662fNebulaGraph\u7684\u539f\u751f CLI \u5ba2\u6237\u7aef\u3002\u5982\u4f55\u4f7f\u7528\u8bf7\u53c2\u89c1 NebulaGraph Console \u3002 NebulaGraph\u7248\u672c Console \u7248\u672c v3.6.0 v3.5.0 NebulaGraph Docker Compose \u00b6 Docker Compose \u53ef\u4ee5\u5feb\u901f\u90e8\u7f72NebulaGraph\u96c6\u7fa4\u3002\u5982\u4f55\u4f7f\u7528\u8bf7\u53c2\u89c1 Docker Compose \u90e8\u7f72 NebulaGraph \u3002 NebulaGraph\u7248\u672c Docker Compose \u7248\u672c v3.6.0 v3.6.0 Backup & Restore \u00b6 Backup&Restore \uff08\u7b80\u79f0 BR\uff09\u662f\u4e00\u6b3e\u547d\u4ee4\u884c\u754c\u9762\uff08CLI\uff09\u5de5\u5177\uff0c\u53ef\u4ee5\u5e2e\u52a9\u5907\u4efdNebulaGraph\u7684\u56fe\u7a7a\u95f4\u6570\u636e\uff0c\u6216\u8005\u901a\u8fc7\u5907\u4efd\u6587\u4ef6\u6062\u590d\u6570\u636e\u3002 NebulaGraph\u7248\u672c BR \u7248\u672c v3.6.0 v3.5.0 NebulaGraph Bench \u00b6 NebulaGraph Bench \u7528\u4e8e\u6d4b\u8bd5NebulaGraph\u7684\u57fa\u7ebf\u6027\u80fd\u6570\u636e\uff0c\u4f7f\u7528 LDBC v0.3.3 \u7684\u6807\u51c6\u6570\u636e\u96c6\u3002 NebulaGraph\u7248\u672c Bench \u7248\u672c v3.6.0 v1.2.0 API\u3001SDK \u00b6 Compatibility \u9009\u62e9\u4e0e\u5185\u6838\u7248\u672c\u76f8\u540c X.Y.* \u7684\u6700\u65b0\u7248\u672c\u3002 NebulaGraph\u7248\u672c \u8bed\u8a00\uff08commit id\uff09 v3.6.0 C++ v3.6.0 Go v3.6.0 Python v3.6.0 Java v3.6.0 HTTP \u672a\u53d1\u5e03 \u00b6 Rust Client Node.js Client Object Graph Mapping Library (OGM, or ORM) \u6d4b\u8bd5","title":"\u751f\u6001\u5de5\u5177\u6982\u89c8"},{"location":"20.appendix/6.eco-tool-version/#_1","text":"","title":"\u751f\u6001\u5de5\u5177\u6982\u89c8"},{"location":"20.appendix/6.eco-tool-version/#nebulagraph_studio","text":"NebulaGraph Studio\uff08\u7b80\u79f0 Studio\uff09\u662f\u4e00\u6b3e\u53ef\u4ee5\u901a\u8fc7 Web \u8bbf\u95ee\u7684\u56fe\u6570\u636e\u5e93\u53ef\u89c6\u5316\u5de5\u5177\uff0c\u642d\u914dNebulaGraph\u4f7f\u7528\uff0c\u63d0\u4f9b\u6784\u56fe\u3001\u6570\u636e\u5bfc\u5165\u3001\u7f16\u5199 nGQL \u67e5\u8be2\u3001\u56fe\u63a2\u7d22\u7b49\u4e00\u7ad9\u5f0f\u670d\u52a1\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1 \u4ec0\u4e48\u662f NebulaGraph Studio \u3002 Note Studio \u7248\u672c\u53d1\u5e03\u8282\u594f\u72ec\u7acb\u4e8eNebulaGraph\u5185\u6838\uff0c\u5176\u547d\u540d\u65b9\u5f0f\u4e5f\u4e0d\u53c2\u7167\u5185\u6838\u547d\u540d\u89c4\u5219\uff0c\u4e24\u8005\u517c\u5bb9\u5bf9\u5e94\u5173\u7cfb\u5982\u4e0b\u8868\u3002 NebulaGraph\u7248\u672c Studio \u7248\u672c v3.6.0 v3.8.0","title":"NebulaGraph Studio"},{"location":"20.appendix/6.eco-tool-version/#nebulagraph_dashboard","text":"NebulaGraph Dashboard\uff08\u7b80\u79f0 Dashboard\uff09\u662f\u4e00\u6b3e\u7528\u4e8e\u76d1\u63a7NebulaGraph\u96c6\u7fa4\u4e2d\u673a\u5668\u548c\u670d\u52a1\u72b6\u6001\u7684\u53ef\u89c6\u5316\u5de5\u5177\u3002\u8be6\u60c5\u53c2\u89c1 \u4ec0\u4e48\u662f NebulaGraph Dashboard \u3002 NebulaGraph\u7248\u672c Dashboard \u793e\u533a\u7248\u672c v3.6.0 v3.4.0","title":"NebulaGraph Dashboard\uff08\u793e\u533a\u7248\uff09"},{"location":"20.appendix/6.eco-tool-version/#nebulagraph_stats_exporter","text":"nebula-stats-exporter \u5c06\u76d1\u63a7\u6570\u636e\u5bfc\u5165Prometheus\u3002 NebulaGraph\u7248\u672c Stats Exporter \u7248\u672c v3.6.0 v3.3.0","title":"NebulaGraph Stats Exporter"},{"location":"20.appendix/6.eco-tool-version/#nebulagraph_exchange","text":"NebulaGraph Exchange\uff08\u7b80\u79f0 Exchange\uff09\u662f\u4e00\u6b3e Apache Spark\u2122 \u5e94\u7528\uff0c\u7528\u4e8e\u5728\u5206\u5e03\u5f0f\u73af\u5883\u4e2d\u5c06\u96c6\u7fa4\u4e2d\u7684\u6570\u636e\u6279\u91cf\u8fc1\u79fb\u5230NebulaGraph\u4e2d\uff0c\u80fd\u652f\u6301\u591a\u79cd\u4e0d\u540c\u683c\u5f0f\u7684\u6279\u5f0f\u6570\u636e\u548c\u6d41\u5f0f\u6570\u636e\u7684\u8fc1\u79fb\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1 \u4ec0\u4e48\u662f NebulaGraph Exchange \u3002 NebulaGraph\u7248\u672c Exchange \u7248\u672c v3.6.0 v3.6.0","title":"NebulaGraph Exchange"},{"location":"20.appendix/6.eco-tool-version/#nebulagraph_operator","text":"NebulaGraph Operator\uff08\u7b80\u79f0 Operator\uff09\u662f\u7528\u4e8e\u5728 Kubernetes \u7cfb\u7edf\u4e0a\u81ea\u52a8\u5316\u90e8\u7f72\u548c\u8fd0\u7ef4NebulaGraph\u96c6\u7fa4\u7684\u5de5\u5177\u3002\u4f9d\u6258\u4e8e Kubernetes \u6269\u5c55\u673a\u5236\uff0cNebulaGraph\u5c06\u5176\u8fd0\u7ef4\u9886\u57df\u7684\u77e5\u8bc6\u5168\u9762\u6ce8\u5165\u81f3 Kubernetes \u7cfb\u7edf\u4e2d\uff0c\u8ba9NebulaGraph\u6210\u4e3a\u771f\u6b63\u7684\u4e91\u539f\u751f\u56fe\u6570\u636e\u5e93\u3002\u8be6\u60c5\u8bf7\u53c2\u8003 \u4ec0\u4e48\u662f NebulaGraph Operator \u3002 NebulaGraph\u7248\u672c Operator \u7248\u672c v3.6.0 v1.5.0","title":"NebulaGraph Operator"},{"location":"20.appendix/6.eco-tool-version/#nebulagraph_importer","text":"NebulaGraph Importer\uff08\u7b80\u79f0 Importer\uff09\u662f\u4e00\u6b3eNebulaGraph\u7684 CSV \u6587\u4ef6\u5bfc\u5165\u5de5\u5177\u3002Importer \u53ef\u4ee5\u8bfb\u53d6\u672c\u5730\u7684 CSV \u6587\u4ef6\uff0c\u7136\u540e\u5bfc\u5165\u6570\u636e\u81f3NebulaGraph\u4e2d\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1 \u4ec0\u4e48\u662f NebulaGraph Importer \u3002 NebulaGraph\u7248\u672c Importer \u7248\u672c v3.6.0 v4.1.0","title":"NebulaGraph Importer"},{"location":"20.appendix/6.eco-tool-version/#nebulagraph_spark_connector","text":"NebulaGraph Spark Connector \u662f\u4e00\u4e2a Spark \u8fde\u63a5\u5668\uff0c\u63d0\u4f9b\u901a\u8fc7 Spark \u6807\u51c6\u5f62\u5f0f\u8bfb\u5199NebulaGraph\u6570\u636e\u7684\u80fd\u529b\u3002NebulaGraph Spark Connector \u7531 Reader \u548c Writer \u4e24\u90e8\u5206\u7ec4\u6210\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1 \u4ec0\u4e48\u662f NebulaGraph Spark Connector \u3002 NebulaGraph\u7248\u672c Spark Connector \u7248\u672c v3.6.0 v3.6.0","title":"NebulaGraph Spark Connector"},{"location":"20.appendix/6.eco-tool-version/#nebulagraph_flink_connector","text":"NebulaGraph Flink Connector \u662f\u4e00\u6b3e\u5e2e\u52a9 Flink \u7528\u6237\u5feb\u901f\u8bbf\u95eeNebulaGraph\u7684\u8fde\u63a5\u5668\uff0c\u652f\u6301\u4eceNebulaGraph\u4e2d\u8bfb\u53d6\u6570\u636e\uff0c\u6216\u8005\u5c06\u5176\u4ed6\u5916\u90e8\u6570\u636e\u6e90\u8bfb\u53d6\u7684\u6570\u636e\u5199\u5165NebulaGraph\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1 \u4ec0\u4e48\u662f NebulaGraph Flink Connector \u3002 NebulaGraph\u7248\u672c Flink Connector \u7248\u672c v3.6.0 v3.5.0","title":"NebulaGraph Flink Connector"},{"location":"20.appendix/6.eco-tool-version/#nebulagraph_algorithm","text":"NebulaGraph Algorithm\uff08\u7b80\u79f0 Algorithm\uff09\u662f\u4e00\u6b3e\u57fa\u4e8e GraphX \u7684 Spark \u5e94\u7528\u7a0b\u5e8f\uff0c\u901a\u8fc7\u63d0\u4ea4 Spark \u4efb\u52a1\u7684\u5f62\u5f0f\u4f7f\u7528\u5b8c\u6574\u7684\u7b97\u6cd5\u5de5\u5177\u5bf9NebulaGraph\u6570\u636e\u5e93\u4e2d\u7684\u6570\u636e\u6267\u884c\u56fe\u8ba1\u7b97\uff0c\u4e5f\u53ef\u4ee5\u901a\u8fc7\u7f16\u7a0b\u5f62\u5f0f\u8c03\u7528 lib \u5e93\u4e0b\u7684\u7b97\u6cd5\u9488\u5bf9 DataFrame \u6267\u884c\u56fe\u8ba1\u7b97\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1 \u4ec0\u4e48\u662f NebulaGraph Algorithm \u3002 NebulaGraph\u7248\u672c Algorithm \u7248\u672c v3.6.0 v3.0.0","title":"NebulaGraph Algorithm"},{"location":"20.appendix/6.eco-tool-version/#nebulagraph_console","text":"NebulaGraph Console \u662fNebulaGraph\u7684\u539f\u751f CLI \u5ba2\u6237\u7aef\u3002\u5982\u4f55\u4f7f\u7528\u8bf7\u53c2\u89c1 NebulaGraph Console \u3002 NebulaGraph\u7248\u672c Console \u7248\u672c v3.6.0 v3.5.0","title":"NebulaGraph Console"},{"location":"20.appendix/6.eco-tool-version/#nebulagraph_docker_compose","text":"Docker Compose \u53ef\u4ee5\u5feb\u901f\u90e8\u7f72NebulaGraph\u96c6\u7fa4\u3002\u5982\u4f55\u4f7f\u7528\u8bf7\u53c2\u89c1 Docker Compose \u90e8\u7f72 NebulaGraph \u3002 NebulaGraph\u7248\u672c Docker Compose \u7248\u672c v3.6.0 v3.6.0","title":"NebulaGraph Docker Compose"},{"location":"20.appendix/6.eco-tool-version/#backup_restore","text":"Backup&Restore \uff08\u7b80\u79f0 BR\uff09\u662f\u4e00\u6b3e\u547d\u4ee4\u884c\u754c\u9762\uff08CLI\uff09\u5de5\u5177\uff0c\u53ef\u4ee5\u5e2e\u52a9\u5907\u4efdNebulaGraph\u7684\u56fe\u7a7a\u95f4\u6570\u636e\uff0c\u6216\u8005\u901a\u8fc7\u5907\u4efd\u6587\u4ef6\u6062\u590d\u6570\u636e\u3002 NebulaGraph\u7248\u672c BR \u7248\u672c v3.6.0 v3.5.0","title":"Backup &amp; Restore"},{"location":"20.appendix/6.eco-tool-version/#nebulagraph_bench","text":"NebulaGraph Bench \u7528\u4e8e\u6d4b\u8bd5NebulaGraph\u7684\u57fa\u7ebf\u6027\u80fd\u6570\u636e\uff0c\u4f7f\u7528 LDBC v0.3.3 \u7684\u6807\u51c6\u6570\u636e\u96c6\u3002 NebulaGraph\u7248\u672c Bench \u7248\u672c v3.6.0 v1.2.0","title":"NebulaGraph Bench"},{"location":"20.appendix/6.eco-tool-version/#apisdk","text":"Compatibility \u9009\u62e9\u4e0e\u5185\u6838\u7248\u672c\u76f8\u540c X.Y.* \u7684\u6700\u65b0\u7248\u672c\u3002 NebulaGraph\u7248\u672c \u8bed\u8a00\uff08commit id\uff09 v3.6.0 C++ v3.6.0 Go v3.6.0 Python v3.6.0 Java v3.6.0 HTTP","title":"API\u3001SDK"},{"location":"20.appendix/6.eco-tool-version/#_2","text":"Rust Client Node.js Client Object Graph Mapping Library (OGM, or ORM) \u6d4b\u8bd5","title":"\u672a\u53d1\u5e03"},{"location":"20.appendix/error-code/","text":"\u9519\u8bef\u7801 \u00b6 NebulaGraph\u8fd0\u884c\u51fa\u73b0\u95ee\u9898\u65f6\uff0c\u4f1a\u8fd4\u56de\u9519\u8bef\u7801\u3002\u672c\u6587\u4ecb\u7ecd\u9519\u8bef\u7801\u7684\u8be6\u7ec6\u4fe1\u606f\u3002 Note \u5982\u679c\u51fa\u73b0\u9519\u8bef\u4f46\u6ca1\u6709\u8fd4\u56de\u9519\u8bef\u7801\uff0c\u6216\u9519\u8bef\u7801\u63cf\u8ff0\u4e0d\u6e05\uff0c\u8bf7\u5728 \u8bba\u575b \u6216 GitHub \u53cd\u9988\u3002 \u8fd4\u56de 0 \u8868\u793a\u6267\u884c\u6210\u529f\u3002 \u9519\u8bef\u540d\u79f0 \u9519\u8bef\u7801 \u8bf4\u660e E_DISCONNECTED -1 \u8fde\u63a5\u65ad\u5f00 E_FAIL_TO_CONNECT -2 \u65e0\u6cd5\u5efa\u7acb\u8fde\u63a5 E_RPC_FAILURE -3 RPC \u5931\u8d25 E_LEADER_CHANGED -4 Raft leader \u53d8\u66f4 E_SPACE_NOT_FOUND -5 \u56fe\u7a7a\u95f4\u4e0d\u5b58\u5728 E_TAG_NOT_FOUND -6 Tag \u4e0d\u5b58\u5728 E_EDGE_NOT_FOUND -7 Edge type\u4e0d\u5b58\u5728 E_INDEX_NOT_FOUND -8 \u7d22\u5f15\u4e0d\u5b58\u5728 E_EDGE_PROP_NOT_FOUND -9 \u8fb9\u5c5e\u6027\u4e0d\u5b58\u5728 E_TAG_PROP_NOT_FOUND -10 Tag \u5c5e\u6027\u4e0d\u5b58\u5728 E_ROLE_NOT_FOUND -11 \u5f53\u524d\u89d2\u8272\u4e0d\u5b58\u5728 E_CONFIG_NOT_FOUND -12 \u5f53\u524d\u914d\u7f6e\u4e0d\u5b58\u5728 E_MACHINE_NOT_FOUND -13 \u5f53\u524d\u4e3b\u673a\u4e0d\u5b58\u5728 E_LISTENER_NOT_FOUND -15 listener \u4e0d\u5b58\u5728 E_PART_NOT_FOUND -16 \u5f53\u524d\u5206\u533a\u4e0d\u5b58\u5728 E_KEY_NOT_FOUND -17 key \u4e0d\u5b58\u5728 E_USER_NOT_FOUND -18 \u7528\u6237\u4e0d\u5b58\u5728 E_STATS_NOT_FOUND -19 \u7edf\u8ba1\u4fe1\u606f\u4e0d\u5b58\u5728 E_SERVICE_NOT_FOUND -20 \u6ca1\u6709\u627e\u5230\u5f53\u524d\u670d\u52a1 E_DRAINER_NOT_FOUND -21 drainer \u4e0d\u5b58\u5728 E_DRAINER_CLIENT_NOT_FOUND -22 drainer \u5ba2\u6237\u7aef\u4e0d\u5b58\u5728 E_PART_STOPPED -23 \u5f53\u524d partition \u5df2\u7ecf\u88ab\u505c\u6b62 E_BACKUP_FAILED -24 \u5907\u4efd\u5931\u8d25 E_BACKUP_EMPTY_TABLE -25 \u5907\u4efd\u7684\u8868\u4e3a\u7a7a E_BACKUP_TABLE_FAILED -26 \u5907\u4efd\u8868\u5931\u8d25 E_PARTIAL_RESULT -27 multiget \u65e0\u6cd5\u83b7\u5f97\u6240\u6709\u6570\u636e E_REBUILD_INDEX_FAILED -28 \u91cd\u5efa\u7d22\u5f15\u5931\u8d25 E_INVALID_PASSWORD -29 \u5bc6\u7801\u65e0\u6548 E_FAILED_GET_ABS_PATH -30 \u65e0\u6cd5\u83b7\u5f97\u7edd\u5bf9\u8def\u5f84 E_BAD_USERNAME_PASSWORD -1001 \u8eab\u4efd\u9a8c\u8bc1\u5931\u8d25 E_SESSION_INVALID -1002 \u65e0\u6548\u4f1a\u8bdd E_SESSION_TIMEOUT -1003 \u4f1a\u8bdd\u8d85\u65f6 E_SYNTAX_ERROR -1004 \u8bed\u6cd5\u9519\u8bef E_EXECUTION_ERROR -1005 \u6267\u884c\u9519\u8bef E_STATEMENT_EMPTY -1006 \u8bed\u53e5\u4e3a\u7a7a E_BAD_PERMISSION -1008 \u6743\u9650\u4e0d\u8db3 E_SEMANTIC_ERROR -1009 \u8bed\u4e49\u9519\u8bef E_TOO_MANY_CONNECTIONS -1010 \u8d85\u51fa\u6700\u5927\u8fde\u63a5\u6570 E_PARTIAL_SUCCEEDED -1011 \u8bbf\u95ee\u5b58\u50a8\u5931\u8d25\uff08\u4ec5\u6709\u90e8\u5206\u8bf7\u6c42\u6210\u529f\uff09 E_NO_HOSTS -2001 \u4e3b\u673a\u4e0d\u5b58\u5728 E_EXISTED -2002 \u4e3b\u673a\u5df2\u7ecf\u5b58\u5728 E_INVALID_HOST -2003 \u65e0\u6548\u4e3b\u673a E_UNSUPPORTED -2004 \u5f53\u524d\u547d\u4ee4\u3001\u8bed\u53e5\u3001\u529f\u80fd\u4e0d\u652f\u6301 E_NOT_DROP -2005 \u4e0d\u5141\u8bb8\u5220\u9664 E_CONFIG_IMMUTABLE -2007 \u914d\u7f6e\u9879\u4e0d\u80fd\u6539\u53d8 E_CONFLICT -2008 \u53c2\u6570\u4e0e meta \u6570\u636e\u51b2\u7a81 E_INVALID_PARM -2009 \u65e0\u6548\u7684\u53c2\u6570 E_WRONGCLUSTER -2010 \u9519\u8bef\u7684\u96c6\u7fa4 E_ZONE_NOT_ENOUGH -2011 listener \u51b2\u7a81 E_ZONE_IS_EMPTY -2012 \u4e3b\u673a\u4e0d\u5b58\u5728 E_SCHEMA_NAME_EXISTS -2013 Schema \u540d\u5b57\u5df2\u5b58\u5728 E_RELATED_INDEX_EXISTS -2014 \u4e0e Tag \u6216 Edge Type \u76f8\u5173\u7684\u7d22\u5f15\u5b58\u5728\uff0c\u4e0d\u80fd\u88ab\u5220\u9664 E_RELATED_SPACE_EXISTS -2015 \u4ecd\u6709\u56fe\u7a7a\u95f4\u5728\u4e3b\u673a\u4e0a\uff0c\u4e0d\u80fd\u88ab\u5220\u9664 E_STORE_FAILURE -2021 \u5b58\u50a8\u6570\u636e\u5931\u8d25 E_STORE_SEGMENT_ILLEGAL -2022 \u5b58\u50a8\u6bb5\u975e\u6cd5 E_BAD_BALANCE_PLAN -2023 \u65e0\u6548\u7684\u6570\u636e\u5747\u8861\u8ba1\u5212 E_BALANCED -2024 \u96c6\u7fa4\u5df2\u7ecf\u5904\u4e8e\u6570\u636e\u5747\u8861\u72b6\u6001 E_NO_RUNNING_BALANCE_PLAN -2025 \u6ca1\u6709\u6b63\u5728\u8fd0\u884c\u7684\u6570\u636e\u5747\u8861\u8ba1\u5212 E_NO_VALID_HOST -2026 \u7f3a\u5c11\u6709\u6548\u7684\u4e3b\u673a E_CORRUPTED_BALANCE_PLAN -2027 \u5df2\u7ecf\u635f\u574f\u7684\u6570\u636e\u5747\u8861\u8ba1\u5212 E_IMPROPER_ROLE -2030 \u56de\u6536\u7528\u6237\u89d2\u8272\u5931\u8d25 E_INVALID_PARTITION_NUM -2031 \u65e0\u6548\u7684\u5206\u533a\u6570\u91cf E_INVALID_REPLICA_FACTOR -2032 \u65e0\u6548\u7684\u526f\u672c\u56e0\u5b50 E_INVALID_CHARSET -2033 \u65e0\u6548\u7684\u5b57\u7b26\u96c6 E_INVALID_COLLATE -2034 \u65e0\u6548\u7684\u5b57\u7b26\u6392\u5e8f\u89c4\u5219 E_CHARSET_COLLATE_NOT_MATCH -2035 \u5b57\u7b26\u96c6\u548c\u5b57\u7b26\u6392\u5e8f\u89c4\u5219\u4e0d\u5339\u914d E_SNAPSHOT_FAILURE -2040 \u751f\u6210\u5feb\u7167\u5931\u8d25 E_BLOCK_WRITE_FAILURE -2041 \u5199\u5165\u5757\u6570\u636e\u5931\u8d25 E_ADD_JOB_FAILURE -2044 \u589e\u52a0\u65b0\u7684\u4efb\u52a1\u5931\u8d25 E_STOP_JOB_FAILURE -2045 \u505c\u6b62\u4efb\u52a1\u5931\u8d25 E_SAVE_JOB_FAILURE -2046 \u4fdd\u5b58\u4efb\u52a1\u4fe1\u606f\u5931\u8d25 E_BALANCER_FAILURE -2047 \u6570\u636e\u5747\u8861\u5931\u8d25 E_JOB_NOT_FINISHED -2048 \u5f53\u524d\u4efb\u52a1\u8fd8\u6ca1\u6709\u5b8c\u6210 E_TASK_REPORT_OUT_DATE -2049 \u4efb\u52a1\u62a5\u8868\u5931\u6548 E_JOB_NOT_IN_SPACE -2050 \u5f53\u524d\u4efb\u52a1\u4e0d\u5728\u56fe\u7a7a\u95f4\u5185 E_JOB_NEED_RECOVER -2051 \u5f53\u524d\u4efb\u52a1\u9700\u8981\u6062\u590d E_JOB_ALREADY_FINISH -2052 \u4efb\u52a1\u5df2\u7ecf\u5931\u8d25\u6216\u5b8c\u6210 E_JOB_SUBMITTED -2053 \u4efb\u52a1\u9ed8\u8ba4\u72b6\u6001 E_JOB_NOT_STOPPABLE -2054 \u7ed9\u5b9a\u4efb\u52a1\u4e0d\u652f\u6301\u505c\u6b62 E_JOB_HAS_NO_TARGET_STORAGE -2055 leader \u5206\u5e03\u672a\u4e0a\u62a5\uff0c\u56e0\u6b64\u65e0\u6cd5\u5c06\u4efb\u52a1\u53d1\u9001\u5230\u5b58\u50a8 E_INVALID_JOB -2065 \u65e0\u6548\u7684\u4efb\u52a1 E_BACKUP_BUILDING_INDEX -2066 \u5907\u4efd\u7ec8\u6b62\uff08\u6b63\u5728\u521b\u5efa\u7d22\u5f15\uff09 E_BACKUP_SPACE_NOT_FOUND -2067 \u5907\u4efd\u65f6\u56fe\u7a7a\u95f4\u4e0d\u5b58\u5728 E_RESTORE_FAILURE -2068 \u5907\u4efd\u6062\u590d\u5931\u8d25 E_SESSION_NOT_FOUND -2069 \u4f1a\u8bdd\u4e0d\u5b58\u5728 E_LIST_CLUSTER_FAILURE -2070 \u83b7\u53d6\u96c6\u7fa4\u4fe1\u606f\u5931\u8d25 E_LIST_CLUSTER_GET_ABS_PATH_FAILURE -2071 \u83b7\u53d6\u96c6\u7fa4\u4fe1\u606f\u65f6\u65e0\u6cd5\u83b7\u53d6\u7edd\u5bf9\u8def\u5f84 E_LIST_CLUSTER_NO_AGENT_FAILURE -2072 \u83b7\u53d6\u96c6\u7fa4\u4fe1\u606f\u65f6\u65e0\u6cd5\u83b7\u5f97 agent E_QUERY_NOT_FOUND -2073 query \u672a\u627e\u5230 E_AGENT_HB_FAILURE -2074 agent \u6ca1\u6709\u6c47\u62a5\u5fc3\u8df3 E_HOST_CAN_NOT_BE_ADDED -2082 \u8be5\u4e3b\u673a\u4e0d\u80fd\u88ab\u6dfb\u52a0\uff0c\u56e0\u4e3a\u5b83\u4e0d\u662f\u4e00\u4e2a Storage \u4e3b\u673a E_ACCESS_ES_FAILURE -2090 \u8bbf\u95ee Elasticsearch \u5931\u8d25 E_GRAPH_MEMORY_EXCEEDED -2600 Graph \u5185\u5b58\u8d85\u51fa E_CONSENSUS_ERROR -3001 \u9009\u4e3e\u65f6\u65e0\u6cd5\u8fbe\u6210\u5171\u8bc6 E_KEY_HAS_EXISTS -3002 key \u5df2\u7ecf\u5b58\u5728 E_DATA_TYPE_MISMATCH -3003 \u6570\u636e\u7c7b\u578b\u4e0d\u5339\u914d E_INVALID_FIELD_VALUE -3004 \u65e0\u6548\u7684\u5b57\u6bb5\u503c E_INVALID_OPERATION -3005 \u65e0\u6548\u7684\u64cd\u4f5c E_NOT_NULLABLE -3006 \u5f53\u524d\u503c\u4e0d\u5141\u8bb8\u4e3a\u7a7a E_FIELD_UNSET -3007 \u5b57\u6bb5\u975e\u7a7a\u6216\u8005\u6ca1\u6709\u9ed8\u8ba4\u503c\u65f6\uff0c\u5b57\u6bb5\u503c\u5fc5\u987b\u8bbe\u7f6e E_OUT_OF_RANGE -3008 \u53d6\u503c\u8d85\u51fa\u4e86\u5f53\u524d\u7c7b\u578b\u7684\u8303\u56f4 E_DATA_CONFLICT_ERROR -3010 \u6570\u636e\u51b2\u7a81 E_WRITE_STALLED -3011 \u5199\u5165\u88ab\u5ef6\u8fdf E_IMPROPER_DATA_TYPE -3021 \u4e0d\u6b63\u786e\u7684\u6570\u636e\u7c7b\u578b E_INVALID_SPACEVIDLEN -3022 VID \u957f\u5ea6\u65e0\u6548 E_INVALID_FILTER -3031 \u65e0\u6548\u7684\u8fc7\u6ee4\u5668 E_INVALID_UPDATER -3032 \u65e0\u6548\u7684\u5b57\u6bb5\u66f4\u65b0 E_INVALID_STORE -3033 \u65e0\u6548\u7684 KV \u5b58\u50a8 E_INVALID_PEER -3034 peer \u65e0\u6548 E_RETRY_EXHAUSTED -3035 \u91cd\u8bd5\u6b21\u6570\u8017\u5149 E_TRANSFER_LEADER_FAILED -3036 leader \u8f6c\u6362\u5931\u8d25 E_INVALID_STAT_TYPE -3037 \u65e0\u6548\u7684\u7edf\u8ba1\u7c7b\u578b E_INVALID_VID -3038 VID \u65e0\u6548 E_LOAD_META_FAILED -3040 \u52a0\u8f7d\u5143\u4fe1\u606f\u5931\u8d25 E_FAILED_TO_CHECKPOINT -3041 \u751f\u6210 checkpoint \u5931\u8d25 E_CHECKPOINT_BLOCKED -3042 \u751f\u6210 checkpoint \u88ab\u963b\u585e E_FILTER_OUT -3043 \u6570\u636e\u88ab\u8fc7\u6ee4 E_INVALID_DATA -3044 \u65e0\u6548\u7684\u6570\u636e E_MUTATE_EDGE_CONFLICT -3045 \u5e76\u53d1\u5199\u5165\u540c\u4e00\u6761\u8fb9\u53d1\u751f\u51b2\u7a81 E_MUTATE_TAG_CONFLICT -3046 \u5e76\u53d1\u5199\u5165\u540c\u4e00\u4e2a\u70b9\u53d1\u751f\u51b2\u7a81 E_OUTDATED_LOCK -3047 \u9501\u5df2\u7ecf\u5931\u6548 E_INVALID_TASK_PARA -3051 \u65e0\u6548\u7684\u4efb\u52a1\u53c2\u6570 E_USER_CANCEL -3052 \u7528\u6237\u53d6\u6d88\u4e86\u4efb\u52a1 E_TASK_EXECUTION_FAILED -3053 \u4efb\u52a1\u6267\u884c\u5931\u8d25 E_PLAN_IS_KILLED -3060 \u6267\u884c\u8ba1\u5212\u88ab\u6e05\u9664 E_NO_TERM -3070 \u6536\u5230\u8bf7\u6c42\u65f6\u5fc3\u8df3\u6d41\u7a0b\u672a\u5b8c\u6210 E_OUTDATED_TERM -3071 \u6536\u5230\u65e7 leader \u7684\u8fc7\u65f6\u5fc3\u8df3\uff08\u5df2\u9009\u4e3e\u51fa\u65b0\u7684 leader\uff09 E_WRITE_WRITE_CONFLICT -3073 \u5e76\u53d1\u5199\u5165\u65f6\u4e0e\u540e\u5230\u7684\u8bf7\u6c42\u53d1\u751f\u51b2\u7a81 E_RAFT_UNKNOWN_PART -3500 \u672a\u77e5\u7684\u5206\u533a E_RAFT_LOG_GAP -3501 raft \u65e5\u5fd7\u843d\u540e E_RAFT_LOG_STALE -3502 raft \u65e5\u5fd7\u8fc7\u671f E_RAFT_TERM_OUT_OF_DATE -3503 \u5fc3\u8df3\u4fe1\u606f\u5df2\u7ecf\u8fc7\u671f E_RAFT_UNKNOWN_APPEND_LOG -3504 \u672a\u77e5\u7684\u8ffd\u52a0\u65e5\u5fd7 E_RAFT_WAITING_SNAPSHOT -3511 \u7b49\u5f85\u5feb\u7167\u5b8c\u6210 E_RAFT_SENDING_SNAPSHOT -3512 \u53d1\u9001\u5feb\u7167\u8fc7\u7a0b\u51fa\u9519 E_RAFT_INVALID_PEER -3513 \u65e0\u6548\u7684\u63a5\u6536\u7aef E_RAFT_NOT_READY -3514 Raft \u6ca1\u6709\u542f\u52a8 E_RAFT_STOPPED -3515 Raft \u5df2\u7ecf\u505c\u6b62 E_RAFT_BAD_ROLE -3516 \u9519\u8bef\u7684\u89d2\u8272 E_RAFT_WAL_FAIL -3521 \u5199\u5165 WAL \u5931\u8d25 E_RAFT_HOST_STOPPED -3522 \u4e3b\u673a\u5df2\u7ecf\u505c\u6b62 E_RAFT_TOO_MANY_REQUESTS -3523 \u8bf7\u6c42\u6570\u91cf\u8fc7\u591a E_RAFT_PERSIST_SNAPSHOT_FAILED -3524 \u6301\u4e45\u5316\u5feb\u7167\u5931\u8d25 E_RAFT_RPC_EXCEPTION -3525 RPC \u5f02\u5e38 E_RAFT_NO_WAL_FOUND -3526 \u6ca1\u6709\u53d1\u73b0 WAL \u65e5\u5fd7 E_RAFT_HOST_PAUSED -3527 \u4e3b\u673a\u6682\u505c E_RAFT_WRITE_BLOCKED -3528 \u5199\u5165\u88ab\u5835\u585e E_RAFT_BUFFER_OVERFLOW -3529 \u7f13\u5b58\u6ea2\u51fa E_RAFT_ATOMIC_OP_FAILED -3530 \u539f\u5b50\u64cd\u4f5c\u5931\u8d25 E_LEADER_LEASE_FAILED -3531 leader \u79df\u7ea6\u8fc7\u671f E_RAFT_CAUGHT_UP -3532 Raft \u5df2\u7ecf\u540c\u6b65\u6570\u636e E_STORAGE_MEMORY_EXCEEDED -3600 Storage \u5185\u5b58\u8d85\u51fa E_LOG_GAP -4001 drainer \u65e5\u5fd7\u843d\u540e E_LOG_STALE -4002 drainer \u65e5\u5fd7\u8fc7\u671f E_INVALID_DRAINER_STORE -4003 drainer \u6570\u636e\u5b58\u50a8\u65e0\u6548 E_SPACE_MISMATCH -4004 \u56fe\u7a7a\u95f4\u4e0d\u5339\u914d E_PART_MISMATCH -4005 \u5206\u533a\u4e0d\u5339\u914d E_DATA_CONFLICT -4006 \u6570\u636e\u51b2\u7a81 E_REQ_CONFLICT -4007 \u8bf7\u6c42\u51b2\u7a81 E_DATA_ILLEGAL -4008 \u6570\u636e\u975e\u6cd5 E_CACHE_CONFIG_ERROR -5001 \u7f13\u5b58\u914d\u7f6e\u9519\u8bef E_NOT_ENOUGH_SPACE -5002 \u7a7a\u95f4\u4e0d\u8db3 E_CACHE_MISS -5003 \u6ca1\u6709\u547d\u4e2d\u7f13\u5b58 E_POOL_NOT_FOUND -5005 \u5199\u7f13\u5b58\u5931\u8d25 E_NODE_NUMBER_EXCEED_LIMIT -7001 \u673a\u5668\u8282\u70b9\u6570\u8d85\u51fa\u9650\u5236 E_PARSING_LICENSE_FAILURE -7002 \u89e3\u6790\u8bc1\u4e66\u5931\u8d25 E_UNKNOWN -8000 \u672a\u77e5\u9519\u8bef","title":"\u9519\u8bef\u7801"},{"location":"20.appendix/error-code/#_1","text":"NebulaGraph\u8fd0\u884c\u51fa\u73b0\u95ee\u9898\u65f6\uff0c\u4f1a\u8fd4\u56de\u9519\u8bef\u7801\u3002\u672c\u6587\u4ecb\u7ecd\u9519\u8bef\u7801\u7684\u8be6\u7ec6\u4fe1\u606f\u3002 Note \u5982\u679c\u51fa\u73b0\u9519\u8bef\u4f46\u6ca1\u6709\u8fd4\u56de\u9519\u8bef\u7801\uff0c\u6216\u9519\u8bef\u7801\u63cf\u8ff0\u4e0d\u6e05\uff0c\u8bf7\u5728 \u8bba\u575b \u6216 GitHub \u53cd\u9988\u3002 \u8fd4\u56de 0 \u8868\u793a\u6267\u884c\u6210\u529f\u3002 \u9519\u8bef\u540d\u79f0 \u9519\u8bef\u7801 \u8bf4\u660e E_DISCONNECTED -1 \u8fde\u63a5\u65ad\u5f00 E_FAIL_TO_CONNECT -2 \u65e0\u6cd5\u5efa\u7acb\u8fde\u63a5 E_RPC_FAILURE -3 RPC \u5931\u8d25 E_LEADER_CHANGED -4 Raft leader \u53d8\u66f4 E_SPACE_NOT_FOUND -5 \u56fe\u7a7a\u95f4\u4e0d\u5b58\u5728 E_TAG_NOT_FOUND -6 Tag \u4e0d\u5b58\u5728 E_EDGE_NOT_FOUND -7 Edge type\u4e0d\u5b58\u5728 E_INDEX_NOT_FOUND -8 \u7d22\u5f15\u4e0d\u5b58\u5728 E_EDGE_PROP_NOT_FOUND -9 \u8fb9\u5c5e\u6027\u4e0d\u5b58\u5728 E_TAG_PROP_NOT_FOUND -10 Tag \u5c5e\u6027\u4e0d\u5b58\u5728 E_ROLE_NOT_FOUND -11 \u5f53\u524d\u89d2\u8272\u4e0d\u5b58\u5728 E_CONFIG_NOT_FOUND -12 \u5f53\u524d\u914d\u7f6e\u4e0d\u5b58\u5728 E_MACHINE_NOT_FOUND -13 \u5f53\u524d\u4e3b\u673a\u4e0d\u5b58\u5728 E_LISTENER_NOT_FOUND -15 listener \u4e0d\u5b58\u5728 E_PART_NOT_FOUND -16 \u5f53\u524d\u5206\u533a\u4e0d\u5b58\u5728 E_KEY_NOT_FOUND -17 key \u4e0d\u5b58\u5728 E_USER_NOT_FOUND -18 \u7528\u6237\u4e0d\u5b58\u5728 E_STATS_NOT_FOUND -19 \u7edf\u8ba1\u4fe1\u606f\u4e0d\u5b58\u5728 E_SERVICE_NOT_FOUND -20 \u6ca1\u6709\u627e\u5230\u5f53\u524d\u670d\u52a1 E_DRAINER_NOT_FOUND -21 drainer \u4e0d\u5b58\u5728 E_DRAINER_CLIENT_NOT_FOUND -22 drainer \u5ba2\u6237\u7aef\u4e0d\u5b58\u5728 E_PART_STOPPED -23 \u5f53\u524d partition \u5df2\u7ecf\u88ab\u505c\u6b62 E_BACKUP_FAILED -24 \u5907\u4efd\u5931\u8d25 E_BACKUP_EMPTY_TABLE -25 \u5907\u4efd\u7684\u8868\u4e3a\u7a7a E_BACKUP_TABLE_FAILED -26 \u5907\u4efd\u8868\u5931\u8d25 E_PARTIAL_RESULT -27 multiget \u65e0\u6cd5\u83b7\u5f97\u6240\u6709\u6570\u636e E_REBUILD_INDEX_FAILED -28 \u91cd\u5efa\u7d22\u5f15\u5931\u8d25 E_INVALID_PASSWORD -29 \u5bc6\u7801\u65e0\u6548 E_FAILED_GET_ABS_PATH -30 \u65e0\u6cd5\u83b7\u5f97\u7edd\u5bf9\u8def\u5f84 E_BAD_USERNAME_PASSWORD -1001 \u8eab\u4efd\u9a8c\u8bc1\u5931\u8d25 E_SESSION_INVALID -1002 \u65e0\u6548\u4f1a\u8bdd E_SESSION_TIMEOUT -1003 \u4f1a\u8bdd\u8d85\u65f6 E_SYNTAX_ERROR -1004 \u8bed\u6cd5\u9519\u8bef E_EXECUTION_ERROR -1005 \u6267\u884c\u9519\u8bef E_STATEMENT_EMPTY -1006 \u8bed\u53e5\u4e3a\u7a7a E_BAD_PERMISSION -1008 \u6743\u9650\u4e0d\u8db3 E_SEMANTIC_ERROR -1009 \u8bed\u4e49\u9519\u8bef E_TOO_MANY_CONNECTIONS -1010 \u8d85\u51fa\u6700\u5927\u8fde\u63a5\u6570 E_PARTIAL_SUCCEEDED -1011 \u8bbf\u95ee\u5b58\u50a8\u5931\u8d25\uff08\u4ec5\u6709\u90e8\u5206\u8bf7\u6c42\u6210\u529f\uff09 E_NO_HOSTS -2001 \u4e3b\u673a\u4e0d\u5b58\u5728 E_EXISTED -2002 \u4e3b\u673a\u5df2\u7ecf\u5b58\u5728 E_INVALID_HOST -2003 \u65e0\u6548\u4e3b\u673a E_UNSUPPORTED -2004 \u5f53\u524d\u547d\u4ee4\u3001\u8bed\u53e5\u3001\u529f\u80fd\u4e0d\u652f\u6301 E_NOT_DROP -2005 \u4e0d\u5141\u8bb8\u5220\u9664 E_CONFIG_IMMUTABLE -2007 \u914d\u7f6e\u9879\u4e0d\u80fd\u6539\u53d8 E_CONFLICT -2008 \u53c2\u6570\u4e0e meta \u6570\u636e\u51b2\u7a81 E_INVALID_PARM -2009 \u65e0\u6548\u7684\u53c2\u6570 E_WRONGCLUSTER -2010 \u9519\u8bef\u7684\u96c6\u7fa4 E_ZONE_NOT_ENOUGH -2011 listener \u51b2\u7a81 E_ZONE_IS_EMPTY -2012 \u4e3b\u673a\u4e0d\u5b58\u5728 E_SCHEMA_NAME_EXISTS -2013 Schema \u540d\u5b57\u5df2\u5b58\u5728 E_RELATED_INDEX_EXISTS -2014 \u4e0e Tag \u6216 Edge Type \u76f8\u5173\u7684\u7d22\u5f15\u5b58\u5728\uff0c\u4e0d\u80fd\u88ab\u5220\u9664 E_RELATED_SPACE_EXISTS -2015 \u4ecd\u6709\u56fe\u7a7a\u95f4\u5728\u4e3b\u673a\u4e0a\uff0c\u4e0d\u80fd\u88ab\u5220\u9664 E_STORE_FAILURE -2021 \u5b58\u50a8\u6570\u636e\u5931\u8d25 E_STORE_SEGMENT_ILLEGAL -2022 \u5b58\u50a8\u6bb5\u975e\u6cd5 E_BAD_BALANCE_PLAN -2023 \u65e0\u6548\u7684\u6570\u636e\u5747\u8861\u8ba1\u5212 E_BALANCED -2024 \u96c6\u7fa4\u5df2\u7ecf\u5904\u4e8e\u6570\u636e\u5747\u8861\u72b6\u6001 E_NO_RUNNING_BALANCE_PLAN -2025 \u6ca1\u6709\u6b63\u5728\u8fd0\u884c\u7684\u6570\u636e\u5747\u8861\u8ba1\u5212 E_NO_VALID_HOST -2026 \u7f3a\u5c11\u6709\u6548\u7684\u4e3b\u673a E_CORRUPTED_BALANCE_PLAN -2027 \u5df2\u7ecf\u635f\u574f\u7684\u6570\u636e\u5747\u8861\u8ba1\u5212 E_IMPROPER_ROLE -2030 \u56de\u6536\u7528\u6237\u89d2\u8272\u5931\u8d25 E_INVALID_PARTITION_NUM -2031 \u65e0\u6548\u7684\u5206\u533a\u6570\u91cf E_INVALID_REPLICA_FACTOR -2032 \u65e0\u6548\u7684\u526f\u672c\u56e0\u5b50 E_INVALID_CHARSET -2033 \u65e0\u6548\u7684\u5b57\u7b26\u96c6 E_INVALID_COLLATE -2034 \u65e0\u6548\u7684\u5b57\u7b26\u6392\u5e8f\u89c4\u5219 E_CHARSET_COLLATE_NOT_MATCH -2035 \u5b57\u7b26\u96c6\u548c\u5b57\u7b26\u6392\u5e8f\u89c4\u5219\u4e0d\u5339\u914d E_SNAPSHOT_FAILURE -2040 \u751f\u6210\u5feb\u7167\u5931\u8d25 E_BLOCK_WRITE_FAILURE -2041 \u5199\u5165\u5757\u6570\u636e\u5931\u8d25 E_ADD_JOB_FAILURE -2044 \u589e\u52a0\u65b0\u7684\u4efb\u52a1\u5931\u8d25 E_STOP_JOB_FAILURE -2045 \u505c\u6b62\u4efb\u52a1\u5931\u8d25 E_SAVE_JOB_FAILURE -2046 \u4fdd\u5b58\u4efb\u52a1\u4fe1\u606f\u5931\u8d25 E_BALANCER_FAILURE -2047 \u6570\u636e\u5747\u8861\u5931\u8d25 E_JOB_NOT_FINISHED -2048 \u5f53\u524d\u4efb\u52a1\u8fd8\u6ca1\u6709\u5b8c\u6210 E_TASK_REPORT_OUT_DATE -2049 \u4efb\u52a1\u62a5\u8868\u5931\u6548 E_JOB_NOT_IN_SPACE -2050 \u5f53\u524d\u4efb\u52a1\u4e0d\u5728\u56fe\u7a7a\u95f4\u5185 E_JOB_NEED_RECOVER -2051 \u5f53\u524d\u4efb\u52a1\u9700\u8981\u6062\u590d E_JOB_ALREADY_FINISH -2052 \u4efb\u52a1\u5df2\u7ecf\u5931\u8d25\u6216\u5b8c\u6210 E_JOB_SUBMITTED -2053 \u4efb\u52a1\u9ed8\u8ba4\u72b6\u6001 E_JOB_NOT_STOPPABLE -2054 \u7ed9\u5b9a\u4efb\u52a1\u4e0d\u652f\u6301\u505c\u6b62 E_JOB_HAS_NO_TARGET_STORAGE -2055 leader \u5206\u5e03\u672a\u4e0a\u62a5\uff0c\u56e0\u6b64\u65e0\u6cd5\u5c06\u4efb\u52a1\u53d1\u9001\u5230\u5b58\u50a8 E_INVALID_JOB -2065 \u65e0\u6548\u7684\u4efb\u52a1 E_BACKUP_BUILDING_INDEX -2066 \u5907\u4efd\u7ec8\u6b62\uff08\u6b63\u5728\u521b\u5efa\u7d22\u5f15\uff09 E_BACKUP_SPACE_NOT_FOUND -2067 \u5907\u4efd\u65f6\u56fe\u7a7a\u95f4\u4e0d\u5b58\u5728 E_RESTORE_FAILURE -2068 \u5907\u4efd\u6062\u590d\u5931\u8d25 E_SESSION_NOT_FOUND -2069 \u4f1a\u8bdd\u4e0d\u5b58\u5728 E_LIST_CLUSTER_FAILURE -2070 \u83b7\u53d6\u96c6\u7fa4\u4fe1\u606f\u5931\u8d25 E_LIST_CLUSTER_GET_ABS_PATH_FAILURE -2071 \u83b7\u53d6\u96c6\u7fa4\u4fe1\u606f\u65f6\u65e0\u6cd5\u83b7\u53d6\u7edd\u5bf9\u8def\u5f84 E_LIST_CLUSTER_NO_AGENT_FAILURE -2072 \u83b7\u53d6\u96c6\u7fa4\u4fe1\u606f\u65f6\u65e0\u6cd5\u83b7\u5f97 agent E_QUERY_NOT_FOUND -2073 query \u672a\u627e\u5230 E_AGENT_HB_FAILURE -2074 agent \u6ca1\u6709\u6c47\u62a5\u5fc3\u8df3 E_HOST_CAN_NOT_BE_ADDED -2082 \u8be5\u4e3b\u673a\u4e0d\u80fd\u88ab\u6dfb\u52a0\uff0c\u56e0\u4e3a\u5b83\u4e0d\u662f\u4e00\u4e2a Storage \u4e3b\u673a E_ACCESS_ES_FAILURE -2090 \u8bbf\u95ee Elasticsearch \u5931\u8d25 E_GRAPH_MEMORY_EXCEEDED -2600 Graph \u5185\u5b58\u8d85\u51fa E_CONSENSUS_ERROR -3001 \u9009\u4e3e\u65f6\u65e0\u6cd5\u8fbe\u6210\u5171\u8bc6 E_KEY_HAS_EXISTS -3002 key \u5df2\u7ecf\u5b58\u5728 E_DATA_TYPE_MISMATCH -3003 \u6570\u636e\u7c7b\u578b\u4e0d\u5339\u914d E_INVALID_FIELD_VALUE -3004 \u65e0\u6548\u7684\u5b57\u6bb5\u503c E_INVALID_OPERATION -3005 \u65e0\u6548\u7684\u64cd\u4f5c E_NOT_NULLABLE -3006 \u5f53\u524d\u503c\u4e0d\u5141\u8bb8\u4e3a\u7a7a E_FIELD_UNSET -3007 \u5b57\u6bb5\u975e\u7a7a\u6216\u8005\u6ca1\u6709\u9ed8\u8ba4\u503c\u65f6\uff0c\u5b57\u6bb5\u503c\u5fc5\u987b\u8bbe\u7f6e E_OUT_OF_RANGE -3008 \u53d6\u503c\u8d85\u51fa\u4e86\u5f53\u524d\u7c7b\u578b\u7684\u8303\u56f4 E_DATA_CONFLICT_ERROR -3010 \u6570\u636e\u51b2\u7a81 E_WRITE_STALLED -3011 \u5199\u5165\u88ab\u5ef6\u8fdf E_IMPROPER_DATA_TYPE -3021 \u4e0d\u6b63\u786e\u7684\u6570\u636e\u7c7b\u578b E_INVALID_SPACEVIDLEN -3022 VID \u957f\u5ea6\u65e0\u6548 E_INVALID_FILTER -3031 \u65e0\u6548\u7684\u8fc7\u6ee4\u5668 E_INVALID_UPDATER -3032 \u65e0\u6548\u7684\u5b57\u6bb5\u66f4\u65b0 E_INVALID_STORE -3033 \u65e0\u6548\u7684 KV \u5b58\u50a8 E_INVALID_PEER -3034 peer \u65e0\u6548 E_RETRY_EXHAUSTED -3035 \u91cd\u8bd5\u6b21\u6570\u8017\u5149 E_TRANSFER_LEADER_FAILED -3036 leader \u8f6c\u6362\u5931\u8d25 E_INVALID_STAT_TYPE -3037 \u65e0\u6548\u7684\u7edf\u8ba1\u7c7b\u578b E_INVALID_VID -3038 VID \u65e0\u6548 E_LOAD_META_FAILED -3040 \u52a0\u8f7d\u5143\u4fe1\u606f\u5931\u8d25 E_FAILED_TO_CHECKPOINT -3041 \u751f\u6210 checkpoint \u5931\u8d25 E_CHECKPOINT_BLOCKED -3042 \u751f\u6210 checkpoint \u88ab\u963b\u585e E_FILTER_OUT -3043 \u6570\u636e\u88ab\u8fc7\u6ee4 E_INVALID_DATA -3044 \u65e0\u6548\u7684\u6570\u636e E_MUTATE_EDGE_CONFLICT -3045 \u5e76\u53d1\u5199\u5165\u540c\u4e00\u6761\u8fb9\u53d1\u751f\u51b2\u7a81 E_MUTATE_TAG_CONFLICT -3046 \u5e76\u53d1\u5199\u5165\u540c\u4e00\u4e2a\u70b9\u53d1\u751f\u51b2\u7a81 E_OUTDATED_LOCK -3047 \u9501\u5df2\u7ecf\u5931\u6548 E_INVALID_TASK_PARA -3051 \u65e0\u6548\u7684\u4efb\u52a1\u53c2\u6570 E_USER_CANCEL -3052 \u7528\u6237\u53d6\u6d88\u4e86\u4efb\u52a1 E_TASK_EXECUTION_FAILED -3053 \u4efb\u52a1\u6267\u884c\u5931\u8d25 E_PLAN_IS_KILLED -3060 \u6267\u884c\u8ba1\u5212\u88ab\u6e05\u9664 E_NO_TERM -3070 \u6536\u5230\u8bf7\u6c42\u65f6\u5fc3\u8df3\u6d41\u7a0b\u672a\u5b8c\u6210 E_OUTDATED_TERM -3071 \u6536\u5230\u65e7 leader \u7684\u8fc7\u65f6\u5fc3\u8df3\uff08\u5df2\u9009\u4e3e\u51fa\u65b0\u7684 leader\uff09 E_WRITE_WRITE_CONFLICT -3073 \u5e76\u53d1\u5199\u5165\u65f6\u4e0e\u540e\u5230\u7684\u8bf7\u6c42\u53d1\u751f\u51b2\u7a81 E_RAFT_UNKNOWN_PART -3500 \u672a\u77e5\u7684\u5206\u533a E_RAFT_LOG_GAP -3501 raft \u65e5\u5fd7\u843d\u540e E_RAFT_LOG_STALE -3502 raft \u65e5\u5fd7\u8fc7\u671f E_RAFT_TERM_OUT_OF_DATE -3503 \u5fc3\u8df3\u4fe1\u606f\u5df2\u7ecf\u8fc7\u671f E_RAFT_UNKNOWN_APPEND_LOG -3504 \u672a\u77e5\u7684\u8ffd\u52a0\u65e5\u5fd7 E_RAFT_WAITING_SNAPSHOT -3511 \u7b49\u5f85\u5feb\u7167\u5b8c\u6210 E_RAFT_SENDING_SNAPSHOT -3512 \u53d1\u9001\u5feb\u7167\u8fc7\u7a0b\u51fa\u9519 E_RAFT_INVALID_PEER -3513 \u65e0\u6548\u7684\u63a5\u6536\u7aef E_RAFT_NOT_READY -3514 Raft \u6ca1\u6709\u542f\u52a8 E_RAFT_STOPPED -3515 Raft \u5df2\u7ecf\u505c\u6b62 E_RAFT_BAD_ROLE -3516 \u9519\u8bef\u7684\u89d2\u8272 E_RAFT_WAL_FAIL -3521 \u5199\u5165 WAL \u5931\u8d25 E_RAFT_HOST_STOPPED -3522 \u4e3b\u673a\u5df2\u7ecf\u505c\u6b62 E_RAFT_TOO_MANY_REQUESTS -3523 \u8bf7\u6c42\u6570\u91cf\u8fc7\u591a E_RAFT_PERSIST_SNAPSHOT_FAILED -3524 \u6301\u4e45\u5316\u5feb\u7167\u5931\u8d25 E_RAFT_RPC_EXCEPTION -3525 RPC \u5f02\u5e38 E_RAFT_NO_WAL_FOUND -3526 \u6ca1\u6709\u53d1\u73b0 WAL \u65e5\u5fd7 E_RAFT_HOST_PAUSED -3527 \u4e3b\u673a\u6682\u505c E_RAFT_WRITE_BLOCKED -3528 \u5199\u5165\u88ab\u5835\u585e E_RAFT_BUFFER_OVERFLOW -3529 \u7f13\u5b58\u6ea2\u51fa E_RAFT_ATOMIC_OP_FAILED -3530 \u539f\u5b50\u64cd\u4f5c\u5931\u8d25 E_LEADER_LEASE_FAILED -3531 leader \u79df\u7ea6\u8fc7\u671f E_RAFT_CAUGHT_UP -3532 Raft \u5df2\u7ecf\u540c\u6b65\u6570\u636e E_STORAGE_MEMORY_EXCEEDED -3600 Storage \u5185\u5b58\u8d85\u51fa E_LOG_GAP -4001 drainer \u65e5\u5fd7\u843d\u540e E_LOG_STALE -4002 drainer \u65e5\u5fd7\u8fc7\u671f E_INVALID_DRAINER_STORE -4003 drainer \u6570\u636e\u5b58\u50a8\u65e0\u6548 E_SPACE_MISMATCH -4004 \u56fe\u7a7a\u95f4\u4e0d\u5339\u914d E_PART_MISMATCH -4005 \u5206\u533a\u4e0d\u5339\u914d E_DATA_CONFLICT -4006 \u6570\u636e\u51b2\u7a81 E_REQ_CONFLICT -4007 \u8bf7\u6c42\u51b2\u7a81 E_DATA_ILLEGAL -4008 \u6570\u636e\u975e\u6cd5 E_CACHE_CONFIG_ERROR -5001 \u7f13\u5b58\u914d\u7f6e\u9519\u8bef E_NOT_ENOUGH_SPACE -5002 \u7a7a\u95f4\u4e0d\u8db3 E_CACHE_MISS -5003 \u6ca1\u6709\u547d\u4e2d\u7f13\u5b58 E_POOL_NOT_FOUND -5005 \u5199\u7f13\u5b58\u5931\u8d25 E_NODE_NUMBER_EXCEED_LIMIT -7001 \u673a\u5668\u8282\u70b9\u6570\u8d85\u51fa\u9650\u5236 E_PARSING_LICENSE_FAILURE -7002 \u89e3\u6790\u8bc1\u4e66\u5931\u8d25 E_UNKNOWN -8000 \u672a\u77e5\u9519\u8bef","title":"\u9519\u8bef\u7801"},{"location":"20.appendix/history/","text":"NebulaGraph\u5e74\u8868 \u00b6 2018.9.5 \u7531 @ dutor \u63d0\u4ea4\u4e86\u7b2c\u4e00\u884c\u4ee3\u7801\u3002 2019.5 \u53d1\u5e03\u4e86 v0.1.0 alpha \u7248\u672c, \u5e76\u5f00\u6e90\u3002 \u6b64\u540e\u4e00\u5e74\u5185\u9646\u7eed\u53d1\u5e03 v1.0.0-beta, v1.0.0-rc1, v1.0.0-rc2, v1.0.0-rc3, v1.0.0-rc4 2019.7 \u5728 HBaseCon \u7b2c\u4e00\u6b21\u516c\u5f00\u4eae\u76f8 1 @ dangleptr 2020.3 \u5728 v1.0 \u5f00\u53d1\u7684\u6536\u5c3e\u9636\u6bb5\uff0c\u542f\u52a8\u4e86 v2.0 \u9879\u76ee\u7684\u7814\u53d1 2020.6 \u53d1\u5e03\u4e86\u7b2c\u4e00\u4e2a\u6b63\u5f0f\u5927\u7248\u672c v1.0.0 GA 2021.3 \u53d1\u5e03\u4e86\u7b2c\u4e8c\u4e2a\u5927\u7248\u672c v2.0 GA 2021.8 \u53d1\u5e03 v2.5.0 2021.10 \u53d1\u5e03 v2.6.0 2022.2 \u53d1\u5e03 v3.0.0 2022.4 \u53d1\u5e03 v3.1.0 2022.7 \u53d1\u5e03 v3.2.0 2022.10 \u53d1\u5e03 v3.3.0 2023.2 \u53d1\u5e03 v3.4.0 2023.5 \u53d1\u5e03 v3.5.0 2023.8 \u53d1\u5e03 v3.6.0 NebulaGraph 1.x \u7248\u672c\u652f\u6301 RocksDB \u548c HBase \u4e24\u79cd\u4e3b\u8981\u7684\u540e\u7aef\uff0c\u4f46\u5728 NebulaGraph 2.x \u7248\u672c\u53d6\u6d88\u4e86\u9ed8\u8ba4\u5bf9 HBase \u7684\u652f\u6301\u3002 \u21a9","title":"\u5e74\u8868"},{"location":"20.appendix/history/#nebulagraph","text":"2018.9.5 \u7531 @ dutor \u63d0\u4ea4\u4e86\u7b2c\u4e00\u884c\u4ee3\u7801\u3002 2019.5 \u53d1\u5e03\u4e86 v0.1.0 alpha \u7248\u672c, \u5e76\u5f00\u6e90\u3002 \u6b64\u540e\u4e00\u5e74\u5185\u9646\u7eed\u53d1\u5e03 v1.0.0-beta, v1.0.0-rc1, v1.0.0-rc2, v1.0.0-rc3, v1.0.0-rc4 2019.7 \u5728 HBaseCon \u7b2c\u4e00\u6b21\u516c\u5f00\u4eae\u76f8 1 @ dangleptr 2020.3 \u5728 v1.0 \u5f00\u53d1\u7684\u6536\u5c3e\u9636\u6bb5\uff0c\u542f\u52a8\u4e86 v2.0 \u9879\u76ee\u7684\u7814\u53d1 2020.6 \u53d1\u5e03\u4e86\u7b2c\u4e00\u4e2a\u6b63\u5f0f\u5927\u7248\u672c v1.0.0 GA 2021.3 \u53d1\u5e03\u4e86\u7b2c\u4e8c\u4e2a\u5927\u7248\u672c v2.0 GA 2021.8 \u53d1\u5e03 v2.5.0 2021.10 \u53d1\u5e03 v2.6.0 2022.2 \u53d1\u5e03 v3.0.0 2022.4 \u53d1\u5e03 v3.1.0 2022.7 \u53d1\u5e03 v3.2.0 2022.10 \u53d1\u5e03 v3.3.0 2023.2 \u53d1\u5e03 v3.4.0 2023.5 \u53d1\u5e03 v3.5.0 2023.8 \u53d1\u5e03 v3.6.0 NebulaGraph 1.x \u7248\u672c\u652f\u6301 RocksDB \u548c HBase \u4e24\u79cd\u4e3b\u8981\u7684\u540e\u7aef\uff0c\u4f46\u5728 NebulaGraph 2.x \u7248\u672c\u53d6\u6d88\u4e86\u9ed8\u8ba4\u5bf9 HBase \u7684\u652f\u6301\u3002 \u21a9","title":"NebulaGraph\u5e74\u8868"},{"location":"20.appendix/mind-map/","text":"\u601d\u7ef4\u5bfc\u56fe \u00b6 \u4ee5\u4e0b\u7ed9\u51faNebulaGraph\u7ed3\u6784\u6846\u67b6\u7684\u601d\u7ef4\u5bfc\u56fe\uff0c\u7528\u6237\u53ef\u4ee5 \u70b9\u51fb \u5e76\u67e5\u770b\u5927\u56fe\u3002 \u4ee5\u4e0b\u7ed9\u51fa nGQL \u7684\u601d\u7ef4\u5bfc\u56fe\uff0c\u7528\u6237\u53ef\u4ee5 \u70b9\u51fb \u5e76\u67e5\u770b\u5927\u56fe\u3002","title":"\u601d\u7ef4\u5bfc\u56fe"},{"location":"20.appendix/mind-map/#_1","text":"\u4ee5\u4e0b\u7ed9\u51faNebulaGraph\u7ed3\u6784\u6846\u67b6\u7684\u601d\u7ef4\u5bfc\u56fe\uff0c\u7528\u6237\u53ef\u4ee5 \u70b9\u51fb \u5e76\u67e5\u770b\u5927\u56fe\u3002 \u4ee5\u4e0b\u7ed9\u51fa nGQL \u7684\u601d\u7ef4\u5bfc\u56fe\uff0c\u7528\u6237\u53ef\u4ee5 \u70b9\u51fb \u5e76\u67e5\u770b\u5927\u56fe\u3002","title":"\u601d\u7ef4\u5bfc\u56fe"},{"location":"20.appendix/port-guide/","text":"\u4ea7\u54c1\u7aef\u53e3\u5168\u96c6 \u00b6 \u4ee5\u4e0b\u662fNebulaGraph\u5185\u6838\u53ca\u5468\u8fb9\u5de5\u5177\u4f7f\u7528\u7684\u9ed8\u8ba4\u7aef\u53e3\u4fe1\u606f\uff1a \u5e8f\u53f7 \u6240\u5c5e\u4ea7\u54c1/\u670d\u52a1 \u7c7b\u578b \u9ed8\u8ba4\u7aef\u53e3 \u8bf4\u660e 1 NebulaGraph TCP 9669 Graph \u670d\u52a1\u7684 RPC \u5b88\u62a4\u8fdb\u7a0b\u76d1\u542c\u7aef\u53e3\uff08\u901a\u5e38\u7528\u4e8e\u5ba2\u6237\u7aef\u8fde\u63a5Graph\u670d\u52a1\uff09\u3002 2 NebulaGraph TCP 19669 Graph \u670d\u52a1\u7684 HTTP \u7aef\u53e3\u3002 3 NebulaGraph TCP 19670 Graph \u670d\u52a1\u7684 HTTP/2 \u7aef\u53e3\u3002\uff083.x \u540e\u5df2\u5f03\u7528\u8be5\u7aef\u53e3\uff09 4 NebulaGraph TCP 9559 Meta \u670d\u52a1\u7684 RPC \u5b88\u62a4\u8fdb\u7a0b\u76d1\u542c\u7aef\u53e3\u3002\uff08\u901a\u5e38\u7531 Graph \u670d\u52a1\u548c Storage \u670d\u52a1\u53d1\u8d77\u8bf7\u6c42\uff0c\u7528\u4e8e\u83b7\u53d6\u548c\u66f4\u65b0\u56fe\u6570\u636e\u5e93\u7684\u5143\u6570\u636e\u4fe1\u606f\u3002 5 NebulaGraph TCP 9560 Meta \u670d\u52a1\u4e4b\u95f4\u7684 Raft \u901a\u4fe1\u7aef\u53e3\u3002 6 NebulaGraph TCP 19559 Meta \u670d\u52a1\u7684 HTTP \u7aef\u53e3\u3002 7 NebulaGraph TCP 19560 Meta \u670d\u52a1\u7684 HTTP/2 \u7aef\u53e3\u3002\uff083.x \u540e\u5df2\u5f03\u7528\u8be5\u7aef\u53e3\uff09 8 NebulaGraph TCP 9778 Storage \u670d\u52a1\u4e2d\uff0cAdmin \u670d\u52a1\u5360\u7528\u7aef\u53e3\u3002 9 NebulaGraph TCP 9779 Storage \u670d\u52a1\u7684 RPC \u5b88\u62a4\u8fdb\u7a0b\u76d1\u542c\u7aef\u53e3\u3002\uff08\u901a\u5e38\u7531 Graph \u670d\u52a1\u53d1\u8d77\u8bf7\u6c42\uff0c\u7528\u4e8e\u6267\u884c\u6570\u636e\u5b58\u50a8\u76f8\u5173\u7684\u64cd\u4f5c\uff0c\u4f8b\u5982\u8bfb\u53d6\u3001\u5199\u5165\u6216\u5220\u9664\u6570\u636e\u3002\uff09 10 NebulaGraph TCP 9780 Storage \u670d\u52a1\u4e4b\u95f4\u7684 Raft \u901a\u4fe1\u7aef\u53e3\u3002 11 NebulaGraph TCP 19779 Storage \u670d\u52a1\u7684 HTTP \u7aef\u53e3\u3002 12 NebulaGraph TCP 19780 Storage \u670d\u52a1\u7684 HTTP/2 \u7aef\u53e3\u3002\uff083.x \u540e\u5df2\u5f03\u7528\u8be5\u7aef\u53e3\uff09 13 NebulaGraph TCP 8888 \u5907\u4efd\u548c\u6062\u590d\u529f\u80fd\u7684 Agent \u670d\u52a1\u7aef\u53e3\u3002Agent \u662f\u96c6\u7fa4\u4e2d\u6bcf\u53f0\u673a\u5668\u7684\u4e00\u4e2a\u5b88\u62a4\u8fdb\u7a0b\uff0c\u7528\u4e8e\u542f\u505cNebulaGraph\u670d\u52a1\u548c\u4e0a\u4f20\u3001\u4e0b\u8f7d\u5907\u4efd\u6587\u4ef6\u3002 14 NebulaGraph TCP 9789\u30019790\u30019788 \u5168\u6587\u7d22\u5f15\u4e2d Raft Listener \u7684\u7aef\u53e3\uff0c\u4ece Storage \u670d\u52a1\u8bfb\u53d6\u6570\u636e\uff0c\u7136\u540e\u5c06\u5b83\u4eec\u5199\u5165 Elasticsearch \u96c6\u7fa4\u3002 \u4e5f\u662f\u96c6\u7fa4\u95f4\u6570\u636e\u540c\u6b65\u4e2d Storage Listener \u7684\u7aef\u53e3\u3002\u7528\u4e8e\u540c\u6b65\u4e3b\u96c6\u7fa4\u7684 Storage \u6570\u636e\u3002\u7aef\u53e3 9790\u30019788 \u7531\u7aef\u53e3 9789 \u52a0\u4e00\u51cf\u4e00\u540e\u81ea\u52a8\u751f\u6210\u3002 15 NebulaGraph TCP 9200 NebulaGraph\u4f7f\u7528\u8be5\u7aef\u53e3\u4e0e Elasticsearch \u8fdb\u884c HTTP \u901a\u4fe1\uff0c\u4ee5\u6267\u884c\u5168\u6587\u641c\u7d22\u67e5\u8be2\u548c\u7ba1\u7406\u5168\u6587\u7d22\u5f15\u3002 16 NebulaGraph TCP 9569\u30019570\u30019568 \u96c6\u7fa4\u95f4\u6570\u636e\u540c\u6b65\u529f\u80fd\u4e2d Meta Listener \u7684\u7aef\u53e3\uff0c\u7528\u4e8e\u540c\u6b65\u4e3b\u96c6\u7fa4\u7684 Meta \u6570\u636e\u3002\u7aef\u53e3 9570\u30019568 \u7531\u7aef\u53e3 9569 \u52a0\u4e00\u51cf\u4e00\u540e\u81ea\u52a8\u751f\u6210\u3002 17 NebulaGraph TCP 9889\u30019890\u30019888 \u96c6\u7fa4\u95f4\u6570\u636e\u540c\u6b65\u529f\u80fd\u4e2d Drainer \u670d\u52a1\u7aef\u53e3\u3002\u7528\u4e8e\u540c\u6b65 Storage\u3001Meta \u6570\u636e\u7ed9\u4ece\u96c6\u7fa4\u3002\u7aef\u53e3 9890\u30019888 \u7531\u7aef\u53e3 9889 \u52a0\u4e00\u51cf\u4e00\u540e\u81ea\u52a8\u751f\u6210\u3002 18 NebulaGraph Studio TCP 7001 Studio \u63d0\u4f9b Web \u670d\u52a1\u5360\u7528\u7aef\u53e3\u3002 19 NebulaGraph Dashboard TCP 8090 Nebula HTTP Gateway \u4f9d\u8d56\u670d\u52a1\u7aef\u53e3\u3002\u4e3a\u96c6\u7fa4\u670d\u52a1\u63d0\u4f9b HTTP \u63a5\u53e3\uff0c\u6267\u884c nGQL \u8bed\u53e5\u4e0eNebulaGraph\u6570\u636e\u5e93\u8fdb\u884c\u4ea4\u4e92\u3002 20 NebulaGraph Dashboard TCP 9200 Nebula Stats Exporter \u4f9d\u8d56\u670d\u52a1\u7aef\u53e3\u3002\u6536\u96c6\u96c6\u7fa4\u7684\u6027\u80fd\u6307\u6807\uff0c\u5305\u62ec\u670d\u52a1 IP \u5730\u5740\u3001\u7248\u672c\u548c\u76d1\u63a7\u6307\u6807\uff08\u4f8b\u5982\u67e5\u8be2\u6570\u91cf\u3001\u67e5\u8be2\u5ef6\u8fdf\u3001\u5fc3\u8df3\u5ef6\u8fdf \u7b49\uff09\u3002 21 NebulaGraph Dashboard TCP 9100 Node Exporter \u4f9d\u8d56\u670d\u52a1\u7aef\u53e3\u3002\u6536\u96c6\u96c6\u7fa4\u4e2d\u673a\u5668\u7684\u8d44\u6e90\u4fe1\u606f\uff0c\u5305\u62ec CPU\u3001\u5185\u5b58\u3001\u8d1f\u8f7d\u3001\u78c1\u76d8\u548c\u6d41\u91cf\u3002 22 NebulaGraph Dashboard TCP 9090 Prometheus \u670d\u52a1\u7684\u7aef\u53e3\u3002\u5b58\u50a8\u76d1\u63a7\u6570\u636e\u7684\u65f6\u95f4\u5e8f\u5217\u6570\u636e\u5e93\u3002 23 NebulaGraph Dashboard TCP 7003 Dashboard \u793e\u533a\u7248 \u63d0\u4f9b Web \u670d\u52a1\u5360\u7528\u7aef\u53e3\u3002","title":"\u4ea7\u54c1\u7aef\u53e3\u5168\u96c6"},{"location":"20.appendix/port-guide/#_1","text":"\u4ee5\u4e0b\u662fNebulaGraph\u5185\u6838\u53ca\u5468\u8fb9\u5de5\u5177\u4f7f\u7528\u7684\u9ed8\u8ba4\u7aef\u53e3\u4fe1\u606f\uff1a \u5e8f\u53f7 \u6240\u5c5e\u4ea7\u54c1/\u670d\u52a1 \u7c7b\u578b \u9ed8\u8ba4\u7aef\u53e3 \u8bf4\u660e 1 NebulaGraph TCP 9669 Graph \u670d\u52a1\u7684 RPC \u5b88\u62a4\u8fdb\u7a0b\u76d1\u542c\u7aef\u53e3\uff08\u901a\u5e38\u7528\u4e8e\u5ba2\u6237\u7aef\u8fde\u63a5Graph\u670d\u52a1\uff09\u3002 2 NebulaGraph TCP 19669 Graph \u670d\u52a1\u7684 HTTP \u7aef\u53e3\u3002 3 NebulaGraph TCP 19670 Graph \u670d\u52a1\u7684 HTTP/2 \u7aef\u53e3\u3002\uff083.x \u540e\u5df2\u5f03\u7528\u8be5\u7aef\u53e3\uff09 4 NebulaGraph TCP 9559 Meta \u670d\u52a1\u7684 RPC \u5b88\u62a4\u8fdb\u7a0b\u76d1\u542c\u7aef\u53e3\u3002\uff08\u901a\u5e38\u7531 Graph \u670d\u52a1\u548c Storage \u670d\u52a1\u53d1\u8d77\u8bf7\u6c42\uff0c\u7528\u4e8e\u83b7\u53d6\u548c\u66f4\u65b0\u56fe\u6570\u636e\u5e93\u7684\u5143\u6570\u636e\u4fe1\u606f\u3002 5 NebulaGraph TCP 9560 Meta \u670d\u52a1\u4e4b\u95f4\u7684 Raft \u901a\u4fe1\u7aef\u53e3\u3002 6 NebulaGraph TCP 19559 Meta \u670d\u52a1\u7684 HTTP \u7aef\u53e3\u3002 7 NebulaGraph TCP 19560 Meta \u670d\u52a1\u7684 HTTP/2 \u7aef\u53e3\u3002\uff083.x \u540e\u5df2\u5f03\u7528\u8be5\u7aef\u53e3\uff09 8 NebulaGraph TCP 9778 Storage \u670d\u52a1\u4e2d\uff0cAdmin \u670d\u52a1\u5360\u7528\u7aef\u53e3\u3002 9 NebulaGraph TCP 9779 Storage \u670d\u52a1\u7684 RPC \u5b88\u62a4\u8fdb\u7a0b\u76d1\u542c\u7aef\u53e3\u3002\uff08\u901a\u5e38\u7531 Graph \u670d\u52a1\u53d1\u8d77\u8bf7\u6c42\uff0c\u7528\u4e8e\u6267\u884c\u6570\u636e\u5b58\u50a8\u76f8\u5173\u7684\u64cd\u4f5c\uff0c\u4f8b\u5982\u8bfb\u53d6\u3001\u5199\u5165\u6216\u5220\u9664\u6570\u636e\u3002\uff09 10 NebulaGraph TCP 9780 Storage \u670d\u52a1\u4e4b\u95f4\u7684 Raft \u901a\u4fe1\u7aef\u53e3\u3002 11 NebulaGraph TCP 19779 Storage \u670d\u52a1\u7684 HTTP \u7aef\u53e3\u3002 12 NebulaGraph TCP 19780 Storage \u670d\u52a1\u7684 HTTP/2 \u7aef\u53e3\u3002\uff083.x \u540e\u5df2\u5f03\u7528\u8be5\u7aef\u53e3\uff09 13 NebulaGraph TCP 8888 \u5907\u4efd\u548c\u6062\u590d\u529f\u80fd\u7684 Agent \u670d\u52a1\u7aef\u53e3\u3002Agent \u662f\u96c6\u7fa4\u4e2d\u6bcf\u53f0\u673a\u5668\u7684\u4e00\u4e2a\u5b88\u62a4\u8fdb\u7a0b\uff0c\u7528\u4e8e\u542f\u505cNebulaGraph\u670d\u52a1\u548c\u4e0a\u4f20\u3001\u4e0b\u8f7d\u5907\u4efd\u6587\u4ef6\u3002 14 NebulaGraph TCP 9789\u30019790\u30019788 \u5168\u6587\u7d22\u5f15\u4e2d Raft Listener \u7684\u7aef\u53e3\uff0c\u4ece Storage \u670d\u52a1\u8bfb\u53d6\u6570\u636e\uff0c\u7136\u540e\u5c06\u5b83\u4eec\u5199\u5165 Elasticsearch \u96c6\u7fa4\u3002 \u4e5f\u662f\u96c6\u7fa4\u95f4\u6570\u636e\u540c\u6b65\u4e2d Storage Listener \u7684\u7aef\u53e3\u3002\u7528\u4e8e\u540c\u6b65\u4e3b\u96c6\u7fa4\u7684 Storage \u6570\u636e\u3002\u7aef\u53e3 9790\u30019788 \u7531\u7aef\u53e3 9789 \u52a0\u4e00\u51cf\u4e00\u540e\u81ea\u52a8\u751f\u6210\u3002 15 NebulaGraph TCP 9200 NebulaGraph\u4f7f\u7528\u8be5\u7aef\u53e3\u4e0e Elasticsearch \u8fdb\u884c HTTP \u901a\u4fe1\uff0c\u4ee5\u6267\u884c\u5168\u6587\u641c\u7d22\u67e5\u8be2\u548c\u7ba1\u7406\u5168\u6587\u7d22\u5f15\u3002 16 NebulaGraph TCP 9569\u30019570\u30019568 \u96c6\u7fa4\u95f4\u6570\u636e\u540c\u6b65\u529f\u80fd\u4e2d Meta Listener \u7684\u7aef\u53e3\uff0c\u7528\u4e8e\u540c\u6b65\u4e3b\u96c6\u7fa4\u7684 Meta \u6570\u636e\u3002\u7aef\u53e3 9570\u30019568 \u7531\u7aef\u53e3 9569 \u52a0\u4e00\u51cf\u4e00\u540e\u81ea\u52a8\u751f\u6210\u3002 17 NebulaGraph TCP 9889\u30019890\u30019888 \u96c6\u7fa4\u95f4\u6570\u636e\u540c\u6b65\u529f\u80fd\u4e2d Drainer \u670d\u52a1\u7aef\u53e3\u3002\u7528\u4e8e\u540c\u6b65 Storage\u3001Meta \u6570\u636e\u7ed9\u4ece\u96c6\u7fa4\u3002\u7aef\u53e3 9890\u30019888 \u7531\u7aef\u53e3 9889 \u52a0\u4e00\u51cf\u4e00\u540e\u81ea\u52a8\u751f\u6210\u3002 18 NebulaGraph Studio TCP 7001 Studio \u63d0\u4f9b Web \u670d\u52a1\u5360\u7528\u7aef\u53e3\u3002 19 NebulaGraph Dashboard TCP 8090 Nebula HTTP Gateway \u4f9d\u8d56\u670d\u52a1\u7aef\u53e3\u3002\u4e3a\u96c6\u7fa4\u670d\u52a1\u63d0\u4f9b HTTP \u63a5\u53e3\uff0c\u6267\u884c nGQL \u8bed\u53e5\u4e0eNebulaGraph\u6570\u636e\u5e93\u8fdb\u884c\u4ea4\u4e92\u3002 20 NebulaGraph Dashboard TCP 9200 Nebula Stats Exporter \u4f9d\u8d56\u670d\u52a1\u7aef\u53e3\u3002\u6536\u96c6\u96c6\u7fa4\u7684\u6027\u80fd\u6307\u6807\uff0c\u5305\u62ec\u670d\u52a1 IP \u5730\u5740\u3001\u7248\u672c\u548c\u76d1\u63a7\u6307\u6807\uff08\u4f8b\u5982\u67e5\u8be2\u6570\u91cf\u3001\u67e5\u8be2\u5ef6\u8fdf\u3001\u5fc3\u8df3\u5ef6\u8fdf \u7b49\uff09\u3002 21 NebulaGraph Dashboard TCP 9100 Node Exporter \u4f9d\u8d56\u670d\u52a1\u7aef\u53e3\u3002\u6536\u96c6\u96c6\u7fa4\u4e2d\u673a\u5668\u7684\u8d44\u6e90\u4fe1\u606f\uff0c\u5305\u62ec CPU\u3001\u5185\u5b58\u3001\u8d1f\u8f7d\u3001\u78c1\u76d8\u548c\u6d41\u91cf\u3002 22 NebulaGraph Dashboard TCP 9090 Prometheus \u670d\u52a1\u7684\u7aef\u53e3\u3002\u5b58\u50a8\u76d1\u63a7\u6570\u636e\u7684\u65f6\u95f4\u5e8f\u5217\u6570\u636e\u5e93\u3002 23 NebulaGraph Dashboard TCP 7003 Dashboard \u793e\u533a\u7248 \u63d0\u4f9b Web \u670d\u52a1\u5360\u7528\u7aef\u53e3\u3002","title":"\u4ea7\u54c1\u7aef\u53e3\u5168\u96c6"},{"location":"20.appendix/release-notes/dashboard-comm-release-note/","text":"NebulaGraph Dashboard \u793e\u533a\u7248\u66f4\u65b0\u8bf4\u660e \u00b6 \u793e\u533a\u7248 v3.4.0 \u00b6 \u529f\u80fd \u5185\u7f6e dashboard.service \u811a\u672c\uff0c\u652f\u6301\u4e00\u952e\u7ba1\u7406 Dashboard \u670d\u52a1\u548c\u67e5\u770b Dashboard \u7248\u672c\u3002 \u652f\u6301\u67e5\u770b Meta \u670d\u52a1\u7684\u914d\u7f6e\u3002 \u4f18\u5316 \u8c03\u6574\u76ee\u5f55\u7ed3\u6784\uff0c\u7b80\u5316 \u90e8\u7f72\u6b65\u9aa4 \u3002 \u673a\u5668\u7684\u6982\u89c8\u9875\u9762\u663e\u793a\u76d1\u63a7\u6307\u6807\u540d\u79f0\u3002 \u4f18\u5316 num_queries \u7b49\u76d1\u63a7\u6307\u6807\u7684\u8ba1\u7b97\u65b9\u5f0f\uff0c\u8c03\u6574\u4e3a\u65f6\u5e8f\u805a\u5408\u663e\u793a\u3002","title":"NebulaGraph Dashboard \u793e\u533a\u7248"},{"location":"20.appendix/release-notes/dashboard-comm-release-note/#nebulagraph_dashboard","text":"","title":"NebulaGraph Dashboard \u793e\u533a\u7248\u66f4\u65b0\u8bf4\u660e"},{"location":"20.appendix/release-notes/dashboard-comm-release-note/#v340","text":"\u529f\u80fd \u5185\u7f6e dashboard.service \u811a\u672c\uff0c\u652f\u6301\u4e00\u952e\u7ba1\u7406 Dashboard \u670d\u52a1\u548c\u67e5\u770b Dashboard \u7248\u672c\u3002 \u652f\u6301\u67e5\u770b Meta \u670d\u52a1\u7684\u914d\u7f6e\u3002 \u4f18\u5316 \u8c03\u6574\u76ee\u5f55\u7ed3\u6784\uff0c\u7b80\u5316 \u90e8\u7f72\u6b65\u9aa4 \u3002 \u673a\u5668\u7684\u6982\u89c8\u9875\u9762\u663e\u793a\u76d1\u63a7\u6307\u6807\u540d\u79f0\u3002 \u4f18\u5316 num_queries \u7b49\u76d1\u63a7\u6307\u6807\u7684\u8ba1\u7b97\u65b9\u5f0f\uff0c\u8c03\u6574\u4e3a\u65f6\u5e8f\u805a\u5408\u663e\u793a\u3002","title":"\u793e\u533a\u7248 v3.4.0"},{"location":"20.appendix/release-notes/nebula-comm-release-note/","text":"NebulaGraph release notes \u00b6 v3.6.0 \u00b6 \u529f\u80fd \u589e\u5f3a\u5168\u6587\u7d22\u5f15\u529f\u80fd\u3002 #5567 #5575 #5577 #5580 #5584 #5587 \u6d89\u53ca\u53d8\u66f4\u5185\u5bb9\u5982\u4e0b\uff1a - \u539f\u6709\u7684\u5168\u6587\u7d22\u5f15\u529f\u80fd\u7531\u8c03\u7528 Elasticsearch \u7684 Term-level queries \u6539\u4e3a Full text queries \u65b9\u5f0f\u3002 - \u53d8\u66f4\u540e\u9664\u4e86\u652f\u6301\u539f\u6709\u7684\u901a\u914d\u7b26\u3001\u6b63\u5219\u3001\u6a21\u7cca\u5339\u914d\u7b49\u65b9\u5f0f\uff08\u4f46\u8bed\u6cd5\u53d1\u751f\u53d8\u5316\uff09\uff0c\u8fd8\u589e\u52a0\u4e86\u5bf9\u5206\u8bcd\u7684\u652f\u6301\uff08\u4f9d\u8d56 Elasticsearch \u81ea\u8eab\u4f7f\u7528\u7684\u5206\u8bcd\u5668\uff09\uff0c\u67e5\u8be2\u7ed3\u679c\u5305\u542b\u8bc4\u5206\u7ed3\u679c\u3002\u66f4\u591a\u8bed\u6cd5\u8bf7\u53c2\u89c1 Elasticsearch \u5b98\u65b9\u6587\u6863 \u3002 \u589e\u5f3a \u652f\u6301\u4f7f\u7528 MATCH \u5b50\u53e5\u68c0\u7d22 VID \u6216\u5c5e\u6027\u7d22\u5f15\u65f6\u4f7f\u7528\u53d8\u91cf\u3002 #5486 #5553 \u6027\u80fd \u652f\u6301\u5e76\u884c\u542f\u52a8 RocksDB \u5b9e\u4f8b\u4ee5\u52a0\u5feb Storage \u670d\u52a1\u7684\u542f\u52a8\u901f\u5ea6\u3002 #5521 \u4f18\u5316 RocksDB \u8fed\u4ee3\u5668\u6267\u884c DeleteRange \u64cd\u4f5c\u540e\u7684\u524d\u7f00\u641c\u7d22\u6027\u80fd\u3002 #5525 \u4f18\u5316 appendLog \u53d1\u9001\u903b\u8f91\u4ee5\u907f\u514d follower \u5b95\u673a\u540e\u5f71\u54cd\u5199\u6027\u80fd\u3002 #5571 \u4f18\u5316 MATCH \u8bed\u53e5\u67e5\u8be2\u4e0d\u5b58\u5728\u7684\u5c5e\u6027\u65f6\u7684\u6027\u80fd\u3002 #5634 \u7f3a\u9677\u4fee\u590d DQL \u4fee\u590d\u5355\u4e2a\u5927\u67e5\u8be2\u5bfc\u81f4 Graph \u670d\u52a1\u5d29\u6e83\u7684\u95ee\u9898\u3002 #5619 \u4fee\u590d\u6267\u884c Find All Path \u8bed\u53e5\u5bfc\u81f4 Graph \u670d\u52a1\u5d29\u6e83\u7684\u95ee\u9898\u3002 #5621 #5640 \u4fee\u590d\u90e8\u5206\u8fc7\u671f\u6570\u636e\u5728\u6700\u5e95\u5c42\u4e0d\u4f1a\u88ab\u56de\u6536\u7684\u95ee\u9898\u3002 #5447 #5622 \u4fee\u590d\u5728 MATCH \u8bed\u53e5\u4e2d\u6dfb\u52a0\u8def\u5f84\u53d8\u91cf\u4f1a\u5bfc\u81f4 all() \u51fd\u6570\u4e0b\u63a8\u4f18\u5316\u5931\u6548\u7684\u95ee\u9898\u3002 #5631 \u4fee\u590d MATCH \u8bed\u53e5\u4e2d\u901a\u8fc7\u6700\u77ed\u8def\u5f84\u67e5\u8be2\u81ea\u73af\u65f6\u8fd4\u56de\u7ed3\u679c\u9519\u8bef\u7684\u95ee\u9898\u3002 #5636 \u4fee\u590d\u901a\u8fc7\u7ba1\u9053\u7b26\u5220\u9664\u8fb9\u5bfc\u81f4 Graph \u670d\u52a1\u5d29\u6e83\u7684\u95ee\u9898\u3002 #5645 \u4fee\u590d MATCH \u8bed\u53e5\u4e2d\u5339\u914d\u591a\u8df3\u65f6\u8fd4\u56de\u7ed3\u679c\u7f3a\u5c11\u8fb9\u5c5e\u6027\u7684\u95ee\u9898\u3002 #5646 \u5176\u4ed6 \u4fee\u590d Meta \u6570\u636e\u4e0d\u4e00\u81f4\u7684\u95ee\u9898\u3002 #5517 \u4fee\u590d RocksDB \u5bfc\u5165\u64cd\u4f5c\u5bfc\u81f4 leader \u79df\u7ea6\u65e0\u6548\u7684\u95ee\u9898\u3002 #5534 \u4fee\u590d\u5b58\u50a8\u7684\u7edf\u8ba1\u903b\u8f91\u9519\u8bef\u7684\u95ee\u9898\u3002 #5547 \u4fee\u590d\u8bbe\u7f6e\u65e0\u6548\u8bf7\u6c42\u53c2\u6570\u7684\u6807\u5fd7\u5bfc\u81f4 Web \u670d\u52a1\u5d29\u6e83\u7684\u95ee\u9898\u3002 #5566 \u4fee\u590d\u5217\u51fa\u4f1a\u8bdd\u65f6\u6253\u5370\u8fc7\u591a\u65e5\u5fd7\u7684\u95ee\u9898\u3002 #5618","title":"NebulaGraph \u793e\u533a\u7248"},{"location":"20.appendix/release-notes/nebula-comm-release-note/#nebulagraph_release_notes","text":"","title":"NebulaGraph release notes"},{"location":"20.appendix/release-notes/nebula-comm-release-note/#v360","text":"\u529f\u80fd \u589e\u5f3a\u5168\u6587\u7d22\u5f15\u529f\u80fd\u3002 #5567 #5575 #5577 #5580 #5584 #5587 \u6d89\u53ca\u53d8\u66f4\u5185\u5bb9\u5982\u4e0b\uff1a - \u539f\u6709\u7684\u5168\u6587\u7d22\u5f15\u529f\u80fd\u7531\u8c03\u7528 Elasticsearch \u7684 Term-level queries \u6539\u4e3a Full text queries \u65b9\u5f0f\u3002 - \u53d8\u66f4\u540e\u9664\u4e86\u652f\u6301\u539f\u6709\u7684\u901a\u914d\u7b26\u3001\u6b63\u5219\u3001\u6a21\u7cca\u5339\u914d\u7b49\u65b9\u5f0f\uff08\u4f46\u8bed\u6cd5\u53d1\u751f\u53d8\u5316\uff09\uff0c\u8fd8\u589e\u52a0\u4e86\u5bf9\u5206\u8bcd\u7684\u652f\u6301\uff08\u4f9d\u8d56 Elasticsearch \u81ea\u8eab\u4f7f\u7528\u7684\u5206\u8bcd\u5668\uff09\uff0c\u67e5\u8be2\u7ed3\u679c\u5305\u542b\u8bc4\u5206\u7ed3\u679c\u3002\u66f4\u591a\u8bed\u6cd5\u8bf7\u53c2\u89c1 Elasticsearch \u5b98\u65b9\u6587\u6863 \u3002 \u589e\u5f3a \u652f\u6301\u4f7f\u7528 MATCH \u5b50\u53e5\u68c0\u7d22 VID \u6216\u5c5e\u6027\u7d22\u5f15\u65f6\u4f7f\u7528\u53d8\u91cf\u3002 #5486 #5553 \u6027\u80fd \u652f\u6301\u5e76\u884c\u542f\u52a8 RocksDB \u5b9e\u4f8b\u4ee5\u52a0\u5feb Storage \u670d\u52a1\u7684\u542f\u52a8\u901f\u5ea6\u3002 #5521 \u4f18\u5316 RocksDB \u8fed\u4ee3\u5668\u6267\u884c DeleteRange \u64cd\u4f5c\u540e\u7684\u524d\u7f00\u641c\u7d22\u6027\u80fd\u3002 #5525 \u4f18\u5316 appendLog \u53d1\u9001\u903b\u8f91\u4ee5\u907f\u514d follower \u5b95\u673a\u540e\u5f71\u54cd\u5199\u6027\u80fd\u3002 #5571 \u4f18\u5316 MATCH \u8bed\u53e5\u67e5\u8be2\u4e0d\u5b58\u5728\u7684\u5c5e\u6027\u65f6\u7684\u6027\u80fd\u3002 #5634 \u7f3a\u9677\u4fee\u590d DQL \u4fee\u590d\u5355\u4e2a\u5927\u67e5\u8be2\u5bfc\u81f4 Graph \u670d\u52a1\u5d29\u6e83\u7684\u95ee\u9898\u3002 #5619 \u4fee\u590d\u6267\u884c Find All Path \u8bed\u53e5\u5bfc\u81f4 Graph \u670d\u52a1\u5d29\u6e83\u7684\u95ee\u9898\u3002 #5621 #5640 \u4fee\u590d\u90e8\u5206\u8fc7\u671f\u6570\u636e\u5728\u6700\u5e95\u5c42\u4e0d\u4f1a\u88ab\u56de\u6536\u7684\u95ee\u9898\u3002 #5447 #5622 \u4fee\u590d\u5728 MATCH \u8bed\u53e5\u4e2d\u6dfb\u52a0\u8def\u5f84\u53d8\u91cf\u4f1a\u5bfc\u81f4 all() \u51fd\u6570\u4e0b\u63a8\u4f18\u5316\u5931\u6548\u7684\u95ee\u9898\u3002 #5631 \u4fee\u590d MATCH \u8bed\u53e5\u4e2d\u901a\u8fc7\u6700\u77ed\u8def\u5f84\u67e5\u8be2\u81ea\u73af\u65f6\u8fd4\u56de\u7ed3\u679c\u9519\u8bef\u7684\u95ee\u9898\u3002 #5636 \u4fee\u590d\u901a\u8fc7\u7ba1\u9053\u7b26\u5220\u9664\u8fb9\u5bfc\u81f4 Graph \u670d\u52a1\u5d29\u6e83\u7684\u95ee\u9898\u3002 #5645 \u4fee\u590d MATCH \u8bed\u53e5\u4e2d\u5339\u914d\u591a\u8df3\u65f6\u8fd4\u56de\u7ed3\u679c\u7f3a\u5c11\u8fb9\u5c5e\u6027\u7684\u95ee\u9898\u3002 #5646 \u5176\u4ed6 \u4fee\u590d Meta \u6570\u636e\u4e0d\u4e00\u81f4\u7684\u95ee\u9898\u3002 #5517 \u4fee\u590d RocksDB \u5bfc\u5165\u64cd\u4f5c\u5bfc\u81f4 leader \u79df\u7ea6\u65e0\u6548\u7684\u95ee\u9898\u3002 #5534 \u4fee\u590d\u5b58\u50a8\u7684\u7edf\u8ba1\u903b\u8f91\u9519\u8bef\u7684\u95ee\u9898\u3002 #5547 \u4fee\u590d\u8bbe\u7f6e\u65e0\u6548\u8bf7\u6c42\u53c2\u6570\u7684\u6807\u5fd7\u5bfc\u81f4 Web \u670d\u52a1\u5d29\u6e83\u7684\u95ee\u9898\u3002 #5566 \u4fee\u590d\u5217\u51fa\u4f1a\u8bdd\u65f6\u6253\u5370\u8fc7\u591a\u65e5\u5fd7\u7684\u95ee\u9898\u3002 #5618","title":"v3.6.0"},{"location":"20.appendix/release-notes/studio-release-note/","text":"NebulaGraph Studio \u7248\u672c\u66f4\u65b0\u8bf4\u660e \u00b6 v3.8.0 \u00b6 \u529f\u80fd \u652f\u6301\u4f7f\u7528 MySQL \u6570\u636e\u5e93\u4f5c\u4e3a\u540e\u7aef\u5b58\u50a8\u3002 \u589e\u5f3a \u652f\u6301\u81ea\u5b9a\u4e49 WebSocket \u7684\u8bfb\u5199\u53c2\u6570\u3002 \u6613\u7528\u6027 \u652f\u6301\u5728\u5bfc\u5165\u4efb\u52a1\u5217\u8868\u6839\u636e\u56fe\u7a7a\u95f4\u540d\u79f0\u7b5b\u9009\u4efb\u52a1\u3002 \u517c\u5bb9\u6027 \u7531\u4e8e\u6570\u636e\u5e93\u8868\u7ed3\u6784\u53d8\u66f4\uff0c\u9700\u8981\u5728\u914d\u7f6e\u6587\u4ef6\u5185\u5c06 DB.AutoMigrate \u8bbe\u7f6e\u4e3a true \uff0c\u7cfb\u7edf\u4f1a\u81ea\u52a8\u5bf9\u5df2\u6709\u5386\u53f2\u6570\u636e\u8fdb\u884c\u5347\u7ea7\u9002\u914d\u3002 \u5982\u679c\u662f\u81ea\u5df1\u624b\u52a8\u521b\u5efa\u7684\u5e93\u8868\uff0c\u8bf7\u624b\u52a8\u4fee\u6539\u8fd9\u4e9b\u8868\uff1a task_infos \u3001 task_effects \u3001 sketches \u3001 schema_snapshots \u3001 favorites \u3001 files \u3001 datasources \u3002 \u793a\u4f8b\u5982\u4e0b\uff1a ALTER TABLE `task_infos` ADD COLUMN `b_id` CHAR ( 32 ) NOT NULL DEFAULT '' ; UPDATE TABLE `task_infos` SET `b_id` = `id` ; CREATE UNIQUE INDEX `idx_task_infos_id` ON `task_infos` ( `b_id` ); ALTER TABLE `task_effects` ADD COLUMN `b_id` CHAR ( 32 ) NOT NULL DEFAULT '' ; UPDATE TABLE `task_effects` SET `b_id` = `id` ; CREATE UNIQUE INDEX `idx_task_effects_id` ON `task_effects` ( `b_id` ); ... v3.7.0 \u00b6 \u589e\u5f3a \u652f\u6301\u5bfc\u5165 SFTP\u3001Amazon S3 \u7684\u6570\u636e\u6587\u4ef6\u3002 \u5bfc\u5165\u9875\u9762\u652f\u6301\u914d\u7f6e\u66f4\u591a\u5bfc\u5165\u53c2\u6570\uff0c\u5982\u5e76\u53d1\u6570\u3001\u91cd\u8bd5\u6b21\u6570\u7b49\u3002 \u652f\u6301\u91cd\u8dd1\u4efb\u52a1\u3002 \u652f\u6301\u4efb\u52a1\u4fdd\u5b58\u4e3a\u8349\u7a3f\u3002 \u652f\u6301 ARM \u67b6\u6784\u3002","title":"NebulaGraph Studio"},{"location":"20.appendix/release-notes/studio-release-note/#nebulagraph_studio","text":"","title":"NebulaGraph Studio \u7248\u672c\u66f4\u65b0\u8bf4\u660e"},{"location":"20.appendix/release-notes/studio-release-note/#v380","text":"\u529f\u80fd \u652f\u6301\u4f7f\u7528 MySQL \u6570\u636e\u5e93\u4f5c\u4e3a\u540e\u7aef\u5b58\u50a8\u3002 \u589e\u5f3a \u652f\u6301\u81ea\u5b9a\u4e49 WebSocket \u7684\u8bfb\u5199\u53c2\u6570\u3002 \u6613\u7528\u6027 \u652f\u6301\u5728\u5bfc\u5165\u4efb\u52a1\u5217\u8868\u6839\u636e\u56fe\u7a7a\u95f4\u540d\u79f0\u7b5b\u9009\u4efb\u52a1\u3002 \u517c\u5bb9\u6027 \u7531\u4e8e\u6570\u636e\u5e93\u8868\u7ed3\u6784\u53d8\u66f4\uff0c\u9700\u8981\u5728\u914d\u7f6e\u6587\u4ef6\u5185\u5c06 DB.AutoMigrate \u8bbe\u7f6e\u4e3a true \uff0c\u7cfb\u7edf\u4f1a\u81ea\u52a8\u5bf9\u5df2\u6709\u5386\u53f2\u6570\u636e\u8fdb\u884c\u5347\u7ea7\u9002\u914d\u3002 \u5982\u679c\u662f\u81ea\u5df1\u624b\u52a8\u521b\u5efa\u7684\u5e93\u8868\uff0c\u8bf7\u624b\u52a8\u4fee\u6539\u8fd9\u4e9b\u8868\uff1a task_infos \u3001 task_effects \u3001 sketches \u3001 schema_snapshots \u3001 favorites \u3001 files \u3001 datasources \u3002 \u793a\u4f8b\u5982\u4e0b\uff1a ALTER TABLE `task_infos` ADD COLUMN `b_id` CHAR ( 32 ) NOT NULL DEFAULT '' ; UPDATE TABLE `task_infos` SET `b_id` = `id` ; CREATE UNIQUE INDEX `idx_task_infos_id` ON `task_infos` ( `b_id` ); ALTER TABLE `task_effects` ADD COLUMN `b_id` CHAR ( 32 ) NOT NULL DEFAULT '' ; UPDATE TABLE `task_effects` SET `b_id` = `id` ; CREATE UNIQUE INDEX `idx_task_effects_id` ON `task_effects` ( `b_id` ); ...","title":"v3.8.0"},{"location":"20.appendix/release-notes/studio-release-note/#v370","text":"\u589e\u5f3a \u652f\u6301\u5bfc\u5165 SFTP\u3001Amazon S3 \u7684\u6570\u636e\u6587\u4ef6\u3002 \u5bfc\u5165\u9875\u9762\u652f\u6301\u914d\u7f6e\u66f4\u591a\u5bfc\u5165\u53c2\u6570\uff0c\u5982\u5e76\u53d1\u6570\u3001\u91cd\u8bd5\u6b21\u6570\u7b49\u3002 \u652f\u6301\u91cd\u8dd1\u4efb\u52a1\u3002 \u652f\u6301\u4efb\u52a1\u4fdd\u5b58\u4e3a\u8349\u7a3f\u3002 \u652f\u6301 ARM \u67b6\u6784\u3002","title":"v3.7.0"},{"location":"3.ngql-guide/4.job-statements/","text":"\u4f5c\u4e1a\u7ba1\u7406 \u00b6 \u5728 Storage \u670d\u52a1\u4e0a\u957f\u671f\u8fd0\u884c\u7684\u4efb\u52a1\u79f0\u4e3a\u4f5c\u4e1a\uff0c\u4f8b\u5982 COMPACT \u3001 FLUSH \u548c STATS \u3002 \u5982\u679c\u56fe\u7a7a\u95f4\u7684\u6570\u636e\u91cf\u5f88\u5927\uff0c\u8fd9\u4e9b\u4f5c\u4e1a\u53ef\u80fd\u8017\u65f6\u5f88\u957f\u3002\u4f5c\u4e1a\u7ba1\u7406\u53ef\u4ee5\u5e2e\u52a9\u6267\u884c\u3001\u67e5\u770b\u3001\u505c\u6b62\u548c\u6062\u590d\u4f5c\u4e1a\u3002 Note \u6240\u6709\u4f5c\u4e1a\u7ba1\u7406\u547d\u4ee4\u90fd\u9700\u8981\u5148\u9009\u62e9\u56fe\u7a7a\u95f4\u540e\u624d\u80fd\u6267\u884c\u3002 SUBMIT JOB BALANCE LEADER \u00b6 SUBMIT JOB BALANCE LEADER \u8bed\u53e5\u4f1a\u542f\u52a8\u4efb\u52a1\u5747\u8861\u5206\u5e03\u6240\u6709\u56fe\u7a7a\u95f4\u4e2d\u7684 leader\u3002\u8be5\u547d\u4ee4\u4f1a\u8fd4\u56de\u4efb\u52a1 ID\u3002 \u793a\u4f8b\uff1a nebula> SUBMIT JOB BALANCE LEADER; +------------+ | New Job Id | +------------+ | 33 | +------------+ SUBMIT JOB COMPACT \u00b6 SUBMIT JOB COMPACT \u8bed\u53e5\u4f1a\u5728\u5f53\u524d\u56fe\u7a7a\u95f4\u5185\u89e6\u53d1 RocksDB \u7684\u957f\u8017\u65f6 compact \u64cd\u4f5c\u3002 compact \u914d\u7f6e\u8be6\u60c5\u8bf7\u53c2\u89c1 Storage \u670d\u52a1\u914d\u7f6e \u3002 \u793a\u4f8b\uff1a nebula> SUBMIT JOB COMPACT; +------------+ | New Job Id | +------------+ | 40 | +------------+ SUBMIT JOB FLUSH \u00b6 SUBMIT JOB FLUSH \u8bed\u53e5\u5c06\u5f53\u524d\u56fe\u7a7a\u95f4\u5185\u5b58\u4e2d\u7684 RocksDB memfile \u5199\u5165\u786c\u76d8\u3002 \u793a\u4f8b\uff1a nebula> SUBMIT JOB FLUSH; +------------+ | New Job Id | +------------+ | 96 | +------------+ SUBMIT JOB STATS \u00b6 SUBMIT JOB STATS \u8bed\u53e5\u4f1a\u5728\u5f53\u524d\u56fe\u7a7a\u95f4\u5185\u542f\u52a8\u4e00\u4e2a\u4f5c\u4e1a\uff0c\u8be5\u4f5c\u4e1a\u5bf9\u5f53\u524d\u56fe\u7a7a\u95f4\u8fdb\u884c\u7edf\u8ba1\u3002\u4f5c\u4e1a\u5b8c\u6210\u540e\uff0c\u7528\u6237\u53ef\u4ee5\u4f7f\u7528 SHOW STATS \u8bed\u53e5\u5217\u51fa\u7edf\u8ba1\u7ed3\u679c\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1 SHOW STATS \u3002 Note \u5982\u679c\u5b58\u50a8\u5728NebulaGraph\u4e2d\u7684\u6570\u636e\u6709\u53d8\u5316\uff0c\u4e3a\u4e86\u83b7\u53d6\u6700\u65b0\u7684\u7edf\u8ba1\u7ed3\u679c\uff0c\u8bf7\u91cd\u65b0\u6267\u884c SUBMIT JOB STATS \u3002 \u793a\u4f8b\uff1a nebula> SUBMIT JOB STATS; +------------+ | New Job Id | +------------+ | 9 | +------------+ SUBMIT JOB DOWNLOAD/INGEST \u00b6 SUBMIT JOB DOWNLOAD HDFS \u548c SUBMIT JOB INGEST \u547d\u4ee4\u7528\u4e8e\u5c06 SST \u6587\u4ef6\u5bfc\u5165NebulaGraph\u3002\u8be6\u60c5\u53c2\u89c1 \u5bfc\u5165 SST \u6587\u4ef6\u6570\u636e \u3002 SUBMIT JOB DOWNLOAD HDFS \u8bed\u53e5\u4f1a\u4e0b\u8f7d\u6307\u5b9a\u7684 HDFS \u4e0a\u7684 SST \u6587\u4ef6\u3002 SUBMIT JOB INGEST \u8bed\u53e5\u4f1a\u5c06\u4e0b\u8f7d\u7684 SST \u6587\u4ef6\u5bfc\u5165\u56fe\u7a7a\u95f4\u3002 \u793a\u4f8b\uff1a nebula> SUBMIT JOB DOWNLOAD HDFS \"hdfs://192.168.10.100:9000/sst\"; +------------+ | New Job Id | +------------+ | 10 | +------------+ nebula> SUBMIT JOB INGEST; +------------+ | New Job Id | +------------+ | 11 | +------------+ SHOW JOB \u00b6 Meta \u670d\u52a1\u5c06 SUBMIT JOB \u8bf7\u6c42\u89e3\u6790\u4e3a\u591a\u4e2a\u4efb\u52a1\uff0c\u7136\u540e\u5206\u914d\u7ed9\u8fdb\u7a0b nebula-storaged\u3002 SHOW JOB <job_id> \u8bed\u53e5\u663e\u793a\u5f53\u524d\u56fe\u7a7a\u95f4\u5185\u6307\u5b9a\u4f5c\u4e1a\u548c\u76f8\u5173\u4efb\u52a1\u7684\u4fe1\u606f\u3002 job_id \u5728\u6267\u884c SUBMIT JOB \u8bed\u53e5\u65f6\u4f1a\u8fd4\u56de\u3002 \u793a\u4f8b\uff1a nebula> SHOW JOB 8; +----------------+-----------------+------------+----------------------------+----------------------------+-------------+ | Job Id(TaskId) | Command(Dest) | Status | Start Time | Stop Time | Error Code | +----------------+-----------------+------------+----------------------------+----------------------------+-------------+ | 8 | \"STATS\" | \"FINISHED\" | 2022-10-18T08:14:45.000000 | 2022-10-18T08:14:45.000000 | \"SUCCEEDED\" | | 0 | \"192.168.8.129\" | \"FINISHED\" | 2022-10-18T08:14:45.000000 | 2022-10-18T08:15:13.000000 | \"SUCCEEDED\" | | \"Total:1\" | \"Succeeded:1\" | \"Failed:0\" | \"In Progress:0\" | \"\" | \"\" | +----------------+-----------------+------------+----------------------------+----------------------------+-------------+ \u53c2\u6570 \u8bf4\u660e Job Id(TaskId) \u7b2c\u4e00\u884c\u663e\u793a\u4f5c\u4e1a ID\uff0c\u6700\u540e\u4e00\u884c\u663e\u793a\u4f5c\u4e1a\u76f8\u5173\u7684\u4efb\u52a1\u603b\u6570\uff0c\u5176\u4ed6\u884c\u663e\u793a\u4f5c\u4e1a\u76f8\u5173\u7684\u4efb\u52a1 ID\u3002 Command(Dest) \u7b2c\u4e00\u884c\u663e\u793a\u6267\u884c\u7684\u4f5c\u4e1a\u547d\u4ee4\u540d\u79f0\uff0c\u6700\u540e\u4e00\u884c\u663e\u793a\u4f5c\u4e1a\u76f8\u5173\u7684\u6210\u529f\u7684\u4efb\u52a1\u6570\u3002\u5176\u4ed6\u884c\u663e\u793a\u4efb\u52a1\u5bf9\u5e94\u7684 nebula-storaged \u8fdb\u7a0b\u3002 Status \u663e\u793a\u4f5c\u4e1a\u6216\u4efb\u52a1\u7684\u72b6\u6001\uff0c\u6700\u540e\u4e00\u884c\u663e\u793a\u4f5c\u4e1a\u76f8\u5173\u7684\u5931\u8d25\u7684\u4efb\u52a1\u6570\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1 \u4f5c\u4e1a\u72b6\u6001 \u3002 Start Time \u663e\u793a\u4f5c\u4e1a\u6216\u4efb\u52a1\u5f00\u59cb\u6267\u884c\u7684\u65f6\u95f4\uff0c\u6700\u540e\u4e00\u884c\u663e\u793a\u4f5c\u4e1a\u76f8\u5173\u7684\u6b63\u5728\u8fdb\u884c\u7684\u4efb\u52a1\u6570\u3002 Stop Time \u663e\u793a\u4f5c\u4e1a\u6216\u4efb\u52a1\u7ed3\u675f\u6267\u884c\u7684\u65f6\u95f4\uff0c\u7ed3\u675f\u540e\u7684\u72b6\u6001\u5305\u62ec FINISHED \u3001 FAILED \u6216 STOPPED \u3002 Error Code \u663e\u793a\u4f5c\u4e1a\u6216\u4efb\u52a1\u7684 \u9519\u8bef\u7801 \u3002 \u4f5c\u4e1a\u72b6\u6001 \u00b6 \u4f5c\u4e1a\u72b6\u6001\u7684\u8bf4\u660e\u5982\u4e0b\u3002 \u72b6\u6001 \u8bf4\u660e QUEUE \u4f5c\u4e1a\u6216\u4efb\u52a1\u5728\u7b49\u5f85\u961f\u5217\u4e2d\u3002\u6b64\u9636\u6bb5 Start Time \u4e3a\u7a7a\u3002 RUNNING \u4f5c\u4e1a\u6216\u4efb\u52a1\u5728\u6267\u884c\u4e2d\u3002 Start Time \u4e3a\u8be5\u9636\u6bb5\u7684\u8d77\u59cb\u65f6\u95f4\u3002 FINISHED \u4f5c\u4e1a\u6216\u4efb\u52a1\u6210\u529f\u5b8c\u6210\u3002 Stop Time \u4e3a\u8be5\u9636\u6bb5\u7684\u8d77\u59cb\u65f6\u95f4\u3002 FAILED \u4f5c\u4e1a\u6216\u4efb\u52a1\u5931\u8d25\u3002 Stop Time \u4e3a\u8be5\u9636\u6bb5\u7684\u8d77\u59cb\u65f6\u95f4\u3002 STOPPED \u4f5c\u4e1a\u6216\u4efb\u52a1\u505c\u6b62\u3002 Stop Time \u4e3a\u8be5\u9636\u6bb5\u7684\u8d77\u59cb\u65f6\u95f4\u3002 REMOVED \u4f5c\u4e1a\u6216\u4efb\u52a1\u88ab\u5220\u9664\u3002 \u72b6\u6001\u8f6c\u6362\u7684\u8bf4\u660e\u5982\u4e0b\u3002 Queue -- running -- finished -- removed \\ \\ / \\ \\ -- failed -- / \\ \\ / \\ ---------- stopped -/ SHOW JOBS \u00b6 SHOW JOBS \u8bed\u53e5\u5217\u51fa\u5f53\u524d\u56fe\u7a7a\u95f4\u5185\u6240\u6709\u672a\u8fc7\u671f\u7684\u4f5c\u4e1a\u3002 \u4f5c\u4e1a\u7684\u9ed8\u8ba4\u8fc7\u671f\u65f6\u95f4\u4e3a\u4e00\u5468\u3002\u5982\u679c\u9700\u8981\u4fee\u6539\u8fc7\u671f\u65f6\u95f4\uff0c\u8bf7\u4fee\u6539 Meta \u670d\u52a1\u7684\u53c2\u6570 job_expired_secs \u3002\u8be6\u60c5\u8bf7\u53c2\u89c1 Meta \u670d\u52a1\u914d\u7f6e \u3002 \u793a\u4f8b\uff1a nebula> SHOW JOBS; +--------+---------------------+------------+----------------------------+----------------------------+ | Job Id | Command | Status | Start Time | Stop Time | +--------+---------------------+------------+----------------------------+----------------------------+ | 34 | \"STATS\" | \"FINISHED\" | 2021-11-01T03:32:27.000000 | 2021-11-01T03:32:27.000000 | | 33 | \"FLUSH\" | \"FINISHED\" | 2021-11-01T03:32:15.000000 | 2021-11-01T03:32:15.000000 | | 32 | \"COMPACT\" | \"FINISHED\" | 2021-11-01T03:32:06.000000 | 2021-11-01T03:32:06.000000 | | 31 | \"REBUILD_TAG_INDEX\" | \"FINISHED\" | 2021-10-29T05:39:16.000000 | 2021-10-29T05:39:17.000000 | | 10 | \"COMPACT\" | \"FINISHED\" | 2021-10-26T02:27:05.000000 | 2021-10-26T02:27:05.000000 | +--------+---------------------+------------+----------------------------+----------------------------+ STOP JOB \u00b6 STOP JOB <job_id> \u8bed\u53e5\u53ef\u4ee5\u505c\u6b62\u5f53\u524d\u56fe\u7a7a\u95f4\u5185\u672a\u5b8c\u6210\u7684\u4f5c\u4e1a\u3002 \u793a\u4f8b\uff1a nebula> STOP JOB 22; +---------------+ | Result | +---------------+ | \"Job stopped\" | +---------------+ RECOVER JOB \u00b6 RECOVER JOB [<job_id>] \u8bed\u53e5\u53ef\u4ee5\u91cd\u65b0\u6267\u884c\u5f53\u524d\u56fe\u7a7a\u95f4\u5185\u72b6\u6001\u4e3a FAILED \u3001 STOPPED \u7684\u4f5c\u4e1a\uff0c\u672a\u6307\u5b9a <job_id> \u65f6\uff0c\u4f1a\u4ece\u6700\u65e9\u7684\u4f5c\u4e1a\u5f00\u59cb\u5c1d\u8bd5\u91cd\u65b0\u6267\u884c\uff0c\u5e76\u8fd4\u56de\u5df2\u6062\u590d\u7684\u4f5c\u4e1a\u6570\u91cf\u3002 \u793a\u4f8b\uff1a nebula> RECOVER JOB; +-------------------+ | Recovered job num | +-------------------+ | 5 job recovered | +-------------------+ FAQ \u00b6 \u5982\u4f55\u6392\u67e5\u4f5c\u4e1a\u95ee\u9898\uff1f \u00b6 SUBMIT JOB \u64cd\u4f5c\u4f7f\u7528\u7684\u662f HTTP \u7aef\u53e3\uff0c\u8bf7\u68c0\u67e5 Storage \u670d\u52a1\u673a\u5668\u4e0a\u7684 HTTP \u7aef\u53e3\u662f\u5426\u6b63\u5e38\u5de5\u4f5c\u3002\u7528\u6237\u53ef\u4ee5\u6267\u884c\u5982\u4e0b\u547d\u4ee4\u8c03\u8bd5\uff1a curl \"http://{storaged-ip}:19779/admin?space={space_name}&op=compact\"","title":"\u4f5c\u4e1a\u7ba1\u7406"},{"location":"3.ngql-guide/4.job-statements/#_1","text":"\u5728 Storage \u670d\u52a1\u4e0a\u957f\u671f\u8fd0\u884c\u7684\u4efb\u52a1\u79f0\u4e3a\u4f5c\u4e1a\uff0c\u4f8b\u5982 COMPACT \u3001 FLUSH \u548c STATS \u3002 \u5982\u679c\u56fe\u7a7a\u95f4\u7684\u6570\u636e\u91cf\u5f88\u5927\uff0c\u8fd9\u4e9b\u4f5c\u4e1a\u53ef\u80fd\u8017\u65f6\u5f88\u957f\u3002\u4f5c\u4e1a\u7ba1\u7406\u53ef\u4ee5\u5e2e\u52a9\u6267\u884c\u3001\u67e5\u770b\u3001\u505c\u6b62\u548c\u6062\u590d\u4f5c\u4e1a\u3002 Note \u6240\u6709\u4f5c\u4e1a\u7ba1\u7406\u547d\u4ee4\u90fd\u9700\u8981\u5148\u9009\u62e9\u56fe\u7a7a\u95f4\u540e\u624d\u80fd\u6267\u884c\u3002","title":"\u4f5c\u4e1a\u7ba1\u7406"},{"location":"3.ngql-guide/4.job-statements/#submit_job_balance_leader","text":"SUBMIT JOB BALANCE LEADER \u8bed\u53e5\u4f1a\u542f\u52a8\u4efb\u52a1\u5747\u8861\u5206\u5e03\u6240\u6709\u56fe\u7a7a\u95f4\u4e2d\u7684 leader\u3002\u8be5\u547d\u4ee4\u4f1a\u8fd4\u56de\u4efb\u52a1 ID\u3002 \u793a\u4f8b\uff1a nebula> SUBMIT JOB BALANCE LEADER; +------------+ | New Job Id | +------------+ | 33 | +------------+","title":"SUBMIT JOB BALANCE LEADER"},{"location":"3.ngql-guide/4.job-statements/#submit_job_compact","text":"SUBMIT JOB COMPACT \u8bed\u53e5\u4f1a\u5728\u5f53\u524d\u56fe\u7a7a\u95f4\u5185\u89e6\u53d1 RocksDB \u7684\u957f\u8017\u65f6 compact \u64cd\u4f5c\u3002 compact \u914d\u7f6e\u8be6\u60c5\u8bf7\u53c2\u89c1 Storage \u670d\u52a1\u914d\u7f6e \u3002 \u793a\u4f8b\uff1a nebula> SUBMIT JOB COMPACT; +------------+ | New Job Id | +------------+ | 40 | +------------+","title":"SUBMIT JOB COMPACT"},{"location":"3.ngql-guide/4.job-statements/#submit_job_flush","text":"SUBMIT JOB FLUSH \u8bed\u53e5\u5c06\u5f53\u524d\u56fe\u7a7a\u95f4\u5185\u5b58\u4e2d\u7684 RocksDB memfile \u5199\u5165\u786c\u76d8\u3002 \u793a\u4f8b\uff1a nebula> SUBMIT JOB FLUSH; +------------+ | New Job Id | +------------+ | 96 | +------------+","title":"SUBMIT JOB FLUSH"},{"location":"3.ngql-guide/4.job-statements/#submit_job_stats","text":"SUBMIT JOB STATS \u8bed\u53e5\u4f1a\u5728\u5f53\u524d\u56fe\u7a7a\u95f4\u5185\u542f\u52a8\u4e00\u4e2a\u4f5c\u4e1a\uff0c\u8be5\u4f5c\u4e1a\u5bf9\u5f53\u524d\u56fe\u7a7a\u95f4\u8fdb\u884c\u7edf\u8ba1\u3002\u4f5c\u4e1a\u5b8c\u6210\u540e\uff0c\u7528\u6237\u53ef\u4ee5\u4f7f\u7528 SHOW STATS \u8bed\u53e5\u5217\u51fa\u7edf\u8ba1\u7ed3\u679c\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1 SHOW STATS \u3002 Note \u5982\u679c\u5b58\u50a8\u5728NebulaGraph\u4e2d\u7684\u6570\u636e\u6709\u53d8\u5316\uff0c\u4e3a\u4e86\u83b7\u53d6\u6700\u65b0\u7684\u7edf\u8ba1\u7ed3\u679c\uff0c\u8bf7\u91cd\u65b0\u6267\u884c SUBMIT JOB STATS \u3002 \u793a\u4f8b\uff1a nebula> SUBMIT JOB STATS; +------------+ | New Job Id | +------------+ | 9 | +------------+","title":"SUBMIT JOB STATS"},{"location":"3.ngql-guide/4.job-statements/#submit_job_downloadingest","text":"SUBMIT JOB DOWNLOAD HDFS \u548c SUBMIT JOB INGEST \u547d\u4ee4\u7528\u4e8e\u5c06 SST \u6587\u4ef6\u5bfc\u5165NebulaGraph\u3002\u8be6\u60c5\u53c2\u89c1 \u5bfc\u5165 SST \u6587\u4ef6\u6570\u636e \u3002 SUBMIT JOB DOWNLOAD HDFS \u8bed\u53e5\u4f1a\u4e0b\u8f7d\u6307\u5b9a\u7684 HDFS \u4e0a\u7684 SST \u6587\u4ef6\u3002 SUBMIT JOB INGEST \u8bed\u53e5\u4f1a\u5c06\u4e0b\u8f7d\u7684 SST \u6587\u4ef6\u5bfc\u5165\u56fe\u7a7a\u95f4\u3002 \u793a\u4f8b\uff1a nebula> SUBMIT JOB DOWNLOAD HDFS \"hdfs://192.168.10.100:9000/sst\"; +------------+ | New Job Id | +------------+ | 10 | +------------+ nebula> SUBMIT JOB INGEST; +------------+ | New Job Id | +------------+ | 11 | +------------+","title":"SUBMIT JOB DOWNLOAD/INGEST"},{"location":"3.ngql-guide/4.job-statements/#show_job","text":"Meta \u670d\u52a1\u5c06 SUBMIT JOB \u8bf7\u6c42\u89e3\u6790\u4e3a\u591a\u4e2a\u4efb\u52a1\uff0c\u7136\u540e\u5206\u914d\u7ed9\u8fdb\u7a0b nebula-storaged\u3002 SHOW JOB <job_id> \u8bed\u53e5\u663e\u793a\u5f53\u524d\u56fe\u7a7a\u95f4\u5185\u6307\u5b9a\u4f5c\u4e1a\u548c\u76f8\u5173\u4efb\u52a1\u7684\u4fe1\u606f\u3002 job_id \u5728\u6267\u884c SUBMIT JOB \u8bed\u53e5\u65f6\u4f1a\u8fd4\u56de\u3002 \u793a\u4f8b\uff1a nebula> SHOW JOB 8; +----------------+-----------------+------------+----------------------------+----------------------------+-------------+ | Job Id(TaskId) | Command(Dest) | Status | Start Time | Stop Time | Error Code | +----------------+-----------------+------------+----------------------------+----------------------------+-------------+ | 8 | \"STATS\" | \"FINISHED\" | 2022-10-18T08:14:45.000000 | 2022-10-18T08:14:45.000000 | \"SUCCEEDED\" | | 0 | \"192.168.8.129\" | \"FINISHED\" | 2022-10-18T08:14:45.000000 | 2022-10-18T08:15:13.000000 | \"SUCCEEDED\" | | \"Total:1\" | \"Succeeded:1\" | \"Failed:0\" | \"In Progress:0\" | \"\" | \"\" | +----------------+-----------------+------------+----------------------------+----------------------------+-------------+ \u53c2\u6570 \u8bf4\u660e Job Id(TaskId) \u7b2c\u4e00\u884c\u663e\u793a\u4f5c\u4e1a ID\uff0c\u6700\u540e\u4e00\u884c\u663e\u793a\u4f5c\u4e1a\u76f8\u5173\u7684\u4efb\u52a1\u603b\u6570\uff0c\u5176\u4ed6\u884c\u663e\u793a\u4f5c\u4e1a\u76f8\u5173\u7684\u4efb\u52a1 ID\u3002 Command(Dest) \u7b2c\u4e00\u884c\u663e\u793a\u6267\u884c\u7684\u4f5c\u4e1a\u547d\u4ee4\u540d\u79f0\uff0c\u6700\u540e\u4e00\u884c\u663e\u793a\u4f5c\u4e1a\u76f8\u5173\u7684\u6210\u529f\u7684\u4efb\u52a1\u6570\u3002\u5176\u4ed6\u884c\u663e\u793a\u4efb\u52a1\u5bf9\u5e94\u7684 nebula-storaged \u8fdb\u7a0b\u3002 Status \u663e\u793a\u4f5c\u4e1a\u6216\u4efb\u52a1\u7684\u72b6\u6001\uff0c\u6700\u540e\u4e00\u884c\u663e\u793a\u4f5c\u4e1a\u76f8\u5173\u7684\u5931\u8d25\u7684\u4efb\u52a1\u6570\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1 \u4f5c\u4e1a\u72b6\u6001 \u3002 Start Time \u663e\u793a\u4f5c\u4e1a\u6216\u4efb\u52a1\u5f00\u59cb\u6267\u884c\u7684\u65f6\u95f4\uff0c\u6700\u540e\u4e00\u884c\u663e\u793a\u4f5c\u4e1a\u76f8\u5173\u7684\u6b63\u5728\u8fdb\u884c\u7684\u4efb\u52a1\u6570\u3002 Stop Time \u663e\u793a\u4f5c\u4e1a\u6216\u4efb\u52a1\u7ed3\u675f\u6267\u884c\u7684\u65f6\u95f4\uff0c\u7ed3\u675f\u540e\u7684\u72b6\u6001\u5305\u62ec FINISHED \u3001 FAILED \u6216 STOPPED \u3002 Error Code \u663e\u793a\u4f5c\u4e1a\u6216\u4efb\u52a1\u7684 \u9519\u8bef\u7801 \u3002","title":"SHOW JOB"},{"location":"3.ngql-guide/4.job-statements/#_2","text":"\u4f5c\u4e1a\u72b6\u6001\u7684\u8bf4\u660e\u5982\u4e0b\u3002 \u72b6\u6001 \u8bf4\u660e QUEUE \u4f5c\u4e1a\u6216\u4efb\u52a1\u5728\u7b49\u5f85\u961f\u5217\u4e2d\u3002\u6b64\u9636\u6bb5 Start Time \u4e3a\u7a7a\u3002 RUNNING \u4f5c\u4e1a\u6216\u4efb\u52a1\u5728\u6267\u884c\u4e2d\u3002 Start Time \u4e3a\u8be5\u9636\u6bb5\u7684\u8d77\u59cb\u65f6\u95f4\u3002 FINISHED \u4f5c\u4e1a\u6216\u4efb\u52a1\u6210\u529f\u5b8c\u6210\u3002 Stop Time \u4e3a\u8be5\u9636\u6bb5\u7684\u8d77\u59cb\u65f6\u95f4\u3002 FAILED \u4f5c\u4e1a\u6216\u4efb\u52a1\u5931\u8d25\u3002 Stop Time \u4e3a\u8be5\u9636\u6bb5\u7684\u8d77\u59cb\u65f6\u95f4\u3002 STOPPED \u4f5c\u4e1a\u6216\u4efb\u52a1\u505c\u6b62\u3002 Stop Time \u4e3a\u8be5\u9636\u6bb5\u7684\u8d77\u59cb\u65f6\u95f4\u3002 REMOVED \u4f5c\u4e1a\u6216\u4efb\u52a1\u88ab\u5220\u9664\u3002 \u72b6\u6001\u8f6c\u6362\u7684\u8bf4\u660e\u5982\u4e0b\u3002 Queue -- running -- finished -- removed \\ \\ / \\ \\ -- failed -- / \\ \\ / \\ ---------- stopped -/","title":"\u4f5c\u4e1a\u72b6\u6001"},{"location":"3.ngql-guide/4.job-statements/#show_jobs","text":"SHOW JOBS \u8bed\u53e5\u5217\u51fa\u5f53\u524d\u56fe\u7a7a\u95f4\u5185\u6240\u6709\u672a\u8fc7\u671f\u7684\u4f5c\u4e1a\u3002 \u4f5c\u4e1a\u7684\u9ed8\u8ba4\u8fc7\u671f\u65f6\u95f4\u4e3a\u4e00\u5468\u3002\u5982\u679c\u9700\u8981\u4fee\u6539\u8fc7\u671f\u65f6\u95f4\uff0c\u8bf7\u4fee\u6539 Meta \u670d\u52a1\u7684\u53c2\u6570 job_expired_secs \u3002\u8be6\u60c5\u8bf7\u53c2\u89c1 Meta \u670d\u52a1\u914d\u7f6e \u3002 \u793a\u4f8b\uff1a nebula> SHOW JOBS; +--------+---------------------+------------+----------------------------+----------------------------+ | Job Id | Command | Status | Start Time | Stop Time | +--------+---------------------+------------+----------------------------+----------------------------+ | 34 | \"STATS\" | \"FINISHED\" | 2021-11-01T03:32:27.000000 | 2021-11-01T03:32:27.000000 | | 33 | \"FLUSH\" | \"FINISHED\" | 2021-11-01T03:32:15.000000 | 2021-11-01T03:32:15.000000 | | 32 | \"COMPACT\" | \"FINISHED\" | 2021-11-01T03:32:06.000000 | 2021-11-01T03:32:06.000000 | | 31 | \"REBUILD_TAG_INDEX\" | \"FINISHED\" | 2021-10-29T05:39:16.000000 | 2021-10-29T05:39:17.000000 | | 10 | \"COMPACT\" | \"FINISHED\" | 2021-10-26T02:27:05.000000 | 2021-10-26T02:27:05.000000 | +--------+---------------------+------------+----------------------------+----------------------------+","title":"SHOW JOBS"},{"location":"3.ngql-guide/4.job-statements/#stop_job","text":"STOP JOB <job_id> \u8bed\u53e5\u53ef\u4ee5\u505c\u6b62\u5f53\u524d\u56fe\u7a7a\u95f4\u5185\u672a\u5b8c\u6210\u7684\u4f5c\u4e1a\u3002 \u793a\u4f8b\uff1a nebula> STOP JOB 22; +---------------+ | Result | +---------------+ | \"Job stopped\" | +---------------+","title":"STOP JOB"},{"location":"3.ngql-guide/4.job-statements/#recover_job","text":"RECOVER JOB [<job_id>] \u8bed\u53e5\u53ef\u4ee5\u91cd\u65b0\u6267\u884c\u5f53\u524d\u56fe\u7a7a\u95f4\u5185\u72b6\u6001\u4e3a FAILED \u3001 STOPPED \u7684\u4f5c\u4e1a\uff0c\u672a\u6307\u5b9a <job_id> \u65f6\uff0c\u4f1a\u4ece\u6700\u65e9\u7684\u4f5c\u4e1a\u5f00\u59cb\u5c1d\u8bd5\u91cd\u65b0\u6267\u884c\uff0c\u5e76\u8fd4\u56de\u5df2\u6062\u590d\u7684\u4f5c\u4e1a\u6570\u91cf\u3002 \u793a\u4f8b\uff1a nebula> RECOVER JOB; +-------------------+ | Recovered job num | +-------------------+ | 5 job recovered | +-------------------+","title":"RECOVER JOB"},{"location":"3.ngql-guide/4.job-statements/#faq","text":"","title":"FAQ"},{"location":"3.ngql-guide/4.job-statements/#_3","text":"SUBMIT JOB \u64cd\u4f5c\u4f7f\u7528\u7684\u662f HTTP \u7aef\u53e3\uff0c\u8bf7\u68c0\u67e5 Storage \u670d\u52a1\u673a\u5668\u4e0a\u7684 HTTP \u7aef\u53e3\u662f\u5426\u6b63\u5e38\u5de5\u4f5c\u3002\u7528\u6237\u53ef\u4ee5\u6267\u884c\u5982\u4e0b\u547d\u4ee4\u8c03\u8bd5\uff1a curl \"http://{storaged-ip}:19779/admin?space={space_name}&op=compact\"","title":"\u5982\u4f55\u6392\u67e5\u4f5c\u4e1a\u95ee\u9898\uff1f"},{"location":"3.ngql-guide/1.nGQL-overview/1.overview/","text":"\u4ec0\u4e48\u662f nGQL \u00b6 nGQL\u662fNebulaGraph\u4f7f\u7528\u7684\u7684\u58f0\u660e\u5f0f\u56fe\u67e5\u8be2\u8bed\u8a00\uff0c\u652f\u6301\u7075\u6d3b\u9ad8\u6548\u7684 \u56fe\u6a21\u5f0f \uff0c\u800c\u4e14 nGQL \u662f\u4e3a\u5f00\u53d1\u548c\u8fd0\u7ef4\u4eba\u5458\u8bbe\u8ba1\u7684\u7c7b SQL \u67e5\u8be2\u8bed\u8a00\uff0c\u6613\u4e8e\u5b66\u4e60\u3002 nGQL \u662f\u4e00\u4e2a\u8fdb\u884c\u4e2d\u7684\u9879\u76ee\uff0c\u4f1a\u6301\u7eed\u53d1\u5e03\u65b0\u7279\u6027\u548c\u4f18\u5316\uff0c\u56e0\u6b64\u53ef\u80fd\u4f1a\u51fa\u73b0\u8bed\u6cd5\u548c\u5b9e\u9645\u64cd\u4f5c\u4e0d\u4e00\u81f4\u7684\u95ee\u9898\uff0c\u5982\u679c\u9047\u5230\u6b64\u7c7b\u95ee\u9898\uff0c\u8bf7\u63d0\u4ea4 issue \u901a\u77e5NebulaGraph\u56e2\u961f\u3002NebulaGraph 3.0 \u53ca\u66f4\u65b0\u7248\u672c\u6b63\u5728\u652f\u6301 openCypher 9 \u3002 nGQL \u53ef\u4ee5\u505a\u4ec0\u4e48 \u00b6 \u652f\u6301\u56fe\u904d\u5386 \u652f\u6301\u6a21\u5f0f\u5339\u914d \u652f\u6301\u805a\u5408 \u652f\u6301\u4fee\u6539\u56fe \u652f\u6301\u8bbf\u95ee\u63a7\u5236 \u652f\u6301\u805a\u5408\u67e5\u8be2 \u652f\u6301\u7d22\u5f15 \u652f\u6301\u5927\u90e8\u5206 openCypher 9 \u56fe\u67e5\u8be2\u8bed\u6cd5\uff08\u4e0d\u652f\u6301\u4fee\u6539\u548c\u63a7\u5236\u8bed\u6cd5\uff09 \u793a\u4f8b\u6570\u636e Basketballplayer \u00b6 \u7528\u6237\u53ef\u4ee5\u4e0b\u8f7dNebulaGraph\u793a\u4f8b\u6570\u636e basketballplayer \u6587\u4ef6 \uff0c\u7136\u540e\u4f7f\u7528 NebulaGraph Console \uff0c\u4f7f\u7528\u9009\u9879 -f \u6267\u884c\u811a\u672c\u3002 Note \u5bfc\u5165\u793a\u4f8b\u6570\u636e\u524d\uff0c\u786e\u4fdd\u5df2\u6267\u884c ADD HOSTS \u547d\u4ee4\u5c06 Storage \u4e3b\u673a\u589e\u52a0\u81f3\u96c6\u7fa4\u4e2d\u3002\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u89c1 \u7ba1\u7406 Storage \u4e3b\u673a \u3002 \u5360\u4f4d\u6807\u8bc6\u7b26\u548c\u5360\u4f4d\u7b26\u503c \u00b6 NebulaGraph\u67e5\u8be2\u8bed\u8a00 nGQL \u53c2\u7167\u4ee5\u4e0b\u6807\u51c6\u8bbe\u8ba1\uff1a (Draft) ISO/IEC JTC1 N14279 SC 32 - Database_Languages - GQL (Draft) ISO/IEC JTC1 SC32 N3228 - SQL_Property_Graph_Queries - SQLPGQ OpenCypher 9 \u5728\u6a21\u677f\u4ee3\u7801\u4e2d\uff0c\u4efb\u4f55\u975e\u5173\u952e\u5b57\u3001\u5b57\u9762\u503c\u6216\u6807\u70b9\u7b26\u53f7\u7684\u6807\u8bb0\u90fd\u662f\u5360\u4f4d\u7b26\u6807\u8bc6\u7b26\u6216\u5360\u4f4d\u7b26\u503c\u3002 \u672c\u6587\u4e2d nGQL \u8bed\u6cd5\u7b26\u53f7\u7684\u8bf4\u660e\u5982\u4e0b\u3002 \u7b26\u53f7 \u542b\u4e49 < > \u8bed\u6cd5\u5143\u7d20\u7684\u540d\u79f0\u3002 : \u5b9a\u4e49\u5143\u7d20\u7684\u516c\u5f0f\u3002 [ ] \u53ef\u9009\u5143\u7d20\u3002 { } \u663e\u5f0f\u7684\u6307\u5b9a\u5143\u7d20\u3002 | \u6240\u6709\u53ef\u9009\u7684\u5143\u7d20\u3002 ... \u53ef\u4ee5\u91cd\u590d\u591a\u6b21\u3002 \u4f8b\u5982\u521b\u5efa\u70b9\u7684 nGQL \u8bed\u6cd5\uff1a INSERT VERTEX [IF NOT EXISTS] [tag_props, [tag_props] ...] VALUES <vid>: ([prop_value_list]) tag_props: tag_name ([prop_name_list]) prop_name_list: [prop_name [, prop_name] ...] prop_value_list: [prop_value [, prop_value] ...] \u793a\u4f8b\u8bed\u53e5\uff1a nebula> CREATE TAG IF NOT EXISTS player(name string, age int); \u5173\u4e8e openCypher \u517c\u5bb9\u6027 \u00b6 \u539f\u751f nGQL \u548c openCypher \u7684\u5173\u7cfb \u00b6 \u539f\u751f nGQL \u662f\u7531NebulaGraph\u81ea\u884c\u521b\u9020\u548c\u5b9e\u73b0\u7684\u56fe\u67e5\u8be2\u8bed\u8a00\u3002openCypher \u662f\u7531 openCypher Implementers Group \u7ec4\u7ec7\u6240\u5f00\u6e90\u548c\u7ef4\u62a4\u7684\u56fe\u67e5\u8be2\u8bed\u8a00\uff0c\u6700\u65b0\u7248\u672c\u4e3a openCypher 9\u3002 \u7531\u4e8e nGQL \u8bed\u8a00\u90e8\u5206\u517c\u5bb9\u4e86 openCypher\uff0c\u8fd9\u4e2a\u90e8\u5206\u5728\u672c\u6587\u4e2d\u79f0\u4e3a openCypher \u517c\u5bb9\u8bed\u53e5\u3002 Note nGQL \u8bed\u8a00 = \u539f\u751f nGQL \u8bed\u53e5 + openCypher \u517c\u5bb9\u8bed\u53e5 nGQL \u5b8c\u5168\u517c\u5bb9 openCypher 9 \u5417\uff1f \u00b6 \u4e0d\u3002 openCypher \u517c\u5bb9\u6027 nGQL \u8bbe\u8ba1\u76ee\u6807\u4ec5\u4e3a\u517c\u5bb9\u90e8\u5206\u7684 DQL \u8bed\u53e5(match, optional match, with\u7b49)\u3002 \u4e0d\u8ba1\u5212\u517c\u5bb9\u4efb\u4f55 DDL\uff0cDML\uff0cDCL\uff1b \u4e0d\u8ba1\u5212\u517c\u5bb9 Bolt \u534f\u8bae\uff1b \u4e0d\u8ba1\u5212\u517c\u5bb9 APOC \u4e0e GDS\u3002 \u5728\u672c\u6587\u641c\u7d22 \"compatibility\" \u6216\u8005 \u201c\u517c\u5bb9\u6027\u201d \u67e5\u770b\u5177\u4f53\u4e0d\u517c\u5bb9\u7684\u7ec6\u8282\u3002 \u5728 Issues \u4e2d\u5df2\u7ecf\u5217\u51fa\u5df2\u77e5\u7684\u517c\u5bb9\u9519\u8bef\u3002\u5982\u679c\u53d1\u73b0\u8fd9\u79cd\u7c7b\u578b\u7684\u65b0\u95ee\u9898\uff0c\u8bf7\u63d0\u4ea4\u95ee\u9898\u5e76\u9644\u5e26 incompatible \u6807\u7b7e\u3002 nGQL \u548c openCypher 9 \u7684 \u4e3b\u8981\u5dee\u5f02\u6709\u54ea\u4e9b\uff1f \u00b6 \u7c7b\u522b openCypher 9 nGQL Schema \u5f31 Schema \u5f3a Schema \u76f8\u7b49\u8fd0\u7b97\u7b26 = == \u6570\u5b66\u6c42\u5e42 ^ \u4f7f\u7528 pow(x, y) \u66ff\u4ee3 ^ \u3002 \u8fb9 Rank \u65e0\u6b64\u6982\u5ff5 \u7528 @rank \u8bbe\u7f6e\u3002 \u8bed\u53e5 - \u4e0d\u652f\u6301 openCypher 9 \u7684\u6240\u6709 DML \u8bed\u53e5\uff08\u5982 CREATE \u3001 MERGE \u7b49\uff09\uff0c\u4e0d\u652f\u6301\u6240\u6709\u7684 DCL\uff0c\u548c\u652f\u6301\u90e8\u5206 MATCH , OPTIONAL MATCH \u8bed\u6cd5\u548c\u51fd\u6570\u3002 \u8bed\u53e5\u6587\u672c\u6362\u884c \u6362\u884c\u7b26 \\ + \u6362\u884c\u7b26 Label \u4e0e Tag \u662f\u4e0d\u540c\u7684\u6982\u5ff5 Label \u7528\u4e8e\u5bfb\u627e\u70b9\uff08\u70b9\u7684\u7d22\u5f15\uff09\u3002 Tag \u7528\u4e8e\u5b9a\u4e49\u70b9\u7684\u4e00\u79cd\u7c7b\u578b\u53ca\u76f8\u5e94\u7684\u5c5e\u6027\uff0c\u65e0\u7d22\u5f15\u529f\u80fd\u3002 \u9884\u7f16\u8bd1\u4e0e\u53c2\u6570\u5316\u67e5\u8be2 \u652f\u6301 \u4ec5\u652f\u6301\u53c2\u6570\u5316\u67e5\u8be2\u3002 Compatibility \u8bf7\u6ce8\u610f openCypher 9 \u548c Cypher \u5728\u8bed\u6cd5\u548c\u8bb8\u53ef\u4e0a\u6709\u4e0d\u540c\uff1a Cypher \u8981\u6c42\u6240\u6709 Cypher \u8bed\u53e5\u5fc5\u987b\u201c\u663e\u5f0f\u5730\u5728\u4e00\u4e2a\u4e8b\u52a1\u4e2d\u201d\u6267\u884c\uff0c\u800c openCypher \u6ca1\u6709\u8fd9\u6837\u7684\u8981\u6c42\u3002\u53e6\u5916\uff0cnGQL \u6ca1\u6709 \u4e8b\u52a1\u53ca\u9694\u79bb\u6027\u3002 Cypher \u4f01\u4e1a\u7248\u529f\u80fd\u6709\u591a\u79cd\u7684\u7ea6\u675f\uff08constraints\uff09\uff0c\u5305\u62ec Unique node property constraints\u3001Node property existence constraints\u3001Relationship property existence constraints\u3001Node key constraints\u3002 OpenCypher \u6807\u51c6\u4e2d\u6ca1\u6709\u7ea6\u675f\u3002 \u800c nGQL \u662f\u5f3a Schema \u7cfb\u7edf\uff0c\u524d\u8ff0\u7684\u7ea6\u675f\u5927\u591a\u901a\u8fc7 Schema \u5b9a\u4e49\u53ef\u5b9e\u73b0\uff08\u5305\u62ec NOT NULL\uff09\uff0c\u552f\u4e00\u4e0d\u80fd\u652f\u6301\u7684\u529f\u80fd\u662f\u201c\u5c5e\u6027\u503c\u552f\u4e00\u6027\u201d\uff08UNIQUE constraint\uff09\u3002 Cypher \u6709 APoC\uff0copenCypher 9 \u6ca1\u6709 APoC\u3002Cypher \u6709 Bolt \u534f\u8bae\u652f\u6301\u8981\u6c42\uff0c openCypher 9 \u6ca1\u6709\u3002 \u54ea\u91cc\u53ef\u4ee5\u627e\u5230\u66f4\u591a nGQL \u7684\u793a\u4f8b\uff1f \u00b6 \u7528\u6237\u53ef\u4ee5\u5728 GitHub \u7684 features \u76ee\u5f55\u5185\u67e5\u770b\u8d85\u8fc7 2500 \u6761 nGQL \u793a\u4f8b\u3002 features \u76ee\u5f55\u5185\u5305\u542b\u5f88\u591a .features \u683c\u5f0f\u7684\u6587\u4ef6\uff0c\u6bcf\u4e2a\u6587\u4ef6\u90fd\u8bb0\u5f55\u4e86\u4f7f\u7528 nGQL \u7684\u573a\u666f\u548c\u793a\u4f8b\u3002\u4f8b\u5982\uff1a Feature: Basic match Background: Given a graph with space named \"basketballplayer\" Scenario: Single node When executing query: \"\"\" MATCH (v:player {name: \"Yao Ming\"}) RETURN v; \"\"\" Then the result should be, in any order, with relax comparison: | v | | (\"player133\" :player{age: 38, name: \"Yao Ming\"}) | Scenario: One step When executing query: \"\"\" MATCH (v1:player{name: \"LeBron James\"}) -[r]-> (v2) RETURN type(r) AS Type, v2.player.name AS Name \"\"\" Then the result should be, in any order: | Type | Name | | \"follow\" | \"Ray Allen\" | | \"serve\" | \"Lakers\" | | \"serve\" | \"Heat\" | | \"serve\" | \"Cavaliers\" | Feature: Comparison of where clause Background: Given a graph with space named \"basketballplayer\" Scenario: push edge props filter down When profiling query: \"\"\" GO FROM \"player100\" OVER follow WHERE properties(edge).degree IN [v IN [95,99] WHERE v > 0] YIELD dst(edge), properties(edge).degree \"\"\" Then the result should be, in any order: | follow._dst | follow.degree | | \"player101\" | 95 | | \"player125\" | 95 | And the execution plan should be: | id | name | dependencies | operator info | | 0 | Project | 1 | | | 1 | GetNeighbors | 2 | {\"filter\": \"(properties(edge).degree IN [v IN [95,99] WHERE (v>0)])\"} | | 2 | Start | | | \u793a\u4f8b\u4e2d\u7684\u5173\u952e\u5b57\u8bf4\u660e\u5982\u4e0b\u3002 \u5173\u952e\u5b57 \u8bf4\u660e Feature \u63cf\u8ff0\u5f53\u524d\u6587\u6863\u7684\u4e3b\u9898\u3002 Background \u63cf\u8ff0\u5f53\u524d\u6587\u6863\u7684\u80cc\u666f\u4fe1\u606f\u3002 Given \u63cf\u8ff0\u6267\u884c\u793a\u4f8b\u8bed\u53e5\u7684\u524d\u63d0\u6761\u4ef6\u3002 Scenario \u63cf\u8ff0\u5177\u4f53\u573a\u666f\u3002\u5982\u679c\u573a\u666f\u4e4b\u524d\u6709 @skip \u6807\u8bc6\uff0c\u8868\u793a\u8fd9\u4e2a\u573a\u666f\u4e0b\u793a\u4f8b\u8bed\u53e5\u53ef\u80fd\u65e0\u6cd5\u6b63\u5e38\u5de5\u4f5c\uff0c\u8bf7\u4e0d\u8981\u5728\u751f\u4ea7\u73af\u5883\u4e2d\u4f7f\u7528\u8be5\u793a\u4f8b\u8bed\u53e5\u3002 When \u63cf\u8ff0\u8981\u6267\u884c\u7684 nGQL \u793a\u4f8b\u8bed\u53e5\u3002\u53ef\u4ee5\u662f executing query \u6216 profiling query \u3002 Then \u63cf\u8ff0\u6267\u884c When \u5185\u8bed\u53e5\u7684\u9884\u671f\u8fd4\u56de\u7ed3\u679c\u3002\u5982\u679c\u8fd4\u56de\u7ed3\u679c\u548c\u6587\u6863\u4e0d\u540c\uff0c\u8bf7\u63d0\u4ea4 issue \u901a\u77e5NebulaGraph\u56e2\u961f\u3002 And \u63cf\u8ff0\u6267\u884c When \u5185\u8bed\u53e5\u7684\u526f\u4f5c\u7528\u6216\u6267\u884c\u8ba1\u5212\u3002 @skip \u8df3\u8fc7\u8fd9\u4e2a\u793a\u4f8b\u3002\u901a\u5e38\u8868\u793a\u6d4b\u8bd5\u4ee3\u7801\u8fd8\u6ca1\u6709\u51c6\u5907\u597d\u3002 \u6b22\u8fce \u589e\u52a0\u66f4\u591a tck case \uff0c\u5728 CI/CD \u4e2d\u81ea\u52a8\u56de\u5f52\u6240\u4f7f\u7528\u7684\u8bed\u53e5\u3002 \u662f\u5426\u652f\u6301 TinkerPop Gremlin\uff1f \u00b6 \u4e0d\u652f\u6301\u3002\u4e5f\u6ca1\u6709\u8ba1\u5212\u3002 \u662f\u5426\u652f\u6301 W3C \u7684 RDF\uff08SPARQL\uff09 \u6216 GraphQL \u7b49\uff1f \u00b6 \u4e0d\u652f\u6301\u3002\u4e5f\u6ca1\u6709\u8ba1\u5212\u3002 NebulaGraph\u7684\u6570\u636e\u6a21\u578b\u662f\u5c5e\u6027\u56fe\uff0c\u662f\u4e00\u4e2a\u5f3a Schema \u7cfb\u7edf\uff0c\u4e0d\u652f\u6301 RDF \u6807\u51c6\u3002 nGQL \u4e5f\u4e0d\u652f\u6301 SPARQL \u548c GraphQL\u3002","title":"\u4ec0\u4e48\u662f nGQL"},{"location":"3.ngql-guide/1.nGQL-overview/1.overview/#ngql","text":"nGQL\u662fNebulaGraph\u4f7f\u7528\u7684\u7684\u58f0\u660e\u5f0f\u56fe\u67e5\u8be2\u8bed\u8a00\uff0c\u652f\u6301\u7075\u6d3b\u9ad8\u6548\u7684 \u56fe\u6a21\u5f0f \uff0c\u800c\u4e14 nGQL \u662f\u4e3a\u5f00\u53d1\u548c\u8fd0\u7ef4\u4eba\u5458\u8bbe\u8ba1\u7684\u7c7b SQL \u67e5\u8be2\u8bed\u8a00\uff0c\u6613\u4e8e\u5b66\u4e60\u3002 nGQL \u662f\u4e00\u4e2a\u8fdb\u884c\u4e2d\u7684\u9879\u76ee\uff0c\u4f1a\u6301\u7eed\u53d1\u5e03\u65b0\u7279\u6027\u548c\u4f18\u5316\uff0c\u56e0\u6b64\u53ef\u80fd\u4f1a\u51fa\u73b0\u8bed\u6cd5\u548c\u5b9e\u9645\u64cd\u4f5c\u4e0d\u4e00\u81f4\u7684\u95ee\u9898\uff0c\u5982\u679c\u9047\u5230\u6b64\u7c7b\u95ee\u9898\uff0c\u8bf7\u63d0\u4ea4 issue \u901a\u77e5NebulaGraph\u56e2\u961f\u3002NebulaGraph 3.0 \u53ca\u66f4\u65b0\u7248\u672c\u6b63\u5728\u652f\u6301 openCypher 9 \u3002","title":"\u4ec0\u4e48\u662f nGQL"},{"location":"3.ngql-guide/1.nGQL-overview/1.overview/#ngql_1","text":"\u652f\u6301\u56fe\u904d\u5386 \u652f\u6301\u6a21\u5f0f\u5339\u914d \u652f\u6301\u805a\u5408 \u652f\u6301\u4fee\u6539\u56fe \u652f\u6301\u8bbf\u95ee\u63a7\u5236 \u652f\u6301\u805a\u5408\u67e5\u8be2 \u652f\u6301\u7d22\u5f15 \u652f\u6301\u5927\u90e8\u5206 openCypher 9 \u56fe\u67e5\u8be2\u8bed\u6cd5\uff08\u4e0d\u652f\u6301\u4fee\u6539\u548c\u63a7\u5236\u8bed\u6cd5\uff09","title":"nGQL \u53ef\u4ee5\u505a\u4ec0\u4e48"},{"location":"3.ngql-guide/1.nGQL-overview/1.overview/#basketballplayer","text":"\u7528\u6237\u53ef\u4ee5\u4e0b\u8f7dNebulaGraph\u793a\u4f8b\u6570\u636e basketballplayer \u6587\u4ef6 \uff0c\u7136\u540e\u4f7f\u7528 NebulaGraph Console \uff0c\u4f7f\u7528\u9009\u9879 -f \u6267\u884c\u811a\u672c\u3002 Note \u5bfc\u5165\u793a\u4f8b\u6570\u636e\u524d\uff0c\u786e\u4fdd\u5df2\u6267\u884c ADD HOSTS \u547d\u4ee4\u5c06 Storage \u4e3b\u673a\u589e\u52a0\u81f3\u96c6\u7fa4\u4e2d\u3002\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u89c1 \u7ba1\u7406 Storage \u4e3b\u673a \u3002","title":"\u793a\u4f8b\u6570\u636e Basketballplayer"},{"location":"3.ngql-guide/1.nGQL-overview/1.overview/#_1","text":"NebulaGraph\u67e5\u8be2\u8bed\u8a00 nGQL \u53c2\u7167\u4ee5\u4e0b\u6807\u51c6\u8bbe\u8ba1\uff1a (Draft) ISO/IEC JTC1 N14279 SC 32 - Database_Languages - GQL (Draft) ISO/IEC JTC1 SC32 N3228 - SQL_Property_Graph_Queries - SQLPGQ OpenCypher 9 \u5728\u6a21\u677f\u4ee3\u7801\u4e2d\uff0c\u4efb\u4f55\u975e\u5173\u952e\u5b57\u3001\u5b57\u9762\u503c\u6216\u6807\u70b9\u7b26\u53f7\u7684\u6807\u8bb0\u90fd\u662f\u5360\u4f4d\u7b26\u6807\u8bc6\u7b26\u6216\u5360\u4f4d\u7b26\u503c\u3002 \u672c\u6587\u4e2d nGQL \u8bed\u6cd5\u7b26\u53f7\u7684\u8bf4\u660e\u5982\u4e0b\u3002 \u7b26\u53f7 \u542b\u4e49 < > \u8bed\u6cd5\u5143\u7d20\u7684\u540d\u79f0\u3002 : \u5b9a\u4e49\u5143\u7d20\u7684\u516c\u5f0f\u3002 [ ] \u53ef\u9009\u5143\u7d20\u3002 { } \u663e\u5f0f\u7684\u6307\u5b9a\u5143\u7d20\u3002 | \u6240\u6709\u53ef\u9009\u7684\u5143\u7d20\u3002 ... \u53ef\u4ee5\u91cd\u590d\u591a\u6b21\u3002 \u4f8b\u5982\u521b\u5efa\u70b9\u7684 nGQL \u8bed\u6cd5\uff1a INSERT VERTEX [IF NOT EXISTS] [tag_props, [tag_props] ...] VALUES <vid>: ([prop_value_list]) tag_props: tag_name ([prop_name_list]) prop_name_list: [prop_name [, prop_name] ...] prop_value_list: [prop_value [, prop_value] ...] \u793a\u4f8b\u8bed\u53e5\uff1a nebula> CREATE TAG IF NOT EXISTS player(name string, age int);","title":"\u5360\u4f4d\u6807\u8bc6\u7b26\u548c\u5360\u4f4d\u7b26\u503c"},{"location":"3.ngql-guide/1.nGQL-overview/1.overview/#opencypher","text":"","title":"\u5173\u4e8e openCypher \u517c\u5bb9\u6027"},{"location":"3.ngql-guide/1.nGQL-overview/1.overview/#ngql_opencypher","text":"\u539f\u751f nGQL \u662f\u7531NebulaGraph\u81ea\u884c\u521b\u9020\u548c\u5b9e\u73b0\u7684\u56fe\u67e5\u8be2\u8bed\u8a00\u3002openCypher \u662f\u7531 openCypher Implementers Group \u7ec4\u7ec7\u6240\u5f00\u6e90\u548c\u7ef4\u62a4\u7684\u56fe\u67e5\u8be2\u8bed\u8a00\uff0c\u6700\u65b0\u7248\u672c\u4e3a openCypher 9\u3002 \u7531\u4e8e nGQL \u8bed\u8a00\u90e8\u5206\u517c\u5bb9\u4e86 openCypher\uff0c\u8fd9\u4e2a\u90e8\u5206\u5728\u672c\u6587\u4e2d\u79f0\u4e3a openCypher \u517c\u5bb9\u8bed\u53e5\u3002 Note nGQL \u8bed\u8a00 = \u539f\u751f nGQL \u8bed\u53e5 + openCypher \u517c\u5bb9\u8bed\u53e5","title":"\u539f\u751f nGQL \u548c openCypher \u7684\u5173\u7cfb"},{"location":"3.ngql-guide/1.nGQL-overview/1.overview/#ngql_opencypher_9","text":"\u4e0d\u3002 openCypher \u517c\u5bb9\u6027 nGQL \u8bbe\u8ba1\u76ee\u6807\u4ec5\u4e3a\u517c\u5bb9\u90e8\u5206\u7684 DQL \u8bed\u53e5(match, optional match, with\u7b49)\u3002 \u4e0d\u8ba1\u5212\u517c\u5bb9\u4efb\u4f55 DDL\uff0cDML\uff0cDCL\uff1b \u4e0d\u8ba1\u5212\u517c\u5bb9 Bolt \u534f\u8bae\uff1b \u4e0d\u8ba1\u5212\u517c\u5bb9 APOC \u4e0e GDS\u3002 \u5728\u672c\u6587\u641c\u7d22 \"compatibility\" \u6216\u8005 \u201c\u517c\u5bb9\u6027\u201d \u67e5\u770b\u5177\u4f53\u4e0d\u517c\u5bb9\u7684\u7ec6\u8282\u3002 \u5728 Issues \u4e2d\u5df2\u7ecf\u5217\u51fa\u5df2\u77e5\u7684\u517c\u5bb9\u9519\u8bef\u3002\u5982\u679c\u53d1\u73b0\u8fd9\u79cd\u7c7b\u578b\u7684\u65b0\u95ee\u9898\uff0c\u8bf7\u63d0\u4ea4\u95ee\u9898\u5e76\u9644\u5e26 incompatible \u6807\u7b7e\u3002","title":"nGQL \u5b8c\u5168\u517c\u5bb9 openCypher 9 \u5417\uff1f"},{"location":"3.ngql-guide/1.nGQL-overview/1.overview/#ngql_opencypher_10","text":"\u7c7b\u522b openCypher 9 nGQL Schema \u5f31 Schema \u5f3a Schema \u76f8\u7b49\u8fd0\u7b97\u7b26 = == \u6570\u5b66\u6c42\u5e42 ^ \u4f7f\u7528 pow(x, y) \u66ff\u4ee3 ^ \u3002 \u8fb9 Rank \u65e0\u6b64\u6982\u5ff5 \u7528 @rank \u8bbe\u7f6e\u3002 \u8bed\u53e5 - \u4e0d\u652f\u6301 openCypher 9 \u7684\u6240\u6709 DML \u8bed\u53e5\uff08\u5982 CREATE \u3001 MERGE \u7b49\uff09\uff0c\u4e0d\u652f\u6301\u6240\u6709\u7684 DCL\uff0c\u548c\u652f\u6301\u90e8\u5206 MATCH , OPTIONAL MATCH \u8bed\u6cd5\u548c\u51fd\u6570\u3002 \u8bed\u53e5\u6587\u672c\u6362\u884c \u6362\u884c\u7b26 \\ + \u6362\u884c\u7b26 Label \u4e0e Tag \u662f\u4e0d\u540c\u7684\u6982\u5ff5 Label \u7528\u4e8e\u5bfb\u627e\u70b9\uff08\u70b9\u7684\u7d22\u5f15\uff09\u3002 Tag \u7528\u4e8e\u5b9a\u4e49\u70b9\u7684\u4e00\u79cd\u7c7b\u578b\u53ca\u76f8\u5e94\u7684\u5c5e\u6027\uff0c\u65e0\u7d22\u5f15\u529f\u80fd\u3002 \u9884\u7f16\u8bd1\u4e0e\u53c2\u6570\u5316\u67e5\u8be2 \u652f\u6301 \u4ec5\u652f\u6301\u53c2\u6570\u5316\u67e5\u8be2\u3002 Compatibility \u8bf7\u6ce8\u610f openCypher 9 \u548c Cypher \u5728\u8bed\u6cd5\u548c\u8bb8\u53ef\u4e0a\u6709\u4e0d\u540c\uff1a Cypher \u8981\u6c42\u6240\u6709 Cypher \u8bed\u53e5\u5fc5\u987b\u201c\u663e\u5f0f\u5730\u5728\u4e00\u4e2a\u4e8b\u52a1\u4e2d\u201d\u6267\u884c\uff0c\u800c openCypher \u6ca1\u6709\u8fd9\u6837\u7684\u8981\u6c42\u3002\u53e6\u5916\uff0cnGQL \u6ca1\u6709 \u4e8b\u52a1\u53ca\u9694\u79bb\u6027\u3002 Cypher \u4f01\u4e1a\u7248\u529f\u80fd\u6709\u591a\u79cd\u7684\u7ea6\u675f\uff08constraints\uff09\uff0c\u5305\u62ec Unique node property constraints\u3001Node property existence constraints\u3001Relationship property existence constraints\u3001Node key constraints\u3002 OpenCypher \u6807\u51c6\u4e2d\u6ca1\u6709\u7ea6\u675f\u3002 \u800c nGQL \u662f\u5f3a Schema \u7cfb\u7edf\uff0c\u524d\u8ff0\u7684\u7ea6\u675f\u5927\u591a\u901a\u8fc7 Schema \u5b9a\u4e49\u53ef\u5b9e\u73b0\uff08\u5305\u62ec NOT NULL\uff09\uff0c\u552f\u4e00\u4e0d\u80fd\u652f\u6301\u7684\u529f\u80fd\u662f\u201c\u5c5e\u6027\u503c\u552f\u4e00\u6027\u201d\uff08UNIQUE constraint\uff09\u3002 Cypher \u6709 APoC\uff0copenCypher 9 \u6ca1\u6709 APoC\u3002Cypher \u6709 Bolt \u534f\u8bae\u652f\u6301\u8981\u6c42\uff0c openCypher 9 \u6ca1\u6709\u3002","title":"nGQL \u548c openCypher 9 \u7684 \u4e3b\u8981\u5dee\u5f02\u6709\u54ea\u4e9b\uff1f"},{"location":"3.ngql-guide/1.nGQL-overview/1.overview/#ngql_2","text":"\u7528\u6237\u53ef\u4ee5\u5728 GitHub \u7684 features \u76ee\u5f55\u5185\u67e5\u770b\u8d85\u8fc7 2500 \u6761 nGQL \u793a\u4f8b\u3002 features \u76ee\u5f55\u5185\u5305\u542b\u5f88\u591a .features \u683c\u5f0f\u7684\u6587\u4ef6\uff0c\u6bcf\u4e2a\u6587\u4ef6\u90fd\u8bb0\u5f55\u4e86\u4f7f\u7528 nGQL \u7684\u573a\u666f\u548c\u793a\u4f8b\u3002\u4f8b\u5982\uff1a Feature: Basic match Background: Given a graph with space named \"basketballplayer\" Scenario: Single node When executing query: \"\"\" MATCH (v:player {name: \"Yao Ming\"}) RETURN v; \"\"\" Then the result should be, in any order, with relax comparison: | v | | (\"player133\" :player{age: 38, name: \"Yao Ming\"}) | Scenario: One step When executing query: \"\"\" MATCH (v1:player{name: \"LeBron James\"}) -[r]-> (v2) RETURN type(r) AS Type, v2.player.name AS Name \"\"\" Then the result should be, in any order: | Type | Name | | \"follow\" | \"Ray Allen\" | | \"serve\" | \"Lakers\" | | \"serve\" | \"Heat\" | | \"serve\" | \"Cavaliers\" | Feature: Comparison of where clause Background: Given a graph with space named \"basketballplayer\" Scenario: push edge props filter down When profiling query: \"\"\" GO FROM \"player100\" OVER follow WHERE properties(edge).degree IN [v IN [95,99] WHERE v > 0] YIELD dst(edge), properties(edge).degree \"\"\" Then the result should be, in any order: | follow._dst | follow.degree | | \"player101\" | 95 | | \"player125\" | 95 | And the execution plan should be: | id | name | dependencies | operator info | | 0 | Project | 1 | | | 1 | GetNeighbors | 2 | {\"filter\": \"(properties(edge).degree IN [v IN [95,99] WHERE (v>0)])\"} | | 2 | Start | | | \u793a\u4f8b\u4e2d\u7684\u5173\u952e\u5b57\u8bf4\u660e\u5982\u4e0b\u3002 \u5173\u952e\u5b57 \u8bf4\u660e Feature \u63cf\u8ff0\u5f53\u524d\u6587\u6863\u7684\u4e3b\u9898\u3002 Background \u63cf\u8ff0\u5f53\u524d\u6587\u6863\u7684\u80cc\u666f\u4fe1\u606f\u3002 Given \u63cf\u8ff0\u6267\u884c\u793a\u4f8b\u8bed\u53e5\u7684\u524d\u63d0\u6761\u4ef6\u3002 Scenario \u63cf\u8ff0\u5177\u4f53\u573a\u666f\u3002\u5982\u679c\u573a\u666f\u4e4b\u524d\u6709 @skip \u6807\u8bc6\uff0c\u8868\u793a\u8fd9\u4e2a\u573a\u666f\u4e0b\u793a\u4f8b\u8bed\u53e5\u53ef\u80fd\u65e0\u6cd5\u6b63\u5e38\u5de5\u4f5c\uff0c\u8bf7\u4e0d\u8981\u5728\u751f\u4ea7\u73af\u5883\u4e2d\u4f7f\u7528\u8be5\u793a\u4f8b\u8bed\u53e5\u3002 When \u63cf\u8ff0\u8981\u6267\u884c\u7684 nGQL \u793a\u4f8b\u8bed\u53e5\u3002\u53ef\u4ee5\u662f executing query \u6216 profiling query \u3002 Then \u63cf\u8ff0\u6267\u884c When \u5185\u8bed\u53e5\u7684\u9884\u671f\u8fd4\u56de\u7ed3\u679c\u3002\u5982\u679c\u8fd4\u56de\u7ed3\u679c\u548c\u6587\u6863\u4e0d\u540c\uff0c\u8bf7\u63d0\u4ea4 issue \u901a\u77e5NebulaGraph\u56e2\u961f\u3002 And \u63cf\u8ff0\u6267\u884c When \u5185\u8bed\u53e5\u7684\u526f\u4f5c\u7528\u6216\u6267\u884c\u8ba1\u5212\u3002 @skip \u8df3\u8fc7\u8fd9\u4e2a\u793a\u4f8b\u3002\u901a\u5e38\u8868\u793a\u6d4b\u8bd5\u4ee3\u7801\u8fd8\u6ca1\u6709\u51c6\u5907\u597d\u3002 \u6b22\u8fce \u589e\u52a0\u66f4\u591a tck case \uff0c\u5728 CI/CD \u4e2d\u81ea\u52a8\u56de\u5f52\u6240\u4f7f\u7528\u7684\u8bed\u53e5\u3002","title":"\u54ea\u91cc\u53ef\u4ee5\u627e\u5230\u66f4\u591a nGQL \u7684\u793a\u4f8b\uff1f"},{"location":"3.ngql-guide/1.nGQL-overview/1.overview/#tinkerpop_gremlin","text":"\u4e0d\u652f\u6301\u3002\u4e5f\u6ca1\u6709\u8ba1\u5212\u3002","title":"\u662f\u5426\u652f\u6301 TinkerPop Gremlin\uff1f"},{"location":"3.ngql-guide/1.nGQL-overview/1.overview/#w3c_rdfsparql_graphql","text":"\u4e0d\u652f\u6301\u3002\u4e5f\u6ca1\u6709\u8ba1\u5212\u3002 NebulaGraph\u7684\u6570\u636e\u6a21\u578b\u662f\u5c5e\u6027\u56fe\uff0c\u662f\u4e00\u4e2a\u5f3a Schema \u7cfb\u7edf\uff0c\u4e0d\u652f\u6301 RDF \u6807\u51c6\u3002 nGQL \u4e5f\u4e0d\u652f\u6301 SPARQL \u548c GraphQL\u3002","title":"\u662f\u5426\u652f\u6301 W3C \u7684 RDF\uff08SPARQL\uff09 \u6216 GraphQL \u7b49\uff1f"},{"location":"3.ngql-guide/1.nGQL-overview/3.graph-patterns/","text":"\u6a21\u5f0f \u00b6 \u6a21\u5f0f\uff08pattern\uff09\u548c\u56fe\u6a21\u5f0f\u5339\u914d\uff0c\u662f\u56fe\u67e5\u8be2\u8bed\u8a00\u7684\u6838\u5fc3\u529f\u80fd\uff0c\u672c\u6587\u4ecb\u7ecdNebulaGraph\u8bbe\u8ba1\u7684\u5404\u79cd\u6a21\u5f0f\uff0c\u90e8\u5206\u8fd8\u672a\u5b9e\u73b0\u3002 \u5355\u70b9\u6a21\u5f0f \u00b6 \u70b9\u7528\u4e00\u5bf9\u62ec\u53f7\u6765\u63cf\u8ff0\uff0c\u901a\u5e38\u5305\u542b\u4e00\u4e2a\u540d\u79f0\u3002\u4f8b\u5982\uff1a (a) \u793a\u4f8b\u4e3a\u4e00\u4e2a\u7b80\u5355\u7684\u6a21\u5f0f\uff0c\u63cf\u8ff0\u4e86\u5355\u4e2a\u70b9\uff0c\u5e76\u4f7f\u7528\u53d8\u91cf a \u547d\u540d\u8be5\u70b9\u3002 \u591a\u70b9\u5173\u8054\u6a21\u5f0f \u00b6 \u591a\u4e2a\u70b9\u901a\u8fc7\u8fb9\u76f8\u8fde\u662f\u5e38\u89c1\u7684\u7ed3\u6784\uff0c\u6a21\u5f0f\u7528\u7bad\u5934\u6765\u63cf\u8ff0\u4e24\u4e2a\u70b9\u4e4b\u95f4\u7684\u8fb9\u3002\u4f8b\u5982\uff1a (a)-[]->(b) \u793a\u4f8b\u4e3a\u4e00\u4e2a\u7b80\u5355\u7684\u6570\u636e\u7ed3\u6784\uff1a\u4e24\u4e2a\u70b9\u548c\u4e00\u6761\u8fde\u63a5\u4e24\u4e2a\u70b9\u7684\u8fb9\uff0c\u4e24\u4e2a\u70b9\u5206\u522b\u4e3a a \u548c b \uff0c\u8fb9\u662f\u6709\u65b9\u5411\u7684\uff0c\u4ece a \u5230 b \u3002 \u8fd9\u79cd\u63cf\u8ff0\u70b9\u548c\u8fb9\u7684\u65b9\u5f0f\u53ef\u4ee5\u6269\u5c55\u5230\u4efb\u610f\u6570\u91cf\u7684\u70b9\u548c\u8fb9\uff0c\u4f8b\u5982\uff1a (a)-[]->(b)<-[]-(c) \u8fd9\u6837\u7684\u4e00\u7cfb\u5217\u70b9\u548c\u8fb9\u79f0\u4e3a \u8def\u5f84 \uff08path\uff09\u3002 \u53ea\u6709\u5728\u6d89\u53ca\u67d0\u4e2a\u70b9\u65f6\uff0c\u624d\u9700\u8981\u547d\u540d\u8fd9\u4e2a\u70b9\u3002\u5982\u679c\u4e0d\u6d89\u53ca\u8fd9\u4e2a\u70b9\uff0c\u5219\u53ef\u4ee5\u7701\u7565\u540d\u79f0\uff0c\u4f8b\u5982\uff1a (a)-[]->()<-[]-(c) Tag \u6a21\u5f0f \u00b6 Note nGQL \u4e2d\u7684 Tag \u6982\u5ff5\u4e0e openCypher \u4e2d\u7684 Label \u6709\u4e00\u4e9b\u4e0d\u540c\u3002\u4f8b\u5982\uff0c\u5fc5\u987b\u521b\u5efa\u4e00\u4e2a Tag \u4e4b\u540e\u624d\u80fd\u4f7f\u7528\u5b83\uff0c\u800c\u4e14 Tag \u8fd8\u5b9a\u4e49\u4e86\u5c5e\u6027\u7684\u7c7b\u578b\u3002 \u6a21\u5f0f\u9664\u4e86\u7b80\u5355\u5730\u63cf\u8ff0\u56fe\u4e2d\u7684\u70b9\u4e4b\u5916\uff0c\u8fd8\u53ef\u4ee5\u63cf\u8ff0\u70b9\u7684 Tag\u3002\u4f8b\u5982\uff1a (a:User)-[]->(b) \u6a21\u5f0f\u4e5f\u53ef\u4ee5\u63cf\u8ff0\u6709\u591a\u4e2a Tag \u7684\u70b9\uff0c\u4f8b\u5982\uff1a (a:User:Admin)-[]->(b) \u5c5e\u6027\u6a21\u5f0f \u00b6 \u70b9\u548c\u8fb9\u662f\u56fe\u7684\u57fa\u672c\u7ed3\u6784\u3002nGQL \u5728\u8fd9\u4e24\u79cd\u7ed3\u6784\u4e0a\u90fd\u53ef\u4ee5\u589e\u52a0\u5c5e\u6027\uff0c\u65b9\u4fbf\u5b9e\u73b0\u66f4\u4e30\u5bcc\u7684\u6a21\u578b\u3002 \u5728\u6a21\u5f0f\u4e2d\uff0c\u5c5e\u6027\u7684\u8868\u793a\u65b9\u5f0f\u4e3a\uff1a\u7528\u82b1\u62ec\u53f7\u62ec\u8d77\u4e00\u4e9b\u952e\u503c\u5bf9\uff0c\u7528\u82f1\u6587\u9017\u53f7\u5206\u9694\uff0c\u5e76\u4e14\u9700\u8981\u6307\u5b9a\u5c5e\u6027\u6240\u5c5e\u7684 Tag \u6216\u8005 Edge type\u3002 \u4f8b\u5982\u4e00\u4e2a\u70b9\u6709\u4e24\u4e2a\u5c5e\u6027\uff1a (a:player{name: \"Tim Duncan\", age: 42}) \u5728\u8fd9\u4e2a\u70b9\u4e0a\u53ef\u4ee5\u6709\u4e00\u6761\u8fb9\u662f\uff1a (a)-[e:follow{degree: 95}]->(b) \u8fb9\u6a21\u5f0f \u00b6 \u63cf\u8ff0\u4e00\u6761\u8fb9\u6700\u7b80\u5355\u7684\u65b9\u6cd5\u662f\u4f7f\u7528\u7bad\u5934\u8fde\u63a5\u4e24\u4e2a\u70b9\u3002 \u53ef\u4ee5\u7528\u4ee5\u4e0b\u65b9\u5f0f\u63cf\u8ff0\u8fb9\u4ee5\u53ca\u5b83\u7684\u65b9\u5411\u6027\u3002\u5982\u679c\u4e0d\u5173\u5fc3\u8fb9\u7684\u65b9\u5411\uff0c\u53ef\u4ee5\u7701\u7565\u7bad\u5934\uff0c\u4f8b\u5982\uff1a (a)-[]-(b) \u548c\u70b9\u4e00\u6837\uff0c\u8fb9\u4e5f\u53ef\u4ee5\u547d\u540d\u3002\u4e00\u5bf9\u65b9\u62ec\u53f7\u7528\u4e8e\u5206\u9694\u7bad\u5934\uff0c\u53d8\u91cf\u653e\u5728\u4e24\u8005\u4e4b\u95f4\u3002\u4f8b\u5982\uff1a (a)-[r]->(b) \u548c\u70b9\u4e0a\u7684 Tag \u4e00\u6837\uff0c\u8fb9\u4e5f\u53ef\u4ee5\u6709\u7c7b\u578b\u3002\u63cf\u8ff0\u8fb9\u7684\u7c7b\u578b\uff0c\u4f8b\u5982\uff1a (a)-[r:REL_TYPE]->(b) \u548c\u70b9\u4e0a\u7684 Tag \u4e0d\u540c\uff0c\u4e00\u6761\u8fb9\u53ea\u80fd\u6709\u4e00\u79cd Edge type\u3002\u4f46\u662f\u5982\u679c\u6211\u4eec\u60f3\u63cf\u8ff0\u591a\u4e2a\u53ef\u9009 Edge type\uff0c\u53ef\u4ee5\u7528\u7ba1\u9053\u7b26\u53f7\uff08|\uff09\u5c06\u53ef\u9009\u503c\u5206\u5f00\uff0c\u4f8b\u5982\uff1a (a)-[r:TYPE1|TYPE2]->(b) \u548c\u70b9\u4e00\u6837\uff0c\u8fb9\u7684\u540d\u79f0\u53ef\u4ee5\u7701\u7565\uff0c\u4f8b\u5982\uff1a (a)-[:REL_TYPE]->(b) \u53d8\u957f\u6a21\u5f0f \u00b6 \u5728\u56fe\u4e2d\u6307\u5b9a\u8fb9\u7684\u957f\u5ea6\u6765\u63cf\u8ff0\u591a\u6761\u8fb9\uff08\u4ee5\u53ca\u4e2d\u95f4\u7684\u70b9\uff09\u7ec4\u6210\u7684\u4e00\u6761\u957f\u8def\u5f84\uff0c\u4e0d\u9700\u8981\u4f7f\u7528\u591a\u4e2a\u70b9\u548c\u8fb9\u6765\u63cf\u8ff0\u3002\u4f8b\u5982\uff1a (a)-[*2]->(b) \u8be5\u6a21\u5f0f\u63cf\u8ff0\u4e86 3 \u70b9 2 \u8fb9\u7ec4\u6210\u7684\u56fe\uff0c\u5b83\u4eec\u90fd\u5728\u4e00\u6761\u8def\u5f84\u4e0a\uff08\u957f\u5ea6\u4e3a 2\uff09\uff0c\u7b49\u4ef7\u4e8e\uff1a (a)-[]->()-[]->(b) \u4e5f\u53ef\u4ee5\u6307\u5b9a\u957f\u5ea6\u8303\u56f4\uff0c\u8fd9\u6837\u7684\u8fb9\u6a21\u5f0f\u79f0\u4e3a variable-length edges \uff0c\u4f8b\u5982\uff1a (a)-[*3..5]->(b) *3..5 \u8868\u793a\u6700\u5c0f\u957f\u5ea6\u4e3a 3\uff0c\u6700\u5927\u957f\u5ea6\u4e3a 5\u3002 \u8be5\u6a21\u5f0f\u63cf\u8ff0\u4e86 4 \u70b9 3 \u8fb9\u30015 \u70b9 4 \u8fb9\u6216 6 \u70b9 5 \u8fb9\u7ec4\u6210\u7684\u56fe\u3002 \u4e5f\u53ef\u4ee5\u5ffd\u7565\u6700\u5c0f\u957f\u5ea6\uff0c\u53ea\u6307\u5b9a\u6700\u5927\u957f\u5ea6\uff0c\u4f8b\u5982\uff1a (a)-[*..5]->(b) Note \u5fc5\u987b\u6307\u5b9a\u6700\u5927\u957f\u5ea6\uff0c \u4e0d\u652f\u6301 \u4ec5\u6307\u5b9a\u6700\u5c0f\u957f\u5ea6\uff08 (a)-[*3..]->(b) \uff09\u6216\u90fd\u4e0d\u6307\u5b9a\uff08 (a)-[*]->(b) \uff09\u3002 \u8def\u5f84\u53d8\u91cf \u00b6 \u4e00\u7cfb\u5217\u8fde\u63a5\u7684\u70b9\u548c\u8fb9\u79f0\u4e3a \u8def\u5f84 \u3002nGQL \u5141\u8bb8\u4f7f\u7528\u53d8\u91cf\u6765\u547d\u540d\u8def\u5f84\uff0c\u4f8b\u5982\uff1a p = (a)-[*3..5]->(b) \u53ef\u4ee5\u5728 MATCH \u8bed\u53e5\u4e2d\u4f7f\u7528\u8def\u5f84\u53d8\u91cf\u3002","title":"\u56fe\u6a21\u5f0f"},{"location":"3.ngql-guide/1.nGQL-overview/3.graph-patterns/#_1","text":"\u6a21\u5f0f\uff08pattern\uff09\u548c\u56fe\u6a21\u5f0f\u5339\u914d\uff0c\u662f\u56fe\u67e5\u8be2\u8bed\u8a00\u7684\u6838\u5fc3\u529f\u80fd\uff0c\u672c\u6587\u4ecb\u7ecdNebulaGraph\u8bbe\u8ba1\u7684\u5404\u79cd\u6a21\u5f0f\uff0c\u90e8\u5206\u8fd8\u672a\u5b9e\u73b0\u3002","title":"\u6a21\u5f0f"},{"location":"3.ngql-guide/1.nGQL-overview/3.graph-patterns/#_2","text":"\u70b9\u7528\u4e00\u5bf9\u62ec\u53f7\u6765\u63cf\u8ff0\uff0c\u901a\u5e38\u5305\u542b\u4e00\u4e2a\u540d\u79f0\u3002\u4f8b\u5982\uff1a (a) \u793a\u4f8b\u4e3a\u4e00\u4e2a\u7b80\u5355\u7684\u6a21\u5f0f\uff0c\u63cf\u8ff0\u4e86\u5355\u4e2a\u70b9\uff0c\u5e76\u4f7f\u7528\u53d8\u91cf a \u547d\u540d\u8be5\u70b9\u3002","title":"\u5355\u70b9\u6a21\u5f0f"},{"location":"3.ngql-guide/1.nGQL-overview/3.graph-patterns/#_3","text":"\u591a\u4e2a\u70b9\u901a\u8fc7\u8fb9\u76f8\u8fde\u662f\u5e38\u89c1\u7684\u7ed3\u6784\uff0c\u6a21\u5f0f\u7528\u7bad\u5934\u6765\u63cf\u8ff0\u4e24\u4e2a\u70b9\u4e4b\u95f4\u7684\u8fb9\u3002\u4f8b\u5982\uff1a (a)-[]->(b) \u793a\u4f8b\u4e3a\u4e00\u4e2a\u7b80\u5355\u7684\u6570\u636e\u7ed3\u6784\uff1a\u4e24\u4e2a\u70b9\u548c\u4e00\u6761\u8fde\u63a5\u4e24\u4e2a\u70b9\u7684\u8fb9\uff0c\u4e24\u4e2a\u70b9\u5206\u522b\u4e3a a \u548c b \uff0c\u8fb9\u662f\u6709\u65b9\u5411\u7684\uff0c\u4ece a \u5230 b \u3002 \u8fd9\u79cd\u63cf\u8ff0\u70b9\u548c\u8fb9\u7684\u65b9\u5f0f\u53ef\u4ee5\u6269\u5c55\u5230\u4efb\u610f\u6570\u91cf\u7684\u70b9\u548c\u8fb9\uff0c\u4f8b\u5982\uff1a (a)-[]->(b)<-[]-(c) \u8fd9\u6837\u7684\u4e00\u7cfb\u5217\u70b9\u548c\u8fb9\u79f0\u4e3a \u8def\u5f84 \uff08path\uff09\u3002 \u53ea\u6709\u5728\u6d89\u53ca\u67d0\u4e2a\u70b9\u65f6\uff0c\u624d\u9700\u8981\u547d\u540d\u8fd9\u4e2a\u70b9\u3002\u5982\u679c\u4e0d\u6d89\u53ca\u8fd9\u4e2a\u70b9\uff0c\u5219\u53ef\u4ee5\u7701\u7565\u540d\u79f0\uff0c\u4f8b\u5982\uff1a (a)-[]->()<-[]-(c)","title":"\u591a\u70b9\u5173\u8054\u6a21\u5f0f"},{"location":"3.ngql-guide/1.nGQL-overview/3.graph-patterns/#tag","text":"Note nGQL \u4e2d\u7684 Tag \u6982\u5ff5\u4e0e openCypher \u4e2d\u7684 Label \u6709\u4e00\u4e9b\u4e0d\u540c\u3002\u4f8b\u5982\uff0c\u5fc5\u987b\u521b\u5efa\u4e00\u4e2a Tag \u4e4b\u540e\u624d\u80fd\u4f7f\u7528\u5b83\uff0c\u800c\u4e14 Tag \u8fd8\u5b9a\u4e49\u4e86\u5c5e\u6027\u7684\u7c7b\u578b\u3002 \u6a21\u5f0f\u9664\u4e86\u7b80\u5355\u5730\u63cf\u8ff0\u56fe\u4e2d\u7684\u70b9\u4e4b\u5916\uff0c\u8fd8\u53ef\u4ee5\u63cf\u8ff0\u70b9\u7684 Tag\u3002\u4f8b\u5982\uff1a (a:User)-[]->(b) \u6a21\u5f0f\u4e5f\u53ef\u4ee5\u63cf\u8ff0\u6709\u591a\u4e2a Tag \u7684\u70b9\uff0c\u4f8b\u5982\uff1a (a:User:Admin)-[]->(b)","title":"Tag \u6a21\u5f0f"},{"location":"3.ngql-guide/1.nGQL-overview/3.graph-patterns/#_4","text":"\u70b9\u548c\u8fb9\u662f\u56fe\u7684\u57fa\u672c\u7ed3\u6784\u3002nGQL \u5728\u8fd9\u4e24\u79cd\u7ed3\u6784\u4e0a\u90fd\u53ef\u4ee5\u589e\u52a0\u5c5e\u6027\uff0c\u65b9\u4fbf\u5b9e\u73b0\u66f4\u4e30\u5bcc\u7684\u6a21\u578b\u3002 \u5728\u6a21\u5f0f\u4e2d\uff0c\u5c5e\u6027\u7684\u8868\u793a\u65b9\u5f0f\u4e3a\uff1a\u7528\u82b1\u62ec\u53f7\u62ec\u8d77\u4e00\u4e9b\u952e\u503c\u5bf9\uff0c\u7528\u82f1\u6587\u9017\u53f7\u5206\u9694\uff0c\u5e76\u4e14\u9700\u8981\u6307\u5b9a\u5c5e\u6027\u6240\u5c5e\u7684 Tag \u6216\u8005 Edge type\u3002 \u4f8b\u5982\u4e00\u4e2a\u70b9\u6709\u4e24\u4e2a\u5c5e\u6027\uff1a (a:player{name: \"Tim Duncan\", age: 42}) \u5728\u8fd9\u4e2a\u70b9\u4e0a\u53ef\u4ee5\u6709\u4e00\u6761\u8fb9\u662f\uff1a (a)-[e:follow{degree: 95}]->(b)","title":"\u5c5e\u6027\u6a21\u5f0f"},{"location":"3.ngql-guide/1.nGQL-overview/3.graph-patterns/#_5","text":"\u63cf\u8ff0\u4e00\u6761\u8fb9\u6700\u7b80\u5355\u7684\u65b9\u6cd5\u662f\u4f7f\u7528\u7bad\u5934\u8fde\u63a5\u4e24\u4e2a\u70b9\u3002 \u53ef\u4ee5\u7528\u4ee5\u4e0b\u65b9\u5f0f\u63cf\u8ff0\u8fb9\u4ee5\u53ca\u5b83\u7684\u65b9\u5411\u6027\u3002\u5982\u679c\u4e0d\u5173\u5fc3\u8fb9\u7684\u65b9\u5411\uff0c\u53ef\u4ee5\u7701\u7565\u7bad\u5934\uff0c\u4f8b\u5982\uff1a (a)-[]-(b) \u548c\u70b9\u4e00\u6837\uff0c\u8fb9\u4e5f\u53ef\u4ee5\u547d\u540d\u3002\u4e00\u5bf9\u65b9\u62ec\u53f7\u7528\u4e8e\u5206\u9694\u7bad\u5934\uff0c\u53d8\u91cf\u653e\u5728\u4e24\u8005\u4e4b\u95f4\u3002\u4f8b\u5982\uff1a (a)-[r]->(b) \u548c\u70b9\u4e0a\u7684 Tag \u4e00\u6837\uff0c\u8fb9\u4e5f\u53ef\u4ee5\u6709\u7c7b\u578b\u3002\u63cf\u8ff0\u8fb9\u7684\u7c7b\u578b\uff0c\u4f8b\u5982\uff1a (a)-[r:REL_TYPE]->(b) \u548c\u70b9\u4e0a\u7684 Tag \u4e0d\u540c\uff0c\u4e00\u6761\u8fb9\u53ea\u80fd\u6709\u4e00\u79cd Edge type\u3002\u4f46\u662f\u5982\u679c\u6211\u4eec\u60f3\u63cf\u8ff0\u591a\u4e2a\u53ef\u9009 Edge type\uff0c\u53ef\u4ee5\u7528\u7ba1\u9053\u7b26\u53f7\uff08|\uff09\u5c06\u53ef\u9009\u503c\u5206\u5f00\uff0c\u4f8b\u5982\uff1a (a)-[r:TYPE1|TYPE2]->(b) \u548c\u70b9\u4e00\u6837\uff0c\u8fb9\u7684\u540d\u79f0\u53ef\u4ee5\u7701\u7565\uff0c\u4f8b\u5982\uff1a (a)-[:REL_TYPE]->(b)","title":"\u8fb9\u6a21\u5f0f"},{"location":"3.ngql-guide/1.nGQL-overview/3.graph-patterns/#_6","text":"\u5728\u56fe\u4e2d\u6307\u5b9a\u8fb9\u7684\u957f\u5ea6\u6765\u63cf\u8ff0\u591a\u6761\u8fb9\uff08\u4ee5\u53ca\u4e2d\u95f4\u7684\u70b9\uff09\u7ec4\u6210\u7684\u4e00\u6761\u957f\u8def\u5f84\uff0c\u4e0d\u9700\u8981\u4f7f\u7528\u591a\u4e2a\u70b9\u548c\u8fb9\u6765\u63cf\u8ff0\u3002\u4f8b\u5982\uff1a (a)-[*2]->(b) \u8be5\u6a21\u5f0f\u63cf\u8ff0\u4e86 3 \u70b9 2 \u8fb9\u7ec4\u6210\u7684\u56fe\uff0c\u5b83\u4eec\u90fd\u5728\u4e00\u6761\u8def\u5f84\u4e0a\uff08\u957f\u5ea6\u4e3a 2\uff09\uff0c\u7b49\u4ef7\u4e8e\uff1a (a)-[]->()-[]->(b) \u4e5f\u53ef\u4ee5\u6307\u5b9a\u957f\u5ea6\u8303\u56f4\uff0c\u8fd9\u6837\u7684\u8fb9\u6a21\u5f0f\u79f0\u4e3a variable-length edges \uff0c\u4f8b\u5982\uff1a (a)-[*3..5]->(b) *3..5 \u8868\u793a\u6700\u5c0f\u957f\u5ea6\u4e3a 3\uff0c\u6700\u5927\u957f\u5ea6\u4e3a 5\u3002 \u8be5\u6a21\u5f0f\u63cf\u8ff0\u4e86 4 \u70b9 3 \u8fb9\u30015 \u70b9 4 \u8fb9\u6216 6 \u70b9 5 \u8fb9\u7ec4\u6210\u7684\u56fe\u3002 \u4e5f\u53ef\u4ee5\u5ffd\u7565\u6700\u5c0f\u957f\u5ea6\uff0c\u53ea\u6307\u5b9a\u6700\u5927\u957f\u5ea6\uff0c\u4f8b\u5982\uff1a (a)-[*..5]->(b) Note \u5fc5\u987b\u6307\u5b9a\u6700\u5927\u957f\u5ea6\uff0c \u4e0d\u652f\u6301 \u4ec5\u6307\u5b9a\u6700\u5c0f\u957f\u5ea6\uff08 (a)-[*3..]->(b) \uff09\u6216\u90fd\u4e0d\u6307\u5b9a\uff08 (a)-[*]->(b) \uff09\u3002","title":"\u53d8\u957f\u6a21\u5f0f"},{"location":"3.ngql-guide/1.nGQL-overview/3.graph-patterns/#_7","text":"\u4e00\u7cfb\u5217\u8fde\u63a5\u7684\u70b9\u548c\u8fb9\u79f0\u4e3a \u8def\u5f84 \u3002nGQL \u5141\u8bb8\u4f7f\u7528\u53d8\u91cf\u6765\u547d\u540d\u8def\u5f84\uff0c\u4f8b\u5982\uff1a p = (a)-[*3..5]->(b) \u53ef\u4ee5\u5728 MATCH \u8bed\u53e5\u4e2d\u4f7f\u7528\u8def\u5f84\u53d8\u91cf\u3002","title":"\u8def\u5f84\u53d8\u91cf"},{"location":"3.ngql-guide/1.nGQL-overview/comments/","text":"\u6ce8\u91ca \u00b6 \u672c\u6587\u4ecb\u7ecd nGQL \u4e2d\u7684\u6ce8\u91ca\u65b9\u5f0f\u3002 Examples \u00b6 nebula> # \u8fd9\u884c\u4ec0\u4e48\u90fd\u4e0d\u505a\u3002 nebula> RETURN 1+1; # \u8fd9\u6761\u6ce8\u91ca\u5ef6\u7eed\u5230\u884c\u5c3e\u3002 nebula> RETURN 1+1; // \u8fd9\u6761\u6ce8\u91ca\u5ef6\u7eed\u5230\u884c\u5c3e\u3002 nebula> RETURN 1 /* \u8fd9\u662f\u4e00\u6761\u884c\u5185\u6ce8\u91ca */ + 1 == 2; nebula> RETURN 11 + \\ /* \u591a\u884c\u6ce8\u91ca \\ \u7528\u53cd\u659c\u7ebf\u6765\u6362\u884c\u3002 \\ */ 12; nGQL \u8bed\u53e5\u4e2d\u7684\u53cd\u659c\u7ebf\uff08\\\uff09\u4ee3\u8868\u6362\u884c\u3002 OpenCypher \u517c\u5bb9\u6027 \u00b6 \u5728 nGQL \u4e2d\uff0c\u7528\u6237\u5fc5\u987b\u5728\u884c\u672b\u4f7f\u7528\u53cd\u659c\u7ebf\uff08\\\uff09\u6765\u6362\u884c\uff0c\u5373\u4f7f\u662f\u5728\u4f7f\u7528 /* */ \u7b26\u53f7\u7684\u591a\u884c\u6ce8\u91ca\u5185\u3002 \u5728 openCypher \u4e2d\u4e0d\u9700\u8981\u4f7f\u7528\u53cd\u659c\u7ebf\u6362\u884c\u3002 /* openCypher \u98ce\u683c\uff1a \u8fd9\u6761\u6ce8\u91ca \u5ef6\u7eed\u4e86\u4e0d\u6b62 \u4e00\u884c */ MATCH (n:label) RETURN n; /* \u539f\u751f nGQL \u98ce\u683c\uff1a \\ \u8fd9\u6761\u6ce8\u91ca \\ \u5ef6\u7eed\u4e86\u4e0d\u6b62 \\ \u4e00\u884c */ \\ MATCH (n:tag) \\ RETURN n;","title":"\u6ce8\u91ca"},{"location":"3.ngql-guide/1.nGQL-overview/comments/#_1","text":"\u672c\u6587\u4ecb\u7ecd nGQL \u4e2d\u7684\u6ce8\u91ca\u65b9\u5f0f\u3002","title":"\u6ce8\u91ca"},{"location":"3.ngql-guide/1.nGQL-overview/comments/#examples","text":"nebula> # \u8fd9\u884c\u4ec0\u4e48\u90fd\u4e0d\u505a\u3002 nebula> RETURN 1+1; # \u8fd9\u6761\u6ce8\u91ca\u5ef6\u7eed\u5230\u884c\u5c3e\u3002 nebula> RETURN 1+1; // \u8fd9\u6761\u6ce8\u91ca\u5ef6\u7eed\u5230\u884c\u5c3e\u3002 nebula> RETURN 1 /* \u8fd9\u662f\u4e00\u6761\u884c\u5185\u6ce8\u91ca */ + 1 == 2; nebula> RETURN 11 + \\ /* \u591a\u884c\u6ce8\u91ca \\ \u7528\u53cd\u659c\u7ebf\u6765\u6362\u884c\u3002 \\ */ 12; nGQL \u8bed\u53e5\u4e2d\u7684\u53cd\u659c\u7ebf\uff08\\\uff09\u4ee3\u8868\u6362\u884c\u3002","title":"Examples"},{"location":"3.ngql-guide/1.nGQL-overview/comments/#opencypher","text":"\u5728 nGQL \u4e2d\uff0c\u7528\u6237\u5fc5\u987b\u5728\u884c\u672b\u4f7f\u7528\u53cd\u659c\u7ebf\uff08\\\uff09\u6765\u6362\u884c\uff0c\u5373\u4f7f\u662f\u5728\u4f7f\u7528 /* */ \u7b26\u53f7\u7684\u591a\u884c\u6ce8\u91ca\u5185\u3002 \u5728 openCypher \u4e2d\u4e0d\u9700\u8981\u4f7f\u7528\u53cd\u659c\u7ebf\u6362\u884c\u3002 /* openCypher \u98ce\u683c\uff1a \u8fd9\u6761\u6ce8\u91ca \u5ef6\u7eed\u4e86\u4e0d\u6b62 \u4e00\u884c */ MATCH (n:label) RETURN n; /* \u539f\u751f nGQL \u98ce\u683c\uff1a \\ \u8fd9\u6761\u6ce8\u91ca \\ \u5ef6\u7eed\u4e86\u4e0d\u6b62 \\ \u4e00\u884c */ \\ MATCH (n:tag) \\ RETURN n;","title":"OpenCypher \u517c\u5bb9\u6027"},{"location":"3.ngql-guide/1.nGQL-overview/identifier-case-sensitivity/","text":"\u5927\u5c0f\u5199\u533a\u5206 \u00b6 \u6807\u8bc6\u7b26\u533a\u5206\u5927\u5c0f\u5199 \u00b6 \u4ee5\u4e0b\u8bed\u53e5\u4f1a\u51fa\u73b0\u9519\u8bef\uff0c\u56e0\u4e3a my_space \u548c MY_SPACE \u662f\u4e24\u4e2a\u4e0d\u540c\u7684\u56fe\u7a7a\u95f4\u3002 nebula> CREATE SPACE IF NOT EXISTS my_space (vid_type=FIXED_STRING(30)); nebula> use MY_SPACE; [ERROR (-1005)]: SpaceNotFound: \u5173\u952e\u5b57\u4e0d\u533a\u5206\u5927\u5c0f\u5199 \u00b6 \u4ee5\u4e0b\u8bed\u53e5\u662f\u7b49\u4ef7\u7684\uff0c\u56e0\u4e3a show \u548c spaces \u662f\u5173\u952e\u5b57\u3002 nebula> show spaces; nebula> SHOW SPACES; nebula> SHOW spaces; nebula> show SPACES; \u51fd\u6570\u4e0d\u533a\u5206\u5927\u5c0f\u5199 \u00b6 \u51fd\u6570\u540d\u79f0\u4e0d\u533a\u5206\u5927\u5c0f\u5199\uff0c\u4f8b\u5982 count() \u3001 COUNT() \u3001 couNT() \u662f\u7b49\u4ef7\u7684\u3002 nebula> WITH [NULL, 1, 1, 2, 2] As a \\ UNWIND a AS b \\ RETURN count(b), COUNT(*), couNT(DISTINCT b); +----------+----------+-------------------+ | count(b) | COUNT(*) | couNT(distinct b) | +----------+----------+-------------------+ | 4 | 5 | 2 | +----------+----------+-------------------+","title":"\u5927\u5c0f\u5199\u533a\u5206"},{"location":"3.ngql-guide/1.nGQL-overview/identifier-case-sensitivity/#_1","text":"","title":"\u5927\u5c0f\u5199\u533a\u5206"},{"location":"3.ngql-guide/1.nGQL-overview/identifier-case-sensitivity/#_2","text":"\u4ee5\u4e0b\u8bed\u53e5\u4f1a\u51fa\u73b0\u9519\u8bef\uff0c\u56e0\u4e3a my_space \u548c MY_SPACE \u662f\u4e24\u4e2a\u4e0d\u540c\u7684\u56fe\u7a7a\u95f4\u3002 nebula> CREATE SPACE IF NOT EXISTS my_space (vid_type=FIXED_STRING(30)); nebula> use MY_SPACE; [ERROR (-1005)]: SpaceNotFound:","title":"\u6807\u8bc6\u7b26\u533a\u5206\u5927\u5c0f\u5199"},{"location":"3.ngql-guide/1.nGQL-overview/identifier-case-sensitivity/#_3","text":"\u4ee5\u4e0b\u8bed\u53e5\u662f\u7b49\u4ef7\u7684\uff0c\u56e0\u4e3a show \u548c spaces \u662f\u5173\u952e\u5b57\u3002 nebula> show spaces; nebula> SHOW SPACES; nebula> SHOW spaces; nebula> show SPACES;","title":"\u5173\u952e\u5b57\u4e0d\u533a\u5206\u5927\u5c0f\u5199"},{"location":"3.ngql-guide/1.nGQL-overview/identifier-case-sensitivity/#_4","text":"\u51fd\u6570\u540d\u79f0\u4e0d\u533a\u5206\u5927\u5c0f\u5199\uff0c\u4f8b\u5982 count() \u3001 COUNT() \u3001 couNT() \u662f\u7b49\u4ef7\u7684\u3002 nebula> WITH [NULL, 1, 1, 2, 2] As a \\ UNWIND a AS b \\ RETURN count(b), COUNT(*), couNT(DISTINCT b); +----------+----------+-------------------+ | count(b) | COUNT(*) | couNT(distinct b) | +----------+----------+-------------------+ | 4 | 5 | 2 | +----------+----------+-------------------+","title":"\u51fd\u6570\u4e0d\u533a\u5206\u5927\u5c0f\u5199"},{"location":"3.ngql-guide/1.nGQL-overview/keywords-and-reserved-words/","text":"\u5173\u952e\u5b57 \u00b6 \u5173\u952e\u5b57\u662f nGQL \u4e2d\u5177\u6709\u7279\u6b8a\u542b\u4e49\u7684\u8bcd\uff0c\u4f8b\u5982 CREATE TAG \u8bed\u53e5\u4e2d\u7684 CREATE \u548c TAG \u3002\u9700\u8981\u7ecf\u8fc7\u7279\u6b8a\u5904\u7406\u624d\u80fd\u4f5c\u4e3a\u6807\u8bc6\u7b26\u4f7f\u7528\u7684\u5173\u952e\u5b57\u88ab\u79f0\u4e3a \u4fdd\u7559\u5173\u952e\u5b57 \uff0c\u800c\u80fd\u591f\u76f4\u63a5\u4f5c\u4e3a\u6807\u8bc6\u7b26\u4f7f\u7528\u7684\u8fd9\u90e8\u5206\u5173\u952e\u5b57\u88ab\u79f0\u4e3a \u975e\u4fdd\u7559\u5173\u952e\u5b57 \u3002 \u4e0d\u5efa\u8bae\u5728\u521b\u5efa Schema \u65f6\u4f7f\u7528\u5173\u952e\u5b57\u3002\u5982\u679c\u5fc5\u987b\u4f7f\u7528\u5173\u952e\u5b57\uff0c\u8bf7\u6ce8\u610f\u4e00\u4e0b\u89c4\u5219\uff1a \u5173\u952e\u5b57\u4e0d\u533a\u5206\u5927\u5c0f\u5199\u3002 \u5f53\u975e\u4fdd\u7559\u5173\u952e\u5b57\u5747\u4e3a\u5c0f\u5199\u5b57\u6bcd\u65f6\uff0c\u5982\u679c\u5c06\u5176\u4f5c\u4e3a\u6807\u8bc6\u7b26\u65f6\u53ef\u4ee5\u4e0d\u4f7f\u7528\u5f15\u53f7\uff1b\u5f53\u975e\u4fdd\u7559\u5173\u952e\u5b57\u5305\u542b\u5927\u5199\u5b57\u6bcd\u65f6\u5e76\u5c06\u5176\u4f5c\u4e3a\u6807\u8bc6\u7b26\u65f6\uff0c\u9700\u8981\u7528\u53cd\u5f15\u53f7\uff08`\uff09\u5305\u56f4\uff0c\u4f8b\u5982 `Comment`\u3002 \u4fdd\u7559\u5173\u952e\u5b57\u6216\u7279\u6b8a\u5b57\u7b26\u4f5c\u4e3a\u6807\u8bc6\u7b26\u65f6\uff0c\u9700\u8981\u7528\u53cd\u5f15\u53f7\uff08`\uff09\u5305\u56f4\uff0c\u4f8b\u5982 `AND`\u3002 nebula> CREATE TAG TAG(name string); [ERROR (-1004)]: SyntaxError: syntax error near `TAG' nebula> CREATE TAG `TAG` (name string); Execution succeeded nebula> CREATE TAG SPACE(name string); Execution succeeded nebula> CREATE TAG \u4e2d\u6587(\u7b80\u4f53 string); Execution succeeded nebula> CREATE TAG `\uffe5%\u7279\u6b8a \u5b57\u7b26&*+-*/` (`q~\uff01\uff08\uff09= wer` string); Execution succeeded \u4fdd\u7559\u5173\u952e\u5b57 \u00b6 ACROSS ADD ALTER AND AS ASC ASCENDING BALANCE BOOL BY CASE CHANGE COMPACT CREATE DATE DATETIME DELETE DESC DESCENDING DESCRIBE DISTINCT DOUBLE DOWNLOAD DROP DURATION EDGE EDGES EXISTS EXPLAIN FETCH FIND FIXED_STRING FLOAT FLUSH FORMAT FROM GET GO GRANT IF IGNORE_EXISTED_INDEX IN INDEX INDEXES INGEST INSERT INT INT16 INT32 INT64 INT8 INTERSECT IS LIMIT LIST LOOKUP MAP MATCH MINUS NO NOT NOT_IN NULL OF OFFSET ON OR ORDER OVER OVERWRITE PROFILE PROP REBUILD RECOVER REMOVE RESTART RETURN REVERSELY REVOKE SET SHOW STEP STEPS STOP STRING SUBMIT TAG TAGS TIME TIMESTAMP TO UNION UPDATE UPSERT UPTO USE VERTEX VERTICES WHEN WHERE WITH XOR YIELD \u975e\u4fdd\u7559\u5173\u952e\u5b57 \u00b6 ACCOUNT ADMIN ALL ANY ATOMIC_EDGE AUTO BIDIRECT BOTH CHARSET CLIENTS COLLATE COLLATION COMMENT CONFIGS CONTAINS DATA DBA DEFAULT ELASTICSEARCH ELSE END ENDS ENDS_WITH FORCE FULLTEXT FUZZY GOD GRAPH GROUP GROUPS GUEST HDFS HOST HOSTS INTO IS_EMPTY IS_NOT_EMPTY IS_NOT_NULL IS_NULL JOB JOBS KILL LEADER LISTENER META NOLOOP NONE NOT_CONTAINS NOT_ENDS_WITH NOT_STARTS_WITH OPTIONAL OUT PART PARTITION_NUM PARTS PASSWORD PATH PLAN PREFIX QUERIES QUERY REDUCE REGEXP REPLICA_FACTOR RESET ROLE ROLES SAMPLE SEARCH SERVICE SESSION SESSIONS SHORTEST SIGN SINGLE SKIP SNAPSHOT SNAPSHOTS SPACE SPACES STARTS STARTS_WITH STATS STATUS STORAGE SUBGRAPH TEXT TEXT_SEARCH THEN TOP TTL_COL TTL_DURATION UNWIND USER USERS UUID VALUE VALUES VID_TYPE WILDCARD ZONE ZONES FALSE TRUE","title":"\u5173\u952e\u5b57"},{"location":"3.ngql-guide/1.nGQL-overview/keywords-and-reserved-words/#_1","text":"\u5173\u952e\u5b57\u662f nGQL \u4e2d\u5177\u6709\u7279\u6b8a\u542b\u4e49\u7684\u8bcd\uff0c\u4f8b\u5982 CREATE TAG \u8bed\u53e5\u4e2d\u7684 CREATE \u548c TAG \u3002\u9700\u8981\u7ecf\u8fc7\u7279\u6b8a\u5904\u7406\u624d\u80fd\u4f5c\u4e3a\u6807\u8bc6\u7b26\u4f7f\u7528\u7684\u5173\u952e\u5b57\u88ab\u79f0\u4e3a \u4fdd\u7559\u5173\u952e\u5b57 \uff0c\u800c\u80fd\u591f\u76f4\u63a5\u4f5c\u4e3a\u6807\u8bc6\u7b26\u4f7f\u7528\u7684\u8fd9\u90e8\u5206\u5173\u952e\u5b57\u88ab\u79f0\u4e3a \u975e\u4fdd\u7559\u5173\u952e\u5b57 \u3002 \u4e0d\u5efa\u8bae\u5728\u521b\u5efa Schema \u65f6\u4f7f\u7528\u5173\u952e\u5b57\u3002\u5982\u679c\u5fc5\u987b\u4f7f\u7528\u5173\u952e\u5b57\uff0c\u8bf7\u6ce8\u610f\u4e00\u4e0b\u89c4\u5219\uff1a \u5173\u952e\u5b57\u4e0d\u533a\u5206\u5927\u5c0f\u5199\u3002 \u5f53\u975e\u4fdd\u7559\u5173\u952e\u5b57\u5747\u4e3a\u5c0f\u5199\u5b57\u6bcd\u65f6\uff0c\u5982\u679c\u5c06\u5176\u4f5c\u4e3a\u6807\u8bc6\u7b26\u65f6\u53ef\u4ee5\u4e0d\u4f7f\u7528\u5f15\u53f7\uff1b\u5f53\u975e\u4fdd\u7559\u5173\u952e\u5b57\u5305\u542b\u5927\u5199\u5b57\u6bcd\u65f6\u5e76\u5c06\u5176\u4f5c\u4e3a\u6807\u8bc6\u7b26\u65f6\uff0c\u9700\u8981\u7528\u53cd\u5f15\u53f7\uff08`\uff09\u5305\u56f4\uff0c\u4f8b\u5982 `Comment`\u3002 \u4fdd\u7559\u5173\u952e\u5b57\u6216\u7279\u6b8a\u5b57\u7b26\u4f5c\u4e3a\u6807\u8bc6\u7b26\u65f6\uff0c\u9700\u8981\u7528\u53cd\u5f15\u53f7\uff08`\uff09\u5305\u56f4\uff0c\u4f8b\u5982 `AND`\u3002 nebula> CREATE TAG TAG(name string); [ERROR (-1004)]: SyntaxError: syntax error near `TAG' nebula> CREATE TAG `TAG` (name string); Execution succeeded nebula> CREATE TAG SPACE(name string); Execution succeeded nebula> CREATE TAG \u4e2d\u6587(\u7b80\u4f53 string); Execution succeeded nebula> CREATE TAG `\uffe5%\u7279\u6b8a \u5b57\u7b26&*+-*/` (`q~\uff01\uff08\uff09= wer` string); Execution succeeded","title":"\u5173\u952e\u5b57"},{"location":"3.ngql-guide/1.nGQL-overview/keywords-and-reserved-words/#_2","text":"ACROSS ADD ALTER AND AS ASC ASCENDING BALANCE BOOL BY CASE CHANGE COMPACT CREATE DATE DATETIME DELETE DESC DESCENDING DESCRIBE DISTINCT DOUBLE DOWNLOAD DROP DURATION EDGE EDGES EXISTS EXPLAIN FETCH FIND FIXED_STRING FLOAT FLUSH FORMAT FROM GET GO GRANT IF IGNORE_EXISTED_INDEX IN INDEX INDEXES INGEST INSERT INT INT16 INT32 INT64 INT8 INTERSECT IS LIMIT LIST LOOKUP MAP MATCH MINUS NO NOT NOT_IN NULL OF OFFSET ON OR ORDER OVER OVERWRITE PROFILE PROP REBUILD RECOVER REMOVE RESTART RETURN REVERSELY REVOKE SET SHOW STEP STEPS STOP STRING SUBMIT TAG TAGS TIME TIMESTAMP TO UNION UPDATE UPSERT UPTO USE VERTEX VERTICES WHEN WHERE WITH XOR YIELD","title":"\u4fdd\u7559\u5173\u952e\u5b57"},{"location":"3.ngql-guide/1.nGQL-overview/keywords-and-reserved-words/#_3","text":"ACCOUNT ADMIN ALL ANY ATOMIC_EDGE AUTO BIDIRECT BOTH CHARSET CLIENTS COLLATE COLLATION COMMENT CONFIGS CONTAINS DATA DBA DEFAULT ELASTICSEARCH ELSE END ENDS ENDS_WITH FORCE FULLTEXT FUZZY GOD GRAPH GROUP GROUPS GUEST HDFS HOST HOSTS INTO IS_EMPTY IS_NOT_EMPTY IS_NOT_NULL IS_NULL JOB JOBS KILL LEADER LISTENER META NOLOOP NONE NOT_CONTAINS NOT_ENDS_WITH NOT_STARTS_WITH OPTIONAL OUT PART PARTITION_NUM PARTS PASSWORD PATH PLAN PREFIX QUERIES QUERY REDUCE REGEXP REPLICA_FACTOR RESET ROLE ROLES SAMPLE SEARCH SERVICE SESSION SESSIONS SHORTEST SIGN SINGLE SKIP SNAPSHOT SNAPSHOTS SPACE SPACES STARTS STARTS_WITH STATS STATUS STORAGE SUBGRAPH TEXT TEXT_SEARCH THEN TOP TTL_COL TTL_DURATION UNWIND USER USERS UUID VALUE VALUES VID_TYPE WILDCARD ZONE ZONES FALSE TRUE","title":"\u975e\u4fdd\u7559\u5173\u952e\u5b57"},{"location":"3.ngql-guide/1.nGQL-overview/ngql-style-guide/","text":"nGQL \u98ce\u683c\u6307\u5357 \u00b6 nGQL \u6ca1\u6709\u4e25\u683c\u7684\u6784\u5efa\u683c\u5f0f\u8981\u6c42\uff0c\u4f46\u6839\u636e\u6070\u5f53\u800c\u7edf\u4e00\u7684\u98ce\u683c\u521b\u5efa nGQL \u8bed\u53e5\u6709\u5229\u4e8e\u63d0\u9ad8\u53ef\u8bfb\u6027\u3001\u907f\u514d\u6b67\u4e49\u3002\u5728\u540c\u4e00\u7ec4\u7ec7\u6216\u9879\u76ee\u4e2d\u4f7f\u7528\u76f8\u540c\u7684 nGQL \u98ce\u683c\u6709\u5229\u4e8e\u964d\u4f4e\u7ef4\u62a4\u6210\u672c\uff0c\u89c4\u907f\u56e0\u683c\u5f0f\u6df7\u4e71\u6216\u8bef\u89e3\u9020\u6210\u7684\u95ee\u9898\u3002\u672c\u6587\u4e3a\u5199\u4f5c nGQL \u8bed\u53e5\u63d0\u4f9b\u4e86\u98ce\u683c\u53c2\u8003\u3002 Compatibility nGQL \u98ce\u683c\u4e0e Cypher Style Guide \u4e0d\u540c\u3002 \u6362\u884c \u00b6 \u6362\u884c\u5199\u5b50\u53e5\u3002 \u4e0d\u63a8\u8350\uff1a GO FROM \"player100\" OVER follow REVERSELY YIELD src(edge) AS id; \u63a8\u8350\uff1a GO FROM \"player100\" \\ OVER follow REVERSELY \\ YIELD src(edge) AS id; \u6362\u884c\u5199\u590d\u5408\u8bed\u53e5\u4e2d\u7684\u4e0d\u540c\u8bed\u53e5\u3002 \u4e0d\u63a8\u8350\uff1a GO FROM \"player100\" OVER follow REVERSELY YIELD src(edge) AS id | GO FROM $-.id \\ OVER serve WHERE properties($^).age > 20 YIELD properties($^).name AS FriendOf, properties($$).name AS Team; \u63a8\u8350\uff1a GO FROM \"player100\" \\ OVER follow REVERSELY \\ YIELD src(edge) AS id | \\ GO FROM $-.id OVER serve \\ WHERE properties($^).age > 20 \\ YIELD properties($^).name AS FriendOf, properties($$).name AS Team; \u5b50\u53e5\u957f\u5ea6\u8d85\u8fc7 80 \u4e2a\u5b57\u7b26\u65f6\uff0c\u5728\u5408\u9002\u7684\u4f4d\u7f6e\u6362\u884c\u3002 \u4e0d\u63a8\u8350\uff1a MATCH (v:player{name:\"Tim Duncan\"})-[e]->(v2) \\ WHERE (v2.player.name STARTS WITH \"Y\" AND v2.player.age > 35 AND v2.player.age < v.player.age) OR (v2.player.name STARTS WITH \"T\" AND v2.player.age < 45 AND v2.player.age > v.player.age) \\ RETURN v2; \u63a8\u8350\uff1a MATCH (v:player{name:\"Tim Duncan\"})-[e]->(v2) \\ WHERE (v2.player.name STARTS WITH \"Y\" AND v2.player.age > 35 AND v2.player.age < v.player.age) \\ OR (v2.player.name STARTS WITH \"T\" AND v2.player.age < 45 AND v2.player.age > v.player.age) \\ RETURN v2; Note \u5373\u4f7f\u5b50\u53e5\u4e0d\u8d85\u8fc7 80 \u4e2a\u5b57\u7b26\uff0c\u5982\u9700\u6362\u884c\u540e\u6709\u52a9\u4e8e\u7406\u89e3\uff0c\u4e5f\u53ef\u5c06\u5b50\u53e5\u518d\u6b21\u5206\u884c\u3002 \u6807\u8bc6\u7b26\u547d\u540d \u00b6 \u5728 nGQL \u8bed\u53e5\u4e2d\uff0c\u5173\u952e\u5b57\u3001\u6807\u70b9\u7b26\u53f7\u3001\u7a7a\u683c\u4ee5\u5916\u7684\u5b57\u7b26\u5185\u5bb9\u90fd\u662f\u6807\u8bc6\u7b26\u3002\u63a8\u8350\u7684\u6807\u8bc6\u7b26\u547d\u540d\u65b9\u5f0f\u5982\u4e0b\u3002 \u4f7f\u7528\u5355\u6570\u540d\u8bcd\u547d\u540d Tag\uff0c\u7528\u539f\u578b\u52a8\u8bcd\u6216\u52a8\u8bcd\u77ed\u8bed\u6784\u6210 Edge type\u3002 \u4e0d\u63a8\u8350\uff1a MATCH p=(v:players)-[e:are_following]-(v2) \\ RETURN nodes(p); \u63a8\u8350\uff1a MATCH p=(v:player)-[e:follow]-(v2) \\ RETURN nodes(p); \u6807\u8bc6\u7b26\u7528\u86c7\u5f62\u547d\u540d\u6cd5\uff0c\u4ee5\u4e0b\u5212\u7ebf\uff08_\uff09\u8fde\u63a5\u5355\u8bcd\uff0c\u4e14\u6240\u6709\u5b57\u6bcd\u5c0f\u5199\u3002 \u4e0d\u63a8\u8350\uff1a MATCH (v:basketballTeam) \\ RETURN v; \u63a8\u8350\uff1a MATCH (v:basketball_team) \\ RETURN v; \u8bed\u6cd5\u5173\u952e\u8bcd\u5927\u5199\uff0c\u53d8\u91cf\u5c0f\u5199\u3002 \u4e0d\u63a8\u8350\uff1a match (V:player) return V limit 5; \u63a8\u8350\uff1a MATCH (v:player) RETURN v LIMIT 5; Pattern \u00b6 \u5206\u884c\u5199 Pattern \u65f6\uff0c\u5728\u8868\u793a\u8fb9\u7684\u7bad\u5934\u53f3\u4fa7\u6362\u884c\uff0c\u800c\u4e0d\u662f\u5de6\u4fa7\u3002 \u4e0d\u63a8\u8350\uff1a MATCH (v:player{name: \"Tim Duncan\", age: 42}) \\ -[e:follow]->()-[e2:serve]->()<--(v2) \\ RETURN v, e, v2; \u63a8\u8350\uff1a MATCH (v:player{name: \"Tim Duncan\", age: 42})-[e:follow]-> \\ ()-[e2:serve]->()<--(v2) \\ RETURN v, e, v2; \u5c06\u65e0\u9700\u67e5\u8be2\u7684\u70b9\u548c\u8fb9\u533f\u540d\u5316\u3002 \u4e0d\u63a8\u8350\uff1a MATCH (v:player)-[e:follow]->(v2) \\ RETURN v; \u63a8\u8350\uff1a MATCH (v:player)-[:follow]->() \\ RETURN v; \u5c06\u975e\u533f\u540d\u70b9\u653e\u5728\u533f\u540d\u70b9\u7684\u524d\u9762\u3002 \u4e0d\u63a8\u8350\uff1a MATCH ()-[:follow]->(v) \\ RETURN v; \u63a8\u8350\uff1a MATCH (v)<-[:follow]-() \\ RETURN v; \u5b57\u7b26\u4e32 \u00b6 \u5b57\u7b26\u4e32\u7528\u53cc\u5f15\u53f7\u5305\u56f4\u3002 \u4e0d\u63a8\u8350\uff1a RETURN 'Hello Nebula!'; \u63a8\u8350\uff1a RETURN \"Hello Nebula!\\\"123\\\"\"; Note \u5b57\u7b26\u4e32\u4e2d\u9700\u8981\u5d4c\u5957\u5355\u5f15\u53f7\u6216\u53cc\u5f15\u53f7\u65f6\uff0c\u7528\u53cd\u659c\u7ebf\uff08\\\uff09\u8f6c\u4e49\u3002\u4f8b\u5982\uff1a RETURN \"\\\"The database is amazing,\\\" the user says.\"; \u7ed3\u675f\u8bed\u53e5 \u00b6 \u7528\u82f1\u6587\u5206\u53f7\uff08;\uff09\u7ed3\u675f nGQL \u8bed\u53e5\u3002 \u4e0d\u63a8\u8350\uff1a FETCH PROP ON player \"player100\" YIELD properties(vertex) \u63a8\u8350\uff1a FETCH PROP ON player \"player100\" YIELD properties(vertex); \u4f7f\u7528\u7ba1\u9053\u7b26\uff08|\uff09\u5206\u9694\u7684\u590d\u5408\u8bed\u53e5\uff0c\u4ec5\u5728\u6700\u540e\u4e00\u884c\u672b\u7528\u82f1\u6587\u5206\u53f7\u7ed3\u5c3e\u3002\u5728\u7ba1\u9053\u7b26\u524d\u4f7f\u7528\u82f1\u6587\u5206\u53f7\u4f1a\u5bfc\u81f4\u8bed\u53e5\u6267\u884c\u5931\u8d25\u3002 \u4e0d\u652f\u6301\uff1a GO FROM \"player100\" \\ OVER follow \\ YIELD dst(edge) AS id; | \\ GO FROM $-.id \\ OVER serve \\ YIELD properties($$).name AS Team, properties($^).name AS Player; \u652f\u6301\uff1a GO FROM \"player100\" \\ OVER follow \\ YIELD dst(edge) AS id | \\ GO FROM $-.id \\ OVER serve \\ YIELD properties($$).name AS Team, properties($^).name AS Player; \u5728\u5305\u542b\u81ea\u5b9a\u4e49\u53d8\u91cf\u7684\u590d\u5408\u8bed\u53e5\u4e2d\uff0c\u7528\u82f1\u6587\u5206\u53f7\u7ed3\u675f\u5b9a\u4e49\u53d8\u91cf\u7684\u8bed\u53e5\u3002\u4e0d\u6309\u89c4\u5219\u52a0\u5206\u53f7\u6216\u4f7f\u7528\u7ba1\u9053\u7b26\u7ed3\u675f\u8be5\u8bed\u53e5\u4f1a\u5bfc\u81f4\u6267\u884c\u5931\u8d25\u3002 \u4e0d\u652f\u6301\uff1a $var = GO FROM \"player100\" \\ OVER follow \\ YIELD dst(edge) AS id \\ GO FROM $var.id \\ OVER serve \\ YIELD properties($$).name AS Team, properties($^).name AS Player; \u4e5f\u4e0d\u652f\u6301\uff1a $var = GO FROM \"player100\" \\ OVER follow \\ YIELD dst(edge) AS id | \\ GO FROM $var.id \\ OVER serve \\ YIELD properties($$).name AS Team, properties($^).name AS Player; \u652f\u6301\uff1a $var = GO FROM \"player100\" \\ OVER follow \\ YIELD dst(edge) AS id; \\ GO FROM $var.id \\ OVER serve \\ YIELD properties($$).name AS Team, properties($^).name AS Player;","title":"nGQL \u98ce\u683c\u6307\u5357"},{"location":"3.ngql-guide/1.nGQL-overview/ngql-style-guide/#ngql","text":"nGQL \u6ca1\u6709\u4e25\u683c\u7684\u6784\u5efa\u683c\u5f0f\u8981\u6c42\uff0c\u4f46\u6839\u636e\u6070\u5f53\u800c\u7edf\u4e00\u7684\u98ce\u683c\u521b\u5efa nGQL \u8bed\u53e5\u6709\u5229\u4e8e\u63d0\u9ad8\u53ef\u8bfb\u6027\u3001\u907f\u514d\u6b67\u4e49\u3002\u5728\u540c\u4e00\u7ec4\u7ec7\u6216\u9879\u76ee\u4e2d\u4f7f\u7528\u76f8\u540c\u7684 nGQL \u98ce\u683c\u6709\u5229\u4e8e\u964d\u4f4e\u7ef4\u62a4\u6210\u672c\uff0c\u89c4\u907f\u56e0\u683c\u5f0f\u6df7\u4e71\u6216\u8bef\u89e3\u9020\u6210\u7684\u95ee\u9898\u3002\u672c\u6587\u4e3a\u5199\u4f5c nGQL \u8bed\u53e5\u63d0\u4f9b\u4e86\u98ce\u683c\u53c2\u8003\u3002 Compatibility nGQL \u98ce\u683c\u4e0e Cypher Style Guide \u4e0d\u540c\u3002","title":"nGQL \u98ce\u683c\u6307\u5357"},{"location":"3.ngql-guide/1.nGQL-overview/ngql-style-guide/#_1","text":"\u6362\u884c\u5199\u5b50\u53e5\u3002 \u4e0d\u63a8\u8350\uff1a GO FROM \"player100\" OVER follow REVERSELY YIELD src(edge) AS id; \u63a8\u8350\uff1a GO FROM \"player100\" \\ OVER follow REVERSELY \\ YIELD src(edge) AS id; \u6362\u884c\u5199\u590d\u5408\u8bed\u53e5\u4e2d\u7684\u4e0d\u540c\u8bed\u53e5\u3002 \u4e0d\u63a8\u8350\uff1a GO FROM \"player100\" OVER follow REVERSELY YIELD src(edge) AS id | GO FROM $-.id \\ OVER serve WHERE properties($^).age > 20 YIELD properties($^).name AS FriendOf, properties($$).name AS Team; \u63a8\u8350\uff1a GO FROM \"player100\" \\ OVER follow REVERSELY \\ YIELD src(edge) AS id | \\ GO FROM $-.id OVER serve \\ WHERE properties($^).age > 20 \\ YIELD properties($^).name AS FriendOf, properties($$).name AS Team; \u5b50\u53e5\u957f\u5ea6\u8d85\u8fc7 80 \u4e2a\u5b57\u7b26\u65f6\uff0c\u5728\u5408\u9002\u7684\u4f4d\u7f6e\u6362\u884c\u3002 \u4e0d\u63a8\u8350\uff1a MATCH (v:player{name:\"Tim Duncan\"})-[e]->(v2) \\ WHERE (v2.player.name STARTS WITH \"Y\" AND v2.player.age > 35 AND v2.player.age < v.player.age) OR (v2.player.name STARTS WITH \"T\" AND v2.player.age < 45 AND v2.player.age > v.player.age) \\ RETURN v2; \u63a8\u8350\uff1a MATCH (v:player{name:\"Tim Duncan\"})-[e]->(v2) \\ WHERE (v2.player.name STARTS WITH \"Y\" AND v2.player.age > 35 AND v2.player.age < v.player.age) \\ OR (v2.player.name STARTS WITH \"T\" AND v2.player.age < 45 AND v2.player.age > v.player.age) \\ RETURN v2; Note \u5373\u4f7f\u5b50\u53e5\u4e0d\u8d85\u8fc7 80 \u4e2a\u5b57\u7b26\uff0c\u5982\u9700\u6362\u884c\u540e\u6709\u52a9\u4e8e\u7406\u89e3\uff0c\u4e5f\u53ef\u5c06\u5b50\u53e5\u518d\u6b21\u5206\u884c\u3002","title":"\u6362\u884c"},{"location":"3.ngql-guide/1.nGQL-overview/ngql-style-guide/#_2","text":"\u5728 nGQL \u8bed\u53e5\u4e2d\uff0c\u5173\u952e\u5b57\u3001\u6807\u70b9\u7b26\u53f7\u3001\u7a7a\u683c\u4ee5\u5916\u7684\u5b57\u7b26\u5185\u5bb9\u90fd\u662f\u6807\u8bc6\u7b26\u3002\u63a8\u8350\u7684\u6807\u8bc6\u7b26\u547d\u540d\u65b9\u5f0f\u5982\u4e0b\u3002 \u4f7f\u7528\u5355\u6570\u540d\u8bcd\u547d\u540d Tag\uff0c\u7528\u539f\u578b\u52a8\u8bcd\u6216\u52a8\u8bcd\u77ed\u8bed\u6784\u6210 Edge type\u3002 \u4e0d\u63a8\u8350\uff1a MATCH p=(v:players)-[e:are_following]-(v2) \\ RETURN nodes(p); \u63a8\u8350\uff1a MATCH p=(v:player)-[e:follow]-(v2) \\ RETURN nodes(p); \u6807\u8bc6\u7b26\u7528\u86c7\u5f62\u547d\u540d\u6cd5\uff0c\u4ee5\u4e0b\u5212\u7ebf\uff08_\uff09\u8fde\u63a5\u5355\u8bcd\uff0c\u4e14\u6240\u6709\u5b57\u6bcd\u5c0f\u5199\u3002 \u4e0d\u63a8\u8350\uff1a MATCH (v:basketballTeam) \\ RETURN v; \u63a8\u8350\uff1a MATCH (v:basketball_team) \\ RETURN v; \u8bed\u6cd5\u5173\u952e\u8bcd\u5927\u5199\uff0c\u53d8\u91cf\u5c0f\u5199\u3002 \u4e0d\u63a8\u8350\uff1a match (V:player) return V limit 5; \u63a8\u8350\uff1a MATCH (v:player) RETURN v LIMIT 5;","title":"\u6807\u8bc6\u7b26\u547d\u540d"},{"location":"3.ngql-guide/1.nGQL-overview/ngql-style-guide/#pattern","text":"\u5206\u884c\u5199 Pattern \u65f6\uff0c\u5728\u8868\u793a\u8fb9\u7684\u7bad\u5934\u53f3\u4fa7\u6362\u884c\uff0c\u800c\u4e0d\u662f\u5de6\u4fa7\u3002 \u4e0d\u63a8\u8350\uff1a MATCH (v:player{name: \"Tim Duncan\", age: 42}) \\ -[e:follow]->()-[e2:serve]->()<--(v2) \\ RETURN v, e, v2; \u63a8\u8350\uff1a MATCH (v:player{name: \"Tim Duncan\", age: 42})-[e:follow]-> \\ ()-[e2:serve]->()<--(v2) \\ RETURN v, e, v2; \u5c06\u65e0\u9700\u67e5\u8be2\u7684\u70b9\u548c\u8fb9\u533f\u540d\u5316\u3002 \u4e0d\u63a8\u8350\uff1a MATCH (v:player)-[e:follow]->(v2) \\ RETURN v; \u63a8\u8350\uff1a MATCH (v:player)-[:follow]->() \\ RETURN v; \u5c06\u975e\u533f\u540d\u70b9\u653e\u5728\u533f\u540d\u70b9\u7684\u524d\u9762\u3002 \u4e0d\u63a8\u8350\uff1a MATCH ()-[:follow]->(v) \\ RETURN v; \u63a8\u8350\uff1a MATCH (v)<-[:follow]-() \\ RETURN v;","title":"Pattern"},{"location":"3.ngql-guide/1.nGQL-overview/ngql-style-guide/#_3","text":"\u5b57\u7b26\u4e32\u7528\u53cc\u5f15\u53f7\u5305\u56f4\u3002 \u4e0d\u63a8\u8350\uff1a RETURN 'Hello Nebula!'; \u63a8\u8350\uff1a RETURN \"Hello Nebula!\\\"123\\\"\"; Note \u5b57\u7b26\u4e32\u4e2d\u9700\u8981\u5d4c\u5957\u5355\u5f15\u53f7\u6216\u53cc\u5f15\u53f7\u65f6\uff0c\u7528\u53cd\u659c\u7ebf\uff08\\\uff09\u8f6c\u4e49\u3002\u4f8b\u5982\uff1a RETURN \"\\\"The database is amazing,\\\" the user says.\";","title":"\u5b57\u7b26\u4e32"},{"location":"3.ngql-guide/1.nGQL-overview/ngql-style-guide/#_4","text":"\u7528\u82f1\u6587\u5206\u53f7\uff08;\uff09\u7ed3\u675f nGQL \u8bed\u53e5\u3002 \u4e0d\u63a8\u8350\uff1a FETCH PROP ON player \"player100\" YIELD properties(vertex) \u63a8\u8350\uff1a FETCH PROP ON player \"player100\" YIELD properties(vertex); \u4f7f\u7528\u7ba1\u9053\u7b26\uff08|\uff09\u5206\u9694\u7684\u590d\u5408\u8bed\u53e5\uff0c\u4ec5\u5728\u6700\u540e\u4e00\u884c\u672b\u7528\u82f1\u6587\u5206\u53f7\u7ed3\u5c3e\u3002\u5728\u7ba1\u9053\u7b26\u524d\u4f7f\u7528\u82f1\u6587\u5206\u53f7\u4f1a\u5bfc\u81f4\u8bed\u53e5\u6267\u884c\u5931\u8d25\u3002 \u4e0d\u652f\u6301\uff1a GO FROM \"player100\" \\ OVER follow \\ YIELD dst(edge) AS id; | \\ GO FROM $-.id \\ OVER serve \\ YIELD properties($$).name AS Team, properties($^).name AS Player; \u652f\u6301\uff1a GO FROM \"player100\" \\ OVER follow \\ YIELD dst(edge) AS id | \\ GO FROM $-.id \\ OVER serve \\ YIELD properties($$).name AS Team, properties($^).name AS Player; \u5728\u5305\u542b\u81ea\u5b9a\u4e49\u53d8\u91cf\u7684\u590d\u5408\u8bed\u53e5\u4e2d\uff0c\u7528\u82f1\u6587\u5206\u53f7\u7ed3\u675f\u5b9a\u4e49\u53d8\u91cf\u7684\u8bed\u53e5\u3002\u4e0d\u6309\u89c4\u5219\u52a0\u5206\u53f7\u6216\u4f7f\u7528\u7ba1\u9053\u7b26\u7ed3\u675f\u8be5\u8bed\u53e5\u4f1a\u5bfc\u81f4\u6267\u884c\u5931\u8d25\u3002 \u4e0d\u652f\u6301\uff1a $var = GO FROM \"player100\" \\ OVER follow \\ YIELD dst(edge) AS id \\ GO FROM $var.id \\ OVER serve \\ YIELD properties($$).name AS Team, properties($^).name AS Player; \u4e5f\u4e0d\u652f\u6301\uff1a $var = GO FROM \"player100\" \\ OVER follow \\ YIELD dst(edge) AS id | \\ GO FROM $var.id \\ OVER serve \\ YIELD properties($$).name AS Team, properties($^).name AS Player; \u652f\u6301\uff1a $var = GO FROM \"player100\" \\ OVER follow \\ YIELD dst(edge) AS id; \\ GO FROM $var.id \\ OVER serve \\ YIELD properties($$).name AS Team, properties($^).name AS Player;","title":"\u7ed3\u675f\u8bed\u53e5"},{"location":"3.ngql-guide/10.tag-statements/1.create-tag/","text":"CREATE TAG \u00b6 CREATE TAG \u8bed\u53e5\u53ef\u4ee5\u901a\u8fc7\u6307\u5b9a\u540d\u79f0\u521b\u5efa\u4e00\u4e2a Tag\u3002 OpenCypher \u517c\u5bb9\u6027 \u00b6 nGQL \u4e2d\u7684 Tag \u548c openCypher \u4e2d\u7684 Label \u76f8\u4f3c\uff0c\u4f46\u53c8\u6709\u6240\u4e0d\u540c\uff0c\u4f8b\u5982\u5b83\u4eec\u7684\u521b\u5efa\u65b9\u5f0f\u3002 openCypher \u4e2d\u7684 Label \u9700\u8981\u5728 CREATE \u8bed\u53e5\u4e2d\u4e0e\u70b9\u4e00\u8d77\u521b\u5efa\u3002 nGQL \u4e2d\u7684 Tag \u9700\u8981\u4f7f\u7528 CREATE TAG \u8bed\u53e5\u72ec\u7acb\u521b\u5efa\u3002Tag \u66f4\u50cf\u662f MySQL \u4e2d\u7684\u8868\u3002 \u524d\u63d0\u6761\u4ef6 \u00b6 \u6267\u884c CREATE TAG \u8bed\u53e5\u9700\u8981\u5f53\u524d\u767b\u5f55\u7684\u7528\u6237\u62e5\u6709\u6307\u5b9a\u56fe\u7a7a\u95f4\u7684 \u521b\u5efa Tag \u6743\u9650 \uff0c\u5426\u5219\u4f1a\u62a5\u9519\u3002 \u8bed\u6cd5 \u00b6 \u521b\u5efa Tag \u524d\uff0c\u9700\u8981\u5148\u7528 USE \u8bed\u53e5\u6307\u5b9a\u5de5\u4f5c\u7a7a\u95f4\u3002 CREATE TAG [IF NOT EXISTS] <tag_name> ( <prop_name> <data_type> [NULL | NOT NULL] [DEFAULT <default_value>] [COMMENT '<comment>'] [{, <prop_name> <data_type> [NULL | NOT NULL] [DEFAULT <default_value>] [COMMENT '<comment>']} ...] ) [TTL_DURATION = <ttl_duration>] [TTL_COL = <prop_name>] [COMMENT = '<comment>']; \u53c2\u6570 \u8bf4\u660e IF NOT EXISTS \u68c0\u6d4b\u5f85\u521b\u5efa\u7684 Tag \u662f\u5426\u5b58\u5728\uff0c\u53ea\u6709\u4e0d\u5b58\u5728\u65f6\uff0c\u624d\u4f1a\u521b\u5efa Tag\u3002\u4ec5\u68c0\u6d4b Tag \u7684\u540d\u79f0\uff0c\u4e0d\u4f1a\u68c0\u6d4b\u5177\u4f53\u5c5e\u6027\u3002 <tag_name> 1\u3001\u6bcf\u4e2a\u56fe\u7a7a\u95f4\u5185\u7684 Tag \u5fc5\u987b\u662f\u552f\u4e00\u7684\u3002 2\u3001Tag \u540d\u79f0\u8bbe\u7f6e\u540e\u65e0\u6cd5\u4fee\u6539\u3002 3\u3001\u4e0d\u80fd\u4ee5\u6570\u5b57\u5f00\u5934\uff1b\u652f\u6301 1~4 \u5b57\u8282\u7684 UTF-8 \u7f16\u7801\u5b57\u7b26\uff0c\u5305\u62ec\u82f1\u6587\u5b57\u6bcd\uff08\u533a\u5206\u5927\u5c0f\u5199\uff09\u3001\u6570\u5b57\u3001\u4e2d\u6587\u7b49\uff0c\u4f46\u662f\u4e0d\u5305\u62ec\u9664\u4e0b\u5212\u7ebf\u5916\u7684\u7279\u6b8a\u5b57\u7b26\uff1b\u4f7f\u7528\u7279\u6b8a\u5b57\u7b26\u3001\u4fdd\u7559\u5173\u952e\u5b57\u6216\u6570\u5b57\u5f00\u5934\u65f6\uff0c\u9700\u8981\u7528\u53cd\u5f15\u53f7\uff08`\uff09\u5305\u56f4\u4e14\u4e0d\u80fd\u4f7f\u7528\u82f1\u6587\u53e5\u53f7\uff08 . \uff09\u3002\u8be6\u60c5\u53c2\u89c1 \u5173\u952e\u5b57\u548c\u4fdd\u7559\u5b57 \u3002 \u6ce8\u610f \uff1a\u5982\u679c\u4ee5\u4e2d\u6587\u547d\u540d Tag\uff0c\u62a5 SyntaxError \u9519\u8bef\u65f6\uff0c\u9700\u4f7f\u7528\u53cd\u5f15\u53f7\uff08`\uff09\u5305\u56f4\u4e2d\u6587\u5b57\u7b26\u3002 <prop_name> \u5c5e\u6027\u540d\u79f0\u3002\u6bcf\u4e2a Tag \u4e2d\u7684\u5c5e\u6027\u540d\u79f0\u5fc5\u987b\u552f\u4e00\u3002\u5c5e\u6027\u7684\u547d\u540d\u89c4\u5219\u4e0e Tag \u76f8\u540c\u3002 <data_type> \u5c5e\u6027\u7684\u6570\u636e\u7c7b\u578b\uff0c\u76ee\u524d\u652f\u6301 \u6570\u503c \u3001 \u5e03\u5c14 \u3001 \u5b57\u7b26\u4e32 \u4ee5\u53ca \u65e5\u671f\u4e0e\u65f6\u95f4 \u3002 NULL \\| NOT NULL \u6307\u5b9a\u5c5e\u6027\u503c\u662f\u5426\u652f\u6301\u4e3a NULL \u3002\u9ed8\u8ba4\u503c\u4e3a NULL \u3002\u6307\u5b9a NOT NULL \u4e14\u6ca1\u6709\u6307\u5b9a DEFAULT \u503c\u65f6\uff0c\u63d2\u5165\u6570\u636e\u5fc5\u987b\u6307\u5b9a\u503c\uff1b\u540c\u65f6\u6307\u5b9a NOT NULL \u548c DEFAULT \u503c\u65f6\uff0c\u63d2\u5165\u6570\u636e\u5982\u679c\u6ca1\u6709\u6307\u5b9a\u503c\uff0c\u5219\u9ed8\u8ba4\u63d2\u5165 DEFAULT \u503c\u3002 DEFAULT \u6307\u5b9a\u5c5e\u6027\u7684\u9ed8\u8ba4\u503c\u3002\u9ed8\u8ba4\u503c\u53ef\u4ee5\u662f\u4e00\u4e2a\u6587\u5b57\u503c\u6216NebulaGraph\u652f\u6301\u7684\u8868\u8fbe\u5f0f\u3002\u5982\u679c\u63d2\u5165\u70b9\u65f6\u6ca1\u6709\u6307\u5b9a\u67d0\u4e2a\u5c5e\u6027\u7684\u503c\uff0c\u5219\u4f7f\u7528\u9ed8\u8ba4\u503c\u3002 COMMENT \u5bf9\u5355\u4e2a\u5c5e\u6027\u6216 Tag \u7684\u63cf\u8ff0\u3002\u6700\u5927\u4e3a 256 \u5b57\u8282\u3002\u9ed8\u8ba4\u65e0\u63cf\u8ff0\u3002 TTL_DURATION \u6307\u5b9a\u65f6\u95f4\u6233\u5dee\u503c\uff0c\u5355\u4f4d\uff1a\u79d2\u3002\u65f6\u95f4\u6233\u5dee\u503c\u5fc5\u987b\u4e3a 64 \u4f4d\u975e\u8d1f\u6574\u6570\u3002\u5c5e\u6027\u503c\u548c\u65f6\u95f4\u6233\u5dee\u503c\u4e4b\u548c\u5982\u679c\u5c0f\u4e8e\u5f53\u524d\u65f6\u95f4\u6233\uff0c\u5c5e\u6027\u5c31\u4f1a\u8fc7\u671f\u3002\u9ed8\u8ba4\u503c\u4e3a 0 \uff0c\u8868\u793a\u5c5e\u6027\u6c38\u4e0d\u8fc7\u671f\u3002 TTL_COL \u6307\u5b9a\u8981\u8bbe\u7f6e\u5b58\u6d3b\u65f6\u95f4\u7684\u5c5e\u6027\u3002\u5c5e\u6027\u7684\u6570\u636e\u7c7b\u578b\u5fc5\u987b\u662f int \u6216\u8005 timestamp \u3002\u4e00\u4e2a Tag \u53ea\u80fd\u6307\u5b9a\u4e00\u4e2a\u5b57\u6bb5\u4e3a TTL_COL \u3002\u66f4\u591a TTL \u7684\u4fe1\u606f\u8bf7\u53c2\u89c1 TTL \u3002 \u793a\u4f8b \u00b6 nebula> CREATE TAG IF NOT EXISTS player(name string, age int); # \u521b\u5efa\u6ca1\u6709\u5c5e\u6027\u7684 Tag\u3002 nebula> CREATE TAG IF NOT EXISTS no_property(); # \u521b\u5efa\u5305\u542b\u9ed8\u8ba4\u503c\u7684 Tag\u3002 nebula> CREATE TAG IF NOT EXISTS player_with_default(name string, age int DEFAULT 20); # \u5bf9\u5b57\u6bb5 create_time \u8bbe\u7f6e TTL \u4e3a 100 \u79d2\u3002 nebula> CREATE TAG IF NOT EXISTS woman(name string, age int, \\ married bool, salary double, create_time timestamp) \\ TTL_DURATION = 100, TTL_COL = \"create_time\"; \u521b\u5efa Tag \u8bf4\u660e \u00b6 \u5c1d\u8bd5\u4f7f\u7528\u65b0\u521b\u5efa\u7684 Tag \u53ef\u80fd\u4f1a\u5931\u8d25\uff0c\u56e0\u4e3a\u521b\u5efa\u662f\u5f02\u6b65\u5b9e\u73b0\u7684\u3002\u4e3a\u786e\u4fdd\u6570\u636e\u540c\u6b65\uff0c\u540e\u7eed\u64cd\u4f5c\u80fd\u987a\u5229\u8fdb\u884c\uff0c\u8bf7\u7b49\u5f85 2 \u4e2a\u5fc3\u8df3\u5468\u671f\uff0820 \u79d2\uff09\u3002 \u5982\u679c\u9700\u8981\u4fee\u6539\u5fc3\u8df3\u95f4\u9694\uff0c\u8bf7\u4e3a \u6240\u6709\u914d\u7f6e\u6587\u4ef6 \u4fee\u6539\u53c2\u6570 heartbeat_interval_secs \u3002","title":"CREATE TAG"},{"location":"3.ngql-guide/10.tag-statements/1.create-tag/#create_tag","text":"CREATE TAG \u8bed\u53e5\u53ef\u4ee5\u901a\u8fc7\u6307\u5b9a\u540d\u79f0\u521b\u5efa\u4e00\u4e2a Tag\u3002","title":"CREATE TAG"},{"location":"3.ngql-guide/10.tag-statements/1.create-tag/#opencypher","text":"nGQL \u4e2d\u7684 Tag \u548c openCypher \u4e2d\u7684 Label \u76f8\u4f3c\uff0c\u4f46\u53c8\u6709\u6240\u4e0d\u540c\uff0c\u4f8b\u5982\u5b83\u4eec\u7684\u521b\u5efa\u65b9\u5f0f\u3002 openCypher \u4e2d\u7684 Label \u9700\u8981\u5728 CREATE \u8bed\u53e5\u4e2d\u4e0e\u70b9\u4e00\u8d77\u521b\u5efa\u3002 nGQL \u4e2d\u7684 Tag \u9700\u8981\u4f7f\u7528 CREATE TAG \u8bed\u53e5\u72ec\u7acb\u521b\u5efa\u3002Tag \u66f4\u50cf\u662f MySQL \u4e2d\u7684\u8868\u3002","title":"OpenCypher \u517c\u5bb9\u6027"},{"location":"3.ngql-guide/10.tag-statements/1.create-tag/#_1","text":"\u6267\u884c CREATE TAG \u8bed\u53e5\u9700\u8981\u5f53\u524d\u767b\u5f55\u7684\u7528\u6237\u62e5\u6709\u6307\u5b9a\u56fe\u7a7a\u95f4\u7684 \u521b\u5efa Tag \u6743\u9650 \uff0c\u5426\u5219\u4f1a\u62a5\u9519\u3002","title":"\u524d\u63d0\u6761\u4ef6"},{"location":"3.ngql-guide/10.tag-statements/1.create-tag/#_2","text":"\u521b\u5efa Tag \u524d\uff0c\u9700\u8981\u5148\u7528 USE \u8bed\u53e5\u6307\u5b9a\u5de5\u4f5c\u7a7a\u95f4\u3002 CREATE TAG [IF NOT EXISTS] <tag_name> ( <prop_name> <data_type> [NULL | NOT NULL] [DEFAULT <default_value>] [COMMENT '<comment>'] [{, <prop_name> <data_type> [NULL | NOT NULL] [DEFAULT <default_value>] [COMMENT '<comment>']} ...] ) [TTL_DURATION = <ttl_duration>] [TTL_COL = <prop_name>] [COMMENT = '<comment>']; \u53c2\u6570 \u8bf4\u660e IF NOT EXISTS \u68c0\u6d4b\u5f85\u521b\u5efa\u7684 Tag \u662f\u5426\u5b58\u5728\uff0c\u53ea\u6709\u4e0d\u5b58\u5728\u65f6\uff0c\u624d\u4f1a\u521b\u5efa Tag\u3002\u4ec5\u68c0\u6d4b Tag \u7684\u540d\u79f0\uff0c\u4e0d\u4f1a\u68c0\u6d4b\u5177\u4f53\u5c5e\u6027\u3002 <tag_name> 1\u3001\u6bcf\u4e2a\u56fe\u7a7a\u95f4\u5185\u7684 Tag \u5fc5\u987b\u662f\u552f\u4e00\u7684\u3002 2\u3001Tag \u540d\u79f0\u8bbe\u7f6e\u540e\u65e0\u6cd5\u4fee\u6539\u3002 3\u3001\u4e0d\u80fd\u4ee5\u6570\u5b57\u5f00\u5934\uff1b\u652f\u6301 1~4 \u5b57\u8282\u7684 UTF-8 \u7f16\u7801\u5b57\u7b26\uff0c\u5305\u62ec\u82f1\u6587\u5b57\u6bcd\uff08\u533a\u5206\u5927\u5c0f\u5199\uff09\u3001\u6570\u5b57\u3001\u4e2d\u6587\u7b49\uff0c\u4f46\u662f\u4e0d\u5305\u62ec\u9664\u4e0b\u5212\u7ebf\u5916\u7684\u7279\u6b8a\u5b57\u7b26\uff1b\u4f7f\u7528\u7279\u6b8a\u5b57\u7b26\u3001\u4fdd\u7559\u5173\u952e\u5b57\u6216\u6570\u5b57\u5f00\u5934\u65f6\uff0c\u9700\u8981\u7528\u53cd\u5f15\u53f7\uff08`\uff09\u5305\u56f4\u4e14\u4e0d\u80fd\u4f7f\u7528\u82f1\u6587\u53e5\u53f7\uff08 . \uff09\u3002\u8be6\u60c5\u53c2\u89c1 \u5173\u952e\u5b57\u548c\u4fdd\u7559\u5b57 \u3002 \u6ce8\u610f \uff1a\u5982\u679c\u4ee5\u4e2d\u6587\u547d\u540d Tag\uff0c\u62a5 SyntaxError \u9519\u8bef\u65f6\uff0c\u9700\u4f7f\u7528\u53cd\u5f15\u53f7\uff08`\uff09\u5305\u56f4\u4e2d\u6587\u5b57\u7b26\u3002 <prop_name> \u5c5e\u6027\u540d\u79f0\u3002\u6bcf\u4e2a Tag \u4e2d\u7684\u5c5e\u6027\u540d\u79f0\u5fc5\u987b\u552f\u4e00\u3002\u5c5e\u6027\u7684\u547d\u540d\u89c4\u5219\u4e0e Tag \u76f8\u540c\u3002 <data_type> \u5c5e\u6027\u7684\u6570\u636e\u7c7b\u578b\uff0c\u76ee\u524d\u652f\u6301 \u6570\u503c \u3001 \u5e03\u5c14 \u3001 \u5b57\u7b26\u4e32 \u4ee5\u53ca \u65e5\u671f\u4e0e\u65f6\u95f4 \u3002 NULL \\| NOT NULL \u6307\u5b9a\u5c5e\u6027\u503c\u662f\u5426\u652f\u6301\u4e3a NULL \u3002\u9ed8\u8ba4\u503c\u4e3a NULL \u3002\u6307\u5b9a NOT NULL \u4e14\u6ca1\u6709\u6307\u5b9a DEFAULT \u503c\u65f6\uff0c\u63d2\u5165\u6570\u636e\u5fc5\u987b\u6307\u5b9a\u503c\uff1b\u540c\u65f6\u6307\u5b9a NOT NULL \u548c DEFAULT \u503c\u65f6\uff0c\u63d2\u5165\u6570\u636e\u5982\u679c\u6ca1\u6709\u6307\u5b9a\u503c\uff0c\u5219\u9ed8\u8ba4\u63d2\u5165 DEFAULT \u503c\u3002 DEFAULT \u6307\u5b9a\u5c5e\u6027\u7684\u9ed8\u8ba4\u503c\u3002\u9ed8\u8ba4\u503c\u53ef\u4ee5\u662f\u4e00\u4e2a\u6587\u5b57\u503c\u6216NebulaGraph\u652f\u6301\u7684\u8868\u8fbe\u5f0f\u3002\u5982\u679c\u63d2\u5165\u70b9\u65f6\u6ca1\u6709\u6307\u5b9a\u67d0\u4e2a\u5c5e\u6027\u7684\u503c\uff0c\u5219\u4f7f\u7528\u9ed8\u8ba4\u503c\u3002 COMMENT \u5bf9\u5355\u4e2a\u5c5e\u6027\u6216 Tag \u7684\u63cf\u8ff0\u3002\u6700\u5927\u4e3a 256 \u5b57\u8282\u3002\u9ed8\u8ba4\u65e0\u63cf\u8ff0\u3002 TTL_DURATION \u6307\u5b9a\u65f6\u95f4\u6233\u5dee\u503c\uff0c\u5355\u4f4d\uff1a\u79d2\u3002\u65f6\u95f4\u6233\u5dee\u503c\u5fc5\u987b\u4e3a 64 \u4f4d\u975e\u8d1f\u6574\u6570\u3002\u5c5e\u6027\u503c\u548c\u65f6\u95f4\u6233\u5dee\u503c\u4e4b\u548c\u5982\u679c\u5c0f\u4e8e\u5f53\u524d\u65f6\u95f4\u6233\uff0c\u5c5e\u6027\u5c31\u4f1a\u8fc7\u671f\u3002\u9ed8\u8ba4\u503c\u4e3a 0 \uff0c\u8868\u793a\u5c5e\u6027\u6c38\u4e0d\u8fc7\u671f\u3002 TTL_COL \u6307\u5b9a\u8981\u8bbe\u7f6e\u5b58\u6d3b\u65f6\u95f4\u7684\u5c5e\u6027\u3002\u5c5e\u6027\u7684\u6570\u636e\u7c7b\u578b\u5fc5\u987b\u662f int \u6216\u8005 timestamp \u3002\u4e00\u4e2a Tag \u53ea\u80fd\u6307\u5b9a\u4e00\u4e2a\u5b57\u6bb5\u4e3a TTL_COL \u3002\u66f4\u591a TTL \u7684\u4fe1\u606f\u8bf7\u53c2\u89c1 TTL \u3002","title":"\u8bed\u6cd5"},{"location":"3.ngql-guide/10.tag-statements/1.create-tag/#_3","text":"nebula> CREATE TAG IF NOT EXISTS player(name string, age int); # \u521b\u5efa\u6ca1\u6709\u5c5e\u6027\u7684 Tag\u3002 nebula> CREATE TAG IF NOT EXISTS no_property(); # \u521b\u5efa\u5305\u542b\u9ed8\u8ba4\u503c\u7684 Tag\u3002 nebula> CREATE TAG IF NOT EXISTS player_with_default(name string, age int DEFAULT 20); # \u5bf9\u5b57\u6bb5 create_time \u8bbe\u7f6e TTL \u4e3a 100 \u79d2\u3002 nebula> CREATE TAG IF NOT EXISTS woman(name string, age int, \\ married bool, salary double, create_time timestamp) \\ TTL_DURATION = 100, TTL_COL = \"create_time\";","title":"\u793a\u4f8b"},{"location":"3.ngql-guide/10.tag-statements/1.create-tag/#tag","text":"\u5c1d\u8bd5\u4f7f\u7528\u65b0\u521b\u5efa\u7684 Tag \u53ef\u80fd\u4f1a\u5931\u8d25\uff0c\u56e0\u4e3a\u521b\u5efa\u662f\u5f02\u6b65\u5b9e\u73b0\u7684\u3002\u4e3a\u786e\u4fdd\u6570\u636e\u540c\u6b65\uff0c\u540e\u7eed\u64cd\u4f5c\u80fd\u987a\u5229\u8fdb\u884c\uff0c\u8bf7\u7b49\u5f85 2 \u4e2a\u5fc3\u8df3\u5468\u671f\uff0820 \u79d2\uff09\u3002 \u5982\u679c\u9700\u8981\u4fee\u6539\u5fc3\u8df3\u95f4\u9694\uff0c\u8bf7\u4e3a \u6240\u6709\u914d\u7f6e\u6587\u4ef6 \u4fee\u6539\u53c2\u6570 heartbeat_interval_secs \u3002","title":"\u521b\u5efa Tag \u8bf4\u660e"},{"location":"3.ngql-guide/10.tag-statements/2.drop-tag/","text":"DROP TAG \u00b6 DROP TAG \u8bed\u53e5\u53ef\u4ee5\u5220\u9664\u5f53\u524d\u5de5\u4f5c\u7a7a\u95f4\u5185\u6240\u6709\u70b9\u4e0a\u7684\u6307\u5b9a Tag\u3002 \u70b9\u53ef\u4ee5\u6709\u4e00\u4e2a\u6216\u591a\u4e2a Tag\u3002 \u5982\u679c\u67d0\u4e2a\u70b9\u53ea\u6709\u4e00\u4e2a Tag\uff0c\u5220\u9664\u8fd9\u4e2a Tag \u540e\uff0c\u7528\u6237\u5c31 \u65e0\u6cd5\u8bbf\u95ee \u8fd9\u4e2a\u70b9\uff0c\u4e0b\u6b21 Compaction \u64cd\u4f5c\u65f6\u4f1a\u5220\u9664\u8be5\u70b9\uff0c\u4f46\u4e0e\u8be5\u70b9\u76f8\u90bb\u7684 \u8fb9\u4ecd\u7136\u5b58\u5728 \u2014\u2014\u8fd9\u4f1a\u9020\u6210\u60ac\u6302\u8fb9\u3002 \u5982\u679c\u67d0\u4e2a\u70b9\u6709\u591a\u4e2a Tag\uff0c\u5220\u9664\u5176\u4e2d\u4e00\u4e2a Tag\uff0c\u4ecd\u7136\u53ef\u4ee5\u8bbf\u95ee\u8fd9\u4e2a\u70b9\uff0c\u4f46\u662f \u65e0\u6cd5\u8bbf\u95ee \u5df2\u5220\u9664 Tag \u6240\u5b9a\u4e49\u7684\u6240\u6709\u5c5e\u6027\u3002 \u5220\u9664 Tag \u64cd\u4f5c\u4ec5\u5220\u9664 Schema \u6570\u636e\uff0c\u786c\u76d8\u4e0a\u7684\u6587\u4ef6\u6216\u76ee\u5f55\u4e0d\u4f1a\u7acb\u523b\u5220\u9664\uff0c\u800c\u662f\u5728\u4e0b\u4e00\u6b21 Compaction \u64cd\u4f5c\u65f6\u5220\u9664\u3002 Compatibility NebulaGraph 3.6.0 \u4e2d\u9ed8\u8ba4\u4e0d\u652f\u6301\u63d2\u5165\u65e0 Tag \u7684\u70b9\u3002\u5982\u9700\u4f7f\u7528\u65e0 Tag \u7684\u70b9\uff0c\u5728\u96c6\u7fa4\u5185\u6240\u6709 Graph \u670d\u52a1\u7684\u914d\u7f6e\u6587\u4ef6\uff08 nebula-graphd.conf \uff09\u4e2d\u65b0\u589e --graph_use_vertex_key=true \uff1b\u5728\u6240\u6709 Storage \u670d\u52a1\u7684\u914d\u7f6e\u6587\u4ef6\uff08 nebula-storaged.conf \uff09\u4e2d\u65b0\u589e --use_vertex_key=true \u3002 \u524d\u63d0\u6761\u4ef6 \u00b6 \u767b\u5f55\u7684\u7528\u6237\u5fc5\u987b\u62e5\u6709\u5bf9\u5e94\u6743\u9650\u624d\u80fd\u6267\u884c DROP TAG \u8bed\u53e5\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1 \u5185\u7f6e\u89d2\u8272\u6743\u9650 \u3002 \u786e\u4fdd Tag \u4e0d\u5305\u542b\u4efb\u4f55\u7d22\u5f15\uff0c\u5426\u5219 DROP TAG \u65f6\u4f1a\u62a5\u51b2\u7a81\u9519\u8bef [ERROR (-1005)]: Conflict! \u3002\u5220\u9664\u7d22\u5f15\u8bf7\u53c2\u89c1 drop index \u3002 \u8bed\u6cd5 \u00b6 DROP TAG [IF EXISTS] <tag_name>; IF EXISTS \uff1a\u68c0\u6d4b\u5f85\u5220\u9664\u7684 Tag \u662f\u5426\u5b58\u5728\uff0c\u53ea\u6709\u5b58\u5728\u65f6\uff0c\u624d\u4f1a\u5220\u9664 Tag\u3002 tag_name \uff1a\u6307\u5b9a\u8981\u5220\u9664\u7684 Tag \u540d\u79f0\u3002\u4e00\u6b21\u53ea\u80fd\u5220\u9664\u4e00\u4e2a Tag\u3002 \u793a\u4f8b \u00b6 nebula> CREATE TAG IF NOT EXISTS test(p1 string, p2 int); nebula> DROP TAG test;","title":"DROP TAG"},{"location":"3.ngql-guide/10.tag-statements/2.drop-tag/#drop_tag","text":"DROP TAG \u8bed\u53e5\u53ef\u4ee5\u5220\u9664\u5f53\u524d\u5de5\u4f5c\u7a7a\u95f4\u5185\u6240\u6709\u70b9\u4e0a\u7684\u6307\u5b9a Tag\u3002 \u70b9\u53ef\u4ee5\u6709\u4e00\u4e2a\u6216\u591a\u4e2a Tag\u3002 \u5982\u679c\u67d0\u4e2a\u70b9\u53ea\u6709\u4e00\u4e2a Tag\uff0c\u5220\u9664\u8fd9\u4e2a Tag \u540e\uff0c\u7528\u6237\u5c31 \u65e0\u6cd5\u8bbf\u95ee \u8fd9\u4e2a\u70b9\uff0c\u4e0b\u6b21 Compaction \u64cd\u4f5c\u65f6\u4f1a\u5220\u9664\u8be5\u70b9\uff0c\u4f46\u4e0e\u8be5\u70b9\u76f8\u90bb\u7684 \u8fb9\u4ecd\u7136\u5b58\u5728 \u2014\u2014\u8fd9\u4f1a\u9020\u6210\u60ac\u6302\u8fb9\u3002 \u5982\u679c\u67d0\u4e2a\u70b9\u6709\u591a\u4e2a Tag\uff0c\u5220\u9664\u5176\u4e2d\u4e00\u4e2a Tag\uff0c\u4ecd\u7136\u53ef\u4ee5\u8bbf\u95ee\u8fd9\u4e2a\u70b9\uff0c\u4f46\u662f \u65e0\u6cd5\u8bbf\u95ee \u5df2\u5220\u9664 Tag \u6240\u5b9a\u4e49\u7684\u6240\u6709\u5c5e\u6027\u3002 \u5220\u9664 Tag \u64cd\u4f5c\u4ec5\u5220\u9664 Schema \u6570\u636e\uff0c\u786c\u76d8\u4e0a\u7684\u6587\u4ef6\u6216\u76ee\u5f55\u4e0d\u4f1a\u7acb\u523b\u5220\u9664\uff0c\u800c\u662f\u5728\u4e0b\u4e00\u6b21 Compaction \u64cd\u4f5c\u65f6\u5220\u9664\u3002 Compatibility NebulaGraph 3.6.0 \u4e2d\u9ed8\u8ba4\u4e0d\u652f\u6301\u63d2\u5165\u65e0 Tag \u7684\u70b9\u3002\u5982\u9700\u4f7f\u7528\u65e0 Tag \u7684\u70b9\uff0c\u5728\u96c6\u7fa4\u5185\u6240\u6709 Graph \u670d\u52a1\u7684\u914d\u7f6e\u6587\u4ef6\uff08 nebula-graphd.conf \uff09\u4e2d\u65b0\u589e --graph_use_vertex_key=true \uff1b\u5728\u6240\u6709 Storage \u670d\u52a1\u7684\u914d\u7f6e\u6587\u4ef6\uff08 nebula-storaged.conf \uff09\u4e2d\u65b0\u589e --use_vertex_key=true \u3002","title":"DROP TAG"},{"location":"3.ngql-guide/10.tag-statements/2.drop-tag/#_1","text":"\u767b\u5f55\u7684\u7528\u6237\u5fc5\u987b\u62e5\u6709\u5bf9\u5e94\u6743\u9650\u624d\u80fd\u6267\u884c DROP TAG \u8bed\u53e5\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1 \u5185\u7f6e\u89d2\u8272\u6743\u9650 \u3002 \u786e\u4fdd Tag \u4e0d\u5305\u542b\u4efb\u4f55\u7d22\u5f15\uff0c\u5426\u5219 DROP TAG \u65f6\u4f1a\u62a5\u51b2\u7a81\u9519\u8bef [ERROR (-1005)]: Conflict! \u3002\u5220\u9664\u7d22\u5f15\u8bf7\u53c2\u89c1 drop index \u3002","title":"\u524d\u63d0\u6761\u4ef6"},{"location":"3.ngql-guide/10.tag-statements/2.drop-tag/#_2","text":"DROP TAG [IF EXISTS] <tag_name>; IF EXISTS \uff1a\u68c0\u6d4b\u5f85\u5220\u9664\u7684 Tag \u662f\u5426\u5b58\u5728\uff0c\u53ea\u6709\u5b58\u5728\u65f6\uff0c\u624d\u4f1a\u5220\u9664 Tag\u3002 tag_name \uff1a\u6307\u5b9a\u8981\u5220\u9664\u7684 Tag \u540d\u79f0\u3002\u4e00\u6b21\u53ea\u80fd\u5220\u9664\u4e00\u4e2a Tag\u3002","title":"\u8bed\u6cd5"},{"location":"3.ngql-guide/10.tag-statements/2.drop-tag/#_3","text":"nebula> CREATE TAG IF NOT EXISTS test(p1 string, p2 int); nebula> DROP TAG test;","title":"\u793a\u4f8b"},{"location":"3.ngql-guide/10.tag-statements/3.alter-tag/","text":"ALTER TAG \u00b6 ALTER TAG \u8bed\u53e5\u53ef\u4ee5\u4fee\u6539 Tag \u7684\u7ed3\u6784\u3002\u4f8b\u5982\u589e\u5220\u5c5e\u6027\u3001\u4fee\u6539\u6570\u636e\u7c7b\u578b\uff0c\u4e5f\u53ef\u4ee5\u4e3a\u5c5e\u6027\u8bbe\u7f6e\u3001\u4fee\u6539 TTL \uff08Time-To-Live\uff09\u3002 \u6ce8\u610f\u4e8b\u9879 \u00b6 \u767b\u5f55\u7684\u7528\u6237\u5fc5\u987b\u62e5\u6709\u5bf9\u5e94\u6743\u9650\u624d\u80fd\u6267\u884c ALTER TAG \u8bed\u53e5\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1 \u5185\u7f6e\u89d2\u8272\u6743\u9650 \u3002 \u786e\u4fdd\u8981\u4fee\u6539\u7684\u5c5e\u6027\u4e0d\u5305\u542b\u7d22\u5f15\uff0c\u5426\u5219 ALTER TAG \u65f6\u4f1a\u62a5\u51b2\u7a81\u9519\u8bef [ERROR (-1005)]: Conflict! \u3002\u5220\u9664\u7d22\u5f15\u8bf7\u53c2\u89c1 drop index \u3002 \u786e\u4fdd\u65b0\u589e\u7684\u5c5e\u6027\u540d\u4e0d\u4e0e\u5df2\u5b58\u5728\u6216\u88ab\u5220\u9664\u7684\u5c5e\u6027\u540d\u540c\u540d\uff0c\u5426\u5219\u65b0\u589e\u5c5e\u6027\u4f1a\u5931\u8d25\u3002 \u8bed\u6cd5 \u00b6 ALTER TAG <tag_name> <alter_definition> [[, alter_definition] ...] [ttl_definition [, ttl_definition] ... ] [COMMENT = '<comment>']; alter_definition: | ADD (prop_name data_type [NULL | NOT NULL] [DEFAULT <default_value>] [COMMENT '<comment>']) | DROP (prop_name) | CHANGE (prop_name data_type [NULL | NOT NULL] [DEFAULT <default_value>] [COMMENT '<comment>']) ttl_definition: TTL_DURATION = ttl_duration, TTL_COL = prop_name tag_name \uff1a\u6307\u5b9a\u8981\u4fee\u6539\u7684 Tag \u540d\u79f0\u3002\u4e00\u6b21\u53ea\u80fd\u4fee\u6539\u4e00\u4e2a Tag\u3002\u8bf7\u786e\u4fdd\u8981\u4fee\u6539\u7684 Tag \u5728\u5f53\u524d\u5de5\u4f5c\u7a7a\u95f4\u4e2d\u5b58\u5728\uff0c\u5426\u5219\u4f1a\u62a5\u9519\u3002 \u53ef\u4ee5\u5728\u4e00\u4e2a ALTER TAG \u8bed\u53e5\u4e2d\u4f7f\u7528\u591a\u4e2a ADD \u3001 DROP \u548c CHANGE \u5b50\u53e5\uff0c\u5b50\u53e5\u4e4b\u95f4\u7528\u82f1\u6587\u9017\u53f7\uff08,\uff09\u5206\u9694\u3002 \u5f53\u4f7f\u7528 ADD \u6216 CHANGE \u6307\u5b9a\u5c5e\u6027\u503c\u4e3a NOT NULL \u65f6\uff0c\u5fc5\u9700\u4e3a\u8be5\u5c5e\u6027\u6307\u5b9a\u9ed8\u8ba4\u503c\uff0c\u5373\u5b9a\u4e49 DEFAULT \u7684\u503c\u3002 \u5f53\u4f7f\u7528 CHANGE \u4fee\u6539\u5c5e\u6027\u7684\u6570\u636e\u7c7b\u578b\u65f6\uff1a \u4ec5\u5141\u8bb8\u4fee\u6539 FIXED_STRING \u548c INT \u7c7b\u578b\u7684\u957f\u5ea6\u4e3a\u66f4\u5927\u7684\u957f\u5ea6\uff0c\u4e0d\u5141\u8bb8\u51cf\u5c11\u957f\u5ea6\u3002 \u4ec5\u5141\u8bb8\u4fee\u6539 FIXED_STRING \u7c7b\u578b\u4e3a STRING \u7c7b\u578b\u3001\u4fee\u6539 FLOAT \u7c7b\u578b\u4e3a DOUBLE \u7c7b\u578b\u3002 \u793a\u4f8b \u00b6 nebula> CREATE TAG IF NOT EXISTS t1 (p1 string, p2 int); nebula> ALTER TAG t1 ADD (p3 int32, p4 fixed_string(10)); nebula> ALTER TAG t1 TTL_DURATION = 2, TTL_COL = \"p2\"; nebula> ALTER TAG t1 COMMENT = 'test1'; nebula> ALTER TAG t1 ADD (p5 double NOT NULL DEFAULT 0.4 COMMENT 'p5') COMMENT='test2'; // \u5c06 TAG t1 \u7684 p3 \u5c5e\u6027\u7c7b\u578b\u4ece INT32 \u6539\u4e3a INT64\uff0cp4 \u5c5e\u6027\u7c7b\u578b\u4ece FIXED_STRING(10) \u6539\u4e3a STRING\u3002 nebula> ALTER TAG t1 CHANGE (p3 int64, p4 string); \u4fee\u6539 Tag \u8bf4\u660e \u00b6 \u5c1d\u8bd5\u4f7f\u7528\u521a\u4fee\u6539\u7684 Tag \u53ef\u80fd\u4f1a\u5931\u8d25\uff0c\u56e0\u4e3a\u4fee\u6539\u662f\u5f02\u6b65\u5b9e\u73b0\u7684\u3002\u4e3a\u786e\u4fdd\u6570\u636e\u540c\u6b65\uff0c\u540e\u7eed\u64cd\u4f5c\u80fd\u987a\u5229\u8fdb\u884c\uff0c\u8bf7\u7b49\u5f85 2 \u4e2a\u5fc3\u8df3\u5468\u671f\uff0820 \u79d2\uff09\u3002 \u5982\u679c\u9700\u8981\u4fee\u6539\u5fc3\u8df3\u95f4\u9694\uff0c\u8bf7\u4e3a \u6240\u6709\u914d\u7f6e\u6587\u4ef6 \u4fee\u6539\u53c2\u6570 heartbeat_interval_secs \u3002","title":"ALTER TAG"},{"location":"3.ngql-guide/10.tag-statements/3.alter-tag/#alter_tag","text":"ALTER TAG \u8bed\u53e5\u53ef\u4ee5\u4fee\u6539 Tag \u7684\u7ed3\u6784\u3002\u4f8b\u5982\u589e\u5220\u5c5e\u6027\u3001\u4fee\u6539\u6570\u636e\u7c7b\u578b\uff0c\u4e5f\u53ef\u4ee5\u4e3a\u5c5e\u6027\u8bbe\u7f6e\u3001\u4fee\u6539 TTL \uff08Time-To-Live\uff09\u3002","title":"ALTER TAG"},{"location":"3.ngql-guide/10.tag-statements/3.alter-tag/#_1","text":"\u767b\u5f55\u7684\u7528\u6237\u5fc5\u987b\u62e5\u6709\u5bf9\u5e94\u6743\u9650\u624d\u80fd\u6267\u884c ALTER TAG \u8bed\u53e5\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1 \u5185\u7f6e\u89d2\u8272\u6743\u9650 \u3002 \u786e\u4fdd\u8981\u4fee\u6539\u7684\u5c5e\u6027\u4e0d\u5305\u542b\u7d22\u5f15\uff0c\u5426\u5219 ALTER TAG \u65f6\u4f1a\u62a5\u51b2\u7a81\u9519\u8bef [ERROR (-1005)]: Conflict! \u3002\u5220\u9664\u7d22\u5f15\u8bf7\u53c2\u89c1 drop index \u3002 \u786e\u4fdd\u65b0\u589e\u7684\u5c5e\u6027\u540d\u4e0d\u4e0e\u5df2\u5b58\u5728\u6216\u88ab\u5220\u9664\u7684\u5c5e\u6027\u540d\u540c\u540d\uff0c\u5426\u5219\u65b0\u589e\u5c5e\u6027\u4f1a\u5931\u8d25\u3002","title":"\u6ce8\u610f\u4e8b\u9879"},{"location":"3.ngql-guide/10.tag-statements/3.alter-tag/#_2","text":"ALTER TAG <tag_name> <alter_definition> [[, alter_definition] ...] [ttl_definition [, ttl_definition] ... ] [COMMENT = '<comment>']; alter_definition: | ADD (prop_name data_type [NULL | NOT NULL] [DEFAULT <default_value>] [COMMENT '<comment>']) | DROP (prop_name) | CHANGE (prop_name data_type [NULL | NOT NULL] [DEFAULT <default_value>] [COMMENT '<comment>']) ttl_definition: TTL_DURATION = ttl_duration, TTL_COL = prop_name tag_name \uff1a\u6307\u5b9a\u8981\u4fee\u6539\u7684 Tag \u540d\u79f0\u3002\u4e00\u6b21\u53ea\u80fd\u4fee\u6539\u4e00\u4e2a Tag\u3002\u8bf7\u786e\u4fdd\u8981\u4fee\u6539\u7684 Tag \u5728\u5f53\u524d\u5de5\u4f5c\u7a7a\u95f4\u4e2d\u5b58\u5728\uff0c\u5426\u5219\u4f1a\u62a5\u9519\u3002 \u53ef\u4ee5\u5728\u4e00\u4e2a ALTER TAG \u8bed\u53e5\u4e2d\u4f7f\u7528\u591a\u4e2a ADD \u3001 DROP \u548c CHANGE \u5b50\u53e5\uff0c\u5b50\u53e5\u4e4b\u95f4\u7528\u82f1\u6587\u9017\u53f7\uff08,\uff09\u5206\u9694\u3002 \u5f53\u4f7f\u7528 ADD \u6216 CHANGE \u6307\u5b9a\u5c5e\u6027\u503c\u4e3a NOT NULL \u65f6\uff0c\u5fc5\u9700\u4e3a\u8be5\u5c5e\u6027\u6307\u5b9a\u9ed8\u8ba4\u503c\uff0c\u5373\u5b9a\u4e49 DEFAULT \u7684\u503c\u3002 \u5f53\u4f7f\u7528 CHANGE \u4fee\u6539\u5c5e\u6027\u7684\u6570\u636e\u7c7b\u578b\u65f6\uff1a \u4ec5\u5141\u8bb8\u4fee\u6539 FIXED_STRING \u548c INT \u7c7b\u578b\u7684\u957f\u5ea6\u4e3a\u66f4\u5927\u7684\u957f\u5ea6\uff0c\u4e0d\u5141\u8bb8\u51cf\u5c11\u957f\u5ea6\u3002 \u4ec5\u5141\u8bb8\u4fee\u6539 FIXED_STRING \u7c7b\u578b\u4e3a STRING \u7c7b\u578b\u3001\u4fee\u6539 FLOAT \u7c7b\u578b\u4e3a DOUBLE \u7c7b\u578b\u3002","title":"\u8bed\u6cd5"},{"location":"3.ngql-guide/10.tag-statements/3.alter-tag/#_3","text":"nebula> CREATE TAG IF NOT EXISTS t1 (p1 string, p2 int); nebula> ALTER TAG t1 ADD (p3 int32, p4 fixed_string(10)); nebula> ALTER TAG t1 TTL_DURATION = 2, TTL_COL = \"p2\"; nebula> ALTER TAG t1 COMMENT = 'test1'; nebula> ALTER TAG t1 ADD (p5 double NOT NULL DEFAULT 0.4 COMMENT 'p5') COMMENT='test2'; // \u5c06 TAG t1 \u7684 p3 \u5c5e\u6027\u7c7b\u578b\u4ece INT32 \u6539\u4e3a INT64\uff0cp4 \u5c5e\u6027\u7c7b\u578b\u4ece FIXED_STRING(10) \u6539\u4e3a STRING\u3002 nebula> ALTER TAG t1 CHANGE (p3 int64, p4 string);","title":"\u793a\u4f8b"},{"location":"3.ngql-guide/10.tag-statements/3.alter-tag/#tag","text":"\u5c1d\u8bd5\u4f7f\u7528\u521a\u4fee\u6539\u7684 Tag \u53ef\u80fd\u4f1a\u5931\u8d25\uff0c\u56e0\u4e3a\u4fee\u6539\u662f\u5f02\u6b65\u5b9e\u73b0\u7684\u3002\u4e3a\u786e\u4fdd\u6570\u636e\u540c\u6b65\uff0c\u540e\u7eed\u64cd\u4f5c\u80fd\u987a\u5229\u8fdb\u884c\uff0c\u8bf7\u7b49\u5f85 2 \u4e2a\u5fc3\u8df3\u5468\u671f\uff0820 \u79d2\uff09\u3002 \u5982\u679c\u9700\u8981\u4fee\u6539\u5fc3\u8df3\u95f4\u9694\uff0c\u8bf7\u4e3a \u6240\u6709\u914d\u7f6e\u6587\u4ef6 \u4fee\u6539\u53c2\u6570 heartbeat_interval_secs \u3002","title":"\u4fee\u6539 Tag \u8bf4\u660e"},{"location":"3.ngql-guide/10.tag-statements/4.show-tags/","text":"SHOW TAGS \u00b6 SHOW TAGS \u8bed\u53e5\u663e\u793a\u5f53\u524d\u56fe\u7a7a\u95f4\u5185\u7684\u6240\u6709 Tag \u540d\u79f0\u3002 \u6267\u884c SHOW TAGS \u8bed\u53e5\u4e0d\u9700\u8981\u4efb\u4f55\u6743\u9650\uff0c\u4f46\u662f\u8fd4\u56de\u7ed3\u679c\u7531\u767b\u5f55\u7684\u7528\u6237 \u6743\u9650 \u51b3\u5b9a\u3002 \u8bed\u6cd5 \u00b6 SHOW TAGS; \u793a\u4f8b \u00b6 nebula> SHOW TAGS; +----------+ | Name | +----------+ | \"player\" | | \"team\" | +----------+","title":"SHOW TAGS"},{"location":"3.ngql-guide/10.tag-statements/4.show-tags/#show_tags","text":"SHOW TAGS \u8bed\u53e5\u663e\u793a\u5f53\u524d\u56fe\u7a7a\u95f4\u5185\u7684\u6240\u6709 Tag \u540d\u79f0\u3002 \u6267\u884c SHOW TAGS \u8bed\u53e5\u4e0d\u9700\u8981\u4efb\u4f55\u6743\u9650\uff0c\u4f46\u662f\u8fd4\u56de\u7ed3\u679c\u7531\u767b\u5f55\u7684\u7528\u6237 \u6743\u9650 \u51b3\u5b9a\u3002","title":"SHOW TAGS"},{"location":"3.ngql-guide/10.tag-statements/4.show-tags/#_1","text":"SHOW TAGS;","title":"\u8bed\u6cd5"},{"location":"3.ngql-guide/10.tag-statements/4.show-tags/#_2","text":"nebula> SHOW TAGS; +----------+ | Name | +----------+ | \"player\" | | \"team\" | +----------+","title":"\u793a\u4f8b"},{"location":"3.ngql-guide/10.tag-statements/5.describe-tag/","text":"DESCRIBE TAG \u00b6 DESCRIBE TAG \u663e\u793a\u6307\u5b9a Tag \u7684\u8be6\u7ec6\u4fe1\u606f\uff0c\u4f8b\u5982\u5b57\u6bb5\u540d\u79f0\u3001\u6570\u636e\u7c7b\u578b\u7b49\u3002 \u524d\u63d0\u6761\u4ef6 \u00b6 \u767b\u5f55\u7684\u7528\u6237\u5fc5\u987b\u62e5\u6709\u5bf9\u5e94\u6743\u9650\u624d\u80fd\u6267\u884c DESCRIBE TAG \u8bed\u53e5\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1 \u5185\u7f6e\u89d2\u8272\u6743\u9650 \u3002 \u8bed\u6cd5 \u00b6 DESC[RIBE] TAG <tag_name>; DESCRIBE \u53ef\u4ee5\u7f29\u5199\u4e3a DESC \u3002 \u793a\u4f8b \u00b6 nebula> DESCRIBE TAG player; +--------+----------+-------+---------+---------+ | Field | Type | Null | Default | Comment | +--------+----------+-------+---------+---------+ | \"name\" | \"string\" | \"YES\" | | | | \"age\" | \"int64\" | \"YES\" | | | +--------+----------+-------+---------+---------+","title":"DESCRIBE TAG"},{"location":"3.ngql-guide/10.tag-statements/5.describe-tag/#describe_tag","text":"DESCRIBE TAG \u663e\u793a\u6307\u5b9a Tag \u7684\u8be6\u7ec6\u4fe1\u606f\uff0c\u4f8b\u5982\u5b57\u6bb5\u540d\u79f0\u3001\u6570\u636e\u7c7b\u578b\u7b49\u3002","title":"DESCRIBE TAG"},{"location":"3.ngql-guide/10.tag-statements/5.describe-tag/#_1","text":"\u767b\u5f55\u7684\u7528\u6237\u5fc5\u987b\u62e5\u6709\u5bf9\u5e94\u6743\u9650\u624d\u80fd\u6267\u884c DESCRIBE TAG \u8bed\u53e5\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1 \u5185\u7f6e\u89d2\u8272\u6743\u9650 \u3002","title":"\u524d\u63d0\u6761\u4ef6"},{"location":"3.ngql-guide/10.tag-statements/5.describe-tag/#_2","text":"DESC[RIBE] TAG <tag_name>; DESCRIBE \u53ef\u4ee5\u7f29\u5199\u4e3a DESC \u3002","title":"\u8bed\u6cd5"},{"location":"3.ngql-guide/10.tag-statements/5.describe-tag/#_3","text":"nebula> DESCRIBE TAG player; +--------+----------+-------+---------+---------+ | Field | Type | Null | Default | Comment | +--------+----------+-------+---------+---------+ | \"name\" | \"string\" | \"YES\" | | | | \"age\" | \"int64\" | \"YES\" | | | +--------+----------+-------+---------+---------+","title":"\u793a\u4f8b"},{"location":"3.ngql-guide/10.tag-statements/6.delete-tag/","text":"DELETE TAG \u00b6 DELETE TAG \u8bed\u53e5\u53ef\u4ee5\u5220\u9664\u6307\u5b9a\u70b9\u4e0a\u7684\u6307\u5b9a Tag\u3002 \u524d\u63d0\u6761\u4ef6 \u00b6 \u767b\u5f55\u7684\u7528\u6237\u5fc5\u987b\u62e5\u6709\u5bf9\u5e94\u6743\u9650\u624d\u80fd\u6267\u884c DELETE TAG \u8bed\u53e5\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1 \u5185\u7f6e\u89d2\u8272\u6743\u9650 \u3002 \u8bed\u6cd5 \u00b6 DELETE TAG <tag_name_list> FROM <VID_list>; tag_name_list \uff1a\u6307\u5b9a Tag \u540d\u79f0\u3002\u591a\u4e2a Tag \u7528\u82f1\u6587\u9017\u53f7\uff08,\uff09\u5206\u9694\uff0c\u4e5f\u53ef\u4ee5\u7528 * \u8868\u793a\u6240\u6709 Tag\u3002 VID_list \uff1a\u6307\u5b9a\u8981\u5220\u9664 Tag \u7684\u70b9 ID\u3002\u53ef\u4ee5\u6307\u5b9a\u591a\u4e2a VID\uff0c\u7528\u82f1\u6587\u9017\u53f7\uff08,\uff09\u5206\u9694\u3002 \u793a\u4f8b \u00b6 nebula> CREATE TAG IF NOT EXISTS test1(p1 string, p2 int); nebula> CREATE TAG IF NOT EXISTS test2(p3 string, p4 int); nebula> INSERT VERTEX test1(p1, p2),test2(p3, p4) VALUES \"test\":(\"123\", 1, \"456\", 2); nebula> FETCH PROP ON * \"test\" YIELD vertex AS v; +------------------------------------------------------------+ | v | +------------------------------------------------------------+ | (\"test\" :test1{p1: \"123\", p2: 1} :test2{p3: \"456\", p4: 2}) | +------------------------------------------------------------+ nebula> DELETE TAG test1 FROM \"test\"; nebula> FETCH PROP ON * \"test\" YIELD vertex AS v; +-----------------------------------+ | v | +-----------------------------------+ | (\"test\" :test2{p3: \"456\", p4: 2}) | +-----------------------------------+ nebula> DELETE TAG * FROM \"test\"; nebula> FETCH PROP ON * \"test\" YIELD vertex AS v; +---+ | v | +---+ +---+ Compatibility \u5728 openCypher \u4e2d\uff0c\u53ef\u4ee5\u4f7f\u7528 REMOVE v:LABEL \u8bed\u53e5\u6765\u79fb\u9664\u8be5\u70b9 v \u7684 LABEL \u3002 \u76f8\u540c\u8bed\u610f\uff0c\u4f46\u4e0d\u540c\u8bed\u6cd5\u3002\u5728 nGQL \u4e2d\u4f7f\u7528 DELETE TAG \u3002","title":"DELETE TAG"},{"location":"3.ngql-guide/10.tag-statements/6.delete-tag/#delete_tag","text":"DELETE TAG \u8bed\u53e5\u53ef\u4ee5\u5220\u9664\u6307\u5b9a\u70b9\u4e0a\u7684\u6307\u5b9a Tag\u3002","title":"DELETE TAG"},{"location":"3.ngql-guide/10.tag-statements/6.delete-tag/#_1","text":"\u767b\u5f55\u7684\u7528\u6237\u5fc5\u987b\u62e5\u6709\u5bf9\u5e94\u6743\u9650\u624d\u80fd\u6267\u884c DELETE TAG \u8bed\u53e5\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1 \u5185\u7f6e\u89d2\u8272\u6743\u9650 \u3002","title":"\u524d\u63d0\u6761\u4ef6"},{"location":"3.ngql-guide/10.tag-statements/6.delete-tag/#_2","text":"DELETE TAG <tag_name_list> FROM <VID_list>; tag_name_list \uff1a\u6307\u5b9a Tag \u540d\u79f0\u3002\u591a\u4e2a Tag \u7528\u82f1\u6587\u9017\u53f7\uff08,\uff09\u5206\u9694\uff0c\u4e5f\u53ef\u4ee5\u7528 * \u8868\u793a\u6240\u6709 Tag\u3002 VID_list \uff1a\u6307\u5b9a\u8981\u5220\u9664 Tag \u7684\u70b9 ID\u3002\u53ef\u4ee5\u6307\u5b9a\u591a\u4e2a VID\uff0c\u7528\u82f1\u6587\u9017\u53f7\uff08,\uff09\u5206\u9694\u3002","title":"\u8bed\u6cd5"},{"location":"3.ngql-guide/10.tag-statements/6.delete-tag/#_3","text":"nebula> CREATE TAG IF NOT EXISTS test1(p1 string, p2 int); nebula> CREATE TAG IF NOT EXISTS test2(p3 string, p4 int); nebula> INSERT VERTEX test1(p1, p2),test2(p3, p4) VALUES \"test\":(\"123\", 1, \"456\", 2); nebula> FETCH PROP ON * \"test\" YIELD vertex AS v; +------------------------------------------------------------+ | v | +------------------------------------------------------------+ | (\"test\" :test1{p1: \"123\", p2: 1} :test2{p3: \"456\", p4: 2}) | +------------------------------------------------------------+ nebula> DELETE TAG test1 FROM \"test\"; nebula> FETCH PROP ON * \"test\" YIELD vertex AS v; +-----------------------------------+ | v | +-----------------------------------+ | (\"test\" :test2{p3: \"456\", p4: 2}) | +-----------------------------------+ nebula> DELETE TAG * FROM \"test\"; nebula> FETCH PROP ON * \"test\" YIELD vertex AS v; +---+ | v | +---+ +---+ Compatibility \u5728 openCypher \u4e2d\uff0c\u53ef\u4ee5\u4f7f\u7528 REMOVE v:LABEL \u8bed\u53e5\u6765\u79fb\u9664\u8be5\u70b9 v \u7684 LABEL \u3002 \u76f8\u540c\u8bed\u610f\uff0c\u4f46\u4e0d\u540c\u8bed\u6cd5\u3002\u5728 nGQL \u4e2d\u4f7f\u7528 DELETE TAG \u3002","title":"\u793a\u4f8b"},{"location":"3.ngql-guide/10.tag-statements/improve-query-by-tag-index/","text":"\u589e\u52a0\u548c\u5220\u9664\u6807\u7b7e \u00b6 \u5728 openCypher \u4e2d\uff0c\u6709\u589e\u52a0\u6807\u7b7e\uff08 SET label \uff09\u548c\u79fb\u9664\u6807\u7b7e\uff08 REMOVE label \uff09\u7684\u529f\u80fd\uff0c\u53ef\u4ee5\u7528\u4e8e\u52a0\u901f\u67e5\u8be2\u6216\u8005\u6807\u8bb0\u8fc7\u7a0b\u3002 \u5728NebulaGraph\u4e2d\uff0c\u53ef\u4ee5\u901a\u8fc7 Tag \u53d8\u76f8\u5b9e\u73b0\u76f8\u540c\u64cd\u4f5c\uff0c\u521b\u5efa Tag \u5e76\u5c06 Tag \u63d2\u5165\u5230\u5df2\u6709\u7684\u70b9\u4e0a\uff0c\u5c31\u53ef\u4ee5\u6839\u636e Tag \u540d\u79f0\u5feb\u901f\u67e5\u627e\u70b9\uff0c\u4e5f\u53ef\u4ee5\u901a\u8fc7 DELETE TAG \u5220\u9664\u67d0\u4e9b\u70b9\u4e0a\u4e0d\u518d\u9700\u8981\u7684 Tag\u3002 \u793a\u4f8b \u00b6 \u4f8b\u5982\u5728 basketballplayer \u6570\u636e\u96c6\u4e2d\uff0c\u90e8\u5206\u7bee\u7403\u8fd0\u52a8\u5458\u540c\u65f6\u4e5f\u662f\u7403\u961f\u80a1\u4e1c\uff0c\u53ef\u4ee5\u4e3a\u80a1\u4e1c Tag shareholder \u521b\u5efa\u7d22\u5f15\uff0c\u65b9\u4fbf\u5feb\u901f\u67e5\u627e\u3002\u5982\u679c\u4e0d\u518d\u662f\u80a1\u4e1c\uff0c\u53ef\u4ee5\u901a\u8fc7 DELETE TAG \u8bed\u53e5\u5220\u9664\u76f8\u5e94\u8fd0\u52a8\u5458\u7684\u80a1\u4e1c Tag\u3002 //\u521b\u5efa\u80a1\u4e1c Tag \u548c\u7d22\u5f15 nebula> CREATE TAG IF NOT EXISTS shareholder(); nebula> CREATE TAG INDEX IF NOT EXISTS shareholder_tag on shareholder(); //\u4e3a\u70b9\u6dfb\u52a0 Tag nebula> INSERT VERTEX shareholder() VALUES \"player100\":(); nebula> INSERT VERTEX shareholder() VALUES \"player101\":(); //\u5feb\u901f\u67e5\u8be2\u6240\u6709\u80a1\u4e1c nebula> MATCH (v:shareholder) RETURN v; +---------------------------------------------------------------------+ | v | +---------------------------------------------------------------------+ | (\"player100\" :player{age: 42, name: \"Tim Duncan\"} :shareholder{}) | | (\"player101\" :player{age: 36, name: \"Tony Parker\"} :shareholder{}) | +---------------------------------------------------------------------+ nebula> LOOKUP ON shareholder YIELD id(vertex); +-------------+ | id(VERTEX) | +-------------+ | \"player100\" | | \"player101\" | +-------------+ //\u5982\u679c player100 \u4e0d\u518d\u662f\u80a1\u4e1c nebula> DELETE TAG shareholder FROM \"player100\"; nebula> LOOKUP ON shareholder YIELD id(vertex); +-------------+ | id(VERTEX) | +-------------+ | \"player101\" | +-------------+ Note \u5982\u679c\u63d2\u5165\u6d4b\u8bd5\u6570\u636e\u540e\u624d\u521b\u5efa\u7d22\u5f15\uff0c\u8bf7\u7528 REBUILD TAG INDEX <index_name_list>; \u8bed\u53e5\u91cd\u5efa\u7d22\u5f15\u3002","title":"\u589e\u52a0\u548c\u5220\u9664\u6807\u7b7e"},{"location":"3.ngql-guide/10.tag-statements/improve-query-by-tag-index/#_1","text":"\u5728 openCypher \u4e2d\uff0c\u6709\u589e\u52a0\u6807\u7b7e\uff08 SET label \uff09\u548c\u79fb\u9664\u6807\u7b7e\uff08 REMOVE label \uff09\u7684\u529f\u80fd\uff0c\u53ef\u4ee5\u7528\u4e8e\u52a0\u901f\u67e5\u8be2\u6216\u8005\u6807\u8bb0\u8fc7\u7a0b\u3002 \u5728NebulaGraph\u4e2d\uff0c\u53ef\u4ee5\u901a\u8fc7 Tag \u53d8\u76f8\u5b9e\u73b0\u76f8\u540c\u64cd\u4f5c\uff0c\u521b\u5efa Tag \u5e76\u5c06 Tag \u63d2\u5165\u5230\u5df2\u6709\u7684\u70b9\u4e0a\uff0c\u5c31\u53ef\u4ee5\u6839\u636e Tag \u540d\u79f0\u5feb\u901f\u67e5\u627e\u70b9\uff0c\u4e5f\u53ef\u4ee5\u901a\u8fc7 DELETE TAG \u5220\u9664\u67d0\u4e9b\u70b9\u4e0a\u4e0d\u518d\u9700\u8981\u7684 Tag\u3002","title":"\u589e\u52a0\u548c\u5220\u9664\u6807\u7b7e"},{"location":"3.ngql-guide/10.tag-statements/improve-query-by-tag-index/#_2","text":"\u4f8b\u5982\u5728 basketballplayer \u6570\u636e\u96c6\u4e2d\uff0c\u90e8\u5206\u7bee\u7403\u8fd0\u52a8\u5458\u540c\u65f6\u4e5f\u662f\u7403\u961f\u80a1\u4e1c\uff0c\u53ef\u4ee5\u4e3a\u80a1\u4e1c Tag shareholder \u521b\u5efa\u7d22\u5f15\uff0c\u65b9\u4fbf\u5feb\u901f\u67e5\u627e\u3002\u5982\u679c\u4e0d\u518d\u662f\u80a1\u4e1c\uff0c\u53ef\u4ee5\u901a\u8fc7 DELETE TAG \u8bed\u53e5\u5220\u9664\u76f8\u5e94\u8fd0\u52a8\u5458\u7684\u80a1\u4e1c Tag\u3002 //\u521b\u5efa\u80a1\u4e1c Tag \u548c\u7d22\u5f15 nebula> CREATE TAG IF NOT EXISTS shareholder(); nebula> CREATE TAG INDEX IF NOT EXISTS shareholder_tag on shareholder(); //\u4e3a\u70b9\u6dfb\u52a0 Tag nebula> INSERT VERTEX shareholder() VALUES \"player100\":(); nebula> INSERT VERTEX shareholder() VALUES \"player101\":(); //\u5feb\u901f\u67e5\u8be2\u6240\u6709\u80a1\u4e1c nebula> MATCH (v:shareholder) RETURN v; +---------------------------------------------------------------------+ | v | +---------------------------------------------------------------------+ | (\"player100\" :player{age: 42, name: \"Tim Duncan\"} :shareholder{}) | | (\"player101\" :player{age: 36, name: \"Tony Parker\"} :shareholder{}) | +---------------------------------------------------------------------+ nebula> LOOKUP ON shareholder YIELD id(vertex); +-------------+ | id(VERTEX) | +-------------+ | \"player100\" | | \"player101\" | +-------------+ //\u5982\u679c player100 \u4e0d\u518d\u662f\u80a1\u4e1c nebula> DELETE TAG shareholder FROM \"player100\"; nebula> LOOKUP ON shareholder YIELD id(vertex); +-------------+ | id(VERTEX) | +-------------+ | \"player101\" | +-------------+ Note \u5982\u679c\u63d2\u5165\u6d4b\u8bd5\u6570\u636e\u540e\u624d\u521b\u5efa\u7d22\u5f15\uff0c\u8bf7\u7528 REBUILD TAG INDEX <index_name_list>; \u8bed\u53e5\u91cd\u5efa\u7d22\u5f15\u3002","title":"\u793a\u4f8b"},{"location":"3.ngql-guide/11.edge-type-statements/1.create-edge/","text":"CREATE EDGE \u00b6 CREATE EDGE \u8bed\u53e5\u53ef\u4ee5\u901a\u8fc7\u6307\u5b9a\u540d\u79f0\u521b\u5efa\u4e00\u4e2a Edge type\u3002 OpenCypher \u517c\u5bb9\u6027 \u00b6 nGQL \u4e2d\u7684 Edge type \u548c openCypher \u4e2d\u7684\u5173\u7cfb\u7c7b\u578b\u76f8\u4f3c\uff0c\u4f46\u53c8\u6709\u6240\u4e0d\u540c\uff0c\u4f8b\u5982\u5b83\u4eec\u7684\u521b\u5efa\u65b9\u5f0f\u3002 openCypher \u4e2d\u7684\u5173\u7cfb\u7c7b\u578b\u9700\u8981\u5728 CREATE \u8bed\u53e5\u4e2d\u4e0e\u70b9\u4e00\u8d77\u521b\u5efa\u3002 nGQL \u4e2d\u7684 Edge type \u9700\u8981\u4f7f\u7528 CREATE EDGE \u8bed\u53e5\u72ec\u7acb\u521b\u5efa\u3002Edge type \u66f4\u50cf\u662f MySQL \u4e2d\u7684\u8868\u3002 \u524d\u63d0\u6761\u4ef6 \u00b6 \u6267\u884c CREATE EDGE \u8bed\u53e5\u9700\u8981\u5f53\u524d\u767b\u5f55\u7684\u7528\u6237\u62e5\u6709\u6307\u5b9a\u56fe\u7a7a\u95f4\u7684 \u521b\u5efa Edge type \u6743\u9650 \uff0c\u5426\u5219\u4f1a\u62a5\u9519\u3002 \u8bed\u6cd5 \u00b6 \u521b\u5efa Edge type \u524d\uff0c\u9700\u8981\u5148\u7528 USE \u8bed\u53e5\u6307\u5b9a\u5de5\u4f5c\u7a7a\u95f4\u3002 CREATE EDGE [IF NOT EXISTS] <edge_type_name> ( <prop_name> <data_type> [NULL | NOT NULL] [DEFAULT <default_value>] [COMMENT '<comment>'] [{, <prop_name> <data_type> [NULL | NOT NULL] [DEFAULT <default_value>] [COMMENT '<comment>']} ...] ) [TTL_DURATION = <ttl_duration>] [TTL_COL = <prop_name>] [COMMENT = '<comment>']; \u53c2\u6570 \u8bf4\u660e IF NOT EXISTS \u68c0\u6d4b\u5f85\u521b\u5efa\u7684 Edge type \u662f\u5426\u5b58\u5728\uff0c\u53ea\u6709\u4e0d\u5b58\u5728\u65f6\uff0c\u624d\u4f1a\u521b\u5efa Edge type\u3002\u4ec5\u68c0\u6d4b Edge type \u7684\u540d\u79f0\uff0c\u4e0d\u4f1a\u68c0\u6d4b\u5177\u4f53\u5c5e\u6027\u3002 <edge_type_name> 1\u3001\u6bcf\u4e2a\u56fe\u7a7a\u95f4\u5185\u7684 Edge type \u5fc5\u987b\u662f\u552f\u4e00\u7684\u3002 2\u3001Edge type \u540d\u79f0\u8bbe\u7f6e\u540e\u65e0\u6cd5\u4fee\u6539\u3002 3\u3001\u4e0d\u80fd\u4ee5\u6570\u5b57\u5f00\u5934\uff1b\u652f\u6301 1~4 \u5b57\u8282\u7684 UTF-8 \u7f16\u7801\u5b57\u7b26\uff0c\u5305\u62ec\u82f1\u6587\u5b57\u6bcd\uff08\u533a\u5206\u5927\u5c0f\u5199\uff09\u3001\u6570\u5b57\u3001\u4e2d\u6587\u7b49\uff0c\u4f46\u662f\u4e0d\u5305\u62ec\u9664\u4e0b\u5212\u7ebf\u5916\u7684\u7279\u6b8a\u5b57\u7b26\uff1b\u4f7f\u7528\u7279\u6b8a\u5b57\u7b26\u3001\u4fdd\u7559\u5173\u952e\u5b57\u6216\u6570\u5b57\u5f00\u5934\u65f6\uff0c\u9700\u8981\u7528\u53cd\u5f15\u53f7\uff08`\uff09\u5305\u56f4\u4e14\u4e0d\u80fd\u4f7f\u7528\u82f1\u6587\u53e5\u53f7\uff08 . \uff09\u3002\u8be6\u60c5\u53c2\u89c1 \u5173\u952e\u5b57\u548c\u4fdd\u7559\u5b57 \u3002 \u6ce8\u610f \uff1a\u5982\u679c\u4ee5\u4e2d\u6587\u547d\u540d Edge type\uff0c\u62a5 SyntaxError \u9519\u8bef\u65f6\uff0c\u9700\u4f7f\u7528\u53cd\u5f15\u53f7\uff08`\uff09\u5305\u56f4\u4e2d\u6587\u5b57\u7b26\u3002 <prop_name> \u5c5e\u6027\u540d\u79f0\u3002\u6bcf\u4e2a Edge type \u4e2d\u7684\u5c5e\u6027\u540d\u79f0\u5fc5\u987b\u552f\u4e00\u3002\u5c5e\u6027\u7684\u547d\u540d\u89c4\u5219\u4e0e Edge type \u76f8\u540c\u3002 <data_type> \u5c5e\u6027\u7684\u6570\u636e\u7c7b\u578b\uff0c\u76ee\u524d\u652f\u6301 \u6570\u503c \u3001 \u5e03\u5c14 \u3001 \u5b57\u7b26\u4e32 \u4ee5\u53ca \u65e5\u671f\u4e0e\u65f6\u95f4 \u3002 NULL \\| NOT NULL \u6307\u5b9a\u5c5e\u6027\u503c\u662f\u5426\u652f\u6301\u4e3a NULL \u3002\u9ed8\u8ba4\u503c\u4e3a NULL \u3002\u5f53\u6307\u5b9a\u5c5e\u6027\u503c\u4e3a NOT NULL \u65f6\uff0c\u5fc5\u9700\u6307\u5b9a\u5c5e\u6027\u7684\u9ed8\u8ba4\u503c\uff0c\u4e5f\u5c31\u662f DEFAULT \u7684\u503c\u3002 DEFAULT \u6307\u5b9a\u5c5e\u6027\u7684\u9ed8\u8ba4\u503c\u3002\u9ed8\u8ba4\u503c\u53ef\u4ee5\u662f\u4e00\u4e2a\u6587\u5b57\u503c\u6216NebulaGraph\u652f\u6301\u7684\u8868\u8fbe\u5f0f\u3002\u5982\u679c\u63d2\u5165\u8fb9\u65f6\u6ca1\u6709\u6307\u5b9a\u67d0\u4e2a\u5c5e\u6027\u7684\u503c\uff0c\u5219\u4f7f\u7528\u9ed8\u8ba4\u503c\u3002 COMMENT \u5bf9\u5355\u4e2a\u5c5e\u6027\u6216 Edge type \u7684\u63cf\u8ff0\u3002\u6700\u5927\u4e3a 256 \u5b57\u8282\u3002\u9ed8\u8ba4\u65e0\u63cf\u8ff0\u3002 TTL_DURATION \u6307\u5b9a\u65f6\u95f4\u6233\u5dee\u503c\uff0c\u5355\u4f4d\uff1a\u79d2\u3002\u65f6\u95f4\u6233\u5dee\u503c\u5fc5\u987b\u4e3a 64 \u4f4d\u975e\u8d1f\u6574\u6570\u3002\u5c5e\u6027\u503c\u548c\u65f6\u95f4\u6233\u5dee\u503c\u4e4b\u548c\u5982\u679c\u5c0f\u4e8e\u5f53\u524d\u65f6\u95f4\u6233\uff0c\u5c5e\u6027\u5c31\u4f1a\u8fc7\u671f\u3002\u9ed8\u8ba4\u503c\u4e3a 0 \uff0c\u8868\u793a\u5c5e\u6027\u6c38\u4e0d\u8fc7\u671f\u3002 TTL_COL \u6307\u5b9a\u8981\u8bbe\u7f6e\u5b58\u6d3b\u65f6\u95f4\u7684\u5c5e\u6027\u3002\u5c5e\u6027\u7684\u6570\u636e\u7c7b\u578b\u5fc5\u987b\u662f int \u6216\u8005 timestamp \u3002\u4e00\u4e2a Edge type \u53ea\u80fd\u6307\u5b9a\u4e00\u4e2a\u5b57\u6bb5\u4e3a TTL_COL \u3002\u66f4\u591a TTL \u7684\u4fe1\u606f\u8bf7\u53c2\u89c1 TTL \u3002 \u793a\u4f8b \u00b6 nebula> CREATE EDGE IF NOT EXISTS follow(degree int); # \u521b\u5efa\u6ca1\u6709\u5c5e\u6027\u7684 Edge type\u3002 nebula> CREATE EDGE IF NOT EXISTS no_property(); # \u521b\u5efa\u5305\u542b\u9ed8\u8ba4\u503c\u7684 Edge type\u3002 nebula> CREATE EDGE IF NOT EXISTS follow_with_default(degree int DEFAULT 20); # \u5bf9\u5b57\u6bb5 p2 \u8bbe\u7f6e TTL \u4e3a 100 \u79d2\u3002 nebula> CREATE EDGE IF NOT EXISTS e1(p1 string, p2 int, p3 timestamp) \\ TTL_DURATION = 100, TTL_COL = \"p2\";","title":"CREATE EDGE"},{"location":"3.ngql-guide/11.edge-type-statements/1.create-edge/#create_edge","text":"CREATE EDGE \u8bed\u53e5\u53ef\u4ee5\u901a\u8fc7\u6307\u5b9a\u540d\u79f0\u521b\u5efa\u4e00\u4e2a Edge type\u3002","title":"CREATE EDGE"},{"location":"3.ngql-guide/11.edge-type-statements/1.create-edge/#opencypher","text":"nGQL \u4e2d\u7684 Edge type \u548c openCypher \u4e2d\u7684\u5173\u7cfb\u7c7b\u578b\u76f8\u4f3c\uff0c\u4f46\u53c8\u6709\u6240\u4e0d\u540c\uff0c\u4f8b\u5982\u5b83\u4eec\u7684\u521b\u5efa\u65b9\u5f0f\u3002 openCypher \u4e2d\u7684\u5173\u7cfb\u7c7b\u578b\u9700\u8981\u5728 CREATE \u8bed\u53e5\u4e2d\u4e0e\u70b9\u4e00\u8d77\u521b\u5efa\u3002 nGQL \u4e2d\u7684 Edge type \u9700\u8981\u4f7f\u7528 CREATE EDGE \u8bed\u53e5\u72ec\u7acb\u521b\u5efa\u3002Edge type \u66f4\u50cf\u662f MySQL \u4e2d\u7684\u8868\u3002","title":"OpenCypher \u517c\u5bb9\u6027"},{"location":"3.ngql-guide/11.edge-type-statements/1.create-edge/#_1","text":"\u6267\u884c CREATE EDGE \u8bed\u53e5\u9700\u8981\u5f53\u524d\u767b\u5f55\u7684\u7528\u6237\u62e5\u6709\u6307\u5b9a\u56fe\u7a7a\u95f4\u7684 \u521b\u5efa Edge type \u6743\u9650 \uff0c\u5426\u5219\u4f1a\u62a5\u9519\u3002","title":"\u524d\u63d0\u6761\u4ef6"},{"location":"3.ngql-guide/11.edge-type-statements/1.create-edge/#_2","text":"\u521b\u5efa Edge type \u524d\uff0c\u9700\u8981\u5148\u7528 USE \u8bed\u53e5\u6307\u5b9a\u5de5\u4f5c\u7a7a\u95f4\u3002 CREATE EDGE [IF NOT EXISTS] <edge_type_name> ( <prop_name> <data_type> [NULL | NOT NULL] [DEFAULT <default_value>] [COMMENT '<comment>'] [{, <prop_name> <data_type> [NULL | NOT NULL] [DEFAULT <default_value>] [COMMENT '<comment>']} ...] ) [TTL_DURATION = <ttl_duration>] [TTL_COL = <prop_name>] [COMMENT = '<comment>']; \u53c2\u6570 \u8bf4\u660e IF NOT EXISTS \u68c0\u6d4b\u5f85\u521b\u5efa\u7684 Edge type \u662f\u5426\u5b58\u5728\uff0c\u53ea\u6709\u4e0d\u5b58\u5728\u65f6\uff0c\u624d\u4f1a\u521b\u5efa Edge type\u3002\u4ec5\u68c0\u6d4b Edge type \u7684\u540d\u79f0\uff0c\u4e0d\u4f1a\u68c0\u6d4b\u5177\u4f53\u5c5e\u6027\u3002 <edge_type_name> 1\u3001\u6bcf\u4e2a\u56fe\u7a7a\u95f4\u5185\u7684 Edge type \u5fc5\u987b\u662f\u552f\u4e00\u7684\u3002 2\u3001Edge type \u540d\u79f0\u8bbe\u7f6e\u540e\u65e0\u6cd5\u4fee\u6539\u3002 3\u3001\u4e0d\u80fd\u4ee5\u6570\u5b57\u5f00\u5934\uff1b\u652f\u6301 1~4 \u5b57\u8282\u7684 UTF-8 \u7f16\u7801\u5b57\u7b26\uff0c\u5305\u62ec\u82f1\u6587\u5b57\u6bcd\uff08\u533a\u5206\u5927\u5c0f\u5199\uff09\u3001\u6570\u5b57\u3001\u4e2d\u6587\u7b49\uff0c\u4f46\u662f\u4e0d\u5305\u62ec\u9664\u4e0b\u5212\u7ebf\u5916\u7684\u7279\u6b8a\u5b57\u7b26\uff1b\u4f7f\u7528\u7279\u6b8a\u5b57\u7b26\u3001\u4fdd\u7559\u5173\u952e\u5b57\u6216\u6570\u5b57\u5f00\u5934\u65f6\uff0c\u9700\u8981\u7528\u53cd\u5f15\u53f7\uff08`\uff09\u5305\u56f4\u4e14\u4e0d\u80fd\u4f7f\u7528\u82f1\u6587\u53e5\u53f7\uff08 . \uff09\u3002\u8be6\u60c5\u53c2\u89c1 \u5173\u952e\u5b57\u548c\u4fdd\u7559\u5b57 \u3002 \u6ce8\u610f \uff1a\u5982\u679c\u4ee5\u4e2d\u6587\u547d\u540d Edge type\uff0c\u62a5 SyntaxError \u9519\u8bef\u65f6\uff0c\u9700\u4f7f\u7528\u53cd\u5f15\u53f7\uff08`\uff09\u5305\u56f4\u4e2d\u6587\u5b57\u7b26\u3002 <prop_name> \u5c5e\u6027\u540d\u79f0\u3002\u6bcf\u4e2a Edge type \u4e2d\u7684\u5c5e\u6027\u540d\u79f0\u5fc5\u987b\u552f\u4e00\u3002\u5c5e\u6027\u7684\u547d\u540d\u89c4\u5219\u4e0e Edge type \u76f8\u540c\u3002 <data_type> \u5c5e\u6027\u7684\u6570\u636e\u7c7b\u578b\uff0c\u76ee\u524d\u652f\u6301 \u6570\u503c \u3001 \u5e03\u5c14 \u3001 \u5b57\u7b26\u4e32 \u4ee5\u53ca \u65e5\u671f\u4e0e\u65f6\u95f4 \u3002 NULL \\| NOT NULL \u6307\u5b9a\u5c5e\u6027\u503c\u662f\u5426\u652f\u6301\u4e3a NULL \u3002\u9ed8\u8ba4\u503c\u4e3a NULL \u3002\u5f53\u6307\u5b9a\u5c5e\u6027\u503c\u4e3a NOT NULL \u65f6\uff0c\u5fc5\u9700\u6307\u5b9a\u5c5e\u6027\u7684\u9ed8\u8ba4\u503c\uff0c\u4e5f\u5c31\u662f DEFAULT \u7684\u503c\u3002 DEFAULT \u6307\u5b9a\u5c5e\u6027\u7684\u9ed8\u8ba4\u503c\u3002\u9ed8\u8ba4\u503c\u53ef\u4ee5\u662f\u4e00\u4e2a\u6587\u5b57\u503c\u6216NebulaGraph\u652f\u6301\u7684\u8868\u8fbe\u5f0f\u3002\u5982\u679c\u63d2\u5165\u8fb9\u65f6\u6ca1\u6709\u6307\u5b9a\u67d0\u4e2a\u5c5e\u6027\u7684\u503c\uff0c\u5219\u4f7f\u7528\u9ed8\u8ba4\u503c\u3002 COMMENT \u5bf9\u5355\u4e2a\u5c5e\u6027\u6216 Edge type \u7684\u63cf\u8ff0\u3002\u6700\u5927\u4e3a 256 \u5b57\u8282\u3002\u9ed8\u8ba4\u65e0\u63cf\u8ff0\u3002 TTL_DURATION \u6307\u5b9a\u65f6\u95f4\u6233\u5dee\u503c\uff0c\u5355\u4f4d\uff1a\u79d2\u3002\u65f6\u95f4\u6233\u5dee\u503c\u5fc5\u987b\u4e3a 64 \u4f4d\u975e\u8d1f\u6574\u6570\u3002\u5c5e\u6027\u503c\u548c\u65f6\u95f4\u6233\u5dee\u503c\u4e4b\u548c\u5982\u679c\u5c0f\u4e8e\u5f53\u524d\u65f6\u95f4\u6233\uff0c\u5c5e\u6027\u5c31\u4f1a\u8fc7\u671f\u3002\u9ed8\u8ba4\u503c\u4e3a 0 \uff0c\u8868\u793a\u5c5e\u6027\u6c38\u4e0d\u8fc7\u671f\u3002 TTL_COL \u6307\u5b9a\u8981\u8bbe\u7f6e\u5b58\u6d3b\u65f6\u95f4\u7684\u5c5e\u6027\u3002\u5c5e\u6027\u7684\u6570\u636e\u7c7b\u578b\u5fc5\u987b\u662f int \u6216\u8005 timestamp \u3002\u4e00\u4e2a Edge type \u53ea\u80fd\u6307\u5b9a\u4e00\u4e2a\u5b57\u6bb5\u4e3a TTL_COL \u3002\u66f4\u591a TTL \u7684\u4fe1\u606f\u8bf7\u53c2\u89c1 TTL \u3002","title":"\u8bed\u6cd5"},{"location":"3.ngql-guide/11.edge-type-statements/1.create-edge/#_3","text":"nebula> CREATE EDGE IF NOT EXISTS follow(degree int); # \u521b\u5efa\u6ca1\u6709\u5c5e\u6027\u7684 Edge type\u3002 nebula> CREATE EDGE IF NOT EXISTS no_property(); # \u521b\u5efa\u5305\u542b\u9ed8\u8ba4\u503c\u7684 Edge type\u3002 nebula> CREATE EDGE IF NOT EXISTS follow_with_default(degree int DEFAULT 20); # \u5bf9\u5b57\u6bb5 p2 \u8bbe\u7f6e TTL \u4e3a 100 \u79d2\u3002 nebula> CREATE EDGE IF NOT EXISTS e1(p1 string, p2 int, p3 timestamp) \\ TTL_DURATION = 100, TTL_COL = \"p2\";","title":"\u793a\u4f8b"},{"location":"3.ngql-guide/11.edge-type-statements/2.drop-edge/","text":"DROP EDGE \u00b6 DROP EDGE \u8bed\u53e5\u53ef\u4ee5\u5220\u9664\u5f53\u524d\u5de5\u4f5c\u7a7a\u95f4\u5185\u7684\u6307\u5b9a Edge type\u3002 \u4e00\u4e2a\u8fb9\u53ea\u80fd\u6709\u4e00\u4e2a Edge type\uff0c\u5220\u9664\u8fd9\u4e2a Edge type \u540e\uff0c\u7528\u6237\u5c31 \u65e0\u6cd5\u8bbf\u95ee \u8fd9\u4e2a\u8fb9\uff0c\u4e0b\u6b21 Compaction \u64cd\u4f5c\u65f6\u4f1a\u5220\u9664\u8be5\u8fb9\u3002 \u5220\u9664 Edge type \u64cd\u4f5c\u4ec5\u5220\u9664 Schema \u6570\u636e\uff0c\u786c\u76d8\u4e0a\u7684\u6587\u4ef6\u6216\u76ee\u5f55\u4e0d\u4f1a\u7acb\u523b\u5220\u9664\uff0c\u800c\u662f\u5728\u4e0b\u4e00\u6b21 Compaction \u64cd\u4f5c\u65f6\u5220\u9664\u3002 \u524d\u63d0\u6761\u4ef6 \u00b6 \u767b\u5f55\u7684\u7528\u6237\u5fc5\u987b\u62e5\u6709\u5bf9\u5e94\u6743\u9650\u624d\u80fd\u6267\u884c DROP EDGE \u8bed\u53e5\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1 \u5185\u7f6e\u89d2\u8272\u6743\u9650 \u3002 \u786e\u4fdd Edge type \u4e0d\u5305\u542b\u4efb\u4f55\u7d22\u5f15\uff0c\u5426\u5219 DROP EDGE \u65f6\u4f1a\u62a5\u51b2\u7a81\u9519\u8bef [ERROR (-1005)]: Conflict! \u3002\u5220\u9664\u7d22\u5f15\u8bf7\u53c2\u89c1 drop index \u3002 \u8bed\u6cd5 \u00b6 DROP EDGE [IF EXISTS] <edge_type_name> IF EXISTS \uff1a\u68c0\u6d4b\u5f85\u5220\u9664\u7684 Edge type \u662f\u5426\u5b58\u5728\uff0c\u53ea\u6709\u5b58\u5728\u65f6\uff0c\u624d\u4f1a\u5220\u9664 Edge type\u3002 edge_type_name \uff1a\u6307\u5b9a\u8981\u5220\u9664\u7684 Edge type \u540d\u79f0\u3002\u4e00\u6b21\u53ea\u80fd\u5220\u9664\u4e00\u4e2a Edge type\u3002 \u793a\u4f8b \u00b6 nebula> CREATE EDGE IF NOT EXISTS e1(p1 string, p2 int); nebula> DROP EDGE e1;","title":"DROP EDGE"},{"location":"3.ngql-guide/11.edge-type-statements/2.drop-edge/#drop_edge","text":"DROP EDGE \u8bed\u53e5\u53ef\u4ee5\u5220\u9664\u5f53\u524d\u5de5\u4f5c\u7a7a\u95f4\u5185\u7684\u6307\u5b9a Edge type\u3002 \u4e00\u4e2a\u8fb9\u53ea\u80fd\u6709\u4e00\u4e2a Edge type\uff0c\u5220\u9664\u8fd9\u4e2a Edge type \u540e\uff0c\u7528\u6237\u5c31 \u65e0\u6cd5\u8bbf\u95ee \u8fd9\u4e2a\u8fb9\uff0c\u4e0b\u6b21 Compaction \u64cd\u4f5c\u65f6\u4f1a\u5220\u9664\u8be5\u8fb9\u3002 \u5220\u9664 Edge type \u64cd\u4f5c\u4ec5\u5220\u9664 Schema \u6570\u636e\uff0c\u786c\u76d8\u4e0a\u7684\u6587\u4ef6\u6216\u76ee\u5f55\u4e0d\u4f1a\u7acb\u523b\u5220\u9664\uff0c\u800c\u662f\u5728\u4e0b\u4e00\u6b21 Compaction \u64cd\u4f5c\u65f6\u5220\u9664\u3002","title":"DROP EDGE"},{"location":"3.ngql-guide/11.edge-type-statements/2.drop-edge/#_1","text":"\u767b\u5f55\u7684\u7528\u6237\u5fc5\u987b\u62e5\u6709\u5bf9\u5e94\u6743\u9650\u624d\u80fd\u6267\u884c DROP EDGE \u8bed\u53e5\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1 \u5185\u7f6e\u89d2\u8272\u6743\u9650 \u3002 \u786e\u4fdd Edge type \u4e0d\u5305\u542b\u4efb\u4f55\u7d22\u5f15\uff0c\u5426\u5219 DROP EDGE \u65f6\u4f1a\u62a5\u51b2\u7a81\u9519\u8bef [ERROR (-1005)]: Conflict! \u3002\u5220\u9664\u7d22\u5f15\u8bf7\u53c2\u89c1 drop index \u3002","title":"\u524d\u63d0\u6761\u4ef6"},{"location":"3.ngql-guide/11.edge-type-statements/2.drop-edge/#_2","text":"DROP EDGE [IF EXISTS] <edge_type_name> IF EXISTS \uff1a\u68c0\u6d4b\u5f85\u5220\u9664\u7684 Edge type \u662f\u5426\u5b58\u5728\uff0c\u53ea\u6709\u5b58\u5728\u65f6\uff0c\u624d\u4f1a\u5220\u9664 Edge type\u3002 edge_type_name \uff1a\u6307\u5b9a\u8981\u5220\u9664\u7684 Edge type \u540d\u79f0\u3002\u4e00\u6b21\u53ea\u80fd\u5220\u9664\u4e00\u4e2a Edge type\u3002","title":"\u8bed\u6cd5"},{"location":"3.ngql-guide/11.edge-type-statements/2.drop-edge/#_3","text":"nebula> CREATE EDGE IF NOT EXISTS e1(p1 string, p2 int); nebula> DROP EDGE e1;","title":"\u793a\u4f8b"},{"location":"3.ngql-guide/11.edge-type-statements/3.alter-edge/","text":"ALTER EDGE \u00b6 ALTER EDGE \u8bed\u53e5\u53ef\u4ee5\u4fee\u6539 Edge type \u7684\u7ed3\u6784\u3002\u4f8b\u5982\u589e\u5220\u5c5e\u6027\u3001\u4fee\u6539\u6570\u636e\u7c7b\u578b\uff0c\u4e5f\u53ef\u4ee5\u4e3a\u5c5e\u6027\u8bbe\u7f6e\u3001\u4fee\u6539 TTL \uff08Time-To-Live\uff09\u3002 \u6ce8\u610f\u4e8b\u9879 \u00b6 \u767b\u5f55\u7684\u7528\u6237\u5fc5\u987b\u62e5\u6709\u5bf9\u5e94\u6743\u9650\u624d\u80fd\u6267\u884c ALTER EDGE \u8bed\u53e5\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1 \u5185\u7f6e\u89d2\u8272\u6743\u9650 \u3002 \u786e\u4fdd\u8981\u4fee\u6539\u7684\u5c5e\u6027\u4e0d\u5305\u542b\u7d22\u5f15\uff0c\u5426\u5219 ALTER EDGE \u65f6\u4f1a\u62a5\u51b2\u7a81\u9519\u8bef [ERROR (-1005)]: Conflict! \u3002\u5220\u9664\u7d22\u5f15\u8bf7\u53c2\u89c1 drop index \u3002 \u786e\u4fdd\u65b0\u589e\u7684\u5c5e\u6027\u540d\u4e0d\u4e0e\u5df2\u5b58\u5728\u6216\u88ab\u5220\u9664\u7684\u5c5e\u6027\u540d\u540c\u540d\uff0c\u5426\u5219\u65b0\u589e\u5c5e\u6027\u4f1a\u5931\u8d25\u3002 \u5141\u8bb8\u589e\u52a0 FIXED_STRING \u548c INT \u7c7b\u578b\u7684\u957f\u5ea6\u3002 \u5141\u8bb8 FIXED_STRING \u7c7b\u578b\u8f6c\u6362\u4e3a STRING \u7c7b\u578b\u3001 FLOAT \u7c7b\u578b\u8f6c\u6362\u4e3a DOUBLE \u7c7b\u578b\u3002 \u8bed\u6cd5 \u00b6 ALTER EDGE <edge_type_name> <alter_definition> [, alter_definition] ...] [ttl_definition [, ttl_definition] ... ] [COMMENT = '<comment>']; alter_definition: | ADD (prop_name data_type) | DROP (prop_name) | CHANGE (prop_name data_type) ttl_definition: TTL_DURATION = ttl_duration, TTL_COL = prop_name edge_type_name \uff1a\u6307\u5b9a\u8981\u4fee\u6539\u7684 Edge type \u540d\u79f0\u3002\u4e00\u6b21\u53ea\u80fd\u4fee\u6539\u4e00\u4e2a Edge type\u3002\u8bf7\u786e\u4fdd\u8981\u4fee\u6539\u7684 Edge type \u5728\u5f53\u524d\u5de5\u4f5c\u7a7a\u95f4\u4e2d\u5b58\u5728\uff0c\u5426\u5219\u4f1a\u62a5\u9519\u3002 \u53ef\u4ee5\u5728\u4e00\u4e2a ALTER EDGE \u8bed\u53e5\u4e2d\u4f7f\u7528\u591a\u4e2a ADD \u3001 DROP \u548c CHANGE \u5b50\u53e5\uff0c\u5b50\u53e5\u4e4b\u95f4\u7528\u82f1\u6587\u9017\u53f7\uff08,\uff09\u5206\u9694\u3002 \u5f53\u4f7f\u7528 ADD \u6216 CHANGE \u6307\u5b9a\u5c5e\u6027\u503c\u4e3a NOT NULL \u65f6\uff0c\u5fc5\u9700\u4e3a\u8be5\u5c5e\u6027\u6307\u5b9a\u9ed8\u8ba4\u503c\uff0c\u5373\u5b9a\u4e49 DEFAULT \u7684\u503c\u3002 \u793a\u4f8b \u00b6 nebula> CREATE EDGE IF NOT EXISTS e1(p1 string, p2 int); nebula> ALTER EDGE e1 ADD (p3 int, p4 string); nebula> ALTER EDGE e1 TTL_DURATION = 2, TTL_COL = \"p2\"; nebula> ALTER EDGE e1 COMMENT = 'edge1'; \u4fee\u6539 Edge type \u8bf4\u660e \u00b6 \u5c1d\u8bd5\u4f7f\u7528\u521a\u4fee\u6539\u7684 Edge type \u53ef\u80fd\u4f1a\u5931\u8d25\uff0c\u56e0\u4e3a\u4fee\u6539\u662f\u5f02\u6b65\u5b9e\u73b0\u7684\u3002\u4e3a\u786e\u4fdd\u6570\u636e\u540c\u6b65\uff0c\u540e\u7eed\u64cd\u4f5c\u80fd\u987a\u5229\u8fdb\u884c\uff0c\u8bf7\u7b49\u5f85 2 \u4e2a\u5fc3\u8df3\u5468\u671f\uff0820 \u79d2\uff09\u3002 \u5982\u679c\u9700\u8981\u4fee\u6539\u5fc3\u8df3\u95f4\u9694\uff0c\u8bf7\u4e3a \u6240\u6709\u914d\u7f6e\u6587\u4ef6 \u4fee\u6539\u53c2\u6570 heartbeat_interval_secs \u3002","title":"ALTER EDGE"},{"location":"3.ngql-guide/11.edge-type-statements/3.alter-edge/#alter_edge","text":"ALTER EDGE \u8bed\u53e5\u53ef\u4ee5\u4fee\u6539 Edge type \u7684\u7ed3\u6784\u3002\u4f8b\u5982\u589e\u5220\u5c5e\u6027\u3001\u4fee\u6539\u6570\u636e\u7c7b\u578b\uff0c\u4e5f\u53ef\u4ee5\u4e3a\u5c5e\u6027\u8bbe\u7f6e\u3001\u4fee\u6539 TTL \uff08Time-To-Live\uff09\u3002","title":"ALTER EDGE"},{"location":"3.ngql-guide/11.edge-type-statements/3.alter-edge/#_1","text":"\u767b\u5f55\u7684\u7528\u6237\u5fc5\u987b\u62e5\u6709\u5bf9\u5e94\u6743\u9650\u624d\u80fd\u6267\u884c ALTER EDGE \u8bed\u53e5\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1 \u5185\u7f6e\u89d2\u8272\u6743\u9650 \u3002 \u786e\u4fdd\u8981\u4fee\u6539\u7684\u5c5e\u6027\u4e0d\u5305\u542b\u7d22\u5f15\uff0c\u5426\u5219 ALTER EDGE \u65f6\u4f1a\u62a5\u51b2\u7a81\u9519\u8bef [ERROR (-1005)]: Conflict! \u3002\u5220\u9664\u7d22\u5f15\u8bf7\u53c2\u89c1 drop index \u3002 \u786e\u4fdd\u65b0\u589e\u7684\u5c5e\u6027\u540d\u4e0d\u4e0e\u5df2\u5b58\u5728\u6216\u88ab\u5220\u9664\u7684\u5c5e\u6027\u540d\u540c\u540d\uff0c\u5426\u5219\u65b0\u589e\u5c5e\u6027\u4f1a\u5931\u8d25\u3002 \u5141\u8bb8\u589e\u52a0 FIXED_STRING \u548c INT \u7c7b\u578b\u7684\u957f\u5ea6\u3002 \u5141\u8bb8 FIXED_STRING \u7c7b\u578b\u8f6c\u6362\u4e3a STRING \u7c7b\u578b\u3001 FLOAT \u7c7b\u578b\u8f6c\u6362\u4e3a DOUBLE \u7c7b\u578b\u3002","title":"\u6ce8\u610f\u4e8b\u9879"},{"location":"3.ngql-guide/11.edge-type-statements/3.alter-edge/#_2","text":"ALTER EDGE <edge_type_name> <alter_definition> [, alter_definition] ...] [ttl_definition [, ttl_definition] ... ] [COMMENT = '<comment>']; alter_definition: | ADD (prop_name data_type) | DROP (prop_name) | CHANGE (prop_name data_type) ttl_definition: TTL_DURATION = ttl_duration, TTL_COL = prop_name edge_type_name \uff1a\u6307\u5b9a\u8981\u4fee\u6539\u7684 Edge type \u540d\u79f0\u3002\u4e00\u6b21\u53ea\u80fd\u4fee\u6539\u4e00\u4e2a Edge type\u3002\u8bf7\u786e\u4fdd\u8981\u4fee\u6539\u7684 Edge type \u5728\u5f53\u524d\u5de5\u4f5c\u7a7a\u95f4\u4e2d\u5b58\u5728\uff0c\u5426\u5219\u4f1a\u62a5\u9519\u3002 \u53ef\u4ee5\u5728\u4e00\u4e2a ALTER EDGE \u8bed\u53e5\u4e2d\u4f7f\u7528\u591a\u4e2a ADD \u3001 DROP \u548c CHANGE \u5b50\u53e5\uff0c\u5b50\u53e5\u4e4b\u95f4\u7528\u82f1\u6587\u9017\u53f7\uff08,\uff09\u5206\u9694\u3002 \u5f53\u4f7f\u7528 ADD \u6216 CHANGE \u6307\u5b9a\u5c5e\u6027\u503c\u4e3a NOT NULL \u65f6\uff0c\u5fc5\u9700\u4e3a\u8be5\u5c5e\u6027\u6307\u5b9a\u9ed8\u8ba4\u503c\uff0c\u5373\u5b9a\u4e49 DEFAULT \u7684\u503c\u3002","title":"\u8bed\u6cd5"},{"location":"3.ngql-guide/11.edge-type-statements/3.alter-edge/#_3","text":"nebula> CREATE EDGE IF NOT EXISTS e1(p1 string, p2 int); nebula> ALTER EDGE e1 ADD (p3 int, p4 string); nebula> ALTER EDGE e1 TTL_DURATION = 2, TTL_COL = \"p2\"; nebula> ALTER EDGE e1 COMMENT = 'edge1';","title":"\u793a\u4f8b"},{"location":"3.ngql-guide/11.edge-type-statements/3.alter-edge/#edge_type","text":"\u5c1d\u8bd5\u4f7f\u7528\u521a\u4fee\u6539\u7684 Edge type \u53ef\u80fd\u4f1a\u5931\u8d25\uff0c\u56e0\u4e3a\u4fee\u6539\u662f\u5f02\u6b65\u5b9e\u73b0\u7684\u3002\u4e3a\u786e\u4fdd\u6570\u636e\u540c\u6b65\uff0c\u540e\u7eed\u64cd\u4f5c\u80fd\u987a\u5229\u8fdb\u884c\uff0c\u8bf7\u7b49\u5f85 2 \u4e2a\u5fc3\u8df3\u5468\u671f\uff0820 \u79d2\uff09\u3002 \u5982\u679c\u9700\u8981\u4fee\u6539\u5fc3\u8df3\u95f4\u9694\uff0c\u8bf7\u4e3a \u6240\u6709\u914d\u7f6e\u6587\u4ef6 \u4fee\u6539\u53c2\u6570 heartbeat_interval_secs \u3002","title":"\u4fee\u6539 Edge type \u8bf4\u660e"},{"location":"3.ngql-guide/11.edge-type-statements/4.show-edges/","text":"SHOW EDGES \u00b6 SHOW EDGES \u8bed\u53e5\u663e\u793a\u5f53\u524d\u56fe\u7a7a\u95f4\u5185\u7684\u6240\u6709 Edge type \u540d\u79f0\u3002 \u6267\u884c SHOW EDGES \u8bed\u53e5\u4e0d\u9700\u8981\u4efb\u4f55\u6743\u9650\uff0c\u4f46\u662f\u8fd4\u56de\u7ed3\u679c\u7531\u767b\u5f55\u7684\u7528\u6237 \u6743\u9650 \u51b3\u5b9a\u3002 \u8bed\u6cd5 \u00b6 SHOW EDGES; \u793a\u4f8b \u00b6 nebula> SHOW EDGES; +----------+ | Name | +----------+ | \"follow\" | | \"serve\" | +----------+","title":"SHOW EDGES"},{"location":"3.ngql-guide/11.edge-type-statements/4.show-edges/#show_edges","text":"SHOW EDGES \u8bed\u53e5\u663e\u793a\u5f53\u524d\u56fe\u7a7a\u95f4\u5185\u7684\u6240\u6709 Edge type \u540d\u79f0\u3002 \u6267\u884c SHOW EDGES \u8bed\u53e5\u4e0d\u9700\u8981\u4efb\u4f55\u6743\u9650\uff0c\u4f46\u662f\u8fd4\u56de\u7ed3\u679c\u7531\u767b\u5f55\u7684\u7528\u6237 \u6743\u9650 \u51b3\u5b9a\u3002","title":"SHOW EDGES"},{"location":"3.ngql-guide/11.edge-type-statements/4.show-edges/#_1","text":"SHOW EDGES;","title":"\u8bed\u6cd5"},{"location":"3.ngql-guide/11.edge-type-statements/4.show-edges/#_2","text":"nebula> SHOW EDGES; +----------+ | Name | +----------+ | \"follow\" | | \"serve\" | +----------+","title":"\u793a\u4f8b"},{"location":"3.ngql-guide/11.edge-type-statements/5.describe-edge/","text":"DESCRIBE EDGE \u00b6 DESCRIBE EDGE \u663e\u793a\u6307\u5b9a Edge type \u7684\u8be6\u7ec6\u4fe1\u606f\uff0c\u4f8b\u5982\u5b57\u6bb5\u540d\u79f0\u3001\u6570\u636e\u7c7b\u578b\u7b49\u3002 \u524d\u63d0\u6761\u4ef6 \u00b6 \u767b\u5f55\u7684\u7528\u6237\u5fc5\u987b\u62e5\u6709\u5bf9\u5e94\u6743\u9650\u624d\u80fd\u6267\u884c DESCRIBE EDGE \u8bed\u53e5\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1 \u5185\u7f6e\u89d2\u8272\u6743\u9650 \u3002 \u8bed\u6cd5 \u00b6 DESC[RIBE] EDGE <edge_type_name> DESCRIBE \u53ef\u4ee5\u7f29\u5199\u4e3a DESC \u3002 \u793a\u4f8b \u00b6 nebula> DESCRIBE EDGE follow; +----------+---------+-------+---------+---------+ | Field | Type | Null | Default | Comment | +----------+---------+-------+---------+---------+ | \"degree\" | \"int64\" | \"YES\" | | | +----------+---------+-------+---------+---------+","title":"DESCRIBE EDGE"},{"location":"3.ngql-guide/11.edge-type-statements/5.describe-edge/#describe_edge","text":"DESCRIBE EDGE \u663e\u793a\u6307\u5b9a Edge type \u7684\u8be6\u7ec6\u4fe1\u606f\uff0c\u4f8b\u5982\u5b57\u6bb5\u540d\u79f0\u3001\u6570\u636e\u7c7b\u578b\u7b49\u3002","title":"DESCRIBE EDGE"},{"location":"3.ngql-guide/11.edge-type-statements/5.describe-edge/#_1","text":"\u767b\u5f55\u7684\u7528\u6237\u5fc5\u987b\u62e5\u6709\u5bf9\u5e94\u6743\u9650\u624d\u80fd\u6267\u884c DESCRIBE EDGE \u8bed\u53e5\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1 \u5185\u7f6e\u89d2\u8272\u6743\u9650 \u3002","title":"\u524d\u63d0\u6761\u4ef6"},{"location":"3.ngql-guide/11.edge-type-statements/5.describe-edge/#_2","text":"DESC[RIBE] EDGE <edge_type_name> DESCRIBE \u53ef\u4ee5\u7f29\u5199\u4e3a DESC \u3002","title":"\u8bed\u6cd5"},{"location":"3.ngql-guide/11.edge-type-statements/5.describe-edge/#_3","text":"nebula> DESCRIBE EDGE follow; +----------+---------+-------+---------+---------+ | Field | Type | Null | Default | Comment | +----------+---------+-------+---------+---------+ | \"degree\" | \"int64\" | \"YES\" | | | +----------+---------+-------+---------+---------+","title":"\u793a\u4f8b"},{"location":"3.ngql-guide/12.vertex-statements/1.insert-vertex/","text":"INSERT VERTEX \u00b6 INSERT VERTEX \u8bed\u53e5\u53ef\u4ee5\u5728NebulaGraph\u5b9e\u4f8b\u7684\u6307\u5b9a\u56fe\u7a7a\u95f4\u4e2d\u63d2\u5165\u4e00\u4e2a\u6216\u591a\u4e2a\u70b9\u3002 \u524d\u63d0\u6761\u4ef6 \u00b6 \u6267\u884c INSERT VERTEX \u8bed\u53e5\u9700\u8981\u5f53\u524d\u767b\u5f55\u7684\u7528\u6237\u62e5\u6709\u6307\u5b9a\u56fe\u7a7a\u95f4\u7684 \u63d2\u5165\u70b9\u6743\u9650 \uff0c\u5426\u5219\u4f1a\u62a5\u9519\u3002 \u8bed\u6cd5 \u00b6 INSERT VERTEX [IF NOT EXISTS] [tag_props, [tag_props] ...] VALUES VID: ([prop_value_list]) tag_props: tag_name ([prop_name_list]) prop_name_list: [prop_name [, prop_name] ...] prop_value_list: [prop_value [, prop_value] ...] IF NOT EXISTS \uff1a\u68c0\u6d4b\u5f85\u63d2\u5165\u7684 VID \u662f\u5426\u5b58\u5728\uff0c\u53ea\u6709\u4e0d\u5b58\u5728\u65f6\uff0c\u624d\u4f1a\u63d2\u5165\uff0c\u5982\u679c\u5df2\u7ecf\u5b58\u5728\uff0c\u4e0d\u4f1a\u8fdb\u884c\u4fee\u6539\u3002 Note IF NOT EXISTS \u4ec5\u68c0\u6d4b VID + Tag \u7684\u503c\u662f\u5426\u76f8\u540c\uff0c\u4e0d\u4f1a\u68c0\u6d4b\u5c5e\u6027\u503c\u3002 IF NOT EXISTS \u4f1a\u5148\u8bfb\u53d6\u4e00\u6b21\u6570\u636e\u662f\u5426\u5b58\u5728\uff0c\u56e0\u6b64\u5bf9\u6027\u80fd\u4f1a\u6709\u660e\u663e\u5f71\u54cd\u3002 tag_name \uff1a\u70b9\u5173\u8054\u7684 Tag\uff08\u70b9\u7c7b\u578b\uff09\u3002Tag \u7684\u521b\u5efa\uff0c\u8be6\u60c5\u8bf7\u53c2\u89c1 CREATE TAG \u3002 Caution NebulaGraph 3.6.0 \u4e2d\u9ed8\u8ba4\u4e0d\u652f\u6301\u63d2\u5165\u65e0 Tag \u7684\u70b9\u3002\u5982\u9700\u4f7f\u7528\u65e0 Tag \u7684\u70b9\uff0c\u5728\u96c6\u7fa4\u5185\u6240\u6709 Graph \u670d\u52a1\u7684\u914d\u7f6e\u6587\u4ef6\uff08 nebula-graphd.conf \uff09\u4e2d\u65b0\u589e --graph_use_vertex_key=true \uff1b\u5728\u6240\u6709 Storage \u670d\u52a1\u7684\u914d\u7f6e\u6587\u4ef6\uff08 nebula-storaged.conf \uff09\u4e2d\u65b0\u589e --use_vertex_key=true \u3002\u63d2\u5165\u65e0 Tag \u70b9\u7684\u547d\u4ee4\u793a\u4f8b\u5982 INSERT VERTEX VALUES \"1\":(); \u3002 property_name \uff1a\u9700\u8981\u8bbe\u7f6e\u7684\u5c5e\u6027\u540d\u79f0\u3002 vid \uff1a\u70b9 ID\u3002\u5728NebulaGraph 3.6.0 \u4e2d\u652f\u6301\u5b57\u7b26\u4e32\u548c\u6574\u6570\uff0c\u9700\u8981\u5728\u521b\u5efa\u56fe\u7a7a\u95f4\u65f6\u8bbe\u7f6e\uff0c\u8be6\u60c5\u8bf7\u53c2\u89c1 CREATE SPACE \u3002 property_value \uff1a\u6839\u636e prop_name_list \u586b\u5199\u5c5e\u6027\u503c\u3002\u5982\u679c\u6ca1\u6709\u586b\u5199\u5c5e\u6027\u503c\uff0c\u800c Tag \u4e2d\u5bf9\u5e94\u7684\u5c5e\u6027\u8bbe\u7f6e\u4e3a NOT NULL \uff0c\u4f1a\u8fd4\u56de\u9519\u8bef\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1 CREATE TAG \u3002 Caution INSERT VERTEX \u4e0e openCypher \u4e2d CREATE \u7684\u8bed\u610f\u4e0d\u540c\uff1a INSERT VERTEX \u8bed\u610f\u66f4\u63a5\u8fd1\u4e8e NoSQL(key-value) \u65b9\u5f0f\u7684 INSERT \u8bed\u610f\uff0c\u6216\u8005 SQL \u4e2d\u7684 UPSERT ( UPDATE or INSERT )\u3002 \u76f8\u540c VID \u548c TAG \u7684\u60c5\u51b5\u4e0b\uff0c\u5982\u679c\u6ca1\u6709\u4f7f\u7528 IF NOT EXISTS \uff0c\u65b0\u5199\u5165\u7684\u6570\u636e\u4f1a\u8986\u76d6\u65e7\u6570\u636e\uff0c\u4e0d\u5b58\u5728\u65f6\u4f1a\u65b0\u5199\u5165\u3002 \u76f8\u540c VID \u4f46\u4e0d\u540c TAG \u7684\u60c5\u51b5\u4e0b\uff0c\u4e0d\u540c TAG \u5bf9\u5e94\u7684\u8bb0\u5f55\u4e0d\u4f1a\u76f8\u4e92\u8986\u76d6\uff0c\u4e0d\u5b58\u5728\u4f1a\u65b0\u5199\u5165\u3002 \u53c2\u8003\u4ee5\u4e0b\u793a\u4f8b\u3002 \u793a\u4f8b \u00b6 # \u63d2\u5165\u4e0d\u5305\u542b\u5c5e\u6027\u7684\u70b9\u3002 nebula> CREATE TAG IF NOT EXISTS t1(); nebula> INSERT VERTEX t1() VALUES \"10\":(); nebula> CREATE TAG IF NOT EXISTS t2 (name string, age int); nebula> INSERT VERTEX t2 (name, age) VALUES \"11\":(\"n1\", 12); # \u521b\u5efa\u5931\u8d25\uff0c\u56e0\u4e3a\"a13\"\u4e0d\u662f int \u7c7b\u578b\u3002 nebula> INSERT VERTEX t2 (name, age) VALUES \"12\":(\"n1\", \"a13\"); # \u4e00\u6b21\u63d2\u5165 2 \u4e2a\u70b9\u3002 nebula> INSERT VERTEX t2 (name, age) VALUES \"13\":(\"n3\", 12), \"14\":(\"n4\", 8); nebula> CREATE TAG IF NOT EXISTS t3(p1 int); nebula> CREATE TAG IF NOT EXISTS t4(p2 string); # \u4e00\u6b21\u63d2\u5165\u4e24\u4e2a Tag \u7684\u5c5e\u6027\u5230\u540c\u4e00\u4e2a\u70b9\u3002 nebula> INSERT VERTEX t3 (p1), t4(p2) VALUES \"21\": (321, \"hello\"); \u4e00\u4e2a\u70b9\u53ef\u4ee5\u591a\u6b21\u63d2\u5165\u5c5e\u6027\u503c\uff0c\u4ee5\u6700\u540e\u4e00\u6b21\u4e3a\u51c6\u3002 # \u591a\u6b21\u63d2\u5165\u5c5e\u6027\u503c\u3002 nebula> INSERT VERTEX t2 (name, age) VALUES \"11\":(\"n2\", 13); nebula> INSERT VERTEX t2 (name, age) VALUES \"11\":(\"n3\", 14); nebula> INSERT VERTEX t2 (name, age) VALUES \"11\":(\"n4\", 15); nebula> FETCH PROP ON t2 \"11\" YIELD properties(vertex); +-----------------------+ | properties(VERTEX) | +-----------------------+ | {age: 15, name: \"n4\"} | +-----------------------+ nebula> CREATE TAG IF NOT EXISTS t5(p1 fixed_string(5) NOT NULL, p2 int, p3 int DEFAULT NULL); nebula> INSERT VERTEX t5(p1, p2, p3) VALUES \"001\":(\"Abe\", 2, 3); # \u63d2\u5165\u5931\u8d25\uff0c\u56e0\u4e3a\u5c5e\u6027 p1 \u4e0d\u80fd\u4e3a NULL\u3002 nebula> INSERT VERTEX t5(p1, p2, p3) VALUES \"002\":(NULL, 4, 5); [ERROR (-1009)]: SemanticError: No schema found for `t5' # \u5c5e\u6027 p3 \u4e3a\u9ed8\u8ba4\u503c NULL\u3002 nebula> INSERT VERTEX t5(p1, p2) VALUES \"003\":(\"cd\", 5); nebula> FETCH PROP ON t5 \"003\" YIELD properties(vertex); +---------------------------------+ | properties(VERTEX) | +---------------------------------+ | {p1: \"cd\", p2: 5, p3: __NULL__} | +---------------------------------+ # \u5c5e\u6027 p1 \u6700\u5927\u957f\u5ea6\u4e3a 5\uff0c\u56e0\u6b64\u4f1a\u88ab\u622a\u65ad\u3002 nebula> INSERT VERTEX t5(p1, p2) VALUES \"004\":(\"shalalalala\", 4); nebula> FETCH PROP on t5 \"004\" YIELD properties(vertex); +------------------------------------+ | properties(VERTEX) | +------------------------------------+ | {p1: \"shala\", p2: 4, p3: __NULL__} | +------------------------------------+ \u4f7f\u7528 IF NOT EXISTS \u63d2\u5165\u5df2\u5b58\u5728\u7684\u70b9\u65f6\uff0c\u4e0d\u4f1a\u8fdb\u884c\u4fee\u6539\u3002 # \u63d2\u5165\u70b9 1\u3002 nebula> INSERT VERTEX t2 (name, age) VALUES \"1\":(\"n2\", 13); # \u4f7f\u7528 IF NOT EXISTS \u4fee\u6539\u70b9 1\uff0c\u56e0\u4e3a\u70b9 1 \u5df2\u5b58\u5728\uff0c\u4e0d\u4f1a\u8fdb\u884c\u4fee\u6539\u3002 nebula> INSERT VERTEX IF NOT EXISTS t2 (name, age) VALUES \"1\":(\"n3\", 14); nebula> FETCH PROP ON t2 \"1\" YIELD properties(vertex); +-----------------------+ | properties(VERTEX) | +-----------------------+ | {age: 13, name: \"n2\"} | +-----------------------+","title":"INSERT VERTEX"},{"location":"3.ngql-guide/12.vertex-statements/1.insert-vertex/#insert_vertex","text":"INSERT VERTEX \u8bed\u53e5\u53ef\u4ee5\u5728NebulaGraph\u5b9e\u4f8b\u7684\u6307\u5b9a\u56fe\u7a7a\u95f4\u4e2d\u63d2\u5165\u4e00\u4e2a\u6216\u591a\u4e2a\u70b9\u3002","title":"INSERT VERTEX"},{"location":"3.ngql-guide/12.vertex-statements/1.insert-vertex/#_1","text":"\u6267\u884c INSERT VERTEX \u8bed\u53e5\u9700\u8981\u5f53\u524d\u767b\u5f55\u7684\u7528\u6237\u62e5\u6709\u6307\u5b9a\u56fe\u7a7a\u95f4\u7684 \u63d2\u5165\u70b9\u6743\u9650 \uff0c\u5426\u5219\u4f1a\u62a5\u9519\u3002","title":"\u524d\u63d0\u6761\u4ef6"},{"location":"3.ngql-guide/12.vertex-statements/1.insert-vertex/#_2","text":"INSERT VERTEX [IF NOT EXISTS] [tag_props, [tag_props] ...] VALUES VID: ([prop_value_list]) tag_props: tag_name ([prop_name_list]) prop_name_list: [prop_name [, prop_name] ...] prop_value_list: [prop_value [, prop_value] ...] IF NOT EXISTS \uff1a\u68c0\u6d4b\u5f85\u63d2\u5165\u7684 VID \u662f\u5426\u5b58\u5728\uff0c\u53ea\u6709\u4e0d\u5b58\u5728\u65f6\uff0c\u624d\u4f1a\u63d2\u5165\uff0c\u5982\u679c\u5df2\u7ecf\u5b58\u5728\uff0c\u4e0d\u4f1a\u8fdb\u884c\u4fee\u6539\u3002 Note IF NOT EXISTS \u4ec5\u68c0\u6d4b VID + Tag \u7684\u503c\u662f\u5426\u76f8\u540c\uff0c\u4e0d\u4f1a\u68c0\u6d4b\u5c5e\u6027\u503c\u3002 IF NOT EXISTS \u4f1a\u5148\u8bfb\u53d6\u4e00\u6b21\u6570\u636e\u662f\u5426\u5b58\u5728\uff0c\u56e0\u6b64\u5bf9\u6027\u80fd\u4f1a\u6709\u660e\u663e\u5f71\u54cd\u3002 tag_name \uff1a\u70b9\u5173\u8054\u7684 Tag\uff08\u70b9\u7c7b\u578b\uff09\u3002Tag \u7684\u521b\u5efa\uff0c\u8be6\u60c5\u8bf7\u53c2\u89c1 CREATE TAG \u3002 Caution NebulaGraph 3.6.0 \u4e2d\u9ed8\u8ba4\u4e0d\u652f\u6301\u63d2\u5165\u65e0 Tag \u7684\u70b9\u3002\u5982\u9700\u4f7f\u7528\u65e0 Tag \u7684\u70b9\uff0c\u5728\u96c6\u7fa4\u5185\u6240\u6709 Graph \u670d\u52a1\u7684\u914d\u7f6e\u6587\u4ef6\uff08 nebula-graphd.conf \uff09\u4e2d\u65b0\u589e --graph_use_vertex_key=true \uff1b\u5728\u6240\u6709 Storage \u670d\u52a1\u7684\u914d\u7f6e\u6587\u4ef6\uff08 nebula-storaged.conf \uff09\u4e2d\u65b0\u589e --use_vertex_key=true \u3002\u63d2\u5165\u65e0 Tag \u70b9\u7684\u547d\u4ee4\u793a\u4f8b\u5982 INSERT VERTEX VALUES \"1\":(); \u3002 property_name \uff1a\u9700\u8981\u8bbe\u7f6e\u7684\u5c5e\u6027\u540d\u79f0\u3002 vid \uff1a\u70b9 ID\u3002\u5728NebulaGraph 3.6.0 \u4e2d\u652f\u6301\u5b57\u7b26\u4e32\u548c\u6574\u6570\uff0c\u9700\u8981\u5728\u521b\u5efa\u56fe\u7a7a\u95f4\u65f6\u8bbe\u7f6e\uff0c\u8be6\u60c5\u8bf7\u53c2\u89c1 CREATE SPACE \u3002 property_value \uff1a\u6839\u636e prop_name_list \u586b\u5199\u5c5e\u6027\u503c\u3002\u5982\u679c\u6ca1\u6709\u586b\u5199\u5c5e\u6027\u503c\uff0c\u800c Tag \u4e2d\u5bf9\u5e94\u7684\u5c5e\u6027\u8bbe\u7f6e\u4e3a NOT NULL \uff0c\u4f1a\u8fd4\u56de\u9519\u8bef\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1 CREATE TAG \u3002 Caution INSERT VERTEX \u4e0e openCypher \u4e2d CREATE \u7684\u8bed\u610f\u4e0d\u540c\uff1a INSERT VERTEX \u8bed\u610f\u66f4\u63a5\u8fd1\u4e8e NoSQL(key-value) \u65b9\u5f0f\u7684 INSERT \u8bed\u610f\uff0c\u6216\u8005 SQL \u4e2d\u7684 UPSERT ( UPDATE or INSERT )\u3002 \u76f8\u540c VID \u548c TAG \u7684\u60c5\u51b5\u4e0b\uff0c\u5982\u679c\u6ca1\u6709\u4f7f\u7528 IF NOT EXISTS \uff0c\u65b0\u5199\u5165\u7684\u6570\u636e\u4f1a\u8986\u76d6\u65e7\u6570\u636e\uff0c\u4e0d\u5b58\u5728\u65f6\u4f1a\u65b0\u5199\u5165\u3002 \u76f8\u540c VID \u4f46\u4e0d\u540c TAG \u7684\u60c5\u51b5\u4e0b\uff0c\u4e0d\u540c TAG \u5bf9\u5e94\u7684\u8bb0\u5f55\u4e0d\u4f1a\u76f8\u4e92\u8986\u76d6\uff0c\u4e0d\u5b58\u5728\u4f1a\u65b0\u5199\u5165\u3002 \u53c2\u8003\u4ee5\u4e0b\u793a\u4f8b\u3002","title":"\u8bed\u6cd5"},{"location":"3.ngql-guide/12.vertex-statements/1.insert-vertex/#_3","text":"# \u63d2\u5165\u4e0d\u5305\u542b\u5c5e\u6027\u7684\u70b9\u3002 nebula> CREATE TAG IF NOT EXISTS t1(); nebula> INSERT VERTEX t1() VALUES \"10\":(); nebula> CREATE TAG IF NOT EXISTS t2 (name string, age int); nebula> INSERT VERTEX t2 (name, age) VALUES \"11\":(\"n1\", 12); # \u521b\u5efa\u5931\u8d25\uff0c\u56e0\u4e3a\"a13\"\u4e0d\u662f int \u7c7b\u578b\u3002 nebula> INSERT VERTEX t2 (name, age) VALUES \"12\":(\"n1\", \"a13\"); # \u4e00\u6b21\u63d2\u5165 2 \u4e2a\u70b9\u3002 nebula> INSERT VERTEX t2 (name, age) VALUES \"13\":(\"n3\", 12), \"14\":(\"n4\", 8); nebula> CREATE TAG IF NOT EXISTS t3(p1 int); nebula> CREATE TAG IF NOT EXISTS t4(p2 string); # \u4e00\u6b21\u63d2\u5165\u4e24\u4e2a Tag \u7684\u5c5e\u6027\u5230\u540c\u4e00\u4e2a\u70b9\u3002 nebula> INSERT VERTEX t3 (p1), t4(p2) VALUES \"21\": (321, \"hello\"); \u4e00\u4e2a\u70b9\u53ef\u4ee5\u591a\u6b21\u63d2\u5165\u5c5e\u6027\u503c\uff0c\u4ee5\u6700\u540e\u4e00\u6b21\u4e3a\u51c6\u3002 # \u591a\u6b21\u63d2\u5165\u5c5e\u6027\u503c\u3002 nebula> INSERT VERTEX t2 (name, age) VALUES \"11\":(\"n2\", 13); nebula> INSERT VERTEX t2 (name, age) VALUES \"11\":(\"n3\", 14); nebula> INSERT VERTEX t2 (name, age) VALUES \"11\":(\"n4\", 15); nebula> FETCH PROP ON t2 \"11\" YIELD properties(vertex); +-----------------------+ | properties(VERTEX) | +-----------------------+ | {age: 15, name: \"n4\"} | +-----------------------+ nebula> CREATE TAG IF NOT EXISTS t5(p1 fixed_string(5) NOT NULL, p2 int, p3 int DEFAULT NULL); nebula> INSERT VERTEX t5(p1, p2, p3) VALUES \"001\":(\"Abe\", 2, 3); # \u63d2\u5165\u5931\u8d25\uff0c\u56e0\u4e3a\u5c5e\u6027 p1 \u4e0d\u80fd\u4e3a NULL\u3002 nebula> INSERT VERTEX t5(p1, p2, p3) VALUES \"002\":(NULL, 4, 5); [ERROR (-1009)]: SemanticError: No schema found for `t5' # \u5c5e\u6027 p3 \u4e3a\u9ed8\u8ba4\u503c NULL\u3002 nebula> INSERT VERTEX t5(p1, p2) VALUES \"003\":(\"cd\", 5); nebula> FETCH PROP ON t5 \"003\" YIELD properties(vertex); +---------------------------------+ | properties(VERTEX) | +---------------------------------+ | {p1: \"cd\", p2: 5, p3: __NULL__} | +---------------------------------+ # \u5c5e\u6027 p1 \u6700\u5927\u957f\u5ea6\u4e3a 5\uff0c\u56e0\u6b64\u4f1a\u88ab\u622a\u65ad\u3002 nebula> INSERT VERTEX t5(p1, p2) VALUES \"004\":(\"shalalalala\", 4); nebula> FETCH PROP on t5 \"004\" YIELD properties(vertex); +------------------------------------+ | properties(VERTEX) | +------------------------------------+ | {p1: \"shala\", p2: 4, p3: __NULL__} | +------------------------------------+ \u4f7f\u7528 IF NOT EXISTS \u63d2\u5165\u5df2\u5b58\u5728\u7684\u70b9\u65f6\uff0c\u4e0d\u4f1a\u8fdb\u884c\u4fee\u6539\u3002 # \u63d2\u5165\u70b9 1\u3002 nebula> INSERT VERTEX t2 (name, age) VALUES \"1\":(\"n2\", 13); # \u4f7f\u7528 IF NOT EXISTS \u4fee\u6539\u70b9 1\uff0c\u56e0\u4e3a\u70b9 1 \u5df2\u5b58\u5728\uff0c\u4e0d\u4f1a\u8fdb\u884c\u4fee\u6539\u3002 nebula> INSERT VERTEX IF NOT EXISTS t2 (name, age) VALUES \"1\":(\"n3\", 14); nebula> FETCH PROP ON t2 \"1\" YIELD properties(vertex); +-----------------------+ | properties(VERTEX) | +-----------------------+ | {age: 13, name: \"n2\"} | +-----------------------+","title":"\u793a\u4f8b"},{"location":"3.ngql-guide/12.vertex-statements/2.update-vertex/","text":"UPDATE VERTEX \u00b6 UPDATE VERTEX \u8bed\u53e5\u53ef\u4ee5\u4fee\u6539\u70b9\u4e0a Tag \u7684\u5c5e\u6027\u503c\u3002 NebulaGraph\u652f\u6301 CAS\uff08compare and set\uff09\u64cd\u4f5c\u3002 Note \u4e00\u6b21\u53ea\u80fd\u4fee\u6539\u4e00\u4e2a Tag\u3002 \u8bed\u6cd5 \u00b6 UPDATE VERTEX ON <tag_name> <vid> SET <update_prop> [WHEN <condition>] [YIELD <output>] \u53c2\u6570 \u662f\u5426\u5fc5\u987b \u8bf4\u660e \u793a\u4f8b ON <tag_name> \u662f \u6307\u5b9a\u70b9\u7684 Tag\u3002\u8981\u4fee\u6539\u7684\u5c5e\u6027\u5fc5\u987b\u5728\u8fd9\u4e2a Tag \u5185\u3002 ON player <vid> \u662f \u6307\u5b9a\u8981\u4fee\u6539\u7684\u70b9 ID\u3002 \"player100\" SET <update_prop> \u662f \u6307\u5b9a\u5982\u4f55\u4fee\u6539\u5c5e\u6027\u503c\u3002 SET age = age +1 WHEN <condition> \u5426 \u6307\u5b9a\u8fc7\u6ee4\u6761\u4ef6\u3002\u5982\u679c <condition> \u7ed3\u679c\u4e3a false \uff0c SET \u5b50\u53e5\u4e0d\u4f1a\u751f\u6548\u3002 WHEN name == \"Tim\" YIELD <output> \u5426 \u6307\u5b9a\u8bed\u53e5\u7684\u8f93\u51fa\u683c\u5f0f\u3002 YIELD name AS Name \u793a\u4f8b \u00b6 // \u67e5\u770b\u70b9\u201dplayer101\u201c\u7684\u5c5e\u6027\u3002 nebula> FETCH PROP ON player \"player101\" YIELD properties(vertex); +--------------------------------+ | properties(VERTEX) | +--------------------------------+ | {age: 36, name: \"Tony Parker\"} | +--------------------------------+ // \u4fee\u6539\u5c5e\u6027 age \u7684\u503c\uff0c\u5e76\u8fd4\u56de name \u548c\u65b0\u7684 age\u3002 nebula> UPDATE VERTEX ON player \"player101\" \\ SET age = age + 2 \\ WHEN name == \"Tony Parker\" \\ YIELD name AS Name, age AS Age; +---------------+-----+ | Name | Age | +---------------+-----+ | \"Tony Parker\" | 38 | +---------------+-----+","title":"UPDATE VERTEX"},{"location":"3.ngql-guide/12.vertex-statements/2.update-vertex/#update_vertex","text":"UPDATE VERTEX \u8bed\u53e5\u53ef\u4ee5\u4fee\u6539\u70b9\u4e0a Tag \u7684\u5c5e\u6027\u503c\u3002 NebulaGraph\u652f\u6301 CAS\uff08compare and set\uff09\u64cd\u4f5c\u3002 Note \u4e00\u6b21\u53ea\u80fd\u4fee\u6539\u4e00\u4e2a Tag\u3002","title":"UPDATE VERTEX"},{"location":"3.ngql-guide/12.vertex-statements/2.update-vertex/#_1","text":"UPDATE VERTEX ON <tag_name> <vid> SET <update_prop> [WHEN <condition>] [YIELD <output>] \u53c2\u6570 \u662f\u5426\u5fc5\u987b \u8bf4\u660e \u793a\u4f8b ON <tag_name> \u662f \u6307\u5b9a\u70b9\u7684 Tag\u3002\u8981\u4fee\u6539\u7684\u5c5e\u6027\u5fc5\u987b\u5728\u8fd9\u4e2a Tag \u5185\u3002 ON player <vid> \u662f \u6307\u5b9a\u8981\u4fee\u6539\u7684\u70b9 ID\u3002 \"player100\" SET <update_prop> \u662f \u6307\u5b9a\u5982\u4f55\u4fee\u6539\u5c5e\u6027\u503c\u3002 SET age = age +1 WHEN <condition> \u5426 \u6307\u5b9a\u8fc7\u6ee4\u6761\u4ef6\u3002\u5982\u679c <condition> \u7ed3\u679c\u4e3a false \uff0c SET \u5b50\u53e5\u4e0d\u4f1a\u751f\u6548\u3002 WHEN name == \"Tim\" YIELD <output> \u5426 \u6307\u5b9a\u8bed\u53e5\u7684\u8f93\u51fa\u683c\u5f0f\u3002 YIELD name AS Name","title":"\u8bed\u6cd5"},{"location":"3.ngql-guide/12.vertex-statements/2.update-vertex/#_2","text":"// \u67e5\u770b\u70b9\u201dplayer101\u201c\u7684\u5c5e\u6027\u3002 nebula> FETCH PROP ON player \"player101\" YIELD properties(vertex); +--------------------------------+ | properties(VERTEX) | +--------------------------------+ | {age: 36, name: \"Tony Parker\"} | +--------------------------------+ // \u4fee\u6539\u5c5e\u6027 age \u7684\u503c\uff0c\u5e76\u8fd4\u56de name \u548c\u65b0\u7684 age\u3002 nebula> UPDATE VERTEX ON player \"player101\" \\ SET age = age + 2 \\ WHEN name == \"Tony Parker\" \\ YIELD name AS Name, age AS Age; +---------------+-----+ | Name | Age | +---------------+-----+ | \"Tony Parker\" | 38 | +---------------+-----+","title":"\u793a\u4f8b"},{"location":"3.ngql-guide/12.vertex-statements/3.upsert-vertex/","text":"UPSERT VERTEX \u00b6 UPSERT VERTEX \u8bed\u53e5\u7ed3\u5408 UPDATE \u548c INSERT \uff0c\u5982\u679c\u70b9\u5b58\u5728\uff0c\u4f1a\u4fee\u6539\u70b9\u7684\u5c5e\u6027\u503c\uff1b\u5982\u679c\u70b9\u4e0d\u5b58\u5728\uff0c\u4f1a\u63d2\u5165\u65b0\u7684\u70b9\u3002 Note UPSERT VERTEX \u4e00\u6b21\u53ea\u80fd\u4fee\u6539\u4e00\u4e2a Tag\u3002 UPSERT VERTEX \u6027\u80fd\u8fdc\u4f4e\u4e8e INSERT \uff0c\u56e0\u4e3a UPSERT \u662f\u4e00\u7ec4\u5206\u7247\u7ea7\u522b\u7684\u8bfb\u53d6\u3001\u4fee\u6539\u3001\u5199\u5165\u64cd\u4f5c\u3002 Caution \u5e76\u53d1 UPSERT \u540c\u4e00\u4e2a TAG \u6216 EDGE TYPE \u4f1a\u62a5\u9519\u3002 \u8bed\u6cd5 \u00b6 UPSERT VERTEX ON <tag> <vid> SET <update_prop> [WHEN <condition>] [YIELD <output>] \u53c2\u6570 \u662f\u5426\u5fc5\u987b \u8bf4\u660e \u793a\u4f8b ON <tag> \u662f \u6307\u5b9a\u70b9\u7684 Tag\u3002\u8981\u4fee\u6539\u7684\u5c5e\u6027\u5fc5\u987b\u5728\u8fd9\u4e2a Tag \u5185\u3002 ON player <vid> \u662f \u6307\u5b9a\u8981\u4fee\u6539\u6216\u63d2\u5165\u7684\u70b9 ID\u3002 \"player100\" SET <update_prop> \u662f \u6307\u5b9a\u5982\u4f55\u4fee\u6539\u5c5e\u6027\u503c\u3002 SET age = age +1 WHEN <condition> \u5426 \u6307\u5b9a\u8fc7\u6ee4\u6761\u4ef6\u3002 WHEN name == \"Tim\" YIELD <output> \u5426 \u6307\u5b9a\u8bed\u53e5\u7684\u8f93\u51fa\u683c\u5f0f\u3002 YIELD name AS Name \u63d2\u5165\u4e0d\u5b58\u5728\u7684\u70b9 \u00b6 \u5982\u679c\u70b9\u4e0d\u5b58\u5728\uff0c\u65e0\u8bba WHEN \u5b50\u53e5\u7684\u6761\u4ef6\u662f\u5426\u6ee1\u8db3\uff0c\u90fd\u4f1a\u63d2\u5165\u70b9\uff0c\u540c\u65f6\u6267\u884c SET \u5b50\u53e5\uff0c\u56e0\u6b64\u65b0\u63d2\u5165\u7684\u70b9\u7684\u5c5e\u6027\u503c\u53d6\u51b3\u4e8e\uff1a SET \u5b50\u53e5\u3002 \u5c5e\u6027\u662f\u5426\u6709\u9ed8\u8ba4\u503c\u3002 \u4f8b\u5982\uff1a \u8981\u63d2\u5165\u7684\u70b9\u5305\u542b\u57fa\u4e8e Tag player \u7684\u5c5e\u6027 name \u548c age \u3002 SET \u5b50\u53e5\u6307\u5b9a age=30 \u3002 \u4e0d\u540c\u60c5\u51b5\u4e0b\u7684\u5c5e\u6027\u503c\u5982\u4e0b\u8868\u3002 \u662f\u5426\u6ee1\u8db3 WHEN \u5b50\u53e5\u6761\u4ef6 \u5c5e\u6027\u662f\u5426\u6709\u9ed8\u8ba4\u503c name \u5c5e\u6027\u503c age \u5c5e\u6027\u503c \u662f \u662f \u9ed8\u8ba4\u503c 30 \u662f \u5426 NULL 30 \u5426 \u662f \u9ed8\u8ba4\u503c 30 \u5426 \u5426 NULL 30 \u793a\u4f8b\u5982\u4e0b\uff1a // \u67e5\u770b\u4e09\u4e2a\u70b9\u662f\u5426\u5b58\u5728\uff0c\u7ed3\u679c \u201cEmpty set\u201d \u8868\u793a\u9876\u70b9\u4e0d\u5b58\u5728\u3002 nebula> FETCH PROP ON * \"player666\", \"player667\", \"player668\" YIELD properties(vertex); +--------------------+ | properties(VERTEX) | +--------------------+ +--------------------+ Empty set nebula> UPSERT VERTEX ON player \"player666\" \\ SET age = 30 \\ WHEN name == \"Joe\" \\ YIELD name AS Name, age AS Age; +----------+----------+ | Name | Age | +----------+----------+ | __NULL__ | 30 | +----------+----------+ nebula> UPSERT VERTEX ON player \"player666\" \\ SET age = 31 \\ WHEN name == \"Joe\" \\ YIELD name AS Name, age AS Age; +----------+-----+ | Name | Age | +----------+-----+ | __NULL__ | 30 | +----------+-----+ nebula> UPSERT VERTEX ON player \"player667\" \\ SET age = 31 \\ YIELD name AS Name, age AS Age; +----------+-----+ | Name | Age | +----------+-----+ | __NULL__ | 31 | +----------+-----+ nebula> UPSERT VERTEX ON player \"player668\" \\ SET name = \"Amber\", age = age + 1 \\ YIELD name AS Name, age AS Age; +---------+----------+ | Name | Age | +---------+----------+ | \"Amber\" | __NULL__ | +---------+----------+ \u4e0a\u9762\u6700\u540e\u4e00\u4e2a\u793a\u4f8b\u4e2d\uff0c\u56e0\u4e3a age \u6ca1\u6709\u9ed8\u8ba4\u503c\uff0c\u63d2\u5165\u70b9\u65f6\uff0c age \u9ed8\u8ba4\u503c\u4e3a NULL \uff0c\u6267\u884c age = age + 1 \u540e\u4ecd\u4e3a NULL \u3002\u5982\u679c age \u6709\u9ed8\u8ba4\u503c\uff0c\u5219 age = age + 1 \u53ef\u4ee5\u6b63\u5e38\u6267\u884c\uff0c\u4f8b\u5982\uff1a nebula> CREATE TAG IF NOT EXISTS player_with_default(name string, age int DEFAULT 20); Execution succeeded nebula> UPSERT VERTEX ON player_with_default \"player101\" \\ SET age = age + 1 \\ YIELD name AS Name, age AS Age; +----------+-----+ | Name | Age | +----------+-----+ | __NULL__ | 21 | +----------+-----+ \u4fee\u6539\u5b58\u5728\u7684\u70b9 \u00b6 \u5982\u679c\u70b9\u5b58\u5728\uff0c\u4e14\u6ee1\u8db3 WHEN \u5b50\u53e5\u7684\u6761\u4ef6\uff0c\u5c31\u4f1a\u4fee\u6539\u70b9\u7684\u5c5e\u6027\u503c\u3002 nebula> FETCH PROP ON player \"player101\" YIELD properties(vertex); +--------------------------------+ | properties(VERTEX) | +--------------------------------+ | {age: 36, name: \"Tony Parker\"} | +--------------------------------+ nebula> UPSERT VERTEX ON player \"player101\" \\ SET age = age + 2 \\ WHEN name == \"Tony Parker\" \\ YIELD name AS Name, age AS Age; +---------------+-----+ | Name | Age | +---------------+-----+ | \"Tony Parker\" | 38 | +---------------+-----+ \u5982\u679c\u70b9\u5b58\u5728\uff0c\u4f46\u662f\u4e0d\u6ee1\u8db3 WHEN \u5b50\u53e5\u7684\u6761\u4ef6\uff0c\u4fee\u6539\u4e0d\u4f1a\u751f\u6548\u3002 nebula> FETCH PROP ON player \"player101\" YIELD properties(vertex); +--------------------------------+ | properties(VERTEX) | +--------------------------------+ | {age: 38, name: \"Tony Parker\"} | +--------------------------------+ nebula> UPSERT VERTEX ON player \"player101\" \\ SET age = age + 2 \\ WHEN name == \"Someone else\" \\ YIELD name AS Name, age AS Age; +---------------+-----+ | Name | Age | +---------------+-----+ | \"Tony Parker\" | 38 | +---------------+-----+","title":"UPSERT VERTEX"},{"location":"3.ngql-guide/12.vertex-statements/3.upsert-vertex/#upsert_vertex","text":"UPSERT VERTEX \u8bed\u53e5\u7ed3\u5408 UPDATE \u548c INSERT \uff0c\u5982\u679c\u70b9\u5b58\u5728\uff0c\u4f1a\u4fee\u6539\u70b9\u7684\u5c5e\u6027\u503c\uff1b\u5982\u679c\u70b9\u4e0d\u5b58\u5728\uff0c\u4f1a\u63d2\u5165\u65b0\u7684\u70b9\u3002 Note UPSERT VERTEX \u4e00\u6b21\u53ea\u80fd\u4fee\u6539\u4e00\u4e2a Tag\u3002 UPSERT VERTEX \u6027\u80fd\u8fdc\u4f4e\u4e8e INSERT \uff0c\u56e0\u4e3a UPSERT \u662f\u4e00\u7ec4\u5206\u7247\u7ea7\u522b\u7684\u8bfb\u53d6\u3001\u4fee\u6539\u3001\u5199\u5165\u64cd\u4f5c\u3002 Caution \u5e76\u53d1 UPSERT \u540c\u4e00\u4e2a TAG \u6216 EDGE TYPE \u4f1a\u62a5\u9519\u3002","title":"UPSERT VERTEX"},{"location":"3.ngql-guide/12.vertex-statements/3.upsert-vertex/#_1","text":"UPSERT VERTEX ON <tag> <vid> SET <update_prop> [WHEN <condition>] [YIELD <output>] \u53c2\u6570 \u662f\u5426\u5fc5\u987b \u8bf4\u660e \u793a\u4f8b ON <tag> \u662f \u6307\u5b9a\u70b9\u7684 Tag\u3002\u8981\u4fee\u6539\u7684\u5c5e\u6027\u5fc5\u987b\u5728\u8fd9\u4e2a Tag \u5185\u3002 ON player <vid> \u662f \u6307\u5b9a\u8981\u4fee\u6539\u6216\u63d2\u5165\u7684\u70b9 ID\u3002 \"player100\" SET <update_prop> \u662f \u6307\u5b9a\u5982\u4f55\u4fee\u6539\u5c5e\u6027\u503c\u3002 SET age = age +1 WHEN <condition> \u5426 \u6307\u5b9a\u8fc7\u6ee4\u6761\u4ef6\u3002 WHEN name == \"Tim\" YIELD <output> \u5426 \u6307\u5b9a\u8bed\u53e5\u7684\u8f93\u51fa\u683c\u5f0f\u3002 YIELD name AS Name","title":"\u8bed\u6cd5"},{"location":"3.ngql-guide/12.vertex-statements/3.upsert-vertex/#_2","text":"\u5982\u679c\u70b9\u4e0d\u5b58\u5728\uff0c\u65e0\u8bba WHEN \u5b50\u53e5\u7684\u6761\u4ef6\u662f\u5426\u6ee1\u8db3\uff0c\u90fd\u4f1a\u63d2\u5165\u70b9\uff0c\u540c\u65f6\u6267\u884c SET \u5b50\u53e5\uff0c\u56e0\u6b64\u65b0\u63d2\u5165\u7684\u70b9\u7684\u5c5e\u6027\u503c\u53d6\u51b3\u4e8e\uff1a SET \u5b50\u53e5\u3002 \u5c5e\u6027\u662f\u5426\u6709\u9ed8\u8ba4\u503c\u3002 \u4f8b\u5982\uff1a \u8981\u63d2\u5165\u7684\u70b9\u5305\u542b\u57fa\u4e8e Tag player \u7684\u5c5e\u6027 name \u548c age \u3002 SET \u5b50\u53e5\u6307\u5b9a age=30 \u3002 \u4e0d\u540c\u60c5\u51b5\u4e0b\u7684\u5c5e\u6027\u503c\u5982\u4e0b\u8868\u3002 \u662f\u5426\u6ee1\u8db3 WHEN \u5b50\u53e5\u6761\u4ef6 \u5c5e\u6027\u662f\u5426\u6709\u9ed8\u8ba4\u503c name \u5c5e\u6027\u503c age \u5c5e\u6027\u503c \u662f \u662f \u9ed8\u8ba4\u503c 30 \u662f \u5426 NULL 30 \u5426 \u662f \u9ed8\u8ba4\u503c 30 \u5426 \u5426 NULL 30 \u793a\u4f8b\u5982\u4e0b\uff1a // \u67e5\u770b\u4e09\u4e2a\u70b9\u662f\u5426\u5b58\u5728\uff0c\u7ed3\u679c \u201cEmpty set\u201d \u8868\u793a\u9876\u70b9\u4e0d\u5b58\u5728\u3002 nebula> FETCH PROP ON * \"player666\", \"player667\", \"player668\" YIELD properties(vertex); +--------------------+ | properties(VERTEX) | +--------------------+ +--------------------+ Empty set nebula> UPSERT VERTEX ON player \"player666\" \\ SET age = 30 \\ WHEN name == \"Joe\" \\ YIELD name AS Name, age AS Age; +----------+----------+ | Name | Age | +----------+----------+ | __NULL__ | 30 | +----------+----------+ nebula> UPSERT VERTEX ON player \"player666\" \\ SET age = 31 \\ WHEN name == \"Joe\" \\ YIELD name AS Name, age AS Age; +----------+-----+ | Name | Age | +----------+-----+ | __NULL__ | 30 | +----------+-----+ nebula> UPSERT VERTEX ON player \"player667\" \\ SET age = 31 \\ YIELD name AS Name, age AS Age; +----------+-----+ | Name | Age | +----------+-----+ | __NULL__ | 31 | +----------+-----+ nebula> UPSERT VERTEX ON player \"player668\" \\ SET name = \"Amber\", age = age + 1 \\ YIELD name AS Name, age AS Age; +---------+----------+ | Name | Age | +---------+----------+ | \"Amber\" | __NULL__ | +---------+----------+ \u4e0a\u9762\u6700\u540e\u4e00\u4e2a\u793a\u4f8b\u4e2d\uff0c\u56e0\u4e3a age \u6ca1\u6709\u9ed8\u8ba4\u503c\uff0c\u63d2\u5165\u70b9\u65f6\uff0c age \u9ed8\u8ba4\u503c\u4e3a NULL \uff0c\u6267\u884c age = age + 1 \u540e\u4ecd\u4e3a NULL \u3002\u5982\u679c age \u6709\u9ed8\u8ba4\u503c\uff0c\u5219 age = age + 1 \u53ef\u4ee5\u6b63\u5e38\u6267\u884c\uff0c\u4f8b\u5982\uff1a nebula> CREATE TAG IF NOT EXISTS player_with_default(name string, age int DEFAULT 20); Execution succeeded nebula> UPSERT VERTEX ON player_with_default \"player101\" \\ SET age = age + 1 \\ YIELD name AS Name, age AS Age; +----------+-----+ | Name | Age | +----------+-----+ | __NULL__ | 21 | +----------+-----+","title":"\u63d2\u5165\u4e0d\u5b58\u5728\u7684\u70b9"},{"location":"3.ngql-guide/12.vertex-statements/3.upsert-vertex/#_3","text":"\u5982\u679c\u70b9\u5b58\u5728\uff0c\u4e14\u6ee1\u8db3 WHEN \u5b50\u53e5\u7684\u6761\u4ef6\uff0c\u5c31\u4f1a\u4fee\u6539\u70b9\u7684\u5c5e\u6027\u503c\u3002 nebula> FETCH PROP ON player \"player101\" YIELD properties(vertex); +--------------------------------+ | properties(VERTEX) | +--------------------------------+ | {age: 36, name: \"Tony Parker\"} | +--------------------------------+ nebula> UPSERT VERTEX ON player \"player101\" \\ SET age = age + 2 \\ WHEN name == \"Tony Parker\" \\ YIELD name AS Name, age AS Age; +---------------+-----+ | Name | Age | +---------------+-----+ | \"Tony Parker\" | 38 | +---------------+-----+ \u5982\u679c\u70b9\u5b58\u5728\uff0c\u4f46\u662f\u4e0d\u6ee1\u8db3 WHEN \u5b50\u53e5\u7684\u6761\u4ef6\uff0c\u4fee\u6539\u4e0d\u4f1a\u751f\u6548\u3002 nebula> FETCH PROP ON player \"player101\" YIELD properties(vertex); +--------------------------------+ | properties(VERTEX) | +--------------------------------+ | {age: 38, name: \"Tony Parker\"} | +--------------------------------+ nebula> UPSERT VERTEX ON player \"player101\" \\ SET age = age + 2 \\ WHEN name == \"Someone else\" \\ YIELD name AS Name, age AS Age; +---------------+-----+ | Name | Age | +---------------+-----+ | \"Tony Parker\" | 38 | +---------------+-----+","title":"\u4fee\u6539\u5b58\u5728\u7684\u70b9"},{"location":"3.ngql-guide/12.vertex-statements/4.delete-vertex/","text":"DELETE VERTEX \u00b6 DELETE VERTEX \u8bed\u53e5\u53ef\u4ee5\u5220\u9664\u70b9\uff0c\u4f46\u662f\u9ed8\u8ba4\u4e0d\u5220\u9664\u8be5\u70b9\u5173\u8054\u7684\u51fa\u8fb9\u548c\u5165\u8fb9\u3002 Compatibility NebulaGraph 2.x \u9ed8\u8ba4\u5220\u9664\u70b9\u53ca\u5173\u8054\u8be5\u70b9\u7684\u51fa\u8fb9\u548c\u5165\u8fb9\uff0cNebulaGraph 3.6.0 \u9ed8\u8ba4\u53ea\u5220\u9664\u70b9\uff0c\u4e0d\u5220\u9664\u8be5\u70b9\u5173\u8054\u7684\u51fa\u8fb9\u548c\u5165\u8fb9\uff0c\u6b64\u65f6\u5c06\u9ed8\u8ba4\u5b58\u5728\u60ac\u6302\u8fb9\u3002 DELETE VERTEX \u8bed\u53e5\u4e00\u6b21\u53ef\u4ee5\u5220\u9664\u4e00\u4e2a\u6216\u591a\u4e2a\u70b9\u3002\u7528\u6237\u53ef\u4ee5\u7ed3\u5408\u7ba1\u9053\u7b26\u4e00\u8d77\u4f7f\u7528\uff0c\u8be6\u60c5\u8bf7\u53c2\u89c1 \u7ba1\u9053\u7b26 \u3002 Note DELETE VERTEX \u662f\u76f4\u63a5\u5220\u9664\u70b9\uff0c\u4e0d\u5220\u9664\u5173\u8054\u7684\u8fb9\u3002 DELETE TAG \u662f\u5220\u9664\u6307\u5b9a\u70b9\u4e0a\u7684\u6307\u5b9a Tag\u3002 \u8bed\u6cd5 \u00b6 DELETE VERTEX <vid> [ , <vid> ... ] [WITH EDGE]; WITH EDGE : \u5220\u9664\u8be5\u70b9\u5173\u8054\u7684\u51fa\u8fb9\u548c\u5165\u8fb9\u3002 \u793a\u4f8b \u00b6 # \u5220\u9664 VID \u4e3a `team1` \u7684\u70b9\uff0c\u4e0d\u5220\u9664\u8be5\u70b9\u5173\u8054\u7684\u51fa\u8fb9\u548c\u5165\u8fb9\u3002 nebula> DELETE VERTEX \"team1\"; # \u5220\u9664 VID \u4e3a `team1` \u7684\u70b9\uff0c\u5e76\u5220\u9664\u8be5\u70b9\u5173\u8054\u7684\u51fa\u8fb9\u548c\u5165\u8fb9\u3002 nebula> DELETE VERTEX \"team1\" WITH EDGE; # \u7ed3\u5408\u7ba1\u9053\u7b26\uff0c\u5220\u9664\u7b26\u5408\u6761\u4ef6\u7684\u70b9\u3002 nebula> GO FROM \"player100\" OVER serve WHERE properties(edge).start_year == \"2021\" YIELD dst(edge) AS id | DELETE VERTEX $-.id; \u5220\u9664\u8fc7\u7a0b \u00b6 NebulaGraph\u627e\u5230\u76ee\u6807\u70b9\u5e76\u5220\u9664\uff0c\u8be5\u76ee\u6807\u70b9\u7684\u6240\u6709\u90bb\u8fb9\uff08\u51fa\u8fb9\u548c\u5165\u8fb9\uff09\u5c06\u6210\u4e3a\u60ac\u6302\u8fb9\u3002 Caution \u4e0d\u652f\u6301\u539f\u5b50\u6027\u5220\u9664\uff0c\u5982\u679c\u53d1\u751f\u9519\u8bef\u8bf7\u91cd\u8bd5\uff0c\u907f\u514d\u51fa\u73b0\u90e8\u5206\u5220\u9664\u7684\u60c5\u51b5\u3002\u5426\u5219\u4f1a\u5bfc\u81f4\u60ac\u6302\u8fb9\u3002 \u5220\u9664\u8d85\u7ea7\u8282\u70b9\u8017\u65f6\u8f83\u591a\uff0c\u4e3a\u907f\u514d\u5220\u9664\u5b8c\u6210\u524d\u8fde\u63a5\u8d85\u65f6\uff0c\u53ef\u4ee5\u8c03\u6574 nebula-graphd.conf \u4e2d\u7684\u53c2\u6570 --storage_client_timeout_ms \u5ef6\u957f\u8d85\u65f6\u65f6\u95f4\u3002 \u60ac\u6302\u8fb9\u89c6\u9891 \u00b6 NebulaGraph \u7684\u60ac\u6302\u8fb9\u5c0f\u79d1\u666e \uff082 \u5206 28 \u79d2\uff09","title":"DELETE VERTEX"},{"location":"3.ngql-guide/12.vertex-statements/4.delete-vertex/#delete_vertex","text":"DELETE VERTEX \u8bed\u53e5\u53ef\u4ee5\u5220\u9664\u70b9\uff0c\u4f46\u662f\u9ed8\u8ba4\u4e0d\u5220\u9664\u8be5\u70b9\u5173\u8054\u7684\u51fa\u8fb9\u548c\u5165\u8fb9\u3002 Compatibility NebulaGraph 2.x \u9ed8\u8ba4\u5220\u9664\u70b9\u53ca\u5173\u8054\u8be5\u70b9\u7684\u51fa\u8fb9\u548c\u5165\u8fb9\uff0cNebulaGraph 3.6.0 \u9ed8\u8ba4\u53ea\u5220\u9664\u70b9\uff0c\u4e0d\u5220\u9664\u8be5\u70b9\u5173\u8054\u7684\u51fa\u8fb9\u548c\u5165\u8fb9\uff0c\u6b64\u65f6\u5c06\u9ed8\u8ba4\u5b58\u5728\u60ac\u6302\u8fb9\u3002 DELETE VERTEX \u8bed\u53e5\u4e00\u6b21\u53ef\u4ee5\u5220\u9664\u4e00\u4e2a\u6216\u591a\u4e2a\u70b9\u3002\u7528\u6237\u53ef\u4ee5\u7ed3\u5408\u7ba1\u9053\u7b26\u4e00\u8d77\u4f7f\u7528\uff0c\u8be6\u60c5\u8bf7\u53c2\u89c1 \u7ba1\u9053\u7b26 \u3002 Note DELETE VERTEX \u662f\u76f4\u63a5\u5220\u9664\u70b9\uff0c\u4e0d\u5220\u9664\u5173\u8054\u7684\u8fb9\u3002 DELETE TAG \u662f\u5220\u9664\u6307\u5b9a\u70b9\u4e0a\u7684\u6307\u5b9a Tag\u3002","title":"DELETE VERTEX"},{"location":"3.ngql-guide/12.vertex-statements/4.delete-vertex/#_1","text":"DELETE VERTEX <vid> [ , <vid> ... ] [WITH EDGE]; WITH EDGE : \u5220\u9664\u8be5\u70b9\u5173\u8054\u7684\u51fa\u8fb9\u548c\u5165\u8fb9\u3002","title":"\u8bed\u6cd5"},{"location":"3.ngql-guide/12.vertex-statements/4.delete-vertex/#_2","text":"# \u5220\u9664 VID \u4e3a `team1` \u7684\u70b9\uff0c\u4e0d\u5220\u9664\u8be5\u70b9\u5173\u8054\u7684\u51fa\u8fb9\u548c\u5165\u8fb9\u3002 nebula> DELETE VERTEX \"team1\"; # \u5220\u9664 VID \u4e3a `team1` \u7684\u70b9\uff0c\u5e76\u5220\u9664\u8be5\u70b9\u5173\u8054\u7684\u51fa\u8fb9\u548c\u5165\u8fb9\u3002 nebula> DELETE VERTEX \"team1\" WITH EDGE; # \u7ed3\u5408\u7ba1\u9053\u7b26\uff0c\u5220\u9664\u7b26\u5408\u6761\u4ef6\u7684\u70b9\u3002 nebula> GO FROM \"player100\" OVER serve WHERE properties(edge).start_year == \"2021\" YIELD dst(edge) AS id | DELETE VERTEX $-.id;","title":"\u793a\u4f8b"},{"location":"3.ngql-guide/12.vertex-statements/4.delete-vertex/#_3","text":"NebulaGraph\u627e\u5230\u76ee\u6807\u70b9\u5e76\u5220\u9664\uff0c\u8be5\u76ee\u6807\u70b9\u7684\u6240\u6709\u90bb\u8fb9\uff08\u51fa\u8fb9\u548c\u5165\u8fb9\uff09\u5c06\u6210\u4e3a\u60ac\u6302\u8fb9\u3002 Caution \u4e0d\u652f\u6301\u539f\u5b50\u6027\u5220\u9664\uff0c\u5982\u679c\u53d1\u751f\u9519\u8bef\u8bf7\u91cd\u8bd5\uff0c\u907f\u514d\u51fa\u73b0\u90e8\u5206\u5220\u9664\u7684\u60c5\u51b5\u3002\u5426\u5219\u4f1a\u5bfc\u81f4\u60ac\u6302\u8fb9\u3002 \u5220\u9664\u8d85\u7ea7\u8282\u70b9\u8017\u65f6\u8f83\u591a\uff0c\u4e3a\u907f\u514d\u5220\u9664\u5b8c\u6210\u524d\u8fde\u63a5\u8d85\u65f6\uff0c\u53ef\u4ee5\u8c03\u6574 nebula-graphd.conf \u4e2d\u7684\u53c2\u6570 --storage_client_timeout_ms \u5ef6\u957f\u8d85\u65f6\u65f6\u95f4\u3002","title":"\u5220\u9664\u8fc7\u7a0b"},{"location":"3.ngql-guide/12.vertex-statements/4.delete-vertex/#_4","text":"NebulaGraph \u7684\u60ac\u6302\u8fb9\u5c0f\u79d1\u666e \uff082 \u5206 28 \u79d2\uff09","title":"\u60ac\u6302\u8fb9\u89c6\u9891"},{"location":"3.ngql-guide/13.edge-statements/1.insert-edge/","text":"INSERT EDGE \u00b6 INSERT EDGE \u8bed\u53e5\u53ef\u4ee5\u5728NebulaGraph\u5b9e\u4f8b\u7684\u6307\u5b9a\u56fe\u7a7a\u95f4\u4e2d\u63d2\u5165\u4e00\u6761\u6216\u591a\u6761\u8fb9\u3002\u8fb9\u662f\u6709\u65b9\u5411\u7684\uff0c\u4ece\u8d77\u59cb\u70b9\uff08src_vid\uff09\u5230\u76ee\u7684\u70b9\uff08dst_vid\uff09\u3002 INSERT EDGE \u7684\u6267\u884c\u65b9\u5f0f\u4e3a\u8986\u76d6\u5f0f\u63d2\u5165\u3002\u5982\u679c\u5df2\u6709 Edge type\u3001\u8d77\u70b9\u3001\u7ec8\u70b9\u3001rank \u90fd\u76f8\u540c\u7684\u8fb9\uff0c\u5219 \u8986\u76d6 \u539f\u8fb9\u3002 \u8bed\u6cd5 \u00b6 INSERT EDGE [IF NOT EXISTS] <edge_type> ( <prop_name_list> ) VALUES <src_vid> -> <dst_vid>[@<rank>] : ( <prop_value_list> ) [, <src_vid> -> <dst_vid>[@<rank>] : ( <prop_value_list> ), ...]; <prop_name_list> ::= [ <prop_name> [, <prop_name> ] ...] <prop_value_list> ::= [ <prop_value> [, <prop_value> ] ...] IF NOT EXISTS \uff1a\u7528\u6237\u53ef\u4ee5\u4f7f\u7528 IF NOT EXISTS \u5173\u952e\u5b57\u68c0\u6d4b\u5f85\u63d2\u5165\u7684\u8fb9\u662f\u5426\u5b58\u5728\uff0c\u53ea\u6709\u4e0d\u5b58\u5728\u65f6\uff0c\u624d\u4f1a\u63d2\u5165\u3002 Note IF NOT EXISTS \u4ec5\u68c0\u6d4b<\u8fb9\u7684\u7c7b\u578b\u3001\u8d77\u59cb\u70b9\u3001\u76ee\u7684\u70b9\u548c rank>\u662f\u5426\u5b58\u5728\uff0c\u4e0d\u4f1a\u68c0\u6d4b\u5c5e\u6027\u503c\u662f\u5426\u91cd\u5408\u3002 IF NOT EXISTS \u4f1a\u5148\u8bfb\u53d6\u4e00\u6b21\u6570\u636e\u662f\u5426\u5b58\u5728\uff0c\u56e0\u6b64\u5bf9\u6027\u80fd\u4f1a\u6709\u660e\u663e\u5f71\u54cd\u3002 <edge_type> \uff1a\u8fb9\u5173\u8054\u7684 Edge type\uff0c\u53ea\u80fd\u6307\u5b9a\u4e00\u4e2a Edge type\u3002Edge type \u5fc5\u987b\u63d0\u524d\u521b\u5efa\uff0c\u8be6\u60c5\u8bf7\u53c2\u89c1 CREATE EDGE \u3002 <prop_name_list> \uff1a\u9700\u8981\u8bbe\u7f6e\u7684\u5c5e\u6027\u540d\u79f0\u5217\u8868\u3002 src_vid \uff1a\u8d77\u59cb\u70b9 ID\uff0c\u8868\u793a\u8fb9\u7684\u8d77\u70b9\u3002 dst_vid \uff1a\u76ee\u7684\u70b9 ID\uff0c\u8868\u793a\u8fb9\u7684\u7ec8\u70b9\u3002 rank \uff1a\u53ef\u9009\u9879\u3002\u8fb9\u7684 rank \u503c\u3002\u6570\u636e\u7c7b\u578b\u4e3a int \u3002\u9ed8\u8ba4\u503c\u4e3a 0 \u3002 openCypher \u517c\u5bb9\u6027 openCypher \u4e2d\u6ca1\u6709 rank \u7684\u6982\u5ff5\u3002 <prop_value_list> \uff1a\u6839\u636e prop_name_list \u586b\u5199\u5c5e\u6027\u503c\u3002\u5982\u679c\u5c5e\u6027\u503c\u548c Edge type \u4e2d\u7684\u6570\u636e\u7c7b\u578b\u4e0d\u5339\u914d\uff0c\u4f1a\u8fd4\u56de\u9519\u8bef\u3002\u5982\u679c\u6ca1\u6709\u586b\u5199\u5c5e\u6027\u503c\uff0c\u800c Edge type \u4e2d\u5bf9\u5e94\u7684\u5c5e\u6027\u8bbe\u7f6e\u4e3a NOT NULL \uff0c\u4e5f\u4f1a\u8fd4\u56de\u9519\u8bef\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1 CREATE EDGE \u3002 \u793a\u4f8b \u00b6 # \u63d2\u5165\u4e0d\u5305\u542b\u5c5e\u6027\u7684\u8fb9\u3002 nebula> CREATE EDGE IF NOT EXISTS e1(); nebula> INSERT EDGE e1 () VALUES \"10\"->\"11\":(); # \u63d2\u5165 rank \u4e3a 1 \u7684\u8fb9\u3002 nebula> INSERT EDGE e1 () VALUES \"10\"->\"11\"@1:(); nebula> CREATE EDGE IF NOT EXISTS e2 (name string, age int); nebula> INSERT EDGE e2 (name, age) VALUES \"11\"->\"13\":(\"n1\", 1); # \u4e00\u6b21\u63d2\u5165 2 \u6761\u8fb9\u3002 nebula> INSERT EDGE e2 (name, age) VALUES \\ \"12\"->\"13\":(\"n1\", 1), \"13\"->\"14\":(\"n2\", 2); # \u521b\u5efa\u5931\u8d25\uff0c\u56e0\u4e3a\"a13\"\u4e0d\u662f int \u7c7b\u578b\u3002 nebula> INSERT EDGE e2 (name, age) VALUES \"11\"->\"13\":(\"n1\", \"a13\"); \u4e00\u6761\u8fb9\u53ef\u4ee5\u591a\u6b21\u63d2\u5165\u5c5e\u6027\u503c\uff0c\u4ee5\u6700\u540e\u4e00\u6b21\u4e3a\u51c6\u3002 # \u591a\u6b21\u63d2\u5165\u5c5e\u6027\u503c\u3002 nebula> INSERT EDGE e2 (name, age) VALUES \"11\"->\"13\":(\"n1\", 12); nebula> INSERT EDGE e2 (name, age) VALUES \"11\"->\"13\":(\"n1\", 13); nebula> INSERT EDGE e2 (name, age) VALUES \"11\"->\"13\":(\"n1\", 14); nebula> FETCH PROP ON e2 \"11\"->\"13\" YIELD edge AS e; +-------------------------------------------+ | e | +-------------------------------------------+ | [:e2 \"11\"->\"13\" @0 {age: 14, name: \"n1\"}] | +-------------------------------------------+ \u4f7f\u7528 IF NOT EXISTS \u63d2\u5165\u5df2\u5b58\u5728\u7684\u8fb9\u65f6\uff0c\u4e0d\u4f1a\u8fdb\u884c\u4fee\u6539\u3002 # \u63d2\u5165\u8fb9\u3002 nebula> INSERT EDGE e2 (name, age) VALUES \"14\"->\"15\"@1:(\"n1\", 12); # \u4f7f\u7528 IF NOT EXISTS \u4fee\u6539\u8fb9\uff0c\u56e0\u4e3a\u8fb9\u5df2\u5b58\u5728\uff0c\u4e0d\u4f1a\u8fdb\u884c\u4fee\u6539\u3002 nebula> INSERT EDGE IF NOT EXISTS e2 (name, age) VALUES \"14\"->\"15\"@1:(\"n2\", 13); nebula> FETCH PROP ON e2 \"14\"->\"15\"@1 YIELD edge AS e; +-------------------------------------------+ | e | +-------------------------------------------+ | [:e2 \"14\"->\"15\" @1 {age: 12, name: \"n1\"}] | +-------------------------------------------+ Note NebulaGraph 3.6.0 \u5141\u8bb8\u5b58\u5728\u60ac\u6302\u8fb9\uff08Dangling edge\uff09\u3002\u56e0\u6b64\u53ef\u4ee5\u5728\u8d77\u70b9\u6216\u8005\u7ec8\u70b9\u5b58\u5728\u524d\uff0c\u5148\u5199\u8fb9\uff1b\u6b64\u65f6\u5c31\u53ef\u4ee5\u901a\u8fc7 <edgetype>._src \u6216 <edgetype>._dst \u83b7\u53d6\u5230\uff08\u5c1a\u672a\u5199\u5165\u7684\uff09\u70b9 VID\uff08\u4e0d\u5efa\u8bae\u8fd9\u6837\u4f7f\u7528\uff09\u3002 \u76ee\u524d\u8fd8\u4e0d\u80fd\u4fdd\u8bc1\u64cd\u4f5c\u7684\u539f\u5b50\u6027\uff0c\u5982\u679c\u5931\u8d25\u8bf7\u91cd\u8bd5\uff0c\u5426\u5219\u4f1a\u53d1\u751f\u90e8\u5206\u5199\u5165\u3002\u6b64\u65f6\u8bfb\u53d6\u8be5\u6570\u636e\u7684\u884c\u4e3a\u662f\u672a\u5b9a\u4e49\u7684\u3002\u4f8b\u5982\u5199\u5165\u64cd\u4f5c\u6d89\u53ca\u5230\u591a\u4e2a\u673a\u5668\u65f6\uff0c\u53ef\u80fd\u4f1a\u51fa\u73b0\u63d2\u5165\u5355\u4e2a\u8fb9\u7684\u6b63\u53cd\u5411\u8fb9\u53ea\u5199\u5165\u6210\u529f\u4e00\u4e2a\uff0c\u6216\u8005\u63d2\u5165\u591a\u4e2a\u8fb9\u65f6\u53ea\u5199\u5165\u6210\u529f\u4e00\u90e8\u5206\uff0c\u6b64\u65f6\u4f1a\u8fd4\u56de\u62a5\u9519\uff0c\u8bf7\u91cd\u65b0\u6267\u884c\u547d\u4ee4\u3002 \u5e76\u53d1\u5199\u5165\u540c\u4e00\u6761\u8fb9\u4f1a\u62a5 edge conflict \u9519\u8bef\uff0c\u53ef\u7a0d\u540e\u91cd\u8bd5\u3002 \u8fb9\u7684 INSERT \u901f\u5ea6 \u5927\u7ea6\u662f\u70b9\u7684 INSERT \u901f\u5ea6\u4e00\u534a\u3002\u539f\u56e0\u662f INSERT \u8fb9\u4f1a\u5bf9\u5e94 storaged \u7684\u4e24\u4e2a INSERT\uff0c INSERT \u70b9 \u5bf9\u5e94 storaged \u7684\u4e00\u4e2a INSERT\u3002","title":"INSERT EDGE"},{"location":"3.ngql-guide/13.edge-statements/1.insert-edge/#insert_edge","text":"INSERT EDGE \u8bed\u53e5\u53ef\u4ee5\u5728NebulaGraph\u5b9e\u4f8b\u7684\u6307\u5b9a\u56fe\u7a7a\u95f4\u4e2d\u63d2\u5165\u4e00\u6761\u6216\u591a\u6761\u8fb9\u3002\u8fb9\u662f\u6709\u65b9\u5411\u7684\uff0c\u4ece\u8d77\u59cb\u70b9\uff08src_vid\uff09\u5230\u76ee\u7684\u70b9\uff08dst_vid\uff09\u3002 INSERT EDGE \u7684\u6267\u884c\u65b9\u5f0f\u4e3a\u8986\u76d6\u5f0f\u63d2\u5165\u3002\u5982\u679c\u5df2\u6709 Edge type\u3001\u8d77\u70b9\u3001\u7ec8\u70b9\u3001rank \u90fd\u76f8\u540c\u7684\u8fb9\uff0c\u5219 \u8986\u76d6 \u539f\u8fb9\u3002","title":"INSERT EDGE"},{"location":"3.ngql-guide/13.edge-statements/1.insert-edge/#_1","text":"INSERT EDGE [IF NOT EXISTS] <edge_type> ( <prop_name_list> ) VALUES <src_vid> -> <dst_vid>[@<rank>] : ( <prop_value_list> ) [, <src_vid> -> <dst_vid>[@<rank>] : ( <prop_value_list> ), ...]; <prop_name_list> ::= [ <prop_name> [, <prop_name> ] ...] <prop_value_list> ::= [ <prop_value> [, <prop_value> ] ...] IF NOT EXISTS \uff1a\u7528\u6237\u53ef\u4ee5\u4f7f\u7528 IF NOT EXISTS \u5173\u952e\u5b57\u68c0\u6d4b\u5f85\u63d2\u5165\u7684\u8fb9\u662f\u5426\u5b58\u5728\uff0c\u53ea\u6709\u4e0d\u5b58\u5728\u65f6\uff0c\u624d\u4f1a\u63d2\u5165\u3002 Note IF NOT EXISTS \u4ec5\u68c0\u6d4b<\u8fb9\u7684\u7c7b\u578b\u3001\u8d77\u59cb\u70b9\u3001\u76ee\u7684\u70b9\u548c rank>\u662f\u5426\u5b58\u5728\uff0c\u4e0d\u4f1a\u68c0\u6d4b\u5c5e\u6027\u503c\u662f\u5426\u91cd\u5408\u3002 IF NOT EXISTS \u4f1a\u5148\u8bfb\u53d6\u4e00\u6b21\u6570\u636e\u662f\u5426\u5b58\u5728\uff0c\u56e0\u6b64\u5bf9\u6027\u80fd\u4f1a\u6709\u660e\u663e\u5f71\u54cd\u3002 <edge_type> \uff1a\u8fb9\u5173\u8054\u7684 Edge type\uff0c\u53ea\u80fd\u6307\u5b9a\u4e00\u4e2a Edge type\u3002Edge type \u5fc5\u987b\u63d0\u524d\u521b\u5efa\uff0c\u8be6\u60c5\u8bf7\u53c2\u89c1 CREATE EDGE \u3002 <prop_name_list> \uff1a\u9700\u8981\u8bbe\u7f6e\u7684\u5c5e\u6027\u540d\u79f0\u5217\u8868\u3002 src_vid \uff1a\u8d77\u59cb\u70b9 ID\uff0c\u8868\u793a\u8fb9\u7684\u8d77\u70b9\u3002 dst_vid \uff1a\u76ee\u7684\u70b9 ID\uff0c\u8868\u793a\u8fb9\u7684\u7ec8\u70b9\u3002 rank \uff1a\u53ef\u9009\u9879\u3002\u8fb9\u7684 rank \u503c\u3002\u6570\u636e\u7c7b\u578b\u4e3a int \u3002\u9ed8\u8ba4\u503c\u4e3a 0 \u3002 openCypher \u517c\u5bb9\u6027 openCypher \u4e2d\u6ca1\u6709 rank \u7684\u6982\u5ff5\u3002 <prop_value_list> \uff1a\u6839\u636e prop_name_list \u586b\u5199\u5c5e\u6027\u503c\u3002\u5982\u679c\u5c5e\u6027\u503c\u548c Edge type \u4e2d\u7684\u6570\u636e\u7c7b\u578b\u4e0d\u5339\u914d\uff0c\u4f1a\u8fd4\u56de\u9519\u8bef\u3002\u5982\u679c\u6ca1\u6709\u586b\u5199\u5c5e\u6027\u503c\uff0c\u800c Edge type \u4e2d\u5bf9\u5e94\u7684\u5c5e\u6027\u8bbe\u7f6e\u4e3a NOT NULL \uff0c\u4e5f\u4f1a\u8fd4\u56de\u9519\u8bef\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1 CREATE EDGE \u3002","title":"\u8bed\u6cd5"},{"location":"3.ngql-guide/13.edge-statements/1.insert-edge/#_2","text":"# \u63d2\u5165\u4e0d\u5305\u542b\u5c5e\u6027\u7684\u8fb9\u3002 nebula> CREATE EDGE IF NOT EXISTS e1(); nebula> INSERT EDGE e1 () VALUES \"10\"->\"11\":(); # \u63d2\u5165 rank \u4e3a 1 \u7684\u8fb9\u3002 nebula> INSERT EDGE e1 () VALUES \"10\"->\"11\"@1:(); nebula> CREATE EDGE IF NOT EXISTS e2 (name string, age int); nebula> INSERT EDGE e2 (name, age) VALUES \"11\"->\"13\":(\"n1\", 1); # \u4e00\u6b21\u63d2\u5165 2 \u6761\u8fb9\u3002 nebula> INSERT EDGE e2 (name, age) VALUES \\ \"12\"->\"13\":(\"n1\", 1), \"13\"->\"14\":(\"n2\", 2); # \u521b\u5efa\u5931\u8d25\uff0c\u56e0\u4e3a\"a13\"\u4e0d\u662f int \u7c7b\u578b\u3002 nebula> INSERT EDGE e2 (name, age) VALUES \"11\"->\"13\":(\"n1\", \"a13\"); \u4e00\u6761\u8fb9\u53ef\u4ee5\u591a\u6b21\u63d2\u5165\u5c5e\u6027\u503c\uff0c\u4ee5\u6700\u540e\u4e00\u6b21\u4e3a\u51c6\u3002 # \u591a\u6b21\u63d2\u5165\u5c5e\u6027\u503c\u3002 nebula> INSERT EDGE e2 (name, age) VALUES \"11\"->\"13\":(\"n1\", 12); nebula> INSERT EDGE e2 (name, age) VALUES \"11\"->\"13\":(\"n1\", 13); nebula> INSERT EDGE e2 (name, age) VALUES \"11\"->\"13\":(\"n1\", 14); nebula> FETCH PROP ON e2 \"11\"->\"13\" YIELD edge AS e; +-------------------------------------------+ | e | +-------------------------------------------+ | [:e2 \"11\"->\"13\" @0 {age: 14, name: \"n1\"}] | +-------------------------------------------+ \u4f7f\u7528 IF NOT EXISTS \u63d2\u5165\u5df2\u5b58\u5728\u7684\u8fb9\u65f6\uff0c\u4e0d\u4f1a\u8fdb\u884c\u4fee\u6539\u3002 # \u63d2\u5165\u8fb9\u3002 nebula> INSERT EDGE e2 (name, age) VALUES \"14\"->\"15\"@1:(\"n1\", 12); # \u4f7f\u7528 IF NOT EXISTS \u4fee\u6539\u8fb9\uff0c\u56e0\u4e3a\u8fb9\u5df2\u5b58\u5728\uff0c\u4e0d\u4f1a\u8fdb\u884c\u4fee\u6539\u3002 nebula> INSERT EDGE IF NOT EXISTS e2 (name, age) VALUES \"14\"->\"15\"@1:(\"n2\", 13); nebula> FETCH PROP ON e2 \"14\"->\"15\"@1 YIELD edge AS e; +-------------------------------------------+ | e | +-------------------------------------------+ | [:e2 \"14\"->\"15\" @1 {age: 12, name: \"n1\"}] | +-------------------------------------------+ Note NebulaGraph 3.6.0 \u5141\u8bb8\u5b58\u5728\u60ac\u6302\u8fb9\uff08Dangling edge\uff09\u3002\u56e0\u6b64\u53ef\u4ee5\u5728\u8d77\u70b9\u6216\u8005\u7ec8\u70b9\u5b58\u5728\u524d\uff0c\u5148\u5199\u8fb9\uff1b\u6b64\u65f6\u5c31\u53ef\u4ee5\u901a\u8fc7 <edgetype>._src \u6216 <edgetype>._dst \u83b7\u53d6\u5230\uff08\u5c1a\u672a\u5199\u5165\u7684\uff09\u70b9 VID\uff08\u4e0d\u5efa\u8bae\u8fd9\u6837\u4f7f\u7528\uff09\u3002 \u76ee\u524d\u8fd8\u4e0d\u80fd\u4fdd\u8bc1\u64cd\u4f5c\u7684\u539f\u5b50\u6027\uff0c\u5982\u679c\u5931\u8d25\u8bf7\u91cd\u8bd5\uff0c\u5426\u5219\u4f1a\u53d1\u751f\u90e8\u5206\u5199\u5165\u3002\u6b64\u65f6\u8bfb\u53d6\u8be5\u6570\u636e\u7684\u884c\u4e3a\u662f\u672a\u5b9a\u4e49\u7684\u3002\u4f8b\u5982\u5199\u5165\u64cd\u4f5c\u6d89\u53ca\u5230\u591a\u4e2a\u673a\u5668\u65f6\uff0c\u53ef\u80fd\u4f1a\u51fa\u73b0\u63d2\u5165\u5355\u4e2a\u8fb9\u7684\u6b63\u53cd\u5411\u8fb9\u53ea\u5199\u5165\u6210\u529f\u4e00\u4e2a\uff0c\u6216\u8005\u63d2\u5165\u591a\u4e2a\u8fb9\u65f6\u53ea\u5199\u5165\u6210\u529f\u4e00\u90e8\u5206\uff0c\u6b64\u65f6\u4f1a\u8fd4\u56de\u62a5\u9519\uff0c\u8bf7\u91cd\u65b0\u6267\u884c\u547d\u4ee4\u3002 \u5e76\u53d1\u5199\u5165\u540c\u4e00\u6761\u8fb9\u4f1a\u62a5 edge conflict \u9519\u8bef\uff0c\u53ef\u7a0d\u540e\u91cd\u8bd5\u3002 \u8fb9\u7684 INSERT \u901f\u5ea6 \u5927\u7ea6\u662f\u70b9\u7684 INSERT \u901f\u5ea6\u4e00\u534a\u3002\u539f\u56e0\u662f INSERT \u8fb9\u4f1a\u5bf9\u5e94 storaged \u7684\u4e24\u4e2a INSERT\uff0c INSERT \u70b9 \u5bf9\u5e94 storaged \u7684\u4e00\u4e2a INSERT\u3002","title":"\u793a\u4f8b"},{"location":"3.ngql-guide/13.edge-statements/2.update-edge/","text":"UPDATE EDGE \u00b6 UPDATE EDGE \u8bed\u53e5\u53ef\u4ee5\u4fee\u6539\u8fb9\u4e0a Edge type \u7684\u5c5e\u6027\u3002 NebulaGraph\u652f\u6301 CAS\uff08compare and swap\uff09\u64cd\u4f5c\u3002 \u8bed\u6cd5 \u00b6 UPDATE EDGE ON <edge_type> <src_vid> -> <dst_vid> [@<rank>] SET <update_prop> [WHEN <condition>] [YIELD <output>] \u53c2\u6570 \u662f\u5426\u5fc5\u987b \u8bf4\u660e \u793a\u4f8b ON <edge_type> \u662f \u6307\u5b9a Edge type\u3002\u8981\u4fee\u6539\u7684\u5c5e\u6027\u5fc5\u987b\u5728\u8fd9\u4e2a Edge type \u5185\u3002 ON serve <src_vid> \u662f \u6307\u5b9a\u8fb9\u7684\u8d77\u59cb\u70b9 ID\u3002 \"player100\" <dst_vid> \u662f \u6307\u5b9a\u8fb9\u7684\u76ee\u7684\u70b9 ID\u3002 \"team204\" <rank> \u5426 \u6307\u5b9a\u8fb9\u7684 rank \u503c\u3002 10 SET <update_prop> \u662f \u6307\u5b9a\u5982\u4f55\u4fee\u6539\u5c5e\u6027\u503c\u3002 SET start_year = start_year +1 WHEN <condition> \u5426 \u6307\u5b9a\u8fc7\u6ee4\u6761\u4ef6\u3002\u5982\u679c <condition> \u7ed3\u679c\u4e3a false \uff0c SET \u5b50\u53e5\u4e0d\u4f1a\u751f\u6548\u3002 WHEN end_year < 2010 YIELD <output> \u5426 \u6307\u5b9a\u8bed\u53e5\u7684\u8f93\u51fa\u683c\u5f0f\u3002 YIELD start_year AS Start_Year \u793a\u4f8b \u00b6 // \u7528 GO \u8bed\u53e5\u67e5\u770b\u8fb9\u7684\u5c5e\u6027\u503c\u3002 nebula> GO FROM \"player100\" \\ OVER serve \\ YIELD properties(edge).start_year, properties(edge).end_year; +-----------------------------+---------------------------+ | properties(EDGE).start_year | properties(EDGE).end_year | +-----------------------------+---------------------------+ | 1997 | 2016 | +-----------------------------+---------------------------+ // \u4fee\u6539\u5c5e\u6027 start_year \u7684\u503c\uff0c\u5e76\u8fd4\u56de end_year \u548c\u65b0\u7684 start_year\u3002 nebula> UPDATE EDGE ON serve \"player100\" -> \"team204\"@0 \\ SET start_year = start_year + 1 \\ WHEN end_year > 2010 \\ YIELD start_year, end_year; +------------+----------+ | start_year | end_year | +------------+----------+ | 1998 | 2016 | +------------+----------+","title":"UPDATE EDGE"},{"location":"3.ngql-guide/13.edge-statements/2.update-edge/#update_edge","text":"UPDATE EDGE \u8bed\u53e5\u53ef\u4ee5\u4fee\u6539\u8fb9\u4e0a Edge type \u7684\u5c5e\u6027\u3002 NebulaGraph\u652f\u6301 CAS\uff08compare and swap\uff09\u64cd\u4f5c\u3002","title":"UPDATE EDGE"},{"location":"3.ngql-guide/13.edge-statements/2.update-edge/#_1","text":"UPDATE EDGE ON <edge_type> <src_vid> -> <dst_vid> [@<rank>] SET <update_prop> [WHEN <condition>] [YIELD <output>] \u53c2\u6570 \u662f\u5426\u5fc5\u987b \u8bf4\u660e \u793a\u4f8b ON <edge_type> \u662f \u6307\u5b9a Edge type\u3002\u8981\u4fee\u6539\u7684\u5c5e\u6027\u5fc5\u987b\u5728\u8fd9\u4e2a Edge type \u5185\u3002 ON serve <src_vid> \u662f \u6307\u5b9a\u8fb9\u7684\u8d77\u59cb\u70b9 ID\u3002 \"player100\" <dst_vid> \u662f \u6307\u5b9a\u8fb9\u7684\u76ee\u7684\u70b9 ID\u3002 \"team204\" <rank> \u5426 \u6307\u5b9a\u8fb9\u7684 rank \u503c\u3002 10 SET <update_prop> \u662f \u6307\u5b9a\u5982\u4f55\u4fee\u6539\u5c5e\u6027\u503c\u3002 SET start_year = start_year +1 WHEN <condition> \u5426 \u6307\u5b9a\u8fc7\u6ee4\u6761\u4ef6\u3002\u5982\u679c <condition> \u7ed3\u679c\u4e3a false \uff0c SET \u5b50\u53e5\u4e0d\u4f1a\u751f\u6548\u3002 WHEN end_year < 2010 YIELD <output> \u5426 \u6307\u5b9a\u8bed\u53e5\u7684\u8f93\u51fa\u683c\u5f0f\u3002 YIELD start_year AS Start_Year","title":"\u8bed\u6cd5"},{"location":"3.ngql-guide/13.edge-statements/2.update-edge/#_2","text":"// \u7528 GO \u8bed\u53e5\u67e5\u770b\u8fb9\u7684\u5c5e\u6027\u503c\u3002 nebula> GO FROM \"player100\" \\ OVER serve \\ YIELD properties(edge).start_year, properties(edge).end_year; +-----------------------------+---------------------------+ | properties(EDGE).start_year | properties(EDGE).end_year | +-----------------------------+---------------------------+ | 1997 | 2016 | +-----------------------------+---------------------------+ // \u4fee\u6539\u5c5e\u6027 start_year \u7684\u503c\uff0c\u5e76\u8fd4\u56de end_year \u548c\u65b0\u7684 start_year\u3002 nebula> UPDATE EDGE ON serve \"player100\" -> \"team204\"@0 \\ SET start_year = start_year + 1 \\ WHEN end_year > 2010 \\ YIELD start_year, end_year; +------------+----------+ | start_year | end_year | +------------+----------+ | 1998 | 2016 | +------------+----------+","title":"\u793a\u4f8b"},{"location":"3.ngql-guide/13.edge-statements/3.upsert-edge/","text":"UPSERT EDGE \u00b6 UPSERT EDGE \u8bed\u53e5\u7ed3\u5408 UPDATE \u548c INSERT \uff0c\u5982\u679c\u8fb9\u5b58\u5728\uff0c\u4f1a\u66f4\u65b0\u8fb9\u7684\u5c5e\u6027\uff1b\u5982\u679c\u8fb9\u4e0d\u5b58\u5728\uff0c\u4f1a\u63d2\u5165\u65b0\u7684\u8fb9\u3002 UPSERT EDGE \u6027\u80fd\u8fdc\u4f4e\u4e8e INSERT \uff0c\u56e0\u4e3a UPSERT \u662f\u4e00\u7ec4\u5206\u7247\u7ea7\u522b\u7684\u8bfb\u53d6\u3001\u4fee\u6539\u3001\u5199\u5165\u64cd\u4f5c\u3002 Caution \u5e76\u53d1 UPSERT \u540c\u4e00\u4e2a TAG \u6216 EDGE TYPE \u4f1a\u62a5\u9519\u3002 \u8bed\u6cd5 \u00b6 UPSERT EDGE ON <edge_type> <src_vid> -> <dst_vid> [@rank] SET <update_prop> [WHEN <condition>] [YIELD <properties>] \u53c2\u6570 \u662f\u5426\u5fc5\u987b \u8bf4\u660e \u793a\u4f8b ON <edge_type> \u662f \u6307\u5b9a Edge type\u3002\u8981\u4fee\u6539\u7684\u5c5e\u6027\u5fc5\u987b\u5728\u8fd9\u4e2a Edge type \u5185\u3002 ON serve <src_vid> \u662f \u6307\u5b9a\u8fb9\u7684\u8d77\u59cb\u70b9 ID\u3002 \"player100\" <dst_vid> \u662f \u6307\u5b9a\u8fb9\u7684\u76ee\u7684\u70b9 ID\u3002 \"team204\" <rank> \u5426 \u6307\u5b9a\u8fb9\u7684 rank \u503c\u3002\u6570\u636e\u7c7b\u578b\u4e3a int \u3002 10 SET <update_prop> \u662f \u6307\u5b9a\u5982\u4f55\u4fee\u6539\u5c5e\u6027\u503c\u3002 SET start_year = start_year +1 WHEN <condition> \u5426 \u6307\u5b9a\u8fc7\u6ee4\u6761\u4ef6\u3002 WHEN end_year < 2010 YIELD <output> \u5426 \u6307\u5b9a\u8bed\u53e5\u7684\u8f93\u51fa\u683c\u5f0f\u3002 YIELD start_year AS Start_Year \u63d2\u5165\u4e0d\u5b58\u5728\u7684\u8fb9 \u00b6 \u5982\u679c\u8fb9\u4e0d\u5b58\u5728\uff0c\u65e0\u8bba WHEN \u5b50\u53e5\u7684\u6761\u4ef6\u662f\u5426\u6ee1\u8db3\uff0c\u90fd\u4f1a\u63d2\u5165\u8fb9\uff0c\u540c\u65f6\u6267\u884c SET \u5b50\u53e5\uff0c\u56e0\u6b64\u65b0\u63d2\u5165\u7684\u8fb9\u7684\u5c5e\u6027\u503c\u53d6\u51b3\u4e8e\uff1a SET \u5b50\u53e5\u3002 \u5c5e\u6027\u662f\u5426\u6709\u9ed8\u8ba4\u503c\u3002 \u4f8b\u5982\uff1a \u8981\u63d2\u5165\u7684\u8fb9\u5305\u542b\u57fa\u4e8e Edge type serve \u7684\u5c5e\u6027 start_year \u548c end_year \u3002 SET \u5b50\u53e5\u6307\u5b9a end_year = 2021 \u3002 \u4e0d\u540c\u60c5\u51b5\u4e0b\u7684\u5c5e\u6027\u503c\u5982\u4e0b\u8868\u3002 \u662f\u5426\u6ee1\u8db3 WHEN \u5b50\u53e5\u6761\u4ef6 \u5c5e\u6027\u662f\u5426\u6709\u9ed8\u8ba4\u503c start_year \u5c5e\u6027\u503c end_year \u5c5e\u6027\u503c \u662f \u662f \u9ed8\u8ba4\u503c 2021 \u662f \u5426 NULL 2021 \u5426 \u662f \u9ed8\u8ba4\u503c 2021 \u5426 \u5426 NULL 2021 \u793a\u4f8b\u5982\u4e0b\uff1a // \u67e5\u770b\u5982\u4e0b\u4e09\u4e2a\u70b9\u662f\u5426\u6709 serve \u7c7b\u578b\u7684\u51fa\u8fb9\uff0c\u7ed3\u679c \u201cEmpty set\u201d \u8868\u793a\u6ca1\u6709 serve \u7c7b\u578b\u7684\u51fa\u8fb9\u3002 nebula> GO FROM \"player666\", \"player667\", \"player668\" \\ OVER serve \\ YIELD properties(edge).start_year, properties(edge).end_year; +-----------------------------+---------------------------+ | properties(EDGE).start_year | properties(EDGE).end_year | +-----------------------------+---------------------------+ +-----------------------------+---------------------------+ Empty set nebula> UPSERT EDGE on serve \\ \"player666\" -> \"team200\"@0 \\ SET end_year = 2021 \\ WHEN end_year == 2010 \\ YIELD start_year, end_year; +------------+----------+ | start_year | end_year | +------------+----------+ | __NULL__ | 2021 | +------------+----------+ nebula> UPSERT EDGE on serve \\ \"player666\" -> \"team200\"@0 \\ SET end_year = 2022 \\ WHEN end_year == 2010 \\ YIELD start_year, end_year; +------------+----------+ | start_year | end_year | +------------+----------+ | __NULL__ | 2021 | +------------+----------+ nebula> UPSERT EDGE on serve \\ \"player667\" -> \"team200\"@0 \\ SET end_year = 2022 \\ YIELD start_year, end_year; +------------+----------+ | start_year | end_year | +------------+----------+ | __NULL__ | 2022 | +------------+----------+ nebula> UPSERT EDGE on serve \\ \"player668\" -> \"team200\"@0 \\ SET start_year = 2000, end_year = end_year + 1 \\ YIELD start_year, end_year; +------------+----------+ | start_year | end_year | +------------+----------+ | 2000 | __NULL__ | +------------+----------+ \u4e0a\u9762\u6700\u540e\u4e00\u4e2a\u793a\u4f8b\u4e2d\uff0c\u56e0\u4e3a end_year \u6ca1\u6709\u9ed8\u8ba4\u503c\uff0c\u63d2\u5165\u8fb9\u65f6\uff0c end_year \u9ed8\u8ba4\u503c\u4e3a NULL \uff0c\u6267\u884c end_year = end_year + 1 \u540e\u4ecd\u4e3a NULL \u3002\u5982\u679c end_year \u6709\u9ed8\u8ba4\u503c\uff0c\u5219 end_year = end_year + 1 \u53ef\u4ee5\u6b63\u5e38\u6267\u884c\uff0c\u4f8b\u5982\uff1a nebula> CREATE EDGE IF NOT EXISTS serve_with_default(start_year int, end_year int DEFAULT 2010); Execution succeeded nebula> UPSERT EDGE on serve_with_default \\ \"player668\" -> \"team200\" \\ SET end_year = end_year + 1 \\ YIELD start_year, end_year; +------------+----------+ | start_year | end_year | +------------+----------+ | __NULL__ | 2011 | +------------+----------+ \u4fee\u6539\u5b58\u5728\u7684\u8fb9 \u00b6 \u5982\u679c\u8fb9\u5b58\u5728\uff0c\u4e14\u6ee1\u8db3 WHEN \u5b50\u53e5\u7684\u6761\u4ef6\uff0c\u5c31\u4f1a\u4fee\u6539\u8fb9\u7684\u5c5e\u6027\u503c\u3002 nebula> MATCH (v:player{name:\"Ben Simmons\"})-[e:serve]-(v2) \\ RETURN e; +-----------------------------------------------------------------------+ | e | +-----------------------------------------------------------------------+ | [:serve \"player149\"->\"team219\" @0 {end_year: 2019, start_year: 2016}] | +-----------------------------------------------------------------------+ nebula> UPSERT EDGE on serve \\ \"player149\" -> \"team219\" \\ SET end_year = end_year + 1 \\ WHEN start_year == 2016 \\ YIELD start_year, end_year; +------------+----------+ | start_year | end_year | +------------+----------+ | 2016 | 2020 | +------------+----------+ \u5982\u679c\u8fb9\u5b58\u5728\uff0c\u4f46\u662f\u4e0d\u6ee1\u8db3 WHEN \u5b50\u53e5\u7684\u6761\u4ef6\uff0c\u4fee\u6539\u4e0d\u4f1a\u751f\u6548\u3002 nebula> MATCH (v:player{name:\"Ben Simmons\"})-[e:serve]-(v2) \\ RETURN e; +-----------------------------------------------------------------------+ | e | +-----------------------------------------------------------------------+ | [:serve \"player149\"->\"team219\" @0 {end_year: 2020, start_year: 2016}] | +-----------------------------------------------------------------------+ nebula> UPSERT EDGE on serve \\ \"player149\" -> \"team219\" \\ SET end_year = end_year + 1 \\ WHEN start_year != 2016 \\ YIELD start_year, end_year; +------------+----------+ | start_year | end_year | +------------+----------+ | 2016 | 2020 | +------------+----------+","title":"UPSERT EDGE"},{"location":"3.ngql-guide/13.edge-statements/3.upsert-edge/#upsert_edge","text":"UPSERT EDGE \u8bed\u53e5\u7ed3\u5408 UPDATE \u548c INSERT \uff0c\u5982\u679c\u8fb9\u5b58\u5728\uff0c\u4f1a\u66f4\u65b0\u8fb9\u7684\u5c5e\u6027\uff1b\u5982\u679c\u8fb9\u4e0d\u5b58\u5728\uff0c\u4f1a\u63d2\u5165\u65b0\u7684\u8fb9\u3002 UPSERT EDGE \u6027\u80fd\u8fdc\u4f4e\u4e8e INSERT \uff0c\u56e0\u4e3a UPSERT \u662f\u4e00\u7ec4\u5206\u7247\u7ea7\u522b\u7684\u8bfb\u53d6\u3001\u4fee\u6539\u3001\u5199\u5165\u64cd\u4f5c\u3002 Caution \u5e76\u53d1 UPSERT \u540c\u4e00\u4e2a TAG \u6216 EDGE TYPE \u4f1a\u62a5\u9519\u3002","title":"UPSERT EDGE"},{"location":"3.ngql-guide/13.edge-statements/3.upsert-edge/#_1","text":"UPSERT EDGE ON <edge_type> <src_vid> -> <dst_vid> [@rank] SET <update_prop> [WHEN <condition>] [YIELD <properties>] \u53c2\u6570 \u662f\u5426\u5fc5\u987b \u8bf4\u660e \u793a\u4f8b ON <edge_type> \u662f \u6307\u5b9a Edge type\u3002\u8981\u4fee\u6539\u7684\u5c5e\u6027\u5fc5\u987b\u5728\u8fd9\u4e2a Edge type \u5185\u3002 ON serve <src_vid> \u662f \u6307\u5b9a\u8fb9\u7684\u8d77\u59cb\u70b9 ID\u3002 \"player100\" <dst_vid> \u662f \u6307\u5b9a\u8fb9\u7684\u76ee\u7684\u70b9 ID\u3002 \"team204\" <rank> \u5426 \u6307\u5b9a\u8fb9\u7684 rank \u503c\u3002\u6570\u636e\u7c7b\u578b\u4e3a int \u3002 10 SET <update_prop> \u662f \u6307\u5b9a\u5982\u4f55\u4fee\u6539\u5c5e\u6027\u503c\u3002 SET start_year = start_year +1 WHEN <condition> \u5426 \u6307\u5b9a\u8fc7\u6ee4\u6761\u4ef6\u3002 WHEN end_year < 2010 YIELD <output> \u5426 \u6307\u5b9a\u8bed\u53e5\u7684\u8f93\u51fa\u683c\u5f0f\u3002 YIELD start_year AS Start_Year","title":"\u8bed\u6cd5"},{"location":"3.ngql-guide/13.edge-statements/3.upsert-edge/#_2","text":"\u5982\u679c\u8fb9\u4e0d\u5b58\u5728\uff0c\u65e0\u8bba WHEN \u5b50\u53e5\u7684\u6761\u4ef6\u662f\u5426\u6ee1\u8db3\uff0c\u90fd\u4f1a\u63d2\u5165\u8fb9\uff0c\u540c\u65f6\u6267\u884c SET \u5b50\u53e5\uff0c\u56e0\u6b64\u65b0\u63d2\u5165\u7684\u8fb9\u7684\u5c5e\u6027\u503c\u53d6\u51b3\u4e8e\uff1a SET \u5b50\u53e5\u3002 \u5c5e\u6027\u662f\u5426\u6709\u9ed8\u8ba4\u503c\u3002 \u4f8b\u5982\uff1a \u8981\u63d2\u5165\u7684\u8fb9\u5305\u542b\u57fa\u4e8e Edge type serve \u7684\u5c5e\u6027 start_year \u548c end_year \u3002 SET \u5b50\u53e5\u6307\u5b9a end_year = 2021 \u3002 \u4e0d\u540c\u60c5\u51b5\u4e0b\u7684\u5c5e\u6027\u503c\u5982\u4e0b\u8868\u3002 \u662f\u5426\u6ee1\u8db3 WHEN \u5b50\u53e5\u6761\u4ef6 \u5c5e\u6027\u662f\u5426\u6709\u9ed8\u8ba4\u503c start_year \u5c5e\u6027\u503c end_year \u5c5e\u6027\u503c \u662f \u662f \u9ed8\u8ba4\u503c 2021 \u662f \u5426 NULL 2021 \u5426 \u662f \u9ed8\u8ba4\u503c 2021 \u5426 \u5426 NULL 2021 \u793a\u4f8b\u5982\u4e0b\uff1a // \u67e5\u770b\u5982\u4e0b\u4e09\u4e2a\u70b9\u662f\u5426\u6709 serve \u7c7b\u578b\u7684\u51fa\u8fb9\uff0c\u7ed3\u679c \u201cEmpty set\u201d \u8868\u793a\u6ca1\u6709 serve \u7c7b\u578b\u7684\u51fa\u8fb9\u3002 nebula> GO FROM \"player666\", \"player667\", \"player668\" \\ OVER serve \\ YIELD properties(edge).start_year, properties(edge).end_year; +-----------------------------+---------------------------+ | properties(EDGE).start_year | properties(EDGE).end_year | +-----------------------------+---------------------------+ +-----------------------------+---------------------------+ Empty set nebula> UPSERT EDGE on serve \\ \"player666\" -> \"team200\"@0 \\ SET end_year = 2021 \\ WHEN end_year == 2010 \\ YIELD start_year, end_year; +------------+----------+ | start_year | end_year | +------------+----------+ | __NULL__ | 2021 | +------------+----------+ nebula> UPSERT EDGE on serve \\ \"player666\" -> \"team200\"@0 \\ SET end_year = 2022 \\ WHEN end_year == 2010 \\ YIELD start_year, end_year; +------------+----------+ | start_year | end_year | +------------+----------+ | __NULL__ | 2021 | +------------+----------+ nebula> UPSERT EDGE on serve \\ \"player667\" -> \"team200\"@0 \\ SET end_year = 2022 \\ YIELD start_year, end_year; +------------+----------+ | start_year | end_year | +------------+----------+ | __NULL__ | 2022 | +------------+----------+ nebula> UPSERT EDGE on serve \\ \"player668\" -> \"team200\"@0 \\ SET start_year = 2000, end_year = end_year + 1 \\ YIELD start_year, end_year; +------------+----------+ | start_year | end_year | +------------+----------+ | 2000 | __NULL__ | +------------+----------+ \u4e0a\u9762\u6700\u540e\u4e00\u4e2a\u793a\u4f8b\u4e2d\uff0c\u56e0\u4e3a end_year \u6ca1\u6709\u9ed8\u8ba4\u503c\uff0c\u63d2\u5165\u8fb9\u65f6\uff0c end_year \u9ed8\u8ba4\u503c\u4e3a NULL \uff0c\u6267\u884c end_year = end_year + 1 \u540e\u4ecd\u4e3a NULL \u3002\u5982\u679c end_year \u6709\u9ed8\u8ba4\u503c\uff0c\u5219 end_year = end_year + 1 \u53ef\u4ee5\u6b63\u5e38\u6267\u884c\uff0c\u4f8b\u5982\uff1a nebula> CREATE EDGE IF NOT EXISTS serve_with_default(start_year int, end_year int DEFAULT 2010); Execution succeeded nebula> UPSERT EDGE on serve_with_default \\ \"player668\" -> \"team200\" \\ SET end_year = end_year + 1 \\ YIELD start_year, end_year; +------------+----------+ | start_year | end_year | +------------+----------+ | __NULL__ | 2011 | +------------+----------+","title":"\u63d2\u5165\u4e0d\u5b58\u5728\u7684\u8fb9"},{"location":"3.ngql-guide/13.edge-statements/3.upsert-edge/#_3","text":"\u5982\u679c\u8fb9\u5b58\u5728\uff0c\u4e14\u6ee1\u8db3 WHEN \u5b50\u53e5\u7684\u6761\u4ef6\uff0c\u5c31\u4f1a\u4fee\u6539\u8fb9\u7684\u5c5e\u6027\u503c\u3002 nebula> MATCH (v:player{name:\"Ben Simmons\"})-[e:serve]-(v2) \\ RETURN e; +-----------------------------------------------------------------------+ | e | +-----------------------------------------------------------------------+ | [:serve \"player149\"->\"team219\" @0 {end_year: 2019, start_year: 2016}] | +-----------------------------------------------------------------------+ nebula> UPSERT EDGE on serve \\ \"player149\" -> \"team219\" \\ SET end_year = end_year + 1 \\ WHEN start_year == 2016 \\ YIELD start_year, end_year; +------------+----------+ | start_year | end_year | +------------+----------+ | 2016 | 2020 | +------------+----------+ \u5982\u679c\u8fb9\u5b58\u5728\uff0c\u4f46\u662f\u4e0d\u6ee1\u8db3 WHEN \u5b50\u53e5\u7684\u6761\u4ef6\uff0c\u4fee\u6539\u4e0d\u4f1a\u751f\u6548\u3002 nebula> MATCH (v:player{name:\"Ben Simmons\"})-[e:serve]-(v2) \\ RETURN e; +-----------------------------------------------------------------------+ | e | +-----------------------------------------------------------------------+ | [:serve \"player149\"->\"team219\" @0 {end_year: 2020, start_year: 2016}] | +-----------------------------------------------------------------------+ nebula> UPSERT EDGE on serve \\ \"player149\" -> \"team219\" \\ SET end_year = end_year + 1 \\ WHEN start_year != 2016 \\ YIELD start_year, end_year; +------------+----------+ | start_year | end_year | +------------+----------+ | 2016 | 2020 | +------------+----------+","title":"\u4fee\u6539\u5b58\u5728\u7684\u8fb9"},{"location":"3.ngql-guide/13.edge-statements/4.delete-edge/","text":"DELETE EDGE \u00b6 DELETE EDGE \u8bed\u53e5\u53ef\u4ee5\u5220\u9664\u8fb9\u3002\u4e00\u6b21\u53ef\u4ee5\u5220\u9664\u4e00\u6761\u6216\u591a\u6761\u8fb9\u3002\u7528\u6237\u53ef\u4ee5\u7ed3\u5408\u7ba1\u9053\u7b26\u4e00\u8d77\u4f7f\u7528\uff0c\u8be6\u60c5\u8bf7\u53c2\u89c1 \u7ba1\u9053\u7b26 \u3002 \u5982\u679c\u9700\u8981\u5220\u9664\u4e00\u4e2a\u70b9\u7684\u6240\u6709\u51fa\u8fb9\uff0c\u8bf7\u5220\u9664\u8fd9\u4e2a\u70b9\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1 DELETE VERTEX \u3002 \u8bed\u6cd5 \u00b6 DELETE EDGE <edge_type> <src_vid> -> <dst_vid>[@<rank>] [, <src_vid> -> <dst_vid>[@<rank>] ...] Caution \u5982\u679c\u4e0d\u6307\u5b9a rank\uff0c\u5219\u4ec5\u4ec5\u5220\u9664 rank \u4e3a 0 \u7684\u8fb9\u3002\u9700\u8981\u5220\u9664\u6240\u6709\u7684 rank\uff0c\u89c1\u5982\u4e0b\u793a\u4f8b\u3002 \u793a\u4f8b \u00b6 nebula> DELETE EDGE serve \"player100\" -> \"team204\"@0; # \u7ed3\u5408\u7ba1\u9053\u7b26\uff0c\u5220\u9664\u4e24\u70b9\u4e4b\u95f4\u540c\u7c7b\u578b\u7684\u6240\u6709rank\u7684\u8fb9\u3002 nebula> GO FROM \"player100\" OVER follow \\ WHERE dst(edge) == \"player101\" \\ YIELD src(edge) AS src, dst(edge) AS dst, rank(edge) AS rank \\ | DELETE EDGE follow $-.src -> $-.dst @ $-.rank;","title":"DELETE EDGE"},{"location":"3.ngql-guide/13.edge-statements/4.delete-edge/#delete_edge","text":"DELETE EDGE \u8bed\u53e5\u53ef\u4ee5\u5220\u9664\u8fb9\u3002\u4e00\u6b21\u53ef\u4ee5\u5220\u9664\u4e00\u6761\u6216\u591a\u6761\u8fb9\u3002\u7528\u6237\u53ef\u4ee5\u7ed3\u5408\u7ba1\u9053\u7b26\u4e00\u8d77\u4f7f\u7528\uff0c\u8be6\u60c5\u8bf7\u53c2\u89c1 \u7ba1\u9053\u7b26 \u3002 \u5982\u679c\u9700\u8981\u5220\u9664\u4e00\u4e2a\u70b9\u7684\u6240\u6709\u51fa\u8fb9\uff0c\u8bf7\u5220\u9664\u8fd9\u4e2a\u70b9\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1 DELETE VERTEX \u3002","title":"DELETE EDGE"},{"location":"3.ngql-guide/13.edge-statements/4.delete-edge/#_1","text":"DELETE EDGE <edge_type> <src_vid> -> <dst_vid>[@<rank>] [, <src_vid> -> <dst_vid>[@<rank>] ...] Caution \u5982\u679c\u4e0d\u6307\u5b9a rank\uff0c\u5219\u4ec5\u4ec5\u5220\u9664 rank \u4e3a 0 \u7684\u8fb9\u3002\u9700\u8981\u5220\u9664\u6240\u6709\u7684 rank\uff0c\u89c1\u5982\u4e0b\u793a\u4f8b\u3002","title":"\u8bed\u6cd5"},{"location":"3.ngql-guide/13.edge-statements/4.delete-edge/#_2","text":"nebula> DELETE EDGE serve \"player100\" -> \"team204\"@0; # \u7ed3\u5408\u7ba1\u9053\u7b26\uff0c\u5220\u9664\u4e24\u70b9\u4e4b\u95f4\u540c\u7c7b\u578b\u7684\u6240\u6709rank\u7684\u8fb9\u3002 nebula> GO FROM \"player100\" OVER follow \\ WHERE dst(edge) == \"player101\" \\ YIELD src(edge) AS src, dst(edge) AS dst, rank(edge) AS rank \\ | DELETE EDGE follow $-.src -> $-.dst @ $-.rank;","title":"\u793a\u4f8b"},{"location":"3.ngql-guide/14.native-index-statements/","text":"\u7d22\u5f15\u4ecb\u7ecd \u00b6 \u4e3a\u4e86\u63d0\u9ad8\u67e5\u8be2\u6027\u80fd\uff0cNebulaGraph\u652f\u6301\u4e3a\u70b9\u7684 Tag \u6216 Tag \u7684\u67d0\u4e2a\u5c5e\u6027\uff0c\u8fb9\u7684 Edge type \u6216 Edge type \u7684\u67d0\u4e2a\u5c5e\u6027\u521b\u5efa\u7d22\u5f15\u3002\u7d22\u5f15\u53ef\u4ee5\u57fa\u4e8e\u6307\u5b9a\u7684 Tag\u3001Edge type\u3001\u5c5e\u6027\u67e5\u8be2\u6570\u636e\uff0c\u4f46\u662f\u7d22\u5f15\u672c\u8eab\u4e0d\u5b58\u50a8\u6570\u636e\uff0c\u800c\u662f\u5b58\u50a8\u6570\u636e\u7684\u4f4d\u7f6e\u3002 NebulaGraph\u652f\u6301\u4e24\u79cd\u7c7b\u578b\u7d22\u5f15\uff1a\u539f\u751f\u7d22\u5f15\u548c\u5168\u6587\u7d22\u5f15\u3002 \u4f7f\u7528\u8bf4\u660e \u00b6 \u7d22\u5f15\u53ef\u4ee5\u63d0\u9ad8\u67e5\u8be2\u6027\u80fd\uff0c\u4f46\u662f\u4f1a\u964d\u4f4e\u5199\u5165\u6027\u80fd\u3002 \u7d22\u5f15\u662f\u6267\u884c LOOKUP \u8bed\u53e5\u65f6\u7528\u4e8e\u5b9a\u4f4d\u5230\u6570\u636e\u7684\u524d\u7f6e\u6761\u4ef6\uff0c\u5982\u679c\u6ca1\u6709\u7d22\u5f15\uff0c\u6267\u884c LOOKUP \u8bed\u53e5\u4f1a\u62a5\u9519\u3002 \u4f7f\u7528\u7d22\u5f15\u65f6\uff0cNebulaGraph\u4f1a\u81ea\u52a8\u9009\u62e9\u6700\u4f18\u7684\u7d22\u5f15\u3002 \u5177\u6709\u9ad8\u9009\u62e9\u5ea6\u7684\u7d22\u5f15\uff0c\u5373\u7d22\u5f15\u5217\u4e2d\u4e0d\u540c\u503c\u7684\u8bb0\u5f55\u6570\u4e0e\u603b\u8bb0\u5f55\u6570\u7684\u6bd4\u503c\u8f83\u9ad8\uff08\u4f8b\u5982\u8eab\u4efd\u8bc1\u53f7\u7684\u6bd4\u503c\u4e3a 1\uff09\u53ef\u663e\u8457\u63d0\u5347\u67e5\u8be2\u6027\u80fd\uff1b\u800c\u5bf9\u4e8e\u4f4e\u9009\u62e9\u5ea6\u7684\u7d22\u5f15\uff08\u4f8b\u5982\u56fd\u5bb6\uff09\uff0c\u67e5\u8be2\u6027\u80fd\u53ef\u80fd\u4e0d\u4f1a\u5e26\u6765\u663e\u8457\u63d0\u5347\u3002 \u539f\u751f\u7d22\u5f15 \u00b6 \u539f\u751f\u7d22\u5f15\u53ef\u4ee5\u57fa\u4e8e\u6307\u5b9a\u7684\u5c5e\u6027\u67e5\u8be2\u6570\u636e\uff0c\u6709\u5982\u4e0b\u7279\u70b9\uff1a \u5305\u62ec Tag \u7d22\u5f15\u548c Edge type \u7d22\u5f15\u3002 \u5fc5\u987b\u624b\u52a8\u91cd\u5efa\u7d22\u5f15\uff08 REBUILD INDEX \uff09\u3002 \u652f\u6301\u521b\u5efa\u540c\u4e00\u4e2a Tag \u6216 Edge type \u7684\u591a\u4e2a\u5c5e\u6027\u7684\u7d22\u5f15\uff08\u590d\u5408\u7d22\u5f15\uff09\uff0c\u4f46\u662f\u4e0d\u80fd\u8de8 Tag \u6216 Edge type\u3002 \u539f\u751f\u7d22\u5f15\u64cd\u4f5c \u00b6 CREATE INDEX SHOW CREATE INDEX SHOW INDEXES DESCRIBE INDEX REBUILD INDEX SHOW INDEX STATUS DROP INDEX LOOKUP MATCH \u5730\u7406\u7a7a\u95f4\u7d22\u5f15 \u5168\u6587\u7d22\u5f15 \u00b6 \u5168\u6587\u7d22\u5f15\u662f\u57fa\u4e8e Elasticsearch \u6765\u5b9e\u73b0\u7684\uff0c\u7528\u4e8e\u5bf9\u5b57\u7b26\u4e32\u5c5e\u6027\u8fdb\u884c\u524d\u7f00\u641c\u7d22\u3001\u901a\u914d\u7b26\u641c\u7d22\u3001\u6b63\u5219\u8868\u8fbe\u5f0f\u641c\u7d22\u548c\u6a21\u7cca\u641c\u7d22\uff0c\u6709\u5982\u4e0b\u7279\u70b9\uff1a \u53ea\u5141\u8bb8\u521b\u5efa\u4e00\u4e2a\u5c5e\u6027\u7684\u7d22\u5f15\u3002 \u4e0d\u652f\u6301\u903b\u8f91\u64cd\u4f5c\uff0c\u4f8b\u5982 AND \u3001 OR \u3001 NOT \u3002 Note \u5982\u679c\u9700\u8981\u8fdb\u884c\u6574\u4e2a\u5b57\u7b26\u4e32\u7684\u5339\u914d\uff0c\u8bf7\u4f7f\u7528\u539f\u751f\u7d22\u5f15\u3002 \u6ca1\u6709 NULL \u503c\u7d22\u5f15 \u00b6 \u4e0d\u652f\u6301\u5bf9\u503c\u4e3a NULL \u7684\u5c5e\u6027\u521b\u5efa\u7d22\u5f15\u3002 \u6ca1\u6709\u552f\u4e00\u7d22\u5f15 \u00b6 \u5728 Cypher \u4e2d\uff0c\u53ef\u4ee5\u901a\u8fc7 Constrains \u5b9e\u73b0\u5c5e\u6027\u503c\u7684\u552f\u4e00\u6027\u9650\u5236\u3002\u5728 MySQL \u4e2d\uff0c\u53ef\u4ee5\u5efa\u7acb\u552f\u4e00\u7d22\u5f15\u6765\u9650\u5236\u67d0\u5b57\u6bb5\u53ea\u6709\u552f\u4e00\u503c\u3002\u5728 nGQL \u4e2d\u6ca1\u6709\u5c5e\u6027\u7684\u552f\u4e00\u7d22\u5f15\uff08\u7528\u6237\u81ea\u884c\u4fdd\u8bc1\u5c5e\u6027\u503c\u7684\u552f\u4e00\u6027\uff09\u3002 \u6570\u5b57\u3001\u65e5\u671f\u548c\u65f6\u95f4\u7c7b\u578b\u7684\u8303\u56f4\u67e5\u8be2 \u00b6 \u539f\u751f\u7d22\u5f15\u8fd8\u652f\u6301\u5bf9\u6570\u5b57\u3001\u65e5\u671f\u548c\u65f6\u95f4\u7c7b\u578b\u7684\u5c5e\u6027\u8fdb\u884c\u8303\u56f4\u67e5\u8be2\uff0c\u4e0d\u652f\u6301\u5176\u4ed6\u5c5e\u6027\u7c7b\u578b\u7684\u8303\u56f4\u67e5\u8be2\u3002","title":"\u7d22\u5f15\u4ecb\u7ecd"},{"location":"3.ngql-guide/14.native-index-statements/#_1","text":"\u4e3a\u4e86\u63d0\u9ad8\u67e5\u8be2\u6027\u80fd\uff0cNebulaGraph\u652f\u6301\u4e3a\u70b9\u7684 Tag \u6216 Tag \u7684\u67d0\u4e2a\u5c5e\u6027\uff0c\u8fb9\u7684 Edge type \u6216 Edge type \u7684\u67d0\u4e2a\u5c5e\u6027\u521b\u5efa\u7d22\u5f15\u3002\u7d22\u5f15\u53ef\u4ee5\u57fa\u4e8e\u6307\u5b9a\u7684 Tag\u3001Edge type\u3001\u5c5e\u6027\u67e5\u8be2\u6570\u636e\uff0c\u4f46\u662f\u7d22\u5f15\u672c\u8eab\u4e0d\u5b58\u50a8\u6570\u636e\uff0c\u800c\u662f\u5b58\u50a8\u6570\u636e\u7684\u4f4d\u7f6e\u3002 NebulaGraph\u652f\u6301\u4e24\u79cd\u7c7b\u578b\u7d22\u5f15\uff1a\u539f\u751f\u7d22\u5f15\u548c\u5168\u6587\u7d22\u5f15\u3002","title":"\u7d22\u5f15\u4ecb\u7ecd"},{"location":"3.ngql-guide/14.native-index-statements/#_2","text":"\u7d22\u5f15\u53ef\u4ee5\u63d0\u9ad8\u67e5\u8be2\u6027\u80fd\uff0c\u4f46\u662f\u4f1a\u964d\u4f4e\u5199\u5165\u6027\u80fd\u3002 \u7d22\u5f15\u662f\u6267\u884c LOOKUP \u8bed\u53e5\u65f6\u7528\u4e8e\u5b9a\u4f4d\u5230\u6570\u636e\u7684\u524d\u7f6e\u6761\u4ef6\uff0c\u5982\u679c\u6ca1\u6709\u7d22\u5f15\uff0c\u6267\u884c LOOKUP \u8bed\u53e5\u4f1a\u62a5\u9519\u3002 \u4f7f\u7528\u7d22\u5f15\u65f6\uff0cNebulaGraph\u4f1a\u81ea\u52a8\u9009\u62e9\u6700\u4f18\u7684\u7d22\u5f15\u3002 \u5177\u6709\u9ad8\u9009\u62e9\u5ea6\u7684\u7d22\u5f15\uff0c\u5373\u7d22\u5f15\u5217\u4e2d\u4e0d\u540c\u503c\u7684\u8bb0\u5f55\u6570\u4e0e\u603b\u8bb0\u5f55\u6570\u7684\u6bd4\u503c\u8f83\u9ad8\uff08\u4f8b\u5982\u8eab\u4efd\u8bc1\u53f7\u7684\u6bd4\u503c\u4e3a 1\uff09\u53ef\u663e\u8457\u63d0\u5347\u67e5\u8be2\u6027\u80fd\uff1b\u800c\u5bf9\u4e8e\u4f4e\u9009\u62e9\u5ea6\u7684\u7d22\u5f15\uff08\u4f8b\u5982\u56fd\u5bb6\uff09\uff0c\u67e5\u8be2\u6027\u80fd\u53ef\u80fd\u4e0d\u4f1a\u5e26\u6765\u663e\u8457\u63d0\u5347\u3002","title":"\u4f7f\u7528\u8bf4\u660e"},{"location":"3.ngql-guide/14.native-index-statements/#_3","text":"\u539f\u751f\u7d22\u5f15\u53ef\u4ee5\u57fa\u4e8e\u6307\u5b9a\u7684\u5c5e\u6027\u67e5\u8be2\u6570\u636e\uff0c\u6709\u5982\u4e0b\u7279\u70b9\uff1a \u5305\u62ec Tag \u7d22\u5f15\u548c Edge type \u7d22\u5f15\u3002 \u5fc5\u987b\u624b\u52a8\u91cd\u5efa\u7d22\u5f15\uff08 REBUILD INDEX \uff09\u3002 \u652f\u6301\u521b\u5efa\u540c\u4e00\u4e2a Tag \u6216 Edge type \u7684\u591a\u4e2a\u5c5e\u6027\u7684\u7d22\u5f15\uff08\u590d\u5408\u7d22\u5f15\uff09\uff0c\u4f46\u662f\u4e0d\u80fd\u8de8 Tag \u6216 Edge type\u3002","title":"\u539f\u751f\u7d22\u5f15"},{"location":"3.ngql-guide/14.native-index-statements/#_4","text":"CREATE INDEX SHOW CREATE INDEX SHOW INDEXES DESCRIBE INDEX REBUILD INDEX SHOW INDEX STATUS DROP INDEX LOOKUP MATCH \u5730\u7406\u7a7a\u95f4\u7d22\u5f15","title":"\u539f\u751f\u7d22\u5f15\u64cd\u4f5c"},{"location":"3.ngql-guide/14.native-index-statements/#_5","text":"\u5168\u6587\u7d22\u5f15\u662f\u57fa\u4e8e Elasticsearch \u6765\u5b9e\u73b0\u7684\uff0c\u7528\u4e8e\u5bf9\u5b57\u7b26\u4e32\u5c5e\u6027\u8fdb\u884c\u524d\u7f00\u641c\u7d22\u3001\u901a\u914d\u7b26\u641c\u7d22\u3001\u6b63\u5219\u8868\u8fbe\u5f0f\u641c\u7d22\u548c\u6a21\u7cca\u641c\u7d22\uff0c\u6709\u5982\u4e0b\u7279\u70b9\uff1a \u53ea\u5141\u8bb8\u521b\u5efa\u4e00\u4e2a\u5c5e\u6027\u7684\u7d22\u5f15\u3002 \u4e0d\u652f\u6301\u903b\u8f91\u64cd\u4f5c\uff0c\u4f8b\u5982 AND \u3001 OR \u3001 NOT \u3002 Note \u5982\u679c\u9700\u8981\u8fdb\u884c\u6574\u4e2a\u5b57\u7b26\u4e32\u7684\u5339\u914d\uff0c\u8bf7\u4f7f\u7528\u539f\u751f\u7d22\u5f15\u3002","title":"\u5168\u6587\u7d22\u5f15"},{"location":"3.ngql-guide/14.native-index-statements/#null","text":"\u4e0d\u652f\u6301\u5bf9\u503c\u4e3a NULL \u7684\u5c5e\u6027\u521b\u5efa\u7d22\u5f15\u3002","title":"\u6ca1\u6709 NULL \u503c\u7d22\u5f15"},{"location":"3.ngql-guide/14.native-index-statements/#_6","text":"\u5728 Cypher \u4e2d\uff0c\u53ef\u4ee5\u901a\u8fc7 Constrains \u5b9e\u73b0\u5c5e\u6027\u503c\u7684\u552f\u4e00\u6027\u9650\u5236\u3002\u5728 MySQL \u4e2d\uff0c\u53ef\u4ee5\u5efa\u7acb\u552f\u4e00\u7d22\u5f15\u6765\u9650\u5236\u67d0\u5b57\u6bb5\u53ea\u6709\u552f\u4e00\u503c\u3002\u5728 nGQL \u4e2d\u6ca1\u6709\u5c5e\u6027\u7684\u552f\u4e00\u7d22\u5f15\uff08\u7528\u6237\u81ea\u884c\u4fdd\u8bc1\u5c5e\u6027\u503c\u7684\u552f\u4e00\u6027\uff09\u3002","title":"\u6ca1\u6709\u552f\u4e00\u7d22\u5f15"},{"location":"3.ngql-guide/14.native-index-statements/#_7","text":"\u539f\u751f\u7d22\u5f15\u8fd8\u652f\u6301\u5bf9\u6570\u5b57\u3001\u65e5\u671f\u548c\u65f6\u95f4\u7c7b\u578b\u7684\u5c5e\u6027\u8fdb\u884c\u8303\u56f4\u67e5\u8be2\uff0c\u4e0d\u652f\u6301\u5176\u4ed6\u5c5e\u6027\u7c7b\u578b\u7684\u8303\u56f4\u67e5\u8be2\u3002","title":"\u6570\u5b57\u3001\u65e5\u671f\u548c\u65f6\u95f4\u7c7b\u578b\u7684\u8303\u56f4\u67e5\u8be2"},{"location":"3.ngql-guide/14.native-index-statements/1.create-native-index/","text":"CREATE INDEX \u00b6 \u524d\u63d0\u6761\u4ef6 \u00b6 \u521b\u5efa\u7d22\u5f15\u4e4b\u524d\uff0c\u8bf7\u786e\u4fdd\u76f8\u5173\u7684 Tag \u6216 Edge type \u5df2\u7ecf\u521b\u5efa\u3002\u5982\u4f55\u521b\u5efa Tag \u548c Edge type\uff0c\u8bf7\u53c2\u89c1 CREATE TAG \u548c CREATE EDGE \u3002 \u5982\u4f55\u521b\u5efa\u5168\u6587\u7d22\u5f15\uff0c\u8bf7\u53c2\u89c1 \u90e8\u7f72\u5168\u6587\u7d22\u5f15 \u3002 \u4f7f\u7528\u7d22\u5f15\u5fc5\u8bfb \u00b6 \u7d22\u5f15\u7684\u6982\u5ff5\u548c\u4f7f\u7528\u9650\u5236\u90fd\u8f83\u4e3a\u590d\u6742\u3002\u5728\u4f7f\u7528\u7d22\u5f15\u524d\uff0c\u8bf7\u52a1\u5fc5\u9605\u8bfb\u4ee5\u4e0b\u5185\u5bb9\u3002 CREATE INDEX \u8bed\u53e5\u7528\u4e8e\u5bf9 Tag\u3001EdgeType \u6216\u5176\u5c5e\u6027\u521b\u5efa\u539f\u751f\u7d22\u5f15\u3002\u901a\u5e38\u5206\u522b\u79f0\u4e3a\u201cTag \u7d22\u5f15\u201d\u3001\u201cEdge type \u7d22\u5f15\u201d\u548c\u201c\u5c5e\u6027\u7d22\u5f15\u201d\u3002 Tag \u7d22\u5f15\u548c Edge type \u7d22\u5f15\u5e94\u7528\u4e8e\u548c Tag\u3001Edge type \u81ea\u8eab\u76f8\u5173\u7684\u67e5\u8be2\uff0c\u4f8b\u5982\u7528 LOOKUP \u67e5\u627e\u6709 Tag player \u7684\u6240\u6709\u70b9\u3002 \u201c\u5c5e\u6027\u7d22\u5f15\u201d\u5e94\u7528\u4e8e\u57fa\u4e8e\u5c5e\u6027\u7684\u67e5\u8be2\uff0c\u4f8b\u5982\u57fa\u4e8e\u5c5e\u6027 age \u627e\u5230 age == 19 \u7684\u6240\u6709\u7684\u70b9\u3002 \u5982\u679c\u5df2\u7ecf\u4e3a Tag T \u7684\u5c5e\u6027 A \u5efa\u7acb\u8fc7\u5c5e\u6027\u7d22\u5f15 i_TA \uff08 T \u7684\u7d22\u5f15\u4e3a i_T \uff09\uff0c\u7d22\u5f15\u4e4b\u95f4\u7684\u53ef\u66ff\u4ee3\u5173\u7cfb\u5982\u4e0b\uff08Edge type \u7d22\u5f15\u540c\u7406\uff09\uff1a \u67e5\u8be2\u5f15\u64ce\u53ef\u4ee5\u4f7f\u7528 i_TA \u6765\u66ff\u4ee3 i_T \u3002 \u5728 MATCH \u3001 LOOKUP \u8bed\u53e5\u4e2d i_T \u53ef\u4ee5\u66ff\u4ee3 i_TA \u67e5\u627e\u5c5e\u6027\u3002 \u5386\u53f2\u7248\u672c\u517c\u5bb9\u6027 \u5728\u6b64\u524d\u7684\u7248\u672c\u4e2d\uff0c LOOKUP \u8bed\u53e5\u4e2d\u7684 Tag \u6216 Edge type \u7d22\u5f15\u4e0d\u53ef\u66ff\u4ee3\u5c5e\u6027\u7d22\u5f15\u7528\u4e8e\u5c5e\u6027\u67e5\u627e\u3002 \u4f7f\u7528\u66ff\u4ee3\u7d22\u5f15\u8fdb\u884c\u67e5\u8be2\u867d\u7136\u80fd\u83b7\u5f97\u76f8\u540c\u7684\u7ed3\u679c\uff0c\u4f46\u67e5\u8be2\u6027\u80fd\u4f1a\u6839\u636e\u9009\u62e9\u7684\u7d22\u5f15\u6709\u6240\u533a\u522b\u3002 Caution \u4e0d\u8981\u4efb\u610f\u5728\u751f\u4ea7\u73af\u5883\u4e2d\u4f7f\u7528\u7d22\u5f15\uff0c\u9664\u975e\u5f88\u6e05\u695a\u4f7f\u7528\u7d22\u5f15\u5bf9\u4e1a\u52a1\u7684\u5f71\u54cd\u3002\u7d22\u5f15\u4f1a\u5bfc\u81f4\u5199\u6027\u80fd\u5927\u5e45\u4e0b\u964d \u3002 \u53d8\u957f\u5b57\u7b26\u4e32\u7684\u5c5e\u6027\u7d22\u5f15\u957f\u5ea6\u6700\u957f\u4e3a 256\uff1b\u5b9a\u957f\u5b57\u7b26\u4e32\u7684\u5c5e\u6027\u7d22\u5f15\u957f\u5ea6\u4e3a\u7d22\u5f15\u540d\u672c\u8eab\u7684\u957f\u5ea6\uff0c\u65e0\u9650\u5236\u3002\u957f\u7d22\u5f15\u4f1a\u964d\u4f4e Storage \u670d\u52a1\u7684\u626b\u63cf\u6027\u80fd\uff0c\u4ee5\u53ca\u5360\u7528\u66f4\u591a\u5185\u5b58\uff0c\u5efa\u8bae\u5c06\u7d22\u5f15\u957f\u5ea6\u8bbe\u7f6e\u4e3a\u548c\u8981\u88ab\u7d22\u5f15\u7684\u6700\u957f\u5b57\u7b26\u4e32\u76f8\u540c\u3002 \u64cd\u4f5c\u6b65\u9aa4 \u00b6 \u5982\u679c\u5fc5\u987b\u4f7f\u7528\u7d22\u5f15\uff0c\u901a\u5e38\u6309\u7167\u5982\u4e0b\u6b65\u9aa4\uff1a \u521d\u6b21\u5bfc\u5165\u6570\u636e\u81f3NebulaGraph\u3002 \u521b\u5efa\u7d22\u5f15\u3002 \u91cd\u5efa\u7d22\u5f15 \u3002 \u4f7f\u7528 LOOKUP \u6216 MATCH \u8bed\u53e5\u67e5\u8be2\u6570\u636e\u3002\u4e0d\u9700\u8981\uff08\u4e5f\u65e0\u6cd5\uff09\u6307\u5b9a\u4f7f\u7528\u54ea\u4e2a\u7d22\u5f15\uff0cNebulaGraph\u4f1a\u81ea\u52a8\u8ba1\u7b97\u3002 Note \u5982\u679c\u5148\u521b\u5efa\u7d22\u5f15\u518d\u5bfc\u5165\u6570\u636e\uff0c\u4f1a\u56e0\u4e3a\u5199\u6027\u80fd\u7684\u4e0b\u964d\u5bfc\u81f4\u5bfc\u5165\u901f\u5ea6\u6781\u6162\u3002 \u65e5\u5e38\u589e\u91cf\u5199\u5165\u65f6\u4fdd\u6301 --disable_auto_compaction = false \u3002 \u65b0\u521b\u5efa\u7684\u7d22\u5f15\u5e76\u4e0d\u4f1a\u7acb\u523b\u751f\u6548\u3002\u521b\u5efa\u65b0\u7684\u7d22\u5f15\u5e76\u5c1d\u8bd5\u7acb\u523b\u4f7f\u7528\uff08\u4f8b\u5982 LOOKUP \u6216\u8005 REBUILD INDEX ) \u901a\u5e38\u4f1a\u5931\u8d25\uff08\u62a5\u9519 can't find xxx in the space \uff09\u3002\u56e0\u4e3a\u521b\u5efa\u6b65\u9aa4\u662f\u5f02\u6b65\u5b9e\u73b0\u7684\uff0cNebulaGraph\u8981\u5728\u4e0b\u4e00\u4e2a\u5fc3\u8df3\u5468\u671f\u624d\u80fd\u5b8c\u6210\u7d22\u5f15\u7684\u521b\u5efa\u3002\u4e3a\u786e\u4fdd\u6570\u636e\u540c\u6b65\uff0c\u540e\u7eed\u64cd\u4f5c\u80fd\u987a\u5229\u8fdb\u884c\uff0c\u8bf7\u7b49\u5f85 2 \u4e2a\u5fc3\u8df3\u5468\u671f\uff0820 \u79d2\uff09\u3002\u5982\u679c\u9700\u8981\u4fee\u6539\u5fc3\u8df3\u95f4\u9694\uff0c\u8bf7\u4e3a \u6240\u6709\u914d\u7f6e\u6587\u4ef6 \u4fee\u6539\u53c2\u6570 heartbeat_interval_secs \u3002 Danger \u521b\u5efa\u7d22\u5f15\uff0c\u6216\u8005\u5220\u9664\u5e76\u518d\u6b21\u521b\u5efa\u540c\u540d\u7d22\u5f15\u540e\uff0c\u5fc5\u987b REBUILD INDEX \u3002\u5426\u5219\u65e0\u6cd5\u5728 MATCH \u548c LOOKUP \u8bed\u53e5\u4e2d\u8fd4\u56de\u8fd9\u4e9b\u6570\u636e\u3002 \u8bed\u6cd5 \u00b6 CREATE {TAG | EDGE} INDEX [IF NOT EXISTS] <index_name> ON {<tag_name> | <edge_name>} ([<prop_name_list>]) [COMMENT '<comment>']; \u53c2\u6570 \u8bf4\u660e TAG | EDGE \u6307\u5b9a\u8981\u521b\u5efa\u7684\u7d22\u5f15\u7c7b\u578b\u3002 IF NOT EXISTS \u68c0\u6d4b\u5f85\u521b\u5efa\u7684\u7d22\u5f15\u662f\u5426\u5b58\u5728\uff0c\u53ea\u6709\u4e0d\u5b58\u5728\u65f6\uff0c\u624d\u4f1a\u521b\u5efa\u7d22\u5f15\u3002 <index_name> \u7d22\u5f15\u540d\u3002\u7d22\u5f15\u540d\u5728\u4e00\u4e2a\u56fe\u7a7a\u95f4\u4e2d\u5fc5\u987b\u662f\u552f\u4e00\u7684\u3002\u63a8\u8350\u7684\u547d\u540d\u65b9\u5f0f\u4e3a i_tagName_propName \u3002 \u7d22\u5f15\u540d\u79f0\u4e0d\u80fd\u4ee5\u6570\u5b57\u5f00\u5934\uff0c\u652f\u6301 1~4 \u5b57\u8282\u7684 UTF-8 \u7f16\u7801\u5b57\u7b26\uff0c\u5305\u62ec\u82f1\u6587\u5b57\u6bcd\uff08\u533a\u5206\u5927\u5c0f\u5199\uff09\u3001\u6570\u5b57\u3001\u4e2d\u6587\u7b49\uff0c\u4f46\u662f\u4e0d\u5305\u62ec\u9664\u4e0b\u5212\u7ebf\u5916\u7684\u7279\u6b8a\u5b57\u7b26\u3002\u4f7f\u7528\u7279\u6b8a\u5b57\u7b26\u3001\u4fdd\u7559\u5173\u952e\u5b57\u6216\u6570\u5b57\u5f00\u5934\u65f6\uff0c\u9700\u8981\u7528\u53cd\u5f15\u53f7\uff08`\uff09\u5305\u56f4\uff0c\u8be6\u60c5\u53c2\u89c1 \u5173\u952e\u5b57\u548c\u4fdd\u7559\u5b57 \u3002 \u6ce8\u610f \uff1a\u5982\u679c\u4ee5\u4e2d\u6587\u4e3a\u7d22\u5f15\u547d\u540d\uff0c\u62a5 SyntaxError \u9519\u8bef\u65f6\uff0c\u9700\u4f7f\u7528\u53cd\u5f15\u53f7\uff08`\uff09\u5305\u56f4\u4e2d\u6587\u5b57\u7b26\u3002 <tag_name> | <edge_name> \u6307\u5b9a\u7d22\u5f15\u5173\u8054\u7684 Tag \u6216 Edge \u540d\u79f0\u3002 <prop_name_list> \u4e3a \u53d8\u957f \u5b57\u7b26\u4e32\u5c5e\u6027\u521b\u5efa\u7d22\u5f15\u65f6\uff0c\u5fc5\u987b\u7528 prop_name(length) \u6307\u5b9a\u7d22\u5f15\u957f\u5ea6\uff0c\u7d22\u5f15\u957f\u5ea6\u6700\u957f\u4e3a 256\uff1b\u4e3a Tag \u6216 Edge type \u672c\u8eab\u521b\u5efa\u7d22\u5f15\u65f6\uff0c\u5ffd\u7565 <prop_name_list> \u3002 COMMENT \u7d22\u5f15\u7684\u63cf\u8ff0\u3002\u6700\u5927\u4e3a 256 \u5b57\u8282\u3002\u9ed8\u8ba4\u65e0\u63cf\u8ff0\u3002 \u521b\u5efa Tag/Edge type \u7d22\u5f15 \u00b6 nebula> CREATE TAG INDEX player_index on player(); nebula> CREATE EDGE INDEX follow_index on follow(); \u4e3a Tag \u6216 Edge type \u521b\u5efa\u7d22\u5f15\u540e\uff0c\u7528\u6237\u53ef\u4ee5\u4f7f\u7528 LOOKUP \u8bed\u53e5\u67e5\u627e \u5e26\u6709\u8be5 Tag \u7684 \u6240\u6709\u70b9\u7684 VID\uff0c\u6216\u8005 \u6240\u6709\u8be5\u7c7b\u578b\u7684\u8fb9 \u7684 \u5bf9\u5e94\u8d77\u59cb\u70b9 VID\u3001\u76ee\u7684\u70b9 VID\u3001\u4ee5\u53ca rank \u3002\u8be6\u60c5\u8bf7\u53c2\u89c1 LOOKUP \u3002 \u521b\u5efa\u5355\u5c5e\u6027\u7d22\u5f15 \u00b6 nebula> CREATE TAG INDEX IF NOT EXISTS player_index_0 on player(name(10)); \u4e0a\u8ff0\u793a\u4f8b\u662f\u4e3a\u6240\u6709\u5305\u542b Tag player \u7684\u70b9\u521b\u5efa\u5c5e\u6027 name \u7684\u7d22\u5f15\uff0c\u7d22\u5f15\u957f\u5ea6\u4e3a 10\u3002\u5373\u53ea\u4f7f\u7528\u5c5e\u6027 name \u7684\u524d 10 \u4e2a\u5b57\u7b26\u6765\u521b\u5efa\u7d22\u5f15\u3002 # \u53d8\u957f\u5b57\u7b26\u4e32\u9700\u8981\u6307\u5b9a\u7d22\u5f15\u957f\u5ea6\u3002 nebula> CREATE TAG IF NOT EXISTS var_string(p1 string); nebula> CREATE TAG INDEX IF NOT EXISTS var ON var_string(p1(10)); # \u5b9a\u957f\u5b57\u7b26\u4e32\u4e0d\u9700\u8981\u6307\u5b9a\u7d22\u5f15\u957f\u5ea6\u3002 nebula> CREATE TAG IF NOT EXISTS fix_string(p1 FIXED_STRING(10)); nebula> CREATE TAG INDEX IF NOT EXISTS fix ON fix_string(p1); nebula> CREATE EDGE INDEX IF NOT EXISTS follow_index_0 on follow(degree); \u521b\u5efa\u590d\u5408\u5c5e\u6027\u7d22\u5f15 \u00b6 \u590d\u5408\u5c5e\u6027\u7d22\u5f15 \u7528\u4e8e\u67e5\u627e\u4e00\u4e2a Tag\uff08\u6216\u8005 Edge type) \u4e2d\u7684\u591a\u4e2a\u5c5e\u6027\uff08\u7684\u7ec4\u5408\uff09\u3002 nebula> CREATE TAG INDEX IF NOT EXISTS player_index_1 on player(name(10), age); Caution \u4e0d\u652f\u6301\u8de8 Tag \u6216 Edge type \u521b\u5efa\u590d\u5408\u7d22\u5f15\u3002 Note \u4f7f\u7528\u590d\u5408\u5c5e\u6027\u7d22\u5f15\u65f6\uff0c\u9075\u5faa\"\u6700\u5de6\u5339\u914d\u539f\u5219\"\uff0c\u5fc5\u987b\u4ece\u590d\u5408\u5c5e\u6027\u7d22\u5f15\u7684\u6700\u5de6\u4fa7\u5f00\u59cb\u5339\u914d\u3002","title":"CREATE INDEX"},{"location":"3.ngql-guide/14.native-index-statements/1.create-native-index/#create_index","text":"","title":"CREATE INDEX"},{"location":"3.ngql-guide/14.native-index-statements/1.create-native-index/#_1","text":"\u521b\u5efa\u7d22\u5f15\u4e4b\u524d\uff0c\u8bf7\u786e\u4fdd\u76f8\u5173\u7684 Tag \u6216 Edge type \u5df2\u7ecf\u521b\u5efa\u3002\u5982\u4f55\u521b\u5efa Tag \u548c Edge type\uff0c\u8bf7\u53c2\u89c1 CREATE TAG \u548c CREATE EDGE \u3002 \u5982\u4f55\u521b\u5efa\u5168\u6587\u7d22\u5f15\uff0c\u8bf7\u53c2\u89c1 \u90e8\u7f72\u5168\u6587\u7d22\u5f15 \u3002","title":"\u524d\u63d0\u6761\u4ef6"},{"location":"3.ngql-guide/14.native-index-statements/1.create-native-index/#_2","text":"\u7d22\u5f15\u7684\u6982\u5ff5\u548c\u4f7f\u7528\u9650\u5236\u90fd\u8f83\u4e3a\u590d\u6742\u3002\u5728\u4f7f\u7528\u7d22\u5f15\u524d\uff0c\u8bf7\u52a1\u5fc5\u9605\u8bfb\u4ee5\u4e0b\u5185\u5bb9\u3002 CREATE INDEX \u8bed\u53e5\u7528\u4e8e\u5bf9 Tag\u3001EdgeType \u6216\u5176\u5c5e\u6027\u521b\u5efa\u539f\u751f\u7d22\u5f15\u3002\u901a\u5e38\u5206\u522b\u79f0\u4e3a\u201cTag \u7d22\u5f15\u201d\u3001\u201cEdge type \u7d22\u5f15\u201d\u548c\u201c\u5c5e\u6027\u7d22\u5f15\u201d\u3002 Tag \u7d22\u5f15\u548c Edge type \u7d22\u5f15\u5e94\u7528\u4e8e\u548c Tag\u3001Edge type \u81ea\u8eab\u76f8\u5173\u7684\u67e5\u8be2\uff0c\u4f8b\u5982\u7528 LOOKUP \u67e5\u627e\u6709 Tag player \u7684\u6240\u6709\u70b9\u3002 \u201c\u5c5e\u6027\u7d22\u5f15\u201d\u5e94\u7528\u4e8e\u57fa\u4e8e\u5c5e\u6027\u7684\u67e5\u8be2\uff0c\u4f8b\u5982\u57fa\u4e8e\u5c5e\u6027 age \u627e\u5230 age == 19 \u7684\u6240\u6709\u7684\u70b9\u3002 \u5982\u679c\u5df2\u7ecf\u4e3a Tag T \u7684\u5c5e\u6027 A \u5efa\u7acb\u8fc7\u5c5e\u6027\u7d22\u5f15 i_TA \uff08 T \u7684\u7d22\u5f15\u4e3a i_T \uff09\uff0c\u7d22\u5f15\u4e4b\u95f4\u7684\u53ef\u66ff\u4ee3\u5173\u7cfb\u5982\u4e0b\uff08Edge type \u7d22\u5f15\u540c\u7406\uff09\uff1a \u67e5\u8be2\u5f15\u64ce\u53ef\u4ee5\u4f7f\u7528 i_TA \u6765\u66ff\u4ee3 i_T \u3002 \u5728 MATCH \u3001 LOOKUP \u8bed\u53e5\u4e2d i_T \u53ef\u4ee5\u66ff\u4ee3 i_TA \u67e5\u627e\u5c5e\u6027\u3002 \u5386\u53f2\u7248\u672c\u517c\u5bb9\u6027 \u5728\u6b64\u524d\u7684\u7248\u672c\u4e2d\uff0c LOOKUP \u8bed\u53e5\u4e2d\u7684 Tag \u6216 Edge type \u7d22\u5f15\u4e0d\u53ef\u66ff\u4ee3\u5c5e\u6027\u7d22\u5f15\u7528\u4e8e\u5c5e\u6027\u67e5\u627e\u3002 \u4f7f\u7528\u66ff\u4ee3\u7d22\u5f15\u8fdb\u884c\u67e5\u8be2\u867d\u7136\u80fd\u83b7\u5f97\u76f8\u540c\u7684\u7ed3\u679c\uff0c\u4f46\u67e5\u8be2\u6027\u80fd\u4f1a\u6839\u636e\u9009\u62e9\u7684\u7d22\u5f15\u6709\u6240\u533a\u522b\u3002 Caution \u4e0d\u8981\u4efb\u610f\u5728\u751f\u4ea7\u73af\u5883\u4e2d\u4f7f\u7528\u7d22\u5f15\uff0c\u9664\u975e\u5f88\u6e05\u695a\u4f7f\u7528\u7d22\u5f15\u5bf9\u4e1a\u52a1\u7684\u5f71\u54cd\u3002\u7d22\u5f15\u4f1a\u5bfc\u81f4\u5199\u6027\u80fd\u5927\u5e45\u4e0b\u964d \u3002 \u53d8\u957f\u5b57\u7b26\u4e32\u7684\u5c5e\u6027\u7d22\u5f15\u957f\u5ea6\u6700\u957f\u4e3a 256\uff1b\u5b9a\u957f\u5b57\u7b26\u4e32\u7684\u5c5e\u6027\u7d22\u5f15\u957f\u5ea6\u4e3a\u7d22\u5f15\u540d\u672c\u8eab\u7684\u957f\u5ea6\uff0c\u65e0\u9650\u5236\u3002\u957f\u7d22\u5f15\u4f1a\u964d\u4f4e Storage \u670d\u52a1\u7684\u626b\u63cf\u6027\u80fd\uff0c\u4ee5\u53ca\u5360\u7528\u66f4\u591a\u5185\u5b58\uff0c\u5efa\u8bae\u5c06\u7d22\u5f15\u957f\u5ea6\u8bbe\u7f6e\u4e3a\u548c\u8981\u88ab\u7d22\u5f15\u7684\u6700\u957f\u5b57\u7b26\u4e32\u76f8\u540c\u3002","title":"\u4f7f\u7528\u7d22\u5f15\u5fc5\u8bfb"},{"location":"3.ngql-guide/14.native-index-statements/1.create-native-index/#_3","text":"\u5982\u679c\u5fc5\u987b\u4f7f\u7528\u7d22\u5f15\uff0c\u901a\u5e38\u6309\u7167\u5982\u4e0b\u6b65\u9aa4\uff1a \u521d\u6b21\u5bfc\u5165\u6570\u636e\u81f3NebulaGraph\u3002 \u521b\u5efa\u7d22\u5f15\u3002 \u91cd\u5efa\u7d22\u5f15 \u3002 \u4f7f\u7528 LOOKUP \u6216 MATCH \u8bed\u53e5\u67e5\u8be2\u6570\u636e\u3002\u4e0d\u9700\u8981\uff08\u4e5f\u65e0\u6cd5\uff09\u6307\u5b9a\u4f7f\u7528\u54ea\u4e2a\u7d22\u5f15\uff0cNebulaGraph\u4f1a\u81ea\u52a8\u8ba1\u7b97\u3002 Note \u5982\u679c\u5148\u521b\u5efa\u7d22\u5f15\u518d\u5bfc\u5165\u6570\u636e\uff0c\u4f1a\u56e0\u4e3a\u5199\u6027\u80fd\u7684\u4e0b\u964d\u5bfc\u81f4\u5bfc\u5165\u901f\u5ea6\u6781\u6162\u3002 \u65e5\u5e38\u589e\u91cf\u5199\u5165\u65f6\u4fdd\u6301 --disable_auto_compaction = false \u3002 \u65b0\u521b\u5efa\u7684\u7d22\u5f15\u5e76\u4e0d\u4f1a\u7acb\u523b\u751f\u6548\u3002\u521b\u5efa\u65b0\u7684\u7d22\u5f15\u5e76\u5c1d\u8bd5\u7acb\u523b\u4f7f\u7528\uff08\u4f8b\u5982 LOOKUP \u6216\u8005 REBUILD INDEX ) \u901a\u5e38\u4f1a\u5931\u8d25\uff08\u62a5\u9519 can't find xxx in the space \uff09\u3002\u56e0\u4e3a\u521b\u5efa\u6b65\u9aa4\u662f\u5f02\u6b65\u5b9e\u73b0\u7684\uff0cNebulaGraph\u8981\u5728\u4e0b\u4e00\u4e2a\u5fc3\u8df3\u5468\u671f\u624d\u80fd\u5b8c\u6210\u7d22\u5f15\u7684\u521b\u5efa\u3002\u4e3a\u786e\u4fdd\u6570\u636e\u540c\u6b65\uff0c\u540e\u7eed\u64cd\u4f5c\u80fd\u987a\u5229\u8fdb\u884c\uff0c\u8bf7\u7b49\u5f85 2 \u4e2a\u5fc3\u8df3\u5468\u671f\uff0820 \u79d2\uff09\u3002\u5982\u679c\u9700\u8981\u4fee\u6539\u5fc3\u8df3\u95f4\u9694\uff0c\u8bf7\u4e3a \u6240\u6709\u914d\u7f6e\u6587\u4ef6 \u4fee\u6539\u53c2\u6570 heartbeat_interval_secs \u3002 Danger \u521b\u5efa\u7d22\u5f15\uff0c\u6216\u8005\u5220\u9664\u5e76\u518d\u6b21\u521b\u5efa\u540c\u540d\u7d22\u5f15\u540e\uff0c\u5fc5\u987b REBUILD INDEX \u3002\u5426\u5219\u65e0\u6cd5\u5728 MATCH \u548c LOOKUP \u8bed\u53e5\u4e2d\u8fd4\u56de\u8fd9\u4e9b\u6570\u636e\u3002","title":"\u64cd\u4f5c\u6b65\u9aa4"},{"location":"3.ngql-guide/14.native-index-statements/1.create-native-index/#_4","text":"CREATE {TAG | EDGE} INDEX [IF NOT EXISTS] <index_name> ON {<tag_name> | <edge_name>} ([<prop_name_list>]) [COMMENT '<comment>']; \u53c2\u6570 \u8bf4\u660e TAG | EDGE \u6307\u5b9a\u8981\u521b\u5efa\u7684\u7d22\u5f15\u7c7b\u578b\u3002 IF NOT EXISTS \u68c0\u6d4b\u5f85\u521b\u5efa\u7684\u7d22\u5f15\u662f\u5426\u5b58\u5728\uff0c\u53ea\u6709\u4e0d\u5b58\u5728\u65f6\uff0c\u624d\u4f1a\u521b\u5efa\u7d22\u5f15\u3002 <index_name> \u7d22\u5f15\u540d\u3002\u7d22\u5f15\u540d\u5728\u4e00\u4e2a\u56fe\u7a7a\u95f4\u4e2d\u5fc5\u987b\u662f\u552f\u4e00\u7684\u3002\u63a8\u8350\u7684\u547d\u540d\u65b9\u5f0f\u4e3a i_tagName_propName \u3002 \u7d22\u5f15\u540d\u79f0\u4e0d\u80fd\u4ee5\u6570\u5b57\u5f00\u5934\uff0c\u652f\u6301 1~4 \u5b57\u8282\u7684 UTF-8 \u7f16\u7801\u5b57\u7b26\uff0c\u5305\u62ec\u82f1\u6587\u5b57\u6bcd\uff08\u533a\u5206\u5927\u5c0f\u5199\uff09\u3001\u6570\u5b57\u3001\u4e2d\u6587\u7b49\uff0c\u4f46\u662f\u4e0d\u5305\u62ec\u9664\u4e0b\u5212\u7ebf\u5916\u7684\u7279\u6b8a\u5b57\u7b26\u3002\u4f7f\u7528\u7279\u6b8a\u5b57\u7b26\u3001\u4fdd\u7559\u5173\u952e\u5b57\u6216\u6570\u5b57\u5f00\u5934\u65f6\uff0c\u9700\u8981\u7528\u53cd\u5f15\u53f7\uff08`\uff09\u5305\u56f4\uff0c\u8be6\u60c5\u53c2\u89c1 \u5173\u952e\u5b57\u548c\u4fdd\u7559\u5b57 \u3002 \u6ce8\u610f \uff1a\u5982\u679c\u4ee5\u4e2d\u6587\u4e3a\u7d22\u5f15\u547d\u540d\uff0c\u62a5 SyntaxError \u9519\u8bef\u65f6\uff0c\u9700\u4f7f\u7528\u53cd\u5f15\u53f7\uff08`\uff09\u5305\u56f4\u4e2d\u6587\u5b57\u7b26\u3002 <tag_name> | <edge_name> \u6307\u5b9a\u7d22\u5f15\u5173\u8054\u7684 Tag \u6216 Edge \u540d\u79f0\u3002 <prop_name_list> \u4e3a \u53d8\u957f \u5b57\u7b26\u4e32\u5c5e\u6027\u521b\u5efa\u7d22\u5f15\u65f6\uff0c\u5fc5\u987b\u7528 prop_name(length) \u6307\u5b9a\u7d22\u5f15\u957f\u5ea6\uff0c\u7d22\u5f15\u957f\u5ea6\u6700\u957f\u4e3a 256\uff1b\u4e3a Tag \u6216 Edge type \u672c\u8eab\u521b\u5efa\u7d22\u5f15\u65f6\uff0c\u5ffd\u7565 <prop_name_list> \u3002 COMMENT \u7d22\u5f15\u7684\u63cf\u8ff0\u3002\u6700\u5927\u4e3a 256 \u5b57\u8282\u3002\u9ed8\u8ba4\u65e0\u63cf\u8ff0\u3002","title":"\u8bed\u6cd5"},{"location":"3.ngql-guide/14.native-index-statements/1.create-native-index/#tagedge_type","text":"nebula> CREATE TAG INDEX player_index on player(); nebula> CREATE EDGE INDEX follow_index on follow(); \u4e3a Tag \u6216 Edge type \u521b\u5efa\u7d22\u5f15\u540e\uff0c\u7528\u6237\u53ef\u4ee5\u4f7f\u7528 LOOKUP \u8bed\u53e5\u67e5\u627e \u5e26\u6709\u8be5 Tag \u7684 \u6240\u6709\u70b9\u7684 VID\uff0c\u6216\u8005 \u6240\u6709\u8be5\u7c7b\u578b\u7684\u8fb9 \u7684 \u5bf9\u5e94\u8d77\u59cb\u70b9 VID\u3001\u76ee\u7684\u70b9 VID\u3001\u4ee5\u53ca rank \u3002\u8be6\u60c5\u8bf7\u53c2\u89c1 LOOKUP \u3002","title":"\u521b\u5efa Tag/Edge type \u7d22\u5f15"},{"location":"3.ngql-guide/14.native-index-statements/1.create-native-index/#_5","text":"nebula> CREATE TAG INDEX IF NOT EXISTS player_index_0 on player(name(10)); \u4e0a\u8ff0\u793a\u4f8b\u662f\u4e3a\u6240\u6709\u5305\u542b Tag player \u7684\u70b9\u521b\u5efa\u5c5e\u6027 name \u7684\u7d22\u5f15\uff0c\u7d22\u5f15\u957f\u5ea6\u4e3a 10\u3002\u5373\u53ea\u4f7f\u7528\u5c5e\u6027 name \u7684\u524d 10 \u4e2a\u5b57\u7b26\u6765\u521b\u5efa\u7d22\u5f15\u3002 # \u53d8\u957f\u5b57\u7b26\u4e32\u9700\u8981\u6307\u5b9a\u7d22\u5f15\u957f\u5ea6\u3002 nebula> CREATE TAG IF NOT EXISTS var_string(p1 string); nebula> CREATE TAG INDEX IF NOT EXISTS var ON var_string(p1(10)); # \u5b9a\u957f\u5b57\u7b26\u4e32\u4e0d\u9700\u8981\u6307\u5b9a\u7d22\u5f15\u957f\u5ea6\u3002 nebula> CREATE TAG IF NOT EXISTS fix_string(p1 FIXED_STRING(10)); nebula> CREATE TAG INDEX IF NOT EXISTS fix ON fix_string(p1); nebula> CREATE EDGE INDEX IF NOT EXISTS follow_index_0 on follow(degree);","title":"\u521b\u5efa\u5355\u5c5e\u6027\u7d22\u5f15"},{"location":"3.ngql-guide/14.native-index-statements/1.create-native-index/#_6","text":"\u590d\u5408\u5c5e\u6027\u7d22\u5f15 \u7528\u4e8e\u67e5\u627e\u4e00\u4e2a Tag\uff08\u6216\u8005 Edge type) \u4e2d\u7684\u591a\u4e2a\u5c5e\u6027\uff08\u7684\u7ec4\u5408\uff09\u3002 nebula> CREATE TAG INDEX IF NOT EXISTS player_index_1 on player(name(10), age); Caution \u4e0d\u652f\u6301\u8de8 Tag \u6216 Edge type \u521b\u5efa\u590d\u5408\u7d22\u5f15\u3002 Note \u4f7f\u7528\u590d\u5408\u5c5e\u6027\u7d22\u5f15\u65f6\uff0c\u9075\u5faa\"\u6700\u5de6\u5339\u914d\u539f\u5219\"\uff0c\u5fc5\u987b\u4ece\u590d\u5408\u5c5e\u6027\u7d22\u5f15\u7684\u6700\u5de6\u4fa7\u5f00\u59cb\u5339\u914d\u3002","title":"\u521b\u5efa\u590d\u5408\u5c5e\u6027\u7d22\u5f15"},{"location":"3.ngql-guide/14.native-index-statements/2.1.show-create-index/","text":"SHOW CREATE INDEX \u00b6 SHOW CREATE INDEX \u5c55\u793a\u521b\u5efa Tag \u6216\u8005 Edge type \u65f6\u4f7f\u7528\u7684 nGQL \u8bed\u53e5\uff0c\u5176\u4e2d\u5305\u542b\u7d22\u5f15\u7684\u8be6\u7ec6\u4fe1\u606f\uff0c\u4f8b\u5982\u5176\u5173\u8054\u7684\u5c5e\u6027\u3002 \u8bed\u6cd5 \u00b6 SHOW CREATE {TAG | EDGE} INDEX <index_name>; \u793a\u4f8b \u00b6 \u7528\u6237\u53ef\u4ee5\u5148\u8fd0\u884c SHOW TAG INDEXES \u67e5\u770b\u6709\u54ea\u4e9b Tag \u7d22\u5f15\uff0c\u7136\u540e\u7528 SHOW CREATE TAG INDEX \u67e5\u770b\u6307\u5b9a\u7d22\u5f15\u7684\u521b\u5efa\u4fe1\u606f\u3002 nebula> SHOW TAG INDEXES; +------------------+----------+----------+ | Index Name | By Tag | Columns | +------------------+----------+----------+ | \"player_index_0\" | \"player\" | [] | | \"player_index_1\" | \"player\" | [\"name\"] | +------------------+----------+----------+ nebula> SHOW CREATE TAG INDEX player_index_1; +------------------+--------------------------------------------------+ | Tag Index Name | Create Tag Index | +------------------+--------------------------------------------------+ | \"player_index_1\" | \"CREATE TAG INDEX `player_index_1` ON `player` ( | | | `name`(20) | | | )\" | +------------------+--------------------------------------------------+ Edge type \u7d22\u5f15\u53ef\u4ee5\u7528\u7c7b\u4f3c\u7684\u65b9\u6cd5\u67e5\u8be2\uff1a nebula> SHOW EDGE INDEXES; +----------------+----------+---------+ | Index Name | By Edge | Columns | +----------------+----------+---------+ | \"follow_index\" | \"follow\" | [] | +----------------+----------+---------+ nebula> SHOW CREATE EDGE INDEX follow_index; +-----------------+-------------------------------------------------+ | Edge Index Name | Create Edge Index | +-----------------+-------------------------------------------------+ | \"follow_index\" | \"CREATE EDGE INDEX `follow_index` ON `follow` ( | | | )\" | +-----------------+-------------------------------------------------+","title":"SHOW CREATE INDEX"},{"location":"3.ngql-guide/14.native-index-statements/2.1.show-create-index/#show_create_index","text":"SHOW CREATE INDEX \u5c55\u793a\u521b\u5efa Tag \u6216\u8005 Edge type \u65f6\u4f7f\u7528\u7684 nGQL \u8bed\u53e5\uff0c\u5176\u4e2d\u5305\u542b\u7d22\u5f15\u7684\u8be6\u7ec6\u4fe1\u606f\uff0c\u4f8b\u5982\u5176\u5173\u8054\u7684\u5c5e\u6027\u3002","title":"SHOW CREATE INDEX"},{"location":"3.ngql-guide/14.native-index-statements/2.1.show-create-index/#_1","text":"SHOW CREATE {TAG | EDGE} INDEX <index_name>;","title":"\u8bed\u6cd5"},{"location":"3.ngql-guide/14.native-index-statements/2.1.show-create-index/#_2","text":"\u7528\u6237\u53ef\u4ee5\u5148\u8fd0\u884c SHOW TAG INDEXES \u67e5\u770b\u6709\u54ea\u4e9b Tag \u7d22\u5f15\uff0c\u7136\u540e\u7528 SHOW CREATE TAG INDEX \u67e5\u770b\u6307\u5b9a\u7d22\u5f15\u7684\u521b\u5efa\u4fe1\u606f\u3002 nebula> SHOW TAG INDEXES; +------------------+----------+----------+ | Index Name | By Tag | Columns | +------------------+----------+----------+ | \"player_index_0\" | \"player\" | [] | | \"player_index_1\" | \"player\" | [\"name\"] | +------------------+----------+----------+ nebula> SHOW CREATE TAG INDEX player_index_1; +------------------+--------------------------------------------------+ | Tag Index Name | Create Tag Index | +------------------+--------------------------------------------------+ | \"player_index_1\" | \"CREATE TAG INDEX `player_index_1` ON `player` ( | | | `name`(20) | | | )\" | +------------------+--------------------------------------------------+ Edge type \u7d22\u5f15\u53ef\u4ee5\u7528\u7c7b\u4f3c\u7684\u65b9\u6cd5\u67e5\u8be2\uff1a nebula> SHOW EDGE INDEXES; +----------------+----------+---------+ | Index Name | By Edge | Columns | +----------------+----------+---------+ | \"follow_index\" | \"follow\" | [] | +----------------+----------+---------+ nebula> SHOW CREATE EDGE INDEX follow_index; +-----------------+-------------------------------------------------+ | Edge Index Name | Create Edge Index | +-----------------+-------------------------------------------------+ | \"follow_index\" | \"CREATE EDGE INDEX `follow_index` ON `follow` ( | | | )\" | +-----------------+-------------------------------------------------+","title":"\u793a\u4f8b"},{"location":"3.ngql-guide/14.native-index-statements/2.show-native-indexes/","text":"SHOW INDEXES \u00b6 SHOW INDEXES \u8bed\u53e5\u53ef\u4ee5\u5217\u51fa\u5f53\u524d\u56fe\u7a7a\u95f4\u5185\u7684\u6240\u6709 Tag \u548c Edge type\uff08\u5305\u62ec\u5c5e\u6027\uff09\u7684\u7d22\u5f15\u3002 \u8bed\u6cd5 \u00b6 SHOW {TAG | EDGE} INDEXES; \u793a\u4f8b \u00b6 nebula> SHOW TAG INDEXES; +------------------+--------------+-----------------+ | Index Name | By Tag | Columns | +------------------+--------------+-----------------+ | \"fix\" | \"fix_string\" | [\"p1\"] | | \"player_index_0\" | \"player\" | [\"name\"] | | \"player_index_1\" | \"player\" | [\"name\", \"age\"] | | \"var\" | \"var_string\" | [\"p1\"] | +------------------+--------------+-----------------+ nebula> SHOW EDGE INDEXES; +----------------+----------+---------+ | Index Name | By Edge | Columns | +----------------+----------+---------+ | \"follow_index\" | \"follow\" | [] | +----------------+----------+---------+","title":"SHOW INDEX"},{"location":"3.ngql-guide/14.native-index-statements/2.show-native-indexes/#show_indexes","text":"SHOW INDEXES \u8bed\u53e5\u53ef\u4ee5\u5217\u51fa\u5f53\u524d\u56fe\u7a7a\u95f4\u5185\u7684\u6240\u6709 Tag \u548c Edge type\uff08\u5305\u62ec\u5c5e\u6027\uff09\u7684\u7d22\u5f15\u3002","title":"SHOW INDEXES"},{"location":"3.ngql-guide/14.native-index-statements/2.show-native-indexes/#_1","text":"SHOW {TAG | EDGE} INDEXES;","title":"\u8bed\u6cd5"},{"location":"3.ngql-guide/14.native-index-statements/2.show-native-indexes/#_2","text":"nebula> SHOW TAG INDEXES; +------------------+--------------+-----------------+ | Index Name | By Tag | Columns | +------------------+--------------+-----------------+ | \"fix\" | \"fix_string\" | [\"p1\"] | | \"player_index_0\" | \"player\" | [\"name\"] | | \"player_index_1\" | \"player\" | [\"name\", \"age\"] | | \"var\" | \"var_string\" | [\"p1\"] | +------------------+--------------+-----------------+ nebula> SHOW EDGE INDEXES; +----------------+----------+---------+ | Index Name | By Edge | Columns | +----------------+----------+---------+ | \"follow_index\" | \"follow\" | [] | +----------------+----------+---------+","title":"\u793a\u4f8b"},{"location":"3.ngql-guide/14.native-index-statements/3.describe-native-index/","text":"DESCRIBE INDEX \u00b6 DESCRIBE INDEX \u8bed\u53e5\u53ef\u4ee5\u67e5\u770b\u6307\u5b9a\u7d22\u5f15\u7684\u4fe1\u606f\uff0c\u5305\u62ec\u7d22\u5f15\u7684\u5c5e\u6027\u540d\u79f0\uff08Field\uff09\u548c\u6570\u636e\u7c7b\u578b\uff08Type\uff09\u3002 \u8bed\u6cd5 \u00b6 DESCRIBE {TAG | EDGE} INDEX <index_name>; \u793a\u4f8b \u00b6 nebula> DESCRIBE TAG INDEX player_index_0; +--------+--------------------+ | Field | Type | +--------+--------------------+ | \"name\" | \"fixed_string(30)\" | +--------+--------------------+ nebula> DESCRIBE TAG INDEX player_index_1; +--------+--------------------+ | Field | Type | +--------+--------------------+ | \"name\" | \"fixed_string(10)\" | | \"age\" | \"int64\" | +--------+--------------------+","title":"DESCRIBE INDEX"},{"location":"3.ngql-guide/14.native-index-statements/3.describe-native-index/#describe_index","text":"DESCRIBE INDEX \u8bed\u53e5\u53ef\u4ee5\u67e5\u770b\u6307\u5b9a\u7d22\u5f15\u7684\u4fe1\u606f\uff0c\u5305\u62ec\u7d22\u5f15\u7684\u5c5e\u6027\u540d\u79f0\uff08Field\uff09\u548c\u6570\u636e\u7c7b\u578b\uff08Type\uff09\u3002","title":"DESCRIBE INDEX"},{"location":"3.ngql-guide/14.native-index-statements/3.describe-native-index/#_1","text":"DESCRIBE {TAG | EDGE} INDEX <index_name>;","title":"\u8bed\u6cd5"},{"location":"3.ngql-guide/14.native-index-statements/3.describe-native-index/#_2","text":"nebula> DESCRIBE TAG INDEX player_index_0; +--------+--------------------+ | Field | Type | +--------+--------------------+ | \"name\" | \"fixed_string(30)\" | +--------+--------------------+ nebula> DESCRIBE TAG INDEX player_index_1; +--------+--------------------+ | Field | Type | +--------+--------------------+ | \"name\" | \"fixed_string(10)\" | | \"age\" | \"int64\" | +--------+--------------------+","title":"\u793a\u4f8b"},{"location":"3.ngql-guide/14.native-index-statements/4.rebuild-native-index/","text":"REBUILD INDEX \u00b6 Danger \u7d22\u5f15\u529f\u80fd\u4e0d\u4f1a\u81ea\u52a8\u5bf9\u5176\u521b\u5efa\u4e4b\u524d\u5df2\u5b58\u5728\u7684\u5b58\u91cf\u6570\u636e\u751f\u6548\u2014\u2014\u2014\u2014\u5728\u7d22\u5f15\u91cd\u5efa\u5b8c\u6210\u4e4b\u524d\uff0c\u65e0\u6cd5\u57fa\u4e8e\u8be5\u7d22\u5f15\u4f7f\u7528 LOOKUP \u548c MATCH \u8bed\u53e5\u67e5\u8be2\u5230\u5b58\u91cf\u6570\u636e\u3002 \u7d22\u5f15\u7684\u91cd\u5efa\u672a\u5b8c\u6210\u65f6\uff0c\u4f9d\u8d56\u7d22\u5f15\u7684\u67e5\u8be2\u4ec5\u80fd\u4f7f\u7528\u90e8\u5206\u7d22\u5f15\uff0c\u56e0\u6b64\u4e0d\u80fd\u83b7\u5f97\u51c6\u786e\u7ed3\u679c\u3002 \u8bf7\u5728\u521b\u5efa\u7d22\u5f15\u540e\uff0c\u9009\u62e9\u5408\u9002\u7684\u65f6\u95f4\u4e3a\u5b58\u91cf\u6570\u636e\u91cd\u5efa\u7d22\u5f15\u3002\u4f7f\u7528\u7d22\u5f15\u7684\u8be6\u60c5\u8bf7\u53c2\u89c1 CREATE INDEX \u3002 Performance \u901a\u8fc7\u4fee\u6539\u914d\u7f6e\u6587\u4ef6\u4e2d\u7684 rebuild_index_part_rate_limit \u548c rebuild_index_batch_size \u4e24\u4e2a\u53c2\u6570\uff0c\u53ef\u4f18\u5316\u91cd\u5efa\u7d22\u5f15\u7684\u901f\u5ea6\uff0c\u53e6\u5916\uff0c\u66f4\u5927\u53c2\u6570\u53ef\u80fd\u4f1a\u5bfc\u81f4\u66f4\u9ad8\u7684\u5185\u5b58\u548c\u7f51\u7edc\u5360\u7528\uff0c\u8be6\u60c5\u8bf7\u53c2\u89c1 Storage\u670d\u52a1\u914d\u7f6e \u3002 \u8bed\u6cd5 \u00b6 REBUILD {TAG | EDGE} INDEX [<index_name_list>]; <index_name_list>::= [index_name [, index_name] ...] \u53ef\u4ee5\u4e00\u6b21\u91cd\u5efa\u591a\u4e2a\u7d22\u5f15\uff0c\u7d22\u5f15\u540d\u79f0\u4e4b\u95f4\u7528\u82f1\u6587\u9017\u53f7\uff08,\uff09\u5206\u9694\u3002\u5982\u679c\u6ca1\u6709\u6307\u5b9a\u7d22\u5f15\u540d\u79f0\uff0c\u5c06\u4f1a\u91cd\u5efa\u6240\u6709\u7d22\u5f15\u3002 \u91cd\u5efa\u5b8c\u6210\u540e\uff0c\u7528\u6237\u53ef\u4ee5\u4f7f\u7528\u547d\u4ee4 SHOW {TAG | EDGE} INDEX STATUS \u68c0\u67e5\u7d22\u5f15\u662f\u5426\u91cd\u5efa\u5b8c\u6210\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1 SHOW INDEX STATUS \u3002 \u793a\u4f8b \u00b6 nebula> CREATE TAG IF NOT EXISTS person(name string, age int, gender string, email string); nebula> CREATE TAG INDEX IF NOT EXISTS single_person_index ON person(name(10)); # \u91cd\u5efa\u7d22\u5f15\uff0c\u8fd4\u56de\u4efb\u52a1 ID\u3002 nebula> REBUILD TAG INDEX single_person_index; +------------+ | New Job Id | +------------+ | 31 | +------------+ # \u67e5\u770b\u7d22\u5f15\u72b6\u6001\u3002 nebula> SHOW TAG INDEX STATUS; +-----------------------+--------------+ | Name | Index Status | +-----------------------+--------------+ | \"single_person_index\" | \"FINISHED\" | +-----------------------+--------------+ # \u4e5f\u53ef\u4ee5\u4f7f\u7528 SHOW JOB <job_id>\u67e5\u770b\u91cd\u5efa\u7d22\u5f15\u7684\u4efb\u52a1\u72b6\u6001\u3002 nebula> SHOW JOB 31; +----------------+---------------------+------------+-------------------------+-------------------------+-------------+ | Job Id(TaskId) | Command(Dest) | Status | Start Time | Stop Time | Error Code | +----------------+---------------------+------------+-------------------------+-------------------------+-------------+ | 31 | \"REBUILD_TAG_INDEX\" | \"FINISHED\" | 2021-07-07T09:04:24.000 | 2021-07-07T09:04:24.000 | \"SUCCEEDED\" | | 0 | \"storaged1\" | \"FINISHED\" | 2021-07-07T09:04:24.000 | 2021-07-07T09:04:28.000 | \"SUCCEEDED\" | | 1 | \"storaged2\" | \"FINISHED\" | 2021-07-07T09:04:24.000 | 2021-07-07T09:04:28.000 | \"SUCCEEDED\" | | 2 | \"storaged0\" | \"FINISHED\" | 2021-07-07T09:04:24.000 | 2021-07-07T09:04:28.000 | \"SUCCEEDED\" | | \"Total:3\" | \"Succeeded:3\" | \"Failed:0\" | \"In Progress:0\" | \"\" | \"\" | +----------------+---------------------+------------+----------------------------+----------------------------+-------------+ +----------------+---------------------+------------+-------------------------+-------------------------+-------------+ NebulaGraph\u521b\u5efa\u4e00\u4e2a\u4efb\u52a1\u53bb\u91cd\u5efa\u7d22\u5f15\uff0c\u56e0\u6b64\u53ef\u4ee5\u6839\u636e\u8fd4\u56de\u7684\u4efb\u52a1 ID\uff0c\u901a\u8fc7 SHOW JOB <job_id> \u8bed\u53e5\u67e5\u770b\u4efb\u52a1\u72b6\u6001\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1 SHOW JOB \u3002","title":"REBUILD INDEX"},{"location":"3.ngql-guide/14.native-index-statements/4.rebuild-native-index/#rebuild_index","text":"Danger \u7d22\u5f15\u529f\u80fd\u4e0d\u4f1a\u81ea\u52a8\u5bf9\u5176\u521b\u5efa\u4e4b\u524d\u5df2\u5b58\u5728\u7684\u5b58\u91cf\u6570\u636e\u751f\u6548\u2014\u2014\u2014\u2014\u5728\u7d22\u5f15\u91cd\u5efa\u5b8c\u6210\u4e4b\u524d\uff0c\u65e0\u6cd5\u57fa\u4e8e\u8be5\u7d22\u5f15\u4f7f\u7528 LOOKUP \u548c MATCH \u8bed\u53e5\u67e5\u8be2\u5230\u5b58\u91cf\u6570\u636e\u3002 \u7d22\u5f15\u7684\u91cd\u5efa\u672a\u5b8c\u6210\u65f6\uff0c\u4f9d\u8d56\u7d22\u5f15\u7684\u67e5\u8be2\u4ec5\u80fd\u4f7f\u7528\u90e8\u5206\u7d22\u5f15\uff0c\u56e0\u6b64\u4e0d\u80fd\u83b7\u5f97\u51c6\u786e\u7ed3\u679c\u3002 \u8bf7\u5728\u521b\u5efa\u7d22\u5f15\u540e\uff0c\u9009\u62e9\u5408\u9002\u7684\u65f6\u95f4\u4e3a\u5b58\u91cf\u6570\u636e\u91cd\u5efa\u7d22\u5f15\u3002\u4f7f\u7528\u7d22\u5f15\u7684\u8be6\u60c5\u8bf7\u53c2\u89c1 CREATE INDEX \u3002 Performance \u901a\u8fc7\u4fee\u6539\u914d\u7f6e\u6587\u4ef6\u4e2d\u7684 rebuild_index_part_rate_limit \u548c rebuild_index_batch_size \u4e24\u4e2a\u53c2\u6570\uff0c\u53ef\u4f18\u5316\u91cd\u5efa\u7d22\u5f15\u7684\u901f\u5ea6\uff0c\u53e6\u5916\uff0c\u66f4\u5927\u53c2\u6570\u53ef\u80fd\u4f1a\u5bfc\u81f4\u66f4\u9ad8\u7684\u5185\u5b58\u548c\u7f51\u7edc\u5360\u7528\uff0c\u8be6\u60c5\u8bf7\u53c2\u89c1 Storage\u670d\u52a1\u914d\u7f6e \u3002","title":"REBUILD INDEX"},{"location":"3.ngql-guide/14.native-index-statements/4.rebuild-native-index/#_1","text":"REBUILD {TAG | EDGE} INDEX [<index_name_list>]; <index_name_list>::= [index_name [, index_name] ...] \u53ef\u4ee5\u4e00\u6b21\u91cd\u5efa\u591a\u4e2a\u7d22\u5f15\uff0c\u7d22\u5f15\u540d\u79f0\u4e4b\u95f4\u7528\u82f1\u6587\u9017\u53f7\uff08,\uff09\u5206\u9694\u3002\u5982\u679c\u6ca1\u6709\u6307\u5b9a\u7d22\u5f15\u540d\u79f0\uff0c\u5c06\u4f1a\u91cd\u5efa\u6240\u6709\u7d22\u5f15\u3002 \u91cd\u5efa\u5b8c\u6210\u540e\uff0c\u7528\u6237\u53ef\u4ee5\u4f7f\u7528\u547d\u4ee4 SHOW {TAG | EDGE} INDEX STATUS \u68c0\u67e5\u7d22\u5f15\u662f\u5426\u91cd\u5efa\u5b8c\u6210\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1 SHOW INDEX STATUS \u3002","title":"\u8bed\u6cd5"},{"location":"3.ngql-guide/14.native-index-statements/4.rebuild-native-index/#_2","text":"nebula> CREATE TAG IF NOT EXISTS person(name string, age int, gender string, email string); nebula> CREATE TAG INDEX IF NOT EXISTS single_person_index ON person(name(10)); # \u91cd\u5efa\u7d22\u5f15\uff0c\u8fd4\u56de\u4efb\u52a1 ID\u3002 nebula> REBUILD TAG INDEX single_person_index; +------------+ | New Job Id | +------------+ | 31 | +------------+ # \u67e5\u770b\u7d22\u5f15\u72b6\u6001\u3002 nebula> SHOW TAG INDEX STATUS; +-----------------------+--------------+ | Name | Index Status | +-----------------------+--------------+ | \"single_person_index\" | \"FINISHED\" | +-----------------------+--------------+ # \u4e5f\u53ef\u4ee5\u4f7f\u7528 SHOW JOB <job_id>\u67e5\u770b\u91cd\u5efa\u7d22\u5f15\u7684\u4efb\u52a1\u72b6\u6001\u3002 nebula> SHOW JOB 31; +----------------+---------------------+------------+-------------------------+-------------------------+-------------+ | Job Id(TaskId) | Command(Dest) | Status | Start Time | Stop Time | Error Code | +----------------+---------------------+------------+-------------------------+-------------------------+-------------+ | 31 | \"REBUILD_TAG_INDEX\" | \"FINISHED\" | 2021-07-07T09:04:24.000 | 2021-07-07T09:04:24.000 | \"SUCCEEDED\" | | 0 | \"storaged1\" | \"FINISHED\" | 2021-07-07T09:04:24.000 | 2021-07-07T09:04:28.000 | \"SUCCEEDED\" | | 1 | \"storaged2\" | \"FINISHED\" | 2021-07-07T09:04:24.000 | 2021-07-07T09:04:28.000 | \"SUCCEEDED\" | | 2 | \"storaged0\" | \"FINISHED\" | 2021-07-07T09:04:24.000 | 2021-07-07T09:04:28.000 | \"SUCCEEDED\" | | \"Total:3\" | \"Succeeded:3\" | \"Failed:0\" | \"In Progress:0\" | \"\" | \"\" | +----------------+---------------------+------------+----------------------------+----------------------------+-------------+ +----------------+---------------------+------------+-------------------------+-------------------------+-------------+ NebulaGraph\u521b\u5efa\u4e00\u4e2a\u4efb\u52a1\u53bb\u91cd\u5efa\u7d22\u5f15\uff0c\u56e0\u6b64\u53ef\u4ee5\u6839\u636e\u8fd4\u56de\u7684\u4efb\u52a1 ID\uff0c\u901a\u8fc7 SHOW JOB <job_id> \u8bed\u53e5\u67e5\u770b\u4efb\u52a1\u72b6\u6001\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1 SHOW JOB \u3002","title":"\u793a\u4f8b"},{"location":"3.ngql-guide/14.native-index-statements/5.show-native-index-status/","text":"SHOW INDEX STATUS \u00b6 SHOW INDEX STATUS \u8bed\u53e5\u53ef\u4ee5\u67e5\u770b\u7d22\u5f15\u540d\u79f0\u548c\u5bf9\u5e94\u4f5c\u4e1a\u7684\u72b6\u6001\u3002 \u91cd\u5efa\u7d22\u5f15\u65f6\u7684\u4f5c\u4e1a\u72b6\u6001\u5305\u62ec\uff1a QUEUE \uff1a\u961f\u5217\u4e2d RUNNING \uff1a\u6267\u884c\u4e2d FINISHED \uff1a\u5df2\u5b8c\u6210 FAILED \uff1a\u5931\u8d25 STOPPED \uff1a\u505c\u6b62 INVALID \uff1a\u5931\u6548 Note \u5982\u4f55\u521b\u5efa\u7d22\u5f15\u8bf7\u53c2\u89c1 CREATE INDEX \u3002 \u8bed\u6cd5 \u00b6 SHOW {TAG | EDGE} INDEX STATUS; \u793a\u4f8b \u00b6 nebula> SHOW TAG INDEX STATUS; +----------------------+--------------+ | Name | Index Status | +----------------------+--------------+ | \"player_index_0\" | \"FINISHED\" | | \"player_index_1\" | \"FINISHED\" | +----------------------+--------------+","title":"SHOW INDEX STATUS"},{"location":"3.ngql-guide/14.native-index-statements/5.show-native-index-status/#show_index_status","text":"SHOW INDEX STATUS \u8bed\u53e5\u53ef\u4ee5\u67e5\u770b\u7d22\u5f15\u540d\u79f0\u548c\u5bf9\u5e94\u4f5c\u4e1a\u7684\u72b6\u6001\u3002 \u91cd\u5efa\u7d22\u5f15\u65f6\u7684\u4f5c\u4e1a\u72b6\u6001\u5305\u62ec\uff1a QUEUE \uff1a\u961f\u5217\u4e2d RUNNING \uff1a\u6267\u884c\u4e2d FINISHED \uff1a\u5df2\u5b8c\u6210 FAILED \uff1a\u5931\u8d25 STOPPED \uff1a\u505c\u6b62 INVALID \uff1a\u5931\u6548 Note \u5982\u4f55\u521b\u5efa\u7d22\u5f15\u8bf7\u53c2\u89c1 CREATE INDEX \u3002","title":"SHOW INDEX STATUS"},{"location":"3.ngql-guide/14.native-index-statements/5.show-native-index-status/#_1","text":"SHOW {TAG | EDGE} INDEX STATUS;","title":"\u8bed\u6cd5"},{"location":"3.ngql-guide/14.native-index-statements/5.show-native-index-status/#_2","text":"nebula> SHOW TAG INDEX STATUS; +----------------------+--------------+ | Name | Index Status | +----------------------+--------------+ | \"player_index_0\" | \"FINISHED\" | | \"player_index_1\" | \"FINISHED\" | +----------------------+--------------+","title":"\u793a\u4f8b"},{"location":"3.ngql-guide/14.native-index-statements/6.drop-native-index/","text":"DROP INDEX \u00b6 DROP INDEX \u8bed\u53e5\u53ef\u4ee5\u5220\u9664\u5f53\u524d\u56fe\u7a7a\u95f4\u4e2d\u5df2\u5b58\u5728\u7684\u7d22\u5f15\u3002 \u524d\u63d0\u6761\u4ef6 \u00b6 \u6267\u884c DROP INDEX \u8bed\u53e5\u9700\u8981\u5f53\u524d\u767b\u5f55\u7684\u7528\u6237\u62e5\u6709\u6307\u5b9a\u56fe\u7a7a\u95f4\u7684 DROP TAG INDEX \u548c DROP EDGE INDEX \u6743\u9650 \uff0c\u5426\u5219\u4f1a\u62a5\u9519\u3002 \u8bed\u6cd5 \u00b6 DROP {TAG | EDGE} INDEX [IF EXISTS] <index_name>; IF EXISTS \uff1a\u68c0\u6d4b\u5f85\u5220\u9664\u7684\u7d22\u5f15\u662f\u5426\u5b58\u5728\uff0c\u53ea\u6709\u5b58\u5728\u65f6\uff0c\u624d\u4f1a\u5220\u9664\u7d22\u5f15\u3002 \u793a\u4f8b \u00b6 nebula> DROP TAG INDEX player_index_0;","title":"DROP INDEX"},{"location":"3.ngql-guide/14.native-index-statements/6.drop-native-index/#drop_index","text":"DROP INDEX \u8bed\u53e5\u53ef\u4ee5\u5220\u9664\u5f53\u524d\u56fe\u7a7a\u95f4\u4e2d\u5df2\u5b58\u5728\u7684\u7d22\u5f15\u3002","title":"DROP INDEX"},{"location":"3.ngql-guide/14.native-index-statements/6.drop-native-index/#_1","text":"\u6267\u884c DROP INDEX \u8bed\u53e5\u9700\u8981\u5f53\u524d\u767b\u5f55\u7684\u7528\u6237\u62e5\u6709\u6307\u5b9a\u56fe\u7a7a\u95f4\u7684 DROP TAG INDEX \u548c DROP EDGE INDEX \u6743\u9650 \uff0c\u5426\u5219\u4f1a\u62a5\u9519\u3002","title":"\u524d\u63d0\u6761\u4ef6"},{"location":"3.ngql-guide/14.native-index-statements/6.drop-native-index/#_2","text":"DROP {TAG | EDGE} INDEX [IF EXISTS] <index_name>; IF EXISTS \uff1a\u68c0\u6d4b\u5f85\u5220\u9664\u7684\u7d22\u5f15\u662f\u5426\u5b58\u5728\uff0c\u53ea\u6709\u5b58\u5728\u65f6\uff0c\u624d\u4f1a\u5220\u9664\u7d22\u5f15\u3002","title":"\u8bed\u6cd5"},{"location":"3.ngql-guide/14.native-index-statements/6.drop-native-index/#_3","text":"nebula> DROP TAG INDEX player_index_0;","title":"\u793a\u4f8b"},{"location":"3.ngql-guide/15.full-text-index-statements/1.search-with-text-based-index/","text":"\u5168\u6587\u641c\u7d22 \u00b6 \u5168\u6587\u641c\u7d22\u662f\u57fa\u4e8e\u5168\u6587\u7d22\u5f15\u5bf9\u503c\u4e3a\u5b57\u7b26\u4e32\u7c7b\u578b\u7684\u5c5e\u6027\u8fdb\u884c\u524d\u7f00\u641c\u7d22\u3001\u901a\u914d\u7b26\u641c\u7d22\u3001\u6b63\u5219\u8868\u8fbe\u5f0f\u641c\u7d22\u548c\u6a21\u7cca\u641c\u7d22\u3002 \u5728 LOOKUP \u8bed\u53e5\u4e2d\uff0c\u4f7f\u7528 WHERE \u5b50\u53e5\u6307\u5b9a\u5b57\u7b26\u4e32\u7684\u641c\u7d22\u6761\u4ef6\u3002 \u524d\u63d0\u6761\u4ef6 \u00b6 \u8bf7\u786e\u4fdd\u5df2\u7ecf\u90e8\u7f72\u5168\u6587\u7d22\u5f15\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1 \u90e8\u7f72\u5168\u6587\u7d22\u5f15 \u548c \u90e8\u7f72 listener \u3002 \u6ce8\u610f\u4e8b\u9879 \u00b6 \u4f7f\u7528\u5168\u6587\u7d22\u5f15\u524d\uff0c\u8bf7\u786e\u8ba4\u5df2\u7ecf\u4e86\u89e3\u5168\u6587\u7d22\u5f15\u7684 \u4f7f\u7528\u9650\u5236 \u3002 \u5168\u6587\u672c\u67e5\u8be2 \u00b6 \u5168\u6587\u672c\u67e5\u8be2\u4f7f\u60a8\u80fd\u591f\u641c\u7d22\u7ecf\u8fc7\u5206\u6790\u7684\u6587\u672c\u5b57\u6bb5\uff0c\u4f7f\u7528\u5177\u6709\u4e25\u683c\u8bed\u6cd5\u7684\u89e3\u6790\u5668\uff0c\u6839\u636e\u63d0\u4f9b\u7684\u67e5\u8be2\u5b57\u7b26\u4e32\u8fd4\u56de\u5185\u5bb9\u3002\u8be6\u60c5\u53c2\u89c1 Query string query \u3002 \u8bed\u6cd5 \u00b6 \u521b\u5efa\u5168\u6587\u7d22\u5f15 \u00b6 CREATE FULLTEXT {TAG | EDGE} INDEX <index_name> ON {<tag_name> | <edge_name>} (<prop_name> [,<prop_name>]...) [ANALYZER=\"<analyzer_name>\"]; \u521b\u5efa\u5168\u6587\u7d22\u5f15\u65f6\u652f\u6301\u591a\u5c5e\u6027\u7684\u590d\u5408\u7d22\u5f15\u3002 <analyzer_name> \u4e3a\u5206\u8bcd\u5668\u540d\u79f0\u3002\u9ed8\u8ba4\u4e3a standard \u3002\u4f7f\u7528\u5176\u4ed6\u5206\u8bcd\u5668\uff08\u4f8b\u5982 IK Analysis \uff09\u9700\u8981\u786e\u4fdd\u5df2\u7ecf\u63d0\u524d\u5728 Elasticsearch \u4e2d\u5b89\u88c5\u5bf9\u5e94\u5206\u8bcd\u5668\u3002 \u663e\u793a\u5168\u6587\u7d22\u5f15 \u00b6 SHOW FULLTEXT INDEXES; \u91cd\u5efa\u5168\u6587\u7d22\u5f15 \u00b6 REBUILD FULLTEXT INDEX; Caution \u6570\u636e\u91cf\u5927\u65f6\uff0c\u91cd\u5efa\u5168\u6587\u7d22\u5f15\u901f\u5ea6\u8f83\u6162\uff0c\u53ef\u4ee5\u4fee\u6539 Storage \u670d\u52a1\u7684\u914d\u7f6e\u6587\u4ef6\uff08 nebula-storaged.conf \uff09\u4e2d snapshot_send_files=false \u3002 \u5220\u9664\u5168\u6587\u7d22\u5f15 \u00b6 DROP FULLTEXT INDEX <index_name>; \u4f7f\u7528\u67e5\u8be2\u9009\u9879 \u00b6 LOOKUP ON {<tag> | <edge_type>} WHERE ES_QUERY(<index_name>, \"<text>\") YIELD <return_list> [| LIMIT [<offset>,] <number_rows>]; <return_list> <prop_name> [AS <prop_alias>] [, <prop_name> [AS <prop_alias>] ...] [, id(vertex) [AS <prop_alias>]] [, score() AS <score_alias>] index_name \uff1a\u7d22\u5f15\u540d\u79f0\u3002 text \uff1a\u641c\u7d22\u6761\u4ef6\u3002WHERE \u540e\u53ea\u80fd\u8ddf\u4e00\u4e2a ES_QUERY\uff0c\u6240\u6709\u5224\u65ad\u6761\u4ef6\u5fc5\u987b\u5199\u5728 text \u91cc\u3002\u8be6\u7ec6\u8bed\u6cd5\u8bf7\u53c2\u89c1 Query string syntax \u3002 score() \uff1a\u5bf9\u7b26\u5408\u6761\u4ef6\u7684\u70b9\u505a N \u5ea6\u6269\u5c55\u8ba1\u7b97\u51fa\u7684\u5206\u6570\u3002\u9ed8\u8ba4\u503c\u4e3a 1.0 \u3002\u5206\u6570\u8d8a\u9ad8\uff0c\u5339\u914d\u7a0b\u5ea6\u8d8a\u9ad8\u3002\u8fd4\u56de\u503c\u9ed8\u8ba4\u6309\u7167\u5206\u6570\u4ece\u9ad8\u5230\u4f4e\u6392\u5e8f\u3002\u8be6\u60c5\u53c2\u89c1 Search and Scoring in Lucene \u3002 \u793a\u4f8b \u00b6 //\u521b\u5efa\u56fe\u7a7a\u95f4\u3002 nebula> CREATE SPACE IF NOT EXISTS basketballplayer (partition_num=3,replica_factor=1, vid_type=fixed_string(30)); //\u767b\u5f55\u6587\u672c\u641c\u7d22\u5ba2\u6237\u7aef\u3002 nebula> SIGN IN TEXT SERVICE (192.168.8.100:9200, HTTP); //\u68c0\u67e5\u662f\u5426\u6210\u529f\u767b\u5f55\u3002 nebula> SHOW TEXT SEARCH CLIENTS; +-----------------+-----------------+------+ | Type | Host | Port | +-----------------+-----------------+------+ | \"ELASTICSEARCH\" | \"192.168.8.100\" | 9200 | +-----------------+-----------------+------+ //\u5207\u6362\u56fe\u7a7a\u95f4\u3002 nebula> USE basketballplayer; //\u6dfb\u52a0 listener \u5230NebulaGraph\u96c6\u7fa4\u3002 nebula> ADD LISTENER ELASTICSEARCH 192.168.8.100:9789; //\u68c0\u67e5\u662f\u5426\u6210\u529f\u6dfb\u52a0 listener\uff0c\u5f53\u72b6\u6001\u4e3a Online \u65f6\u8868\u793a\u6210\u529f\u6dfb\u52a0\u3002 nebula> SHOW LISTENER; +--------+-----------------+------------------------+-------------+ | PartId | Type | Host | Host Status | +--------+-----------------+------------------------+-------------+ | 1 | \"ELASTICSEARCH\" | \"\"192.168.8.100\":9789\" | \"ONLINE\" | | 2 | \"ELASTICSEARCH\" | \"\"192.168.8.100\":9789\" | \"ONLINE\" | | 3 | \"ELASTICSEARCH\" | \"\"192.168.8.100\":9789\" | \"ONLINE\" | +--------+-----------------+------------------------+-------------+ //\u521b\u5efa Tag\u3002 nebula> CREATE TAG IF NOT EXISTS player(name string, city string); //\u521b\u5efa\u5355\u5c5e\u6027\u5168\u6587\u7d22\u5f15\u3002 nebula> CREATE FULLTEXT TAG INDEX fulltext_index_1 ON player(name) ANALYZER=\"standard\"; //\u521b\u5efa\u591a\u5c5e\u6027\u5168\u6587\u7d22\u5f15\u3002 nebula> CREATE FULLTEXT TAG INDEX fulltext_index_2 ON player(name,city) ANALYZER=\"standard\"; //\u91cd\u5efa\u5168\u6587\u7d22\u5f15\u3002 nebula> REBUILD FULLTEXT INDEX; //\u67e5\u770b\u5168\u6587\u7d22\u5f15\u3002 nebula> SHOW FULLTEXT INDEXES; +--------------------+-------------+-------------+--------------+------------+ | Name | Schema Type | Schema Name | Fields | Analyzer | +--------------------+-------------+-------------+--------------+------------+ | \"fulltext_index_1\" | \"Tag\" | \"player\" | \"name\" | \"standard\" | | \"fulltext_index_2\" | \"Tag\" | \"player\" | \"name, city\" | \"standard\" | +--------------------+-------------+-------------+--------------+------------+ //\u63d2\u5165\u6d4b\u8bd5\u6570\u636e\u3002 nebula> INSERT VERTEX player(name, city) VALUES \\ \"Russell Westbrook\": (\"Russell Westbrook\", \"Los Angeles\"), \\ \"Chris Paul\": (\"Chris Paul\", \"Houston\"),\\ \"Boris Diaw\": (\"Boris Diaw\", \"Houston\"),\\ \"David West\": (\"David West\", \"Philadelphia\"),\\ \"Danny Green\": (\"Danny Green\", \"Philadelphia\"),\\ \"Tim Duncan\": (\"Tim Duncan\", \"New York\"),\\ \"James Harden\": (\"James Harden\", \"New York\"),\\ \"Tony Parker\": (\"Tony Parker\", \"Chicago\"),\\ \"Aron Baynes\": (\"Aron Baynes\", \"Chicago\"),\\ \"Ben Simmons\": (\"Ben Simmons\", \"Phoenix\"),\\ \"Blake Griffin\": (\"Blake Griffin\", \"Phoenix\"); //\u6d4b\u8bd5\u67e5\u8be2 nebula> LOOKUP ON player WHERE ES_QUERY(fulltext_index_1,\"Chris\") YIELD id(vertex); +--------------+ | id(VERTEX) | +--------------+ | \"Chris Paul\" | +--------------+ nebula> LOOKUP ON player WHERE ES_QUERY(fulltext_index_1,\"Harden\") YIELD properties(vertex); +----------------------------------------------------------------+ | properties(VERTEX) | +----------------------------------------------------------------+ | {_vid: \"James Harden\", city: \"New York\", name: \"James Harden\"} | +----------------------------------------------------------------+ nebula> LOOKUP ON player WHERE ES_QUERY(fulltext_index_1,\"Da*\") YIELD properties(vertex); +------------------------------------------------------------------+ | properties(VERTEX) | +------------------------------------------------------------------+ | {_vid: \"David West\", city: \"Philadelphia\", name: \"David West\"} | | {_vid: \"Danny Green\", city: \"Philadelphia\", name: \"Danny Green\"} | +------------------------------------------------------------------+ nebula> LOOKUP ON player WHERE ES_QUERY(fulltext_index_1,\"*b*\") YIELD id(vertex); +---------------------+ | id(VERTEX) | +---------------------+ | \"Russell Westbrook\" | | \"Boris Diaw\" | | \"Aron Baynes\" | | \"Ben Simmons\" | | \"Blake Griffin\" | +---------------------+ nebula> LOOKUP ON player WHERE ES_QUERY(fulltext_index_1,\"*b*\") YIELD id(vertex) | LIMIT 2,3; +-----------------+ | id(VERTEX) | +-----------------+ | \"Aron Baynes\" | | \"Ben Simmons\" | | \"Blake Griffin\" | +-----------------+ nebula> LOOKUP ON player WHERE ES_QUERY(fulltext_index_1,\"*b*\") YIELD id(vertex) | YIELD count(*); +----------+ | count(*) | +----------+ | 5 | +----------+ nebula> LOOKUP ON player WHERE ES_QUERY(fulltext_index_1,\"*b*\") YIELD id(vertex), score() AS score; +---------------------+-------+ | id(VERTEX) | score | +---------------------+-------+ | \"Russell Westbrook\" | 1.0 | | \"Boris Diaw\" | 1.0 | | \"Aron Baynes\" | 1.0 | | \"Ben Simmons\" | 1.0 | | \"Blake Griffin\" | 1.0 | +---------------------+-------+ //\u5bf9\u4e8e\u5305\u542b b \u7684\u8bcd\u7684\u6587\u6863\uff0c\u5b83\u7684\u5f97\u5206\u5c06\u4e58\u4ee5\u52a0\u6743\u56e0\u5b50 4\uff0c\u800c\u5bf9\u4e8e\u5305\u542b c \u7684\u8bcd\u7684\u6587\u6863\uff0c\u4f7f\u7528\u9ed8\u8ba4\u52a0\u6743\u56e0\u5b50 1\u3002 nebula> LOOKUP ON player WHERE ES_QUERY(fulltext_index_1,\"*b*^4 OR *c*\") YIELD id(vertex), score() AS score; +---------------------+-------+ | id(VERTEX) | score | +---------------------+-------+ | \"Russell Westbrook\" | 4.0 | | \"Boris Diaw\" | 4.0 | | \"Aron Baynes\" | 4.0 | | \"Ben Simmons\" | 4.0 | | \"Blake Griffin\" | 4.0 | | \"Chris Paul\" | 1.0 | | \"Tim Duncan\" | 1.0 | +---------------------+-------+ //\u4f7f\u7528\u591a\u5c5e\u6027\u5168\u6587\u7d22\u5f15\u67e5\u8be2\uff0c\u6b64\u65f6\u6761\u4ef6\u4f1a\u5728\u7d22\u5f15\u7684\u6240\u6709\u5c5e\u6027\u5185\u8fdb\u884c\u5339\u914d\u3002 nebula> LOOKUP ON player WHERE ES_QUERY(fulltext_index_2,\"*h*\") YIELD properties(vertex); +------------------------------------------------------------------+ | properties(VERTEX) | +------------------------------------------------------------------+ | {_vid: \"Chris Paul\", city: \"Houston\", name: \"Chris Paul\"} | | {_vid: \"Boris Diaw\", city: \"Houston\", name: \"Boris Diaw\"} | | {_vid: \"David West\", city: \"Philadelphia\", name: \"David West\"} | | {_vid: \"James Harden\", city: \"New York\", name: \"James Harden\"} | | {_vid: \"Tony Parker\", city: \"Chicago\", name: \"Tony Parker\"} | | {_vid: \"Aron Baynes\", city: \"Chicago\", name: \"Aron Baynes\"} | | {_vid: \"Ben Simmons\", city: \"Phoenix\", name: \"Ben Simmons\"} | | {_vid: \"Blake Griffin\", city: \"Phoenix\", name: \"Blake Griffin\"} | | {_vid: \"Danny Green\", city: \"Philadelphia\", name: \"Danny Green\"} | +------------------------------------------------------------------+ //\u4f7f\u7528\u591a\u5c5e\u6027\u5168\u6587\u7d22\u5f15\u67e5\u8be2\u65f6\uff0c\u53ef\u4ee5\u5bf9\u4e0d\u540c\u7684\u5c5e\u6027\u6307\u5b9a\u4e0d\u540c\u7684\u6587\u672c\u8fdb\u884c\u67e5\u8be2\u3002 nebula> LOOKUP ON player WHERE ES_QUERY(fulltext_index_2,\"name:*b* AND city:Houston\") YIELD properties(vertex); +-----------------------------------------------------------+ | properties(VERTEX) | +-----------------------------------------------------------+ | {_vid: \"Boris Diaw\", city: \"Houston\", name: \"Boris Diaw\"} | +-----------------------------------------------------------+ //\u5220\u9664\u5355\u5c5e\u6027\u5168\u6587\u7d22\u5f15\u3002 nebula> DROP FULLTEXT INDEX fulltext_index_1;","title":"\u5168\u6587\u641c\u7d22"},{"location":"3.ngql-guide/15.full-text-index-statements/1.search-with-text-based-index/#_1","text":"\u5168\u6587\u641c\u7d22\u662f\u57fa\u4e8e\u5168\u6587\u7d22\u5f15\u5bf9\u503c\u4e3a\u5b57\u7b26\u4e32\u7c7b\u578b\u7684\u5c5e\u6027\u8fdb\u884c\u524d\u7f00\u641c\u7d22\u3001\u901a\u914d\u7b26\u641c\u7d22\u3001\u6b63\u5219\u8868\u8fbe\u5f0f\u641c\u7d22\u548c\u6a21\u7cca\u641c\u7d22\u3002 \u5728 LOOKUP \u8bed\u53e5\u4e2d\uff0c\u4f7f\u7528 WHERE \u5b50\u53e5\u6307\u5b9a\u5b57\u7b26\u4e32\u7684\u641c\u7d22\u6761\u4ef6\u3002","title":"\u5168\u6587\u641c\u7d22"},{"location":"3.ngql-guide/15.full-text-index-statements/1.search-with-text-based-index/#_2","text":"\u8bf7\u786e\u4fdd\u5df2\u7ecf\u90e8\u7f72\u5168\u6587\u7d22\u5f15\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1 \u90e8\u7f72\u5168\u6587\u7d22\u5f15 \u548c \u90e8\u7f72 listener \u3002","title":"\u524d\u63d0\u6761\u4ef6"},{"location":"3.ngql-guide/15.full-text-index-statements/1.search-with-text-based-index/#_3","text":"\u4f7f\u7528\u5168\u6587\u7d22\u5f15\u524d\uff0c\u8bf7\u786e\u8ba4\u5df2\u7ecf\u4e86\u89e3\u5168\u6587\u7d22\u5f15\u7684 \u4f7f\u7528\u9650\u5236 \u3002","title":"\u6ce8\u610f\u4e8b\u9879"},{"location":"3.ngql-guide/15.full-text-index-statements/1.search-with-text-based-index/#_4","text":"\u5168\u6587\u672c\u67e5\u8be2\u4f7f\u60a8\u80fd\u591f\u641c\u7d22\u7ecf\u8fc7\u5206\u6790\u7684\u6587\u672c\u5b57\u6bb5\uff0c\u4f7f\u7528\u5177\u6709\u4e25\u683c\u8bed\u6cd5\u7684\u89e3\u6790\u5668\uff0c\u6839\u636e\u63d0\u4f9b\u7684\u67e5\u8be2\u5b57\u7b26\u4e32\u8fd4\u56de\u5185\u5bb9\u3002\u8be6\u60c5\u53c2\u89c1 Query string query \u3002","title":"\u5168\u6587\u672c\u67e5\u8be2"},{"location":"3.ngql-guide/15.full-text-index-statements/1.search-with-text-based-index/#_5","text":"","title":"\u8bed\u6cd5"},{"location":"3.ngql-guide/15.full-text-index-statements/1.search-with-text-based-index/#_6","text":"CREATE FULLTEXT {TAG | EDGE} INDEX <index_name> ON {<tag_name> | <edge_name>} (<prop_name> [,<prop_name>]...) [ANALYZER=\"<analyzer_name>\"]; \u521b\u5efa\u5168\u6587\u7d22\u5f15\u65f6\u652f\u6301\u591a\u5c5e\u6027\u7684\u590d\u5408\u7d22\u5f15\u3002 <analyzer_name> \u4e3a\u5206\u8bcd\u5668\u540d\u79f0\u3002\u9ed8\u8ba4\u4e3a standard \u3002\u4f7f\u7528\u5176\u4ed6\u5206\u8bcd\u5668\uff08\u4f8b\u5982 IK Analysis \uff09\u9700\u8981\u786e\u4fdd\u5df2\u7ecf\u63d0\u524d\u5728 Elasticsearch \u4e2d\u5b89\u88c5\u5bf9\u5e94\u5206\u8bcd\u5668\u3002","title":"\u521b\u5efa\u5168\u6587\u7d22\u5f15"},{"location":"3.ngql-guide/15.full-text-index-statements/1.search-with-text-based-index/#_7","text":"SHOW FULLTEXT INDEXES;","title":"\u663e\u793a\u5168\u6587\u7d22\u5f15"},{"location":"3.ngql-guide/15.full-text-index-statements/1.search-with-text-based-index/#_8","text":"REBUILD FULLTEXT INDEX; Caution \u6570\u636e\u91cf\u5927\u65f6\uff0c\u91cd\u5efa\u5168\u6587\u7d22\u5f15\u901f\u5ea6\u8f83\u6162\uff0c\u53ef\u4ee5\u4fee\u6539 Storage \u670d\u52a1\u7684\u914d\u7f6e\u6587\u4ef6\uff08 nebula-storaged.conf \uff09\u4e2d snapshot_send_files=false \u3002","title":"\u91cd\u5efa\u5168\u6587\u7d22\u5f15"},{"location":"3.ngql-guide/15.full-text-index-statements/1.search-with-text-based-index/#_9","text":"DROP FULLTEXT INDEX <index_name>;","title":"\u5220\u9664\u5168\u6587\u7d22\u5f15"},{"location":"3.ngql-guide/15.full-text-index-statements/1.search-with-text-based-index/#_10","text":"LOOKUP ON {<tag> | <edge_type>} WHERE ES_QUERY(<index_name>, \"<text>\") YIELD <return_list> [| LIMIT [<offset>,] <number_rows>]; <return_list> <prop_name> [AS <prop_alias>] [, <prop_name> [AS <prop_alias>] ...] [, id(vertex) [AS <prop_alias>]] [, score() AS <score_alias>] index_name \uff1a\u7d22\u5f15\u540d\u79f0\u3002 text \uff1a\u641c\u7d22\u6761\u4ef6\u3002WHERE \u540e\u53ea\u80fd\u8ddf\u4e00\u4e2a ES_QUERY\uff0c\u6240\u6709\u5224\u65ad\u6761\u4ef6\u5fc5\u987b\u5199\u5728 text \u91cc\u3002\u8be6\u7ec6\u8bed\u6cd5\u8bf7\u53c2\u89c1 Query string syntax \u3002 score() \uff1a\u5bf9\u7b26\u5408\u6761\u4ef6\u7684\u70b9\u505a N \u5ea6\u6269\u5c55\u8ba1\u7b97\u51fa\u7684\u5206\u6570\u3002\u9ed8\u8ba4\u503c\u4e3a 1.0 \u3002\u5206\u6570\u8d8a\u9ad8\uff0c\u5339\u914d\u7a0b\u5ea6\u8d8a\u9ad8\u3002\u8fd4\u56de\u503c\u9ed8\u8ba4\u6309\u7167\u5206\u6570\u4ece\u9ad8\u5230\u4f4e\u6392\u5e8f\u3002\u8be6\u60c5\u53c2\u89c1 Search and Scoring in Lucene \u3002","title":"\u4f7f\u7528\u67e5\u8be2\u9009\u9879"},{"location":"3.ngql-guide/15.full-text-index-statements/1.search-with-text-based-index/#_11","text":"//\u521b\u5efa\u56fe\u7a7a\u95f4\u3002 nebula> CREATE SPACE IF NOT EXISTS basketballplayer (partition_num=3,replica_factor=1, vid_type=fixed_string(30)); //\u767b\u5f55\u6587\u672c\u641c\u7d22\u5ba2\u6237\u7aef\u3002 nebula> SIGN IN TEXT SERVICE (192.168.8.100:9200, HTTP); //\u68c0\u67e5\u662f\u5426\u6210\u529f\u767b\u5f55\u3002 nebula> SHOW TEXT SEARCH CLIENTS; +-----------------+-----------------+------+ | Type | Host | Port | +-----------------+-----------------+------+ | \"ELASTICSEARCH\" | \"192.168.8.100\" | 9200 | +-----------------+-----------------+------+ //\u5207\u6362\u56fe\u7a7a\u95f4\u3002 nebula> USE basketballplayer; //\u6dfb\u52a0 listener \u5230NebulaGraph\u96c6\u7fa4\u3002 nebula> ADD LISTENER ELASTICSEARCH 192.168.8.100:9789; //\u68c0\u67e5\u662f\u5426\u6210\u529f\u6dfb\u52a0 listener\uff0c\u5f53\u72b6\u6001\u4e3a Online \u65f6\u8868\u793a\u6210\u529f\u6dfb\u52a0\u3002 nebula> SHOW LISTENER; +--------+-----------------+------------------------+-------------+ | PartId | Type | Host | Host Status | +--------+-----------------+------------------------+-------------+ | 1 | \"ELASTICSEARCH\" | \"\"192.168.8.100\":9789\" | \"ONLINE\" | | 2 | \"ELASTICSEARCH\" | \"\"192.168.8.100\":9789\" | \"ONLINE\" | | 3 | \"ELASTICSEARCH\" | \"\"192.168.8.100\":9789\" | \"ONLINE\" | +--------+-----------------+------------------------+-------------+ //\u521b\u5efa Tag\u3002 nebula> CREATE TAG IF NOT EXISTS player(name string, city string); //\u521b\u5efa\u5355\u5c5e\u6027\u5168\u6587\u7d22\u5f15\u3002 nebula> CREATE FULLTEXT TAG INDEX fulltext_index_1 ON player(name) ANALYZER=\"standard\"; //\u521b\u5efa\u591a\u5c5e\u6027\u5168\u6587\u7d22\u5f15\u3002 nebula> CREATE FULLTEXT TAG INDEX fulltext_index_2 ON player(name,city) ANALYZER=\"standard\"; //\u91cd\u5efa\u5168\u6587\u7d22\u5f15\u3002 nebula> REBUILD FULLTEXT INDEX; //\u67e5\u770b\u5168\u6587\u7d22\u5f15\u3002 nebula> SHOW FULLTEXT INDEXES; +--------------------+-------------+-------------+--------------+------------+ | Name | Schema Type | Schema Name | Fields | Analyzer | +--------------------+-------------+-------------+--------------+------------+ | \"fulltext_index_1\" | \"Tag\" | \"player\" | \"name\" | \"standard\" | | \"fulltext_index_2\" | \"Tag\" | \"player\" | \"name, city\" | \"standard\" | +--------------------+-------------+-------------+--------------+------------+ //\u63d2\u5165\u6d4b\u8bd5\u6570\u636e\u3002 nebula> INSERT VERTEX player(name, city) VALUES \\ \"Russell Westbrook\": (\"Russell Westbrook\", \"Los Angeles\"), \\ \"Chris Paul\": (\"Chris Paul\", \"Houston\"),\\ \"Boris Diaw\": (\"Boris Diaw\", \"Houston\"),\\ \"David West\": (\"David West\", \"Philadelphia\"),\\ \"Danny Green\": (\"Danny Green\", \"Philadelphia\"),\\ \"Tim Duncan\": (\"Tim Duncan\", \"New York\"),\\ \"James Harden\": (\"James Harden\", \"New York\"),\\ \"Tony Parker\": (\"Tony Parker\", \"Chicago\"),\\ \"Aron Baynes\": (\"Aron Baynes\", \"Chicago\"),\\ \"Ben Simmons\": (\"Ben Simmons\", \"Phoenix\"),\\ \"Blake Griffin\": (\"Blake Griffin\", \"Phoenix\"); //\u6d4b\u8bd5\u67e5\u8be2 nebula> LOOKUP ON player WHERE ES_QUERY(fulltext_index_1,\"Chris\") YIELD id(vertex); +--------------+ | id(VERTEX) | +--------------+ | \"Chris Paul\" | +--------------+ nebula> LOOKUP ON player WHERE ES_QUERY(fulltext_index_1,\"Harden\") YIELD properties(vertex); +----------------------------------------------------------------+ | properties(VERTEX) | +----------------------------------------------------------------+ | {_vid: \"James Harden\", city: \"New York\", name: \"James Harden\"} | +----------------------------------------------------------------+ nebula> LOOKUP ON player WHERE ES_QUERY(fulltext_index_1,\"Da*\") YIELD properties(vertex); +------------------------------------------------------------------+ | properties(VERTEX) | +------------------------------------------------------------------+ | {_vid: \"David West\", city: \"Philadelphia\", name: \"David West\"} | | {_vid: \"Danny Green\", city: \"Philadelphia\", name: \"Danny Green\"} | +------------------------------------------------------------------+ nebula> LOOKUP ON player WHERE ES_QUERY(fulltext_index_1,\"*b*\") YIELD id(vertex); +---------------------+ | id(VERTEX) | +---------------------+ | \"Russell Westbrook\" | | \"Boris Diaw\" | | \"Aron Baynes\" | | \"Ben Simmons\" | | \"Blake Griffin\" | +---------------------+ nebula> LOOKUP ON player WHERE ES_QUERY(fulltext_index_1,\"*b*\") YIELD id(vertex) | LIMIT 2,3; +-----------------+ | id(VERTEX) | +-----------------+ | \"Aron Baynes\" | | \"Ben Simmons\" | | \"Blake Griffin\" | +-----------------+ nebula> LOOKUP ON player WHERE ES_QUERY(fulltext_index_1,\"*b*\") YIELD id(vertex) | YIELD count(*); +----------+ | count(*) | +----------+ | 5 | +----------+ nebula> LOOKUP ON player WHERE ES_QUERY(fulltext_index_1,\"*b*\") YIELD id(vertex), score() AS score; +---------------------+-------+ | id(VERTEX) | score | +---------------------+-------+ | \"Russell Westbrook\" | 1.0 | | \"Boris Diaw\" | 1.0 | | \"Aron Baynes\" | 1.0 | | \"Ben Simmons\" | 1.0 | | \"Blake Griffin\" | 1.0 | +---------------------+-------+ //\u5bf9\u4e8e\u5305\u542b b \u7684\u8bcd\u7684\u6587\u6863\uff0c\u5b83\u7684\u5f97\u5206\u5c06\u4e58\u4ee5\u52a0\u6743\u56e0\u5b50 4\uff0c\u800c\u5bf9\u4e8e\u5305\u542b c \u7684\u8bcd\u7684\u6587\u6863\uff0c\u4f7f\u7528\u9ed8\u8ba4\u52a0\u6743\u56e0\u5b50 1\u3002 nebula> LOOKUP ON player WHERE ES_QUERY(fulltext_index_1,\"*b*^4 OR *c*\") YIELD id(vertex), score() AS score; +---------------------+-------+ | id(VERTEX) | score | +---------------------+-------+ | \"Russell Westbrook\" | 4.0 | | \"Boris Diaw\" | 4.0 | | \"Aron Baynes\" | 4.0 | | \"Ben Simmons\" | 4.0 | | \"Blake Griffin\" | 4.0 | | \"Chris Paul\" | 1.0 | | \"Tim Duncan\" | 1.0 | +---------------------+-------+ //\u4f7f\u7528\u591a\u5c5e\u6027\u5168\u6587\u7d22\u5f15\u67e5\u8be2\uff0c\u6b64\u65f6\u6761\u4ef6\u4f1a\u5728\u7d22\u5f15\u7684\u6240\u6709\u5c5e\u6027\u5185\u8fdb\u884c\u5339\u914d\u3002 nebula> LOOKUP ON player WHERE ES_QUERY(fulltext_index_2,\"*h*\") YIELD properties(vertex); +------------------------------------------------------------------+ | properties(VERTEX) | +------------------------------------------------------------------+ | {_vid: \"Chris Paul\", city: \"Houston\", name: \"Chris Paul\"} | | {_vid: \"Boris Diaw\", city: \"Houston\", name: \"Boris Diaw\"} | | {_vid: \"David West\", city: \"Philadelphia\", name: \"David West\"} | | {_vid: \"James Harden\", city: \"New York\", name: \"James Harden\"} | | {_vid: \"Tony Parker\", city: \"Chicago\", name: \"Tony Parker\"} | | {_vid: \"Aron Baynes\", city: \"Chicago\", name: \"Aron Baynes\"} | | {_vid: \"Ben Simmons\", city: \"Phoenix\", name: \"Ben Simmons\"} | | {_vid: \"Blake Griffin\", city: \"Phoenix\", name: \"Blake Griffin\"} | | {_vid: \"Danny Green\", city: \"Philadelphia\", name: \"Danny Green\"} | +------------------------------------------------------------------+ //\u4f7f\u7528\u591a\u5c5e\u6027\u5168\u6587\u7d22\u5f15\u67e5\u8be2\u65f6\uff0c\u53ef\u4ee5\u5bf9\u4e0d\u540c\u7684\u5c5e\u6027\u6307\u5b9a\u4e0d\u540c\u7684\u6587\u672c\u8fdb\u884c\u67e5\u8be2\u3002 nebula> LOOKUP ON player WHERE ES_QUERY(fulltext_index_2,\"name:*b* AND city:Houston\") YIELD properties(vertex); +-----------------------------------------------------------+ | properties(VERTEX) | +-----------------------------------------------------------+ | {_vid: \"Boris Diaw\", city: \"Houston\", name: \"Boris Diaw\"} | +-----------------------------------------------------------+ //\u5220\u9664\u5355\u5c5e\u6027\u5168\u6587\u7d22\u5f15\u3002 nebula> DROP FULLTEXT INDEX fulltext_index_1;","title":"\u793a\u4f8b"},{"location":"3.ngql-guide/16.subgraph-and-path/1.get-subgraph/","text":"GET SUBGRAPH \u00b6 GET SUBGRAPH \u8bed\u53e5\u67e5\u8be2\u5e76\u8fd4\u56de\u4e00\u4e2a\u901a\u8fc7\u4ece\u6307\u5b9a\u70b9\u51fa\u53d1\u5bf9\u56fe\u8fdb\u884c\u6e38\u8d70\u800c\u751f\u6210\u7684\u5b50\u56fe\u3002\u5728 GET SUBGRAPH \u8bed\u53e5\u4e2d\uff0c\u7528\u6237\u53ef\u4ee5\u6307\u5b9a\u6e38\u8d70\u7684\u6b65\u6570\u4ee5\u53ca\u6e38\u8d70\u6240\u7ecf\u8fc7\u7684\u8fb9\u7684\u7c7b\u578b\u6216\u65b9\u5411\u3002 \u8bed\u6cd5 \u00b6 GET SUBGRAPH [WITH PROP] [<step_count> {STEP|STEPS}] FROM {<vid>, <vid>...} [{IN | OUT | BOTH} <edge_type>, <edge_type>...] [WHERE <expression> [AND <expression> ...]] YIELD [VERTICES AS <vertex_alias>] [, EDGES AS <edge_alias>]; WITH PROP \uff1a\u5c55\u793a\u5c5e\u6027\u3002\u4e0d\u6dfb\u52a0\u672c\u53c2\u6570\u5219\u9690\u85cf\u5c5e\u6027\u3002 step_count \uff1a\u6307\u5b9a\u4ece\u8d77\u59cb\u70b9\u5f00\u59cb\u7684\u8df3\u6570\uff0c\u8fd4\u56de\u4ece 0 \u5230 step_count \u8df3\u7684\u5b50\u56fe\u3002\u5fc5\u987b\u662f\u975e\u8d1f\u6574\u6570\u3002\u9ed8\u8ba4\u503c\u4e3a 1\u3002 vid \uff1a\u6307\u5b9a\u8d77\u59cb\u70b9 ID\u3002 edge_type \uff1a\u6307\u5b9a Edge type\u3002\u53ef\u4ee5\u7528 IN \u3001 OUT \u548c BOTH \u6765\u6307\u5b9a\u8d77\u59cb\u70b9\u4e0a\u8be5 Edge type \u7684\u65b9\u5411\u3002\u9ed8\u8ba4\u4e3a BOTH \u3002 WHERE \uff1a\u6307\u5b9a\u904d\u5386\u7684\u8fc7\u6ee4\u6761\u4ef6\uff0c\u53ef\u4ee5\u7ed3\u5408\u5e03\u5c14\u8fd0\u7b97\u7b26 AND \u4f7f\u7528\u3002 YIELD \uff1a\u5b9a\u4e49\u9700\u8981\u8fd4\u56de\u7684\u8f93\u51fa\u3002\u53ef\u4ee5\u4ec5\u8fd4\u56de\u70b9\u6216\u8fb9\u3002\u5fc5\u987b\u8bbe\u7f6e\u522b\u540d\u3002 Note GET SUBGRAPH \u8bed\u53e5\u68c0\u7d22\u7684\u8def\u5f84\u7c7b\u578b\u4e3a trail \uff0c\u5373\u68c0\u7d22\u7684\u8def\u5f84\u53ea\u6709\u70b9\u53ef\u4ee5\u91cd\u590d\uff0c\u8fb9\u4e0d\u53ef\u4ee5\u91cd\u590d\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1 \u8def\u5f84 \u3002 WHERE \u8bed\u53e5\u9650\u5236 \u00b6 \u5728 GET SUBGRAPH \u8bed\u53e5\u4e2d\u4f7f\u7528 WHERE \u5b50\u53e5\uff0c\u6ce8\u610f\u4ee5\u4e0b\u9650\u5236\uff1a \u4ec5\u652f\u6301 AND \u8fd0\u7b97\u7b26\u3002 \u4ec5\u652f\u6301 \u8fc7\u6ee4\u76ee\u7684\u70b9\uff0c\u70b9\u7684\u683c\u5f0f\u4e3a $$.tagName.propName \u3002 \u652f\u6301 \u8fc7\u6ee4\u8fb9\uff0c\u8fb9\u7684\u683c\u5f0f\u4e3a edge_type.propName \u3002 \u652f\u6301 \u6570\u5b66\u51fd\u6570\u3001\u805a\u5408\u51fd\u6570\u3001\u5b57\u7b26\u4e32\u51fd\u6570\u3001\u65e5\u671f\u65f6\u95f4\u51fd\u6570\u3001\u5217\u8868\u51fd\u6570\u4e2d\u7684\u901a\u7528\u51fd\u6570\u548c\u7c7b\u578b\u8f6c\u5316\u51fd\u6570\u3002 \u4e0d\u652f\u6301 \u805a\u5408\u51fd\u6570\u3001Schema \u76f8\u5173\u51fd\u6570\u3001\u6761\u4ef6\u8868\u8fbe\u5f0f\u51fd\u6570\u3001\u8c13\u8bcd\u51fd\u6570\u3001geo \u51fd\u6570\u548c\u81ea\u5b9a\u4e49\u51fd\u6570\uff0c\u5217\u8868\u51fd\u6570\u4e2d\u9664\u901a\u7528\u51fd\u6570\u4ee5\u5916\u7684\u51fd\u6570\u3002 \u793a\u4f8b \u00b6 \u4ee5\u4e0b\u9762\u7684\u793a\u4f8b\u56fe\u8fdb\u884c\u6f14\u793a\u3002 \u63d2\u5165\u6d4b\u8bd5\u6570\u636e\uff1a nebula> CREATE SPACE IF NOT EXISTS subgraph(partition_num=15, replica_factor=1, vid_type=fixed_string(30)); nebula> USE subgraph; nebula> CREATE TAG IF NOT EXISTS player(name string, age int); nebula> CREATE TAG IF NOT EXISTS team(name string); nebula> CREATE EDGE IF NOT EXISTS follow(degree int); nebula> CREATE EDGE IF NOT EXISTS serve(start_year int, end_year int); nebula> INSERT VERTEX player(name, age) VALUES \"player100\":(\"Tim Duncan\", 42); nebula> INSERT VERTEX player(name, age) VALUES \"player101\":(\"Tony Parker\", 36); nebula> INSERT VERTEX player(name, age) VALUES \"player102\":(\"LaMarcus Aldridge\", 33); nebula> INSERT VERTEX team(name) VALUES \"team203\":(\"Trail Blazers\"), \"team204\":(\"Spurs\"); nebula> INSERT EDGE follow(degree) VALUES \"player101\" -> \"player100\":(95); nebula> INSERT EDGE follow(degree) VALUES \"player101\" -> \"player102\":(90); nebula> INSERT EDGE follow(degree) VALUES \"player102\" -> \"player100\":(75); nebula> INSERT EDGE serve(start_year, end_year) VALUES \"player101\" -> \"team204\":(1999, 2018),\"player102\" -> \"team203\":(2006, 2015); \u67e5\u8be2\u4ece\u70b9 player101 \u5f00\u59cb\u30010~1 \u8df3\u3001\u6240\u6709 Edge type \u7684\u5b50\u56fe\u3002 nebula> GET SUBGRAPH 1 STEPS FROM \"player101\" YIELD VERTICES AS nodes, EDGES AS relationships; +-------------------------------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------+ | nodes | relationships | +-------------------------------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------+ | [(\"player101\" :player{})] | [[:serve \"player101\"->\"team204\" @0 {}], [:follow \"player101\"->\"player100\" @0 {}], [:follow \"player101\"->\"player102\" @0 {}]] | | [(\"team204\" :team{}), (\"player100\" :player{}), (\"player102\" :player{})] | [[:follow \"player102\"->\"player100\" @0 {}]] | +-------------------------------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------+ \u8fd4\u56de\u7684\u5b50\u56fe\u5982\u4e0b\u3002 \u67e5\u8be2\u4ece\u70b9 player101 \u5f00\u59cb\u30010~1 \u8df3\u3001 follow \u7c7b\u578b\u7684\u5165\u8fb9\u7684\u5b50\u56fe\u3002 nebula> GET SUBGRAPH 1 STEPS FROM \"player101\" IN follow YIELD VERTICES AS nodes, EDGES AS relationships; +---------------------------+---------------+ | nodes | relationships | +---------------------------+---------------+ | [(\"player101\" :player{})] | [] | +---------------------------+---------------+ \u56e0\u4e3a player101 \u6ca1\u6709 follow \u7c7b\u578b\u7684\u5165\u8fb9\u3002\u6240\u4ee5\u4ec5\u8fd4\u56de\u70b9 player101 \u3002 \u67e5\u8be2\u4ece\u70b9 player101 \u5f00\u59cb\u30010~1 \u8df3\u3001 serve \u7c7b\u578b\u7684\u51fa\u8fb9\u7684\u5b50\u56fe\uff0c\u540c\u65f6\u5c55\u793a\u8fb9\u7684\u5c5e\u6027\u3002 nebula> GET SUBGRAPH WITH PROP 1 STEPS FROM \"player101\" OUT serve YIELD VERTICES AS nodes, EDGES AS relationships; +-------------------------------------------------------+-------------------------------------------------------------------------+ | nodes | relationships | +-------------------------------------------------------+-------------------------------------------------------------------------+ | [(\"player101\" :player{age: 36, name: \"Tony Parker\"})] | [[:serve \"player101\"->\"team204\" @0 {end_year: 2018, start_year: 1999}]] | | [(\"team204\" :team{name: \"Spurs\"})] | [] | +-------------------------------------------------------+-------------------------------------------------------------------------+ \u8fd4\u56de\u7684\u5b50\u56fe\u5982\u4e0b\u3002 \u67e5\u8be2\u4ece\u70b9 player101 \u5f00\u59cb\u30010~2 \u8df3\u3001 follow \u7c7b\u578b\u8fb9 degree \u5927\u4e8e 90\uff0c\u5e74\u9f84\u5927\u4e8e 30 \u7684\u5b50\u56fe\uff0c\u540c\u65f6\u5c55\u793a\u8fb9\u7684\u5c5e\u6027\u3002 nebula> GET SUBGRAPH WITH PROP 2 STEPS FROM \"player101\" \\ WHERE follow.degree > 90 AND $$.player.age > 30 \\ YIELD VERTICES AS nodes, EDGES AS relationships; +-------------------------------------------------------+------------------------------------------------------+ | nodes | relationships | +-------------------------------------------------------+------------------------------------------------------+ | [(\"player101\" :player{age: 36, name: \"Tony Parker\"})] | [[:follow \"player101\"->\"player100\" @0 {degree: 95}]] | | [(\"player100\" :player{age: 42, name: \"Tim Duncan\"})] | [] | +-------------------------------------------------------+------------------------------------------------------+ FAQ \u00b6 \u4e3a\u4ec0\u4e48\u8fd4\u56de\u7ed3\u679c\u4e2d\u4f1a\u51fa\u73b0\u8d85\u51fa step_count \u8df3\u6570\u4e4b\u5916\u7684\u5173\u7cfb\uff1f \u00b6 \u4e3a\u4e86\u5c55\u793a\u5b50\u56fe\u7684\u5b8c\u6574\u6027\uff0c\u4f1a\u5728\u6ee1\u8db3\u6761\u4ef6\u7684\u6240\u6709\u70b9\u4e0a\u989d\u5916\u67e5\u8be2\u4e00\u8df3\u3002\u4f8b\u5982\u4e0b\u56fe\u3002 \u7528 GET SUBGRAPH 1 STEPS FROM \"A\"; \u67e5\u8be2\u7684\u6ee1\u8db3\u7ed3\u679c\u7684\u8def\u5f84\u662f A->B \u3001 B->A \u548c A->C \uff0c\u4e3a\u4e86\u5b50\u56fe\u7684\u5b8c\u6574\u6027\uff0c\u4f1a\u5728\u6ee1\u8db3\u7ed3\u679c\u7684\u70b9\u4e0a\u989d\u5916\u67e5\u8be2\u4e00\u8df3\uff0c\u5373 B->C \u3002 \u7528 GET SUBGRAPH 1 STEPS FROM \"A\" IN follow; \u67e5\u8be2\u7684\u6ee1\u8db3\u7ed3\u679c\u7684\u8def\u5f84\u662f B->A \uff0c\u5728\u6ee1\u8db3\u7ed3\u679c\u7684\u70b9\u4e0a\u989d\u5916\u67e5\u8be2\u4e00\u8df3\uff0c\u5373 A->B \u3002 \u5982\u679c\u53ea\u662f\u67e5\u8be2\u6ee1\u8db3\u6761\u4ef6\u7684\u8def\u5f84\u6216\u70b9\uff0c\u5efa\u8bae\u4f7f\u7528 MATCH \u6216 GO \u8bed\u53e5\u3002\u4f8b\u5982\uff1a nebula> MATCH p= (v:player) -- (v2) WHERE id(v)==\"A\" RETURN p; nebula> GO 1 STEPS FROM \"A\" OVER follow YIELD src(edge),dst(edge); \u4e3a\u4ec0\u4e48\u8fd4\u56de\u7ed3\u679c\u4e2d\u4f1a\u51fa\u73b0\u4f4e\u4e8e step_count \u8df3\u6570\u7684\u5173\u7cfb\uff1f \u00b6 \u67e5\u8be2\u5230\u6ca1\u6709\u591a\u4f59\u5b50\u56fe\u6570\u636e\u65f6\u4f1a\u505c\u6b62\u67e5\u8be2\uff0c\u4e14\u4e0d\u4f1a\u8fd4\u56de\u7a7a\u503c\u3002 nebula> GET SUBGRAPH 100 STEPS FROM \"player101\" OUT follow YIELD VERTICES AS nodes, EDGES AS relationships; +----------------------------------------------------+--------------------------------------------------------------------------------------+ | nodes | relationships | +----------------------------------------------------+--------------------------------------------------------------------------------------+ | [(\"player101\" :player{})] | [[:follow \"player101\"->\"player100\" @0 {}], [:follow \"player101\"->\"player102\" @0 {}]] | | [(\"player100\" :player{}), (\"player102\" :player{})] | [[:follow \"player102\"->\"player100\" @0 {}]] | +----------------------------------------------------+--------------------------------------------------------------------------------------+","title":"GET SUBGRAPH"},{"location":"3.ngql-guide/16.subgraph-and-path/1.get-subgraph/#get_subgraph","text":"GET SUBGRAPH \u8bed\u53e5\u67e5\u8be2\u5e76\u8fd4\u56de\u4e00\u4e2a\u901a\u8fc7\u4ece\u6307\u5b9a\u70b9\u51fa\u53d1\u5bf9\u56fe\u8fdb\u884c\u6e38\u8d70\u800c\u751f\u6210\u7684\u5b50\u56fe\u3002\u5728 GET SUBGRAPH \u8bed\u53e5\u4e2d\uff0c\u7528\u6237\u53ef\u4ee5\u6307\u5b9a\u6e38\u8d70\u7684\u6b65\u6570\u4ee5\u53ca\u6e38\u8d70\u6240\u7ecf\u8fc7\u7684\u8fb9\u7684\u7c7b\u578b\u6216\u65b9\u5411\u3002","title":"GET SUBGRAPH"},{"location":"3.ngql-guide/16.subgraph-and-path/1.get-subgraph/#_1","text":"GET SUBGRAPH [WITH PROP] [<step_count> {STEP|STEPS}] FROM {<vid>, <vid>...} [{IN | OUT | BOTH} <edge_type>, <edge_type>...] [WHERE <expression> [AND <expression> ...]] YIELD [VERTICES AS <vertex_alias>] [, EDGES AS <edge_alias>]; WITH PROP \uff1a\u5c55\u793a\u5c5e\u6027\u3002\u4e0d\u6dfb\u52a0\u672c\u53c2\u6570\u5219\u9690\u85cf\u5c5e\u6027\u3002 step_count \uff1a\u6307\u5b9a\u4ece\u8d77\u59cb\u70b9\u5f00\u59cb\u7684\u8df3\u6570\uff0c\u8fd4\u56de\u4ece 0 \u5230 step_count \u8df3\u7684\u5b50\u56fe\u3002\u5fc5\u987b\u662f\u975e\u8d1f\u6574\u6570\u3002\u9ed8\u8ba4\u503c\u4e3a 1\u3002 vid \uff1a\u6307\u5b9a\u8d77\u59cb\u70b9 ID\u3002 edge_type \uff1a\u6307\u5b9a Edge type\u3002\u53ef\u4ee5\u7528 IN \u3001 OUT \u548c BOTH \u6765\u6307\u5b9a\u8d77\u59cb\u70b9\u4e0a\u8be5 Edge type \u7684\u65b9\u5411\u3002\u9ed8\u8ba4\u4e3a BOTH \u3002 WHERE \uff1a\u6307\u5b9a\u904d\u5386\u7684\u8fc7\u6ee4\u6761\u4ef6\uff0c\u53ef\u4ee5\u7ed3\u5408\u5e03\u5c14\u8fd0\u7b97\u7b26 AND \u4f7f\u7528\u3002 YIELD \uff1a\u5b9a\u4e49\u9700\u8981\u8fd4\u56de\u7684\u8f93\u51fa\u3002\u53ef\u4ee5\u4ec5\u8fd4\u56de\u70b9\u6216\u8fb9\u3002\u5fc5\u987b\u8bbe\u7f6e\u522b\u540d\u3002 Note GET SUBGRAPH \u8bed\u53e5\u68c0\u7d22\u7684\u8def\u5f84\u7c7b\u578b\u4e3a trail \uff0c\u5373\u68c0\u7d22\u7684\u8def\u5f84\u53ea\u6709\u70b9\u53ef\u4ee5\u91cd\u590d\uff0c\u8fb9\u4e0d\u53ef\u4ee5\u91cd\u590d\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1 \u8def\u5f84 \u3002","title":"\u8bed\u6cd5"},{"location":"3.ngql-guide/16.subgraph-and-path/1.get-subgraph/#where","text":"\u5728 GET SUBGRAPH \u8bed\u53e5\u4e2d\u4f7f\u7528 WHERE \u5b50\u53e5\uff0c\u6ce8\u610f\u4ee5\u4e0b\u9650\u5236\uff1a \u4ec5\u652f\u6301 AND \u8fd0\u7b97\u7b26\u3002 \u4ec5\u652f\u6301 \u8fc7\u6ee4\u76ee\u7684\u70b9\uff0c\u70b9\u7684\u683c\u5f0f\u4e3a $$.tagName.propName \u3002 \u652f\u6301 \u8fc7\u6ee4\u8fb9\uff0c\u8fb9\u7684\u683c\u5f0f\u4e3a edge_type.propName \u3002 \u652f\u6301 \u6570\u5b66\u51fd\u6570\u3001\u805a\u5408\u51fd\u6570\u3001\u5b57\u7b26\u4e32\u51fd\u6570\u3001\u65e5\u671f\u65f6\u95f4\u51fd\u6570\u3001\u5217\u8868\u51fd\u6570\u4e2d\u7684\u901a\u7528\u51fd\u6570\u548c\u7c7b\u578b\u8f6c\u5316\u51fd\u6570\u3002 \u4e0d\u652f\u6301 \u805a\u5408\u51fd\u6570\u3001Schema \u76f8\u5173\u51fd\u6570\u3001\u6761\u4ef6\u8868\u8fbe\u5f0f\u51fd\u6570\u3001\u8c13\u8bcd\u51fd\u6570\u3001geo \u51fd\u6570\u548c\u81ea\u5b9a\u4e49\u51fd\u6570\uff0c\u5217\u8868\u51fd\u6570\u4e2d\u9664\u901a\u7528\u51fd\u6570\u4ee5\u5916\u7684\u51fd\u6570\u3002","title":"WHERE \u8bed\u53e5\u9650\u5236"},{"location":"3.ngql-guide/16.subgraph-and-path/1.get-subgraph/#_2","text":"\u4ee5\u4e0b\u9762\u7684\u793a\u4f8b\u56fe\u8fdb\u884c\u6f14\u793a\u3002 \u63d2\u5165\u6d4b\u8bd5\u6570\u636e\uff1a nebula> CREATE SPACE IF NOT EXISTS subgraph(partition_num=15, replica_factor=1, vid_type=fixed_string(30)); nebula> USE subgraph; nebula> CREATE TAG IF NOT EXISTS player(name string, age int); nebula> CREATE TAG IF NOT EXISTS team(name string); nebula> CREATE EDGE IF NOT EXISTS follow(degree int); nebula> CREATE EDGE IF NOT EXISTS serve(start_year int, end_year int); nebula> INSERT VERTEX player(name, age) VALUES \"player100\":(\"Tim Duncan\", 42); nebula> INSERT VERTEX player(name, age) VALUES \"player101\":(\"Tony Parker\", 36); nebula> INSERT VERTEX player(name, age) VALUES \"player102\":(\"LaMarcus Aldridge\", 33); nebula> INSERT VERTEX team(name) VALUES \"team203\":(\"Trail Blazers\"), \"team204\":(\"Spurs\"); nebula> INSERT EDGE follow(degree) VALUES \"player101\" -> \"player100\":(95); nebula> INSERT EDGE follow(degree) VALUES \"player101\" -> \"player102\":(90); nebula> INSERT EDGE follow(degree) VALUES \"player102\" -> \"player100\":(75); nebula> INSERT EDGE serve(start_year, end_year) VALUES \"player101\" -> \"team204\":(1999, 2018),\"player102\" -> \"team203\":(2006, 2015); \u67e5\u8be2\u4ece\u70b9 player101 \u5f00\u59cb\u30010~1 \u8df3\u3001\u6240\u6709 Edge type \u7684\u5b50\u56fe\u3002 nebula> GET SUBGRAPH 1 STEPS FROM \"player101\" YIELD VERTICES AS nodes, EDGES AS relationships; +-------------------------------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------+ | nodes | relationships | +-------------------------------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------+ | [(\"player101\" :player{})] | [[:serve \"player101\"->\"team204\" @0 {}], [:follow \"player101\"->\"player100\" @0 {}], [:follow \"player101\"->\"player102\" @0 {}]] | | [(\"team204\" :team{}), (\"player100\" :player{}), (\"player102\" :player{})] | [[:follow \"player102\"->\"player100\" @0 {}]] | +-------------------------------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------+ \u8fd4\u56de\u7684\u5b50\u56fe\u5982\u4e0b\u3002 \u67e5\u8be2\u4ece\u70b9 player101 \u5f00\u59cb\u30010~1 \u8df3\u3001 follow \u7c7b\u578b\u7684\u5165\u8fb9\u7684\u5b50\u56fe\u3002 nebula> GET SUBGRAPH 1 STEPS FROM \"player101\" IN follow YIELD VERTICES AS nodes, EDGES AS relationships; +---------------------------+---------------+ | nodes | relationships | +---------------------------+---------------+ | [(\"player101\" :player{})] | [] | +---------------------------+---------------+ \u56e0\u4e3a player101 \u6ca1\u6709 follow \u7c7b\u578b\u7684\u5165\u8fb9\u3002\u6240\u4ee5\u4ec5\u8fd4\u56de\u70b9 player101 \u3002 \u67e5\u8be2\u4ece\u70b9 player101 \u5f00\u59cb\u30010~1 \u8df3\u3001 serve \u7c7b\u578b\u7684\u51fa\u8fb9\u7684\u5b50\u56fe\uff0c\u540c\u65f6\u5c55\u793a\u8fb9\u7684\u5c5e\u6027\u3002 nebula> GET SUBGRAPH WITH PROP 1 STEPS FROM \"player101\" OUT serve YIELD VERTICES AS nodes, EDGES AS relationships; +-------------------------------------------------------+-------------------------------------------------------------------------+ | nodes | relationships | +-------------------------------------------------------+-------------------------------------------------------------------------+ | [(\"player101\" :player{age: 36, name: \"Tony Parker\"})] | [[:serve \"player101\"->\"team204\" @0 {end_year: 2018, start_year: 1999}]] | | [(\"team204\" :team{name: \"Spurs\"})] | [] | +-------------------------------------------------------+-------------------------------------------------------------------------+ \u8fd4\u56de\u7684\u5b50\u56fe\u5982\u4e0b\u3002 \u67e5\u8be2\u4ece\u70b9 player101 \u5f00\u59cb\u30010~2 \u8df3\u3001 follow \u7c7b\u578b\u8fb9 degree \u5927\u4e8e 90\uff0c\u5e74\u9f84\u5927\u4e8e 30 \u7684\u5b50\u56fe\uff0c\u540c\u65f6\u5c55\u793a\u8fb9\u7684\u5c5e\u6027\u3002 nebula> GET SUBGRAPH WITH PROP 2 STEPS FROM \"player101\" \\ WHERE follow.degree > 90 AND $$.player.age > 30 \\ YIELD VERTICES AS nodes, EDGES AS relationships; +-------------------------------------------------------+------------------------------------------------------+ | nodes | relationships | +-------------------------------------------------------+------------------------------------------------------+ | [(\"player101\" :player{age: 36, name: \"Tony Parker\"})] | [[:follow \"player101\"->\"player100\" @0 {degree: 95}]] | | [(\"player100\" :player{age: 42, name: \"Tim Duncan\"})] | [] | +-------------------------------------------------------+------------------------------------------------------+","title":"\u793a\u4f8b"},{"location":"3.ngql-guide/16.subgraph-and-path/1.get-subgraph/#faq","text":"","title":"FAQ"},{"location":"3.ngql-guide/16.subgraph-and-path/1.get-subgraph/#step_count","text":"\u4e3a\u4e86\u5c55\u793a\u5b50\u56fe\u7684\u5b8c\u6574\u6027\uff0c\u4f1a\u5728\u6ee1\u8db3\u6761\u4ef6\u7684\u6240\u6709\u70b9\u4e0a\u989d\u5916\u67e5\u8be2\u4e00\u8df3\u3002\u4f8b\u5982\u4e0b\u56fe\u3002 \u7528 GET SUBGRAPH 1 STEPS FROM \"A\"; \u67e5\u8be2\u7684\u6ee1\u8db3\u7ed3\u679c\u7684\u8def\u5f84\u662f A->B \u3001 B->A \u548c A->C \uff0c\u4e3a\u4e86\u5b50\u56fe\u7684\u5b8c\u6574\u6027\uff0c\u4f1a\u5728\u6ee1\u8db3\u7ed3\u679c\u7684\u70b9\u4e0a\u989d\u5916\u67e5\u8be2\u4e00\u8df3\uff0c\u5373 B->C \u3002 \u7528 GET SUBGRAPH 1 STEPS FROM \"A\" IN follow; \u67e5\u8be2\u7684\u6ee1\u8db3\u7ed3\u679c\u7684\u8def\u5f84\u662f B->A \uff0c\u5728\u6ee1\u8db3\u7ed3\u679c\u7684\u70b9\u4e0a\u989d\u5916\u67e5\u8be2\u4e00\u8df3\uff0c\u5373 A->B \u3002 \u5982\u679c\u53ea\u662f\u67e5\u8be2\u6ee1\u8db3\u6761\u4ef6\u7684\u8def\u5f84\u6216\u70b9\uff0c\u5efa\u8bae\u4f7f\u7528 MATCH \u6216 GO \u8bed\u53e5\u3002\u4f8b\u5982\uff1a nebula> MATCH p= (v:player) -- (v2) WHERE id(v)==\"A\" RETURN p; nebula> GO 1 STEPS FROM \"A\" OVER follow YIELD src(edge),dst(edge);","title":"\u4e3a\u4ec0\u4e48\u8fd4\u56de\u7ed3\u679c\u4e2d\u4f1a\u51fa\u73b0\u8d85\u51fastep_count\u8df3\u6570\u4e4b\u5916\u7684\u5173\u7cfb\uff1f"},{"location":"3.ngql-guide/16.subgraph-and-path/1.get-subgraph/#step_count_1","text":"\u67e5\u8be2\u5230\u6ca1\u6709\u591a\u4f59\u5b50\u56fe\u6570\u636e\u65f6\u4f1a\u505c\u6b62\u67e5\u8be2\uff0c\u4e14\u4e0d\u4f1a\u8fd4\u56de\u7a7a\u503c\u3002 nebula> GET SUBGRAPH 100 STEPS FROM \"player101\" OUT follow YIELD VERTICES AS nodes, EDGES AS relationships; +----------------------------------------------------+--------------------------------------------------------------------------------------+ | nodes | relationships | +----------------------------------------------------+--------------------------------------------------------------------------------------+ | [(\"player101\" :player{})] | [[:follow \"player101\"->\"player100\" @0 {}], [:follow \"player101\"->\"player102\" @0 {}]] | | [(\"player100\" :player{}), (\"player102\" :player{})] | [[:follow \"player102\"->\"player100\" @0 {}]] | +----------------------------------------------------+--------------------------------------------------------------------------------------+","title":"\u4e3a\u4ec0\u4e48\u8fd4\u56de\u7ed3\u679c\u4e2d\u4f1a\u51fa\u73b0\u4f4e\u4e8estep_count\u8df3\u6570\u7684\u5173\u7cfb\uff1f"},{"location":"3.ngql-guide/16.subgraph-and-path/2.find-path/","text":"FIND PATH \u00b6 FIND PATH \u8bed\u53e5\u67e5\u627e\u6307\u5b9a\u8d77\u59cb\u70b9\u548c\u76ee\u7684\u70b9\u4e4b\u95f4\u7684\u8def\u5f84\u3002 Note \u7528\u6237\u53ef\u5728\u914d\u7f6e\u6587\u4ef6 nebula-graphd.conf \u4e2d\u6dfb\u52a0 num_operator_threads \u53c2\u6570\u63d0\u9ad8 FIND PATH \u7684\u67e5\u8be2\u6027\u80fd\u3002 num_operator_threads \u7684\u53d6\u503c\u4e3a 2 ~ 10 \uff0c\u8be5\u503c\u4e0d\u80fd\u8d85\u8fc7 Graph \u670d\u52a1\u6240\u5728\u673a\u5668\u7684 CPU \u6838\u5fc3\u4e2a\u6570\uff0c\u5efa\u8bae\u8bbe\u7f6e\u4e3a Graph \u670d\u52a1\u6240\u5728\u673a\u5668\u7684 CPU \u6838\u5fc3\u4e2a\u6570\u3002\u5173\u4e8e\u914d\u7f6e\u6587\u4ef6\u7684\u8be6\u7ec6\u4fe1\u606f\uff0c\u53c2\u89c1 Graph \u670d\u52a1\u914d\u7f6e \u3002 \u8bed\u6cd5 \u00b6 FIND { SHORTEST | ALL | NOLOOP } PATH [WITH PROP] FROM <vertex_id_list> TO <vertex_id_list> OVER <edge_type_list> [REVERSELY | BIDIRECT] [<WHERE clause>] [UPTO <N> {STEP|STEPS}] YIELD path as <alias> [| ORDER BY $-.path] [| LIMIT <M>]; <vertex_id_list> ::= [vertex_id [, vertex_id] ...] SHORTEST \uff1a\u67e5\u627e\u6240\u6709\u6700\u77ed\u8def\u5f84\u3002 ALL \uff1a\u67e5\u627e\u6240\u6709\u8def\u5f84\u3002 NOLOOP \uff1a\u67e5\u627e\u975e\u5faa\u73af\u8def\u5f84\u3002 WITH PROP \uff1a\u5c55\u793a\u70b9\u548c\u8fb9\u7684\u5c5e\u6027\u3002\u4e0d\u6dfb\u52a0\u672c\u53c2\u6570\u5219\u9690\u85cf\u5c5e\u6027\u3002 <vertex_id_list> \uff1a\u70b9 ID \u5217\u8868\u3002\u591a\u4e2a\u70b9\u7528\u82f1\u6587\u9017\u53f7\uff08,\uff09\u5206\u9694\u3002\u652f\u6301 $- \u548c $var \u3002 <edge_type_list> \uff1aEdge type \u5217\u8868\u3002\u591a\u4e2a Edge type \u7528\u82f1\u6587\u9017\u53f7\uff08,\uff09\u5206\u9694\u3002 * \u8868\u793a\u6240\u6709 Edge type\u3002 REVERSELY | BIDIRECT \uff1a REVERSELY \u8868\u793a\u53cd\u5411\uff0c BIDIRECT \u8868\u793a\u53cc\u5411\u3002 <WHERE clause> \uff1a\u53ef\u4ee5\u4f7f\u7528 WHERE \u5b50\u53e5\u8fc7\u6ee4\u8fb9\u5c5e\u6027\u3002 UPTO <N> {STEP|STEPS} \uff1a\u8def\u5f84\u7684\u6700\u5927\u8df3\u6570\u3002\u9ed8\u8ba4\u503c\u4e3a 5 \u3002 ORDER BY $-.path \uff1a\u5c06\u8fd4\u56de\u7ed3\u679c\u8fdb\u884c\u6392\u5e8f\u3002\u6392\u5e8f\u89c4\u5219\u53c2\u89c1 Path \u3002 LIMIT <M> \uff1a\u6307\u5b9a\u8fd4\u56de\u7684\u6700\u5927\u884c\u6570\u3002 Note FIND PATH \u8bed\u53e5\u68c0\u7d22\u7684\u8def\u5f84\u7c7b\u578b\u4e3a trail \uff0c\u5373\u68c0\u7d22\u7684\u8def\u5f84\u53ea\u6709\u70b9\u53ef\u4ee5\u91cd\u590d\uff0c\u8fb9\u4e0d\u53ef\u4ee5\u91cd\u590d\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1 \u8def\u5f84 \u3002 \u9650\u5236 \u00b6 \u6307\u5b9a\u8d77\u59cb\u70b9\u548c\u76ee\u7684\u70b9\u7684\u5217\u8868\u540e\uff0c\u4f1a\u8fd4\u56de\u8d77\u59cb\u70b9\u548c\u76ee\u7684\u70b9\u6240\u6709\u7ec4\u5408\u7684\u8def\u5f84\u3002 \u641c\u7d22\u6240\u6709\u8def\u5f84\u65f6\u53ef\u80fd\u4f1a\u51fa\u73b0\u5faa\u73af\u3002 \u4f7f\u7528 WHERE \u5b50\u53e5\u65f6\u53ea\u80fd\u8fc7\u6ee4\u8fb9\u5c5e\u6027\uff0c\u6682\u4e0d\u652f\u6301\u8fc7\u6ee4\u70b9\u5c5e\u6027\uff0c\u4e14\u4e0d\u652f\u6301\u51fd\u6570\u3002 graphd \u662f\u5355\u8fdb\u7a0b\u67e5\u8be2\uff0c\u4f1a\u5360\u7528\u5f88\u591a\u5185\u5b58\u3002 \u793a\u4f8b \u00b6 \u8fd4\u56de\u7684\u8def\u5f84\u683c\u5f0f\u7c7b\u4f3c\u4e8e (<vertex_id>)-[:<edge_type_name>@<rank>]->(<vertex_id) \u3002 nebula> FIND SHORTEST PATH FROM \"player102\" TO \"team204\" OVER * YIELD path AS p; +--------------------------------------------+ | p | +--------------------------------------------+ | <(\"player102\")-[:serve@0 {}]->(\"team204\")> | +--------------------------------------------+ nebula> FIND SHORTEST PATH WITH PROP FROM \"team204\" TO \"player100\" OVER * REVERSELY YIELD path AS p; +--------------------------------------------------------------------------------------------------------------------------------------+ | p | +--------------------------------------------------------------------------------------------------------------------------------------+ | <(\"team204\" :team{name: \"Spurs\"})<-[:serve@0 {end_year: 2016, start_year: 1997}]-(\"player100\" :player{age: 42, name: \"Tim Duncan\"})> | +--------------------------------------------------------------------------------------------------------------------------------------+ nebula> FIND SHORTEST PATH FROM \"player100\", \"player130\" TO \"player132\", \"player133\" OVER * BIDIRECT UPTO 18 STEPS YIELD path as p; +------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+ | p | +------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+ | <(\"player100\")<-[:follow@0 {}]-(\"player144\")<-[:follow@0 {}]-(\"player133\")> | | <(\"player100\")-[:serve@0 {}]->(\"team204\")<-[:serve@0 {}]-(\"player138\")-[:serve@0 {}]->(\"team225\")<-[:serve@0 {}]-(\"player132\")> | | <(\"player130\")-[:serve@0 {}]->(\"team219\")<-[:serve@0 {}]-(\"player112\")-[:serve@0 {}]->(\"team204\")<-[:serve@0 {}]-(\"player114\")<-[:follow@0 {}]-(\"player133\")> | | <(\"player130\")-[:serve@0 {}]->(\"team219\")<-[:serve@0 {}]-(\"player109\")-[:serve@0 {}]->(\"team204\")<-[:serve@0 {}]-(\"player114\")<-[:follow@0 {}]-(\"player133\")> | | <(\"player130\")-[:serve@0 {}]->(\"team219\")<-[:serve@0 {}]-(\"player104\")-[:serve@20182019 {}]->(\"team204\")<-[:serve@0 {}]-(\"player114\")<-[:follow@0 {}]-(\"player133\")> | | ... | | <(\"player130\")-[:serve@0 {}]->(\"team219\")<-[:serve@0 {}]-(\"player112\")-[:serve@0 {}]->(\"team204\")<-[:serve@0 {}]-(\"player138\")-[:serve@0 {}]->(\"team225\")<-[:serve@0 {}]-(\"player132\")> | | <(\"player130\")-[:serve@0 {}]->(\"team219\")<-[:serve@0 {}]-(\"player109\")-[:serve@0 {}]->(\"team204\")<-[:serve@0 {}]-(\"player138\")-[:serve@0 {}]->(\"team225\")<-[:serve@0 {}]-(\"player132\")> | | ... | +------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+ nebula> FIND ALL PATH FROM \"player100\" TO \"team204\" OVER * WHERE follow.degree is EMPTY or follow.degree >=0 YIELD path AS p; +------------------------------------------------------------------------------+ | p | +------------------------------------------------------------------------------+ | <(\"player100\")-[:serve@0 {}]->(\"team204\")> | | <(\"player100\")-[:follow@0 {}]->(\"player125\")-[:serve@0 {}]->(\"team204\")> | | <(\"player100\")-[:follow@0 {}]->(\"player101\")-[:serve@0 {}]->(\"team204\")> | | ... | +------------------------------------------------------------------------------+ nebula> FIND NOLOOP PATH FROM \"player100\" TO \"team204\" OVER * YIELD path AS p; +--------------------------------------------------------------------------------------------------------+ | p | +--------------------------------------------------------------------------------------------------------+ | <(\"player100\")-[:serve@0 {}]->(\"team204\")> | | <(\"player100\")-[:follow@0 {}]->(\"player125\")-[:serve@0 {}]->(\"team204\")> | | <(\"player100\")-[:follow@0 {}]->(\"player101\")-[:serve@0 {}]->(\"team204\")> | | <(\"player100\")-[:follow@0 {}]->(\"player101\")-[:follow@0 {}]->(\"player125\")-[:serve@0 {}]->(\"team204\")> | | <(\"player100\")-[:follow@0 {}]->(\"player101\")-[:follow@0 {}]->(\"player102\")-[:serve@0 {}]->(\"team204\")> | | ... | +--------------------------------------------------------------------------------------------------------+ FAQ \u00b6 \u662f\u5426\u652f\u6301 WHERE \u5b50\u53e5\uff0c\u4ee5\u5b9e\u73b0\u56fe\u904d\u5386\u8fc7\u7a0b\u4e2d\u7684\u6761\u4ef6\u8fc7\u6ee4\uff1f \u00b6 \u652f\u6301\u4f7f\u7528 WHERE \u5b50\u53e5\u8fc7\u6ee4\uff0c\u4f46\u53ea\u80fd\u8fc7\u6ee4\u8fb9\u5c5e\u6027\uff0c\u4e0d\u652f\u6301\u8fc7\u6ee4\u70b9\u5c5e\u6027\u3002 \u5982\u793a\u4f8b\u4e2d\u7684 WHERE follow.degree is EMPTY or follow.degree >= 0 \u3002","title":"FIND PATH"},{"location":"3.ngql-guide/16.subgraph-and-path/2.find-path/#find_path","text":"FIND PATH \u8bed\u53e5\u67e5\u627e\u6307\u5b9a\u8d77\u59cb\u70b9\u548c\u76ee\u7684\u70b9\u4e4b\u95f4\u7684\u8def\u5f84\u3002 Note \u7528\u6237\u53ef\u5728\u914d\u7f6e\u6587\u4ef6 nebula-graphd.conf \u4e2d\u6dfb\u52a0 num_operator_threads \u53c2\u6570\u63d0\u9ad8 FIND PATH \u7684\u67e5\u8be2\u6027\u80fd\u3002 num_operator_threads \u7684\u53d6\u503c\u4e3a 2 ~ 10 \uff0c\u8be5\u503c\u4e0d\u80fd\u8d85\u8fc7 Graph \u670d\u52a1\u6240\u5728\u673a\u5668\u7684 CPU \u6838\u5fc3\u4e2a\u6570\uff0c\u5efa\u8bae\u8bbe\u7f6e\u4e3a Graph \u670d\u52a1\u6240\u5728\u673a\u5668\u7684 CPU \u6838\u5fc3\u4e2a\u6570\u3002\u5173\u4e8e\u914d\u7f6e\u6587\u4ef6\u7684\u8be6\u7ec6\u4fe1\u606f\uff0c\u53c2\u89c1 Graph \u670d\u52a1\u914d\u7f6e \u3002","title":"FIND PATH"},{"location":"3.ngql-guide/16.subgraph-and-path/2.find-path/#_1","text":"FIND { SHORTEST | ALL | NOLOOP } PATH [WITH PROP] FROM <vertex_id_list> TO <vertex_id_list> OVER <edge_type_list> [REVERSELY | BIDIRECT] [<WHERE clause>] [UPTO <N> {STEP|STEPS}] YIELD path as <alias> [| ORDER BY $-.path] [| LIMIT <M>]; <vertex_id_list> ::= [vertex_id [, vertex_id] ...] SHORTEST \uff1a\u67e5\u627e\u6240\u6709\u6700\u77ed\u8def\u5f84\u3002 ALL \uff1a\u67e5\u627e\u6240\u6709\u8def\u5f84\u3002 NOLOOP \uff1a\u67e5\u627e\u975e\u5faa\u73af\u8def\u5f84\u3002 WITH PROP \uff1a\u5c55\u793a\u70b9\u548c\u8fb9\u7684\u5c5e\u6027\u3002\u4e0d\u6dfb\u52a0\u672c\u53c2\u6570\u5219\u9690\u85cf\u5c5e\u6027\u3002 <vertex_id_list> \uff1a\u70b9 ID \u5217\u8868\u3002\u591a\u4e2a\u70b9\u7528\u82f1\u6587\u9017\u53f7\uff08,\uff09\u5206\u9694\u3002\u652f\u6301 $- \u548c $var \u3002 <edge_type_list> \uff1aEdge type \u5217\u8868\u3002\u591a\u4e2a Edge type \u7528\u82f1\u6587\u9017\u53f7\uff08,\uff09\u5206\u9694\u3002 * \u8868\u793a\u6240\u6709 Edge type\u3002 REVERSELY | BIDIRECT \uff1a REVERSELY \u8868\u793a\u53cd\u5411\uff0c BIDIRECT \u8868\u793a\u53cc\u5411\u3002 <WHERE clause> \uff1a\u53ef\u4ee5\u4f7f\u7528 WHERE \u5b50\u53e5\u8fc7\u6ee4\u8fb9\u5c5e\u6027\u3002 UPTO <N> {STEP|STEPS} \uff1a\u8def\u5f84\u7684\u6700\u5927\u8df3\u6570\u3002\u9ed8\u8ba4\u503c\u4e3a 5 \u3002 ORDER BY $-.path \uff1a\u5c06\u8fd4\u56de\u7ed3\u679c\u8fdb\u884c\u6392\u5e8f\u3002\u6392\u5e8f\u89c4\u5219\u53c2\u89c1 Path \u3002 LIMIT <M> \uff1a\u6307\u5b9a\u8fd4\u56de\u7684\u6700\u5927\u884c\u6570\u3002 Note FIND PATH \u8bed\u53e5\u68c0\u7d22\u7684\u8def\u5f84\u7c7b\u578b\u4e3a trail \uff0c\u5373\u68c0\u7d22\u7684\u8def\u5f84\u53ea\u6709\u70b9\u53ef\u4ee5\u91cd\u590d\uff0c\u8fb9\u4e0d\u53ef\u4ee5\u91cd\u590d\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1 \u8def\u5f84 \u3002","title":"\u8bed\u6cd5"},{"location":"3.ngql-guide/16.subgraph-and-path/2.find-path/#_2","text":"\u6307\u5b9a\u8d77\u59cb\u70b9\u548c\u76ee\u7684\u70b9\u7684\u5217\u8868\u540e\uff0c\u4f1a\u8fd4\u56de\u8d77\u59cb\u70b9\u548c\u76ee\u7684\u70b9\u6240\u6709\u7ec4\u5408\u7684\u8def\u5f84\u3002 \u641c\u7d22\u6240\u6709\u8def\u5f84\u65f6\u53ef\u80fd\u4f1a\u51fa\u73b0\u5faa\u73af\u3002 \u4f7f\u7528 WHERE \u5b50\u53e5\u65f6\u53ea\u80fd\u8fc7\u6ee4\u8fb9\u5c5e\u6027\uff0c\u6682\u4e0d\u652f\u6301\u8fc7\u6ee4\u70b9\u5c5e\u6027\uff0c\u4e14\u4e0d\u652f\u6301\u51fd\u6570\u3002 graphd \u662f\u5355\u8fdb\u7a0b\u67e5\u8be2\uff0c\u4f1a\u5360\u7528\u5f88\u591a\u5185\u5b58\u3002","title":"\u9650\u5236"},{"location":"3.ngql-guide/16.subgraph-and-path/2.find-path/#_3","text":"\u8fd4\u56de\u7684\u8def\u5f84\u683c\u5f0f\u7c7b\u4f3c\u4e8e (<vertex_id>)-[:<edge_type_name>@<rank>]->(<vertex_id) \u3002 nebula> FIND SHORTEST PATH FROM \"player102\" TO \"team204\" OVER * YIELD path AS p; +--------------------------------------------+ | p | +--------------------------------------------+ | <(\"player102\")-[:serve@0 {}]->(\"team204\")> | +--------------------------------------------+ nebula> FIND SHORTEST PATH WITH PROP FROM \"team204\" TO \"player100\" OVER * REVERSELY YIELD path AS p; +--------------------------------------------------------------------------------------------------------------------------------------+ | p | +--------------------------------------------------------------------------------------------------------------------------------------+ | <(\"team204\" :team{name: \"Spurs\"})<-[:serve@0 {end_year: 2016, start_year: 1997}]-(\"player100\" :player{age: 42, name: \"Tim Duncan\"})> | +--------------------------------------------------------------------------------------------------------------------------------------+ nebula> FIND SHORTEST PATH FROM \"player100\", \"player130\" TO \"player132\", \"player133\" OVER * BIDIRECT UPTO 18 STEPS YIELD path as p; +------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+ | p | +------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+ | <(\"player100\")<-[:follow@0 {}]-(\"player144\")<-[:follow@0 {}]-(\"player133\")> | | <(\"player100\")-[:serve@0 {}]->(\"team204\")<-[:serve@0 {}]-(\"player138\")-[:serve@0 {}]->(\"team225\")<-[:serve@0 {}]-(\"player132\")> | | <(\"player130\")-[:serve@0 {}]->(\"team219\")<-[:serve@0 {}]-(\"player112\")-[:serve@0 {}]->(\"team204\")<-[:serve@0 {}]-(\"player114\")<-[:follow@0 {}]-(\"player133\")> | | <(\"player130\")-[:serve@0 {}]->(\"team219\")<-[:serve@0 {}]-(\"player109\")-[:serve@0 {}]->(\"team204\")<-[:serve@0 {}]-(\"player114\")<-[:follow@0 {}]-(\"player133\")> | | <(\"player130\")-[:serve@0 {}]->(\"team219\")<-[:serve@0 {}]-(\"player104\")-[:serve@20182019 {}]->(\"team204\")<-[:serve@0 {}]-(\"player114\")<-[:follow@0 {}]-(\"player133\")> | | ... | | <(\"player130\")-[:serve@0 {}]->(\"team219\")<-[:serve@0 {}]-(\"player112\")-[:serve@0 {}]->(\"team204\")<-[:serve@0 {}]-(\"player138\")-[:serve@0 {}]->(\"team225\")<-[:serve@0 {}]-(\"player132\")> | | <(\"player130\")-[:serve@0 {}]->(\"team219\")<-[:serve@0 {}]-(\"player109\")-[:serve@0 {}]->(\"team204\")<-[:serve@0 {}]-(\"player138\")-[:serve@0 {}]->(\"team225\")<-[:serve@0 {}]-(\"player132\")> | | ... | +------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+ nebula> FIND ALL PATH FROM \"player100\" TO \"team204\" OVER * WHERE follow.degree is EMPTY or follow.degree >=0 YIELD path AS p; +------------------------------------------------------------------------------+ | p | +------------------------------------------------------------------------------+ | <(\"player100\")-[:serve@0 {}]->(\"team204\")> | | <(\"player100\")-[:follow@0 {}]->(\"player125\")-[:serve@0 {}]->(\"team204\")> | | <(\"player100\")-[:follow@0 {}]->(\"player101\")-[:serve@0 {}]->(\"team204\")> | | ... | +------------------------------------------------------------------------------+ nebula> FIND NOLOOP PATH FROM \"player100\" TO \"team204\" OVER * YIELD path AS p; +--------------------------------------------------------------------------------------------------------+ | p | +--------------------------------------------------------------------------------------------------------+ | <(\"player100\")-[:serve@0 {}]->(\"team204\")> | | <(\"player100\")-[:follow@0 {}]->(\"player125\")-[:serve@0 {}]->(\"team204\")> | | <(\"player100\")-[:follow@0 {}]->(\"player101\")-[:serve@0 {}]->(\"team204\")> | | <(\"player100\")-[:follow@0 {}]->(\"player101\")-[:follow@0 {}]->(\"player125\")-[:serve@0 {}]->(\"team204\")> | | <(\"player100\")-[:follow@0 {}]->(\"player101\")-[:follow@0 {}]->(\"player102\")-[:serve@0 {}]->(\"team204\")> | | ... | +--------------------------------------------------------------------------------------------------------+","title":"\u793a\u4f8b"},{"location":"3.ngql-guide/16.subgraph-and-path/2.find-path/#faq","text":"","title":"FAQ"},{"location":"3.ngql-guide/16.subgraph-and-path/2.find-path/#where","text":"\u652f\u6301\u4f7f\u7528 WHERE \u5b50\u53e5\u8fc7\u6ee4\uff0c\u4f46\u53ea\u80fd\u8fc7\u6ee4\u8fb9\u5c5e\u6027\uff0c\u4e0d\u652f\u6301\u8fc7\u6ee4\u70b9\u5c5e\u6027\u3002 \u5982\u793a\u4f8b\u4e2d\u7684 WHERE follow.degree is EMPTY or follow.degree >= 0 \u3002","title":"\u662f\u5426\u652f\u6301 WHERE \u5b50\u53e5\uff0c\u4ee5\u5b9e\u73b0\u56fe\u904d\u5386\u8fc7\u7a0b\u4e2d\u7684\u6761\u4ef6\u8fc7\u6ee4\uff1f"},{"location":"3.ngql-guide/17.query-tuning-statements/1.explain-and-profile/","text":"EXPLAIN \u548c PROFILE \u00b6 EXPLAIN \u8bed\u53e5\u8f93\u51fa nGQL \u8bed\u53e5\u7684\u6267\u884c\u8ba1\u5212\uff0c\u4f46\u4e0d\u4f1a\u6267\u884c nGQL \u8bed\u53e5\u3002 PROFILE \u8bed\u53e5\u6267\u884c nGQL \u8bed\u53e5\uff0c\u7136\u540e\u8f93\u51fa\u6267\u884c\u8ba1\u5212\u548c\u6267\u884c\u6982\u8981\u3002\u7528\u6237\u53ef\u4ee5\u6839\u636e\u6267\u884c\u8ba1\u5212\u548c\u6267\u884c\u6982\u8981\u4f18\u5316\u67e5\u8be2\u6027\u80fd\u3002 \u6267\u884c\u8ba1\u5212 \u00b6 \u6267\u884c\u8ba1\u5212\u7531NebulaGraph\u67e5\u8be2\u5f15\u64ce\u4e2d\u7684\u6267\u884c\u8ba1\u5212\u5668\u51b3\u5b9a\u3002 \u6267\u884c\u8ba1\u5212\u5668\u5c06\u89e3\u6790\u540e\u7684 nGQL \u8bed\u53e5\u5904\u7406\u4e3a action \u3002 action \u662f\u6700\u5c0f\u7684\u6267\u884c\u5355\u5143\u3002\u5178\u578b\u7684 action \u5305\u62ec\u83b7\u53d6\u6307\u5b9a\u70b9\u7684\u6240\u6709\u90bb\u5c45\u3001\u83b7\u53d6\u8fb9\u7684\u5c5e\u6027\u3001\u6839\u636e\u6761\u4ef6\u8fc7\u6ee4\u70b9\u6216\u8fb9\u7b49\u3002\u6bcf\u4e2a action \u90fd\u88ab\u5206\u914d\u7ed9\u4e00\u4e2a operator \u3002 \u4f8b\u5982 SHOW TAGS \u8bed\u53e5\u5206\u4e3a\u4e24\u4e2a action \uff0c operator \u4e3a Start \u548c ShowTags \u3002\u66f4\u590d\u6742\u7684 GO \u8bed\u53e5\u53ef\u80fd\u4f1a\u88ab\u5904\u7406\u6210 10 \u4e2a\u4ee5\u4e0a\u7684 action \u3002 \u8bed\u6cd5 \u00b6 EXPLAIN EXPLAIN [format= {\"row\" | \"dot\" | \"tck\"}] <your_nGQL_statement>; PROFILE PROFILE [format= {\"row\" | \"dot\" | \"tck\"}] <your_nGQL_statement>; \u8f93\u51fa\u683c\u5f0f \u00b6 EXPLAIN \u6216 PROFILE \u8bed\u53e5\u7684\u8f93\u51fa\u6709\u4e09\u79cd\u683c\u5f0f\uff1a row \uff08\u9ed8\u8ba4\uff09\u3001 dot \u548c tck \u3002\u7528\u6237\u53ef\u4ee5\u4f7f\u7528 format \u9009\u9879\u4fee\u6539\u8f93\u51fa\u683c\u5f0f\u3002 row \u683c\u5f0f \u00b6 row \u683c\u5f0f\u5c06\u8fd4\u56de\u4fe1\u606f\u8f93\u51fa\u5230\u4e00\u4e2a\u8868\u683c\u4e2d\u3002 EXPLAIN nebula> EXPLAIN format=\"row\" SHOW TAGS; Execution succeeded (time spent 327/892 us) Execution Plan -----+----------+--------------+----------------+---------------------------------------------------------------------- | id | name | dependencies | profiling data | operator info | -----+----------+--------------+----------------+---------------------------------------------------------------------- | 1 | ShowTags | 0 | | outputVar: [{\"colNames\":[],\"name\":\"__ShowTags_1\",\"type\":\"DATASET\"}] | | | | | | inputVar: | -----+----------+--------------+----------------+---------------------------------------------------------------------- | 0 | Start | | | outputVar: [{\"colNames\":[],\"name\":\"__Start_0\",\"type\":\"DATASET\"}] | -----+----------+--------------+----------------+---------------------------------------------------------------------- PROFILE nebula> PROFILE format=\"row\" SHOW TAGS; +--------+ | Name | +--------+ | player | | team | +--------+ Got 2 rows (time spent 2038/2728 us) Execution Plan -----+----------+--------------+----------------------------------------------------+---------------------------------------------------------------------- | id | name | dependencies | profiling data | operator info | -----+----------+--------------+----------------------------------------------------+---------------------------------------------------------------------- | 1 | ShowTags | 0 | ver: 0, rows: 1, execTime: 42us, totalTime: 1177us | outputVar: [{\"colNames\":[],\"name\":\"__ShowTags_1\",\"type\":\"DATASET\"}] | | | | | | inputVar: | -----+----------+--------------+----------------------------------------------------+---------------------------------------------------------------------- | 0 | Start | | ver: 0, rows: 0, execTime: 1us, totalTime: 57us | outputVar: [{\"colNames\":[],\"name\":\"__Start_0\",\"type\":\"DATASET\"}] | -----+----------+--------------+----------------------------------------------------+---------------------------------------------------------------------- \u53c2\u6570 \u8bf4\u660e id operator \u7684 ID\u3002 name operator \u7684\u540d\u79f0\u3002 dependencies \u5f53\u524d operator \u6240\u4f9d\u8d56\u7684 operator \u7684 ID\u3002 profiling data \u6267\u884c\u6982\u8981\u6587\u4ef6\u5185\u5bb9\u3002 ver \u8868\u793a operator \u7684\u7248\u672c\uff1b rows \u8868\u793a operator \u8f93\u51fa\u7ed3\u679c\u7684\u884c\u6570\uff1b execTime \u8868\u793a\u6267\u884c action \u7684\u65f6\u95f4\uff1b totalTime \u8868\u793a\u6267\u884c action \u7684\u65f6\u95f4\u3001\u7cfb\u7edf\u8c03\u5ea6\u65f6\u95f4\u3001\u6392\u961f\u65f6\u95f4\u7684\u603b\u548c\u3002 operator info operator \u7684\u8be6\u7ec6\u4fe1\u606f\u3002 dot \u683c\u5f0f \u00b6 dot \u683c\u5f0f\u5c06\u8fd4\u56de DOT \u8bed\u8a00\u7684\u4fe1\u606f\uff0c\u7136\u540e\u7528\u6237\u53ef\u4ee5\u4f7f\u7528 Graphviz \u751f\u6210\u8ba1\u5212\u56fe\u3002 Note Graphviz \u662f\u4e00\u6b3e\u5f00\u6e90\u53ef\u89c6\u5316\u56fe\u5de5\u5177\uff0c\u53ef\u4ee5\u7ed8\u5236 DOT \u8bed\u8a00\u811a\u672c\u63cf\u8ff0\u7684\u56fe\u3002Graphviz \u63d0\u4f9b\u4e00\u4e2a\u5728\u7ebf\u5de5\u5177\uff0c\u53ef\u4ee5\u9884\u89c8 DOT \u8bed\u8a00\u6587\u4ef6\uff0c\u5e76\u5c06\u5b83\u4eec\u5bfc\u51fa\u4e3a SVG \u6216 JSON \u7b49\u5176\u4ed6\u683c\u5f0f\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1 Graphviz Online \u3002 nebula> EXPLAIN format=\"dot\" SHOW TAGS; Execution succeeded (time spent 161/665 us) Execution Plan --------------------------------------------------------------------------------------------------------------------------------------------- ------------- plan --------------------------------------------------------------------------------------------------------------------------------------------- ------------- digraph exec_plan { rankdir=LR; \"ShowTags_0\"[label=\"ShowTags_0|outputVar: \\[\\{\\\"colNames\\\":\\[\\],\\\"name\\\":\\\"__ShowTags_0\\\",\\\"type\\\":\\\"DATASET\\\"\\}\\]\\l|inputVar:\\l\", shape=Mrecord]; \"Start_2\"->\"ShowTags_0\"; \"Start_2\"[label=\"Start_2|outputVar: \\[\\{\\\"colNames\\\":\\[\\],\\\"name\\\":\\\"__Start_2\\\",\\\"type\\\":\\\"DATASET\\\"\\}\\]\\l|inputVar: \\l\", shape=Mrecord]; } --------------------------------------------------------------------------------------------------------------------------------------------- ------------- \u5c06\u4e0a\u8ff0\u793a\u4f8b\u7684 DOT \u8bed\u8a00\u8f6c\u6362\u4e3a Graphviz \u56fe\uff0c\u5982\u4e0b\u6240\u793a\u3002 tck \u683c\u5f0f \u00b6 tck \u683c\u5f0f\u7c7b\u4f3c\u4e8e\u8868\u683c\uff0c\u4f46\u662f\u6ca1\u6709\u8fb9\u6846\u548c\u884c\u4e4b\u95f4\u7684\u95f4\u7684\u5206\u5272\u7ebf\u3002\u7528\u6237\u53ef\u4ee5\u5c06\u7ed3\u679c\u7528\u5728\u5355\u5143\u6d4b\u8bd5\u7684\u6d4b\u8bd5\u7528\u4f8b\u4e2d\u3002 \u5173\u4e8e tck \u683c\u5f0f\u7684\u6d4b\u8bd5\u7528\u4f8b\uff0c\u53c2\u89c1 TCK case \u3002 EXPLAIN nebula> EXPLAIN format=\"tck\" FETCH PROP ON player \"player_1\",\"player_2\",\"player_3\" YIELD properties(vertex).name as name, properties(vertex).age as age; Execution succeeded (time spent 261\u00b5s/613.718\u00b5s) Execution Plan (optimize time 28 us) | id | name | dependencies | profiling data | operator info | | 2 | Project | 1 | | | | 1 | GetVertices | 0 | | | | 0 | Start | | | | Wed, 22 Mar 2023 23:15:52 CST PROFILE nebula> PROFILE format=\"tck\" FETCH PROP ON player \"player_1\",\"player_2\",\"player_3\" YIELD properties(vertex).name as name, properties(vertex).age as age; | name | age | | \"Piter Park\" | 24 | | \"aaa\" | 24 | | \"ccc\" | 24 | Got 3 rows (time spent 1.474ms/2.19677ms) Execution Plan (optimize time 41 us) | id | name | dependencies | profiling data | operator info | | 2 | Project | 1 | {\"rows\":3,\"version\":0} | | | 1 | GetVertices | 0 | {\"resp[0]\":{\"exec\":\"232(us)\",\"host\":\"127.0.0.1:9779\",\"total\":\"758(us)\"},\"rows\":3,\"total_rpc\":\"875(us)\",\"version\":0} | | | 0 | Start | | {\"rows\":0,\"version\":0} | | Wed, 22 Mar 2023 23:16:13 CST","title":"EXPLAIN\u548cPROFILE"},{"location":"3.ngql-guide/17.query-tuning-statements/1.explain-and-profile/#explain_profile","text":"EXPLAIN \u8bed\u53e5\u8f93\u51fa nGQL \u8bed\u53e5\u7684\u6267\u884c\u8ba1\u5212\uff0c\u4f46\u4e0d\u4f1a\u6267\u884c nGQL \u8bed\u53e5\u3002 PROFILE \u8bed\u53e5\u6267\u884c nGQL \u8bed\u53e5\uff0c\u7136\u540e\u8f93\u51fa\u6267\u884c\u8ba1\u5212\u548c\u6267\u884c\u6982\u8981\u3002\u7528\u6237\u53ef\u4ee5\u6839\u636e\u6267\u884c\u8ba1\u5212\u548c\u6267\u884c\u6982\u8981\u4f18\u5316\u67e5\u8be2\u6027\u80fd\u3002","title":"EXPLAIN \u548c PROFILE"},{"location":"3.ngql-guide/17.query-tuning-statements/1.explain-and-profile/#_1","text":"\u6267\u884c\u8ba1\u5212\u7531NebulaGraph\u67e5\u8be2\u5f15\u64ce\u4e2d\u7684\u6267\u884c\u8ba1\u5212\u5668\u51b3\u5b9a\u3002 \u6267\u884c\u8ba1\u5212\u5668\u5c06\u89e3\u6790\u540e\u7684 nGQL \u8bed\u53e5\u5904\u7406\u4e3a action \u3002 action \u662f\u6700\u5c0f\u7684\u6267\u884c\u5355\u5143\u3002\u5178\u578b\u7684 action \u5305\u62ec\u83b7\u53d6\u6307\u5b9a\u70b9\u7684\u6240\u6709\u90bb\u5c45\u3001\u83b7\u53d6\u8fb9\u7684\u5c5e\u6027\u3001\u6839\u636e\u6761\u4ef6\u8fc7\u6ee4\u70b9\u6216\u8fb9\u7b49\u3002\u6bcf\u4e2a action \u90fd\u88ab\u5206\u914d\u7ed9\u4e00\u4e2a operator \u3002 \u4f8b\u5982 SHOW TAGS \u8bed\u53e5\u5206\u4e3a\u4e24\u4e2a action \uff0c operator \u4e3a Start \u548c ShowTags \u3002\u66f4\u590d\u6742\u7684 GO \u8bed\u53e5\u53ef\u80fd\u4f1a\u88ab\u5904\u7406\u6210 10 \u4e2a\u4ee5\u4e0a\u7684 action \u3002","title":"\u6267\u884c\u8ba1\u5212"},{"location":"3.ngql-guide/17.query-tuning-statements/1.explain-and-profile/#_2","text":"EXPLAIN EXPLAIN [format= {\"row\" | \"dot\" | \"tck\"}] <your_nGQL_statement>; PROFILE PROFILE [format= {\"row\" | \"dot\" | \"tck\"}] <your_nGQL_statement>;","title":"\u8bed\u6cd5"},{"location":"3.ngql-guide/17.query-tuning-statements/1.explain-and-profile/#_3","text":"EXPLAIN \u6216 PROFILE \u8bed\u53e5\u7684\u8f93\u51fa\u6709\u4e09\u79cd\u683c\u5f0f\uff1a row \uff08\u9ed8\u8ba4\uff09\u3001 dot \u548c tck \u3002\u7528\u6237\u53ef\u4ee5\u4f7f\u7528 format \u9009\u9879\u4fee\u6539\u8f93\u51fa\u683c\u5f0f\u3002","title":"\u8f93\u51fa\u683c\u5f0f"},{"location":"3.ngql-guide/17.query-tuning-statements/1.explain-and-profile/#row","text":"row \u683c\u5f0f\u5c06\u8fd4\u56de\u4fe1\u606f\u8f93\u51fa\u5230\u4e00\u4e2a\u8868\u683c\u4e2d\u3002 EXPLAIN nebula> EXPLAIN format=\"row\" SHOW TAGS; Execution succeeded (time spent 327/892 us) Execution Plan -----+----------+--------------+----------------+---------------------------------------------------------------------- | id | name | dependencies | profiling data | operator info | -----+----------+--------------+----------------+---------------------------------------------------------------------- | 1 | ShowTags | 0 | | outputVar: [{\"colNames\":[],\"name\":\"__ShowTags_1\",\"type\":\"DATASET\"}] | | | | | | inputVar: | -----+----------+--------------+----------------+---------------------------------------------------------------------- | 0 | Start | | | outputVar: [{\"colNames\":[],\"name\":\"__Start_0\",\"type\":\"DATASET\"}] | -----+----------+--------------+----------------+---------------------------------------------------------------------- PROFILE nebula> PROFILE format=\"row\" SHOW TAGS; +--------+ | Name | +--------+ | player | | team | +--------+ Got 2 rows (time spent 2038/2728 us) Execution Plan -----+----------+--------------+----------------------------------------------------+---------------------------------------------------------------------- | id | name | dependencies | profiling data | operator info | -----+----------+--------------+----------------------------------------------------+---------------------------------------------------------------------- | 1 | ShowTags | 0 | ver: 0, rows: 1, execTime: 42us, totalTime: 1177us | outputVar: [{\"colNames\":[],\"name\":\"__ShowTags_1\",\"type\":\"DATASET\"}] | | | | | | inputVar: | -----+----------+--------------+----------------------------------------------------+---------------------------------------------------------------------- | 0 | Start | | ver: 0, rows: 0, execTime: 1us, totalTime: 57us | outputVar: [{\"colNames\":[],\"name\":\"__Start_0\",\"type\":\"DATASET\"}] | -----+----------+--------------+----------------------------------------------------+---------------------------------------------------------------------- \u53c2\u6570 \u8bf4\u660e id operator \u7684 ID\u3002 name operator \u7684\u540d\u79f0\u3002 dependencies \u5f53\u524d operator \u6240\u4f9d\u8d56\u7684 operator \u7684 ID\u3002 profiling data \u6267\u884c\u6982\u8981\u6587\u4ef6\u5185\u5bb9\u3002 ver \u8868\u793a operator \u7684\u7248\u672c\uff1b rows \u8868\u793a operator \u8f93\u51fa\u7ed3\u679c\u7684\u884c\u6570\uff1b execTime \u8868\u793a\u6267\u884c action \u7684\u65f6\u95f4\uff1b totalTime \u8868\u793a\u6267\u884c action \u7684\u65f6\u95f4\u3001\u7cfb\u7edf\u8c03\u5ea6\u65f6\u95f4\u3001\u6392\u961f\u65f6\u95f4\u7684\u603b\u548c\u3002 operator info operator \u7684\u8be6\u7ec6\u4fe1\u606f\u3002","title":"row\u683c\u5f0f"},{"location":"3.ngql-guide/17.query-tuning-statements/1.explain-and-profile/#dot","text":"dot \u683c\u5f0f\u5c06\u8fd4\u56de DOT \u8bed\u8a00\u7684\u4fe1\u606f\uff0c\u7136\u540e\u7528\u6237\u53ef\u4ee5\u4f7f\u7528 Graphviz \u751f\u6210\u8ba1\u5212\u56fe\u3002 Note Graphviz \u662f\u4e00\u6b3e\u5f00\u6e90\u53ef\u89c6\u5316\u56fe\u5de5\u5177\uff0c\u53ef\u4ee5\u7ed8\u5236 DOT \u8bed\u8a00\u811a\u672c\u63cf\u8ff0\u7684\u56fe\u3002Graphviz \u63d0\u4f9b\u4e00\u4e2a\u5728\u7ebf\u5de5\u5177\uff0c\u53ef\u4ee5\u9884\u89c8 DOT \u8bed\u8a00\u6587\u4ef6\uff0c\u5e76\u5c06\u5b83\u4eec\u5bfc\u51fa\u4e3a SVG \u6216 JSON \u7b49\u5176\u4ed6\u683c\u5f0f\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1 Graphviz Online \u3002 nebula> EXPLAIN format=\"dot\" SHOW TAGS; Execution succeeded (time spent 161/665 us) Execution Plan --------------------------------------------------------------------------------------------------------------------------------------------- ------------- plan --------------------------------------------------------------------------------------------------------------------------------------------- ------------- digraph exec_plan { rankdir=LR; \"ShowTags_0\"[label=\"ShowTags_0|outputVar: \\[\\{\\\"colNames\\\":\\[\\],\\\"name\\\":\\\"__ShowTags_0\\\",\\\"type\\\":\\\"DATASET\\\"\\}\\]\\l|inputVar:\\l\", shape=Mrecord]; \"Start_2\"->\"ShowTags_0\"; \"Start_2\"[label=\"Start_2|outputVar: \\[\\{\\\"colNames\\\":\\[\\],\\\"name\\\":\\\"__Start_2\\\",\\\"type\\\":\\\"DATASET\\\"\\}\\]\\l|inputVar: \\l\", shape=Mrecord]; } --------------------------------------------------------------------------------------------------------------------------------------------- ------------- \u5c06\u4e0a\u8ff0\u793a\u4f8b\u7684 DOT \u8bed\u8a00\u8f6c\u6362\u4e3a Graphviz \u56fe\uff0c\u5982\u4e0b\u6240\u793a\u3002","title":"dot\u683c\u5f0f"},{"location":"3.ngql-guide/17.query-tuning-statements/1.explain-and-profile/#tck","text":"tck \u683c\u5f0f\u7c7b\u4f3c\u4e8e\u8868\u683c\uff0c\u4f46\u662f\u6ca1\u6709\u8fb9\u6846\u548c\u884c\u4e4b\u95f4\u7684\u95f4\u7684\u5206\u5272\u7ebf\u3002\u7528\u6237\u53ef\u4ee5\u5c06\u7ed3\u679c\u7528\u5728\u5355\u5143\u6d4b\u8bd5\u7684\u6d4b\u8bd5\u7528\u4f8b\u4e2d\u3002 \u5173\u4e8e tck \u683c\u5f0f\u7684\u6d4b\u8bd5\u7528\u4f8b\uff0c\u53c2\u89c1 TCK case \u3002 EXPLAIN nebula> EXPLAIN format=\"tck\" FETCH PROP ON player \"player_1\",\"player_2\",\"player_3\" YIELD properties(vertex).name as name, properties(vertex).age as age; Execution succeeded (time spent 261\u00b5s/613.718\u00b5s) Execution Plan (optimize time 28 us) | id | name | dependencies | profiling data | operator info | | 2 | Project | 1 | | | | 1 | GetVertices | 0 | | | | 0 | Start | | | | Wed, 22 Mar 2023 23:15:52 CST PROFILE nebula> PROFILE format=\"tck\" FETCH PROP ON player \"player_1\",\"player_2\",\"player_3\" YIELD properties(vertex).name as name, properties(vertex).age as age; | name | age | | \"Piter Park\" | 24 | | \"aaa\" | 24 | | \"ccc\" | 24 | Got 3 rows (time spent 1.474ms/2.19677ms) Execution Plan (optimize time 41 us) | id | name | dependencies | profiling data | operator info | | 2 | Project | 1 | {\"rows\":3,\"version\":0} | | | 1 | GetVertices | 0 | {\"resp[0]\":{\"exec\":\"232(us)\",\"host\":\"127.0.0.1:9779\",\"total\":\"758(us)\"},\"rows\":3,\"total_rpc\":\"875(us)\",\"version\":0} | | | 0 | Start | | {\"rows\":0,\"version\":0} | | Wed, 22 Mar 2023 23:16:13 CST","title":"tck\u683c\u5f0f"},{"location":"3.ngql-guide/17.query-tuning-statements/2.kill-session/","text":"\u7ec8\u6b62\u4f1a\u8bdd\uff08KILL SESSION\uff09 \u00b6 KILL SESSION \u8bed\u53e5\u7528\u4e8e\u5173\u95ed\u672a\u767b\u51fa\u7684\u4f1a\u8bdd\uff08Session\uff09\u3002 Note \u53ea\u6709 root \u7528\u6237\u53ef\u4ee5\u7ec8\u6b62\u4f1a\u8bdd\u3002 \u6267\u884c KILL SESSION \u547d\u4ee4\u540e\uff0c\u6240\u6709\u7684 Graph \u670d\u52a1\u540c\u6b65\u6700\u65b0\u7684\u4f1a\u8bdd\u4fe1\u606f\u9700\u8981\u7b49\u5f85 2* session_reclaim_interval_secs \u79d2\uff0c\u9ed8\u8ba4\u7b49\u5f85 120 \u79d2\u3002 \u8bed\u6cd5 \u00b6 KILL SESSION \u8bed\u53e5\u652f\u6301\u7ec8\u6b62\u5355\u4e2a\u548c\u591a\u4e2a\u4f1a\u8bdd\uff0c\u8bed\u6cd5\u5982\u4e0b\uff1a \u7ec8\u6b62\u5355\u4e2a\u4f1a\u8bdd KILL {SESSION|SESSIONS} <SessionId> {SESSION|SESSIONS} \uff1a\u652f\u6301 SESSION \u548c SESSIONS \u7684\u5199\u6cd5\u3002 <SessionId> \uff1a\u6307\u4f1a\u8bdd Session \u7684 ID\u3002\u53ef\u6267\u884c SHOW SESSIONS \u547d\u4ee4 \u67e5\u770b\u4f1a\u8bdd ID\u3002 \u7ec8\u6b62\u591a\u4e2a\u4f1a\u8bdd SHOW SESSIONS | YIELD $-.SessionId AS sid [WHERE <filter_clause>] | KILL {SESSION|SESSIONS} $-.sid Note KILL SESSION \u8bed\u53e5\u652f\u6301\u7ba1\u9053\u64cd\u4f5c\uff0c\u5373\u5c06 SHOW SESSIONS \u8bed\u53e5\u4e0e KILL SESSION \u8bed\u53e5\u7ed3\u5408\u4f7f\u7528\uff0c\u4ee5\u7ec8\u6b62\u591a\u4e2a\u4f1a\u8bdd\u3002 [WHERE <filter_clause>] \uff1a \u53ef\u9009\u9879\uff0c\u4f7f\u7528 WHERE \u5b50\u53e5\u8fc7\u6ee4\u4f1a\u8bdd\uff1b <filter_expression> \u6307\u6ee4\u8fc7\u8868\u8fbe\u5f0f\uff0c\u4f8b\u5982 WHERE $-.CreateTime < datetime(\"2022-12-14T18:00:00\") \u3002\u5982\u679c\u4e0d\u52a0\u8be5\u9009\u9879\uff0c\u5219\u5173\u95ed\u6240\u6709\u5f53\u524d\u4f1a\u8bdd\u3002 WHERE \u5b50\u53e5\u4e2d\u652f\u6301\u7684\u8fc7\u6ee4\u9879\u6709\uff1a SessionId \u3001 UserName \u3001 SpaceName \u3001 CreateTime \u3001 UpdateTime \u3001 GraphAddr \u3001 Timezone \u3001 ClientIp \u3002\u53ef\u4ee5\u6267\u884c SHOW SESSIONS \u547d\u4ee4 \u67e5\u770b\u8fd9\u4e9b\u8fc7\u6ee4\u9879\u7684\u542b\u4e49\u3002 {SESSION|SESSIONS} \uff1a\u652f\u6301 SESSION \u548c SESSIONS \u7684\u5199\u6cd5\u3002 Caution \u8bf7\u8c28\u614e\u4f7f\u7528\u8fc7\u6ee4\u6761\u4ef6\u4ee5\u9632\u8bef\u5220\u4f1a\u8bdd\u3002 \u793a\u4f8b \u00b6 \u7ec8\u6b62\u5355\u4e2a\u4f1a\u8bdd\u3002 nebula> KILL SESSION 1672887983842984 \u7ec8\u6b62\u591a\u4e2a\u4f1a\u8bdd\u3002 \u7ec8\u6b62\u521b\u5efa\u65f6\u95f4\u5c0f\u4e8e 2023-01-05T18:00:00 \u7684\u6240\u6709\u4f1a\u8bdd\u3002 nebula> SHOW SESSIONS | YIELD $-.SessionId AS sid WHERE $-.CreateTime < datetime(\"2023-01-05T18:00:00\") | KILL SESSIONS $-.sid \u7ec8\u6b62\u521b\u5efa\u65f6\u95f4\u6700\u65e9\u7684\u4e24\u4e2a\u4f1a\u8bdd\u3002 nebula> SHOW SESSIONS | YIELD $-.SessionId AS sid, $-.CreateTime as CreateTime | ORDER BY $-.CreateTime ASC | LIMIT 2 | KILL SESSIONS $-.sid \u7ec8\u6b62\u7528\u6237\u540d\u4e3a session_user1 \u521b\u5efa\u7684\u6240\u6709\u4f1a\u8bdd\u3002 nebula> SHOW SESSIONS | YIELD $-.SessionId as sid WHERE $-.UserName == \"session_user1\" | KILL SESSIONS $-.sid \u7ec8\u6b62\u6240\u6709\u4f1a\u8bdd nebula> SHOW SESSIONS | YIELD $-.SessionId as sid | KILL SESSION $-.sid // \u6216\u8005 nebula> SHOW SESSIONS | KILL SESSIONS $-.SessionId Caution \u7ec8\u6b62\u6240\u6709\u4f1a\u8bdd\u65f6\uff0c\u5f53\u524d\u4f1a\u8bdd\u4e5f\u4f1a\u88ab\u7ec8\u6b62\u3002\u8bf7\u8c28\u614e\u4f7f\u7528\u3002","title":"\u7ec8\u6b62\u4f1a\u8bdd"},{"location":"3.ngql-guide/17.query-tuning-statements/2.kill-session/#kill_session","text":"KILL SESSION \u8bed\u53e5\u7528\u4e8e\u5173\u95ed\u672a\u767b\u51fa\u7684\u4f1a\u8bdd\uff08Session\uff09\u3002 Note \u53ea\u6709 root \u7528\u6237\u53ef\u4ee5\u7ec8\u6b62\u4f1a\u8bdd\u3002 \u6267\u884c KILL SESSION \u547d\u4ee4\u540e\uff0c\u6240\u6709\u7684 Graph \u670d\u52a1\u540c\u6b65\u6700\u65b0\u7684\u4f1a\u8bdd\u4fe1\u606f\u9700\u8981\u7b49\u5f85 2* session_reclaim_interval_secs \u79d2\uff0c\u9ed8\u8ba4\u7b49\u5f85 120 \u79d2\u3002","title":"\u7ec8\u6b62\u4f1a\u8bdd\uff08KILL SESSION\uff09"},{"location":"3.ngql-guide/17.query-tuning-statements/2.kill-session/#_1","text":"KILL SESSION \u8bed\u53e5\u652f\u6301\u7ec8\u6b62\u5355\u4e2a\u548c\u591a\u4e2a\u4f1a\u8bdd\uff0c\u8bed\u6cd5\u5982\u4e0b\uff1a \u7ec8\u6b62\u5355\u4e2a\u4f1a\u8bdd KILL {SESSION|SESSIONS} <SessionId> {SESSION|SESSIONS} \uff1a\u652f\u6301 SESSION \u548c SESSIONS \u7684\u5199\u6cd5\u3002 <SessionId> \uff1a\u6307\u4f1a\u8bdd Session \u7684 ID\u3002\u53ef\u6267\u884c SHOW SESSIONS \u547d\u4ee4 \u67e5\u770b\u4f1a\u8bdd ID\u3002 \u7ec8\u6b62\u591a\u4e2a\u4f1a\u8bdd SHOW SESSIONS | YIELD $-.SessionId AS sid [WHERE <filter_clause>] | KILL {SESSION|SESSIONS} $-.sid Note KILL SESSION \u8bed\u53e5\u652f\u6301\u7ba1\u9053\u64cd\u4f5c\uff0c\u5373\u5c06 SHOW SESSIONS \u8bed\u53e5\u4e0e KILL SESSION \u8bed\u53e5\u7ed3\u5408\u4f7f\u7528\uff0c\u4ee5\u7ec8\u6b62\u591a\u4e2a\u4f1a\u8bdd\u3002 [WHERE <filter_clause>] \uff1a \u53ef\u9009\u9879\uff0c\u4f7f\u7528 WHERE \u5b50\u53e5\u8fc7\u6ee4\u4f1a\u8bdd\uff1b <filter_expression> \u6307\u6ee4\u8fc7\u8868\u8fbe\u5f0f\uff0c\u4f8b\u5982 WHERE $-.CreateTime < datetime(\"2022-12-14T18:00:00\") \u3002\u5982\u679c\u4e0d\u52a0\u8be5\u9009\u9879\uff0c\u5219\u5173\u95ed\u6240\u6709\u5f53\u524d\u4f1a\u8bdd\u3002 WHERE \u5b50\u53e5\u4e2d\u652f\u6301\u7684\u8fc7\u6ee4\u9879\u6709\uff1a SessionId \u3001 UserName \u3001 SpaceName \u3001 CreateTime \u3001 UpdateTime \u3001 GraphAddr \u3001 Timezone \u3001 ClientIp \u3002\u53ef\u4ee5\u6267\u884c SHOW SESSIONS \u547d\u4ee4 \u67e5\u770b\u8fd9\u4e9b\u8fc7\u6ee4\u9879\u7684\u542b\u4e49\u3002 {SESSION|SESSIONS} \uff1a\u652f\u6301 SESSION \u548c SESSIONS \u7684\u5199\u6cd5\u3002 Caution \u8bf7\u8c28\u614e\u4f7f\u7528\u8fc7\u6ee4\u6761\u4ef6\u4ee5\u9632\u8bef\u5220\u4f1a\u8bdd\u3002","title":"\u8bed\u6cd5"},{"location":"3.ngql-guide/17.query-tuning-statements/2.kill-session/#_2","text":"\u7ec8\u6b62\u5355\u4e2a\u4f1a\u8bdd\u3002 nebula> KILL SESSION 1672887983842984 \u7ec8\u6b62\u591a\u4e2a\u4f1a\u8bdd\u3002 \u7ec8\u6b62\u521b\u5efa\u65f6\u95f4\u5c0f\u4e8e 2023-01-05T18:00:00 \u7684\u6240\u6709\u4f1a\u8bdd\u3002 nebula> SHOW SESSIONS | YIELD $-.SessionId AS sid WHERE $-.CreateTime < datetime(\"2023-01-05T18:00:00\") | KILL SESSIONS $-.sid \u7ec8\u6b62\u521b\u5efa\u65f6\u95f4\u6700\u65e9\u7684\u4e24\u4e2a\u4f1a\u8bdd\u3002 nebula> SHOW SESSIONS | YIELD $-.SessionId AS sid, $-.CreateTime as CreateTime | ORDER BY $-.CreateTime ASC | LIMIT 2 | KILL SESSIONS $-.sid \u7ec8\u6b62\u7528\u6237\u540d\u4e3a session_user1 \u521b\u5efa\u7684\u6240\u6709\u4f1a\u8bdd\u3002 nebula> SHOW SESSIONS | YIELD $-.SessionId as sid WHERE $-.UserName == \"session_user1\" | KILL SESSIONS $-.sid \u7ec8\u6b62\u6240\u6709\u4f1a\u8bdd nebula> SHOW SESSIONS | YIELD $-.SessionId as sid | KILL SESSION $-.sid // \u6216\u8005 nebula> SHOW SESSIONS | KILL SESSIONS $-.SessionId Caution \u7ec8\u6b62\u6240\u6709\u4f1a\u8bdd\u65f6\uff0c\u5f53\u524d\u4f1a\u8bdd\u4e5f\u4f1a\u88ab\u7ec8\u6b62\u3002\u8bf7\u8c28\u614e\u4f7f\u7528\u3002","title":"\u793a\u4f8b"},{"location":"3.ngql-guide/17.query-tuning-statements/6.kill-query/","text":"\u7ec8\u6b62\u67e5\u8be2 \u00b6 KILL QUERY \u547d\u4ee4\u53ef\u4ee5\u7ec8\u6b62\u6b63\u5728\u6267\u884c\u7684\u67e5\u8be2\uff0c\u5e38\u7528\u4e8e\u7ec8\u6b62\u6162\u67e5\u8be2\u3002 Note \u4ec5 God \u89d2\u8272\u6743\u9650\u53ef\u4ee5\u7ec8\u6b62\u4efb\u610f\u67e5\u8be2\uff0c\u5176\u4ed6\u89d2\u8272\u53ea\u80fd\u7ec8\u6b62\u81ea\u5df1\u7684\u67e5\u8be2\u3002 \u8bed\u6cd5 \u00b6 KILL QUERY (session=<session_id>, plan=<plan_id>); session_id \uff1a\u4f1a\u8bdd ID\u3002 plan_id \uff1a\u6267\u884c\u8ba1\u5212 ID\u3002 \u4f1a\u8bdd ID \u548c\u6267\u884c\u8ba1\u5212 ID \u53ef\u4ee5\u552f\u4e00\u786e\u5b9a\u4e00\u4e2a\u67e5\u8be2\u3002\u4e8c\u8005\u53ef\u4ee5\u901a\u8fc7 SHOW QUERIES \u8bed\u53e5\u83b7\u53d6\u3002 \u793a\u4f8b \u00b6 \u5728\u4e00\u4e2a\u4f1a\u8bdd\u4e2d\u6267\u884c\u547d\u4ee4\u7ec8\u6b62\u53e6\u4e00\u4e2a\u4f1a\u8bdd\u4e2d\u7684\u67e5\u8be2\uff1a nebula> KILL QUERY(SESSION=1625553545984255,PLAN=163); \u53e6\u4e00\u4e2a\u4f1a\u8bdd\u4e2d\u7684\u67e5\u8be2\u4f1a\u7ec8\u6b62\uff0c\u5e76\u8fd4\u56de\u5982\u4e0b\u4fe1\u606f\uff1a [ERROR (-1005)]: ExecutionPlanId[1001] does not exist in current Session.","title":"\u7ec8\u6b62\u67e5\u8be2"},{"location":"3.ngql-guide/17.query-tuning-statements/6.kill-query/#_1","text":"KILL QUERY \u547d\u4ee4\u53ef\u4ee5\u7ec8\u6b62\u6b63\u5728\u6267\u884c\u7684\u67e5\u8be2\uff0c\u5e38\u7528\u4e8e\u7ec8\u6b62\u6162\u67e5\u8be2\u3002 Note \u4ec5 God \u89d2\u8272\u6743\u9650\u53ef\u4ee5\u7ec8\u6b62\u4efb\u610f\u67e5\u8be2\uff0c\u5176\u4ed6\u89d2\u8272\u53ea\u80fd\u7ec8\u6b62\u81ea\u5df1\u7684\u67e5\u8be2\u3002","title":"\u7ec8\u6b62\u67e5\u8be2"},{"location":"3.ngql-guide/17.query-tuning-statements/6.kill-query/#_2","text":"KILL QUERY (session=<session_id>, plan=<plan_id>); session_id \uff1a\u4f1a\u8bdd ID\u3002 plan_id \uff1a\u6267\u884c\u8ba1\u5212 ID\u3002 \u4f1a\u8bdd ID \u548c\u6267\u884c\u8ba1\u5212 ID \u53ef\u4ee5\u552f\u4e00\u786e\u5b9a\u4e00\u4e2a\u67e5\u8be2\u3002\u4e8c\u8005\u53ef\u4ee5\u901a\u8fc7 SHOW QUERIES \u8bed\u53e5\u83b7\u53d6\u3002","title":"\u8bed\u6cd5"},{"location":"3.ngql-guide/17.query-tuning-statements/6.kill-query/#_3","text":"\u5728\u4e00\u4e2a\u4f1a\u8bdd\u4e2d\u6267\u884c\u547d\u4ee4\u7ec8\u6b62\u53e6\u4e00\u4e2a\u4f1a\u8bdd\u4e2d\u7684\u67e5\u8be2\uff1a nebula> KILL QUERY(SESSION=1625553545984255,PLAN=163); \u53e6\u4e00\u4e2a\u4f1a\u8bdd\u4e2d\u7684\u67e5\u8be2\u4f1a\u7ec8\u6b62\uff0c\u5e76\u8fd4\u56de\u5982\u4e0b\u4fe1\u606f\uff1a [ERROR (-1005)]: ExecutionPlanId[1001] does not exist in current Session.","title":"\u793a\u4f8b"},{"location":"3.ngql-guide/3.data-types/1.numeric/","text":"\u6570\u503c \u00b6 nGQL \u652f\u6301\u6574\u6570\u548c\u6d6e\u70b9\u6570\u3002 \u6574\u6570 \u00b6 nGQL \u652f\u6301\u5e26\u7b26\u53f7\u7684 64 \u4f4d\u6574\u6570\uff08INT64\uff09\u300132 \u4f4d\u6574\u6570\uff08INT32\uff09\u300116 \u4f4d\u6574\u6570\uff08INT16\uff09\u548c 8 \u4f4d\u6574\u6570\uff08INT8\uff09\u3002 \u7c7b\u578b \u58f0\u660e\u5173\u952e\u5b57 \u8303\u56f4 INT64 INT64 \u6216 INT -9,223,372,036,854,775,808 ~ 9,223,372,036,854,775,807 INT32 INT32 -2,147,483,648 ~ 2,147,483,647 INT16 INT16 -32,768 ~ 32,767 INT8 INT8 -128 ~ 127 \u6d6e\u70b9\u6570 \u00b6 nGQL \u652f\u6301\u5355\u7cbe\u5ea6\u6d6e\u70b9\uff08FLOAT\uff09\u548c\u53cc\u7cbe\u5ea6\u6d6e\u70b9\uff08DOUBLE\uff09\u3002 \u7c7b\u578b \u58f0\u660e\u5173\u952e\u5b57 \u8303\u56f4 \u7cbe\u5ea6 FLOAT FLOAT 3.4E +/- 38 6~7 \u4f4d DOUBLE DOUBLE 1.7E +/- 308 15~16 \u4f4d nGQL \u652f\u6301\u79d1\u5b66\u8ba1\u6570\u6cd5\uff0c\u4f8b\u5982 1e2 \u3001 1.1e2 \u3001 .3e4 \u3001 1.e4 \u3001 -1234E-10 \u3002 Note \u4e0d\u652f\u6301 MySQL \u4e2d\u7684 DECIMAL \u6570\u636e\u7c7b\u578b\u3002 \u6570\u503c\u7684\u8bfb\u5199 \u00b6 \u5728\u5199\u5165\u548c\u8bfb\u53d6\u4e0d\u540c\u7c7b\u578b\u7684\u6570\u636e\u65f6\uff0cnGQL \u7684\u884c\u4e3a\u9075\u5b88\u4ee5\u4e0b\u89c4\u5219\uff1a \u6570\u503c\u7c7b\u578b \u8bbe\u7f6e\u4e3a VID \u8bbe\u7f6e\u4e3a\u5c5e\u6027\u7c7b\u578b \u8bfb\u53d6\u8be5\u7c7b\u578b\u7684\u5c5e\u6027\u503c\u5f97\u5230\u7684\u7c7b\u578b INT64 \u652f\u6301 \u652f\u6301 INT64 INT32 \u4e0d\u652f\u6301 \u652f\u6301 INT64 INT16 \u4e0d\u652f\u6301 \u652f\u6301 INT64 INT8 \u4e0d\u652f\u6301 \u652f\u6301 INT64 FLOAT \u4e0d\u652f\u6301 \u652f\u6301 DOUBLE DOUBLE \u4e0d\u652f\u6301 \u652f\u6301 DOUBLE \u4f8b\u5982\uff0cnGQL \u4e0d\u652f\u6301\u8bbe\u7f6e INT8 \u7c7b\u578b\u7684 VID \uff0c\u4f46\u652f\u6301\u5c06 TAG \u6216 Edge type \u7684\u67d0\u4e2a\u5c5e\u6027\u7c7b\u578b\u8bbe\u7f6e\u4e3a INT8\u3002\u5f53\u4f7f\u7528 nGQL \u8bed\u53e5\u8bfb\u53d6 INT8 \u7c7b\u578b\u7684\u5c5e\u6027\u65f6\uff0c\u83b7\u53d6\u5230\u7684\u503c\u7684\u7c7b\u578b\u4e3a INT64\u3002 NebulaGraph\u652f\u6301\u5199\u5165\u591a\u79cd\u8fdb\u5236\u7684\u6570\u503c\uff1a \u5341\u8fdb\u5236\uff0c\u4f8b\u5982 123456 \u3002 \u5341\u516d\u8fdb\u5236\uff0c\u4f8b\u5982 0x1e240 \u3002 \u516b\u8fdb\u5236\uff0c\u4f8b\u5982 0361100 \u3002 \u4f46NebulaGraph\u4f1a\u5c06\u5199\u5165\u7684\u975e\u5341\u8fdb\u5236\u6570\u503c\u89e3\u6790\u4e3a\u5341\u8fdb\u5236\u7684\u503c\u4fdd\u5b58\u3002\u8bfb\u53d6\u5230\u7684\u503c\u4e3a\u5341\u8fdb\u5236\u3002 \u4f8b\u5982\uff0c\u5c5e\u6027 score \u7684\u7c7b\u578b\u4e3a INT \uff0c\u901a\u8fc7 INSERT \u8bed\u53e5\u4e3a\u5176\u8d4b\u503c 0xb \uff0c\u4f7f\u7528 FETCH \u7b49\u8bed\u53e5\u67e5\u8be2\u8be5\u5c5e\u6027\u503c\u83b7\u53d6\u5230\u7684\u7ed3\u679c\u662f 11 \uff0c\u5373\u5c06\u5341\u516d\u8fdb\u5236\u7684 0xb \u8f6c\u6362\u4e3a\u5341\u8fdb\u5236\u540e\u7684\u503c\u3002 \u5c06 FLOAT/DOUBLE \u7c7b\u578b\u7684\u6570\u503c\u63d2\u5165 INT \u7c7b\u578b\u7684\u5217\uff0c\u4f1a\u5c06\u6570\u503c\u56db\u820d\u4e94\u5165\u53d6\u6574\u3002","title":"\u6570\u503c"},{"location":"3.ngql-guide/3.data-types/1.numeric/#_1","text":"nGQL \u652f\u6301\u6574\u6570\u548c\u6d6e\u70b9\u6570\u3002","title":"\u6570\u503c"},{"location":"3.ngql-guide/3.data-types/1.numeric/#_2","text":"nGQL \u652f\u6301\u5e26\u7b26\u53f7\u7684 64 \u4f4d\u6574\u6570\uff08INT64\uff09\u300132 \u4f4d\u6574\u6570\uff08INT32\uff09\u300116 \u4f4d\u6574\u6570\uff08INT16\uff09\u548c 8 \u4f4d\u6574\u6570\uff08INT8\uff09\u3002 \u7c7b\u578b \u58f0\u660e\u5173\u952e\u5b57 \u8303\u56f4 INT64 INT64 \u6216 INT -9,223,372,036,854,775,808 ~ 9,223,372,036,854,775,807 INT32 INT32 -2,147,483,648 ~ 2,147,483,647 INT16 INT16 -32,768 ~ 32,767 INT8 INT8 -128 ~ 127","title":"\u6574\u6570"},{"location":"3.ngql-guide/3.data-types/1.numeric/#_3","text":"nGQL \u652f\u6301\u5355\u7cbe\u5ea6\u6d6e\u70b9\uff08FLOAT\uff09\u548c\u53cc\u7cbe\u5ea6\u6d6e\u70b9\uff08DOUBLE\uff09\u3002 \u7c7b\u578b \u58f0\u660e\u5173\u952e\u5b57 \u8303\u56f4 \u7cbe\u5ea6 FLOAT FLOAT 3.4E +/- 38 6~7 \u4f4d DOUBLE DOUBLE 1.7E +/- 308 15~16 \u4f4d nGQL \u652f\u6301\u79d1\u5b66\u8ba1\u6570\u6cd5\uff0c\u4f8b\u5982 1e2 \u3001 1.1e2 \u3001 .3e4 \u3001 1.e4 \u3001 -1234E-10 \u3002 Note \u4e0d\u652f\u6301 MySQL \u4e2d\u7684 DECIMAL \u6570\u636e\u7c7b\u578b\u3002","title":"\u6d6e\u70b9\u6570"},{"location":"3.ngql-guide/3.data-types/1.numeric/#_4","text":"\u5728\u5199\u5165\u548c\u8bfb\u53d6\u4e0d\u540c\u7c7b\u578b\u7684\u6570\u636e\u65f6\uff0cnGQL \u7684\u884c\u4e3a\u9075\u5b88\u4ee5\u4e0b\u89c4\u5219\uff1a \u6570\u503c\u7c7b\u578b \u8bbe\u7f6e\u4e3a VID \u8bbe\u7f6e\u4e3a\u5c5e\u6027\u7c7b\u578b \u8bfb\u53d6\u8be5\u7c7b\u578b\u7684\u5c5e\u6027\u503c\u5f97\u5230\u7684\u7c7b\u578b INT64 \u652f\u6301 \u652f\u6301 INT64 INT32 \u4e0d\u652f\u6301 \u652f\u6301 INT64 INT16 \u4e0d\u652f\u6301 \u652f\u6301 INT64 INT8 \u4e0d\u652f\u6301 \u652f\u6301 INT64 FLOAT \u4e0d\u652f\u6301 \u652f\u6301 DOUBLE DOUBLE \u4e0d\u652f\u6301 \u652f\u6301 DOUBLE \u4f8b\u5982\uff0cnGQL \u4e0d\u652f\u6301\u8bbe\u7f6e INT8 \u7c7b\u578b\u7684 VID \uff0c\u4f46\u652f\u6301\u5c06 TAG \u6216 Edge type \u7684\u67d0\u4e2a\u5c5e\u6027\u7c7b\u578b\u8bbe\u7f6e\u4e3a INT8\u3002\u5f53\u4f7f\u7528 nGQL \u8bed\u53e5\u8bfb\u53d6 INT8 \u7c7b\u578b\u7684\u5c5e\u6027\u65f6\uff0c\u83b7\u53d6\u5230\u7684\u503c\u7684\u7c7b\u578b\u4e3a INT64\u3002 NebulaGraph\u652f\u6301\u5199\u5165\u591a\u79cd\u8fdb\u5236\u7684\u6570\u503c\uff1a \u5341\u8fdb\u5236\uff0c\u4f8b\u5982 123456 \u3002 \u5341\u516d\u8fdb\u5236\uff0c\u4f8b\u5982 0x1e240 \u3002 \u516b\u8fdb\u5236\uff0c\u4f8b\u5982 0361100 \u3002 \u4f46NebulaGraph\u4f1a\u5c06\u5199\u5165\u7684\u975e\u5341\u8fdb\u5236\u6570\u503c\u89e3\u6790\u4e3a\u5341\u8fdb\u5236\u7684\u503c\u4fdd\u5b58\u3002\u8bfb\u53d6\u5230\u7684\u503c\u4e3a\u5341\u8fdb\u5236\u3002 \u4f8b\u5982\uff0c\u5c5e\u6027 score \u7684\u7c7b\u578b\u4e3a INT \uff0c\u901a\u8fc7 INSERT \u8bed\u53e5\u4e3a\u5176\u8d4b\u503c 0xb \uff0c\u4f7f\u7528 FETCH \u7b49\u8bed\u53e5\u67e5\u8be2\u8be5\u5c5e\u6027\u503c\u83b7\u53d6\u5230\u7684\u7ed3\u679c\u662f 11 \uff0c\u5373\u5c06\u5341\u516d\u8fdb\u5236\u7684 0xb \u8f6c\u6362\u4e3a\u5341\u8fdb\u5236\u540e\u7684\u503c\u3002 \u5c06 FLOAT/DOUBLE \u7c7b\u578b\u7684\u6570\u503c\u63d2\u5165 INT \u7c7b\u578b\u7684\u5217\uff0c\u4f1a\u5c06\u6570\u503c\u56db\u820d\u4e94\u5165\u53d6\u6574\u3002","title":"\u6570\u503c\u7684\u8bfb\u5199"},{"location":"3.ngql-guide/3.data-types/10.geography/","text":"\u5730\u7406\u7a7a\u95f4 \u00b6 \u5730\u7406\u7a7a\u95f4\uff08GEOGRAPHY\uff09\u662f\u7531\u7ecf\u7eac\u5ea6\u6784\u6210\u7684\u8868\u793a\u5730\u7406\u7a7a\u95f4\u4fe1\u606f\u7684\u6570\u636e\u7c7b\u578b\u3002NebulaGraph\u5f53\u524d\u652f\u6301 \u7b80\u5355\u5730\u7406\u8981\u7d20 \u4e2d\u7684 Point\u3001LineString \u548c Polygon \u4e09\u79cd\u5730\u7406\u5f62\u72b6\u3002\u652f\u6301 SQL-MM 3 \u4e2d\u7684\u90e8\u5206\u6838\u5fc3 geo \u89e3\u6790\u3001\u6784\u9020\u3001\u683c\u5f0f\u8bbe\u7f6e\u3001\u8f6c\u6362\u3001\u8c13\u8bcd\u548c\u5ea6\u91cf\u7b49\u51fd\u6570\u3002 GEOGRAPHY \u00b6 GEOGRAPHY \u7684\u57fa\u672c\u7c7b\u578b\u662f\u70b9\uff0c\u7531\u7ecf\u7eac\u5ea6\u786e\u5b9a\u4e00\u4e2a\u70b9\uff0c\u4f8b\u5982 \"POINT(3 8)\" \u8868\u793a\u7ecf\u5ea6\u4e3a 3\u00b0 \uff0c\u7eac\u5ea6\u4e3a 8\u00b0 \u3002\u591a\u4e2a\u70b9\u53ef\u4ee5\u6784\u6210\u7ebf\u6bb5\u6216\u591a\u8fb9\u5f62\u3002 \u7c7b\u578b \u793a\u4f8b \u8bf4\u660e Point \"POINT(3 8)\" \u70b9\u7c7b\u578b LineString \"LINESTRING(3 8, 4.7 73.23)\" \u7ebf\u6bb5\u7c7b\u578b Polygon \"POLYGON((0 1, 1 2, 2 3, 0 1))\" \u591a\u8fb9\u5f62\u7c7b\u578b Note \u8bf7\u52ff\u76f4\u63a5\u63d2\u5165\u4e0a\u8ff0\u7c7b\u578b\u7684 GEOGRAPHY \u6570\u636e\uff0c\u4f8b\u5982 INSERT VERTEX any_shape(geo) VALUES \"1\":(\"POINT(1 1)\") \uff0c\u9700\u8981\u4f7f\u7528 geo \u51fd\u6570 \u6307\u5b9a\u6570\u636e\u7c7b\u578b\u540e\u624d\u80fd\u63d2\u5165\uff0c\u4f8b\u5982 INSERT VERTEX any_shape(geo) VALUES \"1\":(ST_GeogFromText(\"POINT(1 1)\")); \u3002 \u793a\u4f8b \u00b6 //\u521b\u5efa Tag\uff0c\u5141\u8bb8\u5b58\u50a8\u4efb\u610f\u5f62\u72b6\u5730\u7406\u7a7a\u95f4\u6570\u636e\u7c7b\u578b\u3002 nebula> CREATE TAG IF NOT EXISTS any_shape(geo geography); //\u521b\u5efa Tag\uff0c\u53ea\u5141\u8bb8\u5b58\u50a8\u70b9\u5f62\u72b6\u5730\u7406\u7a7a\u95f4\u6570\u636e\u7c7b\u578b\u3002 nebula> CREATE TAG IF NOT EXISTS only_point(geo geography(point)); //\u521b\u5efa Tag\uff0c\u53ea\u5141\u8bb8\u5b58\u50a8\u7ebf\u6bb5\u5f62\u72b6\u5730\u7406\u7a7a\u95f4\u6570\u636e\u7c7b\u578b\u3002 nebula> CREATE TAG IF NOT EXISTS only_linestring(geo geography(linestring)); //\u521b\u5efa Tag\uff0c\u53ea\u5141\u8bb8\u5b58\u50a8\u591a\u8fb9\u5f62\u5f62\u72b6\u5730\u7406\u7a7a\u95f4\u6570\u636e\u7c7b\u578b\u3002 nebula> CREATE TAG IF NOT EXISTS only_polygon(geo geography(polygon)); //\u521b\u5efa Edge type\uff0c\u5141\u8bb8\u5b58\u50a8\u4efb\u610f\u5f62\u72b6\u5730\u7406\u7a7a\u95f4\u6570\u636e\u7c7b\u578b\u3002 nebula> CREATE EDGE IF NOT EXISTS any_shape_edge(geo geography); //\u521b\u5efa\u5b58\u50a8\u591a\u8fb9\u5f62\u5730\u7406\u7a7a\u95f4\u7684\u70b9\u3002 nebula> INSERT VERTEX any_shape(geo) VALUES \"103\":(ST_GeogFromText(\"POLYGON((0 1, 1 2, 2 3, 0 1))\")); //\u521b\u5efa\u5b58\u50a8\u591a\u8fb9\u5f62\u5730\u7406\u7a7a\u95f4\u7684\u8fb9\u3002 nebula> INSERT EDGE any_shape_edge(geo) VALUES \"201\"->\"302\":(ST_GeogFromText(\"POLYGON((0 1, 1 2, 2 3, 0 1))\")); //\u67e5\u8be2\u70b9 103 \u7684\u5c5e\u6027 geo\u3002 nebula> FETCH PROP ON any_shape \"103\" YIELD ST_ASText(any_shape.geo); +---------------------------------+ | ST_ASText(any_shape.geo) | +---------------------------------+ | \"POLYGON((0 1, 1 2, 2 3, 0 1))\" | +---------------------------------+ //\u67e5\u8be2\u8fb9 201->302 \u7684\u5c5e\u6027 geo\u3002 nebula> FETCH PROP ON any_shape_edge \"201\"->\"302\" YIELD ST_ASText(any_shape_edge.geo); +---------------------------------+ | ST_ASText(any_shape_edge.geo) | +---------------------------------+ | \"POLYGON((0 1, 1 2, 2 3, 0 1))\" | +---------------------------------+ //\u4e3a geo \u5c5e\u6027\u521b\u5efa\u7d22\u5f15\u5e76\u4f7f\u7528 LOOKUP \u67e5\u8be2\u3002 nebula> CREATE TAG INDEX IF NOT EXISTS any_shape_geo_index ON any_shape(geo); nebula> REBUILD TAG INDEX any_shape_geo_index; nebula> LOOKUP ON any_shape YIELD ST_ASText(any_shape.geo); +---------------------------------+ | ST_ASText(any_shape.geo) | +---------------------------------+ | \"POLYGON((0 1, 1 2, 2 3, 0 1))\" | +---------------------------------+ \u4e3a geo \u5c5e\u6027\u521b\u5efa\u7d22\u5f15\u65f6\uff0c\u8fd8\u53ef\u4ee5\u6307\u5b9a geo \u7d22\u5f15\u7684\u53c2\u6570\u3002\u8bf4\u660e\u5982\u4e0b\u3002 \u53c2\u6570 \u9ed8\u8ba4\u503c \u8bf4\u660e s2_max_level 30 S2 cell \u7528\u4e8e\u586b\u5145\u7684\u6700\u5927\u7b49\u7ea7\u3002\u53d6\u503c\uff1a 1 ~ 30 \u3002\u8bbe\u7f6e\u4e3a\u5c0f\u4e8e\u9ed8\u8ba4\u503c\u65f6\uff0c\u610f\u5473\u7740\u4f1a\u4f7f\u7528\u8f83\u5927\u7684\u5355\u5143\u683c\u8fdb\u884c\u586b\u5145\u3002 s2_max_cells 8 S2 cell \u7528\u4e8e\u586b\u5145\u7684\u6700\u5927\u6570\u91cf\uff0c\u53ef\u4ee5\u9650\u5236\u586b\u5145\u65f6\u7684\u5de5\u4f5c\u91cf\u3002\u53d6\u503c\uff1a 1 ~ 30 \u3002\u5bf9\u4e8e\u590d\u6742\u5f62\u72b6\u7684\u533a\u57df\uff08\u4f8b\u5982\u7ec6\u77e9\u5f62\uff09\uff0c\u53ef\u4ee5\u4f7f\u7528\u66f4\u5927\u7684\u503c\u3002 Note \u6307\u5b9a\u5982\u4e0a\u4e24\u4e2a\u53c2\u6570\u5bf9 Point \u7c7b\u578b\u5c5e\u6027\u6ca1\u6709\u5f71\u54cd\uff0cPoint \u7c7b\u578b\u5c5e\u6027\u7684 s2_max_level \u5f3a\u5236\u4e3a 30 \u3002 nebula> CREATE TAG INDEX IF NOT EXISTS any_shape_geo_index ON any_shape(geo) with (s2_max_level=30, s2_max_cells=8); \u66f4\u591a\u7d22\u5f15\u8bf4\u660e\u8bf7\u53c2\u89c1 \u7d22\u5f15\u4ecb\u7ecd \u3002","title":"\u5730\u7406\u7a7a\u95f4"},{"location":"3.ngql-guide/3.data-types/10.geography/#_1","text":"\u5730\u7406\u7a7a\u95f4\uff08GEOGRAPHY\uff09\u662f\u7531\u7ecf\u7eac\u5ea6\u6784\u6210\u7684\u8868\u793a\u5730\u7406\u7a7a\u95f4\u4fe1\u606f\u7684\u6570\u636e\u7c7b\u578b\u3002NebulaGraph\u5f53\u524d\u652f\u6301 \u7b80\u5355\u5730\u7406\u8981\u7d20 \u4e2d\u7684 Point\u3001LineString \u548c Polygon \u4e09\u79cd\u5730\u7406\u5f62\u72b6\u3002\u652f\u6301 SQL-MM 3 \u4e2d\u7684\u90e8\u5206\u6838\u5fc3 geo \u89e3\u6790\u3001\u6784\u9020\u3001\u683c\u5f0f\u8bbe\u7f6e\u3001\u8f6c\u6362\u3001\u8c13\u8bcd\u548c\u5ea6\u91cf\u7b49\u51fd\u6570\u3002","title":"\u5730\u7406\u7a7a\u95f4"},{"location":"3.ngql-guide/3.data-types/10.geography/#geography","text":"GEOGRAPHY \u7684\u57fa\u672c\u7c7b\u578b\u662f\u70b9\uff0c\u7531\u7ecf\u7eac\u5ea6\u786e\u5b9a\u4e00\u4e2a\u70b9\uff0c\u4f8b\u5982 \"POINT(3 8)\" \u8868\u793a\u7ecf\u5ea6\u4e3a 3\u00b0 \uff0c\u7eac\u5ea6\u4e3a 8\u00b0 \u3002\u591a\u4e2a\u70b9\u53ef\u4ee5\u6784\u6210\u7ebf\u6bb5\u6216\u591a\u8fb9\u5f62\u3002 \u7c7b\u578b \u793a\u4f8b \u8bf4\u660e Point \"POINT(3 8)\" \u70b9\u7c7b\u578b LineString \"LINESTRING(3 8, 4.7 73.23)\" \u7ebf\u6bb5\u7c7b\u578b Polygon \"POLYGON((0 1, 1 2, 2 3, 0 1))\" \u591a\u8fb9\u5f62\u7c7b\u578b Note \u8bf7\u52ff\u76f4\u63a5\u63d2\u5165\u4e0a\u8ff0\u7c7b\u578b\u7684 GEOGRAPHY \u6570\u636e\uff0c\u4f8b\u5982 INSERT VERTEX any_shape(geo) VALUES \"1\":(\"POINT(1 1)\") \uff0c\u9700\u8981\u4f7f\u7528 geo \u51fd\u6570 \u6307\u5b9a\u6570\u636e\u7c7b\u578b\u540e\u624d\u80fd\u63d2\u5165\uff0c\u4f8b\u5982 INSERT VERTEX any_shape(geo) VALUES \"1\":(ST_GeogFromText(\"POINT(1 1)\")); \u3002","title":"GEOGRAPHY"},{"location":"3.ngql-guide/3.data-types/10.geography/#_2","text":"//\u521b\u5efa Tag\uff0c\u5141\u8bb8\u5b58\u50a8\u4efb\u610f\u5f62\u72b6\u5730\u7406\u7a7a\u95f4\u6570\u636e\u7c7b\u578b\u3002 nebula> CREATE TAG IF NOT EXISTS any_shape(geo geography); //\u521b\u5efa Tag\uff0c\u53ea\u5141\u8bb8\u5b58\u50a8\u70b9\u5f62\u72b6\u5730\u7406\u7a7a\u95f4\u6570\u636e\u7c7b\u578b\u3002 nebula> CREATE TAG IF NOT EXISTS only_point(geo geography(point)); //\u521b\u5efa Tag\uff0c\u53ea\u5141\u8bb8\u5b58\u50a8\u7ebf\u6bb5\u5f62\u72b6\u5730\u7406\u7a7a\u95f4\u6570\u636e\u7c7b\u578b\u3002 nebula> CREATE TAG IF NOT EXISTS only_linestring(geo geography(linestring)); //\u521b\u5efa Tag\uff0c\u53ea\u5141\u8bb8\u5b58\u50a8\u591a\u8fb9\u5f62\u5f62\u72b6\u5730\u7406\u7a7a\u95f4\u6570\u636e\u7c7b\u578b\u3002 nebula> CREATE TAG IF NOT EXISTS only_polygon(geo geography(polygon)); //\u521b\u5efa Edge type\uff0c\u5141\u8bb8\u5b58\u50a8\u4efb\u610f\u5f62\u72b6\u5730\u7406\u7a7a\u95f4\u6570\u636e\u7c7b\u578b\u3002 nebula> CREATE EDGE IF NOT EXISTS any_shape_edge(geo geography); //\u521b\u5efa\u5b58\u50a8\u591a\u8fb9\u5f62\u5730\u7406\u7a7a\u95f4\u7684\u70b9\u3002 nebula> INSERT VERTEX any_shape(geo) VALUES \"103\":(ST_GeogFromText(\"POLYGON((0 1, 1 2, 2 3, 0 1))\")); //\u521b\u5efa\u5b58\u50a8\u591a\u8fb9\u5f62\u5730\u7406\u7a7a\u95f4\u7684\u8fb9\u3002 nebula> INSERT EDGE any_shape_edge(geo) VALUES \"201\"->\"302\":(ST_GeogFromText(\"POLYGON((0 1, 1 2, 2 3, 0 1))\")); //\u67e5\u8be2\u70b9 103 \u7684\u5c5e\u6027 geo\u3002 nebula> FETCH PROP ON any_shape \"103\" YIELD ST_ASText(any_shape.geo); +---------------------------------+ | ST_ASText(any_shape.geo) | +---------------------------------+ | \"POLYGON((0 1, 1 2, 2 3, 0 1))\" | +---------------------------------+ //\u67e5\u8be2\u8fb9 201->302 \u7684\u5c5e\u6027 geo\u3002 nebula> FETCH PROP ON any_shape_edge \"201\"->\"302\" YIELD ST_ASText(any_shape_edge.geo); +---------------------------------+ | ST_ASText(any_shape_edge.geo) | +---------------------------------+ | \"POLYGON((0 1, 1 2, 2 3, 0 1))\" | +---------------------------------+ //\u4e3a geo \u5c5e\u6027\u521b\u5efa\u7d22\u5f15\u5e76\u4f7f\u7528 LOOKUP \u67e5\u8be2\u3002 nebula> CREATE TAG INDEX IF NOT EXISTS any_shape_geo_index ON any_shape(geo); nebula> REBUILD TAG INDEX any_shape_geo_index; nebula> LOOKUP ON any_shape YIELD ST_ASText(any_shape.geo); +---------------------------------+ | ST_ASText(any_shape.geo) | +---------------------------------+ | \"POLYGON((0 1, 1 2, 2 3, 0 1))\" | +---------------------------------+ \u4e3a geo \u5c5e\u6027\u521b\u5efa\u7d22\u5f15\u65f6\uff0c\u8fd8\u53ef\u4ee5\u6307\u5b9a geo \u7d22\u5f15\u7684\u53c2\u6570\u3002\u8bf4\u660e\u5982\u4e0b\u3002 \u53c2\u6570 \u9ed8\u8ba4\u503c \u8bf4\u660e s2_max_level 30 S2 cell \u7528\u4e8e\u586b\u5145\u7684\u6700\u5927\u7b49\u7ea7\u3002\u53d6\u503c\uff1a 1 ~ 30 \u3002\u8bbe\u7f6e\u4e3a\u5c0f\u4e8e\u9ed8\u8ba4\u503c\u65f6\uff0c\u610f\u5473\u7740\u4f1a\u4f7f\u7528\u8f83\u5927\u7684\u5355\u5143\u683c\u8fdb\u884c\u586b\u5145\u3002 s2_max_cells 8 S2 cell \u7528\u4e8e\u586b\u5145\u7684\u6700\u5927\u6570\u91cf\uff0c\u53ef\u4ee5\u9650\u5236\u586b\u5145\u65f6\u7684\u5de5\u4f5c\u91cf\u3002\u53d6\u503c\uff1a 1 ~ 30 \u3002\u5bf9\u4e8e\u590d\u6742\u5f62\u72b6\u7684\u533a\u57df\uff08\u4f8b\u5982\u7ec6\u77e9\u5f62\uff09\uff0c\u53ef\u4ee5\u4f7f\u7528\u66f4\u5927\u7684\u503c\u3002 Note \u6307\u5b9a\u5982\u4e0a\u4e24\u4e2a\u53c2\u6570\u5bf9 Point \u7c7b\u578b\u5c5e\u6027\u6ca1\u6709\u5f71\u54cd\uff0cPoint \u7c7b\u578b\u5c5e\u6027\u7684 s2_max_level \u5f3a\u5236\u4e3a 30 \u3002 nebula> CREATE TAG INDEX IF NOT EXISTS any_shape_geo_index ON any_shape(geo) with (s2_max_level=30, s2_max_cells=8); \u66f4\u591a\u7d22\u5f15\u8bf4\u660e\u8bf7\u53c2\u89c1 \u7d22\u5f15\u4ecb\u7ecd \u3002","title":"\u793a\u4f8b"},{"location":"3.ngql-guide/3.data-types/2.boolean/","text":"\u5e03\u5c14 \u00b6 NebulaGraph\u4f7f\u7528\u5173\u952e\u5b57 BOOL \u58f0\u660e\u5e03\u5c14\u6570\u636e\u7c7b\u578b\uff0c\u53ef\u9009\u503c\u4e3a true \u6216 false \u3002 nGQL \u652f\u6301\u4ee5\u5982\u4e0b\u65b9\u5f0f\u4f7f\u7528\u5e03\u5c14\u503c\uff1a \u5c06\u5c5e\u6027\u503c\u7684\u6570\u636e\u7c7b\u578b\u5b9a\u4e49\u4e3a\u5e03\u5c14\u3002 \u5728 WHERE \u5b50\u53e5\u4e2d\u7528\u5e03\u5c14\u503c\u4f5c\u4e3a\u5224\u65ad\u6761\u4ef6\u3002","title":"\u5e03\u5c14"},{"location":"3.ngql-guide/3.data-types/2.boolean/#_1","text":"NebulaGraph\u4f7f\u7528\u5173\u952e\u5b57 BOOL \u58f0\u660e\u5e03\u5c14\u6570\u636e\u7c7b\u578b\uff0c\u53ef\u9009\u503c\u4e3a true \u6216 false \u3002 nGQL \u652f\u6301\u4ee5\u5982\u4e0b\u65b9\u5f0f\u4f7f\u7528\u5e03\u5c14\u503c\uff1a \u5c06\u5c5e\u6027\u503c\u7684\u6570\u636e\u7c7b\u578b\u5b9a\u4e49\u4e3a\u5e03\u5c14\u3002 \u5728 WHERE \u5b50\u53e5\u4e2d\u7528\u5e03\u5c14\u503c\u4f5c\u4e3a\u5224\u65ad\u6761\u4ef6\u3002","title":"\u5e03\u5c14"},{"location":"3.ngql-guide/3.data-types/3.string/","text":"\u5b57\u7b26\u4e32 \u00b6 NebulaGraph\u652f\u6301\u5b9a\u957f\u5b57\u7b26\u4e32\u548c\u53d8\u957f\u5b57\u7b26\u4e32\u3002 \u58f0\u660e\u4e0e\u8868\u793a\u65b9\u5f0f \u00b6 nGQL \u4e2d\u7684\u5b57\u7b26\u4e32\u58f0\u660e\u65b9\u5f0f\u5982\u4e0b\uff1a \u4f7f\u7528\u5173\u952e\u5b57 STRING \u58f0\u660e\u53d8\u957f\u5b57\u7b26\u4e32\u3002 \u4f7f\u7528\u5173\u952e\u5b57 FIXED_STRING(<length>) \u58f0\u660e\u5b9a\u957f\u5b57\u7b26\u4e32\uff0c <length> \u4e3a\u5b57\u7b26\u4e32\u957f\u5ea6\uff0c\u4f8b\u5982 FIXED_STRING(32) \u3002 \u5b57\u7b26\u4e32\u7684\u8868\u793a\u65b9\u5f0f\u4e3a\u7528\u53cc\u5f15\u53f7\u6216\u5355\u5f15\u53f7\u5305\u88f9\uff0c\u4f8b\u5982 \"Hello, Cooper\" \u6216 'Hello, Cooper' \u3002 \u5b57\u7b26\u4e32\u8bfb\u5199 \u00b6 nGQL \u652f\u6301\u4ee5\u5982\u4e0b\u65b9\u5f0f\u4f7f\u7528\u5b57\u7b26\u4e32\uff1a \u5c06 VID \u7684\u6570\u636e\u7c7b\u578b\u5b9a\u4e49\u4e3a\u5b9a\u957f\u5b57\u7b26\u4e32\u3002 \u5c06\u53d8\u957f\u5b57\u7b26\u4e32\u8bbe\u7f6e\u4e3a Schema \u540d\u79f0\uff0c\u5305\u62ec\u56fe\u7a7a\u95f4\u3001Tag\u3001Edge type \u548c\u5c5e\u6027\u7684\u540d\u79f0\u3002 \u5c06\u5c5e\u6027\u503c\u7684\u6570\u636e\u7c7b\u578b\u5b9a\u4e49\u4e3a\u5b9a\u957f\u6216\u53d8\u957f\u5b57\u7b26\u4e32\u3002 \u4f8b\u5982\uff1a \u5c06\u5c5e\u6027\u503c\u7684\u7c7b\u578b\u5b9a\u4e49\u4e3a\u5b9a\u957f\u5b57\u7b26\u4e32 nebula> CREATE TAG IF NOT EXISTS t1 (p1 FIXED_STRING(10)); \u5c06\u5c5e\u6027\u503c\u7684\u7c7b\u578b\u5b9a\u4e49\u4e3a\u53d8\u957f\u5b57\u7b26\u4e32 nebula> CREATE TAG IF NOT EXISTS t2 (p2 STRING); \u5982\u679c\u5c1d\u8bd5\u5199\u5165\u7684\u5b9a\u957f\u5b57\u7b26\u4e32\u8d85\u51fa\u957f\u5ea6\u9650\u5236\uff1a \u5f53\u8be5\u5b9a\u957f\u5b57\u7b26\u4e32\u4e3a\u5c5e\u6027\u503c\u65f6\uff0c\u5199\u5165\u4f1a\u6210\u529f\uff0cNebulaGraph\u5c06\u622a\u65ad\u5b57\u7b26\u4e32\uff0c\u4ec5\u5b58\u5165\u7b26\u5408\u957f\u5ea6\u9650\u5236\u7684\u90e8\u5206\u3002 \u5f53\u8be5\u5b9a\u957f\u5b57\u7b26\u4e32\u4e3a VID \u65f6\uff0c\u5199\u5165\u4f1a\u5931\u8d25\uff0cNebulaGraph\u5c06\u62a5\u9519\u3002 \u8f6c\u4e49\u5b57\u7b26 \u00b6 \u5b57\u7b26\u4e32\u4e2d\u4e0d\u652f\u6301\u76f4\u63a5\u6362\u884c\uff0c\u53ef\u4ee5\u4f7f\u7528\u8f6c\u4e49\u5b57\u7b26\u5b9e\u73b0\uff0c\u4f8b\u5982\uff1a \"\\n\\t\\r\\b\\f\" \"\\110ello world\" OpenCypher \u517c\u5bb9\u6027 \u00b6 openCypher\u3001Cypher \u548c nGQL \u4e4b\u95f4\u6709\u4e00\u4e9b\u7ec6\u5fae\u533a\u522b\uff0c\u4f8b\u5982\u4e0b\u9762 openCypher \u7684\u793a\u4f8b\uff0c\u4e0d\u80fd\u5c06\u5355\u5f15\u53f7\u66ff\u6362\u4e3a\u53cc\u5f15\u53f7\u3002 # File: Literals.feature Feature: Literals Background: Given any graph Scenario: Return a single-quoted string When executing query: \"\"\" RETURN '' AS literal \"\"\" Then the result should be, in any order: | literal | | '' | # Note: it should return single-quotes as openCypher required. And no side effects Cypher \u7684\u8fd4\u56de\u7ed3\u679c\u540c\u65f6\u652f\u6301\u5355\u5f15\u53f7\u548c\u53cc\u5f15\u53f7\uff0cnGQL \u9075\u5faa Cypher \u7684\u65b9\u5f0f\u3002 nebula > YIELD '' AS quote1, \"\" AS quote2, \"'\" AS quote3, '\"' AS quote4 +--------+--------+--------+--------+ | quote1 | quote2 | quote3 | quote4 | +--------+--------+--------+--------+ | \"\" | \"\" | \"'\" | \"\"\" | +--------+--------+--------+--------+","title":"\u5b57\u7b26\u4e32"},{"location":"3.ngql-guide/3.data-types/3.string/#_1","text":"NebulaGraph\u652f\u6301\u5b9a\u957f\u5b57\u7b26\u4e32\u548c\u53d8\u957f\u5b57\u7b26\u4e32\u3002","title":"\u5b57\u7b26\u4e32"},{"location":"3.ngql-guide/3.data-types/3.string/#_2","text":"nGQL \u4e2d\u7684\u5b57\u7b26\u4e32\u58f0\u660e\u65b9\u5f0f\u5982\u4e0b\uff1a \u4f7f\u7528\u5173\u952e\u5b57 STRING \u58f0\u660e\u53d8\u957f\u5b57\u7b26\u4e32\u3002 \u4f7f\u7528\u5173\u952e\u5b57 FIXED_STRING(<length>) \u58f0\u660e\u5b9a\u957f\u5b57\u7b26\u4e32\uff0c <length> \u4e3a\u5b57\u7b26\u4e32\u957f\u5ea6\uff0c\u4f8b\u5982 FIXED_STRING(32) \u3002 \u5b57\u7b26\u4e32\u7684\u8868\u793a\u65b9\u5f0f\u4e3a\u7528\u53cc\u5f15\u53f7\u6216\u5355\u5f15\u53f7\u5305\u88f9\uff0c\u4f8b\u5982 \"Hello, Cooper\" \u6216 'Hello, Cooper' \u3002","title":"\u58f0\u660e\u4e0e\u8868\u793a\u65b9\u5f0f"},{"location":"3.ngql-guide/3.data-types/3.string/#_3","text":"nGQL \u652f\u6301\u4ee5\u5982\u4e0b\u65b9\u5f0f\u4f7f\u7528\u5b57\u7b26\u4e32\uff1a \u5c06 VID \u7684\u6570\u636e\u7c7b\u578b\u5b9a\u4e49\u4e3a\u5b9a\u957f\u5b57\u7b26\u4e32\u3002 \u5c06\u53d8\u957f\u5b57\u7b26\u4e32\u8bbe\u7f6e\u4e3a Schema \u540d\u79f0\uff0c\u5305\u62ec\u56fe\u7a7a\u95f4\u3001Tag\u3001Edge type \u548c\u5c5e\u6027\u7684\u540d\u79f0\u3002 \u5c06\u5c5e\u6027\u503c\u7684\u6570\u636e\u7c7b\u578b\u5b9a\u4e49\u4e3a\u5b9a\u957f\u6216\u53d8\u957f\u5b57\u7b26\u4e32\u3002 \u4f8b\u5982\uff1a \u5c06\u5c5e\u6027\u503c\u7684\u7c7b\u578b\u5b9a\u4e49\u4e3a\u5b9a\u957f\u5b57\u7b26\u4e32 nebula> CREATE TAG IF NOT EXISTS t1 (p1 FIXED_STRING(10)); \u5c06\u5c5e\u6027\u503c\u7684\u7c7b\u578b\u5b9a\u4e49\u4e3a\u53d8\u957f\u5b57\u7b26\u4e32 nebula> CREATE TAG IF NOT EXISTS t2 (p2 STRING); \u5982\u679c\u5c1d\u8bd5\u5199\u5165\u7684\u5b9a\u957f\u5b57\u7b26\u4e32\u8d85\u51fa\u957f\u5ea6\u9650\u5236\uff1a \u5f53\u8be5\u5b9a\u957f\u5b57\u7b26\u4e32\u4e3a\u5c5e\u6027\u503c\u65f6\uff0c\u5199\u5165\u4f1a\u6210\u529f\uff0cNebulaGraph\u5c06\u622a\u65ad\u5b57\u7b26\u4e32\uff0c\u4ec5\u5b58\u5165\u7b26\u5408\u957f\u5ea6\u9650\u5236\u7684\u90e8\u5206\u3002 \u5f53\u8be5\u5b9a\u957f\u5b57\u7b26\u4e32\u4e3a VID \u65f6\uff0c\u5199\u5165\u4f1a\u5931\u8d25\uff0cNebulaGraph\u5c06\u62a5\u9519\u3002","title":"\u5b57\u7b26\u4e32\u8bfb\u5199"},{"location":"3.ngql-guide/3.data-types/3.string/#_4","text":"\u5b57\u7b26\u4e32\u4e2d\u4e0d\u652f\u6301\u76f4\u63a5\u6362\u884c\uff0c\u53ef\u4ee5\u4f7f\u7528\u8f6c\u4e49\u5b57\u7b26\u5b9e\u73b0\uff0c\u4f8b\u5982\uff1a \"\\n\\t\\r\\b\\f\" \"\\110ello world\"","title":"\u8f6c\u4e49\u5b57\u7b26"},{"location":"3.ngql-guide/3.data-types/3.string/#opencypher","text":"openCypher\u3001Cypher \u548c nGQL \u4e4b\u95f4\u6709\u4e00\u4e9b\u7ec6\u5fae\u533a\u522b\uff0c\u4f8b\u5982\u4e0b\u9762 openCypher \u7684\u793a\u4f8b\uff0c\u4e0d\u80fd\u5c06\u5355\u5f15\u53f7\u66ff\u6362\u4e3a\u53cc\u5f15\u53f7\u3002 # File: Literals.feature Feature: Literals Background: Given any graph Scenario: Return a single-quoted string When executing query: \"\"\" RETURN '' AS literal \"\"\" Then the result should be, in any order: | literal | | '' | # Note: it should return single-quotes as openCypher required. And no side effects Cypher \u7684\u8fd4\u56de\u7ed3\u679c\u540c\u65f6\u652f\u6301\u5355\u5f15\u53f7\u548c\u53cc\u5f15\u53f7\uff0cnGQL \u9075\u5faa Cypher \u7684\u65b9\u5f0f\u3002 nebula > YIELD '' AS quote1, \"\" AS quote2, \"'\" AS quote3, '\"' AS quote4 +--------+--------+--------+--------+ | quote1 | quote2 | quote3 | quote4 | +--------+--------+--------+--------+ | \"\" | \"\" | \"'\" | \"\"\" | +--------+--------+--------+--------+","title":"OpenCypher \u517c\u5bb9\u6027"},{"location":"3.ngql-guide/3.data-types/4.date-and-time/","text":"\u65e5\u671f\u548c\u65f6\u95f4\u7c7b\u578b \u00b6 \u672c\u6587\u4ecb\u7ecd\u65e5\u671f\u548c\u65f6\u95f4\u7684\u7c7b\u578b\uff0c\u5305\u62ec DATE \u3001 TIME \u3001 DATETIME \u3001 TIMESTAMP \u548c DURATION \u3002 \u6ce8\u610f\u4e8b\u9879 \u00b6 \u5728\u63d2\u5165\u65f6\u95f4\u7c7b\u578b\u7684\u5c5e\u6027\u503c\u65f6\uff0cNebulaGraph\u4f1a\u6839\u636e \u914d\u7f6e\u6587\u4ef6 \u4e2d timezone_name \u53c2\u6570\u6307\u5b9a\u7684\u65f6\u533a\uff0c\u5c06\u8be5 DATE \u3001 TIME \u3001 DATETIME \u8f6c\u6362\u6210\u76f8\u5e94\u7684\u4e16\u754c\u534f\u8c03\u65f6\u95f4\uff08UTC\uff09\u65f6\u95f4\u3002 Note \u5982\u9700\u4fee\u6539\u5f53\u524d\u65f6\u533a\uff0c\u8bf7\u540c\u65f6\u4fee\u6539\u6240\u6709\u670d\u52a1\u7684\u914d\u7f6e\u6587\u4ef6\u4e2d\u7684 timezone_name \u53c2\u6570\u3002 \u51fd\u6570 date() \u3001 time() \u548c datetime() \u53ef\u4ee5\u6307\u5b9a\u65f6\u533a\u8fdb\u884c\u8f6c\u6362\uff0c\u4f8b\u5982 datetime(\"2017-03-04 22:30:40.003000+08:00\") \u6216 datetime(\"2017-03-04T22:30:40.003000[Asia/Shanghai]\") \u3002 \u51fd\u6570 date() \u3001 time() \u3001 datetime() \u548c timestamp() \u53ef\u4ee5\u7528\u7a7a\u503c\u83b7\u53d6\u5f53\u524d\u7684\u65e5\u671f\u6216\u65f6\u95f4\u3002 \u51fd\u6570 date() \u3001 time() \u3001 datetime() \u548c duration() \u53ef\u4ee5\u7528\u5c5e\u6027\u540d\u79f0\u83b7\u53d6\u81ea\u8eab\u7684\u67d0\u4e00\u4e2a\u5177\u4f53\u5c5e\u6027\u503c\uff0c\u4f8b\u5982 date().month \u83b7\u53d6\u5f53\u524d\u6708\u4efd\u3001 time(\"02:59:40\").minute \u83b7\u53d6\u4f20\u5165\u65f6\u95f4\u7684\u5206\u949f\u6570\u3002 \u8fdb\u884c\u65f6\u95f4\u8fd0\u7b97\u65f6\u5efa\u8bae\u4f7f\u7528 duration() \u8ba1\u7b97\u65f6\u523b\u7684\u504f\u79fb\u3002\u6b64\u5916\u8fd8\u652f\u6301 date() \u548c date() \u7684\u52a0\u51cf\u3001 timestamp() \u548c timestamp() \u7684\u52a0\u51cf\u3002 \u8bbe\u7f6e\u65f6\u95f4\u7684\u5e74\u4efd\u4e3a\u8d1f\u6570\u65f6\uff0c\u9700\u8981\u4f7f\u7528 Map \u7c7b\u578b\u6570\u636e\u3002 openCypher \u517c\u5bb9\u6027 \u00b6 \u652f\u6301\u5e74\u3001\u6708\u3001\u65e5\u3001\u65f6\u3001\u5206\u3001\u79d2\u3001\u6beb\u79d2\u3001\u5fae\u79d2\uff0c\u4e0d\u652f\u6301\u7eb3\u79d2\u3002 \u4e0d\u652f\u6301\u51fd\u6570 localdatetime() \u3002 \u4e0d\u652f\u6301\u5927\u90e8\u5206\u5b57\u7b26\u4e32\u65f6\u95f4\u683c\u5f0f\uff0c\u652f\u6301 YYYY-MM-DDThh:mm:ss \u548c YYYY-MM-DD hh:mm:ss \u3002 \u652f\u6301\u5355\u4e2a\u6570\u5b57\u7684\u5b57\u7b26\u4e32\u65f6\u95f4\u683c\u5f0f\uff0c\u4f8b\u5982 time(\"1:1:1\") \u3002 DATE \u00b6 DATE \u5305\u542b\u65e5\u671f\uff0c\u4f46\u662f\u4e0d\u5305\u542b\u65f6\u95f4\u3002NebulaGraph\u68c0\u7d22\u548c\u663e\u793a DATE \u7684\u683c\u5f0f\u4e3a YYYY-MM-DD \u3002\u652f\u6301\u7684\u8303\u56f4\u662f -32768-01-01 \u5230 32767-12-31 \u3002 date() \u652f\u6301\u7684\u5c5e\u6027\u540d\u79f0\u5305\u62ec year \u3001 month \u548c day \u3002 date() \u652f\u6301\u8f93\u5165 YYYY \u3001 YYYY-MM \u6216 YYYY-MM-DD \uff0c\u672a\u8f93\u5165\u7684\u6708\u4efd\u6216\u65e5\u671f\u9ed8\u8ba4\u4e3a 01 \u3002 nebula> RETURN DATE ({ year:-123, month:12, day:3 }) ; +------------------------------------+ | date ({ year:- ( 123 ) ,month:12,day:3 }) | +------------------------------------+ | -123-12-03 | +------------------------------------+ nebula> RETURN DATE ( \"23333\" ) ; +---------------+ | date ( \"23333\" ) | +---------------+ | 23333 -01-01 | +---------------+ nebula> RETURN DATE ( \"2023-12-12\" ) - DATE ( \"2023-12-11\" ) ; +-----------------------------------------+ | ( date ( \"2023-12-12\" ) -date ( \"2023-12-11\" )) | +-----------------------------------------+ | 1 | +-----------------------------------------+ TIME \u00b6 TIME \u5305\u542b\u65f6\u95f4\uff0c\u4f46\u662f\u4e0d\u5305\u542b\u65e5\u671f\u3002NebulaGraph\u68c0\u7d22\u548c\u663e\u793a TIME \u7684\u683c\u5f0f\u4e3a hh:mm:ss.msmsmsususus \u3002\u652f\u6301\u7684\u8303\u56f4\u662f 00:00:00.000000 \u5230 23:59:59.999999 \u3002 time() \u652f\u6301\u7684\u5c5e\u6027\u540d\u79f0\u5305\u62ec hour \u3001 minute \u548c second \u3002 DATETIME \u00b6 DATETIME \u5305\u542b\u65e5\u671f\u548c\u65f6\u95f4\u3002NebulaGraph\u68c0\u7d22\u548c\u663e\u793a DATETIME \u7684\u683c\u5f0f\u4e3a YYYY-MM-DDThh:mm:ss.msmsmsususus \u3002\u652f\u6301\u7684\u8303\u56f4\u662f -32768-01-01T00:00:00.000000 \u5230 32767-12-31T23:59:59.999999 \u3002 datetime() \u652f\u6301\u7684\u5c5e\u6027\u540d\u79f0\u5305\u62ec year \u3001 month \u3001 day \u3001 hour \u3001 minute \u548c second \u3002 datetime() \u53ef\u5c06 TIMESTAMP \u7c7b\u578b\u7684\u65e5\u671f\u503c\u8f6c\u6362\u6210 DATETIME \u7c7b\u578b\u7684\u65e5\u671f\u503c\u3002 TIMESTAMP \u7c7b\u578b\u7684\u65e5\u671f\u503c\u53d6\u503c\u8303\u56f4\uff1a 0~9223372036 \u3002 datetime() \u652f\u6301 int \u7c7b\u578b\u7684\u53c2\u6570\uff0c\u8be5 int \u53c2\u6570\u8868\u793a\u65f6\u95f4\u6233\u3002 # \u83b7\u53d6\u5f53\u524d\u65f6\u95f4\u3002 nebula> RETURN datetime(); +----------------------------+ | datetime() | +----------------------------+ | 2022-08-29T06:37:08.933000 | +----------------------------+ # \u83b7\u53d6\u5f53\u524d\u65f6\u95f4\u7684\u5c0f\u65f6\u3002 nebula> RETURN datetime().hour; +-----------------+ | datetime().hour | +-----------------+ | 6 | +-----------------+ # \u5c06\u65f6\u95f4\u6233\u8f6c\u6362\u6210 DATETIME \u7c7b\u578b\u7684\u683c\u5f0f\u3002 nebula> RETURN datetime(timestamp(1625469277)); +---------------------------------+ | datetime(timestamp(1625469277)) | +---------------------------------+ | 2021-07-05T07:14:37.000000 | +---------------------------------+ nebula> RETURN datetime(1625469277); +----------------------------+ | datetime(1625469277) | +----------------------------+ | 2021-07-05T07:14:37.000000 | +----------------------------+ TIMESTAMP \u00b6 TIMESTAMP \u5305\u542b\u65e5\u671f\u548c\u65f6\u95f4\u3002\u652f\u6301\u7684\u8303\u56f4\u662f UTC \u65f6\u95f4\u7684 1970-01-01T00:00:01 \u5230 2262-04-11T23:47:16 \u3002 TIMESTAMP \u8fd8\u6709\u4ee5\u4e0b\u7279\u70b9\uff1a \u4ee5\u65f6\u95f4\u6233\u5f62\u5f0f\u5b58\u50a8\u548c\u663e\u793a\u3002\u4f8b\u5982 1615974839 \uff0c\u8868\u793a 2021-03-17T17:53:59 \u3002 \u67e5\u8be2 TIMESTAMP \u7c7b\u578b\u5c5e\u6027\u503c\u7684\u65b9\u5f0f\u5305\u62ec\u65f6\u95f4\u6233\u6574\u6570\u548c timestamp() \u51fd\u6570\u3002 \u63d2\u5165 TIMESTAMP \u7c7b\u578b\u5c5e\u6027\u503c\u7684\u65b9\u5f0f\u5305\u62ec\u65f6\u95f4\u6233\u6574\u6570\u3001 timestamp() \u51fd\u6570\u548c now() \u51fd\u6570\u3002 timestamp() \u51fd\u6570\u652f\u6301\u4f20\u5165\u7a7a\u503c\u83b7\u53d6\u5f53\u524d\u65f6\u95f4\u6233\uff1b\u540c\u65f6\u652f\u6301\u4f20\u5165\u6574\u6570\u4ee5\u6807\u8bc6\u8be5\u6574\u6570\u4e3a\u65f6\u95f4\u6233\uff0c\u6574\u6570\u53d6\u503c\uff1a 0~9223372036 \u3002 timestamp() \u51fd\u6570\u53ef\u5c06 DATETIME \u7c7b\u578b\u7684\u65e5\u671f\u503c\u8f6c\u6362\u6210 TIMESTAMP \u7c7b\u578b\u7684\u65e5\u671f\u503c\uff0c\u4e14\u4f20\u5165\u7684 DATETIME \u7c7b\u578b\u7684\u65e5\u671f\u503c\u4e3a string \u7c7b\u578b\u3002 \u5e95\u5c42\u5b58\u50a8\u7684\u6570\u636e\u683c\u5f0f\u4e3a 64 \u4f4d int \u3002 # \u4f20\u5165\u5f53\u524d\u65f6\u95f4\u3002 nebula> RETURN timestamp(); +-------------+ | timestamp() | +-------------+ | 1625469277 | +-------------+ # \u4f20\u5165\u6307\u5b9a\u65f6\u95f4\u3002 nebula> RETURN timestamp(\"2022-01-05T06:18:43\"); +----------------------------------+ | timestamp(\"2022-01-05T06:18:43\") | +----------------------------------+ | 1641363523 | +----------------------------------+ # \u4f20\u5165 datetime()\u3002 nebula> RETURN timestamp(datetime(\"2022-08-29T07:53:10.939000\")); +---------------------------------------------------+ | timestamp(datetime(\"2022-08-29T07:53:10.939000\")) | +---------------------------------------------------+ | 1661759590 | +---------------------------------------------------+ Note \u4f20\u5165 timestamp() \u51fd\u6570\u7684\u65f6\u95f4\u5b57\u7b26\u4e32\u4e0d\u652f\u6301\u5305\u542b\u6beb\u79d2\u548c\u5fae\u79d2\uff0c\u4f46\u662f\u901a\u8fc7 timestamp(datetime()) \u4f20\u5165\u7684\u65f6\u95f4\u5b57\u7b26\u4e32\u652f\u6301\u5305\u542b\u6beb\u79d2\u548c\u5fae\u79d2\u3002 DURATION \u00b6 DURATION \u662f\u4e00\u6bb5\u8fde\u7eed\u7684\u65f6\u95f4\uff0c\u7531 years \u3001 months \u3001 days \u3001 hours \u3001 minutes \u3001 seconds \u516d\u4e2aKey\u81ea\u7531\u7ec4\u5408\u6210\u7684Map\u7c7b\u578b\u6570\u636e\u8868\u793a\u3002\u4f8b\u5982 duration({years: 12, months: 5, days: 14, hours: 16, minutes: 12, seconds: 70}) \u3002 DURATION \u8fd8\u6709\u4ee5\u4e0b\u7279\u70b9\uff1a \u4e0d\u652f\u6301\u4e3a DURATION \u7c7b\u578b\u6570\u636e\u521b\u5efa\u7d22\u5f15\u3002 \u53ef\u4ee5\u7528\u4e8e\u5bf9\u6307\u5b9a\u65f6\u95f4\u8fdb\u884c\u8ba1\u7b97\u3002 \u793a\u4f8b \u00b6 \u521b\u5efa Tag\uff0c\u540d\u79f0\u4e3a date1 \uff0c\u5305\u542b DATE \u3001 TIME \u548c DATETIME \u4e09\u79cd\u7c7b\u578b\u3002 nebula> CREATE TAG IF NOT EXISTS date1(p1 date, p2 time, p3 datetime); \u63d2\u5165\u70b9\uff0c\u540d\u79f0\u4e3a test1 \u3002 nebula> INSERT VERTEX date1(p1, p2, p3) VALUES \"test1\":(date(\"2021-03-17\"), time(\"17:53:59\"), datetime(\"2017-03-04T22:30:40.003000[Asia/Shanghai]\")); \u67e5\u8be2 test1 \u7684\u5c5e\u6027 p1 \u662f\u5426\u4e3a 2021-03-17 \u3002 nebula> MATCH (v:date1) RETURN v.date1.p1 == date(\"2021-03-17\"); +----------------------------------+ | (v.date1.p1==date(\"2021-03-17\")) | +----------------------------------+ | true | +----------------------------------+ \u83b7\u53d6 test1 \u7684\u5c5e\u6027 p1 \u7684\u6708\u4efd\u3002 nebula> CREATE TAG INDEX IF NOT EXISTS date1_index ON date1(p1); nebula> REBUILD TAG INDEX date1_index; nebula> MATCH (v:date1) RETURN v.date1.p1.month; +------------------+ | v.date1.p1.month | +------------------+ | 3 | +------------------+ \u67e5\u627e Tag date1 \u4e2d\u5c5e\u6027 p3 \u5c0f\u4e8e 2023-01-01T00:00:00.000000 \u7684\u503c\u3002 nebula> MATCH (v:date1) \\ WHERE v.date1.p3 < datetime(\"2023-01-01T00:00:00.000000\") \\ RETURN v.date1.p3; +----------------------------+ | v.date1.p3 | +----------------------------+ | 2017-03-04T14:30:40.003000 | +----------------------------+ \u521b\u5efa Tag\uff0c\u540d\u79f0\u4e3a school \uff0c\u5305\u542b TIMESTAMP \u7c7b\u578b\u3002 nebula> CREATE TAG IF NOT EXISTS school(name string , found_time timestamp); \u63d2\u5165\u70b9\uff0c\u540d\u79f0\u4e3a DUT \uff0c\u5b58\u50a8\u65f6\u95f4\u4e3a \"1988-03-01T08:00:00\" \u3002 # \u65f6\u95f4\u6233\u5f62\u5f0f\u63d2\u5165\uff0c1988-03-01T08:00:00 \u5bf9\u5e94\u7684\u65f6\u95f4\u6233\u4e3a 573177600\uff0c\u8f6c\u6362\u4e3a UTC \u65f6\u95f4\u4e3a 573206400\u3002 nebula> INSERT VERTEX school(name, found_time) VALUES \"DUT\":(\"DUT\", 573206400); # \u65e5\u671f\u548c\u65f6\u95f4\u683c\u5f0f\u63d2\u5165\u3002 nebula> INSERT VERTEX school(name, found_time) VALUES \"DUT\":(\"DUT\", timestamp(\"1988-03-01T08:00:00\")); \u63d2\u5165\u70b9\uff0c\u540d\u79f0\u4e3a dut \uff0c\u7528 now() \u6216 timestamp() \u51fd\u6570\u5b58\u50a8\u65f6\u95f4\u3002 # \u7528 now() \u51fd\u6570\u5b58\u50a8\u65f6\u95f4 nebula> INSERT VERTEX school(name, found_time) VALUES \"dut\":(\"dut\", now()); # \u7528 timestamp() \u51fd\u6570\u5b58\u50a8\u65f6\u95f4 nebula> INSERT VERTEX school(name, found_time) VALUES \"dut\":(\"dut\", timestamp()); \u8fd8\u53ef\u4ee5\u4f7f\u7528 WITH \u8bed\u53e5\u8bbe\u7f6e\u5177\u4f53\u65e5\u671f\u65f6\u95f4\u6216\u8fdb\u884c\u8ba1\u7b97\uff0c\u4f8b\u5982\uff1a nebula> WITH time({hour: 12, minute: 31, second: 14, millisecond:111, microsecond: 222}) AS d RETURN d; +-----------------+ | d | +-----------------+ | 12:31:14.111222 | +-----------------+ nebula> WITH date({year: 1984, month: 10, day: 11}) AS x RETURN x + 1; +------------+ | (x+1) | +------------+ | 1984-10-12 | +------------+ nebula> WITH date('1984-10-11') as x, duration({years: 12, days: 14, hours: 99, minutes: 12}) as d \\ RETURN x + d AS sum, x - d AS diff; +------------+------------+ | sum | diff | +------------+------------+ | 1996-10-29 | 1972-09-23 | +------------+------------+","title":"\u65e5\u671f\u65f6\u95f4"},{"location":"3.ngql-guide/3.data-types/4.date-and-time/#_1","text":"\u672c\u6587\u4ecb\u7ecd\u65e5\u671f\u548c\u65f6\u95f4\u7684\u7c7b\u578b\uff0c\u5305\u62ec DATE \u3001 TIME \u3001 DATETIME \u3001 TIMESTAMP \u548c DURATION \u3002","title":"\u65e5\u671f\u548c\u65f6\u95f4\u7c7b\u578b"},{"location":"3.ngql-guide/3.data-types/4.date-and-time/#_2","text":"\u5728\u63d2\u5165\u65f6\u95f4\u7c7b\u578b\u7684\u5c5e\u6027\u503c\u65f6\uff0cNebulaGraph\u4f1a\u6839\u636e \u914d\u7f6e\u6587\u4ef6 \u4e2d timezone_name \u53c2\u6570\u6307\u5b9a\u7684\u65f6\u533a\uff0c\u5c06\u8be5 DATE \u3001 TIME \u3001 DATETIME \u8f6c\u6362\u6210\u76f8\u5e94\u7684\u4e16\u754c\u534f\u8c03\u65f6\u95f4\uff08UTC\uff09\u65f6\u95f4\u3002 Note \u5982\u9700\u4fee\u6539\u5f53\u524d\u65f6\u533a\uff0c\u8bf7\u540c\u65f6\u4fee\u6539\u6240\u6709\u670d\u52a1\u7684\u914d\u7f6e\u6587\u4ef6\u4e2d\u7684 timezone_name \u53c2\u6570\u3002 \u51fd\u6570 date() \u3001 time() \u548c datetime() \u53ef\u4ee5\u6307\u5b9a\u65f6\u533a\u8fdb\u884c\u8f6c\u6362\uff0c\u4f8b\u5982 datetime(\"2017-03-04 22:30:40.003000+08:00\") \u6216 datetime(\"2017-03-04T22:30:40.003000[Asia/Shanghai]\") \u3002 \u51fd\u6570 date() \u3001 time() \u3001 datetime() \u548c timestamp() \u53ef\u4ee5\u7528\u7a7a\u503c\u83b7\u53d6\u5f53\u524d\u7684\u65e5\u671f\u6216\u65f6\u95f4\u3002 \u51fd\u6570 date() \u3001 time() \u3001 datetime() \u548c duration() \u53ef\u4ee5\u7528\u5c5e\u6027\u540d\u79f0\u83b7\u53d6\u81ea\u8eab\u7684\u67d0\u4e00\u4e2a\u5177\u4f53\u5c5e\u6027\u503c\uff0c\u4f8b\u5982 date().month \u83b7\u53d6\u5f53\u524d\u6708\u4efd\u3001 time(\"02:59:40\").minute \u83b7\u53d6\u4f20\u5165\u65f6\u95f4\u7684\u5206\u949f\u6570\u3002 \u8fdb\u884c\u65f6\u95f4\u8fd0\u7b97\u65f6\u5efa\u8bae\u4f7f\u7528 duration() \u8ba1\u7b97\u65f6\u523b\u7684\u504f\u79fb\u3002\u6b64\u5916\u8fd8\u652f\u6301 date() \u548c date() \u7684\u52a0\u51cf\u3001 timestamp() \u548c timestamp() \u7684\u52a0\u51cf\u3002 \u8bbe\u7f6e\u65f6\u95f4\u7684\u5e74\u4efd\u4e3a\u8d1f\u6570\u65f6\uff0c\u9700\u8981\u4f7f\u7528 Map \u7c7b\u578b\u6570\u636e\u3002","title":"\u6ce8\u610f\u4e8b\u9879"},{"location":"3.ngql-guide/3.data-types/4.date-and-time/#opencypher","text":"\u652f\u6301\u5e74\u3001\u6708\u3001\u65e5\u3001\u65f6\u3001\u5206\u3001\u79d2\u3001\u6beb\u79d2\u3001\u5fae\u79d2\uff0c\u4e0d\u652f\u6301\u7eb3\u79d2\u3002 \u4e0d\u652f\u6301\u51fd\u6570 localdatetime() \u3002 \u4e0d\u652f\u6301\u5927\u90e8\u5206\u5b57\u7b26\u4e32\u65f6\u95f4\u683c\u5f0f\uff0c\u652f\u6301 YYYY-MM-DDThh:mm:ss \u548c YYYY-MM-DD hh:mm:ss \u3002 \u652f\u6301\u5355\u4e2a\u6570\u5b57\u7684\u5b57\u7b26\u4e32\u65f6\u95f4\u683c\u5f0f\uff0c\u4f8b\u5982 time(\"1:1:1\") \u3002","title":"openCypher \u517c\u5bb9\u6027"},{"location":"3.ngql-guide/3.data-types/4.date-and-time/#date","text":"DATE \u5305\u542b\u65e5\u671f\uff0c\u4f46\u662f\u4e0d\u5305\u542b\u65f6\u95f4\u3002NebulaGraph\u68c0\u7d22\u548c\u663e\u793a DATE \u7684\u683c\u5f0f\u4e3a YYYY-MM-DD \u3002\u652f\u6301\u7684\u8303\u56f4\u662f -32768-01-01 \u5230 32767-12-31 \u3002 date() \u652f\u6301\u7684\u5c5e\u6027\u540d\u79f0\u5305\u62ec year \u3001 month \u548c day \u3002 date() \u652f\u6301\u8f93\u5165 YYYY \u3001 YYYY-MM \u6216 YYYY-MM-DD \uff0c\u672a\u8f93\u5165\u7684\u6708\u4efd\u6216\u65e5\u671f\u9ed8\u8ba4\u4e3a 01 \u3002 nebula> RETURN DATE ({ year:-123, month:12, day:3 }) ; +------------------------------------+ | date ({ year:- ( 123 ) ,month:12,day:3 }) | +------------------------------------+ | -123-12-03 | +------------------------------------+ nebula> RETURN DATE ( \"23333\" ) ; +---------------+ | date ( \"23333\" ) | +---------------+ | 23333 -01-01 | +---------------+ nebula> RETURN DATE ( \"2023-12-12\" ) - DATE ( \"2023-12-11\" ) ; +-----------------------------------------+ | ( date ( \"2023-12-12\" ) -date ( \"2023-12-11\" )) | +-----------------------------------------+ | 1 | +-----------------------------------------+","title":"DATE"},{"location":"3.ngql-guide/3.data-types/4.date-and-time/#time","text":"TIME \u5305\u542b\u65f6\u95f4\uff0c\u4f46\u662f\u4e0d\u5305\u542b\u65e5\u671f\u3002NebulaGraph\u68c0\u7d22\u548c\u663e\u793a TIME \u7684\u683c\u5f0f\u4e3a hh:mm:ss.msmsmsususus \u3002\u652f\u6301\u7684\u8303\u56f4\u662f 00:00:00.000000 \u5230 23:59:59.999999 \u3002 time() \u652f\u6301\u7684\u5c5e\u6027\u540d\u79f0\u5305\u62ec hour \u3001 minute \u548c second \u3002","title":"TIME"},{"location":"3.ngql-guide/3.data-types/4.date-and-time/#datetime","text":"DATETIME \u5305\u542b\u65e5\u671f\u548c\u65f6\u95f4\u3002NebulaGraph\u68c0\u7d22\u548c\u663e\u793a DATETIME \u7684\u683c\u5f0f\u4e3a YYYY-MM-DDThh:mm:ss.msmsmsususus \u3002\u652f\u6301\u7684\u8303\u56f4\u662f -32768-01-01T00:00:00.000000 \u5230 32767-12-31T23:59:59.999999 \u3002 datetime() \u652f\u6301\u7684\u5c5e\u6027\u540d\u79f0\u5305\u62ec year \u3001 month \u3001 day \u3001 hour \u3001 minute \u548c second \u3002 datetime() \u53ef\u5c06 TIMESTAMP \u7c7b\u578b\u7684\u65e5\u671f\u503c\u8f6c\u6362\u6210 DATETIME \u7c7b\u578b\u7684\u65e5\u671f\u503c\u3002 TIMESTAMP \u7c7b\u578b\u7684\u65e5\u671f\u503c\u53d6\u503c\u8303\u56f4\uff1a 0~9223372036 \u3002 datetime() \u652f\u6301 int \u7c7b\u578b\u7684\u53c2\u6570\uff0c\u8be5 int \u53c2\u6570\u8868\u793a\u65f6\u95f4\u6233\u3002 # \u83b7\u53d6\u5f53\u524d\u65f6\u95f4\u3002 nebula> RETURN datetime(); +----------------------------+ | datetime() | +----------------------------+ | 2022-08-29T06:37:08.933000 | +----------------------------+ # \u83b7\u53d6\u5f53\u524d\u65f6\u95f4\u7684\u5c0f\u65f6\u3002 nebula> RETURN datetime().hour; +-----------------+ | datetime().hour | +-----------------+ | 6 | +-----------------+ # \u5c06\u65f6\u95f4\u6233\u8f6c\u6362\u6210 DATETIME \u7c7b\u578b\u7684\u683c\u5f0f\u3002 nebula> RETURN datetime(timestamp(1625469277)); +---------------------------------+ | datetime(timestamp(1625469277)) | +---------------------------------+ | 2021-07-05T07:14:37.000000 | +---------------------------------+ nebula> RETURN datetime(1625469277); +----------------------------+ | datetime(1625469277) | +----------------------------+ | 2021-07-05T07:14:37.000000 | +----------------------------+","title":"DATETIME"},{"location":"3.ngql-guide/3.data-types/4.date-and-time/#timestamp","text":"TIMESTAMP \u5305\u542b\u65e5\u671f\u548c\u65f6\u95f4\u3002\u652f\u6301\u7684\u8303\u56f4\u662f UTC \u65f6\u95f4\u7684 1970-01-01T00:00:01 \u5230 2262-04-11T23:47:16 \u3002 TIMESTAMP \u8fd8\u6709\u4ee5\u4e0b\u7279\u70b9\uff1a \u4ee5\u65f6\u95f4\u6233\u5f62\u5f0f\u5b58\u50a8\u548c\u663e\u793a\u3002\u4f8b\u5982 1615974839 \uff0c\u8868\u793a 2021-03-17T17:53:59 \u3002 \u67e5\u8be2 TIMESTAMP \u7c7b\u578b\u5c5e\u6027\u503c\u7684\u65b9\u5f0f\u5305\u62ec\u65f6\u95f4\u6233\u6574\u6570\u548c timestamp() \u51fd\u6570\u3002 \u63d2\u5165 TIMESTAMP \u7c7b\u578b\u5c5e\u6027\u503c\u7684\u65b9\u5f0f\u5305\u62ec\u65f6\u95f4\u6233\u6574\u6570\u3001 timestamp() \u51fd\u6570\u548c now() \u51fd\u6570\u3002 timestamp() \u51fd\u6570\u652f\u6301\u4f20\u5165\u7a7a\u503c\u83b7\u53d6\u5f53\u524d\u65f6\u95f4\u6233\uff1b\u540c\u65f6\u652f\u6301\u4f20\u5165\u6574\u6570\u4ee5\u6807\u8bc6\u8be5\u6574\u6570\u4e3a\u65f6\u95f4\u6233\uff0c\u6574\u6570\u53d6\u503c\uff1a 0~9223372036 \u3002 timestamp() \u51fd\u6570\u53ef\u5c06 DATETIME \u7c7b\u578b\u7684\u65e5\u671f\u503c\u8f6c\u6362\u6210 TIMESTAMP \u7c7b\u578b\u7684\u65e5\u671f\u503c\uff0c\u4e14\u4f20\u5165\u7684 DATETIME \u7c7b\u578b\u7684\u65e5\u671f\u503c\u4e3a string \u7c7b\u578b\u3002 \u5e95\u5c42\u5b58\u50a8\u7684\u6570\u636e\u683c\u5f0f\u4e3a 64 \u4f4d int \u3002 # \u4f20\u5165\u5f53\u524d\u65f6\u95f4\u3002 nebula> RETURN timestamp(); +-------------+ | timestamp() | +-------------+ | 1625469277 | +-------------+ # \u4f20\u5165\u6307\u5b9a\u65f6\u95f4\u3002 nebula> RETURN timestamp(\"2022-01-05T06:18:43\"); +----------------------------------+ | timestamp(\"2022-01-05T06:18:43\") | +----------------------------------+ | 1641363523 | +----------------------------------+ # \u4f20\u5165 datetime()\u3002 nebula> RETURN timestamp(datetime(\"2022-08-29T07:53:10.939000\")); +---------------------------------------------------+ | timestamp(datetime(\"2022-08-29T07:53:10.939000\")) | +---------------------------------------------------+ | 1661759590 | +---------------------------------------------------+ Note \u4f20\u5165 timestamp() \u51fd\u6570\u7684\u65f6\u95f4\u5b57\u7b26\u4e32\u4e0d\u652f\u6301\u5305\u542b\u6beb\u79d2\u548c\u5fae\u79d2\uff0c\u4f46\u662f\u901a\u8fc7 timestamp(datetime()) \u4f20\u5165\u7684\u65f6\u95f4\u5b57\u7b26\u4e32\u652f\u6301\u5305\u542b\u6beb\u79d2\u548c\u5fae\u79d2\u3002","title":"TIMESTAMP"},{"location":"3.ngql-guide/3.data-types/4.date-and-time/#duration","text":"DURATION \u662f\u4e00\u6bb5\u8fde\u7eed\u7684\u65f6\u95f4\uff0c\u7531 years \u3001 months \u3001 days \u3001 hours \u3001 minutes \u3001 seconds \u516d\u4e2aKey\u81ea\u7531\u7ec4\u5408\u6210\u7684Map\u7c7b\u578b\u6570\u636e\u8868\u793a\u3002\u4f8b\u5982 duration({years: 12, months: 5, days: 14, hours: 16, minutes: 12, seconds: 70}) \u3002 DURATION \u8fd8\u6709\u4ee5\u4e0b\u7279\u70b9\uff1a \u4e0d\u652f\u6301\u4e3a DURATION \u7c7b\u578b\u6570\u636e\u521b\u5efa\u7d22\u5f15\u3002 \u53ef\u4ee5\u7528\u4e8e\u5bf9\u6307\u5b9a\u65f6\u95f4\u8fdb\u884c\u8ba1\u7b97\u3002","title":"DURATION"},{"location":"3.ngql-guide/3.data-types/4.date-and-time/#_3","text":"\u521b\u5efa Tag\uff0c\u540d\u79f0\u4e3a date1 \uff0c\u5305\u542b DATE \u3001 TIME \u548c DATETIME \u4e09\u79cd\u7c7b\u578b\u3002 nebula> CREATE TAG IF NOT EXISTS date1(p1 date, p2 time, p3 datetime); \u63d2\u5165\u70b9\uff0c\u540d\u79f0\u4e3a test1 \u3002 nebula> INSERT VERTEX date1(p1, p2, p3) VALUES \"test1\":(date(\"2021-03-17\"), time(\"17:53:59\"), datetime(\"2017-03-04T22:30:40.003000[Asia/Shanghai]\")); \u67e5\u8be2 test1 \u7684\u5c5e\u6027 p1 \u662f\u5426\u4e3a 2021-03-17 \u3002 nebula> MATCH (v:date1) RETURN v.date1.p1 == date(\"2021-03-17\"); +----------------------------------+ | (v.date1.p1==date(\"2021-03-17\")) | +----------------------------------+ | true | +----------------------------------+ \u83b7\u53d6 test1 \u7684\u5c5e\u6027 p1 \u7684\u6708\u4efd\u3002 nebula> CREATE TAG INDEX IF NOT EXISTS date1_index ON date1(p1); nebula> REBUILD TAG INDEX date1_index; nebula> MATCH (v:date1) RETURN v.date1.p1.month; +------------------+ | v.date1.p1.month | +------------------+ | 3 | +------------------+ \u67e5\u627e Tag date1 \u4e2d\u5c5e\u6027 p3 \u5c0f\u4e8e 2023-01-01T00:00:00.000000 \u7684\u503c\u3002 nebula> MATCH (v:date1) \\ WHERE v.date1.p3 < datetime(\"2023-01-01T00:00:00.000000\") \\ RETURN v.date1.p3; +----------------------------+ | v.date1.p3 | +----------------------------+ | 2017-03-04T14:30:40.003000 | +----------------------------+ \u521b\u5efa Tag\uff0c\u540d\u79f0\u4e3a school \uff0c\u5305\u542b TIMESTAMP \u7c7b\u578b\u3002 nebula> CREATE TAG IF NOT EXISTS school(name string , found_time timestamp); \u63d2\u5165\u70b9\uff0c\u540d\u79f0\u4e3a DUT \uff0c\u5b58\u50a8\u65f6\u95f4\u4e3a \"1988-03-01T08:00:00\" \u3002 # \u65f6\u95f4\u6233\u5f62\u5f0f\u63d2\u5165\uff0c1988-03-01T08:00:00 \u5bf9\u5e94\u7684\u65f6\u95f4\u6233\u4e3a 573177600\uff0c\u8f6c\u6362\u4e3a UTC \u65f6\u95f4\u4e3a 573206400\u3002 nebula> INSERT VERTEX school(name, found_time) VALUES \"DUT\":(\"DUT\", 573206400); # \u65e5\u671f\u548c\u65f6\u95f4\u683c\u5f0f\u63d2\u5165\u3002 nebula> INSERT VERTEX school(name, found_time) VALUES \"DUT\":(\"DUT\", timestamp(\"1988-03-01T08:00:00\")); \u63d2\u5165\u70b9\uff0c\u540d\u79f0\u4e3a dut \uff0c\u7528 now() \u6216 timestamp() \u51fd\u6570\u5b58\u50a8\u65f6\u95f4\u3002 # \u7528 now() \u51fd\u6570\u5b58\u50a8\u65f6\u95f4 nebula> INSERT VERTEX school(name, found_time) VALUES \"dut\":(\"dut\", now()); # \u7528 timestamp() \u51fd\u6570\u5b58\u50a8\u65f6\u95f4 nebula> INSERT VERTEX school(name, found_time) VALUES \"dut\":(\"dut\", timestamp()); \u8fd8\u53ef\u4ee5\u4f7f\u7528 WITH \u8bed\u53e5\u8bbe\u7f6e\u5177\u4f53\u65e5\u671f\u65f6\u95f4\u6216\u8fdb\u884c\u8ba1\u7b97\uff0c\u4f8b\u5982\uff1a nebula> WITH time({hour: 12, minute: 31, second: 14, millisecond:111, microsecond: 222}) AS d RETURN d; +-----------------+ | d | +-----------------+ | 12:31:14.111222 | +-----------------+ nebula> WITH date({year: 1984, month: 10, day: 11}) AS x RETURN x + 1; +------------+ | (x+1) | +------------+ | 1984-10-12 | +------------+ nebula> WITH date('1984-10-11') as x, duration({years: 12, days: 14, hours: 99, minutes: 12}) as d \\ RETURN x + d AS sum, x - d AS diff; +------------+------------+ | sum | diff | +------------+------------+ | 1996-10-29 | 1972-09-23 | +------------+------------+","title":"\u793a\u4f8b"},{"location":"3.ngql-guide/3.data-types/5.null/","text":"NULL \u00b6 \u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u63d2\u5165\u70b9\u6216\u8fb9\u65f6\uff0c\u5c5e\u6027\u503c\u53ef\u4ee5\u4e3a NULL \uff0c\u7528\u6237\u4e5f\u53ef\u4ee5\u8bbe\u7f6e\u5c5e\u6027\u503c\u4e0d\u5141\u8bb8\u4e3a NULL \uff08 NOT NULL \uff09\uff0c\u5373\u63d2\u5165\u70b9\u6216\u8fb9\u65f6\u5fc5\u987b\u8bbe\u7f6e\u8be5\u5c5e\u6027\u7684\u503c\uff0c\u9664\u975e\u521b\u5efa\u5c5e\u6027\u65f6\u5df2\u7ecf\u8bbe\u7f6e\u9ed8\u8ba4\u503c\u3002 NULL \u7684\u903b\u8f91\u64cd\u4f5c \u00b6 AND \u3001 OR \u3001 XOR \u548c NOT \u7684\u771f\u503c\u8868\u5982\u4e0b\u3002 a b a AND b a OR b a XOR b NOT a false false false false false true false null false null null true false true false true true true true false false true true false true null null true null false true true true true false false null false false null null null null null null null null null null true null true null null OpenCypher \u517c\u5bb9\u6027 \u00b6 NebulaGraph\u4e2d\uff0cNULL \u7684\u6bd4\u8f83\u548c\u64cd\u4f5c\u4e0e openCypher \u4e0d\u540c\uff0c\u540e\u7eed\u4e5f\u53ef\u80fd\u4f1a\u6709\u53d8\u5316\u3002 NULL \u7684\u6bd4\u8f83 \u00b6 NebulaGraph\u4e2d\uff0cNULL \u7684\u6bd4\u8f83\u64cd\u4f5c\u4e0d\u517c\u5bb9 openCypher\u3002 NULL \u7684\u64cd\u4f5c\u548c\u8fd4\u56de \u00b6 NebulaGraph\u4e2d\uff0c\u5bf9 NULL \u7684\u64cd\u4f5c\u4ee5\u53ca\u8fd4\u56de\u7ed3\u679c\u4e0d\u517c\u5bb9 openCypher\u3002 \u793a\u4f8b \u00b6 \u4f7f\u7528 NOT NULL \u00b6 \u521b\u5efa Tag\uff0c\u540d\u79f0\u4e3a player \uff0c\u6307\u5b9a\u5c5e\u6027 name \u4e3a NOT NULL \u3002 nebula> CREATE TAG IF NOT EXISTS player(name string NOT NULL, age int); \u4f7f\u7528 SHOW \u547d\u4ee4\u67e5\u770b\u521b\u5efa Tag \u8bed\u53e5\uff0c\u5c5e\u6027 name \u4e3a NOT NULL \uff0c\u5c5e\u6027 age \u4e3a\u9ed8\u8ba4\u7684 NULL \u3002 nebula> SHOW CREATE TAG player; +-----------+-----------------------------------+ | Tag | Create Tag | +-----------+-----------------------------------+ | \"student\" | \"CREATE TAG `player` ( | | | `name` string NOT NULL, | | | `age` int64 NULL | | | ) ttl_duration = 0, ttl_col = \"\"\" | +-----------+-----------------------------------+ \u63d2\u5165\u70b9 Kobe \uff0c\u5c5e\u6027 age \u53ef\u4ee5\u4e3a NULL \u3002 nebula> INSERT VERTEX player(name, age) VALUES \"Kobe\":(\"Kobe\",null); \u4f7f\u7528 NOT NULL \u5e76\u8bbe\u7f6e\u9ed8\u8ba4\u503c \u00b6 \u521b\u5efa Tag\uff0c\u540d\u79f0\u4e3a player \uff0c\u6307\u5b9a\u5c5e\u6027 age \u4e3a NOT NULL \uff0c\u5e76\u8bbe\u7f6e\u9ed8\u8ba4\u503c 18 \u3002 nebula> CREATE TAG IF NOT EXISTS player(name string, age int NOT NULL DEFAULT 18); \u63d2\u5165\u70b9 Kobe \uff0c\u53ea\u8bbe\u7f6e\u5c5e\u6027 name \u3002 nebula> INSERT VERTEX player(name) VALUES \"Kobe\":(\"Kobe\"); \u67e5\u8be2\u70b9 Kobe \uff0c\u5c5e\u6027 age \u4e3a\u9ed8\u8ba4\u503c 18 \u3002 nebula> FETCH PROP ON player \"Kobe\" YIELD properties(vertex); +--------------------------+ | properties(VERTEX) | +--------------------------+ | {age: 18, name: \"Kobe\"} | +--------------------------+","title":"NULL"},{"location":"3.ngql-guide/3.data-types/5.null/#null","text":"\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u63d2\u5165\u70b9\u6216\u8fb9\u65f6\uff0c\u5c5e\u6027\u503c\u53ef\u4ee5\u4e3a NULL \uff0c\u7528\u6237\u4e5f\u53ef\u4ee5\u8bbe\u7f6e\u5c5e\u6027\u503c\u4e0d\u5141\u8bb8\u4e3a NULL \uff08 NOT NULL \uff09\uff0c\u5373\u63d2\u5165\u70b9\u6216\u8fb9\u65f6\u5fc5\u987b\u8bbe\u7f6e\u8be5\u5c5e\u6027\u7684\u503c\uff0c\u9664\u975e\u521b\u5efa\u5c5e\u6027\u65f6\u5df2\u7ecf\u8bbe\u7f6e\u9ed8\u8ba4\u503c\u3002","title":"NULL"},{"location":"3.ngql-guide/3.data-types/5.null/#null_1","text":"AND \u3001 OR \u3001 XOR \u548c NOT \u7684\u771f\u503c\u8868\u5982\u4e0b\u3002 a b a AND b a OR b a XOR b NOT a false false false false false true false null false null null true false true false true true true true false false true true false true null null true null false true true true true false false null false false null null null null null null null null null null true null true null null","title":"NULL \u7684\u903b\u8f91\u64cd\u4f5c"},{"location":"3.ngql-guide/3.data-types/5.null/#opencypher","text":"NebulaGraph\u4e2d\uff0cNULL \u7684\u6bd4\u8f83\u548c\u64cd\u4f5c\u4e0e openCypher \u4e0d\u540c\uff0c\u540e\u7eed\u4e5f\u53ef\u80fd\u4f1a\u6709\u53d8\u5316\u3002","title":"OpenCypher \u517c\u5bb9\u6027"},{"location":"3.ngql-guide/3.data-types/5.null/#null_2","text":"NebulaGraph\u4e2d\uff0cNULL \u7684\u6bd4\u8f83\u64cd\u4f5c\u4e0d\u517c\u5bb9 openCypher\u3002","title":"NULL \u7684\u6bd4\u8f83"},{"location":"3.ngql-guide/3.data-types/5.null/#null_3","text":"NebulaGraph\u4e2d\uff0c\u5bf9 NULL \u7684\u64cd\u4f5c\u4ee5\u53ca\u8fd4\u56de\u7ed3\u679c\u4e0d\u517c\u5bb9 openCypher\u3002","title":"NULL \u7684\u64cd\u4f5c\u548c\u8fd4\u56de"},{"location":"3.ngql-guide/3.data-types/5.null/#_1","text":"","title":"\u793a\u4f8b"},{"location":"3.ngql-guide/3.data-types/5.null/#not_null","text":"\u521b\u5efa Tag\uff0c\u540d\u79f0\u4e3a player \uff0c\u6307\u5b9a\u5c5e\u6027 name \u4e3a NOT NULL \u3002 nebula> CREATE TAG IF NOT EXISTS player(name string NOT NULL, age int); \u4f7f\u7528 SHOW \u547d\u4ee4\u67e5\u770b\u521b\u5efa Tag \u8bed\u53e5\uff0c\u5c5e\u6027 name \u4e3a NOT NULL \uff0c\u5c5e\u6027 age \u4e3a\u9ed8\u8ba4\u7684 NULL \u3002 nebula> SHOW CREATE TAG player; +-----------+-----------------------------------+ | Tag | Create Tag | +-----------+-----------------------------------+ | \"student\" | \"CREATE TAG `player` ( | | | `name` string NOT NULL, | | | `age` int64 NULL | | | ) ttl_duration = 0, ttl_col = \"\"\" | +-----------+-----------------------------------+ \u63d2\u5165\u70b9 Kobe \uff0c\u5c5e\u6027 age \u53ef\u4ee5\u4e3a NULL \u3002 nebula> INSERT VERTEX player(name, age) VALUES \"Kobe\":(\"Kobe\",null);","title":"\u4f7f\u7528 NOT NULL"},{"location":"3.ngql-guide/3.data-types/5.null/#not_null_1","text":"\u521b\u5efa Tag\uff0c\u540d\u79f0\u4e3a player \uff0c\u6307\u5b9a\u5c5e\u6027 age \u4e3a NOT NULL \uff0c\u5e76\u8bbe\u7f6e\u9ed8\u8ba4\u503c 18 \u3002 nebula> CREATE TAG IF NOT EXISTS player(name string, age int NOT NULL DEFAULT 18); \u63d2\u5165\u70b9 Kobe \uff0c\u53ea\u8bbe\u7f6e\u5c5e\u6027 name \u3002 nebula> INSERT VERTEX player(name) VALUES \"Kobe\":(\"Kobe\"); \u67e5\u8be2\u70b9 Kobe \uff0c\u5c5e\u6027 age \u4e3a\u9ed8\u8ba4\u503c 18 \u3002 nebula> FETCH PROP ON player \"Kobe\" YIELD properties(vertex); +--------------------------+ | properties(VERTEX) | +--------------------------+ | {age: 18, name: \"Kobe\"} | +--------------------------+","title":"\u4f7f\u7528 NOT NULL \u5e76\u8bbe\u7f6e\u9ed8\u8ba4\u503c"},{"location":"3.ngql-guide/3.data-types/6.list/","text":"\u5217\u8868 \u00b6 \u5217\u8868\uff08List\uff09\u662f\u590d\u5408\u6570\u636e\u7c7b\u578b\uff0c\u4e00\u4e2a\u5217\u8868\u662f\u4e00\u7ec4\u5143\u7d20\u7684\u5e8f\u5217\uff0c\u53ef\u4ee5\u901a\u8fc7\u5143\u7d20\u5728\u5e8f\u5217\u4e2d\u7684\u4f4d\u7f6e\u8bbf\u95ee\u5217\u8868\u4e2d\u7684\u5143\u7d20\u3002 \u5217\u8868\u7528\u5de6\u65b9\u62ec\u53f7\uff08[\uff09\u548c\u53f3\u65b9\u62ec\u53f7\uff08]\uff09\u5305\u88f9\u591a\u4e2a\u5143\u7d20\uff0c\u5404\u4e2a\u5143\u7d20\u4e4b\u95f4\u7528\u82f1\u6587\u9017\u53f7\uff08,\uff09\u9694\u5f00\u3002\u5143\u7d20\u524d\u540e\u7684\u7a7a\u683c\u5728\u5217\u8868\u4e2d\u88ab\u5ffd\u7565\uff0c\u56e0\u6b64\u53ef\u4ee5\u4f7f\u7528\u6362\u884c\u7b26\u3001\u5236\u8868\u7b26\u548c\u7a7a\u683c\u8c03\u6574\u683c\u5f0f\u3002 OpenCypher \u517c\u5bb9\u6027 \u00b6 \u590d\u5408\u6570\u636e\u7c7b\u578b\uff08\u4f8b\u5982 List\u3001Set\u3001Map\uff09 \u4e0d\u80fd \u5b58\u50a8\u4e3a\u70b9\u6216\u8fb9\u7684\u5c5e\u6027\u3002 \u5217\u8868\u64cd\u4f5c \u00b6 \u5bf9\u5217\u8868\u8fdb\u884c\u64cd\u4f5c\u53ef\u4ee5\u4f7f\u7528\u9884\u8bbe\u7684 \u5217\u8868\u51fd\u6570 \uff0c\u4e5f\u53ef\u4ee5\u4f7f\u7528\u4e0b\u6807\u8868\u8fbe\u5f0f\u8fc7\u6ee4\u5217\u8868\u5185\u7684\u5143\u7d20\u3002 \u4e0b\u6807\u8868\u8fbe\u5f0f\u8bed\u6cd5 \u00b6 [M] [M..N] [M..] [..N] nGQL \u7684\u4e0b\u6807\u652f\u6301\u4ece\u524d\u5f80\u540e\u67e5\u8be2\uff0c\u4ece 0 \u5f00\u59cb\uff0c0 \u8868\u793a\u7b2c\u4e00\u4e2a\u5143\u7d20\uff0c1 \u8868\u793a\u7b2c\u4e8c\u4e2a\u5143\u7d20\uff0c\u4ee5\u6b64\u7c7b\u63a8\uff1b\u4e5f\u652f\u6301\u4ece\u540e\u5f80\u524d\u67e5\u8be2\uff0c\u4ece-1 \u5f00\u59cb\uff0c-1 \u8868\u793a\u6700\u540e\u4e00\u4e2a\u5143\u7d20\uff0c-2 \u8868\u793a\u5012\u6570\u7b2c\u4e8c\u4e2a\u5143\u7d20\uff0c\u4ee5\u6b64\u7c7b\u63a8\u3002 [M]\uff1a\u8868\u793a\u4e0b\u6807\u4e3a M \u7684\u5143\u7d20\u3002 [M..N]\uff1a\u8868\u793a M \u2264 \u4e0b\u6807 \uff1c N \u7684\u5143\u7d20\u3002 N \u4e3a 0 \u65f6\uff0c\u8fd4\u56de\u4e3a\u7a7a\u3002 [M..]\uff1a\u8868\u793a M \u2264 \u4e0b\u6807 \u7684\u5143\u7d20\u3002 [..N]\uff1a\u8868\u793a \u4e0b\u6807 \uff1c N \u7684\u5143\u7d20\u3002 N \u4e3a 0 \u65f6\uff0c\u8fd4\u56de\u4e3a\u7a7a\u3002 Note \u8d8a\u754c\u7684\u4e0b\u6807\u8fd4\u56de\u4e3a\u7a7a\uff0c\u672a\u8d8a\u754c\u7684\u53ef\u4ee5\u6b63\u5e38\u8fd4\u56de\u3002 M \u2265 N \u65f6\uff0c\u8fd4\u56de\u4e3a\u7a7a\u3002 \u67e5\u8be2\u5355\u4e2a\u5143\u7d20\u65f6\uff0c\u5982\u679c M \u4e3a null\uff0c\u8fd4\u56de\u62a5\u9519 BAD_TYPE \uff1b\u8303\u56f4\u67e5\u8be2\u65f6\uff0c M \u6216 N \u4e3a null\uff0c\u8fd4\u56de\u4e3a null \u3002 \u793a\u4f8b \u00b6 # \u8fd4\u56de\u5217\u8868 [1,2,3] nebula> RETURN list[1, 2, 3] AS a; +-----------+ | a | +-----------+ | [1, 2, 3] | +-----------+ # \u8fd4\u56de\u5217\u8868 [1,2,3,4,5] \u4e2d\u4f4d\u7f6e\u4e0b\u6807\u4e3a 3 \u7684\u5143\u7d20\u3002\u5217\u8868\u7684\u4f4d\u7f6e\u4e0b\u6807\u662f\u4ece 0 \u5f00\u59cb\uff0c\u56e0\u6b64\u8fd4\u56de\u7684\u5143\u7d20\u4e3a 4\u3002 nebula> RETURN range(1,5)[3]; +---------------+ | range(1,5)[3] | +---------------+ | 4 | +---------------+ # \u8fd4\u56de\u5217\u8868 [1,2,3,4,5] \u4e2d\u4f4d\u7f6e\u4e0b\u6807\u4e3a-2 \u7684\u5143\u7d20\u3002\u5217\u8868\u7684\u6700\u540e\u4e00\u4e2a\u5143\u7d20\u7684\u4f4d\u7f6e\u4e0b\u6807\u662f-1\uff0c\u56e0\u6b64-2 \u662f\u6307\u5012\u6570\u7b2c\u4e8c\u4e2a\u5143\u7d20\uff0c\u5373 4\u3002 nebula> RETURN range(1,5)[-2]; +------------------+ | range(1,5)[-(2)] | +------------------+ | 4 | +------------------+ # \u8fd4\u56de\u5217\u8868 [1,2,3,4,5] \u4e2d\u4e0b\u6807\u4f4d\u7f6e\u4ece 0 \u5230 3\uff08\u4e0d\u5305\u62ec 3\uff09\u7684\u5143\u7d20\u3002 nebula> RETURN range(1,5)[0..3]; +------------------+ | range(1,5)[0..3] | +------------------+ | [1, 2, 3] | +------------------+ # \u8fd4\u56de\u5217\u8868 [1,2,3,4,5] \u4e2d\u4f4d\u7f6e\u4e0b\u6807\u5927\u4e8e 2 \u7684\u5143\u7d20\u3002 nebula> RETURN range(1,5)[3..] AS a; +--------+ | a | +--------+ | [4, 5] | +--------+ # \u8fd4\u56de\u5217\u8868\u5185\u4e0b\u6807\u5c0f\u4e8e 3 \u7684\u5143\u7d20\u3002 nebula> WITH list[1, 2, 3, 4, 5] AS a \\ RETURN a[..3] AS r; +-----------+ | r | +-----------+ | [1, 2, 3] | +-----------+ # \u7b5b\u9009\u5217\u8868 [1,2,3,4,5] \u4e2d\u5927\u4e8e 2 \u7684\u5143\u7d20\uff0c\u5c06\u8fd9\u4e9b\u5143\u7d20\u5206\u522b\u505a\u8fd0\u7b97\u5e76\u8fd4\u56de\u3002 nebula> RETURN [n IN range(1,5) WHERE n > 2 | n + 10] AS a; +--------------+ | a | +--------------+ | [13, 14, 15] | +--------------+ # \u8fd4\u56de\u5217\u8868\u5185\u7b2c\u4e00\u4e2a\u81f3\u5012\u6570\u7b2c\u4e8c\u4e2a\uff08\u5305\u62ec\uff09\u7684\u5143\u7d20\u3002 nebula> YIELD list[1, 2, 3][0..-1] AS a; +--------+ | a | +--------+ | [1, 2] | +--------+ # \u8fd4\u56de\u5217\u8868\u5185\u5012\u6570\u7b2c\u4e09\u4e2a\u81f3\u5012\u6570\u7b2c\u4e00\u4e2a\uff08\u4e0d\u5305\u62ec\uff09\u7684\u5143\u7d20\u3002 nebula> YIELD list[1, 2, 3, 4, 5][-3..-1] AS a; +--------+ | a | +--------+ | [3, 4] | +--------+ # \u8bbe\u7f6e\u53d8\u91cf\uff0c\u8fd4\u56de\u5217\u8868\u5185\u4e0b\u6807\u4e3a 1\u30012 \u7684\u5143\u7d20\u3002 nebula> $var = YIELD 1 AS f, 3 AS t; \\ YIELD list[1, 2, 3][$var.f..$var.t] AS a; +--------+ | a | +--------+ | [2, 3] | +--------+ # \u8d8a\u754c\u7684\u4e0b\u6807\u8fd4\u56de\u4e3a\u7a7a\uff0c\u672a\u8d8a\u754c\u7684\u53ef\u4ee5\u6b63\u5e38\u8fd4\u56de\u3002 nebula> RETURN list[1, 2, 3, 4, 5] [0..10] AS a; +-----------------+ | a | +-----------------+ | [1, 2, 3, 4, 5] | +-----------------+ nebula> RETURN list[1, 2, 3] [-5..5] AS a; +-----------+ | a | +-----------+ | [1, 2, 3] | +-----------+ # [0..0] \u65f6\u8fd4\u56de\u4e3a\u7a7a\u3002 nebula> RETURN list[1, 2, 3, 4, 5] [0..0] AS a; +----+ | a | +----+ | [] | +----+ # M \u2265 N \u65f6\uff0c\u8fd4\u56de\u4e3a\u7a7a\u3002 nebula> RETURN list[1, 2, 3, 4, 5] [3..1] AS a; +----+ | a | +----+ | [] | +----+ # \u8303\u56f4\u67e5\u8be2\u65f6\uff0c\u4e0b\u6807\u6709 null \u65f6\uff0c\u8fd4\u56de\u4e3a null\u3002 nebula> WITH list[1,2,3] AS a \\ RETURN a[0..null] as r; +----------+ | r | +----------+ | __NULL__ | +----------+ # \u5c06\u5217\u8868 [1,2,3,4,5] \u4e2d\u7684\u5143\u7d20\u5206\u522b\u505a\u8fd0\u7b97\uff0c\u7136\u540e\u5c06\u5217\u8868\u53bb\u6389\u8868\u5934\u5e76\u8fd4\u56de\u3002 nebula> RETURN tail([n IN range(1, 5) | 2 * n - 10]) AS a; +-----------------+ | a | +-----------------+ | [-6, -4, -2, 0] | +-----------------+ # \u5c06\u5217\u8868 [1,2,3] \u4e2d\u7684\u5143\u7d20\u5224\u65ad\u4e3a\u771f\uff0c\u7136\u540e\u8fd4\u56de\u3002 nebula> RETURN [n IN range(1, 3) WHERE true | n] AS r; +-----------+ | r | +-----------+ | [1, 2, 3] | +-----------+ # \u8fd4\u56de\u5217\u8868 [1,2,3] \u7684\u957f\u5ea6\u3002 nebula> RETURN size(list[1,2,3]); +---------------+ | size([1,2,3]) | +---------------+ | 3 | +---------------+ # \u5c06\u5217\u8868 [92,90] \u4e2d\u7684\u5143\u7d20\u505a\u8fd0\u7b97\uff0c\u7136\u540e\u5728 where \u5b50\u53e5\u4e2d\u8fdb\u884c\u6761\u4ef6\u5224\u65ad\u3002 nebula> GO FROM \"player100\" OVER follow WHERE properties(edge).degree NOT IN [x IN [92, 90] | x + $$.player.age] \\ YIELD dst(edge) AS id, properties(edge).degree AS degree; +-------------+--------+ | id | degree | +-------------+--------+ | \"player101\" | 95 | | \"player102\" | 90 | +-------------+--------+ # \u5c06 MATCH \u8bed\u53e5\u7684\u67e5\u8be2\u7ed3\u679c\u4f5c\u4e3a\u5217\u8868\u4e2d\u7684\u5143\u7d20\u8fdb\u884c\u8fd0\u7b97\u5e76\u8fd4\u56de\u3002 nebula> MATCH p = (n:player{name:\"Tim Duncan\"})-[:follow]->(m) \\ RETURN [n IN nodes(p) | n.player.age + 100] AS r; +------------+ | r | +------------+ | [142, 136] | | [142, 141] | +------------+ OpenCypher \u517c\u5bb9\u6027 \u00b6 \u5728 openCypher \u4e2d\uff0c\u67e5\u8be2\u8d8a\u754c\u5143\u7d20\u65f6\u8fd4\u56de null \uff0c\u800c\u5728 nGQL \u4e2d\uff0c\u67e5\u8be2\u5355\u4e2a\u8d8a\u754c\u5143\u7d20\u65f6\u8fd4\u56de OUT_OF_RANGE \u3002 nebula> RETURN range(0,5)[-12]; +-------------------+ | range(0,5)[-(12)] | +-------------------+ | OUT_OF_RANGE | +-------------------+ \u590d\u5408\u6570\u636e\u7c7b\u578b\uff08\u4f8b\u5982 set\u3001map\u3001list\uff09 \u4e0d\u80fd \u5b58\u50a8\u4e3a\u70b9\u6216\u8fb9\u7684\u5c5e\u6027\u3002 \u5efa\u8bae\u4fee\u6539\u56fe\u5efa\u6a21\u65b9\u5f0f\uff1a\u5c06\u590d\u5408\u6570\u636e\u7c7b\u578b\u5efa\u6a21\u4e3a\u70b9\u7684\u90bb\u8fb9\uff0c\u800c\u4e0d\u662f\u8be5\u70b9\u7684\u81ea\u8eab\u5c5e\u6027\uff0c\u6bcf\u6761\u90bb\u8fb9\u53ef\u4ee5\u52a8\u6001\u589e\u5220\uff0c\u5e76\u4e14\u53ef\u4ee5\u8bbe\u7f6e\u90bb\u8fb9\u7684 Rank \u503c\u6765\u63a7\u5236\u90bb\u8fb9\u7684\u987a\u5e8f\u3002 List \u4e2d\u4e0d\u652f\u6301 pattern\uff0c\u4f8b\u5982 [(src)-[]->(m) | m.name] \u3002","title":"\u5217\u8868"},{"location":"3.ngql-guide/3.data-types/6.list/#_1","text":"\u5217\u8868\uff08List\uff09\u662f\u590d\u5408\u6570\u636e\u7c7b\u578b\uff0c\u4e00\u4e2a\u5217\u8868\u662f\u4e00\u7ec4\u5143\u7d20\u7684\u5e8f\u5217\uff0c\u53ef\u4ee5\u901a\u8fc7\u5143\u7d20\u5728\u5e8f\u5217\u4e2d\u7684\u4f4d\u7f6e\u8bbf\u95ee\u5217\u8868\u4e2d\u7684\u5143\u7d20\u3002 \u5217\u8868\u7528\u5de6\u65b9\u62ec\u53f7\uff08[\uff09\u548c\u53f3\u65b9\u62ec\u53f7\uff08]\uff09\u5305\u88f9\u591a\u4e2a\u5143\u7d20\uff0c\u5404\u4e2a\u5143\u7d20\u4e4b\u95f4\u7528\u82f1\u6587\u9017\u53f7\uff08,\uff09\u9694\u5f00\u3002\u5143\u7d20\u524d\u540e\u7684\u7a7a\u683c\u5728\u5217\u8868\u4e2d\u88ab\u5ffd\u7565\uff0c\u56e0\u6b64\u53ef\u4ee5\u4f7f\u7528\u6362\u884c\u7b26\u3001\u5236\u8868\u7b26\u548c\u7a7a\u683c\u8c03\u6574\u683c\u5f0f\u3002","title":"\u5217\u8868"},{"location":"3.ngql-guide/3.data-types/6.list/#opencypher","text":"\u590d\u5408\u6570\u636e\u7c7b\u578b\uff08\u4f8b\u5982 List\u3001Set\u3001Map\uff09 \u4e0d\u80fd \u5b58\u50a8\u4e3a\u70b9\u6216\u8fb9\u7684\u5c5e\u6027\u3002","title":"OpenCypher \u517c\u5bb9\u6027"},{"location":"3.ngql-guide/3.data-types/6.list/#_2","text":"\u5bf9\u5217\u8868\u8fdb\u884c\u64cd\u4f5c\u53ef\u4ee5\u4f7f\u7528\u9884\u8bbe\u7684 \u5217\u8868\u51fd\u6570 \uff0c\u4e5f\u53ef\u4ee5\u4f7f\u7528\u4e0b\u6807\u8868\u8fbe\u5f0f\u8fc7\u6ee4\u5217\u8868\u5185\u7684\u5143\u7d20\u3002","title":"\u5217\u8868\u64cd\u4f5c"},{"location":"3.ngql-guide/3.data-types/6.list/#_3","text":"[M] [M..N] [M..] [..N] nGQL \u7684\u4e0b\u6807\u652f\u6301\u4ece\u524d\u5f80\u540e\u67e5\u8be2\uff0c\u4ece 0 \u5f00\u59cb\uff0c0 \u8868\u793a\u7b2c\u4e00\u4e2a\u5143\u7d20\uff0c1 \u8868\u793a\u7b2c\u4e8c\u4e2a\u5143\u7d20\uff0c\u4ee5\u6b64\u7c7b\u63a8\uff1b\u4e5f\u652f\u6301\u4ece\u540e\u5f80\u524d\u67e5\u8be2\uff0c\u4ece-1 \u5f00\u59cb\uff0c-1 \u8868\u793a\u6700\u540e\u4e00\u4e2a\u5143\u7d20\uff0c-2 \u8868\u793a\u5012\u6570\u7b2c\u4e8c\u4e2a\u5143\u7d20\uff0c\u4ee5\u6b64\u7c7b\u63a8\u3002 [M]\uff1a\u8868\u793a\u4e0b\u6807\u4e3a M \u7684\u5143\u7d20\u3002 [M..N]\uff1a\u8868\u793a M \u2264 \u4e0b\u6807 \uff1c N \u7684\u5143\u7d20\u3002 N \u4e3a 0 \u65f6\uff0c\u8fd4\u56de\u4e3a\u7a7a\u3002 [M..]\uff1a\u8868\u793a M \u2264 \u4e0b\u6807 \u7684\u5143\u7d20\u3002 [..N]\uff1a\u8868\u793a \u4e0b\u6807 \uff1c N \u7684\u5143\u7d20\u3002 N \u4e3a 0 \u65f6\uff0c\u8fd4\u56de\u4e3a\u7a7a\u3002 Note \u8d8a\u754c\u7684\u4e0b\u6807\u8fd4\u56de\u4e3a\u7a7a\uff0c\u672a\u8d8a\u754c\u7684\u53ef\u4ee5\u6b63\u5e38\u8fd4\u56de\u3002 M \u2265 N \u65f6\uff0c\u8fd4\u56de\u4e3a\u7a7a\u3002 \u67e5\u8be2\u5355\u4e2a\u5143\u7d20\u65f6\uff0c\u5982\u679c M \u4e3a null\uff0c\u8fd4\u56de\u62a5\u9519 BAD_TYPE \uff1b\u8303\u56f4\u67e5\u8be2\u65f6\uff0c M \u6216 N \u4e3a null\uff0c\u8fd4\u56de\u4e3a null \u3002","title":"\u4e0b\u6807\u8868\u8fbe\u5f0f\u8bed\u6cd5"},{"location":"3.ngql-guide/3.data-types/6.list/#_4","text":"# \u8fd4\u56de\u5217\u8868 [1,2,3] nebula> RETURN list[1, 2, 3] AS a; +-----------+ | a | +-----------+ | [1, 2, 3] | +-----------+ # \u8fd4\u56de\u5217\u8868 [1,2,3,4,5] \u4e2d\u4f4d\u7f6e\u4e0b\u6807\u4e3a 3 \u7684\u5143\u7d20\u3002\u5217\u8868\u7684\u4f4d\u7f6e\u4e0b\u6807\u662f\u4ece 0 \u5f00\u59cb\uff0c\u56e0\u6b64\u8fd4\u56de\u7684\u5143\u7d20\u4e3a 4\u3002 nebula> RETURN range(1,5)[3]; +---------------+ | range(1,5)[3] | +---------------+ | 4 | +---------------+ # \u8fd4\u56de\u5217\u8868 [1,2,3,4,5] \u4e2d\u4f4d\u7f6e\u4e0b\u6807\u4e3a-2 \u7684\u5143\u7d20\u3002\u5217\u8868\u7684\u6700\u540e\u4e00\u4e2a\u5143\u7d20\u7684\u4f4d\u7f6e\u4e0b\u6807\u662f-1\uff0c\u56e0\u6b64-2 \u662f\u6307\u5012\u6570\u7b2c\u4e8c\u4e2a\u5143\u7d20\uff0c\u5373 4\u3002 nebula> RETURN range(1,5)[-2]; +------------------+ | range(1,5)[-(2)] | +------------------+ | 4 | +------------------+ # \u8fd4\u56de\u5217\u8868 [1,2,3,4,5] \u4e2d\u4e0b\u6807\u4f4d\u7f6e\u4ece 0 \u5230 3\uff08\u4e0d\u5305\u62ec 3\uff09\u7684\u5143\u7d20\u3002 nebula> RETURN range(1,5)[0..3]; +------------------+ | range(1,5)[0..3] | +------------------+ | [1, 2, 3] | +------------------+ # \u8fd4\u56de\u5217\u8868 [1,2,3,4,5] \u4e2d\u4f4d\u7f6e\u4e0b\u6807\u5927\u4e8e 2 \u7684\u5143\u7d20\u3002 nebula> RETURN range(1,5)[3..] AS a; +--------+ | a | +--------+ | [4, 5] | +--------+ # \u8fd4\u56de\u5217\u8868\u5185\u4e0b\u6807\u5c0f\u4e8e 3 \u7684\u5143\u7d20\u3002 nebula> WITH list[1, 2, 3, 4, 5] AS a \\ RETURN a[..3] AS r; +-----------+ | r | +-----------+ | [1, 2, 3] | +-----------+ # \u7b5b\u9009\u5217\u8868 [1,2,3,4,5] \u4e2d\u5927\u4e8e 2 \u7684\u5143\u7d20\uff0c\u5c06\u8fd9\u4e9b\u5143\u7d20\u5206\u522b\u505a\u8fd0\u7b97\u5e76\u8fd4\u56de\u3002 nebula> RETURN [n IN range(1,5) WHERE n > 2 | n + 10] AS a; +--------------+ | a | +--------------+ | [13, 14, 15] | +--------------+ # \u8fd4\u56de\u5217\u8868\u5185\u7b2c\u4e00\u4e2a\u81f3\u5012\u6570\u7b2c\u4e8c\u4e2a\uff08\u5305\u62ec\uff09\u7684\u5143\u7d20\u3002 nebula> YIELD list[1, 2, 3][0..-1] AS a; +--------+ | a | +--------+ | [1, 2] | +--------+ # \u8fd4\u56de\u5217\u8868\u5185\u5012\u6570\u7b2c\u4e09\u4e2a\u81f3\u5012\u6570\u7b2c\u4e00\u4e2a\uff08\u4e0d\u5305\u62ec\uff09\u7684\u5143\u7d20\u3002 nebula> YIELD list[1, 2, 3, 4, 5][-3..-1] AS a; +--------+ | a | +--------+ | [3, 4] | +--------+ # \u8bbe\u7f6e\u53d8\u91cf\uff0c\u8fd4\u56de\u5217\u8868\u5185\u4e0b\u6807\u4e3a 1\u30012 \u7684\u5143\u7d20\u3002 nebula> $var = YIELD 1 AS f, 3 AS t; \\ YIELD list[1, 2, 3][$var.f..$var.t] AS a; +--------+ | a | +--------+ | [2, 3] | +--------+ # \u8d8a\u754c\u7684\u4e0b\u6807\u8fd4\u56de\u4e3a\u7a7a\uff0c\u672a\u8d8a\u754c\u7684\u53ef\u4ee5\u6b63\u5e38\u8fd4\u56de\u3002 nebula> RETURN list[1, 2, 3, 4, 5] [0..10] AS a; +-----------------+ | a | +-----------------+ | [1, 2, 3, 4, 5] | +-----------------+ nebula> RETURN list[1, 2, 3] [-5..5] AS a; +-----------+ | a | +-----------+ | [1, 2, 3] | +-----------+ # [0..0] \u65f6\u8fd4\u56de\u4e3a\u7a7a\u3002 nebula> RETURN list[1, 2, 3, 4, 5] [0..0] AS a; +----+ | a | +----+ | [] | +----+ # M \u2265 N \u65f6\uff0c\u8fd4\u56de\u4e3a\u7a7a\u3002 nebula> RETURN list[1, 2, 3, 4, 5] [3..1] AS a; +----+ | a | +----+ | [] | +----+ # \u8303\u56f4\u67e5\u8be2\u65f6\uff0c\u4e0b\u6807\u6709 null \u65f6\uff0c\u8fd4\u56de\u4e3a null\u3002 nebula> WITH list[1,2,3] AS a \\ RETURN a[0..null] as r; +----------+ | r | +----------+ | __NULL__ | +----------+ # \u5c06\u5217\u8868 [1,2,3,4,5] \u4e2d\u7684\u5143\u7d20\u5206\u522b\u505a\u8fd0\u7b97\uff0c\u7136\u540e\u5c06\u5217\u8868\u53bb\u6389\u8868\u5934\u5e76\u8fd4\u56de\u3002 nebula> RETURN tail([n IN range(1, 5) | 2 * n - 10]) AS a; +-----------------+ | a | +-----------------+ | [-6, -4, -2, 0] | +-----------------+ # \u5c06\u5217\u8868 [1,2,3] \u4e2d\u7684\u5143\u7d20\u5224\u65ad\u4e3a\u771f\uff0c\u7136\u540e\u8fd4\u56de\u3002 nebula> RETURN [n IN range(1, 3) WHERE true | n] AS r; +-----------+ | r | +-----------+ | [1, 2, 3] | +-----------+ # \u8fd4\u56de\u5217\u8868 [1,2,3] \u7684\u957f\u5ea6\u3002 nebula> RETURN size(list[1,2,3]); +---------------+ | size([1,2,3]) | +---------------+ | 3 | +---------------+ # \u5c06\u5217\u8868 [92,90] \u4e2d\u7684\u5143\u7d20\u505a\u8fd0\u7b97\uff0c\u7136\u540e\u5728 where \u5b50\u53e5\u4e2d\u8fdb\u884c\u6761\u4ef6\u5224\u65ad\u3002 nebula> GO FROM \"player100\" OVER follow WHERE properties(edge).degree NOT IN [x IN [92, 90] | x + $$.player.age] \\ YIELD dst(edge) AS id, properties(edge).degree AS degree; +-------------+--------+ | id | degree | +-------------+--------+ | \"player101\" | 95 | | \"player102\" | 90 | +-------------+--------+ # \u5c06 MATCH \u8bed\u53e5\u7684\u67e5\u8be2\u7ed3\u679c\u4f5c\u4e3a\u5217\u8868\u4e2d\u7684\u5143\u7d20\u8fdb\u884c\u8fd0\u7b97\u5e76\u8fd4\u56de\u3002 nebula> MATCH p = (n:player{name:\"Tim Duncan\"})-[:follow]->(m) \\ RETURN [n IN nodes(p) | n.player.age + 100] AS r; +------------+ | r | +------------+ | [142, 136] | | [142, 141] | +------------+","title":"\u793a\u4f8b"},{"location":"3.ngql-guide/3.data-types/6.list/#opencypher_1","text":"\u5728 openCypher \u4e2d\uff0c\u67e5\u8be2\u8d8a\u754c\u5143\u7d20\u65f6\u8fd4\u56de null \uff0c\u800c\u5728 nGQL \u4e2d\uff0c\u67e5\u8be2\u5355\u4e2a\u8d8a\u754c\u5143\u7d20\u65f6\u8fd4\u56de OUT_OF_RANGE \u3002 nebula> RETURN range(0,5)[-12]; +-------------------+ | range(0,5)[-(12)] | +-------------------+ | OUT_OF_RANGE | +-------------------+ \u590d\u5408\u6570\u636e\u7c7b\u578b\uff08\u4f8b\u5982 set\u3001map\u3001list\uff09 \u4e0d\u80fd \u5b58\u50a8\u4e3a\u70b9\u6216\u8fb9\u7684\u5c5e\u6027\u3002 \u5efa\u8bae\u4fee\u6539\u56fe\u5efa\u6a21\u65b9\u5f0f\uff1a\u5c06\u590d\u5408\u6570\u636e\u7c7b\u578b\u5efa\u6a21\u4e3a\u70b9\u7684\u90bb\u8fb9\uff0c\u800c\u4e0d\u662f\u8be5\u70b9\u7684\u81ea\u8eab\u5c5e\u6027\uff0c\u6bcf\u6761\u90bb\u8fb9\u53ef\u4ee5\u52a8\u6001\u589e\u5220\uff0c\u5e76\u4e14\u53ef\u4ee5\u8bbe\u7f6e\u90bb\u8fb9\u7684 Rank \u503c\u6765\u63a7\u5236\u90bb\u8fb9\u7684\u987a\u5e8f\u3002 List \u4e2d\u4e0d\u652f\u6301 pattern\uff0c\u4f8b\u5982 [(src)-[]->(m) | m.name] \u3002","title":"OpenCypher \u517c\u5bb9\u6027"},{"location":"3.ngql-guide/3.data-types/7.set/","text":"\u96c6\u5408 \u00b6 \u96c6\u5408\uff08Set\uff09\u662f\u590d\u5408\u6570\u636e\u7c7b\u578b\uff0c\u96c6\u5408\u4e2d\u662f\u4e00\u7ec4\u5143\u7d20\uff0c\u4e0e\u5217\u8868\uff08List\uff09\u4e0d\u540c\u7684\u662f\uff0c\u96c6\u5408\u4e2d\u7684\u5143\u7d20\u662f\u65e0\u5e8f\u7684\uff0c\u4e14\u4e0d\u5141\u8bb8\u91cd\u590d\u3002 \u96c6\u5408\u7528\u5de6\u82b1\u62ec\u53f7\uff08{\uff09\u548c\u53f3\u82b1\u62ec\u53f7\uff08}\uff09\u5305\u88f9\u591a\u4e2a\u5143\u7d20\uff0c\u5404\u4e2a\u5143\u7d20\u4e4b\u95f4\u7528\u82f1\u6587\u9017\u53f7\uff08,\uff09\u9694\u5f00\u3002\u5143\u7d20\u524d\u540e\u7684\u7a7a\u683c\u5728\u96c6\u5408\u4e2d\u88ab\u5ffd\u7565\uff0c\u56e0\u6b64\u53ef\u4ee5\u4f7f\u7528\u6362\u884c\u7b26\u3001\u5236\u8868\u7b26\u548c\u7a7a\u683c\u8c03\u6574\u683c\u5f0f\u3002 OpenCypher \u517c\u5bb9\u6027 \u00b6 \u590d\u5408\u6570\u636e\u7c7b\u578b\uff08\u4f8b\u5982 List\u3001Set\u3001Map\uff09 \u4e0d\u80fd \u5b58\u50a8\u4e3a\u70b9\u6216\u8fb9\u7684\u5c5e\u6027\u3002 \u5728 OpenCypher \u4e2d\uff0c\u96c6\u5408\u4e0d\u662f\u4e00\u4e2a\u6570\u636e\u7c7b\u578b\uff0c\u800c\u5728 nGQL \u4e2d\uff0c\u7528\u6237\u53ef\u4ee5\u4f7f\u7528\u96c6\u5408\u3002 \u793a\u4f8b \u00b6 # \u8fd4\u56de\u96c6\u5408 {1,2,3}\u3002 nebula> RETURN set{1, 2, 3} AS a; +-----------+ | a | +-----------+ | {3, 2, 1} | +-----------+ # \u8fd4\u56de\u96c6\u5408 {1,2,1}\uff0c\u56e0\u4e3a\u96c6\u5408\u4e0d\u5141\u8bb8\u91cd\u590d\u5143\u7d20\uff0c\u4f1a\u8fd4\u56de {1,2}\uff0c\u4e14\u987a\u5e8f\u662f\u65e0\u5e8f\u7684\u3002 nebula> RETURN set{1, 2, 1} AS a; +--------+ | a | +--------+ | {2, 1} | +--------+ # \u5224\u65ad\u96c6\u5408\u4e2d\u662f\u5426\u6709\u6307\u5b9a\u5143\u7d20 1\u3002 nebula> RETURN 1 IN set{1, 2} AS a; +------+ | a | +------+ | true | +------+ # \u8ba1\u7b97\u96c6\u5408\u4e2d\u7684\u5143\u7d20\u6570\u91cf\u3002 nebula> YIELD size(set{1, 2, 1}) AS a; +---+ | a | +---+ | 2 | +---+ # \u8fd4\u56de\u76ee\u6807\u70b9\u5c5e\u6027\u503c\u7ec4\u6210\u7684\u96c6\u5408\u3002 nebula> GO FROM \"player100\" OVER follow \\ YIELD set{properties($$).name,properties($$).age} as a; +-----------------------+ | a | +-----------------------+ | {36, \"Tony Parker\"} | | {41, \"Manu Ginobili\"} | +-----------------------+","title":"\u96c6\u5408"},{"location":"3.ngql-guide/3.data-types/7.set/#_1","text":"\u96c6\u5408\uff08Set\uff09\u662f\u590d\u5408\u6570\u636e\u7c7b\u578b\uff0c\u96c6\u5408\u4e2d\u662f\u4e00\u7ec4\u5143\u7d20\uff0c\u4e0e\u5217\u8868\uff08List\uff09\u4e0d\u540c\u7684\u662f\uff0c\u96c6\u5408\u4e2d\u7684\u5143\u7d20\u662f\u65e0\u5e8f\u7684\uff0c\u4e14\u4e0d\u5141\u8bb8\u91cd\u590d\u3002 \u96c6\u5408\u7528\u5de6\u82b1\u62ec\u53f7\uff08{\uff09\u548c\u53f3\u82b1\u62ec\u53f7\uff08}\uff09\u5305\u88f9\u591a\u4e2a\u5143\u7d20\uff0c\u5404\u4e2a\u5143\u7d20\u4e4b\u95f4\u7528\u82f1\u6587\u9017\u53f7\uff08,\uff09\u9694\u5f00\u3002\u5143\u7d20\u524d\u540e\u7684\u7a7a\u683c\u5728\u96c6\u5408\u4e2d\u88ab\u5ffd\u7565\uff0c\u56e0\u6b64\u53ef\u4ee5\u4f7f\u7528\u6362\u884c\u7b26\u3001\u5236\u8868\u7b26\u548c\u7a7a\u683c\u8c03\u6574\u683c\u5f0f\u3002","title":"\u96c6\u5408"},{"location":"3.ngql-guide/3.data-types/7.set/#opencypher","text":"\u590d\u5408\u6570\u636e\u7c7b\u578b\uff08\u4f8b\u5982 List\u3001Set\u3001Map\uff09 \u4e0d\u80fd \u5b58\u50a8\u4e3a\u70b9\u6216\u8fb9\u7684\u5c5e\u6027\u3002 \u5728 OpenCypher \u4e2d\uff0c\u96c6\u5408\u4e0d\u662f\u4e00\u4e2a\u6570\u636e\u7c7b\u578b\uff0c\u800c\u5728 nGQL \u4e2d\uff0c\u7528\u6237\u53ef\u4ee5\u4f7f\u7528\u96c6\u5408\u3002","title":"OpenCypher \u517c\u5bb9\u6027"},{"location":"3.ngql-guide/3.data-types/7.set/#_2","text":"# \u8fd4\u56de\u96c6\u5408 {1,2,3}\u3002 nebula> RETURN set{1, 2, 3} AS a; +-----------+ | a | +-----------+ | {3, 2, 1} | +-----------+ # \u8fd4\u56de\u96c6\u5408 {1,2,1}\uff0c\u56e0\u4e3a\u96c6\u5408\u4e0d\u5141\u8bb8\u91cd\u590d\u5143\u7d20\uff0c\u4f1a\u8fd4\u56de {1,2}\uff0c\u4e14\u987a\u5e8f\u662f\u65e0\u5e8f\u7684\u3002 nebula> RETURN set{1, 2, 1} AS a; +--------+ | a | +--------+ | {2, 1} | +--------+ # \u5224\u65ad\u96c6\u5408\u4e2d\u662f\u5426\u6709\u6307\u5b9a\u5143\u7d20 1\u3002 nebula> RETURN 1 IN set{1, 2} AS a; +------+ | a | +------+ | true | +------+ # \u8ba1\u7b97\u96c6\u5408\u4e2d\u7684\u5143\u7d20\u6570\u91cf\u3002 nebula> YIELD size(set{1, 2, 1}) AS a; +---+ | a | +---+ | 2 | +---+ # \u8fd4\u56de\u76ee\u6807\u70b9\u5c5e\u6027\u503c\u7ec4\u6210\u7684\u96c6\u5408\u3002 nebula> GO FROM \"player100\" OVER follow \\ YIELD set{properties($$).name,properties($$).age} as a; +-----------------------+ | a | +-----------------------+ | {36, \"Tony Parker\"} | | {41, \"Manu Ginobili\"} | +-----------------------+","title":"\u793a\u4f8b"},{"location":"3.ngql-guide/3.data-types/8.map/","text":"\u6620\u5c04 \u00b6 \u6620\u5c04\uff08Map\uff09\u662f\u590d\u5408\u6570\u636e\u7c7b\u578b\u3002\u4e00\u4e2a\u6620\u5c04\u662f\u4e00\u7ec4\u952e\u503c\u5bf9\uff08Key-Value\uff09\u7684\u65e0\u5e8f\u96c6\u5408\u3002\u5728\u6620\u5c04\u4e2d\uff0cKey \u662f\u5b57\u7b26\u4e32\u7c7b\u578b\uff0cValue \u53ef\u4ee5\u662f\u4efb\u4f55\u6570\u636e\u7c7b\u578b\u3002\u7528\u6237\u53ef\u4ee5\u901a\u8fc7 map['<key>'] \u7684\u65b9\u6cd5\u83b7\u53d6\u6620\u5c04\u4e2d\u7684\u5143\u7d20\u3002 \u6620\u5c04\u7528\u5de6\u82b1\u62ec\u53f7\uff08{\uff09\u548c\u53f3\u82b1\u62ec\u53f7\uff08}\uff09\u5305\u88f9\u591a\u4e2a\u952e\u503c\u5bf9\uff0c\u5404\u4e2a\u952e\u503c\u5bf9\u4e4b\u95f4\u7528\u82f1\u6587\u9017\u53f7\uff08,\uff09\u9694\u5f00\u3002\u952e\u503c\u5bf9\u524d\u540e\u7684\u7a7a\u683c\u5728\u6620\u5c04\u4e2d\u88ab\u5ffd\u7565\uff0c\u56e0\u6b64\u53ef\u4ee5\u4f7f\u7528\u6362\u884c\u7b26\u3001\u5236\u8868\u7b26\u548c\u7a7a\u683c\u8c03\u6574\u683c\u5f0f\u3002 OpenCypher \u517c\u5bb9\u6027 \u00b6 \u590d\u5408\u6570\u636e\u7c7b\u578b\uff08\u4f8b\u5982 List\u3001Set\u3001Map\uff09 \u4e0d\u80fd \u5b58\u50a8\u4e3a\u70b9\u6216\u8fb9\u7684\u5c5e\u6027\u3002 \u4e0d\u652f\u6301\u6620\u5c04\u6295\u5f71\uff08map projection\uff09\u3002 \u793a\u4f8b \u00b6 # \u8fd4\u56de\u7b80\u5355\u7684\u6620\u5c04\u3002 nebula> YIELD map{key1: 'Value1', Key2: 'Value2'} as a; +----------------------------------+ | a | +----------------------------------+ | {Key2: \"Value2\", key1: \"Value1\"} | +----------------------------------+ # \u8fd4\u56de\u5217\u8868\u7c7b\u578b\u7684\u6620\u5c04\u3002 nebula> YIELD map{listKey: [{inner: 'Map1'}, {inner: 'Map2'}]} as a; +-----------------------------------------------+ | a | +-----------------------------------------------+ | {listKey: [{inner: \"Map1\"}, {inner: \"Map2\"}]} | +-----------------------------------------------+ # \u8fd4\u56de\u6df7\u5408\u7c7b\u578b\u7684\u6620\u5c04\u3002 nebula> RETURN map{a: LIST[1,2], b: SET{1,2,1}, c: \"hee\"} as a; +----------------------------------+ | a | +----------------------------------+ | {a: [1, 2], b: {2, 1}, c: \"hee\"} | +----------------------------------+ # \u8fd4\u56de\u6620\u5c04\u4e2d\u7684\u6307\u5b9a\u5143\u7d20\u3002 nebula> RETURN map{a: LIST[1,2], b: SET{1,2,1}, c: \"hee\"}[\"b\"] AS b; +--------+ | b | +--------+ | {2, 1} | +--------+ # \u5224\u65ad\u6620\u5c04\u4e2d\u662f\u5426\u6709\u6307\u5b9akey\uff0c\u6682\u4e0d\u652f\u6301\u5224\u65advalue\u3002 nebula> RETURN \"a\" IN MAP{a:1, b:2} AS a; +------+ | a | +------+ | true | +------+","title":"\u6620\u5c04"},{"location":"3.ngql-guide/3.data-types/8.map/#_1","text":"\u6620\u5c04\uff08Map\uff09\u662f\u590d\u5408\u6570\u636e\u7c7b\u578b\u3002\u4e00\u4e2a\u6620\u5c04\u662f\u4e00\u7ec4\u952e\u503c\u5bf9\uff08Key-Value\uff09\u7684\u65e0\u5e8f\u96c6\u5408\u3002\u5728\u6620\u5c04\u4e2d\uff0cKey \u662f\u5b57\u7b26\u4e32\u7c7b\u578b\uff0cValue \u53ef\u4ee5\u662f\u4efb\u4f55\u6570\u636e\u7c7b\u578b\u3002\u7528\u6237\u53ef\u4ee5\u901a\u8fc7 map['<key>'] \u7684\u65b9\u6cd5\u83b7\u53d6\u6620\u5c04\u4e2d\u7684\u5143\u7d20\u3002 \u6620\u5c04\u7528\u5de6\u82b1\u62ec\u53f7\uff08{\uff09\u548c\u53f3\u82b1\u62ec\u53f7\uff08}\uff09\u5305\u88f9\u591a\u4e2a\u952e\u503c\u5bf9\uff0c\u5404\u4e2a\u952e\u503c\u5bf9\u4e4b\u95f4\u7528\u82f1\u6587\u9017\u53f7\uff08,\uff09\u9694\u5f00\u3002\u952e\u503c\u5bf9\u524d\u540e\u7684\u7a7a\u683c\u5728\u6620\u5c04\u4e2d\u88ab\u5ffd\u7565\uff0c\u56e0\u6b64\u53ef\u4ee5\u4f7f\u7528\u6362\u884c\u7b26\u3001\u5236\u8868\u7b26\u548c\u7a7a\u683c\u8c03\u6574\u683c\u5f0f\u3002","title":"\u6620\u5c04"},{"location":"3.ngql-guide/3.data-types/8.map/#opencypher","text":"\u590d\u5408\u6570\u636e\u7c7b\u578b\uff08\u4f8b\u5982 List\u3001Set\u3001Map\uff09 \u4e0d\u80fd \u5b58\u50a8\u4e3a\u70b9\u6216\u8fb9\u7684\u5c5e\u6027\u3002 \u4e0d\u652f\u6301\u6620\u5c04\u6295\u5f71\uff08map projection\uff09\u3002","title":"OpenCypher \u517c\u5bb9\u6027"},{"location":"3.ngql-guide/3.data-types/8.map/#_2","text":"# \u8fd4\u56de\u7b80\u5355\u7684\u6620\u5c04\u3002 nebula> YIELD map{key1: 'Value1', Key2: 'Value2'} as a; +----------------------------------+ | a | +----------------------------------+ | {Key2: \"Value2\", key1: \"Value1\"} | +----------------------------------+ # \u8fd4\u56de\u5217\u8868\u7c7b\u578b\u7684\u6620\u5c04\u3002 nebula> YIELD map{listKey: [{inner: 'Map1'}, {inner: 'Map2'}]} as a; +-----------------------------------------------+ | a | +-----------------------------------------------+ | {listKey: [{inner: \"Map1\"}, {inner: \"Map2\"}]} | +-----------------------------------------------+ # \u8fd4\u56de\u6df7\u5408\u7c7b\u578b\u7684\u6620\u5c04\u3002 nebula> RETURN map{a: LIST[1,2], b: SET{1,2,1}, c: \"hee\"} as a; +----------------------------------+ | a | +----------------------------------+ | {a: [1, 2], b: {2, 1}, c: \"hee\"} | +----------------------------------+ # \u8fd4\u56de\u6620\u5c04\u4e2d\u7684\u6307\u5b9a\u5143\u7d20\u3002 nebula> RETURN map{a: LIST[1,2], b: SET{1,2,1}, c: \"hee\"}[\"b\"] AS b; +--------+ | b | +--------+ | {2, 1} | +--------+ # \u5224\u65ad\u6620\u5c04\u4e2d\u662f\u5426\u6709\u6307\u5b9akey\uff0c\u6682\u4e0d\u652f\u6301\u5224\u65advalue\u3002 nebula> RETURN \"a\" IN MAP{a:1, b:2} AS a; +------+ | a | +------+ | true | +------+","title":"\u793a\u4f8b"},{"location":"3.ngql-guide/3.data-types/9.type-conversion/","text":"\u7c7b\u578b\u8f6c\u6362 \u00b6 \u7c7b\u578b\u8f6c\u6362\u662f\u6307\u5c06\u8868\u8fbe\u5f0f\u7684\u7c7b\u578b\u8f6c\u6362\u4e3a\u53e6\u4e00\u4e2a\u7c7b\u578b\u3002 NebulaGraph\u652f\u6301\u663e\u5f0f\u5730\u8f6c\u6362\u7c7b\u578b\u3002\u8be6\u60c5\u53c2\u89c1 \u7c7b\u578b\u8f6c\u6362\u51fd\u6570 \u3002 \u793a\u4f8b \u00b6 nebula> UNWIND [true, false, 'true', 'false', NULL] AS b \\ RETURN toBoolean(b) AS b; +----------+ | b | +----------+ | true | +----------+ | false | +----------+ | true | +----------+ | false | +----------+ | __NULL__ | +----------+ nebula> RETURN toFloat(1), toFloat('1.3'), toFloat('1e3'), toFloat('not a number'); +------------+----------------+----------------+-------------------------+ | toFloat(1) | toFloat(\"1.3\") | toFloat(\"1e3\") | toFloat(\"not a number\") | +------------+----------------+----------------+-------------------------+ | 1.0 | 1.3 | 1000.0 | __NULL__ | +------------+----------------+----------------+-------------------------+","title":"\u7c7b\u578b\u8f6c\u6362"},{"location":"3.ngql-guide/3.data-types/9.type-conversion/#_1","text":"\u7c7b\u578b\u8f6c\u6362\u662f\u6307\u5c06\u8868\u8fbe\u5f0f\u7684\u7c7b\u578b\u8f6c\u6362\u4e3a\u53e6\u4e00\u4e2a\u7c7b\u578b\u3002 NebulaGraph\u652f\u6301\u663e\u5f0f\u5730\u8f6c\u6362\u7c7b\u578b\u3002\u8be6\u60c5\u53c2\u89c1 \u7c7b\u578b\u8f6c\u6362\u51fd\u6570 \u3002","title":"\u7c7b\u578b\u8f6c\u6362"},{"location":"3.ngql-guide/3.data-types/9.type-conversion/#_2","text":"nebula> UNWIND [true, false, 'true', 'false', NULL] AS b \\ RETURN toBoolean(b) AS b; +----------+ | b | +----------+ | true | +----------+ | false | +----------+ | true | +----------+ | false | +----------+ | __NULL__ | +----------+ nebula> RETURN toFloat(1), toFloat('1.3'), toFloat('1e3'), toFloat('not a number'); +------------+----------------+----------------+-------------------------+ | toFloat(1) | toFloat(\"1.3\") | toFloat(\"1e3\") | toFloat(\"not a number\") | +------------+----------------+----------------+-------------------------+ | 1.0 | 1.3 | 1000.0 | __NULL__ | +------------+----------------+----------------+-------------------------+","title":"\u793a\u4f8b"},{"location":"3.ngql-guide/4.variable-and-composite-queries/1.composite-queries/","text":"\u590d\u5408\u67e5\u8be2\uff08\u5b50\u53e5\u7ed3\u6784\uff09 \u00b6 \u590d\u5408\u67e5\u8be2\u5c06\u6765\u81ea\u4e0d\u540c\u8bf7\u6c42\u7684\u6570\u636e\u653e\u5728\u4e00\u8d77\uff0c\u7136\u540e\u8fdb\u884c\u8fc7\u6ee4\u3001\u5206\u7ec4\u6216\u8005\u6392\u5e8f\u7b49\uff0c\u6700\u540e\u8fd4\u56de\u7ed3\u679c\u3002 NebulaGraph\u652f\u6301\u4e09\u79cd\u65b9\u5f0f\u8fdb\u884c\u590d\u5408\u67e5\u8be2\uff08\u6216\u5b50\u67e5\u8be2\uff09\uff1a \uff08opencypher \u517c\u5bb9\u8bed\u53e5\uff09\u8fde\u63a5\u5404\u4e2a\u5b50\u53e5\uff0c\u8ba9\u5b83\u4eec\u5728\u5f7c\u6b64\u4e4b\u95f4\u63d0\u4f9b\u4e2d\u95f4\u7ed3\u679c\u96c6\u3002 \uff08\u539f\u751f nGQL\uff09\u591a\u4e2a\u67e5\u8be2\u53ef\u4ee5\u5408\u5e76\u5904\u7406\uff0c\u4ee5\u82f1\u6587\u5206\u53f7\uff08;\uff09\u5206\u9694\uff0c\u8fd4\u56de\u6700\u540e\u4e00\u4e2a\u67e5\u8be2\u7684\u7ed3\u679c\u3002 \uff08\u539f\u751f nGQL\uff09\u53ef\u4ee5\u7528\u7ba1\u9053\u7b26\uff08|\uff09\u5c06\u591a\u4e2a\u67e5\u8be2\u8fde\u63a5\u8d77\u6765\uff0c\u4e0a\u4e00\u4e2a\u67e5\u8be2\u7684\u7ed3\u679c\u53ef\u4ee5\u4f5c\u4e3a\u4e0b\u4e00\u4e2a\u67e5\u8be2\u7684\u8f93\u5165\u3002 OpenCypher \u517c\u5bb9\u6027 \u00b6 \u5728\u590d\u5408\u67e5\u8be2\u4e2d\uff0c\u8bf7 \u4e0d\u8981 \u6df7\u7528 opencypher \u517c\u5bb9\u8bed\u53e5\u548c\u539f\u751f nGQL \u8bed\u53e5\uff0c\u4f8b\u5982 MATCH ... | GO ... | YIELD ... \u3002 \u5982\u679c\u4f7f\u7528 openCypher \u517c\u5bb9\u8bed\u53e5\uff08 MATCH \u3001 RETURN \u3001 WITH \u7b49\uff09\uff0c\u8bf7\u4e0d\u8981\u4f7f\u7528\u7ba1\u9053\u7b26\u6216\u5206\u53f7\u7ec4\u5408\u5b50\u53e5\u3002 \u5982\u679c\u4f7f\u7528\u539f\u751f nGQL \u8bed\u53e5\uff08 FETCH \u3001 GO \u3001 LOOKUP \u7b49\uff09\uff0c\u5fc5\u987b\u4f7f\u7528\u7ba1\u9053\u7b26\u6216\u5206\u53f7\u7ec4\u5408\u5b50\u53e5\u3002 \u590d\u5408\u67e5\u8be2\u4e0d\u652f\u6301\u4e8b\u52a1 \u00b6 \u4f8b\u5982\u4e00\u4e2a\u67e5\u8be2\u7531\u4e09\u4e2a\u5b50\u67e5\u8be2 A\u3001B\u3001C \u7ec4\u6210\uff0cA \u662f\u4e00\u4e2a\u8bfb\u64cd\u4f5c\uff0cB \u662f\u4e00\u4e2a\u8ba1\u7b97\u64cd\u4f5c\uff0cC \u662f\u4e00\u4e2a\u5199\u64cd\u4f5c\uff0c\u5982\u679c\u5728\u6267\u884c\u8fc7\u7a0b\u4e2d\uff0c\u4efb\u4f55\u4e00\u4e2a\u64cd\u4f5c\u6267\u884c\u5931\u8d25\uff0c\u5219\u6574\u4e2a\u7ed3\u679c\u662f\u672a\u5b9a\u4e49\u7684\uff1a\u6ca1\u6709\u56de\u6eda\uff0c\u800c\u4e14\u5199\u5165\u7684\u5185\u5bb9\u53d6\u51b3\u4e8e\u6267\u884c\u7a0b\u5e8f\u3002 Note openCypher \u6ca1\u6709\u4e8b\u52a1\u8981\u6c42\u3002 \u793a\u4f8b \u00b6 opencypher \u517c\u5bb9\u8bed\u53e5 # \u5b50\u53e5\u8fde\u63a5\u591a\u4e2a\u67e5\u8be2\u3002 nebula> MATCH p=(v:player{name:\"Tim Duncan\"})--() \\ WITH nodes(p) AS n \\ UNWIND n AS n1 \\ RETURN DISTINCT n1; \u539f\u751f nGQL\uff08\u5206\u53f7\uff09 # \u53ea\u8fd4\u56de\u8fb9\u3002 nebula> SHOW TAGS; SHOW EDGES; # \u63d2\u5165\u591a\u4e2a\u70b9\u3002 nebula> INSERT VERTEX player(name, age) VALUES \"player100\":(\"Tim Duncan\", 42); \\ INSERT VERTEX player(name, age) VALUES \"player101\":(\"Tony Parker\", 36); \\ INSERT VERTEX player(name, age) VALUES \"player102\":(\"LaMarcus Aldridge\", 33); \u539f\u751f nGQL\uff08\u7ba1\u9053\u7b26\uff09 # \u7ba1\u9053\u7b26\u8fde\u63a5\u591a\u4e2a\u67e5\u8be2\u3002 nebula> GO FROM \"player100\" OVER follow YIELD dst(edge) AS id | \\ GO FROM $-.id OVER serve YIELD properties($$).name AS Team, \\ properties($^).name AS Player; +-----------+-----------------+ | Team | Player | +-----------+-----------------+ | \"Spurs\" | \"Tony Parker\" | | \"Hornets\" | \"Tony Parker\" | | \"Spurs\" | \"Manu Ginobili\" | +-----------+-----------------+","title":"\u590d\u5408\u67e5\u8be2"},{"location":"3.ngql-guide/4.variable-and-composite-queries/1.composite-queries/#_1","text":"\u590d\u5408\u67e5\u8be2\u5c06\u6765\u81ea\u4e0d\u540c\u8bf7\u6c42\u7684\u6570\u636e\u653e\u5728\u4e00\u8d77\uff0c\u7136\u540e\u8fdb\u884c\u8fc7\u6ee4\u3001\u5206\u7ec4\u6216\u8005\u6392\u5e8f\u7b49\uff0c\u6700\u540e\u8fd4\u56de\u7ed3\u679c\u3002 NebulaGraph\u652f\u6301\u4e09\u79cd\u65b9\u5f0f\u8fdb\u884c\u590d\u5408\u67e5\u8be2\uff08\u6216\u5b50\u67e5\u8be2\uff09\uff1a \uff08opencypher \u517c\u5bb9\u8bed\u53e5\uff09\u8fde\u63a5\u5404\u4e2a\u5b50\u53e5\uff0c\u8ba9\u5b83\u4eec\u5728\u5f7c\u6b64\u4e4b\u95f4\u63d0\u4f9b\u4e2d\u95f4\u7ed3\u679c\u96c6\u3002 \uff08\u539f\u751f nGQL\uff09\u591a\u4e2a\u67e5\u8be2\u53ef\u4ee5\u5408\u5e76\u5904\u7406\uff0c\u4ee5\u82f1\u6587\u5206\u53f7\uff08;\uff09\u5206\u9694\uff0c\u8fd4\u56de\u6700\u540e\u4e00\u4e2a\u67e5\u8be2\u7684\u7ed3\u679c\u3002 \uff08\u539f\u751f nGQL\uff09\u53ef\u4ee5\u7528\u7ba1\u9053\u7b26\uff08|\uff09\u5c06\u591a\u4e2a\u67e5\u8be2\u8fde\u63a5\u8d77\u6765\uff0c\u4e0a\u4e00\u4e2a\u67e5\u8be2\u7684\u7ed3\u679c\u53ef\u4ee5\u4f5c\u4e3a\u4e0b\u4e00\u4e2a\u67e5\u8be2\u7684\u8f93\u5165\u3002","title":"\u590d\u5408\u67e5\u8be2\uff08\u5b50\u53e5\u7ed3\u6784\uff09"},{"location":"3.ngql-guide/4.variable-and-composite-queries/1.composite-queries/#opencypher","text":"\u5728\u590d\u5408\u67e5\u8be2\u4e2d\uff0c\u8bf7 \u4e0d\u8981 \u6df7\u7528 opencypher \u517c\u5bb9\u8bed\u53e5\u548c\u539f\u751f nGQL \u8bed\u53e5\uff0c\u4f8b\u5982 MATCH ... | GO ... | YIELD ... \u3002 \u5982\u679c\u4f7f\u7528 openCypher \u517c\u5bb9\u8bed\u53e5\uff08 MATCH \u3001 RETURN \u3001 WITH \u7b49\uff09\uff0c\u8bf7\u4e0d\u8981\u4f7f\u7528\u7ba1\u9053\u7b26\u6216\u5206\u53f7\u7ec4\u5408\u5b50\u53e5\u3002 \u5982\u679c\u4f7f\u7528\u539f\u751f nGQL \u8bed\u53e5\uff08 FETCH \u3001 GO \u3001 LOOKUP \u7b49\uff09\uff0c\u5fc5\u987b\u4f7f\u7528\u7ba1\u9053\u7b26\u6216\u5206\u53f7\u7ec4\u5408\u5b50\u53e5\u3002","title":"OpenCypher \u517c\u5bb9\u6027"},{"location":"3.ngql-guide/4.variable-and-composite-queries/1.composite-queries/#_2","text":"\u4f8b\u5982\u4e00\u4e2a\u67e5\u8be2\u7531\u4e09\u4e2a\u5b50\u67e5\u8be2 A\u3001B\u3001C \u7ec4\u6210\uff0cA \u662f\u4e00\u4e2a\u8bfb\u64cd\u4f5c\uff0cB \u662f\u4e00\u4e2a\u8ba1\u7b97\u64cd\u4f5c\uff0cC \u662f\u4e00\u4e2a\u5199\u64cd\u4f5c\uff0c\u5982\u679c\u5728\u6267\u884c\u8fc7\u7a0b\u4e2d\uff0c\u4efb\u4f55\u4e00\u4e2a\u64cd\u4f5c\u6267\u884c\u5931\u8d25\uff0c\u5219\u6574\u4e2a\u7ed3\u679c\u662f\u672a\u5b9a\u4e49\u7684\uff1a\u6ca1\u6709\u56de\u6eda\uff0c\u800c\u4e14\u5199\u5165\u7684\u5185\u5bb9\u53d6\u51b3\u4e8e\u6267\u884c\u7a0b\u5e8f\u3002 Note openCypher \u6ca1\u6709\u4e8b\u52a1\u8981\u6c42\u3002","title":"\u590d\u5408\u67e5\u8be2\u4e0d\u652f\u6301\u4e8b\u52a1"},{"location":"3.ngql-guide/4.variable-and-composite-queries/1.composite-queries/#_3","text":"opencypher \u517c\u5bb9\u8bed\u53e5 # \u5b50\u53e5\u8fde\u63a5\u591a\u4e2a\u67e5\u8be2\u3002 nebula> MATCH p=(v:player{name:\"Tim Duncan\"})--() \\ WITH nodes(p) AS n \\ UNWIND n AS n1 \\ RETURN DISTINCT n1; \u539f\u751f nGQL\uff08\u5206\u53f7\uff09 # \u53ea\u8fd4\u56de\u8fb9\u3002 nebula> SHOW TAGS; SHOW EDGES; # \u63d2\u5165\u591a\u4e2a\u70b9\u3002 nebula> INSERT VERTEX player(name, age) VALUES \"player100\":(\"Tim Duncan\", 42); \\ INSERT VERTEX player(name, age) VALUES \"player101\":(\"Tony Parker\", 36); \\ INSERT VERTEX player(name, age) VALUES \"player102\":(\"LaMarcus Aldridge\", 33); \u539f\u751f nGQL\uff08\u7ba1\u9053\u7b26\uff09 # \u7ba1\u9053\u7b26\u8fde\u63a5\u591a\u4e2a\u67e5\u8be2\u3002 nebula> GO FROM \"player100\" OVER follow YIELD dst(edge) AS id | \\ GO FROM $-.id OVER serve YIELD properties($$).name AS Team, \\ properties($^).name AS Player; +-----------+-----------------+ | Team | Player | +-----------+-----------------+ | \"Spurs\" | \"Tony Parker\" | | \"Hornets\" | \"Tony Parker\" | | \"Spurs\" | \"Manu Ginobili\" | +-----------+-----------------+","title":"\u793a\u4f8b"},{"location":"3.ngql-guide/4.variable-and-composite-queries/2.user-defined-variables/","text":"\u81ea\u5b9a\u4e49\u53d8\u91cf \u00b6 NebulaGraph\u5141\u8bb8\u5c06\u4e00\u6761\u8bed\u53e5\u7684\u7ed3\u679c\u4f5c\u4e3a\u81ea\u5b9a\u4e49\u53d8\u91cf\u4f20\u9012\u7ed9\u53e6\u4e00\u6761\u8bed\u53e5\u3002 OpenCypher \u517c\u5bb9\u6027 \u00b6 \u5f53\u5f15\u7528\u4e00\u4e2a\u53d8\u91cf\u7684\u70b9\u3001\u8fb9\u6216\u8def\u5f84\uff0c\u9700\u8981\u5148\u7ed9\u5b83\u547d\u540d\u3002\u4f8b\u5982\uff1a nebula> MATCH (v:player{name:\"Tim Duncan\"}) RETURN v; +----------------------------------------------------+ | v | +----------------------------------------------------+ | (\"player100\" :player{name: \"Tim Duncan\", age: 42}) | +----------------------------------------------------+ \u793a\u4f8b\u4e2d\u7684 v \u5c31\u662f\u81ea\u5b9a\u4e49\u53d8\u91cf\u3002 Caution \u5728\u540c\u4e00\u4e2a MATCH \u8bed\u53e5\u7684\u6a21\u5f0f\u4e2d\uff0c\u4e0d\u80fd\u91cd\u590d\u4f7f\u7528\u8fb9\u53d8\u91cf\u3002\u4f8b\u5982 e \u4e0d\u80fd\u91cd\u590d\u88ab\u5199\u5728\u6a21\u5f0f p=(v1)-[e*2..2]->(v2)-[e*2..2]->(v3) \u4e2d\u3002 \u539f\u751f nGQL \u00b6 nGQL \u6269\u5c55\u7684\u81ea\u5b9a\u4e49\u53d8\u91cf\u53ef\u4ee5\u8868\u793a\u4e3a $var_name \uff0c var_name \u7531\u5b57\u6bcd\u3001\u6570\u5b57\u6216\u4e0b\u5212\u7ebf\uff08_\uff09\u6784\u6210\uff0c\u4e0d\u5141\u8bb8\u4f7f\u7528\u5176\u4ed6\u5b57\u7b26\u3002 \u81ea\u5b9a\u4e49\u53d8\u91cf\u4ec5\u5728\u5f53\u524d\u6267\u884c\uff08\u672c\u590d\u5408\u67e5\u8be2\u4e2d\uff09\u6709\u6548\uff0c\u6267\u884c\u7ed3\u675f\u540e\u53d8\u91cf\u4e5f\u4f1a\u91ca\u653e\uff0c \u4e0d\u80fd \u5728\u5176\u4ed6\u5ba2\u6237\u7aef\u3001\u6267\u884c\u3001session \u4e2d\u4f7f\u7528\u4e4b\u524d\u7684\u81ea\u5b9a\u4e49\u53d8\u91cf\u3002 \u7528\u6237\u53ef\u4ee5\u5728\u590d\u5408\u67e5\u8be2\u4e2d\u4f7f\u7528\u81ea\u5b9a\u4e49\u53d8\u91cf\u3002\u590d\u5408\u67e5\u8be2\u7684\u8be6\u7ec6\u4fe1\u606f\u8bf7\u53c2\u89c1 \u590d\u5408\u67e5\u8be2 \u3002 Note \u81ea\u5b9a\u4e49\u53d8\u91cf\u533a\u5206\u5927\u5c0f\u5199\u3002 \u5728\u5305\u542b\u6269\u5c55\u7684\u81ea\u5b9a\u4e49\u53d8\u91cf\u7684\u590d\u5408\u8bed\u53e5\u4e2d\uff0c\u7528\u82f1\u6587\u5206\u53f7 ; \u7ed3\u675f\u5b9a\u4e49\u53d8\u91cf\u7684\u8bed\u53e5\u3002\u8be6\u60c5\u53c2\u89c1 nGQL \u98ce\u683c\u6307\u5357 \u3002 \u793a\u4f8b \u00b6 nebula> $var = GO FROM \"player100\" OVER follow YIELD dst(edge) AS id; \\ GO FROM $var.id OVER serve YIELD properties($$).name AS Team, \\ properties($^).name AS Player; +-----------+-----------------+ | Team | Player | +-----------+-----------------+ | \"Spurs\" | \"Tony Parker\" | | \"Hornets\" | \"Tony Parker\" | | \"Spurs\" | \"Manu Ginobili\" | +-----------+-----------------+ \u96c6\u5408\u8fd0\u7b97\u4e0e\u53d8\u91cf\u8bed\u53e5\u7684\u8303\u56f4\u4e0e\u8fd0\u7b97\u987a\u5e8f \u00b6 \u5f53\u6211\u4eec\u9700\u8981\u5bf9\u96c6\u5408\u8fd0\u7b97\u7684\u590d\u5408\u8bed\u53e5\u8fdb\u884c\u53d8\u91cf\u8d4b\u503c\u65f6\uff0c\u9700\u8981\u6ce8\u610f\u7528\u62ec\u53f7\u5305\u88f9\u8bed\u53e5\u7684\u8303\u56f4\uff0c\u6bd4\u5982\u4e0b\u8fb9\u7684\u4f8b\u5b50\u91cc $var \u8d4b\u503c\u7684\u6765\u6e90\u662f\u4e24\u4e2a\u8bed\u53e5 INTERSECT \u4e4b\u540e\u7684\u8f93\u51fa\u3002 $var = ( \\ GO FROM \"player100\" OVER follow \\ YIELD dst(edge) AS id \\ INTERSECT \\ GO FROM \"player100\" OVER follow \\ YIELD dst(edge) AS id \\ ); \\ GO FROM $var.id OVER follow YIELD follow.degree AS degree","title":"\u81ea\u5b9a\u4e49\u53d8\u91cf"},{"location":"3.ngql-guide/4.variable-and-composite-queries/2.user-defined-variables/#_1","text":"NebulaGraph\u5141\u8bb8\u5c06\u4e00\u6761\u8bed\u53e5\u7684\u7ed3\u679c\u4f5c\u4e3a\u81ea\u5b9a\u4e49\u53d8\u91cf\u4f20\u9012\u7ed9\u53e6\u4e00\u6761\u8bed\u53e5\u3002","title":"\u81ea\u5b9a\u4e49\u53d8\u91cf"},{"location":"3.ngql-guide/4.variable-and-composite-queries/2.user-defined-variables/#opencypher","text":"\u5f53\u5f15\u7528\u4e00\u4e2a\u53d8\u91cf\u7684\u70b9\u3001\u8fb9\u6216\u8def\u5f84\uff0c\u9700\u8981\u5148\u7ed9\u5b83\u547d\u540d\u3002\u4f8b\u5982\uff1a nebula> MATCH (v:player{name:\"Tim Duncan\"}) RETURN v; +----------------------------------------------------+ | v | +----------------------------------------------------+ | (\"player100\" :player{name: \"Tim Duncan\", age: 42}) | +----------------------------------------------------+ \u793a\u4f8b\u4e2d\u7684 v \u5c31\u662f\u81ea\u5b9a\u4e49\u53d8\u91cf\u3002 Caution \u5728\u540c\u4e00\u4e2a MATCH \u8bed\u53e5\u7684\u6a21\u5f0f\u4e2d\uff0c\u4e0d\u80fd\u91cd\u590d\u4f7f\u7528\u8fb9\u53d8\u91cf\u3002\u4f8b\u5982 e \u4e0d\u80fd\u91cd\u590d\u88ab\u5199\u5728\u6a21\u5f0f p=(v1)-[e*2..2]->(v2)-[e*2..2]->(v3) \u4e2d\u3002","title":"OpenCypher \u517c\u5bb9\u6027"},{"location":"3.ngql-guide/4.variable-and-composite-queries/2.user-defined-variables/#ngql","text":"nGQL \u6269\u5c55\u7684\u81ea\u5b9a\u4e49\u53d8\u91cf\u53ef\u4ee5\u8868\u793a\u4e3a $var_name \uff0c var_name \u7531\u5b57\u6bcd\u3001\u6570\u5b57\u6216\u4e0b\u5212\u7ebf\uff08_\uff09\u6784\u6210\uff0c\u4e0d\u5141\u8bb8\u4f7f\u7528\u5176\u4ed6\u5b57\u7b26\u3002 \u81ea\u5b9a\u4e49\u53d8\u91cf\u4ec5\u5728\u5f53\u524d\u6267\u884c\uff08\u672c\u590d\u5408\u67e5\u8be2\u4e2d\uff09\u6709\u6548\uff0c\u6267\u884c\u7ed3\u675f\u540e\u53d8\u91cf\u4e5f\u4f1a\u91ca\u653e\uff0c \u4e0d\u80fd \u5728\u5176\u4ed6\u5ba2\u6237\u7aef\u3001\u6267\u884c\u3001session \u4e2d\u4f7f\u7528\u4e4b\u524d\u7684\u81ea\u5b9a\u4e49\u53d8\u91cf\u3002 \u7528\u6237\u53ef\u4ee5\u5728\u590d\u5408\u67e5\u8be2\u4e2d\u4f7f\u7528\u81ea\u5b9a\u4e49\u53d8\u91cf\u3002\u590d\u5408\u67e5\u8be2\u7684\u8be6\u7ec6\u4fe1\u606f\u8bf7\u53c2\u89c1 \u590d\u5408\u67e5\u8be2 \u3002 Note \u81ea\u5b9a\u4e49\u53d8\u91cf\u533a\u5206\u5927\u5c0f\u5199\u3002 \u5728\u5305\u542b\u6269\u5c55\u7684\u81ea\u5b9a\u4e49\u53d8\u91cf\u7684\u590d\u5408\u8bed\u53e5\u4e2d\uff0c\u7528\u82f1\u6587\u5206\u53f7 ; \u7ed3\u675f\u5b9a\u4e49\u53d8\u91cf\u7684\u8bed\u53e5\u3002\u8be6\u60c5\u53c2\u89c1 nGQL \u98ce\u683c\u6307\u5357 \u3002","title":"\u539f\u751f nGQL"},{"location":"3.ngql-guide/4.variable-and-composite-queries/2.user-defined-variables/#_2","text":"nebula> $var = GO FROM \"player100\" OVER follow YIELD dst(edge) AS id; \\ GO FROM $var.id OVER serve YIELD properties($$).name AS Team, \\ properties($^).name AS Player; +-----------+-----------------+ | Team | Player | +-----------+-----------------+ | \"Spurs\" | \"Tony Parker\" | | \"Hornets\" | \"Tony Parker\" | | \"Spurs\" | \"Manu Ginobili\" | +-----------+-----------------+","title":"\u793a\u4f8b"},{"location":"3.ngql-guide/4.variable-and-composite-queries/2.user-defined-variables/#_3","text":"\u5f53\u6211\u4eec\u9700\u8981\u5bf9\u96c6\u5408\u8fd0\u7b97\u7684\u590d\u5408\u8bed\u53e5\u8fdb\u884c\u53d8\u91cf\u8d4b\u503c\u65f6\uff0c\u9700\u8981\u6ce8\u610f\u7528\u62ec\u53f7\u5305\u88f9\u8bed\u53e5\u7684\u8303\u56f4\uff0c\u6bd4\u5982\u4e0b\u8fb9\u7684\u4f8b\u5b50\u91cc $var \u8d4b\u503c\u7684\u6765\u6e90\u662f\u4e24\u4e2a\u8bed\u53e5 INTERSECT \u4e4b\u540e\u7684\u8f93\u51fa\u3002 $var = ( \\ GO FROM \"player100\" OVER follow \\ YIELD dst(edge) AS id \\ INTERSECT \\ GO FROM \"player100\" OVER follow \\ YIELD dst(edge) AS id \\ ); \\ GO FROM $var.id OVER follow YIELD follow.degree AS degree","title":"\u96c6\u5408\u8fd0\u7b97\u4e0e\u53d8\u91cf\u8bed\u53e5\u7684\u8303\u56f4\u4e0e\u8fd0\u7b97\u987a\u5e8f"},{"location":"3.ngql-guide/4.variable-and-composite-queries/3.property-reference/","text":"\u5f15\u7528\u5c5e\u6027 \u00b6 \u7528\u6237\u53ef\u4ee5\u5728 WHERE \u548c YIELD \u5b50\u53e5\u4e2d\u5f15\u7528\u70b9\u6216\u8fb9\u7684\u5c5e\u6027\u3002 Note \u672c\u529f\u80fd\u4ec5\u9002\u7528\u4e8e\u539f\u751f nGQL \u7684 GO \u8bed\u53e5\u3002 \u5f15\u7528\u70b9\u7684\u5c5e\u6027 \u00b6 \u8d77\u59cb\u70b9 \u00b6 $^.<tag_name>.<prop_name> \u53c2\u6570 \u8bf4\u660e $^ \u8d77\u59cb\u70b9 tag_name \u70b9\u7684 Tag \u540d\u79f0 prop_name Tag \u5185\u7684\u5c5e\u6027\u540d\u79f0 \u76ee\u7684\u70b9 \u00b6 $$.<tag_name>.<prop_name> \u53c2\u6570 \u8bf4\u660e $$ \u76ee\u7684\u70b9 tag_name \u70b9\u7684 Tag \u540d\u79f0 prop_name Tag \u5185\u7684\u5c5e\u6027\u540d\u79f0 \u5f15\u7528\u8fb9\u7684\u5c5e\u6027 \u00b6 \u5f15\u7528\u81ea\u5b9a\u4e49\u7684\u8fb9\u5c5e\u6027 \u00b6 <edge_type>.<prop_name> \u53c2\u6570 \u8bf4\u660e edge_type Edge type prop_name Edge type \u7684\u5c5e\u6027\u540d\u79f0 \u5f15\u7528\u5185\u7f6e\u7684\u8fb9\u5c5e\u6027 \u00b6 \u9664\u4e86\u81ea\u5b9a\u4e49\u7684\u8fb9\u5c5e\u6027\uff0c\u6bcf\u6761\u8fb9\u8fd8\u6709\u5982\u4e0b\u56db\u79cd\u5185\u7f6e\u5c5e\u6027\uff1a \u53c2\u6570 \u8bf4\u660e _src \u8fb9\u7684\u8d77\u59cb\u70b9 _dst \u8fb9\u7684\u76ee\u7684\u70b9 _type \u8fb9\u7684\u7c7b\u578b\u5185\u90e8\u7f16\u7801\uff0c\u6b63\u8d1f\u53f7\u8868\u793a\u65b9\u5411\uff1a\u6b63\u6570\u4e3a\u6b63\u5411\u8fb9\uff0c\u8d1f\u6570\u4e3a\u9006\u5411\u8fb9 _rank \u8fb9\u7684 rank \u503c \u793a\u4f8b \u00b6 # \u8fd4\u56de\u8d77\u59cb\u70b9\u7684 Tag player \u7684 name \u5c5e\u6027\u503c\u548c\u76ee\u7684\u70b9\u7684 Tag player \u7684 age \u5c5e\u6027\u503c\u3002 nebula> GO FROM \"player100\" OVER follow YIELD $^.player.name AS startName, $$.player.age AS endAge; +--------------+--------+ | startName | endAge | +--------------+--------+ | \"Tim Duncan\" | 36 | | \"Tim Duncan\" | 41 | +--------------+--------+ # \u8fd4\u56de Edge type follow \u7684 degree \u5c5e\u6027\u503c\u3002 nebula> GO FROM \"player100\" OVER follow YIELD follow.degree; +---------------+ | follow.degree | +---------------+ | 95 | +---------------+ # \u8fd4\u56de EdgeType \u662f follow \u7684\u8d77\u59cb\u70b9 VID\u3001\u76ee\u7684\u70b9 VID\u3001EdgeType \u7f16\u7801\uff08\u6b63\u6570\u4e3a\u6b63\u5411\u8fb9\uff0c\u8d1f\u6570\u4e3a\u9006\u5411\u8fb9\uff09\uff0c\u548c\u8fb9\u7684 rank \u503c\u3002 nebula> GO FROM \"player100\" OVER follow YIELD follow._src, follow._dst, follow._type, follow._rank; +-------------+-------------+--------------+--------------+ | follow._src | follow._dst | follow._type | follow._rank | +-------------+-------------+--------------+--------------+ | \"player100\" | \"player101\" | 17 | 0 | | \"player100\" | \"player125\" | 17 | 0 | +-------------+-------------+--------------+--------------+ \u5386\u53f2\u7248\u672c\u517c\u5bb9\u6027 \u4eceNebulaGraph 2.6.0 \u8d77\u652f\u6301\u4e86\u65b0\u7684 Schema \u76f8\u5173\u51fd\u6570 \u3002\u4ee5\u4e0a\u793a\u4f8b\u5728NebulaGraph 3.6.0 \u4e2d\u7684\u8fd1\u4f3c\u5199\u6cd5\u5982\u4e0b\uff1a GO FROM \"player100\" OVER follow YIELD properties($^).name AS startName, properties($$).age AS endAge; GO FROM \"player100\" OVER follow YIELD properties(edge).degree; GO FROM \"player100\" OVER follow YIELD src(edge), dst(edge), type(edge), rank(edge); NebulaGraph 3.6.0 \u517c\u5bb9\u65b0\u65e7\u8bed\u6cd5\u3002","title":"\u5f15\u7528\u5c5e\u6027"},{"location":"3.ngql-guide/4.variable-and-composite-queries/3.property-reference/#_1","text":"\u7528\u6237\u53ef\u4ee5\u5728 WHERE \u548c YIELD \u5b50\u53e5\u4e2d\u5f15\u7528\u70b9\u6216\u8fb9\u7684\u5c5e\u6027\u3002 Note \u672c\u529f\u80fd\u4ec5\u9002\u7528\u4e8e\u539f\u751f nGQL \u7684 GO \u8bed\u53e5\u3002","title":"\u5f15\u7528\u5c5e\u6027"},{"location":"3.ngql-guide/4.variable-and-composite-queries/3.property-reference/#_2","text":"","title":"\u5f15\u7528\u70b9\u7684\u5c5e\u6027"},{"location":"3.ngql-guide/4.variable-and-composite-queries/3.property-reference/#_3","text":"$^.<tag_name>.<prop_name> \u53c2\u6570 \u8bf4\u660e $^ \u8d77\u59cb\u70b9 tag_name \u70b9\u7684 Tag \u540d\u79f0 prop_name Tag \u5185\u7684\u5c5e\u6027\u540d\u79f0","title":"\u8d77\u59cb\u70b9"},{"location":"3.ngql-guide/4.variable-and-composite-queries/3.property-reference/#_4","text":"$$.<tag_name>.<prop_name> \u53c2\u6570 \u8bf4\u660e $$ \u76ee\u7684\u70b9 tag_name \u70b9\u7684 Tag \u540d\u79f0 prop_name Tag \u5185\u7684\u5c5e\u6027\u540d\u79f0","title":"\u76ee\u7684\u70b9"},{"location":"3.ngql-guide/4.variable-and-composite-queries/3.property-reference/#_5","text":"","title":"\u5f15\u7528\u8fb9\u7684\u5c5e\u6027"},{"location":"3.ngql-guide/4.variable-and-composite-queries/3.property-reference/#_6","text":"<edge_type>.<prop_name> \u53c2\u6570 \u8bf4\u660e edge_type Edge type prop_name Edge type \u7684\u5c5e\u6027\u540d\u79f0","title":"\u5f15\u7528\u81ea\u5b9a\u4e49\u7684\u8fb9\u5c5e\u6027"},{"location":"3.ngql-guide/4.variable-and-composite-queries/3.property-reference/#_7","text":"\u9664\u4e86\u81ea\u5b9a\u4e49\u7684\u8fb9\u5c5e\u6027\uff0c\u6bcf\u6761\u8fb9\u8fd8\u6709\u5982\u4e0b\u56db\u79cd\u5185\u7f6e\u5c5e\u6027\uff1a \u53c2\u6570 \u8bf4\u660e _src \u8fb9\u7684\u8d77\u59cb\u70b9 _dst \u8fb9\u7684\u76ee\u7684\u70b9 _type \u8fb9\u7684\u7c7b\u578b\u5185\u90e8\u7f16\u7801\uff0c\u6b63\u8d1f\u53f7\u8868\u793a\u65b9\u5411\uff1a\u6b63\u6570\u4e3a\u6b63\u5411\u8fb9\uff0c\u8d1f\u6570\u4e3a\u9006\u5411\u8fb9 _rank \u8fb9\u7684 rank \u503c","title":"\u5f15\u7528\u5185\u7f6e\u7684\u8fb9\u5c5e\u6027"},{"location":"3.ngql-guide/4.variable-and-composite-queries/3.property-reference/#_8","text":"# \u8fd4\u56de\u8d77\u59cb\u70b9\u7684 Tag player \u7684 name \u5c5e\u6027\u503c\u548c\u76ee\u7684\u70b9\u7684 Tag player \u7684 age \u5c5e\u6027\u503c\u3002 nebula> GO FROM \"player100\" OVER follow YIELD $^.player.name AS startName, $$.player.age AS endAge; +--------------+--------+ | startName | endAge | +--------------+--------+ | \"Tim Duncan\" | 36 | | \"Tim Duncan\" | 41 | +--------------+--------+ # \u8fd4\u56de Edge type follow \u7684 degree \u5c5e\u6027\u503c\u3002 nebula> GO FROM \"player100\" OVER follow YIELD follow.degree; +---------------+ | follow.degree | +---------------+ | 95 | +---------------+ # \u8fd4\u56de EdgeType \u662f follow \u7684\u8d77\u59cb\u70b9 VID\u3001\u76ee\u7684\u70b9 VID\u3001EdgeType \u7f16\u7801\uff08\u6b63\u6570\u4e3a\u6b63\u5411\u8fb9\uff0c\u8d1f\u6570\u4e3a\u9006\u5411\u8fb9\uff09\uff0c\u548c\u8fb9\u7684 rank \u503c\u3002 nebula> GO FROM \"player100\" OVER follow YIELD follow._src, follow._dst, follow._type, follow._rank; +-------------+-------------+--------------+--------------+ | follow._src | follow._dst | follow._type | follow._rank | +-------------+-------------+--------------+--------------+ | \"player100\" | \"player101\" | 17 | 0 | | \"player100\" | \"player125\" | 17 | 0 | +-------------+-------------+--------------+--------------+ \u5386\u53f2\u7248\u672c\u517c\u5bb9\u6027 \u4eceNebulaGraph 2.6.0 \u8d77\u652f\u6301\u4e86\u65b0\u7684 Schema \u76f8\u5173\u51fd\u6570 \u3002\u4ee5\u4e0a\u793a\u4f8b\u5728NebulaGraph 3.6.0 \u4e2d\u7684\u8fd1\u4f3c\u5199\u6cd5\u5982\u4e0b\uff1a GO FROM \"player100\" OVER follow YIELD properties($^).name AS startName, properties($$).age AS endAge; GO FROM \"player100\" OVER follow YIELD properties(edge).degree; GO FROM \"player100\" OVER follow YIELD src(edge), dst(edge), type(edge), rank(edge); NebulaGraph 3.6.0 \u517c\u5bb9\u65b0\u65e7\u8bed\u6cd5\u3002","title":"\u793a\u4f8b"},{"location":"3.ngql-guide/5.operators/1.comparison/","text":"\u6bd4\u8f83\u7b26 \u00b6 NebulaGraph\u652f\u6301\u7684\u6bd4\u8f83\u7b26\u5982\u4e0b\u3002 \u7b26\u53f7 \u8bf4\u660e == \u76f8\u7b49 != , <> \u4e0d\u7b49\u4e8e > \u5927\u4e8e >= \u5927\u4e8e\u7b49\u4e8e < \u5c0f\u4e8e <= \u5c0f\u4e8e\u7b49\u4e8e IS NULL \u4e3a NULL IS NOT NULL \u4e0d\u4e3a NULL IS EMPTY \u4e0d\u5b58\u5728 IS NOT EMPTY \u5b58\u5728 \u6bd4\u8f83\u64cd\u4f5c\u7684\u7ed3\u679c\u662f true \u6216\u8005 false \u3002 Note \u6bd4\u8f83\u4e0d\u540c\u7c7b\u578b\u7684\u503c\u901a\u5e38\u6ca1\u6709\u5b9a\u4e49\uff0c\u7ed3\u679c\u53ef\u80fd\u662f NULL \u6216\u5176\u5b83\u3002 EMPTY \u5f53\u524d\u4ec5\u7528\u4e8e\u5224\u65ad\uff0c\u4e0d\u652f\u6301\u51fd\u6570\u6216\u8005\u8fd0\u7b97\u64cd\u4f5c\uff0c\u5305\u62ec\u4e14\u4e0d\u9650\u4e8e GROUP BY \u3001 count() \u3001 sum() \u3001 max() \u3001 hash() \u3001 collect() \u3001 + \u3001 * \u3002 OpenCypher \u517c\u5bb9\u6027 \u00b6 openCypher \u4e2d\u6ca1\u6709 EMPTY \uff0c\u56e0\u6b64\u4e0d\u652f\u6301\u5728 MATCH \u8bed\u53e5\u4e2d\u4f7f\u7528 EMPTY \u3002 \u793a\u4f8b \u00b6 == \u00b6 \u5b57\u7b26\u4e32\u6bd4\u8f83\u65f6\uff0c\u4f1a\u533a\u5206\u5927\u5c0f\u5199\u3002\u4e0d\u540c\u7c7b\u578b\u7684\u503c\u4e0d\u76f8\u7b49\u3002 Note nGQL \u4e2d\u7684\u76f8\u7b49\u7b26\u53f7\u662f == \uff0copenCypher \u4e2d\u7684\u76f8\u7b49\u7b26\u53f7\u662f = \u3002 nebula> RETURN 'A' == 'a', toUpper('A') == toUpper('a'), toLower('A') == toLower('a'); +------------+------------------------------+------------------------------+ | (\"A\"==\"a\") | (toUpper(\"A\")==toUpper(\"a\")) | (toLower(\"A\")==toLower(\"a\")) | +------------+------------------------------+------------------------------+ | false | true | true | +------------+------------------------------+------------------------------+ nebula> RETURN '2' == 2, toInteger('2') == 2; +----------+---------------------+ | (\"2\"==2) | (toInteger(\"2\")==2) | +----------+---------------------+ | false | true | +----------+---------------------+ > \u00b6 nebula> RETURN 3 > 2; +-------+ | (3>2) | +-------+ | true | +-------+ nebula> WITH 4 AS one, 3 AS two \\ RETURN one > two AS result; +--------+ | result | +--------+ | true | +--------+ >= \u00b6 nebula> RETURN 2 >= \"2\", 2 >= 2; +----------+--------+ | (2>=\"2\") | (2>=2) | +----------+--------+ | __NULL__ | true | +----------+--------+ < \u00b6 nebula> YIELD 2.0 < 1.9; +---------+ | (2<1.9) | +---------+ | false | +---------+ <= \u00b6 nebula> YIELD 0.11 <= 0.11; +--------------+ | (0.11<=0.11) | +--------------+ | true | +--------------+ != \u00b6 nebula> YIELD 1 != '1'; +----------+ | (1!=\"1\") | +----------+ | true | +----------+ IS [NOT] NULL \u00b6 nebula> RETURN null IS NULL AS value1, null == null AS value2, null != null AS value3; +--------+----------+----------+ | value1 | value2 | value3 | +--------+----------+----------+ | true | __NULL__ | __NULL__ | +--------+----------+----------+ nebula> RETURN length(NULL), size(NULL), count(NULL), NULL IS NULL, NULL IS NOT NULL, sin(NULL), NULL + NULL, [1, NULL] IS NULL; +--------------+------------+-------------+--------------+------------------+-----------+-------------+------------------+ | length(NULL) | size(NULL) | count(NULL) | NULL IS NULL | NULL IS NOT NULL | sin(NULL) | (NULL+NULL) | [1,NULL] IS NULL | +--------------+------------+-------------+--------------+------------------+-----------+-------------+------------------+ | __NULL__ | __NULL__ | 0 | true | false | __NULL__ | __NULL__ | false | +--------------+------------+-------------+--------------+------------------+-----------+-------------+------------------+ nebula> WITH {name: null} AS `map` \\ RETURN `map`.name IS NOT NULL; +----------------------+ | map.name IS NOT NULL | +----------------------+ | false | +----------------------+ nebula> WITH {name: 'Mats', name2: 'Pontus'} AS map1, \\ {name: null} AS map2, {notName: 0, notName2: null } AS map3 \\ RETURN map1.name IS NULL, map2.name IS NOT NULL, map3.name IS NULL; +-------------------+-----------------------+-------------------+ | map1.name IS NULL | map2.name IS NOT NULL | map3.name IS NULL | +-------------------+-----------------------+-------------------+ | false | false | true | +-------------------+-----------------------+-------------------+ nebula> MATCH (n:player) \\ RETURN n.player.age IS NULL, n.player.name IS NOT NULL, n.player.empty IS NULL; +----------------------+---------------------------+------------------------+ | n.player.age IS NULL | n.player.name IS NOT NULL | n.player.empty IS NULL | +----------------------+---------------------------+------------------------+ | false | true | true | | false | true | true | ... IS [NOT] EMPTY \u00b6 nebula> RETURN null IS EMPTY; +---------------+ | NULL IS EMPTY | +---------------+ | false | +---------------+ nebula> RETURN \"a\" IS NOT EMPTY; +------------------+ | \"a\" IS NOT EMPTY | +------------------+ | true | +------------------+ nebula> GO FROM \"player100\" OVER * WHERE properties($$).name IS NOT EMPTY YIELD dst(edge); +-------------+ | dst(EDGE) | +-------------+ | \"team204\" | | \"player101\" | | \"player125\" | +-------------+","title":"\u6bd4\u8f83\u7b26"},{"location":"3.ngql-guide/5.operators/1.comparison/#_1","text":"NebulaGraph\u652f\u6301\u7684\u6bd4\u8f83\u7b26\u5982\u4e0b\u3002 \u7b26\u53f7 \u8bf4\u660e == \u76f8\u7b49 != , <> \u4e0d\u7b49\u4e8e > \u5927\u4e8e >= \u5927\u4e8e\u7b49\u4e8e < \u5c0f\u4e8e <= \u5c0f\u4e8e\u7b49\u4e8e IS NULL \u4e3a NULL IS NOT NULL \u4e0d\u4e3a NULL IS EMPTY \u4e0d\u5b58\u5728 IS NOT EMPTY \u5b58\u5728 \u6bd4\u8f83\u64cd\u4f5c\u7684\u7ed3\u679c\u662f true \u6216\u8005 false \u3002 Note \u6bd4\u8f83\u4e0d\u540c\u7c7b\u578b\u7684\u503c\u901a\u5e38\u6ca1\u6709\u5b9a\u4e49\uff0c\u7ed3\u679c\u53ef\u80fd\u662f NULL \u6216\u5176\u5b83\u3002 EMPTY \u5f53\u524d\u4ec5\u7528\u4e8e\u5224\u65ad\uff0c\u4e0d\u652f\u6301\u51fd\u6570\u6216\u8005\u8fd0\u7b97\u64cd\u4f5c\uff0c\u5305\u62ec\u4e14\u4e0d\u9650\u4e8e GROUP BY \u3001 count() \u3001 sum() \u3001 max() \u3001 hash() \u3001 collect() \u3001 + \u3001 * \u3002","title":"\u6bd4\u8f83\u7b26"},{"location":"3.ngql-guide/5.operators/1.comparison/#opencypher","text":"openCypher \u4e2d\u6ca1\u6709 EMPTY \uff0c\u56e0\u6b64\u4e0d\u652f\u6301\u5728 MATCH \u8bed\u53e5\u4e2d\u4f7f\u7528 EMPTY \u3002","title":"OpenCypher \u517c\u5bb9\u6027"},{"location":"3.ngql-guide/5.operators/1.comparison/#_2","text":"","title":"\u793a\u4f8b"},{"location":"3.ngql-guide/5.operators/1.comparison/#_3","text":"\u5b57\u7b26\u4e32\u6bd4\u8f83\u65f6\uff0c\u4f1a\u533a\u5206\u5927\u5c0f\u5199\u3002\u4e0d\u540c\u7c7b\u578b\u7684\u503c\u4e0d\u76f8\u7b49\u3002 Note nGQL \u4e2d\u7684\u76f8\u7b49\u7b26\u53f7\u662f == \uff0copenCypher \u4e2d\u7684\u76f8\u7b49\u7b26\u53f7\u662f = \u3002 nebula> RETURN 'A' == 'a', toUpper('A') == toUpper('a'), toLower('A') == toLower('a'); +------------+------------------------------+------------------------------+ | (\"A\"==\"a\") | (toUpper(\"A\")==toUpper(\"a\")) | (toLower(\"A\")==toLower(\"a\")) | +------------+------------------------------+------------------------------+ | false | true | true | +------------+------------------------------+------------------------------+ nebula> RETURN '2' == 2, toInteger('2') == 2; +----------+---------------------+ | (\"2\"==2) | (toInteger(\"2\")==2) | +----------+---------------------+ | false | true | +----------+---------------------+","title":"=="},{"location":"3.ngql-guide/5.operators/1.comparison/#_4","text":"nebula> RETURN 3 > 2; +-------+ | (3>2) | +-------+ | true | +-------+ nebula> WITH 4 AS one, 3 AS two \\ RETURN one > two AS result; +--------+ | result | +--------+ | true | +--------+","title":"&gt;"},{"location":"3.ngql-guide/5.operators/1.comparison/#_5","text":"nebula> RETURN 2 >= \"2\", 2 >= 2; +----------+--------+ | (2>=\"2\") | (2>=2) | +----------+--------+ | __NULL__ | true | +----------+--------+","title":"&gt;="},{"location":"3.ngql-guide/5.operators/1.comparison/#_6","text":"nebula> YIELD 2.0 < 1.9; +---------+ | (2<1.9) | +---------+ | false | +---------+","title":"&lt;"},{"location":"3.ngql-guide/5.operators/1.comparison/#_7","text":"nebula> YIELD 0.11 <= 0.11; +--------------+ | (0.11<=0.11) | +--------------+ | true | +--------------+","title":"&lt;="},{"location":"3.ngql-guide/5.operators/1.comparison/#_8","text":"nebula> YIELD 1 != '1'; +----------+ | (1!=\"1\") | +----------+ | true | +----------+","title":"!="},{"location":"3.ngql-guide/5.operators/1.comparison/#is_not_null","text":"nebula> RETURN null IS NULL AS value1, null == null AS value2, null != null AS value3; +--------+----------+----------+ | value1 | value2 | value3 | +--------+----------+----------+ | true | __NULL__ | __NULL__ | +--------+----------+----------+ nebula> RETURN length(NULL), size(NULL), count(NULL), NULL IS NULL, NULL IS NOT NULL, sin(NULL), NULL + NULL, [1, NULL] IS NULL; +--------------+------------+-------------+--------------+------------------+-----------+-------------+------------------+ | length(NULL) | size(NULL) | count(NULL) | NULL IS NULL | NULL IS NOT NULL | sin(NULL) | (NULL+NULL) | [1,NULL] IS NULL | +--------------+------------+-------------+--------------+------------------+-----------+-------------+------------------+ | __NULL__ | __NULL__ | 0 | true | false | __NULL__ | __NULL__ | false | +--------------+------------+-------------+--------------+------------------+-----------+-------------+------------------+ nebula> WITH {name: null} AS `map` \\ RETURN `map`.name IS NOT NULL; +----------------------+ | map.name IS NOT NULL | +----------------------+ | false | +----------------------+ nebula> WITH {name: 'Mats', name2: 'Pontus'} AS map1, \\ {name: null} AS map2, {notName: 0, notName2: null } AS map3 \\ RETURN map1.name IS NULL, map2.name IS NOT NULL, map3.name IS NULL; +-------------------+-----------------------+-------------------+ | map1.name IS NULL | map2.name IS NOT NULL | map3.name IS NULL | +-------------------+-----------------------+-------------------+ | false | false | true | +-------------------+-----------------------+-------------------+ nebula> MATCH (n:player) \\ RETURN n.player.age IS NULL, n.player.name IS NOT NULL, n.player.empty IS NULL; +----------------------+---------------------------+------------------------+ | n.player.age IS NULL | n.player.name IS NOT NULL | n.player.empty IS NULL | +----------------------+---------------------------+------------------------+ | false | true | true | | false | true | true | ...","title":"IS [NOT] NULL"},{"location":"3.ngql-guide/5.operators/1.comparison/#is_not_empty","text":"nebula> RETURN null IS EMPTY; +---------------+ | NULL IS EMPTY | +---------------+ | false | +---------------+ nebula> RETURN \"a\" IS NOT EMPTY; +------------------+ | \"a\" IS NOT EMPTY | +------------------+ | true | +------------------+ nebula> GO FROM \"player100\" OVER * WHERE properties($$).name IS NOT EMPTY YIELD dst(edge); +-------------+ | dst(EDGE) | +-------------+ | \"team204\" | | \"player101\" | | \"player125\" | +-------------+","title":"IS [NOT] EMPTY"},{"location":"3.ngql-guide/5.operators/10.arithmetic/","text":"\u7b97\u672f\u8fd0\u7b97\u7b26 \u00b6 NebulaGraph\u652f\u6301\u7684\u7b97\u672f\u8fd0\u7b97\u7b26\u5982\u4e0b\u3002 \u7b26\u53f7 \u8bf4\u660e + \u52a0\u6cd5 - \u51cf\u6cd5 * \u4e58\u6cd5 / \u9664\u6cd5 % \u53d6\u6a21 - \u8d1f\u6570\u7b26\u53f7 \u793a\u4f8b \u00b6 nebula> RETURN 1+2 AS result; +--------+ | result | +--------+ | 3 | +--------+ nebula> RETURN -10+5 AS result; +--------+ | result | +--------+ | -5 | +--------+ nebula> RETURN (3*8)%5 AS result; +--------+ | result | +--------+ | 4 | +--------+","title":"\u7b97\u672f\u8fd0\u7b97\u7b26"},{"location":"3.ngql-guide/5.operators/10.arithmetic/#_1","text":"NebulaGraph\u652f\u6301\u7684\u7b97\u672f\u8fd0\u7b97\u7b26\u5982\u4e0b\u3002 \u7b26\u53f7 \u8bf4\u660e + \u52a0\u6cd5 - \u51cf\u6cd5 * \u4e58\u6cd5 / \u9664\u6cd5 % \u53d6\u6a21 - \u8d1f\u6570\u7b26\u53f7","title":"\u7b97\u672f\u8fd0\u7b97\u7b26"},{"location":"3.ngql-guide/5.operators/10.arithmetic/#_2","text":"nebula> RETURN 1+2 AS result; +--------+ | result | +--------+ | 3 | +--------+ nebula> RETURN -10+5 AS result; +--------+ | result | +--------+ | -5 | +--------+ nebula> RETURN (3*8)%5 AS result; +--------+ | result | +--------+ | 4 | +--------+","title":"\u793a\u4f8b"},{"location":"3.ngql-guide/5.operators/2.boolean/","text":"\u5e03\u5c14\u7b26 \u00b6 NebulaGraph\u652f\u6301\u7684\u5e03\u5c14\u7b26\u5982\u4e0b\u3002 \u7b26\u53f7 \u8bf4\u660e AND \u903b\u8f91\u4e0e OR \u903b\u8f91\u6216 NOT \u903b\u8f91\u975e XOR \u903b\u8f91\u5f02\u6216 \u5bf9\u4e8e\u4ee5\u4e0a\u8fd0\u7b97\u7684\u4f18\u5148\u7ea7\uff0c\u8bf7\u53c2\u89c1 \u8fd0\u7b97\u4f18\u5148\u7ea7 \u3002 \u5bf9\u4e8e\u5e26\u6709 NULL \u7684\u903b\u8f91\u8fd0\u7b97\uff0c\u8bf7\u53c2\u89c1 NULL \u3002 Note \u975e 0 \u6570\u5b57\u4e0d\u80fd\u8f6c\u6362\u4e3a\u5e03\u5c14\u503c\u3002","title":"\u5e03\u5c14\u7b26"},{"location":"3.ngql-guide/5.operators/2.boolean/#_1","text":"NebulaGraph\u652f\u6301\u7684\u5e03\u5c14\u7b26\u5982\u4e0b\u3002 \u7b26\u53f7 \u8bf4\u660e AND \u903b\u8f91\u4e0e OR \u903b\u8f91\u6216 NOT \u903b\u8f91\u975e XOR \u903b\u8f91\u5f02\u6216 \u5bf9\u4e8e\u4ee5\u4e0a\u8fd0\u7b97\u7684\u4f18\u5148\u7ea7\uff0c\u8bf7\u53c2\u89c1 \u8fd0\u7b97\u4f18\u5148\u7ea7 \u3002 \u5bf9\u4e8e\u5e26\u6709 NULL \u7684\u903b\u8f91\u8fd0\u7b97\uff0c\u8bf7\u53c2\u89c1 NULL \u3002 Note \u975e 0 \u6570\u5b57\u4e0d\u80fd\u8f6c\u6362\u4e3a\u5e03\u5c14\u503c\u3002","title":"\u5e03\u5c14\u7b26"},{"location":"3.ngql-guide/5.operators/4.pipe/","text":"\u7ba1\u9053\u7b26 \u00b6 nGQL \u652f\u6301\u4f7f\u7528\u7ba1\u9053\u7b26\uff08|\uff09\u5c06\u591a\u4e2a\u67e5\u8be2\u7ec4\u5408\u8d77\u6765\u3002 openCypher \u517c\u5bb9\u6027 \u00b6 \u7ba1\u9053\u7b26\u4ec5\u9002\u7528\u4e8e\u539f\u751f nGQL\u3002 \u8bed\u6cd5 \u00b6 nGQL \u548c SQL \u4e4b\u95f4\u7684\u4e00\u4e2a\u4e3b\u8981\u533a\u522b\u662f\u5b50\u67e5\u8be2\u7684\u7ec4\u6210\u65b9\u5f0f\u3002 \u5728 SQL \u4e2d\uff0c\u5b50\u67e5\u8be2\u662f\u5d4c\u5957\u5728\u67e5\u8be2\u8bed\u53e5\u4e2d\u7684\u3002 \u5728 nGQL \u4e2d\uff0c\u5b50\u67e5\u8be2\u662f\u901a\u8fc7\u7c7b\u4f3c shell \u4e2d\u7684\u7ba1\u9053\u7b26\uff08 | \uff09\u5b9e\u73b0\u7684\u3002 \u793a\u4f8b \u00b6 nebula> GO FROM \"player100\" OVER follow \\ YIELD dst(edge) AS dstid, properties($$).name AS Name | \\ GO FROM $-.dstid OVER follow YIELD dst(edge); +-------------+ | dst(EDGE) | +-------------+ | \"player100\" | | \"player102\" | | \"player125\" | | \"player100\" | +-------------+ \u5fc5\u987b\u5728 YIELD \u5b50\u53e5\u4e2d\u4e3a\u9700\u8981\u7684\u8fd4\u56de\u7ed3\u679c\u8bbe\u7f6e\u522b\u540d\uff0c\u624d\u80fd\u5728\u7ba1\u9053\u7b26\u53f3\u4fa7\u4f7f\u7528\u5f15\u7528\u7b26 $- \uff0c\u4f8b\u5982\u793a\u4f8b\u4e2d\u7684 $-.dstid \u3002 \u6027\u80fd\u63d0\u793a \u00b6 NebulaGraph\u4e2d\u7684\u7ba1\u9053\u5bf9\u6027\u80fd\u6709\u5f71\u54cd\uff0c\u4ee5 A | B \u4e3a\u4f8b\uff0c\u4f53\u73b0\u5728\u4ee5\u4e0b\u51e0\u4e2a\u65b9\u9762\uff1a \u7ba1\u9053\u662f\u540c\u6b65\u64cd\u4f5c\u3002\u4e5f\u5373\u9700\u8981\u7ba1\u9053\u4e4b\u524d\u7684\u5b50\u53e5 A \u6267\u884c\u5b8c\u6bd5\u540e\uff0c\u6570\u636e\u624d\u80fd\u6574\u4f53\u8fdb\u5165\u7ba1\u9053\u5b50\u53e5\u3002 \u7ba1\u9053\u672c\u8eab\u662f\u9700\u8981\u5e8f\u5217\u5316\u548c\u53cd\u5e8f\u5217\u5316\u7684\uff0c\u8fd9\u4e2a\u662f\u5355\u7ebf\u7a0b\u6267\u884c\u7684\u3002 \u5982\u679c A \u53d1\u5927\u91cf\u6570\u636e\u7ed9 | \uff0c\u6574\u4e2a\u67e5\u8be2\u8bf7\u6c42\u7684\u603b\u4f53\u65f6\u5ef6\u53ef\u80fd\u4f1a\u975e\u5e38\u5927\u3002\u6b64\u65f6\u53ef\u4ee5\u5c1d\u8bd5\u62c6\u5206\u8fd9\u4e2a\u8bed\u53e5\uff1a \u5e94\u7528\u7a0b\u5e8f\u53d1\u9001 A \uff0c \u5c06\u6536\u5230\u7684\u8fd4\u56de\u7ed3\u679c\u5728\u5e94\u7528\u7a0b\u5e8f\u62c6\u5206\uff0c \u5e76\u53d1\u53d1\u9001\u7ed9\u591a\u4e2a graphd\uff0c \u6bcf\u4e2a graphd \u6267\u884c\u90e8\u5206 B\u3002 \u8fd9\u6837\u901a\u5e38\u6bd4\u5355\u4e2a graphd \u6267\u884c\u5b8c\u6574\u5730 A | B \u8981\u5feb\u5f88\u591a\u3002","title":"\u7ba1\u9053\u7b26"},{"location":"3.ngql-guide/5.operators/4.pipe/#_1","text":"nGQL \u652f\u6301\u4f7f\u7528\u7ba1\u9053\u7b26\uff08|\uff09\u5c06\u591a\u4e2a\u67e5\u8be2\u7ec4\u5408\u8d77\u6765\u3002","title":"\u7ba1\u9053\u7b26"},{"location":"3.ngql-guide/5.operators/4.pipe/#opencypher","text":"\u7ba1\u9053\u7b26\u4ec5\u9002\u7528\u4e8e\u539f\u751f nGQL\u3002","title":"openCypher \u517c\u5bb9\u6027"},{"location":"3.ngql-guide/5.operators/4.pipe/#_2","text":"nGQL \u548c SQL \u4e4b\u95f4\u7684\u4e00\u4e2a\u4e3b\u8981\u533a\u522b\u662f\u5b50\u67e5\u8be2\u7684\u7ec4\u6210\u65b9\u5f0f\u3002 \u5728 SQL \u4e2d\uff0c\u5b50\u67e5\u8be2\u662f\u5d4c\u5957\u5728\u67e5\u8be2\u8bed\u53e5\u4e2d\u7684\u3002 \u5728 nGQL \u4e2d\uff0c\u5b50\u67e5\u8be2\u662f\u901a\u8fc7\u7c7b\u4f3c shell \u4e2d\u7684\u7ba1\u9053\u7b26\uff08 | \uff09\u5b9e\u73b0\u7684\u3002","title":"\u8bed\u6cd5"},{"location":"3.ngql-guide/5.operators/4.pipe/#_3","text":"nebula> GO FROM \"player100\" OVER follow \\ YIELD dst(edge) AS dstid, properties($$).name AS Name | \\ GO FROM $-.dstid OVER follow YIELD dst(edge); +-------------+ | dst(EDGE) | +-------------+ | \"player100\" | | \"player102\" | | \"player125\" | | \"player100\" | +-------------+ \u5fc5\u987b\u5728 YIELD \u5b50\u53e5\u4e2d\u4e3a\u9700\u8981\u7684\u8fd4\u56de\u7ed3\u679c\u8bbe\u7f6e\u522b\u540d\uff0c\u624d\u80fd\u5728\u7ba1\u9053\u7b26\u53f3\u4fa7\u4f7f\u7528\u5f15\u7528\u7b26 $- \uff0c\u4f8b\u5982\u793a\u4f8b\u4e2d\u7684 $-.dstid \u3002","title":"\u793a\u4f8b"},{"location":"3.ngql-guide/5.operators/4.pipe/#_4","text":"NebulaGraph\u4e2d\u7684\u7ba1\u9053\u5bf9\u6027\u80fd\u6709\u5f71\u54cd\uff0c\u4ee5 A | B \u4e3a\u4f8b\uff0c\u4f53\u73b0\u5728\u4ee5\u4e0b\u51e0\u4e2a\u65b9\u9762\uff1a \u7ba1\u9053\u662f\u540c\u6b65\u64cd\u4f5c\u3002\u4e5f\u5373\u9700\u8981\u7ba1\u9053\u4e4b\u524d\u7684\u5b50\u53e5 A \u6267\u884c\u5b8c\u6bd5\u540e\uff0c\u6570\u636e\u624d\u80fd\u6574\u4f53\u8fdb\u5165\u7ba1\u9053\u5b50\u53e5\u3002 \u7ba1\u9053\u672c\u8eab\u662f\u9700\u8981\u5e8f\u5217\u5316\u548c\u53cd\u5e8f\u5217\u5316\u7684\uff0c\u8fd9\u4e2a\u662f\u5355\u7ebf\u7a0b\u6267\u884c\u7684\u3002 \u5982\u679c A \u53d1\u5927\u91cf\u6570\u636e\u7ed9 | \uff0c\u6574\u4e2a\u67e5\u8be2\u8bf7\u6c42\u7684\u603b\u4f53\u65f6\u5ef6\u53ef\u80fd\u4f1a\u975e\u5e38\u5927\u3002\u6b64\u65f6\u53ef\u4ee5\u5c1d\u8bd5\u62c6\u5206\u8fd9\u4e2a\u8bed\u53e5\uff1a \u5e94\u7528\u7a0b\u5e8f\u53d1\u9001 A \uff0c \u5c06\u6536\u5230\u7684\u8fd4\u56de\u7ed3\u679c\u5728\u5e94\u7528\u7a0b\u5e8f\u62c6\u5206\uff0c \u5e76\u53d1\u53d1\u9001\u7ed9\u591a\u4e2a graphd\uff0c \u6bcf\u4e2a graphd \u6267\u884c\u90e8\u5206 B\u3002 \u8fd9\u6837\u901a\u5e38\u6bd4\u5355\u4e2a graphd \u6267\u884c\u5b8c\u6574\u5730 A | B \u8981\u5feb\u5f88\u591a\u3002","title":"\u6027\u80fd\u63d0\u793a"},{"location":"3.ngql-guide/5.operators/5.property-reference/","text":"\u5f15\u7528\u7b26 \u00b6 nGQL \u63d0\u4f9b\u5f15\u7528\u7b26\u6765\u8868\u793a WHERE \u548c YIELD \u5b50\u53e5\u4e2d\u7684\u5c5e\u6027\uff0c\u6216\u8005\u590d\u5408\u67e5\u8be2\u4e2d\u7ba1\u9053\u7b26\u4e4b\u524d\u7684\u8bed\u53e5\u8f93\u51fa\u7ed3\u679c\u3002 openCypher \u517c\u5bb9\u6027 \u00b6 \u5f15\u7528\u7b26\u4ec5\u9002\u7528\u4e8e\u539f\u751f nGQL\u3002 \u5f15\u7528\u7b26\u5217\u8868 \u00b6 \u5f15\u7528\u7b26 \u8bf4\u660e $^ \u5f15\u7528\u8d77\u59cb\u70b9\u3002\u66f4\u591a\u4fe1\u606f\u8bf7\u53c2\u89c1 \u5f15\u7528\u5c5e\u6027 \u3002 $$ \u5f15\u7528\u76ee\u7684\u70b9\u3002\u66f4\u591a\u4fe1\u606f\u8bf7\u53c2\u89c1 \u5f15\u7528\u5c5e\u6027 \u3002 $- \u5f15\u7528\u590d\u5408\u67e5\u8be2\u4e2d\u7ba1\u9053\u7b26\u4e4b\u524d\u7684\u8bed\u53e5\u8f93\u51fa\u7ed3\u679c\u3002\u66f4\u591a\u4fe1\u606f\u8bf7\u53c2\u89c1 \u7ba1\u9053\u7b26 \u3002 \u793a\u4f8b \u00b6 # \u8fd4\u56de\u8d77\u59cb\u70b9\u548c\u76ee\u7684\u70b9\u7684\u5e74\u9f84\u3002 nebula> GO FROM \"player100\" OVER follow YIELD properties($^).age AS SrcAge, properties($$).age AS DestAge; +--------+---------+ | SrcAge | DestAge | +--------+---------+ | 42 | 36 | | 42 | 41 | +--------+---------+ # \u8fd4\u56de player100 \u8ffd\u968f\u7684 player \u7684\u540d\u79f0\u548c\u56e2\u961f\u3002 nebula> GO FROM \"player100\" OVER follow \\ YIELD dst(edge) AS id | \\ GO FROM $-.id OVER serve \\ YIELD properties($^).name AS Player, properties($$).name AS Team; +-----------------+-----------+ | Player | Team | +-----------------+-----------+ | \"Tony Parker\" | \"Spurs\" | | \"Tony Parker\" | \"Hornets\" | | \"Manu Ginobili\" | \"Spurs\" | +-----------------+-----------+","title":"\u5c5e\u6027\u5f15\u7528\u7b26"},{"location":"3.ngql-guide/5.operators/5.property-reference/#_1","text":"nGQL \u63d0\u4f9b\u5f15\u7528\u7b26\u6765\u8868\u793a WHERE \u548c YIELD \u5b50\u53e5\u4e2d\u7684\u5c5e\u6027\uff0c\u6216\u8005\u590d\u5408\u67e5\u8be2\u4e2d\u7ba1\u9053\u7b26\u4e4b\u524d\u7684\u8bed\u53e5\u8f93\u51fa\u7ed3\u679c\u3002","title":"\u5f15\u7528\u7b26"},{"location":"3.ngql-guide/5.operators/5.property-reference/#opencypher","text":"\u5f15\u7528\u7b26\u4ec5\u9002\u7528\u4e8e\u539f\u751f nGQL\u3002","title":"openCypher \u517c\u5bb9\u6027"},{"location":"3.ngql-guide/5.operators/5.property-reference/#_2","text":"\u5f15\u7528\u7b26 \u8bf4\u660e $^ \u5f15\u7528\u8d77\u59cb\u70b9\u3002\u66f4\u591a\u4fe1\u606f\u8bf7\u53c2\u89c1 \u5f15\u7528\u5c5e\u6027 \u3002 $$ \u5f15\u7528\u76ee\u7684\u70b9\u3002\u66f4\u591a\u4fe1\u606f\u8bf7\u53c2\u89c1 \u5f15\u7528\u5c5e\u6027 \u3002 $- \u5f15\u7528\u590d\u5408\u67e5\u8be2\u4e2d\u7ba1\u9053\u7b26\u4e4b\u524d\u7684\u8bed\u53e5\u8f93\u51fa\u7ed3\u679c\u3002\u66f4\u591a\u4fe1\u606f\u8bf7\u53c2\u89c1 \u7ba1\u9053\u7b26 \u3002","title":"\u5f15\u7528\u7b26\u5217\u8868"},{"location":"3.ngql-guide/5.operators/5.property-reference/#_3","text":"# \u8fd4\u56de\u8d77\u59cb\u70b9\u548c\u76ee\u7684\u70b9\u7684\u5e74\u9f84\u3002 nebula> GO FROM \"player100\" OVER follow YIELD properties($^).age AS SrcAge, properties($$).age AS DestAge; +--------+---------+ | SrcAge | DestAge | +--------+---------+ | 42 | 36 | | 42 | 41 | +--------+---------+ # \u8fd4\u56de player100 \u8ffd\u968f\u7684 player \u7684\u540d\u79f0\u548c\u56e2\u961f\u3002 nebula> GO FROM \"player100\" OVER follow \\ YIELD dst(edge) AS id | \\ GO FROM $-.id OVER serve \\ YIELD properties($^).name AS Player, properties($$).name AS Team; +-----------------+-----------+ | Player | Team | +-----------------+-----------+ | \"Tony Parker\" | \"Spurs\" | | \"Tony Parker\" | \"Hornets\" | | \"Manu Ginobili\" | \"Spurs\" | +-----------------+-----------+","title":"\u793a\u4f8b"},{"location":"3.ngql-guide/5.operators/6.set/","text":"\u96c6\u5408\u8fd0\u7b97\u7b26 \u00b6 \u5408\u5e76\u591a\u4e2a\u8bf7\u6c42\u65f6\uff0c\u53ef\u4ee5\u4f7f\u7528\u96c6\u5408\u8fd0\u7b97\u7b26\uff0c\u5305\u62ec UNION \u3001 UNION ALL \u3001 INTERSECT \u548c MINUS \u3002 \u6240\u6709\u96c6\u5408\u8fd0\u7b97\u7b26\u7684\u4f18\u5148\u7ea7\u76f8\u540c\uff0c\u5982\u679c\u4e00\u4e2a nGQL \u8bed\u53e5\u4e2d\u6709\u591a\u4e2a\u96c6\u5408\u8fd0\u7b97\u7b26\uff0cNebulaGraph\u4f1a\u4ece\u5de6\u5230\u53f3\u8fdb\u884c\u8ba1\u7b97\uff0c\u9664\u975e\u7528\u62ec\u53f7\u6307\u5b9a\u987a\u5e8f\u3002 Caution \u96c6\u5408\u8fd0\u7b97\u7b26\u524d\u540e\u7684\u67e5\u8be2\u8bed\u53e5\u4e2d\u5b9a\u4e49\u7684\u53d8\u91cf\u540d\u53ca\u987a\u5e8f\u5fc5\u9700\u4fdd\u6301\u4e00\u81f4\uff0c\u4f8b\u5982 RETURN a,b,c UNION RETURN a,b,c \u4e2d\u7684 a,b,c \u7684\u540d\u79f0\u53ca\u987a\u5e8f\u9700\u8981\u4fdd\u6301\u4e00\u81f4\u3002 UNION\u3001UNION DISTINCT\u3001UNION ALL \u00b6 <left> UNION [DISTINCT | ALL] <right> [ UNION [DISTINCT | ALL] <right> ...] \u8fd0\u7b97\u7b26 UNION DISTINCT \uff08\u6216\u4f7f\u7528\u7f29\u5199 UNION \uff09\u8fd4\u56de\u4e24\u4e2a\u96c6\u5408 A \u548c B \u7684\u5e76\u96c6\uff0c\u4e0d\u5305\u542b\u91cd\u590d\u7684\u5143\u7d20\u3002 \u8fd0\u7b97\u7b26 UNION ALL \u8fd4\u56de\u4e24\u4e2a\u96c6\u5408 A \u548c B \u7684\u5e76\u96c6\uff0c\u5305\u542b\u91cd\u590d\u7684\u5143\u7d20\u3002 left \u548c right \u5fc5\u987b\u6709\u76f8\u540c\u6570\u91cf\u7684\u5217\u548c\u6570\u636e\u7c7b\u578b\u3002\u5982\u679c\u9700\u8981\u8f6c\u6362\u6570\u636e\u7c7b\u578b\uff0c\u8bf7\u53c2\u89c1 \u7c7b\u578b\u8f6c\u6362 \u3002 \u793a\u4f8b \u00b6 # \u8fd4\u56de\u4e24\u4e2a\u67e5\u8be2\u7ed3\u679c\u7684\u5e76\u96c6\uff0c\u4e0d\u5305\u542b\u91cd\u590d\u7684\u5143\u7d20\u3002 nebula> GO FROM \"player102\" OVER follow YIELD dst(edge) \\ UNION \\ GO FROM \"player100\" OVER follow YIELD dst(edge); +-------------+ | dst(EDGE) | +-------------+ | \"player100\" | | \"player101\" | | \"player125\" | +-------------+ nebula> MATCH (v:player) \\ WITH v.player.name AS n \\ RETURN n ORDER BY n LIMIT 3 \\ UNION \\ UNWIND [\"Tony Parker\", \"Ben Simmons\"] AS n \\ RETURN n; +---------------------+ | n | +---------------------+ | \"Amar'e Stoudemire\" | | \"Aron Baynes\" | | \"Ben Simmons\" | | \"Tony Parker\" | +---------------------+ # \u8fd4\u56de\u4e24\u4e2a\u67e5\u8be2\u7ed3\u679c\u7684\u5e76\u96c6\uff0c\u5305\u542b\u91cd\u590d\u7684\u5143\u7d20\u3002 nebula> GO FROM \"player102\" OVER follow YIELD dst(edge) \\ UNION ALL \\ GO FROM \"player100\" OVER follow YIELD dst(edge); +-------------+ | dst(EDGE) | +-------------+ | \"player100\" | | \"player101\" | | \"player101\" | | \"player125\" | +-------------+ nebula> MATCH (v:player) \\ WITH v.player.name AS n \\ RETURN n ORDER BY n LIMIT 3 \\ UNION ALL \\ UNWIND [\"Tony Parker\", \"Ben Simmons\"] AS n \\ RETURN n; +---------------------+ | n | +---------------------+ | \"Amar'e Stoudemire\" | | \"Aron Baynes\" | | \"Ben Simmons\" | | \"Tony Parker\" | | \"Ben Simmons\" | +---------------------+ # UNION \u4e5f\u53ef\u4ee5\u548c YIELD \u8bed\u53e5\u4e00\u8d77\u4f7f\u7528\uff0c\u53bb\u91cd\u65f6\u4f1a\u68c0\u67e5\u6bcf\u4e00\u884c\u7684\u6240\u6709\u5217\uff0c\u6bcf\u5217\u90fd\u76f8\u540c\u65f6\u624d\u4f1a\u53bb\u91cd\u3002 nebula> GO FROM \"player102\" OVER follow \\ YIELD dst(edge) AS id, properties(edge).degree AS Degree, properties($$).age AS Age \\ UNION /* DISTINCT */ \\ GO FROM \"player100\" OVER follow \\ YIELD dst(edge) AS id, properties(edge).degree AS Degree, properties($$).age AS Age; +-------------+--------+-----+ | id | Degree | Age | +-------------+--------+-----+ | \"player100\" | 75 | 42 | | \"player101\" | 75 | 36 | | \"player101\" | 95 | 36 | | \"player125\" | 95 | 41 | +-------------+--------+-----+ INTERSECT \u00b6 <left> INTERSECT <right> \u8fd0\u7b97\u7b26 INTERSECT \u8fd4\u56de\u4e24\u4e2a\u96c6\u5408 A \u548c B \u7684\u4ea4\u96c6\u3002 left \u548c right \u5fc5\u987b\u6709\u76f8\u540c\u6570\u91cf\u7684\u5217\u548c\u6570\u636e\u7c7b\u578b\u3002\u5982\u679c\u9700\u8981\u8f6c\u6362\u6570\u636e\u7c7b\u578b\uff0c\u8bf7\u53c2\u89c1 \u7c7b\u578b\u8f6c\u6362 \u3002 \u793a\u4f8b \u00b6 # \u8fd4\u56de\u4e24\u4e2a\u67e5\u8be2\u7ed3\u679c\u7684\u4ea4\u96c6\u3002 nebula> GO FROM \"player102\" OVER follow \\ YIELD dst(edge) AS id, properties(edge).degree AS Degree, properties($$).age AS Age \\ INTERSECT \\ GO FROM \"player100\" OVER follow \\ YIELD dst(edge) AS id, properties(edge).degree AS Degree, properties($$).age AS Age; +----+--------+-----+ | id | Degree | Age | +----+--------+-----+ +----+--------+-----+ nebula> MATCH (v:player)-[e:follow]->(v2) \\ WHERE id(v) == \"player102\" \\ RETURN id(v2) As id, e.degree As Degree, v2.player.age AS Age \\ INTERSECT \\ MATCH (v:player)-[e:follow]->(v2) \\ WHERE id(v) == \"player100\" \\ RETURN id(v2) As id, e.degree As Degree, v2.player.age AS Age; +----+--------+-----+ | id | Degree | Age | +----+--------+-----+ +----+--------+-----+ nebula> UNWIND [1,2] AS a RETURN a \\ INTERSECT \\ UNWIND [1,2,3,4] AS a \\ RETURN a; +---+ | a | +---+ | 1 | | 2 | +---+ MINUS \u00b6 <left> MINUS <right> \u8fd0\u7b97\u7b26 MINUS \u8fd4\u56de\u4e24\u4e2a\u96c6\u5408 A \u548c B \u7684\u5dee\u5f02\uff0c\u5373 A-B \u3002\u8bf7\u6ce8\u610f left \u548c right \u7684\u987a\u5e8f\uff0c A-B \u8868\u793a\u5728\u96c6\u5408 A \u4e2d\uff0c\u4f46\u662f\u4e0d\u5728\u96c6\u5408 B \u4e2d\u7684\u5143\u7d20\u3002 \u793a\u4f8b \u00b6 # \u8fd4\u56de\u5728\u7b2c\u4e00\u4e2a\u67e5\u8be2\u7ed3\u679c\u4e2d\uff0c\u4f46\u662f\u4e0d\u5728\u7b2c\u4e8c\u4e2a\u67e5\u8be2\u7ed3\u679c\u4e2d\u7684\u5143\u7d20\u3002 nebula> GO FROM \"player100\" OVER follow YIELD dst(edge) \\ MINUS \\ GO FROM \"player102\" OVER follow YIELD dst(edge); +-------------+ | dst(EDGE) | +-------------+ | \"player125\" | +-------------+ nebula> GO FROM \"player102\" OVER follow YIELD dst(edge) AS id \\ MINUS \\ GO FROM \"player100\" OVER follow YIELD dst(edge) AS id; +-------------+ | id | +-------------+ | \"player100\" | +-------------+ nebula> MATCH (v:player)-[e:follow]->(v2) \\ WHERE id(v) ==\"player102\" \\ RETURN id(v2) AS id\\ MINUS \\ MATCH (v:player)-[e:follow]->(v2) \\ WHERE id(v) ==\"player100\" \\ RETURN id(v2) AS id; +-------------+ | id | +-------------+ | \"player100\" | +-------------+ nebula> UNWIND [1,2,3] AS a RETURN a \\ MINUS \\ WITH 4 AS a \\ RETURN a; +---+ | a | +---+ | 1 | | 2 | | 3 | +---+ \u96c6\u5408\u8fd0\u7b97\u7b26\u548c\u7ba1\u9053\u7b26\u7684\u4f18\u5148\u7ea7 \u00b6 \u5f53\u67e5\u8be2\u5305\u542b\u96c6\u5408\u8fd0\u7b97\u7b26\u548c\u7ba1\u9053\u7b26\uff08|\uff09\u65f6\uff0c \u7ba1\u9053\u7b26 \u7684\u4f18\u5148\u7ea7\u9ad8\u3002\u4f8b\u5982 GO FROM 1 UNION GO FROM 2 | GO FROM 3 \u76f8\u5f53\u4e8e GO FROM 1 UNION (GO FROM 2 | GO FROM 3) \u3002 \u793a\u4f8b \u00b6 nebula> GO FROM \"player102\" OVER follow \\ YIELD dst(edge) AS play_dst \\ UNION \\ GO FROM \"team200\" OVER serve REVERSELY \\ YIELD src(edge) AS play_src \\ | GO FROM $-.play_src OVER follow YIELD dst(edge) AS play_dst; +-------------+ | play_dst | +-------------+ | \"player100\" | | \"player101\" | | \"player117\" | | \"player105\" | +-------------+ \u8be5\u67e5\u8be2\u4f1a\u5148\u6267\u884c\u7ea2\u6846\u5185\u7684\u8bed\u53e5\uff0c\u7136\u540e\u6267\u884c\u7eff\u6846\u7684 UNION \u64cd\u4f5c\u3002 \u5706\u62ec\u53f7\u53ef\u4ee5\u4fee\u6539\u6267\u884c\u7684\u4f18\u5148\u7ea7\uff0c\u4f8b\u5982\uff1a nebula> (GO FROM \"player102\" OVER follow \\ YIELD dst(edge) AS play_dst \\ UNION \\ GO FROM \"team200\" OVER serve REVERSELY \\ YIELD src(edge) AS play_dst) \\ | GO FROM $-.play_dst OVER follow YIELD dst(edge) AS play_dst; \u8be5\u67e5\u8be2\u4e2d\uff0c\u5706\u62ec\u53f7\u5305\u88f9\u7684\u90e8\u5206\u5148\u6267\u884c\uff0c\u5373\u5148\u6267\u884c UNION \u64cd\u4f5c\uff0c\u518d\u5c06\u7ed3\u679c\u7ed3\u5408\u7ba1\u9053\u7b26\u8fdb\u884c\u4e0b\u4e00\u6b65\u64cd\u4f5c\u3002","title":"\u96c6\u5408\u8fd0\u7b97\u7b26"},{"location":"3.ngql-guide/5.operators/6.set/#_1","text":"\u5408\u5e76\u591a\u4e2a\u8bf7\u6c42\u65f6\uff0c\u53ef\u4ee5\u4f7f\u7528\u96c6\u5408\u8fd0\u7b97\u7b26\uff0c\u5305\u62ec UNION \u3001 UNION ALL \u3001 INTERSECT \u548c MINUS \u3002 \u6240\u6709\u96c6\u5408\u8fd0\u7b97\u7b26\u7684\u4f18\u5148\u7ea7\u76f8\u540c\uff0c\u5982\u679c\u4e00\u4e2a nGQL \u8bed\u53e5\u4e2d\u6709\u591a\u4e2a\u96c6\u5408\u8fd0\u7b97\u7b26\uff0cNebulaGraph\u4f1a\u4ece\u5de6\u5230\u53f3\u8fdb\u884c\u8ba1\u7b97\uff0c\u9664\u975e\u7528\u62ec\u53f7\u6307\u5b9a\u987a\u5e8f\u3002 Caution \u96c6\u5408\u8fd0\u7b97\u7b26\u524d\u540e\u7684\u67e5\u8be2\u8bed\u53e5\u4e2d\u5b9a\u4e49\u7684\u53d8\u91cf\u540d\u53ca\u987a\u5e8f\u5fc5\u9700\u4fdd\u6301\u4e00\u81f4\uff0c\u4f8b\u5982 RETURN a,b,c UNION RETURN a,b,c \u4e2d\u7684 a,b,c \u7684\u540d\u79f0\u53ca\u987a\u5e8f\u9700\u8981\u4fdd\u6301\u4e00\u81f4\u3002","title":"\u96c6\u5408\u8fd0\u7b97\u7b26"},{"location":"3.ngql-guide/5.operators/6.set/#unionunion_distinctunion_all","text":"<left> UNION [DISTINCT | ALL] <right> [ UNION [DISTINCT | ALL] <right> ...] \u8fd0\u7b97\u7b26 UNION DISTINCT \uff08\u6216\u4f7f\u7528\u7f29\u5199 UNION \uff09\u8fd4\u56de\u4e24\u4e2a\u96c6\u5408 A \u548c B \u7684\u5e76\u96c6\uff0c\u4e0d\u5305\u542b\u91cd\u590d\u7684\u5143\u7d20\u3002 \u8fd0\u7b97\u7b26 UNION ALL \u8fd4\u56de\u4e24\u4e2a\u96c6\u5408 A \u548c B \u7684\u5e76\u96c6\uff0c\u5305\u542b\u91cd\u590d\u7684\u5143\u7d20\u3002 left \u548c right \u5fc5\u987b\u6709\u76f8\u540c\u6570\u91cf\u7684\u5217\u548c\u6570\u636e\u7c7b\u578b\u3002\u5982\u679c\u9700\u8981\u8f6c\u6362\u6570\u636e\u7c7b\u578b\uff0c\u8bf7\u53c2\u89c1 \u7c7b\u578b\u8f6c\u6362 \u3002","title":"UNION\u3001UNION DISTINCT\u3001UNION ALL"},{"location":"3.ngql-guide/5.operators/6.set/#_2","text":"# \u8fd4\u56de\u4e24\u4e2a\u67e5\u8be2\u7ed3\u679c\u7684\u5e76\u96c6\uff0c\u4e0d\u5305\u542b\u91cd\u590d\u7684\u5143\u7d20\u3002 nebula> GO FROM \"player102\" OVER follow YIELD dst(edge) \\ UNION \\ GO FROM \"player100\" OVER follow YIELD dst(edge); +-------------+ | dst(EDGE) | +-------------+ | \"player100\" | | \"player101\" | | \"player125\" | +-------------+ nebula> MATCH (v:player) \\ WITH v.player.name AS n \\ RETURN n ORDER BY n LIMIT 3 \\ UNION \\ UNWIND [\"Tony Parker\", \"Ben Simmons\"] AS n \\ RETURN n; +---------------------+ | n | +---------------------+ | \"Amar'e Stoudemire\" | | \"Aron Baynes\" | | \"Ben Simmons\" | | \"Tony Parker\" | +---------------------+ # \u8fd4\u56de\u4e24\u4e2a\u67e5\u8be2\u7ed3\u679c\u7684\u5e76\u96c6\uff0c\u5305\u542b\u91cd\u590d\u7684\u5143\u7d20\u3002 nebula> GO FROM \"player102\" OVER follow YIELD dst(edge) \\ UNION ALL \\ GO FROM \"player100\" OVER follow YIELD dst(edge); +-------------+ | dst(EDGE) | +-------------+ | \"player100\" | | \"player101\" | | \"player101\" | | \"player125\" | +-------------+ nebula> MATCH (v:player) \\ WITH v.player.name AS n \\ RETURN n ORDER BY n LIMIT 3 \\ UNION ALL \\ UNWIND [\"Tony Parker\", \"Ben Simmons\"] AS n \\ RETURN n; +---------------------+ | n | +---------------------+ | \"Amar'e Stoudemire\" | | \"Aron Baynes\" | | \"Ben Simmons\" | | \"Tony Parker\" | | \"Ben Simmons\" | +---------------------+ # UNION \u4e5f\u53ef\u4ee5\u548c YIELD \u8bed\u53e5\u4e00\u8d77\u4f7f\u7528\uff0c\u53bb\u91cd\u65f6\u4f1a\u68c0\u67e5\u6bcf\u4e00\u884c\u7684\u6240\u6709\u5217\uff0c\u6bcf\u5217\u90fd\u76f8\u540c\u65f6\u624d\u4f1a\u53bb\u91cd\u3002 nebula> GO FROM \"player102\" OVER follow \\ YIELD dst(edge) AS id, properties(edge).degree AS Degree, properties($$).age AS Age \\ UNION /* DISTINCT */ \\ GO FROM \"player100\" OVER follow \\ YIELD dst(edge) AS id, properties(edge).degree AS Degree, properties($$).age AS Age; +-------------+--------+-----+ | id | Degree | Age | +-------------+--------+-----+ | \"player100\" | 75 | 42 | | \"player101\" | 75 | 36 | | \"player101\" | 95 | 36 | | \"player125\" | 95 | 41 | +-------------+--------+-----+","title":"\u793a\u4f8b"},{"location":"3.ngql-guide/5.operators/6.set/#intersect","text":"<left> INTERSECT <right> \u8fd0\u7b97\u7b26 INTERSECT \u8fd4\u56de\u4e24\u4e2a\u96c6\u5408 A \u548c B \u7684\u4ea4\u96c6\u3002 left \u548c right \u5fc5\u987b\u6709\u76f8\u540c\u6570\u91cf\u7684\u5217\u548c\u6570\u636e\u7c7b\u578b\u3002\u5982\u679c\u9700\u8981\u8f6c\u6362\u6570\u636e\u7c7b\u578b\uff0c\u8bf7\u53c2\u89c1 \u7c7b\u578b\u8f6c\u6362 \u3002","title":"INTERSECT"},{"location":"3.ngql-guide/5.operators/6.set/#_3","text":"# \u8fd4\u56de\u4e24\u4e2a\u67e5\u8be2\u7ed3\u679c\u7684\u4ea4\u96c6\u3002 nebula> GO FROM \"player102\" OVER follow \\ YIELD dst(edge) AS id, properties(edge).degree AS Degree, properties($$).age AS Age \\ INTERSECT \\ GO FROM \"player100\" OVER follow \\ YIELD dst(edge) AS id, properties(edge).degree AS Degree, properties($$).age AS Age; +----+--------+-----+ | id | Degree | Age | +----+--------+-----+ +----+--------+-----+ nebula> MATCH (v:player)-[e:follow]->(v2) \\ WHERE id(v) == \"player102\" \\ RETURN id(v2) As id, e.degree As Degree, v2.player.age AS Age \\ INTERSECT \\ MATCH (v:player)-[e:follow]->(v2) \\ WHERE id(v) == \"player100\" \\ RETURN id(v2) As id, e.degree As Degree, v2.player.age AS Age; +----+--------+-----+ | id | Degree | Age | +----+--------+-----+ +----+--------+-----+ nebula> UNWIND [1,2] AS a RETURN a \\ INTERSECT \\ UNWIND [1,2,3,4] AS a \\ RETURN a; +---+ | a | +---+ | 1 | | 2 | +---+","title":"\u793a\u4f8b"},{"location":"3.ngql-guide/5.operators/6.set/#minus","text":"<left> MINUS <right> \u8fd0\u7b97\u7b26 MINUS \u8fd4\u56de\u4e24\u4e2a\u96c6\u5408 A \u548c B \u7684\u5dee\u5f02\uff0c\u5373 A-B \u3002\u8bf7\u6ce8\u610f left \u548c right \u7684\u987a\u5e8f\uff0c A-B \u8868\u793a\u5728\u96c6\u5408 A \u4e2d\uff0c\u4f46\u662f\u4e0d\u5728\u96c6\u5408 B \u4e2d\u7684\u5143\u7d20\u3002","title":"MINUS"},{"location":"3.ngql-guide/5.operators/6.set/#_4","text":"# \u8fd4\u56de\u5728\u7b2c\u4e00\u4e2a\u67e5\u8be2\u7ed3\u679c\u4e2d\uff0c\u4f46\u662f\u4e0d\u5728\u7b2c\u4e8c\u4e2a\u67e5\u8be2\u7ed3\u679c\u4e2d\u7684\u5143\u7d20\u3002 nebula> GO FROM \"player100\" OVER follow YIELD dst(edge) \\ MINUS \\ GO FROM \"player102\" OVER follow YIELD dst(edge); +-------------+ | dst(EDGE) | +-------------+ | \"player125\" | +-------------+ nebula> GO FROM \"player102\" OVER follow YIELD dst(edge) AS id \\ MINUS \\ GO FROM \"player100\" OVER follow YIELD dst(edge) AS id; +-------------+ | id | +-------------+ | \"player100\" | +-------------+ nebula> MATCH (v:player)-[e:follow]->(v2) \\ WHERE id(v) ==\"player102\" \\ RETURN id(v2) AS id\\ MINUS \\ MATCH (v:player)-[e:follow]->(v2) \\ WHERE id(v) ==\"player100\" \\ RETURN id(v2) AS id; +-------------+ | id | +-------------+ | \"player100\" | +-------------+ nebula> UNWIND [1,2,3] AS a RETURN a \\ MINUS \\ WITH 4 AS a \\ RETURN a; +---+ | a | +---+ | 1 | | 2 | | 3 | +---+","title":"\u793a\u4f8b"},{"location":"3.ngql-guide/5.operators/6.set/#_5","text":"\u5f53\u67e5\u8be2\u5305\u542b\u96c6\u5408\u8fd0\u7b97\u7b26\u548c\u7ba1\u9053\u7b26\uff08|\uff09\u65f6\uff0c \u7ba1\u9053\u7b26 \u7684\u4f18\u5148\u7ea7\u9ad8\u3002\u4f8b\u5982 GO FROM 1 UNION GO FROM 2 | GO FROM 3 \u76f8\u5f53\u4e8e GO FROM 1 UNION (GO FROM 2 | GO FROM 3) \u3002","title":"\u96c6\u5408\u8fd0\u7b97\u7b26\u548c\u7ba1\u9053\u7b26\u7684\u4f18\u5148\u7ea7"},{"location":"3.ngql-guide/5.operators/6.set/#_6","text":"nebula> GO FROM \"player102\" OVER follow \\ YIELD dst(edge) AS play_dst \\ UNION \\ GO FROM \"team200\" OVER serve REVERSELY \\ YIELD src(edge) AS play_src \\ | GO FROM $-.play_src OVER follow YIELD dst(edge) AS play_dst; +-------------+ | play_dst | +-------------+ | \"player100\" | | \"player101\" | | \"player117\" | | \"player105\" | +-------------+ \u8be5\u67e5\u8be2\u4f1a\u5148\u6267\u884c\u7ea2\u6846\u5185\u7684\u8bed\u53e5\uff0c\u7136\u540e\u6267\u884c\u7eff\u6846\u7684 UNION \u64cd\u4f5c\u3002 \u5706\u62ec\u53f7\u53ef\u4ee5\u4fee\u6539\u6267\u884c\u7684\u4f18\u5148\u7ea7\uff0c\u4f8b\u5982\uff1a nebula> (GO FROM \"player102\" OVER follow \\ YIELD dst(edge) AS play_dst \\ UNION \\ GO FROM \"team200\" OVER serve REVERSELY \\ YIELD src(edge) AS play_dst) \\ | GO FROM $-.play_dst OVER follow YIELD dst(edge) AS play_dst; \u8be5\u67e5\u8be2\u4e2d\uff0c\u5706\u62ec\u53f7\u5305\u88f9\u7684\u90e8\u5206\u5148\u6267\u884c\uff0c\u5373\u5148\u6267\u884c UNION \u64cd\u4f5c\uff0c\u518d\u5c06\u7ed3\u679c\u7ed3\u5408\u7ba1\u9053\u7b26\u8fdb\u884c\u4e0b\u4e00\u6b65\u64cd\u4f5c\u3002","title":"\u793a\u4f8b"},{"location":"3.ngql-guide/5.operators/7.string/","text":"\u5b57\u7b26\u4e32\u8fd0\u7b97\u7b26 \u00b6 NebulaGraph\u652f\u6301\u4f7f\u7528\u5b57\u7b26\u4e32\u8fd0\u7b97\u7b26\u8fdb\u884c\u8fde\u63a5\u3001\u641c\u7d22\u3001\u5339\u914d\u8fd0\u7b97\u3002\u652f\u6301\u7684\u8fd0\u7b97\u7b26\u5982\u4e0b\u3002 \u540d\u79f0 \u8bf4\u660e + \u8fde\u63a5\u5b57\u7b26\u4e32\u3002 CONTAINS \u5728\u5b57\u7b26\u4e32\u4e2d\u6267\u884c\u641c\u7d22\u3002 (NOT) IN \u5b57\u7b26\u4e32\u662f\u5426\u5339\u914d\u67d0\u4e2a\u503c\u3002 (NOT) STARTS WITH \u5728\u5b57\u7b26\u4e32\u7684\u5f00\u5934\u6267\u884c\u5339\u914d\u3002 (NOT) ENDS WITH \u5728\u5b57\u7b26\u4e32\u7684\u7ed3\u5c3e\u6267\u884c\u5339\u914d\u3002 \u6b63\u5219\u8868\u8fbe\u5f0f \u901a\u8fc7\u6b63\u5219\u8868\u8fbe\u5f0f\u5339\u914d\u5b57\u7b26\u4e32\u3002 Note \u6240\u6709\u641c\u7d22\u6216\u5339\u914d\u90fd\u533a\u5206\u5927\u5c0f\u5199\u3002 \u793a\u4f8b \u00b6 + \u00b6 nebula> RETURN 'a' + 'b'; +-----------+ | (\"a\"+\"b\") | +-----------+ | \"ab\" | +-----------+ nebula> UNWIND 'a' AS a UNWIND 'b' AS b RETURN a + b; +-------+ | (a+b) | +-------+ | \"ab\" | +-------+ CONTAINS \u00b6 CONTAINS \u8981\u6c42\u5f85\u8fd0\u7b97\u7684\u5de6\u53f3\u4e24\u8fb9\u90fd\u662f\u5b57\u7b26\u4e32\u7c7b\u578b\u3002 nebula> MATCH (s:player)-[e:serve]->(t:team) WHERE id(s) == \"player101\" \\ AND t.team.name CONTAINS \"ets\" RETURN s.player.name, e.start_year, e.end_year, t.team.name; +---------------+--------------+------------+-------------+ | s.player.name | e.start_year | e.end_year | t.team.name | +---------------+--------------+------------+-------------+ | \"Tony Parker\" | 2018 | 2019 | \"Hornets\" | +---------------+--------------+------------+-------------+ nebula> GO FROM \"player101\" OVER serve WHERE (STRING)properties(edge).start_year CONTAINS \"19\" AND \\ properties($^).name CONTAINS \"ny\" \\ YIELD properties($^).name, properties(edge).start_year, properties(edge).end_year, properties($$).name; +---------------------+-----------------------------+---------------------------+---------------------+ | properties($^).name | properties(EDGE).start_year | properties(EDGE).end_year | properties($$).name | +---------------------+-----------------------------+---------------------------+---------------------+ | \"Tony Parker\" | 1999 | 2018 | \"Spurs\" | +---------------------+-----------------------------+---------------------------+---------------------+ nebula> GO FROM \"player101\" OVER serve WHERE !(properties($$).name CONTAINS \"ets\") \\ YIELD properties($^).name, properties(edge).start_year, properties(edge).end_year, properties($$).name; +---------------------+-----------------------------+---------------------------+---------------------+ | properties($^).name | properties(EDGE).start_year | properties(EDGE).end_year | properties($$).name | +---------------------+-----------------------------+---------------------------+---------------------+ | \"Tony Parker\" | 1999 | 2018 | \"Spurs\" | +---------------------+-----------------------------+---------------------------+---------------------+ (NOT) IN \u00b6 nebula> RETURN 1 IN [1,2,3], \"Yao\" NOT IN [\"Yi\", \"Tim\", \"Kobe\"], NULL IN [\"Yi\", \"Tim\", \"Kobe\"]; +----------------+------------------------------------+-------------------------------+ | (1 IN [1,2,3]) | (\"Yao\" NOT IN [\"Yi\",\"Tim\",\"Kobe\"]) | (NULL IN [\"Yi\",\"Tim\",\"Kobe\"]) | +----------------+------------------------------------+-------------------------------+ | true | true | __NULL__ | +----------------+------------------------------------+-------------------------------+ (NOT) STARTS WITH \u00b6 nebula> RETURN 'apple' STARTS WITH 'app', 'apple' STARTS WITH 'a', 'apple' STARTS WITH toUpper('a'); +-----------------------------+---------------------------+------------------------------------+ | (\"apple\" STARTS WITH \"app\") | (\"apple\" STARTS WITH \"a\") | (\"apple\" STARTS WITH toUpper(\"a\")) | +-----------------------------+---------------------------+------------------------------------+ | true | true | false | +-----------------------------+---------------------------+------------------------------------+ nebula> RETURN 'apple' STARTS WITH 'b','apple' NOT STARTS WITH 'app'; +---------------------------+---------------------------------+ | (\"apple\" STARTS WITH \"b\") | (\"apple\" NOT STARTS WITH \"app\") | +---------------------------+---------------------------------+ | false | false | +---------------------------+---------------------------------+ (NOT) ENDS WITH \u00b6 nebula> RETURN 'apple' ENDS WITH 'app', 'apple' ENDS WITH 'e', 'apple' ENDS WITH 'E', 'apple' ENDS WITH 'b'; +---------------------------+-------------------------+-------------------------+-------------------------+ | (\"apple\" ENDS WITH \"app\") | (\"apple\" ENDS WITH \"e\") | (\"apple\" ENDS WITH \"E\") | (\"apple\" ENDS WITH \"b\") | +---------------------------+-------------------------+-------------------------+-------------------------+ | false | true | false | false | +---------------------------+-------------------------+-------------------------+-------------------------+ \u6b63\u5219\u8868\u8fbe\u5f0f \u00b6 Note \u5f53\u524d\u4ec5 opencypher \u517c\u5bb9\u8bed\u53e5\uff08 MATCH \u3001 WITH \u7b49\uff09\u652f\u6301\u6b63\u5219\u8868\u8fbe\u5f0f\uff0c\u539f\u751f nGQL \u8bed\u53e5\uff08 FETCH \u3001 GO \u3001 LOOKUP \u7b49\uff09\u4e0d\u652f\u6301\u6b63\u5219\u8868\u8fbe\u5f0f\u3002 NebulaGraph\u652f\u6301\u4f7f\u7528\u6b63\u5219\u8868\u8fbe\u5f0f\u8fdb\u884c\u8fc7\u6ee4\uff0c\u6b63\u5219\u8868\u8fbe\u5f0f\u7684\u8bed\u6cd5\u662f\u7ee7\u627f\u81ea std::regex \uff0c\u7528\u6237\u53ef\u4ee5\u4f7f\u7528\u8bed\u6cd5 =~ '<regexp>' \u8fdb\u884c\u6b63\u5219\u8868\u8fbe\u5f0f\u5339\u914d\u3002\u4f8b\u5982\uff1a nebula> RETURN \"384748.39\" =~ \"\\\\d+(\\\\.\\\\d{2})?\"; +--------------------------------+ | (\"384748.39\"=~\"\\d+(\\.\\d{2})?\") | +--------------------------------+ | true | +--------------------------------+ nebula> MATCH (v:player) WHERE v.player.name =~ 'Tony.*' RETURN v.player.name; +---------------+ | v.player.name | +---------------+ | \"Tony Parker\" | +---------------+","title":"\u5b57\u7b26\u4e32\u8fd0\u7b97\u7b26"},{"location":"3.ngql-guide/5.operators/7.string/#_1","text":"NebulaGraph\u652f\u6301\u4f7f\u7528\u5b57\u7b26\u4e32\u8fd0\u7b97\u7b26\u8fdb\u884c\u8fde\u63a5\u3001\u641c\u7d22\u3001\u5339\u914d\u8fd0\u7b97\u3002\u652f\u6301\u7684\u8fd0\u7b97\u7b26\u5982\u4e0b\u3002 \u540d\u79f0 \u8bf4\u660e + \u8fde\u63a5\u5b57\u7b26\u4e32\u3002 CONTAINS \u5728\u5b57\u7b26\u4e32\u4e2d\u6267\u884c\u641c\u7d22\u3002 (NOT) IN \u5b57\u7b26\u4e32\u662f\u5426\u5339\u914d\u67d0\u4e2a\u503c\u3002 (NOT) STARTS WITH \u5728\u5b57\u7b26\u4e32\u7684\u5f00\u5934\u6267\u884c\u5339\u914d\u3002 (NOT) ENDS WITH \u5728\u5b57\u7b26\u4e32\u7684\u7ed3\u5c3e\u6267\u884c\u5339\u914d\u3002 \u6b63\u5219\u8868\u8fbe\u5f0f \u901a\u8fc7\u6b63\u5219\u8868\u8fbe\u5f0f\u5339\u914d\u5b57\u7b26\u4e32\u3002 Note \u6240\u6709\u641c\u7d22\u6216\u5339\u914d\u90fd\u533a\u5206\u5927\u5c0f\u5199\u3002","title":"\u5b57\u7b26\u4e32\u8fd0\u7b97\u7b26"},{"location":"3.ngql-guide/5.operators/7.string/#_2","text":"","title":"\u793a\u4f8b"},{"location":"3.ngql-guide/5.operators/7.string/#_3","text":"nebula> RETURN 'a' + 'b'; +-----------+ | (\"a\"+\"b\") | +-----------+ | \"ab\" | +-----------+ nebula> UNWIND 'a' AS a UNWIND 'b' AS b RETURN a + b; +-------+ | (a+b) | +-------+ | \"ab\" | +-------+","title":"+"},{"location":"3.ngql-guide/5.operators/7.string/#contains","text":"CONTAINS \u8981\u6c42\u5f85\u8fd0\u7b97\u7684\u5de6\u53f3\u4e24\u8fb9\u90fd\u662f\u5b57\u7b26\u4e32\u7c7b\u578b\u3002 nebula> MATCH (s:player)-[e:serve]->(t:team) WHERE id(s) == \"player101\" \\ AND t.team.name CONTAINS \"ets\" RETURN s.player.name, e.start_year, e.end_year, t.team.name; +---------------+--------------+------------+-------------+ | s.player.name | e.start_year | e.end_year | t.team.name | +---------------+--------------+------------+-------------+ | \"Tony Parker\" | 2018 | 2019 | \"Hornets\" | +---------------+--------------+------------+-------------+ nebula> GO FROM \"player101\" OVER serve WHERE (STRING)properties(edge).start_year CONTAINS \"19\" AND \\ properties($^).name CONTAINS \"ny\" \\ YIELD properties($^).name, properties(edge).start_year, properties(edge).end_year, properties($$).name; +---------------------+-----------------------------+---------------------------+---------------------+ | properties($^).name | properties(EDGE).start_year | properties(EDGE).end_year | properties($$).name | +---------------------+-----------------------------+---------------------------+---------------------+ | \"Tony Parker\" | 1999 | 2018 | \"Spurs\" | +---------------------+-----------------------------+---------------------------+---------------------+ nebula> GO FROM \"player101\" OVER serve WHERE !(properties($$).name CONTAINS \"ets\") \\ YIELD properties($^).name, properties(edge).start_year, properties(edge).end_year, properties($$).name; +---------------------+-----------------------------+---------------------------+---------------------+ | properties($^).name | properties(EDGE).start_year | properties(EDGE).end_year | properties($$).name | +---------------------+-----------------------------+---------------------------+---------------------+ | \"Tony Parker\" | 1999 | 2018 | \"Spurs\" | +---------------------+-----------------------------+---------------------------+---------------------+","title":"CONTAINS"},{"location":"3.ngql-guide/5.operators/7.string/#not_in","text":"nebula> RETURN 1 IN [1,2,3], \"Yao\" NOT IN [\"Yi\", \"Tim\", \"Kobe\"], NULL IN [\"Yi\", \"Tim\", \"Kobe\"]; +----------------+------------------------------------+-------------------------------+ | (1 IN [1,2,3]) | (\"Yao\" NOT IN [\"Yi\",\"Tim\",\"Kobe\"]) | (NULL IN [\"Yi\",\"Tim\",\"Kobe\"]) | +----------------+------------------------------------+-------------------------------+ | true | true | __NULL__ | +----------------+------------------------------------+-------------------------------+","title":"(NOT) IN"},{"location":"3.ngql-guide/5.operators/7.string/#not_starts_with","text":"nebula> RETURN 'apple' STARTS WITH 'app', 'apple' STARTS WITH 'a', 'apple' STARTS WITH toUpper('a'); +-----------------------------+---------------------------+------------------------------------+ | (\"apple\" STARTS WITH \"app\") | (\"apple\" STARTS WITH \"a\") | (\"apple\" STARTS WITH toUpper(\"a\")) | +-----------------------------+---------------------------+------------------------------------+ | true | true | false | +-----------------------------+---------------------------+------------------------------------+ nebula> RETURN 'apple' STARTS WITH 'b','apple' NOT STARTS WITH 'app'; +---------------------------+---------------------------------+ | (\"apple\" STARTS WITH \"b\") | (\"apple\" NOT STARTS WITH \"app\") | +---------------------------+---------------------------------+ | false | false | +---------------------------+---------------------------------+","title":"(NOT) STARTS WITH"},{"location":"3.ngql-guide/5.operators/7.string/#not_ends_with","text":"nebula> RETURN 'apple' ENDS WITH 'app', 'apple' ENDS WITH 'e', 'apple' ENDS WITH 'E', 'apple' ENDS WITH 'b'; +---------------------------+-------------------------+-------------------------+-------------------------+ | (\"apple\" ENDS WITH \"app\") | (\"apple\" ENDS WITH \"e\") | (\"apple\" ENDS WITH \"E\") | (\"apple\" ENDS WITH \"b\") | +---------------------------+-------------------------+-------------------------+-------------------------+ | false | true | false | false | +---------------------------+-------------------------+-------------------------+-------------------------+","title":"(NOT) ENDS WITH"},{"location":"3.ngql-guide/5.operators/7.string/#_4","text":"Note \u5f53\u524d\u4ec5 opencypher \u517c\u5bb9\u8bed\u53e5\uff08 MATCH \u3001 WITH \u7b49\uff09\u652f\u6301\u6b63\u5219\u8868\u8fbe\u5f0f\uff0c\u539f\u751f nGQL \u8bed\u53e5\uff08 FETCH \u3001 GO \u3001 LOOKUP \u7b49\uff09\u4e0d\u652f\u6301\u6b63\u5219\u8868\u8fbe\u5f0f\u3002 NebulaGraph\u652f\u6301\u4f7f\u7528\u6b63\u5219\u8868\u8fbe\u5f0f\u8fdb\u884c\u8fc7\u6ee4\uff0c\u6b63\u5219\u8868\u8fbe\u5f0f\u7684\u8bed\u6cd5\u662f\u7ee7\u627f\u81ea std::regex \uff0c\u7528\u6237\u53ef\u4ee5\u4f7f\u7528\u8bed\u6cd5 =~ '<regexp>' \u8fdb\u884c\u6b63\u5219\u8868\u8fbe\u5f0f\u5339\u914d\u3002\u4f8b\u5982\uff1a nebula> RETURN \"384748.39\" =~ \"\\\\d+(\\\\.\\\\d{2})?\"; +--------------------------------+ | (\"384748.39\"=~\"\\d+(\\.\\d{2})?\") | +--------------------------------+ | true | +--------------------------------+ nebula> MATCH (v:player) WHERE v.player.name =~ 'Tony.*' RETURN v.player.name; +---------------+ | v.player.name | +---------------+ | \"Tony Parker\" | +---------------+","title":"\u6b63\u5219\u8868\u8fbe\u5f0f"},{"location":"3.ngql-guide/5.operators/8.list/","text":"\u5217\u8868\u8fd0\u7b97\u7b26 \u00b6 NebulaGraph\u652f\u6301\u4f7f\u7528\u5217\u8868\uff08List\uff09\u8fd0\u7b97\u7b26\u8fdb\u884c\u8fd0\u7b97\u3002\u652f\u6301\u7684\u8fd0\u7b97\u7b26\u5982\u4e0b\u3002 \u540d\u79f0 \u8bf4\u660e + \u8fde\u63a5\u5217\u8868\u3002 IN \u5143\u7d20\u662f\u5426\u5b58\u5728\u4e8e\u5217\u8868\u4e2d\u3002 [] \u4f7f\u7528\u4e0b\u6807\u64cd\u4f5c\u7b26\u8bbf\u95ee\u5217\u8868\u4e2d\u7684\u5143\u7d20\u3002 \u793a\u4f8b \u00b6 nebula> YIELD [1,2,3,4,5]+[6,7] AS myList; +-----------------------+ | myList | +-----------------------+ | [1, 2, 3, 4, 5, 6, 7] | +-----------------------+ nebula> RETURN size([NULL, 1, 2]); +------------------+ | size([NULL,1,2]) | +------------------+ | 3 | +------------------+ nebula> RETURN NULL IN [NULL, 1]; +--------------------+ | (NULL IN [NULL,1]) | +--------------------+ | __NULL__ | +--------------------+ nebula> WITH [2, 3, 4, 5] AS numberlist \\ UNWIND numberlist AS number \\ WITH number \\ WHERE number IN [2, 3, 8] \\ RETURN number; +--------+ | number | +--------+ | 2 | | 3 | +--------+ nebula> WITH ['Anne', 'John', 'Bill', 'Diane', 'Eve'] AS names RETURN names[1] AS result; +--------+ | result | +--------+ | \"John\" | +--------+","title":"\u5217\u8868\u8fd0\u7b97\u7b26"},{"location":"3.ngql-guide/5.operators/8.list/#_1","text":"NebulaGraph\u652f\u6301\u4f7f\u7528\u5217\u8868\uff08List\uff09\u8fd0\u7b97\u7b26\u8fdb\u884c\u8fd0\u7b97\u3002\u652f\u6301\u7684\u8fd0\u7b97\u7b26\u5982\u4e0b\u3002 \u540d\u79f0 \u8bf4\u660e + \u8fde\u63a5\u5217\u8868\u3002 IN \u5143\u7d20\u662f\u5426\u5b58\u5728\u4e8e\u5217\u8868\u4e2d\u3002 [] \u4f7f\u7528\u4e0b\u6807\u64cd\u4f5c\u7b26\u8bbf\u95ee\u5217\u8868\u4e2d\u7684\u5143\u7d20\u3002","title":"\u5217\u8868\u8fd0\u7b97\u7b26"},{"location":"3.ngql-guide/5.operators/8.list/#_2","text":"nebula> YIELD [1,2,3,4,5]+[6,7] AS myList; +-----------------------+ | myList | +-----------------------+ | [1, 2, 3, 4, 5, 6, 7] | +-----------------------+ nebula> RETURN size([NULL, 1, 2]); +------------------+ | size([NULL,1,2]) | +------------------+ | 3 | +------------------+ nebula> RETURN NULL IN [NULL, 1]; +--------------------+ | (NULL IN [NULL,1]) | +--------------------+ | __NULL__ | +--------------------+ nebula> WITH [2, 3, 4, 5] AS numberlist \\ UNWIND numberlist AS number \\ WITH number \\ WHERE number IN [2, 3, 8] \\ RETURN number; +--------+ | number | +--------+ | 2 | | 3 | +--------+ nebula> WITH ['Anne', 'John', 'Bill', 'Diane', 'Eve'] AS names RETURN names[1] AS result; +--------+ | result | +--------+ | \"John\" | +--------+","title":"\u793a\u4f8b"},{"location":"3.ngql-guide/5.operators/9.precedence/","text":"\u8fd0\u7b97\u7b26\u4f18\u5148\u7ea7 \u00b6 nGQL \u8fd0\u7b97\u7b26\u7684\u4f18\u5148\u7ea7\u4ece\u9ad8\u5230\u4f4e\u6392\u5217\u5982\u4e0b\uff08\u540c\u4e00\u884c\u7684\u8fd0\u7b97\u7b26\u4f18\u5148\u7ea7\u76f8\u540c\uff09\uff1a - \uff08\u8d1f\u6570\uff09 ! \u3001 NOT * \u3001 / \u3001 % - \u3001 + == \u3001 >= \u3001 > \u3001 <= \u3001 < \u3001 <> \u3001 != AND OR \u3001 XOR = \uff08\u8d4b\u503c\uff09 \u5982\u679c\u8868\u8fbe\u5f0f\u4e2d\u6709\u76f8\u540c\u4f18\u5148\u7ea7\u7684\u8fd0\u7b97\u7b26\uff0c\u8fd0\u7b97\u662f\u4ece\u5de6\u5230\u53f3\u8fdb\u884c\uff0c\u53ea\u6709\u8d4b\u503c\u64cd\u4f5c\u662f\u4f8b\u5916\uff08\u4ece\u53f3\u5230\u5de6\u8fd0\u7b97\uff09\u3002 \u8fd0\u7b97\u7b26\u7684\u4f18\u5148\u7ea7\u51b3\u5b9a\u8fd0\u7b97\u7684\u987a\u5e8f\uff0c\u8981\u663e\u5f0f\u4fee\u6539\u8fd0\u7b97\u987a\u5e8f\uff0c\u53ef\u4ee5\u4f7f\u7528\u5706\u62ec\u53f7\u3002 \u793a\u4f8b \u00b6 nebula> RETURN 2+3*5; +-----------+ | (2+(3*5)) | +-----------+ | 17 | +-----------+ nebula> RETURN (2+3)*5; +-----------+ | ((2+3)*5) | +-----------+ | 25 | +-----------+ openCypher \u517c\u5bb9\u6027 \u00b6 \u5728 openCypher \u4e2d\uff0c\u6bd4\u8f83\u64cd\u4f5c\u53ef\u4ee5\u4efb\u610f\u8fde\u63a5\uff0c\u4f8b\u5982 x < y <= z \u7b49\u4ef7\u4e8e x < y AND y <= z \u3002 \u5728 nGQL \u4e2d\uff0c x < y <= z \u7b49\u4ef7\u4e8e (x < y) <= z \uff0c (x < y) \u7684\u7ed3\u679c\u662f\u4e00\u4e2a\u5e03\u5c14\u503c\uff0c\u518d\u5c06\u5e03\u5c14\u503c\u548c z \u6bd4\u8f83\uff0c\u6700\u7ec8\u7ed3\u679c\u662f NULL \u3002","title":"\u8fd0\u7b97\u7b26\u4f18\u5148\u7ea7"},{"location":"3.ngql-guide/5.operators/9.precedence/#_1","text":"nGQL \u8fd0\u7b97\u7b26\u7684\u4f18\u5148\u7ea7\u4ece\u9ad8\u5230\u4f4e\u6392\u5217\u5982\u4e0b\uff08\u540c\u4e00\u884c\u7684\u8fd0\u7b97\u7b26\u4f18\u5148\u7ea7\u76f8\u540c\uff09\uff1a - \uff08\u8d1f\u6570\uff09 ! \u3001 NOT * \u3001 / \u3001 % - \u3001 + == \u3001 >= \u3001 > \u3001 <= \u3001 < \u3001 <> \u3001 != AND OR \u3001 XOR = \uff08\u8d4b\u503c\uff09 \u5982\u679c\u8868\u8fbe\u5f0f\u4e2d\u6709\u76f8\u540c\u4f18\u5148\u7ea7\u7684\u8fd0\u7b97\u7b26\uff0c\u8fd0\u7b97\u662f\u4ece\u5de6\u5230\u53f3\u8fdb\u884c\uff0c\u53ea\u6709\u8d4b\u503c\u64cd\u4f5c\u662f\u4f8b\u5916\uff08\u4ece\u53f3\u5230\u5de6\u8fd0\u7b97\uff09\u3002 \u8fd0\u7b97\u7b26\u7684\u4f18\u5148\u7ea7\u51b3\u5b9a\u8fd0\u7b97\u7684\u987a\u5e8f\uff0c\u8981\u663e\u5f0f\u4fee\u6539\u8fd0\u7b97\u987a\u5e8f\uff0c\u53ef\u4ee5\u4f7f\u7528\u5706\u62ec\u53f7\u3002","title":"\u8fd0\u7b97\u7b26\u4f18\u5148\u7ea7"},{"location":"3.ngql-guide/5.operators/9.precedence/#_2","text":"nebula> RETURN 2+3*5; +-----------+ | (2+(3*5)) | +-----------+ | 17 | +-----------+ nebula> RETURN (2+3)*5; +-----------+ | ((2+3)*5) | +-----------+ | 25 | +-----------+","title":"\u793a\u4f8b"},{"location":"3.ngql-guide/5.operators/9.precedence/#opencypher","text":"\u5728 openCypher \u4e2d\uff0c\u6bd4\u8f83\u64cd\u4f5c\u53ef\u4ee5\u4efb\u610f\u8fde\u63a5\uff0c\u4f8b\u5982 x < y <= z \u7b49\u4ef7\u4e8e x < y AND y <= z \u3002 \u5728 nGQL \u4e2d\uff0c x < y <= z \u7b49\u4ef7\u4e8e (x < y) <= z \uff0c (x < y) \u7684\u7ed3\u679c\u662f\u4e00\u4e2a\u5e03\u5c14\u503c\uff0c\u518d\u5c06\u5e03\u5c14\u503c\u548c z \u6bd4\u8f83\uff0c\u6700\u7ec8\u7ed3\u679c\u662f NULL \u3002","title":"openCypher \u517c\u5bb9\u6027"},{"location":"3.ngql-guide/6.functions-and-expressions/1.math/","text":"\u5185\u7f6e\u6570\u5b66\u51fd\u6570 \u00b6 \u672c\u6587\u4ecb\u7ecdNebulaGraph\u652f\u6301\u7684\u6570\u5b66\u51fd\u6570\u3002 abs() \u00b6 abs() \u8fd4\u56de\u6307\u5b9a\u6570\u5b57\u7684\u7edd\u5bf9\u503c\u3002 \u8bed\u6cd5\uff1a abs(<expression>) expression \uff1a\u7ed3\u679c\u7684\u6570\u636e\u7c7b\u578b\u4e3a double \u7684\u8868\u8fbe\u5f0f\u3002 \u8fd4\u56de\u7c7b\u578b\uff1adouble\u3002 \u793a\u4f8b\uff1a nebula> RETURN abs(-10); +------------+ | abs(-(10)) | +------------+ | 10 | +------------+ nebula> RETURN abs(5-6); +------------+ | abs((5-6)) | +------------+ | 1 | +------------+ floor() \u00b6 floor() \u8fd4\u56de\u5c0f\u4e8e\u6216\u7b49\u4e8e\u6307\u5b9a\u6570\u5b57\u7684\u6700\u5927\u6574\u6570\u3002 \u8bed\u6cd5\uff1a floor(<expression>) expression \uff1a\u7ed3\u679c\u7684\u6570\u636e\u7c7b\u578b\u4e3a double \u7684\u8868\u8fbe\u5f0f\u3002 \u8fd4\u56de\u7c7b\u578b\uff1adouble\u3002 \u793a\u4f8b\uff1a nebula> RETURN floor(9.9); +------------+ | floor(9.9) | +------------+ | 9.0 | +------------+ ceil() \u00b6 ceil() \u8fd4\u56de\u5927\u4e8e\u6216\u7b49\u4e8e\u6307\u5b9a\u6570\u5b57\u7684\u6700\u5c0f\u6574\u6570\u3002 \u8bed\u6cd5\uff1a ceil(<expression>) expression \uff1a\u7ed3\u679c\u7684\u6570\u636e\u7c7b\u578b\u4e3a double \u7684\u8868\u8fbe\u5f0f\u3002 \u8fd4\u56de\u7c7b\u578b\uff1adouble\u3002 \u793a\u4f8b\uff1a nebula> RETURN ceil(9.1); +-----------+ | ceil(9.1) | +-----------+ | 10.0 | +-----------+ round() \u00b6 round() \u8fd4\u56de\u6307\u5b9a\u6570\u5b57\u56db\u820d\u4e94\u5165\u540e\u7684\u503c\u3002\u6781\u7aef\u60c5\u51b5\u4e0b\u8bf7\u6ce8\u610f\u6d6e\u70b9\u6570\u7684\u7cbe\u5ea6\u95ee\u9898\u3002 \u8bed\u6cd5\uff1a round(<expression>, <digit>) expression \uff1a\u7ed3\u679c\u7684\u6570\u636e\u7c7b\u578b\u4e3a double \u7684\u8868\u8fbe\u5f0f\u3002 digit \uff1a\u5c0f\u6570\u4f4d\u6570\u3002\u5c0f\u4e8e 0 \u65f6 \uff0c\u5728\u5c0f\u6570\u70b9\u5de6\u4fa7\u505a\u56db\u820d\u4e94\u5165\u3002\u6570\u636e\u7c7b\u578b\u4e3a int\u3002 \u8fd4\u56de\u7c7b\u578b\uff1adouble\u3002 \u793a\u4f8b\uff1a nebula> RETURN round(314.15926, 2); +--------------------+ | round(314.15926,2) | +--------------------+ | 314.16 | +--------------------+ nebula> RETURN round(314.15926, -1); +-----------------------+ | round(314.15926,-(1)) | +-----------------------+ | 310.0 | +-----------------------+ sqrt() \u00b6 sqrt() \u8fd4\u56de\u6307\u5b9a\u6570\u5b57\u7684\u5e73\u65b9\u6839\u3002 \u8bed\u6cd5\uff1a sqrt(<expression>) expression \uff1a\u7ed3\u679c\u7684\u6570\u636e\u7c7b\u578b\u4e3a double \u7684\u8868\u8fbe\u5f0f\u3002 \u8fd4\u56de\u7c7b\u578b\uff1adouble\u3002 \u793a\u4f8b\uff1a nebula> RETURN sqrt(9); +---------+ | sqrt(9) | +---------+ | 3.0 | +---------+ cbrt() \u00b6 cbrt() \u8fd4\u56de\u6307\u5b9a\u6570\u5b57\u7684\u7acb\u65b9\u6839\u3002 \u8bed\u6cd5\uff1a cbrt(<expression>) expression \uff1a\u7ed3\u679c\u7684\u6570\u636e\u7c7b\u578b\u4e3a double \u7684\u8868\u8fbe\u5f0f\u3002 \u8fd4\u56de\u7c7b\u578b\uff1adouble\u3002 \u793a\u4f8b\uff1a nebula> RETURN cbrt(8); +---------+ | cbrt(8) | +---------+ | 2.0 | +---------+ hypot() \u00b6 hypot() \u8fd4\u56de\u76f4\u89d2\u4e09\u89d2\u5f62\u7684\u659c\u8fb9\u957f\u3002 \u8bed\u6cd5\uff1a hypot(<expression_x>,<expression_y>) expression_x \u3001 expression_y \uff1a\u7ed3\u679c\u7684\u6570\u636e\u7c7b\u578b\u4e3a double \u7684\u8868\u8fbe\u5f0f\u3002\u8868\u793a\u76f4\u89d2\u4e09\u89d2\u5f62\u7684\u8fb9\u957f x \u548c y \u3002 \u8fd4\u56de\u7c7b\u578b\uff1adouble\u3002 \u793a\u4f8b\uff1a nebula> RETURN hypot(3,2*2); +----------------+ | hypot(3,(2*2)) | +----------------+ | 5.0 | +----------------+ pow() \u00b6 pow() \u8fd4\u56de\u6307\u5b9a\u6570\u5b57\u7684\u5e42\uff08x y \uff09\u3002 \u8bed\u6cd5\uff1a pow(<expression_x>,<expression_y>,) expression_x \uff1a\u7ed3\u679c\u7684\u6570\u636e\u7c7b\u578b\u4e3a double \u7684\u8868\u8fbe\u5f0f\u3002\u8868\u793a\u5e95\u6570 x \u3002 expression_y \uff1a\u7ed3\u679c\u7684\u6570\u636e\u7c7b\u578b\u4e3a double \u7684\u8868\u8fbe\u5f0f\u3002\u8868\u793a\u6307\u6570 y \u3002 \u8fd4\u56de\u7c7b\u578b\uff1adouble\u3002 \u793a\u4f8b\uff1a nebula> RETURN pow(3,3); +----------+ | pow(3,3) | +----------+ | 27 | +----------+ exp() \u00b6 exp() \u8fd4\u56de\u81ea\u7136\u5e38\u6570 e \u7684\u5e42\uff08e x \uff09\u3002 \u8bed\u6cd5\uff1a exp(<expression>) expression \uff1a\u7ed3\u679c\u7684\u6570\u636e\u7c7b\u578b\u4e3a double \u7684\u8868\u8fbe\u5f0f\u3002\u8868\u793a\u6307\u6570 x \u3002 \u8fd4\u56de\u7c7b\u578b\uff1adouble\u3002 \u793a\u4f8b\uff1a nebula> RETURN exp(2); +------------------+ | exp(2) | +------------------+ | 7.38905609893065 | +------------------+ exp2() \u00b6 exp2() \u8fd4\u56de2\u7684\u5e42\uff082 x \uff09\u3002 \u8bed\u6cd5\uff1a exp2(<expression>) expression \uff1a\u7ed3\u679c\u7684\u6570\u636e\u7c7b\u578b\u4e3a double \u7684\u8868\u8fbe\u5f0f\u3002\u8868\u793a\u6307\u6570 x \u3002 \u8fd4\u56de\u7c7b\u578b\uff1adouble\u3002 \u793a\u4f8b\uff1a nebula> RETURN exp2(3); +---------+ | exp2(3) | +---------+ | 8.0 | +---------+ log() \u00b6 log() \u8fd4\u56de\u4ee5\u81ea\u7136\u6570 e \u4e3a\u5e95\u7684\u5bf9\u6570\uff08 \\(log_{e}{N}\\) \uff09\u3002 \u8bed\u6cd5\uff1a log(<expression>) expression \uff1a\u7ed3\u679c\u7684\u6570\u636e\u7c7b\u578b\u4e3a double \u7684\u8868\u8fbe\u5f0f\u3002\u8868\u793a\u771f\u6570 N \u3002 \u8fd4\u56de\u7c7b\u578b\uff1adouble\u3002 \u793a\u4f8b\uff1a nebula> RETURN log(8); +--------------------+ | log(8) | +--------------------+ | 2.0794415416798357 | +--------------------+ log2() \u00b6 log2() \u8fd4\u56de\u4ee5 2 \u4e3a\u5e95\u7684\u5bf9\u6570\uff08 \\(log_{2}{N}\\) \uff09\u3002 \u8bed\u6cd5\uff1a log2(<expression>) expression \uff1a\u7ed3\u679c\u7684\u6570\u636e\u7c7b\u578b\u4e3a double \u7684\u8868\u8fbe\u5f0f\u3002\u8868\u793a\u771f\u6570 N \u3002 \u8fd4\u56de\u7c7b\u578b\uff1adouble\u3002 \u793a\u4f8b\uff1a nebula> RETURN log2(8); +---------+ | log2(8) | +---------+ | 3.0 | +---------+ log10() \u00b6 log10() \u8fd4\u56de\u4ee5 10 \u4e3a\u5e95\u7684\u5bf9\u6570\uff08 \\(log_{10}{N}\\) \uff09\u3002 \u8bed\u6cd5\uff1a log10(<expression>) expression \uff1a\u7ed3\u679c\u7684\u6570\u636e\u7c7b\u578b\u4e3a double \u7684\u8868\u8fbe\u5f0f\u3002\u8868\u793a\u771f\u6570 N \u3002 \u8fd4\u56de\u7c7b\u578b\uff1adouble\u3002 \u793a\u4f8b\uff1a nebula> RETURN log10(100); +------------+ | log10(100) | +------------+ | 2.0 | +------------+ sin() \u00b6 sin() \u8fd4\u56de\u6307\u5b9a\u6570\u5b57\u7684\u6b63\u5f26\u503c\u3002\u53ef\u4ee5\u4f7f\u7528\u51fd\u6570 radians() \u5c06\u89d2\u5ea6\u8f6c\u5316\u4e3a\u5f27\u5ea6\u3002 \u8bed\u6cd5\uff1a sin(<expression>) expression \uff1a\u7ed3\u679c\u7684\u6570\u636e\u7c7b\u578b\u4e3a double \u7684\u8868\u8fbe\u5f0f\u3002 \u8fd4\u56de\u7c7b\u578b\uff1adouble\u3002 \u793a\u4f8b\uff1a nebula> RETURN sin(3); +--------------------+ | sin(3) | +--------------------+ | 0.1411200080598672 | +--------------------+ asin() \u00b6 asin() \u8fd4\u56de\u6307\u5b9a\u6570\u5b57\u7684\u53cd\u6b63\u5f26\u503c\u3002\u53ef\u4ee5\u4f7f\u7528\u51fd\u6570 radians() \u5c06\u89d2\u5ea6\u8f6c\u5316\u4e3a\u5f27\u5ea6\u3002 \u8bed\u6cd5\uff1a asin(<expression>) expression \uff1a\u7ed3\u679c\u7684\u6570\u636e\u7c7b\u578b\u4e3a double \u7684\u8868\u8fbe\u5f0f\u3002 \u8fd4\u56de\u7c7b\u578b\uff1adouble\u3002 \u793a\u4f8b\uff1a nebula> RETURN asin(0.5); +--------------------+ | asin(0.5) | +--------------------+ | 0.5235987755982989 | +--------------------+ cos() \u00b6 cos() \u8fd4\u56de\u6307\u5b9a\u6570\u5b57\u7684\u4f59\u5f26\u503c\u3002\u53ef\u4ee5\u4f7f\u7528\u51fd\u6570 radians() \u5c06\u89d2\u5ea6\u8f6c\u5316\u4e3a\u5f27\u5ea6\u3002 \u8bed\u6cd5\uff1a cos(<expression>) expression \uff1a\u7ed3\u679c\u7684\u6570\u636e\u7c7b\u578b\u4e3a double \u7684\u8868\u8fbe\u5f0f\u3002 \u8fd4\u56de\u7c7b\u578b\uff1adouble\u3002 \u793a\u4f8b\uff1a nebula> RETURN cos(0.5); +--------------------+ | cos(0.5) | +--------------------+ | 0.8775825618903728 | +--------------------+ acos() \u00b6 acos() \u8fd4\u56de\u6307\u5b9a\u6570\u5b57\u7684\u53cd\u4f59\u5f26\u503c\u3002\u53ef\u4ee5\u4f7f\u7528\u51fd\u6570 radians() \u5c06\u89d2\u5ea6\u8f6c\u5316\u4e3a\u5f27\u5ea6\u3002 \u8bed\u6cd5\uff1a acos(<expression>) expression \uff1a\u7ed3\u679c\u7684\u6570\u636e\u7c7b\u578b\u4e3a double \u7684\u8868\u8fbe\u5f0f\u3002 \u8fd4\u56de\u7c7b\u578b\uff1adouble\u3002 \u793a\u4f8b\uff1a nebula> RETURN acos(0.5); +--------------------+ | acos(0.5) | +--------------------+ | 1.0471975511965979 | +--------------------+ tan() \u00b6 tan() \u8fd4\u56de\u6307\u5b9a\u6570\u5b57\u7684\u6b63\u5207\u503c\u3002\u53ef\u4ee5\u4f7f\u7528\u51fd\u6570 radians() \u5c06\u89d2\u5ea6\u8f6c\u5316\u4e3a\u5f27\u5ea6\u3002 \u8bed\u6cd5\uff1a tan(<expression>) expression \uff1a\u7ed3\u679c\u7684\u6570\u636e\u7c7b\u578b\u4e3a double \u7684\u8868\u8fbe\u5f0f\u3002 \u8fd4\u56de\u7c7b\u578b\uff1adouble\u3002 \u793a\u4f8b\uff1a nebula> RETURN tan(0.5); +--------------------+ | tan(0.5) | +--------------------+ | 0.5463024898437905 | +--------------------+ atan() \u00b6 atan() \u8fd4\u56de\u6307\u5b9a\u6570\u5b57\u7684\u53cd\u6b63\u5207\u503c\u3002\u53ef\u4ee5\u4f7f\u7528\u51fd\u6570 radians() \u5c06\u89d2\u5ea6\u8f6c\u5316\u4e3a\u5f27\u5ea6\u3002 \u8bed\u6cd5\uff1a atan(<expression>) expression \uff1a\u7ed3\u679c\u7684\u6570\u636e\u7c7b\u578b\u4e3a double \u7684\u8868\u8fbe\u5f0f\u3002 \u8fd4\u56de\u7c7b\u578b\uff1adouble\u3002 \u793a\u4f8b\uff1a nebula> RETURN atan(0.5); +--------------------+ | atan(0.5) | +--------------------+ | 0.4636476090008061 | +--------------------+ rand() \u00b6 rand() \u8fd4\u56de [0,1) \u5185\u7684\u968f\u673a\u6d6e\u70b9\u6570\u3002 \u8bed\u6cd5\uff1a rand() \u8fd4\u56de\u7c7b\u578b\uff1adouble\u3002 \u793a\u4f8b\uff1a nebula> RETURN rand(); +--------------------+ | rand() | +--------------------+ | 0.6545837172298736 | +--------------------+ rand32() \u00b6 rand32() \u8fd4\u56de\u6307\u5b9a\u8303\u56f4\uff08 [min, max) \uff09\u5185\u7684\u968f\u673a 32 \u4f4d\u6574\u6570\u3002 \u8bed\u6cd5\uff1a rand32(<expression_min>,<expression_max>) expression_min \uff1a\u7ed3\u679c\u7684\u6570\u636e\u7c7b\u578b\u4e3a int \u7684\u8868\u8fbe\u5f0f\u3002\u8868\u793a\u6700\u5c0f\u503c min \u3002 expression_max \uff1a\u7ed3\u679c\u7684\u6570\u636e\u7c7b\u578b\u4e3a int \u7684\u8868\u8fbe\u5f0f\u3002\u8868\u793a\u6700\u5927\u503c max \u3002 \u8fd4\u56de\u7c7b\u578b\uff1aint\u3002 \u7528\u6237\u53ef\u4ee5\u53ea\u4f20\u5165\u4e00\u4e2a\u53c2\u6570\uff0c\u8be5\u53c2\u6570\u4f1a\u5224\u5b9a\u4e3a max \uff0c\u6b64\u65f6 min \u9ed8\u8ba4\u4e3a 0 \u3002\u5982\u679c\u4e0d\u4f20\u5165\u53c2\u6570\uff0c\u6b64\u65f6\u4f1a\u4ece\u5e26\u7b26\u53f7\u7684 32 \u4f4d int \u8303\u56f4\u5185\u968f\u673a\u8fd4\u56de\u3002 \u793a\u4f8b\uff1a nebula> RETURN rand32(1,100); +---------------+ | rand32(1,100) | +---------------+ | 63 | +---------------+ rand64() \u00b6 rand64() \u8fd4\u56de\u6307\u5b9a\u8303\u56f4\uff08 [min, max) \uff09\u5185\u7684\u968f\u673a 64 \u4f4d\u6574\u6570\u3002 \u8bed\u6cd5\uff1a rand64(<expression_min>,<expression_max>) expression_min \uff1a\u7ed3\u679c\u7684\u6570\u636e\u7c7b\u578b\u4e3a int \u7684\u8868\u8fbe\u5f0f\u3002\u8868\u793a\u6700\u5c0f\u503c min \u3002 expression_max \uff1a\u7ed3\u679c\u7684\u6570\u636e\u7c7b\u578b\u4e3a int \u7684\u8868\u8fbe\u5f0f\u3002\u8868\u793a\u6700\u5927\u503c max \u3002 \u8fd4\u56de\u7c7b\u578b\uff1aint\u3002 \u7528\u6237\u53ef\u4ee5\u53ea\u4f20\u5165\u4e00\u4e2a\u53c2\u6570\uff0c\u8be5\u53c2\u6570\u4f1a\u5224\u5b9a\u4e3a max \uff0c\u6b64\u65f6 min \u9ed8\u8ba4\u4e3a 0 \u3002\u5982\u679c\u4e0d\u4f20\u5165\u53c2\u6570\uff0c\u6b64\u65f6\u4f1a\u4ece\u5e26\u7b26\u53f7\u7684 64 \u4f4d int \u8303\u56f4\u5185\u968f\u673a\u8fd4\u56de\u3002 \u793a\u4f8b\uff1a nebula> RETURN rand64(1,100); +---------------+ | rand64(1,100) | +---------------+ | 34 | +---------------+ bit_and() \u00b6 bit_and() \u8fd4\u56de\u6309\u4f4d\u8fdb\u884c AND \u8fd0\u7b97\u540e\u7684\u7ed3\u679c\u3002 \u8bed\u6cd5\uff1a bit_and(<expression_1>,<expression_2>) expression_1 \u3001 expression_2 \uff1a\u7ed3\u679c\u7684\u6570\u636e\u7c7b\u578b\u4e3a int \u7684\u8868\u8fbe\u5f0f\u3002 \u8fd4\u56de\u7c7b\u578b\uff1aint\u3002 \u793a\u4f8b\uff1a nebula> RETURN bit_and(5,6); +--------------+ | bit_and(5,6) | +--------------+ | 4 | +--------------+ bit_or() \u00b6 bit_or() \u8fd4\u56de\u6309\u4f4d\u8fdb\u884c OR \u8fd0\u7b97\u540e\u7684\u7ed3\u679c\u3002 \u8bed\u6cd5\uff1a bit_or(<expression_1>,<expression_2>) expression_1 \u3001 expression_2 \uff1a\u7ed3\u679c\u7684\u6570\u636e\u7c7b\u578b\u4e3a int \u7684\u8868\u8fbe\u5f0f\u3002 \u8fd4\u56de\u7c7b\u578b\uff1aint\u3002 \u793a\u4f8b\uff1a nebula> RETURN bit_or(5,6); +-------------+ | bit_or(5,6) | +-------------+ | 7 | +-------------+ bit_xor() \u00b6 bit_xor() \u8fd4\u56de\u6309\u4f4d\u8fdb\u884c XOR \u8fd0\u7b97\u540e\u7684\u7ed3\u679c\u3002 \u8bed\u6cd5\uff1a bit_xor(<expression_1>,<expression_2>) expression_1 \u3001 expression_2 \uff1a\u7ed3\u679c\u7684\u6570\u636e\u7c7b\u578b\u4e3a int \u7684\u8868\u8fbe\u5f0f\u3002 \u8fd4\u56de\u7c7b\u578b\uff1aint\u3002 \u793a\u4f8b\uff1a nebula> RETURN bit_xor(5,6); +--------------+ | bit_xor(5,6) | +--------------+ | 3 | +--------------+ size() \u00b6 size() \u8fd4\u56de\u5217\u8868\u6216\u6620\u5c04\u4e2d\u5143\u7d20\u7684\u6570\u91cf\uff0c\u6216\u8005\u8fd4\u56de\u5b57\u7b26\u4e32\u7684\u957f\u5ea6\u3002 \u8bed\u6cd5\uff1a size({<expression>|<string>}) expression \uff1a\u5217\u8868\u6216\u6620\u5c04\u7684\u8868\u8fbe\u5f0f\u3002 string \uff1a\u6307\u5b9a\u7684\u5b57\u7b26\u4e32\u3002 \u8fd4\u56de\u7c7b\u578b\uff1aint\u3002 \u793a\u4f8b\uff1a nebula> RETURN size([1,2,3,4]); +-----------------+ | size([1,2,3,4]) | +-----------------+ | 4 | +-----------------+ nebula> RETURN size(\"basketballplayer\") as size; +------+ | size | +------+ | 16 | +------+ range() \u00b6 range() \u8fd4\u56de\u6307\u5b9a\u8303\u56f4\uff08 [start,end] \uff09\u4e2d\u6307\u5b9a\u6b65\u957f\u7684\u503c\u7ec4\u6210\u7684\u5217\u8868\u3002 \u8bed\u6cd5\uff1a range(<expression_start>,<expression_end>[,<expression_step>]) expression_start \uff1a\u7ed3\u679c\u7684\u6570\u636e\u7c7b\u578b\u4e3a int \u7684\u8868\u8fbe\u5f0f\u3002\u8868\u793a\u8d77\u59cb\u503c start \u3002 expression_end \uff1a\u7ed3\u679c\u7684\u6570\u636e\u7c7b\u578b\u4e3a int \u7684\u8868\u8fbe\u5f0f\u3002\u8868\u793a\u7ed3\u675f\u503c end \u3002 expression_step \uff1a\u7ed3\u679c\u7684\u6570\u636e\u7c7b\u578b\u4e3a int \u7684\u8868\u8fbe\u5f0f\u3002\u8868\u793a\u6b65\u957f step \uff0c\u9ed8\u8ba4\u503c\u4e3a 1 \u3002 \u8fd4\u56de\u7c7b\u578b\uff1alist\u3002 \u793a\u4f8b\uff1a nebula> RETURN range(1,3*3,2); +------------------+ | range(1,(3*3),2) | +------------------+ | [1, 3, 5, 7, 9] | +------------------+ sign() \u00b6 sign() \u8fd4\u56de\u6307\u5b9a\u6570\u5b57\u7684\u6b63\u8d1f\u53f7\u3002\u5982\u679c\u6570\u5b57\u4e3a 0 \uff0c\u5219\u8fd4\u56de 0 \uff1b\u5982\u679c\u6570\u5b57\u4e3a\u8d1f\u6570\uff0c\u5219\u8fd4\u56de -1 \uff1b\u5982\u679c\u6570\u5b57\u4e3a\u6b63\u6570\uff0c\u5219\u8fd4\u56de 1 \u3002 \u8bed\u6cd5\uff1a sign(<expression>) expression \uff1a\u7ed3\u679c\u7684\u6570\u636e\u7c7b\u578b\u4e3a double \u7684\u8868\u8fbe\u5f0f\u3002 \u8fd4\u56de\u7c7b\u578b\uff1aint\u3002 \u793a\u4f8b\uff1a nebula> RETURN sign(10); +----------+ | sign(10) | +----------+ | 1 | +----------+ e() \u00b6 e() \u8fd4\u56de\u81ea\u7136\u5bf9\u6570\u7684\u5e95 e\uff082.718281828459045\uff09\u3002 \u8bed\u6cd5\uff1a e() \u8fd4\u56de\u7c7b\u578b\uff1adouble\u3002 \u793a\u4f8b\uff1a nebula> RETURN e(); +-------------------+ | e() | +-------------------+ | 2.718281828459045 | +-------------------+ pi() \u00b6 pi() \u8fd4\u56de\u6570\u5b66\u5e38\u6570\u03c0\uff083.141592653589793\uff09\u3002 \u8bed\u6cd5\uff1a pi() \u8fd4\u56de\u7c7b\u578b\uff1adouble\u3002 \u793a\u4f8b\uff1a nebula> RETURN pi(); +-------------------+ | pi() | +-------------------+ | 3.141592653589793 | +-------------------+ radians() \u00b6 radians() \u8fd4\u56de\u6307\u5b9a\u89d2\u5ea6\u7684\u5f27\u5ea6\u3002 \u8bed\u6cd5\uff1a radians(<angle>) \u8fd4\u56de\u7c7b\u578b\uff1adouble\u3002 \u793a\u4f8b\uff1a nebula> RETURN radians(180); +-------------------+ | radians(180) | +-------------------+ | 3.141592653589793 | +-------------------+","title":"\u6570\u5b66\u51fd\u6570"},{"location":"3.ngql-guide/6.functions-and-expressions/1.math/#_1","text":"\u672c\u6587\u4ecb\u7ecdNebulaGraph\u652f\u6301\u7684\u6570\u5b66\u51fd\u6570\u3002","title":"\u5185\u7f6e\u6570\u5b66\u51fd\u6570"},{"location":"3.ngql-guide/6.functions-and-expressions/1.math/#abs","text":"abs() \u8fd4\u56de\u6307\u5b9a\u6570\u5b57\u7684\u7edd\u5bf9\u503c\u3002 \u8bed\u6cd5\uff1a abs(<expression>) expression \uff1a\u7ed3\u679c\u7684\u6570\u636e\u7c7b\u578b\u4e3a double \u7684\u8868\u8fbe\u5f0f\u3002 \u8fd4\u56de\u7c7b\u578b\uff1adouble\u3002 \u793a\u4f8b\uff1a nebula> RETURN abs(-10); +------------+ | abs(-(10)) | +------------+ | 10 | +------------+ nebula> RETURN abs(5-6); +------------+ | abs((5-6)) | +------------+ | 1 | +------------+","title":"abs()"},{"location":"3.ngql-guide/6.functions-and-expressions/1.math/#floor","text":"floor() \u8fd4\u56de\u5c0f\u4e8e\u6216\u7b49\u4e8e\u6307\u5b9a\u6570\u5b57\u7684\u6700\u5927\u6574\u6570\u3002 \u8bed\u6cd5\uff1a floor(<expression>) expression \uff1a\u7ed3\u679c\u7684\u6570\u636e\u7c7b\u578b\u4e3a double \u7684\u8868\u8fbe\u5f0f\u3002 \u8fd4\u56de\u7c7b\u578b\uff1adouble\u3002 \u793a\u4f8b\uff1a nebula> RETURN floor(9.9); +------------+ | floor(9.9) | +------------+ | 9.0 | +------------+","title":"floor()"},{"location":"3.ngql-guide/6.functions-and-expressions/1.math/#ceil","text":"ceil() \u8fd4\u56de\u5927\u4e8e\u6216\u7b49\u4e8e\u6307\u5b9a\u6570\u5b57\u7684\u6700\u5c0f\u6574\u6570\u3002 \u8bed\u6cd5\uff1a ceil(<expression>) expression \uff1a\u7ed3\u679c\u7684\u6570\u636e\u7c7b\u578b\u4e3a double \u7684\u8868\u8fbe\u5f0f\u3002 \u8fd4\u56de\u7c7b\u578b\uff1adouble\u3002 \u793a\u4f8b\uff1a nebula> RETURN ceil(9.1); +-----------+ | ceil(9.1) | +-----------+ | 10.0 | +-----------+","title":"ceil()"},{"location":"3.ngql-guide/6.functions-and-expressions/1.math/#round","text":"round() \u8fd4\u56de\u6307\u5b9a\u6570\u5b57\u56db\u820d\u4e94\u5165\u540e\u7684\u503c\u3002\u6781\u7aef\u60c5\u51b5\u4e0b\u8bf7\u6ce8\u610f\u6d6e\u70b9\u6570\u7684\u7cbe\u5ea6\u95ee\u9898\u3002 \u8bed\u6cd5\uff1a round(<expression>, <digit>) expression \uff1a\u7ed3\u679c\u7684\u6570\u636e\u7c7b\u578b\u4e3a double \u7684\u8868\u8fbe\u5f0f\u3002 digit \uff1a\u5c0f\u6570\u4f4d\u6570\u3002\u5c0f\u4e8e 0 \u65f6 \uff0c\u5728\u5c0f\u6570\u70b9\u5de6\u4fa7\u505a\u56db\u820d\u4e94\u5165\u3002\u6570\u636e\u7c7b\u578b\u4e3a int\u3002 \u8fd4\u56de\u7c7b\u578b\uff1adouble\u3002 \u793a\u4f8b\uff1a nebula> RETURN round(314.15926, 2); +--------------------+ | round(314.15926,2) | +--------------------+ | 314.16 | +--------------------+ nebula> RETURN round(314.15926, -1); +-----------------------+ | round(314.15926,-(1)) | +-----------------------+ | 310.0 | +-----------------------+","title":"round()"},{"location":"3.ngql-guide/6.functions-and-expressions/1.math/#sqrt","text":"sqrt() \u8fd4\u56de\u6307\u5b9a\u6570\u5b57\u7684\u5e73\u65b9\u6839\u3002 \u8bed\u6cd5\uff1a sqrt(<expression>) expression \uff1a\u7ed3\u679c\u7684\u6570\u636e\u7c7b\u578b\u4e3a double \u7684\u8868\u8fbe\u5f0f\u3002 \u8fd4\u56de\u7c7b\u578b\uff1adouble\u3002 \u793a\u4f8b\uff1a nebula> RETURN sqrt(9); +---------+ | sqrt(9) | +---------+ | 3.0 | +---------+","title":"sqrt()"},{"location":"3.ngql-guide/6.functions-and-expressions/1.math/#cbrt","text":"cbrt() \u8fd4\u56de\u6307\u5b9a\u6570\u5b57\u7684\u7acb\u65b9\u6839\u3002 \u8bed\u6cd5\uff1a cbrt(<expression>) expression \uff1a\u7ed3\u679c\u7684\u6570\u636e\u7c7b\u578b\u4e3a double \u7684\u8868\u8fbe\u5f0f\u3002 \u8fd4\u56de\u7c7b\u578b\uff1adouble\u3002 \u793a\u4f8b\uff1a nebula> RETURN cbrt(8); +---------+ | cbrt(8) | +---------+ | 2.0 | +---------+","title":"cbrt()"},{"location":"3.ngql-guide/6.functions-and-expressions/1.math/#hypot","text":"hypot() \u8fd4\u56de\u76f4\u89d2\u4e09\u89d2\u5f62\u7684\u659c\u8fb9\u957f\u3002 \u8bed\u6cd5\uff1a hypot(<expression_x>,<expression_y>) expression_x \u3001 expression_y \uff1a\u7ed3\u679c\u7684\u6570\u636e\u7c7b\u578b\u4e3a double \u7684\u8868\u8fbe\u5f0f\u3002\u8868\u793a\u76f4\u89d2\u4e09\u89d2\u5f62\u7684\u8fb9\u957f x \u548c y \u3002 \u8fd4\u56de\u7c7b\u578b\uff1adouble\u3002 \u793a\u4f8b\uff1a nebula> RETURN hypot(3,2*2); +----------------+ | hypot(3,(2*2)) | +----------------+ | 5.0 | +----------------+","title":"hypot()"},{"location":"3.ngql-guide/6.functions-and-expressions/1.math/#pow","text":"pow() \u8fd4\u56de\u6307\u5b9a\u6570\u5b57\u7684\u5e42\uff08x y \uff09\u3002 \u8bed\u6cd5\uff1a pow(<expression_x>,<expression_y>,) expression_x \uff1a\u7ed3\u679c\u7684\u6570\u636e\u7c7b\u578b\u4e3a double \u7684\u8868\u8fbe\u5f0f\u3002\u8868\u793a\u5e95\u6570 x \u3002 expression_y \uff1a\u7ed3\u679c\u7684\u6570\u636e\u7c7b\u578b\u4e3a double \u7684\u8868\u8fbe\u5f0f\u3002\u8868\u793a\u6307\u6570 y \u3002 \u8fd4\u56de\u7c7b\u578b\uff1adouble\u3002 \u793a\u4f8b\uff1a nebula> RETURN pow(3,3); +----------+ | pow(3,3) | +----------+ | 27 | +----------+","title":"pow()"},{"location":"3.ngql-guide/6.functions-and-expressions/1.math/#exp","text":"exp() \u8fd4\u56de\u81ea\u7136\u5e38\u6570 e \u7684\u5e42\uff08e x \uff09\u3002 \u8bed\u6cd5\uff1a exp(<expression>) expression \uff1a\u7ed3\u679c\u7684\u6570\u636e\u7c7b\u578b\u4e3a double \u7684\u8868\u8fbe\u5f0f\u3002\u8868\u793a\u6307\u6570 x \u3002 \u8fd4\u56de\u7c7b\u578b\uff1adouble\u3002 \u793a\u4f8b\uff1a nebula> RETURN exp(2); +------------------+ | exp(2) | +------------------+ | 7.38905609893065 | +------------------+","title":"exp()"},{"location":"3.ngql-guide/6.functions-and-expressions/1.math/#exp2","text":"exp2() \u8fd4\u56de2\u7684\u5e42\uff082 x \uff09\u3002 \u8bed\u6cd5\uff1a exp2(<expression>) expression \uff1a\u7ed3\u679c\u7684\u6570\u636e\u7c7b\u578b\u4e3a double \u7684\u8868\u8fbe\u5f0f\u3002\u8868\u793a\u6307\u6570 x \u3002 \u8fd4\u56de\u7c7b\u578b\uff1adouble\u3002 \u793a\u4f8b\uff1a nebula> RETURN exp2(3); +---------+ | exp2(3) | +---------+ | 8.0 | +---------+","title":"exp2()"},{"location":"3.ngql-guide/6.functions-and-expressions/1.math/#log","text":"log() \u8fd4\u56de\u4ee5\u81ea\u7136\u6570 e \u4e3a\u5e95\u7684\u5bf9\u6570\uff08 \\(log_{e}{N}\\) \uff09\u3002 \u8bed\u6cd5\uff1a log(<expression>) expression \uff1a\u7ed3\u679c\u7684\u6570\u636e\u7c7b\u578b\u4e3a double \u7684\u8868\u8fbe\u5f0f\u3002\u8868\u793a\u771f\u6570 N \u3002 \u8fd4\u56de\u7c7b\u578b\uff1adouble\u3002 \u793a\u4f8b\uff1a nebula> RETURN log(8); +--------------------+ | log(8) | +--------------------+ | 2.0794415416798357 | +--------------------+","title":"log()"},{"location":"3.ngql-guide/6.functions-and-expressions/1.math/#log2","text":"log2() \u8fd4\u56de\u4ee5 2 \u4e3a\u5e95\u7684\u5bf9\u6570\uff08 \\(log_{2}{N}\\) \uff09\u3002 \u8bed\u6cd5\uff1a log2(<expression>) expression \uff1a\u7ed3\u679c\u7684\u6570\u636e\u7c7b\u578b\u4e3a double \u7684\u8868\u8fbe\u5f0f\u3002\u8868\u793a\u771f\u6570 N \u3002 \u8fd4\u56de\u7c7b\u578b\uff1adouble\u3002 \u793a\u4f8b\uff1a nebula> RETURN log2(8); +---------+ | log2(8) | +---------+ | 3.0 | +---------+","title":"log2()"},{"location":"3.ngql-guide/6.functions-and-expressions/1.math/#log10","text":"log10() \u8fd4\u56de\u4ee5 10 \u4e3a\u5e95\u7684\u5bf9\u6570\uff08 \\(log_{10}{N}\\) \uff09\u3002 \u8bed\u6cd5\uff1a log10(<expression>) expression \uff1a\u7ed3\u679c\u7684\u6570\u636e\u7c7b\u578b\u4e3a double \u7684\u8868\u8fbe\u5f0f\u3002\u8868\u793a\u771f\u6570 N \u3002 \u8fd4\u56de\u7c7b\u578b\uff1adouble\u3002 \u793a\u4f8b\uff1a nebula> RETURN log10(100); +------------+ | log10(100) | +------------+ | 2.0 | +------------+","title":"log10()"},{"location":"3.ngql-guide/6.functions-and-expressions/1.math/#sin","text":"sin() \u8fd4\u56de\u6307\u5b9a\u6570\u5b57\u7684\u6b63\u5f26\u503c\u3002\u53ef\u4ee5\u4f7f\u7528\u51fd\u6570 radians() \u5c06\u89d2\u5ea6\u8f6c\u5316\u4e3a\u5f27\u5ea6\u3002 \u8bed\u6cd5\uff1a sin(<expression>) expression \uff1a\u7ed3\u679c\u7684\u6570\u636e\u7c7b\u578b\u4e3a double \u7684\u8868\u8fbe\u5f0f\u3002 \u8fd4\u56de\u7c7b\u578b\uff1adouble\u3002 \u793a\u4f8b\uff1a nebula> RETURN sin(3); +--------------------+ | sin(3) | +--------------------+ | 0.1411200080598672 | +--------------------+","title":"sin()"},{"location":"3.ngql-guide/6.functions-and-expressions/1.math/#asin","text":"asin() \u8fd4\u56de\u6307\u5b9a\u6570\u5b57\u7684\u53cd\u6b63\u5f26\u503c\u3002\u53ef\u4ee5\u4f7f\u7528\u51fd\u6570 radians() \u5c06\u89d2\u5ea6\u8f6c\u5316\u4e3a\u5f27\u5ea6\u3002 \u8bed\u6cd5\uff1a asin(<expression>) expression \uff1a\u7ed3\u679c\u7684\u6570\u636e\u7c7b\u578b\u4e3a double \u7684\u8868\u8fbe\u5f0f\u3002 \u8fd4\u56de\u7c7b\u578b\uff1adouble\u3002 \u793a\u4f8b\uff1a nebula> RETURN asin(0.5); +--------------------+ | asin(0.5) | +--------------------+ | 0.5235987755982989 | +--------------------+","title":"asin()"},{"location":"3.ngql-guide/6.functions-and-expressions/1.math/#cos","text":"cos() \u8fd4\u56de\u6307\u5b9a\u6570\u5b57\u7684\u4f59\u5f26\u503c\u3002\u53ef\u4ee5\u4f7f\u7528\u51fd\u6570 radians() \u5c06\u89d2\u5ea6\u8f6c\u5316\u4e3a\u5f27\u5ea6\u3002 \u8bed\u6cd5\uff1a cos(<expression>) expression \uff1a\u7ed3\u679c\u7684\u6570\u636e\u7c7b\u578b\u4e3a double \u7684\u8868\u8fbe\u5f0f\u3002 \u8fd4\u56de\u7c7b\u578b\uff1adouble\u3002 \u793a\u4f8b\uff1a nebula> RETURN cos(0.5); +--------------------+ | cos(0.5) | +--------------------+ | 0.8775825618903728 | +--------------------+","title":"cos()"},{"location":"3.ngql-guide/6.functions-and-expressions/1.math/#acos","text":"acos() \u8fd4\u56de\u6307\u5b9a\u6570\u5b57\u7684\u53cd\u4f59\u5f26\u503c\u3002\u53ef\u4ee5\u4f7f\u7528\u51fd\u6570 radians() \u5c06\u89d2\u5ea6\u8f6c\u5316\u4e3a\u5f27\u5ea6\u3002 \u8bed\u6cd5\uff1a acos(<expression>) expression \uff1a\u7ed3\u679c\u7684\u6570\u636e\u7c7b\u578b\u4e3a double \u7684\u8868\u8fbe\u5f0f\u3002 \u8fd4\u56de\u7c7b\u578b\uff1adouble\u3002 \u793a\u4f8b\uff1a nebula> RETURN acos(0.5); +--------------------+ | acos(0.5) | +--------------------+ | 1.0471975511965979 | +--------------------+","title":"acos()"},{"location":"3.ngql-guide/6.functions-and-expressions/1.math/#tan","text":"tan() \u8fd4\u56de\u6307\u5b9a\u6570\u5b57\u7684\u6b63\u5207\u503c\u3002\u53ef\u4ee5\u4f7f\u7528\u51fd\u6570 radians() \u5c06\u89d2\u5ea6\u8f6c\u5316\u4e3a\u5f27\u5ea6\u3002 \u8bed\u6cd5\uff1a tan(<expression>) expression \uff1a\u7ed3\u679c\u7684\u6570\u636e\u7c7b\u578b\u4e3a double \u7684\u8868\u8fbe\u5f0f\u3002 \u8fd4\u56de\u7c7b\u578b\uff1adouble\u3002 \u793a\u4f8b\uff1a nebula> RETURN tan(0.5); +--------------------+ | tan(0.5) | +--------------------+ | 0.5463024898437905 | +--------------------+","title":"tan()"},{"location":"3.ngql-guide/6.functions-and-expressions/1.math/#atan","text":"atan() \u8fd4\u56de\u6307\u5b9a\u6570\u5b57\u7684\u53cd\u6b63\u5207\u503c\u3002\u53ef\u4ee5\u4f7f\u7528\u51fd\u6570 radians() \u5c06\u89d2\u5ea6\u8f6c\u5316\u4e3a\u5f27\u5ea6\u3002 \u8bed\u6cd5\uff1a atan(<expression>) expression \uff1a\u7ed3\u679c\u7684\u6570\u636e\u7c7b\u578b\u4e3a double \u7684\u8868\u8fbe\u5f0f\u3002 \u8fd4\u56de\u7c7b\u578b\uff1adouble\u3002 \u793a\u4f8b\uff1a nebula> RETURN atan(0.5); +--------------------+ | atan(0.5) | +--------------------+ | 0.4636476090008061 | +--------------------+","title":"atan()"},{"location":"3.ngql-guide/6.functions-and-expressions/1.math/#rand","text":"rand() \u8fd4\u56de [0,1) \u5185\u7684\u968f\u673a\u6d6e\u70b9\u6570\u3002 \u8bed\u6cd5\uff1a rand() \u8fd4\u56de\u7c7b\u578b\uff1adouble\u3002 \u793a\u4f8b\uff1a nebula> RETURN rand(); +--------------------+ | rand() | +--------------------+ | 0.6545837172298736 | +--------------------+","title":"rand()"},{"location":"3.ngql-guide/6.functions-and-expressions/1.math/#rand32","text":"rand32() \u8fd4\u56de\u6307\u5b9a\u8303\u56f4\uff08 [min, max) \uff09\u5185\u7684\u968f\u673a 32 \u4f4d\u6574\u6570\u3002 \u8bed\u6cd5\uff1a rand32(<expression_min>,<expression_max>) expression_min \uff1a\u7ed3\u679c\u7684\u6570\u636e\u7c7b\u578b\u4e3a int \u7684\u8868\u8fbe\u5f0f\u3002\u8868\u793a\u6700\u5c0f\u503c min \u3002 expression_max \uff1a\u7ed3\u679c\u7684\u6570\u636e\u7c7b\u578b\u4e3a int \u7684\u8868\u8fbe\u5f0f\u3002\u8868\u793a\u6700\u5927\u503c max \u3002 \u8fd4\u56de\u7c7b\u578b\uff1aint\u3002 \u7528\u6237\u53ef\u4ee5\u53ea\u4f20\u5165\u4e00\u4e2a\u53c2\u6570\uff0c\u8be5\u53c2\u6570\u4f1a\u5224\u5b9a\u4e3a max \uff0c\u6b64\u65f6 min \u9ed8\u8ba4\u4e3a 0 \u3002\u5982\u679c\u4e0d\u4f20\u5165\u53c2\u6570\uff0c\u6b64\u65f6\u4f1a\u4ece\u5e26\u7b26\u53f7\u7684 32 \u4f4d int \u8303\u56f4\u5185\u968f\u673a\u8fd4\u56de\u3002 \u793a\u4f8b\uff1a nebula> RETURN rand32(1,100); +---------------+ | rand32(1,100) | +---------------+ | 63 | +---------------+","title":"rand32()"},{"location":"3.ngql-guide/6.functions-and-expressions/1.math/#rand64","text":"rand64() \u8fd4\u56de\u6307\u5b9a\u8303\u56f4\uff08 [min, max) \uff09\u5185\u7684\u968f\u673a 64 \u4f4d\u6574\u6570\u3002 \u8bed\u6cd5\uff1a rand64(<expression_min>,<expression_max>) expression_min \uff1a\u7ed3\u679c\u7684\u6570\u636e\u7c7b\u578b\u4e3a int \u7684\u8868\u8fbe\u5f0f\u3002\u8868\u793a\u6700\u5c0f\u503c min \u3002 expression_max \uff1a\u7ed3\u679c\u7684\u6570\u636e\u7c7b\u578b\u4e3a int \u7684\u8868\u8fbe\u5f0f\u3002\u8868\u793a\u6700\u5927\u503c max \u3002 \u8fd4\u56de\u7c7b\u578b\uff1aint\u3002 \u7528\u6237\u53ef\u4ee5\u53ea\u4f20\u5165\u4e00\u4e2a\u53c2\u6570\uff0c\u8be5\u53c2\u6570\u4f1a\u5224\u5b9a\u4e3a max \uff0c\u6b64\u65f6 min \u9ed8\u8ba4\u4e3a 0 \u3002\u5982\u679c\u4e0d\u4f20\u5165\u53c2\u6570\uff0c\u6b64\u65f6\u4f1a\u4ece\u5e26\u7b26\u53f7\u7684 64 \u4f4d int \u8303\u56f4\u5185\u968f\u673a\u8fd4\u56de\u3002 \u793a\u4f8b\uff1a nebula> RETURN rand64(1,100); +---------------+ | rand64(1,100) | +---------------+ | 34 | +---------------+","title":"rand64()"},{"location":"3.ngql-guide/6.functions-and-expressions/1.math/#bit_and","text":"bit_and() \u8fd4\u56de\u6309\u4f4d\u8fdb\u884c AND \u8fd0\u7b97\u540e\u7684\u7ed3\u679c\u3002 \u8bed\u6cd5\uff1a bit_and(<expression_1>,<expression_2>) expression_1 \u3001 expression_2 \uff1a\u7ed3\u679c\u7684\u6570\u636e\u7c7b\u578b\u4e3a int \u7684\u8868\u8fbe\u5f0f\u3002 \u8fd4\u56de\u7c7b\u578b\uff1aint\u3002 \u793a\u4f8b\uff1a nebula> RETURN bit_and(5,6); +--------------+ | bit_and(5,6) | +--------------+ | 4 | +--------------+","title":"bit_and()"},{"location":"3.ngql-guide/6.functions-and-expressions/1.math/#bit_or","text":"bit_or() \u8fd4\u56de\u6309\u4f4d\u8fdb\u884c OR \u8fd0\u7b97\u540e\u7684\u7ed3\u679c\u3002 \u8bed\u6cd5\uff1a bit_or(<expression_1>,<expression_2>) expression_1 \u3001 expression_2 \uff1a\u7ed3\u679c\u7684\u6570\u636e\u7c7b\u578b\u4e3a int \u7684\u8868\u8fbe\u5f0f\u3002 \u8fd4\u56de\u7c7b\u578b\uff1aint\u3002 \u793a\u4f8b\uff1a nebula> RETURN bit_or(5,6); +-------------+ | bit_or(5,6) | +-------------+ | 7 | +-------------+","title":"bit_or()"},{"location":"3.ngql-guide/6.functions-and-expressions/1.math/#bit_xor","text":"bit_xor() \u8fd4\u56de\u6309\u4f4d\u8fdb\u884c XOR \u8fd0\u7b97\u540e\u7684\u7ed3\u679c\u3002 \u8bed\u6cd5\uff1a bit_xor(<expression_1>,<expression_2>) expression_1 \u3001 expression_2 \uff1a\u7ed3\u679c\u7684\u6570\u636e\u7c7b\u578b\u4e3a int \u7684\u8868\u8fbe\u5f0f\u3002 \u8fd4\u56de\u7c7b\u578b\uff1aint\u3002 \u793a\u4f8b\uff1a nebula> RETURN bit_xor(5,6); +--------------+ | bit_xor(5,6) | +--------------+ | 3 | +--------------+","title":"bit_xor()"},{"location":"3.ngql-guide/6.functions-and-expressions/1.math/#size","text":"size() \u8fd4\u56de\u5217\u8868\u6216\u6620\u5c04\u4e2d\u5143\u7d20\u7684\u6570\u91cf\uff0c\u6216\u8005\u8fd4\u56de\u5b57\u7b26\u4e32\u7684\u957f\u5ea6\u3002 \u8bed\u6cd5\uff1a size({<expression>|<string>}) expression \uff1a\u5217\u8868\u6216\u6620\u5c04\u7684\u8868\u8fbe\u5f0f\u3002 string \uff1a\u6307\u5b9a\u7684\u5b57\u7b26\u4e32\u3002 \u8fd4\u56de\u7c7b\u578b\uff1aint\u3002 \u793a\u4f8b\uff1a nebula> RETURN size([1,2,3,4]); +-----------------+ | size([1,2,3,4]) | +-----------------+ | 4 | +-----------------+ nebula> RETURN size(\"basketballplayer\") as size; +------+ | size | +------+ | 16 | +------+","title":"size()"},{"location":"3.ngql-guide/6.functions-and-expressions/1.math/#range","text":"range() \u8fd4\u56de\u6307\u5b9a\u8303\u56f4\uff08 [start,end] \uff09\u4e2d\u6307\u5b9a\u6b65\u957f\u7684\u503c\u7ec4\u6210\u7684\u5217\u8868\u3002 \u8bed\u6cd5\uff1a range(<expression_start>,<expression_end>[,<expression_step>]) expression_start \uff1a\u7ed3\u679c\u7684\u6570\u636e\u7c7b\u578b\u4e3a int \u7684\u8868\u8fbe\u5f0f\u3002\u8868\u793a\u8d77\u59cb\u503c start \u3002 expression_end \uff1a\u7ed3\u679c\u7684\u6570\u636e\u7c7b\u578b\u4e3a int \u7684\u8868\u8fbe\u5f0f\u3002\u8868\u793a\u7ed3\u675f\u503c end \u3002 expression_step \uff1a\u7ed3\u679c\u7684\u6570\u636e\u7c7b\u578b\u4e3a int \u7684\u8868\u8fbe\u5f0f\u3002\u8868\u793a\u6b65\u957f step \uff0c\u9ed8\u8ba4\u503c\u4e3a 1 \u3002 \u8fd4\u56de\u7c7b\u578b\uff1alist\u3002 \u793a\u4f8b\uff1a nebula> RETURN range(1,3*3,2); +------------------+ | range(1,(3*3),2) | +------------------+ | [1, 3, 5, 7, 9] | +------------------+","title":"range()"},{"location":"3.ngql-guide/6.functions-and-expressions/1.math/#sign","text":"sign() \u8fd4\u56de\u6307\u5b9a\u6570\u5b57\u7684\u6b63\u8d1f\u53f7\u3002\u5982\u679c\u6570\u5b57\u4e3a 0 \uff0c\u5219\u8fd4\u56de 0 \uff1b\u5982\u679c\u6570\u5b57\u4e3a\u8d1f\u6570\uff0c\u5219\u8fd4\u56de -1 \uff1b\u5982\u679c\u6570\u5b57\u4e3a\u6b63\u6570\uff0c\u5219\u8fd4\u56de 1 \u3002 \u8bed\u6cd5\uff1a sign(<expression>) expression \uff1a\u7ed3\u679c\u7684\u6570\u636e\u7c7b\u578b\u4e3a double \u7684\u8868\u8fbe\u5f0f\u3002 \u8fd4\u56de\u7c7b\u578b\uff1aint\u3002 \u793a\u4f8b\uff1a nebula> RETURN sign(10); +----------+ | sign(10) | +----------+ | 1 | +----------+","title":"sign()"},{"location":"3.ngql-guide/6.functions-and-expressions/1.math/#e","text":"e() \u8fd4\u56de\u81ea\u7136\u5bf9\u6570\u7684\u5e95 e\uff082.718281828459045\uff09\u3002 \u8bed\u6cd5\uff1a e() \u8fd4\u56de\u7c7b\u578b\uff1adouble\u3002 \u793a\u4f8b\uff1a nebula> RETURN e(); +-------------------+ | e() | +-------------------+ | 2.718281828459045 | +-------------------+","title":"e()"},{"location":"3.ngql-guide/6.functions-and-expressions/1.math/#pi","text":"pi() \u8fd4\u56de\u6570\u5b66\u5e38\u6570\u03c0\uff083.141592653589793\uff09\u3002 \u8bed\u6cd5\uff1a pi() \u8fd4\u56de\u7c7b\u578b\uff1adouble\u3002 \u793a\u4f8b\uff1a nebula> RETURN pi(); +-------------------+ | pi() | +-------------------+ | 3.141592653589793 | +-------------------+","title":"pi()"},{"location":"3.ngql-guide/6.functions-and-expressions/1.math/#radians","text":"radians() \u8fd4\u56de\u6307\u5b9a\u89d2\u5ea6\u7684\u5f27\u5ea6\u3002 \u8bed\u6cd5\uff1a radians(<angle>) \u8fd4\u56de\u7c7b\u578b\uff1adouble\u3002 \u793a\u4f8b\uff1a nebula> RETURN radians(180); +-------------------+ | radians(180) | +-------------------+ | 3.141592653589793 | +-------------------+","title":"radians()"},{"location":"3.ngql-guide/6.functions-and-expressions/14.geo/","text":"geo \u51fd\u6570 \u00b6 geo \u51fd\u6570\u7528\u4e8e\u751f\u6210\u5730\u7406\u7a7a\u95f4\uff08GEOGRAPHY\uff09\u6570\u636e\u7c7b\u578b\u7684\u503c\u6216\u5bf9\u5176\u6267\u884c\u64cd\u4f5c\u3002 \u5173\u4e8e\u5730\u7406\u7a7a\u95f4\u6570\u636e\u7c7b\u578b\u8bf4\u660e\u8bf7\u53c2\u89c1 \u5730\u7406\u7a7a\u95f4 \u3002 \u51fd\u6570\u8bf4\u660e \u00b6 \u51fd\u6570 \u8fd4\u56de\u7c7b\u578b \u8bf4\u660e ST_Point(longitude, latitude) GEOGRAPHY \u521b\u5efa\u5305\u542b\u4e00\u4e2a\u70b9\u7684\u5730\u7406\u7a7a\u95f4\u3002 ST_GeogFromText(wkt_string) GEOGRAPHY \u8fd4\u56de\u4e0e\u4f20\u5165\u7684 WKT \u5b57\u7b26\u4e32\u5f62\u5f0f\u76f8\u5bf9\u5e94\u7684 GEOGRAPHY\u3002 ST_ASText(geography) STRING \u8fd4\u56de\u4f20\u5165\u7684 GEOGRAPHY \u7684 WKT \u5b57\u7b26\u4e32\u5f62\u5f0f\u3002 ST_Centroid(geography) GEOGRAPHY \u4ee5\u5355\u70b9 GEOGRAPHY \u7684\u5f62\u5f0f\u8fd4\u56de\u4f20\u5165\u7684 GEOGRAPHY \u7684\u5f62\u5fc3\u3002 ST_ISValid(geography) BOOL \u8fd4\u56de\u4f20\u5165\u7684 GEOGRAPHY \u662f\u5426\u6709\u6548\u3002 ST_Intersects(geography_1, geography_2) BOOL \u8fd4\u56de\u4f20\u5165\u7684\u4e24\u4e2a GEOGRAPHY \u662f\u5426\u6709\u4ea4\u96c6\u3002 ST_Covers(geography_1, geography_2) BOOL \u8fd4\u56de geography_1 \u662f\u5426\u5b8c\u5168\u5305\u542b geography_2\u3002\u5982\u679c geography_2 \u4e2d\u6ca1\u6709\u4f4d\u4e8e geography_1 \u5916\u90e8\u7684\u70b9\uff0c\u8fd4\u56de True\u3002 ST_CoveredBy(geography_1, geography_2) BOOL \u8fd4\u56de geography_2 \u662f\u5426\u5b8c\u5168\u5305\u542b geography_1\u3002\u5982\u679c geography_1 \u4e2d\u6ca1\u6709\u4f4d\u4e8e geography_2 \u5916\u90e8\u7684\u70b9\uff0c\u8fd4\u56de True\u3002 ST_DWithin(geography_1, geography_2, distance) BOOL \u5982\u679c geography_1 \u4e2d\u81f3\u5c11\u6709\u4e00\u4e2a\u70b9\u4e0e geography_2 \u4e2d\u7684\u4e00\u4e2a\u70b9\u7684\u8ddd\u79bb\u5c0f\u4e8e\u6216\u7b49\u4e8e distance \u53c2\u6570\uff08\u4ee5\u7c73\u4e3a\u5355\u4f4d\uff09\u6307\u5b9a\u7684\u8ddd\u79bb\uff0c\u5219\u8fd4\u56de True\u3002 ST_Distance(geography_1, geography_2) FLOAT \u8fd4\u56de\u4e24\u4e2a\u975e\u7a7a GEOGRAPHY \u4e4b\u95f4\u7684\u6700\u77ed\u8ddd\u79bb\uff08\u4ee5\u7c73\u4e3a\u5355\u4f4d\uff09\u3002 S2_CellIdFromPoint(point_geography) INT \u8fd4\u56de\u8986\u76d6\u70b9 GEOGRAPHY \u7684 S2 \u5355\u5143 ID\u3002 S2_CoveringCellIds(geography) ARRAY<INT64> \u8fd4\u56de\u8986\u76d6\u4f20\u5165\u7684 GEOGRAPHY \u7684 S2 \u5355\u5143 ID \u7684\u6570\u7ec4\u3002 \u793a\u4f8b \u00b6 nebula> RETURN ST_ASText(ST_Point(1,1)); +--------------------------+ | ST_ASText(ST_Point(1,1)) | +--------------------------+ | \"POINT(1 1)\" | +--------------------------+ nebula> RETURN ST_ASText(ST_GeogFromText(\"POINT(3 8)\")); +------------------------------------------+ | ST_ASText(ST_GeogFromText(\"POINT(3 8)\")) | +------------------------------------------+ | \"POINT(3 8)\" | +------------------------------------------+ nebula> RETURN ST_ASTEXT(ST_Centroid(ST_GeogFromText(\"LineString(0 1,1 0)\"))); +----------------------------------------------------------------+ | ST_ASTEXT(ST_Centroid(ST_GeogFromText(\"LineString(0 1,1 0)\"))) | +----------------------------------------------------------------+ | \"POINT(0.5000380800773782 0.5000190382261059)\" | +----------------------------------------------------------------+ nebula> RETURN ST_ISValid(ST_GeogFromText(\"POINT(3 8)\")); +-------------------------------------------+ | ST_ISValid(ST_GeogFromText(\"POINT(3 8)\")) | +-------------------------------------------+ | true | +-------------------------------------------+ nebula> RETURN ST_Intersects(ST_GeogFromText(\"LineString(0 1,1 0)\"),ST_GeogFromText(\"LineString(0 0,1 1)\")); +----------------------------------------------------------------------------------------------+ | ST_Intersects(ST_GeogFromText(\"LineString(0 1,1 0)\"),ST_GeogFromText(\"LineString(0 0,1 1)\")) | +----------------------------------------------------------------------------------------------+ | true | +----------------------------------------------------------------------------------------------+ nebula> RETURN ST_Covers(ST_GeogFromText(\"POLYGON((0 0,10 0,10 10,0 10,0 0))\"),ST_Point(1,2)); +--------------------------------------------------------------------------------+ | ST_Covers(ST_GeogFromText(\"POLYGON((0 0,10 0,10 10,0 10,0 0))\"),ST_Point(1,2)) | +--------------------------------------------------------------------------------+ | true | +--------------------------------------------------------------------------------+ nebula> RETURN ST_CoveredBy(ST_Point(1,2),ST_GeogFromText(\"POLYGON((0 0,10 0,10 10,0 10,0 0))\")); +-----------------------------------------------------------------------------------+ | ST_CoveredBy(ST_Point(1,2),ST_GeogFromText(\"POLYGON((0 0,10 0,10 10,0 10,0 0))\")) | +-----------------------------------------------------------------------------------+ | true | +-----------------------------------------------------------------------------------+ nebula> RETURN ST_dwithin(ST_GeogFromText(\"Point(0 0)\"),ST_GeogFromText(\"Point(10 10)\"),20000000000.0); +---------------------------------------------------------------------------------------+ | ST_dwithin(ST_GeogFromText(\"Point(0 0)\"),ST_GeogFromText(\"Point(10 10)\"),20000000000) | +---------------------------------------------------------------------------------------+ | true | +---------------------------------------------------------------------------------------+ nebula> RETURN ST_Distance(ST_GeogFromText(\"Point(0 0)\"),ST_GeogFromText(\"Point(10 10)\")); +----------------------------------------------------------------------------+ | ST_Distance(ST_GeogFromText(\"Point(0 0)\"),ST_GeogFromText(\"Point(10 10)\")) | +----------------------------------------------------------------------------+ | 1.5685230187677438e+06 | +----------------------------------------------------------------------------+ nebula> RETURN S2_CellIdFromPoint(ST_GeogFromText(\"Point(1 1)\")); +---------------------------------------------------+ | S2_CellIdFromPoint(ST_GeogFromText(\"Point(1 1)\")) | +---------------------------------------------------+ | 1153277837650709461 | +---------------------------------------------------+ nebula> RETURN S2_CoveringCellIds(ST_GeogFromText(\"POLYGON((0 1, 1 2, 2 3, 0 1))\")); +--------------------------------------------------------------------------------------------------------------------------------------------------------------------------+ | S2_CoveringCellIds(ST_GeogFromText(\"POLYGON((0 1, 1 2, 2 3, 0 1))\")) | +--------------------------------------------------------------------------------------------------------------------------------------------------------------------------+ | [1152391494368201343, 1153466862374223872, 1153554823304445952, 1153836298281156608, 1153959443583467520, 1154240918560178176, 1160503736791990272, 1160591697722212352] | +--------------------------------------------------------------------------------------------------------------------------------------------------------------------------+","title":"geo \u51fd\u6570"},{"location":"3.ngql-guide/6.functions-and-expressions/14.geo/#geo","text":"geo \u51fd\u6570\u7528\u4e8e\u751f\u6210\u5730\u7406\u7a7a\u95f4\uff08GEOGRAPHY\uff09\u6570\u636e\u7c7b\u578b\u7684\u503c\u6216\u5bf9\u5176\u6267\u884c\u64cd\u4f5c\u3002 \u5173\u4e8e\u5730\u7406\u7a7a\u95f4\u6570\u636e\u7c7b\u578b\u8bf4\u660e\u8bf7\u53c2\u89c1 \u5730\u7406\u7a7a\u95f4 \u3002","title":"geo \u51fd\u6570"},{"location":"3.ngql-guide/6.functions-and-expressions/14.geo/#_1","text":"\u51fd\u6570 \u8fd4\u56de\u7c7b\u578b \u8bf4\u660e ST_Point(longitude, latitude) GEOGRAPHY \u521b\u5efa\u5305\u542b\u4e00\u4e2a\u70b9\u7684\u5730\u7406\u7a7a\u95f4\u3002 ST_GeogFromText(wkt_string) GEOGRAPHY \u8fd4\u56de\u4e0e\u4f20\u5165\u7684 WKT \u5b57\u7b26\u4e32\u5f62\u5f0f\u76f8\u5bf9\u5e94\u7684 GEOGRAPHY\u3002 ST_ASText(geography) STRING \u8fd4\u56de\u4f20\u5165\u7684 GEOGRAPHY \u7684 WKT \u5b57\u7b26\u4e32\u5f62\u5f0f\u3002 ST_Centroid(geography) GEOGRAPHY \u4ee5\u5355\u70b9 GEOGRAPHY \u7684\u5f62\u5f0f\u8fd4\u56de\u4f20\u5165\u7684 GEOGRAPHY \u7684\u5f62\u5fc3\u3002 ST_ISValid(geography) BOOL \u8fd4\u56de\u4f20\u5165\u7684 GEOGRAPHY \u662f\u5426\u6709\u6548\u3002 ST_Intersects(geography_1, geography_2) BOOL \u8fd4\u56de\u4f20\u5165\u7684\u4e24\u4e2a GEOGRAPHY \u662f\u5426\u6709\u4ea4\u96c6\u3002 ST_Covers(geography_1, geography_2) BOOL \u8fd4\u56de geography_1 \u662f\u5426\u5b8c\u5168\u5305\u542b geography_2\u3002\u5982\u679c geography_2 \u4e2d\u6ca1\u6709\u4f4d\u4e8e geography_1 \u5916\u90e8\u7684\u70b9\uff0c\u8fd4\u56de True\u3002 ST_CoveredBy(geography_1, geography_2) BOOL \u8fd4\u56de geography_2 \u662f\u5426\u5b8c\u5168\u5305\u542b geography_1\u3002\u5982\u679c geography_1 \u4e2d\u6ca1\u6709\u4f4d\u4e8e geography_2 \u5916\u90e8\u7684\u70b9\uff0c\u8fd4\u56de True\u3002 ST_DWithin(geography_1, geography_2, distance) BOOL \u5982\u679c geography_1 \u4e2d\u81f3\u5c11\u6709\u4e00\u4e2a\u70b9\u4e0e geography_2 \u4e2d\u7684\u4e00\u4e2a\u70b9\u7684\u8ddd\u79bb\u5c0f\u4e8e\u6216\u7b49\u4e8e distance \u53c2\u6570\uff08\u4ee5\u7c73\u4e3a\u5355\u4f4d\uff09\u6307\u5b9a\u7684\u8ddd\u79bb\uff0c\u5219\u8fd4\u56de True\u3002 ST_Distance(geography_1, geography_2) FLOAT \u8fd4\u56de\u4e24\u4e2a\u975e\u7a7a GEOGRAPHY \u4e4b\u95f4\u7684\u6700\u77ed\u8ddd\u79bb\uff08\u4ee5\u7c73\u4e3a\u5355\u4f4d\uff09\u3002 S2_CellIdFromPoint(point_geography) INT \u8fd4\u56de\u8986\u76d6\u70b9 GEOGRAPHY \u7684 S2 \u5355\u5143 ID\u3002 S2_CoveringCellIds(geography) ARRAY<INT64> \u8fd4\u56de\u8986\u76d6\u4f20\u5165\u7684 GEOGRAPHY \u7684 S2 \u5355\u5143 ID \u7684\u6570\u7ec4\u3002","title":"\u51fd\u6570\u8bf4\u660e"},{"location":"3.ngql-guide/6.functions-and-expressions/14.geo/#_2","text":"nebula> RETURN ST_ASText(ST_Point(1,1)); +--------------------------+ | ST_ASText(ST_Point(1,1)) | +--------------------------+ | \"POINT(1 1)\" | +--------------------------+ nebula> RETURN ST_ASText(ST_GeogFromText(\"POINT(3 8)\")); +------------------------------------------+ | ST_ASText(ST_GeogFromText(\"POINT(3 8)\")) | +------------------------------------------+ | \"POINT(3 8)\" | +------------------------------------------+ nebula> RETURN ST_ASTEXT(ST_Centroid(ST_GeogFromText(\"LineString(0 1,1 0)\"))); +----------------------------------------------------------------+ | ST_ASTEXT(ST_Centroid(ST_GeogFromText(\"LineString(0 1,1 0)\"))) | +----------------------------------------------------------------+ | \"POINT(0.5000380800773782 0.5000190382261059)\" | +----------------------------------------------------------------+ nebula> RETURN ST_ISValid(ST_GeogFromText(\"POINT(3 8)\")); +-------------------------------------------+ | ST_ISValid(ST_GeogFromText(\"POINT(3 8)\")) | +-------------------------------------------+ | true | +-------------------------------------------+ nebula> RETURN ST_Intersects(ST_GeogFromText(\"LineString(0 1,1 0)\"),ST_GeogFromText(\"LineString(0 0,1 1)\")); +----------------------------------------------------------------------------------------------+ | ST_Intersects(ST_GeogFromText(\"LineString(0 1,1 0)\"),ST_GeogFromText(\"LineString(0 0,1 1)\")) | +----------------------------------------------------------------------------------------------+ | true | +----------------------------------------------------------------------------------------------+ nebula> RETURN ST_Covers(ST_GeogFromText(\"POLYGON((0 0,10 0,10 10,0 10,0 0))\"),ST_Point(1,2)); +--------------------------------------------------------------------------------+ | ST_Covers(ST_GeogFromText(\"POLYGON((0 0,10 0,10 10,0 10,0 0))\"),ST_Point(1,2)) | +--------------------------------------------------------------------------------+ | true | +--------------------------------------------------------------------------------+ nebula> RETURN ST_CoveredBy(ST_Point(1,2),ST_GeogFromText(\"POLYGON((0 0,10 0,10 10,0 10,0 0))\")); +-----------------------------------------------------------------------------------+ | ST_CoveredBy(ST_Point(1,2),ST_GeogFromText(\"POLYGON((0 0,10 0,10 10,0 10,0 0))\")) | +-----------------------------------------------------------------------------------+ | true | +-----------------------------------------------------------------------------------+ nebula> RETURN ST_dwithin(ST_GeogFromText(\"Point(0 0)\"),ST_GeogFromText(\"Point(10 10)\"),20000000000.0); +---------------------------------------------------------------------------------------+ | ST_dwithin(ST_GeogFromText(\"Point(0 0)\"),ST_GeogFromText(\"Point(10 10)\"),20000000000) | +---------------------------------------------------------------------------------------+ | true | +---------------------------------------------------------------------------------------+ nebula> RETURN ST_Distance(ST_GeogFromText(\"Point(0 0)\"),ST_GeogFromText(\"Point(10 10)\")); +----------------------------------------------------------------------------+ | ST_Distance(ST_GeogFromText(\"Point(0 0)\"),ST_GeogFromText(\"Point(10 10)\")) | +----------------------------------------------------------------------------+ | 1.5685230187677438e+06 | +----------------------------------------------------------------------------+ nebula> RETURN S2_CellIdFromPoint(ST_GeogFromText(\"Point(1 1)\")); +---------------------------------------------------+ | S2_CellIdFromPoint(ST_GeogFromText(\"Point(1 1)\")) | +---------------------------------------------------+ | 1153277837650709461 | +---------------------------------------------------+ nebula> RETURN S2_CoveringCellIds(ST_GeogFromText(\"POLYGON((0 1, 1 2, 2 3, 0 1))\")); +--------------------------------------------------------------------------------------------------------------------------------------------------------------------------+ | S2_CoveringCellIds(ST_GeogFromText(\"POLYGON((0 1, 1 2, 2 3, 0 1))\")) | +--------------------------------------------------------------------------------------------------------------------------------------------------------------------------+ | [1152391494368201343, 1153466862374223872, 1153554823304445952, 1153836298281156608, 1153959443583467520, 1154240918560178176, 1160503736791990272, 1160591697722212352] | +--------------------------------------------------------------------------------------------------------------------------------------------------------------------------+","title":"\u793a\u4f8b"},{"location":"3.ngql-guide/6.functions-and-expressions/15.aggregating/","text":"\u805a\u5408\u51fd\u6570 \u00b6 \u672c\u6587\u4ecb\u7ecdNebulaGraph\u652f\u6301\u7684\u805a\u5408\u51fd\u6570\u3002 avg() \u00b6 avg() \u8fd4\u56de\u53c2\u6570\u7684\u5e73\u5747\u503c\u3002 \u8bed\u6cd5\uff1a avg(<expression>) \u8fd4\u56de\u7c7b\u578b\uff1adouble\u3002 \u793a\u4f8b\uff1a nebula> MATCH (v:player) RETURN avg(v.player.age); +--------------------+ | avg(v.player.age) | +--------------------+ | 33.294117647058826 | +--------------------+ count() \u00b6 count() \u8fd4\u56de\u53c2\u6570\u7684\u6570\u91cf\u3002 \uff08\u539f\u751f nGQL\uff09\u7528\u6237\u53ef\u4ee5\u540c\u65f6\u4f7f\u7528 count() \u548c GROUP BY \u5bf9\u4f20\u53c2\u8fdb\u884c\u5206\u7ec4\u548c\u8ba1\u6570\uff0c\u518d\u4f7f\u7528 YIELD \u8fd4\u56de\u7ed3\u679c\u3002 \uff08openCypher \u65b9\u5f0f\uff09\u7528\u6237\u53ef\u4ee5\u4f7f\u7528 count() \u5bf9\u6307\u5b9a\u7684\u503c\u8fdb\u884c\u8ba1\u6570\uff0c\u518d\u4f7f\u7528 RETURN \u8fd4\u56de\u7ed3\u679c\u3002\u4e0d\u9700\u8981\u4f7f\u7528 GROUP BY \u3002 \u8bed\u6cd5\uff1a count({<expression> | *}) count(*) \u8fd4\u56de\u603b\u884c\u6570\uff08\u5305\u62ec NULL\uff09\u3002 \u8fd4\u56de\u7c7b\u578b\uff1aint\u3002 \u793a\u4f8b\uff1a nebula> WITH [NULL, 1, 1, 2, 2] As a UNWIND a AS b \\ RETURN count(b), count(*), count(DISTINCT b); +----------+----------+-------------------+ | count(b) | count(*) | count(distinct b) | +----------+----------+-------------------+ | 4 | 5 | 2 | +----------+----------+-------------------+ # \u8fd4\u56de player101 follow \u7684\u4eba\uff0c\u4ee5\u53ca follow player101 \u7684\u4eba\uff0c\u5373\u53cc\u5411\u67e5\u8be2\u3002 # \u4f7f\u7528`count()`\u548c`GROUP BY`\u8fdb\u884c\u5206\u7ec4\u548c\u8ba1\u6570\u3002 nebula> GO FROM \"player101\" OVER follow BIDIRECT \\ YIELD properties($$).name AS Name \\ | GROUP BY $-.Name YIELD $-.Name, count(*); +---------------------+----------+ | $-.Name | count(*) | +---------------------+----------+ | \"LaMarcus Aldridge\" | 2 | | \"Tim Duncan\" | 2 | | \"Marco Belinelli\" | 1 | | \"Manu Ginobili\" | 1 | | \"Boris Diaw\" | 1 | | \"Dejounte Murray\" | 1 | +---------------------+----------+ # \u4f7f\u7528`count()`\u8fdb\u884c\u8ba1\u6570\u3002 nebula> MATCH (v1:player)-[:follow]-(v2:player) \\ WHERE id(v1)== \"player101\" \\ RETURN v2.player.name AS Name, count(*) as cnt ORDER BY cnt DESC; +---------------------+-----+ | Name | cnt | +---------------------+-----+ | \"LaMarcus Aldridge\" | 2 | | \"Tim Duncan\" | 2 | | \"Boris Diaw\" | 1 | | \"Manu Ginobili\" | 1 | | \"Dejounte Murray\" | 1 | | \"Marco Belinelli\" | 1 | +---------------------+-----+ \u4e0a\u8ff0\u793a\u4f8b\u7684\u8fd4\u56de\u7ed3\u679c\u6709\u4e24\u5217\uff1a $-.Name \uff1a\u67e5\u8be2\u7ed3\u679c\u5305\u542b\u7684\u59d3\u540d\u3002 count(*) \uff1a\u59d3\u540d\u51fa\u73b0\u7684\u6b21\u6570\u3002 \u56e0\u4e3a\u6d4b\u8bd5\u6570\u636e\u96c6 basketballplayer \u4e2d\u6ca1\u6709\u91cd\u590d\u7684\u59d3\u540d\uff0c count(*) \u5217\u4e2d\u6570\u5b57 2 \u8868\u793a\u8be5\u884c\u7684\u4eba\u548c player101 \u662f\u4e92\u76f8 follow \u7684\u5173\u7cfb\u3002 # \u65b9\u6cd5\u4e00\uff1a\u7edf\u8ba1\u6570\u636e\u5e93\u4e2d\u7684\u5e74\u9f84\u5206\u5e03\u60c5\u51b5\u3002 nebula> LOOKUP ON player \\ YIELD player.age As playerage \\ | GROUP BY $-.playerage \\ YIELD $-.playerage as age, count(*) AS number \\ | ORDER BY $-.number DESC, $-.age DESC; +-----+--------+ | age | number | +-----+--------+ | 34 | 4 | | 33 | 4 | | 30 | 4 | | 29 | 4 | | 38 | 3 | +-----+--------+ ... # \u65b9\u6cd5\u4e8c\uff1a\u7edf\u8ba1\u6570\u636e\u5e93\u4e2d\u7684\u5e74\u9f84\u5206\u5e03\u60c5\u51b5\u3002 nebula> MATCH (n:player) \\ RETURN n.player.age as age, count(*) as number \\ ORDER BY number DESC, age DESC; +-----+--------+ | age | number | +-----+--------+ | 34 | 4 | | 33 | 4 | | 30 | 4 | | 29 | 4 | | 38 | 3 | +-----+--------+ ... # \u7edf\u8ba1 Tim Duncan \u5173\u8054\u7684\u8fb9\u6570\u3002 nebula> MATCH (v:player{name:\"Tim Duncan\"}) -[e]- (v2) \\ RETURN count(e); +----------+ | count(e) | +----------+ | 13 | +----------+ # \u591a\u8df3\u67e5\u8be2\uff0c\u7edf\u8ba1 Tim Duncan \u5173\u8054\u7684\u8fb9\u6570\uff0c\u8fd4\u56de\u4e24\u5217\uff08\u4e0d\u53bb\u91cd\u548c\u53bb\u91cd\uff09\u3002 nebula> MATCH (n:player {name : \"Tim Duncan\"})-[]->(friend:player)-[]->(fof:player) \\ RETURN count(fof), count(DISTINCT fof); +------------+---------------------+ | count(fof) | count(distinct fof) | +------------+---------------------+ | 4 | 3 | +------------+---------------------+ max() \u00b6 max() \u8fd4\u56de\u53c2\u6570\u7684\u6700\u5927\u503c\u3002 \u8bed\u6cd5\uff1a max(<expression>) \u8fd4\u56de\u7c7b\u578b\uff1a\u4e0e\u539f\u53c2\u6570\u76f8\u540c\u3002 \u793a\u4f8b\uff1a nebula> MATCH (v:player) RETURN max(v.player.age); +-------------------+ | max(v.player.age) | +-------------------+ | 47 | +-------------------+ min() \u00b6 min() \u8fd4\u56de\u53c2\u6570\u7684\u6700\u5c0f\u503c\u3002 \u8bed\u6cd5\uff1a min(<expression>) \u8fd4\u56de\u7c7b\u578b\uff1a\u4e0e\u539f\u53c2\u6570\u76f8\u540c\u3002 \u793a\u4f8b\uff1a nebula> MATCH (v:player) RETURN min(v.player.age); +-------------------+ | min(v.player.age) | +-------------------+ | 20 | +-------------------+ collect() \u00b6 collect() \u8fd4\u56de\u4e00\u4e2a\u7b26\u5408\u8868\u8fbe\u5f0f\u8fd4\u56de\u7ed3\u679c\u7684\u5217\u8868\u3002\u8be5\u51fd\u6570\u53ef\u4ee5\u5c06\u591a\u6761\u8bb0\u5f55\u6216\u503c\u5408\u5e76\u8fdb\u4e00\u4e2a\u5217\u8868\uff0c\u5b9e\u73b0\u6570\u636e\u805a\u5408\u3002 \u8bed\u6cd5\uff1a collect(<expression>) \u8fd4\u56de\u7c7b\u578b\uff1alist\u3002 \u793a\u4f8b\uff1a nebula> UNWIND [1, 2, 1] AS a \\ RETURN a; +---+ | a | +---+ | 1 | | 2 | | 1 | +---+ nebula> UNWIND [1, 2, 1] AS a \\ RETURN collect(a); +------------+ | collect(a) | +------------+ | [1, 2, 1] | +------------+ nebula> UNWIND [1, 2, 1] AS a \\ RETURN a, collect(a), size(collect(a)); +---+------------+------------------+ | a | collect(a) | size(collect(a)) | +---+------------+------------------+ | 2 | [2] | 1 | | 1 | [1, 1] | 2 | +---+------------+------------------+ # \u964d\u5e8f\u6392\u5217\uff0c\u9650\u5236\u8f93\u51fa\u884c\u6570\u4e3a 3\uff0c\u7136\u540e\u5c06\u7ed3\u679c\u8f93\u51fa\u5230\u5217\u8868\u4e2d\u3002 nebula> UNWIND [\"c\", \"b\", \"a\", \"d\" ] AS p \\ WITH p AS q \\ ORDER BY q DESC LIMIT 3 \\ RETURN collect(q); +-----------------+ | collect(q) | +-----------------+ | [\"d\", \"c\", \"b\"] | +-----------------+ nebula> WITH [1, 1, 2, 2] AS coll \\ UNWIND coll AS x \\ WITH DISTINCT x \\ RETURN collect(x) AS ss; +--------+ | ss | +--------+ | [1, 2] | +--------+ nebula> MATCH (n:player) \\ RETURN collect(n.player.age); +---------------------------------------------------------------+ | collect(n.player.age) | +---------------------------------------------------------------+ | [32, 32, 34, 29, 41, 40, 33, 25, 40, 37, ... ... # \u57fa\u4e8e\u5e74\u9f84\u805a\u5408\u59d3\u540d\u3002 nebula> MATCH (n:player) \\ RETURN n.player.age AS age, collect(n.player.name); +-----+--------------------------------------------------------------------------+ | age | collect(n.player.name) | +-----+--------------------------------------------------------------------------+ | 24 | [\"Giannis Antetokounmpo\"] | | 20 | [\"Luka Doncic\"] | | 25 | [\"Joel Embiid\", \"Kyle Anderson\"] | +-----+--------------------------------------------------------------------------+ ... nebula> GO FROM \"player100\" OVER serve \\ YIELD properties($$).name AS name \\ | GROUP BY $-.name \\ YIELD collect($-.name) AS name; +-----------+ | name | +-----------+ | [\"Spurs\"] | +-----------+ nebula> LOOKUP ON player \\ YIELD player.age As playerage \\ | GROUP BY $-.playerage \\ YIELD collect($-.playerage) AS playerage; +------------------+ | playerage | +------------------+ | [22] | | [47] | | [43] | | [25, 25] | +------------------+ ... std() \u00b6 std() \u8fd4\u56de\u53c2\u6570\u7684\u603b\u4f53\u6807\u51c6\u5dee\u3002 \u8bed\u6cd5\uff1a std(<expression>) \u8fd4\u56de\u7c7b\u578b\uff1adouble\u3002 \u793a\u4f8b\uff1a nebula> MATCH (v:player) RETURN std(v.player.age); +-------------------+ | std(v.player.age) | +-------------------+ | 6.423895701687502 | +-------------------+ sum() \u00b6 sum() \u8fd4\u56de\u53c2\u6570\u7684\u548c\u3002 \u8bed\u6cd5\uff1a sum(<expression>) \u8fd4\u56de\u7c7b\u578b\uff1a\u4e0e\u539f\u53c2\u6570\u76f8\u540c\u3002 \u793a\u4f8b\uff1a nebula> MATCH (v:player) RETURN sum(v.player.age); +-------------------+ | sum(v.player.age) | +-------------------+ | 1698 | +-------------------+ \u805a\u5408\u793a\u4f8b \u00b6 nebula> GO FROM \"player100\" OVER follow YIELD dst(edge) AS dst, properties($$).age AS age \\ | GROUP BY $-.dst \\ YIELD \\ $-.dst AS dst, \\ toInteger((sum($-.age)/count($-.age)))+avg(distinct $-.age+1)+1 AS statistics; +-------------+------------+ | dst | statistics | +-------------+------------+ | \"player125\" | 84.0 | | \"player101\" | 74.0 | +-------------+------------+","title":"\u805a\u5408\u51fd\u6570"},{"location":"3.ngql-guide/6.functions-and-expressions/15.aggregating/#_1","text":"\u672c\u6587\u4ecb\u7ecdNebulaGraph\u652f\u6301\u7684\u805a\u5408\u51fd\u6570\u3002","title":"\u805a\u5408\u51fd\u6570"},{"location":"3.ngql-guide/6.functions-and-expressions/15.aggregating/#avg","text":"avg() \u8fd4\u56de\u53c2\u6570\u7684\u5e73\u5747\u503c\u3002 \u8bed\u6cd5\uff1a avg(<expression>) \u8fd4\u56de\u7c7b\u578b\uff1adouble\u3002 \u793a\u4f8b\uff1a nebula> MATCH (v:player) RETURN avg(v.player.age); +--------------------+ | avg(v.player.age) | +--------------------+ | 33.294117647058826 | +--------------------+","title":"avg()"},{"location":"3.ngql-guide/6.functions-and-expressions/15.aggregating/#count","text":"count() \u8fd4\u56de\u53c2\u6570\u7684\u6570\u91cf\u3002 \uff08\u539f\u751f nGQL\uff09\u7528\u6237\u53ef\u4ee5\u540c\u65f6\u4f7f\u7528 count() \u548c GROUP BY \u5bf9\u4f20\u53c2\u8fdb\u884c\u5206\u7ec4\u548c\u8ba1\u6570\uff0c\u518d\u4f7f\u7528 YIELD \u8fd4\u56de\u7ed3\u679c\u3002 \uff08openCypher \u65b9\u5f0f\uff09\u7528\u6237\u53ef\u4ee5\u4f7f\u7528 count() \u5bf9\u6307\u5b9a\u7684\u503c\u8fdb\u884c\u8ba1\u6570\uff0c\u518d\u4f7f\u7528 RETURN \u8fd4\u56de\u7ed3\u679c\u3002\u4e0d\u9700\u8981\u4f7f\u7528 GROUP BY \u3002 \u8bed\u6cd5\uff1a count({<expression> | *}) count(*) \u8fd4\u56de\u603b\u884c\u6570\uff08\u5305\u62ec NULL\uff09\u3002 \u8fd4\u56de\u7c7b\u578b\uff1aint\u3002 \u793a\u4f8b\uff1a nebula> WITH [NULL, 1, 1, 2, 2] As a UNWIND a AS b \\ RETURN count(b), count(*), count(DISTINCT b); +----------+----------+-------------------+ | count(b) | count(*) | count(distinct b) | +----------+----------+-------------------+ | 4 | 5 | 2 | +----------+----------+-------------------+ # \u8fd4\u56de player101 follow \u7684\u4eba\uff0c\u4ee5\u53ca follow player101 \u7684\u4eba\uff0c\u5373\u53cc\u5411\u67e5\u8be2\u3002 # \u4f7f\u7528`count()`\u548c`GROUP BY`\u8fdb\u884c\u5206\u7ec4\u548c\u8ba1\u6570\u3002 nebula> GO FROM \"player101\" OVER follow BIDIRECT \\ YIELD properties($$).name AS Name \\ | GROUP BY $-.Name YIELD $-.Name, count(*); +---------------------+----------+ | $-.Name | count(*) | +---------------------+----------+ | \"LaMarcus Aldridge\" | 2 | | \"Tim Duncan\" | 2 | | \"Marco Belinelli\" | 1 | | \"Manu Ginobili\" | 1 | | \"Boris Diaw\" | 1 | | \"Dejounte Murray\" | 1 | +---------------------+----------+ # \u4f7f\u7528`count()`\u8fdb\u884c\u8ba1\u6570\u3002 nebula> MATCH (v1:player)-[:follow]-(v2:player) \\ WHERE id(v1)== \"player101\" \\ RETURN v2.player.name AS Name, count(*) as cnt ORDER BY cnt DESC; +---------------------+-----+ | Name | cnt | +---------------------+-----+ | \"LaMarcus Aldridge\" | 2 | | \"Tim Duncan\" | 2 | | \"Boris Diaw\" | 1 | | \"Manu Ginobili\" | 1 | | \"Dejounte Murray\" | 1 | | \"Marco Belinelli\" | 1 | +---------------------+-----+ \u4e0a\u8ff0\u793a\u4f8b\u7684\u8fd4\u56de\u7ed3\u679c\u6709\u4e24\u5217\uff1a $-.Name \uff1a\u67e5\u8be2\u7ed3\u679c\u5305\u542b\u7684\u59d3\u540d\u3002 count(*) \uff1a\u59d3\u540d\u51fa\u73b0\u7684\u6b21\u6570\u3002 \u56e0\u4e3a\u6d4b\u8bd5\u6570\u636e\u96c6 basketballplayer \u4e2d\u6ca1\u6709\u91cd\u590d\u7684\u59d3\u540d\uff0c count(*) \u5217\u4e2d\u6570\u5b57 2 \u8868\u793a\u8be5\u884c\u7684\u4eba\u548c player101 \u662f\u4e92\u76f8 follow \u7684\u5173\u7cfb\u3002 # \u65b9\u6cd5\u4e00\uff1a\u7edf\u8ba1\u6570\u636e\u5e93\u4e2d\u7684\u5e74\u9f84\u5206\u5e03\u60c5\u51b5\u3002 nebula> LOOKUP ON player \\ YIELD player.age As playerage \\ | GROUP BY $-.playerage \\ YIELD $-.playerage as age, count(*) AS number \\ | ORDER BY $-.number DESC, $-.age DESC; +-----+--------+ | age | number | +-----+--------+ | 34 | 4 | | 33 | 4 | | 30 | 4 | | 29 | 4 | | 38 | 3 | +-----+--------+ ... # \u65b9\u6cd5\u4e8c\uff1a\u7edf\u8ba1\u6570\u636e\u5e93\u4e2d\u7684\u5e74\u9f84\u5206\u5e03\u60c5\u51b5\u3002 nebula> MATCH (n:player) \\ RETURN n.player.age as age, count(*) as number \\ ORDER BY number DESC, age DESC; +-----+--------+ | age | number | +-----+--------+ | 34 | 4 | | 33 | 4 | | 30 | 4 | | 29 | 4 | | 38 | 3 | +-----+--------+ ... # \u7edf\u8ba1 Tim Duncan \u5173\u8054\u7684\u8fb9\u6570\u3002 nebula> MATCH (v:player{name:\"Tim Duncan\"}) -[e]- (v2) \\ RETURN count(e); +----------+ | count(e) | +----------+ | 13 | +----------+ # \u591a\u8df3\u67e5\u8be2\uff0c\u7edf\u8ba1 Tim Duncan \u5173\u8054\u7684\u8fb9\u6570\uff0c\u8fd4\u56de\u4e24\u5217\uff08\u4e0d\u53bb\u91cd\u548c\u53bb\u91cd\uff09\u3002 nebula> MATCH (n:player {name : \"Tim Duncan\"})-[]->(friend:player)-[]->(fof:player) \\ RETURN count(fof), count(DISTINCT fof); +------------+---------------------+ | count(fof) | count(distinct fof) | +------------+---------------------+ | 4 | 3 | +------------+---------------------+","title":"count()"},{"location":"3.ngql-guide/6.functions-and-expressions/15.aggregating/#max","text":"max() \u8fd4\u56de\u53c2\u6570\u7684\u6700\u5927\u503c\u3002 \u8bed\u6cd5\uff1a max(<expression>) \u8fd4\u56de\u7c7b\u578b\uff1a\u4e0e\u539f\u53c2\u6570\u76f8\u540c\u3002 \u793a\u4f8b\uff1a nebula> MATCH (v:player) RETURN max(v.player.age); +-------------------+ | max(v.player.age) | +-------------------+ | 47 | +-------------------+","title":"max()"},{"location":"3.ngql-guide/6.functions-and-expressions/15.aggregating/#min","text":"min() \u8fd4\u56de\u53c2\u6570\u7684\u6700\u5c0f\u503c\u3002 \u8bed\u6cd5\uff1a min(<expression>) \u8fd4\u56de\u7c7b\u578b\uff1a\u4e0e\u539f\u53c2\u6570\u76f8\u540c\u3002 \u793a\u4f8b\uff1a nebula> MATCH (v:player) RETURN min(v.player.age); +-------------------+ | min(v.player.age) | +-------------------+ | 20 | +-------------------+","title":"min()"},{"location":"3.ngql-guide/6.functions-and-expressions/15.aggregating/#collect","text":"collect() \u8fd4\u56de\u4e00\u4e2a\u7b26\u5408\u8868\u8fbe\u5f0f\u8fd4\u56de\u7ed3\u679c\u7684\u5217\u8868\u3002\u8be5\u51fd\u6570\u53ef\u4ee5\u5c06\u591a\u6761\u8bb0\u5f55\u6216\u503c\u5408\u5e76\u8fdb\u4e00\u4e2a\u5217\u8868\uff0c\u5b9e\u73b0\u6570\u636e\u805a\u5408\u3002 \u8bed\u6cd5\uff1a collect(<expression>) \u8fd4\u56de\u7c7b\u578b\uff1alist\u3002 \u793a\u4f8b\uff1a nebula> UNWIND [1, 2, 1] AS a \\ RETURN a; +---+ | a | +---+ | 1 | | 2 | | 1 | +---+ nebula> UNWIND [1, 2, 1] AS a \\ RETURN collect(a); +------------+ | collect(a) | +------------+ | [1, 2, 1] | +------------+ nebula> UNWIND [1, 2, 1] AS a \\ RETURN a, collect(a), size(collect(a)); +---+------------+------------------+ | a | collect(a) | size(collect(a)) | +---+------------+------------------+ | 2 | [2] | 1 | | 1 | [1, 1] | 2 | +---+------------+------------------+ # \u964d\u5e8f\u6392\u5217\uff0c\u9650\u5236\u8f93\u51fa\u884c\u6570\u4e3a 3\uff0c\u7136\u540e\u5c06\u7ed3\u679c\u8f93\u51fa\u5230\u5217\u8868\u4e2d\u3002 nebula> UNWIND [\"c\", \"b\", \"a\", \"d\" ] AS p \\ WITH p AS q \\ ORDER BY q DESC LIMIT 3 \\ RETURN collect(q); +-----------------+ | collect(q) | +-----------------+ | [\"d\", \"c\", \"b\"] | +-----------------+ nebula> WITH [1, 1, 2, 2] AS coll \\ UNWIND coll AS x \\ WITH DISTINCT x \\ RETURN collect(x) AS ss; +--------+ | ss | +--------+ | [1, 2] | +--------+ nebula> MATCH (n:player) \\ RETURN collect(n.player.age); +---------------------------------------------------------------+ | collect(n.player.age) | +---------------------------------------------------------------+ | [32, 32, 34, 29, 41, 40, 33, 25, 40, 37, ... ... # \u57fa\u4e8e\u5e74\u9f84\u805a\u5408\u59d3\u540d\u3002 nebula> MATCH (n:player) \\ RETURN n.player.age AS age, collect(n.player.name); +-----+--------------------------------------------------------------------------+ | age | collect(n.player.name) | +-----+--------------------------------------------------------------------------+ | 24 | [\"Giannis Antetokounmpo\"] | | 20 | [\"Luka Doncic\"] | | 25 | [\"Joel Embiid\", \"Kyle Anderson\"] | +-----+--------------------------------------------------------------------------+ ... nebula> GO FROM \"player100\" OVER serve \\ YIELD properties($$).name AS name \\ | GROUP BY $-.name \\ YIELD collect($-.name) AS name; +-----------+ | name | +-----------+ | [\"Spurs\"] | +-----------+ nebula> LOOKUP ON player \\ YIELD player.age As playerage \\ | GROUP BY $-.playerage \\ YIELD collect($-.playerage) AS playerage; +------------------+ | playerage | +------------------+ | [22] | | [47] | | [43] | | [25, 25] | +------------------+ ...","title":"collect()"},{"location":"3.ngql-guide/6.functions-and-expressions/15.aggregating/#std","text":"std() \u8fd4\u56de\u53c2\u6570\u7684\u603b\u4f53\u6807\u51c6\u5dee\u3002 \u8bed\u6cd5\uff1a std(<expression>) \u8fd4\u56de\u7c7b\u578b\uff1adouble\u3002 \u793a\u4f8b\uff1a nebula> MATCH (v:player) RETURN std(v.player.age); +-------------------+ | std(v.player.age) | +-------------------+ | 6.423895701687502 | +-------------------+","title":"std()"},{"location":"3.ngql-guide/6.functions-and-expressions/15.aggregating/#sum","text":"sum() \u8fd4\u56de\u53c2\u6570\u7684\u548c\u3002 \u8bed\u6cd5\uff1a sum(<expression>) \u8fd4\u56de\u7c7b\u578b\uff1a\u4e0e\u539f\u53c2\u6570\u76f8\u540c\u3002 \u793a\u4f8b\uff1a nebula> MATCH (v:player) RETURN sum(v.player.age); +-------------------+ | sum(v.player.age) | +-------------------+ | 1698 | +-------------------+","title":"sum()"},{"location":"3.ngql-guide/6.functions-and-expressions/15.aggregating/#_2","text":"nebula> GO FROM \"player100\" OVER follow YIELD dst(edge) AS dst, properties($$).age AS age \\ | GROUP BY $-.dst \\ YIELD \\ $-.dst AS dst, \\ toInteger((sum($-.age)/count($-.age)))+avg(distinct $-.age+1)+1 AS statistics; +-------------+------------+ | dst | statistics | +-------------+------------+ | \"player125\" | 84.0 | | \"player101\" | 74.0 | +-------------+------------+","title":"\u805a\u5408\u793a\u4f8b"},{"location":"3.ngql-guide/6.functions-and-expressions/16.type-conversion/","text":"\u7c7b\u578b\u8f6c\u6362\u51fd\u6570 \u00b6 \u672c\u6587\u4ecb\u7ecdNebulaGraph\u652f\u6301\u7684\u7c7b\u578b\u8f6c\u6362\u51fd\u6570\u3002 toBoolean() \u00b6 toBoolean() \u5c06\u5b57\u7b26\u4e32\u8f6c\u6362\u4e3a\u5e03\u5c14\u3002 \u8bed\u6cd5\uff1a toBoolean(<value>) \u8fd4\u56de\u7c7b\u578b\uff1abool\u3002 \u793a\u4f8b\uff1a nebula> UNWIND [true, false, 'true', 'false', NULL] AS b \\ RETURN toBoolean(b) AS b; +----------+ | b | +----------+ | true | | false | | true | | false | | __NULL__ | +----------+ toFloat() \u00b6 toFloat() \u5c06\u6574\u6570\u6216\u5b57\u7b26\u4e32\u8f6c\u6362\u4e3a\u6d6e\u70b9\u6570\u3002 \u8bed\u6cd5\uff1a toFloat(<value>) \u8fd4\u56de\u7c7b\u578b\uff1afloat\u3002 \u793a\u4f8b\uff1a nebula> RETURN toFloat(1), toFloat('1.3'), toFloat('1e3'), toFloat('not a number'); +------------+----------------+----------------+-------------------------+ | toFloat(1) | toFloat(\"1.3\") | toFloat(\"1e3\") | toFloat(\"not a number\") | +------------+----------------+----------------+-------------------------+ | 1.0 | 1.3 | 1000.0 | __NULL__ | +------------+----------------+----------------+-------------------------+ toString() \u00b6 toString() \u5c06\u4efb\u610f\u975e\u590d\u5408\u6570\u636e\u7c7b\u578b\u6570\u636e\u8f6c\u6362\u4e3a\u5b57\u7b26\u4e32\u7c7b\u578b\u3002 \u8bed\u6cd5\uff1a toString(<value>) \u8fd4\u56de\u7c7b\u578b\uff1astring\u3002 \u793a\u4f8b\uff1a nebula> RETURN toString(9669) AS int2str, toString(null) AS null2str; +---------+----------+ | int2str | null2str | +---------+----------+ | \"9669\" | __NULL__ | +---------+----------+ toInteger() \u00b6 toInteger() \u5c06\u6d6e\u70b9\u6216\u5b57\u7b26\u4e32\u8f6c\u6362\u4e3a\u6574\u6570\u3002 \u8bed\u6cd5\uff1a toInteger(<value>) \u8fd4\u56de\u7c7b\u578b\uff1aint\u3002 \u793a\u4f8b\uff1a nebula> RETURN toInteger(1), toInteger('1'), toInteger('1e3'), toInteger('not a number'); +--------------+----------------+------------------+---------------------------+ | toInteger(1) | toInteger(\"1\") | toInteger(\"1e3\") | toInteger(\"not a number\") | +--------------+----------------+------------------+---------------------------+ | 1 | 1 | 1000 | __NULL__ | +--------------+----------------+------------------+---------------------------+ toSet() \u00b6 toSet() \u5c06\u5217\u8868\u6216\u96c6\u5408\u8f6c\u6362\u4e3a\u96c6\u5408\u3002 \u8bed\u6cd5\uff1a toSet(<value>) \u8fd4\u56de\u7c7b\u578b\uff1aset\u3002 \u793a\u4f8b\uff1a nebula> RETURN toSet(list[1,2,3,1,2]) AS list2set; +-----------+ | list2set | +-----------+ | {3, 1, 2} | +-----------+ hash() \u00b6 hash() \u8fd4\u56de\u53c2\u6570\u7684\u54c8\u5e0c\u503c\u3002\u5176\u53c2\u6570\u53ef\u4ee5\u662f\u6570\u5b57\u3001\u5b57\u7b26\u4e32\u3001\u5217\u8868\u3001\u5e03\u5c14\u503c\u3001NULL \u7b49\u7c7b\u578b\u7684\u503c\uff0c\u6216\u8005\u8ba1\u7b97\u7ed3\u679c\u4e3a\u8fd9\u4e9b\u7c7b\u578b\u7684\u8868\u8fbe\u5f0f\u3002 hash() \u51fd\u6570\u91c7\u7528 MurmurHash2 \u7b97\u6cd5\uff0c\u79cd\u5b50\uff08seed\uff09\u4e3a 0xc70f6907UL \u3002\u7528\u6237\u53ef\u4ee5\u5728 MurmurHash2.h \u4e2d\u67e5\u770b\u5176\u6e90\u4ee3\u7801\u3002 \u5728 Java \u4e2d\u7684\u8c03\u7528\u65b9\u5f0f\u5982\u4e0b\uff1a MurmurHash2 . hash64 ( \"to_be_hashed\" . getBytes (), \"to_be_hashed\" . getBytes (). length , 0xc70f6907 ) \u8bed\u6cd5\uff1a hash(<string>) \u8fd4\u56de\u7c7b\u578b\uff1aint\u3002 \u793a\u4f8b\uff1a nebula> RETURN hash(\"abcde\"); +--------------------+ | hash(\"abcde\") | +--------------------+ | 811036730794841393 | +--------------------+ nebula> YIELD hash([1,2,3]); +----------------+ | hash([1,2,3]) | +----------------+ | 11093822460243 | +----------------+ nebula> YIELD hash(NULL); +------------+ | hash(NULL) | +------------+ | -1 | +------------+ nebula> YIELD hash(toLower(\"HELLO NEBULA\")); +-------------------------------+ | hash(toLower(\"HELLO NEBULA\")) | +-------------------------------+ | -8481157362655072082 | +-------------------------------+","title":"\u7c7b\u578b\u8f6c\u6362\u51fd\u6570"},{"location":"3.ngql-guide/6.functions-and-expressions/16.type-conversion/#_1","text":"\u672c\u6587\u4ecb\u7ecdNebulaGraph\u652f\u6301\u7684\u7c7b\u578b\u8f6c\u6362\u51fd\u6570\u3002","title":"\u7c7b\u578b\u8f6c\u6362\u51fd\u6570"},{"location":"3.ngql-guide/6.functions-and-expressions/16.type-conversion/#toboolean","text":"toBoolean() \u5c06\u5b57\u7b26\u4e32\u8f6c\u6362\u4e3a\u5e03\u5c14\u3002 \u8bed\u6cd5\uff1a toBoolean(<value>) \u8fd4\u56de\u7c7b\u578b\uff1abool\u3002 \u793a\u4f8b\uff1a nebula> UNWIND [true, false, 'true', 'false', NULL] AS b \\ RETURN toBoolean(b) AS b; +----------+ | b | +----------+ | true | | false | | true | | false | | __NULL__ | +----------+","title":"toBoolean()"},{"location":"3.ngql-guide/6.functions-and-expressions/16.type-conversion/#tofloat","text":"toFloat() \u5c06\u6574\u6570\u6216\u5b57\u7b26\u4e32\u8f6c\u6362\u4e3a\u6d6e\u70b9\u6570\u3002 \u8bed\u6cd5\uff1a toFloat(<value>) \u8fd4\u56de\u7c7b\u578b\uff1afloat\u3002 \u793a\u4f8b\uff1a nebula> RETURN toFloat(1), toFloat('1.3'), toFloat('1e3'), toFloat('not a number'); +------------+----------------+----------------+-------------------------+ | toFloat(1) | toFloat(\"1.3\") | toFloat(\"1e3\") | toFloat(\"not a number\") | +------------+----------------+----------------+-------------------------+ | 1.0 | 1.3 | 1000.0 | __NULL__ | +------------+----------------+----------------+-------------------------+","title":"toFloat()"},{"location":"3.ngql-guide/6.functions-and-expressions/16.type-conversion/#tostring","text":"toString() \u5c06\u4efb\u610f\u975e\u590d\u5408\u6570\u636e\u7c7b\u578b\u6570\u636e\u8f6c\u6362\u4e3a\u5b57\u7b26\u4e32\u7c7b\u578b\u3002 \u8bed\u6cd5\uff1a toString(<value>) \u8fd4\u56de\u7c7b\u578b\uff1astring\u3002 \u793a\u4f8b\uff1a nebula> RETURN toString(9669) AS int2str, toString(null) AS null2str; +---------+----------+ | int2str | null2str | +---------+----------+ | \"9669\" | __NULL__ | +---------+----------+","title":"toString()"},{"location":"3.ngql-guide/6.functions-and-expressions/16.type-conversion/#tointeger","text":"toInteger() \u5c06\u6d6e\u70b9\u6216\u5b57\u7b26\u4e32\u8f6c\u6362\u4e3a\u6574\u6570\u3002 \u8bed\u6cd5\uff1a toInteger(<value>) \u8fd4\u56de\u7c7b\u578b\uff1aint\u3002 \u793a\u4f8b\uff1a nebula> RETURN toInteger(1), toInteger('1'), toInteger('1e3'), toInteger('not a number'); +--------------+----------------+------------------+---------------------------+ | toInteger(1) | toInteger(\"1\") | toInteger(\"1e3\") | toInteger(\"not a number\") | +--------------+----------------+------------------+---------------------------+ | 1 | 1 | 1000 | __NULL__ | +--------------+----------------+------------------+---------------------------+","title":"toInteger()"},{"location":"3.ngql-guide/6.functions-and-expressions/16.type-conversion/#toset","text":"toSet() \u5c06\u5217\u8868\u6216\u96c6\u5408\u8f6c\u6362\u4e3a\u96c6\u5408\u3002 \u8bed\u6cd5\uff1a toSet(<value>) \u8fd4\u56de\u7c7b\u578b\uff1aset\u3002 \u793a\u4f8b\uff1a nebula> RETURN toSet(list[1,2,3,1,2]) AS list2set; +-----------+ | list2set | +-----------+ | {3, 1, 2} | +-----------+","title":"toSet()"},{"location":"3.ngql-guide/6.functions-and-expressions/16.type-conversion/#hash","text":"hash() \u8fd4\u56de\u53c2\u6570\u7684\u54c8\u5e0c\u503c\u3002\u5176\u53c2\u6570\u53ef\u4ee5\u662f\u6570\u5b57\u3001\u5b57\u7b26\u4e32\u3001\u5217\u8868\u3001\u5e03\u5c14\u503c\u3001NULL \u7b49\u7c7b\u578b\u7684\u503c\uff0c\u6216\u8005\u8ba1\u7b97\u7ed3\u679c\u4e3a\u8fd9\u4e9b\u7c7b\u578b\u7684\u8868\u8fbe\u5f0f\u3002 hash() \u51fd\u6570\u91c7\u7528 MurmurHash2 \u7b97\u6cd5\uff0c\u79cd\u5b50\uff08seed\uff09\u4e3a 0xc70f6907UL \u3002\u7528\u6237\u53ef\u4ee5\u5728 MurmurHash2.h \u4e2d\u67e5\u770b\u5176\u6e90\u4ee3\u7801\u3002 \u5728 Java \u4e2d\u7684\u8c03\u7528\u65b9\u5f0f\u5982\u4e0b\uff1a MurmurHash2 . hash64 ( \"to_be_hashed\" . getBytes (), \"to_be_hashed\" . getBytes (). length , 0xc70f6907 ) \u8bed\u6cd5\uff1a hash(<string>) \u8fd4\u56de\u7c7b\u578b\uff1aint\u3002 \u793a\u4f8b\uff1a nebula> RETURN hash(\"abcde\"); +--------------------+ | hash(\"abcde\") | +--------------------+ | 811036730794841393 | +--------------------+ nebula> YIELD hash([1,2,3]); +----------------+ | hash([1,2,3]) | +----------------+ | 11093822460243 | +----------------+ nebula> YIELD hash(NULL); +------------+ | hash(NULL) | +------------+ | -1 | +------------+ nebula> YIELD hash(toLower(\"HELLO NEBULA\")); +-------------------------------+ | hash(toLower(\"HELLO NEBULA\")) | +-------------------------------+ | -8481157362655072082 | +-------------------------------+","title":"hash()"},{"location":"3.ngql-guide/6.functions-and-expressions/2.string/","text":"\u5185\u7f6e\u5b57\u7b26\u4e32\u51fd\u6570 \u00b6 \u672c\u6587\u4ecb\u7ecdNebulaGraph\u652f\u6301\u7684\u5b57\u7b26\u4e32\u51fd\u6570\u3002 \u6ce8\u610f\u4e8b\u9879 \u00b6 \u5b57\u7b26\u4e32\u7684\u8868\u793a\u65b9\u5f0f\u4e3a\u7528\u53cc\u5f15\u53f7\u6216\u5355\u5f15\u53f7\u5305\u88f9\u3002 \u548c SQL \u4e00\u6837\uff0cnGQL \u7684\u5b57\u7b26\u7d22\u5f15\uff08\u4f4d\u7f6e\uff09\u4ece 1 \u5f00\u59cb\u3002\u4f46\u662f C \u8bed\u8a00\u7684\u5b57\u7b26\u7d22\u5f15\u662f\u4ece 0 \u5f00\u59cb\u7684\u3002 strcasecmp() \u00b6 strcasecmp() \u6bd4\u8f83\u4e24\u4e2a\u5b57\u7b26\u4e32\uff08\u4e0d\u533a\u5206\u5927\u5c0f\u5199\uff09\u3002 \u8bed\u6cd5\uff1a strcasecmp(<string_a>,<string_b>) string_a \u3001 string_b \uff1a\u5f85\u6bd4\u8f83\u7684\u5b57\u7b26\u4e32\u3002 \u8fd4\u56de\u7c7b\u578b\uff1aint\u3002 \u5f53 string_a = string_b \u65f6\uff0c\u8fd4\u56de 0 \uff0c\u5f53 string_a > string_b \u662f\uff0c\u8fd4\u56de\u5927\u4e8e 0 \u7684\u6570\uff0c\u5f53 string_a < string_b \u65f6\uff0c\u8fd4\u56de\u5c0f\u4e8e 0 \u7684\u6570\u3002 \u793a\u4f8b\uff1a nebula> RETURN strcasecmp(\"a\",\"aa\"); +----------------------+ | strcasecmp(\"a\",\"aa\") | +----------------------+ | -97 | +----------------------+ lower() \u548c toLower() \u00b6 lower() \u548c toLower() \u90fd\u53ef\u4ee5\u8fd4\u56de\u6307\u5b9a\u5b57\u7b26\u4e32\u7684\u5c0f\u5199\u5f62\u5f0f\u3002 \u8bed\u6cd5\uff1a lower(<string>) \u3001 toLower(<string>) string \uff1a\u6307\u5b9a\u7684\u5b57\u7b26\u4e32\u3002 \u8fd4\u56de\u7c7b\u578b\uff1astring\u3002 \u793a\u4f8b\uff1a nebula> RETURN lower(\"Basketball_Player\"); +----------------------------+ | lower(\"Basketball_Player\") | +----------------------------+ | \"basketball_player\" | +----------------------------+ upper() \u548c toUpper() \u00b6 upper() \u548c toUpper() \u90fd\u53ef\u4ee5\u8fd4\u56de\u6307\u5b9a\u5b57\u7b26\u4e32\u7684\u5927\u5199\u5f62\u5f0f\u3002 \u8bed\u6cd5\uff1a upper(<string>) \u3001 toUpper(<string>) string \uff1a\u6307\u5b9a\u7684\u5b57\u7b26\u4e32\u3002 \u8fd4\u56de\u7c7b\u578b\uff1astring\u3002 \u793a\u4f8b\uff1a nebula> RETURN upper(\"Basketball_Player\"); +----------------------------+ | upper(\"Basketball_Player\") | +----------------------------+ | \"BASKETBALL_PLAYER\" | +----------------------------+ length() \u00b6 length() \u8fd4\u56de\uff1a \u6307\u5b9a\u5b57\u7b26\u4e32\u7684\u957f\u5ea6\uff0c\u5355\u4f4d\uff1a\u5b57\u8282\u3002 \u8def\u5f84\u7684\u957f\u5ea6\uff0c\u5355\u4f4d\uff1a\u8df3\u3002 \u8bed\u6cd5\uff1a length({<string>|<path>}) string \uff1a\u6307\u5b9a\u7684\u5b57\u7b26\u4e32\u3002 path \uff1a\u6307\u5b9a\u7684\u8def\u5f84\uff0c\u4f7f\u7528\u53d8\u91cf\u8868\u793a\u3002 \u8fd4\u56de\u7c7b\u578b\uff1aint\u3002 \u793a\u4f8b\uff1a nebula> RETURN length(\"basketball\"); +----------------------+ | length(\"basketball\") | +----------------------+ | 10 | +----------------------+ nebula> MATCH p=(v:player{name:\"Tim Duncan\"})-->(v2) return length(p); +-----------+ | length(p) | +-----------+ | 1 | | 1 | | 1 | +-----------+ trim() \u00b6 trim() \u5220\u9664\u6307\u5b9a\u5b57\u7b26\u4e32\u5934\u90e8\u548c\u5c3e\u90e8\u7684\u7a7a\u683c\u3002 \u8bed\u6cd5\uff1a trim(<string>) string \uff1a\u6307\u5b9a\u7684\u5b57\u7b26\u4e32\u3002 \u8fd4\u56de\u7c7b\u578b\uff1astring\u3002 \u793a\u4f8b\uff1a nebula> RETURN trim(\" basketball player \"); +-----------------------------+ | trim(\" basketball player \") | +-----------------------------+ | \"basketball player\" | +-----------------------------+ ltrim() \u00b6 ltrim() \u5220\u9664\u5b57\u7b26\u4e32\u5934\u90e8\u7684\u7a7a\u683c\u3002 \u8bed\u6cd5\uff1a ltrim(<string>) string \uff1a\u6307\u5b9a\u7684\u5b57\u7b26\u4e32\u3002 \u8fd4\u56de\u7c7b\u578b\uff1astring\u3002 \u793a\u4f8b\uff1a nebula> RETURN ltrim(\" basketball player \"); +------------------------------+ | ltrim(\" basketball player \") | +------------------------------+ | \"basketball player \" | +------------------------------+ rtrim() \u00b6 rtrim() \u5220\u9664\u5b57\u7b26\u4e32\u5c3e\u90e8\u7684\u7a7a\u683c\u3002 \u8bed\u6cd5\uff1a rtrim(<string>) string \uff1a\u6307\u5b9a\u7684\u5b57\u7b26\u4e32\u3002 \u8fd4\u56de\u7c7b\u578b\uff1astring\u3002 \u793a\u4f8b\uff1a nebula> RETURN rtrim(\" basketball player \"); +------------------------------+ | rtrim(\" basketball player \") | +------------------------------+ | \" basketball player\" | +------------------------------+ left() \u00b6 left() \u8fd4\u56de\u6307\u5b9a\u5b57\u7b26\u4e32\u5934\u90e8\u82e5\u5e72\u4e2a\u5b57\u7b26\u7ec4\u6210\u7684\u5b50\u5b57\u7b26\u4e32\u3002 \u8bed\u6cd5\uff1a left(<string>,<count>) string \uff1a\u6307\u5b9a\u7684\u5b57\u7b26\u4e32\u3002 count \uff1a\u6307\u5b9a\u4ece\u5934\u90e8\u5f00\u59cb\u7684\u5b57\u7b26\u6570\u91cf\u3002\u5982\u679c count \u8d85\u8fc7\u5b57\u7b26\u4e32\u7684\u957f\u5ea6\uff0c\u5219\u8fd4\u56de\u5b57\u7b26\u4e32\u672c\u8eab\u3002 \u8fd4\u56de\u7c7b\u578b\uff1astring\u3002 \u793a\u4f8b\uff1a nebula> RETURN left(\"basketball_player\",6); +-----------------------------+ | left(\"basketball_player\",6) | +-----------------------------+ | \"basket\" | +-----------------------------+ right() \u00b6 right() \u8fd4\u56de\u6307\u5b9a\u5b57\u7b26\u4e32\u5c3e\u90e8\u82e5\u5e72\u4e2a\u5b57\u7b26\u7ec4\u6210\u7684\u5b50\u5b57\u7b26\u4e32\u3002 \u8bed\u6cd5\uff1a right(<string>,<count>) string \uff1a\u6307\u5b9a\u7684\u5b57\u7b26\u4e32\u3002 count \uff1a\u6307\u5b9a\u4ece\u5c3e\u90e8\u5f00\u59cb\u7684\u5b57\u7b26\u6570\u91cf\u3002\u5982\u679c count \u8d85\u8fc7\u5b57\u7b26\u4e32\u7684\u957f\u5ea6\uff0c\u5219\u8fd4\u56de\u5b57\u7b26\u4e32\u672c\u8eab\u3002 \u8fd4\u56de\u7c7b\u578b\uff1astring\u3002 \u793a\u4f8b\uff1a nebula> RETURN right(\"basketball_player\",6); +------------------------------+ | right(\"basketball_player\",6) | +------------------------------+ | \"player\" | +------------------------------+ lpad() \u00b6 lpad() \u5728\u6307\u5b9a\u5b57\u7b26\u4e32\u7684\u5934\u90e8\u586b\u5145\u5b57\u7b26\u4e32\u81f3\u6307\u5b9a\u957f\u5ea6\uff0c\u5e76\u8fd4\u56de\u7ed3\u679c\u5b57\u7b26\u4e32\u3002 \u8bed\u6cd5\uff1a lpad(<string>,<count>,<letters>) string \uff1a\u6307\u5b9a\u7684\u5b57\u7b26\u4e32\u3002 count \uff1a\u6307\u5b9a\u4ece\u5c3e\u90e8\u5f00\u59cb\u5c06\u8981\u8fd4\u56de\u7684\u5b57\u7b26\u6570\u91cf\u3002\u5982\u679c count \u5c11\u4e8e string \u5b57\u7b26\u4e32\u7684\u957f\u5ea6\uff0c\u5219\u53ea\u8fd4\u56de string \u5b57\u7b26\u4e32 \u4ece\u524d\u5230\u540e \u7684 count \u4e2a\u5b57\u7b26\u3002 letters \uff1a\u4ece\u5934\u90e8\u586b\u5145\u7684\u5b57\u7b26\u4e32\u3002 \u8fd4\u56de\u7c7b\u578b\uff1astring\u3002 \u793a\u4f8b\uff1a nebula> RETURN lpad(\"abcd\",10,\"b\"); +---------------------+ | lpad(\"abcd\",10,\"b\") | +---------------------+ | \"bbbbbbabcd\" | +---------------------+ nebula> RETURN lpad(\"abcd\",3,\"b\"); +--------------------+ | lpad(\"abcd\",3,\"b\") | +--------------------+ | \"abc\" | +--------------------+ rpad() \u00b6 rpad() \u5728\u6307\u5b9a\u5b57\u7b26\u4e32\u7684\u5c3e\u90e8\u586b\u5145\u5b57\u7b26\u4e32\u81f3\u6307\u5b9a\u957f\u5ea6\uff0c\u5e76\u8fd4\u56de\u7ed3\u679c\u5b57\u7b26\u4e32\u3002 \u8bed\u6cd5\uff1a rpad(<string>,<count>,<letters>) string \uff1a\u6307\u5b9a\u7684\u5b57\u7b26\u4e32\u3002 count \uff1a\u6307\u5b9a\u4ece\u5934\u90e8\u5f00\u59cb\u5c06\u8981\u8fd4\u56de\u7684\u5b57\u7b26\u6570\u91cf\u3002\u5982\u679c count \u5c11\u4e8e string \u5b57\u7b26\u4e32\u7684\u957f\u5ea6\uff0c\u5219\u53ea\u8fd4\u56de string \u5b57\u7b26\u4e32 \u4ece\u524d\u5230\u540e \u7684 count \u4e2a\u5b57\u7b26\u3002 letters \uff1a\u4ece\u5c3e\u90e8\u586b\u5145\u7684\u5b57\u7b26\u4e32\u3002 \u8fd4\u56de\u7c7b\u578b\uff1astring\u3002 \u793a\u4f8b\uff1a nebula> RETURN rpad(\"abcd\",10,\"b\"); +---------------------+ | rpad(\"abcd\",10,\"b\") | +---------------------+ | \"abcdbbbbbb\" | +---------------------+ nebula> RETURN rpad(\"abcd\",3,\"b\"); +--------------------+ | rpad(\"abcd\",3,\"b\") | +--------------------+ | \"abc\" | +--------------------+ substr() \u548c substring() \u00b6 substr() \u548c substring() \u4ece\u6307\u5b9a\u5b57\u7b26\u4e32\u7684\u6307\u5b9a\u4f4d\u7f6e\u5f00\u59cb\uff08\u4e0d\u5305\u62ec\u5f00\u59cb\u4f4d\u7f6e\u7684\u5b57\u7b26\uff09\uff0c\u63d0\u53d6\u540e\u9762\u7684\u82e5\u5e72\u4e2a\u5b57\u7b26\uff0c\u7ec4\u6210\u65b0\u7684\u5b57\u7b26\u4e32\u5e76\u8fd4\u56de\u3002 \u8bed\u6cd5\uff1a substr(<string>,<pos>,<count>) \u3001 substring(<string>,<pos>,<count>) string \uff1a\u6307\u5b9a\u7684\u5b57\u7b26\u4e32\u3002 pos \uff1a\u6307\u5b9a\u5f00\u59cb\u7684\u4f4d\u7f6e\uff0c\u5373\u5b57\u7b26\u7d22\u5f15\uff0c\u6570\u636e\u7c7b\u578b\u4e3a int\u3002 count \uff1a\u6307\u5b9a\u4ece\u5f00\u59cb\u4f4d\u7f6e\u5f80\u540e\u63d0\u53d6\u7684\u5b57\u7b26\u6570\u91cf\u3002 \u8fd4\u56de\u7c7b\u578b\uff1astring\u3002 substr() \u548c substring() \u7684\u8fd4\u56de\u8bf4\u660e \u00b6 \u5982\u679c pos \u4e3a 0\uff0c\u8868\u793a\u4ece\u6307\u5b9a\u5b57\u7b26\u4e32\u5934\u90e8\u5f00\u59cb\u63d0\u53d6\uff08\u5305\u62ec\u7b2c\u4e00\u4e2a\u5b57\u7b26\uff09\u3002 \u5982\u679c pos \u5927\u4e8e\u6700\u5927\u5b57\u7b26\u7d22\u5f15\uff0c\u5219\u8fd4\u56de\u7a7a\u5b57\u7b26\u4e32\u3002 \u5982\u679c pos \u662f\u8d1f\u6570\uff0c\u5219\u8fd4\u56de BAD_DATA \u3002 \u5982\u679c\u7701\u7565 count \uff0c\u5219\u8fd4\u56de\u4ece pos \u4f4d\u7f6e\u5f00\u59cb\u5230\u5b57\u7b26\u4e32\u672b\u5c3e\u7684\u5b50\u5b57\u7b26\u4e32\u3002 \u5982\u679c count \u4e3a 0\uff0c\u5219\u8fd4\u56de\u7a7a\u5b57\u7b26\u4e32\u3002 \u4f7f\u7528 NULL \u4f5c\u4e3a\u4efb\u4f55\u53c2\u6570\u4f1a\u51fa\u73b0 \u9519\u8bef \u3002 openCypher \u517c\u5bb9\u6027 \u5728 openCypher \u4e2d\uff0c\u5982\u679c\u5b57\u7b26\u4e32 a \u4e3a null \uff0c\u4f1a\u8fd4\u56de null \u3002 \u793a\u4f8b\uff1a nebula> RETURN substr(\"abcdefg\",2,4); +-----------------------+ | substr(\"abcdefg\",2,4) | +-----------------------+ | \"cdef\" | +-----------------------+ nebula> RETURN substr(\"abcdefg\",0,4); +-----------------------+ | substr(\"abcdefg\",0,4) | +-----------------------+ | \"abcd\" | +-----------------------+ nebula> RETURN substr(\"abcdefg\",2); +---------------------+ | substr(\"abcdefg\",2) | +---------------------+ | \"cdefg\" | +---------------------+ reverse() \u00b6 reverse() \u9006\u5e8f\u8fd4\u56de\u6307\u5b9a\u7684\u5b57\u7b26\u4e32\u3002 \u8bed\u6cd5\uff1a reverse(<string>) string \uff1a\u6307\u5b9a\u7684\u5b57\u7b26\u4e32\u3002 \u8fd4\u56de\u7c7b\u578b\uff1astring\u3002 \u793a\u4f8b\uff1a nebula> RETURN reverse(\"abcdefg\"); +--------------------+ | reverse(\"abcdefg\") | +--------------------+ | \"gfedcba\" | +--------------------+ replace() \u00b6 replace() \u5c06\u6307\u5b9a\u5b57\u7b26\u4e32\u4e2d\u7684\u5b50\u5b57\u7b26\u4e32 a \u66ff\u6362\u4e3a\u5b57\u7b26\u4e32 b\u3002 \u8bed\u6cd5\uff1a replace(<string>,<substr_a>,<string_b>) string \uff1a\u6307\u5b9a\u7684\u5b57\u7b26\u4e32\u3002 substr_a \uff1a\u5b50\u5b57\u7b26\u4e32 a\u3002 string_b \uff1a\u5b57\u7b26\u4e32 b\u3002 \u8fd4\u56de\u7c7b\u578b\uff1astring\u3002 \u793a\u4f8b\uff1a nebula> RETURN replace(\"abcdefg\",\"cd\",\"AAAAA\"); +---------------------------------+ | replace(\"abcdefg\",\"cd\",\"AAAAA\") | +---------------------------------+ | \"abAAAAAefg\" | +---------------------------------+ split() \u00b6 split() \u5c06\u5b50\u5b57\u7b26\u4e32 b \u8bc6\u522b\u4e3a\u5206\u9694\u7b26\uff0c\u5206\u9694\u6307\u5b9a\u5b57\u7b26\u4e32\uff0c\u5e76\u8fd4\u56de\u5206\u9694\u540e\u7684\u5b57\u7b26\u4e32\u5217\u8868\u3002 \u8bed\u6cd5\uff1a split(<string>,<substr>) string \uff1a\u6307\u5b9a\u7684\u5b57\u7b26\u4e32\u3002 substr \uff1a\u5b50\u5b57\u7b26\u4e32 b\u3002 \u8fd4\u56de\u7c7b\u578b\uff1alist\u3002 \u793a\u4f8b\uff1a nebula> RETURN split(\"basketballplayer\",\"a\"); +-------------------------------+ | split(\"basketballplayer\",\"a\") | +-------------------------------+ | [\"b\", \"sketb\", \"llpl\", \"yer\"] | +-------------------------------+ concat() \u00b6 concat() \u8fd4\u56de\u6240\u6709\u53c2\u6570\u8fde\u63a5\u6210\u7684\u5b57\u7b26\u4e32\u3002 \u8bed\u6cd5\uff1a concat(<string1>,<string2>,...) \u51fd\u6570\u81f3\u5c11\u9700\u8981\u4e24\u4e2a\u6216\u4ee5\u4e0a\u5b57\u7b26\u4e32\u53c2\u6570\u3002\u5982\u679c\u5b57\u7b26\u4e32\u53c2\u6570\u53ea\u6709\u4e00\u4e2a\uff0c\u5219\u8fd4\u56de\u8be5\u5b57\u7b26\u4e32\u53c2\u6570\u672c\u8eab\u3002 \u5982\u679c\u4efb\u4f55\u4e00\u4e2a\u7684\u5b57\u7b26\u4e32\u53c2\u6570\u4e3a NULL \uff0c\u5219 concat() \u51fd\u6570\u8fd4\u56de\u503c\u4e3a NULL \u3002 \u8fd4\u56de\u7c7b\u578b\uff1astring\u3002 \u793a\u4f8b\uff1a //\u8fde\u63a5 1\uff0c2\uff0c3 nebula> RETURN concat(\"1\",\"2\",\"3\") AS r; +-------+ | r | +-------+ | \"123\" | +-------+ //\u5b57\u7b26\u4e32\u53c2\u6570\u6709 NULL nebula> RETURN concat(\"1\",\"2\",NULL) AS r; +----------+ | r | +----------+ | __NULL__ | +----------+ nebula> GO FROM \"player100\" over follow \\ YIELD concat(src(edge), properties($^).age, properties($$).name, properties(edge).degree) AS A; +------------------------------+ | A | +------------------------------+ | \"player10042Tony Parker95\" | | \"player10042Manu Ginobili95\" | +------------------------------+ concat_ws() \u00b6 concat_ws() \u8fd4\u56de\u7528\u5206\u9694\u7b26\uff08separator\uff09\u8fde\u63a5\u7684\u6240\u6709\u5b57\u7b26\u4e32\u3002 \u8bed\u6cd5\uff1a concat_ws(<separator>,<string1>,<string2>,... ) \u51fd\u6570\u81f3\u5c11\u9700\u8981\u4e24\u4e2a\u6216\u4ee5\u4e0a\u5b57\u7b26\u4e32\u53c2\u6570\u3002 \u5982\u679c\u5206\u9694\u7b26\u4e3a NULL \u65f6\uff0c concat_ws() \u51fd\u6570\u624d\u8fd4\u56de NULL \u3002 \u5982\u679c\u5206\u9694\u7b26\u4e0d\u4e3a NULL \uff0c\u5b57\u7b26\u4e32\u53c2\u6570\u53ea\u6709\u4e00\u4e2a\uff0c\u5219\u8fd4\u56de\u8be5\u5b57\u7b26\u4e32\u53c2\u6570\u672c\u8eab\u3002 \u5b57\u7b26\u4e32\u53c2\u6570\u5b58\u5728 NULL \u503c\u65f6\uff0c\u5ffd\u7565 NULL \u503c\uff0c\u7ee7\u7eed\u8fde\u63a5\u4e0b\u4e00\u4e2a\u53c2\u6570\u3002 \u793a\u4f8b\uff1a //\u5206\u9694\u7b26\u4e3a +\uff0c\u8fde\u63a5 a\uff0cb\uff0cc\u3002 nebula> RETURN concat_ws(\"+\",\"a\",\"b\",\"c\") AS r; +---------+ | r | +---------+ | \"a+b+c\" | +---------+ //\u5206\u9694\u7b26\u4e3a NULL\u3002 neubla> RETURN concat_ws(NULL,\"a\",\"b\",\"c\") AS r; +----------+ | r | +----------+ | __NULL__ | +----------+ //\u5206\u9694\u7b26\u4e3a +\uff0c\u5b57\u7b26\u4e32\u53c2\u6570\u6709 NULL\u3002 nebula> RETURN concat_ws(\"+\",\"a\",NULL,\"b\",\"c\") AS r; +---------+ | r | +---------+ | \"a+b+c\" | +---------+ //\u5206\u9694\u7b26\u4e3a+\u3002\u5b57\u7b26\u4e32\u53c2\u6570\u53ea\u6709\u4e00\u4e2a nebula> RETURN concat_ws(\"+\",\"a\") AS r; +-----+ | r | +-----+ | \"a\" | +-----+ nebula> GO FROM \"player100\" over follow \\ YIELD concat_ws(\" \",src(edge), properties($^).age, properties($$).name, properties(edge).degree) AS A; +---------------------------------+ | A | +---------------------------------+ | \"player100 42 Tony Parker 95\" | | \"player100 42 Manu Ginobili 95\" | +---------------------------------+ extract() \u00b6 extract() \u4ece\u6307\u5b9a\u5b57\u7b26\u4e32\u4e2d\u63d0\u53d6\u7b26\u5408\u6b63\u5219\u8868\u8fbe\u5f0f\u7684\u5b50\u5b57\u7b26\u4e32\u3002 \u8bed\u6cd5\uff1a extract(<string>,\"<regular_expression>\") string \uff1a\u6307\u5b9a\u7684\u5b57\u7b26\u4e32\u3002 regular_expression \uff1a\u6b63\u5219\u8868\u8fbe\u5f0f\u3002 \u8fd4\u56de\u7c7b\u578b\uff1alist\u3002 \u793a\u4f8b\uff1a nebula> MATCH (a:player)-[b:serve]-(c:team{name: \"Lakers\"}) \\ WHERE a.player.age > 45 \\ RETURN extract(a.player.name, \"\\\\w+\") AS result; +----------------------------+ | result | +----------------------------+ | [\"Shaquille\", \"O\", \"Neal\"] | +----------------------------+ nebula> MATCH (a:player)-[b:serve]-(c:team{name: \"Lakers\"}) \\ WHERE a.player.age > 45 \\ RETURN extract(a.player.name, \"hello\") AS result; +--------+ | result | +--------+ | [] | +--------+ json_extract() \u51fd\u6570 \u00b6 json_extract() \u5c06\u6307\u5b9a JSON \u5b57\u7b26\u4e32\u8f6c\u6362\u4e3a map \u7c7b\u578b\u3002 \u8bed\u6cd5\uff1a extract(<string>) string \uff1a\u6307\u5b9a\u5b57\u7b26\u4e32\uff0c\u4e3a JSON \u683c\u5f0f\u3002 \u8fd4\u56de\u7c7b\u578b\uff1amap\u3002 Caution \u76ee\u524d\u4ec5\u652f\u6301 Bool\u3001Double\u3001Int\u3001String \u548c NULL \u7c7b\u578b\u6570\u636e\u3002 \u4ec5\u652f\u6301\u6df1\u5ea6\u4e3a 1 \u7684 Map \u5d4c\u5957\uff0c\u5982\u679c\u5d4c\u5957\u6df1\u5ea6\u4e3a 2 \u53ca\u4ee5\u4e0a\uff0c\u5d4c\u5957\u9879\u4fdd\u7559\u4e3a\u7a7a\u3002 \u793a\u4f8b\uff1a nebula> YIELD json_extract('{\"a\": 1, \"b\": {}, \"c\": {\"d\": true}}') AS result; +-----------------------------+ | result | +-----------------------------+ | {a: 1, b: {}, c: {d: true}} | +-----------------------------+","title":"\u5b57\u7b26\u4e32\u51fd\u6570"},{"location":"3.ngql-guide/6.functions-and-expressions/2.string/#_1","text":"\u672c\u6587\u4ecb\u7ecdNebulaGraph\u652f\u6301\u7684\u5b57\u7b26\u4e32\u51fd\u6570\u3002","title":"\u5185\u7f6e\u5b57\u7b26\u4e32\u51fd\u6570"},{"location":"3.ngql-guide/6.functions-and-expressions/2.string/#_2","text":"\u5b57\u7b26\u4e32\u7684\u8868\u793a\u65b9\u5f0f\u4e3a\u7528\u53cc\u5f15\u53f7\u6216\u5355\u5f15\u53f7\u5305\u88f9\u3002 \u548c SQL \u4e00\u6837\uff0cnGQL \u7684\u5b57\u7b26\u7d22\u5f15\uff08\u4f4d\u7f6e\uff09\u4ece 1 \u5f00\u59cb\u3002\u4f46\u662f C \u8bed\u8a00\u7684\u5b57\u7b26\u7d22\u5f15\u662f\u4ece 0 \u5f00\u59cb\u7684\u3002","title":"\u6ce8\u610f\u4e8b\u9879"},{"location":"3.ngql-guide/6.functions-and-expressions/2.string/#strcasecmp","text":"strcasecmp() \u6bd4\u8f83\u4e24\u4e2a\u5b57\u7b26\u4e32\uff08\u4e0d\u533a\u5206\u5927\u5c0f\u5199\uff09\u3002 \u8bed\u6cd5\uff1a strcasecmp(<string_a>,<string_b>) string_a \u3001 string_b \uff1a\u5f85\u6bd4\u8f83\u7684\u5b57\u7b26\u4e32\u3002 \u8fd4\u56de\u7c7b\u578b\uff1aint\u3002 \u5f53 string_a = string_b \u65f6\uff0c\u8fd4\u56de 0 \uff0c\u5f53 string_a > string_b \u662f\uff0c\u8fd4\u56de\u5927\u4e8e 0 \u7684\u6570\uff0c\u5f53 string_a < string_b \u65f6\uff0c\u8fd4\u56de\u5c0f\u4e8e 0 \u7684\u6570\u3002 \u793a\u4f8b\uff1a nebula> RETURN strcasecmp(\"a\",\"aa\"); +----------------------+ | strcasecmp(\"a\",\"aa\") | +----------------------+ | -97 | +----------------------+","title":"strcasecmp()"},{"location":"3.ngql-guide/6.functions-and-expressions/2.string/#lower_tolower","text":"lower() \u548c toLower() \u90fd\u53ef\u4ee5\u8fd4\u56de\u6307\u5b9a\u5b57\u7b26\u4e32\u7684\u5c0f\u5199\u5f62\u5f0f\u3002 \u8bed\u6cd5\uff1a lower(<string>) \u3001 toLower(<string>) string \uff1a\u6307\u5b9a\u7684\u5b57\u7b26\u4e32\u3002 \u8fd4\u56de\u7c7b\u578b\uff1astring\u3002 \u793a\u4f8b\uff1a nebula> RETURN lower(\"Basketball_Player\"); +----------------------------+ | lower(\"Basketball_Player\") | +----------------------------+ | \"basketball_player\" | +----------------------------+","title":"lower() \u548c toLower()"},{"location":"3.ngql-guide/6.functions-and-expressions/2.string/#upper_toupper","text":"upper() \u548c toUpper() \u90fd\u53ef\u4ee5\u8fd4\u56de\u6307\u5b9a\u5b57\u7b26\u4e32\u7684\u5927\u5199\u5f62\u5f0f\u3002 \u8bed\u6cd5\uff1a upper(<string>) \u3001 toUpper(<string>) string \uff1a\u6307\u5b9a\u7684\u5b57\u7b26\u4e32\u3002 \u8fd4\u56de\u7c7b\u578b\uff1astring\u3002 \u793a\u4f8b\uff1a nebula> RETURN upper(\"Basketball_Player\"); +----------------------------+ | upper(\"Basketball_Player\") | +----------------------------+ | \"BASKETBALL_PLAYER\" | +----------------------------+","title":"upper() \u548c toUpper()"},{"location":"3.ngql-guide/6.functions-and-expressions/2.string/#length","text":"length() \u8fd4\u56de\uff1a \u6307\u5b9a\u5b57\u7b26\u4e32\u7684\u957f\u5ea6\uff0c\u5355\u4f4d\uff1a\u5b57\u8282\u3002 \u8def\u5f84\u7684\u957f\u5ea6\uff0c\u5355\u4f4d\uff1a\u8df3\u3002 \u8bed\u6cd5\uff1a length({<string>|<path>}) string \uff1a\u6307\u5b9a\u7684\u5b57\u7b26\u4e32\u3002 path \uff1a\u6307\u5b9a\u7684\u8def\u5f84\uff0c\u4f7f\u7528\u53d8\u91cf\u8868\u793a\u3002 \u8fd4\u56de\u7c7b\u578b\uff1aint\u3002 \u793a\u4f8b\uff1a nebula> RETURN length(\"basketball\"); +----------------------+ | length(\"basketball\") | +----------------------+ | 10 | +----------------------+ nebula> MATCH p=(v:player{name:\"Tim Duncan\"})-->(v2) return length(p); +-----------+ | length(p) | +-----------+ | 1 | | 1 | | 1 | +-----------+","title":"length()"},{"location":"3.ngql-guide/6.functions-and-expressions/2.string/#trim","text":"trim() \u5220\u9664\u6307\u5b9a\u5b57\u7b26\u4e32\u5934\u90e8\u548c\u5c3e\u90e8\u7684\u7a7a\u683c\u3002 \u8bed\u6cd5\uff1a trim(<string>) string \uff1a\u6307\u5b9a\u7684\u5b57\u7b26\u4e32\u3002 \u8fd4\u56de\u7c7b\u578b\uff1astring\u3002 \u793a\u4f8b\uff1a nebula> RETURN trim(\" basketball player \"); +-----------------------------+ | trim(\" basketball player \") | +-----------------------------+ | \"basketball player\" | +-----------------------------+","title":"trim()"},{"location":"3.ngql-guide/6.functions-and-expressions/2.string/#ltrim","text":"ltrim() \u5220\u9664\u5b57\u7b26\u4e32\u5934\u90e8\u7684\u7a7a\u683c\u3002 \u8bed\u6cd5\uff1a ltrim(<string>) string \uff1a\u6307\u5b9a\u7684\u5b57\u7b26\u4e32\u3002 \u8fd4\u56de\u7c7b\u578b\uff1astring\u3002 \u793a\u4f8b\uff1a nebula> RETURN ltrim(\" basketball player \"); +------------------------------+ | ltrim(\" basketball player \") | +------------------------------+ | \"basketball player \" | +------------------------------+","title":"ltrim()"},{"location":"3.ngql-guide/6.functions-and-expressions/2.string/#rtrim","text":"rtrim() \u5220\u9664\u5b57\u7b26\u4e32\u5c3e\u90e8\u7684\u7a7a\u683c\u3002 \u8bed\u6cd5\uff1a rtrim(<string>) string \uff1a\u6307\u5b9a\u7684\u5b57\u7b26\u4e32\u3002 \u8fd4\u56de\u7c7b\u578b\uff1astring\u3002 \u793a\u4f8b\uff1a nebula> RETURN rtrim(\" basketball player \"); +------------------------------+ | rtrim(\" basketball player \") | +------------------------------+ | \" basketball player\" | +------------------------------+","title":"rtrim()"},{"location":"3.ngql-guide/6.functions-and-expressions/2.string/#left","text":"left() \u8fd4\u56de\u6307\u5b9a\u5b57\u7b26\u4e32\u5934\u90e8\u82e5\u5e72\u4e2a\u5b57\u7b26\u7ec4\u6210\u7684\u5b50\u5b57\u7b26\u4e32\u3002 \u8bed\u6cd5\uff1a left(<string>,<count>) string \uff1a\u6307\u5b9a\u7684\u5b57\u7b26\u4e32\u3002 count \uff1a\u6307\u5b9a\u4ece\u5934\u90e8\u5f00\u59cb\u7684\u5b57\u7b26\u6570\u91cf\u3002\u5982\u679c count \u8d85\u8fc7\u5b57\u7b26\u4e32\u7684\u957f\u5ea6\uff0c\u5219\u8fd4\u56de\u5b57\u7b26\u4e32\u672c\u8eab\u3002 \u8fd4\u56de\u7c7b\u578b\uff1astring\u3002 \u793a\u4f8b\uff1a nebula> RETURN left(\"basketball_player\",6); +-----------------------------+ | left(\"basketball_player\",6) | +-----------------------------+ | \"basket\" | +-----------------------------+","title":"left()"},{"location":"3.ngql-guide/6.functions-and-expressions/2.string/#right","text":"right() \u8fd4\u56de\u6307\u5b9a\u5b57\u7b26\u4e32\u5c3e\u90e8\u82e5\u5e72\u4e2a\u5b57\u7b26\u7ec4\u6210\u7684\u5b50\u5b57\u7b26\u4e32\u3002 \u8bed\u6cd5\uff1a right(<string>,<count>) string \uff1a\u6307\u5b9a\u7684\u5b57\u7b26\u4e32\u3002 count \uff1a\u6307\u5b9a\u4ece\u5c3e\u90e8\u5f00\u59cb\u7684\u5b57\u7b26\u6570\u91cf\u3002\u5982\u679c count \u8d85\u8fc7\u5b57\u7b26\u4e32\u7684\u957f\u5ea6\uff0c\u5219\u8fd4\u56de\u5b57\u7b26\u4e32\u672c\u8eab\u3002 \u8fd4\u56de\u7c7b\u578b\uff1astring\u3002 \u793a\u4f8b\uff1a nebula> RETURN right(\"basketball_player\",6); +------------------------------+ | right(\"basketball_player\",6) | +------------------------------+ | \"player\" | +------------------------------+","title":"right()"},{"location":"3.ngql-guide/6.functions-and-expressions/2.string/#lpad","text":"lpad() \u5728\u6307\u5b9a\u5b57\u7b26\u4e32\u7684\u5934\u90e8\u586b\u5145\u5b57\u7b26\u4e32\u81f3\u6307\u5b9a\u957f\u5ea6\uff0c\u5e76\u8fd4\u56de\u7ed3\u679c\u5b57\u7b26\u4e32\u3002 \u8bed\u6cd5\uff1a lpad(<string>,<count>,<letters>) string \uff1a\u6307\u5b9a\u7684\u5b57\u7b26\u4e32\u3002 count \uff1a\u6307\u5b9a\u4ece\u5c3e\u90e8\u5f00\u59cb\u5c06\u8981\u8fd4\u56de\u7684\u5b57\u7b26\u6570\u91cf\u3002\u5982\u679c count \u5c11\u4e8e string \u5b57\u7b26\u4e32\u7684\u957f\u5ea6\uff0c\u5219\u53ea\u8fd4\u56de string \u5b57\u7b26\u4e32 \u4ece\u524d\u5230\u540e \u7684 count \u4e2a\u5b57\u7b26\u3002 letters \uff1a\u4ece\u5934\u90e8\u586b\u5145\u7684\u5b57\u7b26\u4e32\u3002 \u8fd4\u56de\u7c7b\u578b\uff1astring\u3002 \u793a\u4f8b\uff1a nebula> RETURN lpad(\"abcd\",10,\"b\"); +---------------------+ | lpad(\"abcd\",10,\"b\") | +---------------------+ | \"bbbbbbabcd\" | +---------------------+ nebula> RETURN lpad(\"abcd\",3,\"b\"); +--------------------+ | lpad(\"abcd\",3,\"b\") | +--------------------+ | \"abc\" | +--------------------+","title":"lpad()"},{"location":"3.ngql-guide/6.functions-and-expressions/2.string/#rpad","text":"rpad() \u5728\u6307\u5b9a\u5b57\u7b26\u4e32\u7684\u5c3e\u90e8\u586b\u5145\u5b57\u7b26\u4e32\u81f3\u6307\u5b9a\u957f\u5ea6\uff0c\u5e76\u8fd4\u56de\u7ed3\u679c\u5b57\u7b26\u4e32\u3002 \u8bed\u6cd5\uff1a rpad(<string>,<count>,<letters>) string \uff1a\u6307\u5b9a\u7684\u5b57\u7b26\u4e32\u3002 count \uff1a\u6307\u5b9a\u4ece\u5934\u90e8\u5f00\u59cb\u5c06\u8981\u8fd4\u56de\u7684\u5b57\u7b26\u6570\u91cf\u3002\u5982\u679c count \u5c11\u4e8e string \u5b57\u7b26\u4e32\u7684\u957f\u5ea6\uff0c\u5219\u53ea\u8fd4\u56de string \u5b57\u7b26\u4e32 \u4ece\u524d\u5230\u540e \u7684 count \u4e2a\u5b57\u7b26\u3002 letters \uff1a\u4ece\u5c3e\u90e8\u586b\u5145\u7684\u5b57\u7b26\u4e32\u3002 \u8fd4\u56de\u7c7b\u578b\uff1astring\u3002 \u793a\u4f8b\uff1a nebula> RETURN rpad(\"abcd\",10,\"b\"); +---------------------+ | rpad(\"abcd\",10,\"b\") | +---------------------+ | \"abcdbbbbbb\" | +---------------------+ nebula> RETURN rpad(\"abcd\",3,\"b\"); +--------------------+ | rpad(\"abcd\",3,\"b\") | +--------------------+ | \"abc\" | +--------------------+","title":"rpad()"},{"location":"3.ngql-guide/6.functions-and-expressions/2.string/#substr_substring","text":"substr() \u548c substring() \u4ece\u6307\u5b9a\u5b57\u7b26\u4e32\u7684\u6307\u5b9a\u4f4d\u7f6e\u5f00\u59cb\uff08\u4e0d\u5305\u62ec\u5f00\u59cb\u4f4d\u7f6e\u7684\u5b57\u7b26\uff09\uff0c\u63d0\u53d6\u540e\u9762\u7684\u82e5\u5e72\u4e2a\u5b57\u7b26\uff0c\u7ec4\u6210\u65b0\u7684\u5b57\u7b26\u4e32\u5e76\u8fd4\u56de\u3002 \u8bed\u6cd5\uff1a substr(<string>,<pos>,<count>) \u3001 substring(<string>,<pos>,<count>) string \uff1a\u6307\u5b9a\u7684\u5b57\u7b26\u4e32\u3002 pos \uff1a\u6307\u5b9a\u5f00\u59cb\u7684\u4f4d\u7f6e\uff0c\u5373\u5b57\u7b26\u7d22\u5f15\uff0c\u6570\u636e\u7c7b\u578b\u4e3a int\u3002 count \uff1a\u6307\u5b9a\u4ece\u5f00\u59cb\u4f4d\u7f6e\u5f80\u540e\u63d0\u53d6\u7684\u5b57\u7b26\u6570\u91cf\u3002 \u8fd4\u56de\u7c7b\u578b\uff1astring\u3002","title":"substr() \u548c substring()"},{"location":"3.ngql-guide/6.functions-and-expressions/2.string/#substrsubstring","text":"\u5982\u679c pos \u4e3a 0\uff0c\u8868\u793a\u4ece\u6307\u5b9a\u5b57\u7b26\u4e32\u5934\u90e8\u5f00\u59cb\u63d0\u53d6\uff08\u5305\u62ec\u7b2c\u4e00\u4e2a\u5b57\u7b26\uff09\u3002 \u5982\u679c pos \u5927\u4e8e\u6700\u5927\u5b57\u7b26\u7d22\u5f15\uff0c\u5219\u8fd4\u56de\u7a7a\u5b57\u7b26\u4e32\u3002 \u5982\u679c pos \u662f\u8d1f\u6570\uff0c\u5219\u8fd4\u56de BAD_DATA \u3002 \u5982\u679c\u7701\u7565 count \uff0c\u5219\u8fd4\u56de\u4ece pos \u4f4d\u7f6e\u5f00\u59cb\u5230\u5b57\u7b26\u4e32\u672b\u5c3e\u7684\u5b50\u5b57\u7b26\u4e32\u3002 \u5982\u679c count \u4e3a 0\uff0c\u5219\u8fd4\u56de\u7a7a\u5b57\u7b26\u4e32\u3002 \u4f7f\u7528 NULL \u4f5c\u4e3a\u4efb\u4f55\u53c2\u6570\u4f1a\u51fa\u73b0 \u9519\u8bef \u3002 openCypher \u517c\u5bb9\u6027 \u5728 openCypher \u4e2d\uff0c\u5982\u679c\u5b57\u7b26\u4e32 a \u4e3a null \uff0c\u4f1a\u8fd4\u56de null \u3002 \u793a\u4f8b\uff1a nebula> RETURN substr(\"abcdefg\",2,4); +-----------------------+ | substr(\"abcdefg\",2,4) | +-----------------------+ | \"cdef\" | +-----------------------+ nebula> RETURN substr(\"abcdefg\",0,4); +-----------------------+ | substr(\"abcdefg\",0,4) | +-----------------------+ | \"abcd\" | +-----------------------+ nebula> RETURN substr(\"abcdefg\",2); +---------------------+ | substr(\"abcdefg\",2) | +---------------------+ | \"cdefg\" | +---------------------+","title":"substr()\u548csubstring()\u7684\u8fd4\u56de\u8bf4\u660e"},{"location":"3.ngql-guide/6.functions-and-expressions/2.string/#reverse","text":"reverse() \u9006\u5e8f\u8fd4\u56de\u6307\u5b9a\u7684\u5b57\u7b26\u4e32\u3002 \u8bed\u6cd5\uff1a reverse(<string>) string \uff1a\u6307\u5b9a\u7684\u5b57\u7b26\u4e32\u3002 \u8fd4\u56de\u7c7b\u578b\uff1astring\u3002 \u793a\u4f8b\uff1a nebula> RETURN reverse(\"abcdefg\"); +--------------------+ | reverse(\"abcdefg\") | +--------------------+ | \"gfedcba\" | +--------------------+","title":"reverse()"},{"location":"3.ngql-guide/6.functions-and-expressions/2.string/#replace","text":"replace() \u5c06\u6307\u5b9a\u5b57\u7b26\u4e32\u4e2d\u7684\u5b50\u5b57\u7b26\u4e32 a \u66ff\u6362\u4e3a\u5b57\u7b26\u4e32 b\u3002 \u8bed\u6cd5\uff1a replace(<string>,<substr_a>,<string_b>) string \uff1a\u6307\u5b9a\u7684\u5b57\u7b26\u4e32\u3002 substr_a \uff1a\u5b50\u5b57\u7b26\u4e32 a\u3002 string_b \uff1a\u5b57\u7b26\u4e32 b\u3002 \u8fd4\u56de\u7c7b\u578b\uff1astring\u3002 \u793a\u4f8b\uff1a nebula> RETURN replace(\"abcdefg\",\"cd\",\"AAAAA\"); +---------------------------------+ | replace(\"abcdefg\",\"cd\",\"AAAAA\") | +---------------------------------+ | \"abAAAAAefg\" | +---------------------------------+","title":"replace()"},{"location":"3.ngql-guide/6.functions-and-expressions/2.string/#split","text":"split() \u5c06\u5b50\u5b57\u7b26\u4e32 b \u8bc6\u522b\u4e3a\u5206\u9694\u7b26\uff0c\u5206\u9694\u6307\u5b9a\u5b57\u7b26\u4e32\uff0c\u5e76\u8fd4\u56de\u5206\u9694\u540e\u7684\u5b57\u7b26\u4e32\u5217\u8868\u3002 \u8bed\u6cd5\uff1a split(<string>,<substr>) string \uff1a\u6307\u5b9a\u7684\u5b57\u7b26\u4e32\u3002 substr \uff1a\u5b50\u5b57\u7b26\u4e32 b\u3002 \u8fd4\u56de\u7c7b\u578b\uff1alist\u3002 \u793a\u4f8b\uff1a nebula> RETURN split(\"basketballplayer\",\"a\"); +-------------------------------+ | split(\"basketballplayer\",\"a\") | +-------------------------------+ | [\"b\", \"sketb\", \"llpl\", \"yer\"] | +-------------------------------+","title":"split()"},{"location":"3.ngql-guide/6.functions-and-expressions/2.string/#concat","text":"concat() \u8fd4\u56de\u6240\u6709\u53c2\u6570\u8fde\u63a5\u6210\u7684\u5b57\u7b26\u4e32\u3002 \u8bed\u6cd5\uff1a concat(<string1>,<string2>,...) \u51fd\u6570\u81f3\u5c11\u9700\u8981\u4e24\u4e2a\u6216\u4ee5\u4e0a\u5b57\u7b26\u4e32\u53c2\u6570\u3002\u5982\u679c\u5b57\u7b26\u4e32\u53c2\u6570\u53ea\u6709\u4e00\u4e2a\uff0c\u5219\u8fd4\u56de\u8be5\u5b57\u7b26\u4e32\u53c2\u6570\u672c\u8eab\u3002 \u5982\u679c\u4efb\u4f55\u4e00\u4e2a\u7684\u5b57\u7b26\u4e32\u53c2\u6570\u4e3a NULL \uff0c\u5219 concat() \u51fd\u6570\u8fd4\u56de\u503c\u4e3a NULL \u3002 \u8fd4\u56de\u7c7b\u578b\uff1astring\u3002 \u793a\u4f8b\uff1a //\u8fde\u63a5 1\uff0c2\uff0c3 nebula> RETURN concat(\"1\",\"2\",\"3\") AS r; +-------+ | r | +-------+ | \"123\" | +-------+ //\u5b57\u7b26\u4e32\u53c2\u6570\u6709 NULL nebula> RETURN concat(\"1\",\"2\",NULL) AS r; +----------+ | r | +----------+ | __NULL__ | +----------+ nebula> GO FROM \"player100\" over follow \\ YIELD concat(src(edge), properties($^).age, properties($$).name, properties(edge).degree) AS A; +------------------------------+ | A | +------------------------------+ | \"player10042Tony Parker95\" | | \"player10042Manu Ginobili95\" | +------------------------------+","title":"concat()"},{"location":"3.ngql-guide/6.functions-and-expressions/2.string/#concat_ws","text":"concat_ws() \u8fd4\u56de\u7528\u5206\u9694\u7b26\uff08separator\uff09\u8fde\u63a5\u7684\u6240\u6709\u5b57\u7b26\u4e32\u3002 \u8bed\u6cd5\uff1a concat_ws(<separator>,<string1>,<string2>,... ) \u51fd\u6570\u81f3\u5c11\u9700\u8981\u4e24\u4e2a\u6216\u4ee5\u4e0a\u5b57\u7b26\u4e32\u53c2\u6570\u3002 \u5982\u679c\u5206\u9694\u7b26\u4e3a NULL \u65f6\uff0c concat_ws() \u51fd\u6570\u624d\u8fd4\u56de NULL \u3002 \u5982\u679c\u5206\u9694\u7b26\u4e0d\u4e3a NULL \uff0c\u5b57\u7b26\u4e32\u53c2\u6570\u53ea\u6709\u4e00\u4e2a\uff0c\u5219\u8fd4\u56de\u8be5\u5b57\u7b26\u4e32\u53c2\u6570\u672c\u8eab\u3002 \u5b57\u7b26\u4e32\u53c2\u6570\u5b58\u5728 NULL \u503c\u65f6\uff0c\u5ffd\u7565 NULL \u503c\uff0c\u7ee7\u7eed\u8fde\u63a5\u4e0b\u4e00\u4e2a\u53c2\u6570\u3002 \u793a\u4f8b\uff1a //\u5206\u9694\u7b26\u4e3a +\uff0c\u8fde\u63a5 a\uff0cb\uff0cc\u3002 nebula> RETURN concat_ws(\"+\",\"a\",\"b\",\"c\") AS r; +---------+ | r | +---------+ | \"a+b+c\" | +---------+ //\u5206\u9694\u7b26\u4e3a NULL\u3002 neubla> RETURN concat_ws(NULL,\"a\",\"b\",\"c\") AS r; +----------+ | r | +----------+ | __NULL__ | +----------+ //\u5206\u9694\u7b26\u4e3a +\uff0c\u5b57\u7b26\u4e32\u53c2\u6570\u6709 NULL\u3002 nebula> RETURN concat_ws(\"+\",\"a\",NULL,\"b\",\"c\") AS r; +---------+ | r | +---------+ | \"a+b+c\" | +---------+ //\u5206\u9694\u7b26\u4e3a+\u3002\u5b57\u7b26\u4e32\u53c2\u6570\u53ea\u6709\u4e00\u4e2a nebula> RETURN concat_ws(\"+\",\"a\") AS r; +-----+ | r | +-----+ | \"a\" | +-----+ nebula> GO FROM \"player100\" over follow \\ YIELD concat_ws(\" \",src(edge), properties($^).age, properties($$).name, properties(edge).degree) AS A; +---------------------------------+ | A | +---------------------------------+ | \"player100 42 Tony Parker 95\" | | \"player100 42 Manu Ginobili 95\" | +---------------------------------+","title":"concat_ws()"},{"location":"3.ngql-guide/6.functions-and-expressions/2.string/#extract","text":"extract() \u4ece\u6307\u5b9a\u5b57\u7b26\u4e32\u4e2d\u63d0\u53d6\u7b26\u5408\u6b63\u5219\u8868\u8fbe\u5f0f\u7684\u5b50\u5b57\u7b26\u4e32\u3002 \u8bed\u6cd5\uff1a extract(<string>,\"<regular_expression>\") string \uff1a\u6307\u5b9a\u7684\u5b57\u7b26\u4e32\u3002 regular_expression \uff1a\u6b63\u5219\u8868\u8fbe\u5f0f\u3002 \u8fd4\u56de\u7c7b\u578b\uff1alist\u3002 \u793a\u4f8b\uff1a nebula> MATCH (a:player)-[b:serve]-(c:team{name: \"Lakers\"}) \\ WHERE a.player.age > 45 \\ RETURN extract(a.player.name, \"\\\\w+\") AS result; +----------------------------+ | result | +----------------------------+ | [\"Shaquille\", \"O\", \"Neal\"] | +----------------------------+ nebula> MATCH (a:player)-[b:serve]-(c:team{name: \"Lakers\"}) \\ WHERE a.player.age > 45 \\ RETURN extract(a.player.name, \"hello\") AS result; +--------+ | result | +--------+ | [] | +--------+","title":"extract()"},{"location":"3.ngql-guide/6.functions-and-expressions/2.string/#json_extract","text":"json_extract() \u5c06\u6307\u5b9a JSON \u5b57\u7b26\u4e32\u8f6c\u6362\u4e3a map \u7c7b\u578b\u3002 \u8bed\u6cd5\uff1a extract(<string>) string \uff1a\u6307\u5b9a\u5b57\u7b26\u4e32\uff0c\u4e3a JSON \u683c\u5f0f\u3002 \u8fd4\u56de\u7c7b\u578b\uff1amap\u3002 Caution \u76ee\u524d\u4ec5\u652f\u6301 Bool\u3001Double\u3001Int\u3001String \u548c NULL \u7c7b\u578b\u6570\u636e\u3002 \u4ec5\u652f\u6301\u6df1\u5ea6\u4e3a 1 \u7684 Map \u5d4c\u5957\uff0c\u5982\u679c\u5d4c\u5957\u6df1\u5ea6\u4e3a 2 \u53ca\u4ee5\u4e0a\uff0c\u5d4c\u5957\u9879\u4fdd\u7559\u4e3a\u7a7a\u3002 \u793a\u4f8b\uff1a nebula> YIELD json_extract('{\"a\": 1, \"b\": {}, \"c\": {\"d\": true}}') AS result; +-----------------------------+ | result | +-----------------------------+ | {a: 1, b: {}, c: {d: true}} | +-----------------------------+","title":"json_extract() \u51fd\u6570"},{"location":"3.ngql-guide/6.functions-and-expressions/3.date-and-time/","text":"\u5185\u7f6e\u65e5\u671f\u65f6\u95f4\u51fd\u6570 \u00b6 NebulaGraph\u652f\u6301\u4ee5\u4e0b\u5185\u7f6e\u65e5\u671f\u65f6\u95f4\u51fd\u6570\u3002 \u51fd\u6570 \u8bf4\u660e int now() \u6839\u636e\u5f53\u524d\u7cfb\u7edf\u8fd4\u56de\u5f53\u524d\u65f6\u95f4\u6233\u3002 timestamp timestamp() \u6839\u636e\u5f53\u524d\u7cfb\u7edf\u8fd4\u56de\u5f53\u524d\u65f6\u95f4\u6233\u3002 date date() \u6839\u636e\u5f53\u524d\u7cfb\u7edf\u8fd4\u56de\u5f53\u524d\u65e5\u671f\uff08UTC \u65f6\u95f4\uff09\u3002 time time() \u6839\u636e\u5f53\u524d\u7cfb\u7edf\u8fd4\u56de\u5f53\u524d\u65f6\u95f4\uff08UTC \u65f6\u95f4\uff09\u3002 datetime datetime() \u6839\u636e\u5f53\u524d\u7cfb\u7edf\u8fd4\u56de\u5f53\u524d\u65e5\u671f\u548c\u65f6\u95f4\uff08UTC \u65f6\u95f4\uff09\u3002 map duration() \u6301\u7eed\u65f6\u95f4\u3002\u53ef\u4ee5\u7528\u4e8e\u5bf9\u6307\u5b9a\u65f6\u95f4\u8fdb\u884c\u8ba1\u7b97\u3002 \u8be6\u7ec6\u4fe1\u606f\u53c2\u89c1 \u65e5\u671f\u548c\u65f6\u95f4\u7c7b\u578b \u3002 \u793a\u4f8b \u00b6 nebula> RETURN now(), timestamp(), date(), time(), datetime(); +------------+-------------+------------+-----------------+----------------------------+ | now() | timestamp() | date() | time() | datetime() | +------------+-------------+------------+-----------------+----------------------------+ | 1640057560 | 1640057560 | 2021-12-21 | 03:32:40.351000 | 2021-12-21T03:32:40.351000 | +------------+-------------+------------+-----------------+----------------------------+","title":"\u65e5\u671f\u65f6\u95f4\u51fd\u6570"},{"location":"3.ngql-guide/6.functions-and-expressions/3.date-and-time/#_1","text":"NebulaGraph\u652f\u6301\u4ee5\u4e0b\u5185\u7f6e\u65e5\u671f\u65f6\u95f4\u51fd\u6570\u3002 \u51fd\u6570 \u8bf4\u660e int now() \u6839\u636e\u5f53\u524d\u7cfb\u7edf\u8fd4\u56de\u5f53\u524d\u65f6\u95f4\u6233\u3002 timestamp timestamp() \u6839\u636e\u5f53\u524d\u7cfb\u7edf\u8fd4\u56de\u5f53\u524d\u65f6\u95f4\u6233\u3002 date date() \u6839\u636e\u5f53\u524d\u7cfb\u7edf\u8fd4\u56de\u5f53\u524d\u65e5\u671f\uff08UTC \u65f6\u95f4\uff09\u3002 time time() \u6839\u636e\u5f53\u524d\u7cfb\u7edf\u8fd4\u56de\u5f53\u524d\u65f6\u95f4\uff08UTC \u65f6\u95f4\uff09\u3002 datetime datetime() \u6839\u636e\u5f53\u524d\u7cfb\u7edf\u8fd4\u56de\u5f53\u524d\u65e5\u671f\u548c\u65f6\u95f4\uff08UTC \u65f6\u95f4\uff09\u3002 map duration() \u6301\u7eed\u65f6\u95f4\u3002\u53ef\u4ee5\u7528\u4e8e\u5bf9\u6307\u5b9a\u65f6\u95f4\u8fdb\u884c\u8ba1\u7b97\u3002 \u8be6\u7ec6\u4fe1\u606f\u53c2\u89c1 \u65e5\u671f\u548c\u65f6\u95f4\u7c7b\u578b \u3002","title":"\u5185\u7f6e\u65e5\u671f\u65f6\u95f4\u51fd\u6570"},{"location":"3.ngql-guide/6.functions-and-expressions/3.date-and-time/#_2","text":"nebula> RETURN now(), timestamp(), date(), time(), datetime(); +------------+-------------+------------+-----------------+----------------------------+ | now() | timestamp() | date() | time() | datetime() | +------------+-------------+------------+-----------------+----------------------------+ | 1640057560 | 1640057560 | 2021-12-21 | 03:32:40.351000 | 2021-12-21T03:32:40.351000 | +------------+-------------+------------+-----------------+----------------------------+","title":"\u793a\u4f8b"},{"location":"3.ngql-guide/6.functions-and-expressions/4.schema/","text":"Schema \u76f8\u5173\u51fd\u6570 \u00b6 \u672c\u6587\u4ecb\u7ecdNebulaGraph\u652f\u6301\u7684 Schema \u76f8\u5173\u7684\u51fd\u6570\u3002 Schema \u76f8\u5173\u7684\u51fd\u6570\u5206\u4e3a\u4e24\u7c7b\uff1a \u9002\u7528\u4e8e\u539f\u751f nGQL \u8bed\u53e5 \u9002\u7528\u4e8e openCypher \u517c\u5bb9\u8bed\u53e5 \u539f\u751f nGQL \u8bed\u53e5\u9002\u7528 \u00b6 \u539f\u751f nGQL \u8bed\u53e5\u7684 YIELD \u548c WHERE \u5b50\u53e5\u4e2d\u53ef\u4ee5\u4f7f\u7528\u5982\u4e0b\u4ecb\u7ecd\u7684\u51fd\u6570\u3002 Note \u7531\u4e8e vertex\u3001edge\u3001vertices\u3001edges\u3001path \u5c5e\u4e8e\u5173\u952e\u5b57\uff0c\u4f7f\u7528\u65f6\u9700\u8981\u7528 AS <alias> \u8bbe\u7f6e\u522b\u540d\u624d\u80fd\u6b63\u5e38\u4f7f\u7528\u3002\u4f8b\u5982 GO FROM \"player100\" OVER follow YIELD edge AS e; \u3002 id(vertex) \u00b6 id(vertex) \u8fd4\u56de\u70b9 ID\u3002 \u8bed\u6cd5\uff1a id(vertex) \u8fd4\u56de\u7c7b\u578b\uff1a\u548c\u70b9 ID \u7684\u7c7b\u578b\u4fdd\u6301\u4e00\u81f4\u3002 \u793a\u4f8b\uff1a nebula> LOOKUP ON player WHERE player.age > 45 YIELD id(vertex); +-------------+ | id(VERTEX) | +-------------+ | \"player144\" | | \"player140\" | +-------------+ properties(vertex) \u00b6 properties(vertex) \u8fd4\u56de\u70b9\u7684\u6240\u6709\u5c5e\u6027\u3002 \u8bed\u6cd5\uff1a properties(vertex) \u8fd4\u56de\u7c7b\u578b\uff1amap\u3002 \u793a\u4f8b\uff1a nebula> LOOKUP ON player WHERE player.age > 45 \\ YIELD properties(vertex); +-------------------------------------+ | properties(VERTEX) | +-------------------------------------+ | {age: 47, name: \"Shaquille O'Neal\"} | | {age: 46, name: \"Grant Hill\"} | +-------------------------------------+ \u7528\u6237\u4e5f\u53ef\u4ee5\u4f7f\u7528\u5c5e\u6027\u5f15\u7528\u7b26\uff08 $^ \u548c $$ \uff09\u66ff\u4ee3\u51fd\u6570 properties() \u4e2d\u7684 vertex \u53c2\u6570\u6765\u83b7\u53d6\u70b9\u7684\u6240\u6709\u5c5e\u6027\u3002 $^ \u8868\u793a\u63a2\u7d22\u5f00\u59cb\u65f6\u7684\u70b9\u6570\u636e\u3002\u4f8b\u5982 GO FROM \"player100\" OVER follow reversely YIELD properties($^) \u4e2d\uff0c $^ \u6307 player100 \u8fd9\u4e2a\u70b9\u3002 $$ \u8868\u793a\u63a2\u7d22\u7ed3\u675f\u7684\u7ec8\u70b9\u6570\u636e\u3002 properties($^) \u548c properties($$) \u4e00\u822c\u7528\u4e8e GO \u8bed\u53e5\u4e2d\u3002\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u89c1 \u5c5e\u6027\u5f15\u7528\u7b26 \u3002 Caution \u7528\u6237\u53ef\u4ee5\u901a\u8fc7 properties().<property_name> \u6765\u83b7\u53d6\u70b9\u7684\u6307\u5b9a\u5c5e\u6027\u3002\u4f46\u662f\u4e0d\u5efa\u8bae\u4f7f\u7528\u8fd9\u79cd\u65b9\u5f0f\u83b7\u53d6\u6307\u5b9a\u5c5e\u6027\uff0c\u56e0\u4e3a properties() \u51fd\u6570\u8fd4\u56de\u6240\u6709\u5c5e\u6027\uff0c\u8fd9\u6837\u4f1a\u964d\u4f4e\u67e5\u8be2\u6027\u80fd\u3002 properties(edge) \u00b6 properties(edge) \u8fd4\u56de\u8fb9\u7684\u6240\u6709\u5c5e\u6027\u3002 \u8bed\u6cd5\uff1a properties(edge) \u8fd4\u56de\u7c7b\u578b\uff1amap\u3002 \u793a\u4f8b\uff1a nebula> GO FROM \"player100\" OVER follow \\ YIELD properties(edge); +------------------+ | properties(EDGE) | +------------------+ | {degree: 95} | | {degree: 95} | +------------------+ Warning \u7528\u6237\u53ef\u4ee5\u901a\u8fc7 properties(edge).<property_name> \u6765\u83b7\u53d6\u8fb9\u7684\u6307\u5b9a\u5c5e\u6027\u3002\u4f46\u662f\u4e0d\u5efa\u8bae\u4f7f\u7528\u8fd9\u79cd\u65b9\u5f0f\u83b7\u53d6\u6307\u5b9a\u5c5e\u6027\uff0c\u56e0\u4e3a properties(edge) \u51fd\u6570\u8fd4\u56de\u8fb9\u7684\u6240\u6709\u5c5e\u6027\uff0c\u8fd9\u6837\u4f1a\u964d\u4f4e\u67e5\u8be2\u6027\u80fd\u3002 type(edge) \u00b6 type(edge) \u8fd4\u56de\u8fb9\u7684 Edge type\u3002 \u8bed\u6cd5\uff1a type(edge) \u8fd4\u56de\u7c7b\u578b\uff1astring\u3002 \u793a\u4f8b\uff1a nebula> GO FROM \"player100\" OVER follow \\ YIELD src(edge), dst(edge), type(edge), rank(edge); +-------------+-------------+------------+------------+ | src(EDGE) | dst(EDGE) | type(EDGE) | rank(EDGE) | +-------------+-------------+------------+------------+ | \"player100\" | \"player101\" | \"follow\" | 0 | | \"player100\" | \"player125\" | \"follow\" | 0 | +-------------+-------------+------------+------------+ src(edge) \u00b6 src(edge) \u8fd4\u56de\u8fb9\u7684\u8d77\u59cb\u70b9 ID\u3002 \u8bed\u6cd5\uff1a src(edge) \u8fd4\u56de\u7c7b\u578b\uff1a\u548c\u70b9 ID \u7684\u7c7b\u578b\u4fdd\u6301\u4e00\u81f4\u3002 \u793a\u4f8b\uff1a nebula> GO FROM \"player100\" OVER follow \\ YIELD src(edge), dst(edge); +-------------+-------------+ | src(EDGE) | dst(EDGE) | +-------------+-------------+ | \"player100\" | \"player101\" | | \"player100\" | \"player125\" | +-------------+-------------+ Note src(edge) \u548c properties( $^ ) \u67e5\u627e\u8d77\u59cb\u70b9\u7684\u8bed\u4e49\u4e0d\u540c\u3002src(edge) \u59cb\u7ec8\u8868\u793a\u56fe\u6570\u636e\u5e93\u4e2d\u8fb9\u7684\u8d77\u59cb\u70b9 ID\uff0c\u800c properties( $^ ) \u8868\u793a\u63a2\u7d22\u5f00\u59cb\u65f6\u7684\u70b9\u6570\u636e\uff0c\u4f8b\u5982\u793a\u4f8b\u4e2d GO FROM \"player100\" \u4e2d player100 \u8fd9\u4e2a\u70b9\u7684\u6570\u636e\u3002 dst(edge) \u00b6 dst(edge) \u8fd4\u56de\u8fb9\u7684\u76ee\u7684\u70b9 ID\u3002 \u8bed\u6cd5\uff1a dst(edge) \u8fd4\u56de\u7c7b\u578b\uff1a\u548c\u70b9 ID \u7684\u7c7b\u578b\u4fdd\u6301\u4e00\u81f4\u3002 \u793a\u4f8b\uff1a nebula> GO FROM \"player100\" OVER follow \\ YIELD src(edge), dst(edge); +-------------+-------------+ | src(EDGE) | dst(EDGE) | +-------------+-------------+ | \"player100\" | \"player101\" | | \"player100\" | \"player125\" | +-------------+-------------+ Note dst(edge) \u59cb\u7ec8\u8868\u793a\u56fe\u6570\u636e\u5e93\u4e2d\u8fb9\u7684\u76ee\u7684\u70b9 ID\u3002 rank(edge) \u00b6 rank(edge) \u8fd4\u56de\u8fb9\u7684 rank\u3002 \u8bed\u6cd5\uff1a rank(edge) \u8fd4\u56de\u7c7b\u578b\uff1aint\u3002 \u793a\u4f8b\uff1a nebula> GO FROM \"player100\" OVER follow \\ YIELD src(edge), dst(edge), rank(edge); +-------------+-------------+------------+ | src(EDGE) | dst(EDGE) | rank(EDGE) | +-------------+-------------+------------+ | \"player100\" | \"player101\" | 0 | | \"player100\" | \"player125\" | 0 | +-------------+-------------+------------+ vertex \u00b6 vertex \u8fd4\u56de\u70b9\u7684\u4fe1\u606f\u3002\u5305\u62ec\u70b9 ID\u3001Tag\u3001\u5c5e\u6027\u548c\u503c\u3002\u9700\u8981\u7528 AS <alias> \u8bbe\u7f6e\u522b\u540d\u3002 \u8bed\u6cd5\uff1a vertex \u793a\u4f8b\uff1a nebula> LOOKUP ON player WHERE player.age > 45 YIELD vertex AS v; +----------------------------------------------------------+ | v | +----------------------------------------------------------+ | (\"player144\" :player{age: 47, name: \"Shaquille O'Neal\"}) | | (\"player140\" :player{age: 46, name: \"Grant Hill\"}) | +----------------------------------------------------------+ edge \u00b6 edge \u8fd4\u56de\u8fb9\u7684\u4fe1\u606f\u3002\u5305\u62ec Edge type\u3001\u8d77\u59cb\u70b9 ID\u3001\u76ee\u7684\u70b9 ID\u3001rank\u3001\u5c5e\u6027\u548c\u503c\u3002\u9700\u8981\u7528 AS <alias> \u8bbe\u7f6e\u522b\u540d\u3002 \u8bed\u6cd5\uff1a edge \u793a\u4f8b\uff1a nebula> GO FROM \"player100\" OVER follow YIELD edge AS e; +----------------------------------------------------+ | e | +----------------------------------------------------+ | [:follow \"player100\"->\"player101\" @0 {degree: 95}] | | [:follow \"player100\"->\"player125\" @0 {degree: 95}] | +----------------------------------------------------+ vertices \u00b6 vertices \u8fd4\u56de\u5b50\u56fe\u4e2d\u7684\u70b9\u7684\u4fe1\u606f\u3002\u8be6\u60c5\u53c2\u89c1 GET SUBGRAPH \u3002 edges \u00b6 edges \u8fd4\u56de\u5b50\u56fe\u4e2d\u7684\u8fb9\u7684\u4fe1\u606f\u3002\u8be6\u60c5\u53c2\u89c1 GET SUBGRAPH \u3002 path \u00b6 path \u8fd4\u56de\u8def\u5f84\u4fe1\u606f\u3002\u8be6\u60c5\u53c2\u89c1 FIND PATH \u3002 openCypher \u517c\u5bb9\u8bed\u53e5\u9002\u7528 \u00b6 openCypher \u517c\u5bb9\u8bed\u53e5\u7684 RETURN \u548c WHERE \u5b50\u53e5\u4e2d\u53ef\u4ee5\u4f7f\u7528\u5982\u4e0b\u4ecb\u7ecd\u7684\u51fd\u6570\u3002 id() \u00b6 id() \u8fd4\u56de\u70b9 ID\u3002 \u8bed\u6cd5\uff1a id(<vertex>) \u8fd4\u56de\u7c7b\u578b\uff1a\u548c\u70b9 ID \u7684\u7c7b\u578b\u4fdd\u6301\u4e00\u81f4\u3002 \u793a\u4f8b\uff1a nebula> MATCH (v:player) RETURN id(v); +-------------+ | id(v) | +-------------+ | \"player129\" | | \"player115\" | | \"player106\" | | \"player102\" | ... tags() \u548clabels() \u00b6 tags() \u548clabels() \u8fd4\u56de\u70b9\u7684 Tag\u3002 \u8bed\u6cd5\uff1a tags(<vertex>) \u3001 labels(<vertex>) \u8fd4\u56de\u7c7b\u578b\uff1alist\u3002 \u793a\u4f8b\uff1a nebula> MATCH (v) WHERE id(v) == \"player100\" \\ RETURN tags(v); +------------+ | tags(v) | +------------+ | [\"player\"] | +------------+ properties() \u00b6 properties() \u8fd4\u56de\u70b9\u6216\u8fb9\u7684\u6240\u6709\u5c5e\u6027\u3002 \u8bed\u6cd5\uff1a properties(<vertex_or_edge>) \u8fd4\u56de\u7c7b\u578b\uff1amap\u3002 \u793a\u4f8b\uff1a nebula> MATCH (v:player)-[e:follow]-() RETURN properties(v),properties(e); +---------------------------------------+---------------+ | properties(v) | properties(e) | +---------------------------------------+---------------+ | {age: 31, name: \"Stephen Curry\"} | {degree: 90} | | {age: 47, name: \"Shaquille O'Neal\"} | {degree: 100} | | {age: 34, name: \"LeBron James\"} | {degree: 13} | ... type() \u00b6 type() \u8fd4\u56de\u8fb9\u7684 Edge type\u3002 \u8bed\u6cd5\uff1a type(<edge>) \u8fd4\u56de\u7c7b\u578b\uff1astring\u3002 \u793a\u4f8b\uff1a nebula> MATCH (v:player{name:\"Tim Duncan\"})-[e]->() \\ RETURN type(e); +----------+ | type(e) | +----------+ | \"serve\" | | \"follow\" | | \"follow\" | +----------+ typeid() \u00b6 typeid() \u8fd4\u56de\u8fb9\u7684 Edge type \u7684\u5185\u90e8 ID \u503c\uff0c\u53ef\u4ee5\u7528\u6b63\u8d1f\u6765\u5224\u65ad\u65b9\u5411\u3002 \u8bed\u6cd5\uff1a typeid(<edge>) \u8fd4\u56de\u7c7b\u578b\uff1aint\u3002 \u793a\u4f8b\uff1a nebula> MATCH (v:player)-[e:follow]-(v2) RETURN e,typeid(e), \\ CASE WHEN typeid(e) > 0 \\ THEN \"\u6b63\u5411\" ELSE \"\u53cd\u5411\" END AS direction \\ LIMIT 5; +----------------------------------------------------+-----------+-----------+ | e | typeid(e) | direction | +----------------------------------------------------+-----------+-----------+ | [:follow \"player127\"->\"player114\" @0 {degree: 90}] | 5 | \"\u6b63\u5411\" | | [:follow \"player127\"->\"player148\" @0 {degree: 70}] | 5 | \"\u6b63\u5411\" | | [:follow \"player148\"->\"player127\" @0 {degree: 80}] | -5 | \"\u53cd\u5411\" | | [:follow \"player147\"->\"player136\" @0 {degree: 90}] | 5 | \"\u6b63\u5411\" | | [:follow \"player136\"->\"player147\" @0 {degree: 90}] | -5 | \"\u53cd\u5411\" | +----------------------------------------------------+-----------+-----------+ src() \u00b6 src() \u8fd4\u56de\u8fb9\u7684\u8d77\u59cb\u70b9 ID\u3002 \u8bed\u6cd5\uff1a src(<edge>) \u8fd4\u56de\u7c7b\u578b\uff1a\u548c\u70b9 ID \u7684\u7c7b\u578b\u4fdd\u6301\u4e00\u81f4\u3002 \u793a\u4f8b\uff1a nebula> MATCH ()-[e]->(v:player{name:\"Tim Duncan\"}) \\ RETURN src(e); +-------------+ | src(e) | +-------------+ | \"player125\" | | \"player113\" | | \"player102\" | ... dst() \u00b6 dst() \u8fd4\u56de\u8fb9\u7684\u76ee\u7684\u70b9 ID\u3002 \u8bed\u6cd5\uff1a dst(<edge>) \u8fd4\u56de\u7c7b\u578b\uff1a\u548c\u70b9 ID \u7684\u7c7b\u578b\u4fdd\u6301\u4e00\u81f4\u3002 \u793a\u4f8b\uff1a nebula> MATCH (v:player{name:\"Tim Duncan\"})-[e]->() \\ RETURN dst(e); +-------------+ | dst(e) | +-------------+ | \"team204\" | | \"player101\" | | \"player125\" | +-------------+ startNode() \u00b6 startNode() \u83b7\u53d6\u4e00\u6761\u8def\u5f84\u5e76\u8fd4\u56de\u5b83\u7684\u8d77\u59cb\u70b9\u4fe1\u606f\uff0c\u5305\u62ec\u70b9 ID\u3001Tag\u3001\u5c5e\u6027\u548c\u503c\u3002 \u8bed\u6cd5\uff1a startNode(<path>) \u793a\u4f8b\uff1a nebula> MATCH p = (a :player {name : \"Tim Duncan\"})-[r:serve]-(t) \\ RETURN startNode(p); +----------------------------------------------------+ | startNode(p) | +----------------------------------------------------+ | (\"player100\" :player{age: 42, name: \"Tim Duncan\"}) | +----------------------------------------------------+ endNode() \u00b6 endNode() \u83b7\u53d6\u4e00\u6761\u8def\u5f84\u5e76\u8fd4\u56de\u5b83\u7684\u76ee\u7684\u70b9\u4fe1\u606f\uff0c\u5305\u62ec\u70b9 ID\u3001Tag\u3001\u5c5e\u6027\u548c\u503c\u3002 \u8bed\u6cd5\uff1a endNode(<path>) \u793a\u4f8b\uff1a nebula> MATCH p = (a :player {name : \"Tim Duncan\"})-[r:serve]-(t) \\ RETURN endNode(p); +----------------------------------+ | endNode(p) | +----------------------------------+ | (\"team204\" :team{name: \"Spurs\"}) | +----------------------------------+ rank() \u00b6 rank() \u8fd4\u56de\u8fb9\u7684 rank\u3002 \u8bed\u6cd5\uff1a rank(<edge>) \u8fd4\u56de\u7c7b\u578b\uff1aint\u3002 \u793a\u4f8b\uff1a nebula> MATCH (v:player{name:\"Tim Duncan\"})-[e]->() \\ RETURN rank(e); +---------+ | rank(e) | +---------+ | 0 | | 0 | | 0 | +---------+","title":"Schema \u51fd\u6570"},{"location":"3.ngql-guide/6.functions-and-expressions/4.schema/#schema","text":"\u672c\u6587\u4ecb\u7ecdNebulaGraph\u652f\u6301\u7684 Schema \u76f8\u5173\u7684\u51fd\u6570\u3002 Schema \u76f8\u5173\u7684\u51fd\u6570\u5206\u4e3a\u4e24\u7c7b\uff1a \u9002\u7528\u4e8e\u539f\u751f nGQL \u8bed\u53e5 \u9002\u7528\u4e8e openCypher \u517c\u5bb9\u8bed\u53e5","title":"Schema \u76f8\u5173\u51fd\u6570"},{"location":"3.ngql-guide/6.functions-and-expressions/4.schema/#ngql","text":"\u539f\u751f nGQL \u8bed\u53e5\u7684 YIELD \u548c WHERE \u5b50\u53e5\u4e2d\u53ef\u4ee5\u4f7f\u7528\u5982\u4e0b\u4ecb\u7ecd\u7684\u51fd\u6570\u3002 Note \u7531\u4e8e vertex\u3001edge\u3001vertices\u3001edges\u3001path \u5c5e\u4e8e\u5173\u952e\u5b57\uff0c\u4f7f\u7528\u65f6\u9700\u8981\u7528 AS <alias> \u8bbe\u7f6e\u522b\u540d\u624d\u80fd\u6b63\u5e38\u4f7f\u7528\u3002\u4f8b\u5982 GO FROM \"player100\" OVER follow YIELD edge AS e; \u3002","title":"\u539f\u751f nGQL \u8bed\u53e5\u9002\u7528"},{"location":"3.ngql-guide/6.functions-and-expressions/4.schema/#idvertex","text":"id(vertex) \u8fd4\u56de\u70b9 ID\u3002 \u8bed\u6cd5\uff1a id(vertex) \u8fd4\u56de\u7c7b\u578b\uff1a\u548c\u70b9 ID \u7684\u7c7b\u578b\u4fdd\u6301\u4e00\u81f4\u3002 \u793a\u4f8b\uff1a nebula> LOOKUP ON player WHERE player.age > 45 YIELD id(vertex); +-------------+ | id(VERTEX) | +-------------+ | \"player144\" | | \"player140\" | +-------------+","title":"id(vertex)"},{"location":"3.ngql-guide/6.functions-and-expressions/4.schema/#propertiesvertex","text":"properties(vertex) \u8fd4\u56de\u70b9\u7684\u6240\u6709\u5c5e\u6027\u3002 \u8bed\u6cd5\uff1a properties(vertex) \u8fd4\u56de\u7c7b\u578b\uff1amap\u3002 \u793a\u4f8b\uff1a nebula> LOOKUP ON player WHERE player.age > 45 \\ YIELD properties(vertex); +-------------------------------------+ | properties(VERTEX) | +-------------------------------------+ | {age: 47, name: \"Shaquille O'Neal\"} | | {age: 46, name: \"Grant Hill\"} | +-------------------------------------+ \u7528\u6237\u4e5f\u53ef\u4ee5\u4f7f\u7528\u5c5e\u6027\u5f15\u7528\u7b26\uff08 $^ \u548c $$ \uff09\u66ff\u4ee3\u51fd\u6570 properties() \u4e2d\u7684 vertex \u53c2\u6570\u6765\u83b7\u53d6\u70b9\u7684\u6240\u6709\u5c5e\u6027\u3002 $^ \u8868\u793a\u63a2\u7d22\u5f00\u59cb\u65f6\u7684\u70b9\u6570\u636e\u3002\u4f8b\u5982 GO FROM \"player100\" OVER follow reversely YIELD properties($^) \u4e2d\uff0c $^ \u6307 player100 \u8fd9\u4e2a\u70b9\u3002 $$ \u8868\u793a\u63a2\u7d22\u7ed3\u675f\u7684\u7ec8\u70b9\u6570\u636e\u3002 properties($^) \u548c properties($$) \u4e00\u822c\u7528\u4e8e GO \u8bed\u53e5\u4e2d\u3002\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u89c1 \u5c5e\u6027\u5f15\u7528\u7b26 \u3002 Caution \u7528\u6237\u53ef\u4ee5\u901a\u8fc7 properties().<property_name> \u6765\u83b7\u53d6\u70b9\u7684\u6307\u5b9a\u5c5e\u6027\u3002\u4f46\u662f\u4e0d\u5efa\u8bae\u4f7f\u7528\u8fd9\u79cd\u65b9\u5f0f\u83b7\u53d6\u6307\u5b9a\u5c5e\u6027\uff0c\u56e0\u4e3a properties() \u51fd\u6570\u8fd4\u56de\u6240\u6709\u5c5e\u6027\uff0c\u8fd9\u6837\u4f1a\u964d\u4f4e\u67e5\u8be2\u6027\u80fd\u3002","title":"properties(vertex)"},{"location":"3.ngql-guide/6.functions-and-expressions/4.schema/#propertiesedge","text":"properties(edge) \u8fd4\u56de\u8fb9\u7684\u6240\u6709\u5c5e\u6027\u3002 \u8bed\u6cd5\uff1a properties(edge) \u8fd4\u56de\u7c7b\u578b\uff1amap\u3002 \u793a\u4f8b\uff1a nebula> GO FROM \"player100\" OVER follow \\ YIELD properties(edge); +------------------+ | properties(EDGE) | +------------------+ | {degree: 95} | | {degree: 95} | +------------------+ Warning \u7528\u6237\u53ef\u4ee5\u901a\u8fc7 properties(edge).<property_name> \u6765\u83b7\u53d6\u8fb9\u7684\u6307\u5b9a\u5c5e\u6027\u3002\u4f46\u662f\u4e0d\u5efa\u8bae\u4f7f\u7528\u8fd9\u79cd\u65b9\u5f0f\u83b7\u53d6\u6307\u5b9a\u5c5e\u6027\uff0c\u56e0\u4e3a properties(edge) \u51fd\u6570\u8fd4\u56de\u8fb9\u7684\u6240\u6709\u5c5e\u6027\uff0c\u8fd9\u6837\u4f1a\u964d\u4f4e\u67e5\u8be2\u6027\u80fd\u3002","title":"properties(edge)"},{"location":"3.ngql-guide/6.functions-and-expressions/4.schema/#typeedge","text":"type(edge) \u8fd4\u56de\u8fb9\u7684 Edge type\u3002 \u8bed\u6cd5\uff1a type(edge) \u8fd4\u56de\u7c7b\u578b\uff1astring\u3002 \u793a\u4f8b\uff1a nebula> GO FROM \"player100\" OVER follow \\ YIELD src(edge), dst(edge), type(edge), rank(edge); +-------------+-------------+------------+------------+ | src(EDGE) | dst(EDGE) | type(EDGE) | rank(EDGE) | +-------------+-------------+------------+------------+ | \"player100\" | \"player101\" | \"follow\" | 0 | | \"player100\" | \"player125\" | \"follow\" | 0 | +-------------+-------------+------------+------------+","title":"type(edge)"},{"location":"3.ngql-guide/6.functions-and-expressions/4.schema/#srcedge","text":"src(edge) \u8fd4\u56de\u8fb9\u7684\u8d77\u59cb\u70b9 ID\u3002 \u8bed\u6cd5\uff1a src(edge) \u8fd4\u56de\u7c7b\u578b\uff1a\u548c\u70b9 ID \u7684\u7c7b\u578b\u4fdd\u6301\u4e00\u81f4\u3002 \u793a\u4f8b\uff1a nebula> GO FROM \"player100\" OVER follow \\ YIELD src(edge), dst(edge); +-------------+-------------+ | src(EDGE) | dst(EDGE) | +-------------+-------------+ | \"player100\" | \"player101\" | | \"player100\" | \"player125\" | +-------------+-------------+ Note src(edge) \u548c properties( $^ ) \u67e5\u627e\u8d77\u59cb\u70b9\u7684\u8bed\u4e49\u4e0d\u540c\u3002src(edge) \u59cb\u7ec8\u8868\u793a\u56fe\u6570\u636e\u5e93\u4e2d\u8fb9\u7684\u8d77\u59cb\u70b9 ID\uff0c\u800c properties( $^ ) \u8868\u793a\u63a2\u7d22\u5f00\u59cb\u65f6\u7684\u70b9\u6570\u636e\uff0c\u4f8b\u5982\u793a\u4f8b\u4e2d GO FROM \"player100\" \u4e2d player100 \u8fd9\u4e2a\u70b9\u7684\u6570\u636e\u3002","title":"src(edge)"},{"location":"3.ngql-guide/6.functions-and-expressions/4.schema/#dstedge","text":"dst(edge) \u8fd4\u56de\u8fb9\u7684\u76ee\u7684\u70b9 ID\u3002 \u8bed\u6cd5\uff1a dst(edge) \u8fd4\u56de\u7c7b\u578b\uff1a\u548c\u70b9 ID \u7684\u7c7b\u578b\u4fdd\u6301\u4e00\u81f4\u3002 \u793a\u4f8b\uff1a nebula> GO FROM \"player100\" OVER follow \\ YIELD src(edge), dst(edge); +-------------+-------------+ | src(EDGE) | dst(EDGE) | +-------------+-------------+ | \"player100\" | \"player101\" | | \"player100\" | \"player125\" | +-------------+-------------+ Note dst(edge) \u59cb\u7ec8\u8868\u793a\u56fe\u6570\u636e\u5e93\u4e2d\u8fb9\u7684\u76ee\u7684\u70b9 ID\u3002","title":"dst(edge)"},{"location":"3.ngql-guide/6.functions-and-expressions/4.schema/#rankedge","text":"rank(edge) \u8fd4\u56de\u8fb9\u7684 rank\u3002 \u8bed\u6cd5\uff1a rank(edge) \u8fd4\u56de\u7c7b\u578b\uff1aint\u3002 \u793a\u4f8b\uff1a nebula> GO FROM \"player100\" OVER follow \\ YIELD src(edge), dst(edge), rank(edge); +-------------+-------------+------------+ | src(EDGE) | dst(EDGE) | rank(EDGE) | +-------------+-------------+------------+ | \"player100\" | \"player101\" | 0 | | \"player100\" | \"player125\" | 0 | +-------------+-------------+------------+","title":"rank(edge)"},{"location":"3.ngql-guide/6.functions-and-expressions/4.schema/#vertex","text":"vertex \u8fd4\u56de\u70b9\u7684\u4fe1\u606f\u3002\u5305\u62ec\u70b9 ID\u3001Tag\u3001\u5c5e\u6027\u548c\u503c\u3002\u9700\u8981\u7528 AS <alias> \u8bbe\u7f6e\u522b\u540d\u3002 \u8bed\u6cd5\uff1a vertex \u793a\u4f8b\uff1a nebula> LOOKUP ON player WHERE player.age > 45 YIELD vertex AS v; +----------------------------------------------------------+ | v | +----------------------------------------------------------+ | (\"player144\" :player{age: 47, name: \"Shaquille O'Neal\"}) | | (\"player140\" :player{age: 46, name: \"Grant Hill\"}) | +----------------------------------------------------------+","title":"vertex"},{"location":"3.ngql-guide/6.functions-and-expressions/4.schema/#edge","text":"edge \u8fd4\u56de\u8fb9\u7684\u4fe1\u606f\u3002\u5305\u62ec Edge type\u3001\u8d77\u59cb\u70b9 ID\u3001\u76ee\u7684\u70b9 ID\u3001rank\u3001\u5c5e\u6027\u548c\u503c\u3002\u9700\u8981\u7528 AS <alias> \u8bbe\u7f6e\u522b\u540d\u3002 \u8bed\u6cd5\uff1a edge \u793a\u4f8b\uff1a nebula> GO FROM \"player100\" OVER follow YIELD edge AS e; +----------------------------------------------------+ | e | +----------------------------------------------------+ | [:follow \"player100\"->\"player101\" @0 {degree: 95}] | | [:follow \"player100\"->\"player125\" @0 {degree: 95}] | +----------------------------------------------------+","title":"edge"},{"location":"3.ngql-guide/6.functions-and-expressions/4.schema/#vertices","text":"vertices \u8fd4\u56de\u5b50\u56fe\u4e2d\u7684\u70b9\u7684\u4fe1\u606f\u3002\u8be6\u60c5\u53c2\u89c1 GET SUBGRAPH \u3002","title":"vertices"},{"location":"3.ngql-guide/6.functions-and-expressions/4.schema/#edges","text":"edges \u8fd4\u56de\u5b50\u56fe\u4e2d\u7684\u8fb9\u7684\u4fe1\u606f\u3002\u8be6\u60c5\u53c2\u89c1 GET SUBGRAPH \u3002","title":"edges"},{"location":"3.ngql-guide/6.functions-and-expressions/4.schema/#path","text":"path \u8fd4\u56de\u8def\u5f84\u4fe1\u606f\u3002\u8be6\u60c5\u53c2\u89c1 FIND PATH \u3002","title":"path"},{"location":"3.ngql-guide/6.functions-and-expressions/4.schema/#opencypher","text":"openCypher \u517c\u5bb9\u8bed\u53e5\u7684 RETURN \u548c WHERE \u5b50\u53e5\u4e2d\u53ef\u4ee5\u4f7f\u7528\u5982\u4e0b\u4ecb\u7ecd\u7684\u51fd\u6570\u3002","title":"openCypher \u517c\u5bb9\u8bed\u53e5\u9002\u7528"},{"location":"3.ngql-guide/6.functions-and-expressions/4.schema/#id","text":"id() \u8fd4\u56de\u70b9 ID\u3002 \u8bed\u6cd5\uff1a id(<vertex>) \u8fd4\u56de\u7c7b\u578b\uff1a\u548c\u70b9 ID \u7684\u7c7b\u578b\u4fdd\u6301\u4e00\u81f4\u3002 \u793a\u4f8b\uff1a nebula> MATCH (v:player) RETURN id(v); +-------------+ | id(v) | +-------------+ | \"player129\" | | \"player115\" | | \"player106\" | | \"player102\" | ...","title":"id()"},{"location":"3.ngql-guide/6.functions-and-expressions/4.schema/#tags_labels","text":"tags() \u548clabels() \u8fd4\u56de\u70b9\u7684 Tag\u3002 \u8bed\u6cd5\uff1a tags(<vertex>) \u3001 labels(<vertex>) \u8fd4\u56de\u7c7b\u578b\uff1alist\u3002 \u793a\u4f8b\uff1a nebula> MATCH (v) WHERE id(v) == \"player100\" \\ RETURN tags(v); +------------+ | tags(v) | +------------+ | [\"player\"] | +------------+","title":"tags() \u548clabels()"},{"location":"3.ngql-guide/6.functions-and-expressions/4.schema/#properties","text":"properties() \u8fd4\u56de\u70b9\u6216\u8fb9\u7684\u6240\u6709\u5c5e\u6027\u3002 \u8bed\u6cd5\uff1a properties(<vertex_or_edge>) \u8fd4\u56de\u7c7b\u578b\uff1amap\u3002 \u793a\u4f8b\uff1a nebula> MATCH (v:player)-[e:follow]-() RETURN properties(v),properties(e); +---------------------------------------+---------------+ | properties(v) | properties(e) | +---------------------------------------+---------------+ | {age: 31, name: \"Stephen Curry\"} | {degree: 90} | | {age: 47, name: \"Shaquille O'Neal\"} | {degree: 100} | | {age: 34, name: \"LeBron James\"} | {degree: 13} | ...","title":"properties()"},{"location":"3.ngql-guide/6.functions-and-expressions/4.schema/#type","text":"type() \u8fd4\u56de\u8fb9\u7684 Edge type\u3002 \u8bed\u6cd5\uff1a type(<edge>) \u8fd4\u56de\u7c7b\u578b\uff1astring\u3002 \u793a\u4f8b\uff1a nebula> MATCH (v:player{name:\"Tim Duncan\"})-[e]->() \\ RETURN type(e); +----------+ | type(e) | +----------+ | \"serve\" | | \"follow\" | | \"follow\" | +----------+","title":"type()"},{"location":"3.ngql-guide/6.functions-and-expressions/4.schema/#typeid","text":"typeid() \u8fd4\u56de\u8fb9\u7684 Edge type \u7684\u5185\u90e8 ID \u503c\uff0c\u53ef\u4ee5\u7528\u6b63\u8d1f\u6765\u5224\u65ad\u65b9\u5411\u3002 \u8bed\u6cd5\uff1a typeid(<edge>) \u8fd4\u56de\u7c7b\u578b\uff1aint\u3002 \u793a\u4f8b\uff1a nebula> MATCH (v:player)-[e:follow]-(v2) RETURN e,typeid(e), \\ CASE WHEN typeid(e) > 0 \\ THEN \"\u6b63\u5411\" ELSE \"\u53cd\u5411\" END AS direction \\ LIMIT 5; +----------------------------------------------------+-----------+-----------+ | e | typeid(e) | direction | +----------------------------------------------------+-----------+-----------+ | [:follow \"player127\"->\"player114\" @0 {degree: 90}] | 5 | \"\u6b63\u5411\" | | [:follow \"player127\"->\"player148\" @0 {degree: 70}] | 5 | \"\u6b63\u5411\" | | [:follow \"player148\"->\"player127\" @0 {degree: 80}] | -5 | \"\u53cd\u5411\" | | [:follow \"player147\"->\"player136\" @0 {degree: 90}] | 5 | \"\u6b63\u5411\" | | [:follow \"player136\"->\"player147\" @0 {degree: 90}] | -5 | \"\u53cd\u5411\" | +----------------------------------------------------+-----------+-----------+","title":"typeid()"},{"location":"3.ngql-guide/6.functions-and-expressions/4.schema/#src","text":"src() \u8fd4\u56de\u8fb9\u7684\u8d77\u59cb\u70b9 ID\u3002 \u8bed\u6cd5\uff1a src(<edge>) \u8fd4\u56de\u7c7b\u578b\uff1a\u548c\u70b9 ID \u7684\u7c7b\u578b\u4fdd\u6301\u4e00\u81f4\u3002 \u793a\u4f8b\uff1a nebula> MATCH ()-[e]->(v:player{name:\"Tim Duncan\"}) \\ RETURN src(e); +-------------+ | src(e) | +-------------+ | \"player125\" | | \"player113\" | | \"player102\" | ...","title":"src()"},{"location":"3.ngql-guide/6.functions-and-expressions/4.schema/#dst","text":"dst() \u8fd4\u56de\u8fb9\u7684\u76ee\u7684\u70b9 ID\u3002 \u8bed\u6cd5\uff1a dst(<edge>) \u8fd4\u56de\u7c7b\u578b\uff1a\u548c\u70b9 ID \u7684\u7c7b\u578b\u4fdd\u6301\u4e00\u81f4\u3002 \u793a\u4f8b\uff1a nebula> MATCH (v:player{name:\"Tim Duncan\"})-[e]->() \\ RETURN dst(e); +-------------+ | dst(e) | +-------------+ | \"team204\" | | \"player101\" | | \"player125\" | +-------------+","title":"dst()"},{"location":"3.ngql-guide/6.functions-and-expressions/4.schema/#startnode","text":"startNode() \u83b7\u53d6\u4e00\u6761\u8def\u5f84\u5e76\u8fd4\u56de\u5b83\u7684\u8d77\u59cb\u70b9\u4fe1\u606f\uff0c\u5305\u62ec\u70b9 ID\u3001Tag\u3001\u5c5e\u6027\u548c\u503c\u3002 \u8bed\u6cd5\uff1a startNode(<path>) \u793a\u4f8b\uff1a nebula> MATCH p = (a :player {name : \"Tim Duncan\"})-[r:serve]-(t) \\ RETURN startNode(p); +----------------------------------------------------+ | startNode(p) | +----------------------------------------------------+ | (\"player100\" :player{age: 42, name: \"Tim Duncan\"}) | +----------------------------------------------------+","title":"startNode()"},{"location":"3.ngql-guide/6.functions-and-expressions/4.schema/#endnode","text":"endNode() \u83b7\u53d6\u4e00\u6761\u8def\u5f84\u5e76\u8fd4\u56de\u5b83\u7684\u76ee\u7684\u70b9\u4fe1\u606f\uff0c\u5305\u62ec\u70b9 ID\u3001Tag\u3001\u5c5e\u6027\u548c\u503c\u3002 \u8bed\u6cd5\uff1a endNode(<path>) \u793a\u4f8b\uff1a nebula> MATCH p = (a :player {name : \"Tim Duncan\"})-[r:serve]-(t) \\ RETURN endNode(p); +----------------------------------+ | endNode(p) | +----------------------------------+ | (\"team204\" :team{name: \"Spurs\"}) | +----------------------------------+","title":"endNode()"},{"location":"3.ngql-guide/6.functions-and-expressions/4.schema/#rank","text":"rank() \u8fd4\u56de\u8fb9\u7684 rank\u3002 \u8bed\u6cd5\uff1a rank(<edge>) \u8fd4\u56de\u7c7b\u578b\uff1aint\u3002 \u793a\u4f8b\uff1a nebula> MATCH (v:player{name:\"Tim Duncan\"})-[e]->() \\ RETURN rank(e); +---------+ | rank(e) | +---------+ | 0 | | 0 | | 0 | +---------+","title":"rank()"},{"location":"3.ngql-guide/6.functions-and-expressions/5.conditional-expressions/","text":"\u6761\u4ef6\u8868\u8fbe\u5f0f\u51fd\u6570 \u00b6 \u672c\u6587\u4ecb\u7ecdNebulaGraph\u652f\u6301\u7684\u6761\u4ef6\u8868\u8fbe\u5f0f\u51fd\u6570\u3002 CASE \u00b6 CASE \u8868\u8fbe\u5f0f\u4f7f\u7528\u6761\u4ef6\u6765\u8fc7\u6ee4\u4f20\u53c2\u3002\u548c openCypher \u4e00\u6837\uff0cnGQL \u63d0\u4f9b\u4e24\u79cd\u5f62\u5f0f\u7684 CASE \u8868\u8fbe\u5f0f\uff1a\u7b80\u5355\u5f62\u5f0f\u548c\u901a\u7528\u5f62\u5f0f\u3002 CASE \u8868\u8fbe\u5f0f\u4f1a\u904d\u5386\u6240\u6709\u6761\u4ef6\uff0c\u5e76\u5728\u6ee1\u8db3\u7b2c\u4e00\u4e2a\u6761\u4ef6\u65f6\u505c\u6b62\u8bfb\u53d6\u540e\u7eed\u6761\u4ef6\uff0c\u7136\u540e\u8fd4\u56de\u7ed3\u679c\u3002\u5982\u679c\u4e0d\u6ee1\u8db3\u4efb\u4f55\u6761\u4ef6\uff0c\u5c06\u901a\u8fc7 ELSE \u5b50\u53e5\u8fd4\u56de\u7ed3\u679c\u3002\u5982\u679c\u6ca1\u6709 ELSE \u5b50\u53e5\u4e14\u4e0d\u6ee1\u8db3\u4efb\u4f55\u6761\u4ef6\uff0c\u5219\u8fd4\u56de NULL \u3002 \u7b80\u5355\u5f62\u5f0f \u00b6 \u8bed\u6cd5 CASE <comparer> WHEN <value> THEN <result> [WHEN ...] [ELSE <default>] END Caution CASE \u8868\u8fbe\u5f0f\u4e00\u5b9a\u8981\u7528 END \u7ed3\u5c3e\u3002 \u53c2\u6570 \u8bf4\u660e comparer \u7528\u4e8e\u4e0e value \u8fdb\u884c\u6bd4\u8f83\u7684\u503c\u6216\u8005\u6709\u6548\u8868\u8fbe\u5f0f\u3002 value \u548c comparer \u8fdb\u884c\u6bd4\u8f83\uff0c\u5982\u679c\u5339\u914d\uff0c\u5219\u6ee1\u8db3\u6b64\u6761\u4ef6\u3002 result \u5982\u679c value \u5339\u914d comparer \uff0c\u5219\u8fd4\u56de\u8be5 result \u3002 default \u5982\u679c\u6ca1\u6709\u6761\u4ef6\u5339\u914d\uff0c\u5219\u8fd4\u56de\u8be5 default \u3002 \u793a\u4f8b nebula> RETURN \\ CASE 2+3 \\ WHEN 4 THEN 0 \\ WHEN 5 THEN 1 \\ ELSE -1 \\ END \\ AS result; +--------+ | result | +--------+ | 1 | +--------+ nebula> GO FROM \"player100\" OVER follow \\ YIELD properties($$).name AS Name, \\ CASE properties($$).age > 35 \\ WHEN true THEN \"Yes\" \\ WHEN false THEN \"No\" \\ ELSE \"Nah\" \\ END \\ AS Age_above_35; +-----------------+--------------+ | Name | Age_above_35 | +-----------------+--------------+ | \"Tony Parker\" | \"Yes\" | | \"Manu Ginobili\" | \"Yes\" | +-----------------+--------------+ \u901a\u7528\u5f62\u5f0f \u00b6 \u8bed\u6cd5 CASE WHEN <condition> THEN <result> [WHEN ...] [ELSE <default>] END \u53c2\u6570 \u8bf4\u660e condition \u5982\u679c\u6761\u4ef6 condition \u4e3a true\uff0c\u8868\u793a\u6ee1\u8db3\u6b64\u6761\u4ef6\u3002 result condition \u4e3a true\uff0c\u5219\u8fd4\u56de\u6b64 result \u3002 default \u5982\u679c\u6ca1\u6709\u6761\u4ef6\u5339\u914d\uff0c\u5219\u8fd4\u56de\u8be5 default \u3002 \u793a\u4f8b nebula> YIELD \\ CASE WHEN 4 > 5 THEN 0 \\ WHEN 3+4==7 THEN 1 \\ ELSE 2 \\ END \\ AS result; +--------+ | result | +--------+ | 1 | +--------+ nebula> MATCH (v:player) WHERE v.player.age > 30 \\ RETURN v.player.name AS Name, \\ CASE \\ WHEN v.player.name STARTS WITH \"T\" THEN \"Yes\" \\ ELSE \"No\" \\ END \\ AS Starts_with_T; +---------------------+---------------+ | Name | Starts_with_T | +---------------------+---------------+ | \"Tim Duncan\" | \"Yes\" | | \"LaMarcus Aldridge\" | \"No\" | | \"Tony Parker\" | \"Yes\" | +---------------------+---------------+ \u7b80\u5355\u5f62\u5f0f\u548c\u901a\u7528\u5f62\u5f0f\u7684\u533a\u522b \u00b6 \u4e3a\u4e86\u907f\u514d\u8bef\u7528\u7b80\u5355\u5f62\u5f0f\u548c\u901a\u7528\u5f62\u5f0f\uff0c\u7528\u6237\u9700\u8981\u4e86\u89e3\u5b83\u4eec\u7684\u5dee\u5f02\u3002\u8bf7\u53c2\u89c1\u5982\u4e0b\u793a\u4f8b\uff1a nebula> GO FROM \"player100\" OVER follow \\ YIELD properties($$).name AS Name, properties($$).age AS Age, \\ CASE properties($$).age \\ WHEN properties($$).age > 35 THEN \"Yes\" \\ ELSE \"No\" \\ END \\ AS Age_above_35; +-----------------+-----+--------------+ | Name | Age | Age_above_35 | +-----------------+-----+--------------+ | \"Tony Parker\" | 36 | \"No\" | | \"Manu Ginobili\" | 41 | \"No\" | +-----------------+-----+--------------+ \u793a\u4f8b\u672c\u610f\u4e3a\u5f53\u73a9\u5bb6\u5e74\u9f84\u5927\u4e8e 35 \u65f6\u8f93\u51fa Yes \u3002\u4f46\u662f\u67e5\u770b\u8f93\u51fa\u7ed3\u679c\uff0c\u5e74\u9f84\u4e3a 36 \u65f6\u8f93\u51fa\u7684\u5374\u662f No \u3002 \u8fd9\u662f\u56e0\u4e3a\u67e5\u8be2\u4f7f\u7528\u4e86\u7b80\u5355\u5f62\u5f0f\u7684 CASE \u8868\u8fbe\u5f0f\uff0c\u6bd4\u8f83\u5bf9\u8c61\u662f $$.player.age \u548c $$.player.age > 35 \u3002\u5f53\u5e74\u9f84\u4e3a 36 \u65f6\uff1a $$.player.age \u7684\u503c\u4e3a 36 \uff0c\u6570\u636e\u7c7b\u578b\u4e3a int\u3002 $$.player.age > 35 \u7684\u503c\u4e3a true \uff0c\u6570\u636e\u7c7b\u578b\u4e3a boolean\u3002 \u8fd9\u4e24\u79cd\u6570\u636e\u7c7b\u578b\u65e0\u6cd5\u5339\u914d\uff0c\u4e0d\u6ee1\u8db3\u6761\u4ef6\uff0c\u56e0\u6b64\u8fd4\u56de No \u3002 coalesce() \u00b6 coalesce() \u8fd4\u56de\u6240\u6709\u8868\u8fbe\u5f0f\u4e2d\u7b2c\u4e00\u4e2a\u975e\u7a7a\u5143\u7d20\u3002 \u8bed\u6cd5\uff1a coalesce(<expression_1>[,<expression_2>...]) \u8fd4\u56de\u7c7b\u578b\uff1a\u4e0e\u539f\u5143\u7d20\u7c7b\u578b\u76f8\u540c\u3002 \u793a\u4f8b\uff1a nebula> RETURN coalesce(null,[1,2,3]) as result; +-----------+ | result | +-----------+ | [1, 2, 3] | +-----------+ nebula> RETURN coalesce(null) as result; +----------+ | result | +----------+ | __NULL__ | +----------+","title":"\u6761\u4ef6\u8868\u8fbe\u5f0f\u51fd\u6570"},{"location":"3.ngql-guide/6.functions-and-expressions/5.conditional-expressions/#_1","text":"\u672c\u6587\u4ecb\u7ecdNebulaGraph\u652f\u6301\u7684\u6761\u4ef6\u8868\u8fbe\u5f0f\u51fd\u6570\u3002","title":"\u6761\u4ef6\u8868\u8fbe\u5f0f\u51fd\u6570"},{"location":"3.ngql-guide/6.functions-and-expressions/5.conditional-expressions/#case","text":"CASE \u8868\u8fbe\u5f0f\u4f7f\u7528\u6761\u4ef6\u6765\u8fc7\u6ee4\u4f20\u53c2\u3002\u548c openCypher \u4e00\u6837\uff0cnGQL \u63d0\u4f9b\u4e24\u79cd\u5f62\u5f0f\u7684 CASE \u8868\u8fbe\u5f0f\uff1a\u7b80\u5355\u5f62\u5f0f\u548c\u901a\u7528\u5f62\u5f0f\u3002 CASE \u8868\u8fbe\u5f0f\u4f1a\u904d\u5386\u6240\u6709\u6761\u4ef6\uff0c\u5e76\u5728\u6ee1\u8db3\u7b2c\u4e00\u4e2a\u6761\u4ef6\u65f6\u505c\u6b62\u8bfb\u53d6\u540e\u7eed\u6761\u4ef6\uff0c\u7136\u540e\u8fd4\u56de\u7ed3\u679c\u3002\u5982\u679c\u4e0d\u6ee1\u8db3\u4efb\u4f55\u6761\u4ef6\uff0c\u5c06\u901a\u8fc7 ELSE \u5b50\u53e5\u8fd4\u56de\u7ed3\u679c\u3002\u5982\u679c\u6ca1\u6709 ELSE \u5b50\u53e5\u4e14\u4e0d\u6ee1\u8db3\u4efb\u4f55\u6761\u4ef6\uff0c\u5219\u8fd4\u56de NULL \u3002","title":"CASE"},{"location":"3.ngql-guide/6.functions-and-expressions/5.conditional-expressions/#_2","text":"\u8bed\u6cd5 CASE <comparer> WHEN <value> THEN <result> [WHEN ...] [ELSE <default>] END Caution CASE \u8868\u8fbe\u5f0f\u4e00\u5b9a\u8981\u7528 END \u7ed3\u5c3e\u3002 \u53c2\u6570 \u8bf4\u660e comparer \u7528\u4e8e\u4e0e value \u8fdb\u884c\u6bd4\u8f83\u7684\u503c\u6216\u8005\u6709\u6548\u8868\u8fbe\u5f0f\u3002 value \u548c comparer \u8fdb\u884c\u6bd4\u8f83\uff0c\u5982\u679c\u5339\u914d\uff0c\u5219\u6ee1\u8db3\u6b64\u6761\u4ef6\u3002 result \u5982\u679c value \u5339\u914d comparer \uff0c\u5219\u8fd4\u56de\u8be5 result \u3002 default \u5982\u679c\u6ca1\u6709\u6761\u4ef6\u5339\u914d\uff0c\u5219\u8fd4\u56de\u8be5 default \u3002 \u793a\u4f8b nebula> RETURN \\ CASE 2+3 \\ WHEN 4 THEN 0 \\ WHEN 5 THEN 1 \\ ELSE -1 \\ END \\ AS result; +--------+ | result | +--------+ | 1 | +--------+ nebula> GO FROM \"player100\" OVER follow \\ YIELD properties($$).name AS Name, \\ CASE properties($$).age > 35 \\ WHEN true THEN \"Yes\" \\ WHEN false THEN \"No\" \\ ELSE \"Nah\" \\ END \\ AS Age_above_35; +-----------------+--------------+ | Name | Age_above_35 | +-----------------+--------------+ | \"Tony Parker\" | \"Yes\" | | \"Manu Ginobili\" | \"Yes\" | +-----------------+--------------+","title":"\u7b80\u5355\u5f62\u5f0f"},{"location":"3.ngql-guide/6.functions-and-expressions/5.conditional-expressions/#_3","text":"\u8bed\u6cd5 CASE WHEN <condition> THEN <result> [WHEN ...] [ELSE <default>] END \u53c2\u6570 \u8bf4\u660e condition \u5982\u679c\u6761\u4ef6 condition \u4e3a true\uff0c\u8868\u793a\u6ee1\u8db3\u6b64\u6761\u4ef6\u3002 result condition \u4e3a true\uff0c\u5219\u8fd4\u56de\u6b64 result \u3002 default \u5982\u679c\u6ca1\u6709\u6761\u4ef6\u5339\u914d\uff0c\u5219\u8fd4\u56de\u8be5 default \u3002 \u793a\u4f8b nebula> YIELD \\ CASE WHEN 4 > 5 THEN 0 \\ WHEN 3+4==7 THEN 1 \\ ELSE 2 \\ END \\ AS result; +--------+ | result | +--------+ | 1 | +--------+ nebula> MATCH (v:player) WHERE v.player.age > 30 \\ RETURN v.player.name AS Name, \\ CASE \\ WHEN v.player.name STARTS WITH \"T\" THEN \"Yes\" \\ ELSE \"No\" \\ END \\ AS Starts_with_T; +---------------------+---------------+ | Name | Starts_with_T | +---------------------+---------------+ | \"Tim Duncan\" | \"Yes\" | | \"LaMarcus Aldridge\" | \"No\" | | \"Tony Parker\" | \"Yes\" | +---------------------+---------------+","title":"\u901a\u7528\u5f62\u5f0f"},{"location":"3.ngql-guide/6.functions-and-expressions/5.conditional-expressions/#_4","text":"\u4e3a\u4e86\u907f\u514d\u8bef\u7528\u7b80\u5355\u5f62\u5f0f\u548c\u901a\u7528\u5f62\u5f0f\uff0c\u7528\u6237\u9700\u8981\u4e86\u89e3\u5b83\u4eec\u7684\u5dee\u5f02\u3002\u8bf7\u53c2\u89c1\u5982\u4e0b\u793a\u4f8b\uff1a nebula> GO FROM \"player100\" OVER follow \\ YIELD properties($$).name AS Name, properties($$).age AS Age, \\ CASE properties($$).age \\ WHEN properties($$).age > 35 THEN \"Yes\" \\ ELSE \"No\" \\ END \\ AS Age_above_35; +-----------------+-----+--------------+ | Name | Age | Age_above_35 | +-----------------+-----+--------------+ | \"Tony Parker\" | 36 | \"No\" | | \"Manu Ginobili\" | 41 | \"No\" | +-----------------+-----+--------------+ \u793a\u4f8b\u672c\u610f\u4e3a\u5f53\u73a9\u5bb6\u5e74\u9f84\u5927\u4e8e 35 \u65f6\u8f93\u51fa Yes \u3002\u4f46\u662f\u67e5\u770b\u8f93\u51fa\u7ed3\u679c\uff0c\u5e74\u9f84\u4e3a 36 \u65f6\u8f93\u51fa\u7684\u5374\u662f No \u3002 \u8fd9\u662f\u56e0\u4e3a\u67e5\u8be2\u4f7f\u7528\u4e86\u7b80\u5355\u5f62\u5f0f\u7684 CASE \u8868\u8fbe\u5f0f\uff0c\u6bd4\u8f83\u5bf9\u8c61\u662f $$.player.age \u548c $$.player.age > 35 \u3002\u5f53\u5e74\u9f84\u4e3a 36 \u65f6\uff1a $$.player.age \u7684\u503c\u4e3a 36 \uff0c\u6570\u636e\u7c7b\u578b\u4e3a int\u3002 $$.player.age > 35 \u7684\u503c\u4e3a true \uff0c\u6570\u636e\u7c7b\u578b\u4e3a boolean\u3002 \u8fd9\u4e24\u79cd\u6570\u636e\u7c7b\u578b\u65e0\u6cd5\u5339\u914d\uff0c\u4e0d\u6ee1\u8db3\u6761\u4ef6\uff0c\u56e0\u6b64\u8fd4\u56de No \u3002","title":"\u7b80\u5355\u5f62\u5f0f\u548c\u901a\u7528\u5f62\u5f0f\u7684\u533a\u522b"},{"location":"3.ngql-guide/6.functions-and-expressions/5.conditional-expressions/#coalesce","text":"coalesce() \u8fd4\u56de\u6240\u6709\u8868\u8fbe\u5f0f\u4e2d\u7b2c\u4e00\u4e2a\u975e\u7a7a\u5143\u7d20\u3002 \u8bed\u6cd5\uff1a coalesce(<expression_1>[,<expression_2>...]) \u8fd4\u56de\u7c7b\u578b\uff1a\u4e0e\u539f\u5143\u7d20\u7c7b\u578b\u76f8\u540c\u3002 \u793a\u4f8b\uff1a nebula> RETURN coalesce(null,[1,2,3]) as result; +-----------+ | result | +-----------+ | [1, 2, 3] | +-----------+ nebula> RETURN coalesce(null) as result; +----------+ | result | +----------+ | __NULL__ | +----------+","title":"coalesce()"},{"location":"3.ngql-guide/6.functions-and-expressions/6.list/","text":"\u5217\u8868\u51fd\u6570 \u00b6 \u672c\u6587\u4ecb\u7ecdNebulaGraph\u652f\u6301\u7684\u5217\u8868\uff08List\uff09\u51fd\u6570\u3002\u90e8\u5206\u5217\u8868\u51fd\u6570\u5728\u539f\u751f nGQL \u8bed\u53e5\u548c openCypher \u517c\u5bb9\u8bed\u53e5\u4e2d\u7684\u8bed\u6cd5\u4e0d\u540c\u3002 \u6ce8\u610f\u4e8b\u9879 \u00b6 \u548c SQL \u4e00\u6837\uff0cnGQL \u7684\u5b57\u7b26\u7d22\u5f15\uff08\u4f4d\u7f6e\uff09\u4ece 1 \u5f00\u59cb\u3002\u4f46\u662f C \u8bed\u8a00\u7684\u5b57\u7b26\u7d22\u5f15\u662f\u4ece 0 \u5f00\u59cb\u7684\u3002 \u901a\u7528 \u00b6 range() \u00b6 range() \u8fd4\u56de\u6307\u5b9a\u6574\u6570\u8303\u56f4 [start,end] \u5185\u56fa\u5b9a\u6b65\u957f\u7684\u5217\u8868\u3002 \u8bed\u6cd5\uff1a range(start, end [, step]) step \uff1a\u53ef\u9009\u53c2\u6570\u3002\u6b65\u957f\u3002\u9ed8\u8ba4\u4e3a 1 \u3002 \u8fd4\u56de\u7c7b\u578b\uff1alist\u3002 \u793a\u4f8b\uff1a nebula> RETURN range(1,9,2); +-----------------+ | range(1,9,2) | +-----------------+ | [1, 3, 5, 7, 9] | +-----------------+ reverse() \u00b6 reverse() \u8fd4\u56de\u5c06\u539f\u5217\u8868\u9006\u5e8f\u6392\u5217\u7684\u65b0\u5217\u8868\u3002 \u8bed\u6cd5\uff1a reverse(<list>) \u8fd4\u56de\u7c7b\u578b\uff1alist\u3002 \u793a\u4f8b\uff1a nebula> WITH [NULL, 4923, 'abc', 521, 487] AS ids \\ RETURN reverse(ids); +-----------------------------------+ | reverse(ids) | +-----------------------------------+ | [487, 521, \"abc\", 4923, __NULL__] | +-----------------------------------+ tail() \u00b6 tail() \u8fd4\u56de\u4e0d\u5305\u542b\u539f\u5217\u8868\u7b2c\u4e00\u4e2a\u5143\u7d20\u7684\u65b0\u5217\u8868\u3002 \u8bed\u6cd5\uff1a tail(<list>) \u8fd4\u56de\u7c7b\u578b\uff1alist\u3002 \u793a\u4f8b\uff1a nebula> WITH [NULL, 4923, 'abc', 521, 487] AS ids \\ RETURN tail(ids); +-------------------------+ | tail(ids) | +-------------------------+ | [4923, \"abc\", 521, 487] | +-------------------------+ head() \u00b6 head() \u8fd4\u56de\u5217\u8868\u7684\u7b2c\u4e00\u4e2a\u5143\u7d20\u3002 \u8bed\u6cd5\uff1a head(<list>) \u8fd4\u56de\u7c7b\u578b\uff1a\u4e0e\u539f\u5217\u8868\u5185\u7684\u5143\u7d20\u7c7b\u578b\u76f8\u540c\u3002 \u793a\u4f8b\uff1a nebula> WITH [NULL, 4923, 'abc', 521, 487] AS ids \\ RETURN head(ids); +-----------+ | head(ids) | +-----------+ | __NULL__ | +-----------+ last() \u00b6 last() \u8fd4\u56de\u5217\u8868\u7684\u6700\u540e\u4e00\u4e2a\u5143\u7d20\u3002 \u8bed\u6cd5\uff1a last(<list>) \u8fd4\u56de\u7c7b\u578b\uff1a\u4e0e\u539f\u5217\u8868\u5185\u7684\u5143\u7d20\u7c7b\u578b\u76f8\u540c\u3002 \u793a\u4f8b\uff1a nebula> WITH [NULL, 4923, 'abc', 521, 487] AS ids \\ RETURN last(ids); +-----------+ | last(ids) | +-----------+ | 487 | +-----------+ reduce() \u00b6 reduce() \u5c06\u8868\u8fbe\u5f0f\u9010\u4e2a\u5e94\u7528\u4e8e\u5217\u8868\u4e2d\u7684\u5143\u7d20\uff0c\u7136\u540e\u548c\u7d2f\u52a0\u5668\u4e2d\u7684\u5f53\u524d\u7ed3\u679c\u7d2f\u52a0\uff0c\u6700\u540e\u8fd4\u56de\u5b8c\u6574\u7ed3\u679c\u3002\u8be5\u51fd\u6570\u5c06\u904d\u5386\u7ed9\u5b9a\u5217\u8868\u4e2d\u7684\u6bcf\u4e2a\u5143\u7d20 e\uff0c\u5728 e \u4e0a\u8fd0\u884c\u8868\u8fbe\u5f0f\u5e76\u548c\u7d2f\u52a0\u5668\u7684\u5f53\u524d\u7ed3\u679c\u7d2f\u52a0\uff0c\u5c06\u65b0\u7684\u7ed3\u679c\u5b58\u50a8\u5728\u7d2f\u52a0\u5668\u4e2d\u3002\u8fd9\u4e2a\u51fd\u6570\u7c7b\u4f3c\u4e8e\u51fd\u6570\u5f0f\u8bed\u8a00\uff08\u5982 Lisp \u548c Scala\uff09\u4e2d\u7684 fold \u6216 reduce \u65b9\u6cd5\u3002 openCypher \u517c\u5bb9\u6027 \u5728 openCypher \u4e2d\uff0c reduce() \u51fd\u6570\u6ca1\u6709\u5b9a\u4e49\u3002nGQL \u4f7f\u7528\u4e86 Cypher \u65b9\u5f0f\u5b9e\u73b0 reduce() \u51fd\u6570\u3002 \u8bed\u6cd5\uff1a reduce(<accumulator> = <initial>, <variable> IN <list> | <expression>) accumulator \uff1a\u5728\u904d\u5386\u5217\u8868\u65f6\u4fdd\u5b58\u7d2f\u52a0\u7ed3\u679c\u3002 initial \uff1a\u4e3a accumulator \u63d0\u4f9b\u521d\u59cb\u503c\u7684\u8868\u8fbe\u5f0f\u6216\u503c\u3002 variable \uff1a\u4e3a\u5217\u8868\u5f15\u5165\u4e00\u4e2a\u53d8\u91cf\uff0c\u51b3\u5b9a\u4f7f\u7528\u5217\u8868\u4e2d\u7684\u54ea\u4e2a\u5143\u7d20\u3002 list \uff1a\u5217\u8868\u6216\u5217\u8868\u8868\u8fbe\u5f0f\u3002 expression \uff1a\u8be5\u8868\u8fbe\u5f0f\u5c06\u5bf9\u5217\u8868\u4e2d\u7684\u6bcf\u4e2a\u5143\u7d20\u8fd0\u884c\u4e00\u6b21\uff0c\u5e76\u5c06\u7ed3\u679c\u7d2f\u52a0\u81f3 accumulator \u3002 \u8fd4\u56de\u7c7b\u578b\uff1a\u53d6\u51b3\u4e8e\u63d0\u4f9b\u7684\u53c2\u6570\uff0c\u4ee5\u53ca\u8868\u8fbe\u5f0f\u7684\u8bed\u4e49\u3002 \u793a\u4f8b\uff1a nebula> RETURN reduce(totalNum = -4 * 5, n IN [1, 2] | totalNum + n * 2) AS r; +-----+ | r | +-----+ | -14 | +-----+ nebula> MATCH p = (n:player{name:\"LeBron James\"})<-[:follow]-(m) \\ RETURN nodes(p)[0].player.age AS src1, nodes(p)[1].player.age AS dst2, \\ reduce(totalAge = 100, n IN nodes(p) | totalAge + n.player.age) AS sum; +------+------+-----+ | src1 | dst2 | sum | +------+------+-----+ | 34 | 31 | 165 | | 34 | 29 | 163 | | 34 | 33 | 167 | | 34 | 26 | 160 | | 34 | 34 | 168 | | 34 | 37 | 171 | +------+------+-----+ nebula> LOOKUP ON player WHERE player.name == \"Tony Parker\" YIELD id(vertex) AS VertexID \\ | GO FROM $-.VertexID over follow \\ WHERE properties(edge).degree != reduce(totalNum = 5, n IN range(1, 3) | properties($$).age + totalNum + n) \\ YIELD properties($$).name AS id, properties($$).age AS age, properties(edge).degree AS degree; +---------------------+-----+--------+ | id | age | degree | +---------------------+-----+--------+ | \"Tim Duncan\" | 42 | 95 | | \"LaMarcus Aldridge\" | 33 | 90 | | \"Manu Ginobili\" | 41 | 95 | +---------------------+-----+--------+ \u539f\u751f nGQL \u8bed\u53e5\u9002\u7528 \u00b6 keys() \u00b6 keys() \u8fd4\u56de\u4e00\u4e2a\u5217\u8868\uff0c\u5305\u542b\u5b57\u7b26\u4e32\u5f62\u5f0f\u7684\u70b9\u3001\u8fb9\u7684\u6240\u6709\u5c5e\u6027\u3002 \u8bed\u6cd5\uff1a keys({vertex | edge}) \u8fd4\u56de\u7c7b\u578b\uff1alist\u3002 \u793a\u4f8b\uff1a nebula> LOOKUP ON player \\ WHERE player.age > 45 \\ YIELD keys(vertex); +-----------------+ | keys(VERTEX) | +-----------------+ | [\"age\", \"name\"] | | [\"age\", \"name\"] | +-----------------+ labels() \u00b6 labels() \u8fd4\u56de\u70b9\u7684 Tag \u5217\u8868\u3002 \u8bed\u6cd5\uff1a labels(verte) \u8fd4\u56de\u7c7b\u578b\uff1alist\u3002 \u793a\u4f8b\uff1a nebula> FETCH PROP ON * \"player101\", \"player102\", \"team204\" \\ YIELD labels(vertex); +----------------+ | labels(VERTEX) | +----------------+ | [\"player\"] | | [\"player\"] | | [\"team\"] | +----------------+ openCypher \u517c\u5bb9\u8bed\u53e5\u9002\u7528 \u00b6 keys() \u00b6 keys() \u8fd4\u56de\u4e00\u4e2a\u5217\u8868\uff0c\u5305\u542b\u5b57\u7b26\u4e32\u5f62\u5f0f\u7684\u70b9\u3001\u8fb9\u6216\u6620\u5c04\u7684\u6240\u6709\u5c5e\u6027\u3002 \u8bed\u6cd5\uff1a keys(<vertex_or_edge>) \u8fd4\u56de\u7c7b\u578b\uff1alist\u3002 \u793a\u4f8b\uff1a nebula> MATCH (v:player{name:\"Tim Duncan\"})-[e]->() \\ RETURN keys(e); +----------------------------+ | keys(e) | +----------------------------+ | [\"end_year\", \"start_year\"] | | [\"degree\"] | | [\"degree\"] | +----------------------------+ labels() \u00b6 labels() \u8fd4\u56de\u70b9\u7684 Tag \u5217\u8868\u3002 \u8bed\u6cd5\uff1a labels(<vertex>) \u8fd4\u56de\u7c7b\u578b\uff1alist\u3002 \u793a\u4f8b\uff1a nebula> MATCH (v)-[e:serve]->() \\ WHERE id(v)==\"player100\" \\ RETURN labels(v); +------------+ | labels(v) | +------------+ | [\"player\"] | +------------+ nodes() \u00b6 nodes() \u8fd4\u56de\u8def\u5f84\u4e2d\u6240\u6709\u70b9\u7684\u5217\u8868\u3002\u5305\u62ec\u70b9 ID\u3001Tag\u3001\u5c5e\u6027\u548c\u503c\u3002 \u8bed\u6cd5\uff1a nodes(<path>) \u8fd4\u56de\u7c7b\u578b\uff1alist\u3002 \u793a\u4f8b\uff1a nebula> MATCH p=(v:player{name:\"Tim Duncan\"})-->(v2) \\ RETURN nodes(p); +-------------------------------------------------------------------------------------------------------------+ | nodes(p) | +-------------------------------------------------------------------------------------------------------------+ | [(\"player100\" :player{age: 42, name: \"Tim Duncan\"}), (\"team204\" :team{name: \"Spurs\"})] | | [(\"player100\" :player{age: 42, name: \"Tim Duncan\"}), (\"player101\" :player{age: 36, name: \"Tony Parker\"})] | | [(\"player100\" :player{age: 42, name: \"Tim Duncan\"}), (\"player125\" :player{age: 41, name: \"Manu Ginobili\"})] | +-------------------------------------------------------------------------------------------------------------+ relationships() \u00b6 relationships() \u8fd4\u56de\u8def\u5f84\u4e2d\u6240\u6709\u5173\u7cfb\u7684\u5217\u8868\u3002 \u8bed\u6cd5\uff1a relationships(<path>) \u8fd4\u56de\u7c7b\u578b\uff1alist\u3002 \u793a\u4f8b\uff1a nebula> MATCH p=(v:player{name:\"Tim Duncan\"})-->(v2) \\ RETURN relationships(p); +-------------------------------------------------------------------------+ | relationships(p) | +-------------------------------------------------------------------------+ | [[:serve \"player100\"->\"team204\" @0 {end_year: 2016, start_year: 1997}]] | | [[:follow \"player100\"->\"player101\" @0 {degree: 95}]] | | [[:follow \"player100\"->\"player125\" @0 {degree: 95}]] | +-------------------------------------------------------------------------+","title":"\u5217\u8868\u51fd\u6570"},{"location":"3.ngql-guide/6.functions-and-expressions/6.list/#_1","text":"\u672c\u6587\u4ecb\u7ecdNebulaGraph\u652f\u6301\u7684\u5217\u8868\uff08List\uff09\u51fd\u6570\u3002\u90e8\u5206\u5217\u8868\u51fd\u6570\u5728\u539f\u751f nGQL \u8bed\u53e5\u548c openCypher \u517c\u5bb9\u8bed\u53e5\u4e2d\u7684\u8bed\u6cd5\u4e0d\u540c\u3002","title":"\u5217\u8868\u51fd\u6570"},{"location":"3.ngql-guide/6.functions-and-expressions/6.list/#_2","text":"\u548c SQL \u4e00\u6837\uff0cnGQL \u7684\u5b57\u7b26\u7d22\u5f15\uff08\u4f4d\u7f6e\uff09\u4ece 1 \u5f00\u59cb\u3002\u4f46\u662f C \u8bed\u8a00\u7684\u5b57\u7b26\u7d22\u5f15\u662f\u4ece 0 \u5f00\u59cb\u7684\u3002","title":"\u6ce8\u610f\u4e8b\u9879"},{"location":"3.ngql-guide/6.functions-and-expressions/6.list/#_3","text":"","title":"\u901a\u7528"},{"location":"3.ngql-guide/6.functions-and-expressions/6.list/#range","text":"range() \u8fd4\u56de\u6307\u5b9a\u6574\u6570\u8303\u56f4 [start,end] \u5185\u56fa\u5b9a\u6b65\u957f\u7684\u5217\u8868\u3002 \u8bed\u6cd5\uff1a range(start, end [, step]) step \uff1a\u53ef\u9009\u53c2\u6570\u3002\u6b65\u957f\u3002\u9ed8\u8ba4\u4e3a 1 \u3002 \u8fd4\u56de\u7c7b\u578b\uff1alist\u3002 \u793a\u4f8b\uff1a nebula> RETURN range(1,9,2); +-----------------+ | range(1,9,2) | +-----------------+ | [1, 3, 5, 7, 9] | +-----------------+","title":"range()"},{"location":"3.ngql-guide/6.functions-and-expressions/6.list/#reverse","text":"reverse() \u8fd4\u56de\u5c06\u539f\u5217\u8868\u9006\u5e8f\u6392\u5217\u7684\u65b0\u5217\u8868\u3002 \u8bed\u6cd5\uff1a reverse(<list>) \u8fd4\u56de\u7c7b\u578b\uff1alist\u3002 \u793a\u4f8b\uff1a nebula> WITH [NULL, 4923, 'abc', 521, 487] AS ids \\ RETURN reverse(ids); +-----------------------------------+ | reverse(ids) | +-----------------------------------+ | [487, 521, \"abc\", 4923, __NULL__] | +-----------------------------------+","title":"reverse()"},{"location":"3.ngql-guide/6.functions-and-expressions/6.list/#tail","text":"tail() \u8fd4\u56de\u4e0d\u5305\u542b\u539f\u5217\u8868\u7b2c\u4e00\u4e2a\u5143\u7d20\u7684\u65b0\u5217\u8868\u3002 \u8bed\u6cd5\uff1a tail(<list>) \u8fd4\u56de\u7c7b\u578b\uff1alist\u3002 \u793a\u4f8b\uff1a nebula> WITH [NULL, 4923, 'abc', 521, 487] AS ids \\ RETURN tail(ids); +-------------------------+ | tail(ids) | +-------------------------+ | [4923, \"abc\", 521, 487] | +-------------------------+","title":"tail()"},{"location":"3.ngql-guide/6.functions-and-expressions/6.list/#head","text":"head() \u8fd4\u56de\u5217\u8868\u7684\u7b2c\u4e00\u4e2a\u5143\u7d20\u3002 \u8bed\u6cd5\uff1a head(<list>) \u8fd4\u56de\u7c7b\u578b\uff1a\u4e0e\u539f\u5217\u8868\u5185\u7684\u5143\u7d20\u7c7b\u578b\u76f8\u540c\u3002 \u793a\u4f8b\uff1a nebula> WITH [NULL, 4923, 'abc', 521, 487] AS ids \\ RETURN head(ids); +-----------+ | head(ids) | +-----------+ | __NULL__ | +-----------+","title":"head()"},{"location":"3.ngql-guide/6.functions-and-expressions/6.list/#last","text":"last() \u8fd4\u56de\u5217\u8868\u7684\u6700\u540e\u4e00\u4e2a\u5143\u7d20\u3002 \u8bed\u6cd5\uff1a last(<list>) \u8fd4\u56de\u7c7b\u578b\uff1a\u4e0e\u539f\u5217\u8868\u5185\u7684\u5143\u7d20\u7c7b\u578b\u76f8\u540c\u3002 \u793a\u4f8b\uff1a nebula> WITH [NULL, 4923, 'abc', 521, 487] AS ids \\ RETURN last(ids); +-----------+ | last(ids) | +-----------+ | 487 | +-----------+","title":"last()"},{"location":"3.ngql-guide/6.functions-and-expressions/6.list/#reduce","text":"reduce() \u5c06\u8868\u8fbe\u5f0f\u9010\u4e2a\u5e94\u7528\u4e8e\u5217\u8868\u4e2d\u7684\u5143\u7d20\uff0c\u7136\u540e\u548c\u7d2f\u52a0\u5668\u4e2d\u7684\u5f53\u524d\u7ed3\u679c\u7d2f\u52a0\uff0c\u6700\u540e\u8fd4\u56de\u5b8c\u6574\u7ed3\u679c\u3002\u8be5\u51fd\u6570\u5c06\u904d\u5386\u7ed9\u5b9a\u5217\u8868\u4e2d\u7684\u6bcf\u4e2a\u5143\u7d20 e\uff0c\u5728 e \u4e0a\u8fd0\u884c\u8868\u8fbe\u5f0f\u5e76\u548c\u7d2f\u52a0\u5668\u7684\u5f53\u524d\u7ed3\u679c\u7d2f\u52a0\uff0c\u5c06\u65b0\u7684\u7ed3\u679c\u5b58\u50a8\u5728\u7d2f\u52a0\u5668\u4e2d\u3002\u8fd9\u4e2a\u51fd\u6570\u7c7b\u4f3c\u4e8e\u51fd\u6570\u5f0f\u8bed\u8a00\uff08\u5982 Lisp \u548c Scala\uff09\u4e2d\u7684 fold \u6216 reduce \u65b9\u6cd5\u3002 openCypher \u517c\u5bb9\u6027 \u5728 openCypher \u4e2d\uff0c reduce() \u51fd\u6570\u6ca1\u6709\u5b9a\u4e49\u3002nGQL \u4f7f\u7528\u4e86 Cypher \u65b9\u5f0f\u5b9e\u73b0 reduce() \u51fd\u6570\u3002 \u8bed\u6cd5\uff1a reduce(<accumulator> = <initial>, <variable> IN <list> | <expression>) accumulator \uff1a\u5728\u904d\u5386\u5217\u8868\u65f6\u4fdd\u5b58\u7d2f\u52a0\u7ed3\u679c\u3002 initial \uff1a\u4e3a accumulator \u63d0\u4f9b\u521d\u59cb\u503c\u7684\u8868\u8fbe\u5f0f\u6216\u503c\u3002 variable \uff1a\u4e3a\u5217\u8868\u5f15\u5165\u4e00\u4e2a\u53d8\u91cf\uff0c\u51b3\u5b9a\u4f7f\u7528\u5217\u8868\u4e2d\u7684\u54ea\u4e2a\u5143\u7d20\u3002 list \uff1a\u5217\u8868\u6216\u5217\u8868\u8868\u8fbe\u5f0f\u3002 expression \uff1a\u8be5\u8868\u8fbe\u5f0f\u5c06\u5bf9\u5217\u8868\u4e2d\u7684\u6bcf\u4e2a\u5143\u7d20\u8fd0\u884c\u4e00\u6b21\uff0c\u5e76\u5c06\u7ed3\u679c\u7d2f\u52a0\u81f3 accumulator \u3002 \u8fd4\u56de\u7c7b\u578b\uff1a\u53d6\u51b3\u4e8e\u63d0\u4f9b\u7684\u53c2\u6570\uff0c\u4ee5\u53ca\u8868\u8fbe\u5f0f\u7684\u8bed\u4e49\u3002 \u793a\u4f8b\uff1a nebula> RETURN reduce(totalNum = -4 * 5, n IN [1, 2] | totalNum + n * 2) AS r; +-----+ | r | +-----+ | -14 | +-----+ nebula> MATCH p = (n:player{name:\"LeBron James\"})<-[:follow]-(m) \\ RETURN nodes(p)[0].player.age AS src1, nodes(p)[1].player.age AS dst2, \\ reduce(totalAge = 100, n IN nodes(p) | totalAge + n.player.age) AS sum; +------+------+-----+ | src1 | dst2 | sum | +------+------+-----+ | 34 | 31 | 165 | | 34 | 29 | 163 | | 34 | 33 | 167 | | 34 | 26 | 160 | | 34 | 34 | 168 | | 34 | 37 | 171 | +------+------+-----+ nebula> LOOKUP ON player WHERE player.name == \"Tony Parker\" YIELD id(vertex) AS VertexID \\ | GO FROM $-.VertexID over follow \\ WHERE properties(edge).degree != reduce(totalNum = 5, n IN range(1, 3) | properties($$).age + totalNum + n) \\ YIELD properties($$).name AS id, properties($$).age AS age, properties(edge).degree AS degree; +---------------------+-----+--------+ | id | age | degree | +---------------------+-----+--------+ | \"Tim Duncan\" | 42 | 95 | | \"LaMarcus Aldridge\" | 33 | 90 | | \"Manu Ginobili\" | 41 | 95 | +---------------------+-----+--------+","title":"reduce()"},{"location":"3.ngql-guide/6.functions-and-expressions/6.list/#ngql","text":"","title":"\u539f\u751f nGQL \u8bed\u53e5\u9002\u7528"},{"location":"3.ngql-guide/6.functions-and-expressions/6.list/#keys","text":"keys() \u8fd4\u56de\u4e00\u4e2a\u5217\u8868\uff0c\u5305\u542b\u5b57\u7b26\u4e32\u5f62\u5f0f\u7684\u70b9\u3001\u8fb9\u7684\u6240\u6709\u5c5e\u6027\u3002 \u8bed\u6cd5\uff1a keys({vertex | edge}) \u8fd4\u56de\u7c7b\u578b\uff1alist\u3002 \u793a\u4f8b\uff1a nebula> LOOKUP ON player \\ WHERE player.age > 45 \\ YIELD keys(vertex); +-----------------+ | keys(VERTEX) | +-----------------+ | [\"age\", \"name\"] | | [\"age\", \"name\"] | +-----------------+","title":"keys()"},{"location":"3.ngql-guide/6.functions-and-expressions/6.list/#labels","text":"labels() \u8fd4\u56de\u70b9\u7684 Tag \u5217\u8868\u3002 \u8bed\u6cd5\uff1a labels(verte) \u8fd4\u56de\u7c7b\u578b\uff1alist\u3002 \u793a\u4f8b\uff1a nebula> FETCH PROP ON * \"player101\", \"player102\", \"team204\" \\ YIELD labels(vertex); +----------------+ | labels(VERTEX) | +----------------+ | [\"player\"] | | [\"player\"] | | [\"team\"] | +----------------+","title":"labels()"},{"location":"3.ngql-guide/6.functions-and-expressions/6.list/#opencypher","text":"","title":"openCypher \u517c\u5bb9\u8bed\u53e5\u9002\u7528"},{"location":"3.ngql-guide/6.functions-and-expressions/6.list/#keys_1","text":"keys() \u8fd4\u56de\u4e00\u4e2a\u5217\u8868\uff0c\u5305\u542b\u5b57\u7b26\u4e32\u5f62\u5f0f\u7684\u70b9\u3001\u8fb9\u6216\u6620\u5c04\u7684\u6240\u6709\u5c5e\u6027\u3002 \u8bed\u6cd5\uff1a keys(<vertex_or_edge>) \u8fd4\u56de\u7c7b\u578b\uff1alist\u3002 \u793a\u4f8b\uff1a nebula> MATCH (v:player{name:\"Tim Duncan\"})-[e]->() \\ RETURN keys(e); +----------------------------+ | keys(e) | +----------------------------+ | [\"end_year\", \"start_year\"] | | [\"degree\"] | | [\"degree\"] | +----------------------------+","title":"keys()"},{"location":"3.ngql-guide/6.functions-and-expressions/6.list/#labels_1","text":"labels() \u8fd4\u56de\u70b9\u7684 Tag \u5217\u8868\u3002 \u8bed\u6cd5\uff1a labels(<vertex>) \u8fd4\u56de\u7c7b\u578b\uff1alist\u3002 \u793a\u4f8b\uff1a nebula> MATCH (v)-[e:serve]->() \\ WHERE id(v)==\"player100\" \\ RETURN labels(v); +------------+ | labels(v) | +------------+ | [\"player\"] | +------------+","title":"labels()"},{"location":"3.ngql-guide/6.functions-and-expressions/6.list/#nodes","text":"nodes() \u8fd4\u56de\u8def\u5f84\u4e2d\u6240\u6709\u70b9\u7684\u5217\u8868\u3002\u5305\u62ec\u70b9 ID\u3001Tag\u3001\u5c5e\u6027\u548c\u503c\u3002 \u8bed\u6cd5\uff1a nodes(<path>) \u8fd4\u56de\u7c7b\u578b\uff1alist\u3002 \u793a\u4f8b\uff1a nebula> MATCH p=(v:player{name:\"Tim Duncan\"})-->(v2) \\ RETURN nodes(p); +-------------------------------------------------------------------------------------------------------------+ | nodes(p) | +-------------------------------------------------------------------------------------------------------------+ | [(\"player100\" :player{age: 42, name: \"Tim Duncan\"}), (\"team204\" :team{name: \"Spurs\"})] | | [(\"player100\" :player{age: 42, name: \"Tim Duncan\"}), (\"player101\" :player{age: 36, name: \"Tony Parker\"})] | | [(\"player100\" :player{age: 42, name: \"Tim Duncan\"}), (\"player125\" :player{age: 41, name: \"Manu Ginobili\"})] | +-------------------------------------------------------------------------------------------------------------+","title":"nodes()"},{"location":"3.ngql-guide/6.functions-and-expressions/6.list/#relationships","text":"relationships() \u8fd4\u56de\u8def\u5f84\u4e2d\u6240\u6709\u5173\u7cfb\u7684\u5217\u8868\u3002 \u8bed\u6cd5\uff1a relationships(<path>) \u8fd4\u56de\u7c7b\u578b\uff1alist\u3002 \u793a\u4f8b\uff1a nebula> MATCH p=(v:player{name:\"Tim Duncan\"})-->(v2) \\ RETURN relationships(p); +-------------------------------------------------------------------------+ | relationships(p) | +-------------------------------------------------------------------------+ | [[:serve \"player100\"->\"team204\" @0 {end_year: 2016, start_year: 1997}]] | | [[:follow \"player100\"->\"player101\" @0 {degree: 95}]] | | [[:follow \"player100\"->\"player125\" @0 {degree: 95}]] | +-------------------------------------------------------------------------+","title":"relationships()"},{"location":"3.ngql-guide/6.functions-and-expressions/8.predicate/","text":"\u8c13\u8bcd\u51fd\u6570 \u00b6 \u8c13\u8bcd\u51fd\u6570\u53ea\u8fd4\u56de true \u6216 false \uff0c\u901a\u5e38\u7528\u4e8e WHERE \u5b50\u53e5\u4e2d\u3002 NebulaGraph\u652f\u6301\u4ee5\u4e0b\u8c13\u8bcd\u51fd\u6570\u3002 \u51fd\u6570 \u8bf4\u660e exists() \u5982\u679c\u6307\u5b9a\u7684\u5c5e\u6027\u5728\u70b9\u3001\u8fb9\u6216\u6620\u5c04\u4e2d\u5b58\u5728\uff0c\u5219\u8fd4\u56de true \uff0c\u5426\u5219\u8fd4\u56de false \u3002 any() \u5982\u679c\u6307\u5b9a\u7684\u8c13\u8bcd\u9002\u7528\u4e8e\u5217\u8868\u4e2d\u7684\u81f3\u5c11\u4e00\u4e2a\u5143\u7d20\uff0c\u5219\u8fd4\u56de true \uff0c\u5426\u5219\u8fd4\u56de false \u3002 all() \u5982\u679c\u6307\u5b9a\u7684\u8c13\u8bcd\u9002\u7528\u4e8e\u5217\u8868\u4e2d\u7684\u6bcf\u4e2a\u5143\u7d20\uff0c\u5219\u8fd4\u56de true \uff0c\u5426\u5219\u8fd4\u56de false \u3002 none() \u5982\u679c\u6307\u5b9a\u7684\u8c13\u8bcd\u4e0d\u9002\u7528\u4e8e\u5217\u8868\u4e2d\u7684\u4efb\u4f55\u4e00\u4e2a\u5143\u7d20\uff0c\u5219\u8fd4\u56de true \uff0c\u5426\u5219\u8fd4\u56de false \u3002 single() \u5982\u679c\u6307\u5b9a\u7684\u8c13\u8bcd\u9002\u7528\u4e8e\u5217\u8868\u4e2d\u7684\u552f\u4e00\u4e00\u4e2a\u5143\u7d20\uff0c\u5219\u8fd4\u56de true \uff0c\u5426\u5219\u8fd4\u56de false \u3002 Note \u5982\u679c\u5217\u8868\u4e3a\u7a7a\uff0c\u6216\u8005\u5217\u8868\u4e2d\u7684\u6240\u6709\u5143\u7d20\u90fd\u4e3a\u7a7a\uff0c\u5219\u8fd4\u56de NULL\u3002 Compatibility \u5728 openCypher \u4e2d\u53ea\u5b9a\u4e49\u4e86\u51fd\u6570 exists() \uff0c\u5176\u4ed6\u51e0\u4e2a\u51fd\u6570\u4f9d\u8d56\u4e8e\u5177\u4f53\u5b9e\u73b0\u3002 \u8bed\u6cd5 \u00b6 <predicate>(<variable> IN <list> WHERE <condition>) \u793a\u4f8b \u00b6 nebula> RETURN any(n IN [1, 2, 3, 4, 5, NULL] \\ WHERE n > 2) AS r; +------+ | r | +------+ | true | +------+ nebula> RETURN single(n IN range(1, 5) \\ WHERE n == 3) AS r; +------+ | r | +------+ | true | +------+ nebula> RETURN none(n IN range(1, 3) \\ WHERE n == 0) AS r; +------+ | r | +------+ | true | +------+ nebula> WITH [1, 2, 3, 4, 5, NULL] AS a \\ RETURN any(n IN a WHERE n > 2); +-------------------------+ | any(n IN a WHERE (n>2)) | +-------------------------+ | true | +-------------------------+ nebula> MATCH p = (n:player{name:\"LeBron James\"})<-[:follow]-(m) \\ RETURN nodes(p)[0].player.name AS n1, nodes(p)[1].player.name AS n2, \\ all(n IN nodes(p) WHERE n.player.name NOT STARTS WITH \"D\") AS b; +----------------+-------------------+-------+ | n1 | n2 | b | +----------------+-------------------+-------+ | \"LeBron James\" | \"Danny Green\" | false | | \"LeBron James\" | \"Dejounte Murray\" | false | | \"LeBron James\" | \"Chris Paul\" | true | | \"LeBron James\" | \"Kyrie Irving\" | true | | \"LeBron James\" | \"Carmelo Anthony\" | true | | \"LeBron James\" | \"Dwyane Wade\" | false | +----------------+-------------------+-------+ nebula> MATCH p = (n:player{name:\"LeBron James\"})-[:follow]->(m) \\ RETURN single(n IN nodes(p) WHERE n.player.age > 40) AS b; +------+ | b | +------+ | true | +------+ nebula> MATCH (n:player) \\ RETURN exists(n.player.id), n IS NOT NULL; +---------------------+---------------+ | exists(n.player.id) | n IS NOT NULL | +---------------------+---------------+ | false | true | ... nebula> MATCH (n:player) \\ WHERE exists(n['name']) \\ RETURN n; +---------------------------------------------------------------+ | n | +---------------------------------------------------------------+ | (\"player105\" :player{age: 31, name: \"Danny Green\"}) | | (\"player109\" :player{age: 34, name: \"Tiago Splitter\"}) | | (\"player111\" :player{age: 38, name: \"David West\"}) | ...","title":"\u8c13\u8bcd\u51fd\u6570"},{"location":"3.ngql-guide/6.functions-and-expressions/8.predicate/#_1","text":"\u8c13\u8bcd\u51fd\u6570\u53ea\u8fd4\u56de true \u6216 false \uff0c\u901a\u5e38\u7528\u4e8e WHERE \u5b50\u53e5\u4e2d\u3002 NebulaGraph\u652f\u6301\u4ee5\u4e0b\u8c13\u8bcd\u51fd\u6570\u3002 \u51fd\u6570 \u8bf4\u660e exists() \u5982\u679c\u6307\u5b9a\u7684\u5c5e\u6027\u5728\u70b9\u3001\u8fb9\u6216\u6620\u5c04\u4e2d\u5b58\u5728\uff0c\u5219\u8fd4\u56de true \uff0c\u5426\u5219\u8fd4\u56de false \u3002 any() \u5982\u679c\u6307\u5b9a\u7684\u8c13\u8bcd\u9002\u7528\u4e8e\u5217\u8868\u4e2d\u7684\u81f3\u5c11\u4e00\u4e2a\u5143\u7d20\uff0c\u5219\u8fd4\u56de true \uff0c\u5426\u5219\u8fd4\u56de false \u3002 all() \u5982\u679c\u6307\u5b9a\u7684\u8c13\u8bcd\u9002\u7528\u4e8e\u5217\u8868\u4e2d\u7684\u6bcf\u4e2a\u5143\u7d20\uff0c\u5219\u8fd4\u56de true \uff0c\u5426\u5219\u8fd4\u56de false \u3002 none() \u5982\u679c\u6307\u5b9a\u7684\u8c13\u8bcd\u4e0d\u9002\u7528\u4e8e\u5217\u8868\u4e2d\u7684\u4efb\u4f55\u4e00\u4e2a\u5143\u7d20\uff0c\u5219\u8fd4\u56de true \uff0c\u5426\u5219\u8fd4\u56de false \u3002 single() \u5982\u679c\u6307\u5b9a\u7684\u8c13\u8bcd\u9002\u7528\u4e8e\u5217\u8868\u4e2d\u7684\u552f\u4e00\u4e00\u4e2a\u5143\u7d20\uff0c\u5219\u8fd4\u56de true \uff0c\u5426\u5219\u8fd4\u56de false \u3002 Note \u5982\u679c\u5217\u8868\u4e3a\u7a7a\uff0c\u6216\u8005\u5217\u8868\u4e2d\u7684\u6240\u6709\u5143\u7d20\u90fd\u4e3a\u7a7a\uff0c\u5219\u8fd4\u56de NULL\u3002 Compatibility \u5728 openCypher \u4e2d\u53ea\u5b9a\u4e49\u4e86\u51fd\u6570 exists() \uff0c\u5176\u4ed6\u51e0\u4e2a\u51fd\u6570\u4f9d\u8d56\u4e8e\u5177\u4f53\u5b9e\u73b0\u3002","title":"\u8c13\u8bcd\u51fd\u6570"},{"location":"3.ngql-guide/6.functions-and-expressions/8.predicate/#_2","text":"<predicate>(<variable> IN <list> WHERE <condition>)","title":"\u8bed\u6cd5"},{"location":"3.ngql-guide/6.functions-and-expressions/8.predicate/#_3","text":"nebula> RETURN any(n IN [1, 2, 3, 4, 5, NULL] \\ WHERE n > 2) AS r; +------+ | r | +------+ | true | +------+ nebula> RETURN single(n IN range(1, 5) \\ WHERE n == 3) AS r; +------+ | r | +------+ | true | +------+ nebula> RETURN none(n IN range(1, 3) \\ WHERE n == 0) AS r; +------+ | r | +------+ | true | +------+ nebula> WITH [1, 2, 3, 4, 5, NULL] AS a \\ RETURN any(n IN a WHERE n > 2); +-------------------------+ | any(n IN a WHERE (n>2)) | +-------------------------+ | true | +-------------------------+ nebula> MATCH p = (n:player{name:\"LeBron James\"})<-[:follow]-(m) \\ RETURN nodes(p)[0].player.name AS n1, nodes(p)[1].player.name AS n2, \\ all(n IN nodes(p) WHERE n.player.name NOT STARTS WITH \"D\") AS b; +----------------+-------------------+-------+ | n1 | n2 | b | +----------------+-------------------+-------+ | \"LeBron James\" | \"Danny Green\" | false | | \"LeBron James\" | \"Dejounte Murray\" | false | | \"LeBron James\" | \"Chris Paul\" | true | | \"LeBron James\" | \"Kyrie Irving\" | true | | \"LeBron James\" | \"Carmelo Anthony\" | true | | \"LeBron James\" | \"Dwyane Wade\" | false | +----------------+-------------------+-------+ nebula> MATCH p = (n:player{name:\"LeBron James\"})-[:follow]->(m) \\ RETURN single(n IN nodes(p) WHERE n.player.age > 40) AS b; +------+ | b | +------+ | true | +------+ nebula> MATCH (n:player) \\ RETURN exists(n.player.id), n IS NOT NULL; +---------------------+---------------+ | exists(n.player.id) | n IS NOT NULL | +---------------------+---------------+ | false | true | ... nebula> MATCH (n:player) \\ WHERE exists(n['name']) \\ RETURN n; +---------------------------------------------------------------+ | n | +---------------------------------------------------------------+ | (\"player105\" :player{age: 31, name: \"Danny Green\"}) | | (\"player109\" :player{age: 34, name: \"Tiago Splitter\"}) | | (\"player111\" :player{age: 38, name: \"David West\"}) | ...","title":"\u793a\u4f8b"},{"location":"3.ngql-guide/7.general-query-statements/2.match/","text":"MATCH \u00b6 MATCH \u8bed\u53e5\u63d0\u4f9b\u57fa\u4e8e\u6a21\u5f0f\uff08Pattern\uff09\u5339\u914d\u7684\u641c\u7d22\u529f\u80fd\uff0c\u5176\u901a\u8fc7\u5b9a\u4e49\u4e00\u4e2a\u6216\u591a\u4e2a\u6a21\u5f0f\uff0c\u5141\u8bb8\u5728 NebulaGraph \u4e2d\u67e5\u627e\u4e0e\u6a21\u5f0f\u5339\u914d\u7684\u6570\u636e\u3002\u5728\u68c0\u7d22\u5230\u5339\u914d\u7684\u6570\u636e\u540e\uff0c\u7528\u6237\u53ef\u4ee5\u4f7f\u7528 RETURN \u5b50\u53e5\u5c06\u5176\u4f5c\u4e3a\u7ed3\u679c\u8fd4\u56de\u3002 \u5728\u672c\u6587\u4e2d\uff0c\u6211\u4eec\u5c06\u4f7f\u7528\u540d\u4e3a basketballplayer \u7684\u6d4b\u8bd5\u6570\u636e\u96c6\u6765\u6f14\u793a MATCH \u8bed\u53e5\u7684\u4f7f\u7528\u3002 \u8bed\u6cd5 \u00b6 MATCH \u8bed\u53e5\u7684\u8bed\u6cd5\u76f8\u8f83\u4e8e\u5176\u4ed6\u67e5\u8be2\u8bed\u53e5\uff08\u5982 GO \u548c LOOKUP \uff09\u66f4\u5177\u7075\u6d3b\u6027\u3002\u5728\u8fdb\u884c\u67e5\u8be2\u65f6\uff0c MATCH \u8bed\u53e5\u4f7f\u7528\u7684\u8def\u5f84\u7c7b\u578b\u662f trail \uff0c\u8fd9\u610f\u5473\u7740\u70b9\u53ef\u4ee5\u91cd\u590d\u51fa\u73b0\uff0c\u4f46\u8fb9\u4e0d\u80fd\u91cd\u590d\u3002 MATCH \u8bed\u6cd5\u7684\u57fa\u672c\u7ed3\u6784\u5982\u4e0b\uff1a MATCH <pattern> [<clause_1>] RETURN <output> [<clause_2>]; pattern \uff1a MATCH \u8bed\u53e5\u652f\u6301\u5339\u914d\u4e00\u4e2a\u6216\u591a\u4e2a\u6a21\u5f0f\uff0c\u591a\u4e2a\u6a21\u5f0f\u4e4b\u95f4\u7528\u82f1\u6587\u9017\u53f7\uff08,\uff09\u5206\u9694\u3002\u4f8b\u5982 (a)-[]->(b),(c)-[]->(d) \u3002Pattern \u7684\u8be6\u7ec6\u8bf4\u660e\u8bf7\u53c2\u89c1 \u6a21\u5f0f \u3002 clause_1 \uff1a\u652f\u6301 WHERE \u3001 WITH \u3001 UNWIND \u3001 OPTIONAL MATCH \u5b50\u53e5\uff0c\u4e5f\u53ef\u4ee5\u4f7f\u7528 MATCH \u4f5c\u4e3a\u5b50\u53e5\u3002 output \uff1a\u5b9a\u4e49\u9700\u8981\u8fd4\u56de\u8f93\u51fa\u7ed3\u679c\u7684\u5217\u8868\u540d\u79f0\u3002\u53ef\u4ee5\u4f7f\u7528 AS \u8bbe\u7f6e\u5217\u8868\u7684\u522b\u540d\u3002 clause_2 \uff1a\u652f\u6301 ORDER BY \u3001 LIMIT \u5b50\u53e5\u3002 \u5386\u53f2\u7248\u672c\u517c\u5bb9\u6027 \u4ece 3.5.0 \u7248\u672c\u5f00\u59cb\uff0c MATCH \u8bed\u53e5\u652f\u6301\u5168\u8868\u626b\u63cf\uff0c\u5373\u5728\u4e0d\u4f7f\u7528\u4efb\u4f55\u7d22\u5f15\u6216\u8005\u8fc7\u6ee4\u6761\u4ef6\u7684\u60c5\u51b5\u4e0b\u53ef\u904d\u5386\u56fe\u4e2d\u70b9\u6216\u8fb9\u3002\u5728\u6b64\u4e4b\u524d\u7684\u7248\u672c\u4e2d\uff0cMATCH \u8bed\u53e5\u5728\u67d0\u4e9b\u60c5\u51b5\u4e0b\u9700\u8981\u7d22\u5f15\u624d\u80fd\u6267\u884c\u67e5\u8be2\u6216\u8005\u9700\u8981\u4f7f\u7528 LIMIT \u9650\u5236\u8f93\u51fa\u7ed3\u679c\u6570\u91cf\u3002 \u4ece 3.0.0 \u7248\u672c\u5f00\u59cb\uff0c\u4e3a\u4e86\u533a\u522b\u4e0d\u540c Tag \u7684\u5c5e\u6027\uff0c\u8fd4\u56de\u5c5e\u6027\u65f6\u5fc5\u987b\u989d\u5916\u6307\u5b9a Tag \u540d\u79f0\u3002\u5373\u4ece RETURN <\u53d8\u91cf\u540d>.<\u5c5e\u6027\u540d> \u6539\u4e3a RETURN <\u53d8\u91cf\u540d>.<Tag\u540d>.<\u5c5e\u6027\u540d> \u3002 \u4f7f\u7528\u8bf4\u660e \u00b6 \u5c3d\u91cf\u907f\u514d\u6267\u884c\u5168\u8868\u626b\u63cf\uff0c\u56e0\u4e3a\u8fd9\u53ef\u80fd\u5bfc\u81f4\u67e5\u8be2\u6027\u80fd\u4e0b\u964d\uff1b\u5e76\u4e14\u5982\u679c\u5728\u8fdb\u884c\u5168\u8868\u626b\u63cf\u65f6\u5185\u5b58\u4e0d\u8db3\uff0c\u53ef\u80fd\u4f1a\u5bfc\u81f4\u67e5\u8be2\u5931\u8d25\uff0c\u7cfb\u7edf\u4f1a\u63d0\u793a\u62a5\u9519\u3002\u5efa\u8bae\u4f7f\u7528\u5177\u6709\u8fc7\u6ee4\u6761\u4ef6\u6216\u6307\u5b9a Tag\u3001\u8fb9\u7c7b\u578b\u7684\u67e5\u8be2\uff0c\u4f8b\u5982 MATCH (v:player) RETURN v.player.name AS Name \u8bed\u53e5\u4e2d\u7684 v:player \u548c v.player.name \u3002 \u53ef\u4e3a Tag\u3001Edge type \u6216 Tag\u3001Edge type \u7684\u67d0\u4e2a\u5c5e\u6027\u521b\u5efa\u7d22\u5f15\uff0c\u4ee5\u63d0\u9ad8\u67e5\u8be2\u6027\u80fd\u3002\u4f8b\u5982\uff0c\u7528\u6237\u53ef\u4ee5\u4e3a player Tag \u521b\u5efa\u7d22\u5f15\uff0c\u6216\u8005\u4e3a player Tag \u7684 name \u5c5e\u6027\u521b\u5efa\u7d22\u5f15\u3002\u6709\u5173\u7d22\u5f15\u7684\u4f7f\u7528\u53ca\u6ce8\u610f\u4e8b\u9879\uff0c\u8bf7\u53c2\u89c1 \u4f7f\u7528\u7d22\u5f15\u5fc5\u8bfb \u3002 \u76ee\u524d MATCH \u8bed\u53e5\u65e0\u6cd5\u67e5\u8be2\u5230\u60ac\u6302\u8fb9\u3002 \u4f7f\u7528\u6a21\u5f0f \u00b6 \u5339\u914d\u70b9 \u00b6 \u7528\u6237\u53ef\u4ee5\u5728\u4e00\u5bf9\u62ec\u53f7\u4e2d\u4f7f\u7528\u81ea\u5b9a\u4e49\u53d8\u91cf\u6765\u8868\u793a\u6a21\u5f0f\u4e2d\u7684\u70b9\u3002\u4f8b\u5982 (v) \u3002 nebula> MATCH (v) \\ RETURN v \\ LIMIT 3; +-----------------------------------------------------------+ | v | +-----------------------------------------------------------+ | (\"player102\" :player{age: 33, name: \"LaMarcus Aldridge\"}) | | (\"player106\" :player{age: 25, name: \"Kyle Anderson\"}) | | (\"player115\" :player{age: 40, name: \"Kobe Bryant\"}) | +-----------------------------------------------------------+ \u5339\u914d Tag \u00b6 \u5386\u53f2\u7248\u672c\u517c\u5bb9\u6027 \u5728NebulaGraph 3.0.0 \u4e4b\u524d\uff0c\u5339\u914d Tag \u7684\u524d\u63d0\u662f Tag \u672c\u8eab\u6709\u7d22\u5f15\u6216\u8005 Tag \u7684\u67d0\u4e2a\u5c5e\u6027\u6709\u7d22\u5f15\uff0c\u5426\u5219\uff0c\u7528\u6237\u65e0\u6cd5\u57fa\u4e8e\u8be5 Tag \u6267\u884c MATCH \u8bed\u53e5\u3002\u4eceNebulaGraph 3.0.0 \u5f00\u59cb\uff0c\u5339\u914d Tag \u53ef\u4ee5\u4e0d\u521b\u5efa\u7d22\u5f15\uff0c\u4f46\u9700\u8981\u4f7f\u7528 LIMIT \u9650\u5236\u8f93\u51fa\u7ed3\u679c\u6570\u91cf\u3002\u4eceNebulaGraph 3.5.0 \u5f00\u59cb\uff0c MATCH \u8bed\u53e5\u652f\u6301\u5168\u8868\u626b\u63cf\uff0c\u65e0\u9700\u4e3a Tag \u6216 Tag \u7684\u67d0\u4e2a\u5c5e\u6027\u521b\u5efa\u7d22\u5f15\uff0c\u6216\u8005\u4f7f\u7528 LIMIT \u9650\u5236\u8f93\u51fa\u7ed3\u679c\u6570\u91cf\uff0c\u5373\u53ef\u6267\u884c MATCH \u8bed\u53e5\u3002 \u7528\u6237\u53ef\u4ee5\u5728\u70b9\u7684\u53f3\u4fa7\u7528 :<tag_name> \u8868\u793a\u6a21\u5f0f\u4e2d\u7684 Tag\u3002 nebula> MATCH (v:player) \\ RETURN v; +-----------------------------------------------------------+ | v | +-----------------------------------------------------------+ | (\"player102\" :player{age: 33, name: \"LaMarcus Aldridge\"}) | | (\"player106\" :player{age: 25, name: \"Kyle Anderson\"}) | | (\"player115\" :player{age: 40, name: \"Kobe Bryant\"}) | ... \u9700\u8981\u5339\u914d\u62e5\u6709\u591a\u4e2a Tag \u7684\u70b9\uff0c\u53ef\u4ee5\u7528\u82f1\u6587\u5192\u53f7\uff08:\uff09\u3002 nebula> CREATE TAG actor (name string, age int); nebula> INSERT VERTEX actor(name, age) VALUES \"player100\":(\"Tim Duncan\", 42); nebula> MATCH (v:player:actor) \\ RETURN v; +----------------------------------------------------------------------------------------+ | v | +----------------------------------------------------------------------------------------+ | (\"player100\" :actor{age: 42, name: \"Tim Duncan\"} :player{age: 42, name: \"Tim Duncan\"}) | +----------------------------------------------------------------------------------------+ \u5339\u914d\u70b9\u7684\u5c5e\u6027 \u00b6 \u7528\u6237\u53ef\u4ee5\u5728 Tag \u7684\u53f3\u4fa7\u7528 {<prop_name>: <prop_value>} \u8868\u793a\u6a21\u5f0f\u4e2d\u70b9\u7684\u5c5e\u6027\u3002 # \u4f7f\u7528\u5c5e\u6027 name \u641c\u7d22\u5339\u914d\u7684\u70b9\u3002 nebula> MATCH (v:player{name:\"Tim Duncan\"}) \\ RETURN v; +----------------------------------------------------+ | v | +----------------------------------------------------+ | (\"player100\" :player{age: 42, name: \"Tim Duncan\"}) | +----------------------------------------------------+ \u4f7f\u7528 WHERE \u5b50\u53e5\u4e5f\u53ef\u4ee5\u5b9e\u73b0\u76f8\u540c\u7684\u64cd\u4f5c\uff1a nebula> MATCH (v:player) \\ WHERE v.player.name == \"Tim Duncan\" \\ RETURN v; +----------------------------------------------------+ | v | +----------------------------------------------------+ | (\"player100\" :player{age: 42, name: \"Tim Duncan\"}) | +----------------------------------------------------+ openCypher \u517c\u5bb9\u6027 \u5728 openCypher 9 \u4e2d\uff0c = \u662f\u76f8\u7b49\u8fd0\u7b97\u7b26\uff0c\u5728 nGQL \u4e2d\uff0c == \u662f\u76f8\u7b49\u8fd0\u7b97\u7b26\uff0c = \u662f\u8d4b\u503c\u8fd0\u7b97\u7b26\u3002 \u4f7f\u7528 WHERE \u5b50\u53e5\u76f4\u63a5\u5339\u914d\u70b9\u7684\u5c5e\u6027\u3002 nebula> MATCH (v) \\ WITH v, properties(v) as props, keys(properties(v)) as kk \\ WHERE [i in kk where props[i] == \"Tim Duncan\"] \\ RETURN v; +----------------------------------------------------+ | v | +----------------------------------------------------+ | (\"player100\" :player{age: 42, name: \"Tim Duncan\"}) | +----------------------------------------------------+ nebula> WITH ['Tim Duncan', 'Yao Ming'] AS names \\ MATCH (v1:player)-->(v2:player) \\ WHERE v1.player.name in names \\ RETURN v1, v2; +----------------------------------------------------+----------------------------------------------------------+ | v1 | v2 | +----------------------------------------------------+----------------------------------------------------------+ | (\"player133\" :player{age: 38, name: \"Yao Ming\"}) | (\"player114\" :player{age: 39, name: \"Tracy McGrady\"}) | | (\"player133\" :player{age: 38, name: \"Yao Ming\"}) | (\"player144\" :player{age: 47, name: \"Shaquille O'Neal\"}) | | (\"player100\" :player{age: 42, name: \"Tim Duncan\"}) | (\"player101\" :player{age: 36, name: \"Tony Parker\"}) | | (\"player100\" :player{age: 42, name: \"Tim Duncan\"}) | (\"player125\" :player{age: 41, name: \"Manu Ginobili\"}) | +----------------------------------------------------+----------------------------------------------------------+ \u5339\u914d\u70b9 ID \u00b6 \u7528\u6237\u53ef\u4ee5\u4f7f\u7528\u70b9 ID \u53bb\u5339\u914d\u70b9\u3002 id() \u51fd\u6570\u53ef\u4ee5\u68c0\u7d22\u70b9\u7684 ID\u3002 nebula> MATCH (v) \\ WHERE id(v) == 'player101' \\ RETURN v; +-----------------------------------------------------+ | v | +-----------------------------------------------------+ | (\"player101\" :player{age: 36, name: \"Tony Parker\"}) | +-----------------------------------------------------+ \u8981\u5339\u914d\u591a\u4e2a\u70b9\u7684 ID\uff0c\u53ef\u4ee5\u7528 WHERE id(v) IN [vid_list] \u6216\u8005 WHERE id(v) IN {vid_list} \u3002 nebula> MATCH (v:player { name: 'Tim Duncan' })--(v2) \\ WHERE id(v2) IN [\"player101\", \"player102\"] \\ RETURN v2; +-----------------------------------------------------------+ | v2 | +-----------------------------------------------------------+ | (\"player101\" :player{age: 36, name: \"Tony Parker\"}) | | (\"player101\" :player{age: 36, name: \"Tony Parker\"}) | | (\"player102\" :player{age: 33, name: \"LaMarcus Aldridge\"}) | +-----------------------------------------------------------+ nebula> MATCH (v) WHERE id(v) IN {\"player100\", \"player101\"} \\ RETURN v.player.name AS name; +---------------+ | name | +---------------+ | \"Tony Parker\" | | \"Tim Duncan\" | +---------------+ \u5339\u914d\u8fde\u63a5\u7684\u70b9 \u00b6 \u7528\u6237\u53ef\u4ee5\u4f7f\u7528 -- \u7b26\u53f7\u8868\u793a\u4e24\u4e2a\u65b9\u5411\u7684\u8fb9\uff0c\u5e76\u5339\u914d\u8fd9\u4e9b\u8fb9\u8fde\u63a5\u7684\u70b9\u3002 \u5386\u53f2\u7248\u672c\u517c\u5bb9\u6027 \u5728 nGQL 1.x \u4e2d\uff0c -- \u7b26\u53f7\u7528\u4e8e\u884c\u5185\u6ce8\u91ca\uff0c\u4ece nGQL 2.x \u8d77\uff0c -- \u7b26\u53f7\u8868\u793a\u51fa\u8fb9\u6216\u5165\u8fb9\uff0c\u4e0d\u518d\u7528\u4e8e\u6ce8\u91ca\u3002 nebula> MATCH (v:player{name:\"Tim Duncan\"})--(v2:player) \\ RETURN v2.player.name AS Name; +---------------------+ | Name | +---------------------+ | \"Manu Ginobili\" | | \"Manu Ginobili\" | | \"Dejounte Murray\" | ... \u7528\u6237\u53ef\u4ee5\u5728 -- \u7b26\u53f7\u4e0a\u589e\u52a0 < \u6216 > \u7b26\u53f7\u6307\u5b9a\u8fb9\u7684\u65b9\u5411\u3002 # -->\u8868\u793a\u8fb9\u4ece v \u5f00\u59cb\uff0c\u6307\u5411 v2\u3002\u5bf9\u4e8e\u70b9 v \u6765\u8bf4\u662f\u51fa\u8fb9\uff0c\u5bf9\u4e8e\u70b9 v2 \u6765\u8bf4\u662f\u5165\u8fb9\u3002 nebula> MATCH (v:player{name:\"Tim Duncan\"})-->(v2:player) \\ RETURN v2.player.name AS Name; +-----------------+ | Name | +-----------------+ | \"Tony Parker\" | | \"Manu Ginobili\" | +-----------------+ \u5982\u679c\u9700\u8981\u5224\u65ad\u76ee\u6807\u70b9\uff0c\u53ef\u4ee5\u4f7f\u7528 CASE \u8868\u8fbe\u5f0f\u3002 nebula> MATCH (v:player{name:\"Tim Duncan\"})--(v2) \\ RETURN \\ CASE WHEN v2.team.name IS NOT NULL \\ THEN v2.team.name \\ WHEN v2.player.name IS NOT NULL \\ THEN v2.player.name END AS Name; +---------------------+ | Name | +---------------------+ | \"Manu Ginobili\" | | \"Manu Ginobili\" | | \"Spurs\" | | \"Dejounte Murray\" | ... \u5982\u679c\u9700\u8981\u6269\u5c55\u6a21\u5f0f\uff0c\u53ef\u4ee5\u589e\u52a0\u66f4\u591a\u70b9\u548c\u8fb9\u3002 nebula> MATCH (v:player{name:\"Tim Duncan\"})-->(v2)<--(v3) \\ RETURN v3.player.name AS Name; +---------------------+ | Name | +---------------------+ | \"Dejounte Murray\" | | \"LaMarcus Aldridge\" | | \"Marco Belinelli\" | ... \u5982\u679c\u4e0d\u9700\u8981\u5f15\u7528\u70b9\uff0c\u53ef\u4ee5\u7701\u7565\u62ec\u53f7\u4e2d\u8868\u793a\u70b9\u7684\u53d8\u91cf\u3002 nebula> MATCH (v:player{name:\"Tim Duncan\"})-->()<--(v3) \\ RETURN v3.player.name AS Name; +---------------------+ | Name | +---------------------+ | \"Dejounte Murray\" | | \"LaMarcus Aldridge\" | | \"Marco Belinelli\" | ... \u5339\u914d\u8def\u5f84 \u00b6 \u8fde\u63a5\u8d77\u6765\u7684\u70b9\u548c\u8fb9\u6784\u6210\u4e86\u8def\u5f84\u3002\u7528\u6237\u53ef\u4ee5\u4f7f\u7528\u81ea\u5b9a\u4e49\u53d8\u91cf\u547d\u540d\u8def\u5f84\u3002 nebula> MATCH p=(v:player{name:\"Tim Duncan\"})-->(v2) \\ RETURN p; +--------------------------------------------------------------------------------------------------------------------------------------+ | p | +--------------------------------------------------------------------------------------------------------------------------------------+ | <(\"player100\" :player{age: 42, name: \"Tim Duncan\"})-[:serve@0 {end_year: 2016, start_year: 1997}]->(\"team204\" :team{name: \"Spurs\"})> | | <(\"player100\" :player{age: 42, name: \"Tim Duncan\"})-[:follow@0 {degree: 95}]->(\"player101\" :player{age: 36, name: \"Tony Parker\"})> | | <(\"player100\" :player{age: 42, name: \"Tim Duncan\"})-[:follow@0 {degree: 95}]->(\"player125\" :player{age: 41, name: \"Manu Ginobili\"})> | +--------------------------------------------------------------------------------------------------------------------------------------+ openCypher \u517c\u5bb9\u6027 \u5728 nGQL \u4e2d\uff0c @ \u7b26\u53f7\u8868\u793a\u8fb9\u7684 rank\uff0c\u5728 openCypher \u4e2d\uff0c\u6ca1\u6709 rank \u6982\u5ff5\u3002 \u5339\u914d\u8fb9 \u00b6 nebula> MATCH ()<-[e]-() \\ RETURN e \\ LIMIT 3; +----------------------------------------------------+ | e | +----------------------------------------------------+ | [:follow \"player101\"->\"player102\" @0 {degree: 90}] | | [:follow \"player103\"->\"player102\" @0 {degree: 70}] | | [:follow \"player135\"->\"player102\" @0 {degree: 80}] | +----------------------------------------------------+ \u5339\u914d Edge type \u00b6 \u548c\u70b9\u4e00\u6837\uff0c\u7528\u6237\u53ef\u4ee5\u7528 :<edge_type> \u8868\u793a\u6a21\u5f0f\u4e2d\u7684 Edge type\uff0c\u4f8b\u5982 -[e:follow]- \u3002 \u5386\u53f2\u7248\u672c\u517c\u5bb9\u6027 \u5728NebulaGraph 3.0.0 \u4e4b\u524d\uff0c\u5339\u914d Edge Type \u7684\u524d\u63d0\u662f Edge type \u672c\u8eab\u6709\u5bf9\u5e94\u5c5e\u6027\u7684\u7d22\u5f15\uff0c\u5426\u5219\uff0c\u7528\u6237\u65e0\u6cd5\u57fa\u4e8e Edge Type \u6267\u884c MATCH \u8bed\u53e5\u3002\u4eceNebulaGraph 3.0.0 \u5f00\u59cb\uff0c\u5339\u914d Edge Type \u53ef\u4ee5\u4e0d\u521b\u5efa\u7d22\u5f15\uff0c\u4f46\u9700\u8981\u4f7f\u7528 LIMIT \u9650\u5236\u8f93\u51fa\u7ed3\u679c\u6570\u91cf\uff0c\u5e76\u4e14\u5fc5\u987b\u6307\u5b9a\u8fb9\u7684\u65b9\u5411\u3002\u4eceNebulaGraph 3.5.0 \u5f00\u59cb\uff0c\u65e0\u9700\u4e3a Edge Type \u521b\u5efa\u7d22\u5f15\u6216\u8005\u4f7f\u7528 LIMIT \u9650\u5236\u8f93\u51fa\u7ed3\u679c\u6570\u91cf\uff0c\u5373\u53ef\u4f7f\u7528 MATCH \u8bed\u53e5\u5339\u914d\u8fb9\u3002 nebula> MATCH ()-[e:follow]->() \\ RETURN e; +----------------------------------------------------+ | e | +----------------------------------------------------+ | [:follow \"player102\"->\"player100\" @0 {degree: 75}] | | [:follow \"player102\"->\"player101\" @0 {degree: 75}] | | [:follow \"player129\"->\"player116\" @0 {degree: 90}] | ... \u5339\u914d\u8fb9\u7684\u5c5e\u6027 \u00b6 \u7528\u6237\u53ef\u4ee5\u7528 {<prop_name>: <prop_value>} \u8868\u793a\u6a21\u5f0f\u4e2d Edge type \u7684\u5c5e\u6027\uff0c\u4f8b\u5982 [e:follow{likeness:95}] \u3002 nebula> MATCH (v:player{name:\"Tim Duncan\"})-[e:follow{degree:95}]->(v2) \\ RETURN e; +--------------------------------------------------------+ | e | +--------------------------------------------------------+ | [:follow \"player100\"->\"player101\" @0 {degree: 95}] | | [:follow \"player100\"->\"player125\" @0 {degree: 95}] | +--------------------------------------------------------+ \u4f7f\u7528 WHERE \u5b50\u53e5\u76f4\u63a5\u5339\u914d\u8fb9\u7684\u5c5e\u6027\u3002 nebula> MATCH ()-[e]->() \\ WITH e, properties(e) as props, keys(properties(e)) as kk \\ WHERE [i in kk where props[i] == 90] \\ RETURN e; +----------------------------------------------------+ | e | +----------------------------------------------------+ | [:follow \"player125\"->\"player100\" @0 {degree: 90}] | | [:follow \"player140\"->\"player114\" @0 {degree: 90}] | | [:follow \"player133\"->\"player144\" @0 {degree: 90}] | | [:follow \"player133\"->\"player114\" @0 {degree: 90}] | ... +----------------------------------------------------+ \u5339\u914d\u591a\u4e2a Edge type \u00b6 \u4f7f\u7528 | \u53ef\u4ee5\u5339\u914d\u591a\u4e2a Edge type\uff0c\u4f8b\u5982 [e:follow|:serve] \u3002\u7b2c\u4e00\u4e2a Edge type \u524d\u7684\u82f1\u6587\u5192\u53f7\uff08:\uff09\u4e0d\u53ef\u7701\u7565\uff0c\u540e\u7eed Edge type \u524d\u7684\u82f1\u6587\u5192\u53f7\u53ef\u4ee5\u7701\u7565\uff0c\u4f8b\u5982 [e:follow|serve] \u3002 nebula> MATCH (v:player{name:\"Tim Duncan\"})-[e:follow|:serve]->(v2) \\ RETURN e; +---------------------------------------------------------------------------+ | e | +---------------------------------------------------------------------------+ | [:follow \"player100\"->\"player101\" @0 {degree: 95}] | | [:follow \"player100\"->\"player125\" @0 {degree: 95}] | | [:serve \"player100\"->\"team204\" @0 {end_year: 2016, start_year: 1997}] | +---------------------------------------------------------------------------+ \u5339\u914d\u591a\u6761\u8fb9 \u00b6 \u7528\u6237\u53ef\u4ee5\u6269\u5c55\u6a21\u5f0f\uff0c\u5339\u914d\u8def\u5f84\u4e2d\u7684\u591a\u6761\u8fb9\u3002 nebula> MATCH (v:player{name:\"Tim Duncan\"})-[]->(v2)<-[e:serve]-(v3) \\ RETURN v2, v3; +----------------------------------+-----------------------------------------------------------+ | v2 | v3 | +----------------------------------+-----------------------------------------------------------+ | (\"team204\" :team{name: \"Spurs\"}) | (\"player104\" :player{age: 32, name: \"Marco Belinelli\"}) | | (\"team204\" :team{name: \"Spurs\"}) | (\"player101\" :player{age: 36, name: \"Tony Parker\"}) | | (\"team204\" :team{name: \"Spurs\"}) | (\"player102\" :player{age: 33, name: \"LaMarcus Aldridge\"}) | ... \u5339\u914d\u5b9a\u957f\u8def\u5f84 \u00b6 \u7528\u6237\u53ef\u4ee5\u5728\u6a21\u5f0f\u4e2d\u4f7f\u7528 :<edge_type>*<hop> \u5339\u914d\u5b9a\u957f\u8def\u5f84\u3002 hop \u5fc5\u987b\u662f\u4e00\u4e2a\u975e\u8d1f\u6574\u6570\u3002 nebula> MATCH p=(v:player{name:\"Tim Duncan\"})-[e:follow*2]->(v2) \\ RETURN DISTINCT v2 AS Friends; +-----------------------------------------------------------+ | Friends | +-----------------------------------------------------------+ | (\"player100\" :player{age: 42, name: \"Tim Duncan\"}) | | (\"player125\" :player{age: 41, name: \"Manu Ginobili\"}) | | (\"player102\" :player{age: 33, name: \"LaMarcus Aldridge\"}) | +-----------------------------------------------------------+ \u5982\u679c hop \u4e3a 0\uff0c\u6a21\u5f0f\u4f1a\u5339\u914d\u8def\u5f84\u4e0a\u7684\u8d77\u59cb\u70b9\u3002 nebula> MATCH (v:player{name:\"Tim Duncan\"}) -[*0]-> (v2) \\ RETURN v2; +----------------------------------------------------+ | v2 | +----------------------------------------------------+ | (\"player100\" :player{age: 42, name: \"Tim Duncan\"}) | +----------------------------------------------------+ Note \u5728\u5bf9\u5339\u914d\u7684\u591a\u8df3\u8fb9\u8fdb\u884c\u8fc7\u6ee4\u65f6\uff0c\u5982\u5bf9 -[e:follow*2]-> \u4e2d\u7684 e \u8fdb\u884c\u8fc7\u6ee4\uff0c\u6b64\u65f6\u7684 e \u4e0d\u518d\u662f\u5355\u6761\u8fb9\u7684\u6570\u636e\u7c7b\u578b\uff0c\u800c\u662f\u4e00\u4e2a\u5305\u542b\u591a\u6761\u8fb9\u7684\u5217\u8868\uff0c\u4f8b\u5982\uff1a \u4ee5\u4e0b\u8bed\u53e5\u53ef\u4ee5\u8fd0\u884c\u4f46\u662f\u6ca1\u6709\u8fd4\u56de\u6570\u636e\uff0c\u56e0\u4e3a e \u662f\u4e00\u4e2a\u5217\u8868\uff0c\u6ca1\u6709 .degree \u7684\u5c5e\u6027\u3002 nebula> MATCH p=(v:player{name:\"Tim Duncan\"})-[e:follow*2]->(v2) \\ WHERE e.degree > 1 \\ RETURN DISTINCT v2 AS Friends; \u8fd9\u662f\u6b63\u786e\u7684\u8868\u8fbe\uff1a nebula> MATCH p=(v:player{name:\"Tim Duncan\"})-[e:follow*2]->(v2) \\ WHERE ALL(e_ in e WHERE e_.degree > 0) \\ RETURN DISTINCT v2 AS Friends; \u8fdb\u4e00\u6b65\uff0c\u8fd9\u662f\u8868\u8fbe\u5bf9\u591a\u8df3\u8fb9\u7684\u7b2c\u4e00\u8df3\u7684\u8fb9\u5c5e\u6027\u8fc7\u6ee4\u7684\u8868\u8fbe\uff1a nebula> MATCH p=(v:player{name:\"Tim Duncan\"})-[e:follow*2]->(v2) \\ WHERE e[0].degree > 98 \\ RETURN DISTINCT v2 AS Friends; \u5339\u914d\u53d8\u957f\u8def\u5f84 \u00b6 \u7528\u6237\u53ef\u4ee5\u5728\u6a21\u5f0f\u4e2d\u4f7f\u7528 :<edge_type>*[minHop..maxHop] \u5339\u914d\u53d8\u957f\u8def\u5f84\u3002 Caution \u5982\u679c\u672a\u8bbe\u7f6e maxHop \u53ef\u80fd\u4f1a\u5bfc\u81f4 graph \u670d\u52a1 OOM\uff0c\u8bf7\u8c28\u614e\u6267\u884c\u8be5\u547d\u4ee4\u3002 \u53c2\u6570 \u8bf4\u660e minHop \u53ef\u9009\u9879\u3002\u8868\u793a\u8def\u5f84\u7684\u6700\u5c0f\u957f\u5ea6\u3002 minHop \u5fc5\u987b\u662f\u4e00\u4e2a\u975e\u8d1f\u6574\u6570\uff0c\u9ed8\u8ba4\u503c\u4e3a 1\u3002 maxHop \u53ef\u9009\u9879\u3002\u8868\u793a\u8def\u5f84\u7684\u6700\u5927\u957f\u5ea6\u3002 maxHop \u5fc5\u987b\u662f\u4e00\u4e2a\u975e\u8d1f\u6574\u6570\uff0c\u9ed8\u8ba4\u503c\u4e3a\u65e0\u7a77\u5927\u3002 \u5982\u679c\u672a\u6307\u5b9a minHop \u548c maxHop \uff0c\u4ec5\u8bbe\u7f6e\u4e86 :<edge_type>* \uff0c\u5219\u4e8c\u8005\u90fd\u5e94\u7528\u9ed8\u8ba4\u503c\uff0c\u5373 minHop \u4e3a 1\uff0c maxHop \u4e3a\u65e0\u7a77\u5927\u3002 nebula> MATCH p=(v:player{name:\"Tim Duncan\"})-[e:follow*]->(v2) \\ RETURN v2 AS Friends; +-----------------------------------------------------------+ | Friends | +-----------------------------------------------------------+ | (\"player125\" :player{age: 41, name: \"Manu Ginobili\"}) | | (\"player101\" :player{age: 36, name: \"Tony Parker\"}) | ... nebula> MATCH p=(v:player{name:\"Tim Duncan\"})-[e:follow*1..3]->(v2) \\ RETURN v2 AS Friends; +-----------------------------------------------------------+ | Friends | +-----------------------------------------------------------+ | (\"player101\" :player{age: 36, name: \"Tony Parker\"}) | | (\"player125\" :player{age: 41, name: \"Manu Ginobili\"}) | | (\"player100\" :player{age: 42, name: \"Tim Duncan\"}) | ... nebula> MATCH p=(v:player{name:\"Tim Duncan\"})-[e:follow*1..]->(v2) \\ RETURN v2 AS Friends; +-----------------------------------------------------------+ | Friends | +-----------------------------------------------------------+ | (\"player125\" :player{age: 41, name: \"Manu Ginobili\"}) | | (\"player101\" :player{age: 36, name: \"Tony Parker\"}) | | (\"player100\" :player{age: 42, name: \"Tim Duncan\"}) | ... \u7528\u6237\u53ef\u4ee5\u4f7f\u7528 DISTINCT \u5173\u952e\u5b57\u805a\u5408\u91cd\u590d\u7ed3\u679c\u3002 nebula> MATCH p=(v:player{name:\"Tim Duncan\"})-[e:follow*1..3]->(v2:player) \\ RETURN DISTINCT v2 AS Friends, count(v2); +-----------------------------------------------------------+-----------+ | Friends | count(v2) | +-----------------------------------------------------------+-----------+ | (\"player102\" :player{age: 33, name: \"LaMarcus Aldridge\"}) | 1 | | (\"player100\" :player{age: 42, name: \"Tim Duncan\"}) | 4 | | (\"player101\" :player{age: 36, name: \"Tony Parker\"}) | 3 | | (\"player125\" :player{age: 41, name: \"Manu Ginobili\"}) | 3 | +-----------------------------------------------------------+-----------+ \u5982\u679c minHop \u4e3a 0 \uff0c\u6a21\u5f0f\u4f1a\u5339\u914d\u8def\u5f84\u4e0a\u7684\u8d77\u59cb\u70b9\u3002\u4f8b\u5982\uff0c\u4e0e\u4e0a\u4e2a\u793a\u4f8b\u76f8\u6bd4\uff0c\u4e0b\u9762\u7684\u793a\u4f8b\u8bbe\u7f6e minHop \u4e3a 0 \u3002\u6b64\u65f6\uff0c\u56e0\u4e3a\u8868\u793a \"Tim Duncan\" \u7684\u70b9\u662f\u8def\u5f84\u7684\u8d77\u59cb\u70b9\uff0c\u6240\u4ee5\u5b83\u5728\u7ed3\u679c\u96c6\u4e2d\u7684\u8ba1\u6570\u4e3a 5\uff0c\u6bd4\u5728\u4e0a\u4e2a\u793a\u4f8b\u7684\u7ed3\u679c\u4e2d\u591a\u8ba1\u4e00\u6b21\u3002 nebula> MATCH p=(v:player{name:\"Tim Duncan\"})-[e:follow*0..3]->(v2:player) \\ RETURN DISTINCT v2 AS Friends, count(v2); +-----------------------------------------------------------+-----------+ | Friends | count(v2) | +-----------------------------------------------------------+-----------+ | (\"player102\" :player{age: 33, name: \"LaMarcus Aldridge\"}) | 1 | | (\"player100\" :player{age: 42, name: \"Tim Duncan\"}) | 5 | | (\"player125\" :player{age: 41, name: \"Manu Ginobili\"}) | 3 | | (\"player101\" :player{age: 36, name: \"Tony Parker\"}) | 3 | +-----------------------------------------------------------+-----------+ Note \u5f53\u5728\u6a21\u5f0f\u4e2d\u4f7f\u7528\u53d8\u91cf e \u5339\u914d\u5b9a\u957f\u6216\u8005\u53d8\u957f\u8def\u5f84\u65f6\uff0c\u4f8b\u5982 -[e:follow*0..3]-> \uff0c\u4e0d\u652f\u6301\u5728\u5176\u4ed6\u6a21\u5f0f\u4e2d\u5f15\u7528 e \u3002\u4f8b\u5982\uff0c\u4e0d\u652f\u6301\u4ee5\u4e0b\u8bed\u53e5\uff1a nebula> MATCH (v:player)-[e:like*1..3]->(n) \\ WHERE (n)-[e*1..4]->(:player) \\ RETURN v; \u5339\u914d\u591a\u4e2a Edge type \u7684\u53d8\u957f\u8def\u5f84 \u00b6 \u7528\u6237\u53ef\u4ee5\u5728\u53d8\u957f\u6216\u5b9a\u957f\u6a21\u5f0f\u4e2d\u6307\u5b9a\u591a\u4e2a Edge type\u3002 hop \u3001 minHop \u548c maxHop \u5bf9\u6240\u6709 Edge type \u90fd\u751f\u6548\u3002 nebula> MATCH p=(v:player{name:\"Tim Duncan\"})-[e:follow|serve*2]->(v2) \\ RETURN DISTINCT v2; +-----------------------------------------------------------+ | v2 | +-----------------------------------------------------------+ | (\"team204\" :team{name: \"Spurs\"}) | | (\"player100\" :player{age: 42, name: \"Tim Duncan\"}) | | (\"team215\" :team{name: \"Hornets\"}) | | (\"player125\" :player{age: 41, name: \"Manu Ginobili\"}) | | (\"player102\" :player{age: 33, name: \"LaMarcus Aldridge\"}) | +-----------------------------------------------------------+ \u5339\u914d\u591a\u4e2a\u6a21\u5f0f \u00b6 \u7528\u6237\u53ef\u4ee5\u7528\u82f1\u6587\u9017\u53f7\uff08,\uff09\u5206\u9694\u591a\u4e2a\u6a21\u5f0f\u3002 nebula> CREATE TAG INDEX IF NOT EXISTS team_index ON team(name(20)); nebula> REBUILD TAG INDEX team_index; nebula> MATCH (v1:player{name:\"Tim Duncan\"}), (v2:team{name:\"Spurs\"}) \\ RETURN v1,v2; +----------------------------------------------------+----------------------------------+ | v1 | v2 | +----------------------------------------------------+----------------------------------+ | (\"player100\" :player{age: 42, name: \"Tim Duncan\"}) | (\"team204\" :team{name: \"Spurs\"}) | +----------------------------------------------------+----------------------------------+ \u5339\u914d\u6700\u77ed\u8def\u5f84 \u00b6 \u7528\u6237\u53ef\u4ee5\u4f7f\u7528 allShortestPaths \u8fd4\u56de\u8d77\u59cb\u70b9\u5230\u76ee\u6807\u70b9\u7684\u6240\u6709\u6700\u77ed\u8def\u5f84\u3002 nebula> MATCH p = allShortestPaths((a:player{name:\"Tim Duncan\"})-[e*..5]-(b:player{name:\"Tony Parker\"})) \\ RETURN p; +------------------------------------------------------------------------------------------------------------------------------------+ | p | +------------------------------------------------------------------------------------------------------------------------------------+ | <(\"player100\" :player{age: 42, name: \"Tim Duncan\"})<-[:follow@0 {degree: 95}]-(\"player101\" :player{age: 36, name: \"Tony Parker\"})> | | <(\"player100\" :player{age: 42, name: \"Tim Duncan\"})-[:follow@0 {degree: 95}]->(\"player101\" :player{age: 36, name: \"Tony Parker\"})> | +------------------------------------------------------------------------------------------------------------------------------------+ \u7528\u6237\u53ef\u4ee5\u4f7f\u7528 shortestPath \u8fd4\u56de\u8d77\u59cb\u70b9\u5230\u76ee\u6807\u70b9\u7684\u4efb\u610f\u4e00\u6761\u6700\u77ed\u8def\u5f84\u3002 nebula> MATCH p = shortestPath((a:player{name:\"Tim Duncan\"})-[e*..5]-(b:player{name:\"Tony Parker\"})) \\ RETURN p; +------------------------------------------------------------------------------------------------------------------------------------+ | p | +------------------------------------------------------------------------------------------------------------------------------------+ | <(\"player100\" :player{age: 42, name: \"Tim Duncan\"})<-[:follow@0 {degree: 95}]-(\"player101\" :player{age: 36, name: \"Tony Parker\"})> | +------------------------------------------------------------------------------------------------------------------------------------+ \u591aMATCH\u68c0\u7d22 \u00b6 \u4e0d\u540c\u7684\u6a21\u5f0f\u6709\u4e0d\u540c\u7684\u7b5b\u9009\u6761\u4ef6\u65f6\uff0c\u53ef\u4ee5\u4f7f\u7528\u591a MATCH \uff0c\u4f1a\u8fd4\u56de\u6a21\u5f0f\u5b8c\u5168\u5339\u914d\u7684\u884c\u3002 nebula> MATCH (m)-[]->(n) WHERE id(m)==\"player100\" \\ MATCH (n)-[]->(l) WHERE id(n)==\"player125\" \\ RETURN id(m),id(n),id(l); +-------------+-------------+-------------+ | id(m) | id(n) | id(l) | +-------------+-------------+-------------+ | \"player100\" | \"player125\" | \"team204\" | | \"player100\" | \"player125\" | \"player100\" | +-------------+-------------+-------------+ OPTIONAL MATCH\u68c0\u7d22 \u00b6 \u53c2\u89c1 OPTIONAL MATCH \u3002 Performance NebulaGraph 3.6.0 \u4e2d MATCH \u8bed\u53e5\u7684\u6027\u80fd\u548c\u8d44\u6e90\u5360\u7528\u5f97\u5230\u4e86\u4f18\u5316.\u4f46\u5bf9\u6027\u80fd\u8981\u6c42\u8f83\u9ad8\u65f6\uff0c\u4ecd\u5efa\u8bae\u4f7f\u7528 GO , LOOKUP , | \u548c FETCH \u7b49\u6765\u66ff\u4ee3 MATCH \u3002","title":"MATCH"},{"location":"3.ngql-guide/7.general-query-statements/2.match/#match","text":"MATCH \u8bed\u53e5\u63d0\u4f9b\u57fa\u4e8e\u6a21\u5f0f\uff08Pattern\uff09\u5339\u914d\u7684\u641c\u7d22\u529f\u80fd\uff0c\u5176\u901a\u8fc7\u5b9a\u4e49\u4e00\u4e2a\u6216\u591a\u4e2a\u6a21\u5f0f\uff0c\u5141\u8bb8\u5728 NebulaGraph \u4e2d\u67e5\u627e\u4e0e\u6a21\u5f0f\u5339\u914d\u7684\u6570\u636e\u3002\u5728\u68c0\u7d22\u5230\u5339\u914d\u7684\u6570\u636e\u540e\uff0c\u7528\u6237\u53ef\u4ee5\u4f7f\u7528 RETURN \u5b50\u53e5\u5c06\u5176\u4f5c\u4e3a\u7ed3\u679c\u8fd4\u56de\u3002 \u5728\u672c\u6587\u4e2d\uff0c\u6211\u4eec\u5c06\u4f7f\u7528\u540d\u4e3a basketballplayer \u7684\u6d4b\u8bd5\u6570\u636e\u96c6\u6765\u6f14\u793a MATCH \u8bed\u53e5\u7684\u4f7f\u7528\u3002","title":"MATCH"},{"location":"3.ngql-guide/7.general-query-statements/2.match/#_1","text":"MATCH \u8bed\u53e5\u7684\u8bed\u6cd5\u76f8\u8f83\u4e8e\u5176\u4ed6\u67e5\u8be2\u8bed\u53e5\uff08\u5982 GO \u548c LOOKUP \uff09\u66f4\u5177\u7075\u6d3b\u6027\u3002\u5728\u8fdb\u884c\u67e5\u8be2\u65f6\uff0c MATCH \u8bed\u53e5\u4f7f\u7528\u7684\u8def\u5f84\u7c7b\u578b\u662f trail \uff0c\u8fd9\u610f\u5473\u7740\u70b9\u53ef\u4ee5\u91cd\u590d\u51fa\u73b0\uff0c\u4f46\u8fb9\u4e0d\u80fd\u91cd\u590d\u3002 MATCH \u8bed\u6cd5\u7684\u57fa\u672c\u7ed3\u6784\u5982\u4e0b\uff1a MATCH <pattern> [<clause_1>] RETURN <output> [<clause_2>]; pattern \uff1a MATCH \u8bed\u53e5\u652f\u6301\u5339\u914d\u4e00\u4e2a\u6216\u591a\u4e2a\u6a21\u5f0f\uff0c\u591a\u4e2a\u6a21\u5f0f\u4e4b\u95f4\u7528\u82f1\u6587\u9017\u53f7\uff08,\uff09\u5206\u9694\u3002\u4f8b\u5982 (a)-[]->(b),(c)-[]->(d) \u3002Pattern \u7684\u8be6\u7ec6\u8bf4\u660e\u8bf7\u53c2\u89c1 \u6a21\u5f0f \u3002 clause_1 \uff1a\u652f\u6301 WHERE \u3001 WITH \u3001 UNWIND \u3001 OPTIONAL MATCH \u5b50\u53e5\uff0c\u4e5f\u53ef\u4ee5\u4f7f\u7528 MATCH \u4f5c\u4e3a\u5b50\u53e5\u3002 output \uff1a\u5b9a\u4e49\u9700\u8981\u8fd4\u56de\u8f93\u51fa\u7ed3\u679c\u7684\u5217\u8868\u540d\u79f0\u3002\u53ef\u4ee5\u4f7f\u7528 AS \u8bbe\u7f6e\u5217\u8868\u7684\u522b\u540d\u3002 clause_2 \uff1a\u652f\u6301 ORDER BY \u3001 LIMIT \u5b50\u53e5\u3002 \u5386\u53f2\u7248\u672c\u517c\u5bb9\u6027 \u4ece 3.5.0 \u7248\u672c\u5f00\u59cb\uff0c MATCH \u8bed\u53e5\u652f\u6301\u5168\u8868\u626b\u63cf\uff0c\u5373\u5728\u4e0d\u4f7f\u7528\u4efb\u4f55\u7d22\u5f15\u6216\u8005\u8fc7\u6ee4\u6761\u4ef6\u7684\u60c5\u51b5\u4e0b\u53ef\u904d\u5386\u56fe\u4e2d\u70b9\u6216\u8fb9\u3002\u5728\u6b64\u4e4b\u524d\u7684\u7248\u672c\u4e2d\uff0cMATCH \u8bed\u53e5\u5728\u67d0\u4e9b\u60c5\u51b5\u4e0b\u9700\u8981\u7d22\u5f15\u624d\u80fd\u6267\u884c\u67e5\u8be2\u6216\u8005\u9700\u8981\u4f7f\u7528 LIMIT \u9650\u5236\u8f93\u51fa\u7ed3\u679c\u6570\u91cf\u3002 \u4ece 3.0.0 \u7248\u672c\u5f00\u59cb\uff0c\u4e3a\u4e86\u533a\u522b\u4e0d\u540c Tag \u7684\u5c5e\u6027\uff0c\u8fd4\u56de\u5c5e\u6027\u65f6\u5fc5\u987b\u989d\u5916\u6307\u5b9a Tag \u540d\u79f0\u3002\u5373\u4ece RETURN <\u53d8\u91cf\u540d>.<\u5c5e\u6027\u540d> \u6539\u4e3a RETURN <\u53d8\u91cf\u540d>.<Tag\u540d>.<\u5c5e\u6027\u540d> \u3002","title":"\u8bed\u6cd5"},{"location":"3.ngql-guide/7.general-query-statements/2.match/#_2","text":"\u5c3d\u91cf\u907f\u514d\u6267\u884c\u5168\u8868\u626b\u63cf\uff0c\u56e0\u4e3a\u8fd9\u53ef\u80fd\u5bfc\u81f4\u67e5\u8be2\u6027\u80fd\u4e0b\u964d\uff1b\u5e76\u4e14\u5982\u679c\u5728\u8fdb\u884c\u5168\u8868\u626b\u63cf\u65f6\u5185\u5b58\u4e0d\u8db3\uff0c\u53ef\u80fd\u4f1a\u5bfc\u81f4\u67e5\u8be2\u5931\u8d25\uff0c\u7cfb\u7edf\u4f1a\u63d0\u793a\u62a5\u9519\u3002\u5efa\u8bae\u4f7f\u7528\u5177\u6709\u8fc7\u6ee4\u6761\u4ef6\u6216\u6307\u5b9a Tag\u3001\u8fb9\u7c7b\u578b\u7684\u67e5\u8be2\uff0c\u4f8b\u5982 MATCH (v:player) RETURN v.player.name AS Name \u8bed\u53e5\u4e2d\u7684 v:player \u548c v.player.name \u3002 \u53ef\u4e3a Tag\u3001Edge type \u6216 Tag\u3001Edge type \u7684\u67d0\u4e2a\u5c5e\u6027\u521b\u5efa\u7d22\u5f15\uff0c\u4ee5\u63d0\u9ad8\u67e5\u8be2\u6027\u80fd\u3002\u4f8b\u5982\uff0c\u7528\u6237\u53ef\u4ee5\u4e3a player Tag \u521b\u5efa\u7d22\u5f15\uff0c\u6216\u8005\u4e3a player Tag \u7684 name \u5c5e\u6027\u521b\u5efa\u7d22\u5f15\u3002\u6709\u5173\u7d22\u5f15\u7684\u4f7f\u7528\u53ca\u6ce8\u610f\u4e8b\u9879\uff0c\u8bf7\u53c2\u89c1 \u4f7f\u7528\u7d22\u5f15\u5fc5\u8bfb \u3002 \u76ee\u524d MATCH \u8bed\u53e5\u65e0\u6cd5\u67e5\u8be2\u5230\u60ac\u6302\u8fb9\u3002","title":"\u4f7f\u7528\u8bf4\u660e"},{"location":"3.ngql-guide/7.general-query-statements/2.match/#_3","text":"","title":"\u4f7f\u7528\u6a21\u5f0f"},{"location":"3.ngql-guide/7.general-query-statements/2.match/#_4","text":"\u7528\u6237\u53ef\u4ee5\u5728\u4e00\u5bf9\u62ec\u53f7\u4e2d\u4f7f\u7528\u81ea\u5b9a\u4e49\u53d8\u91cf\u6765\u8868\u793a\u6a21\u5f0f\u4e2d\u7684\u70b9\u3002\u4f8b\u5982 (v) \u3002 nebula> MATCH (v) \\ RETURN v \\ LIMIT 3; +-----------------------------------------------------------+ | v | +-----------------------------------------------------------+ | (\"player102\" :player{age: 33, name: \"LaMarcus Aldridge\"}) | | (\"player106\" :player{age: 25, name: \"Kyle Anderson\"}) | | (\"player115\" :player{age: 40, name: \"Kobe Bryant\"}) | +-----------------------------------------------------------+","title":"\u5339\u914d\u70b9"},{"location":"3.ngql-guide/7.general-query-statements/2.match/#tag","text":"\u5386\u53f2\u7248\u672c\u517c\u5bb9\u6027 \u5728NebulaGraph 3.0.0 \u4e4b\u524d\uff0c\u5339\u914d Tag \u7684\u524d\u63d0\u662f Tag \u672c\u8eab\u6709\u7d22\u5f15\u6216\u8005 Tag \u7684\u67d0\u4e2a\u5c5e\u6027\u6709\u7d22\u5f15\uff0c\u5426\u5219\uff0c\u7528\u6237\u65e0\u6cd5\u57fa\u4e8e\u8be5 Tag \u6267\u884c MATCH \u8bed\u53e5\u3002\u4eceNebulaGraph 3.0.0 \u5f00\u59cb\uff0c\u5339\u914d Tag \u53ef\u4ee5\u4e0d\u521b\u5efa\u7d22\u5f15\uff0c\u4f46\u9700\u8981\u4f7f\u7528 LIMIT \u9650\u5236\u8f93\u51fa\u7ed3\u679c\u6570\u91cf\u3002\u4eceNebulaGraph 3.5.0 \u5f00\u59cb\uff0c MATCH \u8bed\u53e5\u652f\u6301\u5168\u8868\u626b\u63cf\uff0c\u65e0\u9700\u4e3a Tag \u6216 Tag \u7684\u67d0\u4e2a\u5c5e\u6027\u521b\u5efa\u7d22\u5f15\uff0c\u6216\u8005\u4f7f\u7528 LIMIT \u9650\u5236\u8f93\u51fa\u7ed3\u679c\u6570\u91cf\uff0c\u5373\u53ef\u6267\u884c MATCH \u8bed\u53e5\u3002 \u7528\u6237\u53ef\u4ee5\u5728\u70b9\u7684\u53f3\u4fa7\u7528 :<tag_name> \u8868\u793a\u6a21\u5f0f\u4e2d\u7684 Tag\u3002 nebula> MATCH (v:player) \\ RETURN v; +-----------------------------------------------------------+ | v | +-----------------------------------------------------------+ | (\"player102\" :player{age: 33, name: \"LaMarcus Aldridge\"}) | | (\"player106\" :player{age: 25, name: \"Kyle Anderson\"}) | | (\"player115\" :player{age: 40, name: \"Kobe Bryant\"}) | ... \u9700\u8981\u5339\u914d\u62e5\u6709\u591a\u4e2a Tag \u7684\u70b9\uff0c\u53ef\u4ee5\u7528\u82f1\u6587\u5192\u53f7\uff08:\uff09\u3002 nebula> CREATE TAG actor (name string, age int); nebula> INSERT VERTEX actor(name, age) VALUES \"player100\":(\"Tim Duncan\", 42); nebula> MATCH (v:player:actor) \\ RETURN v; +----------------------------------------------------------------------------------------+ | v | +----------------------------------------------------------------------------------------+ | (\"player100\" :actor{age: 42, name: \"Tim Duncan\"} :player{age: 42, name: \"Tim Duncan\"}) | +----------------------------------------------------------------------------------------+","title":"\u5339\u914d Tag"},{"location":"3.ngql-guide/7.general-query-statements/2.match/#_5","text":"\u7528\u6237\u53ef\u4ee5\u5728 Tag \u7684\u53f3\u4fa7\u7528 {<prop_name>: <prop_value>} \u8868\u793a\u6a21\u5f0f\u4e2d\u70b9\u7684\u5c5e\u6027\u3002 # \u4f7f\u7528\u5c5e\u6027 name \u641c\u7d22\u5339\u914d\u7684\u70b9\u3002 nebula> MATCH (v:player{name:\"Tim Duncan\"}) \\ RETURN v; +----------------------------------------------------+ | v | +----------------------------------------------------+ | (\"player100\" :player{age: 42, name: \"Tim Duncan\"}) | +----------------------------------------------------+ \u4f7f\u7528 WHERE \u5b50\u53e5\u4e5f\u53ef\u4ee5\u5b9e\u73b0\u76f8\u540c\u7684\u64cd\u4f5c\uff1a nebula> MATCH (v:player) \\ WHERE v.player.name == \"Tim Duncan\" \\ RETURN v; +----------------------------------------------------+ | v | +----------------------------------------------------+ | (\"player100\" :player{age: 42, name: \"Tim Duncan\"}) | +----------------------------------------------------+ openCypher \u517c\u5bb9\u6027 \u5728 openCypher 9 \u4e2d\uff0c = \u662f\u76f8\u7b49\u8fd0\u7b97\u7b26\uff0c\u5728 nGQL \u4e2d\uff0c == \u662f\u76f8\u7b49\u8fd0\u7b97\u7b26\uff0c = \u662f\u8d4b\u503c\u8fd0\u7b97\u7b26\u3002 \u4f7f\u7528 WHERE \u5b50\u53e5\u76f4\u63a5\u5339\u914d\u70b9\u7684\u5c5e\u6027\u3002 nebula> MATCH (v) \\ WITH v, properties(v) as props, keys(properties(v)) as kk \\ WHERE [i in kk where props[i] == \"Tim Duncan\"] \\ RETURN v; +----------------------------------------------------+ | v | +----------------------------------------------------+ | (\"player100\" :player{age: 42, name: \"Tim Duncan\"}) | +----------------------------------------------------+ nebula> WITH ['Tim Duncan', 'Yao Ming'] AS names \\ MATCH (v1:player)-->(v2:player) \\ WHERE v1.player.name in names \\ RETURN v1, v2; +----------------------------------------------------+----------------------------------------------------------+ | v1 | v2 | +----------------------------------------------------+----------------------------------------------------------+ | (\"player133\" :player{age: 38, name: \"Yao Ming\"}) | (\"player114\" :player{age: 39, name: \"Tracy McGrady\"}) | | (\"player133\" :player{age: 38, name: \"Yao Ming\"}) | (\"player144\" :player{age: 47, name: \"Shaquille O'Neal\"}) | | (\"player100\" :player{age: 42, name: \"Tim Duncan\"}) | (\"player101\" :player{age: 36, name: \"Tony Parker\"}) | | (\"player100\" :player{age: 42, name: \"Tim Duncan\"}) | (\"player125\" :player{age: 41, name: \"Manu Ginobili\"}) | +----------------------------------------------------+----------------------------------------------------------+","title":"\u5339\u914d\u70b9\u7684\u5c5e\u6027"},{"location":"3.ngql-guide/7.general-query-statements/2.match/#id","text":"\u7528\u6237\u53ef\u4ee5\u4f7f\u7528\u70b9 ID \u53bb\u5339\u914d\u70b9\u3002 id() \u51fd\u6570\u53ef\u4ee5\u68c0\u7d22\u70b9\u7684 ID\u3002 nebula> MATCH (v) \\ WHERE id(v) == 'player101' \\ RETURN v; +-----------------------------------------------------+ | v | +-----------------------------------------------------+ | (\"player101\" :player{age: 36, name: \"Tony Parker\"}) | +-----------------------------------------------------+ \u8981\u5339\u914d\u591a\u4e2a\u70b9\u7684 ID\uff0c\u53ef\u4ee5\u7528 WHERE id(v) IN [vid_list] \u6216\u8005 WHERE id(v) IN {vid_list} \u3002 nebula> MATCH (v:player { name: 'Tim Duncan' })--(v2) \\ WHERE id(v2) IN [\"player101\", \"player102\"] \\ RETURN v2; +-----------------------------------------------------------+ | v2 | +-----------------------------------------------------------+ | (\"player101\" :player{age: 36, name: \"Tony Parker\"}) | | (\"player101\" :player{age: 36, name: \"Tony Parker\"}) | | (\"player102\" :player{age: 33, name: \"LaMarcus Aldridge\"}) | +-----------------------------------------------------------+ nebula> MATCH (v) WHERE id(v) IN {\"player100\", \"player101\"} \\ RETURN v.player.name AS name; +---------------+ | name | +---------------+ | \"Tony Parker\" | | \"Tim Duncan\" | +---------------+","title":"\u5339\u914d\u70b9 ID"},{"location":"3.ngql-guide/7.general-query-statements/2.match/#_6","text":"\u7528\u6237\u53ef\u4ee5\u4f7f\u7528 -- \u7b26\u53f7\u8868\u793a\u4e24\u4e2a\u65b9\u5411\u7684\u8fb9\uff0c\u5e76\u5339\u914d\u8fd9\u4e9b\u8fb9\u8fde\u63a5\u7684\u70b9\u3002 \u5386\u53f2\u7248\u672c\u517c\u5bb9\u6027 \u5728 nGQL 1.x \u4e2d\uff0c -- \u7b26\u53f7\u7528\u4e8e\u884c\u5185\u6ce8\u91ca\uff0c\u4ece nGQL 2.x \u8d77\uff0c -- \u7b26\u53f7\u8868\u793a\u51fa\u8fb9\u6216\u5165\u8fb9\uff0c\u4e0d\u518d\u7528\u4e8e\u6ce8\u91ca\u3002 nebula> MATCH (v:player{name:\"Tim Duncan\"})--(v2:player) \\ RETURN v2.player.name AS Name; +---------------------+ | Name | +---------------------+ | \"Manu Ginobili\" | | \"Manu Ginobili\" | | \"Dejounte Murray\" | ... \u7528\u6237\u53ef\u4ee5\u5728 -- \u7b26\u53f7\u4e0a\u589e\u52a0 < \u6216 > \u7b26\u53f7\u6307\u5b9a\u8fb9\u7684\u65b9\u5411\u3002 # -->\u8868\u793a\u8fb9\u4ece v \u5f00\u59cb\uff0c\u6307\u5411 v2\u3002\u5bf9\u4e8e\u70b9 v \u6765\u8bf4\u662f\u51fa\u8fb9\uff0c\u5bf9\u4e8e\u70b9 v2 \u6765\u8bf4\u662f\u5165\u8fb9\u3002 nebula> MATCH (v:player{name:\"Tim Duncan\"})-->(v2:player) \\ RETURN v2.player.name AS Name; +-----------------+ | Name | +-----------------+ | \"Tony Parker\" | | \"Manu Ginobili\" | +-----------------+ \u5982\u679c\u9700\u8981\u5224\u65ad\u76ee\u6807\u70b9\uff0c\u53ef\u4ee5\u4f7f\u7528 CASE \u8868\u8fbe\u5f0f\u3002 nebula> MATCH (v:player{name:\"Tim Duncan\"})--(v2) \\ RETURN \\ CASE WHEN v2.team.name IS NOT NULL \\ THEN v2.team.name \\ WHEN v2.player.name IS NOT NULL \\ THEN v2.player.name END AS Name; +---------------------+ | Name | +---------------------+ | \"Manu Ginobili\" | | \"Manu Ginobili\" | | \"Spurs\" | | \"Dejounte Murray\" | ... \u5982\u679c\u9700\u8981\u6269\u5c55\u6a21\u5f0f\uff0c\u53ef\u4ee5\u589e\u52a0\u66f4\u591a\u70b9\u548c\u8fb9\u3002 nebula> MATCH (v:player{name:\"Tim Duncan\"})-->(v2)<--(v3) \\ RETURN v3.player.name AS Name; +---------------------+ | Name | +---------------------+ | \"Dejounte Murray\" | | \"LaMarcus Aldridge\" | | \"Marco Belinelli\" | ... \u5982\u679c\u4e0d\u9700\u8981\u5f15\u7528\u70b9\uff0c\u53ef\u4ee5\u7701\u7565\u62ec\u53f7\u4e2d\u8868\u793a\u70b9\u7684\u53d8\u91cf\u3002 nebula> MATCH (v:player{name:\"Tim Duncan\"})-->()<--(v3) \\ RETURN v3.player.name AS Name; +---------------------+ | Name | +---------------------+ | \"Dejounte Murray\" | | \"LaMarcus Aldridge\" | | \"Marco Belinelli\" | ...","title":"\u5339\u914d\u8fde\u63a5\u7684\u70b9"},{"location":"3.ngql-guide/7.general-query-statements/2.match/#_7","text":"\u8fde\u63a5\u8d77\u6765\u7684\u70b9\u548c\u8fb9\u6784\u6210\u4e86\u8def\u5f84\u3002\u7528\u6237\u53ef\u4ee5\u4f7f\u7528\u81ea\u5b9a\u4e49\u53d8\u91cf\u547d\u540d\u8def\u5f84\u3002 nebula> MATCH p=(v:player{name:\"Tim Duncan\"})-->(v2) \\ RETURN p; +--------------------------------------------------------------------------------------------------------------------------------------+ | p | +--------------------------------------------------------------------------------------------------------------------------------------+ | <(\"player100\" :player{age: 42, name: \"Tim Duncan\"})-[:serve@0 {end_year: 2016, start_year: 1997}]->(\"team204\" :team{name: \"Spurs\"})> | | <(\"player100\" :player{age: 42, name: \"Tim Duncan\"})-[:follow@0 {degree: 95}]->(\"player101\" :player{age: 36, name: \"Tony Parker\"})> | | <(\"player100\" :player{age: 42, name: \"Tim Duncan\"})-[:follow@0 {degree: 95}]->(\"player125\" :player{age: 41, name: \"Manu Ginobili\"})> | +--------------------------------------------------------------------------------------------------------------------------------------+ openCypher \u517c\u5bb9\u6027 \u5728 nGQL \u4e2d\uff0c @ \u7b26\u53f7\u8868\u793a\u8fb9\u7684 rank\uff0c\u5728 openCypher \u4e2d\uff0c\u6ca1\u6709 rank \u6982\u5ff5\u3002","title":"\u5339\u914d\u8def\u5f84"},{"location":"3.ngql-guide/7.general-query-statements/2.match/#_8","text":"nebula> MATCH ()<-[e]-() \\ RETURN e \\ LIMIT 3; +----------------------------------------------------+ | e | +----------------------------------------------------+ | [:follow \"player101\"->\"player102\" @0 {degree: 90}] | | [:follow \"player103\"->\"player102\" @0 {degree: 70}] | | [:follow \"player135\"->\"player102\" @0 {degree: 80}] | +----------------------------------------------------+","title":"\u5339\u914d\u8fb9"},{"location":"3.ngql-guide/7.general-query-statements/2.match/#edge_type","text":"\u548c\u70b9\u4e00\u6837\uff0c\u7528\u6237\u53ef\u4ee5\u7528 :<edge_type> \u8868\u793a\u6a21\u5f0f\u4e2d\u7684 Edge type\uff0c\u4f8b\u5982 -[e:follow]- \u3002 \u5386\u53f2\u7248\u672c\u517c\u5bb9\u6027 \u5728NebulaGraph 3.0.0 \u4e4b\u524d\uff0c\u5339\u914d Edge Type \u7684\u524d\u63d0\u662f Edge type \u672c\u8eab\u6709\u5bf9\u5e94\u5c5e\u6027\u7684\u7d22\u5f15\uff0c\u5426\u5219\uff0c\u7528\u6237\u65e0\u6cd5\u57fa\u4e8e Edge Type \u6267\u884c MATCH \u8bed\u53e5\u3002\u4eceNebulaGraph 3.0.0 \u5f00\u59cb\uff0c\u5339\u914d Edge Type \u53ef\u4ee5\u4e0d\u521b\u5efa\u7d22\u5f15\uff0c\u4f46\u9700\u8981\u4f7f\u7528 LIMIT \u9650\u5236\u8f93\u51fa\u7ed3\u679c\u6570\u91cf\uff0c\u5e76\u4e14\u5fc5\u987b\u6307\u5b9a\u8fb9\u7684\u65b9\u5411\u3002\u4eceNebulaGraph 3.5.0 \u5f00\u59cb\uff0c\u65e0\u9700\u4e3a Edge Type \u521b\u5efa\u7d22\u5f15\u6216\u8005\u4f7f\u7528 LIMIT \u9650\u5236\u8f93\u51fa\u7ed3\u679c\u6570\u91cf\uff0c\u5373\u53ef\u4f7f\u7528 MATCH \u8bed\u53e5\u5339\u914d\u8fb9\u3002 nebula> MATCH ()-[e:follow]->() \\ RETURN e; +----------------------------------------------------+ | e | +----------------------------------------------------+ | [:follow \"player102\"->\"player100\" @0 {degree: 75}] | | [:follow \"player102\"->\"player101\" @0 {degree: 75}] | | [:follow \"player129\"->\"player116\" @0 {degree: 90}] | ...","title":"\u5339\u914d Edge type"},{"location":"3.ngql-guide/7.general-query-statements/2.match/#_9","text":"\u7528\u6237\u53ef\u4ee5\u7528 {<prop_name>: <prop_value>} \u8868\u793a\u6a21\u5f0f\u4e2d Edge type \u7684\u5c5e\u6027\uff0c\u4f8b\u5982 [e:follow{likeness:95}] \u3002 nebula> MATCH (v:player{name:\"Tim Duncan\"})-[e:follow{degree:95}]->(v2) \\ RETURN e; +--------------------------------------------------------+ | e | +--------------------------------------------------------+ | [:follow \"player100\"->\"player101\" @0 {degree: 95}] | | [:follow \"player100\"->\"player125\" @0 {degree: 95}] | +--------------------------------------------------------+ \u4f7f\u7528 WHERE \u5b50\u53e5\u76f4\u63a5\u5339\u914d\u8fb9\u7684\u5c5e\u6027\u3002 nebula> MATCH ()-[e]->() \\ WITH e, properties(e) as props, keys(properties(e)) as kk \\ WHERE [i in kk where props[i] == 90] \\ RETURN e; +----------------------------------------------------+ | e | +----------------------------------------------------+ | [:follow \"player125\"->\"player100\" @0 {degree: 90}] | | [:follow \"player140\"->\"player114\" @0 {degree: 90}] | | [:follow \"player133\"->\"player144\" @0 {degree: 90}] | | [:follow \"player133\"->\"player114\" @0 {degree: 90}] | ... +----------------------------------------------------+","title":"\u5339\u914d\u8fb9\u7684\u5c5e\u6027"},{"location":"3.ngql-guide/7.general-query-statements/2.match/#edge_type_1","text":"\u4f7f\u7528 | \u53ef\u4ee5\u5339\u914d\u591a\u4e2a Edge type\uff0c\u4f8b\u5982 [e:follow|:serve] \u3002\u7b2c\u4e00\u4e2a Edge type \u524d\u7684\u82f1\u6587\u5192\u53f7\uff08:\uff09\u4e0d\u53ef\u7701\u7565\uff0c\u540e\u7eed Edge type \u524d\u7684\u82f1\u6587\u5192\u53f7\u53ef\u4ee5\u7701\u7565\uff0c\u4f8b\u5982 [e:follow|serve] \u3002 nebula> MATCH (v:player{name:\"Tim Duncan\"})-[e:follow|:serve]->(v2) \\ RETURN e; +---------------------------------------------------------------------------+ | e | +---------------------------------------------------------------------------+ | [:follow \"player100\"->\"player101\" @0 {degree: 95}] | | [:follow \"player100\"->\"player125\" @0 {degree: 95}] | | [:serve \"player100\"->\"team204\" @0 {end_year: 2016, start_year: 1997}] | +---------------------------------------------------------------------------+","title":"\u5339\u914d\u591a\u4e2a Edge type"},{"location":"3.ngql-guide/7.general-query-statements/2.match/#_10","text":"\u7528\u6237\u53ef\u4ee5\u6269\u5c55\u6a21\u5f0f\uff0c\u5339\u914d\u8def\u5f84\u4e2d\u7684\u591a\u6761\u8fb9\u3002 nebula> MATCH (v:player{name:\"Tim Duncan\"})-[]->(v2)<-[e:serve]-(v3) \\ RETURN v2, v3; +----------------------------------+-----------------------------------------------------------+ | v2 | v3 | +----------------------------------+-----------------------------------------------------------+ | (\"team204\" :team{name: \"Spurs\"}) | (\"player104\" :player{age: 32, name: \"Marco Belinelli\"}) | | (\"team204\" :team{name: \"Spurs\"}) | (\"player101\" :player{age: 36, name: \"Tony Parker\"}) | | (\"team204\" :team{name: \"Spurs\"}) | (\"player102\" :player{age: 33, name: \"LaMarcus Aldridge\"}) | ...","title":"\u5339\u914d\u591a\u6761\u8fb9"},{"location":"3.ngql-guide/7.general-query-statements/2.match/#_11","text":"\u7528\u6237\u53ef\u4ee5\u5728\u6a21\u5f0f\u4e2d\u4f7f\u7528 :<edge_type>*<hop> \u5339\u914d\u5b9a\u957f\u8def\u5f84\u3002 hop \u5fc5\u987b\u662f\u4e00\u4e2a\u975e\u8d1f\u6574\u6570\u3002 nebula> MATCH p=(v:player{name:\"Tim Duncan\"})-[e:follow*2]->(v2) \\ RETURN DISTINCT v2 AS Friends; +-----------------------------------------------------------+ | Friends | +-----------------------------------------------------------+ | (\"player100\" :player{age: 42, name: \"Tim Duncan\"}) | | (\"player125\" :player{age: 41, name: \"Manu Ginobili\"}) | | (\"player102\" :player{age: 33, name: \"LaMarcus Aldridge\"}) | +-----------------------------------------------------------+ \u5982\u679c hop \u4e3a 0\uff0c\u6a21\u5f0f\u4f1a\u5339\u914d\u8def\u5f84\u4e0a\u7684\u8d77\u59cb\u70b9\u3002 nebula> MATCH (v:player{name:\"Tim Duncan\"}) -[*0]-> (v2) \\ RETURN v2; +----------------------------------------------------+ | v2 | +----------------------------------------------------+ | (\"player100\" :player{age: 42, name: \"Tim Duncan\"}) | +----------------------------------------------------+ Note \u5728\u5bf9\u5339\u914d\u7684\u591a\u8df3\u8fb9\u8fdb\u884c\u8fc7\u6ee4\u65f6\uff0c\u5982\u5bf9 -[e:follow*2]-> \u4e2d\u7684 e \u8fdb\u884c\u8fc7\u6ee4\uff0c\u6b64\u65f6\u7684 e \u4e0d\u518d\u662f\u5355\u6761\u8fb9\u7684\u6570\u636e\u7c7b\u578b\uff0c\u800c\u662f\u4e00\u4e2a\u5305\u542b\u591a\u6761\u8fb9\u7684\u5217\u8868\uff0c\u4f8b\u5982\uff1a \u4ee5\u4e0b\u8bed\u53e5\u53ef\u4ee5\u8fd0\u884c\u4f46\u662f\u6ca1\u6709\u8fd4\u56de\u6570\u636e\uff0c\u56e0\u4e3a e \u662f\u4e00\u4e2a\u5217\u8868\uff0c\u6ca1\u6709 .degree \u7684\u5c5e\u6027\u3002 nebula> MATCH p=(v:player{name:\"Tim Duncan\"})-[e:follow*2]->(v2) \\ WHERE e.degree > 1 \\ RETURN DISTINCT v2 AS Friends; \u8fd9\u662f\u6b63\u786e\u7684\u8868\u8fbe\uff1a nebula> MATCH p=(v:player{name:\"Tim Duncan\"})-[e:follow*2]->(v2) \\ WHERE ALL(e_ in e WHERE e_.degree > 0) \\ RETURN DISTINCT v2 AS Friends; \u8fdb\u4e00\u6b65\uff0c\u8fd9\u662f\u8868\u8fbe\u5bf9\u591a\u8df3\u8fb9\u7684\u7b2c\u4e00\u8df3\u7684\u8fb9\u5c5e\u6027\u8fc7\u6ee4\u7684\u8868\u8fbe\uff1a nebula> MATCH p=(v:player{name:\"Tim Duncan\"})-[e:follow*2]->(v2) \\ WHERE e[0].degree > 98 \\ RETURN DISTINCT v2 AS Friends;","title":"\u5339\u914d\u5b9a\u957f\u8def\u5f84"},{"location":"3.ngql-guide/7.general-query-statements/2.match/#_12","text":"\u7528\u6237\u53ef\u4ee5\u5728\u6a21\u5f0f\u4e2d\u4f7f\u7528 :<edge_type>*[minHop..maxHop] \u5339\u914d\u53d8\u957f\u8def\u5f84\u3002 Caution \u5982\u679c\u672a\u8bbe\u7f6e maxHop \u53ef\u80fd\u4f1a\u5bfc\u81f4 graph \u670d\u52a1 OOM\uff0c\u8bf7\u8c28\u614e\u6267\u884c\u8be5\u547d\u4ee4\u3002 \u53c2\u6570 \u8bf4\u660e minHop \u53ef\u9009\u9879\u3002\u8868\u793a\u8def\u5f84\u7684\u6700\u5c0f\u957f\u5ea6\u3002 minHop \u5fc5\u987b\u662f\u4e00\u4e2a\u975e\u8d1f\u6574\u6570\uff0c\u9ed8\u8ba4\u503c\u4e3a 1\u3002 maxHop \u53ef\u9009\u9879\u3002\u8868\u793a\u8def\u5f84\u7684\u6700\u5927\u957f\u5ea6\u3002 maxHop \u5fc5\u987b\u662f\u4e00\u4e2a\u975e\u8d1f\u6574\u6570\uff0c\u9ed8\u8ba4\u503c\u4e3a\u65e0\u7a77\u5927\u3002 \u5982\u679c\u672a\u6307\u5b9a minHop \u548c maxHop \uff0c\u4ec5\u8bbe\u7f6e\u4e86 :<edge_type>* \uff0c\u5219\u4e8c\u8005\u90fd\u5e94\u7528\u9ed8\u8ba4\u503c\uff0c\u5373 minHop \u4e3a 1\uff0c maxHop \u4e3a\u65e0\u7a77\u5927\u3002 nebula> MATCH p=(v:player{name:\"Tim Duncan\"})-[e:follow*]->(v2) \\ RETURN v2 AS Friends; +-----------------------------------------------------------+ | Friends | +-----------------------------------------------------------+ | (\"player125\" :player{age: 41, name: \"Manu Ginobili\"}) | | (\"player101\" :player{age: 36, name: \"Tony Parker\"}) | ... nebula> MATCH p=(v:player{name:\"Tim Duncan\"})-[e:follow*1..3]->(v2) \\ RETURN v2 AS Friends; +-----------------------------------------------------------+ | Friends | +-----------------------------------------------------------+ | (\"player101\" :player{age: 36, name: \"Tony Parker\"}) | | (\"player125\" :player{age: 41, name: \"Manu Ginobili\"}) | | (\"player100\" :player{age: 42, name: \"Tim Duncan\"}) | ... nebula> MATCH p=(v:player{name:\"Tim Duncan\"})-[e:follow*1..]->(v2) \\ RETURN v2 AS Friends; +-----------------------------------------------------------+ | Friends | +-----------------------------------------------------------+ | (\"player125\" :player{age: 41, name: \"Manu Ginobili\"}) | | (\"player101\" :player{age: 36, name: \"Tony Parker\"}) | | (\"player100\" :player{age: 42, name: \"Tim Duncan\"}) | ... \u7528\u6237\u53ef\u4ee5\u4f7f\u7528 DISTINCT \u5173\u952e\u5b57\u805a\u5408\u91cd\u590d\u7ed3\u679c\u3002 nebula> MATCH p=(v:player{name:\"Tim Duncan\"})-[e:follow*1..3]->(v2:player) \\ RETURN DISTINCT v2 AS Friends, count(v2); +-----------------------------------------------------------+-----------+ | Friends | count(v2) | +-----------------------------------------------------------+-----------+ | (\"player102\" :player{age: 33, name: \"LaMarcus Aldridge\"}) | 1 | | (\"player100\" :player{age: 42, name: \"Tim Duncan\"}) | 4 | | (\"player101\" :player{age: 36, name: \"Tony Parker\"}) | 3 | | (\"player125\" :player{age: 41, name: \"Manu Ginobili\"}) | 3 | +-----------------------------------------------------------+-----------+ \u5982\u679c minHop \u4e3a 0 \uff0c\u6a21\u5f0f\u4f1a\u5339\u914d\u8def\u5f84\u4e0a\u7684\u8d77\u59cb\u70b9\u3002\u4f8b\u5982\uff0c\u4e0e\u4e0a\u4e2a\u793a\u4f8b\u76f8\u6bd4\uff0c\u4e0b\u9762\u7684\u793a\u4f8b\u8bbe\u7f6e minHop \u4e3a 0 \u3002\u6b64\u65f6\uff0c\u56e0\u4e3a\u8868\u793a \"Tim Duncan\" \u7684\u70b9\u662f\u8def\u5f84\u7684\u8d77\u59cb\u70b9\uff0c\u6240\u4ee5\u5b83\u5728\u7ed3\u679c\u96c6\u4e2d\u7684\u8ba1\u6570\u4e3a 5\uff0c\u6bd4\u5728\u4e0a\u4e2a\u793a\u4f8b\u7684\u7ed3\u679c\u4e2d\u591a\u8ba1\u4e00\u6b21\u3002 nebula> MATCH p=(v:player{name:\"Tim Duncan\"})-[e:follow*0..3]->(v2:player) \\ RETURN DISTINCT v2 AS Friends, count(v2); +-----------------------------------------------------------+-----------+ | Friends | count(v2) | +-----------------------------------------------------------+-----------+ | (\"player102\" :player{age: 33, name: \"LaMarcus Aldridge\"}) | 1 | | (\"player100\" :player{age: 42, name: \"Tim Duncan\"}) | 5 | | (\"player125\" :player{age: 41, name: \"Manu Ginobili\"}) | 3 | | (\"player101\" :player{age: 36, name: \"Tony Parker\"}) | 3 | +-----------------------------------------------------------+-----------+ Note \u5f53\u5728\u6a21\u5f0f\u4e2d\u4f7f\u7528\u53d8\u91cf e \u5339\u914d\u5b9a\u957f\u6216\u8005\u53d8\u957f\u8def\u5f84\u65f6\uff0c\u4f8b\u5982 -[e:follow*0..3]-> \uff0c\u4e0d\u652f\u6301\u5728\u5176\u4ed6\u6a21\u5f0f\u4e2d\u5f15\u7528 e \u3002\u4f8b\u5982\uff0c\u4e0d\u652f\u6301\u4ee5\u4e0b\u8bed\u53e5\uff1a nebula> MATCH (v:player)-[e:like*1..3]->(n) \\ WHERE (n)-[e*1..4]->(:player) \\ RETURN v;","title":"\u5339\u914d\u53d8\u957f\u8def\u5f84"},{"location":"3.ngql-guide/7.general-query-statements/2.match/#edge_type_2","text":"\u7528\u6237\u53ef\u4ee5\u5728\u53d8\u957f\u6216\u5b9a\u957f\u6a21\u5f0f\u4e2d\u6307\u5b9a\u591a\u4e2a Edge type\u3002 hop \u3001 minHop \u548c maxHop \u5bf9\u6240\u6709 Edge type \u90fd\u751f\u6548\u3002 nebula> MATCH p=(v:player{name:\"Tim Duncan\"})-[e:follow|serve*2]->(v2) \\ RETURN DISTINCT v2; +-----------------------------------------------------------+ | v2 | +-----------------------------------------------------------+ | (\"team204\" :team{name: \"Spurs\"}) | | (\"player100\" :player{age: 42, name: \"Tim Duncan\"}) | | (\"team215\" :team{name: \"Hornets\"}) | | (\"player125\" :player{age: 41, name: \"Manu Ginobili\"}) | | (\"player102\" :player{age: 33, name: \"LaMarcus Aldridge\"}) | +-----------------------------------------------------------+","title":"\u5339\u914d\u591a\u4e2a Edge type \u7684\u53d8\u957f\u8def\u5f84"},{"location":"3.ngql-guide/7.general-query-statements/2.match/#_13","text":"\u7528\u6237\u53ef\u4ee5\u7528\u82f1\u6587\u9017\u53f7\uff08,\uff09\u5206\u9694\u591a\u4e2a\u6a21\u5f0f\u3002 nebula> CREATE TAG INDEX IF NOT EXISTS team_index ON team(name(20)); nebula> REBUILD TAG INDEX team_index; nebula> MATCH (v1:player{name:\"Tim Duncan\"}), (v2:team{name:\"Spurs\"}) \\ RETURN v1,v2; +----------------------------------------------------+----------------------------------+ | v1 | v2 | +----------------------------------------------------+----------------------------------+ | (\"player100\" :player{age: 42, name: \"Tim Duncan\"}) | (\"team204\" :team{name: \"Spurs\"}) | +----------------------------------------------------+----------------------------------+","title":"\u5339\u914d\u591a\u4e2a\u6a21\u5f0f"},{"location":"3.ngql-guide/7.general-query-statements/2.match/#_14","text":"\u7528\u6237\u53ef\u4ee5\u4f7f\u7528 allShortestPaths \u8fd4\u56de\u8d77\u59cb\u70b9\u5230\u76ee\u6807\u70b9\u7684\u6240\u6709\u6700\u77ed\u8def\u5f84\u3002 nebula> MATCH p = allShortestPaths((a:player{name:\"Tim Duncan\"})-[e*..5]-(b:player{name:\"Tony Parker\"})) \\ RETURN p; +------------------------------------------------------------------------------------------------------------------------------------+ | p | +------------------------------------------------------------------------------------------------------------------------------------+ | <(\"player100\" :player{age: 42, name: \"Tim Duncan\"})<-[:follow@0 {degree: 95}]-(\"player101\" :player{age: 36, name: \"Tony Parker\"})> | | <(\"player100\" :player{age: 42, name: \"Tim Duncan\"})-[:follow@0 {degree: 95}]->(\"player101\" :player{age: 36, name: \"Tony Parker\"})> | +------------------------------------------------------------------------------------------------------------------------------------+ \u7528\u6237\u53ef\u4ee5\u4f7f\u7528 shortestPath \u8fd4\u56de\u8d77\u59cb\u70b9\u5230\u76ee\u6807\u70b9\u7684\u4efb\u610f\u4e00\u6761\u6700\u77ed\u8def\u5f84\u3002 nebula> MATCH p = shortestPath((a:player{name:\"Tim Duncan\"})-[e*..5]-(b:player{name:\"Tony Parker\"})) \\ RETURN p; +------------------------------------------------------------------------------------------------------------------------------------+ | p | +------------------------------------------------------------------------------------------------------------------------------------+ | <(\"player100\" :player{age: 42, name: \"Tim Duncan\"})<-[:follow@0 {degree: 95}]-(\"player101\" :player{age: 36, name: \"Tony Parker\"})> | +------------------------------------------------------------------------------------------------------------------------------------+","title":"\u5339\u914d\u6700\u77ed\u8def\u5f84"},{"location":"3.ngql-guide/7.general-query-statements/2.match/#match_1","text":"\u4e0d\u540c\u7684\u6a21\u5f0f\u6709\u4e0d\u540c\u7684\u7b5b\u9009\u6761\u4ef6\u65f6\uff0c\u53ef\u4ee5\u4f7f\u7528\u591a MATCH \uff0c\u4f1a\u8fd4\u56de\u6a21\u5f0f\u5b8c\u5168\u5339\u914d\u7684\u884c\u3002 nebula> MATCH (m)-[]->(n) WHERE id(m)==\"player100\" \\ MATCH (n)-[]->(l) WHERE id(n)==\"player125\" \\ RETURN id(m),id(n),id(l); +-------------+-------------+-------------+ | id(m) | id(n) | id(l) | +-------------+-------------+-------------+ | \"player100\" | \"player125\" | \"team204\" | | \"player100\" | \"player125\" | \"player100\" | +-------------+-------------+-------------+","title":"\u591aMATCH\u68c0\u7d22"},{"location":"3.ngql-guide/7.general-query-statements/2.match/#optional_match","text":"\u53c2\u89c1 OPTIONAL MATCH \u3002 Performance NebulaGraph 3.6.0 \u4e2d MATCH \u8bed\u53e5\u7684\u6027\u80fd\u548c\u8d44\u6e90\u5360\u7528\u5f97\u5230\u4e86\u4f18\u5316.\u4f46\u5bf9\u6027\u80fd\u8981\u6c42\u8f83\u9ad8\u65f6\uff0c\u4ecd\u5efa\u8bae\u4f7f\u7528 GO , LOOKUP , | \u548c FETCH \u7b49\u6765\u66ff\u4ee3 MATCH \u3002","title":"OPTIONAL MATCH\u68c0\u7d22"},{"location":"3.ngql-guide/7.general-query-statements/3.go/","text":"GO \u00b6 GO \u8bed\u53e5\u662fNebulaGraph\u56fe\u6570\u636e\u5e93\u4e2d\u7528\u4e8e\u4ece\u7ed9\u5b9a\u8d77\u59cb\u70b9\u5f00\u59cb\u904d\u5386\u56fe\u7684\u8bed\u53e5\u3002 GO \u8bed\u53e5\u91c7\u7528\u7684\u8def\u5f84\u7c7b\u578b\u662f walk \uff0c\u5373\u904d\u5386\u65f6\u70b9\u548c\u8fb9\u90fd\u53ef\u4ee5\u91cd\u590d\u3002 openCypher \u517c\u5bb9\u6027 \u00b6 \u672c\u6587\u64cd\u4f5c\u4ec5\u9002\u7528\u4e8e\u539f\u751f nGQL\u3002 \u8bed\u6cd5 \u00b6 GO [[<M> TO] <N> {STEP|STEPS} ] FROM <vertex_list> OVER <edge_type_list> [{REVERSELY | BIDIRECT}] [ WHERE <conditions> ] YIELD [DISTINCT] <return_list> [{ SAMPLE <sample_list> | <limit_by_list_clause> }] [| GROUP BY {<col_name> | expression> | <position>} YIELD <col_name>] [| ORDER BY <expression> [{ASC | DESC}]] [| LIMIT [<offset>,] <number_rows>]; <vertex_list> ::= <vid> [, <vid> ...] <edge_type_list> ::= <edge_type> [, <edge_type> ...] | * <return_list> ::= <col_name> [AS <col_alias>] [, <col_name> [AS <col_alias>] ...] <N> {STEP|STEPS} \uff1a\u6307\u5b9a\u8df3\u6570\u3002\u5982\u679c\u6ca1\u6709\u6307\u5b9a\u8df3\u6570\uff0c\u9ed8\u8ba4\u503c N \u4e3a 1 \u3002\u5982\u679c N \u4e3a 0 \uff0cNebulaGraph\u4e0d\u4f1a\u68c0\u7d22\u4efb\u4f55\u8fb9\u3002 M TO N {STEP|STEPS} \uff1a\u904d\u5386 M~N \u8df3\u7684\u8fb9\u3002\u5982\u679c M \u4e3a 0 \uff0c\u8f93\u51fa\u7ed3\u679c\u548c M \u4e3a 1 \u76f8\u540c\uff0c\u5373 GO 0 TO 2 \u548c GO 1 TO 2 \u662f\u76f8\u540c\u7684\u3002 <vertex_list> \uff1a\u7528\u9017\u53f7\u5206\u9694\u7684\u70b9 ID \u5217\u8868\u3002 <edge_type_list> \uff1a\u904d\u5386\u7684 Edge type \u5217\u8868\u3002 REVERSELY | BIDIRECT \uff1a\u9ed8\u8ba4\u60c5\u51b5\u4e0b\u68c0\u7d22\u7684\u662f <vertex_list> \u7684\u51fa\u8fb9\uff08\u6b63\u5411\uff09\uff0c REVERSELY \u8868\u793a\u53cd\u5411\uff0c\u5373\u68c0\u7d22\u5165\u8fb9\uff1b BIDIRECT \u4e3a\u53cc\u5411\uff0c\u5373\u68c0\u7d22\u6b63\u5411\u548c\u53cd\u5411\u3002\u53ef\u901a\u8fc7 YIELD \u8fd4\u56de <edge_type>._type \u5b57\u6bb5\u5224\u65ad\u65b9\u5411\uff0c\u5176\u6b63\u6570\u4e3a\u6b63\u5411\uff0c\u8d1f\u6570\u4e3a\u53cd\u5411\u3002 WHERE <conditions> \uff1a\u6307\u5b9a\u904d\u5386\u7684\u8fc7\u6ee4\u6761\u4ef6\u3002\u7528\u6237\u53ef\u4ee5\u5728\u8d77\u59cb\u70b9\u3001\u76ee\u7684\u70b9\u548c\u8fb9\u4f7f\u7528 WHERE \u5b50\u53e5\uff0c\u8fd8\u53ef\u4ee5\u7ed3\u5408 AND \u3001 OR \u3001 NOT \u3001 XOR \u4e00\u8d77\u4f7f\u7528\u3002\u8be6\u60c5\u53c2\u89c1 WHERE \u3002 Note \u904d\u5386\u591a\u4e2a Edge type \u65f6\uff0c WHERE \u5b50\u53e5\u6709\u4e00\u4e9b\u9650\u5236\u3002\u4f8b\u5982\u4e0d\u652f\u6301 WHERE edge1.prop1 > edge2.prop2 \u3002 GO \u8bed\u53e5\u6267\u884c\u65f6\u5148\u904d\u5386\u6240\u6709\u7684\u70b9\uff0c\u7136\u540e\u518d\u6839\u636e\u8fc7\u6ee4\u5668\u6761\u4ef6\u8fdb\u884c\u8fc7\u6ee4\u3002 YIELD [DISTINCT] <return_list> \uff1a\u5b9a\u4e49\u9700\u8981\u8fd4\u56de\u7684\u8f93\u51fa\u3002 <return_list> \u5efa\u8bae\u4f7f\u7528 Schema \u76f8\u5173\u51fd\u6570 \u6307\u5b9a\u8fd4\u56de\u4fe1\u606f\uff0c\u5f53\u524d\u652f\u6301 src(edge) \u3001 dst(edge) \u3001 type(edge) \u7b49\uff0c\u6682\u4e0d\u652f\u6301\u5d4c\u5957\u51fd\u6570\u3002\u8be6\u60c5\u53c2\u89c1 YIELD \u3002 SAMPLE <sample_list> \uff1a\u7528\u4e8e\u5728\u7ed3\u679c\u96c6\u4e2d\u53d6\u6837\u3002\u8be6\u60c5\u53c2\u89c1 SAMPLE \u3002 <limit_by_list_clause> \uff1a\u7528\u4e8e\u5728\u904d\u5386\u8fc7\u7a0b\u4e2d\u9010\u6b65\u9650\u5236\u8f93\u51fa\u6570\u91cf\u3002\u8be6\u60c5\u53c2\u89c1 LIMIT \u3002 GROUP BY \uff1a\u6839\u636e\u6307\u5b9a\u5c5e\u6027\u7684\u503c\u5c06\u8f93\u51fa\u5206\u7ec4\u3002\u8be6\u60c5\u53c2\u89c1 GROUP BY \u3002\u5206\u7ec4\u540e\u9700\u8981\u518d\u6b21\u4f7f\u7528 YIELD \u5b9a\u4e49\u9700\u8981\u8fd4\u56de\u7684\u8f93\u51fa\u3002 ORDER BY \uff1a\u6307\u5b9a\u8f93\u51fa\u7ed3\u679c\u7684\u6392\u5e8f\u89c4\u5219\u3002\u8be6\u60c5\u53c2\u89c1 ORDER BY \u3002 Note \u6ca1\u6709\u6307\u5b9a\u6392\u5e8f\u89c4\u5219\u65f6\uff0c\u8f93\u51fa\u7ed3\u679c\u7684\u987a\u5e8f\u4e0d\u662f\u56fa\u5b9a\u7684\u3002 LIMIT [<offset>,] <number_rows>] \uff1a\u9650\u5236\u8f93\u51fa\u7ed3\u679c\u7684\u884c\u6570\u3002\u8be6\u60c5\u53c2\u89c1 LIMIT \u3002 \u4f7f\u7528\u8bf4\u660e \u00b6 GO \u8bed\u53e5\u4e2d\u7684 WHERE \u548c YIELD \u5b50\u53e5\u901a\u5e38\u7ed3\u5408\u5c5e\u6027\u5f15\u7528\u7b26( $^ \u548c $$ )\u6216\u51fd\u6570 properties($^) \u548c properties($$) \u6307\u5b9a\u70b9\u7684\u5c5e\u6027\uff1b\u4f7f\u7528\u51fd\u6570 properties(edge) \u6307\u5b9a\u8fb9\u7684\u5c5e\u6027\u3002\u7528\u6cd5\u53c2\u89c1 \u5c5e\u6027\u5f15\u7528\u7b26 \u548c Schema \u76f8\u5173\u51fd\u6570 \u3002 GO \u590d\u5408\u8bed\u53e5\u4e2d\u5982\u9700\u5f15\u7528\u5b50\u67e5\u8be2\u7684\u7ed3\u679c\uff0c\u9700\u8981\u4e3a\u8be5\u7ed3\u679c\u8bbe\u7f6e\u522b\u540d\uff0c\u5e76\u4f7f\u7528\u7ba1\u9053\u7b26 | \u4f20\u9012\u7ed9\u4e0b\u4e00\u4e2a\u5b50\u67e5\u8be2\uff0c\u540c\u65f6\u5728\u4e0b\u4e00\u4e2a\u5b50\u67e5\u8be2\u4e2d\u4f7f\u7528 $- \u5f15\u7528\u8be5\u7ed3\u679c\u7684\u522b\u540d\u3002\u8be6\u60c5\u53c2\u89c1 \u7ba1\u9053\u7b26 \u3002 \u5f53\u67e5\u8be2\u5c5e\u6027\u6ca1\u6709\u503c\u65f6\uff0c\u8fd4\u56de\u7ed3\u679c\u663e\u793a NULL \u3002 \u573a\u666f\u53ca\u793a\u4f8b \u00b6 \u67e5\u8be2\u8d77\u59cb\u70b9\u7684\u76f4\u63a5\u90bb\u5c45\u70b9 \u00b6 \u573a\u666f\uff1a\u67e5\u8be2\u67d0\u4e2a\u70b9\u7684\u76f4\u63a5\u76f8\u90bb\u70b9\uff0c\u4f8b\u5982\u67e5\u8be2\u4e00\u4e2a\u4eba\u6240\u5c5e\u961f\u4f0d\u3002 # \u8fd4\u56de player102 \u6240\u5c5e\u961f\u4f0d\u3002 nebula> GO FROM \"player102\" OVER serve YIELD dst(edge); +-----------+ | dst(EDGE) | +-----------+ | \"team203\" | | \"team204\" | +-----------+ \u67e5\u8be2\u6307\u5b9a\u8df3\u6570\u5185\u7684\u70b9 \u00b6 \u573a\u666f\uff1a\u67e5\u8be2\u4e00\u4e2a\u70b9\u5728\u6307\u5b9a\u8df3\u6570\u5185\u7684\u6240\u6709\u70b9\uff0c\u4f8b\u5982\u67e5\u8be2\u4e00\u4e2a\u4eba\u4e24\u8df3\u5185\u7684\u670b\u53cb\u3002 # \u8fd4\u56de\u8ddd\u79bb player102 \u4e24\u8df3\u7684\u670b\u53cb\u3002 nebula> GO 2 STEPS FROM \"player102\" OVER follow YIELD dst(edge); +-------------+ | dst(EDGE) | +-------------+ | \"player101\" | | \"player125\" | | \"player100\" | | \"player102\" | | \"player125\" | +-------------+ # \u67e5\u8be2 player100 1~2 \u8df3\u5185\u7684\u670b\u53cb\u3002 nebula> GO 1 TO 2 STEPS FROM \"player100\" OVER follow \\ YIELD dst(edge) AS destination; +-------------+ | destination | +-------------+ | \"player101\" | | \"player125\" | ... # \u8be5 MATCH \u67e5\u8be2\u4e0e\u4e0a\u4e00\u4e2a GO \u67e5\u8be2\u5177\u6709\u76f8\u540c\u7684\u8bed\u4e49\u3002 nebula> MATCH (v) -[e:follow*1..2]->(v2) \\ WHERE id(v) == \"player100\" \\ RETURN id(v2) AS destination; +-------------+ | destination | +-------------+ | \"player100\" | | \"player102\" | ... \u6dfb\u52a0\u8fc7\u6ee4\u6761\u4ef6 \u00b6 \u573a\u666f\uff1a\u67e5\u8be2\u6ee1\u8db3\u7279\u5b9a\u6761\u4ef6\u7684\u70b9\u548c\u8fb9\uff0c\u4f8b\u5982\u67e5\u8be2\u8d77\u59cb\u70b9\u548c\u76ee\u7684\u70b9\u4e4b\u95f4\u5177\u6709\u7279\u5b9a\u5c5e\u6027\u7684\u8fb9\u3002 # \u4f7f\u7528 WHERE \u6dfb\u52a0\u8fc7\u6ee4\u6761\u4ef6\u3002 nebula> GO FROM \"player100\", \"player102\" OVER serve \\ WHERE properties(edge).start_year > 1995 \\ YIELD DISTINCT properties($$).name AS team_name, properties(edge).start_year AS start_year, properties($^).name AS player_name; +-----------------+------------+---------------------+ | team_name | start_year | player_name | +-----------------+------------+---------------------+ | \"Spurs\" | 1997 | \"Tim Duncan\" | | \"Trail Blazers\" | 2006 | \"LaMarcus Aldridge\" | | \"Spurs\" | 2015 | \"LaMarcus Aldridge\" | +-----------------+------------+---------------------+ \u67e5\u8be2\u591a\u4e2a Edge type \u00b6 \u573a\u666f\uff1a\u67e5\u8be2\u8d77\u59cb\u70b9\u5173\u8054\u7684\u591a\u4e2a\u8fb9\u7c7b\u578b\u53ef\u4ee5\u901a\u8fc7\u8bbe\u7f6e\u591a\u4e2aEdge Type\u5b9e\u73b0\uff0c\u4e5f\u53ef\u4ee5\u901a\u8fc7\u8bbe\u7f6e * \u5173\u8054\u6240\u6709\u7684\u8fb9\u7c7b\u578b\u3002 # \u904d\u5386\u591a\u4e2a Edge type\u3002 nebula> GO FROM \"player100\" OVER follow, serve \\ YIELD properties(edge).degree, properties(edge).start_year; +-------------------------+-----------------------------+ | properties(EDGE).degree | properties(EDGE).start_year | +-------------------------+-----------------------------+ | 95 | __NULL__ | | 95 | __NULL__ | | __NULL__ | 1997 | +-------------------------+-----------------------------+ \u67e5\u8be2\u5165\u8fb9\u65b9\u5411\u7684\u70b9 \u00b6 # \u8fd4\u56de\u5173\u6ce8 player100 \u7684\u90bb\u5c45\u70b9\u3002 nebula> GO FROM \"player100\" OVER follow REVERSELY \\ YIELD src(edge) AS destination; +-------------+ | destination | +-------------+ | \"player101\" | | \"player102\" | ... # \u8be5 MATCH \u67e5\u8be2\u4e0e\u4e0a\u4e00\u4e2a GO \u67e5\u8be2\u5177\u6709\u76f8\u540c\u7684\u8bed\u4e49\u3002 nebula> MATCH (v)<-[e:follow]- (v2) WHERE id(v) == 'player100' \\ RETURN id(v2) AS destination; +-------------+ | destination | +-------------+ | \"player101\" | | \"player102\" | ... \u5b50\u67e5\u8be2\u4f5c\u4e3a\u8d77\u59cb\u70b9 \u00b6 \u573a\u666f\uff1a\u4f7f\u7528\u5b50\u67e5\u8be2\u7684\u7ed3\u679c\u4f5c\u4e3a\u56fe\u904d\u5386\u7684\u8d77\u59cb\u70b9\u3002 # \u67e5\u8be2 player100 \u7684\u670b\u53cb\u548c\u670b\u53cb\u6240\u5c5e\u961f\u4f0d\u3002 nebula> GO FROM \"player100\" OVER follow REVERSELY \\ YIELD src(edge) AS id | \\ GO FROM $-.id OVER serve \\ WHERE properties($^).age > 20 \\ YIELD properties($^).name AS FriendOf, properties($$).name AS Team; +---------------------+-----------------+ | FriendOf | Team | +---------------------+-----------------+ | \"Boris Diaw\" | \"Spurs\" | | \"Boris Diaw\" | \"Jazz\" | | \"Boris Diaw\" | \"Suns\" | ... # \u8be5 MATCH \u67e5\u8be2\u4e0e\u4e0a\u4e00\u4e2a GO \u67e5\u8be2\u5177\u6709\u76f8\u540c\u7684\u8bed\u4e49\u3002 nebula> MATCH (v)<-[e:follow]- (v2)-[e2:serve]->(v3) \\ WHERE id(v) == 'player100' \\ RETURN v2.player.name AS FriendOf, v3.team.name AS Team; +---------------------+-----------------+ | FriendOf | Team | +---------------------+-----------------+ | \"Boris Diaw\" | \"Spurs\" | | \"Boris Diaw\" | \"Jazz\" | | \"Boris Diaw\" | \"Suns\" | ... \u4f7f\u7528 GROUP BY \u5206\u7ec4 \u00b6 \u573a\u666f\uff1a\u4f7f\u7528 GROUP BY \u5206\u7ec4\uff0c\u7136\u540e\u4f7f\u7528 YIELD \u8fd4\u56de\u5206\u7ec4\u540e\u7684\u7ed3\u679c\u3002 # \u6839\u636e\u5e74\u9f84\u5206\u7ec4\u3002 nebula> GO 2 STEPS FROM \"player100\" OVER follow \\ YIELD src(edge) AS src, dst(edge) AS dst, properties($$).age AS age \\ | GROUP BY $-.dst \\ YIELD $-.dst AS dst, collect_set($-.src) AS src, collect($-.age) AS age; +-------------+----------------------------+----------+ | dst | src | age | +-------------+----------------------------+----------+ | \"player125\" | {\"player101\"} | [41] | | \"player100\" | {\"player125\", \"player101\"} | [42, 42] | | \"player102\" | {\"player101\"} | [33] | +-------------+----------------------------+----------+ \u4f7f\u7528 ORDER BY \u548c LIMIT \u6392\u5e8f\u548c\u9650\u5236\u8f93\u51fa\u7ed3\u679c \u00b6 # \u5206\u7ec4\u5e76\u9650\u5236\u8f93\u51fa\u7ed3\u679c\u7684\u884c\u6570\u3002 nebula> $a = GO FROM \"player100\" OVER follow YIELD src(edge) AS src, dst(edge) AS dst; \\ GO 2 STEPS FROM $a.dst OVER follow \\ YIELD $a.src AS src, $a.dst, src(edge), dst(edge) \\ | ORDER BY $-.src | OFFSET 1 LIMIT 2; +-------------+-------------+-------------+-------------+ | src | $a.dst | src(EDGE) | dst(EDGE) | +-------------+-------------+-------------+-------------+ | \"player100\" | \"player101\" | \"player100\" | \"player101\" | | \"player100\" | \"player125\" | \"player100\" | \"player125\" | +-------------+-------------+-------------+-------------+ \u5176\u4ed6\u7528\u6cd5 \u00b6 # \u5728\u591a\u4e2a\u8fb9\u4e0a\u901a\u8fc7 IS NOT EMPTY \u8fdb\u884c\u5224\u65ad\u3002 nebula> GO FROM \"player100\" OVER follow WHERE properties($$).name IS NOT EMPTY YIELD dst(edge); +-------------+ | dst(EDGE) | +-------------+ | \"player125\" | | \"player101\" | +-------------+","title":"GO"},{"location":"3.ngql-guide/7.general-query-statements/3.go/#go","text":"GO \u8bed\u53e5\u662fNebulaGraph\u56fe\u6570\u636e\u5e93\u4e2d\u7528\u4e8e\u4ece\u7ed9\u5b9a\u8d77\u59cb\u70b9\u5f00\u59cb\u904d\u5386\u56fe\u7684\u8bed\u53e5\u3002 GO \u8bed\u53e5\u91c7\u7528\u7684\u8def\u5f84\u7c7b\u578b\u662f walk \uff0c\u5373\u904d\u5386\u65f6\u70b9\u548c\u8fb9\u90fd\u53ef\u4ee5\u91cd\u590d\u3002","title":"GO"},{"location":"3.ngql-guide/7.general-query-statements/3.go/#opencypher","text":"\u672c\u6587\u64cd\u4f5c\u4ec5\u9002\u7528\u4e8e\u539f\u751f nGQL\u3002","title":"openCypher \u517c\u5bb9\u6027"},{"location":"3.ngql-guide/7.general-query-statements/3.go/#_1","text":"GO [[<M> TO] <N> {STEP|STEPS} ] FROM <vertex_list> OVER <edge_type_list> [{REVERSELY | BIDIRECT}] [ WHERE <conditions> ] YIELD [DISTINCT] <return_list> [{ SAMPLE <sample_list> | <limit_by_list_clause> }] [| GROUP BY {<col_name> | expression> | <position>} YIELD <col_name>] [| ORDER BY <expression> [{ASC | DESC}]] [| LIMIT [<offset>,] <number_rows>]; <vertex_list> ::= <vid> [, <vid> ...] <edge_type_list> ::= <edge_type> [, <edge_type> ...] | * <return_list> ::= <col_name> [AS <col_alias>] [, <col_name> [AS <col_alias>] ...] <N> {STEP|STEPS} \uff1a\u6307\u5b9a\u8df3\u6570\u3002\u5982\u679c\u6ca1\u6709\u6307\u5b9a\u8df3\u6570\uff0c\u9ed8\u8ba4\u503c N \u4e3a 1 \u3002\u5982\u679c N \u4e3a 0 \uff0cNebulaGraph\u4e0d\u4f1a\u68c0\u7d22\u4efb\u4f55\u8fb9\u3002 M TO N {STEP|STEPS} \uff1a\u904d\u5386 M~N \u8df3\u7684\u8fb9\u3002\u5982\u679c M \u4e3a 0 \uff0c\u8f93\u51fa\u7ed3\u679c\u548c M \u4e3a 1 \u76f8\u540c\uff0c\u5373 GO 0 TO 2 \u548c GO 1 TO 2 \u662f\u76f8\u540c\u7684\u3002 <vertex_list> \uff1a\u7528\u9017\u53f7\u5206\u9694\u7684\u70b9 ID \u5217\u8868\u3002 <edge_type_list> \uff1a\u904d\u5386\u7684 Edge type \u5217\u8868\u3002 REVERSELY | BIDIRECT \uff1a\u9ed8\u8ba4\u60c5\u51b5\u4e0b\u68c0\u7d22\u7684\u662f <vertex_list> \u7684\u51fa\u8fb9\uff08\u6b63\u5411\uff09\uff0c REVERSELY \u8868\u793a\u53cd\u5411\uff0c\u5373\u68c0\u7d22\u5165\u8fb9\uff1b BIDIRECT \u4e3a\u53cc\u5411\uff0c\u5373\u68c0\u7d22\u6b63\u5411\u548c\u53cd\u5411\u3002\u53ef\u901a\u8fc7 YIELD \u8fd4\u56de <edge_type>._type \u5b57\u6bb5\u5224\u65ad\u65b9\u5411\uff0c\u5176\u6b63\u6570\u4e3a\u6b63\u5411\uff0c\u8d1f\u6570\u4e3a\u53cd\u5411\u3002 WHERE <conditions> \uff1a\u6307\u5b9a\u904d\u5386\u7684\u8fc7\u6ee4\u6761\u4ef6\u3002\u7528\u6237\u53ef\u4ee5\u5728\u8d77\u59cb\u70b9\u3001\u76ee\u7684\u70b9\u548c\u8fb9\u4f7f\u7528 WHERE \u5b50\u53e5\uff0c\u8fd8\u53ef\u4ee5\u7ed3\u5408 AND \u3001 OR \u3001 NOT \u3001 XOR \u4e00\u8d77\u4f7f\u7528\u3002\u8be6\u60c5\u53c2\u89c1 WHERE \u3002 Note \u904d\u5386\u591a\u4e2a Edge type \u65f6\uff0c WHERE \u5b50\u53e5\u6709\u4e00\u4e9b\u9650\u5236\u3002\u4f8b\u5982\u4e0d\u652f\u6301 WHERE edge1.prop1 > edge2.prop2 \u3002 GO \u8bed\u53e5\u6267\u884c\u65f6\u5148\u904d\u5386\u6240\u6709\u7684\u70b9\uff0c\u7136\u540e\u518d\u6839\u636e\u8fc7\u6ee4\u5668\u6761\u4ef6\u8fdb\u884c\u8fc7\u6ee4\u3002 YIELD [DISTINCT] <return_list> \uff1a\u5b9a\u4e49\u9700\u8981\u8fd4\u56de\u7684\u8f93\u51fa\u3002 <return_list> \u5efa\u8bae\u4f7f\u7528 Schema \u76f8\u5173\u51fd\u6570 \u6307\u5b9a\u8fd4\u56de\u4fe1\u606f\uff0c\u5f53\u524d\u652f\u6301 src(edge) \u3001 dst(edge) \u3001 type(edge) \u7b49\uff0c\u6682\u4e0d\u652f\u6301\u5d4c\u5957\u51fd\u6570\u3002\u8be6\u60c5\u53c2\u89c1 YIELD \u3002 SAMPLE <sample_list> \uff1a\u7528\u4e8e\u5728\u7ed3\u679c\u96c6\u4e2d\u53d6\u6837\u3002\u8be6\u60c5\u53c2\u89c1 SAMPLE \u3002 <limit_by_list_clause> \uff1a\u7528\u4e8e\u5728\u904d\u5386\u8fc7\u7a0b\u4e2d\u9010\u6b65\u9650\u5236\u8f93\u51fa\u6570\u91cf\u3002\u8be6\u60c5\u53c2\u89c1 LIMIT \u3002 GROUP BY \uff1a\u6839\u636e\u6307\u5b9a\u5c5e\u6027\u7684\u503c\u5c06\u8f93\u51fa\u5206\u7ec4\u3002\u8be6\u60c5\u53c2\u89c1 GROUP BY \u3002\u5206\u7ec4\u540e\u9700\u8981\u518d\u6b21\u4f7f\u7528 YIELD \u5b9a\u4e49\u9700\u8981\u8fd4\u56de\u7684\u8f93\u51fa\u3002 ORDER BY \uff1a\u6307\u5b9a\u8f93\u51fa\u7ed3\u679c\u7684\u6392\u5e8f\u89c4\u5219\u3002\u8be6\u60c5\u53c2\u89c1 ORDER BY \u3002 Note \u6ca1\u6709\u6307\u5b9a\u6392\u5e8f\u89c4\u5219\u65f6\uff0c\u8f93\u51fa\u7ed3\u679c\u7684\u987a\u5e8f\u4e0d\u662f\u56fa\u5b9a\u7684\u3002 LIMIT [<offset>,] <number_rows>] \uff1a\u9650\u5236\u8f93\u51fa\u7ed3\u679c\u7684\u884c\u6570\u3002\u8be6\u60c5\u53c2\u89c1 LIMIT \u3002","title":"\u8bed\u6cd5"},{"location":"3.ngql-guide/7.general-query-statements/3.go/#_2","text":"GO \u8bed\u53e5\u4e2d\u7684 WHERE \u548c YIELD \u5b50\u53e5\u901a\u5e38\u7ed3\u5408\u5c5e\u6027\u5f15\u7528\u7b26( $^ \u548c $$ )\u6216\u51fd\u6570 properties($^) \u548c properties($$) \u6307\u5b9a\u70b9\u7684\u5c5e\u6027\uff1b\u4f7f\u7528\u51fd\u6570 properties(edge) \u6307\u5b9a\u8fb9\u7684\u5c5e\u6027\u3002\u7528\u6cd5\u53c2\u89c1 \u5c5e\u6027\u5f15\u7528\u7b26 \u548c Schema \u76f8\u5173\u51fd\u6570 \u3002 GO \u590d\u5408\u8bed\u53e5\u4e2d\u5982\u9700\u5f15\u7528\u5b50\u67e5\u8be2\u7684\u7ed3\u679c\uff0c\u9700\u8981\u4e3a\u8be5\u7ed3\u679c\u8bbe\u7f6e\u522b\u540d\uff0c\u5e76\u4f7f\u7528\u7ba1\u9053\u7b26 | \u4f20\u9012\u7ed9\u4e0b\u4e00\u4e2a\u5b50\u67e5\u8be2\uff0c\u540c\u65f6\u5728\u4e0b\u4e00\u4e2a\u5b50\u67e5\u8be2\u4e2d\u4f7f\u7528 $- \u5f15\u7528\u8be5\u7ed3\u679c\u7684\u522b\u540d\u3002\u8be6\u60c5\u53c2\u89c1 \u7ba1\u9053\u7b26 \u3002 \u5f53\u67e5\u8be2\u5c5e\u6027\u6ca1\u6709\u503c\u65f6\uff0c\u8fd4\u56de\u7ed3\u679c\u663e\u793a NULL \u3002","title":"\u4f7f\u7528\u8bf4\u660e"},{"location":"3.ngql-guide/7.general-query-statements/3.go/#_3","text":"","title":"\u573a\u666f\u53ca\u793a\u4f8b"},{"location":"3.ngql-guide/7.general-query-statements/3.go/#_4","text":"\u573a\u666f\uff1a\u67e5\u8be2\u67d0\u4e2a\u70b9\u7684\u76f4\u63a5\u76f8\u90bb\u70b9\uff0c\u4f8b\u5982\u67e5\u8be2\u4e00\u4e2a\u4eba\u6240\u5c5e\u961f\u4f0d\u3002 # \u8fd4\u56de player102 \u6240\u5c5e\u961f\u4f0d\u3002 nebula> GO FROM \"player102\" OVER serve YIELD dst(edge); +-----------+ | dst(EDGE) | +-----------+ | \"team203\" | | \"team204\" | +-----------+","title":"\u67e5\u8be2\u8d77\u59cb\u70b9\u7684\u76f4\u63a5\u90bb\u5c45\u70b9"},{"location":"3.ngql-guide/7.general-query-statements/3.go/#_5","text":"\u573a\u666f\uff1a\u67e5\u8be2\u4e00\u4e2a\u70b9\u5728\u6307\u5b9a\u8df3\u6570\u5185\u7684\u6240\u6709\u70b9\uff0c\u4f8b\u5982\u67e5\u8be2\u4e00\u4e2a\u4eba\u4e24\u8df3\u5185\u7684\u670b\u53cb\u3002 # \u8fd4\u56de\u8ddd\u79bb player102 \u4e24\u8df3\u7684\u670b\u53cb\u3002 nebula> GO 2 STEPS FROM \"player102\" OVER follow YIELD dst(edge); +-------------+ | dst(EDGE) | +-------------+ | \"player101\" | | \"player125\" | | \"player100\" | | \"player102\" | | \"player125\" | +-------------+ # \u67e5\u8be2 player100 1~2 \u8df3\u5185\u7684\u670b\u53cb\u3002 nebula> GO 1 TO 2 STEPS FROM \"player100\" OVER follow \\ YIELD dst(edge) AS destination; +-------------+ | destination | +-------------+ | \"player101\" | | \"player125\" | ... # \u8be5 MATCH \u67e5\u8be2\u4e0e\u4e0a\u4e00\u4e2a GO \u67e5\u8be2\u5177\u6709\u76f8\u540c\u7684\u8bed\u4e49\u3002 nebula> MATCH (v) -[e:follow*1..2]->(v2) \\ WHERE id(v) == \"player100\" \\ RETURN id(v2) AS destination; +-------------+ | destination | +-------------+ | \"player100\" | | \"player102\" | ...","title":"\u67e5\u8be2\u6307\u5b9a\u8df3\u6570\u5185\u7684\u70b9"},{"location":"3.ngql-guide/7.general-query-statements/3.go/#_6","text":"\u573a\u666f\uff1a\u67e5\u8be2\u6ee1\u8db3\u7279\u5b9a\u6761\u4ef6\u7684\u70b9\u548c\u8fb9\uff0c\u4f8b\u5982\u67e5\u8be2\u8d77\u59cb\u70b9\u548c\u76ee\u7684\u70b9\u4e4b\u95f4\u5177\u6709\u7279\u5b9a\u5c5e\u6027\u7684\u8fb9\u3002 # \u4f7f\u7528 WHERE \u6dfb\u52a0\u8fc7\u6ee4\u6761\u4ef6\u3002 nebula> GO FROM \"player100\", \"player102\" OVER serve \\ WHERE properties(edge).start_year > 1995 \\ YIELD DISTINCT properties($$).name AS team_name, properties(edge).start_year AS start_year, properties($^).name AS player_name; +-----------------+------------+---------------------+ | team_name | start_year | player_name | +-----------------+------------+---------------------+ | \"Spurs\" | 1997 | \"Tim Duncan\" | | \"Trail Blazers\" | 2006 | \"LaMarcus Aldridge\" | | \"Spurs\" | 2015 | \"LaMarcus Aldridge\" | +-----------------+------------+---------------------+","title":"\u6dfb\u52a0\u8fc7\u6ee4\u6761\u4ef6"},{"location":"3.ngql-guide/7.general-query-statements/3.go/#edge_type","text":"\u573a\u666f\uff1a\u67e5\u8be2\u8d77\u59cb\u70b9\u5173\u8054\u7684\u591a\u4e2a\u8fb9\u7c7b\u578b\u53ef\u4ee5\u901a\u8fc7\u8bbe\u7f6e\u591a\u4e2aEdge Type\u5b9e\u73b0\uff0c\u4e5f\u53ef\u4ee5\u901a\u8fc7\u8bbe\u7f6e * \u5173\u8054\u6240\u6709\u7684\u8fb9\u7c7b\u578b\u3002 # \u904d\u5386\u591a\u4e2a Edge type\u3002 nebula> GO FROM \"player100\" OVER follow, serve \\ YIELD properties(edge).degree, properties(edge).start_year; +-------------------------+-----------------------------+ | properties(EDGE).degree | properties(EDGE).start_year | +-------------------------+-----------------------------+ | 95 | __NULL__ | | 95 | __NULL__ | | __NULL__ | 1997 | +-------------------------+-----------------------------+","title":"\u67e5\u8be2\u591a\u4e2a Edge type"},{"location":"3.ngql-guide/7.general-query-statements/3.go/#_7","text":"# \u8fd4\u56de\u5173\u6ce8 player100 \u7684\u90bb\u5c45\u70b9\u3002 nebula> GO FROM \"player100\" OVER follow REVERSELY \\ YIELD src(edge) AS destination; +-------------+ | destination | +-------------+ | \"player101\" | | \"player102\" | ... # \u8be5 MATCH \u67e5\u8be2\u4e0e\u4e0a\u4e00\u4e2a GO \u67e5\u8be2\u5177\u6709\u76f8\u540c\u7684\u8bed\u4e49\u3002 nebula> MATCH (v)<-[e:follow]- (v2) WHERE id(v) == 'player100' \\ RETURN id(v2) AS destination; +-------------+ | destination | +-------------+ | \"player101\" | | \"player102\" | ...","title":"\u67e5\u8be2\u5165\u8fb9\u65b9\u5411\u7684\u70b9"},{"location":"3.ngql-guide/7.general-query-statements/3.go/#_8","text":"\u573a\u666f\uff1a\u4f7f\u7528\u5b50\u67e5\u8be2\u7684\u7ed3\u679c\u4f5c\u4e3a\u56fe\u904d\u5386\u7684\u8d77\u59cb\u70b9\u3002 # \u67e5\u8be2 player100 \u7684\u670b\u53cb\u548c\u670b\u53cb\u6240\u5c5e\u961f\u4f0d\u3002 nebula> GO FROM \"player100\" OVER follow REVERSELY \\ YIELD src(edge) AS id | \\ GO FROM $-.id OVER serve \\ WHERE properties($^).age > 20 \\ YIELD properties($^).name AS FriendOf, properties($$).name AS Team; +---------------------+-----------------+ | FriendOf | Team | +---------------------+-----------------+ | \"Boris Diaw\" | \"Spurs\" | | \"Boris Diaw\" | \"Jazz\" | | \"Boris Diaw\" | \"Suns\" | ... # \u8be5 MATCH \u67e5\u8be2\u4e0e\u4e0a\u4e00\u4e2a GO \u67e5\u8be2\u5177\u6709\u76f8\u540c\u7684\u8bed\u4e49\u3002 nebula> MATCH (v)<-[e:follow]- (v2)-[e2:serve]->(v3) \\ WHERE id(v) == 'player100' \\ RETURN v2.player.name AS FriendOf, v3.team.name AS Team; +---------------------+-----------------+ | FriendOf | Team | +---------------------+-----------------+ | \"Boris Diaw\" | \"Spurs\" | | \"Boris Diaw\" | \"Jazz\" | | \"Boris Diaw\" | \"Suns\" | ...","title":"\u5b50\u67e5\u8be2\u4f5c\u4e3a\u8d77\u59cb\u70b9"},{"location":"3.ngql-guide/7.general-query-statements/3.go/#group_by","text":"\u573a\u666f\uff1a\u4f7f\u7528 GROUP BY \u5206\u7ec4\uff0c\u7136\u540e\u4f7f\u7528 YIELD \u8fd4\u56de\u5206\u7ec4\u540e\u7684\u7ed3\u679c\u3002 # \u6839\u636e\u5e74\u9f84\u5206\u7ec4\u3002 nebula> GO 2 STEPS FROM \"player100\" OVER follow \\ YIELD src(edge) AS src, dst(edge) AS dst, properties($$).age AS age \\ | GROUP BY $-.dst \\ YIELD $-.dst AS dst, collect_set($-.src) AS src, collect($-.age) AS age; +-------------+----------------------------+----------+ | dst | src | age | +-------------+----------------------------+----------+ | \"player125\" | {\"player101\"} | [41] | | \"player100\" | {\"player125\", \"player101\"} | [42, 42] | | \"player102\" | {\"player101\"} | [33] | +-------------+----------------------------+----------+","title":"\u4f7f\u7528 GROUP BY \u5206\u7ec4"},{"location":"3.ngql-guide/7.general-query-statements/3.go/#order_by_limit","text":"# \u5206\u7ec4\u5e76\u9650\u5236\u8f93\u51fa\u7ed3\u679c\u7684\u884c\u6570\u3002 nebula> $a = GO FROM \"player100\" OVER follow YIELD src(edge) AS src, dst(edge) AS dst; \\ GO 2 STEPS FROM $a.dst OVER follow \\ YIELD $a.src AS src, $a.dst, src(edge), dst(edge) \\ | ORDER BY $-.src | OFFSET 1 LIMIT 2; +-------------+-------------+-------------+-------------+ | src | $a.dst | src(EDGE) | dst(EDGE) | +-------------+-------------+-------------+-------------+ | \"player100\" | \"player101\" | \"player100\" | \"player101\" | | \"player100\" | \"player125\" | \"player100\" | \"player125\" | +-------------+-------------+-------------+-------------+","title":"\u4f7f\u7528 ORDER BY \u548c LIMIT \u6392\u5e8f\u548c\u9650\u5236\u8f93\u51fa\u7ed3\u679c"},{"location":"3.ngql-guide/7.general-query-statements/3.go/#_9","text":"# \u5728\u591a\u4e2a\u8fb9\u4e0a\u901a\u8fc7 IS NOT EMPTY \u8fdb\u884c\u5224\u65ad\u3002 nebula> GO FROM \"player100\" OVER follow WHERE properties($$).name IS NOT EMPTY YIELD dst(edge); +-------------+ | dst(EDGE) | +-------------+ | \"player125\" | | \"player101\" | +-------------+","title":"\u5176\u4ed6\u7528\u6cd5"},{"location":"3.ngql-guide/7.general-query-statements/4.fetch/","text":"FETCH \u00b6 FETCH \u53ef\u4ee5\u83b7\u53d6\u6307\u5b9a\u70b9\u6216\u8fb9\u7684\u5c5e\u6027\u503c\u3002 openCypher \u517c\u5bb9\u6027 \u00b6 \u672c\u6587\u64cd\u4f5c\u4ec5\u9002\u7528\u4e8e\u539f\u751f nGQL\u3002 \u83b7\u53d6\u70b9\u7684\u5c5e\u6027\u503c \u00b6 \u8bed\u6cd5 \u00b6 FETCH PROP ON {<tag_name>[, tag_name ...] | *} <vid> [, vid ...] YIELD [DISTINCT] <return_list> [AS <alias>]; \u53c2\u6570 \u8bf4\u660e tag_name Tag \u540d\u79f0\u3002 * \u8868\u793a\u5f53\u524d\u56fe\u7a7a\u95f4\u4e2d\u7684\u6240\u6709 Tag\u3002 vid \u70b9 ID\u3002 YIELD \u5b9a\u4e49\u9700\u8981\u8fd4\u56de\u7684\u8f93\u51fa\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1 YIELD \u3002 AS \u8bbe\u7f6e\u522b\u540d\u3002 \u57fa\u4e8e Tag \u83b7\u53d6\u70b9\u7684\u5c5e\u6027\u503c \u00b6 \u5728 FETCH \u8bed\u53e5\u4e2d\u6307\u5b9a Tag \u83b7\u53d6\u5bf9\u5e94\u70b9\u7684\u5c5e\u6027\u503c\u3002 nebula> FETCH PROP ON player \"player100\" YIELD properties(vertex); +-------------------------------+ | properties(VERTEX) | +-------------------------------+ | {age: 42, name: \"Tim Duncan\"} | +-------------------------------+ \u83b7\u53d6\u70b9\u7684\u6307\u5b9a\u5c5e\u6027\u503c \u00b6 \u4f7f\u7528 YIELD \u5b50\u53e5\u6307\u5b9a\u8fd4\u56de\u7684\u5c5e\u6027\u3002 nebula> FETCH PROP ON player \"player100\" \\ YIELD properties(vertex).name AS name; +--------------+ | name | +--------------+ | \"Tim Duncan\" | +--------------+ \u83b7\u53d6\u591a\u4e2a\u70b9\u7684\u5c5e\u6027\u503c \u00b6 \u6307\u5b9a\u591a\u4e2a\u70b9 ID \u83b7\u53d6\u591a\u4e2a\u70b9\u7684\u5c5e\u6027\u503c\uff0c\u70b9\u4e4b\u95f4\u7528\u82f1\u6587\u9017\u53f7\uff08,\uff09\u5206\u9694\u3002 nebula> FETCH PROP ON player \"player101\", \"player102\", \"player103\" YIELD properties(vertex); +--------------------------------------+ | properties(VERTEX) | +--------------------------------------+ | {age: 33, name: \"LaMarcus Aldridge\"} | | {age: 36, name: \"Tony Parker\"} | | {age: 32, name: \"Rudy Gay\"} | +--------------------------------------+ \u57fa\u4e8e\u591a\u4e2a Tag \u83b7\u53d6\u70b9\u7684\u5c5e\u6027\u503c \u00b6 \u5728 FETCH \u8bed\u53e5\u4e2d\u6307\u5b9a\u591a\u4e2a Tag \u83b7\u53d6\u5c5e\u6027\u503c\u3002Tag \u4e4b\u95f4\u7528\u82f1\u6587\u9017\u53f7\uff08,\uff09\u5206\u9694\u3002 # \u521b\u5efa\u65b0 Tag t1\u3002 nebula> CREATE TAG IF NOT EXISTS t1(a string, b int); # \u4e3a\u70b9 player100 \u6dfb\u52a0 Tag t1\u3002 nebula> INSERT VERTEX t1(a, b) VALUES \"player100\":(\"Hello\", 100); # \u57fa\u4e8e Tag player \u548c t1 \u83b7\u53d6\u70b9 player100 \u4e0a\u7684\u5c5e\u6027\u503c\u3002 nebula> FETCH PROP ON player, t1 \"player100\" YIELD vertex AS v; +----------------------------------------------------------------------------+ | v | +----------------------------------------------------------------------------+ | (\"player100\" :player{age: 42, name: \"Tim Duncan\"} :t1{a: \"Hello\", b: 100}) | +----------------------------------------------------------------------------+ \u7528\u6237\u53ef\u4ee5\u5728 FETCH \u8bed\u53e5\u4e2d\u7ec4\u5408\u591a\u4e2a Tag \u548c\u591a\u4e2a\u70b9\u3002 nebula> FETCH PROP ON player, t1 \"player100\", \"player103\" YIELD vertex AS v; +----------------------------------------------------------------------------+ | v | +----------------------------------------------------------------------------+ | (\"player100\" :player{age: 42, name: \"Tim Duncan\"} :t1{a: \"Hello\", b: 100}) | | (\"player103\" :player{age: 32, name: \"Rudy Gay\"}) | +----------------------------------------------------------------------------+ \u5728\u6240\u6709\u6807\u7b7e\u4e2d\u83b7\u53d6\u70b9\u7684\u5c5e\u6027\u503c \u00b6 \u5728 FETCH \u8bed\u53e5\u4e2d\u4f7f\u7528 * \u83b7\u53d6\u5f53\u524d\u56fe\u7a7a\u95f4\u6240\u6709\u6807\u7b7e\u91cc\uff0c\u70b9\u7684\u5c5e\u6027\u503c\u3002 nebula> FETCH PROP ON * \"player100\", \"player106\", \"team200\" YIELD vertex AS v; +----------------------------------------------------------------------------+ | v | +----------------------------------------------------------------------------+ | (\"player100\" :player{age: 42, name: \"Tim Duncan\"} :t1{a: \"Hello\", b: 100}) | | (\"player106\" :player{age: 25, name: \"Kyle Anderson\"}) | | (\"team200\" :team{name: \"Warriors\"}) | +----------------------------------------------------------------------------+ \u83b7\u53d6\u8fb9\u7684\u5c5e\u6027\u503c \u00b6 \u8bed\u6cd5 \u00b6 FETCH PROP ON <edge_type> <src_vid> -> <dst_vid>[@<rank>] [, <src_vid> -> <dst_vid> ...] YIELD <output>; \u53c2\u6570 \u8bf4\u660e edge_type Edge type \u540d\u79f0\u3002 src_vid \u8d77\u59cb\u70b9 ID\uff0c\u8868\u793a\u8fb9\u7684\u8d77\u70b9\u3002 dst_vid \u76ee\u7684\u70b9 ID\uff0c\u8868\u793a\u8fb9\u7684\u7ec8\u70b9\u3002 rank \u8fb9\u7684 rank\u3002\u53ef\u9009\u53c2\u6570\uff0c\u9ed8\u8ba4\u503c\u4e3a 0 \u3002\u8d77\u59cb\u70b9\u3001\u76ee\u7684\u70b9\u3001Edge type \u548c rank \u53ef\u4ee5\u552f\u4e00\u786e\u5b9a\u4e00\u6761\u8fb9\u3002 YIELD \u5b9a\u4e49\u9700\u8981\u8fd4\u56de\u7684\u8f93\u51fa\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1 YIELD \u3002 \u83b7\u53d6\u8fb9\u7684\u6240\u6709\u5c5e\u6027\u503c \u00b6 # \u83b7\u53d6\u8fde\u63a5 player100 \u548c team204 \u7684\u8fb9 serve \u7684\u6240\u6709\u5c5e\u6027\u503c\u3002 nebula> FETCH PROP ON serve \"player100\" -> \"team204\" YIELD properties(edge); +------------------------------------+ | properties(EDGE) | +------------------------------------+ | {end_year: 2016, start_year: 1997} | +------------------------------------+ \u83b7\u53d6\u8fb9\u7684\u6307\u5b9a\u5c5e\u6027\u503c \u00b6 \u4f7f\u7528 YIELD \u5b50\u53e5\u6307\u5b9a\u8fd4\u56de\u7684\u5c5e\u6027\u3002 nebula> FETCH PROP ON serve \"player100\" -> \"team204\" \\ YIELD properties(edge).start_year; +-----------------------------+ | properties(EDGE).start_year | +-----------------------------+ | 1997 | +-----------------------------+ \u83b7\u53d6\u591a\u6761\u8fb9\u7684\u5c5e\u6027\u503c \u00b6 \u6307\u5b9a\u591a\u4e2a\u8fb9\u6a21\u5f0f ( <src_vid> -> <dst_vid>[@<rank>] ) \u83b7\u53d6\u591a\u4e2a\u8fb9\u7684\u5c5e\u6027\u503c\u3002\u6a21\u5f0f\u4e4b\u95f4\u7528\u82f1\u6587\u9017\u53f7\uff08,\uff09\u5206\u9694\u3002 nebula> FETCH PROP ON serve \"player100\" -> \"team204\", \"player133\" -> \"team202\" YIELD edge AS e; +-----------------------------------------------------------------------+ | e | +-----------------------------------------------------------------------+ | [:serve \"player100\"->\"team204\" @0 {end_year: 2016, start_year: 1997}] | | [:serve \"player133\"->\"team202\" @0 {end_year: 2011, start_year: 2002}] | +-----------------------------------------------------------------------+ \u57fa\u4e8e rank \u83b7\u53d6\u5c5e\u6027\u503c \u00b6 \u5982\u679c\u6709\u591a\u6761\u8fb9\uff0c\u8d77\u59cb\u70b9\u3001\u76ee\u7684\u70b9\u548c Edge type \u90fd\u76f8\u540c\uff0c\u53ef\u4ee5\u901a\u8fc7\u6307\u5b9a rank \u83b7\u53d6\u6b63\u786e\u7684\u8fb9\u5c5e\u6027\u503c\u3002 # \u63d2\u5165\u4e0d\u540c\u5c5e\u6027\u503c\u3001\u4e0d\u540c rank \u7684\u8fb9\u3002 nebula> insert edge serve(start_year,end_year) \\ values \"player100\"->\"team204\"@1:(1998, 2017); nebula> insert edge serve(start_year,end_year) \\ values \"player100\"->\"team204\"@2:(1990, 2018); # \u9ed8\u8ba4\u8fd4\u56de rank \u4e3a 0 \u7684\u8fb9\u3002 nebula> FETCH PROP ON serve \"player100\" -> \"team204\" YIELD edge AS e; +-----------------------------------------------------------------------+ | e | +-----------------------------------------------------------------------+ | [:serve \"player100\"->\"team204\" @0 {end_year: 2016, start_year: 1997}] | +-----------------------------------------------------------------------+ # \u8981\u83b7\u53d6 rank \u4e0d\u4e3a 0 \u7684\u8fb9\uff0c\u8bf7\u5728 FETCH \u8bed\u53e5\u4e2d\u8bbe\u7f6e rank\u3002 nebula> FETCH PROP ON serve \"player100\" -> \"team204\"@1 YIELD edge AS e; +-----------------------------------------------------------------------+ | e | +-----------------------------------------------------------------------+ | [:serve \"player100\"->\"team204\" @1 {end_year: 2017, start_year: 1998}] | +-----------------------------------------------------------------------+ \u590d\u5408\u8bed\u53e5\u4e2d\u4f7f\u7528 FETCH \u00b6 \u5c06 FETCH \u4e0e\u539f\u751f nGQL \u7ed3\u5408\u4f7f\u7528\u662f\u4e00\u79cd\u5e38\u89c1\u7684\u65b9\u5f0f\uff0c\u4f8b\u5982\u548c GO \u4e00\u8d77\u3002 # \u8fd4\u56de\u4ece\u70b9 player101 \u5f00\u59cb\u7684 follow \u8fb9\u7684 degree \u503c\u3002 nebula> GO FROM \"player101\" OVER follow \\ YIELD src(edge) AS s, dst(edge) AS d \\ | FETCH PROP ON follow $-.s -> $-.d \\ YIELD properties(edge).degree; +-------------------------+ | properties(EDGE).degree | +-------------------------+ | 95 | | 90 | | 95 | +-------------------------+ \u7528\u6237\u4e5f\u53ef\u4ee5\u901a\u8fc7\u81ea\u5b9a\u4e49\u53d8\u91cf\u6784\u5efa\u7c7b\u4f3c\u7684\u67e5\u8be2\u3002 nebula> $var = GO FROM \"player101\" OVER follow \\ YIELD src(edge) AS s, dst(edge) AS d; \\ FETCH PROP ON follow $var.s -> $var.d \\ YIELD properties(edge).degree; +-------------------------+ | properties(EDGE).degree | +-------------------------+ | 95 | | 90 | | 95 | +-------------------------+ \u66f4\u591a\u590d\u5408\u8bed\u53e5\u7684\u8be6\u60c5\uff0c\u8bf7\u53c2\u89c1 \u590d\u5408\u67e5\u8be2\uff08\u5b50\u53e5\u7ed3\u6784\uff09 \u3002","title":"FETCH"},{"location":"3.ngql-guide/7.general-query-statements/4.fetch/#fetch","text":"FETCH \u53ef\u4ee5\u83b7\u53d6\u6307\u5b9a\u70b9\u6216\u8fb9\u7684\u5c5e\u6027\u503c\u3002","title":"FETCH"},{"location":"3.ngql-guide/7.general-query-statements/4.fetch/#opencypher","text":"\u672c\u6587\u64cd\u4f5c\u4ec5\u9002\u7528\u4e8e\u539f\u751f nGQL\u3002","title":"openCypher \u517c\u5bb9\u6027"},{"location":"3.ngql-guide/7.general-query-statements/4.fetch/#_1","text":"","title":"\u83b7\u53d6\u70b9\u7684\u5c5e\u6027\u503c"},{"location":"3.ngql-guide/7.general-query-statements/4.fetch/#_2","text":"FETCH PROP ON {<tag_name>[, tag_name ...] | *} <vid> [, vid ...] YIELD [DISTINCT] <return_list> [AS <alias>]; \u53c2\u6570 \u8bf4\u660e tag_name Tag \u540d\u79f0\u3002 * \u8868\u793a\u5f53\u524d\u56fe\u7a7a\u95f4\u4e2d\u7684\u6240\u6709 Tag\u3002 vid \u70b9 ID\u3002 YIELD \u5b9a\u4e49\u9700\u8981\u8fd4\u56de\u7684\u8f93\u51fa\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1 YIELD \u3002 AS \u8bbe\u7f6e\u522b\u540d\u3002","title":"\u8bed\u6cd5"},{"location":"3.ngql-guide/7.general-query-statements/4.fetch/#tag","text":"\u5728 FETCH \u8bed\u53e5\u4e2d\u6307\u5b9a Tag \u83b7\u53d6\u5bf9\u5e94\u70b9\u7684\u5c5e\u6027\u503c\u3002 nebula> FETCH PROP ON player \"player100\" YIELD properties(vertex); +-------------------------------+ | properties(VERTEX) | +-------------------------------+ | {age: 42, name: \"Tim Duncan\"} | +-------------------------------+","title":"\u57fa\u4e8e Tag \u83b7\u53d6\u70b9\u7684\u5c5e\u6027\u503c"},{"location":"3.ngql-guide/7.general-query-statements/4.fetch/#_3","text":"\u4f7f\u7528 YIELD \u5b50\u53e5\u6307\u5b9a\u8fd4\u56de\u7684\u5c5e\u6027\u3002 nebula> FETCH PROP ON player \"player100\" \\ YIELD properties(vertex).name AS name; +--------------+ | name | +--------------+ | \"Tim Duncan\" | +--------------+","title":"\u83b7\u53d6\u70b9\u7684\u6307\u5b9a\u5c5e\u6027\u503c"},{"location":"3.ngql-guide/7.general-query-statements/4.fetch/#_4","text":"\u6307\u5b9a\u591a\u4e2a\u70b9 ID \u83b7\u53d6\u591a\u4e2a\u70b9\u7684\u5c5e\u6027\u503c\uff0c\u70b9\u4e4b\u95f4\u7528\u82f1\u6587\u9017\u53f7\uff08,\uff09\u5206\u9694\u3002 nebula> FETCH PROP ON player \"player101\", \"player102\", \"player103\" YIELD properties(vertex); +--------------------------------------+ | properties(VERTEX) | +--------------------------------------+ | {age: 33, name: \"LaMarcus Aldridge\"} | | {age: 36, name: \"Tony Parker\"} | | {age: 32, name: \"Rudy Gay\"} | +--------------------------------------+","title":"\u83b7\u53d6\u591a\u4e2a\u70b9\u7684\u5c5e\u6027\u503c"},{"location":"3.ngql-guide/7.general-query-statements/4.fetch/#tag_1","text":"\u5728 FETCH \u8bed\u53e5\u4e2d\u6307\u5b9a\u591a\u4e2a Tag \u83b7\u53d6\u5c5e\u6027\u503c\u3002Tag \u4e4b\u95f4\u7528\u82f1\u6587\u9017\u53f7\uff08,\uff09\u5206\u9694\u3002 # \u521b\u5efa\u65b0 Tag t1\u3002 nebula> CREATE TAG IF NOT EXISTS t1(a string, b int); # \u4e3a\u70b9 player100 \u6dfb\u52a0 Tag t1\u3002 nebula> INSERT VERTEX t1(a, b) VALUES \"player100\":(\"Hello\", 100); # \u57fa\u4e8e Tag player \u548c t1 \u83b7\u53d6\u70b9 player100 \u4e0a\u7684\u5c5e\u6027\u503c\u3002 nebula> FETCH PROP ON player, t1 \"player100\" YIELD vertex AS v; +----------------------------------------------------------------------------+ | v | +----------------------------------------------------------------------------+ | (\"player100\" :player{age: 42, name: \"Tim Duncan\"} :t1{a: \"Hello\", b: 100}) | +----------------------------------------------------------------------------+ \u7528\u6237\u53ef\u4ee5\u5728 FETCH \u8bed\u53e5\u4e2d\u7ec4\u5408\u591a\u4e2a Tag \u548c\u591a\u4e2a\u70b9\u3002 nebula> FETCH PROP ON player, t1 \"player100\", \"player103\" YIELD vertex AS v; +----------------------------------------------------------------------------+ | v | +----------------------------------------------------------------------------+ | (\"player100\" :player{age: 42, name: \"Tim Duncan\"} :t1{a: \"Hello\", b: 100}) | | (\"player103\" :player{age: 32, name: \"Rudy Gay\"}) | +----------------------------------------------------------------------------+","title":"\u57fa\u4e8e\u591a\u4e2a Tag \u83b7\u53d6\u70b9\u7684\u5c5e\u6027\u503c"},{"location":"3.ngql-guide/7.general-query-statements/4.fetch/#_5","text":"\u5728 FETCH \u8bed\u53e5\u4e2d\u4f7f\u7528 * \u83b7\u53d6\u5f53\u524d\u56fe\u7a7a\u95f4\u6240\u6709\u6807\u7b7e\u91cc\uff0c\u70b9\u7684\u5c5e\u6027\u503c\u3002 nebula> FETCH PROP ON * \"player100\", \"player106\", \"team200\" YIELD vertex AS v; +----------------------------------------------------------------------------+ | v | +----------------------------------------------------------------------------+ | (\"player100\" :player{age: 42, name: \"Tim Duncan\"} :t1{a: \"Hello\", b: 100}) | | (\"player106\" :player{age: 25, name: \"Kyle Anderson\"}) | | (\"team200\" :team{name: \"Warriors\"}) | +----------------------------------------------------------------------------+","title":"\u5728\u6240\u6709\u6807\u7b7e\u4e2d\u83b7\u53d6\u70b9\u7684\u5c5e\u6027\u503c"},{"location":"3.ngql-guide/7.general-query-statements/4.fetch/#_6","text":"","title":"\u83b7\u53d6\u8fb9\u7684\u5c5e\u6027\u503c"},{"location":"3.ngql-guide/7.general-query-statements/4.fetch/#_7","text":"FETCH PROP ON <edge_type> <src_vid> -> <dst_vid>[@<rank>] [, <src_vid> -> <dst_vid> ...] YIELD <output>; \u53c2\u6570 \u8bf4\u660e edge_type Edge type \u540d\u79f0\u3002 src_vid \u8d77\u59cb\u70b9 ID\uff0c\u8868\u793a\u8fb9\u7684\u8d77\u70b9\u3002 dst_vid \u76ee\u7684\u70b9 ID\uff0c\u8868\u793a\u8fb9\u7684\u7ec8\u70b9\u3002 rank \u8fb9\u7684 rank\u3002\u53ef\u9009\u53c2\u6570\uff0c\u9ed8\u8ba4\u503c\u4e3a 0 \u3002\u8d77\u59cb\u70b9\u3001\u76ee\u7684\u70b9\u3001Edge type \u548c rank \u53ef\u4ee5\u552f\u4e00\u786e\u5b9a\u4e00\u6761\u8fb9\u3002 YIELD \u5b9a\u4e49\u9700\u8981\u8fd4\u56de\u7684\u8f93\u51fa\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1 YIELD \u3002","title":"\u8bed\u6cd5"},{"location":"3.ngql-guide/7.general-query-statements/4.fetch/#_8","text":"# \u83b7\u53d6\u8fde\u63a5 player100 \u548c team204 \u7684\u8fb9 serve \u7684\u6240\u6709\u5c5e\u6027\u503c\u3002 nebula> FETCH PROP ON serve \"player100\" -> \"team204\" YIELD properties(edge); +------------------------------------+ | properties(EDGE) | +------------------------------------+ | {end_year: 2016, start_year: 1997} | +------------------------------------+","title":"\u83b7\u53d6\u8fb9\u7684\u6240\u6709\u5c5e\u6027\u503c"},{"location":"3.ngql-guide/7.general-query-statements/4.fetch/#_9","text":"\u4f7f\u7528 YIELD \u5b50\u53e5\u6307\u5b9a\u8fd4\u56de\u7684\u5c5e\u6027\u3002 nebula> FETCH PROP ON serve \"player100\" -> \"team204\" \\ YIELD properties(edge).start_year; +-----------------------------+ | properties(EDGE).start_year | +-----------------------------+ | 1997 | +-----------------------------+","title":"\u83b7\u53d6\u8fb9\u7684\u6307\u5b9a\u5c5e\u6027\u503c"},{"location":"3.ngql-guide/7.general-query-statements/4.fetch/#_10","text":"\u6307\u5b9a\u591a\u4e2a\u8fb9\u6a21\u5f0f ( <src_vid> -> <dst_vid>[@<rank>] ) \u83b7\u53d6\u591a\u4e2a\u8fb9\u7684\u5c5e\u6027\u503c\u3002\u6a21\u5f0f\u4e4b\u95f4\u7528\u82f1\u6587\u9017\u53f7\uff08,\uff09\u5206\u9694\u3002 nebula> FETCH PROP ON serve \"player100\" -> \"team204\", \"player133\" -> \"team202\" YIELD edge AS e; +-----------------------------------------------------------------------+ | e | +-----------------------------------------------------------------------+ | [:serve \"player100\"->\"team204\" @0 {end_year: 2016, start_year: 1997}] | | [:serve \"player133\"->\"team202\" @0 {end_year: 2011, start_year: 2002}] | +-----------------------------------------------------------------------+","title":"\u83b7\u53d6\u591a\u6761\u8fb9\u7684\u5c5e\u6027\u503c"},{"location":"3.ngql-guide/7.general-query-statements/4.fetch/#rank","text":"\u5982\u679c\u6709\u591a\u6761\u8fb9\uff0c\u8d77\u59cb\u70b9\u3001\u76ee\u7684\u70b9\u548c Edge type \u90fd\u76f8\u540c\uff0c\u53ef\u4ee5\u901a\u8fc7\u6307\u5b9a rank \u83b7\u53d6\u6b63\u786e\u7684\u8fb9\u5c5e\u6027\u503c\u3002 # \u63d2\u5165\u4e0d\u540c\u5c5e\u6027\u503c\u3001\u4e0d\u540c rank \u7684\u8fb9\u3002 nebula> insert edge serve(start_year,end_year) \\ values \"player100\"->\"team204\"@1:(1998, 2017); nebula> insert edge serve(start_year,end_year) \\ values \"player100\"->\"team204\"@2:(1990, 2018); # \u9ed8\u8ba4\u8fd4\u56de rank \u4e3a 0 \u7684\u8fb9\u3002 nebula> FETCH PROP ON serve \"player100\" -> \"team204\" YIELD edge AS e; +-----------------------------------------------------------------------+ | e | +-----------------------------------------------------------------------+ | [:serve \"player100\"->\"team204\" @0 {end_year: 2016, start_year: 1997}] | +-----------------------------------------------------------------------+ # \u8981\u83b7\u53d6 rank \u4e0d\u4e3a 0 \u7684\u8fb9\uff0c\u8bf7\u5728 FETCH \u8bed\u53e5\u4e2d\u8bbe\u7f6e rank\u3002 nebula> FETCH PROP ON serve \"player100\" -> \"team204\"@1 YIELD edge AS e; +-----------------------------------------------------------------------+ | e | +-----------------------------------------------------------------------+ | [:serve \"player100\"->\"team204\" @1 {end_year: 2017, start_year: 1998}] | +-----------------------------------------------------------------------+","title":"\u57fa\u4e8e rank \u83b7\u53d6\u5c5e\u6027\u503c"},{"location":"3.ngql-guide/7.general-query-statements/4.fetch/#fetch_1","text":"\u5c06 FETCH \u4e0e\u539f\u751f nGQL \u7ed3\u5408\u4f7f\u7528\u662f\u4e00\u79cd\u5e38\u89c1\u7684\u65b9\u5f0f\uff0c\u4f8b\u5982\u548c GO \u4e00\u8d77\u3002 # \u8fd4\u56de\u4ece\u70b9 player101 \u5f00\u59cb\u7684 follow \u8fb9\u7684 degree \u503c\u3002 nebula> GO FROM \"player101\" OVER follow \\ YIELD src(edge) AS s, dst(edge) AS d \\ | FETCH PROP ON follow $-.s -> $-.d \\ YIELD properties(edge).degree; +-------------------------+ | properties(EDGE).degree | +-------------------------+ | 95 | | 90 | | 95 | +-------------------------+ \u7528\u6237\u4e5f\u53ef\u4ee5\u901a\u8fc7\u81ea\u5b9a\u4e49\u53d8\u91cf\u6784\u5efa\u7c7b\u4f3c\u7684\u67e5\u8be2\u3002 nebula> $var = GO FROM \"player101\" OVER follow \\ YIELD src(edge) AS s, dst(edge) AS d; \\ FETCH PROP ON follow $var.s -> $var.d \\ YIELD properties(edge).degree; +-------------------------+ | properties(EDGE).degree | +-------------------------+ | 95 | | 90 | | 95 | +-------------------------+ \u66f4\u591a\u590d\u5408\u8bed\u53e5\u7684\u8be6\u60c5\uff0c\u8bf7\u53c2\u89c1 \u590d\u5408\u67e5\u8be2\uff08\u5b50\u53e5\u7ed3\u6784\uff09 \u3002","title":"\u590d\u5408\u8bed\u53e5\u4e2d\u4f7f\u7528 FETCH"},{"location":"3.ngql-guide/7.general-query-statements/5.lookup/","text":"LOOKUP \u00b6 LOOKUP \u6839\u636e\u7d22\u5f15\u904d\u5386\u6570\u636e\u3002\u7528\u6237\u53ef\u4ee5\u4f7f\u7528 LOOKUP \u5b9e\u73b0\u5982\u4e0b\u529f\u80fd\uff1a \u6839\u636e WHERE \u5b50\u53e5\u641c\u7d22\u7279\u5b9a\u6570\u636e\u3002 \u901a\u8fc7 Tag \u5217\u51fa\u70b9\uff1a\u68c0\u7d22\u6307\u5b9a Tag \u7684\u6240\u6709\u70b9 ID\u3002 \u901a\u8fc7 Edge type \u5217\u51fa\u8fb9\uff1a\u68c0\u7d22\u6307\u5b9a Edge type \u7684\u6240\u6709\u8fb9\u7684\u8d77\u59cb\u70b9\u3001\u76ee\u7684\u70b9\u548c rank\u3002 \u7edf\u8ba1\u5305\u542b\u6307\u5b9a Tag \u7684\u70b9\u6216\u5c5e\u4e8e\u6307\u5b9a Edge type \u7684\u8fb9\u7684\u6570\u91cf\u3002 OpenCypher \u517c\u5bb9\u6027 \u00b6 \u672c\u6587\u64cd\u4f5c\u4ec5\u9002\u7528\u4e8e\u539f\u751f nGQL\u3002 \u6ce8\u610f\u4e8b\u9879 \u00b6 \u7d22\u5f15\u4f1a\u5bfc\u81f4\u5199\u6027\u80fd\u5927\u5e45\u964d\u4f4e \u3002\u8bf7\u4e0d\u8981\u968f\u610f\u5728\u751f\u4ea7\u73af\u5883\u4e2d\u4f7f\u7528\u7d22\u5f15\uff0c\u9664\u975e\u5f88\u6e05\u695a\u4f7f\u7528\u7d22\u5f15\u5bf9\u4e1a\u52a1\u7684\u5f71\u54cd\u3002 \u901a\u8fc7 Explain \u547d\u4ee4\u67e5\u770b\u9009\u62e9\u7684\u7d22\u5f15\u3002 \u5386\u53f2\u7248\u672c\u517c\u5bb9\u6027 \u5728 2.5.0 \u7248\u672c\u4e4b\u524d\uff0c\u5982\u679c\u7528 LOOKUP \u8bed\u53e5\u57fa\u4e8e\u6307\u5b9a\u5c5e\u6027\u67e5\u8be2\u65f6\u8be5\u5c5e\u6027\u6ca1\u6709\u7d22\u5f15\uff0c\u7cfb\u7edf\u5c06\u62a5\u9519\uff0c\u800c\u4e0d\u4f1a\u4f7f\u7528\u5176\u5b83\u7d22\u5f15\u3002 \u524d\u63d0\u6761\u4ef6 \u00b6 \u8bf7\u786e\u4fdd LOOKUP \u8bed\u53e5\u6709\u81f3\u5c11\u4e00\u4e2a\u7d22\u5f15\u53ef\u7528\u3002 \u5982\u679c\u5df2\u7ecf\u5b58\u5728\u76f8\u5173\u7684\u70b9\u3001\u8fb9\u6216\u5c5e\u6027\uff0c\u5fc5\u987b\u5728\u65b0\u521b\u5efa\u7d22\u5f15\u540e \u91cd\u5efa\u7d22\u5f15 \uff0c\u624d\u80fd\u4f7f\u5176\u751f\u6548\u3002 \u8bed\u6cd5 \u00b6 LOOKUP ON {<vertex_tag> | <edge_type>} [WHERE <expression> [AND <expression> ...]] YIELD [DISTINCT] <return_list> [AS <alias>] [<clause>]; <return_list> <prop_name> [AS <col_alias>] [, <prop_name> [AS <prop_alias>] ...]; WHERE <expression> \uff1a\u6307\u5b9a\u904d\u5386\u7684\u8fc7\u6ee4\u6761\u4ef6\uff0c\u8fd8\u53ef\u4ee5\u7ed3\u5408\u5e03\u5c14\u8fd0\u7b97\u7b26 AND \u548c OR \u4e00\u8d77\u4f7f\u7528\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1 WHERE \u3002 YIELD \uff1a\u5b9a\u4e49\u9700\u8981\u8fd4\u56de\u7684\u8f93\u51fa\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1 YIELD \u3002 DISTINCT \uff1a\u805a\u5408\u8f93\u51fa\u7ed3\u679c\uff0c\u8fd4\u56de\u53bb\u91cd\u540e\u7684\u7ed3\u679c\u96c6\u3002 AS \uff1a\u8bbe\u7f6e\u522b\u540d\u3002 clause \uff1a\u652f\u6301 ORDER BY \u3001 LIMIT \u5b50\u53e5\u3002 WHERE \u8bed\u53e5\u9650\u5236 \u00b6 \u5728 LOOKUP \u8bed\u53e5\u4e2d\u4f7f\u7528 WHERE \u5b50\u53e5\uff0c\u4e0d\u652f\u6301\u5982\u4e0b\u64cd\u4f5c\uff1a $- \u548c $^ \u3002 \u5728\u5173\u7cfb\u8868\u8fbe\u5f0f\u4e2d\uff0c\u4e0d\u652f\u6301\u8fd0\u7b97\u7b26\u4e24\u8fb9\u90fd\u6709\u5b57\u6bb5\u540d\uff0c\u4f8b\u5982 tagName.prop1 > tagName.prop2 \u3002 \u4e0d\u652f\u6301\u8fd0\u7b97\u8868\u8fbe\u5f0f\u548c\u51fd\u6570\u8868\u8fbe\u5f0f\u4e2d\u5d4c\u5957 AliasProp \u8868\u8fbe\u5f0f\u3002 \u4e0d\u652f\u6301 XOR \u8fd0\u7b97\u7b26\u3002 \u4e0d\u652f\u6301\u9664 STARTS WITH \u4e4b\u5916\u7684\u5b57\u7b26\u4e32\u64cd\u4f5c\u3002 \u4e0d\u652f\u6301\u8fc7\u6ee4 rank() \u3002 \u4e0d\u652f\u6301\u56fe\u6a21\u5f0f. \u68c0\u7d22\u70b9 \u00b6 \u8fd4\u56de Tag \u4e3a player \u4e14 name \u4e3a Tony Parker \u7684\u70b9\u3002 nebula> CREATE TAG INDEX IF NOT EXISTS index_player ON player(name(30), age); nebula> REBUILD TAG INDEX index_player; +------------+ | New Job Id | +------------+ | 15 | +------------+ nebula> LOOKUP ON player \\ WHERE player.name == \"Tony Parker\" \\ YIELD id(vertex); +---------------+ | id(VERTEX) | +---------------+ | \"player101\" | +---------------+ nebula> LOOKUP ON player \\ WHERE player.name == \"Tony Parker\" \\ YIELD properties(vertex).name AS name, properties(vertex).age AS age; +---------------+-----+ | name | age | +---------------+-----+ | \"Tony Parker\" | 36 | +---------------+-----+ nebula> LOOKUP ON player \\ WHERE player.age > 45 \\ YIELD id(vertex); +-------------+ | id(VERTEX) | +-------------+ | \"player144\" | | \"player140\" | +-------------+ nebula> LOOKUP ON player \\ WHERE player.name STARTS WITH \"B\" \\ AND player.age IN [22,30] \\ YIELD properties(vertex).name, properties(vertex).age; +-------------------------+------------------------+ | properties(VERTEX).name | properties(VERTEX).age | +-------------------------+------------------------+ | \"Ben Simmons\" | 22 | | \"Blake Griffin\" | 30 | +-------------------------+------------------------+ nebula> LOOKUP ON player \\ WHERE player.name == \"Kobe Bryant\"\\ YIELD id(vertex) AS VertexID, properties(vertex).name AS name |\\ GO FROM $-.VertexID OVER serve \\ YIELD $-.name, properties(edge).start_year, properties(edge).end_year, properties($$).name; +---------------+-----------------------------+---------------------------+---------------------+ | $-.name | properties(EDGE).start_year | properties(EDGE).end_year | properties($$).name | +---------------+-----------------------------+---------------------------+---------------------+ | \"Kobe Bryant\" | 1996 | 2016 | \"Lakers\" | +---------------+-----------------------------+---------------------------+---------------------+ \u68c0\u7d22\u8fb9 \u00b6 \u8fd4\u56de Edge type \u4e3a follow \u4e14 degree \u4e3a 90 \u7684\u8fb9\u3002 nebula> CREATE EDGE INDEX IF NOT EXISTS index_follow ON follow(degree); nebula> REBUILD EDGE INDEX index_follow; +------------+ | New Job Id | +------------+ | 62 | +------------+ nebula> LOOKUP ON follow \\ WHERE follow.degree == 90 YIELD edge AS e; +----------------------------------------------------+ | e | +----------------------------------------------------+ | [:follow \"player109\"->\"player125\" @0 {degree: 90}] | | [:follow \"player118\"->\"player120\" @0 {degree: 90}] | | [:follow \"player118\"->\"player131\" @0 {degree: 90}] | ... nebula> LOOKUP ON follow \\ WHERE follow.degree == 90 \\ YIELD properties(edge).degree; +-------------------------+ | properties(EDGE).degree | +-------------------------+ | 90 | | 90 | ... nebula> LOOKUP ON follow \\ YIELD properties(edge).degree as degree \\ | ORDER BY $-.degree \\ | LIMIT 10; +--------+ | degree | +--------+ | -1 | | -1 | | 9 | | 10 | | 13 | | 50 | | 55 | | 60 | | 70 | | 70 | +--------+ nebula> LOOKUP ON follow \\ WHERE follow.degree == 60 \\ YIELD dst(edge) AS DstVID, properties(edge).degree AS Degree |\\ GO FROM $-.DstVID OVER serve \\ YIELD $-.DstVID, properties(edge).start_year, properties(edge).end_year, properties($$).name; +-------------+-----------------------------+---------------------------+---------------------+ | $-.DstVID | properties(EDGE).start_year | properties(EDGE).end_year | properties($$).name | +-------------+-----------------------------+---------------------------+---------------------+ | \"player105\" | 2010 | 2018 | \"Spurs\" | | \"player105\" | 2009 | 2010 | \"Cavaliers\" | | \"player105\" | 2018 | 2019 | \"Raptors\" | +-------------+-----------------------------+---------------------------+---------------------+ \u901a\u8fc7 Tag \u5217\u51fa\u6240\u6709\u7684\u5bf9\u5e94\u7684\u70b9/\u901a\u8fc7 Edge type \u5217\u51fa\u8fb9 \u00b6 \u5982\u679c\u9700\u8981\u901a\u8fc7 Tag \u5217\u51fa\u6240\u6709\u7684\u70b9\uff0c\u6216\u901a\u8fc7 Edge type \u5217\u51fa\u8fb9\uff0c\u5219 Tag\u3001Edge type \u6216\u5c5e\u6027\u4e0a\u5fc5\u987b\u6709\u81f3\u5c11\u4e00\u4e2a\u7d22\u5f15\u3002 \u4f8b\u5982\u4e00\u4e2a Tag player \u6709\u5c5e\u6027 name \u548c age \uff0c\u4e3a\u4e86\u904d\u5386\u6240\u6709\u5305\u542b Tag player \u7684\u70b9 ID\uff0cTag player \u3001\u5c5e\u6027 name \u6216\u5c5e\u6027 age \u4e2d\u5fc5\u987b\u6709\u4e00\u4e2a\u5df2\u7ecf\u521b\u5efa\u7d22\u5f15\u3002 \u67e5\u627e\u6240\u6709 Tag \u4e3a player \u7684\u70b9 VID\u3002 nebula> CREATE TAG IF NOT EXISTS player(name string,age int); nebula> CREATE TAG INDEX IF NOT EXISTS player_index on player(); nebula> REBUILD TAG INDEX player_index; +------------+ | New Job Id | +------------+ | 66 | +------------+ nebula> INSERT VERTEX player(name,age) \\ VALUES \"player100\":(\"Tim Duncan\", 42), \"player101\":(\"Tony Parker\", 36); # \u5217\u51fa\u6240\u6709\u7684 player\u3002\u7c7b\u4f3c\u4e8e MATCH (n:player) RETURN id(n) /*, n */\u3002 nebula> LOOKUP ON player YIELD id(vertex); +-------------+ | id(VERTEX) | +-------------+ | \"player100\" | | \"player101\" | ... # \u4ece\u7ed3\u679c\u4e2d\u8fd4\u56de\u6700\u524d\u9762\u7684 4 \u884c\u6570\u636e\u3002 nebula> LOOKUP ON player YIELD id(vertex) | LIMIT 4; +-------------+ | id(VERTEX) | +-------------+ | \"player105\" | | \"player109\" | | \"player111\" | | \"player118\" | +-------------+ \u67e5\u627e Edge type \u4e3a follow \u7684\u6240\u6709\u8fb9\u7684\u4fe1\u606f\u3002 nebula> CREATE EDGE IF NOT EXISTS follow(degree int); nebula> CREATE EDGE INDEX IF NOT EXISTS follow_index on follow(); nebula> REBUILD EDGE INDEX follow_index; +------------+ | New Job Id | +------------+ | 88 | +------------+ nebula> INSERT EDGE follow(degree) \\ VALUES \"player100\"->\"player101\":(95); # \u5217\u51fa\u6240\u6709\u7684 follow \u8fb9\u3002\u7c7b\u4f3c\u4e8e MATCH (s)-[e:follow]->(d) RETURN id(s), rank(e), id(d) /*, type(e) */\u3002 nebula)> LOOKUP ON follow YIELD edge AS e; +-----------------------------------------------------+ | e | +-----------------------------------------------------+ | [:follow \"player105\"->\"player100\" @0 {degree: 70}] | | [:follow \"player105\"->\"player116\" @0 {degree: 80}] | | [:follow \"player109\"->\"player100\" @0 {degree: 80}] | ... \u7edf\u8ba1\u70b9\u6216\u8fb9 \u00b6 \u7edf\u8ba1 Tag \u4e3a player \u7684\u70b9\u548c Edge type \u4e3a follow \u7684\u8fb9\u3002 nebula> LOOKUP ON player YIELD id(vertex)|\\ YIELD COUNT(*) AS Player_Number; +---------------+ | Player_Number | +---------------+ | 51 | +---------------+ nebula> LOOKUP ON follow YIELD edge AS e| \\ YIELD COUNT(*) AS Follow_Number; +---------------+ | Follow_Number | +---------------+ | 81 | +---------------+ Note \u4f7f\u7528 SHOW STATS \u547d\u4ee4 \u4e5f\u53ef\u4ee5\u7edf\u8ba1\u70b9\u548c\u8fb9\u3002","title":"LOOKUP"},{"location":"3.ngql-guide/7.general-query-statements/5.lookup/#lookup","text":"LOOKUP \u6839\u636e\u7d22\u5f15\u904d\u5386\u6570\u636e\u3002\u7528\u6237\u53ef\u4ee5\u4f7f\u7528 LOOKUP \u5b9e\u73b0\u5982\u4e0b\u529f\u80fd\uff1a \u6839\u636e WHERE \u5b50\u53e5\u641c\u7d22\u7279\u5b9a\u6570\u636e\u3002 \u901a\u8fc7 Tag \u5217\u51fa\u70b9\uff1a\u68c0\u7d22\u6307\u5b9a Tag \u7684\u6240\u6709\u70b9 ID\u3002 \u901a\u8fc7 Edge type \u5217\u51fa\u8fb9\uff1a\u68c0\u7d22\u6307\u5b9a Edge type \u7684\u6240\u6709\u8fb9\u7684\u8d77\u59cb\u70b9\u3001\u76ee\u7684\u70b9\u548c rank\u3002 \u7edf\u8ba1\u5305\u542b\u6307\u5b9a Tag \u7684\u70b9\u6216\u5c5e\u4e8e\u6307\u5b9a Edge type \u7684\u8fb9\u7684\u6570\u91cf\u3002","title":"LOOKUP"},{"location":"3.ngql-guide/7.general-query-statements/5.lookup/#opencypher","text":"\u672c\u6587\u64cd\u4f5c\u4ec5\u9002\u7528\u4e8e\u539f\u751f nGQL\u3002","title":"OpenCypher \u517c\u5bb9\u6027"},{"location":"3.ngql-guide/7.general-query-statements/5.lookup/#_1","text":"\u7d22\u5f15\u4f1a\u5bfc\u81f4\u5199\u6027\u80fd\u5927\u5e45\u964d\u4f4e \u3002\u8bf7\u4e0d\u8981\u968f\u610f\u5728\u751f\u4ea7\u73af\u5883\u4e2d\u4f7f\u7528\u7d22\u5f15\uff0c\u9664\u975e\u5f88\u6e05\u695a\u4f7f\u7528\u7d22\u5f15\u5bf9\u4e1a\u52a1\u7684\u5f71\u54cd\u3002 \u901a\u8fc7 Explain \u547d\u4ee4\u67e5\u770b\u9009\u62e9\u7684\u7d22\u5f15\u3002 \u5386\u53f2\u7248\u672c\u517c\u5bb9\u6027 \u5728 2.5.0 \u7248\u672c\u4e4b\u524d\uff0c\u5982\u679c\u7528 LOOKUP \u8bed\u53e5\u57fa\u4e8e\u6307\u5b9a\u5c5e\u6027\u67e5\u8be2\u65f6\u8be5\u5c5e\u6027\u6ca1\u6709\u7d22\u5f15\uff0c\u7cfb\u7edf\u5c06\u62a5\u9519\uff0c\u800c\u4e0d\u4f1a\u4f7f\u7528\u5176\u5b83\u7d22\u5f15\u3002","title":"\u6ce8\u610f\u4e8b\u9879"},{"location":"3.ngql-guide/7.general-query-statements/5.lookup/#_2","text":"\u8bf7\u786e\u4fdd LOOKUP \u8bed\u53e5\u6709\u81f3\u5c11\u4e00\u4e2a\u7d22\u5f15\u53ef\u7528\u3002 \u5982\u679c\u5df2\u7ecf\u5b58\u5728\u76f8\u5173\u7684\u70b9\u3001\u8fb9\u6216\u5c5e\u6027\uff0c\u5fc5\u987b\u5728\u65b0\u521b\u5efa\u7d22\u5f15\u540e \u91cd\u5efa\u7d22\u5f15 \uff0c\u624d\u80fd\u4f7f\u5176\u751f\u6548\u3002","title":"\u524d\u63d0\u6761\u4ef6"},{"location":"3.ngql-guide/7.general-query-statements/5.lookup/#_3","text":"LOOKUP ON {<vertex_tag> | <edge_type>} [WHERE <expression> [AND <expression> ...]] YIELD [DISTINCT] <return_list> [AS <alias>] [<clause>]; <return_list> <prop_name> [AS <col_alias>] [, <prop_name> [AS <prop_alias>] ...]; WHERE <expression> \uff1a\u6307\u5b9a\u904d\u5386\u7684\u8fc7\u6ee4\u6761\u4ef6\uff0c\u8fd8\u53ef\u4ee5\u7ed3\u5408\u5e03\u5c14\u8fd0\u7b97\u7b26 AND \u548c OR \u4e00\u8d77\u4f7f\u7528\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1 WHERE \u3002 YIELD \uff1a\u5b9a\u4e49\u9700\u8981\u8fd4\u56de\u7684\u8f93\u51fa\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1 YIELD \u3002 DISTINCT \uff1a\u805a\u5408\u8f93\u51fa\u7ed3\u679c\uff0c\u8fd4\u56de\u53bb\u91cd\u540e\u7684\u7ed3\u679c\u96c6\u3002 AS \uff1a\u8bbe\u7f6e\u522b\u540d\u3002 clause \uff1a\u652f\u6301 ORDER BY \u3001 LIMIT \u5b50\u53e5\u3002","title":"\u8bed\u6cd5"},{"location":"3.ngql-guide/7.general-query-statements/5.lookup/#where","text":"\u5728 LOOKUP \u8bed\u53e5\u4e2d\u4f7f\u7528 WHERE \u5b50\u53e5\uff0c\u4e0d\u652f\u6301\u5982\u4e0b\u64cd\u4f5c\uff1a $- \u548c $^ \u3002 \u5728\u5173\u7cfb\u8868\u8fbe\u5f0f\u4e2d\uff0c\u4e0d\u652f\u6301\u8fd0\u7b97\u7b26\u4e24\u8fb9\u90fd\u6709\u5b57\u6bb5\u540d\uff0c\u4f8b\u5982 tagName.prop1 > tagName.prop2 \u3002 \u4e0d\u652f\u6301\u8fd0\u7b97\u8868\u8fbe\u5f0f\u548c\u51fd\u6570\u8868\u8fbe\u5f0f\u4e2d\u5d4c\u5957 AliasProp \u8868\u8fbe\u5f0f\u3002 \u4e0d\u652f\u6301 XOR \u8fd0\u7b97\u7b26\u3002 \u4e0d\u652f\u6301\u9664 STARTS WITH \u4e4b\u5916\u7684\u5b57\u7b26\u4e32\u64cd\u4f5c\u3002 \u4e0d\u652f\u6301\u8fc7\u6ee4 rank() \u3002 \u4e0d\u652f\u6301\u56fe\u6a21\u5f0f.","title":"WHERE \u8bed\u53e5\u9650\u5236"},{"location":"3.ngql-guide/7.general-query-statements/5.lookup/#_4","text":"\u8fd4\u56de Tag \u4e3a player \u4e14 name \u4e3a Tony Parker \u7684\u70b9\u3002 nebula> CREATE TAG INDEX IF NOT EXISTS index_player ON player(name(30), age); nebula> REBUILD TAG INDEX index_player; +------------+ | New Job Id | +------------+ | 15 | +------------+ nebula> LOOKUP ON player \\ WHERE player.name == \"Tony Parker\" \\ YIELD id(vertex); +---------------+ | id(VERTEX) | +---------------+ | \"player101\" | +---------------+ nebula> LOOKUP ON player \\ WHERE player.name == \"Tony Parker\" \\ YIELD properties(vertex).name AS name, properties(vertex).age AS age; +---------------+-----+ | name | age | +---------------+-----+ | \"Tony Parker\" | 36 | +---------------+-----+ nebula> LOOKUP ON player \\ WHERE player.age > 45 \\ YIELD id(vertex); +-------------+ | id(VERTEX) | +-------------+ | \"player144\" | | \"player140\" | +-------------+ nebula> LOOKUP ON player \\ WHERE player.name STARTS WITH \"B\" \\ AND player.age IN [22,30] \\ YIELD properties(vertex).name, properties(vertex).age; +-------------------------+------------------------+ | properties(VERTEX).name | properties(VERTEX).age | +-------------------------+------------------------+ | \"Ben Simmons\" | 22 | | \"Blake Griffin\" | 30 | +-------------------------+------------------------+ nebula> LOOKUP ON player \\ WHERE player.name == \"Kobe Bryant\"\\ YIELD id(vertex) AS VertexID, properties(vertex).name AS name |\\ GO FROM $-.VertexID OVER serve \\ YIELD $-.name, properties(edge).start_year, properties(edge).end_year, properties($$).name; +---------------+-----------------------------+---------------------------+---------------------+ | $-.name | properties(EDGE).start_year | properties(EDGE).end_year | properties($$).name | +---------------+-----------------------------+---------------------------+---------------------+ | \"Kobe Bryant\" | 1996 | 2016 | \"Lakers\" | +---------------+-----------------------------+---------------------------+---------------------+","title":"\u68c0\u7d22\u70b9"},{"location":"3.ngql-guide/7.general-query-statements/5.lookup/#_5","text":"\u8fd4\u56de Edge type \u4e3a follow \u4e14 degree \u4e3a 90 \u7684\u8fb9\u3002 nebula> CREATE EDGE INDEX IF NOT EXISTS index_follow ON follow(degree); nebula> REBUILD EDGE INDEX index_follow; +------------+ | New Job Id | +------------+ | 62 | +------------+ nebula> LOOKUP ON follow \\ WHERE follow.degree == 90 YIELD edge AS e; +----------------------------------------------------+ | e | +----------------------------------------------------+ | [:follow \"player109\"->\"player125\" @0 {degree: 90}] | | [:follow \"player118\"->\"player120\" @0 {degree: 90}] | | [:follow \"player118\"->\"player131\" @0 {degree: 90}] | ... nebula> LOOKUP ON follow \\ WHERE follow.degree == 90 \\ YIELD properties(edge).degree; +-------------------------+ | properties(EDGE).degree | +-------------------------+ | 90 | | 90 | ... nebula> LOOKUP ON follow \\ YIELD properties(edge).degree as degree \\ | ORDER BY $-.degree \\ | LIMIT 10; +--------+ | degree | +--------+ | -1 | | -1 | | 9 | | 10 | | 13 | | 50 | | 55 | | 60 | | 70 | | 70 | +--------+ nebula> LOOKUP ON follow \\ WHERE follow.degree == 60 \\ YIELD dst(edge) AS DstVID, properties(edge).degree AS Degree |\\ GO FROM $-.DstVID OVER serve \\ YIELD $-.DstVID, properties(edge).start_year, properties(edge).end_year, properties($$).name; +-------------+-----------------------------+---------------------------+---------------------+ | $-.DstVID | properties(EDGE).start_year | properties(EDGE).end_year | properties($$).name | +-------------+-----------------------------+---------------------------+---------------------+ | \"player105\" | 2010 | 2018 | \"Spurs\" | | \"player105\" | 2009 | 2010 | \"Cavaliers\" | | \"player105\" | 2018 | 2019 | \"Raptors\" | +-------------+-----------------------------+---------------------------+---------------------+","title":"\u68c0\u7d22\u8fb9"},{"location":"3.ngql-guide/7.general-query-statements/5.lookup/#tag_edge_type","text":"\u5982\u679c\u9700\u8981\u901a\u8fc7 Tag \u5217\u51fa\u6240\u6709\u7684\u70b9\uff0c\u6216\u901a\u8fc7 Edge type \u5217\u51fa\u8fb9\uff0c\u5219 Tag\u3001Edge type \u6216\u5c5e\u6027\u4e0a\u5fc5\u987b\u6709\u81f3\u5c11\u4e00\u4e2a\u7d22\u5f15\u3002 \u4f8b\u5982\u4e00\u4e2a Tag player \u6709\u5c5e\u6027 name \u548c age \uff0c\u4e3a\u4e86\u904d\u5386\u6240\u6709\u5305\u542b Tag player \u7684\u70b9 ID\uff0cTag player \u3001\u5c5e\u6027 name \u6216\u5c5e\u6027 age \u4e2d\u5fc5\u987b\u6709\u4e00\u4e2a\u5df2\u7ecf\u521b\u5efa\u7d22\u5f15\u3002 \u67e5\u627e\u6240\u6709 Tag \u4e3a player \u7684\u70b9 VID\u3002 nebula> CREATE TAG IF NOT EXISTS player(name string,age int); nebula> CREATE TAG INDEX IF NOT EXISTS player_index on player(); nebula> REBUILD TAG INDEX player_index; +------------+ | New Job Id | +------------+ | 66 | +------------+ nebula> INSERT VERTEX player(name,age) \\ VALUES \"player100\":(\"Tim Duncan\", 42), \"player101\":(\"Tony Parker\", 36); # \u5217\u51fa\u6240\u6709\u7684 player\u3002\u7c7b\u4f3c\u4e8e MATCH (n:player) RETURN id(n) /*, n */\u3002 nebula> LOOKUP ON player YIELD id(vertex); +-------------+ | id(VERTEX) | +-------------+ | \"player100\" | | \"player101\" | ... # \u4ece\u7ed3\u679c\u4e2d\u8fd4\u56de\u6700\u524d\u9762\u7684 4 \u884c\u6570\u636e\u3002 nebula> LOOKUP ON player YIELD id(vertex) | LIMIT 4; +-------------+ | id(VERTEX) | +-------------+ | \"player105\" | | \"player109\" | | \"player111\" | | \"player118\" | +-------------+ \u67e5\u627e Edge type \u4e3a follow \u7684\u6240\u6709\u8fb9\u7684\u4fe1\u606f\u3002 nebula> CREATE EDGE IF NOT EXISTS follow(degree int); nebula> CREATE EDGE INDEX IF NOT EXISTS follow_index on follow(); nebula> REBUILD EDGE INDEX follow_index; +------------+ | New Job Id | +------------+ | 88 | +------------+ nebula> INSERT EDGE follow(degree) \\ VALUES \"player100\"->\"player101\":(95); # \u5217\u51fa\u6240\u6709\u7684 follow \u8fb9\u3002\u7c7b\u4f3c\u4e8e MATCH (s)-[e:follow]->(d) RETURN id(s), rank(e), id(d) /*, type(e) */\u3002 nebula)> LOOKUP ON follow YIELD edge AS e; +-----------------------------------------------------+ | e | +-----------------------------------------------------+ | [:follow \"player105\"->\"player100\" @0 {degree: 70}] | | [:follow \"player105\"->\"player116\" @0 {degree: 80}] | | [:follow \"player109\"->\"player100\" @0 {degree: 80}] | ...","title":"\u901a\u8fc7 Tag \u5217\u51fa\u6240\u6709\u7684\u5bf9\u5e94\u7684\u70b9/\u901a\u8fc7 Edge type \u5217\u51fa\u8fb9"},{"location":"3.ngql-guide/7.general-query-statements/5.lookup/#_6","text":"\u7edf\u8ba1 Tag \u4e3a player \u7684\u70b9\u548c Edge type \u4e3a follow \u7684\u8fb9\u3002 nebula> LOOKUP ON player YIELD id(vertex)|\\ YIELD COUNT(*) AS Player_Number; +---------------+ | Player_Number | +---------------+ | 51 | +---------------+ nebula> LOOKUP ON follow YIELD edge AS e| \\ YIELD COUNT(*) AS Follow_Number; +---------------+ | Follow_Number | +---------------+ | 81 | +---------------+ Note \u4f7f\u7528 SHOW STATS \u547d\u4ee4 \u4e5f\u53ef\u4ee5\u7edf\u8ba1\u70b9\u548c\u8fb9\u3002","title":"\u7edf\u8ba1\u70b9\u6216\u8fb9"},{"location":"3.ngql-guide/7.general-query-statements/optional-match/","text":"OPTIONAL MATCH \u00b6 Caution \u76ee\u524d OPTIONAL MATCH \u4e3a Beta \u529f\u80fd\uff0c\u540e\u7eed\u53ef\u80fd\u4f1a\u6709\u4e00\u5b9a\u4f18\u5316\u8c03\u6574\u3002 OPTIONAL MATCH \u901a\u5e38\u4e0e MATCH \u8bed\u53e5\u4e00\u8d77\u4f7f\u7528\uff0c\u4f5c\u4e3a MATCH \u8bed\u53e5\u7684\u53ef\u9009\u9879\u53bb\u5339\u914d\u547d\u4e2d\u7684\u6a21\u5f0f\uff0c\u5982\u679c\u6ca1\u6709\u547d\u4e2d\u5bf9\u5e94\u7684\u6a21\u5f0f\uff0c\u5bf9\u5e94\u7684\u5217\u8fd4\u56de NULL \u3002 openCypher \u517c\u5bb9\u6027 \u00b6 \u672c\u6587\u64cd\u4f5c\u4ec5\u9002\u7528\u4e8e nGQL \u4e2d\u7684 openCypher \u65b9\u5f0f\u3002 \u4f7f\u7528\u9650\u5236 \u00b6 OPTIONAL MATCH \u5b50\u53e5\u4e2d\u6682\u4e0d\u652f\u6301\u4f7f\u7528 WHERE \u5b50\u53e5\u3002 \u793a\u4f8b \u00b6 MATCH \u8bed\u53e5\u4e2d\u4f7f\u7528 OPTIONAL MATCH \u7684\u793a\u4f8b\u5982\u4e0b\uff1a nebula> MATCH (m)-[]->(n) WHERE id(m)==\"player100\" \\ OPTIONAL MATCH (n)-[]->(l) \\ RETURN id(m),id(n),id(l); +-------------+-------------+-------------+ | id(m) | id(n) | id(l) | +-------------+-------------+-------------+ | \"player100\" | \"team204\" | __NULL__ | | \"player100\" | \"player101\" | \"team204\" | | \"player100\" | \"player101\" | \"team215\" | | \"player100\" | \"player101\" | \"player100\" | | \"player100\" | \"player101\" | \"player102\" | | \"player100\" | \"player101\" | \"player125\" | | \"player100\" | \"player125\" | \"team204\" | | \"player100\" | \"player125\" | \"player100\" | +-------------+-------------+-------------+ \u800c\u4f7f\u7528\u591a MATCH \uff0c\u4e0d\u4f7f\u7528 OPTIONAL MATCH \u65f6\uff0c\u4f1a\u8fd4\u56de\u6a21\u5f0f\u5b8c\u5168\u5339\u914d\u7684\u884c\u3002\u793a\u4f8b\u5982\u4e0b\uff1a nebula> MATCH (m)-[]->(n) WHERE id(m)==\"player100\" \\ MATCH (n)-[]->(l) \\ RETURN id(m),id(n),id(l); +-------------+-------------+-------------+ | id(m) | id(n) | id(l) | +-------------+-------------+-------------+ | \"player100\" | \"player101\" | \"team204\" | | \"player100\" | \"player101\" | \"team215\" | | \"player100\" | \"player101\" | \"player100\" | | \"player100\" | \"player101\" | \"player102\" | | \"player100\" | \"player101\" | \"player125\" | | \"player100\" | \"player125\" | \"team204\" | | \"player100\" | \"player125\" | \"player100\" | +-------------+-------------+-------------+","title":"OPTIONAL MATCH"},{"location":"3.ngql-guide/7.general-query-statements/optional-match/#optional_match","text":"Caution \u76ee\u524d OPTIONAL MATCH \u4e3a Beta \u529f\u80fd\uff0c\u540e\u7eed\u53ef\u80fd\u4f1a\u6709\u4e00\u5b9a\u4f18\u5316\u8c03\u6574\u3002 OPTIONAL MATCH \u901a\u5e38\u4e0e MATCH \u8bed\u53e5\u4e00\u8d77\u4f7f\u7528\uff0c\u4f5c\u4e3a MATCH \u8bed\u53e5\u7684\u53ef\u9009\u9879\u53bb\u5339\u914d\u547d\u4e2d\u7684\u6a21\u5f0f\uff0c\u5982\u679c\u6ca1\u6709\u547d\u4e2d\u5bf9\u5e94\u7684\u6a21\u5f0f\uff0c\u5bf9\u5e94\u7684\u5217\u8fd4\u56de NULL \u3002","title":"OPTIONAL MATCH"},{"location":"3.ngql-guide/7.general-query-statements/optional-match/#opencypher","text":"\u672c\u6587\u64cd\u4f5c\u4ec5\u9002\u7528\u4e8e nGQL \u4e2d\u7684 openCypher \u65b9\u5f0f\u3002","title":"openCypher \u517c\u5bb9\u6027"},{"location":"3.ngql-guide/7.general-query-statements/optional-match/#_1","text":"OPTIONAL MATCH \u5b50\u53e5\u4e2d\u6682\u4e0d\u652f\u6301\u4f7f\u7528 WHERE \u5b50\u53e5\u3002","title":"\u4f7f\u7528\u9650\u5236"},{"location":"3.ngql-guide/7.general-query-statements/optional-match/#_2","text":"MATCH \u8bed\u53e5\u4e2d\u4f7f\u7528 OPTIONAL MATCH \u7684\u793a\u4f8b\u5982\u4e0b\uff1a nebula> MATCH (m)-[]->(n) WHERE id(m)==\"player100\" \\ OPTIONAL MATCH (n)-[]->(l) \\ RETURN id(m),id(n),id(l); +-------------+-------------+-------------+ | id(m) | id(n) | id(l) | +-------------+-------------+-------------+ | \"player100\" | \"team204\" | __NULL__ | | \"player100\" | \"player101\" | \"team204\" | | \"player100\" | \"player101\" | \"team215\" | | \"player100\" | \"player101\" | \"player100\" | | \"player100\" | \"player101\" | \"player102\" | | \"player100\" | \"player101\" | \"player125\" | | \"player100\" | \"player125\" | \"team204\" | | \"player100\" | \"player125\" | \"player100\" | +-------------+-------------+-------------+ \u800c\u4f7f\u7528\u591a MATCH \uff0c\u4e0d\u4f7f\u7528 OPTIONAL MATCH \u65f6\uff0c\u4f1a\u8fd4\u56de\u6a21\u5f0f\u5b8c\u5168\u5339\u914d\u7684\u884c\u3002\u793a\u4f8b\u5982\u4e0b\uff1a nebula> MATCH (m)-[]->(n) WHERE id(m)==\"player100\" \\ MATCH (n)-[]->(l) \\ RETURN id(m),id(n),id(l); +-------------+-------------+-------------+ | id(m) | id(n) | id(l) | +-------------+-------------+-------------+ | \"player100\" | \"player101\" | \"team204\" | | \"player100\" | \"player101\" | \"team215\" | | \"player100\" | \"player101\" | \"player100\" | | \"player100\" | \"player101\" | \"player102\" | | \"player100\" | \"player101\" | \"player125\" | | \"player100\" | \"player125\" | \"team204\" | | \"player100\" | \"player125\" | \"player100\" | +-------------+-------------+-------------+","title":"\u793a\u4f8b"},{"location":"3.ngql-guide/7.general-query-statements/6.show/1.show-charset/","text":"SHOW CHARSET \u00b6 SHOW CHARSET \u8bed\u53e5\u663e\u793a\u5f53\u524d\u7684\u5b57\u7b26\u96c6\u3002 \u76ee\u524d\u53ef\u7528\u7684\u5b57\u7b26\u96c6\u4e3a utf8 \u548c utf8mb4 \u3002\u9ed8\u8ba4\u5b57\u7b26\u96c6\u4e3a utf8 \u3002NebulaGraph \u6269\u5c55 uft8 \u652f\u6301\u56db\u5b57\u8282\u5b57\u7b26\uff0c\u56e0\u6b64 utf8 \u548c utf8mb4 \u662f\u7b49\u4ef7\u7684\u3002 \u8bed\u6cd5 \u00b6 SHOW CHARSET; \u793a\u4f8b \u00b6 nebula> SHOW CHARSET; +---------+-----------------+-------------------+--------+ | Charset | Description | Default collation | Maxlen | +---------+-----------------+-------------------+--------+ | \"utf8\" | \"UTF-8 Unicode\" | \"utf8_bin\" | 4 | +---------+-----------------+-------------------+--------+ \u53c2\u6570 \u8bf4\u660e Charset \u5b57\u7b26\u96c6\u540d\u79f0\u3002 Description \u5b57\u7b26\u96c6\u8bf4\u660e\u3002 Default collation \u9ed8\u8ba4\u6392\u5e8f\u89c4\u5219\u3002 Maxlen \u5b58\u50a8\u4e00\u4e2a\u5b57\u7b26\u6240\u9700\u7684\u6700\u5927\u5b57\u8282\u6570\u3002","title":"SHOW CHARSET"},{"location":"3.ngql-guide/7.general-query-statements/6.show/1.show-charset/#show_charset","text":"SHOW CHARSET \u8bed\u53e5\u663e\u793a\u5f53\u524d\u7684\u5b57\u7b26\u96c6\u3002 \u76ee\u524d\u53ef\u7528\u7684\u5b57\u7b26\u96c6\u4e3a utf8 \u548c utf8mb4 \u3002\u9ed8\u8ba4\u5b57\u7b26\u96c6\u4e3a utf8 \u3002NebulaGraph \u6269\u5c55 uft8 \u652f\u6301\u56db\u5b57\u8282\u5b57\u7b26\uff0c\u56e0\u6b64 utf8 \u548c utf8mb4 \u662f\u7b49\u4ef7\u7684\u3002","title":"SHOW CHARSET"},{"location":"3.ngql-guide/7.general-query-statements/6.show/1.show-charset/#_1","text":"SHOW CHARSET;","title":"\u8bed\u6cd5"},{"location":"3.ngql-guide/7.general-query-statements/6.show/1.show-charset/#_2","text":"nebula> SHOW CHARSET; +---------+-----------------+-------------------+--------+ | Charset | Description | Default collation | Maxlen | +---------+-----------------+-------------------+--------+ | \"utf8\" | \"UTF-8 Unicode\" | \"utf8_bin\" | 4 | +---------+-----------------+-------------------+--------+ \u53c2\u6570 \u8bf4\u660e Charset \u5b57\u7b26\u96c6\u540d\u79f0\u3002 Description \u5b57\u7b26\u96c6\u8bf4\u660e\u3002 Default collation \u9ed8\u8ba4\u6392\u5e8f\u89c4\u5219\u3002 Maxlen \u5b58\u50a8\u4e00\u4e2a\u5b57\u7b26\u6240\u9700\u7684\u6700\u5927\u5b57\u8282\u6570\u3002","title":"\u793a\u4f8b"},{"location":"3.ngql-guide/7.general-query-statements/6.show/10.show-roles/","text":"SHOW ROLES \u00b6 SHOW ROLES \u8bed\u53e5\u663e\u793a\u5206\u914d\u7ed9\u7528\u6237\u7684\u89d2\u8272\u4fe1\u606f\u3002 \u6839\u636e\u767b\u5f55\u7684\u7528\u6237\u89d2\u8272\uff0c\u8fd4\u56de\u7684\u7ed3\u679c\u4e5f\u6709\u6240\u4e0d\u540c\uff1a \u5982\u679c\u767b\u5f55\u7684\u7528\u6237\u89d2\u8272\u662f GOD \uff0c\u6216\u8005\u6709\u6743\u8bbf\u95ee\u8be5\u56fe\u7a7a\u95f4\u7684 ADMIN \uff0c\u5219\u8fd4\u56de\u8be5\u56fe\u7a7a\u95f4\u5185\u9664 GOD \u4e4b\u5916\u7684\u6240\u6709\u7528\u6237\u89d2\u8272\u4fe1\u606f\u3002 \u5982\u679c\u767b\u5f55\u7684\u7528\u6237\u89d2\u8272\u662f\u6709\u6743\u8bbf\u95ee\u8be5\u56fe\u7a7a\u95f4 DBA \u3001 USER \u6216 GUEST \uff0c\u5219\u8fd4\u56de\u81ea\u8eab\u7684\u89d2\u8272\u4fe1\u606f\u3002 \u5982\u679c\u767b\u5f55\u7684\u7528\u6237\u89d2\u8272\u6ca1\u6709\u6743\u9650\u8bbf\u95ee\u8be5\u56fe\u7a7a\u95f4\uff0c\u5219\u8fd4\u56de\u6743\u9650\u9519\u8bef\u3002 \u5173\u4e8e\u89d2\u8272\u7684\u8be6\u60c5\u8bf7\u53c2\u89c1 \u5185\u7f6e\u89d2\u8272\u6743\u9650 \u3002 \u8bed\u6cd5 \u00b6 SHOW ROLES IN <space_name>; \u793a\u4f8b \u00b6 nebula> SHOW ROLES in basketballplayer; +---------+-----------+ | Account | Role Type | +---------+-----------+ | \"user1\" | \"ADMIN\" | +---------+-----------+","title":"SHOW ROLES"},{"location":"3.ngql-guide/7.general-query-statements/6.show/10.show-roles/#show_roles","text":"SHOW ROLES \u8bed\u53e5\u663e\u793a\u5206\u914d\u7ed9\u7528\u6237\u7684\u89d2\u8272\u4fe1\u606f\u3002 \u6839\u636e\u767b\u5f55\u7684\u7528\u6237\u89d2\u8272\uff0c\u8fd4\u56de\u7684\u7ed3\u679c\u4e5f\u6709\u6240\u4e0d\u540c\uff1a \u5982\u679c\u767b\u5f55\u7684\u7528\u6237\u89d2\u8272\u662f GOD \uff0c\u6216\u8005\u6709\u6743\u8bbf\u95ee\u8be5\u56fe\u7a7a\u95f4\u7684 ADMIN \uff0c\u5219\u8fd4\u56de\u8be5\u56fe\u7a7a\u95f4\u5185\u9664 GOD \u4e4b\u5916\u7684\u6240\u6709\u7528\u6237\u89d2\u8272\u4fe1\u606f\u3002 \u5982\u679c\u767b\u5f55\u7684\u7528\u6237\u89d2\u8272\u662f\u6709\u6743\u8bbf\u95ee\u8be5\u56fe\u7a7a\u95f4 DBA \u3001 USER \u6216 GUEST \uff0c\u5219\u8fd4\u56de\u81ea\u8eab\u7684\u89d2\u8272\u4fe1\u606f\u3002 \u5982\u679c\u767b\u5f55\u7684\u7528\u6237\u89d2\u8272\u6ca1\u6709\u6743\u9650\u8bbf\u95ee\u8be5\u56fe\u7a7a\u95f4\uff0c\u5219\u8fd4\u56de\u6743\u9650\u9519\u8bef\u3002 \u5173\u4e8e\u89d2\u8272\u7684\u8be6\u60c5\u8bf7\u53c2\u89c1 \u5185\u7f6e\u89d2\u8272\u6743\u9650 \u3002","title":"SHOW ROLES"},{"location":"3.ngql-guide/7.general-query-statements/6.show/10.show-roles/#_1","text":"SHOW ROLES IN <space_name>;","title":"\u8bed\u6cd5"},{"location":"3.ngql-guide/7.general-query-statements/6.show/10.show-roles/#_2","text":"nebula> SHOW ROLES in basketballplayer; +---------+-----------+ | Account | Role Type | +---------+-----------+ | \"user1\" | \"ADMIN\" | +---------+-----------+","title":"\u793a\u4f8b"},{"location":"3.ngql-guide/7.general-query-statements/6.show/11.show-snapshots/","text":"SHOW SNAPSHOTS \u00b6 SHOW SNAPSHOTS \u8bed\u53e5\u663e\u793a\u6240\u6709\u5feb\u7167\u4fe1\u606f\u3002 \u5feb\u7167\u7684\u4f7f\u7528\u65b9\u5f0f\u8bf7\u53c2\u89c1 \u7ba1\u7406\u5feb\u7167 \u3002 \u89d2\u8272\u8981\u6c42 \u00b6 \u53ea\u6709 GOD \u89d2\u8272\u7684\u7528\u6237\uff08\u5373 root \uff09\u624d\u80fd\u6267\u884c SHOW SNAPSHOTS \u8bed\u53e5\u3002 \u8bed\u6cd5 \u00b6 SHOW SNAPSHOTS; \u793a\u4f8b \u00b6 nebula> SHOW SNAPSHOTS; +--------------------------------+---------+-----------------------------------------------------+ | Name | Status | Hosts | +--------------------------------+---------+-----------------------------------------------------+ | \"SNAPSHOT_2020_12_16_11_13_55\" | \"VALID\" | \"storaged0:9779, storaged1:9779, storaged2:9779\" | | \"SNAPSHOT_2020_12_16_11_14_10\" | \"VALID\" | \"storaged0:9779, storaged1:9779, storaged2:9779\" | +--------------------------------+---------+-----------------------------------------------------+","title":"SHOW SNAPSHOTS"},{"location":"3.ngql-guide/7.general-query-statements/6.show/11.show-snapshots/#show_snapshots","text":"SHOW SNAPSHOTS \u8bed\u53e5\u663e\u793a\u6240\u6709\u5feb\u7167\u4fe1\u606f\u3002 \u5feb\u7167\u7684\u4f7f\u7528\u65b9\u5f0f\u8bf7\u53c2\u89c1 \u7ba1\u7406\u5feb\u7167 \u3002","title":"SHOW SNAPSHOTS"},{"location":"3.ngql-guide/7.general-query-statements/6.show/11.show-snapshots/#_1","text":"\u53ea\u6709 GOD \u89d2\u8272\u7684\u7528\u6237\uff08\u5373 root \uff09\u624d\u80fd\u6267\u884c SHOW SNAPSHOTS \u8bed\u53e5\u3002","title":"\u89d2\u8272\u8981\u6c42"},{"location":"3.ngql-guide/7.general-query-statements/6.show/11.show-snapshots/#_2","text":"SHOW SNAPSHOTS;","title":"\u8bed\u6cd5"},{"location":"3.ngql-guide/7.general-query-statements/6.show/11.show-snapshots/#_3","text":"nebula> SHOW SNAPSHOTS; +--------------------------------+---------+-----------------------------------------------------+ | Name | Status | Hosts | +--------------------------------+---------+-----------------------------------------------------+ | \"SNAPSHOT_2020_12_16_11_13_55\" | \"VALID\" | \"storaged0:9779, storaged1:9779, storaged2:9779\" | | \"SNAPSHOT_2020_12_16_11_14_10\" | \"VALID\" | \"storaged0:9779, storaged1:9779, storaged2:9779\" | +--------------------------------+---------+-----------------------------------------------------+","title":"\u793a\u4f8b"},{"location":"3.ngql-guide/7.general-query-statements/6.show/12.show-spaces/","text":"SHOW SPACES \u00b6 SHOW SPACES \u8bed\u53e5\u663e\u793a\u73b0\u5b58\u7684\u56fe\u7a7a\u95f4\u3002 \u5982\u4f55\u521b\u5efa\u56fe\u7a7a\u95f4\uff0c\u8bf7\u53c2\u89c1 CREATE SPACE \u3002 \u8bed\u6cd5 \u00b6 SHOW SPACES; \u793a\u4f8b \u00b6 nebula> SHOW SPACES; +---------------------+ | Name | +---------------------+ | \"docs\" | | \"basketballplayer\" | +---------------------+","title":"SHOW SPACES"},{"location":"3.ngql-guide/7.general-query-statements/6.show/12.show-spaces/#show_spaces","text":"SHOW SPACES \u8bed\u53e5\u663e\u793a\u73b0\u5b58\u7684\u56fe\u7a7a\u95f4\u3002 \u5982\u4f55\u521b\u5efa\u56fe\u7a7a\u95f4\uff0c\u8bf7\u53c2\u89c1 CREATE SPACE \u3002","title":"SHOW SPACES"},{"location":"3.ngql-guide/7.general-query-statements/6.show/12.show-spaces/#_1","text":"SHOW SPACES;","title":"\u8bed\u6cd5"},{"location":"3.ngql-guide/7.general-query-statements/6.show/12.show-spaces/#_2","text":"nebula> SHOW SPACES; +---------------------+ | Name | +---------------------+ | \"docs\" | | \"basketballplayer\" | +---------------------+","title":"\u793a\u4f8b"},{"location":"3.ngql-guide/7.general-query-statements/6.show/14.show-stats/","text":"SHOW STATS \u00b6 SHOW STATS \u8bed\u53e5\u663e\u793a\u6700\u8fd1\u4e00\u6b21 SUBMIT JOB STATS \u4f5c\u4e1a\u6536\u96c6\u7684\u56fe\u7a7a\u95f4\u7edf\u8ba1\u4fe1\u606f\u3002 \u56fe\u7a7a\u95f4\u7edf\u8ba1\u4fe1\u606f\u5305\u542b\uff1a \u70b9\u7684\u603b\u6570 \u8fb9\u7684\u603b\u6570 \u6bcf\u4e2a Tag \u5173\u8054\u7684\u70b9\u7684\u603b\u6570 \u6bcf\u4e2a Edge type \u5173\u8054\u7684\u8fb9\u7684\u603b\u6570 Warning SHOW STATS \u8fd4\u56de\u7684\u4e0d\u662f\u5b9e\u65f6\u6570\u636e\u3002\u56e0\u4e3a\u8fd4\u56de\u7684\u6570\u636e\u662f\u6700\u8fd1\u4e00\u6b21 SUBMIT JOB STATS \u4f5c\u4e1a\u6536\u96c6\u7684\u6570\u636e\u3002\u8fd4\u56de\u7684\u6570\u636e\u53ef\u80fd\u5305\u542b TTL \u8fc7\u671f\u6570\u636e\uff0c\u8be5\u8fc7\u671f\u6570\u636e\u4f1a\u5728\u4e0b\u6b21\u6267\u884c Compaction \u64cd\u4f5c \u65f6\u88ab\u5220\u9664\u5e76\u4e0d\u7eb3\u5165\u7edf\u8ba1\u3002 \u524d\u63d0\u6761\u4ef6 \u00b6 \u5728\u9700\u8981\u67e5\u770b\u7edf\u8ba1\u4fe1\u606f\u7684\u56fe\u7a7a\u95f4\u4e2d\u6267\u884c SUBMIT JOB STATS \u3002\u8be6\u60c5\u8bf7\u53c2\u89c1 SUBMIT JOB STATS \u3002 Caution SHOW STATS \u7684\u7ed3\u679c\u53d6\u51b3\u4e8e\u6700\u540e\u4e00\u6b21\u6267\u884c\u7684 SUBMIT JOB STATS \u3002\u5982\u679c\u53d1\u751f\u8fc7\u65b0\u7684\u5199\u5165\u6216\u8005\u66f4\u6539\uff0c\u5fc5\u987b\u518d\u6b21\u6267\u884c SUBMIT JOB STATS \uff0c\u5426\u5219\u7edf\u8ba1\u6570\u636e\u6709\u9519\u8bef\u3002 \u8bed\u6cd5 \u00b6 SHOW STATS; \u793a\u4f8b \u00b6 # \u9009\u62e9\u56fe\u7a7a\u95f4\u3002 nebula> USE basketballplayer; # \u6267\u884c SUBMIT JOB STATS\u3002 nebula> SUBMIT JOB STATS; +------------+ | New Job Id | +------------+ | 98 | +------------+ # \u786e\u8ba4\u4f5c\u4e1a\u6267\u884c\u6210\u529f\u3002 nebula> SHOW JOB 98; +----------------+---------------+------------+----------------------------+----------------------------+-------------+ | Job Id(TaskId) | Command(Dest) | Status | Start Time | Stop Time | Error Code | +----------------+---------------+------------+----------------------------+----------------------------+-------------+ | 98 | \"STATS\" | \"FINISHED\" | 2021-11-01T09:33:21.000000 | 2021-11-01T09:33:21.000000 | \"SUCCEEDED\" | | 0 | \"storaged2\" | \"FINISHED\" | 2021-11-01T09:33:21.000000 | 2021-11-01T09:33:21.000000 | \"SUCCEEDED\" | | 1 | \"storaged0\" | \"FINISHED\" | 2021-11-01T09:33:21.000000 | 2021-11-01T09:33:21.000000 | \"SUCCEEDED\" | | 2 | \"storaged1\" | \"FINISHED\" | 2021-11-01T09:33:21.000000 | 2021-11-01T09:33:21.000000 | \"SUCCEEDED\" | | \"Total:3\" | \"Succeeded:3\" | \"Failed:0\" | \"In Progress:0\" | \"\" | \"\" | +----------------+---------------+------------+----------------------------+----------------------------+-------------+ # \u663e\u793a\u56fe\u7a7a\u95f4\u7edf\u8ba1\u4fe1\u606f\u3002 nebula> SHOW STATS; +---------+------------+-------+ | Type | Name | Count | +---------+------------+-------+ | \"Tag\" | \"player\" | 51 | | \"Tag\" | \"team\" | 30 | | \"Edge\" | \"follow\" | 81 | | \"Edge\" | \"serve\" | 152 | | \"Space\" | \"vertices\" | 81 | | \"Space\" | \"edges\" | 233 | +---------+------------+-------+","title":"SHOW STATS"},{"location":"3.ngql-guide/7.general-query-statements/6.show/14.show-stats/#show_stats","text":"SHOW STATS \u8bed\u53e5\u663e\u793a\u6700\u8fd1\u4e00\u6b21 SUBMIT JOB STATS \u4f5c\u4e1a\u6536\u96c6\u7684\u56fe\u7a7a\u95f4\u7edf\u8ba1\u4fe1\u606f\u3002 \u56fe\u7a7a\u95f4\u7edf\u8ba1\u4fe1\u606f\u5305\u542b\uff1a \u70b9\u7684\u603b\u6570 \u8fb9\u7684\u603b\u6570 \u6bcf\u4e2a Tag \u5173\u8054\u7684\u70b9\u7684\u603b\u6570 \u6bcf\u4e2a Edge type \u5173\u8054\u7684\u8fb9\u7684\u603b\u6570 Warning SHOW STATS \u8fd4\u56de\u7684\u4e0d\u662f\u5b9e\u65f6\u6570\u636e\u3002\u56e0\u4e3a\u8fd4\u56de\u7684\u6570\u636e\u662f\u6700\u8fd1\u4e00\u6b21 SUBMIT JOB STATS \u4f5c\u4e1a\u6536\u96c6\u7684\u6570\u636e\u3002\u8fd4\u56de\u7684\u6570\u636e\u53ef\u80fd\u5305\u542b TTL \u8fc7\u671f\u6570\u636e\uff0c\u8be5\u8fc7\u671f\u6570\u636e\u4f1a\u5728\u4e0b\u6b21\u6267\u884c Compaction \u64cd\u4f5c \u65f6\u88ab\u5220\u9664\u5e76\u4e0d\u7eb3\u5165\u7edf\u8ba1\u3002","title":"SHOW STATS"},{"location":"3.ngql-guide/7.general-query-statements/6.show/14.show-stats/#_1","text":"\u5728\u9700\u8981\u67e5\u770b\u7edf\u8ba1\u4fe1\u606f\u7684\u56fe\u7a7a\u95f4\u4e2d\u6267\u884c SUBMIT JOB STATS \u3002\u8be6\u60c5\u8bf7\u53c2\u89c1 SUBMIT JOB STATS \u3002 Caution SHOW STATS \u7684\u7ed3\u679c\u53d6\u51b3\u4e8e\u6700\u540e\u4e00\u6b21\u6267\u884c\u7684 SUBMIT JOB STATS \u3002\u5982\u679c\u53d1\u751f\u8fc7\u65b0\u7684\u5199\u5165\u6216\u8005\u66f4\u6539\uff0c\u5fc5\u987b\u518d\u6b21\u6267\u884c SUBMIT JOB STATS \uff0c\u5426\u5219\u7edf\u8ba1\u6570\u636e\u6709\u9519\u8bef\u3002","title":"\u524d\u63d0\u6761\u4ef6"},{"location":"3.ngql-guide/7.general-query-statements/6.show/14.show-stats/#_2","text":"SHOW STATS;","title":"\u8bed\u6cd5"},{"location":"3.ngql-guide/7.general-query-statements/6.show/14.show-stats/#_3","text":"# \u9009\u62e9\u56fe\u7a7a\u95f4\u3002 nebula> USE basketballplayer; # \u6267\u884c SUBMIT JOB STATS\u3002 nebula> SUBMIT JOB STATS; +------------+ | New Job Id | +------------+ | 98 | +------------+ # \u786e\u8ba4\u4f5c\u4e1a\u6267\u884c\u6210\u529f\u3002 nebula> SHOW JOB 98; +----------------+---------------+------------+----------------------------+----------------------------+-------------+ | Job Id(TaskId) | Command(Dest) | Status | Start Time | Stop Time | Error Code | +----------------+---------------+------------+----------------------------+----------------------------+-------------+ | 98 | \"STATS\" | \"FINISHED\" | 2021-11-01T09:33:21.000000 | 2021-11-01T09:33:21.000000 | \"SUCCEEDED\" | | 0 | \"storaged2\" | \"FINISHED\" | 2021-11-01T09:33:21.000000 | 2021-11-01T09:33:21.000000 | \"SUCCEEDED\" | | 1 | \"storaged0\" | \"FINISHED\" | 2021-11-01T09:33:21.000000 | 2021-11-01T09:33:21.000000 | \"SUCCEEDED\" | | 2 | \"storaged1\" | \"FINISHED\" | 2021-11-01T09:33:21.000000 | 2021-11-01T09:33:21.000000 | \"SUCCEEDED\" | | \"Total:3\" | \"Succeeded:3\" | \"Failed:0\" | \"In Progress:0\" | \"\" | \"\" | +----------------+---------------+------------+----------------------------+----------------------------+-------------+ # \u663e\u793a\u56fe\u7a7a\u95f4\u7edf\u8ba1\u4fe1\u606f\u3002 nebula> SHOW STATS; +---------+------------+-------+ | Type | Name | Count | +---------+------------+-------+ | \"Tag\" | \"player\" | 51 | | \"Tag\" | \"team\" | 30 | | \"Edge\" | \"follow\" | 81 | | \"Edge\" | \"serve\" | 152 | | \"Space\" | \"vertices\" | 81 | | \"Space\" | \"edges\" | 233 | +---------+------------+-------+","title":"\u793a\u4f8b"},{"location":"3.ngql-guide/7.general-query-statements/6.show/15.show-tags-edges/","text":"SHOW TAGS/EDGES \u00b6 SHOW TAGS \u8bed\u53e5\u663e\u793a\u5f53\u524d\u56fe\u7a7a\u95f4\u5185\u7684\u6240\u6709 Tag\u3002 SHOW EDGES \u8bed\u53e5\u663e\u793a\u5f53\u524d\u56fe\u7a7a\u95f4\u5185\u7684\u6240\u6709 Edge type\u3002 \u8bed\u6cd5 \u00b6 SHOW {TAGS | EDGES}; \u793a\u4f8b \u00b6 nebula> SHOW TAGS; +----------+ | Name | +----------+ | \"player\" | | \"star\" | | \"team\" | +----------+ nebula> SHOW EDGES; +----------+ | Name | +----------+ | \"follow\" | | \"serve\" | +----------+","title":"SHOW TAGS/EDGES"},{"location":"3.ngql-guide/7.general-query-statements/6.show/15.show-tags-edges/#show_tagsedges","text":"SHOW TAGS \u8bed\u53e5\u663e\u793a\u5f53\u524d\u56fe\u7a7a\u95f4\u5185\u7684\u6240\u6709 Tag\u3002 SHOW EDGES \u8bed\u53e5\u663e\u793a\u5f53\u524d\u56fe\u7a7a\u95f4\u5185\u7684\u6240\u6709 Edge type\u3002","title":"SHOW TAGS/EDGES"},{"location":"3.ngql-guide/7.general-query-statements/6.show/15.show-tags-edges/#_1","text":"SHOW {TAGS | EDGES};","title":"\u8bed\u6cd5"},{"location":"3.ngql-guide/7.general-query-statements/6.show/15.show-tags-edges/#_2","text":"nebula> SHOW TAGS; +----------+ | Name | +----------+ | \"player\" | | \"star\" | | \"team\" | +----------+ nebula> SHOW EDGES; +----------+ | Name | +----------+ | \"follow\" | | \"serve\" | +----------+","title":"\u793a\u4f8b"},{"location":"3.ngql-guide/7.general-query-statements/6.show/16.show-users/","text":"SHOW USERS \u00b6 SHOW USERS \u8bed\u53e5\u663e\u793a\u7528\u6237\u4fe1\u606f\u3002 \u89d2\u8272\u8981\u6c42 \u00b6 \u53ea\u6709 GOD \u89d2\u8272\u7684\u7528\u6237\uff08\u5373 root \uff09\u624d\u80fd\u6267\u884c SHOW USERS \u8bed\u53e5\u3002 \u8bed\u6cd5 \u00b6 SHOW USERS; \u793a\u4f8b \u00b6 nebula> SHOW USERS; +---------+-----------------+ | Account | IP Whitelist | +---------+-----------------+ | \"root\" | \"\" | | \"user1\" | \"\" | | \"user2\" | \"192.168.10.10\" | +---------+-----------------+","title":"SHOW USERS"},{"location":"3.ngql-guide/7.general-query-statements/6.show/16.show-users/#show_users","text":"SHOW USERS \u8bed\u53e5\u663e\u793a\u7528\u6237\u4fe1\u606f\u3002","title":"SHOW USERS"},{"location":"3.ngql-guide/7.general-query-statements/6.show/16.show-users/#_1","text":"\u53ea\u6709 GOD \u89d2\u8272\u7684\u7528\u6237\uff08\u5373 root \uff09\u624d\u80fd\u6267\u884c SHOW USERS \u8bed\u53e5\u3002","title":"\u89d2\u8272\u8981\u6c42"},{"location":"3.ngql-guide/7.general-query-statements/6.show/16.show-users/#_2","text":"SHOW USERS;","title":"\u8bed\u6cd5"},{"location":"3.ngql-guide/7.general-query-statements/6.show/16.show-users/#_3","text":"nebula> SHOW USERS; +---------+-----------------+ | Account | IP Whitelist | +---------+-----------------+ | \"root\" | \"\" | | \"user1\" | \"\" | | \"user2\" | \"192.168.10.10\" | +---------+-----------------+","title":"\u793a\u4f8b"},{"location":"3.ngql-guide/7.general-query-statements/6.show/17.show-sessions/","text":"SHOW SESSIONS \u00b6 \u767b\u5f55NebulaGraph\u6570\u636e\u5e93\u65f6\uff0c\u4f1a\u521b\u5efa\u5bf9\u5e94\u4f1a\u8bdd\uff0c\u7528\u6237\u53ef\u4ee5\u67e5\u8be2\u4f1a\u8bdd\u4fe1\u606f\u3002 \u6ce8\u610f\u4e8b\u9879 \u00b6 \u6267\u884c exit \u9000\u51fa\u767b\u5f55\u65f6\uff0c\u5ba2\u6237\u7aef\u4f1a\u8c03\u7528 API release \uff0c\u91ca\u653e\u4f1a\u8bdd\u5e76\u6e05\u9664\u4f1a\u8bdd\u4fe1\u606f\u3002\u5982\u679c\u6ca1\u6709\u6b63\u5e38\u9000\u51fa\uff0c\u4e14\u6ca1\u6709\u5728\u914d\u7f6e\u6587\u4ef6 nebula-graphd.conf \u8bbe\u7f6e\u7a7a\u95f2\u4f1a\u8bdd\u8d85\u65f6\u65f6\u95f4\uff08 session_idle_timeout_secs \uff09\uff0c\u4f1a\u8bdd\u4e0d\u4f1a\u81ea\u52a8\u91ca\u653e\u3002\u5bf9\u4e8e\u672a\u81ea\u52a8\u91ca\u653e\u7684\u4f1a\u8bdd\uff0c\u9700\u8981\u624b\u52a8\u5220\u9664\u6307\u5b9a\u4f1a\u8bdd\uff0c\u8be6\u60c5\u53c2\u89c1 \u7ec8\u6b62\u4f1a\u8bdd \u3002 SHOW SESSIONS \u67e5\u8be2\u6240\u6709 Graph \u670d\u52a1\u4e0a\u7684\u4f1a\u8bdd\u4fe1\u606f\u3002 SHOW LOCAL SESSIONS \u4ece\u5f53\u524d\u8fde\u63a5\u7684 Graph \u670d\u52a1\u83b7\u53d6\u4f1a\u8bdd\u4fe1\u606f\uff0c\u4e0d\u4f1a\u67e5\u8be2\u5176\u4ed6 Graph \u670d\u52a1\u4e0a\u7684\u4f1a\u8bdd\u4fe1\u606f\u3002 SHOW SESSION <Session_Id> \u67e5\u8be2\u6307\u5b9a Session ID \u7684\u4f1a\u8bdd\u4fe1\u606f\u3002 \u8bed\u6cd5 \u00b6 SHOW [LOCAL] SESSIONS; SHOW SESSION <Session_Id>; \u793a\u4f8b \u00b6 nebula> SHOW SESSIONS; +------------------+----------+--------------------+----------------------------+----------------------------+------------------+----------+--------------------+ | SessionId | UserName | SpaceName | CreateTime | UpdateTime | GraphAddr | Timezone | ClientIp | +------------------+----------+--------------------+----------------------------+----------------------------+------------------+----------+--------------------+ | 1651220858102296 | \"root\" | \"basketballplayer\" | 2022-04-29T08:27:38.102296 | 2022-04-29T08:50:46.282921 | \"127.0.0.1:9669\" | 0 | \"127.0.0.1\" | | 1651199330300991 | \"root\" | \"basketballplayer\" | 2022-04-29T02:28:50.300991 | 2022-04-29T08:16:28.339038 | \"127.0.0.1:9669\" | 0 | \"127.0.0.1\" | | 1651112899847744 | \"root\" | \"basketballplayer\" | 2022-04-28T02:28:19.847744 | 2022-04-28T08:17:44.470210 | \"127.0.0.1:9669\" | 0 | \"127.0.0.1\" | | 1651041092662100 | \"root\" | \"basketballplayer\" | 2022-04-27T06:31:32.662100 | 2022-04-27T07:01:25.200978 | \"127.0.0.1:9669\" | 0 | \"127.0.0.1\" | | 1650959429593975 | \"root\" | \"basketballplayer\" | 2022-04-26T07:50:29.593975 | 2022-04-26T07:51:47.184810 | \"127.0.0.1:9669\" | 0 | \"127.0.0.1\" | | 1650958897679595 | \"root\" | \"\" | 2022-04-26T07:41:37.679595 | 2022-04-26T07:41:37.683802 | \"127.0.0.1:9669\" | 0 | \"127.0.0.1\" | +------------------+----------+--------------------+----------------------------+----------------------------+------------------+----------+--------------------+ nebula> SHOW SESSION 1635254859271703; +------------------+----------+--------------------+----------------------------+----------------------------+------------------+----------+--------------------+ | SessionId | UserName | SpaceName | CreateTime | UpdateTime | GraphAddr | Timezone | ClientIp | +------------------+----------+--------------------+----------------------------+----------------------------+------------------+----------+--------------------+ | 1651220858102296 | \"root\" | \"basketballplayer\" | 2022-04-29T08:27:38.102296 | 2022-04-29T08:50:54.254384 | \"127.0.0.1:9669\" | 0 | \"127.0.0.1\" | +------------------+----------+--------------------+----------------------------+----------------------------+------------------+----------+--------------------+ \u53c2\u6570 \u8bf4\u660e SessionId \u4f1a\u8bdd ID\uff0c\u552f\u4e00\u6807\u8bc6\u4e00\u4e2a\u4f1a\u8bdd\u3002 UserName \u4f1a\u8bdd\u7684\u767b\u5f55\u7528\u6237\u540d\u79f0\u3002 SpaceName \u7528\u6237\u5f53\u524d\u6240\u4f7f\u7528\u7684\u56fe\u7a7a\u95f4\u3002\u521a\u767b\u5f55\u65f6\u4e3a\u7a7a\uff08 \"\" \uff09\u3002 CreateTime \u4f1a\u8bdd\u7684\u521b\u5efa\u65f6\u95f4\uff0c\u5373\u7528\u6237\u8ba4\u8bc1\u767b\u5f55\u7684\u65f6\u95f4\u3002\u65f6\u533a\u4e3a\u914d\u7f6e\u6587\u4ef6\u4e2d timezone_name \u6307\u5b9a\u7684\u65f6\u533a\u3002 UpdateTime \u7528\u6237\u6709\u6267\u884c\u64cd\u4f5c\u65f6\uff0c\u4f1a\u66f4\u65b0\u6b64\u65f6\u95f4\u3002\u65f6\u533a\u4e3a\u914d\u7f6e\u6587\u4ef6\u4e2d timezone_name \u6307\u5b9a\u7684\u65f6\u533a\u3002 GraphAddr \u4f1a\u8bdd\u7684 Graph \u670d\u52a1\u5730\u5740\u548c\u7aef\u53e3\u3002 Timezone \u4fdd\u7559\u53c2\u6570\uff0c\u6682\u65e0\u610f\u4e49\u3002 ClientIp \u4f1a\u8bdd\u7684\u5ba2\u6237\u7aef IP \u5730\u5740\u3002","title":"SHOW SESSIONS"},{"location":"3.ngql-guide/7.general-query-statements/6.show/17.show-sessions/#show_sessions","text":"\u767b\u5f55NebulaGraph\u6570\u636e\u5e93\u65f6\uff0c\u4f1a\u521b\u5efa\u5bf9\u5e94\u4f1a\u8bdd\uff0c\u7528\u6237\u53ef\u4ee5\u67e5\u8be2\u4f1a\u8bdd\u4fe1\u606f\u3002","title":"SHOW SESSIONS"},{"location":"3.ngql-guide/7.general-query-statements/6.show/17.show-sessions/#_1","text":"\u6267\u884c exit \u9000\u51fa\u767b\u5f55\u65f6\uff0c\u5ba2\u6237\u7aef\u4f1a\u8c03\u7528 API release \uff0c\u91ca\u653e\u4f1a\u8bdd\u5e76\u6e05\u9664\u4f1a\u8bdd\u4fe1\u606f\u3002\u5982\u679c\u6ca1\u6709\u6b63\u5e38\u9000\u51fa\uff0c\u4e14\u6ca1\u6709\u5728\u914d\u7f6e\u6587\u4ef6 nebula-graphd.conf \u8bbe\u7f6e\u7a7a\u95f2\u4f1a\u8bdd\u8d85\u65f6\u65f6\u95f4\uff08 session_idle_timeout_secs \uff09\uff0c\u4f1a\u8bdd\u4e0d\u4f1a\u81ea\u52a8\u91ca\u653e\u3002\u5bf9\u4e8e\u672a\u81ea\u52a8\u91ca\u653e\u7684\u4f1a\u8bdd\uff0c\u9700\u8981\u624b\u52a8\u5220\u9664\u6307\u5b9a\u4f1a\u8bdd\uff0c\u8be6\u60c5\u53c2\u89c1 \u7ec8\u6b62\u4f1a\u8bdd \u3002 SHOW SESSIONS \u67e5\u8be2\u6240\u6709 Graph \u670d\u52a1\u4e0a\u7684\u4f1a\u8bdd\u4fe1\u606f\u3002 SHOW LOCAL SESSIONS \u4ece\u5f53\u524d\u8fde\u63a5\u7684 Graph \u670d\u52a1\u83b7\u53d6\u4f1a\u8bdd\u4fe1\u606f\uff0c\u4e0d\u4f1a\u67e5\u8be2\u5176\u4ed6 Graph \u670d\u52a1\u4e0a\u7684\u4f1a\u8bdd\u4fe1\u606f\u3002 SHOW SESSION <Session_Id> \u67e5\u8be2\u6307\u5b9a Session ID \u7684\u4f1a\u8bdd\u4fe1\u606f\u3002","title":"\u6ce8\u610f\u4e8b\u9879"},{"location":"3.ngql-guide/7.general-query-statements/6.show/17.show-sessions/#_2","text":"SHOW [LOCAL] SESSIONS; SHOW SESSION <Session_Id>;","title":"\u8bed\u6cd5"},{"location":"3.ngql-guide/7.general-query-statements/6.show/17.show-sessions/#_3","text":"nebula> SHOW SESSIONS; +------------------+----------+--------------------+----------------------------+----------------------------+------------------+----------+--------------------+ | SessionId | UserName | SpaceName | CreateTime | UpdateTime | GraphAddr | Timezone | ClientIp | +------------------+----------+--------------------+----------------------------+----------------------------+------------------+----------+--------------------+ | 1651220858102296 | \"root\" | \"basketballplayer\" | 2022-04-29T08:27:38.102296 | 2022-04-29T08:50:46.282921 | \"127.0.0.1:9669\" | 0 | \"127.0.0.1\" | | 1651199330300991 | \"root\" | \"basketballplayer\" | 2022-04-29T02:28:50.300991 | 2022-04-29T08:16:28.339038 | \"127.0.0.1:9669\" | 0 | \"127.0.0.1\" | | 1651112899847744 | \"root\" | \"basketballplayer\" | 2022-04-28T02:28:19.847744 | 2022-04-28T08:17:44.470210 | \"127.0.0.1:9669\" | 0 | \"127.0.0.1\" | | 1651041092662100 | \"root\" | \"basketballplayer\" | 2022-04-27T06:31:32.662100 | 2022-04-27T07:01:25.200978 | \"127.0.0.1:9669\" | 0 | \"127.0.0.1\" | | 1650959429593975 | \"root\" | \"basketballplayer\" | 2022-04-26T07:50:29.593975 | 2022-04-26T07:51:47.184810 | \"127.0.0.1:9669\" | 0 | \"127.0.0.1\" | | 1650958897679595 | \"root\" | \"\" | 2022-04-26T07:41:37.679595 | 2022-04-26T07:41:37.683802 | \"127.0.0.1:9669\" | 0 | \"127.0.0.1\" | +------------------+----------+--------------------+----------------------------+----------------------------+------------------+----------+--------------------+ nebula> SHOW SESSION 1635254859271703; +------------------+----------+--------------------+----------------------------+----------------------------+------------------+----------+--------------------+ | SessionId | UserName | SpaceName | CreateTime | UpdateTime | GraphAddr | Timezone | ClientIp | +------------------+----------+--------------------+----------------------------+----------------------------+------------------+----------+--------------------+ | 1651220858102296 | \"root\" | \"basketballplayer\" | 2022-04-29T08:27:38.102296 | 2022-04-29T08:50:54.254384 | \"127.0.0.1:9669\" | 0 | \"127.0.0.1\" | +------------------+----------+--------------------+----------------------------+----------------------------+------------------+----------+--------------------+ \u53c2\u6570 \u8bf4\u660e SessionId \u4f1a\u8bdd ID\uff0c\u552f\u4e00\u6807\u8bc6\u4e00\u4e2a\u4f1a\u8bdd\u3002 UserName \u4f1a\u8bdd\u7684\u767b\u5f55\u7528\u6237\u540d\u79f0\u3002 SpaceName \u7528\u6237\u5f53\u524d\u6240\u4f7f\u7528\u7684\u56fe\u7a7a\u95f4\u3002\u521a\u767b\u5f55\u65f6\u4e3a\u7a7a\uff08 \"\" \uff09\u3002 CreateTime \u4f1a\u8bdd\u7684\u521b\u5efa\u65f6\u95f4\uff0c\u5373\u7528\u6237\u8ba4\u8bc1\u767b\u5f55\u7684\u65f6\u95f4\u3002\u65f6\u533a\u4e3a\u914d\u7f6e\u6587\u4ef6\u4e2d timezone_name \u6307\u5b9a\u7684\u65f6\u533a\u3002 UpdateTime \u7528\u6237\u6709\u6267\u884c\u64cd\u4f5c\u65f6\uff0c\u4f1a\u66f4\u65b0\u6b64\u65f6\u95f4\u3002\u65f6\u533a\u4e3a\u914d\u7f6e\u6587\u4ef6\u4e2d timezone_name \u6307\u5b9a\u7684\u65f6\u533a\u3002 GraphAddr \u4f1a\u8bdd\u7684 Graph \u670d\u52a1\u5730\u5740\u548c\u7aef\u53e3\u3002 Timezone \u4fdd\u7559\u53c2\u6570\uff0c\u6682\u65e0\u610f\u4e49\u3002 ClientIp \u4f1a\u8bdd\u7684\u5ba2\u6237\u7aef IP \u5730\u5740\u3002","title":"\u793a\u4f8b"},{"location":"3.ngql-guide/7.general-query-statements/6.show/18.show-queries/","text":"SHOW QUERIES \u00b6 SHOW QUERIES \u8bed\u53e5\u53ef\u4ee5\u67e5\u770b\u5f53\u524d Session \u4e2d\u6b63\u5728\u6267\u884c\u7684\u67e5\u8be2\u8bf7\u6c42\u4fe1\u606f\u3002 Note \u5982\u679c\u9700\u8981\u7ec8\u6b62\u67e5\u8be2\uff0c\u8bf7\u53c2\u89c1 \u7ec8\u6b62\u67e5\u8be2 \u3002 \u6ce8\u610f\u4e8b\u9879 \u00b6 SHOW LOCAL QUERIES \u4ece\u672c\u5730\u7f13\u5b58\u83b7\u53d6\u5f53\u524d Session \u4e2d\u67e5\u8be2\u7684\u72b6\u6001\uff0c\u51e0\u4e4e\u6ca1\u6709\u5ef6\u8fdf\u3002 SHOW QUERIES \u4ece Meta \u670d\u52a1\u83b7\u53d6\u6240\u6709 Session \u4e2d\u7684\u67e5\u8be2\u4fe1\u606f\u3002\u8fd9\u4e9b\u4fe1\u606f\u4f1a\u6839\u636e\u53c2\u6570 session_reclaim_interval_secs \u5b9a\u4e49\u7684\u5468\u671f\u540c\u6b65\u5230 Meta \u670d\u52a1\uff0c\u56e0\u6b64\u5728\u5ba2\u6237\u7aef\u83b7\u53d6\u5230\u7684\u4fe1\u606f\u53ef\u80fd\u5c5e\u4e8e\u4e0a\u4e2a\u540c\u6b65\u5468\u671f\u3002 \u8bed\u6cd5 \u00b6 SHOW [LOCAL] QUERIES; \u793a\u4f8b \u00b6 nebula> SHOW LOCAL QUERIES; +------------------+-----------------+--------+----------------------+----------------------------+----------------+-----------+-----------------------+ | SessionID | ExecutionPlanID | User | Host | StartTime | DurationInUSec | Status | Query | +------------------+-----------------+--------+----------------------+----------------------------+----------------+-----------+-----------------------+ | 1625463842921750 | 46 | \"root\" | \"\"192.168.x.x\":9669\" | 2021-07-05T05:44:19.502903 | 0 | \"RUNNING\" | \"SHOW LOCAL QUERIES;\" | +------------------+-----------------+--------+----------------------+----------------------------+----------------+-----------+-----------------------+ nebula> SHOW QUERIES; +------------------+-----------------+---------+----------------------+----------------------------+----------------+-----------+---------------------------------------------------------+ | SessionID | ExecutionPlanID | User | Host | StartTime | DurationInUSec | Status | Query | +------------------+-----------------+---------+----------------------+----------------------------+----------------+-----------+---------------------------------------------------------+ | 1625456037718757 | 54 | \"user1\" | \"\"192.168.x.x\":9669\" | 2021-07-05T05:51:08.691318 | 1504502 | \"RUNNING\" | \"MATCH p=(v:player)-[*1..4]-(v2) RETURN v2 AS Friends;\" | +------------------+-----------------+---------+----------------------+----------------------------+----------------+-----------+---------------------------------------------------------+ # \u8fd4\u56de\u8017\u65f6 TOP 10 \u7684\u67e5\u8be2\u3002 nebula> SHOW QUERIES | ORDER BY $-.DurationInUSec DESC | LIMIT 10; +------------------+-----------------+---------+----------------------+----------------------------+----------------+-----------+-------------------------------------------------------+ | SessionID | ExecutionPlanID | User | Host | StartTime | DurationInUSec | Status | Query | +------------------+-----------------+---------+----------------------+----------------------------+----------------+-----------+-------------------------------------------------------+ | 1625471375320831 | 98 | \"user2\" | \"\"192.168.x.x\":9669\" | 2021-07-05T07:50:24.461779 | 2608176 | \"RUNNING\" | \"MATCH (v:player)-[*1..4]-(v2) RETURN v2 AS Friends;\" | | 1625456037718757 | 99 | \"user1\" | \"\"192.168.x.x\":9669\" | 2021-07-05T07:50:24.910616 | 2159333 | \"RUNNING\" | \"MATCH (v:player)-[*1..4]-(v2) RETURN v2 AS Friends;\" | +------------------+-----------------+---------+----------------------+----------------------------+----------------+-----------+-------------------------------------------------------+ \u53c2\u6570\u8bf4\u660e\u5982\u4e0b\u3002 \u53c2\u6570 \u8bf4\u660e SessionID \u4f1a\u8bdd ID\u3002 ExecutionPlanID \u6267\u884c\u8ba1\u5212 ID\u3002 User \u6267\u884c\u67e5\u8be2\u7684\u7528\u6237\u540d\u3002 Host \u7528\u6237\u8fde\u63a5\u7684\u670d\u52a1\u5668\u5730\u5740\u548c\u7aef\u53e3\u3002 StartTime \u6267\u884c\u67e5\u8be2\u7684\u5f00\u59cb\u65f6\u95f4\u3002 DurationInUSec \u6267\u884c\u67e5\u8be2\u7684\u6301\u7eed\u65f6\u957f\u3002\u5355\u4f4d\uff1a\u5fae\u79d2\u3002 Status \u67e5\u8be2\u7684\u5f53\u524d\u72b6\u6001\u3002 Query \u67e5\u8be2\u8bed\u53e5\u3002","title":"SHOW QUERIES"},{"location":"3.ngql-guide/7.general-query-statements/6.show/18.show-queries/#show_queries","text":"SHOW QUERIES \u8bed\u53e5\u53ef\u4ee5\u67e5\u770b\u5f53\u524d Session \u4e2d\u6b63\u5728\u6267\u884c\u7684\u67e5\u8be2\u8bf7\u6c42\u4fe1\u606f\u3002 Note \u5982\u679c\u9700\u8981\u7ec8\u6b62\u67e5\u8be2\uff0c\u8bf7\u53c2\u89c1 \u7ec8\u6b62\u67e5\u8be2 \u3002","title":"SHOW QUERIES"},{"location":"3.ngql-guide/7.general-query-statements/6.show/18.show-queries/#_1","text":"SHOW LOCAL QUERIES \u4ece\u672c\u5730\u7f13\u5b58\u83b7\u53d6\u5f53\u524d Session \u4e2d\u67e5\u8be2\u7684\u72b6\u6001\uff0c\u51e0\u4e4e\u6ca1\u6709\u5ef6\u8fdf\u3002 SHOW QUERIES \u4ece Meta \u670d\u52a1\u83b7\u53d6\u6240\u6709 Session \u4e2d\u7684\u67e5\u8be2\u4fe1\u606f\u3002\u8fd9\u4e9b\u4fe1\u606f\u4f1a\u6839\u636e\u53c2\u6570 session_reclaim_interval_secs \u5b9a\u4e49\u7684\u5468\u671f\u540c\u6b65\u5230 Meta \u670d\u52a1\uff0c\u56e0\u6b64\u5728\u5ba2\u6237\u7aef\u83b7\u53d6\u5230\u7684\u4fe1\u606f\u53ef\u80fd\u5c5e\u4e8e\u4e0a\u4e2a\u540c\u6b65\u5468\u671f\u3002","title":"\u6ce8\u610f\u4e8b\u9879"},{"location":"3.ngql-guide/7.general-query-statements/6.show/18.show-queries/#_2","text":"SHOW [LOCAL] QUERIES;","title":"\u8bed\u6cd5"},{"location":"3.ngql-guide/7.general-query-statements/6.show/18.show-queries/#_3","text":"nebula> SHOW LOCAL QUERIES; +------------------+-----------------+--------+----------------------+----------------------------+----------------+-----------+-----------------------+ | SessionID | ExecutionPlanID | User | Host | StartTime | DurationInUSec | Status | Query | +------------------+-----------------+--------+----------------------+----------------------------+----------------+-----------+-----------------------+ | 1625463842921750 | 46 | \"root\" | \"\"192.168.x.x\":9669\" | 2021-07-05T05:44:19.502903 | 0 | \"RUNNING\" | \"SHOW LOCAL QUERIES;\" | +------------------+-----------------+--------+----------------------+----------------------------+----------------+-----------+-----------------------+ nebula> SHOW QUERIES; +------------------+-----------------+---------+----------------------+----------------------------+----------------+-----------+---------------------------------------------------------+ | SessionID | ExecutionPlanID | User | Host | StartTime | DurationInUSec | Status | Query | +------------------+-----------------+---------+----------------------+----------------------------+----------------+-----------+---------------------------------------------------------+ | 1625456037718757 | 54 | \"user1\" | \"\"192.168.x.x\":9669\" | 2021-07-05T05:51:08.691318 | 1504502 | \"RUNNING\" | \"MATCH p=(v:player)-[*1..4]-(v2) RETURN v2 AS Friends;\" | +------------------+-----------------+---------+----------------------+----------------------------+----------------+-----------+---------------------------------------------------------+ # \u8fd4\u56de\u8017\u65f6 TOP 10 \u7684\u67e5\u8be2\u3002 nebula> SHOW QUERIES | ORDER BY $-.DurationInUSec DESC | LIMIT 10; +------------------+-----------------+---------+----------------------+----------------------------+----------------+-----------+-------------------------------------------------------+ | SessionID | ExecutionPlanID | User | Host | StartTime | DurationInUSec | Status | Query | +------------------+-----------------+---------+----------------------+----------------------------+----------------+-----------+-------------------------------------------------------+ | 1625471375320831 | 98 | \"user2\" | \"\"192.168.x.x\":9669\" | 2021-07-05T07:50:24.461779 | 2608176 | \"RUNNING\" | \"MATCH (v:player)-[*1..4]-(v2) RETURN v2 AS Friends;\" | | 1625456037718757 | 99 | \"user1\" | \"\"192.168.x.x\":9669\" | 2021-07-05T07:50:24.910616 | 2159333 | \"RUNNING\" | \"MATCH (v:player)-[*1..4]-(v2) RETURN v2 AS Friends;\" | +------------------+-----------------+---------+----------------------+----------------------------+----------------+-----------+-------------------------------------------------------+ \u53c2\u6570\u8bf4\u660e\u5982\u4e0b\u3002 \u53c2\u6570 \u8bf4\u660e SessionID \u4f1a\u8bdd ID\u3002 ExecutionPlanID \u6267\u884c\u8ba1\u5212 ID\u3002 User \u6267\u884c\u67e5\u8be2\u7684\u7528\u6237\u540d\u3002 Host \u7528\u6237\u8fde\u63a5\u7684\u670d\u52a1\u5668\u5730\u5740\u548c\u7aef\u53e3\u3002 StartTime \u6267\u884c\u67e5\u8be2\u7684\u5f00\u59cb\u65f6\u95f4\u3002 DurationInUSec \u6267\u884c\u67e5\u8be2\u7684\u6301\u7eed\u65f6\u957f\u3002\u5355\u4f4d\uff1a\u5fae\u79d2\u3002 Status \u67e5\u8be2\u7684\u5f53\u524d\u72b6\u6001\u3002 Query \u67e5\u8be2\u8bed\u53e5\u3002","title":"\u793a\u4f8b"},{"location":"3.ngql-guide/7.general-query-statements/6.show/19.show-meta-leader/","text":"SHOW META LEADER \u00b6 SHOW META LEADER \u8bed\u53e5\u663e\u793a\u5f53\u524d Meta \u96c6\u7fa4\u7684 leader \u4fe1\u606f\u3002 \u5173\u4e8e Meta \u670d\u52a1\u7684\u8be6\u7ec6\u8bf4\u660e\u8bf7\u53c2\u89c1 Meta \u670d\u52a1 \u3002 \u8bed\u6cd5 \u00b6 SHOW META LEADER; \u793a\u4f8b \u00b6 nebula> SHOW META LEADER; +------------------+---------------------------+ | Meta Leader | secs from last heart beat | +------------------+---------------------------+ | \"127.0.0.1:9559\" | 3 | +------------------+---------------------------+ \u53c2\u6570 \u8bf4\u660e Meta Leader Meta \u96c6\u7fa4\u7684 leader \u4fe1\u606f\uff0c\u5305\u62ec leader \u6240\u5728\u670d\u52a1\u5668\u7684 IP \u5730\u5740\u548c\u7aef\u53e3\u3002 secs from last heart beat \u8ddd\u79bb\u4e0a\u6b21\u5fc3\u8df3\u7684\u65f6\u95f4\u95f4\u9694\u3002\u5355\u4f4d\uff1a\u79d2\u3002","title":"SHOW META LEADER"},{"location":"3.ngql-guide/7.general-query-statements/6.show/19.show-meta-leader/#show_meta_leader","text":"SHOW META LEADER \u8bed\u53e5\u663e\u793a\u5f53\u524d Meta \u96c6\u7fa4\u7684 leader \u4fe1\u606f\u3002 \u5173\u4e8e Meta \u670d\u52a1\u7684\u8be6\u7ec6\u8bf4\u660e\u8bf7\u53c2\u89c1 Meta \u670d\u52a1 \u3002","title":"SHOW META LEADER"},{"location":"3.ngql-guide/7.general-query-statements/6.show/19.show-meta-leader/#_1","text":"SHOW META LEADER;","title":"\u8bed\u6cd5"},{"location":"3.ngql-guide/7.general-query-statements/6.show/19.show-meta-leader/#_2","text":"nebula> SHOW META LEADER; +------------------+---------------------------+ | Meta Leader | secs from last heart beat | +------------------+---------------------------+ | \"127.0.0.1:9559\" | 3 | +------------------+---------------------------+ \u53c2\u6570 \u8bf4\u660e Meta Leader Meta \u96c6\u7fa4\u7684 leader \u4fe1\u606f\uff0c\u5305\u62ec leader \u6240\u5728\u670d\u52a1\u5668\u7684 IP \u5730\u5740\u548c\u7aef\u53e3\u3002 secs from last heart beat \u8ddd\u79bb\u4e0a\u6b21\u5fc3\u8df3\u7684\u65f6\u95f4\u95f4\u9694\u3002\u5355\u4f4d\uff1a\u79d2\u3002","title":"\u793a\u4f8b"},{"location":"3.ngql-guide/7.general-query-statements/6.show/2.show-collation/","text":"SHOW COLLATION \u00b6 SHOW COLLATION \u8bed\u53e5\u663e\u793a\u5f53\u524d\u7684\u6392\u5e8f\u89c4\u5219\u3002 \u76ee\u524d\u53ef\u7528\u7684\u6392\u5e8f\u89c4\u5219\u4e3a utf8_bin \u548c utf8mb4_bin \u3002 \u5f53\u5b57\u7b26\u96c6\u4e3a utf8 \uff0c\u9ed8\u8ba4\u6392\u5e8f\u89c4\u5219\u4e3a utf8_bin \u3002 \u5f53\u5b57\u7b26\u96c6\u4e3a utf8mb4 \uff0c\u9ed8\u8ba4\u6392\u5e8f\u89c4\u5219\u4e3a utf8mb4_bin \u3002 \u8bed\u6cd5 \u00b6 SHOW COLLATION; \u793a\u4f8b \u00b6 nebula> SHOW COLLATION; +------------+---------+ | Collation | Charset | +------------+---------+ | \"utf8_bin\" | \"utf8\" | +------------+---------+ \u53c2\u6570 \u8bf4\u660e Collation \u6392\u5e8f\u89c4\u5219\u540d\u79f0\u3002 Charset \u4e0e\u6392\u5e8f\u89c4\u5219\u5173\u8054\u7684\u5b57\u7b26\u96c6\u540d\u79f0\u3002","title":"SHOW COLLATION"},{"location":"3.ngql-guide/7.general-query-statements/6.show/2.show-collation/#show_collation","text":"SHOW COLLATION \u8bed\u53e5\u663e\u793a\u5f53\u524d\u7684\u6392\u5e8f\u89c4\u5219\u3002 \u76ee\u524d\u53ef\u7528\u7684\u6392\u5e8f\u89c4\u5219\u4e3a utf8_bin \u548c utf8mb4_bin \u3002 \u5f53\u5b57\u7b26\u96c6\u4e3a utf8 \uff0c\u9ed8\u8ba4\u6392\u5e8f\u89c4\u5219\u4e3a utf8_bin \u3002 \u5f53\u5b57\u7b26\u96c6\u4e3a utf8mb4 \uff0c\u9ed8\u8ba4\u6392\u5e8f\u89c4\u5219\u4e3a utf8mb4_bin \u3002","title":"SHOW COLLATION"},{"location":"3.ngql-guide/7.general-query-statements/6.show/2.show-collation/#_1","text":"SHOW COLLATION;","title":"\u8bed\u6cd5"},{"location":"3.ngql-guide/7.general-query-statements/6.show/2.show-collation/#_2","text":"nebula> SHOW COLLATION; +------------+---------+ | Collation | Charset | +------------+---------+ | \"utf8_bin\" | \"utf8\" | +------------+---------+ \u53c2\u6570 \u8bf4\u660e Collation \u6392\u5e8f\u89c4\u5219\u540d\u79f0\u3002 Charset \u4e0e\u6392\u5e8f\u89c4\u5219\u5173\u8054\u7684\u5b57\u7b26\u96c6\u540d\u79f0\u3002","title":"\u793a\u4f8b"},{"location":"3.ngql-guide/7.general-query-statements/6.show/4.show-create-space/","text":"SHOW CREATE SPACE \u00b6 SHOW CREATE SPACE \u8bed\u53e5\u663e\u793a\u6307\u5b9a\u56fe\u7a7a\u95f4\u7684\u521b\u5efa\u8bed\u53e5\u3002 \u56fe\u7a7a\u95f4\u7684\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u89c1 CREATE SPACE \u3002 \u8bed\u6cd5 \u00b6 SHOW CREATE SPACE <space_name>; \u793a\u4f8b \u00b6 nebula> SHOW CREATE SPACE basketballplayer; +--------------------+---------------------------------------------------------------------------------------------------------------------------------------------+ | Space | Create Space | +--------------------+---------------------------------------------------------------------------------------------------------------------------------------------+ | \"basketballplayer\" | \"CREATE SPACE `basketballplayer` (partition_num = 10, replica_factor = 1, charset = utf8, collate = utf8_bin, vid_type = FIXED_STRING(32))\" | +--------------------+---------------------------------------------------------------------------------------------------------------------------------------------+","title":"SHOW CREATE SPACE"},{"location":"3.ngql-guide/7.general-query-statements/6.show/4.show-create-space/#show_create_space","text":"SHOW CREATE SPACE \u8bed\u53e5\u663e\u793a\u6307\u5b9a\u56fe\u7a7a\u95f4\u7684\u521b\u5efa\u8bed\u53e5\u3002 \u56fe\u7a7a\u95f4\u7684\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u89c1 CREATE SPACE \u3002","title":"SHOW CREATE SPACE"},{"location":"3.ngql-guide/7.general-query-statements/6.show/4.show-create-space/#_1","text":"SHOW CREATE SPACE <space_name>;","title":"\u8bed\u6cd5"},{"location":"3.ngql-guide/7.general-query-statements/6.show/4.show-create-space/#_2","text":"nebula> SHOW CREATE SPACE basketballplayer; +--------------------+---------------------------------------------------------------------------------------------------------------------------------------------+ | Space | Create Space | +--------------------+---------------------------------------------------------------------------------------------------------------------------------------------+ | \"basketballplayer\" | \"CREATE SPACE `basketballplayer` (partition_num = 10, replica_factor = 1, charset = utf8, collate = utf8_bin, vid_type = FIXED_STRING(32))\" | +--------------------+---------------------------------------------------------------------------------------------------------------------------------------------+","title":"\u793a\u4f8b"},{"location":"3.ngql-guide/7.general-query-statements/6.show/5.show-create-tag-edge/","text":"SHOW CREATE TAG/EDGE \u00b6 SHOW CREATE TAG \u8bed\u53e5\u663e\u793a\u6307\u5b9a Tag \u7684\u57fa\u672c\u4fe1\u606f\u3002Tag \u7684\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u89c1 CREATE TAG \u3002 SHOW CREATE EDGE \u8bed\u53e5\u663e\u793a\u6307\u5b9a Edge type \u7684\u57fa\u672c\u4fe1\u606f\u3002Edge type \u7684\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u89c1 CREATE EDGE \u3002 \u8bed\u6cd5 \u00b6 SHOW CREATE {TAG <tag_name> | EDGE <edge_name>}; \u793a\u4f8b \u00b6 nebula> SHOW CREATE TAG player; +----------+-----------------------------------+ | Tag | Create Tag | +----------+-----------------------------------+ | \"player\" | \"CREATE TAG `player` ( | | | `name` string NULL, | | | `age` int64 NULL | | | ) ttl_duration = 0, ttl_col = \"\"\" | +----------+-----------------------------------+ nebula> SHOW CREATE EDGE follow; +----------+-----------------------------------+ | Edge | Create Edge | +----------+-----------------------------------+ | \"follow\" | \"CREATE EDGE `follow` ( | | | `degree` int64 NULL | | | ) ttl_duration = 0, ttl_col = \"\"\" | +----------+-----------------------------------+","title":"SHOW CREATE TAG/EDGE"},{"location":"3.ngql-guide/7.general-query-statements/6.show/5.show-create-tag-edge/#show_create_tagedge","text":"SHOW CREATE TAG \u8bed\u53e5\u663e\u793a\u6307\u5b9a Tag \u7684\u57fa\u672c\u4fe1\u606f\u3002Tag \u7684\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u89c1 CREATE TAG \u3002 SHOW CREATE EDGE \u8bed\u53e5\u663e\u793a\u6307\u5b9a Edge type \u7684\u57fa\u672c\u4fe1\u606f\u3002Edge type \u7684\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u89c1 CREATE EDGE \u3002","title":"SHOW CREATE TAG/EDGE"},{"location":"3.ngql-guide/7.general-query-statements/6.show/5.show-create-tag-edge/#_1","text":"SHOW CREATE {TAG <tag_name> | EDGE <edge_name>};","title":"\u8bed\u6cd5"},{"location":"3.ngql-guide/7.general-query-statements/6.show/5.show-create-tag-edge/#_2","text":"nebula> SHOW CREATE TAG player; +----------+-----------------------------------+ | Tag | Create Tag | +----------+-----------------------------------+ | \"player\" | \"CREATE TAG `player` ( | | | `name` string NULL, | | | `age` int64 NULL | | | ) ttl_duration = 0, ttl_col = \"\"\" | +----------+-----------------------------------+ nebula> SHOW CREATE EDGE follow; +----------+-----------------------------------+ | Edge | Create Edge | +----------+-----------------------------------+ | \"follow\" | \"CREATE EDGE `follow` ( | | | `degree` int64 NULL | | | ) ttl_duration = 0, ttl_col = \"\"\" | +----------+-----------------------------------+","title":"\u793a\u4f8b"},{"location":"3.ngql-guide/7.general-query-statements/6.show/6.show-hosts/","text":"SHOW HOSTS \u00b6 SHOW HOSTS \u8bed\u53e5\u53ef\u4ee5\u663e\u793a\u96c6\u7fa4\u4fe1\u606f\uff0c\u5305\u62ec\u7aef\u53e3\u3001\u72b6\u6001\u3001leader\u3001\u5206\u7247\u3001\u7248\u672c\u7b49\u4fe1\u606f\uff0c\u6216\u8005\u6307\u5b9a\u663e\u793a Graph\u3001Storage\u3001Meta \u670d\u52a1\u4e3b\u673a\u4fe1\u606f\u3002 \u8bed\u6cd5 \u00b6 SHOW HOSTS [GRAPH | STORAGE | META]; Note \u5bf9\u4e8e\u4f7f\u7528\u6e90\u7801\u5b89\u88c5\u7684NebulaGraph\uff0c\u6267\u884c\u6dfb\u52a0\u4e86\u670d\u52a1\u540d\u7684\u547d\u4ee4\u540e\uff0c\u8f93\u51fa\u7684\u4fe1\u606f\u4e2d\u4e0d\u663e\u793a\u7248\u672c\u4fe1\u606f\u3002 \u793a\u4f8b \u00b6 nebula> SHOW HOSTS; +-------------+-------+----------+--------------+----------------------------------+------------------------------+---------+ | Host | Port | Status | Leader count | Leader distribution | Partition distribution | Version | +-------------+-------+----------+--------------+----------------------------------+------------------------------+---------+ | \"storaged0\" | 9779 | \"ONLINE\" | 8 | \"docs:5, basketballplayer:3\" | \"docs:5, basketballplayer:3\" | \"3.6.0\" | | \"storaged1\" | 9779 | \"ONLINE\" | 9 | \"basketballplayer:4, docs:5\" | \"docs:5, basketballplayer:4\" | \"3.6.0\" | | \"storaged2\" | 9779 | \"ONLINE\" | 8 | \"basketballplayer:3, docs:5\" | \"docs:5, basketballplayer:3\" | \"3.6.0\" | +-------------+-------+----------+--------------+----------------------------------+------------------------------+---------+ nebula> SHOW HOSTS GRAPH; +-----------+------+----------+---------+--------------+---------+ | Host | Port | Status | Role | Git Info Sha | Version | +-----------+------+----------+---------+--------------+---------+ | \"graphd\" | 9669 | \"ONLINE\" | \"GRAPH\" | \"3ba41bd\" | \"3.6.0\" | | \"graphd1\" | 9669 | \"ONLINE\" | \"GRAPH\" | \"3ba41bd\" | \"3.6.0\" | | \"graphd2\" | 9669 | \"ONLINE\" | \"GRAPH\" | \"3ba41bd\" | \"3.6.0\" | +-----------+------+----------+---------+--------------+---------+ nebula> SHOW HOSTS STORAGE; +-------------+------+----------+-----------+--------------+---------+ | Host | Port | Status | Role | Git Info Sha | Version | +-------------+------+----------+-----------+--------------+---------+ | \"storaged0\" | 9779 | \"ONLINE\" | \"STORAGE\" | \"3ba41bd\" | \"3.6.0\" | | \"storaged1\" | 9779 | \"ONLINE\" | \"STORAGE\" | \"3ba41bd\" | \"3.6.0\" | | \"storaged2\" | 9779 | \"ONLINE\" | \"STORAGE\" | \"3ba41bd\" | \"3.6.0\" | +-------------+------+----------+-----------+--------------+---------+ nebula> SHOW HOSTS META; +----------+------+----------+--------+--------------+---------+ | Host | Port | Status | Role | Git Info Sha | Version | +----------+------+----------+--------+--------------+---------+ | \"metad2\" | 9559 | \"ONLINE\" | \"META\" | \"3ba41bd\" | \"3.6.0\" | | \"metad0\" | 9559 | \"ONLINE\" | \"META\" | \"3ba41bd\" | \"3.6.0\" | | \"metad1\" | 9559 | \"ONLINE\" | \"META\" | \"3ba41bd\" | \"3.6.0\" | +----------+------+----------+--------+--------------+---------+","title":"SHOW HOSTS"},{"location":"3.ngql-guide/7.general-query-statements/6.show/6.show-hosts/#show_hosts","text":"SHOW HOSTS \u8bed\u53e5\u53ef\u4ee5\u663e\u793a\u96c6\u7fa4\u4fe1\u606f\uff0c\u5305\u62ec\u7aef\u53e3\u3001\u72b6\u6001\u3001leader\u3001\u5206\u7247\u3001\u7248\u672c\u7b49\u4fe1\u606f\uff0c\u6216\u8005\u6307\u5b9a\u663e\u793a Graph\u3001Storage\u3001Meta \u670d\u52a1\u4e3b\u673a\u4fe1\u606f\u3002","title":"SHOW HOSTS"},{"location":"3.ngql-guide/7.general-query-statements/6.show/6.show-hosts/#_1","text":"SHOW HOSTS [GRAPH | STORAGE | META]; Note \u5bf9\u4e8e\u4f7f\u7528\u6e90\u7801\u5b89\u88c5\u7684NebulaGraph\uff0c\u6267\u884c\u6dfb\u52a0\u4e86\u670d\u52a1\u540d\u7684\u547d\u4ee4\u540e\uff0c\u8f93\u51fa\u7684\u4fe1\u606f\u4e2d\u4e0d\u663e\u793a\u7248\u672c\u4fe1\u606f\u3002","title":"\u8bed\u6cd5"},{"location":"3.ngql-guide/7.general-query-statements/6.show/6.show-hosts/#_2","text":"nebula> SHOW HOSTS; +-------------+-------+----------+--------------+----------------------------------+------------------------------+---------+ | Host | Port | Status | Leader count | Leader distribution | Partition distribution | Version | +-------------+-------+----------+--------------+----------------------------------+------------------------------+---------+ | \"storaged0\" | 9779 | \"ONLINE\" | 8 | \"docs:5, basketballplayer:3\" | \"docs:5, basketballplayer:3\" | \"3.6.0\" | | \"storaged1\" | 9779 | \"ONLINE\" | 9 | \"basketballplayer:4, docs:5\" | \"docs:5, basketballplayer:4\" | \"3.6.0\" | | \"storaged2\" | 9779 | \"ONLINE\" | 8 | \"basketballplayer:3, docs:5\" | \"docs:5, basketballplayer:3\" | \"3.6.0\" | +-------------+-------+----------+--------------+----------------------------------+------------------------------+---------+ nebula> SHOW HOSTS GRAPH; +-----------+------+----------+---------+--------------+---------+ | Host | Port | Status | Role | Git Info Sha | Version | +-----------+------+----------+---------+--------------+---------+ | \"graphd\" | 9669 | \"ONLINE\" | \"GRAPH\" | \"3ba41bd\" | \"3.6.0\" | | \"graphd1\" | 9669 | \"ONLINE\" | \"GRAPH\" | \"3ba41bd\" | \"3.6.0\" | | \"graphd2\" | 9669 | \"ONLINE\" | \"GRAPH\" | \"3ba41bd\" | \"3.6.0\" | +-----------+------+----------+---------+--------------+---------+ nebula> SHOW HOSTS STORAGE; +-------------+------+----------+-----------+--------------+---------+ | Host | Port | Status | Role | Git Info Sha | Version | +-------------+------+----------+-----------+--------------+---------+ | \"storaged0\" | 9779 | \"ONLINE\" | \"STORAGE\" | \"3ba41bd\" | \"3.6.0\" | | \"storaged1\" | 9779 | \"ONLINE\" | \"STORAGE\" | \"3ba41bd\" | \"3.6.0\" | | \"storaged2\" | 9779 | \"ONLINE\" | \"STORAGE\" | \"3ba41bd\" | \"3.6.0\" | +-------------+------+----------+-----------+--------------+---------+ nebula> SHOW HOSTS META; +----------+------+----------+--------+--------------+---------+ | Host | Port | Status | Role | Git Info Sha | Version | +----------+------+----------+--------+--------------+---------+ | \"metad2\" | 9559 | \"ONLINE\" | \"META\" | \"3ba41bd\" | \"3.6.0\" | | \"metad0\" | 9559 | \"ONLINE\" | \"META\" | \"3ba41bd\" | \"3.6.0\" | | \"metad1\" | 9559 | \"ONLINE\" | \"META\" | \"3ba41bd\" | \"3.6.0\" | +----------+------+----------+--------+--------------+---------+","title":"\u793a\u4f8b"},{"location":"3.ngql-guide/7.general-query-statements/6.show/7.show-index-status/","text":"SHOW INDEX STATUS \u00b6 SHOW INDEX STATUS \u8bed\u53e5\u663e\u793a\u91cd\u5efa\u539f\u751f\u7d22\u5f15\u7684\u4f5c\u4e1a\u72b6\u6001\uff0c\u4ee5\u4fbf\u786e\u5b9a\u91cd\u5efa\u7d22\u5f15\u662f\u5426\u6210\u529f\u3002 \u8bed\u6cd5 \u00b6 SHOW {TAG | EDGE} INDEX STATUS; \u793a\u4f8b \u00b6 nebula> SHOW TAG INDEX STATUS; +------------------------------------+--------------+ | Name | Index Status | +------------------------------------+--------------+ | \"date1_index\" | \"FINISHED\" | | \"basketballplayer_all_tag_indexes\" | \"FINISHED\" | | \"any_shape_geo_index\" | \"FINISHED\" | +------------------------------------+--------------+ nebula> SHOW EDGE INDEX STATUS; +----------------+--------------+ | Name | Index Status | +----------------+--------------+ | \"follow_index\" | \"FINISHED\" | +----------------+--------------+ \u76f8\u5173\u6587\u6863 \u00b6 \u7ba1\u7406\u4f5c\u4e1a REBUILD NATIVE INDEX","title":"SHOW INDEX STATUS"},{"location":"3.ngql-guide/7.general-query-statements/6.show/7.show-index-status/#show_index_status","text":"SHOW INDEX STATUS \u8bed\u53e5\u663e\u793a\u91cd\u5efa\u539f\u751f\u7d22\u5f15\u7684\u4f5c\u4e1a\u72b6\u6001\uff0c\u4ee5\u4fbf\u786e\u5b9a\u91cd\u5efa\u7d22\u5f15\u662f\u5426\u6210\u529f\u3002","title":"SHOW INDEX STATUS"},{"location":"3.ngql-guide/7.general-query-statements/6.show/7.show-index-status/#_1","text":"SHOW {TAG | EDGE} INDEX STATUS;","title":"\u8bed\u6cd5"},{"location":"3.ngql-guide/7.general-query-statements/6.show/7.show-index-status/#_2","text":"nebula> SHOW TAG INDEX STATUS; +------------------------------------+--------------+ | Name | Index Status | +------------------------------------+--------------+ | \"date1_index\" | \"FINISHED\" | | \"basketballplayer_all_tag_indexes\" | \"FINISHED\" | | \"any_shape_geo_index\" | \"FINISHED\" | +------------------------------------+--------------+ nebula> SHOW EDGE INDEX STATUS; +----------------+--------------+ | Name | Index Status | +----------------+--------------+ | \"follow_index\" | \"FINISHED\" | +----------------+--------------+","title":"\u793a\u4f8b"},{"location":"3.ngql-guide/7.general-query-statements/6.show/7.show-index-status/#_3","text":"\u7ba1\u7406\u4f5c\u4e1a REBUILD NATIVE INDEX","title":"\u76f8\u5173\u6587\u6863"},{"location":"3.ngql-guide/7.general-query-statements/6.show/8.show-indexes/","text":"SHOW INDEXES \u00b6 SHOW INDEXES \u8bed\u53e5\u53ef\u4ee5\u5217\u51fa\u5f53\u524d\u56fe\u7a7a\u95f4\u5185\u7684\u6240\u6709 Tag \u548c Edge type\uff08\u5305\u62ec\u5c5e\u6027\uff09\u7684\u7d22\u5f15\u3002 \u8bed\u6cd5 \u00b6 SHOW {TAG | EDGE} INDEXES; \u793a\u4f8b \u00b6 nebula> SHOW TAG INDEXES; +------------------+----------+----------+ | Index Name | By Tag | Columns | +------------------+----------+----------+ | \"player_index_0\" | \"player\" | [] | | \"player_index_1\" | \"player\" | [\"name\"] | +------------------+----------+----------+ nebula> SHOW EDGE INDEXES; +----------------+----------+---------+ | Index Name | By Edge | Columns | +----------------+----------+---------+ | \"follow_index\" | \"follow\" | [] | +----------------+----------+---------+ \u5386\u53f2\u7248\u672c\u517c\u5bb9\u6027 NebulaGraph 2.0.1 \u4e2d\uff0c SHOW TAG/EDGE INDEXES \u8bed\u53e5\u4ec5\u8fd4\u56de Names \u3002","title":"SHOW INDEXES"},{"location":"3.ngql-guide/7.general-query-statements/6.show/8.show-indexes/#show_indexes","text":"SHOW INDEXES \u8bed\u53e5\u53ef\u4ee5\u5217\u51fa\u5f53\u524d\u56fe\u7a7a\u95f4\u5185\u7684\u6240\u6709 Tag \u548c Edge type\uff08\u5305\u62ec\u5c5e\u6027\uff09\u7684\u7d22\u5f15\u3002","title":"SHOW INDEXES"},{"location":"3.ngql-guide/7.general-query-statements/6.show/8.show-indexes/#_1","text":"SHOW {TAG | EDGE} INDEXES;","title":"\u8bed\u6cd5"},{"location":"3.ngql-guide/7.general-query-statements/6.show/8.show-indexes/#_2","text":"nebula> SHOW TAG INDEXES; +------------------+----------+----------+ | Index Name | By Tag | Columns | +------------------+----------+----------+ | \"player_index_0\" | \"player\" | [] | | \"player_index_1\" | \"player\" | [\"name\"] | +------------------+----------+----------+ nebula> SHOW EDGE INDEXES; +----------------+----------+---------+ | Index Name | By Edge | Columns | +----------------+----------+---------+ | \"follow_index\" | \"follow\" | [] | +----------------+----------+---------+ \u5386\u53f2\u7248\u672c\u517c\u5bb9\u6027 NebulaGraph 2.0.1 \u4e2d\uff0c SHOW TAG/EDGE INDEXES \u8bed\u53e5\u4ec5\u8fd4\u56de Names \u3002","title":"\u793a\u4f8b"},{"location":"3.ngql-guide/7.general-query-statements/6.show/9.show-parts/","text":"SHOW PARTS \u00b6 SHOW PARTS \u8bed\u53e5\u663e\u793a\u56fe\u7a7a\u95f4\u4e2d\u6307\u5b9a\u5206\u7247\u6216\u6240\u6709\u5206\u7247\u7684\u4fe1\u606f\u3002 \u8bed\u6cd5 \u00b6 SHOW PARTS [<part_id>]; \u793a\u4f8b \u00b6 nebula> SHOW PARTS; +--------------+--------------------+--------------------+-------+ | Partition ID | Leader | Peers | Losts | +--------------+--------------------+--------------------+-------+ | 1 | \"192.168.2.1:9779\" | \"192.168.2.1:9779\" | \"\" | | 2 | \"192.168.2.2:9779\" | \"192.168.2.2:9779\" | \"\" | | 3 | \"192.168.2.3:9779\" | \"192.168.2.3:9779\" | \"\" | | 4 | \"192.168.2.1:9779\" | \"192.168.2.1:9779\" | \"\" | | 5 | \"192.168.2.2:9779\" | \"192.168.2.2:9779\" | \"\" | | 6 | \"192.168.2.3:9779\" | \"192.168.2.3:9779\" | \"\" | | 7 | \"192.168.2.1:9779\" | \"192.168.2.1:9779\" | \"\" | | 8 | \"192.168.2.2:9779\" | \"192.168.2.2:9779\" | \"\" | | 9 | \"192.168.2.3:9779\" | \"192.168.2.3:9779\" | \"\" | | 10 | \"192.168.2.1:9779\" | \"192.168.2.1:9779\" | \"\" | +--------------+--------------------+--------------------+-------+ nebula> SHOW PARTS 1; +--------------+--------------------+--------------------+-------+ | Partition ID | Leader | Peers | Losts | +--------------+--------------------+--------------------+-------+ | 1 | \"192.168.2.1:9779\" | \"192.168.2.1:9779\" | \"\" | +--------------+--------------------+--------------------+-------+ \u8fd4\u56de\u7ed3\u679c\u7684\u8bf4\u660e\u5982\u4e0b\uff1a \u53c2\u6570 \u8bf4\u660e Partition ID \u5b58\u50a8\u5206\u7247\u7684 ID Leader \u5206\u7247\u5bf9\u5e94\u7684 Raft leader \u526f\u672c\u7684\u4fe1\u606f\uff0c\u5305\u62ec IP \u5730\u5740\u4e0e\u670d\u52a1\u7aef\u53e3 Peers \u5206\u7247\u5bf9\u5e94\u7684\u6240\u6709\u526f\u672c\uff08leader \u4e0e follower\uff09\u7684\u4fe1\u606f\uff0c\u5305\u62ec IP \u5730\u5740\u4e0e\u670d\u52a1\u7aef\u53e3 Losts \u5206\u7247\u5bf9\u5e94\u7684\u5904\u4e8e\u79bb\u7ebf\u72b6\u6001\u7684\u526f\u672c\u4fe1\u606f\uff0c\u5305\u62ec IP \u5730\u5740\u548c\u670d\u52a1\u7aef\u53e3","title":"SHOW PARTS"},{"location":"3.ngql-guide/7.general-query-statements/6.show/9.show-parts/#show_parts","text":"SHOW PARTS \u8bed\u53e5\u663e\u793a\u56fe\u7a7a\u95f4\u4e2d\u6307\u5b9a\u5206\u7247\u6216\u6240\u6709\u5206\u7247\u7684\u4fe1\u606f\u3002","title":"SHOW PARTS"},{"location":"3.ngql-guide/7.general-query-statements/6.show/9.show-parts/#_1","text":"SHOW PARTS [<part_id>];","title":"\u8bed\u6cd5"},{"location":"3.ngql-guide/7.general-query-statements/6.show/9.show-parts/#_2","text":"nebula> SHOW PARTS; +--------------+--------------------+--------------------+-------+ | Partition ID | Leader | Peers | Losts | +--------------+--------------------+--------------------+-------+ | 1 | \"192.168.2.1:9779\" | \"192.168.2.1:9779\" | \"\" | | 2 | \"192.168.2.2:9779\" | \"192.168.2.2:9779\" | \"\" | | 3 | \"192.168.2.3:9779\" | \"192.168.2.3:9779\" | \"\" | | 4 | \"192.168.2.1:9779\" | \"192.168.2.1:9779\" | \"\" | | 5 | \"192.168.2.2:9779\" | \"192.168.2.2:9779\" | \"\" | | 6 | \"192.168.2.3:9779\" | \"192.168.2.3:9779\" | \"\" | | 7 | \"192.168.2.1:9779\" | \"192.168.2.1:9779\" | \"\" | | 8 | \"192.168.2.2:9779\" | \"192.168.2.2:9779\" | \"\" | | 9 | \"192.168.2.3:9779\" | \"192.168.2.3:9779\" | \"\" | | 10 | \"192.168.2.1:9779\" | \"192.168.2.1:9779\" | \"\" | +--------------+--------------------+--------------------+-------+ nebula> SHOW PARTS 1; +--------------+--------------------+--------------------+-------+ | Partition ID | Leader | Peers | Losts | +--------------+--------------------+--------------------+-------+ | 1 | \"192.168.2.1:9779\" | \"192.168.2.1:9779\" | \"\" | +--------------+--------------------+--------------------+-------+ \u8fd4\u56de\u7ed3\u679c\u7684\u8bf4\u660e\u5982\u4e0b\uff1a \u53c2\u6570 \u8bf4\u660e Partition ID \u5b58\u50a8\u5206\u7247\u7684 ID Leader \u5206\u7247\u5bf9\u5e94\u7684 Raft leader \u526f\u672c\u7684\u4fe1\u606f\uff0c\u5305\u62ec IP \u5730\u5740\u4e0e\u670d\u52a1\u7aef\u53e3 Peers \u5206\u7247\u5bf9\u5e94\u7684\u6240\u6709\u526f\u672c\uff08leader \u4e0e follower\uff09\u7684\u4fe1\u606f\uff0c\u5305\u62ec IP \u5730\u5740\u4e0e\u670d\u52a1\u7aef\u53e3 Losts \u5206\u7247\u5bf9\u5e94\u7684\u5904\u4e8e\u79bb\u7ebf\u72b6\u6001\u7684\u526f\u672c\u4fe1\u606f\uff0c\u5305\u62ec IP \u5730\u5740\u548c\u670d\u52a1\u7aef\u53e3","title":"\u793a\u4f8b"},{"location":"3.ngql-guide/8.clauses-and-options/group-by/","text":"GROUP BY \u00b6 GROUP BY \u5b50\u53e5\u53ef\u4ee5\u7528\u4e8e\u805a\u5408\u6570\u636e\u3002 openCypher \u517c\u5bb9\u6027 \u00b6 \u672c\u6587\u64cd\u4f5c\u4ec5\u9002\u7528\u4e8e\u539f\u751f nGQL\u3002 \u7528\u6237\u4e5f\u53ef\u4ee5\u4f7f\u7528 openCypher \u65b9\u5f0f\u7684 count() \u51fd\u6570\u805a\u5408\u6570\u636e\u3002 nebula> MATCH (v:player)<-[:follow]-(:player) RETURN v.player.name AS Name, count(*) as cnt ORDER BY cnt DESC; +----------------------+-----+ | Name | cnt | +----------------------+-----+ | \"Tim Duncan\" | 10 | | \"LeBron James\" | 6 | | \"Tony Parker\" | 5 | | \"Chris Paul\" | 4 | | \"Manu Ginobili\" | 4 | +----------------------+-----+ ... \u8bed\u6cd5 \u00b6 GROUP BY \u5b50\u53e5\u53ef\u4ee5\u805a\u5408\u76f8\u540c\u503c\u7684\u884c\uff0c\u7136\u540e\u8fdb\u884c\u8ba1\u6570\u3001\u6392\u5e8f\u548c\u8ba1\u7b97\u7b49\u64cd\u4f5c\u3002 GROUP BY \u5b50\u53e5\u53ef\u4ee5\u5728\u7ba1\u9053\u7b26\uff08|\uff09\u4e4b\u540e\u548c YIELD \u5b50\u53e5\u4e4b\u524d\u4f7f\u7528\u3002 | GROUP BY <var> YIELD <var>, <aggregation_function(var)> aggregation_function() \u51fd\u6570\u652f\u6301 avg() \u3001 sum() \u3001 max() \u3001 min() \u3001 count() \u3001 collect() \u3001 std() \u3002 \u793a\u4f8b \u00b6 # \u67e5\u627e\u6240\u6709\u8fde\u63a5\u5230 player100 \u7684\u70b9\uff0c\u5e76\u6839\u636e\u4ed6\u4eec\u7684\u59d3\u540d\u8fdb\u884c\u5206\u7ec4\uff0c\u8fd4\u56de\u59d3\u540d\u7684\u51fa\u73b0\u6b21\u6570\u3002 nebula> GO FROM \"player100\" OVER follow BIDIRECT \\ YIELD properties($$).name as Name \\ | GROUP BY $-.Name \\ YIELD $-.Name as Player, count(*) AS Name_Count; +---------------------+------------+ | Player | Name_Count | +---------------------+------------+ | \"Shaquille O'Neal\" | 1 | | \"Tiago Splitter\" | 1 | | \"Manu Ginobili\" | 2 | | \"Boris Diaw\" | 1 | | \"LaMarcus Aldridge\" | 1 | | \"Tony Parker\" | 2 | | \"Marco Belinelli\" | 1 | | \"Dejounte Murray\" | 1 | | \"Danny Green\" | 1 | | \"Aron Baynes\" | 1 | +---------------------+------------+ # \u67e5\u627e\u6240\u6709\u8fde\u63a5\u5230 player100 \u7684\u70b9\uff0c\u5e76\u6839\u636e\u8d77\u59cb\u70b9\u8fdb\u884c\u5206\u7ec4\uff0c\u8fd4\u56de degree \u7684\u603b\u548c\u3002 nebula> GO FROM \"player100\" OVER follow \\ YIELD src(edge) AS player, properties(edge).degree AS degree \\ | GROUP BY $-.player \\ YIELD sum($-.degree); +----------------+ | sum($-.degree) | +----------------+ | 190 | +----------------+ sum() \u51fd\u6570\u8be6\u60c5\u8bf7\u53c2\u89c1 \u5185\u7f6e\u6570\u5b66\u51fd\u6570 \u3002 \u9690\u5f0f\u5206\u7ec4 \u00b6 \u5728\u4e0a\u8ff0 nGQL \u8bed\u53e5\u4e2d\u660e\u786e\u5199\u51fa GROUP BY \u5e76\u8d77\u5230\u5206\u7ec4\u5b57\u6bb5\u4f5c\u7528\u7684\u7528\u6cd5\u79f0\u4e3a GROUP BY \u663e\u793a\u7528\u6cd5\uff1b\u800c\u5728 openCypher \u8bed\u53e5\u4e2d GROUP BY \u7684\u7528\u6cd5\u662f\u9690\u5f0f\u7684\uff0c\u5373\u5728\u8bed\u53e5\u4e2d\u4e0d\u7528\u5199\u51fa GROUP BY \u4e5f\u53ef\u8d77\u5230\u5206\u7ec4\u5b57\u6bb5\u7684\u4f5c\u7528\u3002nGQL \u8bed\u53e5\u4e2d\u663e\u793a\u5730 GROUP BY \u7528\u6cd5\u4e0e openCypher \u8bed\u53e5\u4e2d\u7684\u9690\u5f0f\u5730 GROUP BY \u7528\u6cd5\u76f8\u540c\uff0c\u5e76\u4e14 nGQL \u8bed\u53e5\u517c\u5bb9 openCypher \u7684\u7528\u6cd5\uff0c\u5373\u4e5f\u652f\u6301\u9690\u5f0f\u5730\u4f7f\u7528 GROUP BY \u3002\u6709\u5173 GROUP BY \u7684\u9690\u5f0f\u7528\u6cd5\uff0c\u8bf7\u53c2\u89c1 how-to-make-group-by-in-a-cypher-query \u3002 \u4f8b\u5982\uff1a\u67e5\u8be2 34 \u5c81\u4ee5\u4e0a\u7684\u7403\u5458\u4e2d\u5b8c\u5168\u91cd\u53e0\u670d\u5f79\u7684\u533a\u95f4\u3002 nebula> LOOKUP ON player WHERE player.age > 34 YIELD id(vertex) AS v | \\ GO FROM $-.v OVER serve YIELD serve.start_year AS start_year, serve.end_year AS end_year | \\ YIELD $-.start_year, $-.end_year, count(*) AS count | \\ ORDER BY $-.count DESC | LIMIT 5; +---------------+-------------+-------+ | $-.start_year | $-.end_year | count | +---------------+-------------+-------+ | 2018 | 2019 | 3 | | 2007 | 2012 | 2 | | 1998 | 2004 | 2 | | 2017 | 2018 | 2 | | 2010 | 2011 | 2 | +---------------+-------------+-------+","title":"GROUP BY"},{"location":"3.ngql-guide/8.clauses-and-options/group-by/#group_by","text":"GROUP BY \u5b50\u53e5\u53ef\u4ee5\u7528\u4e8e\u805a\u5408\u6570\u636e\u3002","title":"GROUP BY"},{"location":"3.ngql-guide/8.clauses-and-options/group-by/#opencypher","text":"\u672c\u6587\u64cd\u4f5c\u4ec5\u9002\u7528\u4e8e\u539f\u751f nGQL\u3002 \u7528\u6237\u4e5f\u53ef\u4ee5\u4f7f\u7528 openCypher \u65b9\u5f0f\u7684 count() \u51fd\u6570\u805a\u5408\u6570\u636e\u3002 nebula> MATCH (v:player)<-[:follow]-(:player) RETURN v.player.name AS Name, count(*) as cnt ORDER BY cnt DESC; +----------------------+-----+ | Name | cnt | +----------------------+-----+ | \"Tim Duncan\" | 10 | | \"LeBron James\" | 6 | | \"Tony Parker\" | 5 | | \"Chris Paul\" | 4 | | \"Manu Ginobili\" | 4 | +----------------------+-----+ ...","title":"openCypher \u517c\u5bb9\u6027"},{"location":"3.ngql-guide/8.clauses-and-options/group-by/#_1","text":"GROUP BY \u5b50\u53e5\u53ef\u4ee5\u805a\u5408\u76f8\u540c\u503c\u7684\u884c\uff0c\u7136\u540e\u8fdb\u884c\u8ba1\u6570\u3001\u6392\u5e8f\u548c\u8ba1\u7b97\u7b49\u64cd\u4f5c\u3002 GROUP BY \u5b50\u53e5\u53ef\u4ee5\u5728\u7ba1\u9053\u7b26\uff08|\uff09\u4e4b\u540e\u548c YIELD \u5b50\u53e5\u4e4b\u524d\u4f7f\u7528\u3002 | GROUP BY <var> YIELD <var>, <aggregation_function(var)> aggregation_function() \u51fd\u6570\u652f\u6301 avg() \u3001 sum() \u3001 max() \u3001 min() \u3001 count() \u3001 collect() \u3001 std() \u3002","title":"\u8bed\u6cd5"},{"location":"3.ngql-guide/8.clauses-and-options/group-by/#_2","text":"# \u67e5\u627e\u6240\u6709\u8fde\u63a5\u5230 player100 \u7684\u70b9\uff0c\u5e76\u6839\u636e\u4ed6\u4eec\u7684\u59d3\u540d\u8fdb\u884c\u5206\u7ec4\uff0c\u8fd4\u56de\u59d3\u540d\u7684\u51fa\u73b0\u6b21\u6570\u3002 nebula> GO FROM \"player100\" OVER follow BIDIRECT \\ YIELD properties($$).name as Name \\ | GROUP BY $-.Name \\ YIELD $-.Name as Player, count(*) AS Name_Count; +---------------------+------------+ | Player | Name_Count | +---------------------+------------+ | \"Shaquille O'Neal\" | 1 | | \"Tiago Splitter\" | 1 | | \"Manu Ginobili\" | 2 | | \"Boris Diaw\" | 1 | | \"LaMarcus Aldridge\" | 1 | | \"Tony Parker\" | 2 | | \"Marco Belinelli\" | 1 | | \"Dejounte Murray\" | 1 | | \"Danny Green\" | 1 | | \"Aron Baynes\" | 1 | +---------------------+------------+ # \u67e5\u627e\u6240\u6709\u8fde\u63a5\u5230 player100 \u7684\u70b9\uff0c\u5e76\u6839\u636e\u8d77\u59cb\u70b9\u8fdb\u884c\u5206\u7ec4\uff0c\u8fd4\u56de degree \u7684\u603b\u548c\u3002 nebula> GO FROM \"player100\" OVER follow \\ YIELD src(edge) AS player, properties(edge).degree AS degree \\ | GROUP BY $-.player \\ YIELD sum($-.degree); +----------------+ | sum($-.degree) | +----------------+ | 190 | +----------------+ sum() \u51fd\u6570\u8be6\u60c5\u8bf7\u53c2\u89c1 \u5185\u7f6e\u6570\u5b66\u51fd\u6570 \u3002","title":"\u793a\u4f8b"},{"location":"3.ngql-guide/8.clauses-and-options/group-by/#_3","text":"\u5728\u4e0a\u8ff0 nGQL \u8bed\u53e5\u4e2d\u660e\u786e\u5199\u51fa GROUP BY \u5e76\u8d77\u5230\u5206\u7ec4\u5b57\u6bb5\u4f5c\u7528\u7684\u7528\u6cd5\u79f0\u4e3a GROUP BY \u663e\u793a\u7528\u6cd5\uff1b\u800c\u5728 openCypher \u8bed\u53e5\u4e2d GROUP BY \u7684\u7528\u6cd5\u662f\u9690\u5f0f\u7684\uff0c\u5373\u5728\u8bed\u53e5\u4e2d\u4e0d\u7528\u5199\u51fa GROUP BY \u4e5f\u53ef\u8d77\u5230\u5206\u7ec4\u5b57\u6bb5\u7684\u4f5c\u7528\u3002nGQL \u8bed\u53e5\u4e2d\u663e\u793a\u5730 GROUP BY \u7528\u6cd5\u4e0e openCypher \u8bed\u53e5\u4e2d\u7684\u9690\u5f0f\u5730 GROUP BY \u7528\u6cd5\u76f8\u540c\uff0c\u5e76\u4e14 nGQL \u8bed\u53e5\u517c\u5bb9 openCypher \u7684\u7528\u6cd5\uff0c\u5373\u4e5f\u652f\u6301\u9690\u5f0f\u5730\u4f7f\u7528 GROUP BY \u3002\u6709\u5173 GROUP BY \u7684\u9690\u5f0f\u7528\u6cd5\uff0c\u8bf7\u53c2\u89c1 how-to-make-group-by-in-a-cypher-query \u3002 \u4f8b\u5982\uff1a\u67e5\u8be2 34 \u5c81\u4ee5\u4e0a\u7684\u7403\u5458\u4e2d\u5b8c\u5168\u91cd\u53e0\u670d\u5f79\u7684\u533a\u95f4\u3002 nebula> LOOKUP ON player WHERE player.age > 34 YIELD id(vertex) AS v | \\ GO FROM $-.v OVER serve YIELD serve.start_year AS start_year, serve.end_year AS end_year | \\ YIELD $-.start_year, $-.end_year, count(*) AS count | \\ ORDER BY $-.count DESC | LIMIT 5; +---------------+-------------+-------+ | $-.start_year | $-.end_year | count | +---------------+-------------+-------+ | 2018 | 2019 | 3 | | 2007 | 2012 | 2 | | 1998 | 2004 | 2 | | 2017 | 2018 | 2 | | 2010 | 2011 | 2 | +---------------+-------------+-------+","title":"\u9690\u5f0f\u5206\u7ec4"},{"location":"3.ngql-guide/8.clauses-and-options/joins/","text":"INNER JOIN \u00b6 INNER JOIN \u662f\u4e00\u79cd\u8fde\u63a5\u67e5\u8be2\u3002\u5b83\u57fa\u4e8e\u4e24\u4e2a\u8868\u4e4b\u95f4\u7684\u5171\u540c\u5217\u503c\u8fdb\u884c\u5339\u914d\uff0c\u5e76\u8fd4\u56de\u6ee1\u8db3\u6761\u4ef6\u7684\u8bb0\u5f55\u3002 INNER JOIN \u901a\u5e38\u7528\u4e8e\u6839\u636e\u5173\u8054\u5217\u7684\u503c\u6765\u521b\u5efa\u4e00\u4e2a\u5305\u542b\u4e24\u4e2a\u8868\u7684\u7ed3\u679c\u96c6\u3002\u5728NebulaGraph\u4e2d\uff0c\u53ef\u4ee5\u663e\u793a\u5730\u4f7f\u7528 INNER JOIN \u5b50\u53e5\u5728\u4e24\u4e2a\u8868\u4e4b\u95f4\u8fdb\u884c\u8fde\u63a5\u67e5\u8be2\uff0c\u4ee5\u83b7\u53d6\u66f4\u52a0\u590d\u6742\u7684\u67e5\u8be2\u7ed3\u679c\u3002 Note \u5728 nGQL \u8bed\u53e5\u4e2d\uff0c GO \u7684\u591a\u8df3\u67e5\u8be2\u9690\u5f0f\u5730\u4f7f\u7528\u4e86 INNER JOIN \u5b50\u53e5\u3002\u4f8b\u5982\uff0c GO 1 TO 2 STEPS FROM \"player101\" OVER follow YIELD $$.player.name AS name, $$.player.age AS age \u8bed\u53e5\u4e2d\uff0c GO \u5b50\u53e5\u9690\u5f0f\u5730\u4f7f\u7528\u4e86 INNER JOIN \u5b50\u53e5\uff0c\u5c06\u4ece player101 \u51fa\u53d1\u6cbf follow \u8fb9\u7b2c\u4e00\u6b65\u67e5\u8be2\u7684\u7ed3\u679c\u5217\u548c\u7b2c\u4e8c\u6b65\u67e5\u8be2\u7684\u8d77\u70b9\u5217\u8fdb\u884c\u5339\u914d\uff0c\u7136\u540e\u57fa\u4e8e\u5339\u914d\u7ed3\u679c\u8fd4\u56de name \u548c age \u3002 openCypher \u517c\u5bb9\u6027 \u00b6 INNER JOIN \u5b50\u53e5\u4ec5\u9002\u7528\u4e8e\u539f\u751f nGQL \u8bed\u6cd5\u3002 \u8bed\u6cd5 \u00b6 YIELD <column_name_list> FROM <first_table> INNER JOIN <second_table> ON <join_condition> \u4f7f\u7528\u8bf4\u660e \u00b6 \u5fc5\u987b\u4f7f\u7528 YIELD \u5b50\u53e5\u6307\u5b9a\u8fd4\u56de\u7684\u5217\uff0c\u5e76\u4e14 YIELD \u5b50\u53e5\u9700\u653e\u7f6e\u5728 INNER JOIN \u5b50\u53e5\u4e4b\u524d\u3002 \u4f7f\u7528 FROM \u5b50\u53e5\u6307\u5b9a\u8981\u8fde\u63a5\u7684\u4e24\u4e2a\u8868\u3002 INNER JOIN \u5b50\u53e5\u5fc5\u987b\u5305\u542b ON \u5b50\u53e5\uff0c ON \u5b50\u53e5\u6307\u5b9a\u4e86\u8fde\u63a5\u6761\u4ef6\uff0c\u5e76\u4e14\u8fde\u63a5\u6761\u4ef6\u53ea\u652f\u6301\u7b49\u503c\u8fde\u63a5\uff08\u5373 == \uff09\u3002 <first_table> \u548c <second_table> \u662f\u8981\u8fde\u63a5\u7684\u4e24\u4e2a\u8868\uff0c\u4e24\u8868\u540d\u4e0d\u80fd\u76f8\u540c\u3002 \u4f7f\u7528\u81ea\u5b9a\u4e49\u53d8\u91cf\u6765\u6307\u5b9a\u8868\u540d\u3002\u8be6\u60c5\u53c2\u89c1 \u4f7f\u7528\u81ea\u5b9a\u4e49\u53d8\u91cf \u3002 \u4f7f\u7528\u793a\u4f8b \u00b6 \u4ee5\u4e0b\u793a\u4f8b\u4ecb\u7ecd\u5982\u4f55\u901a\u8fc7 INNER JOIN \u5173\u8054 nGQL \u8bed\u53e5\u4e2d\u7684\u4e24\u4e2a\u67e5\u8be2\u7ed3\u679c\u3002 \u793a\u4f8b\u4e00\uff1a\u901a\u8fc7 INNER JOIN \u5c06\u7b2c\u4e00\u4e2a LOOKUP \u67e5\u8be2\u4e2d\u7684\u7ed3\u679c dst \u5217\uff08 Tony Parker \u7684 ID player101 \uff09\u548c\u7b2c\u4e8c\u4e2a GO \u67e5\u8be2\u4e2d\u7684\u7ed3\u679c src \u5217\uff08 player101 \u548c player125 \u4e24\u4e2a ID\uff09\u8fdb\u884c\u5339\u914d\u3002\u5339\u914d\u7684\u7ed3\u679c\u96c6\u4e3a\u4e24\u4e2a\u67e5\u8be2\u7ed3\u679c\u4e2d dst \u548c src \u5217\u90fd\u5305\u542b\u7684 player101 \uff0c\u57fa\u4e8e\u8fd9\u4e2a player101 \u5339\u914d\u7684\u7ed3\u679c\uff0c\u7136\u540e\u901a\u8fc7 YIELD $b.vid AS vid, $a.v AS v, $b.e2 AS e2 \u8fd4\u56de\u6700\u7ec8\u67e5\u8be2\u7ed3\u679c\u3002 nebula> $a = LOOKUP ON player WHERE player.name == 'Tony Parker' YIELD id(vertex) as dst, vertex AS v; \\ $b = GO FROM 'player101', 'player125' OVER follow YIELD id($^) as src, id($$) as vid, edge AS e2; \\ YIELD $b.vid AS vid, $a.v AS v, $b.e2 AS e2 FROM $a INNER JOIN $b ON $a.dst == $b.src; +-------------+-----------------------------------------------------+----------------------------------------------------+ | vid | v | e2 | +-------------+-----------------------------------------------------+----------------------------------------------------+ | \"player100\" | (\"player101\" :player{age: 36, name: \"Tony Parker\"}) | [:follow \"player101\"->\"player100\" @0 {degree: 95}] | | \"player102\" | (\"player101\" :player{age: 36, name: \"Tony Parker\"}) | [:follow \"player101\"->\"player102\" @0 {degree: 90}] | | \"player125\" | (\"player101\" :player{age: 36, name: \"Tony Parker\"}) | [:follow \"player101\"->\"player125\" @0 {degree: 95}] | +-------------+-----------------------------------------------------+----------------------------------------------------+ \u793a\u4f8b\u4e8c\uff1a\u901a\u8fc7 INNER JOIN \u5c06\u7b2c\u4e00\u4e2a LOOKUP \u67e5\u8be2\u4e2d\u7684\u7ed3\u679c src \u5217\uff08 Tony Parker \u7684 ID player101 \uff09\u548c\u7b2c\u4e8c\u4e2a FETCH \u67e5\u8be2\u4e2d\u7684\u7ed3\u679c src \u5217\uff08 player101 \u5230 player100 \u7684\u8d77\u70b9 ID player101 \uff09\u8fdb\u884c\u5339\u914d\u3002\u5339\u914d\u7684\u7ed3\u679c\u96c6\u4e3a\u90fd\u5305\u542b\u7684 player101 \uff0c\u57fa\u4e8e\u8fd9\u4e2a player101 \u5339\u914d\u7684\u7ed3\u679c\uff0c\u7136\u540e\u901a\u8fc7 YIELD $a.src AS src, $a.v AS v, $b.e AS e \u8fd4\u56de\u6700\u7ec8\u67e5\u8be2\u7ed3\u679c\u3002 nebula> $a = LOOKUP ON player WHERE player.name == 'Tony Parker' YIELD id(vertex) as src, vertex AS v; \\ $b = FETCH PROP ON follow 'player101'->'player100' YIELD src(edge) as src, edge as e; \\ YIELD $a.src AS src, $a.v AS v, $b.e AS e FROM $a INNER JOIN $b ON $a.src == $b.src; +-------------+-----------------------------------------------------+----------------------------------------------------+ | src | v | e | +-------------+-----------------------------------------------------+----------------------------------------------------+ | \"player101\" | (\"player101\" :player{age: 36, name: \"Tony Parker\"}) | [:follow \"player101\"->\"player100\" @0 {degree: 95}] | +-------------+-----------------------------------------------------+----------------------------------------------------+ \u793a\u4f8b\u4e09\uff1a\u4f7f\u7528 INNER JOIN \u5173\u8054 LOOKUP \u3001 GO \u548c FIND PATH \u5b50\u53e5\u7684\u67e5\u8be2\u7684\u8fc7\u7a0b\u793a\u4f8b\u6b65\u9aa4\uff1a \u901a\u8fc7 LOOKUP ON \u8bed\u53e5\uff0c\u5148\u5bf9 player \u8868\u8fdb\u884c\u67e5\u8be2\uff0c\u627e\u5230\u540d\u4e3a Tony Parker \u7684\u7403\u5458\u9876\u70b9\uff0c\u5e76\u5c06\u5176 ID \u548c\u5c5e\u6027\u5b58\u50a8\u5230 $a.src \u548c v \u5217\u4e2d\u3002 \u518d\u901a\u8fc7 GO \u67e5\u627e\u4ece $a.src \u8282\u70b9\u51fa\u53d1\u7ecf\u8fc7 follow \u8fb9\u5f80\u5916\u8d70 2-5 \u6b65\u7684\u7403\u5458\u8282\u70b9\uff0c\u5176\u4e2d\u8981\u6c42\u8fd9\u4e9b\u8282\u70b9\u5bf9\u5e94\u7684 player \u70b9\u5e74\u9f84\u5927\u4e8e 30 \u5c81\uff0c\u8fd4\u56de\u8fd9\u4e9b\u8282\u70b9\u7684 ID\uff0c\u5e76\u5c06\u5b83\u4eec\u5b58\u50a8\u5728 $b.dst \u5217\u4e2d\u3002 \u7136\u540e\u901a\u8fc7 FIND ALL PATH \u8bed\u53e5\uff0c\u67e5\u627e\u4ece $a.src \u5230 $b.dst \u7684\u6cbf follow \u6240\u6709\u8def\u5f84\uff0c\u5e76\u8fd4\u56de\u8def\u5f84 $c.p \u4ee5\u53ca\u8def\u5f84\u4e2d\u7684\u7ec8\u70b9 $c.dst \u3002 \u6700\u540e\u901a\u8fc7 FIND SHORTEST PATH \u8bed\u53e5\uff0c\u67e5\u627e\u4ece $c.dst \u5230 $a.src \u7684\u6700\u77ed\u8def\u5f84\uff0c\u5e76\u8fd4\u56de\u8def\u5f84 $d.p \u548c\u8def\u5f84\u8d77\u70b9 $d.src \u3002 \u4f7f\u7528 INNER JOIN \u5c06 3 \u548c 4 \u4e2d\u5f97\u5230\u7684\u7ed3\u679c\u8054\u63a5\u8d77\u6765\uff0c\u5339\u914d $c.dst \u548c $d.src \u5217\uff0c\u4e3a\u6bcf\u4e2a\u8054\u63a5\u5339\u914d\u7684\u8bb0\u5f55\u8fd4\u56de YIELD $c.forward AS forwardPath, $c.dst AS end, $d.p AS backwordPath \u3002 nebula> $a = LOOKUP ON player WHERE player.name == 'Tony Parker' YIELD id(vertex) as src, vertex AS v; \\ $b = GO 2 TO 5 STEPS FROM $a.src OVER follow WHERE $$.player.age > 30 YIELD id($$) AS dst; \\ $c = (FIND ALL PATH FROM $a.src TO $b.dst OVER follow YIELD path AS p | YIELD $-.p AS forward, id(endNode($-.p)) AS dst); \\ $d = (FIND SHORTEST PATH FROM $c.dst TO $a.src OVER follow YIELD path AS p | YIELD $-.p AS p, id(startNode($-.p)) AS src); \\ YIELD $c.forward AS forwardPath, $c.dst AS end, $d.p AS backwordPath FROM $c INNER JOIN $d ON $c.dst == $d.src; +-----------------------------------------------------------------------------------------------------------------------------------------------------------------------+-------------+-----------------------------------------------------------------------------+ | forwardPath | end | backwordPath | +-----------------------------------------------------------------------------------------------------------------------------------------------------------------------+-------------+-----------------------------------------------------------------------------+ | <(\"player101\")-[:follow@0 {}]->(\"player102\")> | \"player102\" | <(\"player102\")-[:follow@0 {}]->(\"player101\")> | | <(\"player101\")-[:follow@0 {}]->(\"player100\")-[:follow@0 {}]->(\"player101\")-[:follow@0 {}]->(\"player102\")> | \"player102\" | <(\"player102\")-[:follow@0 {}]->(\"player101\")> | | <(\"player101\")-[:follow@0 {}]->(\"player125\")> | \"player125\" | <(\"player125\")-[:follow@0 {}]->(\"player100\")-[:follow@0 {}]->(\"player101\")> | | <(\"player101\")-[:follow@0 {}]->(\"player100\")-[:follow@0 {}]->(\"player125\")> | \"player125\" | <(\"player125\")-[:follow@0 {}]->(\"player100\")-[:follow@0 {}]->(\"player101\")> | | <(\"player101\")-[:follow@0 {}]->(\"player100\")-[:follow@0 {}]->(\"player101\")-[:follow@0 {}]->(\"player125\")> | \"player125\" | <(\"player125\")-[:follow@0 {}]->(\"player100\")-[:follow@0 {}]->(\"player101\")> | | <(\"player101\")-[:follow@0 {}]->(\"player102\")-[:follow@0 {}]->(\"player100\")-[:follow@0 {}]->(\"player125\")> | \"player125\" | <(\"player125\")-[:follow@0 {}]->(\"player100\")-[:follow@0 {}]->(\"player101\")> | | <(\"player101\")-[:follow@0 {}]->(\"player102\")-[:follow@0 {}]->(\"player101\")-[:follow@0 {}]->(\"player125\")> | \"player125\" | <(\"player125\")-[:follow@0 {}]->(\"player100\")-[:follow@0 {}]->(\"player101\")> | ... +-----------------------------------------------------------------------------------------------------------------------------------------------------------------------+-------------+-----------------------------------------------------------------------------+","title":"INNER JOIN"},{"location":"3.ngql-guide/8.clauses-and-options/joins/#inner_join","text":"INNER JOIN \u662f\u4e00\u79cd\u8fde\u63a5\u67e5\u8be2\u3002\u5b83\u57fa\u4e8e\u4e24\u4e2a\u8868\u4e4b\u95f4\u7684\u5171\u540c\u5217\u503c\u8fdb\u884c\u5339\u914d\uff0c\u5e76\u8fd4\u56de\u6ee1\u8db3\u6761\u4ef6\u7684\u8bb0\u5f55\u3002 INNER JOIN \u901a\u5e38\u7528\u4e8e\u6839\u636e\u5173\u8054\u5217\u7684\u503c\u6765\u521b\u5efa\u4e00\u4e2a\u5305\u542b\u4e24\u4e2a\u8868\u7684\u7ed3\u679c\u96c6\u3002\u5728NebulaGraph\u4e2d\uff0c\u53ef\u4ee5\u663e\u793a\u5730\u4f7f\u7528 INNER JOIN \u5b50\u53e5\u5728\u4e24\u4e2a\u8868\u4e4b\u95f4\u8fdb\u884c\u8fde\u63a5\u67e5\u8be2\uff0c\u4ee5\u83b7\u53d6\u66f4\u52a0\u590d\u6742\u7684\u67e5\u8be2\u7ed3\u679c\u3002 Note \u5728 nGQL \u8bed\u53e5\u4e2d\uff0c GO \u7684\u591a\u8df3\u67e5\u8be2\u9690\u5f0f\u5730\u4f7f\u7528\u4e86 INNER JOIN \u5b50\u53e5\u3002\u4f8b\u5982\uff0c GO 1 TO 2 STEPS FROM \"player101\" OVER follow YIELD $$.player.name AS name, $$.player.age AS age \u8bed\u53e5\u4e2d\uff0c GO \u5b50\u53e5\u9690\u5f0f\u5730\u4f7f\u7528\u4e86 INNER JOIN \u5b50\u53e5\uff0c\u5c06\u4ece player101 \u51fa\u53d1\u6cbf follow \u8fb9\u7b2c\u4e00\u6b65\u67e5\u8be2\u7684\u7ed3\u679c\u5217\u548c\u7b2c\u4e8c\u6b65\u67e5\u8be2\u7684\u8d77\u70b9\u5217\u8fdb\u884c\u5339\u914d\uff0c\u7136\u540e\u57fa\u4e8e\u5339\u914d\u7ed3\u679c\u8fd4\u56de name \u548c age \u3002","title":"INNER JOIN"},{"location":"3.ngql-guide/8.clauses-and-options/joins/#opencypher","text":"INNER JOIN \u5b50\u53e5\u4ec5\u9002\u7528\u4e8e\u539f\u751f nGQL \u8bed\u6cd5\u3002","title":"openCypher \u517c\u5bb9\u6027"},{"location":"3.ngql-guide/8.clauses-and-options/joins/#_1","text":"YIELD <column_name_list> FROM <first_table> INNER JOIN <second_table> ON <join_condition>","title":"\u8bed\u6cd5"},{"location":"3.ngql-guide/8.clauses-and-options/joins/#_2","text":"\u5fc5\u987b\u4f7f\u7528 YIELD \u5b50\u53e5\u6307\u5b9a\u8fd4\u56de\u7684\u5217\uff0c\u5e76\u4e14 YIELD \u5b50\u53e5\u9700\u653e\u7f6e\u5728 INNER JOIN \u5b50\u53e5\u4e4b\u524d\u3002 \u4f7f\u7528 FROM \u5b50\u53e5\u6307\u5b9a\u8981\u8fde\u63a5\u7684\u4e24\u4e2a\u8868\u3002 INNER JOIN \u5b50\u53e5\u5fc5\u987b\u5305\u542b ON \u5b50\u53e5\uff0c ON \u5b50\u53e5\u6307\u5b9a\u4e86\u8fde\u63a5\u6761\u4ef6\uff0c\u5e76\u4e14\u8fde\u63a5\u6761\u4ef6\u53ea\u652f\u6301\u7b49\u503c\u8fde\u63a5\uff08\u5373 == \uff09\u3002 <first_table> \u548c <second_table> \u662f\u8981\u8fde\u63a5\u7684\u4e24\u4e2a\u8868\uff0c\u4e24\u8868\u540d\u4e0d\u80fd\u76f8\u540c\u3002 \u4f7f\u7528\u81ea\u5b9a\u4e49\u53d8\u91cf\u6765\u6307\u5b9a\u8868\u540d\u3002\u8be6\u60c5\u53c2\u89c1 \u4f7f\u7528\u81ea\u5b9a\u4e49\u53d8\u91cf \u3002","title":"\u4f7f\u7528\u8bf4\u660e"},{"location":"3.ngql-guide/8.clauses-and-options/joins/#_3","text":"\u4ee5\u4e0b\u793a\u4f8b\u4ecb\u7ecd\u5982\u4f55\u901a\u8fc7 INNER JOIN \u5173\u8054 nGQL \u8bed\u53e5\u4e2d\u7684\u4e24\u4e2a\u67e5\u8be2\u7ed3\u679c\u3002 \u793a\u4f8b\u4e00\uff1a\u901a\u8fc7 INNER JOIN \u5c06\u7b2c\u4e00\u4e2a LOOKUP \u67e5\u8be2\u4e2d\u7684\u7ed3\u679c dst \u5217\uff08 Tony Parker \u7684 ID player101 \uff09\u548c\u7b2c\u4e8c\u4e2a GO \u67e5\u8be2\u4e2d\u7684\u7ed3\u679c src \u5217\uff08 player101 \u548c player125 \u4e24\u4e2a ID\uff09\u8fdb\u884c\u5339\u914d\u3002\u5339\u914d\u7684\u7ed3\u679c\u96c6\u4e3a\u4e24\u4e2a\u67e5\u8be2\u7ed3\u679c\u4e2d dst \u548c src \u5217\u90fd\u5305\u542b\u7684 player101 \uff0c\u57fa\u4e8e\u8fd9\u4e2a player101 \u5339\u914d\u7684\u7ed3\u679c\uff0c\u7136\u540e\u901a\u8fc7 YIELD $b.vid AS vid, $a.v AS v, $b.e2 AS e2 \u8fd4\u56de\u6700\u7ec8\u67e5\u8be2\u7ed3\u679c\u3002 nebula> $a = LOOKUP ON player WHERE player.name == 'Tony Parker' YIELD id(vertex) as dst, vertex AS v; \\ $b = GO FROM 'player101', 'player125' OVER follow YIELD id($^) as src, id($$) as vid, edge AS e2; \\ YIELD $b.vid AS vid, $a.v AS v, $b.e2 AS e2 FROM $a INNER JOIN $b ON $a.dst == $b.src; +-------------+-----------------------------------------------------+----------------------------------------------------+ | vid | v | e2 | +-------------+-----------------------------------------------------+----------------------------------------------------+ | \"player100\" | (\"player101\" :player{age: 36, name: \"Tony Parker\"}) | [:follow \"player101\"->\"player100\" @0 {degree: 95}] | | \"player102\" | (\"player101\" :player{age: 36, name: \"Tony Parker\"}) | [:follow \"player101\"->\"player102\" @0 {degree: 90}] | | \"player125\" | (\"player101\" :player{age: 36, name: \"Tony Parker\"}) | [:follow \"player101\"->\"player125\" @0 {degree: 95}] | +-------------+-----------------------------------------------------+----------------------------------------------------+ \u793a\u4f8b\u4e8c\uff1a\u901a\u8fc7 INNER JOIN \u5c06\u7b2c\u4e00\u4e2a LOOKUP \u67e5\u8be2\u4e2d\u7684\u7ed3\u679c src \u5217\uff08 Tony Parker \u7684 ID player101 \uff09\u548c\u7b2c\u4e8c\u4e2a FETCH \u67e5\u8be2\u4e2d\u7684\u7ed3\u679c src \u5217\uff08 player101 \u5230 player100 \u7684\u8d77\u70b9 ID player101 \uff09\u8fdb\u884c\u5339\u914d\u3002\u5339\u914d\u7684\u7ed3\u679c\u96c6\u4e3a\u90fd\u5305\u542b\u7684 player101 \uff0c\u57fa\u4e8e\u8fd9\u4e2a player101 \u5339\u914d\u7684\u7ed3\u679c\uff0c\u7136\u540e\u901a\u8fc7 YIELD $a.src AS src, $a.v AS v, $b.e AS e \u8fd4\u56de\u6700\u7ec8\u67e5\u8be2\u7ed3\u679c\u3002 nebula> $a = LOOKUP ON player WHERE player.name == 'Tony Parker' YIELD id(vertex) as src, vertex AS v; \\ $b = FETCH PROP ON follow 'player101'->'player100' YIELD src(edge) as src, edge as e; \\ YIELD $a.src AS src, $a.v AS v, $b.e AS e FROM $a INNER JOIN $b ON $a.src == $b.src; +-------------+-----------------------------------------------------+----------------------------------------------------+ | src | v | e | +-------------+-----------------------------------------------------+----------------------------------------------------+ | \"player101\" | (\"player101\" :player{age: 36, name: \"Tony Parker\"}) | [:follow \"player101\"->\"player100\" @0 {degree: 95}] | +-------------+-----------------------------------------------------+----------------------------------------------------+ \u793a\u4f8b\u4e09\uff1a\u4f7f\u7528 INNER JOIN \u5173\u8054 LOOKUP \u3001 GO \u548c FIND PATH \u5b50\u53e5\u7684\u67e5\u8be2\u7684\u8fc7\u7a0b\u793a\u4f8b\u6b65\u9aa4\uff1a \u901a\u8fc7 LOOKUP ON \u8bed\u53e5\uff0c\u5148\u5bf9 player \u8868\u8fdb\u884c\u67e5\u8be2\uff0c\u627e\u5230\u540d\u4e3a Tony Parker \u7684\u7403\u5458\u9876\u70b9\uff0c\u5e76\u5c06\u5176 ID \u548c\u5c5e\u6027\u5b58\u50a8\u5230 $a.src \u548c v \u5217\u4e2d\u3002 \u518d\u901a\u8fc7 GO \u67e5\u627e\u4ece $a.src \u8282\u70b9\u51fa\u53d1\u7ecf\u8fc7 follow \u8fb9\u5f80\u5916\u8d70 2-5 \u6b65\u7684\u7403\u5458\u8282\u70b9\uff0c\u5176\u4e2d\u8981\u6c42\u8fd9\u4e9b\u8282\u70b9\u5bf9\u5e94\u7684 player \u70b9\u5e74\u9f84\u5927\u4e8e 30 \u5c81\uff0c\u8fd4\u56de\u8fd9\u4e9b\u8282\u70b9\u7684 ID\uff0c\u5e76\u5c06\u5b83\u4eec\u5b58\u50a8\u5728 $b.dst \u5217\u4e2d\u3002 \u7136\u540e\u901a\u8fc7 FIND ALL PATH \u8bed\u53e5\uff0c\u67e5\u627e\u4ece $a.src \u5230 $b.dst \u7684\u6cbf follow \u6240\u6709\u8def\u5f84\uff0c\u5e76\u8fd4\u56de\u8def\u5f84 $c.p \u4ee5\u53ca\u8def\u5f84\u4e2d\u7684\u7ec8\u70b9 $c.dst \u3002 \u6700\u540e\u901a\u8fc7 FIND SHORTEST PATH \u8bed\u53e5\uff0c\u67e5\u627e\u4ece $c.dst \u5230 $a.src \u7684\u6700\u77ed\u8def\u5f84\uff0c\u5e76\u8fd4\u56de\u8def\u5f84 $d.p \u548c\u8def\u5f84\u8d77\u70b9 $d.src \u3002 \u4f7f\u7528 INNER JOIN \u5c06 3 \u548c 4 \u4e2d\u5f97\u5230\u7684\u7ed3\u679c\u8054\u63a5\u8d77\u6765\uff0c\u5339\u914d $c.dst \u548c $d.src \u5217\uff0c\u4e3a\u6bcf\u4e2a\u8054\u63a5\u5339\u914d\u7684\u8bb0\u5f55\u8fd4\u56de YIELD $c.forward AS forwardPath, $c.dst AS end, $d.p AS backwordPath \u3002 nebula> $a = LOOKUP ON player WHERE player.name == 'Tony Parker' YIELD id(vertex) as src, vertex AS v; \\ $b = GO 2 TO 5 STEPS FROM $a.src OVER follow WHERE $$.player.age > 30 YIELD id($$) AS dst; \\ $c = (FIND ALL PATH FROM $a.src TO $b.dst OVER follow YIELD path AS p | YIELD $-.p AS forward, id(endNode($-.p)) AS dst); \\ $d = (FIND SHORTEST PATH FROM $c.dst TO $a.src OVER follow YIELD path AS p | YIELD $-.p AS p, id(startNode($-.p)) AS src); \\ YIELD $c.forward AS forwardPath, $c.dst AS end, $d.p AS backwordPath FROM $c INNER JOIN $d ON $c.dst == $d.src; +-----------------------------------------------------------------------------------------------------------------------------------------------------------------------+-------------+-----------------------------------------------------------------------------+ | forwardPath | end | backwordPath | +-----------------------------------------------------------------------------------------------------------------------------------------------------------------------+-------------+-----------------------------------------------------------------------------+ | <(\"player101\")-[:follow@0 {}]->(\"player102\")> | \"player102\" | <(\"player102\")-[:follow@0 {}]->(\"player101\")> | | <(\"player101\")-[:follow@0 {}]->(\"player100\")-[:follow@0 {}]->(\"player101\")-[:follow@0 {}]->(\"player102\")> | \"player102\" | <(\"player102\")-[:follow@0 {}]->(\"player101\")> | | <(\"player101\")-[:follow@0 {}]->(\"player125\")> | \"player125\" | <(\"player125\")-[:follow@0 {}]->(\"player100\")-[:follow@0 {}]->(\"player101\")> | | <(\"player101\")-[:follow@0 {}]->(\"player100\")-[:follow@0 {}]->(\"player125\")> | \"player125\" | <(\"player125\")-[:follow@0 {}]->(\"player100\")-[:follow@0 {}]->(\"player101\")> | | <(\"player101\")-[:follow@0 {}]->(\"player100\")-[:follow@0 {}]->(\"player101\")-[:follow@0 {}]->(\"player125\")> | \"player125\" | <(\"player125\")-[:follow@0 {}]->(\"player100\")-[:follow@0 {}]->(\"player101\")> | | <(\"player101\")-[:follow@0 {}]->(\"player102\")-[:follow@0 {}]->(\"player100\")-[:follow@0 {}]->(\"player125\")> | \"player125\" | <(\"player125\")-[:follow@0 {}]->(\"player100\")-[:follow@0 {}]->(\"player101\")> | | <(\"player101\")-[:follow@0 {}]->(\"player102\")-[:follow@0 {}]->(\"player101\")-[:follow@0 {}]->(\"player125\")> | \"player125\" | <(\"player125\")-[:follow@0 {}]->(\"player100\")-[:follow@0 {}]->(\"player101\")> | ... +-----------------------------------------------------------------------------------------------------------------------------------------------------------------------+-------------+-----------------------------------------------------------------------------+","title":"\u4f7f\u7528\u793a\u4f8b"},{"location":"3.ngql-guide/8.clauses-and-options/limit/","text":"LIMIT \u00b6 LIMIT \u5b50\u53e5\u9650\u5236\u8f93\u51fa\u7ed3\u679c\u7684\u884c\u6570\u3002 LIMIT \u5728\u539f\u751f nGQL \u8bed\u53e5\u548c openCypher \u517c\u5bb9\u8bed\u53e5\u4e2d\u7684\u7528\u6cd5\u6709\u6240\u4e0d\u540c\u3002 \u5728\u539f\u751f nGQL \u8bed\u53e5\u4e2d\uff0c\u4e00\u822c\u9700\u8981\u5728 LIMIT \u5b50\u53e5\u524d\u4f7f\u7528\u7ba1\u9053\u7b26\uff0c\u53ef\u4ee5\u76f4\u63a5\u5728 LIMIT \u8bed\u53e5\u540e\u8bbe\u7f6e\u6216\u8005\u7701\u7565\u504f\u79fb\u91cf\u53c2\u6570\u3002 \u5728 openCypher \u517c\u5bb9\u8bed\u53e5\u4e2d\uff0c\u4e0d\u5141\u8bb8\u5728 LIMIT \u5b50\u53e5\u524d\u4f7f\u7528\u7ba1\u9053\u7b26\uff0c\u53ef\u4ee5\u4f7f\u7528 SKIP \u6307\u660e\u504f\u79fb\u91cf\u3002 Note \u5728\u539f\u751f nGQL \u6216 openCypher \u65b9\u5f0f\u4e2d\u4f7f\u7528 LIMIT \u65f6\uff0c\u4f7f\u7528 ORDER BY \u5b50\u53e5\u9650\u5236\u8f93\u51fa\u987a\u5e8f\u975e\u5e38\u91cd\u8981\uff0c\u5426\u5219\u4f1a\u8f93\u51fa\u4e00\u4e2a\u4e0d\u53ef\u9884\u77e5\u7684\u5b50\u96c6\u3002 \u539f\u751f nGQL \u8bed\u53e5\u4e2d\u7684 LIMIT \u00b6 \u5728\u539f\u751f nGQL \u4e2d\uff0c LIMIT \u6709\u901a\u7528\u8bed\u6cd5\u548c GO \u8bed\u53e5\u4e2d\u7684\u4e13\u5c5e\u8bed\u6cd5\u3002 \u539f\u751f nGQL \u4e2d\u7684\u901a\u7528 LIMIT \u8bed\u6cd5 \u00b6 \u539f\u751f nGQL \u4e2d\u7684\u901a\u7528 LIMIT \u8bed\u6cd5\u4e0e SQL \u4e2d\u7684 LIMIT \u539f\u7406\u76f8\u540c\u3002 LIMIT \u5b50\u53e5\u63a5\u6536\u4e00\u4e2a\u6216\u4e24\u4e2a\u53c2\u6570\uff0c\u53c2\u6570\u7684\u503c\u5fc5\u987b\u662f\u975e\u8d1f\u6574\u6570\uff0c\u4e14\u5fc5\u987b\u7528\u5728\u7ba1\u9053\u7b26\u4e4b\u540e\u3002\u8bed\u6cd5\u548c\u8bf4\u660e\u5982\u4e0b\uff1a ... | LIMIT [<offset>,] <number_rows>; \u53c2\u6570 \u8bf4\u660e offset \u504f\u79fb\u91cf\uff0c\u5373\u5b9a\u4e49\u4ece\u54ea\u4e00\u884c\u5f00\u59cb\u8fd4\u56de\u3002\u7d22\u5f15\u4ece 0 \u5f00\u59cb\u3002\u9ed8\u8ba4\u503c\u4e3a 0 \uff0c\u8868\u793a\u4ece\u7b2c\u4e00\u884c\u5f00\u59cb\u8fd4\u56de\u3002 number_rows \u8fd4\u56de\u7684\u603b\u884c\u6570\u3002 \u793a\u4f8b\uff1a # \u4ece\u7ed3\u679c\u4e2d\u8fd4\u56de\u6700\u524d\u9762\u7684 3 \u884c\u6570\u636e\u3002 nebula> LOOKUP ON player YIELD id(vertex)|\\ LIMIT 3; +-------------+ | id(VERTEX) | +-------------+ | \"player100\" | | \"player101\" | | \"player102\" | +-------------+ # \u4ece\u6392\u5e8f\u540e\u7ed3\u679c\u4e2d\u8fd4\u56de\u7b2c 2 \u884c\u5f00\u59cb\u7684 3 \u884c\u6570\u636e\u3002 nebula> GO FROM \"player100\" OVER follow REVERSELY \\ YIELD properties($$).name AS Friend, properties($$).age AS Age \\ | ORDER BY $-.Age, $-.Friend \\ | LIMIT 1, 3; +-------------------+-----+ | Friend | Age | +-------------------+-----+ | \"Danny Green\" | 31 | | \"Aron Baynes\" | 32 | | \"Marco Belinelli\" | 32 | +-------------------+-----+ GO \u8bed\u53e5\u4e2d\u7684 LIMIT \u00b6 GO \u8bed\u53e5\u4e2d\u7684 LIMIT \u9664\u4e86\u652f\u6301\u539f\u751f nGQL \u4e2d\u7684\u901a\u7528\u8bed\u6cd5\u5916\uff0c\u8fd8\u652f\u6301\u6839\u636e\u8fb9\u9650\u5236\u8f93\u51fa\u7ed3\u679c\u6570\u91cf\u3002 \u8bed\u6cd5\uff1a <go_statement> LIMIT <limit_list>; limit_list \u662f\u4e00\u4e2a\u5217\u8868\uff0c\u5217\u8868\u4e2d\u7684\u5143\u7d20\u5fc5\u987b\u4e3a\u81ea\u7136\u6570\uff0c\u4e14\u5143\u7d20\u6570\u91cf\u5fc5\u987b\u4e0e GO \u8bed\u53e5\u4e2d\u7684 STEPS \u7684\u6700\u5927\u6570\u76f8\u540c\u3002\u4e0b\u6587\u4ee5 GO 1 TO 3 STEPS FROM \"A\" OVER * LIMIT <limit_list> \u4e3a\u4f8b\u8be6\u7ec6\u4ecb\u7ecd LIMIT \u7684\u8fd9\u79cd\u7528\u6cd5\u3002 \u5217\u8868 limit_list \u5fc5\u987b\u5305\u542b 3 \u4e2a\u81ea\u7136\u6570\u5143\u7d20\uff0c\u4f8b\u5982 GO 1 TO 3 STEPS FROM \"A\" OVER * LIMIT [1,2,4] \u3002 LIMIT [1,2,4] \u4e2d\u7684 1 \u8868\u793a\u7cfb\u7edf\u5728\u7b2c\u4e00\u6b65\u65f6\u81ea\u52a8\u9009\u62e9 1 \u6761\u8fb9\u7ee7\u7eed\u904d\u5386\uff0c 2 \u8868\u793a\u5728\u7b2c\u4e8c\u6b65\u65f6\u9009\u62e9 2 \u6761\u8fb9\u7ee7\u7eed\u904d\u5386\uff0c 4 \u8868\u793a\u5728\u7b2c\u4e09\u6b65\u65f6\u9009\u62e9 4 \u6761\u8fb9\u7ee7\u7eed\u904d\u5386\u3002 \u56e0\u4e3a GO 1 TO 3 STEPS \u8868\u793a\u8fd4\u56de\u7b2c\u4e00\u5230\u7b2c\u4e09\u6b65\u7684\u6240\u6709\u904d\u5386\u7ed3\u679c\uff0c\u56e0\u6b64\u4e0b\u56fe\u4e2d\u6240\u6709\u7ea2\u8272\u8fb9\u548c\u5b83\u4eec\u7684\u539f\u70b9\u4e0e\u76ee\u7684\u70b9\u90fd\u4f1a\u88ab\u8fd9\u6761 GO \u8bed\u53e5\u5339\u914d\u4e0a\uff0c\u800c\u9ec4\u8272\u8fb9\u8868\u793a GO \u8bed\u53e5\u904d\u5386\u65f6\u6ca1\u6709\u9009\u62e9\u7684\u8def\u5f84\u3002\u5982\u679c\u4e0d\u662f GO 1 TO 3 STEPS \u800c\u662f GO 3 STEPS \uff0c\u5219\u53ea\u4f1a\u5339\u914d\u4e0a\u7b2c\u4e09\u6b65\u7684\u7ea2\u8272\u8fb9\u548c\u5b83\u4eec\u4e24\u7aef\u7684\u70b9\u3002 \u5728 basketballplayer \u6570\u636e\u96c6\u4e2d\u7684\u6267\u884c\u793a\u4f8b\u5982\u4e0b\uff1a nebula> GO 3 STEPS FROM \"player100\" \\ OVER * \\ YIELD properties($$).name AS NAME, properties($$).age AS Age \\ LIMIT [3,3,3]; +-----------------+----------+ | NAME | Age | +-----------------+----------+ | \"Tony Parker\" | 36 | | \"Manu Ginobili\" | 41 | | \"Spurs\" | __NULL__ | +-----------------+----------+ nebula> GO 3 STEPS FROM \"player102\" OVER * BIDIRECT\\ YIELD dst(edge) \\ LIMIT [rand32(5),rand32(5),rand32(5)]; +-------------+ | dst(EDGE) | +-------------+ | \"player100\" | | \"player100\" | +-------------+ openCypher \u517c\u5bb9\u8bed\u53e5\u4e2d\u7684 LIMIT \u00b6 \u5728 MATCH \u7b49 openCypher \u517c\u5bb9\u8bed\u53e5\u4e2d\u4f7f\u7528 LIMIT \u4e0d\u9700\u8981\u52a0\u7ba1\u9053\u7b26\u3002\u8bed\u6cd5\u548c\u8bf4\u660e\u5982\u4e0b\uff1a ... [SKIP <offset>] [LIMIT <number_rows>]; \u53c2\u6570 \u8bf4\u660e offset \u504f\u79fb\u91cf\uff0c\u5373\u5b9a\u4e49\u4ece\u54ea\u4e00\u884c\u5f00\u59cb\u8fd4\u56de\u3002\u7d22\u5f15\u4ece 0 \u5f00\u59cb\u3002\u9ed8\u8ba4\u503c\u4e3a 0 \uff0c\u8868\u793a\u4ece\u7b2c\u4e00\u884c\u5f00\u59cb\u8fd4\u56de\u3002 number_rows \u8fd4\u56de\u7684\u603b\u884c\u6570\u91cf\u3002 offset \u548c number_rows \u53ef\u4ee5\u4f7f\u7528\u8868\u8fbe\u5f0f\uff0c\u4f46\u662f\u8868\u8fbe\u5f0f\u7684\u7ed3\u679c\u5fc5\u987b\u662f\u975e\u8d1f\u6574\u6570\u3002 Note \u4e24\u4e2a\u6574\u6570\u7ec4\u6210\u7684\u5206\u6570\u8868\u8fbe\u5f0f\u4f1a\u81ea\u52a8\u5411\u4e0b\u53d6\u6574\u3002\u4f8b\u5982 8/6 \u5411\u4e0b\u53d6\u6574\u4e3a 1\u3002 \u5355\u72ec\u4f7f\u7528 LIMIT \u00b6 LIMIT \u53ef\u4ee5\u5355\u72ec\u4f7f\u7528\uff0c\u8fd4\u56de\u6307\u5b9a\u6570\u91cf\u7684\u7ed3\u679c\u3002 nebula> MATCH (v:player) RETURN v.player.name AS Name, v.player.age AS Age \\ ORDER BY Age LIMIT 5; +-------------------------+-----+ | Name | Age | +-------------------------+-----+ | \"Luka Doncic\" | 20 | | \"Ben Simmons\" | 22 | | \"Kristaps Porzingis\" | 23 | | \"Giannis Antetokounmpo\" | 24 | | \"Kyle Anderson\" | 25 | +-------------------------+-----+ \u5355\u72ec\u4f7f\u7528 SKIP \u00b6 SKIP \u53ef\u4ee5\u5355\u72ec\u4f7f\u7528\uff0c\u7528\u4e8e\u8bbe\u7f6e\u504f\u79fb\u91cf\uff0c\u8fd4\u56de\u6307\u5b9a\u4f4d\u7f6e\u4e4b\u540e\u7684\u6570\u636e\u3002 nebula> MATCH (v:player{name:\"Tim Duncan\"}) --> (v2) \\ RETURN v2.player.name AS Name, v2.player.age AS Age \\ ORDER BY Age DESC SKIP 1; +-----------------+-----+ | Name | Age | +-----------------+-----+ | \"Manu Ginobili\" | 41 | | \"Tony Parker\" | 36 | +-----------------+-----+ nebula> MATCH (v:player{name:\"Tim Duncan\"}) --> (v2) \\ RETURN v2.player.name AS Name, v2.player.age AS Age \\ ORDER BY Age DESC SKIP 1+1; +---------------+-----+ | Name | Age | +---------------+-----+ | \"Tony Parker\" | 36 | +---------------+-----+ \u540c\u65f6\u4f7f\u7528 SKIP \u4e0e LIMIT \u00b6 \u540c\u65f6\u4f7f\u7528 SKIP \u4e0e LIMIT \u53ef\u4ee5\u8fd4\u56de\u4ece\u6307\u5b9a\u4f4d\u7f6e\u5f00\u59cb\u7684\u6307\u5b9a\u6570\u91cf\u7684\u6570\u636e\u3002 nebula> MATCH (v:player{name:\"Tim Duncan\"}) --> (v2) \\ RETURN v2.player.name AS Name, v2.player.age AS Age \\ ORDER BY Age DESC SKIP 1 LIMIT 1; +-----------------+-----+ | Name | Age | +-----------------+-----+ | \"Manu Ginobili\" | 41 | +-----------------+-----+","title":"LIMIT and SKIP"},{"location":"3.ngql-guide/8.clauses-and-options/limit/#limit","text":"LIMIT \u5b50\u53e5\u9650\u5236\u8f93\u51fa\u7ed3\u679c\u7684\u884c\u6570\u3002 LIMIT \u5728\u539f\u751f nGQL \u8bed\u53e5\u548c openCypher \u517c\u5bb9\u8bed\u53e5\u4e2d\u7684\u7528\u6cd5\u6709\u6240\u4e0d\u540c\u3002 \u5728\u539f\u751f nGQL \u8bed\u53e5\u4e2d\uff0c\u4e00\u822c\u9700\u8981\u5728 LIMIT \u5b50\u53e5\u524d\u4f7f\u7528\u7ba1\u9053\u7b26\uff0c\u53ef\u4ee5\u76f4\u63a5\u5728 LIMIT \u8bed\u53e5\u540e\u8bbe\u7f6e\u6216\u8005\u7701\u7565\u504f\u79fb\u91cf\u53c2\u6570\u3002 \u5728 openCypher \u517c\u5bb9\u8bed\u53e5\u4e2d\uff0c\u4e0d\u5141\u8bb8\u5728 LIMIT \u5b50\u53e5\u524d\u4f7f\u7528\u7ba1\u9053\u7b26\uff0c\u53ef\u4ee5\u4f7f\u7528 SKIP \u6307\u660e\u504f\u79fb\u91cf\u3002 Note \u5728\u539f\u751f nGQL \u6216 openCypher \u65b9\u5f0f\u4e2d\u4f7f\u7528 LIMIT \u65f6\uff0c\u4f7f\u7528 ORDER BY \u5b50\u53e5\u9650\u5236\u8f93\u51fa\u987a\u5e8f\u975e\u5e38\u91cd\u8981\uff0c\u5426\u5219\u4f1a\u8f93\u51fa\u4e00\u4e2a\u4e0d\u53ef\u9884\u77e5\u7684\u5b50\u96c6\u3002","title":"LIMIT"},{"location":"3.ngql-guide/8.clauses-and-options/limit/#ngql_limit","text":"\u5728\u539f\u751f nGQL \u4e2d\uff0c LIMIT \u6709\u901a\u7528\u8bed\u6cd5\u548c GO \u8bed\u53e5\u4e2d\u7684\u4e13\u5c5e\u8bed\u6cd5\u3002","title":"\u539f\u751f nGQL \u8bed\u53e5\u4e2d\u7684 LIMIT"},{"location":"3.ngql-guide/8.clauses-and-options/limit/#ngql_limit_1","text":"\u539f\u751f nGQL \u4e2d\u7684\u901a\u7528 LIMIT \u8bed\u6cd5\u4e0e SQL \u4e2d\u7684 LIMIT \u539f\u7406\u76f8\u540c\u3002 LIMIT \u5b50\u53e5\u63a5\u6536\u4e00\u4e2a\u6216\u4e24\u4e2a\u53c2\u6570\uff0c\u53c2\u6570\u7684\u503c\u5fc5\u987b\u662f\u975e\u8d1f\u6574\u6570\uff0c\u4e14\u5fc5\u987b\u7528\u5728\u7ba1\u9053\u7b26\u4e4b\u540e\u3002\u8bed\u6cd5\u548c\u8bf4\u660e\u5982\u4e0b\uff1a ... | LIMIT [<offset>,] <number_rows>; \u53c2\u6570 \u8bf4\u660e offset \u504f\u79fb\u91cf\uff0c\u5373\u5b9a\u4e49\u4ece\u54ea\u4e00\u884c\u5f00\u59cb\u8fd4\u56de\u3002\u7d22\u5f15\u4ece 0 \u5f00\u59cb\u3002\u9ed8\u8ba4\u503c\u4e3a 0 \uff0c\u8868\u793a\u4ece\u7b2c\u4e00\u884c\u5f00\u59cb\u8fd4\u56de\u3002 number_rows \u8fd4\u56de\u7684\u603b\u884c\u6570\u3002 \u793a\u4f8b\uff1a # \u4ece\u7ed3\u679c\u4e2d\u8fd4\u56de\u6700\u524d\u9762\u7684 3 \u884c\u6570\u636e\u3002 nebula> LOOKUP ON player YIELD id(vertex)|\\ LIMIT 3; +-------------+ | id(VERTEX) | +-------------+ | \"player100\" | | \"player101\" | | \"player102\" | +-------------+ # \u4ece\u6392\u5e8f\u540e\u7ed3\u679c\u4e2d\u8fd4\u56de\u7b2c 2 \u884c\u5f00\u59cb\u7684 3 \u884c\u6570\u636e\u3002 nebula> GO FROM \"player100\" OVER follow REVERSELY \\ YIELD properties($$).name AS Friend, properties($$).age AS Age \\ | ORDER BY $-.Age, $-.Friend \\ | LIMIT 1, 3; +-------------------+-----+ | Friend | Age | +-------------------+-----+ | \"Danny Green\" | 31 | | \"Aron Baynes\" | 32 | | \"Marco Belinelli\" | 32 | +-------------------+-----+","title":"\u539f\u751f nGQL \u4e2d\u7684\u901a\u7528 LIMIT \u8bed\u6cd5"},{"location":"3.ngql-guide/8.clauses-and-options/limit/#go_limit","text":"GO \u8bed\u53e5\u4e2d\u7684 LIMIT \u9664\u4e86\u652f\u6301\u539f\u751f nGQL \u4e2d\u7684\u901a\u7528\u8bed\u6cd5\u5916\uff0c\u8fd8\u652f\u6301\u6839\u636e\u8fb9\u9650\u5236\u8f93\u51fa\u7ed3\u679c\u6570\u91cf\u3002 \u8bed\u6cd5\uff1a <go_statement> LIMIT <limit_list>; limit_list \u662f\u4e00\u4e2a\u5217\u8868\uff0c\u5217\u8868\u4e2d\u7684\u5143\u7d20\u5fc5\u987b\u4e3a\u81ea\u7136\u6570\uff0c\u4e14\u5143\u7d20\u6570\u91cf\u5fc5\u987b\u4e0e GO \u8bed\u53e5\u4e2d\u7684 STEPS \u7684\u6700\u5927\u6570\u76f8\u540c\u3002\u4e0b\u6587\u4ee5 GO 1 TO 3 STEPS FROM \"A\" OVER * LIMIT <limit_list> \u4e3a\u4f8b\u8be6\u7ec6\u4ecb\u7ecd LIMIT \u7684\u8fd9\u79cd\u7528\u6cd5\u3002 \u5217\u8868 limit_list \u5fc5\u987b\u5305\u542b 3 \u4e2a\u81ea\u7136\u6570\u5143\u7d20\uff0c\u4f8b\u5982 GO 1 TO 3 STEPS FROM \"A\" OVER * LIMIT [1,2,4] \u3002 LIMIT [1,2,4] \u4e2d\u7684 1 \u8868\u793a\u7cfb\u7edf\u5728\u7b2c\u4e00\u6b65\u65f6\u81ea\u52a8\u9009\u62e9 1 \u6761\u8fb9\u7ee7\u7eed\u904d\u5386\uff0c 2 \u8868\u793a\u5728\u7b2c\u4e8c\u6b65\u65f6\u9009\u62e9 2 \u6761\u8fb9\u7ee7\u7eed\u904d\u5386\uff0c 4 \u8868\u793a\u5728\u7b2c\u4e09\u6b65\u65f6\u9009\u62e9 4 \u6761\u8fb9\u7ee7\u7eed\u904d\u5386\u3002 \u56e0\u4e3a GO 1 TO 3 STEPS \u8868\u793a\u8fd4\u56de\u7b2c\u4e00\u5230\u7b2c\u4e09\u6b65\u7684\u6240\u6709\u904d\u5386\u7ed3\u679c\uff0c\u56e0\u6b64\u4e0b\u56fe\u4e2d\u6240\u6709\u7ea2\u8272\u8fb9\u548c\u5b83\u4eec\u7684\u539f\u70b9\u4e0e\u76ee\u7684\u70b9\u90fd\u4f1a\u88ab\u8fd9\u6761 GO \u8bed\u53e5\u5339\u914d\u4e0a\uff0c\u800c\u9ec4\u8272\u8fb9\u8868\u793a GO \u8bed\u53e5\u904d\u5386\u65f6\u6ca1\u6709\u9009\u62e9\u7684\u8def\u5f84\u3002\u5982\u679c\u4e0d\u662f GO 1 TO 3 STEPS \u800c\u662f GO 3 STEPS \uff0c\u5219\u53ea\u4f1a\u5339\u914d\u4e0a\u7b2c\u4e09\u6b65\u7684\u7ea2\u8272\u8fb9\u548c\u5b83\u4eec\u4e24\u7aef\u7684\u70b9\u3002 \u5728 basketballplayer \u6570\u636e\u96c6\u4e2d\u7684\u6267\u884c\u793a\u4f8b\u5982\u4e0b\uff1a nebula> GO 3 STEPS FROM \"player100\" \\ OVER * \\ YIELD properties($$).name AS NAME, properties($$).age AS Age \\ LIMIT [3,3,3]; +-----------------+----------+ | NAME | Age | +-----------------+----------+ | \"Tony Parker\" | 36 | | \"Manu Ginobili\" | 41 | | \"Spurs\" | __NULL__ | +-----------------+----------+ nebula> GO 3 STEPS FROM \"player102\" OVER * BIDIRECT\\ YIELD dst(edge) \\ LIMIT [rand32(5),rand32(5),rand32(5)]; +-------------+ | dst(EDGE) | +-------------+ | \"player100\" | | \"player100\" | +-------------+","title":"GO \u8bed\u53e5\u4e2d\u7684 LIMIT"},{"location":"3.ngql-guide/8.clauses-and-options/limit/#opencypher_limit","text":"\u5728 MATCH \u7b49 openCypher \u517c\u5bb9\u8bed\u53e5\u4e2d\u4f7f\u7528 LIMIT \u4e0d\u9700\u8981\u52a0\u7ba1\u9053\u7b26\u3002\u8bed\u6cd5\u548c\u8bf4\u660e\u5982\u4e0b\uff1a ... [SKIP <offset>] [LIMIT <number_rows>]; \u53c2\u6570 \u8bf4\u660e offset \u504f\u79fb\u91cf\uff0c\u5373\u5b9a\u4e49\u4ece\u54ea\u4e00\u884c\u5f00\u59cb\u8fd4\u56de\u3002\u7d22\u5f15\u4ece 0 \u5f00\u59cb\u3002\u9ed8\u8ba4\u503c\u4e3a 0 \uff0c\u8868\u793a\u4ece\u7b2c\u4e00\u884c\u5f00\u59cb\u8fd4\u56de\u3002 number_rows \u8fd4\u56de\u7684\u603b\u884c\u6570\u91cf\u3002 offset \u548c number_rows \u53ef\u4ee5\u4f7f\u7528\u8868\u8fbe\u5f0f\uff0c\u4f46\u662f\u8868\u8fbe\u5f0f\u7684\u7ed3\u679c\u5fc5\u987b\u662f\u975e\u8d1f\u6574\u6570\u3002 Note \u4e24\u4e2a\u6574\u6570\u7ec4\u6210\u7684\u5206\u6570\u8868\u8fbe\u5f0f\u4f1a\u81ea\u52a8\u5411\u4e0b\u53d6\u6574\u3002\u4f8b\u5982 8/6 \u5411\u4e0b\u53d6\u6574\u4e3a 1\u3002","title":"openCypher \u517c\u5bb9\u8bed\u53e5\u4e2d\u7684 LIMIT"},{"location":"3.ngql-guide/8.clauses-and-options/limit/#limit_1","text":"LIMIT \u53ef\u4ee5\u5355\u72ec\u4f7f\u7528\uff0c\u8fd4\u56de\u6307\u5b9a\u6570\u91cf\u7684\u7ed3\u679c\u3002 nebula> MATCH (v:player) RETURN v.player.name AS Name, v.player.age AS Age \\ ORDER BY Age LIMIT 5; +-------------------------+-----+ | Name | Age | +-------------------------+-----+ | \"Luka Doncic\" | 20 | | \"Ben Simmons\" | 22 | | \"Kristaps Porzingis\" | 23 | | \"Giannis Antetokounmpo\" | 24 | | \"Kyle Anderson\" | 25 | +-------------------------+-----+","title":"\u5355\u72ec\u4f7f\u7528 LIMIT"},{"location":"3.ngql-guide/8.clauses-and-options/limit/#skip","text":"SKIP \u53ef\u4ee5\u5355\u72ec\u4f7f\u7528\uff0c\u7528\u4e8e\u8bbe\u7f6e\u504f\u79fb\u91cf\uff0c\u8fd4\u56de\u6307\u5b9a\u4f4d\u7f6e\u4e4b\u540e\u7684\u6570\u636e\u3002 nebula> MATCH (v:player{name:\"Tim Duncan\"}) --> (v2) \\ RETURN v2.player.name AS Name, v2.player.age AS Age \\ ORDER BY Age DESC SKIP 1; +-----------------+-----+ | Name | Age | +-----------------+-----+ | \"Manu Ginobili\" | 41 | | \"Tony Parker\" | 36 | +-----------------+-----+ nebula> MATCH (v:player{name:\"Tim Duncan\"}) --> (v2) \\ RETURN v2.player.name AS Name, v2.player.age AS Age \\ ORDER BY Age DESC SKIP 1+1; +---------------+-----+ | Name | Age | +---------------+-----+ | \"Tony Parker\" | 36 | +---------------+-----+","title":"\u5355\u72ec\u4f7f\u7528 SKIP"},{"location":"3.ngql-guide/8.clauses-and-options/limit/#skip_limit","text":"\u540c\u65f6\u4f7f\u7528 SKIP \u4e0e LIMIT \u53ef\u4ee5\u8fd4\u56de\u4ece\u6307\u5b9a\u4f4d\u7f6e\u5f00\u59cb\u7684\u6307\u5b9a\u6570\u91cf\u7684\u6570\u636e\u3002 nebula> MATCH (v:player{name:\"Tim Duncan\"}) --> (v2) \\ RETURN v2.player.name AS Name, v2.player.age AS Age \\ ORDER BY Age DESC SKIP 1 LIMIT 1; +-----------------+-----+ | Name | Age | +-----------------+-----+ | \"Manu Ginobili\" | 41 | +-----------------+-----+","title":"\u540c\u65f6\u4f7f\u7528 SKIP \u4e0e LIMIT"},{"location":"3.ngql-guide/8.clauses-and-options/order-by/","text":"ORDER BY \u00b6 ORDER BY \u5b50\u53e5\u6307\u5b9a\u8f93\u51fa\u7ed3\u679c\u7684\u6392\u5e8f\u89c4\u5219\u3002 \u5728\u539f\u751f nGQL \u4e2d\uff0c\u5fc5\u987b\u5728 YIELD \u5b50\u53e5\u4e4b\u540e\u4f7f\u7528\u7ba1\u9053\u7b26\uff08|\uff09\u548c ORDER BY \u5b50\u53e5\u3002 \u5728 openCypher \u65b9\u5f0f\u4e2d\uff0c\u4e0d\u5141\u8bb8\u4f7f\u7528\u7ba1\u9053\u7b26\u3002\u5728 RETURN \u5b50\u53e5\u4e4b\u540e\u4f7f\u7528 ORDER BY \u5b50\u53e5\u3002 \u6392\u5e8f\u89c4\u5219\u5206\u4e3a\u5982\u4e0b\u4e24\u79cd\uff1a ASC \uff08\u9ed8\u8ba4\uff09: \u5347\u5e8f\u3002 DESC : \u964d\u5e8f\u3002 \u539f\u751f nGQL \u8bed\u6cd5 \u00b6 <YIELD clause> | ORDER BY <expression> [ASC | DESC] [, <expression> [ASC | DESC] ...]; Compatibility \u539f\u751f nGQL \u8bed\u6cd5\u4e2d\uff0c ORDER BY \u547d\u4ee4\u540e\u5fc5\u987b\u4f7f\u7528\u5f15\u7528\u7b26 $-. \u3002\u4f46\u5728 2.5.0 \u4e4b\u524d\u7684\u7248\u672c\u4e2d\u4e0d\u9700\u8981\u3002 \u793a\u4f8b \u00b6 nebula> FETCH PROP ON player \"player100\", \"player101\", \"player102\", \"player103\" \\ YIELD properties(vertex).age AS age, properties(vertex).name AS name \\ | ORDER BY $-.age ASC, $-.name DESC; +-----+---------------------+ | age | name | +-----+---------------------+ | 32 | \"Rudy Gay\" | | 33 | \"LaMarcus Aldridge\" | | 36 | \"Tony Parker\" | | 42 | \"Tim Duncan\" | +-----+---------------------+ nebula> $var = GO FROM \"player100\" OVER follow \\ YIELD dst(edge) AS dst; \\ ORDER BY $var.dst DESC; +-------------+ | dst | +-------------+ | \"player125\" | | \"player101\" | +-------------+ OpenCypher \u65b9\u5f0f\u8bed\u6cd5 \u00b6 <RETURN clause> ORDER BY <expression> [ASC | DESC] [, <expression> [ASC | DESC] ...]; \u793a\u4f8b \u00b6 nebula> MATCH (v:player) RETURN v.player.name AS Name, v.player.age AS Age \\ ORDER BY Name DESC; +-----------------+-----+ | Name | Age | +-----------------+-----+ | \"Yao Ming\" | 38 | | \"Vince Carter\" | 42 | | \"Tracy McGrady\" | 39 | | \"Tony Parker\" | 36 | | \"Tim Duncan\" | 42 | +-----------------+-----+ ... # \u9996\u5148\u4ee5\u5e74\u9f84\u6392\u5e8f\uff0c\u5982\u679c\u5e74\u9f84\u76f8\u540c\uff0c\u518d\u4ee5\u59d3\u540d\u6392\u5e8f\u3002 nebula> MATCH (v:player) RETURN v.player.age AS Age, v.player.name AS Name \\ ORDER BY Age DESC, Name ASC; +-----+-------------------+ | Age | Name | +-----+-------------------+ | 47 | \"Shaquille O'Neal\" | | 46 | \"Grant Hill\" | | 45 | \"Jason Kidd\" | | 45 | \"Steve Nash\" | +-----+-------------------+ ... NULL \u503c\u7684\u6392\u5e8f \u00b6 \u5347\u5e8f\u6392\u5217\u65f6\uff0c\u4f1a\u5728\u8f93\u51fa\u7684\u6700\u540e\u5217\u51fa NULL \u503c\uff0c\u964d\u5e8f\u6392\u5217\u65f6\uff0c\u4f1a\u5728\u8f93\u51fa\u7684\u5f00\u5934\u5217\u51fa NULL \u503c\u3002 nebula> MATCH (v:player{name:\"Tim Duncan\"}) --> (v2) \\ RETURN v2.player.name AS Name, v2.player.age AS Age \\ ORDER BY Age; +-----------------+----------+ | Name | Age | +-----------------+----------+ | \"Tony Parker\" | 36 | | \"Manu Ginobili\" | 41 | | __NULL__ | __NULL__ | +-----------------+----------+ nebula> MATCH (v:player{name:\"Tim Duncan\"}) --> (v2) \\ RETURN v2.player.name AS Name, v2.player.age AS Age \\ ORDER BY Age DESC; +-----------------+----------+ | Name | Age | +-----------------+----------+ | __NULL__ | __NULL__ | | \"Manu Ginobili\" | 41 | | \"Tony Parker\" | 36 | +-----------------+----------+","title":"ORDER BY"},{"location":"3.ngql-guide/8.clauses-and-options/order-by/#order_by","text":"ORDER BY \u5b50\u53e5\u6307\u5b9a\u8f93\u51fa\u7ed3\u679c\u7684\u6392\u5e8f\u89c4\u5219\u3002 \u5728\u539f\u751f nGQL \u4e2d\uff0c\u5fc5\u987b\u5728 YIELD \u5b50\u53e5\u4e4b\u540e\u4f7f\u7528\u7ba1\u9053\u7b26\uff08|\uff09\u548c ORDER BY \u5b50\u53e5\u3002 \u5728 openCypher \u65b9\u5f0f\u4e2d\uff0c\u4e0d\u5141\u8bb8\u4f7f\u7528\u7ba1\u9053\u7b26\u3002\u5728 RETURN \u5b50\u53e5\u4e4b\u540e\u4f7f\u7528 ORDER BY \u5b50\u53e5\u3002 \u6392\u5e8f\u89c4\u5219\u5206\u4e3a\u5982\u4e0b\u4e24\u79cd\uff1a ASC \uff08\u9ed8\u8ba4\uff09: \u5347\u5e8f\u3002 DESC : \u964d\u5e8f\u3002","title":"ORDER BY"},{"location":"3.ngql-guide/8.clauses-and-options/order-by/#ngql","text":"<YIELD clause> | ORDER BY <expression> [ASC | DESC] [, <expression> [ASC | DESC] ...]; Compatibility \u539f\u751f nGQL \u8bed\u6cd5\u4e2d\uff0c ORDER BY \u547d\u4ee4\u540e\u5fc5\u987b\u4f7f\u7528\u5f15\u7528\u7b26 $-. \u3002\u4f46\u5728 2.5.0 \u4e4b\u524d\u7684\u7248\u672c\u4e2d\u4e0d\u9700\u8981\u3002","title":"\u539f\u751f nGQL \u8bed\u6cd5"},{"location":"3.ngql-guide/8.clauses-and-options/order-by/#_1","text":"nebula> FETCH PROP ON player \"player100\", \"player101\", \"player102\", \"player103\" \\ YIELD properties(vertex).age AS age, properties(vertex).name AS name \\ | ORDER BY $-.age ASC, $-.name DESC; +-----+---------------------+ | age | name | +-----+---------------------+ | 32 | \"Rudy Gay\" | | 33 | \"LaMarcus Aldridge\" | | 36 | \"Tony Parker\" | | 42 | \"Tim Duncan\" | +-----+---------------------+ nebula> $var = GO FROM \"player100\" OVER follow \\ YIELD dst(edge) AS dst; \\ ORDER BY $var.dst DESC; +-------------+ | dst | +-------------+ | \"player125\" | | \"player101\" | +-------------+","title":"\u793a\u4f8b"},{"location":"3.ngql-guide/8.clauses-and-options/order-by/#opencypher","text":"<RETURN clause> ORDER BY <expression> [ASC | DESC] [, <expression> [ASC | DESC] ...];","title":"OpenCypher \u65b9\u5f0f\u8bed\u6cd5"},{"location":"3.ngql-guide/8.clauses-and-options/order-by/#_2","text":"nebula> MATCH (v:player) RETURN v.player.name AS Name, v.player.age AS Age \\ ORDER BY Name DESC; +-----------------+-----+ | Name | Age | +-----------------+-----+ | \"Yao Ming\" | 38 | | \"Vince Carter\" | 42 | | \"Tracy McGrady\" | 39 | | \"Tony Parker\" | 36 | | \"Tim Duncan\" | 42 | +-----------------+-----+ ... # \u9996\u5148\u4ee5\u5e74\u9f84\u6392\u5e8f\uff0c\u5982\u679c\u5e74\u9f84\u76f8\u540c\uff0c\u518d\u4ee5\u59d3\u540d\u6392\u5e8f\u3002 nebula> MATCH (v:player) RETURN v.player.age AS Age, v.player.name AS Name \\ ORDER BY Age DESC, Name ASC; +-----+-------------------+ | Age | Name | +-----+-------------------+ | 47 | \"Shaquille O'Neal\" | | 46 | \"Grant Hill\" | | 45 | \"Jason Kidd\" | | 45 | \"Steve Nash\" | +-----+-------------------+ ...","title":"\u793a\u4f8b"},{"location":"3.ngql-guide/8.clauses-and-options/order-by/#null","text":"\u5347\u5e8f\u6392\u5217\u65f6\uff0c\u4f1a\u5728\u8f93\u51fa\u7684\u6700\u540e\u5217\u51fa NULL \u503c\uff0c\u964d\u5e8f\u6392\u5217\u65f6\uff0c\u4f1a\u5728\u8f93\u51fa\u7684\u5f00\u5934\u5217\u51fa NULL \u503c\u3002 nebula> MATCH (v:player{name:\"Tim Duncan\"}) --> (v2) \\ RETURN v2.player.name AS Name, v2.player.age AS Age \\ ORDER BY Age; +-----------------+----------+ | Name | Age | +-----------------+----------+ | \"Tony Parker\" | 36 | | \"Manu Ginobili\" | 41 | | __NULL__ | __NULL__ | +-----------------+----------+ nebula> MATCH (v:player{name:\"Tim Duncan\"}) --> (v2) \\ RETURN v2.player.name AS Name, v2.player.age AS Age \\ ORDER BY Age DESC; +-----------------+----------+ | Name | Age | +-----------------+----------+ | __NULL__ | __NULL__ | | \"Manu Ginobili\" | 41 | | \"Tony Parker\" | 36 | +-----------------+----------+","title":"NULL \u503c\u7684\u6392\u5e8f"},{"location":"3.ngql-guide/8.clauses-and-options/return/","text":"RETURN \u00b6 RETURN \u5b50\u53e5\u5b9a\u4e49\u4e86 nGQL \u67e5\u8be2\u7684\u8f93\u51fa\u7ed3\u679c\u3002\u5982\u679c\u9700\u8981\u8fd4\u56de\u591a\u4e2a\u5b57\u6bb5\uff0c\u7528\u82f1\u6587\u9017\u53f7\uff08,\uff09\u5206\u9694\u3002 RETURN \u53ef\u4ee5\u5f15\u5bfc\u5b50\u53e5\u6216\u8bed\u53e5\uff1a RETURN \u5b50\u53e5\u53ef\u4ee5\u7528\u4e8e nGQL \u4e2d\u7684 openCypher \u65b9\u5f0f\u8bed\u53e5\u4e2d\uff0c\u4f8b\u5982 MATCH \u6216 UNWIND \u3002 RETURN \u53ef\u4ee5\u5355\u72ec\u4f7f\u7528\uff0c\u8f93\u51fa\u8868\u8fbe\u5f0f\u7684\u7ed3\u679c\u3002 openCypher \u517c\u5bb9\u6027 \u00b6 \u672c\u6587\u64cd\u4f5c\u4ec5\u9002\u7528\u4e8e nGQL \u4e2d\u7684 openCypher \u65b9\u5f0f\u3002\u5173\u4e8e\u539f\u751f nGQL \u5982\u4f55\u5b9a\u4e49\u8f93\u51fa\u7ed3\u679c\uff0c\u8bf7\u53c2\u89c1 YIELD \u3002 RETURN \u4e0d\u652f\u6301\u5982\u4e0b openCypher \u529f\u80fd\uff1a \u4f7f\u7528\u4e0d\u5728\u82f1\u6587\u5b57\u6bcd\u8868\u4e2d\u7684\u5b57\u7b26\u4f5c\u4e3a\u53d8\u91cf\u540d\u3002\u4f8b\u5982\uff1a MATCH (`\u70b9 1`:player) \\ RETURN `\u70b9 1`; \u8bbe\u7f6e\u4e00\u4e2a\u6a21\u5f0f\uff0c\u5e76\u8fd4\u56de\u8be5\u6a21\u5f0f\u5339\u914d\u7684\u6240\u6709\u5143\u7d20\u3002\u4f8b\u5982\uff1a MATCH (v:player) \\ RETURN (v)-[e]->(v2); \u5386\u53f2\u7248\u672c\u517c\u5bb9\u6027 \u00b6 \u5728 nGQL 1.x \u4e2d\uff0c RETURN \u9002\u7528\u4e8e\u539f\u751f nGQL\uff0c\u8bed\u6cd5\u4e3a RETURN <var_ref> IF <var_ref> IS NOT NULL \u3002 \u4ece nGQL 2.0 \u5f00\u59cb\uff0c RETURN \u4e0d\u9002\u7528\u4e8e\u539f\u751f nGQL\u3002 Map \u987a\u5e8f\u8bf4\u660e \u00b6 RETURN \u8fd4\u56de Map \u65f6\uff0cKey \u7684\u987a\u5e8f\u662f\u672a\u5b9a\u4e49\u7684\u3002 nebula> RETURN {age: 32, name: \"Marco Belinelli\"}; +------------------------------------+ | {age:32,name:\"Marco Belinelli\"} | +------------------------------------+ | {age: 32, name: \"Marco Belinelli\"} | +------------------------------------+ nebula> RETURN {zage: 32, name: \"Marco Belinelli\"}; +-------------------------------------+ | {zage:32,name:\"Marco Belinelli\"} | +-------------------------------------+ | {name: \"Marco Belinelli\", zage: 32} | +-------------------------------------+ \u8fd4\u56de\u70b9\u6216\u8fb9 \u00b6 \u4f7f\u7528 RETURN {<vertex_name> | <edge_name>} \u8fd4\u56de\u70b9\u6216\u8fb9\u7684\u6240\u6709\u4fe1\u606f\u3002 // \u8fd4\u56de\u70b9 nebula> MATCH (v:player) \\ RETURN v; +---------------------------------------------------------------+ | v | +---------------------------------------------------------------+ | (\"player104\" :player{age: 32, name: \"Marco Belinelli\"}) | | (\"player107\" :player{age: 32, name: \"Aron Baynes\"}) | | (\"player116\" :player{age: 34, name: \"LeBron James\"}) | | (\"player120\" :player{age: 29, name: \"James Harden\"}) | | (\"player125\" :player{age: 41, name: \"Manu Ginobili\"}) | +---------------------------------------------------------------+ ... // \u8fd4\u56de\u8fb9 nebula> MATCH (v:player)-[e]->() \\ RETURN e; +------------------------------------------------------------------------------+ | e | +------------------------------------------------------------------------------+ | [:follow \"player104\"->\"player100\" @0 {degree: 55}] | | [:follow \"player104\"->\"player101\" @0 {degree: 50}] | | [:follow \"player104\"->\"player105\" @0 {degree: 60}] | | [:serve \"player104\"->\"team200\" @0 {end_year: 2009, start_year: 2007}] | | [:serve \"player104\"->\"team208\" @0 {end_year: 2016, start_year: 2015}] | +------------------------------------------------------------------------------+ ... \u8fd4\u56de\u70b9 ID \u00b6 \u4f7f\u7528 id() \u51fd\u6570\u8fd4\u56de\u70b9 ID\u3002 nebula> MATCH (v:player{name:\"Tim Duncan\"}) \\ RETURN id(v); +-------------+ | id(v) | +-------------+ | \"player100\" | +-------------+ \u8fd4\u56de Tag \u00b6 \u4f7f\u7528 labels() \u51fd\u6570\u8fd4\u56de\u70b9\u4e0a\u7684 Tag \u5217\u8868\u3002 nebula> MATCH (v:player{name:\"Tim Duncan\"}) \\ RETURN labels(v); +------------+ | labels(v) | +------------+ | [\"player\"] | +------------+ \u8fd4\u56de\u5217\u8868 labels(v) \u4e2d\u7684\u7b2c N \u4e2a\u5143\u7d20\uff0c\u53ef\u4ee5\u4f7f\u7528 labels(v)[n-1] \u3002\u4f8b\u5982\u4e0b\u9762\u793a\u4f8b\u4f7f\u7528 labels(v)[0] \u68c0\u7d22\u7b2c\u4e00\u4e2a\u5143\u7d20\u3002 nebula> MATCH (v:player{name:\"Tim Duncan\"}) \\ RETURN labels(v)[0]; +--------------+ | labels(v)[0] | +--------------+ | \"player\" | +--------------+ \u8fd4\u56de\u5c5e\u6027 \u00b6 \u8fd4\u56de\u70b9\u7684\u5c5e\u6027\u65f6\uff0c\u5fc5\u9700\u6307\u5b9a\u5c5e\u6027\u6240\u5c5e\u7684 Tag\uff0c\u56e0\u4e3a\u70b9\u53ef\u4ee5\u6709\u591a\u4e2a Tag\uff0c\u5e76\u4e14\u540c\u4e00\u4e2a\u5c5e\u6027\u540d\u53ef\u4ee5\u5728\u4e0d\u540c\u7684 Tag \u4e0a\u51fa\u73b0\u3002 \u652f\u6301\u6307\u5b9a\u70b9\u7684 Tag \u8fd4\u56de\u8be5 Tag \u7684\u6240\u6709\u5c5e\u6027\uff1b\u4e5f\u652f\u6301\u6307\u5b9a\u70b9\u7684 Tag \u548c\u67d0\u4e2a\u5c5e\u6027\u540d\uff0c\u8fd4\u56de\u8be5 Tag \u7684\u6307\u5b9a\u5c5e\u6027\u3002 // \u8fd4\u56de\u70b9\u7684\u5c5e\u6027 nebula> MATCH (v:player) \\ RETURN v.player, v.player.name, v.player.age \\ LIMIT 3; +--------------------------------------+---------------------+--------------+ | v.player | v.player.name | v.player.age | +--------------------------------------+---------------------+--------------+ | {age: 33, name: \"LaMarcus Aldridge\"} | \"LaMarcus Aldridge\" | 33 | | {age: 25, name: \"Kyle Anderson\"} | \"Kyle Anderson\" | 25 | | {age: 40, name: \"Kobe Bryant\"} | \"Kobe Bryant\" | 40 | +--------------------------------------+---------------------+--------------+ \u8fd4\u56de\u8fb9\u7684\u5c5e\u6027\u65f6\uff0c\u65e0\u9700\u6307\u5b9a\u5c5e\u6027\u6240\u5c5e\u7684 Edge type\uff0c\u56e0\u4e3a\u8fb9\u53ea\u80fd\u6709\u4e00\u4e2a Edge type\u3002 // \u8fd4\u56de\u8fb9\u7684\u5c5e\u6027 nebula> MATCH (v:player{name:\"Tim Duncan\"})-[e]->() \\ RETURN e.start_year, e.degree \\ +--------------+----------+ | e.start_year | e.degree | +--------------+----------+ | __NULL__ | 95 | | __NULL__ | 95 | | 1997 | __NULL__ | +--------------+----------+ \u4f7f\u7528 properties() \u51fd\u6570\u8fd4\u56de\u70b9\u6216\u8fb9\u7684\u6240\u6709\u5c5e\u6027\u3002 nebula> MATCH p=(v:player{name:\"Tim Duncan\"})-[]->(v2) \\ RETURN properties(v2); +----------------------------------+ | properties(v2) | +----------------------------------+ | {name: \"Spurs\"} | | {age: 36, name: \"Tony Parker\"} | | {age: 41, name: \"Manu Ginobili\"} | +----------------------------------+ \u8fd4\u56de Edge type \u00b6 \u4f7f\u7528 type() \u51fd\u6570\u8fd4\u56de\u5339\u914d\u7684 Edge type\u3002 nebula> MATCH p=(v:player{name:\"Tim Duncan\"})-[e]->() \\ RETURN DISTINCT type(e); +----------+ | type(e) | +----------+ | \"serve\" | | \"follow\" | +----------+ \u8fd4\u56de\u8def\u5f84 \u00b6 \u4f7f\u7528 RETURN <path_name> \u8fd4\u56de\u5339\u914d\u8def\u5f84\u7684\u6240\u6709\u4fe1\u606f\u3002 nebula> MATCH p=(v:player{name:\"Tim Duncan\"})-[*3]->() \\ RETURN p; +----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+ | p | +----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+ | <(\"player100\" :player{age: 42, name: \"Tim Duncan\"})-[:follow@0 {degree: 95}]->(\"player101\" :player{age: 36, name: \"Tony Parker\"})-[:follow@0 {degree: 90}]->(\"player102\" :player{age: 33, name: \"LaMarcus Aldridge\"})-[:serve@0 {end_year: 2019, start_year: 2015}]->(\"team204\" :team{name: \"Spurs\"})> | | <(\"player100\" :player{age: 42, name: \"Tim Duncan\"})-[:follow@0 {degree: 95}]->(\"player101\" :player{age: 36, name: \"Tony Parker\"})-[:follow@0 {degree: 90}]->(\"player102\" :player{age: 33, name: \"LaMarcus Aldridge\"})-[:serve@0 {end_year: 2015, start_year: 2006}]->(\"team203\" :team{name: \"Trail Blazers\"})> | | <(\"player100\" :player{age: 42, name: \"Tim Duncan\"})-[:follow@0 {degree: 95}]->(\"player101\" :player{age: 36, name: \"Tony Parker\"})-[:follow@0 {degree: 90}]->(\"player102\" :player{age: 33, name: \"LaMarcus Aldridge\"})-[:follow@0 {degree: 75}]->(\"player101\" :player{age: 36, name: \"Tony Parker\"})> | +----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+ ... \u8fd4\u56de\u8def\u5f84\u4e2d\u7684\u70b9 \u00b6 \u4f7f\u7528 nodes() \u51fd\u6570\u8fd4\u56de\u8def\u5f84\u4e2d\u7684\u6240\u6709\u70b9\u3002 nebula> MATCH p=(v:player{name:\"Tim Duncan\"})-[]->(v2) \\ RETURN nodes(p); +-------------------------------------------------------------------------------------------------------------+ | nodes(p) | +-------------------------------------------------------------------------------------------------------------+ | [(\"player100\" :player{age: 42, name: \"Tim Duncan\"}), (\"team204\" :team{name: \"Spurs\"})] | | [(\"player100\" :player{age: 42, name: \"Tim Duncan\"}), (\"player101\" :player{age: 36, name: \"Tony Parker\"})] | | [(\"player100\" :player{age: 42, name: \"Tim Duncan\"}), (\"player125\" :player{age: 41, name: \"Manu Ginobili\"})] | +-------------------------------------------------------------------------------------------------------------+ \u8fd4\u56de\u8def\u5f84\u4e2d\u7684\u8fb9 \u00b6 \u4f7f\u7528 relationships() \u51fd\u6570\u8fd4\u56de\u8def\u5f84\u4e2d\u7684\u6240\u6709\u8fb9\u3002 nebula> MATCH p=(v:player{name:\"Tim Duncan\"})-[]->(v2) \\ RETURN relationships(p); +-------------------------------------------------------------------------+ | relationships(p) | +-------------------------------------------------------------------------+ | [[:serve \"player100\"->\"team204\" @0 {end_year: 2016, start_year: 1997}]] | | [[:follow \"player100\"->\"player101\" @0 {degree: 95}]] | | [[:follow \"player100\"->\"player125\" @0 {degree: 95}]] | +-------------------------------------------------------------------------+ \u8fd4\u56de\u8def\u5f84\u957f\u5ea6 \u00b6 \u4f7f\u7528 length() \u51fd\u6570\u68c0\u7d22\u8def\u5f84\u7684\u957f\u5ea6\u3002 nebula> MATCH p=(v:player{name:\"Tim Duncan\"})-[*..2]->(v2) \\ RETURN p AS Paths, length(p) AS Length; +------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+ | Paths | Length | +------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+ | <(\"player100\" :player{age: 42, name: \"Tim Duncan\"})-[:serve@0 {end_year: 2016, start_year: 1997}]->(\"team204\" :team{name: \"Spurs\"})> | 1 | | <(\"player100\" :player{age: 42, name: \"Tim Duncan\"})-[:follow@0 {degree: 95}]->(\"player101\" :player{age: 36, name: \"Tony Parker\"})> | 1 | | <(\"player100\" :player{age: 42, name: \"Tim Duncan\"})-[:follow@0 {degree: 95}]->(\"player125\" :player{age: 41, name: \"Manu Ginobili\"})> | 1 | | <(\"player100\" :player{age: 42, name: \"Tim Duncan\"})-[:follow@0 {degree: 95}]->(\"player101\" :player{age: 36, name: \"Tony Parker\"})-[:serve@0 {end_year: 2018, start_year: 1999}]->(\"team204\" :team{name: \"Spurs\"})> | 2 | | <(\"player100\" :player{age: 42, name: \"Tim Duncan\"})-[:follow@0 {degree: 95}]->(\"player101\" :player{age: 36, name: \"Tony Parker\"})-[:serve@0 {end_year: 2019, start_year: 2018}]->(\"team215\" :team{name: \"Hornets\"})> | 2 | | <(\"player100\" :player{age: 42, name: \"Tim Duncan\"})-[:follow@0 {degree: 95}]->(\"player101\" :player{age: 36, name: \"Tony Parker\"})-[:follow@0 {degree: 95}]->(\"player100\" :player{age: 42, name: \"Tim Duncan\"})> | 2 | | <(\"player100\" :player{age: 42, name: \"Tim Duncan\"})-[:follow@0 {degree: 95}]->(\"player101\" :player{age: 36, name: \"Tony Parker\"})-[:follow@0 {degree: 90}]->(\"player102\" :player{age: 33, name: \"LaMarcus Aldridge\"})> | 2 | | <(\"player100\" :player{age: 42, name: \"Tim Duncan\"})-[:follow@0 {degree: 95}]->(\"player101\" :player{age: 36, name: \"Tony Parker\"})-[:follow@0 {degree: 95}]->(\"player125\" :player{age: 41, name: \"Manu Ginobili\"})> | 2 | | <(\"player100\" :player{age: 42, name: \"Tim Duncan\"})-[:follow@0 {degree: 95}]->(\"player125\" :player{age: 41, name: \"Manu Ginobili\"})-[:serve@0 {end_year: 2018, start_year: 2002}]->(\"team204\" :team{name: \"Spurs\"})> | 2 | | <(\"player100\" :player{age: 42, name: \"Tim Duncan\"})-[:follow@0 {degree: 95}]->(\"player125\" :player{age: 41, name: \"Manu Ginobili\"})-[:follow@0 {degree: 90}]->(\"player100\" :player{age: 42, name: \"Tim Duncan\"})> | 2 | +------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+ \u8fd4\u56de\u6240\u6709\u5143\u7d20 \u00b6 \u4f7f\u7528\u661f\u53f7\uff08*\uff09\u8fd4\u56de\u5339\u914d\u6a21\u5f0f\u4e2d\u7684\u6240\u6709\u5143\u7d20\u3002 nebula> MATCH (v:player{name:\"Tim Duncan\"}) \\ RETURN *; +----------------------------------------------------+ | v | +----------------------------------------------------+ | (\"player100\" :player{age: 42, name: \"Tim Duncan\"}) | +----------------------------------------------------+ nebula> MATCH (v:player{name:\"Tim Duncan\"})-[e]->(v2) \\ RETURN *; +----------------------------------------------------+-----------------------------------------------------------------------+-------------------------------------------------------+ | v | e | v2 | +----------------------------------------------------+-----------------------------------------------------------------------+-------------------------------------------------------+ | (\"player100\" :player{age: 42, name: \"Tim Duncan\"}) | [:follow \"player100\"->\"player101\" @0 {degree: 95}] | (\"player101\" :player{age: 36, name: \"Tony Parker\"}) | | (\"player100\" :player{age: 42, name: \"Tim Duncan\"}) | [:follow \"player100\"->\"player125\" @0 {degree: 95}] | (\"player125\" :player{age: 41, name: \"Manu Ginobili\"}) | | (\"player100\" :player{age: 42, name: \"Tim Duncan\"}) | [:serve \"player100\"->\"team204\" @0 {end_year: 2016, start_year: 1997}] | (\"team204\" :team{name: \"Spurs\"}) | +----------------------------------------------------+-----------------------------------------------------------------------+-------------------------------------------------------+ \u91cd\u547d\u540d\u5b57\u6bb5 \u00b6 \u4f7f\u7528\u8bed\u6cd5 AS <alias> \u91cd\u547d\u540d\u8f93\u51fa\u7ed3\u679c\u4e2d\u7684\u5b57\u6bb5\u3002 nebula> MATCH (v:player{name:\"Tim Duncan\"})-[:serve]->(v2) \\ RETURN v2.team.name AS Team; +---------+ | Team | +---------+ | \"Spurs\" | +---------+ nebula> RETURN \"Amber\" AS Name; +---------+ | Name | +---------+ | \"Amber\" | +---------+ \u8fd4\u56de\u4e0d\u5b58\u5728\u7684\u5c5e\u6027 \u00b6 \u5982\u679c\u5339\u914d\u7684\u7ed3\u679c\u4e2d\uff0c\u67d0\u4e2a\u5c5e\u6027\u4e0d\u5b58\u5728\uff0c\u4f1a\u8fd4\u56de NULL \u3002 nebula> MATCH (v:player{name:\"Tim Duncan\"})-[e]->(v2) \\ RETURN v2.player.name, type(e), v2.player.age; +-----------------+----------+---------------+ | v2.player.name | type(e) | v2.player.age | +-----------------+----------+---------------+ | \"Manu Ginobili\" | \"follow\" | 41 | | __NULL__ | \"serve\" | __NULL__ | | \"Tony Parker\" | \"follow\" | 36 | +-----------------+----------+---------------+ \u8fd4\u56de\u8868\u8fbe\u5f0f\u7ed3\u679c \u00b6 RETURN \u8bed\u53e5\u53ef\u4ee5\u8fd4\u56de\u5b57\u9762\u91cf\u3001\u51fd\u6570\u6216\u8c13\u8bcd\u7b49\u8868\u8fbe\u5f0f\u7684\u7ed3\u679c\u3002 nebula> MATCH (v:player{name:\"Tony Parker\"})-->(v2:player) \\ RETURN DISTINCT v2.player.name, \"Hello\"+\" graphs!\", v2.player.age > 35; +---------------------+----------------------+--------------------+ | v2.player.name | (\"Hello\"+\" graphs!\") | (v2.player.age>35) | +---------------------+----------------------+--------------------+ | \"LaMarcus Aldridge\" | \"Hello graphs!\" | false | | \"Tim Duncan\" | \"Hello graphs!\" | true | | \"Manu Ginobili\" | \"Hello graphs!\" | true | +---------------------+----------------------+--------------------+ nebula> RETURN 1+1; +-------+ | (1+1) | +-------+ | 2 | +-------+ nebula> RETURN 1- -1; +----------+ | (1--(1)) | +----------+ | 2 | +----------+ nebula> RETURN 3 > 1; +-------+ | (3>1) | +-------+ | true | +-------+ nebula> RETURN 1+1, rand32(1, 5); +-------+-------------+ | (1+1) | rand32(1,5) | +-------+-------------+ | 2 | 1 | +-------+-------------+ \u8fd4\u56de\u552f\u4e00\u5b57\u6bb5 \u00b6 \u4f7f\u7528 DISTINCT \u53ef\u4ee5\u5220\u9664\u7ed3\u679c\u96c6\u4e2d\u7684\u91cd\u590d\u5b57\u6bb5\u3002 # \u672a\u4f7f\u7528 DISTINCT\u3002 nebula> MATCH (v:player{name:\"Tony Parker\"})--(v2:player) \\ RETURN v2.player.name, v2.player.age; +---------------------+--------+ | v2.name | v2.age | +---------------------+--------+ | \"Tim Duncan\" | 42 | | \"LaMarcus Aldridge\" | 33 | | \"Marco Belinelli\" | 32 | | \"Boris Diaw\" | 36 | | \"Dejounte Murray\" | 29 | | \"Tim Duncan\" | 42 | | \"LaMarcus Aldridge\" | 33 | | \"Manu Ginobili\" | 41 | +---------------------+--------+ # \u4f7f\u7528 DISTINCT\u3002 nebula> MATCH (v:player{name:\"Tony Parker\"})--(v2:player) \\ RETURN DISTINCT v2.player.name, v2.player.age; +---------------------+--------+ | v2.name | v2.age | +---------------------+--------+ | \"Tim Duncan\" | 42 | | \"LaMarcus Aldridge\" | 33 | | \"Marco Belinelli\" | 32 | | \"Boris Diaw\" | 36 | | \"Dejounte Murray\" | 29 | | \"Manu Ginobili\" | 41 | +---------------------+--------+","title":"RETURN"},{"location":"3.ngql-guide/8.clauses-and-options/return/#return","text":"RETURN \u5b50\u53e5\u5b9a\u4e49\u4e86 nGQL \u67e5\u8be2\u7684\u8f93\u51fa\u7ed3\u679c\u3002\u5982\u679c\u9700\u8981\u8fd4\u56de\u591a\u4e2a\u5b57\u6bb5\uff0c\u7528\u82f1\u6587\u9017\u53f7\uff08,\uff09\u5206\u9694\u3002 RETURN \u53ef\u4ee5\u5f15\u5bfc\u5b50\u53e5\u6216\u8bed\u53e5\uff1a RETURN \u5b50\u53e5\u53ef\u4ee5\u7528\u4e8e nGQL \u4e2d\u7684 openCypher \u65b9\u5f0f\u8bed\u53e5\u4e2d\uff0c\u4f8b\u5982 MATCH \u6216 UNWIND \u3002 RETURN \u53ef\u4ee5\u5355\u72ec\u4f7f\u7528\uff0c\u8f93\u51fa\u8868\u8fbe\u5f0f\u7684\u7ed3\u679c\u3002","title":"RETURN"},{"location":"3.ngql-guide/8.clauses-and-options/return/#opencypher","text":"\u672c\u6587\u64cd\u4f5c\u4ec5\u9002\u7528\u4e8e nGQL \u4e2d\u7684 openCypher \u65b9\u5f0f\u3002\u5173\u4e8e\u539f\u751f nGQL \u5982\u4f55\u5b9a\u4e49\u8f93\u51fa\u7ed3\u679c\uff0c\u8bf7\u53c2\u89c1 YIELD \u3002 RETURN \u4e0d\u652f\u6301\u5982\u4e0b openCypher \u529f\u80fd\uff1a \u4f7f\u7528\u4e0d\u5728\u82f1\u6587\u5b57\u6bcd\u8868\u4e2d\u7684\u5b57\u7b26\u4f5c\u4e3a\u53d8\u91cf\u540d\u3002\u4f8b\u5982\uff1a MATCH (`\u70b9 1`:player) \\ RETURN `\u70b9 1`; \u8bbe\u7f6e\u4e00\u4e2a\u6a21\u5f0f\uff0c\u5e76\u8fd4\u56de\u8be5\u6a21\u5f0f\u5339\u914d\u7684\u6240\u6709\u5143\u7d20\u3002\u4f8b\u5982\uff1a MATCH (v:player) \\ RETURN (v)-[e]->(v2);","title":"openCypher \u517c\u5bb9\u6027"},{"location":"3.ngql-guide/8.clauses-and-options/return/#_1","text":"\u5728 nGQL 1.x \u4e2d\uff0c RETURN \u9002\u7528\u4e8e\u539f\u751f nGQL\uff0c\u8bed\u6cd5\u4e3a RETURN <var_ref> IF <var_ref> IS NOT NULL \u3002 \u4ece nGQL 2.0 \u5f00\u59cb\uff0c RETURN \u4e0d\u9002\u7528\u4e8e\u539f\u751f nGQL\u3002","title":"\u5386\u53f2\u7248\u672c\u517c\u5bb9\u6027"},{"location":"3.ngql-guide/8.clauses-and-options/return/#map","text":"RETURN \u8fd4\u56de Map \u65f6\uff0cKey \u7684\u987a\u5e8f\u662f\u672a\u5b9a\u4e49\u7684\u3002 nebula> RETURN {age: 32, name: \"Marco Belinelli\"}; +------------------------------------+ | {age:32,name:\"Marco Belinelli\"} | +------------------------------------+ | {age: 32, name: \"Marco Belinelli\"} | +------------------------------------+ nebula> RETURN {zage: 32, name: \"Marco Belinelli\"}; +-------------------------------------+ | {zage:32,name:\"Marco Belinelli\"} | +-------------------------------------+ | {name: \"Marco Belinelli\", zage: 32} | +-------------------------------------+","title":"Map \u987a\u5e8f\u8bf4\u660e"},{"location":"3.ngql-guide/8.clauses-and-options/return/#_2","text":"\u4f7f\u7528 RETURN {<vertex_name> | <edge_name>} \u8fd4\u56de\u70b9\u6216\u8fb9\u7684\u6240\u6709\u4fe1\u606f\u3002 // \u8fd4\u56de\u70b9 nebula> MATCH (v:player) \\ RETURN v; +---------------------------------------------------------------+ | v | +---------------------------------------------------------------+ | (\"player104\" :player{age: 32, name: \"Marco Belinelli\"}) | | (\"player107\" :player{age: 32, name: \"Aron Baynes\"}) | | (\"player116\" :player{age: 34, name: \"LeBron James\"}) | | (\"player120\" :player{age: 29, name: \"James Harden\"}) | | (\"player125\" :player{age: 41, name: \"Manu Ginobili\"}) | +---------------------------------------------------------------+ ... // \u8fd4\u56de\u8fb9 nebula> MATCH (v:player)-[e]->() \\ RETURN e; +------------------------------------------------------------------------------+ | e | +------------------------------------------------------------------------------+ | [:follow \"player104\"->\"player100\" @0 {degree: 55}] | | [:follow \"player104\"->\"player101\" @0 {degree: 50}] | | [:follow \"player104\"->\"player105\" @0 {degree: 60}] | | [:serve \"player104\"->\"team200\" @0 {end_year: 2009, start_year: 2007}] | | [:serve \"player104\"->\"team208\" @0 {end_year: 2016, start_year: 2015}] | +------------------------------------------------------------------------------+ ...","title":"\u8fd4\u56de\u70b9\u6216\u8fb9"},{"location":"3.ngql-guide/8.clauses-and-options/return/#id","text":"\u4f7f\u7528 id() \u51fd\u6570\u8fd4\u56de\u70b9 ID\u3002 nebula> MATCH (v:player{name:\"Tim Duncan\"}) \\ RETURN id(v); +-------------+ | id(v) | +-------------+ | \"player100\" | +-------------+","title":"\u8fd4\u56de\u70b9 ID"},{"location":"3.ngql-guide/8.clauses-and-options/return/#tag","text":"\u4f7f\u7528 labels() \u51fd\u6570\u8fd4\u56de\u70b9\u4e0a\u7684 Tag \u5217\u8868\u3002 nebula> MATCH (v:player{name:\"Tim Duncan\"}) \\ RETURN labels(v); +------------+ | labels(v) | +------------+ | [\"player\"] | +------------+ \u8fd4\u56de\u5217\u8868 labels(v) \u4e2d\u7684\u7b2c N \u4e2a\u5143\u7d20\uff0c\u53ef\u4ee5\u4f7f\u7528 labels(v)[n-1] \u3002\u4f8b\u5982\u4e0b\u9762\u793a\u4f8b\u4f7f\u7528 labels(v)[0] \u68c0\u7d22\u7b2c\u4e00\u4e2a\u5143\u7d20\u3002 nebula> MATCH (v:player{name:\"Tim Duncan\"}) \\ RETURN labels(v)[0]; +--------------+ | labels(v)[0] | +--------------+ | \"player\" | +--------------+","title":"\u8fd4\u56de Tag"},{"location":"3.ngql-guide/8.clauses-and-options/return/#_3","text":"\u8fd4\u56de\u70b9\u7684\u5c5e\u6027\u65f6\uff0c\u5fc5\u9700\u6307\u5b9a\u5c5e\u6027\u6240\u5c5e\u7684 Tag\uff0c\u56e0\u4e3a\u70b9\u53ef\u4ee5\u6709\u591a\u4e2a Tag\uff0c\u5e76\u4e14\u540c\u4e00\u4e2a\u5c5e\u6027\u540d\u53ef\u4ee5\u5728\u4e0d\u540c\u7684 Tag \u4e0a\u51fa\u73b0\u3002 \u652f\u6301\u6307\u5b9a\u70b9\u7684 Tag \u8fd4\u56de\u8be5 Tag \u7684\u6240\u6709\u5c5e\u6027\uff1b\u4e5f\u652f\u6301\u6307\u5b9a\u70b9\u7684 Tag \u548c\u67d0\u4e2a\u5c5e\u6027\u540d\uff0c\u8fd4\u56de\u8be5 Tag \u7684\u6307\u5b9a\u5c5e\u6027\u3002 // \u8fd4\u56de\u70b9\u7684\u5c5e\u6027 nebula> MATCH (v:player) \\ RETURN v.player, v.player.name, v.player.age \\ LIMIT 3; +--------------------------------------+---------------------+--------------+ | v.player | v.player.name | v.player.age | +--------------------------------------+---------------------+--------------+ | {age: 33, name: \"LaMarcus Aldridge\"} | \"LaMarcus Aldridge\" | 33 | | {age: 25, name: \"Kyle Anderson\"} | \"Kyle Anderson\" | 25 | | {age: 40, name: \"Kobe Bryant\"} | \"Kobe Bryant\" | 40 | +--------------------------------------+---------------------+--------------+ \u8fd4\u56de\u8fb9\u7684\u5c5e\u6027\u65f6\uff0c\u65e0\u9700\u6307\u5b9a\u5c5e\u6027\u6240\u5c5e\u7684 Edge type\uff0c\u56e0\u4e3a\u8fb9\u53ea\u80fd\u6709\u4e00\u4e2a Edge type\u3002 // \u8fd4\u56de\u8fb9\u7684\u5c5e\u6027 nebula> MATCH (v:player{name:\"Tim Duncan\"})-[e]->() \\ RETURN e.start_year, e.degree \\ +--------------+----------+ | e.start_year | e.degree | +--------------+----------+ | __NULL__ | 95 | | __NULL__ | 95 | | 1997 | __NULL__ | +--------------+----------+ \u4f7f\u7528 properties() \u51fd\u6570\u8fd4\u56de\u70b9\u6216\u8fb9\u7684\u6240\u6709\u5c5e\u6027\u3002 nebula> MATCH p=(v:player{name:\"Tim Duncan\"})-[]->(v2) \\ RETURN properties(v2); +----------------------------------+ | properties(v2) | +----------------------------------+ | {name: \"Spurs\"} | | {age: 36, name: \"Tony Parker\"} | | {age: 41, name: \"Manu Ginobili\"} | +----------------------------------+","title":"\u8fd4\u56de\u5c5e\u6027"},{"location":"3.ngql-guide/8.clauses-and-options/return/#edge_type","text":"\u4f7f\u7528 type() \u51fd\u6570\u8fd4\u56de\u5339\u914d\u7684 Edge type\u3002 nebula> MATCH p=(v:player{name:\"Tim Duncan\"})-[e]->() \\ RETURN DISTINCT type(e); +----------+ | type(e) | +----------+ | \"serve\" | | \"follow\" | +----------+","title":"\u8fd4\u56de Edge type"},{"location":"3.ngql-guide/8.clauses-and-options/return/#_4","text":"\u4f7f\u7528 RETURN <path_name> \u8fd4\u56de\u5339\u914d\u8def\u5f84\u7684\u6240\u6709\u4fe1\u606f\u3002 nebula> MATCH p=(v:player{name:\"Tim Duncan\"})-[*3]->() \\ RETURN p; +----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+ | p | +----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+ | <(\"player100\" :player{age: 42, name: \"Tim Duncan\"})-[:follow@0 {degree: 95}]->(\"player101\" :player{age: 36, name: \"Tony Parker\"})-[:follow@0 {degree: 90}]->(\"player102\" :player{age: 33, name: \"LaMarcus Aldridge\"})-[:serve@0 {end_year: 2019, start_year: 2015}]->(\"team204\" :team{name: \"Spurs\"})> | | <(\"player100\" :player{age: 42, name: \"Tim Duncan\"})-[:follow@0 {degree: 95}]->(\"player101\" :player{age: 36, name: \"Tony Parker\"})-[:follow@0 {degree: 90}]->(\"player102\" :player{age: 33, name: \"LaMarcus Aldridge\"})-[:serve@0 {end_year: 2015, start_year: 2006}]->(\"team203\" :team{name: \"Trail Blazers\"})> | | <(\"player100\" :player{age: 42, name: \"Tim Duncan\"})-[:follow@0 {degree: 95}]->(\"player101\" :player{age: 36, name: \"Tony Parker\"})-[:follow@0 {degree: 90}]->(\"player102\" :player{age: 33, name: \"LaMarcus Aldridge\"})-[:follow@0 {degree: 75}]->(\"player101\" :player{age: 36, name: \"Tony Parker\"})> | +----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+ ...","title":"\u8fd4\u56de\u8def\u5f84"},{"location":"3.ngql-guide/8.clauses-and-options/return/#_5","text":"\u4f7f\u7528 nodes() \u51fd\u6570\u8fd4\u56de\u8def\u5f84\u4e2d\u7684\u6240\u6709\u70b9\u3002 nebula> MATCH p=(v:player{name:\"Tim Duncan\"})-[]->(v2) \\ RETURN nodes(p); +-------------------------------------------------------------------------------------------------------------+ | nodes(p) | +-------------------------------------------------------------------------------------------------------------+ | [(\"player100\" :player{age: 42, name: \"Tim Duncan\"}), (\"team204\" :team{name: \"Spurs\"})] | | [(\"player100\" :player{age: 42, name: \"Tim Duncan\"}), (\"player101\" :player{age: 36, name: \"Tony Parker\"})] | | [(\"player100\" :player{age: 42, name: \"Tim Duncan\"}), (\"player125\" :player{age: 41, name: \"Manu Ginobili\"})] | +-------------------------------------------------------------------------------------------------------------+","title":"\u8fd4\u56de\u8def\u5f84\u4e2d\u7684\u70b9"},{"location":"3.ngql-guide/8.clauses-and-options/return/#_6","text":"\u4f7f\u7528 relationships() \u51fd\u6570\u8fd4\u56de\u8def\u5f84\u4e2d\u7684\u6240\u6709\u8fb9\u3002 nebula> MATCH p=(v:player{name:\"Tim Duncan\"})-[]->(v2) \\ RETURN relationships(p); +-------------------------------------------------------------------------+ | relationships(p) | +-------------------------------------------------------------------------+ | [[:serve \"player100\"->\"team204\" @0 {end_year: 2016, start_year: 1997}]] | | [[:follow \"player100\"->\"player101\" @0 {degree: 95}]] | | [[:follow \"player100\"->\"player125\" @0 {degree: 95}]] | +-------------------------------------------------------------------------+","title":"\u8fd4\u56de\u8def\u5f84\u4e2d\u7684\u8fb9"},{"location":"3.ngql-guide/8.clauses-and-options/return/#_7","text":"\u4f7f\u7528 length() \u51fd\u6570\u68c0\u7d22\u8def\u5f84\u7684\u957f\u5ea6\u3002 nebula> MATCH p=(v:player{name:\"Tim Duncan\"})-[*..2]->(v2) \\ RETURN p AS Paths, length(p) AS Length; +------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+ | Paths | Length | +------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+ | <(\"player100\" :player{age: 42, name: \"Tim Duncan\"})-[:serve@0 {end_year: 2016, start_year: 1997}]->(\"team204\" :team{name: \"Spurs\"})> | 1 | | <(\"player100\" :player{age: 42, name: \"Tim Duncan\"})-[:follow@0 {degree: 95}]->(\"player101\" :player{age: 36, name: \"Tony Parker\"})> | 1 | | <(\"player100\" :player{age: 42, name: \"Tim Duncan\"})-[:follow@0 {degree: 95}]->(\"player125\" :player{age: 41, name: \"Manu Ginobili\"})> | 1 | | <(\"player100\" :player{age: 42, name: \"Tim Duncan\"})-[:follow@0 {degree: 95}]->(\"player101\" :player{age: 36, name: \"Tony Parker\"})-[:serve@0 {end_year: 2018, start_year: 1999}]->(\"team204\" :team{name: \"Spurs\"})> | 2 | | <(\"player100\" :player{age: 42, name: \"Tim Duncan\"})-[:follow@0 {degree: 95}]->(\"player101\" :player{age: 36, name: \"Tony Parker\"})-[:serve@0 {end_year: 2019, start_year: 2018}]->(\"team215\" :team{name: \"Hornets\"})> | 2 | | <(\"player100\" :player{age: 42, name: \"Tim Duncan\"})-[:follow@0 {degree: 95}]->(\"player101\" :player{age: 36, name: \"Tony Parker\"})-[:follow@0 {degree: 95}]->(\"player100\" :player{age: 42, name: \"Tim Duncan\"})> | 2 | | <(\"player100\" :player{age: 42, name: \"Tim Duncan\"})-[:follow@0 {degree: 95}]->(\"player101\" :player{age: 36, name: \"Tony Parker\"})-[:follow@0 {degree: 90}]->(\"player102\" :player{age: 33, name: \"LaMarcus Aldridge\"})> | 2 | | <(\"player100\" :player{age: 42, name: \"Tim Duncan\"})-[:follow@0 {degree: 95}]->(\"player101\" :player{age: 36, name: \"Tony Parker\"})-[:follow@0 {degree: 95}]->(\"player125\" :player{age: 41, name: \"Manu Ginobili\"})> | 2 | | <(\"player100\" :player{age: 42, name: \"Tim Duncan\"})-[:follow@0 {degree: 95}]->(\"player125\" :player{age: 41, name: \"Manu Ginobili\"})-[:serve@0 {end_year: 2018, start_year: 2002}]->(\"team204\" :team{name: \"Spurs\"})> | 2 | | <(\"player100\" :player{age: 42, name: \"Tim Duncan\"})-[:follow@0 {degree: 95}]->(\"player125\" :player{age: 41, name: \"Manu Ginobili\"})-[:follow@0 {degree: 90}]->(\"player100\" :player{age: 42, name: \"Tim Duncan\"})> | 2 | +------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+","title":"\u8fd4\u56de\u8def\u5f84\u957f\u5ea6"},{"location":"3.ngql-guide/8.clauses-and-options/return/#_8","text":"\u4f7f\u7528\u661f\u53f7\uff08*\uff09\u8fd4\u56de\u5339\u914d\u6a21\u5f0f\u4e2d\u7684\u6240\u6709\u5143\u7d20\u3002 nebula> MATCH (v:player{name:\"Tim Duncan\"}) \\ RETURN *; +----------------------------------------------------+ | v | +----------------------------------------------------+ | (\"player100\" :player{age: 42, name: \"Tim Duncan\"}) | +----------------------------------------------------+ nebula> MATCH (v:player{name:\"Tim Duncan\"})-[e]->(v2) \\ RETURN *; +----------------------------------------------------+-----------------------------------------------------------------------+-------------------------------------------------------+ | v | e | v2 | +----------------------------------------------------+-----------------------------------------------------------------------+-------------------------------------------------------+ | (\"player100\" :player{age: 42, name: \"Tim Duncan\"}) | [:follow \"player100\"->\"player101\" @0 {degree: 95}] | (\"player101\" :player{age: 36, name: \"Tony Parker\"}) | | (\"player100\" :player{age: 42, name: \"Tim Duncan\"}) | [:follow \"player100\"->\"player125\" @0 {degree: 95}] | (\"player125\" :player{age: 41, name: \"Manu Ginobili\"}) | | (\"player100\" :player{age: 42, name: \"Tim Duncan\"}) | [:serve \"player100\"->\"team204\" @0 {end_year: 2016, start_year: 1997}] | (\"team204\" :team{name: \"Spurs\"}) | +----------------------------------------------------+-----------------------------------------------------------------------+-------------------------------------------------------+","title":"\u8fd4\u56de\u6240\u6709\u5143\u7d20"},{"location":"3.ngql-guide/8.clauses-and-options/return/#_9","text":"\u4f7f\u7528\u8bed\u6cd5 AS <alias> \u91cd\u547d\u540d\u8f93\u51fa\u7ed3\u679c\u4e2d\u7684\u5b57\u6bb5\u3002 nebula> MATCH (v:player{name:\"Tim Duncan\"})-[:serve]->(v2) \\ RETURN v2.team.name AS Team; +---------+ | Team | +---------+ | \"Spurs\" | +---------+ nebula> RETURN \"Amber\" AS Name; +---------+ | Name | +---------+ | \"Amber\" | +---------+","title":"\u91cd\u547d\u540d\u5b57\u6bb5"},{"location":"3.ngql-guide/8.clauses-and-options/return/#_10","text":"\u5982\u679c\u5339\u914d\u7684\u7ed3\u679c\u4e2d\uff0c\u67d0\u4e2a\u5c5e\u6027\u4e0d\u5b58\u5728\uff0c\u4f1a\u8fd4\u56de NULL \u3002 nebula> MATCH (v:player{name:\"Tim Duncan\"})-[e]->(v2) \\ RETURN v2.player.name, type(e), v2.player.age; +-----------------+----------+---------------+ | v2.player.name | type(e) | v2.player.age | +-----------------+----------+---------------+ | \"Manu Ginobili\" | \"follow\" | 41 | | __NULL__ | \"serve\" | __NULL__ | | \"Tony Parker\" | \"follow\" | 36 | +-----------------+----------+---------------+","title":"\u8fd4\u56de\u4e0d\u5b58\u5728\u7684\u5c5e\u6027"},{"location":"3.ngql-guide/8.clauses-and-options/return/#_11","text":"RETURN \u8bed\u53e5\u53ef\u4ee5\u8fd4\u56de\u5b57\u9762\u91cf\u3001\u51fd\u6570\u6216\u8c13\u8bcd\u7b49\u8868\u8fbe\u5f0f\u7684\u7ed3\u679c\u3002 nebula> MATCH (v:player{name:\"Tony Parker\"})-->(v2:player) \\ RETURN DISTINCT v2.player.name, \"Hello\"+\" graphs!\", v2.player.age > 35; +---------------------+----------------------+--------------------+ | v2.player.name | (\"Hello\"+\" graphs!\") | (v2.player.age>35) | +---------------------+----------------------+--------------------+ | \"LaMarcus Aldridge\" | \"Hello graphs!\" | false | | \"Tim Duncan\" | \"Hello graphs!\" | true | | \"Manu Ginobili\" | \"Hello graphs!\" | true | +---------------------+----------------------+--------------------+ nebula> RETURN 1+1; +-------+ | (1+1) | +-------+ | 2 | +-------+ nebula> RETURN 1- -1; +----------+ | (1--(1)) | +----------+ | 2 | +----------+ nebula> RETURN 3 > 1; +-------+ | (3>1) | +-------+ | true | +-------+ nebula> RETURN 1+1, rand32(1, 5); +-------+-------------+ | (1+1) | rand32(1,5) | +-------+-------------+ | 2 | 1 | +-------+-------------+","title":"\u8fd4\u56de\u8868\u8fbe\u5f0f\u7ed3\u679c"},{"location":"3.ngql-guide/8.clauses-and-options/return/#_12","text":"\u4f7f\u7528 DISTINCT \u53ef\u4ee5\u5220\u9664\u7ed3\u679c\u96c6\u4e2d\u7684\u91cd\u590d\u5b57\u6bb5\u3002 # \u672a\u4f7f\u7528 DISTINCT\u3002 nebula> MATCH (v:player{name:\"Tony Parker\"})--(v2:player) \\ RETURN v2.player.name, v2.player.age; +---------------------+--------+ | v2.name | v2.age | +---------------------+--------+ | \"Tim Duncan\" | 42 | | \"LaMarcus Aldridge\" | 33 | | \"Marco Belinelli\" | 32 | | \"Boris Diaw\" | 36 | | \"Dejounte Murray\" | 29 | | \"Tim Duncan\" | 42 | | \"LaMarcus Aldridge\" | 33 | | \"Manu Ginobili\" | 41 | +---------------------+--------+ # \u4f7f\u7528 DISTINCT\u3002 nebula> MATCH (v:player{name:\"Tony Parker\"})--(v2:player) \\ RETURN DISTINCT v2.player.name, v2.player.age; +---------------------+--------+ | v2.name | v2.age | +---------------------+--------+ | \"Tim Duncan\" | 42 | | \"LaMarcus Aldridge\" | 33 | | \"Marco Belinelli\" | 32 | | \"Boris Diaw\" | 36 | | \"Dejounte Murray\" | 29 | | \"Manu Ginobili\" | 41 | +---------------------+--------+","title":"\u8fd4\u56de\u552f\u4e00\u5b57\u6bb5"},{"location":"3.ngql-guide/8.clauses-and-options/sample/","text":"SAMPLE \u00b6 SAMPLE \u5b50\u53e5\u7528\u4e8e\u5728\u7ed3\u679c\u96c6\u4e2d\u5747\u5300\u53d6\u6837\u5e76\u8fd4\u56de\u6307\u5b9a\u6570\u91cf\u7684\u6570\u636e\u3002 SAMPLE \u4ec5\u80fd\u5728 GO \u8bed\u53e5\u4e2d\u4f7f\u7528\uff0c\u8bed\u6cd5\u5982\u4e0b\uff1a <go_statement> SAMPLE <sample_list>; sample_list \u662f\u4e00\u4e2a\u5217\u8868\uff0c\u5217\u8868\u4e2d\u7684\u5143\u7d20\u5fc5\u987b\u4e3a\u81ea\u7136\u6570\uff0c\u4e14\u5143\u7d20\u6570\u91cf\u5fc5\u987b\u4e0e GO \u8bed\u53e5\u4e2d\u7684 STEPS \u7684\u6700\u5927\u6570\u76f8\u540c\u3002\u4e0b\u6587\u4ee5 GO 1 TO 3 STEPS FROM \"A\" OVER * SAMPLE <sample_list> \u4e3a\u4f8b\u8be6\u7ec6\u4ecb\u7ecd SAMPLE \u7684\u7528\u6cd5\u3002 \u5217\u8868 sample_list \u5fc5\u987b\u5305\u542b 3 \u4e2a\u81ea\u7136\u6570\u5143\u7d20\uff0c\u4f8b\u5982 GO 1 TO 3 STEPS FROM \"A\" OVER * SAMPLE [1,2,4] \u3002 SAMPLE [1,2,4] \u4e2d\u7684 1 \u8868\u793a\u7cfb\u7edf\u5728\u7b2c\u4e00\u6b65\u65f6\u81ea\u52a8\u9009\u62e9 1 \u6761\u8fb9\u7ee7\u7eed\u904d\u5386\uff0c 2 \u8868\u793a\u5728\u7b2c\u4e8c\u6b65\u65f6\u9009\u62e9 2 \u6761\u8fb9\u7ee7\u7eed\u904d\u5386\uff0c 4 \u8868\u793a\u5728\u7b2c\u4e09\u6b65\u65f6\u9009\u62e9 4 \u6761\u8fb9\u7ee7\u7eed\u904d\u5386\u3002\u5982\u679c\u67d0\u4e00\u6b65\u6ca1\u6709\u5339\u914d\u7684\u8fb9\u6216\u8005\u5339\u914d\u5230\u7684\u8fb9\u6570\u91cf\u5c0f\u4e8e\u6307\u5b9a\u6570\u91cf\uff0c\u5219\u6309\u5b9e\u9645\u6570\u91cf\u8fd4\u56de\u3002 \u56e0\u4e3a GO 1 TO 3 STEPS \u8868\u793a\u8fd4\u56de\u7b2c\u4e00\u5230\u7b2c\u4e09\u6b65\u7684\u6240\u6709\u904d\u5386\u7ed3\u679c\uff0c\u56e0\u6b64\u4e0b\u56fe\u4e2d\u6240\u6709\u7ea2\u8272\u8fb9\u548c\u5b83\u4eec\u7684\u539f\u70b9\u4e0e\u76ee\u7684\u70b9\u90fd\u4f1a\u88ab\u8fd9\u6761 GO \u8bed\u53e5\u5339\u914d\u4e0a\uff0c\u800c\u9ec4\u8272\u8fb9\u8868\u793a GO \u8bed\u53e5\u904d\u5386\u65f6\u6ca1\u6709\u9009\u62e9\u7684\u8def\u5f84\u3002\u5982\u679c\u4e0d\u662f GO 1 TO 3 STEPS \u800c\u662f GO 3 STEPS \uff0c\u5219\u53ea\u4f1a\u5339\u914d\u4e0a\u7b2c\u4e09\u6b65\u7684\u7ea2\u8272\u8fb9\u548c\u5b83\u4eec\u4e24\u7aef\u7684\u70b9\u3002 \u5728 basketballplayer \u6570\u636e\u96c6\u4e2d\u7684\u6267\u884c\u793a\u4f8b\u5982\u4e0b\uff1a nebula> GO 3 STEPS FROM \"player100\" \\ OVER * \\ YIELD properties($$).name AS NAME, properties($$).age AS Age \\ SAMPLE [1,2,3]; +-----------------+----------+ | NAME | Age | +-----------------+----------+ | \"Tony Parker\" | 36 | | \"Manu Ginobili\" | 41 | | \"Spurs\" | __NULL__ | +-----------------+----------+ nebula> GO 1 TO 3 STEPS FROM \"player100\" \\ OVER * \\ YIELD properties($$).name AS NAME, properties($$).age AS Age \\ SAMPLE [2,2,2]; +-----------------+----------+ | NAME | Age | +-----------------+----------+ | \"Manu Ginobili\" | 41 | | \"Spurs\" | __NULL__ | | \"Tim Duncan\" | 42 | | \"Spurs\" | __NULL__ | | \"Manu Ginobili\" | 41 | | \"Spurs\" | __NULL__ | +-----------------+----------+","title":"SAMPLE"},{"location":"3.ngql-guide/8.clauses-and-options/sample/#sample","text":"SAMPLE \u5b50\u53e5\u7528\u4e8e\u5728\u7ed3\u679c\u96c6\u4e2d\u5747\u5300\u53d6\u6837\u5e76\u8fd4\u56de\u6307\u5b9a\u6570\u91cf\u7684\u6570\u636e\u3002 SAMPLE \u4ec5\u80fd\u5728 GO \u8bed\u53e5\u4e2d\u4f7f\u7528\uff0c\u8bed\u6cd5\u5982\u4e0b\uff1a <go_statement> SAMPLE <sample_list>; sample_list \u662f\u4e00\u4e2a\u5217\u8868\uff0c\u5217\u8868\u4e2d\u7684\u5143\u7d20\u5fc5\u987b\u4e3a\u81ea\u7136\u6570\uff0c\u4e14\u5143\u7d20\u6570\u91cf\u5fc5\u987b\u4e0e GO \u8bed\u53e5\u4e2d\u7684 STEPS \u7684\u6700\u5927\u6570\u76f8\u540c\u3002\u4e0b\u6587\u4ee5 GO 1 TO 3 STEPS FROM \"A\" OVER * SAMPLE <sample_list> \u4e3a\u4f8b\u8be6\u7ec6\u4ecb\u7ecd SAMPLE \u7684\u7528\u6cd5\u3002 \u5217\u8868 sample_list \u5fc5\u987b\u5305\u542b 3 \u4e2a\u81ea\u7136\u6570\u5143\u7d20\uff0c\u4f8b\u5982 GO 1 TO 3 STEPS FROM \"A\" OVER * SAMPLE [1,2,4] \u3002 SAMPLE [1,2,4] \u4e2d\u7684 1 \u8868\u793a\u7cfb\u7edf\u5728\u7b2c\u4e00\u6b65\u65f6\u81ea\u52a8\u9009\u62e9 1 \u6761\u8fb9\u7ee7\u7eed\u904d\u5386\uff0c 2 \u8868\u793a\u5728\u7b2c\u4e8c\u6b65\u65f6\u9009\u62e9 2 \u6761\u8fb9\u7ee7\u7eed\u904d\u5386\uff0c 4 \u8868\u793a\u5728\u7b2c\u4e09\u6b65\u65f6\u9009\u62e9 4 \u6761\u8fb9\u7ee7\u7eed\u904d\u5386\u3002\u5982\u679c\u67d0\u4e00\u6b65\u6ca1\u6709\u5339\u914d\u7684\u8fb9\u6216\u8005\u5339\u914d\u5230\u7684\u8fb9\u6570\u91cf\u5c0f\u4e8e\u6307\u5b9a\u6570\u91cf\uff0c\u5219\u6309\u5b9e\u9645\u6570\u91cf\u8fd4\u56de\u3002 \u56e0\u4e3a GO 1 TO 3 STEPS \u8868\u793a\u8fd4\u56de\u7b2c\u4e00\u5230\u7b2c\u4e09\u6b65\u7684\u6240\u6709\u904d\u5386\u7ed3\u679c\uff0c\u56e0\u6b64\u4e0b\u56fe\u4e2d\u6240\u6709\u7ea2\u8272\u8fb9\u548c\u5b83\u4eec\u7684\u539f\u70b9\u4e0e\u76ee\u7684\u70b9\u90fd\u4f1a\u88ab\u8fd9\u6761 GO \u8bed\u53e5\u5339\u914d\u4e0a\uff0c\u800c\u9ec4\u8272\u8fb9\u8868\u793a GO \u8bed\u53e5\u904d\u5386\u65f6\u6ca1\u6709\u9009\u62e9\u7684\u8def\u5f84\u3002\u5982\u679c\u4e0d\u662f GO 1 TO 3 STEPS \u800c\u662f GO 3 STEPS \uff0c\u5219\u53ea\u4f1a\u5339\u914d\u4e0a\u7b2c\u4e09\u6b65\u7684\u7ea2\u8272\u8fb9\u548c\u5b83\u4eec\u4e24\u7aef\u7684\u70b9\u3002 \u5728 basketballplayer \u6570\u636e\u96c6\u4e2d\u7684\u6267\u884c\u793a\u4f8b\u5982\u4e0b\uff1a nebula> GO 3 STEPS FROM \"player100\" \\ OVER * \\ YIELD properties($$).name AS NAME, properties($$).age AS Age \\ SAMPLE [1,2,3]; +-----------------+----------+ | NAME | Age | +-----------------+----------+ | \"Tony Parker\" | 36 | | \"Manu Ginobili\" | 41 | | \"Spurs\" | __NULL__ | +-----------------+----------+ nebula> GO 1 TO 3 STEPS FROM \"player100\" \\ OVER * \\ YIELD properties($$).name AS NAME, properties($$).age AS Age \\ SAMPLE [2,2,2]; +-----------------+----------+ | NAME | Age | +-----------------+----------+ | \"Manu Ginobili\" | 41 | | \"Spurs\" | __NULL__ | | \"Tim Duncan\" | 42 | | \"Spurs\" | __NULL__ | | \"Manu Ginobili\" | 41 | | \"Spurs\" | __NULL__ | +-----------------+----------+","title":"SAMPLE"},{"location":"3.ngql-guide/8.clauses-and-options/ttl-options/","text":"TTL \u00b6 TTL\uff08Time To Live\uff09\u662f\u4e00\u4e2a\u5b9a\u4e49\u6570\u636e\u751f\u5b58\u671f\u7684\u673a\u5236\u3002\u5f53\u6570\u636e\u8fbe\u5230\u5176\u9884\u8bbe\u7684\u751f\u5b58\u65f6\u95f4\u540e\uff0c\u5b83\u4f1a\u88ab\u81ea\u52a8\u4ece\u56fe\u6570\u636e\u5e93\u4e2d\u5220\u9664\u3002\u8fd9\u79cd\u529f\u80fd\u5c24\u5176\u9002\u5408\u4e8e\u53ea\u9700\u8981\u6682\u65f6\u5b58\u50a8\u7684\u6570\u636e\uff0c\u4f8b\u5982\u4e34\u65f6\u4f1a\u8bdd\u6216\u7f13\u5b58\u6570\u636e\u3002 openCypher \u517c\u5bb9\u6027 \u00b6 \u672c\u6587\u64cd\u4f5c\u4ec5\u9002\u7528\u4e8e\u539f\u751f nGQL\u3002 \u6ce8\u610f\u4e8b\u9879 \u00b6 \u4e0d\u80fd\u4fee\u6539\u5e26\u6709 TTL \u9009\u9879\u7684\u5c5e\u6027\u7684 Schema\u3002 TTL \u548c INDEX \u5171\u5b58\u95ee\u9898\uff1a \u5982\u679c\u4e00\u4e2a Tag/Edge type \u7684\u5176\u4e2d\u4e00\u5c5e\u6027\u5df2\u6709 INDEX\uff0c\u5219\u4e0d\u80fd\u4e3a\u5176\u8bbe\u7f6e TTL\uff0c\u4e5f\u4e0d\u80fd\u4e3a\u8be5 Tag \u7684\u5176\u4ed6\u5c5e\u6027\u8bbe\u7f6e TTL\u3002 \u5982\u679c\u5df2\u6709 TTL\uff0c\u53ef\u4ee5\u518d\u6dfb\u52a0 INDEX\u3002 TTL \u9009\u9879 \u00b6 nGQL \u652f\u6301\u7684 TTL \u9009\u9879\u5982\u4e0b\u3002 \u9009\u9879 \u8bf4\u660e ttl_col \u6307\u5b9a\u4e00\u4e2a\u73b0\u6709\u7684\u8981\u8bbe\u7f6e\u5b58\u6d3b\u65f6\u95f4\u7684\u5c5e\u6027\u3002\u5c5e\u6027\u7684\u6570\u636e\u7c7b\u578b\u5fc5\u987b\u662f int \u6216\u8005 timestamp \u3002 ttl_duration \u6307\u5b9a\u65f6\u95f4\u6233\u5dee\u503c\uff0c\u9ed8\u8ba4\u5355\u4f4d\uff1a\u79d2\u3002\u65f6\u95f4\u6233\u5dee\u503c\u5fc5\u987b\u4e3a 64 \u4f4d\u975e\u8d1f\u6574\u6570\u3002\u5c5e\u6027\u503c\u548c\u65f6\u95f4\u6233\u5dee\u503c\u4e4b\u548c\u5982\u679c\u5c0f\u4e8e\u5f53\u524d\u65f6\u95f4\u6233\uff0c\u5c5e\u6027\u5c31\u4f1a\u8fc7\u671f\u3002\u5982\u679c ttl_duration \u4e3a 0 \uff0c\u5c5e\u6027\u6c38\u4e0d\u8fc7\u671f\u3002 \u53ef\u5728\u914d\u7f6e\u6587\u4ef6 nebula-storaged.conf \uff08\u9ed8\u8ba4\u8def\u5f84 /usr/local/nightly/etc/ \uff09\u4e2d\u8bbe\u7f6e ttl_use_ms \u4e3a true \u5c06\u9ed8\u8ba4\u5355\u4f4d\u8bbe\u4e3a\u6beb\u79d2\u3002 Caution \u5728\u8bbe\u7f6e ttl_use_ms \u4e3a true \u524d\uff0c\u8bf7\u786e\u4fdd\u6ca1\u6709\u4e3a\u5c5e\u6027\u8bbe\u7f6e TTL\uff0c\u5426\u5219\u4f1a\u56e0\u4e3a\u8fc7\u671f\u65f6\u95f4\u7f29\u77ed\uff0c\u5bfc\u81f4\u6570\u636e\u88ab\u9519\u8bef\u5730\u5220\u9664\u3002 \u5728\u8bbe\u7f6e ttl_use_ms \u4e3a true \u540e\uff0c\u5373\u8bbe\u7f6e ttl_duration \u7684\u9ed8\u8ba4\u5355\u4f4d\u4e3a\u6beb\u79d2\u540e\uff0c ttl_col \u7684\u9ed8\u8ba4\u5355\u4f4d\u4ecd\u7136\u4e3a\u79d2\uff0c\u5b83\u7684\u6570\u636e\u7c7b\u578b\u5fc5\u987b\u662f int \uff0c\u5e76\u4e14\u9700\u8981\u624b\u52a8\u8f6c\u6362\u5c5e\u6027\u503c\u4e3a\u6beb\u79d2\u3002\u4f8b\u5982\u8bbe\u7f6e ttl_col \u4e3a a \uff0c\u5219\u9700\u8981\u5c06 a \u7684\u503c\u8f6c\u6362\u4e3a\u6beb\u79d2\uff0c\u5982\u5f53 a \u7684\u503c\u4e3a now() \uff0c\u5219\u9700\u8981\u5c06 a \u7684\u503c\u8bbe\u7f6e\u4e3a now() * 1000 \u3002 \u4f7f\u7528 TTL \u9009\u9879 \u00b6 \u5728\u4f7f\u7528 TTL \u529f\u80fd\u4e4b\u524d\uff0c\u5fc5\u987b\u5148\u521b\u5efa\u4e00\u4e2a\u65f6\u95f4\u6233\u6216\u6574\u6570\u5c5e\u6027\uff0c\u5e76\u5728 TTL \u9009\u9879\u4e2d\u6307\u5b9a\u4e86\u5b83\u3002\u6570\u636e\u5e93\u4e0d\u4f1a\u81ea\u52a8\u4e3a\u60a8\u521b\u5efa\u6216\u7ba1\u7406\u8fd9\u4e2a\u65f6\u95f4\u6233\u5c5e\u6027\u3002 \u5728\u63d2\u5165\u65f6\u95f4\u6233\u6216\u6574\u6570\u5c5e\u6027\u7684\u503c\u65f6\uff0c\u5efa\u8bae\u4f7f\u7528 now() \u51fd\u6570\u6216\u8005\u5f53\u524d\u65f6\u95f4\u6233\u6765\u4ee3\u8868\u5f53\u524d\u65f6\u95f4\u3002 Tag \u6216 Edge type \u5df2\u5b58\u5728 \u00b6 \u5982\u679c Tag \u548c Edge type \u5df2\u7ecf\u521b\u5efa\uff0c\u8bf7\u4f7f\u7528 ALTER \u8bed\u53e5\u66f4\u65b0 Tag \u6216 Edge type\u3002 # \u521b\u5efa Tag\u3002 nebula> CREATE TAG IF NOT EXISTS t1 (a timestamp); # ALTER \u4fee\u6539 Tag\uff0c\u6dfb\u52a0 TTL \u9009\u9879\u3002 nebula> ALTER TAG t1 TTL_COL = \"a\", TTL_DURATION = 5; # \u63d2\u5165\u70b9\uff0c\u63d2\u5165\u540e 5 \u79d2\u8fc7\u671f\u3002 nebula> INSERT VERTEX t1(a) VALUES \"101\":(now()); Tag \u6216 Edge type \u4e0d\u5b58\u5728 \u00b6 \u521b\u5efa Tag \u6216 Edge type \u65f6\u53ef\u4ee5\u540c\u65f6\u8bbe\u7f6e TTL \u9009\u9879\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1 CREATE TAG \u548c CREATE EDGE \u3002 # \u521b\u5efa Tag \u5e76\u8bbe\u7f6e TTL \u9009\u9879\u3002 nebula> CREATE TAG IF NOT EXISTS t2(a int, b int, c string) TTL_DURATION= 100, TTL_COL = \"a\"; # \u63d2\u5165\u70b9\u3002\u8fc7\u671f\u65f6\u95f4\u6233\u4e3a 1648197238\uff081648197138 + 100\uff09\u3002 nebula> INSERT VERTEX t2(a, b, c) VALUES \"102\":(1648197138, 30, \"Hello\"); \u5c5e\u6027\u8fc7\u671f \u00b6 Caution \u5f53\u4e3a\u4e00\u4e2a Tag \u6216 Edge type \u7684\u5c5e\u6027\u8bbe\u7f6e TTL \u5e76\u8be5\u5c5e\u6027\u7684\u503c\u4e3a NULL \u65f6\uff0cTTL \u529f\u80fd\u4e0d\u4f1a\u751f\u6548\uff0c\u5373\u8be5\u5c5e\u6027\u6c38\u4e0d\u8fc7\u671f\u3002 \u5982\u679c\u4e3a\u4e00\u4e2a Tag \u6216 Edge type \u65b0\u589e\u9ed8\u8ba4\u503c\u4e3a now() \u7684\u5c5e\u6027\u5e76\u4e14\u8be5\u5c5e\u6027\u8bbe\u7f6e\u4e86 TTL\uff0c\u8be5 Tag \u6216 Edge type \u76f8\u5173\u7684\u5386\u53f2\u6570\u636e\u4e0d\u4f1a\u8fc7\u671f\uff0c\u56e0\u4e3a\u5386\u53f2\u6570\u636e\u7684\u8be5\u5c5e\u6027\u503c\u4e3a\u5f53\u524d\u65f6\u95f4\u6233\u3002 \u70b9\u5c5e\u6027\u8fc7\u671f \u00b6 \u70b9\u5c5e\u6027\u8fc7\u671f\u6709\u5982\u4e0b\u5f71\u54cd\uff1a \u5982\u679c\u4e00\u4e2a\u70b9\u4ec5\u6709\u4e00\u4e2a Tag\uff0c\u70b9\u4e0a\u7684\u4e00\u4e2a\u5c5e\u6027\u8fc7\u671f\uff0c\u70b9\u4e5f\u4f1a\u8fc7\u671f\u3002 \u5982\u679c\u4e00\u4e2a\u70b9\u6709\u591a\u4e2a Tag\uff0c\u70b9\u4e0a\u7684\u4e00\u4e2a\u5c5e\u6027\u8fc7\u671f\uff0c\u548c\u8be5\u5c5e\u6027\u76f8\u540c Tag \u7684\u5176\u4ed6\u5c5e\u6027\u4e5f\u4f1a\u8fc7\u671f\uff0c\u4f46\u662f\u70b9\u4e0d\u4f1a\u8fc7\u671f\uff0c\u70b9\u4e0a\u5176\u4ed6 Tag \u7684\u5c5e\u6027\u4fdd\u6301\u4e0d\u53d8\u3002 \u8fb9\u5c5e\u6027\u8fc7\u671f \u00b6 \u56e0\u4e3a\u4e00\u6761\u8fb9\u4ec5\u6709\u4e00\u4e2a Edge type\uff0c\u8fb9\u4e0a\u7684\u4e00\u4e2a\u5c5e\u6027\u8fc7\u671f\uff0c\u8fb9\u4e5f\u4f1a\u8fc7\u671f\u3002 \u8fc7\u671f\u5904\u7406 \u00b6 \u5c5e\u6027\u8fc7\u671f\u540e\uff0c\u5bf9\u5e94\u7684\u8fc7\u671f\u6570\u636e\u4ecd\u7136\u5b58\u50a8\u5728\u786c\u76d8\u4e0a\uff0c\u4f46\u662f\u67e5\u8be2\u65f6\u4f1a\u8fc7\u6ee4\u8fc7\u671f\u6570\u636e\u3002 NebulaGraph\u81ea\u52a8\u5220\u9664\u8fc7\u671f\u6570\u636e\u540e\uff0c\u4f1a\u5728\u4e0b\u4e00\u6b21 Compaction \u8fc7\u7a0b\u4e2d\u56de\u6536\u786c\u76d8\u7a7a\u95f4\u3002 Note \u5982\u679c \u5173\u95ed TTL \u9009\u9879 \uff0c\u4e0a\u4e00\u6b21 Compaction \u4e4b\u540e\u7684\u8fc7\u671f\u6570\u636e\u5c06\u53ef\u4ee5\u88ab\u67e5\u8be2\u5230\u3002 \u5220\u9664\u5b58\u6d3b\u65f6\u95f4 \u00b6 \u5220\u9664\u5b58\u6d3b\u65f6\u95f4\u53ef\u4ee5\u4f7f\u7528\u5982\u4e0b\u51e0\u79cd\u65b9\u6cd5\uff1a \u5220\u9664\u8bbe\u7f6e\u5b58\u6d3b\u65f6\u95f4\u7684\u5c5e\u6027\u3002 nebula> ALTER TAG t1 DROP (a); \u8bbe\u7f6e ttl_col \u4e3a\u7a7a\u5b57\u7b26\u4e32\u3002 nebula> ALTER TAG t1 TTL_COL = \"\"; \u8bbe\u7f6e ttl_duration \u4e3a 0 \u3002\u672c\u64cd\u4f5c\u53ef\u4ee5\u4fdd\u7559 TTL \u9009\u9879\uff0c\u5c5e\u6027\u6c38\u4e0d\u8fc7\u671f\uff0c\u4e14\u5c5e\u6027\u7684 Schema \u65e0\u6cd5\u4fee\u6539\u3002 nebula> ALTER TAG t1 TTL_DURATION = 0;","title":"TTL"},{"location":"3.ngql-guide/8.clauses-and-options/ttl-options/#ttl","text":"TTL\uff08Time To Live\uff09\u662f\u4e00\u4e2a\u5b9a\u4e49\u6570\u636e\u751f\u5b58\u671f\u7684\u673a\u5236\u3002\u5f53\u6570\u636e\u8fbe\u5230\u5176\u9884\u8bbe\u7684\u751f\u5b58\u65f6\u95f4\u540e\uff0c\u5b83\u4f1a\u88ab\u81ea\u52a8\u4ece\u56fe\u6570\u636e\u5e93\u4e2d\u5220\u9664\u3002\u8fd9\u79cd\u529f\u80fd\u5c24\u5176\u9002\u5408\u4e8e\u53ea\u9700\u8981\u6682\u65f6\u5b58\u50a8\u7684\u6570\u636e\uff0c\u4f8b\u5982\u4e34\u65f6\u4f1a\u8bdd\u6216\u7f13\u5b58\u6570\u636e\u3002","title":"TTL"},{"location":"3.ngql-guide/8.clauses-and-options/ttl-options/#opencypher","text":"\u672c\u6587\u64cd\u4f5c\u4ec5\u9002\u7528\u4e8e\u539f\u751f nGQL\u3002","title":"openCypher \u517c\u5bb9\u6027"},{"location":"3.ngql-guide/8.clauses-and-options/ttl-options/#_1","text":"\u4e0d\u80fd\u4fee\u6539\u5e26\u6709 TTL \u9009\u9879\u7684\u5c5e\u6027\u7684 Schema\u3002 TTL \u548c INDEX \u5171\u5b58\u95ee\u9898\uff1a \u5982\u679c\u4e00\u4e2a Tag/Edge type \u7684\u5176\u4e2d\u4e00\u5c5e\u6027\u5df2\u6709 INDEX\uff0c\u5219\u4e0d\u80fd\u4e3a\u5176\u8bbe\u7f6e TTL\uff0c\u4e5f\u4e0d\u80fd\u4e3a\u8be5 Tag \u7684\u5176\u4ed6\u5c5e\u6027\u8bbe\u7f6e TTL\u3002 \u5982\u679c\u5df2\u6709 TTL\uff0c\u53ef\u4ee5\u518d\u6dfb\u52a0 INDEX\u3002","title":"\u6ce8\u610f\u4e8b\u9879"},{"location":"3.ngql-guide/8.clauses-and-options/ttl-options/#ttl_1","text":"nGQL \u652f\u6301\u7684 TTL \u9009\u9879\u5982\u4e0b\u3002 \u9009\u9879 \u8bf4\u660e ttl_col \u6307\u5b9a\u4e00\u4e2a\u73b0\u6709\u7684\u8981\u8bbe\u7f6e\u5b58\u6d3b\u65f6\u95f4\u7684\u5c5e\u6027\u3002\u5c5e\u6027\u7684\u6570\u636e\u7c7b\u578b\u5fc5\u987b\u662f int \u6216\u8005 timestamp \u3002 ttl_duration \u6307\u5b9a\u65f6\u95f4\u6233\u5dee\u503c\uff0c\u9ed8\u8ba4\u5355\u4f4d\uff1a\u79d2\u3002\u65f6\u95f4\u6233\u5dee\u503c\u5fc5\u987b\u4e3a 64 \u4f4d\u975e\u8d1f\u6574\u6570\u3002\u5c5e\u6027\u503c\u548c\u65f6\u95f4\u6233\u5dee\u503c\u4e4b\u548c\u5982\u679c\u5c0f\u4e8e\u5f53\u524d\u65f6\u95f4\u6233\uff0c\u5c5e\u6027\u5c31\u4f1a\u8fc7\u671f\u3002\u5982\u679c ttl_duration \u4e3a 0 \uff0c\u5c5e\u6027\u6c38\u4e0d\u8fc7\u671f\u3002 \u53ef\u5728\u914d\u7f6e\u6587\u4ef6 nebula-storaged.conf \uff08\u9ed8\u8ba4\u8def\u5f84 /usr/local/nightly/etc/ \uff09\u4e2d\u8bbe\u7f6e ttl_use_ms \u4e3a true \u5c06\u9ed8\u8ba4\u5355\u4f4d\u8bbe\u4e3a\u6beb\u79d2\u3002 Caution \u5728\u8bbe\u7f6e ttl_use_ms \u4e3a true \u524d\uff0c\u8bf7\u786e\u4fdd\u6ca1\u6709\u4e3a\u5c5e\u6027\u8bbe\u7f6e TTL\uff0c\u5426\u5219\u4f1a\u56e0\u4e3a\u8fc7\u671f\u65f6\u95f4\u7f29\u77ed\uff0c\u5bfc\u81f4\u6570\u636e\u88ab\u9519\u8bef\u5730\u5220\u9664\u3002 \u5728\u8bbe\u7f6e ttl_use_ms \u4e3a true \u540e\uff0c\u5373\u8bbe\u7f6e ttl_duration \u7684\u9ed8\u8ba4\u5355\u4f4d\u4e3a\u6beb\u79d2\u540e\uff0c ttl_col \u7684\u9ed8\u8ba4\u5355\u4f4d\u4ecd\u7136\u4e3a\u79d2\uff0c\u5b83\u7684\u6570\u636e\u7c7b\u578b\u5fc5\u987b\u662f int \uff0c\u5e76\u4e14\u9700\u8981\u624b\u52a8\u8f6c\u6362\u5c5e\u6027\u503c\u4e3a\u6beb\u79d2\u3002\u4f8b\u5982\u8bbe\u7f6e ttl_col \u4e3a a \uff0c\u5219\u9700\u8981\u5c06 a \u7684\u503c\u8f6c\u6362\u4e3a\u6beb\u79d2\uff0c\u5982\u5f53 a \u7684\u503c\u4e3a now() \uff0c\u5219\u9700\u8981\u5c06 a \u7684\u503c\u8bbe\u7f6e\u4e3a now() * 1000 \u3002","title":"TTL \u9009\u9879"},{"location":"3.ngql-guide/8.clauses-and-options/ttl-options/#ttl_2","text":"\u5728\u4f7f\u7528 TTL \u529f\u80fd\u4e4b\u524d\uff0c\u5fc5\u987b\u5148\u521b\u5efa\u4e00\u4e2a\u65f6\u95f4\u6233\u6216\u6574\u6570\u5c5e\u6027\uff0c\u5e76\u5728 TTL \u9009\u9879\u4e2d\u6307\u5b9a\u4e86\u5b83\u3002\u6570\u636e\u5e93\u4e0d\u4f1a\u81ea\u52a8\u4e3a\u60a8\u521b\u5efa\u6216\u7ba1\u7406\u8fd9\u4e2a\u65f6\u95f4\u6233\u5c5e\u6027\u3002 \u5728\u63d2\u5165\u65f6\u95f4\u6233\u6216\u6574\u6570\u5c5e\u6027\u7684\u503c\u65f6\uff0c\u5efa\u8bae\u4f7f\u7528 now() \u51fd\u6570\u6216\u8005\u5f53\u524d\u65f6\u95f4\u6233\u6765\u4ee3\u8868\u5f53\u524d\u65f6\u95f4\u3002","title":"\u4f7f\u7528 TTL \u9009\u9879"},{"location":"3.ngql-guide/8.clauses-and-options/ttl-options/#tag_edge_type","text":"\u5982\u679c Tag \u548c Edge type \u5df2\u7ecf\u521b\u5efa\uff0c\u8bf7\u4f7f\u7528 ALTER \u8bed\u53e5\u66f4\u65b0 Tag \u6216 Edge type\u3002 # \u521b\u5efa Tag\u3002 nebula> CREATE TAG IF NOT EXISTS t1 (a timestamp); # ALTER \u4fee\u6539 Tag\uff0c\u6dfb\u52a0 TTL \u9009\u9879\u3002 nebula> ALTER TAG t1 TTL_COL = \"a\", TTL_DURATION = 5; # \u63d2\u5165\u70b9\uff0c\u63d2\u5165\u540e 5 \u79d2\u8fc7\u671f\u3002 nebula> INSERT VERTEX t1(a) VALUES \"101\":(now());","title":"Tag \u6216 Edge type \u5df2\u5b58\u5728"},{"location":"3.ngql-guide/8.clauses-and-options/ttl-options/#tag_edge_type_1","text":"\u521b\u5efa Tag \u6216 Edge type \u65f6\u53ef\u4ee5\u540c\u65f6\u8bbe\u7f6e TTL \u9009\u9879\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1 CREATE TAG \u548c CREATE EDGE \u3002 # \u521b\u5efa Tag \u5e76\u8bbe\u7f6e TTL \u9009\u9879\u3002 nebula> CREATE TAG IF NOT EXISTS t2(a int, b int, c string) TTL_DURATION= 100, TTL_COL = \"a\"; # \u63d2\u5165\u70b9\u3002\u8fc7\u671f\u65f6\u95f4\u6233\u4e3a 1648197238\uff081648197138 + 100\uff09\u3002 nebula> INSERT VERTEX t2(a, b, c) VALUES \"102\":(1648197138, 30, \"Hello\");","title":"Tag \u6216 Edge type \u4e0d\u5b58\u5728"},{"location":"3.ngql-guide/8.clauses-and-options/ttl-options/#_2","text":"Caution \u5f53\u4e3a\u4e00\u4e2a Tag \u6216 Edge type \u7684\u5c5e\u6027\u8bbe\u7f6e TTL \u5e76\u8be5\u5c5e\u6027\u7684\u503c\u4e3a NULL \u65f6\uff0cTTL \u529f\u80fd\u4e0d\u4f1a\u751f\u6548\uff0c\u5373\u8be5\u5c5e\u6027\u6c38\u4e0d\u8fc7\u671f\u3002 \u5982\u679c\u4e3a\u4e00\u4e2a Tag \u6216 Edge type \u65b0\u589e\u9ed8\u8ba4\u503c\u4e3a now() \u7684\u5c5e\u6027\u5e76\u4e14\u8be5\u5c5e\u6027\u8bbe\u7f6e\u4e86 TTL\uff0c\u8be5 Tag \u6216 Edge type \u76f8\u5173\u7684\u5386\u53f2\u6570\u636e\u4e0d\u4f1a\u8fc7\u671f\uff0c\u56e0\u4e3a\u5386\u53f2\u6570\u636e\u7684\u8be5\u5c5e\u6027\u503c\u4e3a\u5f53\u524d\u65f6\u95f4\u6233\u3002","title":"\u5c5e\u6027\u8fc7\u671f"},{"location":"3.ngql-guide/8.clauses-and-options/ttl-options/#_3","text":"\u70b9\u5c5e\u6027\u8fc7\u671f\u6709\u5982\u4e0b\u5f71\u54cd\uff1a \u5982\u679c\u4e00\u4e2a\u70b9\u4ec5\u6709\u4e00\u4e2a Tag\uff0c\u70b9\u4e0a\u7684\u4e00\u4e2a\u5c5e\u6027\u8fc7\u671f\uff0c\u70b9\u4e5f\u4f1a\u8fc7\u671f\u3002 \u5982\u679c\u4e00\u4e2a\u70b9\u6709\u591a\u4e2a Tag\uff0c\u70b9\u4e0a\u7684\u4e00\u4e2a\u5c5e\u6027\u8fc7\u671f\uff0c\u548c\u8be5\u5c5e\u6027\u76f8\u540c Tag \u7684\u5176\u4ed6\u5c5e\u6027\u4e5f\u4f1a\u8fc7\u671f\uff0c\u4f46\u662f\u70b9\u4e0d\u4f1a\u8fc7\u671f\uff0c\u70b9\u4e0a\u5176\u4ed6 Tag \u7684\u5c5e\u6027\u4fdd\u6301\u4e0d\u53d8\u3002","title":"\u70b9\u5c5e\u6027\u8fc7\u671f"},{"location":"3.ngql-guide/8.clauses-and-options/ttl-options/#_4","text":"\u56e0\u4e3a\u4e00\u6761\u8fb9\u4ec5\u6709\u4e00\u4e2a Edge type\uff0c\u8fb9\u4e0a\u7684\u4e00\u4e2a\u5c5e\u6027\u8fc7\u671f\uff0c\u8fb9\u4e5f\u4f1a\u8fc7\u671f\u3002","title":"\u8fb9\u5c5e\u6027\u8fc7\u671f"},{"location":"3.ngql-guide/8.clauses-and-options/ttl-options/#_5","text":"\u5c5e\u6027\u8fc7\u671f\u540e\uff0c\u5bf9\u5e94\u7684\u8fc7\u671f\u6570\u636e\u4ecd\u7136\u5b58\u50a8\u5728\u786c\u76d8\u4e0a\uff0c\u4f46\u662f\u67e5\u8be2\u65f6\u4f1a\u8fc7\u6ee4\u8fc7\u671f\u6570\u636e\u3002 NebulaGraph\u81ea\u52a8\u5220\u9664\u8fc7\u671f\u6570\u636e\u540e\uff0c\u4f1a\u5728\u4e0b\u4e00\u6b21 Compaction \u8fc7\u7a0b\u4e2d\u56de\u6536\u786c\u76d8\u7a7a\u95f4\u3002 Note \u5982\u679c \u5173\u95ed TTL \u9009\u9879 \uff0c\u4e0a\u4e00\u6b21 Compaction \u4e4b\u540e\u7684\u8fc7\u671f\u6570\u636e\u5c06\u53ef\u4ee5\u88ab\u67e5\u8be2\u5230\u3002","title":"\u8fc7\u671f\u5904\u7406"},{"location":"3.ngql-guide/8.clauses-and-options/ttl-options/#_6","text":"\u5220\u9664\u5b58\u6d3b\u65f6\u95f4\u53ef\u4ee5\u4f7f\u7528\u5982\u4e0b\u51e0\u79cd\u65b9\u6cd5\uff1a \u5220\u9664\u8bbe\u7f6e\u5b58\u6d3b\u65f6\u95f4\u7684\u5c5e\u6027\u3002 nebula> ALTER TAG t1 DROP (a); \u8bbe\u7f6e ttl_col \u4e3a\u7a7a\u5b57\u7b26\u4e32\u3002 nebula> ALTER TAG t1 TTL_COL = \"\"; \u8bbe\u7f6e ttl_duration \u4e3a 0 \u3002\u672c\u64cd\u4f5c\u53ef\u4ee5\u4fdd\u7559 TTL \u9009\u9879\uff0c\u5c5e\u6027\u6c38\u4e0d\u8fc7\u671f\uff0c\u4e14\u5c5e\u6027\u7684 Schema \u65e0\u6cd5\u4fee\u6539\u3002 nebula> ALTER TAG t1 TTL_DURATION = 0;","title":"\u5220\u9664\u5b58\u6d3b\u65f6\u95f4"},{"location":"3.ngql-guide/8.clauses-and-options/unwind/","text":"UNWIND \u00b6 UNWIND \u8bed\u53e5\u53ef\u4ee5\u5c06\u5217\u8868\u62c6\u5206\u4e3a\u5355\u72ec\u7684\u884c\uff0c\u5217\u8868\u4e2d\u7684\u6bcf\u4e2a\u5143\u7d20\u4e3a\u4e00\u884c\u3002 UNWIND \u53ef\u4ee5\u4f5c\u4e3a\u5355\u72ec\u8bed\u53e5\u6216\u8bed\u53e5\u4e2d\u7684\u5b50\u53e5\u4f7f\u7528\u3002 UNWIND \u8bed\u53e5 \u00b6 \u8bed\u6cd5 \u00b6 UNWIND <list> AS <alias> <RETURN clause>; \u793a\u4f8b \u00b6 \u62c6\u5206\u5217\u8868\u3002 nebula> UNWIND [1,2,3] AS n RETURN n; +---+ | n | +---+ | 1 | | 2 | | 3 | +---+ UNWIND \u5b50\u53e5 \u00b6 \u8bed\u6cd5 \u00b6 \u539f\u751f nGQL \u8bed\u53e5\u4e2d\u4f7f\u7528 UNWIND \u5b50\u53e5\u3002 Note \u5728\u539f\u751f nGQL \u8bed\u53e5\u4e2d\u4f7f\u7528 UNWIND \u5b50\u53e5\u65f6\uff0c\u9700\u8981\u7528\u5728\u7ba1\u9053\u7b26 | \u4e4b\u540e\uff0c\u5e76\u4f7f\u7528 $- \u5f15\u7528\u7ba1\u9053\u7b26\u4e4b\u524d\u7684\u53d8\u91cf\u3002\u5982\u679c UNWIND \u540e\u4f7f\u7528\u8bed\u53e5\u6216\u5b50\u53e5\uff0c\u9700\u8981\u4f7f\u7528\u7ba1\u9053\u7b26 | \u5e76\u4e14\u4f7f\u7528 $- \u5f15\u7528\u7ba1\u9053\u7b26\u4e4b\u524d\u7684\u53d8\u91cf\u3002 <statement> | UNWIND $-.<var> AS <alias> <|> <clause>; openCypher \u8bed\u53e5\u4e2d\u4f7f\u7528 UNWIND \u5b50\u53e5\u3002 <statement> UNWIND <list> AS <alias> <RETURN clause>\uff1b \u793a\u4f8b \u00b6 \u5728 UNWIND \u5b50\u53e5\u4e2d\u4f7f\u7528 WITH DISTINCT \u53ef\u4ee5\u5c06\u5217\u8868\u4e2d\u7684\u91cd\u590d\u9879\u5ffd\u7565\uff0c\u8fd4\u56de\u53bb\u91cd\u540e\u7684\u7ed3\u679c\u3002 Note \u539f\u751f nGQL \u8bed\u53e5\u4e0d\u652f\u6301 WITH DISTINCT \u3002 // \u62c6\u5206\u5217\u8868`[1,1,2,2,3,3]`\uff0c\u5220\u9664\u91cd\u590d\u884c\uff0c\u6392\u5e8f\u884c\uff0c\u5c06\u884c\u8f6c\u6362\u4e3a\u5217\u8868\u3002 nebula> WITH [1,1,2,2,3,3] AS n \\ UNWIND n AS r \\ WITH DISTINCT r AS r \\ ORDER BY r \\ RETURN collect(r); +------------+ | collect(r) | +------------+ | [1, 2, 3] | +------------+ MATCH \u8bed\u53e5\u4e2d\u4f7f\u7528 UNWIND \u3002 // \u5c06\u5339\u914d\u8def\u5f84\u4e0a\u7684\u9876\u70b9\u8f93\u51fa\u5230\u5217\u8868\u4e2d\uff0c\u62c6\u5206\u5217\u8868\uff0c\u5220\u9664\u91cd\u590d\u884c\uff0c\u5c06\u884c\u8f6c\u6362\u4e3a\u5217\u8868\u3002 nebula> MATCH p=(v:player{name:\"Tim Duncan\"})--(v2) \\ WITH nodes(p) AS n \\ UNWIND n AS r \\ WITH DISTINCT r AS r \\ RETURN collect(r); +----------------------------------------------------------------------------------------------------------------------+ | collect(r) | +----------------------------------------------------------------------------------------------------------------------+ | [(\"player100\" :player{age: 42, name: \"Tim Duncan\"}), (\"player101\" :player{age: 36, name: \"Tony Parker\"}), | |(\"team204\" :team{name: \"Spurs\"}), (\"player102\" :player{age: 33, name: \"LaMarcus Aldridge\"}), | |(\"player125\" :player{age: 41, name: \"Manu Ginobili\"}), (\"player104\" :player{age: 32, name: \"Marco Belinelli\"}), | |(\"player144\" :player{age: 47, name: \"Shaquile O'Neal\"}), (\"player105\" :player{age: 31, name: \"Danny Green\"}), | |(\"player113\" :player{age: 29, name: \"Dejounte Murray\"}), (\"player107\" :player{age: 32, name: \"Aron Baynes\"}), | |(\"player109\" :player{age: 34, name: \"Tiago Splitter\"}), (\"player108\" :player{age: 36, name: \"Boris Diaw\"})] | +----------------------------------------------------------------------------------------------------------------------+ GO \u8bed\u53e5\u4e2d\u4f7f\u7528 UNWIND \u3002 // \u5728\u70b9\u5217\u8868\u4e2d\u67e5\u8be2\u70b9\u5173\u8054\u7684\u8fb9\u3002 nebula> YIELD ['player101', 'player100'] AS a | UNWIND $-.a AS b | GO FROM $-.b OVER follow YIELD edge AS e; +----------------------------------------------------+ | e | +----------------------------------------------------+ | [:follow \"player101\"->\"player100\" @0 {degree: 95}] | | [:follow \"player101\"->\"player102\" @0 {degree: 90}] | | [:follow \"player101\"->\"player125\" @0 {degree: 95}] | | [:follow \"player100\"->\"player101\" @0 {degree: 95}] | | [:follow \"player100\"->\"player125\" @0 {degree: 95}] | +----------------------------------------------------+ LOOKUP \u8bed\u53e5\u4e2d\u4f7f\u7528 UNWIND \u3002 // \u67e5\u8be2\u5e74\u9f84\u5927\u4e8e 46 \u5c81\u7403\u5458\u7684\u6240\u6709\u5c5e\u6027\uff0c\u53bb\u6389\u91cd\u590d\u5c5e\u6027\uff0c\u5e76\u5c06\u7ed3\u679c\u8f6c\u6362\u4e3a\u884c\u3002 nebula> LOOKUP ON player \\ WHERE player.age > 46 \\ YIELD DISTINCT keys(vertex) as p | UNWIND $-.p as a | YIELD $-.a AS a; +--------+ | a | +--------+ | \"age\" | | \"name\" | +--------+ FETCH \u8bed\u53e5\u4e2d\u4f7f\u7528 UNWIND \u3002 // \u67e5\u8be2 player101 \u70b9\u7684\u6240\u6709 Tag\uff0c\u5e76\u5c06\u7ed3\u679c\u8f6c\u6362\u4e3a\u884c\u3002 nebula> CREATE TAG hero(like string, height int); INSERT VERTEX hero(like, height) VALUES \"player101\":(\"deep\", 182); FETCH PROP ON * \"player101\" \\ YIELD tags(vertex) as t | UNWIND $-.t as a | YIELD $-.a AS a; +----------+ | a | +----------+ | \"hero\" | | \"player\" | +----------+ GET SUBGRAPH \u8bed\u53e5\u4e2d\u4f7f\u7528 UNWIND \u3002 // \u67e5\u8be2\u4ece\u70b9 player100 \u5f00\u59cb\u30010~2 \u8df3\u3001serve \u7c7b\u578b\u7684\u51fa\u8fb9\u548c\u5165\u8fb9\u7684\u5b50\u56fe\uff0c\u5e76\u5c06\u7ed3\u679c\u8f6c\u6362\u4e3a\u884c\u3002 nebula> GET SUBGRAPH 2 STEPS FROM \"player100\" BOTH serve \\ YIELD edges as e | UNWIND $-.e as a | YIELD $-.a AS a; +----------------------------------------------+ | a | +----------------------------------------------+ | [:serve \"player100\"->\"team204\" @0 {}] | | [:serve \"player101\"->\"team204\" @0 {}] | | [:serve \"player102\"->\"team204\" @0 {}] | | [:serve \"player103\"->\"team204\" @0 {}] | | [:serve \"player105\"->\"team204\" @0 {}] | | [:serve \"player106\"->\"team204\" @0 {}] | | [:serve \"player107\"->\"team204\" @0 {}] | | [:serve \"player108\"->\"team204\" @0 {}] | | [:serve \"player109\"->\"team204\" @0 {}] | | [:serve \"player110\"->\"team204\" @0 {}] | | [:serve \"player111\"->\"team204\" @0 {}] | | [:serve \"player112\"->\"team204\" @0 {}] | | [:serve \"player113\"->\"team204\" @0 {}] | | [:serve \"player114\"->\"team204\" @0 {}] | | [:serve \"player125\"->\"team204\" @0 {}] | | [:serve \"player138\"->\"team204\" @0 {}] | | [:serve \"player104\"->\"team204\" @20132015 {}] | | [:serve \"player104\"->\"team204\" @20182019 {}] | +----------------------------------------------+ FIND PATH \u8bed\u53e5\u4e2d\u4f7f\u7528 UNWIND \u3002 // \u627e\u51fa player101 \u5230 team204 \u5ef6 serve \u7c7b\u578b\u8fb9\u7684\u6700\u77ed\u8def\u5f84\u4e0a\u7684\u6240\u6709\u70b9\uff0c\u5e76\u5c06\u7ed3\u679c\u8f6c\u6362\u4e3a\u884c\u3002 nebula> FIND SHORTEST PATH FROM \"player101\" TO \"team204\" OVER serve \\ YIELD path as p | YIELD nodes($-.p) AS nodes | UNWIND $-.nodes AS a | YIELD $-.a AS a; +---------------+ | a | +---------------+ | (\"player101\") | | (\"team204\") | +---------------+","title":"UNWIND"},{"location":"3.ngql-guide/8.clauses-and-options/unwind/#unwind","text":"UNWIND \u8bed\u53e5\u53ef\u4ee5\u5c06\u5217\u8868\u62c6\u5206\u4e3a\u5355\u72ec\u7684\u884c\uff0c\u5217\u8868\u4e2d\u7684\u6bcf\u4e2a\u5143\u7d20\u4e3a\u4e00\u884c\u3002 UNWIND \u53ef\u4ee5\u4f5c\u4e3a\u5355\u72ec\u8bed\u53e5\u6216\u8bed\u53e5\u4e2d\u7684\u5b50\u53e5\u4f7f\u7528\u3002","title":"UNWIND"},{"location":"3.ngql-guide/8.clauses-and-options/unwind/#unwind_1","text":"","title":"UNWIND \u8bed\u53e5"},{"location":"3.ngql-guide/8.clauses-and-options/unwind/#_1","text":"UNWIND <list> AS <alias> <RETURN clause>;","title":"\u8bed\u6cd5"},{"location":"3.ngql-guide/8.clauses-and-options/unwind/#_2","text":"\u62c6\u5206\u5217\u8868\u3002 nebula> UNWIND [1,2,3] AS n RETURN n; +---+ | n | +---+ | 1 | | 2 | | 3 | +---+","title":"\u793a\u4f8b"},{"location":"3.ngql-guide/8.clauses-and-options/unwind/#unwind_2","text":"","title":"UNWIND \u5b50\u53e5"},{"location":"3.ngql-guide/8.clauses-and-options/unwind/#_3","text":"\u539f\u751f nGQL \u8bed\u53e5\u4e2d\u4f7f\u7528 UNWIND \u5b50\u53e5\u3002 Note \u5728\u539f\u751f nGQL \u8bed\u53e5\u4e2d\u4f7f\u7528 UNWIND \u5b50\u53e5\u65f6\uff0c\u9700\u8981\u7528\u5728\u7ba1\u9053\u7b26 | \u4e4b\u540e\uff0c\u5e76\u4f7f\u7528 $- \u5f15\u7528\u7ba1\u9053\u7b26\u4e4b\u524d\u7684\u53d8\u91cf\u3002\u5982\u679c UNWIND \u540e\u4f7f\u7528\u8bed\u53e5\u6216\u5b50\u53e5\uff0c\u9700\u8981\u4f7f\u7528\u7ba1\u9053\u7b26 | \u5e76\u4e14\u4f7f\u7528 $- \u5f15\u7528\u7ba1\u9053\u7b26\u4e4b\u524d\u7684\u53d8\u91cf\u3002 <statement> | UNWIND $-.<var> AS <alias> <|> <clause>; openCypher \u8bed\u53e5\u4e2d\u4f7f\u7528 UNWIND \u5b50\u53e5\u3002 <statement> UNWIND <list> AS <alias> <RETURN clause>\uff1b","title":"\u8bed\u6cd5"},{"location":"3.ngql-guide/8.clauses-and-options/unwind/#_4","text":"\u5728 UNWIND \u5b50\u53e5\u4e2d\u4f7f\u7528 WITH DISTINCT \u53ef\u4ee5\u5c06\u5217\u8868\u4e2d\u7684\u91cd\u590d\u9879\u5ffd\u7565\uff0c\u8fd4\u56de\u53bb\u91cd\u540e\u7684\u7ed3\u679c\u3002 Note \u539f\u751f nGQL \u8bed\u53e5\u4e0d\u652f\u6301 WITH DISTINCT \u3002 // \u62c6\u5206\u5217\u8868`[1,1,2,2,3,3]`\uff0c\u5220\u9664\u91cd\u590d\u884c\uff0c\u6392\u5e8f\u884c\uff0c\u5c06\u884c\u8f6c\u6362\u4e3a\u5217\u8868\u3002 nebula> WITH [1,1,2,2,3,3] AS n \\ UNWIND n AS r \\ WITH DISTINCT r AS r \\ ORDER BY r \\ RETURN collect(r); +------------+ | collect(r) | +------------+ | [1, 2, 3] | +------------+ MATCH \u8bed\u53e5\u4e2d\u4f7f\u7528 UNWIND \u3002 // \u5c06\u5339\u914d\u8def\u5f84\u4e0a\u7684\u9876\u70b9\u8f93\u51fa\u5230\u5217\u8868\u4e2d\uff0c\u62c6\u5206\u5217\u8868\uff0c\u5220\u9664\u91cd\u590d\u884c\uff0c\u5c06\u884c\u8f6c\u6362\u4e3a\u5217\u8868\u3002 nebula> MATCH p=(v:player{name:\"Tim Duncan\"})--(v2) \\ WITH nodes(p) AS n \\ UNWIND n AS r \\ WITH DISTINCT r AS r \\ RETURN collect(r); +----------------------------------------------------------------------------------------------------------------------+ | collect(r) | +----------------------------------------------------------------------------------------------------------------------+ | [(\"player100\" :player{age: 42, name: \"Tim Duncan\"}), (\"player101\" :player{age: 36, name: \"Tony Parker\"}), | |(\"team204\" :team{name: \"Spurs\"}), (\"player102\" :player{age: 33, name: \"LaMarcus Aldridge\"}), | |(\"player125\" :player{age: 41, name: \"Manu Ginobili\"}), (\"player104\" :player{age: 32, name: \"Marco Belinelli\"}), | |(\"player144\" :player{age: 47, name: \"Shaquile O'Neal\"}), (\"player105\" :player{age: 31, name: \"Danny Green\"}), | |(\"player113\" :player{age: 29, name: \"Dejounte Murray\"}), (\"player107\" :player{age: 32, name: \"Aron Baynes\"}), | |(\"player109\" :player{age: 34, name: \"Tiago Splitter\"}), (\"player108\" :player{age: 36, name: \"Boris Diaw\"})] | +----------------------------------------------------------------------------------------------------------------------+ GO \u8bed\u53e5\u4e2d\u4f7f\u7528 UNWIND \u3002 // \u5728\u70b9\u5217\u8868\u4e2d\u67e5\u8be2\u70b9\u5173\u8054\u7684\u8fb9\u3002 nebula> YIELD ['player101', 'player100'] AS a | UNWIND $-.a AS b | GO FROM $-.b OVER follow YIELD edge AS e; +----------------------------------------------------+ | e | +----------------------------------------------------+ | [:follow \"player101\"->\"player100\" @0 {degree: 95}] | | [:follow \"player101\"->\"player102\" @0 {degree: 90}] | | [:follow \"player101\"->\"player125\" @0 {degree: 95}] | | [:follow \"player100\"->\"player101\" @0 {degree: 95}] | | [:follow \"player100\"->\"player125\" @0 {degree: 95}] | +----------------------------------------------------+ LOOKUP \u8bed\u53e5\u4e2d\u4f7f\u7528 UNWIND \u3002 // \u67e5\u8be2\u5e74\u9f84\u5927\u4e8e 46 \u5c81\u7403\u5458\u7684\u6240\u6709\u5c5e\u6027\uff0c\u53bb\u6389\u91cd\u590d\u5c5e\u6027\uff0c\u5e76\u5c06\u7ed3\u679c\u8f6c\u6362\u4e3a\u884c\u3002 nebula> LOOKUP ON player \\ WHERE player.age > 46 \\ YIELD DISTINCT keys(vertex) as p | UNWIND $-.p as a | YIELD $-.a AS a; +--------+ | a | +--------+ | \"age\" | | \"name\" | +--------+ FETCH \u8bed\u53e5\u4e2d\u4f7f\u7528 UNWIND \u3002 // \u67e5\u8be2 player101 \u70b9\u7684\u6240\u6709 Tag\uff0c\u5e76\u5c06\u7ed3\u679c\u8f6c\u6362\u4e3a\u884c\u3002 nebula> CREATE TAG hero(like string, height int); INSERT VERTEX hero(like, height) VALUES \"player101\":(\"deep\", 182); FETCH PROP ON * \"player101\" \\ YIELD tags(vertex) as t | UNWIND $-.t as a | YIELD $-.a AS a; +----------+ | a | +----------+ | \"hero\" | | \"player\" | +----------+ GET SUBGRAPH \u8bed\u53e5\u4e2d\u4f7f\u7528 UNWIND \u3002 // \u67e5\u8be2\u4ece\u70b9 player100 \u5f00\u59cb\u30010~2 \u8df3\u3001serve \u7c7b\u578b\u7684\u51fa\u8fb9\u548c\u5165\u8fb9\u7684\u5b50\u56fe\uff0c\u5e76\u5c06\u7ed3\u679c\u8f6c\u6362\u4e3a\u884c\u3002 nebula> GET SUBGRAPH 2 STEPS FROM \"player100\" BOTH serve \\ YIELD edges as e | UNWIND $-.e as a | YIELD $-.a AS a; +----------------------------------------------+ | a | +----------------------------------------------+ | [:serve \"player100\"->\"team204\" @0 {}] | | [:serve \"player101\"->\"team204\" @0 {}] | | [:serve \"player102\"->\"team204\" @0 {}] | | [:serve \"player103\"->\"team204\" @0 {}] | | [:serve \"player105\"->\"team204\" @0 {}] | | [:serve \"player106\"->\"team204\" @0 {}] | | [:serve \"player107\"->\"team204\" @0 {}] | | [:serve \"player108\"->\"team204\" @0 {}] | | [:serve \"player109\"->\"team204\" @0 {}] | | [:serve \"player110\"->\"team204\" @0 {}] | | [:serve \"player111\"->\"team204\" @0 {}] | | [:serve \"player112\"->\"team204\" @0 {}] | | [:serve \"player113\"->\"team204\" @0 {}] | | [:serve \"player114\"->\"team204\" @0 {}] | | [:serve \"player125\"->\"team204\" @0 {}] | | [:serve \"player138\"->\"team204\" @0 {}] | | [:serve \"player104\"->\"team204\" @20132015 {}] | | [:serve \"player104\"->\"team204\" @20182019 {}] | +----------------------------------------------+ FIND PATH \u8bed\u53e5\u4e2d\u4f7f\u7528 UNWIND \u3002 // \u627e\u51fa player101 \u5230 team204 \u5ef6 serve \u7c7b\u578b\u8fb9\u7684\u6700\u77ed\u8def\u5f84\u4e0a\u7684\u6240\u6709\u70b9\uff0c\u5e76\u5c06\u7ed3\u679c\u8f6c\u6362\u4e3a\u884c\u3002 nebula> FIND SHORTEST PATH FROM \"player101\" TO \"team204\" OVER serve \\ YIELD path as p | YIELD nodes($-.p) AS nodes | UNWIND $-.nodes AS a | YIELD $-.a AS a; +---------------+ | a | +---------------+ | (\"player101\") | | (\"team204\") | +---------------+","title":"\u793a\u4f8b"},{"location":"3.ngql-guide/8.clauses-and-options/where/","text":"WHERE \u00b6 WHERE \u5b50\u53e5\u53ef\u4ee5\u6839\u636e\u6761\u4ef6\u8fc7\u6ee4\u8f93\u51fa\u7ed3\u679c\u3002 WHERE \u5b50\u53e5\u901a\u5e38\u7528\u4e8e\u5982\u4e0b\u67e5\u8be2\uff1a \u539f\u751f nGQL\uff0c\u4f8b\u5982 GO \u548c LOOKUP \u8bed\u53e5\u3002 openCypher \u65b9\u5f0f\uff0c\u4f8b\u5982 MATCH \u548c WITH \u8bed\u53e5\u3002 openCypher \u517c\u5bb9\u6027 \u00b6 \u8fc7\u6ee4 Rank \u662f\u539f\u751f nGQL \u529f\u80fd\u3002\u5982\u9700\u5728 openCypher \u517c\u5bb9\u8bed\u53e5\u4e2d\u76f4\u63a5\u83b7\u53d6 Rank \u503c\uff0c\u53ef\u4ee5\u4f7f\u7528 rank() \u51fd\u6570\uff0c\u4f8b\u5982 MATCH (:player)-[e:follow]->() RETURN rank(e); \u3002 \u57fa\u7840\u7528\u6cd5 \u00b6 Note \u4e0b\u6587\u793a\u4f8b\u4e2d\u7684 $$ \u3001 $^ \u7b49\u662f\u5f15\u7528\u7b26\u53f7\uff0c\u8be6\u60c5\u8bf7\u53c2\u89c1 \u5f15\u7528\u7b26 \u3002 \u7528\u5e03\u5c14\u8fd0\u7b97\u7b26\u5b9a\u4e49\u6761\u4ef6 \u00b6 \u5728 WHERE \u5b50\u53e5\u4e2d\u4f7f\u7528\u5e03\u5c14\u8fd0\u7b97\u7b26 NOT \u3001 AND \u3001 OR \u548c XOR \u5b9a\u4e49\u6761\u4ef6\u3002\u5173\u4e8e\u8fd0\u7b97\u7b26\u7684\u4f18\u5148\u7ea7\uff0c\u8bf7\u53c2\u89c1 \u8fd0\u7b97\u7b26\u4f18\u5148\u7ea7 \u3002 nebula> MATCH (v:player) \\ WHERE v.player.name == \"Tim Duncan\" \\ XOR (v.player.age < 30 AND v.player.name == \"Yao Ming\") \\ OR NOT (v.player.name == \"Yao Ming\" OR v.player.name == \"Tim Duncan\") \\ RETURN v.player.name, v.player.age; +-------------------------+--------------+ | v.player.name | v.player.age | +-------------------------+--------------+ | \"Danny Green\" | 31 | | \"Tiago Splitter\" | 34 | | \"David West\" | 38 | ... nebula> GO FROM \"player100\" \\ OVER follow \\ WHERE properties(edge).degree > 90 \\ OR properties($$).age != 33 \\ AND properties($$).name != \"Tony Parker\" \\ YIELD properties($$); +----------------------------------+ | properties($$) | +----------------------------------+ | {age: 41, name: \"Manu Ginobili\"} | +----------------------------------+ \u8fc7\u6ee4\u5c5e\u6027 \u00b6 \u5728 WHERE \u5b50\u53e5\u4e2d\u4f7f\u7528\u70b9\u6216\u8fb9\u7684\u5c5e\u6027\u5b9a\u4e49\u6761\u4ef6\u3002 \u8fc7\u6ee4\u70b9\u5c5e\u6027\uff1a nebula> MATCH (v:player)-[e]->(v2) \\ WHERE v2.player.age < 25 \\ RETURN v2.player.name, v2.player.age; +----------------------+---------------+ | v2.player.name | v2.player.age | +----------------------+---------------+ | \"Ben Simmons\" | 22 | | \"Luka Doncic\" | 20 | | \"Kristaps Porzingis\" | 23 | +----------------------+---------------+ nebula> GO FROM \"player100\" OVER follow \\ WHERE $^.player.age >= 42 \\ YIELD dst(edge); +-------------+ | dst(EDGE) | +-------------+ | \"player101\" | | \"player125\" | +-------------+ \u8fc7\u6ee4\u8fb9\u5c5e\u6027\uff1a nebula> MATCH (v:player)-[e]->() \\ WHERE e.start_year < 2000 \\ RETURN DISTINCT v.player.name, v.player.age; +--------------------+--------------+ | v.player.name | v.player.age | +--------------------+--------------+ | \"Tony Parker\" | 36 | | \"Tim Duncan\" | 42 | | \"Grant Hill\" | 46 | ... nebula> GO FROM \"player100\" OVER follow \\ WHERE follow.degree > 90 \\ YIELD dst(edge); +-------------+ | dst(EDGE) | +-------------+ | \"player101\" | | \"player125\" | +-------------+ \u8fc7\u6ee4\u52a8\u6001\u8ba1\u7b97\u5c5e\u6027 \u00b6 nebula> MATCH (v:player) \\ WHERE v[toLower(\"AGE\")] < 21 \\ RETURN v.player.name, v.player.age; +---------------+-------+ | v.name | v.age | +---------------+-------+ | \"Luka Doncic\" | 20 | +---------------+-------+ \u8fc7\u6ee4\u73b0\u5b58\u5c5e\u6027 \u00b6 nebula> MATCH (v:player) \\ WHERE exists(v.player.age) \\ RETURN v.player.name, v.player.age; +-------------------------+--------------+ | v.player.name | v.player.age | +-------------------------+--------------+ | \"Danny Green\" | 31 | | \"Tiago Splitter\" | 34 | | \"David West\" | 38 | ... \u8fc7\u6ee4 rank \u00b6 \u5728 nGQL \u4e2d\uff0c\u5982\u679c\u591a\u4e2a\u8fb9\u62e5\u6709\u76f8\u540c\u7684\u8d77\u59cb\u70b9\u3001\u76ee\u7684\u70b9\u548c\u5c5e\u6027\uff0c\u5219\u5b83\u4eec\u7684\u552f\u4e00\u533a\u522b\u662f rank \u503c\u3002\u5728 WHERE \u5b50\u53e5\u4e2d\u53ef\u4ee5\u4f7f\u7528 rank \u8fc7\u6ee4\u8fb9\u3002 # \u521b\u5efa\u6d4b\u8bd5\u6570\u636e\u3002 nebula> CREATE SPACE IF NOT EXISTS test (vid_type=FIXED_STRING(30)); nebula> USE test; nebula> CREATE EDGE IF NOT EXISTS e1(p1 int); nebula> CREATE TAG IF NOT EXISTS person(p1 int); nebula> INSERT VERTEX person(p1) VALUES \"1\":(1); nebula> INSERT VERTEX person(p1) VALUES \"2\":(2); nebula> INSERT EDGE e1(p1) VALUES \"1\"->\"2\"@0:(10); nebula> INSERT EDGE e1(p1) VALUES \"1\"->\"2\"@1:(11); nebula> INSERT EDGE e1(p1) VALUES \"1\"->\"2\"@2:(12); nebula> INSERT EDGE e1(p1) VALUES \"1\"->\"2\"@3:(13); nebula> INSERT EDGE e1(p1) VALUES \"1\"->\"2\"@4:(14); nebula> INSERT EDGE e1(p1) VALUES \"1\"->\"2\"@5:(15); nebula> INSERT EDGE e1(p1) VALUES \"1\"->\"2\"@6:(16); # \u901a\u8fc7 rank \u8fc7\u6ee4\u8fb9\uff0c\u67e5\u627e rank \u5927\u4e8e 2 \u7684\u8fb9\u3002 nebula> GO FROM \"1\" \\ OVER e1 \\ WHERE rank(edge) > 2 \\ YIELD src(edge), dst(edge), rank(edge) AS Rank, properties(edge).p1 | \\ ORDER BY $-.Rank DESC; +-----------+-----------+------+---------------------+ | src(EDGE) | dst(EDGE) | Rank | properties(EDGE).p1 | +-----------+-----------+------+---------------------+ | \"1\" | \"2\" | 6 | 16 | | \"1\" | \"2\" | 5 | 15 | | \"1\" | \"2\" | 4 | 14 | | \"1\" | \"2\" | 3 | 13 | +-----------+-----------+------+---------------------+ # \u901a\u8fc7 rank \u8fc7\u6ee4\u8fb9\uff0c\u67e5\u627e rank \u503c\u7b49\u4e8e 0 \u7684 follow \u8fb9\u3002 nebula> MATCH (v)-[e:follow]->() \\ WHERE rank(e)==0 \\ RETURN *; +------------------------------------------------------------+-----------------------------------------------------+ | v | e | +------------------------------------------------------------+-----------------------------------------------------+ | (\"player142\" :player{age: 29, name: \"Klay Thompson\"}) | [:follow \"player142\"->\"player117\" @0 {degree: 90}] | | (\"player139\" :player{age: 34, name: \"Marc Gasol\"}) | [:follow \"player139\"->\"player138\" @0 {degree: 99}] | | (\"player108\" :player{age: 36, name: \"Boris Diaw\"}) | [:follow \"player108\"->\"player100\" @0 {degree: 80}] | | (\"player108\" :player{age: 36, name: \"Boris Diaw\"}) | [:follow \"player108\"->\"player101\" @0 {degree: 80}] | ... \u8fc7\u6ee4 pattern \u00b6 nebula> MATCH (v:player{name:\"Tim Duncan\"})-[e]->(t) \\ WHERE (v)-[e]->(t:team) \\ RETURN (v)-->(); +------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+ | (v)-->() = (v)-->() | +------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+ | [<(\"player100\" :player{age: 42, name: \"Tim Duncan\"})-[:serve@0 {end_year: 2016, start_year: 1997}]->(\"team204\" :team{name: \"Spurs\"})>, <(\"player100\" :player{age: 42, name: \"Tim Duncan\"})-[:follow@0 {degree: 95}]->(\"player101\" :player{age: 36, name: \"Tony Parker\"})>, <(\"player100\" :player{age: 42, name: \"Tim Duncan\"})-[:follow@0 {degree: 95}]->(\"player125\" :player{age: 41, name: \"Manu Ginobili\"})>] | +------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+ nebula> MATCH (v:player{name:\"Tim Duncan\"})-[e]->(t) \\ WHERE NOT (v)-[e]->(t:team) \\ RETURN (v)-->(); +------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+ | (v)-->() = (v)-->() | +------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+ | [<(\"player100\" :player{age: 42, name: \"Tim Duncan\"})-[:serve@0 {end_year: 2016, start_year: 1997}]->(\"team204\" :team{name: \"Spurs\"})>, <(\"player100\" :player{age: 42, name: \"Tim Duncan\"})-[:follow@0 {degree: 95}]->(\"player101\" :player{age: 36, name: \"Tony Parker\"})>, <(\"player100\" :player{age: 42, name: \"Tim Duncan\"})-[:follow@0 {degree: 95}]->(\"player125\" :player{age: 41, name: \"Manu Ginobili\"})>] | | [<(\"player100\" :player{age: 42, name: \"Tim Duncan\"})-[:serve@0 {end_year: 2016, start_year: 1997}]->(\"team204\" :team{name: \"Spurs\"})>, <(\"player100\" :player{age: 42, name: \"Tim Duncan\"})-[:follow@0 {degree: 95}]->(\"player101\" :player{age: 36, name: \"Tony Parker\"})>, <(\"player100\" :player{age: 42, name: \"Tim Duncan\"})-[:follow@0 {degree: 95}]->(\"player125\" :player{age: 41, name: \"Manu Ginobili\"})>] | +------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+ \u8fc7\u6ee4\u5b57\u7b26\u4e32 \u00b6 \u5728 WHERE \u5b50\u53e5\u4e2d\u4f7f\u7528 STARTS WITH \u3001 ENDS WITH \u6216 CONTAINS \u53ef\u4ee5\u5339\u914d\u5b57\u7b26\u4e32\u7684\u7279\u5b9a\u90e8\u5206\u3002\u5339\u914d\u65f6\u533a\u5206\u5927\u5c0f\u5199\u3002 STARTS WITH \u00b6 STARTS WITH \u4f1a\u4ece\u5b57\u7b26\u4e32\u7684\u8d77\u59cb\u4f4d\u7f6e\u5f00\u59cb\u5339\u914d\u3002 # \u67e5\u8be2\u59d3\u540d\u4ee5 T \u5f00\u5934\u7684 player \u4fe1\u606f\u3002 nebula> MATCH (v:player) \\ WHERE v.player.name STARTS WITH \"T\" \\ RETURN v.player.name, v.player.age; +------------------+--------------+ | v.player.name | v.player.age | +------------------+--------------+ | \"Tony Parker\" | 36 | | \"Tiago Splitter\" | 34 | | \"Tim Duncan\" | 42 | | \"Tracy McGrady\" | 39 | +------------------+--------------+ \u5982\u679c\u4f7f\u7528\u5c0f\u5199 t \uff08 STARTS WITH \"t\" \uff09\uff0c\u4f1a\u8fd4\u56de\u7a7a\u96c6\uff0c\u56e0\u4e3a\u6570\u636e\u5e93\u4e2d\u6ca1\u6709\u4ee5\u5c0f\u5199 t \u5f00\u5934\u7684\u59d3\u540d\u3002 nebula> MATCH (v:player) \\ WHERE v.player.name STARTS WITH \"t\" \\ RETURN v.player.name, v.player.age; +---------------+--------------+ | v.player.name | v.player.age | +---------------+--------------+ +---------------+--------------+ Empty set (time spent 5080/6474 us) ENDS WITH \u00b6 ENDS WITH \u4f1a\u4ece\u5b57\u7b26\u4e32\u7684\u7ed3\u675f\u4f4d\u7f6e\u5f00\u59cb\u5339\u914d\u3002 nebula> MATCH (v:player) \\ WHERE v.player.name ENDS WITH \"r\" \\ RETURN v.player.name, v.player.age; +------------------+--------------+ | v.player.name | v.player.age | +------------------+--------------+ | \"Tony Parker\" | 36 | | \"Tiago Splitter\" | 34 | | \"Vince Carter\" | 42 | +------------------+--------------+ CONTAINS \u00b6 CONTAINS \u4f1a\u68c0\u67e5\u5173\u952e\u5b57\u662f\u5426\u5339\u914d\u5b57\u7b26\u4e32\u7684\u67d0\u4e00\u90e8\u5206\u3002 nebula> MATCH (v:player) \\ WHERE v.player.name CONTAINS \"Pa\" \\ RETURN v.player.name, v.player.age; +---------------+--------------+ | v.player.name | v.player.age | +---------------+--------------+ | \"Paul George\" | 28 | | \"Tony Parker\" | 36 | | \"Paul Gasol\" | 38 | | \"Chris Paul\" | 33 | +---------------+--------------+ \u7ed3\u5408 NOT \u4f7f\u7528 \u00b6 \u7528\u6237\u53ef\u4ee5\u7ed3\u5408\u5e03\u5c14\u8fd0\u7b97\u7b26 NOT \u4e00\u8d77\u4f7f\u7528\uff0c\u5426\u5b9a\u5b57\u7b26\u4e32\u5339\u914d\u6761\u4ef6\u3002 nebula> MATCH (v:player) \\ WHERE NOT v.player.name ENDS WITH \"R\" \\ RETURN v.player.name, v.player.age; +-------------------------+--------------+ | v.player.name | v.player.age | +-------------------------+--------------+ | \"Danny Green\" | 31 | | \"Tiago Splitter\" | 34 | | \"David West\" | 38 | | \"Russell Westbrook\" | 30 | ... \u8fc7\u6ee4\u5217\u8868 \u00b6 \u5339\u914d\u5217\u8868\u4e2d\u7684\u503c \u00b6 \u4f7f\u7528 IN \u8fd0\u7b97\u7b26\u68c0\u67e5\u67d0\u4e2a\u503c\u662f\u5426\u5728\u6307\u5b9a\u5217\u8868\u4e2d\u3002 nebula> MATCH (v:player) \\ WHERE v.player.age IN range(20,25) \\ RETURN v.player.name, v.player.age; +-------------------------+--------------+ | v.player.name | v.player.age | +-------------------------+--------------+ | \"Ben Simmons\" | 22 | | \"Giannis Antetokounmpo\" | 24 | | \"Kyle Anderson\" | 25 | | \"Joel Embiid\" | 25 | | \"Kristaps Porzingis\" | 23 | | \"Luka Doncic\" | 20 | +-------------------------+--------------+ nebula> LOOKUP ON player \\ WHERE player.age IN [25,28] \\ YIELD properties(vertex).name, properties(vertex).age; +-------------------------+------------------------+ | properties(VERTEX).name | properties(VERTEX).age | +-------------------------+------------------------+ | \"Kyle Anderson\" | 25 | | \"Damian Lillard\" | 28 | | \"Joel Embiid\" | 25 | | \"Paul George\" | 28 | | \"Ricky Rubio\" | 28 | +-------------------------+------------------------+ \u7ed3\u5408 NOT \u4f7f\u7528 \u00b6 nebula> MATCH (v:player) \\ WHERE v.player.age NOT IN range(20,25) \\ RETURN v.player.name AS Name, v.player.age AS Age \\ ORDER BY Age; +---------------------+-----+ | Name | Age | +---------------------+-----+ | \"Kyrie Irving\" | 26 | | \"Cory Joseph\" | 27 | | \"Damian Lillard\" | 28 | | \"Paul George\" | 28 | | \"Ricky Rubio\" | 28 | ...","title":"WHERE"},{"location":"3.ngql-guide/8.clauses-and-options/where/#where","text":"WHERE \u5b50\u53e5\u53ef\u4ee5\u6839\u636e\u6761\u4ef6\u8fc7\u6ee4\u8f93\u51fa\u7ed3\u679c\u3002 WHERE \u5b50\u53e5\u901a\u5e38\u7528\u4e8e\u5982\u4e0b\u67e5\u8be2\uff1a \u539f\u751f nGQL\uff0c\u4f8b\u5982 GO \u548c LOOKUP \u8bed\u53e5\u3002 openCypher \u65b9\u5f0f\uff0c\u4f8b\u5982 MATCH \u548c WITH \u8bed\u53e5\u3002","title":"WHERE"},{"location":"3.ngql-guide/8.clauses-and-options/where/#opencypher","text":"\u8fc7\u6ee4 Rank \u662f\u539f\u751f nGQL \u529f\u80fd\u3002\u5982\u9700\u5728 openCypher \u517c\u5bb9\u8bed\u53e5\u4e2d\u76f4\u63a5\u83b7\u53d6 Rank \u503c\uff0c\u53ef\u4ee5\u4f7f\u7528 rank() \u51fd\u6570\uff0c\u4f8b\u5982 MATCH (:player)-[e:follow]->() RETURN rank(e); \u3002","title":"openCypher \u517c\u5bb9\u6027"},{"location":"3.ngql-guide/8.clauses-and-options/where/#_1","text":"Note \u4e0b\u6587\u793a\u4f8b\u4e2d\u7684 $$ \u3001 $^ \u7b49\u662f\u5f15\u7528\u7b26\u53f7\uff0c\u8be6\u60c5\u8bf7\u53c2\u89c1 \u5f15\u7528\u7b26 \u3002","title":"\u57fa\u7840\u7528\u6cd5"},{"location":"3.ngql-guide/8.clauses-and-options/where/#_2","text":"\u5728 WHERE \u5b50\u53e5\u4e2d\u4f7f\u7528\u5e03\u5c14\u8fd0\u7b97\u7b26 NOT \u3001 AND \u3001 OR \u548c XOR \u5b9a\u4e49\u6761\u4ef6\u3002\u5173\u4e8e\u8fd0\u7b97\u7b26\u7684\u4f18\u5148\u7ea7\uff0c\u8bf7\u53c2\u89c1 \u8fd0\u7b97\u7b26\u4f18\u5148\u7ea7 \u3002 nebula> MATCH (v:player) \\ WHERE v.player.name == \"Tim Duncan\" \\ XOR (v.player.age < 30 AND v.player.name == \"Yao Ming\") \\ OR NOT (v.player.name == \"Yao Ming\" OR v.player.name == \"Tim Duncan\") \\ RETURN v.player.name, v.player.age; +-------------------------+--------------+ | v.player.name | v.player.age | +-------------------------+--------------+ | \"Danny Green\" | 31 | | \"Tiago Splitter\" | 34 | | \"David West\" | 38 | ... nebula> GO FROM \"player100\" \\ OVER follow \\ WHERE properties(edge).degree > 90 \\ OR properties($$).age != 33 \\ AND properties($$).name != \"Tony Parker\" \\ YIELD properties($$); +----------------------------------+ | properties($$) | +----------------------------------+ | {age: 41, name: \"Manu Ginobili\"} | +----------------------------------+","title":"\u7528\u5e03\u5c14\u8fd0\u7b97\u7b26\u5b9a\u4e49\u6761\u4ef6"},{"location":"3.ngql-guide/8.clauses-and-options/where/#_3","text":"\u5728 WHERE \u5b50\u53e5\u4e2d\u4f7f\u7528\u70b9\u6216\u8fb9\u7684\u5c5e\u6027\u5b9a\u4e49\u6761\u4ef6\u3002 \u8fc7\u6ee4\u70b9\u5c5e\u6027\uff1a nebula> MATCH (v:player)-[e]->(v2) \\ WHERE v2.player.age < 25 \\ RETURN v2.player.name, v2.player.age; +----------------------+---------------+ | v2.player.name | v2.player.age | +----------------------+---------------+ | \"Ben Simmons\" | 22 | | \"Luka Doncic\" | 20 | | \"Kristaps Porzingis\" | 23 | +----------------------+---------------+ nebula> GO FROM \"player100\" OVER follow \\ WHERE $^.player.age >= 42 \\ YIELD dst(edge); +-------------+ | dst(EDGE) | +-------------+ | \"player101\" | | \"player125\" | +-------------+ \u8fc7\u6ee4\u8fb9\u5c5e\u6027\uff1a nebula> MATCH (v:player)-[e]->() \\ WHERE e.start_year < 2000 \\ RETURN DISTINCT v.player.name, v.player.age; +--------------------+--------------+ | v.player.name | v.player.age | +--------------------+--------------+ | \"Tony Parker\" | 36 | | \"Tim Duncan\" | 42 | | \"Grant Hill\" | 46 | ... nebula> GO FROM \"player100\" OVER follow \\ WHERE follow.degree > 90 \\ YIELD dst(edge); +-------------+ | dst(EDGE) | +-------------+ | \"player101\" | | \"player125\" | +-------------+","title":"\u8fc7\u6ee4\u5c5e\u6027"},{"location":"3.ngql-guide/8.clauses-and-options/where/#_4","text":"nebula> MATCH (v:player) \\ WHERE v[toLower(\"AGE\")] < 21 \\ RETURN v.player.name, v.player.age; +---------------+-------+ | v.name | v.age | +---------------+-------+ | \"Luka Doncic\" | 20 | +---------------+-------+","title":"\u8fc7\u6ee4\u52a8\u6001\u8ba1\u7b97\u5c5e\u6027"},{"location":"3.ngql-guide/8.clauses-and-options/where/#_5","text":"nebula> MATCH (v:player) \\ WHERE exists(v.player.age) \\ RETURN v.player.name, v.player.age; +-------------------------+--------------+ | v.player.name | v.player.age | +-------------------------+--------------+ | \"Danny Green\" | 31 | | \"Tiago Splitter\" | 34 | | \"David West\" | 38 | ...","title":"\u8fc7\u6ee4\u73b0\u5b58\u5c5e\u6027"},{"location":"3.ngql-guide/8.clauses-and-options/where/#rank","text":"\u5728 nGQL \u4e2d\uff0c\u5982\u679c\u591a\u4e2a\u8fb9\u62e5\u6709\u76f8\u540c\u7684\u8d77\u59cb\u70b9\u3001\u76ee\u7684\u70b9\u548c\u5c5e\u6027\uff0c\u5219\u5b83\u4eec\u7684\u552f\u4e00\u533a\u522b\u662f rank \u503c\u3002\u5728 WHERE \u5b50\u53e5\u4e2d\u53ef\u4ee5\u4f7f\u7528 rank \u8fc7\u6ee4\u8fb9\u3002 # \u521b\u5efa\u6d4b\u8bd5\u6570\u636e\u3002 nebula> CREATE SPACE IF NOT EXISTS test (vid_type=FIXED_STRING(30)); nebula> USE test; nebula> CREATE EDGE IF NOT EXISTS e1(p1 int); nebula> CREATE TAG IF NOT EXISTS person(p1 int); nebula> INSERT VERTEX person(p1) VALUES \"1\":(1); nebula> INSERT VERTEX person(p1) VALUES \"2\":(2); nebula> INSERT EDGE e1(p1) VALUES \"1\"->\"2\"@0:(10); nebula> INSERT EDGE e1(p1) VALUES \"1\"->\"2\"@1:(11); nebula> INSERT EDGE e1(p1) VALUES \"1\"->\"2\"@2:(12); nebula> INSERT EDGE e1(p1) VALUES \"1\"->\"2\"@3:(13); nebula> INSERT EDGE e1(p1) VALUES \"1\"->\"2\"@4:(14); nebula> INSERT EDGE e1(p1) VALUES \"1\"->\"2\"@5:(15); nebula> INSERT EDGE e1(p1) VALUES \"1\"->\"2\"@6:(16); # \u901a\u8fc7 rank \u8fc7\u6ee4\u8fb9\uff0c\u67e5\u627e rank \u5927\u4e8e 2 \u7684\u8fb9\u3002 nebula> GO FROM \"1\" \\ OVER e1 \\ WHERE rank(edge) > 2 \\ YIELD src(edge), dst(edge), rank(edge) AS Rank, properties(edge).p1 | \\ ORDER BY $-.Rank DESC; +-----------+-----------+------+---------------------+ | src(EDGE) | dst(EDGE) | Rank | properties(EDGE).p1 | +-----------+-----------+------+---------------------+ | \"1\" | \"2\" | 6 | 16 | | \"1\" | \"2\" | 5 | 15 | | \"1\" | \"2\" | 4 | 14 | | \"1\" | \"2\" | 3 | 13 | +-----------+-----------+------+---------------------+ # \u901a\u8fc7 rank \u8fc7\u6ee4\u8fb9\uff0c\u67e5\u627e rank \u503c\u7b49\u4e8e 0 \u7684 follow \u8fb9\u3002 nebula> MATCH (v)-[e:follow]->() \\ WHERE rank(e)==0 \\ RETURN *; +------------------------------------------------------------+-----------------------------------------------------+ | v | e | +------------------------------------------------------------+-----------------------------------------------------+ | (\"player142\" :player{age: 29, name: \"Klay Thompson\"}) | [:follow \"player142\"->\"player117\" @0 {degree: 90}] | | (\"player139\" :player{age: 34, name: \"Marc Gasol\"}) | [:follow \"player139\"->\"player138\" @0 {degree: 99}] | | (\"player108\" :player{age: 36, name: \"Boris Diaw\"}) | [:follow \"player108\"->\"player100\" @0 {degree: 80}] | | (\"player108\" :player{age: 36, name: \"Boris Diaw\"}) | [:follow \"player108\"->\"player101\" @0 {degree: 80}] | ...","title":"\u8fc7\u6ee4 rank"},{"location":"3.ngql-guide/8.clauses-and-options/where/#pattern","text":"nebula> MATCH (v:player{name:\"Tim Duncan\"})-[e]->(t) \\ WHERE (v)-[e]->(t:team) \\ RETURN (v)-->(); +------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+ | (v)-->() = (v)-->() | +------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+ | [<(\"player100\" :player{age: 42, name: \"Tim Duncan\"})-[:serve@0 {end_year: 2016, start_year: 1997}]->(\"team204\" :team{name: \"Spurs\"})>, <(\"player100\" :player{age: 42, name: \"Tim Duncan\"})-[:follow@0 {degree: 95}]->(\"player101\" :player{age: 36, name: \"Tony Parker\"})>, <(\"player100\" :player{age: 42, name: \"Tim Duncan\"})-[:follow@0 {degree: 95}]->(\"player125\" :player{age: 41, name: \"Manu Ginobili\"})>] | +------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+ nebula> MATCH (v:player{name:\"Tim Duncan\"})-[e]->(t) \\ WHERE NOT (v)-[e]->(t:team) \\ RETURN (v)-->(); +------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+ | (v)-->() = (v)-->() | +------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+ | [<(\"player100\" :player{age: 42, name: \"Tim Duncan\"})-[:serve@0 {end_year: 2016, start_year: 1997}]->(\"team204\" :team{name: \"Spurs\"})>, <(\"player100\" :player{age: 42, name: \"Tim Duncan\"})-[:follow@0 {degree: 95}]->(\"player101\" :player{age: 36, name: \"Tony Parker\"})>, <(\"player100\" :player{age: 42, name: \"Tim Duncan\"})-[:follow@0 {degree: 95}]->(\"player125\" :player{age: 41, name: \"Manu Ginobili\"})>] | | [<(\"player100\" :player{age: 42, name: \"Tim Duncan\"})-[:serve@0 {end_year: 2016, start_year: 1997}]->(\"team204\" :team{name: \"Spurs\"})>, <(\"player100\" :player{age: 42, name: \"Tim Duncan\"})-[:follow@0 {degree: 95}]->(\"player101\" :player{age: 36, name: \"Tony Parker\"})>, <(\"player100\" :player{age: 42, name: \"Tim Duncan\"})-[:follow@0 {degree: 95}]->(\"player125\" :player{age: 41, name: \"Manu Ginobili\"})>] | +------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+","title":"\u8fc7\u6ee4 pattern"},{"location":"3.ngql-guide/8.clauses-and-options/where/#_6","text":"\u5728 WHERE \u5b50\u53e5\u4e2d\u4f7f\u7528 STARTS WITH \u3001 ENDS WITH \u6216 CONTAINS \u53ef\u4ee5\u5339\u914d\u5b57\u7b26\u4e32\u7684\u7279\u5b9a\u90e8\u5206\u3002\u5339\u914d\u65f6\u533a\u5206\u5927\u5c0f\u5199\u3002","title":"\u8fc7\u6ee4\u5b57\u7b26\u4e32"},{"location":"3.ngql-guide/8.clauses-and-options/where/#starts_with","text":"STARTS WITH \u4f1a\u4ece\u5b57\u7b26\u4e32\u7684\u8d77\u59cb\u4f4d\u7f6e\u5f00\u59cb\u5339\u914d\u3002 # \u67e5\u8be2\u59d3\u540d\u4ee5 T \u5f00\u5934\u7684 player \u4fe1\u606f\u3002 nebula> MATCH (v:player) \\ WHERE v.player.name STARTS WITH \"T\" \\ RETURN v.player.name, v.player.age; +------------------+--------------+ | v.player.name | v.player.age | +------------------+--------------+ | \"Tony Parker\" | 36 | | \"Tiago Splitter\" | 34 | | \"Tim Duncan\" | 42 | | \"Tracy McGrady\" | 39 | +------------------+--------------+ \u5982\u679c\u4f7f\u7528\u5c0f\u5199 t \uff08 STARTS WITH \"t\" \uff09\uff0c\u4f1a\u8fd4\u56de\u7a7a\u96c6\uff0c\u56e0\u4e3a\u6570\u636e\u5e93\u4e2d\u6ca1\u6709\u4ee5\u5c0f\u5199 t \u5f00\u5934\u7684\u59d3\u540d\u3002 nebula> MATCH (v:player) \\ WHERE v.player.name STARTS WITH \"t\" \\ RETURN v.player.name, v.player.age; +---------------+--------------+ | v.player.name | v.player.age | +---------------+--------------+ +---------------+--------------+ Empty set (time spent 5080/6474 us)","title":"STARTS WITH"},{"location":"3.ngql-guide/8.clauses-and-options/where/#ends_with","text":"ENDS WITH \u4f1a\u4ece\u5b57\u7b26\u4e32\u7684\u7ed3\u675f\u4f4d\u7f6e\u5f00\u59cb\u5339\u914d\u3002 nebula> MATCH (v:player) \\ WHERE v.player.name ENDS WITH \"r\" \\ RETURN v.player.name, v.player.age; +------------------+--------------+ | v.player.name | v.player.age | +------------------+--------------+ | \"Tony Parker\" | 36 | | \"Tiago Splitter\" | 34 | | \"Vince Carter\" | 42 | +------------------+--------------+","title":"ENDS WITH"},{"location":"3.ngql-guide/8.clauses-and-options/where/#contains","text":"CONTAINS \u4f1a\u68c0\u67e5\u5173\u952e\u5b57\u662f\u5426\u5339\u914d\u5b57\u7b26\u4e32\u7684\u67d0\u4e00\u90e8\u5206\u3002 nebula> MATCH (v:player) \\ WHERE v.player.name CONTAINS \"Pa\" \\ RETURN v.player.name, v.player.age; +---------------+--------------+ | v.player.name | v.player.age | +---------------+--------------+ | \"Paul George\" | 28 | | \"Tony Parker\" | 36 | | \"Paul Gasol\" | 38 | | \"Chris Paul\" | 33 | +---------------+--------------+","title":"CONTAINS"},{"location":"3.ngql-guide/8.clauses-and-options/where/#not","text":"\u7528\u6237\u53ef\u4ee5\u7ed3\u5408\u5e03\u5c14\u8fd0\u7b97\u7b26 NOT \u4e00\u8d77\u4f7f\u7528\uff0c\u5426\u5b9a\u5b57\u7b26\u4e32\u5339\u914d\u6761\u4ef6\u3002 nebula> MATCH (v:player) \\ WHERE NOT v.player.name ENDS WITH \"R\" \\ RETURN v.player.name, v.player.age; +-------------------------+--------------+ | v.player.name | v.player.age | +-------------------------+--------------+ | \"Danny Green\" | 31 | | \"Tiago Splitter\" | 34 | | \"David West\" | 38 | | \"Russell Westbrook\" | 30 | ...","title":"\u7ed3\u5408 NOT \u4f7f\u7528"},{"location":"3.ngql-guide/8.clauses-and-options/where/#_7","text":"","title":"\u8fc7\u6ee4\u5217\u8868"},{"location":"3.ngql-guide/8.clauses-and-options/where/#_8","text":"\u4f7f\u7528 IN \u8fd0\u7b97\u7b26\u68c0\u67e5\u67d0\u4e2a\u503c\u662f\u5426\u5728\u6307\u5b9a\u5217\u8868\u4e2d\u3002 nebula> MATCH (v:player) \\ WHERE v.player.age IN range(20,25) \\ RETURN v.player.name, v.player.age; +-------------------------+--------------+ | v.player.name | v.player.age | +-------------------------+--------------+ | \"Ben Simmons\" | 22 | | \"Giannis Antetokounmpo\" | 24 | | \"Kyle Anderson\" | 25 | | \"Joel Embiid\" | 25 | | \"Kristaps Porzingis\" | 23 | | \"Luka Doncic\" | 20 | +-------------------------+--------------+ nebula> LOOKUP ON player \\ WHERE player.age IN [25,28] \\ YIELD properties(vertex).name, properties(vertex).age; +-------------------------+------------------------+ | properties(VERTEX).name | properties(VERTEX).age | +-------------------------+------------------------+ | \"Kyle Anderson\" | 25 | | \"Damian Lillard\" | 28 | | \"Joel Embiid\" | 25 | | \"Paul George\" | 28 | | \"Ricky Rubio\" | 28 | +-------------------------+------------------------+","title":"\u5339\u914d\u5217\u8868\u4e2d\u7684\u503c"},{"location":"3.ngql-guide/8.clauses-and-options/where/#not_1","text":"nebula> MATCH (v:player) \\ WHERE v.player.age NOT IN range(20,25) \\ RETURN v.player.name AS Name, v.player.age AS Age \\ ORDER BY Age; +---------------------+-----+ | Name | Age | +---------------------+-----+ | \"Kyrie Irving\" | 26 | | \"Cory Joseph\" | 27 | | \"Damian Lillard\" | 28 | | \"Paul George\" | 28 | | \"Ricky Rubio\" | 28 | ...","title":"\u7ed3\u5408 NOT \u4f7f\u7528"},{"location":"3.ngql-guide/8.clauses-and-options/with/","text":"WITH \u00b6 WITH \u5b50\u53e5\u53ef\u4ee5\u83b7\u53d6\u5e76\u5904\u7406\u67e5\u8be2\u524d\u534a\u90e8\u5206\u7684\u7ed3\u679c\uff0c\u5e76\u5c06\u5904\u7406\u7ed3\u679c\u4f5c\u4e3a\u8f93\u5165\u4f20\u9012\u7ed9\u67e5\u8be2\u7684\u540e\u534a\u90e8\u5206\u3002 openCypher \u517c\u5bb9\u6027 \u00b6 \u672c\u6587\u64cd\u4f5c\u4ec5\u9002\u7528\u4e8e openCypher \u65b9\u5f0f\u3002 Note \u5728\u539f\u751f nGQL \u4e2d\uff0c\u6709\u4e0e WITH \u7c7b\u4f3c\u7684 \u7ba1\u9053\u7b26 \uff0c\u4f46\u5b83\u4eec\u7684\u5de5\u4f5c\u65b9\u5f0f\u4e0d\u540c\u3002\u4e0d\u8981\u5728 openCypher \u65b9\u5f0f\u4e2d\u4f7f\u7528\u7ba1\u9053\u7b26\uff0c\u4e5f\u4e0d\u8981\u5728\u539f\u751f nGQL \u4e2d\u4f7f\u7528 WITH \u5b50\u53e5\u3002 \u7ec4\u6210\u590d\u5408\u67e5\u8be2 \u00b6 \u4f7f\u7528 WITH \u5b50\u53e5\u53ef\u4ee5\u7ec4\u5408\u8bed\u53e5\uff0c\u5c06\u4e00\u6761\u8bed\u53e5\u7684\u8f93\u51fa\u8f6c\u6362\u4e3a\u53e6\u4e00\u6761\u8bed\u53e5\u7684\u8f93\u5165\u3002 \u793a\u4f8b 1 \u00b6 \u5339\u914d\u4e00\u4e2a\u8def\u5f84\u3002 \u901a\u8fc7 nodes() \u51fd\u6570\u5c06\u8def\u5f84\u4e0a\u7684\u6240\u6709\u70b9\u8f93\u51fa\u5230\u4e00\u4e2a\u5217\u8868\u3002 \u5c06\u5217\u8868\u62c6\u5206\u4e3a\u884c\u3002 \u53bb\u91cd\u540e\u8fd4\u56de\u70b9\u7684\u4fe1\u606f\u3002 nebula> MATCH p=(v:player{name:\"Tim Duncan\"})--() \\ WITH nodes(p) AS n \\ UNWIND n AS n1 \\ RETURN DISTINCT n1; +-----------------------------------------------------------+ | n1 | +-----------------------------------------------------------+ | (\"player100\" :player{age: 42, name: \"Tim Duncan\"}) | | (\"player101\" :player{age: 36, name: \"Tony Parker\"}) | | (\"team204\" :team{name: \"Spurs\"}) | | (\"player102\" :player{age: 33, name: \"LaMarcus Aldridge\"}) | | (\"player125\" :player{age: 41, name: \"Manu Ginobili\"}) | | (\"player104\" :player{age: 32, name: \"Marco Belinelli\"}) | | (\"player144\" :player{age: 47, name: \"Shaquille O'Neal\"}) | | (\"player105\" :player{age: 31, name: \"Danny Green\"}) | | (\"player113\" :player{age: 29, name: \"Dejounte Murray\"}) | | (\"player107\" :player{age: 32, name: \"Aron Baynes\"}) | | (\"player109\" :player{age: 34, name: \"Tiago Splitter\"}) | | (\"player108\" :player{age: 36, name: \"Boris Diaw\"}) | +-----------------------------------------------------------+ \u793a\u4f8b 2 \u00b6 \u5339\u914d\u70b9 ID \u4e3a player100 \u7684\u70b9\u3002 \u901a\u8fc7 labels() \u51fd\u6570\u5c06\u70b9\u7684\u6240\u6709 Tag \u8f93\u51fa\u5230\u4e00\u4e2a\u5217\u8868\u3002 \u5c06\u5217\u8868\u62c6\u5206\u4e3a\u884c\u3002 \u8fd4\u56de\u7ed3\u679c\u3002 nebula> MATCH (v) \\ WHERE id(v)==\"player100\" \\ WITH labels(v) AS tags_unf \\ UNWIND tags_unf AS tags_f \\ RETURN tags_f; +----------+ | tags_f | +----------+ | \"player\" | +----------+ \u8fc7\u6ee4\u805a\u5408\u67e5\u8be2 \u00b6 WITH \u53ef\u4ee5\u5728\u805a\u5408\u67e5\u8be2\u4e2d\u4f5c\u4e3a\u8fc7\u6ee4\u5668\u4f7f\u7528\u3002 nebula> MATCH (v:player)-->(v2:player) \\ WITH DISTINCT v2 AS v2, v2.player.age AS Age \\ ORDER BY Age \\ WHERE Age<25 \\ RETURN v2.player.name AS Name, Age; +----------------------+-----+ | Name | Age | +----------------------+-----+ | \"Luka Doncic\" | 20 | | \"Ben Simmons\" | 22 | | \"Kristaps Porzingis\" | 23 | +----------------------+-----+ collect() \u4e4b\u524d\u5904\u7406\u8f93\u51fa \u00b6 \u5728 collect() \u51fd\u6570\u5c06\u8f93\u51fa\u7ed3\u679c\u8f6c\u6362\u4e3a\u5217\u8868\u4e4b\u524d\uff0c\u53ef\u4ee5\u4f7f\u7528 WITH \u5b50\u53e5\u6392\u5e8f\u548c\u9650\u5236\u8f93\u51fa\u7ed3\u679c\u3002 nebula> MATCH (v:player) \\ WITH v.player.name AS Name \\ ORDER BY Name DESC \\ LIMIT 3 \\ RETURN collect(Name); +-----------------------------------------------+ | collect(Name) | +-----------------------------------------------+ | [\"Yao Ming\", \"Vince Carter\", \"Tracy McGrady\"] | +-----------------------------------------------+ \u7ed3\u5408 RETURN \u8bed\u53e5\u4f7f\u7528 \u00b6 \u5728 WITH \u5b50\u53e5\u4e2d\u8bbe\u7f6e\u522b\u540d\uff0c\u5e76\u901a\u8fc7 RETURN \u5b50\u53e5\u8f93\u51fa\u7ed3\u679c\u3002 nebula> WITH [1, 2, 3] AS `list` RETURN 3 IN `list` AS r; +------+ | r | +------+ | true | +------+ nebula> WITH 4 AS one, 3 AS two RETURN one > two AS result; +--------+ | result | +--------+ | true | +--------+","title":"WITH"},{"location":"3.ngql-guide/8.clauses-and-options/with/#with","text":"WITH \u5b50\u53e5\u53ef\u4ee5\u83b7\u53d6\u5e76\u5904\u7406\u67e5\u8be2\u524d\u534a\u90e8\u5206\u7684\u7ed3\u679c\uff0c\u5e76\u5c06\u5904\u7406\u7ed3\u679c\u4f5c\u4e3a\u8f93\u5165\u4f20\u9012\u7ed9\u67e5\u8be2\u7684\u540e\u534a\u90e8\u5206\u3002","title":"WITH"},{"location":"3.ngql-guide/8.clauses-and-options/with/#opencypher","text":"\u672c\u6587\u64cd\u4f5c\u4ec5\u9002\u7528\u4e8e openCypher \u65b9\u5f0f\u3002 Note \u5728\u539f\u751f nGQL \u4e2d\uff0c\u6709\u4e0e WITH \u7c7b\u4f3c\u7684 \u7ba1\u9053\u7b26 \uff0c\u4f46\u5b83\u4eec\u7684\u5de5\u4f5c\u65b9\u5f0f\u4e0d\u540c\u3002\u4e0d\u8981\u5728 openCypher \u65b9\u5f0f\u4e2d\u4f7f\u7528\u7ba1\u9053\u7b26\uff0c\u4e5f\u4e0d\u8981\u5728\u539f\u751f nGQL \u4e2d\u4f7f\u7528 WITH \u5b50\u53e5\u3002","title":"openCypher \u517c\u5bb9\u6027"},{"location":"3.ngql-guide/8.clauses-and-options/with/#_1","text":"\u4f7f\u7528 WITH \u5b50\u53e5\u53ef\u4ee5\u7ec4\u5408\u8bed\u53e5\uff0c\u5c06\u4e00\u6761\u8bed\u53e5\u7684\u8f93\u51fa\u8f6c\u6362\u4e3a\u53e6\u4e00\u6761\u8bed\u53e5\u7684\u8f93\u5165\u3002","title":"\u7ec4\u6210\u590d\u5408\u67e5\u8be2"},{"location":"3.ngql-guide/8.clauses-and-options/with/#1","text":"\u5339\u914d\u4e00\u4e2a\u8def\u5f84\u3002 \u901a\u8fc7 nodes() \u51fd\u6570\u5c06\u8def\u5f84\u4e0a\u7684\u6240\u6709\u70b9\u8f93\u51fa\u5230\u4e00\u4e2a\u5217\u8868\u3002 \u5c06\u5217\u8868\u62c6\u5206\u4e3a\u884c\u3002 \u53bb\u91cd\u540e\u8fd4\u56de\u70b9\u7684\u4fe1\u606f\u3002 nebula> MATCH p=(v:player{name:\"Tim Duncan\"})--() \\ WITH nodes(p) AS n \\ UNWIND n AS n1 \\ RETURN DISTINCT n1; +-----------------------------------------------------------+ | n1 | +-----------------------------------------------------------+ | (\"player100\" :player{age: 42, name: \"Tim Duncan\"}) | | (\"player101\" :player{age: 36, name: \"Tony Parker\"}) | | (\"team204\" :team{name: \"Spurs\"}) | | (\"player102\" :player{age: 33, name: \"LaMarcus Aldridge\"}) | | (\"player125\" :player{age: 41, name: \"Manu Ginobili\"}) | | (\"player104\" :player{age: 32, name: \"Marco Belinelli\"}) | | (\"player144\" :player{age: 47, name: \"Shaquille O'Neal\"}) | | (\"player105\" :player{age: 31, name: \"Danny Green\"}) | | (\"player113\" :player{age: 29, name: \"Dejounte Murray\"}) | | (\"player107\" :player{age: 32, name: \"Aron Baynes\"}) | | (\"player109\" :player{age: 34, name: \"Tiago Splitter\"}) | | (\"player108\" :player{age: 36, name: \"Boris Diaw\"}) | +-----------------------------------------------------------+","title":"\u793a\u4f8b 1"},{"location":"3.ngql-guide/8.clauses-and-options/with/#2","text":"\u5339\u914d\u70b9 ID \u4e3a player100 \u7684\u70b9\u3002 \u901a\u8fc7 labels() \u51fd\u6570\u5c06\u70b9\u7684\u6240\u6709 Tag \u8f93\u51fa\u5230\u4e00\u4e2a\u5217\u8868\u3002 \u5c06\u5217\u8868\u62c6\u5206\u4e3a\u884c\u3002 \u8fd4\u56de\u7ed3\u679c\u3002 nebula> MATCH (v) \\ WHERE id(v)==\"player100\" \\ WITH labels(v) AS tags_unf \\ UNWIND tags_unf AS tags_f \\ RETURN tags_f; +----------+ | tags_f | +----------+ | \"player\" | +----------+","title":"\u793a\u4f8b 2"},{"location":"3.ngql-guide/8.clauses-and-options/with/#_2","text":"WITH \u53ef\u4ee5\u5728\u805a\u5408\u67e5\u8be2\u4e2d\u4f5c\u4e3a\u8fc7\u6ee4\u5668\u4f7f\u7528\u3002 nebula> MATCH (v:player)-->(v2:player) \\ WITH DISTINCT v2 AS v2, v2.player.age AS Age \\ ORDER BY Age \\ WHERE Age<25 \\ RETURN v2.player.name AS Name, Age; +----------------------+-----+ | Name | Age | +----------------------+-----+ | \"Luka Doncic\" | 20 | | \"Ben Simmons\" | 22 | | \"Kristaps Porzingis\" | 23 | +----------------------+-----+","title":"\u8fc7\u6ee4\u805a\u5408\u67e5\u8be2"},{"location":"3.ngql-guide/8.clauses-and-options/with/#collect","text":"\u5728 collect() \u51fd\u6570\u5c06\u8f93\u51fa\u7ed3\u679c\u8f6c\u6362\u4e3a\u5217\u8868\u4e4b\u524d\uff0c\u53ef\u4ee5\u4f7f\u7528 WITH \u5b50\u53e5\u6392\u5e8f\u548c\u9650\u5236\u8f93\u51fa\u7ed3\u679c\u3002 nebula> MATCH (v:player) \\ WITH v.player.name AS Name \\ ORDER BY Name DESC \\ LIMIT 3 \\ RETURN collect(Name); +-----------------------------------------------+ | collect(Name) | +-----------------------------------------------+ | [\"Yao Ming\", \"Vince Carter\", \"Tracy McGrady\"] | +-----------------------------------------------+","title":"collect() \u4e4b\u524d\u5904\u7406\u8f93\u51fa"},{"location":"3.ngql-guide/8.clauses-and-options/with/#return","text":"\u5728 WITH \u5b50\u53e5\u4e2d\u8bbe\u7f6e\u522b\u540d\uff0c\u5e76\u901a\u8fc7 RETURN \u5b50\u53e5\u8f93\u51fa\u7ed3\u679c\u3002 nebula> WITH [1, 2, 3] AS `list` RETURN 3 IN `list` AS r; +------+ | r | +------+ | true | +------+ nebula> WITH 4 AS one, 3 AS two RETURN one > two AS result; +--------+ | result | +--------+ | true | +--------+","title":"\u7ed3\u5408 RETURN \u8bed\u53e5\u4f7f\u7528"},{"location":"3.ngql-guide/8.clauses-and-options/yield/","text":"YIELD \u00b6 YIELD \u5b9a\u4e49 nGQL \u67e5\u8be2\u7684\u8f93\u51fa\u7ed3\u679c\u3002 YIELD \u53ef\u4ee5\u5f15\u5bfc\u5b50\u53e5\u6216\u8bed\u53e5\uff1a YIELD \u5b50\u53e5\u7528\u4e8e\u539f\u751f nGQL \u8bed\u53e5\u4e2d\uff0c\u4f8b\u5982 GO \u3001 FETCH \u6216 LOOKUP \uff0c\u5fc5\u987b\u901a\u8fc7 YIELD \u5b50\u53e5\u5b9a\u4e49\u8fd4\u56de\u7ed3\u679c\u3002 YIELD \u8bed\u53e5\u53ef\u4ee5\u5728\u72ec\u7acb\u67e5\u8be2\u6216\u590d\u5408\u67e5\u8be2\u4e2d\u4f7f\u7528\u3002 openCypher \u517c\u5bb9\u6027 \u00b6 \u672c\u6587\u64cd\u4f5c\u4ec5\u9002\u7528\u4e8e\u539f\u751f nGQL\u3002\u5173\u4e8e openCypher \u65b9\u5f0f\u5982\u4f55\u5b9a\u4e49\u8f93\u51fa\u7ed3\u679c\uff0c\u8bf7\u53c2\u89c1 RETURN \u3002 YIELD \u5728 nGQL \u548c openCypher \u4e2d\u6709\u4e0d\u540c\u7684\u51fd\u6570\uff1a \u5728 openCypher \u4e2d\uff0c YIELD \u7528\u4e8e\u5728 CALL[\u2026YIELD] \u5b50\u53e5\u4e2d\u6307\u5b9a\u8fc7\u7a0b\u8c03\u7528\u7684\u8f93\u51fa\u3002 Note nGQL \u4e0d\u652f\u6301 CALL[\u2026YIELD] \u3002 \u5728 nGQL \u4e2d\uff0c YIELD \u548c openCypher \u4e2d\u7684 RETURN \u7c7b\u4f3c\u3002 Note \u4e0b\u6587\u793a\u4f8b\u4e2d\u7684 $$ \u3001 $- \u7b49\u662f\u5f15\u7528\u7b26\u53f7\uff0c\u8be6\u60c5\u8bf7\u53c2\u89c1 \u5f15\u7528\u7b26 \u3002 YIELD \u5b50\u53e5 \u00b6 \u8bed\u6cd5 \u00b6 YIELD [DISTINCT] <col> [AS <alias>] [, <col> [AS <alias>] ...]; \u53c2\u6570 \u8bf4\u660e DISTINCT \u805a\u5408\u8f93\u51fa\u7ed3\u679c\uff0c\u8fd4\u56de\u53bb\u91cd\u540e\u7684\u7ed3\u679c\u96c6\u3002 col \u8981\u8fd4\u56de\u7684\u5b57\u6bb5\u3002\u5982\u679c\u6ca1\u6709\u4e3a\u5b57\u6bb5\u8bbe\u7f6e\u522b\u540d\uff0c\u8fd4\u56de\u7ed3\u679c\u4e2d\u7684\u5217\u540d\u4e3a col \u3002 alias col \u7684\u522b\u540d\u3002\u4f7f\u7528\u5173\u952e\u5b57 AS \u8fdb\u884c\u8bbe\u7f6e\uff0c\u8bbe\u7f6e\u540e\u8fd4\u56de\u7ed3\u679c\u4e2d\u7684\u5217\u540d\u4e3a\u8be5\u522b\u540d\u3002 \u4f7f\u7528 YIELD \u5b50\u53e5 \u00b6 GO \u8bed\u53e5\u4e2d\u4f7f\u7528 YIELD \uff1a nebula> GO FROM \"player100\" OVER follow \\ YIELD properties($$).name AS Friend, properties($$).age AS Age; +-----------------+-----+ | Friend | Age | +-----------------+-----+ | \"Tony Parker\" | 36 | | \"Manu Ginobili\" | 41 | +-----------------+-----+ FETCH \u8bed\u53e5\u4e2d\u4f7f\u7528 YIELD \uff1a nebula> FETCH PROP ON player \"player100\" \\ YIELD properties(vertex).name; +-------------------------+ | properties(VERTEX).name | +-------------------------+ | \"Tim Duncan\" | +-------------------------+ LOOKUP \u8bed\u53e5\u4e2d\u4f7f\u7528 YIELD \uff1a nebula> LOOKUP ON player WHERE player.name == \"Tony Parker\" \\ YIELD properties(vertex).name, properties(vertex).age; +-------------------------+------------------------+ | properties(VERTEX).name | properties(VERTEX).age | +-------------------------+------------------------+ | \"Tony Parker\" | 36 | +-------------------------+------------------------+ YIELD \u8bed\u53e5 \u00b6 \u8bed\u6cd5 \u00b6 YIELD [DISTINCT] <col> [AS <alias>] [, <col> [AS <alias>] ...] [WHERE <conditions>]; \u53c2\u6570 \u8bf4\u660e DISTINCT \u805a\u5408\u8f93\u51fa\u7ed3\u679c\uff0c\u8fd4\u56de\u53bb\u91cd\u540e\u7684\u7ed3\u679c\u96c6\u3002 col \u8981\u6309\u8fd4\u56de\u7684\u5b57\u6bb5\u3002\u5982\u679c\u6ca1\u6709\u4e3a\u5b57\u6bb5\u8bbe\u7f6e\u522b\u540d\uff0c\u8fd4\u56de\u7ed3\u679c\u4e2d\u7684\u5217\u540d\u4e3a col \u3002 alias col \u7684\u522b\u540d\u3002\u4f7f\u7528\u5173\u952e\u5b57 AS \u8fdb\u884c\u8bbe\u7f6e\uff0c\u8bbe\u7f6e\u540e\u8fd4\u56de\u7ed3\u679c\u4e2d\u7684\u5217\u540d\u4e3a\u8be5\u522b\u540d\u3002 conditions \u5728 WHERE \u5b50\u53e5\u4e2d\u8bbe\u7f6e\u7684\u8fc7\u6ee4\u6761\u4ef6\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1 WHERE \u3002 \u590d\u5408\u67e5\u8be2\u4e2d\u4f7f\u7528 YIELD \u8bed\u53e5 \u00b6 \u5728 \u590d\u5408\u67e5\u8be2 \u4e2d\uff0c YIELD \u8bed\u53e5\u53ef\u4ee5\u63a5\u6536\u3001\u8fc7\u6ee4\u3001\u4fee\u6539\u4e4b\u524d\u8bed\u53e5\u7684\u7ed3\u679c\u96c6\uff0c\u7136\u540e\u8f93\u51fa\u3002 # \u67e5\u627e player100 \u5173\u6ce8\u7684 player\uff0c\u5e76\u8ba1\u7b97\u4ed6\u4eec\u7684\u5e73\u5747\u5e74\u9f84\u3002 nebula> GO FROM \"player100\" OVER follow \\ YIELD dst(edge) AS ID \\ | FETCH PROP ON player $-.ID \\ YIELD properties(vertex).age AS Age \\ | YIELD AVG($-.Age) as Avg_age, count(*)as Num_friends; +---------+-------------+ | Avg_age | Num_friends | +---------+-------------+ | 38.5 | 2 | +---------+-------------+ # \u67e5\u627e player101 \u5173\u6ce8\u7684 player\uff0c\u8fd4\u56de degree \u5927\u4e8e 90 \u7684 player\u3002 nebula> $var1 = GO FROM \"player101\" OVER follow \\ YIELD properties(edge).degree AS Degree, dst(edge) as ID; \\ YIELD $var1.ID AS ID WHERE $var1.Degree > 90; +-------------+ | ID | +-------------+ | \"player100\" | | \"player125\" | +-------------+ # \u67e5\u627e player \u4e2d\u5e74\u9f84\u5927\u4e8e 30 \u4e14\u5c0f\u4e8e 32 \u7684\u70b9\uff0c\u8fd4\u56de\u53bb\u6389\u91cd\u590d\u5c5e\u6027\u7684\u503c\u3002 nebula> LOOKUP ON player \\ WHERE player.age < 32 and player.age >30 \\ YIELD DISTINCT properties(vertex).age as v; +--------+ | v | +--------+ | 31 | +--------+ \u72ec\u7acb\u4f7f\u7528 YIELD \u8bed\u53e5 \u00b6 YIELD \u53ef\u4ee5\u8ba1\u7b97\u8868\u8fbe\u5f0f\u5e76\u8fd4\u56de\u7ed3\u679c\u3002 nebula> YIELD rand32(1, 6); +-------------+ | rand32(1,6) | +-------------+ | 3 | +-------------+ nebula> YIELD \"Hel\" + \"\\tlo\" AS string1, \", World!\" AS string2; +-------------+------------+ | string1 | string2 | +-------------+------------+ | \"Hel lo\" | \", World!\" | +-------------+------------+ nebula> YIELD hash(\"Tim\") % 100; +-------------------+ | (hash(\"Tim\")%100) | +-------------------+ | 42 | +-------------------+ nebula> YIELD \\ CASE 2+3 \\ WHEN 4 THEN 0 \\ WHEN 5 THEN 1 \\ ELSE -1 \\ END \\ AS result; +--------+ | result | +--------+ | 1 | +--------+ nebula> YIELD 1- -1; +----------+ | (1--(1)) | +----------+ | 2 | +----------+","title":"YIELD"},{"location":"3.ngql-guide/8.clauses-and-options/yield/#yield","text":"YIELD \u5b9a\u4e49 nGQL \u67e5\u8be2\u7684\u8f93\u51fa\u7ed3\u679c\u3002 YIELD \u53ef\u4ee5\u5f15\u5bfc\u5b50\u53e5\u6216\u8bed\u53e5\uff1a YIELD \u5b50\u53e5\u7528\u4e8e\u539f\u751f nGQL \u8bed\u53e5\u4e2d\uff0c\u4f8b\u5982 GO \u3001 FETCH \u6216 LOOKUP \uff0c\u5fc5\u987b\u901a\u8fc7 YIELD \u5b50\u53e5\u5b9a\u4e49\u8fd4\u56de\u7ed3\u679c\u3002 YIELD \u8bed\u53e5\u53ef\u4ee5\u5728\u72ec\u7acb\u67e5\u8be2\u6216\u590d\u5408\u67e5\u8be2\u4e2d\u4f7f\u7528\u3002","title":"YIELD"},{"location":"3.ngql-guide/8.clauses-and-options/yield/#opencypher","text":"\u672c\u6587\u64cd\u4f5c\u4ec5\u9002\u7528\u4e8e\u539f\u751f nGQL\u3002\u5173\u4e8e openCypher \u65b9\u5f0f\u5982\u4f55\u5b9a\u4e49\u8f93\u51fa\u7ed3\u679c\uff0c\u8bf7\u53c2\u89c1 RETURN \u3002 YIELD \u5728 nGQL \u548c openCypher \u4e2d\u6709\u4e0d\u540c\u7684\u51fd\u6570\uff1a \u5728 openCypher \u4e2d\uff0c YIELD \u7528\u4e8e\u5728 CALL[\u2026YIELD] \u5b50\u53e5\u4e2d\u6307\u5b9a\u8fc7\u7a0b\u8c03\u7528\u7684\u8f93\u51fa\u3002 Note nGQL \u4e0d\u652f\u6301 CALL[\u2026YIELD] \u3002 \u5728 nGQL \u4e2d\uff0c YIELD \u548c openCypher \u4e2d\u7684 RETURN \u7c7b\u4f3c\u3002 Note \u4e0b\u6587\u793a\u4f8b\u4e2d\u7684 $$ \u3001 $- \u7b49\u662f\u5f15\u7528\u7b26\u53f7\uff0c\u8be6\u60c5\u8bf7\u53c2\u89c1 \u5f15\u7528\u7b26 \u3002","title":"openCypher \u517c\u5bb9\u6027"},{"location":"3.ngql-guide/8.clauses-and-options/yield/#yield_1","text":"","title":"YIELD \u5b50\u53e5"},{"location":"3.ngql-guide/8.clauses-and-options/yield/#_1","text":"YIELD [DISTINCT] <col> [AS <alias>] [, <col> [AS <alias>] ...]; \u53c2\u6570 \u8bf4\u660e DISTINCT \u805a\u5408\u8f93\u51fa\u7ed3\u679c\uff0c\u8fd4\u56de\u53bb\u91cd\u540e\u7684\u7ed3\u679c\u96c6\u3002 col \u8981\u8fd4\u56de\u7684\u5b57\u6bb5\u3002\u5982\u679c\u6ca1\u6709\u4e3a\u5b57\u6bb5\u8bbe\u7f6e\u522b\u540d\uff0c\u8fd4\u56de\u7ed3\u679c\u4e2d\u7684\u5217\u540d\u4e3a col \u3002 alias col \u7684\u522b\u540d\u3002\u4f7f\u7528\u5173\u952e\u5b57 AS \u8fdb\u884c\u8bbe\u7f6e\uff0c\u8bbe\u7f6e\u540e\u8fd4\u56de\u7ed3\u679c\u4e2d\u7684\u5217\u540d\u4e3a\u8be5\u522b\u540d\u3002","title":"\u8bed\u6cd5"},{"location":"3.ngql-guide/8.clauses-and-options/yield/#yield_2","text":"GO \u8bed\u53e5\u4e2d\u4f7f\u7528 YIELD \uff1a nebula> GO FROM \"player100\" OVER follow \\ YIELD properties($$).name AS Friend, properties($$).age AS Age; +-----------------+-----+ | Friend | Age | +-----------------+-----+ | \"Tony Parker\" | 36 | | \"Manu Ginobili\" | 41 | +-----------------+-----+ FETCH \u8bed\u53e5\u4e2d\u4f7f\u7528 YIELD \uff1a nebula> FETCH PROP ON player \"player100\" \\ YIELD properties(vertex).name; +-------------------------+ | properties(VERTEX).name | +-------------------------+ | \"Tim Duncan\" | +-------------------------+ LOOKUP \u8bed\u53e5\u4e2d\u4f7f\u7528 YIELD \uff1a nebula> LOOKUP ON player WHERE player.name == \"Tony Parker\" \\ YIELD properties(vertex).name, properties(vertex).age; +-------------------------+------------------------+ | properties(VERTEX).name | properties(VERTEX).age | +-------------------------+------------------------+ | \"Tony Parker\" | 36 | +-------------------------+------------------------+","title":"\u4f7f\u7528 YIELD \u5b50\u53e5"},{"location":"3.ngql-guide/8.clauses-and-options/yield/#yield_3","text":"","title":"YIELD \u8bed\u53e5"},{"location":"3.ngql-guide/8.clauses-and-options/yield/#_2","text":"YIELD [DISTINCT] <col> [AS <alias>] [, <col> [AS <alias>] ...] [WHERE <conditions>]; \u53c2\u6570 \u8bf4\u660e DISTINCT \u805a\u5408\u8f93\u51fa\u7ed3\u679c\uff0c\u8fd4\u56de\u53bb\u91cd\u540e\u7684\u7ed3\u679c\u96c6\u3002 col \u8981\u6309\u8fd4\u56de\u7684\u5b57\u6bb5\u3002\u5982\u679c\u6ca1\u6709\u4e3a\u5b57\u6bb5\u8bbe\u7f6e\u522b\u540d\uff0c\u8fd4\u56de\u7ed3\u679c\u4e2d\u7684\u5217\u540d\u4e3a col \u3002 alias col \u7684\u522b\u540d\u3002\u4f7f\u7528\u5173\u952e\u5b57 AS \u8fdb\u884c\u8bbe\u7f6e\uff0c\u8bbe\u7f6e\u540e\u8fd4\u56de\u7ed3\u679c\u4e2d\u7684\u5217\u540d\u4e3a\u8be5\u522b\u540d\u3002 conditions \u5728 WHERE \u5b50\u53e5\u4e2d\u8bbe\u7f6e\u7684\u8fc7\u6ee4\u6761\u4ef6\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1 WHERE \u3002","title":"\u8bed\u6cd5"},{"location":"3.ngql-guide/8.clauses-and-options/yield/#yield_4","text":"\u5728 \u590d\u5408\u67e5\u8be2 \u4e2d\uff0c YIELD \u8bed\u53e5\u53ef\u4ee5\u63a5\u6536\u3001\u8fc7\u6ee4\u3001\u4fee\u6539\u4e4b\u524d\u8bed\u53e5\u7684\u7ed3\u679c\u96c6\uff0c\u7136\u540e\u8f93\u51fa\u3002 # \u67e5\u627e player100 \u5173\u6ce8\u7684 player\uff0c\u5e76\u8ba1\u7b97\u4ed6\u4eec\u7684\u5e73\u5747\u5e74\u9f84\u3002 nebula> GO FROM \"player100\" OVER follow \\ YIELD dst(edge) AS ID \\ | FETCH PROP ON player $-.ID \\ YIELD properties(vertex).age AS Age \\ | YIELD AVG($-.Age) as Avg_age, count(*)as Num_friends; +---------+-------------+ | Avg_age | Num_friends | +---------+-------------+ | 38.5 | 2 | +---------+-------------+ # \u67e5\u627e player101 \u5173\u6ce8\u7684 player\uff0c\u8fd4\u56de degree \u5927\u4e8e 90 \u7684 player\u3002 nebula> $var1 = GO FROM \"player101\" OVER follow \\ YIELD properties(edge).degree AS Degree, dst(edge) as ID; \\ YIELD $var1.ID AS ID WHERE $var1.Degree > 90; +-------------+ | ID | +-------------+ | \"player100\" | | \"player125\" | +-------------+ # \u67e5\u627e player \u4e2d\u5e74\u9f84\u5927\u4e8e 30 \u4e14\u5c0f\u4e8e 32 \u7684\u70b9\uff0c\u8fd4\u56de\u53bb\u6389\u91cd\u590d\u5c5e\u6027\u7684\u503c\u3002 nebula> LOOKUP ON player \\ WHERE player.age < 32 and player.age >30 \\ YIELD DISTINCT properties(vertex).age as v; +--------+ | v | +--------+ | 31 | +--------+","title":"\u590d\u5408\u67e5\u8be2\u4e2d\u4f7f\u7528 YIELD \u8bed\u53e5"},{"location":"3.ngql-guide/8.clauses-and-options/yield/#yield_5","text":"YIELD \u53ef\u4ee5\u8ba1\u7b97\u8868\u8fbe\u5f0f\u5e76\u8fd4\u56de\u7ed3\u679c\u3002 nebula> YIELD rand32(1, 6); +-------------+ | rand32(1,6) | +-------------+ | 3 | +-------------+ nebula> YIELD \"Hel\" + \"\\tlo\" AS string1, \", World!\" AS string2; +-------------+------------+ | string1 | string2 | +-------------+------------+ | \"Hel lo\" | \", World!\" | +-------------+------------+ nebula> YIELD hash(\"Tim\") % 100; +-------------------+ | (hash(\"Tim\")%100) | +-------------------+ | 42 | +-------------------+ nebula> YIELD \\ CASE 2+3 \\ WHEN 4 THEN 0 \\ WHEN 5 THEN 1 \\ ELSE -1 \\ END \\ AS result; +--------+ | result | +--------+ | 1 | +--------+ nebula> YIELD 1- -1; +----------+ | (1--(1)) | +----------+ | 2 | +----------+","title":"\u72ec\u7acb\u4f7f\u7528 YIELD \u8bed\u53e5"},{"location":"3.ngql-guide/9.space-statements/1.create-space/","text":"CREATE SPACE \u00b6 \u56fe\u7a7a\u95f4\u662fNebulaGraph\u4e2d\u5f7c\u6b64\u9694\u79bb\u7684\u56fe\u6570\u636e\u96c6\u5408\uff0c\u4e0e MySQL \u4e2d\u7684 database \u6982\u5ff5\u7c7b\u4f3c\u3002 CREATE SPACE \u8bed\u53e5\u53ef\u4ee5\u521b\u5efa\u4e00\u4e2a\u65b0\u7684\u56fe\u7a7a\u95f4\uff0c\u6216\u8005\u514b\u9686\u73b0\u6709\u56fe\u7a7a\u95f4\u7684 Schema\u3002 \u524d\u63d0\u6761\u4ef6 \u00b6 \u53ea\u6709 God \u89d2\u8272\u7684\u7528\u6237\u53ef\u4ee5\u6267\u884c CREATE SPACE \u8bed\u53e5\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1 \u8eab\u4efd\u9a8c\u8bc1 \u3002 \u8bed\u6cd5 \u00b6 \u521b\u5efa\u56fe\u7a7a\u95f4 \u00b6 CREATE SPACE [IF NOT EXISTS] <graph_space_name> ( [partition_num = <partition_number>,] [replica_factor = <replica_number>,] vid_type = {FIXED_STRING(<N>) | INT[64]} ) [COMMENT = '<comment>']; \u53c2\u6570 \u8bf4\u660e IF NOT EXISTS \u68c0\u6d4b\u5f85\u521b\u5efa\u7684\u56fe\u7a7a\u95f4\u662f\u5426\u5b58\u5728\uff0c\u53ea\u6709\u4e0d\u5b58\u5728\u65f6\uff0c\u624d\u4f1a\u521b\u5efa\u56fe\u7a7a\u95f4\u3002\u4ec5\u68c0\u6d4b\u56fe\u7a7a\u95f4\u7684\u540d\u79f0\uff0c\u4e0d\u4f1a\u68c0\u6d4b\u5177\u4f53\u5c5e\u6027\u3002 <graph_space_name> 1\u3001\u5728NebulaGraph\u5b9e\u4f8b\u4e2d\u552f\u4e00\u6807\u8bc6\u4e00\u4e2a\u56fe\u7a7a\u95f4\u3002 2\u3001\u56fe\u7a7a\u95f4\u540d\u79f0\u8bbe\u7f6e\u540e\u65e0\u6cd5\u88ab\u4fee\u6539\u3002 3\u3001\u4e0d\u80fd\u4ee5\u6570\u5b57\u5f00\u5934\uff1b\u652f\u6301 1~4 \u5b57\u8282\u7684 UTF-8 \u7f16\u7801\u5b57\u7b26\uff0c\u5305\u62ec\u82f1\u6587\u5b57\u6bcd\uff08\u533a\u5206\u5927\u5c0f\u5199\uff09\u3001\u6570\u5b57\u3001\u4e2d\u6587\u7b49\uff0c\u4f46\u662f\u4e0d\u5305\u62ec\u9664\u4e0b\u5212\u7ebf\u5916\u7684\u7279\u6b8a\u5b57\u7b26\uff1b\u4f7f\u7528\u7279\u6b8a\u5b57\u7b26\u3001\u4fdd\u7559\u5173\u952e\u5b57\u6216\u6570\u5b57\u5f00\u5934\u65f6\uff0c\u9700\u8981\u7528\u53cd\u5f15\u53f7\uff08`\uff09\u5305\u56f4\u4e14\u4e0d\u80fd\u4f7f\u7528\u82f1\u6587\u53e5\u53f7\uff08 . \uff09\u3002\u8be6\u60c5\u53c2\u89c1 \u5173\u952e\u5b57\u548c\u4fdd\u7559\u5b57 \u3002 \u6ce8\u610f \uff1a\u5982\u679c\u4ee5\u4e2d\u6587\u4e3a\u56fe\u7a7a\u95f4\u547d\u540d\uff0c\u62a5 SyntaxError \u9519\u8bef\u65f6\uff0c\u9700\u4f7f\u7528\u53cd\u5f15\u53f7\uff08`\uff09\u5305\u56f4\u4e2d\u6587\u5b57\u7b26\u3002 partition_num \u6307\u5b9a\u56fe\u7a7a\u95f4\u7684\u5206\u7247\u6570\u91cf\u3002\u5efa\u8bae\u8bbe\u7f6e\u4e3a\u96c6\u7fa4\u4e2d\u786c\u76d8\u6570\u91cf\u7684 20 \u500d\uff08HDD \u786c\u76d8\u5efa\u8bae\u4e3a 2 \u500d\uff09\u3002\u4f8b\u5982\u96c6\u7fa4\u4e2d\u6709 3 \u4e2a\u786c\u76d8\uff0c\u5efa\u8bae\u8bbe\u7f6e 60 \u4e2a\u5206\u7247\u3002\u9ed8\u8ba4\u503c\u4e3a 10\u3002 replica_factor \u6307\u5b9a\u6bcf\u4e2a\u5206\u7247\u7684\u526f\u672c\u6570\u91cf\u3002\u5efa\u8bae\u5728\u751f\u4ea7\u73af\u5883\u4e2d\u8bbe\u7f6e\u4e3a 3\uff0c\u5728\u6d4b\u8bd5\u73af\u5883\u4e2d\u8bbe\u7f6e\u4e3a 1\u3002\u7531\u4e8e\u9700\u8981\u57fa\u4e8e\u591a\u6570\u8868\u51b3\uff0c\u526f\u672c\u6570\u91cf\u5fc5\u987b\u662f \u5947\u6570 \u3002\u9ed8\u8ba4\u503c\u4e3a 1\u3002 vid_type \u5fc5\u9009\u53c2\u6570\u3002\u6307\u5b9a\u70b9 ID \u7684\u6570\u636e\u7c7b\u578b\u3002\u53ef\u9009\u503c\u4e3a FIXED_STRING(<N>) \u548c INT64 \u3002 INT \u7b49\u540c\u4e8e INT64 \u3002 FIXED_STRING(<N>) \u8868\u793a\u6570\u636e\u7c7b\u578b\u4e3a\u5b9a\u957f\u5b57\u7b26\u4e32\uff0c\u957f\u5ea6\u4e3a N \u5b57\u8282\uff0c\u8d85\u51fa\u957f\u5ea6\u4f1a\u62a5\u9519\u3002\u4f8b\u5982\uff0cUTF-8\u4e2d\uff0c\u4e00\u4e2a\u4e2d\u6587\u5b57\u7b26\u7684\u957f\u5ea6\u4e3a\u4e09\u4e2a\u5b57\u8282\uff0c\u5982\u679c\u8bbe\u7f6e N \u4e3a 12\uff0c\u90a3\u4e48 vid_type \u4e3a\u6700\u591a 4 \u4e2a\u4e2d\u6587\u5b57\u7b26\u3002 INT64 \u8868\u793a\u6570\u636e\u7c7b\u578b\u4e3a\u6574\u6570\u3002 COMMENT \u56fe\u7a7a\u95f4\u7684\u63cf\u8ff0\u3002\u6700\u5927\u4e3a 256 \u5b57\u8282\u3002\u9ed8\u8ba4\u65e0\u63cf\u8ff0\u3002 Caution \u5982\u679c\u5c06\u526f\u672c\u6570\u8bbe\u7f6e\u4e3a 1\uff0c\u7528\u6237\u5c06\u65e0\u6cd5\u4f7f\u7528 SUBMIT JOB BALANCE \u547d\u4ee4\u4e3aNebulaGraph\u7684\u5b58\u50a8\u670d\u52a1\u5e73\u8861\u8d1f\u8f7d\u6216\u6269\u5bb9\u3002 VID \u7c7b\u578b\u53d8\u66f4\u4e0e\u957f\u5ea6\u9650\u5236\uff1a \u5728NebulaGraph 1.x \u4e2d\uff0cVID \u7684\u7c7b\u578b\u53ea\u80fd\u4e3a INT64 \uff0c\u4e0d\u652f\u6301\u5b57\u7b26\u578b\uff1b\u5728NebulaGraph 2.x \u4e2d\uff0cVID \u7684\u7c7b\u578b\u652f\u6301 INT64 \u548c FIXED_STRING(<N>) \u3002\u8bf7\u5728\u521b\u5efa\u56fe\u7a7a\u95f4\u65f6\u6307\u5b9a VID \u7c7b\u578b\uff0c\u4f7f\u7528 INSERT \u8bed\u53e5\u65f6\u4e5f\u9700\u8981\u4fdd\u6301\u4e00\u81f4\uff0c\u5426\u5219\u4f1a\u62a5\u9519 VID \u7c7b\u578b\u4e0d\u5339\u914d Wrong vertex id type: 1001 \u3002 VID \u6700\u5927\u957f\u5ea6\u5fc5\u987b\u4e3a N \uff0c\u4e0d\u53ef\u4efb\u610f\u957f\u5ea6\uff1b\u8d85\u8fc7\u8be5\u957f\u5ea6\u4e5f\u4f1a\u62a5\u9519 The VID must be a 64-bit integer or a string fitting space vertex id length limit. \u3002 \u5982\u679c\u51fa\u73b0 Host not enough! \u7684\u62a5\u9519\uff0c\u76f4\u63a5\u539f\u56e0\u662f\u7ebf\u4e0a Storage Host \u7684\u6570\u91cf\u5c11\u4e8e\u5373\u5c06\u521b\u5efa\u7684\u56fe\u7a7a\u95f4\u7684 replica_factor \u7684\u6570\u91cf\u3002\u6b64\u65f6\uff0c\u53ef\u7528 SHOW HOSTS \u6307\u4ee4\u67e5\u770b\u5224\u65ad\uff0c\u51fa\u73b0\u7684\u60c5\u51b5\u6709\uff1a \u5728\u96c6\u7fa4\u662f\u5355 Storage Host \u7684\u60c5\u51b5\u4e0b\u8bd5\u56fe\u521b\u5efa\u591a\u526f\u672c\uff08replica_factor\uff09\u56fe\u7a7a\u95f4\uff0c\u8fd9\u65f6\u5019\u53ea\u80fd\u9009\u62e9\u521b\u5efa\u5355\u526f\u672c\u6570\u7684\u56fe\u7a7a\u95f4\uff0c\u6216\u8005\u6269\u5bb9 Storage Host \u4e4b\u540e\u518d\u521b\u5efa\u56fe\u7a7a\u95f4\u3002 \u65b0\u521b\u5efa\u7684\u96c6\u7fa4\u91cc Storage Host \u5df2\u7ecf\u88ab\u670d\u52a1\u53d1\u73b0\uff0c\u4f46\u662f\u5c1a\u672a\u6267\u884c ADD HOSTS \u5c06\u5176\u6fc0\u6d3b\uff0c\u8fd9\u65f6\u5019\u9700\u8981\u901a\u8fc7 Console \u8fde\u63a5\uff0c\u6267\u884c SHOW HOSTS \u83b7\u53d6\u88ab\u53d1\u73b0\u4e86\u7684 Storage Host\uff0c\u7136\u540e\u6267\u884c\u76f8\u5e94\u7684 ADD HOSTS \u6fc0\u6d3b\uff0c\u5f85\u6709\u8db3\u591f\u7684 Online Storage Host \u4e4b\u540e\u518d\u5c1d\u8bd5\u521b\u5efa\u56fe\u7a7a\u95f4\u3002 \u6709\u90e8\u5206 Storage Host \u5904\u5728\u975e Online \u72b6\u6001\uff0c\u9700\u8981\u8fdb\u884c\u8fdb\u4e00\u6b65\u6392\u67e5\u3002 \u5386\u53f2\u7248\u672c\u517c\u5bb9\u6027 2.5.0 \u4e4b\u524d\u7684 2.x \u7248\u672c\u4e2d\uff0c vid_type \u4e0d\u662f\u5fc5\u9009\u53c2\u6570\uff0c\u9ed8\u8ba4\u4e3a FIXED_STRING(8) \u3002 Note graph_space_name , partition_num , replica_factor , vid_type , comment \u8bbe\u7f6e\u540e\u5c31\u65e0\u6cd5\u6539\u53d8\u3002\u9664\u975e DROP SPACE \uff0c\u5e76\u91cd\u65b0 CREATE SPACE \u3002 \u514b\u9686\u56fe\u7a7a\u95f4 \u00b6 CREATE SPACE [IF NOT EXISTS] <new_graph_space_name> AS <old_graph_space_name>; \u53c2\u6570 \u8bf4\u660e IF NOT EXISTS \u68c0\u6d4b\u5f85\u521b\u5efa\u7684\u56fe\u7a7a\u95f4\u662f\u5426\u5b58\u5728\uff0c\u53ea\u6709\u4e0d\u5b58\u5728\u65f6\uff0c\u624d\u4f1a\u514b\u9686\u56fe\u7a7a\u95f4\u3002\u4ec5\u68c0\u6d4b\u56fe\u7a7a\u95f4\u7684\u540d\u79f0\uff0c\u4e0d\u4f1a\u68c0\u6d4b\u5177\u4f53\u5c5e\u6027\u3002 <new_graph_space_name> \u76ee\u6807\u56fe\u7a7a\u95f4\u540d\u79f0\u3002\u8be5\u56fe\u7a7a\u95f4\u5fc5\u987b\u672a\u521b\u5efa\u3002\u56fe\u7a7a\u95f4\u540d\u79f0\u4ee5\u82f1\u6587\u5b57\u6bcd\u5f00\u5934\uff0c\u652f\u6301 1~4 \u5b57\u8282\u7684 UTF-8 \u7f16\u7801\u5b57\u7b26\uff0c\u5305\u62ec\u82f1\u6587\u5b57\u6bcd\uff08\u533a\u5206\u5927\u5c0f\u5199\uff09\u3001\u6570\u5b57\u3001\u4e2d\u6587\u7b49\uff0c\u4f46\u662f\u4e0d\u5305\u62ec\u9664\u4e0b\u5212\u7ebf\u5916\u7684\u7279\u6b8a\u5b57\u7b26\u3002\u4f7f\u7528\u4fdd\u7559\u5173\u952e\u5b57\u65f6\uff0c\u9700\u8981\u7528\u53cd\u5f15\u53f7\uff08`\uff09\u5305\u56f4\uff0c\u8be6\u60c5\u53c2\u89c1 \u5173\u952e\u5b57\u548c\u4fdd\u7559\u5b57 \u3002\u521b\u5efa\u65f6\u4f1a\u514b\u9686 <old_graph_space_name> \u56fe\u7a7a\u95f4\u7684 Schema\uff0c\u5305\u62ec\u56fe\u7a7a\u95f4\u672c\u8eab\u53c2\u6570\uff08\u5206\u7247\u6570\u91cf\u3001\u526f\u672c\u6570\u91cf\u7b49\uff09\u3001Tag\u3001Edge type \u548c \u539f\u751f\u7d22\u5f15\u3002 <old_graph_space_name> \u539f\u59cb\u56fe\u7a7a\u95f4\u540d\u79f0\u3002\u8be5\u56fe\u7a7a\u95f4\u5fc5\u987b\u5df2\u5b58\u5728\u3002 \u793a\u4f8b \u00b6 # \u4ec5\u6307\u5b9a VID \u7c7b\u578b\uff0c\u5176\u4ed6\u9009\u9879\u4f7f\u7528\u9ed8\u8ba4\u503c\u3002 nebula> CREATE SPACE IF NOT EXISTS my_space_1 (vid_type=FIXED_STRING(30)); # \u6307\u5b9a\u5206\u7247\u6570\u91cf\u3001\u526f\u672c\u6570\u91cf\u548c VID \u7c7b\u578b\u3002 nebula> CREATE SPACE IF NOT EXISTS my_space_2 (partition_num=15, replica_factor=1, vid_type=FIXED_STRING(30)); # \u6307\u5b9a\u5206\u7247\u6570\u91cf\u3001\u526f\u672c\u6570\u91cf\u548c VID \u7c7b\u578b\uff0c\u5e76\u6dfb\u52a0\u63cf\u8ff0\u3002 nebula> CREATE SPACE IF NOT EXISTS my_space_3 (partition_num=15, replica_factor=1, vid_type=FIXED_STRING(30)) comment=\"\u6d4b\u8bd5\u56fe\u7a7a\u95f4\"; # \u514b\u9686\u56fe\u7a7a\u95f4\u3002 nebula> CREATE SPACE IF NOT EXISTS my_space_4 as my_space_3; nebula> SHOW CREATE SPACE my_space_4; +--------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------+ | Space | Create Space | +--------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------+ | \"my_space_4\" | \"CREATE SPACE `my_space_4` (partition_num = 15, replica_factor = 1, charset = utf8, collate = utf8_bin, vid_type = FIXED_STRING(30)) comment = '\u6d4b\u8bd5\u56fe\u7a7a\u95f4'\" | +--------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------+ Caution \u7acb\u523b\u5c1d\u8bd5\u4f7f\u7528\u521a\u521b\u5efa\u7684\u56fe\u7a7a\u95f4\u53ef\u80fd\u4f1a\u5931\u8d25\u3002\u56e0\u4e3a\u521b\u5efa\u662f\u5f02\u6b65\u5b9e\u73b0\u7684\u3002\u4e3a\u786e\u4fdd\u6570\u636e\u540c\u6b65\uff0c\u540e\u7eed\u64cd\u4f5c\u80fd\u987a\u5229\u8fdb\u884c\uff0c\u8bf7\u7b49\u5f85 2 \u4e2a\u5fc3\u8df3\u5468\u671f\uff0820 \u79d2\uff09\u3002\u5982\u679c\u9700\u8981\u4fee\u6539\u5fc3\u8df3\u95f4\u9694\uff0c\u8bf7\u4e3a \u6240\u6709\u914d\u7f6e\u6587\u4ef6 \u4fee\u6539\u53c2\u6570 heartbeat_interval_secs \u3002\u4f46\u8fc7\u77ed\u7684\u5fc3\u8df3\u5468\u671f\uff08<5 \u79d2\uff09\u53ef\u80fd\u4f1a\u5bfc\u81f4\u5206\u5e03\u5f0f\u7cfb\u7edf\u4e2d\u7684\u673a\u5668\u8bef\u5224\u5bf9\u7aef\u5931\u8054\u3002 \u68c0\u67e5\u5206\u7247\u5206\u5e03\u60c5\u51b5 \u00b6 \u5728\u5927\u578b\u96c6\u7fa4\u4e2d\uff0c\u7531\u4e8e\u542f\u52a8\u65f6\u95f4\u4e0d\u540c\uff0c\u5206\u7247\u7684\u5206\u5e03\u53ef\u80fd\u4e0d\u5747\u8861\u3002\u7528\u6237\u53ef\u4ee5\u6267\u884c\u5982\u4e0b\u547d\u4ee4\u68c0\u67e5\u5206\u7247\u7684\u5206\u5e03\u60c5\u51b5\uff1a nebula> SHOW HOSTS; +-------------+------+----------+--------------+--------------------------------+--------------------------------+---------+ | Host | Port | Status | Leader count | Leader distribution | Partition distribution | Version | +-------------+------+----------+--------------+--------------------------------+--------------------------------+---------+ | \"storaged0\" | 9779 | \"ONLINE\" | 8 | \"basketballplayer:3, test:5\" | \"basketballplayer:10, test:10\" | \"3.6.0\" | | \"storaged1\" | 9779 | \"ONLINE\" | 9 | \"basketballplayer:4, test:5\" | \"basketballplayer:10, test:10\" | \"3.6.0\" | | \"storaged2\" | 9779 | \"ONLINE\" | 3 | \"basketballplayer:3\" | \"basketballplayer:10, test:10\" | \"3.6.0\" | +-------------+------+----------+--------------+--------------------------------+--------------------------------+---------+ \u5982\u679c\u9700\u8981\u5747\u8861\u8d1f\u8f7d\uff0c\u8bf7\u6267\u884c\u5982\u4e0b\u547d\u4ee4\uff1a nebula> BALANCE LEADER; nebula> SHOW HOSTS; +-------------+------+----------+--------------+--------------------------------+--------------------------------+---------+ | Host | Port | Status | Leader count | Leader distribution | Partition distribution | Version | +-------------+------+----------+--------------+--------------------------------+--------------------------------+---------+ | \"storaged0\" | 9779 | \"ONLINE\" | 7 | \"basketballplayer:3, test:4\" | \"basketballplayer:10, test:10\" | \"3.6.0\" | | \"storaged1\" | 9779 | \"ONLINE\" | 7 | \"basketballplayer:4, test:3\" | \"basketballplayer:10, test:10\" | \"3.6.0\" | | \"storaged2\" | 9779 | \"ONLINE\" | 6 | \"basketballplayer:3, test:3\" | \"basketballplayer:10, test:10\" | \"3.6.0\" | +-------------+------+----------+--------------+--------------------------------+--------------------------------+---------+","title":"CREATE SPACE"},{"location":"3.ngql-guide/9.space-statements/1.create-space/#create_space","text":"\u56fe\u7a7a\u95f4\u662fNebulaGraph\u4e2d\u5f7c\u6b64\u9694\u79bb\u7684\u56fe\u6570\u636e\u96c6\u5408\uff0c\u4e0e MySQL \u4e2d\u7684 database \u6982\u5ff5\u7c7b\u4f3c\u3002 CREATE SPACE \u8bed\u53e5\u53ef\u4ee5\u521b\u5efa\u4e00\u4e2a\u65b0\u7684\u56fe\u7a7a\u95f4\uff0c\u6216\u8005\u514b\u9686\u73b0\u6709\u56fe\u7a7a\u95f4\u7684 Schema\u3002","title":"CREATE SPACE"},{"location":"3.ngql-guide/9.space-statements/1.create-space/#_1","text":"\u53ea\u6709 God \u89d2\u8272\u7684\u7528\u6237\u53ef\u4ee5\u6267\u884c CREATE SPACE \u8bed\u53e5\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1 \u8eab\u4efd\u9a8c\u8bc1 \u3002","title":"\u524d\u63d0\u6761\u4ef6"},{"location":"3.ngql-guide/9.space-statements/1.create-space/#_2","text":"","title":"\u8bed\u6cd5"},{"location":"3.ngql-guide/9.space-statements/1.create-space/#_3","text":"CREATE SPACE [IF NOT EXISTS] <graph_space_name> ( [partition_num = <partition_number>,] [replica_factor = <replica_number>,] vid_type = {FIXED_STRING(<N>) | INT[64]} ) [COMMENT = '<comment>']; \u53c2\u6570 \u8bf4\u660e IF NOT EXISTS \u68c0\u6d4b\u5f85\u521b\u5efa\u7684\u56fe\u7a7a\u95f4\u662f\u5426\u5b58\u5728\uff0c\u53ea\u6709\u4e0d\u5b58\u5728\u65f6\uff0c\u624d\u4f1a\u521b\u5efa\u56fe\u7a7a\u95f4\u3002\u4ec5\u68c0\u6d4b\u56fe\u7a7a\u95f4\u7684\u540d\u79f0\uff0c\u4e0d\u4f1a\u68c0\u6d4b\u5177\u4f53\u5c5e\u6027\u3002 <graph_space_name> 1\u3001\u5728NebulaGraph\u5b9e\u4f8b\u4e2d\u552f\u4e00\u6807\u8bc6\u4e00\u4e2a\u56fe\u7a7a\u95f4\u3002 2\u3001\u56fe\u7a7a\u95f4\u540d\u79f0\u8bbe\u7f6e\u540e\u65e0\u6cd5\u88ab\u4fee\u6539\u3002 3\u3001\u4e0d\u80fd\u4ee5\u6570\u5b57\u5f00\u5934\uff1b\u652f\u6301 1~4 \u5b57\u8282\u7684 UTF-8 \u7f16\u7801\u5b57\u7b26\uff0c\u5305\u62ec\u82f1\u6587\u5b57\u6bcd\uff08\u533a\u5206\u5927\u5c0f\u5199\uff09\u3001\u6570\u5b57\u3001\u4e2d\u6587\u7b49\uff0c\u4f46\u662f\u4e0d\u5305\u62ec\u9664\u4e0b\u5212\u7ebf\u5916\u7684\u7279\u6b8a\u5b57\u7b26\uff1b\u4f7f\u7528\u7279\u6b8a\u5b57\u7b26\u3001\u4fdd\u7559\u5173\u952e\u5b57\u6216\u6570\u5b57\u5f00\u5934\u65f6\uff0c\u9700\u8981\u7528\u53cd\u5f15\u53f7\uff08`\uff09\u5305\u56f4\u4e14\u4e0d\u80fd\u4f7f\u7528\u82f1\u6587\u53e5\u53f7\uff08 . \uff09\u3002\u8be6\u60c5\u53c2\u89c1 \u5173\u952e\u5b57\u548c\u4fdd\u7559\u5b57 \u3002 \u6ce8\u610f \uff1a\u5982\u679c\u4ee5\u4e2d\u6587\u4e3a\u56fe\u7a7a\u95f4\u547d\u540d\uff0c\u62a5 SyntaxError \u9519\u8bef\u65f6\uff0c\u9700\u4f7f\u7528\u53cd\u5f15\u53f7\uff08`\uff09\u5305\u56f4\u4e2d\u6587\u5b57\u7b26\u3002 partition_num \u6307\u5b9a\u56fe\u7a7a\u95f4\u7684\u5206\u7247\u6570\u91cf\u3002\u5efa\u8bae\u8bbe\u7f6e\u4e3a\u96c6\u7fa4\u4e2d\u786c\u76d8\u6570\u91cf\u7684 20 \u500d\uff08HDD \u786c\u76d8\u5efa\u8bae\u4e3a 2 \u500d\uff09\u3002\u4f8b\u5982\u96c6\u7fa4\u4e2d\u6709 3 \u4e2a\u786c\u76d8\uff0c\u5efa\u8bae\u8bbe\u7f6e 60 \u4e2a\u5206\u7247\u3002\u9ed8\u8ba4\u503c\u4e3a 10\u3002 replica_factor \u6307\u5b9a\u6bcf\u4e2a\u5206\u7247\u7684\u526f\u672c\u6570\u91cf\u3002\u5efa\u8bae\u5728\u751f\u4ea7\u73af\u5883\u4e2d\u8bbe\u7f6e\u4e3a 3\uff0c\u5728\u6d4b\u8bd5\u73af\u5883\u4e2d\u8bbe\u7f6e\u4e3a 1\u3002\u7531\u4e8e\u9700\u8981\u57fa\u4e8e\u591a\u6570\u8868\u51b3\uff0c\u526f\u672c\u6570\u91cf\u5fc5\u987b\u662f \u5947\u6570 \u3002\u9ed8\u8ba4\u503c\u4e3a 1\u3002 vid_type \u5fc5\u9009\u53c2\u6570\u3002\u6307\u5b9a\u70b9 ID \u7684\u6570\u636e\u7c7b\u578b\u3002\u53ef\u9009\u503c\u4e3a FIXED_STRING(<N>) \u548c INT64 \u3002 INT \u7b49\u540c\u4e8e INT64 \u3002 FIXED_STRING(<N>) \u8868\u793a\u6570\u636e\u7c7b\u578b\u4e3a\u5b9a\u957f\u5b57\u7b26\u4e32\uff0c\u957f\u5ea6\u4e3a N \u5b57\u8282\uff0c\u8d85\u51fa\u957f\u5ea6\u4f1a\u62a5\u9519\u3002\u4f8b\u5982\uff0cUTF-8\u4e2d\uff0c\u4e00\u4e2a\u4e2d\u6587\u5b57\u7b26\u7684\u957f\u5ea6\u4e3a\u4e09\u4e2a\u5b57\u8282\uff0c\u5982\u679c\u8bbe\u7f6e N \u4e3a 12\uff0c\u90a3\u4e48 vid_type \u4e3a\u6700\u591a 4 \u4e2a\u4e2d\u6587\u5b57\u7b26\u3002 INT64 \u8868\u793a\u6570\u636e\u7c7b\u578b\u4e3a\u6574\u6570\u3002 COMMENT \u56fe\u7a7a\u95f4\u7684\u63cf\u8ff0\u3002\u6700\u5927\u4e3a 256 \u5b57\u8282\u3002\u9ed8\u8ba4\u65e0\u63cf\u8ff0\u3002 Caution \u5982\u679c\u5c06\u526f\u672c\u6570\u8bbe\u7f6e\u4e3a 1\uff0c\u7528\u6237\u5c06\u65e0\u6cd5\u4f7f\u7528 SUBMIT JOB BALANCE \u547d\u4ee4\u4e3aNebulaGraph\u7684\u5b58\u50a8\u670d\u52a1\u5e73\u8861\u8d1f\u8f7d\u6216\u6269\u5bb9\u3002 VID \u7c7b\u578b\u53d8\u66f4\u4e0e\u957f\u5ea6\u9650\u5236\uff1a \u5728NebulaGraph 1.x \u4e2d\uff0cVID \u7684\u7c7b\u578b\u53ea\u80fd\u4e3a INT64 \uff0c\u4e0d\u652f\u6301\u5b57\u7b26\u578b\uff1b\u5728NebulaGraph 2.x \u4e2d\uff0cVID \u7684\u7c7b\u578b\u652f\u6301 INT64 \u548c FIXED_STRING(<N>) \u3002\u8bf7\u5728\u521b\u5efa\u56fe\u7a7a\u95f4\u65f6\u6307\u5b9a VID \u7c7b\u578b\uff0c\u4f7f\u7528 INSERT \u8bed\u53e5\u65f6\u4e5f\u9700\u8981\u4fdd\u6301\u4e00\u81f4\uff0c\u5426\u5219\u4f1a\u62a5\u9519 VID \u7c7b\u578b\u4e0d\u5339\u914d Wrong vertex id type: 1001 \u3002 VID \u6700\u5927\u957f\u5ea6\u5fc5\u987b\u4e3a N \uff0c\u4e0d\u53ef\u4efb\u610f\u957f\u5ea6\uff1b\u8d85\u8fc7\u8be5\u957f\u5ea6\u4e5f\u4f1a\u62a5\u9519 The VID must be a 64-bit integer or a string fitting space vertex id length limit. \u3002 \u5982\u679c\u51fa\u73b0 Host not enough! \u7684\u62a5\u9519\uff0c\u76f4\u63a5\u539f\u56e0\u662f\u7ebf\u4e0a Storage Host \u7684\u6570\u91cf\u5c11\u4e8e\u5373\u5c06\u521b\u5efa\u7684\u56fe\u7a7a\u95f4\u7684 replica_factor \u7684\u6570\u91cf\u3002\u6b64\u65f6\uff0c\u53ef\u7528 SHOW HOSTS \u6307\u4ee4\u67e5\u770b\u5224\u65ad\uff0c\u51fa\u73b0\u7684\u60c5\u51b5\u6709\uff1a \u5728\u96c6\u7fa4\u662f\u5355 Storage Host \u7684\u60c5\u51b5\u4e0b\u8bd5\u56fe\u521b\u5efa\u591a\u526f\u672c\uff08replica_factor\uff09\u56fe\u7a7a\u95f4\uff0c\u8fd9\u65f6\u5019\u53ea\u80fd\u9009\u62e9\u521b\u5efa\u5355\u526f\u672c\u6570\u7684\u56fe\u7a7a\u95f4\uff0c\u6216\u8005\u6269\u5bb9 Storage Host \u4e4b\u540e\u518d\u521b\u5efa\u56fe\u7a7a\u95f4\u3002 \u65b0\u521b\u5efa\u7684\u96c6\u7fa4\u91cc Storage Host \u5df2\u7ecf\u88ab\u670d\u52a1\u53d1\u73b0\uff0c\u4f46\u662f\u5c1a\u672a\u6267\u884c ADD HOSTS \u5c06\u5176\u6fc0\u6d3b\uff0c\u8fd9\u65f6\u5019\u9700\u8981\u901a\u8fc7 Console \u8fde\u63a5\uff0c\u6267\u884c SHOW HOSTS \u83b7\u53d6\u88ab\u53d1\u73b0\u4e86\u7684 Storage Host\uff0c\u7136\u540e\u6267\u884c\u76f8\u5e94\u7684 ADD HOSTS \u6fc0\u6d3b\uff0c\u5f85\u6709\u8db3\u591f\u7684 Online Storage Host \u4e4b\u540e\u518d\u5c1d\u8bd5\u521b\u5efa\u56fe\u7a7a\u95f4\u3002 \u6709\u90e8\u5206 Storage Host \u5904\u5728\u975e Online \u72b6\u6001\uff0c\u9700\u8981\u8fdb\u884c\u8fdb\u4e00\u6b65\u6392\u67e5\u3002 \u5386\u53f2\u7248\u672c\u517c\u5bb9\u6027 2.5.0 \u4e4b\u524d\u7684 2.x \u7248\u672c\u4e2d\uff0c vid_type \u4e0d\u662f\u5fc5\u9009\u53c2\u6570\uff0c\u9ed8\u8ba4\u4e3a FIXED_STRING(8) \u3002 Note graph_space_name , partition_num , replica_factor , vid_type , comment \u8bbe\u7f6e\u540e\u5c31\u65e0\u6cd5\u6539\u53d8\u3002\u9664\u975e DROP SPACE \uff0c\u5e76\u91cd\u65b0 CREATE SPACE \u3002","title":"\u521b\u5efa\u56fe\u7a7a\u95f4"},{"location":"3.ngql-guide/9.space-statements/1.create-space/#_4","text":"CREATE SPACE [IF NOT EXISTS] <new_graph_space_name> AS <old_graph_space_name>; \u53c2\u6570 \u8bf4\u660e IF NOT EXISTS \u68c0\u6d4b\u5f85\u521b\u5efa\u7684\u56fe\u7a7a\u95f4\u662f\u5426\u5b58\u5728\uff0c\u53ea\u6709\u4e0d\u5b58\u5728\u65f6\uff0c\u624d\u4f1a\u514b\u9686\u56fe\u7a7a\u95f4\u3002\u4ec5\u68c0\u6d4b\u56fe\u7a7a\u95f4\u7684\u540d\u79f0\uff0c\u4e0d\u4f1a\u68c0\u6d4b\u5177\u4f53\u5c5e\u6027\u3002 <new_graph_space_name> \u76ee\u6807\u56fe\u7a7a\u95f4\u540d\u79f0\u3002\u8be5\u56fe\u7a7a\u95f4\u5fc5\u987b\u672a\u521b\u5efa\u3002\u56fe\u7a7a\u95f4\u540d\u79f0\u4ee5\u82f1\u6587\u5b57\u6bcd\u5f00\u5934\uff0c\u652f\u6301 1~4 \u5b57\u8282\u7684 UTF-8 \u7f16\u7801\u5b57\u7b26\uff0c\u5305\u62ec\u82f1\u6587\u5b57\u6bcd\uff08\u533a\u5206\u5927\u5c0f\u5199\uff09\u3001\u6570\u5b57\u3001\u4e2d\u6587\u7b49\uff0c\u4f46\u662f\u4e0d\u5305\u62ec\u9664\u4e0b\u5212\u7ebf\u5916\u7684\u7279\u6b8a\u5b57\u7b26\u3002\u4f7f\u7528\u4fdd\u7559\u5173\u952e\u5b57\u65f6\uff0c\u9700\u8981\u7528\u53cd\u5f15\u53f7\uff08`\uff09\u5305\u56f4\uff0c\u8be6\u60c5\u53c2\u89c1 \u5173\u952e\u5b57\u548c\u4fdd\u7559\u5b57 \u3002\u521b\u5efa\u65f6\u4f1a\u514b\u9686 <old_graph_space_name> \u56fe\u7a7a\u95f4\u7684 Schema\uff0c\u5305\u62ec\u56fe\u7a7a\u95f4\u672c\u8eab\u53c2\u6570\uff08\u5206\u7247\u6570\u91cf\u3001\u526f\u672c\u6570\u91cf\u7b49\uff09\u3001Tag\u3001Edge type \u548c \u539f\u751f\u7d22\u5f15\u3002 <old_graph_space_name> \u539f\u59cb\u56fe\u7a7a\u95f4\u540d\u79f0\u3002\u8be5\u56fe\u7a7a\u95f4\u5fc5\u987b\u5df2\u5b58\u5728\u3002","title":"\u514b\u9686\u56fe\u7a7a\u95f4"},{"location":"3.ngql-guide/9.space-statements/1.create-space/#_5","text":"# \u4ec5\u6307\u5b9a VID \u7c7b\u578b\uff0c\u5176\u4ed6\u9009\u9879\u4f7f\u7528\u9ed8\u8ba4\u503c\u3002 nebula> CREATE SPACE IF NOT EXISTS my_space_1 (vid_type=FIXED_STRING(30)); # \u6307\u5b9a\u5206\u7247\u6570\u91cf\u3001\u526f\u672c\u6570\u91cf\u548c VID \u7c7b\u578b\u3002 nebula> CREATE SPACE IF NOT EXISTS my_space_2 (partition_num=15, replica_factor=1, vid_type=FIXED_STRING(30)); # \u6307\u5b9a\u5206\u7247\u6570\u91cf\u3001\u526f\u672c\u6570\u91cf\u548c VID \u7c7b\u578b\uff0c\u5e76\u6dfb\u52a0\u63cf\u8ff0\u3002 nebula> CREATE SPACE IF NOT EXISTS my_space_3 (partition_num=15, replica_factor=1, vid_type=FIXED_STRING(30)) comment=\"\u6d4b\u8bd5\u56fe\u7a7a\u95f4\"; # \u514b\u9686\u56fe\u7a7a\u95f4\u3002 nebula> CREATE SPACE IF NOT EXISTS my_space_4 as my_space_3; nebula> SHOW CREATE SPACE my_space_4; +--------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------+ | Space | Create Space | +--------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------+ | \"my_space_4\" | \"CREATE SPACE `my_space_4` (partition_num = 15, replica_factor = 1, charset = utf8, collate = utf8_bin, vid_type = FIXED_STRING(30)) comment = '\u6d4b\u8bd5\u56fe\u7a7a\u95f4'\" | +--------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------+ Caution \u7acb\u523b\u5c1d\u8bd5\u4f7f\u7528\u521a\u521b\u5efa\u7684\u56fe\u7a7a\u95f4\u53ef\u80fd\u4f1a\u5931\u8d25\u3002\u56e0\u4e3a\u521b\u5efa\u662f\u5f02\u6b65\u5b9e\u73b0\u7684\u3002\u4e3a\u786e\u4fdd\u6570\u636e\u540c\u6b65\uff0c\u540e\u7eed\u64cd\u4f5c\u80fd\u987a\u5229\u8fdb\u884c\uff0c\u8bf7\u7b49\u5f85 2 \u4e2a\u5fc3\u8df3\u5468\u671f\uff0820 \u79d2\uff09\u3002\u5982\u679c\u9700\u8981\u4fee\u6539\u5fc3\u8df3\u95f4\u9694\uff0c\u8bf7\u4e3a \u6240\u6709\u914d\u7f6e\u6587\u4ef6 \u4fee\u6539\u53c2\u6570 heartbeat_interval_secs \u3002\u4f46\u8fc7\u77ed\u7684\u5fc3\u8df3\u5468\u671f\uff08<5 \u79d2\uff09\u53ef\u80fd\u4f1a\u5bfc\u81f4\u5206\u5e03\u5f0f\u7cfb\u7edf\u4e2d\u7684\u673a\u5668\u8bef\u5224\u5bf9\u7aef\u5931\u8054\u3002","title":"\u793a\u4f8b"},{"location":"3.ngql-guide/9.space-statements/1.create-space/#_6","text":"\u5728\u5927\u578b\u96c6\u7fa4\u4e2d\uff0c\u7531\u4e8e\u542f\u52a8\u65f6\u95f4\u4e0d\u540c\uff0c\u5206\u7247\u7684\u5206\u5e03\u53ef\u80fd\u4e0d\u5747\u8861\u3002\u7528\u6237\u53ef\u4ee5\u6267\u884c\u5982\u4e0b\u547d\u4ee4\u68c0\u67e5\u5206\u7247\u7684\u5206\u5e03\u60c5\u51b5\uff1a nebula> SHOW HOSTS; +-------------+------+----------+--------------+--------------------------------+--------------------------------+---------+ | Host | Port | Status | Leader count | Leader distribution | Partition distribution | Version | +-------------+------+----------+--------------+--------------------------------+--------------------------------+---------+ | \"storaged0\" | 9779 | \"ONLINE\" | 8 | \"basketballplayer:3, test:5\" | \"basketballplayer:10, test:10\" | \"3.6.0\" | | \"storaged1\" | 9779 | \"ONLINE\" | 9 | \"basketballplayer:4, test:5\" | \"basketballplayer:10, test:10\" | \"3.6.0\" | | \"storaged2\" | 9779 | \"ONLINE\" | 3 | \"basketballplayer:3\" | \"basketballplayer:10, test:10\" | \"3.6.0\" | +-------------+------+----------+--------------+--------------------------------+--------------------------------+---------+ \u5982\u679c\u9700\u8981\u5747\u8861\u8d1f\u8f7d\uff0c\u8bf7\u6267\u884c\u5982\u4e0b\u547d\u4ee4\uff1a nebula> BALANCE LEADER; nebula> SHOW HOSTS; +-------------+------+----------+--------------+--------------------------------+--------------------------------+---------+ | Host | Port | Status | Leader count | Leader distribution | Partition distribution | Version | +-------------+------+----------+--------------+--------------------------------+--------------------------------+---------+ | \"storaged0\" | 9779 | \"ONLINE\" | 7 | \"basketballplayer:3, test:4\" | \"basketballplayer:10, test:10\" | \"3.6.0\" | | \"storaged1\" | 9779 | \"ONLINE\" | 7 | \"basketballplayer:4, test:3\" | \"basketballplayer:10, test:10\" | \"3.6.0\" | | \"storaged2\" | 9779 | \"ONLINE\" | 6 | \"basketballplayer:3, test:3\" | \"basketballplayer:10, test:10\" | \"3.6.0\" | +-------------+------+----------+--------------+--------------------------------+--------------------------------+---------+","title":"\u68c0\u67e5\u5206\u7247\u5206\u5e03\u60c5\u51b5"},{"location":"3.ngql-guide/9.space-statements/2.use-space/","text":"USE \u00b6 USE \u8bed\u53e5\u53ef\u4ee5\u6307\u5b9a\u4e00\u4e2a\u56fe\u7a7a\u95f4\uff0c\u6216\u5207\u6362\u5230\u53e6\u4e00\u4e2a\u56fe\u7a7a\u95f4\uff0c\u5c06\u5176\u4f5c\u4e3a\u540e\u7eed\u67e5\u8be2\u7684\u5de5\u4f5c\u7a7a\u95f4\u3002 \u524d\u63d0\u6761\u4ef6 \u00b6 \u6267\u884c USE \u8bed\u53e5\u6307\u5b9a\u56fe\u7a7a\u95f4\u65f6\uff0c\u9700\u8981\u5f53\u524d\u767b\u5f55\u7684\u7528\u6237\u62e5\u6709\u6307\u5b9a\u56fe\u7a7a\u95f4\u7684 \u6743\u9650 \uff0c\u5426\u5219\u4f1a\u62a5\u9519\u3002 \u8bed\u6cd5 \u00b6 USE <graph_space_name>; \u793a\u4f8b \u00b6 # \u521b\u5efa\u793a\u4f8b\u7a7a\u95f4\u3002 nebula> CREATE SPACE IF NOT EXISTS space1 (vid_type=FIXED_STRING(30)); nebula> CREATE SPACE IF NOT EXISTS space2 (vid_type=FIXED_STRING(30)); # \u6307\u5b9a\u56fe\u7a7a\u95f4 space1 \u4f5c\u4e3a\u5de5\u4f5c\u7a7a\u95f4\u3002 nebula> USE space1; # \u5207\u6362\u5230\u56fe\u7a7a\u95f4 space2\u3002\u68c0\u7d22 space2 \u65f6\uff0c\u65e0\u6cd5\u4ece space1 \u8bfb\u53d6\u4efb\u4f55\u6570\u636e\uff0c\u68c0\u7d22\u7684\u70b9\u548c\u8fb9\u4e0e space1 \u65e0\u5173\u3002 nebula> USE space2; Caution \u4e0d\u80fd\u5728\u4e00\u6761\u8bed\u53e5\u4e2d\u540c\u65f6\u64cd\u4f5c\u4e24\u4e2a\u56fe\u7a7a\u95f4\u3002 \u4e0e Fabric Cypher \u4e0d\u540c\uff0cNebulaGraph\u7684\u56fe\u7a7a\u95f4\u5f7c\u6b64\u4e4b\u95f4\u662f\u5b8c\u5168\u9694\u79bb\u7684\uff0c\u5c06\u4e00\u4e2a\u56fe\u7a7a\u95f4\u4f5c\u4e3a\u5de5\u4f5c\u7a7a\u95f4\u540e\uff0c\u7528\u6237\u65e0\u6cd5\u8bbf\u95ee\u5176\u4ed6\u7a7a\u95f4\u3002\u4f7f\u7528\u65b0\u56fe\u7a7a\u95f4\u7684\u552f\u4e00\u65b9\u6cd5\u662f\u901a\u8fc7 USE \u8bed\u53e5\u5207\u6362\u3002\u800c\u5728 Fabric Cypher \u4e2d\u53ef\u4ee5\u5728\u4e00\u6761\u8bed\u53e5\u4e2d ( USE + CALL \u8bed\u6cd5\uff09\u4f7f\u7528\u4e24\u4e2a\u56fe\u7a7a\u95f4\u3002","title":"USE SPACE"},{"location":"3.ngql-guide/9.space-statements/2.use-space/#use","text":"USE \u8bed\u53e5\u53ef\u4ee5\u6307\u5b9a\u4e00\u4e2a\u56fe\u7a7a\u95f4\uff0c\u6216\u5207\u6362\u5230\u53e6\u4e00\u4e2a\u56fe\u7a7a\u95f4\uff0c\u5c06\u5176\u4f5c\u4e3a\u540e\u7eed\u67e5\u8be2\u7684\u5de5\u4f5c\u7a7a\u95f4\u3002","title":"USE"},{"location":"3.ngql-guide/9.space-statements/2.use-space/#_1","text":"\u6267\u884c USE \u8bed\u53e5\u6307\u5b9a\u56fe\u7a7a\u95f4\u65f6\uff0c\u9700\u8981\u5f53\u524d\u767b\u5f55\u7684\u7528\u6237\u62e5\u6709\u6307\u5b9a\u56fe\u7a7a\u95f4\u7684 \u6743\u9650 \uff0c\u5426\u5219\u4f1a\u62a5\u9519\u3002","title":"\u524d\u63d0\u6761\u4ef6"},{"location":"3.ngql-guide/9.space-statements/2.use-space/#_2","text":"USE <graph_space_name>;","title":"\u8bed\u6cd5"},{"location":"3.ngql-guide/9.space-statements/2.use-space/#_3","text":"# \u521b\u5efa\u793a\u4f8b\u7a7a\u95f4\u3002 nebula> CREATE SPACE IF NOT EXISTS space1 (vid_type=FIXED_STRING(30)); nebula> CREATE SPACE IF NOT EXISTS space2 (vid_type=FIXED_STRING(30)); # \u6307\u5b9a\u56fe\u7a7a\u95f4 space1 \u4f5c\u4e3a\u5de5\u4f5c\u7a7a\u95f4\u3002 nebula> USE space1; # \u5207\u6362\u5230\u56fe\u7a7a\u95f4 space2\u3002\u68c0\u7d22 space2 \u65f6\uff0c\u65e0\u6cd5\u4ece space1 \u8bfb\u53d6\u4efb\u4f55\u6570\u636e\uff0c\u68c0\u7d22\u7684\u70b9\u548c\u8fb9\u4e0e space1 \u65e0\u5173\u3002 nebula> USE space2; Caution \u4e0d\u80fd\u5728\u4e00\u6761\u8bed\u53e5\u4e2d\u540c\u65f6\u64cd\u4f5c\u4e24\u4e2a\u56fe\u7a7a\u95f4\u3002 \u4e0e Fabric Cypher \u4e0d\u540c\uff0cNebulaGraph\u7684\u56fe\u7a7a\u95f4\u5f7c\u6b64\u4e4b\u95f4\u662f\u5b8c\u5168\u9694\u79bb\u7684\uff0c\u5c06\u4e00\u4e2a\u56fe\u7a7a\u95f4\u4f5c\u4e3a\u5de5\u4f5c\u7a7a\u95f4\u540e\uff0c\u7528\u6237\u65e0\u6cd5\u8bbf\u95ee\u5176\u4ed6\u7a7a\u95f4\u3002\u4f7f\u7528\u65b0\u56fe\u7a7a\u95f4\u7684\u552f\u4e00\u65b9\u6cd5\u662f\u901a\u8fc7 USE \u8bed\u53e5\u5207\u6362\u3002\u800c\u5728 Fabric Cypher \u4e2d\u53ef\u4ee5\u5728\u4e00\u6761\u8bed\u53e5\u4e2d ( USE + CALL \u8bed\u6cd5\uff09\u4f7f\u7528\u4e24\u4e2a\u56fe\u7a7a\u95f4\u3002","title":"\u793a\u4f8b"},{"location":"3.ngql-guide/9.space-statements/3.show-spaces/","text":"SHOW SPACES \u00b6 SHOW SPACES \u8bed\u53e5\u53ef\u4ee5\u5217\u51faNebulaGraph\u793a\u4f8b\u4e2d\u7684\u6240\u6709\u56fe\u7a7a\u95f4\u3002 \u8bed\u6cd5 \u00b6 SHOW SPACES; \u793a\u4f8b \u00b6 nebula> SHOW SPACES; +--------------------+ | Name | +--------------------+ | \"cba\" | | \"basketballplayer\" | +--------------------+ \u521b\u5efa\u56fe\u7a7a\u95f4\u8bf7\u53c2\u89c1 CREATE SPACE \u3002","title":"SHOW SPACES"},{"location":"3.ngql-guide/9.space-statements/3.show-spaces/#show_spaces","text":"SHOW SPACES \u8bed\u53e5\u53ef\u4ee5\u5217\u51faNebulaGraph\u793a\u4f8b\u4e2d\u7684\u6240\u6709\u56fe\u7a7a\u95f4\u3002","title":"SHOW SPACES"},{"location":"3.ngql-guide/9.space-statements/3.show-spaces/#_1","text":"SHOW SPACES;","title":"\u8bed\u6cd5"},{"location":"3.ngql-guide/9.space-statements/3.show-spaces/#_2","text":"nebula> SHOW SPACES; +--------------------+ | Name | +--------------------+ | \"cba\" | | \"basketballplayer\" | +--------------------+ \u521b\u5efa\u56fe\u7a7a\u95f4\u8bf7\u53c2\u89c1 CREATE SPACE \u3002","title":"\u793a\u4f8b"},{"location":"3.ngql-guide/9.space-statements/4.describe-space/","text":"DESCRIBE SPACE \u00b6 DESCRIBE SPACE \u8bed\u53e5\u53ef\u4ee5\u663e\u793a\u6307\u5b9a\u56fe\u7a7a\u95f4\u7684\u4fe1\u606f\u3002 \u8bed\u6cd5 \u00b6 \u4f60\u53ef\u4ee5\u7528 DESC \u4f5c\u4e3a DESCRIBE \u7684\u7f29\u5199\u3002 DESC[RIBE] SPACE <graph_space_name>; \u793a\u4f8b \u00b6 nebula> DESCRIBE SPACE basketballplayer; +----+--------------------+------------------+----------------+---------+------------+--------------------+---------+ | ID | Name | Partition Number | Replica Factor | Charset | Collate | Vid Type | Comment | +----+--------------------+------------------+----------------+---------+------------+--------------------+---------+ | 1 | \"basketballplayer\" | 10 | 1 | \"utf8\" | \"utf8_bin\" | \"FIXED_STRING(32)\" | | +----+--------------------+------------------+----------------+---------+------------+--------------------+---------+","title":"DESCRIBE SPACE"},{"location":"3.ngql-guide/9.space-statements/4.describe-space/#describe_space","text":"DESCRIBE SPACE \u8bed\u53e5\u53ef\u4ee5\u663e\u793a\u6307\u5b9a\u56fe\u7a7a\u95f4\u7684\u4fe1\u606f\u3002","title":"DESCRIBE SPACE"},{"location":"3.ngql-guide/9.space-statements/4.describe-space/#_1","text":"\u4f60\u53ef\u4ee5\u7528 DESC \u4f5c\u4e3a DESCRIBE \u7684\u7f29\u5199\u3002 DESC[RIBE] SPACE <graph_space_name>;","title":"\u8bed\u6cd5"},{"location":"3.ngql-guide/9.space-statements/4.describe-space/#_2","text":"nebula> DESCRIBE SPACE basketballplayer; +----+--------------------+------------------+----------------+---------+------------+--------------------+---------+ | ID | Name | Partition Number | Replica Factor | Charset | Collate | Vid Type | Comment | +----+--------------------+------------------+----------------+---------+------------+--------------------+---------+ | 1 | \"basketballplayer\" | 10 | 1 | \"utf8\" | \"utf8_bin\" | \"FIXED_STRING(32)\" | | +----+--------------------+------------------+----------------+---------+------------+--------------------+---------+","title":"\u793a\u4f8b"},{"location":"3.ngql-guide/9.space-statements/5.drop-space/","text":"DROP SPACE \u00b6 DROP SPACE \u8bed\u53e5\u7528\u4e8e\u5220\u9664\u6307\u5b9a\u56fe\u7a7a\u95f4\u4ee5\u53ca\u5176\u4e2d\u7684\u6240\u6709\u4fe1\u606f\u3002 Note DROP SPACE \u662f\u5426\u5220\u9664\u56fe\u7a7a\u95f4\u5bf9\u5e94\u7684\u786c\u76d8\u6570\u636e\u7531 Storage \u914d\u7f6e\u53c2\u6570 auto_remove_invalid_space \u51b3\u5b9a\u3002 auto_remove_invalid_space \u7684\u9ed8\u8ba4\u503c\u4e3a true \uff0c\u8868\u793a\u4f1a\u5220\u9664\u6570\u636e\u3002\u5982\u9700\u5728\u5220\u9664\u903b\u8f91\u56fe\u7a7a\u95f4\u65f6\u4fdd\u7559\u786c\u76d8\u6570\u636e\uff0c\u5c06 auto_remove_invalid_space \u7684\u503c\u4fee\u6539\u4e3a false \u3002\u8be6\u60c5\u53c2\u89c1 Storage \u670d\u52a1\u914d\u7f6e \u3002 Warning \u6267\u884c DROP SPACE \u540e\uff0c\u5373\u4f7f\u5feb\u7167\u4e2d\u5b58\u5728\u8be5\u56fe\u7a7a\u95f4\u7684\u6570\u636e\uff0c\u8be5\u56fe\u7a7a\u95f4\u7684\u6570\u636e\u4e5f\u65e0\u6cd5\u6062\u590d\u3002\u4f46\u662f\u5982\u679c auto_remove_invalid_space \u7684\u503c\u4e3a false \u65f6\uff0c\u53ef\u8054\u7cfb\u5546\u52a1\u4eba\u5458\u6062\u590d\u6570\u636e\u3002 \u524d\u63d0\u6761\u4ef6 \u00b6 \u53ea\u6709 God \u89d2\u8272\u7684\u7528\u6237\u53ef\u4ee5\u6267\u884c DROP SPACE \u8bed\u53e5\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1 \u8eab\u4efd\u9a8c\u8bc1 \u3002 \u8bed\u6cd5 \u00b6 DROP SPACE [IF EXISTS] <graph_space_name>; IF EXISTS \u5173\u952e\u5b57\u53ef\u4ee5\u68c0\u6d4b\u5f85\u5220\u9664\u7684\u56fe\u7a7a\u95f4\u662f\u5426\u5b58\u5728\uff0c\u53ea\u6709\u5b58\u5728\u65f6\uff0c\u624d\u4f1a\u5220\u9664\u56fe\u7a7a\u95f4\u3002 \u5386\u53f2\u7248\u672c\u517c\u5bb9\u6027 \u5728NebulaGraph 3.1.0 \u7248\u672c\u524d\uff0c DROP SPACE \u8bed\u53e5\u4e0d\u4f1a\u5220\u9664\u786c\u76d8\u4e0a\u5bf9\u5e94\u56fe\u7a7a\u95f4\u7684\u76ee\u5f55\u548c\u6587\u4ef6\u3002 Caution \u8bf7 \u8c28\u614e \u6267\u884c\u5220\u9664\u56fe\u7a7a\u95f4\u64cd\u4f5c\u3002 FAQ \u00b6 \u95ee\uff1a\u6267\u884c DROP SPACE \u8bed\u53e5\u5220\u9664\u56fe\u7a7a\u95f4\u540e\uff0c\u4e3a\u4ec0\u4e48\u78c1\u76d8\u7684\u5927\u5c0f\u6ca1\u53d8\u5316\uff1f \u7b54\uff1a\u5982\u679c\u4f7f\u7528 3.1.0 \u4e4b\u524d\u7248\u672c\u7684NebulaGraph, DROP SPACE \u8bed\u53e5\u4ec5\u5220\u9664\u6307\u5b9a\u7684\u903b\u8f91\u56fe\u7a7a\u95f4\uff0c\u4e0d\u4f1a\u5220\u9664\u786c\u76d8\u4e0a\u5bf9\u5e94\u56fe\u7a7a\u95f4\u7684\u76ee\u5f55\u548c\u6587\u4ef6\u3002\u5982\u9700\u5220\u9664\u786c\u76d8\u4e0a\u7684\u6570\u636e\uff0c\u9700\u624b\u52a8\u5220\u9664\u76f8\u5e94\u6587\u4ef6\u7684\u8def\u5f84\uff0c\u6587\u4ef6\u8def\u5f84\u4e3a <nebula_graph_install_path>/data/storage/nebula/<space_id> \u3002\u5176\u4e2d <space_id> \u53ef\u4ee5\u901a\u8fc7 DESCRIBE SPACE {space_name} \u67e5\u770b\u3002","title":"DROP SPACE"},{"location":"3.ngql-guide/9.space-statements/5.drop-space/#drop_space","text":"DROP SPACE \u8bed\u53e5\u7528\u4e8e\u5220\u9664\u6307\u5b9a\u56fe\u7a7a\u95f4\u4ee5\u53ca\u5176\u4e2d\u7684\u6240\u6709\u4fe1\u606f\u3002 Note DROP SPACE \u662f\u5426\u5220\u9664\u56fe\u7a7a\u95f4\u5bf9\u5e94\u7684\u786c\u76d8\u6570\u636e\u7531 Storage \u914d\u7f6e\u53c2\u6570 auto_remove_invalid_space \u51b3\u5b9a\u3002 auto_remove_invalid_space \u7684\u9ed8\u8ba4\u503c\u4e3a true \uff0c\u8868\u793a\u4f1a\u5220\u9664\u6570\u636e\u3002\u5982\u9700\u5728\u5220\u9664\u903b\u8f91\u56fe\u7a7a\u95f4\u65f6\u4fdd\u7559\u786c\u76d8\u6570\u636e\uff0c\u5c06 auto_remove_invalid_space \u7684\u503c\u4fee\u6539\u4e3a false \u3002\u8be6\u60c5\u53c2\u89c1 Storage \u670d\u52a1\u914d\u7f6e \u3002 Warning \u6267\u884c DROP SPACE \u540e\uff0c\u5373\u4f7f\u5feb\u7167\u4e2d\u5b58\u5728\u8be5\u56fe\u7a7a\u95f4\u7684\u6570\u636e\uff0c\u8be5\u56fe\u7a7a\u95f4\u7684\u6570\u636e\u4e5f\u65e0\u6cd5\u6062\u590d\u3002\u4f46\u662f\u5982\u679c auto_remove_invalid_space \u7684\u503c\u4e3a false \u65f6\uff0c\u53ef\u8054\u7cfb\u5546\u52a1\u4eba\u5458\u6062\u590d\u6570\u636e\u3002","title":"DROP SPACE"},{"location":"3.ngql-guide/9.space-statements/5.drop-space/#_1","text":"\u53ea\u6709 God \u89d2\u8272\u7684\u7528\u6237\u53ef\u4ee5\u6267\u884c DROP SPACE \u8bed\u53e5\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1 \u8eab\u4efd\u9a8c\u8bc1 \u3002","title":"\u524d\u63d0\u6761\u4ef6"},{"location":"3.ngql-guide/9.space-statements/5.drop-space/#_2","text":"DROP SPACE [IF EXISTS] <graph_space_name>; IF EXISTS \u5173\u952e\u5b57\u53ef\u4ee5\u68c0\u6d4b\u5f85\u5220\u9664\u7684\u56fe\u7a7a\u95f4\u662f\u5426\u5b58\u5728\uff0c\u53ea\u6709\u5b58\u5728\u65f6\uff0c\u624d\u4f1a\u5220\u9664\u56fe\u7a7a\u95f4\u3002 \u5386\u53f2\u7248\u672c\u517c\u5bb9\u6027 \u5728NebulaGraph 3.1.0 \u7248\u672c\u524d\uff0c DROP SPACE \u8bed\u53e5\u4e0d\u4f1a\u5220\u9664\u786c\u76d8\u4e0a\u5bf9\u5e94\u56fe\u7a7a\u95f4\u7684\u76ee\u5f55\u548c\u6587\u4ef6\u3002 Caution \u8bf7 \u8c28\u614e \u6267\u884c\u5220\u9664\u56fe\u7a7a\u95f4\u64cd\u4f5c\u3002","title":"\u8bed\u6cd5"},{"location":"3.ngql-guide/9.space-statements/5.drop-space/#faq","text":"\u95ee\uff1a\u6267\u884c DROP SPACE \u8bed\u53e5\u5220\u9664\u56fe\u7a7a\u95f4\u540e\uff0c\u4e3a\u4ec0\u4e48\u78c1\u76d8\u7684\u5927\u5c0f\u6ca1\u53d8\u5316\uff1f \u7b54\uff1a\u5982\u679c\u4f7f\u7528 3.1.0 \u4e4b\u524d\u7248\u672c\u7684NebulaGraph, DROP SPACE \u8bed\u53e5\u4ec5\u5220\u9664\u6307\u5b9a\u7684\u903b\u8f91\u56fe\u7a7a\u95f4\uff0c\u4e0d\u4f1a\u5220\u9664\u786c\u76d8\u4e0a\u5bf9\u5e94\u56fe\u7a7a\u95f4\u7684\u76ee\u5f55\u548c\u6587\u4ef6\u3002\u5982\u9700\u5220\u9664\u786c\u76d8\u4e0a\u7684\u6570\u636e\uff0c\u9700\u624b\u52a8\u5220\u9664\u76f8\u5e94\u6587\u4ef6\u7684\u8def\u5f84\uff0c\u6587\u4ef6\u8def\u5f84\u4e3a <nebula_graph_install_path>/data/storage/nebula/<space_id> \u3002\u5176\u4e2d <space_id> \u53ef\u4ee5\u901a\u8fc7 DESCRIBE SPACE {space_name} \u67e5\u770b\u3002","title":"FAQ"},{"location":"3.ngql-guide/9.space-statements/6.clear-space/","text":"CLEAR SPACE \u00b6 CLEAR SPACE \u8bed\u53e5\u7528\u4e8e\u6e05\u7a7a\u56fe\u7a7a\u95f4\u4e2d\u7684\u70b9\u548c\u8fb9\uff0c\u4f46\u4e0d\u4f1a\u5220\u9664\u56fe\u7a7a\u95f4\u672c\u8eab\u4ee5\u53ca\u5176\u4e2d\u7684 Schema \u4fe1\u606f\u3002 Note \u5efa\u8bae\u5728\u6267\u884c CLEAR SPACE \u64cd\u4f5c\u4e4b\u540e\uff0c\u7acb\u5373\u6267\u884c SUBMIT JOB COMPACT \u64cd\u4f5c\u4ee5\u63d0\u5347\u67e5\u8be2\u6027\u80fd\u3002\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0cCOMPACT \u64cd\u4f5c\u53ef\u80fd\u4f1a\u5f71\u54cd\u67e5\u8be2\u6027\u80fd\uff0c\u5efa\u8bae\u5728\u4e1a\u52a1\u4f4e\u5cf0\u671f\uff08\u4f8b\u5982\u51cc\u6668\uff09\u6267\u884c\u8be5\u64cd\u4f5c\u3002 \u6743\u9650\u8981\u6c42 \u00b6 \u53ea\u6709 God \u89d2\u8272 \u7684\u7528\u6237\u53ef\u4ee5\u6267\u884c CLEAR SPACE \u8bed\u53e5\u3002 \u6ce8\u610f\u4e8b\u9879 \u00b6 \u6570\u636e\u6e05\u9664\u540e\uff0c \u5982\u65e0\u5907\u4efd\uff0c\u65e0\u6cd5\u6062\u590d \u3002\u4f7f\u7528\u8be5\u529f\u80fd\u52a1\u5fc5\u8c28\u614e\u3002 CLEAR SPACE \u4e0d\u662f\u539f\u5b50\u6027\u64cd\u4f5c\u3002\u5982\u679c\u6267\u884c\u51fa\u9519\uff0c\u8bf7\u91cd\u65b0\u6267\u884c\uff0c\u907f\u514d\u6b8b\u7559\u6570\u636e\u3002 \u56fe\u7a7a\u95f4\u4e2d\u7684\u6570\u636e\u91cf\u8d8a\u5927\uff0c CLEAR SPACE \u6d88\u8017\u7684\u65f6\u95f4\u8d8a\u957f\u3002\u5982\u679c CLEAR SPACE \u7684\u6267\u884c\u56e0\u5ba2\u6237\u7aef\u8fde\u63a5\u8d85\u65f6\u800c\u5931\u8d25\uff0c\u53ef\u4ee5\u589e\u5927 Graph \u670d\u52a1\u914d\u7f6e \u4e2d storage_client_timeout_ms \u53c2\u6570\u7684\u503c\u3002 \u5728 CLEAR SPACE \u7684\u6267\u884c\u8fc7\u7a0b\u4e2d\uff0c\u5411\u8be5\u56fe\u7a7a\u95f4\u5199\u5165\u6570\u636e\u7684\u884c\u4e3a\u4e0d\u4f1a\u88ab\u81ea\u52a8\u7981\u6b62\u3002\u8fd9\u6837\u7684\u5199\u5165\u884c\u4e3a\u53ef\u80fd\u5bfc\u81f4 CLEAR SPACE \u6e05\u9664\u6570\u636e\u4e0d\u5b8c\u5168\uff0c\u6b8b\u7559\u7684\u6570\u636e\u4e5f\u53ef\u80fd\u53d7\u5230\u635f\u574f\u3002 Note NebulaGraph \u4e0d\u652f\u6301\u5728\u8fd0\u884c CLEAR SPACE \u7684\u540c\u65f6\u7981\u6b62\u5199\u5165\u3002 \u8bed\u6cd5 \u00b6 CLEAR SPACE [IF EXISTS] <space_name>; \u53c2\u6570/\u9009\u9879 \u8bf4\u660e IF EXISTS \u68c0\u67e5\u5f85\u6e05\u7a7a\u7684\u56fe\u7a7a\u95f4\u662f\u5426\u5b58\u5728\uff0c\u5982\u679c\u56fe\u7a7a\u95f4\u5b58\u5728\uff0c\u5219\u7ee7\u7eed\u6267\u884c\u6e05\u7a7a\u64cd\u4f5c\uff1b\u5982\u679c\u56fe\u7a7a\u95f4\u4e0d\u5b58\u5728\uff0c\u5219\u5b8c\u6210\u6267\u884c\uff0c\u5e76\u4e14\u63d0\u793a\u6267\u884c\u6210\u529f\uff0c\u4e0d\u4f1a\u63d0\u793a\u56fe\u7a7a\u95f4\u4e0d\u5b58\u5728\u3002\u82e5\u4e0d\u8bbe\u7f6e\u8be5\u9009\u9879\uff0c\u5f53\u56fe\u7a7a\u95f4\u4e0d\u5b58\u5728\u65f6\uff0c CLEAR SPACE \u8bed\u53e5\u4f1a\u6267\u884c\u5931\u8d25\uff0c\u7cfb\u7edf\u4f1a\u62a5\u9519\u3002 space_name \u8981\u6e05\u9664\u6570\u636e\u7684\u56fe\u7a7a\u95f4\u540d\u79f0\u3002 \u793a\u4f8b\uff1a CLEAR SPACE basketballplayer; \u4fdd\u7559\u7684\u6570\u636e \u00b6 \u56fe\u7a7a\u95f4\u4e2d\uff0c CLEAR SPACE \u4e0d\u4f1a\u5220\u9664\u7684\u6570\u636e\u5305\u62ec\uff1a Tag \u4fe1\u606f\u3002 Edge type \u4fe1\u606f\u3002 \u539f\u751f\u7d22\u5f15\u548c\u5168\u6587\u7d22\u5f15\u7684\u5143\u6570\u636e\u3002 \u4e0b\u9762\u7684\u6267\u884c\u793a\u4f8b\u660e\u786e\u5c55\u793a\u4e86 CLEAR SPACE \u4f1a\u5220\u9664\u4e0e\u4fdd\u7559\u7684\u6570\u636e\u3002 # \u8fdb\u5165\u56fe\u7a7a\u95f4 basketballplayer\u3002 nebula[(none)]> use basketballplayer; Execution succeeded # \u67e5\u770b Tag \u548c Edge type\u3002 nebula[basketballplayer]> SHOW TAGS; +----------+ | Name | +----------+ | \"player\" | | \"team\" | +----------+ Got 2 rows nebula[basketballplayer]> SHOW EDGES; +----------+ | Name | +----------+ | \"follow\" | | \"serve\" | +----------+ Got 2 rows # \u7edf\u8ba1\u56fe\u7a7a\u95f4\u4e2d\u7684\u6570\u636e\u3002 nebula[basketballplayer]> SUBMIT JOB STATS; +------------+ | New Job Id | +------------+ | 4 | +------------+ Got 1 rows # \u67e5\u770b\u7edf\u8ba1\u7ed3\u679c\u3002 nebula[basketballplayer]> SHOW STATS; +---------+------------+-------+ | Type | Name | Count | +---------+------------+-------+ | \"Tag\" | \"player\" | 51 | | \"Tag\" | \"team\" | 30 | | \"Edge\" | \"follow\" | 81 | | \"Edge\" | \"serve\" | 152 | | \"Space\" | \"vertices\" | 81 | | \"Space\" | \"edges\" | 233 | +---------+------------+-------+ Got 6 rows # \u67e5\u770b Tag \u7d22\u5f15\u3002 nebula[basketballplayer]> SHOW TAG INDEXES; +------------------+----------+----------+ | Index Name | By Tag | Columns | +------------------+----------+----------+ | \"player_index_0\" | \"player\" | [] | | \"player_index_1\" | \"player\" | [\"name\"] | +------------------+----------+----------+ Got 2 rows # ----------------------- CLEAR SPACE \u5206\u5272\u7ebf ----------------------- # \u6267\u884c CLEAR SPACE \u6e05\u7a7a\u56fe\u7a7a\u95f4 basketballplayer\u3002 nebula[basketballplayer]> CLEAR SPACE basketballplayer; Execution succeeded # \u66f4\u65b0\u7edf\u8ba1\u4fe1\u606f\u3002 nebula[basketballplayer]> SUBMIT JOB STATS; +------------+ | New Job Id | +------------+ | 5 | +------------+ Got 1 rows # \u67e5\u770b\u7edf\u8ba1\u4fe1\u606f\u3002Tag \u548c Edge type \u8fd8\u5b58\u5728\uff0c\u4f46\u6240\u6709\u7684\u70b9\u548c\u8fb9\u90fd\u6ca1\u4e86\u3002 nebula[basketballplayer]> SHOW STATS; +---------+------------+-------+ | Type | Name | Count | +---------+------------+-------+ | \"Tag\" | \"player\" | 0 | | \"Tag\" | \"team\" | 0 | | \"Edge\" | \"follow\" | 0 | | \"Edge\" | \"serve\" | 0 | | \"Space\" | \"vertices\" | 0 | | \"Space\" | \"edges\" | 0 | +---------+------------+-------+ Got 6 rows # \u67e5\u770b Tag \u7d22\u5f15\uff0c\u5b83\u4eec\u4f9d\u7136\u5b58\u5728\u3002 nebula[basketballplayer]> SHOW TAG INDEXES; +------------------+----------+----------+ | Index Name | By Tag | Columns | +------------------+----------+----------+ | \"player_index_0\" | \"player\" | [] | | \"player_index_1\" | \"player\" | [\"name\"] | +------------------+----------+----------+ Got 2 rows (time spent 523/978 us)","title":"CLEAR SPACE"},{"location":"3.ngql-guide/9.space-statements/6.clear-space/#clear_space","text":"CLEAR SPACE \u8bed\u53e5\u7528\u4e8e\u6e05\u7a7a\u56fe\u7a7a\u95f4\u4e2d\u7684\u70b9\u548c\u8fb9\uff0c\u4f46\u4e0d\u4f1a\u5220\u9664\u56fe\u7a7a\u95f4\u672c\u8eab\u4ee5\u53ca\u5176\u4e2d\u7684 Schema \u4fe1\u606f\u3002 Note \u5efa\u8bae\u5728\u6267\u884c CLEAR SPACE \u64cd\u4f5c\u4e4b\u540e\uff0c\u7acb\u5373\u6267\u884c SUBMIT JOB COMPACT \u64cd\u4f5c\u4ee5\u63d0\u5347\u67e5\u8be2\u6027\u80fd\u3002\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0cCOMPACT \u64cd\u4f5c\u53ef\u80fd\u4f1a\u5f71\u54cd\u67e5\u8be2\u6027\u80fd\uff0c\u5efa\u8bae\u5728\u4e1a\u52a1\u4f4e\u5cf0\u671f\uff08\u4f8b\u5982\u51cc\u6668\uff09\u6267\u884c\u8be5\u64cd\u4f5c\u3002","title":"CLEAR SPACE"},{"location":"3.ngql-guide/9.space-statements/6.clear-space/#_1","text":"\u53ea\u6709 God \u89d2\u8272 \u7684\u7528\u6237\u53ef\u4ee5\u6267\u884c CLEAR SPACE \u8bed\u53e5\u3002","title":"\u6743\u9650\u8981\u6c42"},{"location":"3.ngql-guide/9.space-statements/6.clear-space/#_2","text":"\u6570\u636e\u6e05\u9664\u540e\uff0c \u5982\u65e0\u5907\u4efd\uff0c\u65e0\u6cd5\u6062\u590d \u3002\u4f7f\u7528\u8be5\u529f\u80fd\u52a1\u5fc5\u8c28\u614e\u3002 CLEAR SPACE \u4e0d\u662f\u539f\u5b50\u6027\u64cd\u4f5c\u3002\u5982\u679c\u6267\u884c\u51fa\u9519\uff0c\u8bf7\u91cd\u65b0\u6267\u884c\uff0c\u907f\u514d\u6b8b\u7559\u6570\u636e\u3002 \u56fe\u7a7a\u95f4\u4e2d\u7684\u6570\u636e\u91cf\u8d8a\u5927\uff0c CLEAR SPACE \u6d88\u8017\u7684\u65f6\u95f4\u8d8a\u957f\u3002\u5982\u679c CLEAR SPACE \u7684\u6267\u884c\u56e0\u5ba2\u6237\u7aef\u8fde\u63a5\u8d85\u65f6\u800c\u5931\u8d25\uff0c\u53ef\u4ee5\u589e\u5927 Graph \u670d\u52a1\u914d\u7f6e \u4e2d storage_client_timeout_ms \u53c2\u6570\u7684\u503c\u3002 \u5728 CLEAR SPACE \u7684\u6267\u884c\u8fc7\u7a0b\u4e2d\uff0c\u5411\u8be5\u56fe\u7a7a\u95f4\u5199\u5165\u6570\u636e\u7684\u884c\u4e3a\u4e0d\u4f1a\u88ab\u81ea\u52a8\u7981\u6b62\u3002\u8fd9\u6837\u7684\u5199\u5165\u884c\u4e3a\u53ef\u80fd\u5bfc\u81f4 CLEAR SPACE \u6e05\u9664\u6570\u636e\u4e0d\u5b8c\u5168\uff0c\u6b8b\u7559\u7684\u6570\u636e\u4e5f\u53ef\u80fd\u53d7\u5230\u635f\u574f\u3002 Note NebulaGraph \u4e0d\u652f\u6301\u5728\u8fd0\u884c CLEAR SPACE \u7684\u540c\u65f6\u7981\u6b62\u5199\u5165\u3002","title":"\u6ce8\u610f\u4e8b\u9879"},{"location":"3.ngql-guide/9.space-statements/6.clear-space/#_3","text":"CLEAR SPACE [IF EXISTS] <space_name>; \u53c2\u6570/\u9009\u9879 \u8bf4\u660e IF EXISTS \u68c0\u67e5\u5f85\u6e05\u7a7a\u7684\u56fe\u7a7a\u95f4\u662f\u5426\u5b58\u5728\uff0c\u5982\u679c\u56fe\u7a7a\u95f4\u5b58\u5728\uff0c\u5219\u7ee7\u7eed\u6267\u884c\u6e05\u7a7a\u64cd\u4f5c\uff1b\u5982\u679c\u56fe\u7a7a\u95f4\u4e0d\u5b58\u5728\uff0c\u5219\u5b8c\u6210\u6267\u884c\uff0c\u5e76\u4e14\u63d0\u793a\u6267\u884c\u6210\u529f\uff0c\u4e0d\u4f1a\u63d0\u793a\u56fe\u7a7a\u95f4\u4e0d\u5b58\u5728\u3002\u82e5\u4e0d\u8bbe\u7f6e\u8be5\u9009\u9879\uff0c\u5f53\u56fe\u7a7a\u95f4\u4e0d\u5b58\u5728\u65f6\uff0c CLEAR SPACE \u8bed\u53e5\u4f1a\u6267\u884c\u5931\u8d25\uff0c\u7cfb\u7edf\u4f1a\u62a5\u9519\u3002 space_name \u8981\u6e05\u9664\u6570\u636e\u7684\u56fe\u7a7a\u95f4\u540d\u79f0\u3002 \u793a\u4f8b\uff1a CLEAR SPACE basketballplayer;","title":"\u8bed\u6cd5"},{"location":"3.ngql-guide/9.space-statements/6.clear-space/#_4","text":"\u56fe\u7a7a\u95f4\u4e2d\uff0c CLEAR SPACE \u4e0d\u4f1a\u5220\u9664\u7684\u6570\u636e\u5305\u62ec\uff1a Tag \u4fe1\u606f\u3002 Edge type \u4fe1\u606f\u3002 \u539f\u751f\u7d22\u5f15\u548c\u5168\u6587\u7d22\u5f15\u7684\u5143\u6570\u636e\u3002 \u4e0b\u9762\u7684\u6267\u884c\u793a\u4f8b\u660e\u786e\u5c55\u793a\u4e86 CLEAR SPACE \u4f1a\u5220\u9664\u4e0e\u4fdd\u7559\u7684\u6570\u636e\u3002 # \u8fdb\u5165\u56fe\u7a7a\u95f4 basketballplayer\u3002 nebula[(none)]> use basketballplayer; Execution succeeded # \u67e5\u770b Tag \u548c Edge type\u3002 nebula[basketballplayer]> SHOW TAGS; +----------+ | Name | +----------+ | \"player\" | | \"team\" | +----------+ Got 2 rows nebula[basketballplayer]> SHOW EDGES; +----------+ | Name | +----------+ | \"follow\" | | \"serve\" | +----------+ Got 2 rows # \u7edf\u8ba1\u56fe\u7a7a\u95f4\u4e2d\u7684\u6570\u636e\u3002 nebula[basketballplayer]> SUBMIT JOB STATS; +------------+ | New Job Id | +------------+ | 4 | +------------+ Got 1 rows # \u67e5\u770b\u7edf\u8ba1\u7ed3\u679c\u3002 nebula[basketballplayer]> SHOW STATS; +---------+------------+-------+ | Type | Name | Count | +---------+------------+-------+ | \"Tag\" | \"player\" | 51 | | \"Tag\" | \"team\" | 30 | | \"Edge\" | \"follow\" | 81 | | \"Edge\" | \"serve\" | 152 | | \"Space\" | \"vertices\" | 81 | | \"Space\" | \"edges\" | 233 | +---------+------------+-------+ Got 6 rows # \u67e5\u770b Tag \u7d22\u5f15\u3002 nebula[basketballplayer]> SHOW TAG INDEXES; +------------------+----------+----------+ | Index Name | By Tag | Columns | +------------------+----------+----------+ | \"player_index_0\" | \"player\" | [] | | \"player_index_1\" | \"player\" | [\"name\"] | +------------------+----------+----------+ Got 2 rows # ----------------------- CLEAR SPACE \u5206\u5272\u7ebf ----------------------- # \u6267\u884c CLEAR SPACE \u6e05\u7a7a\u56fe\u7a7a\u95f4 basketballplayer\u3002 nebula[basketballplayer]> CLEAR SPACE basketballplayer; Execution succeeded # \u66f4\u65b0\u7edf\u8ba1\u4fe1\u606f\u3002 nebula[basketballplayer]> SUBMIT JOB STATS; +------------+ | New Job Id | +------------+ | 5 | +------------+ Got 1 rows # \u67e5\u770b\u7edf\u8ba1\u4fe1\u606f\u3002Tag \u548c Edge type \u8fd8\u5b58\u5728\uff0c\u4f46\u6240\u6709\u7684\u70b9\u548c\u8fb9\u90fd\u6ca1\u4e86\u3002 nebula[basketballplayer]> SHOW STATS; +---------+------------+-------+ | Type | Name | Count | +---------+------------+-------+ | \"Tag\" | \"player\" | 0 | | \"Tag\" | \"team\" | 0 | | \"Edge\" | \"follow\" | 0 | | \"Edge\" | \"serve\" | 0 | | \"Space\" | \"vertices\" | 0 | | \"Space\" | \"edges\" | 0 | +---------+------------+-------+ Got 6 rows # \u67e5\u770b Tag \u7d22\u5f15\uff0c\u5b83\u4eec\u4f9d\u7136\u5b58\u5728\u3002 nebula[basketballplayer]> SHOW TAG INDEXES; +------------------+----------+----------+ | Index Name | By Tag | Columns | +------------------+----------+----------+ | \"player_index_0\" | \"player\" | [] | | \"player_index_1\" | \"player\" | [\"name\"] | +------------------+----------+----------+ Got 2 rows (time spent 523/978 us)","title":"\u4fdd\u7559\u7684\u6570\u636e"},{"location":"4.deployment-and-installation/1.resource-preparations/","text":"\u51c6\u5907\u7f16\u8bd1\u3001\u5b89\u88c5\u548c\u8fd0\u884cNebulaGraph\u7684\u73af\u5883 \u00b6 \u672c\u6587\u4ecb\u7ecd\u7f16\u8bd1\u3001\u5b89\u88c5NebulaGraph\u7684\u8981\u6c42\u548c\u5efa\u8bae\uff0c\u4ee5\u53ca\u5982\u4f55\u9884\u4f30\u96c6\u7fa4\u8fd0\u884c\u6240\u9700\u7684\u8d44\u6e90\u3002 \u5173\u4e8e\u5b58\u50a8\u786c\u4ef6 \u00b6 NebulaGraph\u662f\u9488\u5bf9 NVMe SSD \u8fdb\u884c\u8bbe\u8ba1\u548c\u5b9e\u73b0\u7684\uff0c\u6240\u6709\u9ed8\u8ba4\u53c2\u6570\u90fd\u662f\u57fa\u4e8e SSD \u8bbe\u5907\u8fdb\u884c\u8c03\u4f18\uff0c\u8981\u6c42\u6781\u9ad8\u7684 IOPS \u548c\u6781\u4f4e\u7684 Latency\u3002 \u4e0d\u5efa\u8bae\u4f7f\u7528 HDD\uff1b\u56e0\u4e3a\u5176 IOPS \u6027\u80fd\u5dee\uff0c\u968f\u673a\u5bfb\u9053\u5ef6\u8fdf\u9ad8\uff1b\u4f1a\u9047\u5230\u5927\u91cf\u95ee\u9898\u3002 \u4e0d\u8981\u4f7f\u7528\u8fdc\u7aef\u5b58\u50a8\u8bbe\u5907\uff08\u5982 NAS \u6216 SAN\uff09\uff0c\u4e0d\u8981\u5916\u63a5\u57fa\u4e8e HDFS \u6216\u8005 Ceph \u7684\u865a\u62df\u786c\u76d8\u3002 \u4e0d\u8981\u4f7f\u7528\u78c1\u76d8\u9635\u5217\uff08RAID\uff09\u3002 \u4f7f\u7528\u672c\u5730 SSD \u8bbe\u5907\uff1b\u6216 AWS Provisioned IOPS SSD \u6216\u7b49\u4ef7\u4e91\u4ea7\u54c1\u3002 \u5173\u4e8e CPU \u67b6\u6784 \u00b6 Note \u4ece 3.0.2 \u5f00\u59cb\uff0cNebulaGraph\u5728 Docker Hub \u4e0a\u7684 Docker \u652f\u6301 ARM64 \u67b6\u6784\u3002\u793e\u533a\u7528\u6237\u53ef\u4ee5\u5728 ARM macOS \u7684 Docker Desktop \u4e0a\u6216\u8005 ARM Linux Server \u4e0a\u8fd0\u884c\u5bb9\u5668\u5316\u7684NebulaGraph\u3002 \u7f16\u8bd1\u6e90\u7801\u8981\u6c42 \u00b6 \u786c\u4ef6\u8981\u6c42 \u00b6 \u5355\u4e2a\u673a\u5668\u7684\u786c\u4ef6\u8981\u6c42\u5982\u4e0b\u3002 \u7c7b\u578b \u8981\u6c42 CPU \u67b6\u6784 x86_64 \u5185\u5b58 4 GB \u786c\u76d8 10 GB\uff0cSSD \u64cd\u4f5c\u7cfb\u7edf\u8981\u6c42 \u00b6 \u5f53\u524d\u4ec5\u652f\u6301\u5728 Linux \u7cfb\u7edf\u4e2d\u7f16\u8bd1NebulaGraph\uff0c\u5efa\u8bae\u4f7f\u7528\u5185\u6838\u7248\u672c\u4e3a 4.15 \u53ca\u4ee5\u4e0a\u7248\u672c\u7684 Linux \u7cfb\u7edf\u3002 Note \u5728\u5185\u6838\u7248\u672c\u4f4e\u4e8e\u8981\u6c42\u7684 Linux \u7cfb\u7edf\u4e2d\u5b89\u88c5NebulaGraph\u53ef\u4f7f\u7528 RPM\u3001DEB \u6216\u8005 TAR \u6587\u4ef6\u3002 \u8f6f\u4ef6\u8981\u6c42 \u00b6 \u8f6f\u4ef6\u7248\u672c\u9700\u8981\u5982\u4e0b\u8868\u6240\u793a\uff0c\u5982\u679c\u7248\u672c\u4e0d\u7b26\u5408\u8981\u6c42\uff0c\u8bf7\u6309\u7167 \u5b89\u88c5\u7f16\u8bd1\u6240\u9700\u8f6f\u4ef6 \u4e2d\u7684\u6b65\u9aa4\u8fdb\u884c\u64cd\u4f5c\u3002 \u8f6f\u4ef6\u540d\u79f0 \u7248\u672c \u5907\u6ce8 glibc 2.17 \u53ca\u4ee5\u4e0a \u6267\u884c\u547d\u4ee4 ldd --version \u68c0\u67e5\u7248\u672c\u3002 make \u4efb\u610f\u7a33\u5b9a\u7248\u672c - m4 \u4efb\u610f\u7a33\u5b9a\u7248\u672c - git \u4efb\u610f\u7a33\u5b9a\u7248\u672c - wget \u4efb\u610f\u7a33\u5b9a\u7248\u672c - unzip \u4efb\u610f\u7a33\u5b9a\u7248\u672c - xz \u4efb\u610f\u7a33\u5b9a\u7248\u672c - readline-devel \u4efb\u610f\u7a33\u5b9a\u7248\u672c - ncurses-devel \u4efb\u610f\u7a33\u5b9a\u7248\u672c - zlib-devel \u4efb\u610f\u7a33\u5b9a\u7248\u672c - g++ 8.5.0 \u53ca\u4ee5\u4e0a \u6267\u884c\u547d\u4ee4 g++ -v \u68c0\u67e5\u7248\u672c\u3002 cmake 3.14.0 \u53ca\u4ee5\u4e0a \u6267\u884c\u547d\u4ee4 cmake --version \u68c0\u67e5\u7248\u672c\u3002 curl \u4efb\u610f\u7a33\u5b9a\u7248\u672c - redhat-lsb-core \u4efb\u610f\u7a33\u5b9a\u7248\u672c - libstdc++-static \u4efb\u610f\u7a33\u5b9a\u7248\u672c \u4ec5\u5728 CentOS 8+\u3001RedHat 8+\u3001Fedora \u4e2d\u9700\u8981\u3002 libasan \u4efb\u610f\u7a33\u5b9a\u7248\u672c \u4ec5\u5728 CentOS 8+\u3001RedHat 8+\u3001Fedora \u4e2d\u9700\u8981\u3002 bzip2 \u4efb\u610f\u7a33\u5b9a\u7248\u672c - \u5176\u4ed6\u7b2c\u4e09\u65b9\u8f6f\u4ef6\u5c06\u5728\u5b89\u88c5\uff08cmake\uff09\u9636\u6bb5\u81ea\u52a8\u4e0b\u8f7d\u5e76\u5b89\u88c5\u5230 build \u76ee\u5f55\u4e2d\u3002 \u5b89\u88c5\u7f16\u8bd1\u6240\u9700\u8f6f\u4ef6 \u00b6 \u5982\u679c\u90e8\u5206\u4f9d\u8d56\u8f6f\u4ef6\u7f3a\u5931\u6216\u8005\u7248\u672c\u4e0d\u6ee1\u8db3\u8981\u6c42\uff0c\u6839\u636e\u5982\u4e0b\u6b65\u9aa4\u624b\u52a8\u5b89\u88c5\u3002\u53ef\u6839\u636e\u5b9e\u9645\u60c5\u51b5\u5220\u51cf\u547d\u4ee4\u4e2d\u8981\u5b89\u88c5\u7684\u8f6f\u4ef6\u3001\u8df3\u8fc7\u65e0\u9700\u6267\u884c\u7684\u6b65\u9aa4\u3002 \u5b89\u88c5\u4f9d\u8d56\u5305\u3002 CentOS\u3001RedHat\u3001Fedora \u7528\u6237\u8bf7\u6267\u884c\u5982\u4e0b\u547d\u4ee4\uff1a $ yum update $ yum install -y make \\ m4 \\ git \\ wget \\ unzip \\ xz \\ readline-devel \\ ncurses-devel \\ zlib-devel \\ gcc \\ gcc-c++ \\ cmake \\ curl \\ redhat-lsb-core \\ bzip2 // \u4ec5 CentOS 8 +\u3001RedHat 8 +\u3001Fedora \u9700\u8981\u5b89\u88c5 libstdc++-static \u548c libasan\u3002 $ yum install -y libstdc++-static libasan Debian \u548c Ubuntu \u7528\u6237\u8bf7\u6267\u884c\u5982\u4e0b\u547d\u4ee4\uff1a $ apt-get update $ apt-get install -y make \\ m4 \\ git \\ wget \\ unzip \\ xz-utils \\ curl \\ lsb-core \\ build-essential \\ libreadline-dev \\ ncurses-dev \\ cmake \\ bzip2 \u68c0\u67e5\u4e3b\u673a\u4e0a\u7684 G++ \u548c CMake \u7248\u672c\u662f\u5426\u6b63\u786e\u3002\u7248\u672c\u4fe1\u606f\u8bf7\u53c2\u89c1 \u8f6f\u4ef6\u8981\u6c42 \u3002 $ g++ --version $ cmake --version \u5982\u679c\u7248\u672c\u6b63\u786e\uff0c\u5219\u8f6f\u4ef6\u4f9d\u8d56\u5df2\u51c6\u5907\u5b8c\u6bd5\uff0c\u5ffd\u7565\u540e\u7eed\u6b65\u9aa4\uff1b\u5982\u679c\u4e0d\u6b63\u786e\uff0c\u6839\u636e\u4e0d\u7b26\u5408\u7248\u672c\u8981\u6c42\u7684\u8f6f\u4ef6\u6267\u884c\u540e\u7eed\u6b65\u9aa4\u3002 \u5982\u679c CMake \u6216 g++ \u7248\u672c\u4e0d\u7b26\u5408\u8981\u6c42\uff0c\u8bbf\u95ee\u5b98\u7f51\u4ee5\u83b7\u53d6\u7b26\u5408\u9700\u8981\u7684\u7248\u672c\u3002 \u6d4b\u8bd5\u73af\u5883\u8981\u6c42 \u00b6 \u786c\u4ef6\u8981\u6c42 \u00b6 \u5355\u4e2a\u673a\u5668\u7684\u786c\u4ef6\u8981\u6c42\u5982\u4e0b\u3002 \u7c7b\u578b \u8981\u6c42 CPU \u67b6\u6784 x86_64 CPU \u6838\u6570 4 \u5185\u5b58 8 GB \u786c\u76d8 100 GB\uff0cSSD \u64cd\u4f5c\u7cfb\u7edf\u8981\u6c42 \u00b6 \u5f53\u524d\u4ec5\u652f\u6301\u5728 Linux \u7cfb\u7edf\u4e2d\u5b89\u88c5NebulaGraph\uff0c\u5efa\u8bae\u5728\u6d4b\u8bd5\u73af\u5883\u4e2d\u4f7f\u7528\u5185\u6838\u7248\u672c\u4e3a 3.9 \u53ca\u4ee5\u4e0a\u7248\u672c\u7684 Linux \u7cfb\u7edf\u3002 \u670d\u52a1\u67b6\u6784\u5efa\u8bae \u00b6 \u8fdb\u7a0b \u5efa\u8bae\u6570\u91cf metad\uff08meta \u6570\u636e\u670d\u52a1\u8fdb\u7a0b\uff09 1 storaged\uff08\u5b58\u50a8\u670d\u52a1\u8fdb\u7a0b\uff09 \u22651 graphd\uff08\u67e5\u8be2\u5f15\u64ce\u670d\u52a1\u8fdb\u7a0b\uff09 \u22651 \u4f8b\u5982\u5355\u673a\u6d4b\u8bd5\u73af\u5883\uff0c\u7528\u6237\u53ef\u4ee5\u5728\u673a\u5668\u4e0a\u90e8\u7f72 1 \u4e2a metad\u30011 \u4e2a storaged \u548c 1 \u4e2a graphd \u8fdb\u7a0b\u3002 \u5bf9\u4e8e\u66f4\u5e38\u89c1\u7684\u6d4b\u8bd5\u73af\u5883\uff0c\u4f8b\u5982\u4e09\u53f0\u673a\u5668\u6784\u6210\u7684\u96c6\u7fa4\uff0c\u7528\u6237\u53ef\u4ee5\u6309\u7167\u5982\u4e0b\u65b9\u6848\u90e8\u7f72NebulaGraph\u3002 \u673a\u5668\u540d\u79f0 metad \u8fdb\u7a0b\u6570\u91cf storaged \u8fdb\u7a0b\u6570\u91cf graphd \u8fdb\u7a0b\u6570\u91cf A 1 1 1 B - 1 1 C - 1 1 \u751f\u4ea7\u73af\u5883\u8fd0\u884c\u8981\u6c42 \u00b6 \u786c\u4ef6\u8981\u6c42 \u00b6 \u5355\u4e2a\u673a\u5668\u7684\u786c\u4ef6\u8981\u6c42\u5982\u4e0b\u3002 \u7c7b\u578b \u8981\u6c42 CPU \u67b6\u6784 x86_64 CPU \u6838\u6570 48 \u5185\u5b58 256 GB \u786c\u76d8 2 * 1.6 TB\uff0cNVMe SSD \u64cd\u4f5c\u7cfb\u7edf\u8981\u6c42 \u00b6 \u5f53\u524d\u4ec5\u652f\u6301\u5728 Linux \u7cfb\u7edf\u4e2d\u5b89\u88c5NebulaGraph\uff0c\u5efa\u8bae\u5728\u751f\u4ea7\u73af\u5883\u4e2d\u4f7f\u7528\u5185\u6838\u7248\u672c\u4e3a 3.9 \u53ca\u4ee5\u4e0a\u7248\u672c\u7684 Linux \u7cfb\u7edf\u3002 \u7528\u6237\u53ef\u4ee5\u901a\u8fc7\u8c03\u6574\u4e00\u4e9b\u5185\u6838\u53c2\u6570\u6765\u63d0\u9ad8NebulaGraph\u6027\u80fd\uff0c\u8be6\u60c5\u8bf7\u53c2\u89c1 \u5185\u6838\u914d\u7f6e \u3002 \u670d\u52a1\u67b6\u6784\u5efa\u8bae \u00b6 Danger \u4e0d\u8981 \u8de8\u673a\u623f\u90e8\u7f72\u5355\u4e2a\u96c6\u7fa4\uff08\u4f01\u4e1a\u7248\u652f\u6301\u8de8\u673a\u623f\u96c6\u7fa4\u95f4\u540c\u6b65\uff09\u3002 \u8fdb\u7a0b \u6570\u91cf metad\uff08meta \u6570\u636e\u670d\u52a1\u8fdb\u7a0b\uff09 3 storaged\uff08\u5b58\u50a8\u670d\u52a1\u8fdb\u7a0b\uff09 \u22653 graphd\uff08\u67e5\u8be2\u5f15\u64ce\u670d\u52a1\u8fdb\u7a0b\uff09 \u22653 \u6709\u4e14\u4ec5\u6709 3 \u4e2a metad \u8fdb\u7a0b\uff0c\u6bcf\u4e2a metad \u8fdb\u7a0b\u4f1a\u81ea\u52a8\u521b\u5efa\u5e76\u7ef4\u62a4 meta \u6570\u636e\u7684\u4e00\u4e2a\u526f\u672c\u3002 storaged \u8fdb\u7a0b\u7684\u6570\u91cf\u4e0d\u4f1a\u5f71\u54cd\u56fe\u7a7a\u95f4\u526f\u672c\u7684\u6570\u91cf\u3002 \u7528\u6237\u53ef\u4ee5\u5728\u4e00\u53f0\u673a\u5668\u4e0a\u90e8\u7f72\u591a\u4e2a\u4e0d\u540c\u8fdb\u7a0b\uff0c\u4f8b\u5982\u4e94\u53f0\u673a\u5668\u6784\u6210\u7684\u96c6\u7fa4\uff0c\u7528\u6237\u53ef\u4ee5\u6309\u7167\u5982\u4e0b\u65b9\u6848\u90e8\u7f72NebulaGraph\u3002 \u673a\u5668\u540d\u79f0 metad \u8fdb\u7a0b\u6570\u91cf storaged \u8fdb\u7a0b\u6570\u91cf graphd \u8fdb\u7a0b\u6570\u91cf A 1 1 1 B 1 1 1 C 1 1 1 D - 1 1 E - 1 1 NebulaGraph\u8d44\u6e90\u8981\u6c42 \u00b6 \u7528\u6237\u53ef\u4ee5\u9884\u4f30\u4e00\u4e2a 3 \u526f\u672cNebulaGraph\u96c6\u7fa4\u6240\u9700\u7684\u5185\u5b58\u3001\u786c\u76d8\u7a7a\u95f4\u548c\u5206\u533a\u6570\u91cf\u3002 \u8d44\u6e90 \u5355\u4f4d \u8ba1\u7b97\u516c\u5f0f \u8bf4\u660e \u786c\u76d8\u7a7a\u95f4 Bytes \u70b9\u548c\u8fb9\u7684\u603b\u6570 * \u5c5e\u6027\u7684\u5e73\u5747\u5b57\u8282\u5927\u5c0f * 7.5 * 120% \u7531\u4e8e\u8fb9\u5b58\u5728\u5b58\u50a8\u653e\u5927\u73b0\u8c61\uff0c\u6240\u4ee5\u9700\u8981 \u70b9\u548c\u8fb9\u7684\u603b\u6570 * \u5c5e\u6027\u7684\u5e73\u5747\u5b57\u8282\u5927\u5c0f * 7.5 \u7684\u7a7a\u95f4\uff0c\u8be6\u60c5\u8bf7\u53c2\u89c1 \u5207\u8fb9\u4e0e\u5b58\u50a8\u653e\u5927 \u3002 \u5185\u5b58 Bytes [ \u70b9\u548c\u8fb9\u7684\u603b\u6570 * 16 + RocksDB \u5b9e\u4f8b\u6570\u91cf * ( write_buffer_size * max_write_buffer_number ) + \u5757\u7f13\u5b58\u5927\u5c0f ] * 120% \u70b9\u548c\u8fb9\u7684\u603b\u6570 * 16 \u662f BloomFilter \u9700\u8981\u5360\u7528\u7684\u5185\u5b58\u7a7a\u95f4\uff0c write_buffer_size \u548c max_write_buffer_number \u662f RocksDB \u5185\u5b58\u76f8\u5173\u53c2\u6570\uff0c\u8be6\u60c5\u8bf7\u53c2\u89c1 MemTable \u3002\u5757\u7f13\u5b58\u5927\u5c0f\u8bf7\u53c2\u89c1 Memory usage in RocksDB \u3002 \u5206\u533a\u6570\u91cf - \u96c6\u7fa4\u786c\u76d8\u6570\u91cf * disk_partition_num_multiplier disk_partition_num_multiplier \u662f\u4e00\u4e2a\u7528\u4e8e\u8861\u91cf\u786c\u76d8\u6027\u80fd\u7684\u6574\u6570\uff0c\u53d6\u503c\u8303\u56f4 2~20\u3002\u5efa\u8bae\u5728\u8ba1\u7b97 SSD \u786c\u76d8\u7684\u5206\u533a\u6570\u91cf\u65f6\u4f7f\u7528 20 \u505a\u53c2\u6570\u503c\uff0cHDD \u786c\u76d8\u4f7f\u7528 2\u3002 \u95ee\u9898 1\uff1a\u4e3a\u4ec0\u4e48\u786c\u76d8\u7a7a\u95f4\u7684\u9884\u4f30\u516c\u5f0f\u4e2d\u9700\u8981\u4e58\u4ee5 7.5\uff1f \u7b54\uff1a\u56e0\u4e3a\u6839\u636e\u6d4b\u8bd5\u503c\uff0c\u76f8\u6bd4\u539f\u59cb\u6570\u636e\u6587\u4ef6\uff08csv\uff09\uff0c\u5355\u526f\u672c\u6240\u5360\u7528\u7684\u7a7a\u95f4\u7ea6\u4e3a\u4e4b\u524d\u7684 2.5 \u500d\uff1b\u53e6\u5916\u7d22\u5f15\u4f1a\u53e6\u5916\u5360\u7528\u786c\u76d8\u7a7a\u95f4\uff0c\u6bcf\u4e2a\u88ab\u7d22\u5f15\u7684\u70b9\u6216\u8fb9\u5360\u7528 16 \u5b57\u8282\u7684\u5185\u5b58\uff0c\u7d22\u5f15\u7684\u5360\u7528\u786c\u76d8\u7a7a\u95f4\u53ef\u6309\u7ecf\u9a8c\u4f30\u7b97\u4e3a\uff1a\u88ab\u7d22\u5f15\u7684\u70b9\u6216\u8fb9\u603b\u6570 * 50 \u5b57\u8282\u3002 \u95ee\u9898 2\uff1a\u4e3a\u4ec0\u4e48\u78c1\u76d8\u7a7a\u95f4\u548c\u5185\u5b58\u90fd\u8981\u4e58\u4ee5 120%\uff1f \u7b54\uff1a\u989d\u5916\u7684 20% \u7528\u4e8e\u7f13\u51b2\u3002 \u95ee\u9898 3\uff1a\u5982\u4f55\u83b7\u53d6 RocksDB \u5b9e\u4f8b\u6570\u91cf\uff1f \u7b54\uff1a\u5bf9\u4e8e\u793e\u533a\u7248NebulaGraph\uff0c\u6bcf\u4e2a\u56fe\u7a7a\u95f4\u5bf9\u5e94\u4e00\u4e2a RocksDB \u5b9e\u4f8b\uff0c\u5e76\u4e14 --data_path \u9009\u9879\uff08 etc \u76ee\u5f55\u4e0b\u7684 nebula-storaged.conf \u6587\u4ef6\u4e2d\uff09\u4e2d\u7684\u6bcf\u4e2a\u76ee\u5f55\u5bf9\u5e94\u4e00\u4e2a RocksDB \u5b9e\u4f8b\u3002\u5373\uff0cRocksDB \u5b9e\u4f8b\u6570\u91cf = \u56fe\u7a7a\u95f4\u603b\u6570 * \u76ee\u5f55\u603b\u6570\u3002 Note \u7528\u6237\u53ef\u4ee5\u5728\u914d\u7f6e\u6587\u4ef6 nebula-storaged.conf \u4e2d\u6dfb\u52a0 --enable_partitioned_index_filter=true \u6765\u964d\u4f4e bloom \u8fc7\u6ee4\u5668\u5360\u7528\u7684\u5185\u5b58\u5927\u5c0f\uff0c\u4f46\u662f\u5728\u67d0\u4e9b\u968f\u673a\u5bfb\u9053\uff08random-seek\uff09\u7684\u60c5\u51b5\u4e0b\uff0c\u53ef\u80fd\u4f1a\u964d\u4f4e\u8bfb\u53d6\u6027\u80fd\u3002 Caution \u6bcf\u4e2a RocksDB \u5b9e\u4f8b\u5373\u4f7f\u8fd8\u672a\u5199\u5165\u4efb\u4f55\u6570\u636e\u65f6\uff0c\u4ecd\u4f1a\u5360\u7528 70M \u5de6\u53f3\u7684\u78c1\u76d8\u7a7a\u95f4\u3002\u4e00\u4e2a\u5206\u533a\u5bf9\u5e94\u4e00\u4e2a RocksDB \u5b9e\u4f8b\uff0c\u5f53\u5206\u533a\u8bbe\u7f6e\u7279\u522b\u591a\u65f6\uff0c\u4f8b\u5982 100\uff0c\u56fe\u7a7a\u95f4\u521b\u5efa\u540e\u5373\u5360\u7528\u4e86\u5927\u91cf\u78c1\u76d8\u7a7a\u95f4\u3002","title":"\u51c6\u5907\u8d44\u6e90"},{"location":"4.deployment-and-installation/1.resource-preparations/#nebulagraph","text":"\u672c\u6587\u4ecb\u7ecd\u7f16\u8bd1\u3001\u5b89\u88c5NebulaGraph\u7684\u8981\u6c42\u548c\u5efa\u8bae\uff0c\u4ee5\u53ca\u5982\u4f55\u9884\u4f30\u96c6\u7fa4\u8fd0\u884c\u6240\u9700\u7684\u8d44\u6e90\u3002","title":"\u51c6\u5907\u7f16\u8bd1\u3001\u5b89\u88c5\u548c\u8fd0\u884cNebulaGraph\u7684\u73af\u5883"},{"location":"4.deployment-and-installation/1.resource-preparations/#_1","text":"NebulaGraph\u662f\u9488\u5bf9 NVMe SSD \u8fdb\u884c\u8bbe\u8ba1\u548c\u5b9e\u73b0\u7684\uff0c\u6240\u6709\u9ed8\u8ba4\u53c2\u6570\u90fd\u662f\u57fa\u4e8e SSD \u8bbe\u5907\u8fdb\u884c\u8c03\u4f18\uff0c\u8981\u6c42\u6781\u9ad8\u7684 IOPS \u548c\u6781\u4f4e\u7684 Latency\u3002 \u4e0d\u5efa\u8bae\u4f7f\u7528 HDD\uff1b\u56e0\u4e3a\u5176 IOPS \u6027\u80fd\u5dee\uff0c\u968f\u673a\u5bfb\u9053\u5ef6\u8fdf\u9ad8\uff1b\u4f1a\u9047\u5230\u5927\u91cf\u95ee\u9898\u3002 \u4e0d\u8981\u4f7f\u7528\u8fdc\u7aef\u5b58\u50a8\u8bbe\u5907\uff08\u5982 NAS \u6216 SAN\uff09\uff0c\u4e0d\u8981\u5916\u63a5\u57fa\u4e8e HDFS \u6216\u8005 Ceph \u7684\u865a\u62df\u786c\u76d8\u3002 \u4e0d\u8981\u4f7f\u7528\u78c1\u76d8\u9635\u5217\uff08RAID\uff09\u3002 \u4f7f\u7528\u672c\u5730 SSD \u8bbe\u5907\uff1b\u6216 AWS Provisioned IOPS SSD \u6216\u7b49\u4ef7\u4e91\u4ea7\u54c1\u3002","title":"\u5173\u4e8e\u5b58\u50a8\u786c\u4ef6"},{"location":"4.deployment-and-installation/1.resource-preparations/#cpu","text":"Note \u4ece 3.0.2 \u5f00\u59cb\uff0cNebulaGraph\u5728 Docker Hub \u4e0a\u7684 Docker \u652f\u6301 ARM64 \u67b6\u6784\u3002\u793e\u533a\u7528\u6237\u53ef\u4ee5\u5728 ARM macOS \u7684 Docker Desktop \u4e0a\u6216\u8005 ARM Linux Server \u4e0a\u8fd0\u884c\u5bb9\u5668\u5316\u7684NebulaGraph\u3002","title":"\u5173\u4e8e CPU \u67b6\u6784"},{"location":"4.deployment-and-installation/1.resource-preparations/#_2","text":"","title":"\u7f16\u8bd1\u6e90\u7801\u8981\u6c42"},{"location":"4.deployment-and-installation/1.resource-preparations/#_3","text":"\u5355\u4e2a\u673a\u5668\u7684\u786c\u4ef6\u8981\u6c42\u5982\u4e0b\u3002 \u7c7b\u578b \u8981\u6c42 CPU \u67b6\u6784 x86_64 \u5185\u5b58 4 GB \u786c\u76d8 10 GB\uff0cSSD","title":"\u786c\u4ef6\u8981\u6c42"},{"location":"4.deployment-and-installation/1.resource-preparations/#_4","text":"\u5f53\u524d\u4ec5\u652f\u6301\u5728 Linux \u7cfb\u7edf\u4e2d\u7f16\u8bd1NebulaGraph\uff0c\u5efa\u8bae\u4f7f\u7528\u5185\u6838\u7248\u672c\u4e3a 4.15 \u53ca\u4ee5\u4e0a\u7248\u672c\u7684 Linux \u7cfb\u7edf\u3002 Note \u5728\u5185\u6838\u7248\u672c\u4f4e\u4e8e\u8981\u6c42\u7684 Linux \u7cfb\u7edf\u4e2d\u5b89\u88c5NebulaGraph\u53ef\u4f7f\u7528 RPM\u3001DEB \u6216\u8005 TAR \u6587\u4ef6\u3002","title":"\u64cd\u4f5c\u7cfb\u7edf\u8981\u6c42"},{"location":"4.deployment-and-installation/1.resource-preparations/#_5","text":"\u8f6f\u4ef6\u7248\u672c\u9700\u8981\u5982\u4e0b\u8868\u6240\u793a\uff0c\u5982\u679c\u7248\u672c\u4e0d\u7b26\u5408\u8981\u6c42\uff0c\u8bf7\u6309\u7167 \u5b89\u88c5\u7f16\u8bd1\u6240\u9700\u8f6f\u4ef6 \u4e2d\u7684\u6b65\u9aa4\u8fdb\u884c\u64cd\u4f5c\u3002 \u8f6f\u4ef6\u540d\u79f0 \u7248\u672c \u5907\u6ce8 glibc 2.17 \u53ca\u4ee5\u4e0a \u6267\u884c\u547d\u4ee4 ldd --version \u68c0\u67e5\u7248\u672c\u3002 make \u4efb\u610f\u7a33\u5b9a\u7248\u672c - m4 \u4efb\u610f\u7a33\u5b9a\u7248\u672c - git \u4efb\u610f\u7a33\u5b9a\u7248\u672c - wget \u4efb\u610f\u7a33\u5b9a\u7248\u672c - unzip \u4efb\u610f\u7a33\u5b9a\u7248\u672c - xz \u4efb\u610f\u7a33\u5b9a\u7248\u672c - readline-devel \u4efb\u610f\u7a33\u5b9a\u7248\u672c - ncurses-devel \u4efb\u610f\u7a33\u5b9a\u7248\u672c - zlib-devel \u4efb\u610f\u7a33\u5b9a\u7248\u672c - g++ 8.5.0 \u53ca\u4ee5\u4e0a \u6267\u884c\u547d\u4ee4 g++ -v \u68c0\u67e5\u7248\u672c\u3002 cmake 3.14.0 \u53ca\u4ee5\u4e0a \u6267\u884c\u547d\u4ee4 cmake --version \u68c0\u67e5\u7248\u672c\u3002 curl \u4efb\u610f\u7a33\u5b9a\u7248\u672c - redhat-lsb-core \u4efb\u610f\u7a33\u5b9a\u7248\u672c - libstdc++-static \u4efb\u610f\u7a33\u5b9a\u7248\u672c \u4ec5\u5728 CentOS 8+\u3001RedHat 8+\u3001Fedora \u4e2d\u9700\u8981\u3002 libasan \u4efb\u610f\u7a33\u5b9a\u7248\u672c \u4ec5\u5728 CentOS 8+\u3001RedHat 8+\u3001Fedora \u4e2d\u9700\u8981\u3002 bzip2 \u4efb\u610f\u7a33\u5b9a\u7248\u672c - \u5176\u4ed6\u7b2c\u4e09\u65b9\u8f6f\u4ef6\u5c06\u5728\u5b89\u88c5\uff08cmake\uff09\u9636\u6bb5\u81ea\u52a8\u4e0b\u8f7d\u5e76\u5b89\u88c5\u5230 build \u76ee\u5f55\u4e2d\u3002","title":"\u8f6f\u4ef6\u8981\u6c42"},{"location":"4.deployment-and-installation/1.resource-preparations/#_6","text":"\u5982\u679c\u90e8\u5206\u4f9d\u8d56\u8f6f\u4ef6\u7f3a\u5931\u6216\u8005\u7248\u672c\u4e0d\u6ee1\u8db3\u8981\u6c42\uff0c\u6839\u636e\u5982\u4e0b\u6b65\u9aa4\u624b\u52a8\u5b89\u88c5\u3002\u53ef\u6839\u636e\u5b9e\u9645\u60c5\u51b5\u5220\u51cf\u547d\u4ee4\u4e2d\u8981\u5b89\u88c5\u7684\u8f6f\u4ef6\u3001\u8df3\u8fc7\u65e0\u9700\u6267\u884c\u7684\u6b65\u9aa4\u3002 \u5b89\u88c5\u4f9d\u8d56\u5305\u3002 CentOS\u3001RedHat\u3001Fedora \u7528\u6237\u8bf7\u6267\u884c\u5982\u4e0b\u547d\u4ee4\uff1a $ yum update $ yum install -y make \\ m4 \\ git \\ wget \\ unzip \\ xz \\ readline-devel \\ ncurses-devel \\ zlib-devel \\ gcc \\ gcc-c++ \\ cmake \\ curl \\ redhat-lsb-core \\ bzip2 // \u4ec5 CentOS 8 +\u3001RedHat 8 +\u3001Fedora \u9700\u8981\u5b89\u88c5 libstdc++-static \u548c libasan\u3002 $ yum install -y libstdc++-static libasan Debian \u548c Ubuntu \u7528\u6237\u8bf7\u6267\u884c\u5982\u4e0b\u547d\u4ee4\uff1a $ apt-get update $ apt-get install -y make \\ m4 \\ git \\ wget \\ unzip \\ xz-utils \\ curl \\ lsb-core \\ build-essential \\ libreadline-dev \\ ncurses-dev \\ cmake \\ bzip2 \u68c0\u67e5\u4e3b\u673a\u4e0a\u7684 G++ \u548c CMake \u7248\u672c\u662f\u5426\u6b63\u786e\u3002\u7248\u672c\u4fe1\u606f\u8bf7\u53c2\u89c1 \u8f6f\u4ef6\u8981\u6c42 \u3002 $ g++ --version $ cmake --version \u5982\u679c\u7248\u672c\u6b63\u786e\uff0c\u5219\u8f6f\u4ef6\u4f9d\u8d56\u5df2\u51c6\u5907\u5b8c\u6bd5\uff0c\u5ffd\u7565\u540e\u7eed\u6b65\u9aa4\uff1b\u5982\u679c\u4e0d\u6b63\u786e\uff0c\u6839\u636e\u4e0d\u7b26\u5408\u7248\u672c\u8981\u6c42\u7684\u8f6f\u4ef6\u6267\u884c\u540e\u7eed\u6b65\u9aa4\u3002 \u5982\u679c CMake \u6216 g++ \u7248\u672c\u4e0d\u7b26\u5408\u8981\u6c42\uff0c\u8bbf\u95ee\u5b98\u7f51\u4ee5\u83b7\u53d6\u7b26\u5408\u9700\u8981\u7684\u7248\u672c\u3002","title":"\u5b89\u88c5\u7f16\u8bd1\u6240\u9700\u8f6f\u4ef6"},{"location":"4.deployment-and-installation/1.resource-preparations/#_7","text":"","title":"\u6d4b\u8bd5\u73af\u5883\u8981\u6c42"},{"location":"4.deployment-and-installation/1.resource-preparations/#_8","text":"\u5355\u4e2a\u673a\u5668\u7684\u786c\u4ef6\u8981\u6c42\u5982\u4e0b\u3002 \u7c7b\u578b \u8981\u6c42 CPU \u67b6\u6784 x86_64 CPU \u6838\u6570 4 \u5185\u5b58 8 GB \u786c\u76d8 100 GB\uff0cSSD","title":"\u786c\u4ef6\u8981\u6c42"},{"location":"4.deployment-and-installation/1.resource-preparations/#_9","text":"\u5f53\u524d\u4ec5\u652f\u6301\u5728 Linux \u7cfb\u7edf\u4e2d\u5b89\u88c5NebulaGraph\uff0c\u5efa\u8bae\u5728\u6d4b\u8bd5\u73af\u5883\u4e2d\u4f7f\u7528\u5185\u6838\u7248\u672c\u4e3a 3.9 \u53ca\u4ee5\u4e0a\u7248\u672c\u7684 Linux \u7cfb\u7edf\u3002","title":"\u64cd\u4f5c\u7cfb\u7edf\u8981\u6c42"},{"location":"4.deployment-and-installation/1.resource-preparations/#_10","text":"\u8fdb\u7a0b \u5efa\u8bae\u6570\u91cf metad\uff08meta \u6570\u636e\u670d\u52a1\u8fdb\u7a0b\uff09 1 storaged\uff08\u5b58\u50a8\u670d\u52a1\u8fdb\u7a0b\uff09 \u22651 graphd\uff08\u67e5\u8be2\u5f15\u64ce\u670d\u52a1\u8fdb\u7a0b\uff09 \u22651 \u4f8b\u5982\u5355\u673a\u6d4b\u8bd5\u73af\u5883\uff0c\u7528\u6237\u53ef\u4ee5\u5728\u673a\u5668\u4e0a\u90e8\u7f72 1 \u4e2a metad\u30011 \u4e2a storaged \u548c 1 \u4e2a graphd \u8fdb\u7a0b\u3002 \u5bf9\u4e8e\u66f4\u5e38\u89c1\u7684\u6d4b\u8bd5\u73af\u5883\uff0c\u4f8b\u5982\u4e09\u53f0\u673a\u5668\u6784\u6210\u7684\u96c6\u7fa4\uff0c\u7528\u6237\u53ef\u4ee5\u6309\u7167\u5982\u4e0b\u65b9\u6848\u90e8\u7f72NebulaGraph\u3002 \u673a\u5668\u540d\u79f0 metad \u8fdb\u7a0b\u6570\u91cf storaged \u8fdb\u7a0b\u6570\u91cf graphd \u8fdb\u7a0b\u6570\u91cf A 1 1 1 B - 1 1 C - 1 1","title":"\u670d\u52a1\u67b6\u6784\u5efa\u8bae"},{"location":"4.deployment-and-installation/1.resource-preparations/#_11","text":"","title":"\u751f\u4ea7\u73af\u5883\u8fd0\u884c\u8981\u6c42"},{"location":"4.deployment-and-installation/1.resource-preparations/#_12","text":"\u5355\u4e2a\u673a\u5668\u7684\u786c\u4ef6\u8981\u6c42\u5982\u4e0b\u3002 \u7c7b\u578b \u8981\u6c42 CPU \u67b6\u6784 x86_64 CPU \u6838\u6570 48 \u5185\u5b58 256 GB \u786c\u76d8 2 * 1.6 TB\uff0cNVMe SSD","title":"\u786c\u4ef6\u8981\u6c42"},{"location":"4.deployment-and-installation/1.resource-preparations/#_13","text":"\u5f53\u524d\u4ec5\u652f\u6301\u5728 Linux \u7cfb\u7edf\u4e2d\u5b89\u88c5NebulaGraph\uff0c\u5efa\u8bae\u5728\u751f\u4ea7\u73af\u5883\u4e2d\u4f7f\u7528\u5185\u6838\u7248\u672c\u4e3a 3.9 \u53ca\u4ee5\u4e0a\u7248\u672c\u7684 Linux \u7cfb\u7edf\u3002 \u7528\u6237\u53ef\u4ee5\u901a\u8fc7\u8c03\u6574\u4e00\u4e9b\u5185\u6838\u53c2\u6570\u6765\u63d0\u9ad8NebulaGraph\u6027\u80fd\uff0c\u8be6\u60c5\u8bf7\u53c2\u89c1 \u5185\u6838\u914d\u7f6e \u3002","title":"\u64cd\u4f5c\u7cfb\u7edf\u8981\u6c42"},{"location":"4.deployment-and-installation/1.resource-preparations/#_14","text":"Danger \u4e0d\u8981 \u8de8\u673a\u623f\u90e8\u7f72\u5355\u4e2a\u96c6\u7fa4\uff08\u4f01\u4e1a\u7248\u652f\u6301\u8de8\u673a\u623f\u96c6\u7fa4\u95f4\u540c\u6b65\uff09\u3002 \u8fdb\u7a0b \u6570\u91cf metad\uff08meta \u6570\u636e\u670d\u52a1\u8fdb\u7a0b\uff09 3 storaged\uff08\u5b58\u50a8\u670d\u52a1\u8fdb\u7a0b\uff09 \u22653 graphd\uff08\u67e5\u8be2\u5f15\u64ce\u670d\u52a1\u8fdb\u7a0b\uff09 \u22653 \u6709\u4e14\u4ec5\u6709 3 \u4e2a metad \u8fdb\u7a0b\uff0c\u6bcf\u4e2a metad \u8fdb\u7a0b\u4f1a\u81ea\u52a8\u521b\u5efa\u5e76\u7ef4\u62a4 meta \u6570\u636e\u7684\u4e00\u4e2a\u526f\u672c\u3002 storaged \u8fdb\u7a0b\u7684\u6570\u91cf\u4e0d\u4f1a\u5f71\u54cd\u56fe\u7a7a\u95f4\u526f\u672c\u7684\u6570\u91cf\u3002 \u7528\u6237\u53ef\u4ee5\u5728\u4e00\u53f0\u673a\u5668\u4e0a\u90e8\u7f72\u591a\u4e2a\u4e0d\u540c\u8fdb\u7a0b\uff0c\u4f8b\u5982\u4e94\u53f0\u673a\u5668\u6784\u6210\u7684\u96c6\u7fa4\uff0c\u7528\u6237\u53ef\u4ee5\u6309\u7167\u5982\u4e0b\u65b9\u6848\u90e8\u7f72NebulaGraph\u3002 \u673a\u5668\u540d\u79f0 metad \u8fdb\u7a0b\u6570\u91cf storaged \u8fdb\u7a0b\u6570\u91cf graphd \u8fdb\u7a0b\u6570\u91cf A 1 1 1 B 1 1 1 C 1 1 1 D - 1 1 E - 1 1","title":"\u670d\u52a1\u67b6\u6784\u5efa\u8bae"},{"location":"4.deployment-and-installation/1.resource-preparations/#nebulagraph_1","text":"\u7528\u6237\u53ef\u4ee5\u9884\u4f30\u4e00\u4e2a 3 \u526f\u672cNebulaGraph\u96c6\u7fa4\u6240\u9700\u7684\u5185\u5b58\u3001\u786c\u76d8\u7a7a\u95f4\u548c\u5206\u533a\u6570\u91cf\u3002 \u8d44\u6e90 \u5355\u4f4d \u8ba1\u7b97\u516c\u5f0f \u8bf4\u660e \u786c\u76d8\u7a7a\u95f4 Bytes \u70b9\u548c\u8fb9\u7684\u603b\u6570 * \u5c5e\u6027\u7684\u5e73\u5747\u5b57\u8282\u5927\u5c0f * 7.5 * 120% \u7531\u4e8e\u8fb9\u5b58\u5728\u5b58\u50a8\u653e\u5927\u73b0\u8c61\uff0c\u6240\u4ee5\u9700\u8981 \u70b9\u548c\u8fb9\u7684\u603b\u6570 * \u5c5e\u6027\u7684\u5e73\u5747\u5b57\u8282\u5927\u5c0f * 7.5 \u7684\u7a7a\u95f4\uff0c\u8be6\u60c5\u8bf7\u53c2\u89c1 \u5207\u8fb9\u4e0e\u5b58\u50a8\u653e\u5927 \u3002 \u5185\u5b58 Bytes [ \u70b9\u548c\u8fb9\u7684\u603b\u6570 * 16 + RocksDB \u5b9e\u4f8b\u6570\u91cf * ( write_buffer_size * max_write_buffer_number ) + \u5757\u7f13\u5b58\u5927\u5c0f ] * 120% \u70b9\u548c\u8fb9\u7684\u603b\u6570 * 16 \u662f BloomFilter \u9700\u8981\u5360\u7528\u7684\u5185\u5b58\u7a7a\u95f4\uff0c write_buffer_size \u548c max_write_buffer_number \u662f RocksDB \u5185\u5b58\u76f8\u5173\u53c2\u6570\uff0c\u8be6\u60c5\u8bf7\u53c2\u89c1 MemTable \u3002\u5757\u7f13\u5b58\u5927\u5c0f\u8bf7\u53c2\u89c1 Memory usage in RocksDB \u3002 \u5206\u533a\u6570\u91cf - \u96c6\u7fa4\u786c\u76d8\u6570\u91cf * disk_partition_num_multiplier disk_partition_num_multiplier \u662f\u4e00\u4e2a\u7528\u4e8e\u8861\u91cf\u786c\u76d8\u6027\u80fd\u7684\u6574\u6570\uff0c\u53d6\u503c\u8303\u56f4 2~20\u3002\u5efa\u8bae\u5728\u8ba1\u7b97 SSD \u786c\u76d8\u7684\u5206\u533a\u6570\u91cf\u65f6\u4f7f\u7528 20 \u505a\u53c2\u6570\u503c\uff0cHDD \u786c\u76d8\u4f7f\u7528 2\u3002 \u95ee\u9898 1\uff1a\u4e3a\u4ec0\u4e48\u786c\u76d8\u7a7a\u95f4\u7684\u9884\u4f30\u516c\u5f0f\u4e2d\u9700\u8981\u4e58\u4ee5 7.5\uff1f \u7b54\uff1a\u56e0\u4e3a\u6839\u636e\u6d4b\u8bd5\u503c\uff0c\u76f8\u6bd4\u539f\u59cb\u6570\u636e\u6587\u4ef6\uff08csv\uff09\uff0c\u5355\u526f\u672c\u6240\u5360\u7528\u7684\u7a7a\u95f4\u7ea6\u4e3a\u4e4b\u524d\u7684 2.5 \u500d\uff1b\u53e6\u5916\u7d22\u5f15\u4f1a\u53e6\u5916\u5360\u7528\u786c\u76d8\u7a7a\u95f4\uff0c\u6bcf\u4e2a\u88ab\u7d22\u5f15\u7684\u70b9\u6216\u8fb9\u5360\u7528 16 \u5b57\u8282\u7684\u5185\u5b58\uff0c\u7d22\u5f15\u7684\u5360\u7528\u786c\u76d8\u7a7a\u95f4\u53ef\u6309\u7ecf\u9a8c\u4f30\u7b97\u4e3a\uff1a\u88ab\u7d22\u5f15\u7684\u70b9\u6216\u8fb9\u603b\u6570 * 50 \u5b57\u8282\u3002 \u95ee\u9898 2\uff1a\u4e3a\u4ec0\u4e48\u78c1\u76d8\u7a7a\u95f4\u548c\u5185\u5b58\u90fd\u8981\u4e58\u4ee5 120%\uff1f \u7b54\uff1a\u989d\u5916\u7684 20% \u7528\u4e8e\u7f13\u51b2\u3002 \u95ee\u9898 3\uff1a\u5982\u4f55\u83b7\u53d6 RocksDB \u5b9e\u4f8b\u6570\u91cf\uff1f \u7b54\uff1a\u5bf9\u4e8e\u793e\u533a\u7248NebulaGraph\uff0c\u6bcf\u4e2a\u56fe\u7a7a\u95f4\u5bf9\u5e94\u4e00\u4e2a RocksDB \u5b9e\u4f8b\uff0c\u5e76\u4e14 --data_path \u9009\u9879\uff08 etc \u76ee\u5f55\u4e0b\u7684 nebula-storaged.conf \u6587\u4ef6\u4e2d\uff09\u4e2d\u7684\u6bcf\u4e2a\u76ee\u5f55\u5bf9\u5e94\u4e00\u4e2a RocksDB \u5b9e\u4f8b\u3002\u5373\uff0cRocksDB \u5b9e\u4f8b\u6570\u91cf = \u56fe\u7a7a\u95f4\u603b\u6570 * \u76ee\u5f55\u603b\u6570\u3002 Note \u7528\u6237\u53ef\u4ee5\u5728\u914d\u7f6e\u6587\u4ef6 nebula-storaged.conf \u4e2d\u6dfb\u52a0 --enable_partitioned_index_filter=true \u6765\u964d\u4f4e bloom \u8fc7\u6ee4\u5668\u5360\u7528\u7684\u5185\u5b58\u5927\u5c0f\uff0c\u4f46\u662f\u5728\u67d0\u4e9b\u968f\u673a\u5bfb\u9053\uff08random-seek\uff09\u7684\u60c5\u51b5\u4e0b\uff0c\u53ef\u80fd\u4f1a\u964d\u4f4e\u8bfb\u53d6\u6027\u80fd\u3002 Caution \u6bcf\u4e2a RocksDB \u5b9e\u4f8b\u5373\u4f7f\u8fd8\u672a\u5199\u5165\u4efb\u4f55\u6570\u636e\u65f6\uff0c\u4ecd\u4f1a\u5360\u7528 70M \u5de6\u53f3\u7684\u78c1\u76d8\u7a7a\u95f4\u3002\u4e00\u4e2a\u5206\u533a\u5bf9\u5e94\u4e00\u4e2a RocksDB \u5b9e\u4f8b\uff0c\u5f53\u5206\u533a\u8bbe\u7f6e\u7279\u522b\u591a\u65f6\uff0c\u4f8b\u5982 100\uff0c\u56fe\u7a7a\u95f4\u521b\u5efa\u540e\u5373\u5360\u7528\u4e86\u5927\u91cf\u78c1\u76d8\u7a7a\u95f4\u3002","title":"NebulaGraph\u8d44\u6e90\u8981\u6c42"},{"location":"4.deployment-and-installation/4.uninstall-nebula-graph/","text":"\u5378\u8f7dNebulaGraph \u00b6 \u672c\u6587\u4ecb\u7ecd\u5982\u4f55\u5378\u8f7dNebulaGraph\u3002 Caution \u5982\u679c\u9700\u8981\u91cd\u65b0\u90e8\u7f72NebulaGraph\uff0c\u8bf7\u52a1\u5fc5\u5b8c\u5168\u5378\u8f7d\u540e\u518d\u91cd\u65b0\u90e8\u7f72\uff0c\u5426\u5219\u53ef\u80fd\u4f1a\u51fa\u73b0\u95ee\u9898\uff0c\u5305\u62ec Meta \u4e0d\u4e00\u81f4\u7b49\u3002 \u524d\u63d0\u6761\u4ef6 \u00b6 \u505c\u6b62NebulaGraph\u670d\u52a1\u3002\u8be6\u60c5\u53c2\u89c1 \u7ba1\u7406NebulaGraph\u670d\u52a1 \u3002 \u6b65\u9aa4 1\uff1a\u5220\u9664\u6570\u636e\u548c\u5143\u6570\u636e\u6587\u4ef6 \u00b6 \u5982\u679c\u5728\u914d\u7f6e\u6587\u4ef6\u5185\u4fee\u6539\u4e86\u6570\u636e\u6587\u4ef6\u7684\u8def\u5f84\uff0c\u53ef\u80fd\u4f1a\u5bfc\u81f4\u5b89\u88c5\u8def\u5f84\u548c\u6570\u636e\u6587\u4ef6\u4fdd\u5b58\u8def\u5f84\u4e0d\u4e00\u81f4\uff0c\u56e0\u6b64\u9700\u8981\u67e5\u770b\u914d\u7f6e\u6587\u4ef6\uff0c\u786e\u8ba4\u6570\u636e\u6587\u4ef6\u4fdd\u5b58\u8def\u5f84\uff0c\u7136\u540e\u624b\u52a8\u5220\u9664\u6570\u636e\u6587\u4ef6\u76ee\u5f55\u3002 Note \u5982\u679c\u662f\u96c6\u7fa4\u67b6\u6784\uff0c\u9700\u8981\u5220\u9664\u6240\u6709 Storage \u548c Meta \u670d\u52a1\u8282\u70b9\u7684\u6570\u636e\u6587\u4ef6\u3002 \u68c0\u67e5 Storage \u670d\u52a1\u7684 disk \u914d\u7f6e \u3002\u4f8b\u5982\uff1a ########## Disk ########## # Root data path. Split by comma. e.g. --data_path=/disk1/path1/,/disk2/path2/ # One path per Rocksdb instance. --data_path = /nebula/data/storage \u68c0\u67e5 metad \u670d\u52a1\u7684\u914d\u7f6e\u6587\u4ef6\uff0c\u627e\u5230\u5bf9\u5e94\u5143\u6570\u636e\u76ee\u5f55\u3002 \u5220\u9664\u4ee5\u4e0a\u6570\u636e\u548c\u5143\u6570\u636e\u76ee\u5f55\u3002 \u6b65\u9aa4 2\uff1a\u5378\u8f7d\u5b89\u88c5\u76ee\u5f55 \u00b6 Note \u5220\u9664\u6574\u4e2a\u5b89\u88c5\u76ee\u5f55\uff0c\u5305\u62ec cluster.id \u6587\u4ef6\u3002 \u5b89\u88c5\u8def\u5f84\u4e3a\u53c2\u6570 --prefix \u6307\u5b9a\u7684\u8def\u5f84\u3002\u9ed8\u8ba4\u8def\u5f84\u4e3a /usr/local/nebula \u3002 \u5378\u8f7d\u7f16\u8bd1\u5b89\u88c5\u7684NebulaGraph \u00b6 \u627e\u5230NebulaGraph\u7684\u5b89\u88c5\u76ee\u5f55\uff0c\u5220\u9664\u6574\u4e2a\u5b89\u88c5\u76ee\u5f55\u3002 \u5378\u8f7d RPM \u5305\u5b89\u88c5\u7684NebulaGraph \u00b6 \u4f7f\u7528\u5982\u4e0b\u547d\u4ee4\u67e5\u770bNebulaGraph\u7248\u672c\u3002 $ rpm -qa | grep \"nebula\" \u8fd4\u56de\u7c7b\u4f3c\u5982\u4e0b\u7ed3\u679c\u3002 nebula-graph-3.6.0-1.x86_64 \u4f7f\u7528\u5982\u4e0b\u547d\u4ee4\u5378\u8f7dNebulaGraph\u3002 sudo rpm -e <nebula_version> \u4f8b\u5982\uff1a sudo rpm -e nebula-graph-3.6.0-1.x86_64 \u5220\u9664\u5b89\u88c5\u76ee\u5f55\u3002 \u5378\u8f7d DEB \u5305\u5b89\u88c5\u7684NebulaGraph \u00b6 \u4f7f\u7528\u5982\u4e0b\u547d\u4ee4\u67e5\u770bNebulaGraph\u7248\u672c\u3002 $ dpkg -l | grep \"nebula\" \u8fd4\u56de\u7c7b\u4f3c\u5982\u4e0b\u7ed3\u679c\u3002 ii nebula-graph 3 .6.0 amd64 NebulaGraph Package built using CMake \u4f7f\u7528\u5982\u4e0b\u547d\u4ee4\u5378\u8f7dNebulaGraph\u3002 sudo dpkg -r <nebula_version> \u4f8b\u5982\uff1a sudo dpkg -r nebula-graph \u5220\u9664\u5b89\u88c5\u76ee\u5f55\u3002 \u5378\u8f7d Docker Compose \u90e8\u7f72\u7684NebulaGraph \u00b6 \u5728\u76ee\u5f55 nebula-docker-compose \u5185\u6267\u884c\u5982\u4e0b\u547d\u4ee4\u505c\u6b62NebulaGraph\u670d\u52a1\u3002 docker-compose down -v \u5220\u9664\u76ee\u5f55 nebula-docker-compose \u3002","title":"\u5378\u8f7d"},{"location":"4.deployment-and-installation/4.uninstall-nebula-graph/#nebulagraph","text":"\u672c\u6587\u4ecb\u7ecd\u5982\u4f55\u5378\u8f7dNebulaGraph\u3002 Caution \u5982\u679c\u9700\u8981\u91cd\u65b0\u90e8\u7f72NebulaGraph\uff0c\u8bf7\u52a1\u5fc5\u5b8c\u5168\u5378\u8f7d\u540e\u518d\u91cd\u65b0\u90e8\u7f72\uff0c\u5426\u5219\u53ef\u80fd\u4f1a\u51fa\u73b0\u95ee\u9898\uff0c\u5305\u62ec Meta \u4e0d\u4e00\u81f4\u7b49\u3002","title":"\u5378\u8f7dNebulaGraph"},{"location":"4.deployment-and-installation/4.uninstall-nebula-graph/#_1","text":"\u505c\u6b62NebulaGraph\u670d\u52a1\u3002\u8be6\u60c5\u53c2\u89c1 \u7ba1\u7406NebulaGraph\u670d\u52a1 \u3002","title":"\u524d\u63d0\u6761\u4ef6"},{"location":"4.deployment-and-installation/4.uninstall-nebula-graph/#1","text":"\u5982\u679c\u5728\u914d\u7f6e\u6587\u4ef6\u5185\u4fee\u6539\u4e86\u6570\u636e\u6587\u4ef6\u7684\u8def\u5f84\uff0c\u53ef\u80fd\u4f1a\u5bfc\u81f4\u5b89\u88c5\u8def\u5f84\u548c\u6570\u636e\u6587\u4ef6\u4fdd\u5b58\u8def\u5f84\u4e0d\u4e00\u81f4\uff0c\u56e0\u6b64\u9700\u8981\u67e5\u770b\u914d\u7f6e\u6587\u4ef6\uff0c\u786e\u8ba4\u6570\u636e\u6587\u4ef6\u4fdd\u5b58\u8def\u5f84\uff0c\u7136\u540e\u624b\u52a8\u5220\u9664\u6570\u636e\u6587\u4ef6\u76ee\u5f55\u3002 Note \u5982\u679c\u662f\u96c6\u7fa4\u67b6\u6784\uff0c\u9700\u8981\u5220\u9664\u6240\u6709 Storage \u548c Meta \u670d\u52a1\u8282\u70b9\u7684\u6570\u636e\u6587\u4ef6\u3002 \u68c0\u67e5 Storage \u670d\u52a1\u7684 disk \u914d\u7f6e \u3002\u4f8b\u5982\uff1a ########## Disk ########## # Root data path. Split by comma. e.g. --data_path=/disk1/path1/,/disk2/path2/ # One path per Rocksdb instance. --data_path = /nebula/data/storage \u68c0\u67e5 metad \u670d\u52a1\u7684\u914d\u7f6e\u6587\u4ef6\uff0c\u627e\u5230\u5bf9\u5e94\u5143\u6570\u636e\u76ee\u5f55\u3002 \u5220\u9664\u4ee5\u4e0a\u6570\u636e\u548c\u5143\u6570\u636e\u76ee\u5f55\u3002","title":"\u6b65\u9aa4 1\uff1a\u5220\u9664\u6570\u636e\u548c\u5143\u6570\u636e\u6587\u4ef6"},{"location":"4.deployment-and-installation/4.uninstall-nebula-graph/#2","text":"Note \u5220\u9664\u6574\u4e2a\u5b89\u88c5\u76ee\u5f55\uff0c\u5305\u62ec cluster.id \u6587\u4ef6\u3002 \u5b89\u88c5\u8def\u5f84\u4e3a\u53c2\u6570 --prefix \u6307\u5b9a\u7684\u8def\u5f84\u3002\u9ed8\u8ba4\u8def\u5f84\u4e3a /usr/local/nebula \u3002","title":"\u6b65\u9aa4 2\uff1a\u5378\u8f7d\u5b89\u88c5\u76ee\u5f55"},{"location":"4.deployment-and-installation/4.uninstall-nebula-graph/#nebulagraph_1","text":"\u627e\u5230NebulaGraph\u7684\u5b89\u88c5\u76ee\u5f55\uff0c\u5220\u9664\u6574\u4e2a\u5b89\u88c5\u76ee\u5f55\u3002","title":"\u5378\u8f7d\u7f16\u8bd1\u5b89\u88c5\u7684NebulaGraph"},{"location":"4.deployment-and-installation/4.uninstall-nebula-graph/#rpm_nebulagraph","text":"\u4f7f\u7528\u5982\u4e0b\u547d\u4ee4\u67e5\u770bNebulaGraph\u7248\u672c\u3002 $ rpm -qa | grep \"nebula\" \u8fd4\u56de\u7c7b\u4f3c\u5982\u4e0b\u7ed3\u679c\u3002 nebula-graph-3.6.0-1.x86_64 \u4f7f\u7528\u5982\u4e0b\u547d\u4ee4\u5378\u8f7dNebulaGraph\u3002 sudo rpm -e <nebula_version> \u4f8b\u5982\uff1a sudo rpm -e nebula-graph-3.6.0-1.x86_64 \u5220\u9664\u5b89\u88c5\u76ee\u5f55\u3002","title":"\u5378\u8f7d RPM \u5305\u5b89\u88c5\u7684NebulaGraph"},{"location":"4.deployment-and-installation/4.uninstall-nebula-graph/#deb_nebulagraph","text":"\u4f7f\u7528\u5982\u4e0b\u547d\u4ee4\u67e5\u770bNebulaGraph\u7248\u672c\u3002 $ dpkg -l | grep \"nebula\" \u8fd4\u56de\u7c7b\u4f3c\u5982\u4e0b\u7ed3\u679c\u3002 ii nebula-graph 3 .6.0 amd64 NebulaGraph Package built using CMake \u4f7f\u7528\u5982\u4e0b\u547d\u4ee4\u5378\u8f7dNebulaGraph\u3002 sudo dpkg -r <nebula_version> \u4f8b\u5982\uff1a sudo dpkg -r nebula-graph \u5220\u9664\u5b89\u88c5\u76ee\u5f55\u3002","title":"\u5378\u8f7d DEB \u5305\u5b89\u88c5\u7684NebulaGraph"},{"location":"4.deployment-and-installation/4.uninstall-nebula-graph/#docker_compose_nebulagraph","text":"\u5728\u76ee\u5f55 nebula-docker-compose \u5185\u6267\u884c\u5982\u4e0b\u547d\u4ee4\u505c\u6b62NebulaGraph\u670d\u52a1\u3002 docker-compose down -v \u5220\u9664\u76ee\u5f55 nebula-docker-compose \u3002","title":"\u5378\u8f7d Docker Compose \u90e8\u7f72\u7684NebulaGraph"},{"location":"4.deployment-and-installation/connect-to-nebula-graph/","text":"\u8fde\u63a5NebulaGraph\u670d\u52a1 \u00b6 \u672c\u6587\u4ecb\u7ecd\u5982\u4f55\u4f7f\u7528\u539f\u751f\u547d\u4ee4\u884c\u5ba2\u6237\u7aef NebulaGraph Console \u8fde\u63a5NebulaGraph\u3002 Caution \u9996\u6b21\u8fde\u63a5\u5230NebulaGraph\u540e\uff0c\u5fc5\u987b\u5148 \u6ce8\u518c Storage \u670d\u52a1 \uff0c\u624d\u80fd\u6b63\u5e38\u67e5\u8be2\u6570\u636e\u3002 NebulaGraph\u652f\u6301\u591a\u79cd\u7c7b\u578b\u7684\u5ba2\u6237\u7aef\uff0c\u5305\u62ec\u547d\u4ee4\u884c\u5ba2\u6237\u7aef\u3001\u53ef\u89c6\u5316\u754c\u9762\u5ba2\u6237\u7aef\u548c\u6d41\u884c\u7f16\u7a0b\u8bed\u8a00\u5ba2\u6237\u7aef\u3002\u8be6\u60c5\u53c2\u89c1 \u5ba2\u6237\u7aef\u5217\u8868 \u3002 \u524d\u63d0\u6761\u4ef6 \u00b6 NebulaGraph\u670d\u52a1\u5df2 \u542f\u52a8 \u3002 \u8fd0\u884c NebulaGraph Console \u7684\u673a\u5668\u548c\u8fd0\u884cNebulaGraph\u7684\u670d\u52a1\u5668\u7f51\u7edc\u4e92\u901a\u3002 NebulaGraph Console \u7684\u7248\u672c\u517c\u5bb9NebulaGraph\u7684\u7248\u672c\u3002 Note \u7248\u672c\u76f8\u540c\u7684 NebulaGraph Console \u548cNebulaGraph\u517c\u5bb9\u7a0b\u5ea6\u6700\u9ad8\uff0c\u7248\u672c\u4e0d\u540c\u7684 NebulaGraph Console \u8fde\u63a5NebulaGraph\u65f6\uff0c\u53ef\u80fd\u4f1a\u6709\u517c\u5bb9\u95ee\u9898\uff0c\u6216\u8005\u65e0\u6cd5\u8fde\u63a5\u5e76\u62a5\u9519 incompatible version between client and server \u3002 \u64cd\u4f5c\u6b65\u9aa4 \u00b6 \u5728 NebulaGraph Console \u4e0b\u8f7d\u9875\u9762 \uff0c\u786e\u8ba4\u9700\u8981\u7684\u7248\u672c\uff0c\u5355\u51fb Assets \u3002 Note \u5efa\u8bae\u9009\u62e9 \u6700\u65b0 \u7248\u672c\u3002 \u5728 Assets \u533a\u57df\u627e\u5230\u673a\u5668\u8fd0\u884c\u6240\u9700\u7684\u4e8c\u8fdb\u5236\u6587\u4ef6\uff0c\u4e0b\u8f7d\u6587\u4ef6\u5230\u673a\u5668\u4e0a\u3002 \uff08\u53ef\u9009\uff09\u4e3a\u65b9\u4fbf\u4f7f\u7528\uff0c\u91cd\u547d\u540d\u6587\u4ef6\u4e3a nebula-console \u3002 Note \u5728 Windows \u7cfb\u7edf\u4e2d\uff0c\u8bf7\u91cd\u547d\u540d\u4e3a nebula-console.exe \u3002 \u5728\u8fd0\u884c NebulaGraph Console \u7684\u673a\u5668\u4e0a\u6267\u884c\u5982\u4e0b\u547d\u4ee4\uff0c\u4e3a\u7528\u6237\u6388\u4e88 nebula-console \u6587\u4ef6\u7684\u6267\u884c\u6743\u9650\u3002 Note Windows \u7cfb\u7edf\u8bf7\u8df3\u8fc7\u6b64\u6b65\u9aa4\u3002 $ chmod 111 nebula-console \u5728\u547d\u4ee4\u884c\u754c\u9762\u4e2d\uff0c\u5207\u6362\u5de5\u4f5c\u76ee\u5f55\u81f3 nebula-console \u6587\u4ef6\u6240\u5728\u76ee\u5f55\u3002 \u6267\u884c\u5982\u4e0b\u547d\u4ee4\u8fde\u63a5NebulaGraph\u3002 Linux \u6216 macOS $ ./nebula-console -addr <ip> -port <port> -u <username> -p <password> [ -t 120 ] [ -e \"nGQL_statement\" | -f filename.nGQL ] Windows > nebula-console . exe -addr < ip > -port < port > -u < username > -p < password > [ -t 120 ] [ -e \"nGQL_statement\" | -f filename . nGQL ] \u53c2\u6570\u8bf4\u660e\u5982\u4e0b\u3002 \u53c2\u6570 \u8bf4\u660e -h/-help \u663e\u793a\u5e2e\u52a9\u83dc\u5355\u3002 -addr/-address \u8bbe\u7f6e\u8981\u8fde\u63a5\u7684 Graph \u670d\u52a1\u7684 IP \u5730\u5740\u3002\u9ed8\u8ba4\u5730\u5740\u4e3a 127.0.0.1\u3002 -P/-port \u8bbe\u7f6e\u8981\u8fde\u63a5\u7684 Graph \u670d\u52a1\u7684\u7aef\u53e3\u3002\u9ed8\u8ba4\u7aef\u53e3\u4e3a 9669\u3002 -u/-user \u8bbe\u7f6eNebulaGraph\u8d26\u53f7\u7684\u7528\u6237\u540d\u3002\u672a\u542f\u7528\u8eab\u4efd\u8ba4\u8bc1\u65f6\uff0c\u53ef\u4ee5\u4f7f\u7528\u4efb\u610f\u5df2\u5b58\u5728\u7684\u7528\u6237\u540d\uff08\u9ed8\u8ba4\u4e3a root \uff09\u3002 -p/-password \u8bbe\u7f6e\u7528\u6237\u540d\u5bf9\u5e94\u7684\u5bc6\u7801\u3002\u672a\u542f\u7528\u8eab\u4efd\u8ba4\u8bc1\u65f6\uff0c\u5bc6\u7801\u53ef\u4ee5\u586b\u5199\u4efb\u610f\u5b57\u7b26\u3002 -t/-timeout \u8bbe\u7f6e\u6574\u6570\u7c7b\u578b\u7684\u8fde\u63a5\u8d85\u65f6\u65f6\u95f4\u3002\u5355\u4f4d\u4e3a\u6beb\u79d2\uff0c\u9ed8\u8ba4\u503c\u4e3a 120\u3002 -e/-eval \u8bbe\u7f6e\u5b57\u7b26\u4e32\u7c7b\u578b\u7684 nGQL \u8bed\u53e5\u3002\u8fde\u63a5\u6210\u529f\u540e\u4f1a\u6267\u884c\u4e00\u6b21\u8be5\u8bed\u53e5\u5e76\u8fd4\u56de\u7ed3\u679c\uff0c\u7136\u540e\u81ea\u52a8\u65ad\u5f00\u8fde\u63a5\u3002 -f/-file \u8bbe\u7f6e\u5b58\u50a8 nGQL \u8bed\u53e5\u7684\u6587\u4ef6\u7684\u8def\u5f84\u3002\u8fde\u63a5\u6210\u529f\u540e\u4f1a\u6267\u884c\u8be5\u6587\u4ef6\u5185\u7684 nGQL \u8bed\u53e5\u5e76\u8fd4\u56de\u7ed3\u679c\uff0c\u6267\u884c\u5b8c\u6bd5\u540e\u81ea\u52a8\u65ad\u5f00\u8fde\u63a5\u3002 -enable_ssl \u8fde\u63a5NebulaGraph\u65f6\u4f7f\u7528 SSL \u52a0\u5bc6\u3002 -ssl_root_ca_path \u6307\u5b9a CA \u8bc1\u4e66\u7684\u5b58\u50a8\u8def\u5f84\u3002 -ssl_cert_path \u6307\u5b9a CRT \u8bc1\u4e66\u7684\u5b58\u50a8\u8def\u5f84\u3002 -ssl_private_key_path \u6307\u5b9a\u79c1\u94a5\u6587\u4ef6\u7684\u5b58\u50a8\u8def\u5f84\u3002 \u66f4\u591a\u53c2\u6570\u53c2\u89c1 \u9879\u76ee\u4ed3\u5e93 \u3002","title":"\u8fde\u63a5\u670d\u52a1"},{"location":"4.deployment-and-installation/connect-to-nebula-graph/#nebulagraph","text":"\u672c\u6587\u4ecb\u7ecd\u5982\u4f55\u4f7f\u7528\u539f\u751f\u547d\u4ee4\u884c\u5ba2\u6237\u7aef NebulaGraph Console \u8fde\u63a5NebulaGraph\u3002 Caution \u9996\u6b21\u8fde\u63a5\u5230NebulaGraph\u540e\uff0c\u5fc5\u987b\u5148 \u6ce8\u518c Storage \u670d\u52a1 \uff0c\u624d\u80fd\u6b63\u5e38\u67e5\u8be2\u6570\u636e\u3002 NebulaGraph\u652f\u6301\u591a\u79cd\u7c7b\u578b\u7684\u5ba2\u6237\u7aef\uff0c\u5305\u62ec\u547d\u4ee4\u884c\u5ba2\u6237\u7aef\u3001\u53ef\u89c6\u5316\u754c\u9762\u5ba2\u6237\u7aef\u548c\u6d41\u884c\u7f16\u7a0b\u8bed\u8a00\u5ba2\u6237\u7aef\u3002\u8be6\u60c5\u53c2\u89c1 \u5ba2\u6237\u7aef\u5217\u8868 \u3002","title":"\u8fde\u63a5NebulaGraph\u670d\u52a1"},{"location":"4.deployment-and-installation/connect-to-nebula-graph/#_1","text":"NebulaGraph\u670d\u52a1\u5df2 \u542f\u52a8 \u3002 \u8fd0\u884c NebulaGraph Console \u7684\u673a\u5668\u548c\u8fd0\u884cNebulaGraph\u7684\u670d\u52a1\u5668\u7f51\u7edc\u4e92\u901a\u3002 NebulaGraph Console \u7684\u7248\u672c\u517c\u5bb9NebulaGraph\u7684\u7248\u672c\u3002 Note \u7248\u672c\u76f8\u540c\u7684 NebulaGraph Console \u548cNebulaGraph\u517c\u5bb9\u7a0b\u5ea6\u6700\u9ad8\uff0c\u7248\u672c\u4e0d\u540c\u7684 NebulaGraph Console \u8fde\u63a5NebulaGraph\u65f6\uff0c\u53ef\u80fd\u4f1a\u6709\u517c\u5bb9\u95ee\u9898\uff0c\u6216\u8005\u65e0\u6cd5\u8fde\u63a5\u5e76\u62a5\u9519 incompatible version between client and server \u3002","title":"\u524d\u63d0\u6761\u4ef6"},{"location":"4.deployment-and-installation/connect-to-nebula-graph/#_2","text":"\u5728 NebulaGraph Console \u4e0b\u8f7d\u9875\u9762 \uff0c\u786e\u8ba4\u9700\u8981\u7684\u7248\u672c\uff0c\u5355\u51fb Assets \u3002 Note \u5efa\u8bae\u9009\u62e9 \u6700\u65b0 \u7248\u672c\u3002 \u5728 Assets \u533a\u57df\u627e\u5230\u673a\u5668\u8fd0\u884c\u6240\u9700\u7684\u4e8c\u8fdb\u5236\u6587\u4ef6\uff0c\u4e0b\u8f7d\u6587\u4ef6\u5230\u673a\u5668\u4e0a\u3002 \uff08\u53ef\u9009\uff09\u4e3a\u65b9\u4fbf\u4f7f\u7528\uff0c\u91cd\u547d\u540d\u6587\u4ef6\u4e3a nebula-console \u3002 Note \u5728 Windows \u7cfb\u7edf\u4e2d\uff0c\u8bf7\u91cd\u547d\u540d\u4e3a nebula-console.exe \u3002 \u5728\u8fd0\u884c NebulaGraph Console \u7684\u673a\u5668\u4e0a\u6267\u884c\u5982\u4e0b\u547d\u4ee4\uff0c\u4e3a\u7528\u6237\u6388\u4e88 nebula-console \u6587\u4ef6\u7684\u6267\u884c\u6743\u9650\u3002 Note Windows \u7cfb\u7edf\u8bf7\u8df3\u8fc7\u6b64\u6b65\u9aa4\u3002 $ chmod 111 nebula-console \u5728\u547d\u4ee4\u884c\u754c\u9762\u4e2d\uff0c\u5207\u6362\u5de5\u4f5c\u76ee\u5f55\u81f3 nebula-console \u6587\u4ef6\u6240\u5728\u76ee\u5f55\u3002 \u6267\u884c\u5982\u4e0b\u547d\u4ee4\u8fde\u63a5NebulaGraph\u3002 Linux \u6216 macOS $ ./nebula-console -addr <ip> -port <port> -u <username> -p <password> [ -t 120 ] [ -e \"nGQL_statement\" | -f filename.nGQL ] Windows > nebula-console . exe -addr < ip > -port < port > -u < username > -p < password > [ -t 120 ] [ -e \"nGQL_statement\" | -f filename . nGQL ] \u53c2\u6570\u8bf4\u660e\u5982\u4e0b\u3002 \u53c2\u6570 \u8bf4\u660e -h/-help \u663e\u793a\u5e2e\u52a9\u83dc\u5355\u3002 -addr/-address \u8bbe\u7f6e\u8981\u8fde\u63a5\u7684 Graph \u670d\u52a1\u7684 IP \u5730\u5740\u3002\u9ed8\u8ba4\u5730\u5740\u4e3a 127.0.0.1\u3002 -P/-port \u8bbe\u7f6e\u8981\u8fde\u63a5\u7684 Graph \u670d\u52a1\u7684\u7aef\u53e3\u3002\u9ed8\u8ba4\u7aef\u53e3\u4e3a 9669\u3002 -u/-user \u8bbe\u7f6eNebulaGraph\u8d26\u53f7\u7684\u7528\u6237\u540d\u3002\u672a\u542f\u7528\u8eab\u4efd\u8ba4\u8bc1\u65f6\uff0c\u53ef\u4ee5\u4f7f\u7528\u4efb\u610f\u5df2\u5b58\u5728\u7684\u7528\u6237\u540d\uff08\u9ed8\u8ba4\u4e3a root \uff09\u3002 -p/-password \u8bbe\u7f6e\u7528\u6237\u540d\u5bf9\u5e94\u7684\u5bc6\u7801\u3002\u672a\u542f\u7528\u8eab\u4efd\u8ba4\u8bc1\u65f6\uff0c\u5bc6\u7801\u53ef\u4ee5\u586b\u5199\u4efb\u610f\u5b57\u7b26\u3002 -t/-timeout \u8bbe\u7f6e\u6574\u6570\u7c7b\u578b\u7684\u8fde\u63a5\u8d85\u65f6\u65f6\u95f4\u3002\u5355\u4f4d\u4e3a\u6beb\u79d2\uff0c\u9ed8\u8ba4\u503c\u4e3a 120\u3002 -e/-eval \u8bbe\u7f6e\u5b57\u7b26\u4e32\u7c7b\u578b\u7684 nGQL \u8bed\u53e5\u3002\u8fde\u63a5\u6210\u529f\u540e\u4f1a\u6267\u884c\u4e00\u6b21\u8be5\u8bed\u53e5\u5e76\u8fd4\u56de\u7ed3\u679c\uff0c\u7136\u540e\u81ea\u52a8\u65ad\u5f00\u8fde\u63a5\u3002 -f/-file \u8bbe\u7f6e\u5b58\u50a8 nGQL \u8bed\u53e5\u7684\u6587\u4ef6\u7684\u8def\u5f84\u3002\u8fde\u63a5\u6210\u529f\u540e\u4f1a\u6267\u884c\u8be5\u6587\u4ef6\u5185\u7684 nGQL \u8bed\u53e5\u5e76\u8fd4\u56de\u7ed3\u679c\uff0c\u6267\u884c\u5b8c\u6bd5\u540e\u81ea\u52a8\u65ad\u5f00\u8fde\u63a5\u3002 -enable_ssl \u8fde\u63a5NebulaGraph\u65f6\u4f7f\u7528 SSL \u52a0\u5bc6\u3002 -ssl_root_ca_path \u6307\u5b9a CA \u8bc1\u4e66\u7684\u5b58\u50a8\u8def\u5f84\u3002 -ssl_cert_path \u6307\u5b9a CRT \u8bc1\u4e66\u7684\u5b58\u50a8\u8def\u5f84\u3002 -ssl_private_key_path \u6307\u5b9a\u79c1\u94a5\u6587\u4ef6\u7684\u5b58\u50a8\u8def\u5f84\u3002 \u66f4\u591a\u53c2\u6570\u53c2\u89c1 \u9879\u76ee\u4ed3\u5e93 \u3002","title":"\u64cd\u4f5c\u6b65\u9aa4"},{"location":"4.deployment-and-installation/manage-service/","text":"\u7ba1\u7406NebulaGraph\u670d\u52a1 \u00b6 NebulaGraph\u652f\u6301\u901a\u8fc7\u811a\u672c\u7ba1\u7406\u670d\u52a1\u3002 \u4f7f\u7528\u811a\u672c\u7ba1\u7406\u670d\u52a1 \u00b6 \u4f7f\u7528\u811a\u672c nebula.service \u7ba1\u7406\u670d\u52a1\uff0c\u5305\u62ec\u542f\u52a8\u3001\u505c\u6b62\u3001\u91cd\u542f\u3001\u4e2d\u6b62\u548c\u67e5\u770b\u3002 Note nebula.service \u7684\u9ed8\u8ba4\u8def\u5f84\u662f /usr/local/nebula/scripts \uff0c\u5982\u679c\u4fee\u6539\u8fc7\u5b89\u88c5\u8def\u5f84\uff0c\u8bf7\u4f7f\u7528\u5b9e\u9645\u8def\u5f84\u3002 \u8bed\u6cd5 \u00b6 $ sudo /usr/local/nebula/scripts/nebula.service [ -v ] [ -c <config_file_path> ] <start | stop | restart | kill | status> <metad | graphd | storaged | all> \u53c2\u6570 \u8bf4\u660e -v \u663e\u793a\u8be6\u7ec6\u8c03\u8bd5\u4fe1\u606f\u3002 -c \u6307\u5b9a\u914d\u7f6e\u6587\u4ef6\u8def\u5f84\uff0c\u9ed8\u8ba4\u8def\u5f84\u4e3a /usr/local/nebula/etc/ \u3002 start \u542f\u52a8\u670d\u52a1\u3002 stop \u505c\u6b62\u670d\u52a1\u3002 restart \u91cd\u542f\u670d\u52a1\u3002 kill \u4e2d\u6b62\u670d\u52a1\u3002 status \u67e5\u770b\u670d\u52a1\u72b6\u6001\u3002 metad \u7ba1\u7406 Meta \u670d\u52a1\u3002 graphd \u7ba1\u7406 Graph \u670d\u52a1\u3002 storaged \u7ba1\u7406 Storage \u670d\u52a1\u3002 all \u7ba1\u7406\u6240\u6709\u670d\u52a1\u3002 \u542f\u52a8NebulaGraph\u670d\u52a1 \u00b6 \u6267\u884c\u5982\u4e0b\u547d\u4ee4\u542f\u52a8\u670d\u52a1\uff1a $ sudo /usr/local/nebula/scripts/nebula.service start all [ INFO ] Starting nebula-metad... [ INFO ] Done [ INFO ] Starting nebula-graphd... [ INFO ] Done [ INFO ] Starting nebula-storaged... [ INFO ] Done \u505c\u6b62NebulaGraph\u670d\u52a1 \u00b6 Danger \u8bf7\u52ff\u4f7f\u7528 kill -9 \u547d\u4ee4\u5f3a\u5236\u7ec8\u6b62\u8fdb\u7a0b\uff0c\u5426\u5219\u53ef\u80fd\u8f83\u5c0f\u6982\u7387\u51fa\u73b0\u6570\u636e\u4e22\u5931\u3002 \u6267\u884c\u5982\u4e0b\u547d\u4ee4\u505c\u6b62NebulaGraph\u670d\u52a1\uff1a $ sudo /usr/local/nebula/scripts/nebula.service stop all [ INFO ] Stopping nebula-metad... [ INFO ] Done [ INFO ] Stopping nebula-graphd... [ INFO ] Done [ INFO ] Stopping nebula-storaged... [ INFO ] Done \u67e5\u770bNebulaGraph\u670d\u52a1 \u00b6 \u6267\u884c\u5982\u4e0b\u547d\u4ee4\u67e5\u770bNebulaGraph\u670d\u52a1\u72b6\u6001\uff1a $ sudo /usr/local/nebula/scripts/nebula.service status all \u5982\u679c\u8fd4\u56de\u5982\u4e0b\u7ed3\u679c\uff0c\u8868\u793aNebulaGraph\u670d\u52a1\u6b63\u5e38\u8fd0\u884c\u3002 [ INFO ] nebula-metad ( 33fd35e ) : Running as 29020 , Listening on 9559 [ INFO ] nebula-graphd ( 33fd35e ) : Running as 29095 , Listening on 9669 [ WARN ] nebula-storaged after v3.0.0 will not start service until it is added to cluster. [ WARN ] See Manage Storage hosts:ADD HOSTS in https://docs.nebula-graph.io/ [ INFO ] nebula-storaged ( 33fd35e ) : Running as 29147 , Listening on 9779 Note \u6b63\u5e38\u542f\u52a8NebulaGraph\u540e\uff0c nebula-storaged \u8fdb\u7a0b\u7684\u7aef\u53e3\u663e\u793a\u7ea2\u8272\u3002\u8fd9\u662f\u56e0\u4e3a nebula-storaged \u5728\u542f\u52a8\u6d41\u7a0b\u4e2d\u4f1a\u7b49\u5f85 nebula-metad \u6dfb\u52a0\u5f53\u524d Storage \u670d\u52a1\uff0c\u5f53\u524d Storage \u670d\u52a1\u6536\u5230 Ready \u4fe1\u53f7\u540e\u624d\u4f1a\u6b63\u5f0f\u542f\u52a8\u670d\u52a1\u3002\u4ece 3.0.0 \u7248\u672c\u5f00\u59cb\uff0c\u5728\u914d\u7f6e\u6587\u4ef6\u4e2d\u6dfb\u52a0\u7684 Storage \u8282\u70b9\u65e0\u6cd5\u76f4\u63a5\u8bfb\u5199\uff0c\u914d\u7f6e\u6587\u4ef6\u7684\u4f5c\u7528\u4ec5\u4ec5\u662f\u5c06 Storage \u8282\u70b9\u6ce8\u518c\u81f3 Meta \u670d\u52a1\u4e2d\u3002\u5fc5\u987b\u4f7f\u7528 ADD HOSTS \u547d\u4ee4\u540e\uff0c\u624d\u80fd\u6b63\u5e38\u8bfb\u5199 Storage \u8282\u70b9\u3002\u66f4\u591a\u4fe1\u606f\uff0c\u53c2\u89c1 \u7ba1\u7406 Storage \u4e3b\u673a \u3002 \u5982\u679c\u8fd4\u56de\u7c7b\u4f3c\u5982\u4e0b\u7ed3\u679c\uff0c\u8868\u793aNebulaGraph\u670d\u52a1\u5f02\u5e38\uff0c\u53ef\u4ee5\u6839\u636e\u5f02\u5e38\u670d\u52a1\u4fe1\u606f\u8fdb\u4e00\u6b65\u6392\u67e5\uff0c\u6216\u8005\u5728 NebulaGraph\u793e\u533a \u5bfb\u6c42\u5e2e\u52a9\u3002 [ INFO ] nebula-metad: Running as 25600 , Listening on 9559 [ INFO ] nebula-graphd: Exited [ INFO ] nebula-storaged: Running as 25646 , Listening on 9779 NebulaGraph\u670d\u52a1\u7531 Meta \u670d\u52a1\u3001Graph \u670d\u52a1\u548c Storage \u670d\u52a1\u5171\u540c\u63d0\u4f9b\uff0c\u8fd9\u4e09\u79cd\u670d\u52a1\u7684\u914d\u7f6e\u6587\u4ef6\u90fd\u4fdd\u5b58\u5728\u5b89\u88c5\u76ee\u5f55\u7684 etc \u76ee\u5f55\u5185\uff0c\u9ed8\u8ba4\u8def\u5f84\u4e3a /usr/local/nebula/etc/ \uff0c\u7528\u6237\u53ef\u4ee5\u68c0\u67e5\u76f8\u5e94\u7684\u914d\u7f6e\u6587\u4ef6\u6392\u67e5\u95ee\u9898\u3002 \u4e0b\u4e00\u6b65 \u00b6 \u8fde\u63a5NebulaGraph","title":"\u7ba1\u7406\u670d\u52a1"},{"location":"4.deployment-and-installation/manage-service/#nebulagraph","text":"NebulaGraph\u652f\u6301\u901a\u8fc7\u811a\u672c\u7ba1\u7406\u670d\u52a1\u3002","title":"\u7ba1\u7406NebulaGraph\u670d\u52a1"},{"location":"4.deployment-and-installation/manage-service/#_1","text":"\u4f7f\u7528\u811a\u672c nebula.service \u7ba1\u7406\u670d\u52a1\uff0c\u5305\u62ec\u542f\u52a8\u3001\u505c\u6b62\u3001\u91cd\u542f\u3001\u4e2d\u6b62\u548c\u67e5\u770b\u3002 Note nebula.service \u7684\u9ed8\u8ba4\u8def\u5f84\u662f /usr/local/nebula/scripts \uff0c\u5982\u679c\u4fee\u6539\u8fc7\u5b89\u88c5\u8def\u5f84\uff0c\u8bf7\u4f7f\u7528\u5b9e\u9645\u8def\u5f84\u3002","title":"\u4f7f\u7528\u811a\u672c\u7ba1\u7406\u670d\u52a1"},{"location":"4.deployment-and-installation/manage-service/#_2","text":"$ sudo /usr/local/nebula/scripts/nebula.service [ -v ] [ -c <config_file_path> ] <start | stop | restart | kill | status> <metad | graphd | storaged | all> \u53c2\u6570 \u8bf4\u660e -v \u663e\u793a\u8be6\u7ec6\u8c03\u8bd5\u4fe1\u606f\u3002 -c \u6307\u5b9a\u914d\u7f6e\u6587\u4ef6\u8def\u5f84\uff0c\u9ed8\u8ba4\u8def\u5f84\u4e3a /usr/local/nebula/etc/ \u3002 start \u542f\u52a8\u670d\u52a1\u3002 stop \u505c\u6b62\u670d\u52a1\u3002 restart \u91cd\u542f\u670d\u52a1\u3002 kill \u4e2d\u6b62\u670d\u52a1\u3002 status \u67e5\u770b\u670d\u52a1\u72b6\u6001\u3002 metad \u7ba1\u7406 Meta \u670d\u52a1\u3002 graphd \u7ba1\u7406 Graph \u670d\u52a1\u3002 storaged \u7ba1\u7406 Storage \u670d\u52a1\u3002 all \u7ba1\u7406\u6240\u6709\u670d\u52a1\u3002","title":"\u8bed\u6cd5"},{"location":"4.deployment-and-installation/manage-service/#nebulagraph_1","text":"\u6267\u884c\u5982\u4e0b\u547d\u4ee4\u542f\u52a8\u670d\u52a1\uff1a $ sudo /usr/local/nebula/scripts/nebula.service start all [ INFO ] Starting nebula-metad... [ INFO ] Done [ INFO ] Starting nebula-graphd... [ INFO ] Done [ INFO ] Starting nebula-storaged... [ INFO ] Done","title":"\u542f\u52a8NebulaGraph\u670d\u52a1"},{"location":"4.deployment-and-installation/manage-service/#nebulagraph_2","text":"Danger \u8bf7\u52ff\u4f7f\u7528 kill -9 \u547d\u4ee4\u5f3a\u5236\u7ec8\u6b62\u8fdb\u7a0b\uff0c\u5426\u5219\u53ef\u80fd\u8f83\u5c0f\u6982\u7387\u51fa\u73b0\u6570\u636e\u4e22\u5931\u3002 \u6267\u884c\u5982\u4e0b\u547d\u4ee4\u505c\u6b62NebulaGraph\u670d\u52a1\uff1a $ sudo /usr/local/nebula/scripts/nebula.service stop all [ INFO ] Stopping nebula-metad... [ INFO ] Done [ INFO ] Stopping nebula-graphd... [ INFO ] Done [ INFO ] Stopping nebula-storaged... [ INFO ] Done","title":"\u505c\u6b62NebulaGraph\u670d\u52a1"},{"location":"4.deployment-and-installation/manage-service/#nebulagraph_3","text":"\u6267\u884c\u5982\u4e0b\u547d\u4ee4\u67e5\u770bNebulaGraph\u670d\u52a1\u72b6\u6001\uff1a $ sudo /usr/local/nebula/scripts/nebula.service status all \u5982\u679c\u8fd4\u56de\u5982\u4e0b\u7ed3\u679c\uff0c\u8868\u793aNebulaGraph\u670d\u52a1\u6b63\u5e38\u8fd0\u884c\u3002 [ INFO ] nebula-metad ( 33fd35e ) : Running as 29020 , Listening on 9559 [ INFO ] nebula-graphd ( 33fd35e ) : Running as 29095 , Listening on 9669 [ WARN ] nebula-storaged after v3.0.0 will not start service until it is added to cluster. [ WARN ] See Manage Storage hosts:ADD HOSTS in https://docs.nebula-graph.io/ [ INFO ] nebula-storaged ( 33fd35e ) : Running as 29147 , Listening on 9779 Note \u6b63\u5e38\u542f\u52a8NebulaGraph\u540e\uff0c nebula-storaged \u8fdb\u7a0b\u7684\u7aef\u53e3\u663e\u793a\u7ea2\u8272\u3002\u8fd9\u662f\u56e0\u4e3a nebula-storaged \u5728\u542f\u52a8\u6d41\u7a0b\u4e2d\u4f1a\u7b49\u5f85 nebula-metad \u6dfb\u52a0\u5f53\u524d Storage \u670d\u52a1\uff0c\u5f53\u524d Storage \u670d\u52a1\u6536\u5230 Ready \u4fe1\u53f7\u540e\u624d\u4f1a\u6b63\u5f0f\u542f\u52a8\u670d\u52a1\u3002\u4ece 3.0.0 \u7248\u672c\u5f00\u59cb\uff0c\u5728\u914d\u7f6e\u6587\u4ef6\u4e2d\u6dfb\u52a0\u7684 Storage \u8282\u70b9\u65e0\u6cd5\u76f4\u63a5\u8bfb\u5199\uff0c\u914d\u7f6e\u6587\u4ef6\u7684\u4f5c\u7528\u4ec5\u4ec5\u662f\u5c06 Storage \u8282\u70b9\u6ce8\u518c\u81f3 Meta \u670d\u52a1\u4e2d\u3002\u5fc5\u987b\u4f7f\u7528 ADD HOSTS \u547d\u4ee4\u540e\uff0c\u624d\u80fd\u6b63\u5e38\u8bfb\u5199 Storage \u8282\u70b9\u3002\u66f4\u591a\u4fe1\u606f\uff0c\u53c2\u89c1 \u7ba1\u7406 Storage \u4e3b\u673a \u3002 \u5982\u679c\u8fd4\u56de\u7c7b\u4f3c\u5982\u4e0b\u7ed3\u679c\uff0c\u8868\u793aNebulaGraph\u670d\u52a1\u5f02\u5e38\uff0c\u53ef\u4ee5\u6839\u636e\u5f02\u5e38\u670d\u52a1\u4fe1\u606f\u8fdb\u4e00\u6b65\u6392\u67e5\uff0c\u6216\u8005\u5728 NebulaGraph\u793e\u533a \u5bfb\u6c42\u5e2e\u52a9\u3002 [ INFO ] nebula-metad: Running as 25600 , Listening on 9559 [ INFO ] nebula-graphd: Exited [ INFO ] nebula-storaged: Running as 25646 , Listening on 9779 NebulaGraph\u670d\u52a1\u7531 Meta \u670d\u52a1\u3001Graph \u670d\u52a1\u548c Storage \u670d\u52a1\u5171\u540c\u63d0\u4f9b\uff0c\u8fd9\u4e09\u79cd\u670d\u52a1\u7684\u914d\u7f6e\u6587\u4ef6\u90fd\u4fdd\u5b58\u5728\u5b89\u88c5\u76ee\u5f55\u7684 etc \u76ee\u5f55\u5185\uff0c\u9ed8\u8ba4\u8def\u5f84\u4e3a /usr/local/nebula/etc/ \uff0c\u7528\u6237\u53ef\u4ee5\u68c0\u67e5\u76f8\u5e94\u7684\u914d\u7f6e\u6587\u4ef6\u6392\u67e5\u95ee\u9898\u3002","title":"\u67e5\u770bNebulaGraph\u670d\u52a1"},{"location":"4.deployment-and-installation/manage-service/#_3","text":"\u8fde\u63a5NebulaGraph","title":"\u4e0b\u4e00\u6b65"},{"location":"4.deployment-and-installation/manage-storage-host/","text":"\u7ba1\u7406 Storage \u4e3b\u673a \u00b6 \u4ece 3.0.0 \u7248\u672c\u5f00\u59cb\uff0c\u5728\u914d\u7f6e\u6587\u4ef6\u4e2d\u6dfb\u52a0\u7684 Storage \u4e3b\u673a\u65e0\u6cd5\u76f4\u63a5\u8bfb\u5199\uff0c\u914d\u7f6e\u6587\u4ef6\u7684\u4f5c\u7528\u4ec5\u4ec5\u662f\u5c06 Storage \u4e3b\u673a\u6ce8\u518c\u81f3 Meta \u670d\u52a1\u4e2d\u3002\u5fc5\u987b\u4f7f\u7528 ADD HOSTS \u547d\u4ee4\u540e\uff0c\u624d\u80fd\u6b63\u5e38\u8bfb\u5199 Storage \u4e3b\u673a\u3002 \u524d\u63d0\u6761\u4ef6 \u00b6 \u5df2\u7ecf \u8fde\u63a5\u670d\u52a1 \u589e\u52a0 Storage \u4e3b\u673a \u00b6 \u5411\u96c6\u7fa4\u4e2d\u589e\u52a0 Storage \u4e3b\u673a\u3002 nebula> ADD HOSTS <ip>:<port> [,<ip>:<port> ...]; nebula> ADD HOSTS \"<hostname>\":<port> [,\"<hostname>\":<port> ...]; Note \u589e\u52a0 Storage \u4e3b\u673a\u5728 \u4e0b\u4e00\u4e2a \u5fc3\u8df3\u5468\u671f\u4e4b\u540e\u624d\u80fd\u751f\u6548\uff0c\u4e3a\u786e\u4fdd\u6570\u636e\u540c\u6b65\uff0c\u8bf7\u7b49\u5f85 2 \u4e2a\u5fc3\u8df3\u5468\u671f\uff0820 \u79d2\uff09\uff0c\u7136\u540e\u6267\u884c SHOW HOSTS \u67e5\u770b\u662f\u5426\u5728\u7ebf\u3002 IP\u5730\u5740\u548c\u7aef\u53e3\u8bf7\u548c\u914d\u7f6e\u6587\u4ef6\u4e2d\u7684\u8bbe\u7f6e\u4fdd\u6301\u4e00\u81f4\uff0c\u4f8b\u5982\u5355\u673a\u90e8\u7f72\u7684\u9ed8\u8ba4\u4e3a 127.0.0.1:9779 \u3002 \u4f7f\u7528\u57df\u540d\u65f6\uff0c\u9700\u8981\u7528\u5f15\u53f7\u5305\u88f9\uff0c\u4f8b\u5982 ADD HOSTS \"foo-bar\":9779 \u3002 \u786e\u4fdd\u65b0\u589e\u7684 Storage \u4e3b\u673a\u6ca1\u6709\u88ab\u5176\u4ed6\u96c6\u7fa4\u4f7f\u7528\u8fc7\uff0c\u5426\u5219\u4f1a\u5bfc\u81f4\u6dfb\u52a0 Storage \u8282\u70b9\u5931\u8d25\u3002 \u5220\u9664 Storage \u4e3b\u673a \u00b6 \u4ece\u96c6\u7fa4\u4e2d\u5220\u9664 Storage \u4e3b\u673a\u3002 Note \u65e0\u6cd5\u76f4\u63a5\u5220\u9664\u6b63\u5728\u4f7f\u7528\u7684 Storage \u4e3b\u673a\uff0c\u9700\u8981\u5148\u5220\u9664\u5173\u8054\u7684\u56fe\u7a7a\u95f4\uff0c\u624d\u80fd\u5220\u9664 Storage \u4e3b\u673a\u3002 nebula> DROP HOSTS <ip>:<port> [,<ip>:<port> ...]; nebula> DROP HOSTS \"<hostname>\":<port> [,\"<hostname>\":<port> ...]; \u67e5\u770b Storage \u4e3b\u673a \u00b6 \u67e5\u770b\u96c6\u7fa4\u4e2d\u7684 Storage \u4e3b\u673a\u3002 nebula> SHOW HOSTS STORAGE; +-------------+------+----------+-----------+--------------+---------+ | Host | Port | Status | Role | Git Info Sha | Version | +-------------+------+----------+-----------+--------------+---------+ | \"storaged0\" | 9779 | \"ONLINE\" | \"STORAGE\" | \"3ba41bd\" | \"3.6.0\" | | \"storaged1\" | 9779 | \"ONLINE\" | \"STORAGE\" | \"3ba41bd\" | \"3.6.0\" | | \"storaged2\" | 9779 | \"ONLINE\" | \"STORAGE\" | \"3ba41bd\" | \"3.6.0\" | +-------------+------+----------+-----------+--------------+---------+","title":"\u7ba1\u7406 Storage \u4e3b\u673a"},{"location":"4.deployment-and-installation/manage-storage-host/#storage","text":"\u4ece 3.0.0 \u7248\u672c\u5f00\u59cb\uff0c\u5728\u914d\u7f6e\u6587\u4ef6\u4e2d\u6dfb\u52a0\u7684 Storage \u4e3b\u673a\u65e0\u6cd5\u76f4\u63a5\u8bfb\u5199\uff0c\u914d\u7f6e\u6587\u4ef6\u7684\u4f5c\u7528\u4ec5\u4ec5\u662f\u5c06 Storage \u4e3b\u673a\u6ce8\u518c\u81f3 Meta \u670d\u52a1\u4e2d\u3002\u5fc5\u987b\u4f7f\u7528 ADD HOSTS \u547d\u4ee4\u540e\uff0c\u624d\u80fd\u6b63\u5e38\u8bfb\u5199 Storage \u4e3b\u673a\u3002","title":"\u7ba1\u7406 Storage \u4e3b\u673a"},{"location":"4.deployment-and-installation/manage-storage-host/#_1","text":"\u5df2\u7ecf \u8fde\u63a5\u670d\u52a1","title":"\u524d\u63d0\u6761\u4ef6"},{"location":"4.deployment-and-installation/manage-storage-host/#storage_1","text":"\u5411\u96c6\u7fa4\u4e2d\u589e\u52a0 Storage \u4e3b\u673a\u3002 nebula> ADD HOSTS <ip>:<port> [,<ip>:<port> ...]; nebula> ADD HOSTS \"<hostname>\":<port> [,\"<hostname>\":<port> ...]; Note \u589e\u52a0 Storage \u4e3b\u673a\u5728 \u4e0b\u4e00\u4e2a \u5fc3\u8df3\u5468\u671f\u4e4b\u540e\u624d\u80fd\u751f\u6548\uff0c\u4e3a\u786e\u4fdd\u6570\u636e\u540c\u6b65\uff0c\u8bf7\u7b49\u5f85 2 \u4e2a\u5fc3\u8df3\u5468\u671f\uff0820 \u79d2\uff09\uff0c\u7136\u540e\u6267\u884c SHOW HOSTS \u67e5\u770b\u662f\u5426\u5728\u7ebf\u3002 IP\u5730\u5740\u548c\u7aef\u53e3\u8bf7\u548c\u914d\u7f6e\u6587\u4ef6\u4e2d\u7684\u8bbe\u7f6e\u4fdd\u6301\u4e00\u81f4\uff0c\u4f8b\u5982\u5355\u673a\u90e8\u7f72\u7684\u9ed8\u8ba4\u4e3a 127.0.0.1:9779 \u3002 \u4f7f\u7528\u57df\u540d\u65f6\uff0c\u9700\u8981\u7528\u5f15\u53f7\u5305\u88f9\uff0c\u4f8b\u5982 ADD HOSTS \"foo-bar\":9779 \u3002 \u786e\u4fdd\u65b0\u589e\u7684 Storage \u4e3b\u673a\u6ca1\u6709\u88ab\u5176\u4ed6\u96c6\u7fa4\u4f7f\u7528\u8fc7\uff0c\u5426\u5219\u4f1a\u5bfc\u81f4\u6dfb\u52a0 Storage \u8282\u70b9\u5931\u8d25\u3002","title":"\u589e\u52a0 Storage \u4e3b\u673a"},{"location":"4.deployment-and-installation/manage-storage-host/#storage_2","text":"\u4ece\u96c6\u7fa4\u4e2d\u5220\u9664 Storage \u4e3b\u673a\u3002 Note \u65e0\u6cd5\u76f4\u63a5\u5220\u9664\u6b63\u5728\u4f7f\u7528\u7684 Storage \u4e3b\u673a\uff0c\u9700\u8981\u5148\u5220\u9664\u5173\u8054\u7684\u56fe\u7a7a\u95f4\uff0c\u624d\u80fd\u5220\u9664 Storage \u4e3b\u673a\u3002 nebula> DROP HOSTS <ip>:<port> [,<ip>:<port> ...]; nebula> DROP HOSTS \"<hostname>\":<port> [,\"<hostname>\":<port> ...];","title":"\u5220\u9664 Storage \u4e3b\u673a"},{"location":"4.deployment-and-installation/manage-storage-host/#storage_3","text":"\u67e5\u770b\u96c6\u7fa4\u4e2d\u7684 Storage \u4e3b\u673a\u3002 nebula> SHOW HOSTS STORAGE; +-------------+------+----------+-----------+--------------+---------+ | Host | Port | Status | Role | Git Info Sha | Version | +-------------+------+----------+-----------+--------------+---------+ | \"storaged0\" | 9779 | \"ONLINE\" | \"STORAGE\" | \"3ba41bd\" | \"3.6.0\" | | \"storaged1\" | 9779 | \"ONLINE\" | \"STORAGE\" | \"3ba41bd\" | \"3.6.0\" | | \"storaged2\" | 9779 | \"ONLINE\" | \"STORAGE\" | \"3ba41bd\" | \"3.6.0\" | +-------------+------+----------+-----------+--------------+---------+","title":"\u67e5\u770b Storage \u4e3b\u673a"},{"location":"4.deployment-and-installation/standalone-deployment/","text":"\u5b58\u7b97\u5408\u5e76\u7248NebulaGraph \u00b6 \u5b58\u7b97\u5408\u5e76\u7248NebulaGraph\u5c06\u5b58\u50a8\u670d\u52a1\uff08Meta \u548c Storage\uff09\u548c\u8ba1\u7b97\u670d\u52a1\uff08Graph\uff09\u5408\u5e76\u81f3\u4e00\u4e2a\u8fdb\u7a0b\uff0c\u7528\u4e8e\u90e8\u7f72\u5728\u5355\u53f0\u673a\u5668\u4e0a\u3002\u672c\u6587\u4ecb\u7ecd\u5b58\u7b97\u5408\u5e76\u7248NebulaGraph\u7684\u4f7f\u7528\u573a\u666f\u3001\u5b89\u88c5\u6b65\u9aa4\u7b49\u3002 Danger \u5b58\u7b97\u5408\u5e76\u7248NebulaGraph\u4e0d\u7528\u4e8e\u751f\u4ea7\u73af\u5883\u3002 \u80cc\u666f\u4fe1\u606f \u00b6 \u4f20\u7edf\u7684NebulaGraph\u67b6\u6784\u7531 3 \u4e2a\u670d\u52a1\u6784\u6210\uff0c\u6bcf\u4e2a\u670d\u52a1\u90fd\u6709\u53ef\u6267\u884c\u7684\u4e8c\u8fdb\u5236\u6587\u4ef6\u548c\u5bf9\u5e94\u7684\u8fdb\u7a0b\uff0c\u8fdb\u7a0b\u4e4b\u95f4\u901a\u8fc7 RPC \u534f\u8bae\u8fdb\u884c\u8c03\u7528\u3002\u800c\u5728\u5b58\u7b97\u5408\u5e76\u7248NebulaGraph\u4e2d\uff0cNebulaGraph\u4e2d 3 \u4e2a\u670d\u52a1\u5bf9\u5e94\u7684 3 \u4e2a\u8fdb\u7a0b\u88ab\u5408\u4e3a 1 \u4e2a\u8fdb\u7a0b\u3002 \u5173\u4e8eNebulaGraph\u7684\u66f4\u591a\u4fe1\u606f\uff0c\u53c2\u89c1 \u67b6\u6784\u603b\u89c8 \u3002 \u4f7f\u7528\u573a\u666f \u00b6 \u6570\u636e\u89c4\u6a21\u5c0f\uff0c\u53ef\u7528\u6027\u9700\u6c42\u4e0d\u5927\u7684\u573a\u666f\u3002\u4f8b\u5982\uff0c\u53d7\u9650\u4e8e\u673a\u5668\u6570\u91cf\u7684\u6d4b\u8bd5\u73af\u5883\u6216\u8005\u4ec5\u7528\u4e8e\u9a8c\u8bc1\u529f\u80fd\u7684\u573a\u666f\u3002 \u4f7f\u7528\u9650\u5236 \u00b6 \u4ec5\u652f\u6301\u5355\u526f\u672c\u670d\u52a1\u3002 \u4e0d\u652f\u6301\u9ad8\u53ef\u7528\u548c\u53ef\u9760\u6027\u3002 \u73af\u5883\u51c6\u5907 \u00b6 \u5173\u4e8e\u5b89\u88c5\u5b58\u7b97\u5408\u5e76\u7248NebulaGraph\u6240\u9700\u7684\u73af\u5883\uff0c\u53c2\u89c1 \u7f16\u8bd1NebulaGraph\u6e90\u7801\u8981\u6c42 \u3002 \u5b89\u88c5\u6b65\u9aa4 \u00b6 \u76ee\u524d\u4ec5\u652f\u6301\u4f7f\u7528\u6e90\u7801\u5b89\u88c5\u5b58\u7b97\u5408\u5e76\u7248NebulaGraph\u3002\u5176\u5b89\u88c5\u6b65\u9aa4\u4e0e\u591a\u8fdb\u7a0b\u7684NebulaGraph\u6b65\u9aa4\u7c7b\u4f3c\uff0c\u7528\u6237\u53ea\u9700\u5728 \u4f7f\u7528 CMake \u751f\u6210 makefile \u6587\u4ef6 \u6b65\u9aa4\u7684\u547d\u4ee4\u4e2d\u6dfb\u52a0 -DENABLE_STANDALONE_VERSION=on \u3002\u793a\u4f8b\u5982\u4e0b\uff1a cmake -DCMAKE_INSTALL_PREFIX = /usr/local/nebula -DENABLE_TESTING = OFF -DENABLE_STANDALONE_VERSION = on -DCMAKE_BUILD_TYPE = Release .. \u6709\u5173\u5177\u4f53\u7684\u5b89\u88c5\u6b65\u9aa4\uff0c\u53c2\u89c1 \u4f7f\u7528\u6e90\u7801\u5b89\u88c5 \u3002 \u7528\u6237\u5b8c\u6210\u5b58\u7b97\u5408\u5e76\u7248NebulaGraph\u540e\uff0c\u53ef\u4ee5\u53c2\u89c1 \u8fde\u63a5\u670d\u52a1 \u8fde\u63a5NebulaGraph\u3002 \u914d\u7f6e\u6587\u4ef6 \u00b6 \u5b58\u7b97\u5408\u5e76\u7248NebulaGraph\u7684\u914d\u7f6e\u6587\u4ef6\u7684\u8def\u5f84\u9ed8\u8ba4\u4e3a /usr/local/nebula/etc \u3002 \u7528\u6237\u53ef\u6267\u884c sudo cat nebula-standalone.conf.default \u67e5\u770b\u914d\u7f6e\u6587\u4ef6\u5185\u5bb9\u3002\u914d\u7f6e\u6587\u4ef6\u53c2\u6570\u548c\u63cf\u8ff0\u548c\u591a\u8fdb\u7a0b\u7684NebulaGraph\u5927\u4f53\u4e00\u81f4\uff0c\u9664\u4ee5\u4e0b\u53c2\u6570\u5916\uff1a \u53c2\u6570 \u9884\u8bbe\u503c \u8bf4\u660e meta_port 9559 Meta \u670d\u52a1\u7684\u7aef\u53e3\u53f7\u3002 storage_port 9779 Storage \u670d\u52a1\u7684\u7aef\u53e3\u53f7\u3002 meta_data_path data/meta Meta \u6570\u636e\u5b58\u50a8\u8def\u5f84\u3002 \u7528\u6237\u53ef\u4ee5\u6267\u884c\u547d\u4ee4\u67e5\u770b\u914d\u7f6e\u9879\u5217\u8868\u4e0e\u8bf4\u660e\u3002\u5177\u4f53\u64cd\u4f5c\uff0c\u8bf7\u53c2\u89c1 \u914d\u7f6e\u7ba1\u7406 \u3002","title":"\u5b89\u88c5\u5b58\u7b97\u5408\u5e76\u7248\u670d\u52a1"},{"location":"4.deployment-and-installation/standalone-deployment/#nebulagraph","text":"\u5b58\u7b97\u5408\u5e76\u7248NebulaGraph\u5c06\u5b58\u50a8\u670d\u52a1\uff08Meta \u548c Storage\uff09\u548c\u8ba1\u7b97\u670d\u52a1\uff08Graph\uff09\u5408\u5e76\u81f3\u4e00\u4e2a\u8fdb\u7a0b\uff0c\u7528\u4e8e\u90e8\u7f72\u5728\u5355\u53f0\u673a\u5668\u4e0a\u3002\u672c\u6587\u4ecb\u7ecd\u5b58\u7b97\u5408\u5e76\u7248NebulaGraph\u7684\u4f7f\u7528\u573a\u666f\u3001\u5b89\u88c5\u6b65\u9aa4\u7b49\u3002 Danger \u5b58\u7b97\u5408\u5e76\u7248NebulaGraph\u4e0d\u7528\u4e8e\u751f\u4ea7\u73af\u5883\u3002","title":"\u5b58\u7b97\u5408\u5e76\u7248NebulaGraph"},{"location":"4.deployment-and-installation/standalone-deployment/#_1","text":"\u4f20\u7edf\u7684NebulaGraph\u67b6\u6784\u7531 3 \u4e2a\u670d\u52a1\u6784\u6210\uff0c\u6bcf\u4e2a\u670d\u52a1\u90fd\u6709\u53ef\u6267\u884c\u7684\u4e8c\u8fdb\u5236\u6587\u4ef6\u548c\u5bf9\u5e94\u7684\u8fdb\u7a0b\uff0c\u8fdb\u7a0b\u4e4b\u95f4\u901a\u8fc7 RPC \u534f\u8bae\u8fdb\u884c\u8c03\u7528\u3002\u800c\u5728\u5b58\u7b97\u5408\u5e76\u7248NebulaGraph\u4e2d\uff0cNebulaGraph\u4e2d 3 \u4e2a\u670d\u52a1\u5bf9\u5e94\u7684 3 \u4e2a\u8fdb\u7a0b\u88ab\u5408\u4e3a 1 \u4e2a\u8fdb\u7a0b\u3002 \u5173\u4e8eNebulaGraph\u7684\u66f4\u591a\u4fe1\u606f\uff0c\u53c2\u89c1 \u67b6\u6784\u603b\u89c8 \u3002","title":"\u80cc\u666f\u4fe1\u606f"},{"location":"4.deployment-and-installation/standalone-deployment/#_2","text":"\u6570\u636e\u89c4\u6a21\u5c0f\uff0c\u53ef\u7528\u6027\u9700\u6c42\u4e0d\u5927\u7684\u573a\u666f\u3002\u4f8b\u5982\uff0c\u53d7\u9650\u4e8e\u673a\u5668\u6570\u91cf\u7684\u6d4b\u8bd5\u73af\u5883\u6216\u8005\u4ec5\u7528\u4e8e\u9a8c\u8bc1\u529f\u80fd\u7684\u573a\u666f\u3002","title":"\u4f7f\u7528\u573a\u666f"},{"location":"4.deployment-and-installation/standalone-deployment/#_3","text":"\u4ec5\u652f\u6301\u5355\u526f\u672c\u670d\u52a1\u3002 \u4e0d\u652f\u6301\u9ad8\u53ef\u7528\u548c\u53ef\u9760\u6027\u3002","title":"\u4f7f\u7528\u9650\u5236"},{"location":"4.deployment-and-installation/standalone-deployment/#_4","text":"\u5173\u4e8e\u5b89\u88c5\u5b58\u7b97\u5408\u5e76\u7248NebulaGraph\u6240\u9700\u7684\u73af\u5883\uff0c\u53c2\u89c1 \u7f16\u8bd1NebulaGraph\u6e90\u7801\u8981\u6c42 \u3002","title":"\u73af\u5883\u51c6\u5907"},{"location":"4.deployment-and-installation/standalone-deployment/#_5","text":"\u76ee\u524d\u4ec5\u652f\u6301\u4f7f\u7528\u6e90\u7801\u5b89\u88c5\u5b58\u7b97\u5408\u5e76\u7248NebulaGraph\u3002\u5176\u5b89\u88c5\u6b65\u9aa4\u4e0e\u591a\u8fdb\u7a0b\u7684NebulaGraph\u6b65\u9aa4\u7c7b\u4f3c\uff0c\u7528\u6237\u53ea\u9700\u5728 \u4f7f\u7528 CMake \u751f\u6210 makefile \u6587\u4ef6 \u6b65\u9aa4\u7684\u547d\u4ee4\u4e2d\u6dfb\u52a0 -DENABLE_STANDALONE_VERSION=on \u3002\u793a\u4f8b\u5982\u4e0b\uff1a cmake -DCMAKE_INSTALL_PREFIX = /usr/local/nebula -DENABLE_TESTING = OFF -DENABLE_STANDALONE_VERSION = on -DCMAKE_BUILD_TYPE = Release .. \u6709\u5173\u5177\u4f53\u7684\u5b89\u88c5\u6b65\u9aa4\uff0c\u53c2\u89c1 \u4f7f\u7528\u6e90\u7801\u5b89\u88c5 \u3002 \u7528\u6237\u5b8c\u6210\u5b58\u7b97\u5408\u5e76\u7248NebulaGraph\u540e\uff0c\u53ef\u4ee5\u53c2\u89c1 \u8fde\u63a5\u670d\u52a1 \u8fde\u63a5NebulaGraph\u3002","title":"\u5b89\u88c5\u6b65\u9aa4"},{"location":"4.deployment-and-installation/standalone-deployment/#_6","text":"\u5b58\u7b97\u5408\u5e76\u7248NebulaGraph\u7684\u914d\u7f6e\u6587\u4ef6\u7684\u8def\u5f84\u9ed8\u8ba4\u4e3a /usr/local/nebula/etc \u3002 \u7528\u6237\u53ef\u6267\u884c sudo cat nebula-standalone.conf.default \u67e5\u770b\u914d\u7f6e\u6587\u4ef6\u5185\u5bb9\u3002\u914d\u7f6e\u6587\u4ef6\u53c2\u6570\u548c\u63cf\u8ff0\u548c\u591a\u8fdb\u7a0b\u7684NebulaGraph\u5927\u4f53\u4e00\u81f4\uff0c\u9664\u4ee5\u4e0b\u53c2\u6570\u5916\uff1a \u53c2\u6570 \u9884\u8bbe\u503c \u8bf4\u660e meta_port 9559 Meta \u670d\u52a1\u7684\u7aef\u53e3\u53f7\u3002 storage_port 9779 Storage \u670d\u52a1\u7684\u7aef\u53e3\u53f7\u3002 meta_data_path data/meta Meta \u6570\u636e\u5b58\u50a8\u8def\u5f84\u3002 \u7528\u6237\u53ef\u4ee5\u6267\u884c\u547d\u4ee4\u67e5\u770b\u914d\u7f6e\u9879\u5217\u8868\u4e0e\u8bf4\u660e\u3002\u5177\u4f53\u64cd\u4f5c\uff0c\u8bf7\u53c2\u89c1 \u914d\u7f6e\u7ba1\u7406 \u3002","title":"\u914d\u7f6e\u6587\u4ef6"},{"location":"4.deployment-and-installation/2.compile-and-install-nebula-graph/1.install-nebula-graph-by-compiling-the-source-code/","text":"\u4f7f\u7528\u6e90\u7801\u5b89\u88c5NebulaGraph \u00b6 \u4f7f\u7528\u6e90\u7801\u5b89\u88c5NebulaGraph\u5141\u8bb8\u81ea\u5b9a\u4e49\u7f16\u8bd1\u548c\u5b89\u88c5\u8bbe\u7f6e\uff0c\u5e76\u6d4b\u8bd5\u6700\u65b0\u7279\u6027\u3002 \u524d\u63d0\u6761\u4ef6 \u00b6 \u51c6\u5907\u6b63\u786e\u7684\u7f16\u8bd1\u73af\u5883\u3002\u53c2\u89c1 \u8f6f\u786c\u4ef6\u8981\u6c42\u548c\u5b89\u88c5\u4e09\u65b9\u5e93\u4f9d\u8d56\u5305 \u3002 Note \u6682\u4e0d\u652f\u6301\u79bb\u7ebf\u7f16\u8bd1NebulaGraph\u3002 \u5f85\u5b89\u88c5NebulaGraph\u7684\u4e3b\u673a\u53ef\u4ee5\u8bbf\u95ee\u4e92\u8054\u7f51\u3002 \u5b89\u88c5\u6b65\u9aa4 \u00b6 \u514b\u9686NebulaGraph\u7684\u6e90\u4ee3\u7801\u5230\u4e3b\u673a\u3002 [\u63a8\u8350] \u5982\u679c\u9700\u8981\u5b89\u88c53.6.0\u7248\u672c\u7684NebulaGraph\uff0c\u6267\u884c\u5982\u4e0b\u547d\u4ee4\uff1a $ git clone --branch release-3.6 https://github.com/vesoft-inc/nebula.git \u5982\u679c\u9700\u8981\u5b89\u88c5\u6700\u65b0\u7684\u5f00\u53d1\u7248\u672c\u7528\u4e8e\u6d4b\u8bd5\uff0c\u6267\u884c\u5982\u4e0b\u547d\u4ee4\u514b\u9686 master \u5206\u652f\u7684\u4ee3\u7801\uff1a $ git clone https://github.com/vesoft-inc/nebula.git \u8fdb\u5165 nebula/third-party \u76ee\u5f55\uff0c\u5b89\u88c5NebulaGraph\u4f9d\u8d56\u7684\u7b2c\u4e09\u65b9\u5e93\u3002 $ cd nebula/third-party $ ./install-third-party.sh \u8fd4\u56de nebula \u76ee\u5f55\uff0c\u521b\u5efa\u76ee\u5f55 build \u5e76\u8fdb\u5165\u8be5\u76ee\u5f55\u3002 $ cd .. $ mkdir build && cd build \u4f7f\u7528 CMake \u751f\u6210 makefile \u6587\u4ef6\u3002 Note \u9ed8\u8ba4\u5b89\u88c5\u8def\u5f84\u4e3a /usr/local/nebula \uff0c\u5982\u679c\u9700\u8981\u4fee\u6539\u8def\u5f84\uff0c\u8bf7\u5728\u4e0b\u65b9\u547d\u4ee4\u5185\u589e\u52a0\u53c2\u6570 -DCMAKE_INSTALL_PREFIX=<installation_path> \u3002 \u66f4\u591a CMake \u53c2\u6570\u8bf4\u660e\uff0c\u8bf7\u53c2\u89c1 CMake \u53c2\u6570 \u3002 $ cmake -DCMAKE_INSTALL_PREFIX = /usr/local/nebula -DENABLE_TESTING = OFF -DCMAKE_BUILD_TYPE = Release .. \u7f16\u8bd1NebulaGraph\u3002 Note \u68c0\u67e5 \u8f6f\u786c\u4ef6\u8981\u6c42\u548c\u5b89\u88c5\u4e09\u65b9\u5e93\u4f9d\u8d56\u5305 \u3002 \u4e3a\u4e86\u9002\u5f53\u5730\u52a0\u5feb\u7f16\u8bd1\u901f\u5ea6\uff0c\u53ef\u4ee5\u4f7f\u7528\u9009\u9879 -j \u5e76\u884c\u7f16\u8bd1\u3002\u5e76\u884c\u6570\u91cf N \u5efa\u8bae\u4e3a \\(\\min(\\text{CPU}\u6838\u6570\uff0c\\frac{\u5185\u5b58 (GB)}{2})\\) \u3002 $ make -j { N } # E.g., make -j2 \u5b89\u88c5NebulaGraph\u3002 $ sudo make install Note \u5b89\u88c5\u76ee\u5f55\u4e0b etc/ \u76ee\u5f55\u4e2d\uff08\u9ed8\u8ba4\u4e3a /usr/local/nebula/etc \uff09\u7684\u914d\u7f6e\u6587\u4ef6\u4e3a\u53c2\u8003\u6a21\u7248\uff0c\u7528\u6237\u53ef\u4ee5\u6839\u636e\u9700\u8981\u521b\u5efa\u81ea\u5df1\u7684\u914d\u7f6e\u6587\u4ef6\u3002\u5982\u679c\u8981\u4f7f\u7528 script \u76ee\u5f55\u4e0b\u7684\u811a\u672c\uff0c\u542f\u52a8\u3001\u505c\u6b62\u3001\u91cd\u542f\u3001\u4e2d\u6b62\u548c\u67e5\u770b\u670d\u52a1\uff0c\u914d\u7f6e\u6587\u4ef6\u9700\u8981\u547d\u540d\u4e3a nebula-graph.conf \uff0c nebula-metad.conf \u548c nebula-storaged.conf \u3002 \u66f4\u65b0 master \u7248\u672c \u00b6 master \u5206\u652f\u7684\u4ee3\u7801\u66f4\u65b0\u901f\u5ea6\u5feb\uff0c\u5982\u679c\u5b89\u88c5\u4e86 master \u5206\u652f\u5bf9\u5e94\u7684\u5f00\u53d1\u7248NebulaGraph\uff0c\u53ef\u6839\u636e\u4ee5\u4e0b\u6b65\u9aa4\u66f4\u65b0\u7248\u672c\u3002 \u5728\u76ee\u5f55 nebula \u4e2d\uff0c\u6267\u884c\u547d\u4ee4 git pull upstream master \u66f4\u65b0\u6e90\u7801\u3002 \u5728\u76ee\u5f55 nebula/build \u4e2d\uff0c\u91cd\u65b0\u6267\u884c make -j{N} \u548c make install \u3002 \u4e0b\u4e00\u6b65 \u00b6 \u7ba1\u7406NebulaGraph\u670d\u52a1 CMake \u53c2\u6570 \u00b6 \u4f7f\u7528\u65b9\u6cd5 \u00b6 $ cmake -D<variable> = <value> ... \u4e0b\u6587\u7684 CMake \u53c2\u6570\u53ef\u4ee5\u5728\u914d\u7f6e (CMake) \u9636\u6bb5\u7528\u6765\u8c03\u6574\u7f16\u8bd1\u8bbe\u7f6e\u3002 CMAKE_INSTALL_PREFIX \u00b6 CMAKE_INSTALL_PREFIX \u6307\u5b9aNebulaGraph\u670d\u52a1\u6a21\u5757\u3001\u811a\u672c\u548c\u914d\u7f6e\u6587\u4ef6\u7684\u5b89\u88c5\u8def\u5f84\uff0c\u9ed8\u8ba4\u8def\u5f84\u4e3a /usr/local/nebula \u3002 ENABLE_WERROR \u00b6 \u9ed8\u8ba4\u503c\u4e3a ON \uff0c\u8868\u793a\u5c06\u6240\u6709\u8b66\u544a\uff08warning\uff09\u53d8\u4e3a\u9519\u8bef\uff08error\uff09\u3002\u5982\u679c\u6709\u5fc5\u8981\uff0c\u7528\u6237\u53ef\u4ee5\u8bbe\u7f6e\u4e3a OFF \u3002 ENABLE_TESTING \u00b6 \u9ed8\u8ba4\u503c\u4e3a ON \uff0c\u8868\u793a\u5355\u5143\u6d4b\u8bd5\u670d\u52a1\u7531NebulaGraph\u670d\u52a1\u6784\u5efa\u3002\u5982\u679c\u53ea\u9700\u8981\u670d\u52a1\u6a21\u5757\uff0c\u53ef\u4ee5\u8bbe\u7f6e\u4e3a OFF \u3002 ENABLE_ASAN \u00b6 \u9ed8\u8ba4\u503c\u4e3a OFF \uff0c\u8868\u793a\u5173\u95ed\u5185\u5b58\u95ee\u9898\u68c0\u6d4b\u5de5\u5177 ASan\uff08AddressSanitizer\uff09\u3002\u8be5\u5de5\u5177\u662f\u4e3aNebulaGraph\u5f00\u53d1\u8005\u51c6\u5907\u7684\uff0c\u5982\u679c\u9700\u8981\u5f00\u542f\uff0c\u53ef\u4ee5\u8bbe\u7f6e\u4e3a ON \u3002 CMAKE_BUILD_TYPE \u00b6 CMAKE_BUILD_TYPE \u63a7\u5236NebulaGraph\u7684 build \u65b9\u6cd5\uff0c\u53d6\u503c\u8bf4\u660e\u5982\u4e0b\uff1a Debug CMAKE_BUILD_TYPE \u7684\u9ed8\u8ba4\u503c\uff0c\u8868\u793a build \u8fc7\u7a0b\u4e2d\u53ea\u8bb0\u5f55 debug \u4fe1\u606f\uff0c\u4e0d\u4f7f\u7528\u4f18\u5316\u9009\u9879\u3002 Release build \u8fc7\u7a0b\u4e2d\u4f7f\u7528\u4f18\u5316\u9009\u9879\uff0c\u4e0d\u8bb0\u5f55 debug \u4fe1\u606f\u3002 RelWithDebInfo build \u8fc7\u7a0b\u4e2d\u65e2\u4f7f\u7528\u4f18\u5316\u9009\u9879\uff0c\u4e5f\u8bb0\u5f55 debug \u4fe1\u606f\u3002 MinSizeRel build \u8fc7\u7a0b\u4e2d\u4ec5\u901a\u8fc7\u4f18\u5316\u9009\u9879\u63a7\u5236\u4ee3\u7801\u5927\u5c0f\uff0c\u4e0d\u8bb0\u5f55 debug \u4fe1\u606f\u3002 ENABLE_INCLUDE_WHAT_YOU_USE \u00b6 \u9ed8\u8ba4\u503c\u4e3a OFF \u3002\u5f53\u5176\u503c\u4e3a ON \u4e14\u7cfb\u7edf\u4e2d\u5b89\u88c5\u4e86include-what-you-use\uff0c\u7cfb\u7edf\u5c06\u5728\u751f\u6210 makefile \u8fc7\u7a0b\u4e2d\u62a5\u544a\u5de5\u7a0b\u6e90\u7801\u4e2d\u5305\u542b\u7684\u5197\u4f59\u5934\u6587\u4ef6\u3002 NEBULA_USE_LINKER \u00b6 \u6307\u5b9a\u94fe\u63a5\u7a0b\u5e8f\u7684\u65b9\u5f0f\uff1a \u9ed8\u8ba4\u503c\u4e3a bfd \uff0c\u8868\u793a\u4f7f\u7528 ld.bfd \u94fe\u63a5\u7a0b\u5e8f\u3002 \u5982\u679c\u7cfb\u7edf\u4e2d\u5b89\u88c5\u4e86 lld \u94fe\u63a5\u5668, \u53ef\u8bbe\u7f6e\u53c2\u6570\u503c\u4e3a lld \uff0c\u8868\u793a\u4f7f\u7528 ld.lld \u94fe\u63a5\u7a0b\u5e8f\u3002 \u5982\u679c\u7cfb\u7edf\u4e2d\u5b89\u88c5\u4e86 gold \u94fe\u63a5\u5668\uff0c\u53ef\u8bbe\u4e3a gold \uff0c\u8868\u793a\u4f7f\u7528 ld.gold \u94fe\u63a5\u7a0b\u5e8f\u3002 CMAKE_C_COMPILER/CMAKE_CXX_COMPILER \u00b6 \u901a\u5e38\u60c5\u51b5\u4e0b\uff0cCMake \u4f1a\u81ea\u52a8\u67e5\u627e\u5e76\u4f7f\u7528\u4e3b\u673a\u4e0a\u7684 C/C++\u7f16\u8bd1\u5668\uff0c\u4f46\u662f\u5982\u679c\u7f16\u8bd1\u5668\u6ca1\u6709\u5b89\u88c5\u5728\u6807\u51c6\u8def\u5f84\uff0c\u6216\u8005\u60f3\u4f7f\u7528\u5176\u4ed6\u7f16\u8bd1\u5668\uff0c\u8bf7\u6267\u884c\u5982\u4e0b\u547d\u4ee4\u6307\u5b9a\u76ee\u6807\u7f16\u8bd1\u5668\u7684\u5b89\u88c5\u8def\u5f84\uff1a $ cmake -DCMAKE_C_COMPILER = <path_to_gcc/bin/gcc> -DCMAKE_CXX_COMPILER = <path_to_gcc/bin/g++> .. $ cmake -DCMAKE_C_COMPILER = <path_to_clang/bin/clang> -DCMAKE_CXX_COMPILER = <path_to_clang/bin/clang++> .. ENABLE_CCACHE \u00b6 ENABLE_CCACHE \u9ed8\u8ba4\u503c\u4e3a ON \uff0c\u8868\u793a\u4f7f\u7528 Ccache\uff08compiler cache\uff09\u5de5\u5177\u52a0\u901f\u7f16\u8bd1\u3002 \u5982\u679c\u60f3\u8981\u7981\u7528 ccache\uff0c\u4ec5\u4ec5\u8bbe\u7f6e ENABLE_CCACHE=OFF \u662f\u4e0d\u884c\u7684\uff0c\u56e0\u4e3a\u5728\u67d0\u4e9b\u5e73\u53f0\u4e0a\uff0cccache \u4f1a\u4ee3\u7406\u5f53\u524d\u7f16\u8bd1\u5668\uff0c\u56e0\u6b64\u8fd8\u9700\u8981\u8bbe\u7f6e\u73af\u5883\u53d8\u91cf export CCACHE_DISABLE=true \uff0c\u6216\u8005\u5728\u6587\u4ef6 ~/.ccache/ccache.conf \u4e2d\u6dfb\u52a0 disable=true \u3002\u66f4\u591a\u4fe1\u606f\u8bf7\u53c2\u89c1 ccache official documentation \u3002 NEBULA_THIRDPARTY_ROOT \u00b6 NEBULA_THIRDPARTY_ROOT \u6307\u5b9a\u7b2c\u4e09\u65b9\u8f6f\u4ef6\u7684\u5b89\u88c5\u8def\u5f84\uff0c\u9ed8\u8ba4\u8def\u5f84\u4e3a /opt/vesoft/third-party \u3002 \u95ee\u9898\u6392\u67e5 \u00b6 \u5982\u679c\u51fa\u73b0\u7f16\u8bd1\u5931\u8d25\uff0c\u8bf7\u53c2\u8003\u4ee5\u4e0b\u5efa\u8bae\uff1a \u68c0\u67e5\u64cd\u4f5c\u7cfb\u7edf\u7248\u672c\u662f\u5426\u7b26\u5408\u8981\u6c42\u3001\u5185\u5b58\u548c\u786c\u76d8\u7a7a\u95f4\u662f\u5426\u8db3\u591f\u3002 \u68c0\u67e5 third-party \u662f\u5426\u6b63\u786e\u5b89\u88c5\u3002 \u4f7f\u7528 make -j1 \u964d\u4f4e\u7f16\u8bd1\u5e76\u53d1\u5ea6\u3002","title":"\u6e90\u7801\u7f16\u8bd1"},{"location":"4.deployment-and-installation/2.compile-and-install-nebula-graph/1.install-nebula-graph-by-compiling-the-source-code/#nebulagraph","text":"\u4f7f\u7528\u6e90\u7801\u5b89\u88c5NebulaGraph\u5141\u8bb8\u81ea\u5b9a\u4e49\u7f16\u8bd1\u548c\u5b89\u88c5\u8bbe\u7f6e\uff0c\u5e76\u6d4b\u8bd5\u6700\u65b0\u7279\u6027\u3002","title":"\u4f7f\u7528\u6e90\u7801\u5b89\u88c5NebulaGraph"},{"location":"4.deployment-and-installation/2.compile-and-install-nebula-graph/1.install-nebula-graph-by-compiling-the-source-code/#_1","text":"\u51c6\u5907\u6b63\u786e\u7684\u7f16\u8bd1\u73af\u5883\u3002\u53c2\u89c1 \u8f6f\u786c\u4ef6\u8981\u6c42\u548c\u5b89\u88c5\u4e09\u65b9\u5e93\u4f9d\u8d56\u5305 \u3002 Note \u6682\u4e0d\u652f\u6301\u79bb\u7ebf\u7f16\u8bd1NebulaGraph\u3002 \u5f85\u5b89\u88c5NebulaGraph\u7684\u4e3b\u673a\u53ef\u4ee5\u8bbf\u95ee\u4e92\u8054\u7f51\u3002","title":"\u524d\u63d0\u6761\u4ef6"},{"location":"4.deployment-and-installation/2.compile-and-install-nebula-graph/1.install-nebula-graph-by-compiling-the-source-code/#_2","text":"\u514b\u9686NebulaGraph\u7684\u6e90\u4ee3\u7801\u5230\u4e3b\u673a\u3002 [\u63a8\u8350] \u5982\u679c\u9700\u8981\u5b89\u88c53.6.0\u7248\u672c\u7684NebulaGraph\uff0c\u6267\u884c\u5982\u4e0b\u547d\u4ee4\uff1a $ git clone --branch release-3.6 https://github.com/vesoft-inc/nebula.git \u5982\u679c\u9700\u8981\u5b89\u88c5\u6700\u65b0\u7684\u5f00\u53d1\u7248\u672c\u7528\u4e8e\u6d4b\u8bd5\uff0c\u6267\u884c\u5982\u4e0b\u547d\u4ee4\u514b\u9686 master \u5206\u652f\u7684\u4ee3\u7801\uff1a $ git clone https://github.com/vesoft-inc/nebula.git \u8fdb\u5165 nebula/third-party \u76ee\u5f55\uff0c\u5b89\u88c5NebulaGraph\u4f9d\u8d56\u7684\u7b2c\u4e09\u65b9\u5e93\u3002 $ cd nebula/third-party $ ./install-third-party.sh \u8fd4\u56de nebula \u76ee\u5f55\uff0c\u521b\u5efa\u76ee\u5f55 build \u5e76\u8fdb\u5165\u8be5\u76ee\u5f55\u3002 $ cd .. $ mkdir build && cd build \u4f7f\u7528 CMake \u751f\u6210 makefile \u6587\u4ef6\u3002 Note \u9ed8\u8ba4\u5b89\u88c5\u8def\u5f84\u4e3a /usr/local/nebula \uff0c\u5982\u679c\u9700\u8981\u4fee\u6539\u8def\u5f84\uff0c\u8bf7\u5728\u4e0b\u65b9\u547d\u4ee4\u5185\u589e\u52a0\u53c2\u6570 -DCMAKE_INSTALL_PREFIX=<installation_path> \u3002 \u66f4\u591a CMake \u53c2\u6570\u8bf4\u660e\uff0c\u8bf7\u53c2\u89c1 CMake \u53c2\u6570 \u3002 $ cmake -DCMAKE_INSTALL_PREFIX = /usr/local/nebula -DENABLE_TESTING = OFF -DCMAKE_BUILD_TYPE = Release .. \u7f16\u8bd1NebulaGraph\u3002 Note \u68c0\u67e5 \u8f6f\u786c\u4ef6\u8981\u6c42\u548c\u5b89\u88c5\u4e09\u65b9\u5e93\u4f9d\u8d56\u5305 \u3002 \u4e3a\u4e86\u9002\u5f53\u5730\u52a0\u5feb\u7f16\u8bd1\u901f\u5ea6\uff0c\u53ef\u4ee5\u4f7f\u7528\u9009\u9879 -j \u5e76\u884c\u7f16\u8bd1\u3002\u5e76\u884c\u6570\u91cf N \u5efa\u8bae\u4e3a \\(\\min(\\text{CPU}\u6838\u6570\uff0c\\frac{\u5185\u5b58 (GB)}{2})\\) \u3002 $ make -j { N } # E.g., make -j2 \u5b89\u88c5NebulaGraph\u3002 $ sudo make install Note \u5b89\u88c5\u76ee\u5f55\u4e0b etc/ \u76ee\u5f55\u4e2d\uff08\u9ed8\u8ba4\u4e3a /usr/local/nebula/etc \uff09\u7684\u914d\u7f6e\u6587\u4ef6\u4e3a\u53c2\u8003\u6a21\u7248\uff0c\u7528\u6237\u53ef\u4ee5\u6839\u636e\u9700\u8981\u521b\u5efa\u81ea\u5df1\u7684\u914d\u7f6e\u6587\u4ef6\u3002\u5982\u679c\u8981\u4f7f\u7528 script \u76ee\u5f55\u4e0b\u7684\u811a\u672c\uff0c\u542f\u52a8\u3001\u505c\u6b62\u3001\u91cd\u542f\u3001\u4e2d\u6b62\u548c\u67e5\u770b\u670d\u52a1\uff0c\u914d\u7f6e\u6587\u4ef6\u9700\u8981\u547d\u540d\u4e3a nebula-graph.conf \uff0c nebula-metad.conf \u548c nebula-storaged.conf \u3002","title":"\u5b89\u88c5\u6b65\u9aa4"},{"location":"4.deployment-and-installation/2.compile-and-install-nebula-graph/1.install-nebula-graph-by-compiling-the-source-code/#master","text":"master \u5206\u652f\u7684\u4ee3\u7801\u66f4\u65b0\u901f\u5ea6\u5feb\uff0c\u5982\u679c\u5b89\u88c5\u4e86 master \u5206\u652f\u5bf9\u5e94\u7684\u5f00\u53d1\u7248NebulaGraph\uff0c\u53ef\u6839\u636e\u4ee5\u4e0b\u6b65\u9aa4\u66f4\u65b0\u7248\u672c\u3002 \u5728\u76ee\u5f55 nebula \u4e2d\uff0c\u6267\u884c\u547d\u4ee4 git pull upstream master \u66f4\u65b0\u6e90\u7801\u3002 \u5728\u76ee\u5f55 nebula/build \u4e2d\uff0c\u91cd\u65b0\u6267\u884c make -j{N} \u548c make install \u3002","title":"\u66f4\u65b0 master \u7248\u672c"},{"location":"4.deployment-and-installation/2.compile-and-install-nebula-graph/1.install-nebula-graph-by-compiling-the-source-code/#_3","text":"\u7ba1\u7406NebulaGraph\u670d\u52a1","title":"\u4e0b\u4e00\u6b65"},{"location":"4.deployment-and-installation/2.compile-and-install-nebula-graph/1.install-nebula-graph-by-compiling-the-source-code/#cmake","text":"","title":"CMake \u53c2\u6570"},{"location":"4.deployment-and-installation/2.compile-and-install-nebula-graph/1.install-nebula-graph-by-compiling-the-source-code/#_4","text":"$ cmake -D<variable> = <value> ... \u4e0b\u6587\u7684 CMake \u53c2\u6570\u53ef\u4ee5\u5728\u914d\u7f6e (CMake) \u9636\u6bb5\u7528\u6765\u8c03\u6574\u7f16\u8bd1\u8bbe\u7f6e\u3002","title":"\u4f7f\u7528\u65b9\u6cd5"},{"location":"4.deployment-and-installation/2.compile-and-install-nebula-graph/1.install-nebula-graph-by-compiling-the-source-code/#cmake_install_prefix","text":"CMAKE_INSTALL_PREFIX \u6307\u5b9aNebulaGraph\u670d\u52a1\u6a21\u5757\u3001\u811a\u672c\u548c\u914d\u7f6e\u6587\u4ef6\u7684\u5b89\u88c5\u8def\u5f84\uff0c\u9ed8\u8ba4\u8def\u5f84\u4e3a /usr/local/nebula \u3002","title":"CMAKE_INSTALL_PREFIX"},{"location":"4.deployment-and-installation/2.compile-and-install-nebula-graph/1.install-nebula-graph-by-compiling-the-source-code/#enable_werror","text":"\u9ed8\u8ba4\u503c\u4e3a ON \uff0c\u8868\u793a\u5c06\u6240\u6709\u8b66\u544a\uff08warning\uff09\u53d8\u4e3a\u9519\u8bef\uff08error\uff09\u3002\u5982\u679c\u6709\u5fc5\u8981\uff0c\u7528\u6237\u53ef\u4ee5\u8bbe\u7f6e\u4e3a OFF \u3002","title":"ENABLE_WERROR"},{"location":"4.deployment-and-installation/2.compile-and-install-nebula-graph/1.install-nebula-graph-by-compiling-the-source-code/#enable_testing","text":"\u9ed8\u8ba4\u503c\u4e3a ON \uff0c\u8868\u793a\u5355\u5143\u6d4b\u8bd5\u670d\u52a1\u7531NebulaGraph\u670d\u52a1\u6784\u5efa\u3002\u5982\u679c\u53ea\u9700\u8981\u670d\u52a1\u6a21\u5757\uff0c\u53ef\u4ee5\u8bbe\u7f6e\u4e3a OFF \u3002","title":"ENABLE_TESTING"},{"location":"4.deployment-and-installation/2.compile-and-install-nebula-graph/1.install-nebula-graph-by-compiling-the-source-code/#enable_asan","text":"\u9ed8\u8ba4\u503c\u4e3a OFF \uff0c\u8868\u793a\u5173\u95ed\u5185\u5b58\u95ee\u9898\u68c0\u6d4b\u5de5\u5177 ASan\uff08AddressSanitizer\uff09\u3002\u8be5\u5de5\u5177\u662f\u4e3aNebulaGraph\u5f00\u53d1\u8005\u51c6\u5907\u7684\uff0c\u5982\u679c\u9700\u8981\u5f00\u542f\uff0c\u53ef\u4ee5\u8bbe\u7f6e\u4e3a ON \u3002","title":"ENABLE_ASAN"},{"location":"4.deployment-and-installation/2.compile-and-install-nebula-graph/1.install-nebula-graph-by-compiling-the-source-code/#cmake_build_type","text":"CMAKE_BUILD_TYPE \u63a7\u5236NebulaGraph\u7684 build \u65b9\u6cd5\uff0c\u53d6\u503c\u8bf4\u660e\u5982\u4e0b\uff1a Debug CMAKE_BUILD_TYPE \u7684\u9ed8\u8ba4\u503c\uff0c\u8868\u793a build \u8fc7\u7a0b\u4e2d\u53ea\u8bb0\u5f55 debug \u4fe1\u606f\uff0c\u4e0d\u4f7f\u7528\u4f18\u5316\u9009\u9879\u3002 Release build \u8fc7\u7a0b\u4e2d\u4f7f\u7528\u4f18\u5316\u9009\u9879\uff0c\u4e0d\u8bb0\u5f55 debug \u4fe1\u606f\u3002 RelWithDebInfo build \u8fc7\u7a0b\u4e2d\u65e2\u4f7f\u7528\u4f18\u5316\u9009\u9879\uff0c\u4e5f\u8bb0\u5f55 debug \u4fe1\u606f\u3002 MinSizeRel build \u8fc7\u7a0b\u4e2d\u4ec5\u901a\u8fc7\u4f18\u5316\u9009\u9879\u63a7\u5236\u4ee3\u7801\u5927\u5c0f\uff0c\u4e0d\u8bb0\u5f55 debug \u4fe1\u606f\u3002","title":"CMAKE_BUILD_TYPE"},{"location":"4.deployment-and-installation/2.compile-and-install-nebula-graph/1.install-nebula-graph-by-compiling-the-source-code/#enable_include_what_you_use","text":"\u9ed8\u8ba4\u503c\u4e3a OFF \u3002\u5f53\u5176\u503c\u4e3a ON \u4e14\u7cfb\u7edf\u4e2d\u5b89\u88c5\u4e86include-what-you-use\uff0c\u7cfb\u7edf\u5c06\u5728\u751f\u6210 makefile \u8fc7\u7a0b\u4e2d\u62a5\u544a\u5de5\u7a0b\u6e90\u7801\u4e2d\u5305\u542b\u7684\u5197\u4f59\u5934\u6587\u4ef6\u3002","title":"ENABLE_INCLUDE_WHAT_YOU_USE"},{"location":"4.deployment-and-installation/2.compile-and-install-nebula-graph/1.install-nebula-graph-by-compiling-the-source-code/#nebula_use_linker","text":"\u6307\u5b9a\u94fe\u63a5\u7a0b\u5e8f\u7684\u65b9\u5f0f\uff1a \u9ed8\u8ba4\u503c\u4e3a bfd \uff0c\u8868\u793a\u4f7f\u7528 ld.bfd \u94fe\u63a5\u7a0b\u5e8f\u3002 \u5982\u679c\u7cfb\u7edf\u4e2d\u5b89\u88c5\u4e86 lld \u94fe\u63a5\u5668, \u53ef\u8bbe\u7f6e\u53c2\u6570\u503c\u4e3a lld \uff0c\u8868\u793a\u4f7f\u7528 ld.lld \u94fe\u63a5\u7a0b\u5e8f\u3002 \u5982\u679c\u7cfb\u7edf\u4e2d\u5b89\u88c5\u4e86 gold \u94fe\u63a5\u5668\uff0c\u53ef\u8bbe\u4e3a gold \uff0c\u8868\u793a\u4f7f\u7528 ld.gold \u94fe\u63a5\u7a0b\u5e8f\u3002","title":"NEBULA_USE_LINKER"},{"location":"4.deployment-and-installation/2.compile-and-install-nebula-graph/1.install-nebula-graph-by-compiling-the-source-code/#cmake_c_compilercmake_cxx_compiler","text":"\u901a\u5e38\u60c5\u51b5\u4e0b\uff0cCMake \u4f1a\u81ea\u52a8\u67e5\u627e\u5e76\u4f7f\u7528\u4e3b\u673a\u4e0a\u7684 C/C++\u7f16\u8bd1\u5668\uff0c\u4f46\u662f\u5982\u679c\u7f16\u8bd1\u5668\u6ca1\u6709\u5b89\u88c5\u5728\u6807\u51c6\u8def\u5f84\uff0c\u6216\u8005\u60f3\u4f7f\u7528\u5176\u4ed6\u7f16\u8bd1\u5668\uff0c\u8bf7\u6267\u884c\u5982\u4e0b\u547d\u4ee4\u6307\u5b9a\u76ee\u6807\u7f16\u8bd1\u5668\u7684\u5b89\u88c5\u8def\u5f84\uff1a $ cmake -DCMAKE_C_COMPILER = <path_to_gcc/bin/gcc> -DCMAKE_CXX_COMPILER = <path_to_gcc/bin/g++> .. $ cmake -DCMAKE_C_COMPILER = <path_to_clang/bin/clang> -DCMAKE_CXX_COMPILER = <path_to_clang/bin/clang++> ..","title":"CMAKE_C_COMPILER/CMAKE_CXX_COMPILER"},{"location":"4.deployment-and-installation/2.compile-and-install-nebula-graph/1.install-nebula-graph-by-compiling-the-source-code/#enable_ccache","text":"ENABLE_CCACHE \u9ed8\u8ba4\u503c\u4e3a ON \uff0c\u8868\u793a\u4f7f\u7528 Ccache\uff08compiler cache\uff09\u5de5\u5177\u52a0\u901f\u7f16\u8bd1\u3002 \u5982\u679c\u60f3\u8981\u7981\u7528 ccache\uff0c\u4ec5\u4ec5\u8bbe\u7f6e ENABLE_CCACHE=OFF \u662f\u4e0d\u884c\u7684\uff0c\u56e0\u4e3a\u5728\u67d0\u4e9b\u5e73\u53f0\u4e0a\uff0cccache \u4f1a\u4ee3\u7406\u5f53\u524d\u7f16\u8bd1\u5668\uff0c\u56e0\u6b64\u8fd8\u9700\u8981\u8bbe\u7f6e\u73af\u5883\u53d8\u91cf export CCACHE_DISABLE=true \uff0c\u6216\u8005\u5728\u6587\u4ef6 ~/.ccache/ccache.conf \u4e2d\u6dfb\u52a0 disable=true \u3002\u66f4\u591a\u4fe1\u606f\u8bf7\u53c2\u89c1 ccache official documentation \u3002","title":"ENABLE_CCACHE"},{"location":"4.deployment-and-installation/2.compile-and-install-nebula-graph/1.install-nebula-graph-by-compiling-the-source-code/#nebula_thirdparty_root","text":"NEBULA_THIRDPARTY_ROOT \u6307\u5b9a\u7b2c\u4e09\u65b9\u8f6f\u4ef6\u7684\u5b89\u88c5\u8def\u5f84\uff0c\u9ed8\u8ba4\u8def\u5f84\u4e3a /opt/vesoft/third-party \u3002","title":"NEBULA_THIRDPARTY_ROOT"},{"location":"4.deployment-and-installation/2.compile-and-install-nebula-graph/1.install-nebula-graph-by-compiling-the-source-code/#_5","text":"\u5982\u679c\u51fa\u73b0\u7f16\u8bd1\u5931\u8d25\uff0c\u8bf7\u53c2\u8003\u4ee5\u4e0b\u5efa\u8bae\uff1a \u68c0\u67e5\u64cd\u4f5c\u7cfb\u7edf\u7248\u672c\u662f\u5426\u7b26\u5408\u8981\u6c42\u3001\u5185\u5b58\u548c\u786c\u76d8\u7a7a\u95f4\u662f\u5426\u8db3\u591f\u3002 \u68c0\u67e5 third-party \u662f\u5426\u6b63\u786e\u5b89\u88c5\u3002 \u4f7f\u7528 make -j1 \u964d\u4f4e\u7f16\u8bd1\u5e76\u53d1\u5ea6\u3002","title":"\u95ee\u9898\u6392\u67e5"},{"location":"4.deployment-and-installation/2.compile-and-install-nebula-graph/2.install-nebula-graph-by-rpm-or-deb/","text":"\u4f7f\u7528 RPM \u6216 DEB \u5305\u5b89\u88c5NebulaGraph \u00b6 RPM \u548c DEB \u662f Linux \u7cfb\u7edf\u4e0b\u5e38\u89c1\u7684\u4e24\u79cd\u5b89\u88c5\u5305\u683c\u5f0f\uff0c\u672c\u6587\u4ecb\u7ecd\u5982\u4f55\u4f7f\u7528 RPM \u6216 DEB \u6587\u4ef6\u5728\u4e00\u53f0\u673a\u5668\u4e0a\u5feb\u901f\u5b89\u88c5NebulaGraph\u3002 Note \u90e8\u7f72NebulaGraph\u96c6\u7fa4\u7684\u65b9\u5f0f\u53c2\u89c1 \u4f7f\u7528 RPM/DEB \u5305\u90e8\u7f72\u96c6\u7fa4 \u3002 \u524d\u63d0\u6761\u4ef6 \u00b6 \u5b89\u88c5 wget \u5de5\u5177\u3002 \u4e0b\u8f7d\u5b89\u88c5\u5305 \u00b6 Note \u5f53\u524d\u4ec5\u652f\u6301\u5728 Linux \u7cfb\u7edf\u4e0b\u5b89\u88c5NebulaGraph\uff0c\u4e14\u4ec5\u652f\u6301 CentOS 7.x\u3001CentOS 8.x\u3001Ubuntu 16.04\u3001Ubuntu 18.04\u3001Ubuntu 20.04 \u64cd\u4f5c\u7cfb\u7edf\u3002 \u5982\u679c\u7528\u6237\u4f7f\u7528\u7684\u662f\u56fd\u4ea7\u5316\u7684 Linux \u64cd\u4f5c\u7cfb\u7edf\uff0c\u8bf7 \u5b89\u88c5\u4f01\u4e1a\u7248NebulaGraph \u3002 \u963f\u91cc\u4e91 OSS \u4e0b\u8f7d \u00b6 \u4e0b\u8f7d release \u7248\u672c URL \u683c\u5f0f\u5982\u4e0b\uff1a //Centos 7 https://oss-cdn.nebula-graph.com.cn/package/<release_version>/nebula-graph-<release_version>.el7.x86_64.rpm //Centos 8 https://oss-cdn.nebula-graph.com.cn/package/<release_version>/nebula-graph-<release_version>.el8.x86_64.rpm //Ubuntu 1604 https://oss-cdn.nebula-graph.com.cn/package/<release_version>/nebula-graph-<release_version>.ubuntu1604.amd64.deb //Ubuntu 1804 https://oss-cdn.nebula-graph.com.cn/package/<release_version>/nebula-graph-<release_version>.ubuntu1804.amd64.deb //Ubuntu 2004 https://oss-cdn.nebula-graph.com.cn/package/<release_version>/nebula-graph-<release_version>.ubuntu2004.amd64.deb \u4f8b\u5982\u8981\u4e0b\u8f7d\u9002\u7528\u4e8e Centos 7.5 \u7684 3.6.0 \u5b89\u88c5\u5305\uff1a wget https://oss-cdn.nebula-graph.com.cn/package/3.6.0/nebula-graph-3.6.0.el7.x86_64.rpm wget https://oss-cdn.nebula-graph.com.cn/package/3.6.0/nebula-graph-3.6.0.el7.x86_64.rpm.sha256sum.txt \u4e0b\u8f7d\u9002\u7528\u4e8e ubuntu 1804 \u7684 3.6.0 \u5b89\u88c5\u5305\uff1a wget https://oss-cdn.nebula-graph.com.cn/package/3.6.0/nebula-graph-3.6.0.ubuntu1804.amd64.deb wget https://oss-cdn.nebula-graph.com.cn/package/3.6.0/nebula-graph-3.6.0.ubuntu1804.amd64.deb.sha256sum.txt \u4e0b\u8f7d\u65e5\u5e38\u5f00\u53d1\u7248\u672c (nightly) Danger nightly \u7248\u672c\u901a\u5e38\u7528\u4e8e\u6d4b\u8bd5\u65b0\u529f\u80fd\u3001\u65b0\u7279\u6027\uff0c\u8bf7 \u4e0d\u8981 \u5728\u751f\u4ea7\u73af\u5883\u4e2d\u4f7f\u7528 nightly \u7248\u672c\u3002 nightly \u7248\u672c\u4e0d\u4fdd\u8bc1\u6bcf\u65e5\u90fd\u80fd\u5b8c\u6574\u53d1\u5e03\uff0c\u4e5f\u4e0d\u4fdd\u8bc1\u662f\u5426\u4f1a\u66f4\u6539\u6587\u4ef6\u540d\u3002 URL \u683c\u5f0f\u5982\u4e0b\uff1a //Centos 7 https://oss-cdn.nebula-graph.com.cn/package/nightly/<yyyy.mm.dd>/nebula-graph-<yyyy.mm.dd>-nightly.el7.x86_64.rpm //Centos 8 https://oss-cdn.nebula-graph.com.cn/package/nightly/<yyyy.mm.dd>/nebula-graph-<yyyy.mm.dd>-nightly.el8.x86_64.rpm //Ubuntu 1604 https://oss-cdn.nebula-graph.com.cn/package/nightly/<yyyy.mm.dd>/nebula-graph-<yyyy.mm.dd>-nightly.ubuntu1604.amd64.deb //Ubuntu 1804 https://oss-cdn.nebula-graph.com.cn/package/nightly/<yyyy.mm.dd>/nebula-graph-<yyyy.mm.dd>-nightly.ubuntu1804.amd64.deb //Ubuntu 2004 https://oss-cdn.nebula-graph.com.cn/package/nightly/<yyyy.mm.dd>/nebula-graph-<yyyy.mm.dd>-nightly.ubuntu2004.amd64.deb \u4f8b\u5982\u8981\u4e0b\u8f7d 2021.11.24 \u9002\u7528\u4e8e Centos 7.5 \u7684 2.x \u5b89\u88c5\u5305\uff1a wget https://oss-cdn.nebula-graph.com.cn/package/nightly/2021.11.24/nebula-graph-2021.11.24-nightly.el7.x86_64.rpm wget https://oss-cdn.nebula-graph.com.cn/package/nightly/2021.11.24/nebula-graph-2021.11.24-nightly.el7.x86_64.rpm.sha256sum.txt \u8981\u4e0b\u8f7d 2021.11.24 \u9002\u7528\u4e8e Ubuntu 1804 \u7684 2.x \u5b89\u88c5\u5305\uff1a wget https://oss-cdn.nebula-graph.com.cn/package/nightly/2021.11.24/nebula-graph-2021.11.24-nightly.ubuntu1804.amd64.deb wget https://oss-cdn.nebula-graph.com.cn/package/nightly/2021.11.24/nebula-graph-2021.11.24-nightly.ubuntu1804.amd64.deb.sha256sum.txt \u5b89\u88c5NebulaGraph \u00b6 \u5b89\u88c5 RPM \u5305 $ sudo rpm -ivh --prefix = <installation_path> <package_name> --prefix \u4e3a\u53ef\u9009\u9879\uff0c\u7528\u4e8e\u6307\u5b9a\u5b89\u88c5\u8def\u5f84\u3002\u5982\u4e0d\u8bbe\u7f6e\uff0c\u7cfb\u7edf\u4f1a\u5c06NebulaGraph\u5b89\u88c5\u5230\u9ed8\u8ba4\u8def\u5f84 /usr/local/nebula/ \u3002 \u4f8b\u5982\uff0c\u8981\u5728\u9ed8\u8ba4\u8def\u5f84\u4e0b\u5b89\u88c53.6.0\u7248\u672c\u7684 RPM \u5305\uff0c\u8fd0\u884c\u5982\u4e0b\u547d\u4ee4\uff1a sudo rpm -ivh nebula-graph-3.6.0.el7.x86_64.rpm \u5b89\u88c5 DEB \u5305 $ sudo dpkg -i <package_name> Note \u4f7f\u7528 DEB \u5305\u5b89\u88c5NebulaGraph\u65f6\u4e0d\u652f\u6301\u81ea\u5b9a\u4e49\u5b89\u88c5\u8def\u5f84\u3002\u9ed8\u8ba4\u5b89\u88c5\u8def\u5f84\u4e3a /usr/local/nebula/ \u3002 \u4f8b\u5982\u5b89\u88c53.6.0\u7248\u672c\u7684 DEB \u5305\uff1a sudo dpkg -i nebula-graph-3.6.0.ubuntu1804.amd64.deb \u540e\u7eed\u64cd\u4f5c \u00b6 \u542f\u52a8NebulaGraph \u8fde\u63a5NebulaGraph","title":"\u4f7f\u7528 RPM/DEB \u5305\u5b89\u88c5"},{"location":"4.deployment-and-installation/2.compile-and-install-nebula-graph/2.install-nebula-graph-by-rpm-or-deb/#rpm_deb_nebulagraph","text":"RPM \u548c DEB \u662f Linux \u7cfb\u7edf\u4e0b\u5e38\u89c1\u7684\u4e24\u79cd\u5b89\u88c5\u5305\u683c\u5f0f\uff0c\u672c\u6587\u4ecb\u7ecd\u5982\u4f55\u4f7f\u7528 RPM \u6216 DEB \u6587\u4ef6\u5728\u4e00\u53f0\u673a\u5668\u4e0a\u5feb\u901f\u5b89\u88c5NebulaGraph\u3002 Note \u90e8\u7f72NebulaGraph\u96c6\u7fa4\u7684\u65b9\u5f0f\u53c2\u89c1 \u4f7f\u7528 RPM/DEB \u5305\u90e8\u7f72\u96c6\u7fa4 \u3002","title":"\u4f7f\u7528 RPM \u6216 DEB \u5305\u5b89\u88c5NebulaGraph"},{"location":"4.deployment-and-installation/2.compile-and-install-nebula-graph/2.install-nebula-graph-by-rpm-or-deb/#_1","text":"\u5b89\u88c5 wget \u5de5\u5177\u3002","title":"\u524d\u63d0\u6761\u4ef6"},{"location":"4.deployment-and-installation/2.compile-and-install-nebula-graph/2.install-nebula-graph-by-rpm-or-deb/#_2","text":"Note \u5f53\u524d\u4ec5\u652f\u6301\u5728 Linux \u7cfb\u7edf\u4e0b\u5b89\u88c5NebulaGraph\uff0c\u4e14\u4ec5\u652f\u6301 CentOS 7.x\u3001CentOS 8.x\u3001Ubuntu 16.04\u3001Ubuntu 18.04\u3001Ubuntu 20.04 \u64cd\u4f5c\u7cfb\u7edf\u3002 \u5982\u679c\u7528\u6237\u4f7f\u7528\u7684\u662f\u56fd\u4ea7\u5316\u7684 Linux \u64cd\u4f5c\u7cfb\u7edf\uff0c\u8bf7 \u5b89\u88c5\u4f01\u4e1a\u7248NebulaGraph \u3002","title":"\u4e0b\u8f7d\u5b89\u88c5\u5305"},{"location":"4.deployment-and-installation/2.compile-and-install-nebula-graph/2.install-nebula-graph-by-rpm-or-deb/#oss","text":"\u4e0b\u8f7d release \u7248\u672c URL \u683c\u5f0f\u5982\u4e0b\uff1a //Centos 7 https://oss-cdn.nebula-graph.com.cn/package/<release_version>/nebula-graph-<release_version>.el7.x86_64.rpm //Centos 8 https://oss-cdn.nebula-graph.com.cn/package/<release_version>/nebula-graph-<release_version>.el8.x86_64.rpm //Ubuntu 1604 https://oss-cdn.nebula-graph.com.cn/package/<release_version>/nebula-graph-<release_version>.ubuntu1604.amd64.deb //Ubuntu 1804 https://oss-cdn.nebula-graph.com.cn/package/<release_version>/nebula-graph-<release_version>.ubuntu1804.amd64.deb //Ubuntu 2004 https://oss-cdn.nebula-graph.com.cn/package/<release_version>/nebula-graph-<release_version>.ubuntu2004.amd64.deb \u4f8b\u5982\u8981\u4e0b\u8f7d\u9002\u7528\u4e8e Centos 7.5 \u7684 3.6.0 \u5b89\u88c5\u5305\uff1a wget https://oss-cdn.nebula-graph.com.cn/package/3.6.0/nebula-graph-3.6.0.el7.x86_64.rpm wget https://oss-cdn.nebula-graph.com.cn/package/3.6.0/nebula-graph-3.6.0.el7.x86_64.rpm.sha256sum.txt \u4e0b\u8f7d\u9002\u7528\u4e8e ubuntu 1804 \u7684 3.6.0 \u5b89\u88c5\u5305\uff1a wget https://oss-cdn.nebula-graph.com.cn/package/3.6.0/nebula-graph-3.6.0.ubuntu1804.amd64.deb wget https://oss-cdn.nebula-graph.com.cn/package/3.6.0/nebula-graph-3.6.0.ubuntu1804.amd64.deb.sha256sum.txt \u4e0b\u8f7d\u65e5\u5e38\u5f00\u53d1\u7248\u672c (nightly) Danger nightly \u7248\u672c\u901a\u5e38\u7528\u4e8e\u6d4b\u8bd5\u65b0\u529f\u80fd\u3001\u65b0\u7279\u6027\uff0c\u8bf7 \u4e0d\u8981 \u5728\u751f\u4ea7\u73af\u5883\u4e2d\u4f7f\u7528 nightly \u7248\u672c\u3002 nightly \u7248\u672c\u4e0d\u4fdd\u8bc1\u6bcf\u65e5\u90fd\u80fd\u5b8c\u6574\u53d1\u5e03\uff0c\u4e5f\u4e0d\u4fdd\u8bc1\u662f\u5426\u4f1a\u66f4\u6539\u6587\u4ef6\u540d\u3002 URL \u683c\u5f0f\u5982\u4e0b\uff1a //Centos 7 https://oss-cdn.nebula-graph.com.cn/package/nightly/<yyyy.mm.dd>/nebula-graph-<yyyy.mm.dd>-nightly.el7.x86_64.rpm //Centos 8 https://oss-cdn.nebula-graph.com.cn/package/nightly/<yyyy.mm.dd>/nebula-graph-<yyyy.mm.dd>-nightly.el8.x86_64.rpm //Ubuntu 1604 https://oss-cdn.nebula-graph.com.cn/package/nightly/<yyyy.mm.dd>/nebula-graph-<yyyy.mm.dd>-nightly.ubuntu1604.amd64.deb //Ubuntu 1804 https://oss-cdn.nebula-graph.com.cn/package/nightly/<yyyy.mm.dd>/nebula-graph-<yyyy.mm.dd>-nightly.ubuntu1804.amd64.deb //Ubuntu 2004 https://oss-cdn.nebula-graph.com.cn/package/nightly/<yyyy.mm.dd>/nebula-graph-<yyyy.mm.dd>-nightly.ubuntu2004.amd64.deb \u4f8b\u5982\u8981\u4e0b\u8f7d 2021.11.24 \u9002\u7528\u4e8e Centos 7.5 \u7684 2.x \u5b89\u88c5\u5305\uff1a wget https://oss-cdn.nebula-graph.com.cn/package/nightly/2021.11.24/nebula-graph-2021.11.24-nightly.el7.x86_64.rpm wget https://oss-cdn.nebula-graph.com.cn/package/nightly/2021.11.24/nebula-graph-2021.11.24-nightly.el7.x86_64.rpm.sha256sum.txt \u8981\u4e0b\u8f7d 2021.11.24 \u9002\u7528\u4e8e Ubuntu 1804 \u7684 2.x \u5b89\u88c5\u5305\uff1a wget https://oss-cdn.nebula-graph.com.cn/package/nightly/2021.11.24/nebula-graph-2021.11.24-nightly.ubuntu1804.amd64.deb wget https://oss-cdn.nebula-graph.com.cn/package/nightly/2021.11.24/nebula-graph-2021.11.24-nightly.ubuntu1804.amd64.deb.sha256sum.txt","title":"\u963f\u91cc\u4e91 OSS \u4e0b\u8f7d"},{"location":"4.deployment-and-installation/2.compile-and-install-nebula-graph/2.install-nebula-graph-by-rpm-or-deb/#nebulagraph","text":"\u5b89\u88c5 RPM \u5305 $ sudo rpm -ivh --prefix = <installation_path> <package_name> --prefix \u4e3a\u53ef\u9009\u9879\uff0c\u7528\u4e8e\u6307\u5b9a\u5b89\u88c5\u8def\u5f84\u3002\u5982\u4e0d\u8bbe\u7f6e\uff0c\u7cfb\u7edf\u4f1a\u5c06NebulaGraph\u5b89\u88c5\u5230\u9ed8\u8ba4\u8def\u5f84 /usr/local/nebula/ \u3002 \u4f8b\u5982\uff0c\u8981\u5728\u9ed8\u8ba4\u8def\u5f84\u4e0b\u5b89\u88c53.6.0\u7248\u672c\u7684 RPM \u5305\uff0c\u8fd0\u884c\u5982\u4e0b\u547d\u4ee4\uff1a sudo rpm -ivh nebula-graph-3.6.0.el7.x86_64.rpm \u5b89\u88c5 DEB \u5305 $ sudo dpkg -i <package_name> Note \u4f7f\u7528 DEB \u5305\u5b89\u88c5NebulaGraph\u65f6\u4e0d\u652f\u6301\u81ea\u5b9a\u4e49\u5b89\u88c5\u8def\u5f84\u3002\u9ed8\u8ba4\u5b89\u88c5\u8def\u5f84\u4e3a /usr/local/nebula/ \u3002 \u4f8b\u5982\u5b89\u88c53.6.0\u7248\u672c\u7684 DEB \u5305\uff1a sudo dpkg -i nebula-graph-3.6.0.ubuntu1804.amd64.deb","title":"\u5b89\u88c5NebulaGraph"},{"location":"4.deployment-and-installation/2.compile-and-install-nebula-graph/2.install-nebula-graph-by-rpm-or-deb/#_3","text":"\u542f\u52a8NebulaGraph \u8fde\u63a5NebulaGraph","title":"\u540e\u7eed\u64cd\u4f5c"},{"location":"4.deployment-and-installation/2.compile-and-install-nebula-graph/3.deploy-nebula-graph-with-docker-compose/","text":"\u4f7f\u7528 Docker Compose \u90e8\u7f72NebulaGraph \u00b6 \u4f7f\u7528 Docker Compose \u53ef\u4ee5\u57fa\u4e8e\u51c6\u5907\u597d\u7684\u914d\u7f6e\u6587\u4ef6\u5feb\u901f\u90e8\u7f72NebulaGraph\u670d\u52a1\uff0c\u4ec5\u5efa\u8bae\u5728\u6d4b\u8bd5NebulaGraph\u529f\u80fd\u65f6\u4f7f\u7528\u8be5\u65b9\u5f0f\u3002 \u524d\u63d0\u6761\u4ef6 \u00b6 \u4e3b\u673a\u4e0a\u5b89\u88c5\u5982\u4e0b\u5e94\u7528\u7a0b\u5e8f\u3002 \u5e94\u7528\u7a0b\u5e8f \u63a8\u8350\u7248\u672c \u5b98\u65b9\u5b89\u88c5\u53c2\u8003 Docker \u6700\u65b0\u7248\u672c Install Docker Engine Docker Compose \u6700\u65b0\u7248\u672c Install Docker Compose Git \u6700\u65b0\u7248\u672c Download Git \u5982\u679c\u4f7f\u7528\u975e root \u7528\u6237\u90e8\u7f72NebulaGraph\uff0c\u8bf7\u6388\u6743\u8be5\u7528\u6237 Docker \u76f8\u5173\u7684\u6743\u9650\u3002\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u89c1 Manage Docker as a non-root user \u3002 \u542f\u52a8\u4e3b\u673a\u4e0a\u7684 Docker \u670d\u52a1\u3002 \u5982\u679c\u5df2\u7ecf\u901a\u8fc7 Docker Compose \u5728\u4e3b\u673a\u4e0a\u90e8\u7f72\u4e86\u53e6\u4e00\u4e2a\u7248\u672c\u7684NebulaGraph\uff0c\u4e3a\u907f\u514d\u517c\u5bb9\u6027\u95ee\u9898\uff0c\u9700\u8981\u5220\u9664\u76ee\u5f55 nebula-docker-compose/data \u3002 \u90e8\u7f72NebulaGraph \u00b6 \u901a\u8fc7 Git \u514b\u9686 nebula-docker-compose \u4ed3\u5e93\u7684 3.6.0 \u5206\u652f\u5230\u4e3b\u673a\u3002 Danger master \u5206\u652f\u5305\u542b\u6700\u65b0\u7684\u672a\u6d4b\u8bd5\u4ee3\u7801\u3002\u8bf7 \u4e0d\u8981 \u5728\u751f\u4ea7\u73af\u5883\u4f7f\u7528\u6b64\u7248\u672c\u3002 $ git clone -b release-3.6 https://github.com/vesoft-inc/nebula-docker-compose.git Note Docker Compose \u7684 x.y \u7248\u672c\u5bf9\u9f50\u5185\u6838\u7684 x.y \u7248\u672c\uff0c\u5bf9\u4e8e\u5185\u6838 z \u7248\u672c\uff0cDocker Compose \u4e0d\u4f1a\u53d1\u5e03\u5bf9\u5e94\u7684 z \u7248\u672c\uff0c\u4f46\u662f\u4f1a\u62c9\u53d6 z \u7248\u672c\u7684\u5185\u6838\u955c\u50cf\u3002 \u5207\u6362\u81f3\u76ee\u5f55 nebula-docker-compose \u3002 $ cd nebula-docker-compose/ \u6267\u884c\u5982\u4e0b\u547d\u4ee4\u542f\u52a8NebulaGraph\u670d\u52a1\u3002 Note \u5982\u679c\u957f\u671f\u672a\u5185\u6838\u66f4\u65b0\u955c\u50cf\uff0c\u8bf7\u5148\u66f4\u65b0 NebulaGraph\u955c\u50cf \u548c NebulaGraph Console \u955c\u50cf \u3002 \u6267\u884c\u547d\u4ee4\u540e\u7684\u8fd4\u56de\u7ed3\u679c\u56e0\u5b89\u88c5\u76ee\u5f55\u4e0d\u540c\u800c\u4e0d\u540c\u3002 [ nebula-docker-compose ] $ docker-compose up -d Creating nebula-docker-compose_metad0_1 ... done Creating nebula-docker-compose_metad2_1 ... done Creating nebula-docker-compose_metad1_1 ... done Creating nebula-docker-compose_graphd2_1 ... done Creating nebula-docker-compose_graphd_1 ... done Creating nebula-docker-compose_graphd1_1 ... done Creating nebula-docker-compose_storaged0_1 ... done Creating nebula-docker-compose_storaged2_1 ... done Creating nebula-docker-compose_storaged1_1 ... done Compatibility \u4ece 3.1 \u7248\u672c\u5f00\u59cb\uff0cDocker-compose \u4f1a\u81ea\u52a8\u542f\u52a8 NebulaGraph Console \u955c\u50cf\u7684\u5bb9\u5668\uff0c\u5e76\u5c06 Storage \u4e3b\u673a\u589e\u52a0\u81f3\u96c6\u7fa4\u4e2d\uff08\u5373 ADD HOSTS \u547d\u4ee4\uff09\u3002 Note \u4e0a\u8ff0\u670d\u52a1\u7684\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u89c1 \u67b6\u6784\u603b\u89c8 \u3002 \u8fde\u63a5NebulaGraph \u00b6 \u8fde\u63a5NebulaGraph\u6709\u4e24\u79cd\u65b9\u5f0f\uff1a \u5728\u5bb9\u5668\u5916\u901a\u8fc7 Nebula Console \u8fde\u63a5\u3002\u56e0\u4e3a\u5bb9\u5668\u7684\u914d\u7f6e\u6587\u4ef6\u4e2d\u5c06 Graph \u670d\u52a1\u7684\u5916\u90e8\u6620\u5c04\u7aef\u53e3\u4e5f\u56fa\u5b9a\u4e3a 9669\uff0c\u56e0\u6b64\u53ef\u4ee5\u76f4\u63a5\u901a\u8fc7\u9ed8\u8ba4\u7aef\u53e3\u8fde\u63a5\u3002\u8be6\u60c5\u53c2\u89c1 \u8fde\u63a5NebulaGraph \u3002 \u767b\u5f55\u5b89\u88c5\u4e86 NebulaGraph Console \u7684\u5bb9\u5668\uff0c\u7136\u540e\u518d\u8fde\u63a5 Graph \u670d\u52a1\u3002\u672c\u5c0f\u8282\u4ecb\u7ecd\u8fd9\u79cd\u65b9\u5f0f\u3002 \u4f7f\u7528 docker-compose ps \u547d\u4ee4\u67e5\u770b NebulaGraph Console \u5bb9\u5668\u540d\u79f0\u3002 $ docker-compose ps Name Command State Ports ---------------------------------------------------------------------------------------------- nebula-docker-compose_console_1 sh -c sleep 3 && Up nebula-co ... ...... \u8fdb\u5165 NebulaGraph Console \u5bb9\u5668\u4e2d\u3002 $ docker exec -it nebula-docker-compose_console_1 /bin/sh / # \u901a\u8fc7 NebulaGraph Console \u8fde\u63a5NebulaGraph\u3002 / # ./usr/local/bin/nebula-console -u <user_name> -p <password> --address=graphd --port=9669 Note \u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u8eab\u4efd\u8ba4\u8bc1\u529f\u80fd\u662f\u5173\u95ed\u7684\uff0c\u53ea\u80fd\u4f7f\u7528\u5df2\u5b58\u5728\u7684\u7528\u6237\u540d\uff08\u9ed8\u8ba4\u4e3a root \uff09\u548c\u4efb\u610f\u5bc6\u7801\u767b\u5f55\u3002\u5982\u679c\u60f3\u4f7f\u7528\u8eab\u4efd\u8ba4\u8bc1\uff0c\u8bf7\u53c2\u89c1 \u8eab\u4efd\u8ba4\u8bc1 \u3002 \u67e5\u770b\u96c6\u7fa4\u72b6\u6001\u3002 nebula> SHOW HOSTS ; +-------------+------+----------+--------------+----------------------+------------------------+---------+ | Host | Port | Status | Leader count | Leader distribution | Partition distribution | Version | +-------------+------+----------+--------------+----------------------+------------------------+---------+ | \"storaged0\" | 9779 | \"ONLINE\" | 0 | \"No valid partition\" | \"No valid partition\" | \"3.6.0\" | | \"storaged1\" | 9779 | \"ONLINE\" | 0 | \"No valid partition\" | \"No valid partition\" | \"3.6.0\" | | \"storaged2\" | 9779 | \"ONLINE\" | 0 | \"No valid partition\" | \"No valid partition\" | \"3.6.0\" | +-------------+------+----------+--------------+----------------------+------------------------+---------+ \u6267\u884c\u4e24\u6b21 exit \u53ef\u4ee5\u9000\u51fa\u5bb9\u5668\u3002 \u67e5\u770bNebulaGraph\u670d\u52a1\u7684\u72b6\u6001\u548c\u7aef\u53e3 \u00b6 \u6267\u884c\u547d\u4ee4 docker-compose ps \u53ef\u4ee5\u5217\u51faNebulaGraph\u670d\u52a1\u7684\u72b6\u6001\u548c\u7aef\u53e3\u3002 Note NebulaGraph\u9ed8\u8ba4\u4f7f\u7528 9669 \u7aef\u53e3\u4e3a\u5ba2\u6237\u7aef\u63d0\u4f9b\u670d\u52a1\uff0c\u5982\u679c\u9700\u8981\u4fee\u6539\u7aef\u53e3\uff0c\u8bf7\u4fee\u6539\u76ee\u5f55 nebula-docker-compose \u5185\u7684\u6587\u4ef6 docker-compose.yaml \uff0c\u7136\u540e\u91cd\u542fNebulaGraph\u670d\u52a1\u3002 $ docker-compose ps nebula-docker-compose_console_1 sh -c sleep 3 && Up nebula-co ... nebula-docker-compose_graphd1_1 /usr/local/nebula/bin/nebu ... Up 0 .0.0.0:49174->19669/tcp,:::49174->19669/tcp, 0 .0.0.0:49171->19670/tcp,:::49171->19670/tcp, 0 .0.0.0:49177->9669/tcp,:::49177->9669/tcp nebula-docker-compose_graphd2_1 /usr/local/nebula/bin/nebu ... Up 0 .0.0.0:49175->19669/tcp,:::49175->19669/tcp, 0 .0.0.0:49172->19670/tcp,:::49172->19670/tcp, 0 .0.0.0:49178->9669/tcp,:::49178->9669/tcp nebula-docker-compose_graphd_1 /usr/local/nebula/bin/nebu ... Up 0 .0.0.0:49180->19669/tcp,:::49180->19669/tcp, 0 .0.0.0:49179->19670/tcp,:::49179->19670/tcp, 0 .0.0.0:9669->9669/tcp,:::9669->9669/tcp nebula-docker-compose_metad0_1 /usr/local/nebula/bin/nebu ... Up 0 .0.0.0:49157->19559/tcp,:::49157->19559/tcp, 0 .0.0.0:49154->19560/tcp,:::49154->19560/tcp, 0 .0.0.0:49160->9559/tcp,:::49160->9559/tcp, 9560 /tcp nebula-docker-compose_metad1_1 /usr/local/nebula/bin/nebu ... Up 0 .0.0.0:49156->19559/tcp,:::49156->19559/tcp, 0 .0.0.0:49153->19560/tcp,:::49153->19560/tcp, 0 .0.0.0:49159->9559/tcp,:::49159->9559/tcp, 9560 /tcp nebula-docker-compose_metad2_1 /usr/local/nebula/bin/nebu ... Up 0 .0.0.0:49158->19559/tcp,:::49158->19559/tcp, 0 .0.0.0:49155->19560/tcp,:::49155->19560/tcp, 0 .0.0.0:49161->9559/tcp,:::49161->9559/tcp, 9560 /tcp nebula-docker-compose_storaged0_1 /usr/local/nebula/bin/nebu ... Up 0 .0.0.0:49166->19779/tcp,:::49166->19779/tcp, 0 .0.0.0:49163->19780/tcp,:::49163->19780/tcp, 9777 /tcp, 9778 /tcp, 0 .0.0.0:49169->9779/tcp,:::49169->9779/tcp, 9780 /tcp nebula-docker-compose_storaged1_1 /usr/local/nebula/bin/nebu ... Up 0 .0.0.0:49165->19779/tcp,:::49165->19779/tcp, 0 .0.0.0:49162->19780/tcp,:::49162->19780/tcp, 9777 /tcp, 9778 /tcp, 0 .0.0.0:49168->9779/tcp,:::49168->9779/tcp, 9780 /tcp nebula-docker-compose_storaged2_1 /usr/local/nebula/bin/nebu ... Up 0 .0.0.0:49167->19779/tcp,:::49167->19779/tcp, 0 .0.0.0:49164->19780/tcp,:::49164->19780/tcp, 9777 /tcp, 9778 /tcp, 0 .0.0.0:49170->9779/tcp,:::49170->9779/tcp, 9780 /tcp \u5982\u679c\u670d\u52a1\u6709\u5f02\u5e38\uff0c\u7528\u6237\u53ef\u4ee5\u5148\u786e\u8ba4\u5f02\u5e38\u7684\u5bb9\u5668\u540d\u79f0\uff08\u4f8b\u5982 nebula-docker-compose_graphd2_1 \uff09, \u7136\u540e\u6267\u884c docker ps \u67e5\u770b\u5bf9\u5e94\u7684 CONTAINER ID \uff08\u793a\u4f8b\u4e3a 2a6c56c405f5 )\u3002 [ nebula-docker-compose ] $ docker ps CONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES 2a6c56c405f5 vesoft/nebula-graphd:nightly \"/usr/local/nebula/b\u2026\" 36 minutes ago Up 36 minutes ( healthy ) 0 .0.0.0:49230->9669/tcp, 0 .0.0.0:49229->19669/tcp, 0 .0.0.0:49228->19670/tcp nebula-docker-compose_graphd2_1 7042e0a8e83d vesoft/nebula-storaged:nightly \"./bin/nebula-storag\u2026\" 36 minutes ago Up 36 minutes ( healthy ) 9777 -9778/tcp, 9780 /tcp, 0 .0.0.0:49227->9779/tcp, 0 .0.0.0:49226->19779/tcp, 0 .0.0.0:49225->19780/tcp nebula-docker-compose_storaged2_1 18e3ea63ad65 vesoft/nebula-storaged:nightly \"./bin/nebula-storag\u2026\" 36 minutes ago Up 36 minutes ( healthy ) 9777 -9778/tcp, 9780 /tcp, 0 .0.0.0:49219->9779/tcp, 0 .0.0.0:49218->19779/tcp, 0 .0.0.0:49217->19780/tcp nebula-docker-compose_storaged0_1 4dcabfe8677a vesoft/nebula-graphd:nightly \"/usr/local/nebula/b\u2026\" 36 minutes ago Up 36 minutes ( healthy ) 0 .0.0.0:49224->9669/tcp, 0 .0.0.0:49223->19669/tcp, 0 .0.0.0:49222->19670/tcp nebula-docker-compose_graphd1_1 a74054c6ae25 vesoft/nebula-graphd:nightly \"/usr/local/nebula/b\u2026\" 36 minutes ago Up 36 minutes ( healthy ) 0 .0.0.0:9669->9669/tcp, 0 .0.0.0:49221->19669/tcp, 0 .0.0.0:49220->19670/tcp nebula-docker-compose_graphd_1 880025a3858c vesoft/nebula-storaged:nightly \"./bin/nebula-storag\u2026\" 36 minutes ago Up 36 minutes ( healthy ) 9777 -9778/tcp, 9780 /tcp, 0 .0.0.0:49216->9779/tcp, 0 .0.0.0:49215->19779/tcp, 0 .0.0.0:49214->19780/tcp nebula-docker-compose_storaged1_1 45736a32a23a vesoft/nebula-metad:nightly \"./bin/nebula-metad \u2026\" 36 minutes ago Up 36 minutes ( healthy ) 9560 /tcp, 0 .0.0.0:49213->9559/tcp, 0 .0.0.0:49212->19559/tcp, 0 .0.0.0:49211->19560/tcp nebula-docker-compose_metad0_1 3b2c90eb073e vesoft/nebula-metad:nightly \"./bin/nebula-metad \u2026\" 36 minutes ago Up 36 minutes ( healthy ) 9560 /tcp, 0 .0.0.0:49207->9559/tcp, 0 .0.0.0:49206->19559/tcp, 0 .0.0.0:49205->19560/tcp nebula-docker-compose_metad2_1 7bb31b7a5b3f vesoft/nebula-metad:nightly \"./bin/nebula-metad \u2026\" 36 minutes ago Up 36 minutes ( healthy ) 9560 /tcp, 0 .0.0.0:49210->9559/tcp, 0 .0.0.0:49209->19559/tcp, 0 .0.0.0:49208->19560/tcp nebula-docker-compose_metad1_1 \u6700\u540e\u767b\u5f55\u5bb9\u5668\u6392\u67e5\u95ee\u9898 [ nebula-docker-compose ] $ docker exec -it 2a6c56c405f5 bash [ root@2a6c56c405f5 nebula ] # \u67e5\u770bNebulaGraph\u670d\u52a1\u7684\u6570\u636e\u548c\u65e5\u5fd7 \u00b6 NebulaGraph\u7684\u6240\u6709\u6570\u636e\u548c\u65e5\u5fd7\u90fd\u6301\u4e45\u5316\u5b58\u50a8\u5728 nebula-docker-compose/data \u548c nebula-docker-compose/logs \u76ee\u5f55\u4e2d\u3002 \u76ee\u5f55\u7684\u7ed3\u6784\u5982\u4e0b\uff1a nebula-docker-compose/ |-- docker-compose.yaml \u251c\u2500\u2500 data \u2502 \u251c\u2500\u2500 meta0 \u2502 \u251c\u2500\u2500 meta1 \u2502 \u251c\u2500\u2500 meta2 \u2502 \u251c\u2500\u2500 storage0 \u2502 \u251c\u2500\u2500 storage1 \u2502 \u2514\u2500\u2500 storage2 \u2514\u2500\u2500 logs \u251c\u2500\u2500 graph \u251c\u2500\u2500 graph1 \u251c\u2500\u2500 graph2 \u251c\u2500\u2500 meta0 \u251c\u2500\u2500 meta1 \u251c\u2500\u2500 meta2 \u251c\u2500\u2500 storage0 \u251c\u2500\u2500 storage1 \u2514\u2500\u2500 storage2 \u505c\u6b62NebulaGraph\u670d\u52a1 \u00b6 \u7528\u6237\u53ef\u4ee5\u6267\u884c\u5982\u4e0b\u547d\u4ee4\u505c\u6b62NebulaGraph\u670d\u52a1\uff1a $ docker-compose down \u5982\u679c\u8fd4\u56de\u5982\u4e0b\u4fe1\u606f\uff0c\u8868\u793a\u5df2\u7ecf\u6210\u529f\u505c\u6b62\u670d\u52a1\u3002 Stopping nebula-docker-compose_console_1 ... done Stopping nebula-docker-compose_graphd1_1 ... done Stopping nebula-docker-compose_graphd_1 ... done Stopping nebula-docker-compose_graphd2_1 ... done Stopping nebula-docker-compose_storaged1_1 ... done Stopping nebula-docker-compose_storaged0_1 ... done Stopping nebula-docker-compose_storaged2_1 ... done Stopping nebula-docker-compose_metad2_1 ... done Stopping nebula-docker-compose_metad0_1 ... done Stopping nebula-docker-compose_metad1_1 ... done Removing nebula-docker-compose_console_1 ... done Removing nebula-docker-compose_graphd1_1 ... done Removing nebula-docker-compose_graphd_1 ... done Removing nebula-docker-compose_graphd2_1 ... done Removing nebula-docker-compose_storaged1_1 ... done Removing nebula-docker-compose_storaged0_1 ... done Removing nebula-docker-compose_storaged2_1 ... done Removing nebula-docker-compose_metad2_1 ... done Removing nebula-docker-compose_metad0_1 ... done Removing nebula-docker-compose_metad1_1 ... done Removing network nebula-docker-compose_nebula-net Danger \u547d\u4ee4 docker-compose down -v \u7684\u53c2\u6570 -v \u5c06\u4f1a \u5220\u9664 \u6240\u6709\u672c\u5730\u7684\u6570\u636e\u3002\u5982\u679c\u4f7f\u7528\u7684\u662f nightly \u7248\u672c\uff0c\u5e76\u4e14\u6709\u4e00\u4e9b\u517c\u5bb9\u6027\u95ee\u9898\uff0c\u8bf7\u5c1d\u8bd5\u8fd9\u4e2a\u547d\u4ee4\u3002 \u4fee\u6539\u914d\u7f6e \u00b6 Docker Compose \u90e8\u7f72\u7684NebulaGraph\uff0c\u914d\u7f6e\u6587\u4ef6\u4f4d\u7f6e\u4e3a nebula-docker-compose/docker-compose.yaml \uff0c\u4fee\u6539\u8be5\u6587\u4ef6\u5185\u7684\u914d\u7f6e\u5e76\u91cd\u542f\u670d\u52a1\u5373\u53ef\u4f7f\u65b0\u914d\u7f6e\u751f\u6548\u3002 \u5177\u4f53\u7684\u914d\u7f6e\u8bf4\u660e\u8bf7\u53c2\u89c1 \u914d\u7f6e\u7ba1\u7406 \u3002 \u5e38\u89c1\u95ee\u9898 \u00b6 \u5982\u4f55\u56fa\u5b9a Docker \u6620\u5c04\u5230\u5916\u90e8\u7684\u7aef\u53e3\uff1f \u00b6 \u5728\u76ee\u5f55 nebula-docker-compose \u5185\u4fee\u6539\u6587\u4ef6 docker-compose.yaml \uff0c\u5c06\u5bf9\u5e94\u670d\u52a1\u7684 ports \u8bbe\u7f6e\u4e3a\u56fa\u5b9a\u6620\u5c04\uff0c\u4f8b\u5982\uff1a graphd: image: vesoft/nebula-graphd:release-3.6 ... ports: - 9669 :9669 - 19669 - 19670 9669:9669 \u8868\u793a\u5185\u90e8\u7684 9669 \u6620\u5c04\u5230\u5916\u90e8\u7684\u7aef\u53e3\u4e5f\u662f 9669\uff0c\u4e0b\u65b9\u7684 19669 \u8868\u793a\u5185\u90e8\u7684 19669 \u6620\u5c04\u5230\u5916\u90e8\u7684\u7aef\u53e3\u662f\u968f\u673a\u7684\u3002 \u5982\u4f55\u5347\u7ea7/\u66f4\u65b0NebulaGraph\u670d\u52a1\u7684 Docker \u955c\u50cf\uff1f \u00b6 \u5728\u6587\u4ef6 nebula-docker-compose/docker-compose.yaml \u4e2d\uff0c\u627e\u5230\u6240\u6709\u670d\u52a1\u7684 image \u5e76\u4fee\u6539\u5176\u503c\u4e3a\u76f8\u5e94\u7684\u955c\u50cf\u7248\u672c\u3002 \u5728\u76ee\u5f55 nebula-docker-compose \u5185\u6267\u884c\u547d\u4ee4 docker-compose pull \uff0c\u66f4\u65b0 Graph \u670d\u52a1\u3001Storage \u670d\u52a1\u3001Meta \u670d\u52a1\u548c NebulaGraph Console \u7684\u955c\u50cf\u3002 \u6267\u884c\u547d\u4ee4 docker-compose up -d \u542f\u52a8NebulaGraph\u670d\u52a1\u3002 \u901a\u8fc7 NebulaGraph Console \u8fde\u63a5NebulaGraph\u540e\uff0c\u5206\u522b\u6267\u884c\u547d\u4ee4 SHOW HOSTS GRAPH \u3001 SHOW HOSTS STORAGE \u3001 SHOW HOSTS META \u67e5\u770b\u5404\u670d\u52a1\u7248\u672c\u3002 \u6267\u884c\u547d\u4ee4 docker-compose pull \u62a5\u9519 ERROR: toomanyrequests \u00b6 \u53ef\u80fd\u9047\u5230\u5982\u4e0b\u9519\u8bef\uff1a ERROR: toomanyrequests: You have reached your pull rate limit. You may increase the limit by authenticating and upgrading: https://www.docker.com/increase-rate-limit \u4ee5\u4e0a\u9519\u8bef\u8868\u793a\u5df2\u8fbe\u5230 Docker Hub \u7684\u901f\u7387\u9650\u5236\u3002\u89e3\u51b3\u65b9\u6848\u8bf7\u53c2\u89c1 Understanding Docker Hub Rate Limiting \u3002 \u5982\u4f55\u66f4\u65b0 NebulaGraph Console\uff1f \u00b6 docker-compose pull \u4f1a\u540c\u65f6\u66f4\u65b0NebulaGraph\u670d\u52a1\u548c NebulaGraph Console\u3002","title":"\u4f7f\u7528 Docker Compose \u5b89\u88c5"},{"location":"4.deployment-and-installation/2.compile-and-install-nebula-graph/3.deploy-nebula-graph-with-docker-compose/#docker_compose_nebulagraph","text":"\u4f7f\u7528 Docker Compose \u53ef\u4ee5\u57fa\u4e8e\u51c6\u5907\u597d\u7684\u914d\u7f6e\u6587\u4ef6\u5feb\u901f\u90e8\u7f72NebulaGraph\u670d\u52a1\uff0c\u4ec5\u5efa\u8bae\u5728\u6d4b\u8bd5NebulaGraph\u529f\u80fd\u65f6\u4f7f\u7528\u8be5\u65b9\u5f0f\u3002","title":"\u4f7f\u7528 Docker Compose \u90e8\u7f72NebulaGraph"},{"location":"4.deployment-and-installation/2.compile-and-install-nebula-graph/3.deploy-nebula-graph-with-docker-compose/#_1","text":"\u4e3b\u673a\u4e0a\u5b89\u88c5\u5982\u4e0b\u5e94\u7528\u7a0b\u5e8f\u3002 \u5e94\u7528\u7a0b\u5e8f \u63a8\u8350\u7248\u672c \u5b98\u65b9\u5b89\u88c5\u53c2\u8003 Docker \u6700\u65b0\u7248\u672c Install Docker Engine Docker Compose \u6700\u65b0\u7248\u672c Install Docker Compose Git \u6700\u65b0\u7248\u672c Download Git \u5982\u679c\u4f7f\u7528\u975e root \u7528\u6237\u90e8\u7f72NebulaGraph\uff0c\u8bf7\u6388\u6743\u8be5\u7528\u6237 Docker \u76f8\u5173\u7684\u6743\u9650\u3002\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u89c1 Manage Docker as a non-root user \u3002 \u542f\u52a8\u4e3b\u673a\u4e0a\u7684 Docker \u670d\u52a1\u3002 \u5982\u679c\u5df2\u7ecf\u901a\u8fc7 Docker Compose \u5728\u4e3b\u673a\u4e0a\u90e8\u7f72\u4e86\u53e6\u4e00\u4e2a\u7248\u672c\u7684NebulaGraph\uff0c\u4e3a\u907f\u514d\u517c\u5bb9\u6027\u95ee\u9898\uff0c\u9700\u8981\u5220\u9664\u76ee\u5f55 nebula-docker-compose/data \u3002","title":"\u524d\u63d0\u6761\u4ef6"},{"location":"4.deployment-and-installation/2.compile-and-install-nebula-graph/3.deploy-nebula-graph-with-docker-compose/#nebulagraph","text":"\u901a\u8fc7 Git \u514b\u9686 nebula-docker-compose \u4ed3\u5e93\u7684 3.6.0 \u5206\u652f\u5230\u4e3b\u673a\u3002 Danger master \u5206\u652f\u5305\u542b\u6700\u65b0\u7684\u672a\u6d4b\u8bd5\u4ee3\u7801\u3002\u8bf7 \u4e0d\u8981 \u5728\u751f\u4ea7\u73af\u5883\u4f7f\u7528\u6b64\u7248\u672c\u3002 $ git clone -b release-3.6 https://github.com/vesoft-inc/nebula-docker-compose.git Note Docker Compose \u7684 x.y \u7248\u672c\u5bf9\u9f50\u5185\u6838\u7684 x.y \u7248\u672c\uff0c\u5bf9\u4e8e\u5185\u6838 z \u7248\u672c\uff0cDocker Compose \u4e0d\u4f1a\u53d1\u5e03\u5bf9\u5e94\u7684 z \u7248\u672c\uff0c\u4f46\u662f\u4f1a\u62c9\u53d6 z \u7248\u672c\u7684\u5185\u6838\u955c\u50cf\u3002 \u5207\u6362\u81f3\u76ee\u5f55 nebula-docker-compose \u3002 $ cd nebula-docker-compose/ \u6267\u884c\u5982\u4e0b\u547d\u4ee4\u542f\u52a8NebulaGraph\u670d\u52a1\u3002 Note \u5982\u679c\u957f\u671f\u672a\u5185\u6838\u66f4\u65b0\u955c\u50cf\uff0c\u8bf7\u5148\u66f4\u65b0 NebulaGraph\u955c\u50cf \u548c NebulaGraph Console \u955c\u50cf \u3002 \u6267\u884c\u547d\u4ee4\u540e\u7684\u8fd4\u56de\u7ed3\u679c\u56e0\u5b89\u88c5\u76ee\u5f55\u4e0d\u540c\u800c\u4e0d\u540c\u3002 [ nebula-docker-compose ] $ docker-compose up -d Creating nebula-docker-compose_metad0_1 ... done Creating nebula-docker-compose_metad2_1 ... done Creating nebula-docker-compose_metad1_1 ... done Creating nebula-docker-compose_graphd2_1 ... done Creating nebula-docker-compose_graphd_1 ... done Creating nebula-docker-compose_graphd1_1 ... done Creating nebula-docker-compose_storaged0_1 ... done Creating nebula-docker-compose_storaged2_1 ... done Creating nebula-docker-compose_storaged1_1 ... done Compatibility \u4ece 3.1 \u7248\u672c\u5f00\u59cb\uff0cDocker-compose \u4f1a\u81ea\u52a8\u542f\u52a8 NebulaGraph Console \u955c\u50cf\u7684\u5bb9\u5668\uff0c\u5e76\u5c06 Storage \u4e3b\u673a\u589e\u52a0\u81f3\u96c6\u7fa4\u4e2d\uff08\u5373 ADD HOSTS \u547d\u4ee4\uff09\u3002 Note \u4e0a\u8ff0\u670d\u52a1\u7684\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u89c1 \u67b6\u6784\u603b\u89c8 \u3002","title":"\u90e8\u7f72NebulaGraph"},{"location":"4.deployment-and-installation/2.compile-and-install-nebula-graph/3.deploy-nebula-graph-with-docker-compose/#nebulagraph_1","text":"\u8fde\u63a5NebulaGraph\u6709\u4e24\u79cd\u65b9\u5f0f\uff1a \u5728\u5bb9\u5668\u5916\u901a\u8fc7 Nebula Console \u8fde\u63a5\u3002\u56e0\u4e3a\u5bb9\u5668\u7684\u914d\u7f6e\u6587\u4ef6\u4e2d\u5c06 Graph \u670d\u52a1\u7684\u5916\u90e8\u6620\u5c04\u7aef\u53e3\u4e5f\u56fa\u5b9a\u4e3a 9669\uff0c\u56e0\u6b64\u53ef\u4ee5\u76f4\u63a5\u901a\u8fc7\u9ed8\u8ba4\u7aef\u53e3\u8fde\u63a5\u3002\u8be6\u60c5\u53c2\u89c1 \u8fde\u63a5NebulaGraph \u3002 \u767b\u5f55\u5b89\u88c5\u4e86 NebulaGraph Console \u7684\u5bb9\u5668\uff0c\u7136\u540e\u518d\u8fde\u63a5 Graph \u670d\u52a1\u3002\u672c\u5c0f\u8282\u4ecb\u7ecd\u8fd9\u79cd\u65b9\u5f0f\u3002 \u4f7f\u7528 docker-compose ps \u547d\u4ee4\u67e5\u770b NebulaGraph Console \u5bb9\u5668\u540d\u79f0\u3002 $ docker-compose ps Name Command State Ports ---------------------------------------------------------------------------------------------- nebula-docker-compose_console_1 sh -c sleep 3 && Up nebula-co ... ...... \u8fdb\u5165 NebulaGraph Console \u5bb9\u5668\u4e2d\u3002 $ docker exec -it nebula-docker-compose_console_1 /bin/sh / # \u901a\u8fc7 NebulaGraph Console \u8fde\u63a5NebulaGraph\u3002 / # ./usr/local/bin/nebula-console -u <user_name> -p <password> --address=graphd --port=9669 Note \u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u8eab\u4efd\u8ba4\u8bc1\u529f\u80fd\u662f\u5173\u95ed\u7684\uff0c\u53ea\u80fd\u4f7f\u7528\u5df2\u5b58\u5728\u7684\u7528\u6237\u540d\uff08\u9ed8\u8ba4\u4e3a root \uff09\u548c\u4efb\u610f\u5bc6\u7801\u767b\u5f55\u3002\u5982\u679c\u60f3\u4f7f\u7528\u8eab\u4efd\u8ba4\u8bc1\uff0c\u8bf7\u53c2\u89c1 \u8eab\u4efd\u8ba4\u8bc1 \u3002 \u67e5\u770b\u96c6\u7fa4\u72b6\u6001\u3002 nebula> SHOW HOSTS ; +-------------+------+----------+--------------+----------------------+------------------------+---------+ | Host | Port | Status | Leader count | Leader distribution | Partition distribution | Version | +-------------+------+----------+--------------+----------------------+------------------------+---------+ | \"storaged0\" | 9779 | \"ONLINE\" | 0 | \"No valid partition\" | \"No valid partition\" | \"3.6.0\" | | \"storaged1\" | 9779 | \"ONLINE\" | 0 | \"No valid partition\" | \"No valid partition\" | \"3.6.0\" | | \"storaged2\" | 9779 | \"ONLINE\" | 0 | \"No valid partition\" | \"No valid partition\" | \"3.6.0\" | +-------------+------+----------+--------------+----------------------+------------------------+---------+ \u6267\u884c\u4e24\u6b21 exit \u53ef\u4ee5\u9000\u51fa\u5bb9\u5668\u3002","title":"\u8fde\u63a5NebulaGraph"},{"location":"4.deployment-and-installation/2.compile-and-install-nebula-graph/3.deploy-nebula-graph-with-docker-compose/#nebulagraph_2","text":"\u6267\u884c\u547d\u4ee4 docker-compose ps \u53ef\u4ee5\u5217\u51faNebulaGraph\u670d\u52a1\u7684\u72b6\u6001\u548c\u7aef\u53e3\u3002 Note NebulaGraph\u9ed8\u8ba4\u4f7f\u7528 9669 \u7aef\u53e3\u4e3a\u5ba2\u6237\u7aef\u63d0\u4f9b\u670d\u52a1\uff0c\u5982\u679c\u9700\u8981\u4fee\u6539\u7aef\u53e3\uff0c\u8bf7\u4fee\u6539\u76ee\u5f55 nebula-docker-compose \u5185\u7684\u6587\u4ef6 docker-compose.yaml \uff0c\u7136\u540e\u91cd\u542fNebulaGraph\u670d\u52a1\u3002 $ docker-compose ps nebula-docker-compose_console_1 sh -c sleep 3 && Up nebula-co ... nebula-docker-compose_graphd1_1 /usr/local/nebula/bin/nebu ... Up 0 .0.0.0:49174->19669/tcp,:::49174->19669/tcp, 0 .0.0.0:49171->19670/tcp,:::49171->19670/tcp, 0 .0.0.0:49177->9669/tcp,:::49177->9669/tcp nebula-docker-compose_graphd2_1 /usr/local/nebula/bin/nebu ... Up 0 .0.0.0:49175->19669/tcp,:::49175->19669/tcp, 0 .0.0.0:49172->19670/tcp,:::49172->19670/tcp, 0 .0.0.0:49178->9669/tcp,:::49178->9669/tcp nebula-docker-compose_graphd_1 /usr/local/nebula/bin/nebu ... Up 0 .0.0.0:49180->19669/tcp,:::49180->19669/tcp, 0 .0.0.0:49179->19670/tcp,:::49179->19670/tcp, 0 .0.0.0:9669->9669/tcp,:::9669->9669/tcp nebula-docker-compose_metad0_1 /usr/local/nebula/bin/nebu ... Up 0 .0.0.0:49157->19559/tcp,:::49157->19559/tcp, 0 .0.0.0:49154->19560/tcp,:::49154->19560/tcp, 0 .0.0.0:49160->9559/tcp,:::49160->9559/tcp, 9560 /tcp nebula-docker-compose_metad1_1 /usr/local/nebula/bin/nebu ... Up 0 .0.0.0:49156->19559/tcp,:::49156->19559/tcp, 0 .0.0.0:49153->19560/tcp,:::49153->19560/tcp, 0 .0.0.0:49159->9559/tcp,:::49159->9559/tcp, 9560 /tcp nebula-docker-compose_metad2_1 /usr/local/nebula/bin/nebu ... Up 0 .0.0.0:49158->19559/tcp,:::49158->19559/tcp, 0 .0.0.0:49155->19560/tcp,:::49155->19560/tcp, 0 .0.0.0:49161->9559/tcp,:::49161->9559/tcp, 9560 /tcp nebula-docker-compose_storaged0_1 /usr/local/nebula/bin/nebu ... Up 0 .0.0.0:49166->19779/tcp,:::49166->19779/tcp, 0 .0.0.0:49163->19780/tcp,:::49163->19780/tcp, 9777 /tcp, 9778 /tcp, 0 .0.0.0:49169->9779/tcp,:::49169->9779/tcp, 9780 /tcp nebula-docker-compose_storaged1_1 /usr/local/nebula/bin/nebu ... Up 0 .0.0.0:49165->19779/tcp,:::49165->19779/tcp, 0 .0.0.0:49162->19780/tcp,:::49162->19780/tcp, 9777 /tcp, 9778 /tcp, 0 .0.0.0:49168->9779/tcp,:::49168->9779/tcp, 9780 /tcp nebula-docker-compose_storaged2_1 /usr/local/nebula/bin/nebu ... Up 0 .0.0.0:49167->19779/tcp,:::49167->19779/tcp, 0 .0.0.0:49164->19780/tcp,:::49164->19780/tcp, 9777 /tcp, 9778 /tcp, 0 .0.0.0:49170->9779/tcp,:::49170->9779/tcp, 9780 /tcp \u5982\u679c\u670d\u52a1\u6709\u5f02\u5e38\uff0c\u7528\u6237\u53ef\u4ee5\u5148\u786e\u8ba4\u5f02\u5e38\u7684\u5bb9\u5668\u540d\u79f0\uff08\u4f8b\u5982 nebula-docker-compose_graphd2_1 \uff09, \u7136\u540e\u6267\u884c docker ps \u67e5\u770b\u5bf9\u5e94\u7684 CONTAINER ID \uff08\u793a\u4f8b\u4e3a 2a6c56c405f5 )\u3002 [ nebula-docker-compose ] $ docker ps CONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES 2a6c56c405f5 vesoft/nebula-graphd:nightly \"/usr/local/nebula/b\u2026\" 36 minutes ago Up 36 minutes ( healthy ) 0 .0.0.0:49230->9669/tcp, 0 .0.0.0:49229->19669/tcp, 0 .0.0.0:49228->19670/tcp nebula-docker-compose_graphd2_1 7042e0a8e83d vesoft/nebula-storaged:nightly \"./bin/nebula-storag\u2026\" 36 minutes ago Up 36 minutes ( healthy ) 9777 -9778/tcp, 9780 /tcp, 0 .0.0.0:49227->9779/tcp, 0 .0.0.0:49226->19779/tcp, 0 .0.0.0:49225->19780/tcp nebula-docker-compose_storaged2_1 18e3ea63ad65 vesoft/nebula-storaged:nightly \"./bin/nebula-storag\u2026\" 36 minutes ago Up 36 minutes ( healthy ) 9777 -9778/tcp, 9780 /tcp, 0 .0.0.0:49219->9779/tcp, 0 .0.0.0:49218->19779/tcp, 0 .0.0.0:49217->19780/tcp nebula-docker-compose_storaged0_1 4dcabfe8677a vesoft/nebula-graphd:nightly \"/usr/local/nebula/b\u2026\" 36 minutes ago Up 36 minutes ( healthy ) 0 .0.0.0:49224->9669/tcp, 0 .0.0.0:49223->19669/tcp, 0 .0.0.0:49222->19670/tcp nebula-docker-compose_graphd1_1 a74054c6ae25 vesoft/nebula-graphd:nightly \"/usr/local/nebula/b\u2026\" 36 minutes ago Up 36 minutes ( healthy ) 0 .0.0.0:9669->9669/tcp, 0 .0.0.0:49221->19669/tcp, 0 .0.0.0:49220->19670/tcp nebula-docker-compose_graphd_1 880025a3858c vesoft/nebula-storaged:nightly \"./bin/nebula-storag\u2026\" 36 minutes ago Up 36 minutes ( healthy ) 9777 -9778/tcp, 9780 /tcp, 0 .0.0.0:49216->9779/tcp, 0 .0.0.0:49215->19779/tcp, 0 .0.0.0:49214->19780/tcp nebula-docker-compose_storaged1_1 45736a32a23a vesoft/nebula-metad:nightly \"./bin/nebula-metad \u2026\" 36 minutes ago Up 36 minutes ( healthy ) 9560 /tcp, 0 .0.0.0:49213->9559/tcp, 0 .0.0.0:49212->19559/tcp, 0 .0.0.0:49211->19560/tcp nebula-docker-compose_metad0_1 3b2c90eb073e vesoft/nebula-metad:nightly \"./bin/nebula-metad \u2026\" 36 minutes ago Up 36 minutes ( healthy ) 9560 /tcp, 0 .0.0.0:49207->9559/tcp, 0 .0.0.0:49206->19559/tcp, 0 .0.0.0:49205->19560/tcp nebula-docker-compose_metad2_1 7bb31b7a5b3f vesoft/nebula-metad:nightly \"./bin/nebula-metad \u2026\" 36 minutes ago Up 36 minutes ( healthy ) 9560 /tcp, 0 .0.0.0:49210->9559/tcp, 0 .0.0.0:49209->19559/tcp, 0 .0.0.0:49208->19560/tcp nebula-docker-compose_metad1_1 \u6700\u540e\u767b\u5f55\u5bb9\u5668\u6392\u67e5\u95ee\u9898 [ nebula-docker-compose ] $ docker exec -it 2a6c56c405f5 bash [ root@2a6c56c405f5 nebula ] #","title":"\u67e5\u770bNebulaGraph\u670d\u52a1\u7684\u72b6\u6001\u548c\u7aef\u53e3"},{"location":"4.deployment-and-installation/2.compile-and-install-nebula-graph/3.deploy-nebula-graph-with-docker-compose/#nebulagraph_3","text":"NebulaGraph\u7684\u6240\u6709\u6570\u636e\u548c\u65e5\u5fd7\u90fd\u6301\u4e45\u5316\u5b58\u50a8\u5728 nebula-docker-compose/data \u548c nebula-docker-compose/logs \u76ee\u5f55\u4e2d\u3002 \u76ee\u5f55\u7684\u7ed3\u6784\u5982\u4e0b\uff1a nebula-docker-compose/ |-- docker-compose.yaml \u251c\u2500\u2500 data \u2502 \u251c\u2500\u2500 meta0 \u2502 \u251c\u2500\u2500 meta1 \u2502 \u251c\u2500\u2500 meta2 \u2502 \u251c\u2500\u2500 storage0 \u2502 \u251c\u2500\u2500 storage1 \u2502 \u2514\u2500\u2500 storage2 \u2514\u2500\u2500 logs \u251c\u2500\u2500 graph \u251c\u2500\u2500 graph1 \u251c\u2500\u2500 graph2 \u251c\u2500\u2500 meta0 \u251c\u2500\u2500 meta1 \u251c\u2500\u2500 meta2 \u251c\u2500\u2500 storage0 \u251c\u2500\u2500 storage1 \u2514\u2500\u2500 storage2","title":"\u67e5\u770bNebulaGraph\u670d\u52a1\u7684\u6570\u636e\u548c\u65e5\u5fd7"},{"location":"4.deployment-and-installation/2.compile-and-install-nebula-graph/3.deploy-nebula-graph-with-docker-compose/#nebulagraph_4","text":"\u7528\u6237\u53ef\u4ee5\u6267\u884c\u5982\u4e0b\u547d\u4ee4\u505c\u6b62NebulaGraph\u670d\u52a1\uff1a $ docker-compose down \u5982\u679c\u8fd4\u56de\u5982\u4e0b\u4fe1\u606f\uff0c\u8868\u793a\u5df2\u7ecf\u6210\u529f\u505c\u6b62\u670d\u52a1\u3002 Stopping nebula-docker-compose_console_1 ... done Stopping nebula-docker-compose_graphd1_1 ... done Stopping nebula-docker-compose_graphd_1 ... done Stopping nebula-docker-compose_graphd2_1 ... done Stopping nebula-docker-compose_storaged1_1 ... done Stopping nebula-docker-compose_storaged0_1 ... done Stopping nebula-docker-compose_storaged2_1 ... done Stopping nebula-docker-compose_metad2_1 ... done Stopping nebula-docker-compose_metad0_1 ... done Stopping nebula-docker-compose_metad1_1 ... done Removing nebula-docker-compose_console_1 ... done Removing nebula-docker-compose_graphd1_1 ... done Removing nebula-docker-compose_graphd_1 ... done Removing nebula-docker-compose_graphd2_1 ... done Removing nebula-docker-compose_storaged1_1 ... done Removing nebula-docker-compose_storaged0_1 ... done Removing nebula-docker-compose_storaged2_1 ... done Removing nebula-docker-compose_metad2_1 ... done Removing nebula-docker-compose_metad0_1 ... done Removing nebula-docker-compose_metad1_1 ... done Removing network nebula-docker-compose_nebula-net Danger \u547d\u4ee4 docker-compose down -v \u7684\u53c2\u6570 -v \u5c06\u4f1a \u5220\u9664 \u6240\u6709\u672c\u5730\u7684\u6570\u636e\u3002\u5982\u679c\u4f7f\u7528\u7684\u662f nightly \u7248\u672c\uff0c\u5e76\u4e14\u6709\u4e00\u4e9b\u517c\u5bb9\u6027\u95ee\u9898\uff0c\u8bf7\u5c1d\u8bd5\u8fd9\u4e2a\u547d\u4ee4\u3002","title":"\u505c\u6b62NebulaGraph\u670d\u52a1"},{"location":"4.deployment-and-installation/2.compile-and-install-nebula-graph/3.deploy-nebula-graph-with-docker-compose/#_2","text":"Docker Compose \u90e8\u7f72\u7684NebulaGraph\uff0c\u914d\u7f6e\u6587\u4ef6\u4f4d\u7f6e\u4e3a nebula-docker-compose/docker-compose.yaml \uff0c\u4fee\u6539\u8be5\u6587\u4ef6\u5185\u7684\u914d\u7f6e\u5e76\u91cd\u542f\u670d\u52a1\u5373\u53ef\u4f7f\u65b0\u914d\u7f6e\u751f\u6548\u3002 \u5177\u4f53\u7684\u914d\u7f6e\u8bf4\u660e\u8bf7\u53c2\u89c1 \u914d\u7f6e\u7ba1\u7406 \u3002","title":"\u4fee\u6539\u914d\u7f6e"},{"location":"4.deployment-and-installation/2.compile-and-install-nebula-graph/3.deploy-nebula-graph-with-docker-compose/#_3","text":"","title":"\u5e38\u89c1\u95ee\u9898"},{"location":"4.deployment-and-installation/2.compile-and-install-nebula-graph/3.deploy-nebula-graph-with-docker-compose/#docker","text":"\u5728\u76ee\u5f55 nebula-docker-compose \u5185\u4fee\u6539\u6587\u4ef6 docker-compose.yaml \uff0c\u5c06\u5bf9\u5e94\u670d\u52a1\u7684 ports \u8bbe\u7f6e\u4e3a\u56fa\u5b9a\u6620\u5c04\uff0c\u4f8b\u5982\uff1a graphd: image: vesoft/nebula-graphd:release-3.6 ... ports: - 9669 :9669 - 19669 - 19670 9669:9669 \u8868\u793a\u5185\u90e8\u7684 9669 \u6620\u5c04\u5230\u5916\u90e8\u7684\u7aef\u53e3\u4e5f\u662f 9669\uff0c\u4e0b\u65b9\u7684 19669 \u8868\u793a\u5185\u90e8\u7684 19669 \u6620\u5c04\u5230\u5916\u90e8\u7684\u7aef\u53e3\u662f\u968f\u673a\u7684\u3002","title":"\u5982\u4f55\u56fa\u5b9a Docker \u6620\u5c04\u5230\u5916\u90e8\u7684\u7aef\u53e3\uff1f"},{"location":"4.deployment-and-installation/2.compile-and-install-nebula-graph/3.deploy-nebula-graph-with-docker-compose/#nebulagraph_docker","text":"\u5728\u6587\u4ef6 nebula-docker-compose/docker-compose.yaml \u4e2d\uff0c\u627e\u5230\u6240\u6709\u670d\u52a1\u7684 image \u5e76\u4fee\u6539\u5176\u503c\u4e3a\u76f8\u5e94\u7684\u955c\u50cf\u7248\u672c\u3002 \u5728\u76ee\u5f55 nebula-docker-compose \u5185\u6267\u884c\u547d\u4ee4 docker-compose pull \uff0c\u66f4\u65b0 Graph \u670d\u52a1\u3001Storage \u670d\u52a1\u3001Meta \u670d\u52a1\u548c NebulaGraph Console \u7684\u955c\u50cf\u3002 \u6267\u884c\u547d\u4ee4 docker-compose up -d \u542f\u52a8NebulaGraph\u670d\u52a1\u3002 \u901a\u8fc7 NebulaGraph Console \u8fde\u63a5NebulaGraph\u540e\uff0c\u5206\u522b\u6267\u884c\u547d\u4ee4 SHOW HOSTS GRAPH \u3001 SHOW HOSTS STORAGE \u3001 SHOW HOSTS META \u67e5\u770b\u5404\u670d\u52a1\u7248\u672c\u3002","title":"\u5982\u4f55\u5347\u7ea7/\u66f4\u65b0NebulaGraph\u670d\u52a1\u7684 Docker \u955c\u50cf\uff1f"},{"location":"4.deployment-and-installation/2.compile-and-install-nebula-graph/3.deploy-nebula-graph-with-docker-compose/#docker-compose_pullerror_toomanyrequests","text":"\u53ef\u80fd\u9047\u5230\u5982\u4e0b\u9519\u8bef\uff1a ERROR: toomanyrequests: You have reached your pull rate limit. You may increase the limit by authenticating and upgrading: https://www.docker.com/increase-rate-limit \u4ee5\u4e0a\u9519\u8bef\u8868\u793a\u5df2\u8fbe\u5230 Docker Hub \u7684\u901f\u7387\u9650\u5236\u3002\u89e3\u51b3\u65b9\u6848\u8bf7\u53c2\u89c1 Understanding Docker Hub Rate Limiting \u3002","title":"\u6267\u884c\u547d\u4ee4docker-compose pull\u62a5\u9519ERROR: toomanyrequests"},{"location":"4.deployment-and-installation/2.compile-and-install-nebula-graph/3.deploy-nebula-graph-with-docker-compose/#nebulagraph_console","text":"docker-compose pull \u4f1a\u540c\u65f6\u66f4\u65b0NebulaGraph\u670d\u52a1\u548c NebulaGraph Console\u3002","title":"\u5982\u4f55\u66f4\u65b0 NebulaGraph Console\uff1f"},{"location":"4.deployment-and-installation/2.compile-and-install-nebula-graph/4.install-nebula-graph-from-tar/","text":"\u4f7f\u7528 tar.gz \u6587\u4ef6\u5b89\u88c5NebulaGraph \u00b6 \u7528\u6237\u53ef\u4ee5\u4e0b\u8f7d\u6253\u5305\u597d\u7684 tar.gz \u6587\u4ef6\u5feb\u901f\u5b89\u88c5NebulaGraph\u3002 Note NebulaGraph\u4ece 2.6.0 \u7248\u672c\u8d77\u63d0\u4f9b tar.gz \u6587\u4ef6\u3002 \u5f53\u524d\u4ec5\u652f\u6301\u5728 Linux \u7cfb\u7edf\u4e0b\u5b89\u88c5NebulaGraph\uff0c\u4e14\u4ec5\u652f\u6301 CentOS 7.x\u3001CentOS 8.x\u3001Ubuntu 16.04\u3001Ubuntu 18.04\u3001Ubuntu 20.04 \u64cd\u4f5c\u7cfb\u7edf\u3002 \u5982\u679c\u7528\u6237\u4f7f\u7528\u7684\u662f\u56fd\u4ea7\u5316\u7684 Linux \u64cd\u4f5c\u7cfb\u7edf\uff0c\u8bf7 \u5b89\u88c5NebulaGraph \u3002 \u64cd\u4f5c\u6b65\u9aa4 \u00b6 \u4f7f\u7528\u5982\u4e0b\u5730\u5740\u4e0b\u8f7dNebulaGraph\u7684 tar.gz \u6587\u4ef6\u3002 \u4e0b\u8f7d\u524d\u9700\u5c06 <release_version> \u66ff\u6362\u4e3a\u9700\u8981\u4e0b\u8f7d\u7684\u7248\u672c\u3002 //Centos 7 https://oss-cdn.nebula-graph.com.cn/package/<release_version>/nebula-graph-<release_version>.el7.x86_64.tar.gz //Checksum https://oss-cdn.nebula-graph.com.cn/package/<release_version>/nebula-graph-<release_version>.el7.x86_64.tar.gz.sha256sum.txt //Centos 8 https://oss-cdn.nebula-graph.com.cn/package/<release_version>/nebula-graph-<release_version>.el8.x86_64.tar.gz //Checksum https://oss-cdn.nebula-graph.com.cn/package/<release_version>/nebula-graph-<release_version>.el8.x86_64.tar.gz.sha256sum.txt //Ubuntu 1604 https://oss-cdn.nebula-graph.com.cn/package/<release_version>/nebula-graph-<release_version>.ubuntu1604.amd64.tar.gz //Checksum https://oss-cdn.nebula-graph.com.cn/package/<release_version>/nebula-graph-<release_version>.ubuntu1604.amd64.tar.gz.sha256sum.txt //Ubuntu 1804 https://oss-cdn.nebula-graph.com.cn/package/<release_version>/nebula-graph-<release_version>.ubuntu1804.amd64.tar.gz //Checksum https://oss-cdn.nebula-graph.com.cn/package/<release_version>/nebula-graph-<release_version>.ubuntu1804.amd64.tar.gz.sha256sum.txt //Ubuntu 2004 https://oss-cdn.nebula-graph.com.cn/package/<release_version>/nebula-graph-<release_version>.ubuntu2004.amd64.tar.gz //Checksum https://oss-cdn.nebula-graph.com.cn/package/<release_version>/nebula-graph-<release_version>.ubuntu2004.amd64.tar.gz.sha256sum.txt \u4f8b\u5982\uff0c\u8981\u4e0b\u8f7d\u9002\u7528\u4e8e CentOS 7.5 \u7684NebulaGraph release-3.6 tar.gz \u6587\u4ef6\uff0c\u8fd0\u884c\u4ee5\u4e0b\u547d\u4ee4\uff1a wget https://oss-cdn.nebula-graph.com.cn/package/3.6.0/nebula-graph-3.6.0.el7.x86_64.tar.gz \u89e3\u538b tar.gz \u6587\u4ef6\u5230NebulaGraph\u5b89\u88c5\u76ee\u5f55\u3002 tar -xvzf <tar.gz_file_name> -C <install_path> tar.gz_file_name \u8868\u793a tar.gz \u6587\u4ef6\u7684\u540d\u79f0\u3002 install_path \u8868\u793a\u5b89\u88c5\u8def\u5f84\u3002 \u4f8b\u5982\uff1a tar -xvzf nebula-graph-3.6.0.el7.x86_64.tar.gz -C /home/joe/nebula/install \u4fee\u6539\u914d\u7f6e\u6587\u4ef6\u540d\u4ee5\u5e94\u7528\u914d\u7f6e\u3002 \u8fdb\u5165\u89e3\u538b\u51fa\u7684\u76ee\u5f55\uff0c\u5c06\u5b50\u76ee\u5f55 etc \u4e2d\u7684\u6587\u4ef6 nebula-graphd.conf.default \u3001 nebula-metad.conf.default \u548c nebula-storaged.conf.default \u91cd\u547d\u540d\uff0c\u5220\u9664 .default \uff0c\u5373\u53ef\u5e94\u7528NebulaGraph\u7684\u9ed8\u8ba4\u914d\u7f6e\u3002 Note \u5982\u9700\u4fee\u6539\u66f4\u591a\u914d\u7f6e\uff0c\u53c2\u89c1 \u914d\u7f6e\u7ba1\u7406 \u3002 \u81f3\u6b64\uff0cNebulaGraph\u5b89\u88c5\u5b8c\u6bd5\u3002 \u4e0b\u4e00\u6b65 \u00b6 \u7ba1\u7406NebulaGraph\u670d\u52a1","title":"\u4f7f\u7528 TAR \u5305\u5b89\u88c5"},{"location":"4.deployment-and-installation/2.compile-and-install-nebula-graph/4.install-nebula-graph-from-tar/#targz_nebulagraph","text":"\u7528\u6237\u53ef\u4ee5\u4e0b\u8f7d\u6253\u5305\u597d\u7684 tar.gz \u6587\u4ef6\u5feb\u901f\u5b89\u88c5NebulaGraph\u3002 Note NebulaGraph\u4ece 2.6.0 \u7248\u672c\u8d77\u63d0\u4f9b tar.gz \u6587\u4ef6\u3002 \u5f53\u524d\u4ec5\u652f\u6301\u5728 Linux \u7cfb\u7edf\u4e0b\u5b89\u88c5NebulaGraph\uff0c\u4e14\u4ec5\u652f\u6301 CentOS 7.x\u3001CentOS 8.x\u3001Ubuntu 16.04\u3001Ubuntu 18.04\u3001Ubuntu 20.04 \u64cd\u4f5c\u7cfb\u7edf\u3002 \u5982\u679c\u7528\u6237\u4f7f\u7528\u7684\u662f\u56fd\u4ea7\u5316\u7684 Linux \u64cd\u4f5c\u7cfb\u7edf\uff0c\u8bf7 \u5b89\u88c5NebulaGraph \u3002","title":"\u4f7f\u7528 tar.gz \u6587\u4ef6\u5b89\u88c5NebulaGraph"},{"location":"4.deployment-and-installation/2.compile-and-install-nebula-graph/4.install-nebula-graph-from-tar/#_1","text":"\u4f7f\u7528\u5982\u4e0b\u5730\u5740\u4e0b\u8f7dNebulaGraph\u7684 tar.gz \u6587\u4ef6\u3002 \u4e0b\u8f7d\u524d\u9700\u5c06 <release_version> \u66ff\u6362\u4e3a\u9700\u8981\u4e0b\u8f7d\u7684\u7248\u672c\u3002 //Centos 7 https://oss-cdn.nebula-graph.com.cn/package/<release_version>/nebula-graph-<release_version>.el7.x86_64.tar.gz //Checksum https://oss-cdn.nebula-graph.com.cn/package/<release_version>/nebula-graph-<release_version>.el7.x86_64.tar.gz.sha256sum.txt //Centos 8 https://oss-cdn.nebula-graph.com.cn/package/<release_version>/nebula-graph-<release_version>.el8.x86_64.tar.gz //Checksum https://oss-cdn.nebula-graph.com.cn/package/<release_version>/nebula-graph-<release_version>.el8.x86_64.tar.gz.sha256sum.txt //Ubuntu 1604 https://oss-cdn.nebula-graph.com.cn/package/<release_version>/nebula-graph-<release_version>.ubuntu1604.amd64.tar.gz //Checksum https://oss-cdn.nebula-graph.com.cn/package/<release_version>/nebula-graph-<release_version>.ubuntu1604.amd64.tar.gz.sha256sum.txt //Ubuntu 1804 https://oss-cdn.nebula-graph.com.cn/package/<release_version>/nebula-graph-<release_version>.ubuntu1804.amd64.tar.gz //Checksum https://oss-cdn.nebula-graph.com.cn/package/<release_version>/nebula-graph-<release_version>.ubuntu1804.amd64.tar.gz.sha256sum.txt //Ubuntu 2004 https://oss-cdn.nebula-graph.com.cn/package/<release_version>/nebula-graph-<release_version>.ubuntu2004.amd64.tar.gz //Checksum https://oss-cdn.nebula-graph.com.cn/package/<release_version>/nebula-graph-<release_version>.ubuntu2004.amd64.tar.gz.sha256sum.txt \u4f8b\u5982\uff0c\u8981\u4e0b\u8f7d\u9002\u7528\u4e8e CentOS 7.5 \u7684NebulaGraph release-3.6 tar.gz \u6587\u4ef6\uff0c\u8fd0\u884c\u4ee5\u4e0b\u547d\u4ee4\uff1a wget https://oss-cdn.nebula-graph.com.cn/package/3.6.0/nebula-graph-3.6.0.el7.x86_64.tar.gz \u89e3\u538b tar.gz \u6587\u4ef6\u5230NebulaGraph\u5b89\u88c5\u76ee\u5f55\u3002 tar -xvzf <tar.gz_file_name> -C <install_path> tar.gz_file_name \u8868\u793a tar.gz \u6587\u4ef6\u7684\u540d\u79f0\u3002 install_path \u8868\u793a\u5b89\u88c5\u8def\u5f84\u3002 \u4f8b\u5982\uff1a tar -xvzf nebula-graph-3.6.0.el7.x86_64.tar.gz -C /home/joe/nebula/install \u4fee\u6539\u914d\u7f6e\u6587\u4ef6\u540d\u4ee5\u5e94\u7528\u914d\u7f6e\u3002 \u8fdb\u5165\u89e3\u538b\u51fa\u7684\u76ee\u5f55\uff0c\u5c06\u5b50\u76ee\u5f55 etc \u4e2d\u7684\u6587\u4ef6 nebula-graphd.conf.default \u3001 nebula-metad.conf.default \u548c nebula-storaged.conf.default \u91cd\u547d\u540d\uff0c\u5220\u9664 .default \uff0c\u5373\u53ef\u5e94\u7528NebulaGraph\u7684\u9ed8\u8ba4\u914d\u7f6e\u3002 Note \u5982\u9700\u4fee\u6539\u66f4\u591a\u914d\u7f6e\uff0c\u53c2\u89c1 \u914d\u7f6e\u7ba1\u7406 \u3002 \u81f3\u6b64\uff0cNebulaGraph\u5b89\u88c5\u5b8c\u6bd5\u3002","title":"\u64cd\u4f5c\u6b65\u9aa4"},{"location":"4.deployment-and-installation/2.compile-and-install-nebula-graph/4.install-nebula-graph-from-tar/#_2","text":"\u7ba1\u7406NebulaGraph\u670d\u52a1","title":"\u4e0b\u4e00\u6b65"},{"location":"4.deployment-and-installation/2.compile-and-install-nebula-graph/6.deploy-nebula-graph-with-peripherals/","text":"\u4f7f\u7528\u751f\u6001\u5de5\u5177\u5b89\u88c5NebulaGraph \u00b6 \u7528\u6237\u53ef\u4ee5\u4f7f\u7528\u4ee5\u4e0b\u751f\u6001\u5de5\u5177\u5b89\u88c5NebulaGraph\uff1a NebulaGraph Operator \u5b89\u88c5\u8be6\u60c5 \u00b6 \u4f7f\u7528 NebulaGraph Operator \u5b89\u88c5NebulaGraph\u7684\u8be6\u60c5\uff0c\u53c2\u89c1 \u4f7f\u7528 Kubectl \u90e8\u7f72NebulaGraph\u96c6\u7fa4 \u6216 \u4f7f\u7528 Helm \u90e8\u7f72NebulaGraph\u96c6\u7fa4 \u3002","title":"\u4f7f\u7528\u751f\u6001\u5de5\u5177\u5b89\u88c5"},{"location":"4.deployment-and-installation/2.compile-and-install-nebula-graph/6.deploy-nebula-graph-with-peripherals/#nebulagraph","text":"\u7528\u6237\u53ef\u4ee5\u4f7f\u7528\u4ee5\u4e0b\u751f\u6001\u5de5\u5177\u5b89\u88c5NebulaGraph\uff1a NebulaGraph Operator","title":"\u4f7f\u7528\u751f\u6001\u5de5\u5177\u5b89\u88c5NebulaGraph"},{"location":"4.deployment-and-installation/2.compile-and-install-nebula-graph/6.deploy-nebula-graph-with-peripherals/#_1","text":"\u4f7f\u7528 NebulaGraph Operator \u5b89\u88c5NebulaGraph\u7684\u8be6\u60c5\uff0c\u53c2\u89c1 \u4f7f\u7528 Kubectl \u90e8\u7f72NebulaGraph\u96c6\u7fa4 \u6216 \u4f7f\u7528 Helm \u90e8\u7f72NebulaGraph\u96c6\u7fa4 \u3002","title":"\u5b89\u88c5\u8be6\u60c5"},{"location":"4.deployment-and-installation/2.compile-and-install-nebula-graph/7.compile-using-docker/","text":"\u4f7f\u7528 Docker \u7f16\u8bd1 NebulaGraph \u00b6 NebulaGraph \u7684\u6e90\u4ee3\u7801\u662f\u4f7f\u7528 C++ \u7f16\u5199\u7684\uff0c\u7f16\u8bd1 NebulaGraph \u9700\u8981\u5b89\u88c5\u4e00\u4e9b\u4f9d\u8d56\uff0c\u8fd9\u4e9b\u4f9d\u8d56\u53ef\u80fd\u4f1a\u4e0e\u5bbf\u4e3b\u673a\u64cd\u4f5c\u7cfb\u7edf\u7684\u4f9d\u8d56\u51b2\u7a81\uff0c\u5bfc\u81f4\u7f16\u8bd1\u5931\u8d25\u3002\u4e3a\u4e86\u907f\u514d\u8fd9\u79cd\u60c5\u51b5\uff0c\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528 Docker \u6765\u7f16\u8bd1 NebulaGraph\u3002NebulaGraph \u63d0\u4f9b\u6574\u4e2a\u7f16\u8bd1\u73af\u5883\u7684 Docker \u955c\u50cf\uff0c\u53ef\u4ee5\u5e2e\u52a9\u6211\u4eec\u5feb\u901f\u642d\u5efa\u7f16\u8bd1\u73af\u5883\u5e76\u7f16\u8bd1 NebulaGraph\uff0c\u540c\u65f6\u907f\u514d\u4e86\u4e0e\u5bbf\u4e3b\u673a\u64cd\u4f5c\u7cfb\u7edf\u7684\u4f9d\u8d56\u51b2\u7a81\u3002\u672c\u6587\u4ecb\u7ecd\u5982\u4f55\u4f7f\u7528 Docker \u7f16\u8bd1 NebulaGraph \u56fe\u6570\u636e\u5e93\u3002 \u51c6\u5907\u5de5\u4f5c \u00b6 \u5728\u5f00\u59cb\u7f16\u8bd1 NebulaGraph \u4e4b\u524d\uff0c\u786e\u4fdd\u5df2\u7ecf\u5b8c\u6210\u4ee5\u4e0b\u51c6\u5907\u5de5\u4f5c\uff1a \u5b89\u88c5 Docker\uff1a\u786e\u4fdd\u7528\u6237\u7684\u7cfb\u7edf\u5df2\u7ecf\u5b89\u88c5\u4e86 Docker\u3002 \u514b\u9686 NebulaGraph \u6e90\u4ee3\u7801\uff1a\u5c06 NebulaGraph \u7684\u6e90\u4ee3\u7801\u514b\u9686\u5230\u672c\u5730\u3002\u4f60\u53ef\u4ee5\u4f7f\u7528 Git \u547d\u4ee4\u6765\u514b\u9686\u4ee3\u7801\u4ed3\u5e93\uff1a git clone --branch release-3.6 https://github.com/vesoft-inc/nebula.git \u8fd9\u5c06\u4f1a\u5c06 NebulaGraph \u7684\u6e90\u4ee3\u7801\u514b\u9686\u5230\u5f53\u524d\u76ee\u5f55\u7684 nebula \u5b50\u76ee\u5f55\u4e2d\u3002 \u6b65\u9aa4 \u00b6 \u62c9\u53d6 NebulaGraph \u7f16\u8bd1\u955c\u50cf\u3002 docker pull vesoft/nebula-dev:ubuntu2004 \u8fd9\u91cc\u6211\u4eec\u4f7f\u7528\u7684\u662f NebulaGraph \u7684\u5b98\u65b9\u7f16\u8bd1\u955c\u50cf\uff0c\u7248\u672c\u53f7\u4e3a ubuntu2004 \uff0c\u4f60\u4e5f\u53ef\u4ee5\u6839\u636e\u9700\u8981\u4f7f\u7528\u7279\u5b9a\u7684\u7248\u672c\u53f7\u3002\u8be6\u60c5\u53c2\u89c1 nebula-dev-docker \u3002 \u8fd0\u884c\u7f16\u8bd1\u5bb9\u5668\u3002 \u73b0\u5728\uff0c\u6211\u4eec\u53ef\u4ee5\u5728 Docker \u5bb9\u5668\u4e2d\u7f16\u8bd1 NebulaGraph\u3002\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\uff1a docker run -ti \\ --security-opt seccomp = unconfined \\ -v \" $PWD \" :/home \\ -w /home \\ --name nebula_dev \\ vesoft/nebula-dev:ubuntu2004 \\ bash --security-opt seccomp=unconfined \uff1a\u4e3a\u4e86\u907f\u514d Docker \u5bb9\u5668\u4e2d\u7684 CMake \u7f16\u8bd1\u8fc7\u7a0b\u4e2d\u51fa\u73b0 Killed \u9519\u8bef\uff0c\u4e0d\u9650\u5236\u5bb9\u5668\u8fdb\u7a0b\u53ef\u4ee5\u8fdb\u884c\u7684\u7cfb\u7edf\u8c03\u7528\u3002 -v \"$PWD\":/home \uff1a\u8868\u793a\u5f53\u524d\u7684 NebulaGraph \u4ee3\u7801\u672c\u5730\u7684\u8def\u5f84\u4f1a\u88ab\u6302\u8f7d\u5230\u5bb9\u5668\u5185\u90e8\u7684 /home \u76ee\u5f55\u3002 -w /home \uff1a\u5c06\u5bb9\u5668\u7684\u5de5\u4f5c\u76ee\u5f55\u8bbe\u7f6e\u4e3a /home \uff0c\u5728\u5bb9\u5668\u4e2d\u8fd0\u884c\u4efb\u4f55\u547d\u4ee4\u90fd\u5c06\u4ee5\u8be5\u76ee\u5f55\u4f5c\u4e3a\u5f53\u524d\u76ee\u5f55\u3002 --name nebula_dev \uff1a\u4e3a\u5bb9\u5668\u6307\u5b9a\u4e00\u4e2a\u540d\u79f0\uff0c\u65b9\u4fbf\u7ba1\u7406\u548c\u64cd\u4f5c\u3002 vesoft/nebula-dev:ubuntu2004 \uff1a\u4f7f\u7528 vesoft/nebula-dev \u7f16\u8bd1\u955c\u50cf\u7684 ubuntu2004 \u7248\u672c\u3002 bash \uff1a\u5728\u5bb9\u5668\u4e2d\u8fd0\u884c bash \u547d\u4ee4\uff0c\u8fdb\u5165\u5bb9\u5668\u7684\u4ea4\u4e92\u5f0f\u7ec8\u7aef\u3002 \u6210\u529f\u8fd0\u884c\u4ee5\u4e0a\u547d\u4ee4\u540e\uff0c\u5c06\u4f1a\u81ea\u52a8\u8fdb\u5165\u5bb9\u5668\u7684\u4ea4\u4e92\u5f0f\u7ec8\u7aef\u3002\u82e5\u9000\u51fa\u5bb9\u5668\uff0c\u53ef\u6267\u884c docker exec -ti nebula_dev bash \u91cd\u65b0\u8fdb\u5165\u5bb9\u5668\u3002 \u5728\u5bb9\u5668\u5185\u7f16\u8bd1 NebulaGraph\u3002 \u8fdb\u5165 NebulaGraph \u6e90\u4ee3\u7801\u76ee\u5f55 cd nebula \u521b\u5efa\u76ee\u5f55build\u5e76\u8fdb\u5165\u8be5\u76ee\u5f55\u3002 mkdir build && cd build \u4f7f\u7528 CMake \u751f\u6210 makefile \u6587\u4ef6\u3002 cmake -DCMAKE_CXX_COMPILER = $TOOLSET_CLANG_DIR /bin/g++ -DCMAKE_C_COMPILER = $TOOLSET_CLANG_DIR /bin/gcc -DENABLE_WERROR = OFF -DCMAKE_BUILD_TYPE = Debug -DENABLE_TESTING = OFF .. \u6709\u5173 CMake \u7684 \u66f4\u591a\u4fe1\u606f\uff0c\u53c2\u89c1 CMake \u53c2\u6570 \u3002 \u6267\u884c\u7f16\u8bd1\u547d\u4ee4\u3002 # \u6839\u636e\u670d\u52a1\u5668\u7684\u7a7a\u95f2 CPU \u6838\u5fc3\u6570\uff0c\u8bbe\u7f6e\u5408\u7406\u7684\u5e76\u884c\u7f16\u8bd1\u7684\u7ebf\u7a0b\u6570\u3002\u6bd4\u5982\uff0c\u5982\u679c\u670d\u52a1\u5668\u6709 2 \u4e2a\u7a7a\u95f2 CPU \u6838\u5fc3\uff0c\u53ef\u4ee5\u8bbe\u7f6e\u4e3a make -j2\u3002 make -j2 \u8fd9\u5c06\u4f1a\u5f00\u59cb\u7f16\u8bd1 NebulaGraph\uff0c\u7f16\u8bd1\u8fc7\u7a0b\u53ef\u80fd\u4f1a\u82b1\u8d39\u4e00\u4e9b\u65f6\u95f4\uff0c\u53d6\u51b3\u4e8e\u7528\u6237\u7684\u7cfb\u7edf\u6027\u80fd\u3002 \u5c06\u751f\u4ea7\u7684\u53ef\u6267\u884c\u6587\u4ef6\u548c\u5e93\u6587\u4ef6\u5b89\u88c5\u5230 /usr/local/nebula \u76ee\u5f55\u4e0b\u3002 \u7f16\u8bd1\u6210\u529f\u540e\uff0c\u5728\u5bb9\u5668\u4e2d\u7684 /home/nebula/build \u76ee\u5f55\u4e0b\u5c06\u751f\u6210 NebulaGraph \u7684\u53ef\u6267\u884c\u6587\u4ef6\u548c\u5e93\u6587\u4ef6\u3002\u4e3a\u4e86\u65b9\u4fbf\u7ba1\u7406\uff0c\u6211\u4eec\u53ef\u4ee5\u5c06\u8fd9\u4e9b\u6587\u4ef6\u5b89\u88c5\u5230 /usr/local/nebula \u76ee\u5f55\u4e0b\u3002\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\uff1a make install \u5b8c\u6210\u4ee5\u4e0a\u6b65\u9aa4\u540e\uff0cNebulaGraph \u5c06\u4f1a\u88ab\u540c\u6b65\u7f16\u8bd1\u5e76\u5b89\u88c5\u5230\u5bbf\u4e3b\u673a\u7684 /usr/local/nebula \u76ee\u5f55\u4e0b\u3002 \u540e\u7eed\u6b65\u9aa4 \u00b6 \u542f\u52a8 NebulaGraph \u670d\u52a1 \u8fde\u63a5 NebulaGraph \u670d\u52a1","title":"\u4f7f\u7528 Docker \u7f16\u8bd1"},{"location":"4.deployment-and-installation/2.compile-and-install-nebula-graph/7.compile-using-docker/#docker_nebulagraph","text":"NebulaGraph \u7684\u6e90\u4ee3\u7801\u662f\u4f7f\u7528 C++ \u7f16\u5199\u7684\uff0c\u7f16\u8bd1 NebulaGraph \u9700\u8981\u5b89\u88c5\u4e00\u4e9b\u4f9d\u8d56\uff0c\u8fd9\u4e9b\u4f9d\u8d56\u53ef\u80fd\u4f1a\u4e0e\u5bbf\u4e3b\u673a\u64cd\u4f5c\u7cfb\u7edf\u7684\u4f9d\u8d56\u51b2\u7a81\uff0c\u5bfc\u81f4\u7f16\u8bd1\u5931\u8d25\u3002\u4e3a\u4e86\u907f\u514d\u8fd9\u79cd\u60c5\u51b5\uff0c\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528 Docker \u6765\u7f16\u8bd1 NebulaGraph\u3002NebulaGraph \u63d0\u4f9b\u6574\u4e2a\u7f16\u8bd1\u73af\u5883\u7684 Docker \u955c\u50cf\uff0c\u53ef\u4ee5\u5e2e\u52a9\u6211\u4eec\u5feb\u901f\u642d\u5efa\u7f16\u8bd1\u73af\u5883\u5e76\u7f16\u8bd1 NebulaGraph\uff0c\u540c\u65f6\u907f\u514d\u4e86\u4e0e\u5bbf\u4e3b\u673a\u64cd\u4f5c\u7cfb\u7edf\u7684\u4f9d\u8d56\u51b2\u7a81\u3002\u672c\u6587\u4ecb\u7ecd\u5982\u4f55\u4f7f\u7528 Docker \u7f16\u8bd1 NebulaGraph \u56fe\u6570\u636e\u5e93\u3002","title":"\u4f7f\u7528 Docker \u7f16\u8bd1 NebulaGraph"},{"location":"4.deployment-and-installation/2.compile-and-install-nebula-graph/7.compile-using-docker/#_1","text":"\u5728\u5f00\u59cb\u7f16\u8bd1 NebulaGraph \u4e4b\u524d\uff0c\u786e\u4fdd\u5df2\u7ecf\u5b8c\u6210\u4ee5\u4e0b\u51c6\u5907\u5de5\u4f5c\uff1a \u5b89\u88c5 Docker\uff1a\u786e\u4fdd\u7528\u6237\u7684\u7cfb\u7edf\u5df2\u7ecf\u5b89\u88c5\u4e86 Docker\u3002 \u514b\u9686 NebulaGraph \u6e90\u4ee3\u7801\uff1a\u5c06 NebulaGraph \u7684\u6e90\u4ee3\u7801\u514b\u9686\u5230\u672c\u5730\u3002\u4f60\u53ef\u4ee5\u4f7f\u7528 Git \u547d\u4ee4\u6765\u514b\u9686\u4ee3\u7801\u4ed3\u5e93\uff1a git clone --branch release-3.6 https://github.com/vesoft-inc/nebula.git \u8fd9\u5c06\u4f1a\u5c06 NebulaGraph \u7684\u6e90\u4ee3\u7801\u514b\u9686\u5230\u5f53\u524d\u76ee\u5f55\u7684 nebula \u5b50\u76ee\u5f55\u4e2d\u3002","title":"\u51c6\u5907\u5de5\u4f5c"},{"location":"4.deployment-and-installation/2.compile-and-install-nebula-graph/7.compile-using-docker/#_2","text":"\u62c9\u53d6 NebulaGraph \u7f16\u8bd1\u955c\u50cf\u3002 docker pull vesoft/nebula-dev:ubuntu2004 \u8fd9\u91cc\u6211\u4eec\u4f7f\u7528\u7684\u662f NebulaGraph \u7684\u5b98\u65b9\u7f16\u8bd1\u955c\u50cf\uff0c\u7248\u672c\u53f7\u4e3a ubuntu2004 \uff0c\u4f60\u4e5f\u53ef\u4ee5\u6839\u636e\u9700\u8981\u4f7f\u7528\u7279\u5b9a\u7684\u7248\u672c\u53f7\u3002\u8be6\u60c5\u53c2\u89c1 nebula-dev-docker \u3002 \u8fd0\u884c\u7f16\u8bd1\u5bb9\u5668\u3002 \u73b0\u5728\uff0c\u6211\u4eec\u53ef\u4ee5\u5728 Docker \u5bb9\u5668\u4e2d\u7f16\u8bd1 NebulaGraph\u3002\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\uff1a docker run -ti \\ --security-opt seccomp = unconfined \\ -v \" $PWD \" :/home \\ -w /home \\ --name nebula_dev \\ vesoft/nebula-dev:ubuntu2004 \\ bash --security-opt seccomp=unconfined \uff1a\u4e3a\u4e86\u907f\u514d Docker \u5bb9\u5668\u4e2d\u7684 CMake \u7f16\u8bd1\u8fc7\u7a0b\u4e2d\u51fa\u73b0 Killed \u9519\u8bef\uff0c\u4e0d\u9650\u5236\u5bb9\u5668\u8fdb\u7a0b\u53ef\u4ee5\u8fdb\u884c\u7684\u7cfb\u7edf\u8c03\u7528\u3002 -v \"$PWD\":/home \uff1a\u8868\u793a\u5f53\u524d\u7684 NebulaGraph \u4ee3\u7801\u672c\u5730\u7684\u8def\u5f84\u4f1a\u88ab\u6302\u8f7d\u5230\u5bb9\u5668\u5185\u90e8\u7684 /home \u76ee\u5f55\u3002 -w /home \uff1a\u5c06\u5bb9\u5668\u7684\u5de5\u4f5c\u76ee\u5f55\u8bbe\u7f6e\u4e3a /home \uff0c\u5728\u5bb9\u5668\u4e2d\u8fd0\u884c\u4efb\u4f55\u547d\u4ee4\u90fd\u5c06\u4ee5\u8be5\u76ee\u5f55\u4f5c\u4e3a\u5f53\u524d\u76ee\u5f55\u3002 --name nebula_dev \uff1a\u4e3a\u5bb9\u5668\u6307\u5b9a\u4e00\u4e2a\u540d\u79f0\uff0c\u65b9\u4fbf\u7ba1\u7406\u548c\u64cd\u4f5c\u3002 vesoft/nebula-dev:ubuntu2004 \uff1a\u4f7f\u7528 vesoft/nebula-dev \u7f16\u8bd1\u955c\u50cf\u7684 ubuntu2004 \u7248\u672c\u3002 bash \uff1a\u5728\u5bb9\u5668\u4e2d\u8fd0\u884c bash \u547d\u4ee4\uff0c\u8fdb\u5165\u5bb9\u5668\u7684\u4ea4\u4e92\u5f0f\u7ec8\u7aef\u3002 \u6210\u529f\u8fd0\u884c\u4ee5\u4e0a\u547d\u4ee4\u540e\uff0c\u5c06\u4f1a\u81ea\u52a8\u8fdb\u5165\u5bb9\u5668\u7684\u4ea4\u4e92\u5f0f\u7ec8\u7aef\u3002\u82e5\u9000\u51fa\u5bb9\u5668\uff0c\u53ef\u6267\u884c docker exec -ti nebula_dev bash \u91cd\u65b0\u8fdb\u5165\u5bb9\u5668\u3002 \u5728\u5bb9\u5668\u5185\u7f16\u8bd1 NebulaGraph\u3002 \u8fdb\u5165 NebulaGraph \u6e90\u4ee3\u7801\u76ee\u5f55 cd nebula \u521b\u5efa\u76ee\u5f55build\u5e76\u8fdb\u5165\u8be5\u76ee\u5f55\u3002 mkdir build && cd build \u4f7f\u7528 CMake \u751f\u6210 makefile \u6587\u4ef6\u3002 cmake -DCMAKE_CXX_COMPILER = $TOOLSET_CLANG_DIR /bin/g++ -DCMAKE_C_COMPILER = $TOOLSET_CLANG_DIR /bin/gcc -DENABLE_WERROR = OFF -DCMAKE_BUILD_TYPE = Debug -DENABLE_TESTING = OFF .. \u6709\u5173 CMake \u7684 \u66f4\u591a\u4fe1\u606f\uff0c\u53c2\u89c1 CMake \u53c2\u6570 \u3002 \u6267\u884c\u7f16\u8bd1\u547d\u4ee4\u3002 # \u6839\u636e\u670d\u52a1\u5668\u7684\u7a7a\u95f2 CPU \u6838\u5fc3\u6570\uff0c\u8bbe\u7f6e\u5408\u7406\u7684\u5e76\u884c\u7f16\u8bd1\u7684\u7ebf\u7a0b\u6570\u3002\u6bd4\u5982\uff0c\u5982\u679c\u670d\u52a1\u5668\u6709 2 \u4e2a\u7a7a\u95f2 CPU \u6838\u5fc3\uff0c\u53ef\u4ee5\u8bbe\u7f6e\u4e3a make -j2\u3002 make -j2 \u8fd9\u5c06\u4f1a\u5f00\u59cb\u7f16\u8bd1 NebulaGraph\uff0c\u7f16\u8bd1\u8fc7\u7a0b\u53ef\u80fd\u4f1a\u82b1\u8d39\u4e00\u4e9b\u65f6\u95f4\uff0c\u53d6\u51b3\u4e8e\u7528\u6237\u7684\u7cfb\u7edf\u6027\u80fd\u3002 \u5c06\u751f\u4ea7\u7684\u53ef\u6267\u884c\u6587\u4ef6\u548c\u5e93\u6587\u4ef6\u5b89\u88c5\u5230 /usr/local/nebula \u76ee\u5f55\u4e0b\u3002 \u7f16\u8bd1\u6210\u529f\u540e\uff0c\u5728\u5bb9\u5668\u4e2d\u7684 /home/nebula/build \u76ee\u5f55\u4e0b\u5c06\u751f\u6210 NebulaGraph \u7684\u53ef\u6267\u884c\u6587\u4ef6\u548c\u5e93\u6587\u4ef6\u3002\u4e3a\u4e86\u65b9\u4fbf\u7ba1\u7406\uff0c\u6211\u4eec\u53ef\u4ee5\u5c06\u8fd9\u4e9b\u6587\u4ef6\u5b89\u88c5\u5230 /usr/local/nebula \u76ee\u5f55\u4e0b\u3002\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\uff1a make install \u5b8c\u6210\u4ee5\u4e0a\u6b65\u9aa4\u540e\uff0cNebulaGraph \u5c06\u4f1a\u88ab\u540c\u6b65\u7f16\u8bd1\u5e76\u5b89\u88c5\u5230\u5bbf\u4e3b\u673a\u7684 /usr/local/nebula \u76ee\u5f55\u4e0b\u3002","title":"\u6b65\u9aa4"},{"location":"4.deployment-and-installation/2.compile-and-install-nebula-graph/7.compile-using-docker/#_3","text":"\u542f\u52a8 NebulaGraph \u670d\u52a1 \u8fde\u63a5 NebulaGraph \u670d\u52a1","title":"\u540e\u7eed\u6b65\u9aa4"},{"location":"4.deployment-and-installation/2.compile-and-install-nebula-graph/deploy-nebula-graph-cluster/","text":"\u4f7f\u7528 RPM/DEB \u5305\u90e8\u7f72NebulaGraph\u591a\u673a\u96c6\u7fa4 \u00b6 \u672c\u6587\u4ecb\u7ecd\u901a\u8fc7 RPM \u6216 DEB \u6587\u4ef6\u90e8\u7f72\u96c6\u7fa4\u7684\u793a\u4f8b\u3002 Note \u7528\u6237\u8fd8\u53ef\u4ee5\u901a\u8fc7\u5b98\u65b9\u5de5\u5177\u90e8\u7f72NebulaGraph\u591a\u673a\u96c6\u7fa4\u3002\u8be6\u60c5\u53c2\u89c1 \u4f7f\u7528\u751f\u6001\u5de5\u5177\u5b89\u88c5\u96c6\u7fa4 \u3002 \u90e8\u7f72\u65b9\u6848 \u00b6 \u673a\u5668\u540d\u79f0 IP \u5730\u5740 graphd \u8fdb\u7a0b\u6570\u91cf storaged \u8fdb\u7a0b\u6570\u91cf metad \u8fdb\u7a0b\u6570\u91cf A 192.168.10.111 1 1 1 B 192.168.10.112 1 1 1 C 192.168.10.113 1 1 1 D 192.168.10.114 1 1 - E 192.168.10.115 1 1 - \u524d\u63d0\u6761\u4ef6 \u00b6 \u51c6\u5907 5 \u53f0\u7528\u4e8e\u90e8\u7f72\u96c6\u7fa4\u7684\u673a\u5668\u3002 \u5728\u96c6\u7fa4\u4e2d\u901a\u8fc7 NTP \u670d\u52a1\u540c\u6b65\u65f6\u95f4\u3002 \u624b\u52a8\u90e8\u7f72\u6d41\u7a0b \u00b6 \u5b89\u88c5NebulaGraph \u00b6 \u5728\u96c6\u7fa4\u7684\u6bcf\u4e00\u53f0\u670d\u52a1\u5668\u4e0a\u90fd\u5b89\u88c5NebulaGraph\uff0c\u5b89\u88c5\u540e\u6682\u4e0d\u9700\u8981\u542f\u52a8\u670d\u52a1\u3002\u5b89\u88c5\u65b9\u5f0f\u8bf7\u53c2\u89c1\uff1a \u4f7f\u7528 RPM \u6216 DEB \u5305\u5b89\u88c5NebulaGraph \u4f7f\u7528\u6e90\u7801\u5b89\u88c5NebulaGraph \u4fee\u6539\u914d\u7f6e\u6587\u4ef6 \u00b6 \u4fee\u6539\u6bcf\u4e2a\u670d\u52a1\u5668\u4e0a\u7684NebulaGraph\u914d\u7f6e\u6587\u4ef6\u3002 NebulaGraph\u7684\u6240\u6709\u914d\u7f6e\u6587\u4ef6\u5747\u4f4d\u4e8e\u5b89\u88c5\u76ee\u5f55\u7684 etc \u76ee\u5f55\u5185\uff0c\u5305\u62ec nebula-graphd.conf \u3001 nebula-metad.conf \u548c nebula-storaged.conf \uff0c\u7528\u6237\u53ef\u4ee5\u53ea\u4fee\u6539\u6240\u9700\u670d\u52a1\u7684\u914d\u7f6e\u6587\u4ef6\u3002\u5404\u4e2a\u673a\u5668\u9700\u8981\u4fee\u6539\u7684\u914d\u7f6e\u6587\u4ef6\u5982\u4e0b\u3002 \u673a\u5668\u540d\u79f0 \u5f85\u4fee\u6539\u914d\u7f6e\u6587\u4ef6 A nebula-graphd.conf \u3001 nebula-storaged.conf \u3001 nebula-metad.conf B nebula-graphd.conf \u3001 nebula-storaged.conf \u3001 nebula-metad.conf C nebula-graphd.conf \u3001 nebula-storaged.conf \u3001 nebula-metad.conf D nebula-graphd.conf \u3001 nebula-storaged.conf E nebula-graphd.conf \u3001 nebula-storaged.conf \u7528\u6237\u53ef\u4ee5\u53c2\u8003\u5982\u4e0b\u914d\u7f6e\u6587\u4ef6\u7684\u5185\u5bb9\uff0c\u4ec5\u5c55\u793a\u96c6\u7fa4\u901a\u4fe1\u7684\u90e8\u5206\u8bbe\u7f6e\uff0c\u672a\u5c55\u793a\u7684\u5185\u5bb9\u4e3a\u9ed8\u8ba4\u8bbe\u7f6e\uff0c\u4fbf\u4e8e\u7528\u6237\u4e86\u89e3\u96c6\u7fa4\u95f4\u5404\u4e2a\u670d\u52a1\u5668\u7684\u5173\u7cfb\u3002 Note \u4e3b\u8981\u4fee\u6539\u7684\u914d\u7f6e\u662f meta_server_addrs \uff0c\u6240\u6709\u914d\u7f6e\u6587\u4ef6\u90fd\u9700\u8981\u586b\u5199\u6240\u6709 Meta \u670d\u52a1\u7684 IP \u5730\u5740\u548c\u7aef\u53e3\uff0c\u540c\u65f6\u9700\u8981\u4fee\u6539 local_ip \u4e3a\u673a\u5668\u672c\u8eab\u7684\u8054\u7f51 IP \u5730\u5740\u3002\u914d\u7f6e\u53c2\u6570\u7684\u8be6\u7ec6\u8bf4\u660e\u8bf7\u53c2\u89c1\uff1a Meta \u670d\u52a1\u914d\u7f6e Graph \u670d\u52a1\u914d\u7f6e Storage \u670d\u52a1\u914d\u7f6e \u673a\u5668 A \u914d\u7f6e nebula-graphd.conf ########## networking ########## # Comma separated Meta Server Addresses --meta_server_addrs = 192 .168.10.111:9559,192.168.10.112:9559,192.168.10.113:9559 # Local IP used to identify the nebula-graphd process. # Change it to an address other than loopback if the service is distributed or # will be accessed remotely. --local_ip = 192 .168.10.111 # Network device to listen on --listen_netdev = any # Port to listen on --port = 9669 nebula-storaged.conf ########## networking ########## # Comma separated Meta server addresses --meta_server_addrs = 192 .168.10.111:9559,192.168.10.112:9559,192.168.10.113:9559 # Local IP used to identify the nebula-storaged process. # Change it to an address other than loopback if the service is distributed or # will be accessed remotely. --local_ip = 192 .168.10.111 # Storage daemon listening port --port = 9779 nebula-metad.conf ########## networking ########## # Comma separated Meta Server addresses --meta_server_addrs = 192 .168.10.111:9559,192.168.10.112:9559,192.168.10.113:9559 # Local IP used to identify the nebula-metad process. # Change it to an address other than loopback if the service is distributed or # will be accessed remotely. --local_ip = 192 .168.10.111 # Meta daemon listening port --port = 9559 \u673a\u5668 B \u914d\u7f6e nebula-graphd.conf ########## networking ########## # Comma separated Meta Server Addresses --meta_server_addrs = 192 .168.10.111:9559,192.168.10.112:9559,192.168.10.113:9559 # Local IP used to identify the nebula-graphd process. # Change it to an address other than loopback if the service is distributed or # will be accessed remotely. --local_ip = 192 .168.10.112 # Network device to listen on --listen_netdev = any # Port to listen on --port = 9669 nebula-storaged.conf ########## networking ########## # Comma separated Meta server addresses --meta_server_addrs = 192 .168.10.111:9559,192.168.10.112:9559,192.168.10.113:9559 # Local IP used to identify the nebula-storaged process. # Change it to an address other than loopback if the service is distributed or # will be accessed remotely. --local_ip = 192 .168.10.112 # Storage daemon listening port --port = 9779 nebula-metad.conf ########## networking ########## # Comma separated Meta Server addresses --meta_server_addrs = 192 .168.10.111:9559,192.168.10.112:9559,192.168.10.113:9559 # Local IP used to identify the nebula-metad process. # Change it to an address other than loopback if the service is distributed or # will be accessed remotely. --local_ip = 192 .168.10.112 # Meta daemon listening port --port = 9559 \u673a\u5668 C \u914d\u7f6e nebula-graphd.conf ########## networking ########## # Comma separated Meta Server Addresses --meta_server_addrs = 192 .168.10.111:9559,192.168.10.112:9559,192.168.10.113:9559 # Local IP used to identify the nebula-graphd process. # Change it to an address other than loopback if the service is distributed or # will be accessed remotely. --local_ip = 192 .168.10.113 # Network device to listen on --listen_netdev = any # Port to listen on --port = 9669 nebula-storaged.conf ########## networking ########## # Comma separated Meta server addresses --meta_server_addrs = 192 .168.10.111:9559,192.168.10.112:9559,192.168.10.113:9559 # Local IP used to identify the nebula-storaged process. # Change it to an address other than loopback if the service is distributed or # will be accessed remotely. --local_ip = 192 .168.10.113 # Storage daemon listening port --port = 9779 nebula-metad.conf ########## networking ########## # Comma separated Meta Server addresses --meta_server_addrs = 192 .168.10.111:9559,192.168.10.112:9559,192.168.10.113:9559 # Local IP used to identify the nebula-metad process. # Change it to an address other than loopback if the service is distributed or # will be accessed remotely. --local_ip = 192 .168.10.113 # Meta daemon listening port --port = 9559 \u673a\u5668 D \u914d\u7f6e nebula-graphd.conf ########## networking ########## # Comma separated Meta Server Addresses --meta_server_addrs = 192 .168.10.111:9559,192.168.10.112:9559,192.168.10.113:9559 # Local IP used to identify the nebula-graphd process. # Change it to an address other than loopback if the service is distributed or # will be accessed remotely. --local_ip = 192 .168.10.114 # Network device to listen on --listen_netdev = any # Port to listen on --port = 9669 nebula-storaged.conf ########## networking ########## # Comma separated Meta server addresses --meta_server_addrs = 192 .168.10.111:9559,192.168.10.112:9559,192.168.10.113:9559 # Local IP used to identify the nebula-storaged process. # Change it to an address other than loopback if the service is distributed or # will be accessed remotely. --local_ip = 192 .168.10.114 # Storage daemon listening port --port = 9779 \u673a\u5668 E \u914d\u7f6e nebula-graphd.conf ########## networking ########## # Comma separated Meta Server Addresses --meta_server_addrs = 192 .168.10.111:9559,192.168.10.112:9559,192.168.10.113:9559 # Local IP used to identify the nebula-graphd process. # Change it to an address other than loopback if the service is distributed or # will be accessed remotely. --local_ip = 192 .168.10.115 # Network device to listen on --listen_netdev = any # Port to listen on --port = 9669 nebula-storaged.conf ########## networking ########## # Comma separated Meta server addresses --meta_server_addrs = 192 .168.10.111:9559,192.168.10.112:9559,192.168.10.113:9559 # Local IP used to identify the nebula-storaged process. # Change it to an address other than loopback if the service is distributed or # will be accessed remotely. --local_ip = 192 .168.10.115 # Storage daemon listening port --port = 9779 \u542f\u52a8\u96c6\u7fa4 \u00b6 \u4f9d\u6b21\u542f\u52a8 \u5404\u4e2a\u670d\u52a1\u5668 \u4e0a\u7684\u5bf9\u5e94\u8fdb\u7a0b\u3002 \u673a\u5668\u540d\u79f0 \u5f85\u542f\u52a8\u7684\u8fdb\u7a0b A graphd\u3001storaged\u3001metad B graphd\u3001storaged\u3001metad C graphd\u3001storaged\u3001metad D graphd\u3001storaged E graphd\u3001storaged \u542f\u52a8NebulaGraph\u8fdb\u7a0b\u7684\u547d\u4ee4\u5982\u4e0b\uff1a sudo /usr/local/nebula/scripts/nebula.service start <metad | graphd | storaged | all> Note \u786e\u4fdd\u6bcf\u4e2a\u670d\u52a1\u5668\u4e2d\u7684\u5bf9\u5e94\u8fdb\u7a0b\u90fd\u5df2\u542f\u52a8\uff0c\u5426\u5219\u670d\u52a1\u5c06\u542f\u52a8\u5931\u8d25\u3002 \u5f53\u9700\u90fd\u542f\u52a8 graphd\u3001storaged \u548c metad \u65f6\uff0c\u53ef\u4ee5\u7528 all \u4ee3\u66ff\u3002 /usr/local/nebula \u662fNebulaGraph\u7684\u9ed8\u8ba4\u5b89\u88c5\u8def\u5f84\uff0c\u5982\u679c\u4fee\u6539\u8fc7\u5b89\u88c5\u8def\u5f84\uff0c\u8bf7\u4f7f\u7528\u5b9e\u9645\u8def\u5f84\u3002\u66f4\u591a\u542f\u505c\u670d\u52a1\u7684\u5185\u5bb9\uff0c\u8bf7\u53c2\u89c1 \u7ba1\u7406NebulaGraph\u670d\u52a1 \u3002 \u68c0\u67e5\u96c6\u7fa4 \u00b6 \u5b89\u88c5\u539f\u751f CLI \u5ba2\u6237\u7aef NebulaGraph Console \uff0c\u7136\u540e\u8fde\u63a5\u4efb\u4f55\u4e00\u4e2a\u5df2\u542f\u52a8 graphd \u8fdb\u7a0b\u7684\u673a\u5668\uff0c\u6dfb\u52a0 Storage \u4e3b\u673a\uff0c\u7136\u540e\u6267\u884c\u547d\u4ee4 SHOW HOSTS \u68c0\u67e5\u96c6\u7fa4\u72b6\u6001\u3002\u4f8b\u5982\uff1a $ ./nebula-console --addr 192 .168.10.111 --port 9669 -u root -p nebula 2021 /05/25 01 :41:19 [ INFO ] connection pool is initialized successfully Welcome to NebulaGraph! > ADD HOSTS 192 .168.10.111:9779, 192 .168.10.112:9779, 192 .168.10.113:9779, 192 .168.10.114:9779, 192 .168.10.115:9779 ; > SHOW HOSTS ; +------------------+------+----------+--------------+----------------------+------------------------+----------------------+ | Host | Port | Status | Leader count | Leader distribution | Partition distribution | Version | +------------------+------+----------+--------------+----------------------+------------------------+----------------------+ | \"192.168.10.111\" | 9779 | \"ONLINE\" | 0 | \"No valid partition\" | \"No valid partition\" | \"3.6.0\" | | \"192.168.10.112\" | 9779 | \"ONLINE\" | 0 | \"No valid partition\" | \"No valid partition\" | \"3.6.0\" | | \"192.168.10.113\" | 9779 | \"ONLINE\" | 0 | \"No valid partition\" | \"No valid partition\" | \"3.6.0\" | | \"192.168.10.114\" | 9779 | \"ONLINE\" | 0 | \"No valid partition\" | \"No valid partition\" | \"3.6.0\" | | \"192.168.10.115\" | 9779 | \"ONLINE\" | 0 | \"No valid partition\" | \"No valid partition\" | \"3.6.0\" | +------------------+------+----------+--------------+----------------------+------------------------+----------------------+","title":"\u672c\u5730\u591a\u673a\u5b89\u88c5"},{"location":"4.deployment-and-installation/2.compile-and-install-nebula-graph/deploy-nebula-graph-cluster/#rpmdeb_nebulagraph","text":"\u672c\u6587\u4ecb\u7ecd\u901a\u8fc7 RPM \u6216 DEB \u6587\u4ef6\u90e8\u7f72\u96c6\u7fa4\u7684\u793a\u4f8b\u3002 Note \u7528\u6237\u8fd8\u53ef\u4ee5\u901a\u8fc7\u5b98\u65b9\u5de5\u5177\u90e8\u7f72NebulaGraph\u591a\u673a\u96c6\u7fa4\u3002\u8be6\u60c5\u53c2\u89c1 \u4f7f\u7528\u751f\u6001\u5de5\u5177\u5b89\u88c5\u96c6\u7fa4 \u3002","title":"\u4f7f\u7528 RPM/DEB \u5305\u90e8\u7f72NebulaGraph\u591a\u673a\u96c6\u7fa4"},{"location":"4.deployment-and-installation/2.compile-and-install-nebula-graph/deploy-nebula-graph-cluster/#_1","text":"\u673a\u5668\u540d\u79f0 IP \u5730\u5740 graphd \u8fdb\u7a0b\u6570\u91cf storaged \u8fdb\u7a0b\u6570\u91cf metad \u8fdb\u7a0b\u6570\u91cf A 192.168.10.111 1 1 1 B 192.168.10.112 1 1 1 C 192.168.10.113 1 1 1 D 192.168.10.114 1 1 - E 192.168.10.115 1 1 -","title":"\u90e8\u7f72\u65b9\u6848"},{"location":"4.deployment-and-installation/2.compile-and-install-nebula-graph/deploy-nebula-graph-cluster/#_2","text":"\u51c6\u5907 5 \u53f0\u7528\u4e8e\u90e8\u7f72\u96c6\u7fa4\u7684\u673a\u5668\u3002 \u5728\u96c6\u7fa4\u4e2d\u901a\u8fc7 NTP \u670d\u52a1\u540c\u6b65\u65f6\u95f4\u3002","title":"\u524d\u63d0\u6761\u4ef6"},{"location":"4.deployment-and-installation/2.compile-and-install-nebula-graph/deploy-nebula-graph-cluster/#_3","text":"","title":"\u624b\u52a8\u90e8\u7f72\u6d41\u7a0b"},{"location":"4.deployment-and-installation/2.compile-and-install-nebula-graph/deploy-nebula-graph-cluster/#nebulagraph","text":"\u5728\u96c6\u7fa4\u7684\u6bcf\u4e00\u53f0\u670d\u52a1\u5668\u4e0a\u90fd\u5b89\u88c5NebulaGraph\uff0c\u5b89\u88c5\u540e\u6682\u4e0d\u9700\u8981\u542f\u52a8\u670d\u52a1\u3002\u5b89\u88c5\u65b9\u5f0f\u8bf7\u53c2\u89c1\uff1a \u4f7f\u7528 RPM \u6216 DEB \u5305\u5b89\u88c5NebulaGraph \u4f7f\u7528\u6e90\u7801\u5b89\u88c5NebulaGraph","title":"\u5b89\u88c5NebulaGraph"},{"location":"4.deployment-and-installation/2.compile-and-install-nebula-graph/deploy-nebula-graph-cluster/#_4","text":"\u4fee\u6539\u6bcf\u4e2a\u670d\u52a1\u5668\u4e0a\u7684NebulaGraph\u914d\u7f6e\u6587\u4ef6\u3002 NebulaGraph\u7684\u6240\u6709\u914d\u7f6e\u6587\u4ef6\u5747\u4f4d\u4e8e\u5b89\u88c5\u76ee\u5f55\u7684 etc \u76ee\u5f55\u5185\uff0c\u5305\u62ec nebula-graphd.conf \u3001 nebula-metad.conf \u548c nebula-storaged.conf \uff0c\u7528\u6237\u53ef\u4ee5\u53ea\u4fee\u6539\u6240\u9700\u670d\u52a1\u7684\u914d\u7f6e\u6587\u4ef6\u3002\u5404\u4e2a\u673a\u5668\u9700\u8981\u4fee\u6539\u7684\u914d\u7f6e\u6587\u4ef6\u5982\u4e0b\u3002 \u673a\u5668\u540d\u79f0 \u5f85\u4fee\u6539\u914d\u7f6e\u6587\u4ef6 A nebula-graphd.conf \u3001 nebula-storaged.conf \u3001 nebula-metad.conf B nebula-graphd.conf \u3001 nebula-storaged.conf \u3001 nebula-metad.conf C nebula-graphd.conf \u3001 nebula-storaged.conf \u3001 nebula-metad.conf D nebula-graphd.conf \u3001 nebula-storaged.conf E nebula-graphd.conf \u3001 nebula-storaged.conf \u7528\u6237\u53ef\u4ee5\u53c2\u8003\u5982\u4e0b\u914d\u7f6e\u6587\u4ef6\u7684\u5185\u5bb9\uff0c\u4ec5\u5c55\u793a\u96c6\u7fa4\u901a\u4fe1\u7684\u90e8\u5206\u8bbe\u7f6e\uff0c\u672a\u5c55\u793a\u7684\u5185\u5bb9\u4e3a\u9ed8\u8ba4\u8bbe\u7f6e\uff0c\u4fbf\u4e8e\u7528\u6237\u4e86\u89e3\u96c6\u7fa4\u95f4\u5404\u4e2a\u670d\u52a1\u5668\u7684\u5173\u7cfb\u3002 Note \u4e3b\u8981\u4fee\u6539\u7684\u914d\u7f6e\u662f meta_server_addrs \uff0c\u6240\u6709\u914d\u7f6e\u6587\u4ef6\u90fd\u9700\u8981\u586b\u5199\u6240\u6709 Meta \u670d\u52a1\u7684 IP \u5730\u5740\u548c\u7aef\u53e3\uff0c\u540c\u65f6\u9700\u8981\u4fee\u6539 local_ip \u4e3a\u673a\u5668\u672c\u8eab\u7684\u8054\u7f51 IP \u5730\u5740\u3002\u914d\u7f6e\u53c2\u6570\u7684\u8be6\u7ec6\u8bf4\u660e\u8bf7\u53c2\u89c1\uff1a Meta \u670d\u52a1\u914d\u7f6e Graph \u670d\u52a1\u914d\u7f6e Storage \u670d\u52a1\u914d\u7f6e \u673a\u5668 A \u914d\u7f6e nebula-graphd.conf ########## networking ########## # Comma separated Meta Server Addresses --meta_server_addrs = 192 .168.10.111:9559,192.168.10.112:9559,192.168.10.113:9559 # Local IP used to identify the nebula-graphd process. # Change it to an address other than loopback if the service is distributed or # will be accessed remotely. --local_ip = 192 .168.10.111 # Network device to listen on --listen_netdev = any # Port to listen on --port = 9669 nebula-storaged.conf ########## networking ########## # Comma separated Meta server addresses --meta_server_addrs = 192 .168.10.111:9559,192.168.10.112:9559,192.168.10.113:9559 # Local IP used to identify the nebula-storaged process. # Change it to an address other than loopback if the service is distributed or # will be accessed remotely. --local_ip = 192 .168.10.111 # Storage daemon listening port --port = 9779 nebula-metad.conf ########## networking ########## # Comma separated Meta Server addresses --meta_server_addrs = 192 .168.10.111:9559,192.168.10.112:9559,192.168.10.113:9559 # Local IP used to identify the nebula-metad process. # Change it to an address other than loopback if the service is distributed or # will be accessed remotely. --local_ip = 192 .168.10.111 # Meta daemon listening port --port = 9559 \u673a\u5668 B \u914d\u7f6e nebula-graphd.conf ########## networking ########## # Comma separated Meta Server Addresses --meta_server_addrs = 192 .168.10.111:9559,192.168.10.112:9559,192.168.10.113:9559 # Local IP used to identify the nebula-graphd process. # Change it to an address other than loopback if the service is distributed or # will be accessed remotely. --local_ip = 192 .168.10.112 # Network device to listen on --listen_netdev = any # Port to listen on --port = 9669 nebula-storaged.conf ########## networking ########## # Comma separated Meta server addresses --meta_server_addrs = 192 .168.10.111:9559,192.168.10.112:9559,192.168.10.113:9559 # Local IP used to identify the nebula-storaged process. # Change it to an address other than loopback if the service is distributed or # will be accessed remotely. --local_ip = 192 .168.10.112 # Storage daemon listening port --port = 9779 nebula-metad.conf ########## networking ########## # Comma separated Meta Server addresses --meta_server_addrs = 192 .168.10.111:9559,192.168.10.112:9559,192.168.10.113:9559 # Local IP used to identify the nebula-metad process. # Change it to an address other than loopback if the service is distributed or # will be accessed remotely. --local_ip = 192 .168.10.112 # Meta daemon listening port --port = 9559 \u673a\u5668 C \u914d\u7f6e nebula-graphd.conf ########## networking ########## # Comma separated Meta Server Addresses --meta_server_addrs = 192 .168.10.111:9559,192.168.10.112:9559,192.168.10.113:9559 # Local IP used to identify the nebula-graphd process. # Change it to an address other than loopback if the service is distributed or # will be accessed remotely. --local_ip = 192 .168.10.113 # Network device to listen on --listen_netdev = any # Port to listen on --port = 9669 nebula-storaged.conf ########## networking ########## # Comma separated Meta server addresses --meta_server_addrs = 192 .168.10.111:9559,192.168.10.112:9559,192.168.10.113:9559 # Local IP used to identify the nebula-storaged process. # Change it to an address other than loopback if the service is distributed or # will be accessed remotely. --local_ip = 192 .168.10.113 # Storage daemon listening port --port = 9779 nebula-metad.conf ########## networking ########## # Comma separated Meta Server addresses --meta_server_addrs = 192 .168.10.111:9559,192.168.10.112:9559,192.168.10.113:9559 # Local IP used to identify the nebula-metad process. # Change it to an address other than loopback if the service is distributed or # will be accessed remotely. --local_ip = 192 .168.10.113 # Meta daemon listening port --port = 9559 \u673a\u5668 D \u914d\u7f6e nebula-graphd.conf ########## networking ########## # Comma separated Meta Server Addresses --meta_server_addrs = 192 .168.10.111:9559,192.168.10.112:9559,192.168.10.113:9559 # Local IP used to identify the nebula-graphd process. # Change it to an address other than loopback if the service is distributed or # will be accessed remotely. --local_ip = 192 .168.10.114 # Network device to listen on --listen_netdev = any # Port to listen on --port = 9669 nebula-storaged.conf ########## networking ########## # Comma separated Meta server addresses --meta_server_addrs = 192 .168.10.111:9559,192.168.10.112:9559,192.168.10.113:9559 # Local IP used to identify the nebula-storaged process. # Change it to an address other than loopback if the service is distributed or # will be accessed remotely. --local_ip = 192 .168.10.114 # Storage daemon listening port --port = 9779 \u673a\u5668 E \u914d\u7f6e nebula-graphd.conf ########## networking ########## # Comma separated Meta Server Addresses --meta_server_addrs = 192 .168.10.111:9559,192.168.10.112:9559,192.168.10.113:9559 # Local IP used to identify the nebula-graphd process. # Change it to an address other than loopback if the service is distributed or # will be accessed remotely. --local_ip = 192 .168.10.115 # Network device to listen on --listen_netdev = any # Port to listen on --port = 9669 nebula-storaged.conf ########## networking ########## # Comma separated Meta server addresses --meta_server_addrs = 192 .168.10.111:9559,192.168.10.112:9559,192.168.10.113:9559 # Local IP used to identify the nebula-storaged process. # Change it to an address other than loopback if the service is distributed or # will be accessed remotely. --local_ip = 192 .168.10.115 # Storage daemon listening port --port = 9779","title":"\u4fee\u6539\u914d\u7f6e\u6587\u4ef6"},{"location":"4.deployment-and-installation/2.compile-and-install-nebula-graph/deploy-nebula-graph-cluster/#_5","text":"\u4f9d\u6b21\u542f\u52a8 \u5404\u4e2a\u670d\u52a1\u5668 \u4e0a\u7684\u5bf9\u5e94\u8fdb\u7a0b\u3002 \u673a\u5668\u540d\u79f0 \u5f85\u542f\u52a8\u7684\u8fdb\u7a0b A graphd\u3001storaged\u3001metad B graphd\u3001storaged\u3001metad C graphd\u3001storaged\u3001metad D graphd\u3001storaged E graphd\u3001storaged \u542f\u52a8NebulaGraph\u8fdb\u7a0b\u7684\u547d\u4ee4\u5982\u4e0b\uff1a sudo /usr/local/nebula/scripts/nebula.service start <metad | graphd | storaged | all> Note \u786e\u4fdd\u6bcf\u4e2a\u670d\u52a1\u5668\u4e2d\u7684\u5bf9\u5e94\u8fdb\u7a0b\u90fd\u5df2\u542f\u52a8\uff0c\u5426\u5219\u670d\u52a1\u5c06\u542f\u52a8\u5931\u8d25\u3002 \u5f53\u9700\u90fd\u542f\u52a8 graphd\u3001storaged \u548c metad \u65f6\uff0c\u53ef\u4ee5\u7528 all \u4ee3\u66ff\u3002 /usr/local/nebula \u662fNebulaGraph\u7684\u9ed8\u8ba4\u5b89\u88c5\u8def\u5f84\uff0c\u5982\u679c\u4fee\u6539\u8fc7\u5b89\u88c5\u8def\u5f84\uff0c\u8bf7\u4f7f\u7528\u5b9e\u9645\u8def\u5f84\u3002\u66f4\u591a\u542f\u505c\u670d\u52a1\u7684\u5185\u5bb9\uff0c\u8bf7\u53c2\u89c1 \u7ba1\u7406NebulaGraph\u670d\u52a1 \u3002","title":"\u542f\u52a8\u96c6\u7fa4"},{"location":"4.deployment-and-installation/2.compile-and-install-nebula-graph/deploy-nebula-graph-cluster/#_6","text":"\u5b89\u88c5\u539f\u751f CLI \u5ba2\u6237\u7aef NebulaGraph Console \uff0c\u7136\u540e\u8fde\u63a5\u4efb\u4f55\u4e00\u4e2a\u5df2\u542f\u52a8 graphd \u8fdb\u7a0b\u7684\u673a\u5668\uff0c\u6dfb\u52a0 Storage \u4e3b\u673a\uff0c\u7136\u540e\u6267\u884c\u547d\u4ee4 SHOW HOSTS \u68c0\u67e5\u96c6\u7fa4\u72b6\u6001\u3002\u4f8b\u5982\uff1a $ ./nebula-console --addr 192 .168.10.111 --port 9669 -u root -p nebula 2021 /05/25 01 :41:19 [ INFO ] connection pool is initialized successfully Welcome to NebulaGraph! > ADD HOSTS 192 .168.10.111:9779, 192 .168.10.112:9779, 192 .168.10.113:9779, 192 .168.10.114:9779, 192 .168.10.115:9779 ; > SHOW HOSTS ; +------------------+------+----------+--------------+----------------------+------------------------+----------------------+ | Host | Port | Status | Leader count | Leader distribution | Partition distribution | Version | +------------------+------+----------+--------------+----------------------+------------------------+----------------------+ | \"192.168.10.111\" | 9779 | \"ONLINE\" | 0 | \"No valid partition\" | \"No valid partition\" | \"3.6.0\" | | \"192.168.10.112\" | 9779 | \"ONLINE\" | 0 | \"No valid partition\" | \"No valid partition\" | \"3.6.0\" | | \"192.168.10.113\" | 9779 | \"ONLINE\" | 0 | \"No valid partition\" | \"No valid partition\" | \"3.6.0\" | | \"192.168.10.114\" | 9779 | \"ONLINE\" | 0 | \"No valid partition\" | \"No valid partition\" | \"3.6.0\" | | \"192.168.10.115\" | 9779 | \"ONLINE\" | 0 | \"No valid partition\" | \"No valid partition\" | \"3.6.0\" | +------------------+------+----------+--------------+----------------------+------------------------+----------------------+","title":"\u68c0\u67e5\u96c6\u7fa4"},{"location":"4.deployment-and-installation/3.upgrade-nebula-graph/upgrade-nebula-comm/","text":"\u5347\u7ea7NebulaGraph \u81f3 3.6.0 \u7248\u672c \u00b6 \u672c\u6587\u4ee5NebulaGraph 2.6.1 \u7248\u672c\u5347\u7ea7\u5230 3.6.0 \u7248\u672c\u4e3a\u4f8b\uff0c\u4ecb\u7ecdNebulaGraph2.x\u30013.x \u7248\u672c\u5347\u7ea7\u5230 3.6.0 \u7248\u672c\u7684\u65b9\u6cd5\u3002 \u9002\u7528\u7248\u672c \u00b6 \u672c\u6587\u9002\u7528\u4e8e\u5c06NebulaGraph \u4ece 2.5.0 \u53ca\u4e4b\u540e\u7684 2.x\u30013.x \u7248\u672c\u5347\u7ea7\u5230 3.6.0 \u7248\u672c\u3002\u4e0d\u9002\u7528\u4e8e 2.5.0 \u4e4b\u524d\u7684\u5386\u53f2\u7248\u672c\uff08\u542b 1.x \u7248\u672c\uff09\u3002\u5982\u9700\u5347\u7ea7\u5386\u53f2\u7248\u672c\uff0c\u5c06\u5176\u6839\u636e\u6700\u65b0\u7684 2.x \u7248\u672c\u6587\u6863\u5347\u7ea7\u5230 2.5 \u7248\u672c\uff0c\u7136\u540e\u6839\u636e\u672c\u6587\u7684\u8bf4\u660e\u5347\u7ea7\u5230 3.6.0 \u7248\u672c\u3002 Caution \u5982\u9700\u4ece 2.0.0 \u4e4b\u524d\u7684\u7248\u672c\uff08\u542b 1.x \u7248\u672c\uff09\u5347\u7ea7\u5230 3.6.0\uff0c\u8fd8\u9700\u627e\u5230 3.6.0 \u7248\u672c\u6587\u4ef6\u4e2d share/resources \u76ee\u5f55\u4e0b\u7684 date_time_zonespec.csv \u6587\u4ef6\uff0c\u5c06\u5176\u590d\u5236\u5230NebulaGraph\u5b89\u88c5\u8def\u5f84\u4e0b\u7684\u76f8\u540c\u76ee\u5f55\u5185\u3002\u4e5f\u53ef\u4ece GitHub \u4e0b\u8f7d\u8be5\u6587\u4ef6\u3002 \u4e0d\u652f\u6301\u8f6e\u8f6c\u70ed\u5347\u7ea7\uff0c\u9700\u5b8c\u5168\u505c\u6b62\u6574\u4e2a\u96c6\u7fa4\u670d\u52a1\u3002 \u672a\u63d0\u4f9b\u5347\u7ea7\u811a\u672c\uff0c\u9700\u624b\u52a8\u5728\u6bcf\u53f0\u670d\u52a1\u5668\u4e0a\u4f9d\u6b21\u6267\u884c\u3002 \u4e0d\u652f\u6301\u57fa\u4e8e Docker \u5bb9\u5668\uff08\u5305\u62ec Docker Swarm\u3001Docker Compose\u3001K8s\uff09\u7684\u5347\u7ea7\u3002 \u5fc5\u987b\u5728\u539f\u670d\u52a1\u5668\u4e0a\u539f\u5730\u5347\u7ea7\uff0c\u4e0d\u80fd\u4fee\u6539\u539f\u673a\u5668\u7684 IP \u5730\u5740\u3001\u914d\u7f6e\u6587\u4ef6\uff0c\u4e0d\u53ef\u66f4\u6539\u96c6\u7fa4\u62d3\u6251\u3002 \u5df2\u77e5\u4f1a\u9020\u6210\u6570\u636e\u4e22\u5931\u7684 4 \u79cd\u573a\u666f\uff0c\u548c alter schema \u4ee5\u53ca default value \u76f8\u5173\uff0c\u53c2\u89c1 github known issues \u3002 \u6570\u636e\u76ee\u5f55\u4e0d\u8981\u4f7f\u7528\u8f6f\u8fde\u63a5\u5207\u6362\uff0c\u907f\u514d\u5931\u6548\u3002 \u90e8\u5206\u5347\u7ea7\u64cd\u4f5c\u9700\u8981\u6709 sudo \u6743\u9650\u3002 \u5347\u7ea7\u5f71\u54cd \u00b6 \u5ba2\u6237\u7aef\u517c\u5bb9 \u5347\u7ea7\u540e\u65e7\u7248\u672c\u5ba2\u6237\u7aef\u5c06\u65e0\u6cd5\u8fde\u63a5NebulaGraph\uff0c\u9700\u5c06\u6240\u6709\u5ba2\u6237\u7aef\u90fd\u5347\u7ea7\u5230\u517c\u5bb9NebulaGraph 3.6.0 \u7684\u7248\u672c\u3002 \u914d\u7f6e\u53d8\u5316 \u5c11\u6570\u914d\u7f6e\u53c2\u6570\u53d1\u751f\u6539\u53d8\uff0c\u8be6\u60c5\u53c2\u8003\u7248\u672c\u53d1\u5e03\u8bf4\u660e\u548c\u53c2\u6570\u6587\u6863\u3002 \u8bed\u6cd5\u517c\u5bb9 nGQL \u8bed\u6cd5\u6709\u90e8\u5206\u4e0d\u517c\u5bb9\uff1a \u7981\u7528 YIELD \u5b50\u53e5\u8fd4\u56de\u81ea\u5b9a\u4e49\u53d8\u91cf\u3002 FETCH \u3001 GO \u3001 LOOKUP \u3001 FIND PATH \u3001 GET SUBGRAPH \u8bed\u53e5\u4e2d\u5fc5\u987b\u6dfb\u52a0 YIELD \u5b50\u53e5\u3002 MATCH \u8bed\u53e5\u4e2d\u83b7\u53d6\u70b9\u5c5e\u6027\u65f6\uff0c\u5fc5\u987b\u6307\u5b9a Tag\uff0c\u4f8b\u5982\u4ece return v.name \u53d8\u4e3a return v.player.name \u3002 \u5168\u6587\u7d22\u5f15 \u5728\u5347\u7ea7\u90e8\u7f72\u4e86\u5168\u6587\u7d22\u5f15\u7684NebulaGraph\u524d\uff0c\u9700\u8981\u624b\u52a8\u5220\u9664 Elasticsearch (ES) \u4e2d\u7684\u5168\u6587\u7d22\u5f15\u3002\u5728\u5347\u7ea7\u540e\u9700\u8981\u91cd\u65b0\u4f7f\u7528 SIGN IN \u8bed\u53e5\u767b\u5f55 ES \u5e76\u91cd\u65b0\u521b\u5efa\u5168\u6587\u7d22\u5f15\u3002\u7528\u6237\u53ef\u901a\u8fc7 cURL \u547d\u4ee4\u624b\u52a8\u5220\u9664 ES \u4e2d\u5168\u6587\u7d22\u5f15\u3002\u547d\u4ee4\u4e3a curl -XDELETE -u <es_username>:<es_password> '<es_access_ip>:<port>/<fullindex_name>' \uff0c\u4f8b\u5982 curl -XDELETE -u elastic:elastic 'http://192.168.8.223:9200/nebula_index_2534' \u3002\u5982\u679c ES \u6ca1\u6709\u8bbe\u7f6e\u7528\u6237\u540d\u53ca\u5bc6\u7801\uff0c\u5219\u65e0\u9700\u6307\u5b9a -u \u9009\u9879\u3002 Caution \u53ef\u80fd\u5b58\u5728\u5176\u5b83\u6682\u672a\u53d1\u73b0\u7684\u5f71\u54cd\uff0c\u5efa\u8bae\u5347\u7ea7\u524d\u8be6\u7ec6\u67e5\u770b\u7248\u672c\u53d1\u5e03\u8bf4\u660e\u548c\u4ea7\u54c1\u624b\u518c\uff0c\u5e76\u5bc6\u5207\u5173\u6ce8 \u8bba\u575b \u4e0e GitHub \u7684\u6700\u65b0\u52a8\u6001\u3002 \u5347\u7ea7\u51c6\u5907 \u00b6 \u6839\u636e\u64cd\u4f5c\u7cfb\u7edf\u548c\u67b6\u6784\u4e0b\u8f7dNebulaGraph 3.6.0 \u7248\u672c\u7684\u5305\u6587\u4ef6\u5e76\u89e3\u538b\uff0c\u5347\u7ea7\u8fc7\u7a0b\u4e2d\u9700\u8981\u5176\u4e2d\u7684\u4e8c\u8fdb\u5236\u6587\u4ef6\u3002\u4e0b\u8f7d\u5730\u5740\u53c2\u89c1 Download \u9875\u9762 \u3002 Note \u7f16\u8bd1\u6e90\u7801\u6216\u8005\u4e0b\u8f7d RPM/DEB\u3001TAR \u5305\u90fd\u53ef\u4ee5\u83b7\u53d6\u65b0\u7248\u4e8c\u8fdb\u5236\u6587\u4ef6\u3002 \u6839\u636e Storage \u548c Meta \u670d\u52a1\u914d\u7f6e\u4e2d data_path \u53c2\u6570\u7684\u503c\u627e\u5230\u6570\u636e\u6587\u4ef6\u7684\u4f4d\u7f6e\uff0c\u5e76\u5907\u4efd\u6570\u636e\u3002\u9ed8\u8ba4\u8def\u5f84\u4e3a nebula/data/storage \u548c nebula/data/meta \u3002 Danger \u5347\u7ea7\u65f6\u4e0d\u4f1a\u81ea\u52a8\u5907\u4efd\u539f\u6709\u6570\u636e\u3002\u52a1\u5fc5\u624b\u52a8\u5907\u4efd\u6570\u636e\uff0c\u9632\u6b62\u4e22\u5931\u3002 \u5907\u4efd\u914d\u7f6e\u6587\u4ef6\u3002 \u7edf\u8ba1\u6240\u6709\u56fe\u7a7a\u95f4\u5347\u7ea7\u524d\u7684\u6570\u636e\u91cf\uff0c\u4f9b\u5347\u7ea7\u540e\u6bd4\u8f83\u3002\u7edf\u8ba1\u65b9\u6cd5\u5982\u4e0b\uff1a \u8fd0\u884c SUBMIT JOB STATS \u3002 \u8fd0\u884c SHOW JOBS \u5e76\u8bb0\u5f55\u8fd4\u56de\u7ed3\u679c\u3002 \u5347\u7ea7\u6b65\u9aa4 \u00b6 \u505c\u6b62\u6240\u6709NebulaGraph\u670d\u52a1\u3002 <nebula_install_path>/scripts/nebula.service stop all nebula_install_path \u4ee3\u8868NebulaGraph\u7684\u5b89\u88c5\u76ee\u5f55\u3002 storaged \u8fdb\u7a0b flush \u6570\u636e\u8981\u7b49\u5f85\u7ea6 1 \u5206\u949f\u3002\u8fd0\u884c\u547d\u4ee4\u540e\u53ef\u7ee7\u7eed\u8fd0\u884c nebula.service status all \u547d\u4ee4\u4ee5\u786e\u8ba4\u6240\u6709\u670d\u52a1\u90fd\u5df2\u505c\u6b62\u3002\u542f\u52a8\u548c\u505c\u6b62\u670d\u52a1\u7684\u8be6\u7ec6\u8bf4\u660e\u53c2\u89c1 \u7ba1\u7406\u670d\u52a1 \u3002 Note \u5982\u679c\u8d85\u8fc7 20 \u5206\u949f\u4e0d\u80fd\u505c\u6b62\u670d\u52a1\uff0c\u653e\u5f03\u672c\u6b21\u5347\u7ea7\uff0c\u5728 \u8bba\u575b \u6216 GitHub \u63d0\u95ee\u3002 Caution \u4ece 3.0.0 \u5f00\u59cb\uff0c\u652f\u6301\u63d2\u5165\u65e0 Tag \u7684\u70b9\u3002\u5982\u679c\u7528\u6237\u9700\u8981\u4fdd\u7559\u65e0 Tag \u7684\u70b9\uff0c\u5728\u96c6\u7fa4\u5185\u6240\u6709 Graph \u670d\u52a1\u7684\u914d\u7f6e\u6587\u4ef6\uff08 nebula-graphd.conf \uff09\u4e2d\u65b0\u589e --graph_use_vertex_key=true \uff1b\u5728\u6240\u6709 Storage \u670d\u52a1\u7684\u914d\u7f6e\u6587\u4ef6\uff08 nebula-storaged.conf \uff09\u4e2d\u65b0\u589e --use_vertex_key=true \u3002 \u5728 \u5347\u7ea7\u51c6\u5907 \u4e2d\u4e0b\u8f7d\u7684\u5305\u7684\u76ee\u7684\u8def\u5f84\u4e0b\uff0c\u7528\u6b64\u5904 bin \u76ee\u5f55\u4e2d\u7684\u65b0\u7248\u4e8c\u8fdb\u5236\u6587\u4ef6\u66ff\u6362NebulaGraph\u5b89\u88c5\u8def\u5f84\u4e0b bin \u76ee\u5f55\u4e2d\u7684\u65e7\u7248\u4e8c\u8fdb\u5236\u6587\u4ef6\u3002 Note \u6bcf\u53f0\u90e8\u7f72\u4e86NebulaGraph\u670d\u52a1\u7684\u673a\u5668\u4e0a\u90fd\u8981\u66f4\u65b0\u76f8\u5e94\u670d\u52a1\u7684\u4e8c\u8fdb\u5236\u6587\u4ef6\u3002 \u7f16\u8f91\u6240\u6709 Graph \u670d\u52a1\u7684\u914d\u7f6e\u6587\u4ef6\uff0c\u4fee\u6539\u4ee5\u4e0b\u53c2\u6570\u4ee5\u9002\u5e94\u65b0\u7248\u672c\u7684\u53d6\u503c\u8303\u56f4\u3002\u5982\u53c2\u6570\u503c\u5df2\u5728\u89c4\u5b9a\u8303\u56f4\u5185\uff0c\u5ffd\u7565\u8be5\u6b65\u9aa4\u3002 \u4e3a session_idle_timeout_secs \u53c2\u6570\u8bbe\u7f6e\u4e00\u4e2a\u5728 [1,604800] \u533a\u95f4\u7684\u503c\uff0c\u63a8\u8350\u503c\u4e3a 28800\u3002 \u4e3a client_idle_timeout_secs \u53c2\u6570\u8bbe\u7f6e\u4e00\u4e2a\u5728 [1,604800] \u533a\u95f4\u7684\u503c\uff0c\u63a8\u8350\u503c\u4e3a 28800\u3002 \u8fd9\u4e9b\u53c2\u6570\u5728 2.x \u7248\u672c\u4e2d\u7684\u9ed8\u8ba4\u503c\u4e0d\u5728\u65b0\u7248\u672c\u7684\u53d6\u503c\u8303\u56f4\u5185\uff0c\u5982\u4e0d\u4fee\u6539\u4f1a\u5347\u7ea7\u5931\u8d25\u3002\u8be6\u7ec6\u53c2\u6570\u8bf4\u660e\u53c2\u89c1 Graph \u670d\u52a1\u914d\u7f6e \u3002 \u542f\u52a8\u6240\u6709 Meta \u670d\u52a1\u3002 <nebula_install_path>/scripts/nebula-metad.service start \u542f\u52a8\u540e\uff0cMeta \u670d\u52a1\u9009\u4e3e leader\u3002\u8be5\u8fc7\u7a0b\u8017\u65f6\u6570\u79d2\u3002 \u542f\u52a8\u540e\u53ef\u4ee5\u4efb\u610f\u542f\u52a8\u4e00\u4e2a Graph \u670d\u52a1\u8282\u70b9\uff0c\u4f7f\u7528NebulaGraph\u8fde\u63a5\u8be5\u8282\u70b9\u5e76\u8fd0\u884c SHOW HOSTS meta \u548c SHOW META LEADER \uff0c\u5982\u679c\u80fd\u591f\u6b63\u5e38\u8fd4\u56de Meta \u8282\u70b9\u7684\u72b6\u6001\uff0c\u5219 Meta \u670d\u52a1\u542f\u52a8\u6210\u529f\u3002 Note \u5982\u679c\u542f\u52a8\u5f02\u5e38\uff0c\u653e\u5f03\u672c\u6b21\u5347\u7ea7\uff0c\u5e76\u5728 \u8bba\u575b \u6216 GitHub \u63d0\u95ee\u3002 \u542f\u52a8\u6240\u6709 Graph \u548c Storage \u670d\u52a1\u3002 Note \u5982\u679c\u542f\u52a8\u5f02\u5e38\uff0c\u653e\u5f03\u672c\u6b21\u5347\u7ea7\uff0c\u5e76\u5728 \u8bba\u575b \u6216 GitHub \u63d0\u95ee\u3002 \u8fde\u63a5\u65b0\u7248NebulaGraph\uff0c\u9a8c\u8bc1\u670d\u52a1\u662f\u5426\u53ef\u7528\u3001\u6570\u636e\u662f\u5426\u6b63\u5e38\u3002\u8fde\u63a5\u65b9\u6cd5\u53c2\u89c1 \u8fde\u63a5\u670d\u52a1 \u3002 \u76ee\u524d\u5c1a\u65e0\u6709\u6548\u65b9\u5f0f\u5224\u65ad\u5347\u7ea7\u662f\u5426\u5b8c\u5168\u6210\u529f\uff0c\u53ef\u7528\u4e8e\u6d4b\u8bd5\u7684\u53c2\u8003\u547d\u4ee4\u5982\u4e0b\uff1a nebula> SHOW HOSTS; nebula> SHOW HOSTS storage; nebula> SHOW SPACES; nebula> USE <space_name> nebula> SHOW PARTS; nebula> SUBMIT JOB STATS; nebula> SHOW STATS; nebula> MATCH (v) RETURN v LIMIT 5; \u4e5f\u53ef\u6839\u636e 3.6.0 \u7248\u672c\u7684\u65b0\u529f\u80fd\u6d4b\u8bd5\uff0c\u65b0\u529f\u80fd\u5217\u8868\u53c2\u89c1 \u53d1\u5e03\u8bf4\u660e \u3002 \u5347\u7ea7\u5931\u8d25\u56de\u6eda \u00b6 \u5982\u679c\u5347\u7ea7\u5931\u8d25\uff0c\u505c\u6b62\u65b0\u7248\u672c\u7684\u6240\u6709\u670d\u52a1\uff0c\u4ece\u5907\u4efd\u4e2d\u6062\u590d\u914d\u7f6e\u6587\u4ef6\u548c\u4e8c\u8fdb\u5236\u6587\u4ef6\uff0c\u542f\u52a8\u5386\u53f2\u7248\u672c\u7684\u670d\u52a1\u3002 \u6240\u6709\u5468\u8fb9\u5ba2\u6237\u7aef\u4e5f\u5207\u6362\u4e3a\u65e7\u7248\u3002 FAQ \u00b6 \u5347\u7ea7\u8fc7\u7a0b\u4e2d\u662f\u5426\u53ef\u4ee5\u901a\u8fc7\u5ba2\u6237\u7aef\u5199\u5165\u6570\u636e\uff1f \u00b6 \u4e0d\u53ef\u4ee5\u3002\u5347\u7ea7\u8fc7\u7a0b\u4e2d\u9700\u8981\u505c\u6b62\u6240\u6709\u670d\u52a1\u3002 \u5347\u7ea7\u8fc7\u7a0b\u4e2d\u51fa\u73b0 Space 0 not found \u3002 \u00b6 \u5f53\u5347\u7ea7\u8fc7\u7a0b\u4e2d\u51fa\u73b0 Space 0 not found \u544a\u8b66\u4fe1\u606f\u65f6\uff0c\u7528\u6237\u53ef\u4ee5\u5ffd\u7565\u8fd9\u4e2a\u4fe1\u606f\u3002\u5347\u7ea7\u8fc7\u7a0b\u4f1a\u4ece\u78c1\u76d8\u8bfb\u53d6\u6240\u6709 Space ID\uff0c\u800c 0 \uff08\u8def\u5f84\u4e3a <nebula_storagepath>/data/storage/nebula/0 \uff09\u5e76\u4e0d\u4f1a\u5b58\u5728\u78c1\u76d8\u4e0a\u3002Space 0 \u7528\u6765\u5b58\u50a8 Storage \u670d\u52a1\u7684\u5143\u4fe1\u606f\uff0c\u5e76\u4e0d\u5305\u542b\u7528\u6237\u6570\u636e\uff0c\u56e0\u6b64\u4e0d\u4f1a\u5f71\u54cd\u5347\u7ea7\u3002 \u5982\u679c\u67d0\u53f0\u673a\u5668\u53ea\u6709 Graph \u670d\u52a1\uff0c\u6ca1\u6709 Storage \u670d\u52a1\uff0c\u5982\u4f55\u5347\u7ea7\uff1f \u00b6 \u53ea\u9700\u8981\u5347\u7ea7 Graph \u670d\u52a1\u5bf9\u5e94\u7684\u4e8c\u8fdb\u5236\u6587\u4ef6\u548c\u914d\u7f6e\u6587\u4ef6\u3002 \u64cd\u4f5c\u62a5\u9519 Permission denied \u3002 \u00b6 \u90e8\u5206\u547d\u4ee4\u9700\u8981\u6709 sudo \u6743\u9650\u3002 \u662f\u5426\u6709\u5de5\u5177\u6216\u8005\u529e\u6cd5\u9a8c\u8bc1\u65b0\u65e7\u7248\u672c\u6570\u636e\u662f\u5426\u4e00\u81f4\uff1f \u00b6 \u6ca1\u6709\u3002\u5982\u679c\u53ea\u662f\u68c0\u67e5\u6570\u636e\u91cf\uff0c\u53ef\u4ee5\u5728\u5347\u7ea7\u5b8c\u6210\u540e\u518d\u6b21\u8fd0\u884c SUBMIT JOB STATS \u548c SHOW STATS \u7edf\u8ba1\u6570\u636e\u91cf\uff0c\u5e76\u4e0e\u5347\u7ea7\u4e4b\u524d\u505a\u5bf9\u6bd4\u3002 Storage OFFLINE \u5e76\u4e14 Leader count \u662f 0 \u600e\u4e48\u5904\u7406\uff1f \u00b6 \u8fd0\u884c\u4ee5\u4e0b\u547d\u4ee4\u624b\u52a8\u6dfb\u52a0 Storage \u4e3b\u673a\uff1a ADD HOSTS <ip>:<port>[, <ip>:<port> ...]; \u4f8b\u5982\uff1a ADD HOSTS 192.168.10.100:9779, 192.168.10.101:9779, 192.168.10.102:9779; \u5982\u679c\u6709\u591a\u4e2a Meta \u670d\u52a1\u8282\u70b9\uff0c\u624b\u52a8 ADD HOSTS \u4e4b\u540e\uff0c\u90e8\u5206 Storage \u8282\u70b9\u9700\u7b49\u5f85\u6570\u4e2a\u5fc3\u8df3\uff08 heartbeat_interval_secs \uff09\u7684\u65f6\u95f4\u624d\u80fd\u6b63\u5e38\u8fde\u63a5\u5230\u96c6\u7fa4\u3002 \u5982\u679c\u6dfb\u52a0 Storage \u4e3b\u673a\u540e\u95ee\u9898\u4ecd\u7136\u5b58\u5728\uff0c\u5728 \u8bba\u575b \u6216 GitHub \u63d0\u95ee\u3002 \u4e3a\u4ec0\u4e48\u5347\u7ea7\u540e\u7528 SHOW JOBS \u67e5\u8be2\u5230\u7684 Job \u7684 ID \u4e0e\u5347\u7ea7\u524d\u4e00\u6837\uff0c\u4f46 Job \u540d\u79f0\u7b49\u4fe1\u606f\u4e0d\u540c\u4e86\uff1f \u00b6 NebulaGraph 2.5.0 \u7248\u672c\u8c03\u6574\u4e86 Job \u7684\u5b9a\u4e49\uff0c\u8be6\u60c5\u53c2\u89c1 Pull request \u3002\u5982\u679c\u662f\u4ece 2.5.0 \u4e4b\u524d\u7684\u7248\u672c\u5347\u7ea7\uff0c\u4f1a\u51fa\u73b0\u8be5\u95ee\u9898\u3002 \u6709\u54ea\u4e9b\u8bed\u6cd5\u4e0d\u517c\u5bb9 ? \u00b6 A: \u53c2\u89c1 Release Note Incompatibility \u90e8\u5206\u3002","title":"\u5347\u7ea7\u7248\u672c"},{"location":"4.deployment-and-installation/3.upgrade-nebula-graph/upgrade-nebula-comm/#nebulagraph_360","text":"\u672c\u6587\u4ee5NebulaGraph 2.6.1 \u7248\u672c\u5347\u7ea7\u5230 3.6.0 \u7248\u672c\u4e3a\u4f8b\uff0c\u4ecb\u7ecdNebulaGraph2.x\u30013.x \u7248\u672c\u5347\u7ea7\u5230 3.6.0 \u7248\u672c\u7684\u65b9\u6cd5\u3002","title":"\u5347\u7ea7NebulaGraph \u81f3 3.6.0 \u7248\u672c"},{"location":"4.deployment-and-installation/3.upgrade-nebula-graph/upgrade-nebula-comm/#_1","text":"\u672c\u6587\u9002\u7528\u4e8e\u5c06NebulaGraph \u4ece 2.5.0 \u53ca\u4e4b\u540e\u7684 2.x\u30013.x \u7248\u672c\u5347\u7ea7\u5230 3.6.0 \u7248\u672c\u3002\u4e0d\u9002\u7528\u4e8e 2.5.0 \u4e4b\u524d\u7684\u5386\u53f2\u7248\u672c\uff08\u542b 1.x \u7248\u672c\uff09\u3002\u5982\u9700\u5347\u7ea7\u5386\u53f2\u7248\u672c\uff0c\u5c06\u5176\u6839\u636e\u6700\u65b0\u7684 2.x \u7248\u672c\u6587\u6863\u5347\u7ea7\u5230 2.5 \u7248\u672c\uff0c\u7136\u540e\u6839\u636e\u672c\u6587\u7684\u8bf4\u660e\u5347\u7ea7\u5230 3.6.0 \u7248\u672c\u3002 Caution \u5982\u9700\u4ece 2.0.0 \u4e4b\u524d\u7684\u7248\u672c\uff08\u542b 1.x \u7248\u672c\uff09\u5347\u7ea7\u5230 3.6.0\uff0c\u8fd8\u9700\u627e\u5230 3.6.0 \u7248\u672c\u6587\u4ef6\u4e2d share/resources \u76ee\u5f55\u4e0b\u7684 date_time_zonespec.csv \u6587\u4ef6\uff0c\u5c06\u5176\u590d\u5236\u5230NebulaGraph\u5b89\u88c5\u8def\u5f84\u4e0b\u7684\u76f8\u540c\u76ee\u5f55\u5185\u3002\u4e5f\u53ef\u4ece GitHub \u4e0b\u8f7d\u8be5\u6587\u4ef6\u3002 \u4e0d\u652f\u6301\u8f6e\u8f6c\u70ed\u5347\u7ea7\uff0c\u9700\u5b8c\u5168\u505c\u6b62\u6574\u4e2a\u96c6\u7fa4\u670d\u52a1\u3002 \u672a\u63d0\u4f9b\u5347\u7ea7\u811a\u672c\uff0c\u9700\u624b\u52a8\u5728\u6bcf\u53f0\u670d\u52a1\u5668\u4e0a\u4f9d\u6b21\u6267\u884c\u3002 \u4e0d\u652f\u6301\u57fa\u4e8e Docker \u5bb9\u5668\uff08\u5305\u62ec Docker Swarm\u3001Docker Compose\u3001K8s\uff09\u7684\u5347\u7ea7\u3002 \u5fc5\u987b\u5728\u539f\u670d\u52a1\u5668\u4e0a\u539f\u5730\u5347\u7ea7\uff0c\u4e0d\u80fd\u4fee\u6539\u539f\u673a\u5668\u7684 IP \u5730\u5740\u3001\u914d\u7f6e\u6587\u4ef6\uff0c\u4e0d\u53ef\u66f4\u6539\u96c6\u7fa4\u62d3\u6251\u3002 \u5df2\u77e5\u4f1a\u9020\u6210\u6570\u636e\u4e22\u5931\u7684 4 \u79cd\u573a\u666f\uff0c\u548c alter schema \u4ee5\u53ca default value \u76f8\u5173\uff0c\u53c2\u89c1 github known issues \u3002 \u6570\u636e\u76ee\u5f55\u4e0d\u8981\u4f7f\u7528\u8f6f\u8fde\u63a5\u5207\u6362\uff0c\u907f\u514d\u5931\u6548\u3002 \u90e8\u5206\u5347\u7ea7\u64cd\u4f5c\u9700\u8981\u6709 sudo \u6743\u9650\u3002","title":"\u9002\u7528\u7248\u672c"},{"location":"4.deployment-and-installation/3.upgrade-nebula-graph/upgrade-nebula-comm/#_2","text":"\u5ba2\u6237\u7aef\u517c\u5bb9 \u5347\u7ea7\u540e\u65e7\u7248\u672c\u5ba2\u6237\u7aef\u5c06\u65e0\u6cd5\u8fde\u63a5NebulaGraph\uff0c\u9700\u5c06\u6240\u6709\u5ba2\u6237\u7aef\u90fd\u5347\u7ea7\u5230\u517c\u5bb9NebulaGraph 3.6.0 \u7684\u7248\u672c\u3002 \u914d\u7f6e\u53d8\u5316 \u5c11\u6570\u914d\u7f6e\u53c2\u6570\u53d1\u751f\u6539\u53d8\uff0c\u8be6\u60c5\u53c2\u8003\u7248\u672c\u53d1\u5e03\u8bf4\u660e\u548c\u53c2\u6570\u6587\u6863\u3002 \u8bed\u6cd5\u517c\u5bb9 nGQL \u8bed\u6cd5\u6709\u90e8\u5206\u4e0d\u517c\u5bb9\uff1a \u7981\u7528 YIELD \u5b50\u53e5\u8fd4\u56de\u81ea\u5b9a\u4e49\u53d8\u91cf\u3002 FETCH \u3001 GO \u3001 LOOKUP \u3001 FIND PATH \u3001 GET SUBGRAPH \u8bed\u53e5\u4e2d\u5fc5\u987b\u6dfb\u52a0 YIELD \u5b50\u53e5\u3002 MATCH \u8bed\u53e5\u4e2d\u83b7\u53d6\u70b9\u5c5e\u6027\u65f6\uff0c\u5fc5\u987b\u6307\u5b9a Tag\uff0c\u4f8b\u5982\u4ece return v.name \u53d8\u4e3a return v.player.name \u3002 \u5168\u6587\u7d22\u5f15 \u5728\u5347\u7ea7\u90e8\u7f72\u4e86\u5168\u6587\u7d22\u5f15\u7684NebulaGraph\u524d\uff0c\u9700\u8981\u624b\u52a8\u5220\u9664 Elasticsearch (ES) \u4e2d\u7684\u5168\u6587\u7d22\u5f15\u3002\u5728\u5347\u7ea7\u540e\u9700\u8981\u91cd\u65b0\u4f7f\u7528 SIGN IN \u8bed\u53e5\u767b\u5f55 ES \u5e76\u91cd\u65b0\u521b\u5efa\u5168\u6587\u7d22\u5f15\u3002\u7528\u6237\u53ef\u901a\u8fc7 cURL \u547d\u4ee4\u624b\u52a8\u5220\u9664 ES \u4e2d\u5168\u6587\u7d22\u5f15\u3002\u547d\u4ee4\u4e3a curl -XDELETE -u <es_username>:<es_password> '<es_access_ip>:<port>/<fullindex_name>' \uff0c\u4f8b\u5982 curl -XDELETE -u elastic:elastic 'http://192.168.8.223:9200/nebula_index_2534' \u3002\u5982\u679c ES \u6ca1\u6709\u8bbe\u7f6e\u7528\u6237\u540d\u53ca\u5bc6\u7801\uff0c\u5219\u65e0\u9700\u6307\u5b9a -u \u9009\u9879\u3002 Caution \u53ef\u80fd\u5b58\u5728\u5176\u5b83\u6682\u672a\u53d1\u73b0\u7684\u5f71\u54cd\uff0c\u5efa\u8bae\u5347\u7ea7\u524d\u8be6\u7ec6\u67e5\u770b\u7248\u672c\u53d1\u5e03\u8bf4\u660e\u548c\u4ea7\u54c1\u624b\u518c\uff0c\u5e76\u5bc6\u5207\u5173\u6ce8 \u8bba\u575b \u4e0e GitHub \u7684\u6700\u65b0\u52a8\u6001\u3002","title":"\u5347\u7ea7\u5f71\u54cd"},{"location":"4.deployment-and-installation/3.upgrade-nebula-graph/upgrade-nebula-comm/#_3","text":"\u6839\u636e\u64cd\u4f5c\u7cfb\u7edf\u548c\u67b6\u6784\u4e0b\u8f7dNebulaGraph 3.6.0 \u7248\u672c\u7684\u5305\u6587\u4ef6\u5e76\u89e3\u538b\uff0c\u5347\u7ea7\u8fc7\u7a0b\u4e2d\u9700\u8981\u5176\u4e2d\u7684\u4e8c\u8fdb\u5236\u6587\u4ef6\u3002\u4e0b\u8f7d\u5730\u5740\u53c2\u89c1 Download \u9875\u9762 \u3002 Note \u7f16\u8bd1\u6e90\u7801\u6216\u8005\u4e0b\u8f7d RPM/DEB\u3001TAR \u5305\u90fd\u53ef\u4ee5\u83b7\u53d6\u65b0\u7248\u4e8c\u8fdb\u5236\u6587\u4ef6\u3002 \u6839\u636e Storage \u548c Meta \u670d\u52a1\u914d\u7f6e\u4e2d data_path \u53c2\u6570\u7684\u503c\u627e\u5230\u6570\u636e\u6587\u4ef6\u7684\u4f4d\u7f6e\uff0c\u5e76\u5907\u4efd\u6570\u636e\u3002\u9ed8\u8ba4\u8def\u5f84\u4e3a nebula/data/storage \u548c nebula/data/meta \u3002 Danger \u5347\u7ea7\u65f6\u4e0d\u4f1a\u81ea\u52a8\u5907\u4efd\u539f\u6709\u6570\u636e\u3002\u52a1\u5fc5\u624b\u52a8\u5907\u4efd\u6570\u636e\uff0c\u9632\u6b62\u4e22\u5931\u3002 \u5907\u4efd\u914d\u7f6e\u6587\u4ef6\u3002 \u7edf\u8ba1\u6240\u6709\u56fe\u7a7a\u95f4\u5347\u7ea7\u524d\u7684\u6570\u636e\u91cf\uff0c\u4f9b\u5347\u7ea7\u540e\u6bd4\u8f83\u3002\u7edf\u8ba1\u65b9\u6cd5\u5982\u4e0b\uff1a \u8fd0\u884c SUBMIT JOB STATS \u3002 \u8fd0\u884c SHOW JOBS \u5e76\u8bb0\u5f55\u8fd4\u56de\u7ed3\u679c\u3002","title":"\u5347\u7ea7\u51c6\u5907"},{"location":"4.deployment-and-installation/3.upgrade-nebula-graph/upgrade-nebula-comm/#_4","text":"\u505c\u6b62\u6240\u6709NebulaGraph\u670d\u52a1\u3002 <nebula_install_path>/scripts/nebula.service stop all nebula_install_path \u4ee3\u8868NebulaGraph\u7684\u5b89\u88c5\u76ee\u5f55\u3002 storaged \u8fdb\u7a0b flush \u6570\u636e\u8981\u7b49\u5f85\u7ea6 1 \u5206\u949f\u3002\u8fd0\u884c\u547d\u4ee4\u540e\u53ef\u7ee7\u7eed\u8fd0\u884c nebula.service status all \u547d\u4ee4\u4ee5\u786e\u8ba4\u6240\u6709\u670d\u52a1\u90fd\u5df2\u505c\u6b62\u3002\u542f\u52a8\u548c\u505c\u6b62\u670d\u52a1\u7684\u8be6\u7ec6\u8bf4\u660e\u53c2\u89c1 \u7ba1\u7406\u670d\u52a1 \u3002 Note \u5982\u679c\u8d85\u8fc7 20 \u5206\u949f\u4e0d\u80fd\u505c\u6b62\u670d\u52a1\uff0c\u653e\u5f03\u672c\u6b21\u5347\u7ea7\uff0c\u5728 \u8bba\u575b \u6216 GitHub \u63d0\u95ee\u3002 Caution \u4ece 3.0.0 \u5f00\u59cb\uff0c\u652f\u6301\u63d2\u5165\u65e0 Tag \u7684\u70b9\u3002\u5982\u679c\u7528\u6237\u9700\u8981\u4fdd\u7559\u65e0 Tag \u7684\u70b9\uff0c\u5728\u96c6\u7fa4\u5185\u6240\u6709 Graph \u670d\u52a1\u7684\u914d\u7f6e\u6587\u4ef6\uff08 nebula-graphd.conf \uff09\u4e2d\u65b0\u589e --graph_use_vertex_key=true \uff1b\u5728\u6240\u6709 Storage \u670d\u52a1\u7684\u914d\u7f6e\u6587\u4ef6\uff08 nebula-storaged.conf \uff09\u4e2d\u65b0\u589e --use_vertex_key=true \u3002 \u5728 \u5347\u7ea7\u51c6\u5907 \u4e2d\u4e0b\u8f7d\u7684\u5305\u7684\u76ee\u7684\u8def\u5f84\u4e0b\uff0c\u7528\u6b64\u5904 bin \u76ee\u5f55\u4e2d\u7684\u65b0\u7248\u4e8c\u8fdb\u5236\u6587\u4ef6\u66ff\u6362NebulaGraph\u5b89\u88c5\u8def\u5f84\u4e0b bin \u76ee\u5f55\u4e2d\u7684\u65e7\u7248\u4e8c\u8fdb\u5236\u6587\u4ef6\u3002 Note \u6bcf\u53f0\u90e8\u7f72\u4e86NebulaGraph\u670d\u52a1\u7684\u673a\u5668\u4e0a\u90fd\u8981\u66f4\u65b0\u76f8\u5e94\u670d\u52a1\u7684\u4e8c\u8fdb\u5236\u6587\u4ef6\u3002 \u7f16\u8f91\u6240\u6709 Graph \u670d\u52a1\u7684\u914d\u7f6e\u6587\u4ef6\uff0c\u4fee\u6539\u4ee5\u4e0b\u53c2\u6570\u4ee5\u9002\u5e94\u65b0\u7248\u672c\u7684\u53d6\u503c\u8303\u56f4\u3002\u5982\u53c2\u6570\u503c\u5df2\u5728\u89c4\u5b9a\u8303\u56f4\u5185\uff0c\u5ffd\u7565\u8be5\u6b65\u9aa4\u3002 \u4e3a session_idle_timeout_secs \u53c2\u6570\u8bbe\u7f6e\u4e00\u4e2a\u5728 [1,604800] \u533a\u95f4\u7684\u503c\uff0c\u63a8\u8350\u503c\u4e3a 28800\u3002 \u4e3a client_idle_timeout_secs \u53c2\u6570\u8bbe\u7f6e\u4e00\u4e2a\u5728 [1,604800] \u533a\u95f4\u7684\u503c\uff0c\u63a8\u8350\u503c\u4e3a 28800\u3002 \u8fd9\u4e9b\u53c2\u6570\u5728 2.x \u7248\u672c\u4e2d\u7684\u9ed8\u8ba4\u503c\u4e0d\u5728\u65b0\u7248\u672c\u7684\u53d6\u503c\u8303\u56f4\u5185\uff0c\u5982\u4e0d\u4fee\u6539\u4f1a\u5347\u7ea7\u5931\u8d25\u3002\u8be6\u7ec6\u53c2\u6570\u8bf4\u660e\u53c2\u89c1 Graph \u670d\u52a1\u914d\u7f6e \u3002 \u542f\u52a8\u6240\u6709 Meta \u670d\u52a1\u3002 <nebula_install_path>/scripts/nebula-metad.service start \u542f\u52a8\u540e\uff0cMeta \u670d\u52a1\u9009\u4e3e leader\u3002\u8be5\u8fc7\u7a0b\u8017\u65f6\u6570\u79d2\u3002 \u542f\u52a8\u540e\u53ef\u4ee5\u4efb\u610f\u542f\u52a8\u4e00\u4e2a Graph \u670d\u52a1\u8282\u70b9\uff0c\u4f7f\u7528NebulaGraph\u8fde\u63a5\u8be5\u8282\u70b9\u5e76\u8fd0\u884c SHOW HOSTS meta \u548c SHOW META LEADER \uff0c\u5982\u679c\u80fd\u591f\u6b63\u5e38\u8fd4\u56de Meta \u8282\u70b9\u7684\u72b6\u6001\uff0c\u5219 Meta \u670d\u52a1\u542f\u52a8\u6210\u529f\u3002 Note \u5982\u679c\u542f\u52a8\u5f02\u5e38\uff0c\u653e\u5f03\u672c\u6b21\u5347\u7ea7\uff0c\u5e76\u5728 \u8bba\u575b \u6216 GitHub \u63d0\u95ee\u3002 \u542f\u52a8\u6240\u6709 Graph \u548c Storage \u670d\u52a1\u3002 Note \u5982\u679c\u542f\u52a8\u5f02\u5e38\uff0c\u653e\u5f03\u672c\u6b21\u5347\u7ea7\uff0c\u5e76\u5728 \u8bba\u575b \u6216 GitHub \u63d0\u95ee\u3002 \u8fde\u63a5\u65b0\u7248NebulaGraph\uff0c\u9a8c\u8bc1\u670d\u52a1\u662f\u5426\u53ef\u7528\u3001\u6570\u636e\u662f\u5426\u6b63\u5e38\u3002\u8fde\u63a5\u65b9\u6cd5\u53c2\u89c1 \u8fde\u63a5\u670d\u52a1 \u3002 \u76ee\u524d\u5c1a\u65e0\u6709\u6548\u65b9\u5f0f\u5224\u65ad\u5347\u7ea7\u662f\u5426\u5b8c\u5168\u6210\u529f\uff0c\u53ef\u7528\u4e8e\u6d4b\u8bd5\u7684\u53c2\u8003\u547d\u4ee4\u5982\u4e0b\uff1a nebula> SHOW HOSTS; nebula> SHOW HOSTS storage; nebula> SHOW SPACES; nebula> USE <space_name> nebula> SHOW PARTS; nebula> SUBMIT JOB STATS; nebula> SHOW STATS; nebula> MATCH (v) RETURN v LIMIT 5; \u4e5f\u53ef\u6839\u636e 3.6.0 \u7248\u672c\u7684\u65b0\u529f\u80fd\u6d4b\u8bd5\uff0c\u65b0\u529f\u80fd\u5217\u8868\u53c2\u89c1 \u53d1\u5e03\u8bf4\u660e \u3002","title":"\u5347\u7ea7\u6b65\u9aa4"},{"location":"4.deployment-and-installation/3.upgrade-nebula-graph/upgrade-nebula-comm/#_5","text":"\u5982\u679c\u5347\u7ea7\u5931\u8d25\uff0c\u505c\u6b62\u65b0\u7248\u672c\u7684\u6240\u6709\u670d\u52a1\uff0c\u4ece\u5907\u4efd\u4e2d\u6062\u590d\u914d\u7f6e\u6587\u4ef6\u548c\u4e8c\u8fdb\u5236\u6587\u4ef6\uff0c\u542f\u52a8\u5386\u53f2\u7248\u672c\u7684\u670d\u52a1\u3002 \u6240\u6709\u5468\u8fb9\u5ba2\u6237\u7aef\u4e5f\u5207\u6362\u4e3a\u65e7\u7248\u3002","title":"\u5347\u7ea7\u5931\u8d25\u56de\u6eda"},{"location":"4.deployment-and-installation/3.upgrade-nebula-graph/upgrade-nebula-comm/#faq","text":"","title":"FAQ"},{"location":"4.deployment-and-installation/3.upgrade-nebula-graph/upgrade-nebula-comm/#_6","text":"\u4e0d\u53ef\u4ee5\u3002\u5347\u7ea7\u8fc7\u7a0b\u4e2d\u9700\u8981\u505c\u6b62\u6240\u6709\u670d\u52a1\u3002","title":"\u5347\u7ea7\u8fc7\u7a0b\u4e2d\u662f\u5426\u53ef\u4ee5\u901a\u8fc7\u5ba2\u6237\u7aef\u5199\u5165\u6570\u636e\uff1f"},{"location":"4.deployment-and-installation/3.upgrade-nebula-graph/upgrade-nebula-comm/#space_0_not_found","text":"\u5f53\u5347\u7ea7\u8fc7\u7a0b\u4e2d\u51fa\u73b0 Space 0 not found \u544a\u8b66\u4fe1\u606f\u65f6\uff0c\u7528\u6237\u53ef\u4ee5\u5ffd\u7565\u8fd9\u4e2a\u4fe1\u606f\u3002\u5347\u7ea7\u8fc7\u7a0b\u4f1a\u4ece\u78c1\u76d8\u8bfb\u53d6\u6240\u6709 Space ID\uff0c\u800c 0 \uff08\u8def\u5f84\u4e3a <nebula_storagepath>/data/storage/nebula/0 \uff09\u5e76\u4e0d\u4f1a\u5b58\u5728\u78c1\u76d8\u4e0a\u3002Space 0 \u7528\u6765\u5b58\u50a8 Storage \u670d\u52a1\u7684\u5143\u4fe1\u606f\uff0c\u5e76\u4e0d\u5305\u542b\u7528\u6237\u6570\u636e\uff0c\u56e0\u6b64\u4e0d\u4f1a\u5f71\u54cd\u5347\u7ea7\u3002","title":"\u5347\u7ea7\u8fc7\u7a0b\u4e2d\u51fa\u73b0Space 0 not found\u3002"},{"location":"4.deployment-and-installation/3.upgrade-nebula-graph/upgrade-nebula-comm/#graph_storage","text":"\u53ea\u9700\u8981\u5347\u7ea7 Graph \u670d\u52a1\u5bf9\u5e94\u7684\u4e8c\u8fdb\u5236\u6587\u4ef6\u548c\u914d\u7f6e\u6587\u4ef6\u3002","title":"\u5982\u679c\u67d0\u53f0\u673a\u5668\u53ea\u6709 Graph \u670d\u52a1\uff0c\u6ca1\u6709 Storage \u670d\u52a1\uff0c\u5982\u4f55\u5347\u7ea7\uff1f"},{"location":"4.deployment-and-installation/3.upgrade-nebula-graph/upgrade-nebula-comm/#permission_denied","text":"\u90e8\u5206\u547d\u4ee4\u9700\u8981\u6709 sudo \u6743\u9650\u3002","title":"\u64cd\u4f5c\u62a5\u9519 Permission denied\u3002"},{"location":"4.deployment-and-installation/3.upgrade-nebula-graph/upgrade-nebula-comm/#_7","text":"\u6ca1\u6709\u3002\u5982\u679c\u53ea\u662f\u68c0\u67e5\u6570\u636e\u91cf\uff0c\u53ef\u4ee5\u5728\u5347\u7ea7\u5b8c\u6210\u540e\u518d\u6b21\u8fd0\u884c SUBMIT JOB STATS \u548c SHOW STATS \u7edf\u8ba1\u6570\u636e\u91cf\uff0c\u5e76\u4e0e\u5347\u7ea7\u4e4b\u524d\u505a\u5bf9\u6bd4\u3002","title":"\u662f\u5426\u6709\u5de5\u5177\u6216\u8005\u529e\u6cd5\u9a8c\u8bc1\u65b0\u65e7\u7248\u672c\u6570\u636e\u662f\u5426\u4e00\u81f4\uff1f"},{"location":"4.deployment-and-installation/3.upgrade-nebula-graph/upgrade-nebula-comm/#storage_offlineleader_count0","text":"\u8fd0\u884c\u4ee5\u4e0b\u547d\u4ee4\u624b\u52a8\u6dfb\u52a0 Storage \u4e3b\u673a\uff1a ADD HOSTS <ip>:<port>[, <ip>:<port> ...]; \u4f8b\u5982\uff1a ADD HOSTS 192.168.10.100:9779, 192.168.10.101:9779, 192.168.10.102:9779; \u5982\u679c\u6709\u591a\u4e2a Meta \u670d\u52a1\u8282\u70b9\uff0c\u624b\u52a8 ADD HOSTS \u4e4b\u540e\uff0c\u90e8\u5206 Storage \u8282\u70b9\u9700\u7b49\u5f85\u6570\u4e2a\u5fc3\u8df3\uff08 heartbeat_interval_secs \uff09\u7684\u65f6\u95f4\u624d\u80fd\u6b63\u5e38\u8fde\u63a5\u5230\u96c6\u7fa4\u3002 \u5982\u679c\u6dfb\u52a0 Storage \u4e3b\u673a\u540e\u95ee\u9898\u4ecd\u7136\u5b58\u5728\uff0c\u5728 \u8bba\u575b \u6216 GitHub \u63d0\u95ee\u3002","title":"Storage OFFLINE\u5e76\u4e14Leader count\u662f0\u600e\u4e48\u5904\u7406\uff1f"},{"location":"4.deployment-and-installation/3.upgrade-nebula-graph/upgrade-nebula-comm/#show_jobs_job_id_job","text":"NebulaGraph 2.5.0 \u7248\u672c\u8c03\u6574\u4e86 Job \u7684\u5b9a\u4e49\uff0c\u8be6\u60c5\u53c2\u89c1 Pull request \u3002\u5982\u679c\u662f\u4ece 2.5.0 \u4e4b\u524d\u7684\u7248\u672c\u5347\u7ea7\uff0c\u4f1a\u51fa\u73b0\u8be5\u95ee\u9898\u3002","title":"\u4e3a\u4ec0\u4e48\u5347\u7ea7\u540e\u7528SHOW JOBS\u67e5\u8be2\u5230\u7684 Job \u7684 ID \u4e0e\u5347\u7ea7\u524d\u4e00\u6837\uff0c\u4f46 Job \u540d\u79f0\u7b49\u4fe1\u606f\u4e0d\u540c\u4e86\uff1f"},{"location":"4.deployment-and-installation/3.upgrade-nebula-graph/upgrade-nebula-comm/#_8","text":"A: \u53c2\u89c1 Release Note Incompatibility \u90e8\u5206\u3002","title":"\u6709\u54ea\u4e9b\u8bed\u6cd5\u4e0d\u517c\u5bb9 ?"},{"location":"4.deployment-and-installation/6.deploy-text-based-index/1.text-based-index-restrictions/","text":"\u5168\u6587\u7d22\u5f15\u9650\u5236 \u00b6 \u672c\u6587\u4ecb\u7ecd\u5168\u6587\u7d22\u5f15\u7684\u9650\u5236\uff0c\u8bf7\u5728\u4f7f\u7528\u5168\u6587\u7d22\u5f15\u524d\u4ed4\u7ec6\u9605\u8bfb\u3002 Caution 3.6.0 \u7248\u672c\u91cd\u505a\u4e86\u5168\u6587\u7d22\u5f15\u529f\u80fd\uff0c\u4e0d\u517c\u5bb9\u4e4b\u524d\u7248\u672c\u7684\u5168\u6587\u7d22\u5f15\u3002\u5982\u679c\u4f60\u60f3\u7ee7\u7eed\u4f7f\u7528\u901a\u914d\u7b26\u3001\u6b63\u5219\u3001\u6a21\u7cca\u5339\u914d\u7b49\u65b9\u5f0f\uff0c\u6709\u5982\u4e0b 3 \u79cd\u65b9\u5f0f\uff1a \u5220\u9664\u539f\u6709\u5168\u6587\u7d22\u5f15\uff0c\u4f7f\u7528\u65b0\u7684\u65b9\u5f0f\u91cd\u5efa\u5168\u6587\u7d22\u5f15\uff0c\u4f7f\u7528\u65b0\u7684 \u67e5\u8be2\u8bed\u6cd5 \u3002 \u5220\u9664\u539f\u6709\u5168\u6587\u7d22\u5f15\uff0c\u76f4\u63a5\u7528NebulaGraph\u7684 \u539f\u751f\u7d22\u5f15 \u548c \u5b57\u7b26\u4e32\u8fd0\u7b97\u7b26 \u3002 \u7ee7\u7eed\u4f7f\u7528\u4e4b\u524d\u7248\u672c\u7684NebulaGraph\u53ca\u5176\u5168\u6587\u7d22\u5f15\u529f\u80fd\u3002 \u5168\u6587\u7d22\u5f15\u6709\u5982\u4e0b\u9650\u5236\uff1a \u5168\u6587\u7d22\u5f15\u5f53\u524d\u4ec5\u652f\u6301 LOOKUP \u8bed\u53e5\u3002 \u5168\u6587\u7d22\u5f15\u540d\u79f0\u53ea\u80fd\u5305\u542b\u6570\u5b57\u3001\u5c0f\u5199\u5b57\u6bcd\u3001\u4e0b\u5212\u7ebf\u3002 \u4e0d\u540c\u56fe\u7a7a\u95f4\u5185\u7684\u5168\u6587\u7d22\u5f15\u540d\u79f0\u4e0d\u80fd\u91cd\u590d\u3002 \u67e5\u8be2\u9ed8\u8ba4\u8fd4\u56de 10 \u6761\u6570\u636e\u3002\u53ef\u4ee5\u4f7f\u7528 LIMIT \u5b50\u53e5\u8fd4\u56de\u66f4\u591a\u6570\u636e\uff0c\u6700\u591a\u53ef\u4ee5\u8fd4\u56de 10000 \u6761\u3002\u53ef\u4ee5\u4fee\u6539 Elasticsearch \u7684\u53c2\u6570\u8c03\u6574\u6700\u5927\u8fd4\u56de\u6761\u6570\u3002 \u5982\u679c Tag/Edge type \u4e0a\u5b58\u5728\u5168\u6587\u7d22\u5f15\uff0c\u65e0\u6cd5\u5220\u9664\u6216\u4fee\u6539 Tag/Edge type\u3002 \u5c5e\u6027\u7684\u7c7b\u578b\u5fc5\u987b\u4e3a STRING \u6216 FIXED_STRING \u3002 \u5168\u6587\u7d22\u5f15\u4e0d\u652f\u6301\u591a\u4e2a Tag/Edge type \u7684\u641c\u7d22\u3002 \u5168\u6587\u7d22\u5f15\u4e0d\u652f\u6301\u641c\u7d22\u5c5e\u6027\u503c\u4e3a NULL \u7684\u5c5e\u6027\u3002 \u4e0d\u652f\u6301\u4fee\u6539 Elasticsearch \u4e2d\u7684\u7d22\u5f15\uff0c\u53ea\u80fd\u5220\u9664\u91cd\u5efa\u3002 \u4e0d\u652f\u6301\u4fee\u6539\u5206\u8bcd\u5668\uff0c\u9700\u8981\u5220\u9664\u7d22\u5f15\u6570\u636e\u540e\u91cd\u5efa\u7d22\u5f15\u65f6\u6307\u5b9a\u3002 \u786e\u4fdd\u540c\u65f6\u542f\u52a8\u4e86 Elasticsearch \u96c6\u7fa4\u548cNebulaGraph\uff0c\u5426\u5219\u53ef\u80fd\u5bfc\u81f4 Elasticsearch \u96c6\u7fa4\u5199\u5165\u7684\u6570\u636e\u4e0d\u5b8c\u6574\u3002 \u4ece\u5199\u5165NebulaGraph\uff0c\u5230\u5199\u5165 listener\uff0c\u518d\u5230\u5199\u5165 Elasticsearch \u5e76\u521b\u5efa\u7d22\u5f15\u53ef\u80fd\u9700\u8981\u4e00\u6bb5\u65f6\u95f4\u3002\u5982\u679c\u8bbf\u95ee\u5168\u6587\u7d22\u5f15\u65f6\u8fd4\u56de\u672a\u627e\u5230\u7d22\u5f15\uff0c\u53ef\u68c0\u67e5\u7d22\u5f15\u4efb\u52a1\u7684\u72b6\u6001\u3002 \u4f7f\u7528 K8s \u65b9\u5f0f\u90e8\u7f72\u7684NebulaGraph\u96c6\u7fa4\u4e0d\u652f\u6301\u81ea\u52a8\u90e8\u7f72\u5168\u6587\u7d22\u5f15\uff0c\u4f46\u652f\u6301\u624b\u52a8\u90e8\u7f72\u3002","title":"\u5168\u6587\u7d22\u5f15\u9650\u5236"},{"location":"4.deployment-and-installation/6.deploy-text-based-index/1.text-based-index-restrictions/#_1","text":"\u672c\u6587\u4ecb\u7ecd\u5168\u6587\u7d22\u5f15\u7684\u9650\u5236\uff0c\u8bf7\u5728\u4f7f\u7528\u5168\u6587\u7d22\u5f15\u524d\u4ed4\u7ec6\u9605\u8bfb\u3002 Caution 3.6.0 \u7248\u672c\u91cd\u505a\u4e86\u5168\u6587\u7d22\u5f15\u529f\u80fd\uff0c\u4e0d\u517c\u5bb9\u4e4b\u524d\u7248\u672c\u7684\u5168\u6587\u7d22\u5f15\u3002\u5982\u679c\u4f60\u60f3\u7ee7\u7eed\u4f7f\u7528\u901a\u914d\u7b26\u3001\u6b63\u5219\u3001\u6a21\u7cca\u5339\u914d\u7b49\u65b9\u5f0f\uff0c\u6709\u5982\u4e0b 3 \u79cd\u65b9\u5f0f\uff1a \u5220\u9664\u539f\u6709\u5168\u6587\u7d22\u5f15\uff0c\u4f7f\u7528\u65b0\u7684\u65b9\u5f0f\u91cd\u5efa\u5168\u6587\u7d22\u5f15\uff0c\u4f7f\u7528\u65b0\u7684 \u67e5\u8be2\u8bed\u6cd5 \u3002 \u5220\u9664\u539f\u6709\u5168\u6587\u7d22\u5f15\uff0c\u76f4\u63a5\u7528NebulaGraph\u7684 \u539f\u751f\u7d22\u5f15 \u548c \u5b57\u7b26\u4e32\u8fd0\u7b97\u7b26 \u3002 \u7ee7\u7eed\u4f7f\u7528\u4e4b\u524d\u7248\u672c\u7684NebulaGraph\u53ca\u5176\u5168\u6587\u7d22\u5f15\u529f\u80fd\u3002 \u5168\u6587\u7d22\u5f15\u6709\u5982\u4e0b\u9650\u5236\uff1a \u5168\u6587\u7d22\u5f15\u5f53\u524d\u4ec5\u652f\u6301 LOOKUP \u8bed\u53e5\u3002 \u5168\u6587\u7d22\u5f15\u540d\u79f0\u53ea\u80fd\u5305\u542b\u6570\u5b57\u3001\u5c0f\u5199\u5b57\u6bcd\u3001\u4e0b\u5212\u7ebf\u3002 \u4e0d\u540c\u56fe\u7a7a\u95f4\u5185\u7684\u5168\u6587\u7d22\u5f15\u540d\u79f0\u4e0d\u80fd\u91cd\u590d\u3002 \u67e5\u8be2\u9ed8\u8ba4\u8fd4\u56de 10 \u6761\u6570\u636e\u3002\u53ef\u4ee5\u4f7f\u7528 LIMIT \u5b50\u53e5\u8fd4\u56de\u66f4\u591a\u6570\u636e\uff0c\u6700\u591a\u53ef\u4ee5\u8fd4\u56de 10000 \u6761\u3002\u53ef\u4ee5\u4fee\u6539 Elasticsearch \u7684\u53c2\u6570\u8c03\u6574\u6700\u5927\u8fd4\u56de\u6761\u6570\u3002 \u5982\u679c Tag/Edge type \u4e0a\u5b58\u5728\u5168\u6587\u7d22\u5f15\uff0c\u65e0\u6cd5\u5220\u9664\u6216\u4fee\u6539 Tag/Edge type\u3002 \u5c5e\u6027\u7684\u7c7b\u578b\u5fc5\u987b\u4e3a STRING \u6216 FIXED_STRING \u3002 \u5168\u6587\u7d22\u5f15\u4e0d\u652f\u6301\u591a\u4e2a Tag/Edge type \u7684\u641c\u7d22\u3002 \u5168\u6587\u7d22\u5f15\u4e0d\u652f\u6301\u641c\u7d22\u5c5e\u6027\u503c\u4e3a NULL \u7684\u5c5e\u6027\u3002 \u4e0d\u652f\u6301\u4fee\u6539 Elasticsearch \u4e2d\u7684\u7d22\u5f15\uff0c\u53ea\u80fd\u5220\u9664\u91cd\u5efa\u3002 \u4e0d\u652f\u6301\u4fee\u6539\u5206\u8bcd\u5668\uff0c\u9700\u8981\u5220\u9664\u7d22\u5f15\u6570\u636e\u540e\u91cd\u5efa\u7d22\u5f15\u65f6\u6307\u5b9a\u3002 \u786e\u4fdd\u540c\u65f6\u542f\u52a8\u4e86 Elasticsearch \u96c6\u7fa4\u548cNebulaGraph\uff0c\u5426\u5219\u53ef\u80fd\u5bfc\u81f4 Elasticsearch \u96c6\u7fa4\u5199\u5165\u7684\u6570\u636e\u4e0d\u5b8c\u6574\u3002 \u4ece\u5199\u5165NebulaGraph\uff0c\u5230\u5199\u5165 listener\uff0c\u518d\u5230\u5199\u5165 Elasticsearch \u5e76\u521b\u5efa\u7d22\u5f15\u53ef\u80fd\u9700\u8981\u4e00\u6bb5\u65f6\u95f4\u3002\u5982\u679c\u8bbf\u95ee\u5168\u6587\u7d22\u5f15\u65f6\u8fd4\u56de\u672a\u627e\u5230\u7d22\u5f15\uff0c\u53ef\u68c0\u67e5\u7d22\u5f15\u4efb\u52a1\u7684\u72b6\u6001\u3002 \u4f7f\u7528 K8s \u65b9\u5f0f\u90e8\u7f72\u7684NebulaGraph\u96c6\u7fa4\u4e0d\u652f\u6301\u81ea\u52a8\u90e8\u7f72\u5168\u6587\u7d22\u5f15\uff0c\u4f46\u652f\u6301\u624b\u52a8\u90e8\u7f72\u3002","title":"\u5168\u6587\u7d22\u5f15\u9650\u5236"},{"location":"4.deployment-and-installation/6.deploy-text-based-index/2.deploy-es/","text":"\u90e8\u7f72\u5168\u6587\u7d22\u5f15 \u00b6 NebulaGraph\u7684\u5168\u6587\u7d22\u5f15\u662f\u57fa\u4e8e Elasticsearch \u5b9e\u73b0\uff0c\u8fd9\u610f\u5473\u7740\u7528\u6237\u53ef\u4ee5\u4f7f\u7528 Elasticsearch \u5168\u6587\u67e5\u8be2\u8bed\u8a00\u6765\u68c0\u7d22\u60f3\u8981\u7684\u5185\u5bb9\u3002\u5168\u6587\u7d22\u5f15\u7531\u5185\u7f6e\u7684\u8fdb\u7a0b\u7ba1\u7406\uff0c\u5f53 listener \u96c6\u7fa4\u548c Elasticsearch \u96c6\u7fa4\u90e8\u7f72\u540e\uff0c\u5185\u7f6e\u7684\u8fdb\u7a0b\u53ea\u80fd\u4e3a\u6570\u636e\u7c7b\u578b\u4e3a\u5b9a\u957f\u5b57\u7b26\u4e32\u6216\u53d8\u957f\u5b57\u7b26\u4e32\u7684\u5c5e\u6027\u521b\u5efa\u5168\u6587\u7d22\u5f15\u3002 \u6ce8\u610f\u4e8b\u9879 \u00b6 \u4f7f\u7528\u5168\u6587\u7d22\u5f15\u524d\uff0c\u8bf7\u786e\u8ba4\u5df2\u7ecf\u4e86\u89e3\u5168\u6587\u7d22\u5f15\u7684 \u4f7f\u7528\u9650\u5236 \u3002 \u90e8\u7f72 Elasticsearch \u96c6\u7fa4 \u00b6 \u90e8\u7f72 Elasticsearch \u96c6\u7fa4\u8bf7\u53c2\u89c1 Kubernetes \u5b89\u88c5 Elasticsearch \u6216 \u5355\u673a\u5b89\u88c5 Elasticsearch \u3002\u76ee\u524d\u4ec5\u652f\u6301 7.x \u7248\u672c\u7684 Elasticsearch\u3002 Note \u4e3a\u4e86\u652f\u6301\u5916\u7f51\u8bbf\u95ee Elasticsearch\uff0c\u8bf7\u5c06 config/elasticsearch.yml \u4e2d\u7684 network.host \u8bbe\u7f6e\u4e3a 0.0.0.0 \u3002 \u7528\u6237\u53ef\u4ee5\u914d\u7f6e Elasticsearch \u6765\u6ee1\u8db3\u4e1a\u52a1\u9700\u6c42\uff0c\u5982\u679c\u9700\u8981\u5b9a\u5236 Elasticsearch\uff0c\u8bf7\u53c2\u89c1 Elasticsearch \u5b98\u65b9\u6587\u6863 \u3002 \u767b\u5f55\u6587\u672c\u641c\u7d22\u5ba2\u6237\u7aef \u00b6 \u90e8\u7f72 Elasticsearch \u96c6\u7fa4\u4e4b\u540e\uff0c\u53ef\u4ee5\u4f7f\u7528 SIGN IN \u8bed\u53e5\u767b\u5f55 Elasticsearch \u5ba2\u6237\u7aef\u3002\u5fc5\u987b\u4f7f\u7528 Elasticsearch \u914d\u7f6e\u6587\u4ef6\u4e2d\u7684 IP \u5730\u5740\u548c\u7aef\u53e3\u624d\u80fd\u6b63\u5e38\u8fde\u63a5\uff0c\u540c\u65f6\u767b\u5f55\u591a\u4e2a\u5ba2\u6237\u7aef\uff0c\u8bf7\u5728\u591a\u4e2a elastic_ip:port \u4e4b\u95f4\u7528\u82f1\u6587\u9017\u53f7\uff08,\uff09\u5206\u9694\u3002 \u8bed\u6cd5 \u00b6 SIGN IN TEXT SERVICE (<elastic_ip:port>, {HTTP | HTTPS} [,\"<username>\", \"<password>\"]) [, (<elastic_ip:port>, ...)]; \u793a\u4f8b \u00b6 nebula> SIGN IN TEXT SERVICE (192.168.8.100:9200, HTTP); Note Elasticsearch \u9ed8\u8ba4\u6ca1\u6709\u7528\u6237\u540d\u548c\u5bc6\u7801\uff0c\u5982\u679c\u8bbe\u7f6e\u4e86\u7528\u6237\u540d\u548c\u5bc6\u7801\uff0c\u8bf7\u5728 SIGN IN \u8bed\u53e5\u4e2d\u6307\u5b9a\u3002 Caution Elasticsearch \u5ba2\u6237\u7aef\u53ea\u80fd\u767b\u5f55\u4e00\u6b21\uff0c\u5982\u6709\u4fee\u6539\uff0c\u9700\u8981 SIGN OUT \u540e\u91cd\u65b0 SIGN IN \uff0c\u4e14\u5ba2\u6237\u7aef\u5bf9\u5168\u5c40\u751f\u6548\uff0c\u591a\u4e2a\u56fe\u7a7a\u95f4\u5171\u4eab\u76f8\u540c\u7684 Elasticsearch \u5ba2\u6237\u7aef\u3002 \u663e\u793a\u6587\u672c\u641c\u7d22\u5ba2\u6237\u7aef \u00b6 SHOW TEXT SEARCH CLIENTS \u8bed\u53e5\u53ef\u4ee5\u5217\u51fa\u6587\u672c\u641c\u7d22\u5ba2\u6237\u7aef\u3002 \u8bed\u6cd5 \u00b6 SHOW TEXT SEARCH CLIENTS; \u793a\u4f8b \u00b6 nebula> SHOW TEXT SEARCH CLIENTS; +-----------------+-----------------+------+ | Type | Host | Port | +-----------------+-----------------+------+ | \"ELASTICSEARCH\" | \"192.168.8.100\" | 9200 | +-----------------+-----------------+------+ \u9000\u51fa\u6587\u672c\u641c\u7d22\u5ba2\u6237\u7aef \u00b6 SIGN OUT TEXT SERVICE \u8bed\u53e5\u53ef\u4ee5\u9000\u51fa\u6240\u6709\u6587\u672c\u641c\u7d22\u5ba2\u6237\u7aef\u3002 \u8bed\u6cd5 \u00b6 SIGN OUT TEXT SERVICE; \u793a\u4f8b \u00b6 nebula> SIGN OUT TEXT SERVICE;","title":"\u90e8\u7f72\u5168\u6587\u7d22\u5f15"},{"location":"4.deployment-and-installation/6.deploy-text-based-index/2.deploy-es/#_1","text":"NebulaGraph\u7684\u5168\u6587\u7d22\u5f15\u662f\u57fa\u4e8e Elasticsearch \u5b9e\u73b0\uff0c\u8fd9\u610f\u5473\u7740\u7528\u6237\u53ef\u4ee5\u4f7f\u7528 Elasticsearch \u5168\u6587\u67e5\u8be2\u8bed\u8a00\u6765\u68c0\u7d22\u60f3\u8981\u7684\u5185\u5bb9\u3002\u5168\u6587\u7d22\u5f15\u7531\u5185\u7f6e\u7684\u8fdb\u7a0b\u7ba1\u7406\uff0c\u5f53 listener \u96c6\u7fa4\u548c Elasticsearch \u96c6\u7fa4\u90e8\u7f72\u540e\uff0c\u5185\u7f6e\u7684\u8fdb\u7a0b\u53ea\u80fd\u4e3a\u6570\u636e\u7c7b\u578b\u4e3a\u5b9a\u957f\u5b57\u7b26\u4e32\u6216\u53d8\u957f\u5b57\u7b26\u4e32\u7684\u5c5e\u6027\u521b\u5efa\u5168\u6587\u7d22\u5f15\u3002","title":"\u90e8\u7f72\u5168\u6587\u7d22\u5f15"},{"location":"4.deployment-and-installation/6.deploy-text-based-index/2.deploy-es/#_2","text":"\u4f7f\u7528\u5168\u6587\u7d22\u5f15\u524d\uff0c\u8bf7\u786e\u8ba4\u5df2\u7ecf\u4e86\u89e3\u5168\u6587\u7d22\u5f15\u7684 \u4f7f\u7528\u9650\u5236 \u3002","title":"\u6ce8\u610f\u4e8b\u9879"},{"location":"4.deployment-and-installation/6.deploy-text-based-index/2.deploy-es/#elasticsearch","text":"\u90e8\u7f72 Elasticsearch \u96c6\u7fa4\u8bf7\u53c2\u89c1 Kubernetes \u5b89\u88c5 Elasticsearch \u6216 \u5355\u673a\u5b89\u88c5 Elasticsearch \u3002\u76ee\u524d\u4ec5\u652f\u6301 7.x \u7248\u672c\u7684 Elasticsearch\u3002 Note \u4e3a\u4e86\u652f\u6301\u5916\u7f51\u8bbf\u95ee Elasticsearch\uff0c\u8bf7\u5c06 config/elasticsearch.yml \u4e2d\u7684 network.host \u8bbe\u7f6e\u4e3a 0.0.0.0 \u3002 \u7528\u6237\u53ef\u4ee5\u914d\u7f6e Elasticsearch \u6765\u6ee1\u8db3\u4e1a\u52a1\u9700\u6c42\uff0c\u5982\u679c\u9700\u8981\u5b9a\u5236 Elasticsearch\uff0c\u8bf7\u53c2\u89c1 Elasticsearch \u5b98\u65b9\u6587\u6863 \u3002","title":"\u90e8\u7f72 Elasticsearch \u96c6\u7fa4"},{"location":"4.deployment-and-installation/6.deploy-text-based-index/2.deploy-es/#_3","text":"\u90e8\u7f72 Elasticsearch \u96c6\u7fa4\u4e4b\u540e\uff0c\u53ef\u4ee5\u4f7f\u7528 SIGN IN \u8bed\u53e5\u767b\u5f55 Elasticsearch \u5ba2\u6237\u7aef\u3002\u5fc5\u987b\u4f7f\u7528 Elasticsearch \u914d\u7f6e\u6587\u4ef6\u4e2d\u7684 IP \u5730\u5740\u548c\u7aef\u53e3\u624d\u80fd\u6b63\u5e38\u8fde\u63a5\uff0c\u540c\u65f6\u767b\u5f55\u591a\u4e2a\u5ba2\u6237\u7aef\uff0c\u8bf7\u5728\u591a\u4e2a elastic_ip:port \u4e4b\u95f4\u7528\u82f1\u6587\u9017\u53f7\uff08,\uff09\u5206\u9694\u3002","title":"\u767b\u5f55\u6587\u672c\u641c\u7d22\u5ba2\u6237\u7aef"},{"location":"4.deployment-and-installation/6.deploy-text-based-index/2.deploy-es/#_4","text":"SIGN IN TEXT SERVICE (<elastic_ip:port>, {HTTP | HTTPS} [,\"<username>\", \"<password>\"]) [, (<elastic_ip:port>, ...)];","title":"\u8bed\u6cd5"},{"location":"4.deployment-and-installation/6.deploy-text-based-index/2.deploy-es/#_5","text":"nebula> SIGN IN TEXT SERVICE (192.168.8.100:9200, HTTP); Note Elasticsearch \u9ed8\u8ba4\u6ca1\u6709\u7528\u6237\u540d\u548c\u5bc6\u7801\uff0c\u5982\u679c\u8bbe\u7f6e\u4e86\u7528\u6237\u540d\u548c\u5bc6\u7801\uff0c\u8bf7\u5728 SIGN IN \u8bed\u53e5\u4e2d\u6307\u5b9a\u3002 Caution Elasticsearch \u5ba2\u6237\u7aef\u53ea\u80fd\u767b\u5f55\u4e00\u6b21\uff0c\u5982\u6709\u4fee\u6539\uff0c\u9700\u8981 SIGN OUT \u540e\u91cd\u65b0 SIGN IN \uff0c\u4e14\u5ba2\u6237\u7aef\u5bf9\u5168\u5c40\u751f\u6548\uff0c\u591a\u4e2a\u56fe\u7a7a\u95f4\u5171\u4eab\u76f8\u540c\u7684 Elasticsearch \u5ba2\u6237\u7aef\u3002","title":"\u793a\u4f8b"},{"location":"4.deployment-and-installation/6.deploy-text-based-index/2.deploy-es/#_6","text":"SHOW TEXT SEARCH CLIENTS \u8bed\u53e5\u53ef\u4ee5\u5217\u51fa\u6587\u672c\u641c\u7d22\u5ba2\u6237\u7aef\u3002","title":"\u663e\u793a\u6587\u672c\u641c\u7d22\u5ba2\u6237\u7aef"},{"location":"4.deployment-and-installation/6.deploy-text-based-index/2.deploy-es/#_7","text":"SHOW TEXT SEARCH CLIENTS;","title":"\u8bed\u6cd5"},{"location":"4.deployment-and-installation/6.deploy-text-based-index/2.deploy-es/#_8","text":"nebula> SHOW TEXT SEARCH CLIENTS; +-----------------+-----------------+------+ | Type | Host | Port | +-----------------+-----------------+------+ | \"ELASTICSEARCH\" | \"192.168.8.100\" | 9200 | +-----------------+-----------------+------+","title":"\u793a\u4f8b"},{"location":"4.deployment-and-installation/6.deploy-text-based-index/2.deploy-es/#_9","text":"SIGN OUT TEXT SERVICE \u8bed\u53e5\u53ef\u4ee5\u9000\u51fa\u6240\u6709\u6587\u672c\u641c\u7d22\u5ba2\u6237\u7aef\u3002","title":"\u9000\u51fa\u6587\u672c\u641c\u7d22\u5ba2\u6237\u7aef"},{"location":"4.deployment-and-installation/6.deploy-text-based-index/2.deploy-es/#_10","text":"SIGN OUT TEXT SERVICE;","title":"\u8bed\u6cd5"},{"location":"4.deployment-and-installation/6.deploy-text-based-index/2.deploy-es/#_11","text":"nebula> SIGN OUT TEXT SERVICE;","title":"\u793a\u4f8b"},{"location":"4.deployment-and-installation/6.deploy-text-based-index/3.deploy-listener/","text":"\u90e8\u7f72 Raft listener \u00b6 \u5168\u6587\u7d22\u5f15\u7684\u6570\u636e\u662f\u5f02\u6b65\u5199\u5165 Elasticsearch \u96c6\u7fa4\u7684\u3002\u6d41\u7a0b\u662f\u901a\u8fc7 Storage \u670d\u52a1\u7684 Raft listener\uff08\u7b80\u79f0 listener\uff09\u8fd9\u4e2a\u5355\u72ec\u90e8\u7f72\u7684\u8fdb\u7a0b\uff0c\u4ece Storage \u670d\u52a1\u8bfb\u53d6\u6570\u636e\uff0c\u7136\u540e\u5c06\u5b83\u4eec\u5199\u5165 Elasticsearch \u96c6\u7fa4\u3002 \u524d\u63d0\u6761\u4ef6 \u00b6 \u5df2\u7ecf\u4e86\u89e3\u5168\u6587\u7d22\u5f15\u7684 \u4f7f\u7528\u9650\u5236 \u3002 \u5df2\u7ecf \u90e8\u7f72NebulaGraph\u96c6\u7fa4 \u3002 \u5b8c\u6210 \u90e8\u7f72 Elasticsearch \u96c6\u7fa4 \u3002 \u51c6\u5907\u4e00\u53f0\u6216\u8005\u591a\u53f0\u670d\u52a1\u5668\uff0c\u4ee5\u90e8\u7f72 Raft listener\u3002 \u6ce8\u610f\u4e8b\u9879 \u00b6 \u8bf7\u4fdd\u8bc1NebulaGraph\u5404\u670d\u52a1\uff08Metad\u3001Storaged\u3001Graphd\u3001listener\uff09\u6709\u76f8\u540c\u7684\u7248\u672c\u3002 \u8bf7\u4fdd\u8bc1 listener \u6240\u5728\u673a\u5668\u7684\u65f6\u533a\u4e0eNebulaGraph\u5404\u670d\u52a1\u6240\u5728\u673a\u5668\u7684\u65f6\u533a\u4e00\u81f4\u3002 \u53ea\u80fd\u4e3a \u4e00\u4e2a\u56fe\u7a7a\u95f4\u4e00\u6b21\u6027\u6dfb\u52a0\u6240\u6709\u7684 listener \u673a\u5668 \u3002\u5c1d\u8bd5\u5411\u5df2\u7ecf\u5b58\u5728\u6709 listener \u7684\u56fe\u7a7a\u95f4\u518d\u6dfb\u52a0\u65b0 listener \u4f1a\u5931\u8d25\u3002\u56e0\u6b64\uff0c\u9700\u5728\u4e00\u4e2a\u547d\u4ee4\u8bed\u53e5\u91cc\u5b8c\u6574\u5730\u6dfb\u52a0\u5168\u90e8\u7684 listener\u3002 \u90e8\u7f72\u6d41\u7a0b \u00b6 \u7b2c\u4e00\u6b65\uff1a\u5b89\u88c5 listener \u670d\u52a1 \u00b6 listener \u670d\u52a1\u4e0e storaged \u670d\u52a1\u4f7f\u7528\u76f8\u540c\u7684\u4e8c\u8fdb\u5236\u6587\u4ef6\uff0c\u4f46\u662f\u4e8c\u8005\u914d\u7f6e\u6587\u4ef6\u4e0d\u540c\uff0c\u8fdb\u7a0b\u4f7f\u7528\u7aef\u53e3\u4e5f\u4e0d\u540c\u3002\u6211\u4eec\u5728\u6240\u6709\u9700\u8981\u90e8\u7f72 listener \u7684\u670d\u52a1\u5668\u4e0a\u90fd\u5b89\u88c5NebulaGraph\uff0c\u4f46\u662f\u4e0d\u542f\u52a8\u670d\u52a1\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1 \u4f7f\u7528 RPM \u6216 DEB \u5b89\u88c5\u5305\u5b89\u88c5NebulaGraph \u3002 \u7b2c\u4e8c\u6b65\uff1a\u51c6\u5907 listener \u7684\u914d\u7f6e\u6587\u4ef6 \u00b6 \u5728 etc \u76ee\u5f55\u5185\u5c06 nebula-storaged-listener.conf.default \u6216 nebula-storaged-listener.conf.production \u53bb\u6389\u540e\u7f00\u547d\u540d\u4e3a nebula-storaged-listener.conf \uff0c\u7136\u540e\u4fee\u6539\u914d\u7f6e\u5185\u5bb9\u3002 \u5927\u90e8\u5206\u914d\u7f6e\u4e0e Storage \u670d\u52a1 \u7684\u914d\u7f6e\u6587\u4ef6\u76f8\u540c\uff0c\u672c\u6587\u4ec5\u4ecb\u7ecd\u5dee\u5f02\u90e8\u5206\u3002 \u540d\u79f0 \u9884\u8bbe\u503c \u8bf4\u660e daemonize true \u662f\u5426\u542f\u52a8\u5b88\u62a4\u8fdb\u7a0b\u3002 pid_file pids/nebula-storaged-listener.pid \u8bb0\u5f55\u8fdb\u7a0b ID \u7684\u6587\u4ef6\u3002 meta_server_addrs - \u5168\u90e8 Meta \u670d\u52a1\u7684 IP \u5730\u5740\u548c\u7aef\u53e3\u3002\u591a\u4e2a Meta \u670d\u52a1\u7528\u82f1\u6587\u9017\u53f7\uff08,\uff09\u5206\u9694\u3002 local_ip - listener \u670d\u52a1\u7684\u672c\u5730 IP \u5730\u5740\u3002\u8bf7\u4f7f\u7528\u771f\u5b9e\u7684 listener \u673a\u5668 IP \u5730\u5740\u66ff\u6362 127.0.0.1 \u3002 port - listener \u670d\u52a1\u7684 RPC \u5b88\u62a4\u8fdb\u7a0b\u76d1\u542c\u7aef\u53e3\u3002 heartbeat_interval_secs 10 Meta \u670d\u52a1\u7684\u5fc3\u8df3\u95f4\u9694\u3002\u5355\u4f4d\uff1a\u79d2\uff08s\uff09\u3002 listener_path data/listener listener \u7684 WAL \u76ee\u5f55\u3002\u53ea\u5141\u8bb8\u4f7f\u7528\u4e00\u4e2a\u76ee\u5f55\u3002 data_path data \u51fa\u4e8e\u517c\u5bb9\u6027\u8003\u8651\uff0c\u53ef\u4ee5\u5ffd\u7565\u6b64\u53c2\u6570\u3002\u586b\u5145\u4e00\u4e2a\u9ed8\u8ba4\u503c data \u3002 part_man_type memory \u90e8\u4ef6\u7ba1\u7406\u5668\u7c7b\u578b\uff0c\u53ef\u9009\u503c\u4e3a memory \u548c meta \u3002 rocksdb_batch_size 4096 \u6279\u5904\u7406\u64cd\u4f5c\u7684\u9ed8\u8ba4\u4fdd\u7559\u5b57\u8282\u3002 rocksdb_block_cache 4 BlockBasedTable \u7684\u9ed8\u8ba4\u5757\u7f13\u5b58\u5927\u5c0f\u3002\u5355\u4f4d\uff1a\u5146\u5b57\u8282\uff08MB\uff09\u3002 engine_type rocksdb \u5b58\u50a8\u5f15\u64ce\u7c7b\u578b\uff0c\u4f8b\u5982 rocksdb \u3001 memory \u7b49\u3002 part_type simple \u90e8\u4ef6\u7c7b\u578b\uff0c\u4f8b\u5982 simple \u3001 consensus \u7b49\u3002 \u7b2c\u4e09\u6b65\uff1a\u542f\u52a8 listener \u00b6 \u5728\u9700\u8981\u90e8\u7f72 listener \u96c6\u7fa4\u7684\u5b89\u88c5\u76ee\u5f55\u4e0b\uff0c\u6267\u884c\u5982\u4e0b\u547d\u4ee4\u542f\u52a8 listener\uff1a ./bin/nebula-storaged --flagfile etc/nebula-storaged-listener.conf \u7b2c\u56db\u6b65\uff1a\u6dfb\u52a0 listener \u5230NebulaGraph\u96c6\u7fa4 \u00b6 \u7528\u547d\u4ee4\u884c\u8fde\u63a5\u5230NebulaGraph \uff0c\u7136\u540e\u6267\u884c USE <space> \u8fdb\u5165\u9700\u8981\u521b\u5efa\u5168\u6587\u7d22\u5f15\u7684\u56fe\u7a7a\u95f4\u3002\u7136\u540e\u6267\u884c\u5982\u4e0b\u547d\u4ee4\u6dfb\u52a0 listener\uff1a ADD LISTENER ELASTICSEARCH <listener_ip:port> [,<listener_ip:port>, ...] Warning listener \u5fc5\u987b\u4f7f\u7528\u771f\u5b9e\u7684 IP \u5730\u5740\u3002 \u8bf7\u5728\u4e00\u4e2a\u8bed\u53e5\u91cc\u5b8c\u6574\u5730\u6dfb\u52a0\u6240\u6709 listener\u3002\u4f8b\u5982\uff1a nebula> ADD LISTENER ELASTICSEARCH 192.168.8.100:9789,192.168.8.101:9789; \u67e5\u770b listener \u00b6 \u6267\u884c SHOW LISTENER \u8bed\u53e5\u53ef\u4ee5\u5217\u51fa\u6240\u6709\u7684 listener\u3002 \u793a\u4f8b \u00b6 nebula> SHOW LISTENER; +--------+-----------------+------------------------+-------------+ | PartId | Type | Host | Host Status | +--------+-----------------+------------------------+-------------+ | 1 | \"ELASTICSEARCH\" | \"\"192.168.8.100\":9789\" | \"ONLINE\" | | 2 | \"ELASTICSEARCH\" | \"\"192.168.8.100\":9789\" | \"ONLINE\" | | 3 | \"ELASTICSEARCH\" | \"\"192.168.8.100\":9789\" | \"ONLINE\" | +--------+-----------------+------------------------+-------------+ \u5220\u9664 listener \u00b6 \u6267\u884c REMOVE LISTENER ELASTICSEARCH \u8bed\u53e5\u53ef\u4ee5\u5220\u9664\u56fe\u7a7a\u95f4\u7684\u6240\u6709 listener\u3002 \u793a\u4f8b \u00b6 nebula> REMOVE LISTENER ELASTICSEARCH;","title":"\u90e8\u7f72 Raft listener"},{"location":"4.deployment-and-installation/6.deploy-text-based-index/3.deploy-listener/#raft_listener","text":"\u5168\u6587\u7d22\u5f15\u7684\u6570\u636e\u662f\u5f02\u6b65\u5199\u5165 Elasticsearch \u96c6\u7fa4\u7684\u3002\u6d41\u7a0b\u662f\u901a\u8fc7 Storage \u670d\u52a1\u7684 Raft listener\uff08\u7b80\u79f0 listener\uff09\u8fd9\u4e2a\u5355\u72ec\u90e8\u7f72\u7684\u8fdb\u7a0b\uff0c\u4ece Storage \u670d\u52a1\u8bfb\u53d6\u6570\u636e\uff0c\u7136\u540e\u5c06\u5b83\u4eec\u5199\u5165 Elasticsearch \u96c6\u7fa4\u3002","title":"\u90e8\u7f72 Raft listener"},{"location":"4.deployment-and-installation/6.deploy-text-based-index/3.deploy-listener/#_1","text":"\u5df2\u7ecf\u4e86\u89e3\u5168\u6587\u7d22\u5f15\u7684 \u4f7f\u7528\u9650\u5236 \u3002 \u5df2\u7ecf \u90e8\u7f72NebulaGraph\u96c6\u7fa4 \u3002 \u5b8c\u6210 \u90e8\u7f72 Elasticsearch \u96c6\u7fa4 \u3002 \u51c6\u5907\u4e00\u53f0\u6216\u8005\u591a\u53f0\u670d\u52a1\u5668\uff0c\u4ee5\u90e8\u7f72 Raft listener\u3002","title":"\u524d\u63d0\u6761\u4ef6"},{"location":"4.deployment-and-installation/6.deploy-text-based-index/3.deploy-listener/#_2","text":"\u8bf7\u4fdd\u8bc1NebulaGraph\u5404\u670d\u52a1\uff08Metad\u3001Storaged\u3001Graphd\u3001listener\uff09\u6709\u76f8\u540c\u7684\u7248\u672c\u3002 \u8bf7\u4fdd\u8bc1 listener \u6240\u5728\u673a\u5668\u7684\u65f6\u533a\u4e0eNebulaGraph\u5404\u670d\u52a1\u6240\u5728\u673a\u5668\u7684\u65f6\u533a\u4e00\u81f4\u3002 \u53ea\u80fd\u4e3a \u4e00\u4e2a\u56fe\u7a7a\u95f4\u4e00\u6b21\u6027\u6dfb\u52a0\u6240\u6709\u7684 listener \u673a\u5668 \u3002\u5c1d\u8bd5\u5411\u5df2\u7ecf\u5b58\u5728\u6709 listener \u7684\u56fe\u7a7a\u95f4\u518d\u6dfb\u52a0\u65b0 listener \u4f1a\u5931\u8d25\u3002\u56e0\u6b64\uff0c\u9700\u5728\u4e00\u4e2a\u547d\u4ee4\u8bed\u53e5\u91cc\u5b8c\u6574\u5730\u6dfb\u52a0\u5168\u90e8\u7684 listener\u3002","title":"\u6ce8\u610f\u4e8b\u9879"},{"location":"4.deployment-and-installation/6.deploy-text-based-index/3.deploy-listener/#_3","text":"","title":"\u90e8\u7f72\u6d41\u7a0b"},{"location":"4.deployment-and-installation/6.deploy-text-based-index/3.deploy-listener/#listener","text":"listener \u670d\u52a1\u4e0e storaged \u670d\u52a1\u4f7f\u7528\u76f8\u540c\u7684\u4e8c\u8fdb\u5236\u6587\u4ef6\uff0c\u4f46\u662f\u4e8c\u8005\u914d\u7f6e\u6587\u4ef6\u4e0d\u540c\uff0c\u8fdb\u7a0b\u4f7f\u7528\u7aef\u53e3\u4e5f\u4e0d\u540c\u3002\u6211\u4eec\u5728\u6240\u6709\u9700\u8981\u90e8\u7f72 listener \u7684\u670d\u52a1\u5668\u4e0a\u90fd\u5b89\u88c5NebulaGraph\uff0c\u4f46\u662f\u4e0d\u542f\u52a8\u670d\u52a1\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1 \u4f7f\u7528 RPM \u6216 DEB \u5b89\u88c5\u5305\u5b89\u88c5NebulaGraph \u3002","title":"\u7b2c\u4e00\u6b65\uff1a\u5b89\u88c5 listener \u670d\u52a1"},{"location":"4.deployment-and-installation/6.deploy-text-based-index/3.deploy-listener/#listener_1","text":"\u5728 etc \u76ee\u5f55\u5185\u5c06 nebula-storaged-listener.conf.default \u6216 nebula-storaged-listener.conf.production \u53bb\u6389\u540e\u7f00\u547d\u540d\u4e3a nebula-storaged-listener.conf \uff0c\u7136\u540e\u4fee\u6539\u914d\u7f6e\u5185\u5bb9\u3002 \u5927\u90e8\u5206\u914d\u7f6e\u4e0e Storage \u670d\u52a1 \u7684\u914d\u7f6e\u6587\u4ef6\u76f8\u540c\uff0c\u672c\u6587\u4ec5\u4ecb\u7ecd\u5dee\u5f02\u90e8\u5206\u3002 \u540d\u79f0 \u9884\u8bbe\u503c \u8bf4\u660e daemonize true \u662f\u5426\u542f\u52a8\u5b88\u62a4\u8fdb\u7a0b\u3002 pid_file pids/nebula-storaged-listener.pid \u8bb0\u5f55\u8fdb\u7a0b ID \u7684\u6587\u4ef6\u3002 meta_server_addrs - \u5168\u90e8 Meta \u670d\u52a1\u7684 IP \u5730\u5740\u548c\u7aef\u53e3\u3002\u591a\u4e2a Meta \u670d\u52a1\u7528\u82f1\u6587\u9017\u53f7\uff08,\uff09\u5206\u9694\u3002 local_ip - listener \u670d\u52a1\u7684\u672c\u5730 IP \u5730\u5740\u3002\u8bf7\u4f7f\u7528\u771f\u5b9e\u7684 listener \u673a\u5668 IP \u5730\u5740\u66ff\u6362 127.0.0.1 \u3002 port - listener \u670d\u52a1\u7684 RPC \u5b88\u62a4\u8fdb\u7a0b\u76d1\u542c\u7aef\u53e3\u3002 heartbeat_interval_secs 10 Meta \u670d\u52a1\u7684\u5fc3\u8df3\u95f4\u9694\u3002\u5355\u4f4d\uff1a\u79d2\uff08s\uff09\u3002 listener_path data/listener listener \u7684 WAL \u76ee\u5f55\u3002\u53ea\u5141\u8bb8\u4f7f\u7528\u4e00\u4e2a\u76ee\u5f55\u3002 data_path data \u51fa\u4e8e\u517c\u5bb9\u6027\u8003\u8651\uff0c\u53ef\u4ee5\u5ffd\u7565\u6b64\u53c2\u6570\u3002\u586b\u5145\u4e00\u4e2a\u9ed8\u8ba4\u503c data \u3002 part_man_type memory \u90e8\u4ef6\u7ba1\u7406\u5668\u7c7b\u578b\uff0c\u53ef\u9009\u503c\u4e3a memory \u548c meta \u3002 rocksdb_batch_size 4096 \u6279\u5904\u7406\u64cd\u4f5c\u7684\u9ed8\u8ba4\u4fdd\u7559\u5b57\u8282\u3002 rocksdb_block_cache 4 BlockBasedTable \u7684\u9ed8\u8ba4\u5757\u7f13\u5b58\u5927\u5c0f\u3002\u5355\u4f4d\uff1a\u5146\u5b57\u8282\uff08MB\uff09\u3002 engine_type rocksdb \u5b58\u50a8\u5f15\u64ce\u7c7b\u578b\uff0c\u4f8b\u5982 rocksdb \u3001 memory \u7b49\u3002 part_type simple \u90e8\u4ef6\u7c7b\u578b\uff0c\u4f8b\u5982 simple \u3001 consensus \u7b49\u3002","title":"\u7b2c\u4e8c\u6b65\uff1a\u51c6\u5907 listener \u7684\u914d\u7f6e\u6587\u4ef6"},{"location":"4.deployment-and-installation/6.deploy-text-based-index/3.deploy-listener/#listener_2","text":"\u5728\u9700\u8981\u90e8\u7f72 listener \u96c6\u7fa4\u7684\u5b89\u88c5\u76ee\u5f55\u4e0b\uff0c\u6267\u884c\u5982\u4e0b\u547d\u4ee4\u542f\u52a8 listener\uff1a ./bin/nebula-storaged --flagfile etc/nebula-storaged-listener.conf","title":"\u7b2c\u4e09\u6b65\uff1a\u542f\u52a8 listener"},{"location":"4.deployment-and-installation/6.deploy-text-based-index/3.deploy-listener/#listener_nebulagraph","text":"\u7528\u547d\u4ee4\u884c\u8fde\u63a5\u5230NebulaGraph \uff0c\u7136\u540e\u6267\u884c USE <space> \u8fdb\u5165\u9700\u8981\u521b\u5efa\u5168\u6587\u7d22\u5f15\u7684\u56fe\u7a7a\u95f4\u3002\u7136\u540e\u6267\u884c\u5982\u4e0b\u547d\u4ee4\u6dfb\u52a0 listener\uff1a ADD LISTENER ELASTICSEARCH <listener_ip:port> [,<listener_ip:port>, ...] Warning listener \u5fc5\u987b\u4f7f\u7528\u771f\u5b9e\u7684 IP \u5730\u5740\u3002 \u8bf7\u5728\u4e00\u4e2a\u8bed\u53e5\u91cc\u5b8c\u6574\u5730\u6dfb\u52a0\u6240\u6709 listener\u3002\u4f8b\u5982\uff1a nebula> ADD LISTENER ELASTICSEARCH 192.168.8.100:9789,192.168.8.101:9789;","title":"\u7b2c\u56db\u6b65\uff1a\u6dfb\u52a0 listener \u5230NebulaGraph\u96c6\u7fa4"},{"location":"4.deployment-and-installation/6.deploy-text-based-index/3.deploy-listener/#listener_3","text":"\u6267\u884c SHOW LISTENER \u8bed\u53e5\u53ef\u4ee5\u5217\u51fa\u6240\u6709\u7684 listener\u3002","title":"\u67e5\u770b listener"},{"location":"4.deployment-and-installation/6.deploy-text-based-index/3.deploy-listener/#_4","text":"nebula> SHOW LISTENER; +--------+-----------------+------------------------+-------------+ | PartId | Type | Host | Host Status | +--------+-----------------+------------------------+-------------+ | 1 | \"ELASTICSEARCH\" | \"\"192.168.8.100\":9789\" | \"ONLINE\" | | 2 | \"ELASTICSEARCH\" | \"\"192.168.8.100\":9789\" | \"ONLINE\" | | 3 | \"ELASTICSEARCH\" | \"\"192.168.8.100\":9789\" | \"ONLINE\" | +--------+-----------------+------------------------+-------------+","title":"\u793a\u4f8b"},{"location":"4.deployment-and-installation/6.deploy-text-based-index/3.deploy-listener/#listener_4","text":"\u6267\u884c REMOVE LISTENER ELASTICSEARCH \u8bed\u53e5\u53ef\u4ee5\u5220\u9664\u56fe\u7a7a\u95f4\u7684\u6240\u6709 listener\u3002","title":"\u5220\u9664 listener"},{"location":"4.deployment-and-installation/6.deploy-text-based-index/3.deploy-listener/#_5","text":"nebula> REMOVE LISTENER ELASTICSEARCH;","title":"\u793a\u4f8b"},{"location":"5.configurations-and-logs/1.configurations/1.configurations/","text":"\u914d\u7f6e\u7ba1\u7406 \u00b6 NebulaGraph\u57fa\u4e8e gflags \u5e93\u6253\u9020\u4e86\u7cfb\u7edf\u914d\u7f6e\uff0c\u591a\u6570\u914d\u7f6e\u9879\u90fd\u662f\u5176\u4e2d\u7684 flags\u3002NebulaGraph\u670d\u52a1\u542f\u52a8\u65f6\uff0c\u9ed8\u8ba4\u4f1a\u4ece \u914d\u7f6e\u6587\u4ef6 \u4e2d\u83b7\u53d6\u914d\u7f6e\u4fe1\u606f\u3002\u5bf9\u4e8e\u6587\u4ef6\u4e2d\u6ca1\u6709\u7684\u914d\u7f6e\u9879\uff0c\u7cfb\u7edf\u4f7f\u7528\u9ed8\u8ba4\u503c\u3002 Note \u7531\u4e8e\u914d\u7f6e\u9879\u591a\u4e14\u53ef\u80fd\u968f\u7740NebulaGraph\u7684\u5f00\u53d1\u53d1\u751f\u53d8\u5316\uff0c\u6587\u6863\u4e0d\u4f1a\u4ecb\u7ecd\u6240\u6709\u914d\u7f6e\u9879\u3002\u6309\u4e0b\u6587\u8bf4\u660e\u53ef\u5728\u547d\u4ee4\u884c\u83b7\u53d6\u914d\u7f6e\u9879\u7684\u8be6\u7ec6\u8bf4\u660e\u3002 \u4e0d\u5efa\u8bae\u4fee\u6539\u6587\u6863\u672a\u4ecb\u7ecd\u7684\u914d\u7f6e\u9879\uff0c\u9664\u975e\u5df2\u7ecf\u719f\u6089\u6e90\u4ee3\u7801\u5e76\u5b8c\u5168\u4e86\u89e3\u914d\u7f6e\u9879\u7684\u4f5c\u7528\u3002 \u5386\u53f2\u7248\u672c\u517c\u5bb9\u6027 1.x \u7248\u672c\u7684\u6587\u6863\u63d0\u4f9b\u4e86\u4f7f\u7528 CONFIGS \u547d\u4ee4\u4fee\u6539\u7f13\u5b58\u4e2d\u914d\u7f6e\u7684\u65b9\u6cd5\uff0c\u4f46\u5728\u751f\u4ea7\u73af\u5883\u4e2d\u4f7f\u7528\u8be5\u65b9\u6cd5\u5bb9\u6613\u5bfc\u81f4\u96c6\u7fa4\u914d\u7f6e\u4e0e\u672c\u5730\u914d\u7f6e\u6587\u4ef6\u4e0d\u4e00\u81f4\u3002\u56e0\u6b64\uff0c\u81ea 2.x \u7248\u672c\u5f00\u59cb\u6587\u6863\u4e2d\u5c06\u4e0d\u518d\u4ecb\u7ecd CONFIGS \u547d\u4ee4\u7684\u4f7f\u7528\u65b9\u6cd5\u3002 \u67e5\u770b\u914d\u7f6e\u9879\u5217\u8868\u4e0e\u8bf4\u660e \u00b6 \u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\u83b7\u53d6\u4e8c\u8fdb\u5236\u6587\u4ef6\u5bf9\u5e94\u670d\u52a1\u7684\u6240\u6709\u914d\u7f6e\u9879\u4fe1\u606f\uff1a <binary> --help \u4f8b\u5982\uff1a # \u83b7\u53d6 Meta \u914d\u7f6e\u9879\u7684\u5e2e\u52a9\u4fe1\u606f $ /usr/local/nebula/bin/nebula-metad --help # \u83b7\u53d6 Graph \u914d\u7f6e\u9879\u7684\u5e2e\u52a9\u4fe1\u606f $ /usr/local/nebula/bin/nebula-graphd --help # \u83b7\u53d6 Storage \u914d\u7f6e\u9879\u7684\u5e2e\u52a9\u4fe1\u606f $ /usr/local/nebula/bin/nebula-storaged --help \u4ee5\u4e0a\u793a\u4f8b\u4f7f\u7528\u4e86\u4e8c\u8fdb\u5236\u6587\u4ef6\u7684\u9ed8\u8ba4\u5b58\u50a8\u8def\u5f84 /usr/local/nebula/bin/ \u3002\u5982\u679c\u4fee\u6539\u4e86NebulaGraph\u5b89\u88c5\u8def\u5f84\uff0c\u4f7f\u7528\u5b9e\u9645\u8def\u5f84\u67e5\u8be2\u914d\u7f6e\u9879\u4fe1\u606f\u3002 \u67e5\u770b\u8fd0\u884c\u914d\u7f6e \u00b6 \u4f7f\u7528 curl \u547d\u4ee4\u83b7\u53d6\u8fd0\u884c\u4e2d\u7684\u914d\u7f6e\u9879\u7684\u503c\uff0c\u5373NebulaGraph\u7684\u8fd0\u884c\u914d\u7f6e\u3002 \u4f8b\u5982\uff1a # \u83b7\u53d6 Meta \u670d\u52a1\u7684\u8fd0\u884c\u914d\u7f6e curl 127 .0.0.1:19559/flags # \u83b7\u53d6 Graph \u670d\u52a1\u7684\u8fd0\u884c\u914d\u7f6e curl 127 .0.0.1:19669/flags # \u83b7\u53d6 Storage \u670d\u52a1\u7684\u8fd0\u884c\u914d\u7f6e curl 127 .0.0.1:19779/flags \u4f7f\u7528 -s \u6216\u8005 --silent \u53c2\u6570\u53ef\u4ee5\u9690\u85cf\u8fdb\u5ea6\u6761\u548c\u9519\u8bef\u4fe1\u606f\u3002\u4f8b\u5982\uff1a curl -s 127 .0.0.1:19559/flags Note \u5b9e\u9645\u73af\u5883\u4e2d\u9700\u4f7f\u7528\u771f\u5b9e\u7684\u4e3b\u673a IP \u5730\u5740\u53d6\u4ee3\u4ee5\u4e0a\u793a\u4f8b\u4e2d\u7684 127.0.0.1 \u3002 \u914d\u7f6e\u6587\u4ef6\u7b80\u4ecb \u00b6 \u6e90\u7801\u3001RPM/DEB\u3001TAR \u5305\u96c6\u7fa4\u7684\u914d\u7f6e\u6587\u4ef6 \u00b6 NebulaGraph\u4e3a\u6bcf\u4e2a\u670d\u52a1\u90fd\u63d0\u4f9b\u4e86\u4e24\u4efd\u521d\u59cb\u914d\u7f6e\u6587\u4ef6 <service_name>.conf.default \u548c <service_name>.conf.production \uff0c\u65b9\u4fbf\u7528\u6237\u5728\u4e0d\u540c\u573a\u666f\u4e2d\u4f7f\u7528\u3002\u4f7f\u7528\u6e90\u7801\u548c RPM/DEB \u5b89\u88c5\u96c6\u7fa4\u7684\u914d\u7f6e\u6587\u4ef6\u7684\u9ed8\u8ba4\u8def\u5f84\u4e3a /usr/local/nebula/etc/ \uff1b\u4f7f\u7528 TAR \u5305\u5b89\u88c5\u96c6\u7fa4\u7684\u914d\u7f6e\u6587\u4ef6\u8def\u5f84\u4e3a <install_path>/<tar_package_directory>/etc TAR \u5305\u7684\u5b89\u88c5\u8def\u5f84\u3002 \u521d\u59cb\u914d\u7f6e\u6587\u4ef6\u4e2d\u7684\u914d\u7f6e\u503c\u4ec5\u4f9b\u53c2\u8003\uff0c\u4f7f\u7528\u65f6\u53ef\u6839\u636e\u5b9e\u9645\u9700\u6c42\u8c03\u6574\u3002\u5982\u9700\u4f7f\u7528\u521d\u59cb\u914d\u7f6e\u6587\u4ef6\uff0c\u4ece\u4e0a\u8ff0\u4e24\u4e2a\u6587\u4ef6\u9009\u62e9\u5176\u4e00\uff0c\u5220\u9664\u540e\u7f00 .default \u6216 .production \u4f7f\u5176\u751f\u6548\u3002 Note \u4e3a\u786e\u4fdd\u670d\u52a1\u7684\u53ef\u7528\u6027\uff0c\u540c\u7c7b\u670d\u52a1\u7684\u914d\u7f6e\u5efa\u8bae\u4fdd\u6301\u4e00\u81f4\uff0c\u672c\u673a IP \u5730\u5740 local_ip \u9664\u5916\u3002\u4f8b\u5982\uff0c\u4e00\u4e2aNebulaGraph\u96c6\u7fa4\u4e2d\u90e8\u7f72\u4e86 3 \u4e2a Storage \u670d\u52a1\u5668\uff0c3 \u8005\u9664 IP \u5730\u5740\u5916\u7684\u5176\u5b83\u914d\u7f6e\u5efa\u8bae\u90fd\u76f8\u540c\u3002 \u4e0b\u8868\u5217\u51fa\u4e86\u5404\u670d\u52a1\u5bf9\u5e94\u7684\u521d\u59cb\u914d\u7f6e\u6587\u4ef6\u3002 NebulaGraph\u670d\u52a1 \u521d\u59cb\u914d\u7f6e\u6587\u4ef6 \u914d\u7f6e\u8bf4\u660e Meta nebula-metad.conf.default \u548c nebula-metad.conf.production Meta \u670d\u52a1\u914d\u7f6e Graph nebula-graphd.conf.default \u548c nebula-graphd.conf.production Graph \u670d\u52a1\u914d\u7f6e Storage nebula-storaged.conf.default \u548c nebula-storaged.conf.production Storage \u670d\u52a1\u914d\u7f6e \u6240\u6709\u670d\u52a1\u7684\u521d\u59cb\u914d\u7f6e\u6587\u4ef6\u4e2d\u90fd\u5305\u542b local_config \u53c2\u6570\uff0c\u9884\u8bbe\u503c\u4e3a true \uff0c\u8868\u793aNebulaGraph\u670d\u52a1\u4f1a\u4ece\u5176\u914d\u7f6e\u6587\u4ef6\u83b7\u53d6\u914d\u7f6e\u5e76\u542f\u52a8\u3002 Caution \u4e0d\u5efa\u8bae\u4fee\u6539 local_config \u7684\u503c\u4e3a false \u3002\u4fee\u6539\u540eNebulaGraph\u670d\u52a1\u542f\u52a8\u540e\u4f1a\u5148\u5c1d\u8bd5\u4ece Meta \u670d\u52a1\u83b7\u53d6\u7f13\u5b58\u7684\u914d\u7f6e\u4fe1\u606f\uff0c\u53ef\u80fd\u5bfc\u81f4\u96c6\u7fa4\u914d\u7f6e\u4e0d\u4e00\u81f4\uff0c\u9020\u6210\u672a\u77e5\u98ce\u9669\u3002 Docker Compose \u96c6\u7fa4\u7684\u914d\u7f6e\u6587\u4ef6 \u00b6 \u5bf9\u4e8e\u4f7f\u7528 Docker Compose \u521b\u5efa\u7684\u96c6\u7fa4\uff0c\u96c6\u7fa4\u7684\u914d\u7f6e\u6587\u4ef6\u7684\u9ed8\u8ba4\u8def\u5f84\u4e3a <install_path>/nebula-docker-compose/docker-compose.yaml \u3002\u914d\u7f6e\u6587\u4ef6\u4e2d\u7684 command \u4e0b\u9762\u7684\u53c2\u6570\u4e3a\u5404\u670d\u52a1\u7684\u542f\u52a8\u53c2\u6570\u3002 NebulaGraph Operator \u96c6\u7fa4\u7684\u914d\u7f6e\u6587\u4ef6 \u00b6 \u5bf9\u4e8e\u901a\u8fc7 NebulaGraph Operator \u4f7f\u7528 Kubectl \u65b9\u5f0f\u521b\u5efa\u7684\u96c6\u7fa4\uff0c\u96c6\u7fa4\u7684\u914d\u7f6e\u6587\u4ef6\u7684\u8def\u5f84\u4e3a\u7528\u6237\u521b\u5efa\u96c6\u7fa4 YAML \u6587\u4ef6\u7684\u8def\u5f84\u3002\u7528\u6237\u53ef\u901a\u8fc7\u914d\u7f6e\u6587\u4ef6\u4e2d\u7684 spec.{graphd|storaged|metad}.config \u53c2\u6570\u4fee\u6539\u96c6\u7fa4\u5404\u4e2a\u670d\u52a1\u7684\u76f8\u5173\u914d\u7f6e\u3002 Note \u901a\u8fc7 Helm \u90e8\u7f72\u7684\u96c6\u7fa4\uff0c\u6682\u4e0d\u652f\u6301\u4fee\u6539\u96c6\u7fa4\u670d\u52a1\u7684\u76f8\u5173\u914d\u7f6e\u3002 \u5173\u4e8eNebulaGraph\u7684\u914d\u7f6e\u76f8\u5173\u7684\u66f4\u591a\u4fe1\u606f\uff0c\u53c2\u89c1 NebulaGraph Config \u3002 \u4fee\u6539\u914d\u7f6e \u00b6 \u7528\u6237\u53ef\u4ee5\u5728\u914d\u7f6e\u6587\u4ef6\u4e2d\u4fee\u6539NebulaGraph\u7684\u914d\u7f6e\uff0c\u6216\u4f7f\u7528\u547d\u4ee4\u52a8\u6001\u4fee\u6539\u914d\u7f6e\u3002 Caution \u540c\u65f6\u4f7f\u7528\u4e24\u79cd\u65b9\u5f0f\u4fee\u6539\u914d\u7f6e\u4f1a\u5bfc\u81f4\u914d\u7f6e\u4fe1\u606f\u5931\u53bb\u7edf\u4e00\u7684\u7ba1\u7406\u65b9\u5f0f\uff0c\u53ef\u80fd\u9020\u6210\u914d\u7f6e\u6df7\u4e71\u3002\u5efa\u8bae\u4ec5\u4f7f\u7528\u914d\u7f6e\u6587\u4ef6\u7ba1\u7406\u914d\u7f6e\uff0c\u6216\u5728\u901a\u8fc7\u547d\u4ee4\u52a8\u6001\u66f4\u65b0\u914d\u7f6e\u540e\u5bf9\u914d\u7f6e\u6587\u4ef6\u505a\u76f8\u540c\u7684\u4fee\u6539\uff0c\u4ee5\u4fdd\u8bc1\u4e00\u81f4\u6027\u3002 \u5728\u914d\u7f6e\u6587\u4ef6\u4e2d\u4fee\u6539\u914d\u7f6e \u00b6 \u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u6240\u6709NebulaGraph\u670d\u52a1\u4ece\u914d\u7f6e\u6587\u4ef6\u83b7\u53d6\u914d\u7f6e\u3002\u7528\u6237\u53ef\u4ee5\u6309\u7167\u4ee5\u4e0b\u6b65\u9aa4\u4fee\u6539\u914d\u7f6e\u5e76\u4f7f\u5176\u751f\u6548\u3002 \u9488\u5bf9\u4f7f\u7528\u6e90\u7801\u3001RPM/DEB\u3001TAR \u5305\u5b89\u88c5\u7684\u96c6\u7fa4\uff1a \u4f7f\u7528\u6587\u672c\u7f16\u8f91\u5668\u4fee\u6539\u76ee\u6807\u670d\u52a1\u7684\u914d\u7f6e\u6587\u4ef6\u5e76\u4fdd\u5b58\u3002 \u9009\u62e9\u5408\u9002\u7684\u65f6\u95f4\u91cd\u542f \u6240\u6709 NebulaGraph\u670d\u52a1\u4f7f\u4fee\u6539\u751f\u6548\u3002 \u9488\u5bf9\u4f7f\u7528 Docker Compose \u5b89\u88c5\u7684\u96c6\u7fa4\uff1a \u5728\u6587\u4ef6 <install_path>/nebula-docker-compose/docker-compose.yaml \u4e2d\uff0c\u4fee\u6539\u670d\u52a1\u914d\u7f6e\u3002 \u5728\u76ee\u5f55 nebula-docker-compose \u5185\u6267\u884c\u547d\u4ee4 docker-compose up -d \u91cd\u542f\u6d89\u53ca\u914d\u7f6e\u53d8\u5316\u7684\u670d\u52a1\u3002 \u9488\u5bf9\u4f7f\u7528 Kubectl \u65b9\u5f0f\u521b\u5efa\u7684\u96c6\u7fa4\uff1a \u5177\u4f53\u64cd\u4f5c\uff0c\u53c2\u89c1 \u81ea\u5b9a\u4e49\u96c6\u7fa4\u7684\u914d\u7f6e\u53c2\u6570 \u3002 \u4f7f\u7528\u547d\u4ee4\u52a8\u6001\u4fee\u6539\u914d\u7f6e \u00b6 \u7528\u6237\u53ef\u4ee5\u901a\u8fc7 curl \u547d\u4ee4\u52a8\u6001\u4fee\u6539NebulaGraph\u670d\u52a1\u7684\u914d\u7f6e\u3002\u4f8b\u5982\uff0c\u4fee\u6539 Storage \u670d\u52a1\u7684 wal_ttl \u53c2\u6570\u4e3a 600 \uff0c\u547d\u4ee4\u5982\u4e0b\uff1a curl -X PUT -H \"Content-Type: application/json\" -d '{\"wal_ttl\":\"600\"}' -s \"http://192.168.15.6:19779/flags\" \u5176\u4e2d\uff0c {\"wal_ttl\":\"600\"} \u4e3a\u5f85\u4fee\u6539\u7684\u914d\u7f6e\u53c2\u6570\u53ca\u5176\u503c\uff1b 192.168.15.6:19779 \u4e3a Storage \u670d\u52a1\u7684 IP \u5730\u5740\u548c HTTP \u7aef\u53e3\u53f7\u3002 Caution \u52a8\u6001\u4fee\u6539\u914d\u7f6e\u529f\u80fd\u4ec5\u9002\u7528\u4e8e\u539f\u578b\u9a8c\u8bc1\u548c\u6d4b\u8bd5\u73af\u5883\uff0c\u4e0d\u5efa\u8bae\u5728\u751f\u4ea7\u73af\u5883\u4e2d\u4f7f\u7528\u3002\u56e0\u4e3a\u5f53 local_config \u503c\u8bbe\u7f6e\u4e3a true \u65f6\uff0c\u52a8\u6001\u4fee\u6539\u7684\u914d\u7f6e\u4e0d\u4f1a\u6301\u4e45\u5316\uff0c\u91cd\u542f\u670d\u52a1\u540e\u914d\u7f6e\u4f1a\u6062\u590d\u4e3a\u521d\u59cb\u914d\u7f6e\u3002 \u4ec5\u652f\u6301\u52a8\u6001\u4fee\u6539 \u90e8\u5206 \u914d\u7f6e\u53c2\u6570\uff0c\u5177\u4f53\u652f\u6301\u7684\u53c2\u6570\u5217\u8868\uff0c\u53c2\u89c1\u5404\u670d\u52a1\u914d\u7f6e\u4e2d \u662f\u5426\u652f\u6301\u8fd0\u884c\u65f6\u52a8\u6001\u4fee\u6539 \u7684\u63cf\u8ff0\u3002","title":"\u914d\u7f6e\u7ba1\u7406"},{"location":"5.configurations-and-logs/1.configurations/1.configurations/#_1","text":"NebulaGraph\u57fa\u4e8e gflags \u5e93\u6253\u9020\u4e86\u7cfb\u7edf\u914d\u7f6e\uff0c\u591a\u6570\u914d\u7f6e\u9879\u90fd\u662f\u5176\u4e2d\u7684 flags\u3002NebulaGraph\u670d\u52a1\u542f\u52a8\u65f6\uff0c\u9ed8\u8ba4\u4f1a\u4ece \u914d\u7f6e\u6587\u4ef6 \u4e2d\u83b7\u53d6\u914d\u7f6e\u4fe1\u606f\u3002\u5bf9\u4e8e\u6587\u4ef6\u4e2d\u6ca1\u6709\u7684\u914d\u7f6e\u9879\uff0c\u7cfb\u7edf\u4f7f\u7528\u9ed8\u8ba4\u503c\u3002 Note \u7531\u4e8e\u914d\u7f6e\u9879\u591a\u4e14\u53ef\u80fd\u968f\u7740NebulaGraph\u7684\u5f00\u53d1\u53d1\u751f\u53d8\u5316\uff0c\u6587\u6863\u4e0d\u4f1a\u4ecb\u7ecd\u6240\u6709\u914d\u7f6e\u9879\u3002\u6309\u4e0b\u6587\u8bf4\u660e\u53ef\u5728\u547d\u4ee4\u884c\u83b7\u53d6\u914d\u7f6e\u9879\u7684\u8be6\u7ec6\u8bf4\u660e\u3002 \u4e0d\u5efa\u8bae\u4fee\u6539\u6587\u6863\u672a\u4ecb\u7ecd\u7684\u914d\u7f6e\u9879\uff0c\u9664\u975e\u5df2\u7ecf\u719f\u6089\u6e90\u4ee3\u7801\u5e76\u5b8c\u5168\u4e86\u89e3\u914d\u7f6e\u9879\u7684\u4f5c\u7528\u3002 \u5386\u53f2\u7248\u672c\u517c\u5bb9\u6027 1.x \u7248\u672c\u7684\u6587\u6863\u63d0\u4f9b\u4e86\u4f7f\u7528 CONFIGS \u547d\u4ee4\u4fee\u6539\u7f13\u5b58\u4e2d\u914d\u7f6e\u7684\u65b9\u6cd5\uff0c\u4f46\u5728\u751f\u4ea7\u73af\u5883\u4e2d\u4f7f\u7528\u8be5\u65b9\u6cd5\u5bb9\u6613\u5bfc\u81f4\u96c6\u7fa4\u914d\u7f6e\u4e0e\u672c\u5730\u914d\u7f6e\u6587\u4ef6\u4e0d\u4e00\u81f4\u3002\u56e0\u6b64\uff0c\u81ea 2.x \u7248\u672c\u5f00\u59cb\u6587\u6863\u4e2d\u5c06\u4e0d\u518d\u4ecb\u7ecd CONFIGS \u547d\u4ee4\u7684\u4f7f\u7528\u65b9\u6cd5\u3002","title":"\u914d\u7f6e\u7ba1\u7406"},{"location":"5.configurations-and-logs/1.configurations/1.configurations/#_2","text":"\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\u83b7\u53d6\u4e8c\u8fdb\u5236\u6587\u4ef6\u5bf9\u5e94\u670d\u52a1\u7684\u6240\u6709\u914d\u7f6e\u9879\u4fe1\u606f\uff1a <binary> --help \u4f8b\u5982\uff1a # \u83b7\u53d6 Meta \u914d\u7f6e\u9879\u7684\u5e2e\u52a9\u4fe1\u606f $ /usr/local/nebula/bin/nebula-metad --help # \u83b7\u53d6 Graph \u914d\u7f6e\u9879\u7684\u5e2e\u52a9\u4fe1\u606f $ /usr/local/nebula/bin/nebula-graphd --help # \u83b7\u53d6 Storage \u914d\u7f6e\u9879\u7684\u5e2e\u52a9\u4fe1\u606f $ /usr/local/nebula/bin/nebula-storaged --help \u4ee5\u4e0a\u793a\u4f8b\u4f7f\u7528\u4e86\u4e8c\u8fdb\u5236\u6587\u4ef6\u7684\u9ed8\u8ba4\u5b58\u50a8\u8def\u5f84 /usr/local/nebula/bin/ \u3002\u5982\u679c\u4fee\u6539\u4e86NebulaGraph\u5b89\u88c5\u8def\u5f84\uff0c\u4f7f\u7528\u5b9e\u9645\u8def\u5f84\u67e5\u8be2\u914d\u7f6e\u9879\u4fe1\u606f\u3002","title":"\u67e5\u770b\u914d\u7f6e\u9879\u5217\u8868\u4e0e\u8bf4\u660e"},{"location":"5.configurations-and-logs/1.configurations/1.configurations/#_3","text":"\u4f7f\u7528 curl \u547d\u4ee4\u83b7\u53d6\u8fd0\u884c\u4e2d\u7684\u914d\u7f6e\u9879\u7684\u503c\uff0c\u5373NebulaGraph\u7684\u8fd0\u884c\u914d\u7f6e\u3002 \u4f8b\u5982\uff1a # \u83b7\u53d6 Meta \u670d\u52a1\u7684\u8fd0\u884c\u914d\u7f6e curl 127 .0.0.1:19559/flags # \u83b7\u53d6 Graph \u670d\u52a1\u7684\u8fd0\u884c\u914d\u7f6e curl 127 .0.0.1:19669/flags # \u83b7\u53d6 Storage \u670d\u52a1\u7684\u8fd0\u884c\u914d\u7f6e curl 127 .0.0.1:19779/flags \u4f7f\u7528 -s \u6216\u8005 --silent \u53c2\u6570\u53ef\u4ee5\u9690\u85cf\u8fdb\u5ea6\u6761\u548c\u9519\u8bef\u4fe1\u606f\u3002\u4f8b\u5982\uff1a curl -s 127 .0.0.1:19559/flags Note \u5b9e\u9645\u73af\u5883\u4e2d\u9700\u4f7f\u7528\u771f\u5b9e\u7684\u4e3b\u673a IP \u5730\u5740\u53d6\u4ee3\u4ee5\u4e0a\u793a\u4f8b\u4e2d\u7684 127.0.0.1 \u3002","title":"\u67e5\u770b\u8fd0\u884c\u914d\u7f6e"},{"location":"5.configurations-and-logs/1.configurations/1.configurations/#_4","text":"","title":"\u914d\u7f6e\u6587\u4ef6\u7b80\u4ecb"},{"location":"5.configurations-and-logs/1.configurations/1.configurations/#rpmdebtar","text":"NebulaGraph\u4e3a\u6bcf\u4e2a\u670d\u52a1\u90fd\u63d0\u4f9b\u4e86\u4e24\u4efd\u521d\u59cb\u914d\u7f6e\u6587\u4ef6 <service_name>.conf.default \u548c <service_name>.conf.production \uff0c\u65b9\u4fbf\u7528\u6237\u5728\u4e0d\u540c\u573a\u666f\u4e2d\u4f7f\u7528\u3002\u4f7f\u7528\u6e90\u7801\u548c RPM/DEB \u5b89\u88c5\u96c6\u7fa4\u7684\u914d\u7f6e\u6587\u4ef6\u7684\u9ed8\u8ba4\u8def\u5f84\u4e3a /usr/local/nebula/etc/ \uff1b\u4f7f\u7528 TAR \u5305\u5b89\u88c5\u96c6\u7fa4\u7684\u914d\u7f6e\u6587\u4ef6\u8def\u5f84\u4e3a <install_path>/<tar_package_directory>/etc TAR \u5305\u7684\u5b89\u88c5\u8def\u5f84\u3002 \u521d\u59cb\u914d\u7f6e\u6587\u4ef6\u4e2d\u7684\u914d\u7f6e\u503c\u4ec5\u4f9b\u53c2\u8003\uff0c\u4f7f\u7528\u65f6\u53ef\u6839\u636e\u5b9e\u9645\u9700\u6c42\u8c03\u6574\u3002\u5982\u9700\u4f7f\u7528\u521d\u59cb\u914d\u7f6e\u6587\u4ef6\uff0c\u4ece\u4e0a\u8ff0\u4e24\u4e2a\u6587\u4ef6\u9009\u62e9\u5176\u4e00\uff0c\u5220\u9664\u540e\u7f00 .default \u6216 .production \u4f7f\u5176\u751f\u6548\u3002 Note \u4e3a\u786e\u4fdd\u670d\u52a1\u7684\u53ef\u7528\u6027\uff0c\u540c\u7c7b\u670d\u52a1\u7684\u914d\u7f6e\u5efa\u8bae\u4fdd\u6301\u4e00\u81f4\uff0c\u672c\u673a IP \u5730\u5740 local_ip \u9664\u5916\u3002\u4f8b\u5982\uff0c\u4e00\u4e2aNebulaGraph\u96c6\u7fa4\u4e2d\u90e8\u7f72\u4e86 3 \u4e2a Storage \u670d\u52a1\u5668\uff0c3 \u8005\u9664 IP \u5730\u5740\u5916\u7684\u5176\u5b83\u914d\u7f6e\u5efa\u8bae\u90fd\u76f8\u540c\u3002 \u4e0b\u8868\u5217\u51fa\u4e86\u5404\u670d\u52a1\u5bf9\u5e94\u7684\u521d\u59cb\u914d\u7f6e\u6587\u4ef6\u3002 NebulaGraph\u670d\u52a1 \u521d\u59cb\u914d\u7f6e\u6587\u4ef6 \u914d\u7f6e\u8bf4\u660e Meta nebula-metad.conf.default \u548c nebula-metad.conf.production Meta \u670d\u52a1\u914d\u7f6e Graph nebula-graphd.conf.default \u548c nebula-graphd.conf.production Graph \u670d\u52a1\u914d\u7f6e Storage nebula-storaged.conf.default \u548c nebula-storaged.conf.production Storage \u670d\u52a1\u914d\u7f6e \u6240\u6709\u670d\u52a1\u7684\u521d\u59cb\u914d\u7f6e\u6587\u4ef6\u4e2d\u90fd\u5305\u542b local_config \u53c2\u6570\uff0c\u9884\u8bbe\u503c\u4e3a true \uff0c\u8868\u793aNebulaGraph\u670d\u52a1\u4f1a\u4ece\u5176\u914d\u7f6e\u6587\u4ef6\u83b7\u53d6\u914d\u7f6e\u5e76\u542f\u52a8\u3002 Caution \u4e0d\u5efa\u8bae\u4fee\u6539 local_config \u7684\u503c\u4e3a false \u3002\u4fee\u6539\u540eNebulaGraph\u670d\u52a1\u542f\u52a8\u540e\u4f1a\u5148\u5c1d\u8bd5\u4ece Meta \u670d\u52a1\u83b7\u53d6\u7f13\u5b58\u7684\u914d\u7f6e\u4fe1\u606f\uff0c\u53ef\u80fd\u5bfc\u81f4\u96c6\u7fa4\u914d\u7f6e\u4e0d\u4e00\u81f4\uff0c\u9020\u6210\u672a\u77e5\u98ce\u9669\u3002","title":"\u6e90\u7801\u3001RPM/DEB\u3001TAR \u5305\u96c6\u7fa4\u7684\u914d\u7f6e\u6587\u4ef6"},{"location":"5.configurations-and-logs/1.configurations/1.configurations/#docker_compose","text":"\u5bf9\u4e8e\u4f7f\u7528 Docker Compose \u521b\u5efa\u7684\u96c6\u7fa4\uff0c\u96c6\u7fa4\u7684\u914d\u7f6e\u6587\u4ef6\u7684\u9ed8\u8ba4\u8def\u5f84\u4e3a <install_path>/nebula-docker-compose/docker-compose.yaml \u3002\u914d\u7f6e\u6587\u4ef6\u4e2d\u7684 command \u4e0b\u9762\u7684\u53c2\u6570\u4e3a\u5404\u670d\u52a1\u7684\u542f\u52a8\u53c2\u6570\u3002","title":"Docker Compose \u96c6\u7fa4\u7684\u914d\u7f6e\u6587\u4ef6"},{"location":"5.configurations-and-logs/1.configurations/1.configurations/#nebulagraph_operator","text":"\u5bf9\u4e8e\u901a\u8fc7 NebulaGraph Operator \u4f7f\u7528 Kubectl \u65b9\u5f0f\u521b\u5efa\u7684\u96c6\u7fa4\uff0c\u96c6\u7fa4\u7684\u914d\u7f6e\u6587\u4ef6\u7684\u8def\u5f84\u4e3a\u7528\u6237\u521b\u5efa\u96c6\u7fa4 YAML \u6587\u4ef6\u7684\u8def\u5f84\u3002\u7528\u6237\u53ef\u901a\u8fc7\u914d\u7f6e\u6587\u4ef6\u4e2d\u7684 spec.{graphd|storaged|metad}.config \u53c2\u6570\u4fee\u6539\u96c6\u7fa4\u5404\u4e2a\u670d\u52a1\u7684\u76f8\u5173\u914d\u7f6e\u3002 Note \u901a\u8fc7 Helm \u90e8\u7f72\u7684\u96c6\u7fa4\uff0c\u6682\u4e0d\u652f\u6301\u4fee\u6539\u96c6\u7fa4\u670d\u52a1\u7684\u76f8\u5173\u914d\u7f6e\u3002 \u5173\u4e8eNebulaGraph\u7684\u914d\u7f6e\u76f8\u5173\u7684\u66f4\u591a\u4fe1\u606f\uff0c\u53c2\u89c1 NebulaGraph Config \u3002","title":"NebulaGraph Operator \u96c6\u7fa4\u7684\u914d\u7f6e\u6587\u4ef6"},{"location":"5.configurations-and-logs/1.configurations/1.configurations/#_5","text":"\u7528\u6237\u53ef\u4ee5\u5728\u914d\u7f6e\u6587\u4ef6\u4e2d\u4fee\u6539NebulaGraph\u7684\u914d\u7f6e\uff0c\u6216\u4f7f\u7528\u547d\u4ee4\u52a8\u6001\u4fee\u6539\u914d\u7f6e\u3002 Caution \u540c\u65f6\u4f7f\u7528\u4e24\u79cd\u65b9\u5f0f\u4fee\u6539\u914d\u7f6e\u4f1a\u5bfc\u81f4\u914d\u7f6e\u4fe1\u606f\u5931\u53bb\u7edf\u4e00\u7684\u7ba1\u7406\u65b9\u5f0f\uff0c\u53ef\u80fd\u9020\u6210\u914d\u7f6e\u6df7\u4e71\u3002\u5efa\u8bae\u4ec5\u4f7f\u7528\u914d\u7f6e\u6587\u4ef6\u7ba1\u7406\u914d\u7f6e\uff0c\u6216\u5728\u901a\u8fc7\u547d\u4ee4\u52a8\u6001\u66f4\u65b0\u914d\u7f6e\u540e\u5bf9\u914d\u7f6e\u6587\u4ef6\u505a\u76f8\u540c\u7684\u4fee\u6539\uff0c\u4ee5\u4fdd\u8bc1\u4e00\u81f4\u6027\u3002","title":"\u4fee\u6539\u914d\u7f6e"},{"location":"5.configurations-and-logs/1.configurations/1.configurations/#_6","text":"\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u6240\u6709NebulaGraph\u670d\u52a1\u4ece\u914d\u7f6e\u6587\u4ef6\u83b7\u53d6\u914d\u7f6e\u3002\u7528\u6237\u53ef\u4ee5\u6309\u7167\u4ee5\u4e0b\u6b65\u9aa4\u4fee\u6539\u914d\u7f6e\u5e76\u4f7f\u5176\u751f\u6548\u3002 \u9488\u5bf9\u4f7f\u7528\u6e90\u7801\u3001RPM/DEB\u3001TAR \u5305\u5b89\u88c5\u7684\u96c6\u7fa4\uff1a \u4f7f\u7528\u6587\u672c\u7f16\u8f91\u5668\u4fee\u6539\u76ee\u6807\u670d\u52a1\u7684\u914d\u7f6e\u6587\u4ef6\u5e76\u4fdd\u5b58\u3002 \u9009\u62e9\u5408\u9002\u7684\u65f6\u95f4\u91cd\u542f \u6240\u6709 NebulaGraph\u670d\u52a1\u4f7f\u4fee\u6539\u751f\u6548\u3002 \u9488\u5bf9\u4f7f\u7528 Docker Compose \u5b89\u88c5\u7684\u96c6\u7fa4\uff1a \u5728\u6587\u4ef6 <install_path>/nebula-docker-compose/docker-compose.yaml \u4e2d\uff0c\u4fee\u6539\u670d\u52a1\u914d\u7f6e\u3002 \u5728\u76ee\u5f55 nebula-docker-compose \u5185\u6267\u884c\u547d\u4ee4 docker-compose up -d \u91cd\u542f\u6d89\u53ca\u914d\u7f6e\u53d8\u5316\u7684\u670d\u52a1\u3002 \u9488\u5bf9\u4f7f\u7528 Kubectl \u65b9\u5f0f\u521b\u5efa\u7684\u96c6\u7fa4\uff1a \u5177\u4f53\u64cd\u4f5c\uff0c\u53c2\u89c1 \u81ea\u5b9a\u4e49\u96c6\u7fa4\u7684\u914d\u7f6e\u53c2\u6570 \u3002","title":"\u5728\u914d\u7f6e\u6587\u4ef6\u4e2d\u4fee\u6539\u914d\u7f6e"},{"location":"5.configurations-and-logs/1.configurations/1.configurations/#_7","text":"\u7528\u6237\u53ef\u4ee5\u901a\u8fc7 curl \u547d\u4ee4\u52a8\u6001\u4fee\u6539NebulaGraph\u670d\u52a1\u7684\u914d\u7f6e\u3002\u4f8b\u5982\uff0c\u4fee\u6539 Storage \u670d\u52a1\u7684 wal_ttl \u53c2\u6570\u4e3a 600 \uff0c\u547d\u4ee4\u5982\u4e0b\uff1a curl -X PUT -H \"Content-Type: application/json\" -d '{\"wal_ttl\":\"600\"}' -s \"http://192.168.15.6:19779/flags\" \u5176\u4e2d\uff0c {\"wal_ttl\":\"600\"} \u4e3a\u5f85\u4fee\u6539\u7684\u914d\u7f6e\u53c2\u6570\u53ca\u5176\u503c\uff1b 192.168.15.6:19779 \u4e3a Storage \u670d\u52a1\u7684 IP \u5730\u5740\u548c HTTP \u7aef\u53e3\u53f7\u3002 Caution \u52a8\u6001\u4fee\u6539\u914d\u7f6e\u529f\u80fd\u4ec5\u9002\u7528\u4e8e\u539f\u578b\u9a8c\u8bc1\u548c\u6d4b\u8bd5\u73af\u5883\uff0c\u4e0d\u5efa\u8bae\u5728\u751f\u4ea7\u73af\u5883\u4e2d\u4f7f\u7528\u3002\u56e0\u4e3a\u5f53 local_config \u503c\u8bbe\u7f6e\u4e3a true \u65f6\uff0c\u52a8\u6001\u4fee\u6539\u7684\u914d\u7f6e\u4e0d\u4f1a\u6301\u4e45\u5316\uff0c\u91cd\u542f\u670d\u52a1\u540e\u914d\u7f6e\u4f1a\u6062\u590d\u4e3a\u521d\u59cb\u914d\u7f6e\u3002 \u4ec5\u652f\u6301\u52a8\u6001\u4fee\u6539 \u90e8\u5206 \u914d\u7f6e\u53c2\u6570\uff0c\u5177\u4f53\u652f\u6301\u7684\u53c2\u6570\u5217\u8868\uff0c\u53c2\u89c1\u5404\u670d\u52a1\u914d\u7f6e\u4e2d \u662f\u5426\u652f\u6301\u8fd0\u884c\u65f6\u52a8\u6001\u4fee\u6539 \u7684\u63cf\u8ff0\u3002","title":"\u4f7f\u7528\u547d\u4ee4\u52a8\u6001\u4fee\u6539\u914d\u7f6e"},{"location":"5.configurations-and-logs/1.configurations/2.meta-config/","text":"Meta \u670d\u52a1\u914d\u7f6e \u00b6 Meta \u670d\u52a1\u63d0\u4f9b\u4e86\u4e24\u4efd\u521d\u59cb\u914d\u7f6e\u6587\u4ef6 nebula-metad.conf.default \u548c nebula-metad.conf.production \uff0c\u65b9\u4fbf\u5728\u4e0d\u540c\u573a\u666f\u4e2d\u4f7f\u7528\u3002\u6587\u4ef6\u7684\u9ed8\u8ba4\u8def\u5f84\u4e3a /usr/local/nebula/etc/ \u3002 Caution \u4e0d\u5efa\u8bae\u4fee\u6539 local_config \u7684\u503c\u4e3a false \u3002\u4fee\u6539\u540eNebulaGraph\u670d\u52a1\u542f\u52a8\u540e\u4f1a\u5148\u5c1d\u8bd5\u4ece Meta \u670d\u52a1\u83b7\u53d6\u7f13\u5b58\u7684\u914d\u7f6e\u4fe1\u606f\uff0c\u53ef\u80fd\u5bfc\u81f4\u96c6\u7fa4\u914d\u7f6e\u4e0d\u4e00\u81f4\uff0c\u9020\u6210\u672a\u77e5\u98ce\u9669\u3002 \u4e0d\u5efa\u8bae\u4fee\u6539\u6587\u6863\u672a\u4ecb\u7ecd\u7684\u914d\u7f6e\u9879\uff0c\u9664\u975e\u5df2\u7ecf\u719f\u6089\u6e90\u4ee3\u7801\u5e76\u6e05\u695a\u4e86\u89e3\u914d\u7f6e\u9879\u4f5c\u7528\u3002 \u914d\u7f6e\u6587\u4ef6\u4f7f\u7528\u65b9\u5f0f \u00b6 \u5982\u9700\u4f7f\u7528\u521d\u59cb\u914d\u7f6e\u6587\u4ef6\uff0c\u4ece\u4e0a\u8ff0\u4e24\u4e2a\u6587\u4ef6\u9009\u62e9\u5176\u4e00\uff0c\u5220\u9664\u540e\u7f00 .default \u6216 .production \uff0cMeta \u670d\u52a1\u624d\u80fd\u5c06\u5176\u8bc6\u522b\u4e3a\u914d\u7f6e\u6587\u4ef6\u5e76\u4ece\u4e2d\u83b7\u53d6\u914d\u7f6e\u4fe1\u606f\u3002 \u914d\u7f6e\u6587\u4ef6\u53c2\u6570\u503c\u8bf4\u660e \u00b6 \u914d\u7f6e\u6587\u4ef6\u5185\u6ca1\u6709\u8bbe\u7f6e\u67d0\u4e2a\u53c2\u6570\u8868\u793a\u53c2\u6570\u4f7f\u7528\u7684\u662f\u9ed8\u8ba4\u503c\u3002\u6587\u4ef6\u5185\u53ea\u9884\u8bbe\u4e86\u90e8\u5206\u53c2\u6570\u7684\u503c\uff0c\u800c\u4e14\u4e24\u4efd\u521d\u59cb\u914d\u7f6e\u6587\u4ef6\u5185\u7684\u53c2\u6570\u503c\u4e5f\u7565\u6709\u4e0d\u540c\uff0c\u672c\u6587\u7684\u9884\u8bbe\u503c\u4ee5 nebula-metad.conf.default \u4e3a\u51c6\u3002 Caution \u914d\u7f6e\u6587\u4ef6\u4e2d\u7684\u90e8\u5206\u53c2\u6570\u503c\u53ef\u4ee5\u5728\u8fd0\u884c\u65f6\u52a8\u6001\u4fee\u6539\u3002\u672c\u6587\u5c06\u8fd9\u4e9b\u53c2\u6570\u6807\u8bb0\u4e3a\u652f\u6301\u8fd0\u884c\u65f6\u52a8\u6001\u4fee\u6539\uff0c\u5e76\u5f53 local_config \u503c\u8bbe\u7f6e\u4e3a true \u65f6\u91cd\u542f\u670d\u52a1\u540e\u914d\u7f6e\u4f1a\u6062\u590d\u4e3a\u521d\u59cb\u914d\u7f6e\u3002\u8be6\u60c5\u53c2\u89c1 \u4fee\u6539\u914d\u7f6e \u3002 \u5982\u9700\u67e5\u770b\u6240\u6709\u7684\u53c2\u6570\u53ca\u5176\u5f53\u524d\u503c\uff0c\u53c2\u89c1 \u914d\u7f6e\u7ba1\u7406 \u3002 basics \u914d\u7f6e \u00b6 \u540d\u79f0 \u9884\u8bbe\u503c \u8bf4\u660e \u662f\u5426\u652f\u6301\u8fd0\u884c\u65f6\u52a8\u6001\u4fee\u6539 daemonize true \u662f\u5426\u542f\u52a8\u5b88\u62a4\u8fdb\u7a0b\u3002 \u4e0d\u652f\u6301 pid_file pids/nebula-metad.pid \u8bb0\u5f55\u8fdb\u7a0b ID \u7684\u6587\u4ef6\u3002 \u4e0d\u652f\u6301 timezone_name - \u6307\u5b9aNebulaGraph\u7684\u65f6\u533a\u3002\u521d\u59cb\u914d\u7f6e\u6587\u4ef6\u4e2d\u672a\u8bbe\u7f6e\u8be5\u53c2\u6570\uff0c\u5982\u9700\u4f7f\u7528\u8bf7\u624b\u52a8\u6dfb\u52a0\u3002\u7cfb\u7edf\u9ed8\u8ba4\u503c\u4e3a UTC+00:00:00 \u3002\u683c\u5f0f\u8bf7\u53c2\u89c1 Specifying the Time Zone with TZ \u3002\u4f8b\u5982\uff0c\u4e1c\u516b\u533a\u7684\u8bbe\u7f6e\u65b9\u5f0f\u4e3a --timezone_name=UTC+08:00 \u3002 \u4e0d\u652f\u6301 Note \u5728\u63d2\u5165 \u65f6\u95f4\u7c7b\u578b \u7684\u5c5e\u6027\u503c\u65f6\uff0cNebulaGraph\u4f1a\u6839\u636e timezone_name \u8bbe\u7f6e\u7684\u65f6\u533a\u5c06\u8be5\u65f6\u95f4\u503c\uff08TIMESTAMP \u7c7b\u578b\u4f8b\u5916\uff09\u8f6c\u6362\u6210\u76f8\u5e94\u7684 UTC \u65f6\u95f4\uff0c\u56e0\u6b64\u5728\u67e5\u8be2\u4e2d\u8fd4\u56de\u7684\u65f6\u95f4\u7c7b\u578b\u5c5e\u6027\u503c\u4e3a UTC \u65f6\u95f4\u3002 timezone_name \u53c2\u6570\u53ea\u7528\u4e8e\u8f6c\u6362NebulaGraph\u4e2d\u5b58\u50a8\u7684\u6570\u636e\uff0cNebulaGraph\u8fdb\u7a0b\u4e2d\u5176\u5b83\u65f6\u533a\u76f8\u5173\u6570\u636e\uff0c\u4f8b\u5982\u65e5\u5fd7\u6253\u5370\u7684\u65f6\u95f4\u7b49\uff0c\u4ecd\u7136\u4f7f\u7528\u4e3b\u673a\u7cfb\u7edf\u9ed8\u8ba4\u7684\u65f6\u533a\u3002 logging \u914d\u7f6e \u00b6 \u540d\u79f0 \u9884\u8bbe\u503c \u8bf4\u660e \u662f\u5426\u652f\u6301\u8fd0\u884c\u65f6\u52a8\u6001\u4fee\u6539 log_dir logs \u5b58\u653e Meta \u670d\u52a1\u65e5\u5fd7\u7684\u76ee\u5f55\uff0c\u5efa\u8bae\u548c\u6570\u636e\u4fdd\u5b58\u5728\u4e0d\u540c\u786c\u76d8\u3002 \u4e0d\u652f\u6301 minloglevel 0 \u6700\u5c0f\u65e5\u5fd7\u7ea7\u522b\uff0c\u5373\u8bb0\u5f55\u6b64\u7ea7\u522b\u6216\u66f4\u9ad8\u7ea7\u522b\u7684\u65e5\u5fd7\u3002\u53ef\u9009\u503c\u4e3a 0 \uff08INFO\uff09\u3001 1 \uff08WARNING\uff09\u3001 2 \uff08ERROR\uff09\u3001 3 \uff08FATAL\uff09\u3002\u5efa\u8bae\u5728\u8c03\u8bd5\u65f6\u8bbe\u7f6e\u4e3a 0 \uff0c\u751f\u4ea7\u73af\u5883\u4e2d\u8bbe\u7f6e\u4e3a 1 \u3002\u5982\u679c\u8bbe\u7f6e\u4e3a 4 \uff0cNebulaGraph\u4e0d\u4f1a\u8bb0\u5f55\u4efb\u4f55\u65e5\u5fd7\u3002 \u652f\u6301 v 0 VLOG \u65e5\u5fd7\u8be6\u7ec6\u7ea7\u522b\uff0c\u5373\u8bb0\u5f55\u5c0f\u4e8e\u6216\u7b49\u4e8e\u6b64\u7ea7\u522b\u7684\u6240\u6709 VLOG \u6d88\u606f\u3002\u53ef\u9009\u503c\u4e3a 0 \u3001 1 \u3001 2 \u3001 3 \u3001 4 \u3001 5 \u3002glog \u63d0\u4f9b\u7684 VLOG \u5b8f\u5141\u8bb8\u7528\u6237\u5b9a\u4e49\u81ea\u5df1\u7684\u6570\u5b57\u65e5\u5fd7\u8bb0\u5f55\u7ea7\u522b\uff0c\u5e76\u7528\u53c2\u6570 v \u63a7\u5236\u8bb0\u5f55\u54ea\u4e9b\u8be6\u7ec6\u6d88\u606f\u3002\u8be6\u60c5\u53c2\u89c1 Verbose Logging \u3002 \u652f\u6301 logbufsecs 0 \u7f13\u51b2\u65e5\u5fd7\u7684\u6700\u5927\u65f6\u95f4\uff0c\u8d85\u65f6\u540e\u8f93\u51fa\u5230\u65e5\u5fd7\u6587\u4ef6\u3002 0 \u8868\u793a\u5b9e\u65f6\u8f93\u51fa\u3002\u5355\u4f4d\uff1a\u79d2\u3002 \u4e0d\u652f\u6301 redirect_stdout true \u662f\u5426\u5c06\u6807\u51c6\u8f93\u51fa\u548c\u6807\u51c6\u9519\u8bef\u91cd\u5b9a\u5411\u5230\u5355\u72ec\u7684\u8f93\u51fa\u6587\u4ef6\u3002 \u4e0d\u652f\u6301 stdout_log_file metad-stdout.log \u6807\u51c6\u8f93\u51fa\u65e5\u5fd7\u6587\u4ef6\u540d\u79f0\u3002 \u4e0d\u652f\u6301 stderr_log_file metad-stderr.log \u6807\u51c6\u9519\u8bef\u65e5\u5fd7\u6587\u4ef6\u540d\u79f0\u3002 \u4e0d\u652f\u6301 stderrthreshold 3 \u8981\u590d\u5236\u5230\u6807\u51c6\u9519\u8bef\u4e2d\u7684\u6700\u5c0f\u65e5\u5fd7\u7ea7\u522b\uff08 minloglevel \uff09\u3002 \u4e0d\u652f\u6301 timestamp_in_logfile_name true \u65e5\u5fd7\u6587\u4ef6\u540d\u79f0\u4e2d\u662f\u5426\u5305\u542b\u65f6\u95f4\u6233\u3002 true \u8868\u793a\u5305\u542b\uff0c false \u8868\u793a\u4e0d\u5305\u542b\u3002 \u4e0d\u652f\u6301 networking \u914d\u7f6e \u00b6 \u540d\u79f0 \u9884\u8bbe\u503c \u8bf4\u660e \u662f\u5426\u652f\u6301\u8fd0\u884c\u65f6\u52a8\u6001\u4fee\u6539 meta_server_addrs 127.0.0.1:9559 \u5168\u90e8 Meta \u670d\u52a1\u7684 IP \u5730\u5740\u548c\u7aef\u53e3\u3002\u591a\u4e2a Meta \u670d\u52a1\u7528\u82f1\u6587\u9017\u53f7\uff08,\uff09\u5206\u9694\u3002 \u4e0d\u652f\u6301 local_ip 127.0.0.1 Meta \u670d\u52a1\u7684\u672c\u5730 IP \u5730\u5740\u3002\u672c\u5730 IP \u5730\u5740\u7528\u4e8e\u8bc6\u522b nebula-metad \u8fdb\u7a0b\uff0c\u5982\u679c\u662f\u5206\u5e03\u5f0f\u96c6\u7fa4\u6216\u9700\u8981\u8fdc\u7a0b\u8bbf\u95ee\uff0c\u8bf7\u4fee\u6539\u4e3a\u5bf9\u5e94\u5730\u5740\u3002 \u4e0d\u652f\u6301 port 9559 Meta \u670d\u52a1\u7684 RPC \u5b88\u62a4\u8fdb\u7a0b\u76d1\u542c\u7aef\u53e3\u3002Meta \u670d\u52a1\u5bf9\u5916\u7aef\u53e3\u4e3a 9559 \uff0c\u5bf9\u5185\u7aef\u53e3\u4e3a \u5bf9\u5916\u7aef\u53e3+1 \uff0c\u5373 9560 \uff0cNebulaGraph\u4f7f\u7528\u5185\u90e8\u7aef\u53e3\u8fdb\u884c\u591a\u526f\u672c\u95f4\u7684\u4ea4\u4e92\u3002 \u4e0d\u652f\u6301 ws_ip 0.0.0.0 HTTP \u670d\u52a1\u7684 IP \u5730\u5740\u3002 \u4e0d\u652f\u6301 ws_http_port 19559 HTTP \u670d\u52a1\u7684\u7aef\u53e3\u3002 \u4e0d\u652f\u6301 ws_storage_http_port 19779 HTTP \u534f\u8bae\u76d1\u542c Storage \u670d\u52a1\u7684\u7aef\u53e3\uff0c\u9700\u8981\u548c Storage \u670d\u52a1\u914d\u7f6e\u6587\u4ef6\u4e2d\u7684 ws_http_port \u4fdd\u6301\u4e00\u81f4\u3002\u4ec5\u5b58\u7b97\u5408\u5e76\u7248NebulaGraph\u9700\u8981\u8bbe\u7f6e\u672c\u53c2\u6570\u3002 \u4e0d\u652f\u6301 heartbeat_interval_secs 10 \u9ed8\u8ba4\u5fc3\u8df3\u95f4\u9694\u3002\u8bf7\u786e\u4fdd\u6240\u6709\u670d\u52a1\u7684 heartbeat_interval_secs \u53d6\u503c\u76f8\u540c\uff0c\u5426\u5219\u4f1a\u5bfc\u81f4\u7cfb\u7edf\u65e0\u6cd5\u6b63\u5e38\u5de5\u4f5c\u3002\u5355\u4f4d\uff1a\u79d2\u3002 \u652f\u6301 Caution \u5fc5\u987b\u5728\u914d\u7f6e\u6587\u4ef6\u4e2d\u4f7f\u7528\u771f\u5b9e\u7684 IP \u5730\u5740\u3002\u5426\u5219\u67d0\u4e9b\u60c5\u51b5\u4e0b 127.0.0.1/0.0.0.0 \u65e0\u6cd5\u6b63\u786e\u89e3\u6790\u3002 storage \u914d\u7f6e \u00b6 \u540d\u79f0 \u9884\u8bbe\u503c \u8bf4\u660e \u662f\u5426\u652f\u6301\u8fd0\u884c\u65f6\u52a8\u6001\u4fee\u6539 data_path data/meta meta \u6570\u636e\u5b58\u50a8\u8def\u5f84\u3002 \u4e0d\u652f\u6301 misc \u914d\u7f6e \u00b6 \u540d\u79f0 \u9884\u8bbe\u503c \u8bf4\u660e \u662f\u5426\u652f\u6301\u8fd0\u884c\u65f6\u52a8\u6001\u4fee\u6539 default_parts_num 10 \u521b\u5efa\u56fe\u7a7a\u95f4\u65f6\u7684\u9ed8\u8ba4\u5206\u7247\u6570\u91cf\u3002 \u4e0d\u652f\u6301 default_replica_factor 1 \u521b\u5efa\u56fe\u7a7a\u95f4\u65f6\u7684\u9ed8\u8ba4\u526f\u672c\u6570\u91cf\u3002 \u4e0d\u652f\u6301 rocksdb options \u914d\u7f6e \u00b6 \u540d\u79f0 \u9884\u8bbe\u503c \u8bf4\u660e \u662f\u5426\u652f\u6301\u8fd0\u884c\u65f6\u52a8\u6001\u4fee\u6539 rocksdb_wal_sync true \u662f\u5426\u540c\u6b65 RocksDB \u7684 WAL \u65e5\u5fd7\u3002 \u4e0d\u652f\u6301","title":"Meta \u670d\u52a1\u914d\u7f6e"},{"location":"5.configurations-and-logs/1.configurations/2.meta-config/#meta","text":"Meta \u670d\u52a1\u63d0\u4f9b\u4e86\u4e24\u4efd\u521d\u59cb\u914d\u7f6e\u6587\u4ef6 nebula-metad.conf.default \u548c nebula-metad.conf.production \uff0c\u65b9\u4fbf\u5728\u4e0d\u540c\u573a\u666f\u4e2d\u4f7f\u7528\u3002\u6587\u4ef6\u7684\u9ed8\u8ba4\u8def\u5f84\u4e3a /usr/local/nebula/etc/ \u3002 Caution \u4e0d\u5efa\u8bae\u4fee\u6539 local_config \u7684\u503c\u4e3a false \u3002\u4fee\u6539\u540eNebulaGraph\u670d\u52a1\u542f\u52a8\u540e\u4f1a\u5148\u5c1d\u8bd5\u4ece Meta \u670d\u52a1\u83b7\u53d6\u7f13\u5b58\u7684\u914d\u7f6e\u4fe1\u606f\uff0c\u53ef\u80fd\u5bfc\u81f4\u96c6\u7fa4\u914d\u7f6e\u4e0d\u4e00\u81f4\uff0c\u9020\u6210\u672a\u77e5\u98ce\u9669\u3002 \u4e0d\u5efa\u8bae\u4fee\u6539\u6587\u6863\u672a\u4ecb\u7ecd\u7684\u914d\u7f6e\u9879\uff0c\u9664\u975e\u5df2\u7ecf\u719f\u6089\u6e90\u4ee3\u7801\u5e76\u6e05\u695a\u4e86\u89e3\u914d\u7f6e\u9879\u4f5c\u7528\u3002","title":"Meta \u670d\u52a1\u914d\u7f6e"},{"location":"5.configurations-and-logs/1.configurations/2.meta-config/#_1","text":"\u5982\u9700\u4f7f\u7528\u521d\u59cb\u914d\u7f6e\u6587\u4ef6\uff0c\u4ece\u4e0a\u8ff0\u4e24\u4e2a\u6587\u4ef6\u9009\u62e9\u5176\u4e00\uff0c\u5220\u9664\u540e\u7f00 .default \u6216 .production \uff0cMeta \u670d\u52a1\u624d\u80fd\u5c06\u5176\u8bc6\u522b\u4e3a\u914d\u7f6e\u6587\u4ef6\u5e76\u4ece\u4e2d\u83b7\u53d6\u914d\u7f6e\u4fe1\u606f\u3002","title":"\u914d\u7f6e\u6587\u4ef6\u4f7f\u7528\u65b9\u5f0f"},{"location":"5.configurations-and-logs/1.configurations/2.meta-config/#_2","text":"\u914d\u7f6e\u6587\u4ef6\u5185\u6ca1\u6709\u8bbe\u7f6e\u67d0\u4e2a\u53c2\u6570\u8868\u793a\u53c2\u6570\u4f7f\u7528\u7684\u662f\u9ed8\u8ba4\u503c\u3002\u6587\u4ef6\u5185\u53ea\u9884\u8bbe\u4e86\u90e8\u5206\u53c2\u6570\u7684\u503c\uff0c\u800c\u4e14\u4e24\u4efd\u521d\u59cb\u914d\u7f6e\u6587\u4ef6\u5185\u7684\u53c2\u6570\u503c\u4e5f\u7565\u6709\u4e0d\u540c\uff0c\u672c\u6587\u7684\u9884\u8bbe\u503c\u4ee5 nebula-metad.conf.default \u4e3a\u51c6\u3002 Caution \u914d\u7f6e\u6587\u4ef6\u4e2d\u7684\u90e8\u5206\u53c2\u6570\u503c\u53ef\u4ee5\u5728\u8fd0\u884c\u65f6\u52a8\u6001\u4fee\u6539\u3002\u672c\u6587\u5c06\u8fd9\u4e9b\u53c2\u6570\u6807\u8bb0\u4e3a\u652f\u6301\u8fd0\u884c\u65f6\u52a8\u6001\u4fee\u6539\uff0c\u5e76\u5f53 local_config \u503c\u8bbe\u7f6e\u4e3a true \u65f6\u91cd\u542f\u670d\u52a1\u540e\u914d\u7f6e\u4f1a\u6062\u590d\u4e3a\u521d\u59cb\u914d\u7f6e\u3002\u8be6\u60c5\u53c2\u89c1 \u4fee\u6539\u914d\u7f6e \u3002 \u5982\u9700\u67e5\u770b\u6240\u6709\u7684\u53c2\u6570\u53ca\u5176\u5f53\u524d\u503c\uff0c\u53c2\u89c1 \u914d\u7f6e\u7ba1\u7406 \u3002","title":"\u914d\u7f6e\u6587\u4ef6\u53c2\u6570\u503c\u8bf4\u660e"},{"location":"5.configurations-and-logs/1.configurations/2.meta-config/#basics","text":"\u540d\u79f0 \u9884\u8bbe\u503c \u8bf4\u660e \u662f\u5426\u652f\u6301\u8fd0\u884c\u65f6\u52a8\u6001\u4fee\u6539 daemonize true \u662f\u5426\u542f\u52a8\u5b88\u62a4\u8fdb\u7a0b\u3002 \u4e0d\u652f\u6301 pid_file pids/nebula-metad.pid \u8bb0\u5f55\u8fdb\u7a0b ID \u7684\u6587\u4ef6\u3002 \u4e0d\u652f\u6301 timezone_name - \u6307\u5b9aNebulaGraph\u7684\u65f6\u533a\u3002\u521d\u59cb\u914d\u7f6e\u6587\u4ef6\u4e2d\u672a\u8bbe\u7f6e\u8be5\u53c2\u6570\uff0c\u5982\u9700\u4f7f\u7528\u8bf7\u624b\u52a8\u6dfb\u52a0\u3002\u7cfb\u7edf\u9ed8\u8ba4\u503c\u4e3a UTC+00:00:00 \u3002\u683c\u5f0f\u8bf7\u53c2\u89c1 Specifying the Time Zone with TZ \u3002\u4f8b\u5982\uff0c\u4e1c\u516b\u533a\u7684\u8bbe\u7f6e\u65b9\u5f0f\u4e3a --timezone_name=UTC+08:00 \u3002 \u4e0d\u652f\u6301 Note \u5728\u63d2\u5165 \u65f6\u95f4\u7c7b\u578b \u7684\u5c5e\u6027\u503c\u65f6\uff0cNebulaGraph\u4f1a\u6839\u636e timezone_name \u8bbe\u7f6e\u7684\u65f6\u533a\u5c06\u8be5\u65f6\u95f4\u503c\uff08TIMESTAMP \u7c7b\u578b\u4f8b\u5916\uff09\u8f6c\u6362\u6210\u76f8\u5e94\u7684 UTC \u65f6\u95f4\uff0c\u56e0\u6b64\u5728\u67e5\u8be2\u4e2d\u8fd4\u56de\u7684\u65f6\u95f4\u7c7b\u578b\u5c5e\u6027\u503c\u4e3a UTC \u65f6\u95f4\u3002 timezone_name \u53c2\u6570\u53ea\u7528\u4e8e\u8f6c\u6362NebulaGraph\u4e2d\u5b58\u50a8\u7684\u6570\u636e\uff0cNebulaGraph\u8fdb\u7a0b\u4e2d\u5176\u5b83\u65f6\u533a\u76f8\u5173\u6570\u636e\uff0c\u4f8b\u5982\u65e5\u5fd7\u6253\u5370\u7684\u65f6\u95f4\u7b49\uff0c\u4ecd\u7136\u4f7f\u7528\u4e3b\u673a\u7cfb\u7edf\u9ed8\u8ba4\u7684\u65f6\u533a\u3002","title":"basics \u914d\u7f6e"},{"location":"5.configurations-and-logs/1.configurations/2.meta-config/#logging","text":"\u540d\u79f0 \u9884\u8bbe\u503c \u8bf4\u660e \u662f\u5426\u652f\u6301\u8fd0\u884c\u65f6\u52a8\u6001\u4fee\u6539 log_dir logs \u5b58\u653e Meta \u670d\u52a1\u65e5\u5fd7\u7684\u76ee\u5f55\uff0c\u5efa\u8bae\u548c\u6570\u636e\u4fdd\u5b58\u5728\u4e0d\u540c\u786c\u76d8\u3002 \u4e0d\u652f\u6301 minloglevel 0 \u6700\u5c0f\u65e5\u5fd7\u7ea7\u522b\uff0c\u5373\u8bb0\u5f55\u6b64\u7ea7\u522b\u6216\u66f4\u9ad8\u7ea7\u522b\u7684\u65e5\u5fd7\u3002\u53ef\u9009\u503c\u4e3a 0 \uff08INFO\uff09\u3001 1 \uff08WARNING\uff09\u3001 2 \uff08ERROR\uff09\u3001 3 \uff08FATAL\uff09\u3002\u5efa\u8bae\u5728\u8c03\u8bd5\u65f6\u8bbe\u7f6e\u4e3a 0 \uff0c\u751f\u4ea7\u73af\u5883\u4e2d\u8bbe\u7f6e\u4e3a 1 \u3002\u5982\u679c\u8bbe\u7f6e\u4e3a 4 \uff0cNebulaGraph\u4e0d\u4f1a\u8bb0\u5f55\u4efb\u4f55\u65e5\u5fd7\u3002 \u652f\u6301 v 0 VLOG \u65e5\u5fd7\u8be6\u7ec6\u7ea7\u522b\uff0c\u5373\u8bb0\u5f55\u5c0f\u4e8e\u6216\u7b49\u4e8e\u6b64\u7ea7\u522b\u7684\u6240\u6709 VLOG \u6d88\u606f\u3002\u53ef\u9009\u503c\u4e3a 0 \u3001 1 \u3001 2 \u3001 3 \u3001 4 \u3001 5 \u3002glog \u63d0\u4f9b\u7684 VLOG \u5b8f\u5141\u8bb8\u7528\u6237\u5b9a\u4e49\u81ea\u5df1\u7684\u6570\u5b57\u65e5\u5fd7\u8bb0\u5f55\u7ea7\u522b\uff0c\u5e76\u7528\u53c2\u6570 v \u63a7\u5236\u8bb0\u5f55\u54ea\u4e9b\u8be6\u7ec6\u6d88\u606f\u3002\u8be6\u60c5\u53c2\u89c1 Verbose Logging \u3002 \u652f\u6301 logbufsecs 0 \u7f13\u51b2\u65e5\u5fd7\u7684\u6700\u5927\u65f6\u95f4\uff0c\u8d85\u65f6\u540e\u8f93\u51fa\u5230\u65e5\u5fd7\u6587\u4ef6\u3002 0 \u8868\u793a\u5b9e\u65f6\u8f93\u51fa\u3002\u5355\u4f4d\uff1a\u79d2\u3002 \u4e0d\u652f\u6301 redirect_stdout true \u662f\u5426\u5c06\u6807\u51c6\u8f93\u51fa\u548c\u6807\u51c6\u9519\u8bef\u91cd\u5b9a\u5411\u5230\u5355\u72ec\u7684\u8f93\u51fa\u6587\u4ef6\u3002 \u4e0d\u652f\u6301 stdout_log_file metad-stdout.log \u6807\u51c6\u8f93\u51fa\u65e5\u5fd7\u6587\u4ef6\u540d\u79f0\u3002 \u4e0d\u652f\u6301 stderr_log_file metad-stderr.log \u6807\u51c6\u9519\u8bef\u65e5\u5fd7\u6587\u4ef6\u540d\u79f0\u3002 \u4e0d\u652f\u6301 stderrthreshold 3 \u8981\u590d\u5236\u5230\u6807\u51c6\u9519\u8bef\u4e2d\u7684\u6700\u5c0f\u65e5\u5fd7\u7ea7\u522b\uff08 minloglevel \uff09\u3002 \u4e0d\u652f\u6301 timestamp_in_logfile_name true \u65e5\u5fd7\u6587\u4ef6\u540d\u79f0\u4e2d\u662f\u5426\u5305\u542b\u65f6\u95f4\u6233\u3002 true \u8868\u793a\u5305\u542b\uff0c false \u8868\u793a\u4e0d\u5305\u542b\u3002 \u4e0d\u652f\u6301","title":"logging \u914d\u7f6e"},{"location":"5.configurations-and-logs/1.configurations/2.meta-config/#networking","text":"\u540d\u79f0 \u9884\u8bbe\u503c \u8bf4\u660e \u662f\u5426\u652f\u6301\u8fd0\u884c\u65f6\u52a8\u6001\u4fee\u6539 meta_server_addrs 127.0.0.1:9559 \u5168\u90e8 Meta \u670d\u52a1\u7684 IP \u5730\u5740\u548c\u7aef\u53e3\u3002\u591a\u4e2a Meta \u670d\u52a1\u7528\u82f1\u6587\u9017\u53f7\uff08,\uff09\u5206\u9694\u3002 \u4e0d\u652f\u6301 local_ip 127.0.0.1 Meta \u670d\u52a1\u7684\u672c\u5730 IP \u5730\u5740\u3002\u672c\u5730 IP \u5730\u5740\u7528\u4e8e\u8bc6\u522b nebula-metad \u8fdb\u7a0b\uff0c\u5982\u679c\u662f\u5206\u5e03\u5f0f\u96c6\u7fa4\u6216\u9700\u8981\u8fdc\u7a0b\u8bbf\u95ee\uff0c\u8bf7\u4fee\u6539\u4e3a\u5bf9\u5e94\u5730\u5740\u3002 \u4e0d\u652f\u6301 port 9559 Meta \u670d\u52a1\u7684 RPC \u5b88\u62a4\u8fdb\u7a0b\u76d1\u542c\u7aef\u53e3\u3002Meta \u670d\u52a1\u5bf9\u5916\u7aef\u53e3\u4e3a 9559 \uff0c\u5bf9\u5185\u7aef\u53e3\u4e3a \u5bf9\u5916\u7aef\u53e3+1 \uff0c\u5373 9560 \uff0cNebulaGraph\u4f7f\u7528\u5185\u90e8\u7aef\u53e3\u8fdb\u884c\u591a\u526f\u672c\u95f4\u7684\u4ea4\u4e92\u3002 \u4e0d\u652f\u6301 ws_ip 0.0.0.0 HTTP \u670d\u52a1\u7684 IP \u5730\u5740\u3002 \u4e0d\u652f\u6301 ws_http_port 19559 HTTP \u670d\u52a1\u7684\u7aef\u53e3\u3002 \u4e0d\u652f\u6301 ws_storage_http_port 19779 HTTP \u534f\u8bae\u76d1\u542c Storage \u670d\u52a1\u7684\u7aef\u53e3\uff0c\u9700\u8981\u548c Storage \u670d\u52a1\u914d\u7f6e\u6587\u4ef6\u4e2d\u7684 ws_http_port \u4fdd\u6301\u4e00\u81f4\u3002\u4ec5\u5b58\u7b97\u5408\u5e76\u7248NebulaGraph\u9700\u8981\u8bbe\u7f6e\u672c\u53c2\u6570\u3002 \u4e0d\u652f\u6301 heartbeat_interval_secs 10 \u9ed8\u8ba4\u5fc3\u8df3\u95f4\u9694\u3002\u8bf7\u786e\u4fdd\u6240\u6709\u670d\u52a1\u7684 heartbeat_interval_secs \u53d6\u503c\u76f8\u540c\uff0c\u5426\u5219\u4f1a\u5bfc\u81f4\u7cfb\u7edf\u65e0\u6cd5\u6b63\u5e38\u5de5\u4f5c\u3002\u5355\u4f4d\uff1a\u79d2\u3002 \u652f\u6301 Caution \u5fc5\u987b\u5728\u914d\u7f6e\u6587\u4ef6\u4e2d\u4f7f\u7528\u771f\u5b9e\u7684 IP \u5730\u5740\u3002\u5426\u5219\u67d0\u4e9b\u60c5\u51b5\u4e0b 127.0.0.1/0.0.0.0 \u65e0\u6cd5\u6b63\u786e\u89e3\u6790\u3002","title":"networking \u914d\u7f6e"},{"location":"5.configurations-and-logs/1.configurations/2.meta-config/#storage","text":"\u540d\u79f0 \u9884\u8bbe\u503c \u8bf4\u660e \u662f\u5426\u652f\u6301\u8fd0\u884c\u65f6\u52a8\u6001\u4fee\u6539 data_path data/meta meta \u6570\u636e\u5b58\u50a8\u8def\u5f84\u3002 \u4e0d\u652f\u6301","title":"storage \u914d\u7f6e"},{"location":"5.configurations-and-logs/1.configurations/2.meta-config/#misc","text":"\u540d\u79f0 \u9884\u8bbe\u503c \u8bf4\u660e \u662f\u5426\u652f\u6301\u8fd0\u884c\u65f6\u52a8\u6001\u4fee\u6539 default_parts_num 10 \u521b\u5efa\u56fe\u7a7a\u95f4\u65f6\u7684\u9ed8\u8ba4\u5206\u7247\u6570\u91cf\u3002 \u4e0d\u652f\u6301 default_replica_factor 1 \u521b\u5efa\u56fe\u7a7a\u95f4\u65f6\u7684\u9ed8\u8ba4\u526f\u672c\u6570\u91cf\u3002 \u4e0d\u652f\u6301","title":"misc \u914d\u7f6e"},{"location":"5.configurations-and-logs/1.configurations/2.meta-config/#rocksdb_options","text":"\u540d\u79f0 \u9884\u8bbe\u503c \u8bf4\u660e \u662f\u5426\u652f\u6301\u8fd0\u884c\u65f6\u52a8\u6001\u4fee\u6539 rocksdb_wal_sync true \u662f\u5426\u540c\u6b65 RocksDB \u7684 WAL \u65e5\u5fd7\u3002 \u4e0d\u652f\u6301","title":"rocksdb options \u914d\u7f6e"},{"location":"5.configurations-and-logs/1.configurations/3.graph-config/","text":"Graph \u670d\u52a1\u914d\u7f6e \u00b6 Graph \u670d\u52a1\u63d0\u4f9b\u4e86\u4e24\u4efd\u521d\u59cb\u914d\u7f6e\u6587\u4ef6 nebula-graphd.conf.default \u548c nebula-graphd.conf.production \uff0c\u65b9\u4fbf\u5728\u4e0d\u540c\u573a\u666f\u4e2d\u4f7f\u7528\u3002\u6587\u4ef6\u7684\u9ed8\u8ba4\u8def\u5f84\u4e3a /usr/local/nebula/etc/ \u3002 Caution \u4e0d\u5efa\u8bae\u4fee\u6539 local_config \u7684\u503c\u4e3a false \u3002\u4fee\u6539\u540eNebulaGraph\u670d\u52a1\u542f\u52a8\u540e\u4f1a\u5148\u5c1d\u8bd5\u4ece Meta \u670d\u52a1\u83b7\u53d6\u7f13\u5b58\u7684\u914d\u7f6e\u4fe1\u606f\uff0c\u53ef\u80fd\u5bfc\u81f4\u96c6\u7fa4\u914d\u7f6e\u4e0d\u4e00\u81f4\uff0c\u9020\u6210\u672a\u77e5\u98ce\u9669\u3002 \u4e0d\u5efa\u8bae\u4fee\u6539\u6587\u6863\u672a\u4ecb\u7ecd\u7684\u914d\u7f6e\u9879\uff0c\u9664\u975e\u5df2\u7ecf\u719f\u6089\u6e90\u4ee3\u7801\u5e76\u5b8c\u5168\u4e86\u89e3\u914d\u7f6e\u9879\u7684\u4f5c\u7528\u3002 \u914d\u7f6e\u6587\u4ef6\u4f7f\u7528\u65b9\u5f0f \u00b6 \u5982\u9700\u4f7f\u7528\u521d\u59cb\u914d\u7f6e\u6587\u4ef6\uff0c\u4ece\u4e0a\u8ff0\u4e24\u4e2a\u6587\u4ef6\u9009\u62e9\u5176\u4e00\uff0c\u5220\u9664\u540e\u7f00 .default \u6216 .production \uff0cGraph \u670d\u52a1\u624d\u80fd\u5c06\u5176\u8bc6\u522b\u4e3a\u914d\u7f6e\u6587\u4ef6\u5e76\u4ece\u4e2d\u83b7\u53d6\u914d\u7f6e\u4fe1\u606f\u3002 \u914d\u7f6e\u6587\u4ef6\u53c2\u6570\u503c\u8bf4\u660e \u00b6 \u914d\u7f6e\u6587\u4ef6\u5185\u6ca1\u6709\u8bbe\u7f6e\u67d0\u4e2a\u53c2\u6570\u8868\u793a\u53c2\u6570\u4f7f\u7528\u7684\u662f\u9ed8\u8ba4\u503c\u3002\u6587\u4ef6\u5185\u53ea\u9884\u8bbe\u4e86\u90e8\u5206\u53c2\u6570\u7684\u503c\uff0c\u800c\u4e14\u4e24\u4efd\u521d\u59cb\u914d\u7f6e\u6587\u4ef6\u5185\u7684\u53c2\u6570\u503c\u4e5f\u7565\u6709\u4e0d\u540c\uff0c\u672c\u6587\u7684\u9884\u8bbe\u503c\u4ee5 nebula-graphd.conf.default \u4e3a\u51c6\u3002 Caution \u914d\u7f6e\u6587\u4ef6\u4e2d\u7684\u90e8\u5206\u53c2\u6570\u503c\u53ef\u4ee5\u5728\u8fd0\u884c\u65f6\u52a8\u6001\u4fee\u6539\u3002\u672c\u6587\u5c06\u8fd9\u4e9b\u53c2\u6570\u6807\u8bb0\u4e3a\u652f\u6301\u8fd0\u884c\u65f6\u52a8\u6001\u4fee\u6539\uff0c\u5e76\u5f53 local_config \u503c\u8bbe\u7f6e\u4e3a true \u65f6\u91cd\u542f\u670d\u52a1\u540e\u914d\u7f6e\u4f1a\u6062\u590d\u4e3a\u521d\u59cb\u914d\u7f6e\u3002\u8be6\u60c5\u53c2\u89c1 \u4fee\u6539\u914d\u7f6e \u3002 \u5982\u9700\u67e5\u770b\u6240\u6709\u7684\u53c2\u6570\u53ca\u5176\u5f53\u524d\u503c\uff0c\u53c2\u89c1 \u914d\u7f6e\u7ba1\u7406 \u3002 basics \u914d\u7f6e \u00b6 \u540d\u79f0 \u9884\u8bbe\u503c \u8bf4\u660e \u662f\u5426\u652f\u6301\u8fd0\u884c\u65f6\u52a8\u6001\u4fee\u6539 daemonize true \u662f\u5426\u542f\u52a8\u5b88\u62a4\u8fdb\u7a0b\u3002 \u4e0d\u652f\u6301 pid_file pids/nebula-graphd.pid \u8bb0\u5f55\u8fdb\u7a0b ID \u7684\u6587\u4ef6\u3002 \u4e0d\u652f\u6301 enable_optimizer true \u662f\u5426\u542f\u7528\u4f18\u5316\u5668\u3002 \u4e0d\u652f\u6301 timezone_name - \u6307\u5b9aNebulaGraph\u7684\u65f6\u533a\u3002\u521d\u59cb\u914d\u7f6e\u6587\u4ef6\u4e2d\u672a\u8bbe\u7f6e\u8be5\u53c2\u6570\uff0c\u4f7f\u7528\u9700\u624b\u52a8\u6dfb\u52a0\u3002\u7cfb\u7edf\u9ed8\u8ba4\u503c\u4e3a UTC+00:00:00 \u3002\u683c\u5f0f\u8bf7\u53c2\u89c1 Specifying the Time Zone with TZ \u3002\u4f8b\u5982\uff0c\u4e1c\u516b\u533a\u7684\u8bbe\u7f6e\u65b9\u5f0f\u4e3a --timezone_name=UTC+08:00 \u3002 \u4e0d\u652f\u6301 local_config true \u662f\u5426\u4ece\u914d\u7f6e\u6587\u4ef6\u83b7\u53d6\u914d\u7f6e\u4fe1\u606f\u3002 \u4e0d\u652f\u6301 Note \u5728\u63d2\u5165 \u65f6\u95f4\u7c7b\u578b \u7684\u5c5e\u6027\u503c\u65f6\uff0cNebulaGraph\u4f1a\u6839\u636e timezone_name \u8bbe\u7f6e\u7684\u65f6\u533a\u5c06\u8be5\u65f6\u95f4\u503c\uff08TIMESTAMP \u7c7b\u578b\u4f8b\u5916\uff09\u8f6c\u6362\u6210\u76f8\u5e94\u7684 UTC \u65f6\u95f4\uff0c\u56e0\u6b64\u5728\u67e5\u8be2\u4e2d\u8fd4\u56de\u7684\u65f6\u95f4\u7c7b\u578b\u5c5e\u6027\u503c\u4e3a UTC \u65f6\u95f4\u3002 timezone_name \u53c2\u6570\u53ea\u7528\u4e8e\u8f6c\u6362NebulaGraph\u4e2d\u5b58\u50a8\u7684\u6570\u636e\uff0cNebulaGraph\u8fdb\u7a0b\u4e2d\u5176\u5b83\u65f6\u533a\u76f8\u5173\u6570\u636e\uff0c\u4f8b\u5982\u65e5\u5fd7\u6253\u5370\u7684\u65f6\u95f4\u7b49\uff0c\u4ecd\u7136\u4f7f\u7528\u4e3b\u673a\u7cfb\u7edf\u9ed8\u8ba4\u7684\u65f6\u533a\u3002 logging \u914d\u7f6e \u00b6 \u540d\u79f0 \u9884\u8bbe\u503c \u8bf4\u660e \u662f\u5426\u652f\u6301\u8fd0\u884c\u65f6\u52a8\u6001\u4fee\u6539 log_dir logs \u5b58\u653e Graph \u670d\u52a1\u65e5\u5fd7\u7684\u76ee\u5f55\uff0c\u5efa\u8bae\u548c\u6570\u636e\u4fdd\u5b58\u5728\u4e0d\u540c\u786c\u76d8\u3002 \u4e0d\u652f\u6301 minloglevel 0 \u6700\u5c0f\u65e5\u5fd7\u7ea7\u522b\uff0c\u5373\u8bb0\u5f55\u6b64\u7ea7\u522b\u6216\u66f4\u9ad8\u7ea7\u522b\u7684\u65e5\u5fd7\u3002\u53ef\u9009\u503c\u4e3a 0 \uff08INFO\uff09\u3001 1 \uff08WARNING\uff09\u3001 2 \uff08ERROR\uff09\u3001 3 \uff08FATAL\uff09\u3002\u5efa\u8bae\u5728\u8c03\u8bd5\u65f6\u8bbe\u7f6e\u4e3a 0 \uff0c\u751f\u4ea7\u73af\u5883\u4e2d\u8bbe\u7f6e\u4e3a 1 \u3002\u5982\u679c\u8bbe\u7f6e\u4e3a 4 \uff0cNebulaGraph\u4e0d\u4f1a\u8bb0\u5f55\u4efb\u4f55\u65e5\u5fd7\u3002 \u652f\u6301 v 0 VLOG \u65e5\u5fd7\u8be6\u7ec6\u7ea7\u522b\uff0c\u5373\u8bb0\u5f55\u5c0f\u4e8e\u6216\u7b49\u4e8e\u6b64\u7ea7\u522b\u7684\u6240\u6709 VLOG \u6d88\u606f\u3002\u53ef\u9009\u503c\u4e3a 0 \u3001 1 \u3001 2 \u3001 3 \u3001 4 \u3001 5 \u3002glog \u63d0\u4f9b\u7684 VLOG \u5b8f\u5141\u8bb8\u7528\u6237\u5b9a\u4e49\u81ea\u5df1\u7684\u6570\u5b57\u65e5\u5fd7\u8bb0\u5f55\u7ea7\u522b\uff0c\u5e76\u7528\u53c2\u6570 v \u63a7\u5236\u8bb0\u5f55\u54ea\u4e9b\u8be6\u7ec6\u6d88\u606f\u3002\u8be6\u60c5\u53c2\u89c1 Verbose Logging \u3002 \u652f\u6301 logbufsecs 0 \u7f13\u51b2\u65e5\u5fd7\u7684\u6700\u5927\u65f6\u95f4\uff0c\u8d85\u65f6\u540e\u8f93\u51fa\u5230\u65e5\u5fd7\u6587\u4ef6\u3002 0 \u8868\u793a\u5b9e\u65f6\u8f93\u51fa\u3002\u5355\u4f4d\uff1a\u79d2\u3002 \u4e0d\u652f\u6301 redirect_stdout true \u662f\u5426\u5c06\u6807\u51c6\u8f93\u51fa\u548c\u6807\u51c6\u9519\u8bef\u91cd\u5b9a\u5411\u5230\u5355\u72ec\u7684\u8f93\u51fa\u6587\u4ef6\u3002 \u4e0d\u652f\u6301 stdout_log_file graphd-stdout.log \u6807\u51c6\u8f93\u51fa\u65e5\u5fd7\u6587\u4ef6\u540d\u79f0\u3002 \u4e0d\u652f\u6301 stderr_log_file graphd-stderr.log \u6807\u51c6\u9519\u8bef\u65e5\u5fd7\u6587\u4ef6\u540d\u79f0\u3002 \u4e0d\u652f\u6301 stderrthreshold 3 \u8981\u590d\u5236\u5230\u6807\u51c6\u9519\u8bef\u4e2d\u7684\u6700\u5c0f\u65e5\u5fd7\u7ea7\u522b\uff08 minloglevel \uff09\u3002 \u4e0d\u652f\u6301 timestamp_in_logfile_name true \u65e5\u5fd7\u6587\u4ef6\u540d\u79f0\u4e2d\u662f\u5426\u5305\u542b\u65f6\u95f4\u6233\u3002 true \u8868\u793a\u5305\u542b\uff0c false \u8868\u793a\u4e0d\u5305\u542b\u3002 \u4e0d\u652f\u6301 query \u914d\u7f6e \u00b6 \u540d\u79f0 \u9884\u8bbe\u503c \u8bf4\u660e \u662f\u5426\u652f\u6301\u8fd0\u884c\u65f6\u52a8\u6001\u4fee\u6539 accept_partial_success false \u662f\u5426\u5c06\u90e8\u5206\u6210\u529f\u89c6\u4e3a\u9519\u8bef\u3002\u6b64\u914d\u7f6e\u4ec5\u9002\u7528\u4e8e\u53ea\u8bfb\u8bf7\u6c42\uff0c\u5199\u8bf7\u6c42\u603b\u662f\u5c06\u90e8\u5206\u6210\u529f\u89c6\u4e3a\u9519\u8bef\u3002\u67e5\u8be2\u90e8\u5206\u6210\u529f\u65f6\uff0c\u4f1a\u63d0\u793a Got partial result \u3002 \u652f\u6301 session_reclaim_interval_secs 60 \u5c06 Session \u4fe1\u606f\u53d1\u9001\u7ed9 Meta \u670d\u52a1\u7684\u95f4\u9694\u3002\u5355\u4f4d\uff1a\u79d2\u3002 \u652f\u6301 max_allowed_query_size 4194304 \u6700\u5927\u67e5\u8be2\u8bed\u53e5\u957f\u5ea6\u3002\u5355\u4f4d\uff1a\u5b57\u8282\u3002\u9ed8\u8ba4\u4e3a 4194304 \uff0c\u5373 4MB\u3002 \u652f\u6301 networking \u914d\u7f6e \u00b6 \u540d\u79f0 \u9884\u8bbe\u503c \u8bf4\u660e \u662f\u5426\u652f\u6301\u8fd0\u884c\u65f6\u52a8\u6001\u4fee\u6539 meta_server_addrs 127.0.0.1:9559 \u5168\u90e8 Meta \u670d\u52a1\u7684 IP \u5730\u5740\u548c\u7aef\u53e3\u3002\u591a\u4e2a Meta \u670d\u52a1\u7528\u82f1\u6587\u9017\u53f7\uff08,\uff09\u5206\u9694\u3002 \u4e0d\u652f\u6301 local_ip 127.0.0.1 Graph \u670d\u52a1\u7684\u672c\u5730 IP \u5730\u5740\u3002\u672c\u5730 IP \u5730\u5740\u7528\u4e8e\u8bc6\u522b nebula-graphd \u8fdb\u7a0b\uff0c\u5982\u679c\u662f\u5206\u5e03\u5f0f\u96c6\u7fa4\u6216\u9700\u8981\u8fdc\u7a0b\u8bbf\u95ee\uff0c\u8bf7\u4fee\u6539\u4e3a\u5bf9\u5e94\u5730\u5740\u3002 \u4e0d\u652f\u6301 listen_netdev any \u76d1\u542c\u7684\u7f51\u7edc\u8bbe\u5907\u3002 \u4e0d\u652f\u6301 port 9669 Graph \u670d\u52a1\u7684 RPC \u5b88\u62a4\u8fdb\u7a0b\u76d1\u542c\u7aef\u53e3\u3002 \u4e0d\u652f\u6301 reuse_port false \u662f\u5426\u542f\u7528 SO_REUSEPORT\u3002 \u4e0d\u652f\u6301 listen_backlog 1024 socket \u76d1\u542c\u7684\u8fde\u63a5\u961f\u5217\u6700\u5927\u957f\u5ea6\uff0c\u8c03\u6574\u672c\u53c2\u6570\u9700\u8981\u540c\u65f6\u8c03\u6574 net.core.somaxconn \u3002 \u4e0d\u652f\u6301 client_idle_timeout_secs 28800 \u7a7a\u95f2\u8fde\u63a5\u7684\u8d85\u65f6\u65f6\u95f4\u3002\u53d6\u503c\u8303\u56f4\u4e3a 1~604800\uff0c\u5355\u4f4d\uff1a\u79d2\u3002\u9ed8\u8ba4 8 \u5c0f\u65f6\u3002 \u4e0d\u652f\u6301 session_idle_timeout_secs 28800 \u7a7a\u95f2\u4f1a\u8bdd\u7684\u8d85\u65f6\u65f6\u95f4\u3002\u53d6\u503c\u8303\u56f4\u4e3a 1~604800\u3002\u9ed8\u8ba4 8 \u5c0f\u65f6\u3002\u5355\u4f4d\uff1a\u79d2\u3002 \u4e0d\u652f\u6301 num_accept_threads 1 \u63a5\u53d7\u4f20\u5165\u8fde\u63a5\u7684\u7ebf\u7a0b\u6570\u3002 \u4e0d\u652f\u6301 num_netio_threads 0 \u7f51\u7edc IO \u7ebf\u7a0b\u6570\u3002 0 \u8868\u793a CPU \u6838\u6570\u3002 \u4e0d\u652f\u6301 num_max_connections 0 \u6240\u6709\u7f51\u7edc\u7ebf\u7a0b\u7684\u6700\u5927\u6d3b\u52a8\u8fde\u63a5\u6570\uff0c 0 \u8868\u793a\u6ca1\u6709\u9650\u5236\u3002 \u6bcf\u4e2a\u7f51\u7edc\u7ebf\u7a0b\u7684\u6700\u5927\u8fde\u63a5\u6570= num_max_connections / num_netio_threads \u3002 \u4e0d\u652f\u6301 num_worker_threads 0 \u6267\u884c\u7528\u6237\u67e5\u8be2\u7684\u7ebf\u7a0b\u6570\u3002 0 \u8868\u793a CPU \u6838\u6570\u3002 \u4e0d\u652f\u6301 ws_ip 0.0.0.0 HTTP \u670d\u52a1\u7684 IP \u5730\u5740\u3002 \u4e0d\u652f\u6301 ws_http_port 19669 HTTP \u670d\u52a1\u7684\u7aef\u53e3\u3002 \u4e0d\u652f\u6301 heartbeat_interval_secs 10 \u9ed8\u8ba4\u5fc3\u8df3\u95f4\u9694\u3002\u8bf7\u786e\u4fdd\u6240\u6709\u670d\u52a1\u7684 heartbeat_interval_secs \u53d6\u503c\u76f8\u540c\uff0c\u5426\u5219\u4f1a\u5bfc\u81f4\u7cfb\u7edf\u65e0\u6cd5\u6b63\u5e38\u5de5\u4f5c\u3002\u5355\u4f4d\uff1a\u79d2\u3002 \u652f\u6301 storage_client_timeout_ms - Graph \u670d\u52a1\u4e0e Storage \u670d\u52a1\u7684 RPC \u8fde\u63a5\u8d85\u65f6\u65f6\u95f4\u3002\u521d\u59cb\u914d\u7f6e\u6587\u4ef6\u4e2d\u672a\u8bbe\u7f6e\u8be5\u53c2\u6570\uff0c\u4f7f\u7528\u9700\u624b\u52a8\u6dfb\u52a0\u3002\u9ed8\u8ba4\u503c\u4e3a 60000 \u6beb\u79d2\u3002 \u4e0d\u652f\u6301 slow_query_threshold_us 200000 \u5b9a\u4e49\u8d85\u8fc7\u591a\u957f\u65f6\u95f4\u7684\u67e5\u8be2\u4e3a\u6162\u67e5\u8be2\u3002\u5355\u4f4d\uff1a\u5fae\u79d2\u3002 \u6ce8\u610f \uff1aDML \u8bed\u53e5\u7684\u6267\u884c\u65f6\u95f4\u5373\u4f7f\u8d85\u8fc7\u8be5\u503c\uff0c\u4e5f\u4e0d\u4f1a\u88ab\u8bb0\u5f55\u4e3a\u6162\u67e5\u8be2\u3002 \u4e0d\u652f\u6301 ws_meta_http_port 19559 HTTP \u534f\u8bae\u76d1\u542c Meta \u670d\u52a1\u7684\u7aef\u53e3\uff0c\u9700\u8981\u548c Meta \u670d\u52a1\u914d\u7f6e\u6587\u4ef6\u4e2d\u7684 ws_http_port \u4fdd\u6301\u4e00\u81f4\u3002 \u4e0d\u652f\u6301 Caution \u5fc5\u987b\u5728\u914d\u7f6e\u6587\u4ef6\u4e2d\u4f7f\u7528\u771f\u5b9e\u7684 IP \u5730\u5740\u3002\u5426\u5219\u67d0\u4e9b\u60c5\u51b5\u4e0b 127.0.0.1/0.0.0.0 \u65e0\u6cd5\u6b63\u786e\u89e3\u6790\u3002 charset and collate \u914d\u7f6e \u00b6 \u540d\u79f0 \u9884\u8bbe\u503c \u8bf4\u660e \u662f\u5426\u652f\u6301\u8fd0\u884c\u65f6\u52a8\u6001\u4fee\u6539 default_charset utf8 \u521b\u5efa\u56fe\u7a7a\u95f4\u65f6\u7684\u9ed8\u8ba4\u5b57\u7b26\u96c6\u3002 \u4e0d\u652f\u6301 default_collate utf8_bin \u521b\u5efa\u56fe\u7a7a\u95f4\u65f6\u7684\u9ed8\u8ba4\u6392\u5e8f\u89c4\u5219\u3002 \u4e0d\u652f\u6301 authorization \u914d\u7f6e \u00b6 \u540d\u79f0 \u9884\u8bbe\u503c \u8bf4\u660e \u662f\u5426\u652f\u6301\u8fd0\u884c\u65f6\u52a8\u6001\u4fee\u6539 enable_authorize false \u7528\u6237\u767b\u5f55\u65f6\u662f\u5426\u8fdb\u884c\u8eab\u4efd\u9a8c\u8bc1\u3002\u8eab\u4efd\u9a8c\u8bc1\u8be6\u60c5\u8bf7\u53c2\u89c1 \u8eab\u4efd\u9a8c\u8bc1 \u3002 \u4e0d\u652f\u6301 auth_type password \u7528\u6237\u767b\u5f55\u7684\u8eab\u4efd\u9a8c\u8bc1\u65b9\u5f0f\u3002\u53d6\u503c\u4e3a password \u3001 ldap \u3001 cloud \u3002 \u4e0d\u652f\u6301 memory \u914d\u7f6e \u00b6 \u540d\u79f0 \u9884\u8bbe\u503c \u8bf4\u660e \u662f\u5426\u652f\u6301\u8fd0\u884c\u65f6\u52a8\u6001\u4fee\u6539 system_memory_high_watermark_ratio 0.8 \u5185\u5b58\u9ad8\u6c34\u4f4d\u62a5\u8b66\u673a\u5236\u7684\u89e6\u53d1\u9608\u503c\u3002\u7cfb\u7edf\u5185\u5b58\u5360\u7528\u7387\u9ad8\u4e8e\u8be5\u503c\u4f1a\u89e6\u53d1\u62a5\u8b66\u673a\u5236\uff0cNebulaGraph\u4f1a\u505c\u6b62\u63a5\u53d7\u67e5\u8be2\u3002 \u652f\u6301 metrics \u914d\u7f6e \u00b6 \u540d\u79f0 \u9884\u8bbe\u503c \u8bf4\u660e \u662f\u5426\u652f\u6301\u8fd0\u884c\u65f6\u52a8\u6001\u4fee\u6539 enable_space_level_metrics false \u5f00\u542f\u540e\u53ef\u6253\u5f00\u56fe\u7a7a\u95f4\u7ea7\u522b\u7684\u76d1\u63a7\uff0c\u5bf9\u5e94\u7684\u76d1\u63a7\u6307\u6807\u540d\u79f0\u4e2d\u5305\u542b\u56fe\u7a7a\u95f4\u7684\u540d\u79f0\uff0c\u4f8b\u5982 query_latency_us{space=basketballplayer}.avg.3600 \u3002\u652f\u6301\u7684\u76d1\u63a7\u6307\u6807\u53ef\u7528 curl \u547d\u4ee4\u67e5\u770b\uff0c\u8be6\u7ec6\u8bf4\u660e\u53c2\u89c1 \u67e5\u8be2\u76d1\u63a7\u6307\u6807 \u3002 \u4e0d\u652f\u6301 session \u914d\u7f6e \u00b6 \u540d\u79f0 \u9884\u8bbe\u503c \u8bf4\u660e \u662f\u5426\u652f\u6301\u8fd0\u884c\u65f6\u52a8\u6001\u4fee\u6539 max_sessions_per_ip_per_user 300 \u76f8\u540c\u7528\u6237\u548c IP \u5730\u5740\u53ef\u4ee5\u521b\u5efa\u7684\u6700\u5927\u6d3b\u8dc3\u4f1a\u8bdd\u6570\u3002 \u4e0d\u652f\u6301 experimental \u914d\u7f6e \u00b6 \u540d\u79f0 \u9884\u8bbe\u503c \u8bf4\u660e \u662f\u5426\u652f\u6301\u8fd0\u884c\u65f6\u52a8\u6001\u4fee\u6539 enable_experimental_feature false \u5b9e\u9a8c\u6027\u529f\u80fd\u5f00\u5173\u3002\u53ef\u9009\u503c\u4e3a true \u548c false \u3002 \u4e0d\u652f\u6301 enable_data_balance true \u662f\u5426\u5f00\u542f \u5747\u8861\u5206\u7247 \u529f\u80fd\u3002\u4ec5\u5f53 enable_experimental_feature \u4e3a true \u65f6\u751f\u6548\u3002 \u4e0d\u652f\u6301 memory tracker \u914d\u7f6e \u00b6 \u6709\u5173 Memory Tracker \u7684\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u89c1 \u56fe\u6570\u636e\u5e93 NebulaGraph \u7684\u5185\u5b58\u7ba1\u7406\u5b9e\u8df5\u4e4b Memory Tracker \u3002 \u540d\u79f0 \u9884\u8bbe\u503c \u8bf4\u660e \u662f\u5426\u652f\u6301\u8fd0\u884c\u65f6\u52a8\u6001\u4fee\u6539 memory_tracker_limit_ratio 0.8 \u53d6\u503c\u53ef\u8bbe\u7f6e\u4e3a\uff1a (0, 1] \u3001 2 \u3001 3 \u3002 \u8b66\u60d5\uff1a\u8bbe\u7f6e\u8be5\u53c2\u6570\u65f6\u8bf7\u786e\u4fdd system_memory_high_watermark_ratio \u7684\u503c\u4e0d\u4e3a 1 \uff0c\u5426\u5219\u8be5\u53c2\u6570\u7684\u503c\u4e0d\u751f\u6548\u3002 (0, 1] \uff1a\u53ef\u7528\u5185\u5b58\u7684\u767e\u5206\u6bd4\uff0c\u5f53\u53ef\u7528\u5185\u5b58\u4f4e\u4e8e\u8be5\u503c\u65f6\uff0cNebulaGraph\u4f1a\u505c\u6b62\u63a5\u53d7\u67e5\u8be2\u3002 \u8ba1\u7b97\u516c\u5f0f\uff1a\u53ef\u7528\u5185\u5b58/(\u603b\u5185\u5b58 - \u4fdd\u7559\u5185\u5b58)\u3002 \u6ce8\u610f \uff1a\u5bf9\u4e8e\u6df7\u5408\u90e8\u7f72\u7684\u96c6\u7fa4\uff0c\u9700\u8981\u6839\u636e\u5b9e\u9645\u60c5\u51b5 \u8c03\u5c0f \u8be5\u53c2\u6570\u3002\u4f8b\u5982\uff0c\u5f53\u9884\u671f Graphd \u53ea\u5360\u7528 50% \u7684\u5185\u5b58\u65f6\uff0c\u8be5\u53c2\u6570\u7684\u503c\u53ef\u8bbe\u7f6e\u4e3a\u5c0f\u4e8e 0.5 \u3002 2 \uff1a\u52a8\u6001\u81ea\u9002\u5e94\u6a21\u5f0f\uff08Dynamic Self Adaptive\uff09\uff0cMemory Tracker \u4f1a\u6839\u636e\u7cfb\u7edf\u5f53\u524d\u7684\u53ef\u7528\u5185\u5b58\uff0c\u52a8\u6001\u8c03\u6574\u53ef\u7528\u5185\u5b58\u3002 \u6ce8\u610f \uff1a\u6b64\u529f\u80fd\u4e3a\u5b9e\u9a8c\u6027\u529f\u80fd\uff0c\u7531\u4e8e\u52a8\u6001\u81ea\u9002\u5e94\u4e0d\u80fd\u505a\u5230\u5b9e\u65f6\u76d1\u63a7\u64cd\u4f5c\u7cfb\u7edf\u5185\u5b58\u4f7f\u7528\u60c5\u51b5\uff0c\u5728\u4e00\u4e9b\u5927\u5185\u5b58\u5206\u914d\u7684\u573a\u666f\uff0c\u8fd8\u662f\u4f1a\u5b58\u5728 OOM \u53ef\u80fd\u3002 3 \uff1a\u5173\u6389 Memory Tracker\uff0cMemory Tracker \u5c06\u53ea\u8bb0\u5f55\u5185\u5b58\u4f7f\u7528\u60c5\u51b5\uff0c\u5373\u4f7f\u8d85\u8fc7\u9650\u989d\uff0c\u4e5f\u4e0d\u4f1a\u5e72\u9884\u6267\u884c\u3002 \u652f\u6301 memory_tracker_untracked_reserved_memory_mb 50 \u4fdd\u7559\u5185\u5b58\u7684\u5927\u5c0f\uff0c\u5355\u4f4d\uff1aMB\u3002 \u652f\u6301 memory_tracker_detail_log false \u662f\u5426\u5b9a\u671f\u751f\u6210\u8f83\u8be6\u7ec6\u7684\u5185\u5b58\u8ddf\u8e2a\u65e5\u5fd7\u3002\u5f53\u503c\u4e3a true \u65f6\uff0c\u4f1a\u5b9a\u671f\u751f\u6210\u5185\u5b58\u8ddf\u8e2a\u65e5\u5fd7\u3002 \u652f\u6301 memory_tracker_detail_log_interval_ms 60000 \u5185\u5b58\u8ddf\u8e2a\u65e5\u5fd7\u7684\u751f\u6210\u65f6\u95f4\u95f4\u9694\uff0c\u5355\u4f4d\uff1a\u6beb\u79d2\u3002\u4ec5\u5f53 memory_tracker_detail_log \u4e3a true \u65f6\uff0c\u8be5\u53c2\u6570\u751f\u6548\u3002 \u652f\u6301 memory_purge_enabled true \u662f\u5426\u5b9a\u671f\u5f00\u542f\u5185\u5b58\u6e05\u7406\u529f\u80fd\u3002\u5f53\u503c\u4e3a true \u65f6\uff0c\u4f1a\u5b9a\u671f\u6e05\u7406\u5185\u5b58\u3002 \u652f\u6301 memory_purge_interval_seconds 10 \u5185\u5b58\u6e05\u7406\u7684\u65f6\u95f4\u95f4\u9694\uff0c\u5355\u4f4d\uff1a\u79d2\u3002 memory_purge_enabled \u4e3a true \u65f6\uff0c\u8be5\u53c2\u6570\u751f\u6548\u3002 \u652f\u6301 performance optimization \u914d\u7f6e \u00b6 \u540d\u79f0 \u9884\u8bbe\u503c \u8bf4\u660e \u662f\u5426\u652f\u6301\u8fd0\u884c\u65f6\u52a8\u6001\u4fee\u6539 max_job_size 1 \u6700\u5927\u4f5c\u4e1a\u5e76\u53d1\u6570\uff0c\u5373\u67e5\u8be2\u6267\u884c\u65f6\u5728\u53ef\u4ee5\u5e76\u53d1\u6267\u884c\u7684\u9636\u6bb5\u6240\u91c7\u7528\u7684\u6700\u5927\u7ebf\u7a0b\u6570\u3002\u5efa\u8bae\u4e3a\u7269\u7406 CPU \u6838\u6570\u7684\u4e00\u534a\u3002 \u652f\u6301 min_batch_size 8192 \u5904\u7406\u6570\u636e\u96c6\u7684\u6700\u5c0f\u6279\u5904\u7406\u5927\u5c0f\u3002\u4ec5\u5728 max_job_size \u5927\u4e8e 1 \u65f6\u751f\u6548\u3002 \u652f\u6301 optimize_appendvertices false \u542f\u7528\u540e\uff0c\u6267\u884c MATCH \u8bed\u53e5\u65f6\u4e0d\u8fc7\u6ee4\u60ac\u6302\u8fb9\u3002 \u652f\u6301 path_batch_size 10000 \u6bcf\u4e2a\u7ebf\u7a0b\u6784\u5efa\u7684\u8def\u5f84\u6570\u3002 \u652f\u6301","title":"Graph \u670d\u52a1\u914d\u7f6e"},{"location":"5.configurations-and-logs/1.configurations/3.graph-config/#graph","text":"Graph \u670d\u52a1\u63d0\u4f9b\u4e86\u4e24\u4efd\u521d\u59cb\u914d\u7f6e\u6587\u4ef6 nebula-graphd.conf.default \u548c nebula-graphd.conf.production \uff0c\u65b9\u4fbf\u5728\u4e0d\u540c\u573a\u666f\u4e2d\u4f7f\u7528\u3002\u6587\u4ef6\u7684\u9ed8\u8ba4\u8def\u5f84\u4e3a /usr/local/nebula/etc/ \u3002 Caution \u4e0d\u5efa\u8bae\u4fee\u6539 local_config \u7684\u503c\u4e3a false \u3002\u4fee\u6539\u540eNebulaGraph\u670d\u52a1\u542f\u52a8\u540e\u4f1a\u5148\u5c1d\u8bd5\u4ece Meta \u670d\u52a1\u83b7\u53d6\u7f13\u5b58\u7684\u914d\u7f6e\u4fe1\u606f\uff0c\u53ef\u80fd\u5bfc\u81f4\u96c6\u7fa4\u914d\u7f6e\u4e0d\u4e00\u81f4\uff0c\u9020\u6210\u672a\u77e5\u98ce\u9669\u3002 \u4e0d\u5efa\u8bae\u4fee\u6539\u6587\u6863\u672a\u4ecb\u7ecd\u7684\u914d\u7f6e\u9879\uff0c\u9664\u975e\u5df2\u7ecf\u719f\u6089\u6e90\u4ee3\u7801\u5e76\u5b8c\u5168\u4e86\u89e3\u914d\u7f6e\u9879\u7684\u4f5c\u7528\u3002","title":"Graph \u670d\u52a1\u914d\u7f6e"},{"location":"5.configurations-and-logs/1.configurations/3.graph-config/#_1","text":"\u5982\u9700\u4f7f\u7528\u521d\u59cb\u914d\u7f6e\u6587\u4ef6\uff0c\u4ece\u4e0a\u8ff0\u4e24\u4e2a\u6587\u4ef6\u9009\u62e9\u5176\u4e00\uff0c\u5220\u9664\u540e\u7f00 .default \u6216 .production \uff0cGraph \u670d\u52a1\u624d\u80fd\u5c06\u5176\u8bc6\u522b\u4e3a\u914d\u7f6e\u6587\u4ef6\u5e76\u4ece\u4e2d\u83b7\u53d6\u914d\u7f6e\u4fe1\u606f\u3002","title":"\u914d\u7f6e\u6587\u4ef6\u4f7f\u7528\u65b9\u5f0f"},{"location":"5.configurations-and-logs/1.configurations/3.graph-config/#_2","text":"\u914d\u7f6e\u6587\u4ef6\u5185\u6ca1\u6709\u8bbe\u7f6e\u67d0\u4e2a\u53c2\u6570\u8868\u793a\u53c2\u6570\u4f7f\u7528\u7684\u662f\u9ed8\u8ba4\u503c\u3002\u6587\u4ef6\u5185\u53ea\u9884\u8bbe\u4e86\u90e8\u5206\u53c2\u6570\u7684\u503c\uff0c\u800c\u4e14\u4e24\u4efd\u521d\u59cb\u914d\u7f6e\u6587\u4ef6\u5185\u7684\u53c2\u6570\u503c\u4e5f\u7565\u6709\u4e0d\u540c\uff0c\u672c\u6587\u7684\u9884\u8bbe\u503c\u4ee5 nebula-graphd.conf.default \u4e3a\u51c6\u3002 Caution \u914d\u7f6e\u6587\u4ef6\u4e2d\u7684\u90e8\u5206\u53c2\u6570\u503c\u53ef\u4ee5\u5728\u8fd0\u884c\u65f6\u52a8\u6001\u4fee\u6539\u3002\u672c\u6587\u5c06\u8fd9\u4e9b\u53c2\u6570\u6807\u8bb0\u4e3a\u652f\u6301\u8fd0\u884c\u65f6\u52a8\u6001\u4fee\u6539\uff0c\u5e76\u5f53 local_config \u503c\u8bbe\u7f6e\u4e3a true \u65f6\u91cd\u542f\u670d\u52a1\u540e\u914d\u7f6e\u4f1a\u6062\u590d\u4e3a\u521d\u59cb\u914d\u7f6e\u3002\u8be6\u60c5\u53c2\u89c1 \u4fee\u6539\u914d\u7f6e \u3002 \u5982\u9700\u67e5\u770b\u6240\u6709\u7684\u53c2\u6570\u53ca\u5176\u5f53\u524d\u503c\uff0c\u53c2\u89c1 \u914d\u7f6e\u7ba1\u7406 \u3002","title":"\u914d\u7f6e\u6587\u4ef6\u53c2\u6570\u503c\u8bf4\u660e"},{"location":"5.configurations-and-logs/1.configurations/3.graph-config/#basics","text":"\u540d\u79f0 \u9884\u8bbe\u503c \u8bf4\u660e \u662f\u5426\u652f\u6301\u8fd0\u884c\u65f6\u52a8\u6001\u4fee\u6539 daemonize true \u662f\u5426\u542f\u52a8\u5b88\u62a4\u8fdb\u7a0b\u3002 \u4e0d\u652f\u6301 pid_file pids/nebula-graphd.pid \u8bb0\u5f55\u8fdb\u7a0b ID \u7684\u6587\u4ef6\u3002 \u4e0d\u652f\u6301 enable_optimizer true \u662f\u5426\u542f\u7528\u4f18\u5316\u5668\u3002 \u4e0d\u652f\u6301 timezone_name - \u6307\u5b9aNebulaGraph\u7684\u65f6\u533a\u3002\u521d\u59cb\u914d\u7f6e\u6587\u4ef6\u4e2d\u672a\u8bbe\u7f6e\u8be5\u53c2\u6570\uff0c\u4f7f\u7528\u9700\u624b\u52a8\u6dfb\u52a0\u3002\u7cfb\u7edf\u9ed8\u8ba4\u503c\u4e3a UTC+00:00:00 \u3002\u683c\u5f0f\u8bf7\u53c2\u89c1 Specifying the Time Zone with TZ \u3002\u4f8b\u5982\uff0c\u4e1c\u516b\u533a\u7684\u8bbe\u7f6e\u65b9\u5f0f\u4e3a --timezone_name=UTC+08:00 \u3002 \u4e0d\u652f\u6301 local_config true \u662f\u5426\u4ece\u914d\u7f6e\u6587\u4ef6\u83b7\u53d6\u914d\u7f6e\u4fe1\u606f\u3002 \u4e0d\u652f\u6301 Note \u5728\u63d2\u5165 \u65f6\u95f4\u7c7b\u578b \u7684\u5c5e\u6027\u503c\u65f6\uff0cNebulaGraph\u4f1a\u6839\u636e timezone_name \u8bbe\u7f6e\u7684\u65f6\u533a\u5c06\u8be5\u65f6\u95f4\u503c\uff08TIMESTAMP \u7c7b\u578b\u4f8b\u5916\uff09\u8f6c\u6362\u6210\u76f8\u5e94\u7684 UTC \u65f6\u95f4\uff0c\u56e0\u6b64\u5728\u67e5\u8be2\u4e2d\u8fd4\u56de\u7684\u65f6\u95f4\u7c7b\u578b\u5c5e\u6027\u503c\u4e3a UTC \u65f6\u95f4\u3002 timezone_name \u53c2\u6570\u53ea\u7528\u4e8e\u8f6c\u6362NebulaGraph\u4e2d\u5b58\u50a8\u7684\u6570\u636e\uff0cNebulaGraph\u8fdb\u7a0b\u4e2d\u5176\u5b83\u65f6\u533a\u76f8\u5173\u6570\u636e\uff0c\u4f8b\u5982\u65e5\u5fd7\u6253\u5370\u7684\u65f6\u95f4\u7b49\uff0c\u4ecd\u7136\u4f7f\u7528\u4e3b\u673a\u7cfb\u7edf\u9ed8\u8ba4\u7684\u65f6\u533a\u3002","title":"basics \u914d\u7f6e"},{"location":"5.configurations-and-logs/1.configurations/3.graph-config/#logging","text":"\u540d\u79f0 \u9884\u8bbe\u503c \u8bf4\u660e \u662f\u5426\u652f\u6301\u8fd0\u884c\u65f6\u52a8\u6001\u4fee\u6539 log_dir logs \u5b58\u653e Graph \u670d\u52a1\u65e5\u5fd7\u7684\u76ee\u5f55\uff0c\u5efa\u8bae\u548c\u6570\u636e\u4fdd\u5b58\u5728\u4e0d\u540c\u786c\u76d8\u3002 \u4e0d\u652f\u6301 minloglevel 0 \u6700\u5c0f\u65e5\u5fd7\u7ea7\u522b\uff0c\u5373\u8bb0\u5f55\u6b64\u7ea7\u522b\u6216\u66f4\u9ad8\u7ea7\u522b\u7684\u65e5\u5fd7\u3002\u53ef\u9009\u503c\u4e3a 0 \uff08INFO\uff09\u3001 1 \uff08WARNING\uff09\u3001 2 \uff08ERROR\uff09\u3001 3 \uff08FATAL\uff09\u3002\u5efa\u8bae\u5728\u8c03\u8bd5\u65f6\u8bbe\u7f6e\u4e3a 0 \uff0c\u751f\u4ea7\u73af\u5883\u4e2d\u8bbe\u7f6e\u4e3a 1 \u3002\u5982\u679c\u8bbe\u7f6e\u4e3a 4 \uff0cNebulaGraph\u4e0d\u4f1a\u8bb0\u5f55\u4efb\u4f55\u65e5\u5fd7\u3002 \u652f\u6301 v 0 VLOG \u65e5\u5fd7\u8be6\u7ec6\u7ea7\u522b\uff0c\u5373\u8bb0\u5f55\u5c0f\u4e8e\u6216\u7b49\u4e8e\u6b64\u7ea7\u522b\u7684\u6240\u6709 VLOG \u6d88\u606f\u3002\u53ef\u9009\u503c\u4e3a 0 \u3001 1 \u3001 2 \u3001 3 \u3001 4 \u3001 5 \u3002glog \u63d0\u4f9b\u7684 VLOG \u5b8f\u5141\u8bb8\u7528\u6237\u5b9a\u4e49\u81ea\u5df1\u7684\u6570\u5b57\u65e5\u5fd7\u8bb0\u5f55\u7ea7\u522b\uff0c\u5e76\u7528\u53c2\u6570 v \u63a7\u5236\u8bb0\u5f55\u54ea\u4e9b\u8be6\u7ec6\u6d88\u606f\u3002\u8be6\u60c5\u53c2\u89c1 Verbose Logging \u3002 \u652f\u6301 logbufsecs 0 \u7f13\u51b2\u65e5\u5fd7\u7684\u6700\u5927\u65f6\u95f4\uff0c\u8d85\u65f6\u540e\u8f93\u51fa\u5230\u65e5\u5fd7\u6587\u4ef6\u3002 0 \u8868\u793a\u5b9e\u65f6\u8f93\u51fa\u3002\u5355\u4f4d\uff1a\u79d2\u3002 \u4e0d\u652f\u6301 redirect_stdout true \u662f\u5426\u5c06\u6807\u51c6\u8f93\u51fa\u548c\u6807\u51c6\u9519\u8bef\u91cd\u5b9a\u5411\u5230\u5355\u72ec\u7684\u8f93\u51fa\u6587\u4ef6\u3002 \u4e0d\u652f\u6301 stdout_log_file graphd-stdout.log \u6807\u51c6\u8f93\u51fa\u65e5\u5fd7\u6587\u4ef6\u540d\u79f0\u3002 \u4e0d\u652f\u6301 stderr_log_file graphd-stderr.log \u6807\u51c6\u9519\u8bef\u65e5\u5fd7\u6587\u4ef6\u540d\u79f0\u3002 \u4e0d\u652f\u6301 stderrthreshold 3 \u8981\u590d\u5236\u5230\u6807\u51c6\u9519\u8bef\u4e2d\u7684\u6700\u5c0f\u65e5\u5fd7\u7ea7\u522b\uff08 minloglevel \uff09\u3002 \u4e0d\u652f\u6301 timestamp_in_logfile_name true \u65e5\u5fd7\u6587\u4ef6\u540d\u79f0\u4e2d\u662f\u5426\u5305\u542b\u65f6\u95f4\u6233\u3002 true \u8868\u793a\u5305\u542b\uff0c false \u8868\u793a\u4e0d\u5305\u542b\u3002 \u4e0d\u652f\u6301","title":"logging \u914d\u7f6e"},{"location":"5.configurations-and-logs/1.configurations/3.graph-config/#query","text":"\u540d\u79f0 \u9884\u8bbe\u503c \u8bf4\u660e \u662f\u5426\u652f\u6301\u8fd0\u884c\u65f6\u52a8\u6001\u4fee\u6539 accept_partial_success false \u662f\u5426\u5c06\u90e8\u5206\u6210\u529f\u89c6\u4e3a\u9519\u8bef\u3002\u6b64\u914d\u7f6e\u4ec5\u9002\u7528\u4e8e\u53ea\u8bfb\u8bf7\u6c42\uff0c\u5199\u8bf7\u6c42\u603b\u662f\u5c06\u90e8\u5206\u6210\u529f\u89c6\u4e3a\u9519\u8bef\u3002\u67e5\u8be2\u90e8\u5206\u6210\u529f\u65f6\uff0c\u4f1a\u63d0\u793a Got partial result \u3002 \u652f\u6301 session_reclaim_interval_secs 60 \u5c06 Session \u4fe1\u606f\u53d1\u9001\u7ed9 Meta \u670d\u52a1\u7684\u95f4\u9694\u3002\u5355\u4f4d\uff1a\u79d2\u3002 \u652f\u6301 max_allowed_query_size 4194304 \u6700\u5927\u67e5\u8be2\u8bed\u53e5\u957f\u5ea6\u3002\u5355\u4f4d\uff1a\u5b57\u8282\u3002\u9ed8\u8ba4\u4e3a 4194304 \uff0c\u5373 4MB\u3002 \u652f\u6301","title":"query \u914d\u7f6e"},{"location":"5.configurations-and-logs/1.configurations/3.graph-config/#networking","text":"\u540d\u79f0 \u9884\u8bbe\u503c \u8bf4\u660e \u662f\u5426\u652f\u6301\u8fd0\u884c\u65f6\u52a8\u6001\u4fee\u6539 meta_server_addrs 127.0.0.1:9559 \u5168\u90e8 Meta \u670d\u52a1\u7684 IP \u5730\u5740\u548c\u7aef\u53e3\u3002\u591a\u4e2a Meta \u670d\u52a1\u7528\u82f1\u6587\u9017\u53f7\uff08,\uff09\u5206\u9694\u3002 \u4e0d\u652f\u6301 local_ip 127.0.0.1 Graph \u670d\u52a1\u7684\u672c\u5730 IP \u5730\u5740\u3002\u672c\u5730 IP \u5730\u5740\u7528\u4e8e\u8bc6\u522b nebula-graphd \u8fdb\u7a0b\uff0c\u5982\u679c\u662f\u5206\u5e03\u5f0f\u96c6\u7fa4\u6216\u9700\u8981\u8fdc\u7a0b\u8bbf\u95ee\uff0c\u8bf7\u4fee\u6539\u4e3a\u5bf9\u5e94\u5730\u5740\u3002 \u4e0d\u652f\u6301 listen_netdev any \u76d1\u542c\u7684\u7f51\u7edc\u8bbe\u5907\u3002 \u4e0d\u652f\u6301 port 9669 Graph \u670d\u52a1\u7684 RPC \u5b88\u62a4\u8fdb\u7a0b\u76d1\u542c\u7aef\u53e3\u3002 \u4e0d\u652f\u6301 reuse_port false \u662f\u5426\u542f\u7528 SO_REUSEPORT\u3002 \u4e0d\u652f\u6301 listen_backlog 1024 socket \u76d1\u542c\u7684\u8fde\u63a5\u961f\u5217\u6700\u5927\u957f\u5ea6\uff0c\u8c03\u6574\u672c\u53c2\u6570\u9700\u8981\u540c\u65f6\u8c03\u6574 net.core.somaxconn \u3002 \u4e0d\u652f\u6301 client_idle_timeout_secs 28800 \u7a7a\u95f2\u8fde\u63a5\u7684\u8d85\u65f6\u65f6\u95f4\u3002\u53d6\u503c\u8303\u56f4\u4e3a 1~604800\uff0c\u5355\u4f4d\uff1a\u79d2\u3002\u9ed8\u8ba4 8 \u5c0f\u65f6\u3002 \u4e0d\u652f\u6301 session_idle_timeout_secs 28800 \u7a7a\u95f2\u4f1a\u8bdd\u7684\u8d85\u65f6\u65f6\u95f4\u3002\u53d6\u503c\u8303\u56f4\u4e3a 1~604800\u3002\u9ed8\u8ba4 8 \u5c0f\u65f6\u3002\u5355\u4f4d\uff1a\u79d2\u3002 \u4e0d\u652f\u6301 num_accept_threads 1 \u63a5\u53d7\u4f20\u5165\u8fde\u63a5\u7684\u7ebf\u7a0b\u6570\u3002 \u4e0d\u652f\u6301 num_netio_threads 0 \u7f51\u7edc IO \u7ebf\u7a0b\u6570\u3002 0 \u8868\u793a CPU \u6838\u6570\u3002 \u4e0d\u652f\u6301 num_max_connections 0 \u6240\u6709\u7f51\u7edc\u7ebf\u7a0b\u7684\u6700\u5927\u6d3b\u52a8\u8fde\u63a5\u6570\uff0c 0 \u8868\u793a\u6ca1\u6709\u9650\u5236\u3002 \u6bcf\u4e2a\u7f51\u7edc\u7ebf\u7a0b\u7684\u6700\u5927\u8fde\u63a5\u6570= num_max_connections / num_netio_threads \u3002 \u4e0d\u652f\u6301 num_worker_threads 0 \u6267\u884c\u7528\u6237\u67e5\u8be2\u7684\u7ebf\u7a0b\u6570\u3002 0 \u8868\u793a CPU \u6838\u6570\u3002 \u4e0d\u652f\u6301 ws_ip 0.0.0.0 HTTP \u670d\u52a1\u7684 IP \u5730\u5740\u3002 \u4e0d\u652f\u6301 ws_http_port 19669 HTTP \u670d\u52a1\u7684\u7aef\u53e3\u3002 \u4e0d\u652f\u6301 heartbeat_interval_secs 10 \u9ed8\u8ba4\u5fc3\u8df3\u95f4\u9694\u3002\u8bf7\u786e\u4fdd\u6240\u6709\u670d\u52a1\u7684 heartbeat_interval_secs \u53d6\u503c\u76f8\u540c\uff0c\u5426\u5219\u4f1a\u5bfc\u81f4\u7cfb\u7edf\u65e0\u6cd5\u6b63\u5e38\u5de5\u4f5c\u3002\u5355\u4f4d\uff1a\u79d2\u3002 \u652f\u6301 storage_client_timeout_ms - Graph \u670d\u52a1\u4e0e Storage \u670d\u52a1\u7684 RPC \u8fde\u63a5\u8d85\u65f6\u65f6\u95f4\u3002\u521d\u59cb\u914d\u7f6e\u6587\u4ef6\u4e2d\u672a\u8bbe\u7f6e\u8be5\u53c2\u6570\uff0c\u4f7f\u7528\u9700\u624b\u52a8\u6dfb\u52a0\u3002\u9ed8\u8ba4\u503c\u4e3a 60000 \u6beb\u79d2\u3002 \u4e0d\u652f\u6301 slow_query_threshold_us 200000 \u5b9a\u4e49\u8d85\u8fc7\u591a\u957f\u65f6\u95f4\u7684\u67e5\u8be2\u4e3a\u6162\u67e5\u8be2\u3002\u5355\u4f4d\uff1a\u5fae\u79d2\u3002 \u6ce8\u610f \uff1aDML \u8bed\u53e5\u7684\u6267\u884c\u65f6\u95f4\u5373\u4f7f\u8d85\u8fc7\u8be5\u503c\uff0c\u4e5f\u4e0d\u4f1a\u88ab\u8bb0\u5f55\u4e3a\u6162\u67e5\u8be2\u3002 \u4e0d\u652f\u6301 ws_meta_http_port 19559 HTTP \u534f\u8bae\u76d1\u542c Meta \u670d\u52a1\u7684\u7aef\u53e3\uff0c\u9700\u8981\u548c Meta \u670d\u52a1\u914d\u7f6e\u6587\u4ef6\u4e2d\u7684 ws_http_port \u4fdd\u6301\u4e00\u81f4\u3002 \u4e0d\u652f\u6301 Caution \u5fc5\u987b\u5728\u914d\u7f6e\u6587\u4ef6\u4e2d\u4f7f\u7528\u771f\u5b9e\u7684 IP \u5730\u5740\u3002\u5426\u5219\u67d0\u4e9b\u60c5\u51b5\u4e0b 127.0.0.1/0.0.0.0 \u65e0\u6cd5\u6b63\u786e\u89e3\u6790\u3002","title":"networking \u914d\u7f6e"},{"location":"5.configurations-and-logs/1.configurations/3.graph-config/#charset_and_collate","text":"\u540d\u79f0 \u9884\u8bbe\u503c \u8bf4\u660e \u662f\u5426\u652f\u6301\u8fd0\u884c\u65f6\u52a8\u6001\u4fee\u6539 default_charset utf8 \u521b\u5efa\u56fe\u7a7a\u95f4\u65f6\u7684\u9ed8\u8ba4\u5b57\u7b26\u96c6\u3002 \u4e0d\u652f\u6301 default_collate utf8_bin \u521b\u5efa\u56fe\u7a7a\u95f4\u65f6\u7684\u9ed8\u8ba4\u6392\u5e8f\u89c4\u5219\u3002 \u4e0d\u652f\u6301","title":"charset and collate \u914d\u7f6e"},{"location":"5.configurations-and-logs/1.configurations/3.graph-config/#authorization","text":"\u540d\u79f0 \u9884\u8bbe\u503c \u8bf4\u660e \u662f\u5426\u652f\u6301\u8fd0\u884c\u65f6\u52a8\u6001\u4fee\u6539 enable_authorize false \u7528\u6237\u767b\u5f55\u65f6\u662f\u5426\u8fdb\u884c\u8eab\u4efd\u9a8c\u8bc1\u3002\u8eab\u4efd\u9a8c\u8bc1\u8be6\u60c5\u8bf7\u53c2\u89c1 \u8eab\u4efd\u9a8c\u8bc1 \u3002 \u4e0d\u652f\u6301 auth_type password \u7528\u6237\u767b\u5f55\u7684\u8eab\u4efd\u9a8c\u8bc1\u65b9\u5f0f\u3002\u53d6\u503c\u4e3a password \u3001 ldap \u3001 cloud \u3002 \u4e0d\u652f\u6301","title":"authorization \u914d\u7f6e"},{"location":"5.configurations-and-logs/1.configurations/3.graph-config/#memory","text":"\u540d\u79f0 \u9884\u8bbe\u503c \u8bf4\u660e \u662f\u5426\u652f\u6301\u8fd0\u884c\u65f6\u52a8\u6001\u4fee\u6539 system_memory_high_watermark_ratio 0.8 \u5185\u5b58\u9ad8\u6c34\u4f4d\u62a5\u8b66\u673a\u5236\u7684\u89e6\u53d1\u9608\u503c\u3002\u7cfb\u7edf\u5185\u5b58\u5360\u7528\u7387\u9ad8\u4e8e\u8be5\u503c\u4f1a\u89e6\u53d1\u62a5\u8b66\u673a\u5236\uff0cNebulaGraph\u4f1a\u505c\u6b62\u63a5\u53d7\u67e5\u8be2\u3002 \u652f\u6301","title":"memory \u914d\u7f6e"},{"location":"5.configurations-and-logs/1.configurations/3.graph-config/#metrics","text":"\u540d\u79f0 \u9884\u8bbe\u503c \u8bf4\u660e \u662f\u5426\u652f\u6301\u8fd0\u884c\u65f6\u52a8\u6001\u4fee\u6539 enable_space_level_metrics false \u5f00\u542f\u540e\u53ef\u6253\u5f00\u56fe\u7a7a\u95f4\u7ea7\u522b\u7684\u76d1\u63a7\uff0c\u5bf9\u5e94\u7684\u76d1\u63a7\u6307\u6807\u540d\u79f0\u4e2d\u5305\u542b\u56fe\u7a7a\u95f4\u7684\u540d\u79f0\uff0c\u4f8b\u5982 query_latency_us{space=basketballplayer}.avg.3600 \u3002\u652f\u6301\u7684\u76d1\u63a7\u6307\u6807\u53ef\u7528 curl \u547d\u4ee4\u67e5\u770b\uff0c\u8be6\u7ec6\u8bf4\u660e\u53c2\u89c1 \u67e5\u8be2\u76d1\u63a7\u6307\u6807 \u3002 \u4e0d\u652f\u6301","title":"metrics \u914d\u7f6e"},{"location":"5.configurations-and-logs/1.configurations/3.graph-config/#session","text":"\u540d\u79f0 \u9884\u8bbe\u503c \u8bf4\u660e \u662f\u5426\u652f\u6301\u8fd0\u884c\u65f6\u52a8\u6001\u4fee\u6539 max_sessions_per_ip_per_user 300 \u76f8\u540c\u7528\u6237\u548c IP \u5730\u5740\u53ef\u4ee5\u521b\u5efa\u7684\u6700\u5927\u6d3b\u8dc3\u4f1a\u8bdd\u6570\u3002 \u4e0d\u652f\u6301","title":"session \u914d\u7f6e"},{"location":"5.configurations-and-logs/1.configurations/3.graph-config/#experimental","text":"\u540d\u79f0 \u9884\u8bbe\u503c \u8bf4\u660e \u662f\u5426\u652f\u6301\u8fd0\u884c\u65f6\u52a8\u6001\u4fee\u6539 enable_experimental_feature false \u5b9e\u9a8c\u6027\u529f\u80fd\u5f00\u5173\u3002\u53ef\u9009\u503c\u4e3a true \u548c false \u3002 \u4e0d\u652f\u6301 enable_data_balance true \u662f\u5426\u5f00\u542f \u5747\u8861\u5206\u7247 \u529f\u80fd\u3002\u4ec5\u5f53 enable_experimental_feature \u4e3a true \u65f6\u751f\u6548\u3002 \u4e0d\u652f\u6301","title":"experimental \u914d\u7f6e"},{"location":"5.configurations-and-logs/1.configurations/3.graph-config/#memory_tracker","text":"\u6709\u5173 Memory Tracker \u7684\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u89c1 \u56fe\u6570\u636e\u5e93 NebulaGraph \u7684\u5185\u5b58\u7ba1\u7406\u5b9e\u8df5\u4e4b Memory Tracker \u3002 \u540d\u79f0 \u9884\u8bbe\u503c \u8bf4\u660e \u662f\u5426\u652f\u6301\u8fd0\u884c\u65f6\u52a8\u6001\u4fee\u6539 memory_tracker_limit_ratio 0.8 \u53d6\u503c\u53ef\u8bbe\u7f6e\u4e3a\uff1a (0, 1] \u3001 2 \u3001 3 \u3002 \u8b66\u60d5\uff1a\u8bbe\u7f6e\u8be5\u53c2\u6570\u65f6\u8bf7\u786e\u4fdd system_memory_high_watermark_ratio \u7684\u503c\u4e0d\u4e3a 1 \uff0c\u5426\u5219\u8be5\u53c2\u6570\u7684\u503c\u4e0d\u751f\u6548\u3002 (0, 1] \uff1a\u53ef\u7528\u5185\u5b58\u7684\u767e\u5206\u6bd4\uff0c\u5f53\u53ef\u7528\u5185\u5b58\u4f4e\u4e8e\u8be5\u503c\u65f6\uff0cNebulaGraph\u4f1a\u505c\u6b62\u63a5\u53d7\u67e5\u8be2\u3002 \u8ba1\u7b97\u516c\u5f0f\uff1a\u53ef\u7528\u5185\u5b58/(\u603b\u5185\u5b58 - \u4fdd\u7559\u5185\u5b58)\u3002 \u6ce8\u610f \uff1a\u5bf9\u4e8e\u6df7\u5408\u90e8\u7f72\u7684\u96c6\u7fa4\uff0c\u9700\u8981\u6839\u636e\u5b9e\u9645\u60c5\u51b5 \u8c03\u5c0f \u8be5\u53c2\u6570\u3002\u4f8b\u5982\uff0c\u5f53\u9884\u671f Graphd \u53ea\u5360\u7528 50% \u7684\u5185\u5b58\u65f6\uff0c\u8be5\u53c2\u6570\u7684\u503c\u53ef\u8bbe\u7f6e\u4e3a\u5c0f\u4e8e 0.5 \u3002 2 \uff1a\u52a8\u6001\u81ea\u9002\u5e94\u6a21\u5f0f\uff08Dynamic Self Adaptive\uff09\uff0cMemory Tracker \u4f1a\u6839\u636e\u7cfb\u7edf\u5f53\u524d\u7684\u53ef\u7528\u5185\u5b58\uff0c\u52a8\u6001\u8c03\u6574\u53ef\u7528\u5185\u5b58\u3002 \u6ce8\u610f \uff1a\u6b64\u529f\u80fd\u4e3a\u5b9e\u9a8c\u6027\u529f\u80fd\uff0c\u7531\u4e8e\u52a8\u6001\u81ea\u9002\u5e94\u4e0d\u80fd\u505a\u5230\u5b9e\u65f6\u76d1\u63a7\u64cd\u4f5c\u7cfb\u7edf\u5185\u5b58\u4f7f\u7528\u60c5\u51b5\uff0c\u5728\u4e00\u4e9b\u5927\u5185\u5b58\u5206\u914d\u7684\u573a\u666f\uff0c\u8fd8\u662f\u4f1a\u5b58\u5728 OOM \u53ef\u80fd\u3002 3 \uff1a\u5173\u6389 Memory Tracker\uff0cMemory Tracker \u5c06\u53ea\u8bb0\u5f55\u5185\u5b58\u4f7f\u7528\u60c5\u51b5\uff0c\u5373\u4f7f\u8d85\u8fc7\u9650\u989d\uff0c\u4e5f\u4e0d\u4f1a\u5e72\u9884\u6267\u884c\u3002 \u652f\u6301 memory_tracker_untracked_reserved_memory_mb 50 \u4fdd\u7559\u5185\u5b58\u7684\u5927\u5c0f\uff0c\u5355\u4f4d\uff1aMB\u3002 \u652f\u6301 memory_tracker_detail_log false \u662f\u5426\u5b9a\u671f\u751f\u6210\u8f83\u8be6\u7ec6\u7684\u5185\u5b58\u8ddf\u8e2a\u65e5\u5fd7\u3002\u5f53\u503c\u4e3a true \u65f6\uff0c\u4f1a\u5b9a\u671f\u751f\u6210\u5185\u5b58\u8ddf\u8e2a\u65e5\u5fd7\u3002 \u652f\u6301 memory_tracker_detail_log_interval_ms 60000 \u5185\u5b58\u8ddf\u8e2a\u65e5\u5fd7\u7684\u751f\u6210\u65f6\u95f4\u95f4\u9694\uff0c\u5355\u4f4d\uff1a\u6beb\u79d2\u3002\u4ec5\u5f53 memory_tracker_detail_log \u4e3a true \u65f6\uff0c\u8be5\u53c2\u6570\u751f\u6548\u3002 \u652f\u6301 memory_purge_enabled true \u662f\u5426\u5b9a\u671f\u5f00\u542f\u5185\u5b58\u6e05\u7406\u529f\u80fd\u3002\u5f53\u503c\u4e3a true \u65f6\uff0c\u4f1a\u5b9a\u671f\u6e05\u7406\u5185\u5b58\u3002 \u652f\u6301 memory_purge_interval_seconds 10 \u5185\u5b58\u6e05\u7406\u7684\u65f6\u95f4\u95f4\u9694\uff0c\u5355\u4f4d\uff1a\u79d2\u3002 memory_purge_enabled \u4e3a true \u65f6\uff0c\u8be5\u53c2\u6570\u751f\u6548\u3002 \u652f\u6301","title":"memory tracker \u914d\u7f6e"},{"location":"5.configurations-and-logs/1.configurations/3.graph-config/#performance_optimization","text":"\u540d\u79f0 \u9884\u8bbe\u503c \u8bf4\u660e \u662f\u5426\u652f\u6301\u8fd0\u884c\u65f6\u52a8\u6001\u4fee\u6539 max_job_size 1 \u6700\u5927\u4f5c\u4e1a\u5e76\u53d1\u6570\uff0c\u5373\u67e5\u8be2\u6267\u884c\u65f6\u5728\u53ef\u4ee5\u5e76\u53d1\u6267\u884c\u7684\u9636\u6bb5\u6240\u91c7\u7528\u7684\u6700\u5927\u7ebf\u7a0b\u6570\u3002\u5efa\u8bae\u4e3a\u7269\u7406 CPU \u6838\u6570\u7684\u4e00\u534a\u3002 \u652f\u6301 min_batch_size 8192 \u5904\u7406\u6570\u636e\u96c6\u7684\u6700\u5c0f\u6279\u5904\u7406\u5927\u5c0f\u3002\u4ec5\u5728 max_job_size \u5927\u4e8e 1 \u65f6\u751f\u6548\u3002 \u652f\u6301 optimize_appendvertices false \u542f\u7528\u540e\uff0c\u6267\u884c MATCH \u8bed\u53e5\u65f6\u4e0d\u8fc7\u6ee4\u60ac\u6302\u8fb9\u3002 \u652f\u6301 path_batch_size 10000 \u6bcf\u4e2a\u7ebf\u7a0b\u6784\u5efa\u7684\u8def\u5f84\u6570\u3002 \u652f\u6301","title":"performance optimization \u914d\u7f6e"},{"location":"5.configurations-and-logs/1.configurations/4.storage-config/","text":"Storage \u670d\u52a1\u914d\u7f6e \u00b6 Storage \u670d\u52a1\u63d0\u4f9b\u4e86\u4e24\u4efd\u521d\u59cb\u914d\u7f6e\u6587\u4ef6 nebula-storaged.conf.default \u548c nebula-storaged.conf.production \uff0c\u65b9\u4fbf\u5728\u4e0d\u540c\u573a\u666f\u4e2d\u4f7f\u7528\u3002\u6587\u4ef6\u7684\u9ed8\u8ba4\u8def\u5f84\u4e3a /usr/local/nebula/etc/ \u3002 Caution \u4e0d\u5efa\u8bae\u4fee\u6539 local_config \u7684\u503c\u4e3a false \u3002\u4fee\u6539\u914d\u7f6e\u5e76\u91cd\u542f Storage \u670d\u52a1\uff0c\u4f1a\u5148\u5c1d\u8bd5\u4ece Meta \u670d\u52a1\u83b7\u53d6\u7f13\u5b58\u7684\u914d\u7f6e\u4fe1\u606f\uff0c\u53ef\u80fd\u5bfc\u81f4\u96c6\u7fa4\u914d\u7f6e\u4e0d\u4e00\u81f4\uff0c\u9020\u6210\u672a\u77e5\u98ce\u9669\u3002 \u4e0d\u5efa\u8bae\u4fee\u6539\u6587\u6863\u672a\u4ecb\u7ecd\u7684\u914d\u7f6e\u9879\uff0c\u9664\u975e\u5df2\u7ecf\u719f\u6089\u6e90\u4ee3\u7801\u5e76\u5b8c\u5168\u4e86\u89e3\u914d\u7f6e\u9879\u7684\u4f5c\u7528\u3002 \u914d\u7f6e\u6587\u4ef6\u4f7f\u7528\u65b9\u5f0f \u00b6 \u5982\u9700\u4f7f\u7528\u521d\u59cb\u914d\u7f6e\u6587\u4ef6\uff0c\u4ece\u4e0a\u8ff0\u4e24\u4e2a\u6587\u4ef6\u9009\u62e9\u5176\u4e00\uff0c\u5220\u9664\u540e\u7f00 .default \u6216 .production \uff0cStorage \u670d\u52a1\u624d\u80fd\u5c06\u5176\u8bc6\u522b\u4e3a\u914d\u7f6e\u6587\u4ef6\u5e76\u4ece\u4e2d\u83b7\u53d6\u914d\u7f6e\u4fe1\u606f\u3002 \u914d\u7f6e\u6587\u4ef6\u53c2\u6570\u503c\u8bf4\u660e \u00b6 \u914d\u7f6e\u6587\u4ef6\u5185\u6ca1\u6709\u8bbe\u7f6e\u67d0\u4e2a\u53c2\u6570\u8868\u793a\u53c2\u6570\u4f7f\u7528\u7684\u662f\u9ed8\u8ba4\u503c\u3002\u6587\u4ef6\u5185\u53ea\u9884\u8bbe\u4e86\u90e8\u5206\u53c2\u6570\u7684\u503c\uff0c\u800c\u4e14\u4e24\u4efd\u521d\u59cb\u914d\u7f6e\u6587\u4ef6\u5185\u7684\u53c2\u6570\u503c\u4e5f\u7565\u6709\u4e0d\u540c\uff0c\u672c\u6587\u7684\u9884\u8bbe\u503c\u4ee5 nebula-storaged.conf.default \u6587\u4ef6\u4e3a\u51c6\uff0c\u5176\u4e2d\u6ca1\u6709\u7684\u53c2\u6570\u5219\u4ee5 nebula-storaged.conf.production \u6587\u4ef6\u4e3a\u51c6\u3002 Caution \u914d\u7f6e\u6587\u4ef6\u4e2d\u7684\u90e8\u5206\u53c2\u6570\u503c\u53ef\u4ee5\u5728\u8fd0\u884c\u65f6\u52a8\u6001\u4fee\u6539\u3002\u672c\u6587\u5c06\u8fd9\u4e9b\u53c2\u6570\u6807\u8bb0\u4e3a\u652f\u6301\u8fd0\u884c\u65f6\u52a8\u6001\u4fee\u6539\uff0c\u5e76\u5f53 local_config \u503c\u8bbe\u7f6e\u4e3a true \u65f6\u91cd\u542f\u670d\u52a1\u540e\u914d\u7f6e\u4f1a\u6062\u590d\u4e3a\u521d\u59cb\u914d\u7f6e\u3002\u8be6\u60c5\u53c2\u89c1 \u4fee\u6539\u914d\u7f6e \u3002 Note Raft Listener \u7684\u914d\u7f6e\u548c Storage \u670d\u52a1\u914d\u7f6e\u4e0d\u540c\uff0c\u8be6\u60c5\u8bf7\u53c2\u89c1 \u90e8\u7f72 Raft listener \u3002 \u5982\u9700\u67e5\u770b\u6240\u6709\u7684\u53c2\u6570\u53ca\u5176\u5f53\u524d\u503c\uff0c\u53c2\u89c1 \u914d\u7f6e\u7ba1\u7406 \u3002 basics \u914d\u7f6e \u00b6 \u540d\u79f0 \u9884\u8bbe\u503c \u8bf4\u660e \u662f\u5426\u652f\u6301\u8fd0\u884c\u65f6\u52a8\u6001\u4fee\u6539 daemonize true \u662f\u5426\u542f\u52a8\u5b88\u62a4\u8fdb\u7a0b\u3002 \u4e0d\u652f\u6301 pid_file pids/nebula-storaged.pid \u8bb0\u5f55\u8fdb\u7a0b ID \u7684\u6587\u4ef6\u3002 \u4e0d\u652f\u6301 timezone_name UTC+00:00:00 \u6307\u5b9aNebulaGraph\u7684\u65f6\u533a\u3002\u521d\u59cb\u914d\u7f6e\u6587\u4ef6\u4e2d\u672a\u8bbe\u7f6e\u8be5\u53c2\u6570\uff0c\u5982\u9700\u4f7f\u7528\u8bf7\u624b\u52a8\u6dfb\u52a0\u3002\u683c\u5f0f\u8bf7\u53c2\u89c1 Specifying the Time Zone with TZ \u3002\u4f8b\u5982\uff0c\u4e1c\u516b\u533a\u7684\u8bbe\u7f6e\u65b9\u5f0f\u4e3a --timezone_name=UTC+08:00 \u3002 \u4e0d\u652f\u6301 local_config true \u662f\u5426\u4ece\u914d\u7f6e\u6587\u4ef6\u83b7\u53d6\u914d\u7f6e\u4fe1\u606f\u3002 \u4e0d\u652f\u6301 Note \u5728\u63d2\u5165 \u65f6\u95f4\u7c7b\u578b \u7684\u5c5e\u6027\u503c\u65f6\uff0cNebulaGraph\u4f1a\u6839\u636e timezone_name \u8bbe\u7f6e\u7684\u65f6\u533a\u5c06\u8be5\u65f6\u95f4\u503c\uff08TIMESTAMP \u7c7b\u578b\u4f8b\u5916\uff09\u8f6c\u6362\u6210\u76f8\u5e94\u7684 UTC \u65f6\u95f4\uff0c\u56e0\u6b64\u5728\u67e5\u8be2\u4e2d\u8fd4\u56de\u7684\u65f6\u95f4\u7c7b\u578b\u5c5e\u6027\u503c\u4e3a UTC \u65f6\u95f4\u3002 timezone_name \u53c2\u6570\u53ea\u7528\u4e8e\u8f6c\u6362NebulaGraph\u4e2d\u5b58\u50a8\u7684\u6570\u636e\uff0cNebulaGraph\u8fdb\u7a0b\u4e2d\u5176\u5b83\u65f6\u533a\u76f8\u5173\u6570\u636e\uff0c\u4f8b\u5982\u65e5\u5fd7\u6253\u5370\u7684\u65f6\u95f4\u7b49\uff0c\u4ecd\u7136\u4f7f\u7528\u4e3b\u673a\u7cfb\u7edf\u9ed8\u8ba4\u7684\u65f6\u533a\u3002 logging \u914d\u7f6e \u00b6 \u540d\u79f0 \u9884\u8bbe\u503c \u8bf4\u660e \u662f\u5426\u652f\u6301\u8fd0\u884c\u65f6\u52a8\u6001\u4fee\u6539 log_dir logs \u5b58\u653e Storage \u670d\u52a1\u65e5\u5fd7\u7684\u76ee\u5f55\uff0c\u5efa\u8bae\u548c\u6570\u636e\u4fdd\u5b58\u5728\u4e0d\u540c\u786c\u76d8\u3002 \u4e0d\u652f\u6301 minloglevel 0 \u6700\u5c0f\u65e5\u5fd7\u7ea7\u522b\uff0c\u5373\u8bb0\u5f55\u6b64\u7ea7\u522b\u6216\u66f4\u9ad8\u7ea7\u522b\u7684\u65e5\u5fd7\u3002\u53ef\u9009\u503c\uff1a 0 \uff08INFO\uff09\u3001 1 \uff08WARNING\uff09\u3001 2 \uff08ERROR\uff09\u3001 3 \uff08FATAL\uff09\u3002\u5efa\u8bae\u5728\u8c03\u8bd5\u65f6\u8bbe\u7f6e\u4e3a 0 \uff0c\u751f\u4ea7\u73af\u5883\u4e2d\u8bbe\u7f6e\u4e3a 1 \u3002\u5982\u679c\u8bbe\u7f6e\u4e3a 4 \uff0cNebulaGraph\u4e0d\u4f1a\u8bb0\u5f55\u4efb\u4f55\u65e5\u5fd7\u3002 \u652f\u6301 v 0 VLOG \u65e5\u5fd7\u8be6\u7ec6\u7ea7\u522b\uff0c\u5373\u8bb0\u5f55\u5c0f\u4e8e\u6216\u7b49\u4e8e\u6b64\u7ea7\u522b\u7684\u6240\u6709 VLOG \u6d88\u606f\u3002\u53ef\u9009\u503c\u4e3a 0 \u3001 1 \u3001 2 \u3001 3 \u3001 4 \u3001 5 \u3002glog \u63d0\u4f9b\u7684 VLOG \u5b8f\u5141\u8bb8\u7528\u6237\u5b9a\u4e49\u81ea\u5df1\u7684\u6570\u5b57\u65e5\u5fd7\u8bb0\u5f55\u7ea7\u522b\uff0c\u5e76\u7528\u53c2\u6570 v \u63a7\u5236\u8bb0\u5f55\u54ea\u4e9b\u8be6\u7ec6\u6d88\u606f\u3002\u8be6\u60c5\u53c2\u89c1 Verbose Logging \u3002 \u652f\u6301 logbufsecs 0 \u7f13\u51b2\u65e5\u5fd7\u7684\u6700\u5927\u65f6\u95f4\uff0c\u8d85\u65f6\u540e\u8f93\u51fa\u5230\u65e5\u5fd7\u6587\u4ef6\u3002 0 \u8868\u793a\u5b9e\u65f6\u8f93\u51fa\u3002\u5355\u4f4d\uff1a\u79d2\u3002 \u4e0d\u652f\u6301 redirect_stdout true \u662f\u5426\u5c06\u6807\u51c6\u8f93\u51fa\u548c\u6807\u51c6\u9519\u8bef\u91cd\u5b9a\u5411\u5230\u5355\u72ec\u7684\u8f93\u51fa\u6587\u4ef6\u3002 \u4e0d\u652f\u6301 stdout_log_file storaged-stdout.log \u6807\u51c6\u8f93\u51fa\u65e5\u5fd7\u6587\u4ef6\u540d\u79f0\u3002 \u4e0d\u652f\u6301 stderr_log_file storaged-stderr.log \u6807\u51c6\u9519\u8bef\u65e5\u5fd7\u6587\u4ef6\u540d\u79f0\u3002 \u4e0d\u652f\u6301 stderrthreshold 3 \u8981\u590d\u5236\u5230\u6807\u51c6\u9519\u8bef\u4e2d\u7684\u6700\u5c0f\u65e5\u5fd7\u7ea7\u522b\uff08 minloglevel \uff09\u3002 \u4e0d\u652f\u6301 timestamp_in_logfile_name true \u65e5\u5fd7\u6587\u4ef6\u540d\u79f0\u4e2d\u662f\u5426\u5305\u542b\u65f6\u95f4\u6233\u3002 true \u8868\u793a\u5305\u542b\uff0c false \u8868\u793a\u4e0d\u5305\u542b\u3002 \u4e0d\u652f\u6301 networking \u914d\u7f6e \u00b6 \u540d\u79f0 \u9884\u8bbe\u503c \u8bf4\u660e \u662f\u5426\u652f\u6301\u8fd0\u884c\u65f6\u52a8\u6001\u4fee\u6539 meta_server_addrs 127.0.0.1:9559 \u5168\u90e8 Meta \u670d\u52a1\u7684 IP \u5730\u5740\u548c\u7aef\u53e3\u3002\u591a\u4e2a Meta \u670d\u52a1\u7528\u82f1\u6587\u9017\u53f7\uff08,\uff09\u5206\u9694\u3002 \u4e0d\u652f\u6301 local_ip 127.0.0.1 Storage \u670d\u52a1\u7684\u672c\u5730 IP \u5730\u5740\u3002\u672c\u5730 IP \u5730\u5740\u7528\u4e8e\u8bc6\u522b nebula-storaged \u8fdb\u7a0b\uff0c\u5982\u679c\u662f\u5206\u5e03\u5f0f\u96c6\u7fa4\u6216\u9700\u8981\u8fdc\u7a0b\u8bbf\u95ee\uff0c\u8bf7\u4fee\u6539\u4e3a\u5bf9\u5e94\u5730\u5740\u3002 \u4e0d\u652f\u6301 port 9779 Storage \u670d\u52a1\u7684 RPC \u5b88\u62a4\u8fdb\u7a0b\u76d1\u542c\u7aef\u53e3\u3002Storage \u670d\u52a1\u5bf9\u5916\u7aef\u53e3\u4e3a 9779 \uff0c\u5bf9\u5185\u7aef\u53e3\u4e3a 9777 \u3001 9778 \u548c 9780 \uff0cNebulaGraph\u4f7f\u7528\u5185\u90e8\u7aef\u53e3\u8fdb\u884c\u591a\u526f\u672c\u95f4\u7684\u4ea4\u4e92\u3002 9778 \uff1aAdmin \u670d\u52a1\uff08Storage \u63a5\u6536 Meta \u547d\u4ee4\u7684\u670d\u52a1\uff09\u5360\u7528\u7684\u7aef\u53e3\uff1b 9780 \uff1aRaft \u901a\u4fe1\u7aef\u53e3\u3002 \u4e0d\u652f\u6301 ws_ip 0.0.0.0 HTTP \u670d\u52a1\u7684 IP \u5730\u5740\u3002 \u4e0d\u652f\u6301 ws_http_port 19779 HTTP \u670d\u52a1\u7684\u7aef\u53e3\u3002 \u4e0d\u652f\u6301 heartbeat_interval_secs 10 \u9ed8\u8ba4\u5fc3\u8df3\u95f4\u9694\u3002\u8bf7\u786e\u4fdd\u6240\u6709\u670d\u52a1\u7684 heartbeat_interval_secs \u53d6\u503c\u76f8\u540c\uff0c\u5426\u5219\u4f1a\u5bfc\u81f4\u7cfb\u7edf\u65e0\u6cd5\u6b63\u5e38\u5de5\u4f5c\u3002\u5355\u4f4d\uff1a\u79d2\u3002 \u652f\u6301 Caution \u5fc5\u987b\u5728\u914d\u7f6e\u6587\u4ef6\u4e2d\u4f7f\u7528\u771f\u5b9e\u7684 IP \u5730\u5740\u3002\u5426\u5219\u67d0\u4e9b\u60c5\u51b5\u4e0b 127.0.0.1/0.0.0.0 \u65e0\u6cd5\u6b63\u786e\u89e3\u6790\u3002 raft \u914d\u7f6e \u00b6 \u540d\u79f0 \u9884\u8bbe\u503c \u8bf4\u660e \u662f\u5426\u652f\u6301\u8fd0\u884c\u65f6\u52a8\u6001\u4fee\u6539 raft_heartbeat_interval_secs 30 Raft \u9009\u4e3e\u8d85\u65f6\u65f6\u95f4\u3002\u5355\u4f4d\uff1a\u79d2\u3002 \u652f\u6301 raft_rpc_timeout_ms 500 Raft \u5ba2\u6237\u7aef\u7684\u8fdc\u7a0b\u8fc7\u7a0b\u8c03\u7528\uff08RPC\uff09\u8d85\u65f6\u65f6\u95f4\u3002\u5355\u4f4d\uff1a\u6beb\u79d2\u3002 \u652f\u6301 wal_ttl 14400 Raft WAL \u7684\u6709\u6548\u65f6\u95f4\u3002\u5355\u4f4d\uff1a\u79d2\u3002 \u652f\u6301 disk \u914d\u7f6e \u00b6 \u540d\u79f0 \u9884\u8bbe\u503c \u8bf4\u660e \u662f\u5426\u652f\u6301\u8fd0\u884c\u65f6\u52a8\u6001\u4fee\u6539 data_path data/storage \u6570\u636e\u5b58\u50a8\u8def\u5f84\uff0c\u591a\u4e2a\u8def\u5f84\u7528\u82f1\u6587\u9017\u53f7\uff08,\uff09\u5206\u9694\u3002\u4e00\u4e2a RocksDB \u5b9e\u4f8b\u5bf9\u5e94\u4e00\u4e2a\u8def\u5f84\u3002 \u4e0d\u652f\u6301 minimum_reserved_bytes 268435456 \u6bcf\u4e2a\u6570\u636e\u5b58\u50a8\u8def\u5f84\u7684\u5269\u4f59\u7a7a\u95f4\u6700\u5c0f\u503c\uff0c\u4f4e\u4e8e\u8be5\u503c\u65f6\uff0c\u53ef\u80fd\u4f1a\u5bfc\u81f4\u96c6\u7fa4\u6570\u636e\u5199\u5165\u5931\u8d25\u3002\u5355\u4f4d\uff1a\u5b57\u8282\u3002 \u4e0d\u652f\u6301 rocksdb_batch_size 4096 \u6279\u91cf\u64cd\u4f5c\u7684\u7f13\u5b58\u5927\u5c0f\u3002\u5355\u4f4d\uff1a\u5b57\u8282\u3002 \u4e0d\u652f\u6301 rocksdb_block_cache 4 BlockBasedTable \u7684\u9ed8\u8ba4\u5757\u7f13\u5b58\u5927\u5c0f\u3002\u5355\u4f4d\uff1a\u5146\u5b57\u8282\u3002 \u4e0d\u652f\u6301 disable_page_cache false \u5141\u8bb8\u6216\u7981\u6b62NebulaGraph\u4f7f\u7528\u64cd\u4f5c\u7cfb\u7edf\u7684\u9875\u7f13\u5b58\u3002\u9ed8\u8ba4\u503c\u4e3a false \uff0c\u8868\u793a\u5141\u8bb8\u4f7f\u7528 page cache\u3002\u5f53\u503c\u4e3a true \u65f6\uff0c\u7981\u6b62NebulaGraph\u4f7f\u7528 page cache\uff0c\u6b64\u65f6\u987b\u8bbe\u7f6e\u5145\u8db3\u7684\u5757\u7f13\u5b58\uff08block cache\uff09\u7a7a\u95f4\u3002 \u4e0d\u652f\u6301 engine_type rocksdb \u5b58\u50a8\u5f15\u64ce\u7c7b\u578b\u3002 \u4e0d\u652f\u6301 rocksdb_compression lz4 \u538b\u7f29\u7b97\u6cd5\uff0c\u53ef\u9009\u503c\uff1a no \u3001 snappy \u3001 lz4 \u3001 lz4hc \u3001 zlib \u3001 bzip2 \u3001 zstd \u3002 \u8be5\u53c2\u6570\u4f1a\u4fee\u6539\u6bcf\u4e00\u5c42\u7684\u538b\u7f29\u7b97\u6cd5\uff0c\u5982\u9700\u4e3a\u4e0d\u540c\u5c42\u7ea7\u8bbe\u7f6e\u4e0d\u540c\u7684\u538b\u7f29\u7b97\u6cd5\uff0c\u8bf7\u4f7f\u7528 rocksdb_compression_per_level \u53c2\u6570\u3002 \u4e0d\u652f\u6301 rocksdb_compression_per_level - \u4e3a\u4e0d\u540c\u5c42\u7ea7\u8bbe\u7f6e\u4e0d\u540c\u7684\u538b\u7f29\u7b97\u6cd5\u3002\u4f18\u5148\u7ea7\u9ad8\u4e8e rocksdb_compression \u3002\u4f8b\u5982 no:no:lz4:lz4:snappy:zstd:snappy \u3002 \u4e5f\u53ef\u4ee5\u4e0d\u8bbe\u7f6e\u67d0\u4e2a\u5c42\u7ea7\u7684\u538b\u7f29\u7b97\u6cd5\uff0c\u4f8b\u5982 no:no:lz4:lz4::zstd \uff0c\u6b64\u65f6 L4\u3001L6 \u5c42\u4f7f\u7528 rocksdb_compression \u53c2\u6570\u7684\u538b\u7f29\u7b97\u6cd5\u3002 \u4e0d\u652f\u6301 enable_rocksdb_statistics false \u662f\u5426\u542f\u7528 RocksDB \u7684\u6570\u636e\u7edf\u8ba1\u3002 \u4e0d\u652f\u6301 rocksdb_stats_level kExceptHistogramOrTimers RocksDB \u7684\u6570\u636e\u7edf\u8ba1\u7ea7\u522b\u3002\u53ef\u9009\u503c\uff1a kExceptHistogramOrTimers \uff08\u7981\u7528\u8ba1\u65f6\u5668\u7edf\u8ba1\uff0c\u8df3\u8fc7\u67f1\u72b6\u56fe\u7edf\u8ba1\uff09\u3001 kExceptTimers \uff08\u8df3\u8fc7\u8ba1\u65f6\u5668\u7edf\u8ba1\uff09\u3001 kExceptDetailedTimers \uff08\u6536\u96c6\u9664\u4e92\u65a5\u9501\u548c\u538b\u7f29\u82b1\u8d39\u65f6\u95f4\u4e4b\u5916\u7684\u6240\u6709\u7edf\u8ba1\u6570\u636e\uff09\u3001 kExceptTimeForMutex \u6536\u96c6\u9664\u4e92\u65a5\u9501\u82b1\u8d39\u65f6\u95f4\u4e4b\u5916\u7684\u6240\u6709\u7edf\u8ba1\u6570\u636e\uff09\u3001 kAll \uff08\u6536\u96c6\u6240\u6709\u7edf\u8ba1\u6570\u636e\uff09\u3002 \u4e0d\u652f\u6301 enable_rocksdb_prefix_filtering true \u662f\u5426\u542f\u7528 prefix bloom filter\uff0c\u542f\u7528\u65f6\u53ef\u4ee5\u63d0\u5347\u56fe\u904d\u5386\u901f\u5ea6\uff0c\u4f46\u662f\u4f1a\u589e\u52a0\u5185\u5b58\u6d88\u8017\u3002 \u4e0d\u652f\u6301 enable_rocksdb_whole_key_filtering false \u662f\u5426\u542f\u7528 whole key bloom filter\u3002 \u4e0d\u652f\u6301 rocksdb_filtering_prefix_length 12 \u6bcf\u4e2a key \u7684 prefix \u957f\u5ea6\u3002\u53ef\u9009\u503c\uff1a 12 \uff08\u5206\u7247 ID+\u70b9 ID\uff09\u3001 16 \uff08\u5206\u7247 ID+\u70b9 ID+TagID/Edge typeID\uff09\u3002\u5355\u4f4d\uff1a\u5b57\u8282\u3002 \u4e0d\u652f\u6301 enable_partitioned_index_filter false \u8bbe\u7f6e\u4e3a true \u53ef\u4ee5\u964d\u4f4e bloom \u8fc7\u6ee4\u5668\u5360\u7528\u7684\u5185\u5b58\u5927\u5c0f\uff0c\u4f46\u662f\u5728\u67d0\u4e9b\u968f\u673a\u5bfb\u9053\uff08random-seek\uff09\u7684\u60c5\u51b5\u4e0b\uff0c\u53ef\u80fd\u4f1a\u964d\u4f4e\u8bfb\u53d6\u6027\u80fd\u3002\u521d\u59cb\u914d\u7f6e\u6587\u4ef6\u4e2d\u672a\u8bbe\u7f6e\u8be5\u53c2\u6570\uff0c\u5982\u9700\u4f7f\u7528\u8bf7\u624b\u52a8\u6dfb\u52a0\u3002 \u4e0d\u652f\u6301 misc \u914d\u7f6e \u00b6 Caution \u4e0b\u8868\u4e2d\u7684 snapshot \u4e0eNebulaGraph\u5feb\u7167\u662f\u4e0d\u540c\u7684\u6982\u5ff5\uff0c\u8fd9\u91cc\u7684 snapshot \u6307 Raft \u540c\u6b65\u8fc7\u7a0b\u4e2d leader \u4e0a\u7684\u5b58\u91cf\u6570\u636e\u3002 \u540d\u79f0 \u9884\u8bbe\u503c \u8bf4\u660e \u662f\u5426\u652f\u6301\u8fd0\u884c\u65f6\u52a8\u6001\u4fee\u6539 query_concurrently true \u662f\u5426\u5f00\u542f\u591a\u7ebf\u7a0b\u67e5\u8be2\u3002\u5f00\u542f\u540e\u53ef\u4ee5\u63d0\u9ad8\u5355\u4e2a\u67e5\u8be2\u7684\u65f6\u5ef6\u6027\u80fd\uff0c\u4f46\u5927\u538b\u529b\u4e0b\u4f1a\u964d\u4f4e\u6574\u4f53\u7684\u541e\u5410\u91cf\u3002 \u652f\u6301 auto_remove_invalid_space true \u5728\u6267\u884c DROP SPACE \u540e\uff0c\u4f1a\u5220\u9664\u6307\u5b9a\u56fe\u7a7a\u95f4\uff0c\u8be5\u53c2\u6570\u8bbe\u7f6e\u662f\u5426\u540c\u65f6\u5220\u9664\u6307\u5b9a\u56fe\u7a7a\u95f4\u5185\u7684\u6240\u6709\u6570\u636e\u3002\u5f53\u503c\u4e3a true \u65f6\uff0c\u540c\u65f6\u5220\u9664\u6307\u5b9a\u56fe\u7a7a\u95f4\u5185\u7684\u6240\u6709\u6570\u636e\u3002 \u652f\u6301 num_io_threads 16 \u7f51\u7edc I/O \u7ebf\u7a0b\u7684\u6570\u91cf\uff0c\u7528\u4e8e\u53d1\u9001 RPC \u8bf7\u6c42\u548c\u63a5\u6536\u54cd\u5e94\u3002 \u4e0d\u652f\u6301 num_max_connections 0 \u6240\u6709\u7f51\u7edc\u7ebf\u7a0b\u7684\u6700\u5927\u6d3b\u52a8\u8fde\u63a5\u6570\uff0c 0 \u8868\u793a\u6ca1\u6709\u9650\u5236\u3002 \u6bcf\u4e2a\u7f51\u7edc\u7ebf\u7a0b\u7684\u6700\u5927\u8fde\u63a5\u6570= num_max_connections / num_netio_threads \u3002 \u4e0d\u652f\u6301 num_worker_threads 32 Storage \u7684 RPC \u670d\u52a1\u7684\u5de5\u4f5c\u7ebf\u7a0b\u6570\u91cf\u3002 \u4e0d\u652f\u6301 max_concurrent_subtasks 10 TaskManager \u5e76\u53d1\u6267\u884c\u5b50\u4efb\u52a1\u7684\u6700\u5927\u4e2a\u6570\u3002 \u4e0d\u652f\u6301 snapshot_part_rate_limit 10485760 Raft leader \u5411 Raft group \u4e2d\u5176\u5b83\u6210\u5458\u540c\u6b65\u5b58\u91cf\u6570\u636e\u65f6\u7684\u9650\u901f\u3002\u5355\u4f4d\uff1a\u5b57\u8282/\u79d2\u3002 \u652f\u6301 snapshot_batch_size 1048576 Raft leader \u5411 Raft group \u4e2d\u5176\u5b83\u6210\u5458\u540c\u6b65\u5b58\u91cf\u6570\u636e\u65f6\u6bcf\u6279\u53d1\u9001\u7684\u6570\u636e\u91cf\u3002\u5355\u4f4d\uff1a\u5b57\u8282\u3002 \u652f\u6301 rebuild_index_part_rate_limit 4194304 \u91cd\u5efa\u7d22\u5f15\u8fc7\u7a0b\u4e2d\uff0cRaft leader \u5411 Raft group \u4e2d\u5176\u5b83\u6210\u5458\u540c\u6b65\u7d22\u5f15\u6570\u636e\u65f6\u7684\u9650\u901f\u3002\u5355\u4f4d\uff1a\u5b57\u8282/\u79d2\u3002 \u652f\u6301 rebuild_index_batch_size 1048576 \u91cd\u5efa\u7d22\u5f15\u8fc7\u7a0b\u4e2d\uff0cRaft leader \u5411 Raft group \u4e2d\u5176\u5b83\u6210\u5458\u540c\u6b65\u7d22\u5f15\u6570\u636e\u65f6\u6bcf\u6279\u53d1\u9001\u7684\u6570\u636e\u91cf\u3002\u5355\u4f4d\uff1a\u5b57\u8282\u3002 \u652f\u6301 rocksdb options \u914d\u7f6e \u00b6 \u540d\u79f0 \u9884\u8bbe\u503c \u8bf4\u660e \u662f\u5426\u652f\u6301\u8fd0\u884c\u65f6\u52a8\u6001\u4fee\u6539 rocksdb_db_options {} RocksDB database \u9009\u9879\u3002 \u4e0d\u652f\u6301 rocksdb_column_family_options {\"write_buffer_size\":\"67108864\", \"max_write_buffer_number\":\"4\", \"max_bytes_for_level_base\":\"268435456\"} RocksDB column family \u9009\u9879\u3002 \u4e0d\u652f\u6301 rocksdb_block_based_table_options {\"block_size\":\"8192\"} RocksDB block based table \u9009\u9879\u3002 \u4e0d\u652f\u6301 rocksdb options \u914d\u7f6e\u7684\u683c\u5f0f\u4e3a {\"<option_name>\":\"<option_value>\"} \uff0c\u591a\u4e2a\u9009\u9879\u7528\u82f1\u6587\u9017\u53f7\uff08,\uff09\u9694\u5f00\u3002 rocksdb_db_options \u548c rocksdb_column_family_options \u652f\u6301\u7684\u9009\u9879\u5982\u4e0b\uff1a rocksdb_db_options max_total_wal_size delete_obsolete_files_period_micros max_background_jobs stats_dump_period_sec compaction_readahead_size writable_file_max_buffer_size bytes_per_sync wal_bytes_per_sync delayed_write_rate avoid_flush_during_shutdown max_open_files stats_persist_period_sec stats_history_buffer_size strict_bytes_per_sync enable_rocksdb_prefix_filtering enable_rocksdb_whole_key_filtering rocksdb_filtering_prefix_length num_compaction_threads rate_limit rocksdb_column_family_options write_buffer_size max_write_buffer_number level0_file_num_compaction_trigger level0_slowdown_writes_trigger level0_stop_writes_trigger target_file_size_base target_file_size_multiplier max_bytes_for_level_base max_bytes_for_level_multiplier disable_auto_compactions \u53c2\u6570\u7684\u8be6\u7ec6\u8bf4\u660e\u8bf7\u53c2\u89c1 RocksDB \u5b98\u65b9\u6587\u6863 \u3002 memory tracker \u914d\u7f6e \u00b6 \u6709\u5173 Memory Tracker \u7684\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u89c1 \u56fe\u6570\u636e\u5e93 NebulaGraph \u7684\u5185\u5b58\u7ba1\u7406\u5b9e\u8df5\u4e4b Memory Tracker \u3002 \u540d\u79f0 \u9884\u8bbe\u503c \u8bf4\u660e \u662f\u5426\u652f\u6301\u8fd0\u884c\u65f6\u52a8\u6001\u4fee\u6539 memory_tracker_limit_ratio 0.8 \u53d6\u503c\u53ef\u8bbe\u7f6e\u4e3a\uff1a (0, 1] \u3001 2 \u3001 3 \u3002 (0, 1] \uff1a\u53ef\u7528\u5185\u5b58\u7684\u767e\u5206\u6bd4\uff0c\u5f53\u53ef\u7528\u5185\u5b58\u4f4e\u4e8e\u8be5\u503c\u65f6\uff0cNebulaGraph\u4f1a\u505c\u6b62\u63a5\u53d7\u67e5\u8be2\u3002 \u8ba1\u7b97\u516c\u5f0f\uff1a\u53ef\u7528\u5185\u5b58/(\u603b\u5185\u5b58 - \u4fdd\u7559\u5185\u5b58)\u3002 \u6ce8\u610f \uff1a\u5bf9\u4e8e\u6df7\u5408\u90e8\u7f72\u7684\u96c6\u7fa4\uff0c\u9700\u8981\u6839\u636e\u5b9e\u9645\u60c5\u51b5 \u8c03\u5c0f \u8be5\u53c2\u6570\u3002\u4f8b\u5982\uff0c\u5f53\u9884\u671f Graphd \u53ea\u5360\u7528 50% \u7684\u5185\u5b58\u65f6\uff0c\u8be5\u53c2\u6570\u7684\u503c\u53ef\u8bbe\u7f6e\u4e3a\u5c0f\u4e8e 0.5 \u3002 2 \uff1a\u52a8\u6001\u81ea\u9002\u5e94\u6a21\u5f0f\uff08Dynamic Self Adaptive\uff09\uff0cMemory Tracker \u4f1a\u6839\u636e\u7cfb\u7edf\u5f53\u524d\u7684\u53ef\u7528\u5185\u5b58\uff0c\u52a8\u6001\u8c03\u6574\u53ef\u7528\u5185\u5b58\u3002 \u6ce8\u610f \uff1a\u6b64\u529f\u80fd\u4e3a\u5b9e\u9a8c\u6027\u529f\u80fd\uff0c\u7531\u4e8e\u52a8\u6001\u81ea\u9002\u5e94\u4e0d\u80fd\u505a\u5230\u5b9e\u65f6\u76d1\u63a7\u64cd\u4f5c\u7cfb\u7edf\u5185\u5b58\u4f7f\u7528\u60c5\u51b5\uff0c\u5728\u4e00\u4e9b\u5927\u5185\u5b58\u5206\u914d\u7684\u573a\u666f\uff0c\u8fd8\u662f\u4f1a\u5b58\u5728 OOM \u53ef\u80fd\u3002 3 \uff1a\u5173\u6389 Memory Tracker\uff0cMemory Tracker \u5c06\u53ea\u8bb0\u5f55\u5185\u5b58\u4f7f\u7528\u60c5\u51b5\uff0c\u5373\u4f7f\u8d85\u8fc7\u9650\u989d\uff0c\u4e5f\u4e0d\u4f1a\u5e72\u9884\u6267\u884c\u3002 \u652f\u6301 memory_tracker_untracked_reserved_memory_mb 50 \u4fdd\u7559\u5185\u5b58\u7684\u5927\u5c0f\uff0c\u5355\u4f4d\uff1aMB\u3002 \u652f\u6301 memory_tracker_detail_log false \u662f\u5426\u5b9a\u671f\u751f\u6210\u8f83\u8be6\u7ec6\u7684\u5185\u5b58\u8ddf\u8e2a\u65e5\u5fd7\u3002\u5f53\u503c\u4e3a true \u65f6\uff0c\u4f1a\u5b9a\u671f\u751f\u6210\u5185\u5b58\u8ddf\u8e2a\u65e5\u5fd7\u3002 \u652f\u6301 memory_tracker_detail_log_interval_ms 60000 \u5185\u5b58\u8ddf\u8e2a\u65e5\u5fd7\u7684\u751f\u6210\u65f6\u95f4\u95f4\u9694\uff0c\u5355\u4f4d\uff1a\u6beb\u79d2\u3002\u4ec5\u5f53 memory_tracker_detail_log \u4e3a true \u65f6\uff0c\u8be5\u53c2\u6570\u751f\u6548\u3002 \u652f\u6301 memory_purge_enabled true \u662f\u5426\u5b9a\u671f\u5f00\u542f\u5185\u5b58\u6e05\u7406\u529f\u80fd\u3002\u5f53\u503c\u4e3a true \u65f6\uff0c\u4f1a\u5b9a\u671f\u6e05\u7406\u5185\u5b58\u3002 \u652f\u6301 memory_purge_interval_seconds 10 \u5185\u5b58\u6e05\u7406\u7684\u65f6\u95f4\u95f4\u9694\uff0c\u5355\u4f4d\uff1a\u79d2\u3002 memory_purge_enabled \u4e3a true \u65f6\uff0c\u8be5\u53c2\u6570\u751f\u6548\u3002 \u652f\u6301 \u8d85\u7ea7\u8282\u70b9\u5904\u7406\uff08\u51fa\u5165\u8fb9\u6570\u91cf\u6781\u591a\u7684\u70b9\uff09 \u00b6 \u5728\u6bcf\u4e2a\u70b9\u51fa\u53d1\u7684\u67e5\u8be2\u83b7\u53d6\u5230\u8fb9\u65f6\uff0c\u76f4\u63a5\u622a\u65ad\u3002\u76ee\u7684\u662f\u907f\u514d\u8d85\u7ea7\u8282\u70b9\u7684\u90bb\u8fb9\u8fc7\u591a\uff0c\u5355\u4e2a\u67e5\u8be2\u5360\u7528\u8fc7\u591a\u7684\u786c\u76d8\u548c\u5185\u5b58\u3002\u622a\u53d6\u524d max_edge_returned_per_vertex \u4e2a\u8fb9\uff0c\u591a\u4f59\u7684\u8fb9\u4e0d\u8fd4\u56de\u3002\u8be5\u53c2\u6570\u4f5c\u7528\u4e8e\u5168\u5c40\uff0c\u4e0d\u7528\u4e8e\u5355\u4e2a space\u3002 \u5c5e\u6027\u540d \u9ed8\u8ba4\u503c \u8bf4\u660e \u662f\u5426\u652f\u6301\u8fd0\u884c\u65f6\u52a8\u6001\u4fee\u6539 max_edge_returned_per_vertex 2147483647 \u6bcf\u4e2a\u7a20\u5bc6\u70b9\uff0c\u6700\u591a\u8fd4\u56de\u591a\u5c11\u6761\u8fb9\uff0c\u591a\u4f59\u7684\u8fb9\u622a\u65ad\u4e0d\u8fd4\u56de\u3002\u521d\u59cb\u914d\u7f6e\u6587\u4ef6\u4e2d\u672a\u8bbe\u7f6e\u8be5\u53c2\u6570\uff0c\u5982\u9700\u4f7f\u7528\u8bf7\u624b\u52a8\u6dfb\u52a0\u3002 \u4e0d\u652f\u6301 \u6570\u636e\u91cf\u5927\u800c\u5185\u5b58\u4e0d\u591f\u65f6 \u00b6 Warning \u4e00\u4e2a\u56fe\u7a7a\u95f4\u81f3\u5c11\u5360\u7528\u5927\u7ea6 300 MB \u7684\u5185\u5b58\u3002 \u5982\u679c\u6570\u636e\u91cf\u5f88\u5927\u4f46\u5185\u5b58\u4e0d\u591f\uff0c\u5219\u53ef\u4ee5\u5c1d\u8bd5\u628a storage \u914d\u7f6e\u4e2d\u7684 enable_partitioned_index_filter \u8bbe\u7f6e\u4e3a true \uff0c\u51cf\u5c11 rocksdb_block_cache \u3002\u4f46\u7531\u4e8e\u7f13\u5b58\u4e86\u8f83\u5c11\u7684 RocksDB \u7d22\u5f15\uff0c\u6027\u80fd\u53ef\u80fd\u4f1a\u53d7\u5f71\u54cd\u3002\u6b64\u5916\uff0c\u5f53\u901a\u8fc7\u8bed\u53e5\u62c9\u53d6\u5927\u91cf\u6570\u636e\u65f6\uff0c\u4ecd\u5b58\u5728 OOM \u7684\u53ef\u80fd\u3002","title":"Storage \u670d\u52a1\u914d\u7f6e"},{"location":"5.configurations-and-logs/1.configurations/4.storage-config/#storage","text":"Storage \u670d\u52a1\u63d0\u4f9b\u4e86\u4e24\u4efd\u521d\u59cb\u914d\u7f6e\u6587\u4ef6 nebula-storaged.conf.default \u548c nebula-storaged.conf.production \uff0c\u65b9\u4fbf\u5728\u4e0d\u540c\u573a\u666f\u4e2d\u4f7f\u7528\u3002\u6587\u4ef6\u7684\u9ed8\u8ba4\u8def\u5f84\u4e3a /usr/local/nebula/etc/ \u3002 Caution \u4e0d\u5efa\u8bae\u4fee\u6539 local_config \u7684\u503c\u4e3a false \u3002\u4fee\u6539\u914d\u7f6e\u5e76\u91cd\u542f Storage \u670d\u52a1\uff0c\u4f1a\u5148\u5c1d\u8bd5\u4ece Meta \u670d\u52a1\u83b7\u53d6\u7f13\u5b58\u7684\u914d\u7f6e\u4fe1\u606f\uff0c\u53ef\u80fd\u5bfc\u81f4\u96c6\u7fa4\u914d\u7f6e\u4e0d\u4e00\u81f4\uff0c\u9020\u6210\u672a\u77e5\u98ce\u9669\u3002 \u4e0d\u5efa\u8bae\u4fee\u6539\u6587\u6863\u672a\u4ecb\u7ecd\u7684\u914d\u7f6e\u9879\uff0c\u9664\u975e\u5df2\u7ecf\u719f\u6089\u6e90\u4ee3\u7801\u5e76\u5b8c\u5168\u4e86\u89e3\u914d\u7f6e\u9879\u7684\u4f5c\u7528\u3002","title":"Storage \u670d\u52a1\u914d\u7f6e"},{"location":"5.configurations-and-logs/1.configurations/4.storage-config/#_1","text":"\u5982\u9700\u4f7f\u7528\u521d\u59cb\u914d\u7f6e\u6587\u4ef6\uff0c\u4ece\u4e0a\u8ff0\u4e24\u4e2a\u6587\u4ef6\u9009\u62e9\u5176\u4e00\uff0c\u5220\u9664\u540e\u7f00 .default \u6216 .production \uff0cStorage \u670d\u52a1\u624d\u80fd\u5c06\u5176\u8bc6\u522b\u4e3a\u914d\u7f6e\u6587\u4ef6\u5e76\u4ece\u4e2d\u83b7\u53d6\u914d\u7f6e\u4fe1\u606f\u3002","title":"\u914d\u7f6e\u6587\u4ef6\u4f7f\u7528\u65b9\u5f0f"},{"location":"5.configurations-and-logs/1.configurations/4.storage-config/#_2","text":"\u914d\u7f6e\u6587\u4ef6\u5185\u6ca1\u6709\u8bbe\u7f6e\u67d0\u4e2a\u53c2\u6570\u8868\u793a\u53c2\u6570\u4f7f\u7528\u7684\u662f\u9ed8\u8ba4\u503c\u3002\u6587\u4ef6\u5185\u53ea\u9884\u8bbe\u4e86\u90e8\u5206\u53c2\u6570\u7684\u503c\uff0c\u800c\u4e14\u4e24\u4efd\u521d\u59cb\u914d\u7f6e\u6587\u4ef6\u5185\u7684\u53c2\u6570\u503c\u4e5f\u7565\u6709\u4e0d\u540c\uff0c\u672c\u6587\u7684\u9884\u8bbe\u503c\u4ee5 nebula-storaged.conf.default \u6587\u4ef6\u4e3a\u51c6\uff0c\u5176\u4e2d\u6ca1\u6709\u7684\u53c2\u6570\u5219\u4ee5 nebula-storaged.conf.production \u6587\u4ef6\u4e3a\u51c6\u3002 Caution \u914d\u7f6e\u6587\u4ef6\u4e2d\u7684\u90e8\u5206\u53c2\u6570\u503c\u53ef\u4ee5\u5728\u8fd0\u884c\u65f6\u52a8\u6001\u4fee\u6539\u3002\u672c\u6587\u5c06\u8fd9\u4e9b\u53c2\u6570\u6807\u8bb0\u4e3a\u652f\u6301\u8fd0\u884c\u65f6\u52a8\u6001\u4fee\u6539\uff0c\u5e76\u5f53 local_config \u503c\u8bbe\u7f6e\u4e3a true \u65f6\u91cd\u542f\u670d\u52a1\u540e\u914d\u7f6e\u4f1a\u6062\u590d\u4e3a\u521d\u59cb\u914d\u7f6e\u3002\u8be6\u60c5\u53c2\u89c1 \u4fee\u6539\u914d\u7f6e \u3002 Note Raft Listener \u7684\u914d\u7f6e\u548c Storage \u670d\u52a1\u914d\u7f6e\u4e0d\u540c\uff0c\u8be6\u60c5\u8bf7\u53c2\u89c1 \u90e8\u7f72 Raft listener \u3002 \u5982\u9700\u67e5\u770b\u6240\u6709\u7684\u53c2\u6570\u53ca\u5176\u5f53\u524d\u503c\uff0c\u53c2\u89c1 \u914d\u7f6e\u7ba1\u7406 \u3002","title":"\u914d\u7f6e\u6587\u4ef6\u53c2\u6570\u503c\u8bf4\u660e"},{"location":"5.configurations-and-logs/1.configurations/4.storage-config/#basics","text":"\u540d\u79f0 \u9884\u8bbe\u503c \u8bf4\u660e \u662f\u5426\u652f\u6301\u8fd0\u884c\u65f6\u52a8\u6001\u4fee\u6539 daemonize true \u662f\u5426\u542f\u52a8\u5b88\u62a4\u8fdb\u7a0b\u3002 \u4e0d\u652f\u6301 pid_file pids/nebula-storaged.pid \u8bb0\u5f55\u8fdb\u7a0b ID \u7684\u6587\u4ef6\u3002 \u4e0d\u652f\u6301 timezone_name UTC+00:00:00 \u6307\u5b9aNebulaGraph\u7684\u65f6\u533a\u3002\u521d\u59cb\u914d\u7f6e\u6587\u4ef6\u4e2d\u672a\u8bbe\u7f6e\u8be5\u53c2\u6570\uff0c\u5982\u9700\u4f7f\u7528\u8bf7\u624b\u52a8\u6dfb\u52a0\u3002\u683c\u5f0f\u8bf7\u53c2\u89c1 Specifying the Time Zone with TZ \u3002\u4f8b\u5982\uff0c\u4e1c\u516b\u533a\u7684\u8bbe\u7f6e\u65b9\u5f0f\u4e3a --timezone_name=UTC+08:00 \u3002 \u4e0d\u652f\u6301 local_config true \u662f\u5426\u4ece\u914d\u7f6e\u6587\u4ef6\u83b7\u53d6\u914d\u7f6e\u4fe1\u606f\u3002 \u4e0d\u652f\u6301 Note \u5728\u63d2\u5165 \u65f6\u95f4\u7c7b\u578b \u7684\u5c5e\u6027\u503c\u65f6\uff0cNebulaGraph\u4f1a\u6839\u636e timezone_name \u8bbe\u7f6e\u7684\u65f6\u533a\u5c06\u8be5\u65f6\u95f4\u503c\uff08TIMESTAMP \u7c7b\u578b\u4f8b\u5916\uff09\u8f6c\u6362\u6210\u76f8\u5e94\u7684 UTC \u65f6\u95f4\uff0c\u56e0\u6b64\u5728\u67e5\u8be2\u4e2d\u8fd4\u56de\u7684\u65f6\u95f4\u7c7b\u578b\u5c5e\u6027\u503c\u4e3a UTC \u65f6\u95f4\u3002 timezone_name \u53c2\u6570\u53ea\u7528\u4e8e\u8f6c\u6362NebulaGraph\u4e2d\u5b58\u50a8\u7684\u6570\u636e\uff0cNebulaGraph\u8fdb\u7a0b\u4e2d\u5176\u5b83\u65f6\u533a\u76f8\u5173\u6570\u636e\uff0c\u4f8b\u5982\u65e5\u5fd7\u6253\u5370\u7684\u65f6\u95f4\u7b49\uff0c\u4ecd\u7136\u4f7f\u7528\u4e3b\u673a\u7cfb\u7edf\u9ed8\u8ba4\u7684\u65f6\u533a\u3002","title":"basics \u914d\u7f6e"},{"location":"5.configurations-and-logs/1.configurations/4.storage-config/#logging","text":"\u540d\u79f0 \u9884\u8bbe\u503c \u8bf4\u660e \u662f\u5426\u652f\u6301\u8fd0\u884c\u65f6\u52a8\u6001\u4fee\u6539 log_dir logs \u5b58\u653e Storage \u670d\u52a1\u65e5\u5fd7\u7684\u76ee\u5f55\uff0c\u5efa\u8bae\u548c\u6570\u636e\u4fdd\u5b58\u5728\u4e0d\u540c\u786c\u76d8\u3002 \u4e0d\u652f\u6301 minloglevel 0 \u6700\u5c0f\u65e5\u5fd7\u7ea7\u522b\uff0c\u5373\u8bb0\u5f55\u6b64\u7ea7\u522b\u6216\u66f4\u9ad8\u7ea7\u522b\u7684\u65e5\u5fd7\u3002\u53ef\u9009\u503c\uff1a 0 \uff08INFO\uff09\u3001 1 \uff08WARNING\uff09\u3001 2 \uff08ERROR\uff09\u3001 3 \uff08FATAL\uff09\u3002\u5efa\u8bae\u5728\u8c03\u8bd5\u65f6\u8bbe\u7f6e\u4e3a 0 \uff0c\u751f\u4ea7\u73af\u5883\u4e2d\u8bbe\u7f6e\u4e3a 1 \u3002\u5982\u679c\u8bbe\u7f6e\u4e3a 4 \uff0cNebulaGraph\u4e0d\u4f1a\u8bb0\u5f55\u4efb\u4f55\u65e5\u5fd7\u3002 \u652f\u6301 v 0 VLOG \u65e5\u5fd7\u8be6\u7ec6\u7ea7\u522b\uff0c\u5373\u8bb0\u5f55\u5c0f\u4e8e\u6216\u7b49\u4e8e\u6b64\u7ea7\u522b\u7684\u6240\u6709 VLOG \u6d88\u606f\u3002\u53ef\u9009\u503c\u4e3a 0 \u3001 1 \u3001 2 \u3001 3 \u3001 4 \u3001 5 \u3002glog \u63d0\u4f9b\u7684 VLOG \u5b8f\u5141\u8bb8\u7528\u6237\u5b9a\u4e49\u81ea\u5df1\u7684\u6570\u5b57\u65e5\u5fd7\u8bb0\u5f55\u7ea7\u522b\uff0c\u5e76\u7528\u53c2\u6570 v \u63a7\u5236\u8bb0\u5f55\u54ea\u4e9b\u8be6\u7ec6\u6d88\u606f\u3002\u8be6\u60c5\u53c2\u89c1 Verbose Logging \u3002 \u652f\u6301 logbufsecs 0 \u7f13\u51b2\u65e5\u5fd7\u7684\u6700\u5927\u65f6\u95f4\uff0c\u8d85\u65f6\u540e\u8f93\u51fa\u5230\u65e5\u5fd7\u6587\u4ef6\u3002 0 \u8868\u793a\u5b9e\u65f6\u8f93\u51fa\u3002\u5355\u4f4d\uff1a\u79d2\u3002 \u4e0d\u652f\u6301 redirect_stdout true \u662f\u5426\u5c06\u6807\u51c6\u8f93\u51fa\u548c\u6807\u51c6\u9519\u8bef\u91cd\u5b9a\u5411\u5230\u5355\u72ec\u7684\u8f93\u51fa\u6587\u4ef6\u3002 \u4e0d\u652f\u6301 stdout_log_file storaged-stdout.log \u6807\u51c6\u8f93\u51fa\u65e5\u5fd7\u6587\u4ef6\u540d\u79f0\u3002 \u4e0d\u652f\u6301 stderr_log_file storaged-stderr.log \u6807\u51c6\u9519\u8bef\u65e5\u5fd7\u6587\u4ef6\u540d\u79f0\u3002 \u4e0d\u652f\u6301 stderrthreshold 3 \u8981\u590d\u5236\u5230\u6807\u51c6\u9519\u8bef\u4e2d\u7684\u6700\u5c0f\u65e5\u5fd7\u7ea7\u522b\uff08 minloglevel \uff09\u3002 \u4e0d\u652f\u6301 timestamp_in_logfile_name true \u65e5\u5fd7\u6587\u4ef6\u540d\u79f0\u4e2d\u662f\u5426\u5305\u542b\u65f6\u95f4\u6233\u3002 true \u8868\u793a\u5305\u542b\uff0c false \u8868\u793a\u4e0d\u5305\u542b\u3002 \u4e0d\u652f\u6301","title":"logging \u914d\u7f6e"},{"location":"5.configurations-and-logs/1.configurations/4.storage-config/#networking","text":"\u540d\u79f0 \u9884\u8bbe\u503c \u8bf4\u660e \u662f\u5426\u652f\u6301\u8fd0\u884c\u65f6\u52a8\u6001\u4fee\u6539 meta_server_addrs 127.0.0.1:9559 \u5168\u90e8 Meta \u670d\u52a1\u7684 IP \u5730\u5740\u548c\u7aef\u53e3\u3002\u591a\u4e2a Meta \u670d\u52a1\u7528\u82f1\u6587\u9017\u53f7\uff08,\uff09\u5206\u9694\u3002 \u4e0d\u652f\u6301 local_ip 127.0.0.1 Storage \u670d\u52a1\u7684\u672c\u5730 IP \u5730\u5740\u3002\u672c\u5730 IP \u5730\u5740\u7528\u4e8e\u8bc6\u522b nebula-storaged \u8fdb\u7a0b\uff0c\u5982\u679c\u662f\u5206\u5e03\u5f0f\u96c6\u7fa4\u6216\u9700\u8981\u8fdc\u7a0b\u8bbf\u95ee\uff0c\u8bf7\u4fee\u6539\u4e3a\u5bf9\u5e94\u5730\u5740\u3002 \u4e0d\u652f\u6301 port 9779 Storage \u670d\u52a1\u7684 RPC \u5b88\u62a4\u8fdb\u7a0b\u76d1\u542c\u7aef\u53e3\u3002Storage \u670d\u52a1\u5bf9\u5916\u7aef\u53e3\u4e3a 9779 \uff0c\u5bf9\u5185\u7aef\u53e3\u4e3a 9777 \u3001 9778 \u548c 9780 \uff0cNebulaGraph\u4f7f\u7528\u5185\u90e8\u7aef\u53e3\u8fdb\u884c\u591a\u526f\u672c\u95f4\u7684\u4ea4\u4e92\u3002 9778 \uff1aAdmin \u670d\u52a1\uff08Storage \u63a5\u6536 Meta \u547d\u4ee4\u7684\u670d\u52a1\uff09\u5360\u7528\u7684\u7aef\u53e3\uff1b 9780 \uff1aRaft \u901a\u4fe1\u7aef\u53e3\u3002 \u4e0d\u652f\u6301 ws_ip 0.0.0.0 HTTP \u670d\u52a1\u7684 IP \u5730\u5740\u3002 \u4e0d\u652f\u6301 ws_http_port 19779 HTTP \u670d\u52a1\u7684\u7aef\u53e3\u3002 \u4e0d\u652f\u6301 heartbeat_interval_secs 10 \u9ed8\u8ba4\u5fc3\u8df3\u95f4\u9694\u3002\u8bf7\u786e\u4fdd\u6240\u6709\u670d\u52a1\u7684 heartbeat_interval_secs \u53d6\u503c\u76f8\u540c\uff0c\u5426\u5219\u4f1a\u5bfc\u81f4\u7cfb\u7edf\u65e0\u6cd5\u6b63\u5e38\u5de5\u4f5c\u3002\u5355\u4f4d\uff1a\u79d2\u3002 \u652f\u6301 Caution \u5fc5\u987b\u5728\u914d\u7f6e\u6587\u4ef6\u4e2d\u4f7f\u7528\u771f\u5b9e\u7684 IP \u5730\u5740\u3002\u5426\u5219\u67d0\u4e9b\u60c5\u51b5\u4e0b 127.0.0.1/0.0.0.0 \u65e0\u6cd5\u6b63\u786e\u89e3\u6790\u3002","title":"networking \u914d\u7f6e"},{"location":"5.configurations-and-logs/1.configurations/4.storage-config/#raft","text":"\u540d\u79f0 \u9884\u8bbe\u503c \u8bf4\u660e \u662f\u5426\u652f\u6301\u8fd0\u884c\u65f6\u52a8\u6001\u4fee\u6539 raft_heartbeat_interval_secs 30 Raft \u9009\u4e3e\u8d85\u65f6\u65f6\u95f4\u3002\u5355\u4f4d\uff1a\u79d2\u3002 \u652f\u6301 raft_rpc_timeout_ms 500 Raft \u5ba2\u6237\u7aef\u7684\u8fdc\u7a0b\u8fc7\u7a0b\u8c03\u7528\uff08RPC\uff09\u8d85\u65f6\u65f6\u95f4\u3002\u5355\u4f4d\uff1a\u6beb\u79d2\u3002 \u652f\u6301 wal_ttl 14400 Raft WAL \u7684\u6709\u6548\u65f6\u95f4\u3002\u5355\u4f4d\uff1a\u79d2\u3002 \u652f\u6301","title":"raft \u914d\u7f6e"},{"location":"5.configurations-and-logs/1.configurations/4.storage-config/#disk","text":"\u540d\u79f0 \u9884\u8bbe\u503c \u8bf4\u660e \u662f\u5426\u652f\u6301\u8fd0\u884c\u65f6\u52a8\u6001\u4fee\u6539 data_path data/storage \u6570\u636e\u5b58\u50a8\u8def\u5f84\uff0c\u591a\u4e2a\u8def\u5f84\u7528\u82f1\u6587\u9017\u53f7\uff08,\uff09\u5206\u9694\u3002\u4e00\u4e2a RocksDB \u5b9e\u4f8b\u5bf9\u5e94\u4e00\u4e2a\u8def\u5f84\u3002 \u4e0d\u652f\u6301 minimum_reserved_bytes 268435456 \u6bcf\u4e2a\u6570\u636e\u5b58\u50a8\u8def\u5f84\u7684\u5269\u4f59\u7a7a\u95f4\u6700\u5c0f\u503c\uff0c\u4f4e\u4e8e\u8be5\u503c\u65f6\uff0c\u53ef\u80fd\u4f1a\u5bfc\u81f4\u96c6\u7fa4\u6570\u636e\u5199\u5165\u5931\u8d25\u3002\u5355\u4f4d\uff1a\u5b57\u8282\u3002 \u4e0d\u652f\u6301 rocksdb_batch_size 4096 \u6279\u91cf\u64cd\u4f5c\u7684\u7f13\u5b58\u5927\u5c0f\u3002\u5355\u4f4d\uff1a\u5b57\u8282\u3002 \u4e0d\u652f\u6301 rocksdb_block_cache 4 BlockBasedTable \u7684\u9ed8\u8ba4\u5757\u7f13\u5b58\u5927\u5c0f\u3002\u5355\u4f4d\uff1a\u5146\u5b57\u8282\u3002 \u4e0d\u652f\u6301 disable_page_cache false \u5141\u8bb8\u6216\u7981\u6b62NebulaGraph\u4f7f\u7528\u64cd\u4f5c\u7cfb\u7edf\u7684\u9875\u7f13\u5b58\u3002\u9ed8\u8ba4\u503c\u4e3a false \uff0c\u8868\u793a\u5141\u8bb8\u4f7f\u7528 page cache\u3002\u5f53\u503c\u4e3a true \u65f6\uff0c\u7981\u6b62NebulaGraph\u4f7f\u7528 page cache\uff0c\u6b64\u65f6\u987b\u8bbe\u7f6e\u5145\u8db3\u7684\u5757\u7f13\u5b58\uff08block cache\uff09\u7a7a\u95f4\u3002 \u4e0d\u652f\u6301 engine_type rocksdb \u5b58\u50a8\u5f15\u64ce\u7c7b\u578b\u3002 \u4e0d\u652f\u6301 rocksdb_compression lz4 \u538b\u7f29\u7b97\u6cd5\uff0c\u53ef\u9009\u503c\uff1a no \u3001 snappy \u3001 lz4 \u3001 lz4hc \u3001 zlib \u3001 bzip2 \u3001 zstd \u3002 \u8be5\u53c2\u6570\u4f1a\u4fee\u6539\u6bcf\u4e00\u5c42\u7684\u538b\u7f29\u7b97\u6cd5\uff0c\u5982\u9700\u4e3a\u4e0d\u540c\u5c42\u7ea7\u8bbe\u7f6e\u4e0d\u540c\u7684\u538b\u7f29\u7b97\u6cd5\uff0c\u8bf7\u4f7f\u7528 rocksdb_compression_per_level \u53c2\u6570\u3002 \u4e0d\u652f\u6301 rocksdb_compression_per_level - \u4e3a\u4e0d\u540c\u5c42\u7ea7\u8bbe\u7f6e\u4e0d\u540c\u7684\u538b\u7f29\u7b97\u6cd5\u3002\u4f18\u5148\u7ea7\u9ad8\u4e8e rocksdb_compression \u3002\u4f8b\u5982 no:no:lz4:lz4:snappy:zstd:snappy \u3002 \u4e5f\u53ef\u4ee5\u4e0d\u8bbe\u7f6e\u67d0\u4e2a\u5c42\u7ea7\u7684\u538b\u7f29\u7b97\u6cd5\uff0c\u4f8b\u5982 no:no:lz4:lz4::zstd \uff0c\u6b64\u65f6 L4\u3001L6 \u5c42\u4f7f\u7528 rocksdb_compression \u53c2\u6570\u7684\u538b\u7f29\u7b97\u6cd5\u3002 \u4e0d\u652f\u6301 enable_rocksdb_statistics false \u662f\u5426\u542f\u7528 RocksDB \u7684\u6570\u636e\u7edf\u8ba1\u3002 \u4e0d\u652f\u6301 rocksdb_stats_level kExceptHistogramOrTimers RocksDB \u7684\u6570\u636e\u7edf\u8ba1\u7ea7\u522b\u3002\u53ef\u9009\u503c\uff1a kExceptHistogramOrTimers \uff08\u7981\u7528\u8ba1\u65f6\u5668\u7edf\u8ba1\uff0c\u8df3\u8fc7\u67f1\u72b6\u56fe\u7edf\u8ba1\uff09\u3001 kExceptTimers \uff08\u8df3\u8fc7\u8ba1\u65f6\u5668\u7edf\u8ba1\uff09\u3001 kExceptDetailedTimers \uff08\u6536\u96c6\u9664\u4e92\u65a5\u9501\u548c\u538b\u7f29\u82b1\u8d39\u65f6\u95f4\u4e4b\u5916\u7684\u6240\u6709\u7edf\u8ba1\u6570\u636e\uff09\u3001 kExceptTimeForMutex \u6536\u96c6\u9664\u4e92\u65a5\u9501\u82b1\u8d39\u65f6\u95f4\u4e4b\u5916\u7684\u6240\u6709\u7edf\u8ba1\u6570\u636e\uff09\u3001 kAll \uff08\u6536\u96c6\u6240\u6709\u7edf\u8ba1\u6570\u636e\uff09\u3002 \u4e0d\u652f\u6301 enable_rocksdb_prefix_filtering true \u662f\u5426\u542f\u7528 prefix bloom filter\uff0c\u542f\u7528\u65f6\u53ef\u4ee5\u63d0\u5347\u56fe\u904d\u5386\u901f\u5ea6\uff0c\u4f46\u662f\u4f1a\u589e\u52a0\u5185\u5b58\u6d88\u8017\u3002 \u4e0d\u652f\u6301 enable_rocksdb_whole_key_filtering false \u662f\u5426\u542f\u7528 whole key bloom filter\u3002 \u4e0d\u652f\u6301 rocksdb_filtering_prefix_length 12 \u6bcf\u4e2a key \u7684 prefix \u957f\u5ea6\u3002\u53ef\u9009\u503c\uff1a 12 \uff08\u5206\u7247 ID+\u70b9 ID\uff09\u3001 16 \uff08\u5206\u7247 ID+\u70b9 ID+TagID/Edge typeID\uff09\u3002\u5355\u4f4d\uff1a\u5b57\u8282\u3002 \u4e0d\u652f\u6301 enable_partitioned_index_filter false \u8bbe\u7f6e\u4e3a true \u53ef\u4ee5\u964d\u4f4e bloom \u8fc7\u6ee4\u5668\u5360\u7528\u7684\u5185\u5b58\u5927\u5c0f\uff0c\u4f46\u662f\u5728\u67d0\u4e9b\u968f\u673a\u5bfb\u9053\uff08random-seek\uff09\u7684\u60c5\u51b5\u4e0b\uff0c\u53ef\u80fd\u4f1a\u964d\u4f4e\u8bfb\u53d6\u6027\u80fd\u3002\u521d\u59cb\u914d\u7f6e\u6587\u4ef6\u4e2d\u672a\u8bbe\u7f6e\u8be5\u53c2\u6570\uff0c\u5982\u9700\u4f7f\u7528\u8bf7\u624b\u52a8\u6dfb\u52a0\u3002 \u4e0d\u652f\u6301","title":"disk \u914d\u7f6e"},{"location":"5.configurations-and-logs/1.configurations/4.storage-config/#misc","text":"Caution \u4e0b\u8868\u4e2d\u7684 snapshot \u4e0eNebulaGraph\u5feb\u7167\u662f\u4e0d\u540c\u7684\u6982\u5ff5\uff0c\u8fd9\u91cc\u7684 snapshot \u6307 Raft \u540c\u6b65\u8fc7\u7a0b\u4e2d leader \u4e0a\u7684\u5b58\u91cf\u6570\u636e\u3002 \u540d\u79f0 \u9884\u8bbe\u503c \u8bf4\u660e \u662f\u5426\u652f\u6301\u8fd0\u884c\u65f6\u52a8\u6001\u4fee\u6539 query_concurrently true \u662f\u5426\u5f00\u542f\u591a\u7ebf\u7a0b\u67e5\u8be2\u3002\u5f00\u542f\u540e\u53ef\u4ee5\u63d0\u9ad8\u5355\u4e2a\u67e5\u8be2\u7684\u65f6\u5ef6\u6027\u80fd\uff0c\u4f46\u5927\u538b\u529b\u4e0b\u4f1a\u964d\u4f4e\u6574\u4f53\u7684\u541e\u5410\u91cf\u3002 \u652f\u6301 auto_remove_invalid_space true \u5728\u6267\u884c DROP SPACE \u540e\uff0c\u4f1a\u5220\u9664\u6307\u5b9a\u56fe\u7a7a\u95f4\uff0c\u8be5\u53c2\u6570\u8bbe\u7f6e\u662f\u5426\u540c\u65f6\u5220\u9664\u6307\u5b9a\u56fe\u7a7a\u95f4\u5185\u7684\u6240\u6709\u6570\u636e\u3002\u5f53\u503c\u4e3a true \u65f6\uff0c\u540c\u65f6\u5220\u9664\u6307\u5b9a\u56fe\u7a7a\u95f4\u5185\u7684\u6240\u6709\u6570\u636e\u3002 \u652f\u6301 num_io_threads 16 \u7f51\u7edc I/O \u7ebf\u7a0b\u7684\u6570\u91cf\uff0c\u7528\u4e8e\u53d1\u9001 RPC \u8bf7\u6c42\u548c\u63a5\u6536\u54cd\u5e94\u3002 \u4e0d\u652f\u6301 num_max_connections 0 \u6240\u6709\u7f51\u7edc\u7ebf\u7a0b\u7684\u6700\u5927\u6d3b\u52a8\u8fde\u63a5\u6570\uff0c 0 \u8868\u793a\u6ca1\u6709\u9650\u5236\u3002 \u6bcf\u4e2a\u7f51\u7edc\u7ebf\u7a0b\u7684\u6700\u5927\u8fde\u63a5\u6570= num_max_connections / num_netio_threads \u3002 \u4e0d\u652f\u6301 num_worker_threads 32 Storage \u7684 RPC \u670d\u52a1\u7684\u5de5\u4f5c\u7ebf\u7a0b\u6570\u91cf\u3002 \u4e0d\u652f\u6301 max_concurrent_subtasks 10 TaskManager \u5e76\u53d1\u6267\u884c\u5b50\u4efb\u52a1\u7684\u6700\u5927\u4e2a\u6570\u3002 \u4e0d\u652f\u6301 snapshot_part_rate_limit 10485760 Raft leader \u5411 Raft group \u4e2d\u5176\u5b83\u6210\u5458\u540c\u6b65\u5b58\u91cf\u6570\u636e\u65f6\u7684\u9650\u901f\u3002\u5355\u4f4d\uff1a\u5b57\u8282/\u79d2\u3002 \u652f\u6301 snapshot_batch_size 1048576 Raft leader \u5411 Raft group \u4e2d\u5176\u5b83\u6210\u5458\u540c\u6b65\u5b58\u91cf\u6570\u636e\u65f6\u6bcf\u6279\u53d1\u9001\u7684\u6570\u636e\u91cf\u3002\u5355\u4f4d\uff1a\u5b57\u8282\u3002 \u652f\u6301 rebuild_index_part_rate_limit 4194304 \u91cd\u5efa\u7d22\u5f15\u8fc7\u7a0b\u4e2d\uff0cRaft leader \u5411 Raft group \u4e2d\u5176\u5b83\u6210\u5458\u540c\u6b65\u7d22\u5f15\u6570\u636e\u65f6\u7684\u9650\u901f\u3002\u5355\u4f4d\uff1a\u5b57\u8282/\u79d2\u3002 \u652f\u6301 rebuild_index_batch_size 1048576 \u91cd\u5efa\u7d22\u5f15\u8fc7\u7a0b\u4e2d\uff0cRaft leader \u5411 Raft group \u4e2d\u5176\u5b83\u6210\u5458\u540c\u6b65\u7d22\u5f15\u6570\u636e\u65f6\u6bcf\u6279\u53d1\u9001\u7684\u6570\u636e\u91cf\u3002\u5355\u4f4d\uff1a\u5b57\u8282\u3002 \u652f\u6301","title":"misc \u914d\u7f6e"},{"location":"5.configurations-and-logs/1.configurations/4.storage-config/#rocksdb_options","text":"\u540d\u79f0 \u9884\u8bbe\u503c \u8bf4\u660e \u662f\u5426\u652f\u6301\u8fd0\u884c\u65f6\u52a8\u6001\u4fee\u6539 rocksdb_db_options {} RocksDB database \u9009\u9879\u3002 \u4e0d\u652f\u6301 rocksdb_column_family_options {\"write_buffer_size\":\"67108864\", \"max_write_buffer_number\":\"4\", \"max_bytes_for_level_base\":\"268435456\"} RocksDB column family \u9009\u9879\u3002 \u4e0d\u652f\u6301 rocksdb_block_based_table_options {\"block_size\":\"8192\"} RocksDB block based table \u9009\u9879\u3002 \u4e0d\u652f\u6301 rocksdb options \u914d\u7f6e\u7684\u683c\u5f0f\u4e3a {\"<option_name>\":\"<option_value>\"} \uff0c\u591a\u4e2a\u9009\u9879\u7528\u82f1\u6587\u9017\u53f7\uff08,\uff09\u9694\u5f00\u3002 rocksdb_db_options \u548c rocksdb_column_family_options \u652f\u6301\u7684\u9009\u9879\u5982\u4e0b\uff1a rocksdb_db_options max_total_wal_size delete_obsolete_files_period_micros max_background_jobs stats_dump_period_sec compaction_readahead_size writable_file_max_buffer_size bytes_per_sync wal_bytes_per_sync delayed_write_rate avoid_flush_during_shutdown max_open_files stats_persist_period_sec stats_history_buffer_size strict_bytes_per_sync enable_rocksdb_prefix_filtering enable_rocksdb_whole_key_filtering rocksdb_filtering_prefix_length num_compaction_threads rate_limit rocksdb_column_family_options write_buffer_size max_write_buffer_number level0_file_num_compaction_trigger level0_slowdown_writes_trigger level0_stop_writes_trigger target_file_size_base target_file_size_multiplier max_bytes_for_level_base max_bytes_for_level_multiplier disable_auto_compactions \u53c2\u6570\u7684\u8be6\u7ec6\u8bf4\u660e\u8bf7\u53c2\u89c1 RocksDB \u5b98\u65b9\u6587\u6863 \u3002","title":"rocksdb options \u914d\u7f6e"},{"location":"5.configurations-and-logs/1.configurations/4.storage-config/#memory_tracker","text":"\u6709\u5173 Memory Tracker \u7684\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u89c1 \u56fe\u6570\u636e\u5e93 NebulaGraph \u7684\u5185\u5b58\u7ba1\u7406\u5b9e\u8df5\u4e4b Memory Tracker \u3002 \u540d\u79f0 \u9884\u8bbe\u503c \u8bf4\u660e \u662f\u5426\u652f\u6301\u8fd0\u884c\u65f6\u52a8\u6001\u4fee\u6539 memory_tracker_limit_ratio 0.8 \u53d6\u503c\u53ef\u8bbe\u7f6e\u4e3a\uff1a (0, 1] \u3001 2 \u3001 3 \u3002 (0, 1] \uff1a\u53ef\u7528\u5185\u5b58\u7684\u767e\u5206\u6bd4\uff0c\u5f53\u53ef\u7528\u5185\u5b58\u4f4e\u4e8e\u8be5\u503c\u65f6\uff0cNebulaGraph\u4f1a\u505c\u6b62\u63a5\u53d7\u67e5\u8be2\u3002 \u8ba1\u7b97\u516c\u5f0f\uff1a\u53ef\u7528\u5185\u5b58/(\u603b\u5185\u5b58 - \u4fdd\u7559\u5185\u5b58)\u3002 \u6ce8\u610f \uff1a\u5bf9\u4e8e\u6df7\u5408\u90e8\u7f72\u7684\u96c6\u7fa4\uff0c\u9700\u8981\u6839\u636e\u5b9e\u9645\u60c5\u51b5 \u8c03\u5c0f \u8be5\u53c2\u6570\u3002\u4f8b\u5982\uff0c\u5f53\u9884\u671f Graphd \u53ea\u5360\u7528 50% \u7684\u5185\u5b58\u65f6\uff0c\u8be5\u53c2\u6570\u7684\u503c\u53ef\u8bbe\u7f6e\u4e3a\u5c0f\u4e8e 0.5 \u3002 2 \uff1a\u52a8\u6001\u81ea\u9002\u5e94\u6a21\u5f0f\uff08Dynamic Self Adaptive\uff09\uff0cMemory Tracker \u4f1a\u6839\u636e\u7cfb\u7edf\u5f53\u524d\u7684\u53ef\u7528\u5185\u5b58\uff0c\u52a8\u6001\u8c03\u6574\u53ef\u7528\u5185\u5b58\u3002 \u6ce8\u610f \uff1a\u6b64\u529f\u80fd\u4e3a\u5b9e\u9a8c\u6027\u529f\u80fd\uff0c\u7531\u4e8e\u52a8\u6001\u81ea\u9002\u5e94\u4e0d\u80fd\u505a\u5230\u5b9e\u65f6\u76d1\u63a7\u64cd\u4f5c\u7cfb\u7edf\u5185\u5b58\u4f7f\u7528\u60c5\u51b5\uff0c\u5728\u4e00\u4e9b\u5927\u5185\u5b58\u5206\u914d\u7684\u573a\u666f\uff0c\u8fd8\u662f\u4f1a\u5b58\u5728 OOM \u53ef\u80fd\u3002 3 \uff1a\u5173\u6389 Memory Tracker\uff0cMemory Tracker \u5c06\u53ea\u8bb0\u5f55\u5185\u5b58\u4f7f\u7528\u60c5\u51b5\uff0c\u5373\u4f7f\u8d85\u8fc7\u9650\u989d\uff0c\u4e5f\u4e0d\u4f1a\u5e72\u9884\u6267\u884c\u3002 \u652f\u6301 memory_tracker_untracked_reserved_memory_mb 50 \u4fdd\u7559\u5185\u5b58\u7684\u5927\u5c0f\uff0c\u5355\u4f4d\uff1aMB\u3002 \u652f\u6301 memory_tracker_detail_log false \u662f\u5426\u5b9a\u671f\u751f\u6210\u8f83\u8be6\u7ec6\u7684\u5185\u5b58\u8ddf\u8e2a\u65e5\u5fd7\u3002\u5f53\u503c\u4e3a true \u65f6\uff0c\u4f1a\u5b9a\u671f\u751f\u6210\u5185\u5b58\u8ddf\u8e2a\u65e5\u5fd7\u3002 \u652f\u6301 memory_tracker_detail_log_interval_ms 60000 \u5185\u5b58\u8ddf\u8e2a\u65e5\u5fd7\u7684\u751f\u6210\u65f6\u95f4\u95f4\u9694\uff0c\u5355\u4f4d\uff1a\u6beb\u79d2\u3002\u4ec5\u5f53 memory_tracker_detail_log \u4e3a true \u65f6\uff0c\u8be5\u53c2\u6570\u751f\u6548\u3002 \u652f\u6301 memory_purge_enabled true \u662f\u5426\u5b9a\u671f\u5f00\u542f\u5185\u5b58\u6e05\u7406\u529f\u80fd\u3002\u5f53\u503c\u4e3a true \u65f6\uff0c\u4f1a\u5b9a\u671f\u6e05\u7406\u5185\u5b58\u3002 \u652f\u6301 memory_purge_interval_seconds 10 \u5185\u5b58\u6e05\u7406\u7684\u65f6\u95f4\u95f4\u9694\uff0c\u5355\u4f4d\uff1a\u79d2\u3002 memory_purge_enabled \u4e3a true \u65f6\uff0c\u8be5\u53c2\u6570\u751f\u6548\u3002 \u652f\u6301","title":"memory tracker \u914d\u7f6e"},{"location":"5.configurations-and-logs/1.configurations/4.storage-config/#_3","text":"\u5728\u6bcf\u4e2a\u70b9\u51fa\u53d1\u7684\u67e5\u8be2\u83b7\u53d6\u5230\u8fb9\u65f6\uff0c\u76f4\u63a5\u622a\u65ad\u3002\u76ee\u7684\u662f\u907f\u514d\u8d85\u7ea7\u8282\u70b9\u7684\u90bb\u8fb9\u8fc7\u591a\uff0c\u5355\u4e2a\u67e5\u8be2\u5360\u7528\u8fc7\u591a\u7684\u786c\u76d8\u548c\u5185\u5b58\u3002\u622a\u53d6\u524d max_edge_returned_per_vertex \u4e2a\u8fb9\uff0c\u591a\u4f59\u7684\u8fb9\u4e0d\u8fd4\u56de\u3002\u8be5\u53c2\u6570\u4f5c\u7528\u4e8e\u5168\u5c40\uff0c\u4e0d\u7528\u4e8e\u5355\u4e2a space\u3002 \u5c5e\u6027\u540d \u9ed8\u8ba4\u503c \u8bf4\u660e \u662f\u5426\u652f\u6301\u8fd0\u884c\u65f6\u52a8\u6001\u4fee\u6539 max_edge_returned_per_vertex 2147483647 \u6bcf\u4e2a\u7a20\u5bc6\u70b9\uff0c\u6700\u591a\u8fd4\u56de\u591a\u5c11\u6761\u8fb9\uff0c\u591a\u4f59\u7684\u8fb9\u622a\u65ad\u4e0d\u8fd4\u56de\u3002\u521d\u59cb\u914d\u7f6e\u6587\u4ef6\u4e2d\u672a\u8bbe\u7f6e\u8be5\u53c2\u6570\uff0c\u5982\u9700\u4f7f\u7528\u8bf7\u624b\u52a8\u6dfb\u52a0\u3002 \u4e0d\u652f\u6301","title":"\u8d85\u7ea7\u8282\u70b9\u5904\u7406\uff08\u51fa\u5165\u8fb9\u6570\u91cf\u6781\u591a\u7684\u70b9\uff09"},{"location":"5.configurations-and-logs/1.configurations/4.storage-config/#_4","text":"Warning \u4e00\u4e2a\u56fe\u7a7a\u95f4\u81f3\u5c11\u5360\u7528\u5927\u7ea6 300 MB \u7684\u5185\u5b58\u3002 \u5982\u679c\u6570\u636e\u91cf\u5f88\u5927\u4f46\u5185\u5b58\u4e0d\u591f\uff0c\u5219\u53ef\u4ee5\u5c1d\u8bd5\u628a storage \u914d\u7f6e\u4e2d\u7684 enable_partitioned_index_filter \u8bbe\u7f6e\u4e3a true \uff0c\u51cf\u5c11 rocksdb_block_cache \u3002\u4f46\u7531\u4e8e\u7f13\u5b58\u4e86\u8f83\u5c11\u7684 RocksDB \u7d22\u5f15\uff0c\u6027\u80fd\u53ef\u80fd\u4f1a\u53d7\u5f71\u54cd\u3002\u6b64\u5916\uff0c\u5f53\u901a\u8fc7\u8bed\u53e5\u62c9\u53d6\u5927\u91cf\u6570\u636e\u65f6\uff0c\u4ecd\u5b58\u5728 OOM \u7684\u53ef\u80fd\u3002","title":"\u6570\u636e\u91cf\u5927\u800c\u5185\u5b58\u4e0d\u591f\u65f6"},{"location":"5.configurations-and-logs/1.configurations/6.kernel-config/","text":"Linux \u5185\u6838\u914d\u7f6e \u00b6 \u672c\u6587\u4ecb\u7ecd\u4e0eNebulaGraph\u76f8\u5173\u7684 Linux \u5185\u6838\u914d\u7f6e\uff0c\u5e76\u4ecb\u7ecd\u5982\u4f55\u4fee\u6539\u914d\u7f6e\u3002 \u8d44\u6e90\u63a7\u5236 \u00b6 ulimit \u6ce8\u610f\u4e8b\u9879 \u00b6 \u547d\u4ee4 ulimit \u7528\u4e8e\u4e3a\u5f53\u524d shell \u4f1a\u8bdd\u8bbe\u7f6e\u8d44\u6e90\u9608\u503c\uff0c\u6ce8\u610f\u4e8b\u9879\u5982\u4e0b\uff1a ulimit \u6240\u505a\u7684\u66f4\u6539\u4ec5\u5bf9\u5f53\u524d\u4f1a\u8bdd\u6216\u5b50\u8fdb\u7a0b\u751f\u6548\u3002 \u8d44\u6e90\u7684\u9608\u503c\uff08\u8f6f\u9608\u503c\uff09\u4e0d\u80fd\u8d85\u8fc7\u786c\u9608\u503c\u3002 \u666e\u901a\u7528\u6237\u4e0d\u80fd\u4f7f\u7528\u547d\u4ee4\u8c03\u6574\u786c\u9608\u503c\uff0c\u5373\u4f7f\u4f7f\u7528 sudo \u4e5f\u4e0d\u80fd\u8c03\u6574\u3002 \u4fee\u6539\u7cfb\u7edf\u7ea7\u522b\u6216\u8c03\u6574\u786c\u6027\u9608\u503c\uff0c\u8bf7\u7f16\u8f91\u6587\u4ef6 /etc/security/limits.conf \u3002\u8fd9\u79cd\u65b9\u5f0f\u9700\u8981\u91cd\u65b0\u767b\u5f55\u624d\u751f\u6548\u3002 ulimit -c \u00b6 ulimit -c \u7528\u4e8e\u9650\u5236 core \u6587\u4ef6\u7684\u5927\u5c0f\uff0c\u5efa\u8bae\u8bbe\u7f6e\u4e3a unlimited \uff0c\u547d\u4ee4\u5982\u4e0b\uff1a ulimit -c unlimited ulimit -n \u00b6 ulimit -n \u7528\u4e8e\u9650\u5236\u6253\u5f00\u6587\u4ef6\u7684\u6570\u91cf\uff0c\u5efa\u8bae\u8bbe\u7f6e\u4e3a\u8d85\u8fc7 10 \u4e07\uff0c\u4f8b\u5982\uff1a ulimit -n 130000 \u5185\u5b58 \u00b6 vm.swappiness \u00b6 vm.swappiness \u662f\u89e6\u53d1\u865a\u62df\u5185\u5b58\uff08swap\uff09\u7684\u7a7a\u95f2\u5185\u5b58\u767e\u5206\u6bd4\u3002\u503c\u8d8a\u5927\uff0c\u4f7f\u7528 swap \u7684\u53ef\u80fd\u6027\u5c31\u8d8a\u5927\uff0c\u5efa\u8bae\u8bbe\u7f6e\u4e3a 0\uff0c\u8868\u793a\u9996\u5148\u5220\u9664\u9875\u7f13\u5b58\u3002\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c0 \u8868\u793a \u5c3d\u91cf \u4e0d\u4f7f\u7528 swap\u3002 vm.min_free_kbytes \u00b6 vm.min_free_kbytes \u7528\u4e8e\u8bbe\u7f6e Linux \u5185\u6838\u4fdd\u7559\u7684\u6700\u5c0f\u7a7a\u95f2\u5343\u5b57\u8282\u6570\u3002\u5982\u679c\u7cfb\u7edf\u5185\u5b58\u8db3\u591f\uff0c\u5efa\u8bae\u8bbe\u7f6e\u8f83\u5927\u503c\u3002\u4f8b\u5982\u7269\u7406\u5185\u5b58\u4e3a 128 GB\uff0c\u53ef\u4ee5\u5c06 vm.min_free_kbytes \u8bbe\u7f6e\u4e3a 5 GB\u3002\u5982\u679c\u503c\u592a\u5c0f\uff0c\u4f1a\u5bfc\u81f4\u7cfb\u7edf\u65e0\u6cd5\u7533\u8bf7\u8db3\u591f\u7684\u8fde\u7eed\u7269\u7406\u5185\u5b58\u3002 vm.max_map_count \u00b6 vm.max_map_count \u7528\u4e8e\u9650\u5236\u5355\u4e2a\u8fdb\u7a0b\u7684 VMA\uff08\u865a\u62df\u5185\u5b58\u533a\u57df\uff09\u6570\u91cf\u3002\u9ed8\u8ba4\u503c\u4e3a 65530 \uff0c\u5bf9\u4e8e\u7edd\u5927\u591a\u6570\u5e94\u7528\u7a0b\u5e8f\u6765\u8bf4\u5df2\u7ecf\u8db3\u591f\u3002\u5982\u679c\u5e94\u7528\u7a0b\u5e8f\u56e0\u4e3a\u5185\u5b58\u6d88\u8017\u8fc7\u5927\u800c\u62a5\u9519\uff0c\u8bf7\u589e\u5927\u672c\u53c2\u6570\u7684\u503c\u3002 vm.dirty_* \u00b6 vm.dirty_* \u662f\u4e00\u7cfb\u5217\u63a7\u5236\u7cfb\u7edf\u810f\u6570\u636e\u7f13\u5b58\u7684\u53c2\u6570\u3002\u5bf9\u4e8e\u5199\u5bc6\u96c6\u578b\u573a\u666f\uff0c\u7528\u6237\u53ef\u4ee5\u6839\u636e\u9700\u8981\u8fdb\u884c\u8c03\u6574\uff08\u541e\u5410\u91cf\u4f18\u5148\u6216\u5ef6\u8fdf\u4f18\u5148\uff09\uff0c\u5efa\u8bae\u4f7f\u7528\u7cfb\u7edf\u9ed8\u8ba4\u503c\u3002 Transparent huge page \u00b6 \u4e3a\u4e86\u964d\u4f4e\u5ef6\u8fdf\uff0c\u7528\u6237\u5fc5\u987b\u5173\u95ed THP\uff08transparent huge page\uff09\u3002\u547d\u4ee4\u5982\u4e0b\uff1a root# echo never > /sys/kernel/mm/transparent_hugepage/enabled root# echo never > /sys/kernel/mm/transparent_hugepage/defrag root# swapoff -a && swapon -a \u4e3a\u4e86\u9632\u6b62\u7cfb\u7edf\u91cd\u542f\u540e\u8be5\u914d\u7f6e\u5931\u6548\uff0c\u53ef\u4ee5\u5728GRUB\u914d\u7f6e\u6587\u4ef6\u6216 /etc/rc.local \u4e2d\u6dfb\u52a0\u76f8\u5173\u914d\u7f6e\uff0c\u4f7f\u7cfb\u7edf\u542f\u52a8\u65f6\u81ea\u52a8\u5173\u95ed THP\u3002 \u7f51\u7edc \u00b6 net.ipv4.tcp_slow_start_after_idle \u00b6 net.ipv4.tcp_slow_start_after_idle \u9ed8\u8ba4\u503c\u4e3a 1\uff0c\u4f1a\u5bfc\u81f4\u95f2\u7f6e\u4e00\u6bb5\u65f6\u95f4\u540e\u62e5\u585e\u7a97\u53e3\u8d85\u65f6\uff0c\u5efa\u8bae\u8bbe\u7f6e\u4e3a 0 \uff0c\u5c24\u5176\u9002\u5408\u5927\u5e26\u5bbd\u9ad8\u5ef6\u8fdf\u573a\u666f\u3002 net.core.somaxconn \u00b6 net.core.somaxconn \u7528\u4e8e\u9650\u5236 socket \u76d1\u542c\u7684\u8fde\u63a5\u961f\u5217\u6570\u91cf\u3002\u9ed8\u8ba4\u503c\u4e3a 128 \u3002\u5bf9\u4e8e\u6709\u5927\u91cf\u7a81\u53d1\u8fde\u63a5\u7684\u573a\u666f\uff0c\u5efa\u8bae\u8bbe\u7f6e\u4e3a\u4e0d\u4f4e\u4e8e 1024 \u3002 net.ipv4.tcp_max_syn_backlog \u00b6 net.ipv4.tcp_max_syn_backlog \u7528\u4e8e\u9650\u5236\u5904\u4e8e SYN_RECV\uff08\u534a\u8fde\u63a5\uff09\u72b6\u6001\u7684 TCP \u8fde\u63a5\u6570\u91cf\u3002\u9ed8\u8ba4\u503c\u4e3a 128 \u3002\u5bf9\u4e8e\u6709\u5927\u91cf\u7a81\u53d1\u8fde\u63a5\u7684\u573a\u666f\uff0c\u5efa\u8bae\u8bbe\u7f6e\u4e3a\u4e0d\u4f4e\u4e8e 1024 \u3002 net.core.netdev_max_backlog \u00b6 net.core.netdev_max_backlog \u7528\u4e8e\u9650\u5236\u961f\u5217\u4e2d\u6570\u636e\u5305\u7684\u6570\u91cf\u3002\u9ed8\u8ba4\u503c\u4e3a 1000 \uff0c\u5efa\u8bae\u8bbe\u7f6e\u4e3a 10000 \u4ee5\u4e0a\uff0c\u5c24\u5176\u662f\u4e07\u5146\u7f51\u5361\u3002 net.ipv4.tcp_keepalive_* \u00b6 net.ipv4.tcp_keepalive_* \u662f\u4e00\u7cfb\u5217\u4fdd\u6301 TCP \u8fde\u63a5\u5b58\u6d3b\u7684\u53c2\u6570\u3002\u5bf9\u4e8e\u4f7f\u7528\u56db\u5c42\u900f\u660e\u8d1f\u8f7d\u5747\u8861\u7684\u5e94\u7528\u7a0b\u5e8f\uff0c\u5982\u679c\u7a7a\u95f2\u8fde\u63a5\u5f02\u5e38\u65ad\u5f00\uff0c\u8bf7\u589e\u5927 tcp_keepalive_time \u548c tcp_keepalive_intvl \u7684\u503c\u3002 net.ipv4.tcp_wmem/rmem \u00b6 TCP \u5957\u63a5\u5b57\u53d1\u9001/\u63a5\u6536\u7f13\u51b2\u6c60\u7684\u6700\u5c0f\u3001\u6700\u5927\u3001\u9ed8\u8ba4\u7a7a\u95f4\u3002\u5bf9\u4e8e\u5927\u8fde\u63a5\uff0c\u5efa\u8bae\u8bbe\u7f6e\u4e3a \u5e26\u5bbd (GB) *\u5f80\u8fd4\u65f6\u5ef6 (ms) \u3002 scheduler \u00b6 \u5bf9\u4e8e SSD \u8bbe\u5907\uff0c\u5efa\u8bae\u5c06 scheduler \u8bbe\u7f6e\u4e3a noop \u6216\u8005 none \uff0c\u8def\u5f84\u4e3a /sys/block/DEV_NAME/queue/scheduler \u3002 \u5176\u4ed6\u53c2\u6570 \u00b6 kernel.core_pattern \u00b6 \u5efa\u8bae\u8bbe\u7f6e\u4e3a core \uff0c\u5e76\u4e14\u5c06 kernel.core_uses_pid \u8bbe\u7f6e\u4e3a 1 \u3002 \u4fee\u6539\u53c2\u6570 \u00b6 sysctl \u547d\u4ee4 \u00b6 sysctl <conf_name> \u67e5\u770b\u5f53\u524d\u53c2\u6570\u503c\u3002 sysctl -w <conf_name>=<value> \u4e34\u65f6\u4fee\u6539\u53c2\u6570\u503c\uff0c\u7acb\u5373\u751f\u6548\uff0c\u91cd\u542f\u540e\u6062\u590d\u539f\u503c\u3002 sysctl -p [<file_path>] \u4ece\u6307\u5b9a\u914d\u7f6e\u6587\u4ef6\u91cc\u52a0\u8f7d Linux \u7cfb\u7edf\u53c2\u6570\uff0c\u9ed8\u8ba4\u4ece /etc/sysctl.conf \u52a0\u8f7d\u3002 prlimit \u00b6 \u547d\u4ee4 prlimit \u53ef\u4ee5\u83b7\u53d6\u548c\u8bbe\u7f6e\u8fdb\u7a0b\u8d44\u6e90\u7684\u9650\u5236\uff0c\u7ed3\u5408 sudo \u53ef\u4ee5\u4fee\u6539\u786c\u9608\u503c\uff0c\u4f8b\u5982\uff0c prlimit --nofile=140000 --pid=$$ \u8c03\u6574\u5f53\u524d\u8fdb\u7a0b\u5141\u8bb8\u7684\u6253\u5f00\u6587\u4ef6\u7684\u6700\u5927\u6570\u91cf\u4e3a 140000 \uff0c\u7acb\u5373\u751f\u6548\uff0c\u6b64\u547d\u4ee4\u4ec5\u652f\u6301 RedHat 7u \u6216\u66f4\u9ad8\u7248\u672c\u3002","title":"Linux \u5185\u6838\u914d\u7f6e"},{"location":"5.configurations-and-logs/1.configurations/6.kernel-config/#linux","text":"\u672c\u6587\u4ecb\u7ecd\u4e0eNebulaGraph\u76f8\u5173\u7684 Linux \u5185\u6838\u914d\u7f6e\uff0c\u5e76\u4ecb\u7ecd\u5982\u4f55\u4fee\u6539\u914d\u7f6e\u3002","title":"Linux \u5185\u6838\u914d\u7f6e"},{"location":"5.configurations-and-logs/1.configurations/6.kernel-config/#_1","text":"","title":"\u8d44\u6e90\u63a7\u5236"},{"location":"5.configurations-and-logs/1.configurations/6.kernel-config/#ulimit","text":"\u547d\u4ee4 ulimit \u7528\u4e8e\u4e3a\u5f53\u524d shell \u4f1a\u8bdd\u8bbe\u7f6e\u8d44\u6e90\u9608\u503c\uff0c\u6ce8\u610f\u4e8b\u9879\u5982\u4e0b\uff1a ulimit \u6240\u505a\u7684\u66f4\u6539\u4ec5\u5bf9\u5f53\u524d\u4f1a\u8bdd\u6216\u5b50\u8fdb\u7a0b\u751f\u6548\u3002 \u8d44\u6e90\u7684\u9608\u503c\uff08\u8f6f\u9608\u503c\uff09\u4e0d\u80fd\u8d85\u8fc7\u786c\u9608\u503c\u3002 \u666e\u901a\u7528\u6237\u4e0d\u80fd\u4f7f\u7528\u547d\u4ee4\u8c03\u6574\u786c\u9608\u503c\uff0c\u5373\u4f7f\u4f7f\u7528 sudo \u4e5f\u4e0d\u80fd\u8c03\u6574\u3002 \u4fee\u6539\u7cfb\u7edf\u7ea7\u522b\u6216\u8c03\u6574\u786c\u6027\u9608\u503c\uff0c\u8bf7\u7f16\u8f91\u6587\u4ef6 /etc/security/limits.conf \u3002\u8fd9\u79cd\u65b9\u5f0f\u9700\u8981\u91cd\u65b0\u767b\u5f55\u624d\u751f\u6548\u3002","title":"ulimit \u6ce8\u610f\u4e8b\u9879"},{"location":"5.configurations-and-logs/1.configurations/6.kernel-config/#ulimit_-c","text":"ulimit -c \u7528\u4e8e\u9650\u5236 core \u6587\u4ef6\u7684\u5927\u5c0f\uff0c\u5efa\u8bae\u8bbe\u7f6e\u4e3a unlimited \uff0c\u547d\u4ee4\u5982\u4e0b\uff1a ulimit -c unlimited","title":"ulimit -c"},{"location":"5.configurations-and-logs/1.configurations/6.kernel-config/#ulimit_-n","text":"ulimit -n \u7528\u4e8e\u9650\u5236\u6253\u5f00\u6587\u4ef6\u7684\u6570\u91cf\uff0c\u5efa\u8bae\u8bbe\u7f6e\u4e3a\u8d85\u8fc7 10 \u4e07\uff0c\u4f8b\u5982\uff1a ulimit -n 130000","title":"ulimit -n"},{"location":"5.configurations-and-logs/1.configurations/6.kernel-config/#_2","text":"","title":"\u5185\u5b58"},{"location":"5.configurations-and-logs/1.configurations/6.kernel-config/#vmswappiness","text":"vm.swappiness \u662f\u89e6\u53d1\u865a\u62df\u5185\u5b58\uff08swap\uff09\u7684\u7a7a\u95f2\u5185\u5b58\u767e\u5206\u6bd4\u3002\u503c\u8d8a\u5927\uff0c\u4f7f\u7528 swap \u7684\u53ef\u80fd\u6027\u5c31\u8d8a\u5927\uff0c\u5efa\u8bae\u8bbe\u7f6e\u4e3a 0\uff0c\u8868\u793a\u9996\u5148\u5220\u9664\u9875\u7f13\u5b58\u3002\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c0 \u8868\u793a \u5c3d\u91cf \u4e0d\u4f7f\u7528 swap\u3002","title":"vm.swappiness"},{"location":"5.configurations-and-logs/1.configurations/6.kernel-config/#vmmin_free_kbytes","text":"vm.min_free_kbytes \u7528\u4e8e\u8bbe\u7f6e Linux \u5185\u6838\u4fdd\u7559\u7684\u6700\u5c0f\u7a7a\u95f2\u5343\u5b57\u8282\u6570\u3002\u5982\u679c\u7cfb\u7edf\u5185\u5b58\u8db3\u591f\uff0c\u5efa\u8bae\u8bbe\u7f6e\u8f83\u5927\u503c\u3002\u4f8b\u5982\u7269\u7406\u5185\u5b58\u4e3a 128 GB\uff0c\u53ef\u4ee5\u5c06 vm.min_free_kbytes \u8bbe\u7f6e\u4e3a 5 GB\u3002\u5982\u679c\u503c\u592a\u5c0f\uff0c\u4f1a\u5bfc\u81f4\u7cfb\u7edf\u65e0\u6cd5\u7533\u8bf7\u8db3\u591f\u7684\u8fde\u7eed\u7269\u7406\u5185\u5b58\u3002","title":"vm.min_free_kbytes"},{"location":"5.configurations-and-logs/1.configurations/6.kernel-config/#vmmax_map_count","text":"vm.max_map_count \u7528\u4e8e\u9650\u5236\u5355\u4e2a\u8fdb\u7a0b\u7684 VMA\uff08\u865a\u62df\u5185\u5b58\u533a\u57df\uff09\u6570\u91cf\u3002\u9ed8\u8ba4\u503c\u4e3a 65530 \uff0c\u5bf9\u4e8e\u7edd\u5927\u591a\u6570\u5e94\u7528\u7a0b\u5e8f\u6765\u8bf4\u5df2\u7ecf\u8db3\u591f\u3002\u5982\u679c\u5e94\u7528\u7a0b\u5e8f\u56e0\u4e3a\u5185\u5b58\u6d88\u8017\u8fc7\u5927\u800c\u62a5\u9519\uff0c\u8bf7\u589e\u5927\u672c\u53c2\u6570\u7684\u503c\u3002","title":"vm.max_map_count"},{"location":"5.configurations-and-logs/1.configurations/6.kernel-config/#vmdirty_","text":"vm.dirty_* \u662f\u4e00\u7cfb\u5217\u63a7\u5236\u7cfb\u7edf\u810f\u6570\u636e\u7f13\u5b58\u7684\u53c2\u6570\u3002\u5bf9\u4e8e\u5199\u5bc6\u96c6\u578b\u573a\u666f\uff0c\u7528\u6237\u53ef\u4ee5\u6839\u636e\u9700\u8981\u8fdb\u884c\u8c03\u6574\uff08\u541e\u5410\u91cf\u4f18\u5148\u6216\u5ef6\u8fdf\u4f18\u5148\uff09\uff0c\u5efa\u8bae\u4f7f\u7528\u7cfb\u7edf\u9ed8\u8ba4\u503c\u3002","title":"vm.dirty_*"},{"location":"5.configurations-and-logs/1.configurations/6.kernel-config/#transparent_huge_page","text":"\u4e3a\u4e86\u964d\u4f4e\u5ef6\u8fdf\uff0c\u7528\u6237\u5fc5\u987b\u5173\u95ed THP\uff08transparent huge page\uff09\u3002\u547d\u4ee4\u5982\u4e0b\uff1a root# echo never > /sys/kernel/mm/transparent_hugepage/enabled root# echo never > /sys/kernel/mm/transparent_hugepage/defrag root# swapoff -a && swapon -a \u4e3a\u4e86\u9632\u6b62\u7cfb\u7edf\u91cd\u542f\u540e\u8be5\u914d\u7f6e\u5931\u6548\uff0c\u53ef\u4ee5\u5728GRUB\u914d\u7f6e\u6587\u4ef6\u6216 /etc/rc.local \u4e2d\u6dfb\u52a0\u76f8\u5173\u914d\u7f6e\uff0c\u4f7f\u7cfb\u7edf\u542f\u52a8\u65f6\u81ea\u52a8\u5173\u95ed THP\u3002","title":"Transparent huge page"},{"location":"5.configurations-and-logs/1.configurations/6.kernel-config/#_3","text":"","title":"\u7f51\u7edc"},{"location":"5.configurations-and-logs/1.configurations/6.kernel-config/#netipv4tcp_slow_start_after_idle","text":"net.ipv4.tcp_slow_start_after_idle \u9ed8\u8ba4\u503c\u4e3a 1\uff0c\u4f1a\u5bfc\u81f4\u95f2\u7f6e\u4e00\u6bb5\u65f6\u95f4\u540e\u62e5\u585e\u7a97\u53e3\u8d85\u65f6\uff0c\u5efa\u8bae\u8bbe\u7f6e\u4e3a 0 \uff0c\u5c24\u5176\u9002\u5408\u5927\u5e26\u5bbd\u9ad8\u5ef6\u8fdf\u573a\u666f\u3002","title":"net.ipv4.tcp_slow_start_after_idle"},{"location":"5.configurations-and-logs/1.configurations/6.kernel-config/#netcoresomaxconn","text":"net.core.somaxconn \u7528\u4e8e\u9650\u5236 socket \u76d1\u542c\u7684\u8fde\u63a5\u961f\u5217\u6570\u91cf\u3002\u9ed8\u8ba4\u503c\u4e3a 128 \u3002\u5bf9\u4e8e\u6709\u5927\u91cf\u7a81\u53d1\u8fde\u63a5\u7684\u573a\u666f\uff0c\u5efa\u8bae\u8bbe\u7f6e\u4e3a\u4e0d\u4f4e\u4e8e 1024 \u3002","title":"net.core.somaxconn"},{"location":"5.configurations-and-logs/1.configurations/6.kernel-config/#netipv4tcp_max_syn_backlog","text":"net.ipv4.tcp_max_syn_backlog \u7528\u4e8e\u9650\u5236\u5904\u4e8e SYN_RECV\uff08\u534a\u8fde\u63a5\uff09\u72b6\u6001\u7684 TCP \u8fde\u63a5\u6570\u91cf\u3002\u9ed8\u8ba4\u503c\u4e3a 128 \u3002\u5bf9\u4e8e\u6709\u5927\u91cf\u7a81\u53d1\u8fde\u63a5\u7684\u573a\u666f\uff0c\u5efa\u8bae\u8bbe\u7f6e\u4e3a\u4e0d\u4f4e\u4e8e 1024 \u3002","title":"net.ipv4.tcp_max_syn_backlog"},{"location":"5.configurations-and-logs/1.configurations/6.kernel-config/#netcorenetdev_max_backlog","text":"net.core.netdev_max_backlog \u7528\u4e8e\u9650\u5236\u961f\u5217\u4e2d\u6570\u636e\u5305\u7684\u6570\u91cf\u3002\u9ed8\u8ba4\u503c\u4e3a 1000 \uff0c\u5efa\u8bae\u8bbe\u7f6e\u4e3a 10000 \u4ee5\u4e0a\uff0c\u5c24\u5176\u662f\u4e07\u5146\u7f51\u5361\u3002","title":"net.core.netdev_max_backlog"},{"location":"5.configurations-and-logs/1.configurations/6.kernel-config/#netipv4tcp_keepalive_","text":"net.ipv4.tcp_keepalive_* \u662f\u4e00\u7cfb\u5217\u4fdd\u6301 TCP \u8fde\u63a5\u5b58\u6d3b\u7684\u53c2\u6570\u3002\u5bf9\u4e8e\u4f7f\u7528\u56db\u5c42\u900f\u660e\u8d1f\u8f7d\u5747\u8861\u7684\u5e94\u7528\u7a0b\u5e8f\uff0c\u5982\u679c\u7a7a\u95f2\u8fde\u63a5\u5f02\u5e38\u65ad\u5f00\uff0c\u8bf7\u589e\u5927 tcp_keepalive_time \u548c tcp_keepalive_intvl \u7684\u503c\u3002","title":"net.ipv4.tcp_keepalive_*"},{"location":"5.configurations-and-logs/1.configurations/6.kernel-config/#netipv4tcp_wmemrmem","text":"TCP \u5957\u63a5\u5b57\u53d1\u9001/\u63a5\u6536\u7f13\u51b2\u6c60\u7684\u6700\u5c0f\u3001\u6700\u5927\u3001\u9ed8\u8ba4\u7a7a\u95f4\u3002\u5bf9\u4e8e\u5927\u8fde\u63a5\uff0c\u5efa\u8bae\u8bbe\u7f6e\u4e3a \u5e26\u5bbd (GB) *\u5f80\u8fd4\u65f6\u5ef6 (ms) \u3002","title":"net.ipv4.tcp_wmem/rmem"},{"location":"5.configurations-and-logs/1.configurations/6.kernel-config/#scheduler","text":"\u5bf9\u4e8e SSD \u8bbe\u5907\uff0c\u5efa\u8bae\u5c06 scheduler \u8bbe\u7f6e\u4e3a noop \u6216\u8005 none \uff0c\u8def\u5f84\u4e3a /sys/block/DEV_NAME/queue/scheduler \u3002","title":"scheduler"},{"location":"5.configurations-and-logs/1.configurations/6.kernel-config/#_4","text":"","title":"\u5176\u4ed6\u53c2\u6570"},{"location":"5.configurations-and-logs/1.configurations/6.kernel-config/#kernelcore_pattern","text":"\u5efa\u8bae\u8bbe\u7f6e\u4e3a core \uff0c\u5e76\u4e14\u5c06 kernel.core_uses_pid \u8bbe\u7f6e\u4e3a 1 \u3002","title":"kernel.core_pattern"},{"location":"5.configurations-and-logs/1.configurations/6.kernel-config/#_5","text":"","title":"\u4fee\u6539\u53c2\u6570"},{"location":"5.configurations-and-logs/1.configurations/6.kernel-config/#sysctl","text":"sysctl <conf_name> \u67e5\u770b\u5f53\u524d\u53c2\u6570\u503c\u3002 sysctl -w <conf_name>=<value> \u4e34\u65f6\u4fee\u6539\u53c2\u6570\u503c\uff0c\u7acb\u5373\u751f\u6548\uff0c\u91cd\u542f\u540e\u6062\u590d\u539f\u503c\u3002 sysctl -p [<file_path>] \u4ece\u6307\u5b9a\u914d\u7f6e\u6587\u4ef6\u91cc\u52a0\u8f7d Linux \u7cfb\u7edf\u53c2\u6570\uff0c\u9ed8\u8ba4\u4ece /etc/sysctl.conf \u52a0\u8f7d\u3002","title":"sysctl \u547d\u4ee4"},{"location":"5.configurations-and-logs/1.configurations/6.kernel-config/#prlimit","text":"\u547d\u4ee4 prlimit \u53ef\u4ee5\u83b7\u53d6\u548c\u8bbe\u7f6e\u8fdb\u7a0b\u8d44\u6e90\u7684\u9650\u5236\uff0c\u7ed3\u5408 sudo \u53ef\u4ee5\u4fee\u6539\u786c\u9608\u503c\uff0c\u4f8b\u5982\uff0c prlimit --nofile=140000 --pid=$$ \u8c03\u6574\u5f53\u524d\u8fdb\u7a0b\u5141\u8bb8\u7684\u6253\u5f00\u6587\u4ef6\u7684\u6700\u5927\u6570\u91cf\u4e3a 140000 \uff0c\u7acb\u5373\u751f\u6548\uff0c\u6b64\u547d\u4ee4\u4ec5\u652f\u6301 RedHat 7u \u6216\u66f4\u9ad8\u7248\u672c\u3002","title":"prlimit"},{"location":"5.configurations-and-logs/2.log-management/logs/","text":"\u8fd0\u884c\u65e5\u5fd7 \u00b6 \u8fd0\u884c\u65e5\u5fd7\u901a\u5e38\u63d0\u4f9b\u7ed9 DBA \u6216\u5f00\u53d1\u4eba\u5458\u67e5\u770b\uff0c\u5f53\u7cfb\u7edf\u51fa\u73b0\u6545\u969c\uff0cDBA \u6216\u5f00\u53d1\u4eba\u5458\u53ef\u4ee5\u6839\u636e\u8fd0\u884c\u65e5\u5fd7\u5b9a\u4f4d\u95ee\u9898\u3002 NebulaGraph\u9ed8\u8ba4\u4f7f\u7528 glog \u6253\u5370\u8fd0\u884c\u65e5\u5fd7\uff0c\u4f7f\u7528 gflags \u63a7\u5236\u65e5\u5fd7\u7ea7\u522b\uff0c\u5e76\u5728\u8fd0\u884c\u65f6\u901a\u8fc7 HTTP \u63a5\u53e3\u52a8\u6001\u4fee\u6539\u65e5\u5fd7\u7ea7\u522b\uff0c\u65b9\u4fbf\u8ddf\u8e2a\u95ee\u9898\u3002 \u8fd0\u884c\u65e5\u5fd7\u76ee\u5f55 \u00b6 \u8fd0\u884c\u65e5\u5fd7\u7684\u9ed8\u8ba4\u76ee\u5f55\u4e3a /usr/local/nebula/logs/ \u3002 \u5982\u679c\u5728NebulaGraph\u8fd0\u884c\u8fc7\u7a0b\u4e2d\u5220\u9664\u8fd0\u884c\u65e5\u5fd7\u76ee\u5f55\uff0c\u65e5\u5fd7\u4e0d\u4f1a\u7ee7\u7eed\u6253\u5370\uff0c\u4f46\u662f\u4e0d\u4f1a\u5f71\u54cd\u4e1a\u52a1\u3002\u91cd\u542f\u670d\u52a1\u53ef\u4ee5\u6062\u590d\u6b63\u5e38\u3002 \u914d\u7f6e\u8bf4\u660e \u00b6 minloglevel \uff1a\u6700\u5c0f\u65e5\u5fd7\u7ea7\u522b\uff0c\u5373\u4e0d\u4f1a\u8bb0\u5f55\u4f4e\u4e8e\u8fd9\u4e2a\u7ea7\u522b\u7684\u65e5\u5fd7\u3002\u53ef\u9009\u503c\u4e3a 0 \uff08INFO\uff09\u3001 1 \uff08WARNING\uff09\u3001 2 \uff08ERROR\uff09\u3001 3 \uff08FATAL\uff09\u3002\u5efa\u8bae\u5728\u8c03\u8bd5\u65f6\u8bbe\u7f6e\u4e3a 0 \uff0c\u751f\u4ea7\u73af\u5883\u4e2d\u8bbe\u7f6e\u4e3a 1 \u3002\u5982\u679c\u8bbe\u7f6e\u4e3a 4 \uff0cNebulaGraph\u4e0d\u4f1a\u8bb0\u5f55\u4efb\u4f55\u65e5\u5fd7\u3002 v \uff1a\u65e5\u5fd7\u8be6\u7ec6\u7ea7\u522b\uff0c\u503c\u8d8a\u5927\uff0c\u65e5\u5fd7\u8bb0\u5f55\u8d8a\u8be6\u7ec6\u3002\u53ef\u9009\u503c\u4e3a 0 \u3001 1 \u3001 2 \u3001 3 \u3002 Meta \u670d\u52a1\u3001Graph \u670d\u52a1\u548c Storage \u670d\u52a1\u7684\u65e5\u5fd7\u7ea7\u522b\u53ef\u4ee5\u5728\u5404\u81ea\u7684\u914d\u7f6e\u6587\u4ef6\u4e2d\u67e5\u770b\uff0c\u9ed8\u8ba4\u8def\u5f84\u4e3a /usr/local/nebula/etc/ \u3002 \u67e5\u770b\u8fd0\u884c\u65e5\u5fd7\u7ea7\u522b \u00b6 \u4f7f\u7528\u5982\u4e0b\u547d\u4ee4\u67e5\u770b\u5f53\u524d\u6240\u6709\u7684 gflags \u53c2\u6570\uff08\u5305\u62ec\u65e5\u5fd7\u53c2\u6570\uff09\uff1a $ curl <ws_ip>:<ws_port>/flags \u53c2\u6570 \u8bf4\u660e ws_ip HTTP \u670d\u52a1\u7684 IP \u5730\u5740\uff0c\u53ef\u4ee5\u5728\u914d\u7f6e\u6587\u4ef6\u4e2d\u67e5\u770b\u3002\u9ed8\u8ba4\u503c\u4e3a 127.0.0.1 \u3002 ws_port HTTP \u670d\u52a1\u7684\u7aef\u53e3\uff0c\u53ef\u4ee5\u5728\u914d\u7f6e\u6587\u4ef6\u4e2d\u67e5\u770b\u3002\u9ed8\u8ba4\u503c\u5206\u522b\u4e3a 19559 \uff08Meta\uff09\u3001 19669 \uff08Graph\uff09 19779 \uff08Storage\uff09\u3002 \u793a\u4f8b\u5982\u4e0b\uff1a \u67e5\u770b Meta \u670d\u52a1\u5f53\u524d\u7684\u6700\u5c0f\u65e5\u5fd7\u7ea7\u522b\uff1a $ curl 127 .0.0.1:19559/flags | grep 'minloglevel' \u67e5\u770b Storage \u670d\u52a1\u5f53\u524d\u7684\u65e5\u5fd7\u8be6\u7ec6\u7ea7\u522b\uff1a $ curl 127 .0.0.1:19779/flags | grep -w 'v' \u4fee\u6539\u8fd0\u884c\u65e5\u5fd7\u7ea7\u522b \u00b6 \u4f7f\u7528\u5982\u4e0b\u547d\u4ee4\u4fee\u6539\u8fd0\u884c\u65e5\u5fd7\u7ea7\u522b\uff1a $ curl -X PUT -H \"Content-Type: application/json\" -d '{\"<key>\":<value>[,\"<key>\":<value>]}' \"<ws_ip>:<ws_port>/flags\" \u53c2\u6570 \u8bf4\u660e key \u5f85\u4fee\u6539\u7684\u8fd0\u884c\u65e5\u5fd7\u7c7b\u578b\uff0c\u53ef\u9009\u503c\u8bf7\u53c2\u89c1 \u914d\u7f6e\u8bf4\u660e \u3002 value \u8fd0\u884c\u65e5\u5fd7\u7ea7\u522b\uff0c\u53ef\u9009\u503c\u8bf7\u53c2\u89c1 \u914d\u7f6e\u8bf4\u660e \u3002 ws_ip HTTP \u670d\u52a1\u7684 IP \u5730\u5740\uff0c\u53ef\u4ee5\u5728\u914d\u7f6e\u6587\u4ef6\u4e2d\u67e5\u770b\u3002\u9ed8\u8ba4\u503c\u4e3a 127.0.0.1 \u3002 ws_port HTTP \u670d\u52a1\u7684\u7aef\u53e3\uff0c\u53ef\u4ee5\u5728\u914d\u7f6e\u6587\u4ef6\u4e2d\u67e5\u770b\u3002\u9ed8\u8ba4\u503c\u5206\u522b\u4e3a 19559 \uff08Meta\uff09\u3001 19669 \uff08Graph\uff09 19779 \uff08Storage\uff09\u3002 \u793a\u4f8b\u5982\u4e0b\uff1a $ curl -X PUT -H \"Content-Type: application/json\" -d '{\"minloglevel\":0,\"v\":3}' \"127.0.0.1:19779/flags\" # storaged $ curl -X PUT -H \"Content-Type: application/json\" -d '{\"minloglevel\":0,\"v\":3}' \"127.0.0.1:19669/flags\" # graphd $ curl -X PUT -H \"Content-Type: application/json\" -d '{\"minloglevel\":0,\"v\":3}' \"127.0.0.1:19559/flags\" # metad \u5982\u679c\u5728NebulaGraph\u8fd0\u884c\u65f6\u4fee\u6539\u4e86\u8fd0\u884c\u65e5\u5fd7\u7ea7\u522b\uff0c\u91cd\u542f\u670d\u52a1\u540e\u4f1a\u6062\u590d\u4e3a\u914d\u7f6e\u6587\u4ef6\u4e2d\u8bbe\u7f6e\u7684\u7ea7\u522b\uff0c\u5982\u679c\u9700\u8981\u6c38\u4e45\u4fee\u6539\uff0c\u8bf7\u4fee\u6539 \u914d\u7f6e\u6587\u4ef6 \u3002 RocksDB \u8fd0\u884c\u65e5\u5fd7 \u00b6 RocksDB \u7684\u8fd0\u884c\u65e5\u5fd7\u901a\u5e38\u5728 /usr/local/nebula/data/storage/nebula/$id/data/LOG , \u5176\u4e2d $id \u4e3a\u5b9e\u4f8b\u53f7\u3002\u8be5\u65e5\u5fd7\u901a\u5e38\u7528\u4e8e\u8c03\u8bd5 RocksDB \u53c2\u6570\u3002 \u56de\u6536\u65e5\u5fd7 \u00b6 \u8fd0\u884c\u65e5\u5fd7\u6587\u4ef6\u8fc7\u5927\u65f6\u5982\u4f55\u56de\u6536\u65e5\u5fd7\uff0c\u8bf7\u53c2\u89c1 \u5e38\u89c1\u95ee\u9898 \u3002","title":"\u8fd0\u884c\u65e5\u5fd7"},{"location":"5.configurations-and-logs/2.log-management/logs/#_1","text":"\u8fd0\u884c\u65e5\u5fd7\u901a\u5e38\u63d0\u4f9b\u7ed9 DBA \u6216\u5f00\u53d1\u4eba\u5458\u67e5\u770b\uff0c\u5f53\u7cfb\u7edf\u51fa\u73b0\u6545\u969c\uff0cDBA \u6216\u5f00\u53d1\u4eba\u5458\u53ef\u4ee5\u6839\u636e\u8fd0\u884c\u65e5\u5fd7\u5b9a\u4f4d\u95ee\u9898\u3002 NebulaGraph\u9ed8\u8ba4\u4f7f\u7528 glog \u6253\u5370\u8fd0\u884c\u65e5\u5fd7\uff0c\u4f7f\u7528 gflags \u63a7\u5236\u65e5\u5fd7\u7ea7\u522b\uff0c\u5e76\u5728\u8fd0\u884c\u65f6\u901a\u8fc7 HTTP \u63a5\u53e3\u52a8\u6001\u4fee\u6539\u65e5\u5fd7\u7ea7\u522b\uff0c\u65b9\u4fbf\u8ddf\u8e2a\u95ee\u9898\u3002","title":"\u8fd0\u884c\u65e5\u5fd7"},{"location":"5.configurations-and-logs/2.log-management/logs/#_2","text":"\u8fd0\u884c\u65e5\u5fd7\u7684\u9ed8\u8ba4\u76ee\u5f55\u4e3a /usr/local/nebula/logs/ \u3002 \u5982\u679c\u5728NebulaGraph\u8fd0\u884c\u8fc7\u7a0b\u4e2d\u5220\u9664\u8fd0\u884c\u65e5\u5fd7\u76ee\u5f55\uff0c\u65e5\u5fd7\u4e0d\u4f1a\u7ee7\u7eed\u6253\u5370\uff0c\u4f46\u662f\u4e0d\u4f1a\u5f71\u54cd\u4e1a\u52a1\u3002\u91cd\u542f\u670d\u52a1\u53ef\u4ee5\u6062\u590d\u6b63\u5e38\u3002","title":"\u8fd0\u884c\u65e5\u5fd7\u76ee\u5f55"},{"location":"5.configurations-and-logs/2.log-management/logs/#_3","text":"minloglevel \uff1a\u6700\u5c0f\u65e5\u5fd7\u7ea7\u522b\uff0c\u5373\u4e0d\u4f1a\u8bb0\u5f55\u4f4e\u4e8e\u8fd9\u4e2a\u7ea7\u522b\u7684\u65e5\u5fd7\u3002\u53ef\u9009\u503c\u4e3a 0 \uff08INFO\uff09\u3001 1 \uff08WARNING\uff09\u3001 2 \uff08ERROR\uff09\u3001 3 \uff08FATAL\uff09\u3002\u5efa\u8bae\u5728\u8c03\u8bd5\u65f6\u8bbe\u7f6e\u4e3a 0 \uff0c\u751f\u4ea7\u73af\u5883\u4e2d\u8bbe\u7f6e\u4e3a 1 \u3002\u5982\u679c\u8bbe\u7f6e\u4e3a 4 \uff0cNebulaGraph\u4e0d\u4f1a\u8bb0\u5f55\u4efb\u4f55\u65e5\u5fd7\u3002 v \uff1a\u65e5\u5fd7\u8be6\u7ec6\u7ea7\u522b\uff0c\u503c\u8d8a\u5927\uff0c\u65e5\u5fd7\u8bb0\u5f55\u8d8a\u8be6\u7ec6\u3002\u53ef\u9009\u503c\u4e3a 0 \u3001 1 \u3001 2 \u3001 3 \u3002 Meta \u670d\u52a1\u3001Graph \u670d\u52a1\u548c Storage \u670d\u52a1\u7684\u65e5\u5fd7\u7ea7\u522b\u53ef\u4ee5\u5728\u5404\u81ea\u7684\u914d\u7f6e\u6587\u4ef6\u4e2d\u67e5\u770b\uff0c\u9ed8\u8ba4\u8def\u5f84\u4e3a /usr/local/nebula/etc/ \u3002","title":"\u914d\u7f6e\u8bf4\u660e"},{"location":"5.configurations-and-logs/2.log-management/logs/#_4","text":"\u4f7f\u7528\u5982\u4e0b\u547d\u4ee4\u67e5\u770b\u5f53\u524d\u6240\u6709\u7684 gflags \u53c2\u6570\uff08\u5305\u62ec\u65e5\u5fd7\u53c2\u6570\uff09\uff1a $ curl <ws_ip>:<ws_port>/flags \u53c2\u6570 \u8bf4\u660e ws_ip HTTP \u670d\u52a1\u7684 IP \u5730\u5740\uff0c\u53ef\u4ee5\u5728\u914d\u7f6e\u6587\u4ef6\u4e2d\u67e5\u770b\u3002\u9ed8\u8ba4\u503c\u4e3a 127.0.0.1 \u3002 ws_port HTTP \u670d\u52a1\u7684\u7aef\u53e3\uff0c\u53ef\u4ee5\u5728\u914d\u7f6e\u6587\u4ef6\u4e2d\u67e5\u770b\u3002\u9ed8\u8ba4\u503c\u5206\u522b\u4e3a 19559 \uff08Meta\uff09\u3001 19669 \uff08Graph\uff09 19779 \uff08Storage\uff09\u3002 \u793a\u4f8b\u5982\u4e0b\uff1a \u67e5\u770b Meta \u670d\u52a1\u5f53\u524d\u7684\u6700\u5c0f\u65e5\u5fd7\u7ea7\u522b\uff1a $ curl 127 .0.0.1:19559/flags | grep 'minloglevel' \u67e5\u770b Storage \u670d\u52a1\u5f53\u524d\u7684\u65e5\u5fd7\u8be6\u7ec6\u7ea7\u522b\uff1a $ curl 127 .0.0.1:19779/flags | grep -w 'v'","title":"\u67e5\u770b\u8fd0\u884c\u65e5\u5fd7\u7ea7\u522b"},{"location":"5.configurations-and-logs/2.log-management/logs/#_5","text":"\u4f7f\u7528\u5982\u4e0b\u547d\u4ee4\u4fee\u6539\u8fd0\u884c\u65e5\u5fd7\u7ea7\u522b\uff1a $ curl -X PUT -H \"Content-Type: application/json\" -d '{\"<key>\":<value>[,\"<key>\":<value>]}' \"<ws_ip>:<ws_port>/flags\" \u53c2\u6570 \u8bf4\u660e key \u5f85\u4fee\u6539\u7684\u8fd0\u884c\u65e5\u5fd7\u7c7b\u578b\uff0c\u53ef\u9009\u503c\u8bf7\u53c2\u89c1 \u914d\u7f6e\u8bf4\u660e \u3002 value \u8fd0\u884c\u65e5\u5fd7\u7ea7\u522b\uff0c\u53ef\u9009\u503c\u8bf7\u53c2\u89c1 \u914d\u7f6e\u8bf4\u660e \u3002 ws_ip HTTP \u670d\u52a1\u7684 IP \u5730\u5740\uff0c\u53ef\u4ee5\u5728\u914d\u7f6e\u6587\u4ef6\u4e2d\u67e5\u770b\u3002\u9ed8\u8ba4\u503c\u4e3a 127.0.0.1 \u3002 ws_port HTTP \u670d\u52a1\u7684\u7aef\u53e3\uff0c\u53ef\u4ee5\u5728\u914d\u7f6e\u6587\u4ef6\u4e2d\u67e5\u770b\u3002\u9ed8\u8ba4\u503c\u5206\u522b\u4e3a 19559 \uff08Meta\uff09\u3001 19669 \uff08Graph\uff09 19779 \uff08Storage\uff09\u3002 \u793a\u4f8b\u5982\u4e0b\uff1a $ curl -X PUT -H \"Content-Type: application/json\" -d '{\"minloglevel\":0,\"v\":3}' \"127.0.0.1:19779/flags\" # storaged $ curl -X PUT -H \"Content-Type: application/json\" -d '{\"minloglevel\":0,\"v\":3}' \"127.0.0.1:19669/flags\" # graphd $ curl -X PUT -H \"Content-Type: application/json\" -d '{\"minloglevel\":0,\"v\":3}' \"127.0.0.1:19559/flags\" # metad \u5982\u679c\u5728NebulaGraph\u8fd0\u884c\u65f6\u4fee\u6539\u4e86\u8fd0\u884c\u65e5\u5fd7\u7ea7\u522b\uff0c\u91cd\u542f\u670d\u52a1\u540e\u4f1a\u6062\u590d\u4e3a\u914d\u7f6e\u6587\u4ef6\u4e2d\u8bbe\u7f6e\u7684\u7ea7\u522b\uff0c\u5982\u679c\u9700\u8981\u6c38\u4e45\u4fee\u6539\uff0c\u8bf7\u4fee\u6539 \u914d\u7f6e\u6587\u4ef6 \u3002","title":"\u4fee\u6539\u8fd0\u884c\u65e5\u5fd7\u7ea7\u522b"},{"location":"5.configurations-and-logs/2.log-management/logs/#rocksdb","text":"RocksDB \u7684\u8fd0\u884c\u65e5\u5fd7\u901a\u5e38\u5728 /usr/local/nebula/data/storage/nebula/$id/data/LOG , \u5176\u4e2d $id \u4e3a\u5b9e\u4f8b\u53f7\u3002\u8be5\u65e5\u5fd7\u901a\u5e38\u7528\u4e8e\u8c03\u8bd5 RocksDB \u53c2\u6570\u3002","title":"RocksDB \u8fd0\u884c\u65e5\u5fd7"},{"location":"5.configurations-and-logs/2.log-management/logs/#_6","text":"\u8fd0\u884c\u65e5\u5fd7\u6587\u4ef6\u8fc7\u5927\u65f6\u5982\u4f55\u56de\u6536\u65e5\u5fd7\uff0c\u8bf7\u53c2\u89c1 \u5e38\u89c1\u95ee\u9898 \u3002","title":"\u56de\u6536\u65e5\u5fd7"},{"location":"6.monitor-and-metrics/1.query-performance-metrics/","text":"\u67e5\u8be2NebulaGraph\u76d1\u63a7\u6307\u6807 \u00b6 NebulaGraph\u652f\u6301\u591a\u79cd\u65b9\u5f0f\u67e5\u8be2\u670d\u52a1\u7684\u76d1\u63a7\u6307\u6807\uff0c\u672c\u6587\u5c06\u4ecb\u7ecd\u6700\u57fa\u7840\u7684\u65b9\u5f0f\uff0c\u5373\u901a\u8fc7 HTTP \u7aef\u53e3\u67e5\u8be2\u3002 \u76d1\u63a7\u6307\u6807\u7ed3\u6784\u8bf4\u660e \u00b6 NebulaGraph\u7684\u6bcf\u4e2a\u76d1\u63a7\u6307\u6807\u90fd\u7531\u4e09\u4e2a\u90e8\u5206\u7ec4\u6210\uff0c\u4e2d\u95f4\u7528\u82f1\u6587\u53e5\u53f7\uff08.\uff09\u9694\u5f00\uff0c\u4f8b\u5982 num_queries.sum.600 \u3002\u4e0d\u540c\u7684NebulaGraph\u670d\u52a1\u652f\u6301\u67e5\u8be2\u7684\u76d1\u63a7\u6307\u6807\u4e5f\u4e0d\u540c\u3002\u6307\u6807\u7ed3\u6784\u7684\u8bf4\u660e\u5982\u4e0b\u3002 \u7c7b\u522b \u793a\u4f8b \u8bf4\u660e \u6307\u6807\u540d\u79f0 num_queries \u7b80\u5355\u63cf\u8ff0\u6307\u6807\u7684\u542b\u4e49\u3002 \u7edf\u8ba1\u7c7b\u578b sum \u6307\u6807\u7edf\u8ba1\u7684\u65b9\u6cd5\u3002\u5f53\u524d\u652f\u6301 SUM\u3001AVG\u3001RATE \u548c P \u5206\u4f4d\u6570\uff08P75\u3001P95\u3001P99\u3001P999\uff09\u3002 \u7edf\u8ba1\u65f6\u95f4 600 \u6307\u6807\u7edf\u8ba1\u7684\u65f6\u95f4\u8303\u56f4\uff0c\u5f53\u524d\u652f\u6301 5 \u79d2\u300160 \u79d2\u3001600 \u79d2\u548c 3600 \u79d2\uff0c\u5206\u522b\u8868\u793a\u6700\u8fd1 5 \u79d2\u3001\u6700\u8fd1 1 \u5206\u949f\u3001\u6700\u8fd1 10 \u5206\u949f\u548c\u6700\u8fd1 1 \u5c0f\u65f6\u3002 \u901a\u8fc7 HTTP \u7aef\u53e3\u67e5\u8be2\u76d1\u63a7\u6307\u6807 \u00b6 \u8bed\u6cd5 \u00b6 curl -G \"http://<ip>:<port>/stats?stats=<metric_name_list> [&format=json]\" \u9009\u9879 \u8bf4\u660e ip \u670d\u52a1\u5668\u7684 IP \u5730\u5740\uff0c\u53ef\u4ee5\u5728\u5b89\u88c5\u76ee\u5f55\u5185\u67e5\u770b\u914d\u7f6e\u6587\u4ef6\u83b7\u53d6\u3002 port \u670d\u52a1\u5668\u7684 HTTP \u7aef\u53e3\uff0c\u53ef\u4ee5\u5728\u5b89\u88c5\u76ee\u5f55\u5185\u67e5\u770b\u914d\u7f6e\u6587\u4ef6\u83b7\u53d6\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0cMeta \u670d\u52a1\u7aef\u53e3\u4e3a 19559\uff0cGraph \u670d\u52a1\u7aef\u53e3\u4e3a 19669\uff0cStorage \u670d\u52a1\u7aef\u53e3\u4e3a 19779\u3002 metric_name_list \u76d1\u63a7\u6307\u6807\u540d\u79f0\uff0c\u591a\u4e2a\u76d1\u63a7\u6307\u6807\u7528\u82f1\u6587\u9017\u53f7\uff08,\uff09\u9694\u5f00\u3002 &format=json \u5c06\u7ed3\u679c\u4ee5 JSON \u683c\u5f0f\u8fd4\u56de\u3002 Note \u5982\u679cNebulaGraph\u670d\u52a1\u90e8\u7f72\u5728\u5bb9\u5668\u4e2d\uff0c\u9700\u8981\u6267\u884c docker-compose ps \u547d\u4ee4\u67e5\u770b\u6620\u5c04\u5230\u5bb9\u5668\u5916\u90e8\u7684\u7aef\u53e3\uff0c\u7136\u540e\u901a\u8fc7\u8be5\u7aef\u53e3\u67e5\u8be2\u3002 \u67e5\u8be2\u5355\u4e2a\u76d1\u63a7\u6307\u6807 \u00b6 \u67e5\u8be2 Graph \u670d\u52a1\u4e2d\uff0c\u6700\u8fd1 10 \u5206\u949f\u7684\u8bf7\u6c42\u603b\u6570\u3002 $ curl -G \"http://192.168.8.40:19669/stats?stats=num_queries.sum.600\" num_queries.sum.600 = 400 \u67e5\u8be2\u591a\u4e2a\u76d1\u63a7\u6307\u6807 \u00b6 \u67e5\u8be2 Meta \u670d\u52a1\u4e2d\uff0c\u6700\u8fd1 1 \u5206\u949f\u7684\u5fc3\u8df3\u5e73\u5747\u5ef6\u8fdf\u548c\u6700\u8fd1 10 \u5206\u949f P99 \u5fc3\u8df3\uff081%\u6700\u6162\u7684\u5fc3\u8df3\uff09\u7684\u5e73\u5747\u5ef6\u8fdf\u3002 $ curl -G \"http://192.168.8.40:19559/stats?stats=heartbeat_latency_us.avg.60,heartbeat_latency_us.p99.600\" heartbeat_latency_us.avg.60 = 281 heartbeat_latency_us.p99.600 = 985 \u67e5\u8be2\u76d1\u63a7\u6307\u6807\u5e76\u4ee5 JSON \u683c\u5f0f\u8fd4\u56de \u00b6 \u67e5\u8be2 Storage \u670d\u52a1\u4e2d\uff0c\u6700\u8fd1 10 \u5206\u949f\u65b0\u589e\u7684\u70b9\u6570\u91cf\uff0c\u5e76\u4ee5 JSON \u683c\u5f0f\u8fd4\u56de\u7ed3\u679c\u3002 $ curl -G \"http://192.168.8.40:19779/stats?stats=num_add_vertices.sum.600&format=json\" [{ \"value\" :1, \"name\" : \"num_add_vertices.sum.600\" }] \u67e5\u8be2\u670d\u52a1\u5668\u7684\u6240\u6709\u76d1\u63a7\u6307\u6807 \u00b6 \u4e0d\u6307\u5b9a\u67e5\u8be2\u67d0\u4e2a\u76d1\u63a7\u6307\u6807\u65f6\uff0c\u4f1a\u8fd4\u56de\u8be5\u670d\u52a1\u5668\u4e0a\u6240\u6709\u7684\u76d1\u63a7\u6307\u6807\u3002 $ curl -G \"http://192.168.8.40:19559/stats\" heartbeat_latency_us.avg.5 = 304 heartbeat_latency_us.avg.60 = 308 heartbeat_latency_us.avg.600 = 299 heartbeat_latency_us.avg.3600 = 285 heartbeat_latency_us.p75.5 = 652 heartbeat_latency_us.p75.60 = 669 heartbeat_latency_us.p75.600 = 651 heartbeat_latency_us.p75.3600 = 642 heartbeat_latency_us.p95.5 = 930 heartbeat_latency_us.p95.60 = 963 heartbeat_latency_us.p95.600 = 933 heartbeat_latency_us.p95.3600 = 929 heartbeat_latency_us.p99.5 = 986 heartbeat_latency_us.p99.60 = 1409 heartbeat_latency_us.p99.600 = 989 heartbeat_latency_us.p99.3600 = 986 num_heartbeats.rate.5 = 0 num_heartbeats.rate.60 = 0 num_heartbeats.rate.600 = 0 num_heartbeats.rate.3600 = 0 num_heartbeats.sum.5 = 2 num_heartbeats.sum.60 = 40 num_heartbeats.sum.600 = 394 num_heartbeats.sum.3600 = 2364 ... \u67e5\u8be2\u56fe\u7a7a\u95f4\u76d1\u63a7\u6307\u6807 \u00b6 Graph \u670d\u52a1\u652f\u6301\u4e00\u7cfb\u5217\u57fa\u4e8e\u56fe\u7a7a\u95f4\u7684\u76d1\u63a7\u6307\u6807\uff0c\u5bf9\u4e0d\u540c\u56fe\u7a7a\u95f4\u7684\u6570\u636e\u5206\u522b\u8bb0\u5f55\u3002 \u56fe\u7a7a\u95f4\u6307\u6807\u53ea\u80fd\u901a\u8fc7\u67e5\u8be2\u6240\u6709\u76d1\u63a7\u6307\u6807\u7684\u5f62\u5f0f\u67e5\u8be2\u5230\uff0c\u4f8b\u5982 curl -G \"http://192.168.8.40:19559/stats\" \uff0c\u8fd4\u56de\u7ed3\u679c\u4e2d\u4ee5 {space=space_name} \u7684\u5f62\u5f0f\u5305\u542b\u56fe\u7a7a\u95f4\u540d\u79f0\uff0c\u4f8b\u5982 num_active_queries{space=basketballplayer}.sum.5=0 \u3002 Caution \u5982\u9700\u5f00\u542f\u56fe\u7a7a\u95f4\u76d1\u63a7\u6307\u6807\uff0c\u5148\u5728 Graph \u670d\u52a1\u7684\u914d\u7f6e\u6587\u4ef6\u4e2d\u5c06 enable_space_level_metrics \u53c2\u6570\u7684\u503c\u4fee\u6539\u4e3a true \uff0c\u518d\u542f\u52a8NebulaGraph\u3002\u4fee\u6539\u914d\u7f6e\u7684\u8be6\u7ec6\u65b9\u5f0f\u53c2\u89c1 \u914d\u7f6e\u7ba1\u7406 \u3002 \u76d1\u63a7\u6307\u6807\u8bf4\u660e \u00b6 Graph \u00b6 \u53c2\u6570 \u8bf4\u660e num_active_queries \u6d3b\u8dc3\u7684\u67e5\u8be2\u8bed\u53e5\u6570\u7684\u53d8\u5316\u6570\u3002 \u8ba1\u7b97\u516c\u5f0f\uff1a\u65f6\u95f4\u8303\u56f4\u5185\u5f00\u59cb\u6267\u884c\u7684\u8bed\u53e5\u6570\u51cf\u53bb\u6267\u884c\u5b8c\u6bd5\u7684\u8bed\u53e5\u6570\u3002 num_active_sessions \u6d3b\u8dc3\u7684\u4f1a\u8bdd\u6570\u7684\u53d8\u5316\u6570\u3002 \u8ba1\u7b97\u516c\u5f0f\uff1a\u65f6\u95f4\u8303\u56f4\u5185\u767b\u5f55\u7684\u4f1a\u8bdd\u6570\u51cf\u53bb\u767b\u51fa\u7684\u4f1a\u8bdd\u6570\u3002 \u4f8b\u5982\u67e5\u8be2num_active_sessions.sum.5\uff0c\u8fc7\u53bb 5 \u79d2\u4e2d\u767b\u5f55\u4e86 10 \u4e2a\u4f1a\u8bdd\u6570\uff0c\u767b\u51fa\u4e86 30 \u4e2a\u4f1a\u8bdd\u6570\uff0c\u90a3\u4e48\u8be5\u6307\u6807\u503c\u5c31\u662f -20 \uff0810-30\uff09\u3002 num_aggregate_executors \u805a\u5408\uff08Aggregate\uff09\u7b97\u5b50\u6267\u884c\u65f6\u95f4\u3002 num_auth_failed_sessions_bad_username_password \u56e0\u7528\u6237\u540d\u5bc6\u7801\u9519\u8bef\u5bfc\u9a8c\u8bc1\u5931\u8d25\u7684\u4f1a\u8bdd\u6570\u91cf\u3002 num_auth_failed_sessions_out_of_max_allowed \u56e0\u4e3a\u8d85\u8fc7 FLAG_OUT_OF_MAX_ALLOWED_CONNECTIONS \u53c2\u6570\u5bfc\u81f4\u7684\u9a8c\u8bc1\u767b\u5f55\u7684\u5931\u8d25\u7684\u4f1a\u8bdd\u6570\u91cf\u3002 num_auth_failed_sessions \u767b\u5f55\u9a8c\u8bc1\u5931\u8d25\u7684\u4f1a\u8bdd\u6570\u91cf\u3002 num_indexscan_executors \u7d22\u5f15\u626b\u63cf\uff08IndexScan\uff09\u7b97\u5b50\u6267\u884c\u65f6\u95f4\u3002 num_killed_queries \u88ab\u7ec8\u6b62\u7684\u67e5\u8be2\u6570\u91cf\u3002 num_opened_sessions \u670d\u52a1\u7aef\u5efa\u7acb\u8fc7\u7684\u4f1a\u8bdd\u6570\u91cf\u3002 num_queries \u67e5\u8be2\u6b21\u6570\u3002 num_query_errors_leader_changes \u56e0\u67e5\u8be2\u9519\u8bef\u800c\u5bfc\u81f4\u7684 Leader \u53d8\u66f4\u7684\u6b21\u6570\u3002 num_query_errors \u67e5\u8be2\u9519\u8bef\u6b21\u6570\u3002 num_reclaimed_expired_sessions \u670d\u52a1\u7aef\u4e3b\u52a8\u56de\u6536\u7684\u8fc7\u671f\u7684\u4f1a\u8bdd\u6570\u91cf\u3002 num_rpc_sent_to_metad_failed Graphd \u670d\u52a1\u53d1\u7ed9 Metad \u7684 RPC \u8bf7\u6c42\u5931\u8d25\u7684\u6570\u91cf\u3002 num_rpc_sent_to_metad Graphd \u670d\u52a1\u53d1\u7ed9 Metad \u670d\u52a1\u7684 RPC \u8bf7\u6c42\u6570\u91cf\u3002 num_rpc_sent_to_storaged_failed Graphd \u670d\u52a1\u53d1\u7ed9 Storaged \u670d\u52a1\u7684 RPC \u8bf7\u6c42\u5931\u8d25\u7684\u6570\u91cf\u3002 num_rpc_sent_to_storaged Graphd \u670d\u52a1\u53d1\u7ed9 Storaged \u670d\u52a1\u7684 RPC \u8bf7\u6c42\u6570\u91cf\u3002 num_sentences Graphd \u670d\u52a1\u63a5\u6536\u7684\u8bed\u53e5\u6570\u3002 num_slow_queries \u6162\u67e5\u8be2\u6b21\u6570\u3002 num_sort_executors \u6392\u5e8f\uff08Sort\uff09\u7b97\u5b50\u6267\u884c\u65f6\u95f4\u3002 optimizer_latency_us \u4f18\u5316\u5668\u9636\u6bb5\u5ef6\u8fdf\u65f6\u95f4\u3002 query_latency_us \u67e5\u8be2\u5ef6\u8fdf\u65f6\u95f4\u3002 slow_query_latency_us \u6162\u67e5\u8be2\u5ef6\u8fdf\u65f6\u95f4\u3002 num_queries_hit_memory_watermark \u8fbe\u5230\u5185\u5b58\u6c34\u4f4d\u7ebf\u7684\u8bed\u53e5\u7684\u6570\u91cf\u3002 resp_part_completeness \u90e8\u5206\u6210\u529f\u7684\u5b8c\u6574\u6027\u3002\u9700\u8981\u5728 Graph \u914d\u7f6e\u4e2d\u8bbe\u7f6e accept_partial_success \u4e3a true \u3002 Meta \u00b6 \u53c2\u6570 \u8bf4\u660e commit_log_latency_us Raft \u534f\u8bae\u4e2d Commit \u65e5\u5fd7\u7684\u5ef6\u8fdf\u65f6\u95f4\u3002 commit_snapshot_latency_us Raft \u534f\u8bae\u4e2d Commit \u5feb\u7167\u7684\u5ef6\u8fdf\u65f6\u95f4\u3002 heartbeat_latency_us \u5fc3\u8df3\u5ef6\u8fdf\u65f6\u95f4\u3002 num_heartbeats \u5fc3\u8df3\u6b21\u6570\u3002 num_raft_votes Raft \u534f\u8bae\u4e2d\u6295\u7968\u7684\u6b21\u6570\u3002 transfer_leader_latency_us Raft \u534f\u8bae\u4e2d\u8f6c\u79fb Leader \u7684\u5ef6\u8fdf\u65f6\u95f4\u3002 num_agent_heartbeats AgentHBProcessor \u5fc3\u8df3\u6b21\u6570\u3002 agent_heartbeat_latency_us AgentHBProcessor \u5ef6\u8fdf\u65f6\u95f4\u3002 replicate_log_latency_us Raft \u590d\u5236\u65e5\u5fd7\u81f3\u5927\u591a\u6570\u8282\u70b9\u7684\u5ef6\u8fdf\u3002 num_send_snapshot Raft \u53d1\u9001\u5feb\u7167\u81f3\u5176\u4ed6\u8282\u70b9\u7684\u6b21\u6570\u3002 append_log_latency_us Raft \u590d\u5236\u65e5\u5fd7\u5230\u5355\u4e2a\u8282\u70b9\u7684\u5ef6\u8fdf\u3002 append_wal_latency_us Raft \u5199\u5165\u5355\u6761 WAL \u7684\u5ef6\u8fdf\u3002 num_grant_votes Raft \u6295\u7968\u7ed9\u5176\u4ed6\u8282\u70b9\u7684\u6b21\u6570\u3002 num_start_elect Raft \u53d1\u8d77\u6295\u7968\u7684\u6b21\u6570\u3002 Storage \u00b6 \u53c2\u6570 \u8bf4\u660e add_edges_latency_us \u6dfb\u52a0\u8fb9\u7684\u5ef6\u8fdf\u65f6\u95f4\u3002 add_vertices_latency_us \u6dfb\u52a0\u70b9\u7684\u5ef6\u8fdf\u65f6\u95f4\u3002 commit_log_latency_us Raft \u534f\u8bae\u4e2d Commit \u65e5\u5fd7\u7684\u5ef6\u8fdf\u65f6\u95f4\u3002 commit_snapshot_latency_us Raft \u534f\u8bae\u4e2d Commit \u5feb\u7167\u7684\u5ef6\u8fdf\u65f6\u95f4\u3002 delete_edges_latency_us \u5220\u9664\u8fb9\u7684\u5ef6\u8fdf\u65f6\u95f4\u3002 delete_vertices_latency_us \u5220\u9664\u70b9\u7684\u5ef6\u8fdf\u65f6\u95f4\u3002 get_neighbors_latency_us \u67e5\u8be2\u90bb\u5c45\u5ef6\u8fdf\u65f6\u95f4\u3002 get_dst_by_src_latency_us \u901a\u8fc7\u8d77\u59cb\u70b9\u83b7\u53d6\u7ec8\u70b9\u7684\u5ef6\u8fdf\u65f6\u95f4\u3002 num_get_prop GetPropProcessor \u6267\u884c\u7684\u6b21\u6570\u3002 num_get_neighbors_errors GetNeighborsProcessor \u6267\u884c\u51fa\u9519\u7684\u6b21\u6570\u3002 num_get_dst_by_src_errors GetDstBySrcProcessor \u6267\u884c\u51fa\u9519\u7684\u6b21\u6570\u3002 get_prop_latency_us GetPropProcessor \u6267\u884c\u7684\u5ef6\u8fdf\u65f6\u95f4\u3002 num_edges_deleted \u5220\u9664\u7684\u8fb9\u6570\u91cf\u3002 num_edges_inserted \u63d2\u5165\u7684\u8fb9\u6570\u91cf\u3002 num_raft_votes Raft \u534f\u8bae\u4e2d\u6295\u7968\u7684\u6b21\u6570\u3002 num_rpc_sent_to_metad_failed Storaged \u670d\u52a1\u53d1\u7ed9 Metad \u670d\u52a1\u7684 RPC \u8bf7\u6c42\u5931\u8d25\u7684\u6570\u91cf\u3002 num_rpc_sent_to_metad Storaged \u670d\u52a1\u53d1\u7ed9 Metad \u670d\u52a1\u7684 RPC \u8bf7\u6c42\u6570\u91cf\u3002 num_tags_deleted \u5220\u9664\u7684 Tag \u6570\u91cf\u3002 num_vertices_deleted \u5220\u9664\u7684\u70b9\u6570\u91cf\u3002 num_vertices_inserted \u63d2\u5165\u7684\u70b9\u6570\u91cf\u3002 transfer_leader_latency_us Raft \u534f\u8bae\u4e2d\u8f6c\u79fb Leader \u7684\u5ef6\u8fdf\u65f6\u95f4\u3002 lookup_latency_us LookupProcessor \u6267\u884c\u7684\u5ef6\u8fdf\u65f6\u95f4\u3002 num_lookup_errors LookupProcessor \u6267\u884c\u65f6\u51fa\u9519\u7684\u6b21\u6570\u3002 num_scan_vertex ScanVertexProcessor \u6267\u884c\u7684\u6b21\u6570\u3002 num_scan_vertex_errors ScanVertexProcessor \u6267\u884c\u65f6\u51fa\u9519\u7684\u6b21\u6570\u3002 update_edge_latency_us UpdateEdgeProcessor \u6267\u884c\u7684\u5ef6\u8fdf\u65f6\u95f4\u3002 num_update_vertex UpdateVertexProcessor \u6267\u884c\u7684\u6b21\u6570\u3002 num_update_vertex_errors UpdateVertexProcessor \u6267\u884c\u65f6\u51fa\u9519\u7684\u6b21\u6570\u3002 kv_get_latency_us Getprocessor \u7684\u5ef6\u8fdf\u65f6\u95f4\u3002 kv_put_latency_us PutProcessor \u7684\u5ef6\u8fdf\u65f6\u95f4\u3002 kv_remove_latency_us RemoveProcessor \u7684\u5ef6\u8fdf\u65f6\u95f4\u3002 num_kv_get_errors GetProcessor \u6267\u884c\u51fa\u9519\u6b21\u6570\u3002 num_kv_get GetProcessor \u6267\u884c\u6b21\u6570\u3002 num_kv_put_errors PutProcessor \u6267\u884c\u51fa\u9519\u6b21\u6570\u3002 num_kv_put PutProcessor \u6267\u884c\u6b21\u6570\u3002 num_kv_remove_errors RemoveProcessor \u6267\u884c\u51fa\u9519\u6b21\u6570\u3002 num_kv_remove RemoveProcessor \u6267\u884c\u6b21\u6570\u3002 forward_tranx_latency_us \u4f20\u8f93\u5ef6\u8fdf\u65f6\u95f4\u3002 scan_edge_latency_us ScanEdgeProcessor \u6267\u884c\u7684\u5ef6\u8fdf\u65f6\u95f4\u3002 num_scan_edge_errors ScanEdgeProcessor \u6267\u884c\u65f6\u51fa\u9519\u7684\u6b21\u6570\u3002 num_scan_edge ScanEdgeProcessor \u6267\u884c\u7684\u6b21\u6570\u3002 scan_vertex_latency_us ScanVertexProcessor \u6267\u884c\u7684\u5ef6\u8fdf\u65f6\u95f4\u3002 num_add_edges \u6dfb\u52a0\u8fb9\u7684\u6b21\u6570\u3002 num_add_edges_errors \u6dfb\u52a0\u8fb9\u65f6\u51fa\u9519\u7684\u6b21\u6570\u3002 num_add_vertices \u6dfb\u52a0\u70b9\u7684\u6b21\u6570\u3002 num_start_elect Raft \u53d1\u8d77\u6295\u7968\u7684\u6b21\u6570 num_add_vertices_errors \u6dfb\u52a0\u70b9\u65f6\u51fa\u9519\u7684\u6b21\u6570\u3002 num_delete_vertices_errors \u5220\u9664\u70b9\u65f6\u51fa\u9519\u7684\u6b21\u6570\u3002 append_log_latency_us Raft \u590d\u5236\u65e5\u5fd7\u5230\u5355\u4e2a\u8282\u70b9\u7684\u5ef6\u8fdf\u3002 num_grant_votes Raft \u6295\u7968\u7ed9\u5176\u4ed6\u8282\u70b9\u7684\u6b21\u6570\u3002 replicate_log_latency_us Raft \u590d\u5236\u65e5\u5fd7\u5230\u5927\u591a\u6570\u8282\u70b9\u7684\u5ef6\u8fdf\u3002 num_delete_tags \u5220\u9664 Tag \u7684\u6b21\u6570\u3002 num_delete_tags_errors \u5220\u9664 Tag \u65f6\u51fa\u9519\u7684\u6b21\u6570\u3002 num_delete_edges \u5220\u9664\u8fb9\u7684\u6b21\u6570\u3002 num_delete_edges_errors \u5220\u9664\u8fb9\u65f6\u51fa\u9519\u7684\u6b21\u6570\u3002 num_send_snapshot \u53d1\u9001\u5feb\u7167\u7684\u6b21\u6570\u3002 update_vertex_latency_us UpdateVertexProcessor \u6267\u884c\u7684\u5ef6\u8fdf\u65f6\u95f4\u3002 append_wal_latency_us Raft \u5199\u5165\u5355\u6761 WAL \u7684\u5ef6\u8fdf\u3002 num_update_edge UpdateEdgeProcessor \u6267\u884c\u7684\u6b21\u6570\u3002 delete_tags_latency_us \u5220\u9664 Tag \u7684\u5ef6\u8fdf\u65f6\u95f4\u3002 num_update_edge_errors UpdateEdgeProcessor \u6267\u884c\u65f6\u51fa\u9519\u7684\u6b21\u6570\u3002 num_get_neighbors GetNeighborsProcessor \u6267\u884c\u7684\u6b21\u6570\u3002 num_get_dst_by_src GetDstBySrcProcessor \u6267\u884c\u7684\u6b21\u6570\u3002 num_get_prop_errors GetPropProcessor \u6267\u884c\u65f6\u51fa\u9519\u7684\u6b21\u6570\u3002 num_delete_vertices \u5220\u9664\u70b9\u7684\u6b21\u6570\u3002 num_lookup LookupProcessor \u6267\u884c\u7684\u6b21\u6570\u3002 num_sync_data Storage \u540c\u6b65 Drainer \u6570\u636e\u7684\u6b21\u6570\u3002 num_sync_data_errors Storage \u540c\u6b65 Drainer \u6570\u636e\u51fa\u9519\u7684\u6b21\u6570\u3002 sync_data_latency_us Storage \u540c\u6b65 Drainer \u6570\u636e\u7684\u5ef6\u8fdf\u65f6\u95f4\u3002 \u56fe\u7a7a\u95f4\u7ea7\u522b\u76d1\u63a7\u6307\u6807 \u00b6 Note \u56fe\u7a7a\u95f4\u7ea7\u522b\u76d1\u63a7\u6307\u6807\u662f\u52a8\u6001\u521b\u5efa\u7684, \u53ea\u6709\u5f53\u56fe\u7a7a\u95f4\u5185\u89e6\u53d1\u8be5\u884c\u4e3a\u65f6\uff0c\u5bf9\u5e94\u7684\u6307\u6807\u624d\u4f1a\u521b\u5efa\uff0c\u7528\u6237\u624d\u80fd\u67e5\u8be2\u5230\u3002 \u53c2\u6570 \u8bf4\u660e num_active_queries \u5f53\u524d\u6b63\u5728\u6267\u884c\u7684\u67e5\u8be2\u6570\u3002 num_queries \u67e5\u8be2\u6b21\u6570\u3002 num_sentences Graphd \u670d\u52a1\u63a5\u6536\u7684\u8bed\u53e5\u6570\u3002 optimizer_latency_us \u4f18\u5316\u5668\u9636\u6bb5\u5ef6\u8fdf\u65f6\u95f4\u3002 query_latency_us \u67e5\u8be2\u5ef6\u8fdf\u65f6\u95f4\u3002 num_slow_queries \u6162\u67e5\u8be2\u6b21\u6570\u3002 num_query_errors \u67e5\u8be2\u62a5\u9519\u8bed\u53e5\u6570\u91cf\u3002 num_query_errors_leader_changes \u56e0\u67e5\u8be2\u9519\u8bef\u800c\u5bfc\u81f4\u7684 Leader \u53d8\u66f4\u7684\u6b21\u6570\u3002 num_killed_queries \u88ab\u7ec8\u6b62\u7684\u67e5\u8be2\u6570\u91cf\u3002 num_aggregate_executors \u805a\u5408\uff08Aggregate\uff09\u7b97\u5b50\u6267\u884c\u65f6\u95f4\u3002 num_sort_executors \u6392\u5e8f\uff08Sort\uff09\u7b97\u5b50\u6267\u884c\u65f6\u95f4\u3002 num_indexscan_executors \u7d22\u5f15\u626b\u63cf\uff08IndexScan\uff09\u7b97\u5b50\u6267\u884c\u65f6\u95f4\u3002 num_auth_failed_sessions_bad_username_password \u56e0\u7528\u6237\u540d\u5bc6\u7801\u9519\u8bef\u5bfc\u9a8c\u8bc1\u5931\u8d25\u7684\u4f1a\u8bdd\u6570\u91cf\u3002 num_auth_failed_sessions \u767b\u5f55\u9a8c\u8bc1\u5931\u8d25\u7684\u4f1a\u8bdd\u6570\u91cf\u3002 num_opened_sessions \u670d\u52a1\u7aef\u5efa\u7acb\u8fc7\u7684\u4f1a\u8bdd\u6570\u91cf\u3002 num_queries_hit_memory_watermark \u8fbe\u5230\u5185\u5b58\u6c34\u4f4d\u7ebf\u7684\u8bed\u53e5\u7684\u6570\u91cf\u3002 num_reclaimed_expired_sessions \u670d\u52a1\u7aef\u4e3b\u52a8\u56de\u6536\u7684\u8fc7\u671f\u7684\u4f1a\u8bdd\u6570\u91cf\u3002 num_rpc_sent_to_metad_failed Graphd \u670d\u52a1\u53d1\u7ed9 Metad \u7684 RPC \u8bf7\u6c42\u5931\u8d25\u7684\u6570\u91cf\u3002 num_rpc_sent_to_metad Graphd \u670d\u52a1\u53d1\u7ed9 Metad \u670d\u52a1\u7684 RPC \u8bf7\u6c42\u6570\u91cf\u3002 num_rpc_sent_to_storaged_failed Graphd \u670d\u52a1\u53d1\u7ed9 Storaged \u670d\u52a1\u7684 RPC \u8bf7\u6c42\u5931\u8d25\u7684\u6570\u91cf\u3002 num_rpc_sent_to_storaged Graphd \u670d\u52a1\u53d1\u7ed9 Storaged \u670d\u52a1\u7684 RPC \u8bf7\u6c42\u6570\u91cf\u3002 slow_query_latency_us \u6162\u67e5\u8be2\u5ef6\u8fdf\u65f6\u95f4\u3002","title":"\u67e5\u8be2\u76d1\u63a7\u6307\u6807"},{"location":"6.monitor-and-metrics/1.query-performance-metrics/#nebulagraph","text":"NebulaGraph\u652f\u6301\u591a\u79cd\u65b9\u5f0f\u67e5\u8be2\u670d\u52a1\u7684\u76d1\u63a7\u6307\u6807\uff0c\u672c\u6587\u5c06\u4ecb\u7ecd\u6700\u57fa\u7840\u7684\u65b9\u5f0f\uff0c\u5373\u901a\u8fc7 HTTP \u7aef\u53e3\u67e5\u8be2\u3002","title":"\u67e5\u8be2NebulaGraph\u76d1\u63a7\u6307\u6807"},{"location":"6.monitor-and-metrics/1.query-performance-metrics/#_1","text":"NebulaGraph\u7684\u6bcf\u4e2a\u76d1\u63a7\u6307\u6807\u90fd\u7531\u4e09\u4e2a\u90e8\u5206\u7ec4\u6210\uff0c\u4e2d\u95f4\u7528\u82f1\u6587\u53e5\u53f7\uff08.\uff09\u9694\u5f00\uff0c\u4f8b\u5982 num_queries.sum.600 \u3002\u4e0d\u540c\u7684NebulaGraph\u670d\u52a1\u652f\u6301\u67e5\u8be2\u7684\u76d1\u63a7\u6307\u6807\u4e5f\u4e0d\u540c\u3002\u6307\u6807\u7ed3\u6784\u7684\u8bf4\u660e\u5982\u4e0b\u3002 \u7c7b\u522b \u793a\u4f8b \u8bf4\u660e \u6307\u6807\u540d\u79f0 num_queries \u7b80\u5355\u63cf\u8ff0\u6307\u6807\u7684\u542b\u4e49\u3002 \u7edf\u8ba1\u7c7b\u578b sum \u6307\u6807\u7edf\u8ba1\u7684\u65b9\u6cd5\u3002\u5f53\u524d\u652f\u6301 SUM\u3001AVG\u3001RATE \u548c P \u5206\u4f4d\u6570\uff08P75\u3001P95\u3001P99\u3001P999\uff09\u3002 \u7edf\u8ba1\u65f6\u95f4 600 \u6307\u6807\u7edf\u8ba1\u7684\u65f6\u95f4\u8303\u56f4\uff0c\u5f53\u524d\u652f\u6301 5 \u79d2\u300160 \u79d2\u3001600 \u79d2\u548c 3600 \u79d2\uff0c\u5206\u522b\u8868\u793a\u6700\u8fd1 5 \u79d2\u3001\u6700\u8fd1 1 \u5206\u949f\u3001\u6700\u8fd1 10 \u5206\u949f\u548c\u6700\u8fd1 1 \u5c0f\u65f6\u3002","title":"\u76d1\u63a7\u6307\u6807\u7ed3\u6784\u8bf4\u660e"},{"location":"6.monitor-and-metrics/1.query-performance-metrics/#http","text":"","title":"\u901a\u8fc7 HTTP \u7aef\u53e3\u67e5\u8be2\u76d1\u63a7\u6307\u6807"},{"location":"6.monitor-and-metrics/1.query-performance-metrics/#_2","text":"curl -G \"http://<ip>:<port>/stats?stats=<metric_name_list> [&format=json]\" \u9009\u9879 \u8bf4\u660e ip \u670d\u52a1\u5668\u7684 IP \u5730\u5740\uff0c\u53ef\u4ee5\u5728\u5b89\u88c5\u76ee\u5f55\u5185\u67e5\u770b\u914d\u7f6e\u6587\u4ef6\u83b7\u53d6\u3002 port \u670d\u52a1\u5668\u7684 HTTP \u7aef\u53e3\uff0c\u53ef\u4ee5\u5728\u5b89\u88c5\u76ee\u5f55\u5185\u67e5\u770b\u914d\u7f6e\u6587\u4ef6\u83b7\u53d6\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0cMeta \u670d\u52a1\u7aef\u53e3\u4e3a 19559\uff0cGraph \u670d\u52a1\u7aef\u53e3\u4e3a 19669\uff0cStorage \u670d\u52a1\u7aef\u53e3\u4e3a 19779\u3002 metric_name_list \u76d1\u63a7\u6307\u6807\u540d\u79f0\uff0c\u591a\u4e2a\u76d1\u63a7\u6307\u6807\u7528\u82f1\u6587\u9017\u53f7\uff08,\uff09\u9694\u5f00\u3002 &format=json \u5c06\u7ed3\u679c\u4ee5 JSON \u683c\u5f0f\u8fd4\u56de\u3002 Note \u5982\u679cNebulaGraph\u670d\u52a1\u90e8\u7f72\u5728\u5bb9\u5668\u4e2d\uff0c\u9700\u8981\u6267\u884c docker-compose ps \u547d\u4ee4\u67e5\u770b\u6620\u5c04\u5230\u5bb9\u5668\u5916\u90e8\u7684\u7aef\u53e3\uff0c\u7136\u540e\u901a\u8fc7\u8be5\u7aef\u53e3\u67e5\u8be2\u3002","title":"\u8bed\u6cd5"},{"location":"6.monitor-and-metrics/1.query-performance-metrics/#_3","text":"\u67e5\u8be2 Graph \u670d\u52a1\u4e2d\uff0c\u6700\u8fd1 10 \u5206\u949f\u7684\u8bf7\u6c42\u603b\u6570\u3002 $ curl -G \"http://192.168.8.40:19669/stats?stats=num_queries.sum.600\" num_queries.sum.600 = 400","title":"\u67e5\u8be2\u5355\u4e2a\u76d1\u63a7\u6307\u6807"},{"location":"6.monitor-and-metrics/1.query-performance-metrics/#_4","text":"\u67e5\u8be2 Meta \u670d\u52a1\u4e2d\uff0c\u6700\u8fd1 1 \u5206\u949f\u7684\u5fc3\u8df3\u5e73\u5747\u5ef6\u8fdf\u548c\u6700\u8fd1 10 \u5206\u949f P99 \u5fc3\u8df3\uff081%\u6700\u6162\u7684\u5fc3\u8df3\uff09\u7684\u5e73\u5747\u5ef6\u8fdf\u3002 $ curl -G \"http://192.168.8.40:19559/stats?stats=heartbeat_latency_us.avg.60,heartbeat_latency_us.p99.600\" heartbeat_latency_us.avg.60 = 281 heartbeat_latency_us.p99.600 = 985","title":"\u67e5\u8be2\u591a\u4e2a\u76d1\u63a7\u6307\u6807"},{"location":"6.monitor-and-metrics/1.query-performance-metrics/#json","text":"\u67e5\u8be2 Storage \u670d\u52a1\u4e2d\uff0c\u6700\u8fd1 10 \u5206\u949f\u65b0\u589e\u7684\u70b9\u6570\u91cf\uff0c\u5e76\u4ee5 JSON \u683c\u5f0f\u8fd4\u56de\u7ed3\u679c\u3002 $ curl -G \"http://192.168.8.40:19779/stats?stats=num_add_vertices.sum.600&format=json\" [{ \"value\" :1, \"name\" : \"num_add_vertices.sum.600\" }]","title":"\u67e5\u8be2\u76d1\u63a7\u6307\u6807\u5e76\u4ee5 JSON \u683c\u5f0f\u8fd4\u56de"},{"location":"6.monitor-and-metrics/1.query-performance-metrics/#_5","text":"\u4e0d\u6307\u5b9a\u67e5\u8be2\u67d0\u4e2a\u76d1\u63a7\u6307\u6807\u65f6\uff0c\u4f1a\u8fd4\u56de\u8be5\u670d\u52a1\u5668\u4e0a\u6240\u6709\u7684\u76d1\u63a7\u6307\u6807\u3002 $ curl -G \"http://192.168.8.40:19559/stats\" heartbeat_latency_us.avg.5 = 304 heartbeat_latency_us.avg.60 = 308 heartbeat_latency_us.avg.600 = 299 heartbeat_latency_us.avg.3600 = 285 heartbeat_latency_us.p75.5 = 652 heartbeat_latency_us.p75.60 = 669 heartbeat_latency_us.p75.600 = 651 heartbeat_latency_us.p75.3600 = 642 heartbeat_latency_us.p95.5 = 930 heartbeat_latency_us.p95.60 = 963 heartbeat_latency_us.p95.600 = 933 heartbeat_latency_us.p95.3600 = 929 heartbeat_latency_us.p99.5 = 986 heartbeat_latency_us.p99.60 = 1409 heartbeat_latency_us.p99.600 = 989 heartbeat_latency_us.p99.3600 = 986 num_heartbeats.rate.5 = 0 num_heartbeats.rate.60 = 0 num_heartbeats.rate.600 = 0 num_heartbeats.rate.3600 = 0 num_heartbeats.sum.5 = 2 num_heartbeats.sum.60 = 40 num_heartbeats.sum.600 = 394 num_heartbeats.sum.3600 = 2364 ...","title":"\u67e5\u8be2\u670d\u52a1\u5668\u7684\u6240\u6709\u76d1\u63a7\u6307\u6807"},{"location":"6.monitor-and-metrics/1.query-performance-metrics/#_6","text":"Graph \u670d\u52a1\u652f\u6301\u4e00\u7cfb\u5217\u57fa\u4e8e\u56fe\u7a7a\u95f4\u7684\u76d1\u63a7\u6307\u6807\uff0c\u5bf9\u4e0d\u540c\u56fe\u7a7a\u95f4\u7684\u6570\u636e\u5206\u522b\u8bb0\u5f55\u3002 \u56fe\u7a7a\u95f4\u6307\u6807\u53ea\u80fd\u901a\u8fc7\u67e5\u8be2\u6240\u6709\u76d1\u63a7\u6307\u6807\u7684\u5f62\u5f0f\u67e5\u8be2\u5230\uff0c\u4f8b\u5982 curl -G \"http://192.168.8.40:19559/stats\" \uff0c\u8fd4\u56de\u7ed3\u679c\u4e2d\u4ee5 {space=space_name} \u7684\u5f62\u5f0f\u5305\u542b\u56fe\u7a7a\u95f4\u540d\u79f0\uff0c\u4f8b\u5982 num_active_queries{space=basketballplayer}.sum.5=0 \u3002 Caution \u5982\u9700\u5f00\u542f\u56fe\u7a7a\u95f4\u76d1\u63a7\u6307\u6807\uff0c\u5148\u5728 Graph \u670d\u52a1\u7684\u914d\u7f6e\u6587\u4ef6\u4e2d\u5c06 enable_space_level_metrics \u53c2\u6570\u7684\u503c\u4fee\u6539\u4e3a true \uff0c\u518d\u542f\u52a8NebulaGraph\u3002\u4fee\u6539\u914d\u7f6e\u7684\u8be6\u7ec6\u65b9\u5f0f\u53c2\u89c1 \u914d\u7f6e\u7ba1\u7406 \u3002","title":"\u67e5\u8be2\u56fe\u7a7a\u95f4\u76d1\u63a7\u6307\u6807"},{"location":"6.monitor-and-metrics/1.query-performance-metrics/#_7","text":"","title":"\u76d1\u63a7\u6307\u6807\u8bf4\u660e"},{"location":"6.monitor-and-metrics/1.query-performance-metrics/#graph","text":"\u53c2\u6570 \u8bf4\u660e num_active_queries \u6d3b\u8dc3\u7684\u67e5\u8be2\u8bed\u53e5\u6570\u7684\u53d8\u5316\u6570\u3002 \u8ba1\u7b97\u516c\u5f0f\uff1a\u65f6\u95f4\u8303\u56f4\u5185\u5f00\u59cb\u6267\u884c\u7684\u8bed\u53e5\u6570\u51cf\u53bb\u6267\u884c\u5b8c\u6bd5\u7684\u8bed\u53e5\u6570\u3002 num_active_sessions \u6d3b\u8dc3\u7684\u4f1a\u8bdd\u6570\u7684\u53d8\u5316\u6570\u3002 \u8ba1\u7b97\u516c\u5f0f\uff1a\u65f6\u95f4\u8303\u56f4\u5185\u767b\u5f55\u7684\u4f1a\u8bdd\u6570\u51cf\u53bb\u767b\u51fa\u7684\u4f1a\u8bdd\u6570\u3002 \u4f8b\u5982\u67e5\u8be2num_active_sessions.sum.5\uff0c\u8fc7\u53bb 5 \u79d2\u4e2d\u767b\u5f55\u4e86 10 \u4e2a\u4f1a\u8bdd\u6570\uff0c\u767b\u51fa\u4e86 30 \u4e2a\u4f1a\u8bdd\u6570\uff0c\u90a3\u4e48\u8be5\u6307\u6807\u503c\u5c31\u662f -20 \uff0810-30\uff09\u3002 num_aggregate_executors \u805a\u5408\uff08Aggregate\uff09\u7b97\u5b50\u6267\u884c\u65f6\u95f4\u3002 num_auth_failed_sessions_bad_username_password \u56e0\u7528\u6237\u540d\u5bc6\u7801\u9519\u8bef\u5bfc\u9a8c\u8bc1\u5931\u8d25\u7684\u4f1a\u8bdd\u6570\u91cf\u3002 num_auth_failed_sessions_out_of_max_allowed \u56e0\u4e3a\u8d85\u8fc7 FLAG_OUT_OF_MAX_ALLOWED_CONNECTIONS \u53c2\u6570\u5bfc\u81f4\u7684\u9a8c\u8bc1\u767b\u5f55\u7684\u5931\u8d25\u7684\u4f1a\u8bdd\u6570\u91cf\u3002 num_auth_failed_sessions \u767b\u5f55\u9a8c\u8bc1\u5931\u8d25\u7684\u4f1a\u8bdd\u6570\u91cf\u3002 num_indexscan_executors \u7d22\u5f15\u626b\u63cf\uff08IndexScan\uff09\u7b97\u5b50\u6267\u884c\u65f6\u95f4\u3002 num_killed_queries \u88ab\u7ec8\u6b62\u7684\u67e5\u8be2\u6570\u91cf\u3002 num_opened_sessions \u670d\u52a1\u7aef\u5efa\u7acb\u8fc7\u7684\u4f1a\u8bdd\u6570\u91cf\u3002 num_queries \u67e5\u8be2\u6b21\u6570\u3002 num_query_errors_leader_changes \u56e0\u67e5\u8be2\u9519\u8bef\u800c\u5bfc\u81f4\u7684 Leader \u53d8\u66f4\u7684\u6b21\u6570\u3002 num_query_errors \u67e5\u8be2\u9519\u8bef\u6b21\u6570\u3002 num_reclaimed_expired_sessions \u670d\u52a1\u7aef\u4e3b\u52a8\u56de\u6536\u7684\u8fc7\u671f\u7684\u4f1a\u8bdd\u6570\u91cf\u3002 num_rpc_sent_to_metad_failed Graphd \u670d\u52a1\u53d1\u7ed9 Metad \u7684 RPC \u8bf7\u6c42\u5931\u8d25\u7684\u6570\u91cf\u3002 num_rpc_sent_to_metad Graphd \u670d\u52a1\u53d1\u7ed9 Metad \u670d\u52a1\u7684 RPC \u8bf7\u6c42\u6570\u91cf\u3002 num_rpc_sent_to_storaged_failed Graphd \u670d\u52a1\u53d1\u7ed9 Storaged \u670d\u52a1\u7684 RPC \u8bf7\u6c42\u5931\u8d25\u7684\u6570\u91cf\u3002 num_rpc_sent_to_storaged Graphd \u670d\u52a1\u53d1\u7ed9 Storaged \u670d\u52a1\u7684 RPC \u8bf7\u6c42\u6570\u91cf\u3002 num_sentences Graphd \u670d\u52a1\u63a5\u6536\u7684\u8bed\u53e5\u6570\u3002 num_slow_queries \u6162\u67e5\u8be2\u6b21\u6570\u3002 num_sort_executors \u6392\u5e8f\uff08Sort\uff09\u7b97\u5b50\u6267\u884c\u65f6\u95f4\u3002 optimizer_latency_us \u4f18\u5316\u5668\u9636\u6bb5\u5ef6\u8fdf\u65f6\u95f4\u3002 query_latency_us \u67e5\u8be2\u5ef6\u8fdf\u65f6\u95f4\u3002 slow_query_latency_us \u6162\u67e5\u8be2\u5ef6\u8fdf\u65f6\u95f4\u3002 num_queries_hit_memory_watermark \u8fbe\u5230\u5185\u5b58\u6c34\u4f4d\u7ebf\u7684\u8bed\u53e5\u7684\u6570\u91cf\u3002 resp_part_completeness \u90e8\u5206\u6210\u529f\u7684\u5b8c\u6574\u6027\u3002\u9700\u8981\u5728 Graph \u914d\u7f6e\u4e2d\u8bbe\u7f6e accept_partial_success \u4e3a true \u3002","title":"Graph"},{"location":"6.monitor-and-metrics/1.query-performance-metrics/#meta","text":"\u53c2\u6570 \u8bf4\u660e commit_log_latency_us Raft \u534f\u8bae\u4e2d Commit \u65e5\u5fd7\u7684\u5ef6\u8fdf\u65f6\u95f4\u3002 commit_snapshot_latency_us Raft \u534f\u8bae\u4e2d Commit \u5feb\u7167\u7684\u5ef6\u8fdf\u65f6\u95f4\u3002 heartbeat_latency_us \u5fc3\u8df3\u5ef6\u8fdf\u65f6\u95f4\u3002 num_heartbeats \u5fc3\u8df3\u6b21\u6570\u3002 num_raft_votes Raft \u534f\u8bae\u4e2d\u6295\u7968\u7684\u6b21\u6570\u3002 transfer_leader_latency_us Raft \u534f\u8bae\u4e2d\u8f6c\u79fb Leader \u7684\u5ef6\u8fdf\u65f6\u95f4\u3002 num_agent_heartbeats AgentHBProcessor \u5fc3\u8df3\u6b21\u6570\u3002 agent_heartbeat_latency_us AgentHBProcessor \u5ef6\u8fdf\u65f6\u95f4\u3002 replicate_log_latency_us Raft \u590d\u5236\u65e5\u5fd7\u81f3\u5927\u591a\u6570\u8282\u70b9\u7684\u5ef6\u8fdf\u3002 num_send_snapshot Raft \u53d1\u9001\u5feb\u7167\u81f3\u5176\u4ed6\u8282\u70b9\u7684\u6b21\u6570\u3002 append_log_latency_us Raft \u590d\u5236\u65e5\u5fd7\u5230\u5355\u4e2a\u8282\u70b9\u7684\u5ef6\u8fdf\u3002 append_wal_latency_us Raft \u5199\u5165\u5355\u6761 WAL \u7684\u5ef6\u8fdf\u3002 num_grant_votes Raft \u6295\u7968\u7ed9\u5176\u4ed6\u8282\u70b9\u7684\u6b21\u6570\u3002 num_start_elect Raft \u53d1\u8d77\u6295\u7968\u7684\u6b21\u6570\u3002","title":"Meta"},{"location":"6.monitor-and-metrics/1.query-performance-metrics/#storage","text":"\u53c2\u6570 \u8bf4\u660e add_edges_latency_us \u6dfb\u52a0\u8fb9\u7684\u5ef6\u8fdf\u65f6\u95f4\u3002 add_vertices_latency_us \u6dfb\u52a0\u70b9\u7684\u5ef6\u8fdf\u65f6\u95f4\u3002 commit_log_latency_us Raft \u534f\u8bae\u4e2d Commit \u65e5\u5fd7\u7684\u5ef6\u8fdf\u65f6\u95f4\u3002 commit_snapshot_latency_us Raft \u534f\u8bae\u4e2d Commit \u5feb\u7167\u7684\u5ef6\u8fdf\u65f6\u95f4\u3002 delete_edges_latency_us \u5220\u9664\u8fb9\u7684\u5ef6\u8fdf\u65f6\u95f4\u3002 delete_vertices_latency_us \u5220\u9664\u70b9\u7684\u5ef6\u8fdf\u65f6\u95f4\u3002 get_neighbors_latency_us \u67e5\u8be2\u90bb\u5c45\u5ef6\u8fdf\u65f6\u95f4\u3002 get_dst_by_src_latency_us \u901a\u8fc7\u8d77\u59cb\u70b9\u83b7\u53d6\u7ec8\u70b9\u7684\u5ef6\u8fdf\u65f6\u95f4\u3002 num_get_prop GetPropProcessor \u6267\u884c\u7684\u6b21\u6570\u3002 num_get_neighbors_errors GetNeighborsProcessor \u6267\u884c\u51fa\u9519\u7684\u6b21\u6570\u3002 num_get_dst_by_src_errors GetDstBySrcProcessor \u6267\u884c\u51fa\u9519\u7684\u6b21\u6570\u3002 get_prop_latency_us GetPropProcessor \u6267\u884c\u7684\u5ef6\u8fdf\u65f6\u95f4\u3002 num_edges_deleted \u5220\u9664\u7684\u8fb9\u6570\u91cf\u3002 num_edges_inserted \u63d2\u5165\u7684\u8fb9\u6570\u91cf\u3002 num_raft_votes Raft \u534f\u8bae\u4e2d\u6295\u7968\u7684\u6b21\u6570\u3002 num_rpc_sent_to_metad_failed Storaged \u670d\u52a1\u53d1\u7ed9 Metad \u670d\u52a1\u7684 RPC \u8bf7\u6c42\u5931\u8d25\u7684\u6570\u91cf\u3002 num_rpc_sent_to_metad Storaged \u670d\u52a1\u53d1\u7ed9 Metad \u670d\u52a1\u7684 RPC \u8bf7\u6c42\u6570\u91cf\u3002 num_tags_deleted \u5220\u9664\u7684 Tag \u6570\u91cf\u3002 num_vertices_deleted \u5220\u9664\u7684\u70b9\u6570\u91cf\u3002 num_vertices_inserted \u63d2\u5165\u7684\u70b9\u6570\u91cf\u3002 transfer_leader_latency_us Raft \u534f\u8bae\u4e2d\u8f6c\u79fb Leader \u7684\u5ef6\u8fdf\u65f6\u95f4\u3002 lookup_latency_us LookupProcessor \u6267\u884c\u7684\u5ef6\u8fdf\u65f6\u95f4\u3002 num_lookup_errors LookupProcessor \u6267\u884c\u65f6\u51fa\u9519\u7684\u6b21\u6570\u3002 num_scan_vertex ScanVertexProcessor \u6267\u884c\u7684\u6b21\u6570\u3002 num_scan_vertex_errors ScanVertexProcessor \u6267\u884c\u65f6\u51fa\u9519\u7684\u6b21\u6570\u3002 update_edge_latency_us UpdateEdgeProcessor \u6267\u884c\u7684\u5ef6\u8fdf\u65f6\u95f4\u3002 num_update_vertex UpdateVertexProcessor \u6267\u884c\u7684\u6b21\u6570\u3002 num_update_vertex_errors UpdateVertexProcessor \u6267\u884c\u65f6\u51fa\u9519\u7684\u6b21\u6570\u3002 kv_get_latency_us Getprocessor \u7684\u5ef6\u8fdf\u65f6\u95f4\u3002 kv_put_latency_us PutProcessor \u7684\u5ef6\u8fdf\u65f6\u95f4\u3002 kv_remove_latency_us RemoveProcessor \u7684\u5ef6\u8fdf\u65f6\u95f4\u3002 num_kv_get_errors GetProcessor \u6267\u884c\u51fa\u9519\u6b21\u6570\u3002 num_kv_get GetProcessor \u6267\u884c\u6b21\u6570\u3002 num_kv_put_errors PutProcessor \u6267\u884c\u51fa\u9519\u6b21\u6570\u3002 num_kv_put PutProcessor \u6267\u884c\u6b21\u6570\u3002 num_kv_remove_errors RemoveProcessor \u6267\u884c\u51fa\u9519\u6b21\u6570\u3002 num_kv_remove RemoveProcessor \u6267\u884c\u6b21\u6570\u3002 forward_tranx_latency_us \u4f20\u8f93\u5ef6\u8fdf\u65f6\u95f4\u3002 scan_edge_latency_us ScanEdgeProcessor \u6267\u884c\u7684\u5ef6\u8fdf\u65f6\u95f4\u3002 num_scan_edge_errors ScanEdgeProcessor \u6267\u884c\u65f6\u51fa\u9519\u7684\u6b21\u6570\u3002 num_scan_edge ScanEdgeProcessor \u6267\u884c\u7684\u6b21\u6570\u3002 scan_vertex_latency_us ScanVertexProcessor \u6267\u884c\u7684\u5ef6\u8fdf\u65f6\u95f4\u3002 num_add_edges \u6dfb\u52a0\u8fb9\u7684\u6b21\u6570\u3002 num_add_edges_errors \u6dfb\u52a0\u8fb9\u65f6\u51fa\u9519\u7684\u6b21\u6570\u3002 num_add_vertices \u6dfb\u52a0\u70b9\u7684\u6b21\u6570\u3002 num_start_elect Raft \u53d1\u8d77\u6295\u7968\u7684\u6b21\u6570 num_add_vertices_errors \u6dfb\u52a0\u70b9\u65f6\u51fa\u9519\u7684\u6b21\u6570\u3002 num_delete_vertices_errors \u5220\u9664\u70b9\u65f6\u51fa\u9519\u7684\u6b21\u6570\u3002 append_log_latency_us Raft \u590d\u5236\u65e5\u5fd7\u5230\u5355\u4e2a\u8282\u70b9\u7684\u5ef6\u8fdf\u3002 num_grant_votes Raft \u6295\u7968\u7ed9\u5176\u4ed6\u8282\u70b9\u7684\u6b21\u6570\u3002 replicate_log_latency_us Raft \u590d\u5236\u65e5\u5fd7\u5230\u5927\u591a\u6570\u8282\u70b9\u7684\u5ef6\u8fdf\u3002 num_delete_tags \u5220\u9664 Tag \u7684\u6b21\u6570\u3002 num_delete_tags_errors \u5220\u9664 Tag \u65f6\u51fa\u9519\u7684\u6b21\u6570\u3002 num_delete_edges \u5220\u9664\u8fb9\u7684\u6b21\u6570\u3002 num_delete_edges_errors \u5220\u9664\u8fb9\u65f6\u51fa\u9519\u7684\u6b21\u6570\u3002 num_send_snapshot \u53d1\u9001\u5feb\u7167\u7684\u6b21\u6570\u3002 update_vertex_latency_us UpdateVertexProcessor \u6267\u884c\u7684\u5ef6\u8fdf\u65f6\u95f4\u3002 append_wal_latency_us Raft \u5199\u5165\u5355\u6761 WAL \u7684\u5ef6\u8fdf\u3002 num_update_edge UpdateEdgeProcessor \u6267\u884c\u7684\u6b21\u6570\u3002 delete_tags_latency_us \u5220\u9664 Tag \u7684\u5ef6\u8fdf\u65f6\u95f4\u3002 num_update_edge_errors UpdateEdgeProcessor \u6267\u884c\u65f6\u51fa\u9519\u7684\u6b21\u6570\u3002 num_get_neighbors GetNeighborsProcessor \u6267\u884c\u7684\u6b21\u6570\u3002 num_get_dst_by_src GetDstBySrcProcessor \u6267\u884c\u7684\u6b21\u6570\u3002 num_get_prop_errors GetPropProcessor \u6267\u884c\u65f6\u51fa\u9519\u7684\u6b21\u6570\u3002 num_delete_vertices \u5220\u9664\u70b9\u7684\u6b21\u6570\u3002 num_lookup LookupProcessor \u6267\u884c\u7684\u6b21\u6570\u3002 num_sync_data Storage \u540c\u6b65 Drainer \u6570\u636e\u7684\u6b21\u6570\u3002 num_sync_data_errors Storage \u540c\u6b65 Drainer \u6570\u636e\u51fa\u9519\u7684\u6b21\u6570\u3002 sync_data_latency_us Storage \u540c\u6b65 Drainer \u6570\u636e\u7684\u5ef6\u8fdf\u65f6\u95f4\u3002","title":"Storage"},{"location":"6.monitor-and-metrics/1.query-performance-metrics/#_8","text":"Note \u56fe\u7a7a\u95f4\u7ea7\u522b\u76d1\u63a7\u6307\u6807\u662f\u52a8\u6001\u521b\u5efa\u7684, \u53ea\u6709\u5f53\u56fe\u7a7a\u95f4\u5185\u89e6\u53d1\u8be5\u884c\u4e3a\u65f6\uff0c\u5bf9\u5e94\u7684\u6307\u6807\u624d\u4f1a\u521b\u5efa\uff0c\u7528\u6237\u624d\u80fd\u67e5\u8be2\u5230\u3002 \u53c2\u6570 \u8bf4\u660e num_active_queries \u5f53\u524d\u6b63\u5728\u6267\u884c\u7684\u67e5\u8be2\u6570\u3002 num_queries \u67e5\u8be2\u6b21\u6570\u3002 num_sentences Graphd \u670d\u52a1\u63a5\u6536\u7684\u8bed\u53e5\u6570\u3002 optimizer_latency_us \u4f18\u5316\u5668\u9636\u6bb5\u5ef6\u8fdf\u65f6\u95f4\u3002 query_latency_us \u67e5\u8be2\u5ef6\u8fdf\u65f6\u95f4\u3002 num_slow_queries \u6162\u67e5\u8be2\u6b21\u6570\u3002 num_query_errors \u67e5\u8be2\u62a5\u9519\u8bed\u53e5\u6570\u91cf\u3002 num_query_errors_leader_changes \u56e0\u67e5\u8be2\u9519\u8bef\u800c\u5bfc\u81f4\u7684 Leader \u53d8\u66f4\u7684\u6b21\u6570\u3002 num_killed_queries \u88ab\u7ec8\u6b62\u7684\u67e5\u8be2\u6570\u91cf\u3002 num_aggregate_executors \u805a\u5408\uff08Aggregate\uff09\u7b97\u5b50\u6267\u884c\u65f6\u95f4\u3002 num_sort_executors \u6392\u5e8f\uff08Sort\uff09\u7b97\u5b50\u6267\u884c\u65f6\u95f4\u3002 num_indexscan_executors \u7d22\u5f15\u626b\u63cf\uff08IndexScan\uff09\u7b97\u5b50\u6267\u884c\u65f6\u95f4\u3002 num_auth_failed_sessions_bad_username_password \u56e0\u7528\u6237\u540d\u5bc6\u7801\u9519\u8bef\u5bfc\u9a8c\u8bc1\u5931\u8d25\u7684\u4f1a\u8bdd\u6570\u91cf\u3002 num_auth_failed_sessions \u767b\u5f55\u9a8c\u8bc1\u5931\u8d25\u7684\u4f1a\u8bdd\u6570\u91cf\u3002 num_opened_sessions \u670d\u52a1\u7aef\u5efa\u7acb\u8fc7\u7684\u4f1a\u8bdd\u6570\u91cf\u3002 num_queries_hit_memory_watermark \u8fbe\u5230\u5185\u5b58\u6c34\u4f4d\u7ebf\u7684\u8bed\u53e5\u7684\u6570\u91cf\u3002 num_reclaimed_expired_sessions \u670d\u52a1\u7aef\u4e3b\u52a8\u56de\u6536\u7684\u8fc7\u671f\u7684\u4f1a\u8bdd\u6570\u91cf\u3002 num_rpc_sent_to_metad_failed Graphd \u670d\u52a1\u53d1\u7ed9 Metad \u7684 RPC \u8bf7\u6c42\u5931\u8d25\u7684\u6570\u91cf\u3002 num_rpc_sent_to_metad Graphd \u670d\u52a1\u53d1\u7ed9 Metad \u670d\u52a1\u7684 RPC \u8bf7\u6c42\u6570\u91cf\u3002 num_rpc_sent_to_storaged_failed Graphd \u670d\u52a1\u53d1\u7ed9 Storaged \u670d\u52a1\u7684 RPC \u8bf7\u6c42\u5931\u8d25\u7684\u6570\u91cf\u3002 num_rpc_sent_to_storaged Graphd \u670d\u52a1\u53d1\u7ed9 Storaged \u670d\u52a1\u7684 RPC \u8bf7\u6c42\u6570\u91cf\u3002 slow_query_latency_us \u6162\u67e5\u8be2\u5ef6\u8fdf\u65f6\u95f4\u3002","title":"\u56fe\u7a7a\u95f4\u7ea7\u522b\u76d1\u63a7\u6307\u6807"},{"location":"6.monitor-and-metrics/2.rocksdb-statistics/","text":"RocksDB \u7edf\u8ba1\u6570\u636e \u00b6 NebulaGraph\u4f7f\u7528 RocksDB \u4f5c\u4e3a\u5e95\u5c42\u5b58\u50a8\uff0c\u672c\u6587\u4ecb\u7ecd\u5982\u4f55\u6536\u96c6\u548c\u5c55\u793aNebulaGraph\u7684 RocksDB \u7edf\u8ba1\u4fe1\u606f\u3002 \u542f\u7528 RocksDB \u00b6 RocksDB \u7edf\u8ba1\u529f\u80fd\u9ed8\u8ba4\u5173\u95ed\uff0c\u542f\u52a8 RocksDB \u7edf\u8ba1\u529f\u80fd\uff0c\u4f60\u9700\u8981\uff1a \u4fee\u6539 nebula-storaged.conf \u6587\u4ef6\u4e2d --enable_rocksdb_statistics \u53c2\u6570\u4e3a true \u3002\u914d\u7f6e\u9ed8\u8ba4\u6587\u4ef6\u76ee\u5f55\u4e3a /use/local/nebula/etc \u3002 \u91cd\u542f\u670d\u52a1\u4f7f\u4fee\u6539\u751f\u6548\u3002 \u83b7\u53d6 RocksDB \u7edf\u8ba1\u4fe1\u606f \u00b6 \u7528\u6237\u53ef\u4ee5\u4f7f\u7528\u5b58\u50a8\u670d\u52a1\u4e2d\u7684\u5185\u7f6e HTTP \u670d\u52a1\u6765\u83b7\u53d6\u4ee5\u4e0b\u7c7b\u578b\u7684\u7edf\u8ba1\u4fe1\u606f\uff0c\u4e14\u652f\u6301\u8fd4\u56de JSON \u683c\u5f0f\u7684\u7ed3\u679c\uff1a \u6240\u6709\u7edf\u8ba1\u4fe1\u606f\u3002 \u6307\u5b9a\u6761\u76ee\u7684\u4fe1\u606f\u3002 \u793a\u4f8b \u00b6 \u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\u83b7\u53d6\u6240\u6709 RocksDB \u7edf\u8ba1\u4fe1\u606f\uff1a curl -L \"http:// ${ storage_ip } : ${ port } /rocksdb_stats\" \u4f8b\u5982\uff1a curl -L \"http://172.28.2.1:19779/rocksdb_stats\" rocksdb.blobdb.blob.file.bytes.read=0 rocksdb.blobdb.blob.file.bytes.written=0 rocksdb.blobdb.blob.file.bytes.synced=0 ... \u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\u83b7\u53d6\u90e8\u5206 RocksDB \u7edf\u8ba1\u4fe1\u606f\uff1a curl -L \"http:// ${ storage_ip } : ${ port } /rocksdb_stats?stats= ${ stats_name } \" \u4f8b\u5982\u4f7f\u7528\u4ee5\u4e0b\u8bed\u53e5\u83b7\u53d6 rocksdb.bytes.read \u548c rocksdb.block.cache.add \u7684\u4fe1\u606f\u3002 curl -L \"http://172.28.2.1:19779/rocksdb_stats?stats=rocksdb.bytes.read,rocksdb.block.cache.add\" rocksdb.block.cache.add = 14 rocksdb.bytes.read = 1632 \u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\u83b7\u53d6\u90e8\u5206 JSON \u683c\u5f0f\u7684 RocksDB \u7edf\u8ba1\u4fe1\u606f\uff1a curl -L \"http:// ${ storage_ip } : ${ port } /rocksdb_stats?stats= ${ stats_name } &format=json\" \u4f8b\u5982\u4f7f\u7528\u4ee5\u4e0b\u8bed\u53e5\u83b7\u53d6 rocksdb.bytes.read \u548c rocksdb.block.cache.add \u7684\u7edf\u8ba1\u4fe1\u606f\u5e76\u8fd4\u56de JSON \u7684\u683c\u5f0f\u6570\u636e\u3002 curl -L \"http://172.28.2.1:19779/rocksdb_stats?stats=rocksdb.bytes.read,rocksdb.block.cache.add&format=json\" [ { \"rocksdb.block.cache.add\" : 1 } , { \"rocksdb.bytes.read\" : 160 } ]","title":"RocksDB \u7edf\u8ba1\u6570\u636e"},{"location":"6.monitor-and-metrics/2.rocksdb-statistics/#rocksdb","text":"NebulaGraph\u4f7f\u7528 RocksDB \u4f5c\u4e3a\u5e95\u5c42\u5b58\u50a8\uff0c\u672c\u6587\u4ecb\u7ecd\u5982\u4f55\u6536\u96c6\u548c\u5c55\u793aNebulaGraph\u7684 RocksDB \u7edf\u8ba1\u4fe1\u606f\u3002","title":"RocksDB \u7edf\u8ba1\u6570\u636e"},{"location":"6.monitor-and-metrics/2.rocksdb-statistics/#rocksdb_1","text":"RocksDB \u7edf\u8ba1\u529f\u80fd\u9ed8\u8ba4\u5173\u95ed\uff0c\u542f\u52a8 RocksDB \u7edf\u8ba1\u529f\u80fd\uff0c\u4f60\u9700\u8981\uff1a \u4fee\u6539 nebula-storaged.conf \u6587\u4ef6\u4e2d --enable_rocksdb_statistics \u53c2\u6570\u4e3a true \u3002\u914d\u7f6e\u9ed8\u8ba4\u6587\u4ef6\u76ee\u5f55\u4e3a /use/local/nebula/etc \u3002 \u91cd\u542f\u670d\u52a1\u4f7f\u4fee\u6539\u751f\u6548\u3002","title":"\u542f\u7528 RocksDB"},{"location":"6.monitor-and-metrics/2.rocksdb-statistics/#rocksdb_2","text":"\u7528\u6237\u53ef\u4ee5\u4f7f\u7528\u5b58\u50a8\u670d\u52a1\u4e2d\u7684\u5185\u7f6e HTTP \u670d\u52a1\u6765\u83b7\u53d6\u4ee5\u4e0b\u7c7b\u578b\u7684\u7edf\u8ba1\u4fe1\u606f\uff0c\u4e14\u652f\u6301\u8fd4\u56de JSON \u683c\u5f0f\u7684\u7ed3\u679c\uff1a \u6240\u6709\u7edf\u8ba1\u4fe1\u606f\u3002 \u6307\u5b9a\u6761\u76ee\u7684\u4fe1\u606f\u3002","title":"\u83b7\u53d6 RocksDB \u7edf\u8ba1\u4fe1\u606f"},{"location":"6.monitor-and-metrics/2.rocksdb-statistics/#_1","text":"\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\u83b7\u53d6\u6240\u6709 RocksDB \u7edf\u8ba1\u4fe1\u606f\uff1a curl -L \"http:// ${ storage_ip } : ${ port } /rocksdb_stats\" \u4f8b\u5982\uff1a curl -L \"http://172.28.2.1:19779/rocksdb_stats\" rocksdb.blobdb.blob.file.bytes.read=0 rocksdb.blobdb.blob.file.bytes.written=0 rocksdb.blobdb.blob.file.bytes.synced=0 ... \u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\u83b7\u53d6\u90e8\u5206 RocksDB \u7edf\u8ba1\u4fe1\u606f\uff1a curl -L \"http:// ${ storage_ip } : ${ port } /rocksdb_stats?stats= ${ stats_name } \" \u4f8b\u5982\u4f7f\u7528\u4ee5\u4e0b\u8bed\u53e5\u83b7\u53d6 rocksdb.bytes.read \u548c rocksdb.block.cache.add \u7684\u4fe1\u606f\u3002 curl -L \"http://172.28.2.1:19779/rocksdb_stats?stats=rocksdb.bytes.read,rocksdb.block.cache.add\" rocksdb.block.cache.add = 14 rocksdb.bytes.read = 1632 \u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\u83b7\u53d6\u90e8\u5206 JSON \u683c\u5f0f\u7684 RocksDB \u7edf\u8ba1\u4fe1\u606f\uff1a curl -L \"http:// ${ storage_ip } : ${ port } /rocksdb_stats?stats= ${ stats_name } &format=json\" \u4f8b\u5982\u4f7f\u7528\u4ee5\u4e0b\u8bed\u53e5\u83b7\u53d6 rocksdb.bytes.read \u548c rocksdb.block.cache.add \u7684\u7edf\u8ba1\u4fe1\u606f\u5e76\u8fd4\u56de JSON \u7684\u683c\u5f0f\u6570\u636e\u3002 curl -L \"http://172.28.2.1:19779/rocksdb_stats?stats=rocksdb.bytes.read,rocksdb.block.cache.add&format=json\" [ { \"rocksdb.block.cache.add\" : 1 } , { \"rocksdb.bytes.read\" : 160 } ]","title":"\u793a\u4f8b"},{"location":"7.data-security/4.ssl/","text":"SSL \u52a0\u5bc6 \u00b6 NebulaGraph\u652f\u6301\u5728\u5ba2\u6237\u7aef\u3001Graph \u670d\u52a1\u3001Meta \u670d\u52a1\u548c Storage \u670d\u52a1\u4e4b\u95f4\u8fdb\u884c SSL \u52a0\u5bc6\u4f20\u8f93\uff0c\u672c\u6587\u4ecb\u7ecd\u5982\u4f55\u8bbe\u7f6e SSL \u52a0\u5bc6\u3002 \u6ce8\u610f\u4e8b\u9879 \u00b6 \u5f00\u542f SSL \u52a0\u5bc6\u4f1a\u8f7b\u5fae\u5f71\u54cd\u6027\u80fd\u3002 \u53c2\u6570\u4ecb\u7ecd \u00b6 \u53c2\u6570 \u9ed8\u8ba4\u503c \u8bf4\u660e cert_path - PEM \u8bc1\u4e66\u7684\u8def\u5f84\u3002 key_path - \u5bc6\u94a5\u8bc1\u4e66\u7684\u8def\u5f84\u3002 password_path - \u5bc6\u7801\u6587\u4ef6\u8bc1\u4e66\u7684\u8def\u5f84\u3002 ca_path - \u53d7\u4fe1\u4efb CA \u8bc1\u4e66\u6587\u4ef6\u7684\u8def\u5f84\u3002 enable_ssl false \u662f\u5426\u5f00\u542f SSL \u52a0\u5bc6\u3002 enable_graph_ssl false \u662f\u5426\u4ec5\u5728 Graph \u670d\u52a1\u4e0a\u5f00\u542f SSL \u52a0\u5bc6\u3002 enable_meta_ssl false \u662f\u5426\u4ec5\u5728 Meta \u670d\u52a1\u4e0a\u5f00\u542f SSL \u52a0\u5bc6\u3002 \u8bc1\u4e66\u6a21\u5f0f \u00b6 \u4e3a\u4e86\u4f7f\u7528 SSL \u52a0\u5bc6\uff0c\u5fc5\u987b\u6709 SSL \u8bc1\u4e66\u3002NebulaGraph\u652f\u6301\u4e24\u79cd\u8bc1\u4e66\u6a21\u5f0f\uff1a \u81ea\u7b7e\u540d\u8bc1\u4e66\u6a21\u5f0f \u9700\u8981\u81ea\u884c\u5236\u4f5c\u7b7e\u540d\u8bc1\u4e66\u3002\u9700\u8981\u6839\u636e\u52a0\u5bc6\u7b56\u7565\uff0c\u5728\u5bf9\u5e94\u7684\u914d\u7f6e\u6587\u4ef6\u5185\u8bbe\u7f6e cert_path \u3001 key_path \u548c password_path \u3002 CA \u7b7e\u540d\u8bc1\u4e66\u6a21\u5f0f \u9700\u8981\u5728\u8ba4\u8bc1\u673a\u6784\uff08Certificate Authority\uff09\u7533\u8bf7\u7b7e\u540d\u8bc1\u4e66\u3002\u9700\u8981\u6839\u636e\u52a0\u5bc6\u7b56\u7565\uff0c\u5728\u5bf9\u5e94\u7684\u914d\u7f6e\u6587\u4ef6\u5185\u8bbe\u7f6e cert_path \u3001 key_path \u548c ca_path \u3002 \u52a0\u5bc6\u7b56\u7565 \u00b6 NebulaGraph\u652f\u6301\u4e09\u79cd\u52a0\u5bc6\u7b56\u7565\u3002\u52a0\u5bc6\u6d89\u53ca\u7684\u5177\u4f53\u8fdb\u7a0b\u8bf7\u53c2\u89c1 \u8be6\u7ec6\u8bf4\u660e \u3002 \u5bf9\u5ba2\u6237\u7aef\u3001Graph \u670d\u52a1\u3001Meta \u670d\u52a1\u548c Storage \u670d\u52a1\u4e4b\u95f4\u7684\u4f20\u8f93\u6570\u636e\u52a0\u5bc6\u3002 \u9700\u8981\u4fee\u6539 nebula-graphd.conf \u3001 nebula-metad.conf \u548c nebula-storaged.conf \u914d\u7f6e\u6587\u4ef6\uff0c\u8bbe\u7f6e enable_ssl = true \u3002 \u5bf9\u5ba2\u6237\u7aef\u548c Graph \u670d\u52a1\u4e4b\u95f4\u7684\u4f20\u8f93\u6570\u636e\u52a0\u5bc6\u3002 \u9002\u7528\u4e8e\u96c6\u7fa4\u8bbe\u7f6e\u5728\u540c\u4e00\u4e2a\u673a\u623f\u5185\uff0c\u4ec5\u5bf9\u5916\u5f00\u653e Graph \u670d\u52a1\u7684\u7aef\u53e3\u3002\u56e0\u4e3a\u5176\u4ed6\u670d\u52a1\u53ef\u4ee5\u901a\u8fc7\u5185\u90e8\u7f51\u7edc\u901a\u4fe1\uff0c\u65e0\u9700\u52a0\u5bc6\u3002\u9700\u8981\u4fee\u6539 nebula-graphd.conf \u914d\u7f6e\u6587\u4ef6\uff0c\u8bbe\u7f6e enable_graph_ssl = true \u3002 \u5bf9\u96c6\u7fa4\u4e2d Meta \u670d\u52a1\u76f8\u5173\u7684\u4f20\u8f93\u6570\u636e\u52a0\u5bc6\u3002 \u9002\u7528\u4e8e\u5411 meta \u670d\u52a1\u4f20\u8f93\u9700\u4fdd\u5bc6\u7684\u4fe1\u606f\u3002\u9700\u8981\u4fee\u6539 nebula-graphd.conf \u3001 nebula-metad.conf \u548c nebula-storaged.conf \u914d\u7f6e\u6587\u4ef6\uff0c\u8bbe\u7f6e enable_meta_ssl = true \u3002 \u4f7f\u7528\u65b9\u5f0f \u00b6 \u786e\u8ba4\u8bc1\u4e66\u6a21\u5f0f\u548c\u52a0\u5bc6\u7b56\u7565\u3002 \u5728\u5bf9\u5e94\u7684\u914d\u7f6e\u6587\u4ef6\u5185\u589e\u52a0\u8bc1\u4e66\u914d\u7f6e\u548c\u7b56\u7565\u914d\u7f6e\u3002 \u4f8b\u5982\u4f7f\u7528\u81ea\u7b7e\u540d\u8bc1\u4e66\uff0c\u5e76\u5bf9\u5ba2\u6237\u7aef\u3001Graph \u670d\u52a1\u3001Meta \u670d\u52a1\u548c Storage \u670d\u52a1\u4e4b\u95f4\u7684\u6570\u636e\u4f20\u8f93\u8fdb\u884c\u52a0\u5bc6\u3002\u9700\u8981\u5bf9\u4e09\u4e2a\u914d\u7f6e\u6587\u4ef6\u90fd\u8fdb\u884c\u5982\u4e0b\u8bbe\u7f6e\uff1a --cert_path = xxxxxx --key_path = xxxxx --password_path = xxxxxx --enable_ssl = true \u5ba2\u6237\u7aef\u8bbe\u7f6e\u5b89\u5168\u5957\u63a5\u5b57\u5e76\u6dfb\u52a0\u53d7\u4fe1\u4efb\u7684 CA\u3002\u793a\u4f8b\u4ee3\u7801\u8bf7\u53c2\u89c1 nebula-test-run.py \u3002","title":"SSL \u52a0\u5bc6"},{"location":"7.data-security/4.ssl/#ssl","text":"NebulaGraph\u652f\u6301\u5728\u5ba2\u6237\u7aef\u3001Graph \u670d\u52a1\u3001Meta \u670d\u52a1\u548c Storage \u670d\u52a1\u4e4b\u95f4\u8fdb\u884c SSL \u52a0\u5bc6\u4f20\u8f93\uff0c\u672c\u6587\u4ecb\u7ecd\u5982\u4f55\u8bbe\u7f6e SSL \u52a0\u5bc6\u3002","title":"SSL \u52a0\u5bc6"},{"location":"7.data-security/4.ssl/#_1","text":"\u5f00\u542f SSL \u52a0\u5bc6\u4f1a\u8f7b\u5fae\u5f71\u54cd\u6027\u80fd\u3002","title":"\u6ce8\u610f\u4e8b\u9879"},{"location":"7.data-security/4.ssl/#_2","text":"\u53c2\u6570 \u9ed8\u8ba4\u503c \u8bf4\u660e cert_path - PEM \u8bc1\u4e66\u7684\u8def\u5f84\u3002 key_path - \u5bc6\u94a5\u8bc1\u4e66\u7684\u8def\u5f84\u3002 password_path - \u5bc6\u7801\u6587\u4ef6\u8bc1\u4e66\u7684\u8def\u5f84\u3002 ca_path - \u53d7\u4fe1\u4efb CA \u8bc1\u4e66\u6587\u4ef6\u7684\u8def\u5f84\u3002 enable_ssl false \u662f\u5426\u5f00\u542f SSL \u52a0\u5bc6\u3002 enable_graph_ssl false \u662f\u5426\u4ec5\u5728 Graph \u670d\u52a1\u4e0a\u5f00\u542f SSL \u52a0\u5bc6\u3002 enable_meta_ssl false \u662f\u5426\u4ec5\u5728 Meta \u670d\u52a1\u4e0a\u5f00\u542f SSL \u52a0\u5bc6\u3002","title":"\u53c2\u6570\u4ecb\u7ecd"},{"location":"7.data-security/4.ssl/#_3","text":"\u4e3a\u4e86\u4f7f\u7528 SSL \u52a0\u5bc6\uff0c\u5fc5\u987b\u6709 SSL \u8bc1\u4e66\u3002NebulaGraph\u652f\u6301\u4e24\u79cd\u8bc1\u4e66\u6a21\u5f0f\uff1a \u81ea\u7b7e\u540d\u8bc1\u4e66\u6a21\u5f0f \u9700\u8981\u81ea\u884c\u5236\u4f5c\u7b7e\u540d\u8bc1\u4e66\u3002\u9700\u8981\u6839\u636e\u52a0\u5bc6\u7b56\u7565\uff0c\u5728\u5bf9\u5e94\u7684\u914d\u7f6e\u6587\u4ef6\u5185\u8bbe\u7f6e cert_path \u3001 key_path \u548c password_path \u3002 CA \u7b7e\u540d\u8bc1\u4e66\u6a21\u5f0f \u9700\u8981\u5728\u8ba4\u8bc1\u673a\u6784\uff08Certificate Authority\uff09\u7533\u8bf7\u7b7e\u540d\u8bc1\u4e66\u3002\u9700\u8981\u6839\u636e\u52a0\u5bc6\u7b56\u7565\uff0c\u5728\u5bf9\u5e94\u7684\u914d\u7f6e\u6587\u4ef6\u5185\u8bbe\u7f6e cert_path \u3001 key_path \u548c ca_path \u3002","title":"\u8bc1\u4e66\u6a21\u5f0f"},{"location":"7.data-security/4.ssl/#_4","text":"NebulaGraph\u652f\u6301\u4e09\u79cd\u52a0\u5bc6\u7b56\u7565\u3002\u52a0\u5bc6\u6d89\u53ca\u7684\u5177\u4f53\u8fdb\u7a0b\u8bf7\u53c2\u89c1 \u8be6\u7ec6\u8bf4\u660e \u3002 \u5bf9\u5ba2\u6237\u7aef\u3001Graph \u670d\u52a1\u3001Meta \u670d\u52a1\u548c Storage \u670d\u52a1\u4e4b\u95f4\u7684\u4f20\u8f93\u6570\u636e\u52a0\u5bc6\u3002 \u9700\u8981\u4fee\u6539 nebula-graphd.conf \u3001 nebula-metad.conf \u548c nebula-storaged.conf \u914d\u7f6e\u6587\u4ef6\uff0c\u8bbe\u7f6e enable_ssl = true \u3002 \u5bf9\u5ba2\u6237\u7aef\u548c Graph \u670d\u52a1\u4e4b\u95f4\u7684\u4f20\u8f93\u6570\u636e\u52a0\u5bc6\u3002 \u9002\u7528\u4e8e\u96c6\u7fa4\u8bbe\u7f6e\u5728\u540c\u4e00\u4e2a\u673a\u623f\u5185\uff0c\u4ec5\u5bf9\u5916\u5f00\u653e Graph \u670d\u52a1\u7684\u7aef\u53e3\u3002\u56e0\u4e3a\u5176\u4ed6\u670d\u52a1\u53ef\u4ee5\u901a\u8fc7\u5185\u90e8\u7f51\u7edc\u901a\u4fe1\uff0c\u65e0\u9700\u52a0\u5bc6\u3002\u9700\u8981\u4fee\u6539 nebula-graphd.conf \u914d\u7f6e\u6587\u4ef6\uff0c\u8bbe\u7f6e enable_graph_ssl = true \u3002 \u5bf9\u96c6\u7fa4\u4e2d Meta \u670d\u52a1\u76f8\u5173\u7684\u4f20\u8f93\u6570\u636e\u52a0\u5bc6\u3002 \u9002\u7528\u4e8e\u5411 meta \u670d\u52a1\u4f20\u8f93\u9700\u4fdd\u5bc6\u7684\u4fe1\u606f\u3002\u9700\u8981\u4fee\u6539 nebula-graphd.conf \u3001 nebula-metad.conf \u548c nebula-storaged.conf \u914d\u7f6e\u6587\u4ef6\uff0c\u8bbe\u7f6e enable_meta_ssl = true \u3002","title":"\u52a0\u5bc6\u7b56\u7565"},{"location":"7.data-security/4.ssl/#_5","text":"\u786e\u8ba4\u8bc1\u4e66\u6a21\u5f0f\u548c\u52a0\u5bc6\u7b56\u7565\u3002 \u5728\u5bf9\u5e94\u7684\u914d\u7f6e\u6587\u4ef6\u5185\u589e\u52a0\u8bc1\u4e66\u914d\u7f6e\u548c\u7b56\u7565\u914d\u7f6e\u3002 \u4f8b\u5982\u4f7f\u7528\u81ea\u7b7e\u540d\u8bc1\u4e66\uff0c\u5e76\u5bf9\u5ba2\u6237\u7aef\u3001Graph \u670d\u52a1\u3001Meta \u670d\u52a1\u548c Storage \u670d\u52a1\u4e4b\u95f4\u7684\u6570\u636e\u4f20\u8f93\u8fdb\u884c\u52a0\u5bc6\u3002\u9700\u8981\u5bf9\u4e09\u4e2a\u914d\u7f6e\u6587\u4ef6\u90fd\u8fdb\u884c\u5982\u4e0b\u8bbe\u7f6e\uff1a --cert_path = xxxxxx --key_path = xxxxx --password_path = xxxxxx --enable_ssl = true \u5ba2\u6237\u7aef\u8bbe\u7f6e\u5b89\u5168\u5957\u63a5\u5b57\u5e76\u6dfb\u52a0\u53d7\u4fe1\u4efb\u7684 CA\u3002\u793a\u4f8b\u4ee3\u7801\u8bf7\u53c2\u89c1 nebula-test-run.py \u3002","title":"\u4f7f\u7528\u65b9\u5f0f"},{"location":"7.data-security/1.authentication/1.authentication/","text":"\u8eab\u4efd\u9a8c\u8bc1 \u00b6 \u8eab\u4efd\u9a8c\u8bc1\u7528\u4e8e\u5c06\u4f1a\u8bdd\u6620\u5c04\u5230\u7279\u5b9a\u7528\u6237\uff0c\u4ece\u800c\u5b9e\u73b0\u8bbf\u95ee\u63a7\u5236\u3002 \u5f53\u5ba2\u6237\u7aef\u8fde\u63a5\u5230NebulaGraph\u65f6\uff0cNebulaGraph\u4f1a\u521b\u5efa\u4e00\u4e2a\u4f1a\u8bdd\uff0c\u4f1a\u8bdd\u4e2d\u5b58\u50a8\u8fde\u63a5\u7684\u5404\u79cd\u4fe1\u606f\uff0c\u5982\u679c\u5f00\u542f\u4e86\u8eab\u4efd\u9a8c\u8bc1\uff0c\u5c31\u4f1a\u5c06\u4f1a\u8bdd\u6620\u5c04\u5230\u5bf9\u5e94\u7684\u7528\u6237\u3002 \u672c\u5730\u8eab\u4efd\u9a8c\u8bc1 \u00b6 \u672c\u5730\u8eab\u4efd\u9a8c\u8bc1\u662f\u6307\u5728\u670d\u52a1\u5668\u672c\u5730\u5b58\u50a8\u7528\u6237\u540d\u3001\u52a0\u5bc6\u5bc6\u7801\uff0c\u5f53\u7528\u6237\u5c1d\u8bd5\u8bbf\u95eeNebulaGraph\u65f6\uff0c\u5c06\u8fdb\u884c\u8eab\u4efd\u9a8c\u8bc1\u3002 \u542f\u7528\u672c\u5730\u8eab\u4efd\u9a8c\u8bc1 \u00b6 \u7f16\u8f91\u914d\u7f6e\u6587\u4ef6 nebula-graphd.conf \uff08\u9ed8\u8ba4\u76ee\u5f55\u4e3a /usr/local/nebula/etc/ \uff09\uff0c\u8bbe\u7f6e\u5982\u4e0b\u53c2\u6570\uff1a --enable_authorize \uff1a\u662f\u5426\u542f\u7528\u8eab\u4efd\u9a8c\u8bc1\uff0c\u53ef\u9009\u503c\uff1a true \u3001 false \u3002 Note \u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u8eab\u4efd\u9a8c\u8bc1\u529f\u80fd\u662f\u5173\u95ed\u7684\uff0c\u7528\u6237\u53ef\u4ee5\u4f7f\u7528 root \u7528\u6237\u540d\u548c\u4efb\u610f\u5bc6\u7801\u8fde\u63a5\u5230NebulaGraph\u3002 \u5f00\u542f\u8eab\u4efd\u9a8c\u8bc1\u540e\uff0c\u9ed8\u8ba4\u7684 God \u89d2\u8272\u8d26\u53f7\u4e3a root \uff0c\u5bc6\u7801\u4e3a nebula \u3002\u89d2\u8272\u8be6\u60c5\u8bf7\u53c2\u89c1 \u5185\u7f6e\u89d2\u8272\u6743\u9650 \u3002 --failed_login_attempts \uff1a\u53ef\u9009\u9879\uff0c\u9700\u8981\u624b\u52a8\u6dfb\u52a0\u8be5\u53c2\u6570\u3002\u5355\u4e2a Graph \u8282\u70b9\u5141\u8bb8\u8fde\u7eed\u8f93\u5165\u9519\u8bef\u5bc6\u7801\u7684\u6b21\u6570\u3002\u8d85\u8fc7\u8be5\u6b21\u6570\u65f6\uff0c\u8d26\u6237\u4f1a\u88ab\u9501\u5b9a\u3002\u5982\u679c\u6709\u591a\u4e2a Graph \u8282\u70b9\uff0c\u5141\u8bb8\u7684\u6b21\u6570\u4e3a \u8282\u70b9\u6570 * \u6b21\u6570 \u3002 --password_lock_time_in_secs \uff1a\u53ef\u9009\u9879\uff0c\u9700\u8981\u624b\u52a8\u6dfb\u52a0\u8be5\u53c2\u6570\u3002\u591a\u6b21\u8f93\u5165\u9519\u8bef\u5bc6\u7801\u540e\uff0c\u8d26\u6237\u88ab\u9501\u5b9a\u7684\u65f6\u95f4\u3002\u5355\u4f4d\uff1a\u79d2\u3002 \u91cd\u542fNebulaGraph\u670d\u52a1\u3002","title":"\u8eab\u4efd\u9a8c\u8bc1"},{"location":"7.data-security/1.authentication/1.authentication/#_1","text":"\u8eab\u4efd\u9a8c\u8bc1\u7528\u4e8e\u5c06\u4f1a\u8bdd\u6620\u5c04\u5230\u7279\u5b9a\u7528\u6237\uff0c\u4ece\u800c\u5b9e\u73b0\u8bbf\u95ee\u63a7\u5236\u3002 \u5f53\u5ba2\u6237\u7aef\u8fde\u63a5\u5230NebulaGraph\u65f6\uff0cNebulaGraph\u4f1a\u521b\u5efa\u4e00\u4e2a\u4f1a\u8bdd\uff0c\u4f1a\u8bdd\u4e2d\u5b58\u50a8\u8fde\u63a5\u7684\u5404\u79cd\u4fe1\u606f\uff0c\u5982\u679c\u5f00\u542f\u4e86\u8eab\u4efd\u9a8c\u8bc1\uff0c\u5c31\u4f1a\u5c06\u4f1a\u8bdd\u6620\u5c04\u5230\u5bf9\u5e94\u7684\u7528\u6237\u3002","title":"\u8eab\u4efd\u9a8c\u8bc1"},{"location":"7.data-security/1.authentication/1.authentication/#_2","text":"\u672c\u5730\u8eab\u4efd\u9a8c\u8bc1\u662f\u6307\u5728\u670d\u52a1\u5668\u672c\u5730\u5b58\u50a8\u7528\u6237\u540d\u3001\u52a0\u5bc6\u5bc6\u7801\uff0c\u5f53\u7528\u6237\u5c1d\u8bd5\u8bbf\u95eeNebulaGraph\u65f6\uff0c\u5c06\u8fdb\u884c\u8eab\u4efd\u9a8c\u8bc1\u3002","title":"\u672c\u5730\u8eab\u4efd\u9a8c\u8bc1"},{"location":"7.data-security/1.authentication/1.authentication/#_3","text":"\u7f16\u8f91\u914d\u7f6e\u6587\u4ef6 nebula-graphd.conf \uff08\u9ed8\u8ba4\u76ee\u5f55\u4e3a /usr/local/nebula/etc/ \uff09\uff0c\u8bbe\u7f6e\u5982\u4e0b\u53c2\u6570\uff1a --enable_authorize \uff1a\u662f\u5426\u542f\u7528\u8eab\u4efd\u9a8c\u8bc1\uff0c\u53ef\u9009\u503c\uff1a true \u3001 false \u3002 Note \u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u8eab\u4efd\u9a8c\u8bc1\u529f\u80fd\u662f\u5173\u95ed\u7684\uff0c\u7528\u6237\u53ef\u4ee5\u4f7f\u7528 root \u7528\u6237\u540d\u548c\u4efb\u610f\u5bc6\u7801\u8fde\u63a5\u5230NebulaGraph\u3002 \u5f00\u542f\u8eab\u4efd\u9a8c\u8bc1\u540e\uff0c\u9ed8\u8ba4\u7684 God \u89d2\u8272\u8d26\u53f7\u4e3a root \uff0c\u5bc6\u7801\u4e3a nebula \u3002\u89d2\u8272\u8be6\u60c5\u8bf7\u53c2\u89c1 \u5185\u7f6e\u89d2\u8272\u6743\u9650 \u3002 --failed_login_attempts \uff1a\u53ef\u9009\u9879\uff0c\u9700\u8981\u624b\u52a8\u6dfb\u52a0\u8be5\u53c2\u6570\u3002\u5355\u4e2a Graph \u8282\u70b9\u5141\u8bb8\u8fde\u7eed\u8f93\u5165\u9519\u8bef\u5bc6\u7801\u7684\u6b21\u6570\u3002\u8d85\u8fc7\u8be5\u6b21\u6570\u65f6\uff0c\u8d26\u6237\u4f1a\u88ab\u9501\u5b9a\u3002\u5982\u679c\u6709\u591a\u4e2a Graph \u8282\u70b9\uff0c\u5141\u8bb8\u7684\u6b21\u6570\u4e3a \u8282\u70b9\u6570 * \u6b21\u6570 \u3002 --password_lock_time_in_secs \uff1a\u53ef\u9009\u9879\uff0c\u9700\u8981\u624b\u52a8\u6dfb\u52a0\u8be5\u53c2\u6570\u3002\u591a\u6b21\u8f93\u5165\u9519\u8bef\u5bc6\u7801\u540e\uff0c\u8d26\u6237\u88ab\u9501\u5b9a\u7684\u65f6\u95f4\u3002\u5355\u4f4d\uff1a\u79d2\u3002 \u91cd\u542fNebulaGraph\u670d\u52a1\u3002","title":"\u542f\u7528\u672c\u5730\u8eab\u4efd\u9a8c\u8bc1"},{"location":"7.data-security/1.authentication/2.management-user/","text":"\u7528\u6237\u7ba1\u7406 \u00b6 \u7528\u6237\u7ba1\u7406\u662fNebulaGraph\u8bbf\u95ee\u63a7\u5236\u4e2d\u4e0d\u53ef\u6216\u7f3a\u7684\u7ec4\u6210\u90e8\u5206\uff0c\u672c\u6587\u5c06\u4ecb\u7ecd\u7528\u6237\u7ba1\u7406\u7684\u76f8\u5173\u8bed\u6cd5\u3002 \u5f00\u542f \u8eab\u4efd\u9a8c\u8bc1 \u540e\uff0c\u7528\u6237\u9700\u8981\u4f7f\u7528\u5df2\u521b\u5efa\u7684\u7528\u6237\u624d\u80fd\u8fde\u63a5NebulaGraph\uff0c\u800c\u4e14\u8fde\u63a5\u540e\u53ef\u4ee5\u8fdb\u884c\u7684\u64cd\u4f5c\u4e5f\u53d6\u51b3\u4e8e\u8be5\u7528\u6237\u62e5\u6709\u7684 \u89d2\u8272\u6743\u9650 \u3002 Note \u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u8eab\u4efd\u9a8c\u8bc1\u529f\u80fd\u662f\u5173\u95ed\u7684\uff0c\u7528\u6237\u53ef\u4ee5\u4f7f\u7528 root \u7528\u6237\u540d\u548c\u4efb\u610f\u5bc6\u7801\u8fde\u63a5\u5230NebulaGraph\u3002 \u4fee\u6539\u6743\u9650\u540e\uff0c\u5bf9\u5e94\u7684\u7528\u6237\u9700\u8981\u91cd\u65b0\u767b\u5f55\u624d\u80fd\u751f\u6548\u3002 \u521b\u5efa\u7528\u6237\uff08 CREATE USER \uff09 \u00b6 \u6267\u884c CREATE USER \u8bed\u53e5\u53ef\u4ee5\u521b\u5efa\u65b0\u7684NebulaGraph\u7528\u6237\u3002\u5f53\u524d\u4ec5 God \u89d2\u8272\u7528\u6237\uff08\u5373 root \u7528\u6237\uff09\u80fd\u591f\u6267\u884c CREATE USER \u8bed\u53e5\u3002 \u8bed\u6cd5 CREATE USER [IF NOT EXISTS] <user_name> [WITH PASSWORD '<password>']; IF NOT EXISTS \uff1a\u68c0\u6d4b\u5f85\u521b\u5efa\u7684\u7528\u6237\u540d\u662f\u5426\u5b58\u5728\uff0c\u53ea\u6709\u4e0d\u5b58\u5728\u65f6\uff0c\u624d\u4f1a\u521b\u5efa\u65b0\u7528\u6237\u3002 user_name \uff1a\u5f85\u521b\u5efa\u7684\u7528\u6237\u540d\u3002\u957f\u5ea6\u6700\u591a\u4e3a 16 \u4e2a\u5b57\u7b26\u3002 password \uff1a\u7528\u6237\u540d\u5bf9\u5e94\u7684\u5bc6\u7801\u3002\u9ed8\u8ba4\u5bc6\u7801\u4e3a\u7a7a\u5b57\u7b26\u4e32\uff08 '' \uff09\u3002\u957f\u5ea6\u6700\u591a\u4e3a 24 \u4e2a\u5b57\u7b26\u3002 \u793a\u4f8b nebula> CREATE USER user1 WITH PASSWORD 'nebula'; nebula> SHOW USERS; +---------+ | Account | +---------+ | \"root\" | | \"user1\" | +---------+ \u6388\u6743\u7528\u6237\uff08 GRANT ROLE \uff09 \u00b6 \u6267\u884c GRANT ROLE \u8bed\u53e5\u53ef\u4ee5\u5c06\u6307\u5b9a\u56fe\u7a7a\u95f4\u7684\u5185\u7f6e\u89d2\u8272\u6743\u9650\u6388\u4e88\u7528\u6237\u3002\u5f53\u524d\u4ec5 God \u89d2\u8272\u7528\u6237\u548c Admin \u89d2\u8272\u7528\u6237\u80fd\u591f\u6267\u884c GRANT ROLE \u8bed\u53e5\u3002\u89d2\u8272\u6743\u9650\u7684\u8bf4\u660e\uff0c\u8bf7\u53c2\u89c1 \u5185\u7f6e\u89d2\u8272\u6743\u9650 \u3002 \u8bed\u6cd5 GRANT ROLE <role_type> ON <space_name> TO <user_name>; \u793a\u4f8b nebula> GRANT ROLE USER ON basketballplayer TO user1; \u64a4\u9500\u7528\u6237\u6743\u9650\uff08 REVOKE ROLE \uff09 \u00b6 \u6267\u884c REVOKE ROLE \u8bed\u53e5\u53ef\u4ee5\u64a4\u9500\u7528\u6237\u7684\u6307\u5b9a\u56fe\u7a7a\u95f4\u7684\u5185\u7f6e\u89d2\u8272\u6743\u9650\u3002\u5f53\u524d\u4ec5 God \u89d2\u8272\u7528\u6237\u548c Admin \u89d2\u8272\u7528\u6237\u80fd\u591f\u6267\u884c REVOKE ROLE \u8bed\u53e5\u3002\u89d2\u8272\u6743\u9650\u7684\u8bf4\u660e\uff0c\u8bf7\u53c2\u89c1 \u5185\u7f6e\u89d2\u8272\u6743\u9650 \u3002 \u8bed\u6cd5 REVOKE ROLE <role_type> ON <space_name> FROM <user_name>; \u793a\u4f8b nebula> REVOKE ROLE USER ON basketballplayer FROM user1; \u67e5\u770b\u6307\u5b9a\u7528\u6237\u6743\u9650\uff08 DESCRIBE USER \uff09 \u00b6 \u6267\u884c DESCRIBE USER \u8bed\u53e5\u53ef\u4ee5\u67e5\u770b\u6307\u5b9a\u7528\u6237\u7684\u89d2\u8272\u6743\u9650\u4fe1\u606f\u3002 \u8bed\u6cd5 DESCRIBE USER <user_name>; DESC USER <user_name>; \u793a\u4f8b nebula> DESCRIBE USER user1; +---------+--------------------+ | role | space | +---------+--------------------+ | \"ADMIN\" | \"basketballplayer\" | +---------+--------------------+ \u67e5\u770b\u6307\u5b9a\u7a7a\u95f4\u5185\u7528\u6237\u6743\u9650\uff08 SHOW ROLES \uff09 \u00b6 \u6267\u884c SHOW ROLES \u8bed\u53e5\u53ef\u4ee5\u67e5\u770b\u6307\u5b9a\u7a7a\u95f4\u5185\u7684\u6240\u6709\u7528\u6237\uff08\u9664 root \u4ee5\u5916\uff09\u548c\u5bf9\u5e94\u89d2\u8272\u6743\u9650\u7684\u4fe1\u606f\u3002 \u8bed\u6cd5 SHOW ROLES IN <space_name>; \u793a\u4f8b nebula> SHOW ROLES IN basketballplayer; +---------+-----------+ | Account | Role Type | +---------+-----------+ | \"user1\" | \"ADMIN\" | +---------+-----------+ \u4fee\u6539\u7528\u6237\u5bc6\u7801\uff08 CHANGE PASSWORD \uff09 \u00b6 \u6267\u884c CHANGE PASSWORD \u8bed\u53e5\u53ef\u4ee5\u4fee\u6539\u7528\u6237\u5bc6\u7801\uff0c\u4fee\u6539\u65f6\u9700\u8981\u63d0\u4f9b\u65e7\u5bc6\u7801\u548c\u65b0\u5bc6\u7801\u3002 \u8bed\u6cd5 CHANGE PASSWORD <user_name> FROM '<old_password>' TO '<new_password>'; \u793a\u4f8b nebula> CHANGE PASSWORD user1 FROM 'nebula' TO 'nebula123'; \u4fee\u6539\u7528\u6237\u5bc6\u7801\uff08 ALTER USER \uff09 \u00b6 \u6267\u884c ALTER USER \u8bed\u53e5\u53ef\u4ee5\u4fee\u6539\u7528\u6237\u5bc6\u7801\uff0c\u4fee\u6539\u65f6\u4e0d\u9700\u8981\u63d0\u4f9b\u65e7\u5bc6\u7801\u3002\u5f53\u524d\u4ec5 God \u89d2\u8272\u7528\u6237\uff08\u5373 root \u7528\u6237\uff09\u80fd\u591f\u6267\u884c ALTER USER \u8bed\u53e5\u3002 \u8bed\u6cd5 ALTER USER <user_name> WITH PASSWORD '<password>'; \u793a\u4f8b nebula> ALTER USER user2 WITH PASSWORD 'change_password'; nebula> SHOW USERS; +---------+ | Account | +---------+ | \"root\" | | \"user1\" | | \"user2\" | +---------+ \u5220\u9664\u7528\u6237\uff08 DROP USER \uff09 \u00b6 \u6267\u884c DROP USER \u8bed\u53e5\u53ef\u4ee5\u5220\u9664\u7528\u6237\u3002\u5f53\u524d\u4ec5 God \u89d2\u8272\u7528\u6237\u80fd\u591f\u6267\u884c DROP USER \u8bed\u53e5\u3002 Note \u5220\u9664\u7528\u6237\u4e0d\u4f1a\u81ea\u52a8\u65ad\u5f00\u8be5\u7528\u6237\u5f53\u524d\u4f1a\u8bdd\uff0c\u800c\u4e14\u6743\u9650\u4ecd\u5728\u5f53\u524d\u4f1a\u8bdd\u4e2d\u751f\u6548\u3002 \u8bed\u6cd5 DROP USER [IF EXISTS] <user_name>; \u793a\u4f8b nebula> DROP USER user1; \u67e5\u770b\u7528\u6237\u5217\u8868\uff08 SHOW USERS \uff09 \u00b6 \u6267\u884c SHOW USERS \u8bed\u53e5\u53ef\u4ee5\u67e5\u770b\u7528\u6237\u5217\u8868\u3002\u5f53\u524d\u4ec5 God \u89d2\u8272\u7528\u6237\u80fd\u591f\u6267\u884c SHOW USERS \u8bed\u53e5\u3002 \u8bed\u6cd5 SHOW USERS; \u793a\u4f8b nebula> SHOW USERS; +---------+-----------------+ | Account | IP Whitelist | +---------+-----------------+ | \"root\" | \"\" | | \"user1\" | \"\" | | \"user2\" | \"192.168.10.10\" | +---------+-----------------+","title":"\u7528\u6237\u7ba1\u7406"},{"location":"7.data-security/1.authentication/2.management-user/#_1","text":"\u7528\u6237\u7ba1\u7406\u662fNebulaGraph\u8bbf\u95ee\u63a7\u5236\u4e2d\u4e0d\u53ef\u6216\u7f3a\u7684\u7ec4\u6210\u90e8\u5206\uff0c\u672c\u6587\u5c06\u4ecb\u7ecd\u7528\u6237\u7ba1\u7406\u7684\u76f8\u5173\u8bed\u6cd5\u3002 \u5f00\u542f \u8eab\u4efd\u9a8c\u8bc1 \u540e\uff0c\u7528\u6237\u9700\u8981\u4f7f\u7528\u5df2\u521b\u5efa\u7684\u7528\u6237\u624d\u80fd\u8fde\u63a5NebulaGraph\uff0c\u800c\u4e14\u8fde\u63a5\u540e\u53ef\u4ee5\u8fdb\u884c\u7684\u64cd\u4f5c\u4e5f\u53d6\u51b3\u4e8e\u8be5\u7528\u6237\u62e5\u6709\u7684 \u89d2\u8272\u6743\u9650 \u3002 Note \u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u8eab\u4efd\u9a8c\u8bc1\u529f\u80fd\u662f\u5173\u95ed\u7684\uff0c\u7528\u6237\u53ef\u4ee5\u4f7f\u7528 root \u7528\u6237\u540d\u548c\u4efb\u610f\u5bc6\u7801\u8fde\u63a5\u5230NebulaGraph\u3002 \u4fee\u6539\u6743\u9650\u540e\uff0c\u5bf9\u5e94\u7684\u7528\u6237\u9700\u8981\u91cd\u65b0\u767b\u5f55\u624d\u80fd\u751f\u6548\u3002","title":"\u7528\u6237\u7ba1\u7406"},{"location":"7.data-security/1.authentication/2.management-user/#create_user","text":"\u6267\u884c CREATE USER \u8bed\u53e5\u53ef\u4ee5\u521b\u5efa\u65b0\u7684NebulaGraph\u7528\u6237\u3002\u5f53\u524d\u4ec5 God \u89d2\u8272\u7528\u6237\uff08\u5373 root \u7528\u6237\uff09\u80fd\u591f\u6267\u884c CREATE USER \u8bed\u53e5\u3002 \u8bed\u6cd5 CREATE USER [IF NOT EXISTS] <user_name> [WITH PASSWORD '<password>']; IF NOT EXISTS \uff1a\u68c0\u6d4b\u5f85\u521b\u5efa\u7684\u7528\u6237\u540d\u662f\u5426\u5b58\u5728\uff0c\u53ea\u6709\u4e0d\u5b58\u5728\u65f6\uff0c\u624d\u4f1a\u521b\u5efa\u65b0\u7528\u6237\u3002 user_name \uff1a\u5f85\u521b\u5efa\u7684\u7528\u6237\u540d\u3002\u957f\u5ea6\u6700\u591a\u4e3a 16 \u4e2a\u5b57\u7b26\u3002 password \uff1a\u7528\u6237\u540d\u5bf9\u5e94\u7684\u5bc6\u7801\u3002\u9ed8\u8ba4\u5bc6\u7801\u4e3a\u7a7a\u5b57\u7b26\u4e32\uff08 '' \uff09\u3002\u957f\u5ea6\u6700\u591a\u4e3a 24 \u4e2a\u5b57\u7b26\u3002 \u793a\u4f8b nebula> CREATE USER user1 WITH PASSWORD 'nebula'; nebula> SHOW USERS; +---------+ | Account | +---------+ | \"root\" | | \"user1\" | +---------+","title":"\u521b\u5efa\u7528\u6237\uff08CREATE USER\uff09"},{"location":"7.data-security/1.authentication/2.management-user/#grant_role","text":"\u6267\u884c GRANT ROLE \u8bed\u53e5\u53ef\u4ee5\u5c06\u6307\u5b9a\u56fe\u7a7a\u95f4\u7684\u5185\u7f6e\u89d2\u8272\u6743\u9650\u6388\u4e88\u7528\u6237\u3002\u5f53\u524d\u4ec5 God \u89d2\u8272\u7528\u6237\u548c Admin \u89d2\u8272\u7528\u6237\u80fd\u591f\u6267\u884c GRANT ROLE \u8bed\u53e5\u3002\u89d2\u8272\u6743\u9650\u7684\u8bf4\u660e\uff0c\u8bf7\u53c2\u89c1 \u5185\u7f6e\u89d2\u8272\u6743\u9650 \u3002 \u8bed\u6cd5 GRANT ROLE <role_type> ON <space_name> TO <user_name>; \u793a\u4f8b nebula> GRANT ROLE USER ON basketballplayer TO user1;","title":"\u6388\u6743\u7528\u6237\uff08GRANT ROLE\uff09"},{"location":"7.data-security/1.authentication/2.management-user/#revoke_role","text":"\u6267\u884c REVOKE ROLE \u8bed\u53e5\u53ef\u4ee5\u64a4\u9500\u7528\u6237\u7684\u6307\u5b9a\u56fe\u7a7a\u95f4\u7684\u5185\u7f6e\u89d2\u8272\u6743\u9650\u3002\u5f53\u524d\u4ec5 God \u89d2\u8272\u7528\u6237\u548c Admin \u89d2\u8272\u7528\u6237\u80fd\u591f\u6267\u884c REVOKE ROLE \u8bed\u53e5\u3002\u89d2\u8272\u6743\u9650\u7684\u8bf4\u660e\uff0c\u8bf7\u53c2\u89c1 \u5185\u7f6e\u89d2\u8272\u6743\u9650 \u3002 \u8bed\u6cd5 REVOKE ROLE <role_type> ON <space_name> FROM <user_name>; \u793a\u4f8b nebula> REVOKE ROLE USER ON basketballplayer FROM user1;","title":"\u64a4\u9500\u7528\u6237\u6743\u9650\uff08REVOKE ROLE\uff09"},{"location":"7.data-security/1.authentication/2.management-user/#describe_user","text":"\u6267\u884c DESCRIBE USER \u8bed\u53e5\u53ef\u4ee5\u67e5\u770b\u6307\u5b9a\u7528\u6237\u7684\u89d2\u8272\u6743\u9650\u4fe1\u606f\u3002 \u8bed\u6cd5 DESCRIBE USER <user_name>; DESC USER <user_name>; \u793a\u4f8b nebula> DESCRIBE USER user1; +---------+--------------------+ | role | space | +---------+--------------------+ | \"ADMIN\" | \"basketballplayer\" | +---------+--------------------+","title":"\u67e5\u770b\u6307\u5b9a\u7528\u6237\u6743\u9650\uff08DESCRIBE USER\uff09"},{"location":"7.data-security/1.authentication/2.management-user/#show_roles","text":"\u6267\u884c SHOW ROLES \u8bed\u53e5\u53ef\u4ee5\u67e5\u770b\u6307\u5b9a\u7a7a\u95f4\u5185\u7684\u6240\u6709\u7528\u6237\uff08\u9664 root \u4ee5\u5916\uff09\u548c\u5bf9\u5e94\u89d2\u8272\u6743\u9650\u7684\u4fe1\u606f\u3002 \u8bed\u6cd5 SHOW ROLES IN <space_name>; \u793a\u4f8b nebula> SHOW ROLES IN basketballplayer; +---------+-----------+ | Account | Role Type | +---------+-----------+ | \"user1\" | \"ADMIN\" | +---------+-----------+","title":"\u67e5\u770b\u6307\u5b9a\u7a7a\u95f4\u5185\u7528\u6237\u6743\u9650\uff08SHOW ROLES\uff09"},{"location":"7.data-security/1.authentication/2.management-user/#change_password","text":"\u6267\u884c CHANGE PASSWORD \u8bed\u53e5\u53ef\u4ee5\u4fee\u6539\u7528\u6237\u5bc6\u7801\uff0c\u4fee\u6539\u65f6\u9700\u8981\u63d0\u4f9b\u65e7\u5bc6\u7801\u548c\u65b0\u5bc6\u7801\u3002 \u8bed\u6cd5 CHANGE PASSWORD <user_name> FROM '<old_password>' TO '<new_password>'; \u793a\u4f8b nebula> CHANGE PASSWORD user1 FROM 'nebula' TO 'nebula123';","title":"\u4fee\u6539\u7528\u6237\u5bc6\u7801\uff08CHANGE PASSWORD\uff09"},{"location":"7.data-security/1.authentication/2.management-user/#alter_user","text":"\u6267\u884c ALTER USER \u8bed\u53e5\u53ef\u4ee5\u4fee\u6539\u7528\u6237\u5bc6\u7801\uff0c\u4fee\u6539\u65f6\u4e0d\u9700\u8981\u63d0\u4f9b\u65e7\u5bc6\u7801\u3002\u5f53\u524d\u4ec5 God \u89d2\u8272\u7528\u6237\uff08\u5373 root \u7528\u6237\uff09\u80fd\u591f\u6267\u884c ALTER USER \u8bed\u53e5\u3002 \u8bed\u6cd5 ALTER USER <user_name> WITH PASSWORD '<password>'; \u793a\u4f8b nebula> ALTER USER user2 WITH PASSWORD 'change_password'; nebula> SHOW USERS; +---------+ | Account | +---------+ | \"root\" | | \"user1\" | | \"user2\" | +---------+","title":"\u4fee\u6539\u7528\u6237\u5bc6\u7801\uff08ALTER USER\uff09"},{"location":"7.data-security/1.authentication/2.management-user/#drop_user","text":"\u6267\u884c DROP USER \u8bed\u53e5\u53ef\u4ee5\u5220\u9664\u7528\u6237\u3002\u5f53\u524d\u4ec5 God \u89d2\u8272\u7528\u6237\u80fd\u591f\u6267\u884c DROP USER \u8bed\u53e5\u3002 Note \u5220\u9664\u7528\u6237\u4e0d\u4f1a\u81ea\u52a8\u65ad\u5f00\u8be5\u7528\u6237\u5f53\u524d\u4f1a\u8bdd\uff0c\u800c\u4e14\u6743\u9650\u4ecd\u5728\u5f53\u524d\u4f1a\u8bdd\u4e2d\u751f\u6548\u3002 \u8bed\u6cd5 DROP USER [IF EXISTS] <user_name>; \u793a\u4f8b nebula> DROP USER user1;","title":"\u5220\u9664\u7528\u6237\uff08DROP USER\uff09"},{"location":"7.data-security/1.authentication/2.management-user/#show_users","text":"\u6267\u884c SHOW USERS \u8bed\u53e5\u53ef\u4ee5\u67e5\u770b\u7528\u6237\u5217\u8868\u3002\u5f53\u524d\u4ec5 God \u89d2\u8272\u7528\u6237\u80fd\u591f\u6267\u884c SHOW USERS \u8bed\u53e5\u3002 \u8bed\u6cd5 SHOW USERS; \u793a\u4f8b nebula> SHOW USERS; +---------+-----------------+ | Account | IP Whitelist | +---------+-----------------+ | \"root\" | \"\" | | \"user1\" | \"\" | | \"user2\" | \"192.168.10.10\" | +---------+-----------------+","title":"\u67e5\u770b\u7528\u6237\u5217\u8868\uff08SHOW USERS\uff09"},{"location":"7.data-security/1.authentication/3.role-list/","text":"\u5185\u7f6e\u89d2\u8272\u6743\u9650 \u00b6 \u6240\u8c13\u89d2\u8272\uff0c\u5c31\u662f\u4e00\u7ec4\u76f8\u5173\u6743\u9650\u7684\u96c6\u5408\u3002\u7528\u6237\u53ef\u4ee5\u628a\u89d2\u8272\u5206\u914d\u7ed9 \u521b\u5efa\u7684\u7528\u6237 \uff0c\u4ece\u800c\u5b9e\u73b0\u8bbf\u95ee\u63a7\u5236\u3002 \u5185\u7f6e\u89d2\u8272 \u00b6 NebulaGraph\u5185\u7f6e\u4e86\u591a\u79cd\u89d2\u8272\uff0c\u8bf4\u660e\u5982\u4e0b\uff1a God \u521d\u59cb\u6700\u9ad8\u6743\u9650\u89d2\u8272\uff0c\u62e5\u6709 \u6240\u6709\u64cd\u4f5c \u7684\u6743\u9650\u3002\u7c7b\u4f3c\u4e8e Linux \u4e2d\u7684 root \u548c Windows \u4e2d\u7684 administrator \u3002 Meta \u670d\u52a1\u521d\u59cb\u5316\u65f6\uff0c\u4f1a\u81ea\u52a8\u521b\u5efa God \u89d2\u8272\u7528\u6237 root \uff0c\u5bc6\u7801\u4e3a nebula \u3002 \u6ce8\u610f \u8bf7\u53ca\u65f6\u4fee\u6539 root \u7528\u6237\u7684\u5bc6\u7801\uff0c\u4fdd\u8bc1\u6570\u636e\u5b89\u5168\u3002 \u5728 nebula-graphd.conf \u6587\u4ef6\u4e2d\uff08\u9ed8\u8ba4\u76ee\u5f55\u4e3a /usr/local/nebula/etc/ \uff09\uff0c\u5f53 --enable_authorize \u4e3a true \u65f6\uff1a \u4e00\u4e2a\u96c6\u7fa4\u53ea\u80fd\u6709\u4e00\u4e2a God \u89d2\u8272\u7528\u6237\uff0c\u8be5\u7528\u6237\u53ef\u4ee5\u7ba1\u7406\u96c6\u7fa4\u5185\u6240\u6709\u56fe\u7a7a\u95f4\u3002 \u4e0d\u652f\u6301\u624b\u52a8\u6388\u6743 God \u89d2\u8272\uff0c\u53ea\u80fd\u4f7f\u7528\u9ed8\u8ba4 God \u89d2\u8272\u7528\u6237 root \u3002 Admin \u5bf9\u6743\u9650\u5185\u7684\u56fe\u7a7a\u95f4\u62e5\u6709 Schema \u548c data \u7684 \u8bfb\u5199 \u6743\u9650\u3002 \u53ef\u4ee5\u5c06\u6743\u9650\u5185\u7684\u56fe\u7a7a\u95f4\u6388\u6743\u7ed9\u5176\u4ed6\u7528\u6237\u3002 \u6ce8\u610f \u53ea\u80fd\u6388\u6743\u4f4e\u4e8e ADMIN \u7ea7\u522b\u7684\u89d2\u8272\u7ed9\u5176\u4ed6\u7528\u6237\u3002 DBA \u5bf9\u6743\u9650\u5185\u7684\u56fe\u7a7a\u95f4\u62e5\u6709 Schema \u548c data \u7684 \u8bfb\u5199 \u6743\u9650\u3002 \u65e0\u6cd5\u5c06\u6743\u9650\u5185\u7684\u56fe\u7a7a\u95f4\u6388\u6743\u7ed9\u5176\u4ed6\u7528\u6237\u3002 User \u5bf9\u6743\u9650\u5185\u7684\u56fe\u7a7a\u95f4\u62e5\u6709 Schema \u7684 \u53ea\u8bfb \u6743\u9650\u3002 \u5bf9\u6743\u9650\u5185\u7684\u56fe\u7a7a\u95f4\u62e5\u6709 data \u7684 \u8bfb\u5199 \u6743\u9650\u3002 Guest \u5bf9\u6743\u9650\u5185\u7684\u56fe\u7a7a\u95f4\u62e5\u6709 Schema \u548c data \u7684 \u53ea\u8bfb \u6743\u9650\u3002 Note \u4e0d\u652f\u6301\u81ea\u884c\u521b\u5efa\u89d2\u8272\uff0c\u53ea\u80fd\u4f7f\u7528\u9ed8\u8ba4\u7684\u5185\u7f6e\u89d2\u8272\u3002 \u4e00\u4e2a\u7528\u6237\u5728\u4e00\u4e2a\u56fe\u7a7a\u95f4\u5185\u53ea\u80fd\u62e5\u6709\u4e00\u4e2a\u89d2\u8272\u6743\u9650\u3002\u6388\u6743\u7528\u6237\u8bf7\u53c2\u89c1 \u7528\u6237\u7ba1\u7406 \u3002 \u89d2\u8272\u6743\u9650 \u00b6 \u5404\u89d2\u8272\u7684\u6267\u884c\u6743\u9650\u5982\u4e0b\u3002 \u6743\u9650 God Admin DBA User Guest \u76f8\u5173\u8bed\u53e5 Read space Y Y Y Y Y USE \u3001 DESCRIBE SPACE Read schema Y Y Y Y Y DESCRIBE TAG \u3001 DESCRIBE EDGE \u3001 DESCRIBE TAG INDEX \u3001 DESCRIBE EDGE INDEX Write schema Y Y Y CREATE TAG \u3001 ALTER TAG \u3001 CREATE EDGE \u3001 ALTER EDGE \u3001 DROP TAG \u3001 DELETE TAG \u3001 DROP EDGE \u3001 CREATE TAG INDEX \u3001 CREATE EDGE INDEX \u3001 DROP TAG INDEX \u3001 DROP EDGE INDEX Write user Y CREATE USER \u3001 DROP USER \u3001 ALTER USER Write role Y Y GRANT \u3001 REVOKE Read data Y Y Y Y Y GO \u3001 SET \u3001 PIPE \u3001 MATCH \u3001 ASSIGNMENT \u3001 LOOKUP \u3001 YIELD \u3001 ORDER BY \u3001 FETCH VERTICES \u3001 Find \u3001 FETCH EDGES \u3001 FIND PATH \u3001 LIMIT \u3001 GROUP BY \u3001 RETURN Write data Y Y Y Y INSERT VERTEX \u3001 UPDATE VERTEX \u3001 INSERT EDGE \u3001 UPDATE EDGE \u3001 DELETE VERTEX \u3001 DELETE EDGES \u3001 DELETE TAG Show operations Y Y Y Y Y SHOW \u3001 CHANGE PASSWORD Job Y Y Y Y SUBMIT JOB COMPACT \u3001 SUBMIT JOB FLUSH \u3001 SUBMIT JOB STATS \u3001 STOP JOB \u3001 RECOVER JOB \u3001 BUILD TAG INDEX \u3001 BUILD EDGE INDEX \u3001 INGEST \u3001 DOWNLOAD Write space Y CREATE SPACE \u3001 DROP SPACE \u3001 CREATE SNAPSHOT \u3001 DROP SNAPSHOT \u3001 BALANCE \u3001 CONFIG Caution Show operations \u4e3a\u7279\u6b8a\u64cd\u4f5c\uff0c\u53ea\u4f1a\u5728\u81ea\u8eab\u6743\u9650\u5185\u6267\u884c\u3002\u4f8b\u5982 SHOW SPACES \uff0c\u6bcf\u4e2a\u89d2\u8272\u90fd\u53ef\u4ee5\u6267\u884c\uff0c\u4f46\u662f\u53ea\u4f1a\u8fd4\u56de\u81ea\u8eab\u6743\u9650\u5185\u7684\u56fe\u7a7a\u95f4\u3002 \u53ea\u6709 God \u89d2\u8272\u53ef\u4ee5\u6267\u884c SHOW USERS \u548c SHOW SNAPSHOTS \u8bed\u53e5\u3002","title":"\u5185\u7f6e\u89d2\u8272\u6743\u9650"},{"location":"7.data-security/1.authentication/3.role-list/#_1","text":"\u6240\u8c13\u89d2\u8272\uff0c\u5c31\u662f\u4e00\u7ec4\u76f8\u5173\u6743\u9650\u7684\u96c6\u5408\u3002\u7528\u6237\u53ef\u4ee5\u628a\u89d2\u8272\u5206\u914d\u7ed9 \u521b\u5efa\u7684\u7528\u6237 \uff0c\u4ece\u800c\u5b9e\u73b0\u8bbf\u95ee\u63a7\u5236\u3002","title":"\u5185\u7f6e\u89d2\u8272\u6743\u9650"},{"location":"7.data-security/1.authentication/3.role-list/#_2","text":"NebulaGraph\u5185\u7f6e\u4e86\u591a\u79cd\u89d2\u8272\uff0c\u8bf4\u660e\u5982\u4e0b\uff1a God \u521d\u59cb\u6700\u9ad8\u6743\u9650\u89d2\u8272\uff0c\u62e5\u6709 \u6240\u6709\u64cd\u4f5c \u7684\u6743\u9650\u3002\u7c7b\u4f3c\u4e8e Linux \u4e2d\u7684 root \u548c Windows \u4e2d\u7684 administrator \u3002 Meta \u670d\u52a1\u521d\u59cb\u5316\u65f6\uff0c\u4f1a\u81ea\u52a8\u521b\u5efa God \u89d2\u8272\u7528\u6237 root \uff0c\u5bc6\u7801\u4e3a nebula \u3002 \u6ce8\u610f \u8bf7\u53ca\u65f6\u4fee\u6539 root \u7528\u6237\u7684\u5bc6\u7801\uff0c\u4fdd\u8bc1\u6570\u636e\u5b89\u5168\u3002 \u5728 nebula-graphd.conf \u6587\u4ef6\u4e2d\uff08\u9ed8\u8ba4\u76ee\u5f55\u4e3a /usr/local/nebula/etc/ \uff09\uff0c\u5f53 --enable_authorize \u4e3a true \u65f6\uff1a \u4e00\u4e2a\u96c6\u7fa4\u53ea\u80fd\u6709\u4e00\u4e2a God \u89d2\u8272\u7528\u6237\uff0c\u8be5\u7528\u6237\u53ef\u4ee5\u7ba1\u7406\u96c6\u7fa4\u5185\u6240\u6709\u56fe\u7a7a\u95f4\u3002 \u4e0d\u652f\u6301\u624b\u52a8\u6388\u6743 God \u89d2\u8272\uff0c\u53ea\u80fd\u4f7f\u7528\u9ed8\u8ba4 God \u89d2\u8272\u7528\u6237 root \u3002 Admin \u5bf9\u6743\u9650\u5185\u7684\u56fe\u7a7a\u95f4\u62e5\u6709 Schema \u548c data \u7684 \u8bfb\u5199 \u6743\u9650\u3002 \u53ef\u4ee5\u5c06\u6743\u9650\u5185\u7684\u56fe\u7a7a\u95f4\u6388\u6743\u7ed9\u5176\u4ed6\u7528\u6237\u3002 \u6ce8\u610f \u53ea\u80fd\u6388\u6743\u4f4e\u4e8e ADMIN \u7ea7\u522b\u7684\u89d2\u8272\u7ed9\u5176\u4ed6\u7528\u6237\u3002 DBA \u5bf9\u6743\u9650\u5185\u7684\u56fe\u7a7a\u95f4\u62e5\u6709 Schema \u548c data \u7684 \u8bfb\u5199 \u6743\u9650\u3002 \u65e0\u6cd5\u5c06\u6743\u9650\u5185\u7684\u56fe\u7a7a\u95f4\u6388\u6743\u7ed9\u5176\u4ed6\u7528\u6237\u3002 User \u5bf9\u6743\u9650\u5185\u7684\u56fe\u7a7a\u95f4\u62e5\u6709 Schema \u7684 \u53ea\u8bfb \u6743\u9650\u3002 \u5bf9\u6743\u9650\u5185\u7684\u56fe\u7a7a\u95f4\u62e5\u6709 data \u7684 \u8bfb\u5199 \u6743\u9650\u3002 Guest \u5bf9\u6743\u9650\u5185\u7684\u56fe\u7a7a\u95f4\u62e5\u6709 Schema \u548c data \u7684 \u53ea\u8bfb \u6743\u9650\u3002 Note \u4e0d\u652f\u6301\u81ea\u884c\u521b\u5efa\u89d2\u8272\uff0c\u53ea\u80fd\u4f7f\u7528\u9ed8\u8ba4\u7684\u5185\u7f6e\u89d2\u8272\u3002 \u4e00\u4e2a\u7528\u6237\u5728\u4e00\u4e2a\u56fe\u7a7a\u95f4\u5185\u53ea\u80fd\u62e5\u6709\u4e00\u4e2a\u89d2\u8272\u6743\u9650\u3002\u6388\u6743\u7528\u6237\u8bf7\u53c2\u89c1 \u7528\u6237\u7ba1\u7406 \u3002","title":"\u5185\u7f6e\u89d2\u8272"},{"location":"7.data-security/1.authentication/3.role-list/#_3","text":"\u5404\u89d2\u8272\u7684\u6267\u884c\u6743\u9650\u5982\u4e0b\u3002 \u6743\u9650 God Admin DBA User Guest \u76f8\u5173\u8bed\u53e5 Read space Y Y Y Y Y USE \u3001 DESCRIBE SPACE Read schema Y Y Y Y Y DESCRIBE TAG \u3001 DESCRIBE EDGE \u3001 DESCRIBE TAG INDEX \u3001 DESCRIBE EDGE INDEX Write schema Y Y Y CREATE TAG \u3001 ALTER TAG \u3001 CREATE EDGE \u3001 ALTER EDGE \u3001 DROP TAG \u3001 DELETE TAG \u3001 DROP EDGE \u3001 CREATE TAG INDEX \u3001 CREATE EDGE INDEX \u3001 DROP TAG INDEX \u3001 DROP EDGE INDEX Write user Y CREATE USER \u3001 DROP USER \u3001 ALTER USER Write role Y Y GRANT \u3001 REVOKE Read data Y Y Y Y Y GO \u3001 SET \u3001 PIPE \u3001 MATCH \u3001 ASSIGNMENT \u3001 LOOKUP \u3001 YIELD \u3001 ORDER BY \u3001 FETCH VERTICES \u3001 Find \u3001 FETCH EDGES \u3001 FIND PATH \u3001 LIMIT \u3001 GROUP BY \u3001 RETURN Write data Y Y Y Y INSERT VERTEX \u3001 UPDATE VERTEX \u3001 INSERT EDGE \u3001 UPDATE EDGE \u3001 DELETE VERTEX \u3001 DELETE EDGES \u3001 DELETE TAG Show operations Y Y Y Y Y SHOW \u3001 CHANGE PASSWORD Job Y Y Y Y SUBMIT JOB COMPACT \u3001 SUBMIT JOB FLUSH \u3001 SUBMIT JOB STATS \u3001 STOP JOB \u3001 RECOVER JOB \u3001 BUILD TAG INDEX \u3001 BUILD EDGE INDEX \u3001 INGEST \u3001 DOWNLOAD Write space Y CREATE SPACE \u3001 DROP SPACE \u3001 CREATE SNAPSHOT \u3001 DROP SNAPSHOT \u3001 BALANCE \u3001 CONFIG Caution Show operations \u4e3a\u7279\u6b8a\u64cd\u4f5c\uff0c\u53ea\u4f1a\u5728\u81ea\u8eab\u6743\u9650\u5185\u6267\u884c\u3002\u4f8b\u5982 SHOW SPACES \uff0c\u6bcf\u4e2a\u89d2\u8272\u90fd\u53ef\u4ee5\u6267\u884c\uff0c\u4f46\u662f\u53ea\u4f1a\u8fd4\u56de\u81ea\u8eab\u6743\u9650\u5185\u7684\u56fe\u7a7a\u95f4\u3002 \u53ea\u6709 God \u89d2\u8272\u53ef\u4ee5\u6267\u884c SHOW USERS \u548c SHOW SNAPSHOTS \u8bed\u53e5\u3002","title":"\u89d2\u8272\u6743\u9650"},{"location":"8.service-tuning/2.graph-modeling/","text":"\u56fe\u5efa\u6a21\u8bbe\u8ba1 \u00b6 \u672c\u6587\u4ecb\u7ecd\u5728NebulaGraph\u9879\u76ee\u4e2d\u6210\u529f\u5e94\u7528\u7684\u4e00\u4e9b\u56fe\u5efa\u6a21\u548c\u7cfb\u7edf\u8bbe\u8ba1\u7684\u901a\u7528\u5efa\u8bae\u3002 Note \u672c\u6587\u5efa\u8bae\u662f\u901a\u7528\u7684\uff0c\u5728\u7279\u5b9a\u9886\u57df\u6709\u4f8b\u5916\uff0c\u8bf7\u7ed3\u5408\u5b9e\u9645\u4e1a\u52a1\u60c5\u51b5\u8fdb\u884c\u56fe\u5efa\u6a21\u3002 \u4ee5\u6027\u80fd\u4e3a\u7b2c\u4e00\u76ee\u6807\u8fdb\u884c\u5efa\u6a21 \u00b6 \u76ee\u524dNebulaGraph\u6ca1\u6709\u5b8c\u7f8e\u7684\u5efa\u6a21\u65b9\u6cd5\uff0c\u5982\u4f55\u5efa\u6a21\u53d6\u51b3\u4e8e\u60f3\u4ece\u6570\u636e\u4e2d\u6316\u6398\u7684\u5185\u5bb9\u3002\u5206\u6790\u6570\u636e\u5e76\u6839\u636e\u4e1a\u52a1\u6a21\u578b\u521b\u5efa\u65b9\u4fbf\u76f4\u89c2\u7684\u6570\u636e\u6a21\u578b\uff0c\u6d4b\u8bd5\u6a21\u578b\u5e76\u4f18\u5316\uff0c\u9010\u6e10\u9002\u5e94\u4e1a\u52a1\u3002\u4e3a\u4e86\u66f4\u597d\u7684\u6027\u80fd\uff0c\u7528\u6237\u53ef\u4ee5\u591a\u6b21\u66f4\u6539\u6216\u91cd\u65b0\u8bbe\u8ba1\u6a21\u578b\u3002 \u8bbe\u8ba1\u548c\u8bc4\u4f30\u6700\u91cd\u8981\u7684\u67e5\u8be2\u8bed\u53e5 \u00b6 \u5728\u6d4b\u8bd5\u73af\u8282\u4e2d\uff0c\u901a\u5e38\u4f1a\u9a8c\u8bc1\u5404\u79cd\u5404\u6837\u7684\u67e5\u8be2\u8bed\u53e5\uff0c\u4ee5\u5168\u9762\u8bc4\u4f30\u7cfb\u7edf\u80fd\u529b\u3002\u4f46\u5728\u5927\u591a\u6570\u751f\u4ea7\u573a\u666f\u4e0b\uff0c\u6bcf\u4e2a\u96c6\u7fa4\u88ab\u9891\u7e41\u8c03\u7528\u7684\u67e5\u8be2\u8bed\u53e5\u7684\u7c7b\u578b\u5e76\u4e0d\u4f1a\u592a\u591a\uff1b\u6839\u636e 20-80 \u539f\u5219\uff0c\u9488\u5bf9\u91cd\u8981\u7684\u67e5\u8be2\u8bed\u53e5\u8fdb\u884c\u5efa\u6a21\u4f18\u5316\u3002 \u907f\u514d\u5168\u91cf\u626b\u63cf \u00b6 \u901a\u8fc7\u5c5e\u6027\u7d22\u5f15\u6216\u8005 VID \u6765\u5148\u5b9a\u4f4d\u5230\u67d0\u4e2a\uff08\u4e9b\uff09\u70b9\u6216\u8005\u8fb9\uff0c\u7136\u540e\u5f00\u59cb\u56fe\u904d\u5386\uff1b\u5bf9\u4e8e\u6709\u4e9b\u67e5\u8be2\uff0c\u5b83\u4eec\u53ea\u7ed9\u5b9a\u4e86\u4e00\u4e2a\u5b50\u56fe\u6216\u8005\u8def\u5f84\u7684\uff08\u6b63\u5219\uff09\u6a21\u5f0f\uff0c\u4f46\u65e0\u6cd5\u901a\u8fc7\u5c5e\u6027\u7d22\u5f15\u6216\u8005 VID \u5b9a\u4f4d\u5230\u904d\u5386\u8d77\u59cb\u7684\u70b9\u8fb9\uff0c\u800c\u671f\u671b\u627e\u5230\u5e93\u4e2d\u5168\u90e8\u6ee1\u8db3\u8be5\u6a21\u5f0f\u7684\u5b50\u56fe\uff0c\u8fd9\u6837\u7684\u67e5\u8be2\u662f\u901a\u8fc7\u5168\u91cf\u626b\u63cf\u5b9e\u73b0\u7684\uff0c\u8fd9\u6837\u7684\u6027\u80fd\u4f1a\u5f88\u5dee\u3002NebulaGraph\u6ca1\u6709\u5b9e\u73b0\u5bf9\u4e8e\u5b50\u56fe\u6216\u8005\u8def\u5f84\u7684\u56fe\u7ed3\u6784\u7684\u7d22\u5f15\u3002 Tag \u4e0e Edge type \u4e4b\u95f4\u6ca1\u6709\u7ed1\u5b9a\u5173\u7cfb \u00b6 \u4efb\u4f55 Tag \u53ef\u4ee5\u4e0e\u4efb\u4f55 Edge type \u76f8\u5173\u8054\uff0c\u5b8c\u5168\u4ea4\u7531\u5e94\u7528\u7a0b\u5e8f\u63a7\u5236\u3002\u4e0d\u9700\u8981\u5728NebulaGraph\u4e2d\u9884\u5148\u5b9a\u4e49\uff0c\u4e5f\u6ca1\u6709\u547d\u4ee4\u83b7\u53d6\u54ea\u4e9b Tag \u4e0e\u54ea\u4e9b Edge type \u76f8\u5173\u8054\u3002 Tag/Edge type \u9884\u5148\u5b9a\u4e49\u4e86\u4e00\u7ec4\u5c5e\u6027 \u00b6 \u5efa\u7acb Tag\uff08\u6216\u8005 Edge type\uff09\u65f6\uff0c\u9700\u8981\u6307\u5b9a\u5bf9\u5e94\u7684\u5c5e\u6027\u3002\u901a\u5e38\u79f0\u4e3a Schema\u3002 \u533a\u5206\u201c\u7ecf\u5e38\u6539\u53d8\u7684\u90e8\u5206\u201d\u548c\u201c\u4e0d\u7ecf\u5e38\u6539\u53d8\u7684\u90e8\u5206\u201d \u00b6 \u6539\u53d8\u6307\u7684\u662f\u4e1a\u52a1\u6a21\u578b\u548c\u6570\u636e\u6a21\u578b\u4e0a\u7684\u6539\u53d8\uff08\u5143\u4fe1\u606f\uff09\uff0c\u4e0d\u662f\u6570\u636e\u81ea\u8eab\u7684\u6539\u53d8\u3002 \u4e00\u4e9b\u56fe\u6570\u636e\u5e93\u4ea7\u54c1\u662f schema-free \u7684\u8bbe\u8ba1\uff0c\u6240\u4ee5\u5728\u6570\u636e\u6a21\u578b\u4e0a\uff0c\u4e0d\u8bba\u662f\u56fe\u62d3\u6251\u7ed3\u6784\u8fd8\u662f\u5c5e\u6027\uff0c\u90fd\u53ef\u4ee5\u975e\u5e38\u81ea\u7531\u3002\u5c5e\u6027\u53ef\u4ee5\u5efa\u6a21\u8f6c\u53d8\u4e3a\u56fe\u62d3\u6251\uff0c\u53cd\u4e4b\u4ea6\u7136\u3002\u8fd9\u7c7b\u7cfb\u7edf\u901a\u5e38\u5bf9\u4e8e\u56fe\u62d3\u6251\u7684\u8bbf\u95ee\u6709\u7279\u522b\u7684\u4f18\u5316\u3002 \u800cNebulaGraph 3.6.0 \u662f\u5f3a Schema \u7684\uff08\u884c\u5b58\u578b\uff09\u7cfb\u7edf\uff0c\u8fd9\u610f\u5473\u7740\u4e1a\u52a1\u6570\u636e\u6a21\u578b\u4e2d\u7684\u90e8\u5206\u662f\u201c\u4e0d\u5e94\u8be5\u7ecf\u5e38\u6539\u53d8\u7684\u201d\uff0c\u4f8b\u5982\u5c5e\u6027 Schema \u5e94\u8be5\u907f\u514d\u6539\u53d8\u3002\u7c7b\u4f3c\u4e8e MySQL \u4e2d ALTER TABLE \u662f\u5e94\u8be5\u5c3d\u91cf\u907f\u514d\u7684\u64cd\u4f5c\u3002 \u800c\u70b9\u53ca\u90bb\u8fb9\u53ef\u4ee5\u975e\u5e38\u4f4e\u6210\u672c\u7684\u589e\u5220\uff0c\u56e0\u6b64\u53ef\u4ee5\u5c06\u4e1a\u52a1\u6a21\u578b\u4e2d\u201c\u7ecf\u5e38\u6539\u53d8\u7684\u90e8\u5206\u201d\u5efa\u6a21\u6210\u70b9\u6216\u8fb9\uff08\u5173\u7cfb\uff09\uff0c\u800c\u4e0d\u662f\u5c5e\u6027 Schema\u3002 \u4f8b\u5982\uff0c\u5728\u4e00\u4e2a\u4e1a\u52a1\u6a21\u578b\u4e2d\uff0c\u4eba\u7684\u5c5e\u6027\u662f\u76f8\u5bf9\u56fa\u5b9a\u7684\uff0c\u4f8b\u5982\u201c\u5e74\u9f84\u201d\uff0c\u201c\u6027\u522b\u201d\uff0c\u201c\u59d3\u540d\u201d\u3002\u800c\u201c\u901a\u4fe1\u597d\u53cb\u201d\uff0c\u201c\u51fa\u5165\u573a\u6240\u201d\uff0c\u201c\u4ea4\u6613\u8d26\u53f7\u201d\uff0c\u201c\u767b\u5f55\u8bbe\u5907\u201d\u7b49\u662f\u76f8\u5bf9\u5bb9\u6613\u6539\u53d8\u7684\u3002\u524d\u8005\u9002\u5408\u5efa\u6a21\u4e3a\u5c5e\u6027\uff0c\u540e\u8005\u9002\u5408\u5efa\u6a21\u4e3a\u70b9\u6216\u8fb9\u3002 \u81ea\u73af \u00b6 NebulaGraph\u662f\u5f3a Schema \u7c7b\u578b\u7cfb\u7edf\uff0c\u4f7f\u7528 ALTER TAG \u7684\u5f00\u9500\u5f88\u5927\uff0c\u800c\u4e14\u4e5f\u4e0d\u652f\u6301List\u7c7b\u578b\u5c5e\u6027\uff0c\u5f53\u7528\u6237\u9700\u8981\u4e3a\u70b9\u6dfb\u52a0\u4e00\u4e9b\u4e34\u65f6\u5c5e\u6027\u6216\u8005List\u7c7b\u578b\u7684\u5c5e\u6027\u65f6\uff0c\u53ef\u4ee5\u5148\u521b\u5efa\u5305\u542b\u6240\u9700\u5c5e\u6027\u7684\u8fb9\u7c7b\u578b\uff0c\u7136\u540e\u4e3a\u70b9\u63d2\u5165\u4e00\u6761\u6216\u591a\u6761\u6307\u5411\u81ea\u8eab\u7684\u8fb9\u3002\u67e5\u8be2\u65f6\u53ea\u9700\u8981\u67e5\u8be2\u6307\u5411\u81ea\u5df1\u7684\u8fb9\u5c5e\u6027\u3002\u5982\u4e0b\u56fe\u6240\u793a\u3002 \u793a\u4f8b\uff1a \u5982\u679c\u8981\u68c0\u7d22\u70b9\u7684\u4e34\u65f6\u5c5e\u6027\uff0c\u8bf7\u4ece\u81ea\u73af\u8fb9\u4e2d\u83b7\u53d6\u3002\u4f8b\u5982\uff1a //\u521b\u5efa\u8fb9\u7c7b\u578b\u5e76\u63d2\u5165\u81ea\u73af\u5c5e\u6027\u3002 nebula> CREATE EDGE IF NOT EXISTS temp(tmp int); nebula> INSERT EDGE temp(tmp) VALUES \"player100\"->\"player100\"@1:(1); nebula> INSERT EDGE temp(tmp) VALUES \"player100\"->\"player100\"@2:(2); nebula> INSERT EDGE temp(tmp) VALUES \"player100\"->\"player100\"@3:(3); //\u63d2\u5165\u6570\u636e\u540e\uff0c\u53ef\u4ee5\u901a\u8fc7\u67e5\u8be2\u8bed\u53e5\u67e5\u8be2\uff0c\u4f8b\u5982\uff1a nebula> GO FROM \"player100\" OVER temp YIELD properties(edge).tmp; +----------------------+ | properties(EDGE).tmp | +----------------------+ | 1 | | 2 | | 3 | +----------------------+ //\u5982\u679c\u9700\u8981\u8fd4\u56de\u7ed3\u679c\u4e3aList\uff0c\u53ef\u4ee5\u901a\u8fc7\u51fd\u6570\u5b9e\u73b0\uff0c\u4f8b\u5982\uff1a nebula> MATCH (v1:player)-[e:temp]->() return collect(e.tmp); +----------------+ | collect(e.tmp) | +----------------+ | [1, 2, 3] | +----------------+ \u5bf9\u4e8e\u81ea\u73af\u7684\u64cd\u4f5c\u6ca1\u6709\u5c01\u88c5\u4efb\u4f55\u7684\u8bed\u6cd5\u7cd6\uff0c\u64cd\u4f5c\u65b9\u5f0f\u4e0e\u666e\u901a\u7684\u8fb9\u65e0\u5f02\u3002 NebulaGraph\u81ea\u73af\u5c0f\u79d1\u666e \uff082 \u5206 54 \u79d2\uff09 \u60ac\u6302\u8fb9 \u00b6 \u60ac\u6302\u8fb9 (Dangling edge) \u662f\u6307\u4e00\u6761\u8d77\u70b9\u6216\u8005\u7ec8\u70b9\u4e0d\u5b58\u5728\u4e8e\u6570\u636e\u5e93\u4e2d\u7684\u8fb9\u3002 \u5728NebulaGraph 3.6.0\u4e2d\uff0c\u6709\u4e24\u79cd\u60c5\u51b5\u53ef\u80fd\u4f1a\u51fa\u73b0\u60ac\u6302\u8fb9\u3002 \u7b2c\u4e00\u79cd\u60c5\u51b5\uff1a\u5728\u8d77\u70b9\u548c\u7ec8\u70b9\u63d2\u5165\u4e4b\u524d\uff0c\u7528 INSERT EDGE \u8bed\u53e5\u63d2\u5165\u4e00\u6761\u8fb9\u3002 \u7b2c\u4e8c\u79cd\u60c5\u51b5\uff1a\u4f7f\u7528 DELETE VERTEX \u8bed\u53e5\u5220\u9664\u70b9\u7684\u65f6\u5019\uff0c\u6ca1\u6709\u4f7f\u7528 WITH EDGE \u9009\u9879\u3002\u6b64\u65f6\u7cfb\u7edf\u9ed8\u8ba4\u4e0d\u5220\u9664\u8be5\u70b9\u5173\u8054\u7684\u51fa\u8fb9\u548c\u5165\u8fb9\uff0c\u8fd9\u4e9b\u8fb9\u5c06\u53d8\u6210\u60ac\u6302\u8fb9\u3002 NebulaGraph 3.6.0 \u7684\u6570\u636e\u6a21\u578b\u4e2d\uff0c\u7531\u4e8e\u8bbe\u8ba1\u5141\u8bb8\u56fe\u4e2d\u5b58\u5728\u201c\u60ac\u6302\u8fb9\u201d\uff1b\u6ca1\u6709 openCypher \u4e2d\u7684 MERGE \u8bed\u53e5\u3002\u5bf9\u4e8e\u60ac\u6302\u8fb9\u7684\u4fdd\u8bc1\u5b8c\u5168\u4f9d\u8d56\u5e94\u7528\u5c42\u9762\u3002\u7528\u6237\u53ef\u4ee5\u4f7f\u7528 GO \u548c LOOKUP \u8bed\u53e5\u67e5\u8be2\u5230\u60ac\u6302\u8fb9\uff0c\u4f46\u65e0\u6cd5\u4f7f\u7528 MATCH \u8bed\u53e5\u67e5\u8be2\u5230\u60ac\u6302\u8fb9\u3002 \u793a\u4f8b\uff1a // \u63d2\u5165\u8d77\u70b9\u4e3a\u201c11\u201d\uff0c\u7ec8\u70b9\u4e3a\u201c13\u201d\u5e76\u4e14\u90fd\u4e0d\u5b58\u5728\u4e8e\u6570\u636e\u5e93\u4e2d\u7684\u60ac\u6302\u8fb9 nebula> CREATE EDGE IF NOT EXISTS e1 ( name string, age int ) ; nebula> INSERT EDGE e1 ( name, age ) VALUES \"11\" -> \"13\" : ( \"n1\" , 1 ) ; // \u4f7f\u7528 GO \u8bed\u53e5\u67e5\u8be2 nebula> GO FROM \"11\" over e1 YIELD properties ( edge ) ; +----------------------+ | properties ( EDGE ) | +----------------------+ | { age: 1 , name: \"n1\" } | +----------------------+ // \u4f7f\u7528 LOOKUP \u8bed\u53e5\u67e5\u8be2 nebula> LOOKUP ON e1 YIELD EDGE AS r ; +-------------------------------------------------------+ | r | +-------------------------------------------------------+ | [ :e2 \"11\" -> \"13\" @0 { age: 1 , name: \"n1\" }] | +-------------------------------------------------------+ // \u4f7f\u7528 MATCH \u67e5\u8be2\uff0c\u4e0d\u80fd\u67e5\u8be2\u5230\u60ac\u6302\u8fb9 nebula> MATCH () - [ e:e1 ] -> () RETURN e ; +---+ | e | +---+ +---+ Empty set ( time spent 3153 /3573 us ) NebulaGraph\u7684\u60ac\u6302\u8fb9\u5c0f\u79d1\u666e \uff082 \u5206 28 \u79d2\uff09 \u5e7f\u5ea6\u4f18\u5148\u5927\u4e8e\u6df1\u5ea6\u4f18\u5148 \u00b6 NebulaGraph\u57fa\u4e8e\u56fe\u62d3\u6251\u7ed3\u6784\u8fdb\u884c\u6df1\u5ea6\u56fe\u904d\u5386\u7684\u6027\u80fd\u8f83\u4f4e\uff0c\u5e7f\u5ea6\u4f18\u5148\u904d\u5386\u4ee5\u53ca\u83b7\u53d6\u5c5e\u6027\u7684\u6027\u80fd\u8f83\u597d\u3002\u4f8b\u5982\uff0c\u6a21\u578b a \u5305\u62ec\u59d3\u540d\u3001\u5e74\u9f84\u3001\u773c\u775b\u989c\u8272\u4e09\u79cd\u5c5e\u6027\uff0c\u5efa\u8bae\u521b\u5efa\u4e00\u4e2a Tag person \uff0c\u7136\u540e\u4e3a\u5b83\u6dfb\u52a0\u59d3\u540d\u3001\u5e74\u9f84\u3001\u773c\u775b\u989c\u8272\u7684\u5c5e\u6027\u3002\u5982\u679c\u521b\u5efa\u4e00\u4e2a\u5305\u542b\u773c\u775b\u989c\u8272\u7684 Tag \u548c\u4e00\u4e2a Edge type has \uff0c\u7136\u540e\u521b\u5efa\u4e00\u4e2a\u8fb9\u7528\u6765\u8868\u793a\u4eba\u62e5\u6709\u7684\u773c\u775b\u989c\u8272\uff0c\u8fd9\u79cd\u5efa\u6a21\u65b9\u6cd5\u4f1a\u964d\u4f4e\u904d\u5386\u6027\u80fd\u3002 \u201c\u901a\u8fc7\u8fb9\u5c5e\u6027\u83b7\u53d6\u8fb9\u201d\u7684\u6027\u80fd\u4e0e\u201c\u901a\u8fc7\u70b9\u5c5e\u6027\u83b7\u53d6\u70b9\u201d\u7684\u6027\u80fd\u662f\u63a5\u8fd1\u7684\u3002\u5728\u4e00\u4e9b\u6570\u636e\u5e93\u4e2d\uff0c\u4f1a\u5efa\u8bae\u5c06\u8fb9\u4e0a\u7684\u5c5e\u6027\u91cd\u65b0\u5efa\u6a21\u4e3a\u4e2d\u95f4\u8282\u70b9\u7684\u5c5e\u6027\uff1a\u4f8b\u5982 (src)-[edge {P1, P2}]->(dst) \uff0c edge \u4e0a\u6709\u5c5e\u6027 P1, P2 \uff0c\u4f1a\u5efa\u8bae\u5efa\u6a21\u4e3a (src)-[edge1]->(i_node {P1, P2})-[edge2]->(dst) \u3002\u5728NebulaGraph 3.6.0 \u4e2d\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528 (src)-[edge {P1, P2}]->(dst) \uff0c\u51cf\u5c11\u904d\u5386\u6df1\u5ea6\u6709\u52a9\u4e8e\u6027\u80fd\u3002 \u8fb9\u7684\u65b9\u5411 \u00b6 \u67e5\u8be2\u65f6\uff0c\u5982\u679c\u9700\u8981\u4f7f\u7528\u8fb9\u7684\u9006\u5411\u67e5\u8be2\uff0c\u53ef\u4ee5\u7528\u5982\u4e0b\u8bed\u6cd5\uff1a (dst)<-[edge]-(src) \u6216\u8005 GO FROM dst REVERSELY ; \u5982\u679c\u4e0d\u5173\u5fc3\u8fb9\u7684\u65b9\u5411\uff0c\u53ef\u4ee5\u4f7f\u7528\u5982\u4e0b\u8bed\u6cd5\uff1a (src)-[edge]-(dst) \u6216\u8005 GO FROM src BIDIRECT ; \u56e0\u6b64\uff0c\u901a\u5e38\u540c\u4e00\u6761\u8fb9\u6ca1\u6709\u5fc5\u8981\u53cd\u5411\u518d\u5197\u4f59\u63d2\u5165\u4e00\u6b21\u3002 \u5408\u7406\u8bbe\u7f6e Tag \u5c5e\u6027 \u00b6 \u5728\u56fe\u5efa\u6a21\u4e2d\uff0c\u8bf7\u5c06\u4e00\u7ec4\u7c7b\u4f3c\u7684\u5e73\u7ea7\u5c5e\u6027\u653e\u5165\u540c\u4e00\u4e2a Tag\uff0c\u5373\u6309\u4e0d\u540c\u6982\u5ff5\u8fdb\u884c\u5206\u7ec4\u3002 \u6b63\u786e\u4f7f\u7528\u7d22\u5f15 \u00b6 \u4f7f\u7528\u5c5e\u6027\u7d22\u5f15\u53ef\u4ee5\u901a\u8fc7\u5c5e\u6027\u67e5\u627e\u5230 VID\u3002\u4f46\u662f\u7d22\u5f15\u4f1a\u5bfc\u81f4\u5199\u6027\u80fd\u5927\u5e45\u4e0b\u964d \uff0c\u53ea\u6709\u5728\u6839\u636e\u70b9\u6216\u8fb9\u7684\u5c5e\u6027\u5b9a\u4f4d\u70b9\u6216\u8fb9\u65f6\u624d\u4f7f\u7528\u7d22\u5f15\u3002 \u5408\u7406\u8bbe\u8ba1 VID \u00b6 \u53c2\u8003 \u70b9 VID \u4e00\u8282 \u3002 \u957f\u6587\u672c \u00b6 \u4e3a\u8fb9\u521b\u5efa\u5c5e\u6027\u65f6\u8bf7\u52ff\u4f7f\u7528\u957f\u6587\u672c\uff1a\u8fd9\u4e9b\u5c5e\u6027\u4f1a\u88ab \u5b58\u50a8 2 \u4efd \uff0c\u5bfc\u81f4\u5199\u5165\u653e\u5927\u95ee\u9898\uff08write amplification\uff09\u3002\u6b64\u65f6\u5efa\u8bae\u5c06\u957f\u6587\u672c\u653e\u5728 HBase/ES \u4e2d\uff0c\u5c06\u5176\u5730\u5740\u5b58\u653e\u5728NebulaGraph\u4e2d\u3002 \u5173\u4e8e\u652f\u6301\u52a8\u6001\u56fe\uff08\u65f6\u5e8f\u56fe\uff09 \u00b6 \u5728\u67d0\u4e9b\u573a\u666f\u4e0b\uff0c\u56fe\u9700\u8981\u540c\u65f6\u5e26\u6709\u65f6\u5e8f\u4fe1\u606f\uff0c\u4ee5\u63cf\u8ff0\u6574\u4e2a\u56fe\u7684\u7ed3\u6784\u968f\u7740\u65f6\u95f4\u53d8\u5316\u7684\u60c5\u51b5 1 \u3002 NebulaGraph 3.6.0 \u7684\u8fb9\u53ef\u4ee5\u4f7f\u7528 Rank \u5b57\u6bb5\u5b58\u653e\u65f6\u95f4\u4fe1\u606f (int64)\uff0c\u4f46\u662f\u70b9\u4e0a\u6ca1\u6709\u5b57\u6bb5\u53ef\u4ee5\u5b58\u653e\u65f6\u95f4\u4fe1\u606f\uff08\u5b58\u653e\u5728\u5c5e\u6027\u4f1a\u88ab\u65b0\u5199\u5165\u8986\u76d6\uff09\u3002\u4e00\u4e2a\u6298\u4e2d\u7684\u529e\u6cd5\u662f\u5728\u70b9\u4e0a\u8bbe\u8ba1\u81ea\u5df1\u6307\u5411\u81ea\u5df1\u7684\u81ea\u73af\uff0c\u5e76\u5c06\u65f6\u95f4\u4fe1\u606f\u653e\u7f6e\u5728\u81ea\u73af\u7684 Rank \u4e0a\u3002 \u4e00\u4e9b\u514d\u8d39\u7684\u5efa\u6a21\u5de5\u5177 \u00b6 arrows.app https://blog.twitter.com/engineering/en_us/topics/insights/2021/temporal-graph-networks \u21a9","title":"\u56fe\u5efa\u6a21"},{"location":"8.service-tuning/2.graph-modeling/#_1","text":"\u672c\u6587\u4ecb\u7ecd\u5728NebulaGraph\u9879\u76ee\u4e2d\u6210\u529f\u5e94\u7528\u7684\u4e00\u4e9b\u56fe\u5efa\u6a21\u548c\u7cfb\u7edf\u8bbe\u8ba1\u7684\u901a\u7528\u5efa\u8bae\u3002 Note \u672c\u6587\u5efa\u8bae\u662f\u901a\u7528\u7684\uff0c\u5728\u7279\u5b9a\u9886\u57df\u6709\u4f8b\u5916\uff0c\u8bf7\u7ed3\u5408\u5b9e\u9645\u4e1a\u52a1\u60c5\u51b5\u8fdb\u884c\u56fe\u5efa\u6a21\u3002","title":"\u56fe\u5efa\u6a21\u8bbe\u8ba1"},{"location":"8.service-tuning/2.graph-modeling/#_2","text":"\u76ee\u524dNebulaGraph\u6ca1\u6709\u5b8c\u7f8e\u7684\u5efa\u6a21\u65b9\u6cd5\uff0c\u5982\u4f55\u5efa\u6a21\u53d6\u51b3\u4e8e\u60f3\u4ece\u6570\u636e\u4e2d\u6316\u6398\u7684\u5185\u5bb9\u3002\u5206\u6790\u6570\u636e\u5e76\u6839\u636e\u4e1a\u52a1\u6a21\u578b\u521b\u5efa\u65b9\u4fbf\u76f4\u89c2\u7684\u6570\u636e\u6a21\u578b\uff0c\u6d4b\u8bd5\u6a21\u578b\u5e76\u4f18\u5316\uff0c\u9010\u6e10\u9002\u5e94\u4e1a\u52a1\u3002\u4e3a\u4e86\u66f4\u597d\u7684\u6027\u80fd\uff0c\u7528\u6237\u53ef\u4ee5\u591a\u6b21\u66f4\u6539\u6216\u91cd\u65b0\u8bbe\u8ba1\u6a21\u578b\u3002","title":"\u4ee5\u6027\u80fd\u4e3a\u7b2c\u4e00\u76ee\u6807\u8fdb\u884c\u5efa\u6a21"},{"location":"8.service-tuning/2.graph-modeling/#_3","text":"\u5728\u6d4b\u8bd5\u73af\u8282\u4e2d\uff0c\u901a\u5e38\u4f1a\u9a8c\u8bc1\u5404\u79cd\u5404\u6837\u7684\u67e5\u8be2\u8bed\u53e5\uff0c\u4ee5\u5168\u9762\u8bc4\u4f30\u7cfb\u7edf\u80fd\u529b\u3002\u4f46\u5728\u5927\u591a\u6570\u751f\u4ea7\u573a\u666f\u4e0b\uff0c\u6bcf\u4e2a\u96c6\u7fa4\u88ab\u9891\u7e41\u8c03\u7528\u7684\u67e5\u8be2\u8bed\u53e5\u7684\u7c7b\u578b\u5e76\u4e0d\u4f1a\u592a\u591a\uff1b\u6839\u636e 20-80 \u539f\u5219\uff0c\u9488\u5bf9\u91cd\u8981\u7684\u67e5\u8be2\u8bed\u53e5\u8fdb\u884c\u5efa\u6a21\u4f18\u5316\u3002","title":"\u8bbe\u8ba1\u548c\u8bc4\u4f30\u6700\u91cd\u8981\u7684\u67e5\u8be2\u8bed\u53e5"},{"location":"8.service-tuning/2.graph-modeling/#_4","text":"\u901a\u8fc7\u5c5e\u6027\u7d22\u5f15\u6216\u8005 VID \u6765\u5148\u5b9a\u4f4d\u5230\u67d0\u4e2a\uff08\u4e9b\uff09\u70b9\u6216\u8005\u8fb9\uff0c\u7136\u540e\u5f00\u59cb\u56fe\u904d\u5386\uff1b\u5bf9\u4e8e\u6709\u4e9b\u67e5\u8be2\uff0c\u5b83\u4eec\u53ea\u7ed9\u5b9a\u4e86\u4e00\u4e2a\u5b50\u56fe\u6216\u8005\u8def\u5f84\u7684\uff08\u6b63\u5219\uff09\u6a21\u5f0f\uff0c\u4f46\u65e0\u6cd5\u901a\u8fc7\u5c5e\u6027\u7d22\u5f15\u6216\u8005 VID \u5b9a\u4f4d\u5230\u904d\u5386\u8d77\u59cb\u7684\u70b9\u8fb9\uff0c\u800c\u671f\u671b\u627e\u5230\u5e93\u4e2d\u5168\u90e8\u6ee1\u8db3\u8be5\u6a21\u5f0f\u7684\u5b50\u56fe\uff0c\u8fd9\u6837\u7684\u67e5\u8be2\u662f\u901a\u8fc7\u5168\u91cf\u626b\u63cf\u5b9e\u73b0\u7684\uff0c\u8fd9\u6837\u7684\u6027\u80fd\u4f1a\u5f88\u5dee\u3002NebulaGraph\u6ca1\u6709\u5b9e\u73b0\u5bf9\u4e8e\u5b50\u56fe\u6216\u8005\u8def\u5f84\u7684\u56fe\u7ed3\u6784\u7684\u7d22\u5f15\u3002","title":"\u907f\u514d\u5168\u91cf\u626b\u63cf"},{"location":"8.service-tuning/2.graph-modeling/#tag_edge_type","text":"\u4efb\u4f55 Tag \u53ef\u4ee5\u4e0e\u4efb\u4f55 Edge type \u76f8\u5173\u8054\uff0c\u5b8c\u5168\u4ea4\u7531\u5e94\u7528\u7a0b\u5e8f\u63a7\u5236\u3002\u4e0d\u9700\u8981\u5728NebulaGraph\u4e2d\u9884\u5148\u5b9a\u4e49\uff0c\u4e5f\u6ca1\u6709\u547d\u4ee4\u83b7\u53d6\u54ea\u4e9b Tag \u4e0e\u54ea\u4e9b Edge type \u76f8\u5173\u8054\u3002","title":"Tag \u4e0e Edge type \u4e4b\u95f4\u6ca1\u6709\u7ed1\u5b9a\u5173\u7cfb"},{"location":"8.service-tuning/2.graph-modeling/#tagedge_type","text":"\u5efa\u7acb Tag\uff08\u6216\u8005 Edge type\uff09\u65f6\uff0c\u9700\u8981\u6307\u5b9a\u5bf9\u5e94\u7684\u5c5e\u6027\u3002\u901a\u5e38\u79f0\u4e3a Schema\u3002","title":"Tag/Edge type \u9884\u5148\u5b9a\u4e49\u4e86\u4e00\u7ec4\u5c5e\u6027"},{"location":"8.service-tuning/2.graph-modeling/#_5","text":"\u6539\u53d8\u6307\u7684\u662f\u4e1a\u52a1\u6a21\u578b\u548c\u6570\u636e\u6a21\u578b\u4e0a\u7684\u6539\u53d8\uff08\u5143\u4fe1\u606f\uff09\uff0c\u4e0d\u662f\u6570\u636e\u81ea\u8eab\u7684\u6539\u53d8\u3002 \u4e00\u4e9b\u56fe\u6570\u636e\u5e93\u4ea7\u54c1\u662f schema-free \u7684\u8bbe\u8ba1\uff0c\u6240\u4ee5\u5728\u6570\u636e\u6a21\u578b\u4e0a\uff0c\u4e0d\u8bba\u662f\u56fe\u62d3\u6251\u7ed3\u6784\u8fd8\u662f\u5c5e\u6027\uff0c\u90fd\u53ef\u4ee5\u975e\u5e38\u81ea\u7531\u3002\u5c5e\u6027\u53ef\u4ee5\u5efa\u6a21\u8f6c\u53d8\u4e3a\u56fe\u62d3\u6251\uff0c\u53cd\u4e4b\u4ea6\u7136\u3002\u8fd9\u7c7b\u7cfb\u7edf\u901a\u5e38\u5bf9\u4e8e\u56fe\u62d3\u6251\u7684\u8bbf\u95ee\u6709\u7279\u522b\u7684\u4f18\u5316\u3002 \u800cNebulaGraph 3.6.0 \u662f\u5f3a Schema \u7684\uff08\u884c\u5b58\u578b\uff09\u7cfb\u7edf\uff0c\u8fd9\u610f\u5473\u7740\u4e1a\u52a1\u6570\u636e\u6a21\u578b\u4e2d\u7684\u90e8\u5206\u662f\u201c\u4e0d\u5e94\u8be5\u7ecf\u5e38\u6539\u53d8\u7684\u201d\uff0c\u4f8b\u5982\u5c5e\u6027 Schema \u5e94\u8be5\u907f\u514d\u6539\u53d8\u3002\u7c7b\u4f3c\u4e8e MySQL \u4e2d ALTER TABLE \u662f\u5e94\u8be5\u5c3d\u91cf\u907f\u514d\u7684\u64cd\u4f5c\u3002 \u800c\u70b9\u53ca\u90bb\u8fb9\u53ef\u4ee5\u975e\u5e38\u4f4e\u6210\u672c\u7684\u589e\u5220\uff0c\u56e0\u6b64\u53ef\u4ee5\u5c06\u4e1a\u52a1\u6a21\u578b\u4e2d\u201c\u7ecf\u5e38\u6539\u53d8\u7684\u90e8\u5206\u201d\u5efa\u6a21\u6210\u70b9\u6216\u8fb9\uff08\u5173\u7cfb\uff09\uff0c\u800c\u4e0d\u662f\u5c5e\u6027 Schema\u3002 \u4f8b\u5982\uff0c\u5728\u4e00\u4e2a\u4e1a\u52a1\u6a21\u578b\u4e2d\uff0c\u4eba\u7684\u5c5e\u6027\u662f\u76f8\u5bf9\u56fa\u5b9a\u7684\uff0c\u4f8b\u5982\u201c\u5e74\u9f84\u201d\uff0c\u201c\u6027\u522b\u201d\uff0c\u201c\u59d3\u540d\u201d\u3002\u800c\u201c\u901a\u4fe1\u597d\u53cb\u201d\uff0c\u201c\u51fa\u5165\u573a\u6240\u201d\uff0c\u201c\u4ea4\u6613\u8d26\u53f7\u201d\uff0c\u201c\u767b\u5f55\u8bbe\u5907\u201d\u7b49\u662f\u76f8\u5bf9\u5bb9\u6613\u6539\u53d8\u7684\u3002\u524d\u8005\u9002\u5408\u5efa\u6a21\u4e3a\u5c5e\u6027\uff0c\u540e\u8005\u9002\u5408\u5efa\u6a21\u4e3a\u70b9\u6216\u8fb9\u3002","title":"\u533a\u5206\u201c\u7ecf\u5e38\u6539\u53d8\u7684\u90e8\u5206\u201d\u548c\u201c\u4e0d\u7ecf\u5e38\u6539\u53d8\u7684\u90e8\u5206\u201d"},{"location":"8.service-tuning/2.graph-modeling/#_6","text":"NebulaGraph\u662f\u5f3a Schema \u7c7b\u578b\u7cfb\u7edf\uff0c\u4f7f\u7528 ALTER TAG \u7684\u5f00\u9500\u5f88\u5927\uff0c\u800c\u4e14\u4e5f\u4e0d\u652f\u6301List\u7c7b\u578b\u5c5e\u6027\uff0c\u5f53\u7528\u6237\u9700\u8981\u4e3a\u70b9\u6dfb\u52a0\u4e00\u4e9b\u4e34\u65f6\u5c5e\u6027\u6216\u8005List\u7c7b\u578b\u7684\u5c5e\u6027\u65f6\uff0c\u53ef\u4ee5\u5148\u521b\u5efa\u5305\u542b\u6240\u9700\u5c5e\u6027\u7684\u8fb9\u7c7b\u578b\uff0c\u7136\u540e\u4e3a\u70b9\u63d2\u5165\u4e00\u6761\u6216\u591a\u6761\u6307\u5411\u81ea\u8eab\u7684\u8fb9\u3002\u67e5\u8be2\u65f6\u53ea\u9700\u8981\u67e5\u8be2\u6307\u5411\u81ea\u5df1\u7684\u8fb9\u5c5e\u6027\u3002\u5982\u4e0b\u56fe\u6240\u793a\u3002 \u793a\u4f8b\uff1a \u5982\u679c\u8981\u68c0\u7d22\u70b9\u7684\u4e34\u65f6\u5c5e\u6027\uff0c\u8bf7\u4ece\u81ea\u73af\u8fb9\u4e2d\u83b7\u53d6\u3002\u4f8b\u5982\uff1a //\u521b\u5efa\u8fb9\u7c7b\u578b\u5e76\u63d2\u5165\u81ea\u73af\u5c5e\u6027\u3002 nebula> CREATE EDGE IF NOT EXISTS temp(tmp int); nebula> INSERT EDGE temp(tmp) VALUES \"player100\"->\"player100\"@1:(1); nebula> INSERT EDGE temp(tmp) VALUES \"player100\"->\"player100\"@2:(2); nebula> INSERT EDGE temp(tmp) VALUES \"player100\"->\"player100\"@3:(3); //\u63d2\u5165\u6570\u636e\u540e\uff0c\u53ef\u4ee5\u901a\u8fc7\u67e5\u8be2\u8bed\u53e5\u67e5\u8be2\uff0c\u4f8b\u5982\uff1a nebula> GO FROM \"player100\" OVER temp YIELD properties(edge).tmp; +----------------------+ | properties(EDGE).tmp | +----------------------+ | 1 | | 2 | | 3 | +----------------------+ //\u5982\u679c\u9700\u8981\u8fd4\u56de\u7ed3\u679c\u4e3aList\uff0c\u53ef\u4ee5\u901a\u8fc7\u51fd\u6570\u5b9e\u73b0\uff0c\u4f8b\u5982\uff1a nebula> MATCH (v1:player)-[e:temp]->() return collect(e.tmp); +----------------+ | collect(e.tmp) | +----------------+ | [1, 2, 3] | +----------------+ \u5bf9\u4e8e\u81ea\u73af\u7684\u64cd\u4f5c\u6ca1\u6709\u5c01\u88c5\u4efb\u4f55\u7684\u8bed\u6cd5\u7cd6\uff0c\u64cd\u4f5c\u65b9\u5f0f\u4e0e\u666e\u901a\u7684\u8fb9\u65e0\u5f02\u3002 NebulaGraph\u81ea\u73af\u5c0f\u79d1\u666e \uff082 \u5206 54 \u79d2\uff09","title":"\u81ea\u73af"},{"location":"8.service-tuning/2.graph-modeling/#_7","text":"\u60ac\u6302\u8fb9 (Dangling edge) \u662f\u6307\u4e00\u6761\u8d77\u70b9\u6216\u8005\u7ec8\u70b9\u4e0d\u5b58\u5728\u4e8e\u6570\u636e\u5e93\u4e2d\u7684\u8fb9\u3002 \u5728NebulaGraph 3.6.0\u4e2d\uff0c\u6709\u4e24\u79cd\u60c5\u51b5\u53ef\u80fd\u4f1a\u51fa\u73b0\u60ac\u6302\u8fb9\u3002 \u7b2c\u4e00\u79cd\u60c5\u51b5\uff1a\u5728\u8d77\u70b9\u548c\u7ec8\u70b9\u63d2\u5165\u4e4b\u524d\uff0c\u7528 INSERT EDGE \u8bed\u53e5\u63d2\u5165\u4e00\u6761\u8fb9\u3002 \u7b2c\u4e8c\u79cd\u60c5\u51b5\uff1a\u4f7f\u7528 DELETE VERTEX \u8bed\u53e5\u5220\u9664\u70b9\u7684\u65f6\u5019\uff0c\u6ca1\u6709\u4f7f\u7528 WITH EDGE \u9009\u9879\u3002\u6b64\u65f6\u7cfb\u7edf\u9ed8\u8ba4\u4e0d\u5220\u9664\u8be5\u70b9\u5173\u8054\u7684\u51fa\u8fb9\u548c\u5165\u8fb9\uff0c\u8fd9\u4e9b\u8fb9\u5c06\u53d8\u6210\u60ac\u6302\u8fb9\u3002 NebulaGraph 3.6.0 \u7684\u6570\u636e\u6a21\u578b\u4e2d\uff0c\u7531\u4e8e\u8bbe\u8ba1\u5141\u8bb8\u56fe\u4e2d\u5b58\u5728\u201c\u60ac\u6302\u8fb9\u201d\uff1b\u6ca1\u6709 openCypher \u4e2d\u7684 MERGE \u8bed\u53e5\u3002\u5bf9\u4e8e\u60ac\u6302\u8fb9\u7684\u4fdd\u8bc1\u5b8c\u5168\u4f9d\u8d56\u5e94\u7528\u5c42\u9762\u3002\u7528\u6237\u53ef\u4ee5\u4f7f\u7528 GO \u548c LOOKUP \u8bed\u53e5\u67e5\u8be2\u5230\u60ac\u6302\u8fb9\uff0c\u4f46\u65e0\u6cd5\u4f7f\u7528 MATCH \u8bed\u53e5\u67e5\u8be2\u5230\u60ac\u6302\u8fb9\u3002 \u793a\u4f8b\uff1a // \u63d2\u5165\u8d77\u70b9\u4e3a\u201c11\u201d\uff0c\u7ec8\u70b9\u4e3a\u201c13\u201d\u5e76\u4e14\u90fd\u4e0d\u5b58\u5728\u4e8e\u6570\u636e\u5e93\u4e2d\u7684\u60ac\u6302\u8fb9 nebula> CREATE EDGE IF NOT EXISTS e1 ( name string, age int ) ; nebula> INSERT EDGE e1 ( name, age ) VALUES \"11\" -> \"13\" : ( \"n1\" , 1 ) ; // \u4f7f\u7528 GO \u8bed\u53e5\u67e5\u8be2 nebula> GO FROM \"11\" over e1 YIELD properties ( edge ) ; +----------------------+ | properties ( EDGE ) | +----------------------+ | { age: 1 , name: \"n1\" } | +----------------------+ // \u4f7f\u7528 LOOKUP \u8bed\u53e5\u67e5\u8be2 nebula> LOOKUP ON e1 YIELD EDGE AS r ; +-------------------------------------------------------+ | r | +-------------------------------------------------------+ | [ :e2 \"11\" -> \"13\" @0 { age: 1 , name: \"n1\" }] | +-------------------------------------------------------+ // \u4f7f\u7528 MATCH \u67e5\u8be2\uff0c\u4e0d\u80fd\u67e5\u8be2\u5230\u60ac\u6302\u8fb9 nebula> MATCH () - [ e:e1 ] -> () RETURN e ; +---+ | e | +---+ +---+ Empty set ( time spent 3153 /3573 us ) NebulaGraph\u7684\u60ac\u6302\u8fb9\u5c0f\u79d1\u666e \uff082 \u5206 28 \u79d2\uff09","title":"\u60ac\u6302\u8fb9"},{"location":"8.service-tuning/2.graph-modeling/#_8","text":"NebulaGraph\u57fa\u4e8e\u56fe\u62d3\u6251\u7ed3\u6784\u8fdb\u884c\u6df1\u5ea6\u56fe\u904d\u5386\u7684\u6027\u80fd\u8f83\u4f4e\uff0c\u5e7f\u5ea6\u4f18\u5148\u904d\u5386\u4ee5\u53ca\u83b7\u53d6\u5c5e\u6027\u7684\u6027\u80fd\u8f83\u597d\u3002\u4f8b\u5982\uff0c\u6a21\u578b a \u5305\u62ec\u59d3\u540d\u3001\u5e74\u9f84\u3001\u773c\u775b\u989c\u8272\u4e09\u79cd\u5c5e\u6027\uff0c\u5efa\u8bae\u521b\u5efa\u4e00\u4e2a Tag person \uff0c\u7136\u540e\u4e3a\u5b83\u6dfb\u52a0\u59d3\u540d\u3001\u5e74\u9f84\u3001\u773c\u775b\u989c\u8272\u7684\u5c5e\u6027\u3002\u5982\u679c\u521b\u5efa\u4e00\u4e2a\u5305\u542b\u773c\u775b\u989c\u8272\u7684 Tag \u548c\u4e00\u4e2a Edge type has \uff0c\u7136\u540e\u521b\u5efa\u4e00\u4e2a\u8fb9\u7528\u6765\u8868\u793a\u4eba\u62e5\u6709\u7684\u773c\u775b\u989c\u8272\uff0c\u8fd9\u79cd\u5efa\u6a21\u65b9\u6cd5\u4f1a\u964d\u4f4e\u904d\u5386\u6027\u80fd\u3002 \u201c\u901a\u8fc7\u8fb9\u5c5e\u6027\u83b7\u53d6\u8fb9\u201d\u7684\u6027\u80fd\u4e0e\u201c\u901a\u8fc7\u70b9\u5c5e\u6027\u83b7\u53d6\u70b9\u201d\u7684\u6027\u80fd\u662f\u63a5\u8fd1\u7684\u3002\u5728\u4e00\u4e9b\u6570\u636e\u5e93\u4e2d\uff0c\u4f1a\u5efa\u8bae\u5c06\u8fb9\u4e0a\u7684\u5c5e\u6027\u91cd\u65b0\u5efa\u6a21\u4e3a\u4e2d\u95f4\u8282\u70b9\u7684\u5c5e\u6027\uff1a\u4f8b\u5982 (src)-[edge {P1, P2}]->(dst) \uff0c edge \u4e0a\u6709\u5c5e\u6027 P1, P2 \uff0c\u4f1a\u5efa\u8bae\u5efa\u6a21\u4e3a (src)-[edge1]->(i_node {P1, P2})-[edge2]->(dst) \u3002\u5728NebulaGraph 3.6.0 \u4e2d\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528 (src)-[edge {P1, P2}]->(dst) \uff0c\u51cf\u5c11\u904d\u5386\u6df1\u5ea6\u6709\u52a9\u4e8e\u6027\u80fd\u3002","title":"\u5e7f\u5ea6\u4f18\u5148\u5927\u4e8e\u6df1\u5ea6\u4f18\u5148"},{"location":"8.service-tuning/2.graph-modeling/#_9","text":"\u67e5\u8be2\u65f6\uff0c\u5982\u679c\u9700\u8981\u4f7f\u7528\u8fb9\u7684\u9006\u5411\u67e5\u8be2\uff0c\u53ef\u4ee5\u7528\u5982\u4e0b\u8bed\u6cd5\uff1a (dst)<-[edge]-(src) \u6216\u8005 GO FROM dst REVERSELY ; \u5982\u679c\u4e0d\u5173\u5fc3\u8fb9\u7684\u65b9\u5411\uff0c\u53ef\u4ee5\u4f7f\u7528\u5982\u4e0b\u8bed\u6cd5\uff1a (src)-[edge]-(dst) \u6216\u8005 GO FROM src BIDIRECT ; \u56e0\u6b64\uff0c\u901a\u5e38\u540c\u4e00\u6761\u8fb9\u6ca1\u6709\u5fc5\u8981\u53cd\u5411\u518d\u5197\u4f59\u63d2\u5165\u4e00\u6b21\u3002","title":"\u8fb9\u7684\u65b9\u5411"},{"location":"8.service-tuning/2.graph-modeling/#tag","text":"\u5728\u56fe\u5efa\u6a21\u4e2d\uff0c\u8bf7\u5c06\u4e00\u7ec4\u7c7b\u4f3c\u7684\u5e73\u7ea7\u5c5e\u6027\u653e\u5165\u540c\u4e00\u4e2a Tag\uff0c\u5373\u6309\u4e0d\u540c\u6982\u5ff5\u8fdb\u884c\u5206\u7ec4\u3002","title":"\u5408\u7406\u8bbe\u7f6e Tag \u5c5e\u6027"},{"location":"8.service-tuning/2.graph-modeling/#_10","text":"\u4f7f\u7528\u5c5e\u6027\u7d22\u5f15\u53ef\u4ee5\u901a\u8fc7\u5c5e\u6027\u67e5\u627e\u5230 VID\u3002\u4f46\u662f\u7d22\u5f15\u4f1a\u5bfc\u81f4\u5199\u6027\u80fd\u5927\u5e45\u4e0b\u964d \uff0c\u53ea\u6709\u5728\u6839\u636e\u70b9\u6216\u8fb9\u7684\u5c5e\u6027\u5b9a\u4f4d\u70b9\u6216\u8fb9\u65f6\u624d\u4f7f\u7528\u7d22\u5f15\u3002","title":"\u6b63\u786e\u4f7f\u7528\u7d22\u5f15"},{"location":"8.service-tuning/2.graph-modeling/#vid","text":"\u53c2\u8003 \u70b9 VID \u4e00\u8282 \u3002","title":"\u5408\u7406\u8bbe\u8ba1 VID"},{"location":"8.service-tuning/2.graph-modeling/#_11","text":"\u4e3a\u8fb9\u521b\u5efa\u5c5e\u6027\u65f6\u8bf7\u52ff\u4f7f\u7528\u957f\u6587\u672c\uff1a\u8fd9\u4e9b\u5c5e\u6027\u4f1a\u88ab \u5b58\u50a8 2 \u4efd \uff0c\u5bfc\u81f4\u5199\u5165\u653e\u5927\u95ee\u9898\uff08write amplification\uff09\u3002\u6b64\u65f6\u5efa\u8bae\u5c06\u957f\u6587\u672c\u653e\u5728 HBase/ES \u4e2d\uff0c\u5c06\u5176\u5730\u5740\u5b58\u653e\u5728NebulaGraph\u4e2d\u3002","title":"\u957f\u6587\u672c"},{"location":"8.service-tuning/2.graph-modeling/#_12","text":"\u5728\u67d0\u4e9b\u573a\u666f\u4e0b\uff0c\u56fe\u9700\u8981\u540c\u65f6\u5e26\u6709\u65f6\u5e8f\u4fe1\u606f\uff0c\u4ee5\u63cf\u8ff0\u6574\u4e2a\u56fe\u7684\u7ed3\u6784\u968f\u7740\u65f6\u95f4\u53d8\u5316\u7684\u60c5\u51b5 1 \u3002 NebulaGraph 3.6.0 \u7684\u8fb9\u53ef\u4ee5\u4f7f\u7528 Rank \u5b57\u6bb5\u5b58\u653e\u65f6\u95f4\u4fe1\u606f (int64)\uff0c\u4f46\u662f\u70b9\u4e0a\u6ca1\u6709\u5b57\u6bb5\u53ef\u4ee5\u5b58\u653e\u65f6\u95f4\u4fe1\u606f\uff08\u5b58\u653e\u5728\u5c5e\u6027\u4f1a\u88ab\u65b0\u5199\u5165\u8986\u76d6\uff09\u3002\u4e00\u4e2a\u6298\u4e2d\u7684\u529e\u6cd5\u662f\u5728\u70b9\u4e0a\u8bbe\u8ba1\u81ea\u5df1\u6307\u5411\u81ea\u5df1\u7684\u81ea\u73af\uff0c\u5e76\u5c06\u65f6\u95f4\u4fe1\u606f\u653e\u7f6e\u5728\u81ea\u73af\u7684 Rank \u4e0a\u3002","title":"\u5173\u4e8e\u652f\u6301\u52a8\u6001\u56fe\uff08\u65f6\u5e8f\u56fe\uff09"},{"location":"8.service-tuning/2.graph-modeling/#_13","text":"arrows.app https://blog.twitter.com/engineering/en_us/topics/insights/2021/temporal-graph-networks \u21a9","title":"\u4e00\u4e9b\u514d\u8d39\u7684\u5efa\u6a21\u5de5\u5177"},{"location":"8.service-tuning/3.system-design/","text":"\u7cfb\u7edf\u8bbe\u8ba1\u5efa\u8bae \u00b6 \u9009\u62e9 QPS \u4f18\u5148\u6216\u65f6\u5ef6\u4f18\u5148 \u00b6 NebulaGraph 3.6.0 \u66f4\u64c5\u957f\u5904\u7406\uff08\u4e92\u8054\u7f51\u5f0f\u7684\uff09\u6709\u5927\u91cf\u5e76\u53d1\u7684\u5c0f\u8bf7\u6c42\u3002\u4e5f\u5373\uff1a\u867d\u7136\u5168\u56fe\u5f88\u5927\uff08\u4e07\u4ebf\u70b9\u8fb9\uff09\uff0c\u4f46\u662f\u6bcf\u4e2a\u8bf7\u6c42\u8981\u8bbf\u95ee\u5230\u7684\u5b50\u56fe\u672c\u8eab\u5e76\u4e0d\u5927\uff08\u51e0\u767e\u4e07\u4e2a\u70b9\u8fb9\uff09\u2014\u2014\u5355\u4e2a\u8bf7\u6c42\u65f6\u5ef6\u4e0d\u5927\uff1b\u4f46\u8fd9\u7c7b\u8bf7\u6c42\u7684\u5e76\u53d1\u6570\u91cf\u7279\u522b\u591a\u2014\u2014QPS \u5927\u3002 \u4f46\u5bf9\u4e8e\u4e00\u4e9b\u4ea4\u4e92\u5206\u6790\u578b\u7684\u573a\u666f\uff0c\u5e76\u53d1\u8bf7\u6c42\u7684\u6570\u91cf\u4e0d\u591a\uff0c\u800c\u6bcf\u4e2a\u8bf7\u6c42\u8981\u8bbf\u95ee\u7684\u5b50\u56fe\u672c\u8eab\u7279\u522b\u5927\uff08\u4ebf\u4ee5\u4e0a\uff09\u3002\u4e3a\u964d\u4f4e\u65f6\u5ef6\uff0c\u53ef\u4ee5\u5728\u5e94\u7528\u7a0b\u5e8f\u4e2d\u5c06\u4e00\u4e2a\u5927\u7684\u8bf7\u6c42\uff0c\u62c6\u5206\u4e3a\u591a\u4e2a\u5c0f\u8bf7\u6c42\uff0c\u5e76\u53d1\u53d1\u9001\u7ed9\u591a\u4e2a graphd\u3002\u8fd9\u6837\u53ef\u4ee5\u964d\u4f4e\u5355\u4e2a\u5927\u8bf7\u6c42\u7684\u65f6\u5ef6\uff0c\u964d\u4f4e\u5355\u4e2a graphd \u7684\u5185\u5b58\u5360\u7528\u3002\u53e6\u5916\uff0c\u4e5f\u53ef\u4ee5\u4f7f\u7528 \u56fe\u8ba1\u7b97\u529f\u80fd NebulaGraph Algorithm \u3002 \u6570\u636e\u4f20\u8f93\u4e0e\u4f18\u5316 \u00b6 \u8bfb\u5199\u5e73\u8861\u3002NebulaGraph\u9002\u5408\u8bfb\u5199\u5e73\u8861\u6027\u7684\u5728\u7ebf\u573a\u666f\uff0c\u4e5f\u5373 OLTP \u578b\u7684\u7684\u201c\u5e76\u53d1\u7684\u53d1\u751f\u5199\u5165\u4e0e\u8bfb\u53d6\u201d\uff1b\u800c\u975e\u6570\u4ed3 OLAP \u578b\u7684\u201c\u4e00\u6b21\u5199\u5165\u591a\u6b21\u8bfb\u53d6\u201d\u3002 \u9009\u62e9\u4e0d\u540c\u7684\u5199\u5165\u65b9\u5f0f\u3002\u5927\u6279\u91cf\u7684\u6570\u636e\u5199\u5165\u53ef\u4ee5\u4f7f\u7528 sst \u52a0\u8f7d\u7684\u65b9\u5f0f\uff1b\u5c0f\u6279\u91cf\u7684\u5199\u5165\u4f7f\u7528 INSERT \u8bed\u53e5\u3002 \u9009\u62e9\u5408\u9002\u7684\u65f6\u95f4\u8fd0\u884c COMPACTION \u548c BALANCE\uff0c\u6765\u5206\u522b\u4f18\u5316\u6570\u636e\u683c\u5f0f\u548c\u5b58\u50a8\u5206\u5e03\u3002 NebulaGraph 3.6.0 \u4e0d\u652f\u6301\u5173\u7cfb\u578b\u6570\u636e\u5e93\u610f\u4e49\u4e0a\u7684\u4e8b\u52a1\u548c\u9694\u79bb\u6027\uff0c\u66f4\u63a5\u8fd1 NoSQL\u3002 \u67e5\u8be2\u9884\u70ed\u4e0e\u6570\u636e\u9884\u70ed \u00b6 \u5e94\u7528\u7aef\u8fdb\u884c\u9884\u70ed\uff1a Graphd \u4e0d\u652f\u6301\u9884\u7f16\u8bd1\u67e5\u8be2\u53ca\u76f8\u5e94\u751f\u6210\u67e5\u8be2\u8ba1\u5212\uff0c\u4e5f\u4e0d\u652f\u6301\u7f13\u5b58\u4e4b\u524d\u7684\u67e5\u8be2\u7ed3\u679c\uff1b Storaged \u4e0d\u652f\u6301\u9884\u70ed\u6570\u636e\uff0c\u53ea\u6709 RocksDB \u81ea\u8eab\u7684 LSM-tree \u548c BloomFilter \u4f1a\u542f\u52a8\u65f6\u52a0\u8f7d\u5230\u5185\u5b58\u4e2d\u3002 \u70b9\u548c\u8fb9\u88ab\u8bbf\u95ee\u8fc7\u540e\uff0c\u4f1a\u5404\u81ea\u7f13\u5b58\u5728 Storaged \u7684\u4e24\u79cd (LRU) Cache \u4e2d\u3002","title":"\u7cfb\u7edf\u5efa\u6a21"},{"location":"8.service-tuning/3.system-design/#_1","text":"","title":"\u7cfb\u7edf\u8bbe\u8ba1\u5efa\u8bae"},{"location":"8.service-tuning/3.system-design/#qps","text":"NebulaGraph 3.6.0 \u66f4\u64c5\u957f\u5904\u7406\uff08\u4e92\u8054\u7f51\u5f0f\u7684\uff09\u6709\u5927\u91cf\u5e76\u53d1\u7684\u5c0f\u8bf7\u6c42\u3002\u4e5f\u5373\uff1a\u867d\u7136\u5168\u56fe\u5f88\u5927\uff08\u4e07\u4ebf\u70b9\u8fb9\uff09\uff0c\u4f46\u662f\u6bcf\u4e2a\u8bf7\u6c42\u8981\u8bbf\u95ee\u5230\u7684\u5b50\u56fe\u672c\u8eab\u5e76\u4e0d\u5927\uff08\u51e0\u767e\u4e07\u4e2a\u70b9\u8fb9\uff09\u2014\u2014\u5355\u4e2a\u8bf7\u6c42\u65f6\u5ef6\u4e0d\u5927\uff1b\u4f46\u8fd9\u7c7b\u8bf7\u6c42\u7684\u5e76\u53d1\u6570\u91cf\u7279\u522b\u591a\u2014\u2014QPS \u5927\u3002 \u4f46\u5bf9\u4e8e\u4e00\u4e9b\u4ea4\u4e92\u5206\u6790\u578b\u7684\u573a\u666f\uff0c\u5e76\u53d1\u8bf7\u6c42\u7684\u6570\u91cf\u4e0d\u591a\uff0c\u800c\u6bcf\u4e2a\u8bf7\u6c42\u8981\u8bbf\u95ee\u7684\u5b50\u56fe\u672c\u8eab\u7279\u522b\u5927\uff08\u4ebf\u4ee5\u4e0a\uff09\u3002\u4e3a\u964d\u4f4e\u65f6\u5ef6\uff0c\u53ef\u4ee5\u5728\u5e94\u7528\u7a0b\u5e8f\u4e2d\u5c06\u4e00\u4e2a\u5927\u7684\u8bf7\u6c42\uff0c\u62c6\u5206\u4e3a\u591a\u4e2a\u5c0f\u8bf7\u6c42\uff0c\u5e76\u53d1\u53d1\u9001\u7ed9\u591a\u4e2a graphd\u3002\u8fd9\u6837\u53ef\u4ee5\u964d\u4f4e\u5355\u4e2a\u5927\u8bf7\u6c42\u7684\u65f6\u5ef6\uff0c\u964d\u4f4e\u5355\u4e2a graphd \u7684\u5185\u5b58\u5360\u7528\u3002\u53e6\u5916\uff0c\u4e5f\u53ef\u4ee5\u4f7f\u7528 \u56fe\u8ba1\u7b97\u529f\u80fd NebulaGraph Algorithm \u3002","title":"\u9009\u62e9 QPS \u4f18\u5148\u6216\u65f6\u5ef6\u4f18\u5148"},{"location":"8.service-tuning/3.system-design/#_2","text":"\u8bfb\u5199\u5e73\u8861\u3002NebulaGraph\u9002\u5408\u8bfb\u5199\u5e73\u8861\u6027\u7684\u5728\u7ebf\u573a\u666f\uff0c\u4e5f\u5373 OLTP \u578b\u7684\u7684\u201c\u5e76\u53d1\u7684\u53d1\u751f\u5199\u5165\u4e0e\u8bfb\u53d6\u201d\uff1b\u800c\u975e\u6570\u4ed3 OLAP \u578b\u7684\u201c\u4e00\u6b21\u5199\u5165\u591a\u6b21\u8bfb\u53d6\u201d\u3002 \u9009\u62e9\u4e0d\u540c\u7684\u5199\u5165\u65b9\u5f0f\u3002\u5927\u6279\u91cf\u7684\u6570\u636e\u5199\u5165\u53ef\u4ee5\u4f7f\u7528 sst \u52a0\u8f7d\u7684\u65b9\u5f0f\uff1b\u5c0f\u6279\u91cf\u7684\u5199\u5165\u4f7f\u7528 INSERT \u8bed\u53e5\u3002 \u9009\u62e9\u5408\u9002\u7684\u65f6\u95f4\u8fd0\u884c COMPACTION \u548c BALANCE\uff0c\u6765\u5206\u522b\u4f18\u5316\u6570\u636e\u683c\u5f0f\u548c\u5b58\u50a8\u5206\u5e03\u3002 NebulaGraph 3.6.0 \u4e0d\u652f\u6301\u5173\u7cfb\u578b\u6570\u636e\u5e93\u610f\u4e49\u4e0a\u7684\u4e8b\u52a1\u548c\u9694\u79bb\u6027\uff0c\u66f4\u63a5\u8fd1 NoSQL\u3002","title":"\u6570\u636e\u4f20\u8f93\u4e0e\u4f18\u5316"},{"location":"8.service-tuning/3.system-design/#_3","text":"\u5e94\u7528\u7aef\u8fdb\u884c\u9884\u70ed\uff1a Graphd \u4e0d\u652f\u6301\u9884\u7f16\u8bd1\u67e5\u8be2\u53ca\u76f8\u5e94\u751f\u6210\u67e5\u8be2\u8ba1\u5212\uff0c\u4e5f\u4e0d\u652f\u6301\u7f13\u5b58\u4e4b\u524d\u7684\u67e5\u8be2\u7ed3\u679c\uff1b Storaged \u4e0d\u652f\u6301\u9884\u70ed\u6570\u636e\uff0c\u53ea\u6709 RocksDB \u81ea\u8eab\u7684 LSM-tree \u548c BloomFilter \u4f1a\u542f\u52a8\u65f6\u52a0\u8f7d\u5230\u5185\u5b58\u4e2d\u3002 \u70b9\u548c\u8fb9\u88ab\u8bbf\u95ee\u8fc7\u540e\uff0c\u4f1a\u5404\u81ea\u7f13\u5b58\u5728 Storaged \u7684\u4e24\u79cd (LRU) Cache \u4e2d\u3002","title":"\u67e5\u8be2\u9884\u70ed\u4e0e\u6570\u636e\u9884\u70ed"},{"location":"8.service-tuning/4.plan/","text":"\u6267\u884c\u8ba1\u5212 \u00b6 NebulaGraph 3.6.0 \u5b9e\u73b0\u4e86\u57fa\u4e8e\u89c4\u5219\u7684\u6267\u884c\u8ba1\u5212\u3002\u7528\u6237\u65e0\u6cd5\u6539\u53d8\u6267\u884c\u8ba1\u5212\uff0c\u65e0\u6cd5\u8fdb\u884c\u67e5\u8be2\u7684\u9884\u7f16\u8bd1\uff08\u53ca\u76f8\u5e94\u7684\u8ba1\u5212\u7f13\u5b58\uff09\uff0c\u65e0\u6cd5\u901a\u8fc7\u6307\u5b9a\u7d22\u5f15\u6765\u52a0\u901f\u67e5\u8be2\u3002 \u8981\u67e5\u770b\u6267\u884c\u8ba1\u5212\u53ca\u6267\u884c\u6982\u8981\uff0c\u8bf7\u53c2\u8003 EXPLAIN \u548c PROFILE \u3002","title":"\u6267\u884c\u8ba1\u5212"},{"location":"8.service-tuning/4.plan/#_1","text":"NebulaGraph 3.6.0 \u5b9e\u73b0\u4e86\u57fa\u4e8e\u89c4\u5219\u7684\u6267\u884c\u8ba1\u5212\u3002\u7528\u6237\u65e0\u6cd5\u6539\u53d8\u6267\u884c\u8ba1\u5212\uff0c\u65e0\u6cd5\u8fdb\u884c\u67e5\u8be2\u7684\u9884\u7f16\u8bd1\uff08\u53ca\u76f8\u5e94\u7684\u8ba1\u5212\u7f13\u5b58\uff09\uff0c\u65e0\u6cd5\u901a\u8fc7\u6307\u5b9a\u7d22\u5f15\u6765\u52a0\u901f\u67e5\u8be2\u3002 \u8981\u67e5\u770b\u6267\u884c\u8ba1\u5212\u53ca\u6267\u884c\u6982\u8981\uff0c\u8bf7\u53c2\u8003 EXPLAIN \u548c PROFILE \u3002","title":"\u6267\u884c\u8ba1\u5212"},{"location":"8.service-tuning/compaction/","text":"Compaction \u00b6 \u672c\u6587\u4ecb\u7ecd Compaction \u7684\u76f8\u5173\u4fe1\u606f\u3002 NebulaGraph\u4e2d\uff0c Compaction \u662f\u6700\u91cd\u8981\u7684\u540e\u53f0\u64cd\u4f5c\uff0c\u5bf9\u6027\u80fd\u6709\u6781\u5176\u91cd\u8981\u7684\u5f71\u54cd\u3002 Compaction \u64cd\u4f5c\u4f1a\u8bfb\u53d6\u786c\u76d8\u4e0a\u7684\u6570\u636e\uff0c\u7136\u540e\u91cd\u7ec4\u6570\u636e\u7ed3\u6784\u548c\u7d22\u5f15\uff0c\u7136\u540e\u518d\u5199\u56de\u786c\u76d8\uff0c\u53ef\u4ee5\u6210\u500d\u63d0\u5347\u8bfb\u53d6\u6027\u80fd\u3002\u5c06\u5927\u91cf\u6570\u636e\u5199\u5165NebulaGraph\u540e\uff0c\u4e3a\u4e86\u63d0\u9ad8\u8bfb\u53d6\u6027\u80fd\uff0c\u9700\u8981\u624b\u52a8\u89e6\u53d1 Compaction \u64cd\u4f5c\uff08\u5168\u91cf Compaction \uff09\u3002 Note Compaction \u64cd\u4f5c\u4f1a\u957f\u65f6\u95f4\u5360\u7528\u786c\u76d8\u7684 IO\uff0c\u5efa\u8bae\u5728\u4e1a\u52a1\u4f4e\u5cf0\u671f\uff08\u4f8b\u5982\u51cc\u6668\uff09\u6267\u884c\u8be5\u64cd\u4f5c\u3002 NebulaGraph\u6709\u4e24\u79cd\u7c7b\u578b\u7684 Compaction \u64cd\u4f5c\uff1a\u81ea\u52a8 Compaction \u548c\u5168\u91cf Compaction \u3002 \u81ea\u52a8 Compaction \u00b6 \u81ea\u52a8 Compaction \u662f\u5728\u7cfb\u7edf\u8bfb\u53d6\u6570\u636e\u3001\u5199\u5165\u6570\u636e\u6216\u7cfb\u7edf\u91cd\u542f\u65f6\u81ea\u52a8\u89e6\u53d1 Compaction \u64cd\u4f5c\uff0c\u63d0\u5347\u77ed\u65f6\u95f4\u5185\u7684\u8bfb\u53d6\u6027\u80fd\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u81ea\u52a8 Compaction \u662f\u5f00\u542f\u72b6\u6001\uff0c\u53ef\u80fd\u5728\u4e1a\u52a1\u9ad8\u5cf0\u671f\u89e6\u53d1\uff0c\u5bfc\u81f4\u610f\u5916\u62a2\u5360 IO \u5f71\u54cd\u4e1a\u52a1\u3002 \u5168\u91cf Compaction \u00b6 \u5168\u91cf Compaction \u53ef\u4ee5\u5bf9\u56fe\u7a7a\u95f4\u8fdb\u884c\u5927\u89c4\u6a21\u540e\u53f0\u64cd\u4f5c\uff0c\u4f8b\u5982\u5408\u5e76\u6587\u4ef6\u3001\u5220\u9664 TTL \u8fc7\u671f\u6570\u636e\u7b49\uff0c\u8be5\u64cd\u4f5c\u9700\u8981\u624b\u52a8\u53d1\u8d77\u3002\u4f7f\u7528\u5982\u4e0b\u8bed\u53e5\u6267\u884c\u5168\u91cf Compaction \u64cd\u4f5c\uff1a Note \u5efa\u8bae\u5728\u4e1a\u52a1\u4f4e\u5cf0\u671f\uff08\u4f8b\u5982\u51cc\u6668\uff09\u6267\u884c\u8be5\u64cd\u4f5c\uff0c\u907f\u514d\u5927\u91cf\u5360\u7528\u786c\u76d8 IO \u5f71\u54cd\u4e1a\u52a1\u3002 nebula> USE <your_graph_space>; nebula> SUBMIT JOB COMPACT; \u4e0a\u8ff0\u547d\u4ee4\u4f1a\u8fd4\u56de\u4f5c\u4e1a\u7684 ID\uff0c\u7528\u6237\u53ef\u4ee5\u4f7f\u7528\u5982\u4e0b\u547d\u4ee4\u67e5\u770b Compaction \u72b6\u6001\uff1a nebula> SHOW JOB <job_id>; \u64cd\u4f5c\u5efa\u8bae \u00b6 \u4e3a\u4fdd\u8bc1NebulaGraph\u7684\u6027\u80fd\uff0c\u8bf7\u53c2\u8003\u5982\u4e0b\u64cd\u4f5c\u5efa\u8bae\uff1a \u6570\u636e\u5bfc\u5165\u5b8c\u6210\u540e\uff0c\u8bf7\u6267\u884c SUBMIT JOB COMPACT \u3002 \u4e1a\u52a1\u4f4e\u5cf0\u671f\uff08\u4f8b\u5982\u51cc\u6668\uff09\u6267\u884c SUBMIT JOB COMPACT \u3002 \u4e3a\u63a7\u5236 Compaction \u7684\u5199\u5165\u901f\u7387\uff0c\u8bf7\u5728\u914d\u7f6e\u6587\u4ef6 nebula-storaged.conf \u4e2d\u8bbe\u7f6e\u5982\u4e0b\u53c2\u6570\uff08\u6ce8\uff1a\u6b64\u53c2\u6570\u9650\u5236\u5168\u90e8\u5199\u5165\uff0c\u5305\u62ec\u6b63\u5e38\u5199\u5165\u548c Compaction\uff09\uff1a # \u5199\u5165\u901f\u5ea6\u9650\u5236\u4e3a 20MB/S\u3002 --rocksdb_rate_limit = 20 ( in MB/s ) FAQ \u00b6 Compaction \u76f8\u5173\u7684\u65e5\u5fd7\u5728\u54ea\uff1f \u00b6 \u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c /usr/local/nebula/data/storage/nebula/{1}/data/ \u76ee\u5f55\u4e0b\u7684\u6587\u4ef6\u540d\u4e3a LOG \u6587\u4ef6\uff0c\u6216\u8005\u7c7b\u4f3c LOG.old.1625797988509303 \uff0c\u627e\u5230\u5982\u4e0b\u7684\u90e8\u5206\u3002 ** Compaction Stats [default] ** Level Files Size Score Read(GB) Rn(GB) Rnp1(GB) Write(GB) Wnew(GB) Moved(GB) W-Amp Rd(MB/s) Wr(MB/s) Comp(sec) CompMergeCPU(sec) Comp(cnt) Avg(sec) KeyIn KeyDrop ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------- L0 2/0 2.46 KB 0.5 0.0 0.0 0.0 0.0 0.0 0.0 1.0 0.0 0.0 0.53 0.51 2 0.264 0 0 Sum 2/0 2.46 KB 0.0 0.0 0.0 0.0 0.0 0.0 0.0 1.0 0.0 0.0 0.53 0.51 2 0.264 0 0 Int 0/0 0.00 KB 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.00 0.00 0 0.000 0 0 \u5982\u679c\u5f53\u524d\u7684 L0 \u6587\u4ef6\u6570\u91cf\u8f83\u591a\uff0c\u5bf9\u8bfb\u6027\u80fd\u5f71\u54cd\u8f83\u5927\uff0c\u53ef\u4ee5\u89e6\u53d1 compaction\u3002 \u53ef\u4ee5\u540c\u65f6\u5728\u591a\u4e2a\u56fe\u7a7a\u95f4\u6267\u884c\u5168\u91cf Compaction \u64cd\u4f5c\u5417\uff1f \u00b6 \u53ef\u4ee5\uff0c\u4f46\u662f\u6b64\u65f6\u7684\u786c\u76d8 IO \u4f1a\u5f88\u9ad8\uff0c\u53ef\u80fd\u4f1a\u5f71\u54cd\u6548\u7387\u3002 \u5168\u91cf Compaction \u64cd\u4f5c\u4f1a\u8017\u8d39\u591a\u957f\u65f6\u95f4\uff1f \u00b6 \u5982\u679c\u5df2\u7ecf\u8bbe\u7f6e\u8bfb\u5199\u901f\u7387\u9650\u5236\uff0c\u4f8b\u5982 rocksdb_rate_limit \u9650\u5236\u4e3a 20MB/S \u65f6\uff0c\u7528\u6237\u53ef\u4ee5\u901a\u8fc7 \u786c\u76d8\u4f7f\u7528\u91cf/rocksdb_rate_limit \u9884\u4f30\u9700\u8981\u8017\u8d39\u7684\u65f6\u95f4\u3002 \u5982\u679c\u6ca1\u6709\u8bbe\u7f6e\u8bfb\u5199\u901f\u7387\u9650\u5236\uff0c\u6839\u636e\u7ecf\u9a8c\uff0c\u901f\u7387\u5927\u7ea6\u4e3a 50MB/S\u3002 \u53ef\u4ee5\u52a8\u6001\u8c03\u6574 rocksdb_rate_limit \u5417\uff1f \u00b6 \u4e0d\u53ef\u4ee5\u3002 \u5168\u91cf Compaction \u64cd\u4f5c\u5f00\u59cb\u540e\u53ef\u4ee5\u505c\u6b62\u5417\uff1f \u00b6 \u4e0d\u53ef\u4ee5\u505c\u6b62\uff0c\u5fc5\u987b\u7b49\u5f85\u64cd\u4f5c\u5b8c\u6210\u3002\u8fd9\u662f RocksDB \u7684\u9650\u5236\u3002","title":"Compaction"},{"location":"8.service-tuning/compaction/#compaction","text":"\u672c\u6587\u4ecb\u7ecd Compaction \u7684\u76f8\u5173\u4fe1\u606f\u3002 NebulaGraph\u4e2d\uff0c Compaction \u662f\u6700\u91cd\u8981\u7684\u540e\u53f0\u64cd\u4f5c\uff0c\u5bf9\u6027\u80fd\u6709\u6781\u5176\u91cd\u8981\u7684\u5f71\u54cd\u3002 Compaction \u64cd\u4f5c\u4f1a\u8bfb\u53d6\u786c\u76d8\u4e0a\u7684\u6570\u636e\uff0c\u7136\u540e\u91cd\u7ec4\u6570\u636e\u7ed3\u6784\u548c\u7d22\u5f15\uff0c\u7136\u540e\u518d\u5199\u56de\u786c\u76d8\uff0c\u53ef\u4ee5\u6210\u500d\u63d0\u5347\u8bfb\u53d6\u6027\u80fd\u3002\u5c06\u5927\u91cf\u6570\u636e\u5199\u5165NebulaGraph\u540e\uff0c\u4e3a\u4e86\u63d0\u9ad8\u8bfb\u53d6\u6027\u80fd\uff0c\u9700\u8981\u624b\u52a8\u89e6\u53d1 Compaction \u64cd\u4f5c\uff08\u5168\u91cf Compaction \uff09\u3002 Note Compaction \u64cd\u4f5c\u4f1a\u957f\u65f6\u95f4\u5360\u7528\u786c\u76d8\u7684 IO\uff0c\u5efa\u8bae\u5728\u4e1a\u52a1\u4f4e\u5cf0\u671f\uff08\u4f8b\u5982\u51cc\u6668\uff09\u6267\u884c\u8be5\u64cd\u4f5c\u3002 NebulaGraph\u6709\u4e24\u79cd\u7c7b\u578b\u7684 Compaction \u64cd\u4f5c\uff1a\u81ea\u52a8 Compaction \u548c\u5168\u91cf Compaction \u3002","title":"Compaction"},{"location":"8.service-tuning/compaction/#compaction_1","text":"\u81ea\u52a8 Compaction \u662f\u5728\u7cfb\u7edf\u8bfb\u53d6\u6570\u636e\u3001\u5199\u5165\u6570\u636e\u6216\u7cfb\u7edf\u91cd\u542f\u65f6\u81ea\u52a8\u89e6\u53d1 Compaction \u64cd\u4f5c\uff0c\u63d0\u5347\u77ed\u65f6\u95f4\u5185\u7684\u8bfb\u53d6\u6027\u80fd\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u81ea\u52a8 Compaction \u662f\u5f00\u542f\u72b6\u6001\uff0c\u53ef\u80fd\u5728\u4e1a\u52a1\u9ad8\u5cf0\u671f\u89e6\u53d1\uff0c\u5bfc\u81f4\u610f\u5916\u62a2\u5360 IO \u5f71\u54cd\u4e1a\u52a1\u3002","title":"\u81ea\u52a8Compaction"},{"location":"8.service-tuning/compaction/#compaction_2","text":"\u5168\u91cf Compaction \u53ef\u4ee5\u5bf9\u56fe\u7a7a\u95f4\u8fdb\u884c\u5927\u89c4\u6a21\u540e\u53f0\u64cd\u4f5c\uff0c\u4f8b\u5982\u5408\u5e76\u6587\u4ef6\u3001\u5220\u9664 TTL \u8fc7\u671f\u6570\u636e\u7b49\uff0c\u8be5\u64cd\u4f5c\u9700\u8981\u624b\u52a8\u53d1\u8d77\u3002\u4f7f\u7528\u5982\u4e0b\u8bed\u53e5\u6267\u884c\u5168\u91cf Compaction \u64cd\u4f5c\uff1a Note \u5efa\u8bae\u5728\u4e1a\u52a1\u4f4e\u5cf0\u671f\uff08\u4f8b\u5982\u51cc\u6668\uff09\u6267\u884c\u8be5\u64cd\u4f5c\uff0c\u907f\u514d\u5927\u91cf\u5360\u7528\u786c\u76d8 IO \u5f71\u54cd\u4e1a\u52a1\u3002 nebula> USE <your_graph_space>; nebula> SUBMIT JOB COMPACT; \u4e0a\u8ff0\u547d\u4ee4\u4f1a\u8fd4\u56de\u4f5c\u4e1a\u7684 ID\uff0c\u7528\u6237\u53ef\u4ee5\u4f7f\u7528\u5982\u4e0b\u547d\u4ee4\u67e5\u770b Compaction \u72b6\u6001\uff1a nebula> SHOW JOB <job_id>;","title":"\u5168\u91cfCompaction"},{"location":"8.service-tuning/compaction/#_1","text":"\u4e3a\u4fdd\u8bc1NebulaGraph\u7684\u6027\u80fd\uff0c\u8bf7\u53c2\u8003\u5982\u4e0b\u64cd\u4f5c\u5efa\u8bae\uff1a \u6570\u636e\u5bfc\u5165\u5b8c\u6210\u540e\uff0c\u8bf7\u6267\u884c SUBMIT JOB COMPACT \u3002 \u4e1a\u52a1\u4f4e\u5cf0\u671f\uff08\u4f8b\u5982\u51cc\u6668\uff09\u6267\u884c SUBMIT JOB COMPACT \u3002 \u4e3a\u63a7\u5236 Compaction \u7684\u5199\u5165\u901f\u7387\uff0c\u8bf7\u5728\u914d\u7f6e\u6587\u4ef6 nebula-storaged.conf \u4e2d\u8bbe\u7f6e\u5982\u4e0b\u53c2\u6570\uff08\u6ce8\uff1a\u6b64\u53c2\u6570\u9650\u5236\u5168\u90e8\u5199\u5165\uff0c\u5305\u62ec\u6b63\u5e38\u5199\u5165\u548c Compaction\uff09\uff1a # \u5199\u5165\u901f\u5ea6\u9650\u5236\u4e3a 20MB/S\u3002 --rocksdb_rate_limit = 20 ( in MB/s )","title":"\u64cd\u4f5c\u5efa\u8bae"},{"location":"8.service-tuning/compaction/#faq","text":"","title":"FAQ"},{"location":"8.service-tuning/compaction/#compaction_3","text":"\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c /usr/local/nebula/data/storage/nebula/{1}/data/ \u76ee\u5f55\u4e0b\u7684\u6587\u4ef6\u540d\u4e3a LOG \u6587\u4ef6\uff0c\u6216\u8005\u7c7b\u4f3c LOG.old.1625797988509303 \uff0c\u627e\u5230\u5982\u4e0b\u7684\u90e8\u5206\u3002 ** Compaction Stats [default] ** Level Files Size Score Read(GB) Rn(GB) Rnp1(GB) Write(GB) Wnew(GB) Moved(GB) W-Amp Rd(MB/s) Wr(MB/s) Comp(sec) CompMergeCPU(sec) Comp(cnt) Avg(sec) KeyIn KeyDrop ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------- L0 2/0 2.46 KB 0.5 0.0 0.0 0.0 0.0 0.0 0.0 1.0 0.0 0.0 0.53 0.51 2 0.264 0 0 Sum 2/0 2.46 KB 0.0 0.0 0.0 0.0 0.0 0.0 0.0 1.0 0.0 0.0 0.53 0.51 2 0.264 0 0 Int 0/0 0.00 KB 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.00 0.00 0 0.000 0 0 \u5982\u679c\u5f53\u524d\u7684 L0 \u6587\u4ef6\u6570\u91cf\u8f83\u591a\uff0c\u5bf9\u8bfb\u6027\u80fd\u5f71\u54cd\u8f83\u5927\uff0c\u53ef\u4ee5\u89e6\u53d1 compaction\u3002","title":"Compaction \u76f8\u5173\u7684\u65e5\u5fd7\u5728\u54ea\uff1f"},{"location":"8.service-tuning/compaction/#compaction_4","text":"\u53ef\u4ee5\uff0c\u4f46\u662f\u6b64\u65f6\u7684\u786c\u76d8 IO \u4f1a\u5f88\u9ad8\uff0c\u53ef\u80fd\u4f1a\u5f71\u54cd\u6548\u7387\u3002","title":"\u53ef\u4ee5\u540c\u65f6\u5728\u591a\u4e2a\u56fe\u7a7a\u95f4\u6267\u884c\u5168\u91cfCompaction\u64cd\u4f5c\u5417\uff1f"},{"location":"8.service-tuning/compaction/#compaction_5","text":"\u5982\u679c\u5df2\u7ecf\u8bbe\u7f6e\u8bfb\u5199\u901f\u7387\u9650\u5236\uff0c\u4f8b\u5982 rocksdb_rate_limit \u9650\u5236\u4e3a 20MB/S \u65f6\uff0c\u7528\u6237\u53ef\u4ee5\u901a\u8fc7 \u786c\u76d8\u4f7f\u7528\u91cf/rocksdb_rate_limit \u9884\u4f30\u9700\u8981\u8017\u8d39\u7684\u65f6\u95f4\u3002 \u5982\u679c\u6ca1\u6709\u8bbe\u7f6e\u8bfb\u5199\u901f\u7387\u9650\u5236\uff0c\u6839\u636e\u7ecf\u9a8c\uff0c\u901f\u7387\u5927\u7ea6\u4e3a 50MB/S\u3002","title":"\u5168\u91cfCompaction\u64cd\u4f5c\u4f1a\u8017\u8d39\u591a\u957f\u65f6\u95f4\uff1f"},{"location":"8.service-tuning/compaction/#rocksdb_rate_limit","text":"\u4e0d\u53ef\u4ee5\u3002","title":"\u53ef\u4ee5\u52a8\u6001\u8c03\u6574rocksdb_rate_limit\u5417\uff1f"},{"location":"8.service-tuning/compaction/#compaction_6","text":"\u4e0d\u53ef\u4ee5\u505c\u6b62\uff0c\u5fc5\u987b\u7b49\u5f85\u64cd\u4f5c\u5b8c\u6210\u3002\u8fd9\u662f RocksDB \u7684\u9650\u5236\u3002","title":"\u5168\u91cfCompaction\u64cd\u4f5c\u5f00\u59cb\u540e\u53ef\u4ee5\u505c\u6b62\u5417\uff1f"},{"location":"8.service-tuning/enable_autofdo_for_nebulagraph/","text":"\u542f\u7528 AutoFDO \u00b6 AutoFDO \u53ef\u4ee5\u5bf9\u4f18\u5316\u8fc7\u7684\u7a0b\u5e8f\u8fdb\u884c\u6027\u80fd\u5206\u6790\uff0c\u5e76\u4f7f\u7528\u6027\u80fd\u4fe1\u606f\u6765\u6307\u5bfc\u7f16\u8bd1\u5668\u518d\u6b21\u4f18\u5316\u7a0b\u5e8f\u3002\u672c\u6587\u5c06\u5e2e\u52a9\u60a8\u4e3aNebulaGraph\u542f\u7528AutoFDO\u3002 \u5173\u4e8e AutoFDO \u7684\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u89c1 AutoFDO Wiki \u3002 \u51c6\u5907\u8d44\u6e90 \u00b6 \u5b89\u88c5\u4f9d\u8d56 \u00b6 \u5b89\u88c5 perf sudo apt-get update sudo apt-get install -y linux-tools-common \\ linux-tools-generic \\ linux-tools- ` uname -r ` \u5b89\u88c5 autofdo tool sudo apt-get update sudo apt-get install -y autofdo \u6216\u8005\u4f60\u53ef\u4ee5\u4ece \u6e90\u4ee3\u7801 \u7f16\u8bd1 autofdo tool \u3002 \u7f16\u8bd1NebulaGraph\u4e8c\u8fdb\u5236\u6587\u4ef6 \u00b6 \u5173\u4e8e\u5982\u4f55\u4ece\u6e90\u7801\u7f16\u8bd1NebulaGraph\uff0c\u8bf7\u53c2\u8003 \u4f7f\u7528\u6e90\u7801\u5b89\u88c5NebulaGraph \u3002 \u5728\u914d\u7f6e\u6b65\u9aa4\u4e2d\uff0c\u5c06 CMAKE_BUILD_TYPE=Release \u66ff\u6362\u4e3a CMAKE_BUILD_TYPE=RelWithDebInfo \uff1a $ cmake -DCMAKE_INSTALL_PREFIX = /usr/local/nebula -DENABLE_TESTING = OFF -DCMAKE_BUILD_TYPE = RelWithDebInfo .. \u51c6\u5907\u6d4b\u8bd5\u6570\u636e \u00b6 \u5728\u6d4b\u8bd5\u73af\u5883\u4e2d\uff0c\u6211\u4eec\u4f7f\u7528 NebulaGraph Bench \u6765\u51c6\u5907\u6d4b\u8bd5\u6570\u636e\uff0c\u5e76\u901a\u8fc7\u8fd0\u884c FindShortestPath \u3001 Go1Step \u3001 Go2Step \u3001 Go3Step \u3001 InsertPersonScenario \u8fd95\u4e2a\u573a\u666f\u811a\u672c\u6765\u6536\u96c6\u6027\u80fd\u6570\u636e\u3002 Note \u53ef\u4ee5\u5728\u751f\u4ea7\u73af\u5883\u4e2d\u4f7f\u7528 TopN \u67e5\u8be2\u6765\u6536\u96c6\u6027\u80fd\u6570\u636e\uff0c\u5728\u4f60\u7684\u73af\u5883\u4e2d\u53ef\u4ee5\u63d0\u9ad8\u66f4\u591a\u6027\u80fd\u3002 \u51c6\u5907\u6027\u80fd\u6570\u636e \u00b6 \u6536\u96c6 AutoFDO \u5de5\u5177\u7684\u6027\u80fd\u6570\u636e \u00b6 \u6d4b\u8bd5\u6570\u636e\u51c6\u5907\u5b8c\u6210\u540e\uff0c\u6536\u96c6\u4e0d\u540c\u573a\u666f\u7684\u6027\u80fd\u6570\u636e\u3002\u9996\u5148\u83b7\u53d6 storaged \u3001 graphd \u3001 metad \u7684 pid \u3002 $ nebula.service status all [ INFO ] nebula-metad: Running as 305422 , Listening on 9559 [ INFO ] nebula-graphd: Running as 305516 , Listening on 9669 [ INFO ] nebula-storaged: Running as 305707 , Listening on 9779 \u4e3a nebula-graphd \u548c nebula-storaged \u542f\u52a8 perf record \u3002 perf record -p 305516 ,305707 -b -e br_inst_retired.near_taken:pp -o ~/FindShortestPath.data Note \u56e0\u4e3a\u4e0e nebula-graphd \u548c nebula-storaged \u76f8\u6bd4\uff0c nebula-metad \u7684\u8d21\u732e\u7387\u5f88\u5c0f\u3002\u4e3a\u4e86\u51cf\u5c11\u5de5\u4f5c\u91cf\uff0c\u6211\u4eec\u6ca1\u6709\u6536\u96c6 nebula-metad \u7684\u6027\u80fd\u6570\u636e\u3002 \u542f\u52a8 FindShortestPath \u573a\u666f\u7684\u57fa\u51c6\u6d4b\u8bd5\u3002 cd NebulaGraph-Bench python3 run.py stress run -s benchmark -scenario find_path.FindShortestPath -a localhost:9669 --args = '-u 100 -i 100000' \u6d4b\u8bd5\u5b8c\u6210\u540e\uff0c\u6309 Ctrl + C \u7ed3\u675f perf record \u3002 \u91cd\u590d\u4e0a\u8ff0\u6b65\u9aa4\u4e3a Go1Step \u3001 Go2Step \u3001 Go3Step \u3001 InsertPersonScenario \u8fd94\u4e2a\u573a\u666f\u6536\u96c6\u6027\u80fd\u6570\u636e\u3002 \u521b\u5efa Gcov \u6587\u4ef6 \u00b6 create_gcov --binary = $NEBULA_HOME /bin/nebula-storaged \\ --profile = ~/FindShortestPath.data \\ --gcov = ~/FindShortestPath-storaged.gcov \\ -gcov_version = 1 create_gcov --binary = $NEBULA_HOME /bin/nebula-graphd \\ --profile = ~/FindShortestPath.data \\ --gcov = ~/FindShortestPath-graphd.gcov \\ -gcov_version = 1 \u6309\u7167\u4e0a\u9762 FindShortestPath \u7684\u4f8b\u5b50\uff0c\u4e3a Go1Step \u3001 Go2Step \u3001 Go3Step \u3001 InsertPersonScenario \u8fd94\u4e2a\u573a\u666f\u4e5f\u521b\u5efa Gcov \u6587\u4ef6\u3002 \u5408\u5e76\u6027\u80fd\u6570\u636e \u00b6 profile_merger ~/FindShortestPath-graphd.gcov \\ ~/FindShortestPath-storaged.gcov \\ ~/go1step-storaged.gcov \\ ~/go1step-graphd.gcov \\ ~/go2step-storaged.gcov \\ ~/go2step-graphd.gcov \\ ~/go3step-storaged.gcov \\ ~/go3step-master-graphd.gcov \\ ~/InsertPersonScenario-storaged.gcov \\ ~/InsertPersonScenario-graphd.gcov \u5408\u5e76\u540e\u7684\u914d\u7f6e\u6587\u4ef6\u540d\u79f0\u4e3a fbdata.afdo \u3002 \u4f7f\u7528\u5408\u5e76\u7684\u6027\u80fd\u6570\u636e\u6587\u4ef6\u91cd\u65b0\u7f16\u8bd1NebulaGraph\u4e8c\u8fdb\u5236\u6587\u4ef6 \u00b6 \u4f7f\u7528\u7f16\u8bd1\u9009\u9879 -fauto-profile \u91cd\u65b0\u7f16\u8bd1NebulaGraph\u4e8c\u8fdb\u5236\u6587\u4ef6\u3002 diff --git a/cmake/nebula/GeneralCompilerConfig.cmake b/cmake/nebula/GeneralCompilerConfig.cmake @@ -20,6 +20,8 @@ add_compile_options(-Wshadow) add_compile_options(-Wnon-virtual-dtor) add_compile_options(-Woverloaded-virtual) add_compile_options(-Wignored-qualifiers) +add_compile_options(-fauto-profile=~/fbdata.afdo) Note \u5f53\u4f60\u4f7f\u7528\u591a\u4e2a fbdata.afdo \u591a\u6b21\u7f16\u8bd1\u65f6\uff0c\u8bf7\u5728\u91cd\u65b0\u7f16\u8bd1\u4e4b\u524d\u6267\u884c make clean \u64cd\u4f5c\uff0c\u56e0\u4e3a\u53ea\u662f\u4fee\u6539 fbdata.afdo \u4e0d\u4f1a\u89e6\u53d1\u91cd\u65b0\u7f16\u8bd1\u3002 \u6027\u80fd\u6d4b\u8bd5\u7ed3\u679c \u00b6 \u8f6f\u786c\u4ef6\u73af\u5883 \u00b6 \u7c7b\u578b \u73af\u5883 CPU Processor# 2 Sockets 2 NUMA 2 CPU Type Intel(R) Xeon(R) Platinum 8380 CPU @ 2.30GHz Cores per Processor 40C80T Cache L1 data: 48KB L1 i: 32KB L2: 1.25MB per physical core L3: shared 60MB per processor Memory Micron DDR4 3200MT/s 16GB 16Micron DDR4 3200MT/s 16GB 16 SSD Disk INTEL SSDPE2KE016T8 SSD R/W Sequential 3200 MB/s (read) / 2100 MB/s(write) Nebula Version master with commit id 51d84a4ed7d2a032a337e3b996c927e3bc5d1415 Kernel 4.18.0-408.el8.x86_64 \u6d4b\u8bd5\u7ed3\u679c \u00b6 \u573a\u666f Average Latency(LiB) Default Binary Optimized Binary with AutoFDO P95 Latency (LiB) Default Binary Optimized Binary with AutoFDO FindShortestPath 1 8072.52 7260.10 1 22102.00 19108.00 2 8034.32 7218.59 2 22060.85 19006.00 3 8079.27 7257.24 3 22147.00 19053.00 4 8087.66 7221.39 4 22143.00 19050.00 5 8044.77 7239.85 5 22181.00 19055.00 STDDEVP 20.57 17.34 STDDEVP 41.41 32.36 Mean 8063.71 7239.43 Mean 22126.77 19054.40 STDDEVP/Mean 0.26% 0.24% STDDEVP/Mean 0.19% 0.17% Opt/Default 100.00% 10.22% Opt/Default 100.00% 13.89% Go1Step 1 422.53 418.37 1 838.00 850.00 2 432.37 402.44 2 866.00 815.00 3 437.45 407.98 3 874.00 836.00 4 429.16 408.38 4 858.00 838.00 5 446.38 411.32 5 901.00 837.00 STDDEVP 8.02 5.20 STDDEVP 20.63 11.30 Mean 433.58 409.70 Mean 867.40 835.20 STDDEVP/Mean 1.85% 1.27% STDDEVP/Mean 2.38% 1.35% Opt/Default 100.00% 5.51% Opt/Default 100.00% 3.71% Go2Step 1 2989.93 2824.29 1 10202.00 9656.95 2 2957.22 2834.55 2 10129.00 9632.40 3 2962.74 2818.62 3 10168.40 9624.70 4 2992.39 2817.27 4 10285.10 9647.50 5 2934.85 2834.91 5 10025.00 9699.65 STDDEVP 21.53 7.57 STDDEVP 85.62 26.25 Mean 2967.43 2825.93 Mean 10161.90 9652.24 STDDEVP/Mean 0.73% 0.27% STDDEVP/Mean 0.84% 0.27% Opt/Default 100.00% 4.77% Opt/Default 100.00% 5.02% Go3Step 1 93551.97 89406.96 1 371359.55 345433.50 2 92418.43 89977.25 2 368868.00 352375.20 3 92587.67 90339.25 3 365390.15 356198.55 4 93371.64 92458.95 4 373578.15 365177.75 5 94046.05 89943.44 5 373392.25 352576.00 STDDEVP 609.07 1059.54 STDDEVP 3077.38 6437.52 Mean 93195.15 90425.17 Mean 370517.62 354352.20 STDDEVP/Mean 0.65% 1.17% STDDEVP/Mean 0.83% 1.82% Opt/Default 100.00% 2.97% Opt/Default 100.00% 4.36% InsertPerson 1 2022.86 1937.36 1 2689.00 2633.45 2 1966.05 1935.41 2 2620.45 2555.00 3 1985.25 1953.58 3 2546.00 2593.00 4 2026.73 1887.28 4 2564.00 2394.00 5 2007.55 1964.41 5 2676.00 2581.00 STDDEVP 23.02 26.42 STDDEVP 57.45 82.62 Mean 2001.69 1935.61 Mean 2619.09 2551.29 STDDEVP/Mean 1.15% 1.37% STDDEVP/Mean 2.19% 3.24% Opt/Default 100.00% 3.30% Opt/Default 100.00% 2.59%","title":"\u542f\u7528 AutoFDO"},{"location":"8.service-tuning/enable_autofdo_for_nebulagraph/#autofdo","text":"AutoFDO \u53ef\u4ee5\u5bf9\u4f18\u5316\u8fc7\u7684\u7a0b\u5e8f\u8fdb\u884c\u6027\u80fd\u5206\u6790\uff0c\u5e76\u4f7f\u7528\u6027\u80fd\u4fe1\u606f\u6765\u6307\u5bfc\u7f16\u8bd1\u5668\u518d\u6b21\u4f18\u5316\u7a0b\u5e8f\u3002\u672c\u6587\u5c06\u5e2e\u52a9\u60a8\u4e3aNebulaGraph\u542f\u7528AutoFDO\u3002 \u5173\u4e8e AutoFDO \u7684\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u89c1 AutoFDO Wiki \u3002","title":"\u542f\u7528 AutoFDO"},{"location":"8.service-tuning/enable_autofdo_for_nebulagraph/#_1","text":"","title":"\u51c6\u5907\u8d44\u6e90"},{"location":"8.service-tuning/enable_autofdo_for_nebulagraph/#_2","text":"\u5b89\u88c5 perf sudo apt-get update sudo apt-get install -y linux-tools-common \\ linux-tools-generic \\ linux-tools- ` uname -r ` \u5b89\u88c5 autofdo tool sudo apt-get update sudo apt-get install -y autofdo \u6216\u8005\u4f60\u53ef\u4ee5\u4ece \u6e90\u4ee3\u7801 \u7f16\u8bd1 autofdo tool \u3002","title":"\u5b89\u88c5\u4f9d\u8d56"},{"location":"8.service-tuning/enable_autofdo_for_nebulagraph/#nebulagraph","text":"\u5173\u4e8e\u5982\u4f55\u4ece\u6e90\u7801\u7f16\u8bd1NebulaGraph\uff0c\u8bf7\u53c2\u8003 \u4f7f\u7528\u6e90\u7801\u5b89\u88c5NebulaGraph \u3002 \u5728\u914d\u7f6e\u6b65\u9aa4\u4e2d\uff0c\u5c06 CMAKE_BUILD_TYPE=Release \u66ff\u6362\u4e3a CMAKE_BUILD_TYPE=RelWithDebInfo \uff1a $ cmake -DCMAKE_INSTALL_PREFIX = /usr/local/nebula -DENABLE_TESTING = OFF -DCMAKE_BUILD_TYPE = RelWithDebInfo ..","title":"\u7f16\u8bd1NebulaGraph\u4e8c\u8fdb\u5236\u6587\u4ef6"},{"location":"8.service-tuning/enable_autofdo_for_nebulagraph/#_3","text":"\u5728\u6d4b\u8bd5\u73af\u5883\u4e2d\uff0c\u6211\u4eec\u4f7f\u7528 NebulaGraph Bench \u6765\u51c6\u5907\u6d4b\u8bd5\u6570\u636e\uff0c\u5e76\u901a\u8fc7\u8fd0\u884c FindShortestPath \u3001 Go1Step \u3001 Go2Step \u3001 Go3Step \u3001 InsertPersonScenario \u8fd95\u4e2a\u573a\u666f\u811a\u672c\u6765\u6536\u96c6\u6027\u80fd\u6570\u636e\u3002 Note \u53ef\u4ee5\u5728\u751f\u4ea7\u73af\u5883\u4e2d\u4f7f\u7528 TopN \u67e5\u8be2\u6765\u6536\u96c6\u6027\u80fd\u6570\u636e\uff0c\u5728\u4f60\u7684\u73af\u5883\u4e2d\u53ef\u4ee5\u63d0\u9ad8\u66f4\u591a\u6027\u80fd\u3002","title":"\u51c6\u5907\u6d4b\u8bd5\u6570\u636e"},{"location":"8.service-tuning/enable_autofdo_for_nebulagraph/#_4","text":"","title":"\u51c6\u5907\u6027\u80fd\u6570\u636e"},{"location":"8.service-tuning/enable_autofdo_for_nebulagraph/#autofdo_1","text":"\u6d4b\u8bd5\u6570\u636e\u51c6\u5907\u5b8c\u6210\u540e\uff0c\u6536\u96c6\u4e0d\u540c\u573a\u666f\u7684\u6027\u80fd\u6570\u636e\u3002\u9996\u5148\u83b7\u53d6 storaged \u3001 graphd \u3001 metad \u7684 pid \u3002 $ nebula.service status all [ INFO ] nebula-metad: Running as 305422 , Listening on 9559 [ INFO ] nebula-graphd: Running as 305516 , Listening on 9669 [ INFO ] nebula-storaged: Running as 305707 , Listening on 9779 \u4e3a nebula-graphd \u548c nebula-storaged \u542f\u52a8 perf record \u3002 perf record -p 305516 ,305707 -b -e br_inst_retired.near_taken:pp -o ~/FindShortestPath.data Note \u56e0\u4e3a\u4e0e nebula-graphd \u548c nebula-storaged \u76f8\u6bd4\uff0c nebula-metad \u7684\u8d21\u732e\u7387\u5f88\u5c0f\u3002\u4e3a\u4e86\u51cf\u5c11\u5de5\u4f5c\u91cf\uff0c\u6211\u4eec\u6ca1\u6709\u6536\u96c6 nebula-metad \u7684\u6027\u80fd\u6570\u636e\u3002 \u542f\u52a8 FindShortestPath \u573a\u666f\u7684\u57fa\u51c6\u6d4b\u8bd5\u3002 cd NebulaGraph-Bench python3 run.py stress run -s benchmark -scenario find_path.FindShortestPath -a localhost:9669 --args = '-u 100 -i 100000' \u6d4b\u8bd5\u5b8c\u6210\u540e\uff0c\u6309 Ctrl + C \u7ed3\u675f perf record \u3002 \u91cd\u590d\u4e0a\u8ff0\u6b65\u9aa4\u4e3a Go1Step \u3001 Go2Step \u3001 Go3Step \u3001 InsertPersonScenario \u8fd94\u4e2a\u573a\u666f\u6536\u96c6\u6027\u80fd\u6570\u636e\u3002","title":"\u6536\u96c6 AutoFDO \u5de5\u5177\u7684\u6027\u80fd\u6570\u636e"},{"location":"8.service-tuning/enable_autofdo_for_nebulagraph/#gcov","text":"create_gcov --binary = $NEBULA_HOME /bin/nebula-storaged \\ --profile = ~/FindShortestPath.data \\ --gcov = ~/FindShortestPath-storaged.gcov \\ -gcov_version = 1 create_gcov --binary = $NEBULA_HOME /bin/nebula-graphd \\ --profile = ~/FindShortestPath.data \\ --gcov = ~/FindShortestPath-graphd.gcov \\ -gcov_version = 1 \u6309\u7167\u4e0a\u9762 FindShortestPath \u7684\u4f8b\u5b50\uff0c\u4e3a Go1Step \u3001 Go2Step \u3001 Go3Step \u3001 InsertPersonScenario \u8fd94\u4e2a\u573a\u666f\u4e5f\u521b\u5efa Gcov \u6587\u4ef6\u3002","title":"\u521b\u5efa Gcov \u6587\u4ef6"},{"location":"8.service-tuning/enable_autofdo_for_nebulagraph/#_5","text":"profile_merger ~/FindShortestPath-graphd.gcov \\ ~/FindShortestPath-storaged.gcov \\ ~/go1step-storaged.gcov \\ ~/go1step-graphd.gcov \\ ~/go2step-storaged.gcov \\ ~/go2step-graphd.gcov \\ ~/go3step-storaged.gcov \\ ~/go3step-master-graphd.gcov \\ ~/InsertPersonScenario-storaged.gcov \\ ~/InsertPersonScenario-graphd.gcov \u5408\u5e76\u540e\u7684\u914d\u7f6e\u6587\u4ef6\u540d\u79f0\u4e3a fbdata.afdo \u3002","title":"\u5408\u5e76\u6027\u80fd\u6570\u636e"},{"location":"8.service-tuning/enable_autofdo_for_nebulagraph/#nebulagraph_1","text":"\u4f7f\u7528\u7f16\u8bd1\u9009\u9879 -fauto-profile \u91cd\u65b0\u7f16\u8bd1NebulaGraph\u4e8c\u8fdb\u5236\u6587\u4ef6\u3002 diff --git a/cmake/nebula/GeneralCompilerConfig.cmake b/cmake/nebula/GeneralCompilerConfig.cmake @@ -20,6 +20,8 @@ add_compile_options(-Wshadow) add_compile_options(-Wnon-virtual-dtor) add_compile_options(-Woverloaded-virtual) add_compile_options(-Wignored-qualifiers) +add_compile_options(-fauto-profile=~/fbdata.afdo) Note \u5f53\u4f60\u4f7f\u7528\u591a\u4e2a fbdata.afdo \u591a\u6b21\u7f16\u8bd1\u65f6\uff0c\u8bf7\u5728\u91cd\u65b0\u7f16\u8bd1\u4e4b\u524d\u6267\u884c make clean \u64cd\u4f5c\uff0c\u56e0\u4e3a\u53ea\u662f\u4fee\u6539 fbdata.afdo \u4e0d\u4f1a\u89e6\u53d1\u91cd\u65b0\u7f16\u8bd1\u3002","title":"\u4f7f\u7528\u5408\u5e76\u7684\u6027\u80fd\u6570\u636e\u6587\u4ef6\u91cd\u65b0\u7f16\u8bd1NebulaGraph\u4e8c\u8fdb\u5236\u6587\u4ef6"},{"location":"8.service-tuning/enable_autofdo_for_nebulagraph/#_6","text":"","title":"\u6027\u80fd\u6d4b\u8bd5\u7ed3\u679c"},{"location":"8.service-tuning/enable_autofdo_for_nebulagraph/#_7","text":"\u7c7b\u578b \u73af\u5883 CPU Processor# 2 Sockets 2 NUMA 2 CPU Type Intel(R) Xeon(R) Platinum 8380 CPU @ 2.30GHz Cores per Processor 40C80T Cache L1 data: 48KB L1 i: 32KB L2: 1.25MB per physical core L3: shared 60MB per processor Memory Micron DDR4 3200MT/s 16GB 16Micron DDR4 3200MT/s 16GB 16 SSD Disk INTEL SSDPE2KE016T8 SSD R/W Sequential 3200 MB/s (read) / 2100 MB/s(write) Nebula Version master with commit id 51d84a4ed7d2a032a337e3b996c927e3bc5d1415 Kernel 4.18.0-408.el8.x86_64","title":"\u8f6f\u786c\u4ef6\u73af\u5883"},{"location":"8.service-tuning/enable_autofdo_for_nebulagraph/#_8","text":"\u573a\u666f Average Latency(LiB) Default Binary Optimized Binary with AutoFDO P95 Latency (LiB) Default Binary Optimized Binary with AutoFDO FindShortestPath 1 8072.52 7260.10 1 22102.00 19108.00 2 8034.32 7218.59 2 22060.85 19006.00 3 8079.27 7257.24 3 22147.00 19053.00 4 8087.66 7221.39 4 22143.00 19050.00 5 8044.77 7239.85 5 22181.00 19055.00 STDDEVP 20.57 17.34 STDDEVP 41.41 32.36 Mean 8063.71 7239.43 Mean 22126.77 19054.40 STDDEVP/Mean 0.26% 0.24% STDDEVP/Mean 0.19% 0.17% Opt/Default 100.00% 10.22% Opt/Default 100.00% 13.89% Go1Step 1 422.53 418.37 1 838.00 850.00 2 432.37 402.44 2 866.00 815.00 3 437.45 407.98 3 874.00 836.00 4 429.16 408.38 4 858.00 838.00 5 446.38 411.32 5 901.00 837.00 STDDEVP 8.02 5.20 STDDEVP 20.63 11.30 Mean 433.58 409.70 Mean 867.40 835.20 STDDEVP/Mean 1.85% 1.27% STDDEVP/Mean 2.38% 1.35% Opt/Default 100.00% 5.51% Opt/Default 100.00% 3.71% Go2Step 1 2989.93 2824.29 1 10202.00 9656.95 2 2957.22 2834.55 2 10129.00 9632.40 3 2962.74 2818.62 3 10168.40 9624.70 4 2992.39 2817.27 4 10285.10 9647.50 5 2934.85 2834.91 5 10025.00 9699.65 STDDEVP 21.53 7.57 STDDEVP 85.62 26.25 Mean 2967.43 2825.93 Mean 10161.90 9652.24 STDDEVP/Mean 0.73% 0.27% STDDEVP/Mean 0.84% 0.27% Opt/Default 100.00% 4.77% Opt/Default 100.00% 5.02% Go3Step 1 93551.97 89406.96 1 371359.55 345433.50 2 92418.43 89977.25 2 368868.00 352375.20 3 92587.67 90339.25 3 365390.15 356198.55 4 93371.64 92458.95 4 373578.15 365177.75 5 94046.05 89943.44 5 373392.25 352576.00 STDDEVP 609.07 1059.54 STDDEVP 3077.38 6437.52 Mean 93195.15 90425.17 Mean 370517.62 354352.20 STDDEVP/Mean 0.65% 1.17% STDDEVP/Mean 0.83% 1.82% Opt/Default 100.00% 2.97% Opt/Default 100.00% 4.36% InsertPerson 1 2022.86 1937.36 1 2689.00 2633.45 2 1966.05 1935.41 2 2620.45 2555.00 3 1985.25 1953.58 3 2546.00 2593.00 4 2026.73 1887.28 4 2564.00 2394.00 5 2007.55 1964.41 5 2676.00 2581.00 STDDEVP 23.02 26.42 STDDEVP 57.45 82.62 Mean 2001.69 1935.61 Mean 2619.09 2551.29 STDDEVP/Mean 1.15% 1.37% STDDEVP/Mean 2.19% 3.24% Opt/Default 100.00% 3.30% Opt/Default 100.00% 2.59%","title":"\u6d4b\u8bd5\u7ed3\u679c"},{"location":"8.service-tuning/load-balance/","text":"Storage \u8d1f\u8f7d\u5747\u8861 \u00b6 \u7528\u6237\u53ef\u4ee5\u4f7f\u7528 SUBMIT JOB BALANCE \u8bed\u53e5\u5e73\u8861 Raft leader \u7684\u5206\u5e03\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1 SUBMIT JOB BALANCE \u3002 Danger SUBMIT JOB BALANCE \u547d\u4ee4\u901a\u8fc7\u521b\u5efa\u548c\u6267\u884c\u4e00\u7ec4\u5b50\u4efb\u52a1\u6765\u8fc1\u79fb\u6570\u636e\u548c\u5747\u8861\u5206\u7247\u5206\u5e03\uff0c \u7981\u6b62 \u505c\u6b62\u96c6\u7fa4\u4e2d\u7684\u4efb\u4f55\u673a\u5668\u6216\u6539\u53d8\u673a\u5668\u7684 IP \u5730\u5740\uff0c\u76f4\u5230\u6240\u6709\u5b50\u4efb\u52a1\u5b8c\u6210\uff0c\u5426\u5219\u540e\u7eed\u5b50\u4efb\u52a1\u4f1a\u5931\u8d25\u3002 \u5747\u8861 leader \u5206\u5e03 \u00b6 \u7528\u6237\u53ef\u4ee5\u4f7f\u7528\u547d\u4ee4 SUBMIT JOB BALANCE LEADER \u5747\u8861\u5206\u5e03\u6240\u6709\u56fe\u7a7a\u95f4\u4e2d\u7684 Leader \u5206\u7247\u526f\u672c\u3002 \u793a\u4f8b \u00b6 nebula> SUBMIT JOB BALANCE LEADER; \u7528\u6237\u53ef\u4ee5\u6267\u884c SHOW HOSTS \u68c0\u67e5\u7ed3\u679c\u3002 nebula> SHOW HOSTS; +------------------+------+----------+--------------+-----------------------------------+------------------------+---------+ | Host | Port | Status | Leader count | Leader distribution | Partition distribution | Version | +------------------+------+----------+--------------+-----------------------------------+------------------------+---------+ | \"192.168.10.100\" | 9779 | \"ONLINE\" | 4 | \"basketballplayer:3\" | \"basketballplayer:8\" | \"3.6.0\" | | \"192.168.10.101\" | 9779 | \"ONLINE\" | 8 | \"basketballplayer:3\" | \"basketballplayer:8\" | \"3.6.0\" | | \"192.168.10.102\" | 9779 | \"ONLINE\" | 3 | \"basketballplayer:3\" | \"basketballplayer:8\" | \"3.6.0\" | | \"192.168.10.103\" | 9779 | \"ONLINE\" | 0 | \"basketballplayer:2\" | \"basketballplayer:7\" | \"3.6.0\" | | \"192.168.10.104\" | 9779 | \"ONLINE\" | 0 | \"basketballplayer:2\" | \"basketballplayer:7\" | \"3.6.0\" | | \"192.168.10.105\" | 9779 | \"ONLINE\" | 0 | \"basketballplayer:2\" | \"basketballplayer:7\" | \"3.6.0\" | +------------------+------+-----------+----------+--------------+-----------------------------------+------------------------+---------+ Caution \u5728NebulaGraph 3.6.0 \u4e2d\uff0cLeader \u5206\u7247\u526f\u672c\u5207\u6362\u671f\u95f4\uff0cLeader \u5206\u7247\u526f\u672c\u4f1a\u88ab\u6682\u65f6\u7981\u6b62\u5199\u5165\u76f4\u5230\u5207\u6362\u5b8c\u6210\u3002\u5982\u679c\u5728 Leader \u5206\u7247\u526f\u672c\u5207\u6362\u671f\u95f4\uff0c\u6709\u5927\u91cf\u7684\u5199\u5165\u8bf7\u6c42\uff0c\u5c06\u4f1a\u5bfc\u81f4\u8bf7\u6c42\u9519\u8bef\uff08Storage Error E_RPC_FAILURE \uff09\uff0c\u9519\u8bef\u5904\u7406\u65b9\u6cd5\u89c1 FAQ \u3002 \u7528\u6237\u53ef\u4ee5\u5728 Storage \u914d\u7f6e\u6587\u4ef6\u4e2d\u8bbe\u7f6e raft_heartbeat_interval_secs \u7684\u503c\u6765\u63a7\u5236 Leader \u526f\u672c\u5207\u6362\u7684\u8d85\u65f6\u65f6\u95f4\u3002\u6709\u5173\u914d\u7f6e\u6587\u4ef6\u7684\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u89c1 Storage \u914d\u7f6e\u6587\u4ef6 \u3002","title":"Storage \u8d1f\u8f7d\u5747\u8861"},{"location":"8.service-tuning/load-balance/#storage","text":"\u7528\u6237\u53ef\u4ee5\u4f7f\u7528 SUBMIT JOB BALANCE \u8bed\u53e5\u5e73\u8861 Raft leader \u7684\u5206\u5e03\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1 SUBMIT JOB BALANCE \u3002 Danger SUBMIT JOB BALANCE \u547d\u4ee4\u901a\u8fc7\u521b\u5efa\u548c\u6267\u884c\u4e00\u7ec4\u5b50\u4efb\u52a1\u6765\u8fc1\u79fb\u6570\u636e\u548c\u5747\u8861\u5206\u7247\u5206\u5e03\uff0c \u7981\u6b62 \u505c\u6b62\u96c6\u7fa4\u4e2d\u7684\u4efb\u4f55\u673a\u5668\u6216\u6539\u53d8\u673a\u5668\u7684 IP \u5730\u5740\uff0c\u76f4\u5230\u6240\u6709\u5b50\u4efb\u52a1\u5b8c\u6210\uff0c\u5426\u5219\u540e\u7eed\u5b50\u4efb\u52a1\u4f1a\u5931\u8d25\u3002","title":"Storage \u8d1f\u8f7d\u5747\u8861"},{"location":"8.service-tuning/load-balance/#leader","text":"\u7528\u6237\u53ef\u4ee5\u4f7f\u7528\u547d\u4ee4 SUBMIT JOB BALANCE LEADER \u5747\u8861\u5206\u5e03\u6240\u6709\u56fe\u7a7a\u95f4\u4e2d\u7684 Leader \u5206\u7247\u526f\u672c\u3002","title":"\u5747\u8861 leader \u5206\u5e03"},{"location":"8.service-tuning/load-balance/#_1","text":"nebula> SUBMIT JOB BALANCE LEADER; \u7528\u6237\u53ef\u4ee5\u6267\u884c SHOW HOSTS \u68c0\u67e5\u7ed3\u679c\u3002 nebula> SHOW HOSTS; +------------------+------+----------+--------------+-----------------------------------+------------------------+---------+ | Host | Port | Status | Leader count | Leader distribution | Partition distribution | Version | +------------------+------+----------+--------------+-----------------------------------+------------------------+---------+ | \"192.168.10.100\" | 9779 | \"ONLINE\" | 4 | \"basketballplayer:3\" | \"basketballplayer:8\" | \"3.6.0\" | | \"192.168.10.101\" | 9779 | \"ONLINE\" | 8 | \"basketballplayer:3\" | \"basketballplayer:8\" | \"3.6.0\" | | \"192.168.10.102\" | 9779 | \"ONLINE\" | 3 | \"basketballplayer:3\" | \"basketballplayer:8\" | \"3.6.0\" | | \"192.168.10.103\" | 9779 | \"ONLINE\" | 0 | \"basketballplayer:2\" | \"basketballplayer:7\" | \"3.6.0\" | | \"192.168.10.104\" | 9779 | \"ONLINE\" | 0 | \"basketballplayer:2\" | \"basketballplayer:7\" | \"3.6.0\" | | \"192.168.10.105\" | 9779 | \"ONLINE\" | 0 | \"basketballplayer:2\" | \"basketballplayer:7\" | \"3.6.0\" | +------------------+------+-----------+----------+--------------+-----------------------------------+------------------------+---------+ Caution \u5728NebulaGraph 3.6.0 \u4e2d\uff0cLeader \u5206\u7247\u526f\u672c\u5207\u6362\u671f\u95f4\uff0cLeader \u5206\u7247\u526f\u672c\u4f1a\u88ab\u6682\u65f6\u7981\u6b62\u5199\u5165\u76f4\u5230\u5207\u6362\u5b8c\u6210\u3002\u5982\u679c\u5728 Leader \u5206\u7247\u526f\u672c\u5207\u6362\u671f\u95f4\uff0c\u6709\u5927\u91cf\u7684\u5199\u5165\u8bf7\u6c42\uff0c\u5c06\u4f1a\u5bfc\u81f4\u8bf7\u6c42\u9519\u8bef\uff08Storage Error E_RPC_FAILURE \uff09\uff0c\u9519\u8bef\u5904\u7406\u65b9\u6cd5\u89c1 FAQ \u3002 \u7528\u6237\u53ef\u4ee5\u5728 Storage \u914d\u7f6e\u6587\u4ef6\u4e2d\u8bbe\u7f6e raft_heartbeat_interval_secs \u7684\u503c\u6765\u63a7\u5236 Leader \u526f\u672c\u5207\u6362\u7684\u8d85\u65f6\u65f6\u95f4\u3002\u6709\u5173\u914d\u7f6e\u6587\u4ef6\u7684\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u89c1 Storage \u914d\u7f6e\u6587\u4ef6 \u3002","title":"\u793a\u4f8b"},{"location":"8.service-tuning/practice/","text":"\u5b9e\u8df5\u6848\u4f8b \u00b6 NebulaGraph\u5728\u5404\u884c\u5404\u4e1a\u90fd\u6709\u5e94\u7528\uff0c\u672c\u6587\u4ecb\u7ecd\u90e8\u5206\u5b9e\u8df5\u6848\u4f8b\u3002\u66f4\u591a\u5b9e\u8df5\u5206\u4eab\u5185\u5bb9\u8bf7\u53c2\u89c1 \u535a\u5ba2 \u3002 \u4e1a\u52a1\u573a\u666f \u00b6 \u6848\u4f8b \u7ecf\u9a8c \u4e09\u65b9\u8bc4\u6d4b \u5185\u6838 \u00b6 MATCH \u4e2d\u53d8\u957f Pattern \u7684\u5b9e\u73b0 \u5982\u4f55\u5411NebulaGraph\u589e\u52a0\u4e00\u4e2a\u6d4b\u8bd5\u7528\u4f8b \u57fa\u4e8e BDD \u7406\u8bba\u7684NebulaGraph\u96c6\u6210\u6d4b\u8bd5\u6846\u67b6\u91cd\u6784\uff08\u4e0a\uff09 \u57fa\u4e8e BDD \u7406\u8bba\u7684NebulaGraph\u96c6\u6210\u6d4b\u8bd5\u6846\u67b6\u91cd\u6784\uff08\u4e0b\uff09 \u89e3\u6790NebulaGraph\u5b50\u56fe\u8bbe\u8ba1\u53ca\u5b9e\u8df5 \u57fa\u4e8e\u5168\u6587\u641c\u7d22\u5f15\u64ce\u7684\u6587\u672c\u641c\u7d22 \u5b9e\u64cd | LDBC \u6570\u636e\u5bfc\u5165\u53ca nGQL \u5b9e\u8df5 \u5468\u8fb9\u5de5\u5177 \u00b6 \u57fa\u4e8eNebulaGraphImporter \u6279\u91cf\u5bfc\u5165\u5de5\u5177\u6027\u80fd\u9a8c\u8bc1\u65b9\u6848\u603b\u7ed3 \u8be6\u89e3NebulaGraph 3.0 \u6027\u80fd\u62a5\u544a NebulaGraph \u652f\u6301 JDBC \u534f\u8bae Nebula\u00b7\u5229\u5668 | Norm \u77e5\u4e4e\u5f00\u6e90\u7684 ORM \u5de5\u5177 \u57fa\u4e8eNebulaGraph\u7684 Betweenness Centrality \u7b97\u6cd5 \u65e0\u4f9d\u8d56\u5355\u673a\u5c1d\u9c9c NebulaGraph Exchange \u7684 SST \u5bfc\u5165 logrotate \u5728NebulaGraph\u7684\u65e5\u5fd7\u6eda\u52a8\u5b9e\u8df5 ## \u89c6\u9891 Nebula \u9ad8\u6027\u80fd\u56fe schema \u8bbe\u8ba1 by \u9752\u85e4\u4e91\u5b89\u5168 \uff0851 \u5206 30 \u79d2\uff09 \u540c\u82b1\u987a\u56fe\u6570\u636e\u5e93\u9009\u578b\uff1a\u6d88\u606f\u9762\u3001\u57fa\u672c\u9762\u3001\u6280\u672f\u9762 \uff0821 \u5206 53 \u79d2\uff09 Nebula \u5728 Akulaku \u667a\u80fd\u98ce\u63a7\u7684\u5b9e\u8df5 \uff0840 \u5206 03 \u79d2\uff09 \u4ece\u96f6\u5230\u4e00\uff1a\u5982\u4f55\u4f7f\u7528NebulaGraph\u6784\u5efa\u4e00\u4e2a\u4f01\u4e1a\u80a1\u6743\u56fe\u8c31\u7cfb\u7edf \uff0809 \u5206 34 \u79d2\uff09 \u7f8e\u56e2\u56fe\u6570\u636e\u5e93\u5e73\u53f0\u5efa\u8bbe\u53ca\u4e1a\u52a1\u5b9e\u8df5\uff08\u4e0a\uff09 \uff0814 \u5206 36 \u79d2\uff09 \u7f8e\u56e2\u56fe\u6570\u636e\u5e93\u5e73\u53f0\u5efa\u8bbe\u53ca\u4e1a\u52a1\u5b9e\u8df5\uff08\u4e0b\uff09 \uff0821 \u5206 33 \u79d2\uff09 \u4fe1\u606f\u56fe\u8c31\u5728\u643a\u7a0b\u9152\u5e97\u7684\u5e94\u7528 \uff0839 \u5206 06 \u79d2\uff09 OPPO \u56fe\u5e73\u53f0\u5efa\u8bbe \uff0843 \u5206 09 \u79d2\uff09 NebulaGraph\u5728\u7f51\u6613\u6e38\u620f\u4e1a\u52a1\u4e2d\u7684\u5b9e\u8df5 \uff0847 \u5206 40 \u79d2\uff09 BIGO \u6570\u636e\u7ba1\u7406\u4e0e\u5e94\u7528\u5b9e\u8df5 \uff0853 \u5206 47 \u79d2\uff09 NebulaGraph\u4fdd\u9669\u53cd\u6b3a\u8bc8\u89e3\u51b3\u65b9\u6848 Demo \u5206\u4eab \uff0839 \u5206 54 \u79d2\uff09 NebulaGraph\u4eba\u9645\u5173\u7cfb\u67e5\u8be2\u4e4b\u75ab\u60c5\u9632\u63a7\u573a\u666f Demo \u5206\u4eab \uff081 \u65f6 01 \u5206 55 \u79d2\uff09 NebulaGraph\u5728\u643a\u7a0b\u91d1\u878d\u98ce\u63a7\u7684\u5e94\u7528 \uff0829 \u5206 06 \u79d2\uff09","title":"\u5b9e\u8df5\u6848\u4f8b"},{"location":"8.service-tuning/practice/#_1","text":"NebulaGraph\u5728\u5404\u884c\u5404\u4e1a\u90fd\u6709\u5e94\u7528\uff0c\u672c\u6587\u4ecb\u7ecd\u90e8\u5206\u5b9e\u8df5\u6848\u4f8b\u3002\u66f4\u591a\u5b9e\u8df5\u5206\u4eab\u5185\u5bb9\u8bf7\u53c2\u89c1 \u535a\u5ba2 \u3002","title":"\u5b9e\u8df5\u6848\u4f8b"},{"location":"8.service-tuning/practice/#_2","text":"\u6848\u4f8b \u7ecf\u9a8c \u4e09\u65b9\u8bc4\u6d4b","title":"\u4e1a\u52a1\u573a\u666f"},{"location":"8.service-tuning/practice/#_3","text":"MATCH \u4e2d\u53d8\u957f Pattern \u7684\u5b9e\u73b0 \u5982\u4f55\u5411NebulaGraph\u589e\u52a0\u4e00\u4e2a\u6d4b\u8bd5\u7528\u4f8b \u57fa\u4e8e BDD \u7406\u8bba\u7684NebulaGraph\u96c6\u6210\u6d4b\u8bd5\u6846\u67b6\u91cd\u6784\uff08\u4e0a\uff09 \u57fa\u4e8e BDD \u7406\u8bba\u7684NebulaGraph\u96c6\u6210\u6d4b\u8bd5\u6846\u67b6\u91cd\u6784\uff08\u4e0b\uff09 \u89e3\u6790NebulaGraph\u5b50\u56fe\u8bbe\u8ba1\u53ca\u5b9e\u8df5 \u57fa\u4e8e\u5168\u6587\u641c\u7d22\u5f15\u64ce\u7684\u6587\u672c\u641c\u7d22 \u5b9e\u64cd | LDBC \u6570\u636e\u5bfc\u5165\u53ca nGQL \u5b9e\u8df5","title":"\u5185\u6838"},{"location":"8.service-tuning/practice/#_4","text":"\u57fa\u4e8eNebulaGraphImporter \u6279\u91cf\u5bfc\u5165\u5de5\u5177\u6027\u80fd\u9a8c\u8bc1\u65b9\u6848\u603b\u7ed3 \u8be6\u89e3NebulaGraph 3.0 \u6027\u80fd\u62a5\u544a NebulaGraph \u652f\u6301 JDBC \u534f\u8bae Nebula\u00b7\u5229\u5668 | Norm \u77e5\u4e4e\u5f00\u6e90\u7684 ORM \u5de5\u5177 \u57fa\u4e8eNebulaGraph\u7684 Betweenness Centrality \u7b97\u6cd5 \u65e0\u4f9d\u8d56\u5355\u673a\u5c1d\u9c9c NebulaGraph Exchange \u7684 SST \u5bfc\u5165 logrotate \u5728NebulaGraph\u7684\u65e5\u5fd7\u6eda\u52a8\u5b9e\u8df5 ## \u89c6\u9891 Nebula \u9ad8\u6027\u80fd\u56fe schema \u8bbe\u8ba1 by \u9752\u85e4\u4e91\u5b89\u5168 \uff0851 \u5206 30 \u79d2\uff09 \u540c\u82b1\u987a\u56fe\u6570\u636e\u5e93\u9009\u578b\uff1a\u6d88\u606f\u9762\u3001\u57fa\u672c\u9762\u3001\u6280\u672f\u9762 \uff0821 \u5206 53 \u79d2\uff09 Nebula \u5728 Akulaku \u667a\u80fd\u98ce\u63a7\u7684\u5b9e\u8df5 \uff0840 \u5206 03 \u79d2\uff09 \u4ece\u96f6\u5230\u4e00\uff1a\u5982\u4f55\u4f7f\u7528NebulaGraph\u6784\u5efa\u4e00\u4e2a\u4f01\u4e1a\u80a1\u6743\u56fe\u8c31\u7cfb\u7edf \uff0809 \u5206 34 \u79d2\uff09 \u7f8e\u56e2\u56fe\u6570\u636e\u5e93\u5e73\u53f0\u5efa\u8bbe\u53ca\u4e1a\u52a1\u5b9e\u8df5\uff08\u4e0a\uff09 \uff0814 \u5206 36 \u79d2\uff09 \u7f8e\u56e2\u56fe\u6570\u636e\u5e93\u5e73\u53f0\u5efa\u8bbe\u53ca\u4e1a\u52a1\u5b9e\u8df5\uff08\u4e0b\uff09 \uff0821 \u5206 33 \u79d2\uff09 \u4fe1\u606f\u56fe\u8c31\u5728\u643a\u7a0b\u9152\u5e97\u7684\u5e94\u7528 \uff0839 \u5206 06 \u79d2\uff09 OPPO \u56fe\u5e73\u53f0\u5efa\u8bbe \uff0843 \u5206 09 \u79d2\uff09 NebulaGraph\u5728\u7f51\u6613\u6e38\u620f\u4e1a\u52a1\u4e2d\u7684\u5b9e\u8df5 \uff0847 \u5206 40 \u79d2\uff09 BIGO \u6570\u636e\u7ba1\u7406\u4e0e\u5e94\u7528\u5b9e\u8df5 \uff0853 \u5206 47 \u79d2\uff09 NebulaGraph\u4fdd\u9669\u53cd\u6b3a\u8bc8\u89e3\u51b3\u65b9\u6848 Demo \u5206\u4eab \uff0839 \u5206 54 \u79d2\uff09 NebulaGraph\u4eba\u9645\u5173\u7cfb\u67e5\u8be2\u4e4b\u75ab\u60c5\u9632\u63a7\u573a\u666f Demo \u5206\u4eab \uff081 \u65f6 01 \u5206 55 \u79d2\uff09 NebulaGraph\u5728\u643a\u7a0b\u91d1\u878d\u98ce\u63a7\u7684\u5e94\u7528 \uff0829 \u5206 06 \u79d2\uff09","title":"\u5468\u8fb9\u5de5\u5177"},{"location":"8.service-tuning/super-node/","text":"\u8d85\u7ea7\u9876\u70b9\uff08\u7a20\u5bc6\u70b9\uff09\u5904\u7406 \u00b6 \u539f\u7406\u4ecb\u7ecd \u00b6 \u5728\u56fe\u8bba\u4e2d\uff0c\u8d85\u7ea7\u9876\u70b9\uff08\u7a20\u5bc6\u70b9\uff09\u662f\u6307\u4e00\u4e2a\u70b9\u6709\u7740\u6781\u591a\u7684\u76f8\u90bb\u8fb9\u3002\u76f8\u90bb\u8fb9\u53ef\u4ee5\u662f\u51fa\u8fb9\uff08\u6211\u6307\u5411\u8c01\uff09\u6216\u8005\u662f\u5165\u8fb9\uff08\u8c01\u6307\u5411\u6211\uff09\u3002 \u7531\u4e8e\u5e42\u5f8b\u5206\u5e03\u7684\u7279\u70b9\uff0c\u8d85\u7ea7\u9876\u70b9\u73b0\u8c61\u975e\u5e38\u666e\u904d\u3002 \u4f8b\u5982\u793e\u4ea4\u7f51\u7edc\u4e2d\u7684\u5f71\u54cd\u529b\u9886\u8896\uff08\u7f51\u7ea2\u5927 V\uff09\u3001\u8bc1\u5238\u5e02\u573a\u4e2d\u7684\u70ed\u95e8\u80a1\u7968\u3001\u94f6\u884c\u7cfb\u7edf\u4e2d\u7684\u56db\u5927\u884c\u3001\u4ea4\u901a\u7f51\u7edc\u4e2d\u7684\u67a2\u7ebd\u7ad9\u3001\u4e92\u8054\u7f51\u4e2d\u7684\u9ad8\u6d41\u91cf\u7f51\u7ad9\u7b49\u3001\u7535\u5546\u7f51\u7edc\u4e2d\u7684\u7206\u6b3e\u4ea7\u54c1\u3002 \u5728NebulaGraph 3.6.0 \u4e2d\uff0c\u4e00\u4e2a \u70b9 \u548c\u5176 \u5c5e\u6027 \u662f\u4e00\u4e2a Key-Value \uff08\u4ee5\u8be5\u70b9\u7684 VID \u4ee5\u53ca\u5176\u4ed6\u5143\u4fe1\u606f\u4f5c\u4e3a Key \uff09\uff0c\u5176 Out-Edge Key-Value \u548c In-Edge Key-Value \u90fd\u5b58\u50a8\u5728\u540c\u4e00\u4e2a partition \u4e2d\uff08\u5177\u4f53\u539f\u7406\u8be6\u89c1 \u5b58\u50a8\u67b6\u6784 \uff0c\u5e76\u4e14\u4ee5 LSM-tree \u7684\u5f62\u5f0f\u7ec4\u7ec7\u5b58\u653e\u5728\u786c\u76d8\uff08\u548c\u7f13\u5b58\uff09\u4e2d\u3002 \u56e0\u6b64\u4e0d\u8bba\u662f \u4ece\u8be5\u70b9\u51fa\u53d1\u7684\u6709\u5411\u904d\u5386 \uff0c\u6216\u8005 \u4ee5\u8be5\u70b9\u4e3a\u7ec8\u70b9\u7684\u6709\u5411\u904d\u5386 \uff0c\u90fd\u4f1a\u6d89\u53ca\u5230\u5927\u91cf\u7684 \u987a\u5e8f IO \u626b\u63cf \uff08\u6700\u7406\u60f3\u60c5\u51b5\uff0c\u5f53\u5b8c\u6210 Compact \u64cd\u4f5c\u4e4b\u540e\uff09\uff0c\u6216\u8005\u5927\u91cf\u7684 \u968f\u673a IO \uff08\u6709\u5173\u4e8e \u8be5\u70b9 \u548c\u5176 \u51fa\u5165\u8fb9 \u9891\u7e41\u7684\u5199\u5165\uff09\u3002 \u7ecf\u9a8c\u4e0a\u8bf4\uff0c\u5f53\u4e00\u4e2a\u70b9\u7684\u51fa\u5165\u5ea6\u8d85\u8fc7 1 \u4e07\u65f6\uff0c\u5c31\u53ef\u4ee5\u89c6\u4e3a\u662f\u7a20\u5bc6\u70b9\u3002\u9700\u8981\u8003\u8651\u4e00\u4e9b\u7279\u6b8a\u7684\u8bbe\u8ba1\u548c\u5904\u7406\u3002 Note NebulaGraph\u4e2d\u6ca1\u6709\u4e13\u7528\u7684\u5b57\u6bb5\u6765\u8bb0\u5f55\u6bcf\u4e2a\u70b9\u7684\u51fa\u5ea6\u548c\u5165\u5ea6\uff0c\u4e5f\u6ca1\u6709\u5185\u7f6e\u4efb\u52a1\u6765\u8fdb\u884c\u7edf\u8ba1\uff0c\u56e0\u6b64\u65e0\u6cd5\u9884\u77e5\u54ea\u4e9b\u70b9\u4f1a\u662f\u8d85\u7ea7\u8282\u70b9\u3002\u4e00\u4e2a\u6298\u4e2d\u7684\u529e\u6cd5\u662f\u4f7f\u7528 Spark \u5468\u671f\u6027\u5730\u8ba1\u7b97\u548c\u7edf\u8ba1\u3002 \u91cd\u590d\u5c5e\u6027\u7d22\u5f15 \u00b6 \u5728\u5c5e\u6027\u56fe\u4e2d\uff0c\u9664\u4e86\u7f51\u7edc\u62d3\u6251\u7ed3\u6784\u4e2d\u7684\u8d85\u7ea7\u9876\u70b9\uff0c\u8fd8\u6709\u4e00\u7c7b\u60c5\u51b5\u7c7b\u4f3c\u4e8e\u8d85\u7ea7\u9876\u70b9\u2014\u2014\u2014\u2014\u67d0 \u5c5e\u6027\u6709\u6781\u9ad8\u91cd\u590d\u7387 \uff0c\u4e5f\u5373\"\u76f8\u540c\u7684 \u70b9\u7c7b\u578b Tag \uff0c\u4e0d\u540c\u7684 \u9876\u70b9 VID \uff0c\u540c\u4e00\u5c5e\u6027\u5b57\u6bb5\uff0c\u62e5\u6709\u76f8\u540c\u5c5e\u6027\u503c\"\u3002 NebulaGraph 3.6.0 \u5c5e\u6027\u7d22\u5f15\u7684\u8bbe\u8ba1\u590d\u7528\u4e86\u5b58\u50a8\u6a21\u5757 RocksDB \u7684\u529f\u80fd\uff0c\u8fd9\u79cd\u60c5\u51b5\u4e0b\u7684\u7d22\u5f15\u4f1a\u88ab\u5efa\u6a21\u4e3a \u524d\u7f00\u76f8\u540c\u7684 Key \u3002\u5bf9\u4e8e\u8be5\u5c5e\u6027\u7684\u67e5\u627e\uff0c\uff08\u5982\u679c\u672a\u80fd\u547d\u4e2d\u7f13\u5b58\uff0c\uff09\u4f1a\u5bf9\u5e94\u4e3a\u786c\u76d8\u4e0a\u7684\u201c\u4e00\u6b21\u968f\u673a\u67e5\u627e + \u4e00\u6b21\u524d\u7f00\u987a\u5e8f\u626b\u63cf\u201d\uff0c\u4ee5\u627e\u5230\u5bf9\u5e94\u7684 \u70b9 VID \uff08\u6b64\u540e\uff0c\u901a\u5e38\u4f1a\u4ece\u8be5\u9876\u70b9\u5f00\u59cb\u56fe\u904d\u5386\uff0c\u8fd9\u6837\u53c8\u4f1a\u53d1\u751f\u8be5\u70b9\u5bf9\u5e94 Key-Value \u7684\u4e00\u6b21\u968f\u673a\u8bfb+\u987a\u5e8f\u626b\u63cf\uff09\u3002\u5f53\u91cd\u590d\u7387\u8d8a\u9ad8\uff0c\u626b\u63cf\u8303\u56f4\u5c31\u8d8a\u5927\u3002 \u5173\u4e8e\u5c5e\u6027\u7d22\u5f15\u7684\u539f\u7406\u8be6\u7ec6\u4ecb\u7ecd\u5728 \u535a\u5ba2\u300a\u5206\u5e03\u5f0f\u56fe\u6570\u636e\u5e93NebulaGraph\u7684 Index \u5b9e\u8df5\u300b \u3002 \u7ecf\u9a8c\u4e0a\u8bf4\uff0c\u5f53\u91cd\u590d\u5c5e\u6027\u503c\u8d85\u8fc7 1 \u4e07\u65f6\uff0c\u4e5f\u9700\u8981\u7279\u6b8a\u7684\u8bbe\u8ba1\u548c\u5904\u7406\u3002 \u5efa\u8bae\u7684\u529e\u6cd5 \u00b6 \u6570\u636e\u5e93\u7aef\u7684\u5e38\u89c1\u529e\u6cd5 \u00b6 \u622a\u65ad : \u53ea\u8bbf\u95ee\u4e00\u5b9a\u9608\u503c\u7684\u8fb9\uff0c\u8d85\u8fc7\u8be5\u9608\u503c\u7684\u5176\u4ed6\u8fb9\u5219\u4e0d\u8fd4\u56de\u3002 Compact \uff1a\u91cd\u65b0\u7ec4\u7ec7 RocksDB \u4e2d\u6570\u636e\u7684\u6392\u5217\u65b9\u5f0f\uff0c\u51cf\u5c11\u968f\u673a\u8bfb\uff0c\u589e\u52a0\u987a\u5e8f\u8bfb\u3002 \u5e94\u7528\u7aef\u7684\u5e38\u89c1\u529e\u6cd5 \u00b6 \u6839\u636e\u4e1a\u52a1\u610f\u4e49\uff0c\u5c06\u4e00\u4e9b\u8d85\u7ea7\u9876\u70b9\u62c6\u5206\uff1a \u5220\u9664\u591a\u6761\u8fb9\uff0c\u5408\u5e76\u4e3a\u4e00\u6761 \u4f8b\u5982\uff0c\u4e00\u4e2a\u8f6c\u8d26\u573a\u666f\uff1a \uff08\u8d26\u6237 A)-[\u8f6c\u8d26]->\uff08\u8d26\u6237 B) \u3002\u6bcf\u6b21 \u8f6c\u8d26 \u5efa\u6a21\u4e3a \u4e00\u6761 AB \u4e4b\u95f4\u7684\u8fb9 \uff0c\u90a3\u4e48 \uff08\u8d26\u6237 A) \u548c \uff08\u8d26\u6237 B) \u4e4b\u95f4\u4f1a\u6709\u7740\u6570\u4e07\u5341\u6b21\u8f6c\u8d26\u7684\u573a\u666f\u3002 \u6309\u65e5\u3001\u5468\u3001\u6216\u8005\u6708\u4e3a\u7c92\u5ea6\uff0c\u5408\u5e76\u9648\u65e7\u7684\u8f6c\u8d26\u660e\u7ec6\u3002\u4e5f\u5c31\u662f\u6279\u91cf\u5220\u9664\u9648\u65e7\u7684\u8fb9\uff0c\u6539\u4e3a\u5c11\u91cf\u7684\u8fb9\u201c\u6708\u603b\u989d\u201d\u548c\u201c\u6b21\u6570\u3002\u800c\u4fdd\u7559\u6700\u8fd1\u6708\u7684\u8f6c\u8d26\u660e\u7ec6\u3002 \u62c6\u5206\u76f8\u540c\u7c7b\u578b\u7684\u8fb9\uff0c\u53d8\u4e3a\u591a\u79cd\u4e0d\u540c\u7c7b\u578b\u7684\u8fb9 \u4f8b\u5982\uff0c \uff08\u673a\u573a\uff09<-[depart]-\uff08\u822a\u73ed\uff09 \u573a\u666f\uff0c\u6bcf\u4e2a\u67b6\u6b21\u822a\u73ed\u7684\u79bb\u6e2f\uff0c\u90fd\u5efa\u6a21\u4e3a\u4e00\u6761\u822a\u73ed\u548c\u673a\u573a\u4e4b\u95f4\u7684\u8fb9\u3002\u90a3\u4e48\u5927\u578b\u673a\u573a\u7684\u79bb\u6e2f\u822a\u73ed\u4f1a\u6781\u591a\u3002 \u6839\u636e\u4e0d\u540c\u7684 \u822a\u7a7a\u516c\u53f8 \u5c06 depart \u8fd9\u4e2a Edge type \u62c6\u5206\u66f4\u7ec6\u7684 Edge type\uff0c\u5982 depart_ceair , depart_csair \u7b49\u3002\u5728\u67e5\u8be2\uff08\u56fe\u904d\u5386\uff09\u65f6\uff0c\u6307\u5b9a\u79bb\u6e2f\u7684\u822a\u7a7a\u516c\u53f8\u3002 \u5207\u5206\u9876\u70b9\u672c\u8eab \u4f8b\u5982\uff0c\u5bf9\u4e8e \uff08\u4eba\uff09-[\u501f\u6b3e]->\uff08\u94f6\u884c\uff09 \u7684\u501f\u6b3e\u7f51\u7edc\uff0c\u67d0\u5927\u578b\u94f6\u884c A \u7684\u501f\u6b3e\u6b21\u6570\u548c\u501f\u6b3e\u4eba\u4f1a\u975e\u5e38\u7684\u591a\u3002 \u53ef\u4ee5\u5c06\u8be5\u5927\u884c\u8282\u70b9 A \u62c6\u5206\u4e3a\u591a\u4e2a\u76f8\u5173\u8054\u7684\u5b50\u8282\u70b9 A1\u3001A2\u3001A3, \uff08\u4eba 1)-[\u501f\u6b3e]->\uff08\u94f6\u884c A1), \uff08\u4eba 2)-[\u501f\u6b3e]->\uff08\u94f6\u884c A2), \uff08\u4eba 2)-[\u501f\u6b3e]->\uff08\u94f6\u884c A3); \uff08\u94f6\u884c A1)-[\u5c5e\u4e8e]->\uff08\u94f6\u884c A), \uff08\u94f6\u884c A2)-[\u5c5e\u4e8e]->\uff08\u94f6\u884c A), \uff08\u94f6\u884c A3)-[\u5c5e\u4e8e]->\uff08\u94f6\u884c A). \u8fd9\u91cc\u7684 A1\u3001A2\u3001A3 \u65e2\u53ef\u4ee5\u662f A \u771f\u5b9e\u7684\u4e09\u4e2a\u5206\u884c\uff08\u4f8b\u5982\u5317\u4eac\u3001\u4e0a\u6d77\u3001\u6d59\u6c5f\uff09\uff0c\u4e5f\u53ef\u4ee5\u662f\u4e09\u4e2a\u6309\u67d0\u79cd\u89c4\u5219\u8bbe\u7acb\u7684\u865a\u62df\u5206\u884c\uff0c\u4f8b\u5982\u6309\u501f\u6b3e\u91d1\u989d\u5212\u5206 A1: 1-1000, A2: 1001-10000, A3: 10000+ \u3002\u8fd9\u6837\uff0c\u67e5\u8be2\u65f6\u5bf9\u4e8e A \u7684\u4efb\u4f55\u64cd\u4f5c\uff0c\u90fd\u8f6c\u53d8\u4e3a\u4e3a\u5bf9\u4e8e A1\u3001A2\u3001A3 \u7684\u4e09\u6b21\u5355\u72ec\u64cd\u4f5c\u3002","title":"\u8d85\u7ea7\u8282\u70b9(\u7a20\u5bc6\u70b9)"},{"location":"8.service-tuning/super-node/#_1","text":"","title":"\u8d85\u7ea7\u9876\u70b9\uff08\u7a20\u5bc6\u70b9\uff09\u5904\u7406"},{"location":"8.service-tuning/super-node/#_2","text":"\u5728\u56fe\u8bba\u4e2d\uff0c\u8d85\u7ea7\u9876\u70b9\uff08\u7a20\u5bc6\u70b9\uff09\u662f\u6307\u4e00\u4e2a\u70b9\u6709\u7740\u6781\u591a\u7684\u76f8\u90bb\u8fb9\u3002\u76f8\u90bb\u8fb9\u53ef\u4ee5\u662f\u51fa\u8fb9\uff08\u6211\u6307\u5411\u8c01\uff09\u6216\u8005\u662f\u5165\u8fb9\uff08\u8c01\u6307\u5411\u6211\uff09\u3002 \u7531\u4e8e\u5e42\u5f8b\u5206\u5e03\u7684\u7279\u70b9\uff0c\u8d85\u7ea7\u9876\u70b9\u73b0\u8c61\u975e\u5e38\u666e\u904d\u3002 \u4f8b\u5982\u793e\u4ea4\u7f51\u7edc\u4e2d\u7684\u5f71\u54cd\u529b\u9886\u8896\uff08\u7f51\u7ea2\u5927 V\uff09\u3001\u8bc1\u5238\u5e02\u573a\u4e2d\u7684\u70ed\u95e8\u80a1\u7968\u3001\u94f6\u884c\u7cfb\u7edf\u4e2d\u7684\u56db\u5927\u884c\u3001\u4ea4\u901a\u7f51\u7edc\u4e2d\u7684\u67a2\u7ebd\u7ad9\u3001\u4e92\u8054\u7f51\u4e2d\u7684\u9ad8\u6d41\u91cf\u7f51\u7ad9\u7b49\u3001\u7535\u5546\u7f51\u7edc\u4e2d\u7684\u7206\u6b3e\u4ea7\u54c1\u3002 \u5728NebulaGraph 3.6.0 \u4e2d\uff0c\u4e00\u4e2a \u70b9 \u548c\u5176 \u5c5e\u6027 \u662f\u4e00\u4e2a Key-Value \uff08\u4ee5\u8be5\u70b9\u7684 VID \u4ee5\u53ca\u5176\u4ed6\u5143\u4fe1\u606f\u4f5c\u4e3a Key \uff09\uff0c\u5176 Out-Edge Key-Value \u548c In-Edge Key-Value \u90fd\u5b58\u50a8\u5728\u540c\u4e00\u4e2a partition \u4e2d\uff08\u5177\u4f53\u539f\u7406\u8be6\u89c1 \u5b58\u50a8\u67b6\u6784 \uff0c\u5e76\u4e14\u4ee5 LSM-tree \u7684\u5f62\u5f0f\u7ec4\u7ec7\u5b58\u653e\u5728\u786c\u76d8\uff08\u548c\u7f13\u5b58\uff09\u4e2d\u3002 \u56e0\u6b64\u4e0d\u8bba\u662f \u4ece\u8be5\u70b9\u51fa\u53d1\u7684\u6709\u5411\u904d\u5386 \uff0c\u6216\u8005 \u4ee5\u8be5\u70b9\u4e3a\u7ec8\u70b9\u7684\u6709\u5411\u904d\u5386 \uff0c\u90fd\u4f1a\u6d89\u53ca\u5230\u5927\u91cf\u7684 \u987a\u5e8f IO \u626b\u63cf \uff08\u6700\u7406\u60f3\u60c5\u51b5\uff0c\u5f53\u5b8c\u6210 Compact \u64cd\u4f5c\u4e4b\u540e\uff09\uff0c\u6216\u8005\u5927\u91cf\u7684 \u968f\u673a IO \uff08\u6709\u5173\u4e8e \u8be5\u70b9 \u548c\u5176 \u51fa\u5165\u8fb9 \u9891\u7e41\u7684\u5199\u5165\uff09\u3002 \u7ecf\u9a8c\u4e0a\u8bf4\uff0c\u5f53\u4e00\u4e2a\u70b9\u7684\u51fa\u5165\u5ea6\u8d85\u8fc7 1 \u4e07\u65f6\uff0c\u5c31\u53ef\u4ee5\u89c6\u4e3a\u662f\u7a20\u5bc6\u70b9\u3002\u9700\u8981\u8003\u8651\u4e00\u4e9b\u7279\u6b8a\u7684\u8bbe\u8ba1\u548c\u5904\u7406\u3002 Note NebulaGraph\u4e2d\u6ca1\u6709\u4e13\u7528\u7684\u5b57\u6bb5\u6765\u8bb0\u5f55\u6bcf\u4e2a\u70b9\u7684\u51fa\u5ea6\u548c\u5165\u5ea6\uff0c\u4e5f\u6ca1\u6709\u5185\u7f6e\u4efb\u52a1\u6765\u8fdb\u884c\u7edf\u8ba1\uff0c\u56e0\u6b64\u65e0\u6cd5\u9884\u77e5\u54ea\u4e9b\u70b9\u4f1a\u662f\u8d85\u7ea7\u8282\u70b9\u3002\u4e00\u4e2a\u6298\u4e2d\u7684\u529e\u6cd5\u662f\u4f7f\u7528 Spark \u5468\u671f\u6027\u5730\u8ba1\u7b97\u548c\u7edf\u8ba1\u3002","title":"\u539f\u7406\u4ecb\u7ecd"},{"location":"8.service-tuning/super-node/#_3","text":"\u5728\u5c5e\u6027\u56fe\u4e2d\uff0c\u9664\u4e86\u7f51\u7edc\u62d3\u6251\u7ed3\u6784\u4e2d\u7684\u8d85\u7ea7\u9876\u70b9\uff0c\u8fd8\u6709\u4e00\u7c7b\u60c5\u51b5\u7c7b\u4f3c\u4e8e\u8d85\u7ea7\u9876\u70b9\u2014\u2014\u2014\u2014\u67d0 \u5c5e\u6027\u6709\u6781\u9ad8\u91cd\u590d\u7387 \uff0c\u4e5f\u5373\"\u76f8\u540c\u7684 \u70b9\u7c7b\u578b Tag \uff0c\u4e0d\u540c\u7684 \u9876\u70b9 VID \uff0c\u540c\u4e00\u5c5e\u6027\u5b57\u6bb5\uff0c\u62e5\u6709\u76f8\u540c\u5c5e\u6027\u503c\"\u3002 NebulaGraph 3.6.0 \u5c5e\u6027\u7d22\u5f15\u7684\u8bbe\u8ba1\u590d\u7528\u4e86\u5b58\u50a8\u6a21\u5757 RocksDB \u7684\u529f\u80fd\uff0c\u8fd9\u79cd\u60c5\u51b5\u4e0b\u7684\u7d22\u5f15\u4f1a\u88ab\u5efa\u6a21\u4e3a \u524d\u7f00\u76f8\u540c\u7684 Key \u3002\u5bf9\u4e8e\u8be5\u5c5e\u6027\u7684\u67e5\u627e\uff0c\uff08\u5982\u679c\u672a\u80fd\u547d\u4e2d\u7f13\u5b58\uff0c\uff09\u4f1a\u5bf9\u5e94\u4e3a\u786c\u76d8\u4e0a\u7684\u201c\u4e00\u6b21\u968f\u673a\u67e5\u627e + \u4e00\u6b21\u524d\u7f00\u987a\u5e8f\u626b\u63cf\u201d\uff0c\u4ee5\u627e\u5230\u5bf9\u5e94\u7684 \u70b9 VID \uff08\u6b64\u540e\uff0c\u901a\u5e38\u4f1a\u4ece\u8be5\u9876\u70b9\u5f00\u59cb\u56fe\u904d\u5386\uff0c\u8fd9\u6837\u53c8\u4f1a\u53d1\u751f\u8be5\u70b9\u5bf9\u5e94 Key-Value \u7684\u4e00\u6b21\u968f\u673a\u8bfb+\u987a\u5e8f\u626b\u63cf\uff09\u3002\u5f53\u91cd\u590d\u7387\u8d8a\u9ad8\uff0c\u626b\u63cf\u8303\u56f4\u5c31\u8d8a\u5927\u3002 \u5173\u4e8e\u5c5e\u6027\u7d22\u5f15\u7684\u539f\u7406\u8be6\u7ec6\u4ecb\u7ecd\u5728 \u535a\u5ba2\u300a\u5206\u5e03\u5f0f\u56fe\u6570\u636e\u5e93NebulaGraph\u7684 Index \u5b9e\u8df5\u300b \u3002 \u7ecf\u9a8c\u4e0a\u8bf4\uff0c\u5f53\u91cd\u590d\u5c5e\u6027\u503c\u8d85\u8fc7 1 \u4e07\u65f6\uff0c\u4e5f\u9700\u8981\u7279\u6b8a\u7684\u8bbe\u8ba1\u548c\u5904\u7406\u3002","title":"\u91cd\u590d\u5c5e\u6027\u7d22\u5f15"},{"location":"8.service-tuning/super-node/#_4","text":"","title":"\u5efa\u8bae\u7684\u529e\u6cd5"},{"location":"8.service-tuning/super-node/#_5","text":"\u622a\u65ad : \u53ea\u8bbf\u95ee\u4e00\u5b9a\u9608\u503c\u7684\u8fb9\uff0c\u8d85\u8fc7\u8be5\u9608\u503c\u7684\u5176\u4ed6\u8fb9\u5219\u4e0d\u8fd4\u56de\u3002 Compact \uff1a\u91cd\u65b0\u7ec4\u7ec7 RocksDB \u4e2d\u6570\u636e\u7684\u6392\u5217\u65b9\u5f0f\uff0c\u51cf\u5c11\u968f\u673a\u8bfb\uff0c\u589e\u52a0\u987a\u5e8f\u8bfb\u3002","title":"\u6570\u636e\u5e93\u7aef\u7684\u5e38\u89c1\u529e\u6cd5"},{"location":"8.service-tuning/super-node/#_6","text":"\u6839\u636e\u4e1a\u52a1\u610f\u4e49\uff0c\u5c06\u4e00\u4e9b\u8d85\u7ea7\u9876\u70b9\u62c6\u5206\uff1a \u5220\u9664\u591a\u6761\u8fb9\uff0c\u5408\u5e76\u4e3a\u4e00\u6761 \u4f8b\u5982\uff0c\u4e00\u4e2a\u8f6c\u8d26\u573a\u666f\uff1a \uff08\u8d26\u6237 A)-[\u8f6c\u8d26]->\uff08\u8d26\u6237 B) \u3002\u6bcf\u6b21 \u8f6c\u8d26 \u5efa\u6a21\u4e3a \u4e00\u6761 AB \u4e4b\u95f4\u7684\u8fb9 \uff0c\u90a3\u4e48 \uff08\u8d26\u6237 A) \u548c \uff08\u8d26\u6237 B) \u4e4b\u95f4\u4f1a\u6709\u7740\u6570\u4e07\u5341\u6b21\u8f6c\u8d26\u7684\u573a\u666f\u3002 \u6309\u65e5\u3001\u5468\u3001\u6216\u8005\u6708\u4e3a\u7c92\u5ea6\uff0c\u5408\u5e76\u9648\u65e7\u7684\u8f6c\u8d26\u660e\u7ec6\u3002\u4e5f\u5c31\u662f\u6279\u91cf\u5220\u9664\u9648\u65e7\u7684\u8fb9\uff0c\u6539\u4e3a\u5c11\u91cf\u7684\u8fb9\u201c\u6708\u603b\u989d\u201d\u548c\u201c\u6b21\u6570\u3002\u800c\u4fdd\u7559\u6700\u8fd1\u6708\u7684\u8f6c\u8d26\u660e\u7ec6\u3002 \u62c6\u5206\u76f8\u540c\u7c7b\u578b\u7684\u8fb9\uff0c\u53d8\u4e3a\u591a\u79cd\u4e0d\u540c\u7c7b\u578b\u7684\u8fb9 \u4f8b\u5982\uff0c \uff08\u673a\u573a\uff09<-[depart]-\uff08\u822a\u73ed\uff09 \u573a\u666f\uff0c\u6bcf\u4e2a\u67b6\u6b21\u822a\u73ed\u7684\u79bb\u6e2f\uff0c\u90fd\u5efa\u6a21\u4e3a\u4e00\u6761\u822a\u73ed\u548c\u673a\u573a\u4e4b\u95f4\u7684\u8fb9\u3002\u90a3\u4e48\u5927\u578b\u673a\u573a\u7684\u79bb\u6e2f\u822a\u73ed\u4f1a\u6781\u591a\u3002 \u6839\u636e\u4e0d\u540c\u7684 \u822a\u7a7a\u516c\u53f8 \u5c06 depart \u8fd9\u4e2a Edge type \u62c6\u5206\u66f4\u7ec6\u7684 Edge type\uff0c\u5982 depart_ceair , depart_csair \u7b49\u3002\u5728\u67e5\u8be2\uff08\u56fe\u904d\u5386\uff09\u65f6\uff0c\u6307\u5b9a\u79bb\u6e2f\u7684\u822a\u7a7a\u516c\u53f8\u3002 \u5207\u5206\u9876\u70b9\u672c\u8eab \u4f8b\u5982\uff0c\u5bf9\u4e8e \uff08\u4eba\uff09-[\u501f\u6b3e]->\uff08\u94f6\u884c\uff09 \u7684\u501f\u6b3e\u7f51\u7edc\uff0c\u67d0\u5927\u578b\u94f6\u884c A \u7684\u501f\u6b3e\u6b21\u6570\u548c\u501f\u6b3e\u4eba\u4f1a\u975e\u5e38\u7684\u591a\u3002 \u53ef\u4ee5\u5c06\u8be5\u5927\u884c\u8282\u70b9 A \u62c6\u5206\u4e3a\u591a\u4e2a\u76f8\u5173\u8054\u7684\u5b50\u8282\u70b9 A1\u3001A2\u3001A3, \uff08\u4eba 1)-[\u501f\u6b3e]->\uff08\u94f6\u884c A1), \uff08\u4eba 2)-[\u501f\u6b3e]->\uff08\u94f6\u884c A2), \uff08\u4eba 2)-[\u501f\u6b3e]->\uff08\u94f6\u884c A3); \uff08\u94f6\u884c A1)-[\u5c5e\u4e8e]->\uff08\u94f6\u884c A), \uff08\u94f6\u884c A2)-[\u5c5e\u4e8e]->\uff08\u94f6\u884c A), \uff08\u94f6\u884c A3)-[\u5c5e\u4e8e]->\uff08\u94f6\u884c A). \u8fd9\u91cc\u7684 A1\u3001A2\u3001A3 \u65e2\u53ef\u4ee5\u662f A \u771f\u5b9e\u7684\u4e09\u4e2a\u5206\u884c\uff08\u4f8b\u5982\u5317\u4eac\u3001\u4e0a\u6d77\u3001\u6d59\u6c5f\uff09\uff0c\u4e5f\u53ef\u4ee5\u662f\u4e09\u4e2a\u6309\u67d0\u79cd\u89c4\u5219\u8bbe\u7acb\u7684\u865a\u62df\u5206\u884c\uff0c\u4f8b\u5982\u6309\u501f\u6b3e\u91d1\u989d\u5212\u5206 A1: 1-1000, A2: 1001-10000, A3: 10000+ \u3002\u8fd9\u6837\uff0c\u67e5\u8be2\u65f6\u5bf9\u4e8e A \u7684\u4efb\u4f55\u64cd\u4f5c\uff0c\u90fd\u8f6c\u53d8\u4e3a\u4e3a\u5bf9\u4e8e A1\u3001A2\u3001A3 \u7684\u4e09\u6b21\u5355\u72ec\u64cd\u4f5c\u3002","title":"\u5e94\u7528\u7aef\u7684\u5e38\u89c1\u529e\u6cd5"},{"location":"backup-and-restore/3.manage-snapshot/","text":"\u7ba1\u7406\u5feb\u7167 \u00b6 NebulaGraph\u63d0\u4f9b\u5feb\u7167\uff08snapshot\uff09\u529f\u80fd\uff0c\u7528\u4e8e\u4fdd\u5b58\u96c6\u7fa4\u5f53\u524d\u65f6\u95f4\u70b9\u7684\u6570\u636e\u72b6\u6001\uff0c\u5f53\u51fa\u73b0\u6570\u636e\u4e22\u5931\u6216\u8bef\u64cd\u4f5c\u65f6\uff0c\u53ef\u4ee5\u901a\u8fc7\u5feb\u7167\u6062\u590d\u6570\u636e\u3002 \u524d\u63d0\u6761\u4ef6 \u00b6 NebulaGraph\u7684 \u8eab\u4efd\u8ba4\u8bc1 \u529f\u80fd\u9ed8\u8ba4\u662f\u5173\u95ed\u7684\uff0c\u6b64\u65f6\u4efb\u4f55\u7528\u6237\u90fd\u80fd\u4f7f\u7528\u5feb\u7167\u529f\u80fd\u3002 \u5982\u679c\u8eab\u4efd\u8ba4\u8bc1\u5f00\u542f\uff0c\u4ec5 God \u89d2\u8272\u7528\u6237\u53ef\u4ee5\u4f7f\u7528\u5feb\u7167\u529f\u80fd\u3002\u5173\u4e8e\u89d2\u8272\u8bf4\u660e\uff0c\u8bf7\u53c2\u89c1 \u5185\u7f6e\u89d2\u8272\u6743\u9650 \u3002 \u6ce8\u610f\u4e8b\u9879 \u00b6 \u7cfb\u7edf\u7ed3\u6784\u53d1\u751f\u53d8\u5316\u540e\uff0c\u5efa\u8bae\u7acb\u523b\u521b\u5efa\u5feb\u7167\uff0c\u4f8b\u5982\u5728 add host \u3001 drop host \u3001 create space \u3001 drop space \u3001 balance \u7b49\u64cd\u4f5c\u4e4b\u540e\u3002 \u4e0d\u652f\u6301\u81ea\u52a8\u56de\u6536\u521b\u5efa\u5931\u8d25\u7684\u5feb\u7167\u5783\u573e\u6587\u4ef6\uff0c\u9700\u8981\u624b\u52a8\u5220\u9664\u3002 \u4e0d\u652f\u6301\u6307\u5b9a\u5feb\u7167\u4fdd\u5b58\u8def\u5f84\uff0c\u9ed8\u8ba4\u8def\u5f84\u4e3a /usr/local/nebula/data \u3002 \u5feb\u7167\u8def\u5f84 \u00b6 NebulaGraph\u521b\u5efa\u7684\u5feb\u7167\u4ee5\u76ee\u5f55\u7684\u5f62\u5f0f\u5b58\u50a8\uff0c\u4f8b\u5982 SNAPSHOT_2021_03_09_08_43_12 \uff0c\u540e\u7f00 2021_03_09_08_43_12 \u6839\u636e\u521b\u5efa\u65f6\u95f4\uff08UTC\uff09\u81ea\u52a8\u751f\u6210\u3002 \u521b\u5efa\u5feb\u7167\u65f6\uff0c\u5feb\u7167\u76ee\u5f55\u4f1a\u81ea\u52a8\u5728 leader Meta \u670d\u52a1\u5668\u548c\u6240\u6709 Storage \u670d\u52a1\u5668\u7684\u76ee\u5f55 checkpoints \u5185\u521b\u5efa\u3002 \u4e3a\u4e86\u5feb\u901f\u5b9a\u4f4d\u5feb\u7167\u6240\u5728\u8def\u5f84\uff0c\u53ef\u4ee5\u4f7f\u7528 Linux \u547d\u4ee4 find \u3002\u4f8b\u5982\uff1a $ find | grep 'SNAPSHOT_2021_03_09_08_43_12' ./data/meta2/nebula/0/checkpoints/SNAPSHOT_2021_03_09_08_43_12 ./data/meta2/nebula/0/checkpoints/SNAPSHOT_2021_03_09_08_43_12/data ./data/meta2/nebula/0/checkpoints/SNAPSHOT_2021_03_09_08_43_12/data/000081.sst ... \u521b\u5efa\u5feb\u7167 \u00b6 \u547d\u4ee4 CREATE SNAPSHOT \u53ef\u4ee5\u521b\u5efa\u96c6\u7fa4\u5f53\u524d\u65f6\u95f4\u70b9\u7684\u5feb\u7167\u3002\u53ea\u652f\u6301\u521b\u5efa\u6240\u6709\u56fe\u7a7a\u95f4\u7684\u5feb\u7167\uff0c\u4e0d\u652f\u6301\u521b\u5efa\u6307\u5b9a\u56fe\u7a7a\u95f4\u7684\u5feb\u7167\u3002 Note \u5982\u679c\u5feb\u7167\u521b\u5efa\u5931\u8d25\uff0c\u8bf7 \u5220\u9664\u5feb\u7167 \u91cd\u65b0\u521b\u5efa\u3002 nebula> CREATE SNAPSHOT; \u67e5\u770b\u5feb\u7167 \u00b6 \u547d\u4ee4 SHOW SNAPSHOTS \u53ef\u4ee5\u67e5\u770b\u96c6\u7fa4\u4e2d\u7684\u6240\u6709\u5feb\u7167\u3002 nebula> SHOW SNAPSHOTS; +--------------------------------+---------+------------------+ | Name | Status | Hosts | +--------------------------------+---------+------------------+ | \"SNAPSHOT_2021_03_09_08_43_12\" | \"VALID\" | \"127.0.0.1:9779\" | | \"SNAPSHOT_2021_03_09_09_10_52\" | \"VALID\" | \"127.0.0.1:9779\" | +--------------------------------+---------+------------------+ \u53c2\u6570\u8bf4\u660e\u5982\u4e0b\uff1a \u53c2\u6570 \u8bf4\u660e Name \u5feb\u7167\u540d\u79f0\uff0c\u524d\u7f00\u4e3a SNAPSHOT \uff0c\u8868\u793a\u8be5\u6587\u4ef6\u4e3a\u5feb\u7167\u6587\u4ef6\uff0c\u540e\u7f00\u4e3a\u5feb\u7167\u521b\u5efa\u7684\u65f6\u95f4\u70b9\uff08UTC \u65f6\u95f4\uff09\u3002 Status \u5feb\u7167\u72b6\u6001\u3002 VALID \u8868\u793a\u5feb\u7167\u6709\u6548\uff0c INVALID \u8868\u793a\u5feb\u7167\u65e0\u6548\u3002 Hosts \u521b\u5efa\u5feb\u7167\u65f6\u6240\u6709 Storage \u670d\u52a1\u5668\u7684 IP \u5730\u5740\u548c\u7aef\u53e3\u3002 \u5220\u9664\u5feb\u7167 \u00b6 \u547d\u4ee4 DROP SNAPSHOT \u53ef\u4ee5\u5220\u9664\u6307\u5b9a\u7684\u5feb\u7167\uff0c\u8bed\u6cd5\u4e3a\uff1a DROP SNAPSHOT <snapshot_name>; \u793a\u4f8b\u5982\u4e0b\uff1a nebula> DROP SNAPSHOT SNAPSHOT_2021_03_09_08_43_12; nebula> SHOW SNAPSHOTS; +--------------------------------+---------+------------------+ | Name | Status | Hosts | +--------------------------------+---------+------------------+ | \"SNAPSHOT_2021_03_09_09_10_52\" | \"VALID\" | \"127.0.0.1:9779\" | +--------------------------------+---------+------------------+ \u6062\u590d\u5feb\u7167 \u00b6 Warning \u6062\u590d\u5feb\u7167\u6570\u636e\u65f6\uff0c\u5982\u679c\u5feb\u7167\u4e2d\u5907\u4efd\u7684\u56fe\u7a7a\u95f4\u88ab\u5220\u9664\uff08\u6267\u884c\u4e86 DROP SPACE \u64cd\u4f5c\uff09\uff0c\u90a3\u4e48\u8be5\u56fe\u7a7a\u95f4\u6570\u636e\u5c06\u65e0\u6cd5\u6062\u590d\u3002 \u5f53\u524d\u672a\u63d0\u4f9b\u6062\u590d\u5feb\u7167\u547d\u4ee4\uff0c\u9700\u8981\u624b\u52a8\u62f7\u8d1d\u5feb\u7167\u6587\u4ef6\u5230\u5bf9\u5e94\u7684\u6587\u4ef6\u5939\u5185\uff0c\u4e5f\u53ef\u4ee5\u901a\u8fc7 shell \u811a\u672c\u8fdb\u884c\u64cd\u4f5c\u3002\u5b9e\u73b0\u903b\u8f91\u5982\u4e0b\uff1a \u521b\u5efa\u5feb\u7167\u540e\uff0c\u4f1a\u5728 leader Meta \u670d\u52a1\u5668\u548c\u6240\u6709 Storage \u670d\u52a1\u5668\u7684\u5b89\u88c5\u76ee\u5f55\u5185\u751f\u6210 checkpoints \u76ee\u5f55\uff0c\u4fdd\u5b58\u521b\u5efa\u7684\u5feb\u7167\u3002\u4ee5\u672c\u6587\u4e3a\u4f8b\uff0c\u5f53\u5b58\u5728 2 \u4e2a\u56fe\u7a7a\u95f4\u65f6\uff0c\u521b\u5efa\u7684\u5feb\u7167\u5206\u522b\u4fdd\u5b58\u5728 /usr/local/nebula/data/meta/nebula/0/checkpoints \u3001 /usr/local/nebula/data/storage/nebula/3/checkpoints \u548c /usr/local/nebula/data/storage/nebula/4/checkpoints \u4e2d\u3002 $ ls /usr/local/nebula/data/meta/nebula/0/checkpoints/ SNAPSHOT_2021_03_09_09_10_52 $ ls /usr/local/nebula/data/storage/nebula/3/checkpoints/ SNAPSHOT_2021_03_09_09_10_52 $ ls /usr/local/nebula/data/storage/nebula/4/checkpoints/ SNAPSHOT_2021_03_09_09_10_52 \u5f53\u6570\u636e\u4e22\u5931\u9700\u8981\u901a\u8fc7\u5feb\u7167\u6062\u590d\u65f6\uff0c\u7528\u6237\u53ef\u4ee5\u627e\u5230\u5408\u9002\u7684\u65f6\u95f4\u70b9\u5feb\u7167\uff0c\u5c06\u5185\u90e8\u7684\u6587\u4ef6\u5939 data \u548c wal \u5206\u522b\u62f7\u8d1d\u5230\u5404\u81ea\u7684\u4e0a\u7ea7\u76ee\u5f55\uff08\u548c checkpoints \u5e73\u7ea7\uff09\uff0c\u8986\u76d6\u4e4b\u524d\u7684 data \u548c wal \uff0c\u7136\u540e\u91cd\u542f\u96c6\u7fa4\u5373\u53ef\u3002 Caution \u9700\u8981\u540c\u65f6\u8986\u76d6\u6240\u6709 Meta \u8282\u70b9\u7684 data \u548c wal \u76ee\u5f55\uff0c\u56e0\u4e3a\u5b58\u5728\u91cd\u542f\u96c6\u7fa4\u540e\u53d1\u751f Meta \u91cd\u65b0\u9009\u4e3e leader \u7684\u60c5\u51b5\uff0c\u5982\u679c\u4e0d\u8986\u76d6\u6240\u6709 Meta \u8282\u70b9\uff0c\u65b0\u7684 leader \u4f7f\u7528\u7684\u8fd8\u662f\u6700\u65b0\u7684 Meta \u6570\u636e\uff0c\u5bfc\u81f4\u6062\u590d\u5931\u8d25\u3002","title":"\u5feb\u7167"},{"location":"backup-and-restore/3.manage-snapshot/#_1","text":"NebulaGraph\u63d0\u4f9b\u5feb\u7167\uff08snapshot\uff09\u529f\u80fd\uff0c\u7528\u4e8e\u4fdd\u5b58\u96c6\u7fa4\u5f53\u524d\u65f6\u95f4\u70b9\u7684\u6570\u636e\u72b6\u6001\uff0c\u5f53\u51fa\u73b0\u6570\u636e\u4e22\u5931\u6216\u8bef\u64cd\u4f5c\u65f6\uff0c\u53ef\u4ee5\u901a\u8fc7\u5feb\u7167\u6062\u590d\u6570\u636e\u3002","title":"\u7ba1\u7406\u5feb\u7167"},{"location":"backup-and-restore/3.manage-snapshot/#_2","text":"NebulaGraph\u7684 \u8eab\u4efd\u8ba4\u8bc1 \u529f\u80fd\u9ed8\u8ba4\u662f\u5173\u95ed\u7684\uff0c\u6b64\u65f6\u4efb\u4f55\u7528\u6237\u90fd\u80fd\u4f7f\u7528\u5feb\u7167\u529f\u80fd\u3002 \u5982\u679c\u8eab\u4efd\u8ba4\u8bc1\u5f00\u542f\uff0c\u4ec5 God \u89d2\u8272\u7528\u6237\u53ef\u4ee5\u4f7f\u7528\u5feb\u7167\u529f\u80fd\u3002\u5173\u4e8e\u89d2\u8272\u8bf4\u660e\uff0c\u8bf7\u53c2\u89c1 \u5185\u7f6e\u89d2\u8272\u6743\u9650 \u3002","title":"\u524d\u63d0\u6761\u4ef6"},{"location":"backup-and-restore/3.manage-snapshot/#_3","text":"\u7cfb\u7edf\u7ed3\u6784\u53d1\u751f\u53d8\u5316\u540e\uff0c\u5efa\u8bae\u7acb\u523b\u521b\u5efa\u5feb\u7167\uff0c\u4f8b\u5982\u5728 add host \u3001 drop host \u3001 create space \u3001 drop space \u3001 balance \u7b49\u64cd\u4f5c\u4e4b\u540e\u3002 \u4e0d\u652f\u6301\u81ea\u52a8\u56de\u6536\u521b\u5efa\u5931\u8d25\u7684\u5feb\u7167\u5783\u573e\u6587\u4ef6\uff0c\u9700\u8981\u624b\u52a8\u5220\u9664\u3002 \u4e0d\u652f\u6301\u6307\u5b9a\u5feb\u7167\u4fdd\u5b58\u8def\u5f84\uff0c\u9ed8\u8ba4\u8def\u5f84\u4e3a /usr/local/nebula/data \u3002","title":"\u6ce8\u610f\u4e8b\u9879"},{"location":"backup-and-restore/3.manage-snapshot/#_4","text":"NebulaGraph\u521b\u5efa\u7684\u5feb\u7167\u4ee5\u76ee\u5f55\u7684\u5f62\u5f0f\u5b58\u50a8\uff0c\u4f8b\u5982 SNAPSHOT_2021_03_09_08_43_12 \uff0c\u540e\u7f00 2021_03_09_08_43_12 \u6839\u636e\u521b\u5efa\u65f6\u95f4\uff08UTC\uff09\u81ea\u52a8\u751f\u6210\u3002 \u521b\u5efa\u5feb\u7167\u65f6\uff0c\u5feb\u7167\u76ee\u5f55\u4f1a\u81ea\u52a8\u5728 leader Meta \u670d\u52a1\u5668\u548c\u6240\u6709 Storage \u670d\u52a1\u5668\u7684\u76ee\u5f55 checkpoints \u5185\u521b\u5efa\u3002 \u4e3a\u4e86\u5feb\u901f\u5b9a\u4f4d\u5feb\u7167\u6240\u5728\u8def\u5f84\uff0c\u53ef\u4ee5\u4f7f\u7528 Linux \u547d\u4ee4 find \u3002\u4f8b\u5982\uff1a $ find | grep 'SNAPSHOT_2021_03_09_08_43_12' ./data/meta2/nebula/0/checkpoints/SNAPSHOT_2021_03_09_08_43_12 ./data/meta2/nebula/0/checkpoints/SNAPSHOT_2021_03_09_08_43_12/data ./data/meta2/nebula/0/checkpoints/SNAPSHOT_2021_03_09_08_43_12/data/000081.sst ...","title":"\u5feb\u7167\u8def\u5f84"},{"location":"backup-and-restore/3.manage-snapshot/#_5","text":"\u547d\u4ee4 CREATE SNAPSHOT \u53ef\u4ee5\u521b\u5efa\u96c6\u7fa4\u5f53\u524d\u65f6\u95f4\u70b9\u7684\u5feb\u7167\u3002\u53ea\u652f\u6301\u521b\u5efa\u6240\u6709\u56fe\u7a7a\u95f4\u7684\u5feb\u7167\uff0c\u4e0d\u652f\u6301\u521b\u5efa\u6307\u5b9a\u56fe\u7a7a\u95f4\u7684\u5feb\u7167\u3002 Note \u5982\u679c\u5feb\u7167\u521b\u5efa\u5931\u8d25\uff0c\u8bf7 \u5220\u9664\u5feb\u7167 \u91cd\u65b0\u521b\u5efa\u3002 nebula> CREATE SNAPSHOT;","title":"\u521b\u5efa\u5feb\u7167"},{"location":"backup-and-restore/3.manage-snapshot/#_6","text":"\u547d\u4ee4 SHOW SNAPSHOTS \u53ef\u4ee5\u67e5\u770b\u96c6\u7fa4\u4e2d\u7684\u6240\u6709\u5feb\u7167\u3002 nebula> SHOW SNAPSHOTS; +--------------------------------+---------+------------------+ | Name | Status | Hosts | +--------------------------------+---------+------------------+ | \"SNAPSHOT_2021_03_09_08_43_12\" | \"VALID\" | \"127.0.0.1:9779\" | | \"SNAPSHOT_2021_03_09_09_10_52\" | \"VALID\" | \"127.0.0.1:9779\" | +--------------------------------+---------+------------------+ \u53c2\u6570\u8bf4\u660e\u5982\u4e0b\uff1a \u53c2\u6570 \u8bf4\u660e Name \u5feb\u7167\u540d\u79f0\uff0c\u524d\u7f00\u4e3a SNAPSHOT \uff0c\u8868\u793a\u8be5\u6587\u4ef6\u4e3a\u5feb\u7167\u6587\u4ef6\uff0c\u540e\u7f00\u4e3a\u5feb\u7167\u521b\u5efa\u7684\u65f6\u95f4\u70b9\uff08UTC \u65f6\u95f4\uff09\u3002 Status \u5feb\u7167\u72b6\u6001\u3002 VALID \u8868\u793a\u5feb\u7167\u6709\u6548\uff0c INVALID \u8868\u793a\u5feb\u7167\u65e0\u6548\u3002 Hosts \u521b\u5efa\u5feb\u7167\u65f6\u6240\u6709 Storage \u670d\u52a1\u5668\u7684 IP \u5730\u5740\u548c\u7aef\u53e3\u3002","title":"\u67e5\u770b\u5feb\u7167"},{"location":"backup-and-restore/3.manage-snapshot/#_7","text":"\u547d\u4ee4 DROP SNAPSHOT \u53ef\u4ee5\u5220\u9664\u6307\u5b9a\u7684\u5feb\u7167\uff0c\u8bed\u6cd5\u4e3a\uff1a DROP SNAPSHOT <snapshot_name>; \u793a\u4f8b\u5982\u4e0b\uff1a nebula> DROP SNAPSHOT SNAPSHOT_2021_03_09_08_43_12; nebula> SHOW SNAPSHOTS; +--------------------------------+---------+------------------+ | Name | Status | Hosts | +--------------------------------+---------+------------------+ | \"SNAPSHOT_2021_03_09_09_10_52\" | \"VALID\" | \"127.0.0.1:9779\" | +--------------------------------+---------+------------------+","title":"\u5220\u9664\u5feb\u7167"},{"location":"backup-and-restore/3.manage-snapshot/#_8","text":"Warning \u6062\u590d\u5feb\u7167\u6570\u636e\u65f6\uff0c\u5982\u679c\u5feb\u7167\u4e2d\u5907\u4efd\u7684\u56fe\u7a7a\u95f4\u88ab\u5220\u9664\uff08\u6267\u884c\u4e86 DROP SPACE \u64cd\u4f5c\uff09\uff0c\u90a3\u4e48\u8be5\u56fe\u7a7a\u95f4\u6570\u636e\u5c06\u65e0\u6cd5\u6062\u590d\u3002 \u5f53\u524d\u672a\u63d0\u4f9b\u6062\u590d\u5feb\u7167\u547d\u4ee4\uff0c\u9700\u8981\u624b\u52a8\u62f7\u8d1d\u5feb\u7167\u6587\u4ef6\u5230\u5bf9\u5e94\u7684\u6587\u4ef6\u5939\u5185\uff0c\u4e5f\u53ef\u4ee5\u901a\u8fc7 shell \u811a\u672c\u8fdb\u884c\u64cd\u4f5c\u3002\u5b9e\u73b0\u903b\u8f91\u5982\u4e0b\uff1a \u521b\u5efa\u5feb\u7167\u540e\uff0c\u4f1a\u5728 leader Meta \u670d\u52a1\u5668\u548c\u6240\u6709 Storage \u670d\u52a1\u5668\u7684\u5b89\u88c5\u76ee\u5f55\u5185\u751f\u6210 checkpoints \u76ee\u5f55\uff0c\u4fdd\u5b58\u521b\u5efa\u7684\u5feb\u7167\u3002\u4ee5\u672c\u6587\u4e3a\u4f8b\uff0c\u5f53\u5b58\u5728 2 \u4e2a\u56fe\u7a7a\u95f4\u65f6\uff0c\u521b\u5efa\u7684\u5feb\u7167\u5206\u522b\u4fdd\u5b58\u5728 /usr/local/nebula/data/meta/nebula/0/checkpoints \u3001 /usr/local/nebula/data/storage/nebula/3/checkpoints \u548c /usr/local/nebula/data/storage/nebula/4/checkpoints \u4e2d\u3002 $ ls /usr/local/nebula/data/meta/nebula/0/checkpoints/ SNAPSHOT_2021_03_09_09_10_52 $ ls /usr/local/nebula/data/storage/nebula/3/checkpoints/ SNAPSHOT_2021_03_09_09_10_52 $ ls /usr/local/nebula/data/storage/nebula/4/checkpoints/ SNAPSHOT_2021_03_09_09_10_52 \u5f53\u6570\u636e\u4e22\u5931\u9700\u8981\u901a\u8fc7\u5feb\u7167\u6062\u590d\u65f6\uff0c\u7528\u6237\u53ef\u4ee5\u627e\u5230\u5408\u9002\u7684\u65f6\u95f4\u70b9\u5feb\u7167\uff0c\u5c06\u5185\u90e8\u7684\u6587\u4ef6\u5939 data \u548c wal \u5206\u522b\u62f7\u8d1d\u5230\u5404\u81ea\u7684\u4e0a\u7ea7\u76ee\u5f55\uff08\u548c checkpoints \u5e73\u7ea7\uff09\uff0c\u8986\u76d6\u4e4b\u524d\u7684 data \u548c wal \uff0c\u7136\u540e\u91cd\u542f\u96c6\u7fa4\u5373\u53ef\u3002 Caution \u9700\u8981\u540c\u65f6\u8986\u76d6\u6240\u6709 Meta \u8282\u70b9\u7684 data \u548c wal \u76ee\u5f55\uff0c\u56e0\u4e3a\u5b58\u5728\u91cd\u542f\u96c6\u7fa4\u540e\u53d1\u751f Meta \u91cd\u65b0\u9009\u4e3e leader \u7684\u60c5\u51b5\uff0c\u5982\u679c\u4e0d\u8986\u76d6\u6240\u6709 Meta \u8282\u70b9\uff0c\u65b0\u7684 leader \u4f7f\u7528\u7684\u8fd8\u662f\u6700\u65b0\u7684 Meta \u6570\u636e\uff0c\u5bfc\u81f4\u6062\u590d\u5931\u8d25\u3002","title":"\u6062\u590d\u5feb\u7167"},{"location":"backup-and-restore/nebula-br/1.what-is-br/","text":"\u4ec0\u4e48\u662f Backup&Restore \u00b6 Backup&Restore\uff08\u7b80\u79f0 BR\uff09\u662f\u4e00\u6b3e\u547d\u4ee4\u884c\u754c\u9762\uff08CLI\uff09\u5de5\u5177\uff0c\u53ef\u4ee5\u5e2e\u52a9\u5907\u4efdNebulaGraph\u7684\u56fe\u7a7a\u95f4\u6570\u636e\uff0c\u6216\u8005\u901a\u8fc7\u5907\u4efd\u6587\u4ef6\u6062\u590d\u6570\u636e\u3002 \u529f\u80fd \u00b6 \u4e00\u952e\u64cd\u4f5c\u5907\u4efd\u548c\u6062\u590d\u6570\u636e\u3002 \u652f\u6301\u57fa\u4e8e\u4ee5\u4e0b\u5907\u4efd\u6587\u4ef6\u6062\u590d\u6570\u636e\uff1a \u672c\u5730\u78c1\u76d8\uff08SSD \u6216 HDD\uff09\uff0c\u5efa\u8bae\u4ec5\u5728\u6d4b\u8bd5\u73af\u5883\u4f7f\u7528\u3002 \u517c\u5bb9\u4e9a\u9a6c\u900a\u5bf9\u8c61\u5b58\u50a8\uff08Amazon S3\uff09\u4e91\u5b58\u50a8\u670d\u52a1\u63a5\u53e3\uff0c\u4f8b\u5982\uff1a\u963f\u91cc\u4e91\u5bf9\u8c61\u5b58\u50a8\uff08Alibaba Cloud OSS\uff09\u3001MinIO\u3001Ceph RGW \u7b49\u3002 \u652f\u6301\u5907\u4efd\u5e76\u6062\u590d\u6574\u4e2aNebulaGraph\u96c6\u7fa4\u3002 \uff08\u5b9e\u9a8c\u6027\u529f\u80fd\uff09\u652f\u6301\u5907\u4efd\u6307\u5b9a\u56fe\u7a7a\u95f4\u6570\u636e\u3002 \u9650\u5236 \u00b6 NebulaGraph\u7248\u672c\u9700\u8981\u4e3a v3.x\u3002 \u6570\u636e\u5907\u4efd\u4ec5\u652f\u6301\u5168\u91cf\u5907\u4efd\uff0c\u4e0d\u652f\u6301\u589e\u91cf\u5907\u4efd\u3002 Listener \u6682\u65f6\u4e0d\u652f\u6301\u5907\u4efd\uff0c\u4e14\u5168\u6587\u7d22\u5f15\u4e5f\u4e0d\u652f\u6301\u5907\u4efd\u3002 \u5982\u679c\u5907\u4efd\u6570\u636e\u5230\u672c\u5730\u78c1\u76d8\uff0c\u5907\u4efd\u7684\u6587\u4ef6\u5c06\u4f1a\u653e\u7f6e\u5728\u6bcf\u4e2a\u670d\u52a1\u5668\u7684\u672c\u5730\u8def\u5f84\u4e2d\u3002\u4e5f\u53ef\u4ee5\u5728\u672c\u5730\u6302\u8f7d NFS \u6587\u4ef6\u7cfb\u7edf\uff0c\u4ee5\u4fbf\u5c06\u5907\u4efd\u6570\u636e\u8fd8\u539f\u5230\u4e0d\u540c\u7684\u4e3b\u673a\u4e0a\u3002 \u5907\u4efd\u56fe\u7a7a\u95f4\u53ea\u80fd\u6062\u590d\u5230\u539f\u96c6\u7fa4\uff0c\u4e0d\u80fd\u8de8\u96c6\u7fa4\u6062\u590d\uff0c\u5e76\u4e14\u96c6\u7fa4\u7684 Storage \u4e3b\u673a\u6570\u91cf\u53ca IP \u9700\u4e00\u81f4\u3002\u8fd8\u539f\u6307\u5b9a\u56fe\u7a7a\u95f4\u65f6\u5c06\u6e05\u9664\u96c6\u7fa4\u4e2d\u5176\u4f59\u6240\u6709\u56fe\u7a7a\u95f4\u3002 \u6570\u636e\u5907\u4efd\u8fc7\u7a0b\u4e2d\uff0c\u6240\u6709\u56fe\u7a7a\u95f4\u4e2d\u7684 DDL \u548c DML \u8bed\u53e5\u5c06\u4f1a\u963b\u585e\uff0c\u6211\u4eec\u5efa\u8bae\u5728\u4e1a\u52a1\u4f4e\u5cf0\u671f\u8fdb\u884c\u64cd\u4f5c\uff0c\u4f8b\u5982\u51cc\u6668 2 \u70b9\u81f3 5 \u70b9\u3002 \u6570\u636e\u6062\u590d\u671f\u95f4\u6709\u4e00\u6bb5\u65f6\u95f4\u670d\u52a1\u4f1a\u88ab\u505c\u6b62\u3002 \u4e0d\u652f\u6301\u5728\u5bb9\u5668\u90e8\u7f72\u7684NebulaGraph\u96c6\u7fa4\u4e2d\u4f7f\u7528 BR\u3002 \u5982\u4f55\u4f7f\u7528 BR \u00b6 \u53ef\u4ee5\u6309\u7167\u5982\u4e0b\u6b65\u9aa4\u4f7f\u7528 BR\uff1a \u5b89\u88c5 BR \u4f7f\u7528 BR \u5907\u4efd\u6570\u636e \u4f7f\u7528 BR \u6062\u590d\u6570\u636e \u89c6\u9891 \u00b6 NebulaGraph\u5bb9\u707e\u5907\u4efd\u5de5\u5177 nebula-br \u4ecb\u7ecd \uff083 \u5206 34 \u79d2\uff09","title":"BR\uff08\u793e\u533a\u7248\uff09\u6982\u8ff0"},{"location":"backup-and-restore/nebula-br/1.what-is-br/#backuprestore","text":"Backup&Restore\uff08\u7b80\u79f0 BR\uff09\u662f\u4e00\u6b3e\u547d\u4ee4\u884c\u754c\u9762\uff08CLI\uff09\u5de5\u5177\uff0c\u53ef\u4ee5\u5e2e\u52a9\u5907\u4efdNebulaGraph\u7684\u56fe\u7a7a\u95f4\u6570\u636e\uff0c\u6216\u8005\u901a\u8fc7\u5907\u4efd\u6587\u4ef6\u6062\u590d\u6570\u636e\u3002","title":"\u4ec0\u4e48\u662f Backup&amp;Restore"},{"location":"backup-and-restore/nebula-br/1.what-is-br/#_1","text":"\u4e00\u952e\u64cd\u4f5c\u5907\u4efd\u548c\u6062\u590d\u6570\u636e\u3002 \u652f\u6301\u57fa\u4e8e\u4ee5\u4e0b\u5907\u4efd\u6587\u4ef6\u6062\u590d\u6570\u636e\uff1a \u672c\u5730\u78c1\u76d8\uff08SSD \u6216 HDD\uff09\uff0c\u5efa\u8bae\u4ec5\u5728\u6d4b\u8bd5\u73af\u5883\u4f7f\u7528\u3002 \u517c\u5bb9\u4e9a\u9a6c\u900a\u5bf9\u8c61\u5b58\u50a8\uff08Amazon S3\uff09\u4e91\u5b58\u50a8\u670d\u52a1\u63a5\u53e3\uff0c\u4f8b\u5982\uff1a\u963f\u91cc\u4e91\u5bf9\u8c61\u5b58\u50a8\uff08Alibaba Cloud OSS\uff09\u3001MinIO\u3001Ceph RGW \u7b49\u3002 \u652f\u6301\u5907\u4efd\u5e76\u6062\u590d\u6574\u4e2aNebulaGraph\u96c6\u7fa4\u3002 \uff08\u5b9e\u9a8c\u6027\u529f\u80fd\uff09\u652f\u6301\u5907\u4efd\u6307\u5b9a\u56fe\u7a7a\u95f4\u6570\u636e\u3002","title":"\u529f\u80fd"},{"location":"backup-and-restore/nebula-br/1.what-is-br/#_2","text":"NebulaGraph\u7248\u672c\u9700\u8981\u4e3a v3.x\u3002 \u6570\u636e\u5907\u4efd\u4ec5\u652f\u6301\u5168\u91cf\u5907\u4efd\uff0c\u4e0d\u652f\u6301\u589e\u91cf\u5907\u4efd\u3002 Listener \u6682\u65f6\u4e0d\u652f\u6301\u5907\u4efd\uff0c\u4e14\u5168\u6587\u7d22\u5f15\u4e5f\u4e0d\u652f\u6301\u5907\u4efd\u3002 \u5982\u679c\u5907\u4efd\u6570\u636e\u5230\u672c\u5730\u78c1\u76d8\uff0c\u5907\u4efd\u7684\u6587\u4ef6\u5c06\u4f1a\u653e\u7f6e\u5728\u6bcf\u4e2a\u670d\u52a1\u5668\u7684\u672c\u5730\u8def\u5f84\u4e2d\u3002\u4e5f\u53ef\u4ee5\u5728\u672c\u5730\u6302\u8f7d NFS \u6587\u4ef6\u7cfb\u7edf\uff0c\u4ee5\u4fbf\u5c06\u5907\u4efd\u6570\u636e\u8fd8\u539f\u5230\u4e0d\u540c\u7684\u4e3b\u673a\u4e0a\u3002 \u5907\u4efd\u56fe\u7a7a\u95f4\u53ea\u80fd\u6062\u590d\u5230\u539f\u96c6\u7fa4\uff0c\u4e0d\u80fd\u8de8\u96c6\u7fa4\u6062\u590d\uff0c\u5e76\u4e14\u96c6\u7fa4\u7684 Storage \u4e3b\u673a\u6570\u91cf\u53ca IP \u9700\u4e00\u81f4\u3002\u8fd8\u539f\u6307\u5b9a\u56fe\u7a7a\u95f4\u65f6\u5c06\u6e05\u9664\u96c6\u7fa4\u4e2d\u5176\u4f59\u6240\u6709\u56fe\u7a7a\u95f4\u3002 \u6570\u636e\u5907\u4efd\u8fc7\u7a0b\u4e2d\uff0c\u6240\u6709\u56fe\u7a7a\u95f4\u4e2d\u7684 DDL \u548c DML \u8bed\u53e5\u5c06\u4f1a\u963b\u585e\uff0c\u6211\u4eec\u5efa\u8bae\u5728\u4e1a\u52a1\u4f4e\u5cf0\u671f\u8fdb\u884c\u64cd\u4f5c\uff0c\u4f8b\u5982\u51cc\u6668 2 \u70b9\u81f3 5 \u70b9\u3002 \u6570\u636e\u6062\u590d\u671f\u95f4\u6709\u4e00\u6bb5\u65f6\u95f4\u670d\u52a1\u4f1a\u88ab\u505c\u6b62\u3002 \u4e0d\u652f\u6301\u5728\u5bb9\u5668\u90e8\u7f72\u7684NebulaGraph\u96c6\u7fa4\u4e2d\u4f7f\u7528 BR\u3002","title":"\u9650\u5236"},{"location":"backup-and-restore/nebula-br/1.what-is-br/#br","text":"\u53ef\u4ee5\u6309\u7167\u5982\u4e0b\u6b65\u9aa4\u4f7f\u7528 BR\uff1a \u5b89\u88c5 BR \u4f7f\u7528 BR \u5907\u4efd\u6570\u636e \u4f7f\u7528 BR \u6062\u590d\u6570\u636e","title":"\u5982\u4f55\u4f7f\u7528 BR"},{"location":"backup-and-restore/nebula-br/1.what-is-br/#_3","text":"NebulaGraph\u5bb9\u707e\u5907\u4efd\u5de5\u5177 nebula-br \u4ecb\u7ecd \uff083 \u5206 34 \u79d2\uff09","title":"\u89c6\u9891"},{"location":"backup-and-restore/nebula-br/2.compile-br/","text":"\u5b89\u88c5 BR \u00b6 \u672c\u6587\u4ecb\u7ecd\u88f8\u673a\u90e8\u7f72\u60c5\u51b5\u4e0b\u7684 BR \u5b89\u88c5\u3002 \u5b89\u88c5\u8bf4\u660e \u00b6 \u4f7f\u7528 BR \u5de5\u5177\u5907\u4efd\u548c\u6062\u590dNebulaGraph\u65f6\uff0c\u9700\u8981\u5b89\u88c5 NebulaGraph Agent \u670d\u52a1\u3002Agent \u662f\u96c6\u7fa4\u4e2d\u6bcf\u53f0\u673a\u5668\u7684\u4e00\u4e2a\u5b88\u62a4\u8fdb\u7a0b\uff0c\u7528\u4e8e\u542f\u505cNebulaGraph\u670d\u52a1\u548c\u4e0a\u4f20\u3001\u4e0b\u8f7d\u5907\u4efd\u6587\u4ef6\u3002BR \u5de5\u5177\u548c Agent \u63d2\u4ef6\u7684\u5b89\u88c5\u65b9\u5f0f\u5982\u4e0b\u6587\u3002 \u7248\u672c\u517c\u5bb9\u6027 \u00b6 NebulaGraph BR \u793e\u533a\u7248 Agent 3.5.x 3.5.0 3.4.0\u30010.2.0 3.3.0 ~ 3.4.x 3.3.0 3.4.0\u30010.2.0 3.0.x ~ 3.2.x 0.6.1 0.1.0 ~ 0.2.0 \u5b89\u88c5 BR \u00b6 \u4f7f\u7528\u4e8c\u8fdb\u5236\u6587\u4ef6\u5b89\u88c5 \u00b6 \u4e0b\u8f7d BR\u3002 wget https://github.com/vesoft-inc/nebula-br/releases/download/v3.5.0/br-3.5.0-linux-amd64 \u4fee\u6539\u6587\u4ef6\u540d\u79f0\u4e3a br \u3002 sudo mv br-3.5.0-linux-amd64 br \u6388\u4e88 BR \u6267\u884c\u6743\u9650\u3002 sudo chmod +x br \u6267\u884c ./br version \u67e5\u770b BR \u7248\u672c\u3002 [nebula-br]$ ./br version Nebula Backup And Restore Utility Tool,V-3.5.0 \u4f7f\u7528\u6e90\u7801\u5b89\u88c5 \u00b6 \u4f7f\u7528\u6e90\u7801\u5b89\u88c5 BR \u524d\uff0c\u51c6\u5907\u5de5\u4f5c\u5982\u4e0b\uff1a \u5b89\u88c5 Go 1.14.x \u6216\u66f4\u65b0\u7248\u672c\u3002 \u5b89\u88c5 make\u3002 \u514b\u9686 nebula-br \u5e93\u81f3\u673a\u5668\u3002 git clone https://github.com/vesoft-inc/nebula-br.git \u8fdb\u5165 br \u76ee\u5f55\u3002 cd nebula-br \u7f16\u8bd1 BR\u3002 make \u7528\u6237\u53ef\u4ee5\u5728\u547d\u4ee4\u884c\u8f93\u5165 bin/br version \uff0c\u5982\u679c\u8fd4\u56de\u4ee5\u4e0b\u5185\u5bb9\uff0c\u5219\u8ba4\u4e3a\u7f16\u8bd1\u6210\u529f\u3002 [ nebula-br ] $ bin/br version NebulaGraph Backup And Restore Utility Tool,V-3.5.0 \u5b89\u88c5 Agent \u00b6 NebulaGraph Agent \u4ee5\u4e8c\u8fdb\u5236\u5f62\u5f0f\u5b58\u5728\u5404\u4e2a\u673a\u5668\u7684\u5b89\u88c5\u76ee\u5f55\u4e2d\uff0c\u901a\u8fc7 RPC \u534f\u8bae\u5bf9 BR \u5de5\u5177\u63d0\u4f9b\u670d\u52a1\u3002 \u5728 \u6bcf\u53f0\u673a\u5668 \u4e2d\uff0c\u8fdb\u884c\u4ee5\u4e0b\u64cd\u4f5c\uff1a \u4e0b\u8f7d Agent\u3002 wget https://github.com/vesoft-inc/nebula-agent/releases/download/v3.6.1/agent-3.6.1-linux-amd64 \u4fee\u6539 Agent \u7684\u540d\u79f0\u4e3a agent \u3002 sudo mv agent-3.6.1-linux-amd64 agent \u6388\u4e88 Agent \u53ef\u6267\u884c\u6743\u9650\u3002 sudo chmod +x agent \u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\u542f\u52a8 Agent\u3002 Note \u542f\u52a8 Agent \u524d\uff0c\u786e\u4fdd\u5df2\u7ecf\u542f\u52a8\u96c6\u7fa4\u4e2d\u7684 Meta \u670d\u52a1\uff0c\u5e76\u4e14 Agent \u6709\u5bf9\u5e94NebulaGraph\u670d\u52a1\u76ee\u5f55\u548c\u5907\u4efd\u76ee\u5f55\u7684\u8bfb\u5199\u6743\u9650\u3002 sudo nohup ./agent --agent=\"<agent_node_ip>:8888\" --meta=\"<metad_node_ip>:9559\" > nebula_agent.log 2>&1 & --agent \uff1aAgent \u6240\u5728\u673a\u5668\u7684 IP \u5730\u5740\u548c\u8bbf\u95ee\u7aef\u53e3\u3002 --meta \uff1a\u96c6\u7fa4\u4e2d\u4efb\u4e00 Meta \u670d\u52a1\u6240\u5728\u673a\u5668\u7684 IP \u5730\u5740\u548c\u8bbf\u95ee\u7aef\u53e3\u3002 --ratelimit \uff1a\u53ef\u9009\u9879\uff0c\u9650\u5236\u6587\u4ef6\u4e0a\u4f20\u548c\u4e0b\u8f7d\u7684\u901f\u5ea6\uff0c\u9632\u6b62\u5e26\u5bbd\u88ab\u5360\u6ee1\u5bfc\u81f4\u5176\u4ed6\u670d\u52a1\u4e0d\u53ef\u7528\u3002\u5355\u4f4d\uff1aBytes\u3002 \u4f8b\u5982\uff1a sudo nohup ./agent --agent=\"192.168.8.129:8888\" --meta=\"192.168.8.129:9559\" --ratelimit=1048576 > nebula_agent.log 2>&1 & Caution --agent \u914d\u7f6e\u7684 IP \u5730\u5740\u9700\u8981\u548c \u914d\u7f6e\u6587\u4ef6 \u4e2d Meta \u548c Storage \u670d\u52a1\u7684\u5730\u5740\u683c\u5f0f\u4fdd\u6301\u4e00\u81f4\uff0c\u5373\u90fd\u4f7f\u7528\u771f\u5b9e IP \u5730\u5740\uff0c\u5426\u5219 Agent \u65e0\u6cd5\u542f\u52a8\u3002 \u8fde\u63a5\u670d\u52a1\u5e76\u67e5\u770b Agent \u7684\u8fd0\u884c\u72b6\u6001\u3002 nebula> SHOW HOSTS AGENT; +-----------------+------+----------+---------+--------------+---------+ | Host | Port | Status | Role | Git Info Sha | Version | +-----------------+------+----------+---------+--------------+---------+ | \"192.168.8.129\" | 8888 | \"ONLINE\" | \"AGENT\" | \"96646b8\" | | +-----------------+------+----------+---------+--------------+---------+ \u5e38\u89c1\u95ee\u9898 \u00b6 \u62a5\u9519 E_LIST_CLUSTER_NO_AGENT_FAILURE \u00b6 \u5982\u679c\u64cd\u4f5c\u8fc7\u7a0b\u4e2d\u9047\u89c1 E_LIST_CLUSTER_NO_AGENT_FAILURE \u9519\u8bef\uff0c\u53ef\u80fd\u662f\u7531\u4e8e Agent \u670d\u52a1\u6ca1\u6709\u542f\u52a8\u6216\u8005 Agent \u670d\u52a1\u6ca1\u6709\u88ab\u6ce8\u518c\u81f3 Meta \u670d\u52a1\u3002\u9996\u5148\u6267\u884c SHOW HOSTS AGENT \u67e5\u770b\u96c6\u7fa4\u4e0a\u6240\u6709\u8282\u70b9\u7684 Agent \u670d\u52a1\u7684\u72b6\u6001\uff0c\u5f53\u65f6\u72b6\u6001\u663e\u793a\u4e3a OFFLINE \u65f6\u8868\u793a\u6ce8\u518c Agent \u5931\u8d25\uff0c \u7136\u540e\u68c0\u67e5\u542f\u52a8 Agent \u670d\u52a1\u7684\u547d\u4ee4\u4e2d\u7684 --meta \u53c2\u6570\u662f\u5426\u6b63\u786e\u3002","title":"\u5b89\u88c5 BR"},{"location":"backup-and-restore/nebula-br/2.compile-br/#br","text":"\u672c\u6587\u4ecb\u7ecd\u88f8\u673a\u90e8\u7f72\u60c5\u51b5\u4e0b\u7684 BR \u5b89\u88c5\u3002","title":"\u5b89\u88c5 BR"},{"location":"backup-and-restore/nebula-br/2.compile-br/#_1","text":"\u4f7f\u7528 BR \u5de5\u5177\u5907\u4efd\u548c\u6062\u590dNebulaGraph\u65f6\uff0c\u9700\u8981\u5b89\u88c5 NebulaGraph Agent \u670d\u52a1\u3002Agent \u662f\u96c6\u7fa4\u4e2d\u6bcf\u53f0\u673a\u5668\u7684\u4e00\u4e2a\u5b88\u62a4\u8fdb\u7a0b\uff0c\u7528\u4e8e\u542f\u505cNebulaGraph\u670d\u52a1\u548c\u4e0a\u4f20\u3001\u4e0b\u8f7d\u5907\u4efd\u6587\u4ef6\u3002BR \u5de5\u5177\u548c Agent \u63d2\u4ef6\u7684\u5b89\u88c5\u65b9\u5f0f\u5982\u4e0b\u6587\u3002","title":"\u5b89\u88c5\u8bf4\u660e"},{"location":"backup-and-restore/nebula-br/2.compile-br/#_2","text":"NebulaGraph BR \u793e\u533a\u7248 Agent 3.5.x 3.5.0 3.4.0\u30010.2.0 3.3.0 ~ 3.4.x 3.3.0 3.4.0\u30010.2.0 3.0.x ~ 3.2.x 0.6.1 0.1.0 ~ 0.2.0","title":"\u7248\u672c\u517c\u5bb9\u6027"},{"location":"backup-and-restore/nebula-br/2.compile-br/#br_1","text":"","title":"\u5b89\u88c5 BR"},{"location":"backup-and-restore/nebula-br/2.compile-br/#_3","text":"\u4e0b\u8f7d BR\u3002 wget https://github.com/vesoft-inc/nebula-br/releases/download/v3.5.0/br-3.5.0-linux-amd64 \u4fee\u6539\u6587\u4ef6\u540d\u79f0\u4e3a br \u3002 sudo mv br-3.5.0-linux-amd64 br \u6388\u4e88 BR \u6267\u884c\u6743\u9650\u3002 sudo chmod +x br \u6267\u884c ./br version \u67e5\u770b BR \u7248\u672c\u3002 [nebula-br]$ ./br version Nebula Backup And Restore Utility Tool,V-3.5.0","title":"\u4f7f\u7528\u4e8c\u8fdb\u5236\u6587\u4ef6\u5b89\u88c5"},{"location":"backup-and-restore/nebula-br/2.compile-br/#_4","text":"\u4f7f\u7528\u6e90\u7801\u5b89\u88c5 BR \u524d\uff0c\u51c6\u5907\u5de5\u4f5c\u5982\u4e0b\uff1a \u5b89\u88c5 Go 1.14.x \u6216\u66f4\u65b0\u7248\u672c\u3002 \u5b89\u88c5 make\u3002 \u514b\u9686 nebula-br \u5e93\u81f3\u673a\u5668\u3002 git clone https://github.com/vesoft-inc/nebula-br.git \u8fdb\u5165 br \u76ee\u5f55\u3002 cd nebula-br \u7f16\u8bd1 BR\u3002 make \u7528\u6237\u53ef\u4ee5\u5728\u547d\u4ee4\u884c\u8f93\u5165 bin/br version \uff0c\u5982\u679c\u8fd4\u56de\u4ee5\u4e0b\u5185\u5bb9\uff0c\u5219\u8ba4\u4e3a\u7f16\u8bd1\u6210\u529f\u3002 [ nebula-br ] $ bin/br version NebulaGraph Backup And Restore Utility Tool,V-3.5.0","title":"\u4f7f\u7528\u6e90\u7801\u5b89\u88c5"},{"location":"backup-and-restore/nebula-br/2.compile-br/#agent","text":"NebulaGraph Agent \u4ee5\u4e8c\u8fdb\u5236\u5f62\u5f0f\u5b58\u5728\u5404\u4e2a\u673a\u5668\u7684\u5b89\u88c5\u76ee\u5f55\u4e2d\uff0c\u901a\u8fc7 RPC \u534f\u8bae\u5bf9 BR \u5de5\u5177\u63d0\u4f9b\u670d\u52a1\u3002 \u5728 \u6bcf\u53f0\u673a\u5668 \u4e2d\uff0c\u8fdb\u884c\u4ee5\u4e0b\u64cd\u4f5c\uff1a \u4e0b\u8f7d Agent\u3002 wget https://github.com/vesoft-inc/nebula-agent/releases/download/v3.6.1/agent-3.6.1-linux-amd64 \u4fee\u6539 Agent \u7684\u540d\u79f0\u4e3a agent \u3002 sudo mv agent-3.6.1-linux-amd64 agent \u6388\u4e88 Agent \u53ef\u6267\u884c\u6743\u9650\u3002 sudo chmod +x agent \u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\u542f\u52a8 Agent\u3002 Note \u542f\u52a8 Agent \u524d\uff0c\u786e\u4fdd\u5df2\u7ecf\u542f\u52a8\u96c6\u7fa4\u4e2d\u7684 Meta \u670d\u52a1\uff0c\u5e76\u4e14 Agent \u6709\u5bf9\u5e94NebulaGraph\u670d\u52a1\u76ee\u5f55\u548c\u5907\u4efd\u76ee\u5f55\u7684\u8bfb\u5199\u6743\u9650\u3002 sudo nohup ./agent --agent=\"<agent_node_ip>:8888\" --meta=\"<metad_node_ip>:9559\" > nebula_agent.log 2>&1 & --agent \uff1aAgent \u6240\u5728\u673a\u5668\u7684 IP \u5730\u5740\u548c\u8bbf\u95ee\u7aef\u53e3\u3002 --meta \uff1a\u96c6\u7fa4\u4e2d\u4efb\u4e00 Meta \u670d\u52a1\u6240\u5728\u673a\u5668\u7684 IP \u5730\u5740\u548c\u8bbf\u95ee\u7aef\u53e3\u3002 --ratelimit \uff1a\u53ef\u9009\u9879\uff0c\u9650\u5236\u6587\u4ef6\u4e0a\u4f20\u548c\u4e0b\u8f7d\u7684\u901f\u5ea6\uff0c\u9632\u6b62\u5e26\u5bbd\u88ab\u5360\u6ee1\u5bfc\u81f4\u5176\u4ed6\u670d\u52a1\u4e0d\u53ef\u7528\u3002\u5355\u4f4d\uff1aBytes\u3002 \u4f8b\u5982\uff1a sudo nohup ./agent --agent=\"192.168.8.129:8888\" --meta=\"192.168.8.129:9559\" --ratelimit=1048576 > nebula_agent.log 2>&1 & Caution --agent \u914d\u7f6e\u7684 IP \u5730\u5740\u9700\u8981\u548c \u914d\u7f6e\u6587\u4ef6 \u4e2d Meta \u548c Storage \u670d\u52a1\u7684\u5730\u5740\u683c\u5f0f\u4fdd\u6301\u4e00\u81f4\uff0c\u5373\u90fd\u4f7f\u7528\u771f\u5b9e IP \u5730\u5740\uff0c\u5426\u5219 Agent \u65e0\u6cd5\u542f\u52a8\u3002 \u8fde\u63a5\u670d\u52a1\u5e76\u67e5\u770b Agent \u7684\u8fd0\u884c\u72b6\u6001\u3002 nebula> SHOW HOSTS AGENT; +-----------------+------+----------+---------+--------------+---------+ | Host | Port | Status | Role | Git Info Sha | Version | +-----------------+------+----------+---------+--------------+---------+ | \"192.168.8.129\" | 8888 | \"ONLINE\" | \"AGENT\" | \"96646b8\" | | +-----------------+------+----------+---------+--------------+---------+","title":"\u5b89\u88c5 Agent"},{"location":"backup-and-restore/nebula-br/2.compile-br/#_5","text":"","title":"\u5e38\u89c1\u95ee\u9898"},{"location":"backup-and-restore/nebula-br/2.compile-br/#e_list_cluster_no_agent_failure","text":"\u5982\u679c\u64cd\u4f5c\u8fc7\u7a0b\u4e2d\u9047\u89c1 E_LIST_CLUSTER_NO_AGENT_FAILURE \u9519\u8bef\uff0c\u53ef\u80fd\u662f\u7531\u4e8e Agent \u670d\u52a1\u6ca1\u6709\u542f\u52a8\u6216\u8005 Agent \u670d\u52a1\u6ca1\u6709\u88ab\u6ce8\u518c\u81f3 Meta \u670d\u52a1\u3002\u9996\u5148\u6267\u884c SHOW HOSTS AGENT \u67e5\u770b\u96c6\u7fa4\u4e0a\u6240\u6709\u8282\u70b9\u7684 Agent \u670d\u52a1\u7684\u72b6\u6001\uff0c\u5f53\u65f6\u72b6\u6001\u663e\u793a\u4e3a OFFLINE \u65f6\u8868\u793a\u6ce8\u518c Agent \u5931\u8d25\uff0c \u7136\u540e\u68c0\u67e5\u542f\u52a8 Agent \u670d\u52a1\u7684\u547d\u4ee4\u4e2d\u7684 --meta \u53c2\u6570\u662f\u5426\u6b63\u786e\u3002","title":"\u62a5\u9519E_LIST_CLUSTER_NO_AGENT_FAILURE"},{"location":"backup-and-restore/nebula-br/3.br-backup-data/","text":"\u4f7f\u7528 BR \u5907\u4efd\u6570\u636e \u00b6 \u6210\u529f\u5b89\u88c5 BR \u5de5\u5177\u540e\uff0c\u53ef\u4ee5\u5907\u4efd\u6574\u4e2a\u56fe\u7a7a\u95f4\u7684\u6570\u636e\uff0c\u672c\u6587\u4ecb\u7ecd\u5982\u4f55\u4f7f\u7528 BR \u5907\u4efd\u6570\u636e\u3002 \u51c6\u5907\u5de5\u4f5c \u00b6 \u5b89\u88c5 BR \u548c Agent \u5e76\u5728\u96c6\u7fa4\u4e2d\u7684\u6bcf\u4e2a\u4e3b\u673a\u4e0a\u8fd0\u884c Agent\u3002 \u786e\u8ba4NebulaGraph\u670d\u52a1\u6b63\u5728\u8fd0\u884c\u4e2d\u3002 \u5982\u679c\u5728\u672c\u5730\u4fdd\u5b58\u5907\u4efd\u6587\u4ef6\uff0c\u9700\u8981\u5728 Meta \u670d\u52a1\u5668\u3001Storage \u670d\u52a1\u5668\u548c BR \u673a\u5668\u4e0a\u521b\u5efa\u7edd\u5bf9\u8def\u5f84\u76f8\u540c\u7684\u5907\u4efd\u76ee\u5f55\uff0c\u5e76\u8bb0\u5f55\u7edd\u5bf9\u8def\u5f84\uff0c\u540c\u65f6\u9700\u8981\u4fdd\u8bc1\u8d26\u53f7\u5bf9\u8be5\u76ee\u5f55\u6709\u5199\u6743\u9650\u3002 Note \u5728\u751f\u4ea7\u73af\u5883\u4e2d\uff0c\u6211\u4eec\u5efa\u8bae\u7528\u6237\u5c06 NFS (Network File System\uff09\u5b58\u50a8\u8bbe\u5907\u6302\u8f7d\u5230 Meta \u670d\u52a1\u5668\u3001Storage \u670d\u52a1\u5668\u548c BR \u673a\u5668\u4e0a\u8fdb\u884c\u672c\u5730\u5907\u4efd\uff0c\u6216\u8005\u4f7f\u7528 Alibaba Cloud OSS\u3001Amazon S3 \u8fdb\u884c\u8fdc\u7a0b\u5907\u4efd\u3002\u5426\u5219\u5f53\u9700\u8981\u901a\u8fc7\u672c\u5730\u6587\u4ef6\u6062\u590d\u6570\u636e\u65f6\uff0c\u5fc5\u987b\u624b\u52a8\u5c06\u8fd9\u4e9b\u5907\u4efd\u6587\u4ef6\u79fb\u52a8\u5230\u6307\u5b9a\u76ee\u5f55\uff0c\u4f1a\u5bfc\u81f4\u6570\u636e\u5197\u4f59\u548c\u67d0\u4e9b\u95ee\u9898\u3002\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u89c1 \u4f7f\u7528 BR \u6062\u590d\u6570\u636e \u3002 \u64cd\u4f5c\u6b65\u9aa4 \u00b6 \u5728 BR \u5de5\u5177\u7684\u5b89\u88c5\u8def\u5f84\u4e0b\uff08\u7f16\u8bd1\u5b89\u88c5\u7684\u9ed8\u8ba4\u8def\u5f84\u4e3a ./bin/br \uff09\u8fd0\u884c\u4ee5\u4e0b\u547d\u4ee4\u5bf9\u6574\u4e2a\u96c6\u7fa4\u8fdb\u884c\u5168\u91cf\u5907\u4efd\u64cd\u4f5c\u3002 Note \u786e\u4fdd\u5907\u4efd\u6587\u4ef6\u7684\u8def\u5f84\u5b58\u5728\u3002 $ ./br backup full --meta <ip_address> --storage <storage_path> \u4f8b\u5982\uff1a \u8fd0\u884c\u4ee5\u4e0b\u547d\u4ee4\u5bf9 meta \u670d\u52a1\u7684\u5730\u5740\u4e3a 192.168.8.129:9559 \u7684\u6574\u4e2a\u96c6\u7fa4\u8fdb\u884c\u5168\u91cf\u5907\u4efd\u64cd\u4f5c\uff0c\u5e76\u5c06\u5907\u4efd\u6587\u4ef6\u4fdd\u5b58\u5230\u672c\u5730\u7684 /home/nebula/backup/ \u8def\u5f84\u4e0b\u3002 Caution \u5982\u679c\u6709\u591a\u4e2a metad \u5730\u5740\uff0c\u53ef\u4ee5\u4f7f\u7528\u5176\u4e2d\u4efb\u610f\u4e00\u4e2a\u3002 Caution \u5907\u4efd\u81f3\u672c\u5730\u65f6\uff0c\u9ed8\u8ba4\u53ea\u5907\u4efd leader metad \u7684\u6570\u636e\uff0c\u56e0\u6b64\u5f53\u6709\u591a\u4e2a metad \u8282\u70b9\u65f6\uff0c\u9700\u8981\u624b\u52a8\u5c06\u5907\u4efd\u540e\u7684 leader metad \u7684\u76ee\u5f55\uff08\u8def\u5f84\u4e3a <storage_path>/meta \uff09\u62f7\u8d1d\u5e76\u8986\u76d6\u5176\u4ed6 follower meatd \u8282\u70b9\u7684\u5bf9\u5e94\u76ee\u5f55\u3002 $ ./br backup full --meta \"192.168.8.129:9559\" --storage \"local:///home/nebula/backup/\" \u8fd0\u884c\u4ee5\u4e0b\u547d\u4ee4\u5bf9 meta \u670d\u52a1\u7684\u5730\u5740\u4e3a 192.168.8.129:9559 \u7684\u6574\u4e2a\u96c6\u7fa4\u8fdb\u884c\u5168\u91cf\u5907\u4efd\u64cd\u4f5c\uff0c\u5e76\u5c06\u5907\u4efd\u6587\u4ef6\u4fdd\u5b58\u5230\u517c\u5bb9 s3 \u534f\u8bae\u7684\u5bf9\u8c61\u5b58\u50a8\u670d\u52a1 br-test \u6876\u4e0b\u7684 backup \u4e2d\u3002 $ ./br backup full --meta \"192.168.8.129:9559\" --s3.endpoint \"http://192.168.8.129:9000\" --storage = \"s3://br-test/backup/\" --s3.access_key = minioadmin --s3.secret_key = minioadmin --s3.region = default \u4ee5\u4e0b\u5217\u51fa\u547d\u4ee4\u7684\u76f8\u5173\u53c2\u6570\u3002 \u53c2\u6570 \u6570\u636e\u7c7b\u578b \u662f\u5426\u5fc5\u9700 \u9ed8\u8ba4\u503c \u8bf4\u660e -h , --help - \u5426 \u65e0 \u67e5\u770b\u5e2e\u52a9\u3002 --debug - \u5426 \u65e0 \u67e5\u770b\u66f4\u591a\u65e5\u5fd7\u4fe1\u606f\u3002 --log string \u5426 \"br.log\" \u65e5\u5fd7\u8def\u5f84\u3002 --meta string \u662f \u65e0 meta \u670d\u52a1\u7684\u5730\u5740\u548c\u7aef\u53e3\u53f7\u3002 --spaces stringArray \u5426 \u65e0 \uff08\u5b9e\u9a8c\u6027\u529f\u80fd\uff09\u6307\u5b9a\u8981\u5907\u4efd\u7684\u56fe\u7a7a\u95f4\u540d\u5b57\uff0c\u672a\u6307\u5b9a\u5c06\u5907\u4efd\u6240\u6709\u56fe\u7a7a\u95f4\u3002\u53ef\u6307\u5b9a\u591a\u4e2a\u56fe\u7a7a\u95f4\uff0c\u7528\u6cd5\u4e3a --spaces nba_01 --spaces nba_02 \u3002 --storage string \u662f \u65e0 BR \u5907\u4efd\u6570\u636e\u5b58\u50a8\u4f4d\u7f6e\uff0c\u683c\u5f0f\u4e3a\uff1a <Schema>://<PATH> Schema\uff1a\u53ef\u9009\u503c\u4e3a local \u548c s3 \u3002\u9009\u62e9 s3 \u65f6\uff0c\u9700\u8981\u586b\u5199 s3.access_key \u3001 s3.endpoint \u3001 s3.region \u548c s3.secret_key \u3002 PATH\uff1a\u5b58\u50a8\u4f4d\u7f6e\u7684\u8def\u5f84\u3002 --s3.access_key string \u5426 \u65e0 \u7528\u4e8e\u6807\u8bc6\u7528\u6237\u3002 --s3.endpoint string \u5426 \u65e0 S3 \u5bf9\u5916\u670d\u52a1\u7684\u8bbf\u95ee\u57df\u540d\u7684 URL\uff0c\u6307\u5b9a http \u6216 https\u3002 --s3.region string \u5426 \u65e0 \u6570\u636e\u4e2d\u5fc3\u6240\u5728\u7269\u7406\u4f4d\u7f6e\u3002 --s3.secret_key string \u5426 \u65e0 \u7528\u6237\u7528\u4e8e\u52a0\u5bc6\u7b7e\u540d\u5b57\u7b26\u4e32\u548c\u7528\u6765\u9a8c\u8bc1\u7b7e\u540d\u5b57\u7b26\u4e32\u7684\u5bc6\u94a5\uff0c\u5fc5\u987b\u4fdd\u5bc6\u3002 \u4e0b\u4e00\u6b65 \u00b6 \u5907\u4efd\u6587\u4ef6\u751f\u6210\u540e\uff0c\u53ef\u4ee5\u4f7f\u7528 BR \u5c06\u5907\u4efd\u6587\u4ef6\u7684\u6570\u636e\u6062\u590d\u5230NebulaGraph\u4e2d\u3002\u5177\u4f53\u64cd\u4f5c\uff0c\u8bf7\u53c2\u89c1 \u4f7f\u7528 BR \u6062\u590d\u6570\u636e \u3002","title":"\u4f7f\u7528 BR \u5907\u4efd\u6570\u636e"},{"location":"backup-and-restore/nebula-br/3.br-backup-data/#br","text":"\u6210\u529f\u5b89\u88c5 BR \u5de5\u5177\u540e\uff0c\u53ef\u4ee5\u5907\u4efd\u6574\u4e2a\u56fe\u7a7a\u95f4\u7684\u6570\u636e\uff0c\u672c\u6587\u4ecb\u7ecd\u5982\u4f55\u4f7f\u7528 BR \u5907\u4efd\u6570\u636e\u3002","title":"\u4f7f\u7528 BR \u5907\u4efd\u6570\u636e"},{"location":"backup-and-restore/nebula-br/3.br-backup-data/#_1","text":"\u5b89\u88c5 BR \u548c Agent \u5e76\u5728\u96c6\u7fa4\u4e2d\u7684\u6bcf\u4e2a\u4e3b\u673a\u4e0a\u8fd0\u884c Agent\u3002 \u786e\u8ba4NebulaGraph\u670d\u52a1\u6b63\u5728\u8fd0\u884c\u4e2d\u3002 \u5982\u679c\u5728\u672c\u5730\u4fdd\u5b58\u5907\u4efd\u6587\u4ef6\uff0c\u9700\u8981\u5728 Meta \u670d\u52a1\u5668\u3001Storage \u670d\u52a1\u5668\u548c BR \u673a\u5668\u4e0a\u521b\u5efa\u7edd\u5bf9\u8def\u5f84\u76f8\u540c\u7684\u5907\u4efd\u76ee\u5f55\uff0c\u5e76\u8bb0\u5f55\u7edd\u5bf9\u8def\u5f84\uff0c\u540c\u65f6\u9700\u8981\u4fdd\u8bc1\u8d26\u53f7\u5bf9\u8be5\u76ee\u5f55\u6709\u5199\u6743\u9650\u3002 Note \u5728\u751f\u4ea7\u73af\u5883\u4e2d\uff0c\u6211\u4eec\u5efa\u8bae\u7528\u6237\u5c06 NFS (Network File System\uff09\u5b58\u50a8\u8bbe\u5907\u6302\u8f7d\u5230 Meta \u670d\u52a1\u5668\u3001Storage \u670d\u52a1\u5668\u548c BR \u673a\u5668\u4e0a\u8fdb\u884c\u672c\u5730\u5907\u4efd\uff0c\u6216\u8005\u4f7f\u7528 Alibaba Cloud OSS\u3001Amazon S3 \u8fdb\u884c\u8fdc\u7a0b\u5907\u4efd\u3002\u5426\u5219\u5f53\u9700\u8981\u901a\u8fc7\u672c\u5730\u6587\u4ef6\u6062\u590d\u6570\u636e\u65f6\uff0c\u5fc5\u987b\u624b\u52a8\u5c06\u8fd9\u4e9b\u5907\u4efd\u6587\u4ef6\u79fb\u52a8\u5230\u6307\u5b9a\u76ee\u5f55\uff0c\u4f1a\u5bfc\u81f4\u6570\u636e\u5197\u4f59\u548c\u67d0\u4e9b\u95ee\u9898\u3002\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u89c1 \u4f7f\u7528 BR \u6062\u590d\u6570\u636e \u3002","title":"\u51c6\u5907\u5de5\u4f5c"},{"location":"backup-and-restore/nebula-br/3.br-backup-data/#_2","text":"\u5728 BR \u5de5\u5177\u7684\u5b89\u88c5\u8def\u5f84\u4e0b\uff08\u7f16\u8bd1\u5b89\u88c5\u7684\u9ed8\u8ba4\u8def\u5f84\u4e3a ./bin/br \uff09\u8fd0\u884c\u4ee5\u4e0b\u547d\u4ee4\u5bf9\u6574\u4e2a\u96c6\u7fa4\u8fdb\u884c\u5168\u91cf\u5907\u4efd\u64cd\u4f5c\u3002 Note \u786e\u4fdd\u5907\u4efd\u6587\u4ef6\u7684\u8def\u5f84\u5b58\u5728\u3002 $ ./br backup full --meta <ip_address> --storage <storage_path> \u4f8b\u5982\uff1a \u8fd0\u884c\u4ee5\u4e0b\u547d\u4ee4\u5bf9 meta \u670d\u52a1\u7684\u5730\u5740\u4e3a 192.168.8.129:9559 \u7684\u6574\u4e2a\u96c6\u7fa4\u8fdb\u884c\u5168\u91cf\u5907\u4efd\u64cd\u4f5c\uff0c\u5e76\u5c06\u5907\u4efd\u6587\u4ef6\u4fdd\u5b58\u5230\u672c\u5730\u7684 /home/nebula/backup/ \u8def\u5f84\u4e0b\u3002 Caution \u5982\u679c\u6709\u591a\u4e2a metad \u5730\u5740\uff0c\u53ef\u4ee5\u4f7f\u7528\u5176\u4e2d\u4efb\u610f\u4e00\u4e2a\u3002 Caution \u5907\u4efd\u81f3\u672c\u5730\u65f6\uff0c\u9ed8\u8ba4\u53ea\u5907\u4efd leader metad \u7684\u6570\u636e\uff0c\u56e0\u6b64\u5f53\u6709\u591a\u4e2a metad \u8282\u70b9\u65f6\uff0c\u9700\u8981\u624b\u52a8\u5c06\u5907\u4efd\u540e\u7684 leader metad \u7684\u76ee\u5f55\uff08\u8def\u5f84\u4e3a <storage_path>/meta \uff09\u62f7\u8d1d\u5e76\u8986\u76d6\u5176\u4ed6 follower meatd \u8282\u70b9\u7684\u5bf9\u5e94\u76ee\u5f55\u3002 $ ./br backup full --meta \"192.168.8.129:9559\" --storage \"local:///home/nebula/backup/\" \u8fd0\u884c\u4ee5\u4e0b\u547d\u4ee4\u5bf9 meta \u670d\u52a1\u7684\u5730\u5740\u4e3a 192.168.8.129:9559 \u7684\u6574\u4e2a\u96c6\u7fa4\u8fdb\u884c\u5168\u91cf\u5907\u4efd\u64cd\u4f5c\uff0c\u5e76\u5c06\u5907\u4efd\u6587\u4ef6\u4fdd\u5b58\u5230\u517c\u5bb9 s3 \u534f\u8bae\u7684\u5bf9\u8c61\u5b58\u50a8\u670d\u52a1 br-test \u6876\u4e0b\u7684 backup \u4e2d\u3002 $ ./br backup full --meta \"192.168.8.129:9559\" --s3.endpoint \"http://192.168.8.129:9000\" --storage = \"s3://br-test/backup/\" --s3.access_key = minioadmin --s3.secret_key = minioadmin --s3.region = default \u4ee5\u4e0b\u5217\u51fa\u547d\u4ee4\u7684\u76f8\u5173\u53c2\u6570\u3002 \u53c2\u6570 \u6570\u636e\u7c7b\u578b \u662f\u5426\u5fc5\u9700 \u9ed8\u8ba4\u503c \u8bf4\u660e -h , --help - \u5426 \u65e0 \u67e5\u770b\u5e2e\u52a9\u3002 --debug - \u5426 \u65e0 \u67e5\u770b\u66f4\u591a\u65e5\u5fd7\u4fe1\u606f\u3002 --log string \u5426 \"br.log\" \u65e5\u5fd7\u8def\u5f84\u3002 --meta string \u662f \u65e0 meta \u670d\u52a1\u7684\u5730\u5740\u548c\u7aef\u53e3\u53f7\u3002 --spaces stringArray \u5426 \u65e0 \uff08\u5b9e\u9a8c\u6027\u529f\u80fd\uff09\u6307\u5b9a\u8981\u5907\u4efd\u7684\u56fe\u7a7a\u95f4\u540d\u5b57\uff0c\u672a\u6307\u5b9a\u5c06\u5907\u4efd\u6240\u6709\u56fe\u7a7a\u95f4\u3002\u53ef\u6307\u5b9a\u591a\u4e2a\u56fe\u7a7a\u95f4\uff0c\u7528\u6cd5\u4e3a --spaces nba_01 --spaces nba_02 \u3002 --storage string \u662f \u65e0 BR \u5907\u4efd\u6570\u636e\u5b58\u50a8\u4f4d\u7f6e\uff0c\u683c\u5f0f\u4e3a\uff1a <Schema>://<PATH> Schema\uff1a\u53ef\u9009\u503c\u4e3a local \u548c s3 \u3002\u9009\u62e9 s3 \u65f6\uff0c\u9700\u8981\u586b\u5199 s3.access_key \u3001 s3.endpoint \u3001 s3.region \u548c s3.secret_key \u3002 PATH\uff1a\u5b58\u50a8\u4f4d\u7f6e\u7684\u8def\u5f84\u3002 --s3.access_key string \u5426 \u65e0 \u7528\u4e8e\u6807\u8bc6\u7528\u6237\u3002 --s3.endpoint string \u5426 \u65e0 S3 \u5bf9\u5916\u670d\u52a1\u7684\u8bbf\u95ee\u57df\u540d\u7684 URL\uff0c\u6307\u5b9a http \u6216 https\u3002 --s3.region string \u5426 \u65e0 \u6570\u636e\u4e2d\u5fc3\u6240\u5728\u7269\u7406\u4f4d\u7f6e\u3002 --s3.secret_key string \u5426 \u65e0 \u7528\u6237\u7528\u4e8e\u52a0\u5bc6\u7b7e\u540d\u5b57\u7b26\u4e32\u548c\u7528\u6765\u9a8c\u8bc1\u7b7e\u540d\u5b57\u7b26\u4e32\u7684\u5bc6\u94a5\uff0c\u5fc5\u987b\u4fdd\u5bc6\u3002","title":"\u64cd\u4f5c\u6b65\u9aa4"},{"location":"backup-and-restore/nebula-br/3.br-backup-data/#_3","text":"\u5907\u4efd\u6587\u4ef6\u751f\u6210\u540e\uff0c\u53ef\u4ee5\u4f7f\u7528 BR \u5c06\u5907\u4efd\u6587\u4ef6\u7684\u6570\u636e\u6062\u590d\u5230NebulaGraph\u4e2d\u3002\u5177\u4f53\u64cd\u4f5c\uff0c\u8bf7\u53c2\u89c1 \u4f7f\u7528 BR \u6062\u590d\u6570\u636e \u3002","title":"\u4e0b\u4e00\u6b65"},{"location":"backup-and-restore/nebula-br/4.br-restore-data/","text":"\u4f7f\u7528 BR \u6062\u590d\u6570\u636e \u00b6 \u5982\u679c\u4f7f\u7528 BR \u5907\u4efd\u4e86NebulaGraph\u7684\u6570\u636e\uff0c\u53ef\u4ee5\u901a\u8fc7\u5907\u4efd\u6587\u4ef6\u8fdb\u884c\u6570\u636e\u6062\u590d\u3002\u672c\u6587\u4ecb\u7ecd\u5982\u4f55\u901a\u8fc7\u5907\u4efd\u6587\u4ef6\u6062\u590d\u6570\u636e\u3002 Caution \u6062\u590d\u6267\u884c\u6210\u529f\u540e\uff0c\u76ee\u6807\u96c6\u7fa4\u4e0a\u5df2\u6709\u7684\u6570\u636e\u4f1a\u88ab\u5220\u9664\uff0c\u7136\u540e\u66ff\u6362\u4e3a\u5907\u4efd\u6587\u4ef6\u4e2d\u7684\u6570\u636e\u3002\u5efa\u8bae\u63d0\u524d\u5907\u4efd\u76ee\u6807\u96c6\u7fa4\u4e0a\u7684\u6570\u636e\u3002 Caution \u6570\u636e\u6062\u590d\u9700\u8981\u79bb\u7ebf\u8fdb\u884c\u3002 \u51c6\u5907\u5de5\u4f5c \u00b6 \u5b89\u88c5 BR \u548c Agent \u5e76\u5728\u96c6\u7fa4\u4e2d\u7684\u6bcf\u4e2a\u4e3b\u673a\u4e0a\u8fd0\u884c Agent\u3002 \u786e\u8ba4\u6ca1\u6709\u5e94\u7528\u7a0b\u5e8f\u8fde\u63a5\u5230\u5f85\u6062\u590d\u6570\u636e\u7684NebulaGraph\u96c6\u7fa4\u3002 \u786e\u8ba4\u96c6\u7fa4\u7684\u62d3\u6251\u7ed3\u6784\u4e00\u81f4\uff0c\u5373\u539f\u96c6\u7fa4\u548c\u76ee\u6807\u96c6\u7fa4\u7684\u4e3b\u673a\u6570\u91cf\u4e00\u81f4\uff0c\u4e14\u6bcf\u4e2a\u4e3b\u673a\u6570\u636e\u6587\u4ef6\u5939\u6570\u91cf\u5206\u5e03\u4e00\u81f4\u3002 \u64cd\u4f5c\u6b65\u9aa4 \u00b6 \u5728 BR \u5de5\u5177\u7684\u5b89\u88c5\u8def\u5f84\u4e0b\uff08\u7f16\u8bd1\u5b89\u88c5\u7684\u9ed8\u8ba4\u8def\u5f84\u4e3a ./bin/br \uff09\uff0c\u5b8c\u6210\u4ee5\u4e0b\u64cd\u4f5c\u3002 \u7528\u6237\u53ef\u4ee5\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\u5217\u51fa\u73b0\u6709\u5907\u4efd\u4fe1\u606f\uff1a $ ./br show --storage <storage_path> \u4f8b\u5982\uff0c\u53ef\u4ee5\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\u5217\u51fa\u5728\u672c\u5730 /home/nebula/backup \u8def\u5f84\u4e2d\u7684\u5907\u4efd\u7684\u4fe1\u606f\u3002 $ ./br show --storage \"local:///home/nebula/backup\" +----------------------------+---------------------+------------------------+-------------+------------+ | NAME | CREATE TIME | SPACES | FULL BACKUP | ALL SPACES | +----------------------------+---------------------+------------------------+-------------+------------+ | BACKUP_2022_02_10_07_40_41 | 2022 -02-10 07 :40:41 | basketballplayer | true | true | | BACKUP_2022_02_11_08_26_43 | 2022 -02-11 08 :26:47 | basketballplayer,foesa | true | true | +----------------------------+---------------------+------------------------+-------------+------------+ \u6216\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\u5217\u51fa\u5728\u517c\u5bb9 s3 \u534f\u8bae\u7684\u5bf9\u8c61\u5b58\u50a8\u670d\u52a1 br-test \u6876\u4e0b\u7684 backup \u4e2d\u7684\u5907\u4efd\u7684\u4fe1\u606f\u3002 $ ./br show --s3.endpoint \"http://192.168.8.129:9000\" --storage = \"s3://br-test/backup/\" --s3.access_key = minioadmin --s3.secret_key = minioadmin --s3.region = default \u4ee5\u4e0b\u5217\u51fa\u547d\u4ee4\u7684\u76f8\u5173\u53c2\u6570\u3002 \u53c2\u6570 \u6570\u636e\u7c7b\u578b \u662f\u5426\u5fc5\u9700 \u9ed8\u8ba4\u503c \u8bf4\u660e -h,-help - \u5426 \u65e0 \u67e5\u770b\u5e2e\u52a9\u3002 --debug - \u5426 \u65e0 \u67e5\u770b\u66f4\u591a\u65e5\u5fd7\u4fe1\u606f\u3002 --log string \u5426 \"br.log\" \u65e5\u5fd7\u8def\u5f84\u3002 --storage string \u662f \u65e0 BR \u5907\u4efd\u6570\u636e\u5b58\u50a8\u4f4d\u7f6e\uff0c\u683c\u5f0f\u4e3a\uff1a<Schema>://<PATH> Schema\uff1a\u53ef\u9009\u503c\u4e3a local \u548c s3 \u3002\u9009\u62e9 s3 \u65f6\uff0c\u9700\u8981\u586b\u5199 s3.access_key \u3001 s3.endpoint \u3001 s3.region \u548c s3.secret_key \u3002 PATH\uff1a\u5b58\u50a8\u4f4d\u7f6e\u7684\u8def\u5f84\u3002 --s3.access_key string \u5426 \u65e0 \u7528\u4e8e\u6807\u8bc6\u7528\u6237\u3002 --s3.endpoint string \u5426 \u65e0 S3 \u5bf9\u5916\u670d\u52a1\u7684\u8bbf\u95ee\u57df\u540d\u7684 URL\uff0c\u6307\u5b9a http \u6216 https\u3002 --s3.region string \u5426 \u65e0 \u6570\u636e\u4e2d\u5fc3\u6240\u5728\u7269\u7406\u4f4d\u7f6e\u3002 --s3.secret_key string \u5426 \u65e0 \u7528\u6237\u7528\u4e8e\u52a0\u5bc6\u7b7e\u540d\u5b57\u7b26\u4e32\u548c\u7528\u6765\u9a8c\u8bc1\u7b7e\u540d\u5b57\u7b26\u4e32\u7684\u5bc6\u94a5\uff0c\u5fc5\u987b\u4fdd\u5bc6\u3002 \u7528\u6237\u53ef\u4ee5\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\u6062\u590d\u6570\u636e\uff1a $ ./br restore full --meta <ip_address> --storage <storage_path> --name <backup_name> \u4f8b\u5982\uff0c\u53ef\u4ee5\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\uff0c\u5c06\u672c\u5730 /home/nebula/backup/ \u8def\u5f84\u4e2d\u7684\u6570\u636e\u6062\u590d\u5230\u4e3a meta \u5730\u5740\u4e3a 192.168.8.129:9559 \u96c6\u7fa4\u4e2d\uff1a $ ./br restore full --meta \"192.168.8.129:9559\" --storage \"local:///home/nebula/backup/\" --name BACKUP_2021_12_08_18_38_08 \u6216\u8005\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\uff0c\u5c06\u517c\u5bb9 s3 \u534f\u8bae\u7684\u5bf9\u8c61\u5b58\u50a8\u670d\u52a1 br-test \u6876\u4e0b\u7684 backup \u7684\u5907\u4efd\uff0c\u6062\u590d\u5230 meta \u670d\u52a1\u7684\u5730\u5740\u4e3a 192.168.8.129:9559 \u7684\u96c6\u7fa4\u4e2d\u3002 $ ./br restore full --meta \"192.168.8.129:9559\" --s3.endpoint \"http://192.168.8.129:9000\" --storage = \"s3://br-test/backup/\" --s3.access_key = minioadmin --s3.secret_key = minioadmin --s3.region = \"default\" --name BACKUP_2021_12_08_18_38_08 \u5982\u679c\u8fd4\u56de\u5982\u4e0b\u4fe1\u606f\uff0c\u8868\u793a\u6570\u636e\u5df2\u7ecf\u6062\u590d\u6210\u529f\u3002 Restore succeed. Caution \u5982\u679c\u7528\u6237\u65b0\u96c6\u7fa4\u7684IP\u548c\u5907\u4efd\u96c6\u7fa4\u4e0d\u540c\uff0c\u5728\u6062\u590d\u96c6\u7fa4\u540e\u9700\u8981\u4f7f\u7528 add host \u5411\u65b0\u96c6\u7fa4\u4e2d\u6dfb\u52a0 Storage \u4e3b\u673a\u3002 \u4ee5\u4e0b\u5217\u51fa\u547d\u4ee4\u7684\u76f8\u5173\u53c2\u6570\u3002 \u53c2\u6570 \u6570\u636e\u7c7b\u578b \u662f\u5426\u5fc5\u9700 \u9ed8\u8ba4\u503c \u8bf4\u660e -h,-help - \u5426 - \u67e5\u770b\u5e2e\u52a9\u3002 --debug - \u5426 \u65e0 \u67e5\u770b\u66f4\u591a\u65e5\u5fd7\u4fe1\u606f\u3002 --log string \u5426 \"br.log\" \u65e5\u5fd7\u8def\u5f84\u3002 --meta string \u662f \u65e0 meta \u670d\u52a1\u7684\u5730\u5740\u548c\u7aef\u53e3\u53f7\u3002 --name string \u662f \u65e0 \u5907\u4efd\u540d\u5b57\u3002 --storage string \u662f \u65e0 BR \u5907\u4efd\u6570\u636e\u5b58\u50a8\u4f4d\u7f6e\uff0c\u683c\u5f0f\u4e3a\uff1a<Schema>://<PATH> Schema\uff1a\u53ef\u9009\u503c\u4e3a local \u548c s3 \u3002\u9009\u62e9 s3 \u65f6\uff0c\u9700\u8981\u586b\u5199 s3.access_key \u3001 s3.endpoint \u3001 s3.region \u548c s3.secret_key \u3002 PATH\uff1a\u5b58\u50a8\u4f4d\u7f6e\u7684\u8def\u5f84\u3002 --s3.access_key string \u5426 \u65e0 \u7528\u4e8e\u6807\u8bc6\u7528\u6237\u3002 --s3.endpoint string \u5426 \u65e0 S3 \u5bf9\u5916\u670d\u52a1\u7684\u8bbf\u95ee\u57df\u540d\u7684 URL\uff0c\u6307\u5b9a http \u6216 https\u3002 --s3.region string \u5426 \u65e0 \u6570\u636e\u4e2d\u5fc3\u6240\u5728\u7269\u7406\u4f4d\u7f6e\u3002 --s3.secret_key string \u5426 \u65e0 \u7528\u6237\u7528\u4e8e\u52a0\u5bc6\u7b7e\u540d\u5b57\u7b26\u4e32\u548c\u7528\u6765\u9a8c\u8bc1\u7b7e\u540d\u5b57\u7b26\u4e32\u7684\u5bc6\u94a5\uff0c\u5fc5\u987b\u4fdd\u5bc6\u3002 \u5982\u679c\u5728\u5907\u4efd\u671f\u95f4\u53d1\u73b0\u4efb\u4f55\u9519\u8bef\uff0c\u7528\u6237\u53ef\u4ee5\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\u6e05\u7406\u4e34\u65f6\u6587\u4ef6\u3002\u8be5\u547d\u4ee4\u5c06\u6e05\u7406\u96c6\u7fa4\u548c\u5916\u90e8\u5b58\u50a8\u4e2d\u7684\u6587\u4ef6\uff0c\u540c\u65f6\u7528\u6237\u4e5f\u53ef\u4ee5\u4f7f\u7528\u8be5\u547d\u4ee4\u6e05\u7406\u5916\u90e8\u5b58\u50a8\u4e2d\u7684\u65e7\u7684\u5907\u4efd\u6587\u4ef6\u3002 $ ./br cleanup --meta <ip_address> --storage <storage_path> --name <backup_name> \u4ee5\u4e0b\u5217\u51fa\u547d\u4ee4\u7684\u76f8\u5173\u53c2\u6570\u3002 \u53c2\u6570 \u6570\u636e\u7c7b\u578b \u662f\u5426\u5fc5\u9700 \u9ed8\u8ba4\u503c \u8bf4\u660e -h,-help - \u5426 - \u67e5\u770b\u5e2e\u52a9\u3002 --debug - \u5426 \u65e0 \u67e5\u770b\u66f4\u591a\u65e5\u5fd7\u4fe1\u606f\u3002 --log string \u5426 \"br.log\" \u65e5\u5fd7\u8def\u5f84\u3002 --meta string \u662f \u65e0 meta \u670d\u52a1\u7684\u5730\u5740\u548c\u7aef\u53e3\u53f7\u3002 --name string \u662f \u65e0 \u5907\u4efd\u540d\u5b57\u3002 --storage string \u662f \u65e0 BR \u5907\u4efd\u6570\u636e\u5b58\u50a8\u4f4d\u7f6e\uff0c\u683c\u5f0f\u4e3a\uff1a<Schema>://<PATH> Schema\uff1a\u53ef\u9009\u503c\u4e3a local \u548c s3 \u3002\u9009\u62e9 s3 \u65f6\uff0c\u9700\u8981\u586b\u5199 s3.access_key \u3001 s3.endpoint \u3001 s3.region \u548c s3.secret_key \u3002 PATH\uff1a\u5b58\u50a8\u4f4d\u7f6e\u7684\u8def\u5f84\u3002 --s3.access_key string \u5426 \u65e0 \u7528\u4e8e\u6807\u8bc6\u7528\u6237\u3002 --s3.endpoint string \u5426 \u65e0 S3 \u5bf9\u5916\u670d\u52a1\u7684\u8bbf\u95ee\u57df\u540d\u7684 URL\uff0c\u6307\u5b9a http \u6216 https\u3002 --s3.region string \u5426 \u65e0 \u6570\u636e\u4e2d\u5fc3\u6240\u5728\u7269\u7406\u4f4d\u7f6e\u3002 --s3.secret_key string \u5426 \u65e0 \u7528\u6237\u7528\u4e8e\u52a0\u5bc6\u7b7e\u540d\u5b57\u7b26\u4e32\u548c\u7528\u6765\u9a8c\u8bc1\u7b7e\u540d\u5b57\u7b26\u4e32\u7684\u5bc6\u94a5\uff0c\u5fc5\u987b\u4fdd\u5bc6\u3002","title":"\u4f7f\u7528 BR \u6062\u590d\u6570\u636e"},{"location":"backup-and-restore/nebula-br/4.br-restore-data/#br","text":"\u5982\u679c\u4f7f\u7528 BR \u5907\u4efd\u4e86NebulaGraph\u7684\u6570\u636e\uff0c\u53ef\u4ee5\u901a\u8fc7\u5907\u4efd\u6587\u4ef6\u8fdb\u884c\u6570\u636e\u6062\u590d\u3002\u672c\u6587\u4ecb\u7ecd\u5982\u4f55\u901a\u8fc7\u5907\u4efd\u6587\u4ef6\u6062\u590d\u6570\u636e\u3002 Caution \u6062\u590d\u6267\u884c\u6210\u529f\u540e\uff0c\u76ee\u6807\u96c6\u7fa4\u4e0a\u5df2\u6709\u7684\u6570\u636e\u4f1a\u88ab\u5220\u9664\uff0c\u7136\u540e\u66ff\u6362\u4e3a\u5907\u4efd\u6587\u4ef6\u4e2d\u7684\u6570\u636e\u3002\u5efa\u8bae\u63d0\u524d\u5907\u4efd\u76ee\u6807\u96c6\u7fa4\u4e0a\u7684\u6570\u636e\u3002 Caution \u6570\u636e\u6062\u590d\u9700\u8981\u79bb\u7ebf\u8fdb\u884c\u3002","title":"\u4f7f\u7528 BR \u6062\u590d\u6570\u636e"},{"location":"backup-and-restore/nebula-br/4.br-restore-data/#_1","text":"\u5b89\u88c5 BR \u548c Agent \u5e76\u5728\u96c6\u7fa4\u4e2d\u7684\u6bcf\u4e2a\u4e3b\u673a\u4e0a\u8fd0\u884c Agent\u3002 \u786e\u8ba4\u6ca1\u6709\u5e94\u7528\u7a0b\u5e8f\u8fde\u63a5\u5230\u5f85\u6062\u590d\u6570\u636e\u7684NebulaGraph\u96c6\u7fa4\u3002 \u786e\u8ba4\u96c6\u7fa4\u7684\u62d3\u6251\u7ed3\u6784\u4e00\u81f4\uff0c\u5373\u539f\u96c6\u7fa4\u548c\u76ee\u6807\u96c6\u7fa4\u7684\u4e3b\u673a\u6570\u91cf\u4e00\u81f4\uff0c\u4e14\u6bcf\u4e2a\u4e3b\u673a\u6570\u636e\u6587\u4ef6\u5939\u6570\u91cf\u5206\u5e03\u4e00\u81f4\u3002","title":"\u51c6\u5907\u5de5\u4f5c"},{"location":"backup-and-restore/nebula-br/4.br-restore-data/#_2","text":"\u5728 BR \u5de5\u5177\u7684\u5b89\u88c5\u8def\u5f84\u4e0b\uff08\u7f16\u8bd1\u5b89\u88c5\u7684\u9ed8\u8ba4\u8def\u5f84\u4e3a ./bin/br \uff09\uff0c\u5b8c\u6210\u4ee5\u4e0b\u64cd\u4f5c\u3002 \u7528\u6237\u53ef\u4ee5\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\u5217\u51fa\u73b0\u6709\u5907\u4efd\u4fe1\u606f\uff1a $ ./br show --storage <storage_path> \u4f8b\u5982\uff0c\u53ef\u4ee5\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\u5217\u51fa\u5728\u672c\u5730 /home/nebula/backup \u8def\u5f84\u4e2d\u7684\u5907\u4efd\u7684\u4fe1\u606f\u3002 $ ./br show --storage \"local:///home/nebula/backup\" +----------------------------+---------------------+------------------------+-------------+------------+ | NAME | CREATE TIME | SPACES | FULL BACKUP | ALL SPACES | +----------------------------+---------------------+------------------------+-------------+------------+ | BACKUP_2022_02_10_07_40_41 | 2022 -02-10 07 :40:41 | basketballplayer | true | true | | BACKUP_2022_02_11_08_26_43 | 2022 -02-11 08 :26:47 | basketballplayer,foesa | true | true | +----------------------------+---------------------+------------------------+-------------+------------+ \u6216\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\u5217\u51fa\u5728\u517c\u5bb9 s3 \u534f\u8bae\u7684\u5bf9\u8c61\u5b58\u50a8\u670d\u52a1 br-test \u6876\u4e0b\u7684 backup \u4e2d\u7684\u5907\u4efd\u7684\u4fe1\u606f\u3002 $ ./br show --s3.endpoint \"http://192.168.8.129:9000\" --storage = \"s3://br-test/backup/\" --s3.access_key = minioadmin --s3.secret_key = minioadmin --s3.region = default \u4ee5\u4e0b\u5217\u51fa\u547d\u4ee4\u7684\u76f8\u5173\u53c2\u6570\u3002 \u53c2\u6570 \u6570\u636e\u7c7b\u578b \u662f\u5426\u5fc5\u9700 \u9ed8\u8ba4\u503c \u8bf4\u660e -h,-help - \u5426 \u65e0 \u67e5\u770b\u5e2e\u52a9\u3002 --debug - \u5426 \u65e0 \u67e5\u770b\u66f4\u591a\u65e5\u5fd7\u4fe1\u606f\u3002 --log string \u5426 \"br.log\" \u65e5\u5fd7\u8def\u5f84\u3002 --storage string \u662f \u65e0 BR \u5907\u4efd\u6570\u636e\u5b58\u50a8\u4f4d\u7f6e\uff0c\u683c\u5f0f\u4e3a\uff1a<Schema>://<PATH> Schema\uff1a\u53ef\u9009\u503c\u4e3a local \u548c s3 \u3002\u9009\u62e9 s3 \u65f6\uff0c\u9700\u8981\u586b\u5199 s3.access_key \u3001 s3.endpoint \u3001 s3.region \u548c s3.secret_key \u3002 PATH\uff1a\u5b58\u50a8\u4f4d\u7f6e\u7684\u8def\u5f84\u3002 --s3.access_key string \u5426 \u65e0 \u7528\u4e8e\u6807\u8bc6\u7528\u6237\u3002 --s3.endpoint string \u5426 \u65e0 S3 \u5bf9\u5916\u670d\u52a1\u7684\u8bbf\u95ee\u57df\u540d\u7684 URL\uff0c\u6307\u5b9a http \u6216 https\u3002 --s3.region string \u5426 \u65e0 \u6570\u636e\u4e2d\u5fc3\u6240\u5728\u7269\u7406\u4f4d\u7f6e\u3002 --s3.secret_key string \u5426 \u65e0 \u7528\u6237\u7528\u4e8e\u52a0\u5bc6\u7b7e\u540d\u5b57\u7b26\u4e32\u548c\u7528\u6765\u9a8c\u8bc1\u7b7e\u540d\u5b57\u7b26\u4e32\u7684\u5bc6\u94a5\uff0c\u5fc5\u987b\u4fdd\u5bc6\u3002 \u7528\u6237\u53ef\u4ee5\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\u6062\u590d\u6570\u636e\uff1a $ ./br restore full --meta <ip_address> --storage <storage_path> --name <backup_name> \u4f8b\u5982\uff0c\u53ef\u4ee5\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\uff0c\u5c06\u672c\u5730 /home/nebula/backup/ \u8def\u5f84\u4e2d\u7684\u6570\u636e\u6062\u590d\u5230\u4e3a meta \u5730\u5740\u4e3a 192.168.8.129:9559 \u96c6\u7fa4\u4e2d\uff1a $ ./br restore full --meta \"192.168.8.129:9559\" --storage \"local:///home/nebula/backup/\" --name BACKUP_2021_12_08_18_38_08 \u6216\u8005\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\uff0c\u5c06\u517c\u5bb9 s3 \u534f\u8bae\u7684\u5bf9\u8c61\u5b58\u50a8\u670d\u52a1 br-test \u6876\u4e0b\u7684 backup \u7684\u5907\u4efd\uff0c\u6062\u590d\u5230 meta \u670d\u52a1\u7684\u5730\u5740\u4e3a 192.168.8.129:9559 \u7684\u96c6\u7fa4\u4e2d\u3002 $ ./br restore full --meta \"192.168.8.129:9559\" --s3.endpoint \"http://192.168.8.129:9000\" --storage = \"s3://br-test/backup/\" --s3.access_key = minioadmin --s3.secret_key = minioadmin --s3.region = \"default\" --name BACKUP_2021_12_08_18_38_08 \u5982\u679c\u8fd4\u56de\u5982\u4e0b\u4fe1\u606f\uff0c\u8868\u793a\u6570\u636e\u5df2\u7ecf\u6062\u590d\u6210\u529f\u3002 Restore succeed. Caution \u5982\u679c\u7528\u6237\u65b0\u96c6\u7fa4\u7684IP\u548c\u5907\u4efd\u96c6\u7fa4\u4e0d\u540c\uff0c\u5728\u6062\u590d\u96c6\u7fa4\u540e\u9700\u8981\u4f7f\u7528 add host \u5411\u65b0\u96c6\u7fa4\u4e2d\u6dfb\u52a0 Storage \u4e3b\u673a\u3002 \u4ee5\u4e0b\u5217\u51fa\u547d\u4ee4\u7684\u76f8\u5173\u53c2\u6570\u3002 \u53c2\u6570 \u6570\u636e\u7c7b\u578b \u662f\u5426\u5fc5\u9700 \u9ed8\u8ba4\u503c \u8bf4\u660e -h,-help - \u5426 - \u67e5\u770b\u5e2e\u52a9\u3002 --debug - \u5426 \u65e0 \u67e5\u770b\u66f4\u591a\u65e5\u5fd7\u4fe1\u606f\u3002 --log string \u5426 \"br.log\" \u65e5\u5fd7\u8def\u5f84\u3002 --meta string \u662f \u65e0 meta \u670d\u52a1\u7684\u5730\u5740\u548c\u7aef\u53e3\u53f7\u3002 --name string \u662f \u65e0 \u5907\u4efd\u540d\u5b57\u3002 --storage string \u662f \u65e0 BR \u5907\u4efd\u6570\u636e\u5b58\u50a8\u4f4d\u7f6e\uff0c\u683c\u5f0f\u4e3a\uff1a<Schema>://<PATH> Schema\uff1a\u53ef\u9009\u503c\u4e3a local \u548c s3 \u3002\u9009\u62e9 s3 \u65f6\uff0c\u9700\u8981\u586b\u5199 s3.access_key \u3001 s3.endpoint \u3001 s3.region \u548c s3.secret_key \u3002 PATH\uff1a\u5b58\u50a8\u4f4d\u7f6e\u7684\u8def\u5f84\u3002 --s3.access_key string \u5426 \u65e0 \u7528\u4e8e\u6807\u8bc6\u7528\u6237\u3002 --s3.endpoint string \u5426 \u65e0 S3 \u5bf9\u5916\u670d\u52a1\u7684\u8bbf\u95ee\u57df\u540d\u7684 URL\uff0c\u6307\u5b9a http \u6216 https\u3002 --s3.region string \u5426 \u65e0 \u6570\u636e\u4e2d\u5fc3\u6240\u5728\u7269\u7406\u4f4d\u7f6e\u3002 --s3.secret_key string \u5426 \u65e0 \u7528\u6237\u7528\u4e8e\u52a0\u5bc6\u7b7e\u540d\u5b57\u7b26\u4e32\u548c\u7528\u6765\u9a8c\u8bc1\u7b7e\u540d\u5b57\u7b26\u4e32\u7684\u5bc6\u94a5\uff0c\u5fc5\u987b\u4fdd\u5bc6\u3002 \u5982\u679c\u5728\u5907\u4efd\u671f\u95f4\u53d1\u73b0\u4efb\u4f55\u9519\u8bef\uff0c\u7528\u6237\u53ef\u4ee5\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\u6e05\u7406\u4e34\u65f6\u6587\u4ef6\u3002\u8be5\u547d\u4ee4\u5c06\u6e05\u7406\u96c6\u7fa4\u548c\u5916\u90e8\u5b58\u50a8\u4e2d\u7684\u6587\u4ef6\uff0c\u540c\u65f6\u7528\u6237\u4e5f\u53ef\u4ee5\u4f7f\u7528\u8be5\u547d\u4ee4\u6e05\u7406\u5916\u90e8\u5b58\u50a8\u4e2d\u7684\u65e7\u7684\u5907\u4efd\u6587\u4ef6\u3002 $ ./br cleanup --meta <ip_address> --storage <storage_path> --name <backup_name> \u4ee5\u4e0b\u5217\u51fa\u547d\u4ee4\u7684\u76f8\u5173\u53c2\u6570\u3002 \u53c2\u6570 \u6570\u636e\u7c7b\u578b \u662f\u5426\u5fc5\u9700 \u9ed8\u8ba4\u503c \u8bf4\u660e -h,-help - \u5426 - \u67e5\u770b\u5e2e\u52a9\u3002 --debug - \u5426 \u65e0 \u67e5\u770b\u66f4\u591a\u65e5\u5fd7\u4fe1\u606f\u3002 --log string \u5426 \"br.log\" \u65e5\u5fd7\u8def\u5f84\u3002 --meta string \u662f \u65e0 meta \u670d\u52a1\u7684\u5730\u5740\u548c\u7aef\u53e3\u53f7\u3002 --name string \u662f \u65e0 \u5907\u4efd\u540d\u5b57\u3002 --storage string \u662f \u65e0 BR \u5907\u4efd\u6570\u636e\u5b58\u50a8\u4f4d\u7f6e\uff0c\u683c\u5f0f\u4e3a\uff1a<Schema>://<PATH> Schema\uff1a\u53ef\u9009\u503c\u4e3a local \u548c s3 \u3002\u9009\u62e9 s3 \u65f6\uff0c\u9700\u8981\u586b\u5199 s3.access_key \u3001 s3.endpoint \u3001 s3.region \u548c s3.secret_key \u3002 PATH\uff1a\u5b58\u50a8\u4f4d\u7f6e\u7684\u8def\u5f84\u3002 --s3.access_key string \u5426 \u65e0 \u7528\u4e8e\u6807\u8bc6\u7528\u6237\u3002 --s3.endpoint string \u5426 \u65e0 S3 \u5bf9\u5916\u670d\u52a1\u7684\u8bbf\u95ee\u57df\u540d\u7684 URL\uff0c\u6307\u5b9a http \u6216 https\u3002 --s3.region string \u5426 \u65e0 \u6570\u636e\u4e2d\u5fc3\u6240\u5728\u7269\u7406\u4f4d\u7f6e\u3002 --s3.secret_key string \u5426 \u65e0 \u7528\u6237\u7528\u4e8e\u52a0\u5bc6\u7b7e\u540d\u5b57\u7b26\u4e32\u548c\u7528\u6765\u9a8c\u8bc1\u7b7e\u540d\u5b57\u7b26\u4e32\u7684\u5bc6\u94a5\uff0c\u5fc5\u987b\u4fdd\u5bc6\u3002","title":"\u64cd\u4f5c\u6b65\u9aa4"},{"location":"graph-computing/nebula-algorithm/","text":"NebulaGraph Algorithm \u00b6 NebulaGraph Algorithm \uff08\u7b80\u79f0 Algorithm\uff09\u662f\u4e00\u6b3e\u57fa\u4e8e GraphX \u7684 Spark \u5e94\u7528\u7a0b\u5e8f\uff0c\u901a\u8fc7\u63d0\u4ea4 Spark \u4efb\u52a1\u7684\u5f62\u5f0f\u4f7f\u7528\u5b8c\u6574\u7684\u7b97\u6cd5\u5de5\u5177\u5bf9NebulaGraph\u6570\u636e\u5e93\u4e2d\u7684\u6570\u636e\u6267\u884c\u56fe\u8ba1\u7b97\uff0c\u4e5f\u53ef\u4ee5\u901a\u8fc7\u7f16\u7a0b\u5f62\u5f0f\u8c03\u7528 lib \u5e93\u4e0b\u7684\u7b97\u6cd5\u9488\u5bf9 DataFrame \u6267\u884c\u56fe\u8ba1\u7b97\u3002 \u7248\u672c\u517c\u5bb9\u6027 \u00b6 NebulaGraph Algorithm \u7248\u672c\u548cNebulaGraph\u5185\u6838\u7684\u7248\u672c\u5bf9\u5e94\u5173\u7cfb\u5982\u4e0b\u3002 NebulaGraph\u7248\u672c NebulaGraph Algorithm \u7248\u672c nightly 3.0-SNAPSHOT 3.0.0 ~ 3.6.x 3.x.0 2.6.x 2.6.x 2.5.0\u30012.5.1 2.5.0 2.0.0\u30012.0.1 2.1.0 \u524d\u63d0\u6761\u4ef6 \u00b6 \u5728\u4f7f\u7528 Algorithm \u4e4b\u524d\uff0c\u7528\u6237\u9700\u8981\u786e\u8ba4\u4ee5\u4e0b\u4fe1\u606f\uff1a NebulaGraph\u670d\u52a1\u5df2\u7ecf\u90e8\u7f72\u5e76\u542f\u52a8\u3002\u8be6\u7ec6\u4fe1\u606f\uff0c\u53c2\u8003 NebulaGraph\u5b89\u88c5\u90e8\u7f72 \u3002 Spark \u7248\u672c\u4e3a 2.4.x\u3002 Scala \u7248\u672c\u4e3a 2.11\u3002 \uff08\u53ef\u9009\uff09\u5982\u679c\u7528\u6237\u9700\u8981\u5728 Github \u4e2d\u514b\u9686\u6700\u65b0\u7684 Algorithm\uff0c\u5e76\u81ea\u884c\u7f16\u8bd1\u6253\u5305\uff0c\u53ef\u4ee5\u9009\u62e9\u5b89\u88c5 Maven \u3002 \u4f7f\u7528\u9650\u5236 \u00b6 \u56fe\u8ba1\u7b97\u4f1a\u8f93\u51fa\u70b9\u7684\u6570\u636e\u96c6\uff0c\u7b97\u6cd5\u7ed3\u679c\u4f1a\u4ee5DataFrame\u5f62\u5f0f\u4f5c\u4e3a\u70b9\u7684\u5c5e\u6027\u5b58\u50a8\u3002\u7528\u6237\u53ef\u4ee5\u6839\u636e\u4e1a\u52a1\u9700\u6c42\uff0c\u81ea\u884c\u5bf9\u7b97\u6cd5\u7ed3\u679c\u505a\u8fdb\u4e00\u6b65\u64cd\u4f5c\uff0c\u4f8b\u5982\u7edf\u8ba1\u3001\u7b5b\u9009\u3002 Compatibility Algorithm v3.1.0 \u7248\u672c\u4e4b\u524d\uff0c\u76f4\u63a5\u63d0\u4ea4\u7b97\u6cd5\u5305\u65f6\uff0c\u70b9 ID \u7684\u6570\u636e\u5fc5\u987b\u4e3a\u6574\u6570\uff0c\u5373\u70b9 ID \u53ef\u4ee5\u662f INT \u7c7b\u578b\uff0c\u6216\u8005\u662f String \u7c7b\u578b\u4f46\u6570\u636e\u672c\u8eab\u4e3a\u6574\u6570\u3002 \u652f\u6301\u7b97\u6cd5 \u00b6 NebulaGraph Algorithm \u652f\u6301\u7684\u56fe\u8ba1\u7b97\u7b97\u6cd5\u5982\u4e0b\u3002 \u7b97\u6cd5\u540d \u8bf4\u660e \u5e94\u7528\u573a\u666f \u5c5e\u6027\u540d\u79f0 \u5c5e\u6027\u6570\u636e\u7c7b\u578b PageRank \u9875\u9762\u6392\u5e8f \u7f51\u9875\u6392\u5e8f\u3001\u91cd\u70b9\u8282\u70b9\u6316\u6398 pagerank double/string Louvain \u9c81\u6c76 \u793e\u56e2\u6316\u6398\u3001\u5c42\u6b21\u5316\u805a\u7c7b louvain int/string KCore K \u6838 \u793e\u533a\u53d1\u73b0\u3001\u91d1\u878d\u98ce\u63a7 kcore int/string LabelPropagation \u6807\u7b7e\u4f20\u64ad \u8d44\u8baf\u4f20\u64ad\u3001\u5e7f\u544a\u63a8\u8350\u3001\u793e\u533a\u53d1\u73b0 lpa int/string Hanp \u6807\u7b7e\u4f20\u64ad\u8fdb\u9636\u7248 \u793e\u533a\u53d1\u73b0\u3001\u63a8\u8350 hanp int/string ConnectedComponent \u5f31\u8054\u901a\u5206\u91cf \u793e\u533a\u53d1\u73b0\u3001\u5b64\u5c9b\u53d1\u73b0 cc int/string StronglyConnectedComponent \u5f3a\u8054\u901a\u5206\u91cf \u793e\u533a\u53d1\u73b0 scc int/string ShortestPath \u6700\u77ed\u8def\u5f84 \u8def\u5f84\u89c4\u5212\u3001\u7f51\u7edc\u89c4\u5212 shortestpath string TriangleCount \u4e09\u89d2\u5f62\u8ba1\u6570 \u7f51\u7edc\u7ed3\u6784\u5206\u6790 trianglecount int/string GraphTriangleCount \u5168\u56fe\u4e09\u89d2\u5f62\u8ba1\u6570 \u7f51\u7edc\u7ed3\u6784\u53ca\u7d27\u5bc6\u7a0b\u5ea6\u5206\u6790 count int BetweennessCentrality \u4e2d\u4ecb\u4e2d\u5fc3\u6027 \u5173\u952e\u8282\u70b9\u6316\u6398\uff0c\u8282\u70b9\u5f71\u54cd\u529b\u8ba1\u7b97 betweenness double/string ClosenessCentrality \u7d27\u5bc6\u4e2d\u5fc3\u6027 \u5173\u952e\u8282\u70b9\u6316\u6398\u3001\u8282\u70b9\u5f71\u54cd\u529b\u8ba1\u7b97 closeness double/string DegreeStatic \u5ea6\u7edf\u8ba1 \u56fe\u7ed3\u6784\u5206\u6790 degree,inDegree,outDegree int/string ClusteringCoefficient \u805a\u96c6\u7cfb\u6570 \u63a8\u8350\u3001\u7535\u4fe1\u8bc8\u9a97\u5206\u6790 clustercoefficient double/string Jaccard \u6770\u5361\u5fb7\u76f8\u4f3c\u5ea6\u8ba1\u7b97 \u76f8\u4f3c\u5ea6\u8ba1\u7b97\u3001\u63a8\u8350 jaccard string BFS \u5e7f\u5ea6\u4f18\u5148\u904d\u5386 \u5c42\u5e8f\u904d\u5386\u3001\u6700\u77ed\u8def\u5f84\u89c4\u5212 bfs string DFS \u6df1\u5ea6\u4f18\u5148\u904d\u5386 \u5c42\u5e8f\u904d\u5386\u3001\u6700\u77ed\u8def\u5f84\u89c4\u5212 dfs string Node2Vec - \u56fe\u5206\u7c7b node2vec string Note \u5982\u679c\u9700\u8981\u5c06\u7b97\u6cd5\u7ed3\u679c\u5199\u5165\u5230NebulaGraph\u4e2d\uff0c\u8bf7\u786e\u4fdd\u5bf9\u5e94\u56fe\u7a7a\u95f4\u4e2d\u7684 Tag \u6709\u548c\u4e0a\u8868\u5bf9\u5e94\u7684\u5c5e\u6027\u540d\u79f0\u548c\u6570\u636e\u7c7b\u578b\u3002 \u5b9e\u73b0\u65b9\u6cd5 \u00b6 NebulaGraph Algorithm \u5b9e\u73b0\u56fe\u8ba1\u7b97\u7684\u6d41\u7a0b\u5982\u4e0b\uff1a \u5229\u7528 NebulaGraph Spark Connector \u4eceNebulaGraph\u4e2d\u8bfb\u53d6\u56fe\u6570\u636e\u4e3a DataFrame\u3002 \u5c06 DataFrame \u8f6c\u6362\u4e3a GraphX \u7684\u56fe\u3002 \u8c03\u7528 GraphX \u63d0\u4f9b\u7684\u56fe\u7b97\u6cd5\uff08\u4f8b\u5982 PageRank\uff09\u6216\u8005\u81ea\u884c\u5b9e\u73b0\u7684\u7b97\u6cd5\uff08\u4f8b\u5982 Louvain \u793e\u533a\u53d1\u73b0\uff09\u3002 \u8be6\u7ec6\u7684\u5b9e\u73b0\u65b9\u6cd5\u53ef\u4ee5\u53c2\u89c1\u76f8\u5173 Scala \u6587\u4ef6 \u3002 \u83b7\u53d6 NebulaGraph Algorithm \u00b6 \u7f16\u8bd1\u6253\u5305 \u00b6 \u514b\u9686\u4ed3\u5e93 nebula-algorithm \u3002 $ git clone -b v3.0.0 https://github.com/vesoft-inc/nebula-algorithm.git \u8fdb\u5165\u76ee\u5f55 nebula-algorithm \u3002 $ cd nebula-algorithm \u7f16\u8bd1\u6253\u5305\u3002 $ mvn clean package -Dgpg.skip -Dmaven.javadoc.skip = true -Dmaven.test.skip = true \u7f16\u8bd1\u5b8c\u6210\u540e\uff0c\u5728\u76ee\u5f55 nebula-algorithm/target \u4e0b\u751f\u6210\u7c7b\u4f3c\u6587\u4ef6 nebula-algorithm-3.x.x.jar \u3002 Maven \u8fdc\u7a0b\u4ed3\u5e93\u4e0b\u8f7d \u00b6 \u4e0b\u8f7d\u5730\u5740 \u4f7f\u7528\u65b9\u6cd5 \u00b6 \u8c03\u7528\u7b97\u6cd5\u63a5\u53e3\uff08\u63a8\u8350\uff09 \u00b6 lib \u5e93\u4e2d\u63d0\u4f9b\u4e86 10 \u79cd\u5e38\u7528\u56fe\u8ba1\u7b97\u7b97\u6cd5\uff0c\u7528\u6237\u53ef\u4ee5\u901a\u8fc7\u7f16\u7a0b\u8c03\u7528\u7684\u5f62\u5f0f\u8c03\u7528\u7b97\u6cd5\u3002 \u5728\u6587\u4ef6 pom.xml \u4e2d\u6dfb\u52a0\u4f9d\u8d56\u3002 <dependency> <groupId>com.vesoft</groupId> <artifactId>nebula-algorithm</artifactId> <version>3.0.0</version> </dependency> \u4f20\u5165\u53c2\u6570\u8c03\u7528\u7b97\u6cd5\uff08\u4ee5 PageRank \u4e3a\u4f8b\uff09\u3002\u66f4\u591a\u8c03\u7528\u793a\u4f8b\u8bf7\u53c2\u89c1 \u793a\u4f8b \u3002 Note \u6267\u884c\u7b97\u6cd5\u7684 DataFrame \u9ed8\u8ba4\u7b2c\u4e00\u5217\u662f\u8d77\u59cb\u70b9\uff0c\u7b2c\u4e8c\u5217\u662f\u76ee\u7684\u70b9\uff0c\u7b2c\u4e09\u5217\u662f\u8fb9\u6743\u91cd\uff08\u975eNebulaGraph\u4e2d\u7684 Rank\uff09\u3002 val prConfig = new PRConfig ( 5 , 1 .0 ) val prResult = PageRankAlgo.apply ( spark, data, prConfig, false ) \u5982\u679c\u7528\u6237\u7684\u8282\u70b9 ID \u662f String \u7c7b\u578b\uff0c\u53ef\u4ee5\u53c2\u8003 PageRank \u7684 \u793a\u4f8b \u3002\u793a\u4f8b\u4e2d\u8fdb\u884c\u4e86 ID \u8f6c\u6362\uff0c\u5c06 String \u7c7b\u578b\u7f16\u7801\u4e3a Long \u7c7b\u578b\uff0c \u5e76\u5728\u7b97\u6cd5\u7ed3\u679c\u4e2d\u5c06 Long \u7c7b\u578b ID \u89e3\u7801\u4e3a\u539f\u59cb\u7684 String \u7c7b\u578b\u3002 \u76f4\u63a5\u63d0\u4ea4\u7b97\u6cd5\u5305 \u00b6 \u8bbe\u7f6e \u914d\u7f6e\u6587\u4ef6 \u3002 { # Spark \u76f8\u5173\u914d\u7f6e spark: { app: { name: LPA # Spark \u5206\u7247\u6570\u91cf partitionNum:100 } master:local } data: { # \u6570\u636e\u6e90\uff0c\u53ef\u9009\u503c\u4e3a nebula\u3001csv\u3001json\u3002 source: nebula # \u6570\u636e\u843d\u5e93\uff0c\u5373\u56fe\u8ba1\u7b97\u7684\u7ed3\u679c\u5199\u5165\u7684\u76ee\u6807\uff0c\u53ef\u9009\u503c\u4e3a nebula\u3001csv\u3001json\u3002 sink: nebula # \u7b97\u6cd5\u662f\u5426\u9700\u8981\u6743\u91cd\u3002 hasWeight: false } # NebulaGraph\u76f8\u5173\u914d\u7f6e nebula: { # \u6570\u636e\u6e90\u3002NebulaGraph\u4f5c\u4e3a\u56fe\u8ba1\u7b97\u7684\u6570\u636e\u6e90\u65f6\uff0cnebula.read \u7684\u914d\u7f6e\u624d\u751f\u6548\u3002 read: { # \u6240\u6709 Meta \u670d\u52a1\u7684 IP \u5730\u5740\u548c\u7aef\u53e3\uff0c\u591a\u4e2a\u5730\u5740\u7528\u82f1\u6587\u9017\u53f7\uff08,\uff09\u5206\u9694\u3002\u683c\u5f0f\uff1a\"ip1:port1,ip2:port2\"\u3002 # \u4f7f\u7528 docker-compose \u90e8\u7f72\uff0c\u7aef\u53e3\u9700\u8981\u586b\u5199 docker-compose \u6620\u5c04\u5230\u5916\u90e8\u7684\u7aef\u53e3 # \u53ef\u4ee5\u7528`docker-compose ps`\u67e5\u770b metaAddress: \"192.168.*.10:9559\" # NebulaGraph\u56fe\u7a7a\u95f4\u540d\u79f0 space: basketballplayer # NebulaGraph Edge type, \u591a\u4e2a labels \u65f6\uff0c\u591a\u4e2a\u8fb9\u7684\u6570\u636e\u5c06\u5408\u5e76\u3002 labels: [ \"serve\" ] # NebulaGraph \u6bcf\u4e2a Edge type \u7684\u5c5e\u6027\u540d\u79f0\uff0c\u6b64\u5c5e\u6027\u5c06\u4f5c\u4e3a\u7b97\u6cd5\u7684\u6743\u91cd\u5217\uff0c\u8bf7\u786e\u4fdd\u548c Edge type \u5bf9\u5e94\u3002 weightCols: [ \"start_year\" ] } # \u6570\u636e\u843d\u5e93\u3002\u56fe\u8ba1\u7b97\u7ed3\u679c\u843d\u5e93\u5230NebulaGraph\u65f6\uff0cnebula.write \u7684\u914d\u7f6e\u624d\u751f\u6548\u3002 write: { # Graph \u670d\u52a1\u7684 IP \u5730\u5740\u548c\u7aef\u53e3\uff0c\u591a\u4e2a\u5730\u5740\u7528\u82f1\u6587\u9017\u53f7\uff08,\uff09\u5206\u9694\u3002\u683c\u5f0f\uff1a\"ip1:port1,ip2:port2\"\u3002 # \u4f7f\u7528 docker-compose \u90e8\u7f72\uff0c\u7aef\u53e3\u9700\u8981\u586b\u5199 docker-compose \u6620\u5c04\u5230\u5916\u90e8\u7684\u7aef\u53e3 # \u53ef\u4ee5\u7528`docker-compose ps`\u67e5\u770b graphAddress: \"192.168.*.11:9669\" # \u6240\u6709 Meta \u670d\u52a1\u7684 IP \u5730\u5740\u548c\u7aef\u53e3\uff0c\u591a\u4e2a\u5730\u5740\u7528\u82f1\u6587\u9017\u53f7\uff08,\uff09\u5206\u9694\u3002\u683c\u5f0f\uff1a\"ip1:port1,ip2:port2\"\u3002 # \u4f7f\u7528 docker-compose \u90e8\u7f72\uff0c\u7aef\u53e3\u9700\u8981\u586b\u5199 docker-compose \u6620\u5c04\u5230\u5916\u90e8\u7684\u7aef\u53e3 # \u53ef\u4ee5\u7528`docker-compose ps`\u67e5\u770b metaAddress: \"192.168.*.12:9559\" user:root pswd:nebula # \u5728\u63d0\u4ea4\u56fe\u8ba1\u7b97\u4efb\u52a1\u4e4b\u524d\u9700\u8981\u81ea\u884c\u521b\u5efa\u56fe\u7a7a\u95f4\u53ca Tag # NebulaGraph\u56fe\u7a7a\u95f4\u540d\u79f0 space:nb # NebulaGraph Tag \u540d\u79f0\uff0c\u56fe\u8ba1\u7b97\u7ed3\u679c\u4f1a\u5199\u5165\u8be5 Tag\u3002Tag \u4e2d\u7684\u5c5e\u6027\u540d\u79f0\u56fa\u5b9a\u5982\u4e0b\uff1a # PageRank\uff1apagerank # Louvain\uff1alouvain # ConnectedComponent\uff1acc # StronglyConnectedComponent\uff1ascc # LabelPropagation\uff1alpa # ShortestPath\uff1ashortestpath # DegreeStatic\uff1adegree\u3001inDegree\u3001outDegree # KCore\uff1akcore # TriangleCount\uff1atranglecpunt # BetweennessCentrality\uff1abetweennedss tag:pagerank } } local: { # \u6570\u636e\u6e90\u3002\u56fe\u8ba1\u7b97\u7684\u6570\u636e\u6e90\u4e3a csv \u6587\u4ef6\u6216 json \u6587\u4ef6\u65f6\uff0clocal.read \u7684\u914d\u7f6e\u624d\u751f\u6548\u3002 read: { filePath: \"hdfs://127.0.0.1:9000/edge/work_for.csv\" # \u5982\u679c CSV \u6587\u4ef6\u6ca1\u6709\u8868\u5934\uff0c\u4f7f\u7528 [_c0, _c1, _c2, ..., _cn] \u8868\u793a\u5176\u8868\u5934\uff0c\u6709\u8868\u5934\u6216\u8005\u662f json \u6587\u4ef6\u65f6\uff0c\u76f4\u63a5\u4f7f\u7528\u8868\u5934\u540d\u79f0\u5373\u53ef\u3002 # \u8d77\u59cb\u70b9 ID \u5217\u7684\u8868\u5934\u3002 srcId: \"_c0\" # \u76ee\u7684\u70b9 ID \u5217\u7684\u8868\u5934\u3002 dstId: \"_c1\" # \u6743\u91cd\u5217\u7684\u8868\u5934 weight: \"_c2\" # csv \u6587\u4ef6\u662f\u5426\u6709\u8868\u5934 header: false # csv \u6587\u4ef6\u7684\u5206\u9694\u7b26 delimiter: \",\" } # \u6570\u636e\u843d\u5e93\u3002\u56fe\u8ba1\u7b97\u7ed3\u679c\u843d\u5e93\u5230 csv \u6587\u4ef6\u6216 text \u6587\u4ef6\u65f6\uff0clocal.write \u7684\u914d\u7f6e\u624d\u751f\u6548\u3002 write: { resultPath:/tmp/ } algorithm: { # \u9700\u8981\u6267\u884c\u7684\u7b97\u6cd5\uff0c\u53ef\u9009\u503c\u4e3a\uff1a # pagerank\u3001louvain\u3001connectedcomponent\u3001labelpropagation\u3001shortestpaths\u3001 # degreestatic\u3001kcore\u3001stronglyconnectedcomponent\u3001trianglecount\u3001 # betweenness\u3001graphtriangleCount\u3002 executeAlgo: pagerank # PageRank \u53c2\u6570 pagerank: { maxIter: 10 resetProb: 0 .15 encodeId:false # \u5982\u679c\u70b9 ID \u662f\u5b57\u7b26\u4e32\u7c7b\u578b\uff0c\u8bf7\u914d\u7f6e\u4e3a true\u3002 } # Louvain \u53c2\u6570 louvain: { maxIter: 20 internalIter: 10 tol: 0 .5 encodeId:false # \u5982\u679c\u70b9 ID \u662f\u5b57\u7b26\u4e32\u7c7b\u578b\uff0c\u8bf7\u914d\u7f6e\u4e3a true\u3002 } # ... } } } Note \u5f53\u914d\u7f6e\u4e3a sink: nebula \u7684\u65f6\u5019\uff0c\u610f\u5473\u7740\u7b97\u6cd5\u8fd0\u7b97\u7ed3\u679c\u5c06\u88ab\u5199\u56deNebulaGraph\u96c6\u7fa4\uff0c\u8fd9\u5bf9\u5199\u56de\u5230\u7684 TAG \u4e2d\u7684\u5c5e\u6027\u540d\u6709\u9690\u542b\u7684\u7ea6\u5b9a\u3002\u8be6\u60c5\u53c2\u8003\u672c\u6587 \u652f\u6301\u7b97\u6cd5 \u90e8\u5206\u3002 \u63d0\u4ea4\u56fe\u8ba1\u7b97\u4efb\u52a1\u3002 ${ SPARK_HOME } /bin/spark-submit --master <mode> --class com.vesoft.nebula.algorithm.Main <nebula-algorithm-3.0.0.jar_path> -p <application.conf_path> \u793a\u4f8b\uff1a ${ SPARK_HOME } /bin/spark-submit --master \"local\" --class com.vesoft.nebula.algorithm.Main /root/nebula-algorithm/target/nebula-algorithm-3.0-SNAPSHOT.jar -p /root/nebula-algorithm/src/main/resources/application.conf \u89c6\u9891 \u00b6 \u56fe\u8ba1\u7b97\u5de5\u5177\u2014\u2014NebulaGraph Algorithm \u4ecb\u7ecd \uff082 \u5206 36 \u79d2\uff09","title":"NebulaGraph Algorithm"},{"location":"graph-computing/nebula-algorithm/#nebulagraph_algorithm","text":"NebulaGraph Algorithm \uff08\u7b80\u79f0 Algorithm\uff09\u662f\u4e00\u6b3e\u57fa\u4e8e GraphX \u7684 Spark \u5e94\u7528\u7a0b\u5e8f\uff0c\u901a\u8fc7\u63d0\u4ea4 Spark \u4efb\u52a1\u7684\u5f62\u5f0f\u4f7f\u7528\u5b8c\u6574\u7684\u7b97\u6cd5\u5de5\u5177\u5bf9NebulaGraph\u6570\u636e\u5e93\u4e2d\u7684\u6570\u636e\u6267\u884c\u56fe\u8ba1\u7b97\uff0c\u4e5f\u53ef\u4ee5\u901a\u8fc7\u7f16\u7a0b\u5f62\u5f0f\u8c03\u7528 lib \u5e93\u4e0b\u7684\u7b97\u6cd5\u9488\u5bf9 DataFrame \u6267\u884c\u56fe\u8ba1\u7b97\u3002","title":"NebulaGraph Algorithm"},{"location":"graph-computing/nebula-algorithm/#_1","text":"NebulaGraph Algorithm \u7248\u672c\u548cNebulaGraph\u5185\u6838\u7684\u7248\u672c\u5bf9\u5e94\u5173\u7cfb\u5982\u4e0b\u3002 NebulaGraph\u7248\u672c NebulaGraph Algorithm \u7248\u672c nightly 3.0-SNAPSHOT 3.0.0 ~ 3.6.x 3.x.0 2.6.x 2.6.x 2.5.0\u30012.5.1 2.5.0 2.0.0\u30012.0.1 2.1.0","title":"\u7248\u672c\u517c\u5bb9\u6027"},{"location":"graph-computing/nebula-algorithm/#_2","text":"\u5728\u4f7f\u7528 Algorithm \u4e4b\u524d\uff0c\u7528\u6237\u9700\u8981\u786e\u8ba4\u4ee5\u4e0b\u4fe1\u606f\uff1a NebulaGraph\u670d\u52a1\u5df2\u7ecf\u90e8\u7f72\u5e76\u542f\u52a8\u3002\u8be6\u7ec6\u4fe1\u606f\uff0c\u53c2\u8003 NebulaGraph\u5b89\u88c5\u90e8\u7f72 \u3002 Spark \u7248\u672c\u4e3a 2.4.x\u3002 Scala \u7248\u672c\u4e3a 2.11\u3002 \uff08\u53ef\u9009\uff09\u5982\u679c\u7528\u6237\u9700\u8981\u5728 Github \u4e2d\u514b\u9686\u6700\u65b0\u7684 Algorithm\uff0c\u5e76\u81ea\u884c\u7f16\u8bd1\u6253\u5305\uff0c\u53ef\u4ee5\u9009\u62e9\u5b89\u88c5 Maven \u3002","title":"\u524d\u63d0\u6761\u4ef6"},{"location":"graph-computing/nebula-algorithm/#_3","text":"\u56fe\u8ba1\u7b97\u4f1a\u8f93\u51fa\u70b9\u7684\u6570\u636e\u96c6\uff0c\u7b97\u6cd5\u7ed3\u679c\u4f1a\u4ee5DataFrame\u5f62\u5f0f\u4f5c\u4e3a\u70b9\u7684\u5c5e\u6027\u5b58\u50a8\u3002\u7528\u6237\u53ef\u4ee5\u6839\u636e\u4e1a\u52a1\u9700\u6c42\uff0c\u81ea\u884c\u5bf9\u7b97\u6cd5\u7ed3\u679c\u505a\u8fdb\u4e00\u6b65\u64cd\u4f5c\uff0c\u4f8b\u5982\u7edf\u8ba1\u3001\u7b5b\u9009\u3002 Compatibility Algorithm v3.1.0 \u7248\u672c\u4e4b\u524d\uff0c\u76f4\u63a5\u63d0\u4ea4\u7b97\u6cd5\u5305\u65f6\uff0c\u70b9 ID \u7684\u6570\u636e\u5fc5\u987b\u4e3a\u6574\u6570\uff0c\u5373\u70b9 ID \u53ef\u4ee5\u662f INT \u7c7b\u578b\uff0c\u6216\u8005\u662f String \u7c7b\u578b\u4f46\u6570\u636e\u672c\u8eab\u4e3a\u6574\u6570\u3002","title":"\u4f7f\u7528\u9650\u5236"},{"location":"graph-computing/nebula-algorithm/#_4","text":"NebulaGraph Algorithm \u652f\u6301\u7684\u56fe\u8ba1\u7b97\u7b97\u6cd5\u5982\u4e0b\u3002 \u7b97\u6cd5\u540d \u8bf4\u660e \u5e94\u7528\u573a\u666f \u5c5e\u6027\u540d\u79f0 \u5c5e\u6027\u6570\u636e\u7c7b\u578b PageRank \u9875\u9762\u6392\u5e8f \u7f51\u9875\u6392\u5e8f\u3001\u91cd\u70b9\u8282\u70b9\u6316\u6398 pagerank double/string Louvain \u9c81\u6c76 \u793e\u56e2\u6316\u6398\u3001\u5c42\u6b21\u5316\u805a\u7c7b louvain int/string KCore K \u6838 \u793e\u533a\u53d1\u73b0\u3001\u91d1\u878d\u98ce\u63a7 kcore int/string LabelPropagation \u6807\u7b7e\u4f20\u64ad \u8d44\u8baf\u4f20\u64ad\u3001\u5e7f\u544a\u63a8\u8350\u3001\u793e\u533a\u53d1\u73b0 lpa int/string Hanp \u6807\u7b7e\u4f20\u64ad\u8fdb\u9636\u7248 \u793e\u533a\u53d1\u73b0\u3001\u63a8\u8350 hanp int/string ConnectedComponent \u5f31\u8054\u901a\u5206\u91cf \u793e\u533a\u53d1\u73b0\u3001\u5b64\u5c9b\u53d1\u73b0 cc int/string StronglyConnectedComponent \u5f3a\u8054\u901a\u5206\u91cf \u793e\u533a\u53d1\u73b0 scc int/string ShortestPath \u6700\u77ed\u8def\u5f84 \u8def\u5f84\u89c4\u5212\u3001\u7f51\u7edc\u89c4\u5212 shortestpath string TriangleCount \u4e09\u89d2\u5f62\u8ba1\u6570 \u7f51\u7edc\u7ed3\u6784\u5206\u6790 trianglecount int/string GraphTriangleCount \u5168\u56fe\u4e09\u89d2\u5f62\u8ba1\u6570 \u7f51\u7edc\u7ed3\u6784\u53ca\u7d27\u5bc6\u7a0b\u5ea6\u5206\u6790 count int BetweennessCentrality \u4e2d\u4ecb\u4e2d\u5fc3\u6027 \u5173\u952e\u8282\u70b9\u6316\u6398\uff0c\u8282\u70b9\u5f71\u54cd\u529b\u8ba1\u7b97 betweenness double/string ClosenessCentrality \u7d27\u5bc6\u4e2d\u5fc3\u6027 \u5173\u952e\u8282\u70b9\u6316\u6398\u3001\u8282\u70b9\u5f71\u54cd\u529b\u8ba1\u7b97 closeness double/string DegreeStatic \u5ea6\u7edf\u8ba1 \u56fe\u7ed3\u6784\u5206\u6790 degree,inDegree,outDegree int/string ClusteringCoefficient \u805a\u96c6\u7cfb\u6570 \u63a8\u8350\u3001\u7535\u4fe1\u8bc8\u9a97\u5206\u6790 clustercoefficient double/string Jaccard \u6770\u5361\u5fb7\u76f8\u4f3c\u5ea6\u8ba1\u7b97 \u76f8\u4f3c\u5ea6\u8ba1\u7b97\u3001\u63a8\u8350 jaccard string BFS \u5e7f\u5ea6\u4f18\u5148\u904d\u5386 \u5c42\u5e8f\u904d\u5386\u3001\u6700\u77ed\u8def\u5f84\u89c4\u5212 bfs string DFS \u6df1\u5ea6\u4f18\u5148\u904d\u5386 \u5c42\u5e8f\u904d\u5386\u3001\u6700\u77ed\u8def\u5f84\u89c4\u5212 dfs string Node2Vec - \u56fe\u5206\u7c7b node2vec string Note \u5982\u679c\u9700\u8981\u5c06\u7b97\u6cd5\u7ed3\u679c\u5199\u5165\u5230NebulaGraph\u4e2d\uff0c\u8bf7\u786e\u4fdd\u5bf9\u5e94\u56fe\u7a7a\u95f4\u4e2d\u7684 Tag \u6709\u548c\u4e0a\u8868\u5bf9\u5e94\u7684\u5c5e\u6027\u540d\u79f0\u548c\u6570\u636e\u7c7b\u578b\u3002","title":"\u652f\u6301\u7b97\u6cd5"},{"location":"graph-computing/nebula-algorithm/#_5","text":"NebulaGraph Algorithm \u5b9e\u73b0\u56fe\u8ba1\u7b97\u7684\u6d41\u7a0b\u5982\u4e0b\uff1a \u5229\u7528 NebulaGraph Spark Connector \u4eceNebulaGraph\u4e2d\u8bfb\u53d6\u56fe\u6570\u636e\u4e3a DataFrame\u3002 \u5c06 DataFrame \u8f6c\u6362\u4e3a GraphX \u7684\u56fe\u3002 \u8c03\u7528 GraphX \u63d0\u4f9b\u7684\u56fe\u7b97\u6cd5\uff08\u4f8b\u5982 PageRank\uff09\u6216\u8005\u81ea\u884c\u5b9e\u73b0\u7684\u7b97\u6cd5\uff08\u4f8b\u5982 Louvain \u793e\u533a\u53d1\u73b0\uff09\u3002 \u8be6\u7ec6\u7684\u5b9e\u73b0\u65b9\u6cd5\u53ef\u4ee5\u53c2\u89c1\u76f8\u5173 Scala \u6587\u4ef6 \u3002","title":"\u5b9e\u73b0\u65b9\u6cd5"},{"location":"graph-computing/nebula-algorithm/#nebulagraph_algorithm_1","text":"","title":"\u83b7\u53d6 NebulaGraph Algorithm"},{"location":"graph-computing/nebula-algorithm/#_6","text":"\u514b\u9686\u4ed3\u5e93 nebula-algorithm \u3002 $ git clone -b v3.0.0 https://github.com/vesoft-inc/nebula-algorithm.git \u8fdb\u5165\u76ee\u5f55 nebula-algorithm \u3002 $ cd nebula-algorithm \u7f16\u8bd1\u6253\u5305\u3002 $ mvn clean package -Dgpg.skip -Dmaven.javadoc.skip = true -Dmaven.test.skip = true \u7f16\u8bd1\u5b8c\u6210\u540e\uff0c\u5728\u76ee\u5f55 nebula-algorithm/target \u4e0b\u751f\u6210\u7c7b\u4f3c\u6587\u4ef6 nebula-algorithm-3.x.x.jar \u3002","title":"\u7f16\u8bd1\u6253\u5305"},{"location":"graph-computing/nebula-algorithm/#maven","text":"\u4e0b\u8f7d\u5730\u5740","title":"Maven \u8fdc\u7a0b\u4ed3\u5e93\u4e0b\u8f7d"},{"location":"graph-computing/nebula-algorithm/#_7","text":"","title":"\u4f7f\u7528\u65b9\u6cd5"},{"location":"graph-computing/nebula-algorithm/#_8","text":"lib \u5e93\u4e2d\u63d0\u4f9b\u4e86 10 \u79cd\u5e38\u7528\u56fe\u8ba1\u7b97\u7b97\u6cd5\uff0c\u7528\u6237\u53ef\u4ee5\u901a\u8fc7\u7f16\u7a0b\u8c03\u7528\u7684\u5f62\u5f0f\u8c03\u7528\u7b97\u6cd5\u3002 \u5728\u6587\u4ef6 pom.xml \u4e2d\u6dfb\u52a0\u4f9d\u8d56\u3002 <dependency> <groupId>com.vesoft</groupId> <artifactId>nebula-algorithm</artifactId> <version>3.0.0</version> </dependency> \u4f20\u5165\u53c2\u6570\u8c03\u7528\u7b97\u6cd5\uff08\u4ee5 PageRank \u4e3a\u4f8b\uff09\u3002\u66f4\u591a\u8c03\u7528\u793a\u4f8b\u8bf7\u53c2\u89c1 \u793a\u4f8b \u3002 Note \u6267\u884c\u7b97\u6cd5\u7684 DataFrame \u9ed8\u8ba4\u7b2c\u4e00\u5217\u662f\u8d77\u59cb\u70b9\uff0c\u7b2c\u4e8c\u5217\u662f\u76ee\u7684\u70b9\uff0c\u7b2c\u4e09\u5217\u662f\u8fb9\u6743\u91cd\uff08\u975eNebulaGraph\u4e2d\u7684 Rank\uff09\u3002 val prConfig = new PRConfig ( 5 , 1 .0 ) val prResult = PageRankAlgo.apply ( spark, data, prConfig, false ) \u5982\u679c\u7528\u6237\u7684\u8282\u70b9 ID \u662f String \u7c7b\u578b\uff0c\u53ef\u4ee5\u53c2\u8003 PageRank \u7684 \u793a\u4f8b \u3002\u793a\u4f8b\u4e2d\u8fdb\u884c\u4e86 ID \u8f6c\u6362\uff0c\u5c06 String \u7c7b\u578b\u7f16\u7801\u4e3a Long \u7c7b\u578b\uff0c \u5e76\u5728\u7b97\u6cd5\u7ed3\u679c\u4e2d\u5c06 Long \u7c7b\u578b ID \u89e3\u7801\u4e3a\u539f\u59cb\u7684 String \u7c7b\u578b\u3002","title":"\u8c03\u7528\u7b97\u6cd5\u63a5\u53e3\uff08\u63a8\u8350\uff09"},{"location":"graph-computing/nebula-algorithm/#_9","text":"\u8bbe\u7f6e \u914d\u7f6e\u6587\u4ef6 \u3002 { # Spark \u76f8\u5173\u914d\u7f6e spark: { app: { name: LPA # Spark \u5206\u7247\u6570\u91cf partitionNum:100 } master:local } data: { # \u6570\u636e\u6e90\uff0c\u53ef\u9009\u503c\u4e3a nebula\u3001csv\u3001json\u3002 source: nebula # \u6570\u636e\u843d\u5e93\uff0c\u5373\u56fe\u8ba1\u7b97\u7684\u7ed3\u679c\u5199\u5165\u7684\u76ee\u6807\uff0c\u53ef\u9009\u503c\u4e3a nebula\u3001csv\u3001json\u3002 sink: nebula # \u7b97\u6cd5\u662f\u5426\u9700\u8981\u6743\u91cd\u3002 hasWeight: false } # NebulaGraph\u76f8\u5173\u914d\u7f6e nebula: { # \u6570\u636e\u6e90\u3002NebulaGraph\u4f5c\u4e3a\u56fe\u8ba1\u7b97\u7684\u6570\u636e\u6e90\u65f6\uff0cnebula.read \u7684\u914d\u7f6e\u624d\u751f\u6548\u3002 read: { # \u6240\u6709 Meta \u670d\u52a1\u7684 IP \u5730\u5740\u548c\u7aef\u53e3\uff0c\u591a\u4e2a\u5730\u5740\u7528\u82f1\u6587\u9017\u53f7\uff08,\uff09\u5206\u9694\u3002\u683c\u5f0f\uff1a\"ip1:port1,ip2:port2\"\u3002 # \u4f7f\u7528 docker-compose \u90e8\u7f72\uff0c\u7aef\u53e3\u9700\u8981\u586b\u5199 docker-compose \u6620\u5c04\u5230\u5916\u90e8\u7684\u7aef\u53e3 # \u53ef\u4ee5\u7528`docker-compose ps`\u67e5\u770b metaAddress: \"192.168.*.10:9559\" # NebulaGraph\u56fe\u7a7a\u95f4\u540d\u79f0 space: basketballplayer # NebulaGraph Edge type, \u591a\u4e2a labels \u65f6\uff0c\u591a\u4e2a\u8fb9\u7684\u6570\u636e\u5c06\u5408\u5e76\u3002 labels: [ \"serve\" ] # NebulaGraph \u6bcf\u4e2a Edge type \u7684\u5c5e\u6027\u540d\u79f0\uff0c\u6b64\u5c5e\u6027\u5c06\u4f5c\u4e3a\u7b97\u6cd5\u7684\u6743\u91cd\u5217\uff0c\u8bf7\u786e\u4fdd\u548c Edge type \u5bf9\u5e94\u3002 weightCols: [ \"start_year\" ] } # \u6570\u636e\u843d\u5e93\u3002\u56fe\u8ba1\u7b97\u7ed3\u679c\u843d\u5e93\u5230NebulaGraph\u65f6\uff0cnebula.write \u7684\u914d\u7f6e\u624d\u751f\u6548\u3002 write: { # Graph \u670d\u52a1\u7684 IP \u5730\u5740\u548c\u7aef\u53e3\uff0c\u591a\u4e2a\u5730\u5740\u7528\u82f1\u6587\u9017\u53f7\uff08,\uff09\u5206\u9694\u3002\u683c\u5f0f\uff1a\"ip1:port1,ip2:port2\"\u3002 # \u4f7f\u7528 docker-compose \u90e8\u7f72\uff0c\u7aef\u53e3\u9700\u8981\u586b\u5199 docker-compose \u6620\u5c04\u5230\u5916\u90e8\u7684\u7aef\u53e3 # \u53ef\u4ee5\u7528`docker-compose ps`\u67e5\u770b graphAddress: \"192.168.*.11:9669\" # \u6240\u6709 Meta \u670d\u52a1\u7684 IP \u5730\u5740\u548c\u7aef\u53e3\uff0c\u591a\u4e2a\u5730\u5740\u7528\u82f1\u6587\u9017\u53f7\uff08,\uff09\u5206\u9694\u3002\u683c\u5f0f\uff1a\"ip1:port1,ip2:port2\"\u3002 # \u4f7f\u7528 docker-compose \u90e8\u7f72\uff0c\u7aef\u53e3\u9700\u8981\u586b\u5199 docker-compose \u6620\u5c04\u5230\u5916\u90e8\u7684\u7aef\u53e3 # \u53ef\u4ee5\u7528`docker-compose ps`\u67e5\u770b metaAddress: \"192.168.*.12:9559\" user:root pswd:nebula # \u5728\u63d0\u4ea4\u56fe\u8ba1\u7b97\u4efb\u52a1\u4e4b\u524d\u9700\u8981\u81ea\u884c\u521b\u5efa\u56fe\u7a7a\u95f4\u53ca Tag # NebulaGraph\u56fe\u7a7a\u95f4\u540d\u79f0 space:nb # NebulaGraph Tag \u540d\u79f0\uff0c\u56fe\u8ba1\u7b97\u7ed3\u679c\u4f1a\u5199\u5165\u8be5 Tag\u3002Tag \u4e2d\u7684\u5c5e\u6027\u540d\u79f0\u56fa\u5b9a\u5982\u4e0b\uff1a # PageRank\uff1apagerank # Louvain\uff1alouvain # ConnectedComponent\uff1acc # StronglyConnectedComponent\uff1ascc # LabelPropagation\uff1alpa # ShortestPath\uff1ashortestpath # DegreeStatic\uff1adegree\u3001inDegree\u3001outDegree # KCore\uff1akcore # TriangleCount\uff1atranglecpunt # BetweennessCentrality\uff1abetweennedss tag:pagerank } } local: { # \u6570\u636e\u6e90\u3002\u56fe\u8ba1\u7b97\u7684\u6570\u636e\u6e90\u4e3a csv \u6587\u4ef6\u6216 json \u6587\u4ef6\u65f6\uff0clocal.read \u7684\u914d\u7f6e\u624d\u751f\u6548\u3002 read: { filePath: \"hdfs://127.0.0.1:9000/edge/work_for.csv\" # \u5982\u679c CSV \u6587\u4ef6\u6ca1\u6709\u8868\u5934\uff0c\u4f7f\u7528 [_c0, _c1, _c2, ..., _cn] \u8868\u793a\u5176\u8868\u5934\uff0c\u6709\u8868\u5934\u6216\u8005\u662f json \u6587\u4ef6\u65f6\uff0c\u76f4\u63a5\u4f7f\u7528\u8868\u5934\u540d\u79f0\u5373\u53ef\u3002 # \u8d77\u59cb\u70b9 ID \u5217\u7684\u8868\u5934\u3002 srcId: \"_c0\" # \u76ee\u7684\u70b9 ID \u5217\u7684\u8868\u5934\u3002 dstId: \"_c1\" # \u6743\u91cd\u5217\u7684\u8868\u5934 weight: \"_c2\" # csv \u6587\u4ef6\u662f\u5426\u6709\u8868\u5934 header: false # csv \u6587\u4ef6\u7684\u5206\u9694\u7b26 delimiter: \",\" } # \u6570\u636e\u843d\u5e93\u3002\u56fe\u8ba1\u7b97\u7ed3\u679c\u843d\u5e93\u5230 csv \u6587\u4ef6\u6216 text \u6587\u4ef6\u65f6\uff0clocal.write \u7684\u914d\u7f6e\u624d\u751f\u6548\u3002 write: { resultPath:/tmp/ } algorithm: { # \u9700\u8981\u6267\u884c\u7684\u7b97\u6cd5\uff0c\u53ef\u9009\u503c\u4e3a\uff1a # pagerank\u3001louvain\u3001connectedcomponent\u3001labelpropagation\u3001shortestpaths\u3001 # degreestatic\u3001kcore\u3001stronglyconnectedcomponent\u3001trianglecount\u3001 # betweenness\u3001graphtriangleCount\u3002 executeAlgo: pagerank # PageRank \u53c2\u6570 pagerank: { maxIter: 10 resetProb: 0 .15 encodeId:false # \u5982\u679c\u70b9 ID \u662f\u5b57\u7b26\u4e32\u7c7b\u578b\uff0c\u8bf7\u914d\u7f6e\u4e3a true\u3002 } # Louvain \u53c2\u6570 louvain: { maxIter: 20 internalIter: 10 tol: 0 .5 encodeId:false # \u5982\u679c\u70b9 ID \u662f\u5b57\u7b26\u4e32\u7c7b\u578b\uff0c\u8bf7\u914d\u7f6e\u4e3a true\u3002 } # ... } } } Note \u5f53\u914d\u7f6e\u4e3a sink: nebula \u7684\u65f6\u5019\uff0c\u610f\u5473\u7740\u7b97\u6cd5\u8fd0\u7b97\u7ed3\u679c\u5c06\u88ab\u5199\u56deNebulaGraph\u96c6\u7fa4\uff0c\u8fd9\u5bf9\u5199\u56de\u5230\u7684 TAG \u4e2d\u7684\u5c5e\u6027\u540d\u6709\u9690\u542b\u7684\u7ea6\u5b9a\u3002\u8be6\u60c5\u53c2\u8003\u672c\u6587 \u652f\u6301\u7b97\u6cd5 \u90e8\u5206\u3002 \u63d0\u4ea4\u56fe\u8ba1\u7b97\u4efb\u52a1\u3002 ${ SPARK_HOME } /bin/spark-submit --master <mode> --class com.vesoft.nebula.algorithm.Main <nebula-algorithm-3.0.0.jar_path> -p <application.conf_path> \u793a\u4f8b\uff1a ${ SPARK_HOME } /bin/spark-submit --master \"local\" --class com.vesoft.nebula.algorithm.Main /root/nebula-algorithm/target/nebula-algorithm-3.0-SNAPSHOT.jar -p /root/nebula-algorithm/src/main/resources/application.conf","title":"\u76f4\u63a5\u63d0\u4ea4\u7b97\u6cd5\u5305"},{"location":"graph-computing/nebula-algorithm/#_10","text":"\u56fe\u8ba1\u7b97\u5de5\u5177\u2014\u2014NebulaGraph Algorithm \u4ecb\u7ecd \uff082 \u5206 36 \u79d2\uff09","title":"\u89c6\u9891"},{"location":"import-export/nebula-flink-connector/","text":"NebulaGraph Flink Connector \u00b6 NebulaGraph Flink Connector \u662f\u4e00\u6b3e\u5e2e\u52a9 Flink \u7528\u6237\u5feb\u901f\u8bbf\u95eeNebulaGraph\u7684\u8fde\u63a5\u5668\uff0c\u652f\u6301\u4eceNebulaGraph\u56fe\u6570\u636e\u5e93\u4e2d\u8bfb\u53d6\u6570\u636e\uff0c\u6216\u8005\u5c06\u5176\u4ed6\u5916\u90e8\u6570\u636e\u6e90\u8bfb\u53d6\u7684\u6570\u636e\u5199\u5165NebulaGraph\u56fe\u6570\u636e\u5e93\u3002 \u66f4\u591a\u4f7f\u7528\u8bf4\u660e\u8bf7\u53c2\u89c1 NebulaGraph Flink Connector \u3002 \u9002\u7528\u573a\u666f \u00b6 NebulaGraph Flink Connector \u9002\u7528\u4e8e\u4ee5\u4e0b\u573a\u666f\uff1a \u5728\u4e0d\u540c\u7684NebulaGraph\u96c6\u7fa4\u4e4b\u95f4\u8fc1\u79fb\u6570\u636e\u3002 \u5728\u540c\u4e00\u4e2aNebulaGraph\u96c6\u7fa4\u5185\u4e0d\u540c\u56fe\u7a7a\u95f4\u4e4b\u95f4\u8fc1\u79fb\u6570\u636e\u3002 NebulaGraph\u4e0e\u5176\u4ed6\u6570\u636e\u6e90\u4e4b\u95f4\u8fc1\u79fb\u6570\u636e\u3002 \u66f4\u65b0\u8bf4\u660e \u00b6 Release notes","title":"NebulaGraph Flink Connector"},{"location":"import-export/nebula-flink-connector/#nebulagraph_flink_connector","text":"NebulaGraph Flink Connector \u662f\u4e00\u6b3e\u5e2e\u52a9 Flink \u7528\u6237\u5feb\u901f\u8bbf\u95eeNebulaGraph\u7684\u8fde\u63a5\u5668\uff0c\u652f\u6301\u4eceNebulaGraph\u56fe\u6570\u636e\u5e93\u4e2d\u8bfb\u53d6\u6570\u636e\uff0c\u6216\u8005\u5c06\u5176\u4ed6\u5916\u90e8\u6570\u636e\u6e90\u8bfb\u53d6\u7684\u6570\u636e\u5199\u5165NebulaGraph\u56fe\u6570\u636e\u5e93\u3002 \u66f4\u591a\u4f7f\u7528\u8bf4\u660e\u8bf7\u53c2\u89c1 NebulaGraph Flink Connector \u3002","title":"NebulaGraph Flink Connector"},{"location":"import-export/nebula-flink-connector/#_1","text":"NebulaGraph Flink Connector \u9002\u7528\u4e8e\u4ee5\u4e0b\u573a\u666f\uff1a \u5728\u4e0d\u540c\u7684NebulaGraph\u96c6\u7fa4\u4e4b\u95f4\u8fc1\u79fb\u6570\u636e\u3002 \u5728\u540c\u4e00\u4e2aNebulaGraph\u96c6\u7fa4\u5185\u4e0d\u540c\u56fe\u7a7a\u95f4\u4e4b\u95f4\u8fc1\u79fb\u6570\u636e\u3002 NebulaGraph\u4e0e\u5176\u4ed6\u6570\u636e\u6e90\u4e4b\u95f4\u8fc1\u79fb\u6570\u636e\u3002","title":"\u9002\u7528\u573a\u666f"},{"location":"import-export/nebula-flink-connector/#_2","text":"Release notes","title":"\u66f4\u65b0\u8bf4\u660e"},{"location":"import-export/nebula-spark-connector/","text":"NebulaGraph Spark Connector \u00b6 NebulaGraph Spark Connector \u662f\u4e00\u4e2a Spark \u8fde\u63a5\u5668\uff0c\u63d0\u4f9b\u901a\u8fc7 Spark \u6807\u51c6\u5f62\u5f0f\u8bfb\u5199NebulaGraph\u6570\u636e\u7684\u80fd\u529b\u3002NebulaGraph Spark Connector \u7531 Reader \u548c Writer \u4e24\u90e8\u5206\u7ec4\u6210\u3002 Reader \u63d0\u4f9b\u4e00\u4e2a Spark SQL \u63a5\u53e3\uff0c\u7528\u6237\u53ef\u4ee5\u4f7f\u7528\u8be5\u63a5\u53e3\u7f16\u7a0b\u8bfb\u53d6NebulaGraph\u56fe\u6570\u636e\uff0c\u5355\u6b21\u8bfb\u53d6\u4e00\u4e2a\u70b9\u6216 Edge type \u7684\u6570\u636e\uff0c\u5e76\u5c06\u8bfb\u53d6\u7684\u7ed3\u679c\u7ec4\u88c5\u6210 Spark \u7684 DataFrame\u3002 Writer \u63d0\u4f9b\u4e00\u4e2a Spark SQL \u63a5\u53e3\uff0c\u7528\u6237\u53ef\u4ee5\u4f7f\u7528\u8be5\u63a5\u53e3\u7f16\u7a0b\u5c06 DataFrame \u683c\u5f0f\u7684\u6570\u636e\u9010\u6761\u6216\u6279\u91cf\u5199\u5165NebulaGraph\u3002 \u66f4\u591a\u4f7f\u7528\u8bf4\u660e\u8bf7\u53c2\u89c1 NebulaGraph Spark Connector \u3002 \u7248\u672c\u517c\u5bb9\u6027 \u00b6 NebulaGraph Spark Connector\u3001NebulaGraph\u5185\u6838\u7248\u672c\u548c Spark \u7248\u672c\u5bf9\u5e94\u5173\u7cfb\u5982\u4e0b\u3002 Spark Connector \u7248\u672c NebulaGraph\u7248\u672c Spark \u7248\u672c nebula-spark-connector_3.0-3.0-SNAPSHOT.jar nightly 3.x nebula-spark-connector_2.2-3.0-SNAPSHOT.jar nightly 2.2.x nebula-spark-connector-3.0-SNAPSHOT.jar nightly 2.4.x nebula-spark-connector_3.0-3.6.0.jar 3.x 3.x nebula-spark-connector_2.2-3.6.0.jar 3.x 2.2.x nebula-spark-connector-3.6.0.jar 3.x 2.4.x nebula-spark-connector_2.2-3.4.0.jar 3.x 2.2.x nebula-spark-connector-3.4.0.jar 3.x 2.4.x nebula-spark-connector_2.2-3.3.0.jar 3.x 2.2.x nebula-spark-connector-3.3.0.jar 3.x 2.4.x nebula-spark-connector-3.0.0.jar 3.x 2.4.x nebula-spark-connector-2.6.1.jar 2.6.0, 2.6.1 2.4.x nebula-spark-connector-2.6.0.jar 2.6.0, 2.6.1 2.4.x nebula-spark-connector-2.5.1.jar 2.5.0, 2.5.1 2.4.x nebula-spark-connector-2.5.0.jar 2.5.0, 2.5.1 2.4.x nebula-spark-connector-2.1.0.jar 2.0.0, 2.0.1 2.4.x nebula-spark-connector-2.0.1.jar 2.0.0, 2.0.1 2.4.x nebula-spark-connector-2.0.0.jar 2.0.0, 2.0.1 2.4.x \u9002\u7528\u573a\u666f \u00b6 NebulaGraph Spark Connector \u9002\u7528\u4e8e\u4ee5\u4e0b\u573a\u666f\uff1a \u5728\u4e0d\u540c\u7684NebulaGraph\u96c6\u7fa4\u4e4b\u95f4\u8fc1\u79fb\u6570\u636e\u3002 \u5728\u540c\u4e00\u4e2aNebulaGraph\u96c6\u7fa4\u5185\u4e0d\u540c\u56fe\u7a7a\u95f4\u4e4b\u95f4\u8fc1\u79fb\u6570\u636e\u3002 NebulaGraph\u4e0e\u5176\u4ed6\u6570\u636e\u6e90\u4e4b\u95f4\u8fc1\u79fb\u6570\u636e\u3002 \u7ed3\u5408 NebulaGraph Algorithm \u8fdb\u884c\u56fe\u8ba1\u7b97\u3002 \u7279\u6027 \u00b6 NebulaGraph Spark Connector 3.6.0\u7248\u672c\u7279\u6027\u5982\u4e0b\uff1a \u63d0\u4f9b\u591a\u79cd\u8fde\u63a5\u914d\u7f6e\u9879\uff0c\u5982\u8d85\u65f6\u65f6\u95f4\u3001\u8fde\u63a5\u91cd\u8bd5\u6b21\u6570\u3001\u6267\u884c\u91cd\u8bd5\u6b21\u6570\u7b49\u3002 \u63d0\u4f9b\u591a\u79cd\u6570\u636e\u914d\u7f6e\u9879\uff0c\u5982\u5199\u5165\u6570\u636e\u65f6\u8bbe\u7f6e\u5bf9\u5e94\u5217\u4e3a\u70b9 ID\u3001\u8d77\u59cb\u70b9 ID\u3001\u76ee\u7684\u70b9 ID \u6216\u5c5e\u6027\u3002 Reader \u652f\u6301\u65e0\u5c5e\u6027\u8bfb\u53d6\u548c\u5168\u5c5e\u6027\u8bfb\u53d6\u3002 Reader \u652f\u6301\u5c06NebulaGraph\u6570\u636e\u8bfb\u53d6\u6210 Graphx \u7684 VertexRDD \u548c EdgeRDD\uff0c\u652f\u6301\u975e Long \u578b\u70b9 ID\u3002 \u7edf\u4e00\u4e86 SparkSQL \u7684\u6269\u5c55\u6570\u636e\u6e90\uff0c\u7edf\u4e00\u91c7\u7528 DataSourceV2 \u8fdb\u884cNebulaGraph\u6570\u636e\u6269\u5c55\u3002 \u652f\u6301 insert \u3001 update \u548c delete \u4e09\u79cd\u5199\u5165\u6a21\u5f0f\u3002 insert \u6a21\u5f0f\u4f1a\u63d2\u5165\uff08\u8986\u76d6\uff09\u6570\u636e\uff0c update \u6a21\u5f0f\u4ec5\u4f1a\u66f4\u65b0\u5df2\u5b58\u5728\u7684\u6570\u636e\uff0c delete \u6a21\u5f0f\u53ea\u5220\u9664\u6570\u636e\u3002 \u652f\u6301\u4e0eNebulaGraph\u4e4b\u95f4\u7684 SSL \u52a0\u5bc6\u8fde\u63a5\u3002 \u66f4\u65b0\u8bf4\u660e \u00b6 Release notes \u83b7\u53d6 NebulaGraph Spark Connector \u00b6 \u7f16\u8bd1\u6253\u5305 \u00b6 \u514b\u9686\u4ed3\u5e93 nebula-spark-connector \u3002 $ git clone -b release-3.6 https://github.com/vesoft-inc/nebula-spark-connector.git \u8fdb\u5165\u76ee\u5f55 nebula-spark-connector \u3002 \u7f16\u8bd1\u6253\u5305\u3002\u4e0d\u540c\u7248\u672c\u7684 Spark \u547d\u4ee4\u7565\u6709\u4e0d\u540c\u3002 Note \u9700\u5df2\u5b89\u88c5\u5bf9\u5e94\u7248\u672c Spark\u3002 Spark 2.4 $ mvn clean package -Dmaven.test.skip = true -Dgpg.skip -Dmaven.javadoc.skip = true -pl nebula-spark-connector -am -Pscala-2.11 -Pspark-2.4 Spark 2.2 $ mvn clean package -Dmaven.test.skip = true -Dgpg.skip -Dmaven.javadoc.skip = true -pl nebula-spark-connector_2.2 -am -Pscala-2.11 -Pspark-2.2 Spark 3.x $ mvn clean package -Dmaven.test.skip = true -Dgpg.skip -Dmaven.javadoc.skip = true -pl nebula-spark-connector_3.0 -am -Pscala-2.12 -Pspark-3.0 \u7f16\u8bd1\u5b8c\u6210\u540e\uff0c\u5728\u76ee\u5f55\u7684\u6587\u4ef6\u5939 target \u4e0b\u751f\u6210\u7c7b\u4f3c\u6587\u4ef6 nebula-spark-connector-3.6.0-SHANPSHOT.jar \u3002 Maven \u8fdc\u7a0b\u4ed3\u5e93\u4e0b\u8f7d \u00b6 \u4e0b\u8f7d\u5730\u5740 \u4f7f\u7528\u65b9\u6cd5 \u00b6 \u4f7f\u7528 NebulaGraph Spark Connector \u8bfb\u5199NebulaGraph\u65f6\uff0c\u53ea\u9700\u8981\u7f16\u5199\u4ee5\u4e0b\u4ee3\u7801\u5373\u53ef\u5b9e\u73b0\u3002 # \u4eceNebulaGraph\u8bfb\u53d6\u70b9\u8fb9\u6570\u636e \u3002 spark . read . nebula (). loadVerticesToDF () spark . read . nebula (). loadEdgesToDF () # \u5c06 dataframe \u6570\u636e\u4f5c\u4e3a\u70b9\u548c\u8fb9\u5199\u5165NebulaGraph\u4e2d \u3002 dataframe . write . nebula (). writeVertices () dataframe . write . nebula (). writeEdges () nebula() \u63a5\u6536\u4e24\u4e2a\u914d\u7f6e\u53c2\u6570\uff0c\u5305\u62ec\u8fde\u63a5\u914d\u7f6e\u548c\u8bfb\u5199\u914d\u7f6e\u3002 \u4eceNebulaGraph\u8bfb\u53d6\u6570\u636e \u00b6 val config = NebulaConnectionConfig . builder () . withMetaAddress ( \"127.0.0.1:9559\" ) . withConenctionRetry ( 2 ) . withExecuteRetry ( 2 ) . withTimeout ( 6000 ) . build () val nebulaReadVertexConfig : ReadNebulaConfig = ReadNebulaConfig . builder () . withSpace ( \"test\" ) . withLabel ( \"person\" ) . withNoColumn ( false ) . withReturnCols ( List ( \"birthday\" )) . withLimit ( 10 ) . withPartitionNum ( 10 ) . build () val vertex = spark . read . nebula ( config , nebulaReadVertexConfig ). loadVerticesToDF () val nebulaReadEdgeConfig : ReadNebulaConfig = ReadNebulaConfig . builder () . withSpace ( \"test\" ) . withLabel ( \"knows\" ) . withNoColumn ( false ) . withReturnCols ( List ( \"degree\" )) . withLimit ( 10 ) . withPartitionNum ( 10 ) . build () val edge = spark . read . nebula ( config , nebulaReadEdgeConfig ). loadEdgesToDF () NebulaConnectionConfig \u662f\u8fde\u63a5NebulaGraph\u7684\u914d\u7f6e\uff0c\u8bf4\u660e\u5982\u4e0b\u3002 \u53c2\u6570 \u662f\u5426\u5fc5\u987b \u8bf4\u660e withMetaAddress \u662f \u6240\u6709 Meta \u670d\u52a1\u7684\u5730\u5740\uff0c\u591a\u4e2a\u5730\u5740\u7528\u82f1\u6587\u9017\u53f7\uff08,\uff09\u9694\u5f00\uff0c\u683c\u5f0f\u4e3a ip1:port1,ip2:port2,... \u3002\u8bfb\u53d6\u6570\u636e\u4e0d\u9700\u8981\u914d\u7f6e withGraphAddress \u3002 withConnectionRetry \u5426 NebulaGraph Java Client \u8fde\u63a5NebulaGraph\u7684\u91cd\u8bd5\u6b21\u6570\u3002\u9ed8\u8ba4\u503c\u4e3a 1 \u3002 withExecuteRetry \u5426 NebulaGraph Java Client \u6267\u884c\u67e5\u8be2\u8bed\u53e5\u7684\u91cd\u8bd5\u6b21\u6570\u3002\u9ed8\u8ba4\u503c\u4e3a 1 \u3002 withTimeout \u5426 NebulaGraph Java Client \u8bf7\u6c42\u54cd\u5e94\u7684\u8d85\u65f6\u65f6\u95f4\u3002\u9ed8\u8ba4\u503c\u4e3a 6000 \uff0c\u5355\u4f4d\uff1a\u6beb\u79d2\uff08ms\uff09\u3002 ReadNebulaConfig \u662f\u8bfb\u53d6NebulaGraph\u6570\u636e\u7684\u914d\u7f6e\uff0c\u8bf4\u660e\u5982\u4e0b\u3002 \u53c2\u6570 \u662f\u5426\u5fc5\u987b \u8bf4\u660e withSpace \u662f NebulaGraph\u56fe\u7a7a\u95f4\u540d\u79f0\u3002 withLabel \u662f NebulaGraph\u56fe\u7a7a\u95f4\u5185\u7684 Tag \u6216 Edge type \u540d\u79f0\u3002 withNoColumn \u5426 \u662f\u5426\u4e0d\u8bfb\u53d6\u5c5e\u6027\u3002\u9ed8\u8ba4\u503c\u4e3a false \uff0c\u8868\u793a\u8bfb\u53d6\u5c5e\u6027\u3002\u53d6\u503c\u4e3a true \u65f6\uff0c\u8868\u793a\u4e0d\u8bfb\u53d6\u5c5e\u6027\uff0c\u6b64\u65f6 withReturnCols \u914d\u7f6e\u65e0\u6548\u3002 withReturnCols \u5426 \u914d\u7f6e\u8981\u8bfb\u53d6\u7684\u70b9\u6216\u8fb9\u7684\u5c5e\u6027\u96c6\u3002\u683c\u5f0f\u4e3a List(property1,property2,...) \uff0c\u9ed8\u8ba4\u503c\u4e3a List() \uff0c\u8868\u793a\u8bfb\u53d6\u5168\u90e8\u5c5e\u6027\u3002 withLimit \u5426 \u914d\u7f6e NebulaGraph Java Storage Client \u4e00\u6b21\u4ece\u670d\u52a1\u7aef\u8bfb\u53d6\u7684\u6570\u636e\u884c\u6570\u3002\u9ed8\u8ba4\u503c\u4e3a 1000\u3002 withPartitionNum \u5426 \u914d\u7f6e\u8bfb\u53d6NebulaGraph\u6570\u636e\u65f6 Spark \u7684\u5206\u533a\u6570\u3002\u9ed8\u8ba4\u503c\u4e3a 100\u3002\u8be5\u503c\u7684\u914d\u7f6e\u6700\u597d\u4e0d\u8d85\u8fc7\u56fe\u7a7a\u95f4\u7684\u7684\u5206\u7247\u6570\u91cf\uff08partition_num\uff09\u3002 \u5411NebulaGraph\u5199\u5165\u6570\u636e \u00b6 Note DataFrame \u4e2d\u7684\u5217\u4f1a\u81ea\u52a8\u4f5c\u4e3a\u5c5e\u6027\u5199\u5165NebulaGraph\u3002 val config = NebulaConnectionConfig . builder () . withMetaAddress ( \"127.0.0.1:9559\" ) . withGraphAddress ( \"127.0.0.1:9669\" ) . withConenctionRetry ( 2 ) . build () val nebulaWriteVertexConfig : WriteNebulaVertexConfig = WriteNebulaVertexConfig . builder () . withSpace ( \"test\" ) . withTag ( \"person\" ) . withVidField ( \"id\" ) . withVidPolicy ( \"hash\" ) . withVidAsProp ( true ) . withUser ( \"root\" ) . withPasswd ( \"nebula\" ) . withBatch ( 512 ) . build () df . write . nebula ( config , nebulaWriteVertexConfig ). writeVertices () val nebulaWriteEdgeConfig : WriteNebulaEdgeConfig = WriteNebulaEdgeConfig . builder () . withSpace ( \"test\" ) . withEdge ( \"friend\" ) . withSrcIdField ( \"src\" ) . withSrcPolicy ( null ) . withDstIdField ( \"dst\" ) . withDstPolicy ( null ) . withRankField ( \"degree\" ) . withSrcAsProperty ( true ) . withDstAsProperty ( true ) . withRankAsProperty ( true ) . withUser ( \"root\" ) . withPasswd ( \"nebula\" ) . withBatch ( 512 ) . build () df . write . nebula ( config , nebulaWriteEdgeConfig ). writeEdges () \u9ed8\u8ba4\u5199\u5165\u6a21\u5f0f\u4e3a insert \uff0c\u53ef\u4ee5\u901a\u8fc7 withWriteMode \u914d\u7f6e\u4fee\u6539\u4e3a update \u6216 delete \uff1a val config = NebulaConnectionConfig . builder () . withMetaAddress ( \"127.0.0.1:9559\" ) . withGraphAddress ( \"127.0.0.1:9669\" ) . build () val nebulaWriteVertexConfig = WriteNebulaVertexConfig . builder () . withSpace ( \"test\" ) . withTag ( \"person\" ) . withVidField ( \"id\" ) . withVidAsProp ( true ) . withBatch ( 512 ) . withWriteMode ( WriteMode . UPDATE ) . build () df . write . nebula ( config , nebulaWriteVertexConfig ). writeVertices () NebulaConnectionConfig \u662f\u8fde\u63a5NebulaGraph\u7684\u914d\u7f6e\uff0c\u8bf4\u660e\u5982\u4e0b\u3002 \u53c2\u6570 \u662f\u5426\u5fc5\u987b \u8bf4\u660e withMetaAddress \u662f \u6240\u6709 Meta \u670d\u52a1\u7684\u5730\u5740\uff0c\u591a\u4e2a\u5730\u5740\u7528\u82f1\u6587\u9017\u53f7\uff08,\uff09\u9694\u5f00\uff0c\u683c\u5f0f\u4e3a ip1:port1,ip2:port2,... \u3002 withGraphAddress \u662f Graph \u670d\u52a1\u7684\u5730\u5740\uff0c\u591a\u4e2a\u5730\u5740\u7528\u82f1\u6587\u9017\u53f7\uff08,\uff09\u9694\u5f00\uff0c\u683c\u5f0f\u4e3a ip1:port1,ip2:port2,... \u3002 withConnectionRetry \u5426 NebulaGraph Java Client \u8fde\u63a5NebulaGraph\u7684\u91cd\u8bd5\u6b21\u6570\u3002\u9ed8\u8ba4\u503c\u4e3a 1 \u3002 WriteNebulaVertexConfig \u662f\u5199\u5165\u70b9\u7684\u914d\u7f6e\uff0c\u8bf4\u660e\u5982\u4e0b\u3002 \u53c2\u6570 \u662f\u5426\u5fc5\u987b \u8bf4\u660e withSpace \u662f NebulaGraph\u56fe\u7a7a\u95f4\u540d\u79f0\u3002 withTag \u662f \u5199\u5165\u70b9\u65f6\u9700\u8981\u5173\u8054\u7684 Tag \u540d\u79f0\u3002 withVidField \u662f DataFrame \u4e2d\u4f5c\u4e3a\u70b9 ID \u7684\u5217\u3002 withVidPolicy \u5426 \u5199\u5165\u70b9 ID \u65f6\uff0c\u91c7\u7528\u7684\u6620\u5c04\u51fd\u6570\uff0cNebulaGraph\u4ec5\u652f\u6301 HASH\u3002\u9ed8\u8ba4\u4e0d\u505a\u6620\u5c04\u3002 withVidAsProp \u5426 DataFrame \u4e2d\u4f5c\u4e3a\u70b9 ID \u7684\u5217\u662f\u5426\u4e5f\u4f5c\u4e3a\u5c5e\u6027\u5199\u5165\u3002\u9ed8\u8ba4\u503c\u4e3a false \u3002\u5982\u679c\u914d\u7f6e\u4e3a true \uff0c\u8bf7\u786e\u4fdd Tag \u4e2d\u6709\u548c VidField \u76f8\u540c\u7684\u5c5e\u6027\u540d\u3002 withUser \u5426 NebulaGraph\u7528\u6237\u540d\u3002\u82e5\u672a\u5f00\u542f \u8eab\u4efd\u9a8c\u8bc1 \uff0c\u65e0\u9700\u914d\u7f6e\u7528\u6237\u540d\u548c\u5bc6\u7801\u3002 withPasswd \u5426 NebulaGraph\u7528\u6237\u540d\u5bf9\u5e94\u7684\u5bc6\u7801\u3002 withBatch \u662f \u4e00\u6b21\u5199\u5165\u7684\u6570\u636e\u884c\u6570\uff0c\u9ed8\u8ba4\u503c\u4e3a 512 \u3002\u5f53 withWriteMode \u4e3a update \u65f6\uff0c\u8be5\u53c2\u6570\u7684\u6700\u5927\u503c\u4e3a 512 \u3002 withWriteMode \u5426 \u5199\u5165\u6a21\u5f0f\u3002\u53ef\u9009\u503c\u4e3a insert \u3001 update \u548c delete \u3002\u9ed8\u8ba4\u4e3a insert \u3002 withDeleteEdge \u5426 \u5220\u9664\u70b9\u65f6\u662f\u5426\u5220\u9664\u8be5\u70b9\u5173\u8054\u7684\u8fb9\u3002\u9ed8\u8ba4\u4e3a false \u3002\u5f53 withWriteMode \u4e3a delete \u65f6\u751f\u6548\u3002 WriteNebulaEdgeConfig \u662f\u5199\u5165\u8fb9\u7684\u914d\u7f6e\uff0c\u8bf4\u660e\u5982\u4e0b\u3002 \u53c2\u6570 \u662f\u5426\u5fc5\u987b \u8bf4\u660e withSpace \u662f NebulaGraph\u56fe\u7a7a\u95f4\u540d\u79f0\u3002 withEdge \u662f \u5199\u5165\u8fb9\u65f6\u9700\u8981\u5173\u8054\u7684 Edge type \u540d\u79f0\u3002 withSrcIdField \u662f DataFrame \u4e2d\u4f5c\u4e3a\u8d77\u59cb\u70b9\u7684\u5217\u3002 withSrcPolicy \u5426 \u5199\u5165\u8d77\u59cb\u70b9\u65f6\uff0c\u91c7\u7528\u7684\u6620\u5c04\u51fd\u6570\uff0cNebulaGraph\u4ec5\u652f\u6301 HASH\u3002\u9ed8\u8ba4\u4e0d\u505a\u6620\u5c04\u3002 withDstIdField \u662f DataFrame \u4e2d\u4f5c\u4e3a\u76ee\u7684\u70b9\u7684\u5217\u3002 withDstPolicy \u5426 \u5199\u5165\u76ee\u7684\u70b9\u65f6\uff0c\u91c7\u7528\u7684\u6620\u5c04\u51fd\u6570\uff0cNebulaGraph\u4ec5\u652f\u6301 HASH\u3002\u9ed8\u8ba4\u4e0d\u505a\u6620\u5c04\u3002 withRankField \u5426 DataFrame \u4e2d\u4f5c\u4e3a rank \u7684\u5217\u3002\u9ed8\u8ba4\u4e0d\u5199\u5165 rank\u3002 withSrcAsProperty \u5426 DataFrame \u4e2d\u4f5c\u4e3a\u8d77\u59cb\u70b9\u7684\u5217\u662f\u5426\u4e5f\u4f5c\u4e3a\u5c5e\u6027\u5199\u5165\u3002\u9ed8\u8ba4\u503c\u4e3a false \u3002\u5982\u679c\u914d\u7f6e\u4e3a true \uff0c\u8bf7\u786e\u4fdd Edge type \u4e2d\u6709\u548c SrcIdField \u76f8\u540c\u7684\u5c5e\u6027\u540d\u3002 withDstAsProperty \u5426 DataFrame \u4e2d\u4f5c\u4e3a\u76ee\u7684\u70b9\u7684\u5217\u662f\u5426\u4e5f\u4f5c\u4e3a\u5c5e\u6027\u5199\u5165\u3002\u9ed8\u8ba4\u503c\u4e3a false \u3002\u5982\u679c\u914d\u7f6e\u4e3a true \uff0c\u8bf7\u786e\u4fdd Edge type \u4e2d\u6709\u548c DstIdField \u76f8\u540c\u7684\u5c5e\u6027\u540d\u3002 withRankAsProperty \u5426 DataFrame \u4e2d\u4f5c\u4e3a rank \u7684\u5217\u662f\u5426\u4e5f\u4f5c\u4e3a\u5c5e\u6027\u5199\u5165\u3002\u9ed8\u8ba4\u503c\u4e3a false \u3002\u5982\u679c\u914d\u7f6e\u4e3a true \uff0c\u8bf7\u786e\u4fdd Edge type \u4e2d\u6709\u548c RankField \u76f8\u540c\u7684\u5c5e\u6027\u540d\u3002 withUser \u5426 NebulaGraph\u7528\u6237\u540d\u3002\u82e5\u672a\u5f00\u542f \u8eab\u4efd\u9a8c\u8bc1 \uff0c\u65e0\u9700\u914d\u7f6e\u7528\u6237\u540d\u548c\u5bc6\u7801\u3002 withPasswd \u5426 NebulaGraph\u7528\u6237\u540d\u5bf9\u5e94\u7684\u5bc6\u7801\u3002 withBatch \u662f \u4e00\u6b21\u5199\u5165\u7684\u6570\u636e\u884c\u6570\uff0c\u9ed8\u8ba4\u503c\u4e3a 512 \u3002\u5f53 withWriteMode \u4e3a update \u65f6\uff0c\u8be5\u53c2\u6570\u7684\u6700\u5927\u503c\u4e3a 512 \u3002 withWriteMode \u5426 \u5199\u5165\u6a21\u5f0f\u3002\u53ef\u9009\u503c\u4e3a insert \u3001 update \u548c delete \u3002\u9ed8\u8ba4\u4e3a insert \u3002 \u793a\u4f8b\u4ee3\u7801 \u00b6 \u8be6\u7ec6\u7684\u4f7f\u7528\u65b9\u5f0f\u53c2\u89c1 \u793a\u4f8b\u4ee3\u7801 \u3002","title":"NebulaGraph Spark Connector"},{"location":"import-export/nebula-spark-connector/#nebulagraph_spark_connector","text":"NebulaGraph Spark Connector \u662f\u4e00\u4e2a Spark \u8fde\u63a5\u5668\uff0c\u63d0\u4f9b\u901a\u8fc7 Spark \u6807\u51c6\u5f62\u5f0f\u8bfb\u5199NebulaGraph\u6570\u636e\u7684\u80fd\u529b\u3002NebulaGraph Spark Connector \u7531 Reader \u548c Writer \u4e24\u90e8\u5206\u7ec4\u6210\u3002 Reader \u63d0\u4f9b\u4e00\u4e2a Spark SQL \u63a5\u53e3\uff0c\u7528\u6237\u53ef\u4ee5\u4f7f\u7528\u8be5\u63a5\u53e3\u7f16\u7a0b\u8bfb\u53d6NebulaGraph\u56fe\u6570\u636e\uff0c\u5355\u6b21\u8bfb\u53d6\u4e00\u4e2a\u70b9\u6216 Edge type \u7684\u6570\u636e\uff0c\u5e76\u5c06\u8bfb\u53d6\u7684\u7ed3\u679c\u7ec4\u88c5\u6210 Spark \u7684 DataFrame\u3002 Writer \u63d0\u4f9b\u4e00\u4e2a Spark SQL \u63a5\u53e3\uff0c\u7528\u6237\u53ef\u4ee5\u4f7f\u7528\u8be5\u63a5\u53e3\u7f16\u7a0b\u5c06 DataFrame \u683c\u5f0f\u7684\u6570\u636e\u9010\u6761\u6216\u6279\u91cf\u5199\u5165NebulaGraph\u3002 \u66f4\u591a\u4f7f\u7528\u8bf4\u660e\u8bf7\u53c2\u89c1 NebulaGraph Spark Connector \u3002","title":"NebulaGraph Spark Connector"},{"location":"import-export/nebula-spark-connector/#_1","text":"NebulaGraph Spark Connector\u3001NebulaGraph\u5185\u6838\u7248\u672c\u548c Spark \u7248\u672c\u5bf9\u5e94\u5173\u7cfb\u5982\u4e0b\u3002 Spark Connector \u7248\u672c NebulaGraph\u7248\u672c Spark \u7248\u672c nebula-spark-connector_3.0-3.0-SNAPSHOT.jar nightly 3.x nebula-spark-connector_2.2-3.0-SNAPSHOT.jar nightly 2.2.x nebula-spark-connector-3.0-SNAPSHOT.jar nightly 2.4.x nebula-spark-connector_3.0-3.6.0.jar 3.x 3.x nebula-spark-connector_2.2-3.6.0.jar 3.x 2.2.x nebula-spark-connector-3.6.0.jar 3.x 2.4.x nebula-spark-connector_2.2-3.4.0.jar 3.x 2.2.x nebula-spark-connector-3.4.0.jar 3.x 2.4.x nebula-spark-connector_2.2-3.3.0.jar 3.x 2.2.x nebula-spark-connector-3.3.0.jar 3.x 2.4.x nebula-spark-connector-3.0.0.jar 3.x 2.4.x nebula-spark-connector-2.6.1.jar 2.6.0, 2.6.1 2.4.x nebula-spark-connector-2.6.0.jar 2.6.0, 2.6.1 2.4.x nebula-spark-connector-2.5.1.jar 2.5.0, 2.5.1 2.4.x nebula-spark-connector-2.5.0.jar 2.5.0, 2.5.1 2.4.x nebula-spark-connector-2.1.0.jar 2.0.0, 2.0.1 2.4.x nebula-spark-connector-2.0.1.jar 2.0.0, 2.0.1 2.4.x nebula-spark-connector-2.0.0.jar 2.0.0, 2.0.1 2.4.x","title":"\u7248\u672c\u517c\u5bb9\u6027"},{"location":"import-export/nebula-spark-connector/#_2","text":"NebulaGraph Spark Connector \u9002\u7528\u4e8e\u4ee5\u4e0b\u573a\u666f\uff1a \u5728\u4e0d\u540c\u7684NebulaGraph\u96c6\u7fa4\u4e4b\u95f4\u8fc1\u79fb\u6570\u636e\u3002 \u5728\u540c\u4e00\u4e2aNebulaGraph\u96c6\u7fa4\u5185\u4e0d\u540c\u56fe\u7a7a\u95f4\u4e4b\u95f4\u8fc1\u79fb\u6570\u636e\u3002 NebulaGraph\u4e0e\u5176\u4ed6\u6570\u636e\u6e90\u4e4b\u95f4\u8fc1\u79fb\u6570\u636e\u3002 \u7ed3\u5408 NebulaGraph Algorithm \u8fdb\u884c\u56fe\u8ba1\u7b97\u3002","title":"\u9002\u7528\u573a\u666f"},{"location":"import-export/nebula-spark-connector/#_3","text":"NebulaGraph Spark Connector 3.6.0\u7248\u672c\u7279\u6027\u5982\u4e0b\uff1a \u63d0\u4f9b\u591a\u79cd\u8fde\u63a5\u914d\u7f6e\u9879\uff0c\u5982\u8d85\u65f6\u65f6\u95f4\u3001\u8fde\u63a5\u91cd\u8bd5\u6b21\u6570\u3001\u6267\u884c\u91cd\u8bd5\u6b21\u6570\u7b49\u3002 \u63d0\u4f9b\u591a\u79cd\u6570\u636e\u914d\u7f6e\u9879\uff0c\u5982\u5199\u5165\u6570\u636e\u65f6\u8bbe\u7f6e\u5bf9\u5e94\u5217\u4e3a\u70b9 ID\u3001\u8d77\u59cb\u70b9 ID\u3001\u76ee\u7684\u70b9 ID \u6216\u5c5e\u6027\u3002 Reader \u652f\u6301\u65e0\u5c5e\u6027\u8bfb\u53d6\u548c\u5168\u5c5e\u6027\u8bfb\u53d6\u3002 Reader \u652f\u6301\u5c06NebulaGraph\u6570\u636e\u8bfb\u53d6\u6210 Graphx \u7684 VertexRDD \u548c EdgeRDD\uff0c\u652f\u6301\u975e Long \u578b\u70b9 ID\u3002 \u7edf\u4e00\u4e86 SparkSQL \u7684\u6269\u5c55\u6570\u636e\u6e90\uff0c\u7edf\u4e00\u91c7\u7528 DataSourceV2 \u8fdb\u884cNebulaGraph\u6570\u636e\u6269\u5c55\u3002 \u652f\u6301 insert \u3001 update \u548c delete \u4e09\u79cd\u5199\u5165\u6a21\u5f0f\u3002 insert \u6a21\u5f0f\u4f1a\u63d2\u5165\uff08\u8986\u76d6\uff09\u6570\u636e\uff0c update \u6a21\u5f0f\u4ec5\u4f1a\u66f4\u65b0\u5df2\u5b58\u5728\u7684\u6570\u636e\uff0c delete \u6a21\u5f0f\u53ea\u5220\u9664\u6570\u636e\u3002 \u652f\u6301\u4e0eNebulaGraph\u4e4b\u95f4\u7684 SSL \u52a0\u5bc6\u8fde\u63a5\u3002","title":"\u7279\u6027"},{"location":"import-export/nebula-spark-connector/#_4","text":"Release notes","title":"\u66f4\u65b0\u8bf4\u660e"},{"location":"import-export/nebula-spark-connector/#nebulagraph_spark_connector_1","text":"","title":"\u83b7\u53d6 NebulaGraph Spark Connector"},{"location":"import-export/nebula-spark-connector/#_5","text":"\u514b\u9686\u4ed3\u5e93 nebula-spark-connector \u3002 $ git clone -b release-3.6 https://github.com/vesoft-inc/nebula-spark-connector.git \u8fdb\u5165\u76ee\u5f55 nebula-spark-connector \u3002 \u7f16\u8bd1\u6253\u5305\u3002\u4e0d\u540c\u7248\u672c\u7684 Spark \u547d\u4ee4\u7565\u6709\u4e0d\u540c\u3002 Note \u9700\u5df2\u5b89\u88c5\u5bf9\u5e94\u7248\u672c Spark\u3002 Spark 2.4 $ mvn clean package -Dmaven.test.skip = true -Dgpg.skip -Dmaven.javadoc.skip = true -pl nebula-spark-connector -am -Pscala-2.11 -Pspark-2.4 Spark 2.2 $ mvn clean package -Dmaven.test.skip = true -Dgpg.skip -Dmaven.javadoc.skip = true -pl nebula-spark-connector_2.2 -am -Pscala-2.11 -Pspark-2.2 Spark 3.x $ mvn clean package -Dmaven.test.skip = true -Dgpg.skip -Dmaven.javadoc.skip = true -pl nebula-spark-connector_3.0 -am -Pscala-2.12 -Pspark-3.0 \u7f16\u8bd1\u5b8c\u6210\u540e\uff0c\u5728\u76ee\u5f55\u7684\u6587\u4ef6\u5939 target \u4e0b\u751f\u6210\u7c7b\u4f3c\u6587\u4ef6 nebula-spark-connector-3.6.0-SHANPSHOT.jar \u3002","title":"\u7f16\u8bd1\u6253\u5305"},{"location":"import-export/nebula-spark-connector/#maven","text":"\u4e0b\u8f7d\u5730\u5740","title":"Maven \u8fdc\u7a0b\u4ed3\u5e93\u4e0b\u8f7d"},{"location":"import-export/nebula-spark-connector/#_6","text":"\u4f7f\u7528 NebulaGraph Spark Connector \u8bfb\u5199NebulaGraph\u65f6\uff0c\u53ea\u9700\u8981\u7f16\u5199\u4ee5\u4e0b\u4ee3\u7801\u5373\u53ef\u5b9e\u73b0\u3002 # \u4eceNebulaGraph\u8bfb\u53d6\u70b9\u8fb9\u6570\u636e \u3002 spark . read . nebula (). loadVerticesToDF () spark . read . nebula (). loadEdgesToDF () # \u5c06 dataframe \u6570\u636e\u4f5c\u4e3a\u70b9\u548c\u8fb9\u5199\u5165NebulaGraph\u4e2d \u3002 dataframe . write . nebula (). writeVertices () dataframe . write . nebula (). writeEdges () nebula() \u63a5\u6536\u4e24\u4e2a\u914d\u7f6e\u53c2\u6570\uff0c\u5305\u62ec\u8fde\u63a5\u914d\u7f6e\u548c\u8bfb\u5199\u914d\u7f6e\u3002","title":"\u4f7f\u7528\u65b9\u6cd5"},{"location":"import-export/nebula-spark-connector/#nebulagraph","text":"val config = NebulaConnectionConfig . builder () . withMetaAddress ( \"127.0.0.1:9559\" ) . withConenctionRetry ( 2 ) . withExecuteRetry ( 2 ) . withTimeout ( 6000 ) . build () val nebulaReadVertexConfig : ReadNebulaConfig = ReadNebulaConfig . builder () . withSpace ( \"test\" ) . withLabel ( \"person\" ) . withNoColumn ( false ) . withReturnCols ( List ( \"birthday\" )) . withLimit ( 10 ) . withPartitionNum ( 10 ) . build () val vertex = spark . read . nebula ( config , nebulaReadVertexConfig ). loadVerticesToDF () val nebulaReadEdgeConfig : ReadNebulaConfig = ReadNebulaConfig . builder () . withSpace ( \"test\" ) . withLabel ( \"knows\" ) . withNoColumn ( false ) . withReturnCols ( List ( \"degree\" )) . withLimit ( 10 ) . withPartitionNum ( 10 ) . build () val edge = spark . read . nebula ( config , nebulaReadEdgeConfig ). loadEdgesToDF () NebulaConnectionConfig \u662f\u8fde\u63a5NebulaGraph\u7684\u914d\u7f6e\uff0c\u8bf4\u660e\u5982\u4e0b\u3002 \u53c2\u6570 \u662f\u5426\u5fc5\u987b \u8bf4\u660e withMetaAddress \u662f \u6240\u6709 Meta \u670d\u52a1\u7684\u5730\u5740\uff0c\u591a\u4e2a\u5730\u5740\u7528\u82f1\u6587\u9017\u53f7\uff08,\uff09\u9694\u5f00\uff0c\u683c\u5f0f\u4e3a ip1:port1,ip2:port2,... \u3002\u8bfb\u53d6\u6570\u636e\u4e0d\u9700\u8981\u914d\u7f6e withGraphAddress \u3002 withConnectionRetry \u5426 NebulaGraph Java Client \u8fde\u63a5NebulaGraph\u7684\u91cd\u8bd5\u6b21\u6570\u3002\u9ed8\u8ba4\u503c\u4e3a 1 \u3002 withExecuteRetry \u5426 NebulaGraph Java Client \u6267\u884c\u67e5\u8be2\u8bed\u53e5\u7684\u91cd\u8bd5\u6b21\u6570\u3002\u9ed8\u8ba4\u503c\u4e3a 1 \u3002 withTimeout \u5426 NebulaGraph Java Client \u8bf7\u6c42\u54cd\u5e94\u7684\u8d85\u65f6\u65f6\u95f4\u3002\u9ed8\u8ba4\u503c\u4e3a 6000 \uff0c\u5355\u4f4d\uff1a\u6beb\u79d2\uff08ms\uff09\u3002 ReadNebulaConfig \u662f\u8bfb\u53d6NebulaGraph\u6570\u636e\u7684\u914d\u7f6e\uff0c\u8bf4\u660e\u5982\u4e0b\u3002 \u53c2\u6570 \u662f\u5426\u5fc5\u987b \u8bf4\u660e withSpace \u662f NebulaGraph\u56fe\u7a7a\u95f4\u540d\u79f0\u3002 withLabel \u662f NebulaGraph\u56fe\u7a7a\u95f4\u5185\u7684 Tag \u6216 Edge type \u540d\u79f0\u3002 withNoColumn \u5426 \u662f\u5426\u4e0d\u8bfb\u53d6\u5c5e\u6027\u3002\u9ed8\u8ba4\u503c\u4e3a false \uff0c\u8868\u793a\u8bfb\u53d6\u5c5e\u6027\u3002\u53d6\u503c\u4e3a true \u65f6\uff0c\u8868\u793a\u4e0d\u8bfb\u53d6\u5c5e\u6027\uff0c\u6b64\u65f6 withReturnCols \u914d\u7f6e\u65e0\u6548\u3002 withReturnCols \u5426 \u914d\u7f6e\u8981\u8bfb\u53d6\u7684\u70b9\u6216\u8fb9\u7684\u5c5e\u6027\u96c6\u3002\u683c\u5f0f\u4e3a List(property1,property2,...) \uff0c\u9ed8\u8ba4\u503c\u4e3a List() \uff0c\u8868\u793a\u8bfb\u53d6\u5168\u90e8\u5c5e\u6027\u3002 withLimit \u5426 \u914d\u7f6e NebulaGraph Java Storage Client \u4e00\u6b21\u4ece\u670d\u52a1\u7aef\u8bfb\u53d6\u7684\u6570\u636e\u884c\u6570\u3002\u9ed8\u8ba4\u503c\u4e3a 1000\u3002 withPartitionNum \u5426 \u914d\u7f6e\u8bfb\u53d6NebulaGraph\u6570\u636e\u65f6 Spark \u7684\u5206\u533a\u6570\u3002\u9ed8\u8ba4\u503c\u4e3a 100\u3002\u8be5\u503c\u7684\u914d\u7f6e\u6700\u597d\u4e0d\u8d85\u8fc7\u56fe\u7a7a\u95f4\u7684\u7684\u5206\u7247\u6570\u91cf\uff08partition_num\uff09\u3002","title":"\u4eceNebulaGraph\u8bfb\u53d6\u6570\u636e"},{"location":"import-export/nebula-spark-connector/#nebulagraph_1","text":"Note DataFrame \u4e2d\u7684\u5217\u4f1a\u81ea\u52a8\u4f5c\u4e3a\u5c5e\u6027\u5199\u5165NebulaGraph\u3002 val config = NebulaConnectionConfig . builder () . withMetaAddress ( \"127.0.0.1:9559\" ) . withGraphAddress ( \"127.0.0.1:9669\" ) . withConenctionRetry ( 2 ) . build () val nebulaWriteVertexConfig : WriteNebulaVertexConfig = WriteNebulaVertexConfig . builder () . withSpace ( \"test\" ) . withTag ( \"person\" ) . withVidField ( \"id\" ) . withVidPolicy ( \"hash\" ) . withVidAsProp ( true ) . withUser ( \"root\" ) . withPasswd ( \"nebula\" ) . withBatch ( 512 ) . build () df . write . nebula ( config , nebulaWriteVertexConfig ). writeVertices () val nebulaWriteEdgeConfig : WriteNebulaEdgeConfig = WriteNebulaEdgeConfig . builder () . withSpace ( \"test\" ) . withEdge ( \"friend\" ) . withSrcIdField ( \"src\" ) . withSrcPolicy ( null ) . withDstIdField ( \"dst\" ) . withDstPolicy ( null ) . withRankField ( \"degree\" ) . withSrcAsProperty ( true ) . withDstAsProperty ( true ) . withRankAsProperty ( true ) . withUser ( \"root\" ) . withPasswd ( \"nebula\" ) . withBatch ( 512 ) . build () df . write . nebula ( config , nebulaWriteEdgeConfig ). writeEdges () \u9ed8\u8ba4\u5199\u5165\u6a21\u5f0f\u4e3a insert \uff0c\u53ef\u4ee5\u901a\u8fc7 withWriteMode \u914d\u7f6e\u4fee\u6539\u4e3a update \u6216 delete \uff1a val config = NebulaConnectionConfig . builder () . withMetaAddress ( \"127.0.0.1:9559\" ) . withGraphAddress ( \"127.0.0.1:9669\" ) . build () val nebulaWriteVertexConfig = WriteNebulaVertexConfig . builder () . withSpace ( \"test\" ) . withTag ( \"person\" ) . withVidField ( \"id\" ) . withVidAsProp ( true ) . withBatch ( 512 ) . withWriteMode ( WriteMode . UPDATE ) . build () df . write . nebula ( config , nebulaWriteVertexConfig ). writeVertices () NebulaConnectionConfig \u662f\u8fde\u63a5NebulaGraph\u7684\u914d\u7f6e\uff0c\u8bf4\u660e\u5982\u4e0b\u3002 \u53c2\u6570 \u662f\u5426\u5fc5\u987b \u8bf4\u660e withMetaAddress \u662f \u6240\u6709 Meta \u670d\u52a1\u7684\u5730\u5740\uff0c\u591a\u4e2a\u5730\u5740\u7528\u82f1\u6587\u9017\u53f7\uff08,\uff09\u9694\u5f00\uff0c\u683c\u5f0f\u4e3a ip1:port1,ip2:port2,... \u3002 withGraphAddress \u662f Graph \u670d\u52a1\u7684\u5730\u5740\uff0c\u591a\u4e2a\u5730\u5740\u7528\u82f1\u6587\u9017\u53f7\uff08,\uff09\u9694\u5f00\uff0c\u683c\u5f0f\u4e3a ip1:port1,ip2:port2,... \u3002 withConnectionRetry \u5426 NebulaGraph Java Client \u8fde\u63a5NebulaGraph\u7684\u91cd\u8bd5\u6b21\u6570\u3002\u9ed8\u8ba4\u503c\u4e3a 1 \u3002 WriteNebulaVertexConfig \u662f\u5199\u5165\u70b9\u7684\u914d\u7f6e\uff0c\u8bf4\u660e\u5982\u4e0b\u3002 \u53c2\u6570 \u662f\u5426\u5fc5\u987b \u8bf4\u660e withSpace \u662f NebulaGraph\u56fe\u7a7a\u95f4\u540d\u79f0\u3002 withTag \u662f \u5199\u5165\u70b9\u65f6\u9700\u8981\u5173\u8054\u7684 Tag \u540d\u79f0\u3002 withVidField \u662f DataFrame \u4e2d\u4f5c\u4e3a\u70b9 ID \u7684\u5217\u3002 withVidPolicy \u5426 \u5199\u5165\u70b9 ID \u65f6\uff0c\u91c7\u7528\u7684\u6620\u5c04\u51fd\u6570\uff0cNebulaGraph\u4ec5\u652f\u6301 HASH\u3002\u9ed8\u8ba4\u4e0d\u505a\u6620\u5c04\u3002 withVidAsProp \u5426 DataFrame \u4e2d\u4f5c\u4e3a\u70b9 ID \u7684\u5217\u662f\u5426\u4e5f\u4f5c\u4e3a\u5c5e\u6027\u5199\u5165\u3002\u9ed8\u8ba4\u503c\u4e3a false \u3002\u5982\u679c\u914d\u7f6e\u4e3a true \uff0c\u8bf7\u786e\u4fdd Tag \u4e2d\u6709\u548c VidField \u76f8\u540c\u7684\u5c5e\u6027\u540d\u3002 withUser \u5426 NebulaGraph\u7528\u6237\u540d\u3002\u82e5\u672a\u5f00\u542f \u8eab\u4efd\u9a8c\u8bc1 \uff0c\u65e0\u9700\u914d\u7f6e\u7528\u6237\u540d\u548c\u5bc6\u7801\u3002 withPasswd \u5426 NebulaGraph\u7528\u6237\u540d\u5bf9\u5e94\u7684\u5bc6\u7801\u3002 withBatch \u662f \u4e00\u6b21\u5199\u5165\u7684\u6570\u636e\u884c\u6570\uff0c\u9ed8\u8ba4\u503c\u4e3a 512 \u3002\u5f53 withWriteMode \u4e3a update \u65f6\uff0c\u8be5\u53c2\u6570\u7684\u6700\u5927\u503c\u4e3a 512 \u3002 withWriteMode \u5426 \u5199\u5165\u6a21\u5f0f\u3002\u53ef\u9009\u503c\u4e3a insert \u3001 update \u548c delete \u3002\u9ed8\u8ba4\u4e3a insert \u3002 withDeleteEdge \u5426 \u5220\u9664\u70b9\u65f6\u662f\u5426\u5220\u9664\u8be5\u70b9\u5173\u8054\u7684\u8fb9\u3002\u9ed8\u8ba4\u4e3a false \u3002\u5f53 withWriteMode \u4e3a delete \u65f6\u751f\u6548\u3002 WriteNebulaEdgeConfig \u662f\u5199\u5165\u8fb9\u7684\u914d\u7f6e\uff0c\u8bf4\u660e\u5982\u4e0b\u3002 \u53c2\u6570 \u662f\u5426\u5fc5\u987b \u8bf4\u660e withSpace \u662f NebulaGraph\u56fe\u7a7a\u95f4\u540d\u79f0\u3002 withEdge \u662f \u5199\u5165\u8fb9\u65f6\u9700\u8981\u5173\u8054\u7684 Edge type \u540d\u79f0\u3002 withSrcIdField \u662f DataFrame \u4e2d\u4f5c\u4e3a\u8d77\u59cb\u70b9\u7684\u5217\u3002 withSrcPolicy \u5426 \u5199\u5165\u8d77\u59cb\u70b9\u65f6\uff0c\u91c7\u7528\u7684\u6620\u5c04\u51fd\u6570\uff0cNebulaGraph\u4ec5\u652f\u6301 HASH\u3002\u9ed8\u8ba4\u4e0d\u505a\u6620\u5c04\u3002 withDstIdField \u662f DataFrame \u4e2d\u4f5c\u4e3a\u76ee\u7684\u70b9\u7684\u5217\u3002 withDstPolicy \u5426 \u5199\u5165\u76ee\u7684\u70b9\u65f6\uff0c\u91c7\u7528\u7684\u6620\u5c04\u51fd\u6570\uff0cNebulaGraph\u4ec5\u652f\u6301 HASH\u3002\u9ed8\u8ba4\u4e0d\u505a\u6620\u5c04\u3002 withRankField \u5426 DataFrame \u4e2d\u4f5c\u4e3a rank \u7684\u5217\u3002\u9ed8\u8ba4\u4e0d\u5199\u5165 rank\u3002 withSrcAsProperty \u5426 DataFrame \u4e2d\u4f5c\u4e3a\u8d77\u59cb\u70b9\u7684\u5217\u662f\u5426\u4e5f\u4f5c\u4e3a\u5c5e\u6027\u5199\u5165\u3002\u9ed8\u8ba4\u503c\u4e3a false \u3002\u5982\u679c\u914d\u7f6e\u4e3a true \uff0c\u8bf7\u786e\u4fdd Edge type \u4e2d\u6709\u548c SrcIdField \u76f8\u540c\u7684\u5c5e\u6027\u540d\u3002 withDstAsProperty \u5426 DataFrame \u4e2d\u4f5c\u4e3a\u76ee\u7684\u70b9\u7684\u5217\u662f\u5426\u4e5f\u4f5c\u4e3a\u5c5e\u6027\u5199\u5165\u3002\u9ed8\u8ba4\u503c\u4e3a false \u3002\u5982\u679c\u914d\u7f6e\u4e3a true \uff0c\u8bf7\u786e\u4fdd Edge type \u4e2d\u6709\u548c DstIdField \u76f8\u540c\u7684\u5c5e\u6027\u540d\u3002 withRankAsProperty \u5426 DataFrame \u4e2d\u4f5c\u4e3a rank \u7684\u5217\u662f\u5426\u4e5f\u4f5c\u4e3a\u5c5e\u6027\u5199\u5165\u3002\u9ed8\u8ba4\u503c\u4e3a false \u3002\u5982\u679c\u914d\u7f6e\u4e3a true \uff0c\u8bf7\u786e\u4fdd Edge type \u4e2d\u6709\u548c RankField \u76f8\u540c\u7684\u5c5e\u6027\u540d\u3002 withUser \u5426 NebulaGraph\u7528\u6237\u540d\u3002\u82e5\u672a\u5f00\u542f \u8eab\u4efd\u9a8c\u8bc1 \uff0c\u65e0\u9700\u914d\u7f6e\u7528\u6237\u540d\u548c\u5bc6\u7801\u3002 withPasswd \u5426 NebulaGraph\u7528\u6237\u540d\u5bf9\u5e94\u7684\u5bc6\u7801\u3002 withBatch \u662f \u4e00\u6b21\u5199\u5165\u7684\u6570\u636e\u884c\u6570\uff0c\u9ed8\u8ba4\u503c\u4e3a 512 \u3002\u5f53 withWriteMode \u4e3a update \u65f6\uff0c\u8be5\u53c2\u6570\u7684\u6700\u5927\u503c\u4e3a 512 \u3002 withWriteMode \u5426 \u5199\u5165\u6a21\u5f0f\u3002\u53ef\u9009\u503c\u4e3a insert \u3001 update \u548c delete \u3002\u9ed8\u8ba4\u4e3a insert \u3002","title":"\u5411NebulaGraph\u5199\u5165\u6570\u636e"},{"location":"import-export/nebula-spark-connector/#_7","text":"\u8be6\u7ec6\u7684\u4f7f\u7528\u65b9\u5f0f\u53c2\u89c1 \u793a\u4f8b\u4ee3\u7801 \u3002","title":"\u793a\u4f8b\u4ee3\u7801"},{"location":"import-export/use-importer/","text":"NebulaGraph Importer \u00b6 NebulaGraph Importer\uff08\u7b80\u79f0 Importer\uff09\u662f\u4e00\u6b3eNebulaGraph\u7684 CSV \u6587\u4ef6\u5355\u673a\u5bfc\u5165\u5de5\u5177\uff0c\u53ef\u4ee5\u8bfb\u53d6\u5e76\u6279\u91cf\u5bfc\u5165\u591a\u79cd\u6570\u636e\u6e90\u7684 CSV \u6587\u4ef6\u6570\u636e\uff0c\u8fd8\u652f\u6301\u6279\u91cf\u66f4\u65b0\u548c\u5220\u9664\u64cd\u4f5c\u3002 \u529f\u80fd \u00b6 \u652f\u6301\u591a\u79cd\u6570\u636e\u6e90\uff0c\u5305\u62ec\u672c\u5730\u3001S3\u3001OSS\u3001HDFS\u3001FTP\u3001SFTP\u3001GCS\u3002 \u652f\u6301\u5bfc\u5165 CSV \u683c\u5f0f\u6587\u4ef6\u7684\u6570\u636e\u3002\u5355\u4e2a\u6587\u4ef6\u5185\u53ef\u4ee5\u5305\u542b\u591a\u79cd Tag\u3001\u591a\u79cd Edge type \u6216\u8005\u4e8c\u8005\u6df7\u5408\u7684\u6570\u636e\u3002 \u652f\u6301\u8fc7\u6ee4\u6570\u636e\u6e90\u6570\u636e\u3002 \u652f\u6301\u6279\u91cf\u64cd\u4f5c\uff0c\u5305\u62ec\u5bfc\u5165\u3001\u66f4\u65b0\u3001\u5220\u9664\u3002 \u652f\u6301\u540c\u65f6\u8fde\u63a5\u591a\u4e2a Graph \u670d\u52a1\u8fdb\u884c\u5bfc\u5165\u5e76\u4e14\u52a8\u6001\u8d1f\u8f7d\u5747\u8861\u3002 \u652f\u6301\u5931\u8d25\u540e\u91cd\u8fde\u3001\u91cd\u8bd5\u3002 \u652f\u6301\u591a\u7ef4\u5ea6\u663e\u793a\u7edf\u8ba1\u4fe1\u606f\uff0c\u5305\u62ec\u5bfc\u5165\u65f6\u95f4\u3001\u5bfc\u5165\u767e\u5206\u6bd4\u7b49\u3002\u7edf\u8ba1\u4fe1\u606f\u652f\u6301\u6253\u5370\u5728 Console \u6216\u65e5\u5fd7\u4e2d\u3002 \u652f\u6301 SSL \u52a0\u5bc6\u3002 \u4f18\u52bf \u00b6 \u8f7b\u91cf\u5feb\u6377\uff1a\u4e0d\u9700\u8981\u590d\u6742\u73af\u5883\u5373\u53ef\u4f7f\u7528\uff0c\u5feb\u901f\u5bfc\u5165\u6570\u636e\u3002 \u7075\u6d3b\u7b5b\u9009\uff1a\u901a\u8fc7\u914d\u7f6e\u6587\u4ef6\u53ef\u4ee5\u5b9e\u73b0\u5bf9 CSV \u6587\u4ef6\u6570\u636e\u7684\u7075\u6d3b\u7b5b\u9009\u3002 \u7248\u672c\u517c\u5bb9\u6027 \u00b6 NebulaGraph Importer \u7248\u672c\u548cNebulaGraph\u5185\u6838\u7684\u7248\u672c\u5bf9\u5e94\u5173\u7cfb\u5982\u4e0b\u3002 NebulaGraph\u7248\u672c NebulaGraph Importer \u7248\u672c 3.x.x 3.x.x\u30014.x.x 2.x.x 2.x.x\u30013.x.x Note Importer 4.0.0 \u5bf9 Importer \u8fdb\u884c\u4e86\u91cd\u505a\uff0c\u6027\u80fd\u5f97\u5230\u4e86\u63d0\u9ad8\uff0c\u4f46\u914d\u7f6e\u6587\u4ef6\u4e0d\u517c\u5bb9\u65e7\u7248\u672c\u3002\u5efa\u8bae\u4f7f\u7528\u65b0\u7248 Importer\u3002 \u66f4\u65b0\u8bf4\u660e \u00b6 Release notes \u524d\u63d0\u6761\u4ef6 \u00b6 \u5728\u4f7f\u7528 NebulaGraph Importer \u4e4b\u524d\uff0c\u8bf7\u786e\u4fdd\uff1a \u5df2\u90e8\u7f72NebulaGraph\u670d\u52a1\u3002\u90e8\u7f72\u65b9\u5f0f\u5982\u4e0b\uff1a RPM/DEB \u5305\u5b89\u88c5 Docker Compose \u90e8\u7f72 \u6e90\u7801\u7f16\u8bd1\u5b89\u88c5 NebulaGraph\u4e2d\u5df2\u521b\u5efa Schema\uff0c\u5305\u62ec\u56fe\u7a7a\u95f4\u3001Tag \u548c Edge type\uff0c\u6216\u8005\u901a\u8fc7\u53c2\u6570 manager.hooks.before.statements \u8bbe\u7f6e\u3002 \u64cd\u4f5c\u6b65\u9aa4 \u00b6 \u521b\u5efa CSV \u6587\u4ef6 \u00b6 \u51c6\u5907\u597d\u5f85\u5bfc\u5165\u7684 CSV \u6587\u4ef6\u5e76\u914d\u7f6e YAML \u6587\u4ef6\uff0c\u5373\u53ef\u4f7f\u7528\u672c\u5de5\u5177\u5411NebulaGraph\u6279\u91cf\u5bfc\u5165\u6570\u636e\u3002 Note YAML \u914d\u7f6e\u6587\u4ef6\u8bf4\u660e\u8bf7\u53c2\u89c1\u4e0b\u6587\u7684 \u914d\u7f6e\u6587\u4ef6\u8bf4\u660e \u3002 \u4e0b\u8f7d\u4e8c\u8fdb\u5236\u5305\u8fd0\u884c \u00b6 \u5728 Release \u9875\u9762\u4e0b\u8f7d\u548c\u5b89\u88c5\u4e8c\u8fdb\u5236\u5305\uff0c\u5e76\u6dfb\u52a0\u6267\u884c\u6743\u9650\u3002 Note \u4f7f\u7528 RPM/DEB \u5305\u5b89\u88c5\u7684\u6587\u4ef6\u8def\u5f84\u4e3a /usr/bin/nebula-importer \u3002 \u5728 nebula-importer \u7684\u5b89\u88c5\u76ee\u5f55\u4e0b\uff0c\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\u5bfc\u5165\u6570\u636e\u3002 $ ./<binary_file_name> --config <yaml_config_file_path> \u6e90\u7801\u7f16\u8bd1\u8fd0\u884c \u00b6 \u7f16\u8bd1\u6e90\u7801\u9700\u8981\u90e8\u7f72 Golang \u73af\u5883\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1 Golang \u73af\u5883\u642d\u5efa \u3002 \u514b\u9686\u4ed3\u5e93\u3002 $ git clone -b release-4.1 https://github.com/vesoft-inc/nebula-importer.git Note \u8bf7\u4f7f\u7528\u6b63\u786e\u7684\u5206\u652f\u3002\u4e0d\u540c\u5206\u652f\u7684 rpc \u534f\u8bae\u4e0d\u540c\u3002 \u8fdb\u5165\u76ee\u5f55 nebula-importer \u3002 $ cd nebula-importer \u7f16\u8bd1\u6e90\u7801\u3002 $ make build \u5f00\u59cb\u5bfc\u5165\u6570\u636e\u3002 $ ./bin/nebula-importer --config <yaml_config_file_path> Docker \u65b9\u5f0f\u8fd0\u884c \u00b6 \u4f7f\u7528 Docker \u53ef\u4ee5\u4e0d\u5fc5\u5728\u672c\u5730\u5b89\u88c5 Go \u8bed\u8a00\u73af\u5883\uff0c\u53ea\u9700\u8981\u62c9\u53d6 NebulaGraph Importer \u7684 \u955c\u50cf \uff0c\u5e76\u5c06\u672c\u5730\u914d\u7f6e\u6587\u4ef6\u548c CSV \u6570\u636e\u6587\u4ef6\u6302\u8f7d\u5230\u5bb9\u5668\u4e2d\u3002\u547d\u4ee4\u5982\u4e0b\uff1a $ docker pull vesoft/nebula-importer:<version> $ docker run --rm -ti \\ --network = host \\ -v <config_file>:<config_file> \\ -v <data_dir>:<data_dir> \\ vesoft/nebula-importer:<version> \\ --config <config_file> <config_file> \uff1a\u586b\u5199 YAML \u914d\u7f6e\u6587\u4ef6\u7684\u7edd\u5bf9\u8def\u5f84\u3002 <data_dir> \uff1a\u586b\u5199 CSV \u6570\u636e\u6587\u4ef6\u7684\u7edd\u5bf9\u8def\u5f84\u3002\u5982\u679c\u6587\u4ef6\u4e0d\u5728\u672c\u5730\uff0c\u8bf7\u5ffd\u7565\u8be5\u53c2\u6570\u3002 <version> \uff1a\u586b\u5199 Importer \u7684\u7248\u672c\u53f7\uff0c\u8bf7\u586b\u5199 v4 \u3002 Note \u5efa\u8bae\u4f7f\u7528\u76f8\u5bf9\u8def\u5f84\u3002\u5982\u679c\u4f7f\u7528\u672c\u5730\u7edd\u5bf9\u8def\u5f84\uff0c\u8bf7\u68c0\u67e5\u8def\u5f84\u6620\u5c04\u5230 Docker \u4e2d\u7684\u8def\u5f84\u3002 \u4f8b\u5982\uff1a $ docker pull vesoft/nebula-importer:v4 $ docker run --rm -ti \\ --network = host \\ -v /home/user/config.yaml:/home/user/config.yaml \\ -v /home/user/data:/home/user/data \\ vesoft/nebula-importer:v4 \\ --config /home/user/config.yaml \u914d\u7f6e\u6587\u4ef6\u8bf4\u660e \u00b6 NebulaGraph Importer \u7684 Github \u5185\u63d0\u4f9b\u591a\u79cd\u793a\u4f8b\u914d\u7f6e\u6587\u4ef6\u3002\u914d\u7f6e\u6587\u4ef6\u7528\u6765\u63cf\u8ff0\u5f85\u5bfc\u5165\u6587\u4ef6\u4fe1\u606f\u3001NebulaGraph\u670d\u52a1\u5668\u4fe1\u606f\u7b49\u3002\u4e0b\u6587\u5c06\u5206\u7c7b\u4ecb\u7ecd\u914d\u7f6e\u6587\u4ef6\u5185\u7684\u5b57\u6bb5\u3002 Note \u5982\u679c\u7528\u6237\u4e0b\u8f7d\u7684\u662f\u4e8c\u8fdb\u5236\u5305\uff0c\u8bf7\u624b\u52a8\u521b\u5efa\u914d\u7f6e\u6587\u4ef6\u3002 Client \u914d\u7f6e \u00b6 Client \u914d\u7f6e\u5b58\u50a8\u5ba2\u6237\u7aef\u8fde\u63a5NebulaGraph\u76f8\u5173\u7684\u914d\u7f6e\u3002 \u793a\u4f8b\u914d\u7f6e\u5982\u4e0b\uff1a client : version : v3 address : \"192.168.1.100:9669,192.168.1.101:9669\" user : root password : nebula ssl : enable : true certPath : \"/home/xxx/cert/importer.crt\" keyPath : \"/home/xxx/cert/importer.key\" caPath : \"/home/xxx/cert/root.crt\" insecureSkipVerify : false concurrencyPerAddress : 10 reconnectInitialInterval : 1s retry : 3 retryInitialInterval : 1s \u53c2\u6570 \u9ed8\u8ba4\u503c \u662f\u5426\u5fc5\u987b \u8bf4\u660e client.version v3 \u662f \u6307\u5b9a\u8fde\u63a5\u7684NebulaGraph\u7684\u5927\u7248\u672c\u3002\u5f53\u524d\u4ec5\u652f\u6301 v3 \u3002 client.address \"127.0.0.1:9669\" \u662f \u6307\u5b9a\u8fde\u63a5\u7684NebulaGraph\u5730\u5740\u3002\u591a\u4e2a\u5730\u5740\u7528\u82f1\u6587\u9017\u53f7\uff08,\uff09\u5206\u9694\u3002 client.user root \u5426 NebulaGraph\u7684\u7528\u6237\u540d\u3002 client.password nebula \u5426 NebulaGraph\u7528\u6237\u540d\u5bf9\u5e94\u7684\u5bc6\u7801\u3002 client.ssl.enable false \u5426 \u6307\u5b9a\u662f\u5426\u5f00\u542f SSL \u8ba4\u8bc1\u3002 client.ssl.certPath - \u5426 \u6307\u5b9a SSL \u516c\u94a5\u8bc1\u4e66\u7684\u5b58\u50a8\u8def\u5f84\u3002 \u5f00\u542f SSL \u8ba4\u8bc1\u540e\u8be5\u53c2\u6570\u5fc5\u586b\u3002 client.ssl.keyPath - \u5426 \u6307\u5b9a SSL \u5bc6\u94a5\u7684\u5b58\u50a8\u8def\u5f84\u3002 \u5f00\u542f SSL \u8ba4\u8bc1\u540e\u8be5\u53c2\u6570\u5fc5\u586b\u3002 client.ssl.caPath - \u5426 \u6307\u5b9a CA \u6839\u8bc1\u4e66\u7684\u5b58\u50a8\u8def\u5f84\u3002 \u5f00\u542f SSL \u8ba4\u8bc1\u540e\u8be5\u53c2\u6570\u5fc5\u586b\u3002 client.ssl.insecureSkipVerify false \u5426 \u6307\u5b9a\u662f\u5426\u8df3\u8fc7\u9a8c\u8bc1\u670d\u52a1\u7aef\u7684\u8bc1\u4e66\u94fe\u548c\u4e3b\u673a\u540d\u3002\u5982\u679c\u8bbe\u7f6e\u4e3a true \uff0c\u5219\u63a5\u53d7\u670d\u52a1\u7aef\u63d0\u4f9b\u7684\u4efb\u4f55\u8bc1\u4e66\u94fe\u548c\u4e3b\u673a\u540d\u3002 client.concurrencyPerAddress 10 \u5426 \u5355\u4e2a Graph \u670d\u52a1\u7684\u5ba2\u6237\u7aef\u5e76\u53d1\u8fde\u63a5\u6570\u3002 client.retryInitialInterval 1s \u5426 \u91cd\u8fde\u95f4\u9694\u65f6\u95f4\u3002 client.retry 3 \u5426 nGQL \u8bed\u53e5\u6267\u884c\u5931\u8d25\u7684\u91cd\u8bd5\u6b21\u6570\u3002 client.retryInitialInterval 1s \u5426 \u91cd\u8bd5\u95f4\u9694\u65f6\u95f4\u3002 Manager \u914d\u7f6e \u00b6 Manager \u914d\u7f6e\u662f\u8fde\u63a5\u6570\u636e\u5e93\u540e\u7684\u4eba\u4e3a\u63a7\u5236\u914d\u7f6e\u3002 \u793a\u4f8b\u914d\u7f6e\u5982\u4e0b\uff1a manager : spaceName : basic_string_examples batch : 128 readerConcurrency : 50 importerConcurrency : 512 statsInterval : 10s hooks : before : - statements : - | DROP SPACE IF EXISTS basic_string_examples; CREATE SPACE IF NOT EXISTS basic_string_examples(partition_num=5, replica_factor=1, vid_type=int); USE basic_string_examples; wait : 10s after : - statements : - | SHOW SPACES; \u53c2\u6570 \u9ed8\u8ba4\u503c \u662f\u5426\u5fc5\u987b \u8bf4\u660e manager.spaceName - \u662f \u6307\u5b9a\u6570\u636e\u8981\u5bfc\u5165\u7684\u56fe\u7a7a\u95f4\u3002\u4e0d\u652f\u6301\u540c\u65f6\u5bfc\u5165\u591a\u4e2a\u56fe\u7a7a\u95f4\u3002 manager.batch 128 \u5426 \u6267\u884c\u8bed\u53e5\u7684\u6279\u5904\u7406\u91cf\uff08\u5168\u5c40\u914d\u7f6e\uff09\u3002 \u5bf9\u67d0\u4e2a\u6570\u636e\u6e90\u5355\u72ec\u8bbe\u7f6e\u6279\u5904\u7406\u91cf\u53ef\u4ee5\u4f7f\u7528\u4e0b\u6587\u7684 sources.batch \u3002 manager.readerConcurrency 50 \u5426 \u8bfb\u53d6\u5668\u8bfb\u53d6\u6570\u636e\u6e90\u7684\u5e76\u53d1\u6570\u3002 manager.importerConcurrency 512 \u5426 \u751f\u6210\u5f85\u6267\u884c\u7684 nGQL \u8bed\u53e5\u7684\u5e76\u53d1\u6570\uff0c\u7136\u540e\u4f1a\u8c03\u7528\u5ba2\u6237\u7aef\u6267\u884c\u8fd9\u4e9b\u8bed\u53e5\u3002 manager.statsInterval 10s \u5426 \u6253\u5370\u7edf\u8ba1\u4fe1\u606f\u7684\u65f6\u95f4\u95f4\u9694\u3002 manager.hooks.before.[].statements - \u5426 \u5bfc\u5165\u524d\u5728\u56fe\u7a7a\u95f4\u5185\u6267\u884c\u7684\u547d\u4ee4\u3002 manager.hooks.before.[].wait - \u5426 \u6267\u884c statements \u8bed\u53e5\u540e\u7684\u7b49\u5f85\u65f6\u95f4\u3002 manager.hooks.after.[].statements - \u5426 \u5bfc\u5165\u540e\u5728\u56fe\u7a7a\u95f4\u5185\u6267\u884c\u7684\u547d\u4ee4\u3002 manager.hooks.after.[].wait - \u5426 \u6267\u884c statements \u8bed\u53e5\u540e\u7684\u7b49\u5f85\u65f6\u95f4\u3002 Log \u914d\u7f6e \u00b6 Log \u914d\u7f6e\u662f\u8bbe\u7f6e\u65e5\u5fd7\u76f8\u5173\u914d\u7f6e\u3002 \u793a\u4f8b\u914d\u7f6e\u5982\u4e0b\uff1a log : level : INFO console : true files : - logs/nebula-importer.log \u53c2\u6570 \u9ed8\u8ba4\u503c \u662f\u5426\u5fc5\u987b \u8bf4\u660e log.level INFO \u5426 \u65e5\u5fd7\u7ea7\u522b\u3002\u53ef\u9009\u503c\u4e3a DEBUG \u3001 INFO \u3001 WARN \u3001 ERROR \u3001 PANIC \u3001 FATAL \u3002 log.console true \u5426 \u5b58\u50a8\u65e5\u5fd7\u65f6\u662f\u5426\u5c06\u65e5\u5fd7\u540c\u6b65\u6253\u5370\u5230 Console\u3002 log.files - \u5426 \u65e5\u5fd7\u6587\u4ef6\u8def\u5f84\u3002\u9700\u624b\u52a8\u521b\u5efa\u65e5\u5fd7\u6587\u4ef6\u76ee\u5f55\u3002 Source \u914d\u7f6e \u00b6 Source \u914d\u7f6e\u4e2d\u9700\u8981\u914d\u7f6e\u6570\u636e\u6e90\u4fe1\u606f\u3001\u6570\u636e\u5904\u7406\u65b9\u5f0f\u548c Schema \u6620\u5c04\u3002 \u793a\u4f8b\u914d\u7f6e\u5982\u4e0b\uff1a sources : - path : ./person.csv # \u6307\u5b9a\u5b58\u50a8\u6570\u636e\u6587\u4ef6\u7684\u8def\u5f84\u3002\u5982\u679c\u4f7f\u7528\u76f8\u5bf9\u8def\u5f84\uff0c\u5219\u8def\u5f84\u548c\u5f53\u524d\u914d\u7f6e\u6587\u4ef6\u76ee\u5f55\u62fc\u63a5\u3002\u4e5f\u652f\u6301\u901a\u914d\u7b26\u6587\u4ef6\u540d\uff0c\u4f8b\u5982\uff1a./follower-*.csv\uff0c\u8bf7\u786e\u4fdd\u6240\u6709\u5339\u914d\u7684\u6587\u4ef6\u5177\u6709\u76f8\u540c\u7684\u67b6\u6784\u3002 # - s3: # AWS S3 # endpoint: endpoint # \u53ef\u9009\u3002S3 \u670d\u52a1\u7aef\u70b9\uff0c\u5982\u679c\u4f7f\u7528 AWS S3 \u53ef\u4ee5\u7701\u7565\u3002 # region: us-east-1 # \u5fc5\u586b\u3002S3 \u670d\u52a1\u7684\u533a\u57df\u3002 # bucket: gdelt-open-data # \u5fc5\u586b\u3002S3 \u670d\u52a1\u4e2d\u7684 bucket\u3002 # key: events/20190918.export.csv # \u5fc5\u586b\u3002S3 \u670d\u52a1\u4e2d\u6587\u4ef6\u7684 key\u3002 # accessKeyID: \"\" # \u53ef\u9009\u3002S3 \u670d\u52a1\u7684\u8bbf\u95ee\u5bc6\u94a5\u3002\u5982\u679c\u662f\u516c\u5171\u6570\u636e\uff0c\u5219\u65e0\u9700\u914d\u7f6e\u3002 # accessKeySecret: \"\" # \u53ef\u9009\u3002S3 \u670d\u52a1\u7684\u5bc6\u94a5\u3002\u5982\u679c\u662f\u516c\u5171\u6570\u636e\uff0c\u5219\u65e0\u9700\u914d\u7f6e\u3002 # - oss: # endpoint: https://oss-cn-hangzhou.aliyuncs.com # \u5fc5\u586b\u3002OSS \u670d\u52a1\u7aef\u70b9\u3002 # bucket: bucketName # \u5fc5\u586b\u3002OSS \u670d\u52a1\u4e2d\u7684 bucket\u3002 # key: objectKey # \u5fc5\u586b\u3002OSS \u670d\u52a1\u4e2d\u6587\u4ef6\u7684 object key\u3002 # accessKeyID: accessKey # \u5fc5\u586b\u3002OSS \u670d\u52a1\u7684\u8bbf\u95ee\u5bc6\u94a5\u3002 # accessKeySecret: secretKey # \u5fc5\u586b\u3002OSS \u670d\u52a1\u7684\u79d8\u94a5\u3002 # - ftp: # host: 192.168.0.10 # \u5fc5\u586b\u3002FTP \u670d\u52a1\u7684\u4e3b\u673a\u3002 # port: 21 # \u5fc5\u586b\u3002FTP \u670d\u52a1\u7684\u7aef\u53e3\u3002 # user: user # \u5fc5\u586b\u3002FTP \u670d\u52a1\u7684\u7528\u6237\u540d\u3002 # password: password # \u5fc5\u586b\u3002FTP \u670d\u52a1\u7684\u5bc6\u7801\u3002 # path: \"/events/20190918.export.csv\" # FTP \u670d\u52a1\u4e2d\u6587\u4ef6\u7684\u8def\u5f84\u3002 # - sftp: # host: 192.168.0.10 # \u5fc5\u586b\u3002SFTP \u670d\u52a1\u7684\u4e3b\u673a\u3002 # port: 22 # \u5fc5\u586b\u3002SFTP \u670d\u52a1\u7684\u7aef\u53e3\u3002 # user: user # \u5fc5\u586b\u3002SFTP \u670d\u52a1\u7684\u7528\u6237\u540d\u3002 # password: password # \u53ef\u9009\u3002SFTP \u670d\u52a1\u7684\u5bc6\u7801\u3002 # keyFile: keyFile # \u53ef\u9009\u3002SFTP \u670d\u52a1\u7684 SSH \u5bc6\u94a5\u6587\u4ef6\u8def\u5f84\u3002 # keyData: keyData $ \u53ef\u9009\u3002SFTP \u670d\u52a1\u7684 SSH \u5bc6\u94a5\u6587\u4ef6\u5185\u5bb9\u3002 # passphrase: passphrase # \u53ef\u9009\u3002SFTP \u670d\u52a1\u7684 SSH \u5bc6\u94a5\u5bc6\u7801\u3002 # path: \"/events/20190918.export.csv\" # \u5fc5\u586b\u3002SFTP \u670d\u52a1\u4e2d\u6587\u4ef6\u7684\u8def\u5f84\u3002 # - hdfs: # address: \"127.0.0.1:8020\" # \u5fc5\u586b\u3002HDFS \u670d\u52a1\u7684\u5730\u5740\u3002 # user: \"hdfs\" # \u53ef\u9009\u3002HDFS \u670d\u52a1\u7684\u7528\u6237\u540d\u3002 # servicePrincipalName: <Kerberos Service Principal Name> # \u53ef\u9009\u3002\u542f\u7528 Kerberos \u8ba4\u8bc1\u65f6\uff0cHDFS \u670d\u52a1\u7684 Kerberos \u670d\u52a1\u5b9e\u4f8b\u540d\u79f0\u3002 # krb5ConfigFile: <Kerberos config file> # \u53ef\u9009\u3002\u542f\u7528 Kerberos \u8ba4\u8bc1\u65f6\uff0cHDFS \u670d\u52a1\u7684 Kerberos \u914d\u7f6e\u6587\u4ef6\u8def\u5f84\uff0c\u9ed8\u8ba4\u4e3a`/etc/krb5.conf`\u3002 # ccacheFile: <Kerberos ccache file> # \u53ef\u9009\u3002\u542f\u7528 Kerberos \u8ba4\u8bc1\u65f6\uff0cHDFS \u670d\u52a1\u7684 Kerberos ccache \u6587\u4ef6\u8def\u5f84\u3002 # keyTabFile: <Kerberos keytab file> # \u53ef\u9009\u3002\u542f\u7528 Kerberos \u8ba4\u8bc1\u65f6\uff0cHDFS \u670d\u52a1\u7684 Kerberos keytab \u6587\u4ef6\u8def\u5f84\u3002 # password: <Kerberos password> # \u53ef\u9009\u3002\u542f\u7528 Kerberos \u8ba4\u8bc1\u65f6\uff0cHDFS \u670d\u52a1\u7684 Kerberos \u5bc6\u7801\u3002 # dataTransferProtection: <Kerberos Data Transfer Protection> # \u53ef\u9009\u3002\u542f\u7528 Kerberos \u8ba4\u8bc1\u65f6\u7684\u4f20\u8f93\u52a0\u5bc6\u7c7b\u578b\u3002\u53ef\u9009\u503c\u4e3a`authentication`\u3001`integrity`\u3001`privacy`\u3002 # disablePAFXFAST: false # \u53ef\u9009\u3002\u662f\u5426\u7981\u6b62\u5ba2\u6237\u7aef\u4f7f\u7528\u9884\u8eab\u4efd\u9a8c\u8bc1\uff08PA_FX_FAST\uff09\u3002 # path: \"/events/20190918.export.csv\" # \u5fc5\u586b\u3002HDFS \u670d\u52a1\u4e2d\u6587\u4ef6\u7684\u8def\u5f84\u3002\u4e5f\u652f\u6301\u901a\u914d\u7b26\u6587\u4ef6\u540d\uff0c\u4f8b\u5982\uff1a/events/*.export.csv\uff0c\u8bf7\u786e\u4fdd\u6240\u6709\u5339\u914d\u7684\u6587\u4ef6\u5177\u6709\u76f8\u540c\u7684\u67b6\u6784\u3002 # - gcs: # Google Cloud Storage # bucket: chicago-crime-sample # \u5fc5\u586b\u3002GCS \u670d\u52a1\u4e2d\u7684 bucket \u540d\u79f0\u3002 # key: stats/000000000000.csv # \u5fc5\u586b\u3002GCS \u670d\u52a1\u4e2d\u6587\u4ef6\u7684\u8def\u5f84\u3002 # withoutAuthentication: false # \u53ef\u9009\u3002\u662f\u5426\u533f\u540d\u8bbf\u95ee\u3002\u9ed8\u8ba4\u4e3a false\uff0c\u5373\u4f7f\u7528\u51ed\u8bc1\u8bbf\u95ee\u3002 # # \u4f7f\u7528\u51ed\u8bc1\u8bbf\u95ee\u65f6\uff0ccredentialsFile \u548c credentialsJSON \u53c2\u6570\u4e8c\u9009\u4e00\u5373\u53ef\u3002 # credentialsFile: \"/path/to/your/credentials/file\" # \u53ef\u9009\u3002GCS \u670d\u52a1\u7684\u51ed\u8bc1\u6587\u4ef6\u8def\u5f84\u3002 # credentialsJSON: '{ # \u53ef\u9009\u3002GCS \u670d\u52a1\u7684\u51ed\u8bc1 JSON \u5185\u5bb9\u3002 # \"type\": \"service_account\", # \"project_id\": \"your-project-id\", # \"private_key_id\": \"key-id\", # \"private_key\": \"-----BEGIN PRIVATE KEY-----\\nxxxxx\\n-----END PRIVATE KEY-----\\n\", # \"client_email\": \"your-client@your-project-id.iam.gserviceaccount.com\", # \"client_id\": \"client-id\", # \"auth_uri\": \"https://accounts.google.com/o/oauth2/auth\", # \"token_uri\": \"https://oauth2.googleapis.com/token\", # \"auth_provider_x509_cert_url\": \"https://www.googleapis.com/oauth2/v1/certs\", # \"client_x509_cert_url\": \"https://www.googleapis.com/robot/v1/metadata/x509/your-client%40your-project-id.iam.gserviceaccount.com\", # \"universe_domain\": \"googleapis.com\" # }' batch : 256 csv : delimiter : \"|\" withHeader : false lazyQuotes : false tags : - name : Person # mode: INSERT # filter: # expr: Record[1] == \"XXX\" id : type : \"STRING\" function : \"hash\" # index: 0 concatItems : - person_ - 0 - _id props : - name : \"firstName\" type : \"STRING\" index : 1 - name : \"lastName\" type : \"STRING\" index : 2 - name : \"gender\" type : \"STRING\" index : 3 nullable : true defaultValue : female - name : \"birthday\" type : \"DATE\" index : 4 nullable : true nullValue : _NULL_ - name : \"creationDate\" type : \"DATETIME\" index : 5 - name : \"locationIP\" type : \"STRING\" index : 6 - name : \"browserUsed\" type : \"STRING\" index : 7 - path : ./knows.csv batch : 256 edges : - name : KNOWS # person_knows_person # mode: INSERT # filter: # expr: Record[1] == \"XXX\" src : id : type : \"STRING\" concatItems : - person_ - 0 - _id dst : id : type : \"STRING\" concatItems : - person_ - 1 - _id props : - name : \"creationDate\" type : \"DATETIME\" index : 2 nullable : true nullValue : _NULL_ defaultValue : 0000-00-00T00:00:00 \u914d\u7f6e\u4e3b\u8981\u5305\u62ec\u4ee5\u4e0b\u51e0\u4e2a\u90e8\u5206\uff1a \u6307\u5b9a\u6570\u636e\u6e90\u4fe1\u606f\u3002 \u6307\u5b9a\u6267\u884c\u8bed\u53e5\u7684\u6279\u5904\u7406\u91cf\u3002 \u6307\u5b9a CSV \u6587\u4ef6\u683c\u5f0f\u4fe1\u606f\u3002 \u6307\u5b9a Tag \u7684\u6a21\u5f0f\u6620\u5c04\u3002 \u6307\u5b9a Edge type \u7684\u6a21\u5f0f\u6620\u5c04\u3002 \u53c2\u6570 \u9ed8\u8ba4\u503c \u662f\u5426\u5fc5\u987b \u8bf4\u660e sources.path sources.s3 sources.oss sources.ftp sources.sftp sources.hdfs - \u5426 \u6307\u5b9a\u6570\u636e\u6e90\u4fe1\u606f\uff0c\u4f8b\u5982\u672c\u5730\u6587\u4ef6\u3001HDFS\u3001S3 \u7b49\u3002\u4e00\u4e2a source \u53ea\u80fd\u914d\u7f6e\u4e00\u79cd\u6570\u636e\u6e90\uff0c\u914d\u7f6e\u591a\u4e2a\u6570\u636e\u6e90\u8bf7\u5728\u591a\u4e2a source \u5185\u914d\u7f6e\u3002 \u4e0d\u540c\u6570\u636e\u6e90\u7684\u914d\u7f6e\u9879\u8bf4\u660e\u8bf7\u53c2\u89c1\u793a\u4f8b\u5185\u7684\u6ce8\u91ca\u3002 sources.batch 256 \u5426 \u5bfc\u5165\u8be5\u6570\u636e\u6e90\u65f6\u6267\u884c\u8bed\u53e5\u7684\u6279\u5904\u7406\u91cf\u3002\u4f18\u5148\u7ea7\u9ad8\u4e8e manager.batch \u3002 sources.csv.delimiter , \u5426 CSV \u6587\u4ef6\u7684\u5206\u9694\u7b26\u3002\u4ec5\u652f\u6301 1 \u4e2a\u5b57\u7b26\u7684\u5b57\u7b26\u4e32\u5206\u9694\u7b26\u3002\u4f7f\u7528\u7279\u6b8a\u5b57\u7b26\u505a\u5206\u9694\u7b26\u65f6\u9700\u8981\u8fdb\u884c\u8f6c\u4e49\u3002\u4f8b\u5982\u5f53\u5206\u9694\u7b26\u4e3a\u5341\u516d\u8fdb\u5236 0x03 \u5373 Ctrl+C \u65f6\uff0c\u8f6c\u4e49\u7684\u5199\u6cd5\u4e3a\uff1a \"\\x03\" \u6216 \"\\u0003\" \u3002\u5173\u4e8e yaml \u683c\u5f0f\u7279\u6b8a\u5b57\u7b26\u8f6c\u4e49\u7684\u7ec6\u8282\u8bf7\u53c2\u89c1 Escaped Characters \u3002 sources.csv.withHeader false \u5426 \u662f\u5426\u5ffd\u7565 CSV \u6587\u4ef6\u4e2d\u7684\u7b2c\u4e00\u6761\u8bb0\u5f55\u3002 sources.csv.lazyQuotes false \u5426 \u662f\u5426\u5141\u8bb8\u60f0\u6027\u89e3\u6790\u5f15\u53f7\u3002\u5982\u679c\u503c\u4e3a true \uff0c\u5f15\u53f7\u53ef\u4ee5\u51fa\u73b0\u5728\u975e\u5f15\u53f7\u5b57\u6bb5\u4e2d\uff0c\u975e\u53cc\u5f15\u53f7\u53ef\u4ee5\u51fa\u73b0\u5728\u5f15\u53f7\u5b57\u6bb5\u4e2d\uff0c\u800c\u4e0d\u4f1a\u5f15\u53d1\u89e3\u6790\u9519\u8bef\u3002 sources.tags.name - \u662f Tag \u540d\u79f0\u3002 sources.tags.mode INSERT \u5426 \u6279\u91cf\u64cd\u4f5c\u7c7b\u578b\uff0c\u5305\u62ec\u5bfc\u5165\u3001\u66f4\u65b0\u548c\u5220\u9664\u3002\u53ef\u9009\u503c\u4e3a INSERT \u3001 UPDATE \u548c DELETE \u3002 sources.tags.filter.expr - \u5426 \u8fc7\u6ee4\u6570\u636e\uff0c\u6ee1\u8db3\u8fc7\u6ee4\u6761\u4ef6\u7684\u624d\u4f1a\u5bfc\u5165\u3002\u652f\u6301\u7684\u6bd4\u8f83\u7b26\u4e3a == \u3001 != \u3001 < \u3001 > \u3001 <= \u548c >= \u3002\u652f\u6301\u7684\u903b\u8f91\u8fd0\u7b97\u7b26\u4e3a not \uff08!\uff09\u3001 and \uff08&&\uff09\u548c or \uff08||\uff09\u3002\u4f8b\u5982 (Record[0] == \"Mahinda\" or Record[0] == \"Michael\") and Record[3] == \"male\" \u3002 sources.tags.id.type STRING \u5426 VID \u7684\u7c7b\u578b\u3002 sources.tags.id.function - \u5426 \u751f\u6210 VID \u7684\u51fd\u6570\u3002\u76ee\u524d\u4ec5\u652f\u6301 hash \u3002 sources.tags.id.index - \u5426 VID \u5bf9\u5e94\u7684\u6570\u636e\u6587\u4ef6\u4e2d\u7684\u5217\u53f7\u3002\u5982\u679c\u672a\u914d\u7f6e sources.tags.id.concatItems \uff0c\u8be5\u53c2\u6570\u5fc5\u987b\u914d\u7f6e\u3002 sources.tags.id.concatItems - \u5426 \u7528\u4e8e\u8fde\u63a5\u4e24\u4e2a\u6216\u591a\u4e2a\u6570\u7ec4\uff0c\u8fde\u63a5\u9879\u53ef\u4ee5\u662f string \u3001 int \u6216\u8005\u6df7\u5408\u3002 string \u4ee3\u8868\u5e38\u91cf\uff0c int \u8868\u793a\u7d22\u5f15\u5217\u3002\u5982\u679c\u8bbe\u7f6e\u4e86\u8be5\u53c2\u6570\uff0c sources.tags.id.index \u53c2\u6570\u5c06\u4e0d\u751f\u6548\u3002 sources.tags.ignoreExistedIndex true \u5426 \u662f\u5426\u542f\u7528 IGNORE_EXISTED_INDEX \uff0c\u5373\u63d2\u5165\u70b9\u540e\u4e0d\u66f4\u65b0\u7d22\u5f15\u3002 sources.tags.props.name - \u662f VID \u4e0a\u7684\u5c5e\u6027\u540d\u79f0\uff0c\u5fc5\u987b\u4e0e\u6570\u636e\u5e93\u4e2d\u7684\u5c5e\u6027\u76f8\u540c\u3002 sources.tags.props.type STRING \u5426 VID \u4e0a\u5c5e\u6027\u7684\u6570\u636e\u7c7b\u578b\u3002\u76ee\u524d\u652f\u6301 BOOL \u3001 INT \u3001 FLOAT \u3001 DOUBLE \u3001 STRING \u3001 TIME \u3001 TIMESTAMP \u3001 DATE \u3001 DATETIME \u3001 GEOGRAPHY \u3001 GEOGRAPHY(POINT) \u3001 GEOGRAPHY(LINESTRING) \u3001 GEOGRAPHY(POLYGON) \u3002 sources.tags.props.index - \u662f \u5c5e\u6027\u503c\u5bf9\u5e94\u7684\u6570\u636e\u6587\u4ef6\u4e2d\u7684\u5217\u53f7\u3002 sources.tags.props.nullable false \u5426 \u5c5e\u6027\u662f\u5426\u53ef\u4ee5\u4e3a NULL \uff0c\u53ef\u9009 true \u6216\u8005 false \u3002 sources.tags.props.nullValue - \u5426 nullable \u8bbe\u7f6e\u4e3a true \u65f6\uff0c\u5c5e\u6027\u7684\u503c\u4e0e nullValue \u76f8\u7b49\u5219\u5c06\u8be5\u5c5e\u6027\u503c\u8bbe\u7f6e\u4e3a NULL \u3002 sources.tags.props.alternativeIndices - \u5426 \u5f53 nullable \u4e3a false \u65f6\u5ffd\u7565\u3002\u8be5\u5c5e\u6027\u6839\u636e\u7d22\u5f15\u987a\u5e8f\u4ece\u6587\u4ef6\u4e2d\u83b7\u53d6\uff0c\u76f4\u5230\u4e0d\u7b49\u4e8e nullValue \u3002 sources.tags.props.defaultValue - \u5426 \u5f53 nullable \u4e3a false \u65f6\u5ffd\u7565\u3002\u6839\u636e index \u548c alternativeIndices \u83b7\u53d6\u7684\u6240\u6709\u503c\u4e3a nullValue \u65f6\u8bbe\u7f6e\u9ed8\u8ba4\u503c\u3002 sources.edges.name - \u662f Edge type \u540d\u79f0\u3002 sources.edges.mode INSERT \u5426 \u6279\u91cf\u64cd\u4f5c\u7c7b\u578b\uff0c\u5305\u62ec\u5bfc\u5165\u3001\u66f4\u65b0\u548c\u5220\u9664\u3002\u53ef\u9009\u503c\u4e3a INSERT \u3001 UPDATE \u548c DELETE \u3002 sources.edges.filter.expr - \u5426 \u8fc7\u6ee4\u6570\u636e\uff0c\u6ee1\u8db3\u8fc7\u6ee4\u6761\u4ef6\u7684\u624d\u4f1a\u5bfc\u5165\u3002\u652f\u6301\u7684\u6bd4\u8f83\u7b26\u4e3a == \u3001 != \u3001 < \u3001 > \u3001 <= \u548c >= \u3002\u652f\u6301\u7684\u903b\u8f91\u8fd0\u7b97\u7b26\u4e3a not \uff08!\uff09\u3001 and \uff08&&\uff09\u548c or \uff08||\uff09\u3002\u4f8b\u5982 (Record[0] == \"Mahinda\" or Record[0] == \"Michael\") and Record[3] == \"male\" \u3002 sources.edges.src.id.type STRING \u5426 \u8fb9\u4e0a\u8d77\u70b9 VID \u7684\u6570\u636e\u7c7b\u578b\u3002 sources.edges.src.id.index - \u662f \u8fb9\u4e0a\u8d77\u70b9 VID \u5bf9\u5e94\u7684\u6570\u636e\u6587\u4ef6\u4e2d\u7684\u5217\u53f7\u3002 sources.edges.dst.id.type STRING \u5426 \u8fb9\u4e0a\u7ec8\u70b9 VID \u7684\u6570\u636e\u7c7b\u578b\u3002 sources.edges.dst.id.index - \u662f \u8fb9\u4e0a\u7ec8\u70b9 VID \u5bf9\u5e94\u7684\u6570\u636e\u6587\u4ef6\u4e2d\u7684\u5217\u53f7\u3002 sources.edges.rank.index - \u5426 \u8fb9\u4e0a RANK \u5bf9\u5e94\u7684\u6570\u636e\u6587\u4ef6\u4e2d\u7684\u5217\u53f7\u3002 sources.edges.ignoreExistedIndex true \u5426 \u662f\u5426\u542f\u7528 IGNORE_EXISTED_INDEX \uff0c\u5373\u63d2\u5165\u70b9\u540e\u4e0d\u66f4\u65b0\u7d22\u5f15\u3002 sources.edges.props.name - \u5426 \u8fb9\u4e0a\u5c5e\u6027\u7684\u540d\u79f0\uff0c\u5fc5\u987b\u4e0e\u6570\u636e\u5e93\u4e2d\u7684\u5c5e\u6027\u76f8\u540c\u3002 sources.edges.props.type STRING \u5426 \u8fb9\u4e0a\u5c5e\u6027\u7684\u6570\u636e\u7c7b\u578b\u3002\u76ee\u524d\u652f\u6301 BOOL \u3001 INT \u3001 FLOAT \u3001 DOUBLE \u3001 STRING \u3001 TIME \u3001 TIMESTAMP \u3001 DATE \u3001 DATETIME \u3001 GEOGRAPHY \u3001 GEOGRAPHY(POINT) \u3001 GEOGRAPHY(LINESTRING) \u3001 GEOGRAPHY(POLYGON) \u3002 sources.edges.props.index - \u5426 \u5c5e\u6027\u503c\u5bf9\u5e94\u7684\u6570\u636e\u6587\u4ef6\u4e2d\u7684\u5217\u53f7\u3002 sources.edges.props.nullable - \u5426 \u5c5e\u6027\u662f\u5426\u53ef\u4ee5\u4e3a NULL \uff0c\u53ef\u9009 true \u6216\u8005 false \u3002 sources.edges.props.nullValue - \u5426 nullable \u8bbe\u7f6e\u4e3a true \u65f6\uff0c\u5c5e\u6027\u7684\u503c\u4e0e nullValue \u76f8\u7b49\u5219\u5c06\u8be5\u5c5e\u6027\u503c\u8bbe\u7f6e\u4e3a NULL \u3002 sources.edges.props.defaultValue - \u5426 \u5f53 nullable \u4e3a false \u65f6\u5ffd\u7565\u3002\u6839\u636e index \u548c alternativeIndices \u83b7\u53d6\u7684\u6240\u6709\u503c\u4e3a nullValue \u65f6\u8bbe\u7f6e\u9ed8\u8ba4\u503c\u3002 Note CSV \u6587\u4ef6\u4e2d\u5217\u7684\u5e8f\u53f7\u4ece 0 \u5f00\u59cb\uff0c\u5373\u7b2c\u4e00\u5217\u7684\u5e8f\u53f7\u4e3a 0\uff0c\u7b2c\u4e8c\u5217\u7684\u5e8f\u53f7\u4e3a 1\u3002","title":"\u4f7f\u7528 NebulaGraph Importer"},{"location":"import-export/use-importer/#nebulagraph_importer","text":"NebulaGraph Importer\uff08\u7b80\u79f0 Importer\uff09\u662f\u4e00\u6b3eNebulaGraph\u7684 CSV \u6587\u4ef6\u5355\u673a\u5bfc\u5165\u5de5\u5177\uff0c\u53ef\u4ee5\u8bfb\u53d6\u5e76\u6279\u91cf\u5bfc\u5165\u591a\u79cd\u6570\u636e\u6e90\u7684 CSV \u6587\u4ef6\u6570\u636e\uff0c\u8fd8\u652f\u6301\u6279\u91cf\u66f4\u65b0\u548c\u5220\u9664\u64cd\u4f5c\u3002","title":"NebulaGraph Importer"},{"location":"import-export/use-importer/#_1","text":"\u652f\u6301\u591a\u79cd\u6570\u636e\u6e90\uff0c\u5305\u62ec\u672c\u5730\u3001S3\u3001OSS\u3001HDFS\u3001FTP\u3001SFTP\u3001GCS\u3002 \u652f\u6301\u5bfc\u5165 CSV \u683c\u5f0f\u6587\u4ef6\u7684\u6570\u636e\u3002\u5355\u4e2a\u6587\u4ef6\u5185\u53ef\u4ee5\u5305\u542b\u591a\u79cd Tag\u3001\u591a\u79cd Edge type \u6216\u8005\u4e8c\u8005\u6df7\u5408\u7684\u6570\u636e\u3002 \u652f\u6301\u8fc7\u6ee4\u6570\u636e\u6e90\u6570\u636e\u3002 \u652f\u6301\u6279\u91cf\u64cd\u4f5c\uff0c\u5305\u62ec\u5bfc\u5165\u3001\u66f4\u65b0\u3001\u5220\u9664\u3002 \u652f\u6301\u540c\u65f6\u8fde\u63a5\u591a\u4e2a Graph \u670d\u52a1\u8fdb\u884c\u5bfc\u5165\u5e76\u4e14\u52a8\u6001\u8d1f\u8f7d\u5747\u8861\u3002 \u652f\u6301\u5931\u8d25\u540e\u91cd\u8fde\u3001\u91cd\u8bd5\u3002 \u652f\u6301\u591a\u7ef4\u5ea6\u663e\u793a\u7edf\u8ba1\u4fe1\u606f\uff0c\u5305\u62ec\u5bfc\u5165\u65f6\u95f4\u3001\u5bfc\u5165\u767e\u5206\u6bd4\u7b49\u3002\u7edf\u8ba1\u4fe1\u606f\u652f\u6301\u6253\u5370\u5728 Console \u6216\u65e5\u5fd7\u4e2d\u3002 \u652f\u6301 SSL \u52a0\u5bc6\u3002","title":"\u529f\u80fd"},{"location":"import-export/use-importer/#_2","text":"\u8f7b\u91cf\u5feb\u6377\uff1a\u4e0d\u9700\u8981\u590d\u6742\u73af\u5883\u5373\u53ef\u4f7f\u7528\uff0c\u5feb\u901f\u5bfc\u5165\u6570\u636e\u3002 \u7075\u6d3b\u7b5b\u9009\uff1a\u901a\u8fc7\u914d\u7f6e\u6587\u4ef6\u53ef\u4ee5\u5b9e\u73b0\u5bf9 CSV \u6587\u4ef6\u6570\u636e\u7684\u7075\u6d3b\u7b5b\u9009\u3002","title":"\u4f18\u52bf"},{"location":"import-export/use-importer/#_3","text":"NebulaGraph Importer \u7248\u672c\u548cNebulaGraph\u5185\u6838\u7684\u7248\u672c\u5bf9\u5e94\u5173\u7cfb\u5982\u4e0b\u3002 NebulaGraph\u7248\u672c NebulaGraph Importer \u7248\u672c 3.x.x 3.x.x\u30014.x.x 2.x.x 2.x.x\u30013.x.x Note Importer 4.0.0 \u5bf9 Importer \u8fdb\u884c\u4e86\u91cd\u505a\uff0c\u6027\u80fd\u5f97\u5230\u4e86\u63d0\u9ad8\uff0c\u4f46\u914d\u7f6e\u6587\u4ef6\u4e0d\u517c\u5bb9\u65e7\u7248\u672c\u3002\u5efa\u8bae\u4f7f\u7528\u65b0\u7248 Importer\u3002","title":"\u7248\u672c\u517c\u5bb9\u6027"},{"location":"import-export/use-importer/#_4","text":"Release notes","title":"\u66f4\u65b0\u8bf4\u660e"},{"location":"import-export/use-importer/#_5","text":"\u5728\u4f7f\u7528 NebulaGraph Importer \u4e4b\u524d\uff0c\u8bf7\u786e\u4fdd\uff1a \u5df2\u90e8\u7f72NebulaGraph\u670d\u52a1\u3002\u90e8\u7f72\u65b9\u5f0f\u5982\u4e0b\uff1a RPM/DEB \u5305\u5b89\u88c5 Docker Compose \u90e8\u7f72 \u6e90\u7801\u7f16\u8bd1\u5b89\u88c5 NebulaGraph\u4e2d\u5df2\u521b\u5efa Schema\uff0c\u5305\u62ec\u56fe\u7a7a\u95f4\u3001Tag \u548c Edge type\uff0c\u6216\u8005\u901a\u8fc7\u53c2\u6570 manager.hooks.before.statements \u8bbe\u7f6e\u3002","title":"\u524d\u63d0\u6761\u4ef6"},{"location":"import-export/use-importer/#_6","text":"","title":"\u64cd\u4f5c\u6b65\u9aa4"},{"location":"import-export/use-importer/#csv","text":"\u51c6\u5907\u597d\u5f85\u5bfc\u5165\u7684 CSV \u6587\u4ef6\u5e76\u914d\u7f6e YAML \u6587\u4ef6\uff0c\u5373\u53ef\u4f7f\u7528\u672c\u5de5\u5177\u5411NebulaGraph\u6279\u91cf\u5bfc\u5165\u6570\u636e\u3002 Note YAML \u914d\u7f6e\u6587\u4ef6\u8bf4\u660e\u8bf7\u53c2\u89c1\u4e0b\u6587\u7684 \u914d\u7f6e\u6587\u4ef6\u8bf4\u660e \u3002","title":"\u521b\u5efa CSV \u6587\u4ef6"},{"location":"import-export/use-importer/#_7","text":"\u5728 Release \u9875\u9762\u4e0b\u8f7d\u548c\u5b89\u88c5\u4e8c\u8fdb\u5236\u5305\uff0c\u5e76\u6dfb\u52a0\u6267\u884c\u6743\u9650\u3002 Note \u4f7f\u7528 RPM/DEB \u5305\u5b89\u88c5\u7684\u6587\u4ef6\u8def\u5f84\u4e3a /usr/bin/nebula-importer \u3002 \u5728 nebula-importer \u7684\u5b89\u88c5\u76ee\u5f55\u4e0b\uff0c\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\u5bfc\u5165\u6570\u636e\u3002 $ ./<binary_file_name> --config <yaml_config_file_path>","title":"\u4e0b\u8f7d\u4e8c\u8fdb\u5236\u5305\u8fd0\u884c"},{"location":"import-export/use-importer/#_8","text":"\u7f16\u8bd1\u6e90\u7801\u9700\u8981\u90e8\u7f72 Golang \u73af\u5883\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1 Golang \u73af\u5883\u642d\u5efa \u3002 \u514b\u9686\u4ed3\u5e93\u3002 $ git clone -b release-4.1 https://github.com/vesoft-inc/nebula-importer.git Note \u8bf7\u4f7f\u7528\u6b63\u786e\u7684\u5206\u652f\u3002\u4e0d\u540c\u5206\u652f\u7684 rpc \u534f\u8bae\u4e0d\u540c\u3002 \u8fdb\u5165\u76ee\u5f55 nebula-importer \u3002 $ cd nebula-importer \u7f16\u8bd1\u6e90\u7801\u3002 $ make build \u5f00\u59cb\u5bfc\u5165\u6570\u636e\u3002 $ ./bin/nebula-importer --config <yaml_config_file_path>","title":"\u6e90\u7801\u7f16\u8bd1\u8fd0\u884c"},{"location":"import-export/use-importer/#docker","text":"\u4f7f\u7528 Docker \u53ef\u4ee5\u4e0d\u5fc5\u5728\u672c\u5730\u5b89\u88c5 Go \u8bed\u8a00\u73af\u5883\uff0c\u53ea\u9700\u8981\u62c9\u53d6 NebulaGraph Importer \u7684 \u955c\u50cf \uff0c\u5e76\u5c06\u672c\u5730\u914d\u7f6e\u6587\u4ef6\u548c CSV \u6570\u636e\u6587\u4ef6\u6302\u8f7d\u5230\u5bb9\u5668\u4e2d\u3002\u547d\u4ee4\u5982\u4e0b\uff1a $ docker pull vesoft/nebula-importer:<version> $ docker run --rm -ti \\ --network = host \\ -v <config_file>:<config_file> \\ -v <data_dir>:<data_dir> \\ vesoft/nebula-importer:<version> \\ --config <config_file> <config_file> \uff1a\u586b\u5199 YAML \u914d\u7f6e\u6587\u4ef6\u7684\u7edd\u5bf9\u8def\u5f84\u3002 <data_dir> \uff1a\u586b\u5199 CSV \u6570\u636e\u6587\u4ef6\u7684\u7edd\u5bf9\u8def\u5f84\u3002\u5982\u679c\u6587\u4ef6\u4e0d\u5728\u672c\u5730\uff0c\u8bf7\u5ffd\u7565\u8be5\u53c2\u6570\u3002 <version> \uff1a\u586b\u5199 Importer \u7684\u7248\u672c\u53f7\uff0c\u8bf7\u586b\u5199 v4 \u3002 Note \u5efa\u8bae\u4f7f\u7528\u76f8\u5bf9\u8def\u5f84\u3002\u5982\u679c\u4f7f\u7528\u672c\u5730\u7edd\u5bf9\u8def\u5f84\uff0c\u8bf7\u68c0\u67e5\u8def\u5f84\u6620\u5c04\u5230 Docker \u4e2d\u7684\u8def\u5f84\u3002 \u4f8b\u5982\uff1a $ docker pull vesoft/nebula-importer:v4 $ docker run --rm -ti \\ --network = host \\ -v /home/user/config.yaml:/home/user/config.yaml \\ -v /home/user/data:/home/user/data \\ vesoft/nebula-importer:v4 \\ --config /home/user/config.yaml","title":"Docker \u65b9\u5f0f\u8fd0\u884c"},{"location":"import-export/use-importer/#_9","text":"NebulaGraph Importer \u7684 Github \u5185\u63d0\u4f9b\u591a\u79cd\u793a\u4f8b\u914d\u7f6e\u6587\u4ef6\u3002\u914d\u7f6e\u6587\u4ef6\u7528\u6765\u63cf\u8ff0\u5f85\u5bfc\u5165\u6587\u4ef6\u4fe1\u606f\u3001NebulaGraph\u670d\u52a1\u5668\u4fe1\u606f\u7b49\u3002\u4e0b\u6587\u5c06\u5206\u7c7b\u4ecb\u7ecd\u914d\u7f6e\u6587\u4ef6\u5185\u7684\u5b57\u6bb5\u3002 Note \u5982\u679c\u7528\u6237\u4e0b\u8f7d\u7684\u662f\u4e8c\u8fdb\u5236\u5305\uff0c\u8bf7\u624b\u52a8\u521b\u5efa\u914d\u7f6e\u6587\u4ef6\u3002","title":"\u914d\u7f6e\u6587\u4ef6\u8bf4\u660e"},{"location":"import-export/use-importer/#client","text":"Client \u914d\u7f6e\u5b58\u50a8\u5ba2\u6237\u7aef\u8fde\u63a5NebulaGraph\u76f8\u5173\u7684\u914d\u7f6e\u3002 \u793a\u4f8b\u914d\u7f6e\u5982\u4e0b\uff1a client : version : v3 address : \"192.168.1.100:9669,192.168.1.101:9669\" user : root password : nebula ssl : enable : true certPath : \"/home/xxx/cert/importer.crt\" keyPath : \"/home/xxx/cert/importer.key\" caPath : \"/home/xxx/cert/root.crt\" insecureSkipVerify : false concurrencyPerAddress : 10 reconnectInitialInterval : 1s retry : 3 retryInitialInterval : 1s \u53c2\u6570 \u9ed8\u8ba4\u503c \u662f\u5426\u5fc5\u987b \u8bf4\u660e client.version v3 \u662f \u6307\u5b9a\u8fde\u63a5\u7684NebulaGraph\u7684\u5927\u7248\u672c\u3002\u5f53\u524d\u4ec5\u652f\u6301 v3 \u3002 client.address \"127.0.0.1:9669\" \u662f \u6307\u5b9a\u8fde\u63a5\u7684NebulaGraph\u5730\u5740\u3002\u591a\u4e2a\u5730\u5740\u7528\u82f1\u6587\u9017\u53f7\uff08,\uff09\u5206\u9694\u3002 client.user root \u5426 NebulaGraph\u7684\u7528\u6237\u540d\u3002 client.password nebula \u5426 NebulaGraph\u7528\u6237\u540d\u5bf9\u5e94\u7684\u5bc6\u7801\u3002 client.ssl.enable false \u5426 \u6307\u5b9a\u662f\u5426\u5f00\u542f SSL \u8ba4\u8bc1\u3002 client.ssl.certPath - \u5426 \u6307\u5b9a SSL \u516c\u94a5\u8bc1\u4e66\u7684\u5b58\u50a8\u8def\u5f84\u3002 \u5f00\u542f SSL \u8ba4\u8bc1\u540e\u8be5\u53c2\u6570\u5fc5\u586b\u3002 client.ssl.keyPath - \u5426 \u6307\u5b9a SSL \u5bc6\u94a5\u7684\u5b58\u50a8\u8def\u5f84\u3002 \u5f00\u542f SSL \u8ba4\u8bc1\u540e\u8be5\u53c2\u6570\u5fc5\u586b\u3002 client.ssl.caPath - \u5426 \u6307\u5b9a CA \u6839\u8bc1\u4e66\u7684\u5b58\u50a8\u8def\u5f84\u3002 \u5f00\u542f SSL \u8ba4\u8bc1\u540e\u8be5\u53c2\u6570\u5fc5\u586b\u3002 client.ssl.insecureSkipVerify false \u5426 \u6307\u5b9a\u662f\u5426\u8df3\u8fc7\u9a8c\u8bc1\u670d\u52a1\u7aef\u7684\u8bc1\u4e66\u94fe\u548c\u4e3b\u673a\u540d\u3002\u5982\u679c\u8bbe\u7f6e\u4e3a true \uff0c\u5219\u63a5\u53d7\u670d\u52a1\u7aef\u63d0\u4f9b\u7684\u4efb\u4f55\u8bc1\u4e66\u94fe\u548c\u4e3b\u673a\u540d\u3002 client.concurrencyPerAddress 10 \u5426 \u5355\u4e2a Graph \u670d\u52a1\u7684\u5ba2\u6237\u7aef\u5e76\u53d1\u8fde\u63a5\u6570\u3002 client.retryInitialInterval 1s \u5426 \u91cd\u8fde\u95f4\u9694\u65f6\u95f4\u3002 client.retry 3 \u5426 nGQL \u8bed\u53e5\u6267\u884c\u5931\u8d25\u7684\u91cd\u8bd5\u6b21\u6570\u3002 client.retryInitialInterval 1s \u5426 \u91cd\u8bd5\u95f4\u9694\u65f6\u95f4\u3002","title":"Client \u914d\u7f6e"},{"location":"import-export/use-importer/#manager","text":"Manager \u914d\u7f6e\u662f\u8fde\u63a5\u6570\u636e\u5e93\u540e\u7684\u4eba\u4e3a\u63a7\u5236\u914d\u7f6e\u3002 \u793a\u4f8b\u914d\u7f6e\u5982\u4e0b\uff1a manager : spaceName : basic_string_examples batch : 128 readerConcurrency : 50 importerConcurrency : 512 statsInterval : 10s hooks : before : - statements : - | DROP SPACE IF EXISTS basic_string_examples; CREATE SPACE IF NOT EXISTS basic_string_examples(partition_num=5, replica_factor=1, vid_type=int); USE basic_string_examples; wait : 10s after : - statements : - | SHOW SPACES; \u53c2\u6570 \u9ed8\u8ba4\u503c \u662f\u5426\u5fc5\u987b \u8bf4\u660e manager.spaceName - \u662f \u6307\u5b9a\u6570\u636e\u8981\u5bfc\u5165\u7684\u56fe\u7a7a\u95f4\u3002\u4e0d\u652f\u6301\u540c\u65f6\u5bfc\u5165\u591a\u4e2a\u56fe\u7a7a\u95f4\u3002 manager.batch 128 \u5426 \u6267\u884c\u8bed\u53e5\u7684\u6279\u5904\u7406\u91cf\uff08\u5168\u5c40\u914d\u7f6e\uff09\u3002 \u5bf9\u67d0\u4e2a\u6570\u636e\u6e90\u5355\u72ec\u8bbe\u7f6e\u6279\u5904\u7406\u91cf\u53ef\u4ee5\u4f7f\u7528\u4e0b\u6587\u7684 sources.batch \u3002 manager.readerConcurrency 50 \u5426 \u8bfb\u53d6\u5668\u8bfb\u53d6\u6570\u636e\u6e90\u7684\u5e76\u53d1\u6570\u3002 manager.importerConcurrency 512 \u5426 \u751f\u6210\u5f85\u6267\u884c\u7684 nGQL \u8bed\u53e5\u7684\u5e76\u53d1\u6570\uff0c\u7136\u540e\u4f1a\u8c03\u7528\u5ba2\u6237\u7aef\u6267\u884c\u8fd9\u4e9b\u8bed\u53e5\u3002 manager.statsInterval 10s \u5426 \u6253\u5370\u7edf\u8ba1\u4fe1\u606f\u7684\u65f6\u95f4\u95f4\u9694\u3002 manager.hooks.before.[].statements - \u5426 \u5bfc\u5165\u524d\u5728\u56fe\u7a7a\u95f4\u5185\u6267\u884c\u7684\u547d\u4ee4\u3002 manager.hooks.before.[].wait - \u5426 \u6267\u884c statements \u8bed\u53e5\u540e\u7684\u7b49\u5f85\u65f6\u95f4\u3002 manager.hooks.after.[].statements - \u5426 \u5bfc\u5165\u540e\u5728\u56fe\u7a7a\u95f4\u5185\u6267\u884c\u7684\u547d\u4ee4\u3002 manager.hooks.after.[].wait - \u5426 \u6267\u884c statements \u8bed\u53e5\u540e\u7684\u7b49\u5f85\u65f6\u95f4\u3002","title":"Manager \u914d\u7f6e"},{"location":"import-export/use-importer/#log","text":"Log \u914d\u7f6e\u662f\u8bbe\u7f6e\u65e5\u5fd7\u76f8\u5173\u914d\u7f6e\u3002 \u793a\u4f8b\u914d\u7f6e\u5982\u4e0b\uff1a log : level : INFO console : true files : - logs/nebula-importer.log \u53c2\u6570 \u9ed8\u8ba4\u503c \u662f\u5426\u5fc5\u987b \u8bf4\u660e log.level INFO \u5426 \u65e5\u5fd7\u7ea7\u522b\u3002\u53ef\u9009\u503c\u4e3a DEBUG \u3001 INFO \u3001 WARN \u3001 ERROR \u3001 PANIC \u3001 FATAL \u3002 log.console true \u5426 \u5b58\u50a8\u65e5\u5fd7\u65f6\u662f\u5426\u5c06\u65e5\u5fd7\u540c\u6b65\u6253\u5370\u5230 Console\u3002 log.files - \u5426 \u65e5\u5fd7\u6587\u4ef6\u8def\u5f84\u3002\u9700\u624b\u52a8\u521b\u5efa\u65e5\u5fd7\u6587\u4ef6\u76ee\u5f55\u3002","title":"Log \u914d\u7f6e"},{"location":"import-export/use-importer/#source","text":"Source \u914d\u7f6e\u4e2d\u9700\u8981\u914d\u7f6e\u6570\u636e\u6e90\u4fe1\u606f\u3001\u6570\u636e\u5904\u7406\u65b9\u5f0f\u548c Schema \u6620\u5c04\u3002 \u793a\u4f8b\u914d\u7f6e\u5982\u4e0b\uff1a sources : - path : ./person.csv # \u6307\u5b9a\u5b58\u50a8\u6570\u636e\u6587\u4ef6\u7684\u8def\u5f84\u3002\u5982\u679c\u4f7f\u7528\u76f8\u5bf9\u8def\u5f84\uff0c\u5219\u8def\u5f84\u548c\u5f53\u524d\u914d\u7f6e\u6587\u4ef6\u76ee\u5f55\u62fc\u63a5\u3002\u4e5f\u652f\u6301\u901a\u914d\u7b26\u6587\u4ef6\u540d\uff0c\u4f8b\u5982\uff1a./follower-*.csv\uff0c\u8bf7\u786e\u4fdd\u6240\u6709\u5339\u914d\u7684\u6587\u4ef6\u5177\u6709\u76f8\u540c\u7684\u67b6\u6784\u3002 # - s3: # AWS S3 # endpoint: endpoint # \u53ef\u9009\u3002S3 \u670d\u52a1\u7aef\u70b9\uff0c\u5982\u679c\u4f7f\u7528 AWS S3 \u53ef\u4ee5\u7701\u7565\u3002 # region: us-east-1 # \u5fc5\u586b\u3002S3 \u670d\u52a1\u7684\u533a\u57df\u3002 # bucket: gdelt-open-data # \u5fc5\u586b\u3002S3 \u670d\u52a1\u4e2d\u7684 bucket\u3002 # key: events/20190918.export.csv # \u5fc5\u586b\u3002S3 \u670d\u52a1\u4e2d\u6587\u4ef6\u7684 key\u3002 # accessKeyID: \"\" # \u53ef\u9009\u3002S3 \u670d\u52a1\u7684\u8bbf\u95ee\u5bc6\u94a5\u3002\u5982\u679c\u662f\u516c\u5171\u6570\u636e\uff0c\u5219\u65e0\u9700\u914d\u7f6e\u3002 # accessKeySecret: \"\" # \u53ef\u9009\u3002S3 \u670d\u52a1\u7684\u5bc6\u94a5\u3002\u5982\u679c\u662f\u516c\u5171\u6570\u636e\uff0c\u5219\u65e0\u9700\u914d\u7f6e\u3002 # - oss: # endpoint: https://oss-cn-hangzhou.aliyuncs.com # \u5fc5\u586b\u3002OSS \u670d\u52a1\u7aef\u70b9\u3002 # bucket: bucketName # \u5fc5\u586b\u3002OSS \u670d\u52a1\u4e2d\u7684 bucket\u3002 # key: objectKey # \u5fc5\u586b\u3002OSS \u670d\u52a1\u4e2d\u6587\u4ef6\u7684 object key\u3002 # accessKeyID: accessKey # \u5fc5\u586b\u3002OSS \u670d\u52a1\u7684\u8bbf\u95ee\u5bc6\u94a5\u3002 # accessKeySecret: secretKey # \u5fc5\u586b\u3002OSS \u670d\u52a1\u7684\u79d8\u94a5\u3002 # - ftp: # host: 192.168.0.10 # \u5fc5\u586b\u3002FTP \u670d\u52a1\u7684\u4e3b\u673a\u3002 # port: 21 # \u5fc5\u586b\u3002FTP \u670d\u52a1\u7684\u7aef\u53e3\u3002 # user: user # \u5fc5\u586b\u3002FTP \u670d\u52a1\u7684\u7528\u6237\u540d\u3002 # password: password # \u5fc5\u586b\u3002FTP \u670d\u52a1\u7684\u5bc6\u7801\u3002 # path: \"/events/20190918.export.csv\" # FTP \u670d\u52a1\u4e2d\u6587\u4ef6\u7684\u8def\u5f84\u3002 # - sftp: # host: 192.168.0.10 # \u5fc5\u586b\u3002SFTP \u670d\u52a1\u7684\u4e3b\u673a\u3002 # port: 22 # \u5fc5\u586b\u3002SFTP \u670d\u52a1\u7684\u7aef\u53e3\u3002 # user: user # \u5fc5\u586b\u3002SFTP \u670d\u52a1\u7684\u7528\u6237\u540d\u3002 # password: password # \u53ef\u9009\u3002SFTP \u670d\u52a1\u7684\u5bc6\u7801\u3002 # keyFile: keyFile # \u53ef\u9009\u3002SFTP \u670d\u52a1\u7684 SSH \u5bc6\u94a5\u6587\u4ef6\u8def\u5f84\u3002 # keyData: keyData $ \u53ef\u9009\u3002SFTP \u670d\u52a1\u7684 SSH \u5bc6\u94a5\u6587\u4ef6\u5185\u5bb9\u3002 # passphrase: passphrase # \u53ef\u9009\u3002SFTP \u670d\u52a1\u7684 SSH \u5bc6\u94a5\u5bc6\u7801\u3002 # path: \"/events/20190918.export.csv\" # \u5fc5\u586b\u3002SFTP \u670d\u52a1\u4e2d\u6587\u4ef6\u7684\u8def\u5f84\u3002 # - hdfs: # address: \"127.0.0.1:8020\" # \u5fc5\u586b\u3002HDFS \u670d\u52a1\u7684\u5730\u5740\u3002 # user: \"hdfs\" # \u53ef\u9009\u3002HDFS \u670d\u52a1\u7684\u7528\u6237\u540d\u3002 # servicePrincipalName: <Kerberos Service Principal Name> # \u53ef\u9009\u3002\u542f\u7528 Kerberos \u8ba4\u8bc1\u65f6\uff0cHDFS \u670d\u52a1\u7684 Kerberos \u670d\u52a1\u5b9e\u4f8b\u540d\u79f0\u3002 # krb5ConfigFile: <Kerberos config file> # \u53ef\u9009\u3002\u542f\u7528 Kerberos \u8ba4\u8bc1\u65f6\uff0cHDFS \u670d\u52a1\u7684 Kerberos \u914d\u7f6e\u6587\u4ef6\u8def\u5f84\uff0c\u9ed8\u8ba4\u4e3a`/etc/krb5.conf`\u3002 # ccacheFile: <Kerberos ccache file> # \u53ef\u9009\u3002\u542f\u7528 Kerberos \u8ba4\u8bc1\u65f6\uff0cHDFS \u670d\u52a1\u7684 Kerberos ccache \u6587\u4ef6\u8def\u5f84\u3002 # keyTabFile: <Kerberos keytab file> # \u53ef\u9009\u3002\u542f\u7528 Kerberos \u8ba4\u8bc1\u65f6\uff0cHDFS \u670d\u52a1\u7684 Kerberos keytab \u6587\u4ef6\u8def\u5f84\u3002 # password: <Kerberos password> # \u53ef\u9009\u3002\u542f\u7528 Kerberos \u8ba4\u8bc1\u65f6\uff0cHDFS \u670d\u52a1\u7684 Kerberos \u5bc6\u7801\u3002 # dataTransferProtection: <Kerberos Data Transfer Protection> # \u53ef\u9009\u3002\u542f\u7528 Kerberos \u8ba4\u8bc1\u65f6\u7684\u4f20\u8f93\u52a0\u5bc6\u7c7b\u578b\u3002\u53ef\u9009\u503c\u4e3a`authentication`\u3001`integrity`\u3001`privacy`\u3002 # disablePAFXFAST: false # \u53ef\u9009\u3002\u662f\u5426\u7981\u6b62\u5ba2\u6237\u7aef\u4f7f\u7528\u9884\u8eab\u4efd\u9a8c\u8bc1\uff08PA_FX_FAST\uff09\u3002 # path: \"/events/20190918.export.csv\" # \u5fc5\u586b\u3002HDFS \u670d\u52a1\u4e2d\u6587\u4ef6\u7684\u8def\u5f84\u3002\u4e5f\u652f\u6301\u901a\u914d\u7b26\u6587\u4ef6\u540d\uff0c\u4f8b\u5982\uff1a/events/*.export.csv\uff0c\u8bf7\u786e\u4fdd\u6240\u6709\u5339\u914d\u7684\u6587\u4ef6\u5177\u6709\u76f8\u540c\u7684\u67b6\u6784\u3002 # - gcs: # Google Cloud Storage # bucket: chicago-crime-sample # \u5fc5\u586b\u3002GCS \u670d\u52a1\u4e2d\u7684 bucket \u540d\u79f0\u3002 # key: stats/000000000000.csv # \u5fc5\u586b\u3002GCS \u670d\u52a1\u4e2d\u6587\u4ef6\u7684\u8def\u5f84\u3002 # withoutAuthentication: false # \u53ef\u9009\u3002\u662f\u5426\u533f\u540d\u8bbf\u95ee\u3002\u9ed8\u8ba4\u4e3a false\uff0c\u5373\u4f7f\u7528\u51ed\u8bc1\u8bbf\u95ee\u3002 # # \u4f7f\u7528\u51ed\u8bc1\u8bbf\u95ee\u65f6\uff0ccredentialsFile \u548c credentialsJSON \u53c2\u6570\u4e8c\u9009\u4e00\u5373\u53ef\u3002 # credentialsFile: \"/path/to/your/credentials/file\" # \u53ef\u9009\u3002GCS \u670d\u52a1\u7684\u51ed\u8bc1\u6587\u4ef6\u8def\u5f84\u3002 # credentialsJSON: '{ # \u53ef\u9009\u3002GCS \u670d\u52a1\u7684\u51ed\u8bc1 JSON \u5185\u5bb9\u3002 # \"type\": \"service_account\", # \"project_id\": \"your-project-id\", # \"private_key_id\": \"key-id\", # \"private_key\": \"-----BEGIN PRIVATE KEY-----\\nxxxxx\\n-----END PRIVATE KEY-----\\n\", # \"client_email\": \"your-client@your-project-id.iam.gserviceaccount.com\", # \"client_id\": \"client-id\", # \"auth_uri\": \"https://accounts.google.com/o/oauth2/auth\", # \"token_uri\": \"https://oauth2.googleapis.com/token\", # \"auth_provider_x509_cert_url\": \"https://www.googleapis.com/oauth2/v1/certs\", # \"client_x509_cert_url\": \"https://www.googleapis.com/robot/v1/metadata/x509/your-client%40your-project-id.iam.gserviceaccount.com\", # \"universe_domain\": \"googleapis.com\" # }' batch : 256 csv : delimiter : \"|\" withHeader : false lazyQuotes : false tags : - name : Person # mode: INSERT # filter: # expr: Record[1] == \"XXX\" id : type : \"STRING\" function : \"hash\" # index: 0 concatItems : - person_ - 0 - _id props : - name : \"firstName\" type : \"STRING\" index : 1 - name : \"lastName\" type : \"STRING\" index : 2 - name : \"gender\" type : \"STRING\" index : 3 nullable : true defaultValue : female - name : \"birthday\" type : \"DATE\" index : 4 nullable : true nullValue : _NULL_ - name : \"creationDate\" type : \"DATETIME\" index : 5 - name : \"locationIP\" type : \"STRING\" index : 6 - name : \"browserUsed\" type : \"STRING\" index : 7 - path : ./knows.csv batch : 256 edges : - name : KNOWS # person_knows_person # mode: INSERT # filter: # expr: Record[1] == \"XXX\" src : id : type : \"STRING\" concatItems : - person_ - 0 - _id dst : id : type : \"STRING\" concatItems : - person_ - 1 - _id props : - name : \"creationDate\" type : \"DATETIME\" index : 2 nullable : true nullValue : _NULL_ defaultValue : 0000-00-00T00:00:00 \u914d\u7f6e\u4e3b\u8981\u5305\u62ec\u4ee5\u4e0b\u51e0\u4e2a\u90e8\u5206\uff1a \u6307\u5b9a\u6570\u636e\u6e90\u4fe1\u606f\u3002 \u6307\u5b9a\u6267\u884c\u8bed\u53e5\u7684\u6279\u5904\u7406\u91cf\u3002 \u6307\u5b9a CSV \u6587\u4ef6\u683c\u5f0f\u4fe1\u606f\u3002 \u6307\u5b9a Tag \u7684\u6a21\u5f0f\u6620\u5c04\u3002 \u6307\u5b9a Edge type \u7684\u6a21\u5f0f\u6620\u5c04\u3002 \u53c2\u6570 \u9ed8\u8ba4\u503c \u662f\u5426\u5fc5\u987b \u8bf4\u660e sources.path sources.s3 sources.oss sources.ftp sources.sftp sources.hdfs - \u5426 \u6307\u5b9a\u6570\u636e\u6e90\u4fe1\u606f\uff0c\u4f8b\u5982\u672c\u5730\u6587\u4ef6\u3001HDFS\u3001S3 \u7b49\u3002\u4e00\u4e2a source \u53ea\u80fd\u914d\u7f6e\u4e00\u79cd\u6570\u636e\u6e90\uff0c\u914d\u7f6e\u591a\u4e2a\u6570\u636e\u6e90\u8bf7\u5728\u591a\u4e2a source \u5185\u914d\u7f6e\u3002 \u4e0d\u540c\u6570\u636e\u6e90\u7684\u914d\u7f6e\u9879\u8bf4\u660e\u8bf7\u53c2\u89c1\u793a\u4f8b\u5185\u7684\u6ce8\u91ca\u3002 sources.batch 256 \u5426 \u5bfc\u5165\u8be5\u6570\u636e\u6e90\u65f6\u6267\u884c\u8bed\u53e5\u7684\u6279\u5904\u7406\u91cf\u3002\u4f18\u5148\u7ea7\u9ad8\u4e8e manager.batch \u3002 sources.csv.delimiter , \u5426 CSV \u6587\u4ef6\u7684\u5206\u9694\u7b26\u3002\u4ec5\u652f\u6301 1 \u4e2a\u5b57\u7b26\u7684\u5b57\u7b26\u4e32\u5206\u9694\u7b26\u3002\u4f7f\u7528\u7279\u6b8a\u5b57\u7b26\u505a\u5206\u9694\u7b26\u65f6\u9700\u8981\u8fdb\u884c\u8f6c\u4e49\u3002\u4f8b\u5982\u5f53\u5206\u9694\u7b26\u4e3a\u5341\u516d\u8fdb\u5236 0x03 \u5373 Ctrl+C \u65f6\uff0c\u8f6c\u4e49\u7684\u5199\u6cd5\u4e3a\uff1a \"\\x03\" \u6216 \"\\u0003\" \u3002\u5173\u4e8e yaml \u683c\u5f0f\u7279\u6b8a\u5b57\u7b26\u8f6c\u4e49\u7684\u7ec6\u8282\u8bf7\u53c2\u89c1 Escaped Characters \u3002 sources.csv.withHeader false \u5426 \u662f\u5426\u5ffd\u7565 CSV \u6587\u4ef6\u4e2d\u7684\u7b2c\u4e00\u6761\u8bb0\u5f55\u3002 sources.csv.lazyQuotes false \u5426 \u662f\u5426\u5141\u8bb8\u60f0\u6027\u89e3\u6790\u5f15\u53f7\u3002\u5982\u679c\u503c\u4e3a true \uff0c\u5f15\u53f7\u53ef\u4ee5\u51fa\u73b0\u5728\u975e\u5f15\u53f7\u5b57\u6bb5\u4e2d\uff0c\u975e\u53cc\u5f15\u53f7\u53ef\u4ee5\u51fa\u73b0\u5728\u5f15\u53f7\u5b57\u6bb5\u4e2d\uff0c\u800c\u4e0d\u4f1a\u5f15\u53d1\u89e3\u6790\u9519\u8bef\u3002 sources.tags.name - \u662f Tag \u540d\u79f0\u3002 sources.tags.mode INSERT \u5426 \u6279\u91cf\u64cd\u4f5c\u7c7b\u578b\uff0c\u5305\u62ec\u5bfc\u5165\u3001\u66f4\u65b0\u548c\u5220\u9664\u3002\u53ef\u9009\u503c\u4e3a INSERT \u3001 UPDATE \u548c DELETE \u3002 sources.tags.filter.expr - \u5426 \u8fc7\u6ee4\u6570\u636e\uff0c\u6ee1\u8db3\u8fc7\u6ee4\u6761\u4ef6\u7684\u624d\u4f1a\u5bfc\u5165\u3002\u652f\u6301\u7684\u6bd4\u8f83\u7b26\u4e3a == \u3001 != \u3001 < \u3001 > \u3001 <= \u548c >= \u3002\u652f\u6301\u7684\u903b\u8f91\u8fd0\u7b97\u7b26\u4e3a not \uff08!\uff09\u3001 and \uff08&&\uff09\u548c or \uff08||\uff09\u3002\u4f8b\u5982 (Record[0] == \"Mahinda\" or Record[0] == \"Michael\") and Record[3] == \"male\" \u3002 sources.tags.id.type STRING \u5426 VID \u7684\u7c7b\u578b\u3002 sources.tags.id.function - \u5426 \u751f\u6210 VID \u7684\u51fd\u6570\u3002\u76ee\u524d\u4ec5\u652f\u6301 hash \u3002 sources.tags.id.index - \u5426 VID \u5bf9\u5e94\u7684\u6570\u636e\u6587\u4ef6\u4e2d\u7684\u5217\u53f7\u3002\u5982\u679c\u672a\u914d\u7f6e sources.tags.id.concatItems \uff0c\u8be5\u53c2\u6570\u5fc5\u987b\u914d\u7f6e\u3002 sources.tags.id.concatItems - \u5426 \u7528\u4e8e\u8fde\u63a5\u4e24\u4e2a\u6216\u591a\u4e2a\u6570\u7ec4\uff0c\u8fde\u63a5\u9879\u53ef\u4ee5\u662f string \u3001 int \u6216\u8005\u6df7\u5408\u3002 string \u4ee3\u8868\u5e38\u91cf\uff0c int \u8868\u793a\u7d22\u5f15\u5217\u3002\u5982\u679c\u8bbe\u7f6e\u4e86\u8be5\u53c2\u6570\uff0c sources.tags.id.index \u53c2\u6570\u5c06\u4e0d\u751f\u6548\u3002 sources.tags.ignoreExistedIndex true \u5426 \u662f\u5426\u542f\u7528 IGNORE_EXISTED_INDEX \uff0c\u5373\u63d2\u5165\u70b9\u540e\u4e0d\u66f4\u65b0\u7d22\u5f15\u3002 sources.tags.props.name - \u662f VID \u4e0a\u7684\u5c5e\u6027\u540d\u79f0\uff0c\u5fc5\u987b\u4e0e\u6570\u636e\u5e93\u4e2d\u7684\u5c5e\u6027\u76f8\u540c\u3002 sources.tags.props.type STRING \u5426 VID \u4e0a\u5c5e\u6027\u7684\u6570\u636e\u7c7b\u578b\u3002\u76ee\u524d\u652f\u6301 BOOL \u3001 INT \u3001 FLOAT \u3001 DOUBLE \u3001 STRING \u3001 TIME \u3001 TIMESTAMP \u3001 DATE \u3001 DATETIME \u3001 GEOGRAPHY \u3001 GEOGRAPHY(POINT) \u3001 GEOGRAPHY(LINESTRING) \u3001 GEOGRAPHY(POLYGON) \u3002 sources.tags.props.index - \u662f \u5c5e\u6027\u503c\u5bf9\u5e94\u7684\u6570\u636e\u6587\u4ef6\u4e2d\u7684\u5217\u53f7\u3002 sources.tags.props.nullable false \u5426 \u5c5e\u6027\u662f\u5426\u53ef\u4ee5\u4e3a NULL \uff0c\u53ef\u9009 true \u6216\u8005 false \u3002 sources.tags.props.nullValue - \u5426 nullable \u8bbe\u7f6e\u4e3a true \u65f6\uff0c\u5c5e\u6027\u7684\u503c\u4e0e nullValue \u76f8\u7b49\u5219\u5c06\u8be5\u5c5e\u6027\u503c\u8bbe\u7f6e\u4e3a NULL \u3002 sources.tags.props.alternativeIndices - \u5426 \u5f53 nullable \u4e3a false \u65f6\u5ffd\u7565\u3002\u8be5\u5c5e\u6027\u6839\u636e\u7d22\u5f15\u987a\u5e8f\u4ece\u6587\u4ef6\u4e2d\u83b7\u53d6\uff0c\u76f4\u5230\u4e0d\u7b49\u4e8e nullValue \u3002 sources.tags.props.defaultValue - \u5426 \u5f53 nullable \u4e3a false \u65f6\u5ffd\u7565\u3002\u6839\u636e index \u548c alternativeIndices \u83b7\u53d6\u7684\u6240\u6709\u503c\u4e3a nullValue \u65f6\u8bbe\u7f6e\u9ed8\u8ba4\u503c\u3002 sources.edges.name - \u662f Edge type \u540d\u79f0\u3002 sources.edges.mode INSERT \u5426 \u6279\u91cf\u64cd\u4f5c\u7c7b\u578b\uff0c\u5305\u62ec\u5bfc\u5165\u3001\u66f4\u65b0\u548c\u5220\u9664\u3002\u53ef\u9009\u503c\u4e3a INSERT \u3001 UPDATE \u548c DELETE \u3002 sources.edges.filter.expr - \u5426 \u8fc7\u6ee4\u6570\u636e\uff0c\u6ee1\u8db3\u8fc7\u6ee4\u6761\u4ef6\u7684\u624d\u4f1a\u5bfc\u5165\u3002\u652f\u6301\u7684\u6bd4\u8f83\u7b26\u4e3a == \u3001 != \u3001 < \u3001 > \u3001 <= \u548c >= \u3002\u652f\u6301\u7684\u903b\u8f91\u8fd0\u7b97\u7b26\u4e3a not \uff08!\uff09\u3001 and \uff08&&\uff09\u548c or \uff08||\uff09\u3002\u4f8b\u5982 (Record[0] == \"Mahinda\" or Record[0] == \"Michael\") and Record[3] == \"male\" \u3002 sources.edges.src.id.type STRING \u5426 \u8fb9\u4e0a\u8d77\u70b9 VID \u7684\u6570\u636e\u7c7b\u578b\u3002 sources.edges.src.id.index - \u662f \u8fb9\u4e0a\u8d77\u70b9 VID \u5bf9\u5e94\u7684\u6570\u636e\u6587\u4ef6\u4e2d\u7684\u5217\u53f7\u3002 sources.edges.dst.id.type STRING \u5426 \u8fb9\u4e0a\u7ec8\u70b9 VID \u7684\u6570\u636e\u7c7b\u578b\u3002 sources.edges.dst.id.index - \u662f \u8fb9\u4e0a\u7ec8\u70b9 VID \u5bf9\u5e94\u7684\u6570\u636e\u6587\u4ef6\u4e2d\u7684\u5217\u53f7\u3002 sources.edges.rank.index - \u5426 \u8fb9\u4e0a RANK \u5bf9\u5e94\u7684\u6570\u636e\u6587\u4ef6\u4e2d\u7684\u5217\u53f7\u3002 sources.edges.ignoreExistedIndex true \u5426 \u662f\u5426\u542f\u7528 IGNORE_EXISTED_INDEX \uff0c\u5373\u63d2\u5165\u70b9\u540e\u4e0d\u66f4\u65b0\u7d22\u5f15\u3002 sources.edges.props.name - \u5426 \u8fb9\u4e0a\u5c5e\u6027\u7684\u540d\u79f0\uff0c\u5fc5\u987b\u4e0e\u6570\u636e\u5e93\u4e2d\u7684\u5c5e\u6027\u76f8\u540c\u3002 sources.edges.props.type STRING \u5426 \u8fb9\u4e0a\u5c5e\u6027\u7684\u6570\u636e\u7c7b\u578b\u3002\u76ee\u524d\u652f\u6301 BOOL \u3001 INT \u3001 FLOAT \u3001 DOUBLE \u3001 STRING \u3001 TIME \u3001 TIMESTAMP \u3001 DATE \u3001 DATETIME \u3001 GEOGRAPHY \u3001 GEOGRAPHY(POINT) \u3001 GEOGRAPHY(LINESTRING) \u3001 GEOGRAPHY(POLYGON) \u3002 sources.edges.props.index - \u5426 \u5c5e\u6027\u503c\u5bf9\u5e94\u7684\u6570\u636e\u6587\u4ef6\u4e2d\u7684\u5217\u53f7\u3002 sources.edges.props.nullable - \u5426 \u5c5e\u6027\u662f\u5426\u53ef\u4ee5\u4e3a NULL \uff0c\u53ef\u9009 true \u6216\u8005 false \u3002 sources.edges.props.nullValue - \u5426 nullable \u8bbe\u7f6e\u4e3a true \u65f6\uff0c\u5c5e\u6027\u7684\u503c\u4e0e nullValue \u76f8\u7b49\u5219\u5c06\u8be5\u5c5e\u6027\u503c\u8bbe\u7f6e\u4e3a NULL \u3002 sources.edges.props.defaultValue - \u5426 \u5f53 nullable \u4e3a false \u65f6\u5ffd\u7565\u3002\u6839\u636e index \u548c alternativeIndices \u83b7\u53d6\u7684\u6240\u6709\u503c\u4e3a nullValue \u65f6\u8bbe\u7f6e\u9ed8\u8ba4\u503c\u3002 Note CSV \u6587\u4ef6\u4e2d\u5217\u7684\u5e8f\u53f7\u4ece 0 \u5f00\u59cb\uff0c\u5373\u7b2c\u4e00\u5217\u7684\u5e8f\u53f7\u4e3a 0\uff0c\u7b2c\u4e8c\u5217\u7684\u5e8f\u53f7\u4e3a 1\u3002","title":"Source \u914d\u7f6e"},{"location":"import-export/write-tools/","text":"\u5bfc\u5165\u5de5\u5177\u9009\u62e9 \u00b6 \u6709\u591a\u79cd\u65b9\u5f0f\u53ef\u4ee5\u5c06\u6570\u636e\u5199\u5165NebulaGraph 3.6.0\uff1a \u4f7f\u7528 \u547d\u4ee4\u884c -f \u7684\u65b9\u5f0f \u5bfc\u5165\uff1a\u53ef\u4ee5\u5bfc\u5165\u5c11\u91cf\u51c6\u5907\u597d\u7684 nGQL \u6587\u4ef6\uff0c\u9002\u5408\u5c11\u91cf\u624b\u5de5\u6d4b\u8bd5\u6570\u636e\u51c6\u5907\uff1b \u4f7f\u7528 Studio \u5bfc\u5165 \uff1a\u53ef\u4ee5\u7528\u8fc7\u6d4f\u89c8\u5668\u5bfc\u5165\u672c\u673a\u591a\u4e2a csv \u6587\u4ef6\uff0c\u683c\u5f0f\u6709\u9650\u5236\uff1b \u4f7f\u7528 Importer \u5bfc\u5165 \uff1a\u5bfc\u5165\u5355\u673a\u591a\u4e2a csv \u6587\u4ef6\uff0c\u5927\u5c0f\u6ca1\u6709\u9650\u5236\uff0c\u683c\u5f0f\u7075\u6d3b\uff1b\u6570\u636e\u91cf\u5341\u4ebf\u7ea7\u4ee5\u5185\uff1b \u4f7f\u7528 Exchange \u5bfc\u5165 \uff1a\u4ece Neo4j, Hive, MySQL \u7b49\u591a\u79cd\u6e90\u5206\u5e03\u5f0f\u5bfc\u5165\uff0c\u9700\u8981\u6709 Spark \u96c6\u7fa4\uff1b\u6570\u636e\u91cf\u5341\u4ebf\u7ea7\u4ee5\u4e0a \u4f7f\u7528 Spark-connector / Flink-connector \u5bfc\u5165\uff1a\u6709\u76f8\u5e94\u7ec4\u4ef6 (Spark/Flink)\uff0c\u64b0\u5199\u5c11\u91cf\u4ee3\u7801\uff1b \u4f7f\u7528 C++/GO/Java/Python SDK \uff1a\u7f16\u5199\u7a0b\u5e8f\u7684\u65b9\u5f0f\u5bfc\u5165\uff0c\u9700\u8981\u6709\u4e00\u5b9a\u7f16\u7a0b\u548c\u8c03\u4f18\u80fd\u529b\u3002 \u4e0b\u56fe\u7ed9\u51fa\u4e86\u51e0\u79cd\u65b9\u5f0f\u7684\u5b9a\u4f4d\uff1a","title":"\u6982\u8ff0"},{"location":"import-export/write-tools/#_1","text":"\u6709\u591a\u79cd\u65b9\u5f0f\u53ef\u4ee5\u5c06\u6570\u636e\u5199\u5165NebulaGraph 3.6.0\uff1a \u4f7f\u7528 \u547d\u4ee4\u884c -f \u7684\u65b9\u5f0f \u5bfc\u5165\uff1a\u53ef\u4ee5\u5bfc\u5165\u5c11\u91cf\u51c6\u5907\u597d\u7684 nGQL \u6587\u4ef6\uff0c\u9002\u5408\u5c11\u91cf\u624b\u5de5\u6d4b\u8bd5\u6570\u636e\u51c6\u5907\uff1b \u4f7f\u7528 Studio \u5bfc\u5165 \uff1a\u53ef\u4ee5\u7528\u8fc7\u6d4f\u89c8\u5668\u5bfc\u5165\u672c\u673a\u591a\u4e2a csv \u6587\u4ef6\uff0c\u683c\u5f0f\u6709\u9650\u5236\uff1b \u4f7f\u7528 Importer \u5bfc\u5165 \uff1a\u5bfc\u5165\u5355\u673a\u591a\u4e2a csv \u6587\u4ef6\uff0c\u5927\u5c0f\u6ca1\u6709\u9650\u5236\uff0c\u683c\u5f0f\u7075\u6d3b\uff1b\u6570\u636e\u91cf\u5341\u4ebf\u7ea7\u4ee5\u5185\uff1b \u4f7f\u7528 Exchange \u5bfc\u5165 \uff1a\u4ece Neo4j, Hive, MySQL \u7b49\u591a\u79cd\u6e90\u5206\u5e03\u5f0f\u5bfc\u5165\uff0c\u9700\u8981\u6709 Spark \u96c6\u7fa4\uff1b\u6570\u636e\u91cf\u5341\u4ebf\u7ea7\u4ee5\u4e0a \u4f7f\u7528 Spark-connector / Flink-connector \u5bfc\u5165\uff1a\u6709\u76f8\u5e94\u7ec4\u4ef6 (Spark/Flink)\uff0c\u64b0\u5199\u5c11\u91cf\u4ee3\u7801\uff1b \u4f7f\u7528 C++/GO/Java/Python SDK \uff1a\u7f16\u5199\u7a0b\u5e8f\u7684\u65b9\u5f0f\u5bfc\u5165\uff0c\u9700\u8981\u6709\u4e00\u5b9a\u7f16\u7a0b\u548c\u8c03\u4f18\u80fd\u529b\u3002 \u4e0b\u56fe\u7ed9\u51fa\u4e86\u51e0\u79cd\u65b9\u5f0f\u7684\u5b9a\u4f4d\uff1a","title":"\u5bfc\u5165\u5de5\u5177\u9009\u62e9"},{"location":"import-export/nebula-exchange/ex-ug-FAQ/","text":"Exchange \u5e38\u89c1\u95ee\u9898 \u00b6 \u7f16\u8bd1\u95ee\u9898 \u00b6 Q\uff1a\u90e8\u5206\u975e central \u4ed3\u5e93\u7684\u5305\u4e0b\u8f7d\u5931\u8d25\uff0c\u62a5\u9519 Could not resolve dependencies for project xxx \u00b6 \u8bf7\u68c0\u67e5 Maven \u5b89\u88c5\u76ee\u5f55\u4e0b libexec/conf/settings.xml \u6587\u4ef6\u7684 mirror \u90e8\u5206\uff1a <mirror> <id>alimaven</id> <mirrorOf>central</mirrorOf> <name>aliyun maven</name> <url>http://maven.aliyun.com/nexus/content/repositories/central/</url> </mirror> \u68c0\u67e5 mirrorOf \u7684\u503c\u662f\u5426\u914d\u7f6e\u4e3a * \uff0c\u5982\u679c\u4e3a * \uff0c\u8bf7\u4fee\u6539\u4e3a central \u6216 *,!SparkPackagesRepo,!bintray-streamnative-maven \u3002 \u539f\u56e0 \uff1aExchange \u7684 pom.xml \u4e2d\u6709\u4e24\u4e2a\u4f9d\u8d56\u5305\u4e0d\u5728 Maven \u7684 central \u4ed3\u5e93\u4e2d\uff0c pom.xml \u914d\u7f6e\u4e86\u8fd9\u4e24\u4e2a\u4f9d\u8d56\u6240\u5728\u7684\u4ed3\u5e93\u5730\u5740\u3002\u5982\u679c maven \u4e2d\u914d\u7f6e\u7684\u955c\u50cf\u5730\u5740\u5bf9\u5e94\u7684 mirrorOf \u503c\u4e3a * \uff0c\u90a3\u4e48\u6240\u6709\u4f9d\u8d56\u90fd\u4f1a\u5728 central \u4ed3\u5e93\u4e0b\u8f7d\uff0c\u5bfc\u81f4\u4e0b\u8f7d\u5931\u8d25\u3002 Q\uff1a\u7f16\u8bd1 Exchange \u65f6\u65e0\u6cd5\u4e0b\u8f7d SNAPSHOT \u5305 \u00b6 \u73b0\u8c61\uff1a\u7f16\u8bd1\u65f6\u63d0\u793a Could not find artifact com.vesoft:client:jar:xxx-SNAPSHOT \u3002 \u539f\u56e0\uff1a\u672c\u5730 maven \u6ca1\u6709\u914d\u7f6e\u7528\u4e8e\u4e0b\u8f7d SNAPSHOT \u7684\u4ed3\u5e93\u3002maven \u4e2d\u9ed8\u8ba4\u7684 central \u4ed3\u5e93\u7528\u4e8e\u5b58\u653e\u6b63\u5f0f\u53d1\u5e03\u7248\u672c\uff0c\u800c\u4e0d\u662f\u5f00\u53d1\u7248\u672c\uff08SNAPSHOT\uff09\u3002 \u89e3\u51b3\u65b9\u6848\uff1a\u5728 maven \u7684 setting.xml\u6587\u4ef6\u7684 profiles \u4f5c\u7528\u57df\u5185\u4e2d\u589e\u52a0\u4ee5\u4e0b\u914d\u7f6e\uff1a <profile> <activation> <activeByDefault>true</activeByDefault> </activation> <repositories> <repository> <id>snapshots</id> <url>https://oss.sonatype.org/content/repositories/snapshots/</url> <snapshots> <enabled>true</enabled> </snapshots> </repository> </repositories> </profile> \u6267\u884c\u95ee\u9898 \u00b6 Q\uff1a\u62a5\u9519 java.lang.ClassNotFoundException: com.vesoft.nebula.exchange.Exchange \u00b6 \u5728 Yarn-Cluster \u6a21\u5f0f\u4e0b\u63d0\u4ea4\u4efb\u52a1\uff0c\u8bf7\u53c2\u8003\u5982\u4e0b\u547d\u4ee4\uff0c \u5c24\u5176\u662f\u793a\u4f8b\u4e2d\u7684\u4e24\u4e2a --conf \uff1a $SPARK_HOME /bin/spark-submit --class com.vesoft.nebula.exchange.Exchange \\ --master yarn-cluster \\ --files application.conf \\ --conf spark.driver.extraClassPath = ./ \\ --conf spark.executor.extraClassPath = ./ \\ nebula-exchange-3.0.0.jar \\ -c application.conf Q\uff1a\u62a5\u9519 method name xxx not found \u00b6 \u4e00\u822c\u662f\u7aef\u53e3\u914d\u7f6e\u9519\u8bef\uff0c\u9700\u68c0\u67e5 Meta \u670d\u52a1\u3001Graph \u670d\u52a1\u3001Storage \u670d\u52a1\u7684\u7aef\u53e3\u914d\u7f6e\u3002 Q\uff1a\u62a5 NoSuchMethod\u3001MethodNotFound \u9519\u8bef\uff08 Exception in thread \"main\" java.lang.NoSuchMethodError \u7b49\uff09 \u00b6 \u7edd\u5927\u591a\u6570\u662f\u56e0\u4e3a JAR \u5305\u51b2\u7a81\u548c\u7248\u672c\u51b2\u7a81\u5bfc\u81f4\u7684\u62a5\u9519\uff0c\u8bf7\u68c0\u67e5\u62a5\u9519\u670d\u52a1\u7684\u7248\u672c\uff0c\u4e0e Exchange \u4e2d\u4f7f\u7528\u7684\u7248\u672c\u8fdb\u884c\u5bf9\u6bd4\uff0c\u68c0\u67e5\u662f\u5426\u4e00\u81f4\uff0c\u5c24\u5176\u662f Spark \u7248\u672c\u3001Scala \u7248\u672c\u3001Hive \u7248\u672c\u3002 Q\uff1aExchange \u5bfc\u5165 Hive \u6570\u636e\u65f6\u62a5\u9519 Exception in thread \"main\" org.apache.spark.sql.AnalysisException: Table or view not found \u00b6 \u68c0\u67e5\u63d0\u4ea4 exchange \u4efb\u52a1\u7684\u547d\u4ee4\u4e2d\u662f\u5426\u9057\u6f0f\u53c2\u6570 -h \uff0c\u68c0\u67e5 table \u548c database \u662f\u5426\u6b63\u786e\uff0c\u5728 spark-sql \u4e2d\u6267\u884c\u7528\u6237\u914d\u7f6e\u7684 exec \u8bed\u53e5\uff0c\u9a8c\u8bc1 exec \u8bed\u53e5\u7684\u6b63\u786e\u6027\u3002 Q\uff1a\u8fd0\u884c\u65f6\u62a5\u9519 com.facebook.thrift.protocol.TProtocolException: Expected protocol id xxx \u00b6 \u8bf7\u68c0\u67e5NebulaGraph\u670d\u52a1\u7aef\u53e3\u914d\u7f6e\u662f\u5426\u6b63\u786e\u3002 \u5982\u679c\u662f\u6e90\u7801\u3001RPM \u6216 DEB \u5b89\u88c5\uff0c\u8bf7\u914d\u7f6e\u5404\u4e2a\u670d\u52a1\u7684\u914d\u7f6e\u6587\u4ef6\u4e2d --port \u5bf9\u5e94\u7684\u7aef\u53e3\u53f7\u3002 \u5982\u679c\u662f docker \u5b89\u88c5\uff0c\u8bf7\u914d\u7f6e docker \u6620\u5c04\u51fa\u6765\u7684\u7aef\u53e3\u53f7\uff0c\u67e5\u770b\u65b9\u5f0f\u5982\u4e0b\uff1a \u5728 nebula-docker-compose \u76ee\u5f55\u4e0b\u6267\u884c docker-compose ps \uff0c\u4f8b\u5982\uff1a $ docker-compose ps Name Command State Ports --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- nebula-docker-compose_graphd_1 /usr/local/nebula/bin/nebu ... Up ( healthy ) 0 .0.0.0:33205->19669/tcp, 0 .0.0.0:33204->19670/tcp, 0 .0.0.0:9669->9669/tcp nebula-docker-compose_metad0_1 ./bin/nebula-metad --flagf ... Up ( healthy ) 0 .0.0.0:33165->19559/tcp, 0 .0.0.0:33162->19560/tcp, 0 .0.0.0:33167->9559/tcp, 9560 /tcp nebula-docker-compose_metad1_1 ./bin/nebula-metad --flagf ... Up ( healthy ) 0 .0.0.0:33166->19559/tcp, 0 .0.0.0:33163->19560/tcp, 0 .0.0.0:33168->9559/tcp, 9560 /tcp nebula-docker-compose_metad2_1 ./bin/nebula-metad --flagf ... Up ( healthy ) 0 .0.0.0:33161->19559/tcp, 0 .0.0.0:33160->19560/tcp, 0 .0.0.0:33164->9559/tcp, 9560 /tcp nebula-docker-compose_storaged0_1 ./bin/nebula-storaged --fl ... Up ( healthy ) 0 .0.0.0:33180->19779/tcp, 0 .0.0.0:33178->19780/tcp, 9777 /tcp, 9778 /tcp, 0 .0.0.0:33183->9779/tcp, 9780 /tcp nebula-docker-compose_storaged1_1 ./bin/nebula-storaged --fl ... Up ( healthy ) 0 .0.0.0:33175->19779/tcp, 0 .0.0.0:33172->19780/tcp, 9777 /tcp, 9778 /tcp, 0 .0.0.0:33177->9779/tcp, 9780 /tcp nebula-docker-compose_storaged2_1 ./bin/nebula-storaged --fl ... Up ( healthy ) 0 .0.0.0:33184->19779/tcp, 0 .0.0.0:33181->19780/tcp, 9777 /tcp, 9778 /tcp, 0 .0.0.0:33185->9779/tcp, 9780 /tcp \u67e5\u770b Ports \u5217\uff0c\u67e5\u627e docker \u6620\u5c04\u7684\u7aef\u53e3\u53f7\uff0c\u4f8b\u5982\uff1a - Graph \u670d\u52a1\u53ef\u7528\u7684\u7aef\u53e3\u53f7\u662f 9669\u3002 - Meta \u670d\u52a1\u53ef\u7528\u7684\u7aef\u53e3\u53f7\u6709 33167\u300133168\u300133164\u3002 - Storage \u670d\u52a1\u53ef\u7528\u7684\u7aef\u53e3\u53f7\u6709 33183\u300133177\u300133185\u3002 Q\uff1a\u8fd0\u884c\u65f6\u62a5\u9519 Exception in thread \"main\" com.facebook.thrift.protocol.TProtocolException: The field 'code' has been assigned the invalid value -4 \u00b6 \u68c0\u67e5 Exchange \u7248\u672c\u4e0eNebulaGraph\u7248\u672c\u662f\u5426\u5339\u914d\uff0c\u8be6\u7ec6\u4fe1\u606f\u53ef\u53c2\u8003 \u4f7f\u7528\u9650\u5236 \u3002 Q\uff1a\u5c06 Hive \u4e2d\u7684\u6570\u636e\u5bfc\u5165NebulaGraph\u65f6\u51fa\u73b0\u4e71\u7801\u5982\u4f55\u89e3\u51b3\uff1f \u00b6 \u5982\u679c Hive \u4e2d\u6570\u636e\u7684\u5c5e\u6027\u503c\u5305\u542b\u4e2d\u6587\u5b57\u7b26\uff0c\u53ef\u80fd\u51fa\u73b0\u8be5\u60c5\u51b5\u3002\u89e3\u51b3\u65b9\u6848\u662f\u5728\u5bfc\u5165\u547d\u4ee4\u4e2d\u7684 JAR \u5305\u8def\u5f84\u524d\u52a0\u4e0a\u4ee5\u4e0b\u9009\u9879\uff1a --conf spark.driver.extraJavaOptions = -Dfile.encoding = utf-8 --conf spark.executor.extraJavaOptions = -Dfile.encoding = utf-8 \u5373\uff1a <spark_install_path>/bin/spark-submit --master \"local\" \\ --conf spark.driver.extraJavaOptions = -Dfile.encoding = utf-8 \\ --conf spark.executor.extraJavaOptions = -Dfile.encoding = utf-8 \\ --class com.vesoft.nebula.exchange.Exchange \\ <nebula-exchange-3.x.y.jar_path> -c <application.conf_path> \u5982\u679c\u662f\u5728 YARN \u4e2d\uff0c\u5219\u7528\u4ee5\u4e0b\u547d\u4ee4\uff1a <spark_install_path>/bin/spark-submit \\ --class com.vesoft.nebula.exchange.Exchange \\ --master yarn-cluster \\ --files <application.conf_path> \\ --conf spark.driver.extraClassPath = ./ \\ --conf spark.executor.extraClassPath = ./ \\ --conf spark.driver.extraJavaOptions = -Dfile.encoding = utf-8 \\ --conf spark.executor.extraJavaOptions = -Dfile.encoding = utf-8 \\ <nebula-exchange-3.x.y.jar_path> \\ -c application.conf Q\uff1aHive \u6570\u636e\u5bfc\u5165\u65f6\u63d0\u793a schema \u7248\u672c\u4e0d\u4e00\u81f4 \u00b6 Spark \u65e5\u5fd7\u63d0\u793a Hive Schema version 1.2.0 does not match metastore's schema version 2.1.0 Metastore is not upgraded or corrupt \u7684\u539f\u56e0\u662f Hive \u73af\u5883\u4e2d\u914d\u7f6e\u7684 metastore schema \u7248\u672c\u548c Spark \u4f7f\u7528\u7684 metastore \u7248\u672c\u4e0d\u4e00\u81f4\u3002 \u89e3\u51b3\u65b9\u6cd5\uff1a \u5c06 Hive \u73af\u5883\u4e2d\u5b58\u50a8 Hive metastore \u4fe1\u606f\u7684 MySQL version \u4fe1\u606f\u66f4\u65b0\u4e3a Spark \u4e2d\u4f7f\u7528\u7684 metastore \u7248\u672c\u3002 \u5047\u8bbe Hive \u5728 MySQL \u4e2d\u5b58\u50a8 metastore \u7684\u6570\u636e\u5e93\u662f hive \uff0c\u9700\u8981\u6309\u5982\u4e0b\u65b9\u5f0f\u4fee\u6539 hive.VERSION \u8868\u4e2d\u7684 version \u5b57\u6bb5\uff1a update hive.VERSION set SCHEMA_VERSION=\"2.1.0\" where VER_ID=1 \u5728 Hive \u73af\u5883\u7684 hive-site.xml \u6587\u4ef6\u4e2d\u589e\u52a0\u5982\u4e0b\u914d\u7f6e\uff1a <property> <name>hive.metastore.schema.verification</name> <value>false</value> </property> \u91cd\u542f Hive\u3002 Q: \u751f\u6210 SST \u65f6\u63d0\u793a org.rocksdb.RocksDBException: While open a file for appending: /path/sst/1-xxx.sst: No such file or directory \u00b6 \u6392\u67e5\u65b9\u6cd5\uff1a \u68c0\u67e5 /path \u662f\u5426\u5b58\u5728\uff0c\u5982\u6ca1\u6709\u6216\u8005\u8def\u5f84\u8bbe\u7f6e\u9519\u8bef\uff0c\u521b\u5efa\u6216\u4fee\u6b63\u8def\u5f84\u3002 \u68c0\u67e5 Spark \u5728\u6bcf\u53f0\u673a\u5668\u4e0a\u7684\u5f53\u524d\u7528\u6237\u5bf9 /path \u662f\u5426\u6709\u64cd\u4f5c\u6743\u9650\uff0c\u5982\u6ca1\u6709\uff0c\u6dfb\u52a0\u6743\u9650\u3002 \u914d\u7f6e\u95ee\u9898 \u00b6 Q\uff1a\u54ea\u4e9b\u914d\u7f6e\u9879\u5f71\u54cd\u5bfc\u5165\u6027\u80fd\uff1f \u00b6 batch\uff1a\u6bcf\u6b21\u53d1\u9001\u7ed9NebulaGraph\u670d\u52a1\u7684 nGQL \u8bed\u53e5\u4e2d\u5305\u542b\u7684\u6570\u636e\u6761\u6570\u3002 partition\uff1aSpark \u6570\u636e\u7684\u5206\u533a\u6570\uff0c\u8868\u793a\u6570\u636e\u5bfc\u5165\u7684\u5e76\u53d1\u6570\u3002 nebula.rate\uff1a\u5411NebulaGraph\u53d1\u9001\u8bf7\u6c42\u524d\u5148\u53bb\u4ee4\u724c\u6876\u83b7\u53d6\u4ee4\u724c\u3002 - limit\uff1a\u8868\u793a\u4ee4\u724c\u6876\u7684\u5927\u5c0f\u3002 - timeout\uff1a\u8868\u793a\u83b7\u53d6\u4ee4\u724c\u7684\u8d85\u65f6\u65f6\u95f4\u3002 \u6839\u636e\u673a\u5668\u6027\u80fd\u53ef\u9002\u5f53\u8c03\u6574\u8fd9\u56db\u9879\u53c2\u6570\u7684\u503c\u3002\u5982\u679c\u5728\u5bfc\u5165\u8fc7\u7a0b\u4e2d\uff0cStorage \u670d\u52a1\u7684 leader \u53d8\u66f4\uff0c\u53ef\u4ee5\u9002\u5f53\u8c03\u5c0f\u8fd9\u56db\u9879\u53c2\u6570\u7684\u503c\uff0c\u964d\u4f4e\u5bfc\u5165\u901f\u5ea6\u3002 \u5176\u4ed6\u95ee\u9898 \u00b6 Q\uff1aExchange \u652f\u6301\u54ea\u4e9b\u7248\u672c\u7684NebulaGraph\uff1f \u00b6 \u8bf7\u53c2\u89c1 Exchange \u7684 \u4f7f\u7528\u9650\u5236 \u3002 Q\uff1aExchange \u4e0e Spark Writer \u6709\u4ec0\u4e48\u5173\u7cfb\uff1f \u00b6 Exchange \u662f\u5728 Spark Writer \u57fa\u7840\u4e0a\u5f00\u53d1\u7684 Spark \u5e94\u7528\u7a0b\u5e8f\uff0c\u4e8c\u8005\u5747\u9002\u7528\u4e8e\u5728\u5206\u5e03\u5f0f\u73af\u5883\u4e2d\u5c06\u96c6\u7fa4\u7684\u6570\u636e\u6279\u91cf\u8fc1\u79fb\u5230NebulaGraph\u4e2d\uff0c\u4f46\u662f\u540e\u671f\u7684\u7ef4\u62a4\u5de5\u4f5c\u5c06\u96c6\u4e2d\u5728 Exchange \u4e0a\u3002\u4e0e Spark Writer \u76f8\u6bd4\uff0cExchange \u6709\u4ee5\u4e0b\u6539\u8fdb\uff1a \u652f\u6301\u66f4\u4e30\u5bcc\u7684\u6570\u636e\u6e90\uff0c\u5982 MySQL\u3001Neo4j\u3001Hive\u3001HBase\u3001Kafka\u3001Pulsar \u7b49\u3002 \u4fee\u590d\u4e86 Spark Writer \u7684\u90e8\u5206\u95ee\u9898\u3002\u4f8b\u5982 Spark \u8bfb\u53d6 HDFS \u91cc\u7684\u6570\u636e\u65f6\uff0c\u9ed8\u8ba4\u8bfb\u53d6\u5230\u7684\u6e90\u6570\u636e\u5747\u4e3a String \u7c7b\u578b\uff0c\u53ef\u80fd\u4e0eNebulaGraph\u5b9a\u4e49\u7684 Schema \u4e0d\u540c\uff0c\u6240\u4ee5 Exchange \u589e\u52a0\u4e86\u6570\u636e\u7c7b\u578b\u7684\u81ea\u52a8\u5339\u914d\u548c\u7c7b\u578b\u8f6c\u6362\uff0c\u5f53NebulaGraph\u5b9a\u4e49\u7684 Schema \u4e2d\u6570\u636e\u7c7b\u578b\u4e3a\u975e String \u7c7b\u578b\uff08\u5982 double\uff09\u65f6\uff0cExchange \u4f1a\u5c06 String \u7c7b\u578b\u7684\u6e90\u6570\u636e\u8f6c\u6362\u4e3a\u5bf9\u5e94\u7684\u7c7b\u578b\uff08\u5982 double\uff09\u3002 Q\uff1aExchange \u4f20\u8f93\u6570\u636e\u7684\u6027\u80fd\u5982\u4f55\uff1f \u00b6 Exchange \u7684\u6027\u80fd\u6d4b\u8bd5\u6570\u636e\u548c\u6d4b\u8bd5\u65b9\u6cd5\u53c2\u89c1 NebulaGraph Exchange test result \u3002","title":"Exchange \u5e38\u89c1\u95ee\u9898"},{"location":"import-export/nebula-exchange/ex-ug-FAQ/#exchange","text":"","title":"Exchange \u5e38\u89c1\u95ee\u9898"},{"location":"import-export/nebula-exchange/ex-ug-FAQ/#_1","text":"","title":"\u7f16\u8bd1\u95ee\u9898"},{"location":"import-export/nebula-exchange/ex-ug-FAQ/#q_central_could_not_resolve_dependencies_for_project_xxx","text":"\u8bf7\u68c0\u67e5 Maven \u5b89\u88c5\u76ee\u5f55\u4e0b libexec/conf/settings.xml \u6587\u4ef6\u7684 mirror \u90e8\u5206\uff1a <mirror> <id>alimaven</id> <mirrorOf>central</mirrorOf> <name>aliyun maven</name> <url>http://maven.aliyun.com/nexus/content/repositories/central/</url> </mirror> \u68c0\u67e5 mirrorOf \u7684\u503c\u662f\u5426\u914d\u7f6e\u4e3a * \uff0c\u5982\u679c\u4e3a * \uff0c\u8bf7\u4fee\u6539\u4e3a central \u6216 *,!SparkPackagesRepo,!bintray-streamnative-maven \u3002 \u539f\u56e0 \uff1aExchange \u7684 pom.xml \u4e2d\u6709\u4e24\u4e2a\u4f9d\u8d56\u5305\u4e0d\u5728 Maven \u7684 central \u4ed3\u5e93\u4e2d\uff0c pom.xml \u914d\u7f6e\u4e86\u8fd9\u4e24\u4e2a\u4f9d\u8d56\u6240\u5728\u7684\u4ed3\u5e93\u5730\u5740\u3002\u5982\u679c maven \u4e2d\u914d\u7f6e\u7684\u955c\u50cf\u5730\u5740\u5bf9\u5e94\u7684 mirrorOf \u503c\u4e3a * \uff0c\u90a3\u4e48\u6240\u6709\u4f9d\u8d56\u90fd\u4f1a\u5728 central \u4ed3\u5e93\u4e0b\u8f7d\uff0c\u5bfc\u81f4\u4e0b\u8f7d\u5931\u8d25\u3002","title":"Q\uff1a\u90e8\u5206\u975e central \u4ed3\u5e93\u7684\u5305\u4e0b\u8f7d\u5931\u8d25\uff0c\u62a5\u9519Could not resolve dependencies for project xxx"},{"location":"import-export/nebula-exchange/ex-ug-FAQ/#q_exchange_snapshot","text":"\u73b0\u8c61\uff1a\u7f16\u8bd1\u65f6\u63d0\u793a Could not find artifact com.vesoft:client:jar:xxx-SNAPSHOT \u3002 \u539f\u56e0\uff1a\u672c\u5730 maven \u6ca1\u6709\u914d\u7f6e\u7528\u4e8e\u4e0b\u8f7d SNAPSHOT \u7684\u4ed3\u5e93\u3002maven \u4e2d\u9ed8\u8ba4\u7684 central \u4ed3\u5e93\u7528\u4e8e\u5b58\u653e\u6b63\u5f0f\u53d1\u5e03\u7248\u672c\uff0c\u800c\u4e0d\u662f\u5f00\u53d1\u7248\u672c\uff08SNAPSHOT\uff09\u3002 \u89e3\u51b3\u65b9\u6848\uff1a\u5728 maven \u7684 setting.xml\u6587\u4ef6\u7684 profiles \u4f5c\u7528\u57df\u5185\u4e2d\u589e\u52a0\u4ee5\u4e0b\u914d\u7f6e\uff1a <profile> <activation> <activeByDefault>true</activeByDefault> </activation> <repositories> <repository> <id>snapshots</id> <url>https://oss.sonatype.org/content/repositories/snapshots/</url> <snapshots> <enabled>true</enabled> </snapshots> </repository> </repositories> </profile>","title":"Q\uff1a\u7f16\u8bd1 Exchange \u65f6\u65e0\u6cd5\u4e0b\u8f7d SNAPSHOT \u5305"},{"location":"import-export/nebula-exchange/ex-ug-FAQ/#_2","text":"","title":"\u6267\u884c\u95ee\u9898"},{"location":"import-export/nebula-exchange/ex-ug-FAQ/#qjavalangclassnotfoundexception_comvesoftnebulaexchangeexchange","text":"\u5728 Yarn-Cluster \u6a21\u5f0f\u4e0b\u63d0\u4ea4\u4efb\u52a1\uff0c\u8bf7\u53c2\u8003\u5982\u4e0b\u547d\u4ee4\uff0c \u5c24\u5176\u662f\u793a\u4f8b\u4e2d\u7684\u4e24\u4e2a --conf \uff1a $SPARK_HOME /bin/spark-submit --class com.vesoft.nebula.exchange.Exchange \\ --master yarn-cluster \\ --files application.conf \\ --conf spark.driver.extraClassPath = ./ \\ --conf spark.executor.extraClassPath = ./ \\ nebula-exchange-3.0.0.jar \\ -c application.conf","title":"Q\uff1a\u62a5\u9519java.lang.ClassNotFoundException: com.vesoft.nebula.exchange.Exchange"},{"location":"import-export/nebula-exchange/ex-ug-FAQ/#qmethod_name_xxx_not_found","text":"\u4e00\u822c\u662f\u7aef\u53e3\u914d\u7f6e\u9519\u8bef\uff0c\u9700\u68c0\u67e5 Meta \u670d\u52a1\u3001Graph \u670d\u52a1\u3001Storage \u670d\u52a1\u7684\u7aef\u53e3\u914d\u7f6e\u3002","title":"Q\uff1a\u62a5\u9519method name xxx not found"},{"location":"import-export/nebula-exchange/ex-ug-FAQ/#q_nosuchmethodmethodnotfound_exception_in_thread_main_javalangnosuchmethoderror","text":"\u7edd\u5927\u591a\u6570\u662f\u56e0\u4e3a JAR \u5305\u51b2\u7a81\u548c\u7248\u672c\u51b2\u7a81\u5bfc\u81f4\u7684\u62a5\u9519\uff0c\u8bf7\u68c0\u67e5\u62a5\u9519\u670d\u52a1\u7684\u7248\u672c\uff0c\u4e0e Exchange \u4e2d\u4f7f\u7528\u7684\u7248\u672c\u8fdb\u884c\u5bf9\u6bd4\uff0c\u68c0\u67e5\u662f\u5426\u4e00\u81f4\uff0c\u5c24\u5176\u662f Spark \u7248\u672c\u3001Scala \u7248\u672c\u3001Hive \u7248\u672c\u3002","title":"Q\uff1a\u62a5 NoSuchMethod\u3001MethodNotFound \u9519\u8bef\uff08Exception in thread \"main\" java.lang.NoSuchMethodError\u7b49\uff09"},{"location":"import-export/nebula-exchange/ex-ug-FAQ/#qexchange_hive_exception_in_thread_main_orgapachesparksqlanalysisexception_table_or_view_not_found","text":"\u68c0\u67e5\u63d0\u4ea4 exchange \u4efb\u52a1\u7684\u547d\u4ee4\u4e2d\u662f\u5426\u9057\u6f0f\u53c2\u6570 -h \uff0c\u68c0\u67e5 table \u548c database \u662f\u5426\u6b63\u786e\uff0c\u5728 spark-sql \u4e2d\u6267\u884c\u7528\u6237\u914d\u7f6e\u7684 exec \u8bed\u53e5\uff0c\u9a8c\u8bc1 exec \u8bed\u53e5\u7684\u6b63\u786e\u6027\u3002","title":"Q\uff1aExchange \u5bfc\u5165 Hive \u6570\u636e\u65f6\u62a5\u9519Exception in thread \"main\" org.apache.spark.sql.AnalysisException: Table or view not found"},{"location":"import-export/nebula-exchange/ex-ug-FAQ/#qcomfacebookthriftprotocoltprotocolexception_expected_protocol_id_xxx","text":"\u8bf7\u68c0\u67e5NebulaGraph\u670d\u52a1\u7aef\u53e3\u914d\u7f6e\u662f\u5426\u6b63\u786e\u3002 \u5982\u679c\u662f\u6e90\u7801\u3001RPM \u6216 DEB \u5b89\u88c5\uff0c\u8bf7\u914d\u7f6e\u5404\u4e2a\u670d\u52a1\u7684\u914d\u7f6e\u6587\u4ef6\u4e2d --port \u5bf9\u5e94\u7684\u7aef\u53e3\u53f7\u3002 \u5982\u679c\u662f docker \u5b89\u88c5\uff0c\u8bf7\u914d\u7f6e docker \u6620\u5c04\u51fa\u6765\u7684\u7aef\u53e3\u53f7\uff0c\u67e5\u770b\u65b9\u5f0f\u5982\u4e0b\uff1a \u5728 nebula-docker-compose \u76ee\u5f55\u4e0b\u6267\u884c docker-compose ps \uff0c\u4f8b\u5982\uff1a $ docker-compose ps Name Command State Ports --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- nebula-docker-compose_graphd_1 /usr/local/nebula/bin/nebu ... Up ( healthy ) 0 .0.0.0:33205->19669/tcp, 0 .0.0.0:33204->19670/tcp, 0 .0.0.0:9669->9669/tcp nebula-docker-compose_metad0_1 ./bin/nebula-metad --flagf ... Up ( healthy ) 0 .0.0.0:33165->19559/tcp, 0 .0.0.0:33162->19560/tcp, 0 .0.0.0:33167->9559/tcp, 9560 /tcp nebula-docker-compose_metad1_1 ./bin/nebula-metad --flagf ... Up ( healthy ) 0 .0.0.0:33166->19559/tcp, 0 .0.0.0:33163->19560/tcp, 0 .0.0.0:33168->9559/tcp, 9560 /tcp nebula-docker-compose_metad2_1 ./bin/nebula-metad --flagf ... Up ( healthy ) 0 .0.0.0:33161->19559/tcp, 0 .0.0.0:33160->19560/tcp, 0 .0.0.0:33164->9559/tcp, 9560 /tcp nebula-docker-compose_storaged0_1 ./bin/nebula-storaged --fl ... Up ( healthy ) 0 .0.0.0:33180->19779/tcp, 0 .0.0.0:33178->19780/tcp, 9777 /tcp, 9778 /tcp, 0 .0.0.0:33183->9779/tcp, 9780 /tcp nebula-docker-compose_storaged1_1 ./bin/nebula-storaged --fl ... Up ( healthy ) 0 .0.0.0:33175->19779/tcp, 0 .0.0.0:33172->19780/tcp, 9777 /tcp, 9778 /tcp, 0 .0.0.0:33177->9779/tcp, 9780 /tcp nebula-docker-compose_storaged2_1 ./bin/nebula-storaged --fl ... Up ( healthy ) 0 .0.0.0:33184->19779/tcp, 0 .0.0.0:33181->19780/tcp, 9777 /tcp, 9778 /tcp, 0 .0.0.0:33185->9779/tcp, 9780 /tcp \u67e5\u770b Ports \u5217\uff0c\u67e5\u627e docker \u6620\u5c04\u7684\u7aef\u53e3\u53f7\uff0c\u4f8b\u5982\uff1a - Graph \u670d\u52a1\u53ef\u7528\u7684\u7aef\u53e3\u53f7\u662f 9669\u3002 - Meta \u670d\u52a1\u53ef\u7528\u7684\u7aef\u53e3\u53f7\u6709 33167\u300133168\u300133164\u3002 - Storage \u670d\u52a1\u53ef\u7528\u7684\u7aef\u53e3\u53f7\u6709 33183\u300133177\u300133185\u3002","title":"Q\uff1a\u8fd0\u884c\u65f6\u62a5\u9519com.facebook.thrift.protocol.TProtocolException: Expected protocol id xxx"},{"location":"import-export/nebula-exchange/ex-ug-FAQ/#qexception_in_thread_main_comfacebookthriftprotocoltprotocolexception_the_field_code_has_been_assigned_the_invalid_value_-4","text":"\u68c0\u67e5 Exchange \u7248\u672c\u4e0eNebulaGraph\u7248\u672c\u662f\u5426\u5339\u914d\uff0c\u8be6\u7ec6\u4fe1\u606f\u53ef\u53c2\u8003 \u4f7f\u7528\u9650\u5236 \u3002","title":"Q\uff1a\u8fd0\u884c\u65f6\u62a5\u9519Exception in thread \"main\" com.facebook.thrift.protocol.TProtocolException: The field 'code' has been assigned the invalid value -4"},{"location":"import-export/nebula-exchange/ex-ug-FAQ/#q_hive_nebulagraph","text":"\u5982\u679c Hive \u4e2d\u6570\u636e\u7684\u5c5e\u6027\u503c\u5305\u542b\u4e2d\u6587\u5b57\u7b26\uff0c\u53ef\u80fd\u51fa\u73b0\u8be5\u60c5\u51b5\u3002\u89e3\u51b3\u65b9\u6848\u662f\u5728\u5bfc\u5165\u547d\u4ee4\u4e2d\u7684 JAR \u5305\u8def\u5f84\u524d\u52a0\u4e0a\u4ee5\u4e0b\u9009\u9879\uff1a --conf spark.driver.extraJavaOptions = -Dfile.encoding = utf-8 --conf spark.executor.extraJavaOptions = -Dfile.encoding = utf-8 \u5373\uff1a <spark_install_path>/bin/spark-submit --master \"local\" \\ --conf spark.driver.extraJavaOptions = -Dfile.encoding = utf-8 \\ --conf spark.executor.extraJavaOptions = -Dfile.encoding = utf-8 \\ --class com.vesoft.nebula.exchange.Exchange \\ <nebula-exchange-3.x.y.jar_path> -c <application.conf_path> \u5982\u679c\u662f\u5728 YARN \u4e2d\uff0c\u5219\u7528\u4ee5\u4e0b\u547d\u4ee4\uff1a <spark_install_path>/bin/spark-submit \\ --class com.vesoft.nebula.exchange.Exchange \\ --master yarn-cluster \\ --files <application.conf_path> \\ --conf spark.driver.extraClassPath = ./ \\ --conf spark.executor.extraClassPath = ./ \\ --conf spark.driver.extraJavaOptions = -Dfile.encoding = utf-8 \\ --conf spark.executor.extraJavaOptions = -Dfile.encoding = utf-8 \\ <nebula-exchange-3.x.y.jar_path> \\ -c application.conf","title":"Q\uff1a\u5c06 Hive \u4e2d\u7684\u6570\u636e\u5bfc\u5165NebulaGraph\u65f6\u51fa\u73b0\u4e71\u7801\u5982\u4f55\u89e3\u51b3\uff1f"},{"location":"import-export/nebula-exchange/ex-ug-FAQ/#qhive_schema","text":"Spark \u65e5\u5fd7\u63d0\u793a Hive Schema version 1.2.0 does not match metastore's schema version 2.1.0 Metastore is not upgraded or corrupt \u7684\u539f\u56e0\u662f Hive \u73af\u5883\u4e2d\u914d\u7f6e\u7684 metastore schema \u7248\u672c\u548c Spark \u4f7f\u7528\u7684 metastore \u7248\u672c\u4e0d\u4e00\u81f4\u3002 \u89e3\u51b3\u65b9\u6cd5\uff1a \u5c06 Hive \u73af\u5883\u4e2d\u5b58\u50a8 Hive metastore \u4fe1\u606f\u7684 MySQL version \u4fe1\u606f\u66f4\u65b0\u4e3a Spark \u4e2d\u4f7f\u7528\u7684 metastore \u7248\u672c\u3002 \u5047\u8bbe Hive \u5728 MySQL \u4e2d\u5b58\u50a8 metastore \u7684\u6570\u636e\u5e93\u662f hive \uff0c\u9700\u8981\u6309\u5982\u4e0b\u65b9\u5f0f\u4fee\u6539 hive.VERSION \u8868\u4e2d\u7684 version \u5b57\u6bb5\uff1a update hive.VERSION set SCHEMA_VERSION=\"2.1.0\" where VER_ID=1 \u5728 Hive \u73af\u5883\u7684 hive-site.xml \u6587\u4ef6\u4e2d\u589e\u52a0\u5982\u4e0b\u914d\u7f6e\uff1a <property> <name>hive.metastore.schema.verification</name> <value>false</value> </property> \u91cd\u542f Hive\u3002","title":"Q\uff1aHive \u6570\u636e\u5bfc\u5165\u65f6\u63d0\u793a schema \u7248\u672c\u4e0d\u4e00\u81f4"},{"location":"import-export/nebula-exchange/ex-ug-FAQ/#q_sst_orgrocksdbrocksdbexception_while_open_a_file_for_appending_pathsst1-xxxsst_no_such_file_or_directory","text":"\u6392\u67e5\u65b9\u6cd5\uff1a \u68c0\u67e5 /path \u662f\u5426\u5b58\u5728\uff0c\u5982\u6ca1\u6709\u6216\u8005\u8def\u5f84\u8bbe\u7f6e\u9519\u8bef\uff0c\u521b\u5efa\u6216\u4fee\u6b63\u8def\u5f84\u3002 \u68c0\u67e5 Spark \u5728\u6bcf\u53f0\u673a\u5668\u4e0a\u7684\u5f53\u524d\u7528\u6237\u5bf9 /path \u662f\u5426\u6709\u64cd\u4f5c\u6743\u9650\uff0c\u5982\u6ca1\u6709\uff0c\u6dfb\u52a0\u6743\u9650\u3002","title":"Q: \u751f\u6210 SST \u65f6\u63d0\u793a org.rocksdb.RocksDBException: While open a file for appending: /path/sst/1-xxx.sst: No such file or directory"},{"location":"import-export/nebula-exchange/ex-ug-FAQ/#_3","text":"","title":"\u914d\u7f6e\u95ee\u9898"},{"location":"import-export/nebula-exchange/ex-ug-FAQ/#q","text":"batch\uff1a\u6bcf\u6b21\u53d1\u9001\u7ed9NebulaGraph\u670d\u52a1\u7684 nGQL \u8bed\u53e5\u4e2d\u5305\u542b\u7684\u6570\u636e\u6761\u6570\u3002 partition\uff1aSpark \u6570\u636e\u7684\u5206\u533a\u6570\uff0c\u8868\u793a\u6570\u636e\u5bfc\u5165\u7684\u5e76\u53d1\u6570\u3002 nebula.rate\uff1a\u5411NebulaGraph\u53d1\u9001\u8bf7\u6c42\u524d\u5148\u53bb\u4ee4\u724c\u6876\u83b7\u53d6\u4ee4\u724c\u3002 - limit\uff1a\u8868\u793a\u4ee4\u724c\u6876\u7684\u5927\u5c0f\u3002 - timeout\uff1a\u8868\u793a\u83b7\u53d6\u4ee4\u724c\u7684\u8d85\u65f6\u65f6\u95f4\u3002 \u6839\u636e\u673a\u5668\u6027\u80fd\u53ef\u9002\u5f53\u8c03\u6574\u8fd9\u56db\u9879\u53c2\u6570\u7684\u503c\u3002\u5982\u679c\u5728\u5bfc\u5165\u8fc7\u7a0b\u4e2d\uff0cStorage \u670d\u52a1\u7684 leader \u53d8\u66f4\uff0c\u53ef\u4ee5\u9002\u5f53\u8c03\u5c0f\u8fd9\u56db\u9879\u53c2\u6570\u7684\u503c\uff0c\u964d\u4f4e\u5bfc\u5165\u901f\u5ea6\u3002","title":"Q\uff1a\u54ea\u4e9b\u914d\u7f6e\u9879\u5f71\u54cd\u5bfc\u5165\u6027\u80fd\uff1f"},{"location":"import-export/nebula-exchange/ex-ug-FAQ/#_4","text":"","title":"\u5176\u4ed6\u95ee\u9898"},{"location":"import-export/nebula-exchange/ex-ug-FAQ/#qexchange_nebulagraph","text":"\u8bf7\u53c2\u89c1 Exchange \u7684 \u4f7f\u7528\u9650\u5236 \u3002","title":"Q\uff1aExchange \u652f\u6301\u54ea\u4e9b\u7248\u672c\u7684NebulaGraph\uff1f"},{"location":"import-export/nebula-exchange/ex-ug-FAQ/#qexchange_spark_writer","text":"Exchange \u662f\u5728 Spark Writer \u57fa\u7840\u4e0a\u5f00\u53d1\u7684 Spark \u5e94\u7528\u7a0b\u5e8f\uff0c\u4e8c\u8005\u5747\u9002\u7528\u4e8e\u5728\u5206\u5e03\u5f0f\u73af\u5883\u4e2d\u5c06\u96c6\u7fa4\u7684\u6570\u636e\u6279\u91cf\u8fc1\u79fb\u5230NebulaGraph\u4e2d\uff0c\u4f46\u662f\u540e\u671f\u7684\u7ef4\u62a4\u5de5\u4f5c\u5c06\u96c6\u4e2d\u5728 Exchange \u4e0a\u3002\u4e0e Spark Writer \u76f8\u6bd4\uff0cExchange \u6709\u4ee5\u4e0b\u6539\u8fdb\uff1a \u652f\u6301\u66f4\u4e30\u5bcc\u7684\u6570\u636e\u6e90\uff0c\u5982 MySQL\u3001Neo4j\u3001Hive\u3001HBase\u3001Kafka\u3001Pulsar \u7b49\u3002 \u4fee\u590d\u4e86 Spark Writer \u7684\u90e8\u5206\u95ee\u9898\u3002\u4f8b\u5982 Spark \u8bfb\u53d6 HDFS \u91cc\u7684\u6570\u636e\u65f6\uff0c\u9ed8\u8ba4\u8bfb\u53d6\u5230\u7684\u6e90\u6570\u636e\u5747\u4e3a String \u7c7b\u578b\uff0c\u53ef\u80fd\u4e0eNebulaGraph\u5b9a\u4e49\u7684 Schema \u4e0d\u540c\uff0c\u6240\u4ee5 Exchange \u589e\u52a0\u4e86\u6570\u636e\u7c7b\u578b\u7684\u81ea\u52a8\u5339\u914d\u548c\u7c7b\u578b\u8f6c\u6362\uff0c\u5f53NebulaGraph\u5b9a\u4e49\u7684 Schema \u4e2d\u6570\u636e\u7c7b\u578b\u4e3a\u975e String \u7c7b\u578b\uff08\u5982 double\uff09\u65f6\uff0cExchange \u4f1a\u5c06 String \u7c7b\u578b\u7684\u6e90\u6570\u636e\u8f6c\u6362\u4e3a\u5bf9\u5e94\u7684\u7c7b\u578b\uff08\u5982 double\uff09\u3002","title":"Q\uff1aExchange \u4e0e Spark Writer \u6709\u4ec0\u4e48\u5173\u7cfb\uff1f"},{"location":"import-export/nebula-exchange/ex-ug-FAQ/#qexchange","text":"Exchange \u7684\u6027\u80fd\u6d4b\u8bd5\u6570\u636e\u548c\u6d4b\u8bd5\u65b9\u6cd5\u53c2\u89c1 NebulaGraph Exchange test result \u3002","title":"Q\uff1aExchange \u4f20\u8f93\u6570\u636e\u7684\u6027\u80fd\u5982\u4f55\uff1f"},{"location":"import-export/nebula-exchange/ex-ug-compile/","text":"\u83b7\u53d6 NebulaGraph Exchange \u00b6 \u672c\u6587\u4ecb\u7ecd\u5982\u4f55\u83b7\u53d6 NebulaGraph Exchange \u7684 JAR \u6587\u4ef6\u3002 \u76f4\u63a5\u4e0b\u8f7d JAR \u6587\u4ef6 \u00b6 \u793e\u533a\u7248 Exchange \u7684 JAR \u6587\u4ef6\u53ef\u4ee5\u76f4\u63a5 \u4e0b\u8f7d \u3002 \u8981\u4e0b\u8f7d\u4f01\u4e1a\u7248 Exchange\uff0c\u9700\u5148 \u8054\u7cfb\u6211\u4eec \u3002 \u7f16\u8bd1\u6e90\u4ee3\u7801\u83b7\u53d6 JAR \u6587\u4ef6 \u00b6 \u793e\u533a\u7248 Exchange \u7684 JAR \u6587\u4ef6\u8fd8\u53ef\u4ee5\u901a\u8fc7\u7f16\u8bd1\u6e90\u4ee3\u7801\u83b7\u53d6\u3002\u4e0b\u6587\u4ecb\u7ecd\u5982\u4f55\u7f16\u8bd1 Exchange \u6e90\u4ee3\u7801\u3002 Enterpriseonly \u4f01\u4e1a\u7248 Exchange \u4ec5\u80fd\u5728NebulaGraph\u4f01\u4e1a\u7248\u5957\u9910\u4e2d\u83b7\u53d6\u3002 \u524d\u63d0\u6761\u4ef6 \u00b6 \u5b89\u88c5 Maven \u3002 \u6839\u636e\u6570\u636e\u6e90\u5b89\u88c5\u9700\u8981\u7684 Spark \u7248\u672c\uff0c\u4ece\u5404\u6570\u636e\u6e90\u5bfc\u51fa\u6570\u636e\u652f\u6301\u7684 Spark \u7248\u672c\u53c2\u89c1 \u8f6f\u4ef6\u4f9d\u8d56 \u3002 \u64cd\u4f5c\u6b65\u9aa4 \u00b6 \u5728\u6839\u76ee\u5f55\u514b\u9686\u4ed3\u5e93 nebula-exchange \u3002 git clone -b release-3.6 https://github.com/vesoft-inc/nebula-exchange.git \u5207\u6362\u5230\u76ee\u5f55 nebula-exchange \u3002 cd nebula-exchange \u6839\u636e Exchange \u4f7f\u7528\u73af\u5883\u4e2d\u7684 Spark \u7248\u672c\u6253\u5305 Exchange\u3002 Spark 2.2\uff1a mvn clean package -Dmaven.test.skip = true -Dgpg.skip -Dmaven.javadoc.skip = true \\ -pl nebula-exchange_spark_2.2 -am -Pscala-2.11 -Pspark-2.2 Spark 2.4\uff1a mvn clean package -Dmaven.test.skip = true -Dgpg.skip -Dmaven.javadoc.skip = true \\ -pl nebula-exchange_spark_2.4 -am -Pscala-2.11 -Pspark-2.4 Spark 3.0\uff1a mvn clean package -Dmaven.test.skip = true -Dgpg.skip -Dmaven.javadoc.skip = true \\ -pl nebula-exchange_spark_3.0 -am -Pscala-2.12 -Pspark-3.0 \u7f16\u8bd1\u6210\u529f\u540e\uff0c\u53ef\u4ee5\u5728 nebula-exchange_spark_x.x/target/ \u76ee\u5f55\u91cc\u627e\u5230 nebula-exchange_spark_x.x-release-3.6.jar \u6587\u4ef6\u3002 x.x \u4ee3\u8868 Spark \u7248\u672c\uff0c\u4f8b\u5982 2.4 \u3002 Note JAR \u6587\u4ef6\u7248\u672c\u53f7\u4f1a\u56e0 NebulaGraph Java Client \u7684\u53d1\u5e03\u7248\u672c\u800c\u53d8\u5316\u3002\u7528\u6237\u53ef\u4ee5\u5728 Releases \u9875\u9762 \u67e5\u770b\u6700\u65b0\u7248\u672c\u3002 \u8fc1\u79fb\u6570\u636e\u65f6\uff0c\u7528\u6237\u53ef\u4ee5\u53c2\u8003\u914d\u7f6e\u6587\u4ef6 target/classes/application.conf \u3002 \u4e0b\u8f7d\u4f9d\u8d56\u5305\u5931\u8d25 \u00b6 \u5982\u679c\u7f16\u8bd1\u65f6\u4e0b\u8f7d\u4f9d\u8d56\u5305\u5931\u8d25\uff1a \u68c0\u67e5\u7f51\u7edc\u8bbe\u7f6e\uff0c\u786e\u8ba4\u7f51\u7edc\u6b63\u5e38\u3002 \u4fee\u6539 Maven \u5b89\u88c5\u76ee\u5f55\u4e0b libexec/conf/settings.xml \u6587\u4ef6\u7684 mirror \u90e8\u5206\uff1a <mirror> <id>alimaven</id> <mirrorOf>central</mirrorOf> <name>aliyun maven</name> <url>http://maven.aliyun.com/nexus/content/repositories/central/</url> </mirror>","title":"\u83b7\u53d6 NebulaGraph Exchange"},{"location":"import-export/nebula-exchange/ex-ug-compile/#nebulagraph_exchange","text":"\u672c\u6587\u4ecb\u7ecd\u5982\u4f55\u83b7\u53d6 NebulaGraph Exchange \u7684 JAR \u6587\u4ef6\u3002","title":"\u83b7\u53d6 NebulaGraph Exchange"},{"location":"import-export/nebula-exchange/ex-ug-compile/#jar","text":"\u793e\u533a\u7248 Exchange \u7684 JAR \u6587\u4ef6\u53ef\u4ee5\u76f4\u63a5 \u4e0b\u8f7d \u3002 \u8981\u4e0b\u8f7d\u4f01\u4e1a\u7248 Exchange\uff0c\u9700\u5148 \u8054\u7cfb\u6211\u4eec \u3002","title":"\u76f4\u63a5\u4e0b\u8f7d JAR \u6587\u4ef6"},{"location":"import-export/nebula-exchange/ex-ug-compile/#jar_1","text":"\u793e\u533a\u7248 Exchange \u7684 JAR \u6587\u4ef6\u8fd8\u53ef\u4ee5\u901a\u8fc7\u7f16\u8bd1\u6e90\u4ee3\u7801\u83b7\u53d6\u3002\u4e0b\u6587\u4ecb\u7ecd\u5982\u4f55\u7f16\u8bd1 Exchange \u6e90\u4ee3\u7801\u3002 Enterpriseonly \u4f01\u4e1a\u7248 Exchange \u4ec5\u80fd\u5728NebulaGraph\u4f01\u4e1a\u7248\u5957\u9910\u4e2d\u83b7\u53d6\u3002","title":"\u7f16\u8bd1\u6e90\u4ee3\u7801\u83b7\u53d6 JAR \u6587\u4ef6"},{"location":"import-export/nebula-exchange/ex-ug-compile/#_1","text":"\u5b89\u88c5 Maven \u3002 \u6839\u636e\u6570\u636e\u6e90\u5b89\u88c5\u9700\u8981\u7684 Spark \u7248\u672c\uff0c\u4ece\u5404\u6570\u636e\u6e90\u5bfc\u51fa\u6570\u636e\u652f\u6301\u7684 Spark \u7248\u672c\u53c2\u89c1 \u8f6f\u4ef6\u4f9d\u8d56 \u3002","title":"\u524d\u63d0\u6761\u4ef6"},{"location":"import-export/nebula-exchange/ex-ug-compile/#_2","text":"\u5728\u6839\u76ee\u5f55\u514b\u9686\u4ed3\u5e93 nebula-exchange \u3002 git clone -b release-3.6 https://github.com/vesoft-inc/nebula-exchange.git \u5207\u6362\u5230\u76ee\u5f55 nebula-exchange \u3002 cd nebula-exchange \u6839\u636e Exchange \u4f7f\u7528\u73af\u5883\u4e2d\u7684 Spark \u7248\u672c\u6253\u5305 Exchange\u3002 Spark 2.2\uff1a mvn clean package -Dmaven.test.skip = true -Dgpg.skip -Dmaven.javadoc.skip = true \\ -pl nebula-exchange_spark_2.2 -am -Pscala-2.11 -Pspark-2.2 Spark 2.4\uff1a mvn clean package -Dmaven.test.skip = true -Dgpg.skip -Dmaven.javadoc.skip = true \\ -pl nebula-exchange_spark_2.4 -am -Pscala-2.11 -Pspark-2.4 Spark 3.0\uff1a mvn clean package -Dmaven.test.skip = true -Dgpg.skip -Dmaven.javadoc.skip = true \\ -pl nebula-exchange_spark_3.0 -am -Pscala-2.12 -Pspark-3.0 \u7f16\u8bd1\u6210\u529f\u540e\uff0c\u53ef\u4ee5\u5728 nebula-exchange_spark_x.x/target/ \u76ee\u5f55\u91cc\u627e\u5230 nebula-exchange_spark_x.x-release-3.6.jar \u6587\u4ef6\u3002 x.x \u4ee3\u8868 Spark \u7248\u672c\uff0c\u4f8b\u5982 2.4 \u3002 Note JAR \u6587\u4ef6\u7248\u672c\u53f7\u4f1a\u56e0 NebulaGraph Java Client \u7684\u53d1\u5e03\u7248\u672c\u800c\u53d8\u5316\u3002\u7528\u6237\u53ef\u4ee5\u5728 Releases \u9875\u9762 \u67e5\u770b\u6700\u65b0\u7248\u672c\u3002 \u8fc1\u79fb\u6570\u636e\u65f6\uff0c\u7528\u6237\u53ef\u4ee5\u53c2\u8003\u914d\u7f6e\u6587\u4ef6 target/classes/application.conf \u3002","title":"\u64cd\u4f5c\u6b65\u9aa4"},{"location":"import-export/nebula-exchange/ex-ug-compile/#_3","text":"\u5982\u679c\u7f16\u8bd1\u65f6\u4e0b\u8f7d\u4f9d\u8d56\u5305\u5931\u8d25\uff1a \u68c0\u67e5\u7f51\u7edc\u8bbe\u7f6e\uff0c\u786e\u8ba4\u7f51\u7edc\u6b63\u5e38\u3002 \u4fee\u6539 Maven \u5b89\u88c5\u76ee\u5f55\u4e0b libexec/conf/settings.xml \u6587\u4ef6\u7684 mirror \u90e8\u5206\uff1a <mirror> <id>alimaven</id> <mirrorOf>central</mirrorOf> <name>aliyun maven</name> <url>http://maven.aliyun.com/nexus/content/repositories/central/</url> </mirror>","title":"\u4e0b\u8f7d\u4f9d\u8d56\u5305\u5931\u8d25"},{"location":"import-export/nebula-exchange/about-exchange/ex-ug-limitations/","text":"\u4f7f\u7528\u9650\u5236 \u00b6 \u672c\u6587\u63cf\u8ff0 Exchange 3.6.0 \u7684\u4e00\u4e9b\u4f7f\u7528\u9650\u5236\u3002 \u4f7f\u7528\u73af\u5883 \u00b6 Exchange 3.x \u652f\u6301\u4ee5\u4e0b\u64cd\u4f5c\u7cfb\u7edf\uff1a CentOS 7 macOS \u8f6f\u4ef6\u4f9d\u8d56 \u00b6 \u4e3a\u4fdd\u8bc1 Exchange \u6b63\u5e38\u5de5\u4f5c\uff0c\u8bf7\u786e\u8ba4\u673a\u5668\u4e0a\u5df2\u7ecf\u5b89\u88c5\u5982\u4e0b\u8f6f\u4ef6\uff1a Java 1.8 \u7248\u672c Scala 2.10.7\u30012.11.12 \u6216 2.12.10 \u7248\u672c Apache Spark\u3002\u4f7f\u7528 Exchange \u4ece\u4e0d\u540c\u6570\u636e\u6e90\u5bfc\u51fa\u6570\u636e\u5bf9 Spark \u7248\u672c\u7684\u8981\u6c42\u5982\u4e0b\uff1a Note \u4f7f\u7528 Exchange \u65f6\uff0c\u9700\u6839\u636e Spark \u7248\u672c\u9009\u62e9\u76f8\u5e94\u7684 JAR \u6587\u4ef6\u3002\u4f8b\u5982\uff0c\u5f53 Spark \u7248\u672c\u4e3a 2.4 \u65f6\uff0c\u9009\u62e9 nebula-exchange_spark_2.4-3.6.0.jar\u3002 \u6570\u636e\u6e90 Spark 2.2 Spark 2.4 Spark 3 CSV \u6587\u4ef6 \u652f\u6301 \u652f\u6301 \u652f\u6301 JSON \u6587\u4ef6 \u652f\u6301 \u652f\u6301 \u652f\u6301 ORC \u6587\u4ef6 \u652f\u6301 \u652f\u6301 \u652f\u6301 Parquet \u6587\u4ef6 \u652f\u6301 \u652f\u6301 \u652f\u6301 HBase \u652f\u6301 \u652f\u6301 \u652f\u6301 MySQL \u652f\u6301 \u652f\u6301 \u652f\u6301 PostgreSQL \u652f\u6301 \u652f\u6301 \u652f\u6301 Oracle \u652f\u6301 \u652f\u6301 \u652f\u6301 ClickHouse \u652f\u6301 \u652f\u6301 \u652f\u6301 Neo4j \u4e0d\u652f\u6301 \u652f\u6301 \u4e0d\u652f\u6301 Hive \u652f\u6301 \u652f\u6301 \u652f\u6301 MaxCompute \u4e0d\u652f\u6301 \u652f\u6301 \u4e0d\u652f\u6301 Pulsar \u4e0d\u652f\u6301 \u652f\u6301 \u672a\u6d4b\u8bd5 Kafka \u4e0d\u652f\u6301 \u652f\u6301 \u672a\u6d4b\u8bd5 NebulaGraph \u4e0d\u652f\u6301 \u652f\u6301 \u4e0d\u652f\u6301 \u5728\u4ee5\u4e0b\u4f7f\u7528\u573a\u666f\uff0c\u8fd8\u9700\u8981\u90e8\u7f72 Hadoop Distributed File System (HDFS)\uff1a \u8fc1\u79fb HDFS \u7684\u6570\u636e \u751f\u6210 SST \u6587\u4ef6","title":"\u4f7f\u7528\u9650\u5236"},{"location":"import-export/nebula-exchange/about-exchange/ex-ug-limitations/#_1","text":"\u672c\u6587\u63cf\u8ff0 Exchange 3.6.0 \u7684\u4e00\u4e9b\u4f7f\u7528\u9650\u5236\u3002","title":"\u4f7f\u7528\u9650\u5236"},{"location":"import-export/nebula-exchange/about-exchange/ex-ug-limitations/#_2","text":"Exchange 3.x \u652f\u6301\u4ee5\u4e0b\u64cd\u4f5c\u7cfb\u7edf\uff1a CentOS 7 macOS","title":"\u4f7f\u7528\u73af\u5883"},{"location":"import-export/nebula-exchange/about-exchange/ex-ug-limitations/#_3","text":"\u4e3a\u4fdd\u8bc1 Exchange \u6b63\u5e38\u5de5\u4f5c\uff0c\u8bf7\u786e\u8ba4\u673a\u5668\u4e0a\u5df2\u7ecf\u5b89\u88c5\u5982\u4e0b\u8f6f\u4ef6\uff1a Java 1.8 \u7248\u672c Scala 2.10.7\u30012.11.12 \u6216 2.12.10 \u7248\u672c Apache Spark\u3002\u4f7f\u7528 Exchange \u4ece\u4e0d\u540c\u6570\u636e\u6e90\u5bfc\u51fa\u6570\u636e\u5bf9 Spark \u7248\u672c\u7684\u8981\u6c42\u5982\u4e0b\uff1a Note \u4f7f\u7528 Exchange \u65f6\uff0c\u9700\u6839\u636e Spark \u7248\u672c\u9009\u62e9\u76f8\u5e94\u7684 JAR \u6587\u4ef6\u3002\u4f8b\u5982\uff0c\u5f53 Spark \u7248\u672c\u4e3a 2.4 \u65f6\uff0c\u9009\u62e9 nebula-exchange_spark_2.4-3.6.0.jar\u3002 \u6570\u636e\u6e90 Spark 2.2 Spark 2.4 Spark 3 CSV \u6587\u4ef6 \u652f\u6301 \u652f\u6301 \u652f\u6301 JSON \u6587\u4ef6 \u652f\u6301 \u652f\u6301 \u652f\u6301 ORC \u6587\u4ef6 \u652f\u6301 \u652f\u6301 \u652f\u6301 Parquet \u6587\u4ef6 \u652f\u6301 \u652f\u6301 \u652f\u6301 HBase \u652f\u6301 \u652f\u6301 \u652f\u6301 MySQL \u652f\u6301 \u652f\u6301 \u652f\u6301 PostgreSQL \u652f\u6301 \u652f\u6301 \u652f\u6301 Oracle \u652f\u6301 \u652f\u6301 \u652f\u6301 ClickHouse \u652f\u6301 \u652f\u6301 \u652f\u6301 Neo4j \u4e0d\u652f\u6301 \u652f\u6301 \u4e0d\u652f\u6301 Hive \u652f\u6301 \u652f\u6301 \u652f\u6301 MaxCompute \u4e0d\u652f\u6301 \u652f\u6301 \u4e0d\u652f\u6301 Pulsar \u4e0d\u652f\u6301 \u652f\u6301 \u672a\u6d4b\u8bd5 Kafka \u4e0d\u652f\u6301 \u652f\u6301 \u672a\u6d4b\u8bd5 NebulaGraph \u4e0d\u652f\u6301 \u652f\u6301 \u4e0d\u652f\u6301 \u5728\u4ee5\u4e0b\u4f7f\u7528\u573a\u666f\uff0c\u8fd8\u9700\u8981\u90e8\u7f72 Hadoop Distributed File System (HDFS)\uff1a \u8fc1\u79fb HDFS \u7684\u6570\u636e \u751f\u6210 SST \u6587\u4ef6","title":"\u8f6f\u4ef6\u4f9d\u8d56"},{"location":"import-export/nebula-exchange/about-exchange/ex-ug-what-is-exchange/","text":"\u4ec0\u4e48\u662f NebulaGraph Exchange \u00b6 NebulaGraph Exchange \uff08\u7b80\u79f0 Exchange\uff09\u662f\u4e00\u6b3e Apache Spark\u2122 \u5e94\u7528\uff0c\u7528\u4e8e\u5728\u5206\u5e03\u5f0f\u73af\u5883\u4e2d\u5c06\u96c6\u7fa4\u4e2d\u7684\u6570\u636e\u6279\u91cf\u8fc1\u79fb\u5230NebulaGraph\u4e2d\uff0c\u80fd\u652f\u6301\u591a\u79cd\u4e0d\u540c\u683c\u5f0f\u7684\u6279\u5f0f\u6570\u636e\u548c\u6d41\u5f0f\u6570\u636e\u7684\u8fc1\u79fb\u3002 Exchange \u7531 Reader\u3001Processor \u548c Writer \u4e09\u90e8\u5206\u7ec4\u6210\u3002Reader \u8bfb\u53d6\u4e0d\u540c\u6765\u6e90\u7684\u6570\u636e\u8fd4\u56de DataFrame \u540e\uff0cProcessor \u904d\u5386 DataFrame \u7684\u6bcf\u4e00\u884c\uff0c\u6839\u636e\u914d\u7f6e\u6587\u4ef6\u4e2d fields \u7684\u6620\u5c04\u5173\u7cfb\uff0c\u6309\u5217\u540d\u83b7\u53d6\u5bf9\u5e94\u7684\u503c\u3002\u5728\u904d\u5386\u6307\u5b9a\u6279\u5904\u7406\u7684\u884c\u6570\u540e\uff0cWriter \u4f1a\u5c06\u83b7\u53d6\u7684\u6570\u636e\u4e00\u6b21\u6027\u5199\u5165\u5230NebulaGraph\u4e2d\u3002\u4e0b\u56fe\u63cf\u8ff0\u4e86 Exchange \u5b8c\u6210\u6570\u636e\u8f6c\u6362\u548c\u8fc1\u79fb\u7684\u8fc7\u7a0b\u3002 \u7248\u672c\u7cfb\u5217 \u00b6 Exchange \u6709\u793e\u533a\u7248\u548c\u4f01\u4e1a\u7248\u4e24\u4e2a\u7cfb\u5217\uff0c\u4e8c\u8005\u529f\u80fd\u4e0d\u540c\u3002\u793e\u533a\u7248\u5728 GitHub \u5f00\u6e90\u5f00\u53d1\uff0c\u4f01\u4e1a\u7248\u5c5e\u4e8eNebulaGraph\u4f01\u4e1a\u5957\u9910\u3002 \u9002\u7528\u573a\u666f \u00b6 Exchange \u9002\u7528\u4e8e\u4ee5\u4e0b\u573a\u666f\uff1a \u9700\u8981\u5c06\u6765\u81ea Kafka\u3001Pulsar \u5e73\u53f0\u7684\u6d41\u5f0f\u6570\u636e\uff0c\u5982\u65e5\u5fd7\u6587\u4ef6\u3001\u7f51\u8d2d\u6570\u636e\u3001\u6e38\u620f\u5185\u73a9\u5bb6\u6d3b\u52a8\u3001\u793e\u4ea4\u7f51\u7ad9\u4fe1\u606f\u3001\u91d1\u878d\u4ea4\u6613\u6216\u5730\u7406\u7a7a\u95f4\u670d\u52a1\uff0c\u4ee5\u53ca\u6765\u81ea\u6570\u636e\u4e2d\u5fc3\u5185\u6240\u8fde\u63a5\u8bbe\u5907\u6216\u4eea\u5668\u7684\u9065\u6d4b\u6570\u636e\u7b49\u8f6c\u5316\u4e3a\u5c5e\u6027\u56fe\u7684\u70b9\u6216\u8fb9\u6570\u636e\uff0c\u5e76\u5bfc\u5165NebulaGraph\u3002 \u9700\u8981\u4ece\u5173\u7cfb\u578b\u6570\u636e\u5e93\uff08\u5982 MySQL\uff09\u6216\u8005\u5206\u5e03\u5f0f\u6587\u4ef6\u7cfb\u7edf\uff08\u5982 HDFS\uff09\u4e2d\u8bfb\u53d6\u6279\u5f0f\u6570\u636e\uff0c\u5982\u67d0\u4e2a\u65f6\u95f4\u6bb5\u5185\u7684\u6570\u636e\uff0c\u5c06\u5b83\u4eec\u8f6c\u5316\u4e3a\u5c5e\u6027\u56fe\u7684\u70b9\u6216\u8fb9\u6570\u636e\uff0c\u5e76\u5bfc\u5165NebulaGraph\u3002 \u9700\u8981\u5c06\u5927\u6279\u91cf\u6570\u636e\u751f\u6210NebulaGraph\u80fd\u8bc6\u522b\u7684 SST \u6587\u4ef6\uff0c\u518d\u5bfc\u5165NebulaGraph\u3002 \u9700\u8981\u5bfc\u51faNebulaGraph\u4e2d\u4fdd\u5b58\u7684\u6570\u636e\u3002 Enterpriseonly \u4ec5\u4f01\u4e1a\u7248 Exchange \u652f\u6301\u4eceNebulaGraph\u4e2d\u5bfc\u51fa\u6570\u636e\u3002 \u4ea7\u54c1\u4f18\u70b9 \u00b6 Exchange \u5177\u6709\u4ee5\u4e0b\u4f18\u70b9\uff1a \u9002\u5e94\u6027\u5f3a\uff1a\u652f\u6301\u5c06\u591a\u79cd\u4e0d\u540c\u683c\u5f0f\u6216\u4e0d\u540c\u6765\u6e90\u7684\u6570\u636e\u5bfc\u5165NebulaGraph\uff0c\u4fbf\u4e8e\u8fc1\u79fb\u6570\u636e\u3002 \u652f\u6301\u5bfc\u5165 SST\uff1a\u652f\u6301\u5c06\u4e0d\u540c\u6765\u6e90\u7684\u6570\u636e\u8f6c\u6362\u4e3a SST \u6587\u4ef6\uff0c\u7528\u4e8e\u6570\u636e\u5bfc\u5165\u3002 \u652f\u6301 SSL \u52a0\u5bc6\uff1a\u652f\u6301\u5728 Exchange \u4e0eNebulaGraph\u4e4b\u95f4\u5efa\u7acb SSL \u52a0\u5bc6\u4f20\u8f93\u901a\u9053\uff0c\u4fdd\u969c\u6570\u636e\u5b89\u5168\u3002 \u652f\u6301\u65ad\u70b9\u7eed\u4f20\uff1a\u5bfc\u5165\u6570\u636e\u65f6\u652f\u6301\u65ad\u70b9\u7eed\u4f20\uff0c\u6709\u52a9\u4e8e\u8282\u7701\u65f6\u95f4\uff0c\u63d0\u9ad8\u6570\u636e\u5bfc\u5165\u6548\u7387\u3002 Note \u76ee\u524d\u4ec5\u8fc1\u79fb Neo4j \u6570\u636e\u65f6\u652f\u6301\u65ad\u70b9\u7eed\u4f20\u3002 \u5f02\u6b65\u64cd\u4f5c\uff1a\u4f1a\u5728\u6e90\u6570\u636e\u4e2d\u751f\u6210\u4e00\u6761\u63d2\u5165\u8bed\u53e5\uff0c\u53d1\u9001\u7ed9 Graph \u670d\u52a1\uff0c\u6700\u540e\u518d\u6267\u884c\u63d2\u5165\u64cd\u4f5c\u3002 \u7075\u6d3b\u6027\u5f3a\uff1a\u652f\u6301\u540c\u65f6\u5bfc\u5165\u591a\u4e2a Tag \u548c Edge type\uff0c\u4e0d\u540c Tag \u548c Edge type \u53ef\u4ee5\u662f\u4e0d\u540c\u7684\u6570\u636e\u6765\u6e90\u6216\u683c\u5f0f\u3002 \u7edf\u8ba1\u529f\u80fd\uff1a\u4f7f\u7528 Apache Spark\u2122 \u4e2d\u7684\u7d2f\u52a0\u5668\u7edf\u8ba1\u63d2\u5165\u64cd\u4f5c\u7684\u6210\u529f\u548c\u5931\u8d25\u6b21\u6570\u3002 \u6613\u4e8e\u4f7f\u7528\uff1a\u91c7\u7528 HOCON\uff08Human-Optimized Config Object Notation\uff09\u914d\u7f6e\u6587\u4ef6\u683c\u5f0f\uff0c\u5177\u6709\u9762\u5411\u5bf9\u8c61\u98ce\u683c\uff0c\u4fbf\u4e8e\u7406\u89e3\u548c\u64cd\u4f5c\u3002 \u7248\u672c\u517c\u5bb9\u6027 \u00b6 Exchange \u652f\u6301 Spark \u7248\u672c 2.2.x\u30012.4.x \u548c 3.x.x\uff0c\u9488\u5bf9\u4e0d\u540c Spark \u7248\u672c\u547d\u540d\u4e3a\uff1a nebula-exchange_spark_2.2 \u3001 nebula-exchange_spark_2.4 \u548c nebula-exchange_spark_3.0 \u3002 NebulaGraph Exchange \u7248\u672c\uff08\u5373 JAR \u5305\u7248\u672c\uff09\u3001NebulaGraph\u5185\u6838\u7248\u672c\u548c Spark \u7248\u672c\u5bf9\u5e94\u5173\u7cfb\u5982\u4e0b\u3002 Exchange \u7248\u672c NebulaGraph\u7248\u672c Spark \u7248\u672c nebula-exchange_spark_3.0-3.0-SNAPSHOT.jar nightly 3.3.x\u30013.2.x\u30013.1.x\u30013.0.x nebula-exchange_spark_2.4-3.0-SNAPSHOT.jar nightly 2.4.x nebula-exchange_spark_2.2-3.0-SNAPSHOT.jar nightly 2.2.x nebula-exchange_spark_3.0-3.4.0.jar 3.x.x 3.3.x\u30013.2.x\u30013.1.x\u30013.0.x nebula-exchange_spark_2.4-3.4.0.jar 3.x.x 2.4.x nebula-exchange_spark_2.2-3.4.0.jar 3.x.x 2.2.x nebula-exchange_spark_3.0-3.3.0.jar 3.x.x 3.3.x\u30013.2.x\u30013.1.x\u30013.0.x nebula-exchange_spark_2.4-3.3.0.jar 3.x.x 2.4.x nebula-exchange_spark_2.2-3.3.0.jar 3.x.x 2.2.x nebula-exchange_spark_3.0-3.0.0.jar 3.x.x 3.3.x\u30013.2.x\u30013.1.x\u30013.0.x nebula-exchange_spark_2.4-3.0.0.jar 3.x.x 2.4.x nebula-exchange_spark_2.2-3.0.0.jar 3.x.x 2.2.x nebula-exchange-2.6.3.jar 2.6.1\u30012.6.0 2.4.x nebula-exchange-2.6.2.jar 2.6.1\u30012.6.0 2.4.x nebula-exchange-2.6.1.jar 2.6.1\u30012.6.0 2.4.x nebula-exchange-2.6.0.jar 2.6.1\u30012.6.0 2.4.x nebula-exchange-2.5.2.jar 2.5.1\u30012.5.0 2.4.x nebula-exchange-2.5.1.jar 2.5.1\u30012.5.0 2.4.x nebula-exchange-2.5.0.jar 2.5.1\u30012.5.0 2.4.x nebula-exchange-2.1.0.jar 2.0.1\u30012.0.0 2.4.x nebula-exchange-2.0.1.jar 2.0.1\u30012.0.0 2.4.x nebula-exchange-2.0.0.jar 2.0.1\u30012.0.0 2.4.x JAR \u5305\u6709\u4e24\u79cd\u83b7\u53d6\u65b9\u5f0f\uff1a \u81ea\u884c\u7f16\u8bd1 \u6216\u8005\u4ece maven \u4ed3\u5e93\u4e0b\u8f7d\u3002 \u6570\u636e\u6e90 \u00b6 Exchange 3.6.0 \u652f\u6301\u5c06\u4ee5\u4e0b\u683c\u5f0f\u6216\u6765\u6e90\u7684\u6570\u636e\u8f6c\u6362\u4e3aNebulaGraph\u80fd\u8bc6\u522b\u7684\u70b9\u548c\u8fb9\u6570\u636e\uff0c\u7136\u540e\u901a\u8fc7 nGQL \u8bed\u53e5\u7684\u5f62\u5f0f\u5bfc\u5165NebulaGraph\uff1a \u5b58\u50a8\u5728 HDFS \u6216\u672c\u5730\u7684\u6570\u636e\uff1a Apache Parquet Apache ORC JSON CSV Apache HBase\u2122 \u6570\u636e\u4ed3\u5e93\uff1a Hive MaxCompute \u56fe\u6570\u636e\u5e93\uff1a Neo4j \uff08Client \u7248\u672c 2.4.5-M1\uff09 \u5173\u7cfb\u578b\u6570\u636e\u5e93\uff1a MySQL PostgreSQL Oracle \u5217\u5f0f\u6570\u636e\u5e93\uff1a ClickHouse \u6d41\u5904\u7406\u8f6f\u4ef6\u5e73\u53f0\uff1a Apache Kafka\u00ae \u53d1\u5e03/\u8ba2\u9605\u6d88\u606f\u5e73\u53f0\uff1a Apache Pulsar 2.4.5 JDBC \u6570\u636e\u6e90 \u9664\u4e86\u7528 nGQL \u8bed\u53e5\u7684\u5f62\u5f0f\u5bfc\u5165\u6570\u636e\uff0cExchange \u8fd8\u652f\u6301\u5c06\u6570\u636e\u6e90\u7684\u6570\u636e\u751f\u6210 SST \u6587\u4ef6\uff0c\u7136\u540e\u901a\u8fc7 Console \u5bfc\u5165 SST \u6587\u4ef6 \u3002 \u66f4\u65b0\u8bf4\u660e \u00b6 Release \u89c6\u9891 \u00b6 NebulaGraph\u6570\u636e\u5bfc\u5165\u5de5\u5177\u2014\u2014Exchange \uff083 \u5206 08 \u79d2\uff09","title":"\u4ec0\u4e48\u662f NebulaGraph Exchange"},{"location":"import-export/nebula-exchange/about-exchange/ex-ug-what-is-exchange/#nebulagraph_exchange","text":"NebulaGraph Exchange \uff08\u7b80\u79f0 Exchange\uff09\u662f\u4e00\u6b3e Apache Spark\u2122 \u5e94\u7528\uff0c\u7528\u4e8e\u5728\u5206\u5e03\u5f0f\u73af\u5883\u4e2d\u5c06\u96c6\u7fa4\u4e2d\u7684\u6570\u636e\u6279\u91cf\u8fc1\u79fb\u5230NebulaGraph\u4e2d\uff0c\u80fd\u652f\u6301\u591a\u79cd\u4e0d\u540c\u683c\u5f0f\u7684\u6279\u5f0f\u6570\u636e\u548c\u6d41\u5f0f\u6570\u636e\u7684\u8fc1\u79fb\u3002 Exchange \u7531 Reader\u3001Processor \u548c Writer \u4e09\u90e8\u5206\u7ec4\u6210\u3002Reader \u8bfb\u53d6\u4e0d\u540c\u6765\u6e90\u7684\u6570\u636e\u8fd4\u56de DataFrame \u540e\uff0cProcessor \u904d\u5386 DataFrame \u7684\u6bcf\u4e00\u884c\uff0c\u6839\u636e\u914d\u7f6e\u6587\u4ef6\u4e2d fields \u7684\u6620\u5c04\u5173\u7cfb\uff0c\u6309\u5217\u540d\u83b7\u53d6\u5bf9\u5e94\u7684\u503c\u3002\u5728\u904d\u5386\u6307\u5b9a\u6279\u5904\u7406\u7684\u884c\u6570\u540e\uff0cWriter \u4f1a\u5c06\u83b7\u53d6\u7684\u6570\u636e\u4e00\u6b21\u6027\u5199\u5165\u5230NebulaGraph\u4e2d\u3002\u4e0b\u56fe\u63cf\u8ff0\u4e86 Exchange \u5b8c\u6210\u6570\u636e\u8f6c\u6362\u548c\u8fc1\u79fb\u7684\u8fc7\u7a0b\u3002","title":"\u4ec0\u4e48\u662f NebulaGraph Exchange"},{"location":"import-export/nebula-exchange/about-exchange/ex-ug-what-is-exchange/#_1","text":"Exchange \u6709\u793e\u533a\u7248\u548c\u4f01\u4e1a\u7248\u4e24\u4e2a\u7cfb\u5217\uff0c\u4e8c\u8005\u529f\u80fd\u4e0d\u540c\u3002\u793e\u533a\u7248\u5728 GitHub \u5f00\u6e90\u5f00\u53d1\uff0c\u4f01\u4e1a\u7248\u5c5e\u4e8eNebulaGraph\u4f01\u4e1a\u5957\u9910\u3002","title":"\u7248\u672c\u7cfb\u5217"},{"location":"import-export/nebula-exchange/about-exchange/ex-ug-what-is-exchange/#_2","text":"Exchange \u9002\u7528\u4e8e\u4ee5\u4e0b\u573a\u666f\uff1a \u9700\u8981\u5c06\u6765\u81ea Kafka\u3001Pulsar \u5e73\u53f0\u7684\u6d41\u5f0f\u6570\u636e\uff0c\u5982\u65e5\u5fd7\u6587\u4ef6\u3001\u7f51\u8d2d\u6570\u636e\u3001\u6e38\u620f\u5185\u73a9\u5bb6\u6d3b\u52a8\u3001\u793e\u4ea4\u7f51\u7ad9\u4fe1\u606f\u3001\u91d1\u878d\u4ea4\u6613\u6216\u5730\u7406\u7a7a\u95f4\u670d\u52a1\uff0c\u4ee5\u53ca\u6765\u81ea\u6570\u636e\u4e2d\u5fc3\u5185\u6240\u8fde\u63a5\u8bbe\u5907\u6216\u4eea\u5668\u7684\u9065\u6d4b\u6570\u636e\u7b49\u8f6c\u5316\u4e3a\u5c5e\u6027\u56fe\u7684\u70b9\u6216\u8fb9\u6570\u636e\uff0c\u5e76\u5bfc\u5165NebulaGraph\u3002 \u9700\u8981\u4ece\u5173\u7cfb\u578b\u6570\u636e\u5e93\uff08\u5982 MySQL\uff09\u6216\u8005\u5206\u5e03\u5f0f\u6587\u4ef6\u7cfb\u7edf\uff08\u5982 HDFS\uff09\u4e2d\u8bfb\u53d6\u6279\u5f0f\u6570\u636e\uff0c\u5982\u67d0\u4e2a\u65f6\u95f4\u6bb5\u5185\u7684\u6570\u636e\uff0c\u5c06\u5b83\u4eec\u8f6c\u5316\u4e3a\u5c5e\u6027\u56fe\u7684\u70b9\u6216\u8fb9\u6570\u636e\uff0c\u5e76\u5bfc\u5165NebulaGraph\u3002 \u9700\u8981\u5c06\u5927\u6279\u91cf\u6570\u636e\u751f\u6210NebulaGraph\u80fd\u8bc6\u522b\u7684 SST \u6587\u4ef6\uff0c\u518d\u5bfc\u5165NebulaGraph\u3002 \u9700\u8981\u5bfc\u51faNebulaGraph\u4e2d\u4fdd\u5b58\u7684\u6570\u636e\u3002 Enterpriseonly \u4ec5\u4f01\u4e1a\u7248 Exchange \u652f\u6301\u4eceNebulaGraph\u4e2d\u5bfc\u51fa\u6570\u636e\u3002","title":"\u9002\u7528\u573a\u666f"},{"location":"import-export/nebula-exchange/about-exchange/ex-ug-what-is-exchange/#_3","text":"Exchange \u5177\u6709\u4ee5\u4e0b\u4f18\u70b9\uff1a \u9002\u5e94\u6027\u5f3a\uff1a\u652f\u6301\u5c06\u591a\u79cd\u4e0d\u540c\u683c\u5f0f\u6216\u4e0d\u540c\u6765\u6e90\u7684\u6570\u636e\u5bfc\u5165NebulaGraph\uff0c\u4fbf\u4e8e\u8fc1\u79fb\u6570\u636e\u3002 \u652f\u6301\u5bfc\u5165 SST\uff1a\u652f\u6301\u5c06\u4e0d\u540c\u6765\u6e90\u7684\u6570\u636e\u8f6c\u6362\u4e3a SST \u6587\u4ef6\uff0c\u7528\u4e8e\u6570\u636e\u5bfc\u5165\u3002 \u652f\u6301 SSL \u52a0\u5bc6\uff1a\u652f\u6301\u5728 Exchange \u4e0eNebulaGraph\u4e4b\u95f4\u5efa\u7acb SSL \u52a0\u5bc6\u4f20\u8f93\u901a\u9053\uff0c\u4fdd\u969c\u6570\u636e\u5b89\u5168\u3002 \u652f\u6301\u65ad\u70b9\u7eed\u4f20\uff1a\u5bfc\u5165\u6570\u636e\u65f6\u652f\u6301\u65ad\u70b9\u7eed\u4f20\uff0c\u6709\u52a9\u4e8e\u8282\u7701\u65f6\u95f4\uff0c\u63d0\u9ad8\u6570\u636e\u5bfc\u5165\u6548\u7387\u3002 Note \u76ee\u524d\u4ec5\u8fc1\u79fb Neo4j \u6570\u636e\u65f6\u652f\u6301\u65ad\u70b9\u7eed\u4f20\u3002 \u5f02\u6b65\u64cd\u4f5c\uff1a\u4f1a\u5728\u6e90\u6570\u636e\u4e2d\u751f\u6210\u4e00\u6761\u63d2\u5165\u8bed\u53e5\uff0c\u53d1\u9001\u7ed9 Graph \u670d\u52a1\uff0c\u6700\u540e\u518d\u6267\u884c\u63d2\u5165\u64cd\u4f5c\u3002 \u7075\u6d3b\u6027\u5f3a\uff1a\u652f\u6301\u540c\u65f6\u5bfc\u5165\u591a\u4e2a Tag \u548c Edge type\uff0c\u4e0d\u540c Tag \u548c Edge type \u53ef\u4ee5\u662f\u4e0d\u540c\u7684\u6570\u636e\u6765\u6e90\u6216\u683c\u5f0f\u3002 \u7edf\u8ba1\u529f\u80fd\uff1a\u4f7f\u7528 Apache Spark\u2122 \u4e2d\u7684\u7d2f\u52a0\u5668\u7edf\u8ba1\u63d2\u5165\u64cd\u4f5c\u7684\u6210\u529f\u548c\u5931\u8d25\u6b21\u6570\u3002 \u6613\u4e8e\u4f7f\u7528\uff1a\u91c7\u7528 HOCON\uff08Human-Optimized Config Object Notation\uff09\u914d\u7f6e\u6587\u4ef6\u683c\u5f0f\uff0c\u5177\u6709\u9762\u5411\u5bf9\u8c61\u98ce\u683c\uff0c\u4fbf\u4e8e\u7406\u89e3\u548c\u64cd\u4f5c\u3002","title":"\u4ea7\u54c1\u4f18\u70b9"},{"location":"import-export/nebula-exchange/about-exchange/ex-ug-what-is-exchange/#_4","text":"Exchange \u652f\u6301 Spark \u7248\u672c 2.2.x\u30012.4.x \u548c 3.x.x\uff0c\u9488\u5bf9\u4e0d\u540c Spark \u7248\u672c\u547d\u540d\u4e3a\uff1a nebula-exchange_spark_2.2 \u3001 nebula-exchange_spark_2.4 \u548c nebula-exchange_spark_3.0 \u3002 NebulaGraph Exchange \u7248\u672c\uff08\u5373 JAR \u5305\u7248\u672c\uff09\u3001NebulaGraph\u5185\u6838\u7248\u672c\u548c Spark \u7248\u672c\u5bf9\u5e94\u5173\u7cfb\u5982\u4e0b\u3002 Exchange \u7248\u672c NebulaGraph\u7248\u672c Spark \u7248\u672c nebula-exchange_spark_3.0-3.0-SNAPSHOT.jar nightly 3.3.x\u30013.2.x\u30013.1.x\u30013.0.x nebula-exchange_spark_2.4-3.0-SNAPSHOT.jar nightly 2.4.x nebula-exchange_spark_2.2-3.0-SNAPSHOT.jar nightly 2.2.x nebula-exchange_spark_3.0-3.4.0.jar 3.x.x 3.3.x\u30013.2.x\u30013.1.x\u30013.0.x nebula-exchange_spark_2.4-3.4.0.jar 3.x.x 2.4.x nebula-exchange_spark_2.2-3.4.0.jar 3.x.x 2.2.x nebula-exchange_spark_3.0-3.3.0.jar 3.x.x 3.3.x\u30013.2.x\u30013.1.x\u30013.0.x nebula-exchange_spark_2.4-3.3.0.jar 3.x.x 2.4.x nebula-exchange_spark_2.2-3.3.0.jar 3.x.x 2.2.x nebula-exchange_spark_3.0-3.0.0.jar 3.x.x 3.3.x\u30013.2.x\u30013.1.x\u30013.0.x nebula-exchange_spark_2.4-3.0.0.jar 3.x.x 2.4.x nebula-exchange_spark_2.2-3.0.0.jar 3.x.x 2.2.x nebula-exchange-2.6.3.jar 2.6.1\u30012.6.0 2.4.x nebula-exchange-2.6.2.jar 2.6.1\u30012.6.0 2.4.x nebula-exchange-2.6.1.jar 2.6.1\u30012.6.0 2.4.x nebula-exchange-2.6.0.jar 2.6.1\u30012.6.0 2.4.x nebula-exchange-2.5.2.jar 2.5.1\u30012.5.0 2.4.x nebula-exchange-2.5.1.jar 2.5.1\u30012.5.0 2.4.x nebula-exchange-2.5.0.jar 2.5.1\u30012.5.0 2.4.x nebula-exchange-2.1.0.jar 2.0.1\u30012.0.0 2.4.x nebula-exchange-2.0.1.jar 2.0.1\u30012.0.0 2.4.x nebula-exchange-2.0.0.jar 2.0.1\u30012.0.0 2.4.x JAR \u5305\u6709\u4e24\u79cd\u83b7\u53d6\u65b9\u5f0f\uff1a \u81ea\u884c\u7f16\u8bd1 \u6216\u8005\u4ece maven \u4ed3\u5e93\u4e0b\u8f7d\u3002","title":"\u7248\u672c\u517c\u5bb9\u6027"},{"location":"import-export/nebula-exchange/about-exchange/ex-ug-what-is-exchange/#_5","text":"Exchange 3.6.0 \u652f\u6301\u5c06\u4ee5\u4e0b\u683c\u5f0f\u6216\u6765\u6e90\u7684\u6570\u636e\u8f6c\u6362\u4e3aNebulaGraph\u80fd\u8bc6\u522b\u7684\u70b9\u548c\u8fb9\u6570\u636e\uff0c\u7136\u540e\u901a\u8fc7 nGQL \u8bed\u53e5\u7684\u5f62\u5f0f\u5bfc\u5165NebulaGraph\uff1a \u5b58\u50a8\u5728 HDFS \u6216\u672c\u5730\u7684\u6570\u636e\uff1a Apache Parquet Apache ORC JSON CSV Apache HBase\u2122 \u6570\u636e\u4ed3\u5e93\uff1a Hive MaxCompute \u56fe\u6570\u636e\u5e93\uff1a Neo4j \uff08Client \u7248\u672c 2.4.5-M1\uff09 \u5173\u7cfb\u578b\u6570\u636e\u5e93\uff1a MySQL PostgreSQL Oracle \u5217\u5f0f\u6570\u636e\u5e93\uff1a ClickHouse \u6d41\u5904\u7406\u8f6f\u4ef6\u5e73\u53f0\uff1a Apache Kafka\u00ae \u53d1\u5e03/\u8ba2\u9605\u6d88\u606f\u5e73\u53f0\uff1a Apache Pulsar 2.4.5 JDBC \u6570\u636e\u6e90 \u9664\u4e86\u7528 nGQL \u8bed\u53e5\u7684\u5f62\u5f0f\u5bfc\u5165\u6570\u636e\uff0cExchange \u8fd8\u652f\u6301\u5c06\u6570\u636e\u6e90\u7684\u6570\u636e\u751f\u6210 SST \u6587\u4ef6\uff0c\u7136\u540e\u901a\u8fc7 Console \u5bfc\u5165 SST \u6587\u4ef6 \u3002","title":"\u6570\u636e\u6e90"},{"location":"import-export/nebula-exchange/about-exchange/ex-ug-what-is-exchange/#_6","text":"Release","title":"\u66f4\u65b0\u8bf4\u660e"},{"location":"import-export/nebula-exchange/about-exchange/ex-ug-what-is-exchange/#_7","text":"NebulaGraph\u6570\u636e\u5bfc\u5165\u5de5\u5177\u2014\u2014Exchange \uff083 \u5206 08 \u79d2\uff09","title":"\u89c6\u9891"},{"location":"import-export/nebula-exchange/parameter-reference/ex-ug-para-import-command/","text":"\u5bfc\u5165\u547d\u4ee4\u53c2\u6570 \u00b6 \u5b8c\u6210\u914d\u7f6e\u6587\u4ef6\u4fee\u6539\u540e\uff0c\u53ef\u4ee5\u8fd0\u884c\u4ee5\u4e0b\u547d\u4ee4\u5c06\u6307\u5b9a\u6765\u6e90\u7684\u6570\u636e\u5bfc\u5165NebulaGraph\u6570\u636e\u5e93\u3002 \u9996\u6b21\u5bfc\u5165 <spark_install_path>/bin/spark-submit --master \"local\" --class com.vesoft.nebula.exchange.Exchange <nebula-exchange-2.x.y.jar_path> -c <application.conf_path> \u5bfc\u5165 reload \u6587\u4ef6 \u5982\u679c\u9996\u6b21\u5bfc\u5165\u65f6\u6709\u4e00\u4e9b\u6570\u636e\u5bfc\u5165\u5931\u8d25\uff0c\u4f1a\u5c06\u5bfc\u5165\u5931\u8d25\u7684\u6570\u636e\u5b58\u5165 reload \u6587\u4ef6\uff0c\u53ef\u4ee5\u7528\u53c2\u6570 -r \u5c1d\u8bd5\u5bfc\u5165 reload \u6587\u4ef6\u3002 <spark_install_path>/bin/spark-submit --master \"local\" --class com.vesoft.nebula.exchange.Exchange <nebula-exchange-2.x.y.jar_path> -c <application.conf_path> -r \"<reload_file_path>\" Note JAR \u6587\u4ef6\u7248\u672c\u53f7\u4ee5\u5b9e\u9645\u7f16\u8bd1\u5f97\u5230\u7684 JAR \u6587\u4ef6\u540d\u79f0\u4e3a\u51c6\u3002 Faq \u5982\u679c\u4f7f\u7528 yarn-cluster \u6a21\u5f0f \u63d0\u4ea4\u4efb\u52a1\uff0c\u8bf7\u53c2\u8003\u5982\u4e0b\u793a\u4f8b\uff0c \u5c24\u5176\u662f\u793a\u4f8b\u4e2d\u7684\u4e24\u4e2a --conf \u3002 $SPARK_HOME /bin/spark-submit --master yarn-cluster \\ --class com.vesoft.nebula.exchange.Exchange \\ --files application.conf \\ --conf spark.driver.extraClassPath = ./ \\ --conf spark.executor.extraClassPath = ./ \\ nebula-exchange-3.6.0.jar \\ -c application.conf \u4e0b\u8868\u5217\u51fa\u4e86\u547d\u4ee4\u7684\u76f8\u5173\u53c2\u6570\u3002 \u53c2\u6570 \u662f\u5426\u5fc5\u9700 \u9ed8\u8ba4\u503c \u8bf4\u660e --class \u662f \u65e0 \u6307\u5b9a\u9a71\u52a8\u7684\u4e3b\u7c7b\u3002 --master \u662f \u65e0 \u6307\u5b9a Spark \u96c6\u7fa4\u4e2d master \u8fdb\u7a0b\u7684 URL\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1 master-urls \u3002 -c / --config \u662f \u65e0 \u6307\u5b9a\u914d\u7f6e\u6587\u4ef6\u7684\u8def\u5f84\u3002 -h / --hive \u5426 false \u6dfb\u52a0\u8fd9\u4e2a\u53c2\u6570\u8868\u793a\u652f\u6301\u4ece Hive \u4e2d\u5bfc\u5165\u6570\u636e\u3002 -D / --dry \u5426 false \u6dfb\u52a0\u8fd9\u4e2a\u53c2\u6570\u8868\u793a\u68c0\u67e5\u914d\u7f6e\u6587\u4ef6\u7684\u683c\u5f0f\u662f\u5426\u7b26\u5408\u8981\u6c42\uff0c\u4f46\u4e0d\u4f1a\u6821\u9a8c tags \u548c edges \u7684\u914d\u7f6e\u9879\u662f\u5426\u6b63\u786e\u3002\u6b63\u5f0f\u5bfc\u5165\u6570\u636e\u65f6\u4e0d\u80fd\u6dfb\u52a0\u8fd9\u4e2a\u53c2\u6570\u3002 -r / --reload \u5426 \u65e0 \u6307\u5b9a\u9700\u8981\u91cd\u65b0\u52a0\u8f7d\u7684 reload \u6587\u4ef6\u8def\u5f84\u3002 \u66f4\u591a Spark \u7684\u53c2\u6570\u914d\u7f6e\u8bf4\u660e\u8bf7\u53c2\u89c1 Spark Configuration \u3002","title":"\u5bfc\u5165\u547d\u4ee4\u53c2\u6570"},{"location":"import-export/nebula-exchange/parameter-reference/ex-ug-para-import-command/#_1","text":"\u5b8c\u6210\u914d\u7f6e\u6587\u4ef6\u4fee\u6539\u540e\uff0c\u53ef\u4ee5\u8fd0\u884c\u4ee5\u4e0b\u547d\u4ee4\u5c06\u6307\u5b9a\u6765\u6e90\u7684\u6570\u636e\u5bfc\u5165NebulaGraph\u6570\u636e\u5e93\u3002 \u9996\u6b21\u5bfc\u5165 <spark_install_path>/bin/spark-submit --master \"local\" --class com.vesoft.nebula.exchange.Exchange <nebula-exchange-2.x.y.jar_path> -c <application.conf_path> \u5bfc\u5165 reload \u6587\u4ef6 \u5982\u679c\u9996\u6b21\u5bfc\u5165\u65f6\u6709\u4e00\u4e9b\u6570\u636e\u5bfc\u5165\u5931\u8d25\uff0c\u4f1a\u5c06\u5bfc\u5165\u5931\u8d25\u7684\u6570\u636e\u5b58\u5165 reload \u6587\u4ef6\uff0c\u53ef\u4ee5\u7528\u53c2\u6570 -r \u5c1d\u8bd5\u5bfc\u5165 reload \u6587\u4ef6\u3002 <spark_install_path>/bin/spark-submit --master \"local\" --class com.vesoft.nebula.exchange.Exchange <nebula-exchange-2.x.y.jar_path> -c <application.conf_path> -r \"<reload_file_path>\" Note JAR \u6587\u4ef6\u7248\u672c\u53f7\u4ee5\u5b9e\u9645\u7f16\u8bd1\u5f97\u5230\u7684 JAR \u6587\u4ef6\u540d\u79f0\u4e3a\u51c6\u3002 Faq \u5982\u679c\u4f7f\u7528 yarn-cluster \u6a21\u5f0f \u63d0\u4ea4\u4efb\u52a1\uff0c\u8bf7\u53c2\u8003\u5982\u4e0b\u793a\u4f8b\uff0c \u5c24\u5176\u662f\u793a\u4f8b\u4e2d\u7684\u4e24\u4e2a --conf \u3002 $SPARK_HOME /bin/spark-submit --master yarn-cluster \\ --class com.vesoft.nebula.exchange.Exchange \\ --files application.conf \\ --conf spark.driver.extraClassPath = ./ \\ --conf spark.executor.extraClassPath = ./ \\ nebula-exchange-3.6.0.jar \\ -c application.conf \u4e0b\u8868\u5217\u51fa\u4e86\u547d\u4ee4\u7684\u76f8\u5173\u53c2\u6570\u3002 \u53c2\u6570 \u662f\u5426\u5fc5\u9700 \u9ed8\u8ba4\u503c \u8bf4\u660e --class \u662f \u65e0 \u6307\u5b9a\u9a71\u52a8\u7684\u4e3b\u7c7b\u3002 --master \u662f \u65e0 \u6307\u5b9a Spark \u96c6\u7fa4\u4e2d master \u8fdb\u7a0b\u7684 URL\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1 master-urls \u3002 -c / --config \u662f \u65e0 \u6307\u5b9a\u914d\u7f6e\u6587\u4ef6\u7684\u8def\u5f84\u3002 -h / --hive \u5426 false \u6dfb\u52a0\u8fd9\u4e2a\u53c2\u6570\u8868\u793a\u652f\u6301\u4ece Hive \u4e2d\u5bfc\u5165\u6570\u636e\u3002 -D / --dry \u5426 false \u6dfb\u52a0\u8fd9\u4e2a\u53c2\u6570\u8868\u793a\u68c0\u67e5\u914d\u7f6e\u6587\u4ef6\u7684\u683c\u5f0f\u662f\u5426\u7b26\u5408\u8981\u6c42\uff0c\u4f46\u4e0d\u4f1a\u6821\u9a8c tags \u548c edges \u7684\u914d\u7f6e\u9879\u662f\u5426\u6b63\u786e\u3002\u6b63\u5f0f\u5bfc\u5165\u6570\u636e\u65f6\u4e0d\u80fd\u6dfb\u52a0\u8fd9\u4e2a\u53c2\u6570\u3002 -r / --reload \u5426 \u65e0 \u6307\u5b9a\u9700\u8981\u91cd\u65b0\u52a0\u8f7d\u7684 reload \u6587\u4ef6\u8def\u5f84\u3002 \u66f4\u591a Spark \u7684\u53c2\u6570\u914d\u7f6e\u8bf4\u660e\u8bf7\u53c2\u89c1 Spark Configuration \u3002","title":"\u5bfc\u5165\u547d\u4ee4\u53c2\u6570"},{"location":"import-export/nebula-exchange/parameter-reference/ex-ug-parameter/","text":"\u914d\u7f6e\u8bf4\u660e \u00b6 \u672c\u6587\u4ecb\u7ecd\u4f7f\u7528 NebulaGraph Exchange \u65f6\u5982\u4f55\u4fee\u6539\u914d\u7f6e\u6587\u4ef6 application.conf \u3002 \u4fee\u6539\u914d\u7f6e\u6587\u4ef6\u4e4b\u524d\uff0c\u5efa\u8bae\u6839\u636e\u6570\u636e\u6e90\u590d\u5236\u5e76\u4fee\u6539\u6587\u4ef6\u540d\u79f0\uff0c\u4fbf\u4e8e\u533a\u5206\u3002\u4f8b\u5982\u6570\u636e\u6e90\u4e3a CSV \u6587\u4ef6\uff0c\u53ef\u4ee5\u590d\u5236\u4e3a csv_application.conf \u3002 \u914d\u7f6e\u6587\u4ef6\u7684\u5185\u5bb9\u4e3b\u8981\u5206\u4e3a\u5982\u4e0b\u51e0\u7c7b\uff1a Spark \u76f8\u5173\u914d\u7f6e Hive \u914d\u7f6e\uff08\u53ef\u9009\uff09 NebulaGraph\u76f8\u5173\u914d\u7f6e \u70b9\u914d\u7f6e \u8fb9\u914d\u7f6e Spark \u76f8\u5173\u914d\u7f6e \u00b6 \u672c\u6587\u53ea\u5217\u51fa\u90e8\u5206 Spark \u53c2\u6570\uff0c\u66f4\u591a\u53c2\u6570\u8bf7\u53c2\u89c1 \u5b98\u65b9\u6587\u6863 \u3002 \u53c2\u6570 \u6570\u636e\u7c7b\u578b \u9ed8\u8ba4\u503c \u662f\u5426\u5fc5\u987b \u8bf4\u660e spark.app.name string - \u5426 Spark \u9a71\u52a8\u7a0b\u5e8f\u540d\u79f0\u3002 spark.driver.cores int 1 \u5426 \u9a71\u52a8\u7a0b\u5e8f\u4f7f\u7528\u7684 CPU \u6838\u6570\uff0c\u4ec5\u9002\u7528\u4e8e\u96c6\u7fa4\u6a21\u5f0f\u3002 spark.driver.maxResultSize string 1G \u5426 \u5355\u4e2a Spark \u64cd\u4f5c\uff08\u4f8b\u5982 collect\uff09\u65f6\uff0c\u6240\u6709\u5206\u533a\u7684\u5e8f\u5217\u5316\u7ed3\u679c\u7684\u603b\u5927\u5c0f\u9650\u5236\uff08\u5b57\u8282\u4e3a\u5355\u4f4d\uff09\u3002\u6700\u5c0f\u503c\u4e3a 1M\uff0c0 \u8868\u793a\u65e0\u9650\u5236\u3002 spark.executor.memory string 1G \u5426 Spark \u9a71\u52a8\u7a0b\u5e8f\u4f7f\u7528\u7684\u5185\u5b58\u91cf\uff0c\u53ef\u4ee5\u6307\u5b9a\u5355\u4f4d\uff0c\u4f8b\u5982 512M\u30011G\u3002 spark.cores.max int 16 \u5426 \u5f53\u9a71\u52a8\u7a0b\u5e8f\u4ee5\u201c\u7c97\u7c92\u5ea6\u201d\u5171\u4eab\u6a21\u5f0f\u5728\u72ec\u7acb\u90e8\u7f72\u96c6\u7fa4\u6216 Mesos \u96c6\u7fa4\u4e0a\u8fd0\u884c\u65f6\uff0c\u8de8\u96c6\u7fa4\uff08\u800c\u975e\u4ece\u6bcf\u53f0\u8ba1\u7b97\u673a\uff09\u8bf7\u6c42\u5e94\u7528\u7a0b\u5e8f\u7684\u6700\u5927 CPU \u6838\u6570\u3002\u5982\u679c\u672a\u8bbe\u7f6e\uff0c\u5219\u503c\u4e3a Spark \u7684\u72ec\u7acb\u96c6\u7fa4\u7ba1\u7406\u5668\u4e0a\u7684 spark.deploy.defaultCores \u6216 Mesos \u4e0a\u7684 infinite\uff08\u6240\u6709\u53ef\u7528\u7684\u5185\u6838\uff09\u3002 Hive \u914d\u7f6e\uff08\u53ef\u9009\uff09 \u00b6 \u5982\u679c Spark \u548c Hive \u90e8\u7f72\u5728\u4e0d\u540c\u96c6\u7fa4\uff0c\u624d\u9700\u8981\u914d\u7f6e\u8fde\u63a5 Hive \u7684\u53c2\u6570\uff0c\u5426\u5219\u8bf7\u5ffd\u7565\u8fd9\u4e9b\u914d\u7f6e\u3002 \u53c2\u6570 \u6570\u636e\u7c7b\u578b \u9ed8\u8ba4\u503c \u662f\u5426\u5fc5\u987b \u8bf4\u660e hive.warehouse string - \u662f HDFS \u4e2d\u7684 warehouse \u8def\u5f84\u3002\u7528\u53cc\u5f15\u53f7\u62ec\u8d77\u8def\u5f84\uff0c\u4ee5 hdfs:// \u5f00\u5934\u3002 hive.connectionURL string - \u662f JDBC \u8fde\u63a5\u7684 URL\u3002\u4f8b\u5982 \"jdbc:mysql://127.0.0.1:3306/hive_spark?characterEncoding=UTF-8\" \u3002 hive.connectionDriverName string \"com.mysql.jdbc.Driver\" \u662f \u9a71\u52a8\u540d\u79f0\u3002 hive.connectionUserName list[string] - \u662f \u8fde\u63a5\u7684\u7528\u6237\u540d\u3002 hive.connectionPassword list[string] - \u662f \u7528\u6237\u540d\u5bf9\u5e94\u7684\u5bc6\u7801\u3002 NebulaGraph\u76f8\u5173\u914d\u7f6e \u00b6 \u53c2\u6570 \u6570\u636e\u7c7b\u578b \u9ed8\u8ba4\u503c \u662f\u5426\u5fc5\u987b \u8bf4\u660e nebula.address.graph list[string] [\"127.0.0.1:9669\"] \u662f \u6240\u6709 Graph \u670d\u52a1\u7684\u5730\u5740\uff0c\u5305\u62ec IP \u548c\u7aef\u53e3\uff0c\u591a\u4e2a\u5730\u5740\u7528\u82f1\u6587\u9017\u53f7\uff08,\uff09\u5206\u9694\u3002\u683c\u5f0f\u4e3a [\"ip1:port1\",\"ip2:port2\",\"ip3:port3\"] \u3002 nebula.address.meta list[string] [\"127.0.0.1:9559\"] \u662f \u6240\u6709 Meta \u670d\u52a1\u7684\u5730\u5740\uff0c\u5305\u62ec IP \u548c\u7aef\u53e3\uff0c\u591a\u4e2a\u5730\u5740\u7528\u82f1\u6587\u9017\u53f7\uff08,\uff09\u5206\u9694\u3002\u683c\u5f0f\u4e3a [\"ip1:port1\",\"ip2:port2\",\"ip3:port3\"] \u3002 nebula.user string - \u662f \u62e5\u6709NebulaGraph\u5199\u6743\u9650\u7684\u7528\u6237\u540d\u3002 nebula.pswd string - \u662f \u7528\u6237\u540d\u5bf9\u5e94\u7684\u5bc6\u7801\u3002 nebula.space string - \u662f \u9700\u8981\u5bfc\u5165\u6570\u636e\u7684\u7684\u56fe\u7a7a\u95f4\u540d\u79f0\u3002 nebula.ssl.enable.graph bool false \u662f \u5f00\u542f Exchange \u4e0e Graph \u670d\u52a1\u4e4b\u95f4\u7684 SSL \u52a0\u5bc6 \u4f20\u8f93\u3002\u5f53\u503c\u4e3a true \u65f6\u5f00\u542f\uff0c\u4e0b\u65b9\u7684 SSL \u76f8\u5173\u53c2\u6570\u751f\u6548\u3002\u5982\u679c Exchange \u8fd0\u884c\u5728\u591a\u673a\u96c6\u7fa4\u4e0a\uff0c\u5728\u8bbe\u7f6e\u4ee5\u4e0b SSL \u76f8\u5173\u8def\u5f84\u65f6\uff0c\u9700\u8981\u5728\u6bcf\u53f0\u673a\u5668\u7684\u76f8\u540c\u8def\u5f84\u90fd\u5b58\u50a8\u76f8\u5e94\u7684\u6587\u4ef6\u3002 nebula.ssl.enable.meta bool false \u662f \u5f00\u542f Exchange \u4e0e Meta \u670d\u52a1\u4e4b\u95f4\u7684 SSL \u52a0\u5bc6\u4f20\u8f93\u3002\u5f53\u503c\u4e3a true \u65f6\u5f00\u542f\uff0c\u4e0b\u65b9\u7684 SSL \u76f8\u5173\u53c2\u6570\u751f\u6548\u3002\u5982\u679c Exchange \u8fd0\u884c\u5728\u591a\u673a\u96c6\u7fa4\u4e0a\uff0c\u5728\u8bbe\u7f6e\u4ee5\u4e0b SSL \u76f8\u5173\u8def\u5f84\u65f6\uff0c\u9700\u8981\u5728\u6bcf\u53f0\u673a\u5668\u7684\u76f8\u540c\u8def\u5f84\u90fd\u5b58\u50a8\u76f8\u5e94\u7684\u6587\u4ef6\u3002 nebula.ssl.sign string ca \u662f \u7b7e\u540d\u65b9\u5f0f\uff0c\u53ef\u9009\u503c\uff1a ca \uff08CA \u7b7e\u540d\uff09\u6216 self \uff08\u81ea\u7b7e\u540d\uff09\u3002 nebula.ssl.ca.param.caCrtFilePath string \"/path/caCrtFilePath\" \u662f nebula.ssl.sign \u7684\u503c\u4e3a ca \u65f6\u751f\u6548\uff0c\u7528\u4e8e\u6307\u5b9a CA \u8bc1\u4e66\u7684\u5b58\u50a8\u8def\u5f84\u3002 nebula.ssl.ca.param.crtFilePath string \"/path/crtFilePath\" \u662f nebula.ssl.sign \u7684\u503c\u4e3a ca \u65f6\u751f\u6548\uff0c\u7528\u4e8e\u6307\u5b9a CRT \u8bc1\u4e66\u7684\u5b58\u50a8\u8def\u5f84\u3002 nebula.ssl.ca.param.keyFilePath string \"/path/keyFilePath\" \u662f nebula.ssl.sign \u7684\u503c\u4e3a ca \u65f6\u751f\u6548\uff0c\u7528\u4e8e\u6307\u5b9a\u79c1\u94a5\u6587\u4ef6\u7684\u5b58\u50a8\u8def\u5f84\u3002 nebula.ssl.self.param.crtFilePath string \"/path/crtFilePath\" \u662f nebula.ssl.sign \u7684\u503c\u4e3a self \u65f6\u751f\u6548\uff0c\u7528\u4e8e\u6307\u5b9a CRT \u8bc1\u4e66\u7684\u5b58\u50a8\u8def\u5f84\u3002 nebula.ssl.self.param.keyFilePath string \"/path/keyFilePath\" \u662f nebula.ssl.sign \u7684\u503c\u4e3a self \u65f6\u751f\u6548\uff0c\u7528\u4e8e\u6307\u5b9a\u79c1\u94a5\u6587\u4ef6\u7684\u5b58\u50a8\u8def\u5f84\u3002 nebula.ssl.self.param.password string \"nebula\" \u662f nebula.ssl.sign \u7684\u503c\u4e3a self \u65f6\u751f\u6548\uff0c\u7528\u4e8e\u6307\u5b9a\u5bc6\u7801\u6587\u4ef6\u7684\u5b58\u50a8\u8def\u5f84\u3002 nebula.path.local string \"/tmp\" \u5426 \u5bfc\u5165 SST \u6587\u4ef6\u65f6\u9700\u8981\u8bbe\u7f6e\u672c\u5730 SST \u6587\u4ef6\u8def\u5f84\u3002 nebula.path.remote string \"/sst\" \u5426 \u5bfc\u5165 SST \u6587\u4ef6\u65f6\u9700\u8981\u8bbe\u7f6e\u8fdc\u7aef SST \u6587\u4ef6\u8def\u5f84\u3002 nebula.path.hdfs.namenode string \"hdfs://name_node:9000\" \u5426 \u5bfc\u5165 SST \u6587\u4ef6\u65f6\u9700\u8981\u8bbe\u7f6e HDFS \u7684 namenode\u3002 nebula.connection.timeout int 3000 \u5426 Thrift \u8fde\u63a5\u7684\u8d85\u65f6\u65f6\u95f4\uff0c\u5355\u4f4d\u4e3a ms\u3002 nebula.connection.retry int 3 \u5426 Thrift \u8fde\u63a5\u91cd\u8bd5\u6b21\u6570\u3002 nebula.execution.retry int 3 \u5426 nGQL \u8bed\u53e5\u6267\u884c\u91cd\u8bd5\u6b21\u6570\u3002 nebula.error.max int 32 \u5426 \u5bfc\u5165\u8fc7\u7a0b\u4e2d\u7684\u6700\u5927\u5931\u8d25\u6b21\u6570\u3002\u5f53\u5931\u8d25\u6b21\u6570\u8fbe\u5230\u6700\u5927\u503c\u65f6\uff0c\u63d0\u4ea4\u7684 Spark \u4f5c\u4e1a\u5c06\u81ea\u52a8\u505c\u6b62\u3002 nebula.error.output string /tmp/errors \u5426 \u8f93\u51fa\u9519\u8bef\u65e5\u5fd7\u7684\u8def\u5f84\u3002\u9519\u8bef\u65e5\u5fd7\u4fdd\u5b58\u6267\u884c\u5931\u8d25\u7684 nGQL \u8bed\u53e5\u3002 nebula.rate.limit int 1024 \u5426 \u5bfc\u5165\u6570\u636e\u65f6\u4ee4\u724c\u6876\u7684\u4ee4\u724c\u6570\u91cf\u9650\u5236\u3002 nebula.rate.timeout int 1000 \u5426 \u4ee4\u724c\u6876\u4e2d\u62ff\u53d6\u4ee4\u724c\u7684\u8d85\u65f6\u65f6\u95f4\uff0c\u5355\u4f4d\uff1a\u6beb\u79d2\u3002 Note NebulaGraph\u9ed8\u8ba4\u4e0d\u652f\u6301\u65e0 Tag \u7684\u70b9\u3002\u5982\u679c\u9700\u8981\u5bfc\u5165\u65e0 Tag \u7684\u70b9\uff0c\u9700\u8981\u5148\u5728\u96c6\u7fa4\u5185\u5f00\u542f \u652f\u6301\u65e0 Tag \u70b9 \uff0c\u7136\u540e\u5728 Exchange \u7684\u914d\u7f6e\u6587\u4ef6\u5185\u65b0\u589e nebula.enableTagless \u53c2\u6570\uff0c\u503c\u4e3a true \u3002\u793a\u4f8b\u5982\u4e0b\uff1a nebula: { address: { graph: [ \"127.0.0.1:9669\" ] meta: [ \"127.0.0.1:9559\" ] } user: root pswd: nebula space: test enableTagless: true ...... } \u70b9\u914d\u7f6e \u00b6 \u5bf9\u4e8e\u4e0d\u540c\u7684\u6570\u636e\u6e90\uff0c\u70b9\u7684\u914d\u7f6e\u4e5f\u6709\u6240\u4e0d\u540c\uff0c\u6709\u5f88\u591a\u901a\u7528\u53c2\u6570\uff0c\u4e5f\u6709\u90e8\u5206\u7279\u6709\u53c2\u6570\uff0c\u914d\u7f6e\u65f6\u9700\u8981\u914d\u7f6e\u901a\u7528\u53c2\u6570\u548c\u4e0d\u540c\u6570\u636e\u6e90\u7684\u7279\u6709\u53c2\u6570\u3002 \u901a\u7528\u53c2\u6570 \u00b6 \u53c2\u6570 \u6570\u636e\u7c7b\u578b \u9ed8\u8ba4\u503c \u662f\u5426\u5fc5\u987b \u8bf4\u660e tags.name string - \u662f NebulaGraph\u4e2d\u5b9a\u4e49\u7684 Tag \u540d\u79f0\u3002 tags.type.source string - \u662f \u6307\u5b9a\u6570\u636e\u6e90\u3002\u4f8b\u5982 csv \u3002 tags.type.sink string client \u662f \u6307\u5b9a\u5bfc\u5165\u65b9\u5f0f\uff0c\u53ef\u9009\u503c\u4e3a client \u548c SST \u3002 tags.writeMode string INSERT \u5426 \u5bf9\u6570\u636e\u7684\u6279\u91cf\u64cd\u4f5c\u7c7b\u578b\uff0c\u5305\u62ec\u6279\u91cf\u5bfc\u5165\u3001\u66f4\u65b0\u548c\u5220\u9664\u3002\u53ef\u9009\u503c\u4e3a INSERT \u3001 UPDATE \u3001 DELETE \u3002 tags.deleteEdge string false \u5426 \u8fdb\u884c\u6279\u91cf\u5220\u9664\u64cd\u4f5c\u65f6\u662f\u5426\u5220\u9664\u8be5\u70b9\u5173\u8054\u7684\u51fa\u8fb9\u548c\u5165\u8fb9\u3002 tags.writeMode \u4e3a DELETE \u65f6\u8be5\u53c2\u6570\u751f\u6548\u3002 tags.fields list[string] - \u662f \u5c5e\u6027\u5bf9\u5e94\u7684\u5217\u7684\u8868\u5934\u6216\u5217\u540d\u3002\u5982\u679c\u6709\u8868\u5934\u6216\u5217\u540d\uff0c\u8bf7\u76f4\u63a5\u4f7f\u7528\u8be5\u540d\u79f0\u3002\u5982\u679c CSV \u6587\u4ef6\u6ca1\u6709\u8868\u5934\uff0c\u7528 [_c0, _c1, _c2] \u7684\u5f62\u5f0f\u8868\u793a\u7b2c\u4e00\u5217\u3001\u7b2c\u4e8c\u5217\u3001\u7b2c\u4e09\u5217\uff0c\u4ee5\u6b64\u7c7b\u63a8\u3002 tags.nebula.fields list[string] - \u662f NebulaGraph\u4e2d\u5b9a\u4e49\u7684\u5c5e\u6027\u540d\u79f0\uff0c\u987a\u5e8f\u5fc5\u987b\u548c tags.fields \u4e00\u4e00\u5bf9\u5e94\u3002\u4f8b\u5982 [_c1, _c2] \u5bf9\u5e94 [name, age] \uff0c\u8868\u793a\u7b2c\u4e8c\u5217\u4e3a\u5c5e\u6027 name \u7684\u503c\uff0c\u7b2c\u4e09\u5217\u4e3a\u5c5e\u6027 age \u7684\u503c\u3002 tags.vertex.field string - \u662f \u70b9 ID \u7684\u5217\u3002\u4f8b\u5982 CSV \u6587\u4ef6\u6ca1\u6709\u8868\u5934\u65f6\uff0c\u53ef\u4ee5\u7528 _c0 \u8868\u793a\u7b2c\u4e00\u5217\u7684\u503c\u4f5c\u4e3a\u70b9 ID\u3002 tags.vertex.udf.separator string - \u5426 \u901a\u8fc7\u81ea\u5b9a\u4e49\u89c4\u5219\u5408\u5e76\u591a\u5217\uff0c\u8be5\u53c2\u6570\u6307\u5b9a\u8fde\u63a5\u7b26\u3002 tags.vertex.udf.oldColNames list - \u5426 \u901a\u8fc7\u81ea\u5b9a\u4e49\u89c4\u5219\u5408\u5e76\u591a\u5217\uff0c\u8be5\u53c2\u6570\u6307\u5b9a\u5f85\u5408\u5e76\u7684\u5217\u540d\u3002\u591a\u4e2a\u5217\u7528\u82f1\u6587\u9017\u53f7\uff08,\uff09\u5206\u9694\u3002 tags.vertex.udf.newColName string - \u5426 \u901a\u8fc7\u81ea\u5b9a\u4e49\u89c4\u5219\u5408\u5e76\u591a\u5217\uff0c\u8be5\u53c2\u6570\u6307\u5b9a\u65b0\u5217\u7684\u5217\u540d\u3002 tags.vertex.prefix string - \u5426 \u4e3a VID \u589e\u52a0\u6307\u5b9a\u7684\u524d\u7f00\u3002\u4f8b\u5982 VID \u4e3a 12345 \uff0c\u589e\u52a0\u524d\u7f00 tag1 \u540e\u4e3a tag1_12345 \u3002\u4e0b\u5212\u7ebf\u65e0\u6cd5\u4fee\u6539\u3002 tags.vertex.policy string - \u5426 \u4ec5\u652f\u6301\u53d6\u503c hash \u3002\u5bf9 string \u7c7b\u578b\u7684 VID \u8fdb\u884c\u54c8\u5e0c\u5316\u64cd\u4f5c\u3002 tags.batch int 256 \u662f \u5355\u6279\u6b21\u5199\u5165NebulaGraph\u7684\u6700\u5927\u70b9\u6570\u91cf\u3002 tags.partition int 32 \u662f Spark \u5206\u7247\u6570\u91cf\u3002 Parquet/JSON/ORC \u6e90\u7279\u6709\u53c2\u6570 \u00b6 \u53c2\u6570 \u6570\u636e\u7c7b\u578b \u9ed8\u8ba4\u503c \u662f\u5426\u5fc5\u987b \u8bf4\u660e tags.path string - \u662f HDFS \u4e2d\u70b9\u6570\u636e\u6587\u4ef6\u7684\u8def\u5f84\u3002\u7528\u53cc\u5f15\u53f7\u62ec\u8d77\u8def\u5f84\uff0c\u4ee5 hdfs:// \u5f00\u5934\u3002 CSV \u6e90\u7279\u6709\u53c2\u6570 \u00b6 \u53c2\u6570 \u6570\u636e\u7c7b\u578b \u9ed8\u8ba4\u503c \u662f\u5426\u5fc5\u987b \u8bf4\u660e tags.path string - \u662f HDFS \u4e2d\u70b9\u6570\u636e\u6587\u4ef6\u7684\u8def\u5f84\u3002\u7528\u53cc\u5f15\u53f7\u62ec\u8d77\u8def\u5f84\uff0c\u4ee5 hdfs:// \u5f00\u5934\u3002 tags.separator string , \u662f \u5206\u9694\u7b26\u3002\u9ed8\u8ba4\u503c\u4e3a\u82f1\u6587\u9017\u53f7\uff08,\uff09\u3002\u5bf9\u4e8e\u7279\u6b8a\u5b57\u7b26\uff0c\u5982\u63a7\u5236\u7b26 ^A ,\u53ef\u4ee5\u7528 ASCII \u516b\u8fdb\u5236 \\001 \u6216 UNICODE \u7f16\u7801\u5341\u516d\u8fdb\u5236 \\u0001 \u8868\u793a\uff0c\u63a7\u5236\u7b26 ^B \uff0c\u7528 ASCII \u516b\u8fdb\u5236 \\002 \u6216 UNICODE \u7f16\u7801\u5341\u516d\u8fdb\u5236 \\u0002 \u8868\u793a\uff0c\u63a7\u5236\u7b26 ^C \uff0c\u7528 ASCII \u516b\u8fdb\u5236 \\003 \u6216 UNICODE \u7f16\u7801\u5341\u516d\u8fdb\u5236 \\u0003 \u8868\u793a\u3002 tags.header bool true \u662f \u6587\u4ef6\u662f\u5426\u6709\u8868\u5934\u3002 Hive \u6e90\u7279\u6709\u53c2\u6570 \u00b6 \u53c2\u6570 \u6570\u636e\u7c7b\u578b \u9ed8\u8ba4\u503c \u662f\u5426\u5fc5\u987b \u8bf4\u660e tags.exec string - \u662f \u67e5\u8be2\u6570\u636e\u6e90\u7684\u8bed\u53e5\u3002\u4f8b\u5982 select name,age from mooc.users \u3002 MaxCompute \u6e90\u7279\u6709\u53c2\u6570 \u00b6 \u53c2\u6570 \u6570\u636e\u7c7b\u578b \u9ed8\u8ba4\u503c \u662f\u5426\u5fc5\u987b \u8bf4\u660e tags.table string - \u662f MaxCompute \u7684\u8868\u540d\u3002 tags.project string - \u662f MaxCompute \u7684\u9879\u76ee\u540d\u3002 tags.odpsUrl string - \u662f MaxCompute \u670d\u52a1\u7684 odpsUrl\u3002\u5730\u5740\u53ef\u6839\u636e \u963f\u91cc\u4e91\u6587\u6863 \u67e5\u770b\u3002 tags.tunnelUrl string - \u662f MaxCompute \u670d\u52a1\u7684 tunnelUrl\u3002\u5730\u5740\u53ef\u6839\u636e \u963f\u91cc\u4e91\u6587\u6863 \u67e5\u770b\u3002 tags.accessKeyId string - \u662f MaxCompute \u670d\u52a1\u7684 accessKeyId\u3002 tags.accessKeySecret string - \u662f MaxCompute \u670d\u52a1\u7684 accessKeySecret\u3002 tags.partitionSpec string - \u5426 MaxCompute \u8868\u7684\u5206\u533a\u63cf\u8ff0\u3002 tags.numPartitions int 1 \u5426 MaxCompute \u7684 Spark \u8fde\u63a5\u5668\u5728\u8bfb\u53d6 MaxCompute \u6570\u636e\u65f6\u4f7f\u7528\u7684\u5206\u533a\u6570\u3002 tags.sentence string - \u5426 \u67e5\u8be2\u6570\u636e\u6e90\u7684\u8bed\u53e5\u3002SQL \u8bed\u53e5\u4e2d\u7684\u8868\u540d\u548c\u4e0a\u65b9 table \u7684\u503c\u76f8\u540c\u3002 Neo4j \u6e90\u7279\u6709\u53c2\u6570 \u00b6 \u53c2\u6570 \u6570\u636e\u7c7b\u578b \u9ed8\u8ba4\u503c \u662f\u5426\u5fc5\u987b \u8bf4\u660e tags.exec string - \u662f \u67e5\u8be2\u6570\u636e\u6e90\u7684\u8bed\u53e5\u3002\u4f8b\u5982 match (n:label) return n.neo4j-field-0 \u3002 tags.server string \"bolt://127.0.0.1:7687\" \u662f Neo4j \u670d\u52a1\u5668\u5730\u5740\u3002 tags.user string - \u662f \u62e5\u6709\u8bfb\u53d6\u6743\u9650\u7684 Neo4j \u7528\u6237\u540d\u3002 tags.password string - \u662f \u7528\u6237\u540d\u5bf9\u5e94\u5bc6\u7801\u3002 tags.database string - \u662f Neo4j \u4e2d\u4fdd\u5b58\u6e90\u6570\u636e\u7684\u6570\u636e\u5e93\u540d\u3002 tags.check_point_path string /tmp/test \u5426 \u8bbe\u7f6e\u4fdd\u5b58\u5bfc\u5165\u8fdb\u5ea6\u4fe1\u606f\u7684\u76ee\u5f55\uff0c\u7528\u4e8e\u65ad\u70b9\u7eed\u4f20\u3002\u5982\u679c\u672a\u8bbe\u7f6e\uff0c\u8868\u793a\u4e0d\u542f\u7528\u65ad\u70b9\u7eed\u4f20\u3002 MySQL/PostgreSQL \u6e90\u7279\u6709\u53c2\u6570 \u00b6 \u53c2\u6570 \u6570\u636e\u7c7b\u578b \u9ed8\u8ba4\u503c \u662f\u5426\u5fc5\u987b \u8bf4\u660e tags.host string - \u662f MySQL/PostgreSQL \u670d\u52a1\u5668\u5730\u5740\u3002 tags.port string - \u662f MySQL/PostgreSQL \u670d\u52a1\u5668\u7aef\u53e3\u3002 tags.database string - \u662f \u6570\u636e\u5e93\u540d\u79f0\u3002 tags.table string - \u662f \u9700\u8981\u4f5c\u4e3a\u6570\u636e\u6e90\u7684\u8868\u540d\u79f0\u3002 tags.user string - \u662f \u62e5\u6709\u8bfb\u53d6\u6743\u9650\u7684 MySQL/PostgreSQL \u7528\u6237\u540d\u3002 tags.password string - \u662f \u7528\u6237\u540d\u5bf9\u5e94\u5bc6\u7801\u3002 tags.sentence string - \u662f \u67e5\u8be2\u6570\u636e\u6e90\u7684\u8bed\u53e5\u3002\u4f8b\u5982 \"select teamid, name from team order by teamid\" \u3002 Oracle \u6e90\u7279\u6709\u53c2\u6570 \u00b6 \u53c2\u6570 \u6570\u636e\u7c7b\u578b \u9ed8\u8ba4\u503c \u662f\u5426\u5fc5\u987b \u8bf4\u660e tags.url string - \u662f Oracle \u6570\u636e\u5e93\u8fde\u63a5\u5730\u5740\u3002 tags.driver string - \u662f Oracle \u9a71\u52a8\u5730\u5740\u3002 tags.user string - \u662f \u62e5\u6709\u8bfb\u53d6\u6743\u9650\u7684 Oracle \u7528\u6237\u540d\u3002 tags.password string - \u662f \u7528\u6237\u540d\u5bf9\u5e94\u5bc6\u7801\u3002 tags.table string - \u662f \u9700\u8981\u4f5c\u4e3a\u6570\u636e\u6e90\u7684\u8868\u540d\u79f0\u3002 tags.sentence string - \u662f \u67e5\u8be2\u6570\u636e\u6e90\u7684\u8bed\u53e5\u3002\u4f8b\u5982 \"select playerid, name, age from player\" \u3002 ClickHouse \u6e90\u7279\u6709\u53c2\u6570 \u00b6 \u53c2\u6570 \u6570\u636e\u7c7b\u578b \u9ed8\u8ba4\u503c \u662f\u5426\u5fc5\u987b \u8bf4\u660e tags.url string - \u662f ClickHouse \u7684 JDBC URL\u3002 tags.user string - \u662f \u6709\u8bfb\u53d6\u6743\u9650\u7684 ClickHouse \u7528\u6237\u540d\u3002 tags.password string - \u662f \u7528\u6237\u540d\u5bf9\u5e94\u5bc6\u7801\u3002 tags.numPartition string - \u662f ClickHouse \u5206\u533a\u6570\u3002 tags.sentence string - \u662f \u67e5\u8be2\u6570\u636e\u6e90\u7684\u8bed\u53e5\u3002 Hbase \u6e90\u7279\u6709\u53c2\u6570 \u00b6 \u53c2\u6570 \u6570\u636e\u7c7b\u578b \u9ed8\u8ba4\u503c \u662f\u5426\u5fc5\u987b \u8bf4\u660e tags.host string 127.0.0.1 \u662f Hbase \u670d\u52a1\u5668\u5730\u5740\u3002 tags.port string 2181 \u662f Hbase \u670d\u52a1\u5668\u7aef\u53e3\u3002 tags.table string - \u662f \u9700\u8981\u4f5c\u4e3a\u6570\u636e\u6e90\u7684\u8868\u540d\u79f0\u3002 tags.columnFamily string - \u662f \u8868\u6240\u5c5e\u7684\u5217\u65cf\uff08column family\uff09\u3002 Pulsar \u6e90\u7279\u6709\u53c2\u6570 \u00b6 \u53c2\u6570 \u6570\u636e\u7c7b\u578b \u9ed8\u8ba4\u503c \u662f\u5426\u5fc5\u987b \u8bf4\u660e tags.service string \"pulsar://localhost:6650\" \u662f Pulsar \u670d\u52a1\u5668\u5730\u5740\u3002 tags.admin string \"http://localhost:8081\" \u662f \u8fde\u63a5 pulsar \u7684 admin.url\u3002 tags.options.<topic\\|topics\\| topicsPattern> string - \u662f Pulsar \u7684\u9009\u9879\uff0c\u53ef\u4ee5\u4ece topic \u3001 topics \u548c topicsPattern \u9009\u62e9\u4e00\u4e2a\u8fdb\u884c\u914d\u7f6e\u3002 tags.interval.seconds int 10 \u662f \u8bfb\u53d6\u6d88\u606f\u7684\u95f4\u9694\u3002\u5355\u4f4d\uff1a\u79d2\u3002 Kafka \u6e90\u7279\u6709\u53c2\u6570 \u00b6 \u53c2\u6570 \u6570\u636e\u7c7b\u578b \u9ed8\u8ba4\u503c \u662f\u5426\u5fc5\u987b \u8bf4\u660e tags.service string - \u662f Kafka \u670d\u52a1\u5668\u5730\u5740\u3002 tags.topic string - \u662f \u6d88\u606f\u7c7b\u522b\u3002 tags.interval.seconds int 10 \u662f \u8bfb\u53d6\u6d88\u606f\u7684\u95f4\u9694\u3002\u5355\u4f4d\uff1a\u79d2\u3002 \u751f\u6210 SST \u65f6\u7684\u7279\u6709\u53c2\u6570 \u00b6 \u53c2\u6570 \u6570\u636e\u7c7b\u578b \u9ed8\u8ba4\u503c \u662f\u5426\u5fc5\u987b \u8bf4\u660e tags.path string - \u662f \u6307\u5b9a\u9700\u8981\u751f\u6210 SST \u6587\u4ef6\u7684\u6e90\u6587\u4ef6\u7684\u8def\u5f84\u3002 tags.repartitionWithNebula bool true \u5426 \u751f\u6210 SST \u6587\u4ef6\u65f6\u662f\u5426\u8981\u57fa\u4e8eNebulaGraph\u4e2d\u56fe\u7a7a\u95f4\u7684 partition \u8fdb\u884c\u6570\u636e\u91cd\u5206\u533a\u3002\u5f00\u542f\u8be5\u529f\u80fd\u53ef\u51cf\u5c11 DOWNLOAD \u548c INGEST SST \u6587\u4ef6\u9700\u8981\u7684\u65f6\u95f4\u3002 \u8fb9\u914d\u7f6e \u00b6 \u5bf9\u4e8e\u4e0d\u540c\u7684\u6570\u636e\u6e90\uff0c\u8fb9\u7684\u914d\u7f6e\u4e5f\u6709\u6240\u4e0d\u540c\uff0c\u6709\u5f88\u591a\u901a\u7528\u53c2\u6570\uff0c\u4e5f\u6709\u90e8\u5206\u7279\u6709\u53c2\u6570\uff0c\u914d\u7f6e\u65f6\u9700\u8981\u914d\u7f6e\u901a\u7528\u53c2\u6570\u548c\u4e0d\u540c\u6570\u636e\u6e90\u7684\u7279\u6709\u53c2\u6570\u3002 \u8fb9\u914d\u7f6e\u7684\u4e0d\u540c\u6570\u636e\u6e90\u7279\u6709\u53c2\u6570\u8bf7\u53c2\u89c1\u4e0a\u65b9\u70b9\u914d\u7f6e\u5185\u7684\u7279\u6709\u53c2\u6570\u4ecb\u7ecd\uff0c\u6ce8\u610f\u533a\u5206 tags \u548c edges \u5373\u53ef\u3002 \u901a\u7528\u53c2\u6570 \u00b6 \u53c2\u6570 \u6570\u636e\u7c7b\u578b \u9ed8\u8ba4\u503c \u662f\u5426\u5fc5\u987b \u8bf4\u660e edges.name string - \u662f NebulaGraph\u4e2d\u5b9a\u4e49\u7684 Edge type \u540d\u79f0\u3002 edges.type.source string - \u662f \u6307\u5b9a\u6570\u636e\u6e90\u3002\u4f8b\u5982 csv \u3002 edges.type.sink string client \u662f \u6307\u5b9a\u5bfc\u5165\u65b9\u5f0f\uff0c\u53ef\u9009\u503c\u4e3a client \u548c SST \u3002 edges.writeMode string INSERT \u5426 \u5bf9\u6570\u636e\u7684\u6279\u91cf\u64cd\u4f5c\u7c7b\u578b\uff0c\u5305\u62ec\u6279\u91cf\u5bfc\u5165\u3001\u66f4\u65b0\u548c\u5220\u9664\u3002\u53ef\u9009\u503c\u4e3a INSERT \u3001 UPDATE \u3001 DELETE \u3002 edges.fields list[string] - \u662f \u5c5e\u6027\u5bf9\u5e94\u7684\u5217\u7684\u8868\u5934\u6216\u5217\u540d\u3002\u5982\u679c\u6709\u8868\u5934\u6216\u5217\u540d\uff0c\u8bf7\u76f4\u63a5\u4f7f\u7528\u8be5\u540d\u79f0\u3002\u5982\u679c CSV \u6587\u4ef6\u6ca1\u6709\u8868\u5934\uff0c\u7528 [_c0, _c1, _c2] \u7684\u5f62\u5f0f\u8868\u793a\u7b2c\u4e00\u5217\u3001\u7b2c\u4e8c\u5217\u3001\u7b2c\u4e09\u5217\uff0c\u4ee5\u6b64\u7c7b\u63a8\u3002 edges.nebula.fields list[string] - \u662f NebulaGraph\u4e2d\u5b9a\u4e49\u7684\u5c5e\u6027\u540d\u79f0\uff0c\u987a\u5e8f\u5fc5\u987b\u548c edges.fields \u4e00\u4e00\u5bf9\u5e94\u3002\u4f8b\u5982 [_c2, _c3] \u5bf9\u5e94 [start_year, end_year] \uff0c\u8868\u793a\u7b2c\u4e09\u5217\u4e3a\u5f00\u59cb\u5e74\u4efd\u7684\u503c\uff0c\u7b2c\u56db\u5217\u4e3a\u7ed3\u675f\u5e74\u4efd\u7684\u503c\u3002 edges.source.field string - \u662f \u8fb9\u7684\u8d77\u59cb\u70b9\u7684\u5217\u3002\u4f8b\u5982 _c0 \u8868\u793a\u7b2c\u4e00\u5217\u7684\u503c\u4f5c\u4e3a\u8fb9\u7684\u8d77\u59cb\u70b9\u3002 edges.source.prefix string - \u5426 \u4e3a VID \u589e\u52a0\u6307\u5b9a\u7684\u524d\u7f00\u3002\u4f8b\u5982 VID \u4e3a 12345 \uff0c\u589e\u52a0\u524d\u7f00 tag1 \u540e\u4e3a tag1_12345 \u3002\u4e0b\u5212\u7ebf\u65e0\u6cd5\u4fee\u6539\u3002 edges.source.policy string - \u5426 \u4ec5\u652f\u6301\u53d6\u503c hash \u3002\u5bf9 string \u7c7b\u578b\u7684 VID \u8fdb\u884c\u54c8\u5e0c\u5316\u64cd\u4f5c\u3002 edges.target.field string - \u662f \u8fb9\u7684\u76ee\u7684\u70b9\u7684\u5217\u3002\u4f8b\u5982 _c1 \u8868\u793a\u7b2c\u4e8c\u5217\u7684\u503c\u4f5c\u4e3a\u8fb9\u7684\u76ee\u7684\u70b9\u3002 edges.target.prefix string - \u5426 \u4e3a VID \u589e\u52a0\u6307\u5b9a\u7684\u524d\u7f00\u3002\u4f8b\u5982 VID \u4e3a 12345 \uff0c\u589e\u52a0\u524d\u7f00 tag1 \u540e\u4e3a tag1_12345 \u3002\u4e0b\u5212\u7ebf\u65e0\u6cd5\u4fee\u6539\u3002 edges.target.policy string - \u5426 \u4ec5\u652f\u6301\u53d6\u503c hash \u3002\u5bf9 string \u7c7b\u578b\u7684 VID \u8fdb\u884c\u54c8\u5e0c\u5316\u64cd\u4f5c\u3002 edges.ranking int - \u5426 rank \u503c\u7684\u5217\u3002\u6ca1\u6709\u6307\u5b9a\u65f6\uff0c\u9ed8\u8ba4\u6240\u6709 rank \u503c\u4e3a 0 \u3002 edges.batch int 256 \u662f \u5355\u6279\u6b21\u5199\u5165NebulaGraph\u7684\u6700\u5927\u8fb9\u6570\u91cf\u3002 edges.partition int 32 \u662f Spark \u5206\u7247\u6570\u91cf\u3002 \u751f\u6210 SST \u65f6\u7684\u7279\u6709\u53c2\u6570 \u00b6 \u53c2\u6570 \u6570\u636e\u7c7b\u578b \u9ed8\u8ba4\u503c \u662f\u5426\u5fc5\u987b \u8bf4\u660e edges.path string - \u662f \u6307\u5b9a\u9700\u8981\u751f\u6210 SST \u6587\u4ef6\u7684\u6e90\u6587\u4ef6\u7684\u8def\u5f84\u3002 edges.repartitionWithNebula bool true \u5426 \u751f\u6210 SST \u6587\u4ef6\u65f6\u662f\u5426\u8981\u57fa\u4e8eNebulaGraph\u4e2d\u56fe\u7a7a\u95f4\u7684 partition \u8fdb\u884c\u6570\u636e\u91cd\u5206\u533a\u3002\u5f00\u542f\u8be5\u529f\u80fd\u53ef\u51cf\u5c11 DOWNLOAD \u548c INGEST SST \u6587\u4ef6\u9700\u8981\u7684\u65f6\u95f4\u3002 NebulaGraph\u6e90\u7279\u6709\u53c2\u6570 \u00b6 \u53c2\u6570 \u6570\u636e\u7c7b\u578b \u9ed8\u8ba4\u503c \u662f\u5426\u5fc5\u987b \u8bf4\u660e edges.path string \"hdfs://namenode:9000/path/edge\" \u662f \u6307\u5b9a CSV \u6587\u4ef6\u7684\u5b58\u50a8\u8def\u5f84\u3002\u8bbe\u7f6e\u7684\u8def\u5f84\u5fc5\u987b\u4e0d\u5b58\u5728\uff0cExchange \u4f1a\u81ea\u52a8\u521b\u5efa\u8be5\u8def\u5f84\u3002\u5b58\u50a8\u5230 HDFS \u670d\u52a1\u5668\u65f6\u8def\u5f84\u683c\u5f0f\u540c\u9ed8\u8ba4\u503c\uff0c\u4f8b\u5982 \"hdfs://192.168.8.177:9000/edge/follow\" \u3002\u5b58\u50a8\u5230\u672c\u5730\u65f6\u8def\u5f84\u683c\u5f0f\u4e3a \"file:///path/edge\" \uff0c\u4f8b\u5982 \"file:///home/nebula/edge/follow\" \u3002\u6709\u591a\u4e2a Edge \u65f6\u5fc5\u987b\u4e3a\u6bcf\u4e2a Edge \u8bbe\u7f6e\u4e0d\u540c\u7684\u76ee\u5f55\u3002 edges.noField bool false \u662f \u5f53\u503c\u4e3a true \u65f6\uff0c\u4ec5\u5bfc\u51fa\u8d77\u59cb\u70b9 VID\u3001\u76ee\u7684\u70b9 VID \u548c Rank\uff0c\u800c\u4e0d\u5bfc\u51fa\u5c5e\u6027\u6570\u636e\uff1b\u5f53\u503c\u4e3a false \u65f6\u5bfc\u51fa\u8d77\u59cb\u70b9 VID\u3001\u76ee\u7684\u70b9 VID\u3001Rank \u548c\u5c5e\u6027\u6570\u636e\u3002 edges.return.fields list [] \u662f \u6307\u5b9a\u8981\u5bfc\u51fa\u7684\u5c5e\u6027\u3002\u4f8b\u5982\uff0c\u8981\u5bfc\u51fa start_year \u548c end_year \u5c5e\u6027\uff0c\u9700\u5c06\u53c2\u6570\u503c\u8bbe\u7f6e\u4e3a [\"start_year\",\"end_year\"] \u3002\u8be5\u53c2\u6570\u4ec5\u5728 edges.noField \u7684\u503c\u4e3a false \u65f6\u751f\u6548\u3002","title":"\u914d\u7f6e\u53c2\u6570"},{"location":"import-export/nebula-exchange/parameter-reference/ex-ug-parameter/#_1","text":"\u672c\u6587\u4ecb\u7ecd\u4f7f\u7528 NebulaGraph Exchange \u65f6\u5982\u4f55\u4fee\u6539\u914d\u7f6e\u6587\u4ef6 application.conf \u3002 \u4fee\u6539\u914d\u7f6e\u6587\u4ef6\u4e4b\u524d\uff0c\u5efa\u8bae\u6839\u636e\u6570\u636e\u6e90\u590d\u5236\u5e76\u4fee\u6539\u6587\u4ef6\u540d\u79f0\uff0c\u4fbf\u4e8e\u533a\u5206\u3002\u4f8b\u5982\u6570\u636e\u6e90\u4e3a CSV \u6587\u4ef6\uff0c\u53ef\u4ee5\u590d\u5236\u4e3a csv_application.conf \u3002 \u914d\u7f6e\u6587\u4ef6\u7684\u5185\u5bb9\u4e3b\u8981\u5206\u4e3a\u5982\u4e0b\u51e0\u7c7b\uff1a Spark \u76f8\u5173\u914d\u7f6e Hive \u914d\u7f6e\uff08\u53ef\u9009\uff09 NebulaGraph\u76f8\u5173\u914d\u7f6e \u70b9\u914d\u7f6e \u8fb9\u914d\u7f6e","title":"\u914d\u7f6e\u8bf4\u660e"},{"location":"import-export/nebula-exchange/parameter-reference/ex-ug-parameter/#spark","text":"\u672c\u6587\u53ea\u5217\u51fa\u90e8\u5206 Spark \u53c2\u6570\uff0c\u66f4\u591a\u53c2\u6570\u8bf7\u53c2\u89c1 \u5b98\u65b9\u6587\u6863 \u3002 \u53c2\u6570 \u6570\u636e\u7c7b\u578b \u9ed8\u8ba4\u503c \u662f\u5426\u5fc5\u987b \u8bf4\u660e spark.app.name string - \u5426 Spark \u9a71\u52a8\u7a0b\u5e8f\u540d\u79f0\u3002 spark.driver.cores int 1 \u5426 \u9a71\u52a8\u7a0b\u5e8f\u4f7f\u7528\u7684 CPU \u6838\u6570\uff0c\u4ec5\u9002\u7528\u4e8e\u96c6\u7fa4\u6a21\u5f0f\u3002 spark.driver.maxResultSize string 1G \u5426 \u5355\u4e2a Spark \u64cd\u4f5c\uff08\u4f8b\u5982 collect\uff09\u65f6\uff0c\u6240\u6709\u5206\u533a\u7684\u5e8f\u5217\u5316\u7ed3\u679c\u7684\u603b\u5927\u5c0f\u9650\u5236\uff08\u5b57\u8282\u4e3a\u5355\u4f4d\uff09\u3002\u6700\u5c0f\u503c\u4e3a 1M\uff0c0 \u8868\u793a\u65e0\u9650\u5236\u3002 spark.executor.memory string 1G \u5426 Spark \u9a71\u52a8\u7a0b\u5e8f\u4f7f\u7528\u7684\u5185\u5b58\u91cf\uff0c\u53ef\u4ee5\u6307\u5b9a\u5355\u4f4d\uff0c\u4f8b\u5982 512M\u30011G\u3002 spark.cores.max int 16 \u5426 \u5f53\u9a71\u52a8\u7a0b\u5e8f\u4ee5\u201c\u7c97\u7c92\u5ea6\u201d\u5171\u4eab\u6a21\u5f0f\u5728\u72ec\u7acb\u90e8\u7f72\u96c6\u7fa4\u6216 Mesos \u96c6\u7fa4\u4e0a\u8fd0\u884c\u65f6\uff0c\u8de8\u96c6\u7fa4\uff08\u800c\u975e\u4ece\u6bcf\u53f0\u8ba1\u7b97\u673a\uff09\u8bf7\u6c42\u5e94\u7528\u7a0b\u5e8f\u7684\u6700\u5927 CPU \u6838\u6570\u3002\u5982\u679c\u672a\u8bbe\u7f6e\uff0c\u5219\u503c\u4e3a Spark \u7684\u72ec\u7acb\u96c6\u7fa4\u7ba1\u7406\u5668\u4e0a\u7684 spark.deploy.defaultCores \u6216 Mesos \u4e0a\u7684 infinite\uff08\u6240\u6709\u53ef\u7528\u7684\u5185\u6838\uff09\u3002","title":"Spark \u76f8\u5173\u914d\u7f6e"},{"location":"import-export/nebula-exchange/parameter-reference/ex-ug-parameter/#hive","text":"\u5982\u679c Spark \u548c Hive \u90e8\u7f72\u5728\u4e0d\u540c\u96c6\u7fa4\uff0c\u624d\u9700\u8981\u914d\u7f6e\u8fde\u63a5 Hive \u7684\u53c2\u6570\uff0c\u5426\u5219\u8bf7\u5ffd\u7565\u8fd9\u4e9b\u914d\u7f6e\u3002 \u53c2\u6570 \u6570\u636e\u7c7b\u578b \u9ed8\u8ba4\u503c \u662f\u5426\u5fc5\u987b \u8bf4\u660e hive.warehouse string - \u662f HDFS \u4e2d\u7684 warehouse \u8def\u5f84\u3002\u7528\u53cc\u5f15\u53f7\u62ec\u8d77\u8def\u5f84\uff0c\u4ee5 hdfs:// \u5f00\u5934\u3002 hive.connectionURL string - \u662f JDBC \u8fde\u63a5\u7684 URL\u3002\u4f8b\u5982 \"jdbc:mysql://127.0.0.1:3306/hive_spark?characterEncoding=UTF-8\" \u3002 hive.connectionDriverName string \"com.mysql.jdbc.Driver\" \u662f \u9a71\u52a8\u540d\u79f0\u3002 hive.connectionUserName list[string] - \u662f \u8fde\u63a5\u7684\u7528\u6237\u540d\u3002 hive.connectionPassword list[string] - \u662f \u7528\u6237\u540d\u5bf9\u5e94\u7684\u5bc6\u7801\u3002","title":"Hive \u914d\u7f6e\uff08\u53ef\u9009\uff09"},{"location":"import-export/nebula-exchange/parameter-reference/ex-ug-parameter/#nebulagraph","text":"\u53c2\u6570 \u6570\u636e\u7c7b\u578b \u9ed8\u8ba4\u503c \u662f\u5426\u5fc5\u987b \u8bf4\u660e nebula.address.graph list[string] [\"127.0.0.1:9669\"] \u662f \u6240\u6709 Graph \u670d\u52a1\u7684\u5730\u5740\uff0c\u5305\u62ec IP \u548c\u7aef\u53e3\uff0c\u591a\u4e2a\u5730\u5740\u7528\u82f1\u6587\u9017\u53f7\uff08,\uff09\u5206\u9694\u3002\u683c\u5f0f\u4e3a [\"ip1:port1\",\"ip2:port2\",\"ip3:port3\"] \u3002 nebula.address.meta list[string] [\"127.0.0.1:9559\"] \u662f \u6240\u6709 Meta \u670d\u52a1\u7684\u5730\u5740\uff0c\u5305\u62ec IP \u548c\u7aef\u53e3\uff0c\u591a\u4e2a\u5730\u5740\u7528\u82f1\u6587\u9017\u53f7\uff08,\uff09\u5206\u9694\u3002\u683c\u5f0f\u4e3a [\"ip1:port1\",\"ip2:port2\",\"ip3:port3\"] \u3002 nebula.user string - \u662f \u62e5\u6709NebulaGraph\u5199\u6743\u9650\u7684\u7528\u6237\u540d\u3002 nebula.pswd string - \u662f \u7528\u6237\u540d\u5bf9\u5e94\u7684\u5bc6\u7801\u3002 nebula.space string - \u662f \u9700\u8981\u5bfc\u5165\u6570\u636e\u7684\u7684\u56fe\u7a7a\u95f4\u540d\u79f0\u3002 nebula.ssl.enable.graph bool false \u662f \u5f00\u542f Exchange \u4e0e Graph \u670d\u52a1\u4e4b\u95f4\u7684 SSL \u52a0\u5bc6 \u4f20\u8f93\u3002\u5f53\u503c\u4e3a true \u65f6\u5f00\u542f\uff0c\u4e0b\u65b9\u7684 SSL \u76f8\u5173\u53c2\u6570\u751f\u6548\u3002\u5982\u679c Exchange \u8fd0\u884c\u5728\u591a\u673a\u96c6\u7fa4\u4e0a\uff0c\u5728\u8bbe\u7f6e\u4ee5\u4e0b SSL \u76f8\u5173\u8def\u5f84\u65f6\uff0c\u9700\u8981\u5728\u6bcf\u53f0\u673a\u5668\u7684\u76f8\u540c\u8def\u5f84\u90fd\u5b58\u50a8\u76f8\u5e94\u7684\u6587\u4ef6\u3002 nebula.ssl.enable.meta bool false \u662f \u5f00\u542f Exchange \u4e0e Meta \u670d\u52a1\u4e4b\u95f4\u7684 SSL \u52a0\u5bc6\u4f20\u8f93\u3002\u5f53\u503c\u4e3a true \u65f6\u5f00\u542f\uff0c\u4e0b\u65b9\u7684 SSL \u76f8\u5173\u53c2\u6570\u751f\u6548\u3002\u5982\u679c Exchange \u8fd0\u884c\u5728\u591a\u673a\u96c6\u7fa4\u4e0a\uff0c\u5728\u8bbe\u7f6e\u4ee5\u4e0b SSL \u76f8\u5173\u8def\u5f84\u65f6\uff0c\u9700\u8981\u5728\u6bcf\u53f0\u673a\u5668\u7684\u76f8\u540c\u8def\u5f84\u90fd\u5b58\u50a8\u76f8\u5e94\u7684\u6587\u4ef6\u3002 nebula.ssl.sign string ca \u662f \u7b7e\u540d\u65b9\u5f0f\uff0c\u53ef\u9009\u503c\uff1a ca \uff08CA \u7b7e\u540d\uff09\u6216 self \uff08\u81ea\u7b7e\u540d\uff09\u3002 nebula.ssl.ca.param.caCrtFilePath string \"/path/caCrtFilePath\" \u662f nebula.ssl.sign \u7684\u503c\u4e3a ca \u65f6\u751f\u6548\uff0c\u7528\u4e8e\u6307\u5b9a CA \u8bc1\u4e66\u7684\u5b58\u50a8\u8def\u5f84\u3002 nebula.ssl.ca.param.crtFilePath string \"/path/crtFilePath\" \u662f nebula.ssl.sign \u7684\u503c\u4e3a ca \u65f6\u751f\u6548\uff0c\u7528\u4e8e\u6307\u5b9a CRT \u8bc1\u4e66\u7684\u5b58\u50a8\u8def\u5f84\u3002 nebula.ssl.ca.param.keyFilePath string \"/path/keyFilePath\" \u662f nebula.ssl.sign \u7684\u503c\u4e3a ca \u65f6\u751f\u6548\uff0c\u7528\u4e8e\u6307\u5b9a\u79c1\u94a5\u6587\u4ef6\u7684\u5b58\u50a8\u8def\u5f84\u3002 nebula.ssl.self.param.crtFilePath string \"/path/crtFilePath\" \u662f nebula.ssl.sign \u7684\u503c\u4e3a self \u65f6\u751f\u6548\uff0c\u7528\u4e8e\u6307\u5b9a CRT \u8bc1\u4e66\u7684\u5b58\u50a8\u8def\u5f84\u3002 nebula.ssl.self.param.keyFilePath string \"/path/keyFilePath\" \u662f nebula.ssl.sign \u7684\u503c\u4e3a self \u65f6\u751f\u6548\uff0c\u7528\u4e8e\u6307\u5b9a\u79c1\u94a5\u6587\u4ef6\u7684\u5b58\u50a8\u8def\u5f84\u3002 nebula.ssl.self.param.password string \"nebula\" \u662f nebula.ssl.sign \u7684\u503c\u4e3a self \u65f6\u751f\u6548\uff0c\u7528\u4e8e\u6307\u5b9a\u5bc6\u7801\u6587\u4ef6\u7684\u5b58\u50a8\u8def\u5f84\u3002 nebula.path.local string \"/tmp\" \u5426 \u5bfc\u5165 SST \u6587\u4ef6\u65f6\u9700\u8981\u8bbe\u7f6e\u672c\u5730 SST \u6587\u4ef6\u8def\u5f84\u3002 nebula.path.remote string \"/sst\" \u5426 \u5bfc\u5165 SST \u6587\u4ef6\u65f6\u9700\u8981\u8bbe\u7f6e\u8fdc\u7aef SST \u6587\u4ef6\u8def\u5f84\u3002 nebula.path.hdfs.namenode string \"hdfs://name_node:9000\" \u5426 \u5bfc\u5165 SST \u6587\u4ef6\u65f6\u9700\u8981\u8bbe\u7f6e HDFS \u7684 namenode\u3002 nebula.connection.timeout int 3000 \u5426 Thrift \u8fde\u63a5\u7684\u8d85\u65f6\u65f6\u95f4\uff0c\u5355\u4f4d\u4e3a ms\u3002 nebula.connection.retry int 3 \u5426 Thrift \u8fde\u63a5\u91cd\u8bd5\u6b21\u6570\u3002 nebula.execution.retry int 3 \u5426 nGQL \u8bed\u53e5\u6267\u884c\u91cd\u8bd5\u6b21\u6570\u3002 nebula.error.max int 32 \u5426 \u5bfc\u5165\u8fc7\u7a0b\u4e2d\u7684\u6700\u5927\u5931\u8d25\u6b21\u6570\u3002\u5f53\u5931\u8d25\u6b21\u6570\u8fbe\u5230\u6700\u5927\u503c\u65f6\uff0c\u63d0\u4ea4\u7684 Spark \u4f5c\u4e1a\u5c06\u81ea\u52a8\u505c\u6b62\u3002 nebula.error.output string /tmp/errors \u5426 \u8f93\u51fa\u9519\u8bef\u65e5\u5fd7\u7684\u8def\u5f84\u3002\u9519\u8bef\u65e5\u5fd7\u4fdd\u5b58\u6267\u884c\u5931\u8d25\u7684 nGQL \u8bed\u53e5\u3002 nebula.rate.limit int 1024 \u5426 \u5bfc\u5165\u6570\u636e\u65f6\u4ee4\u724c\u6876\u7684\u4ee4\u724c\u6570\u91cf\u9650\u5236\u3002 nebula.rate.timeout int 1000 \u5426 \u4ee4\u724c\u6876\u4e2d\u62ff\u53d6\u4ee4\u724c\u7684\u8d85\u65f6\u65f6\u95f4\uff0c\u5355\u4f4d\uff1a\u6beb\u79d2\u3002 Note NebulaGraph\u9ed8\u8ba4\u4e0d\u652f\u6301\u65e0 Tag \u7684\u70b9\u3002\u5982\u679c\u9700\u8981\u5bfc\u5165\u65e0 Tag \u7684\u70b9\uff0c\u9700\u8981\u5148\u5728\u96c6\u7fa4\u5185\u5f00\u542f \u652f\u6301\u65e0 Tag \u70b9 \uff0c\u7136\u540e\u5728 Exchange \u7684\u914d\u7f6e\u6587\u4ef6\u5185\u65b0\u589e nebula.enableTagless \u53c2\u6570\uff0c\u503c\u4e3a true \u3002\u793a\u4f8b\u5982\u4e0b\uff1a nebula: { address: { graph: [ \"127.0.0.1:9669\" ] meta: [ \"127.0.0.1:9559\" ] } user: root pswd: nebula space: test enableTagless: true ...... }","title":"NebulaGraph\u76f8\u5173\u914d\u7f6e"},{"location":"import-export/nebula-exchange/parameter-reference/ex-ug-parameter/#_2","text":"\u5bf9\u4e8e\u4e0d\u540c\u7684\u6570\u636e\u6e90\uff0c\u70b9\u7684\u914d\u7f6e\u4e5f\u6709\u6240\u4e0d\u540c\uff0c\u6709\u5f88\u591a\u901a\u7528\u53c2\u6570\uff0c\u4e5f\u6709\u90e8\u5206\u7279\u6709\u53c2\u6570\uff0c\u914d\u7f6e\u65f6\u9700\u8981\u914d\u7f6e\u901a\u7528\u53c2\u6570\u548c\u4e0d\u540c\u6570\u636e\u6e90\u7684\u7279\u6709\u53c2\u6570\u3002","title":"\u70b9\u914d\u7f6e"},{"location":"import-export/nebula-exchange/parameter-reference/ex-ug-parameter/#_3","text":"\u53c2\u6570 \u6570\u636e\u7c7b\u578b \u9ed8\u8ba4\u503c \u662f\u5426\u5fc5\u987b \u8bf4\u660e tags.name string - \u662f NebulaGraph\u4e2d\u5b9a\u4e49\u7684 Tag \u540d\u79f0\u3002 tags.type.source string - \u662f \u6307\u5b9a\u6570\u636e\u6e90\u3002\u4f8b\u5982 csv \u3002 tags.type.sink string client \u662f \u6307\u5b9a\u5bfc\u5165\u65b9\u5f0f\uff0c\u53ef\u9009\u503c\u4e3a client \u548c SST \u3002 tags.writeMode string INSERT \u5426 \u5bf9\u6570\u636e\u7684\u6279\u91cf\u64cd\u4f5c\u7c7b\u578b\uff0c\u5305\u62ec\u6279\u91cf\u5bfc\u5165\u3001\u66f4\u65b0\u548c\u5220\u9664\u3002\u53ef\u9009\u503c\u4e3a INSERT \u3001 UPDATE \u3001 DELETE \u3002 tags.deleteEdge string false \u5426 \u8fdb\u884c\u6279\u91cf\u5220\u9664\u64cd\u4f5c\u65f6\u662f\u5426\u5220\u9664\u8be5\u70b9\u5173\u8054\u7684\u51fa\u8fb9\u548c\u5165\u8fb9\u3002 tags.writeMode \u4e3a DELETE \u65f6\u8be5\u53c2\u6570\u751f\u6548\u3002 tags.fields list[string] - \u662f \u5c5e\u6027\u5bf9\u5e94\u7684\u5217\u7684\u8868\u5934\u6216\u5217\u540d\u3002\u5982\u679c\u6709\u8868\u5934\u6216\u5217\u540d\uff0c\u8bf7\u76f4\u63a5\u4f7f\u7528\u8be5\u540d\u79f0\u3002\u5982\u679c CSV \u6587\u4ef6\u6ca1\u6709\u8868\u5934\uff0c\u7528 [_c0, _c1, _c2] \u7684\u5f62\u5f0f\u8868\u793a\u7b2c\u4e00\u5217\u3001\u7b2c\u4e8c\u5217\u3001\u7b2c\u4e09\u5217\uff0c\u4ee5\u6b64\u7c7b\u63a8\u3002 tags.nebula.fields list[string] - \u662f NebulaGraph\u4e2d\u5b9a\u4e49\u7684\u5c5e\u6027\u540d\u79f0\uff0c\u987a\u5e8f\u5fc5\u987b\u548c tags.fields \u4e00\u4e00\u5bf9\u5e94\u3002\u4f8b\u5982 [_c1, _c2] \u5bf9\u5e94 [name, age] \uff0c\u8868\u793a\u7b2c\u4e8c\u5217\u4e3a\u5c5e\u6027 name \u7684\u503c\uff0c\u7b2c\u4e09\u5217\u4e3a\u5c5e\u6027 age \u7684\u503c\u3002 tags.vertex.field string - \u662f \u70b9 ID \u7684\u5217\u3002\u4f8b\u5982 CSV \u6587\u4ef6\u6ca1\u6709\u8868\u5934\u65f6\uff0c\u53ef\u4ee5\u7528 _c0 \u8868\u793a\u7b2c\u4e00\u5217\u7684\u503c\u4f5c\u4e3a\u70b9 ID\u3002 tags.vertex.udf.separator string - \u5426 \u901a\u8fc7\u81ea\u5b9a\u4e49\u89c4\u5219\u5408\u5e76\u591a\u5217\uff0c\u8be5\u53c2\u6570\u6307\u5b9a\u8fde\u63a5\u7b26\u3002 tags.vertex.udf.oldColNames list - \u5426 \u901a\u8fc7\u81ea\u5b9a\u4e49\u89c4\u5219\u5408\u5e76\u591a\u5217\uff0c\u8be5\u53c2\u6570\u6307\u5b9a\u5f85\u5408\u5e76\u7684\u5217\u540d\u3002\u591a\u4e2a\u5217\u7528\u82f1\u6587\u9017\u53f7\uff08,\uff09\u5206\u9694\u3002 tags.vertex.udf.newColName string - \u5426 \u901a\u8fc7\u81ea\u5b9a\u4e49\u89c4\u5219\u5408\u5e76\u591a\u5217\uff0c\u8be5\u53c2\u6570\u6307\u5b9a\u65b0\u5217\u7684\u5217\u540d\u3002 tags.vertex.prefix string - \u5426 \u4e3a VID \u589e\u52a0\u6307\u5b9a\u7684\u524d\u7f00\u3002\u4f8b\u5982 VID \u4e3a 12345 \uff0c\u589e\u52a0\u524d\u7f00 tag1 \u540e\u4e3a tag1_12345 \u3002\u4e0b\u5212\u7ebf\u65e0\u6cd5\u4fee\u6539\u3002 tags.vertex.policy string - \u5426 \u4ec5\u652f\u6301\u53d6\u503c hash \u3002\u5bf9 string \u7c7b\u578b\u7684 VID \u8fdb\u884c\u54c8\u5e0c\u5316\u64cd\u4f5c\u3002 tags.batch int 256 \u662f \u5355\u6279\u6b21\u5199\u5165NebulaGraph\u7684\u6700\u5927\u70b9\u6570\u91cf\u3002 tags.partition int 32 \u662f Spark \u5206\u7247\u6570\u91cf\u3002","title":"\u901a\u7528\u53c2\u6570"},{"location":"import-export/nebula-exchange/parameter-reference/ex-ug-parameter/#parquetjsonorc","text":"\u53c2\u6570 \u6570\u636e\u7c7b\u578b \u9ed8\u8ba4\u503c \u662f\u5426\u5fc5\u987b \u8bf4\u660e tags.path string - \u662f HDFS \u4e2d\u70b9\u6570\u636e\u6587\u4ef6\u7684\u8def\u5f84\u3002\u7528\u53cc\u5f15\u53f7\u62ec\u8d77\u8def\u5f84\uff0c\u4ee5 hdfs:// \u5f00\u5934\u3002","title":"Parquet/JSON/ORC \u6e90\u7279\u6709\u53c2\u6570"},{"location":"import-export/nebula-exchange/parameter-reference/ex-ug-parameter/#csv","text":"\u53c2\u6570 \u6570\u636e\u7c7b\u578b \u9ed8\u8ba4\u503c \u662f\u5426\u5fc5\u987b \u8bf4\u660e tags.path string - \u662f HDFS \u4e2d\u70b9\u6570\u636e\u6587\u4ef6\u7684\u8def\u5f84\u3002\u7528\u53cc\u5f15\u53f7\u62ec\u8d77\u8def\u5f84\uff0c\u4ee5 hdfs:// \u5f00\u5934\u3002 tags.separator string , \u662f \u5206\u9694\u7b26\u3002\u9ed8\u8ba4\u503c\u4e3a\u82f1\u6587\u9017\u53f7\uff08,\uff09\u3002\u5bf9\u4e8e\u7279\u6b8a\u5b57\u7b26\uff0c\u5982\u63a7\u5236\u7b26 ^A ,\u53ef\u4ee5\u7528 ASCII \u516b\u8fdb\u5236 \\001 \u6216 UNICODE \u7f16\u7801\u5341\u516d\u8fdb\u5236 \\u0001 \u8868\u793a\uff0c\u63a7\u5236\u7b26 ^B \uff0c\u7528 ASCII \u516b\u8fdb\u5236 \\002 \u6216 UNICODE \u7f16\u7801\u5341\u516d\u8fdb\u5236 \\u0002 \u8868\u793a\uff0c\u63a7\u5236\u7b26 ^C \uff0c\u7528 ASCII \u516b\u8fdb\u5236 \\003 \u6216 UNICODE \u7f16\u7801\u5341\u516d\u8fdb\u5236 \\u0003 \u8868\u793a\u3002 tags.header bool true \u662f \u6587\u4ef6\u662f\u5426\u6709\u8868\u5934\u3002","title":"CSV \u6e90\u7279\u6709\u53c2\u6570"},{"location":"import-export/nebula-exchange/parameter-reference/ex-ug-parameter/#hive_1","text":"\u53c2\u6570 \u6570\u636e\u7c7b\u578b \u9ed8\u8ba4\u503c \u662f\u5426\u5fc5\u987b \u8bf4\u660e tags.exec string - \u662f \u67e5\u8be2\u6570\u636e\u6e90\u7684\u8bed\u53e5\u3002\u4f8b\u5982 select name,age from mooc.users \u3002","title":"Hive \u6e90\u7279\u6709\u53c2\u6570"},{"location":"import-export/nebula-exchange/parameter-reference/ex-ug-parameter/#maxcompute","text":"\u53c2\u6570 \u6570\u636e\u7c7b\u578b \u9ed8\u8ba4\u503c \u662f\u5426\u5fc5\u987b \u8bf4\u660e tags.table string - \u662f MaxCompute \u7684\u8868\u540d\u3002 tags.project string - \u662f MaxCompute \u7684\u9879\u76ee\u540d\u3002 tags.odpsUrl string - \u662f MaxCompute \u670d\u52a1\u7684 odpsUrl\u3002\u5730\u5740\u53ef\u6839\u636e \u963f\u91cc\u4e91\u6587\u6863 \u67e5\u770b\u3002 tags.tunnelUrl string - \u662f MaxCompute \u670d\u52a1\u7684 tunnelUrl\u3002\u5730\u5740\u53ef\u6839\u636e \u963f\u91cc\u4e91\u6587\u6863 \u67e5\u770b\u3002 tags.accessKeyId string - \u662f MaxCompute \u670d\u52a1\u7684 accessKeyId\u3002 tags.accessKeySecret string - \u662f MaxCompute \u670d\u52a1\u7684 accessKeySecret\u3002 tags.partitionSpec string - \u5426 MaxCompute \u8868\u7684\u5206\u533a\u63cf\u8ff0\u3002 tags.numPartitions int 1 \u5426 MaxCompute \u7684 Spark \u8fde\u63a5\u5668\u5728\u8bfb\u53d6 MaxCompute \u6570\u636e\u65f6\u4f7f\u7528\u7684\u5206\u533a\u6570\u3002 tags.sentence string - \u5426 \u67e5\u8be2\u6570\u636e\u6e90\u7684\u8bed\u53e5\u3002SQL \u8bed\u53e5\u4e2d\u7684\u8868\u540d\u548c\u4e0a\u65b9 table \u7684\u503c\u76f8\u540c\u3002","title":"MaxCompute \u6e90\u7279\u6709\u53c2\u6570"},{"location":"import-export/nebula-exchange/parameter-reference/ex-ug-parameter/#neo4j","text":"\u53c2\u6570 \u6570\u636e\u7c7b\u578b \u9ed8\u8ba4\u503c \u662f\u5426\u5fc5\u987b \u8bf4\u660e tags.exec string - \u662f \u67e5\u8be2\u6570\u636e\u6e90\u7684\u8bed\u53e5\u3002\u4f8b\u5982 match (n:label) return n.neo4j-field-0 \u3002 tags.server string \"bolt://127.0.0.1:7687\" \u662f Neo4j \u670d\u52a1\u5668\u5730\u5740\u3002 tags.user string - \u662f \u62e5\u6709\u8bfb\u53d6\u6743\u9650\u7684 Neo4j \u7528\u6237\u540d\u3002 tags.password string - \u662f \u7528\u6237\u540d\u5bf9\u5e94\u5bc6\u7801\u3002 tags.database string - \u662f Neo4j \u4e2d\u4fdd\u5b58\u6e90\u6570\u636e\u7684\u6570\u636e\u5e93\u540d\u3002 tags.check_point_path string /tmp/test \u5426 \u8bbe\u7f6e\u4fdd\u5b58\u5bfc\u5165\u8fdb\u5ea6\u4fe1\u606f\u7684\u76ee\u5f55\uff0c\u7528\u4e8e\u65ad\u70b9\u7eed\u4f20\u3002\u5982\u679c\u672a\u8bbe\u7f6e\uff0c\u8868\u793a\u4e0d\u542f\u7528\u65ad\u70b9\u7eed\u4f20\u3002","title":"Neo4j \u6e90\u7279\u6709\u53c2\u6570"},{"location":"import-export/nebula-exchange/parameter-reference/ex-ug-parameter/#mysqlpostgresql","text":"\u53c2\u6570 \u6570\u636e\u7c7b\u578b \u9ed8\u8ba4\u503c \u662f\u5426\u5fc5\u987b \u8bf4\u660e tags.host string - \u662f MySQL/PostgreSQL \u670d\u52a1\u5668\u5730\u5740\u3002 tags.port string - \u662f MySQL/PostgreSQL \u670d\u52a1\u5668\u7aef\u53e3\u3002 tags.database string - \u662f \u6570\u636e\u5e93\u540d\u79f0\u3002 tags.table string - \u662f \u9700\u8981\u4f5c\u4e3a\u6570\u636e\u6e90\u7684\u8868\u540d\u79f0\u3002 tags.user string - \u662f \u62e5\u6709\u8bfb\u53d6\u6743\u9650\u7684 MySQL/PostgreSQL \u7528\u6237\u540d\u3002 tags.password string - \u662f \u7528\u6237\u540d\u5bf9\u5e94\u5bc6\u7801\u3002 tags.sentence string - \u662f \u67e5\u8be2\u6570\u636e\u6e90\u7684\u8bed\u53e5\u3002\u4f8b\u5982 \"select teamid, name from team order by teamid\" \u3002","title":"MySQL/PostgreSQL \u6e90\u7279\u6709\u53c2\u6570"},{"location":"import-export/nebula-exchange/parameter-reference/ex-ug-parameter/#oracle","text":"\u53c2\u6570 \u6570\u636e\u7c7b\u578b \u9ed8\u8ba4\u503c \u662f\u5426\u5fc5\u987b \u8bf4\u660e tags.url string - \u662f Oracle \u6570\u636e\u5e93\u8fde\u63a5\u5730\u5740\u3002 tags.driver string - \u662f Oracle \u9a71\u52a8\u5730\u5740\u3002 tags.user string - \u662f \u62e5\u6709\u8bfb\u53d6\u6743\u9650\u7684 Oracle \u7528\u6237\u540d\u3002 tags.password string - \u662f \u7528\u6237\u540d\u5bf9\u5e94\u5bc6\u7801\u3002 tags.table string - \u662f \u9700\u8981\u4f5c\u4e3a\u6570\u636e\u6e90\u7684\u8868\u540d\u79f0\u3002 tags.sentence string - \u662f \u67e5\u8be2\u6570\u636e\u6e90\u7684\u8bed\u53e5\u3002\u4f8b\u5982 \"select playerid, name, age from player\" \u3002","title":"Oracle \u6e90\u7279\u6709\u53c2\u6570"},{"location":"import-export/nebula-exchange/parameter-reference/ex-ug-parameter/#clickhouse","text":"\u53c2\u6570 \u6570\u636e\u7c7b\u578b \u9ed8\u8ba4\u503c \u662f\u5426\u5fc5\u987b \u8bf4\u660e tags.url string - \u662f ClickHouse \u7684 JDBC URL\u3002 tags.user string - \u662f \u6709\u8bfb\u53d6\u6743\u9650\u7684 ClickHouse \u7528\u6237\u540d\u3002 tags.password string - \u662f \u7528\u6237\u540d\u5bf9\u5e94\u5bc6\u7801\u3002 tags.numPartition string - \u662f ClickHouse \u5206\u533a\u6570\u3002 tags.sentence string - \u662f \u67e5\u8be2\u6570\u636e\u6e90\u7684\u8bed\u53e5\u3002","title":"ClickHouse \u6e90\u7279\u6709\u53c2\u6570"},{"location":"import-export/nebula-exchange/parameter-reference/ex-ug-parameter/#hbase","text":"\u53c2\u6570 \u6570\u636e\u7c7b\u578b \u9ed8\u8ba4\u503c \u662f\u5426\u5fc5\u987b \u8bf4\u660e tags.host string 127.0.0.1 \u662f Hbase \u670d\u52a1\u5668\u5730\u5740\u3002 tags.port string 2181 \u662f Hbase \u670d\u52a1\u5668\u7aef\u53e3\u3002 tags.table string - \u662f \u9700\u8981\u4f5c\u4e3a\u6570\u636e\u6e90\u7684\u8868\u540d\u79f0\u3002 tags.columnFamily string - \u662f \u8868\u6240\u5c5e\u7684\u5217\u65cf\uff08column family\uff09\u3002","title":"Hbase \u6e90\u7279\u6709\u53c2\u6570"},{"location":"import-export/nebula-exchange/parameter-reference/ex-ug-parameter/#pulsar","text":"\u53c2\u6570 \u6570\u636e\u7c7b\u578b \u9ed8\u8ba4\u503c \u662f\u5426\u5fc5\u987b \u8bf4\u660e tags.service string \"pulsar://localhost:6650\" \u662f Pulsar \u670d\u52a1\u5668\u5730\u5740\u3002 tags.admin string \"http://localhost:8081\" \u662f \u8fde\u63a5 pulsar \u7684 admin.url\u3002 tags.options.<topic\\|topics\\| topicsPattern> string - \u662f Pulsar \u7684\u9009\u9879\uff0c\u53ef\u4ee5\u4ece topic \u3001 topics \u548c topicsPattern \u9009\u62e9\u4e00\u4e2a\u8fdb\u884c\u914d\u7f6e\u3002 tags.interval.seconds int 10 \u662f \u8bfb\u53d6\u6d88\u606f\u7684\u95f4\u9694\u3002\u5355\u4f4d\uff1a\u79d2\u3002","title":"Pulsar \u6e90\u7279\u6709\u53c2\u6570"},{"location":"import-export/nebula-exchange/parameter-reference/ex-ug-parameter/#kafka","text":"\u53c2\u6570 \u6570\u636e\u7c7b\u578b \u9ed8\u8ba4\u503c \u662f\u5426\u5fc5\u987b \u8bf4\u660e tags.service string - \u662f Kafka \u670d\u52a1\u5668\u5730\u5740\u3002 tags.topic string - \u662f \u6d88\u606f\u7c7b\u522b\u3002 tags.interval.seconds int 10 \u662f \u8bfb\u53d6\u6d88\u606f\u7684\u95f4\u9694\u3002\u5355\u4f4d\uff1a\u79d2\u3002","title":"Kafka \u6e90\u7279\u6709\u53c2\u6570"},{"location":"import-export/nebula-exchange/parameter-reference/ex-ug-parameter/#sst","text":"\u53c2\u6570 \u6570\u636e\u7c7b\u578b \u9ed8\u8ba4\u503c \u662f\u5426\u5fc5\u987b \u8bf4\u660e tags.path string - \u662f \u6307\u5b9a\u9700\u8981\u751f\u6210 SST \u6587\u4ef6\u7684\u6e90\u6587\u4ef6\u7684\u8def\u5f84\u3002 tags.repartitionWithNebula bool true \u5426 \u751f\u6210 SST \u6587\u4ef6\u65f6\u662f\u5426\u8981\u57fa\u4e8eNebulaGraph\u4e2d\u56fe\u7a7a\u95f4\u7684 partition \u8fdb\u884c\u6570\u636e\u91cd\u5206\u533a\u3002\u5f00\u542f\u8be5\u529f\u80fd\u53ef\u51cf\u5c11 DOWNLOAD \u548c INGEST SST \u6587\u4ef6\u9700\u8981\u7684\u65f6\u95f4\u3002","title":"\u751f\u6210 SST \u65f6\u7684\u7279\u6709\u53c2\u6570"},{"location":"import-export/nebula-exchange/parameter-reference/ex-ug-parameter/#_4","text":"\u5bf9\u4e8e\u4e0d\u540c\u7684\u6570\u636e\u6e90\uff0c\u8fb9\u7684\u914d\u7f6e\u4e5f\u6709\u6240\u4e0d\u540c\uff0c\u6709\u5f88\u591a\u901a\u7528\u53c2\u6570\uff0c\u4e5f\u6709\u90e8\u5206\u7279\u6709\u53c2\u6570\uff0c\u914d\u7f6e\u65f6\u9700\u8981\u914d\u7f6e\u901a\u7528\u53c2\u6570\u548c\u4e0d\u540c\u6570\u636e\u6e90\u7684\u7279\u6709\u53c2\u6570\u3002 \u8fb9\u914d\u7f6e\u7684\u4e0d\u540c\u6570\u636e\u6e90\u7279\u6709\u53c2\u6570\u8bf7\u53c2\u89c1\u4e0a\u65b9\u70b9\u914d\u7f6e\u5185\u7684\u7279\u6709\u53c2\u6570\u4ecb\u7ecd\uff0c\u6ce8\u610f\u533a\u5206 tags \u548c edges \u5373\u53ef\u3002","title":"\u8fb9\u914d\u7f6e"},{"location":"import-export/nebula-exchange/parameter-reference/ex-ug-parameter/#_5","text":"\u53c2\u6570 \u6570\u636e\u7c7b\u578b \u9ed8\u8ba4\u503c \u662f\u5426\u5fc5\u987b \u8bf4\u660e edges.name string - \u662f NebulaGraph\u4e2d\u5b9a\u4e49\u7684 Edge type \u540d\u79f0\u3002 edges.type.source string - \u662f \u6307\u5b9a\u6570\u636e\u6e90\u3002\u4f8b\u5982 csv \u3002 edges.type.sink string client \u662f \u6307\u5b9a\u5bfc\u5165\u65b9\u5f0f\uff0c\u53ef\u9009\u503c\u4e3a client \u548c SST \u3002 edges.writeMode string INSERT \u5426 \u5bf9\u6570\u636e\u7684\u6279\u91cf\u64cd\u4f5c\u7c7b\u578b\uff0c\u5305\u62ec\u6279\u91cf\u5bfc\u5165\u3001\u66f4\u65b0\u548c\u5220\u9664\u3002\u53ef\u9009\u503c\u4e3a INSERT \u3001 UPDATE \u3001 DELETE \u3002 edges.fields list[string] - \u662f \u5c5e\u6027\u5bf9\u5e94\u7684\u5217\u7684\u8868\u5934\u6216\u5217\u540d\u3002\u5982\u679c\u6709\u8868\u5934\u6216\u5217\u540d\uff0c\u8bf7\u76f4\u63a5\u4f7f\u7528\u8be5\u540d\u79f0\u3002\u5982\u679c CSV \u6587\u4ef6\u6ca1\u6709\u8868\u5934\uff0c\u7528 [_c0, _c1, _c2] \u7684\u5f62\u5f0f\u8868\u793a\u7b2c\u4e00\u5217\u3001\u7b2c\u4e8c\u5217\u3001\u7b2c\u4e09\u5217\uff0c\u4ee5\u6b64\u7c7b\u63a8\u3002 edges.nebula.fields list[string] - \u662f NebulaGraph\u4e2d\u5b9a\u4e49\u7684\u5c5e\u6027\u540d\u79f0\uff0c\u987a\u5e8f\u5fc5\u987b\u548c edges.fields \u4e00\u4e00\u5bf9\u5e94\u3002\u4f8b\u5982 [_c2, _c3] \u5bf9\u5e94 [start_year, end_year] \uff0c\u8868\u793a\u7b2c\u4e09\u5217\u4e3a\u5f00\u59cb\u5e74\u4efd\u7684\u503c\uff0c\u7b2c\u56db\u5217\u4e3a\u7ed3\u675f\u5e74\u4efd\u7684\u503c\u3002 edges.source.field string - \u662f \u8fb9\u7684\u8d77\u59cb\u70b9\u7684\u5217\u3002\u4f8b\u5982 _c0 \u8868\u793a\u7b2c\u4e00\u5217\u7684\u503c\u4f5c\u4e3a\u8fb9\u7684\u8d77\u59cb\u70b9\u3002 edges.source.prefix string - \u5426 \u4e3a VID \u589e\u52a0\u6307\u5b9a\u7684\u524d\u7f00\u3002\u4f8b\u5982 VID \u4e3a 12345 \uff0c\u589e\u52a0\u524d\u7f00 tag1 \u540e\u4e3a tag1_12345 \u3002\u4e0b\u5212\u7ebf\u65e0\u6cd5\u4fee\u6539\u3002 edges.source.policy string - \u5426 \u4ec5\u652f\u6301\u53d6\u503c hash \u3002\u5bf9 string \u7c7b\u578b\u7684 VID \u8fdb\u884c\u54c8\u5e0c\u5316\u64cd\u4f5c\u3002 edges.target.field string - \u662f \u8fb9\u7684\u76ee\u7684\u70b9\u7684\u5217\u3002\u4f8b\u5982 _c1 \u8868\u793a\u7b2c\u4e8c\u5217\u7684\u503c\u4f5c\u4e3a\u8fb9\u7684\u76ee\u7684\u70b9\u3002 edges.target.prefix string - \u5426 \u4e3a VID \u589e\u52a0\u6307\u5b9a\u7684\u524d\u7f00\u3002\u4f8b\u5982 VID \u4e3a 12345 \uff0c\u589e\u52a0\u524d\u7f00 tag1 \u540e\u4e3a tag1_12345 \u3002\u4e0b\u5212\u7ebf\u65e0\u6cd5\u4fee\u6539\u3002 edges.target.policy string - \u5426 \u4ec5\u652f\u6301\u53d6\u503c hash \u3002\u5bf9 string \u7c7b\u578b\u7684 VID \u8fdb\u884c\u54c8\u5e0c\u5316\u64cd\u4f5c\u3002 edges.ranking int - \u5426 rank \u503c\u7684\u5217\u3002\u6ca1\u6709\u6307\u5b9a\u65f6\uff0c\u9ed8\u8ba4\u6240\u6709 rank \u503c\u4e3a 0 \u3002 edges.batch int 256 \u662f \u5355\u6279\u6b21\u5199\u5165NebulaGraph\u7684\u6700\u5927\u8fb9\u6570\u91cf\u3002 edges.partition int 32 \u662f Spark \u5206\u7247\u6570\u91cf\u3002","title":"\u901a\u7528\u53c2\u6570"},{"location":"import-export/nebula-exchange/parameter-reference/ex-ug-parameter/#sst_1","text":"\u53c2\u6570 \u6570\u636e\u7c7b\u578b \u9ed8\u8ba4\u503c \u662f\u5426\u5fc5\u987b \u8bf4\u660e edges.path string - \u662f \u6307\u5b9a\u9700\u8981\u751f\u6210 SST \u6587\u4ef6\u7684\u6e90\u6587\u4ef6\u7684\u8def\u5f84\u3002 edges.repartitionWithNebula bool true \u5426 \u751f\u6210 SST \u6587\u4ef6\u65f6\u662f\u5426\u8981\u57fa\u4e8eNebulaGraph\u4e2d\u56fe\u7a7a\u95f4\u7684 partition \u8fdb\u884c\u6570\u636e\u91cd\u5206\u533a\u3002\u5f00\u542f\u8be5\u529f\u80fd\u53ef\u51cf\u5c11 DOWNLOAD \u548c INGEST SST \u6587\u4ef6\u9700\u8981\u7684\u65f6\u95f4\u3002","title":"\u751f\u6210 SST \u65f6\u7684\u7279\u6709\u53c2\u6570"},{"location":"import-export/nebula-exchange/parameter-reference/ex-ug-parameter/#nebulagraph_1","text":"\u53c2\u6570 \u6570\u636e\u7c7b\u578b \u9ed8\u8ba4\u503c \u662f\u5426\u5fc5\u987b \u8bf4\u660e edges.path string \"hdfs://namenode:9000/path/edge\" \u662f \u6307\u5b9a CSV \u6587\u4ef6\u7684\u5b58\u50a8\u8def\u5f84\u3002\u8bbe\u7f6e\u7684\u8def\u5f84\u5fc5\u987b\u4e0d\u5b58\u5728\uff0cExchange \u4f1a\u81ea\u52a8\u521b\u5efa\u8be5\u8def\u5f84\u3002\u5b58\u50a8\u5230 HDFS \u670d\u52a1\u5668\u65f6\u8def\u5f84\u683c\u5f0f\u540c\u9ed8\u8ba4\u503c\uff0c\u4f8b\u5982 \"hdfs://192.168.8.177:9000/edge/follow\" \u3002\u5b58\u50a8\u5230\u672c\u5730\u65f6\u8def\u5f84\u683c\u5f0f\u4e3a \"file:///path/edge\" \uff0c\u4f8b\u5982 \"file:///home/nebula/edge/follow\" \u3002\u6709\u591a\u4e2a Edge \u65f6\u5fc5\u987b\u4e3a\u6bcf\u4e2a Edge \u8bbe\u7f6e\u4e0d\u540c\u7684\u76ee\u5f55\u3002 edges.noField bool false \u662f \u5f53\u503c\u4e3a true \u65f6\uff0c\u4ec5\u5bfc\u51fa\u8d77\u59cb\u70b9 VID\u3001\u76ee\u7684\u70b9 VID \u548c Rank\uff0c\u800c\u4e0d\u5bfc\u51fa\u5c5e\u6027\u6570\u636e\uff1b\u5f53\u503c\u4e3a false \u65f6\u5bfc\u51fa\u8d77\u59cb\u70b9 VID\u3001\u76ee\u7684\u70b9 VID\u3001Rank \u548c\u5c5e\u6027\u6570\u636e\u3002 edges.return.fields list [] \u662f \u6307\u5b9a\u8981\u5bfc\u51fa\u7684\u5c5e\u6027\u3002\u4f8b\u5982\uff0c\u8981\u5bfc\u51fa start_year \u548c end_year \u5c5e\u6027\uff0c\u9700\u5c06\u53c2\u6570\u503c\u8bbe\u7f6e\u4e3a [\"start_year\",\"end_year\"] \u3002\u8be5\u53c2\u6570\u4ec5\u5728 edges.noField \u7684\u503c\u4e3a false \u65f6\u751f\u6548\u3002","title":"NebulaGraph\u6e90\u7279\u6709\u53c2\u6570"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-clickhouse/","text":"\u5bfc\u5165 ClickHouse \u6570\u636e \u00b6 \u672c\u6587\u4ee5\u4e00\u4e2a\u793a\u4f8b\u8bf4\u660e\u5982\u4f55\u4f7f\u7528 Exchange \u5c06\u5b58\u50a8\u5728 ClickHouse \u4e0a\u7684\u6570\u636e\u5bfc\u5165NebulaGraph\u3002 \u6570\u636e\u96c6 \u00b6 \u672c\u6587\u4ee5 basketballplayer \u6570\u636e\u96c6 \u4e3a\u4f8b\u3002 \u73af\u5883\u914d\u7f6e \u00b6 \u672c\u6587\u793a\u4f8b\u5728 MacOS \u4e0b\u5b8c\u6210\uff0c\u4ee5\u4e0b\u662f\u76f8\u5173\u7684\u73af\u5883\u914d\u7f6e\u4fe1\u606f\uff1a \u786c\u4ef6\u89c4\u683c\uff1a CPU\uff1a1.7 GHz Quad-Core Intel Core i7 \u5185\u5b58\uff1a16 GB Spark\uff1a2.4.7\uff0c\u5355\u673a\u7248 ClickHouse\uff1adocker \u90e8\u7f72 yandex/clickhouse-server tag: latest(2021.07.01) NebulaGraph\uff1a3.6.0\u3002 \u524d\u63d0\u6761\u4ef6 \u00b6 \u5f00\u59cb\u5bfc\u5165\u6570\u636e\u4e4b\u524d\uff0c\u7528\u6237\u9700\u8981\u786e\u8ba4\u4ee5\u4e0b\u4fe1\u606f\uff1a \u5df2\u7ecf \u5b89\u88c5\u90e8\u7f72NebulaGraph \u5e76\u83b7\u53d6\u5982\u4e0b\u4fe1\u606f\uff1a Graph \u670d\u52a1\u548c Meta \u670d\u52a1\u7684\u7684 IP \u5730\u5740\u548c\u7aef\u53e3\u3002 \u62e5\u6709NebulaGraph\u5199\u6743\u9650\u7684\u7528\u6237\u540d\u548c\u5bc6\u7801\u3002 \u5df2\u7ecf\u7f16\u8bd1 Exchange\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1 \u7f16\u8bd1 Exchange \u3002\u672c\u793a\u4f8b\u4e2d\u4f7f\u7528 Exchange 3.6.0\u3002 \u5df2\u7ecf\u5b89\u88c5 Spark\u3002 \u4e86\u89e3NebulaGraph\u4e2d\u521b\u5efa Schema \u7684\u4fe1\u606f\uff0c\u5305\u62ec Tag \u548c Edge type \u7684\u540d\u79f0\u3001\u5c5e\u6027\u7b49\u3002 \u64cd\u4f5c\u6b65\u9aa4 \u00b6 \u6b65\u9aa4 1\uff1a\u5728NebulaGraph\u4e2d\u521b\u5efa Schema \u00b6 \u5206\u6790\u6570\u636e\uff0c\u6309\u4ee5\u4e0b\u6b65\u9aa4\u5728NebulaGraph\u4e2d\u521b\u5efa Schema\uff1a \u786e\u8ba4 Schema \u8981\u7d20\u3002NebulaGraph\u4e2d\u7684 Schema \u8981\u7d20\u5982\u4e0b\u8868\u6240\u793a\u3002 \u8981\u7d20 \u540d\u79f0 \u5c5e\u6027 Tag player name string, age int Tag team name string Edge Type follow degree int Edge Type serve start_year int, end_year int \u5728NebulaGraph\u4e2d\u521b\u5efa\u4e00\u4e2a\u56fe\u7a7a\u95f4 basketballplayer \uff0c\u5e76\u521b\u5efa\u4e00\u4e2a Schema\uff0c\u5982\u4e0b\u6240\u793a\u3002 ## \u521b\u5efa\u56fe\u7a7a\u95f4 nebula> CREATE SPACE basketballplayer \\ (partition_num = 10, \\ replica_factor = 1, \\ vid_type = FIXED_STRING(30)); ## \u9009\u62e9\u56fe\u7a7a\u95f4 basketballplayer nebula> USE basketballplayer; ## \u521b\u5efa Tag player nebula> CREATE TAG player(name string, age int); ## \u521b\u5efa Tag team nebula> CREATE TAG team(name string); ## \u521b\u5efa Edge type follow nebula> CREATE EDGE follow(degree int); ## \u521b\u5efa Edge type serve nebula> CREATE EDGE serve(start_year int, end_year int); \u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u89c1 \u5feb\u901f\u5f00\u59cb \u3002 \u6b65\u9aa4 2\uff1a\u4fee\u6539\u914d\u7f6e\u6587\u4ef6 \u00b6 \u7f16\u8bd1 Exchange \u540e\uff0c\u590d\u5236 target/classes/application.conf \u6587\u4ef6\u8bbe\u7f6e ClickHouse \u6570\u636e\u6e90\u76f8\u5173\u7684\u914d\u7f6e\u3002\u5728\u672c\u793a\u4f8b\u4e2d\uff0c\u590d\u5236\u7684\u6587\u4ef6\u540d\u4e3a clickhouse_application.conf \u3002\u5404\u4e2a\u914d\u7f6e\u9879\u7684\u8be6\u7ec6\u8bf4\u660e\u8bf7\u53c2\u89c1 \u914d\u7f6e\u8bf4\u660e \u3002 { # Spark \u76f8\u5173\u914d\u7f6e spark: { app: { name: Nebula Exchange 3.6.0 } driver: { cores: 1 maxResultSize: 1G } cores: { max: 16 } } # NebulaGraph\u76f8\u5173\u914d\u7f6e nebula: { address:{ # \u4ee5\u4e0b\u4e3a NebulaGraph \u7684 Graph \u670d\u52a1\u548c Meta \u670d\u52a1\u6240\u5728\u673a\u5668\u7684 IP \u5730\u5740\u53ca\u7aef\u53e3\u3002 # \u5982\u679c\u6709\u591a\u4e2a\u5730\u5740\uff0c\u683c\u5f0f\u4e3a \"ip1:port\",\"ip2:port\",\"ip3:port\"\u3002 # \u4e0d\u540c\u5730\u5740\u4e4b\u95f4\u4ee5\u82f1\u6587\u9017\u53f7 (,) \u9694\u5f00\u3002 graph:[\"127.0.0.1:9669\"] #\u4efb\u610f\u4e00\u4e2a Meta \u670d\u52a1\u7684\u5730\u5740\u3002 #\u5982\u679c\u60a8\u7684 NebulaGraph \u5728\u865a\u62df\u7f51\u7edc\u4e2d\uff0c\u5982k8s\uff0c\u8bf7\u914d\u7f6e Leader Meta\u7684\u5730\u5740\u3002 meta:[\"127.0.0.1:9559\"] } # \u586b\u5199\u7684\u8d26\u53f7\u5fc5\u987b\u62e5\u6709 NebulaGraph \u76f8\u5e94\u56fe\u7a7a\u95f4\u7684\u5199\u6570\u636e\u6743\u9650\u3002 user: root pswd: nebula # \u586b\u5199 NebulaGraph \u4e2d\u9700\u8981\u5199\u5165\u6570\u636e\u7684\u56fe\u7a7a\u95f4\u540d\u79f0\u3002 space: basketballplayer connection: { timeout: 3000 retry: 3 } execution: { retry: 3 } error: { max: 32 output: /tmp/errors } rate: { limit: 1024 timeout: 1000 } } # \u5904\u7406\u70b9 tags: [ # \u8bbe\u7f6e Tag player \u76f8\u5173\u4fe1\u606f\u3002 { name: player type: { # \u6307\u5b9a\u6570\u636e\u6e90\u6587\u4ef6\u683c\u5f0f\uff0c\u8bbe\u7f6e\u4e3a ClickHouse\u3002 source: clickhouse # \u6307\u5b9a\u5982\u4f55\u5c06\u70b9\u6570\u636e\u5bfc\u5165NebulaGraph\uff1aClient \u6216 SST\u3002 sink: client } # ClickHouse \u7684 JDBC URL url:\"jdbc:clickhouse://192.168.*.*:8123/basketballplayer\" user:\"user\" password:\"123456\" # ClickHouse \u5206\u533a\u6570 numPartition:\"5\" table:\"player\" sentence:\"select * from player\" # \u5728 fields \u91cc\u6307\u5b9a player \u8868\u4e2d\u7684\u5217\u540d\u79f0\uff0c\u5176\u5bf9\u5e94\u7684 value \u4f1a\u4f5c\u4e3aNebulaGraph\u4e2d\u6307\u5b9a\u5c5e\u6027\u3002 # fields \u548c nebula.fields \u91cc\u7684\u914d\u7f6e\u5fc5\u987b\u4e00\u4e00\u5bf9\u5e94\u3002 # \u5982\u679c\u9700\u8981\u6307\u5b9a\u591a\u4e2a\u5217\u540d\u79f0\uff0c\u7528\u82f1\u6587\u9017\u53f7\uff08,\uff09\u9694\u5f00\u3002 fields: [name,age] nebula.fields: [name,age] # \u6307\u5b9a\u8868\u4e2d\u67d0\u4e00\u5217\u6570\u636e\u4e3aNebulaGraph\u4e2d\u70b9 VID \u7684\u6765\u6e90\u3002 vertex: { field:playerid # udf:{ # separator:\"_\" # oldColNames:[field-0,field-1,field-2] # newColName:new-field # } # \u4e3a VID \u589e\u52a0\u6307\u5b9a\u7684\u524d\u7f00\u3002\u4f8b\u5982 VID \u4e3a 12345\uff0c\u589e\u52a0\u524d\u7f00 tag1 \u540e\u4e3a tag1_12345\u3002\u4e0b\u5212\u7ebf\u65e0\u6cd5\u4fee\u6539\u3002 # prefix:\"tag1\" # \u5bf9 string \u7c7b\u578b\u7684 VID \u8fdb\u884c\u54c8\u5e0c\u5316\u64cd\u4f5c\u3002 # policy:hash } # \u6279\u91cf\u64cd\u4f5c\u7c7b\u578b\uff0c\u5305\u62ec INSERT\u3001UPDATE \u548c DELETE\u3002\u9ed8\u8ba4\u4e3a INSERT\u3002 #writeMode: INSERT # \u6279\u91cf\u5220\u9664\u65f6\u662f\u5426\u5220\u9664\u8be5\u70b9\u5173\u8054\u7684\u51fa\u8fb9\u548c\u5165\u8fb9\u3002`writeMode`\u4e3a`DELETE`\u65f6\u8be5\u53c2\u6570\u751f\u6548\u3002 #deleteEdge: false # \u5355\u6279\u6b21\u5199\u5165NebulaGraph\u7684\u6570\u636e\u6761\u6570\u3002 batch: 256 # Spark \u5206\u533a\u6570\u91cf partition: 32 } # \u8bbe\u7f6e Tag team \u76f8\u5173\u4fe1\u606f\u3002 { name: team type: { source: clickhouse sink: client } url:\"jdbc:clickhouse://192.168.*.*:8123/basketballplayer\" user:\"user\" password:\"123456\" numPartition:\"5\" table:\"team\" sentence:\"select * from team\" fields: [name] nebula.fields: [name] vertex: { field:teamid } batch: 256 partition: 32 } ] # \u5904\u7406\u8fb9\u6570\u636e edges: [ # \u8bbe\u7f6e Edge type follow \u76f8\u5173\u4fe1\u606f { # NebulaGraph\u4e2d\u5bf9\u5e94\u7684 Edge type \u540d\u79f0\u3002 name: follow type: { # \u6307\u5b9a\u6570\u636e\u6e90\u6587\u4ef6\u683c\u5f0f\uff0c\u8bbe\u7f6e\u4e3a ClickHouse\u3002 source: clickhouse # \u6307\u5b9a\u8fb9\u6570\u636e\u5bfc\u5165NebulaGraph\u7684\u65b9\u5f0f\uff0c # \u6307\u5b9a\u5982\u4f55\u5c06\u70b9\u6570\u636e\u5bfc\u5165NebulaGraph\uff1aClient \u6216 SST\u3002 sink: client } # ClickHouse \u7684 JDBC URL url:\"jdbc:clickhouse://192.168.*.*:8123/basketballplayer\" user:\"user\" password:\"123456\" # ClickHouse \u5206\u533a\u6570 numPartition:\"5\" table:\"follow\" sentence:\"select * from follow\" # \u5728 fields \u91cc\u6307\u5b9a follow \u8868\u4e2d\u7684\u5217\u540d\u79f0\uff0c\u5176\u5bf9\u5e94\u7684 value \u4f1a\u4f5c\u4e3aNebulaGraph\u4e2d\u6307\u5b9a\u5c5e\u6027\u3002 # fields \u548c nebula.fields \u91cc\u7684\u914d\u7f6e\u5fc5\u987b\u4e00\u4e00\u5bf9\u5e94\u3002 # \u5982\u679c\u9700\u8981\u6307\u5b9a\u591a\u4e2a\u5217\u540d\u79f0\uff0c\u7528\u82f1\u6587\u9017\u53f7\uff08,\uff09\u9694\u5f00\u3002 fields: [degree] nebula.fields: [degree] # \u5728 source \u91cc\uff0c\u5c06 follow \u8868\u4e2d\u67d0\u4e00\u5217\u4f5c\u4e3a\u8fb9\u7684\u8d77\u59cb\u70b9\u6570\u636e\u6e90\u3002 source: { field:src_player # udf:{ # separator:\"_\" # oldColNames:[field-0,field-1,field-2] # newColName:new-field # } # \u4e3a VID \u589e\u52a0\u6307\u5b9a\u7684\u524d\u7f00\u3002\u4f8b\u5982 VID \u4e3a 12345\uff0c\u589e\u52a0\u524d\u7f00 tag1 \u540e\u4e3a tag1_12345\u3002\u4e0b\u5212\u7ebf\u65e0\u6cd5\u4fee\u6539\u3002 # prefix:\"tag1\" # \u5bf9 string \u7c7b\u578b\u7684 VID \u8fdb\u884c\u54c8\u5e0c\u5316\u64cd\u4f5c\u3002 # policy:hash } # \u5728 target \u91cc\uff0c\u5c06 follow \u8868\u4e2d\u67d0\u4e00\u5217\u4f5c\u4e3a\u8fb9\u7684\u76ee\u7684\u70b9\u6570\u636e\u6e90\u3002 target: { field:dst_player # udf:{ # separator:\"_\" # oldColNames:[field-0,field-1,field-2] # newColName:new-field # } # \u4e3a VID \u589e\u52a0\u6307\u5b9a\u7684\u524d\u7f00\u3002\u4f8b\u5982 VID \u4e3a 12345\uff0c\u589e\u52a0\u524d\u7f00 tag1 \u540e\u4e3a tag1_12345\u3002\u4e0b\u5212\u7ebf\u65e0\u6cd5\u4fee\u6539\u3002 # prefix:\"tag1\" # \u5bf9 string \u7c7b\u578b\u7684 VID \u8fdb\u884c\u54c8\u5e0c\u5316\u64cd\u4f5c\u3002 # policy:hash } # \u6307\u5b9a\u4e00\u4e2a\u5217\u4f5c\u4e3a rank \u7684\u6e90\uff08\u53ef\u9009\uff09\u3002 #ranking: rank # \u6279\u91cf\u64cd\u4f5c\u7c7b\u578b\uff0c\u5305\u62ec INSERT\u3001UPDATE \u548c DELETE\u3002\u9ed8\u8ba4\u4e3a INSERT\u3002 #writeMode: INSERT # \u5355\u6279\u6b21\u5199\u5165NebulaGraph\u7684\u6570\u636e\u6761\u6570\u3002 batch: 256 # Spark \u5206\u533a\u6570\u91cf partition: 32 } # \u8bbe\u7f6e Edge type serve \u76f8\u5173\u4fe1\u606f { name: serve type: { source: clickhouse sink: client } url:\"jdbc:clickhouse://192.168.*.*:8123/basketballplayer\" user:\"user\" password:\"123456\" numPartition:\"5\" sentence:\"select * from serve\" fields: [start_year,end_year] nebula.fields: [start_year,end_year] source: { field:playerid } target: { field:teamid } # \u6307\u5b9a\u4e00\u4e2a\u5217\u4f5c\u4e3a rank \u7684\u6e90\uff08\u53ef\u9009\uff09\u3002 #ranking: rank batch: 256 partition: 32 } ] } \u6b65\u9aa4 3\uff1a\u5411NebulaGraph\u5bfc\u5165\u6570\u636e \u00b6 \u8fd0\u884c\u5982\u4e0b\u547d\u4ee4\u5c06 ClickHouse \u6570\u636e\u5bfc\u5165\u5230NebulaGraph\u4e2d\u3002\u5173\u4e8e\u53c2\u6570\u7684\u8bf4\u660e\uff0c\u8bf7\u53c2\u89c1 \u5bfc\u5165\u547d\u4ee4\u53c2\u6570 \u3002 ${ SPARK_HOME } /bin/spark-submit --master \"local\" --class com.vesoft.nebula.exchange.Exchange <nebula-exchange-3.6.0.jar_path> -c <clickhouse_application.conf_path> Note JAR \u5305\u6709\u4e24\u79cd\u83b7\u53d6\u65b9\u5f0f\uff1a \u81ea\u884c\u7f16\u8bd1 \u6216\u8005\u4ece maven \u4ed3\u5e93\u4e0b\u8f7d\u3002 \u793a\u4f8b\uff1a ${ SPARK_HOME } /bin/spark-submit --master \"local\" --class com.vesoft.nebula.exchange.Exchange /root/nebula-exchange/nebula-exchange/target/nebula-exchange-3.6.0.jar -c /root/nebula-exchange/nebula-exchange/target/classes/clickhouse_application.conf \u7528\u6237\u53ef\u4ee5\u5728\u8fd4\u56de\u4fe1\u606f\u4e2d\u641c\u7d22 batchSuccess.<tag_name/edge_name> \uff0c\u786e\u8ba4\u6210\u529f\u7684\u6570\u91cf\u3002\u4f8b\u5982 batchSuccess.follow: 300 \u3002 \u6b65\u9aa4 4\uff1a\uff08\u53ef\u9009\uff09\u9a8c\u8bc1\u6570\u636e \u00b6 \u7528\u6237\u53ef\u4ee5\u5728NebulaGraph\u5ba2\u6237\u7aef\uff08\u4f8b\u5982 NebulaGraph Studio\uff09\u4e2d\u6267\u884c\u67e5\u8be2\u8bed\u53e5\uff0c\u786e\u8ba4\u6570\u636e\u662f\u5426\u5df2\u5bfc\u5165\u3002\u4f8b\u5982\uff1a LOOKUP ON player YIELD id(vertex); \u7528\u6237\u4e5f\u53ef\u4ee5\u4f7f\u7528\u547d\u4ee4 SHOW STATS \u67e5\u770b\u7edf\u8ba1\u6570\u636e\u3002 \u6b65\u9aa4 5\uff1a\uff08\u5982\u6709\uff09\u5728NebulaGraph\u4e2d\u91cd\u5efa\u7d22\u5f15 \u00b6 \u5bfc\u5165\u6570\u636e\u540e\uff0c\u7528\u6237\u53ef\u4ee5\u5728NebulaGraph\u4e2d\u91cd\u65b0\u521b\u5efa\u5e76\u91cd\u5efa\u7d22\u5f15\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1 \u7d22\u5f15\u4ecb\u7ecd \u3002","title":"\u5bfc\u5165 ClickHouse \u6570\u636e"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-clickhouse/#clickhouse","text":"\u672c\u6587\u4ee5\u4e00\u4e2a\u793a\u4f8b\u8bf4\u660e\u5982\u4f55\u4f7f\u7528 Exchange \u5c06\u5b58\u50a8\u5728 ClickHouse \u4e0a\u7684\u6570\u636e\u5bfc\u5165NebulaGraph\u3002","title":"\u5bfc\u5165 ClickHouse \u6570\u636e"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-clickhouse/#_1","text":"\u672c\u6587\u4ee5 basketballplayer \u6570\u636e\u96c6 \u4e3a\u4f8b\u3002","title":"\u6570\u636e\u96c6"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-clickhouse/#_2","text":"\u672c\u6587\u793a\u4f8b\u5728 MacOS \u4e0b\u5b8c\u6210\uff0c\u4ee5\u4e0b\u662f\u76f8\u5173\u7684\u73af\u5883\u914d\u7f6e\u4fe1\u606f\uff1a \u786c\u4ef6\u89c4\u683c\uff1a CPU\uff1a1.7 GHz Quad-Core Intel Core i7 \u5185\u5b58\uff1a16 GB Spark\uff1a2.4.7\uff0c\u5355\u673a\u7248 ClickHouse\uff1adocker \u90e8\u7f72 yandex/clickhouse-server tag: latest(2021.07.01) NebulaGraph\uff1a3.6.0\u3002","title":"\u73af\u5883\u914d\u7f6e"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-clickhouse/#_3","text":"\u5f00\u59cb\u5bfc\u5165\u6570\u636e\u4e4b\u524d\uff0c\u7528\u6237\u9700\u8981\u786e\u8ba4\u4ee5\u4e0b\u4fe1\u606f\uff1a \u5df2\u7ecf \u5b89\u88c5\u90e8\u7f72NebulaGraph \u5e76\u83b7\u53d6\u5982\u4e0b\u4fe1\u606f\uff1a Graph \u670d\u52a1\u548c Meta \u670d\u52a1\u7684\u7684 IP \u5730\u5740\u548c\u7aef\u53e3\u3002 \u62e5\u6709NebulaGraph\u5199\u6743\u9650\u7684\u7528\u6237\u540d\u548c\u5bc6\u7801\u3002 \u5df2\u7ecf\u7f16\u8bd1 Exchange\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1 \u7f16\u8bd1 Exchange \u3002\u672c\u793a\u4f8b\u4e2d\u4f7f\u7528 Exchange 3.6.0\u3002 \u5df2\u7ecf\u5b89\u88c5 Spark\u3002 \u4e86\u89e3NebulaGraph\u4e2d\u521b\u5efa Schema \u7684\u4fe1\u606f\uff0c\u5305\u62ec Tag \u548c Edge type \u7684\u540d\u79f0\u3001\u5c5e\u6027\u7b49\u3002","title":"\u524d\u63d0\u6761\u4ef6"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-clickhouse/#_4","text":"","title":"\u64cd\u4f5c\u6b65\u9aa4"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-clickhouse/#1nebulagraph_schema","text":"\u5206\u6790\u6570\u636e\uff0c\u6309\u4ee5\u4e0b\u6b65\u9aa4\u5728NebulaGraph\u4e2d\u521b\u5efa Schema\uff1a \u786e\u8ba4 Schema \u8981\u7d20\u3002NebulaGraph\u4e2d\u7684 Schema \u8981\u7d20\u5982\u4e0b\u8868\u6240\u793a\u3002 \u8981\u7d20 \u540d\u79f0 \u5c5e\u6027 Tag player name string, age int Tag team name string Edge Type follow degree int Edge Type serve start_year int, end_year int \u5728NebulaGraph\u4e2d\u521b\u5efa\u4e00\u4e2a\u56fe\u7a7a\u95f4 basketballplayer \uff0c\u5e76\u521b\u5efa\u4e00\u4e2a Schema\uff0c\u5982\u4e0b\u6240\u793a\u3002 ## \u521b\u5efa\u56fe\u7a7a\u95f4 nebula> CREATE SPACE basketballplayer \\ (partition_num = 10, \\ replica_factor = 1, \\ vid_type = FIXED_STRING(30)); ## \u9009\u62e9\u56fe\u7a7a\u95f4 basketballplayer nebula> USE basketballplayer; ## \u521b\u5efa Tag player nebula> CREATE TAG player(name string, age int); ## \u521b\u5efa Tag team nebula> CREATE TAG team(name string); ## \u521b\u5efa Edge type follow nebula> CREATE EDGE follow(degree int); ## \u521b\u5efa Edge type serve nebula> CREATE EDGE serve(start_year int, end_year int); \u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u89c1 \u5feb\u901f\u5f00\u59cb \u3002","title":"\u6b65\u9aa4 1\uff1a\u5728NebulaGraph\u4e2d\u521b\u5efa Schema"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-clickhouse/#2","text":"\u7f16\u8bd1 Exchange \u540e\uff0c\u590d\u5236 target/classes/application.conf \u6587\u4ef6\u8bbe\u7f6e ClickHouse \u6570\u636e\u6e90\u76f8\u5173\u7684\u914d\u7f6e\u3002\u5728\u672c\u793a\u4f8b\u4e2d\uff0c\u590d\u5236\u7684\u6587\u4ef6\u540d\u4e3a clickhouse_application.conf \u3002\u5404\u4e2a\u914d\u7f6e\u9879\u7684\u8be6\u7ec6\u8bf4\u660e\u8bf7\u53c2\u89c1 \u914d\u7f6e\u8bf4\u660e \u3002 { # Spark \u76f8\u5173\u914d\u7f6e spark: { app: { name: Nebula Exchange 3.6.0 } driver: { cores: 1 maxResultSize: 1G } cores: { max: 16 } } # NebulaGraph\u76f8\u5173\u914d\u7f6e nebula: { address:{ # \u4ee5\u4e0b\u4e3a NebulaGraph \u7684 Graph \u670d\u52a1\u548c Meta \u670d\u52a1\u6240\u5728\u673a\u5668\u7684 IP \u5730\u5740\u53ca\u7aef\u53e3\u3002 # \u5982\u679c\u6709\u591a\u4e2a\u5730\u5740\uff0c\u683c\u5f0f\u4e3a \"ip1:port\",\"ip2:port\",\"ip3:port\"\u3002 # \u4e0d\u540c\u5730\u5740\u4e4b\u95f4\u4ee5\u82f1\u6587\u9017\u53f7 (,) \u9694\u5f00\u3002 graph:[\"127.0.0.1:9669\"] #\u4efb\u610f\u4e00\u4e2a Meta \u670d\u52a1\u7684\u5730\u5740\u3002 #\u5982\u679c\u60a8\u7684 NebulaGraph \u5728\u865a\u62df\u7f51\u7edc\u4e2d\uff0c\u5982k8s\uff0c\u8bf7\u914d\u7f6e Leader Meta\u7684\u5730\u5740\u3002 meta:[\"127.0.0.1:9559\"] } # \u586b\u5199\u7684\u8d26\u53f7\u5fc5\u987b\u62e5\u6709 NebulaGraph \u76f8\u5e94\u56fe\u7a7a\u95f4\u7684\u5199\u6570\u636e\u6743\u9650\u3002 user: root pswd: nebula # \u586b\u5199 NebulaGraph \u4e2d\u9700\u8981\u5199\u5165\u6570\u636e\u7684\u56fe\u7a7a\u95f4\u540d\u79f0\u3002 space: basketballplayer connection: { timeout: 3000 retry: 3 } execution: { retry: 3 } error: { max: 32 output: /tmp/errors } rate: { limit: 1024 timeout: 1000 } } # \u5904\u7406\u70b9 tags: [ # \u8bbe\u7f6e Tag player \u76f8\u5173\u4fe1\u606f\u3002 { name: player type: { # \u6307\u5b9a\u6570\u636e\u6e90\u6587\u4ef6\u683c\u5f0f\uff0c\u8bbe\u7f6e\u4e3a ClickHouse\u3002 source: clickhouse # \u6307\u5b9a\u5982\u4f55\u5c06\u70b9\u6570\u636e\u5bfc\u5165NebulaGraph\uff1aClient \u6216 SST\u3002 sink: client } # ClickHouse \u7684 JDBC URL url:\"jdbc:clickhouse://192.168.*.*:8123/basketballplayer\" user:\"user\" password:\"123456\" # ClickHouse \u5206\u533a\u6570 numPartition:\"5\" table:\"player\" sentence:\"select * from player\" # \u5728 fields \u91cc\u6307\u5b9a player \u8868\u4e2d\u7684\u5217\u540d\u79f0\uff0c\u5176\u5bf9\u5e94\u7684 value \u4f1a\u4f5c\u4e3aNebulaGraph\u4e2d\u6307\u5b9a\u5c5e\u6027\u3002 # fields \u548c nebula.fields \u91cc\u7684\u914d\u7f6e\u5fc5\u987b\u4e00\u4e00\u5bf9\u5e94\u3002 # \u5982\u679c\u9700\u8981\u6307\u5b9a\u591a\u4e2a\u5217\u540d\u79f0\uff0c\u7528\u82f1\u6587\u9017\u53f7\uff08,\uff09\u9694\u5f00\u3002 fields: [name,age] nebula.fields: [name,age] # \u6307\u5b9a\u8868\u4e2d\u67d0\u4e00\u5217\u6570\u636e\u4e3aNebulaGraph\u4e2d\u70b9 VID \u7684\u6765\u6e90\u3002 vertex: { field:playerid # udf:{ # separator:\"_\" # oldColNames:[field-0,field-1,field-2] # newColName:new-field # } # \u4e3a VID \u589e\u52a0\u6307\u5b9a\u7684\u524d\u7f00\u3002\u4f8b\u5982 VID \u4e3a 12345\uff0c\u589e\u52a0\u524d\u7f00 tag1 \u540e\u4e3a tag1_12345\u3002\u4e0b\u5212\u7ebf\u65e0\u6cd5\u4fee\u6539\u3002 # prefix:\"tag1\" # \u5bf9 string \u7c7b\u578b\u7684 VID \u8fdb\u884c\u54c8\u5e0c\u5316\u64cd\u4f5c\u3002 # policy:hash } # \u6279\u91cf\u64cd\u4f5c\u7c7b\u578b\uff0c\u5305\u62ec INSERT\u3001UPDATE \u548c DELETE\u3002\u9ed8\u8ba4\u4e3a INSERT\u3002 #writeMode: INSERT # \u6279\u91cf\u5220\u9664\u65f6\u662f\u5426\u5220\u9664\u8be5\u70b9\u5173\u8054\u7684\u51fa\u8fb9\u548c\u5165\u8fb9\u3002`writeMode`\u4e3a`DELETE`\u65f6\u8be5\u53c2\u6570\u751f\u6548\u3002 #deleteEdge: false # \u5355\u6279\u6b21\u5199\u5165NebulaGraph\u7684\u6570\u636e\u6761\u6570\u3002 batch: 256 # Spark \u5206\u533a\u6570\u91cf partition: 32 } # \u8bbe\u7f6e Tag team \u76f8\u5173\u4fe1\u606f\u3002 { name: team type: { source: clickhouse sink: client } url:\"jdbc:clickhouse://192.168.*.*:8123/basketballplayer\" user:\"user\" password:\"123456\" numPartition:\"5\" table:\"team\" sentence:\"select * from team\" fields: [name] nebula.fields: [name] vertex: { field:teamid } batch: 256 partition: 32 } ] # \u5904\u7406\u8fb9\u6570\u636e edges: [ # \u8bbe\u7f6e Edge type follow \u76f8\u5173\u4fe1\u606f { # NebulaGraph\u4e2d\u5bf9\u5e94\u7684 Edge type \u540d\u79f0\u3002 name: follow type: { # \u6307\u5b9a\u6570\u636e\u6e90\u6587\u4ef6\u683c\u5f0f\uff0c\u8bbe\u7f6e\u4e3a ClickHouse\u3002 source: clickhouse # \u6307\u5b9a\u8fb9\u6570\u636e\u5bfc\u5165NebulaGraph\u7684\u65b9\u5f0f\uff0c # \u6307\u5b9a\u5982\u4f55\u5c06\u70b9\u6570\u636e\u5bfc\u5165NebulaGraph\uff1aClient \u6216 SST\u3002 sink: client } # ClickHouse \u7684 JDBC URL url:\"jdbc:clickhouse://192.168.*.*:8123/basketballplayer\" user:\"user\" password:\"123456\" # ClickHouse \u5206\u533a\u6570 numPartition:\"5\" table:\"follow\" sentence:\"select * from follow\" # \u5728 fields \u91cc\u6307\u5b9a follow \u8868\u4e2d\u7684\u5217\u540d\u79f0\uff0c\u5176\u5bf9\u5e94\u7684 value \u4f1a\u4f5c\u4e3aNebulaGraph\u4e2d\u6307\u5b9a\u5c5e\u6027\u3002 # fields \u548c nebula.fields \u91cc\u7684\u914d\u7f6e\u5fc5\u987b\u4e00\u4e00\u5bf9\u5e94\u3002 # \u5982\u679c\u9700\u8981\u6307\u5b9a\u591a\u4e2a\u5217\u540d\u79f0\uff0c\u7528\u82f1\u6587\u9017\u53f7\uff08,\uff09\u9694\u5f00\u3002 fields: [degree] nebula.fields: [degree] # \u5728 source \u91cc\uff0c\u5c06 follow \u8868\u4e2d\u67d0\u4e00\u5217\u4f5c\u4e3a\u8fb9\u7684\u8d77\u59cb\u70b9\u6570\u636e\u6e90\u3002 source: { field:src_player # udf:{ # separator:\"_\" # oldColNames:[field-0,field-1,field-2] # newColName:new-field # } # \u4e3a VID \u589e\u52a0\u6307\u5b9a\u7684\u524d\u7f00\u3002\u4f8b\u5982 VID \u4e3a 12345\uff0c\u589e\u52a0\u524d\u7f00 tag1 \u540e\u4e3a tag1_12345\u3002\u4e0b\u5212\u7ebf\u65e0\u6cd5\u4fee\u6539\u3002 # prefix:\"tag1\" # \u5bf9 string \u7c7b\u578b\u7684 VID \u8fdb\u884c\u54c8\u5e0c\u5316\u64cd\u4f5c\u3002 # policy:hash } # \u5728 target \u91cc\uff0c\u5c06 follow \u8868\u4e2d\u67d0\u4e00\u5217\u4f5c\u4e3a\u8fb9\u7684\u76ee\u7684\u70b9\u6570\u636e\u6e90\u3002 target: { field:dst_player # udf:{ # separator:\"_\" # oldColNames:[field-0,field-1,field-2] # newColName:new-field # } # \u4e3a VID \u589e\u52a0\u6307\u5b9a\u7684\u524d\u7f00\u3002\u4f8b\u5982 VID \u4e3a 12345\uff0c\u589e\u52a0\u524d\u7f00 tag1 \u540e\u4e3a tag1_12345\u3002\u4e0b\u5212\u7ebf\u65e0\u6cd5\u4fee\u6539\u3002 # prefix:\"tag1\" # \u5bf9 string \u7c7b\u578b\u7684 VID \u8fdb\u884c\u54c8\u5e0c\u5316\u64cd\u4f5c\u3002 # policy:hash } # \u6307\u5b9a\u4e00\u4e2a\u5217\u4f5c\u4e3a rank \u7684\u6e90\uff08\u53ef\u9009\uff09\u3002 #ranking: rank # \u6279\u91cf\u64cd\u4f5c\u7c7b\u578b\uff0c\u5305\u62ec INSERT\u3001UPDATE \u548c DELETE\u3002\u9ed8\u8ba4\u4e3a INSERT\u3002 #writeMode: INSERT # \u5355\u6279\u6b21\u5199\u5165NebulaGraph\u7684\u6570\u636e\u6761\u6570\u3002 batch: 256 # Spark \u5206\u533a\u6570\u91cf partition: 32 } # \u8bbe\u7f6e Edge type serve \u76f8\u5173\u4fe1\u606f { name: serve type: { source: clickhouse sink: client } url:\"jdbc:clickhouse://192.168.*.*:8123/basketballplayer\" user:\"user\" password:\"123456\" numPartition:\"5\" sentence:\"select * from serve\" fields: [start_year,end_year] nebula.fields: [start_year,end_year] source: { field:playerid } target: { field:teamid } # \u6307\u5b9a\u4e00\u4e2a\u5217\u4f5c\u4e3a rank \u7684\u6e90\uff08\u53ef\u9009\uff09\u3002 #ranking: rank batch: 256 partition: 32 } ] }","title":"\u6b65\u9aa4 2\uff1a\u4fee\u6539\u914d\u7f6e\u6587\u4ef6"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-clickhouse/#3nebulagraph","text":"\u8fd0\u884c\u5982\u4e0b\u547d\u4ee4\u5c06 ClickHouse \u6570\u636e\u5bfc\u5165\u5230NebulaGraph\u4e2d\u3002\u5173\u4e8e\u53c2\u6570\u7684\u8bf4\u660e\uff0c\u8bf7\u53c2\u89c1 \u5bfc\u5165\u547d\u4ee4\u53c2\u6570 \u3002 ${ SPARK_HOME } /bin/spark-submit --master \"local\" --class com.vesoft.nebula.exchange.Exchange <nebula-exchange-3.6.0.jar_path> -c <clickhouse_application.conf_path> Note JAR \u5305\u6709\u4e24\u79cd\u83b7\u53d6\u65b9\u5f0f\uff1a \u81ea\u884c\u7f16\u8bd1 \u6216\u8005\u4ece maven \u4ed3\u5e93\u4e0b\u8f7d\u3002 \u793a\u4f8b\uff1a ${ SPARK_HOME } /bin/spark-submit --master \"local\" --class com.vesoft.nebula.exchange.Exchange /root/nebula-exchange/nebula-exchange/target/nebula-exchange-3.6.0.jar -c /root/nebula-exchange/nebula-exchange/target/classes/clickhouse_application.conf \u7528\u6237\u53ef\u4ee5\u5728\u8fd4\u56de\u4fe1\u606f\u4e2d\u641c\u7d22 batchSuccess.<tag_name/edge_name> \uff0c\u786e\u8ba4\u6210\u529f\u7684\u6570\u91cf\u3002\u4f8b\u5982 batchSuccess.follow: 300 \u3002","title":"\u6b65\u9aa4 3\uff1a\u5411NebulaGraph\u5bfc\u5165\u6570\u636e"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-clickhouse/#4","text":"\u7528\u6237\u53ef\u4ee5\u5728NebulaGraph\u5ba2\u6237\u7aef\uff08\u4f8b\u5982 NebulaGraph Studio\uff09\u4e2d\u6267\u884c\u67e5\u8be2\u8bed\u53e5\uff0c\u786e\u8ba4\u6570\u636e\u662f\u5426\u5df2\u5bfc\u5165\u3002\u4f8b\u5982\uff1a LOOKUP ON player YIELD id(vertex); \u7528\u6237\u4e5f\u53ef\u4ee5\u4f7f\u7528\u547d\u4ee4 SHOW STATS \u67e5\u770b\u7edf\u8ba1\u6570\u636e\u3002","title":"\u6b65\u9aa4 4\uff1a\uff08\u53ef\u9009\uff09\u9a8c\u8bc1\u6570\u636e"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-clickhouse/#5nebulagraph","text":"\u5bfc\u5165\u6570\u636e\u540e\uff0c\u7528\u6237\u53ef\u4ee5\u5728NebulaGraph\u4e2d\u91cd\u65b0\u521b\u5efa\u5e76\u91cd\u5efa\u7d22\u5f15\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1 \u7d22\u5f15\u4ecb\u7ecd \u3002","title":"\u6b65\u9aa4 5\uff1a\uff08\u5982\u6709\uff09\u5728NebulaGraph\u4e2d\u91cd\u5efa\u7d22\u5f15"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-csv/","text":"\u5bfc\u5165 CSV \u6587\u4ef6\u6570\u636e \u00b6 \u672c\u6587\u4ee5\u4e00\u4e2a\u793a\u4f8b\u8bf4\u660e\u5982\u4f55\u4f7f\u7528 Exchange \u5c06\u5b58\u50a8\u5728 HDFS \u6216\u672c\u5730\u7684 CSV \u6587\u4ef6\u6570\u636e\u5bfc\u5165NebulaGraph\u3002 \u6570\u636e\u96c6 \u00b6 \u672c\u6587\u4ee5 basketballplayer \u6570\u636e\u96c6 \u4e3a\u4f8b\u3002 \u73af\u5883\u914d\u7f6e \u00b6 \u672c\u6587\u793a\u4f8b\u5728 MacOS \u4e0b\u5b8c\u6210\uff0c\u4ee5\u4e0b\u662f\u76f8\u5173\u7684\u73af\u5883\u914d\u7f6e\u4fe1\u606f\uff1a \u786c\u4ef6\u89c4\u683c\uff1a CPU\uff1a1.7 GHz Quad-Core Intel Core i7 \u5185\u5b58\uff1a16 GB Spark\uff1a2.4.7 \u5355\u673a\u7248 Hadoop\uff1a2.9.2 \u4f2a\u5206\u5e03\u5f0f\u90e8\u7f72 NebulaGraph\uff1a3.6.0\u3002 \u524d\u63d0\u6761\u4ef6 \u00b6 \u5f00\u59cb\u5bfc\u5165\u6570\u636e\u4e4b\u524d\uff0c\u7528\u6237\u9700\u8981\u786e\u8ba4\u4ee5\u4e0b\u4fe1\u606f\uff1a \u5df2\u7ecf \u5b89\u88c5\u90e8\u7f72NebulaGraph \u5e76\u83b7\u53d6\u5982\u4e0b\u4fe1\u606f\uff1a Graph \u670d\u52a1\u548c Meta \u670d\u52a1\u7684\u7684 IP \u5730\u5740\u548c\u7aef\u53e3\u3002 \u62e5\u6709NebulaGraph\u5199\u6743\u9650\u7684\u7528\u6237\u540d\u548c\u5bc6\u7801\u3002 \u5df2\u7ecf\u7f16\u8bd1 Exchange\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1 \u7f16\u8bd1 Exchange \u3002\u672c\u793a\u4f8b\u4e2d\u4f7f\u7528 Exchange 3.6.0\u3002 \u5df2\u7ecf\u5b89\u88c5 Spark\u3002 \u4e86\u89e3NebulaGraph\u4e2d\u521b\u5efa Schema \u7684\u4fe1\u606f\uff0c\u5305\u62ec Tag \u548c Edge type \u7684\u540d\u79f0\u3001\u5c5e\u6027\u7b49\u3002 \u5982\u679c\u6587\u4ef6\u5b58\u50a8\u5728 HDFS \u4e0a\uff0c\u9700\u8981\u786e\u8ba4 Hadoop \u670d\u52a1\u8fd0\u884c\u6b63\u5e38\u3002 \u5982\u679c\u6587\u4ef6\u5b58\u50a8\u5728\u672c\u5730\u4e14NebulaGraph\u662f\u96c6\u7fa4\u67b6\u6784\uff0c\u9700\u8981\u5728\u96c6\u7fa4\u6bcf\u53f0\u673a\u5668\u672c\u5730\u76f8\u540c\u76ee\u5f55\u4e0b\u653e\u7f6e\u6587\u4ef6\u3002 \u64cd\u4f5c\u6b65\u9aa4 \u00b6 \u6b65\u9aa4 1\uff1a\u5728NebulaGraph\u4e2d\u521b\u5efa Schema \u00b6 \u5206\u6790 CSV \u6587\u4ef6\u4e2d\u7684\u6570\u636e\uff0c\u6309\u4ee5\u4e0b\u6b65\u9aa4\u5728NebulaGraph\u4e2d\u521b\u5efa Schema\uff1a \u786e\u8ba4 Schema \u8981\u7d20\u3002NebulaGraph\u4e2d\u7684 Schema \u8981\u7d20\u5982\u4e0b\u8868\u6240\u793a\u3002 \u8981\u7d20 \u540d\u79f0 \u5c5e\u6027 Tag player name string, age int Tag team name string Edge Type follow degree int Edge Type serve start_year int, end_year int \u4f7f\u7528NebulaGraphConsole \u521b\u5efa\u4e00\u4e2a\u56fe\u7a7a\u95f4 basketballplayer \uff0c\u5e76\u521b\u5efa\u4e00\u4e2a Schema\uff0c\u5982\u4e0b\u6240\u793a\u3002 ## \u521b\u5efa\u56fe\u7a7a\u95f4 nebula> CREATE SPACE basketballplayer \\ (partition_num = 10, \\ replica_factor = 1, \\ vid_type = FIXED_STRING(30)); ## \u9009\u62e9\u56fe\u7a7a\u95f4 basketballplayer nebula> USE basketballplayer; ## \u521b\u5efa Tag player nebula> CREATE TAG player(name string, age int); ## \u521b\u5efa Tag team nebula> CREATE TAG team(name string); ## \u521b\u5efa Edge type follow nebula> CREATE EDGE follow(degree int); ## \u521b\u5efa Edge type serve nebula> CREATE EDGE serve(start_year int, end_year int); \u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u89c1 \u5feb\u901f\u5f00\u59cb \u3002 \u6b65\u9aa4 2\uff1a\u5904\u7406 CSV \u6587\u4ef6 \u00b6 \u786e\u8ba4\u4ee5\u4e0b\u4fe1\u606f\uff1a \u5904\u7406 CSV \u6587\u4ef6\u4ee5\u6ee1\u8db3 Schema \u7684\u8981\u6c42\u3002 Note Exchange \u652f\u6301\u4e0a\u4f20\u6709\u8868\u5934\u6216\u8005\u65e0\u8868\u5934\u7684 CSV \u6587\u4ef6\u3002 \u83b7\u53d6 CSV \u6587\u4ef6\u5b58\u50a8\u8def\u5f84\u3002 \u6b65\u9aa4 3\uff1a\u4fee\u6539\u914d\u7f6e\u6587\u4ef6 \u00b6 \u7f16\u8bd1 Exchange \u540e\uff0c\u590d\u5236 target/classes/application.conf \u6587\u4ef6\u8bbe\u7f6e CSV \u6570\u636e\u6e90\u76f8\u5173\u7684\u914d\u7f6e\u3002\u5728\u672c\u793a\u4f8b\u4e2d\uff0c\u590d\u5236\u7684\u6587\u4ef6\u540d\u4e3a csv_application.conf \u3002\u5404\u4e2a\u914d\u7f6e\u9879\u7684\u8be6\u7ec6\u8bf4\u660e\u8bf7\u53c2\u89c1 \u914d\u7f6e\u8bf4\u660e \u3002 { # Spark \u76f8\u5173\u914d\u7f6e spark: { app: { name: NebulaGraph Exchange 3.6.0 } driver: { cores: 1 maxResultSize: 1G } executor: { memory:1G } cores: { max: 16 } } # NebulaGraph \u76f8\u5173\u914d\u7f6e nebula: { address:{ # \u6307\u5b9a Graph \u670d\u52a1\u548c\u6240\u6709 Meta \u670d\u52a1\u7684 IP \u5730\u5740\u548c\u7aef\u53e3\u3002 # \u5982\u679c\u6709\u591a\u53f0\u670d\u52a1\u5668\uff0c\u5730\u5740\u4e4b\u95f4\u7528\u82f1\u6587\u9017\u53f7\uff08,\uff09\u5206\u9694\u3002 # \u683c\u5f0f\uff1a\"ip1:port\",\"ip2:port\",\"ip3:port\" graph:[\"127.0.0.1:9669\"] #\u4efb\u610f\u4e00\u4e2a Meta \u670d\u52a1\u7684\u5730\u5740\u3002 #\u5982\u679c\u60a8\u7684NebulaGraph\u5728\u865a\u62df\u7f51\u7edc\u4e2d\uff0c\u5982k8s\uff0c\u8bf7\u914d\u7f6e Leader Meta\u7684\u5730\u5740\u3002 meta:[\"127.0.0.1:9559\"] } # \u6307\u5b9a\u62e5\u6709NebulaGraph\u5199\u6743\u9650\u7684\u7528\u6237\u540d\u548c\u5bc6\u7801\u3002 user: root pswd: nebula # \u6307\u5b9a\u56fe\u7a7a\u95f4\u540d\u79f0\u3002 space: basketballplayer connection: { timeout: 3000 retry: 3 } execution: { retry: 3 } error: { max: 32 output: /tmp/errors } rate: { limit: 1024 timeout: 1000 } } # \u5904\u7406\u70b9 tags: [ # \u8bbe\u7f6e Tag player \u76f8\u5173\u4fe1\u606f\u3002 { # \u6307\u5b9aNebulaGraph\u4e2d\u5b9a\u4e49\u7684 Tag \u540d\u79f0\u3002 name: player type: { # \u6307\u5b9a\u6570\u636e\u6e90\uff0c\u4f7f\u7528 CSV\u3002 source: csv # \u6307\u5b9a\u5982\u4f55\u5c06\u70b9\u6570\u636e\u5bfc\u5165NebulaGraph\uff1aClient \u6216 SST\u3002 sink: client } # \u6307\u5b9a CSV \u6587\u4ef6\u7684\u8def\u5f84\u3002 # \u5982\u679c\u6587\u4ef6\u5b58\u50a8\u5728 HDFS \u4e0a\uff0c\u7528\u53cc\u5f15\u53f7\u62ec\u8d77\u8def\u5f84\uff0c\u4ee5 hdfs://\u5f00\u5934\uff0c\u4f8b\u5982\"hdfs://ip:port/xx/xx\"\u3002 # \u5982\u679c\u6587\u4ef6\u5b58\u50a8\u5728\u672c\u5730\uff0c\u7528\u53cc\u5f15\u53f7\u62ec\u8d77\u8def\u5f84\uff0c\u4ee5 file://\u5f00\u5934\uff0c\u4f8b\u5982\"file:///tmp/xx.csv\"\u3002 path: \"hdfs://192.168.*.*:9000/data/vertex_player.csv\" # \u5982\u679c CSV \u6587\u4ef6\u6ca1\u6709\u8868\u5934\uff0c\u4f7f\u7528 [_c0, _c1, _c2, ..., _cn] \u8868\u793a\u5176\u8868\u5934\uff0c\u5e76\u5c06\u5217\u6307\u793a\u4e3a\u5c5e\u6027\u503c\u7684\u6e90\u3002 # \u5982\u679c CSV \u6587\u4ef6\u6709\u8868\u5934\uff0c\u5219\u4f7f\u7528\u5b9e\u9645\u7684\u5217\u540d\u3002 fields: [_c1, _c2] # \u6307\u5b9aNebulaGraph\u4e2d\u5b9a\u4e49\u7684\u5c5e\u6027\u540d\u79f0\u3002 # fields \u4e0e nebula.fields \u7684\u987a\u5e8f\u5fc5\u987b\u4e00\u4e00\u5bf9\u5e94\u3002 nebula.fields: [age, name] # \u6307\u5b9a\u4e00\u4e2a\u5217\u4f5c\u4e3a VID \u7684\u6e90\u3002 # vertex \u7684\u503c\u5fc5\u987b\u4e0e\u4e0a\u8ff0 fields \u6216\u8005 csv.fields \u4e2d\u7684\u5217\u540d\u4fdd\u6301\u4e00\u81f4\u3002 # \u76ee\u524d\uff0cNebulaGraph 3.6.0\u4ec5\u652f\u6301\u5b57\u7b26\u4e32\u6216\u6574\u6570\u7c7b\u578b\u7684 VID\u3002 vertex: { field:_c0 # udf:{ # separator:\"_\" # oldColNames:[field-0,field-1,field-2] # newColName:new-field # } # \u4e3a VID \u589e\u52a0\u6307\u5b9a\u7684\u524d\u7f00\u3002\u4f8b\u5982 VID \u4e3a 12345\uff0c\u589e\u52a0\u524d\u7f00 tag1 \u540e\u4e3a tag1_12345\u3002\u4e0b\u5212\u7ebf\u65e0\u6cd5\u4fee\u6539\u3002 # prefix:\"tag1\" # \u5bf9 string \u7c7b\u578b\u7684 VID \u8fdb\u884c\u54c8\u5e0c\u5316\u64cd\u4f5c\u3002 # policy:hash } # \u6307\u5b9a\u7684\u5206\u9694\u7b26\u3002\u9ed8\u8ba4\u503c\u4e3a\u82f1\u6587\u9017\u53f7\uff08,\uff09\u3002 separator: \",\" # \u5982\u679c CSV \u6587\u4ef6\u6709\u8868\u5934\uff0c\u8bf7\u5c06 header \u8bbe\u7f6e\u4e3a true\u3002 # \u5982\u679c CSV \u6587\u4ef6\u6ca1\u6709\u8868\u5934\uff0c\u8bf7\u5c06 header \u8bbe\u7f6e\u4e3a false\u3002\u9ed8\u8ba4\u503c\u4e3a false\u3002 header: false # \u6279\u91cf\u64cd\u4f5c\u7c7b\u578b\uff0c\u5305\u62ec INSERT\u3001UPDATE \u548c DELETE\u3002\u9ed8\u8ba4\u4e3a INSERT\u3002 #writeMode: INSERT # \u6279\u91cf\u5220\u9664\u65f6\u662f\u5426\u5220\u9664\u8be5\u70b9\u5173\u8054\u7684\u51fa\u8fb9\u548c\u5165\u8fb9\u3002`writeMode`\u4e3a`DELETE`\u65f6\u8be5\u53c2\u6570\u751f\u6548\u3002 #deleteEdge: false # \u6307\u5b9a\u5355\u6279\u6b21\u5199\u5165 NebulaGraph \u7684\u6700\u5927\u70b9\u6570\u91cf\u3002 batch: 256 # \u6307\u5b9a Spark \u5206\u7247\u6570\u91cf\u3002 partition: 32 } # \u8bbe\u7f6e Tag team \u76f8\u5173\u4fe1\u606f\u3002 { name: team type: { source: csv sink: client } path: \"hdfs://192.168.*.*:9000/data/vertex_team.csv\" fields: [_c1] nebula.fields: [name] vertex: { field:_c0 } separator: \",\" header: false batch: 256 partition: 32 } # \u5982\u679c\u9700\u8981\u6dfb\u52a0\u66f4\u591a\u70b9\uff0c\u8bf7\u53c2\u8003\u524d\u9762\u7684\u914d\u7f6e\u8fdb\u884c\u6dfb\u52a0\u3002 ] # \u5904\u7406\u8fb9 edges: [ # \u8bbe\u7f6e Edge type follow \u76f8\u5173\u4fe1\u606f\u3002 { # \u6307\u5b9aNebulaGraph\u4e2d\u5b9a\u4e49\u7684 Edge type \u540d\u79f0\u3002 name: follow type: { # \u6307\u5b9a\u6570\u636e\u6e90\uff0c\u4f7f\u7528 CSV\u3002 source: csv # \u6307\u5b9a\u5982\u4f55\u5c06\u70b9\u6570\u636e\u5bfc\u5165NebulaGraph\uff1aClient \u6216 SST\u3002 sink: client } # \u6307\u5b9a CSV \u6587\u4ef6\u7684\u8def\u5f84\u3002 # \u5982\u679c\u6587\u4ef6\u5b58\u50a8\u5728 HDFS \u4e0a\uff0c\u7528\u53cc\u5f15\u53f7\u62ec\u8d77\u8def\u5f84\uff0c\u4ee5 hdfs://\u5f00\u5934\uff0c\u4f8b\u5982\"hdfs://ip:port/xx/xx\"\u3002 # \u5982\u679c\u6587\u4ef6\u5b58\u50a8\u5728\u672c\u5730\uff0c\u7528\u53cc\u5f15\u53f7\u62ec\u8d77\u8def\u5f84\uff0c\u4ee5 file://\u5f00\u5934\uff0c\u4f8b\u5982\"file:///tmp/xx.csv\"\u3002 path: \"hdfs://192.168.*.*:9000/data/edge_follow.csv\" # \u5982\u679c CSV \u6587\u4ef6\u6ca1\u6709\u8868\u5934\uff0c\u4f7f\u7528 [_c0, _c1, _c2, ..., _cn] \u8868\u793a\u5176\u8868\u5934\uff0c\u5e76\u5c06\u5217\u6307\u793a\u4e3a\u5c5e\u6027\u503c\u7684\u6e90\u3002 # \u5982\u679c CSV \u6587\u4ef6\u6709\u8868\u5934\uff0c\u5219\u4f7f\u7528\u5b9e\u9645\u7684\u5217\u540d\u3002 fields: [_c2] # \u6307\u5b9aNebulaGraph\u4e2d\u5b9a\u4e49\u7684\u5c5e\u6027\u540d\u79f0\u3002 # fields \u4e0e nebula.fields \u7684\u987a\u5e8f\u5fc5\u987b\u4e00\u4e00\u5bf9\u5e94\u3002 nebula.fields: [degree] # \u6307\u5b9a\u4e00\u4e2a\u5217\u4f5c\u4e3a\u8d77\u59cb\u70b9\u548c\u76ee\u7684\u70b9\u7684\u6e90\u3002 # vertex \u7684\u503c\u5fc5\u987b\u4e0e\u4e0a\u8ff0 fields \u6216\u8005 csv.fields \u4e2d\u7684\u5217\u540d\u4fdd\u6301\u4e00\u81f4\u3002 # \u76ee\u524d\uff0cNebulaGraph 3.6.0\u4ec5\u652f\u6301\u5b57\u7b26\u4e32\u6216\u6574\u6570\u7c7b\u578b\u7684 VID\u3002 source: { field: _c0 # udf:{ # separator:\"_\" # oldColNames:[field-0,field-1,field-2] # newColName:new-field # } # \u4e3a VID \u589e\u52a0\u6307\u5b9a\u7684\u524d\u7f00\u3002\u4f8b\u5982 VID \u4e3a 12345\uff0c\u589e\u52a0\u524d\u7f00 tag1 \u540e\u4e3a tag1_12345\u3002\u4e0b\u5212\u7ebf\u65e0\u6cd5\u4fee\u6539\u3002 # prefix:\"tag1\" # \u5bf9 string \u7c7b\u578b\u7684 VID \u8fdb\u884c\u54c8\u5e0c\u5316\u64cd\u4f5c\u3002 # policy:hash } target: { field: _c1 # udf:{ # separator:\"_\" # oldColNames:[field-0,field-1,field-2] # newColName:new-field # } # \u4e3a VID \u589e\u52a0\u6307\u5b9a\u7684\u524d\u7f00\u3002\u4f8b\u5982 VID \u4e3a 12345\uff0c\u589e\u52a0\u524d\u7f00 tag1 \u540e\u4e3a tag1_12345\u3002\u4e0b\u5212\u7ebf\u65e0\u6cd5\u4fee\u6539\u3002 # prefix:\"tag1\" # \u5bf9 string \u7c7b\u578b\u7684 VID \u8fdb\u884c\u54c8\u5e0c\u5316\u64cd\u4f5c\u3002 # policy:hash } # \u6307\u5b9a\u7684\u5206\u9694\u7b26\u3002\u9ed8\u8ba4\u503c\u4e3a\u82f1\u6587\u9017\u53f7\uff08,\uff09\u3002 separator: \",\" # \u6307\u5b9a\u4e00\u4e2a\u5217\u4f5c\u4e3a rank \u7684\u6e90\uff08\u53ef\u9009\uff09\u3002 #ranking: rank # \u5982\u679c CSV \u6587\u4ef6\u6709\u8868\u5934\uff0c\u8bf7\u5c06 header \u8bbe\u7f6e\u4e3a true\u3002 # \u5982\u679c CSV \u6587\u4ef6\u6ca1\u6709\u8868\u5934\uff0c\u8bf7\u5c06 header \u8bbe\u7f6e\u4e3a false\u3002\u9ed8\u8ba4\u503c\u4e3a false\u3002 header: false # \u6279\u91cf\u64cd\u4f5c\u7c7b\u578b\uff0c\u5305\u62ec INSERT\u3001UPDATE \u548c DELETE\u3002\u9ed8\u8ba4\u4e3a INSERT\u3002 #writeMode: INSERT # \u6307\u5b9a\u5355\u6279\u6b21\u5199\u5165 NebulaGraph \u7684\u6700\u5927\u8fb9\u6570\u91cf\u3002 batch: 256 # \u6307\u5b9a Spark \u5206\u7247\u6570\u91cf\u3002 partition: 32 } # \u8bbe\u7f6e Edge type serve \u76f8\u5173\u4fe1\u606f\u3002 { name: serve type: { source: csv sink: client } path: \"hdfs://192.168.*.*:9000/data/edge_serve.csv\" fields: [_c2,_c3] nebula.fields: [start_year, end_year] source: { field: _c0 } target: { field: _c1 } separator: \",\" header: false batch: 256 partition: 32 } ] # \u5982\u679c\u9700\u8981\u6dfb\u52a0\u66f4\u591a\u8fb9\uff0c\u8bf7\u53c2\u8003\u524d\u9762\u7684\u914d\u7f6e\u8fdb\u884c\u6dfb\u52a0\u3002 } \u6b65\u9aa4 4\uff1a\u5411NebulaGraph\u5bfc\u5165\u6570\u636e \u00b6 \u8fd0\u884c\u5982\u4e0b\u547d\u4ee4\u5c06 CSV \u6587\u4ef6\u6570\u636e\u5bfc\u5165\u5230NebulaGraph\u4e2d\u3002\u5173\u4e8e\u53c2\u6570\u7684\u8bf4\u660e\uff0c\u8bf7\u53c2\u89c1 \u5bfc\u5165\u547d\u4ee4\u53c2\u6570 \u3002 ${ SPARK_HOME } /bin/spark-submit --master \"local\" --class com.vesoft.nebula.exchange.Exchange <nebula-exchange-3.6.0.jar_path> -c <csv_application.conf_path> Note JAR \u5305\u6709\u4e24\u79cd\u83b7\u53d6\u65b9\u5f0f\uff1a \u81ea\u884c\u7f16\u8bd1 \u6216\u8005\u4ece maven \u4ed3\u5e93\u4e0b\u8f7d\u3002 \u793a\u4f8b\uff1a ${ SPARK_HOME } /bin/spark-submit --master \"local\" --class com.vesoft.nebula.exchange.Exchange /root/nebula-exchange/nebula-exchange/target/nebula-exchange-3.6.0.jar -c /root/nebula-exchange/nebula-exchange/target/classes/csv_application.conf \u7528\u6237\u53ef\u4ee5\u5728\u8fd4\u56de\u4fe1\u606f\u4e2d\u641c\u7d22 batchSuccess.<tag_name/edge_name> \uff0c\u786e\u8ba4\u6210\u529f\u7684\u6570\u91cf\u3002\u4f8b\u5982 batchSuccess.follow: 300 \u3002 \u6b65\u9aa4 5\uff1a\uff08\u53ef\u9009\uff09\u9a8c\u8bc1\u6570\u636e \u00b6 \u7528\u6237\u53ef\u4ee5\u5728NebulaGraph\u5ba2\u6237\u7aef\uff08\u4f8b\u5982 NebulaGraph Studio\uff09\u4e2d\u6267\u884c\u67e5\u8be2\u8bed\u53e5\uff0c\u786e\u8ba4\u6570\u636e\u662f\u5426\u5df2\u5bfc\u5165\u3002\u4f8b\u5982\uff1a LOOKUP ON player YIELD id(vertex); \u7528\u6237\u4e5f\u53ef\u4ee5\u4f7f\u7528\u547d\u4ee4 SHOW STATS \u67e5\u770b\u7edf\u8ba1\u6570\u636e\u3002 \u6b65\u9aa4 6\uff1a\uff08\u5982\u6709\uff09\u5728NebulaGraph\u4e2d\u91cd\u5efa\u7d22\u5f15 \u00b6 \u5bfc\u5165\u6570\u636e\u540e\uff0c\u7528\u6237\u53ef\u4ee5\u5728NebulaGraph\u4e2d\u91cd\u65b0\u521b\u5efa\u5e76\u91cd\u5efa\u7d22\u5f15\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1 \u7d22\u5f15\u4ecb\u7ecd \u3002","title":"\u5bfc\u5165 CSV \u6587\u4ef6\u6570\u636e"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-csv/#csv","text":"\u672c\u6587\u4ee5\u4e00\u4e2a\u793a\u4f8b\u8bf4\u660e\u5982\u4f55\u4f7f\u7528 Exchange \u5c06\u5b58\u50a8\u5728 HDFS \u6216\u672c\u5730\u7684 CSV \u6587\u4ef6\u6570\u636e\u5bfc\u5165NebulaGraph\u3002","title":"\u5bfc\u5165 CSV \u6587\u4ef6\u6570\u636e"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-csv/#_1","text":"\u672c\u6587\u4ee5 basketballplayer \u6570\u636e\u96c6 \u4e3a\u4f8b\u3002","title":"\u6570\u636e\u96c6"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-csv/#_2","text":"\u672c\u6587\u793a\u4f8b\u5728 MacOS \u4e0b\u5b8c\u6210\uff0c\u4ee5\u4e0b\u662f\u76f8\u5173\u7684\u73af\u5883\u914d\u7f6e\u4fe1\u606f\uff1a \u786c\u4ef6\u89c4\u683c\uff1a CPU\uff1a1.7 GHz Quad-Core Intel Core i7 \u5185\u5b58\uff1a16 GB Spark\uff1a2.4.7 \u5355\u673a\u7248 Hadoop\uff1a2.9.2 \u4f2a\u5206\u5e03\u5f0f\u90e8\u7f72 NebulaGraph\uff1a3.6.0\u3002","title":"\u73af\u5883\u914d\u7f6e"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-csv/#_3","text":"\u5f00\u59cb\u5bfc\u5165\u6570\u636e\u4e4b\u524d\uff0c\u7528\u6237\u9700\u8981\u786e\u8ba4\u4ee5\u4e0b\u4fe1\u606f\uff1a \u5df2\u7ecf \u5b89\u88c5\u90e8\u7f72NebulaGraph \u5e76\u83b7\u53d6\u5982\u4e0b\u4fe1\u606f\uff1a Graph \u670d\u52a1\u548c Meta \u670d\u52a1\u7684\u7684 IP \u5730\u5740\u548c\u7aef\u53e3\u3002 \u62e5\u6709NebulaGraph\u5199\u6743\u9650\u7684\u7528\u6237\u540d\u548c\u5bc6\u7801\u3002 \u5df2\u7ecf\u7f16\u8bd1 Exchange\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1 \u7f16\u8bd1 Exchange \u3002\u672c\u793a\u4f8b\u4e2d\u4f7f\u7528 Exchange 3.6.0\u3002 \u5df2\u7ecf\u5b89\u88c5 Spark\u3002 \u4e86\u89e3NebulaGraph\u4e2d\u521b\u5efa Schema \u7684\u4fe1\u606f\uff0c\u5305\u62ec Tag \u548c Edge type \u7684\u540d\u79f0\u3001\u5c5e\u6027\u7b49\u3002 \u5982\u679c\u6587\u4ef6\u5b58\u50a8\u5728 HDFS \u4e0a\uff0c\u9700\u8981\u786e\u8ba4 Hadoop \u670d\u52a1\u8fd0\u884c\u6b63\u5e38\u3002 \u5982\u679c\u6587\u4ef6\u5b58\u50a8\u5728\u672c\u5730\u4e14NebulaGraph\u662f\u96c6\u7fa4\u67b6\u6784\uff0c\u9700\u8981\u5728\u96c6\u7fa4\u6bcf\u53f0\u673a\u5668\u672c\u5730\u76f8\u540c\u76ee\u5f55\u4e0b\u653e\u7f6e\u6587\u4ef6\u3002","title":"\u524d\u63d0\u6761\u4ef6"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-csv/#_4","text":"","title":"\u64cd\u4f5c\u6b65\u9aa4"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-csv/#1nebulagraph_schema","text":"\u5206\u6790 CSV \u6587\u4ef6\u4e2d\u7684\u6570\u636e\uff0c\u6309\u4ee5\u4e0b\u6b65\u9aa4\u5728NebulaGraph\u4e2d\u521b\u5efa Schema\uff1a \u786e\u8ba4 Schema \u8981\u7d20\u3002NebulaGraph\u4e2d\u7684 Schema \u8981\u7d20\u5982\u4e0b\u8868\u6240\u793a\u3002 \u8981\u7d20 \u540d\u79f0 \u5c5e\u6027 Tag player name string, age int Tag team name string Edge Type follow degree int Edge Type serve start_year int, end_year int \u4f7f\u7528NebulaGraphConsole \u521b\u5efa\u4e00\u4e2a\u56fe\u7a7a\u95f4 basketballplayer \uff0c\u5e76\u521b\u5efa\u4e00\u4e2a Schema\uff0c\u5982\u4e0b\u6240\u793a\u3002 ## \u521b\u5efa\u56fe\u7a7a\u95f4 nebula> CREATE SPACE basketballplayer \\ (partition_num = 10, \\ replica_factor = 1, \\ vid_type = FIXED_STRING(30)); ## \u9009\u62e9\u56fe\u7a7a\u95f4 basketballplayer nebula> USE basketballplayer; ## \u521b\u5efa Tag player nebula> CREATE TAG player(name string, age int); ## \u521b\u5efa Tag team nebula> CREATE TAG team(name string); ## \u521b\u5efa Edge type follow nebula> CREATE EDGE follow(degree int); ## \u521b\u5efa Edge type serve nebula> CREATE EDGE serve(start_year int, end_year int); \u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u89c1 \u5feb\u901f\u5f00\u59cb \u3002","title":"\u6b65\u9aa4 1\uff1a\u5728NebulaGraph\u4e2d\u521b\u5efa Schema"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-csv/#2_csv","text":"\u786e\u8ba4\u4ee5\u4e0b\u4fe1\u606f\uff1a \u5904\u7406 CSV \u6587\u4ef6\u4ee5\u6ee1\u8db3 Schema \u7684\u8981\u6c42\u3002 Note Exchange \u652f\u6301\u4e0a\u4f20\u6709\u8868\u5934\u6216\u8005\u65e0\u8868\u5934\u7684 CSV \u6587\u4ef6\u3002 \u83b7\u53d6 CSV \u6587\u4ef6\u5b58\u50a8\u8def\u5f84\u3002","title":"\u6b65\u9aa4 2\uff1a\u5904\u7406 CSV \u6587\u4ef6"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-csv/#3","text":"\u7f16\u8bd1 Exchange \u540e\uff0c\u590d\u5236 target/classes/application.conf \u6587\u4ef6\u8bbe\u7f6e CSV \u6570\u636e\u6e90\u76f8\u5173\u7684\u914d\u7f6e\u3002\u5728\u672c\u793a\u4f8b\u4e2d\uff0c\u590d\u5236\u7684\u6587\u4ef6\u540d\u4e3a csv_application.conf \u3002\u5404\u4e2a\u914d\u7f6e\u9879\u7684\u8be6\u7ec6\u8bf4\u660e\u8bf7\u53c2\u89c1 \u914d\u7f6e\u8bf4\u660e \u3002 { # Spark \u76f8\u5173\u914d\u7f6e spark: { app: { name: NebulaGraph Exchange 3.6.0 } driver: { cores: 1 maxResultSize: 1G } executor: { memory:1G } cores: { max: 16 } } # NebulaGraph \u76f8\u5173\u914d\u7f6e nebula: { address:{ # \u6307\u5b9a Graph \u670d\u52a1\u548c\u6240\u6709 Meta \u670d\u52a1\u7684 IP \u5730\u5740\u548c\u7aef\u53e3\u3002 # \u5982\u679c\u6709\u591a\u53f0\u670d\u52a1\u5668\uff0c\u5730\u5740\u4e4b\u95f4\u7528\u82f1\u6587\u9017\u53f7\uff08,\uff09\u5206\u9694\u3002 # \u683c\u5f0f\uff1a\"ip1:port\",\"ip2:port\",\"ip3:port\" graph:[\"127.0.0.1:9669\"] #\u4efb\u610f\u4e00\u4e2a Meta \u670d\u52a1\u7684\u5730\u5740\u3002 #\u5982\u679c\u60a8\u7684NebulaGraph\u5728\u865a\u62df\u7f51\u7edc\u4e2d\uff0c\u5982k8s\uff0c\u8bf7\u914d\u7f6e Leader Meta\u7684\u5730\u5740\u3002 meta:[\"127.0.0.1:9559\"] } # \u6307\u5b9a\u62e5\u6709NebulaGraph\u5199\u6743\u9650\u7684\u7528\u6237\u540d\u548c\u5bc6\u7801\u3002 user: root pswd: nebula # \u6307\u5b9a\u56fe\u7a7a\u95f4\u540d\u79f0\u3002 space: basketballplayer connection: { timeout: 3000 retry: 3 } execution: { retry: 3 } error: { max: 32 output: /tmp/errors } rate: { limit: 1024 timeout: 1000 } } # \u5904\u7406\u70b9 tags: [ # \u8bbe\u7f6e Tag player \u76f8\u5173\u4fe1\u606f\u3002 { # \u6307\u5b9aNebulaGraph\u4e2d\u5b9a\u4e49\u7684 Tag \u540d\u79f0\u3002 name: player type: { # \u6307\u5b9a\u6570\u636e\u6e90\uff0c\u4f7f\u7528 CSV\u3002 source: csv # \u6307\u5b9a\u5982\u4f55\u5c06\u70b9\u6570\u636e\u5bfc\u5165NebulaGraph\uff1aClient \u6216 SST\u3002 sink: client } # \u6307\u5b9a CSV \u6587\u4ef6\u7684\u8def\u5f84\u3002 # \u5982\u679c\u6587\u4ef6\u5b58\u50a8\u5728 HDFS \u4e0a\uff0c\u7528\u53cc\u5f15\u53f7\u62ec\u8d77\u8def\u5f84\uff0c\u4ee5 hdfs://\u5f00\u5934\uff0c\u4f8b\u5982\"hdfs://ip:port/xx/xx\"\u3002 # \u5982\u679c\u6587\u4ef6\u5b58\u50a8\u5728\u672c\u5730\uff0c\u7528\u53cc\u5f15\u53f7\u62ec\u8d77\u8def\u5f84\uff0c\u4ee5 file://\u5f00\u5934\uff0c\u4f8b\u5982\"file:///tmp/xx.csv\"\u3002 path: \"hdfs://192.168.*.*:9000/data/vertex_player.csv\" # \u5982\u679c CSV \u6587\u4ef6\u6ca1\u6709\u8868\u5934\uff0c\u4f7f\u7528 [_c0, _c1, _c2, ..., _cn] \u8868\u793a\u5176\u8868\u5934\uff0c\u5e76\u5c06\u5217\u6307\u793a\u4e3a\u5c5e\u6027\u503c\u7684\u6e90\u3002 # \u5982\u679c CSV \u6587\u4ef6\u6709\u8868\u5934\uff0c\u5219\u4f7f\u7528\u5b9e\u9645\u7684\u5217\u540d\u3002 fields: [_c1, _c2] # \u6307\u5b9aNebulaGraph\u4e2d\u5b9a\u4e49\u7684\u5c5e\u6027\u540d\u79f0\u3002 # fields \u4e0e nebula.fields \u7684\u987a\u5e8f\u5fc5\u987b\u4e00\u4e00\u5bf9\u5e94\u3002 nebula.fields: [age, name] # \u6307\u5b9a\u4e00\u4e2a\u5217\u4f5c\u4e3a VID \u7684\u6e90\u3002 # vertex \u7684\u503c\u5fc5\u987b\u4e0e\u4e0a\u8ff0 fields \u6216\u8005 csv.fields \u4e2d\u7684\u5217\u540d\u4fdd\u6301\u4e00\u81f4\u3002 # \u76ee\u524d\uff0cNebulaGraph 3.6.0\u4ec5\u652f\u6301\u5b57\u7b26\u4e32\u6216\u6574\u6570\u7c7b\u578b\u7684 VID\u3002 vertex: { field:_c0 # udf:{ # separator:\"_\" # oldColNames:[field-0,field-1,field-2] # newColName:new-field # } # \u4e3a VID \u589e\u52a0\u6307\u5b9a\u7684\u524d\u7f00\u3002\u4f8b\u5982 VID \u4e3a 12345\uff0c\u589e\u52a0\u524d\u7f00 tag1 \u540e\u4e3a tag1_12345\u3002\u4e0b\u5212\u7ebf\u65e0\u6cd5\u4fee\u6539\u3002 # prefix:\"tag1\" # \u5bf9 string \u7c7b\u578b\u7684 VID \u8fdb\u884c\u54c8\u5e0c\u5316\u64cd\u4f5c\u3002 # policy:hash } # \u6307\u5b9a\u7684\u5206\u9694\u7b26\u3002\u9ed8\u8ba4\u503c\u4e3a\u82f1\u6587\u9017\u53f7\uff08,\uff09\u3002 separator: \",\" # \u5982\u679c CSV \u6587\u4ef6\u6709\u8868\u5934\uff0c\u8bf7\u5c06 header \u8bbe\u7f6e\u4e3a true\u3002 # \u5982\u679c CSV \u6587\u4ef6\u6ca1\u6709\u8868\u5934\uff0c\u8bf7\u5c06 header \u8bbe\u7f6e\u4e3a false\u3002\u9ed8\u8ba4\u503c\u4e3a false\u3002 header: false # \u6279\u91cf\u64cd\u4f5c\u7c7b\u578b\uff0c\u5305\u62ec INSERT\u3001UPDATE \u548c DELETE\u3002\u9ed8\u8ba4\u4e3a INSERT\u3002 #writeMode: INSERT # \u6279\u91cf\u5220\u9664\u65f6\u662f\u5426\u5220\u9664\u8be5\u70b9\u5173\u8054\u7684\u51fa\u8fb9\u548c\u5165\u8fb9\u3002`writeMode`\u4e3a`DELETE`\u65f6\u8be5\u53c2\u6570\u751f\u6548\u3002 #deleteEdge: false # \u6307\u5b9a\u5355\u6279\u6b21\u5199\u5165 NebulaGraph \u7684\u6700\u5927\u70b9\u6570\u91cf\u3002 batch: 256 # \u6307\u5b9a Spark \u5206\u7247\u6570\u91cf\u3002 partition: 32 } # \u8bbe\u7f6e Tag team \u76f8\u5173\u4fe1\u606f\u3002 { name: team type: { source: csv sink: client } path: \"hdfs://192.168.*.*:9000/data/vertex_team.csv\" fields: [_c1] nebula.fields: [name] vertex: { field:_c0 } separator: \",\" header: false batch: 256 partition: 32 } # \u5982\u679c\u9700\u8981\u6dfb\u52a0\u66f4\u591a\u70b9\uff0c\u8bf7\u53c2\u8003\u524d\u9762\u7684\u914d\u7f6e\u8fdb\u884c\u6dfb\u52a0\u3002 ] # \u5904\u7406\u8fb9 edges: [ # \u8bbe\u7f6e Edge type follow \u76f8\u5173\u4fe1\u606f\u3002 { # \u6307\u5b9aNebulaGraph\u4e2d\u5b9a\u4e49\u7684 Edge type \u540d\u79f0\u3002 name: follow type: { # \u6307\u5b9a\u6570\u636e\u6e90\uff0c\u4f7f\u7528 CSV\u3002 source: csv # \u6307\u5b9a\u5982\u4f55\u5c06\u70b9\u6570\u636e\u5bfc\u5165NebulaGraph\uff1aClient \u6216 SST\u3002 sink: client } # \u6307\u5b9a CSV \u6587\u4ef6\u7684\u8def\u5f84\u3002 # \u5982\u679c\u6587\u4ef6\u5b58\u50a8\u5728 HDFS \u4e0a\uff0c\u7528\u53cc\u5f15\u53f7\u62ec\u8d77\u8def\u5f84\uff0c\u4ee5 hdfs://\u5f00\u5934\uff0c\u4f8b\u5982\"hdfs://ip:port/xx/xx\"\u3002 # \u5982\u679c\u6587\u4ef6\u5b58\u50a8\u5728\u672c\u5730\uff0c\u7528\u53cc\u5f15\u53f7\u62ec\u8d77\u8def\u5f84\uff0c\u4ee5 file://\u5f00\u5934\uff0c\u4f8b\u5982\"file:///tmp/xx.csv\"\u3002 path: \"hdfs://192.168.*.*:9000/data/edge_follow.csv\" # \u5982\u679c CSV \u6587\u4ef6\u6ca1\u6709\u8868\u5934\uff0c\u4f7f\u7528 [_c0, _c1, _c2, ..., _cn] \u8868\u793a\u5176\u8868\u5934\uff0c\u5e76\u5c06\u5217\u6307\u793a\u4e3a\u5c5e\u6027\u503c\u7684\u6e90\u3002 # \u5982\u679c CSV \u6587\u4ef6\u6709\u8868\u5934\uff0c\u5219\u4f7f\u7528\u5b9e\u9645\u7684\u5217\u540d\u3002 fields: [_c2] # \u6307\u5b9aNebulaGraph\u4e2d\u5b9a\u4e49\u7684\u5c5e\u6027\u540d\u79f0\u3002 # fields \u4e0e nebula.fields \u7684\u987a\u5e8f\u5fc5\u987b\u4e00\u4e00\u5bf9\u5e94\u3002 nebula.fields: [degree] # \u6307\u5b9a\u4e00\u4e2a\u5217\u4f5c\u4e3a\u8d77\u59cb\u70b9\u548c\u76ee\u7684\u70b9\u7684\u6e90\u3002 # vertex \u7684\u503c\u5fc5\u987b\u4e0e\u4e0a\u8ff0 fields \u6216\u8005 csv.fields \u4e2d\u7684\u5217\u540d\u4fdd\u6301\u4e00\u81f4\u3002 # \u76ee\u524d\uff0cNebulaGraph 3.6.0\u4ec5\u652f\u6301\u5b57\u7b26\u4e32\u6216\u6574\u6570\u7c7b\u578b\u7684 VID\u3002 source: { field: _c0 # udf:{ # separator:\"_\" # oldColNames:[field-0,field-1,field-2] # newColName:new-field # } # \u4e3a VID \u589e\u52a0\u6307\u5b9a\u7684\u524d\u7f00\u3002\u4f8b\u5982 VID \u4e3a 12345\uff0c\u589e\u52a0\u524d\u7f00 tag1 \u540e\u4e3a tag1_12345\u3002\u4e0b\u5212\u7ebf\u65e0\u6cd5\u4fee\u6539\u3002 # prefix:\"tag1\" # \u5bf9 string \u7c7b\u578b\u7684 VID \u8fdb\u884c\u54c8\u5e0c\u5316\u64cd\u4f5c\u3002 # policy:hash } target: { field: _c1 # udf:{ # separator:\"_\" # oldColNames:[field-0,field-1,field-2] # newColName:new-field # } # \u4e3a VID \u589e\u52a0\u6307\u5b9a\u7684\u524d\u7f00\u3002\u4f8b\u5982 VID \u4e3a 12345\uff0c\u589e\u52a0\u524d\u7f00 tag1 \u540e\u4e3a tag1_12345\u3002\u4e0b\u5212\u7ebf\u65e0\u6cd5\u4fee\u6539\u3002 # prefix:\"tag1\" # \u5bf9 string \u7c7b\u578b\u7684 VID \u8fdb\u884c\u54c8\u5e0c\u5316\u64cd\u4f5c\u3002 # policy:hash } # \u6307\u5b9a\u7684\u5206\u9694\u7b26\u3002\u9ed8\u8ba4\u503c\u4e3a\u82f1\u6587\u9017\u53f7\uff08,\uff09\u3002 separator: \",\" # \u6307\u5b9a\u4e00\u4e2a\u5217\u4f5c\u4e3a rank \u7684\u6e90\uff08\u53ef\u9009\uff09\u3002 #ranking: rank # \u5982\u679c CSV \u6587\u4ef6\u6709\u8868\u5934\uff0c\u8bf7\u5c06 header \u8bbe\u7f6e\u4e3a true\u3002 # \u5982\u679c CSV \u6587\u4ef6\u6ca1\u6709\u8868\u5934\uff0c\u8bf7\u5c06 header \u8bbe\u7f6e\u4e3a false\u3002\u9ed8\u8ba4\u503c\u4e3a false\u3002 header: false # \u6279\u91cf\u64cd\u4f5c\u7c7b\u578b\uff0c\u5305\u62ec INSERT\u3001UPDATE \u548c DELETE\u3002\u9ed8\u8ba4\u4e3a INSERT\u3002 #writeMode: INSERT # \u6307\u5b9a\u5355\u6279\u6b21\u5199\u5165 NebulaGraph \u7684\u6700\u5927\u8fb9\u6570\u91cf\u3002 batch: 256 # \u6307\u5b9a Spark \u5206\u7247\u6570\u91cf\u3002 partition: 32 } # \u8bbe\u7f6e Edge type serve \u76f8\u5173\u4fe1\u606f\u3002 { name: serve type: { source: csv sink: client } path: \"hdfs://192.168.*.*:9000/data/edge_serve.csv\" fields: [_c2,_c3] nebula.fields: [start_year, end_year] source: { field: _c0 } target: { field: _c1 } separator: \",\" header: false batch: 256 partition: 32 } ] # \u5982\u679c\u9700\u8981\u6dfb\u52a0\u66f4\u591a\u8fb9\uff0c\u8bf7\u53c2\u8003\u524d\u9762\u7684\u914d\u7f6e\u8fdb\u884c\u6dfb\u52a0\u3002 }","title":"\u6b65\u9aa4 3\uff1a\u4fee\u6539\u914d\u7f6e\u6587\u4ef6"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-csv/#4nebulagraph","text":"\u8fd0\u884c\u5982\u4e0b\u547d\u4ee4\u5c06 CSV \u6587\u4ef6\u6570\u636e\u5bfc\u5165\u5230NebulaGraph\u4e2d\u3002\u5173\u4e8e\u53c2\u6570\u7684\u8bf4\u660e\uff0c\u8bf7\u53c2\u89c1 \u5bfc\u5165\u547d\u4ee4\u53c2\u6570 \u3002 ${ SPARK_HOME } /bin/spark-submit --master \"local\" --class com.vesoft.nebula.exchange.Exchange <nebula-exchange-3.6.0.jar_path> -c <csv_application.conf_path> Note JAR \u5305\u6709\u4e24\u79cd\u83b7\u53d6\u65b9\u5f0f\uff1a \u81ea\u884c\u7f16\u8bd1 \u6216\u8005\u4ece maven \u4ed3\u5e93\u4e0b\u8f7d\u3002 \u793a\u4f8b\uff1a ${ SPARK_HOME } /bin/spark-submit --master \"local\" --class com.vesoft.nebula.exchange.Exchange /root/nebula-exchange/nebula-exchange/target/nebula-exchange-3.6.0.jar -c /root/nebula-exchange/nebula-exchange/target/classes/csv_application.conf \u7528\u6237\u53ef\u4ee5\u5728\u8fd4\u56de\u4fe1\u606f\u4e2d\u641c\u7d22 batchSuccess.<tag_name/edge_name> \uff0c\u786e\u8ba4\u6210\u529f\u7684\u6570\u91cf\u3002\u4f8b\u5982 batchSuccess.follow: 300 \u3002","title":"\u6b65\u9aa4 4\uff1a\u5411NebulaGraph\u5bfc\u5165\u6570\u636e"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-csv/#5","text":"\u7528\u6237\u53ef\u4ee5\u5728NebulaGraph\u5ba2\u6237\u7aef\uff08\u4f8b\u5982 NebulaGraph Studio\uff09\u4e2d\u6267\u884c\u67e5\u8be2\u8bed\u53e5\uff0c\u786e\u8ba4\u6570\u636e\u662f\u5426\u5df2\u5bfc\u5165\u3002\u4f8b\u5982\uff1a LOOKUP ON player YIELD id(vertex); \u7528\u6237\u4e5f\u53ef\u4ee5\u4f7f\u7528\u547d\u4ee4 SHOW STATS \u67e5\u770b\u7edf\u8ba1\u6570\u636e\u3002","title":"\u6b65\u9aa4 5\uff1a\uff08\u53ef\u9009\uff09\u9a8c\u8bc1\u6570\u636e"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-csv/#6nebulagraph","text":"\u5bfc\u5165\u6570\u636e\u540e\uff0c\u7528\u6237\u53ef\u4ee5\u5728NebulaGraph\u4e2d\u91cd\u65b0\u521b\u5efa\u5e76\u91cd\u5efa\u7d22\u5f15\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1 \u7d22\u5f15\u4ecb\u7ecd \u3002","title":"\u6b65\u9aa4 6\uff1a\uff08\u5982\u6709\uff09\u5728NebulaGraph\u4e2d\u91cd\u5efa\u7d22\u5f15"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-hbase/","text":"\u5bfc\u5165 HBase \u6570\u636e \u00b6 \u672c\u6587\u4ee5\u4e00\u4e2a\u793a\u4f8b\u8bf4\u660e\u5982\u4f55\u4f7f\u7528 Exchange \u5c06\u5b58\u50a8\u5728 HBase \u4e0a\u7684\u6570\u636e\u5bfc\u5165NebulaGraph\u3002 \u6570\u636e\u96c6 \u00b6 \u672c\u6587\u4ee5 basketballplayer \u6570\u636e\u96c6 \u4e3a\u4f8b\u3002 \u5728\u672c\u793a\u4f8b\u4e2d\uff0c\u8be5\u6570\u636e\u96c6\u5df2\u7ecf\u5b58\u5165 HBase \u4e2d\uff0c\u4ee5 player \u3001 team \u3001 follow \u548c serve \u56db\u4e2a\u8868\u5b58\u50a8\u4e86\u6240\u6709\u70b9\u548c\u8fb9\u7684\u4fe1\u606f\u3002\u4ee5\u4e0b\u4e3a\u5404\u4e2a\u8868\u7684\u90e8\u5206\u6570\u636e\u3002 hbase ( main ): 002 : 0 > scan \"player\" ROW COLUMN + CELL player100 column = cf : age , timestamp = 1618881347530 , value = 42 player100 column = cf : name , timestamp = 1618881354604 , value = Tim Duncan player101 column = cf : age , timestamp = 1618881369124 , value = 36 player101 column = cf : name , timestamp = 1618881379102 , value = Tony Parker player102 column = cf : age , timestamp = 1618881386987 , value = 33 player102 column = cf : name , timestamp = 1618881393370 , value = LaMarcus Aldridge player103 column = cf : age , timestamp = 1618881402002 , value = 32 player103 column = cf : name , timestamp = 1618881407882 , value = Rudy Gay ... hbase ( main ): 003 : 0 > scan \"team\" ROW COLUMN + CELL team200 column = cf : name , timestamp = 1618881445563 , value = Warriors team201 column = cf : name , timestamp = 1618881453636 , value = Nuggets ... hbase ( main ): 004 : 0 > scan \"follow\" ROW COLUMN + CELL player100 column = cf : degree , timestamp = 1618881804853 , value = 95 player100 column = cf : dst_player , timestamp = 1618881791522 , value = player101 player101 column = cf : degree , timestamp = 1618881824685 , value = 90 player101 column = cf : dst_player , timestamp = 1618881816042 , value = player102 ... hbase ( main ): 005 : 0 > scan \"serve\" ROW COLUMN + CELL player100 column = cf : end_year , timestamp = 1618881899333 , value = 2016 player100 column = cf : start_year , timestamp = 1618881890117 , value = 1997 player100 column = cf : teamid , timestamp = 1618881875739 , value = team204 ... \u73af\u5883\u914d\u7f6e \u00b6 \u672c\u6587\u793a\u4f8b\u5728 MacOS \u4e0b\u5b8c\u6210\uff0c\u4ee5\u4e0b\u662f\u76f8\u5173\u7684\u73af\u5883\u914d\u7f6e\u4fe1\u606f\uff1a \u786c\u4ef6\u89c4\u683c\uff1a CPU\uff1a1.7 GHz Quad-Core Intel Core i7 \u5185\u5b58\uff1a16 GB Spark\uff1a2.4.7\uff0c\u5355\u673a\u7248 HBase\uff1a2.2.7 NebulaGraph\uff1a3.6.0\u3002 \u524d\u63d0\u6761\u4ef6 \u00b6 \u5f00\u59cb\u5bfc\u5165\u6570\u636e\u4e4b\u524d\uff0c\u7528\u6237\u9700\u8981\u786e\u8ba4\u4ee5\u4e0b\u4fe1\u606f\uff1a \u5df2\u7ecf \u5b89\u88c5\u90e8\u7f72NebulaGraph \u5e76\u83b7\u53d6\u5982\u4e0b\u4fe1\u606f\uff1a Graph \u670d\u52a1\u548c Meta \u670d\u52a1\u7684\u7684 IP \u5730\u5740\u548c\u7aef\u53e3\u3002 \u62e5\u6709NebulaGraph\u5199\u6743\u9650\u7684\u7528\u6237\u540d\u548c\u5bc6\u7801\u3002 \u5df2\u7ecf\u7f16\u8bd1 Exchange\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1 \u7f16\u8bd1 Exchange \u3002\u672c\u793a\u4f8b\u4e2d\u4f7f\u7528 Exchange 3.6.0\u3002 \u5df2\u7ecf\u5b89\u88c5 Spark\u3002 \u4e86\u89e3NebulaGraph\u4e2d\u521b\u5efa Schema \u7684\u4fe1\u606f\uff0c\u5305\u62ec Tag \u548c Edge type \u7684\u540d\u79f0\u3001\u5c5e\u6027\u7b49\u3002 \u64cd\u4f5c\u6b65\u9aa4 \u00b6 \u6b65\u9aa4 1\uff1a\u5728NebulaGraph\u4e2d\u521b\u5efa Schema \u00b6 \u5206\u6790\u6570\u636e\uff0c\u6309\u4ee5\u4e0b\u6b65\u9aa4\u5728NebulaGraph\u4e2d\u521b\u5efa Schema\uff1a \u786e\u8ba4 Schema \u8981\u7d20\u3002NebulaGraph\u4e2d\u7684 Schema \u8981\u7d20\u5982\u4e0b\u8868\u6240\u793a\u3002 \u8981\u7d20 \u540d\u79f0 \u5c5e\u6027 Tag player name string, age int Tag team name string Edge Type follow degree int Edge Type serve start_year int, end_year int \u5728NebulaGraph\u4e2d\u521b\u5efa\u4e00\u4e2a\u56fe\u7a7a\u95f4 basketballplayer \uff0c\u5e76\u521b\u5efa\u4e00\u4e2a Schema\uff0c\u5982\u4e0b\u6240\u793a\u3002 ## \u521b\u5efa\u56fe\u7a7a\u95f4 nebula> CREATE SPACE basketballplayer \\ (partition_num = 10, \\ replica_factor = 1, \\ vid_type = FIXED_STRING(30)); ## \u9009\u62e9\u56fe\u7a7a\u95f4 basketballplayer nebula> USE basketballplayer; ## \u521b\u5efa Tag player nebula> CREATE TAG player(name string, age int); ## \u521b\u5efa Tag team nebula> CREATE TAG team(name string); ## \u521b\u5efa Edge type follow nebula> CREATE EDGE follow(degree int); ## \u521b\u5efa Edge type serve nebula> CREATE EDGE serve(start_year int, end_year int); \u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u89c1 \u5feb\u901f\u5f00\u59cb \u3002 \u6b65\u9aa4 2\uff1a\u4fee\u6539\u914d\u7f6e\u6587\u4ef6 \u00b6 \u7f16\u8bd1 Exchange \u540e\uff0c\u590d\u5236 target/classes/application.conf \u6587\u4ef6\u8bbe\u7f6e HBase \u6570\u636e\u6e90\u76f8\u5173\u7684\u914d\u7f6e\u3002\u5728\u672c\u793a\u4f8b\u4e2d\uff0c\u590d\u5236\u7684\u6587\u4ef6\u540d\u4e3a hbase_application.conf \u3002\u5404\u4e2a\u914d\u7f6e\u9879\u7684\u8be6\u7ec6\u8bf4\u660e\u8bf7\u53c2\u89c1 \u914d\u7f6e\u8bf4\u660e \u3002 { # Spark \u76f8\u5173\u914d\u7f6e spark: { app: { name: NebulaGraph Exchange 3.6.0 } driver: { cores: 1 maxResultSize: 1G } cores: { max: 16 } } # NebulaGraph \u76f8\u5173\u914d\u7f6e nebula: { address:{ # \u4ee5\u4e0b\u4e3a NebulaGraph \u7684 Graph \u670d\u52a1\u548c Meta \u670d\u52a1\u6240\u5728\u673a\u5668\u7684 IP \u5730\u5740\u53ca\u7aef\u53e3\u3002 # \u5982\u679c\u6709\u591a\u4e2a\u5730\u5740\uff0c\u683c\u5f0f\u4e3a \"ip1:port\",\"ip2:port\",\"ip3:port\"\u3002 # \u4e0d\u540c\u5730\u5740\u4e4b\u95f4\u4ee5\u82f1\u6587\u9017\u53f7 (,) \u9694\u5f00\u3002 graph:[\"127.0.0.1:9669\"] #\u4efb\u610f\u4e00\u4e2a Meta \u670d\u52a1\u7684\u5730\u5740\u3002 #\u5982\u679c\u60a8\u7684 NebulaGraph \u5728\u865a\u62df\u7f51\u7edc\u4e2d\uff0c\u5982k8s\uff0c\u8bf7\u914d\u7f6e Leader Meta\u7684\u5730\u5740\u3002 meta:[\"127.0.0.1:9559\"] } # \u586b\u5199\u7684\u8d26\u53f7\u5fc5\u987b\u62e5\u6709 NebulaGraph \u76f8\u5e94\u56fe\u7a7a\u95f4\u7684\u5199\u6570\u636e\u6743\u9650\u3002 user: root pswd: nebula # \u586b\u5199 NebulaGraph \u4e2d\u9700\u8981\u5199\u5165\u6570\u636e\u7684\u56fe\u7a7a\u95f4\u540d\u79f0\u3002 space: basketballplayer connection: { timeout: 3000 retry: 3 } execution: { retry: 3 } error: { max: 32 output: /tmp/errors } rate: { limit: 1024 timeout: 1000 } } # \u5904\u7406\u70b9 tags: [ # \u8bbe\u7f6e Tag player \u76f8\u5173\u4fe1\u606f\u3002 # \u5982\u679c\u9700\u8981\u5c06 rowkey \u8bbe\u7f6e\u4e3a\u6570\u636e\u6e90\uff0c\u8bf7\u586b\u5199\u201crowkey\u201d, \u5217\u65cf\u5185\u7684\u5217\u8bf7\u586b\u5199\u5b9e\u9645\u5217\u540d\u3002 { # NebulaGraph \u4e2d\u5bf9\u5e94\u7684 Tag \u540d\u79f0\u3002 name: player type: { # \u6307\u5b9a\u6570\u636e\u6e90\u6587\u4ef6\u683c\u5f0f\uff0c\u8bbe\u7f6e\u4e3a HBase\u3002 source: hbase # \u6307\u5b9a\u5982\u4f55\u5c06\u70b9\u6570\u636e\u5bfc\u5165NebulaGraph\uff1aClient \u6216 SST\u3002 sink: client } host:192.168.*.* port:2181 table:\"player\" columnFamily:\"cf\" # \u5728 fields \u91cc\u6307\u5b9a player \u8868\u4e2d\u7684\u5217\u540d\u79f0\uff0c\u5176\u5bf9\u5e94\u7684 value \u4f1a\u4f5c\u4e3a NebulaGraph \u4e2d\u6307\u5b9a\u5c5e\u6027\u3002 # fields \u548c nebula.fields \u91cc\u7684\u914d\u7f6e\u5fc5\u987b\u4e00\u4e00\u5bf9\u5e94\u3002 # \u5982\u679c\u9700\u8981\u6307\u5b9a\u591a\u4e2a\u5217\u540d\u79f0\uff0c\u7528\u82f1\u6587\u9017\u53f7\uff08,\uff09\u9694\u5f00\u3002 fields: [age,name] nebula.fields: [age,name] # \u6307\u5b9a\u8868\u4e2d\u67d0\u4e00\u5217\u6570\u636e\u4e3a NebulaGraph \u4e2d\u70b9 VID \u7684\u6765\u6e90\u3002 # \u4f8b\u5982 rowkey \u4f5c\u4e3a VID \u7684\u6765\u6e90\uff0c\u8bf7\u586b\u5199\u201crowkey\u201d\u3002 vertex:{ field:rowkey # udf:{ # separator:\"_\" # oldColNames:[field-0,field-1,field-2] # newColName:new-field # } # \u4e3a VID \u589e\u52a0\u6307\u5b9a\u7684\u524d\u7f00\u3002\u4f8b\u5982 VID \u4e3a 12345\uff0c\u589e\u52a0\u524d\u7f00 tag1 \u540e\u4e3a tag1_12345\u3002\u4e0b\u5212\u7ebf\u65e0\u6cd5\u4fee\u6539\u3002 # prefix:\"tag1\" # \u5bf9 string \u7c7b\u578b\u7684 VID \u8fdb\u884c\u54c8\u5e0c\u5316\u64cd\u4f5c\u3002 # policy:hash } # \u6279\u91cf\u64cd\u4f5c\u7c7b\u578b\uff0c\u5305\u62ec INSERT\u3001UPDATE \u548c DELETE\u3002\u9ed8\u8ba4\u4e3a INSERT\u3002 #writeMode: INSERT # \u6279\u91cf\u5220\u9664\u65f6\u662f\u5426\u5220\u9664\u8be5\u70b9\u5173\u8054\u7684\u51fa\u8fb9\u548c\u5165\u8fb9\u3002`writeMode`\u4e3a`DELETE`\u65f6\u8be5\u53c2\u6570\u751f\u6548\u3002 #deleteEdge: false # \u5355\u6279\u6b21\u5199\u5165 NebulaGraph \u7684\u6570\u636e\u6761\u6570\u3002 batch: 256 # Spark \u5206\u533a\u6570\u91cf partition: 32 } # \u8bbe\u7f6e Tag team \u76f8\u5173\u4fe1\u606f\u3002 { name: team type: { source: hbase sink: client } host:192.168.*.* port:2181 table:\"team\" columnFamily:\"cf\" fields: [name] nebula.fields: [name] vertex:{ field:rowkey } batch: 256 partition: 32 } ] # \u5904\u7406\u8fb9\u6570\u636e edges: [ # \u8bbe\u7f6e Edge type follow \u76f8\u5173\u4fe1\u606f { # NebulaGraph \u4e2d\u5bf9\u5e94\u7684 Edge type \u540d\u79f0\u3002 name: follow type: { # \u6307\u5b9a\u6570\u636e\u6e90\u6587\u4ef6\u683c\u5f0f\uff0c\u8bbe\u7f6e\u4e3a HBase\u3002 source: hbase # \u6307\u5b9a\u8fb9\u6570\u636e\u5bfc\u5165 NebulaGraph \u7684\u65b9\u5f0f\uff0c # \u6307\u5b9a\u5982\u4f55\u5c06\u70b9\u6570\u636e\u5bfc\u5165NebulaGraph\uff1aClient \u6216 SST\u3002 sink: client } host:192.168.*.* port:2181 table:\"follow\" columnFamily:\"cf\" # \u5728 fields \u91cc\u6307\u5b9a follow \u8868\u4e2d\u7684\u5217\u540d\u79f0\uff0c\u5176\u5bf9\u5e94\u7684 value \u4f1a\u4f5c\u4e3a NebulaGraph \u4e2d\u6307\u5b9a\u5c5e\u6027\u3002 # fields \u548c nebula.fields \u91cc\u7684\u914d\u7f6e\u5fc5\u987b\u4e00\u4e00\u5bf9\u5e94\u3002 # \u5982\u679c\u9700\u8981\u6307\u5b9a\u591a\u4e2a\u5217\u540d\u79f0\uff0c\u7528\u82f1\u6587\u9017\u53f7\uff08,\uff09\u9694\u5f00\u3002 fields: [degree] nebula.fields: [degree] # \u5728 source \u91cc\uff0c\u5c06 follow \u8868\u4e2d\u67d0\u4e00\u5217\u4f5c\u4e3a\u8fb9\u7684\u8d77\u59cb\u70b9\u6570\u636e\u6e90\u3002\u793a\u4f8b\u4f7f\u7528 rowkey\u3002 # \u5728 target \u91cc\uff0c\u5c06 follow \u8868\u4e2d\u67d0\u4e00\u5217\u4f5c\u4e3a\u8fb9\u7684\u76ee\u7684\u70b9\u6570\u636e\u6e90\u3002\u793a\u4f8b\u4f7f\u7528\u5217 dst_player\u3002 source:{ field:rowkey # udf:{ # separator:\"_\" # oldColNames:[field-0,field-1,field-2] # newColName:new-field # } # \u4e3a VID \u589e\u52a0\u6307\u5b9a\u7684\u524d\u7f00\u3002\u4f8b\u5982 VID \u4e3a 12345\uff0c\u589e\u52a0\u524d\u7f00 tag1 \u540e\u4e3a tag1_12345\u3002\u4e0b\u5212\u7ebf\u65e0\u6cd5\u4fee\u6539\u3002 # prefix:\"tag1\" # \u5bf9 string \u7c7b\u578b\u7684 VID \u8fdb\u884c\u54c8\u5e0c\u5316\u64cd\u4f5c\u3002 # policy:hash } target:{ field:dst_player # udf:{ # separator:\"_\" # oldColNames:[field-0,field-1,field-2] # newColName:new-field # } # \u4e3a VID \u589e\u52a0\u6307\u5b9a\u7684\u524d\u7f00\u3002\u4f8b\u5982 VID \u4e3a 12345\uff0c\u589e\u52a0\u524d\u7f00 tag1 \u540e\u4e3a tag1_12345\u3002\u4e0b\u5212\u7ebf\u65e0\u6cd5\u4fee\u6539\u3002 # prefix:\"tag1\" # \u5bf9 string \u7c7b\u578b\u7684 VID \u8fdb\u884c\u54c8\u5e0c\u5316\u64cd\u4f5c\u3002 # policy:hash } # \u6307\u5b9a\u4e00\u4e2a\u5217\u4f5c\u4e3a rank \u7684\u6e90\uff08\u53ef\u9009\uff09\u3002 #ranking: rank # \u6279\u91cf\u64cd\u4f5c\u7c7b\u578b\uff0c\u5305\u62ec INSERT\u3001UPDATE \u548c DELETE\u3002\u9ed8\u8ba4\u4e3a INSERT\u3002 #writeMode: INSERT # \u5355\u6279\u6b21\u5199\u5165 NebulaGraph \u7684\u6570\u636e\u6761\u6570\u3002 batch: 256 # Spark \u5206\u533a\u6570\u91cf partition: 32 } # \u8bbe\u7f6e Edge type serve \u76f8\u5173\u4fe1\u606f { name: serve type: { source: hbase sink: client } host:192.168.*.* port:2181 table:\"serve\" columnFamily:\"cf\" fields: [start_year,end_year] nebula.fields: [start_year,end_year] source:{ field:rowkey } target:{ field:teamid } # \u6307\u5b9a\u4e00\u4e2a\u5217\u4f5c\u4e3a rank \u7684\u6e90\uff08\u53ef\u9009\uff09\u3002 #ranking: rank batch: 256 partition: 32 } ] } \u6b65\u9aa4 3\uff1a\u5411NebulaGraph\u5bfc\u5165\u6570\u636e \u00b6 \u8fd0\u884c\u5982\u4e0b\u547d\u4ee4\u5c06 HBase \u6570\u636e\u5bfc\u5165\u5230NebulaGraph\u4e2d\u3002\u5173\u4e8e\u53c2\u6570\u7684\u8bf4\u660e\uff0c\u8bf7\u53c2\u89c1 \u5bfc\u5165\u547d\u4ee4\u53c2\u6570 \u3002 ${ SPARK_HOME } /bin/spark-submit --master \"local\" --class com.vesoft.nebula.exchange.Exchange <nebula-exchange-3.6.0.jar_path> -c <hbase_application.conf_path> Note JAR \u5305\u6709\u4e24\u79cd\u83b7\u53d6\u65b9\u5f0f\uff1a \u81ea\u884c\u7f16\u8bd1 \u6216\u8005\u4ece maven \u4ed3\u5e93\u4e0b\u8f7d\u3002 \u793a\u4f8b\uff1a ${ SPARK_HOME } /bin/spark-submit --master \"local\" --class com.vesoft.nebula.exchange.Exchange /root/nebula-exchange/nebula-exchange/target/nebula-exchange-3.6.0.jar -c /root/nebula-exchange/nebula-exchange/target/classes/hbase_application.conf \u7528\u6237\u53ef\u4ee5\u5728\u8fd4\u56de\u4fe1\u606f\u4e2d\u641c\u7d22 batchSuccess.<tag_name/edge_name> \uff0c\u786e\u8ba4\u6210\u529f\u7684\u6570\u91cf\u3002\u4f8b\u5982 batchSuccess.follow: 300 \u3002 \u6b65\u9aa4 4\uff1a\uff08\u53ef\u9009\uff09\u9a8c\u8bc1\u6570\u636e \u00b6 \u7528\u6237\u53ef\u4ee5\u5728NebulaGraph\u5ba2\u6237\u7aef\uff08\u4f8b\u5982 NebulaGraph Studio\uff09\u4e2d\u6267\u884c\u67e5\u8be2\u8bed\u53e5\uff0c\u786e\u8ba4\u6570\u636e\u662f\u5426\u5df2\u5bfc\u5165\u3002\u4f8b\u5982\uff1a LOOKUP ON player YIELD id(vertex); \u7528\u6237\u4e5f\u53ef\u4ee5\u4f7f\u7528\u547d\u4ee4 SHOW STATS \u67e5\u770b\u7edf\u8ba1\u6570\u636e\u3002 \u6b65\u9aa4 5\uff1a\uff08\u5982\u6709\uff09\u5728NebulaGraph\u4e2d\u91cd\u5efa\u7d22\u5f15 \u00b6 \u5bfc\u5165\u6570\u636e\u540e\uff0c\u7528\u6237\u53ef\u4ee5\u5728NebulaGraph\u4e2d\u91cd\u65b0\u521b\u5efa\u5e76\u91cd\u5efa\u7d22\u5f15\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1 \u7d22\u5f15\u4ecb\u7ecd \u3002","title":"\u5bfc\u5165 HBase \u6570\u636e"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-hbase/#hbase","text":"\u672c\u6587\u4ee5\u4e00\u4e2a\u793a\u4f8b\u8bf4\u660e\u5982\u4f55\u4f7f\u7528 Exchange \u5c06\u5b58\u50a8\u5728 HBase \u4e0a\u7684\u6570\u636e\u5bfc\u5165NebulaGraph\u3002","title":"\u5bfc\u5165 HBase \u6570\u636e"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-hbase/#_1","text":"\u672c\u6587\u4ee5 basketballplayer \u6570\u636e\u96c6 \u4e3a\u4f8b\u3002 \u5728\u672c\u793a\u4f8b\u4e2d\uff0c\u8be5\u6570\u636e\u96c6\u5df2\u7ecf\u5b58\u5165 HBase \u4e2d\uff0c\u4ee5 player \u3001 team \u3001 follow \u548c serve \u56db\u4e2a\u8868\u5b58\u50a8\u4e86\u6240\u6709\u70b9\u548c\u8fb9\u7684\u4fe1\u606f\u3002\u4ee5\u4e0b\u4e3a\u5404\u4e2a\u8868\u7684\u90e8\u5206\u6570\u636e\u3002 hbase ( main ): 002 : 0 > scan \"player\" ROW COLUMN + CELL player100 column = cf : age , timestamp = 1618881347530 , value = 42 player100 column = cf : name , timestamp = 1618881354604 , value = Tim Duncan player101 column = cf : age , timestamp = 1618881369124 , value = 36 player101 column = cf : name , timestamp = 1618881379102 , value = Tony Parker player102 column = cf : age , timestamp = 1618881386987 , value = 33 player102 column = cf : name , timestamp = 1618881393370 , value = LaMarcus Aldridge player103 column = cf : age , timestamp = 1618881402002 , value = 32 player103 column = cf : name , timestamp = 1618881407882 , value = Rudy Gay ... hbase ( main ): 003 : 0 > scan \"team\" ROW COLUMN + CELL team200 column = cf : name , timestamp = 1618881445563 , value = Warriors team201 column = cf : name , timestamp = 1618881453636 , value = Nuggets ... hbase ( main ): 004 : 0 > scan \"follow\" ROW COLUMN + CELL player100 column = cf : degree , timestamp = 1618881804853 , value = 95 player100 column = cf : dst_player , timestamp = 1618881791522 , value = player101 player101 column = cf : degree , timestamp = 1618881824685 , value = 90 player101 column = cf : dst_player , timestamp = 1618881816042 , value = player102 ... hbase ( main ): 005 : 0 > scan \"serve\" ROW COLUMN + CELL player100 column = cf : end_year , timestamp = 1618881899333 , value = 2016 player100 column = cf : start_year , timestamp = 1618881890117 , value = 1997 player100 column = cf : teamid , timestamp = 1618881875739 , value = team204 ...","title":"\u6570\u636e\u96c6"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-hbase/#_2","text":"\u672c\u6587\u793a\u4f8b\u5728 MacOS \u4e0b\u5b8c\u6210\uff0c\u4ee5\u4e0b\u662f\u76f8\u5173\u7684\u73af\u5883\u914d\u7f6e\u4fe1\u606f\uff1a \u786c\u4ef6\u89c4\u683c\uff1a CPU\uff1a1.7 GHz Quad-Core Intel Core i7 \u5185\u5b58\uff1a16 GB Spark\uff1a2.4.7\uff0c\u5355\u673a\u7248 HBase\uff1a2.2.7 NebulaGraph\uff1a3.6.0\u3002","title":"\u73af\u5883\u914d\u7f6e"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-hbase/#_3","text":"\u5f00\u59cb\u5bfc\u5165\u6570\u636e\u4e4b\u524d\uff0c\u7528\u6237\u9700\u8981\u786e\u8ba4\u4ee5\u4e0b\u4fe1\u606f\uff1a \u5df2\u7ecf \u5b89\u88c5\u90e8\u7f72NebulaGraph \u5e76\u83b7\u53d6\u5982\u4e0b\u4fe1\u606f\uff1a Graph \u670d\u52a1\u548c Meta \u670d\u52a1\u7684\u7684 IP \u5730\u5740\u548c\u7aef\u53e3\u3002 \u62e5\u6709NebulaGraph\u5199\u6743\u9650\u7684\u7528\u6237\u540d\u548c\u5bc6\u7801\u3002 \u5df2\u7ecf\u7f16\u8bd1 Exchange\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1 \u7f16\u8bd1 Exchange \u3002\u672c\u793a\u4f8b\u4e2d\u4f7f\u7528 Exchange 3.6.0\u3002 \u5df2\u7ecf\u5b89\u88c5 Spark\u3002 \u4e86\u89e3NebulaGraph\u4e2d\u521b\u5efa Schema \u7684\u4fe1\u606f\uff0c\u5305\u62ec Tag \u548c Edge type \u7684\u540d\u79f0\u3001\u5c5e\u6027\u7b49\u3002","title":"\u524d\u63d0\u6761\u4ef6"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-hbase/#_4","text":"","title":"\u64cd\u4f5c\u6b65\u9aa4"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-hbase/#1nebulagraph_schema","text":"\u5206\u6790\u6570\u636e\uff0c\u6309\u4ee5\u4e0b\u6b65\u9aa4\u5728NebulaGraph\u4e2d\u521b\u5efa Schema\uff1a \u786e\u8ba4 Schema \u8981\u7d20\u3002NebulaGraph\u4e2d\u7684 Schema \u8981\u7d20\u5982\u4e0b\u8868\u6240\u793a\u3002 \u8981\u7d20 \u540d\u79f0 \u5c5e\u6027 Tag player name string, age int Tag team name string Edge Type follow degree int Edge Type serve start_year int, end_year int \u5728NebulaGraph\u4e2d\u521b\u5efa\u4e00\u4e2a\u56fe\u7a7a\u95f4 basketballplayer \uff0c\u5e76\u521b\u5efa\u4e00\u4e2a Schema\uff0c\u5982\u4e0b\u6240\u793a\u3002 ## \u521b\u5efa\u56fe\u7a7a\u95f4 nebula> CREATE SPACE basketballplayer \\ (partition_num = 10, \\ replica_factor = 1, \\ vid_type = FIXED_STRING(30)); ## \u9009\u62e9\u56fe\u7a7a\u95f4 basketballplayer nebula> USE basketballplayer; ## \u521b\u5efa Tag player nebula> CREATE TAG player(name string, age int); ## \u521b\u5efa Tag team nebula> CREATE TAG team(name string); ## \u521b\u5efa Edge type follow nebula> CREATE EDGE follow(degree int); ## \u521b\u5efa Edge type serve nebula> CREATE EDGE serve(start_year int, end_year int); \u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u89c1 \u5feb\u901f\u5f00\u59cb \u3002","title":"\u6b65\u9aa4 1\uff1a\u5728NebulaGraph\u4e2d\u521b\u5efa Schema"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-hbase/#2","text":"\u7f16\u8bd1 Exchange \u540e\uff0c\u590d\u5236 target/classes/application.conf \u6587\u4ef6\u8bbe\u7f6e HBase \u6570\u636e\u6e90\u76f8\u5173\u7684\u914d\u7f6e\u3002\u5728\u672c\u793a\u4f8b\u4e2d\uff0c\u590d\u5236\u7684\u6587\u4ef6\u540d\u4e3a hbase_application.conf \u3002\u5404\u4e2a\u914d\u7f6e\u9879\u7684\u8be6\u7ec6\u8bf4\u660e\u8bf7\u53c2\u89c1 \u914d\u7f6e\u8bf4\u660e \u3002 { # Spark \u76f8\u5173\u914d\u7f6e spark: { app: { name: NebulaGraph Exchange 3.6.0 } driver: { cores: 1 maxResultSize: 1G } cores: { max: 16 } } # NebulaGraph \u76f8\u5173\u914d\u7f6e nebula: { address:{ # \u4ee5\u4e0b\u4e3a NebulaGraph \u7684 Graph \u670d\u52a1\u548c Meta \u670d\u52a1\u6240\u5728\u673a\u5668\u7684 IP \u5730\u5740\u53ca\u7aef\u53e3\u3002 # \u5982\u679c\u6709\u591a\u4e2a\u5730\u5740\uff0c\u683c\u5f0f\u4e3a \"ip1:port\",\"ip2:port\",\"ip3:port\"\u3002 # \u4e0d\u540c\u5730\u5740\u4e4b\u95f4\u4ee5\u82f1\u6587\u9017\u53f7 (,) \u9694\u5f00\u3002 graph:[\"127.0.0.1:9669\"] #\u4efb\u610f\u4e00\u4e2a Meta \u670d\u52a1\u7684\u5730\u5740\u3002 #\u5982\u679c\u60a8\u7684 NebulaGraph \u5728\u865a\u62df\u7f51\u7edc\u4e2d\uff0c\u5982k8s\uff0c\u8bf7\u914d\u7f6e Leader Meta\u7684\u5730\u5740\u3002 meta:[\"127.0.0.1:9559\"] } # \u586b\u5199\u7684\u8d26\u53f7\u5fc5\u987b\u62e5\u6709 NebulaGraph \u76f8\u5e94\u56fe\u7a7a\u95f4\u7684\u5199\u6570\u636e\u6743\u9650\u3002 user: root pswd: nebula # \u586b\u5199 NebulaGraph \u4e2d\u9700\u8981\u5199\u5165\u6570\u636e\u7684\u56fe\u7a7a\u95f4\u540d\u79f0\u3002 space: basketballplayer connection: { timeout: 3000 retry: 3 } execution: { retry: 3 } error: { max: 32 output: /tmp/errors } rate: { limit: 1024 timeout: 1000 } } # \u5904\u7406\u70b9 tags: [ # \u8bbe\u7f6e Tag player \u76f8\u5173\u4fe1\u606f\u3002 # \u5982\u679c\u9700\u8981\u5c06 rowkey \u8bbe\u7f6e\u4e3a\u6570\u636e\u6e90\uff0c\u8bf7\u586b\u5199\u201crowkey\u201d, \u5217\u65cf\u5185\u7684\u5217\u8bf7\u586b\u5199\u5b9e\u9645\u5217\u540d\u3002 { # NebulaGraph \u4e2d\u5bf9\u5e94\u7684 Tag \u540d\u79f0\u3002 name: player type: { # \u6307\u5b9a\u6570\u636e\u6e90\u6587\u4ef6\u683c\u5f0f\uff0c\u8bbe\u7f6e\u4e3a HBase\u3002 source: hbase # \u6307\u5b9a\u5982\u4f55\u5c06\u70b9\u6570\u636e\u5bfc\u5165NebulaGraph\uff1aClient \u6216 SST\u3002 sink: client } host:192.168.*.* port:2181 table:\"player\" columnFamily:\"cf\" # \u5728 fields \u91cc\u6307\u5b9a player \u8868\u4e2d\u7684\u5217\u540d\u79f0\uff0c\u5176\u5bf9\u5e94\u7684 value \u4f1a\u4f5c\u4e3a NebulaGraph \u4e2d\u6307\u5b9a\u5c5e\u6027\u3002 # fields \u548c nebula.fields \u91cc\u7684\u914d\u7f6e\u5fc5\u987b\u4e00\u4e00\u5bf9\u5e94\u3002 # \u5982\u679c\u9700\u8981\u6307\u5b9a\u591a\u4e2a\u5217\u540d\u79f0\uff0c\u7528\u82f1\u6587\u9017\u53f7\uff08,\uff09\u9694\u5f00\u3002 fields: [age,name] nebula.fields: [age,name] # \u6307\u5b9a\u8868\u4e2d\u67d0\u4e00\u5217\u6570\u636e\u4e3a NebulaGraph \u4e2d\u70b9 VID \u7684\u6765\u6e90\u3002 # \u4f8b\u5982 rowkey \u4f5c\u4e3a VID \u7684\u6765\u6e90\uff0c\u8bf7\u586b\u5199\u201crowkey\u201d\u3002 vertex:{ field:rowkey # udf:{ # separator:\"_\" # oldColNames:[field-0,field-1,field-2] # newColName:new-field # } # \u4e3a VID \u589e\u52a0\u6307\u5b9a\u7684\u524d\u7f00\u3002\u4f8b\u5982 VID \u4e3a 12345\uff0c\u589e\u52a0\u524d\u7f00 tag1 \u540e\u4e3a tag1_12345\u3002\u4e0b\u5212\u7ebf\u65e0\u6cd5\u4fee\u6539\u3002 # prefix:\"tag1\" # \u5bf9 string \u7c7b\u578b\u7684 VID \u8fdb\u884c\u54c8\u5e0c\u5316\u64cd\u4f5c\u3002 # policy:hash } # \u6279\u91cf\u64cd\u4f5c\u7c7b\u578b\uff0c\u5305\u62ec INSERT\u3001UPDATE \u548c DELETE\u3002\u9ed8\u8ba4\u4e3a INSERT\u3002 #writeMode: INSERT # \u6279\u91cf\u5220\u9664\u65f6\u662f\u5426\u5220\u9664\u8be5\u70b9\u5173\u8054\u7684\u51fa\u8fb9\u548c\u5165\u8fb9\u3002`writeMode`\u4e3a`DELETE`\u65f6\u8be5\u53c2\u6570\u751f\u6548\u3002 #deleteEdge: false # \u5355\u6279\u6b21\u5199\u5165 NebulaGraph \u7684\u6570\u636e\u6761\u6570\u3002 batch: 256 # Spark \u5206\u533a\u6570\u91cf partition: 32 } # \u8bbe\u7f6e Tag team \u76f8\u5173\u4fe1\u606f\u3002 { name: team type: { source: hbase sink: client } host:192.168.*.* port:2181 table:\"team\" columnFamily:\"cf\" fields: [name] nebula.fields: [name] vertex:{ field:rowkey } batch: 256 partition: 32 } ] # \u5904\u7406\u8fb9\u6570\u636e edges: [ # \u8bbe\u7f6e Edge type follow \u76f8\u5173\u4fe1\u606f { # NebulaGraph \u4e2d\u5bf9\u5e94\u7684 Edge type \u540d\u79f0\u3002 name: follow type: { # \u6307\u5b9a\u6570\u636e\u6e90\u6587\u4ef6\u683c\u5f0f\uff0c\u8bbe\u7f6e\u4e3a HBase\u3002 source: hbase # \u6307\u5b9a\u8fb9\u6570\u636e\u5bfc\u5165 NebulaGraph \u7684\u65b9\u5f0f\uff0c # \u6307\u5b9a\u5982\u4f55\u5c06\u70b9\u6570\u636e\u5bfc\u5165NebulaGraph\uff1aClient \u6216 SST\u3002 sink: client } host:192.168.*.* port:2181 table:\"follow\" columnFamily:\"cf\" # \u5728 fields \u91cc\u6307\u5b9a follow \u8868\u4e2d\u7684\u5217\u540d\u79f0\uff0c\u5176\u5bf9\u5e94\u7684 value \u4f1a\u4f5c\u4e3a NebulaGraph \u4e2d\u6307\u5b9a\u5c5e\u6027\u3002 # fields \u548c nebula.fields \u91cc\u7684\u914d\u7f6e\u5fc5\u987b\u4e00\u4e00\u5bf9\u5e94\u3002 # \u5982\u679c\u9700\u8981\u6307\u5b9a\u591a\u4e2a\u5217\u540d\u79f0\uff0c\u7528\u82f1\u6587\u9017\u53f7\uff08,\uff09\u9694\u5f00\u3002 fields: [degree] nebula.fields: [degree] # \u5728 source \u91cc\uff0c\u5c06 follow \u8868\u4e2d\u67d0\u4e00\u5217\u4f5c\u4e3a\u8fb9\u7684\u8d77\u59cb\u70b9\u6570\u636e\u6e90\u3002\u793a\u4f8b\u4f7f\u7528 rowkey\u3002 # \u5728 target \u91cc\uff0c\u5c06 follow \u8868\u4e2d\u67d0\u4e00\u5217\u4f5c\u4e3a\u8fb9\u7684\u76ee\u7684\u70b9\u6570\u636e\u6e90\u3002\u793a\u4f8b\u4f7f\u7528\u5217 dst_player\u3002 source:{ field:rowkey # udf:{ # separator:\"_\" # oldColNames:[field-0,field-1,field-2] # newColName:new-field # } # \u4e3a VID \u589e\u52a0\u6307\u5b9a\u7684\u524d\u7f00\u3002\u4f8b\u5982 VID \u4e3a 12345\uff0c\u589e\u52a0\u524d\u7f00 tag1 \u540e\u4e3a tag1_12345\u3002\u4e0b\u5212\u7ebf\u65e0\u6cd5\u4fee\u6539\u3002 # prefix:\"tag1\" # \u5bf9 string \u7c7b\u578b\u7684 VID \u8fdb\u884c\u54c8\u5e0c\u5316\u64cd\u4f5c\u3002 # policy:hash } target:{ field:dst_player # udf:{ # separator:\"_\" # oldColNames:[field-0,field-1,field-2] # newColName:new-field # } # \u4e3a VID \u589e\u52a0\u6307\u5b9a\u7684\u524d\u7f00\u3002\u4f8b\u5982 VID \u4e3a 12345\uff0c\u589e\u52a0\u524d\u7f00 tag1 \u540e\u4e3a tag1_12345\u3002\u4e0b\u5212\u7ebf\u65e0\u6cd5\u4fee\u6539\u3002 # prefix:\"tag1\" # \u5bf9 string \u7c7b\u578b\u7684 VID \u8fdb\u884c\u54c8\u5e0c\u5316\u64cd\u4f5c\u3002 # policy:hash } # \u6307\u5b9a\u4e00\u4e2a\u5217\u4f5c\u4e3a rank \u7684\u6e90\uff08\u53ef\u9009\uff09\u3002 #ranking: rank # \u6279\u91cf\u64cd\u4f5c\u7c7b\u578b\uff0c\u5305\u62ec INSERT\u3001UPDATE \u548c DELETE\u3002\u9ed8\u8ba4\u4e3a INSERT\u3002 #writeMode: INSERT # \u5355\u6279\u6b21\u5199\u5165 NebulaGraph \u7684\u6570\u636e\u6761\u6570\u3002 batch: 256 # Spark \u5206\u533a\u6570\u91cf partition: 32 } # \u8bbe\u7f6e Edge type serve \u76f8\u5173\u4fe1\u606f { name: serve type: { source: hbase sink: client } host:192.168.*.* port:2181 table:\"serve\" columnFamily:\"cf\" fields: [start_year,end_year] nebula.fields: [start_year,end_year] source:{ field:rowkey } target:{ field:teamid } # \u6307\u5b9a\u4e00\u4e2a\u5217\u4f5c\u4e3a rank \u7684\u6e90\uff08\u53ef\u9009\uff09\u3002 #ranking: rank batch: 256 partition: 32 } ] }","title":"\u6b65\u9aa4 2\uff1a\u4fee\u6539\u914d\u7f6e\u6587\u4ef6"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-hbase/#3nebulagraph","text":"\u8fd0\u884c\u5982\u4e0b\u547d\u4ee4\u5c06 HBase \u6570\u636e\u5bfc\u5165\u5230NebulaGraph\u4e2d\u3002\u5173\u4e8e\u53c2\u6570\u7684\u8bf4\u660e\uff0c\u8bf7\u53c2\u89c1 \u5bfc\u5165\u547d\u4ee4\u53c2\u6570 \u3002 ${ SPARK_HOME } /bin/spark-submit --master \"local\" --class com.vesoft.nebula.exchange.Exchange <nebula-exchange-3.6.0.jar_path> -c <hbase_application.conf_path> Note JAR \u5305\u6709\u4e24\u79cd\u83b7\u53d6\u65b9\u5f0f\uff1a \u81ea\u884c\u7f16\u8bd1 \u6216\u8005\u4ece maven \u4ed3\u5e93\u4e0b\u8f7d\u3002 \u793a\u4f8b\uff1a ${ SPARK_HOME } /bin/spark-submit --master \"local\" --class com.vesoft.nebula.exchange.Exchange /root/nebula-exchange/nebula-exchange/target/nebula-exchange-3.6.0.jar -c /root/nebula-exchange/nebula-exchange/target/classes/hbase_application.conf \u7528\u6237\u53ef\u4ee5\u5728\u8fd4\u56de\u4fe1\u606f\u4e2d\u641c\u7d22 batchSuccess.<tag_name/edge_name> \uff0c\u786e\u8ba4\u6210\u529f\u7684\u6570\u91cf\u3002\u4f8b\u5982 batchSuccess.follow: 300 \u3002","title":"\u6b65\u9aa4 3\uff1a\u5411NebulaGraph\u5bfc\u5165\u6570\u636e"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-hbase/#4","text":"\u7528\u6237\u53ef\u4ee5\u5728NebulaGraph\u5ba2\u6237\u7aef\uff08\u4f8b\u5982 NebulaGraph Studio\uff09\u4e2d\u6267\u884c\u67e5\u8be2\u8bed\u53e5\uff0c\u786e\u8ba4\u6570\u636e\u662f\u5426\u5df2\u5bfc\u5165\u3002\u4f8b\u5982\uff1a LOOKUP ON player YIELD id(vertex); \u7528\u6237\u4e5f\u53ef\u4ee5\u4f7f\u7528\u547d\u4ee4 SHOW STATS \u67e5\u770b\u7edf\u8ba1\u6570\u636e\u3002","title":"\u6b65\u9aa4 4\uff1a\uff08\u53ef\u9009\uff09\u9a8c\u8bc1\u6570\u636e"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-hbase/#5nebulagraph","text":"\u5bfc\u5165\u6570\u636e\u540e\uff0c\u7528\u6237\u53ef\u4ee5\u5728NebulaGraph\u4e2d\u91cd\u65b0\u521b\u5efa\u5e76\u91cd\u5efa\u7d22\u5f15\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1 \u7d22\u5f15\u4ecb\u7ecd \u3002","title":"\u6b65\u9aa4 5\uff1a\uff08\u5982\u6709\uff09\u5728NebulaGraph\u4e2d\u91cd\u5efa\u7d22\u5f15"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-hive/","text":"\u5bfc\u5165 Hive \u6570\u636e \u00b6 \u672c\u6587\u4ee5\u4e00\u4e2a\u793a\u4f8b\u8bf4\u660e\u5982\u4f55\u4f7f\u7528 Exchange \u5c06\u5b58\u50a8\u5728 Hive \u4e0a\u7684\u6570\u636e\u5bfc\u5165NebulaGraph\u3002 \u6570\u636e\u96c6 \u00b6 \u672c\u6587\u4ee5 basketballplayer \u6570\u636e\u96c6 \u4e3a\u4f8b\u3002 \u5728\u672c\u793a\u4f8b\u4e2d\uff0c\u8be5\u6570\u636e\u96c6\u5df2\u7ecf\u5b58\u5165 Hive \u4e2d\u540d\u4e3a basketball \u7684\u6570\u636e\u5e93\u4e2d\uff0c\u4ee5 player \u3001 team \u3001 follow \u548c serve \u56db\u4e2a\u8868\u5b58\u50a8\u4e86\u6240\u6709\u70b9\u548c\u8fb9\u7684\u4fe1\u606f\u3002\u4ee5\u4e0b\u4e3a\u5404\u4e2a\u8868\u7684\u7ed3\u6784\u3002 scala > spark . sql ( \"describe basketball.player\" ). show + --------+---------+-------+ | col_name | data_type | comment | + --------+---------+-------+ | playerid | string | null | | age | bigint | null | | name | string | null | + --------+---------+-------+ scala > spark . sql ( \"describe basketball.team\" ). show + ----------+---------+-------+ | col_name | data_type | comment | + ----------+---------+-------+ | teamid | string | null | | name | string | null | + ----------+---------+-------+ scala > spark . sql ( \"describe basketball.follow\" ). show + ----------+---------+-------+ | col_name | data_type | comment | + ----------+---------+-------+ | src_player | string | null | | dst_player | string | null | | degree | bigint | null | + ----------+---------+-------+ scala > spark . sql ( \"describe basketball.serve\" ). show + ----------+---------+-------+ | col_name | data_type | comment | + ----------+---------+-------+ | playerid | string | null | | teamid | string | null | | start_year | bigint | null | | end_year | bigint | null | + ----------+---------+-------+ \u8bf4\u660e \uff1aHive \u7684\u6570\u636e\u7c7b\u578b bigint \u4e0eNebulaGraph\u7684 int \u5bf9\u5e94\u3002 \u73af\u5883\u914d\u7f6e \u00b6 \u672c\u6587\u793a\u4f8b\u5728 MacOS \u4e0b\u5b8c\u6210\uff0c\u4ee5\u4e0b\u662f\u76f8\u5173\u7684\u73af\u5883\u914d\u7f6e\u4fe1\u606f\uff1a \u786c\u4ef6\u89c4\u683c\uff1a CPU\uff1a1.7 GHz Quad-Core Intel Core i7 \u5185\u5b58\uff1a16 GB Spark\uff1a2.4.7\uff0c\u5355\u673a\u7248 Hive\uff1a2.3.7\uff0cHive Metastore \u6570\u636e\u5e93\u4e3a MySQL 8.0.22 NebulaGraph\uff1a3.6.0\u3002 \u524d\u63d0\u6761\u4ef6 \u00b6 \u5f00\u59cb\u5bfc\u5165\u6570\u636e\u4e4b\u524d\uff0c\u7528\u6237\u9700\u8981\u786e\u8ba4\u4ee5\u4e0b\u4fe1\u606f\uff1a \u5df2\u7ecf \u5b89\u88c5\u90e8\u7f72NebulaGraph \u5e76\u83b7\u53d6\u5982\u4e0b\u4fe1\u606f\uff1a Graph \u670d\u52a1\u548c Meta \u670d\u52a1\u7684\u7684 IP \u5730\u5740\u548c\u7aef\u53e3\u3002 \u62e5\u6709NebulaGraph\u5199\u6743\u9650\u7684\u7528\u6237\u540d\u548c\u5bc6\u7801\u3002 \u5df2\u7ecf\u7f16\u8bd1 Exchange\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1 \u7f16\u8bd1 Exchange \u3002\u672c\u793a\u4f8b\u4e2d\u4f7f\u7528 Exchange 3.6.0\u3002 \u5df2\u7ecf\u5b89\u88c5 Spark\u3002 \u4e86\u89e3NebulaGraph\u4e2d\u521b\u5efa Schema \u7684\u4fe1\u606f\uff0c\u5305\u62ec Tag \u548c Edge type \u7684\u540d\u79f0\u3001\u5c5e\u6027\u7b49\u3002 \u5df2\u7ecf\u542f\u52a8 Hive Metastore \u6570\u636e\u5e93\uff08\u672c\u793a\u4f8b\u4e2d\u4e3a MySQL\uff09\u3002 \u64cd\u4f5c\u6b65\u9aa4 \u00b6 \u6b65\u9aa4 1\uff1a\u5728NebulaGraph\u4e2d\u521b\u5efa Schema \u00b6 \u5206\u6790\u6570\u636e\uff0c\u6309\u4ee5\u4e0b\u6b65\u9aa4\u5728NebulaGraph\u4e2d\u521b\u5efa Schema\uff1a \u786e\u8ba4 Schema \u8981\u7d20\u3002NebulaGraph\u4e2d\u7684 Schema \u8981\u7d20\u5982\u4e0b\u8868\u6240\u793a\u3002 \u8981\u7d20 \u540d\u79f0 \u5c5e\u6027 Tag player name string, age int Tag team name string Edge Type follow degree int Edge Type serve start_year int, end_year int \u5728NebulaGraph\u4e2d\u521b\u5efa\u4e00\u4e2a\u56fe\u7a7a\u95f4 basketballplayer \uff0c\u5e76\u521b\u5efa\u4e00\u4e2a Schema\uff0c\u5982\u4e0b\u6240\u793a\u3002 ## \u521b\u5efa\u56fe\u7a7a\u95f4 nebula> CREATE SPACE basketballplayer \\ (partition_num = 10, \\ replica_factor = 1, \\ vid_type = FIXED_STRING(30)); ## \u9009\u62e9\u56fe\u7a7a\u95f4 basketballplayer nebula> USE basketballplayer; ## \u521b\u5efa Tag player nebula> CREATE TAG player(name string, age int); ## \u521b\u5efa Tag team nebula> CREATE TAG team(name string); ## \u521b\u5efa Edge type follow nebula> CREATE EDGE follow(degree int); ## \u521b\u5efa Edge type serve nebula> CREATE EDGE serve(start_year int, end_year int); \u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u89c1 \u5feb\u901f\u5f00\u59cb \u3002 \u6b65\u9aa4 2\uff1a\u4f7f\u7528 Spark SQL \u786e\u8ba4 Hive SQL \u8bed\u53e5 \u00b6 \u542f\u52a8 spark-shell \u73af\u5883\u540e\uff0c\u4f9d\u6b21\u8fd0\u884c\u4ee5\u4e0b\u8bed\u53e5\uff0c\u786e\u8ba4 Spark \u80fd\u8bfb\u53d6 Hive \u4e2d\u7684\u6570\u636e\u3002 scala > sql ( \"select playerid, age, name from basketball.player\" ). show scala > sql ( \"select teamid, name from basketball.team\" ). show scala > sql ( \"select src_player, dst_player, degree from basketball.follow\" ). show scala > sql ( \"select playerid, teamid, start_year, end_year from basketball.serve\" ). show \u4ee5\u4e0b\u4e3a\u8868 basketball.player \u4e2d\u8bfb\u51fa\u7684\u7ed3\u679c\u3002 +---------+----+-----------------+ | playerid | age | name | +---------+----+-----------------+ | player100 | 42 | Tim Duncan | | player101 | 36 | Tony Parker | | player102 | 33 | LaMarcus Aldridge | | player103 | 32 | Rudy Gay | | player104 | 32 | Marco Belinelli | +---------+----+-----------------+ ... \u6b65\u9aa4 3\uff1a\u4fee\u6539\u914d\u7f6e\u6587\u4ef6 \u00b6 \u7f16\u8bd1 Exchange \u540e\uff0c\u590d\u5236 target/classes/application.conf \u6587\u4ef6\u8bbe\u7f6e Hive \u6570\u636e\u6e90\u76f8\u5173\u7684\u914d\u7f6e\u3002\u5728\u672c\u793a\u4f8b\u4e2d\uff0c\u590d\u5236\u7684\u6587\u4ef6\u540d\u4e3a hive_application.conf \u3002\u5404\u4e2a\u914d\u7f6e\u9879\u7684\u8be6\u7ec6\u8bf4\u660e\u8bf7\u53c2\u89c1 \u914d\u7f6e\u8bf4\u660e \u3002 { # Spark \u76f8\u5173\u914d\u7f6e spark: { app: { name: NebulaGraph Exchange 3.6.0 } driver: { cores: 1 maxResultSize: 1G } cores: { max: 16 } } # \u5982\u679c Spark \u548c Hive \u90e8\u7f72\u5728\u4e0d\u540c\u96c6\u7fa4\uff0c\u624d\u9700\u8981\u914d\u7f6e\u8fde\u63a5 Hive \u7684\u53c2\u6570\uff0c\u5426\u5219\u8bf7\u5ffd\u7565\u8fd9\u4e9b\u914d\u7f6e\u3002 #hive: { # waredir: \"hdfs://NAMENODE_IP:9000/apps/svr/hive-xxx/warehouse/\" # connectionURL: \"jdbc:mysql://your_ip:3306/hive_spark?characterEncoding=UTF-8\" # connectionDriverName: \"com.mysql.jdbc.Driver\" # connectionUserName: \"user\" # connectionPassword: \"password\" #} # NebulaGraph \u76f8\u5173\u914d\u7f6e nebula: { address:{ # \u4ee5\u4e0b\u4e3a NebulaGraph \u7684 Graph \u670d\u52a1\u548c\u6240\u6709 Meta \u670d\u52a1\u6240\u5728\u673a\u5668\u7684 IP \u5730\u5740\u53ca\u7aef\u53e3\u3002 # \u5982\u679c\u6709\u591a\u4e2a\u5730\u5740\uff0c\u683c\u5f0f\u4e3a \"ip1:port\",\"ip2:port\",\"ip3:port\"\u3002 # \u4e0d\u540c\u5730\u5740\u4e4b\u95f4\u4ee5\u82f1\u6587\u9017\u53f7 (,) \u9694\u5f00\u3002 graph:[\"127.0.0.1:9669\"] #\u4efb\u610f\u4e00\u4e2a Meta \u670d\u52a1\u7684\u5730\u5740\u3002 #\u5982\u679c\u60a8\u7684 NebulaGraph \u5728\u865a\u62df\u7f51\u7edc\u4e2d\uff0c\u5982k8s\uff0c\u8bf7\u914d\u7f6e Leader Meta\u7684\u5730\u5740\u3002 meta:[\"127.0.0.1:9559\"] } # \u586b\u5199\u7684\u8d26\u53f7\u5fc5\u987b\u62e5\u6709 NebulaGraph \u76f8\u5e94\u56fe\u7a7a\u95f4\u7684\u5199\u6570\u636e\u6743\u9650\u3002 user: root pswd: nebula # \u586b\u5199 NebulaGraph \u4e2d\u9700\u8981\u5199\u5165\u6570\u636e\u7684\u56fe\u7a7a\u95f4\u540d\u79f0\u3002 space: basketballplayer connection: { timeout: 3000 retry: 3 } execution: { retry: 3 } error: { max: 32 output: /tmp/errors } rate: { limit: 1024 timeout: 1000 } } # \u5904\u7406\u70b9 tags: [ # \u8bbe\u7f6e Tag player \u76f8\u5173\u4fe1\u606f\u3002 { # NebulaGraph \u4e2d\u5bf9\u5e94\u7684 Tag \u540d\u79f0\u3002 name: player type: { # \u6307\u5b9a\u6570\u636e\u6e90\u6587\u4ef6\u683c\u5f0f\uff0c\u8bbe\u7f6e\u4e3a hive\u3002 source: hive # \u6307\u5b9a\u5982\u4f55\u5c06\u70b9\u6570\u636e\u5bfc\u5165NebulaGraph\uff1aClient \u6216 SST\u3002 sink: client } # \u8bbe\u7f6e\u8bfb\u53d6\u6570\u636e\u5e93 basketball \u4e2d player \u8868\u6570\u636e\u7684 SQL \u8bed\u53e5 exec: \"select playerid, age, name from basketball.player\" # \u5728 fields \u91cc\u6307\u5b9a player \u8868\u4e2d\u7684\u5217\u540d\u79f0\uff0c\u5176\u5bf9\u5e94\u7684 value \u4f1a\u4f5c\u4e3a NebulaGraph \u4e2d\u6307\u5b9a\u5c5e\u6027\u3002 # fields \u548c nebula.fields \u91cc\u7684\u914d\u7f6e\u5fc5\u987b\u4e00\u4e00\u5bf9\u5e94\u3002 # \u5982\u679c\u9700\u8981\u6307\u5b9a\u591a\u4e2a\u5217\u540d\u79f0\uff0c\u7528\u82f1\u6587\u9017\u53f7\uff08,\uff09\u9694\u5f00\u3002 fields: [age,name] nebula.fields: [age,name] # \u6307\u5b9a\u8868\u4e2d\u67d0\u4e00\u5217\u6570\u636e\u4e3a NebulaGraph \u4e2d\u70b9 VID \u7684\u6765\u6e90\u3002 vertex:{ field:playerid # udf:{ # separator:\"_\" # oldColNames:[field-0,field-1,field-2] # newColName:new-field # } # \u4e3a VID \u589e\u52a0\u6307\u5b9a\u7684\u524d\u7f00\u3002\u4f8b\u5982 VID \u4e3a 12345\uff0c\u589e\u52a0\u524d\u7f00 tag1 \u540e\u4e3a tag1_12345\u3002\u4e0b\u5212\u7ebf\u65e0\u6cd5\u4fee\u6539\u3002 # prefix:\"tag1\" # \u5bf9 string \u7c7b\u578b\u7684 VID \u8fdb\u884c\u54c8\u5e0c\u5316\u64cd\u4f5c\u3002 # policy:hash } # \u6279\u91cf\u64cd\u4f5c\u7c7b\u578b\uff0c\u5305\u62ec INSERT\u3001UPDATE \u548c DELETE\u3002\u9ed8\u8ba4\u4e3a INSERT\u3002 #writeMode: INSERT # \u6279\u91cf\u5220\u9664\u65f6\u662f\u5426\u5220\u9664\u8be5\u70b9\u5173\u8054\u7684\u51fa\u8fb9\u548c\u5165\u8fb9\u3002`writeMode`\u4e3a`DELETE`\u65f6\u8be5\u53c2\u6570\u751f\u6548\u3002 #deleteEdge: false # \u5355\u6279\u6b21\u5199\u5165 NebulaGraph \u7684\u6700\u5927\u6570\u636e\u6761\u6570\u3002 batch: 256 # Spark \u5206\u533a\u6570\u91cf partition: 32 } # \u8bbe\u7f6e Tag team \u76f8\u5173\u4fe1\u606f\u3002 { name: team type: { source: hive sink: client } exec: \"select teamid, name from basketball.team\" fields: [name] nebula.fields: [name] vertex: { field: teamid } batch: 256 partition: 32 } ] # \u5904\u7406\u8fb9\u6570\u636e edges: [ # \u8bbe\u7f6e Edge type follow \u76f8\u5173\u4fe1\u606f { # NebulaGraph \u4e2d\u5bf9\u5e94\u7684 Edge type \u540d\u79f0\u3002 name: follow type: { # \u6307\u5b9a\u6570\u636e\u6e90\u6587\u4ef6\u683c\u5f0f\uff0c\u8bbe\u7f6e\u4e3a hive\u3002 source: hive # \u6307\u5b9a\u8fb9\u6570\u636e\u5bfc\u5165 NebulaGraph \u7684\u65b9\u5f0f\uff0c # \u6307\u5b9a\u5982\u4f55\u5c06\u70b9\u6570\u636e\u5bfc\u5165NebulaGraph\uff1aClient \u6216 SST\u3002 sink: client } # \u8bbe\u7f6e\u8bfb\u53d6\u6570\u636e\u5e93 basketball \u4e2d follow \u8868\u6570\u636e\u7684 SQL \u8bed\u53e5\u3002 exec: \"select src_player, dst_player, degree from basketball.follow\" # \u5728 fields \u91cc\u6307\u5b9a follow \u8868\u4e2d\u7684\u5217\u540d\u79f0\uff0c\u5176\u5bf9\u5e94\u7684 value \u4f1a\u4f5c\u4e3a NebulaGraph \u4e2d\u6307\u5b9a\u5c5e\u6027\u3002 # fields \u548c nebula.fields \u91cc\u7684\u914d\u7f6e\u5fc5\u987b\u4e00\u4e00\u5bf9\u5e94\u3002 # \u5982\u679c\u9700\u8981\u6307\u5b9a\u591a\u4e2a\u5217\u540d\u79f0\uff0c\u7528\u82f1\u6587\u9017\u53f7\uff08,\uff09\u9694\u5f00\u3002 fields: [degree] nebula.fields: [degree] # \u5728 source \u91cc\uff0c\u5c06 follow \u8868\u4e2d\u67d0\u4e00\u5217\u4f5c\u4e3a\u8fb9\u7684\u8d77\u59cb\u70b9\u6570\u636e\u6e90\u3002 # \u5728 target \u91cc\uff0c\u5c06 follow \u8868\u4e2d\u67d0\u4e00\u5217\u4f5c\u4e3a\u8fb9\u7684\u76ee\u7684\u70b9\u6570\u636e\u6e90\u3002 source: { field: src_player # udf:{ # separator:\"_\" # oldColNames:[field-0,field-1,field-2] # newColName:new-field # } # \u4e3a VID \u589e\u52a0\u6307\u5b9a\u7684\u524d\u7f00\u3002\u4f8b\u5982 VID \u4e3a 12345\uff0c\u589e\u52a0\u524d\u7f00 tag1 \u540e\u4e3a tag1_12345\u3002\u4e0b\u5212\u7ebf\u65e0\u6cd5\u4fee\u6539\u3002 # prefix:\"tag1\" # \u5bf9 string \u7c7b\u578b\u7684 VID \u8fdb\u884c\u54c8\u5e0c\u5316\u64cd\u4f5c\u3002 # policy:hash } target: { field: dst_player # udf:{ # separator:\"_\" # oldColNames:[field-0,field-1,field-2] # newColName:new-field # } # \u4e3a VID \u589e\u52a0\u6307\u5b9a\u7684\u524d\u7f00\u3002\u4f8b\u5982 VID \u4e3a 12345\uff0c\u589e\u52a0\u524d\u7f00 tag1 \u540e\u4e3a tag1_12345\u3002\u4e0b\u5212\u7ebf\u65e0\u6cd5\u4fee\u6539\u3002 # prefix:\"tag1\" # \u5bf9 string \u7c7b\u578b\u7684 VID \u8fdb\u884c\u54c8\u5e0c\u5316\u64cd\u4f5c\u3002 # policy:hash } # \u6307\u5b9a\u4e00\u4e2a\u5217\u4f5c\u4e3a rank \u7684\u6e90\uff08\u53ef\u9009\uff09\u3002 #ranking: rank # \u6279\u91cf\u64cd\u4f5c\u7c7b\u578b\uff0c\u5305\u62ec INSERT\u3001UPDATE \u548c DELETE\u3002\u9ed8\u8ba4\u4e3a INSERT\u3002 #writeMode: INSERT # \u5355\u6279\u6b21\u5199\u5165 NebulaGraph \u7684\u6700\u5927\u6570\u636e\u6761\u6570\u3002 batch: 256 # Spark \u5206\u533a\u6570\u91cf partition: 32 } # \u8bbe\u7f6e Edge type serve \u76f8\u5173\u4fe1\u606f { name: serve type: { source: hive sink: client } exec: \"select playerid, teamid, start_year, end_year from basketball.serve\" fields: [start_year,end_year] nebula.fields: [start_year,end_year] source: { field: playerid } target: { field: teamid } # \u6307\u5b9a\u4e00\u4e2a\u5217\u4f5c\u4e3a rank \u7684\u6e90\uff08\u53ef\u9009\uff09\u3002 #ranking: rank batch: 256 partition: 32 } ] } \u6b65\u9aa4 4\uff1a\u5411NebulaGraph\u5bfc\u5165\u6570\u636e \u00b6 \u8fd0\u884c\u5982\u4e0b\u547d\u4ee4\u5c06 Hive \u6570\u636e\u5bfc\u5165\u5230NebulaGraph\u4e2d\u3002\u5173\u4e8e\u53c2\u6570\u7684\u8bf4\u660e\uff0c\u8bf7\u53c2\u89c1 \u5bfc\u5165\u547d\u4ee4\u53c2\u6570 \u3002 ${ SPARK_HOME } /bin/spark-submit --master \"local\" --class com.vesoft.nebula.exchange.Exchange <nebula-exchange-3.6.0.jar_path> -c <hive_application.conf_path> -h Note JAR \u5305\u6709\u4e24\u79cd\u83b7\u53d6\u65b9\u5f0f\uff1a \u81ea\u884c\u7f16\u8bd1 \u6216\u8005\u4ece maven \u4ed3\u5e93\u4e0b\u8f7d\u3002 \u793a\u4f8b\uff1a ${ SPARK_HOME } /bin/spark-submit --master \"local\" --class com.vesoft.nebula.exchange.Exchange /root/nebula-exchange/nebula-exchange/target/nebula-exchange-3.6.0.jar -c /root/nebula-exchange/nebula-exchange/target/classes/hive_application.conf -h \u7528\u6237\u53ef\u4ee5\u5728\u8fd4\u56de\u4fe1\u606f\u4e2d\u641c\u7d22 batchSuccess.<tag_name/edge_name> \uff0c\u786e\u8ba4\u6210\u529f\u7684\u6570\u91cf\u3002\u4f8b\u5982 batchSuccess.follow: 300 \u3002 \u6b65\u9aa4 5\uff1a\uff08\u53ef\u9009\uff09\u9a8c\u8bc1\u6570\u636e \u00b6 \u7528\u6237\u53ef\u4ee5\u5728NebulaGraph\u5ba2\u6237\u7aef\uff08\u4f8b\u5982 NebulaGraph Studio\uff09\u4e2d\u6267\u884c\u67e5\u8be2\u8bed\u53e5\uff0c\u786e\u8ba4\u6570\u636e\u662f\u5426\u5df2\u5bfc\u5165\u3002\u4f8b\u5982\uff1a LOOKUP ON player YIELD id(vertex); \u7528\u6237\u4e5f\u53ef\u4ee5\u4f7f\u7528\u547d\u4ee4 SHOW STATS \u67e5\u770b\u7edf\u8ba1\u6570\u636e\u3002 \u6b65\u9aa4 6\uff1a\uff08\u5982\u6709\uff09\u5728NebulaGraph\u4e2d\u91cd\u5efa\u7d22\u5f15 \u00b6 \u5bfc\u5165\u6570\u636e\u540e\uff0c\u7528\u6237\u53ef\u4ee5\u5728NebulaGraph\u4e2d\u91cd\u65b0\u521b\u5efa\u5e76\u91cd\u5efa\u7d22\u5f15\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1 \u7d22\u5f15\u4ecb\u7ecd \u3002","title":"\u5bfc\u5165 Hive \u6570\u636e"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-hive/#hive","text":"\u672c\u6587\u4ee5\u4e00\u4e2a\u793a\u4f8b\u8bf4\u660e\u5982\u4f55\u4f7f\u7528 Exchange \u5c06\u5b58\u50a8\u5728 Hive \u4e0a\u7684\u6570\u636e\u5bfc\u5165NebulaGraph\u3002","title":"\u5bfc\u5165 Hive \u6570\u636e"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-hive/#_1","text":"\u672c\u6587\u4ee5 basketballplayer \u6570\u636e\u96c6 \u4e3a\u4f8b\u3002 \u5728\u672c\u793a\u4f8b\u4e2d\uff0c\u8be5\u6570\u636e\u96c6\u5df2\u7ecf\u5b58\u5165 Hive \u4e2d\u540d\u4e3a basketball \u7684\u6570\u636e\u5e93\u4e2d\uff0c\u4ee5 player \u3001 team \u3001 follow \u548c serve \u56db\u4e2a\u8868\u5b58\u50a8\u4e86\u6240\u6709\u70b9\u548c\u8fb9\u7684\u4fe1\u606f\u3002\u4ee5\u4e0b\u4e3a\u5404\u4e2a\u8868\u7684\u7ed3\u6784\u3002 scala > spark . sql ( \"describe basketball.player\" ). show + --------+---------+-------+ | col_name | data_type | comment | + --------+---------+-------+ | playerid | string | null | | age | bigint | null | | name | string | null | + --------+---------+-------+ scala > spark . sql ( \"describe basketball.team\" ). show + ----------+---------+-------+ | col_name | data_type | comment | + ----------+---------+-------+ | teamid | string | null | | name | string | null | + ----------+---------+-------+ scala > spark . sql ( \"describe basketball.follow\" ). show + ----------+---------+-------+ | col_name | data_type | comment | + ----------+---------+-------+ | src_player | string | null | | dst_player | string | null | | degree | bigint | null | + ----------+---------+-------+ scala > spark . sql ( \"describe basketball.serve\" ). show + ----------+---------+-------+ | col_name | data_type | comment | + ----------+---------+-------+ | playerid | string | null | | teamid | string | null | | start_year | bigint | null | | end_year | bigint | null | + ----------+---------+-------+ \u8bf4\u660e \uff1aHive \u7684\u6570\u636e\u7c7b\u578b bigint \u4e0eNebulaGraph\u7684 int \u5bf9\u5e94\u3002","title":"\u6570\u636e\u96c6"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-hive/#_2","text":"\u672c\u6587\u793a\u4f8b\u5728 MacOS \u4e0b\u5b8c\u6210\uff0c\u4ee5\u4e0b\u662f\u76f8\u5173\u7684\u73af\u5883\u914d\u7f6e\u4fe1\u606f\uff1a \u786c\u4ef6\u89c4\u683c\uff1a CPU\uff1a1.7 GHz Quad-Core Intel Core i7 \u5185\u5b58\uff1a16 GB Spark\uff1a2.4.7\uff0c\u5355\u673a\u7248 Hive\uff1a2.3.7\uff0cHive Metastore \u6570\u636e\u5e93\u4e3a MySQL 8.0.22 NebulaGraph\uff1a3.6.0\u3002","title":"\u73af\u5883\u914d\u7f6e"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-hive/#_3","text":"\u5f00\u59cb\u5bfc\u5165\u6570\u636e\u4e4b\u524d\uff0c\u7528\u6237\u9700\u8981\u786e\u8ba4\u4ee5\u4e0b\u4fe1\u606f\uff1a \u5df2\u7ecf \u5b89\u88c5\u90e8\u7f72NebulaGraph \u5e76\u83b7\u53d6\u5982\u4e0b\u4fe1\u606f\uff1a Graph \u670d\u52a1\u548c Meta \u670d\u52a1\u7684\u7684 IP \u5730\u5740\u548c\u7aef\u53e3\u3002 \u62e5\u6709NebulaGraph\u5199\u6743\u9650\u7684\u7528\u6237\u540d\u548c\u5bc6\u7801\u3002 \u5df2\u7ecf\u7f16\u8bd1 Exchange\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1 \u7f16\u8bd1 Exchange \u3002\u672c\u793a\u4f8b\u4e2d\u4f7f\u7528 Exchange 3.6.0\u3002 \u5df2\u7ecf\u5b89\u88c5 Spark\u3002 \u4e86\u89e3NebulaGraph\u4e2d\u521b\u5efa Schema \u7684\u4fe1\u606f\uff0c\u5305\u62ec Tag \u548c Edge type \u7684\u540d\u79f0\u3001\u5c5e\u6027\u7b49\u3002 \u5df2\u7ecf\u542f\u52a8 Hive Metastore \u6570\u636e\u5e93\uff08\u672c\u793a\u4f8b\u4e2d\u4e3a MySQL\uff09\u3002","title":"\u524d\u63d0\u6761\u4ef6"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-hive/#_4","text":"","title":"\u64cd\u4f5c\u6b65\u9aa4"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-hive/#1nebulagraph_schema","text":"\u5206\u6790\u6570\u636e\uff0c\u6309\u4ee5\u4e0b\u6b65\u9aa4\u5728NebulaGraph\u4e2d\u521b\u5efa Schema\uff1a \u786e\u8ba4 Schema \u8981\u7d20\u3002NebulaGraph\u4e2d\u7684 Schema \u8981\u7d20\u5982\u4e0b\u8868\u6240\u793a\u3002 \u8981\u7d20 \u540d\u79f0 \u5c5e\u6027 Tag player name string, age int Tag team name string Edge Type follow degree int Edge Type serve start_year int, end_year int \u5728NebulaGraph\u4e2d\u521b\u5efa\u4e00\u4e2a\u56fe\u7a7a\u95f4 basketballplayer \uff0c\u5e76\u521b\u5efa\u4e00\u4e2a Schema\uff0c\u5982\u4e0b\u6240\u793a\u3002 ## \u521b\u5efa\u56fe\u7a7a\u95f4 nebula> CREATE SPACE basketballplayer \\ (partition_num = 10, \\ replica_factor = 1, \\ vid_type = FIXED_STRING(30)); ## \u9009\u62e9\u56fe\u7a7a\u95f4 basketballplayer nebula> USE basketballplayer; ## \u521b\u5efa Tag player nebula> CREATE TAG player(name string, age int); ## \u521b\u5efa Tag team nebula> CREATE TAG team(name string); ## \u521b\u5efa Edge type follow nebula> CREATE EDGE follow(degree int); ## \u521b\u5efa Edge type serve nebula> CREATE EDGE serve(start_year int, end_year int); \u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u89c1 \u5feb\u901f\u5f00\u59cb \u3002","title":"\u6b65\u9aa4 1\uff1a\u5728NebulaGraph\u4e2d\u521b\u5efa Schema"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-hive/#2_spark_sql_hive_sql","text":"\u542f\u52a8 spark-shell \u73af\u5883\u540e\uff0c\u4f9d\u6b21\u8fd0\u884c\u4ee5\u4e0b\u8bed\u53e5\uff0c\u786e\u8ba4 Spark \u80fd\u8bfb\u53d6 Hive \u4e2d\u7684\u6570\u636e\u3002 scala > sql ( \"select playerid, age, name from basketball.player\" ). show scala > sql ( \"select teamid, name from basketball.team\" ). show scala > sql ( \"select src_player, dst_player, degree from basketball.follow\" ). show scala > sql ( \"select playerid, teamid, start_year, end_year from basketball.serve\" ). show \u4ee5\u4e0b\u4e3a\u8868 basketball.player \u4e2d\u8bfb\u51fa\u7684\u7ed3\u679c\u3002 +---------+----+-----------------+ | playerid | age | name | +---------+----+-----------------+ | player100 | 42 | Tim Duncan | | player101 | 36 | Tony Parker | | player102 | 33 | LaMarcus Aldridge | | player103 | 32 | Rudy Gay | | player104 | 32 | Marco Belinelli | +---------+----+-----------------+ ...","title":"\u6b65\u9aa4 2\uff1a\u4f7f\u7528 Spark SQL \u786e\u8ba4 Hive SQL \u8bed\u53e5"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-hive/#3","text":"\u7f16\u8bd1 Exchange \u540e\uff0c\u590d\u5236 target/classes/application.conf \u6587\u4ef6\u8bbe\u7f6e Hive \u6570\u636e\u6e90\u76f8\u5173\u7684\u914d\u7f6e\u3002\u5728\u672c\u793a\u4f8b\u4e2d\uff0c\u590d\u5236\u7684\u6587\u4ef6\u540d\u4e3a hive_application.conf \u3002\u5404\u4e2a\u914d\u7f6e\u9879\u7684\u8be6\u7ec6\u8bf4\u660e\u8bf7\u53c2\u89c1 \u914d\u7f6e\u8bf4\u660e \u3002 { # Spark \u76f8\u5173\u914d\u7f6e spark: { app: { name: NebulaGraph Exchange 3.6.0 } driver: { cores: 1 maxResultSize: 1G } cores: { max: 16 } } # \u5982\u679c Spark \u548c Hive \u90e8\u7f72\u5728\u4e0d\u540c\u96c6\u7fa4\uff0c\u624d\u9700\u8981\u914d\u7f6e\u8fde\u63a5 Hive \u7684\u53c2\u6570\uff0c\u5426\u5219\u8bf7\u5ffd\u7565\u8fd9\u4e9b\u914d\u7f6e\u3002 #hive: { # waredir: \"hdfs://NAMENODE_IP:9000/apps/svr/hive-xxx/warehouse/\" # connectionURL: \"jdbc:mysql://your_ip:3306/hive_spark?characterEncoding=UTF-8\" # connectionDriverName: \"com.mysql.jdbc.Driver\" # connectionUserName: \"user\" # connectionPassword: \"password\" #} # NebulaGraph \u76f8\u5173\u914d\u7f6e nebula: { address:{ # \u4ee5\u4e0b\u4e3a NebulaGraph \u7684 Graph \u670d\u52a1\u548c\u6240\u6709 Meta \u670d\u52a1\u6240\u5728\u673a\u5668\u7684 IP \u5730\u5740\u53ca\u7aef\u53e3\u3002 # \u5982\u679c\u6709\u591a\u4e2a\u5730\u5740\uff0c\u683c\u5f0f\u4e3a \"ip1:port\",\"ip2:port\",\"ip3:port\"\u3002 # \u4e0d\u540c\u5730\u5740\u4e4b\u95f4\u4ee5\u82f1\u6587\u9017\u53f7 (,) \u9694\u5f00\u3002 graph:[\"127.0.0.1:9669\"] #\u4efb\u610f\u4e00\u4e2a Meta \u670d\u52a1\u7684\u5730\u5740\u3002 #\u5982\u679c\u60a8\u7684 NebulaGraph \u5728\u865a\u62df\u7f51\u7edc\u4e2d\uff0c\u5982k8s\uff0c\u8bf7\u914d\u7f6e Leader Meta\u7684\u5730\u5740\u3002 meta:[\"127.0.0.1:9559\"] } # \u586b\u5199\u7684\u8d26\u53f7\u5fc5\u987b\u62e5\u6709 NebulaGraph \u76f8\u5e94\u56fe\u7a7a\u95f4\u7684\u5199\u6570\u636e\u6743\u9650\u3002 user: root pswd: nebula # \u586b\u5199 NebulaGraph \u4e2d\u9700\u8981\u5199\u5165\u6570\u636e\u7684\u56fe\u7a7a\u95f4\u540d\u79f0\u3002 space: basketballplayer connection: { timeout: 3000 retry: 3 } execution: { retry: 3 } error: { max: 32 output: /tmp/errors } rate: { limit: 1024 timeout: 1000 } } # \u5904\u7406\u70b9 tags: [ # \u8bbe\u7f6e Tag player \u76f8\u5173\u4fe1\u606f\u3002 { # NebulaGraph \u4e2d\u5bf9\u5e94\u7684 Tag \u540d\u79f0\u3002 name: player type: { # \u6307\u5b9a\u6570\u636e\u6e90\u6587\u4ef6\u683c\u5f0f\uff0c\u8bbe\u7f6e\u4e3a hive\u3002 source: hive # \u6307\u5b9a\u5982\u4f55\u5c06\u70b9\u6570\u636e\u5bfc\u5165NebulaGraph\uff1aClient \u6216 SST\u3002 sink: client } # \u8bbe\u7f6e\u8bfb\u53d6\u6570\u636e\u5e93 basketball \u4e2d player \u8868\u6570\u636e\u7684 SQL \u8bed\u53e5 exec: \"select playerid, age, name from basketball.player\" # \u5728 fields \u91cc\u6307\u5b9a player \u8868\u4e2d\u7684\u5217\u540d\u79f0\uff0c\u5176\u5bf9\u5e94\u7684 value \u4f1a\u4f5c\u4e3a NebulaGraph \u4e2d\u6307\u5b9a\u5c5e\u6027\u3002 # fields \u548c nebula.fields \u91cc\u7684\u914d\u7f6e\u5fc5\u987b\u4e00\u4e00\u5bf9\u5e94\u3002 # \u5982\u679c\u9700\u8981\u6307\u5b9a\u591a\u4e2a\u5217\u540d\u79f0\uff0c\u7528\u82f1\u6587\u9017\u53f7\uff08,\uff09\u9694\u5f00\u3002 fields: [age,name] nebula.fields: [age,name] # \u6307\u5b9a\u8868\u4e2d\u67d0\u4e00\u5217\u6570\u636e\u4e3a NebulaGraph \u4e2d\u70b9 VID \u7684\u6765\u6e90\u3002 vertex:{ field:playerid # udf:{ # separator:\"_\" # oldColNames:[field-0,field-1,field-2] # newColName:new-field # } # \u4e3a VID \u589e\u52a0\u6307\u5b9a\u7684\u524d\u7f00\u3002\u4f8b\u5982 VID \u4e3a 12345\uff0c\u589e\u52a0\u524d\u7f00 tag1 \u540e\u4e3a tag1_12345\u3002\u4e0b\u5212\u7ebf\u65e0\u6cd5\u4fee\u6539\u3002 # prefix:\"tag1\" # \u5bf9 string \u7c7b\u578b\u7684 VID \u8fdb\u884c\u54c8\u5e0c\u5316\u64cd\u4f5c\u3002 # policy:hash } # \u6279\u91cf\u64cd\u4f5c\u7c7b\u578b\uff0c\u5305\u62ec INSERT\u3001UPDATE \u548c DELETE\u3002\u9ed8\u8ba4\u4e3a INSERT\u3002 #writeMode: INSERT # \u6279\u91cf\u5220\u9664\u65f6\u662f\u5426\u5220\u9664\u8be5\u70b9\u5173\u8054\u7684\u51fa\u8fb9\u548c\u5165\u8fb9\u3002`writeMode`\u4e3a`DELETE`\u65f6\u8be5\u53c2\u6570\u751f\u6548\u3002 #deleteEdge: false # \u5355\u6279\u6b21\u5199\u5165 NebulaGraph \u7684\u6700\u5927\u6570\u636e\u6761\u6570\u3002 batch: 256 # Spark \u5206\u533a\u6570\u91cf partition: 32 } # \u8bbe\u7f6e Tag team \u76f8\u5173\u4fe1\u606f\u3002 { name: team type: { source: hive sink: client } exec: \"select teamid, name from basketball.team\" fields: [name] nebula.fields: [name] vertex: { field: teamid } batch: 256 partition: 32 } ] # \u5904\u7406\u8fb9\u6570\u636e edges: [ # \u8bbe\u7f6e Edge type follow \u76f8\u5173\u4fe1\u606f { # NebulaGraph \u4e2d\u5bf9\u5e94\u7684 Edge type \u540d\u79f0\u3002 name: follow type: { # \u6307\u5b9a\u6570\u636e\u6e90\u6587\u4ef6\u683c\u5f0f\uff0c\u8bbe\u7f6e\u4e3a hive\u3002 source: hive # \u6307\u5b9a\u8fb9\u6570\u636e\u5bfc\u5165 NebulaGraph \u7684\u65b9\u5f0f\uff0c # \u6307\u5b9a\u5982\u4f55\u5c06\u70b9\u6570\u636e\u5bfc\u5165NebulaGraph\uff1aClient \u6216 SST\u3002 sink: client } # \u8bbe\u7f6e\u8bfb\u53d6\u6570\u636e\u5e93 basketball \u4e2d follow \u8868\u6570\u636e\u7684 SQL \u8bed\u53e5\u3002 exec: \"select src_player, dst_player, degree from basketball.follow\" # \u5728 fields \u91cc\u6307\u5b9a follow \u8868\u4e2d\u7684\u5217\u540d\u79f0\uff0c\u5176\u5bf9\u5e94\u7684 value \u4f1a\u4f5c\u4e3a NebulaGraph \u4e2d\u6307\u5b9a\u5c5e\u6027\u3002 # fields \u548c nebula.fields \u91cc\u7684\u914d\u7f6e\u5fc5\u987b\u4e00\u4e00\u5bf9\u5e94\u3002 # \u5982\u679c\u9700\u8981\u6307\u5b9a\u591a\u4e2a\u5217\u540d\u79f0\uff0c\u7528\u82f1\u6587\u9017\u53f7\uff08,\uff09\u9694\u5f00\u3002 fields: [degree] nebula.fields: [degree] # \u5728 source \u91cc\uff0c\u5c06 follow \u8868\u4e2d\u67d0\u4e00\u5217\u4f5c\u4e3a\u8fb9\u7684\u8d77\u59cb\u70b9\u6570\u636e\u6e90\u3002 # \u5728 target \u91cc\uff0c\u5c06 follow \u8868\u4e2d\u67d0\u4e00\u5217\u4f5c\u4e3a\u8fb9\u7684\u76ee\u7684\u70b9\u6570\u636e\u6e90\u3002 source: { field: src_player # udf:{ # separator:\"_\" # oldColNames:[field-0,field-1,field-2] # newColName:new-field # } # \u4e3a VID \u589e\u52a0\u6307\u5b9a\u7684\u524d\u7f00\u3002\u4f8b\u5982 VID \u4e3a 12345\uff0c\u589e\u52a0\u524d\u7f00 tag1 \u540e\u4e3a tag1_12345\u3002\u4e0b\u5212\u7ebf\u65e0\u6cd5\u4fee\u6539\u3002 # prefix:\"tag1\" # \u5bf9 string \u7c7b\u578b\u7684 VID \u8fdb\u884c\u54c8\u5e0c\u5316\u64cd\u4f5c\u3002 # policy:hash } target: { field: dst_player # udf:{ # separator:\"_\" # oldColNames:[field-0,field-1,field-2] # newColName:new-field # } # \u4e3a VID \u589e\u52a0\u6307\u5b9a\u7684\u524d\u7f00\u3002\u4f8b\u5982 VID \u4e3a 12345\uff0c\u589e\u52a0\u524d\u7f00 tag1 \u540e\u4e3a tag1_12345\u3002\u4e0b\u5212\u7ebf\u65e0\u6cd5\u4fee\u6539\u3002 # prefix:\"tag1\" # \u5bf9 string \u7c7b\u578b\u7684 VID \u8fdb\u884c\u54c8\u5e0c\u5316\u64cd\u4f5c\u3002 # policy:hash } # \u6307\u5b9a\u4e00\u4e2a\u5217\u4f5c\u4e3a rank \u7684\u6e90\uff08\u53ef\u9009\uff09\u3002 #ranking: rank # \u6279\u91cf\u64cd\u4f5c\u7c7b\u578b\uff0c\u5305\u62ec INSERT\u3001UPDATE \u548c DELETE\u3002\u9ed8\u8ba4\u4e3a INSERT\u3002 #writeMode: INSERT # \u5355\u6279\u6b21\u5199\u5165 NebulaGraph \u7684\u6700\u5927\u6570\u636e\u6761\u6570\u3002 batch: 256 # Spark \u5206\u533a\u6570\u91cf partition: 32 } # \u8bbe\u7f6e Edge type serve \u76f8\u5173\u4fe1\u606f { name: serve type: { source: hive sink: client } exec: \"select playerid, teamid, start_year, end_year from basketball.serve\" fields: [start_year,end_year] nebula.fields: [start_year,end_year] source: { field: playerid } target: { field: teamid } # \u6307\u5b9a\u4e00\u4e2a\u5217\u4f5c\u4e3a rank \u7684\u6e90\uff08\u53ef\u9009\uff09\u3002 #ranking: rank batch: 256 partition: 32 } ] }","title":"\u6b65\u9aa4 3\uff1a\u4fee\u6539\u914d\u7f6e\u6587\u4ef6"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-hive/#4nebulagraph","text":"\u8fd0\u884c\u5982\u4e0b\u547d\u4ee4\u5c06 Hive \u6570\u636e\u5bfc\u5165\u5230NebulaGraph\u4e2d\u3002\u5173\u4e8e\u53c2\u6570\u7684\u8bf4\u660e\uff0c\u8bf7\u53c2\u89c1 \u5bfc\u5165\u547d\u4ee4\u53c2\u6570 \u3002 ${ SPARK_HOME } /bin/spark-submit --master \"local\" --class com.vesoft.nebula.exchange.Exchange <nebula-exchange-3.6.0.jar_path> -c <hive_application.conf_path> -h Note JAR \u5305\u6709\u4e24\u79cd\u83b7\u53d6\u65b9\u5f0f\uff1a \u81ea\u884c\u7f16\u8bd1 \u6216\u8005\u4ece maven \u4ed3\u5e93\u4e0b\u8f7d\u3002 \u793a\u4f8b\uff1a ${ SPARK_HOME } /bin/spark-submit --master \"local\" --class com.vesoft.nebula.exchange.Exchange /root/nebula-exchange/nebula-exchange/target/nebula-exchange-3.6.0.jar -c /root/nebula-exchange/nebula-exchange/target/classes/hive_application.conf -h \u7528\u6237\u53ef\u4ee5\u5728\u8fd4\u56de\u4fe1\u606f\u4e2d\u641c\u7d22 batchSuccess.<tag_name/edge_name> \uff0c\u786e\u8ba4\u6210\u529f\u7684\u6570\u91cf\u3002\u4f8b\u5982 batchSuccess.follow: 300 \u3002","title":"\u6b65\u9aa4 4\uff1a\u5411NebulaGraph\u5bfc\u5165\u6570\u636e"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-hive/#5","text":"\u7528\u6237\u53ef\u4ee5\u5728NebulaGraph\u5ba2\u6237\u7aef\uff08\u4f8b\u5982 NebulaGraph Studio\uff09\u4e2d\u6267\u884c\u67e5\u8be2\u8bed\u53e5\uff0c\u786e\u8ba4\u6570\u636e\u662f\u5426\u5df2\u5bfc\u5165\u3002\u4f8b\u5982\uff1a LOOKUP ON player YIELD id(vertex); \u7528\u6237\u4e5f\u53ef\u4ee5\u4f7f\u7528\u547d\u4ee4 SHOW STATS \u67e5\u770b\u7edf\u8ba1\u6570\u636e\u3002","title":"\u6b65\u9aa4 5\uff1a\uff08\u53ef\u9009\uff09\u9a8c\u8bc1\u6570\u636e"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-hive/#6nebulagraph","text":"\u5bfc\u5165\u6570\u636e\u540e\uff0c\u7528\u6237\u53ef\u4ee5\u5728NebulaGraph\u4e2d\u91cd\u65b0\u521b\u5efa\u5e76\u91cd\u5efa\u7d22\u5f15\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1 \u7d22\u5f15\u4ecb\u7ecd \u3002","title":"\u6b65\u9aa4 6\uff1a\uff08\u5982\u6709\uff09\u5728NebulaGraph\u4e2d\u91cd\u5efa\u7d22\u5f15"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-jdbc/","text":"\u5bfc\u5165\u901a\u7528 JDBC \u6570\u636e \u00b6 JDBC \u6570\u636e\u662f\u6307\u7528 JDBC \u63a5\u53e3\u8bbf\u95ee\u7684\u5404\u7c7b\u6570\u636e\u5e93\u7684\u6570\u636e\u7684\u7edf\u79f0\u3002\u672c\u6587\u4ee5 MySQL \u6570\u636e\u5e93\u4e3a\u4f8b\u8bf4\u660e\u5982\u4f55\u4f7f\u7528 Exchange \u5c06 JDBC \u6570\u636e\u5bfc\u5165NebulaGraph\u3002 \u6570\u636e\u96c6 \u00b6 \u672c\u6587\u4ee5 basketballplayer \u6570\u636e\u96c6 \u4e3a\u4f8b\u3002 \u5728\u672c\u793a\u4f8b\u4e2d\uff0c\u8be5\u6570\u636e\u96c6\u5df2\u7ecf\u5b58\u5165 MySQL \u4e2d\u540d\u4e3a basketball \u7684\u6570\u636e\u5e93\u4e2d\uff0c\u4ee5 player \u3001 team \u3001 follow \u548c serve \u56db\u4e2a\u8868\u5b58\u50a8\u4e86\u6240\u6709\u70b9\u548c\u8fb9\u7684\u4fe1\u606f\u3002\u4ee5\u4e0b\u4e3a\u5404\u4e2a\u8868\u7684\u7ed3\u6784\u3002 mysql > desc player ; + ----------+-------------+------+-----+---------+-------+ | Field | Type | Null | Key | Default | Extra | + ----------+-------------+------+-----+---------+-------+ | playerid | int | YES | | NULL | | | age | int | YES | | NULL | | | name | varchar ( 30 ) | YES | | NULL | | + ----------+-------------+------+-----+---------+-------+ mysql > desc team ; + --------+-------------+------+-----+---------+-------+ | Field | Type | Null | Key | Default | Extra | + --------+-------------+------+-----+---------+-------+ | teamid | int | YES | | NULL | | | name | varchar ( 30 ) | YES | | NULL | | + --------+-------------+------+-----+---------+-------+ mysql > desc follow ; + ------------+-------------+------+-----+---------+-------+ | Field | Type | Null | Key | Default | Extra | + ------------+-------------+------+-----+---------+-------+ | src_player | int | YES | | NULL | | | dst_player | int | YES | | NULL | | | degree | int | YES | | NULL | | + ------------+-------------+------+-----+---------+-------+ mysql > desc serve ; + ------------+-------------+------+-----+---------+-------+ | Field | Type | Null | Key | Default | Extra | + ------------+-------------+------+-----+---------+-------+ | playerid | int | YES | | NULL | | | teamid | int | YES | | NULL | | | start_year | int | YES | | NULL | | | end_year | int | YES | | NULL | | + ------------+-------------+------+-----+---------+-------+ \u73af\u5883\u914d\u7f6e \u00b6 \u672c\u6587\u793a\u4f8b\u5728 MacOS \u4e0b\u5b8c\u6210\uff0c\u4ee5\u4e0b\u662f\u76f8\u5173\u7684\u73af\u5883\u914d\u7f6e\u4fe1\u606f\uff1a \u786c\u4ef6\u89c4\u683c\uff1a CPU\uff1a1.7 GHz Quad-Core Intel Core i7 \u5185\u5b58\uff1a16 GB Spark\uff1a2.3.0\uff0c\u5355\u673a\u7248 NebulaGraph\uff1a3.6.0\u3002 \u524d\u63d0\u6761\u4ef6 \u00b6 \u5f00\u59cb\u5bfc\u5165\u6570\u636e\u4e4b\u524d\uff0c\u7528\u6237\u9700\u8981\u786e\u8ba4\u4ee5\u4e0b\u4fe1\u606f\uff1a \u5df2\u7ecf \u5b89\u88c5\u90e8\u7f72NebulaGraph \u5e76\u83b7\u53d6\u5982\u4e0b\u4fe1\u606f\uff1a Graph \u670d\u52a1\u548c Meta \u670d\u52a1\u7684\u7684 IP \u5730\u5740\u548c\u7aef\u53e3\u3002 \u62e5\u6709NebulaGraph\u5199\u6743\u9650\u7684\u7528\u6237\u540d\u548c\u5bc6\u7801\u3002 \u5df2\u7ecf\u7f16\u8bd1 Exchange\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1 \u7f16\u8bd1 Exchange \u3002\u672c\u793a\u4f8b\u4e2d\u4f7f\u7528 Exchange 3.6.0\u3002 \u5df2\u7ecf\u5b89\u88c5 Spark\u3002 \u4e86\u89e3NebulaGraph\u4e2d\u521b\u5efa Schema \u7684\u4fe1\u606f\uff0c\u5305\u62ec Tag \u548c Edge type \u7684\u540d\u79f0\u3001\u5c5e\u6027\u7b49\u3002 \u5982\u679c\u6587\u4ef6\u5b58\u50a8\u5728\u672c\u5730\u4e14NebulaGraph\u662f\u96c6\u7fa4\u67b6\u6784\uff0c\u9700\u8981\u5728\u96c6\u7fa4\u6bcf\u53f0\u673a\u5668\u672c\u5730\u76f8\u540c\u76ee\u5f55\u4e0b\u653e\u7f6e\u6587\u4ef6\u3002 \u6ce8\u610f\u4e8b\u9879 \u00b6 nebula-exchange_spark_2.2 \u4ec5\u652f\u6301\u5355\u8868\u67e5\u8be2\uff0c\u4e0d\u652f\u6301\u591a\u8868\u67e5\u8be2\u3002 \u64cd\u4f5c\u6b65\u9aa4 \u00b6 \u6b65\u9aa4 1\uff1a\u5728NebulaGraph\u4e2d\u521b\u5efa Schema \u00b6 \u5206\u6790\u6587\u4ef6\u4e2d\u7684\u6570\u636e\uff0c\u6309\u4ee5\u4e0b\u6b65\u9aa4\u5728NebulaGraph\u4e2d\u521b\u5efa Schema\uff1a \u786e\u8ba4 Schema \u8981\u7d20\u3002NebulaGraph\u4e2d\u7684 Schema \u8981\u7d20\u5982\u4e0b\u8868\u6240\u793a\u3002 \u8981\u7d20 \u540d\u79f0 \u5c5e\u6027 Tag player name string, age int Tag team name string Edge Type follow degree int Edge Type serve start_year int, end_year int \u4f7f\u7528 NebulaGraph Console \u521b\u5efa\u4e00\u4e2a\u56fe\u7a7a\u95f4 basketballplayer \uff0c\u5e76\u521b\u5efa\u4e00\u4e2a Schema\uff0c\u5982\u4e0b\u6240\u793a\u3002 ## \u521b\u5efa\u56fe\u7a7a\u95f4 nebula> CREATE SPACE basketballplayer \\ (partition_num = 10, \\ replica_factor = 1, \\ vid_type = FIXED_STRING(30)); ## \u9009\u62e9\u56fe\u7a7a\u95f4 basketballplayer nebula> USE basketballplayer; ## \u521b\u5efa Tag player nebula> CREATE TAG player(name string, age int); ## \u521b\u5efa Tag team nebula> CREATE TAG team(name string); ## \u521b\u5efa Edge type follow nebula> CREATE EDGE follow(degree int); ## \u521b\u5efa Edge type serve nebula> CREATE EDGE serve(start_year int, end_year int); \u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u89c1 \u5feb\u901f\u5f00\u59cb \u3002 \u6b65\u9aa4 2. \u4fee\u6539\u914d\u7f6e\u6587\u4ef6 \u00b6 \u7f16\u8bd1 Exchange \u540e\uff0c\u590d\u5236 target/classes/application.conf \u6587\u4ef6\u8bbe\u7f6e JDBC \u6570\u636e\u6e90\u76f8\u5173\u7684\u914d\u7f6e\u3002\u5728\u672c\u793a\u4f8b\u4e2d\uff0c\u590d\u5236\u7684\u6587\u4ef6\u540d\u4e3a jdbc_application.conf \u3002\u5404\u4e2a\u914d\u7f6e\u9879\u7684\u8be6\u7ec6\u8bf4\u660e\u8bf7\u53c2\u89c1 \u914d\u7f6e\u8bf4\u660e \u3002 { # Spark \u76f8\u5173\u914d\u7f6e spark: { app: { name: NebulaGraph Exchange 3.6.0 } driver: { cores: 1 maxResultSize: 1G } executor: { memory:1G } cores: { max: 16 } } # NebulaGraph \u76f8\u5173\u914d\u7f6e nebula: { address:{ # \u6307\u5b9a Graph \u670d\u52a1\u548c\u6240\u6709 Meta \u670d\u52a1\u7684 IP \u5730\u5740\u548c\u7aef\u53e3\u3002 # \u5982\u679c\u6709\u591a\u53f0\u670d\u52a1\u5668\uff0c\u5730\u5740\u4e4b\u95f4\u7528\u82f1\u6587\u9017\u53f7\uff08,\uff09\u5206\u9694\u3002 # \u683c\u5f0f\uff1a\"ip1:port\",\"ip2:port\",\"ip3:port\" graph:[\"127.0.0.1:9669\"] #\u4efb\u610f\u4e00\u4e2a Meta \u670d\u52a1\u7684\u5730\u5740\u3002 #\u5982\u679c\u60a8\u7684 NebulaGraph \u5728\u865a\u62df\u7f51\u7edc\u4e2d\uff0c\u5982k8s\uff0c\u8bf7\u914d\u7f6e Leader Meta\u7684\u5730\u5740\u3002 meta:[\"127.0.0.1:9559\"] } # \u6307\u5b9a\u62e5\u6709 NebulaGraph \u5199\u6743\u9650\u7684\u7528\u6237\u540d\u548c\u5bc6\u7801\u3002 user: root pswd: nebula # \u6307\u5b9a\u56fe\u7a7a\u95f4\u540d\u79f0\u3002 space: basketballplayer connection: { timeout: 3000 retry: 3 } execution: { retry: 3 } error: { max: 32 output: /tmp/errors } rate: { limit: 1024 timeout: 1000 } } # \u5904\u7406\u70b9 tags: [ # \u8bbe\u7f6e Tag player \u76f8\u5173\u4fe1\u606f\u3002 { # \u6307\u5b9a NebulaGraph \u4e2d\u5b9a\u4e49\u7684 Tag \u540d\u79f0\u3002 name: player type: { # \u6307\u5b9a\u6570\u636e\u6e90\uff0c\u4f7f\u7528 JDBC\u3002 source: jdbc # \u6307\u5b9a\u5982\u4f55\u5c06\u70b9\u6570\u636e\u5bfc\u5165NebulaGraph\uff1aClient \u6216 SST\u3002 sink: client } # JDBC \u6570\u636e\u6e90\u7684 URL\u3002\u793a\u4f8b\u4e3a MySql \u6570\u636e\u5e93\u3002 url:\"jdbc:mysql://127.0.0.1:3306/basketball?useUnicode=true&characterEncoding=utf-8\" # JDBC \u9a71\u52a8\u3002 driver:\"com.mysql.cj.jdbc.Driver\" # \u6570\u636e\u5e93\u7528\u6237\u540d\u548c\u5bc6\u7801\u3002 user:\"root\" password:\"12345\" # \u626b\u63cf\u5355\u4e2a\u8868\u8bfb\u53d6\u6570\u636e\u3002 # nebula-exchange_spark_2.2 \u5fc5\u987b\u914d\u7f6e\u8be5\u53c2\u6570\uff0c\u8fd8\u53ef\u4ee5\u989d\u5916\u914d\u7f6e sentence\u3002 # nebula-exchange_spark_2.4 \u548c nebula-exchange_spark_3.0 \u53ef\u4ee5\u914d\u7f6e\u8be5\u53c2\u6570\uff0c\u4f46\u662f\u4e0d\u80fd\u548c sentence \u540c\u65f6\u914d\u7f6e\u3002 table:\"basketball.player\" # \u901a\u8fc7\u67e5\u8be2\u8bed\u53e5\u8bfb\u53d6\u6570\u636e\u3002 # nebula-exchange_spark_2.2 \u53ef\u4ee5\u914d\u7f6e\u8be5\u53c2\u6570\u3002\u4e0d\u652f\u6301\u591a\u8868\u67e5\u8be2\u3002\u5728 from \u540e\u53ea\u9700\u8981\u5199\u8868\u540d\uff0c\u4e0d\u652f\u6301`\u5e93\u540d.\u8868\u540d`\u3002 # nebula-exchange_spark_2.4 \u548c nebula-exchange_spark_3.0 \u53ef\u4ee5\u914d\u7f6e\u8be5\u53c2\u6570\uff0c\u4f46\u662f\u4e0d\u80fd\u548c table \u540c\u65f6\u914d\u7f6e\u3002\u652f\u6301\u591a\u8868\u67e5\u8be2\u3002 # sentence:\"select playerid, age, name from player, team order by playerid\" # \uff08\u53ef\u9009\uff09\u591a\u8fde\u63a5\u8bfb\u53d6\u53c2\u6570 \u53c2\u89c1 https://spark.apache.org/docs/latest/sql-data-sources-jdbc.html partitionColumn:playerid # \u53ef\u9009\u3002\u6570\u503c\u7c7b\u578b\u5fc5\u987b\u4e3a\u6570\u5b57\u3001\u65e5\u671f\u6216\u65f6\u95f4\u6233\u3002 lowerBound:1 # \u53ef\u9009 upperBound:5 # \u53ef\u9009 numPartitions:5 # \u53ef\u9009 fetchSize:2 # \u6bcf\u6b21\u8bf7\u6c42\u6570\u636e\u5e93\u8981\u8bfb\u53d6\u7684\u884c\u6570\u3002 # \u5728 fields \u91cc\u6307\u5b9a player \u8868\u4e2d\u7684\u5217\u540d\u79f0\uff0c\u5176\u5bf9\u5e94\u7684 value \u4f1a\u4f5c\u4e3a NebulaGraph \u4e2d\u6307\u5b9a\u5c5e\u6027\u3002 # fields \u548c nebula.fields \u91cc\u7684\u914d\u7f6e\u5fc5\u987b\u4e00\u4e00\u5bf9\u5e94\u3002 # \u5982\u679c\u9700\u8981\u6307\u5b9a\u591a\u4e2a\u5217\u540d\u79f0\uff0c\u7528\u82f1\u6587\u9017\u53f7\uff08,\uff09\u9694\u5f00\u3002 fields: [age,name] nebula.fields: [age,name] # \u6307\u5b9a\u8868\u4e2d\u67d0\u4e00\u5217\u6570\u636e\u4e3a NebulaGraph \u4e2d\u70b9 VID \u7684\u6765\u6e90\u3002 vertex: { field:playerid # udf:{ # separator:\"_\" # oldColNames:[field-0,field-1,field-2] # newColName:new-field # } # \u4e3a VID \u589e\u52a0\u6307\u5b9a\u7684\u524d\u7f00\u3002\u4f8b\u5982 VID \u4e3a 12345\uff0c\u589e\u52a0\u524d\u7f00 tag1 \u540e\u4e3a tag1_12345\u3002\u4e0b\u5212\u7ebf\u65e0\u6cd5\u4fee\u6539\u3002 # prefix:\"tag1\" # \u5bf9 string \u7c7b\u578b\u7684 VID \u8fdb\u884c\u54c8\u5e0c\u5316\u64cd\u4f5c\u3002 # policy:hash } # \u6279\u91cf\u64cd\u4f5c\u7c7b\u578b\uff0c\u5305\u62ec INSERT\u3001UPDATE \u548c DELETE\u3002\u9ed8\u8ba4\u4e3a INSERT\u3002 #writeMode: INSERT # \u6279\u91cf\u5220\u9664\u65f6\u662f\u5426\u5220\u9664\u8be5\u70b9\u5173\u8054\u7684\u51fa\u8fb9\u548c\u5165\u8fb9\u3002`writeMode`\u4e3a`DELETE`\u65f6\u8be5\u53c2\u6570\u751f\u6548\u3002 #deleteEdge: false # \u5355\u6279\u6b21\u5199\u5165 NebulaGraph \u7684\u6570\u636e\u6761\u6570\u3002 batch: 256 # Spark \u5206\u533a\u6570\u91cf partition: 32 } # \u8bbe\u7f6e Tag team \u76f8\u5173\u4fe1\u606f\u3002 { name: team type: { source: jdbc sink: client } url:\"jdbc:mysql://127.0.0.1:3306/basketball?useUnicode=true&characterEncoding=utf-8\" driver:\"com.mysql.cj.jdbc.Driver\" user:root password:\"12345\" table:team sentence:\"select teamid, name from team order by teamid\" partitionColumn:teamid lowerBound:1 upperBound:5 numPartitions:5 fetchSize:2 fields: [name] nebula.fields: [name] vertex: { field: teamid } batch: 256 partition: 32 } ] # \u5904\u7406\u8fb9\u6570\u636e edges: [ # \u8bbe\u7f6e Edge type follow \u76f8\u5173\u4fe1\u606f { # NebulaGraph \u4e2d\u5bf9\u5e94\u7684 Edge type \u540d\u79f0\u3002 name: follow type: { # \u6307\u5b9a\u6570\u636e\u6e90\u6587\u4ef6\u683c\u5f0f\uff0c\u8bbe\u7f6e\u4e3a JDBC\u3002 source: jdbc # \u6307\u5b9a\u8fb9\u6570\u636e\u5bfc\u5165 NebulaGraph \u7684\u65b9\u5f0f\uff0c # \u6307\u5b9a\u5982\u4f55\u5c06\u70b9\u6570\u636e\u5bfc\u5165NebulaGraph\uff1aClient \u6216 SST\u3002 sink: client } url:\"jdbc:mysql://127.0.0.1:3306/basketball?useUnicode=true&characterEncoding=utf-8\" driver:\"com.mysql.cj.jdbc.Driver\" user:root password:\"12345\" # \u626b\u63cf\u5355\u4e2a\u8868\u8bfb\u53d6\u6570\u636e\u3002 # nebula-exchange_spark_2.2 \u5fc5\u987b\u914d\u7f6e\u8be5\u53c2\u6570\uff0c\u8fd8\u53ef\u4ee5\u989d\u5916\u914d\u7f6e sentence\u3002 # nebula-exchange_spark_2.4 \u548c nebula-exchange_spark_3.0 \u53ef\u4ee5\u914d\u7f6e\u8be5\u53c2\u6570\uff0c\u4f46\u662f\u4e0d\u80fd\u548c sentence \u540c\u65f6\u914d\u7f6e\u3002 table:\"basketball.follow\" # \u901a\u8fc7\u67e5\u8be2\u8bed\u53e5\u8bfb\u53d6\u6570\u636e\u3002 # nebula-exchange_spark_2.2 \u53ef\u4ee5\u914d\u7f6e\u8be5\u53c2\u6570\u3002\u4e0d\u652f\u6301\u591a\u8868\u67e5\u8be2\u3002\u5728 from \u540e\u53ea\u9700\u8981\u5199\u8868\u540d\uff0c\u4e0d\u652f\u6301`\u5e93\u540d.\u8868\u540d`\u3002 # nebula-exchange_spark_2.4 \u548c nebula-exchange_spark_3.0 \u53ef\u4ee5\u914d\u7f6e\u8be5\u53c2\u6570\uff0c\u4f46\u662f\u4e0d\u80fd\u548c table \u540c\u65f6\u914d\u7f6e\u3002\u652f\u6301\u591a\u8868\u67e5\u8be2\u3002 # sentence:\"select src_player,dst_player,degree from follow order by src_player\" partitionColumn:src_player lowerBound:1 upperBound:5 numPartitions:5 fetchSize:2 # \u5728 fields \u91cc\u6307\u5b9a follow \u8868\u4e2d\u7684\u5217\u540d\u79f0\uff0c\u5176\u5bf9\u5e94\u7684 value \u4f1a\u4f5c\u4e3a NebulaGraph \u4e2d\u6307\u5b9a\u5c5e\u6027\u3002 # fields \u548c nebula.fields \u91cc\u7684\u914d\u7f6e\u5fc5\u987b\u4e00\u4e00\u5bf9\u5e94\u3002 # \u5982\u679c\u9700\u8981\u6307\u5b9a\u591a\u4e2a\u5217\u540d\u79f0\uff0c\u7528\u82f1\u6587\u9017\u53f7\uff08,\uff09\u9694\u5f00\u3002 fields: [degree] nebula.fields: [degree] # \u5728 source \u91cc\uff0c\u5c06 follow \u8868\u4e2d\u67d0\u4e00\u5217\u4f5c\u4e3a\u8fb9\u7684\u8d77\u59cb\u70b9\u6570\u636e\u6e90\u3002 # \u5728 target \u91cc\uff0c\u5c06 follow \u8868\u4e2d\u67d0\u4e00\u5217\u4f5c\u4e3a\u8fb9\u7684\u76ee\u7684\u70b9\u6570\u636e\u6e90\u3002 source: { field: src_player # udf:{ # separator:\"_\" # oldColNames:[field-0,field-1,field-2] # newColName:new-field # } # \u4e3a VID \u589e\u52a0\u6307\u5b9a\u7684\u524d\u7f00\u3002\u4f8b\u5982 VID \u4e3a 12345\uff0c\u589e\u52a0\u524d\u7f00 tag1 \u540e\u4e3a tag1_12345\u3002\u4e0b\u5212\u7ebf\u65e0\u6cd5\u4fee\u6539\u3002 # prefix:\"tag1\" # \u5bf9 string \u7c7b\u578b\u7684 VID \u8fdb\u884c\u54c8\u5e0c\u5316\u64cd\u4f5c\u3002 # policy:hash } target: { field: dst_player # udf:{ # separator:\"_\" # oldColNames:[field-0,field-1,field-2] # newColName:new-field # } # \u4e3a VID \u589e\u52a0\u6307\u5b9a\u7684\u524d\u7f00\u3002\u4f8b\u5982 VID \u4e3a 12345\uff0c\u589e\u52a0\u524d\u7f00 tag1 \u540e\u4e3a tag1_12345\u3002\u4e0b\u5212\u7ebf\u65e0\u6cd5\u4fee\u6539\u3002 # prefix:\"tag1\" # \u5bf9 string \u7c7b\u578b\u7684 VID \u8fdb\u884c\u54c8\u5e0c\u5316\u64cd\u4f5c\u3002 # policy:hash } # \u6307\u5b9a\u4e00\u4e2a\u5217\u4f5c\u4e3a rank \u7684\u6e90\uff08\u53ef\u9009\uff09\u3002 #ranking: rank # \u6279\u91cf\u64cd\u4f5c\u7c7b\u578b\uff0c\u5305\u62ec INSERT\u3001UPDATE \u548c DELETE\u3002\u9ed8\u8ba4\u4e3a INSERT\u3002 #writeMode: INSERT # \u5355\u6279\u6b21\u5199\u5165 NebulaGraph \u7684\u6570\u636e\u6761\u6570\u3002 batch: 256 # Spark \u5206\u533a\u6570\u91cf partition: 32 } # \u8bbe\u7f6e Edge type serve \u76f8\u5173\u4fe1\u606f { name: serve type: { source: jdbc sink: client } url:\"jdbc:mysql://127.0.0.1:3306/basketball?useUnicode=true&characterEncoding=utf-8\" driver:\"com.mysql.cj.jdbc.Driver\" user:root password:\"12345\" table:serve sentence:\"select playerid,teamid,start_year,end_year from serve order by playerid\" partitionColumn:playerid lowerBound:1 upperBound:5 numPartitions:5 fetchSize:2 fields: [start_year,end_year] nebula.fields: [start_year,end_year] source: { field: playerid } target: { field: teamid } # \u6307\u5b9a\u4e00\u4e2a\u5217\u4f5c\u4e3a rank \u7684\u6e90\uff08\u53ef\u9009\uff09\u3002 #ranking: rank batch: 256 partition: 32 } ] } \u6b65\u9aa4 4\uff1a\u5411NebulaGraph\u5bfc\u5165\u6570\u636e \u00b6 \u8fd0\u884c\u5982\u4e0b\u547d\u4ee4\u5c06 JDBC \u6570\u636e\u5bfc\u5165\u5230NebulaGraph\u4e2d\u3002\u5173\u4e8e\u53c2\u6570\u7684\u8bf4\u660e\uff0c\u8bf7\u53c2\u89c1 \u5bfc\u5165\u547d\u4ee4\u53c2\u6570 \u3002 ${ SPARK_HOME } /bin/spark-submit --master \"local\" --class com.vesoft.nebula.exchange.Exchange <nebula-exchange-3.6.0.jar_path> -c <jdbc_application.conf_path> Note JAR \u5305\u6709\u4e24\u79cd\u83b7\u53d6\u65b9\u5f0f\uff1a \u81ea\u884c\u7f16\u8bd1 \u6216\u8005\u4ece maven \u4ed3\u5e93\u4e0b\u8f7d\u3002 \u793a\u4f8b\uff1a ${ SPARK_HOME } /bin/spark-submit --master \"local\" --class com.vesoft.nebula.exchange.Exchange /root/nebula-echange/nebula-exchange/target/nebula-exchange-3.6.0.jar -c /root/nebula-exchange/nebula-exchange/target/classes/jdbc_application.conf \u7528\u6237\u53ef\u4ee5\u5728\u8fd4\u56de\u4fe1\u606f\u4e2d\u641c\u7d22 batchSuccess.<tag_name/edge_name> \uff0c\u786e\u8ba4\u6210\u529f\u7684\u6570\u91cf\u3002\u4f8b\u5982 batchSuccess.follow: 300 \u3002 \u6b65\u9aa4 5\uff1a\uff08\u53ef\u9009\uff09\u9a8c\u8bc1\u6570\u636e \u00b6 \u7528\u6237\u53ef\u4ee5\u5728NebulaGraph\u5ba2\u6237\u7aef\uff08\u4f8b\u5982 NebulaGraph Studio\uff09\u4e2d\u6267\u884c\u67e5\u8be2\u8bed\u53e5\uff0c\u786e\u8ba4\u6570\u636e\u662f\u5426\u5df2\u5bfc\u5165\u3002\u4f8b\u5982\uff1a LOOKUP ON player YIELD id(vertex); \u7528\u6237\u4e5f\u53ef\u4ee5\u4f7f\u7528\u547d\u4ee4 SHOW STATS \u67e5\u770b\u7edf\u8ba1\u6570\u636e\u3002 \u6b65\u9aa4 6\uff1a\uff08\u5982\u6709\uff09\u5728NebulaGraph\u4e2d\u91cd\u5efa\u7d22\u5f15 \u00b6 \u5bfc\u5165\u6570\u636e\u540e\uff0c\u7528\u6237\u53ef\u4ee5\u5728NebulaGraph\u4e2d\u91cd\u65b0\u521b\u5efa\u5e76\u91cd\u5efa\u7d22\u5f15\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1 \u7d22\u5f15\u4ecb\u7ecd \u3002","title":"\u5bfc\u5165\u901a\u7528 JDBC \u6570\u636e"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-jdbc/#jdbc","text":"JDBC \u6570\u636e\u662f\u6307\u7528 JDBC \u63a5\u53e3\u8bbf\u95ee\u7684\u5404\u7c7b\u6570\u636e\u5e93\u7684\u6570\u636e\u7684\u7edf\u79f0\u3002\u672c\u6587\u4ee5 MySQL \u6570\u636e\u5e93\u4e3a\u4f8b\u8bf4\u660e\u5982\u4f55\u4f7f\u7528 Exchange \u5c06 JDBC \u6570\u636e\u5bfc\u5165NebulaGraph\u3002","title":"\u5bfc\u5165\u901a\u7528 JDBC \u6570\u636e"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-jdbc/#_1","text":"\u672c\u6587\u4ee5 basketballplayer \u6570\u636e\u96c6 \u4e3a\u4f8b\u3002 \u5728\u672c\u793a\u4f8b\u4e2d\uff0c\u8be5\u6570\u636e\u96c6\u5df2\u7ecf\u5b58\u5165 MySQL \u4e2d\u540d\u4e3a basketball \u7684\u6570\u636e\u5e93\u4e2d\uff0c\u4ee5 player \u3001 team \u3001 follow \u548c serve \u56db\u4e2a\u8868\u5b58\u50a8\u4e86\u6240\u6709\u70b9\u548c\u8fb9\u7684\u4fe1\u606f\u3002\u4ee5\u4e0b\u4e3a\u5404\u4e2a\u8868\u7684\u7ed3\u6784\u3002 mysql > desc player ; + ----------+-------------+------+-----+---------+-------+ | Field | Type | Null | Key | Default | Extra | + ----------+-------------+------+-----+---------+-------+ | playerid | int | YES | | NULL | | | age | int | YES | | NULL | | | name | varchar ( 30 ) | YES | | NULL | | + ----------+-------------+------+-----+---------+-------+ mysql > desc team ; + --------+-------------+------+-----+---------+-------+ | Field | Type | Null | Key | Default | Extra | + --------+-------------+------+-----+---------+-------+ | teamid | int | YES | | NULL | | | name | varchar ( 30 ) | YES | | NULL | | + --------+-------------+------+-----+---------+-------+ mysql > desc follow ; + ------------+-------------+------+-----+---------+-------+ | Field | Type | Null | Key | Default | Extra | + ------------+-------------+------+-----+---------+-------+ | src_player | int | YES | | NULL | | | dst_player | int | YES | | NULL | | | degree | int | YES | | NULL | | + ------------+-------------+------+-----+---------+-------+ mysql > desc serve ; + ------------+-------------+------+-----+---------+-------+ | Field | Type | Null | Key | Default | Extra | + ------------+-------------+------+-----+---------+-------+ | playerid | int | YES | | NULL | | | teamid | int | YES | | NULL | | | start_year | int | YES | | NULL | | | end_year | int | YES | | NULL | | + ------------+-------------+------+-----+---------+-------+","title":"\u6570\u636e\u96c6"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-jdbc/#_2","text":"\u672c\u6587\u793a\u4f8b\u5728 MacOS \u4e0b\u5b8c\u6210\uff0c\u4ee5\u4e0b\u662f\u76f8\u5173\u7684\u73af\u5883\u914d\u7f6e\u4fe1\u606f\uff1a \u786c\u4ef6\u89c4\u683c\uff1a CPU\uff1a1.7 GHz Quad-Core Intel Core i7 \u5185\u5b58\uff1a16 GB Spark\uff1a2.3.0\uff0c\u5355\u673a\u7248 NebulaGraph\uff1a3.6.0\u3002","title":"\u73af\u5883\u914d\u7f6e"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-jdbc/#_3","text":"\u5f00\u59cb\u5bfc\u5165\u6570\u636e\u4e4b\u524d\uff0c\u7528\u6237\u9700\u8981\u786e\u8ba4\u4ee5\u4e0b\u4fe1\u606f\uff1a \u5df2\u7ecf \u5b89\u88c5\u90e8\u7f72NebulaGraph \u5e76\u83b7\u53d6\u5982\u4e0b\u4fe1\u606f\uff1a Graph \u670d\u52a1\u548c Meta \u670d\u52a1\u7684\u7684 IP \u5730\u5740\u548c\u7aef\u53e3\u3002 \u62e5\u6709NebulaGraph\u5199\u6743\u9650\u7684\u7528\u6237\u540d\u548c\u5bc6\u7801\u3002 \u5df2\u7ecf\u7f16\u8bd1 Exchange\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1 \u7f16\u8bd1 Exchange \u3002\u672c\u793a\u4f8b\u4e2d\u4f7f\u7528 Exchange 3.6.0\u3002 \u5df2\u7ecf\u5b89\u88c5 Spark\u3002 \u4e86\u89e3NebulaGraph\u4e2d\u521b\u5efa Schema \u7684\u4fe1\u606f\uff0c\u5305\u62ec Tag \u548c Edge type \u7684\u540d\u79f0\u3001\u5c5e\u6027\u7b49\u3002 \u5982\u679c\u6587\u4ef6\u5b58\u50a8\u5728\u672c\u5730\u4e14NebulaGraph\u662f\u96c6\u7fa4\u67b6\u6784\uff0c\u9700\u8981\u5728\u96c6\u7fa4\u6bcf\u53f0\u673a\u5668\u672c\u5730\u76f8\u540c\u76ee\u5f55\u4e0b\u653e\u7f6e\u6587\u4ef6\u3002","title":"\u524d\u63d0\u6761\u4ef6"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-jdbc/#_4","text":"nebula-exchange_spark_2.2 \u4ec5\u652f\u6301\u5355\u8868\u67e5\u8be2\uff0c\u4e0d\u652f\u6301\u591a\u8868\u67e5\u8be2\u3002","title":"\u6ce8\u610f\u4e8b\u9879"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-jdbc/#_5","text":"","title":"\u64cd\u4f5c\u6b65\u9aa4"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-jdbc/#1nebulagraph_schema","text":"\u5206\u6790\u6587\u4ef6\u4e2d\u7684\u6570\u636e\uff0c\u6309\u4ee5\u4e0b\u6b65\u9aa4\u5728NebulaGraph\u4e2d\u521b\u5efa Schema\uff1a \u786e\u8ba4 Schema \u8981\u7d20\u3002NebulaGraph\u4e2d\u7684 Schema \u8981\u7d20\u5982\u4e0b\u8868\u6240\u793a\u3002 \u8981\u7d20 \u540d\u79f0 \u5c5e\u6027 Tag player name string, age int Tag team name string Edge Type follow degree int Edge Type serve start_year int, end_year int \u4f7f\u7528 NebulaGraph Console \u521b\u5efa\u4e00\u4e2a\u56fe\u7a7a\u95f4 basketballplayer \uff0c\u5e76\u521b\u5efa\u4e00\u4e2a Schema\uff0c\u5982\u4e0b\u6240\u793a\u3002 ## \u521b\u5efa\u56fe\u7a7a\u95f4 nebula> CREATE SPACE basketballplayer \\ (partition_num = 10, \\ replica_factor = 1, \\ vid_type = FIXED_STRING(30)); ## \u9009\u62e9\u56fe\u7a7a\u95f4 basketballplayer nebula> USE basketballplayer; ## \u521b\u5efa Tag player nebula> CREATE TAG player(name string, age int); ## \u521b\u5efa Tag team nebula> CREATE TAG team(name string); ## \u521b\u5efa Edge type follow nebula> CREATE EDGE follow(degree int); ## \u521b\u5efa Edge type serve nebula> CREATE EDGE serve(start_year int, end_year int); \u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u89c1 \u5feb\u901f\u5f00\u59cb \u3002","title":"\u6b65\u9aa4 1\uff1a\u5728NebulaGraph\u4e2d\u521b\u5efa Schema"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-jdbc/#2","text":"\u7f16\u8bd1 Exchange \u540e\uff0c\u590d\u5236 target/classes/application.conf \u6587\u4ef6\u8bbe\u7f6e JDBC \u6570\u636e\u6e90\u76f8\u5173\u7684\u914d\u7f6e\u3002\u5728\u672c\u793a\u4f8b\u4e2d\uff0c\u590d\u5236\u7684\u6587\u4ef6\u540d\u4e3a jdbc_application.conf \u3002\u5404\u4e2a\u914d\u7f6e\u9879\u7684\u8be6\u7ec6\u8bf4\u660e\u8bf7\u53c2\u89c1 \u914d\u7f6e\u8bf4\u660e \u3002 { # Spark \u76f8\u5173\u914d\u7f6e spark: { app: { name: NebulaGraph Exchange 3.6.0 } driver: { cores: 1 maxResultSize: 1G } executor: { memory:1G } cores: { max: 16 } } # NebulaGraph \u76f8\u5173\u914d\u7f6e nebula: { address:{ # \u6307\u5b9a Graph \u670d\u52a1\u548c\u6240\u6709 Meta \u670d\u52a1\u7684 IP \u5730\u5740\u548c\u7aef\u53e3\u3002 # \u5982\u679c\u6709\u591a\u53f0\u670d\u52a1\u5668\uff0c\u5730\u5740\u4e4b\u95f4\u7528\u82f1\u6587\u9017\u53f7\uff08,\uff09\u5206\u9694\u3002 # \u683c\u5f0f\uff1a\"ip1:port\",\"ip2:port\",\"ip3:port\" graph:[\"127.0.0.1:9669\"] #\u4efb\u610f\u4e00\u4e2a Meta \u670d\u52a1\u7684\u5730\u5740\u3002 #\u5982\u679c\u60a8\u7684 NebulaGraph \u5728\u865a\u62df\u7f51\u7edc\u4e2d\uff0c\u5982k8s\uff0c\u8bf7\u914d\u7f6e Leader Meta\u7684\u5730\u5740\u3002 meta:[\"127.0.0.1:9559\"] } # \u6307\u5b9a\u62e5\u6709 NebulaGraph \u5199\u6743\u9650\u7684\u7528\u6237\u540d\u548c\u5bc6\u7801\u3002 user: root pswd: nebula # \u6307\u5b9a\u56fe\u7a7a\u95f4\u540d\u79f0\u3002 space: basketballplayer connection: { timeout: 3000 retry: 3 } execution: { retry: 3 } error: { max: 32 output: /tmp/errors } rate: { limit: 1024 timeout: 1000 } } # \u5904\u7406\u70b9 tags: [ # \u8bbe\u7f6e Tag player \u76f8\u5173\u4fe1\u606f\u3002 { # \u6307\u5b9a NebulaGraph \u4e2d\u5b9a\u4e49\u7684 Tag \u540d\u79f0\u3002 name: player type: { # \u6307\u5b9a\u6570\u636e\u6e90\uff0c\u4f7f\u7528 JDBC\u3002 source: jdbc # \u6307\u5b9a\u5982\u4f55\u5c06\u70b9\u6570\u636e\u5bfc\u5165NebulaGraph\uff1aClient \u6216 SST\u3002 sink: client } # JDBC \u6570\u636e\u6e90\u7684 URL\u3002\u793a\u4f8b\u4e3a MySql \u6570\u636e\u5e93\u3002 url:\"jdbc:mysql://127.0.0.1:3306/basketball?useUnicode=true&characterEncoding=utf-8\" # JDBC \u9a71\u52a8\u3002 driver:\"com.mysql.cj.jdbc.Driver\" # \u6570\u636e\u5e93\u7528\u6237\u540d\u548c\u5bc6\u7801\u3002 user:\"root\" password:\"12345\" # \u626b\u63cf\u5355\u4e2a\u8868\u8bfb\u53d6\u6570\u636e\u3002 # nebula-exchange_spark_2.2 \u5fc5\u987b\u914d\u7f6e\u8be5\u53c2\u6570\uff0c\u8fd8\u53ef\u4ee5\u989d\u5916\u914d\u7f6e sentence\u3002 # nebula-exchange_spark_2.4 \u548c nebula-exchange_spark_3.0 \u53ef\u4ee5\u914d\u7f6e\u8be5\u53c2\u6570\uff0c\u4f46\u662f\u4e0d\u80fd\u548c sentence \u540c\u65f6\u914d\u7f6e\u3002 table:\"basketball.player\" # \u901a\u8fc7\u67e5\u8be2\u8bed\u53e5\u8bfb\u53d6\u6570\u636e\u3002 # nebula-exchange_spark_2.2 \u53ef\u4ee5\u914d\u7f6e\u8be5\u53c2\u6570\u3002\u4e0d\u652f\u6301\u591a\u8868\u67e5\u8be2\u3002\u5728 from \u540e\u53ea\u9700\u8981\u5199\u8868\u540d\uff0c\u4e0d\u652f\u6301`\u5e93\u540d.\u8868\u540d`\u3002 # nebula-exchange_spark_2.4 \u548c nebula-exchange_spark_3.0 \u53ef\u4ee5\u914d\u7f6e\u8be5\u53c2\u6570\uff0c\u4f46\u662f\u4e0d\u80fd\u548c table \u540c\u65f6\u914d\u7f6e\u3002\u652f\u6301\u591a\u8868\u67e5\u8be2\u3002 # sentence:\"select playerid, age, name from player, team order by playerid\" # \uff08\u53ef\u9009\uff09\u591a\u8fde\u63a5\u8bfb\u53d6\u53c2\u6570 \u53c2\u89c1 https://spark.apache.org/docs/latest/sql-data-sources-jdbc.html partitionColumn:playerid # \u53ef\u9009\u3002\u6570\u503c\u7c7b\u578b\u5fc5\u987b\u4e3a\u6570\u5b57\u3001\u65e5\u671f\u6216\u65f6\u95f4\u6233\u3002 lowerBound:1 # \u53ef\u9009 upperBound:5 # \u53ef\u9009 numPartitions:5 # \u53ef\u9009 fetchSize:2 # \u6bcf\u6b21\u8bf7\u6c42\u6570\u636e\u5e93\u8981\u8bfb\u53d6\u7684\u884c\u6570\u3002 # \u5728 fields \u91cc\u6307\u5b9a player \u8868\u4e2d\u7684\u5217\u540d\u79f0\uff0c\u5176\u5bf9\u5e94\u7684 value \u4f1a\u4f5c\u4e3a NebulaGraph \u4e2d\u6307\u5b9a\u5c5e\u6027\u3002 # fields \u548c nebula.fields \u91cc\u7684\u914d\u7f6e\u5fc5\u987b\u4e00\u4e00\u5bf9\u5e94\u3002 # \u5982\u679c\u9700\u8981\u6307\u5b9a\u591a\u4e2a\u5217\u540d\u79f0\uff0c\u7528\u82f1\u6587\u9017\u53f7\uff08,\uff09\u9694\u5f00\u3002 fields: [age,name] nebula.fields: [age,name] # \u6307\u5b9a\u8868\u4e2d\u67d0\u4e00\u5217\u6570\u636e\u4e3a NebulaGraph \u4e2d\u70b9 VID \u7684\u6765\u6e90\u3002 vertex: { field:playerid # udf:{ # separator:\"_\" # oldColNames:[field-0,field-1,field-2] # newColName:new-field # } # \u4e3a VID \u589e\u52a0\u6307\u5b9a\u7684\u524d\u7f00\u3002\u4f8b\u5982 VID \u4e3a 12345\uff0c\u589e\u52a0\u524d\u7f00 tag1 \u540e\u4e3a tag1_12345\u3002\u4e0b\u5212\u7ebf\u65e0\u6cd5\u4fee\u6539\u3002 # prefix:\"tag1\" # \u5bf9 string \u7c7b\u578b\u7684 VID \u8fdb\u884c\u54c8\u5e0c\u5316\u64cd\u4f5c\u3002 # policy:hash } # \u6279\u91cf\u64cd\u4f5c\u7c7b\u578b\uff0c\u5305\u62ec INSERT\u3001UPDATE \u548c DELETE\u3002\u9ed8\u8ba4\u4e3a INSERT\u3002 #writeMode: INSERT # \u6279\u91cf\u5220\u9664\u65f6\u662f\u5426\u5220\u9664\u8be5\u70b9\u5173\u8054\u7684\u51fa\u8fb9\u548c\u5165\u8fb9\u3002`writeMode`\u4e3a`DELETE`\u65f6\u8be5\u53c2\u6570\u751f\u6548\u3002 #deleteEdge: false # \u5355\u6279\u6b21\u5199\u5165 NebulaGraph \u7684\u6570\u636e\u6761\u6570\u3002 batch: 256 # Spark \u5206\u533a\u6570\u91cf partition: 32 } # \u8bbe\u7f6e Tag team \u76f8\u5173\u4fe1\u606f\u3002 { name: team type: { source: jdbc sink: client } url:\"jdbc:mysql://127.0.0.1:3306/basketball?useUnicode=true&characterEncoding=utf-8\" driver:\"com.mysql.cj.jdbc.Driver\" user:root password:\"12345\" table:team sentence:\"select teamid, name from team order by teamid\" partitionColumn:teamid lowerBound:1 upperBound:5 numPartitions:5 fetchSize:2 fields: [name] nebula.fields: [name] vertex: { field: teamid } batch: 256 partition: 32 } ] # \u5904\u7406\u8fb9\u6570\u636e edges: [ # \u8bbe\u7f6e Edge type follow \u76f8\u5173\u4fe1\u606f { # NebulaGraph \u4e2d\u5bf9\u5e94\u7684 Edge type \u540d\u79f0\u3002 name: follow type: { # \u6307\u5b9a\u6570\u636e\u6e90\u6587\u4ef6\u683c\u5f0f\uff0c\u8bbe\u7f6e\u4e3a JDBC\u3002 source: jdbc # \u6307\u5b9a\u8fb9\u6570\u636e\u5bfc\u5165 NebulaGraph \u7684\u65b9\u5f0f\uff0c # \u6307\u5b9a\u5982\u4f55\u5c06\u70b9\u6570\u636e\u5bfc\u5165NebulaGraph\uff1aClient \u6216 SST\u3002 sink: client } url:\"jdbc:mysql://127.0.0.1:3306/basketball?useUnicode=true&characterEncoding=utf-8\" driver:\"com.mysql.cj.jdbc.Driver\" user:root password:\"12345\" # \u626b\u63cf\u5355\u4e2a\u8868\u8bfb\u53d6\u6570\u636e\u3002 # nebula-exchange_spark_2.2 \u5fc5\u987b\u914d\u7f6e\u8be5\u53c2\u6570\uff0c\u8fd8\u53ef\u4ee5\u989d\u5916\u914d\u7f6e sentence\u3002 # nebula-exchange_spark_2.4 \u548c nebula-exchange_spark_3.0 \u53ef\u4ee5\u914d\u7f6e\u8be5\u53c2\u6570\uff0c\u4f46\u662f\u4e0d\u80fd\u548c sentence \u540c\u65f6\u914d\u7f6e\u3002 table:\"basketball.follow\" # \u901a\u8fc7\u67e5\u8be2\u8bed\u53e5\u8bfb\u53d6\u6570\u636e\u3002 # nebula-exchange_spark_2.2 \u53ef\u4ee5\u914d\u7f6e\u8be5\u53c2\u6570\u3002\u4e0d\u652f\u6301\u591a\u8868\u67e5\u8be2\u3002\u5728 from \u540e\u53ea\u9700\u8981\u5199\u8868\u540d\uff0c\u4e0d\u652f\u6301`\u5e93\u540d.\u8868\u540d`\u3002 # nebula-exchange_spark_2.4 \u548c nebula-exchange_spark_3.0 \u53ef\u4ee5\u914d\u7f6e\u8be5\u53c2\u6570\uff0c\u4f46\u662f\u4e0d\u80fd\u548c table \u540c\u65f6\u914d\u7f6e\u3002\u652f\u6301\u591a\u8868\u67e5\u8be2\u3002 # sentence:\"select src_player,dst_player,degree from follow order by src_player\" partitionColumn:src_player lowerBound:1 upperBound:5 numPartitions:5 fetchSize:2 # \u5728 fields \u91cc\u6307\u5b9a follow \u8868\u4e2d\u7684\u5217\u540d\u79f0\uff0c\u5176\u5bf9\u5e94\u7684 value \u4f1a\u4f5c\u4e3a NebulaGraph \u4e2d\u6307\u5b9a\u5c5e\u6027\u3002 # fields \u548c nebula.fields \u91cc\u7684\u914d\u7f6e\u5fc5\u987b\u4e00\u4e00\u5bf9\u5e94\u3002 # \u5982\u679c\u9700\u8981\u6307\u5b9a\u591a\u4e2a\u5217\u540d\u79f0\uff0c\u7528\u82f1\u6587\u9017\u53f7\uff08,\uff09\u9694\u5f00\u3002 fields: [degree] nebula.fields: [degree] # \u5728 source \u91cc\uff0c\u5c06 follow \u8868\u4e2d\u67d0\u4e00\u5217\u4f5c\u4e3a\u8fb9\u7684\u8d77\u59cb\u70b9\u6570\u636e\u6e90\u3002 # \u5728 target \u91cc\uff0c\u5c06 follow \u8868\u4e2d\u67d0\u4e00\u5217\u4f5c\u4e3a\u8fb9\u7684\u76ee\u7684\u70b9\u6570\u636e\u6e90\u3002 source: { field: src_player # udf:{ # separator:\"_\" # oldColNames:[field-0,field-1,field-2] # newColName:new-field # } # \u4e3a VID \u589e\u52a0\u6307\u5b9a\u7684\u524d\u7f00\u3002\u4f8b\u5982 VID \u4e3a 12345\uff0c\u589e\u52a0\u524d\u7f00 tag1 \u540e\u4e3a tag1_12345\u3002\u4e0b\u5212\u7ebf\u65e0\u6cd5\u4fee\u6539\u3002 # prefix:\"tag1\" # \u5bf9 string \u7c7b\u578b\u7684 VID \u8fdb\u884c\u54c8\u5e0c\u5316\u64cd\u4f5c\u3002 # policy:hash } target: { field: dst_player # udf:{ # separator:\"_\" # oldColNames:[field-0,field-1,field-2] # newColName:new-field # } # \u4e3a VID \u589e\u52a0\u6307\u5b9a\u7684\u524d\u7f00\u3002\u4f8b\u5982 VID \u4e3a 12345\uff0c\u589e\u52a0\u524d\u7f00 tag1 \u540e\u4e3a tag1_12345\u3002\u4e0b\u5212\u7ebf\u65e0\u6cd5\u4fee\u6539\u3002 # prefix:\"tag1\" # \u5bf9 string \u7c7b\u578b\u7684 VID \u8fdb\u884c\u54c8\u5e0c\u5316\u64cd\u4f5c\u3002 # policy:hash } # \u6307\u5b9a\u4e00\u4e2a\u5217\u4f5c\u4e3a rank \u7684\u6e90\uff08\u53ef\u9009\uff09\u3002 #ranking: rank # \u6279\u91cf\u64cd\u4f5c\u7c7b\u578b\uff0c\u5305\u62ec INSERT\u3001UPDATE \u548c DELETE\u3002\u9ed8\u8ba4\u4e3a INSERT\u3002 #writeMode: INSERT # \u5355\u6279\u6b21\u5199\u5165 NebulaGraph \u7684\u6570\u636e\u6761\u6570\u3002 batch: 256 # Spark \u5206\u533a\u6570\u91cf partition: 32 } # \u8bbe\u7f6e Edge type serve \u76f8\u5173\u4fe1\u606f { name: serve type: { source: jdbc sink: client } url:\"jdbc:mysql://127.0.0.1:3306/basketball?useUnicode=true&characterEncoding=utf-8\" driver:\"com.mysql.cj.jdbc.Driver\" user:root password:\"12345\" table:serve sentence:\"select playerid,teamid,start_year,end_year from serve order by playerid\" partitionColumn:playerid lowerBound:1 upperBound:5 numPartitions:5 fetchSize:2 fields: [start_year,end_year] nebula.fields: [start_year,end_year] source: { field: playerid } target: { field: teamid } # \u6307\u5b9a\u4e00\u4e2a\u5217\u4f5c\u4e3a rank \u7684\u6e90\uff08\u53ef\u9009\uff09\u3002 #ranking: rank batch: 256 partition: 32 } ] }","title":"\u6b65\u9aa4 2. \u4fee\u6539\u914d\u7f6e\u6587\u4ef6"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-jdbc/#4nebulagraph","text":"\u8fd0\u884c\u5982\u4e0b\u547d\u4ee4\u5c06 JDBC \u6570\u636e\u5bfc\u5165\u5230NebulaGraph\u4e2d\u3002\u5173\u4e8e\u53c2\u6570\u7684\u8bf4\u660e\uff0c\u8bf7\u53c2\u89c1 \u5bfc\u5165\u547d\u4ee4\u53c2\u6570 \u3002 ${ SPARK_HOME } /bin/spark-submit --master \"local\" --class com.vesoft.nebula.exchange.Exchange <nebula-exchange-3.6.0.jar_path> -c <jdbc_application.conf_path> Note JAR \u5305\u6709\u4e24\u79cd\u83b7\u53d6\u65b9\u5f0f\uff1a \u81ea\u884c\u7f16\u8bd1 \u6216\u8005\u4ece maven \u4ed3\u5e93\u4e0b\u8f7d\u3002 \u793a\u4f8b\uff1a ${ SPARK_HOME } /bin/spark-submit --master \"local\" --class com.vesoft.nebula.exchange.Exchange /root/nebula-echange/nebula-exchange/target/nebula-exchange-3.6.0.jar -c /root/nebula-exchange/nebula-exchange/target/classes/jdbc_application.conf \u7528\u6237\u53ef\u4ee5\u5728\u8fd4\u56de\u4fe1\u606f\u4e2d\u641c\u7d22 batchSuccess.<tag_name/edge_name> \uff0c\u786e\u8ba4\u6210\u529f\u7684\u6570\u91cf\u3002\u4f8b\u5982 batchSuccess.follow: 300 \u3002","title":"\u6b65\u9aa4 4\uff1a\u5411NebulaGraph\u5bfc\u5165\u6570\u636e"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-jdbc/#5","text":"\u7528\u6237\u53ef\u4ee5\u5728NebulaGraph\u5ba2\u6237\u7aef\uff08\u4f8b\u5982 NebulaGraph Studio\uff09\u4e2d\u6267\u884c\u67e5\u8be2\u8bed\u53e5\uff0c\u786e\u8ba4\u6570\u636e\u662f\u5426\u5df2\u5bfc\u5165\u3002\u4f8b\u5982\uff1a LOOKUP ON player YIELD id(vertex); \u7528\u6237\u4e5f\u53ef\u4ee5\u4f7f\u7528\u547d\u4ee4 SHOW STATS \u67e5\u770b\u7edf\u8ba1\u6570\u636e\u3002","title":"\u6b65\u9aa4 5\uff1a\uff08\u53ef\u9009\uff09\u9a8c\u8bc1\u6570\u636e"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-jdbc/#6nebulagraph","text":"\u5bfc\u5165\u6570\u636e\u540e\uff0c\u7528\u6237\u53ef\u4ee5\u5728NebulaGraph\u4e2d\u91cd\u65b0\u521b\u5efa\u5e76\u91cd\u5efa\u7d22\u5f15\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1 \u7d22\u5f15\u4ecb\u7ecd \u3002","title":"\u6b65\u9aa4 6\uff1a\uff08\u5982\u6709\uff09\u5728NebulaGraph\u4e2d\u91cd\u5efa\u7d22\u5f15"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-json/","text":"\u5bfc\u5165 JSON \u6587\u4ef6\u6570\u636e \u00b6 \u672c\u6587\u4ee5\u4e00\u4e2a\u793a\u4f8b\u8bf4\u660e\u5982\u4f55\u4f7f\u7528 Exchange \u5c06\u5b58\u50a8\u5728 HDFS \u6216\u672c\u5730\u7684 JSON \u6587\u4ef6\u6570\u636e\u5bfc\u5165NebulaGraph\u3002 \u6570\u636e\u96c6 \u00b6 \u672c\u6587\u4ee5 basketballplayer \u6570\u636e\u96c6\u4e3a\u4f8b\u3002\u90e8\u5206\u793a\u4f8b\u6570\u636e\u5982\u4e0b\uff1a player { \"id\" : \"player100\" , \"age\" : 42 , \"name\" : \"Tim Duncan\" } { \"id\" : \"player101\" , \"age\" : 36 , \"name\" : \"Tony Parker\" } { \"id\" : \"player102\" , \"age\" : 33 , \"name\" : \"LaMarcus Aldridge\" } { \"id\" : \"player103\" , \"age\" : 32 , \"name\" : \"Rudy Gay\" } ... team { \"id\" : \"team200\" , \"name\" : \"Warriors\" } { \"id\" : \"team201\" , \"name\" : \"Nuggets\" } ... follow { \"src\" : \"player100\" , \"dst\" : \"player101\" , \"degree\" : 95 } { \"src\" : \"player101\" , \"dst\" : \"player102\" , \"degree\" : 90 } ... serve { \"src\" : \"player100\" , \"dst\" : \"team204\" , \"start_year\" : \"1997\" , \"end_year\" : \"2016\" } { \"src\" : \"player101\" , \"dst\" : \"team204\" , \"start_year\" : \"1999\" , \"end_year\" : \"2018\" } ... \u73af\u5883\u914d\u7f6e \u00b6 \u672c\u6587\u793a\u4f8b\u5728 MacOS \u4e0b\u5b8c\u6210\uff0c\u4ee5\u4e0b\u662f\u76f8\u5173\u7684\u73af\u5883\u914d\u7f6e\u4fe1\u606f\uff1a \u786c\u4ef6\u89c4\u683c\uff1a CPU\uff1a1.7 GHz Quad-Core Intel Core i7 \u5185\u5b58\uff1a16 GB Spark\uff1a2.3.0\uff0c\u5355\u673a\u7248 Hadoop\uff1a2.9.2\uff0c\u4f2a\u5206\u5e03\u5f0f\u90e8\u7f72 NebulaGraph\uff1a3.6.0\u3002 \u524d\u63d0\u6761\u4ef6 \u00b6 \u5f00\u59cb\u5bfc\u5165\u6570\u636e\u4e4b\u524d\uff0c\u7528\u6237\u9700\u8981\u786e\u8ba4\u4ee5\u4e0b\u4fe1\u606f\uff1a \u5df2\u7ecf \u5b89\u88c5\u90e8\u7f72NebulaGraph \u5e76\u83b7\u53d6\u5982\u4e0b\u4fe1\u606f\uff1a Graph \u670d\u52a1\u548c Meta \u670d\u52a1\u7684\u7684 IP \u5730\u5740\u548c\u7aef\u53e3\u3002 \u62e5\u6709NebulaGraph\u5199\u6743\u9650\u7684\u7528\u6237\u540d\u548c\u5bc6\u7801\u3002 \u5df2\u7ecf\u7f16\u8bd1 Exchange\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1 \u7f16\u8bd1 Exchange \u3002\u672c\u793a\u4f8b\u4e2d\u4f7f\u7528 Exchange 3.6.0\u3002 \u5df2\u7ecf\u5b89\u88c5 Spark\u3002 \u4e86\u89e3NebulaGraph\u4e2d\u521b\u5efa Schema \u7684\u4fe1\u606f\uff0c\u5305\u62ec Tag \u548c Edge type \u7684\u540d\u79f0\u3001\u5c5e\u6027\u7b49\u3002 \u5982\u679c\u6587\u4ef6\u5b58\u50a8\u5728 HDFS \u4e0a\uff0c\u9700\u8981\u786e\u8ba4 Hadoop \u670d\u52a1\u8fd0\u884c\u6b63\u5e38\u3002 \u5982\u679c\u6587\u4ef6\u5b58\u50a8\u5728\u672c\u5730\u4e14NebulaGraph\u662f\u96c6\u7fa4\u67b6\u6784\uff0c\u9700\u8981\u5728\u96c6\u7fa4\u6bcf\u53f0\u673a\u5668\u672c\u5730\u76f8\u540c\u76ee\u5f55\u4e0b\u653e\u7f6e\u6587\u4ef6\u3002 \u64cd\u4f5c\u6b65\u9aa4 \u00b6 \u6b65\u9aa4 1\uff1a\u5728NebulaGraph\u4e2d\u521b\u5efa Schema \u00b6 \u5206\u6790\u6587\u4ef6\u4e2d\u7684\u6570\u636e\uff0c\u6309\u4ee5\u4e0b\u6b65\u9aa4\u5728NebulaGraph\u4e2d\u521b\u5efa Schema\uff1a \u786e\u8ba4 Schema \u8981\u7d20\u3002NebulaGraph\u4e2d\u7684 Schema \u8981\u7d20\u5982\u4e0b\u8868\u6240\u793a\u3002 \u8981\u7d20 \u540d\u79f0 \u5c5e\u6027 Tag player name string, age int Tag team name string Edge Type follow degree int Edge Type serve start_year int, end_year int \u4f7f\u7528 NebulaGraph Console \u521b\u5efa\u4e00\u4e2a\u56fe\u7a7a\u95f4 basketballplayer \uff0c\u5e76\u521b\u5efa\u4e00\u4e2a Schema\uff0c\u5982\u4e0b\u6240\u793a\u3002 ## \u521b\u5efa\u56fe\u7a7a\u95f4 nebula> CREATE SPACE basketballplayer \\ (partition_num = 10, \\ replica_factor = 1, \\ vid_type = FIXED_STRING(30)); ## \u9009\u62e9\u56fe\u7a7a\u95f4 basketballplayer nebula> USE basketballplayer; ## \u521b\u5efa Tag player nebula> CREATE TAG player(name string, age int); ## \u521b\u5efa Tag team nebula> CREATE TAG team(name string); ## \u521b\u5efa Edge type follow nebula> CREATE EDGE follow(degree int); ## \u521b\u5efa Edge type serve nebula> CREATE EDGE serve(start_year int, end_year int); \u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u89c1 \u5feb\u901f\u5f00\u59cb \u3002 \u6b65\u9aa4 2\uff1a\u5904\u7406 JSON \u6587\u4ef6 \u00b6 \u786e\u8ba4\u4ee5\u4e0b\u4fe1\u606f\uff1a \u5904\u7406 JSON \u6587\u4ef6\u4ee5\u6ee1\u8db3 Schema \u7684\u8981\u6c42\u3002 \u83b7\u53d6 JSON \u6587\u4ef6\u5b58\u50a8\u8def\u5f84\u3002 \u6b65\u9aa4 3. \u4fee\u6539\u914d\u7f6e\u6587\u4ef6 \u00b6 \u7f16\u8bd1 Exchange \u540e\uff0c\u590d\u5236 target/classes/application.conf \u6587\u4ef6\u8bbe\u7f6e JSON \u6570\u636e\u6e90\u76f8\u5173\u7684\u914d\u7f6e\u3002\u5728\u672c\u793a\u4f8b\u4e2d\uff0c\u590d\u5236\u7684\u6587\u4ef6\u540d\u4e3a json_application.conf \u3002\u5404\u4e2a\u914d\u7f6e\u9879\u7684\u8be6\u7ec6\u8bf4\u660e\u8bf7\u53c2\u89c1 \u914d\u7f6e\u8bf4\u660e \u3002 { # Spark \u76f8\u5173\u914d\u7f6e spark: { app: { name: NebulaGraph Exchange 3.6.0 } driver: { cores: 1 maxResultSize: 1G } executor: { memory:1G } cores: { max: 16 } } # NebulaGraph \u76f8\u5173\u914d\u7f6e nebula: { address:{ # \u6307\u5b9a Graph \u670d\u52a1\u548c\u6240\u6709 Meta \u670d\u52a1\u7684 IP \u5730\u5740\u548c\u7aef\u53e3\u3002 # \u5982\u679c\u6709\u591a\u53f0\u670d\u52a1\u5668\uff0c\u5730\u5740\u4e4b\u95f4\u7528\u82f1\u6587\u9017\u53f7\uff08,\uff09\u5206\u9694\u3002 # \u683c\u5f0f\uff1a\"ip1:port\",\"ip2:port\",\"ip3:port\" graph:[\"127.0.0.1:9669\"] #\u4efb\u610f\u4e00\u4e2a Meta \u670d\u52a1\u7684\u5730\u5740\u3002 #\u5982\u679c\u60a8\u7684 NebulaGraph \u5728\u865a\u62df\u7f51\u7edc\u4e2d\uff0c\u5982k8s\uff0c\u8bf7\u914d\u7f6e Leader Meta\u7684\u5730\u5740\u3002 meta:[\"127.0.0.1:9559\"] } # \u6307\u5b9a\u62e5\u6709 NebulaGraph \u5199\u6743\u9650\u7684\u7528\u6237\u540d\u548c\u5bc6\u7801\u3002 user: root pswd: nebula # \u6307\u5b9a\u56fe\u7a7a\u95f4\u540d\u79f0\u3002 space: basketballplayer connection: { timeout: 3000 retry: 3 } execution: { retry: 3 } error: { max: 32 output: /tmp/errors } rate: { limit: 1024 timeout: 1000 } } # \u5904\u7406\u70b9 tags: [ # \u8bbe\u7f6e Tag player \u76f8\u5173\u4fe1\u606f\u3002 { # \u6307\u5b9a NebulaGraph \u4e2d\u5b9a\u4e49\u7684 Tag \u540d\u79f0\u3002 name: player type: { # \u6307\u5b9a\u6570\u636e\u6e90\uff0c\u4f7f\u7528 JSON\u3002 source: json # \u6307\u5b9a\u5982\u4f55\u5c06\u70b9\u6570\u636e\u5bfc\u5165NebulaGraph\uff1aClient \u6216 SST\u3002 sink: client } # \u6307\u5b9a JSON \u6587\u4ef6\u7684\u8def\u5f84\u3002 # \u5982\u679c\u6587\u4ef6\u5b58\u50a8\u5728 HDFS \u4e0a\uff0c\u7528\u53cc\u5f15\u53f7\u62ec\u8d77\u8def\u5f84\uff0c\u4ee5 hdfs://\u5f00\u5934\uff0c\u4f8b\u5982\"hdfs://ip:port/xx/xx\"\u3002 # \u5982\u679c\u6587\u4ef6\u5b58\u50a8\u5728\u672c\u5730\uff0c\u7528\u53cc\u5f15\u53f7\u62ec\u8d77\u8def\u5f84\uff0c\u4ee5 file://\u5f00\u5934\uff0c\u4f8b\u5982\"file:///tmp/xx.json\"\u3002 path: \"hdfs://192.168.*.*:9000/data/vertex_player.json\" # \u5728 fields \u91cc\u6307\u5b9a JSON \u6587\u4ef6\u4e2d key \u540d\u79f0\uff0c\u5176\u5bf9\u5e94\u7684 value \u4f1a\u4f5c\u4e3a NebulaGraph \u4e2d\u6307\u5b9a\u5c5e\u6027\u7684\u6570\u636e\u6e90\u3002 # \u5982\u679c\u9700\u8981\u6307\u5b9a\u591a\u4e2a\u503c\uff0c\u7528\u82f1\u6587\u9017\u53f7\uff08,\uff09\u9694\u5f00\u3002 fields: [age,name] # \u6307\u5b9a NebulaGraph \u4e2d\u5b9a\u4e49\u7684\u5c5e\u6027\u540d\u79f0\u3002 # fields \u4e0e nebula.fields \u7684\u987a\u5e8f\u5fc5\u987b\u4e00\u4e00\u5bf9\u5e94\u3002 nebula.fields: [age, name] # \u6307\u5b9a\u4e00\u4e2a\u5217\u4f5c\u4e3a VID \u7684\u6e90\u3002 # vertex \u7684\u503c\u5fc5\u987b\u4e0e JSON \u6587\u4ef6\u4e2d\u7684\u5b57\u6bb5\u4fdd\u6301\u4e00\u81f4\u3002 # \u76ee\u524d\uff0cNebulaGraph 3.6.0\u4ec5\u652f\u6301\u5b57\u7b26\u4e32\u6216\u6574\u6570\u7c7b\u578b\u7684 VID\u3002 vertex: { field:id # udf:{ # separator:\"_\" # oldColNames:[field-0,field-1,field-2] # newColName:new-field # } # \u4e3a VID \u589e\u52a0\u6307\u5b9a\u7684\u524d\u7f00\u3002\u4f8b\u5982 VID \u4e3a 12345\uff0c\u589e\u52a0\u524d\u7f00 tag1 \u540e\u4e3a tag1_12345\u3002\u4e0b\u5212\u7ebf\u65e0\u6cd5\u4fee\u6539\u3002 # prefix:\"tag1\" # \u5bf9 string \u7c7b\u578b\u7684 VID \u8fdb\u884c\u54c8\u5e0c\u5316\u64cd\u4f5c\u3002 # policy:hash } # \u6307\u5b9a\u5355\u6279\u6b21\u5199\u5165 NebulaGraph \u7684\u6700\u5927\u70b9\u6570\u91cf\u3002 batch: 256 # \u6307\u5b9a Spark \u5206\u7247\u6570\u91cf\u3002 partition: 32 } # \u8bbe\u7f6e Tag team \u76f8\u5173\u4fe1\u606f\u3002 { name: team type: { source: json sink: client } path: \"hdfs://192.168.*.*:9000/data/vertex_team.json\" fields: [name] nebula.fields: [name] vertex: { field:id } batch: 256 partition: 32 } # \u5982\u679c\u9700\u8981\u6dfb\u52a0\u66f4\u591a\u70b9\uff0c\u8bf7\u53c2\u8003\u524d\u9762\u7684\u914d\u7f6e\u8fdb\u884c\u6dfb\u52a0\u3002 ] # \u5904\u7406\u8fb9 edges: [ # \u8bbe\u7f6e Edge type follow \u76f8\u5173\u4fe1\u606f\u3002 { # \u6307\u5b9a NebulaGraph \u4e2d\u5b9a\u4e49\u7684 Edge type \u540d\u79f0\u3002 name: follow type: { # \u6307\u5b9a\u6570\u636e\u6e90\uff0c\u4f7f\u7528 JSON\u3002 source: json # \u6307\u5b9a\u5982\u4f55\u5c06\u70b9\u6570\u636e\u5bfc\u5165NebulaGraph\uff1aClient \u6216 SST\u3002 sink: client } # \u6307\u5b9a JSON \u6587\u4ef6\u7684\u8def\u5f84\u3002 # \u5982\u679c\u6587\u4ef6\u5b58\u50a8\u5728 HDFS \u4e0a\uff0c\u7528\u53cc\u5f15\u53f7\u62ec\u8d77\u8def\u5f84\uff0c\u4ee5 hdfs://\u5f00\u5934\uff0c\u4f8b\u5982\"hdfs://ip:port/xx/xx\"\u3002 # \u5982\u679c\u6587\u4ef6\u5b58\u50a8\u5728\u672c\u5730\uff0c\u7528\u53cc\u5f15\u53f7\u62ec\u8d77\u8def\u5f84\uff0c\u4ee5 file://\u5f00\u5934\uff0c\u4f8b\u5982\"file:///tmp/xx.json\"\u3002 path: \"hdfs://192.168.*.*:9000/data/edge_follow.json\" # \u5728 fields \u91cc\u6307\u5b9a JSON \u6587\u4ef6\u4e2d key \u540d\u79f0\uff0c\u5176\u5bf9\u5e94\u7684 value \u4f1a\u4f5c\u4e3a NebulaGraph \u4e2d\u6307\u5b9a\u5c5e\u6027\u7684\u6570\u636e\u6e90\u3002 # \u5982\u679c\u9700\u8981\u6307\u5b9a\u591a\u4e2a\u503c\uff0c\u7528\u82f1\u6587\u9017\u53f7\uff08,\uff09\u9694\u5f00\u3002 fields: [degree] # \u6307\u5b9a NebulaGraph \u4e2d\u5b9a\u4e49\u7684\u5c5e\u6027\u540d\u79f0\u3002 # fields \u4e0e nebula.fields \u7684\u987a\u5e8f\u5fc5\u987b\u4e00\u4e00\u5bf9\u5e94\u3002 nebula.fields: [degree] # \u6307\u5b9a\u4e00\u4e2a\u5217\u4f5c\u4e3a\u8d77\u59cb\u70b9\u548c\u76ee\u7684\u70b9\u7684\u6e90\u3002 # vertex \u7684\u503c\u5fc5\u987b\u4e0e JSON \u6587\u4ef6\u4e2d\u7684\u5b57\u6bb5\u4fdd\u6301\u4e00\u81f4\u3002 # \u76ee\u524d\uff0cNebulaGraph 3.6.0\u4ec5\u652f\u6301\u5b57\u7b26\u4e32\u6216\u6574\u6570\u7c7b\u578b\u7684 VID\u3002 source: { field: src # udf:{ # separator:\"_\" # oldColNames:[field-0,field-1,field-2] # newColName:new-field # } # \u4e3a VID \u589e\u52a0\u6307\u5b9a\u7684\u524d\u7f00\u3002\u4f8b\u5982 VID \u4e3a 12345\uff0c\u589e\u52a0\u524d\u7f00 tag1 \u540e\u4e3a tag1_12345\u3002\u4e0b\u5212\u7ebf\u65e0\u6cd5\u4fee\u6539\u3002 # prefix:\"tag1\" # \u5bf9 string \u7c7b\u578b\u7684 VID \u8fdb\u884c\u54c8\u5e0c\u5316\u64cd\u4f5c\u3002 # policy:hash } target: { field: dst # udf:{ # separator:\"_\" # oldColNames:[field-0,field-1,field-2] # newColName:new-field # } # \u4e3a VID \u589e\u52a0\u6307\u5b9a\u7684\u524d\u7f00\u3002\u4f8b\u5982 VID \u4e3a 12345\uff0c\u589e\u52a0\u524d\u7f00 tag1 \u540e\u4e3a tag1_12345\u3002\u4e0b\u5212\u7ebf\u65e0\u6cd5\u4fee\u6539\u3002 # prefix:\"tag1\" # \u5bf9 string \u7c7b\u578b\u7684 VID \u8fdb\u884c\u54c8\u5e0c\u5316\u64cd\u4f5c\u3002 # policy:hash } # \u6307\u5b9a\u4e00\u4e2a\u5217\u4f5c\u4e3a rank \u7684\u6e90\uff08\u53ef\u9009\uff09\u3002 #ranking: rank # \u6279\u91cf\u64cd\u4f5c\u7c7b\u578b\uff0c\u5305\u62ec INSERT\u3001UPDATE \u548c DELETE\u3002\u9ed8\u8ba4\u4e3a INSERT\u3002 #writeMode: INSERT # \u6307\u5b9a\u5355\u6279\u6b21\u5199\u5165 NebulaGraph \u7684\u6700\u5927\u8fb9\u6570\u91cf\u3002 batch: 256 # \u6307\u5b9a Spark \u5206\u7247\u6570\u91cf\u3002 partition: 32 } # \u8bbe\u7f6e Edge type serve \u76f8\u5173\u4fe1\u606f\u3002 { name: serve type: { source: json sink: client } path: \"hdfs://192.168.*.*:9000/data/edge_serve.json\" fields: [start_year,end_year] nebula.fields: [start_year, end_year] source: { field: src } target: { field: dst } batch: 256 partition: 32 } ] # \u5982\u679c\u9700\u8981\u6dfb\u52a0\u66f4\u591a\u8fb9\uff0c\u8bf7\u53c2\u8003\u524d\u9762\u7684\u914d\u7f6e\u8fdb\u884c\u6dfb\u52a0\u3002 } \u6b65\u9aa4 4\uff1a\u5411NebulaGraph\u5bfc\u5165\u6570\u636e \u00b6 \u8fd0\u884c\u5982\u4e0b\u547d\u4ee4\u5c06 JSON \u6587\u4ef6\u6570\u636e\u5bfc\u5165\u5230NebulaGraph\u4e2d\u3002\u5173\u4e8e\u53c2\u6570\u7684\u8bf4\u660e\uff0c\u8bf7\u53c2\u89c1 \u5bfc\u5165\u547d\u4ee4\u53c2\u6570 \u3002 ${ SPARK_HOME } /bin/spark-submit --master \"local\" --class com.vesoft.nebula.exchange.Exchange <nebula-exchange-3.6.0.jar_path> -c <json_application.conf_path> Note JAR \u5305\u6709\u4e24\u79cd\u83b7\u53d6\u65b9\u5f0f\uff1a \u81ea\u884c\u7f16\u8bd1 \u6216\u8005\u4ece maven \u4ed3\u5e93\u4e0b\u8f7d\u3002 \u793a\u4f8b\uff1a ${ SPARK_HOME } /bin/spark-submit --master \"local\" --class com.vesoft.nebula.exchange.Exchange /root/nebula-echange/nebula-exchange/target/nebula-exchange-3.6.0.jar -c /root/nebula-exchange/nebula-exchange/target/classes/json_application.conf \u7528\u6237\u53ef\u4ee5\u5728\u8fd4\u56de\u4fe1\u606f\u4e2d\u641c\u7d22 batchSuccess.<tag_name/edge_name> \uff0c\u786e\u8ba4\u6210\u529f\u7684\u6570\u91cf\u3002\u4f8b\u5982 batchSuccess.follow: 300 \u3002 \u6b65\u9aa4 5\uff1a\uff08\u53ef\u9009\uff09\u9a8c\u8bc1\u6570\u636e \u00b6 \u7528\u6237\u53ef\u4ee5\u5728NebulaGraph\u5ba2\u6237\u7aef\uff08\u4f8b\u5982 NebulaGraph Studio\uff09\u4e2d\u6267\u884c\u67e5\u8be2\u8bed\u53e5\uff0c\u786e\u8ba4\u6570\u636e\u662f\u5426\u5df2\u5bfc\u5165\u3002\u4f8b\u5982\uff1a LOOKUP ON player YIELD id(vertex); \u7528\u6237\u4e5f\u53ef\u4ee5\u4f7f\u7528\u547d\u4ee4 SHOW STATS \u67e5\u770b\u7edf\u8ba1\u6570\u636e\u3002 \u6b65\u9aa4 6\uff1a\uff08\u5982\u6709\uff09\u5728NebulaGraph\u4e2d\u91cd\u5efa\u7d22\u5f15 \u00b6 \u5bfc\u5165\u6570\u636e\u540e\uff0c\u7528\u6237\u53ef\u4ee5\u5728NebulaGraph\u4e2d\u91cd\u65b0\u521b\u5efa\u5e76\u91cd\u5efa\u7d22\u5f15\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1 \u7d22\u5f15\u4ecb\u7ecd \u3002","title":"\u5bfc\u5165 JSON \u6587\u4ef6\u6570\u636e"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-json/#json","text":"\u672c\u6587\u4ee5\u4e00\u4e2a\u793a\u4f8b\u8bf4\u660e\u5982\u4f55\u4f7f\u7528 Exchange \u5c06\u5b58\u50a8\u5728 HDFS \u6216\u672c\u5730\u7684 JSON \u6587\u4ef6\u6570\u636e\u5bfc\u5165NebulaGraph\u3002","title":"\u5bfc\u5165 JSON \u6587\u4ef6\u6570\u636e"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-json/#_1","text":"\u672c\u6587\u4ee5 basketballplayer \u6570\u636e\u96c6\u4e3a\u4f8b\u3002\u90e8\u5206\u793a\u4f8b\u6570\u636e\u5982\u4e0b\uff1a player { \"id\" : \"player100\" , \"age\" : 42 , \"name\" : \"Tim Duncan\" } { \"id\" : \"player101\" , \"age\" : 36 , \"name\" : \"Tony Parker\" } { \"id\" : \"player102\" , \"age\" : 33 , \"name\" : \"LaMarcus Aldridge\" } { \"id\" : \"player103\" , \"age\" : 32 , \"name\" : \"Rudy Gay\" } ... team { \"id\" : \"team200\" , \"name\" : \"Warriors\" } { \"id\" : \"team201\" , \"name\" : \"Nuggets\" } ... follow { \"src\" : \"player100\" , \"dst\" : \"player101\" , \"degree\" : 95 } { \"src\" : \"player101\" , \"dst\" : \"player102\" , \"degree\" : 90 } ... serve { \"src\" : \"player100\" , \"dst\" : \"team204\" , \"start_year\" : \"1997\" , \"end_year\" : \"2016\" } { \"src\" : \"player101\" , \"dst\" : \"team204\" , \"start_year\" : \"1999\" , \"end_year\" : \"2018\" } ...","title":"\u6570\u636e\u96c6"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-json/#_2","text":"\u672c\u6587\u793a\u4f8b\u5728 MacOS \u4e0b\u5b8c\u6210\uff0c\u4ee5\u4e0b\u662f\u76f8\u5173\u7684\u73af\u5883\u914d\u7f6e\u4fe1\u606f\uff1a \u786c\u4ef6\u89c4\u683c\uff1a CPU\uff1a1.7 GHz Quad-Core Intel Core i7 \u5185\u5b58\uff1a16 GB Spark\uff1a2.3.0\uff0c\u5355\u673a\u7248 Hadoop\uff1a2.9.2\uff0c\u4f2a\u5206\u5e03\u5f0f\u90e8\u7f72 NebulaGraph\uff1a3.6.0\u3002","title":"\u73af\u5883\u914d\u7f6e"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-json/#_3","text":"\u5f00\u59cb\u5bfc\u5165\u6570\u636e\u4e4b\u524d\uff0c\u7528\u6237\u9700\u8981\u786e\u8ba4\u4ee5\u4e0b\u4fe1\u606f\uff1a \u5df2\u7ecf \u5b89\u88c5\u90e8\u7f72NebulaGraph \u5e76\u83b7\u53d6\u5982\u4e0b\u4fe1\u606f\uff1a Graph \u670d\u52a1\u548c Meta \u670d\u52a1\u7684\u7684 IP \u5730\u5740\u548c\u7aef\u53e3\u3002 \u62e5\u6709NebulaGraph\u5199\u6743\u9650\u7684\u7528\u6237\u540d\u548c\u5bc6\u7801\u3002 \u5df2\u7ecf\u7f16\u8bd1 Exchange\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1 \u7f16\u8bd1 Exchange \u3002\u672c\u793a\u4f8b\u4e2d\u4f7f\u7528 Exchange 3.6.0\u3002 \u5df2\u7ecf\u5b89\u88c5 Spark\u3002 \u4e86\u89e3NebulaGraph\u4e2d\u521b\u5efa Schema \u7684\u4fe1\u606f\uff0c\u5305\u62ec Tag \u548c Edge type \u7684\u540d\u79f0\u3001\u5c5e\u6027\u7b49\u3002 \u5982\u679c\u6587\u4ef6\u5b58\u50a8\u5728 HDFS \u4e0a\uff0c\u9700\u8981\u786e\u8ba4 Hadoop \u670d\u52a1\u8fd0\u884c\u6b63\u5e38\u3002 \u5982\u679c\u6587\u4ef6\u5b58\u50a8\u5728\u672c\u5730\u4e14NebulaGraph\u662f\u96c6\u7fa4\u67b6\u6784\uff0c\u9700\u8981\u5728\u96c6\u7fa4\u6bcf\u53f0\u673a\u5668\u672c\u5730\u76f8\u540c\u76ee\u5f55\u4e0b\u653e\u7f6e\u6587\u4ef6\u3002","title":"\u524d\u63d0\u6761\u4ef6"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-json/#_4","text":"","title":"\u64cd\u4f5c\u6b65\u9aa4"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-json/#1nebulagraph_schema","text":"\u5206\u6790\u6587\u4ef6\u4e2d\u7684\u6570\u636e\uff0c\u6309\u4ee5\u4e0b\u6b65\u9aa4\u5728NebulaGraph\u4e2d\u521b\u5efa Schema\uff1a \u786e\u8ba4 Schema \u8981\u7d20\u3002NebulaGraph\u4e2d\u7684 Schema \u8981\u7d20\u5982\u4e0b\u8868\u6240\u793a\u3002 \u8981\u7d20 \u540d\u79f0 \u5c5e\u6027 Tag player name string, age int Tag team name string Edge Type follow degree int Edge Type serve start_year int, end_year int \u4f7f\u7528 NebulaGraph Console \u521b\u5efa\u4e00\u4e2a\u56fe\u7a7a\u95f4 basketballplayer \uff0c\u5e76\u521b\u5efa\u4e00\u4e2a Schema\uff0c\u5982\u4e0b\u6240\u793a\u3002 ## \u521b\u5efa\u56fe\u7a7a\u95f4 nebula> CREATE SPACE basketballplayer \\ (partition_num = 10, \\ replica_factor = 1, \\ vid_type = FIXED_STRING(30)); ## \u9009\u62e9\u56fe\u7a7a\u95f4 basketballplayer nebula> USE basketballplayer; ## \u521b\u5efa Tag player nebula> CREATE TAG player(name string, age int); ## \u521b\u5efa Tag team nebula> CREATE TAG team(name string); ## \u521b\u5efa Edge type follow nebula> CREATE EDGE follow(degree int); ## \u521b\u5efa Edge type serve nebula> CREATE EDGE serve(start_year int, end_year int); \u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u89c1 \u5feb\u901f\u5f00\u59cb \u3002","title":"\u6b65\u9aa4 1\uff1a\u5728NebulaGraph\u4e2d\u521b\u5efa Schema"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-json/#2_json","text":"\u786e\u8ba4\u4ee5\u4e0b\u4fe1\u606f\uff1a \u5904\u7406 JSON \u6587\u4ef6\u4ee5\u6ee1\u8db3 Schema \u7684\u8981\u6c42\u3002 \u83b7\u53d6 JSON \u6587\u4ef6\u5b58\u50a8\u8def\u5f84\u3002","title":"\u6b65\u9aa4 2\uff1a\u5904\u7406 JSON \u6587\u4ef6"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-json/#3","text":"\u7f16\u8bd1 Exchange \u540e\uff0c\u590d\u5236 target/classes/application.conf \u6587\u4ef6\u8bbe\u7f6e JSON \u6570\u636e\u6e90\u76f8\u5173\u7684\u914d\u7f6e\u3002\u5728\u672c\u793a\u4f8b\u4e2d\uff0c\u590d\u5236\u7684\u6587\u4ef6\u540d\u4e3a json_application.conf \u3002\u5404\u4e2a\u914d\u7f6e\u9879\u7684\u8be6\u7ec6\u8bf4\u660e\u8bf7\u53c2\u89c1 \u914d\u7f6e\u8bf4\u660e \u3002 { # Spark \u76f8\u5173\u914d\u7f6e spark: { app: { name: NebulaGraph Exchange 3.6.0 } driver: { cores: 1 maxResultSize: 1G } executor: { memory:1G } cores: { max: 16 } } # NebulaGraph \u76f8\u5173\u914d\u7f6e nebula: { address:{ # \u6307\u5b9a Graph \u670d\u52a1\u548c\u6240\u6709 Meta \u670d\u52a1\u7684 IP \u5730\u5740\u548c\u7aef\u53e3\u3002 # \u5982\u679c\u6709\u591a\u53f0\u670d\u52a1\u5668\uff0c\u5730\u5740\u4e4b\u95f4\u7528\u82f1\u6587\u9017\u53f7\uff08,\uff09\u5206\u9694\u3002 # \u683c\u5f0f\uff1a\"ip1:port\",\"ip2:port\",\"ip3:port\" graph:[\"127.0.0.1:9669\"] #\u4efb\u610f\u4e00\u4e2a Meta \u670d\u52a1\u7684\u5730\u5740\u3002 #\u5982\u679c\u60a8\u7684 NebulaGraph \u5728\u865a\u62df\u7f51\u7edc\u4e2d\uff0c\u5982k8s\uff0c\u8bf7\u914d\u7f6e Leader Meta\u7684\u5730\u5740\u3002 meta:[\"127.0.0.1:9559\"] } # \u6307\u5b9a\u62e5\u6709 NebulaGraph \u5199\u6743\u9650\u7684\u7528\u6237\u540d\u548c\u5bc6\u7801\u3002 user: root pswd: nebula # \u6307\u5b9a\u56fe\u7a7a\u95f4\u540d\u79f0\u3002 space: basketballplayer connection: { timeout: 3000 retry: 3 } execution: { retry: 3 } error: { max: 32 output: /tmp/errors } rate: { limit: 1024 timeout: 1000 } } # \u5904\u7406\u70b9 tags: [ # \u8bbe\u7f6e Tag player \u76f8\u5173\u4fe1\u606f\u3002 { # \u6307\u5b9a NebulaGraph \u4e2d\u5b9a\u4e49\u7684 Tag \u540d\u79f0\u3002 name: player type: { # \u6307\u5b9a\u6570\u636e\u6e90\uff0c\u4f7f\u7528 JSON\u3002 source: json # \u6307\u5b9a\u5982\u4f55\u5c06\u70b9\u6570\u636e\u5bfc\u5165NebulaGraph\uff1aClient \u6216 SST\u3002 sink: client } # \u6307\u5b9a JSON \u6587\u4ef6\u7684\u8def\u5f84\u3002 # \u5982\u679c\u6587\u4ef6\u5b58\u50a8\u5728 HDFS \u4e0a\uff0c\u7528\u53cc\u5f15\u53f7\u62ec\u8d77\u8def\u5f84\uff0c\u4ee5 hdfs://\u5f00\u5934\uff0c\u4f8b\u5982\"hdfs://ip:port/xx/xx\"\u3002 # \u5982\u679c\u6587\u4ef6\u5b58\u50a8\u5728\u672c\u5730\uff0c\u7528\u53cc\u5f15\u53f7\u62ec\u8d77\u8def\u5f84\uff0c\u4ee5 file://\u5f00\u5934\uff0c\u4f8b\u5982\"file:///tmp/xx.json\"\u3002 path: \"hdfs://192.168.*.*:9000/data/vertex_player.json\" # \u5728 fields \u91cc\u6307\u5b9a JSON \u6587\u4ef6\u4e2d key \u540d\u79f0\uff0c\u5176\u5bf9\u5e94\u7684 value \u4f1a\u4f5c\u4e3a NebulaGraph \u4e2d\u6307\u5b9a\u5c5e\u6027\u7684\u6570\u636e\u6e90\u3002 # \u5982\u679c\u9700\u8981\u6307\u5b9a\u591a\u4e2a\u503c\uff0c\u7528\u82f1\u6587\u9017\u53f7\uff08,\uff09\u9694\u5f00\u3002 fields: [age,name] # \u6307\u5b9a NebulaGraph \u4e2d\u5b9a\u4e49\u7684\u5c5e\u6027\u540d\u79f0\u3002 # fields \u4e0e nebula.fields \u7684\u987a\u5e8f\u5fc5\u987b\u4e00\u4e00\u5bf9\u5e94\u3002 nebula.fields: [age, name] # \u6307\u5b9a\u4e00\u4e2a\u5217\u4f5c\u4e3a VID \u7684\u6e90\u3002 # vertex \u7684\u503c\u5fc5\u987b\u4e0e JSON \u6587\u4ef6\u4e2d\u7684\u5b57\u6bb5\u4fdd\u6301\u4e00\u81f4\u3002 # \u76ee\u524d\uff0cNebulaGraph 3.6.0\u4ec5\u652f\u6301\u5b57\u7b26\u4e32\u6216\u6574\u6570\u7c7b\u578b\u7684 VID\u3002 vertex: { field:id # udf:{ # separator:\"_\" # oldColNames:[field-0,field-1,field-2] # newColName:new-field # } # \u4e3a VID \u589e\u52a0\u6307\u5b9a\u7684\u524d\u7f00\u3002\u4f8b\u5982 VID \u4e3a 12345\uff0c\u589e\u52a0\u524d\u7f00 tag1 \u540e\u4e3a tag1_12345\u3002\u4e0b\u5212\u7ebf\u65e0\u6cd5\u4fee\u6539\u3002 # prefix:\"tag1\" # \u5bf9 string \u7c7b\u578b\u7684 VID \u8fdb\u884c\u54c8\u5e0c\u5316\u64cd\u4f5c\u3002 # policy:hash } # \u6307\u5b9a\u5355\u6279\u6b21\u5199\u5165 NebulaGraph \u7684\u6700\u5927\u70b9\u6570\u91cf\u3002 batch: 256 # \u6307\u5b9a Spark \u5206\u7247\u6570\u91cf\u3002 partition: 32 } # \u8bbe\u7f6e Tag team \u76f8\u5173\u4fe1\u606f\u3002 { name: team type: { source: json sink: client } path: \"hdfs://192.168.*.*:9000/data/vertex_team.json\" fields: [name] nebula.fields: [name] vertex: { field:id } batch: 256 partition: 32 } # \u5982\u679c\u9700\u8981\u6dfb\u52a0\u66f4\u591a\u70b9\uff0c\u8bf7\u53c2\u8003\u524d\u9762\u7684\u914d\u7f6e\u8fdb\u884c\u6dfb\u52a0\u3002 ] # \u5904\u7406\u8fb9 edges: [ # \u8bbe\u7f6e Edge type follow \u76f8\u5173\u4fe1\u606f\u3002 { # \u6307\u5b9a NebulaGraph \u4e2d\u5b9a\u4e49\u7684 Edge type \u540d\u79f0\u3002 name: follow type: { # \u6307\u5b9a\u6570\u636e\u6e90\uff0c\u4f7f\u7528 JSON\u3002 source: json # \u6307\u5b9a\u5982\u4f55\u5c06\u70b9\u6570\u636e\u5bfc\u5165NebulaGraph\uff1aClient \u6216 SST\u3002 sink: client } # \u6307\u5b9a JSON \u6587\u4ef6\u7684\u8def\u5f84\u3002 # \u5982\u679c\u6587\u4ef6\u5b58\u50a8\u5728 HDFS \u4e0a\uff0c\u7528\u53cc\u5f15\u53f7\u62ec\u8d77\u8def\u5f84\uff0c\u4ee5 hdfs://\u5f00\u5934\uff0c\u4f8b\u5982\"hdfs://ip:port/xx/xx\"\u3002 # \u5982\u679c\u6587\u4ef6\u5b58\u50a8\u5728\u672c\u5730\uff0c\u7528\u53cc\u5f15\u53f7\u62ec\u8d77\u8def\u5f84\uff0c\u4ee5 file://\u5f00\u5934\uff0c\u4f8b\u5982\"file:///tmp/xx.json\"\u3002 path: \"hdfs://192.168.*.*:9000/data/edge_follow.json\" # \u5728 fields \u91cc\u6307\u5b9a JSON \u6587\u4ef6\u4e2d key \u540d\u79f0\uff0c\u5176\u5bf9\u5e94\u7684 value \u4f1a\u4f5c\u4e3a NebulaGraph \u4e2d\u6307\u5b9a\u5c5e\u6027\u7684\u6570\u636e\u6e90\u3002 # \u5982\u679c\u9700\u8981\u6307\u5b9a\u591a\u4e2a\u503c\uff0c\u7528\u82f1\u6587\u9017\u53f7\uff08,\uff09\u9694\u5f00\u3002 fields: [degree] # \u6307\u5b9a NebulaGraph \u4e2d\u5b9a\u4e49\u7684\u5c5e\u6027\u540d\u79f0\u3002 # fields \u4e0e nebula.fields \u7684\u987a\u5e8f\u5fc5\u987b\u4e00\u4e00\u5bf9\u5e94\u3002 nebula.fields: [degree] # \u6307\u5b9a\u4e00\u4e2a\u5217\u4f5c\u4e3a\u8d77\u59cb\u70b9\u548c\u76ee\u7684\u70b9\u7684\u6e90\u3002 # vertex \u7684\u503c\u5fc5\u987b\u4e0e JSON \u6587\u4ef6\u4e2d\u7684\u5b57\u6bb5\u4fdd\u6301\u4e00\u81f4\u3002 # \u76ee\u524d\uff0cNebulaGraph 3.6.0\u4ec5\u652f\u6301\u5b57\u7b26\u4e32\u6216\u6574\u6570\u7c7b\u578b\u7684 VID\u3002 source: { field: src # udf:{ # separator:\"_\" # oldColNames:[field-0,field-1,field-2] # newColName:new-field # } # \u4e3a VID \u589e\u52a0\u6307\u5b9a\u7684\u524d\u7f00\u3002\u4f8b\u5982 VID \u4e3a 12345\uff0c\u589e\u52a0\u524d\u7f00 tag1 \u540e\u4e3a tag1_12345\u3002\u4e0b\u5212\u7ebf\u65e0\u6cd5\u4fee\u6539\u3002 # prefix:\"tag1\" # \u5bf9 string \u7c7b\u578b\u7684 VID \u8fdb\u884c\u54c8\u5e0c\u5316\u64cd\u4f5c\u3002 # policy:hash } target: { field: dst # udf:{ # separator:\"_\" # oldColNames:[field-0,field-1,field-2] # newColName:new-field # } # \u4e3a VID \u589e\u52a0\u6307\u5b9a\u7684\u524d\u7f00\u3002\u4f8b\u5982 VID \u4e3a 12345\uff0c\u589e\u52a0\u524d\u7f00 tag1 \u540e\u4e3a tag1_12345\u3002\u4e0b\u5212\u7ebf\u65e0\u6cd5\u4fee\u6539\u3002 # prefix:\"tag1\" # \u5bf9 string \u7c7b\u578b\u7684 VID \u8fdb\u884c\u54c8\u5e0c\u5316\u64cd\u4f5c\u3002 # policy:hash } # \u6307\u5b9a\u4e00\u4e2a\u5217\u4f5c\u4e3a rank \u7684\u6e90\uff08\u53ef\u9009\uff09\u3002 #ranking: rank # \u6279\u91cf\u64cd\u4f5c\u7c7b\u578b\uff0c\u5305\u62ec INSERT\u3001UPDATE \u548c DELETE\u3002\u9ed8\u8ba4\u4e3a INSERT\u3002 #writeMode: INSERT # \u6307\u5b9a\u5355\u6279\u6b21\u5199\u5165 NebulaGraph \u7684\u6700\u5927\u8fb9\u6570\u91cf\u3002 batch: 256 # \u6307\u5b9a Spark \u5206\u7247\u6570\u91cf\u3002 partition: 32 } # \u8bbe\u7f6e Edge type serve \u76f8\u5173\u4fe1\u606f\u3002 { name: serve type: { source: json sink: client } path: \"hdfs://192.168.*.*:9000/data/edge_serve.json\" fields: [start_year,end_year] nebula.fields: [start_year, end_year] source: { field: src } target: { field: dst } batch: 256 partition: 32 } ] # \u5982\u679c\u9700\u8981\u6dfb\u52a0\u66f4\u591a\u8fb9\uff0c\u8bf7\u53c2\u8003\u524d\u9762\u7684\u914d\u7f6e\u8fdb\u884c\u6dfb\u52a0\u3002 }","title":"\u6b65\u9aa4 3. \u4fee\u6539\u914d\u7f6e\u6587\u4ef6"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-json/#4nebulagraph","text":"\u8fd0\u884c\u5982\u4e0b\u547d\u4ee4\u5c06 JSON \u6587\u4ef6\u6570\u636e\u5bfc\u5165\u5230NebulaGraph\u4e2d\u3002\u5173\u4e8e\u53c2\u6570\u7684\u8bf4\u660e\uff0c\u8bf7\u53c2\u89c1 \u5bfc\u5165\u547d\u4ee4\u53c2\u6570 \u3002 ${ SPARK_HOME } /bin/spark-submit --master \"local\" --class com.vesoft.nebula.exchange.Exchange <nebula-exchange-3.6.0.jar_path> -c <json_application.conf_path> Note JAR \u5305\u6709\u4e24\u79cd\u83b7\u53d6\u65b9\u5f0f\uff1a \u81ea\u884c\u7f16\u8bd1 \u6216\u8005\u4ece maven \u4ed3\u5e93\u4e0b\u8f7d\u3002 \u793a\u4f8b\uff1a ${ SPARK_HOME } /bin/spark-submit --master \"local\" --class com.vesoft.nebula.exchange.Exchange /root/nebula-echange/nebula-exchange/target/nebula-exchange-3.6.0.jar -c /root/nebula-exchange/nebula-exchange/target/classes/json_application.conf \u7528\u6237\u53ef\u4ee5\u5728\u8fd4\u56de\u4fe1\u606f\u4e2d\u641c\u7d22 batchSuccess.<tag_name/edge_name> \uff0c\u786e\u8ba4\u6210\u529f\u7684\u6570\u91cf\u3002\u4f8b\u5982 batchSuccess.follow: 300 \u3002","title":"\u6b65\u9aa4 4\uff1a\u5411NebulaGraph\u5bfc\u5165\u6570\u636e"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-json/#5","text":"\u7528\u6237\u53ef\u4ee5\u5728NebulaGraph\u5ba2\u6237\u7aef\uff08\u4f8b\u5982 NebulaGraph Studio\uff09\u4e2d\u6267\u884c\u67e5\u8be2\u8bed\u53e5\uff0c\u786e\u8ba4\u6570\u636e\u662f\u5426\u5df2\u5bfc\u5165\u3002\u4f8b\u5982\uff1a LOOKUP ON player YIELD id(vertex); \u7528\u6237\u4e5f\u53ef\u4ee5\u4f7f\u7528\u547d\u4ee4 SHOW STATS \u67e5\u770b\u7edf\u8ba1\u6570\u636e\u3002","title":"\u6b65\u9aa4 5\uff1a\uff08\u53ef\u9009\uff09\u9a8c\u8bc1\u6570\u636e"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-json/#6nebulagraph","text":"\u5bfc\u5165\u6570\u636e\u540e\uff0c\u7528\u6237\u53ef\u4ee5\u5728NebulaGraph\u4e2d\u91cd\u65b0\u521b\u5efa\u5e76\u91cd\u5efa\u7d22\u5f15\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1 \u7d22\u5f15\u4ecb\u7ecd \u3002","title":"\u6b65\u9aa4 6\uff1a\uff08\u5982\u6709\uff09\u5728NebulaGraph\u4e2d\u91cd\u5efa\u7d22\u5f15"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-kafka/","text":"\u5bfc\u5165 Kafka \u6570\u636e \u00b6 \u672c\u6587\u7b80\u5355\u8bf4\u660e\u5982\u4f55\u4f7f\u7528 Exchange \u5c06\u5b58\u50a8\u5728 Kafka \u4e0a\u7684\u6570\u636e\u5bfc\u5165NebulaGraph\u3002 Compatibility \u5bfc\u5165 Kafka \u6570\u636e\u65f6\u8bf7\u4f7f\u7528 Exchange 3.5.0/3.3.0/3.0.0 \u7248\u672c\u30023.4.0 \u7248\u672c\u589e\u52a0\u4e86\u5bf9\u5bfc\u5165\u6570\u636e\u7684\u7f13\u5b58\uff0c\u4e0d\u652f\u6301\u6d41\u5f0f\u6570\u636e\u5bfc\u5165\u3002 \u73af\u5883\u914d\u7f6e \u00b6 \u672c\u6587\u793a\u4f8b\u5728 MacOS \u4e0b\u5b8c\u6210\uff0c\u4ee5\u4e0b\u662f\u76f8\u5173\u7684\u73af\u5883\u914d\u7f6e\u4fe1\u606f\uff1a \u786c\u4ef6\u89c4\u683c\uff1a CPU\uff1a1.7 GHz Quad-Core Intel Core i7 \u5185\u5b58\uff1a16 GB Spark\uff1a2.4.7\uff0c\u5355\u673a\u7248 NebulaGraph\uff1a3.6.0\u3002 \u524d\u63d0\u6761\u4ef6 \u00b6 \u5f00\u59cb\u5bfc\u5165\u6570\u636e\u4e4b\u524d\uff0c\u7528\u6237\u9700\u8981\u786e\u8ba4\u4ee5\u4e0b\u4fe1\u606f\uff1a \u5df2\u7ecf \u5b89\u88c5\u90e8\u7f72NebulaGraph \u5e76\u83b7\u53d6\u5982\u4e0b\u4fe1\u606f\uff1a Graph \u670d\u52a1\u548c Meta \u670d\u52a1\u7684\u7684 IP \u5730\u5740\u548c\u7aef\u53e3\u3002 \u62e5\u6709NebulaGraph\u5199\u6743\u9650\u7684\u7528\u6237\u540d\u548c\u5bc6\u7801\u3002 \u5df2\u7ecf\u7f16\u8bd1 Exchange\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1 \u7f16\u8bd1 Exchange \u3002\u672c\u793a\u4f8b\u4e2d\u4f7f\u7528 Exchange 3.6.0\u3002 \u5df2\u7ecf\u5b89\u88c5 Spark\u3002 \u4ee5\u4e0b JAR \u5305\u5df2\u7ecf\u4e0b\u8f7d\u5e76\u653e\u7f6e\u5728 Spark \u7684 SPARK_HOME/jars \u76ee\u5f55\u4e0b\uff1a spark-streaming-kafka_xxx.jar spark-sql-kafka-0-10_xxx.jar kafka-clients-xxx.jar \u4e86\u89e3NebulaGraph\u4e2d\u521b\u5efa Schema \u7684\u4fe1\u606f\uff0c\u5305\u62ec Tag \u548c Edge type \u7684\u540d\u79f0\u3001\u5c5e\u6027\u7b49\u3002 \u5df2\u7ecf\u5b89\u88c5\u5e76\u5f00\u542f Kafka \u670d\u52a1\u3002 \u6ce8\u610f\u4e8b\u9879 \u00b6 \u5bfc\u5165 Kafka \u6570\u636e\u65f6\u53ea\u652f\u6301 Client \u6a21\u5f0f\uff0c\u5373\u53c2\u6570 tags.type.sink \u548c edges.type.sink \u7684\u503c\u4e3a client \u3002 \u5bfc\u5165 Kafka \u6570\u636e\u65f6\u8bf7\u52ff\u4f7f\u7528 Exchange 3.4.0 \u7248\u672c\uff0c\u8be5\u7248\u672c\u589e\u52a0\u4e86\u5bf9\u5bfc\u5165\u6570\u636e\u7684\u7f13\u5b58\uff0c\u4e0d\u652f\u6301\u6d41\u5f0f\u6570\u636e\u5bfc\u5165\u3002\u8bf7\u4f7f\u7528 Exchange 3.0.0\u30013.3.0\u30013.5.0 \u7248\u672c\u3002 \u64cd\u4f5c\u6b65\u9aa4 \u00b6 \u6b65\u9aa4 1\uff1a\u5728NebulaGraph\u4e2d\u521b\u5efa Schema \u00b6 \u5206\u6790\u6570\u636e\uff0c\u6309\u4ee5\u4e0b\u6b65\u9aa4\u5728NebulaGraph\u4e2d\u521b\u5efa Schema\uff1a \u786e\u8ba4 Schema \u8981\u7d20\u3002NebulaGraph\u4e2d\u7684 Schema \u8981\u7d20\u5982\u4e0b\u8868\u6240\u793a\u3002 \u8981\u7d20 \u540d\u79f0 \u5c5e\u6027 Tag player name string, age int Tag team name string Edge Type follow degree int Edge Type serve start_year int, end_year int \u5728NebulaGraph\u4e2d\u521b\u5efa\u4e00\u4e2a\u56fe\u7a7a\u95f4 basketballplayer \uff0c\u5e76\u521b\u5efa\u4e00\u4e2a Schema\uff0c\u5982\u4e0b\u6240\u793a\u3002 ## \u521b\u5efa\u56fe\u7a7a\u95f4 nebula> CREATE SPACE basketballplayer \\ (partition_num = 10, \\ replica_factor = 1, \\ vid_type = FIXED_STRING(30)); ## \u9009\u62e9\u56fe\u7a7a\u95f4 basketballplayer nebula> USE basketballplayer; ## \u521b\u5efa Tag player nebula> CREATE TAG player(name string, age int); ## \u521b\u5efa Tag team nebula> CREATE TAG team(name string); ## \u521b\u5efa Edge type follow nebula> CREATE EDGE follow(degree int); ## \u521b\u5efa Edge type serve nebula> CREATE EDGE serve(start_year int, end_year int); \u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u89c1 \u5feb\u901f\u5f00\u59cb \u3002 \u6b65\u9aa4 2\uff1a\u4fee\u6539\u914d\u7f6e\u6587\u4ef6 \u00b6 \u7f16\u8bd1 Exchange \u540e\uff0c\u590d\u5236 target/classes/application.conf \u6587\u4ef6\u8bbe\u7f6e Kafka \u6570\u636e\u6e90\u76f8\u5173\u7684\u914d\u7f6e\u3002\u5728\u672c\u793a\u4f8b\u4e2d\uff0c\u590d\u5236\u7684\u6587\u4ef6\u540d\u4e3a kafka_application.conf \u3002\u5404\u4e2a\u914d\u7f6e\u9879\u7684\u8be6\u7ec6\u8bf4\u660e\u8bf7\u53c2\u89c1 \u914d\u7f6e\u8bf4\u660e \u3002 Note \u5bfc\u5165 Kafka \u6570\u636e\u65f6\uff0c\u4e00\u4e2a\u914d\u7f6e\u6587\u4ef6\u53ea\u80fd\u5904\u7406\u4e00\u4e2a Tag \u6216 Edge type\u3002\u5982\u679c\u6709\u591a\u4e2a Tag \u6216 Edge type\uff0c\u9700\u8981\u521b\u5efa\u591a\u4e2a\u914d\u7f6e\u6587\u4ef6\u3002 { # Spark \u76f8\u5173\u914d\u7f6e spark: { app: { name: NebulaGraph Exchange 3.6.0 } driver: { cores: 1 maxResultSize: 1G } cores: { max: 16 } } # NebulaGraph \u76f8\u5173\u914d\u7f6e nebula: { address:{ # \u4ee5\u4e0b\u4e3a NebulaGraph \u7684 Graph \u670d\u52a1\u548c Meta \u670d\u52a1\u6240\u5728\u673a\u5668\u7684 IP \u5730\u5740\u53ca\u7aef\u53e3\u3002 # \u5982\u679c\u6709\u591a\u4e2a\u5730\u5740\uff0c\u683c\u5f0f\u4e3a \"ip1:port\",\"ip2:port\",\"ip3:port\"\u3002 # \u4e0d\u540c\u5730\u5740\u4e4b\u95f4\u4ee5\u82f1\u6587\u9017\u53f7 (,) \u9694\u5f00\u3002 graph:[\"127.0.0.1:9669\"] #\u4efb\u610f\u4e00\u4e2a Meta \u670d\u52a1\u7684\u5730\u5740\u3002 #\u5982\u679c\u60a8\u7684 NebulaGraph \u5728\u865a\u62df\u7f51\u7edc\u4e2d\uff0c\u5982k8s\uff0c\u8bf7\u914d\u7f6e Leader Meta\u7684\u5730\u5740\u3002 meta:[\"127.0.0.1:9559\"] } # \u586b\u5199\u7684\u8d26\u53f7\u5fc5\u987b\u62e5\u6709 NebulaGraph \u76f8\u5e94\u56fe\u7a7a\u95f4\u7684\u5199\u6570\u636e\u6743\u9650\u3002 user: root pswd: nebula # \u586b\u5199 NebulaGraph \u4e2d\u9700\u8981\u5199\u5165\u6570\u636e\u7684\u56fe\u7a7a\u95f4\u540d\u79f0\u3002 space: basketballplayer connection: { timeout: 3000 retry: 3 } execution: { retry: 3 } error: { max: 32 output: /tmp/errors } rate: { limit: 1024 timeout: 1000 } } # \u5904\u7406\u70b9 tags: [ # \u8bbe\u7f6e Tag player \u76f8\u5173\u4fe1\u606f\u3002 { # NebulaGraph \u4e2d\u5bf9\u5e94\u7684 Tag \u540d\u79f0\u3002 name: player type: { # \u6307\u5b9a\u6570\u636e\u6e90\u6587\u4ef6\u683c\u5f0f\uff0c\u8bbe\u7f6e\u4e3a Kafka\u3002 source: kafka # \u6307\u5b9a\u5982\u4f55\u5c06\u6570\u636e\u5bfc\u5165NebulaGraph\u3002\u53ea\u652f\u6301 Client\u3002 sink: client } # Kafka \u670d\u52a1\u5668\u5730\u5740\u3002 service: \"127.0.0.1:9092\" # \u6d88\u606f\u7c7b\u522b\u3002 topic: \"topic_name1\" # \u5728 fields \u91cc\u6307\u5b9a Kafka value \u4e2d\u7684\u5b57\u6bb5\u540d\u79f0\uff0c\u591a\u4e2a\u5b57\u6bb5\u7528\u82f1\u6587\u9017\u53f7\uff08,\uff09\u9694\u5f00\u3002Spark Structured Streaming \u8bfb\u53d6 Kafka \u6570\u636e\u540e\u4f1a\u5c06\u5176\u4ee5 JSON \u683c\u5f0f\u5b58\u50a8\u4e8e value \u5b57\u6bb5\u4e2d\uff0c\u800c\u8fd9\u91cc\u7684 fields \u8981\u914d\u7f6e JSON \u7684 key \u540d\u3002\u793a\u4f8b\u5982\u4e0b\uff1a fields: [personName, personAge] # \u8bbe\u7f6e\u4e0e fields \u4e2d\u7684 key \u5bf9\u5e94\u7684 NebulaGraph \u5c5e\u6027\u540d\uff0ckey \u7684 value \u5c06\u4fdd\u5b58\u4e3a\u76f8\u5e94\u7684\u5c5e\u6027\u503c\u3002\u4e0b\u65b9\u8bbe\u7f6e\u4f1a\u5c06 personName \u7684 value \u4fdd\u5b58\u5230 NebulaGraph \u4e2d\u7684 name \u5c5e\u6027\uff0cpersonAge \u7684 value \u5219\u4fdd\u5b58\u5230 age \u5c5e\u6027\u3002 nebula.fields: [name, age] # \u6307\u5b9a\u8868\u4e2d\u67d0\u4e00\u5217\u6570\u636e\u4e3a NebulaGraph \u4e2d\u70b9 VID \u7684\u6765\u6e90\u3002 # \u8fd9\u91cc\u7684\u503c key \u548c\u4e0a\u9762\u7684 key \u91cd\u590d\uff0c\u8868\u793a key \u65e2\u4f5c\u4e3a VID\uff0c\u4e5f\u4f5c\u4e3a\u5c5e\u6027 name\u3002 vertex:{ field:personId # udf:{ # separator:\"_\" # oldColNames:[field-0,field-1,field-2] # newColName:new-field # } # \u4e3a VID \u589e\u52a0\u6307\u5b9a\u7684\u524d\u7f00\u3002\u4f8b\u5982 VID \u4e3a 12345\uff0c\u589e\u52a0\u524d\u7f00 tag1 \u540e\u4e3a tag1_12345\u3002\u4e0b\u5212\u7ebf\u65e0\u6cd5\u4fee\u6539\u3002 # prefix:\"tag1\" # \u5bf9 string \u7c7b\u578b\u7684 VID \u8fdb\u884c\u54c8\u5e0c\u5316\u64cd\u4f5c\u3002 # policy:hash } # \u6279\u91cf\u64cd\u4f5c\u7c7b\u578b\uff0c\u5305\u62ec INSERT\u3001UPDATE \u548c DELETE\u3002\u9ed8\u8ba4\u4e3a INSERT\u3002 #writeMode: INSERT # \u5355\u6279\u6b21\u5199\u5165 NebulaGraph \u7684\u6570\u636e\u6761\u6570\u3002 batch: 10 # Spark \u5206\u533a\u6570\u91cf partition: 10 # \u8bfb\u53d6\u6d88\u606f\u7684\u95f4\u9694\u3002\u5355\u4f4d\uff1a\u79d2\u3002 interval.seconds: 10 # \u6d88\u8d39\u8d77\u70b9\uff0c\u9ed8\u8ba4\u503c latest\u3002 \u53ef\u9009 latest\u3001earliest startingOffsets: latest # \u6d41\u63a7\uff0c\u5bf9\u6bcf\u4e2a\u89e6\u53d1\u533a\u95f4\u5904\u7406\u7684\u6700\u5927\u504f\u79fb\u91cf\u7684\u901f\u7387\u9650\u5236\uff0c\u53ef\u4e0d\u914d\u7f6e\u3002 # maxOffsetsPerTrigger:10000 } ] # \u5904\u7406\u8fb9\u6570\u636e #edges: [ # # \u8bbe\u7f6e Edge type follow \u76f8\u5173\u4fe1\u606f # { # # NebulaGraph \u4e2d\u5bf9\u5e94\u7684 Edge type \u540d\u79f0\u3002 # name: follow # type: { # # \u6307\u5b9a\u6570\u636e\u6e90\u6587\u4ef6\u683c\u5f0f\uff0c\u8bbe\u7f6e\u4e3a Kafka\u3002 # source: kafka # # \u6307\u5b9a\u8fb9\u6570\u636e\u5bfc\u5165 NebulaGraph \u7684\u65b9\u5f0f\uff0c # # \u6307\u5b9a\u5982\u4f55\u5c06\u6570\u636e\u5bfc\u5165NebulaGraph\u3002\u53ea\u652f\u6301 Client\u3002 # sink: client # } # # Kafka \u670d\u52a1\u5668\u5730\u5740\u3002 # service: \"127.0.0.1:9092\" # # \u6d88\u606f\u7c7b\u522b\u3002 # topic: \"topic_name3\" # # \u5728 fields \u91cc\u6307\u5b9a Kafka value \u4e2d\u7684\u5b57\u6bb5\u540d\u79f0\uff0c\u591a\u4e2a\u5b57\u6bb5\u7528\u82f1\u6587\u9017\u53f7\uff08,\uff09\u9694\u5f00\u3002Spark Structured Streaming \u8bfb\u53d6 Kafka \u6570\u636e\u540e\u4f1a\u5c06\u5176\u4ee5 JSON \u683c\u5f0f\u5b58\u50a8\u4e8e value \u5b57\u6bb5\u4e2d\uff0c\u800c\u8fd9\u91cc\u7684 fields \u8981\u914d\u7f6e JSON \u7684 key \u540d\u3002\u793a\u4f8b\u5982\u4e0b\uff1a # fields: [degree] # # \u8bbe\u7f6e\u4e0e fields \u4e2d\u7684 key \u5bf9\u5e94\u7684 NebulaGraph \u5c5e\u6027\u540d\uff0ckey \u7684 value \u5c06\u4fdd\u5b58\u4e3a\u76f8\u5e94\u7684\u5c5e\u6027\u503c\u3002\u4e0b\u65b9\u8bbe\u7f6e\u4f1a\u5c06 degree \u7684 value \u4fdd\u5b58\u5230 NebulaGraph \u4e2d\u7684 degree \u5c5e\u6027\u3002 # nebula.fields: [degree] # # \u5728 source \u91cc\uff0c\u5c06 topic \u4e2d\u67d0\u4e00\u5217\u4f5c\u4e3a\u8fb9\u7684\u8d77\u59cb\u70b9\u6570\u636e\u6e90\u3002 # # \u5728 target \u91cc\uff0c\u5c06 topic \u4e2d\u67d0\u4e00\u5217\u4f5c\u4e3a\u8fb9\u7684\u76ee\u7684\u70b9\u6570\u636e\u6e90\u3002 # source:{ # field:srcPersonId # # udf:{ # # separator:\"_\" # # oldColNames:[field-0,field-1,field-2] # # newColName:new-field # # } # # \u4e3a VID \u589e\u52a0\u6307\u5b9a\u7684\u524d\u7f00\u3002\u4f8b\u5982 VID \u4e3a 12345\uff0c\u589e\u52a0\u524d\u7f00 tag1 \u540e\u4e3a tag1_12345\u3002\u4e0b\u5212\u7ebf\u65e0\u6cd5\u4fee\u6539\u3002 # # prefix:\"tag1\" # # \u5bf9 string \u7c7b\u578b\u7684 VID \u8fdb\u884c\u54c8\u5e0c\u5316\u64cd\u4f5c\u3002 # # policy:hash # } # target:{ # field:dstPersonId # # udf:{ # # separator:\"_\" # # oldColNames:[field-0,field-1,field-2] # # newColName:new-field # # } # # \u4e3a VID \u589e\u52a0\u6307\u5b9a\u7684\u524d\u7f00\u3002\u4f8b\u5982 VID \u4e3a 12345\uff0c\u589e\u52a0\u524d\u7f00 tag1 \u540e\u4e3a tag1_12345\u3002\u4e0b\u5212\u7ebf\u65e0\u6cd5\u4fee\u6539\u3002 # # prefix:\"tag1\" # # \u5bf9 string \u7c7b\u578b\u7684 VID \u8fdb\u884c\u54c8\u5e0c\u5316\u64cd\u4f5c\u3002 # # policy:hash # } # # \u6307\u5b9a\u4e00\u4e2a\u5217\u4f5c\u4e3a rank \u7684\u6e90\uff08\u53ef\u9009\uff09\u3002 # #ranking: rank # # \u6279\u91cf\u64cd\u4f5c\u7c7b\u578b\uff0c\u5305\u62ec INSERT\u3001UPDATE \u548c DELETE\u3002\u9ed8\u8ba4\u4e3a INSERT\u3002 # #writeMode: INSERT # # \u5355\u6279\u6b21\u5199\u5165 NebulaGraph \u7684\u6570\u636e\u6761\u6570\u3002 # batch: 10 # # Spark \u5206\u533a\u6570\u91cf # partition: 10 # # \u8bfb\u53d6\u6d88\u606f\u7684\u95f4\u9694\u3002\u5355\u4f4d\uff1a\u79d2\u3002 # interval.seconds: 10 # # \u6d88\u8d39\u8d77\u70b9\uff0c\u9ed8\u8ba4\u503c latest\u3002 \u53ef\u9009 latest\u3001earliest # startingOffsets: latest # # \u6d41\u63a7\uff0c\u5bf9\u6bcf\u4e2a\u89e6\u53d1\u533a\u95f4\u5904\u7406\u7684\u6700\u5927\u504f\u79fb\u91cf\u7684\u901f\u7387\u9650\u5236\uff0c\u53ef\u4e0d\u914d\u7f6e\u3002 # # maxOffsetsPerTrigger:10000 # } #] } \u6b65\u9aa4 3\uff1a\u5411NebulaGraph\u5bfc\u5165\u6570\u636e \u00b6 \u8fd0\u884c\u5982\u4e0b\u547d\u4ee4\u5c06 Kafka \u6570\u636e\u5bfc\u5165\u5230NebulaGraph\u4e2d\u3002\u5173\u4e8e\u53c2\u6570\u7684\u8bf4\u660e\uff0c\u8bf7\u53c2\u89c1 \u5bfc\u5165\u547d\u4ee4\u53c2\u6570 \u3002 ${ SPARK_HOME } /bin/spark-submit --master \"local\" --class com.vesoft.nebula.exchange.Exchange <nebula-exchange-3.6.0.jar_path> -c <kafka_application.conf_path> Note JAR \u5305\u6709\u4e24\u79cd\u83b7\u53d6\u65b9\u5f0f\uff1a \u81ea\u884c\u7f16\u8bd1 \u6216\u8005\u4ece maven \u4ed3\u5e93\u4e0b\u8f7d\u3002 \u793a\u4f8b\uff1a ${ SPARK_HOME } /bin/spark-submit --master \"local\" --class com.vesoft.nebula.exchange.Exchange /root/nebula-exchange/nebula-exchange/target/nebula-exchange-3.6.0.jar -c /root/nebula-exchange/nebula-exchange/target/classes/kafka_application.conf \u7528\u6237\u53ef\u4ee5\u5728\u8fd4\u56de\u4fe1\u606f\u4e2d\u641c\u7d22 batchSuccess.<tag_name/edge_name> \uff0c\u786e\u8ba4\u6210\u529f\u7684\u6570\u91cf\u3002\u4f8b\u5982 batchSuccess.follow: 300 \u3002 \u6b65\u9aa4 4\uff1a\uff08\u53ef\u9009\uff09\u9a8c\u8bc1\u6570\u636e \u00b6 \u7528\u6237\u53ef\u4ee5\u5728NebulaGraph\u5ba2\u6237\u7aef\uff08\u4f8b\u5982 NebulaGraph Studio\uff09\u4e2d\u6267\u884c\u67e5\u8be2\u8bed\u53e5\uff0c\u786e\u8ba4\u6570\u636e\u662f\u5426\u5df2\u5bfc\u5165\u3002\u4f8b\u5982\uff1a LOOKUP ON player YIELD id(vertex); \u7528\u6237\u4e5f\u53ef\u4ee5\u4f7f\u7528\u547d\u4ee4 SHOW STATS \u67e5\u770b\u7edf\u8ba1\u6570\u636e\u3002 \u6b65\u9aa4 5\uff1a\uff08\u5982\u6709\uff09\u5728NebulaGraph\u4e2d\u91cd\u5efa\u7d22\u5f15 \u00b6 \u5bfc\u5165\u6570\u636e\u540e\uff0c\u7528\u6237\u53ef\u4ee5\u5728NebulaGraph\u4e2d\u91cd\u65b0\u521b\u5efa\u5e76\u91cd\u5efa\u7d22\u5f15\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1 \u7d22\u5f15\u4ecb\u7ecd \u3002","title":"\u5bfc\u5165 Kafka \u6570\u636e"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-kafka/#kafka","text":"\u672c\u6587\u7b80\u5355\u8bf4\u660e\u5982\u4f55\u4f7f\u7528 Exchange \u5c06\u5b58\u50a8\u5728 Kafka \u4e0a\u7684\u6570\u636e\u5bfc\u5165NebulaGraph\u3002 Compatibility \u5bfc\u5165 Kafka \u6570\u636e\u65f6\u8bf7\u4f7f\u7528 Exchange 3.5.0/3.3.0/3.0.0 \u7248\u672c\u30023.4.0 \u7248\u672c\u589e\u52a0\u4e86\u5bf9\u5bfc\u5165\u6570\u636e\u7684\u7f13\u5b58\uff0c\u4e0d\u652f\u6301\u6d41\u5f0f\u6570\u636e\u5bfc\u5165\u3002","title":"\u5bfc\u5165 Kafka \u6570\u636e"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-kafka/#_1","text":"\u672c\u6587\u793a\u4f8b\u5728 MacOS \u4e0b\u5b8c\u6210\uff0c\u4ee5\u4e0b\u662f\u76f8\u5173\u7684\u73af\u5883\u914d\u7f6e\u4fe1\u606f\uff1a \u786c\u4ef6\u89c4\u683c\uff1a CPU\uff1a1.7 GHz Quad-Core Intel Core i7 \u5185\u5b58\uff1a16 GB Spark\uff1a2.4.7\uff0c\u5355\u673a\u7248 NebulaGraph\uff1a3.6.0\u3002","title":"\u73af\u5883\u914d\u7f6e"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-kafka/#_2","text":"\u5f00\u59cb\u5bfc\u5165\u6570\u636e\u4e4b\u524d\uff0c\u7528\u6237\u9700\u8981\u786e\u8ba4\u4ee5\u4e0b\u4fe1\u606f\uff1a \u5df2\u7ecf \u5b89\u88c5\u90e8\u7f72NebulaGraph \u5e76\u83b7\u53d6\u5982\u4e0b\u4fe1\u606f\uff1a Graph \u670d\u52a1\u548c Meta \u670d\u52a1\u7684\u7684 IP \u5730\u5740\u548c\u7aef\u53e3\u3002 \u62e5\u6709NebulaGraph\u5199\u6743\u9650\u7684\u7528\u6237\u540d\u548c\u5bc6\u7801\u3002 \u5df2\u7ecf\u7f16\u8bd1 Exchange\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1 \u7f16\u8bd1 Exchange \u3002\u672c\u793a\u4f8b\u4e2d\u4f7f\u7528 Exchange 3.6.0\u3002 \u5df2\u7ecf\u5b89\u88c5 Spark\u3002 \u4ee5\u4e0b JAR \u5305\u5df2\u7ecf\u4e0b\u8f7d\u5e76\u653e\u7f6e\u5728 Spark \u7684 SPARK_HOME/jars \u76ee\u5f55\u4e0b\uff1a spark-streaming-kafka_xxx.jar spark-sql-kafka-0-10_xxx.jar kafka-clients-xxx.jar \u4e86\u89e3NebulaGraph\u4e2d\u521b\u5efa Schema \u7684\u4fe1\u606f\uff0c\u5305\u62ec Tag \u548c Edge type \u7684\u540d\u79f0\u3001\u5c5e\u6027\u7b49\u3002 \u5df2\u7ecf\u5b89\u88c5\u5e76\u5f00\u542f Kafka \u670d\u52a1\u3002","title":"\u524d\u63d0\u6761\u4ef6"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-kafka/#_3","text":"\u5bfc\u5165 Kafka \u6570\u636e\u65f6\u53ea\u652f\u6301 Client \u6a21\u5f0f\uff0c\u5373\u53c2\u6570 tags.type.sink \u548c edges.type.sink \u7684\u503c\u4e3a client \u3002 \u5bfc\u5165 Kafka \u6570\u636e\u65f6\u8bf7\u52ff\u4f7f\u7528 Exchange 3.4.0 \u7248\u672c\uff0c\u8be5\u7248\u672c\u589e\u52a0\u4e86\u5bf9\u5bfc\u5165\u6570\u636e\u7684\u7f13\u5b58\uff0c\u4e0d\u652f\u6301\u6d41\u5f0f\u6570\u636e\u5bfc\u5165\u3002\u8bf7\u4f7f\u7528 Exchange 3.0.0\u30013.3.0\u30013.5.0 \u7248\u672c\u3002","title":"\u6ce8\u610f\u4e8b\u9879"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-kafka/#_4","text":"","title":"\u64cd\u4f5c\u6b65\u9aa4"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-kafka/#1nebulagraph_schema","text":"\u5206\u6790\u6570\u636e\uff0c\u6309\u4ee5\u4e0b\u6b65\u9aa4\u5728NebulaGraph\u4e2d\u521b\u5efa Schema\uff1a \u786e\u8ba4 Schema \u8981\u7d20\u3002NebulaGraph\u4e2d\u7684 Schema \u8981\u7d20\u5982\u4e0b\u8868\u6240\u793a\u3002 \u8981\u7d20 \u540d\u79f0 \u5c5e\u6027 Tag player name string, age int Tag team name string Edge Type follow degree int Edge Type serve start_year int, end_year int \u5728NebulaGraph\u4e2d\u521b\u5efa\u4e00\u4e2a\u56fe\u7a7a\u95f4 basketballplayer \uff0c\u5e76\u521b\u5efa\u4e00\u4e2a Schema\uff0c\u5982\u4e0b\u6240\u793a\u3002 ## \u521b\u5efa\u56fe\u7a7a\u95f4 nebula> CREATE SPACE basketballplayer \\ (partition_num = 10, \\ replica_factor = 1, \\ vid_type = FIXED_STRING(30)); ## \u9009\u62e9\u56fe\u7a7a\u95f4 basketballplayer nebula> USE basketballplayer; ## \u521b\u5efa Tag player nebula> CREATE TAG player(name string, age int); ## \u521b\u5efa Tag team nebula> CREATE TAG team(name string); ## \u521b\u5efa Edge type follow nebula> CREATE EDGE follow(degree int); ## \u521b\u5efa Edge type serve nebula> CREATE EDGE serve(start_year int, end_year int); \u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u89c1 \u5feb\u901f\u5f00\u59cb \u3002","title":"\u6b65\u9aa4 1\uff1a\u5728NebulaGraph\u4e2d\u521b\u5efa Schema"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-kafka/#2","text":"\u7f16\u8bd1 Exchange \u540e\uff0c\u590d\u5236 target/classes/application.conf \u6587\u4ef6\u8bbe\u7f6e Kafka \u6570\u636e\u6e90\u76f8\u5173\u7684\u914d\u7f6e\u3002\u5728\u672c\u793a\u4f8b\u4e2d\uff0c\u590d\u5236\u7684\u6587\u4ef6\u540d\u4e3a kafka_application.conf \u3002\u5404\u4e2a\u914d\u7f6e\u9879\u7684\u8be6\u7ec6\u8bf4\u660e\u8bf7\u53c2\u89c1 \u914d\u7f6e\u8bf4\u660e \u3002 Note \u5bfc\u5165 Kafka \u6570\u636e\u65f6\uff0c\u4e00\u4e2a\u914d\u7f6e\u6587\u4ef6\u53ea\u80fd\u5904\u7406\u4e00\u4e2a Tag \u6216 Edge type\u3002\u5982\u679c\u6709\u591a\u4e2a Tag \u6216 Edge type\uff0c\u9700\u8981\u521b\u5efa\u591a\u4e2a\u914d\u7f6e\u6587\u4ef6\u3002 { # Spark \u76f8\u5173\u914d\u7f6e spark: { app: { name: NebulaGraph Exchange 3.6.0 } driver: { cores: 1 maxResultSize: 1G } cores: { max: 16 } } # NebulaGraph \u76f8\u5173\u914d\u7f6e nebula: { address:{ # \u4ee5\u4e0b\u4e3a NebulaGraph \u7684 Graph \u670d\u52a1\u548c Meta \u670d\u52a1\u6240\u5728\u673a\u5668\u7684 IP \u5730\u5740\u53ca\u7aef\u53e3\u3002 # \u5982\u679c\u6709\u591a\u4e2a\u5730\u5740\uff0c\u683c\u5f0f\u4e3a \"ip1:port\",\"ip2:port\",\"ip3:port\"\u3002 # \u4e0d\u540c\u5730\u5740\u4e4b\u95f4\u4ee5\u82f1\u6587\u9017\u53f7 (,) \u9694\u5f00\u3002 graph:[\"127.0.0.1:9669\"] #\u4efb\u610f\u4e00\u4e2a Meta \u670d\u52a1\u7684\u5730\u5740\u3002 #\u5982\u679c\u60a8\u7684 NebulaGraph \u5728\u865a\u62df\u7f51\u7edc\u4e2d\uff0c\u5982k8s\uff0c\u8bf7\u914d\u7f6e Leader Meta\u7684\u5730\u5740\u3002 meta:[\"127.0.0.1:9559\"] } # \u586b\u5199\u7684\u8d26\u53f7\u5fc5\u987b\u62e5\u6709 NebulaGraph \u76f8\u5e94\u56fe\u7a7a\u95f4\u7684\u5199\u6570\u636e\u6743\u9650\u3002 user: root pswd: nebula # \u586b\u5199 NebulaGraph \u4e2d\u9700\u8981\u5199\u5165\u6570\u636e\u7684\u56fe\u7a7a\u95f4\u540d\u79f0\u3002 space: basketballplayer connection: { timeout: 3000 retry: 3 } execution: { retry: 3 } error: { max: 32 output: /tmp/errors } rate: { limit: 1024 timeout: 1000 } } # \u5904\u7406\u70b9 tags: [ # \u8bbe\u7f6e Tag player \u76f8\u5173\u4fe1\u606f\u3002 { # NebulaGraph \u4e2d\u5bf9\u5e94\u7684 Tag \u540d\u79f0\u3002 name: player type: { # \u6307\u5b9a\u6570\u636e\u6e90\u6587\u4ef6\u683c\u5f0f\uff0c\u8bbe\u7f6e\u4e3a Kafka\u3002 source: kafka # \u6307\u5b9a\u5982\u4f55\u5c06\u6570\u636e\u5bfc\u5165NebulaGraph\u3002\u53ea\u652f\u6301 Client\u3002 sink: client } # Kafka \u670d\u52a1\u5668\u5730\u5740\u3002 service: \"127.0.0.1:9092\" # \u6d88\u606f\u7c7b\u522b\u3002 topic: \"topic_name1\" # \u5728 fields \u91cc\u6307\u5b9a Kafka value \u4e2d\u7684\u5b57\u6bb5\u540d\u79f0\uff0c\u591a\u4e2a\u5b57\u6bb5\u7528\u82f1\u6587\u9017\u53f7\uff08,\uff09\u9694\u5f00\u3002Spark Structured Streaming \u8bfb\u53d6 Kafka \u6570\u636e\u540e\u4f1a\u5c06\u5176\u4ee5 JSON \u683c\u5f0f\u5b58\u50a8\u4e8e value \u5b57\u6bb5\u4e2d\uff0c\u800c\u8fd9\u91cc\u7684 fields \u8981\u914d\u7f6e JSON \u7684 key \u540d\u3002\u793a\u4f8b\u5982\u4e0b\uff1a fields: [personName, personAge] # \u8bbe\u7f6e\u4e0e fields \u4e2d\u7684 key \u5bf9\u5e94\u7684 NebulaGraph \u5c5e\u6027\u540d\uff0ckey \u7684 value \u5c06\u4fdd\u5b58\u4e3a\u76f8\u5e94\u7684\u5c5e\u6027\u503c\u3002\u4e0b\u65b9\u8bbe\u7f6e\u4f1a\u5c06 personName \u7684 value \u4fdd\u5b58\u5230 NebulaGraph \u4e2d\u7684 name \u5c5e\u6027\uff0cpersonAge \u7684 value \u5219\u4fdd\u5b58\u5230 age \u5c5e\u6027\u3002 nebula.fields: [name, age] # \u6307\u5b9a\u8868\u4e2d\u67d0\u4e00\u5217\u6570\u636e\u4e3a NebulaGraph \u4e2d\u70b9 VID \u7684\u6765\u6e90\u3002 # \u8fd9\u91cc\u7684\u503c key \u548c\u4e0a\u9762\u7684 key \u91cd\u590d\uff0c\u8868\u793a key \u65e2\u4f5c\u4e3a VID\uff0c\u4e5f\u4f5c\u4e3a\u5c5e\u6027 name\u3002 vertex:{ field:personId # udf:{ # separator:\"_\" # oldColNames:[field-0,field-1,field-2] # newColName:new-field # } # \u4e3a VID \u589e\u52a0\u6307\u5b9a\u7684\u524d\u7f00\u3002\u4f8b\u5982 VID \u4e3a 12345\uff0c\u589e\u52a0\u524d\u7f00 tag1 \u540e\u4e3a tag1_12345\u3002\u4e0b\u5212\u7ebf\u65e0\u6cd5\u4fee\u6539\u3002 # prefix:\"tag1\" # \u5bf9 string \u7c7b\u578b\u7684 VID \u8fdb\u884c\u54c8\u5e0c\u5316\u64cd\u4f5c\u3002 # policy:hash } # \u6279\u91cf\u64cd\u4f5c\u7c7b\u578b\uff0c\u5305\u62ec INSERT\u3001UPDATE \u548c DELETE\u3002\u9ed8\u8ba4\u4e3a INSERT\u3002 #writeMode: INSERT # \u5355\u6279\u6b21\u5199\u5165 NebulaGraph \u7684\u6570\u636e\u6761\u6570\u3002 batch: 10 # Spark \u5206\u533a\u6570\u91cf partition: 10 # \u8bfb\u53d6\u6d88\u606f\u7684\u95f4\u9694\u3002\u5355\u4f4d\uff1a\u79d2\u3002 interval.seconds: 10 # \u6d88\u8d39\u8d77\u70b9\uff0c\u9ed8\u8ba4\u503c latest\u3002 \u53ef\u9009 latest\u3001earliest startingOffsets: latest # \u6d41\u63a7\uff0c\u5bf9\u6bcf\u4e2a\u89e6\u53d1\u533a\u95f4\u5904\u7406\u7684\u6700\u5927\u504f\u79fb\u91cf\u7684\u901f\u7387\u9650\u5236\uff0c\u53ef\u4e0d\u914d\u7f6e\u3002 # maxOffsetsPerTrigger:10000 } ] # \u5904\u7406\u8fb9\u6570\u636e #edges: [ # # \u8bbe\u7f6e Edge type follow \u76f8\u5173\u4fe1\u606f # { # # NebulaGraph \u4e2d\u5bf9\u5e94\u7684 Edge type \u540d\u79f0\u3002 # name: follow # type: { # # \u6307\u5b9a\u6570\u636e\u6e90\u6587\u4ef6\u683c\u5f0f\uff0c\u8bbe\u7f6e\u4e3a Kafka\u3002 # source: kafka # # \u6307\u5b9a\u8fb9\u6570\u636e\u5bfc\u5165 NebulaGraph \u7684\u65b9\u5f0f\uff0c # # \u6307\u5b9a\u5982\u4f55\u5c06\u6570\u636e\u5bfc\u5165NebulaGraph\u3002\u53ea\u652f\u6301 Client\u3002 # sink: client # } # # Kafka \u670d\u52a1\u5668\u5730\u5740\u3002 # service: \"127.0.0.1:9092\" # # \u6d88\u606f\u7c7b\u522b\u3002 # topic: \"topic_name3\" # # \u5728 fields \u91cc\u6307\u5b9a Kafka value \u4e2d\u7684\u5b57\u6bb5\u540d\u79f0\uff0c\u591a\u4e2a\u5b57\u6bb5\u7528\u82f1\u6587\u9017\u53f7\uff08,\uff09\u9694\u5f00\u3002Spark Structured Streaming \u8bfb\u53d6 Kafka \u6570\u636e\u540e\u4f1a\u5c06\u5176\u4ee5 JSON \u683c\u5f0f\u5b58\u50a8\u4e8e value \u5b57\u6bb5\u4e2d\uff0c\u800c\u8fd9\u91cc\u7684 fields \u8981\u914d\u7f6e JSON \u7684 key \u540d\u3002\u793a\u4f8b\u5982\u4e0b\uff1a # fields: [degree] # # \u8bbe\u7f6e\u4e0e fields \u4e2d\u7684 key \u5bf9\u5e94\u7684 NebulaGraph \u5c5e\u6027\u540d\uff0ckey \u7684 value \u5c06\u4fdd\u5b58\u4e3a\u76f8\u5e94\u7684\u5c5e\u6027\u503c\u3002\u4e0b\u65b9\u8bbe\u7f6e\u4f1a\u5c06 degree \u7684 value \u4fdd\u5b58\u5230 NebulaGraph \u4e2d\u7684 degree \u5c5e\u6027\u3002 # nebula.fields: [degree] # # \u5728 source \u91cc\uff0c\u5c06 topic \u4e2d\u67d0\u4e00\u5217\u4f5c\u4e3a\u8fb9\u7684\u8d77\u59cb\u70b9\u6570\u636e\u6e90\u3002 # # \u5728 target \u91cc\uff0c\u5c06 topic \u4e2d\u67d0\u4e00\u5217\u4f5c\u4e3a\u8fb9\u7684\u76ee\u7684\u70b9\u6570\u636e\u6e90\u3002 # source:{ # field:srcPersonId # # udf:{ # # separator:\"_\" # # oldColNames:[field-0,field-1,field-2] # # newColName:new-field # # } # # \u4e3a VID \u589e\u52a0\u6307\u5b9a\u7684\u524d\u7f00\u3002\u4f8b\u5982 VID \u4e3a 12345\uff0c\u589e\u52a0\u524d\u7f00 tag1 \u540e\u4e3a tag1_12345\u3002\u4e0b\u5212\u7ebf\u65e0\u6cd5\u4fee\u6539\u3002 # # prefix:\"tag1\" # # \u5bf9 string \u7c7b\u578b\u7684 VID \u8fdb\u884c\u54c8\u5e0c\u5316\u64cd\u4f5c\u3002 # # policy:hash # } # target:{ # field:dstPersonId # # udf:{ # # separator:\"_\" # # oldColNames:[field-0,field-1,field-2] # # newColName:new-field # # } # # \u4e3a VID \u589e\u52a0\u6307\u5b9a\u7684\u524d\u7f00\u3002\u4f8b\u5982 VID \u4e3a 12345\uff0c\u589e\u52a0\u524d\u7f00 tag1 \u540e\u4e3a tag1_12345\u3002\u4e0b\u5212\u7ebf\u65e0\u6cd5\u4fee\u6539\u3002 # # prefix:\"tag1\" # # \u5bf9 string \u7c7b\u578b\u7684 VID \u8fdb\u884c\u54c8\u5e0c\u5316\u64cd\u4f5c\u3002 # # policy:hash # } # # \u6307\u5b9a\u4e00\u4e2a\u5217\u4f5c\u4e3a rank \u7684\u6e90\uff08\u53ef\u9009\uff09\u3002 # #ranking: rank # # \u6279\u91cf\u64cd\u4f5c\u7c7b\u578b\uff0c\u5305\u62ec INSERT\u3001UPDATE \u548c DELETE\u3002\u9ed8\u8ba4\u4e3a INSERT\u3002 # #writeMode: INSERT # # \u5355\u6279\u6b21\u5199\u5165 NebulaGraph \u7684\u6570\u636e\u6761\u6570\u3002 # batch: 10 # # Spark \u5206\u533a\u6570\u91cf # partition: 10 # # \u8bfb\u53d6\u6d88\u606f\u7684\u95f4\u9694\u3002\u5355\u4f4d\uff1a\u79d2\u3002 # interval.seconds: 10 # # \u6d88\u8d39\u8d77\u70b9\uff0c\u9ed8\u8ba4\u503c latest\u3002 \u53ef\u9009 latest\u3001earliest # startingOffsets: latest # # \u6d41\u63a7\uff0c\u5bf9\u6bcf\u4e2a\u89e6\u53d1\u533a\u95f4\u5904\u7406\u7684\u6700\u5927\u504f\u79fb\u91cf\u7684\u901f\u7387\u9650\u5236\uff0c\u53ef\u4e0d\u914d\u7f6e\u3002 # # maxOffsetsPerTrigger:10000 # } #] }","title":"\u6b65\u9aa4 2\uff1a\u4fee\u6539\u914d\u7f6e\u6587\u4ef6"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-kafka/#3nebulagraph","text":"\u8fd0\u884c\u5982\u4e0b\u547d\u4ee4\u5c06 Kafka \u6570\u636e\u5bfc\u5165\u5230NebulaGraph\u4e2d\u3002\u5173\u4e8e\u53c2\u6570\u7684\u8bf4\u660e\uff0c\u8bf7\u53c2\u89c1 \u5bfc\u5165\u547d\u4ee4\u53c2\u6570 \u3002 ${ SPARK_HOME } /bin/spark-submit --master \"local\" --class com.vesoft.nebula.exchange.Exchange <nebula-exchange-3.6.0.jar_path> -c <kafka_application.conf_path> Note JAR \u5305\u6709\u4e24\u79cd\u83b7\u53d6\u65b9\u5f0f\uff1a \u81ea\u884c\u7f16\u8bd1 \u6216\u8005\u4ece maven \u4ed3\u5e93\u4e0b\u8f7d\u3002 \u793a\u4f8b\uff1a ${ SPARK_HOME } /bin/spark-submit --master \"local\" --class com.vesoft.nebula.exchange.Exchange /root/nebula-exchange/nebula-exchange/target/nebula-exchange-3.6.0.jar -c /root/nebula-exchange/nebula-exchange/target/classes/kafka_application.conf \u7528\u6237\u53ef\u4ee5\u5728\u8fd4\u56de\u4fe1\u606f\u4e2d\u641c\u7d22 batchSuccess.<tag_name/edge_name> \uff0c\u786e\u8ba4\u6210\u529f\u7684\u6570\u91cf\u3002\u4f8b\u5982 batchSuccess.follow: 300 \u3002","title":"\u6b65\u9aa4 3\uff1a\u5411NebulaGraph\u5bfc\u5165\u6570\u636e"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-kafka/#4","text":"\u7528\u6237\u53ef\u4ee5\u5728NebulaGraph\u5ba2\u6237\u7aef\uff08\u4f8b\u5982 NebulaGraph Studio\uff09\u4e2d\u6267\u884c\u67e5\u8be2\u8bed\u53e5\uff0c\u786e\u8ba4\u6570\u636e\u662f\u5426\u5df2\u5bfc\u5165\u3002\u4f8b\u5982\uff1a LOOKUP ON player YIELD id(vertex); \u7528\u6237\u4e5f\u53ef\u4ee5\u4f7f\u7528\u547d\u4ee4 SHOW STATS \u67e5\u770b\u7edf\u8ba1\u6570\u636e\u3002","title":"\u6b65\u9aa4 4\uff1a\uff08\u53ef\u9009\uff09\u9a8c\u8bc1\u6570\u636e"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-kafka/#5nebulagraph","text":"\u5bfc\u5165\u6570\u636e\u540e\uff0c\u7528\u6237\u53ef\u4ee5\u5728NebulaGraph\u4e2d\u91cd\u65b0\u521b\u5efa\u5e76\u91cd\u5efa\u7d22\u5f15\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1 \u7d22\u5f15\u4ecb\u7ecd \u3002","title":"\u6b65\u9aa4 5\uff1a\uff08\u5982\u6709\uff09\u5728NebulaGraph\u4e2d\u91cd\u5efa\u7d22\u5f15"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-maxcompute/","text":"\u5bfc\u5165 MaxCompute \u6570\u636e \u00b6 \u672c\u6587\u4ee5\u4e00\u4e2a\u793a\u4f8b\u8bf4\u660e\u5982\u4f55\u4f7f\u7528 Exchange \u5c06\u5b58\u50a8\u5728 MaxCompute \u4e0a\u7684\u6570\u636e\u5bfc\u5165NebulaGraph\u3002 \u6570\u636e\u96c6 \u00b6 \u672c\u6587\u4ee5 basketballplayer \u6570\u636e\u96c6 \u4e3a\u4f8b\u3002 \u73af\u5883\u914d\u7f6e \u00b6 \u672c\u6587\u793a\u4f8b\u5728 MacOS \u4e0b\u5b8c\u6210\uff0c\u4ee5\u4e0b\u662f\u76f8\u5173\u7684\u73af\u5883\u914d\u7f6e\u4fe1\u606f\uff1a \u786c\u4ef6\u89c4\u683c\uff1a CPU\uff1a1.7 GHz Quad-Core Intel Core i7 \u5185\u5b58\uff1a16 GB Spark\uff1a2.4.7\uff0c\u5355\u673a\u7248 MaxCompute\uff1a\u963f\u91cc\u4e91\u5b98\u65b9\u7248\u672c NebulaGraph\uff1a3.6.0\u3002 \u524d\u63d0\u6761\u4ef6 \u00b6 \u5f00\u59cb\u5bfc\u5165\u6570\u636e\u4e4b\u524d\uff0c\u7528\u6237\u9700\u8981\u786e\u8ba4\u4ee5\u4e0b\u4fe1\u606f\uff1a \u5df2\u7ecf \u5b89\u88c5\u90e8\u7f72NebulaGraph \u5e76\u83b7\u53d6\u5982\u4e0b\u4fe1\u606f\uff1a Graph \u670d\u52a1\u548c Meta \u670d\u52a1\u7684\u7684 IP \u5730\u5740\u548c\u7aef\u53e3\u3002 \u62e5\u6709NebulaGraph\u5199\u6743\u9650\u7684\u7528\u6237\u540d\u548c\u5bc6\u7801\u3002 \u5df2\u7ecf\u7f16\u8bd1 Exchange\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1 \u7f16\u8bd1 Exchange \u3002\u672c\u793a\u4f8b\u4e2d\u4f7f\u7528 Exchange 3.6.0\u3002 \u5df2\u7ecf\u5b89\u88c5 Spark\u3002 \u4e86\u89e3NebulaGraph\u4e2d\u521b\u5efa Schema \u7684\u4fe1\u606f\uff0c\u5305\u62ec Tag \u548c Edge type \u7684\u540d\u79f0\u3001\u5c5e\u6027\u7b49\u3002 \u64cd\u4f5c\u6b65\u9aa4 \u00b6 \u6b65\u9aa4 1\uff1a\u5728NebulaGraph\u4e2d\u521b\u5efa Schema \u00b6 \u5206\u6790\u6570\u636e\uff0c\u6309\u4ee5\u4e0b\u6b65\u9aa4\u5728NebulaGraph\u4e2d\u521b\u5efa Schema\uff1a \u786e\u8ba4 Schema \u8981\u7d20\u3002NebulaGraph\u4e2d\u7684 Schema \u8981\u7d20\u5982\u4e0b\u8868\u6240\u793a\u3002 \u8981\u7d20 \u540d\u79f0 \u5c5e\u6027 Tag player name string, age int Tag team name string Edge Type follow degree int Edge Type serve start_year int, end_year int \u5728NebulaGraph\u4e2d\u521b\u5efa\u4e00\u4e2a\u56fe\u7a7a\u95f4 basketballplayer \uff0c\u5e76\u521b\u5efa\u4e00\u4e2a Schema\uff0c\u5982\u4e0b\u6240\u793a\u3002 ## \u521b\u5efa\u56fe\u7a7a\u95f4 nebula> CREATE SPACE basketballplayer \\ (partition_num = 10, \\ replica_factor = 1, \\ vid_type = FIXED_STRING(30)); ## \u9009\u62e9\u56fe\u7a7a\u95f4 basketballplayer nebula> USE basketballplayer; ## \u521b\u5efa Tag player nebula> CREATE TAG player(name string, age int); ## \u521b\u5efa Tag team nebula> CREATE TAG team(name string); ## \u521b\u5efa Edge type follow nebula> CREATE EDGE follow(degree int); ## \u521b\u5efa Edge type serve nebula> CREATE EDGE serve(start_year int, end_year int); \u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u89c1 \u5feb\u901f\u5f00\u59cb \u3002 \u6b65\u9aa4 2\uff1a\u4fee\u6539\u914d\u7f6e\u6587\u4ef6 \u00b6 \u7f16\u8bd1 Exchange \u540e\uff0c\u590d\u5236 target/classes/application.conf \u6587\u4ef6\u8bbe\u7f6e MaxCompute \u6570\u636e\u6e90\u76f8\u5173\u7684\u914d\u7f6e\u3002\u5728\u672c\u793a\u4f8b\u4e2d\uff0c\u590d\u5236\u7684\u6587\u4ef6\u540d\u4e3a maxcompute_application.conf \u3002\u5404\u4e2a\u914d\u7f6e\u9879\u7684\u8be6\u7ec6\u8bf4\u660e\u8bf7\u53c2\u89c1 \u914d\u7f6e\u8bf4\u660e \u3002 { # Spark \u76f8\u5173\u914d\u7f6e spark: { app: { name: NebulaGraph Exchange 3.6.0 } driver: { cores: 1 maxResultSize: 1G } cores: { max: 16 } } # NebulaGraph \u76f8\u5173\u914d\u7f6e nebula: { address:{ # \u4ee5\u4e0b\u4e3a NebulaGraph \u7684 Graph \u670d\u52a1\u548c Meta \u670d\u52a1\u6240\u5728\u673a\u5668\u7684 IP \u5730\u5740\u53ca\u7aef\u53e3\u3002 # \u5982\u679c\u6709\u591a\u4e2a\u5730\u5740\uff0c\u683c\u5f0f\u4e3a \"ip1:port\",\"ip2:port\",\"ip3:port\"\u3002 # \u4e0d\u540c\u5730\u5740\u4e4b\u95f4\u4ee5\u82f1\u6587\u9017\u53f7 (,) \u9694\u5f00\u3002 graph:[\"127.0.0.1:9669\"] #\u4efb\u610f\u4e00\u4e2a Meta \u670d\u52a1\u7684\u5730\u5740\u3002 #\u5982\u679c\u60a8\u7684 NebulaGraph \u5728\u865a\u62df\u7f51\u7edc\u4e2d\uff0c\u5982k8s\uff0c\u8bf7\u914d\u7f6e Leader Meta\u7684\u5730\u5740\u3002 meta:[\"127.0.0.1:9559\"] } # \u586b\u5199\u7684\u8d26\u53f7\u5fc5\u987b\u62e5\u6709 NebulaGraph \u76f8\u5e94\u56fe\u7a7a\u95f4\u7684\u5199\u6570\u636e\u6743\u9650\u3002 user: root pswd: nebula # \u586b\u5199 NebulaGraph \u4e2d\u9700\u8981\u5199\u5165\u6570\u636e\u7684\u56fe\u7a7a\u95f4\u540d\u79f0\u3002 space: basketballplayer connection: { timeout: 3000 retry: 3 } execution: { retry: 3 } error: { max: 32 output: /tmp/errors } rate: { limit: 1024 timeout: 1000 } } # \u5904\u7406\u70b9 tags: [ # \u8bbe\u7f6e Tag player \u76f8\u5173\u4fe1\u606f { name: player type: { # \u6307\u5b9a\u6570\u636e\u6e90\u6587\u4ef6\u683c\u5f0f\uff0c\u8bbe\u7f6e\u4e3a MaxCompute\u3002 source: maxcompute # \u6307\u5b9a\u5982\u4f55\u5c06\u70b9\u6570\u636e\u5bfc\u5165NebulaGraph\uff1aClient \u6216 SST\u3002 sink: client } # MaxCompute \u7684\u8868\u540d table:player # MaxCompute \u7684\u9879\u76ee\u540d project:project # MaxCompute \u670d\u52a1\u7684 odpsUrl \u548c tunnelUrl\uff0c # \u5730\u5740\u53ef\u5728 https://help.aliyun.com/document_detail/34951.html \u67e5\u770b\u3002 odpsUrl:\"http://service.cn-hangzhou.maxcompute.aliyun.com/api\" tunnelUrl:\"http://dt.cn-hangzhou.maxcompute.aliyun.com\" # MaxCompute \u670d\u52a1\u7684 accessKeyId \u548c accessKeySecret\u3002 accessKeyId:xxx accessKeySecret:xxx # MaxCompute \u8868\u7684\u5206\u533a\u63cf\u8ff0\uff0c\u8be5\u914d\u7f6e\u53ef\u9009\u3002 partitionSpec:\"dt='partition1'\" # MaxCompute \u7684 Spark \u8fde\u63a5\u5668\u5728\u8bfb\u53d6 MaxCompute \u6570\u636e\u65f6\u4f7f\u7528\u7684\u5206\u533a\u6570\u3002\u9ed8\u8ba4\u4e3a1\uff0c\u8be5\u914d\u7f6e\u53ef\u9009\u3002 numPartitions:100 # \u8bf7\u786e\u4fdd SQL \u8bed\u53e5\u4e2d\u7684\u8868\u540d\u548c\u4e0a\u65b9 table \u7684\u503c\u76f8\u540c\uff0c\u8be5\u914d\u7f6e\u53ef\u9009\u3002 sentence:\"select id, name, age, playerid from player where id < 10\" # \u5728 fields \u91cc\u6307\u5b9a player \u8868\u4e2d\u7684\u5217\u540d\u79f0\uff0c\u5176\u5bf9\u5e94\u7684 value \u4f1a\u4f5c\u4e3a NebulaGraph \u4e2d\u6307\u5b9a\u5c5e\u6027\u3002 # fields \u548c nebula.fields \u91cc\u7684\u914d\u7f6e\u5fc5\u987b\u4e00\u4e00\u5bf9\u5e94\u3002 # \u5982\u679c\u9700\u8981\u6307\u5b9a\u591a\u4e2a\u5217\u540d\u79f0\uff0c\u7528\u82f1\u6587\u9017\u53f7\uff08,\uff09\u9694\u5f00\u3002 fields:[name, age] nebula.fields:[name, age] # \u6307\u5b9a\u8868\u4e2d\u67d0\u4e00\u5217\u6570\u636e\u4e3a NebulaGraph \u4e2d\u70b9 VID \u7684\u6765\u6e90\u3002 vertex:{ field: playerid # udf:{ # separator:\"_\" # oldColNames:[field-0,field-1,field-2] # newColName:new-field # } # \u4e3a VID \u589e\u52a0\u6307\u5b9a\u7684\u524d\u7f00\u3002\u4f8b\u5982 VID \u4e3a 12345\uff0c\u589e\u52a0\u524d\u7f00 tag1 \u540e\u4e3a tag1_12345\u3002\u4e0b\u5212\u7ebf\u65e0\u6cd5\u4fee\u6539\u3002 # prefix:\"tag1\" # \u5bf9 string \u7c7b\u578b\u7684 VID \u8fdb\u884c\u54c8\u5e0c\u5316\u64cd\u4f5c\u3002 # policy:hash } # \u6279\u91cf\u64cd\u4f5c\u7c7b\u578b\uff0c\u5305\u62ec INSERT\u3001UPDATE \u548c DELETE\u3002\u9ed8\u8ba4\u4e3a INSERT\u3002 #writeMode: INSERT # \u6279\u91cf\u5220\u9664\u65f6\u662f\u5426\u5220\u9664\u8be5\u70b9\u5173\u8054\u7684\u51fa\u8fb9\u548c\u5165\u8fb9\u3002`writeMode`\u4e3a`DELETE`\u65f6\u8be5\u53c2\u6570\u751f\u6548\u3002 #deleteEdge: false # \u5355\u6279\u6b21\u5199\u5165 NebulaGraph \u7684\u6570\u636e\u6761\u6570\u3002 batch: 256 # Spark \u5206\u533a\u6570\u91cf partition: 32 } # \u8bbe\u7f6e Tag team \u76f8\u5173\u4fe1\u606f\u3002 { name: team type: { source: maxcompute sink: client } table:team project:project odpsUrl:\"http://service.cn-hangzhou.maxcompute.aliyun.com/api\" tunnelUrl:\"http://dt.cn-hangzhou.maxcompute.aliyun.com\" accessKeyId:xxx accessKeySecret:xxx partitionSpec:\"dt='partition1'\" sentence:\"select id, name, teamid from team where id < 10\" fields:[name] nebula.fields:[name] vertex:{ field: teamid } batch: 256 partition: 32 } ] # \u5904\u7406\u8fb9\u6570\u636e edges: [ # \u8bbe\u7f6e Edge type follow \u76f8\u5173\u4fe1\u606f { # NebulaGraph \u4e2d\u5bf9\u5e94\u7684 Edge type \u540d\u79f0\u3002 name: follow type:{ # \u6307\u5b9a\u6570\u636e\u6e90\u6587\u4ef6\u683c\u5f0f\uff0c\u8bbe\u7f6e\u4e3a MaxCompute\u3002 source:maxcompute # \u6307\u5b9a\u8fb9\u6570\u636e\u5bfc\u5165 NebulaGraph \u7684\u65b9\u5f0f\uff0c # \u6307\u5b9a\u5982\u4f55\u5c06\u70b9\u6570\u636e\u5bfc\u5165NebulaGraph\uff1aClient \u6216 SST\u3002 sink:client } # MaxCompute \u7684\u8868\u540d table:follow # MaxCompute \u7684\u9879\u76ee\u540d project:project # MaxCompute \u670d\u52a1\u7684 odpsUrl \u548c tunnelUrl\uff0c # \u5730\u5740\u53ef\u5728 https://help.aliyun.com/document_detail/34951.html \u67e5\u770b\u3002 odpsUrl:\"http://service.cn-hangzhou.maxcompute.aliyun.com/api\" tunnelUrl:\"http://dt.cn-hangzhou.maxcompute.aliyun.com\" # MaxCompute \u670d\u52a1\u7684 accessKeyId \u548c accessKeySecret\u3002 accessKeyId:xxx accessKeySecret:xxx # MaxCompute \u8868\u7684\u5206\u533a\u63cf\u8ff0\uff0c\u8be5\u914d\u7f6e\u53ef\u9009\u3002 partitionSpec:\"dt='partition1'\" # \u8bf7\u786e\u4fdd SQL \u8bed\u53e5\u4e2d\u7684\u8868\u540d\u548c\u4e0a\u65b9 table \u7684\u503c\u76f8\u540c\uff0c\u8be5\u914d\u7f6e\u53ef\u9009\u3002 sentence:\"select * from follow\" # \u5728 fields \u91cc\u6307\u5b9a follow \u8868\u4e2d\u7684\u5217\u540d\u79f0\uff0c\u5176\u5bf9\u5e94\u7684 value \u4f1a\u4f5c\u4e3a NebulaGraph \u4e2d\u6307\u5b9a\u5c5e\u6027\u3002 # fields \u548c nebula.fields \u91cc\u7684\u914d\u7f6e\u5fc5\u987b\u4e00\u4e00\u5bf9\u5e94\u3002 # \u5982\u679c\u9700\u8981\u6307\u5b9a\u591a\u4e2a\u5217\u540d\u79f0\uff0c\u7528\u82f1\u6587\u9017\u53f7\uff08,\uff09\u9694\u5f00\u3002 fields:[degree] nebula.fields:[degree] # \u5728 source \u91cc\uff0c\u5c06 follow \u8868\u4e2d\u67d0\u4e00\u5217\u4f5c\u4e3a\u8fb9\u7684\u8d77\u59cb\u70b9\u6570\u636e\u6e90\u3002 source:{ field: src_player # udf:{ # separator:\"_\" # oldColNames:[field-0,field-1,field-2] # newColName:new-field # } # \u4e3a VID \u589e\u52a0\u6307\u5b9a\u7684\u524d\u7f00\u3002\u4f8b\u5982 VID \u4e3a 12345\uff0c\u589e\u52a0\u524d\u7f00 tag1 \u540e\u4e3a tag1_12345\u3002\u4e0b\u5212\u7ebf\u65e0\u6cd5\u4fee\u6539\u3002 # prefix:\"tag1\" # \u5bf9 string \u7c7b\u578b\u7684 VID \u8fdb\u884c\u54c8\u5e0c\u5316\u64cd\u4f5c\u3002 # policy:hash } # \u5728 target \u91cc\uff0c\u5c06 follow \u8868\u4e2d\u67d0\u4e00\u5217\u4f5c\u4e3a\u8fb9\u7684\u76ee\u7684\u70b9\u6570\u636e\u6e90\u3002 target:{ field: dst_player # udf:{ # separator:\"_\" # oldColNames:[field-0,field-1,field-2] # newColName:new-field # } # \u4e3a VID \u589e\u52a0\u6307\u5b9a\u7684\u524d\u7f00\u3002\u4f8b\u5982 VID \u4e3a 12345\uff0c\u589e\u52a0\u524d\u7f00 tag1 \u540e\u4e3a tag1_12345\u3002\u4e0b\u5212\u7ebf\u65e0\u6cd5\u4fee\u6539\u3002 # prefix:\"tag1\" # \u5bf9 string \u7c7b\u578b\u7684 VID \u8fdb\u884c\u54c8\u5e0c\u5316\u64cd\u4f5c\u3002 # policy:hash } # \u6307\u5b9a\u4e00\u4e2a\u5217\u4f5c\u4e3a rank \u7684\u6e90\uff08\u53ef\u9009\uff09\u3002 #ranking: rank # \u6279\u91cf\u64cd\u4f5c\u7c7b\u578b\uff0c\u5305\u62ec INSERT\u3001UPDATE \u548c DELETE\u3002\u9ed8\u8ba4\u4e3a INSERT\u3002 #writeMode: INSERT # Spark \u5206\u533a\u6570\u91cf partition:10 # \u5355\u6279\u6b21\u5199\u5165 NebulaGraph \u7684\u6570\u636e\u6761\u6570\u3002 batch:10 } # \u8bbe\u7f6e Edge type serve \u76f8\u5173\u4fe1\u606f { name: serve type:{ source:maxcompute sink:client } table:serve project:project odpsUrl:\"http://service.cn-hangzhou.maxcompute.aliyun.com/api\" tunnelUrl:\"http://dt.cn-hangzhou.maxcompute.aliyun.com\" accessKeyId:xxx accessKeySecret:xxx partitionSpec:\"dt='partition1'\" sentence:\"select * from serve\" fields:[start_year,end_year] nebula.fields:[start_year,end_year] source:{ field: playerid } target:{ field: teamid } # \u6307\u5b9a\u4e00\u4e2a\u5217\u4f5c\u4e3a rank \u7684\u6e90\uff08\u53ef\u9009\uff09\u3002 #ranking: rank partition:10 batch:10 } ] } \u6b65\u9aa4 3\uff1a\u5411NebulaGraph\u5bfc\u5165\u6570\u636e \u00b6 \u8fd0\u884c\u5982\u4e0b\u547d\u4ee4\u5c06 MaxCompute \u6570\u636e\u5bfc\u5165\u5230NebulaGraph\u4e2d\u3002\u5173\u4e8e\u53c2\u6570\u7684\u8bf4\u660e\uff0c\u8bf7\u53c2\u89c1 \u5bfc\u5165\u547d\u4ee4\u53c2\u6570 \u3002 ${ SPARK_HOME } /bin/spark-submit --master \"local\" --class com.vesoft.nebula.exchange.Exchange <nebula-exchange-3.6.0.jar_path> -c <maxcompute_application.conf_path> Note JAR \u5305\u6709\u4e24\u79cd\u83b7\u53d6\u65b9\u5f0f\uff1a \u81ea\u884c\u7f16\u8bd1 \u6216\u8005\u4ece maven \u4ed3\u5e93\u4e0b\u8f7d\u3002 \u793a\u4f8b\uff1a ${ SPARK_HOME } /bin/spark-submit --master \"local\" --class com.vesoft.nebula.exchange.Exchange /root/nebula-exchange/nebula-exchange/target/nebula-exchange-3.6.0.jar -c /root/nebula-exchange/nebula-exchange/target/classes/maxcompute_application.conf \u7528\u6237\u53ef\u4ee5\u5728\u8fd4\u56de\u4fe1\u606f\u4e2d\u641c\u7d22 batchSuccess.<tag_name/edge_name> \uff0c\u786e\u8ba4\u6210\u529f\u7684\u6570\u91cf\u3002\u4f8b\u5982 batchSuccess.follow: 300 \u3002 \u6b65\u9aa4 4\uff1a\uff08\u53ef\u9009\uff09\u9a8c\u8bc1\u6570\u636e \u00b6 \u7528\u6237\u53ef\u4ee5\u5728NebulaGraph\u5ba2\u6237\u7aef\uff08\u4f8b\u5982 NebulaGraph Studio\uff09\u4e2d\u6267\u884c\u67e5\u8be2\u8bed\u53e5\uff0c\u786e\u8ba4\u6570\u636e\u662f\u5426\u5df2\u5bfc\u5165\u3002\u4f8b\u5982\uff1a LOOKUP ON player YIELD id(vertex); \u7528\u6237\u4e5f\u53ef\u4ee5\u4f7f\u7528\u547d\u4ee4 SHOW STATS \u67e5\u770b\u7edf\u8ba1\u6570\u636e\u3002 \u6b65\u9aa4 5\uff1a\uff08\u5982\u6709\uff09\u5728NebulaGraph\u4e2d\u91cd\u5efa\u7d22\u5f15 \u00b6 \u5bfc\u5165\u6570\u636e\u540e\uff0c\u7528\u6237\u53ef\u4ee5\u5728NebulaGraph\u4e2d\u91cd\u65b0\u521b\u5efa\u5e76\u91cd\u5efa\u7d22\u5f15\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1 \u7d22\u5f15\u4ecb\u7ecd \u3002","title":"\u5bfc\u5165 MaxCompute \u6570\u636e"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-maxcompute/#maxcompute","text":"\u672c\u6587\u4ee5\u4e00\u4e2a\u793a\u4f8b\u8bf4\u660e\u5982\u4f55\u4f7f\u7528 Exchange \u5c06\u5b58\u50a8\u5728 MaxCompute \u4e0a\u7684\u6570\u636e\u5bfc\u5165NebulaGraph\u3002","title":"\u5bfc\u5165 MaxCompute \u6570\u636e"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-maxcompute/#_1","text":"\u672c\u6587\u4ee5 basketballplayer \u6570\u636e\u96c6 \u4e3a\u4f8b\u3002","title":"\u6570\u636e\u96c6"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-maxcompute/#_2","text":"\u672c\u6587\u793a\u4f8b\u5728 MacOS \u4e0b\u5b8c\u6210\uff0c\u4ee5\u4e0b\u662f\u76f8\u5173\u7684\u73af\u5883\u914d\u7f6e\u4fe1\u606f\uff1a \u786c\u4ef6\u89c4\u683c\uff1a CPU\uff1a1.7 GHz Quad-Core Intel Core i7 \u5185\u5b58\uff1a16 GB Spark\uff1a2.4.7\uff0c\u5355\u673a\u7248 MaxCompute\uff1a\u963f\u91cc\u4e91\u5b98\u65b9\u7248\u672c NebulaGraph\uff1a3.6.0\u3002","title":"\u73af\u5883\u914d\u7f6e"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-maxcompute/#_3","text":"\u5f00\u59cb\u5bfc\u5165\u6570\u636e\u4e4b\u524d\uff0c\u7528\u6237\u9700\u8981\u786e\u8ba4\u4ee5\u4e0b\u4fe1\u606f\uff1a \u5df2\u7ecf \u5b89\u88c5\u90e8\u7f72NebulaGraph \u5e76\u83b7\u53d6\u5982\u4e0b\u4fe1\u606f\uff1a Graph \u670d\u52a1\u548c Meta \u670d\u52a1\u7684\u7684 IP \u5730\u5740\u548c\u7aef\u53e3\u3002 \u62e5\u6709NebulaGraph\u5199\u6743\u9650\u7684\u7528\u6237\u540d\u548c\u5bc6\u7801\u3002 \u5df2\u7ecf\u7f16\u8bd1 Exchange\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1 \u7f16\u8bd1 Exchange \u3002\u672c\u793a\u4f8b\u4e2d\u4f7f\u7528 Exchange 3.6.0\u3002 \u5df2\u7ecf\u5b89\u88c5 Spark\u3002 \u4e86\u89e3NebulaGraph\u4e2d\u521b\u5efa Schema \u7684\u4fe1\u606f\uff0c\u5305\u62ec Tag \u548c Edge type \u7684\u540d\u79f0\u3001\u5c5e\u6027\u7b49\u3002","title":"\u524d\u63d0\u6761\u4ef6"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-maxcompute/#_4","text":"","title":"\u64cd\u4f5c\u6b65\u9aa4"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-maxcompute/#1nebulagraph_schema","text":"\u5206\u6790\u6570\u636e\uff0c\u6309\u4ee5\u4e0b\u6b65\u9aa4\u5728NebulaGraph\u4e2d\u521b\u5efa Schema\uff1a \u786e\u8ba4 Schema \u8981\u7d20\u3002NebulaGraph\u4e2d\u7684 Schema \u8981\u7d20\u5982\u4e0b\u8868\u6240\u793a\u3002 \u8981\u7d20 \u540d\u79f0 \u5c5e\u6027 Tag player name string, age int Tag team name string Edge Type follow degree int Edge Type serve start_year int, end_year int \u5728NebulaGraph\u4e2d\u521b\u5efa\u4e00\u4e2a\u56fe\u7a7a\u95f4 basketballplayer \uff0c\u5e76\u521b\u5efa\u4e00\u4e2a Schema\uff0c\u5982\u4e0b\u6240\u793a\u3002 ## \u521b\u5efa\u56fe\u7a7a\u95f4 nebula> CREATE SPACE basketballplayer \\ (partition_num = 10, \\ replica_factor = 1, \\ vid_type = FIXED_STRING(30)); ## \u9009\u62e9\u56fe\u7a7a\u95f4 basketballplayer nebula> USE basketballplayer; ## \u521b\u5efa Tag player nebula> CREATE TAG player(name string, age int); ## \u521b\u5efa Tag team nebula> CREATE TAG team(name string); ## \u521b\u5efa Edge type follow nebula> CREATE EDGE follow(degree int); ## \u521b\u5efa Edge type serve nebula> CREATE EDGE serve(start_year int, end_year int); \u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u89c1 \u5feb\u901f\u5f00\u59cb \u3002","title":"\u6b65\u9aa4 1\uff1a\u5728NebulaGraph\u4e2d\u521b\u5efa Schema"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-maxcompute/#2","text":"\u7f16\u8bd1 Exchange \u540e\uff0c\u590d\u5236 target/classes/application.conf \u6587\u4ef6\u8bbe\u7f6e MaxCompute \u6570\u636e\u6e90\u76f8\u5173\u7684\u914d\u7f6e\u3002\u5728\u672c\u793a\u4f8b\u4e2d\uff0c\u590d\u5236\u7684\u6587\u4ef6\u540d\u4e3a maxcompute_application.conf \u3002\u5404\u4e2a\u914d\u7f6e\u9879\u7684\u8be6\u7ec6\u8bf4\u660e\u8bf7\u53c2\u89c1 \u914d\u7f6e\u8bf4\u660e \u3002 { # Spark \u76f8\u5173\u914d\u7f6e spark: { app: { name: NebulaGraph Exchange 3.6.0 } driver: { cores: 1 maxResultSize: 1G } cores: { max: 16 } } # NebulaGraph \u76f8\u5173\u914d\u7f6e nebula: { address:{ # \u4ee5\u4e0b\u4e3a NebulaGraph \u7684 Graph \u670d\u52a1\u548c Meta \u670d\u52a1\u6240\u5728\u673a\u5668\u7684 IP \u5730\u5740\u53ca\u7aef\u53e3\u3002 # \u5982\u679c\u6709\u591a\u4e2a\u5730\u5740\uff0c\u683c\u5f0f\u4e3a \"ip1:port\",\"ip2:port\",\"ip3:port\"\u3002 # \u4e0d\u540c\u5730\u5740\u4e4b\u95f4\u4ee5\u82f1\u6587\u9017\u53f7 (,) \u9694\u5f00\u3002 graph:[\"127.0.0.1:9669\"] #\u4efb\u610f\u4e00\u4e2a Meta \u670d\u52a1\u7684\u5730\u5740\u3002 #\u5982\u679c\u60a8\u7684 NebulaGraph \u5728\u865a\u62df\u7f51\u7edc\u4e2d\uff0c\u5982k8s\uff0c\u8bf7\u914d\u7f6e Leader Meta\u7684\u5730\u5740\u3002 meta:[\"127.0.0.1:9559\"] } # \u586b\u5199\u7684\u8d26\u53f7\u5fc5\u987b\u62e5\u6709 NebulaGraph \u76f8\u5e94\u56fe\u7a7a\u95f4\u7684\u5199\u6570\u636e\u6743\u9650\u3002 user: root pswd: nebula # \u586b\u5199 NebulaGraph \u4e2d\u9700\u8981\u5199\u5165\u6570\u636e\u7684\u56fe\u7a7a\u95f4\u540d\u79f0\u3002 space: basketballplayer connection: { timeout: 3000 retry: 3 } execution: { retry: 3 } error: { max: 32 output: /tmp/errors } rate: { limit: 1024 timeout: 1000 } } # \u5904\u7406\u70b9 tags: [ # \u8bbe\u7f6e Tag player \u76f8\u5173\u4fe1\u606f { name: player type: { # \u6307\u5b9a\u6570\u636e\u6e90\u6587\u4ef6\u683c\u5f0f\uff0c\u8bbe\u7f6e\u4e3a MaxCompute\u3002 source: maxcompute # \u6307\u5b9a\u5982\u4f55\u5c06\u70b9\u6570\u636e\u5bfc\u5165NebulaGraph\uff1aClient \u6216 SST\u3002 sink: client } # MaxCompute \u7684\u8868\u540d table:player # MaxCompute \u7684\u9879\u76ee\u540d project:project # MaxCompute \u670d\u52a1\u7684 odpsUrl \u548c tunnelUrl\uff0c # \u5730\u5740\u53ef\u5728 https://help.aliyun.com/document_detail/34951.html \u67e5\u770b\u3002 odpsUrl:\"http://service.cn-hangzhou.maxcompute.aliyun.com/api\" tunnelUrl:\"http://dt.cn-hangzhou.maxcompute.aliyun.com\" # MaxCompute \u670d\u52a1\u7684 accessKeyId \u548c accessKeySecret\u3002 accessKeyId:xxx accessKeySecret:xxx # MaxCompute \u8868\u7684\u5206\u533a\u63cf\u8ff0\uff0c\u8be5\u914d\u7f6e\u53ef\u9009\u3002 partitionSpec:\"dt='partition1'\" # MaxCompute \u7684 Spark \u8fde\u63a5\u5668\u5728\u8bfb\u53d6 MaxCompute \u6570\u636e\u65f6\u4f7f\u7528\u7684\u5206\u533a\u6570\u3002\u9ed8\u8ba4\u4e3a1\uff0c\u8be5\u914d\u7f6e\u53ef\u9009\u3002 numPartitions:100 # \u8bf7\u786e\u4fdd SQL \u8bed\u53e5\u4e2d\u7684\u8868\u540d\u548c\u4e0a\u65b9 table \u7684\u503c\u76f8\u540c\uff0c\u8be5\u914d\u7f6e\u53ef\u9009\u3002 sentence:\"select id, name, age, playerid from player where id < 10\" # \u5728 fields \u91cc\u6307\u5b9a player \u8868\u4e2d\u7684\u5217\u540d\u79f0\uff0c\u5176\u5bf9\u5e94\u7684 value \u4f1a\u4f5c\u4e3a NebulaGraph \u4e2d\u6307\u5b9a\u5c5e\u6027\u3002 # fields \u548c nebula.fields \u91cc\u7684\u914d\u7f6e\u5fc5\u987b\u4e00\u4e00\u5bf9\u5e94\u3002 # \u5982\u679c\u9700\u8981\u6307\u5b9a\u591a\u4e2a\u5217\u540d\u79f0\uff0c\u7528\u82f1\u6587\u9017\u53f7\uff08,\uff09\u9694\u5f00\u3002 fields:[name, age] nebula.fields:[name, age] # \u6307\u5b9a\u8868\u4e2d\u67d0\u4e00\u5217\u6570\u636e\u4e3a NebulaGraph \u4e2d\u70b9 VID \u7684\u6765\u6e90\u3002 vertex:{ field: playerid # udf:{ # separator:\"_\" # oldColNames:[field-0,field-1,field-2] # newColName:new-field # } # \u4e3a VID \u589e\u52a0\u6307\u5b9a\u7684\u524d\u7f00\u3002\u4f8b\u5982 VID \u4e3a 12345\uff0c\u589e\u52a0\u524d\u7f00 tag1 \u540e\u4e3a tag1_12345\u3002\u4e0b\u5212\u7ebf\u65e0\u6cd5\u4fee\u6539\u3002 # prefix:\"tag1\" # \u5bf9 string \u7c7b\u578b\u7684 VID \u8fdb\u884c\u54c8\u5e0c\u5316\u64cd\u4f5c\u3002 # policy:hash } # \u6279\u91cf\u64cd\u4f5c\u7c7b\u578b\uff0c\u5305\u62ec INSERT\u3001UPDATE \u548c DELETE\u3002\u9ed8\u8ba4\u4e3a INSERT\u3002 #writeMode: INSERT # \u6279\u91cf\u5220\u9664\u65f6\u662f\u5426\u5220\u9664\u8be5\u70b9\u5173\u8054\u7684\u51fa\u8fb9\u548c\u5165\u8fb9\u3002`writeMode`\u4e3a`DELETE`\u65f6\u8be5\u53c2\u6570\u751f\u6548\u3002 #deleteEdge: false # \u5355\u6279\u6b21\u5199\u5165 NebulaGraph \u7684\u6570\u636e\u6761\u6570\u3002 batch: 256 # Spark \u5206\u533a\u6570\u91cf partition: 32 } # \u8bbe\u7f6e Tag team \u76f8\u5173\u4fe1\u606f\u3002 { name: team type: { source: maxcompute sink: client } table:team project:project odpsUrl:\"http://service.cn-hangzhou.maxcompute.aliyun.com/api\" tunnelUrl:\"http://dt.cn-hangzhou.maxcompute.aliyun.com\" accessKeyId:xxx accessKeySecret:xxx partitionSpec:\"dt='partition1'\" sentence:\"select id, name, teamid from team where id < 10\" fields:[name] nebula.fields:[name] vertex:{ field: teamid } batch: 256 partition: 32 } ] # \u5904\u7406\u8fb9\u6570\u636e edges: [ # \u8bbe\u7f6e Edge type follow \u76f8\u5173\u4fe1\u606f { # NebulaGraph \u4e2d\u5bf9\u5e94\u7684 Edge type \u540d\u79f0\u3002 name: follow type:{ # \u6307\u5b9a\u6570\u636e\u6e90\u6587\u4ef6\u683c\u5f0f\uff0c\u8bbe\u7f6e\u4e3a MaxCompute\u3002 source:maxcompute # \u6307\u5b9a\u8fb9\u6570\u636e\u5bfc\u5165 NebulaGraph \u7684\u65b9\u5f0f\uff0c # \u6307\u5b9a\u5982\u4f55\u5c06\u70b9\u6570\u636e\u5bfc\u5165NebulaGraph\uff1aClient \u6216 SST\u3002 sink:client } # MaxCompute \u7684\u8868\u540d table:follow # MaxCompute \u7684\u9879\u76ee\u540d project:project # MaxCompute \u670d\u52a1\u7684 odpsUrl \u548c tunnelUrl\uff0c # \u5730\u5740\u53ef\u5728 https://help.aliyun.com/document_detail/34951.html \u67e5\u770b\u3002 odpsUrl:\"http://service.cn-hangzhou.maxcompute.aliyun.com/api\" tunnelUrl:\"http://dt.cn-hangzhou.maxcompute.aliyun.com\" # MaxCompute \u670d\u52a1\u7684 accessKeyId \u548c accessKeySecret\u3002 accessKeyId:xxx accessKeySecret:xxx # MaxCompute \u8868\u7684\u5206\u533a\u63cf\u8ff0\uff0c\u8be5\u914d\u7f6e\u53ef\u9009\u3002 partitionSpec:\"dt='partition1'\" # \u8bf7\u786e\u4fdd SQL \u8bed\u53e5\u4e2d\u7684\u8868\u540d\u548c\u4e0a\u65b9 table \u7684\u503c\u76f8\u540c\uff0c\u8be5\u914d\u7f6e\u53ef\u9009\u3002 sentence:\"select * from follow\" # \u5728 fields \u91cc\u6307\u5b9a follow \u8868\u4e2d\u7684\u5217\u540d\u79f0\uff0c\u5176\u5bf9\u5e94\u7684 value \u4f1a\u4f5c\u4e3a NebulaGraph \u4e2d\u6307\u5b9a\u5c5e\u6027\u3002 # fields \u548c nebula.fields \u91cc\u7684\u914d\u7f6e\u5fc5\u987b\u4e00\u4e00\u5bf9\u5e94\u3002 # \u5982\u679c\u9700\u8981\u6307\u5b9a\u591a\u4e2a\u5217\u540d\u79f0\uff0c\u7528\u82f1\u6587\u9017\u53f7\uff08,\uff09\u9694\u5f00\u3002 fields:[degree] nebula.fields:[degree] # \u5728 source \u91cc\uff0c\u5c06 follow \u8868\u4e2d\u67d0\u4e00\u5217\u4f5c\u4e3a\u8fb9\u7684\u8d77\u59cb\u70b9\u6570\u636e\u6e90\u3002 source:{ field: src_player # udf:{ # separator:\"_\" # oldColNames:[field-0,field-1,field-2] # newColName:new-field # } # \u4e3a VID \u589e\u52a0\u6307\u5b9a\u7684\u524d\u7f00\u3002\u4f8b\u5982 VID \u4e3a 12345\uff0c\u589e\u52a0\u524d\u7f00 tag1 \u540e\u4e3a tag1_12345\u3002\u4e0b\u5212\u7ebf\u65e0\u6cd5\u4fee\u6539\u3002 # prefix:\"tag1\" # \u5bf9 string \u7c7b\u578b\u7684 VID \u8fdb\u884c\u54c8\u5e0c\u5316\u64cd\u4f5c\u3002 # policy:hash } # \u5728 target \u91cc\uff0c\u5c06 follow \u8868\u4e2d\u67d0\u4e00\u5217\u4f5c\u4e3a\u8fb9\u7684\u76ee\u7684\u70b9\u6570\u636e\u6e90\u3002 target:{ field: dst_player # udf:{ # separator:\"_\" # oldColNames:[field-0,field-1,field-2] # newColName:new-field # } # \u4e3a VID \u589e\u52a0\u6307\u5b9a\u7684\u524d\u7f00\u3002\u4f8b\u5982 VID \u4e3a 12345\uff0c\u589e\u52a0\u524d\u7f00 tag1 \u540e\u4e3a tag1_12345\u3002\u4e0b\u5212\u7ebf\u65e0\u6cd5\u4fee\u6539\u3002 # prefix:\"tag1\" # \u5bf9 string \u7c7b\u578b\u7684 VID \u8fdb\u884c\u54c8\u5e0c\u5316\u64cd\u4f5c\u3002 # policy:hash } # \u6307\u5b9a\u4e00\u4e2a\u5217\u4f5c\u4e3a rank \u7684\u6e90\uff08\u53ef\u9009\uff09\u3002 #ranking: rank # \u6279\u91cf\u64cd\u4f5c\u7c7b\u578b\uff0c\u5305\u62ec INSERT\u3001UPDATE \u548c DELETE\u3002\u9ed8\u8ba4\u4e3a INSERT\u3002 #writeMode: INSERT # Spark \u5206\u533a\u6570\u91cf partition:10 # \u5355\u6279\u6b21\u5199\u5165 NebulaGraph \u7684\u6570\u636e\u6761\u6570\u3002 batch:10 } # \u8bbe\u7f6e Edge type serve \u76f8\u5173\u4fe1\u606f { name: serve type:{ source:maxcompute sink:client } table:serve project:project odpsUrl:\"http://service.cn-hangzhou.maxcompute.aliyun.com/api\" tunnelUrl:\"http://dt.cn-hangzhou.maxcompute.aliyun.com\" accessKeyId:xxx accessKeySecret:xxx partitionSpec:\"dt='partition1'\" sentence:\"select * from serve\" fields:[start_year,end_year] nebula.fields:[start_year,end_year] source:{ field: playerid } target:{ field: teamid } # \u6307\u5b9a\u4e00\u4e2a\u5217\u4f5c\u4e3a rank \u7684\u6e90\uff08\u53ef\u9009\uff09\u3002 #ranking: rank partition:10 batch:10 } ] }","title":"\u6b65\u9aa4 2\uff1a\u4fee\u6539\u914d\u7f6e\u6587\u4ef6"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-maxcompute/#3nebulagraph","text":"\u8fd0\u884c\u5982\u4e0b\u547d\u4ee4\u5c06 MaxCompute \u6570\u636e\u5bfc\u5165\u5230NebulaGraph\u4e2d\u3002\u5173\u4e8e\u53c2\u6570\u7684\u8bf4\u660e\uff0c\u8bf7\u53c2\u89c1 \u5bfc\u5165\u547d\u4ee4\u53c2\u6570 \u3002 ${ SPARK_HOME } /bin/spark-submit --master \"local\" --class com.vesoft.nebula.exchange.Exchange <nebula-exchange-3.6.0.jar_path> -c <maxcompute_application.conf_path> Note JAR \u5305\u6709\u4e24\u79cd\u83b7\u53d6\u65b9\u5f0f\uff1a \u81ea\u884c\u7f16\u8bd1 \u6216\u8005\u4ece maven \u4ed3\u5e93\u4e0b\u8f7d\u3002 \u793a\u4f8b\uff1a ${ SPARK_HOME } /bin/spark-submit --master \"local\" --class com.vesoft.nebula.exchange.Exchange /root/nebula-exchange/nebula-exchange/target/nebula-exchange-3.6.0.jar -c /root/nebula-exchange/nebula-exchange/target/classes/maxcompute_application.conf \u7528\u6237\u53ef\u4ee5\u5728\u8fd4\u56de\u4fe1\u606f\u4e2d\u641c\u7d22 batchSuccess.<tag_name/edge_name> \uff0c\u786e\u8ba4\u6210\u529f\u7684\u6570\u91cf\u3002\u4f8b\u5982 batchSuccess.follow: 300 \u3002","title":"\u6b65\u9aa4 3\uff1a\u5411NebulaGraph\u5bfc\u5165\u6570\u636e"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-maxcompute/#4","text":"\u7528\u6237\u53ef\u4ee5\u5728NebulaGraph\u5ba2\u6237\u7aef\uff08\u4f8b\u5982 NebulaGraph Studio\uff09\u4e2d\u6267\u884c\u67e5\u8be2\u8bed\u53e5\uff0c\u786e\u8ba4\u6570\u636e\u662f\u5426\u5df2\u5bfc\u5165\u3002\u4f8b\u5982\uff1a LOOKUP ON player YIELD id(vertex); \u7528\u6237\u4e5f\u53ef\u4ee5\u4f7f\u7528\u547d\u4ee4 SHOW STATS \u67e5\u770b\u7edf\u8ba1\u6570\u636e\u3002","title":"\u6b65\u9aa4 4\uff1a\uff08\u53ef\u9009\uff09\u9a8c\u8bc1\u6570\u636e"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-maxcompute/#5nebulagraph","text":"\u5bfc\u5165\u6570\u636e\u540e\uff0c\u7528\u6237\u53ef\u4ee5\u5728NebulaGraph\u4e2d\u91cd\u65b0\u521b\u5efa\u5e76\u91cd\u5efa\u7d22\u5f15\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1 \u7d22\u5f15\u4ecb\u7ecd \u3002","title":"\u6b65\u9aa4 5\uff1a\uff08\u5982\u6709\uff09\u5728NebulaGraph\u4e2d\u91cd\u5efa\u7d22\u5f15"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-mysql/","text":"\u5bfc\u5165 MySQL/PostgreSQL \u6570\u636e \u00b6 \u672c\u6587\u4ee5\u4e00\u4e2a\u793a\u4f8b\u8bf4\u660e\u5982\u4f55\u4f7f\u7528 Exchange \u5c06\u5b58\u50a8\u5728 MySQL \u4e0a\u7684\u6570\u636e\u5bfc\u5165NebulaGraph\uff0c\u4e5f\u9002\u7528\u4e8e\u4ece PostgreSQL \u5bfc\u51fa\u6570\u636e\u5230NebulaGraph\u3002 \u6570\u636e\u96c6 \u00b6 \u672c\u6587\u4ee5 basketballplayer \u6570\u636e\u96c6 \u4e3a\u4f8b\u3002 \u5728\u672c\u793a\u4f8b\u4e2d\uff0c\u8be5\u6570\u636e\u96c6\u5df2\u7ecf\u5b58\u5165 MySQL \u4e2d\u540d\u4e3a basketball \u7684\u6570\u636e\u5e93\u4e2d\uff0c\u4ee5 player \u3001 team \u3001 follow \u548c serve \u56db\u4e2a\u8868\u5b58\u50a8\u4e86\u6240\u6709\u70b9\u548c\u8fb9\u7684\u4fe1\u606f\u3002\u4ee5\u4e0b\u4e3a\u5404\u4e2a\u8868\u7684\u7ed3\u6784\u3002 mysql > desc player ; + ----------+-------------+------+-----+---------+-------+ | Field | Type | Null | Key | Default | Extra | + ----------+-------------+------+-----+---------+-------+ | playerid | varchar ( 30 ) | YES | | NULL | | | age | int | YES | | NULL | | | name | varchar ( 30 ) | YES | | NULL | | + ----------+-------------+------+-----+---------+-------+ mysql > desc team ; + --------+-------------+------+-----+---------+-------+ | Field | Type | Null | Key | Default | Extra | + --------+-------------+------+-----+---------+-------+ | teamid | varchar ( 30 ) | YES | | NULL | | | name | varchar ( 30 ) | YES | | NULL | | + --------+-------------+------+-----+---------+-------+ mysql > desc follow ; + ------------+-------------+------+-----+---------+-------+ | Field | Type | Null | Key | Default | Extra | + ------------+-------------+------+-----+---------+-------+ | src_player | varchar ( 30 ) | YES | | NULL | | | dst_player | varchar ( 30 ) | YES | | NULL | | | degree | int | YES | | NULL | | + ------------+-------------+------+-----+---------+-------+ mysql > desc serve ; + ------------+-------------+------+-----+---------+-------+ | Field | Type | Null | Key | Default | Extra | + ------------+-------------+------+-----+---------+-------+ | playerid | varchar ( 30 ) | YES | | NULL | | | teamid | varchar ( 30 ) | YES | | NULL | | | start_year | int | YES | | NULL | | | end_year | int | YES | | NULL | | + ------------+-------------+------+-----+---------+-------+ \u73af\u5883\u914d\u7f6e \u00b6 \u672c\u6587\u793a\u4f8b\u5728 MacOS \u4e0b\u5b8c\u6210\uff0c\u4ee5\u4e0b\u662f\u76f8\u5173\u7684\u73af\u5883\u914d\u7f6e\u4fe1\u606f\uff1a \u786c\u4ef6\u89c4\u683c\uff1a CPU\uff1a1.7 GHz Quad-Core Intel Core i7 \u5185\u5b58\uff1a16 GB Spark\uff1a2.4.7\uff0c\u5355\u673a\u7248 MySQL\uff1a 8.0.23 NebulaGraph\uff1a3.6.0\u3002 \u524d\u63d0\u6761\u4ef6 \u00b6 \u5f00\u59cb\u5bfc\u5165\u6570\u636e\u4e4b\u524d\uff0c\u7528\u6237\u9700\u8981\u786e\u8ba4\u4ee5\u4e0b\u4fe1\u606f\uff1a \u5df2\u7ecf \u5b89\u88c5\u90e8\u7f72NebulaGraph \u5e76\u83b7\u53d6\u5982\u4e0b\u4fe1\u606f\uff1a Graph \u670d\u52a1\u548c Meta \u670d\u52a1\u7684\u7684 IP \u5730\u5740\u548c\u7aef\u53e3\u3002 \u62e5\u6709NebulaGraph\u5199\u6743\u9650\u7684\u7528\u6237\u540d\u548c\u5bc6\u7801\u3002 \u5df2\u7ecf\u7f16\u8bd1 Exchange\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1 \u7f16\u8bd1 Exchange \u3002\u672c\u793a\u4f8b\u4e2d\u4f7f\u7528 Exchange 3.6.0\u3002 \u5df2\u7ecf\u5b89\u88c5 Spark\u3002 mysql-connector-java-xxx.jar \u5df2\u7ecf\u4e0b\u8f7d\u5e76\u653e\u7f6e\u5728 Spark \u7684 SPARK_HOME/jars \u76ee\u5f55\u4e0b\u3002 \u4e86\u89e3NebulaGraph\u4e2d\u521b\u5efa Schema \u7684\u4fe1\u606f\uff0c\u5305\u62ec Tag \u548c Edge type \u7684\u540d\u79f0\u3001\u5c5e\u6027\u7b49\u3002 \u5df2\u7ecf\u5b89\u88c5\u5e76\u5f00\u542f Hadoop \u670d\u52a1\u3002 \u6ce8\u610f\u4e8b\u9879 \u00b6 nebula-exchange_spark_2.2 \u4ec5\u652f\u6301\u5355\u8868\u67e5\u8be2\uff0c\u4e0d\u652f\u6301\u591a\u8868\u67e5\u8be2\u3002 \u64cd\u4f5c\u6b65\u9aa4 \u00b6 \u6b65\u9aa4 1\uff1a\u5728NebulaGraph\u4e2d\u521b\u5efa Schema \u00b6 \u5206\u6790\u6570\u636e\uff0c\u6309\u4ee5\u4e0b\u6b65\u9aa4\u5728NebulaGraph\u4e2d\u521b\u5efa Schema\uff1a \u786e\u8ba4 Schema \u8981\u7d20\u3002NebulaGraph\u4e2d\u7684 Schema \u8981\u7d20\u5982\u4e0b\u8868\u6240\u793a\u3002 \u8981\u7d20 \u540d\u79f0 \u5c5e\u6027 Tag player name string, age int Tag team name string Edge Type follow degree int Edge Type serve start_year int, end_year int \u5728NebulaGraph\u4e2d\u521b\u5efa\u4e00\u4e2a\u56fe\u7a7a\u95f4 basketballplayer \uff0c\u5e76\u521b\u5efa\u4e00\u4e2a Schema\uff0c\u5982\u4e0b\u6240\u793a\u3002 ## \u521b\u5efa\u56fe\u7a7a\u95f4 nebula> CREATE SPACE basketballplayer \\ (partition_num = 10, \\ replica_factor = 1, \\ vid_type = FIXED_STRING(30)); ## \u9009\u62e9\u56fe\u7a7a\u95f4 basketballplayer nebula> USE basketballplayer; ## \u521b\u5efa Tag player nebula> CREATE TAG player(name string, age int); ## \u521b\u5efa Tag team nebula> CREATE TAG team(name string); ## \u521b\u5efa Edge type follow nebula> CREATE EDGE follow(degree int); ## \u521b\u5efa Edge type serve nebula> CREATE EDGE serve(start_year int, end_year int); \u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u89c1 \u5feb\u901f\u5f00\u59cb \u3002 \u6b65\u9aa4 2\uff1a\u4fee\u6539\u914d\u7f6e\u6587\u4ef6 \u00b6 \u7f16\u8bd1 Exchange \u540e\uff0c\u590d\u5236 target/classes/application.conf \u6587\u4ef6\u8bbe\u7f6e MySQL \u6570\u636e\u6e90\u76f8\u5173\u7684\u914d\u7f6e\u3002\u5728\u672c\u793a\u4f8b\u4e2d\uff0c\u590d\u5236\u7684\u6587\u4ef6\u540d\u4e3a mysql_application.conf \u3002\u5404\u4e2a\u914d\u7f6e\u9879\u7684\u8be6\u7ec6\u8bf4\u660e\u8bf7\u53c2\u89c1 \u914d\u7f6e\u8bf4\u660e \u3002 { # Spark \u76f8\u5173\u914d\u7f6e spark: { app: { name: NebulaGraph Exchange 3.6.0 } driver: { cores: 1 maxResultSize: 1G } cores: { max: 16 } } # NebulaGraph \u76f8\u5173\u914d\u7f6e nebula: { address:{ # \u4ee5\u4e0b\u4e3a NebulaGraph \u7684 Graph \u670d\u52a1\u548c Meta \u670d\u52a1\u6240\u5728\u673a\u5668\u7684 IP \u5730\u5740\u53ca\u7aef\u53e3\u3002 # \u5982\u679c\u6709\u591a\u4e2a\u5730\u5740\uff0c\u683c\u5f0f\u4e3a \"ip1:port\",\"ip2:port\",\"ip3:port\"\u3002 # \u4e0d\u540c\u5730\u5740\u4e4b\u95f4\u4ee5\u82f1\u6587\u9017\u53f7 (,) \u9694\u5f00\u3002 graph:[\"127.0.0.1:9669\"] #\u4efb\u610f\u4e00\u4e2a Meta \u670d\u52a1\u7684\u5730\u5740\u3002 #\u5982\u679c\u60a8\u7684 NebulaGraph \u5728\u865a\u62df\u7f51\u7edc\u4e2d\uff0c\u5982k8s\uff0c\u8bf7\u914d\u7f6e Leader Meta\u7684\u5730\u5740\u3002 meta:[\"127.0.0.1:9559\"] } # \u586b\u5199\u7684\u8d26\u53f7\u5fc5\u987b\u62e5\u6709 NebulaGraph \u76f8\u5e94\u56fe\u7a7a\u95f4\u7684\u5199\u6570\u636e\u6743\u9650\u3002 user: root pswd: nebula # \u586b\u5199 NebulaGraph \u4e2d\u9700\u8981\u5199\u5165\u6570\u636e\u7684\u56fe\u7a7a\u95f4\u540d\u79f0\u3002 space: basketballplayer connection: { timeout: 3000 retry: 3 } execution: { retry: 3 } error: { max: 32 output: /tmp/errors } rate: { limit: 1024 timeout: 1000 } } # \u5904\u7406\u70b9 tags: [ # \u8bbe\u7f6e Tag player \u76f8\u5173\u4fe1\u606f\u3002 { # NebulaGraph \u4e2d\u5bf9\u5e94\u7684 Tag \u540d\u79f0\u3002 name: player type: { # \u6307\u5b9a\u6570\u636e\u6e90\u6587\u4ef6\u683c\u5f0f\uff0c\u8bbe\u7f6e\u4e3a MySQL\u3002 source: mysql # \u6307\u5b9a\u5982\u4f55\u5c06\u70b9\u6570\u636e\u5bfc\u5165NebulaGraph\uff1aClient \u6216 SST\u3002 sink: client } host:192.168.*.* port:3306 user:\"test\" password:\"123456\" database:\"basketball\" # \u626b\u63cf\u5355\u4e2a\u8868\u8bfb\u53d6\u6570\u636e\u3002 # nebula-exchange_spark_2.2 \u5fc5\u987b\u914d\u7f6e\u8be5\u53c2\u6570\u3002\u4e0d\u652f\u6301\u914d\u7f6e sentence\u3002 # nebula-exchange_spark_2.4 \u548c nebula-exchange_spark_3.0 \u53ef\u4ee5\u914d\u7f6e\u8be5\u53c2\u6570\uff0c\u4f46\u662f\u4e0d\u80fd\u548c sentence \u540c\u65f6\u914d\u7f6e\u3002 table:\"basketball.player\" # \u901a\u8fc7\u67e5\u8be2\u8bed\u53e5\u8bfb\u53d6\u6570\u636e\u3002 # nebula-exchange_spark_2.2 \u4e0d\u652f\u6301\u8be5\u53c2\u6570\u3002 # nebula-exchange_spark_2.4 \u548c nebula-exchange_spark_3.0 \u53ef\u4ee5\u914d\u7f6e\u8be5\u53c2\u6570\uff0c\u4f46\u662f\u4e0d\u80fd\u548c table \u540c\u65f6\u914d\u7f6e\u3002\u652f\u6301\u591a\u8868\u67e5\u8be2\u3002 # sentence: \"select * from people, player, team\" # \u5728 fields \u91cc\u6307\u5b9a player \u8868\u4e2d\u7684\u5217\u540d\u79f0\uff0c\u5176\u5bf9\u5e94\u7684 value \u4f1a\u4f5c\u4e3a NebulaGraph \u4e2d\u6307\u5b9a\u5c5e\u6027\u3002 # fields \u548c nebula.fields \u91cc\u7684\u914d\u7f6e\u5fc5\u987b\u4e00\u4e00\u5bf9\u5e94\u3002 # \u5982\u679c\u9700\u8981\u6307\u5b9a\u591a\u4e2a\u5217\u540d\u79f0\uff0c\u7528\u82f1\u6587\u9017\u53f7\uff08,\uff09\u9694\u5f00\u3002 fields: [age,name] nebula.fields: [age,name] # \u6307\u5b9a\u8868\u4e2d\u67d0\u4e00\u5217\u6570\u636e\u4e3a NebulaGraph \u4e2d\u70b9 VID \u7684\u6765\u6e90\u3002 vertex: { field:playerid # udf:{ # separator:\"_\" # oldColNames:[field-0,field-1,field-2] # newColName:new-field # } # \u4e3a VID \u589e\u52a0\u6307\u5b9a\u7684\u524d\u7f00\u3002\u4f8b\u5982 VID \u4e3a 12345\uff0c\u589e\u52a0\u524d\u7f00 tag1 \u540e\u4e3a tag1_12345\u3002\u4e0b\u5212\u7ebf\u65e0\u6cd5\u4fee\u6539\u3002 # prefix:\"tag1\" # \u5bf9 string \u7c7b\u578b\u7684 VID \u8fdb\u884c\u54c8\u5e0c\u5316\u64cd\u4f5c\u3002 # policy:hash } # \u6279\u91cf\u64cd\u4f5c\u7c7b\u578b\uff0c\u5305\u62ec INSERT\u3001UPDATE \u548c DELETE\u3002\u9ed8\u8ba4\u4e3a INSERT\u3002 #writeMode: INSERT # \u6279\u91cf\u5220\u9664\u65f6\u662f\u5426\u5220\u9664\u8be5\u70b9\u5173\u8054\u7684\u51fa\u8fb9\u548c\u5165\u8fb9\u3002`writeMode`\u4e3a`DELETE`\u65f6\u8be5\u53c2\u6570\u751f\u6548\u3002 #deleteEdge: false # \u5355\u6279\u6b21\u5199\u5165 NebulaGraph \u7684\u6570\u636e\u6761\u6570\u3002 batch: 256 # Spark \u5206\u533a\u6570\u91cf partition: 32 } # \u8bbe\u7f6e Tag team \u76f8\u5173\u4fe1\u606f\u3002 { name: team type: { source: mysql sink: client } host:192.168.*.* port:3306 database:\"basketball\" table:\"team\" user:\"test\" password:\"123456\" sentence:\"select teamid, name from team order by teamid\" fields: [name] nebula.fields: [name] vertex: { field: teamid } batch: 256 partition: 32 } ] # \u5904\u7406\u8fb9\u6570\u636e edges: [ # \u8bbe\u7f6e Edge type follow \u76f8\u5173\u4fe1\u606f { # NebulaGraph \u4e2d\u5bf9\u5e94\u7684 Edge type \u540d\u79f0\u3002 name: follow type: { # \u6307\u5b9a\u6570\u636e\u6e90\u6587\u4ef6\u683c\u5f0f\uff0c\u8bbe\u7f6e\u4e3a MySQL\u3002 source: mysql # \u6307\u5b9a\u8fb9\u6570\u636e\u5bfc\u5165 NebulaGraph \u7684\u65b9\u5f0f\uff0c # \u6307\u5b9a\u5982\u4f55\u5c06\u70b9\u6570\u636e\u5bfc\u5165NebulaGraph\uff1aClient \u6216 SST\u3002 sink: client } host:192.168.*.* port:3306 user:\"test\" password:\"123456\" database:\"basketball\" # \u626b\u63cf\u5355\u4e2a\u8868\u8bfb\u53d6\u6570\u636e\u3002 # nebula-exchange_spark_2.2 \u5fc5\u987b\u914d\u7f6e\u8be5\u53c2\u6570\u3002\u4e0d\u652f\u6301\u914d\u7f6e sentence\u3002 # nebula-exchange_spark_2.4 \u548c nebula-exchange_spark_3.0 \u53ef\u4ee5\u914d\u7f6e\u8be5\u53c2\u6570\uff0c\u4f46\u662f\u4e0d\u80fd\u548c sentence \u540c\u65f6\u914d\u7f6e\u3002 table:\"basketball.follow\" # \u901a\u8fc7\u67e5\u8be2\u8bed\u53e5\u8bfb\u53d6\u6570\u636e\u3002 # nebula-exchange_spark_2.2 \u4e0d\u652f\u6301\u8be5\u53c2\u6570\u3002 # nebula-exchange_spark_2.4 \u548c nebula-exchange_spark_3.0 \u53ef\u4ee5\u914d\u7f6e\u8be5\u53c2\u6570\uff0c\u4f46\u662f\u4e0d\u80fd\u548c table \u540c\u65f6\u914d\u7f6e\u3002\u652f\u6301\u591a\u8868\u67e5\u8be2\u3002 # sentence: \"select * from follow, serve\" # \u5728 fields \u91cc\u6307\u5b9a follow \u8868\u4e2d\u7684\u5217\u540d\u79f0\uff0c\u5176\u5bf9\u5e94\u7684 value \u4f1a\u4f5c\u4e3a NebulaGraph \u4e2d\u6307\u5b9a\u5c5e\u6027\u3002 # fields \u548c nebula.fields \u91cc\u7684\u914d\u7f6e\u5fc5\u987b\u4e00\u4e00\u5bf9\u5e94\u3002 # \u5982\u679c\u9700\u8981\u6307\u5b9a\u591a\u4e2a\u5217\u540d\u79f0\uff0c\u7528\u82f1\u6587\u9017\u53f7\uff08,\uff09\u9694\u5f00\u3002 fields: [degree] nebula.fields: [degree] # \u5728 source \u91cc\uff0c\u5c06 follow \u8868\u4e2d\u67d0\u4e00\u5217\u4f5c\u4e3a\u8fb9\u7684\u8d77\u59cb\u70b9\u6570\u636e\u6e90\u3002 # \u5728 target \u91cc\uff0c\u5c06 follow \u8868\u4e2d\u67d0\u4e00\u5217\u4f5c\u4e3a\u8fb9\u7684\u76ee\u7684\u70b9\u6570\u636e\u6e90\u3002 source: { field: src_player # udf:{ # separator:\"_\" # oldColNames:[field-0,field-1,field-2] # newColName:new-field # } # \u4e3a VID \u589e\u52a0\u6307\u5b9a\u7684\u524d\u7f00\u3002\u4f8b\u5982 VID \u4e3a 12345\uff0c\u589e\u52a0\u524d\u7f00 tag1 \u540e\u4e3a tag1_12345\u3002\u4e0b\u5212\u7ebf\u65e0\u6cd5\u4fee\u6539\u3002 # prefix:\"tag1\" # \u5bf9 string \u7c7b\u578b\u7684 VID \u8fdb\u884c\u54c8\u5e0c\u5316\u64cd\u4f5c\u3002 # policy:hash } target: { field: dst_player # udf:{ # separator:\"_\" # oldColNames:[field-0,field-1,field-2] # newColName:new-field # } # \u4e3a VID \u589e\u52a0\u6307\u5b9a\u7684\u524d\u7f00\u3002\u4f8b\u5982 VID \u4e3a 12345\uff0c\u589e\u52a0\u524d\u7f00 tag1 \u540e\u4e3a tag1_12345\u3002\u4e0b\u5212\u7ebf\u65e0\u6cd5\u4fee\u6539\u3002 # prefix:\"tag1\" # \u5bf9 string \u7c7b\u578b\u7684 VID \u8fdb\u884c\u54c8\u5e0c\u5316\u64cd\u4f5c\u3002 # policy:hash } # \u6307\u5b9a\u4e00\u4e2a\u5217\u4f5c\u4e3a rank \u7684\u6e90\uff08\u53ef\u9009\uff09\u3002 #ranking: rank # \u6279\u91cf\u64cd\u4f5c\u7c7b\u578b\uff0c\u5305\u62ec INSERT\u3001UPDATE \u548c DELETE\u3002\u9ed8\u8ba4\u4e3a INSERT\u3002 #writeMode: INSERT # \u5355\u6279\u6b21\u5199\u5165 NebulaGraph \u7684\u6570\u636e\u6761\u6570\u3002 batch: 256 # Spark \u5206\u533a\u6570\u91cf partition: 32 } # \u8bbe\u7f6e Edge type serve \u76f8\u5173\u4fe1\u606f { name: serve type: { source: mysql sink: client } host:192.168.*.* port:3306 database:\"basketball\" table:\"serve\" user:\"test\" password:\"123456\" sentence:\"select playerid,teamid,start_year,end_year from serve order by playerid\" fields: [start_year,end_year] nebula.fields: [start_year,end_year] source: { field: playerid } target: { field: teamid } # \u6307\u5b9a\u4e00\u4e2a\u5217\u4f5c\u4e3a rank \u7684\u6e90\uff08\u53ef\u9009\uff09\u3002 #ranking: rank batch: 256 partition: 32 } ] } \u6b65\u9aa4 3\uff1a\u5411NebulaGraph\u5bfc\u5165\u6570\u636e \u00b6 \u8fd0\u884c\u5982\u4e0b\u547d\u4ee4\u5c06 MySQL \u6570\u636e\u5bfc\u5165\u5230NebulaGraph\u4e2d\u3002\u5173\u4e8e\u53c2\u6570\u7684\u8bf4\u660e\uff0c\u8bf7\u53c2\u89c1 \u5bfc\u5165\u547d\u4ee4\u53c2\u6570 \u3002 ${ SPARK_HOME } /bin/spark-submit --master \"local\" --class com.vesoft.nebula.exchange.Exchange <nebula-exchange-3.6.0.jar_path> -c <mysql_application.conf_path> Note JAR \u5305\u6709\u4e24\u79cd\u83b7\u53d6\u65b9\u5f0f\uff1a \u81ea\u884c\u7f16\u8bd1 \u6216\u8005\u4ece maven \u4ed3\u5e93\u4e0b\u8f7d\u3002 \u793a\u4f8b\uff1a ${ SPARK_HOME } /bin/spark-submit --master \"local\" --class com.vesoft.nebula.exchange.Exchange /root/nebula-exchange/nebula-exchange/target/nebula-exchange-3.6.0.jar -c /root/nebula-exchange/nebula-exchange/target/classes/mysql_application.conf \u7528\u6237\u53ef\u4ee5\u5728\u8fd4\u56de\u4fe1\u606f\u4e2d\u641c\u7d22 batchSuccess.<tag_name/edge_name> \uff0c\u786e\u8ba4\u6210\u529f\u7684\u6570\u91cf\u3002\u4f8b\u5982 batchSuccess.follow: 300 \u3002 \u6b65\u9aa4 4\uff1a\uff08\u53ef\u9009\uff09\u9a8c\u8bc1\u6570\u636e \u00b6 \u7528\u6237\u53ef\u4ee5\u5728NebulaGraph\u5ba2\u6237\u7aef\uff08\u4f8b\u5982 NebulaGraph Studio\uff09\u4e2d\u6267\u884c\u67e5\u8be2\u8bed\u53e5\uff0c\u786e\u8ba4\u6570\u636e\u662f\u5426\u5df2\u5bfc\u5165\u3002\u4f8b\u5982\uff1a LOOKUP ON player YIELD id(vertex); \u7528\u6237\u4e5f\u53ef\u4ee5\u4f7f\u7528\u547d\u4ee4 SHOW STATS \u67e5\u770b\u7edf\u8ba1\u6570\u636e\u3002 \u6b65\u9aa4 5\uff1a\uff08\u5982\u6709\uff09\u5728NebulaGraph\u4e2d\u91cd\u5efa\u7d22\u5f15 \u00b6 \u5bfc\u5165\u6570\u636e\u540e\uff0c\u7528\u6237\u53ef\u4ee5\u5728NebulaGraph\u4e2d\u91cd\u65b0\u521b\u5efa\u5e76\u91cd\u5efa\u7d22\u5f15\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1 \u7d22\u5f15\u4ecb\u7ecd \u3002","title":"\u5bfc\u5165 MySQL/PostgreSQL \u6570\u636e"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-mysql/#mysqlpostgresql","text":"\u672c\u6587\u4ee5\u4e00\u4e2a\u793a\u4f8b\u8bf4\u660e\u5982\u4f55\u4f7f\u7528 Exchange \u5c06\u5b58\u50a8\u5728 MySQL \u4e0a\u7684\u6570\u636e\u5bfc\u5165NebulaGraph\uff0c\u4e5f\u9002\u7528\u4e8e\u4ece PostgreSQL \u5bfc\u51fa\u6570\u636e\u5230NebulaGraph\u3002","title":"\u5bfc\u5165 MySQL/PostgreSQL \u6570\u636e"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-mysql/#_1","text":"\u672c\u6587\u4ee5 basketballplayer \u6570\u636e\u96c6 \u4e3a\u4f8b\u3002 \u5728\u672c\u793a\u4f8b\u4e2d\uff0c\u8be5\u6570\u636e\u96c6\u5df2\u7ecf\u5b58\u5165 MySQL \u4e2d\u540d\u4e3a basketball \u7684\u6570\u636e\u5e93\u4e2d\uff0c\u4ee5 player \u3001 team \u3001 follow \u548c serve \u56db\u4e2a\u8868\u5b58\u50a8\u4e86\u6240\u6709\u70b9\u548c\u8fb9\u7684\u4fe1\u606f\u3002\u4ee5\u4e0b\u4e3a\u5404\u4e2a\u8868\u7684\u7ed3\u6784\u3002 mysql > desc player ; + ----------+-------------+------+-----+---------+-------+ | Field | Type | Null | Key | Default | Extra | + ----------+-------------+------+-----+---------+-------+ | playerid | varchar ( 30 ) | YES | | NULL | | | age | int | YES | | NULL | | | name | varchar ( 30 ) | YES | | NULL | | + ----------+-------------+------+-----+---------+-------+ mysql > desc team ; + --------+-------------+------+-----+---------+-------+ | Field | Type | Null | Key | Default | Extra | + --------+-------------+------+-----+---------+-------+ | teamid | varchar ( 30 ) | YES | | NULL | | | name | varchar ( 30 ) | YES | | NULL | | + --------+-------------+------+-----+---------+-------+ mysql > desc follow ; + ------------+-------------+------+-----+---------+-------+ | Field | Type | Null | Key | Default | Extra | + ------------+-------------+------+-----+---------+-------+ | src_player | varchar ( 30 ) | YES | | NULL | | | dst_player | varchar ( 30 ) | YES | | NULL | | | degree | int | YES | | NULL | | + ------------+-------------+------+-----+---------+-------+ mysql > desc serve ; + ------------+-------------+------+-----+---------+-------+ | Field | Type | Null | Key | Default | Extra | + ------------+-------------+------+-----+---------+-------+ | playerid | varchar ( 30 ) | YES | | NULL | | | teamid | varchar ( 30 ) | YES | | NULL | | | start_year | int | YES | | NULL | | | end_year | int | YES | | NULL | | + ------------+-------------+------+-----+---------+-------+","title":"\u6570\u636e\u96c6"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-mysql/#_2","text":"\u672c\u6587\u793a\u4f8b\u5728 MacOS \u4e0b\u5b8c\u6210\uff0c\u4ee5\u4e0b\u662f\u76f8\u5173\u7684\u73af\u5883\u914d\u7f6e\u4fe1\u606f\uff1a \u786c\u4ef6\u89c4\u683c\uff1a CPU\uff1a1.7 GHz Quad-Core Intel Core i7 \u5185\u5b58\uff1a16 GB Spark\uff1a2.4.7\uff0c\u5355\u673a\u7248 MySQL\uff1a 8.0.23 NebulaGraph\uff1a3.6.0\u3002","title":"\u73af\u5883\u914d\u7f6e"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-mysql/#_3","text":"\u5f00\u59cb\u5bfc\u5165\u6570\u636e\u4e4b\u524d\uff0c\u7528\u6237\u9700\u8981\u786e\u8ba4\u4ee5\u4e0b\u4fe1\u606f\uff1a \u5df2\u7ecf \u5b89\u88c5\u90e8\u7f72NebulaGraph \u5e76\u83b7\u53d6\u5982\u4e0b\u4fe1\u606f\uff1a Graph \u670d\u52a1\u548c Meta \u670d\u52a1\u7684\u7684 IP \u5730\u5740\u548c\u7aef\u53e3\u3002 \u62e5\u6709NebulaGraph\u5199\u6743\u9650\u7684\u7528\u6237\u540d\u548c\u5bc6\u7801\u3002 \u5df2\u7ecf\u7f16\u8bd1 Exchange\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1 \u7f16\u8bd1 Exchange \u3002\u672c\u793a\u4f8b\u4e2d\u4f7f\u7528 Exchange 3.6.0\u3002 \u5df2\u7ecf\u5b89\u88c5 Spark\u3002 mysql-connector-java-xxx.jar \u5df2\u7ecf\u4e0b\u8f7d\u5e76\u653e\u7f6e\u5728 Spark \u7684 SPARK_HOME/jars \u76ee\u5f55\u4e0b\u3002 \u4e86\u89e3NebulaGraph\u4e2d\u521b\u5efa Schema \u7684\u4fe1\u606f\uff0c\u5305\u62ec Tag \u548c Edge type \u7684\u540d\u79f0\u3001\u5c5e\u6027\u7b49\u3002 \u5df2\u7ecf\u5b89\u88c5\u5e76\u5f00\u542f Hadoop \u670d\u52a1\u3002","title":"\u524d\u63d0\u6761\u4ef6"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-mysql/#_4","text":"nebula-exchange_spark_2.2 \u4ec5\u652f\u6301\u5355\u8868\u67e5\u8be2\uff0c\u4e0d\u652f\u6301\u591a\u8868\u67e5\u8be2\u3002","title":"\u6ce8\u610f\u4e8b\u9879"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-mysql/#_5","text":"","title":"\u64cd\u4f5c\u6b65\u9aa4"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-mysql/#1nebulagraph_schema","text":"\u5206\u6790\u6570\u636e\uff0c\u6309\u4ee5\u4e0b\u6b65\u9aa4\u5728NebulaGraph\u4e2d\u521b\u5efa Schema\uff1a \u786e\u8ba4 Schema \u8981\u7d20\u3002NebulaGraph\u4e2d\u7684 Schema \u8981\u7d20\u5982\u4e0b\u8868\u6240\u793a\u3002 \u8981\u7d20 \u540d\u79f0 \u5c5e\u6027 Tag player name string, age int Tag team name string Edge Type follow degree int Edge Type serve start_year int, end_year int \u5728NebulaGraph\u4e2d\u521b\u5efa\u4e00\u4e2a\u56fe\u7a7a\u95f4 basketballplayer \uff0c\u5e76\u521b\u5efa\u4e00\u4e2a Schema\uff0c\u5982\u4e0b\u6240\u793a\u3002 ## \u521b\u5efa\u56fe\u7a7a\u95f4 nebula> CREATE SPACE basketballplayer \\ (partition_num = 10, \\ replica_factor = 1, \\ vid_type = FIXED_STRING(30)); ## \u9009\u62e9\u56fe\u7a7a\u95f4 basketballplayer nebula> USE basketballplayer; ## \u521b\u5efa Tag player nebula> CREATE TAG player(name string, age int); ## \u521b\u5efa Tag team nebula> CREATE TAG team(name string); ## \u521b\u5efa Edge type follow nebula> CREATE EDGE follow(degree int); ## \u521b\u5efa Edge type serve nebula> CREATE EDGE serve(start_year int, end_year int); \u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u89c1 \u5feb\u901f\u5f00\u59cb \u3002","title":"\u6b65\u9aa4 1\uff1a\u5728NebulaGraph\u4e2d\u521b\u5efa Schema"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-mysql/#2","text":"\u7f16\u8bd1 Exchange \u540e\uff0c\u590d\u5236 target/classes/application.conf \u6587\u4ef6\u8bbe\u7f6e MySQL \u6570\u636e\u6e90\u76f8\u5173\u7684\u914d\u7f6e\u3002\u5728\u672c\u793a\u4f8b\u4e2d\uff0c\u590d\u5236\u7684\u6587\u4ef6\u540d\u4e3a mysql_application.conf \u3002\u5404\u4e2a\u914d\u7f6e\u9879\u7684\u8be6\u7ec6\u8bf4\u660e\u8bf7\u53c2\u89c1 \u914d\u7f6e\u8bf4\u660e \u3002 { # Spark \u76f8\u5173\u914d\u7f6e spark: { app: { name: NebulaGraph Exchange 3.6.0 } driver: { cores: 1 maxResultSize: 1G } cores: { max: 16 } } # NebulaGraph \u76f8\u5173\u914d\u7f6e nebula: { address:{ # \u4ee5\u4e0b\u4e3a NebulaGraph \u7684 Graph \u670d\u52a1\u548c Meta \u670d\u52a1\u6240\u5728\u673a\u5668\u7684 IP \u5730\u5740\u53ca\u7aef\u53e3\u3002 # \u5982\u679c\u6709\u591a\u4e2a\u5730\u5740\uff0c\u683c\u5f0f\u4e3a \"ip1:port\",\"ip2:port\",\"ip3:port\"\u3002 # \u4e0d\u540c\u5730\u5740\u4e4b\u95f4\u4ee5\u82f1\u6587\u9017\u53f7 (,) \u9694\u5f00\u3002 graph:[\"127.0.0.1:9669\"] #\u4efb\u610f\u4e00\u4e2a Meta \u670d\u52a1\u7684\u5730\u5740\u3002 #\u5982\u679c\u60a8\u7684 NebulaGraph \u5728\u865a\u62df\u7f51\u7edc\u4e2d\uff0c\u5982k8s\uff0c\u8bf7\u914d\u7f6e Leader Meta\u7684\u5730\u5740\u3002 meta:[\"127.0.0.1:9559\"] } # \u586b\u5199\u7684\u8d26\u53f7\u5fc5\u987b\u62e5\u6709 NebulaGraph \u76f8\u5e94\u56fe\u7a7a\u95f4\u7684\u5199\u6570\u636e\u6743\u9650\u3002 user: root pswd: nebula # \u586b\u5199 NebulaGraph \u4e2d\u9700\u8981\u5199\u5165\u6570\u636e\u7684\u56fe\u7a7a\u95f4\u540d\u79f0\u3002 space: basketballplayer connection: { timeout: 3000 retry: 3 } execution: { retry: 3 } error: { max: 32 output: /tmp/errors } rate: { limit: 1024 timeout: 1000 } } # \u5904\u7406\u70b9 tags: [ # \u8bbe\u7f6e Tag player \u76f8\u5173\u4fe1\u606f\u3002 { # NebulaGraph \u4e2d\u5bf9\u5e94\u7684 Tag \u540d\u79f0\u3002 name: player type: { # \u6307\u5b9a\u6570\u636e\u6e90\u6587\u4ef6\u683c\u5f0f\uff0c\u8bbe\u7f6e\u4e3a MySQL\u3002 source: mysql # \u6307\u5b9a\u5982\u4f55\u5c06\u70b9\u6570\u636e\u5bfc\u5165NebulaGraph\uff1aClient \u6216 SST\u3002 sink: client } host:192.168.*.* port:3306 user:\"test\" password:\"123456\" database:\"basketball\" # \u626b\u63cf\u5355\u4e2a\u8868\u8bfb\u53d6\u6570\u636e\u3002 # nebula-exchange_spark_2.2 \u5fc5\u987b\u914d\u7f6e\u8be5\u53c2\u6570\u3002\u4e0d\u652f\u6301\u914d\u7f6e sentence\u3002 # nebula-exchange_spark_2.4 \u548c nebula-exchange_spark_3.0 \u53ef\u4ee5\u914d\u7f6e\u8be5\u53c2\u6570\uff0c\u4f46\u662f\u4e0d\u80fd\u548c sentence \u540c\u65f6\u914d\u7f6e\u3002 table:\"basketball.player\" # \u901a\u8fc7\u67e5\u8be2\u8bed\u53e5\u8bfb\u53d6\u6570\u636e\u3002 # nebula-exchange_spark_2.2 \u4e0d\u652f\u6301\u8be5\u53c2\u6570\u3002 # nebula-exchange_spark_2.4 \u548c nebula-exchange_spark_3.0 \u53ef\u4ee5\u914d\u7f6e\u8be5\u53c2\u6570\uff0c\u4f46\u662f\u4e0d\u80fd\u548c table \u540c\u65f6\u914d\u7f6e\u3002\u652f\u6301\u591a\u8868\u67e5\u8be2\u3002 # sentence: \"select * from people, player, team\" # \u5728 fields \u91cc\u6307\u5b9a player \u8868\u4e2d\u7684\u5217\u540d\u79f0\uff0c\u5176\u5bf9\u5e94\u7684 value \u4f1a\u4f5c\u4e3a NebulaGraph \u4e2d\u6307\u5b9a\u5c5e\u6027\u3002 # fields \u548c nebula.fields \u91cc\u7684\u914d\u7f6e\u5fc5\u987b\u4e00\u4e00\u5bf9\u5e94\u3002 # \u5982\u679c\u9700\u8981\u6307\u5b9a\u591a\u4e2a\u5217\u540d\u79f0\uff0c\u7528\u82f1\u6587\u9017\u53f7\uff08,\uff09\u9694\u5f00\u3002 fields: [age,name] nebula.fields: [age,name] # \u6307\u5b9a\u8868\u4e2d\u67d0\u4e00\u5217\u6570\u636e\u4e3a NebulaGraph \u4e2d\u70b9 VID \u7684\u6765\u6e90\u3002 vertex: { field:playerid # udf:{ # separator:\"_\" # oldColNames:[field-0,field-1,field-2] # newColName:new-field # } # \u4e3a VID \u589e\u52a0\u6307\u5b9a\u7684\u524d\u7f00\u3002\u4f8b\u5982 VID \u4e3a 12345\uff0c\u589e\u52a0\u524d\u7f00 tag1 \u540e\u4e3a tag1_12345\u3002\u4e0b\u5212\u7ebf\u65e0\u6cd5\u4fee\u6539\u3002 # prefix:\"tag1\" # \u5bf9 string \u7c7b\u578b\u7684 VID \u8fdb\u884c\u54c8\u5e0c\u5316\u64cd\u4f5c\u3002 # policy:hash } # \u6279\u91cf\u64cd\u4f5c\u7c7b\u578b\uff0c\u5305\u62ec INSERT\u3001UPDATE \u548c DELETE\u3002\u9ed8\u8ba4\u4e3a INSERT\u3002 #writeMode: INSERT # \u6279\u91cf\u5220\u9664\u65f6\u662f\u5426\u5220\u9664\u8be5\u70b9\u5173\u8054\u7684\u51fa\u8fb9\u548c\u5165\u8fb9\u3002`writeMode`\u4e3a`DELETE`\u65f6\u8be5\u53c2\u6570\u751f\u6548\u3002 #deleteEdge: false # \u5355\u6279\u6b21\u5199\u5165 NebulaGraph \u7684\u6570\u636e\u6761\u6570\u3002 batch: 256 # Spark \u5206\u533a\u6570\u91cf partition: 32 } # \u8bbe\u7f6e Tag team \u76f8\u5173\u4fe1\u606f\u3002 { name: team type: { source: mysql sink: client } host:192.168.*.* port:3306 database:\"basketball\" table:\"team\" user:\"test\" password:\"123456\" sentence:\"select teamid, name from team order by teamid\" fields: [name] nebula.fields: [name] vertex: { field: teamid } batch: 256 partition: 32 } ] # \u5904\u7406\u8fb9\u6570\u636e edges: [ # \u8bbe\u7f6e Edge type follow \u76f8\u5173\u4fe1\u606f { # NebulaGraph \u4e2d\u5bf9\u5e94\u7684 Edge type \u540d\u79f0\u3002 name: follow type: { # \u6307\u5b9a\u6570\u636e\u6e90\u6587\u4ef6\u683c\u5f0f\uff0c\u8bbe\u7f6e\u4e3a MySQL\u3002 source: mysql # \u6307\u5b9a\u8fb9\u6570\u636e\u5bfc\u5165 NebulaGraph \u7684\u65b9\u5f0f\uff0c # \u6307\u5b9a\u5982\u4f55\u5c06\u70b9\u6570\u636e\u5bfc\u5165NebulaGraph\uff1aClient \u6216 SST\u3002 sink: client } host:192.168.*.* port:3306 user:\"test\" password:\"123456\" database:\"basketball\" # \u626b\u63cf\u5355\u4e2a\u8868\u8bfb\u53d6\u6570\u636e\u3002 # nebula-exchange_spark_2.2 \u5fc5\u987b\u914d\u7f6e\u8be5\u53c2\u6570\u3002\u4e0d\u652f\u6301\u914d\u7f6e sentence\u3002 # nebula-exchange_spark_2.4 \u548c nebula-exchange_spark_3.0 \u53ef\u4ee5\u914d\u7f6e\u8be5\u53c2\u6570\uff0c\u4f46\u662f\u4e0d\u80fd\u548c sentence \u540c\u65f6\u914d\u7f6e\u3002 table:\"basketball.follow\" # \u901a\u8fc7\u67e5\u8be2\u8bed\u53e5\u8bfb\u53d6\u6570\u636e\u3002 # nebula-exchange_spark_2.2 \u4e0d\u652f\u6301\u8be5\u53c2\u6570\u3002 # nebula-exchange_spark_2.4 \u548c nebula-exchange_spark_3.0 \u53ef\u4ee5\u914d\u7f6e\u8be5\u53c2\u6570\uff0c\u4f46\u662f\u4e0d\u80fd\u548c table \u540c\u65f6\u914d\u7f6e\u3002\u652f\u6301\u591a\u8868\u67e5\u8be2\u3002 # sentence: \"select * from follow, serve\" # \u5728 fields \u91cc\u6307\u5b9a follow \u8868\u4e2d\u7684\u5217\u540d\u79f0\uff0c\u5176\u5bf9\u5e94\u7684 value \u4f1a\u4f5c\u4e3a NebulaGraph \u4e2d\u6307\u5b9a\u5c5e\u6027\u3002 # fields \u548c nebula.fields \u91cc\u7684\u914d\u7f6e\u5fc5\u987b\u4e00\u4e00\u5bf9\u5e94\u3002 # \u5982\u679c\u9700\u8981\u6307\u5b9a\u591a\u4e2a\u5217\u540d\u79f0\uff0c\u7528\u82f1\u6587\u9017\u53f7\uff08,\uff09\u9694\u5f00\u3002 fields: [degree] nebula.fields: [degree] # \u5728 source \u91cc\uff0c\u5c06 follow \u8868\u4e2d\u67d0\u4e00\u5217\u4f5c\u4e3a\u8fb9\u7684\u8d77\u59cb\u70b9\u6570\u636e\u6e90\u3002 # \u5728 target \u91cc\uff0c\u5c06 follow \u8868\u4e2d\u67d0\u4e00\u5217\u4f5c\u4e3a\u8fb9\u7684\u76ee\u7684\u70b9\u6570\u636e\u6e90\u3002 source: { field: src_player # udf:{ # separator:\"_\" # oldColNames:[field-0,field-1,field-2] # newColName:new-field # } # \u4e3a VID \u589e\u52a0\u6307\u5b9a\u7684\u524d\u7f00\u3002\u4f8b\u5982 VID \u4e3a 12345\uff0c\u589e\u52a0\u524d\u7f00 tag1 \u540e\u4e3a tag1_12345\u3002\u4e0b\u5212\u7ebf\u65e0\u6cd5\u4fee\u6539\u3002 # prefix:\"tag1\" # \u5bf9 string \u7c7b\u578b\u7684 VID \u8fdb\u884c\u54c8\u5e0c\u5316\u64cd\u4f5c\u3002 # policy:hash } target: { field: dst_player # udf:{ # separator:\"_\" # oldColNames:[field-0,field-1,field-2] # newColName:new-field # } # \u4e3a VID \u589e\u52a0\u6307\u5b9a\u7684\u524d\u7f00\u3002\u4f8b\u5982 VID \u4e3a 12345\uff0c\u589e\u52a0\u524d\u7f00 tag1 \u540e\u4e3a tag1_12345\u3002\u4e0b\u5212\u7ebf\u65e0\u6cd5\u4fee\u6539\u3002 # prefix:\"tag1\" # \u5bf9 string \u7c7b\u578b\u7684 VID \u8fdb\u884c\u54c8\u5e0c\u5316\u64cd\u4f5c\u3002 # policy:hash } # \u6307\u5b9a\u4e00\u4e2a\u5217\u4f5c\u4e3a rank \u7684\u6e90\uff08\u53ef\u9009\uff09\u3002 #ranking: rank # \u6279\u91cf\u64cd\u4f5c\u7c7b\u578b\uff0c\u5305\u62ec INSERT\u3001UPDATE \u548c DELETE\u3002\u9ed8\u8ba4\u4e3a INSERT\u3002 #writeMode: INSERT # \u5355\u6279\u6b21\u5199\u5165 NebulaGraph \u7684\u6570\u636e\u6761\u6570\u3002 batch: 256 # Spark \u5206\u533a\u6570\u91cf partition: 32 } # \u8bbe\u7f6e Edge type serve \u76f8\u5173\u4fe1\u606f { name: serve type: { source: mysql sink: client } host:192.168.*.* port:3306 database:\"basketball\" table:\"serve\" user:\"test\" password:\"123456\" sentence:\"select playerid,teamid,start_year,end_year from serve order by playerid\" fields: [start_year,end_year] nebula.fields: [start_year,end_year] source: { field: playerid } target: { field: teamid } # \u6307\u5b9a\u4e00\u4e2a\u5217\u4f5c\u4e3a rank \u7684\u6e90\uff08\u53ef\u9009\uff09\u3002 #ranking: rank batch: 256 partition: 32 } ] }","title":"\u6b65\u9aa4 2\uff1a\u4fee\u6539\u914d\u7f6e\u6587\u4ef6"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-mysql/#3nebulagraph","text":"\u8fd0\u884c\u5982\u4e0b\u547d\u4ee4\u5c06 MySQL \u6570\u636e\u5bfc\u5165\u5230NebulaGraph\u4e2d\u3002\u5173\u4e8e\u53c2\u6570\u7684\u8bf4\u660e\uff0c\u8bf7\u53c2\u89c1 \u5bfc\u5165\u547d\u4ee4\u53c2\u6570 \u3002 ${ SPARK_HOME } /bin/spark-submit --master \"local\" --class com.vesoft.nebula.exchange.Exchange <nebula-exchange-3.6.0.jar_path> -c <mysql_application.conf_path> Note JAR \u5305\u6709\u4e24\u79cd\u83b7\u53d6\u65b9\u5f0f\uff1a \u81ea\u884c\u7f16\u8bd1 \u6216\u8005\u4ece maven \u4ed3\u5e93\u4e0b\u8f7d\u3002 \u793a\u4f8b\uff1a ${ SPARK_HOME } /bin/spark-submit --master \"local\" --class com.vesoft.nebula.exchange.Exchange /root/nebula-exchange/nebula-exchange/target/nebula-exchange-3.6.0.jar -c /root/nebula-exchange/nebula-exchange/target/classes/mysql_application.conf \u7528\u6237\u53ef\u4ee5\u5728\u8fd4\u56de\u4fe1\u606f\u4e2d\u641c\u7d22 batchSuccess.<tag_name/edge_name> \uff0c\u786e\u8ba4\u6210\u529f\u7684\u6570\u91cf\u3002\u4f8b\u5982 batchSuccess.follow: 300 \u3002","title":"\u6b65\u9aa4 3\uff1a\u5411NebulaGraph\u5bfc\u5165\u6570\u636e"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-mysql/#4","text":"\u7528\u6237\u53ef\u4ee5\u5728NebulaGraph\u5ba2\u6237\u7aef\uff08\u4f8b\u5982 NebulaGraph Studio\uff09\u4e2d\u6267\u884c\u67e5\u8be2\u8bed\u53e5\uff0c\u786e\u8ba4\u6570\u636e\u662f\u5426\u5df2\u5bfc\u5165\u3002\u4f8b\u5982\uff1a LOOKUP ON player YIELD id(vertex); \u7528\u6237\u4e5f\u53ef\u4ee5\u4f7f\u7528\u547d\u4ee4 SHOW STATS \u67e5\u770b\u7edf\u8ba1\u6570\u636e\u3002","title":"\u6b65\u9aa4 4\uff1a\uff08\u53ef\u9009\uff09\u9a8c\u8bc1\u6570\u636e"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-mysql/#5nebulagraph","text":"\u5bfc\u5165\u6570\u636e\u540e\uff0c\u7528\u6237\u53ef\u4ee5\u5728NebulaGraph\u4e2d\u91cd\u65b0\u521b\u5efa\u5e76\u91cd\u5efa\u7d22\u5f15\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1 \u7d22\u5f15\u4ecb\u7ecd \u3002","title":"\u6b65\u9aa4 5\uff1a\uff08\u5982\u6709\uff09\u5728NebulaGraph\u4e2d\u91cd\u5efa\u7d22\u5f15"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-neo4j/","text":"\u5bfc\u5165 Neo4j \u6570\u636e \u00b6 \u672c\u6587\u4ee5\u4e00\u4e2a\u793a\u4f8b\u8bf4\u660e\u5982\u4f55\u4f7f\u7528 Exchange \u5c06\u5b58\u50a8\u5728 Neo4j \u7684\u6570\u636e\u5bfc\u5165NebulaGraph\u3002 \u5b9e\u73b0\u65b9\u6cd5 \u00b6 Exchange \u4f7f\u7528 Neo4j Driver 4.0.1 \u5b9e\u73b0\u5bf9 Neo4j \u6570\u636e\u7684\u8bfb\u53d6\u3002\u6267\u884c\u6279\u91cf\u5bfc\u51fa\u4e4b\u524d\uff0c\u7528\u6237\u9700\u8981\u5728\u914d\u7f6e\u6587\u4ef6\u4e2d\u5199\u5165\u9488\u5bf9\u6807\u7b7e\uff08label\uff09\u548c\u5173\u7cfb\u7c7b\u578b\uff08Relationship Type\uff09\u81ea\u52a8\u6267\u884c\u7684 Cypher \u8bed\u53e5\uff0c\u4ee5\u53ca Spark \u5206\u533a\u6570\uff0c\u63d0\u9ad8\u6570\u636e\u5bfc\u51fa\u6027\u80fd\u3002 Exchange \u8bfb\u53d6 Neo4j \u6570\u636e\u65f6\u9700\u8981\u5b8c\u6210\u4ee5\u4e0b\u5de5\u4f5c\uff1a Exchange \u4e2d\u7684 Reader \u4f1a\u5c06\u914d\u7f6e\u6587\u4ef6\u4e2d exec \u90e8\u5206\u7684 Cypher RETURN \u8bed\u53e5\u540e\u9762\u7684\u8bed\u53e5\u66ff\u6362\u4e3a COUNT(*) \uff0c\u5e76\u6267\u884c\u8fd9\u4e2a\u8bed\u53e5\uff0c\u4ece\u800c\u83b7\u53d6\u6570\u636e\u603b\u91cf\uff0c\u518d\u6839\u636e Spark \u5206\u533a\u6570\u91cf\u8ba1\u7b97\u6bcf\u4e2a\u5206\u533a\u7684\u8d77\u59cb\u504f\u79fb\u91cf\u548c\u5927\u5c0f\u3002 \uff08\u53ef\u9009\uff09\u5982\u679c\u7528\u6237\u914d\u7f6e\u4e86 check_point_path \u76ee\u5f55\uff0cReader \u4f1a\u8bfb\u53d6\u76ee\u5f55\u4e2d\u7684\u6587\u4ef6\u3002\u5982\u679c\u5904\u4e8e\u7eed\u4f20\u72b6\u6001\uff0cReader \u4f1a\u8ba1\u7b97\u6bcf\u4e2a Spark \u5206\u533a\u5e94\u8be5\u6709\u7684\u504f\u79fb\u91cf\u548c\u5927\u5c0f\u3002 \u5728\u6bcf\u4e2a Spark \u5206\u533a\u91cc\uff0cExchange \u4e2d\u7684 Reader \u4f1a\u5728 Cypher \u8bed\u53e5\u540e\u9762\u6dfb\u52a0\u4e0d\u540c\u7684 SKIP \u548c LIMIT \u8bed\u53e5\uff0c\u8c03\u7528 Neo4j Driver \u5e76\u884c\u6267\u884c\uff0c\u5c06\u6570\u636e\u5206\u5e03\u5230\u4e0d\u540c\u7684 Spark \u5206\u533a\u4e2d\u3002 Reader \u6700\u540e\u5c06\u8fd4\u56de\u7684\u6570\u636e\u5904\u7406\u6210 DataFrame\u3002 \u81f3\u6b64\uff0cExchange \u5373\u5b8c\u6210\u4e86\u5bf9 Neo4j \u6570\u636e\u7684\u5bfc\u51fa\u3002\u4e4b\u540e\uff0c\u6570\u636e\u88ab\u5e76\u884c\u5199\u5165NebulaGraph\u6570\u636e\u5e93\u4e2d\u3002 \u6574\u4e2a\u8fc7\u7a0b\u5982\u4e0b\u56fe\u6240\u793a\u3002 \u6570\u636e\u96c6 \u00b6 \u672c\u6587\u4ee5 basketballplayer \u6570\u636e\u96c6 \u4e3a\u4f8b\u3002 \u73af\u5883\u914d\u7f6e \u00b6 \u672c\u6587\u793a\u4f8b\u5728 MacOS \u4e0b\u5b8c\u6210\uff0c\u4ee5\u4e0b\u662f\u76f8\u5173\u7684\u73af\u5883\u914d\u7f6e\u4fe1\u606f\uff1a \u786c\u4ef6\u89c4\u683c\uff1a CPU\uff1aIntel(R) Xeon(R) CPU E5-2697 v3 @ 2.60GHz CPU \u5185\u6838\u6570\uff1a14 \u5185\u5b58\uff1a251 GB Spark\uff1a\u5355\u673a\u7248\uff0c2.4.6 pre-build for Hadoop 2.7 Neo4j\uff1a3.5.20 Community Edition NebulaGraph\uff1a3.6.0\u3002 \u524d\u63d0\u6761\u4ef6 \u00b6 \u5f00\u59cb\u5bfc\u5165\u6570\u636e\u4e4b\u524d\uff0c\u7528\u6237\u9700\u8981\u786e\u8ba4\u4ee5\u4e0b\u4fe1\u606f\uff1a \u5df2\u7ecf \u5b89\u88c5\u90e8\u7f72NebulaGraph \u5e76\u83b7\u53d6\u5982\u4e0b\u4fe1\u606f\uff1a Graph \u670d\u52a1\u548c Meta \u670d\u52a1\u7684\u7684 IP \u5730\u5740\u548c\u7aef\u53e3\u3002 \u62e5\u6709NebulaGraph\u5199\u6743\u9650\u7684\u7528\u6237\u540d\u548c\u5bc6\u7801\u3002 \u5df2\u7ecf\u7f16\u8bd1 Exchange\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1 \u7f16\u8bd1 Exchange \u3002\u672c\u793a\u4f8b\u4e2d\u4f7f\u7528 Exchange 3.6.0\u3002 \u5df2\u7ecf\u5b89\u88c5 Spark\u3002 \u4e86\u89e3NebulaGraph\u4e2d\u521b\u5efa Schema \u7684\u4fe1\u606f\uff0c\u5305\u62ec Tag \u548c Edge type \u7684\u540d\u79f0\u3001\u5c5e\u6027\u7b49\u3002 \u64cd\u4f5c\u6b65\u9aa4 \u00b6 \u6b65\u9aa4 1\uff1a\u5728NebulaGraph\u4e2d\u521b\u5efa Schema \u00b6 \u5206\u6790\u6570\u636e\uff0c\u6309\u4ee5\u4e0b\u6b65\u9aa4\u5728NebulaGraph\u4e2d\u521b\u5efa Schema\uff1a \u786e\u8ba4 Schema \u8981\u7d20\u3002NebulaGraph\u4e2d\u7684 Schema \u8981\u7d20\u5982\u4e0b\u8868\u6240\u793a\u3002 \u8981\u7d20 \u540d\u79f0 \u5c5e\u6027 Tag player name string, age int Tag team name string Edge Type follow degree int Edge Type serve start_year int, end_year int \u4f7f\u7528 NebulaGraph Console \u521b\u5efa\u4e00\u4e2a\u56fe\u7a7a\u95f4 basketballplayer \uff0c\u5e76\u521b\u5efa\u4e00\u4e2a Schema\uff0c\u5982\u4e0b\u6240\u793a\u3002 ## \u521b\u5efa\u56fe\u7a7a\u95f4 nebula> CREATE SPACE basketballplayer \\ (partition_num = 10, \\ replica_factor = 1, \\ vid_type = FIXED_STRING(30)); ## \u9009\u62e9\u56fe\u7a7a\u95f4 basketballplayer nebula> USE basketballplayer; ## \u521b\u5efa Tag player nebula> CREATE TAG player(name string, age int); ## \u521b\u5efa Tag team nebula> CREATE TAG team(name string); ## \u521b\u5efa Edge type follow nebula> CREATE EDGE follow(degree int); ## \u521b\u5efa Edge type serve nebula> CREATE EDGE serve(start_year int, end_year int); \u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u89c1 \u5feb\u901f\u5f00\u59cb \u3002 \u6b65\u9aa4 2\uff1a\u914d\u7f6e\u6e90\u6570\u636e \u00b6 \u4e3a\u4e86\u63d0\u9ad8 Neo4j \u6570\u636e\u7684\u5bfc\u51fa\u901f\u5ea6\uff0c\u5728 Neo4j \u6570\u636e\u5e93\u4e2d\u4e3a\u76f8\u5e94\u5c5e\u6027\u521b\u5efa\u7d22\u5f15\u3002\u8be6\u7ec6\u4fe1\u606f\uff0c\u53c2\u8003 Neo4j \u7528\u6237\u624b\u518c \u3002 \u6b65\u9aa4 3\uff1a\u4fee\u6539\u914d\u7f6e\u6587\u4ef6 \u00b6 \u7f16\u8bd1 Exchange \u540e\uff0c\u590d\u5236 target/classes/application.conf \u6587\u4ef6\u8bbe\u7f6e\u6570\u636e\u6e90\u76f8\u5173\u7684\u914d\u7f6e\u3002\u5728\u672c\u793a\u4f8b\u4e2d\uff0c\u590d\u5236\u7684\u6587\u4ef6\u540d\u4e3a neo4j_application.conf \u3002\u5404\u4e2a\u914d\u7f6e\u9879\u7684\u8be6\u7ec6\u8bf4\u660e\u8bf7\u53c2\u89c1 \u914d\u7f6e\u8bf4\u660e \u3002 { # Spark \u76f8\u5173\u914d\u7f6e spark: { app: { name: NebulaGraph Exchange 3.6.0 } driver: { cores: 1 maxResultSize: 1G } executor: { memory:1G } cores:{ max: 16 } } # NebulaGraph \u76f8\u5173\u914d\u7f6e nebula: { address:{ graph:[\"127.0.0.1:9669\"] #\u4efb\u610f\u4e00\u4e2a Meta \u670d\u52a1\u7684\u5730\u5740\u3002 #\u5982\u679c\u60a8\u7684 NebulaGraph \u5728\u865a\u62df\u7f51\u7edc\u4e2d\uff0c\u5982k8s\uff0c\u8bf7\u914d\u7f6e Leader Meta\u7684\u5730\u5740\u3002 meta:[\"127.0.0.1:9559\"] } user: root pswd: nebula space: basketballplayer connection: { timeout: 3000 retry: 3 } execution: { retry: 3 } error: { max: 32 output: /tmp/errors } rate: { limit: 1024 timeout: 1000 } } # \u5904\u7406\u70b9 tags: [ # \u8bbe\u7f6e Tag player \u76f8\u5173\u4fe1\u606f\u3002 { name: player type: { source: neo4j sink: client } server: \"bolt://192.168.*.*:7687\" user: neo4j password:neo4j database:neo4j exec: \"match (n:player) return n.id as id, n.age as age, n.name as name\" fields: [age,name] nebula.fields: [age,name] vertex: { field:id # udf:{ # separator:\"_\" # oldColNames:[field-0,field-1,field-2] # newColName:new-field # } # \u4e3a VID \u589e\u52a0\u6307\u5b9a\u7684\u524d\u7f00\u3002\u4f8b\u5982 VID \u4e3a 12345\uff0c\u589e\u52a0\u524d\u7f00 tag1 \u540e\u4e3a tag1_12345\u3002\u4e0b\u5212\u7ebf\u65e0\u6cd5\u4fee\u6539\u3002 # prefix:\"tag1\" # \u5bf9 string \u7c7b\u578b\u7684 VID \u8fdb\u884c\u54c8\u5e0c\u5316\u64cd\u4f5c\u3002 # policy:hash } # \u6279\u91cf\u64cd\u4f5c\u7c7b\u578b\uff0c\u5305\u62ec INSERT\u3001UPDATE \u548c DELETE\u3002\u9ed8\u8ba4\u4e3a INSERT\u3002 #writeMode: INSERT # \u6279\u91cf\u5220\u9664\u65f6\u662f\u5426\u5220\u9664\u8be5\u70b9\u5173\u8054\u7684\u51fa\u8fb9\u548c\u5165\u8fb9\u3002`writeMode`\u4e3a`DELETE`\u65f6\u8be5\u53c2\u6570\u751f\u6548\u3002 #deleteEdge: false partition: 10 batch: 1000 check_point_path: /tmp/test } # \u8bbe\u7f6e Tag team \u76f8\u5173\u4fe1\u606f\u3002 { name: team type: { source: neo4j sink: client } server: \"bolt://192.168.*.*:7687\" user: neo4j password:neo4j # bolt 3 does not support `select database`, please do not config database # database:neo4j exec: \"match (n:team) return n.id as id,n.name as name order by id(n)\" fields: [name] nebula.fields: [name] vertex: { field:id } partition: 10 batch: 1000 check_point_path: /tmp/test } ] # \u5904\u7406\u8fb9\u6570\u636e edges: [ # \u8bbe\u7f6e Edge type follow \u76f8\u5173\u4fe1\u606f { name: follow type: { source: neo4j sink: client } server: \"bolt://192.168.*.*:7687\" user: neo4j password:neo4j # bolt 3 \u4e0d\u652f\u6301\u591a\u6570\u636e\u5e93\uff0c\u8bf7\u52ff\u914d\u7f6e\u6570\u636e\u5e93\u540d\u30024 \u53ca\u4ee5\u4e0a\u53ef\u4ee5\u914d\u7f6e\u6570\u636e\u5e93\u540d\u3002 # database:neo4j exec: \"match (a:player)-[r:follow]->(b:player) return a.id as src, b.id as dst, r.degree as degree order by id(r)\" fields: [degree] nebula.fields: [degree] source: { field: src # udf:{ # separator:\"_\" # oldColNames:[field-0,field-1,field-2] # newColName:new-field # } # \u4e3a VID \u589e\u52a0\u6307\u5b9a\u7684\u524d\u7f00\u3002\u4f8b\u5982 VID \u4e3a 12345\uff0c\u589e\u52a0\u524d\u7f00 tag1 \u540e\u4e3a tag1_12345\u3002\u4e0b\u5212\u7ebf\u65e0\u6cd5\u4fee\u6539\u3002 # prefix:\"tag1\" # \u5bf9 string \u7c7b\u578b\u7684 VID \u8fdb\u884c\u54c8\u5e0c\u5316\u64cd\u4f5c\u3002 # policy:hash } target: { field: dst # udf:{ # separator:\"_\" # oldColNames:[field-0,field-1,field-2] # newColName:new-field # } # \u4e3a VID \u589e\u52a0\u6307\u5b9a\u7684\u524d\u7f00\u3002\u4f8b\u5982 VID \u4e3a 12345\uff0c\u589e\u52a0\u524d\u7f00 tag1 \u540e\u4e3a tag1_12345\u3002\u4e0b\u5212\u7ebf\u65e0\u6cd5\u4fee\u6539\u3002 # prefix:\"tag1\" # \u5bf9 string \u7c7b\u578b\u7684 VID \u8fdb\u884c\u54c8\u5e0c\u5316\u64cd\u4f5c\u3002 # policy:hash } #ranking: rank # \u6279\u91cf\u64cd\u4f5c\u7c7b\u578b\uff0c\u5305\u62ec INSERT\u3001UPDATE \u548c DELETE\u3002\u9ed8\u8ba4\u4e3a INSERT\u3002 #writeMode: INSERT partition: 10 batch: 1000 check_point_path: /tmp/test } # \u8bbe\u7f6e Edge type serve \u76f8\u5173\u4fe1\u606f { name: serve type: { source: neo4j sink: client } server: \"bolt://192.168.*.*:7687\" user: neo4j password:neo4j exec: \"match (a:player)-[r:serve]->(b:team) return a.id as src, b.id as dst, r.start_year as start_year, r.end_year as end_year order by id(r)\" fields: [start_year,end_year] nebula.fields: [start_year,end_year] source: { field: src } target: { field: dst } partition: 10 batch: 1000 check_point_path: /tmp/test } ] } exec \u914d\u7f6e\u8bf4\u660e \u00b6 \u5728\u914d\u7f6e tags.exec \u6216\u8005 edges.exec \u53c2\u6570\u65f6\uff0c\u9700\u8981\u586b\u5199 Cypher \u67e5\u8be2\u8bed\u53e5\u3002\u4e3a\u4e86\u4fdd\u8bc1\u6bcf\u6b21\u67e5\u8be2\u7ed3\u679c\u6392\u5e8f\u4e00\u81f4\uff0c\u5e76\u4e14\u4e3a\u4e86\u9632\u6b62\u5728\u5bfc\u5165\u65f6\u4e22\u5931\u6570\u636e\uff0c\u5f3a\u70c8\u5efa\u8bae\u5728 Cypher \u67e5\u8be2\u8bed\u53e5\u4e2d\u52a0\u5165 ORDER BY \u5b50\u53e5\uff0c\u540c\u65f6\uff0c\u4e3a\u4e86\u63d0\u9ad8\u6570\u636e\u5bfc\u5165\u6548\u7387\uff0c\u6700\u597d\u9009\u53d6\u6709\u7d22\u5f15\u7684\u5c5e\u6027\u4f5c\u4e3a\u6392\u5e8f\u7684\u5c5e\u6027\u3002\u5982\u679c\u6ca1\u6709\u7d22\u5f15\uff0c\u7528\u6237\u4e5f\u53ef\u4ee5\u89c2\u5bdf\u9ed8\u8ba4\u7684\u6392\u5e8f\uff0c\u9009\u62e9\u5408\u9002\u7684\u5c5e\u6027\u7528\u4e8e\u6392\u5e8f\uff0c\u4ee5\u63d0\u9ad8\u6548\u7387\u3002\u5982\u679c\u9ed8\u8ba4\u7684\u6392\u5e8f\u627e\u4e0d\u5230\u89c4\u5f8b\uff0c\u7528\u6237\u53ef\u4ee5\u6839\u636e\u70b9\u6216\u5173\u7cfb\u7684 ID \u8fdb\u884c\u6392\u5e8f\uff0c\u5e76\u4e14\u5c06 partition \u8bbe\u7f6e\u4e3a\u4e00\u4e2a\u5c3d\u91cf\u5c0f\u7684\u503c\uff0c\u51cf\u8f7b Neo4j \u7684\u6392\u5e8f\u538b\u529b\u3002 \u8bf4\u660e \uff1a\u4f7f\u7528 ORDER BY \u5b50\u53e5\u4f1a\u5ef6\u957f\u6570\u636e\u5bfc\u5165\u7684\u65f6\u95f4\u3002 \u53e6\u5916\uff0cExchange \u9700\u8981\u5728\u4e0d\u540c Spark \u5206\u533a\u6267\u884c\u4e0d\u540c SKIP \u548c LIMIT \u7684 Cypher \u8bed\u53e5\uff0c\u6240\u4ee5\u5728 tags.exec \u548c edges.exec \u5bf9\u5e94\u7684 Cypher \u8bed\u53e5\u4e2d\u4e0d\u80fd\u542b\u6709 SKIP \u548c LIMIT \u5b50\u53e5\u3002 tags.vertex \u6216 edges.vertex \u914d\u7f6e\u8bf4\u660e \u00b6 NebulaGraph\u5728\u521b\u5efa\u70b9\u548c\u8fb9\u65f6\u4f1a\u5c06 ID \u4f5c\u4e3a\u552f\u4e00\u4e3b\u952e\uff0c\u5982\u679c\u4e3b\u952e\u5df2\u5b58\u5728\u5219\u4f1a\u8986\u76d6\u8be5\u4e3b\u952e\u4e2d\u7684\u6570\u636e\u3002\u6240\u4ee5\uff0c\u5047\u5982\u5c06\u67d0\u4e2a Neo4j \u5c5e\u6027\u503c\u4f5c\u4e3aNebulaGraph\u7684 ID\uff0c\u800c\u8fd9\u4e2a\u5c5e\u6027\u503c\u5728 Neo4j \u4e2d\u662f\u6709\u91cd\u590d\u7684\uff0c\u5c31\u4f1a\u5bfc\u81f4\u91cd\u590d ID\uff0c\u5b83\u4eec\u5bf9\u5e94\u7684\u6570\u636e\u6709\u4e14\u53ea\u6709\u4e00\u6761\u4f1a\u5b58\u5165NebulaGraph\u4e2d\uff0c\u5176\u5b83\u7684\u5219\u4f1a\u88ab\u8986\u76d6\u6389\u3002\u7531\u4e8e\u6570\u636e\u5bfc\u5165\u8fc7\u7a0b\u662f\u5e76\u53d1\u5730\u5f80NebulaGraph\u4e2d\u5199\u6570\u636e\uff0c\u6700\u7ec8\u4fdd\u5b58\u7684\u6570\u636e\u5e76\u4e0d\u80fd\u4fdd\u8bc1\u662f Neo4j \u4e2d\u6700\u65b0\u7684\u6570\u636e\u3002 check_point_path \u914d\u7f6e\u8bf4\u660e \u00b6 \u5982\u679c\u542f\u7528\u4e86\u65ad\u70b9\u7eed\u4f20\u529f\u80fd\uff0c\u4e3a\u907f\u514d\u6570\u636e\u4e22\u5931\uff0c\u5728\u65ad\u70b9\u548c\u7eed\u4f20\u4e4b\u95f4\uff0c\u6570\u636e\u5e93\u4e0d\u5e94\u8be5\u6539\u53d8\u72b6\u6001\uff0c\u4f8b\u5982\u4e0d\u80fd\u6dfb\u52a0\u6570\u636e\u6216\u5220\u9664\u6570\u636e\uff0c\u540c\u65f6\uff0c\u4e0d\u80fd\u66f4\u6539 partition \u6570\u91cf\u914d\u7f6e\u3002 \u6b65\u9aa4 4\uff1a\u5411NebulaGraph\u5bfc\u5165\u6570\u636e \u00b6 \u8fd0\u884c\u5982\u4e0b\u547d\u4ee4\u5c06\u6587\u4ef6\u6570\u636e\u5bfc\u5165\u5230NebulaGraph\u4e2d\u3002\u5173\u4e8e\u53c2\u6570\u7684\u8bf4\u660e\uff0c\u8bf7\u53c2\u89c1 \u5bfc\u5165\u547d\u4ee4\u53c2\u6570 \u3002 ${ SPARK_HOME } /bin/spark-submit --master \"local\" --class com.vesoft.nebula.exchange.Exchange <nebula-exchange-3.6.0.jar_path> -c <neo4j_application.conf_path> Note JAR \u5305\u6709\u4e24\u79cd\u83b7\u53d6\u65b9\u5f0f\uff1a \u81ea\u884c\u7f16\u8bd1 \u6216\u8005\u4ece maven \u4ed3\u5e93\u4e0b\u8f7d\u3002 \u793a\u4f8b\uff1a ${ SPARK_HOME } /bin/spark-submit --master \"local\" --class com.vesoft.nebula.exchange.Exchange /root/nebula-exchange/nebula-exchange/target/nebula-exchange-3.6.0.jar -c /root/nebula-exchange/nebula-exchange/target/classes/neo4j_application.conf \u7528\u6237\u53ef\u4ee5\u5728\u8fd4\u56de\u4fe1\u606f\u4e2d\u641c\u7d22 batchSuccess.<tag_name/edge_name> \uff0c\u786e\u8ba4\u6210\u529f\u7684\u6570\u91cf\u3002\u4f8b\u5982 batchSuccess.follow: 300 \u3002 \u6b65\u9aa4 5\uff1a\uff08\u53ef\u9009\uff09\u9a8c\u8bc1\u6570\u636e \u00b6 \u7528\u6237\u53ef\u4ee5\u5728NebulaGraph\u5ba2\u6237\u7aef\uff08\u4f8b\u5982 NebulaGraph Studio\uff09\u4e2d\u6267\u884c\u67e5\u8be2\u8bed\u53e5\uff0c\u786e\u8ba4\u6570\u636e\u662f\u5426\u5df2\u5bfc\u5165\u3002\u4f8b\u5982\uff1a LOOKUP ON player YIELD id(vertex); \u7528\u6237\u4e5f\u53ef\u4ee5\u4f7f\u7528\u547d\u4ee4 SHOW STATS \u67e5\u770b\u7edf\u8ba1\u6570\u636e\u3002 \u6b65\u9aa4 6\uff1a\uff08\u5982\u6709\uff09\u5728NebulaGraph\u4e2d\u91cd\u5efa\u7d22\u5f15 \u00b6 \u5bfc\u5165\u6570\u636e\u540e\uff0c\u7528\u6237\u53ef\u4ee5\u5728NebulaGraph\u4e2d\u91cd\u65b0\u521b\u5efa\u5e76\u91cd\u5efa\u7d22\u5f15\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1 \u7d22\u5f15\u4ecb\u7ecd \u3002","title":"\u5bfc\u5165 Neo4j \u6570\u636e"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-neo4j/#neo4j","text":"\u672c\u6587\u4ee5\u4e00\u4e2a\u793a\u4f8b\u8bf4\u660e\u5982\u4f55\u4f7f\u7528 Exchange \u5c06\u5b58\u50a8\u5728 Neo4j \u7684\u6570\u636e\u5bfc\u5165NebulaGraph\u3002","title":"\u5bfc\u5165 Neo4j \u6570\u636e"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-neo4j/#_1","text":"Exchange \u4f7f\u7528 Neo4j Driver 4.0.1 \u5b9e\u73b0\u5bf9 Neo4j \u6570\u636e\u7684\u8bfb\u53d6\u3002\u6267\u884c\u6279\u91cf\u5bfc\u51fa\u4e4b\u524d\uff0c\u7528\u6237\u9700\u8981\u5728\u914d\u7f6e\u6587\u4ef6\u4e2d\u5199\u5165\u9488\u5bf9\u6807\u7b7e\uff08label\uff09\u548c\u5173\u7cfb\u7c7b\u578b\uff08Relationship Type\uff09\u81ea\u52a8\u6267\u884c\u7684 Cypher \u8bed\u53e5\uff0c\u4ee5\u53ca Spark \u5206\u533a\u6570\uff0c\u63d0\u9ad8\u6570\u636e\u5bfc\u51fa\u6027\u80fd\u3002 Exchange \u8bfb\u53d6 Neo4j \u6570\u636e\u65f6\u9700\u8981\u5b8c\u6210\u4ee5\u4e0b\u5de5\u4f5c\uff1a Exchange \u4e2d\u7684 Reader \u4f1a\u5c06\u914d\u7f6e\u6587\u4ef6\u4e2d exec \u90e8\u5206\u7684 Cypher RETURN \u8bed\u53e5\u540e\u9762\u7684\u8bed\u53e5\u66ff\u6362\u4e3a COUNT(*) \uff0c\u5e76\u6267\u884c\u8fd9\u4e2a\u8bed\u53e5\uff0c\u4ece\u800c\u83b7\u53d6\u6570\u636e\u603b\u91cf\uff0c\u518d\u6839\u636e Spark \u5206\u533a\u6570\u91cf\u8ba1\u7b97\u6bcf\u4e2a\u5206\u533a\u7684\u8d77\u59cb\u504f\u79fb\u91cf\u548c\u5927\u5c0f\u3002 \uff08\u53ef\u9009\uff09\u5982\u679c\u7528\u6237\u914d\u7f6e\u4e86 check_point_path \u76ee\u5f55\uff0cReader \u4f1a\u8bfb\u53d6\u76ee\u5f55\u4e2d\u7684\u6587\u4ef6\u3002\u5982\u679c\u5904\u4e8e\u7eed\u4f20\u72b6\u6001\uff0cReader \u4f1a\u8ba1\u7b97\u6bcf\u4e2a Spark \u5206\u533a\u5e94\u8be5\u6709\u7684\u504f\u79fb\u91cf\u548c\u5927\u5c0f\u3002 \u5728\u6bcf\u4e2a Spark \u5206\u533a\u91cc\uff0cExchange \u4e2d\u7684 Reader \u4f1a\u5728 Cypher \u8bed\u53e5\u540e\u9762\u6dfb\u52a0\u4e0d\u540c\u7684 SKIP \u548c LIMIT \u8bed\u53e5\uff0c\u8c03\u7528 Neo4j Driver \u5e76\u884c\u6267\u884c\uff0c\u5c06\u6570\u636e\u5206\u5e03\u5230\u4e0d\u540c\u7684 Spark \u5206\u533a\u4e2d\u3002 Reader \u6700\u540e\u5c06\u8fd4\u56de\u7684\u6570\u636e\u5904\u7406\u6210 DataFrame\u3002 \u81f3\u6b64\uff0cExchange \u5373\u5b8c\u6210\u4e86\u5bf9 Neo4j \u6570\u636e\u7684\u5bfc\u51fa\u3002\u4e4b\u540e\uff0c\u6570\u636e\u88ab\u5e76\u884c\u5199\u5165NebulaGraph\u6570\u636e\u5e93\u4e2d\u3002 \u6574\u4e2a\u8fc7\u7a0b\u5982\u4e0b\u56fe\u6240\u793a\u3002","title":"\u5b9e\u73b0\u65b9\u6cd5"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-neo4j/#_2","text":"\u672c\u6587\u4ee5 basketballplayer \u6570\u636e\u96c6 \u4e3a\u4f8b\u3002","title":"\u6570\u636e\u96c6"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-neo4j/#_3","text":"\u672c\u6587\u793a\u4f8b\u5728 MacOS \u4e0b\u5b8c\u6210\uff0c\u4ee5\u4e0b\u662f\u76f8\u5173\u7684\u73af\u5883\u914d\u7f6e\u4fe1\u606f\uff1a \u786c\u4ef6\u89c4\u683c\uff1a CPU\uff1aIntel(R) Xeon(R) CPU E5-2697 v3 @ 2.60GHz CPU \u5185\u6838\u6570\uff1a14 \u5185\u5b58\uff1a251 GB Spark\uff1a\u5355\u673a\u7248\uff0c2.4.6 pre-build for Hadoop 2.7 Neo4j\uff1a3.5.20 Community Edition NebulaGraph\uff1a3.6.0\u3002","title":"\u73af\u5883\u914d\u7f6e"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-neo4j/#_4","text":"\u5f00\u59cb\u5bfc\u5165\u6570\u636e\u4e4b\u524d\uff0c\u7528\u6237\u9700\u8981\u786e\u8ba4\u4ee5\u4e0b\u4fe1\u606f\uff1a \u5df2\u7ecf \u5b89\u88c5\u90e8\u7f72NebulaGraph \u5e76\u83b7\u53d6\u5982\u4e0b\u4fe1\u606f\uff1a Graph \u670d\u52a1\u548c Meta \u670d\u52a1\u7684\u7684 IP \u5730\u5740\u548c\u7aef\u53e3\u3002 \u62e5\u6709NebulaGraph\u5199\u6743\u9650\u7684\u7528\u6237\u540d\u548c\u5bc6\u7801\u3002 \u5df2\u7ecf\u7f16\u8bd1 Exchange\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1 \u7f16\u8bd1 Exchange \u3002\u672c\u793a\u4f8b\u4e2d\u4f7f\u7528 Exchange 3.6.0\u3002 \u5df2\u7ecf\u5b89\u88c5 Spark\u3002 \u4e86\u89e3NebulaGraph\u4e2d\u521b\u5efa Schema \u7684\u4fe1\u606f\uff0c\u5305\u62ec Tag \u548c Edge type \u7684\u540d\u79f0\u3001\u5c5e\u6027\u7b49\u3002","title":"\u524d\u63d0\u6761\u4ef6"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-neo4j/#_5","text":"","title":"\u64cd\u4f5c\u6b65\u9aa4"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-neo4j/#1nebulagraph_schema","text":"\u5206\u6790\u6570\u636e\uff0c\u6309\u4ee5\u4e0b\u6b65\u9aa4\u5728NebulaGraph\u4e2d\u521b\u5efa Schema\uff1a \u786e\u8ba4 Schema \u8981\u7d20\u3002NebulaGraph\u4e2d\u7684 Schema \u8981\u7d20\u5982\u4e0b\u8868\u6240\u793a\u3002 \u8981\u7d20 \u540d\u79f0 \u5c5e\u6027 Tag player name string, age int Tag team name string Edge Type follow degree int Edge Type serve start_year int, end_year int \u4f7f\u7528 NebulaGraph Console \u521b\u5efa\u4e00\u4e2a\u56fe\u7a7a\u95f4 basketballplayer \uff0c\u5e76\u521b\u5efa\u4e00\u4e2a Schema\uff0c\u5982\u4e0b\u6240\u793a\u3002 ## \u521b\u5efa\u56fe\u7a7a\u95f4 nebula> CREATE SPACE basketballplayer \\ (partition_num = 10, \\ replica_factor = 1, \\ vid_type = FIXED_STRING(30)); ## \u9009\u62e9\u56fe\u7a7a\u95f4 basketballplayer nebula> USE basketballplayer; ## \u521b\u5efa Tag player nebula> CREATE TAG player(name string, age int); ## \u521b\u5efa Tag team nebula> CREATE TAG team(name string); ## \u521b\u5efa Edge type follow nebula> CREATE EDGE follow(degree int); ## \u521b\u5efa Edge type serve nebula> CREATE EDGE serve(start_year int, end_year int); \u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u89c1 \u5feb\u901f\u5f00\u59cb \u3002","title":"\u6b65\u9aa4 1\uff1a\u5728NebulaGraph\u4e2d\u521b\u5efa Schema"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-neo4j/#2","text":"\u4e3a\u4e86\u63d0\u9ad8 Neo4j \u6570\u636e\u7684\u5bfc\u51fa\u901f\u5ea6\uff0c\u5728 Neo4j \u6570\u636e\u5e93\u4e2d\u4e3a\u76f8\u5e94\u5c5e\u6027\u521b\u5efa\u7d22\u5f15\u3002\u8be6\u7ec6\u4fe1\u606f\uff0c\u53c2\u8003 Neo4j \u7528\u6237\u624b\u518c \u3002","title":"\u6b65\u9aa4 2\uff1a\u914d\u7f6e\u6e90\u6570\u636e"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-neo4j/#3","text":"\u7f16\u8bd1 Exchange \u540e\uff0c\u590d\u5236 target/classes/application.conf \u6587\u4ef6\u8bbe\u7f6e\u6570\u636e\u6e90\u76f8\u5173\u7684\u914d\u7f6e\u3002\u5728\u672c\u793a\u4f8b\u4e2d\uff0c\u590d\u5236\u7684\u6587\u4ef6\u540d\u4e3a neo4j_application.conf \u3002\u5404\u4e2a\u914d\u7f6e\u9879\u7684\u8be6\u7ec6\u8bf4\u660e\u8bf7\u53c2\u89c1 \u914d\u7f6e\u8bf4\u660e \u3002 { # Spark \u76f8\u5173\u914d\u7f6e spark: { app: { name: NebulaGraph Exchange 3.6.0 } driver: { cores: 1 maxResultSize: 1G } executor: { memory:1G } cores:{ max: 16 } } # NebulaGraph \u76f8\u5173\u914d\u7f6e nebula: { address:{ graph:[\"127.0.0.1:9669\"] #\u4efb\u610f\u4e00\u4e2a Meta \u670d\u52a1\u7684\u5730\u5740\u3002 #\u5982\u679c\u60a8\u7684 NebulaGraph \u5728\u865a\u62df\u7f51\u7edc\u4e2d\uff0c\u5982k8s\uff0c\u8bf7\u914d\u7f6e Leader Meta\u7684\u5730\u5740\u3002 meta:[\"127.0.0.1:9559\"] } user: root pswd: nebula space: basketballplayer connection: { timeout: 3000 retry: 3 } execution: { retry: 3 } error: { max: 32 output: /tmp/errors } rate: { limit: 1024 timeout: 1000 } } # \u5904\u7406\u70b9 tags: [ # \u8bbe\u7f6e Tag player \u76f8\u5173\u4fe1\u606f\u3002 { name: player type: { source: neo4j sink: client } server: \"bolt://192.168.*.*:7687\" user: neo4j password:neo4j database:neo4j exec: \"match (n:player) return n.id as id, n.age as age, n.name as name\" fields: [age,name] nebula.fields: [age,name] vertex: { field:id # udf:{ # separator:\"_\" # oldColNames:[field-0,field-1,field-2] # newColName:new-field # } # \u4e3a VID \u589e\u52a0\u6307\u5b9a\u7684\u524d\u7f00\u3002\u4f8b\u5982 VID \u4e3a 12345\uff0c\u589e\u52a0\u524d\u7f00 tag1 \u540e\u4e3a tag1_12345\u3002\u4e0b\u5212\u7ebf\u65e0\u6cd5\u4fee\u6539\u3002 # prefix:\"tag1\" # \u5bf9 string \u7c7b\u578b\u7684 VID \u8fdb\u884c\u54c8\u5e0c\u5316\u64cd\u4f5c\u3002 # policy:hash } # \u6279\u91cf\u64cd\u4f5c\u7c7b\u578b\uff0c\u5305\u62ec INSERT\u3001UPDATE \u548c DELETE\u3002\u9ed8\u8ba4\u4e3a INSERT\u3002 #writeMode: INSERT # \u6279\u91cf\u5220\u9664\u65f6\u662f\u5426\u5220\u9664\u8be5\u70b9\u5173\u8054\u7684\u51fa\u8fb9\u548c\u5165\u8fb9\u3002`writeMode`\u4e3a`DELETE`\u65f6\u8be5\u53c2\u6570\u751f\u6548\u3002 #deleteEdge: false partition: 10 batch: 1000 check_point_path: /tmp/test } # \u8bbe\u7f6e Tag team \u76f8\u5173\u4fe1\u606f\u3002 { name: team type: { source: neo4j sink: client } server: \"bolt://192.168.*.*:7687\" user: neo4j password:neo4j # bolt 3 does not support `select database`, please do not config database # database:neo4j exec: \"match (n:team) return n.id as id,n.name as name order by id(n)\" fields: [name] nebula.fields: [name] vertex: { field:id } partition: 10 batch: 1000 check_point_path: /tmp/test } ] # \u5904\u7406\u8fb9\u6570\u636e edges: [ # \u8bbe\u7f6e Edge type follow \u76f8\u5173\u4fe1\u606f { name: follow type: { source: neo4j sink: client } server: \"bolt://192.168.*.*:7687\" user: neo4j password:neo4j # bolt 3 \u4e0d\u652f\u6301\u591a\u6570\u636e\u5e93\uff0c\u8bf7\u52ff\u914d\u7f6e\u6570\u636e\u5e93\u540d\u30024 \u53ca\u4ee5\u4e0a\u53ef\u4ee5\u914d\u7f6e\u6570\u636e\u5e93\u540d\u3002 # database:neo4j exec: \"match (a:player)-[r:follow]->(b:player) return a.id as src, b.id as dst, r.degree as degree order by id(r)\" fields: [degree] nebula.fields: [degree] source: { field: src # udf:{ # separator:\"_\" # oldColNames:[field-0,field-1,field-2] # newColName:new-field # } # \u4e3a VID \u589e\u52a0\u6307\u5b9a\u7684\u524d\u7f00\u3002\u4f8b\u5982 VID \u4e3a 12345\uff0c\u589e\u52a0\u524d\u7f00 tag1 \u540e\u4e3a tag1_12345\u3002\u4e0b\u5212\u7ebf\u65e0\u6cd5\u4fee\u6539\u3002 # prefix:\"tag1\" # \u5bf9 string \u7c7b\u578b\u7684 VID \u8fdb\u884c\u54c8\u5e0c\u5316\u64cd\u4f5c\u3002 # policy:hash } target: { field: dst # udf:{ # separator:\"_\" # oldColNames:[field-0,field-1,field-2] # newColName:new-field # } # \u4e3a VID \u589e\u52a0\u6307\u5b9a\u7684\u524d\u7f00\u3002\u4f8b\u5982 VID \u4e3a 12345\uff0c\u589e\u52a0\u524d\u7f00 tag1 \u540e\u4e3a tag1_12345\u3002\u4e0b\u5212\u7ebf\u65e0\u6cd5\u4fee\u6539\u3002 # prefix:\"tag1\" # \u5bf9 string \u7c7b\u578b\u7684 VID \u8fdb\u884c\u54c8\u5e0c\u5316\u64cd\u4f5c\u3002 # policy:hash } #ranking: rank # \u6279\u91cf\u64cd\u4f5c\u7c7b\u578b\uff0c\u5305\u62ec INSERT\u3001UPDATE \u548c DELETE\u3002\u9ed8\u8ba4\u4e3a INSERT\u3002 #writeMode: INSERT partition: 10 batch: 1000 check_point_path: /tmp/test } # \u8bbe\u7f6e Edge type serve \u76f8\u5173\u4fe1\u606f { name: serve type: { source: neo4j sink: client } server: \"bolt://192.168.*.*:7687\" user: neo4j password:neo4j exec: \"match (a:player)-[r:serve]->(b:team) return a.id as src, b.id as dst, r.start_year as start_year, r.end_year as end_year order by id(r)\" fields: [start_year,end_year] nebula.fields: [start_year,end_year] source: { field: src } target: { field: dst } partition: 10 batch: 1000 check_point_path: /tmp/test } ] }","title":"\u6b65\u9aa4 3\uff1a\u4fee\u6539\u914d\u7f6e\u6587\u4ef6"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-neo4j/#exec","text":"\u5728\u914d\u7f6e tags.exec \u6216\u8005 edges.exec \u53c2\u6570\u65f6\uff0c\u9700\u8981\u586b\u5199 Cypher \u67e5\u8be2\u8bed\u53e5\u3002\u4e3a\u4e86\u4fdd\u8bc1\u6bcf\u6b21\u67e5\u8be2\u7ed3\u679c\u6392\u5e8f\u4e00\u81f4\uff0c\u5e76\u4e14\u4e3a\u4e86\u9632\u6b62\u5728\u5bfc\u5165\u65f6\u4e22\u5931\u6570\u636e\uff0c\u5f3a\u70c8\u5efa\u8bae\u5728 Cypher \u67e5\u8be2\u8bed\u53e5\u4e2d\u52a0\u5165 ORDER BY \u5b50\u53e5\uff0c\u540c\u65f6\uff0c\u4e3a\u4e86\u63d0\u9ad8\u6570\u636e\u5bfc\u5165\u6548\u7387\uff0c\u6700\u597d\u9009\u53d6\u6709\u7d22\u5f15\u7684\u5c5e\u6027\u4f5c\u4e3a\u6392\u5e8f\u7684\u5c5e\u6027\u3002\u5982\u679c\u6ca1\u6709\u7d22\u5f15\uff0c\u7528\u6237\u4e5f\u53ef\u4ee5\u89c2\u5bdf\u9ed8\u8ba4\u7684\u6392\u5e8f\uff0c\u9009\u62e9\u5408\u9002\u7684\u5c5e\u6027\u7528\u4e8e\u6392\u5e8f\uff0c\u4ee5\u63d0\u9ad8\u6548\u7387\u3002\u5982\u679c\u9ed8\u8ba4\u7684\u6392\u5e8f\u627e\u4e0d\u5230\u89c4\u5f8b\uff0c\u7528\u6237\u53ef\u4ee5\u6839\u636e\u70b9\u6216\u5173\u7cfb\u7684 ID \u8fdb\u884c\u6392\u5e8f\uff0c\u5e76\u4e14\u5c06 partition \u8bbe\u7f6e\u4e3a\u4e00\u4e2a\u5c3d\u91cf\u5c0f\u7684\u503c\uff0c\u51cf\u8f7b Neo4j \u7684\u6392\u5e8f\u538b\u529b\u3002 \u8bf4\u660e \uff1a\u4f7f\u7528 ORDER BY \u5b50\u53e5\u4f1a\u5ef6\u957f\u6570\u636e\u5bfc\u5165\u7684\u65f6\u95f4\u3002 \u53e6\u5916\uff0cExchange \u9700\u8981\u5728\u4e0d\u540c Spark \u5206\u533a\u6267\u884c\u4e0d\u540c SKIP \u548c LIMIT \u7684 Cypher \u8bed\u53e5\uff0c\u6240\u4ee5\u5728 tags.exec \u548c edges.exec \u5bf9\u5e94\u7684 Cypher \u8bed\u53e5\u4e2d\u4e0d\u80fd\u542b\u6709 SKIP \u548c LIMIT \u5b50\u53e5\u3002","title":"exec \u914d\u7f6e\u8bf4\u660e"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-neo4j/#tagsvertex_edgesvertex","text":"NebulaGraph\u5728\u521b\u5efa\u70b9\u548c\u8fb9\u65f6\u4f1a\u5c06 ID \u4f5c\u4e3a\u552f\u4e00\u4e3b\u952e\uff0c\u5982\u679c\u4e3b\u952e\u5df2\u5b58\u5728\u5219\u4f1a\u8986\u76d6\u8be5\u4e3b\u952e\u4e2d\u7684\u6570\u636e\u3002\u6240\u4ee5\uff0c\u5047\u5982\u5c06\u67d0\u4e2a Neo4j \u5c5e\u6027\u503c\u4f5c\u4e3aNebulaGraph\u7684 ID\uff0c\u800c\u8fd9\u4e2a\u5c5e\u6027\u503c\u5728 Neo4j \u4e2d\u662f\u6709\u91cd\u590d\u7684\uff0c\u5c31\u4f1a\u5bfc\u81f4\u91cd\u590d ID\uff0c\u5b83\u4eec\u5bf9\u5e94\u7684\u6570\u636e\u6709\u4e14\u53ea\u6709\u4e00\u6761\u4f1a\u5b58\u5165NebulaGraph\u4e2d\uff0c\u5176\u5b83\u7684\u5219\u4f1a\u88ab\u8986\u76d6\u6389\u3002\u7531\u4e8e\u6570\u636e\u5bfc\u5165\u8fc7\u7a0b\u662f\u5e76\u53d1\u5730\u5f80NebulaGraph\u4e2d\u5199\u6570\u636e\uff0c\u6700\u7ec8\u4fdd\u5b58\u7684\u6570\u636e\u5e76\u4e0d\u80fd\u4fdd\u8bc1\u662f Neo4j \u4e2d\u6700\u65b0\u7684\u6570\u636e\u3002","title":"tags.vertex \u6216 edges.vertex \u914d\u7f6e\u8bf4\u660e"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-neo4j/#check_point_path","text":"\u5982\u679c\u542f\u7528\u4e86\u65ad\u70b9\u7eed\u4f20\u529f\u80fd\uff0c\u4e3a\u907f\u514d\u6570\u636e\u4e22\u5931\uff0c\u5728\u65ad\u70b9\u548c\u7eed\u4f20\u4e4b\u95f4\uff0c\u6570\u636e\u5e93\u4e0d\u5e94\u8be5\u6539\u53d8\u72b6\u6001\uff0c\u4f8b\u5982\u4e0d\u80fd\u6dfb\u52a0\u6570\u636e\u6216\u5220\u9664\u6570\u636e\uff0c\u540c\u65f6\uff0c\u4e0d\u80fd\u66f4\u6539 partition \u6570\u91cf\u914d\u7f6e\u3002","title":"check_point_path \u914d\u7f6e\u8bf4\u660e"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-neo4j/#4nebulagraph","text":"\u8fd0\u884c\u5982\u4e0b\u547d\u4ee4\u5c06\u6587\u4ef6\u6570\u636e\u5bfc\u5165\u5230NebulaGraph\u4e2d\u3002\u5173\u4e8e\u53c2\u6570\u7684\u8bf4\u660e\uff0c\u8bf7\u53c2\u89c1 \u5bfc\u5165\u547d\u4ee4\u53c2\u6570 \u3002 ${ SPARK_HOME } /bin/spark-submit --master \"local\" --class com.vesoft.nebula.exchange.Exchange <nebula-exchange-3.6.0.jar_path> -c <neo4j_application.conf_path> Note JAR \u5305\u6709\u4e24\u79cd\u83b7\u53d6\u65b9\u5f0f\uff1a \u81ea\u884c\u7f16\u8bd1 \u6216\u8005\u4ece maven \u4ed3\u5e93\u4e0b\u8f7d\u3002 \u793a\u4f8b\uff1a ${ SPARK_HOME } /bin/spark-submit --master \"local\" --class com.vesoft.nebula.exchange.Exchange /root/nebula-exchange/nebula-exchange/target/nebula-exchange-3.6.0.jar -c /root/nebula-exchange/nebula-exchange/target/classes/neo4j_application.conf \u7528\u6237\u53ef\u4ee5\u5728\u8fd4\u56de\u4fe1\u606f\u4e2d\u641c\u7d22 batchSuccess.<tag_name/edge_name> \uff0c\u786e\u8ba4\u6210\u529f\u7684\u6570\u91cf\u3002\u4f8b\u5982 batchSuccess.follow: 300 \u3002","title":"\u6b65\u9aa4 4\uff1a\u5411NebulaGraph\u5bfc\u5165\u6570\u636e"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-neo4j/#5","text":"\u7528\u6237\u53ef\u4ee5\u5728NebulaGraph\u5ba2\u6237\u7aef\uff08\u4f8b\u5982 NebulaGraph Studio\uff09\u4e2d\u6267\u884c\u67e5\u8be2\u8bed\u53e5\uff0c\u786e\u8ba4\u6570\u636e\u662f\u5426\u5df2\u5bfc\u5165\u3002\u4f8b\u5982\uff1a LOOKUP ON player YIELD id(vertex); \u7528\u6237\u4e5f\u53ef\u4ee5\u4f7f\u7528\u547d\u4ee4 SHOW STATS \u67e5\u770b\u7edf\u8ba1\u6570\u636e\u3002","title":"\u6b65\u9aa4 5\uff1a\uff08\u53ef\u9009\uff09\u9a8c\u8bc1\u6570\u636e"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-neo4j/#6nebulagraph","text":"\u5bfc\u5165\u6570\u636e\u540e\uff0c\u7528\u6237\u53ef\u4ee5\u5728NebulaGraph\u4e2d\u91cd\u65b0\u521b\u5efa\u5e76\u91cd\u5efa\u7d22\u5f15\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1 \u7d22\u5f15\u4ecb\u7ecd \u3002","title":"\u6b65\u9aa4 6\uff1a\uff08\u5982\u6709\uff09\u5728NebulaGraph\u4e2d\u91cd\u5efa\u7d22\u5f15"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-oracle/","text":"\u5bfc\u5165 Oracle \u6570\u636e \u00b6 \u672c\u6587\u4ee5\u4e00\u4e2a\u793a\u4f8b\u8bf4\u660e\u5982\u4f55\u4f7f\u7528 Exchange \u5c06\u5b58\u50a8\u5728 Oracle \u4e0a\u7684\u6570\u636e\u5bfc\u5165NebulaGraph\u3002 \u6570\u636e\u96c6 \u00b6 \u672c\u6587\u4ee5 basketballplayer \u6570\u636e\u96c6 \u4e3a\u4f8b\u3002 \u5728\u672c\u793a\u4f8b\u4e2d\uff0c\u8be5\u6570\u636e\u96c6\u5df2\u7ecf\u5b58\u5165 Oracle \u4e2d\u540d\u4e3a basketball \u7684\u6570\u636e\u5e93\u4e2d\uff0c\u4ee5 player \u3001 team \u3001 follow \u548c serve \u56db\u4e2a\u8868\u5b58\u50a8\u4e86\u6240\u6709\u70b9\u548c\u8fb9\u7684\u4fe1\u606f\u3002\u4ee5\u4e0b\u4e3a\u5404\u4e2a\u8868\u7684\u7ed3\u6784\u3002 oracle > desc player ; + -----------+-------+---------------+ | Column | Null | Type | + -----------+-------+---------------+ | PLAYERID | - | VARCHAR2 ( 30 ) | | NAME | - | VARCHAR2 ( 30 ) | | AGE | - | NUMBER | + -----------+-------+---------------+ oracle > desc team ; + -----------+-------+---------------+ | Column | Null | Type | + -----------+-------+---------------+ | TEAMID | - | VARCHAR2 ( 30 ) | | NAME | - | VARCHAR2 ( 30 ) | + -----------+-------+---------------+ oracle > desc follow ; + -------------+-------+---------------+ | Column | Null | Type | + -------------+-------+---------------+ | SRC_PLAYER | - | VARCHAR2 ( 30 ) | | DST_PLAYER | - | VARCHAR2 ( 30 ) | | DEGREE | - | NUMBER | + -------------+-------+---------------+ oracle > desc serve ; + ------------+-------+---------------+ | Column | Null | Type | + ------------+-------+---------------+ | PLAYERID | - | VARCHAR2 ( 30 ) | | TEAMID | - | VARCHAR2 ( 30 ) | | START_YEAR | - | NUMBER | | END_YEAR | - | NUMBER | + ------------+-------+---------------+ \u73af\u5883\u914d\u7f6e \u00b6 \u672c\u6587\u793a\u4f8b\u5728 MacOS \u4e0b\u5b8c\u6210\uff0c\u4ee5\u4e0b\u662f\u76f8\u5173\u7684\u73af\u5883\u914d\u7f6e\u4fe1\u606f\uff1a \u786c\u4ef6\u89c4\u683c\uff1a CPU\uff1a1.7 GHz Quad-Core Intel Core i7 \u5185\u5b58\uff1a16 GB Spark\uff1a2.4.7\uff0c\u5355\u673a\u7248 NebulaGraph\uff1a3.6.0\u3002 \u524d\u63d0\u6761\u4ef6 \u00b6 \u5f00\u59cb\u5bfc\u5165\u6570\u636e\u4e4b\u524d\uff0c\u7528\u6237\u9700\u8981\u786e\u8ba4\u4ee5\u4e0b\u4fe1\u606f\uff1a \u5df2\u7ecf \u5b89\u88c5\u90e8\u7f72NebulaGraph \u5e76\u83b7\u53d6\u5982\u4e0b\u4fe1\u606f\uff1a Graph \u670d\u52a1\u548c Meta \u670d\u52a1\u7684\u7684 IP \u5730\u5740\u548c\u7aef\u53e3\u3002 \u62e5\u6709NebulaGraph\u5199\u6743\u9650\u7684\u7528\u6237\u540d\u548c\u5bc6\u7801\u3002 \u5df2\u7ecf\u7f16\u8bd1 Exchange\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1 \u7f16\u8bd1 Exchange \u3002\u672c\u793a\u4f8b\u4e2d\u4f7f\u7528 Exchange 3.6.0\u3002 \u5df2\u7ecf\u5b89\u88c5 Spark\u3002 \u4e86\u89e3NebulaGraph\u4e2d\u521b\u5efa\u7684 Schema \u4fe1\u606f\uff0c\u5305\u62ec Tag \u548c Edge type \u7684\u540d\u79f0\u3001\u5c5e\u6027\u7b49\u3002 \u5df2\u7ecf\u5b89\u88c5\u5e76\u5f00\u542f Hadoop \u670d\u52a1\u3002 \u6ce8\u610f\u4e8b\u9879 \u00b6 nebula-exchange_spark_2.2 \u4ec5\u652f\u6301\u5355\u8868\u67e5\u8be2\uff0c\u4e0d\u652f\u6301\u591a\u8868\u67e5\u8be2\u3002 \u64cd\u4f5c\u6b65\u9aa4 \u00b6 \u6b65\u9aa4 1\uff1a\u5728NebulaGraph\u4e2d\u521b\u5efa Schema \u00b6 \u5206\u6790\u6570\u636e\uff0c\u6309\u4ee5\u4e0b\u6b65\u9aa4\u5728NebulaGraph\u4e2d\u521b\u5efa Schema\uff1a \u786e\u8ba4 Schema \u8981\u7d20\u3002NebulaGraph\u4e2d\u7684 Schema \u8981\u7d20\u5982\u4e0b\u8868\u6240\u793a\u3002 \u8981\u7d20 \u540d\u79f0 \u5c5e\u6027 Tag player name string, age int Tag team name string Edge Type follow degree int Edge Type serve start_year int, end_year int \u5728NebulaGraph\u4e2d\u521b\u5efa\u4e00\u4e2a\u56fe\u7a7a\u95f4 basketballplayer \uff0c\u5e76\u521b\u5efa\u4e00\u4e2a Schema\uff0c\u5982\u4e0b\u6240\u793a\u3002 ## \u521b\u5efa\u56fe\u7a7a\u95f4 nebula> CREATE SPACE basketballplayer \\ (partition_num = 10, \\ replica_factor = 1, \\ vid_type = FIXED_STRING(30)); ## \u9009\u62e9\u56fe\u7a7a\u95f4 basketballplayer nebula> USE basketballplayer; ## \u521b\u5efa Tag player nebula> CREATE TAG player(name string, age int); ## \u521b\u5efa Tag team nebula> CREATE TAG team(name string); ## \u521b\u5efa Edge type follow nebula> CREATE EDGE follow(degree int); ## \u521b\u5efa Edge type serve nebula> CREATE EDGE serve(start_year int, end_year int); \u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u89c1 \u5feb\u901f\u5f00\u59cb \u3002 \u6b65\u9aa4 2\uff1a\u4fee\u6539\u914d\u7f6e\u6587\u4ef6 \u00b6 \u7f16\u8bd1 Exchange \u540e\uff0c\u590d\u5236 target/classes/application.conf \u6587\u4ef6\u8bbe\u7f6e Oracle \u6570\u636e\u6e90\u76f8\u5173\u7684\u914d\u7f6e\u3002\u5728\u672c\u793a\u4f8b\u4e2d\uff0c\u590d\u5236\u7684\u6587\u4ef6\u540d\u4e3a oracle_application.conf \u3002\u5404\u4e2a\u914d\u7f6e\u9879\u7684\u8be6\u7ec6\u8bf4\u660e\u8bf7\u53c2\u89c1 \u914d\u7f6e\u8bf4\u660e \u3002 { # Spark \u76f8\u5173\u914d\u7f6e spark: { app: { name: NebulaGraph Exchange 3.6.0 } driver: { cores: 1 maxResultSize: 1G } cores: { max: 16 } } # NebulaGraph \u76f8\u5173\u914d\u7f6e nebula: { address:{ # \u4ee5\u4e0b\u4e3a NebulaGraph \u7684 Graph \u670d\u52a1\u548c Meta \u670d\u52a1\u6240\u5728\u673a\u5668\u7684 IP \u5730\u5740\u53ca\u7aef\u53e3\u3002 # \u5982\u679c\u6709\u591a\u4e2a\u5730\u5740\uff0c\u683c\u5f0f\u4e3a \"ip1:port\",\"ip2:port\",\"ip3:port\"\u3002 # \u4e0d\u540c\u5730\u5740\u4e4b\u95f4\u4ee5\u82f1\u6587\u9017\u53f7 (,) \u9694\u5f00\u3002 graph:[\"127.0.0.1:9669\"] #\u4efb\u610f\u4e00\u4e2a Meta \u670d\u52a1\u7684\u5730\u5740\u3002 #\u5982\u679c\u60a8\u7684 NebulaGraph \u5728\u865a\u62df\u7f51\u7edc\u4e2d\uff0c\u5982k8s\uff0c\u8bf7\u914d\u7f6e Leader Meta\u7684\u5730\u5740\u3002 meta:[\"127.0.0.1:9559\"] } # \u586b\u5199\u7684\u8d26\u53f7\u5fc5\u987b\u62e5\u6709 NebulaGraph \u76f8\u5e94\u56fe\u7a7a\u95f4\u7684\u5199\u6570\u636e\u6743\u9650\u3002 user: root pswd: nebula # \u586b\u5199 NebulaGraph \u4e2d\u9700\u8981\u5199\u5165\u6570\u636e\u7684\u56fe\u7a7a\u95f4\u540d\u79f0\u3002 space: basketballplayer connection: { timeout: 3000 retry: 3 } execution: { retry: 3 } error: { max: 32 output: /tmp/errors } rate: { limit: 1024 timeout: 1000 } } # \u5904\u7406\u70b9 tags: [ { # NebulaGraph \u4e2d\u5bf9\u5e94\u7684 Tag \u540d\u79f0\u3002 name: player type: { # \u6307\u5b9a\u6570\u636e\u6e90\u6587\u4ef6\u683c\u5f0f\uff0c\u8bbe\u7f6e\u4e3a Oracle\u3002 source: oracle # \u6307\u5b9a\u5982\u4f55\u5c06\u70b9\u6570\u636e\u5bfc\u5165NebulaGraph\uff1aClient \u6216 SST\u3002 sink: client } url:\"jdbc:oracle:thin:@host:1521:basketball\" driver: \"oracle.jdbc.driver.OracleDriver\" user: \"root\" password: \"123456\" # \u626b\u63cf\u5355\u4e2a\u8868\u8bfb\u53d6\u6570\u636e\u3002 # nebula-exchange_spark_2.2 \u5fc5\u987b\u914d\u7f6e\u8be5\u53c2\u6570\u3002\u4e0d\u652f\u6301\u914d\u7f6e sentence\u3002 # nebula-exchange_spark_2.4 \u548c nebula-exchange_spark_3.0 \u53ef\u4ee5\u914d\u7f6e\u8be5\u53c2\u6570\uff0c\u4f46\u662f\u4e0d\u80fd\u548c sentence \u540c\u65f6\u914d\u7f6e\u3002 table:\"basketball.player\" # \u901a\u8fc7\u67e5\u8be2\u8bed\u53e5\u8bfb\u53d6\u6570\u636e\u3002 # nebula-exchange_spark_2.2 \u4e0d\u652f\u6301\u8be5\u53c2\u6570\u3002 # nebula-exchange_spark_2.4 \u548c nebula-exchange_spark_3.0 \u53ef\u4ee5\u914d\u7f6e\u8be5\u53c2\u6570\uff0c\u4f46\u662f\u4e0d\u80fd\u548c table \u540c\u65f6\u914d\u7f6e\u3002\u652f\u6301\u591a\u8868\u67e5\u8be2\u3002 # sentence: \"select * from people, player, team\" # \u5728 fields \u91cc\u6307\u5b9a player \u8868\u4e2d\u7684\u5217\u540d\u79f0\uff0c\u5176\u5bf9\u5e94\u7684 value \u4f1a\u4f5c\u4e3aNebulaGraph\u4e2d\u6307\u5b9a\u5c5e\u6027\u3002 # fields \u548c nebula.fields \u91cc\u7684\u914d\u7f6e\u5fc5\u987b\u4e00\u4e00\u5bf9\u5e94\u3002 # \u5982\u679c\u9700\u8981\u6307\u5b9a\u591a\u4e2a\u5217\u540d\u79f0\uff0c\u7528\u82f1\u6587\u9017\u53f7\uff08,\uff09\u9694\u5f00\u3002 fields: [age,name] nebula.fields: [age,name] # \u6307\u5b9a\u8868\u4e2d\u67d0\u4e00\u5217\u6570\u636e\u4e3aNebulaGraph\u4e2d\u70b9 VID \u7684\u6765\u6e90\u3002 vertex: { field:playerid # udf:{ # separator:\"_\" # oldColNames:[field-0,field-1,field-2] # newColName:new-field # } # \u4e3a VID \u589e\u52a0\u6307\u5b9a\u7684\u524d\u7f00\u3002\u4f8b\u5982 VID \u4e3a 12345\uff0c\u589e\u52a0\u524d\u7f00 tag1 \u540e\u4e3a tag1_12345\u3002\u4e0b\u5212\u7ebf\u65e0\u6cd5\u4fee\u6539\u3002 # prefix:\"tag1\" # \u5bf9 string \u7c7b\u578b\u7684 VID \u8fdb\u884c\u54c8\u5e0c\u5316\u64cd\u4f5c\u3002 # policy:hash } # \u6279\u91cf\u64cd\u4f5c\u7c7b\u578b\uff0c\u5305\u62ec INSERT\u3001UPDATE \u548c DELETE\u3002\u9ed8\u8ba4\u4e3a INSERT\u3002 #writeMode: INSERT # \u6279\u91cf\u5220\u9664\u65f6\u662f\u5426\u5220\u9664\u8be5\u70b9\u5173\u8054\u7684\u51fa\u8fb9\u548c\u5165\u8fb9\u3002`writeMode`\u4e3a`DELETE`\u65f6\u8be5\u53c2\u6570\u751f\u6548\u3002 #deleteEdge: false # \u5355\u6279\u6b21\u5199\u5165NebulaGraph\u7684\u6570\u636e\u6761\u6570\u3002 batch: 256 # Spark \u5206\u533a\u6570\u91cf partition: 32 } # \u8bbe\u7f6e Tag team \u76f8\u5173\u4fe1\u606f\u3002 { name: team type: { source: oracle sink: client } url:\"jdbc:oracle:thin:@host:1521:db\" driver: \"oracle.jdbc.driver.OracleDriver\" user: \"root\" password: \"123456\" table: \"basketball.team\" sentence: \"select teamid, name from team\" fields: [name] nebula.fields: [name] vertex: { field: teamid } batch: 256 partition: 32 } ] # \u5904\u7406\u8fb9\u6570\u636e edges: [ # \u8bbe\u7f6e Edge type follow \u76f8\u5173\u4fe1\u606f { # NebulaGraph\u4e2d\u5bf9\u5e94\u7684 Edge type \u540d\u79f0\u3002 name: follow type: { # \u6307\u5b9a\u6570\u636e\u6e90\u6587\u4ef6\u683c\u5f0f\uff0c\u8bbe\u7f6e\u4e3a Oracle\u3002 source: oracle # \u6307\u5b9a\u8fb9\u6570\u636e\u5bfc\u5165 NebulaGraph \u7684\u65b9\u5f0f\uff0c # \u6307\u5b9a\u5982\u4f55\u5c06\u70b9\u6570\u636e\u5bfc\u5165NebulaGraph\uff1aClient \u6216 SST\u3002 sink: client } url:\"jdbc:oracle:thin:@host:1521:db\" driver: \"oracle.jdbc.driver.OracleDriver\" user: \"root\" password: \"123456\" # \u626b\u63cf\u5355\u4e2a\u8868\u8bfb\u53d6\u6570\u636e\u3002 # nebula-exchange_spark_2.2 \u5fc5\u987b\u914d\u7f6e\u8be5\u53c2\u6570\u3002\u4e0d\u652f\u6301\u914d\u7f6e sentence\u3002 # nebula-exchange_spark_2.4 \u548c nebula-exchange_spark_3.0 \u53ef\u4ee5\u914d\u7f6e\u8be5\u53c2\u6570\uff0c\u4f46\u662f\u4e0d\u80fd\u548c sentence \u540c\u65f6\u914d\u7f6e\u3002 table:\"basketball.follow\" # \u901a\u8fc7\u67e5\u8be2\u8bed\u53e5\u8bfb\u53d6\u6570\u636e\u3002 # nebula-exchange_spark_2.2 \u4e0d\u652f\u6301\u8be5\u53c2\u6570\u3002 # nebula-exchange_spark_2.4 \u548c nebula-exchange_spark_3.0 \u53ef\u4ee5\u914d\u7f6e\u8be5\u53c2\u6570\uff0c\u4f46\u662f\u4e0d\u80fd\u548c table \u540c\u65f6\u914d\u7f6e\u3002\u652f\u6301\u591a\u8868\u67e5\u8be2\u3002 # sentence: \"select * from follow, serve\" # \u5728 fields \u91cc\u6307\u5b9a follow \u8868\u4e2d\u7684\u5217\u540d\u79f0\uff0c\u5176\u5bf9\u5e94\u7684 value \u4f1a\u4f5c\u4e3aNebulaGraph\u4e2d\u6307\u5b9a\u5c5e\u6027\u3002 # fields \u548c nebula.fields \u91cc\u7684\u914d\u7f6e\u5fc5\u987b\u4e00\u4e00\u5bf9\u5e94\u3002 # \u5982\u679c\u9700\u8981\u6307\u5b9a\u591a\u4e2a\u5217\u540d\u79f0\uff0c\u7528\u82f1\u6587\u9017\u53f7\uff08,\uff09\u9694\u5f00\u3002 fields: [degree] nebula.fields: [degree] # \u5728 source \u91cc\uff0c\u5c06 follow \u8868\u4e2d\u67d0\u4e00\u5217\u4f5c\u4e3a\u8fb9\u7684\u8d77\u59cb\u70b9\u6570\u636e\u6e90\u3002 # \u5728 target \u91cc\uff0c\u5c06 follow \u8868\u4e2d\u67d0\u4e00\u5217\u4f5c\u4e3a\u8fb9\u7684\u76ee\u7684\u70b9\u6570\u636e\u6e90\u3002 source: { field: src_player # udf:{ # separator:\"_\" # oldColNames:[field-0,field-1,field-2] # newColName:new-field # } # \u4e3a VID \u589e\u52a0\u6307\u5b9a\u7684\u524d\u7f00\u3002\u4f8b\u5982 VID \u4e3a 12345\uff0c\u589e\u52a0\u524d\u7f00 tag1 \u540e\u4e3a tag1_12345\u3002\u4e0b\u5212\u7ebf\u65e0\u6cd5\u4fee\u6539\u3002 # prefix:\"tag1\" # \u5bf9 string \u7c7b\u578b\u7684 VID \u8fdb\u884c\u54c8\u5e0c\u5316\u64cd\u4f5c\u3002 # policy:hash } target: { field: dst_player # udf:{ # separator:\"_\" # oldColNames:[field-0,field-1,field-2] # newColName:new-field # } # \u4e3a VID \u589e\u52a0\u6307\u5b9a\u7684\u524d\u7f00\u3002\u4f8b\u5982 VID \u4e3a 12345\uff0c\u589e\u52a0\u524d\u7f00 tag1 \u540e\u4e3a tag1_12345\u3002\u4e0b\u5212\u7ebf\u65e0\u6cd5\u4fee\u6539\u3002 # prefix:\"tag1\" # \u5bf9 string \u7c7b\u578b\u7684 VID \u8fdb\u884c\u54c8\u5e0c\u5316\u64cd\u4f5c\u3002 # policy:hash } # \u6307\u5b9a\u4e00\u4e2a\u5217\u4f5c\u4e3a rank \u7684\u6e90\uff08\u53ef\u9009\uff09\u3002 #ranking: rank # \u6279\u91cf\u64cd\u4f5c\u7c7b\u578b\uff0c\u5305\u62ec INSERT\u3001UPDATE \u548c DELETE\u3002\u9ed8\u8ba4\u4e3a INSERT\u3002 #writeMode: INSERT # \u5355\u6279\u6b21\u5199\u5165NebulaGraph\u7684\u6570\u636e\u6761\u6570\u3002 batch: 256 # Spark \u5206\u533a\u6570\u91cf partition: 32 } # \u8bbe\u7f6e Edge type serve \u76f8\u5173\u4fe1\u606f { name: serve type: { source: oracle sink: client } url:\"jdbc:oracle:thin:@host:1521:db\" driver: \"oracle.jdbc.driver.OracleDriver\" user: \"root\" password: \"123456\" table: \"basketball.serve\" sentence: \"select playerid, teamid, start_year, end_year from serve\" fields: [start_year,end_year] nebula.fields: [start_year,end_year] source: { field: playerid } target: { field: teamid } # \u6307\u5b9a\u4e00\u4e2a\u5217\u4f5c\u4e3a rank \u7684\u6e90\uff08\u53ef\u9009\uff09\u3002 #ranking: rank batch: 256 partition: 32 } ] } \u6b65\u9aa4 3\uff1a\u5411NebulaGraph\u5bfc\u5165\u6570\u636e \u00b6 \u8fd0\u884c\u5982\u4e0b\u547d\u4ee4\u5c06 Oracle \u6570\u636e\u5bfc\u5165\u5230NebulaGraph\u4e2d\u3002\u5173\u4e8e\u53c2\u6570\u7684\u8bf4\u660e\uff0c\u8bf7\u53c2\u89c1 \u5bfc\u5165\u547d\u4ee4\u53c2\u6570 \u3002 ${ SPARK_HOME } /bin/spark-submit --master \"local\" --class com.vesoft.nebula.exchange.Exchange <nebula-exchange-3.6.0.jar_path> -c <oracle_application.conf_path> Note JAR \u5305\u6709\u4e24\u79cd\u83b7\u53d6\u65b9\u5f0f\uff1a \u81ea\u884c\u7f16\u8bd1 \u6216\u8005\u4ece maven \u4ed3\u5e93\u4e0b\u8f7d\u3002 \u793a\u4f8b\uff1a ${ SPARK_HOME } /bin/spark-submit --master \"local\" --class com.vesoft.nebula.exchange.Exchange /root/nebula-exchange/nebula-exchange/target/nebula-exchange-3.6.0.jar -c /root/nebula-exchange/nebula-exchange/target/classes/oracle_application.conf \u7528\u6237\u53ef\u4ee5\u5728\u8fd4\u56de\u4fe1\u606f\u4e2d\u641c\u7d22 batchSuccess.<tag_name/edge_name> \uff0c\u786e\u8ba4\u6210\u529f\u7684\u6570\u91cf\u3002\u4f8b\u5982 batchSuccess.follow: 300 \u3002 \u6b65\u9aa4 4\uff1a\uff08\u53ef\u9009\uff09\u9a8c\u8bc1\u6570\u636e \u00b6 \u7528\u6237\u53ef\u4ee5\u5728NebulaGraph\u5ba2\u6237\u7aef\uff08\u4f8b\u5982 NebulaGraph Studio\uff09\u4e2d\u6267\u884c\u67e5\u8be2\u8bed\u53e5\uff0c\u786e\u8ba4\u6570\u636e\u662f\u5426\u5df2\u5bfc\u5165\u3002\u4f8b\u5982\uff1a LOOKUP ON player YIELD id(vertex); \u7528\u6237\u4e5f\u53ef\u4ee5\u4f7f\u7528\u547d\u4ee4 SHOW STATS \u67e5\u770b\u7edf\u8ba1\u6570\u636e\u3002 \u6b65\u9aa4 5\uff1a\uff08\u5982\u6709\uff09\u5728NebulaGraph\u4e2d\u91cd\u5efa\u7d22\u5f15 \u00b6 \u5bfc\u5165\u6570\u636e\u540e\uff0c\u7528\u6237\u53ef\u4ee5\u5728NebulaGraph\u4e2d\u91cd\u65b0\u521b\u5efa\u5e76\u91cd\u5efa\u7d22\u5f15\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1 \u7d22\u5f15\u4ecb\u7ecd \u3002","title":"\u5bfc\u5165 Oracle \u6570\u636e"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-oracle/#oracle","text":"\u672c\u6587\u4ee5\u4e00\u4e2a\u793a\u4f8b\u8bf4\u660e\u5982\u4f55\u4f7f\u7528 Exchange \u5c06\u5b58\u50a8\u5728 Oracle \u4e0a\u7684\u6570\u636e\u5bfc\u5165NebulaGraph\u3002","title":"\u5bfc\u5165 Oracle \u6570\u636e"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-oracle/#_1","text":"\u672c\u6587\u4ee5 basketballplayer \u6570\u636e\u96c6 \u4e3a\u4f8b\u3002 \u5728\u672c\u793a\u4f8b\u4e2d\uff0c\u8be5\u6570\u636e\u96c6\u5df2\u7ecf\u5b58\u5165 Oracle \u4e2d\u540d\u4e3a basketball \u7684\u6570\u636e\u5e93\u4e2d\uff0c\u4ee5 player \u3001 team \u3001 follow \u548c serve \u56db\u4e2a\u8868\u5b58\u50a8\u4e86\u6240\u6709\u70b9\u548c\u8fb9\u7684\u4fe1\u606f\u3002\u4ee5\u4e0b\u4e3a\u5404\u4e2a\u8868\u7684\u7ed3\u6784\u3002 oracle > desc player ; + -----------+-------+---------------+ | Column | Null | Type | + -----------+-------+---------------+ | PLAYERID | - | VARCHAR2 ( 30 ) | | NAME | - | VARCHAR2 ( 30 ) | | AGE | - | NUMBER | + -----------+-------+---------------+ oracle > desc team ; + -----------+-------+---------------+ | Column | Null | Type | + -----------+-------+---------------+ | TEAMID | - | VARCHAR2 ( 30 ) | | NAME | - | VARCHAR2 ( 30 ) | + -----------+-------+---------------+ oracle > desc follow ; + -------------+-------+---------------+ | Column | Null | Type | + -------------+-------+---------------+ | SRC_PLAYER | - | VARCHAR2 ( 30 ) | | DST_PLAYER | - | VARCHAR2 ( 30 ) | | DEGREE | - | NUMBER | + -------------+-------+---------------+ oracle > desc serve ; + ------------+-------+---------------+ | Column | Null | Type | + ------------+-------+---------------+ | PLAYERID | - | VARCHAR2 ( 30 ) | | TEAMID | - | VARCHAR2 ( 30 ) | | START_YEAR | - | NUMBER | | END_YEAR | - | NUMBER | + ------------+-------+---------------+","title":"\u6570\u636e\u96c6"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-oracle/#_2","text":"\u672c\u6587\u793a\u4f8b\u5728 MacOS \u4e0b\u5b8c\u6210\uff0c\u4ee5\u4e0b\u662f\u76f8\u5173\u7684\u73af\u5883\u914d\u7f6e\u4fe1\u606f\uff1a \u786c\u4ef6\u89c4\u683c\uff1a CPU\uff1a1.7 GHz Quad-Core Intel Core i7 \u5185\u5b58\uff1a16 GB Spark\uff1a2.4.7\uff0c\u5355\u673a\u7248 NebulaGraph\uff1a3.6.0\u3002","title":"\u73af\u5883\u914d\u7f6e"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-oracle/#_3","text":"\u5f00\u59cb\u5bfc\u5165\u6570\u636e\u4e4b\u524d\uff0c\u7528\u6237\u9700\u8981\u786e\u8ba4\u4ee5\u4e0b\u4fe1\u606f\uff1a \u5df2\u7ecf \u5b89\u88c5\u90e8\u7f72NebulaGraph \u5e76\u83b7\u53d6\u5982\u4e0b\u4fe1\u606f\uff1a Graph \u670d\u52a1\u548c Meta \u670d\u52a1\u7684\u7684 IP \u5730\u5740\u548c\u7aef\u53e3\u3002 \u62e5\u6709NebulaGraph\u5199\u6743\u9650\u7684\u7528\u6237\u540d\u548c\u5bc6\u7801\u3002 \u5df2\u7ecf\u7f16\u8bd1 Exchange\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1 \u7f16\u8bd1 Exchange \u3002\u672c\u793a\u4f8b\u4e2d\u4f7f\u7528 Exchange 3.6.0\u3002 \u5df2\u7ecf\u5b89\u88c5 Spark\u3002 \u4e86\u89e3NebulaGraph\u4e2d\u521b\u5efa\u7684 Schema \u4fe1\u606f\uff0c\u5305\u62ec Tag \u548c Edge type \u7684\u540d\u79f0\u3001\u5c5e\u6027\u7b49\u3002 \u5df2\u7ecf\u5b89\u88c5\u5e76\u5f00\u542f Hadoop \u670d\u52a1\u3002","title":"\u524d\u63d0\u6761\u4ef6"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-oracle/#_4","text":"nebula-exchange_spark_2.2 \u4ec5\u652f\u6301\u5355\u8868\u67e5\u8be2\uff0c\u4e0d\u652f\u6301\u591a\u8868\u67e5\u8be2\u3002","title":"\u6ce8\u610f\u4e8b\u9879"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-oracle/#_5","text":"","title":"\u64cd\u4f5c\u6b65\u9aa4"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-oracle/#1nebulagraph_schema","text":"\u5206\u6790\u6570\u636e\uff0c\u6309\u4ee5\u4e0b\u6b65\u9aa4\u5728NebulaGraph\u4e2d\u521b\u5efa Schema\uff1a \u786e\u8ba4 Schema \u8981\u7d20\u3002NebulaGraph\u4e2d\u7684 Schema \u8981\u7d20\u5982\u4e0b\u8868\u6240\u793a\u3002 \u8981\u7d20 \u540d\u79f0 \u5c5e\u6027 Tag player name string, age int Tag team name string Edge Type follow degree int Edge Type serve start_year int, end_year int \u5728NebulaGraph\u4e2d\u521b\u5efa\u4e00\u4e2a\u56fe\u7a7a\u95f4 basketballplayer \uff0c\u5e76\u521b\u5efa\u4e00\u4e2a Schema\uff0c\u5982\u4e0b\u6240\u793a\u3002 ## \u521b\u5efa\u56fe\u7a7a\u95f4 nebula> CREATE SPACE basketballplayer \\ (partition_num = 10, \\ replica_factor = 1, \\ vid_type = FIXED_STRING(30)); ## \u9009\u62e9\u56fe\u7a7a\u95f4 basketballplayer nebula> USE basketballplayer; ## \u521b\u5efa Tag player nebula> CREATE TAG player(name string, age int); ## \u521b\u5efa Tag team nebula> CREATE TAG team(name string); ## \u521b\u5efa Edge type follow nebula> CREATE EDGE follow(degree int); ## \u521b\u5efa Edge type serve nebula> CREATE EDGE serve(start_year int, end_year int); \u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u89c1 \u5feb\u901f\u5f00\u59cb \u3002","title":"\u6b65\u9aa4 1\uff1a\u5728NebulaGraph\u4e2d\u521b\u5efa Schema"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-oracle/#2","text":"\u7f16\u8bd1 Exchange \u540e\uff0c\u590d\u5236 target/classes/application.conf \u6587\u4ef6\u8bbe\u7f6e Oracle \u6570\u636e\u6e90\u76f8\u5173\u7684\u914d\u7f6e\u3002\u5728\u672c\u793a\u4f8b\u4e2d\uff0c\u590d\u5236\u7684\u6587\u4ef6\u540d\u4e3a oracle_application.conf \u3002\u5404\u4e2a\u914d\u7f6e\u9879\u7684\u8be6\u7ec6\u8bf4\u660e\u8bf7\u53c2\u89c1 \u914d\u7f6e\u8bf4\u660e \u3002 { # Spark \u76f8\u5173\u914d\u7f6e spark: { app: { name: NebulaGraph Exchange 3.6.0 } driver: { cores: 1 maxResultSize: 1G } cores: { max: 16 } } # NebulaGraph \u76f8\u5173\u914d\u7f6e nebula: { address:{ # \u4ee5\u4e0b\u4e3a NebulaGraph \u7684 Graph \u670d\u52a1\u548c Meta \u670d\u52a1\u6240\u5728\u673a\u5668\u7684 IP \u5730\u5740\u53ca\u7aef\u53e3\u3002 # \u5982\u679c\u6709\u591a\u4e2a\u5730\u5740\uff0c\u683c\u5f0f\u4e3a \"ip1:port\",\"ip2:port\",\"ip3:port\"\u3002 # \u4e0d\u540c\u5730\u5740\u4e4b\u95f4\u4ee5\u82f1\u6587\u9017\u53f7 (,) \u9694\u5f00\u3002 graph:[\"127.0.0.1:9669\"] #\u4efb\u610f\u4e00\u4e2a Meta \u670d\u52a1\u7684\u5730\u5740\u3002 #\u5982\u679c\u60a8\u7684 NebulaGraph \u5728\u865a\u62df\u7f51\u7edc\u4e2d\uff0c\u5982k8s\uff0c\u8bf7\u914d\u7f6e Leader Meta\u7684\u5730\u5740\u3002 meta:[\"127.0.0.1:9559\"] } # \u586b\u5199\u7684\u8d26\u53f7\u5fc5\u987b\u62e5\u6709 NebulaGraph \u76f8\u5e94\u56fe\u7a7a\u95f4\u7684\u5199\u6570\u636e\u6743\u9650\u3002 user: root pswd: nebula # \u586b\u5199 NebulaGraph \u4e2d\u9700\u8981\u5199\u5165\u6570\u636e\u7684\u56fe\u7a7a\u95f4\u540d\u79f0\u3002 space: basketballplayer connection: { timeout: 3000 retry: 3 } execution: { retry: 3 } error: { max: 32 output: /tmp/errors } rate: { limit: 1024 timeout: 1000 } } # \u5904\u7406\u70b9 tags: [ { # NebulaGraph \u4e2d\u5bf9\u5e94\u7684 Tag \u540d\u79f0\u3002 name: player type: { # \u6307\u5b9a\u6570\u636e\u6e90\u6587\u4ef6\u683c\u5f0f\uff0c\u8bbe\u7f6e\u4e3a Oracle\u3002 source: oracle # \u6307\u5b9a\u5982\u4f55\u5c06\u70b9\u6570\u636e\u5bfc\u5165NebulaGraph\uff1aClient \u6216 SST\u3002 sink: client } url:\"jdbc:oracle:thin:@host:1521:basketball\" driver: \"oracle.jdbc.driver.OracleDriver\" user: \"root\" password: \"123456\" # \u626b\u63cf\u5355\u4e2a\u8868\u8bfb\u53d6\u6570\u636e\u3002 # nebula-exchange_spark_2.2 \u5fc5\u987b\u914d\u7f6e\u8be5\u53c2\u6570\u3002\u4e0d\u652f\u6301\u914d\u7f6e sentence\u3002 # nebula-exchange_spark_2.4 \u548c nebula-exchange_spark_3.0 \u53ef\u4ee5\u914d\u7f6e\u8be5\u53c2\u6570\uff0c\u4f46\u662f\u4e0d\u80fd\u548c sentence \u540c\u65f6\u914d\u7f6e\u3002 table:\"basketball.player\" # \u901a\u8fc7\u67e5\u8be2\u8bed\u53e5\u8bfb\u53d6\u6570\u636e\u3002 # nebula-exchange_spark_2.2 \u4e0d\u652f\u6301\u8be5\u53c2\u6570\u3002 # nebula-exchange_spark_2.4 \u548c nebula-exchange_spark_3.0 \u53ef\u4ee5\u914d\u7f6e\u8be5\u53c2\u6570\uff0c\u4f46\u662f\u4e0d\u80fd\u548c table \u540c\u65f6\u914d\u7f6e\u3002\u652f\u6301\u591a\u8868\u67e5\u8be2\u3002 # sentence: \"select * from people, player, team\" # \u5728 fields \u91cc\u6307\u5b9a player \u8868\u4e2d\u7684\u5217\u540d\u79f0\uff0c\u5176\u5bf9\u5e94\u7684 value \u4f1a\u4f5c\u4e3aNebulaGraph\u4e2d\u6307\u5b9a\u5c5e\u6027\u3002 # fields \u548c nebula.fields \u91cc\u7684\u914d\u7f6e\u5fc5\u987b\u4e00\u4e00\u5bf9\u5e94\u3002 # \u5982\u679c\u9700\u8981\u6307\u5b9a\u591a\u4e2a\u5217\u540d\u79f0\uff0c\u7528\u82f1\u6587\u9017\u53f7\uff08,\uff09\u9694\u5f00\u3002 fields: [age,name] nebula.fields: [age,name] # \u6307\u5b9a\u8868\u4e2d\u67d0\u4e00\u5217\u6570\u636e\u4e3aNebulaGraph\u4e2d\u70b9 VID \u7684\u6765\u6e90\u3002 vertex: { field:playerid # udf:{ # separator:\"_\" # oldColNames:[field-0,field-1,field-2] # newColName:new-field # } # \u4e3a VID \u589e\u52a0\u6307\u5b9a\u7684\u524d\u7f00\u3002\u4f8b\u5982 VID \u4e3a 12345\uff0c\u589e\u52a0\u524d\u7f00 tag1 \u540e\u4e3a tag1_12345\u3002\u4e0b\u5212\u7ebf\u65e0\u6cd5\u4fee\u6539\u3002 # prefix:\"tag1\" # \u5bf9 string \u7c7b\u578b\u7684 VID \u8fdb\u884c\u54c8\u5e0c\u5316\u64cd\u4f5c\u3002 # policy:hash } # \u6279\u91cf\u64cd\u4f5c\u7c7b\u578b\uff0c\u5305\u62ec INSERT\u3001UPDATE \u548c DELETE\u3002\u9ed8\u8ba4\u4e3a INSERT\u3002 #writeMode: INSERT # \u6279\u91cf\u5220\u9664\u65f6\u662f\u5426\u5220\u9664\u8be5\u70b9\u5173\u8054\u7684\u51fa\u8fb9\u548c\u5165\u8fb9\u3002`writeMode`\u4e3a`DELETE`\u65f6\u8be5\u53c2\u6570\u751f\u6548\u3002 #deleteEdge: false # \u5355\u6279\u6b21\u5199\u5165NebulaGraph\u7684\u6570\u636e\u6761\u6570\u3002 batch: 256 # Spark \u5206\u533a\u6570\u91cf partition: 32 } # \u8bbe\u7f6e Tag team \u76f8\u5173\u4fe1\u606f\u3002 { name: team type: { source: oracle sink: client } url:\"jdbc:oracle:thin:@host:1521:db\" driver: \"oracle.jdbc.driver.OracleDriver\" user: \"root\" password: \"123456\" table: \"basketball.team\" sentence: \"select teamid, name from team\" fields: [name] nebula.fields: [name] vertex: { field: teamid } batch: 256 partition: 32 } ] # \u5904\u7406\u8fb9\u6570\u636e edges: [ # \u8bbe\u7f6e Edge type follow \u76f8\u5173\u4fe1\u606f { # NebulaGraph\u4e2d\u5bf9\u5e94\u7684 Edge type \u540d\u79f0\u3002 name: follow type: { # \u6307\u5b9a\u6570\u636e\u6e90\u6587\u4ef6\u683c\u5f0f\uff0c\u8bbe\u7f6e\u4e3a Oracle\u3002 source: oracle # \u6307\u5b9a\u8fb9\u6570\u636e\u5bfc\u5165 NebulaGraph \u7684\u65b9\u5f0f\uff0c # \u6307\u5b9a\u5982\u4f55\u5c06\u70b9\u6570\u636e\u5bfc\u5165NebulaGraph\uff1aClient \u6216 SST\u3002 sink: client } url:\"jdbc:oracle:thin:@host:1521:db\" driver: \"oracle.jdbc.driver.OracleDriver\" user: \"root\" password: \"123456\" # \u626b\u63cf\u5355\u4e2a\u8868\u8bfb\u53d6\u6570\u636e\u3002 # nebula-exchange_spark_2.2 \u5fc5\u987b\u914d\u7f6e\u8be5\u53c2\u6570\u3002\u4e0d\u652f\u6301\u914d\u7f6e sentence\u3002 # nebula-exchange_spark_2.4 \u548c nebula-exchange_spark_3.0 \u53ef\u4ee5\u914d\u7f6e\u8be5\u53c2\u6570\uff0c\u4f46\u662f\u4e0d\u80fd\u548c sentence \u540c\u65f6\u914d\u7f6e\u3002 table:\"basketball.follow\" # \u901a\u8fc7\u67e5\u8be2\u8bed\u53e5\u8bfb\u53d6\u6570\u636e\u3002 # nebula-exchange_spark_2.2 \u4e0d\u652f\u6301\u8be5\u53c2\u6570\u3002 # nebula-exchange_spark_2.4 \u548c nebula-exchange_spark_3.0 \u53ef\u4ee5\u914d\u7f6e\u8be5\u53c2\u6570\uff0c\u4f46\u662f\u4e0d\u80fd\u548c table \u540c\u65f6\u914d\u7f6e\u3002\u652f\u6301\u591a\u8868\u67e5\u8be2\u3002 # sentence: \"select * from follow, serve\" # \u5728 fields \u91cc\u6307\u5b9a follow \u8868\u4e2d\u7684\u5217\u540d\u79f0\uff0c\u5176\u5bf9\u5e94\u7684 value \u4f1a\u4f5c\u4e3aNebulaGraph\u4e2d\u6307\u5b9a\u5c5e\u6027\u3002 # fields \u548c nebula.fields \u91cc\u7684\u914d\u7f6e\u5fc5\u987b\u4e00\u4e00\u5bf9\u5e94\u3002 # \u5982\u679c\u9700\u8981\u6307\u5b9a\u591a\u4e2a\u5217\u540d\u79f0\uff0c\u7528\u82f1\u6587\u9017\u53f7\uff08,\uff09\u9694\u5f00\u3002 fields: [degree] nebula.fields: [degree] # \u5728 source \u91cc\uff0c\u5c06 follow \u8868\u4e2d\u67d0\u4e00\u5217\u4f5c\u4e3a\u8fb9\u7684\u8d77\u59cb\u70b9\u6570\u636e\u6e90\u3002 # \u5728 target \u91cc\uff0c\u5c06 follow \u8868\u4e2d\u67d0\u4e00\u5217\u4f5c\u4e3a\u8fb9\u7684\u76ee\u7684\u70b9\u6570\u636e\u6e90\u3002 source: { field: src_player # udf:{ # separator:\"_\" # oldColNames:[field-0,field-1,field-2] # newColName:new-field # } # \u4e3a VID \u589e\u52a0\u6307\u5b9a\u7684\u524d\u7f00\u3002\u4f8b\u5982 VID \u4e3a 12345\uff0c\u589e\u52a0\u524d\u7f00 tag1 \u540e\u4e3a tag1_12345\u3002\u4e0b\u5212\u7ebf\u65e0\u6cd5\u4fee\u6539\u3002 # prefix:\"tag1\" # \u5bf9 string \u7c7b\u578b\u7684 VID \u8fdb\u884c\u54c8\u5e0c\u5316\u64cd\u4f5c\u3002 # policy:hash } target: { field: dst_player # udf:{ # separator:\"_\" # oldColNames:[field-0,field-1,field-2] # newColName:new-field # } # \u4e3a VID \u589e\u52a0\u6307\u5b9a\u7684\u524d\u7f00\u3002\u4f8b\u5982 VID \u4e3a 12345\uff0c\u589e\u52a0\u524d\u7f00 tag1 \u540e\u4e3a tag1_12345\u3002\u4e0b\u5212\u7ebf\u65e0\u6cd5\u4fee\u6539\u3002 # prefix:\"tag1\" # \u5bf9 string \u7c7b\u578b\u7684 VID \u8fdb\u884c\u54c8\u5e0c\u5316\u64cd\u4f5c\u3002 # policy:hash } # \u6307\u5b9a\u4e00\u4e2a\u5217\u4f5c\u4e3a rank \u7684\u6e90\uff08\u53ef\u9009\uff09\u3002 #ranking: rank # \u6279\u91cf\u64cd\u4f5c\u7c7b\u578b\uff0c\u5305\u62ec INSERT\u3001UPDATE \u548c DELETE\u3002\u9ed8\u8ba4\u4e3a INSERT\u3002 #writeMode: INSERT # \u5355\u6279\u6b21\u5199\u5165NebulaGraph\u7684\u6570\u636e\u6761\u6570\u3002 batch: 256 # Spark \u5206\u533a\u6570\u91cf partition: 32 } # \u8bbe\u7f6e Edge type serve \u76f8\u5173\u4fe1\u606f { name: serve type: { source: oracle sink: client } url:\"jdbc:oracle:thin:@host:1521:db\" driver: \"oracle.jdbc.driver.OracleDriver\" user: \"root\" password: \"123456\" table: \"basketball.serve\" sentence: \"select playerid, teamid, start_year, end_year from serve\" fields: [start_year,end_year] nebula.fields: [start_year,end_year] source: { field: playerid } target: { field: teamid } # \u6307\u5b9a\u4e00\u4e2a\u5217\u4f5c\u4e3a rank \u7684\u6e90\uff08\u53ef\u9009\uff09\u3002 #ranking: rank batch: 256 partition: 32 } ] }","title":"\u6b65\u9aa4 2\uff1a\u4fee\u6539\u914d\u7f6e\u6587\u4ef6"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-oracle/#3nebulagraph","text":"\u8fd0\u884c\u5982\u4e0b\u547d\u4ee4\u5c06 Oracle \u6570\u636e\u5bfc\u5165\u5230NebulaGraph\u4e2d\u3002\u5173\u4e8e\u53c2\u6570\u7684\u8bf4\u660e\uff0c\u8bf7\u53c2\u89c1 \u5bfc\u5165\u547d\u4ee4\u53c2\u6570 \u3002 ${ SPARK_HOME } /bin/spark-submit --master \"local\" --class com.vesoft.nebula.exchange.Exchange <nebula-exchange-3.6.0.jar_path> -c <oracle_application.conf_path> Note JAR \u5305\u6709\u4e24\u79cd\u83b7\u53d6\u65b9\u5f0f\uff1a \u81ea\u884c\u7f16\u8bd1 \u6216\u8005\u4ece maven \u4ed3\u5e93\u4e0b\u8f7d\u3002 \u793a\u4f8b\uff1a ${ SPARK_HOME } /bin/spark-submit --master \"local\" --class com.vesoft.nebula.exchange.Exchange /root/nebula-exchange/nebula-exchange/target/nebula-exchange-3.6.0.jar -c /root/nebula-exchange/nebula-exchange/target/classes/oracle_application.conf \u7528\u6237\u53ef\u4ee5\u5728\u8fd4\u56de\u4fe1\u606f\u4e2d\u641c\u7d22 batchSuccess.<tag_name/edge_name> \uff0c\u786e\u8ba4\u6210\u529f\u7684\u6570\u91cf\u3002\u4f8b\u5982 batchSuccess.follow: 300 \u3002","title":"\u6b65\u9aa4 3\uff1a\u5411NebulaGraph\u5bfc\u5165\u6570\u636e"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-oracle/#4","text":"\u7528\u6237\u53ef\u4ee5\u5728NebulaGraph\u5ba2\u6237\u7aef\uff08\u4f8b\u5982 NebulaGraph Studio\uff09\u4e2d\u6267\u884c\u67e5\u8be2\u8bed\u53e5\uff0c\u786e\u8ba4\u6570\u636e\u662f\u5426\u5df2\u5bfc\u5165\u3002\u4f8b\u5982\uff1a LOOKUP ON player YIELD id(vertex); \u7528\u6237\u4e5f\u53ef\u4ee5\u4f7f\u7528\u547d\u4ee4 SHOW STATS \u67e5\u770b\u7edf\u8ba1\u6570\u636e\u3002","title":"\u6b65\u9aa4 4\uff1a\uff08\u53ef\u9009\uff09\u9a8c\u8bc1\u6570\u636e"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-oracle/#5nebulagraph","text":"\u5bfc\u5165\u6570\u636e\u540e\uff0c\u7528\u6237\u53ef\u4ee5\u5728NebulaGraph\u4e2d\u91cd\u65b0\u521b\u5efa\u5e76\u91cd\u5efa\u7d22\u5f15\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1 \u7d22\u5f15\u4ecb\u7ecd \u3002","title":"\u6b65\u9aa4 5\uff1a\uff08\u5982\u6709\uff09\u5728NebulaGraph\u4e2d\u91cd\u5efa\u7d22\u5f15"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-orc/","text":"\u5bfc\u5165 ORC \u6587\u4ef6\u6570\u636e \u00b6 \u672c\u6587\u4ee5\u4e00\u4e2a\u793a\u4f8b\u8bf4\u660e\u5982\u4f55\u4f7f\u7528 Exchange \u5c06\u5b58\u50a8\u5728 HDFS \u6216\u672c\u5730\u7684 ORC \u6587\u4ef6\u6570\u636e\u5bfc\u5165 NebulaGraph\u3002 \u6570\u636e\u96c6 \u00b6 \u672c\u6587\u4ee5 basketballplayer \u6570\u636e\u96c6 \u4e3a\u4f8b\u3002 \u73af\u5883\u914d\u7f6e \u00b6 \u672c\u6587\u793a\u4f8b\u5728 MacOS \u4e0b\u5b8c\u6210\uff0c\u4ee5\u4e0b\u662f\u76f8\u5173\u7684\u73af\u5883\u914d\u7f6e\u4fe1\u606f\uff1a \u786c\u4ef6\u89c4\u683c\uff1a CPU\uff1a1.7 GHz Quad-Core Intel Core i7 \u5185\u5b58\uff1a16 GB Spark\uff1a2.4.7 \u5355\u673a\u7248 Hadoop\uff1a2.9.2 \u4f2a\u5206\u5e03\u5f0f\u90e8\u7f72 NebulaGraph\uff1a3.6.0\u3002 \u524d\u63d0\u6761\u4ef6 \u00b6 \u5f00\u59cb\u5bfc\u5165\u6570\u636e\u4e4b\u524d\uff0c\u7528\u6237\u9700\u8981\u786e\u8ba4\u4ee5\u4e0b\u4fe1\u606f\uff1a \u5df2\u7ecf \u5b89\u88c5\u90e8\u7f72NebulaGraph \u5e76\u83b7\u53d6\u5982\u4e0b\u4fe1\u606f\uff1a Graph \u670d\u52a1\u548c Meta \u670d\u52a1\u7684\u7684 IP \u5730\u5740\u548c\u7aef\u53e3\u3002 \u62e5\u6709NebulaGraph\u5199\u6743\u9650\u7684\u7528\u6237\u540d\u548c\u5bc6\u7801\u3002 \u5df2\u7ecf\u7f16\u8bd1 Exchange\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1 \u7f16\u8bd1 Exchange \u3002\u672c\u793a\u4f8b\u4e2d\u4f7f\u7528 Exchange 3.6.0\u3002 \u5df2\u7ecf\u5b89\u88c5 Spark\u3002 \u4e86\u89e3NebulaGraph\u4e2d\u521b\u5efa Schema \u7684\u4fe1\u606f\uff0c\u5305\u62ec Tag \u548c Edge type \u7684\u540d\u79f0\u3001\u5c5e\u6027\u7b49\u3002 \u5982\u679c\u6587\u4ef6\u5b58\u50a8\u5728 HDFS \u4e0a\uff0c\u9700\u8981\u786e\u8ba4 Hadoop \u670d\u52a1\u8fd0\u884c\u6b63\u5e38\u3002 \u5982\u679c\u6587\u4ef6\u5b58\u50a8\u5728\u672c\u5730\u4e14NebulaGraph\u662f\u96c6\u7fa4\u67b6\u6784\uff0c\u9700\u8981\u5728\u96c6\u7fa4\u6bcf\u53f0\u673a\u5668\u672c\u5730\u76f8\u540c\u76ee\u5f55\u4e0b\u653e\u7f6e\u6587\u4ef6\u3002 \u64cd\u4f5c\u6b65\u9aa4 \u00b6 \u6b65\u9aa4 1\uff1a\u5728NebulaGraph\u4e2d\u521b\u5efa Schema \u00b6 \u5206\u6790 ORC \u6587\u4ef6\u4e2d\u7684\u6570\u636e\uff0c\u6309\u4ee5\u4e0b\u6b65\u9aa4\u5728NebulaGraph\u4e2d\u521b\u5efa Schema\uff1a \u786e\u8ba4 Schema \u8981\u7d20\u3002NebulaGraph\u4e2d\u7684 Schema \u8981\u7d20\u5982\u4e0b\u8868\u6240\u793a\u3002 \u8981\u7d20 \u540d\u79f0 \u5c5e\u6027 Tag player name string, age int Tag team name string Edge Type follow degree int Edge Type serve start_year int, end_year int \u4f7f\u7528 NebulaGraph Console \u521b\u5efa\u4e00\u4e2a\u56fe\u7a7a\u95f4 basketballplayer \uff0c\u5e76\u521b\u5efa\u4e00\u4e2a Schema\uff0c\u5982\u4e0b\u6240\u793a\u3002 ## \u521b\u5efa\u56fe\u7a7a\u95f4 nebula> CREATE SPACE basketballplayer \\ (partition_num = 10, \\ replica_factor = 1, \\ vid_type = FIXED_STRING(30)); ## \u9009\u62e9\u56fe\u7a7a\u95f4 basketballplayer nebula> USE basketballplayer; ## \u521b\u5efa Tag player nebula> CREATE TAG player(name string, age int); ## \u521b\u5efa Tag team nebula> CREATE TAG team(name string); ## \u521b\u5efa Edge type follow nebula> CREATE EDGE follow(degree int); ## \u521b\u5efa Edge type serve nebula> CREATE EDGE serve(start_year int, end_year int); \u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u89c1 \u5feb\u901f\u5f00\u59cb \u3002 \u6b65\u9aa4 2\uff1a\u5904\u7406 ORC \u6587\u4ef6 \u00b6 \u786e\u8ba4\u4ee5\u4e0b\u4fe1\u606f\uff1a \u5904\u7406 ORC \u6587\u4ef6\u4ee5\u6ee1\u8db3 Schema \u7684\u8981\u6c42\u3002 \u83b7\u53d6 ORC \u6587\u4ef6\u5b58\u50a8\u8def\u5f84\u3002 \u6b65\u9aa4 3\uff1a\u4fee\u6539\u914d\u7f6e\u6587\u4ef6 \u00b6 \u7f16\u8bd1 Exchange \u540e\uff0c\u590d\u5236 target/classes/application.conf \u6587\u4ef6\u8bbe\u7f6e ORC \u6570\u636e\u6e90\u76f8\u5173\u7684\u914d\u7f6e\u3002\u5728\u672c\u793a\u4f8b\u4e2d\uff0c\u590d\u5236\u7684\u6587\u4ef6\u540d\u4e3a orc_application.conf \u3002\u5404\u4e2a\u914d\u7f6e\u9879\u7684\u8be6\u7ec6\u8bf4\u660e\u8bf7\u53c2\u89c1 \u914d\u7f6e\u8bf4\u660e \u3002 { # Spark \u76f8\u5173\u914d\u7f6e spark: { app: { name: NebulaGraph Exchange 3.6.0 } driver: { cores: 1 maxResultSize: 1G } executor: { memory:1G } cores: { max: 16 } } # NebulaGraph\u76f8\u5173\u914d\u7f6e nebula: { address:{ # \u6307\u5b9a Graph \u670d\u52a1\u548c\u6240\u6709 Meta \u670d\u52a1\u7684 IP \u5730\u5740\u548c\u7aef\u53e3\u3002 # \u5982\u679c\u6709\u591a\u53f0\u670d\u52a1\u5668\uff0c\u5730\u5740\u4e4b\u95f4\u7528\u82f1\u6587\u9017\u53f7\uff08,\uff09\u5206\u9694\u3002 # \u683c\u5f0f\uff1a\"ip1:port\",\"ip2:port\",\"ip3:port\" graph:[\"127.0.0.1:9669\"] #\u4efb\u610f\u4e00\u4e2a Meta \u670d\u52a1\u7684\u5730\u5740\u3002 #\u5982\u679c\u60a8\u7684NebulaGraph\u5728\u865a\u62df\u7f51\u7edc\u4e2d\uff0c\u5982k8s\uff0c\u8bf7\u914d\u7f6e Leader Meta\u7684\u5730\u5740\u3002 meta:[\"127.0.0.1:9559\"] } # \u6307\u5b9a\u62e5\u6709NebulaGraph\u5199\u6743\u9650\u7684\u7528\u6237\u540d\u548c\u5bc6\u7801\u3002 user: root pswd: nebula # \u6307\u5b9a\u56fe\u7a7a\u95f4\u540d\u79f0\u3002 space: basketballplayer connection: { timeout: 3000 retry: 3 } execution: { retry: 3 } error: { max: 32 output: /tmp/errors } rate: { limit: 1024 timeout: 1000 } } # \u5904\u7406\u70b9 tags: [ # \u8bbe\u7f6e Tag player \u76f8\u5173\u4fe1\u606f\u3002 { # \u6307\u5b9aNebulaGraph\u4e2d\u5b9a\u4e49\u7684 Tag \u540d\u79f0\u3002 name: player type: { # \u6307\u5b9a\u6570\u636e\u6e90\uff0c\u4f7f\u7528 ORC\u3002 source: orc # \u6307\u5b9a\u5982\u4f55\u5c06\u70b9\u6570\u636e\u5bfc\u5165NebulaGraph\uff1aClient \u6216 SST\u3002 sink: client } # \u6307\u5b9a ORC \u6587\u4ef6\u7684\u8def\u5f84\u3002 # \u5982\u679c\u6587\u4ef6\u5b58\u50a8\u5728 HDFS \u4e0a\uff0c\u7528\u53cc\u5f15\u53f7\u62ec\u8d77\u8def\u5f84\uff0c\u4ee5 hdfs://\u5f00\u5934\uff0c\u4f8b\u5982\"hdfs://ip:port/xx/xx\"\u3002 # \u5982\u679c\u6587\u4ef6\u5b58\u50a8\u5728\u672c\u5730\uff0c\u7528\u53cc\u5f15\u53f7\u62ec\u8d77\u8def\u5f84\uff0c\u4ee5 file://\u5f00\u5934\uff0c\u4f8b\u5982\"file:///tmp/xx.orc\"\u3002 path: \"hdfs://192.168.*.*:9000/data/vertex_player.orc\" # \u5728 fields \u91cc\u6307\u5b9a ORC \u6587\u4ef6\u4e2d key \u540d\u79f0\uff0c\u5176\u5bf9\u5e94\u7684 value \u4f1a\u4f5c\u4e3aNebulaGraph\u4e2d\u6307\u5b9a\u5c5e\u6027\u7684\u6570\u636e\u6e90\u3002 # \u5982\u679c\u9700\u8981\u6307\u5b9a\u591a\u4e2a\u503c\uff0c\u7528\u82f1\u6587\u9017\u53f7\uff08,\uff09\u9694\u5f00\u3002 fields: [age,name] # \u6307\u5b9aNebulaGraph\u4e2d\u5b9a\u4e49\u7684\u5c5e\u6027\u540d\u79f0\u3002 # fields \u4e0e nebula.fields \u7684\u987a\u5e8f\u5fc5\u987b\u4e00\u4e00\u5bf9\u5e94\u3002 nebula.fields: [age, name] # \u6307\u5b9a\u4e00\u4e2a\u5217\u4f5c\u4e3a VID \u7684\u6e90\u3002 # vertex \u7684\u503c\u5fc5\u987b\u4e0e ORC \u6587\u4ef6\u4e2d\u7684\u5b57\u6bb5\u4fdd\u6301\u4e00\u81f4\u3002 # \u76ee\u524d\uff0cNebulaGraph 3.6.0\u4ec5\u652f\u6301\u5b57\u7b26\u4e32\u6216\u6574\u6570\u7c7b\u578b\u7684 VID\u3002 vertex: { field:id # udf:{ # separator:\"_\" # oldColNames:[field-0,field-1,field-2] # newColName:new-field # } # \u4e3a VID \u589e\u52a0\u6307\u5b9a\u7684\u524d\u7f00\u3002\u4f8b\u5982 VID \u4e3a 12345\uff0c\u589e\u52a0\u524d\u7f00 tag1 \u540e\u4e3a tag1_12345\u3002\u4e0b\u5212\u7ebf\u65e0\u6cd5\u4fee\u6539\u3002 # prefix:\"tag1\" # \u5bf9 string \u7c7b\u578b\u7684 VID \u8fdb\u884c\u54c8\u5e0c\u5316\u64cd\u4f5c\u3002 # policy:hash } # \u6279\u91cf\u64cd\u4f5c\u7c7b\u578b\uff0c\u5305\u62ec INSERT\u3001UPDATE \u548c DELETE\u3002\u9ed8\u8ba4\u4e3a INSERT\u3002 #writeMode: INSERT # \u6279\u91cf\u5220\u9664\u65f6\u662f\u5426\u5220\u9664\u8be5\u70b9\u5173\u8054\u7684\u51fa\u8fb9\u548c\u5165\u8fb9\u3002`writeMode`\u4e3a`DELETE`\u65f6\u8be5\u53c2\u6570\u751f\u6548\u3002 #deleteEdge: false # \u6307\u5b9a\u5355\u6279\u6b21\u5199\u5165NebulaGraph\u7684\u6700\u5927\u70b9\u6570\u91cf\u3002 batch: 256 # \u6307\u5b9a Spark \u5206\u7247\u6570\u91cf\u3002 partition: 32 } # \u8bbe\u7f6e Tag team \u76f8\u5173\u4fe1\u606f\u3002 { name: team type: { source: orc sink: client } path: \"hdfs://192.168.*.*:9000/data/vertex_team.orc\" fields: [name] nebula.fields: [name] vertex: { field:id } batch: 256 partition: 32 } # \u5982\u679c\u9700\u8981\u6dfb\u52a0\u66f4\u591a\u70b9\uff0c\u8bf7\u53c2\u8003\u524d\u9762\u7684\u914d\u7f6e\u8fdb\u884c\u6dfb\u52a0\u3002 ] # \u5904\u7406\u8fb9 edges: [ # \u8bbe\u7f6e Edge type follow \u76f8\u5173\u4fe1\u606f\u3002 { # \u6307\u5b9aNebulaGraph\u4e2d\u5b9a\u4e49\u7684 Edge type \u540d\u79f0\u3002 name: follow type: { # \u6307\u5b9a\u6570\u636e\u6e90\uff0c\u4f7f\u7528 ORC\u3002 source: orc # \u6307\u5b9a\u5982\u4f55\u5c06\u70b9\u6570\u636e\u5bfc\u5165NebulaGraph\uff1aClient \u6216 SST\u3002 sink: client } # \u6307\u5b9a ORC \u6587\u4ef6\u7684\u8def\u5f84\u3002 # \u5982\u679c\u6587\u4ef6\u5b58\u50a8\u5728 HDFS \u4e0a\uff0c\u7528\u53cc\u5f15\u53f7\u62ec\u8d77\u8def\u5f84\uff0c\u4ee5 hdfs://\u5f00\u5934\uff0c\u4f8b\u5982\"hdfs://ip:port/xx/xx\"\u3002 # \u5982\u679c\u6587\u4ef6\u5b58\u50a8\u5728\u672c\u5730\uff0c\u7528\u53cc\u5f15\u53f7\u62ec\u8d77\u8def\u5f84\uff0c\u4ee5 file://\u5f00\u5934\uff0c\u4f8b\u5982\"file:///tmp/xx.orc\"\u3002 path: \"hdfs://192.168.*.*:9000/data/edge_follow.orc\" # \u5728 fields \u91cc\u6307\u5b9a ORC \u6587\u4ef6\u4e2d key \u540d\u79f0\uff0c\u5176\u5bf9\u5e94\u7684 value \u4f1a\u4f5c\u4e3aNebulaGraph\u4e2d\u6307\u5b9a\u5c5e\u6027\u7684\u6570\u636e\u6e90\u3002 # \u5982\u679c\u9700\u8981\u6307\u5b9a\u591a\u4e2a\u503c\uff0c\u7528\u82f1\u6587\u9017\u53f7\uff08,\uff09\u9694\u5f00\u3002 fields: [degree] # \u6307\u5b9aNebulaGraph\u4e2d\u5b9a\u4e49\u7684\u5c5e\u6027\u540d\u79f0\u3002 # fields \u4e0e nebula.fields \u7684\u987a\u5e8f\u5fc5\u987b\u4e00\u4e00\u5bf9\u5e94\u3002 nebula.fields: [degree] # \u6307\u5b9a\u4e00\u4e2a\u5217\u4f5c\u4e3a\u8d77\u59cb\u70b9\u548c\u76ee\u7684\u70b9\u7684\u6e90\u3002 # vertex \u7684\u503c\u5fc5\u987b\u4e0e ORC \u6587\u4ef6\u4e2d\u7684\u5b57\u6bb5\u4fdd\u6301\u4e00\u81f4\u3002 # \u76ee\u524d\uff0cNebulaGraph 3.6.0\u4ec5\u652f\u6301\u5b57\u7b26\u4e32\u6216\u6574\u6570\u7c7b\u578b\u7684 VID\u3002 source: { field: src # udf:{ # separator:\"_\" # oldColNames:[field-0,field-1,field-2] # newColName:new-field # } # \u4e3a VID \u589e\u52a0\u6307\u5b9a\u7684\u524d\u7f00\u3002\u4f8b\u5982 VID \u4e3a 12345\uff0c\u589e\u52a0\u524d\u7f00 tag1 \u540e\u4e3a tag1_12345\u3002\u4e0b\u5212\u7ebf\u65e0\u6cd5\u4fee\u6539\u3002 # prefix:\"tag1\" # \u5bf9 string \u7c7b\u578b\u7684 VID \u8fdb\u884c\u54c8\u5e0c\u5316\u64cd\u4f5c\u3002 # policy:hash } target: { field: dst # udf:{ # separator:\"_\" # oldColNames:[field-0,field-1,field-2] # newColName:new-field # } # \u4e3a VID \u589e\u52a0\u6307\u5b9a\u7684\u524d\u7f00\u3002\u4f8b\u5982 VID \u4e3a 12345\uff0c\u589e\u52a0\u524d\u7f00 tag1 \u540e\u4e3a tag1_12345\u3002\u4e0b\u5212\u7ebf\u65e0\u6cd5\u4fee\u6539\u3002 # prefix:\"tag1\" # \u5bf9 string \u7c7b\u578b\u7684 VID \u8fdb\u884c\u54c8\u5e0c\u5316\u64cd\u4f5c\u3002 # policy:hash } # \u6307\u5b9a\u4e00\u4e2a\u5217\u4f5c\u4e3a rank \u7684\u6e90\uff08\u53ef\u9009\uff09\u3002 #ranking: rank # \u6279\u91cf\u64cd\u4f5c\u7c7b\u578b\uff0c\u5305\u62ec INSERT\u3001UPDATE \u548c DELETE\u3002\u9ed8\u8ba4\u4e3a INSERT\u3002 #writeMode: INSERT # \u6307\u5b9a\u5355\u6279\u6b21\u5199\u5165NebulaGraph\u7684\u6700\u5927\u8fb9\u6570\u91cf\u3002 batch: 256 # \u6307\u5b9a Spark \u5206\u7247\u6570\u91cf\u3002 partition: 32 } # \u8bbe\u7f6e Edge type serve \u76f8\u5173\u4fe1\u606f\u3002 { name: serve type: { source: orc sink: client } path: \"hdfs://192.168.*.*:9000/data/edge_serve.orc\" fields: [start_year,end_year] nebula.fields: [start_year, end_year] source: { field: src } target: { field: dst } batch: 256 partition: 32 } ] # \u5982\u679c\u9700\u8981\u6dfb\u52a0\u66f4\u591a\u8fb9\uff0c\u8bf7\u53c2\u8003\u524d\u9762\u7684\u914d\u7f6e\u8fdb\u884c\u6dfb\u52a0\u3002 } \u6b65\u9aa4 4\uff1a\u5411NebulaGraph\u5bfc\u5165\u6570\u636e \u00b6 \u8fd0\u884c\u5982\u4e0b\u547d\u4ee4\u5c06 ORC \u6587\u4ef6\u6570\u636e\u5bfc\u5165\u5230NebulaGraph\u4e2d\u3002\u5173\u4e8e\u53c2\u6570\u7684\u8bf4\u660e\uff0c\u8bf7\u53c2\u89c1 \u5bfc\u5165\u547d\u4ee4\u53c2\u6570 \u3002 ${ SPARK_HOME } /bin/spark-submit --master \"local\" --class com.vesoft.nebula.exchange.Exchange <nebula-exchange-3.6.0.jar_path> -c <orc_application.conf_path> Note JAR \u5305\u6709\u4e24\u79cd\u83b7\u53d6\u65b9\u5f0f\uff1a \u81ea\u884c\u7f16\u8bd1 \u6216\u8005\u4ece maven \u4ed3\u5e93\u4e0b\u8f7d\u3002 \u793a\u4f8b\uff1a ${ SPARK_HOME } /bin/spark-submit --master \"local\" --class com.vesoft.nebula.exchange.Exchange /root/nebula-exchange/nebula-exchange/target/nebula-exchange-3.6.0.jar -c /root/nebula-exchange/nebula-exchange/target/classes/orc_application.conf \u7528\u6237\u53ef\u4ee5\u5728\u8fd4\u56de\u4fe1\u606f\u4e2d\u641c\u7d22 batchSuccess.<tag_name/edge_name> \uff0c\u786e\u8ba4\u6210\u529f\u7684\u6570\u91cf\u3002\u4f8b\u5982 batchSuccess.follow: 300 \u3002 \u6b65\u9aa4 5\uff1a\uff08\u53ef\u9009\uff09\u9a8c\u8bc1\u6570\u636e \u00b6 \u7528\u6237\u53ef\u4ee5\u5728NebulaGraph\u5ba2\u6237\u7aef\uff08\u4f8b\u5982 NebulaGraph Studio\uff09\u4e2d\u6267\u884c\u67e5\u8be2\u8bed\u53e5\uff0c\u786e\u8ba4\u6570\u636e\u662f\u5426\u5df2\u5bfc\u5165\u3002\u4f8b\u5982\uff1a LOOKUP ON player YIELD id(vertex); \u7528\u6237\u4e5f\u53ef\u4ee5\u4f7f\u7528\u547d\u4ee4 SHOW STATS \u67e5\u770b\u7edf\u8ba1\u6570\u636e\u3002 \u6b65\u9aa4 6\uff1a\uff08\u5982\u6709\uff09\u5728NebulaGraph\u4e2d\u91cd\u5efa\u7d22\u5f15 \u00b6 \u5bfc\u5165\u6570\u636e\u540e\uff0c\u7528\u6237\u53ef\u4ee5\u5728NebulaGraph\u4e2d\u91cd\u65b0\u521b\u5efa\u5e76\u91cd\u5efa\u7d22\u5f15\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1 \u7d22\u5f15\u4ecb\u7ecd \u3002","title":"\u5bfc\u5165 ORC \u6587\u4ef6\u6570\u636e"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-orc/#orc","text":"\u672c\u6587\u4ee5\u4e00\u4e2a\u793a\u4f8b\u8bf4\u660e\u5982\u4f55\u4f7f\u7528 Exchange \u5c06\u5b58\u50a8\u5728 HDFS \u6216\u672c\u5730\u7684 ORC \u6587\u4ef6\u6570\u636e\u5bfc\u5165 NebulaGraph\u3002","title":"\u5bfc\u5165 ORC \u6587\u4ef6\u6570\u636e"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-orc/#_1","text":"\u672c\u6587\u4ee5 basketballplayer \u6570\u636e\u96c6 \u4e3a\u4f8b\u3002","title":"\u6570\u636e\u96c6"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-orc/#_2","text":"\u672c\u6587\u793a\u4f8b\u5728 MacOS \u4e0b\u5b8c\u6210\uff0c\u4ee5\u4e0b\u662f\u76f8\u5173\u7684\u73af\u5883\u914d\u7f6e\u4fe1\u606f\uff1a \u786c\u4ef6\u89c4\u683c\uff1a CPU\uff1a1.7 GHz Quad-Core Intel Core i7 \u5185\u5b58\uff1a16 GB Spark\uff1a2.4.7 \u5355\u673a\u7248 Hadoop\uff1a2.9.2 \u4f2a\u5206\u5e03\u5f0f\u90e8\u7f72 NebulaGraph\uff1a3.6.0\u3002","title":"\u73af\u5883\u914d\u7f6e"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-orc/#_3","text":"\u5f00\u59cb\u5bfc\u5165\u6570\u636e\u4e4b\u524d\uff0c\u7528\u6237\u9700\u8981\u786e\u8ba4\u4ee5\u4e0b\u4fe1\u606f\uff1a \u5df2\u7ecf \u5b89\u88c5\u90e8\u7f72NebulaGraph \u5e76\u83b7\u53d6\u5982\u4e0b\u4fe1\u606f\uff1a Graph \u670d\u52a1\u548c Meta \u670d\u52a1\u7684\u7684 IP \u5730\u5740\u548c\u7aef\u53e3\u3002 \u62e5\u6709NebulaGraph\u5199\u6743\u9650\u7684\u7528\u6237\u540d\u548c\u5bc6\u7801\u3002 \u5df2\u7ecf\u7f16\u8bd1 Exchange\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1 \u7f16\u8bd1 Exchange \u3002\u672c\u793a\u4f8b\u4e2d\u4f7f\u7528 Exchange 3.6.0\u3002 \u5df2\u7ecf\u5b89\u88c5 Spark\u3002 \u4e86\u89e3NebulaGraph\u4e2d\u521b\u5efa Schema \u7684\u4fe1\u606f\uff0c\u5305\u62ec Tag \u548c Edge type \u7684\u540d\u79f0\u3001\u5c5e\u6027\u7b49\u3002 \u5982\u679c\u6587\u4ef6\u5b58\u50a8\u5728 HDFS \u4e0a\uff0c\u9700\u8981\u786e\u8ba4 Hadoop \u670d\u52a1\u8fd0\u884c\u6b63\u5e38\u3002 \u5982\u679c\u6587\u4ef6\u5b58\u50a8\u5728\u672c\u5730\u4e14NebulaGraph\u662f\u96c6\u7fa4\u67b6\u6784\uff0c\u9700\u8981\u5728\u96c6\u7fa4\u6bcf\u53f0\u673a\u5668\u672c\u5730\u76f8\u540c\u76ee\u5f55\u4e0b\u653e\u7f6e\u6587\u4ef6\u3002","title":"\u524d\u63d0\u6761\u4ef6"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-orc/#_4","text":"","title":"\u64cd\u4f5c\u6b65\u9aa4"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-orc/#1nebulagraph_schema","text":"\u5206\u6790 ORC \u6587\u4ef6\u4e2d\u7684\u6570\u636e\uff0c\u6309\u4ee5\u4e0b\u6b65\u9aa4\u5728NebulaGraph\u4e2d\u521b\u5efa Schema\uff1a \u786e\u8ba4 Schema \u8981\u7d20\u3002NebulaGraph\u4e2d\u7684 Schema \u8981\u7d20\u5982\u4e0b\u8868\u6240\u793a\u3002 \u8981\u7d20 \u540d\u79f0 \u5c5e\u6027 Tag player name string, age int Tag team name string Edge Type follow degree int Edge Type serve start_year int, end_year int \u4f7f\u7528 NebulaGraph Console \u521b\u5efa\u4e00\u4e2a\u56fe\u7a7a\u95f4 basketballplayer \uff0c\u5e76\u521b\u5efa\u4e00\u4e2a Schema\uff0c\u5982\u4e0b\u6240\u793a\u3002 ## \u521b\u5efa\u56fe\u7a7a\u95f4 nebula> CREATE SPACE basketballplayer \\ (partition_num = 10, \\ replica_factor = 1, \\ vid_type = FIXED_STRING(30)); ## \u9009\u62e9\u56fe\u7a7a\u95f4 basketballplayer nebula> USE basketballplayer; ## \u521b\u5efa Tag player nebula> CREATE TAG player(name string, age int); ## \u521b\u5efa Tag team nebula> CREATE TAG team(name string); ## \u521b\u5efa Edge type follow nebula> CREATE EDGE follow(degree int); ## \u521b\u5efa Edge type serve nebula> CREATE EDGE serve(start_year int, end_year int); \u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u89c1 \u5feb\u901f\u5f00\u59cb \u3002","title":"\u6b65\u9aa4 1\uff1a\u5728NebulaGraph\u4e2d\u521b\u5efa Schema"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-orc/#2_orc","text":"\u786e\u8ba4\u4ee5\u4e0b\u4fe1\u606f\uff1a \u5904\u7406 ORC \u6587\u4ef6\u4ee5\u6ee1\u8db3 Schema \u7684\u8981\u6c42\u3002 \u83b7\u53d6 ORC \u6587\u4ef6\u5b58\u50a8\u8def\u5f84\u3002","title":"\u6b65\u9aa4 2\uff1a\u5904\u7406 ORC \u6587\u4ef6"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-orc/#3","text":"\u7f16\u8bd1 Exchange \u540e\uff0c\u590d\u5236 target/classes/application.conf \u6587\u4ef6\u8bbe\u7f6e ORC \u6570\u636e\u6e90\u76f8\u5173\u7684\u914d\u7f6e\u3002\u5728\u672c\u793a\u4f8b\u4e2d\uff0c\u590d\u5236\u7684\u6587\u4ef6\u540d\u4e3a orc_application.conf \u3002\u5404\u4e2a\u914d\u7f6e\u9879\u7684\u8be6\u7ec6\u8bf4\u660e\u8bf7\u53c2\u89c1 \u914d\u7f6e\u8bf4\u660e \u3002 { # Spark \u76f8\u5173\u914d\u7f6e spark: { app: { name: NebulaGraph Exchange 3.6.0 } driver: { cores: 1 maxResultSize: 1G } executor: { memory:1G } cores: { max: 16 } } # NebulaGraph\u76f8\u5173\u914d\u7f6e nebula: { address:{ # \u6307\u5b9a Graph \u670d\u52a1\u548c\u6240\u6709 Meta \u670d\u52a1\u7684 IP \u5730\u5740\u548c\u7aef\u53e3\u3002 # \u5982\u679c\u6709\u591a\u53f0\u670d\u52a1\u5668\uff0c\u5730\u5740\u4e4b\u95f4\u7528\u82f1\u6587\u9017\u53f7\uff08,\uff09\u5206\u9694\u3002 # \u683c\u5f0f\uff1a\"ip1:port\",\"ip2:port\",\"ip3:port\" graph:[\"127.0.0.1:9669\"] #\u4efb\u610f\u4e00\u4e2a Meta \u670d\u52a1\u7684\u5730\u5740\u3002 #\u5982\u679c\u60a8\u7684NebulaGraph\u5728\u865a\u62df\u7f51\u7edc\u4e2d\uff0c\u5982k8s\uff0c\u8bf7\u914d\u7f6e Leader Meta\u7684\u5730\u5740\u3002 meta:[\"127.0.0.1:9559\"] } # \u6307\u5b9a\u62e5\u6709NebulaGraph\u5199\u6743\u9650\u7684\u7528\u6237\u540d\u548c\u5bc6\u7801\u3002 user: root pswd: nebula # \u6307\u5b9a\u56fe\u7a7a\u95f4\u540d\u79f0\u3002 space: basketballplayer connection: { timeout: 3000 retry: 3 } execution: { retry: 3 } error: { max: 32 output: /tmp/errors } rate: { limit: 1024 timeout: 1000 } } # \u5904\u7406\u70b9 tags: [ # \u8bbe\u7f6e Tag player \u76f8\u5173\u4fe1\u606f\u3002 { # \u6307\u5b9aNebulaGraph\u4e2d\u5b9a\u4e49\u7684 Tag \u540d\u79f0\u3002 name: player type: { # \u6307\u5b9a\u6570\u636e\u6e90\uff0c\u4f7f\u7528 ORC\u3002 source: orc # \u6307\u5b9a\u5982\u4f55\u5c06\u70b9\u6570\u636e\u5bfc\u5165NebulaGraph\uff1aClient \u6216 SST\u3002 sink: client } # \u6307\u5b9a ORC \u6587\u4ef6\u7684\u8def\u5f84\u3002 # \u5982\u679c\u6587\u4ef6\u5b58\u50a8\u5728 HDFS \u4e0a\uff0c\u7528\u53cc\u5f15\u53f7\u62ec\u8d77\u8def\u5f84\uff0c\u4ee5 hdfs://\u5f00\u5934\uff0c\u4f8b\u5982\"hdfs://ip:port/xx/xx\"\u3002 # \u5982\u679c\u6587\u4ef6\u5b58\u50a8\u5728\u672c\u5730\uff0c\u7528\u53cc\u5f15\u53f7\u62ec\u8d77\u8def\u5f84\uff0c\u4ee5 file://\u5f00\u5934\uff0c\u4f8b\u5982\"file:///tmp/xx.orc\"\u3002 path: \"hdfs://192.168.*.*:9000/data/vertex_player.orc\" # \u5728 fields \u91cc\u6307\u5b9a ORC \u6587\u4ef6\u4e2d key \u540d\u79f0\uff0c\u5176\u5bf9\u5e94\u7684 value \u4f1a\u4f5c\u4e3aNebulaGraph\u4e2d\u6307\u5b9a\u5c5e\u6027\u7684\u6570\u636e\u6e90\u3002 # \u5982\u679c\u9700\u8981\u6307\u5b9a\u591a\u4e2a\u503c\uff0c\u7528\u82f1\u6587\u9017\u53f7\uff08,\uff09\u9694\u5f00\u3002 fields: [age,name] # \u6307\u5b9aNebulaGraph\u4e2d\u5b9a\u4e49\u7684\u5c5e\u6027\u540d\u79f0\u3002 # fields \u4e0e nebula.fields \u7684\u987a\u5e8f\u5fc5\u987b\u4e00\u4e00\u5bf9\u5e94\u3002 nebula.fields: [age, name] # \u6307\u5b9a\u4e00\u4e2a\u5217\u4f5c\u4e3a VID \u7684\u6e90\u3002 # vertex \u7684\u503c\u5fc5\u987b\u4e0e ORC \u6587\u4ef6\u4e2d\u7684\u5b57\u6bb5\u4fdd\u6301\u4e00\u81f4\u3002 # \u76ee\u524d\uff0cNebulaGraph 3.6.0\u4ec5\u652f\u6301\u5b57\u7b26\u4e32\u6216\u6574\u6570\u7c7b\u578b\u7684 VID\u3002 vertex: { field:id # udf:{ # separator:\"_\" # oldColNames:[field-0,field-1,field-2] # newColName:new-field # } # \u4e3a VID \u589e\u52a0\u6307\u5b9a\u7684\u524d\u7f00\u3002\u4f8b\u5982 VID \u4e3a 12345\uff0c\u589e\u52a0\u524d\u7f00 tag1 \u540e\u4e3a tag1_12345\u3002\u4e0b\u5212\u7ebf\u65e0\u6cd5\u4fee\u6539\u3002 # prefix:\"tag1\" # \u5bf9 string \u7c7b\u578b\u7684 VID \u8fdb\u884c\u54c8\u5e0c\u5316\u64cd\u4f5c\u3002 # policy:hash } # \u6279\u91cf\u64cd\u4f5c\u7c7b\u578b\uff0c\u5305\u62ec INSERT\u3001UPDATE \u548c DELETE\u3002\u9ed8\u8ba4\u4e3a INSERT\u3002 #writeMode: INSERT # \u6279\u91cf\u5220\u9664\u65f6\u662f\u5426\u5220\u9664\u8be5\u70b9\u5173\u8054\u7684\u51fa\u8fb9\u548c\u5165\u8fb9\u3002`writeMode`\u4e3a`DELETE`\u65f6\u8be5\u53c2\u6570\u751f\u6548\u3002 #deleteEdge: false # \u6307\u5b9a\u5355\u6279\u6b21\u5199\u5165NebulaGraph\u7684\u6700\u5927\u70b9\u6570\u91cf\u3002 batch: 256 # \u6307\u5b9a Spark \u5206\u7247\u6570\u91cf\u3002 partition: 32 } # \u8bbe\u7f6e Tag team \u76f8\u5173\u4fe1\u606f\u3002 { name: team type: { source: orc sink: client } path: \"hdfs://192.168.*.*:9000/data/vertex_team.orc\" fields: [name] nebula.fields: [name] vertex: { field:id } batch: 256 partition: 32 } # \u5982\u679c\u9700\u8981\u6dfb\u52a0\u66f4\u591a\u70b9\uff0c\u8bf7\u53c2\u8003\u524d\u9762\u7684\u914d\u7f6e\u8fdb\u884c\u6dfb\u52a0\u3002 ] # \u5904\u7406\u8fb9 edges: [ # \u8bbe\u7f6e Edge type follow \u76f8\u5173\u4fe1\u606f\u3002 { # \u6307\u5b9aNebulaGraph\u4e2d\u5b9a\u4e49\u7684 Edge type \u540d\u79f0\u3002 name: follow type: { # \u6307\u5b9a\u6570\u636e\u6e90\uff0c\u4f7f\u7528 ORC\u3002 source: orc # \u6307\u5b9a\u5982\u4f55\u5c06\u70b9\u6570\u636e\u5bfc\u5165NebulaGraph\uff1aClient \u6216 SST\u3002 sink: client } # \u6307\u5b9a ORC \u6587\u4ef6\u7684\u8def\u5f84\u3002 # \u5982\u679c\u6587\u4ef6\u5b58\u50a8\u5728 HDFS \u4e0a\uff0c\u7528\u53cc\u5f15\u53f7\u62ec\u8d77\u8def\u5f84\uff0c\u4ee5 hdfs://\u5f00\u5934\uff0c\u4f8b\u5982\"hdfs://ip:port/xx/xx\"\u3002 # \u5982\u679c\u6587\u4ef6\u5b58\u50a8\u5728\u672c\u5730\uff0c\u7528\u53cc\u5f15\u53f7\u62ec\u8d77\u8def\u5f84\uff0c\u4ee5 file://\u5f00\u5934\uff0c\u4f8b\u5982\"file:///tmp/xx.orc\"\u3002 path: \"hdfs://192.168.*.*:9000/data/edge_follow.orc\" # \u5728 fields \u91cc\u6307\u5b9a ORC \u6587\u4ef6\u4e2d key \u540d\u79f0\uff0c\u5176\u5bf9\u5e94\u7684 value \u4f1a\u4f5c\u4e3aNebulaGraph\u4e2d\u6307\u5b9a\u5c5e\u6027\u7684\u6570\u636e\u6e90\u3002 # \u5982\u679c\u9700\u8981\u6307\u5b9a\u591a\u4e2a\u503c\uff0c\u7528\u82f1\u6587\u9017\u53f7\uff08,\uff09\u9694\u5f00\u3002 fields: [degree] # \u6307\u5b9aNebulaGraph\u4e2d\u5b9a\u4e49\u7684\u5c5e\u6027\u540d\u79f0\u3002 # fields \u4e0e nebula.fields \u7684\u987a\u5e8f\u5fc5\u987b\u4e00\u4e00\u5bf9\u5e94\u3002 nebula.fields: [degree] # \u6307\u5b9a\u4e00\u4e2a\u5217\u4f5c\u4e3a\u8d77\u59cb\u70b9\u548c\u76ee\u7684\u70b9\u7684\u6e90\u3002 # vertex \u7684\u503c\u5fc5\u987b\u4e0e ORC \u6587\u4ef6\u4e2d\u7684\u5b57\u6bb5\u4fdd\u6301\u4e00\u81f4\u3002 # \u76ee\u524d\uff0cNebulaGraph 3.6.0\u4ec5\u652f\u6301\u5b57\u7b26\u4e32\u6216\u6574\u6570\u7c7b\u578b\u7684 VID\u3002 source: { field: src # udf:{ # separator:\"_\" # oldColNames:[field-0,field-1,field-2] # newColName:new-field # } # \u4e3a VID \u589e\u52a0\u6307\u5b9a\u7684\u524d\u7f00\u3002\u4f8b\u5982 VID \u4e3a 12345\uff0c\u589e\u52a0\u524d\u7f00 tag1 \u540e\u4e3a tag1_12345\u3002\u4e0b\u5212\u7ebf\u65e0\u6cd5\u4fee\u6539\u3002 # prefix:\"tag1\" # \u5bf9 string \u7c7b\u578b\u7684 VID \u8fdb\u884c\u54c8\u5e0c\u5316\u64cd\u4f5c\u3002 # policy:hash } target: { field: dst # udf:{ # separator:\"_\" # oldColNames:[field-0,field-1,field-2] # newColName:new-field # } # \u4e3a VID \u589e\u52a0\u6307\u5b9a\u7684\u524d\u7f00\u3002\u4f8b\u5982 VID \u4e3a 12345\uff0c\u589e\u52a0\u524d\u7f00 tag1 \u540e\u4e3a tag1_12345\u3002\u4e0b\u5212\u7ebf\u65e0\u6cd5\u4fee\u6539\u3002 # prefix:\"tag1\" # \u5bf9 string \u7c7b\u578b\u7684 VID \u8fdb\u884c\u54c8\u5e0c\u5316\u64cd\u4f5c\u3002 # policy:hash } # \u6307\u5b9a\u4e00\u4e2a\u5217\u4f5c\u4e3a rank \u7684\u6e90\uff08\u53ef\u9009\uff09\u3002 #ranking: rank # \u6279\u91cf\u64cd\u4f5c\u7c7b\u578b\uff0c\u5305\u62ec INSERT\u3001UPDATE \u548c DELETE\u3002\u9ed8\u8ba4\u4e3a INSERT\u3002 #writeMode: INSERT # \u6307\u5b9a\u5355\u6279\u6b21\u5199\u5165NebulaGraph\u7684\u6700\u5927\u8fb9\u6570\u91cf\u3002 batch: 256 # \u6307\u5b9a Spark \u5206\u7247\u6570\u91cf\u3002 partition: 32 } # \u8bbe\u7f6e Edge type serve \u76f8\u5173\u4fe1\u606f\u3002 { name: serve type: { source: orc sink: client } path: \"hdfs://192.168.*.*:9000/data/edge_serve.orc\" fields: [start_year,end_year] nebula.fields: [start_year, end_year] source: { field: src } target: { field: dst } batch: 256 partition: 32 } ] # \u5982\u679c\u9700\u8981\u6dfb\u52a0\u66f4\u591a\u8fb9\uff0c\u8bf7\u53c2\u8003\u524d\u9762\u7684\u914d\u7f6e\u8fdb\u884c\u6dfb\u52a0\u3002 }","title":"\u6b65\u9aa4 3\uff1a\u4fee\u6539\u914d\u7f6e\u6587\u4ef6"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-orc/#4nebulagraph","text":"\u8fd0\u884c\u5982\u4e0b\u547d\u4ee4\u5c06 ORC \u6587\u4ef6\u6570\u636e\u5bfc\u5165\u5230NebulaGraph\u4e2d\u3002\u5173\u4e8e\u53c2\u6570\u7684\u8bf4\u660e\uff0c\u8bf7\u53c2\u89c1 \u5bfc\u5165\u547d\u4ee4\u53c2\u6570 \u3002 ${ SPARK_HOME } /bin/spark-submit --master \"local\" --class com.vesoft.nebula.exchange.Exchange <nebula-exchange-3.6.0.jar_path> -c <orc_application.conf_path> Note JAR \u5305\u6709\u4e24\u79cd\u83b7\u53d6\u65b9\u5f0f\uff1a \u81ea\u884c\u7f16\u8bd1 \u6216\u8005\u4ece maven \u4ed3\u5e93\u4e0b\u8f7d\u3002 \u793a\u4f8b\uff1a ${ SPARK_HOME } /bin/spark-submit --master \"local\" --class com.vesoft.nebula.exchange.Exchange /root/nebula-exchange/nebula-exchange/target/nebula-exchange-3.6.0.jar -c /root/nebula-exchange/nebula-exchange/target/classes/orc_application.conf \u7528\u6237\u53ef\u4ee5\u5728\u8fd4\u56de\u4fe1\u606f\u4e2d\u641c\u7d22 batchSuccess.<tag_name/edge_name> \uff0c\u786e\u8ba4\u6210\u529f\u7684\u6570\u91cf\u3002\u4f8b\u5982 batchSuccess.follow: 300 \u3002","title":"\u6b65\u9aa4 4\uff1a\u5411NebulaGraph\u5bfc\u5165\u6570\u636e"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-orc/#5","text":"\u7528\u6237\u53ef\u4ee5\u5728NebulaGraph\u5ba2\u6237\u7aef\uff08\u4f8b\u5982 NebulaGraph Studio\uff09\u4e2d\u6267\u884c\u67e5\u8be2\u8bed\u53e5\uff0c\u786e\u8ba4\u6570\u636e\u662f\u5426\u5df2\u5bfc\u5165\u3002\u4f8b\u5982\uff1a LOOKUP ON player YIELD id(vertex); \u7528\u6237\u4e5f\u53ef\u4ee5\u4f7f\u7528\u547d\u4ee4 SHOW STATS \u67e5\u770b\u7edf\u8ba1\u6570\u636e\u3002","title":"\u6b65\u9aa4 5\uff1a\uff08\u53ef\u9009\uff09\u9a8c\u8bc1\u6570\u636e"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-orc/#6nebulagraph","text":"\u5bfc\u5165\u6570\u636e\u540e\uff0c\u7528\u6237\u53ef\u4ee5\u5728NebulaGraph\u4e2d\u91cd\u65b0\u521b\u5efa\u5e76\u91cd\u5efa\u7d22\u5f15\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1 \u7d22\u5f15\u4ecb\u7ecd \u3002","title":"\u6b65\u9aa4 6\uff1a\uff08\u5982\u6709\uff09\u5728NebulaGraph\u4e2d\u91cd\u5efa\u7d22\u5f15"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-parquet/","text":"\u5bfc\u5165 Parquet \u6587\u4ef6\u6570\u636e \u00b6 \u672c\u6587\u4ee5\u4e00\u4e2a\u793a\u4f8b\u8bf4\u660e\u5982\u4f55\u4f7f\u7528 Exchange \u5c06\u5b58\u50a8\u5728 HDFS \u6216\u672c\u5730\u7684 Parquet \u6587\u4ef6\u6570\u636e\u5bfc\u5165NebulaGraph\u3002 \u6570\u636e\u96c6 \u00b6 \u672c\u6587\u4ee5 basketballplayer \u6570\u636e\u96c6 \u4e3a\u4f8b\u3002 \u73af\u5883\u914d\u7f6e \u00b6 \u672c\u6587\u793a\u4f8b\u5728 MacOS \u4e0b\u5b8c\u6210\uff0c\u4ee5\u4e0b\u662f\u76f8\u5173\u7684\u73af\u5883\u914d\u7f6e\u4fe1\u606f\uff1a \u786c\u4ef6\u89c4\u683c\uff1a CPU\uff1a1.7 GHz Quad-Core Intel Core i7 \u5185\u5b58\uff1a16 GB Spark\uff1a2.4.7 \u5355\u673a\u7248 Hadoop\uff1a2.9.2 \u4f2a\u5206\u5e03\u5f0f\u90e8\u7f72 NebulaGraph\uff1a3.6.0\u3002 \u524d\u63d0\u6761\u4ef6 \u00b6 \u5f00\u59cb\u5bfc\u5165\u6570\u636e\u4e4b\u524d\uff0c\u7528\u6237\u9700\u8981\u786e\u8ba4\u4ee5\u4e0b\u4fe1\u606f\uff1a \u5df2\u7ecf \u5b89\u88c5\u90e8\u7f72NebulaGraph \u5e76\u83b7\u53d6\u5982\u4e0b\u4fe1\u606f\uff1a Graph \u670d\u52a1\u548c Meta \u670d\u52a1\u7684\u7684 IP \u5730\u5740\u548c\u7aef\u53e3\u3002 \u62e5\u6709NebulaGraph\u5199\u6743\u9650\u7684\u7528\u6237\u540d\u548c\u5bc6\u7801\u3002 \u5df2\u7ecf\u7f16\u8bd1 Exchange\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1 \u7f16\u8bd1 Exchange \u3002\u672c\u793a\u4f8b\u4e2d\u4f7f\u7528 Exchange 3.6.0\u3002 \u5df2\u7ecf\u5b89\u88c5 Spark\u3002 \u4e86\u89e3NebulaGraph\u4e2d\u521b\u5efa Schema \u7684\u4fe1\u606f\uff0c\u5305\u62ec Tag \u548c Edge type \u7684\u540d\u79f0\u3001\u5c5e\u6027\u7b49\u3002 \u5982\u679c\u6587\u4ef6\u5b58\u50a8\u5728 HDFS \u4e0a\uff0c\u9700\u8981\u786e\u8ba4 Hadoop \u670d\u52a1\u8fd0\u884c\u6b63\u5e38\u3002 \u5982\u679c\u6587\u4ef6\u5b58\u50a8\u5728\u672c\u5730\u4e14NebulaGraph\u662f\u96c6\u7fa4\u67b6\u6784\uff0c\u9700\u8981\u5728\u96c6\u7fa4\u6bcf\u53f0\u673a\u5668\u672c\u5730\u76f8\u540c\u76ee\u5f55\u4e0b\u653e\u7f6e\u6587\u4ef6\u3002 \u64cd\u4f5c\u6b65\u9aa4 \u00b6 \u6b65\u9aa4 1\uff1a\u5728NebulaGraph\u4e2d\u521b\u5efa Schema \u00b6 \u5206\u6790 Parquet \u6587\u4ef6\u4e2d\u7684\u6570\u636e\uff0c\u6309\u4ee5\u4e0b\u6b65\u9aa4\u5728NebulaGraph\u4e2d\u521b\u5efa Schema\uff1a \u786e\u8ba4 Schema \u8981\u7d20\u3002NebulaGraph\u4e2d\u7684 Schema \u8981\u7d20\u5982\u4e0b\u8868\u6240\u793a\u3002 \u8981\u7d20 \u540d\u79f0 \u5c5e\u6027 Tag player name string, age int Tag team name string Edge Type follow degree int Edge Type serve start_year int, end_year int \u4f7f\u7528 NebulaGraph Console \u521b\u5efa\u4e00\u4e2a\u56fe\u7a7a\u95f4 basketballplayer \uff0c\u5e76\u521b\u5efa\u4e00\u4e2a Schema\uff0c\u5982\u4e0b\u6240\u793a\u3002 ## \u521b\u5efa\u56fe\u7a7a\u95f4 nebula> CREATE SPACE basketballplayer \\ (partition_num = 10, \\ replica_factor = 1, \\ vid_type = FIXED_STRING(30)); ## \u9009\u62e9\u56fe\u7a7a\u95f4 basketballplayer nebula> USE basketballplayer; ## \u521b\u5efa Tag player nebula> CREATE TAG player(name string, age int); ## \u521b\u5efa Tag team nebula> CREATE TAG team(name string); ## \u521b\u5efa Edge type follow nebula> CREATE EDGE follow(degree int); ## \u521b\u5efa Edge type serve nebula> CREATE EDGE serve(start_year int, end_year int); \u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u89c1 \u5feb\u901f\u5f00\u59cb \u3002 \u6b65\u9aa4 2\uff1a\u5904\u7406 Parquet \u6587\u4ef6 \u00b6 \u786e\u8ba4\u4ee5\u4e0b\u4fe1\u606f\uff1a \u5904\u7406 Parquet \u6587\u4ef6\u4ee5\u6ee1\u8db3 Schema \u7684\u8981\u6c42\u3002 \u83b7\u53d6 Parquet \u6587\u4ef6\u5b58\u50a8\u8def\u5f84\u3002 \u6b65\u9aa4 3\uff1a\u4fee\u6539\u914d\u7f6e\u6587\u4ef6 \u00b6 \u7f16\u8bd1 Exchange \u540e\uff0c\u590d\u5236 target/classes/application.conf \u6587\u4ef6\u8bbe\u7f6e Parquet \u6570\u636e\u6e90\u76f8\u5173\u7684\u914d\u7f6e\u3002\u5728\u672c\u793a\u4f8b\u4e2d\uff0c\u590d\u5236\u7684\u6587\u4ef6\u540d\u4e3a parquet_application.conf \u3002\u5404\u4e2a\u914d\u7f6e\u9879\u7684\u8be6\u7ec6\u8bf4\u660e\u8bf7\u53c2\u89c1 \u914d\u7f6e\u8bf4\u660e \u3002 { # Spark \u76f8\u5173\u914d\u7f6e spark: { app: { name: NebulaGraph Exchange 3.6.0 } driver: { cores: 1 maxResultSize: 1G } executor: { memory:1G } cores: { max: 16 } } #NebulaGraph\u76f8\u5173\u914d\u7f6e nebula: { address:{ # \u6307\u5b9a Graph \u670d\u52a1\u548c\u6240\u6709 Meta \u670d\u52a1\u7684 IP \u5730\u5740\u548c\u7aef\u53e3\u3002 # \u5982\u679c\u6709\u591a\u53f0\u670d\u52a1\u5668\uff0c\u5730\u5740\u4e4b\u95f4\u7528\u82f1\u6587\u9017\u53f7\uff08,\uff09\u5206\u9694\u3002 # \u683c\u5f0f\uff1a\"ip1:port\",\"ip2:port\",\"ip3:port\" graph:[\"127.0.0.1:9669\"] #\u4efb\u610f\u4e00\u4e2a Meta \u670d\u52a1\u7684\u5730\u5740\u3002 #\u5982\u679c\u60a8\u7684NebulaGraph\u5728\u865a\u62df\u7f51\u7edc\u4e2d\uff0c\u5982k8s\uff0c\u8bf7\u914d\u7f6e Leader Meta\u7684\u5730\u5740\u3002 meta:[\"127.0.0.1:9559\"] } # \u6307\u5b9a\u62e5\u6709NebulaGraph\u5199\u6743\u9650\u7684\u7528\u6237\u540d\u548c\u5bc6\u7801\u3002 user: root pswd: nebula # \u6307\u5b9a\u56fe\u7a7a\u95f4\u540d\u79f0\u3002 space: basketballplayer connection: { timeout: 3000 retry: 3 } execution: { retry: 3 } error: { max: 32 output: /tmp/errors } rate: { limit: 1024 timeout: 1000 } } # \u5904\u7406\u70b9 tags: [ # \u8bbe\u7f6e Tag player \u76f8\u5173\u4fe1\u606f\u3002 { # \u6307\u5b9aNebulaGraph\u4e2d\u5b9a\u4e49\u7684 Tag \u540d\u79f0\u3002 name: player type: { # \u6307\u5b9a\u6570\u636e\u6e90\uff0c\u4f7f\u7528 Parquet\u3002 source: parquet # \u6307\u5b9a\u5982\u4f55\u5c06\u70b9\u6570\u636e\u5bfc\u5165NebulaGraph\uff1aClient \u6216 SST\u3002 sink: client } # \u6307\u5b9a Parquet \u6587\u4ef6\u7684\u8def\u5f84\u3002 # \u5982\u679c\u6587\u4ef6\u5b58\u50a8\u5728 HDFS \u4e0a\uff0c\u7528\u53cc\u5f15\u53f7\u62ec\u8d77\u8def\u5f84\uff0c\u4ee5 hdfs://\u5f00\u5934\uff0c\u4f8b\u5982\"hdfs://ip:port/xx/xx\"\u3002 # \u5982\u679c\u6587\u4ef6\u5b58\u50a8\u5728\u672c\u5730\uff0c\u7528\u53cc\u5f15\u53f7\u62ec\u8d77\u8def\u5f84\uff0c\u4ee5 file://\u5f00\u5934\uff0c\u4f8b\u5982\"file:///tmp/xx.csv\"\u3002 path: \"hdfs://192.168.11.139000/data/vertex_player.parquet\" # \u5728 fields \u91cc\u6307\u5b9a Parquet \u6587\u4ef6\u4e2d key \u540d\u79f0\uff0c\u5176\u5bf9\u5e94\u7684 value \u4f1a\u4f5c\u4e3aNebulaGraph\u4e2d\u6307\u5b9a\u5c5e\u6027\u7684\u6570\u636e\u6e90\u3002 # \u5982\u679c\u9700\u8981\u6307\u5b9a\u591a\u4e2a\u503c\uff0c\u7528\u82f1\u6587\u9017\u53f7\uff08,\uff09\u9694\u5f00\u3002 fields: [age,name] # \u6307\u5b9aNebulaGraph\u4e2d\u5b9a\u4e49\u7684\u5c5e\u6027\u540d\u79f0\u3002 # fields \u4e0e nebula.fields \u7684\u987a\u5e8f\u5fc5\u987b\u4e00\u4e00\u5bf9\u5e94\u3002 nebula.fields: [age, name] # \u6307\u5b9a\u4e00\u4e2a\u5217\u4f5c\u4e3a VID \u7684\u6e90\u3002 # vertex \u7684\u503c\u5fc5\u987b\u4e0e Parquet \u6587\u4ef6\u4e2d\u7684\u5b57\u6bb5\u4fdd\u6301\u4e00\u81f4\u3002 # \u76ee\u524d\uff0cNebulaGraph 3.6.0\u4ec5\u652f\u6301\u5b57\u7b26\u4e32\u6216\u6574\u6570\u7c7b\u578b\u7684 VID\u3002 vertex: { field:id # udf:{ # separator:\"_\" # oldColNames:[field-0,field-1,field-2] # newColName:new-field # } # \u4e3a VID \u589e\u52a0\u6307\u5b9a\u7684\u524d\u7f00\u3002\u4f8b\u5982 VID \u4e3a 12345\uff0c\u589e\u52a0\u524d\u7f00 tag1 \u540e\u4e3a tag1_12345\u3002\u4e0b\u5212\u7ebf\u65e0\u6cd5\u4fee\u6539\u3002 # prefix:\"tag1\" # \u5bf9 string \u7c7b\u578b\u7684 VID \u8fdb\u884c\u54c8\u5e0c\u5316\u64cd\u4f5c\u3002 # policy:hash } # \u6279\u91cf\u64cd\u4f5c\u7c7b\u578b\uff0c\u5305\u62ec INSERT\u3001UPDATE \u548c DELETE\u3002\u9ed8\u8ba4\u4e3a INSERT\u3002 #writeMode: INSERT # \u6279\u91cf\u5220\u9664\u65f6\u662f\u5426\u5220\u9664\u8be5\u70b9\u5173\u8054\u7684\u51fa\u8fb9\u548c\u5165\u8fb9\u3002`writeMode`\u4e3a`DELETE`\u65f6\u8be5\u53c2\u6570\u751f\u6548\u3002 #deleteEdge: false # \u6307\u5b9a\u5355\u6279\u6b21\u5199\u5165NebulaGraph\u7684\u6700\u5927\u70b9\u6570\u91cf\u3002 batch: 256 # \u6307\u5b9a Spark \u5206\u7247\u6570\u91cf\u3002 partition: 32 } # \u8bbe\u7f6e Tag team \u76f8\u5173\u4fe1\u606f\u3002 { name: team type: { source: parquet sink: client } path: \"hdfs://192.168.11.13:9000/data/vertex_team.parquet\" fields: [name] nebula.fields: [name] vertex: { field:id } batch: 256 partition: 32 } # \u5982\u679c\u9700\u8981\u6dfb\u52a0\u66f4\u591a\u70b9\uff0c\u8bf7\u53c2\u8003\u524d\u9762\u7684\u914d\u7f6e\u8fdb\u884c\u6dfb\u52a0\u3002 ] # \u5904\u7406\u8fb9 edges: [ # \u8bbe\u7f6e Edge type follow \u76f8\u5173\u4fe1\u606f\u3002 { # \u6307\u5b9aNebulaGraph\u4e2d\u5b9a\u4e49\u7684 Edge type \u540d\u79f0\u3002 name: follow type: { # \u6307\u5b9a\u6570\u636e\u6e90\uff0c\u4f7f\u7528 Parquet\u3002 source: parquet # \u6307\u5b9a\u5982\u4f55\u5c06\u70b9\u6570\u636e\u5bfc\u5165NebulaGraph\uff1aClient \u6216 SST\u3002 sink: client } # \u6307\u5b9a Parquet \u6587\u4ef6\u7684\u8def\u5f84\u3002 # \u5982\u679c\u6587\u4ef6\u5b58\u50a8\u5728 HDFS \u4e0a\uff0c\u7528\u53cc\u5f15\u53f7\u62ec\u8d77\u8def\u5f84\uff0c\u4ee5 hdfs://\u5f00\u5934\uff0c\u4f8b\u5982\"hdfs://ip:port/xx/xx\"\u3002 # \u5982\u679c\u6587\u4ef6\u5b58\u50a8\u5728\u672c\u5730\uff0c\u7528\u53cc\u5f15\u53f7\u62ec\u8d77\u8def\u5f84\uff0c\u4ee5 file://\u5f00\u5934\uff0c\u4f8b\u5982\"file:///tmp/xx.csv\"\u3002 path: \"hdfs://192.168.11.13:9000/data/edge_follow.parquet\" # \u5728 fields \u91cc\u6307\u5b9a Parquet \u6587\u4ef6\u4e2d key \u540d\u79f0\uff0c\u5176\u5bf9\u5e94\u7684 value \u4f1a\u4f5c\u4e3aNebulaGraph\u4e2d\u6307\u5b9a\u5c5e\u6027\u7684\u6570\u636e\u6e90\u3002 # \u5982\u679c\u9700\u8981\u6307\u5b9a\u591a\u4e2a\u503c\uff0c\u7528\u82f1\u6587\u9017\u53f7\uff08,\uff09\u9694\u5f00\u3002 fields: [degree] # \u6307\u5b9aNebulaGraph\u4e2d\u5b9a\u4e49\u7684\u5c5e\u6027\u540d\u79f0\u3002 # fields \u4e0e nebula.fields \u7684\u987a\u5e8f\u5fc5\u987b\u4e00\u4e00\u5bf9\u5e94\u3002 nebula.fields: [degree] # \u6307\u5b9a\u4e00\u4e2a\u5217\u4f5c\u4e3a\u8d77\u59cb\u70b9\u548c\u76ee\u7684\u70b9\u7684\u6e90\u3002 # vertex \u7684\u503c\u5fc5\u987b\u4e0e Parquet \u6587\u4ef6\u4e2d\u7684\u5b57\u6bb5\u4fdd\u6301\u4e00\u81f4\u3002 # \u76ee\u524d\uff0cNebulaGraph 3.6.0\u4ec5\u652f\u6301\u5b57\u7b26\u4e32\u6216\u6574\u6570\u7c7b\u578b\u7684 VID\u3002 source: { field: src # udf:{ # separator:\"_\" # oldColNames:[field-0,field-1,field-2] # newColName:new-field # } # \u4e3a VID \u589e\u52a0\u6307\u5b9a\u7684\u524d\u7f00\u3002\u4f8b\u5982 VID \u4e3a 12345\uff0c\u589e\u52a0\u524d\u7f00 tag1 \u540e\u4e3a tag1_12345\u3002\u4e0b\u5212\u7ebf\u65e0\u6cd5\u4fee\u6539\u3002 # prefix:\"tag1\" # \u5bf9 string \u7c7b\u578b\u7684 VID \u8fdb\u884c\u54c8\u5e0c\u5316\u64cd\u4f5c\u3002 # policy:hash } target: { field: dst # udf:{ # separator:\"_\" # oldColNames:[field-0,field-1,field-2] # newColName:new-field # } # \u4e3a VID \u589e\u52a0\u6307\u5b9a\u7684\u524d\u7f00\u3002\u4f8b\u5982 VID \u4e3a 12345\uff0c\u589e\u52a0\u524d\u7f00 tag1 \u540e\u4e3a tag1_12345\u3002\u4e0b\u5212\u7ebf\u65e0\u6cd5\u4fee\u6539\u3002 # prefix:\"tag1\" # \u5bf9 string \u7c7b\u578b\u7684 VID \u8fdb\u884c\u54c8\u5e0c\u5316\u64cd\u4f5c\u3002 # policy:hash } # \u6307\u5b9a\u4e00\u4e2a\u5217\u4f5c\u4e3a rank \u7684\u6e90\uff08\u53ef\u9009\uff09\u3002 #ranking: rank # \u6279\u91cf\u64cd\u4f5c\u7c7b\u578b\uff0c\u5305\u62ec INSERT\u3001UPDATE \u548c DELETE\u3002\u9ed8\u8ba4\u4e3a INSERT\u3002 #writeMode: INSERT # \u6307\u5b9a\u5355\u6279\u6b21\u5199\u5165NebulaGraph\u7684\u6700\u5927\u8fb9\u6570\u91cf\u3002 batch: 256 # \u6307\u5b9a Spark \u5206\u7247\u6570\u91cf\u3002 partition: 32 } # \u8bbe\u7f6e Edge type serve \u76f8\u5173\u4fe1\u606f\u3002 { name: serve type: { source: parquet sink: client } path: \"hdfs://192.168.11.13:9000/data/edge_serve.parquet\" fields: [start_year,end_year] nebula.fields: [start_year, end_year] source: { field: src } target: { field: dst } batch: 256 partition: 32 } ] # \u5982\u679c\u9700\u8981\u6dfb\u52a0\u66f4\u591a\u8fb9\uff0c\u8bf7\u53c2\u8003\u524d\u9762\u7684\u914d\u7f6e\u8fdb\u884c\u6dfb\u52a0\u3002 } \u6b65\u9aa4 4\uff1a\u5411NebulaGraph\u5bfc\u5165\u6570\u636e \u00b6 \u8fd0\u884c\u5982\u4e0b\u547d\u4ee4\u5c06 Parquet \u6587\u4ef6\u6570\u636e\u5bfc\u5165\u5230NebulaGraph\u4e2d\u3002\u5173\u4e8e\u53c2\u6570\u7684\u8bf4\u660e\uff0c\u8bf7\u53c2\u89c1 \u5bfc\u5165\u547d\u4ee4\u53c2\u6570 \u3002 ${ SPARK_HOME } /bin/spark-submit --master \"local\" --class com.vesoft.nebula.exchange.Exchange <nebula-exchange-3.6.0.jar_path> -c <parquet_application.conf_path> Note JAR \u5305\u6709\u4e24\u79cd\u83b7\u53d6\u65b9\u5f0f\uff1a \u81ea\u884c\u7f16\u8bd1 \u6216\u8005\u4ece maven \u4ed3\u5e93\u4e0b\u8f7d\u3002 \u793a\u4f8b\uff1a ${ SPARK_HOME } /bin/spark-submit --master \"local\" --class com.vesoft.nebula.exchange.Exchange /root/nebula-exchange/nebula-exchange/target/nebula-exchange-3.6.0.jar -c /root/nebula-exchange/nebula-exchange/target/classes/parquet_application.conf \u7528\u6237\u53ef\u4ee5\u5728\u8fd4\u56de\u4fe1\u606f\u4e2d\u641c\u7d22 batchSuccess.<tag_name/edge_name> \uff0c\u786e\u8ba4\u6210\u529f\u7684\u6570\u91cf\u3002\u4f8b\u5982 batchSuccess.follow: 300 \u3002 \u6b65\u9aa4 5\uff1a\uff08\u53ef\u9009\uff09\u9a8c\u8bc1\u6570\u636e \u00b6 \u7528\u6237\u53ef\u4ee5\u5728NebulaGraph\u5ba2\u6237\u7aef\uff08\u4f8b\u5982 NebulaGraph Studio\uff09\u4e2d\u6267\u884c\u67e5\u8be2\u8bed\u53e5\uff0c\u786e\u8ba4\u6570\u636e\u662f\u5426\u5df2\u5bfc\u5165\u3002\u4f8b\u5982\uff1a LOOKUP ON player YIELD id(vertex); \u7528\u6237\u4e5f\u53ef\u4ee5\u4f7f\u7528\u547d\u4ee4 SHOW STATS \u67e5\u770b\u7edf\u8ba1\u6570\u636e\u3002 \u6b65\u9aa4 6\uff1a\uff08\u5982\u6709\uff09\u5728NebulaGraph\u4e2d\u91cd\u5efa\u7d22\u5f15 \u00b6 \u5bfc\u5165\u6570\u636e\u540e\uff0c\u7528\u6237\u53ef\u4ee5\u5728NebulaGraph\u4e2d\u91cd\u65b0\u521b\u5efa\u5e76\u91cd\u5efa\u7d22\u5f15\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1 \u7d22\u5f15\u4ecb\u7ecd \u3002","title":"\u5bfc\u5165 Parquet \u6587\u4ef6\u6570\u636e"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-parquet/#parquet","text":"\u672c\u6587\u4ee5\u4e00\u4e2a\u793a\u4f8b\u8bf4\u660e\u5982\u4f55\u4f7f\u7528 Exchange \u5c06\u5b58\u50a8\u5728 HDFS \u6216\u672c\u5730\u7684 Parquet \u6587\u4ef6\u6570\u636e\u5bfc\u5165NebulaGraph\u3002","title":"\u5bfc\u5165 Parquet \u6587\u4ef6\u6570\u636e"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-parquet/#_1","text":"\u672c\u6587\u4ee5 basketballplayer \u6570\u636e\u96c6 \u4e3a\u4f8b\u3002","title":"\u6570\u636e\u96c6"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-parquet/#_2","text":"\u672c\u6587\u793a\u4f8b\u5728 MacOS \u4e0b\u5b8c\u6210\uff0c\u4ee5\u4e0b\u662f\u76f8\u5173\u7684\u73af\u5883\u914d\u7f6e\u4fe1\u606f\uff1a \u786c\u4ef6\u89c4\u683c\uff1a CPU\uff1a1.7 GHz Quad-Core Intel Core i7 \u5185\u5b58\uff1a16 GB Spark\uff1a2.4.7 \u5355\u673a\u7248 Hadoop\uff1a2.9.2 \u4f2a\u5206\u5e03\u5f0f\u90e8\u7f72 NebulaGraph\uff1a3.6.0\u3002","title":"\u73af\u5883\u914d\u7f6e"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-parquet/#_3","text":"\u5f00\u59cb\u5bfc\u5165\u6570\u636e\u4e4b\u524d\uff0c\u7528\u6237\u9700\u8981\u786e\u8ba4\u4ee5\u4e0b\u4fe1\u606f\uff1a \u5df2\u7ecf \u5b89\u88c5\u90e8\u7f72NebulaGraph \u5e76\u83b7\u53d6\u5982\u4e0b\u4fe1\u606f\uff1a Graph \u670d\u52a1\u548c Meta \u670d\u52a1\u7684\u7684 IP \u5730\u5740\u548c\u7aef\u53e3\u3002 \u62e5\u6709NebulaGraph\u5199\u6743\u9650\u7684\u7528\u6237\u540d\u548c\u5bc6\u7801\u3002 \u5df2\u7ecf\u7f16\u8bd1 Exchange\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1 \u7f16\u8bd1 Exchange \u3002\u672c\u793a\u4f8b\u4e2d\u4f7f\u7528 Exchange 3.6.0\u3002 \u5df2\u7ecf\u5b89\u88c5 Spark\u3002 \u4e86\u89e3NebulaGraph\u4e2d\u521b\u5efa Schema \u7684\u4fe1\u606f\uff0c\u5305\u62ec Tag \u548c Edge type \u7684\u540d\u79f0\u3001\u5c5e\u6027\u7b49\u3002 \u5982\u679c\u6587\u4ef6\u5b58\u50a8\u5728 HDFS \u4e0a\uff0c\u9700\u8981\u786e\u8ba4 Hadoop \u670d\u52a1\u8fd0\u884c\u6b63\u5e38\u3002 \u5982\u679c\u6587\u4ef6\u5b58\u50a8\u5728\u672c\u5730\u4e14NebulaGraph\u662f\u96c6\u7fa4\u67b6\u6784\uff0c\u9700\u8981\u5728\u96c6\u7fa4\u6bcf\u53f0\u673a\u5668\u672c\u5730\u76f8\u540c\u76ee\u5f55\u4e0b\u653e\u7f6e\u6587\u4ef6\u3002","title":"\u524d\u63d0\u6761\u4ef6"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-parquet/#_4","text":"","title":"\u64cd\u4f5c\u6b65\u9aa4"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-parquet/#1nebulagraph_schema","text":"\u5206\u6790 Parquet \u6587\u4ef6\u4e2d\u7684\u6570\u636e\uff0c\u6309\u4ee5\u4e0b\u6b65\u9aa4\u5728NebulaGraph\u4e2d\u521b\u5efa Schema\uff1a \u786e\u8ba4 Schema \u8981\u7d20\u3002NebulaGraph\u4e2d\u7684 Schema \u8981\u7d20\u5982\u4e0b\u8868\u6240\u793a\u3002 \u8981\u7d20 \u540d\u79f0 \u5c5e\u6027 Tag player name string, age int Tag team name string Edge Type follow degree int Edge Type serve start_year int, end_year int \u4f7f\u7528 NebulaGraph Console \u521b\u5efa\u4e00\u4e2a\u56fe\u7a7a\u95f4 basketballplayer \uff0c\u5e76\u521b\u5efa\u4e00\u4e2a Schema\uff0c\u5982\u4e0b\u6240\u793a\u3002 ## \u521b\u5efa\u56fe\u7a7a\u95f4 nebula> CREATE SPACE basketballplayer \\ (partition_num = 10, \\ replica_factor = 1, \\ vid_type = FIXED_STRING(30)); ## \u9009\u62e9\u56fe\u7a7a\u95f4 basketballplayer nebula> USE basketballplayer; ## \u521b\u5efa Tag player nebula> CREATE TAG player(name string, age int); ## \u521b\u5efa Tag team nebula> CREATE TAG team(name string); ## \u521b\u5efa Edge type follow nebula> CREATE EDGE follow(degree int); ## \u521b\u5efa Edge type serve nebula> CREATE EDGE serve(start_year int, end_year int); \u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u89c1 \u5feb\u901f\u5f00\u59cb \u3002","title":"\u6b65\u9aa4 1\uff1a\u5728NebulaGraph\u4e2d\u521b\u5efa Schema"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-parquet/#2_parquet","text":"\u786e\u8ba4\u4ee5\u4e0b\u4fe1\u606f\uff1a \u5904\u7406 Parquet \u6587\u4ef6\u4ee5\u6ee1\u8db3 Schema \u7684\u8981\u6c42\u3002 \u83b7\u53d6 Parquet \u6587\u4ef6\u5b58\u50a8\u8def\u5f84\u3002","title":"\u6b65\u9aa4 2\uff1a\u5904\u7406 Parquet \u6587\u4ef6"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-parquet/#3","text":"\u7f16\u8bd1 Exchange \u540e\uff0c\u590d\u5236 target/classes/application.conf \u6587\u4ef6\u8bbe\u7f6e Parquet \u6570\u636e\u6e90\u76f8\u5173\u7684\u914d\u7f6e\u3002\u5728\u672c\u793a\u4f8b\u4e2d\uff0c\u590d\u5236\u7684\u6587\u4ef6\u540d\u4e3a parquet_application.conf \u3002\u5404\u4e2a\u914d\u7f6e\u9879\u7684\u8be6\u7ec6\u8bf4\u660e\u8bf7\u53c2\u89c1 \u914d\u7f6e\u8bf4\u660e \u3002 { # Spark \u76f8\u5173\u914d\u7f6e spark: { app: { name: NebulaGraph Exchange 3.6.0 } driver: { cores: 1 maxResultSize: 1G } executor: { memory:1G } cores: { max: 16 } } #NebulaGraph\u76f8\u5173\u914d\u7f6e nebula: { address:{ # \u6307\u5b9a Graph \u670d\u52a1\u548c\u6240\u6709 Meta \u670d\u52a1\u7684 IP \u5730\u5740\u548c\u7aef\u53e3\u3002 # \u5982\u679c\u6709\u591a\u53f0\u670d\u52a1\u5668\uff0c\u5730\u5740\u4e4b\u95f4\u7528\u82f1\u6587\u9017\u53f7\uff08,\uff09\u5206\u9694\u3002 # \u683c\u5f0f\uff1a\"ip1:port\",\"ip2:port\",\"ip3:port\" graph:[\"127.0.0.1:9669\"] #\u4efb\u610f\u4e00\u4e2a Meta \u670d\u52a1\u7684\u5730\u5740\u3002 #\u5982\u679c\u60a8\u7684NebulaGraph\u5728\u865a\u62df\u7f51\u7edc\u4e2d\uff0c\u5982k8s\uff0c\u8bf7\u914d\u7f6e Leader Meta\u7684\u5730\u5740\u3002 meta:[\"127.0.0.1:9559\"] } # \u6307\u5b9a\u62e5\u6709NebulaGraph\u5199\u6743\u9650\u7684\u7528\u6237\u540d\u548c\u5bc6\u7801\u3002 user: root pswd: nebula # \u6307\u5b9a\u56fe\u7a7a\u95f4\u540d\u79f0\u3002 space: basketballplayer connection: { timeout: 3000 retry: 3 } execution: { retry: 3 } error: { max: 32 output: /tmp/errors } rate: { limit: 1024 timeout: 1000 } } # \u5904\u7406\u70b9 tags: [ # \u8bbe\u7f6e Tag player \u76f8\u5173\u4fe1\u606f\u3002 { # \u6307\u5b9aNebulaGraph\u4e2d\u5b9a\u4e49\u7684 Tag \u540d\u79f0\u3002 name: player type: { # \u6307\u5b9a\u6570\u636e\u6e90\uff0c\u4f7f\u7528 Parquet\u3002 source: parquet # \u6307\u5b9a\u5982\u4f55\u5c06\u70b9\u6570\u636e\u5bfc\u5165NebulaGraph\uff1aClient \u6216 SST\u3002 sink: client } # \u6307\u5b9a Parquet \u6587\u4ef6\u7684\u8def\u5f84\u3002 # \u5982\u679c\u6587\u4ef6\u5b58\u50a8\u5728 HDFS \u4e0a\uff0c\u7528\u53cc\u5f15\u53f7\u62ec\u8d77\u8def\u5f84\uff0c\u4ee5 hdfs://\u5f00\u5934\uff0c\u4f8b\u5982\"hdfs://ip:port/xx/xx\"\u3002 # \u5982\u679c\u6587\u4ef6\u5b58\u50a8\u5728\u672c\u5730\uff0c\u7528\u53cc\u5f15\u53f7\u62ec\u8d77\u8def\u5f84\uff0c\u4ee5 file://\u5f00\u5934\uff0c\u4f8b\u5982\"file:///tmp/xx.csv\"\u3002 path: \"hdfs://192.168.11.139000/data/vertex_player.parquet\" # \u5728 fields \u91cc\u6307\u5b9a Parquet \u6587\u4ef6\u4e2d key \u540d\u79f0\uff0c\u5176\u5bf9\u5e94\u7684 value \u4f1a\u4f5c\u4e3aNebulaGraph\u4e2d\u6307\u5b9a\u5c5e\u6027\u7684\u6570\u636e\u6e90\u3002 # \u5982\u679c\u9700\u8981\u6307\u5b9a\u591a\u4e2a\u503c\uff0c\u7528\u82f1\u6587\u9017\u53f7\uff08,\uff09\u9694\u5f00\u3002 fields: [age,name] # \u6307\u5b9aNebulaGraph\u4e2d\u5b9a\u4e49\u7684\u5c5e\u6027\u540d\u79f0\u3002 # fields \u4e0e nebula.fields \u7684\u987a\u5e8f\u5fc5\u987b\u4e00\u4e00\u5bf9\u5e94\u3002 nebula.fields: [age, name] # \u6307\u5b9a\u4e00\u4e2a\u5217\u4f5c\u4e3a VID \u7684\u6e90\u3002 # vertex \u7684\u503c\u5fc5\u987b\u4e0e Parquet \u6587\u4ef6\u4e2d\u7684\u5b57\u6bb5\u4fdd\u6301\u4e00\u81f4\u3002 # \u76ee\u524d\uff0cNebulaGraph 3.6.0\u4ec5\u652f\u6301\u5b57\u7b26\u4e32\u6216\u6574\u6570\u7c7b\u578b\u7684 VID\u3002 vertex: { field:id # udf:{ # separator:\"_\" # oldColNames:[field-0,field-1,field-2] # newColName:new-field # } # \u4e3a VID \u589e\u52a0\u6307\u5b9a\u7684\u524d\u7f00\u3002\u4f8b\u5982 VID \u4e3a 12345\uff0c\u589e\u52a0\u524d\u7f00 tag1 \u540e\u4e3a tag1_12345\u3002\u4e0b\u5212\u7ebf\u65e0\u6cd5\u4fee\u6539\u3002 # prefix:\"tag1\" # \u5bf9 string \u7c7b\u578b\u7684 VID \u8fdb\u884c\u54c8\u5e0c\u5316\u64cd\u4f5c\u3002 # policy:hash } # \u6279\u91cf\u64cd\u4f5c\u7c7b\u578b\uff0c\u5305\u62ec INSERT\u3001UPDATE \u548c DELETE\u3002\u9ed8\u8ba4\u4e3a INSERT\u3002 #writeMode: INSERT # \u6279\u91cf\u5220\u9664\u65f6\u662f\u5426\u5220\u9664\u8be5\u70b9\u5173\u8054\u7684\u51fa\u8fb9\u548c\u5165\u8fb9\u3002`writeMode`\u4e3a`DELETE`\u65f6\u8be5\u53c2\u6570\u751f\u6548\u3002 #deleteEdge: false # \u6307\u5b9a\u5355\u6279\u6b21\u5199\u5165NebulaGraph\u7684\u6700\u5927\u70b9\u6570\u91cf\u3002 batch: 256 # \u6307\u5b9a Spark \u5206\u7247\u6570\u91cf\u3002 partition: 32 } # \u8bbe\u7f6e Tag team \u76f8\u5173\u4fe1\u606f\u3002 { name: team type: { source: parquet sink: client } path: \"hdfs://192.168.11.13:9000/data/vertex_team.parquet\" fields: [name] nebula.fields: [name] vertex: { field:id } batch: 256 partition: 32 } # \u5982\u679c\u9700\u8981\u6dfb\u52a0\u66f4\u591a\u70b9\uff0c\u8bf7\u53c2\u8003\u524d\u9762\u7684\u914d\u7f6e\u8fdb\u884c\u6dfb\u52a0\u3002 ] # \u5904\u7406\u8fb9 edges: [ # \u8bbe\u7f6e Edge type follow \u76f8\u5173\u4fe1\u606f\u3002 { # \u6307\u5b9aNebulaGraph\u4e2d\u5b9a\u4e49\u7684 Edge type \u540d\u79f0\u3002 name: follow type: { # \u6307\u5b9a\u6570\u636e\u6e90\uff0c\u4f7f\u7528 Parquet\u3002 source: parquet # \u6307\u5b9a\u5982\u4f55\u5c06\u70b9\u6570\u636e\u5bfc\u5165NebulaGraph\uff1aClient \u6216 SST\u3002 sink: client } # \u6307\u5b9a Parquet \u6587\u4ef6\u7684\u8def\u5f84\u3002 # \u5982\u679c\u6587\u4ef6\u5b58\u50a8\u5728 HDFS \u4e0a\uff0c\u7528\u53cc\u5f15\u53f7\u62ec\u8d77\u8def\u5f84\uff0c\u4ee5 hdfs://\u5f00\u5934\uff0c\u4f8b\u5982\"hdfs://ip:port/xx/xx\"\u3002 # \u5982\u679c\u6587\u4ef6\u5b58\u50a8\u5728\u672c\u5730\uff0c\u7528\u53cc\u5f15\u53f7\u62ec\u8d77\u8def\u5f84\uff0c\u4ee5 file://\u5f00\u5934\uff0c\u4f8b\u5982\"file:///tmp/xx.csv\"\u3002 path: \"hdfs://192.168.11.13:9000/data/edge_follow.parquet\" # \u5728 fields \u91cc\u6307\u5b9a Parquet \u6587\u4ef6\u4e2d key \u540d\u79f0\uff0c\u5176\u5bf9\u5e94\u7684 value \u4f1a\u4f5c\u4e3aNebulaGraph\u4e2d\u6307\u5b9a\u5c5e\u6027\u7684\u6570\u636e\u6e90\u3002 # \u5982\u679c\u9700\u8981\u6307\u5b9a\u591a\u4e2a\u503c\uff0c\u7528\u82f1\u6587\u9017\u53f7\uff08,\uff09\u9694\u5f00\u3002 fields: [degree] # \u6307\u5b9aNebulaGraph\u4e2d\u5b9a\u4e49\u7684\u5c5e\u6027\u540d\u79f0\u3002 # fields \u4e0e nebula.fields \u7684\u987a\u5e8f\u5fc5\u987b\u4e00\u4e00\u5bf9\u5e94\u3002 nebula.fields: [degree] # \u6307\u5b9a\u4e00\u4e2a\u5217\u4f5c\u4e3a\u8d77\u59cb\u70b9\u548c\u76ee\u7684\u70b9\u7684\u6e90\u3002 # vertex \u7684\u503c\u5fc5\u987b\u4e0e Parquet \u6587\u4ef6\u4e2d\u7684\u5b57\u6bb5\u4fdd\u6301\u4e00\u81f4\u3002 # \u76ee\u524d\uff0cNebulaGraph 3.6.0\u4ec5\u652f\u6301\u5b57\u7b26\u4e32\u6216\u6574\u6570\u7c7b\u578b\u7684 VID\u3002 source: { field: src # udf:{ # separator:\"_\" # oldColNames:[field-0,field-1,field-2] # newColName:new-field # } # \u4e3a VID \u589e\u52a0\u6307\u5b9a\u7684\u524d\u7f00\u3002\u4f8b\u5982 VID \u4e3a 12345\uff0c\u589e\u52a0\u524d\u7f00 tag1 \u540e\u4e3a tag1_12345\u3002\u4e0b\u5212\u7ebf\u65e0\u6cd5\u4fee\u6539\u3002 # prefix:\"tag1\" # \u5bf9 string \u7c7b\u578b\u7684 VID \u8fdb\u884c\u54c8\u5e0c\u5316\u64cd\u4f5c\u3002 # policy:hash } target: { field: dst # udf:{ # separator:\"_\" # oldColNames:[field-0,field-1,field-2] # newColName:new-field # } # \u4e3a VID \u589e\u52a0\u6307\u5b9a\u7684\u524d\u7f00\u3002\u4f8b\u5982 VID \u4e3a 12345\uff0c\u589e\u52a0\u524d\u7f00 tag1 \u540e\u4e3a tag1_12345\u3002\u4e0b\u5212\u7ebf\u65e0\u6cd5\u4fee\u6539\u3002 # prefix:\"tag1\" # \u5bf9 string \u7c7b\u578b\u7684 VID \u8fdb\u884c\u54c8\u5e0c\u5316\u64cd\u4f5c\u3002 # policy:hash } # \u6307\u5b9a\u4e00\u4e2a\u5217\u4f5c\u4e3a rank \u7684\u6e90\uff08\u53ef\u9009\uff09\u3002 #ranking: rank # \u6279\u91cf\u64cd\u4f5c\u7c7b\u578b\uff0c\u5305\u62ec INSERT\u3001UPDATE \u548c DELETE\u3002\u9ed8\u8ba4\u4e3a INSERT\u3002 #writeMode: INSERT # \u6307\u5b9a\u5355\u6279\u6b21\u5199\u5165NebulaGraph\u7684\u6700\u5927\u8fb9\u6570\u91cf\u3002 batch: 256 # \u6307\u5b9a Spark \u5206\u7247\u6570\u91cf\u3002 partition: 32 } # \u8bbe\u7f6e Edge type serve \u76f8\u5173\u4fe1\u606f\u3002 { name: serve type: { source: parquet sink: client } path: \"hdfs://192.168.11.13:9000/data/edge_serve.parquet\" fields: [start_year,end_year] nebula.fields: [start_year, end_year] source: { field: src } target: { field: dst } batch: 256 partition: 32 } ] # \u5982\u679c\u9700\u8981\u6dfb\u52a0\u66f4\u591a\u8fb9\uff0c\u8bf7\u53c2\u8003\u524d\u9762\u7684\u914d\u7f6e\u8fdb\u884c\u6dfb\u52a0\u3002 }","title":"\u6b65\u9aa4 3\uff1a\u4fee\u6539\u914d\u7f6e\u6587\u4ef6"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-parquet/#4nebulagraph","text":"\u8fd0\u884c\u5982\u4e0b\u547d\u4ee4\u5c06 Parquet \u6587\u4ef6\u6570\u636e\u5bfc\u5165\u5230NebulaGraph\u4e2d\u3002\u5173\u4e8e\u53c2\u6570\u7684\u8bf4\u660e\uff0c\u8bf7\u53c2\u89c1 \u5bfc\u5165\u547d\u4ee4\u53c2\u6570 \u3002 ${ SPARK_HOME } /bin/spark-submit --master \"local\" --class com.vesoft.nebula.exchange.Exchange <nebula-exchange-3.6.0.jar_path> -c <parquet_application.conf_path> Note JAR \u5305\u6709\u4e24\u79cd\u83b7\u53d6\u65b9\u5f0f\uff1a \u81ea\u884c\u7f16\u8bd1 \u6216\u8005\u4ece maven \u4ed3\u5e93\u4e0b\u8f7d\u3002 \u793a\u4f8b\uff1a ${ SPARK_HOME } /bin/spark-submit --master \"local\" --class com.vesoft.nebula.exchange.Exchange /root/nebula-exchange/nebula-exchange/target/nebula-exchange-3.6.0.jar -c /root/nebula-exchange/nebula-exchange/target/classes/parquet_application.conf \u7528\u6237\u53ef\u4ee5\u5728\u8fd4\u56de\u4fe1\u606f\u4e2d\u641c\u7d22 batchSuccess.<tag_name/edge_name> \uff0c\u786e\u8ba4\u6210\u529f\u7684\u6570\u91cf\u3002\u4f8b\u5982 batchSuccess.follow: 300 \u3002","title":"\u6b65\u9aa4 4\uff1a\u5411NebulaGraph\u5bfc\u5165\u6570\u636e"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-parquet/#5","text":"\u7528\u6237\u53ef\u4ee5\u5728NebulaGraph\u5ba2\u6237\u7aef\uff08\u4f8b\u5982 NebulaGraph Studio\uff09\u4e2d\u6267\u884c\u67e5\u8be2\u8bed\u53e5\uff0c\u786e\u8ba4\u6570\u636e\u662f\u5426\u5df2\u5bfc\u5165\u3002\u4f8b\u5982\uff1a LOOKUP ON player YIELD id(vertex); \u7528\u6237\u4e5f\u53ef\u4ee5\u4f7f\u7528\u547d\u4ee4 SHOW STATS \u67e5\u770b\u7edf\u8ba1\u6570\u636e\u3002","title":"\u6b65\u9aa4 5\uff1a\uff08\u53ef\u9009\uff09\u9a8c\u8bc1\u6570\u636e"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-parquet/#6nebulagraph","text":"\u5bfc\u5165\u6570\u636e\u540e\uff0c\u7528\u6237\u53ef\u4ee5\u5728NebulaGraph\u4e2d\u91cd\u65b0\u521b\u5efa\u5e76\u91cd\u5efa\u7d22\u5f15\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1 \u7d22\u5f15\u4ecb\u7ecd \u3002","title":"\u6b65\u9aa4 6\uff1a\uff08\u5982\u6709\uff09\u5728NebulaGraph\u4e2d\u91cd\u5efa\u7d22\u5f15"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-pulsar/","text":"\u5bfc\u5165 Pulsar \u6570\u636e \u00b6 \u672c\u6587\u7b80\u5355\u8bf4\u660e\u5982\u4f55\u4f7f\u7528 Exchange \u5c06\u5b58\u50a8\u5728 Pulsar \u4e0a\u7684\u6570\u636e\u5bfc\u5165NebulaGraph\u3002 \u73af\u5883\u914d\u7f6e \u00b6 \u672c\u6587\u793a\u4f8b\u5728 MacOS \u4e0b\u5b8c\u6210\uff0c\u4ee5\u4e0b\u662f\u76f8\u5173\u7684\u73af\u5883\u914d\u7f6e\u4fe1\u606f\uff1a \u786c\u4ef6\u89c4\u683c\uff1a CPU\uff1a1.7 GHz Quad-Core Intel Core i7 \u5185\u5b58\uff1a16 GB Spark\uff1a2.4.7\uff0c\u5355\u673a\u7248 NebulaGraph\uff1a3.6.0\u3002 \u524d\u63d0\u6761\u4ef6 \u00b6 \u5f00\u59cb\u5bfc\u5165\u6570\u636e\u4e4b\u524d\uff0c\u7528\u6237\u9700\u8981\u786e\u8ba4\u4ee5\u4e0b\u4fe1\u606f\uff1a \u5df2\u7ecf \u5b89\u88c5\u90e8\u7f72NebulaGraph \u5e76\u83b7\u53d6\u5982\u4e0b\u4fe1\u606f\uff1a Graph \u670d\u52a1\u548c Meta \u670d\u52a1\u7684\u7684 IP \u5730\u5740\u548c\u7aef\u53e3\u3002 \u62e5\u6709NebulaGraph\u5199\u6743\u9650\u7684\u7528\u6237\u540d\u548c\u5bc6\u7801\u3002 \u5df2\u7ecf\u7f16\u8bd1 Exchange\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1 \u7f16\u8bd1 Exchange \u3002\u672c\u793a\u4f8b\u4e2d\u4f7f\u7528 Exchange 3.6.0\u3002 \u5df2\u7ecf\u5b89\u88c5 Spark\u3002 \u4e86\u89e3NebulaGraph\u4e2d\u521b\u5efa Schema \u7684\u4fe1\u606f\uff0c\u5305\u62ec Tag \u548c Edge type \u7684\u540d\u79f0\u3001\u5c5e\u6027\u7b49\u3002 \u5df2\u7ecf\u5b89\u88c5\u5e76\u5f00\u542f Pulsar \u670d\u52a1\u3002 \u6ce8\u610f\u4e8b\u9879 \u00b6 \u5bfc\u5165 Pulsar \u6570\u636e\u65f6\u53ea\u652f\u6301 Client \u6a21\u5f0f\uff0c\u5373\u53c2\u6570 tags.type.sink \u548c edges.type.sink \u7684\u503c\u4e3a client \u3002 \u5bfc\u5165 Pulsar \u6570\u636e\u65f6\u8bf7\u52ff\u4f7f\u7528 Exchange 3.4.0 \u7248\u672c\uff0c\u8be5\u7248\u672c\u589e\u52a0\u4e86\u5bf9\u5bfc\u5165\u6570\u636e\u7684\u7f13\u5b58\uff0c\u4e0d\u652f\u6301\u6d41\u5f0f\u6570\u636e\u5bfc\u5165\u3002\u8bf7\u4f7f\u7528 Exchange 3.0.0\u30013.3.0\u30013.5.0 \u7248\u672c\u3002 \u64cd\u4f5c\u6b65\u9aa4 \u00b6 \u6b65\u9aa4 1\uff1a\u5728NebulaGraph\u4e2d\u521b\u5efa Schema \u00b6 \u5206\u6790\u6570\u636e\uff0c\u6309\u4ee5\u4e0b\u6b65\u9aa4\u5728NebulaGraph\u4e2d\u521b\u5efa Schema\uff1a \u786e\u8ba4 Schema \u8981\u7d20\u3002NebulaGraph\u4e2d\u7684 Schema \u8981\u7d20\u5982\u4e0b\u8868\u6240\u793a\u3002 \u8981\u7d20 \u540d\u79f0 \u5c5e\u6027 Tag player name string, age int Tag team name string Edge Type follow degree int Edge Type serve start_year int, end_year int \u5728NebulaGraph\u4e2d\u521b\u5efa\u4e00\u4e2a\u56fe\u7a7a\u95f4 basketballplayer \uff0c\u5e76\u521b\u5efa\u4e00\u4e2a Schema\uff0c\u5982\u4e0b\u6240\u793a\u3002 ## \u521b\u5efa\u56fe\u7a7a\u95f4 nebula> CREATE SPACE basketballplayer \\ (partition_num = 10, \\ replica_factor = 1, \\ vid_type = FIXED_STRING(30)); ## \u9009\u62e9\u56fe\u7a7a\u95f4 basketballplayer nebula> USE basketballplayer; ## \u521b\u5efa Tag player nebula> CREATE TAG player(name string, age int); ## \u521b\u5efa Tag team nebula> CREATE TAG team(name string); ## \u521b\u5efa Edge type follow nebula> CREATE EDGE follow(degree int); ## \u521b\u5efa Edge type serve nebula> CREATE EDGE serve(start_year int, end_year int); \u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u89c1 \u5feb\u901f\u5f00\u59cb \u3002 \u6b65\u9aa4 2\uff1a\u4fee\u6539\u914d\u7f6e\u6587\u4ef6 \u00b6 \u7f16\u8bd1 Exchange \u540e\uff0c\u590d\u5236 target/classes/application.conf \u6587\u4ef6\u8bbe\u7f6e Pulsar \u6570\u636e\u6e90\u76f8\u5173\u7684\u914d\u7f6e\u3002\u5728\u672c\u793a\u4f8b\u4e2d\uff0c\u590d\u5236\u7684\u6587\u4ef6\u540d\u4e3a pulsar_application.conf \u3002\u5404\u4e2a\u914d\u7f6e\u9879\u7684\u8be6\u7ec6\u8bf4\u660e\u8bf7\u53c2\u89c1 \u914d\u7f6e\u8bf4\u660e \u3002 { # Spark \u76f8\u5173\u914d\u7f6e spark: { app: { name: NebulaGraph Exchange 3.6.0 } driver: { cores: 1 maxResultSize: 1G } cores: { max: 16 } } #NebulaGraph\u76f8\u5173\u914d\u7f6e nebula: { address:{ # \u4ee5\u4e0b\u4e3aNebulaGraph\u7684 Graph \u670d\u52a1\u548c Meta \u670d\u52a1\u6240\u5728\u673a\u5668\u7684 IP \u5730\u5740\u53ca\u7aef\u53e3\u3002 # \u5982\u679c\u6709\u591a\u4e2a\u5730\u5740\uff0c\u683c\u5f0f\u4e3a \"ip1:port\",\"ip2:port\",\"ip3:port\"\u3002 # \u4e0d\u540c\u5730\u5740\u4e4b\u95f4\u4ee5\u82f1\u6587\u9017\u53f7 (,) \u9694\u5f00\u3002 graph:[\"127.0.0.1:9669\"] #\u4efb\u610f\u4e00\u4e2a Meta \u670d\u52a1\u7684\u5730\u5740\u3002 #\u5982\u679c\u60a8\u7684NebulaGraph\u5728\u865a\u62df\u7f51\u7edc\u4e2d\uff0c\u5982k8s\uff0c\u8bf7\u914d\u7f6e Leader Meta\u7684\u5730\u5740\u3002 meta:[\"127.0.0.1:9559\"] } # \u586b\u5199\u7684\u8d26\u53f7\u5fc5\u987b\u62e5\u6709NebulaGraph\u76f8\u5e94\u56fe\u7a7a\u95f4\u7684\u5199\u6570\u636e\u6743\u9650\u3002 user: root pswd: nebula # \u586b\u5199NebulaGraph\u4e2d\u9700\u8981\u5199\u5165\u6570\u636e\u7684\u56fe\u7a7a\u95f4\u540d\u79f0\u3002 space: basketballplayer connection: { timeout: 3000 retry: 3 } execution: { retry: 3 } error: { max: 32 output: /tmp/errors } rate: { limit: 1024 timeout: 1000 } } # \u5904\u7406\u70b9 tags: [ # \u8bbe\u7f6e Tag player \u76f8\u5173\u4fe1\u606f\u3002 { #NebulaGraph\u4e2d\u5bf9\u5e94\u7684 Tag \u540d\u79f0\u3002 name: player type: { # \u6307\u5b9a\u6570\u636e\u6e90\u6587\u4ef6\u683c\u5f0f\uff0c\u8bbe\u7f6e\u4e3a Pulsar\u3002 source: pulsar # \u6307\u5b9a\u5982\u4f55\u5c06\u6570\u636e\u5bfc\u5165NebulaGraph\u3002\u53ea\u652f\u6301 Client\u3002 sink: client } # Pulsar \u670d\u52a1\u5668\u5730\u5740\u3002 service: \"pulsar://127.0.0.1:6650\" # \u8fde\u63a5 pulsar \u7684 admin.url\u3002 admin: \"http://127.0.0.1:8081\" # Pulsar \u7684\u9009\u9879\uff0c\u53ef\u4ee5\u4ece topic\u3001topics \u548c topicsPattern \u9009\u62e9\u4e00\u4e2a\u8fdb\u884c\u914d\u7f6e\u3002 options: { topics: \"topic1,topic2\" } # \u5728 fields \u91cc\u6307\u5b9a player \u8868\u4e2d\u7684\u5217\u540d\u79f0\uff0c\u5176\u5bf9\u5e94\u7684 value \u4f1a\u4f5c\u4e3aNebulaGraph\u4e2d\u6307\u5b9a\u5c5e\u6027\u3002 # fields \u548c nebula.fields \u91cc\u7684\u914d\u7f6e\u5fc5\u987b\u4e00\u4e00\u5bf9\u5e94\u3002 # \u5982\u679c\u9700\u8981\u6307\u5b9a\u591a\u4e2a\u5217\u540d\u79f0\uff0c\u7528\u82f1\u6587\u9017\u53f7\uff08,\uff09\u9694\u5f00\u3002 fields: [age,name] nebula.fields: [age,name] # \u6307\u5b9a\u8868\u4e2d\u67d0\u4e00\u5217\u6570\u636e\u4e3aNebulaGraph\u4e2d\u70b9 VID \u7684\u6765\u6e90\u3002 vertex:{ field:playerid # udf:{ # separator:\"_\" # oldColNames:[field-0,field-1,field-2] # newColName:new-field # } # \u4e3a VID \u589e\u52a0\u6307\u5b9a\u7684\u524d\u7f00\u3002\u4f8b\u5982 VID \u4e3a 12345\uff0c\u589e\u52a0\u524d\u7f00 tag1 \u540e\u4e3a tag1_12345\u3002\u4e0b\u5212\u7ebf\u65e0\u6cd5\u4fee\u6539\u3002 # prefix:\"tag1\" # \u5bf9 string \u7c7b\u578b\u7684 VID \u8fdb\u884c\u54c8\u5e0c\u5316\u64cd\u4f5c\u3002 # policy:hash } # \u6279\u91cf\u64cd\u4f5c\u7c7b\u578b\uff0c\u5305\u62ec INSERT\u3001UPDATE \u548c DELETE\u3002\u9ed8\u8ba4\u4e3a INSERT\u3002 #writeMode: INSERT # \u6279\u91cf\u5220\u9664\u65f6\u662f\u5426\u5220\u9664\u8be5\u70b9\u5173\u8054\u7684\u51fa\u8fb9\u548c\u5165\u8fb9\u3002`writeMode`\u4e3a`DELETE`\u65f6\u8be5\u53c2\u6570\u751f\u6548\u3002 #deleteEdge: false # \u5355\u6279\u6b21\u5199\u5165NebulaGraph\u7684\u6570\u636e\u6761\u6570\u3002 batch: 10 # Spark \u5206\u533a\u6570\u91cf partition: 10 # \u8bfb\u53d6\u6d88\u606f\u7684\u95f4\u9694\u3002\u5355\u4f4d\uff1a\u79d2\u3002 interval.seconds: 10 } # \u8bbe\u7f6e Tag team \u76f8\u5173\u4fe1\u606f\u3002 { name: team type: { source: pulsar sink: client } service: \"pulsar://127.0.0.1:6650\" admin: \"http://127.0.0.1:8081\" options: { topics: \"topic1,topic2\" } fields: [name] nebula.fields: [name] vertex:{ field:teamid } batch: 10 partition: 10 interval.seconds: 10 } ] # \u5904\u7406\u8fb9\u6570\u636e edges: [ # \u8bbe\u7f6e Edge type follow \u76f8\u5173\u4fe1\u606f { #NebulaGraph\u4e2d\u5bf9\u5e94\u7684 Edge type \u540d\u79f0\u3002 name: follow type: { # \u6307\u5b9a\u6570\u636e\u6e90\u6587\u4ef6\u683c\u5f0f\uff0c\u8bbe\u7f6e\u4e3a Pulsar\u3002 source: pulsar # \u6307\u5b9a\u8fb9\u6570\u636e\u5bfc\u5165NebulaGraph\u7684\u65b9\u5f0f\uff0c # \u6307\u5b9a\u5982\u4f55\u5c06\u6570\u636e\u5bfc\u5165NebulaGraph\u3002\u53ea\u652f\u6301 Client\u3002 sink: client } # Pulsar \u670d\u52a1\u5668\u5730\u5740\u3002 service: \"pulsar://127.0.0.1:6650\" # \u8fde\u63a5 pulsar \u7684 admin.url\u3002 admin: \"http://127.0.0.1:8081\" # Pulsar \u7684\u9009\u9879\uff0c\u53ef\u4ee5\u4ece topic\u3001topics \u548c topicsPattern \u9009\u62e9\u4e00\u4e2a\u8fdb\u884c\u914d\u7f6e\u3002 options: { topics: \"topic1,topic2\" } # \u5728 fields \u91cc\u6307\u5b9a follow \u8868\u4e2d\u7684\u5217\u540d\u79f0\uff0c\u5176\u5bf9\u5e94\u7684 value \u4f1a\u4f5c\u4e3aNebulaGraph\u4e2d\u6307\u5b9a\u5c5e\u6027\u3002 # fields \u548c nebula.fields \u91cc\u7684\u914d\u7f6e\u5fc5\u987b\u4e00\u4e00\u5bf9\u5e94\u3002 # \u5982\u679c\u9700\u8981\u6307\u5b9a\u591a\u4e2a\u5217\u540d\u79f0\uff0c\u7528\u82f1\u6587\u9017\u53f7\uff08,\uff09\u9694\u5f00\u3002 fields: [degree] nebula.fields: [degree] # \u5728 source \u91cc\uff0c\u5c06 follow \u8868\u4e2d\u67d0\u4e00\u5217\u4f5c\u4e3a\u8fb9\u7684\u8d77\u59cb\u70b9\u6570\u636e\u6e90\u3002 # \u5728 target \u91cc\uff0c\u5c06 follow \u8868\u4e2d\u67d0\u4e00\u5217\u4f5c\u4e3a\u8fb9\u7684\u76ee\u7684\u70b9\u6570\u636e\u6e90\u3002 source:{ field:src_player # udf:{ # separator:\"_\" # oldColNames:[field-0,field-1,field-2] # newColName:new-field # } # \u4e3a VID \u589e\u52a0\u6307\u5b9a\u7684\u524d\u7f00\u3002\u4f8b\u5982 VID \u4e3a 12345\uff0c\u589e\u52a0\u524d\u7f00 tag1 \u540e\u4e3a tag1_12345\u3002\u4e0b\u5212\u7ebf\u65e0\u6cd5\u4fee\u6539\u3002 # prefix:\"tag1\" # \u5bf9 string \u7c7b\u578b\u7684 VID \u8fdb\u884c\u54c8\u5e0c\u5316\u64cd\u4f5c\u3002 # policy:hash } target:{ field:dst_player # udf:{ # separator:\"_\" # oldColNames:[field-0,field-1,field-2] # newColName:new-field # } # \u4e3a VID \u589e\u52a0\u6307\u5b9a\u7684\u524d\u7f00\u3002\u4f8b\u5982 VID \u4e3a 12345\uff0c\u589e\u52a0\u524d\u7f00 tag1 \u540e\u4e3a tag1_12345\u3002\u4e0b\u5212\u7ebf\u65e0\u6cd5\u4fee\u6539\u3002 # prefix:\"tag1\" # \u5bf9 string \u7c7b\u578b\u7684 VID \u8fdb\u884c\u54c8\u5e0c\u5316\u64cd\u4f5c\u3002 # policy:hash } # \u6307\u5b9a\u4e00\u4e2a\u5217\u4f5c\u4e3a rank \u7684\u6e90\uff08\u53ef\u9009\uff09\u3002 #ranking: rank # \u6279\u91cf\u64cd\u4f5c\u7c7b\u578b\uff0c\u5305\u62ec INSERT\u3001UPDATE \u548c DELETE\u3002\u9ed8\u8ba4\u4e3a INSERT\u3002 #writeMode: INSERT # \u5355\u6279\u6b21\u5199\u5165NebulaGraph\u7684\u6570\u636e\u6761\u6570\u3002 batch: 10 # Spark \u5206\u533a\u6570\u91cf partition: 10 # \u8bfb\u53d6\u6d88\u606f\u7684\u95f4\u9694\u3002\u5355\u4f4d\uff1a\u79d2\u3002 interval.seconds: 10 } # \u8bbe\u7f6e Edge type serve \u76f8\u5173\u4fe1\u606f { name: serve type: { source: Pulsar sink: client } service: \"pulsar://127.0.0.1:6650\" admin: \"http://127.0.0.1:8081\" options: { topics: \"topic1,topic2\" } fields: [start_year,end_year] nebula.fields: [start_year,end_year] source:{ field:playerid } target:{ field:teamid } # \u6307\u5b9a\u4e00\u4e2a\u5217\u4f5c\u4e3a rank \u7684\u6e90\uff08\u53ef\u9009\uff09\u3002 #ranking: rank batch: 10 partition: 10 interval.seconds: 10 } ] } \u6b65\u9aa4 3\uff1a\u5411NebulaGraph\u5bfc\u5165\u6570\u636e \u00b6 \u8fd0\u884c\u5982\u4e0b\u547d\u4ee4\u5c06 Pulsar \u6570\u636e\u5bfc\u5165\u5230NebulaGraph\u4e2d\u3002\u5173\u4e8e\u53c2\u6570\u7684\u8bf4\u660e\uff0c\u8bf7\u53c2\u89c1 \u5bfc\u5165\u547d\u4ee4\u53c2\u6570 \u3002 ${ SPARK_HOME } /bin/spark-submit --master \"local\" --class com.vesoft.nebula.exchange.Exchange <nebula-exchange-3.6.0.jar_path> -c <pulsar_application.conf_path> Note JAR \u5305\u6709\u4e24\u79cd\u83b7\u53d6\u65b9\u5f0f\uff1a \u81ea\u884c\u7f16\u8bd1 \u6216\u8005\u4ece maven \u4ed3\u5e93\u4e0b\u8f7d\u3002 \u793a\u4f8b\uff1a ${ SPARK_HOME } /bin/spark-submit --master \"local\" --class com.vesoft.nebula.exchange.Exchange /root/nebula-exchange/nebula-exchange/target/nebula-exchange-3.6.0.jar -c /root/nebula-exchange/nebula-exchange/target/classes/pulsar_application.conf \u7528\u6237\u53ef\u4ee5\u5728\u8fd4\u56de\u4fe1\u606f\u4e2d\u641c\u7d22 batchSuccess.<tag_name/edge_name> \uff0c\u786e\u8ba4\u6210\u529f\u7684\u6570\u91cf\u3002\u4f8b\u5982 batchSuccess.follow: 300 \u3002 \u6b65\u9aa4 4\uff1a\uff08\u53ef\u9009\uff09\u9a8c\u8bc1\u6570\u636e \u00b6 \u7528\u6237\u53ef\u4ee5\u5728NebulaGraph\u5ba2\u6237\u7aef\uff08\u4f8b\u5982 NebulaGraph Studio\uff09\u4e2d\u6267\u884c\u67e5\u8be2\u8bed\u53e5\uff0c\u786e\u8ba4\u6570\u636e\u662f\u5426\u5df2\u5bfc\u5165\u3002\u4f8b\u5982\uff1a LOOKUP ON player YIELD id(vertex); \u7528\u6237\u4e5f\u53ef\u4ee5\u4f7f\u7528\u547d\u4ee4 SHOW STATS \u67e5\u770b\u7edf\u8ba1\u6570\u636e\u3002 \u6b65\u9aa4 5\uff1a\uff08\u5982\u6709\uff09\u5728NebulaGraph\u4e2d\u91cd\u5efa\u7d22\u5f15 \u00b6 \u5bfc\u5165\u6570\u636e\u540e\uff0c\u7528\u6237\u53ef\u4ee5\u5728NebulaGraph\u4e2d\u91cd\u65b0\u521b\u5efa\u5e76\u91cd\u5efa\u7d22\u5f15\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1 \u7d22\u5f15\u4ecb\u7ecd \u3002","title":"\u5bfc\u5165 Pulsar \u6570\u636e"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-pulsar/#pulsar","text":"\u672c\u6587\u7b80\u5355\u8bf4\u660e\u5982\u4f55\u4f7f\u7528 Exchange \u5c06\u5b58\u50a8\u5728 Pulsar \u4e0a\u7684\u6570\u636e\u5bfc\u5165NebulaGraph\u3002","title":"\u5bfc\u5165 Pulsar \u6570\u636e"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-pulsar/#_1","text":"\u672c\u6587\u793a\u4f8b\u5728 MacOS \u4e0b\u5b8c\u6210\uff0c\u4ee5\u4e0b\u662f\u76f8\u5173\u7684\u73af\u5883\u914d\u7f6e\u4fe1\u606f\uff1a \u786c\u4ef6\u89c4\u683c\uff1a CPU\uff1a1.7 GHz Quad-Core Intel Core i7 \u5185\u5b58\uff1a16 GB Spark\uff1a2.4.7\uff0c\u5355\u673a\u7248 NebulaGraph\uff1a3.6.0\u3002","title":"\u73af\u5883\u914d\u7f6e"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-pulsar/#_2","text":"\u5f00\u59cb\u5bfc\u5165\u6570\u636e\u4e4b\u524d\uff0c\u7528\u6237\u9700\u8981\u786e\u8ba4\u4ee5\u4e0b\u4fe1\u606f\uff1a \u5df2\u7ecf \u5b89\u88c5\u90e8\u7f72NebulaGraph \u5e76\u83b7\u53d6\u5982\u4e0b\u4fe1\u606f\uff1a Graph \u670d\u52a1\u548c Meta \u670d\u52a1\u7684\u7684 IP \u5730\u5740\u548c\u7aef\u53e3\u3002 \u62e5\u6709NebulaGraph\u5199\u6743\u9650\u7684\u7528\u6237\u540d\u548c\u5bc6\u7801\u3002 \u5df2\u7ecf\u7f16\u8bd1 Exchange\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1 \u7f16\u8bd1 Exchange \u3002\u672c\u793a\u4f8b\u4e2d\u4f7f\u7528 Exchange 3.6.0\u3002 \u5df2\u7ecf\u5b89\u88c5 Spark\u3002 \u4e86\u89e3NebulaGraph\u4e2d\u521b\u5efa Schema \u7684\u4fe1\u606f\uff0c\u5305\u62ec Tag \u548c Edge type \u7684\u540d\u79f0\u3001\u5c5e\u6027\u7b49\u3002 \u5df2\u7ecf\u5b89\u88c5\u5e76\u5f00\u542f Pulsar \u670d\u52a1\u3002","title":"\u524d\u63d0\u6761\u4ef6"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-pulsar/#_3","text":"\u5bfc\u5165 Pulsar \u6570\u636e\u65f6\u53ea\u652f\u6301 Client \u6a21\u5f0f\uff0c\u5373\u53c2\u6570 tags.type.sink \u548c edges.type.sink \u7684\u503c\u4e3a client \u3002 \u5bfc\u5165 Pulsar \u6570\u636e\u65f6\u8bf7\u52ff\u4f7f\u7528 Exchange 3.4.0 \u7248\u672c\uff0c\u8be5\u7248\u672c\u589e\u52a0\u4e86\u5bf9\u5bfc\u5165\u6570\u636e\u7684\u7f13\u5b58\uff0c\u4e0d\u652f\u6301\u6d41\u5f0f\u6570\u636e\u5bfc\u5165\u3002\u8bf7\u4f7f\u7528 Exchange 3.0.0\u30013.3.0\u30013.5.0 \u7248\u672c\u3002","title":"\u6ce8\u610f\u4e8b\u9879"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-pulsar/#_4","text":"","title":"\u64cd\u4f5c\u6b65\u9aa4"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-pulsar/#1nebulagraph_schema","text":"\u5206\u6790\u6570\u636e\uff0c\u6309\u4ee5\u4e0b\u6b65\u9aa4\u5728NebulaGraph\u4e2d\u521b\u5efa Schema\uff1a \u786e\u8ba4 Schema \u8981\u7d20\u3002NebulaGraph\u4e2d\u7684 Schema \u8981\u7d20\u5982\u4e0b\u8868\u6240\u793a\u3002 \u8981\u7d20 \u540d\u79f0 \u5c5e\u6027 Tag player name string, age int Tag team name string Edge Type follow degree int Edge Type serve start_year int, end_year int \u5728NebulaGraph\u4e2d\u521b\u5efa\u4e00\u4e2a\u56fe\u7a7a\u95f4 basketballplayer \uff0c\u5e76\u521b\u5efa\u4e00\u4e2a Schema\uff0c\u5982\u4e0b\u6240\u793a\u3002 ## \u521b\u5efa\u56fe\u7a7a\u95f4 nebula> CREATE SPACE basketballplayer \\ (partition_num = 10, \\ replica_factor = 1, \\ vid_type = FIXED_STRING(30)); ## \u9009\u62e9\u56fe\u7a7a\u95f4 basketballplayer nebula> USE basketballplayer; ## \u521b\u5efa Tag player nebula> CREATE TAG player(name string, age int); ## \u521b\u5efa Tag team nebula> CREATE TAG team(name string); ## \u521b\u5efa Edge type follow nebula> CREATE EDGE follow(degree int); ## \u521b\u5efa Edge type serve nebula> CREATE EDGE serve(start_year int, end_year int); \u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u89c1 \u5feb\u901f\u5f00\u59cb \u3002","title":"\u6b65\u9aa4 1\uff1a\u5728NebulaGraph\u4e2d\u521b\u5efa Schema"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-pulsar/#2","text":"\u7f16\u8bd1 Exchange \u540e\uff0c\u590d\u5236 target/classes/application.conf \u6587\u4ef6\u8bbe\u7f6e Pulsar \u6570\u636e\u6e90\u76f8\u5173\u7684\u914d\u7f6e\u3002\u5728\u672c\u793a\u4f8b\u4e2d\uff0c\u590d\u5236\u7684\u6587\u4ef6\u540d\u4e3a pulsar_application.conf \u3002\u5404\u4e2a\u914d\u7f6e\u9879\u7684\u8be6\u7ec6\u8bf4\u660e\u8bf7\u53c2\u89c1 \u914d\u7f6e\u8bf4\u660e \u3002 { # Spark \u76f8\u5173\u914d\u7f6e spark: { app: { name: NebulaGraph Exchange 3.6.0 } driver: { cores: 1 maxResultSize: 1G } cores: { max: 16 } } #NebulaGraph\u76f8\u5173\u914d\u7f6e nebula: { address:{ # \u4ee5\u4e0b\u4e3aNebulaGraph\u7684 Graph \u670d\u52a1\u548c Meta \u670d\u52a1\u6240\u5728\u673a\u5668\u7684 IP \u5730\u5740\u53ca\u7aef\u53e3\u3002 # \u5982\u679c\u6709\u591a\u4e2a\u5730\u5740\uff0c\u683c\u5f0f\u4e3a \"ip1:port\",\"ip2:port\",\"ip3:port\"\u3002 # \u4e0d\u540c\u5730\u5740\u4e4b\u95f4\u4ee5\u82f1\u6587\u9017\u53f7 (,) \u9694\u5f00\u3002 graph:[\"127.0.0.1:9669\"] #\u4efb\u610f\u4e00\u4e2a Meta \u670d\u52a1\u7684\u5730\u5740\u3002 #\u5982\u679c\u60a8\u7684NebulaGraph\u5728\u865a\u62df\u7f51\u7edc\u4e2d\uff0c\u5982k8s\uff0c\u8bf7\u914d\u7f6e Leader Meta\u7684\u5730\u5740\u3002 meta:[\"127.0.0.1:9559\"] } # \u586b\u5199\u7684\u8d26\u53f7\u5fc5\u987b\u62e5\u6709NebulaGraph\u76f8\u5e94\u56fe\u7a7a\u95f4\u7684\u5199\u6570\u636e\u6743\u9650\u3002 user: root pswd: nebula # \u586b\u5199NebulaGraph\u4e2d\u9700\u8981\u5199\u5165\u6570\u636e\u7684\u56fe\u7a7a\u95f4\u540d\u79f0\u3002 space: basketballplayer connection: { timeout: 3000 retry: 3 } execution: { retry: 3 } error: { max: 32 output: /tmp/errors } rate: { limit: 1024 timeout: 1000 } } # \u5904\u7406\u70b9 tags: [ # \u8bbe\u7f6e Tag player \u76f8\u5173\u4fe1\u606f\u3002 { #NebulaGraph\u4e2d\u5bf9\u5e94\u7684 Tag \u540d\u79f0\u3002 name: player type: { # \u6307\u5b9a\u6570\u636e\u6e90\u6587\u4ef6\u683c\u5f0f\uff0c\u8bbe\u7f6e\u4e3a Pulsar\u3002 source: pulsar # \u6307\u5b9a\u5982\u4f55\u5c06\u6570\u636e\u5bfc\u5165NebulaGraph\u3002\u53ea\u652f\u6301 Client\u3002 sink: client } # Pulsar \u670d\u52a1\u5668\u5730\u5740\u3002 service: \"pulsar://127.0.0.1:6650\" # \u8fde\u63a5 pulsar \u7684 admin.url\u3002 admin: \"http://127.0.0.1:8081\" # Pulsar \u7684\u9009\u9879\uff0c\u53ef\u4ee5\u4ece topic\u3001topics \u548c topicsPattern \u9009\u62e9\u4e00\u4e2a\u8fdb\u884c\u914d\u7f6e\u3002 options: { topics: \"topic1,topic2\" } # \u5728 fields \u91cc\u6307\u5b9a player \u8868\u4e2d\u7684\u5217\u540d\u79f0\uff0c\u5176\u5bf9\u5e94\u7684 value \u4f1a\u4f5c\u4e3aNebulaGraph\u4e2d\u6307\u5b9a\u5c5e\u6027\u3002 # fields \u548c nebula.fields \u91cc\u7684\u914d\u7f6e\u5fc5\u987b\u4e00\u4e00\u5bf9\u5e94\u3002 # \u5982\u679c\u9700\u8981\u6307\u5b9a\u591a\u4e2a\u5217\u540d\u79f0\uff0c\u7528\u82f1\u6587\u9017\u53f7\uff08,\uff09\u9694\u5f00\u3002 fields: [age,name] nebula.fields: [age,name] # \u6307\u5b9a\u8868\u4e2d\u67d0\u4e00\u5217\u6570\u636e\u4e3aNebulaGraph\u4e2d\u70b9 VID \u7684\u6765\u6e90\u3002 vertex:{ field:playerid # udf:{ # separator:\"_\" # oldColNames:[field-0,field-1,field-2] # newColName:new-field # } # \u4e3a VID \u589e\u52a0\u6307\u5b9a\u7684\u524d\u7f00\u3002\u4f8b\u5982 VID \u4e3a 12345\uff0c\u589e\u52a0\u524d\u7f00 tag1 \u540e\u4e3a tag1_12345\u3002\u4e0b\u5212\u7ebf\u65e0\u6cd5\u4fee\u6539\u3002 # prefix:\"tag1\" # \u5bf9 string \u7c7b\u578b\u7684 VID \u8fdb\u884c\u54c8\u5e0c\u5316\u64cd\u4f5c\u3002 # policy:hash } # \u6279\u91cf\u64cd\u4f5c\u7c7b\u578b\uff0c\u5305\u62ec INSERT\u3001UPDATE \u548c DELETE\u3002\u9ed8\u8ba4\u4e3a INSERT\u3002 #writeMode: INSERT # \u6279\u91cf\u5220\u9664\u65f6\u662f\u5426\u5220\u9664\u8be5\u70b9\u5173\u8054\u7684\u51fa\u8fb9\u548c\u5165\u8fb9\u3002`writeMode`\u4e3a`DELETE`\u65f6\u8be5\u53c2\u6570\u751f\u6548\u3002 #deleteEdge: false # \u5355\u6279\u6b21\u5199\u5165NebulaGraph\u7684\u6570\u636e\u6761\u6570\u3002 batch: 10 # Spark \u5206\u533a\u6570\u91cf partition: 10 # \u8bfb\u53d6\u6d88\u606f\u7684\u95f4\u9694\u3002\u5355\u4f4d\uff1a\u79d2\u3002 interval.seconds: 10 } # \u8bbe\u7f6e Tag team \u76f8\u5173\u4fe1\u606f\u3002 { name: team type: { source: pulsar sink: client } service: \"pulsar://127.0.0.1:6650\" admin: \"http://127.0.0.1:8081\" options: { topics: \"topic1,topic2\" } fields: [name] nebula.fields: [name] vertex:{ field:teamid } batch: 10 partition: 10 interval.seconds: 10 } ] # \u5904\u7406\u8fb9\u6570\u636e edges: [ # \u8bbe\u7f6e Edge type follow \u76f8\u5173\u4fe1\u606f { #NebulaGraph\u4e2d\u5bf9\u5e94\u7684 Edge type \u540d\u79f0\u3002 name: follow type: { # \u6307\u5b9a\u6570\u636e\u6e90\u6587\u4ef6\u683c\u5f0f\uff0c\u8bbe\u7f6e\u4e3a Pulsar\u3002 source: pulsar # \u6307\u5b9a\u8fb9\u6570\u636e\u5bfc\u5165NebulaGraph\u7684\u65b9\u5f0f\uff0c # \u6307\u5b9a\u5982\u4f55\u5c06\u6570\u636e\u5bfc\u5165NebulaGraph\u3002\u53ea\u652f\u6301 Client\u3002 sink: client } # Pulsar \u670d\u52a1\u5668\u5730\u5740\u3002 service: \"pulsar://127.0.0.1:6650\" # \u8fde\u63a5 pulsar \u7684 admin.url\u3002 admin: \"http://127.0.0.1:8081\" # Pulsar \u7684\u9009\u9879\uff0c\u53ef\u4ee5\u4ece topic\u3001topics \u548c topicsPattern \u9009\u62e9\u4e00\u4e2a\u8fdb\u884c\u914d\u7f6e\u3002 options: { topics: \"topic1,topic2\" } # \u5728 fields \u91cc\u6307\u5b9a follow \u8868\u4e2d\u7684\u5217\u540d\u79f0\uff0c\u5176\u5bf9\u5e94\u7684 value \u4f1a\u4f5c\u4e3aNebulaGraph\u4e2d\u6307\u5b9a\u5c5e\u6027\u3002 # fields \u548c nebula.fields \u91cc\u7684\u914d\u7f6e\u5fc5\u987b\u4e00\u4e00\u5bf9\u5e94\u3002 # \u5982\u679c\u9700\u8981\u6307\u5b9a\u591a\u4e2a\u5217\u540d\u79f0\uff0c\u7528\u82f1\u6587\u9017\u53f7\uff08,\uff09\u9694\u5f00\u3002 fields: [degree] nebula.fields: [degree] # \u5728 source \u91cc\uff0c\u5c06 follow \u8868\u4e2d\u67d0\u4e00\u5217\u4f5c\u4e3a\u8fb9\u7684\u8d77\u59cb\u70b9\u6570\u636e\u6e90\u3002 # \u5728 target \u91cc\uff0c\u5c06 follow \u8868\u4e2d\u67d0\u4e00\u5217\u4f5c\u4e3a\u8fb9\u7684\u76ee\u7684\u70b9\u6570\u636e\u6e90\u3002 source:{ field:src_player # udf:{ # separator:\"_\" # oldColNames:[field-0,field-1,field-2] # newColName:new-field # } # \u4e3a VID \u589e\u52a0\u6307\u5b9a\u7684\u524d\u7f00\u3002\u4f8b\u5982 VID \u4e3a 12345\uff0c\u589e\u52a0\u524d\u7f00 tag1 \u540e\u4e3a tag1_12345\u3002\u4e0b\u5212\u7ebf\u65e0\u6cd5\u4fee\u6539\u3002 # prefix:\"tag1\" # \u5bf9 string \u7c7b\u578b\u7684 VID \u8fdb\u884c\u54c8\u5e0c\u5316\u64cd\u4f5c\u3002 # policy:hash } target:{ field:dst_player # udf:{ # separator:\"_\" # oldColNames:[field-0,field-1,field-2] # newColName:new-field # } # \u4e3a VID \u589e\u52a0\u6307\u5b9a\u7684\u524d\u7f00\u3002\u4f8b\u5982 VID \u4e3a 12345\uff0c\u589e\u52a0\u524d\u7f00 tag1 \u540e\u4e3a tag1_12345\u3002\u4e0b\u5212\u7ebf\u65e0\u6cd5\u4fee\u6539\u3002 # prefix:\"tag1\" # \u5bf9 string \u7c7b\u578b\u7684 VID \u8fdb\u884c\u54c8\u5e0c\u5316\u64cd\u4f5c\u3002 # policy:hash } # \u6307\u5b9a\u4e00\u4e2a\u5217\u4f5c\u4e3a rank \u7684\u6e90\uff08\u53ef\u9009\uff09\u3002 #ranking: rank # \u6279\u91cf\u64cd\u4f5c\u7c7b\u578b\uff0c\u5305\u62ec INSERT\u3001UPDATE \u548c DELETE\u3002\u9ed8\u8ba4\u4e3a INSERT\u3002 #writeMode: INSERT # \u5355\u6279\u6b21\u5199\u5165NebulaGraph\u7684\u6570\u636e\u6761\u6570\u3002 batch: 10 # Spark \u5206\u533a\u6570\u91cf partition: 10 # \u8bfb\u53d6\u6d88\u606f\u7684\u95f4\u9694\u3002\u5355\u4f4d\uff1a\u79d2\u3002 interval.seconds: 10 } # \u8bbe\u7f6e Edge type serve \u76f8\u5173\u4fe1\u606f { name: serve type: { source: Pulsar sink: client } service: \"pulsar://127.0.0.1:6650\" admin: \"http://127.0.0.1:8081\" options: { topics: \"topic1,topic2\" } fields: [start_year,end_year] nebula.fields: [start_year,end_year] source:{ field:playerid } target:{ field:teamid } # \u6307\u5b9a\u4e00\u4e2a\u5217\u4f5c\u4e3a rank \u7684\u6e90\uff08\u53ef\u9009\uff09\u3002 #ranking: rank batch: 10 partition: 10 interval.seconds: 10 } ] }","title":"\u6b65\u9aa4 2\uff1a\u4fee\u6539\u914d\u7f6e\u6587\u4ef6"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-pulsar/#3nebulagraph","text":"\u8fd0\u884c\u5982\u4e0b\u547d\u4ee4\u5c06 Pulsar \u6570\u636e\u5bfc\u5165\u5230NebulaGraph\u4e2d\u3002\u5173\u4e8e\u53c2\u6570\u7684\u8bf4\u660e\uff0c\u8bf7\u53c2\u89c1 \u5bfc\u5165\u547d\u4ee4\u53c2\u6570 \u3002 ${ SPARK_HOME } /bin/spark-submit --master \"local\" --class com.vesoft.nebula.exchange.Exchange <nebula-exchange-3.6.0.jar_path> -c <pulsar_application.conf_path> Note JAR \u5305\u6709\u4e24\u79cd\u83b7\u53d6\u65b9\u5f0f\uff1a \u81ea\u884c\u7f16\u8bd1 \u6216\u8005\u4ece maven \u4ed3\u5e93\u4e0b\u8f7d\u3002 \u793a\u4f8b\uff1a ${ SPARK_HOME } /bin/spark-submit --master \"local\" --class com.vesoft.nebula.exchange.Exchange /root/nebula-exchange/nebula-exchange/target/nebula-exchange-3.6.0.jar -c /root/nebula-exchange/nebula-exchange/target/classes/pulsar_application.conf \u7528\u6237\u53ef\u4ee5\u5728\u8fd4\u56de\u4fe1\u606f\u4e2d\u641c\u7d22 batchSuccess.<tag_name/edge_name> \uff0c\u786e\u8ba4\u6210\u529f\u7684\u6570\u91cf\u3002\u4f8b\u5982 batchSuccess.follow: 300 \u3002","title":"\u6b65\u9aa4 3\uff1a\u5411NebulaGraph\u5bfc\u5165\u6570\u636e"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-pulsar/#4","text":"\u7528\u6237\u53ef\u4ee5\u5728NebulaGraph\u5ba2\u6237\u7aef\uff08\u4f8b\u5982 NebulaGraph Studio\uff09\u4e2d\u6267\u884c\u67e5\u8be2\u8bed\u53e5\uff0c\u786e\u8ba4\u6570\u636e\u662f\u5426\u5df2\u5bfc\u5165\u3002\u4f8b\u5982\uff1a LOOKUP ON player YIELD id(vertex); \u7528\u6237\u4e5f\u53ef\u4ee5\u4f7f\u7528\u547d\u4ee4 SHOW STATS \u67e5\u770b\u7edf\u8ba1\u6570\u636e\u3002","title":"\u6b65\u9aa4 4\uff1a\uff08\u53ef\u9009\uff09\u9a8c\u8bc1\u6570\u636e"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-pulsar/#5nebulagraph","text":"\u5bfc\u5165\u6570\u636e\u540e\uff0c\u7528\u6237\u53ef\u4ee5\u5728NebulaGraph\u4e2d\u91cd\u65b0\u521b\u5efa\u5e76\u91cd\u5efa\u7d22\u5f15\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1 \u7d22\u5f15\u4ecb\u7ecd \u3002","title":"\u6b65\u9aa4 5\uff1a\uff08\u5982\u6709\uff09\u5728NebulaGraph\u4e2d\u91cd\u5efa\u7d22\u5f15"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-sst/","text":"\u5bfc\u5165 SST \u6587\u4ef6\u6570\u636e \u00b6 \u672c\u6587\u4ee5\u4e00\u4e2a\u793a\u4f8b\u8bf4\u660e\u5982\u4f55\u5c06\u6570\u636e\u6e90\u7684\u6570\u636e\u751f\u6210 SST\uff08Sorted String Table\uff09\u6587\u4ef6\u5e76\u4fdd\u5b58\u5728 HDFS \u4e0a\uff0c\u7136\u540e\u5bfc\u5165NebulaGraph\uff0c\u793a\u4f8b\u6570\u636e\u6e90\u662f CSV \u6587\u4ef6\u3002 \u6ce8\u610f\u4e8b\u9879 \u00b6 \u4ec5 Linux \u7cfb\u7edf\u652f\u6301\u5bfc\u5165 SST \u6587\u4ef6\u3002 \u4e0d\u652f\u6301\u5c5e\u6027\u7684 Default \u503c\u3002 \u80cc\u666f\u4fe1\u606f \u00b6 Exchange \u652f\u6301\u4e24\u79cd\u6570\u636e\u5bfc\u5165\u6a21\u5f0f\uff1a \u76f4\u63a5\u5c06\u6570\u636e\u6e90\u7684\u6570\u636e\u901a\u8fc7 nGQL \u8bed\u53e5\u7684\u5f62\u5f0f\u5bfc\u5165NebulaGraph\u3002 \u5c06\u6570\u636e\u6e90\u7684\u6570\u636e\u751f\u6210 SST \u6587\u4ef6\uff0c\u7136\u540e\u501f\u52a9 Console \u5c06 SST \u6587\u4ef6\u5bfc\u5165NebulaGraph\u3002 \u4e0b\u6587\u5c06\u4ecb\u7ecd\u751f\u6210 SST \u6587\u4ef6\u5e76\u7528\u5176\u5bfc\u5165\u6570\u636e\u7684\u9002\u7528\u573a\u666f\u3001\u5b9e\u73b0\u65b9\u6cd5\u3001\u524d\u63d0\u6761\u4ef6\u3001\u64cd\u4f5c\u6b65\u9aa4\u7b49\u5185\u5bb9\u3002 \u9002\u7528\u573a\u666f \u00b6 \u9002\u5408\u5728\u7ebf\u4e1a\u52a1\uff0c\u56e0\u4e3a\u751f\u6210\u65f6\u51e0\u4e4e\u4e0d\u4f1a\u5f71\u54cd\u4e1a\u52a1\uff08\u53ea\u662f\u8bfb\u53d6 Schema\uff09\uff0c\u5bfc\u5165\u901f\u5ea6\u5feb\u3002 Caution \u5bfc\u5165\u671f\u95f4\uff08\u5927\u7ea6 10 \u79d2\uff09\u4f1a\u963b\u585e\u5bf9\u5e94\u7a7a\u95f4\u7684\u5199\u64cd\u4f5c\uff0c\u5e76\u4e14\u4e4b\u540e\u6570\u5c0f\u65f6\u5185\u53ef\u80fd\u6709\u5386\u53f2\u6570\u636e\u6574\u7406\uff0c\u5efa\u8bae\u5728\u4e1a\u52a1\u4f4e\u5cf0\u671f\u8fdb\u884c\u5bfc\u5165\u3002 \u9002\u5408\u6570\u636e\u6e90\u6570\u636e\u91cf\u8f83\u5927\u7684\u573a\u666f\uff0c\u5bfc\u5165\u901f\u5ea6\u5feb\u3002 \u5b9e\u73b0\u65b9\u6cd5 \u00b6 NebulaGraph\u5e95\u5c42\u4f7f\u7528 RocksDB \u4f5c\u4e3a\u952e\u503c\u578b\u5b58\u50a8\u5f15\u64ce\u3002RocksDB \u662f\u57fa\u4e8e\u786c\u76d8\u7684\u5b58\u50a8\u5f15\u64ce\uff0c\u63d0\u4f9b\u4e86\u4e00\u7cfb\u5217 API \u7528\u4e8e\u521b\u5efa\u53ca\u5bfc\u5165 SST \u683c\u5f0f\u7684\u6587\u4ef6\uff0c\u6709\u52a9\u4e8e\u5feb\u901f\u5bfc\u5165\u6d77\u91cf\u6570\u636e\u3002 SST \u6587\u4ef6\u662f\u4e00\u4e2a\u5185\u90e8\u5305\u542b\u4e86\u4efb\u610f\u957f\u5ea6\u7684\u6709\u5e8f\u952e\u503c\u5bf9\u96c6\u5408\u7684\u6587\u4ef6\uff0c\u7528\u4e8e\u9ad8\u6548\u5730\u5b58\u50a8\u5927\u91cf\u952e\u503c\u578b\u6570\u636e\u3002\u751f\u6210 SST \u6587\u4ef6\u7684\u6574\u4e2a\u8fc7\u7a0b\u4e3b\u8981\u7531 Exchange \u7684 Reader\u3001sstProcessor \u548c sstWriter \u5b8c\u6210\u3002\u6574\u4e2a\u6570\u636e\u5904\u7406\u8fc7\u7a0b\u5982\u4e0b\uff1a Reader \u4ece\u6570\u636e\u6e90\u4e2d\u8bfb\u53d6\u6570\u636e\u3002 sstProcessor \u6839\u636eNebulaGraph\u7684 Schema \u4fe1\u606f\u751f\u6210 SST \u6587\u4ef6\uff0c\u7136\u540e\u4e0a\u4f20\u81f3 HDFS\u3002SST \u6587\u4ef6\u7684\u683c\u5f0f\u8bf7\u53c2\u89c1 \u6570\u636e\u5b58\u50a8\u683c\u5f0f \u3002 sstWriter \u6253\u5f00\u4e00\u4e2a\u6587\u4ef6\u5e76\u63d2\u5165\u6570\u636e\u3002\u751f\u6210 SST \u6587\u4ef6\u65f6\uff0cKey \u5fc5\u987b\u6309\u7167\u987a\u5e8f\u5199\u5165\u3002 \u751f\u6210 SST \u6587\u4ef6\u4e4b\u540e\uff0cRocksDB \u901a\u8fc7 IngestExternalFile() \u65b9\u6cd5\u5c06 SST \u6587\u4ef6\u5bfc\u5165\u5230NebulaGraph\u4e2d\u3002\u4f8b\u5982\uff1a IngestExternalFileOptions ifo; # \u5bfc\u5165\u4e24\u4e2a SST \u6587\u4ef6 Status s = db_->IngestExternalFile({\"/home/usr/file1.sst\", \"/home/usr/file2.sst\"}, ifo); if (!s.ok()) { printf(\"Error while adding file %s and %s, Error %s\\n\", file_path1.c_str(), file_path2.c_str(), s.ToString().c_str()); return 1; } \u8c03\u7528 IngestExternalFile() \u65b9\u6cd5\u65f6\uff0cRocksDB \u9ed8\u8ba4\u4f1a\u5c06\u6587\u4ef6\u62f7\u8d1d\u5230\u6570\u636e\u76ee\u5f55\uff0c\u5e76\u4e14\u963b\u585e RocksDB \u5199\u5165\u64cd\u4f5c\u3002\u5982\u679c SST \u6587\u4ef6\u4e2d\u7684\u952e\u8303\u56f4\u8986\u76d6\u4e86 Memtable \u952e\u7684\u8303\u56f4\uff0c\u5219\u5c06 Memtable \u843d\u76d8\uff08flush\uff09\u5230\u786c\u76d8\u3002\u5c06 SST \u6587\u4ef6\u653e\u7f6e\u5728 LSM \u6811\u6700\u4f18\u4f4d\u7f6e\u540e\uff0c\u4e3a\u6587\u4ef6\u5206\u914d\u4e00\u4e2a\u5168\u5c40\u5e8f\u5217\u53f7\uff0c\u5e76\u6253\u5f00\u5199\u64cd\u4f5c\u3002 \u6570\u636e\u96c6 \u00b6 \u672c\u6587\u4ee5 basketballplayer \u6570\u636e\u96c6 \u4e3a\u4f8b\u3002 \u73af\u5883\u914d\u7f6e \u00b6 \u672c\u6587\u793a\u4f8b\u5728 MacOS \u4e0b\u5b8c\u6210\uff0c\u4ee5\u4e0b\u662f\u76f8\u5173\u7684\u73af\u5883\u914d\u7f6e\u4fe1\u606f\uff1a \u786c\u4ef6\u89c4\u683c\uff1a CPU\uff1a1.7 GHz Quad-Core Intel Core i7 \u5185\u5b58\uff1a16 GB Spark\uff1a2.4.7 \u5355\u673a\u7248 Hadoop\uff1a2.9.2 \u4f2a\u5206\u5e03\u5f0f\u90e8\u7f72 NebulaGraph\uff1a3.6.0\u3002 \u524d\u63d0\u6761\u4ef6 \u00b6 \u5f00\u59cb\u5bfc\u5165\u6570\u636e\u4e4b\u524d\uff0c\u7528\u6237\u9700\u8981\u786e\u8ba4\u4ee5\u4e0b\u4fe1\u606f\uff1a \u5df2\u7ecf \u5b89\u88c5\u90e8\u7f72NebulaGraph 3.6.0 \u5e76\u83b7\u53d6\u5982\u4e0b\u4fe1\u606f\uff1a Graph \u670d\u52a1\u548c Meta \u670d\u52a1\u7684\u7684 IP \u5730\u5740\u548c\u7aef\u53e3\u3002 \u62e5\u6709NebulaGraph\u5199\u6743\u9650\u7684\u7528\u6237\u540d\u548c\u5bc6\u7801\u3002 Meta \u670d\u52a1\u914d\u7f6e\u6587\u4ef6\u4e2d\u7684 --ws_storage_http_port \u548c Storage \u670d\u52a1\u914d\u7f6e\u6587\u4ef6\u4e2d\u7684 --ws_http_port \u4e00\u81f4\u3002\u4f8b\u5982\u90fd\u4e3a 19779 \u3002 Graph \u670d\u52a1\u914d\u7f6e\u6587\u4ef6\u4e2d\u7684 --ws_meta_http_port \u548c Meta \u670d\u52a1\u914d\u7f6e\u6587\u4ef6\u4e2d\u7684 --ws_http_port \u4e00\u81f4\u3002\u4f8b\u5982\u90fd\u4e3a 19559 \u3002 Schema \u7684\u4fe1\u606f\uff0c\u5305\u62ec Tag \u548c Edge type \u7684\u540d\u79f0\u3001\u5c5e\u6027\u7b49\u3002 \u5df2\u7ecf \u7f16\u8bd1 Exchange \uff0c\u6216\u8005\u76f4\u63a5 \u4e0b\u8f7d \u7f16\u8bd1\u5b8c\u6210\u7684 jar \u6587\u4ef6\u3002\u672c\u793a\u4f8b\u4e2d\u4f7f\u7528 Exchange 3.6.0\u3002 \u5df2\u7ecf\u5b89\u88c5 Spark\u3002 \u5df2\u7ecf\u5b89\u88c5 JDK 1.8 \u6216\u4ee5\u4e0a\u7248\u672c\uff0c\u5e76\u914d\u7f6e\u73af\u5883\u53d8\u91cf JAVA_HOME\u3002 \u786e\u8ba4 Hadoop \u670d\u52a1\u5728\u6240\u6709\u90e8\u7f72 Storage \u670d\u52a1\u7684\u673a\u5668\u4e0a\u8fd0\u884c\u6b63\u5e38\u3002 Note \u5982\u679c\u9700\u8981\u751f\u6210\u5176\u4ed6\u6570\u636e\u6e90\u7684 SST \u6587\u4ef6\uff0c\u8bf7\u53c2\u89c1\u76f8\u5e94\u6570\u636e\u6e90\u7684\u6587\u6863\uff0c\u67e5\u770b\u524d\u63d0\u6761\u4ef6\u90e8\u5206\u3002 \u5982\u679c\u53ea\u9700\u8981\u751f\u6210 SST \u6587\u4ef6\uff0c\u4e0d\u9700\u8981\u5728\u90e8\u7f72 Storage \u670d\u52a1\u7684\u673a\u5668\u4e0a\u5b89\u88c5 Hadoop \u670d\u52a1\u3002 \u5982\u9700\u5728 INGEST\uff08\u6570\u636e\u5bfc\u5165\uff09\u7ed3\u675f\u540e\u81ea\u52a8\u79fb\u9664 SST \u6587\u4ef6\uff0c\u5728 Storage \u670d\u52a1\u914d\u7f6e\u6587\u4ef6\u4e2d\u589e\u52a0 --move_files=true \uff0c\u8be5\u914d\u7f6e\u4f1a\u8ba9NebulaGraph\u5728 INGEST \u540e\u5c06 SST \u6587\u4ef6\u79fb\u52a8\uff08 mv \uff09\u5230 data \u76ee\u5f55\u4e0b\u3002 --move_files \u7684\u9ed8\u8ba4\u503c\u4e3a false \uff0c\u6b64\u65f6NebulaGraph\u4f1a\u590d\u5236\uff08 cp \uff09SST \u6587\u4ef6\u800c\u4e0d\u662f\u79fb\u52a8\u3002 \u64cd\u4f5c\u6b65\u9aa4 \u00b6 \u6b65\u9aa4 1\uff1a\u5728NebulaGraph\u4e2d\u521b\u5efa Schema \u00b6 \u5206\u6790 CSV \u6587\u4ef6\u4e2d\u7684\u6570\u636e\uff0c\u6309\u4ee5\u4e0b\u6b65\u9aa4\u5728NebulaGraph\u4e2d\u521b\u5efa Schema\uff1a \u786e\u8ba4 Schema \u8981\u7d20\u3002NebulaGraph\u4e2d\u7684 Schema \u8981\u7d20\u5982\u4e0b\u8868\u6240\u793a\u3002 \u8981\u7d20 \u540d\u79f0 \u5c5e\u6027 Tag player name string, age int Tag team name string Edge Type follow degree int Edge Type serve start_year int, end_year int \u4f7f\u7528 NebulaGraph Console \u521b\u5efa\u4e00\u4e2a\u56fe\u7a7a\u95f4 basketballplayer \uff0c\u5e76\u521b\u5efa\u4e00\u4e2a Schema\uff0c\u5982\u4e0b\u6240\u793a\u3002 ## \u521b\u5efa\u56fe\u7a7a\u95f4 nebula> CREATE SPACE basketballplayer \\ (partition_num = 10, \\ replica_factor = 1, \\ vid_type = FIXED_STRING(30)); ## \u9009\u62e9\u56fe\u7a7a\u95f4 basketballplayer nebula> USE basketballplayer; ## \u521b\u5efa Tag player nebula> CREATE TAG player(name string, age int); ## \u521b\u5efa Tag team nebula> CREATE TAG team(name string); ## \u521b\u5efa Edge type follow nebula> CREATE EDGE follow(degree int); ## \u521b\u5efa Edge type serve nebula> CREATE EDGE serve(start_year int, end_year int); \u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u89c1 \u5feb\u901f\u5f00\u59cb \u3002 \u6b65\u9aa4 2\uff1a\u5904\u7406 CSV \u6587\u4ef6 \u00b6 \u786e\u8ba4\u4ee5\u4e0b\u4fe1\u606f\uff1a \u5904\u7406 CSV \u6587\u4ef6\u4ee5\u6ee1\u8db3 Schema \u7684\u8981\u6c42\u3002 Note \u53ef\u4ee5\u4f7f\u7528\u6709\u8868\u5934\u6216\u8005\u65e0\u8868\u5934\u7684 CSV \u6587\u4ef6\u3002 \u83b7\u53d6 CSV \u6587\u4ef6\u5b58\u50a8\u8def\u5f84\u3002 \u6b65\u9aa4 3\uff1a\u4fee\u6539\u914d\u7f6e\u6587\u4ef6 \u00b6 \u7f16\u8bd1 Exchange \u540e\uff0c\u590d\u5236 target/classes/application.conf \u6587\u4ef6\u8bbe\u7f6e\u76f8\u5173\u914d\u7f6e\u3002\u5728\u672c\u793a\u4f8b\u4e2d\uff0c\u590d\u5236\u7684\u6587\u4ef6\u540d\u4e3a sst_application.conf \u3002\u5404\u4e2a\u914d\u7f6e\u9879\u7684\u8be6\u7ec6\u8bf4\u660e\u8bf7\u53c2\u89c1 \u914d\u7f6e\u8bf4\u660e \u3002 { # Spark \u76f8\u5173\u914d\u7f6e spark: { app: { name: NebulaGraph Exchange 3.6.0 } master:local driver: { cores: 1 maxResultSize: 1G } executor: { memory:1G } cores:{ max: 16 } } #NebulaGraph\u76f8\u5173\u914d\u7f6e nebula: { address:{ graph:[\"192.168.8.XXX:9669\"] #\u4efb\u610f\u4e00\u4e2a Meta \u670d\u52a1\u7684\u5730\u5740\u3002 #\u5982\u679c\u60a8\u7684NebulaGraph\u5728\u865a\u62df\u7f51\u7edc\u4e2d\uff0c\u5982k8s\uff0c\u8bf7\u914d\u7f6e Leader Meta\u7684\u5730\u5740\u3002 meta:[\"192.168.8.XXX:9559\"] } user: root pswd: nebula space: basketballplayer # SST \u6587\u4ef6\u76f8\u5173\u914d\u7f6e path:{ # \u672c\u5730\u4e34\u65f6\u5b58\u653e\u751f\u6210\u7684 SST \u6587\u4ef6\u7684\u76ee\u5f55 local:\"/tmp\" # SST \u6587\u4ef6\u5728 HDFS \u7684\u5b58\u50a8\u8def\u5f84 remote:\"/sst\" # HDFS \u7684 NameNode \u5730\u5740\uff0c\u4f8b\u5982 \"hdfs://<ip/hostname>:<port>\"\u3002 hdfs.namenode: \"hdfs://*.*.*.*:9000\" } # \u5ba2\u6237\u7aef\u8fde\u63a5\u53c2\u6570 connection: { # socket \u8fde\u63a5\u3001\u6267\u884c\u7684\u8d85\u65f6\u65f6\u95f4\uff0c\u5355\u4f4d\uff1a\u6beb\u79d2\u3002 timeout: 30000 } error: { # \u6700\u5927\u5931\u8d25\u6570\uff0c\u8d85\u8fc7\u540e\u4f1a\u9000\u51fa\u5e94\u7528\u7a0b\u5e8f\u3002 max: 32 # \u5931\u8d25\u7684\u5bfc\u5165\u4f5c\u4e1a\u5c06\u8bb0\u5f55\u5728\u8f93\u51fa\u8def\u5f84\u4e2d\u3002 output: /tmp/errors } # \u4f7f\u7528Google Guava RateLimiter \u6765\u9650\u5236\u53d1\u9001\u5230NebulaGraph\u7684\u8bf7\u6c42\u3002 rate: { # RateLimiter \u7684\u7a33\u5b9a\u541e\u5410\u91cf\u3002 limit: 1024 # \u4ece RateLimiter \u83b7\u53d6\u5141\u8bb8\u7684\u8d85\u65f6\u65f6\u95f4\uff0c\u5355\u4f4d\uff1a\u6beb\u79d2 timeout: 1000 } } # \u5904\u7406\u70b9 tags: [ # \u8bbe\u7f6e Tag player \u76f8\u5173\u4fe1\u606f\u3002 { # \u6307\u5b9aNebulaGraph\u4e2d\u5b9a\u4e49\u7684 Tag \u540d\u79f0\u3002 name: player type: { # \u6307\u5b9a\u6570\u636e\u6e90\uff0c\u4f7f\u7528 CSV\u3002 source: csv # \u6307\u5b9a\u5982\u4f55\u5c06\u70b9\u6570\u636e\u5bfc\u5165NebulaGraph\uff1aClient \u6216 SST\u3002 sink: sst } # \u6307\u5b9a CSV \u6587\u4ef6\u7684\u8def\u5f84\u3002 # \u6587\u4ef6\u5b58\u50a8\u5728 HDFS \u4e0a\uff0c\u7528\u53cc\u5f15\u53f7\u62ec\u8d77\u8def\u5f84\uff0c\u4ee5 hdfs://\u5f00\u5934\uff0c\u4f8b\u5982\"hdfs://ip:port/xx/xx.csv\"\u3002 path: \"hdfs://*.*.*.*:9000/dataset/vertex_player.csv\" # \u5982\u679c CSV \u6587\u4ef6\u6ca1\u6709\u8868\u5934\uff0c\u4f7f\u7528 [_c0, _c1, _c2, ..., _cn] \u8868\u793a\u5176\u8868\u5934\uff0c\u5e76\u5c06\u5217\u6307\u793a\u4e3a\u5c5e\u6027\u503c\u7684\u6e90\u3002 # \u5982\u679c CSV \u6587\u4ef6\u6709\u8868\u5934\uff0c\u5219\u4f7f\u7528\u5b9e\u9645\u7684\u5217\u540d\u3002 fields: [_c1, _c2] # \u6307\u5b9aNebulaGraph\u4e2d\u5b9a\u4e49\u7684\u5c5e\u6027\u540d\u79f0\u3002 # fields \u4e0e nebula.fields \u7684\u987a\u5e8f\u5fc5\u987b\u4e00\u4e00\u5bf9\u5e94\u3002 nebula.fields: [age, name] # \u6307\u5b9a\u4e00\u4e2a\u5217\u4f5c\u4e3a VID \u7684\u6e90\u3002 # vertex \u7684\u503c\u5fc5\u987b\u4e0e\u4e0a\u8ff0 fields \u6216\u8005 csv.fields \u4e2d\u7684\u5217\u540d\u4fdd\u6301\u4e00\u81f4\u3002 # \u76ee\u524d\uff0cNebulaGraph 3.6.0\u4ec5\u652f\u6301\u5b57\u7b26\u4e32\u6216\u6574\u6570\u7c7b\u578b\u7684 VID\u3002 vertex: { field:_c0 # \u4e3a VID \u589e\u52a0\u6307\u5b9a\u7684\u524d\u7f00\u3002\u4f8b\u5982 VID \u4e3a 12345\uff0c\u589e\u52a0\u524d\u7f00 tag1 \u540e\u4e3a tag1_12345\u3002\u4e0b\u5212\u7ebf\u65e0\u6cd5\u4fee\u6539\u3002 # prefix:\"tag1\" # \u5bf9 string \u7c7b\u578b\u7684 VID \u8fdb\u884c\u54c8\u5e0c\u5316\u64cd\u4f5c\u3002 # policy:hash } # \u6307\u5b9a\u7684\u5206\u9694\u7b26\u3002\u9ed8\u8ba4\u503c\u4e3a\u82f1\u6587\u9017\u53f7\uff08,\uff09\u3002 separator: \",\" # \u5982\u679c CSV \u6587\u4ef6\u6709\u8868\u5934\uff0c\u8bf7\u5c06 header \u8bbe\u7f6e\u4e3a true\u3002 # \u5982\u679c CSV \u6587\u4ef6\u6ca1\u6709\u8868\u5934\uff0c\u8bf7\u5c06 header \u8bbe\u7f6e\u4e3a false\u3002\u9ed8\u8ba4\u503c\u4e3a false\u3002 header: false # \u6279\u91cf\u64cd\u4f5c\u7c7b\u578b\uff0c\u5305\u62ec INSERT\u3001UPDATE \u548c DELETE\u3002\u9ed8\u8ba4\u4e3a INSERT\u3002 #writeMode: INSERT # \u6307\u5b9a\u5355\u6279\u6b21\u5199\u5165NebulaGraph\u7684\u6700\u5927\u70b9\u6570\u91cf\u3002 batch: 256 # \u6307\u5b9a Spark \u5206\u7247\u6570\u91cf\u3002 partition: 32 # \u751f\u6210 SST \u6587\u4ef6\u65f6\u662f\u5426\u8981\u57fa\u4e8eNebulaGraph\u4e2d\u56fe\u7a7a\u95f4\u7684 partition \u8fdb\u884c\u6570\u636e\u91cd\u5206\u533a\u3002 repartitionWithNebula: false } # \u8bbe\u7f6e Tag team \u76f8\u5173\u4fe1\u606f\u3002 { name: team type: { source: csv sink: sst } path: \"hdfs://*.*.*.*:9000/dataset/vertex_team.csv\" fields: [_c1] nebula.fields: [name] vertex: { field:_c0 } separator: \",\" header: false batch: 256 partition: 32 repartitionWithNebula: false } # \u5982\u679c\u9700\u8981\u6dfb\u52a0\u66f4\u591a\u70b9\uff0c\u8bf7\u53c2\u8003\u524d\u9762\u7684\u914d\u7f6e\u8fdb\u884c\u6dfb\u52a0\u3002 ] # \u5904\u7406\u8fb9 edges: [ # \u8bbe\u7f6e Edge type follow \u76f8\u5173\u4fe1\u606f\u3002 { # \u6307\u5b9aNebulaGraph\u4e2d\u5b9a\u4e49\u7684 Edge type \u540d\u79f0\u3002 name: follow type: { # \u6307\u5b9a\u6570\u636e\u6e90\uff0c\u4f7f\u7528 CSV\u3002 source: csv # \u6307\u5b9a\u5982\u4f55\u5c06\u70b9\u6570\u636e\u5bfc\u5165NebulaGraph\uff1aClient \u6216 SST\u3002 sink: sst } # \u6307\u5b9a CSV \u6587\u4ef6\u7684\u8def\u5f84\u3002 # \u6587\u4ef6\u5b58\u50a8\u5728 HDFS \u4e0a\uff0c\u7528\u53cc\u5f15\u53f7\u62ec\u8d77\u8def\u5f84\uff0c\u4ee5 hdfs://\u5f00\u5934\uff0c\u4f8b\u5982\"hdfs://<ip/hostname>:port/xx/xx.csv\"\u3002 path: \"hdfs://*.*.*.*:9000/dataset/edge_follow.csv\" # \u5982\u679c CSV \u6587\u4ef6\u6ca1\u6709\u8868\u5934\uff0c\u4f7f\u7528 [_c0, _c1, _c2, ..., _cn] \u8868\u793a\u5176\u8868\u5934\uff0c\u5e76\u5c06\u5217\u6307\u793a\u4e3a\u5c5e\u6027\u503c\u7684\u6e90\u3002 # \u5982\u679c CSV \u6587\u4ef6\u6709\u8868\u5934\uff0c\u5219\u4f7f\u7528\u5b9e\u9645\u7684\u5217\u540d\u3002 fields: [_c2] # \u6307\u5b9aNebulaGraph\u4e2d\u5b9a\u4e49\u7684\u5c5e\u6027\u540d\u79f0\u3002 # fields \u4e0e nebula.fields \u7684\u987a\u5e8f\u5fc5\u987b\u4e00\u4e00\u5bf9\u5e94\u3002 nebula.fields: [degree] # \u6307\u5b9a\u4e00\u4e2a\u5217\u4f5c\u4e3a\u8d77\u59cb\u70b9\u548c\u76ee\u7684\u70b9\u7684\u6e90\u3002 # vertex \u7684\u503c\u5fc5\u987b\u4e0e\u4e0a\u8ff0 fields \u6216\u8005 csv.fields \u4e2d\u7684\u5217\u540d\u4fdd\u6301\u4e00\u81f4\u3002 # \u76ee\u524d\uff0cNebulaGraph 3.6.0\u4ec5\u652f\u6301\u5b57\u7b26\u4e32\u6216\u6574\u6570\u7c7b\u578b\u7684 VID\u3002 source: { field: _c0 # \u4e3a VID \u589e\u52a0\u6307\u5b9a\u7684\u524d\u7f00\u3002\u4f8b\u5982 VID \u4e3a 12345\uff0c\u589e\u52a0\u524d\u7f00 tag1 \u540e\u4e3a tag1_12345\u3002\u4e0b\u5212\u7ebf\u65e0\u6cd5\u4fee\u6539\u3002 # prefix:\"tag1\" # \u5bf9 string \u7c7b\u578b\u7684 VID \u8fdb\u884c\u54c8\u5e0c\u5316\u64cd\u4f5c\u3002 # policy:hash } target: { field: _c1 # \u4e3a VID \u589e\u52a0\u6307\u5b9a\u7684\u524d\u7f00\u3002\u4f8b\u5982 VID \u4e3a 12345\uff0c\u589e\u52a0\u524d\u7f00 tag1 \u540e\u4e3a tag1_12345\u3002\u4e0b\u5212\u7ebf\u65e0\u6cd5\u4fee\u6539\u3002 # prefix:\"tag1\" # \u5bf9 string \u7c7b\u578b\u7684 VID \u8fdb\u884c\u54c8\u5e0c\u5316\u64cd\u4f5c\u3002 # policy:hash } # \u6307\u5b9a\u7684\u5206\u9694\u7b26\u3002\u9ed8\u8ba4\u503c\u4e3a\u82f1\u6587\u9017\u53f7\uff08,\uff09\u3002 separator: \",\" # \u6307\u5b9a\u4e00\u4e2a\u5217\u4f5c\u4e3a rank \u7684\u6e90\uff08\u53ef\u9009\uff09\u3002 #ranking: rank # \u5982\u679c CSV \u6587\u4ef6\u6709\u8868\u5934\uff0c\u8bf7\u5c06 header \u8bbe\u7f6e\u4e3a true\u3002 # \u5982\u679c CSV \u6587\u4ef6\u6ca1\u6709\u8868\u5934\uff0c\u8bf7\u5c06 header \u8bbe\u7f6e\u4e3a false\u3002\u9ed8\u8ba4\u503c\u4e3a false\u3002 header: false # \u6279\u91cf\u64cd\u4f5c\u7c7b\u578b\uff0c\u5305\u62ec INSERT\u3001UPDATE \u548c DELETE\u3002\u9ed8\u8ba4\u4e3a INSERT\u3002 #writeMode: INSERT # \u6307\u5b9a\u5355\u6279\u6b21\u5199\u5165NebulaGraph\u7684\u6700\u5927\u8fb9\u6570\u91cf\u3002 batch: 256 # \u6307\u5b9a Spark \u5206\u7247\u6570\u91cf\u3002 partition: 32 # \u751f\u6210 SST \u6587\u4ef6\u65f6\u662f\u5426\u8981\u57fa\u4e8eNebulaGraph\u4e2d\u56fe\u7a7a\u95f4\u7684 partition \u8fdb\u884c\u6570\u636e\u91cd\u5206\u533a\u3002 repartitionWithNebula: false } # \u8bbe\u7f6e Edge type serve \u76f8\u5173\u4fe1\u606f\u3002 { name: serve type: { source: csv sink: sst } path: \"hdfs://*.*.*.*:9000/dataset/edge_serve.csv\" fields: [_c2,_c3] nebula.fields: [start_year, end_year] source: { field: _c0 } target: { field: _c1 } separator: \",\" header: false batch: 256 partition: 32 repartitionWithNebula: false } ] # \u5982\u679c\u9700\u8981\u6dfb\u52a0\u66f4\u591a\u8fb9\uff0c\u8bf7\u53c2\u8003\u524d\u9762\u7684\u914d\u7f6e\u8fdb\u884c\u6dfb\u52a0\u3002 } \u6b65\u9aa4 4\uff1a\u751f\u6210 SST \u6587\u4ef6 \u00b6 \u8fd0\u884c\u5982\u4e0b\u547d\u4ee4\u5c06 CSV \u6e90\u6587\u4ef6\u751f\u6210\u4e3a SST \u6587\u4ef6\u3002\u5173\u4e8e\u53c2\u6570\u7684\u8bf4\u660e\uff0c\u8bf7\u53c2\u89c1 \u547d\u4ee4\u53c2\u6570 \u3002 ${ SPARK_HOME } /bin/spark-submit --master \"local\" --conf spark.sql.shuffle.partitions = <shuffle_concurrency> --class com.vesoft.nebula.exchange.Exchange <nebula-exchange-3.6.0.jar_path> -c <sst_application.conf_path> Note \u751f\u6210 SST \u6587\u4ef6\u65f6\uff0c\u4f1a\u6d89\u53ca\u5230 Spark \u7684 shuffle \u64cd\u4f5c\uff0c\u8bf7\u6ce8\u610f\u5728\u63d0\u4ea4\u547d\u4ee4\u4e2d\u589e\u52a0 spark.sql.shuffle.partitions \u7684\u914d\u7f6e\u3002 Note JAR \u5305\u6709\u4e24\u79cd\u83b7\u53d6\u65b9\u5f0f\uff1a \u81ea\u884c\u7f16\u8bd1 \u6216\u8005\u4ece maven \u4ed3\u5e93\u4e0b\u8f7d\u3002 \u793a\u4f8b\uff1a ${ SPARK_HOME } /bin/spark-submit --master \"local\" --conf spark.sql.shuffle.partitions = 200 --class com.vesoft.nebula.exchange.Exchange /root/nebula-exchange/nebula-exchange/target/nebula-exchange-3.6.0.jar -c /root/nebula-exchange/nebula-exchange/target/classes/sst_application.conf \u4efb\u52a1\u6267\u884c\u5b8c\u6210\u540e\uff0c\u53ef\u4ee5\u5728 HDFS \u4e0a\u7684 /sst \u76ee\u5f55\uff08 nebula.path.remote \u53c2\u6570\u6307\u5b9a\uff09\u5185\u67e5\u770b\u5230\u751f\u6210\u7684 SST \u6587\u4ef6\u3002 Note \u5982\u679c\u5bf9 Schema \u6709\u4fee\u6539\u64cd\u4f5c\uff0c\u4f8b\u5982\u91cd\u5efa\u56fe\u7a7a\u95f4\u3001\u4fee\u6539 Tag\u3001\u4fee\u6539 Edge type \u7b49\uff0c\u9700\u8981\u91cd\u65b0\u751f\u6210 SST \u6587\u4ef6\uff0c\u56e0\u4e3a SST \u6587\u4ef6\u4f1a\u9a8c\u8bc1 Space ID\u3001Tag ID\u3001Edge ID \u7b49\u4fe1\u606f\u3002 \u6b65\u9aa4 5\uff1a\u5bfc\u5165 SST \u6587\u4ef6 \u00b6 Note \u5bfc\u5165\u524d\u8bf7\u786e\u8ba4\u4ee5\u4e0b\u4fe1\u606f\uff1a \u786e\u8ba4\u6240\u6709\u90e8\u7f72 Storage \u670d\u52a1\u7684\u673a\u5668\u4e0a\u90fd\u5df2\u90e8\u7f72 Hadoop \u670d\u52a1\uff0c\u5e76\u914d\u7f6e HADOOP_HOME \u548c JAVA_HOME\u3002 Meta \u670d\u52a1\u914d\u7f6e\u6587\u4ef6\u4e2d\u7684 --ws_storage_http_port \uff08\u5982\u679c\u6ca1\u6709\uff0c\u8bf7\u624b\u52a8\u6dfb\u52a0\uff09\u548c Storage \u670d\u52a1\u914d\u7f6e\u6587\u4ef6\u4e2d\u7684 --ws_http_port \u4e00\u81f4\u3002\u4f8b\u5982\u90fd\u4e3a 19779 \u3002 Graph \u670d\u52a1\u914d\u7f6e\u6587\u4ef6\u4e2d\u7684 --ws_meta_http_port \uff08\u5982\u679c\u6ca1\u6709\uff0c\u8bf7\u624b\u52a8\u6dfb\u52a0\uff09\u548c Meta \u670d\u52a1\u914d\u7f6e\u6587\u4ef6\u4e2d\u7684 --ws_http_port \u4e00\u81f4\u3002\u4f8b\u5982\u90fd\u4e3a 19559 \u3002 \u4f7f\u7528\u5ba2\u6237\u7aef\u5de5\u5177\u8fde\u63a5NebulaGraph\uff0c\u6309\u5982\u4e0b\u64cd\u4f5c\u5bfc\u5165 SST \u6587\u4ef6\uff1a \u6267\u884c\u547d\u4ee4\u9009\u62e9\u4e4b\u524d\u521b\u5efa\u7684\u56fe\u7a7a\u95f4\u3002 nebula> USE basketballplayer; \u6267\u884c\u547d\u4ee4\u4e0b\u8f7d SST \u6587\u4ef6\uff1a nebula> SUBMIT JOB DOWNLOAD HDFS \"hdfs://<hadoop_address>:<hadoop_port>/<sst_file_path>\"; \u793a\u4f8b\uff1a nebula> SUBMIT JOB DOWNLOAD HDFS \"hdfs://*.*.*.*:9000/sst\"; \u6267\u884c\u547d\u4ee4\u5bfc\u5165 SST \u6587\u4ef6\uff1a nebula> SUBMIT JOB INGEST; Note \u5982\u679c\u9700\u8981\u91cd\u65b0\u4e0b\u8f7d\uff0c\u8bf7\u5728NebulaGraph\u5b89\u88c5\u8def\u5f84\u5185\u7684 data/storage/nebula \u76ee\u5f55\u5185\uff0c\u5c06\u5bf9\u5e94 Space ID \u76ee\u5f55\u5185\u7684 download \u6587\u4ef6\u5939\u5220\u9664\uff0c\u7136\u540e\u91cd\u65b0\u4e0b\u8f7d SST \u6587\u4ef6\u3002\u5982\u679c\u56fe\u7a7a\u95f4\u662f\u591a\u526f\u672c\uff0c\u4fdd\u5b58\u526f\u672c\u7684\u6240\u6709\u673a\u5668\u90fd\u9700\u8981\u5220\u9664 download \u6587\u4ef6\u5939\u3002 \u5982\u679c\u5bfc\u5165\u65f6\u51fa\u73b0\u95ee\u9898\u9700\u8981\u91cd\u65b0\u5bfc\u5165\uff0c\u91cd\u65b0\u6267\u884c SUBMIT JOB INGEST; \u5373\u53ef\u3002 \u6b65\u9aa4 6\uff1a\uff08\u53ef\u9009\uff09\u9a8c\u8bc1\u6570\u636e \u00b6 \u7528\u6237\u53ef\u4ee5\u5728NebulaGraph\u5ba2\u6237\u7aef\uff08\u4f8b\u5982 NebulaGraph Studio\uff09\u4e2d\u6267\u884c\u67e5\u8be2\u8bed\u53e5\uff0c\u786e\u8ba4\u6570\u636e\u662f\u5426\u5df2\u5bfc\u5165\u3002\u4f8b\u5982\uff1a LOOKUP ON player YIELD id(vertex); \u7528\u6237\u4e5f\u53ef\u4ee5\u4f7f\u7528\u547d\u4ee4 SHOW STATS \u67e5\u770b\u7edf\u8ba1\u6570\u636e\u3002 \u6b65\u9aa4 7\uff1a\uff08\u5982\u6709\uff09\u5728NebulaGraph\u4e2d\u91cd\u5efa\u7d22\u5f15 \u00b6 \u5bfc\u5165\u6570\u636e\u540e\uff0c\u7528\u6237\u53ef\u4ee5\u5728NebulaGraph\u4e2d\u91cd\u65b0\u521b\u5efa\u5e76\u91cd\u5efa\u7d22\u5f15\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1 \u7d22\u5f15\u4ecb\u7ecd \u3002","title":"\u5bfc\u5165 SST \u6587\u4ef6\u6570\u636e"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-sst/#sst","text":"\u672c\u6587\u4ee5\u4e00\u4e2a\u793a\u4f8b\u8bf4\u660e\u5982\u4f55\u5c06\u6570\u636e\u6e90\u7684\u6570\u636e\u751f\u6210 SST\uff08Sorted String Table\uff09\u6587\u4ef6\u5e76\u4fdd\u5b58\u5728 HDFS \u4e0a\uff0c\u7136\u540e\u5bfc\u5165NebulaGraph\uff0c\u793a\u4f8b\u6570\u636e\u6e90\u662f CSV \u6587\u4ef6\u3002","title":"\u5bfc\u5165 SST \u6587\u4ef6\u6570\u636e"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-sst/#_1","text":"\u4ec5 Linux \u7cfb\u7edf\u652f\u6301\u5bfc\u5165 SST \u6587\u4ef6\u3002 \u4e0d\u652f\u6301\u5c5e\u6027\u7684 Default \u503c\u3002","title":"\u6ce8\u610f\u4e8b\u9879"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-sst/#_2","text":"Exchange \u652f\u6301\u4e24\u79cd\u6570\u636e\u5bfc\u5165\u6a21\u5f0f\uff1a \u76f4\u63a5\u5c06\u6570\u636e\u6e90\u7684\u6570\u636e\u901a\u8fc7 nGQL \u8bed\u53e5\u7684\u5f62\u5f0f\u5bfc\u5165NebulaGraph\u3002 \u5c06\u6570\u636e\u6e90\u7684\u6570\u636e\u751f\u6210 SST \u6587\u4ef6\uff0c\u7136\u540e\u501f\u52a9 Console \u5c06 SST \u6587\u4ef6\u5bfc\u5165NebulaGraph\u3002 \u4e0b\u6587\u5c06\u4ecb\u7ecd\u751f\u6210 SST \u6587\u4ef6\u5e76\u7528\u5176\u5bfc\u5165\u6570\u636e\u7684\u9002\u7528\u573a\u666f\u3001\u5b9e\u73b0\u65b9\u6cd5\u3001\u524d\u63d0\u6761\u4ef6\u3001\u64cd\u4f5c\u6b65\u9aa4\u7b49\u5185\u5bb9\u3002","title":"\u80cc\u666f\u4fe1\u606f"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-sst/#_3","text":"\u9002\u5408\u5728\u7ebf\u4e1a\u52a1\uff0c\u56e0\u4e3a\u751f\u6210\u65f6\u51e0\u4e4e\u4e0d\u4f1a\u5f71\u54cd\u4e1a\u52a1\uff08\u53ea\u662f\u8bfb\u53d6 Schema\uff09\uff0c\u5bfc\u5165\u901f\u5ea6\u5feb\u3002 Caution \u5bfc\u5165\u671f\u95f4\uff08\u5927\u7ea6 10 \u79d2\uff09\u4f1a\u963b\u585e\u5bf9\u5e94\u7a7a\u95f4\u7684\u5199\u64cd\u4f5c\uff0c\u5e76\u4e14\u4e4b\u540e\u6570\u5c0f\u65f6\u5185\u53ef\u80fd\u6709\u5386\u53f2\u6570\u636e\u6574\u7406\uff0c\u5efa\u8bae\u5728\u4e1a\u52a1\u4f4e\u5cf0\u671f\u8fdb\u884c\u5bfc\u5165\u3002 \u9002\u5408\u6570\u636e\u6e90\u6570\u636e\u91cf\u8f83\u5927\u7684\u573a\u666f\uff0c\u5bfc\u5165\u901f\u5ea6\u5feb\u3002","title":"\u9002\u7528\u573a\u666f"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-sst/#_4","text":"NebulaGraph\u5e95\u5c42\u4f7f\u7528 RocksDB \u4f5c\u4e3a\u952e\u503c\u578b\u5b58\u50a8\u5f15\u64ce\u3002RocksDB \u662f\u57fa\u4e8e\u786c\u76d8\u7684\u5b58\u50a8\u5f15\u64ce\uff0c\u63d0\u4f9b\u4e86\u4e00\u7cfb\u5217 API \u7528\u4e8e\u521b\u5efa\u53ca\u5bfc\u5165 SST \u683c\u5f0f\u7684\u6587\u4ef6\uff0c\u6709\u52a9\u4e8e\u5feb\u901f\u5bfc\u5165\u6d77\u91cf\u6570\u636e\u3002 SST \u6587\u4ef6\u662f\u4e00\u4e2a\u5185\u90e8\u5305\u542b\u4e86\u4efb\u610f\u957f\u5ea6\u7684\u6709\u5e8f\u952e\u503c\u5bf9\u96c6\u5408\u7684\u6587\u4ef6\uff0c\u7528\u4e8e\u9ad8\u6548\u5730\u5b58\u50a8\u5927\u91cf\u952e\u503c\u578b\u6570\u636e\u3002\u751f\u6210 SST \u6587\u4ef6\u7684\u6574\u4e2a\u8fc7\u7a0b\u4e3b\u8981\u7531 Exchange \u7684 Reader\u3001sstProcessor \u548c sstWriter \u5b8c\u6210\u3002\u6574\u4e2a\u6570\u636e\u5904\u7406\u8fc7\u7a0b\u5982\u4e0b\uff1a Reader \u4ece\u6570\u636e\u6e90\u4e2d\u8bfb\u53d6\u6570\u636e\u3002 sstProcessor \u6839\u636eNebulaGraph\u7684 Schema \u4fe1\u606f\u751f\u6210 SST \u6587\u4ef6\uff0c\u7136\u540e\u4e0a\u4f20\u81f3 HDFS\u3002SST \u6587\u4ef6\u7684\u683c\u5f0f\u8bf7\u53c2\u89c1 \u6570\u636e\u5b58\u50a8\u683c\u5f0f \u3002 sstWriter \u6253\u5f00\u4e00\u4e2a\u6587\u4ef6\u5e76\u63d2\u5165\u6570\u636e\u3002\u751f\u6210 SST \u6587\u4ef6\u65f6\uff0cKey \u5fc5\u987b\u6309\u7167\u987a\u5e8f\u5199\u5165\u3002 \u751f\u6210 SST \u6587\u4ef6\u4e4b\u540e\uff0cRocksDB \u901a\u8fc7 IngestExternalFile() \u65b9\u6cd5\u5c06 SST \u6587\u4ef6\u5bfc\u5165\u5230NebulaGraph\u4e2d\u3002\u4f8b\u5982\uff1a IngestExternalFileOptions ifo; # \u5bfc\u5165\u4e24\u4e2a SST \u6587\u4ef6 Status s = db_->IngestExternalFile({\"/home/usr/file1.sst\", \"/home/usr/file2.sst\"}, ifo); if (!s.ok()) { printf(\"Error while adding file %s and %s, Error %s\\n\", file_path1.c_str(), file_path2.c_str(), s.ToString().c_str()); return 1; } \u8c03\u7528 IngestExternalFile() \u65b9\u6cd5\u65f6\uff0cRocksDB \u9ed8\u8ba4\u4f1a\u5c06\u6587\u4ef6\u62f7\u8d1d\u5230\u6570\u636e\u76ee\u5f55\uff0c\u5e76\u4e14\u963b\u585e RocksDB \u5199\u5165\u64cd\u4f5c\u3002\u5982\u679c SST \u6587\u4ef6\u4e2d\u7684\u952e\u8303\u56f4\u8986\u76d6\u4e86 Memtable \u952e\u7684\u8303\u56f4\uff0c\u5219\u5c06 Memtable \u843d\u76d8\uff08flush\uff09\u5230\u786c\u76d8\u3002\u5c06 SST \u6587\u4ef6\u653e\u7f6e\u5728 LSM \u6811\u6700\u4f18\u4f4d\u7f6e\u540e\uff0c\u4e3a\u6587\u4ef6\u5206\u914d\u4e00\u4e2a\u5168\u5c40\u5e8f\u5217\u53f7\uff0c\u5e76\u6253\u5f00\u5199\u64cd\u4f5c\u3002","title":"\u5b9e\u73b0\u65b9\u6cd5"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-sst/#_5","text":"\u672c\u6587\u4ee5 basketballplayer \u6570\u636e\u96c6 \u4e3a\u4f8b\u3002","title":"\u6570\u636e\u96c6"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-sst/#_6","text":"\u672c\u6587\u793a\u4f8b\u5728 MacOS \u4e0b\u5b8c\u6210\uff0c\u4ee5\u4e0b\u662f\u76f8\u5173\u7684\u73af\u5883\u914d\u7f6e\u4fe1\u606f\uff1a \u786c\u4ef6\u89c4\u683c\uff1a CPU\uff1a1.7 GHz Quad-Core Intel Core i7 \u5185\u5b58\uff1a16 GB Spark\uff1a2.4.7 \u5355\u673a\u7248 Hadoop\uff1a2.9.2 \u4f2a\u5206\u5e03\u5f0f\u90e8\u7f72 NebulaGraph\uff1a3.6.0\u3002","title":"\u73af\u5883\u914d\u7f6e"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-sst/#_7","text":"\u5f00\u59cb\u5bfc\u5165\u6570\u636e\u4e4b\u524d\uff0c\u7528\u6237\u9700\u8981\u786e\u8ba4\u4ee5\u4e0b\u4fe1\u606f\uff1a \u5df2\u7ecf \u5b89\u88c5\u90e8\u7f72NebulaGraph 3.6.0 \u5e76\u83b7\u53d6\u5982\u4e0b\u4fe1\u606f\uff1a Graph \u670d\u52a1\u548c Meta \u670d\u52a1\u7684\u7684 IP \u5730\u5740\u548c\u7aef\u53e3\u3002 \u62e5\u6709NebulaGraph\u5199\u6743\u9650\u7684\u7528\u6237\u540d\u548c\u5bc6\u7801\u3002 Meta \u670d\u52a1\u914d\u7f6e\u6587\u4ef6\u4e2d\u7684 --ws_storage_http_port \u548c Storage \u670d\u52a1\u914d\u7f6e\u6587\u4ef6\u4e2d\u7684 --ws_http_port \u4e00\u81f4\u3002\u4f8b\u5982\u90fd\u4e3a 19779 \u3002 Graph \u670d\u52a1\u914d\u7f6e\u6587\u4ef6\u4e2d\u7684 --ws_meta_http_port \u548c Meta \u670d\u52a1\u914d\u7f6e\u6587\u4ef6\u4e2d\u7684 --ws_http_port \u4e00\u81f4\u3002\u4f8b\u5982\u90fd\u4e3a 19559 \u3002 Schema \u7684\u4fe1\u606f\uff0c\u5305\u62ec Tag \u548c Edge type \u7684\u540d\u79f0\u3001\u5c5e\u6027\u7b49\u3002 \u5df2\u7ecf \u7f16\u8bd1 Exchange \uff0c\u6216\u8005\u76f4\u63a5 \u4e0b\u8f7d \u7f16\u8bd1\u5b8c\u6210\u7684 jar \u6587\u4ef6\u3002\u672c\u793a\u4f8b\u4e2d\u4f7f\u7528 Exchange 3.6.0\u3002 \u5df2\u7ecf\u5b89\u88c5 Spark\u3002 \u5df2\u7ecf\u5b89\u88c5 JDK 1.8 \u6216\u4ee5\u4e0a\u7248\u672c\uff0c\u5e76\u914d\u7f6e\u73af\u5883\u53d8\u91cf JAVA_HOME\u3002 \u786e\u8ba4 Hadoop \u670d\u52a1\u5728\u6240\u6709\u90e8\u7f72 Storage \u670d\u52a1\u7684\u673a\u5668\u4e0a\u8fd0\u884c\u6b63\u5e38\u3002 Note \u5982\u679c\u9700\u8981\u751f\u6210\u5176\u4ed6\u6570\u636e\u6e90\u7684 SST \u6587\u4ef6\uff0c\u8bf7\u53c2\u89c1\u76f8\u5e94\u6570\u636e\u6e90\u7684\u6587\u6863\uff0c\u67e5\u770b\u524d\u63d0\u6761\u4ef6\u90e8\u5206\u3002 \u5982\u679c\u53ea\u9700\u8981\u751f\u6210 SST \u6587\u4ef6\uff0c\u4e0d\u9700\u8981\u5728\u90e8\u7f72 Storage \u670d\u52a1\u7684\u673a\u5668\u4e0a\u5b89\u88c5 Hadoop \u670d\u52a1\u3002 \u5982\u9700\u5728 INGEST\uff08\u6570\u636e\u5bfc\u5165\uff09\u7ed3\u675f\u540e\u81ea\u52a8\u79fb\u9664 SST \u6587\u4ef6\uff0c\u5728 Storage \u670d\u52a1\u914d\u7f6e\u6587\u4ef6\u4e2d\u589e\u52a0 --move_files=true \uff0c\u8be5\u914d\u7f6e\u4f1a\u8ba9NebulaGraph\u5728 INGEST \u540e\u5c06 SST \u6587\u4ef6\u79fb\u52a8\uff08 mv \uff09\u5230 data \u76ee\u5f55\u4e0b\u3002 --move_files \u7684\u9ed8\u8ba4\u503c\u4e3a false \uff0c\u6b64\u65f6NebulaGraph\u4f1a\u590d\u5236\uff08 cp \uff09SST \u6587\u4ef6\u800c\u4e0d\u662f\u79fb\u52a8\u3002","title":"\u524d\u63d0\u6761\u4ef6"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-sst/#_8","text":"","title":"\u64cd\u4f5c\u6b65\u9aa4"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-sst/#1nebulagraph_schema","text":"\u5206\u6790 CSV \u6587\u4ef6\u4e2d\u7684\u6570\u636e\uff0c\u6309\u4ee5\u4e0b\u6b65\u9aa4\u5728NebulaGraph\u4e2d\u521b\u5efa Schema\uff1a \u786e\u8ba4 Schema \u8981\u7d20\u3002NebulaGraph\u4e2d\u7684 Schema \u8981\u7d20\u5982\u4e0b\u8868\u6240\u793a\u3002 \u8981\u7d20 \u540d\u79f0 \u5c5e\u6027 Tag player name string, age int Tag team name string Edge Type follow degree int Edge Type serve start_year int, end_year int \u4f7f\u7528 NebulaGraph Console \u521b\u5efa\u4e00\u4e2a\u56fe\u7a7a\u95f4 basketballplayer \uff0c\u5e76\u521b\u5efa\u4e00\u4e2a Schema\uff0c\u5982\u4e0b\u6240\u793a\u3002 ## \u521b\u5efa\u56fe\u7a7a\u95f4 nebula> CREATE SPACE basketballplayer \\ (partition_num = 10, \\ replica_factor = 1, \\ vid_type = FIXED_STRING(30)); ## \u9009\u62e9\u56fe\u7a7a\u95f4 basketballplayer nebula> USE basketballplayer; ## \u521b\u5efa Tag player nebula> CREATE TAG player(name string, age int); ## \u521b\u5efa Tag team nebula> CREATE TAG team(name string); ## \u521b\u5efa Edge type follow nebula> CREATE EDGE follow(degree int); ## \u521b\u5efa Edge type serve nebula> CREATE EDGE serve(start_year int, end_year int); \u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u89c1 \u5feb\u901f\u5f00\u59cb \u3002","title":"\u6b65\u9aa4 1\uff1a\u5728NebulaGraph\u4e2d\u521b\u5efa Schema"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-sst/#2_csv","text":"\u786e\u8ba4\u4ee5\u4e0b\u4fe1\u606f\uff1a \u5904\u7406 CSV \u6587\u4ef6\u4ee5\u6ee1\u8db3 Schema \u7684\u8981\u6c42\u3002 Note \u53ef\u4ee5\u4f7f\u7528\u6709\u8868\u5934\u6216\u8005\u65e0\u8868\u5934\u7684 CSV \u6587\u4ef6\u3002 \u83b7\u53d6 CSV \u6587\u4ef6\u5b58\u50a8\u8def\u5f84\u3002","title":"\u6b65\u9aa4 2\uff1a\u5904\u7406 CSV \u6587\u4ef6"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-sst/#3","text":"\u7f16\u8bd1 Exchange \u540e\uff0c\u590d\u5236 target/classes/application.conf \u6587\u4ef6\u8bbe\u7f6e\u76f8\u5173\u914d\u7f6e\u3002\u5728\u672c\u793a\u4f8b\u4e2d\uff0c\u590d\u5236\u7684\u6587\u4ef6\u540d\u4e3a sst_application.conf \u3002\u5404\u4e2a\u914d\u7f6e\u9879\u7684\u8be6\u7ec6\u8bf4\u660e\u8bf7\u53c2\u89c1 \u914d\u7f6e\u8bf4\u660e \u3002 { # Spark \u76f8\u5173\u914d\u7f6e spark: { app: { name: NebulaGraph Exchange 3.6.0 } master:local driver: { cores: 1 maxResultSize: 1G } executor: { memory:1G } cores:{ max: 16 } } #NebulaGraph\u76f8\u5173\u914d\u7f6e nebula: { address:{ graph:[\"192.168.8.XXX:9669\"] #\u4efb\u610f\u4e00\u4e2a Meta \u670d\u52a1\u7684\u5730\u5740\u3002 #\u5982\u679c\u60a8\u7684NebulaGraph\u5728\u865a\u62df\u7f51\u7edc\u4e2d\uff0c\u5982k8s\uff0c\u8bf7\u914d\u7f6e Leader Meta\u7684\u5730\u5740\u3002 meta:[\"192.168.8.XXX:9559\"] } user: root pswd: nebula space: basketballplayer # SST \u6587\u4ef6\u76f8\u5173\u914d\u7f6e path:{ # \u672c\u5730\u4e34\u65f6\u5b58\u653e\u751f\u6210\u7684 SST \u6587\u4ef6\u7684\u76ee\u5f55 local:\"/tmp\" # SST \u6587\u4ef6\u5728 HDFS \u7684\u5b58\u50a8\u8def\u5f84 remote:\"/sst\" # HDFS \u7684 NameNode \u5730\u5740\uff0c\u4f8b\u5982 \"hdfs://<ip/hostname>:<port>\"\u3002 hdfs.namenode: \"hdfs://*.*.*.*:9000\" } # \u5ba2\u6237\u7aef\u8fde\u63a5\u53c2\u6570 connection: { # socket \u8fde\u63a5\u3001\u6267\u884c\u7684\u8d85\u65f6\u65f6\u95f4\uff0c\u5355\u4f4d\uff1a\u6beb\u79d2\u3002 timeout: 30000 } error: { # \u6700\u5927\u5931\u8d25\u6570\uff0c\u8d85\u8fc7\u540e\u4f1a\u9000\u51fa\u5e94\u7528\u7a0b\u5e8f\u3002 max: 32 # \u5931\u8d25\u7684\u5bfc\u5165\u4f5c\u4e1a\u5c06\u8bb0\u5f55\u5728\u8f93\u51fa\u8def\u5f84\u4e2d\u3002 output: /tmp/errors } # \u4f7f\u7528Google Guava RateLimiter \u6765\u9650\u5236\u53d1\u9001\u5230NebulaGraph\u7684\u8bf7\u6c42\u3002 rate: { # RateLimiter \u7684\u7a33\u5b9a\u541e\u5410\u91cf\u3002 limit: 1024 # \u4ece RateLimiter \u83b7\u53d6\u5141\u8bb8\u7684\u8d85\u65f6\u65f6\u95f4\uff0c\u5355\u4f4d\uff1a\u6beb\u79d2 timeout: 1000 } } # \u5904\u7406\u70b9 tags: [ # \u8bbe\u7f6e Tag player \u76f8\u5173\u4fe1\u606f\u3002 { # \u6307\u5b9aNebulaGraph\u4e2d\u5b9a\u4e49\u7684 Tag \u540d\u79f0\u3002 name: player type: { # \u6307\u5b9a\u6570\u636e\u6e90\uff0c\u4f7f\u7528 CSV\u3002 source: csv # \u6307\u5b9a\u5982\u4f55\u5c06\u70b9\u6570\u636e\u5bfc\u5165NebulaGraph\uff1aClient \u6216 SST\u3002 sink: sst } # \u6307\u5b9a CSV \u6587\u4ef6\u7684\u8def\u5f84\u3002 # \u6587\u4ef6\u5b58\u50a8\u5728 HDFS \u4e0a\uff0c\u7528\u53cc\u5f15\u53f7\u62ec\u8d77\u8def\u5f84\uff0c\u4ee5 hdfs://\u5f00\u5934\uff0c\u4f8b\u5982\"hdfs://ip:port/xx/xx.csv\"\u3002 path: \"hdfs://*.*.*.*:9000/dataset/vertex_player.csv\" # \u5982\u679c CSV \u6587\u4ef6\u6ca1\u6709\u8868\u5934\uff0c\u4f7f\u7528 [_c0, _c1, _c2, ..., _cn] \u8868\u793a\u5176\u8868\u5934\uff0c\u5e76\u5c06\u5217\u6307\u793a\u4e3a\u5c5e\u6027\u503c\u7684\u6e90\u3002 # \u5982\u679c CSV \u6587\u4ef6\u6709\u8868\u5934\uff0c\u5219\u4f7f\u7528\u5b9e\u9645\u7684\u5217\u540d\u3002 fields: [_c1, _c2] # \u6307\u5b9aNebulaGraph\u4e2d\u5b9a\u4e49\u7684\u5c5e\u6027\u540d\u79f0\u3002 # fields \u4e0e nebula.fields \u7684\u987a\u5e8f\u5fc5\u987b\u4e00\u4e00\u5bf9\u5e94\u3002 nebula.fields: [age, name] # \u6307\u5b9a\u4e00\u4e2a\u5217\u4f5c\u4e3a VID \u7684\u6e90\u3002 # vertex \u7684\u503c\u5fc5\u987b\u4e0e\u4e0a\u8ff0 fields \u6216\u8005 csv.fields \u4e2d\u7684\u5217\u540d\u4fdd\u6301\u4e00\u81f4\u3002 # \u76ee\u524d\uff0cNebulaGraph 3.6.0\u4ec5\u652f\u6301\u5b57\u7b26\u4e32\u6216\u6574\u6570\u7c7b\u578b\u7684 VID\u3002 vertex: { field:_c0 # \u4e3a VID \u589e\u52a0\u6307\u5b9a\u7684\u524d\u7f00\u3002\u4f8b\u5982 VID \u4e3a 12345\uff0c\u589e\u52a0\u524d\u7f00 tag1 \u540e\u4e3a tag1_12345\u3002\u4e0b\u5212\u7ebf\u65e0\u6cd5\u4fee\u6539\u3002 # prefix:\"tag1\" # \u5bf9 string \u7c7b\u578b\u7684 VID \u8fdb\u884c\u54c8\u5e0c\u5316\u64cd\u4f5c\u3002 # policy:hash } # \u6307\u5b9a\u7684\u5206\u9694\u7b26\u3002\u9ed8\u8ba4\u503c\u4e3a\u82f1\u6587\u9017\u53f7\uff08,\uff09\u3002 separator: \",\" # \u5982\u679c CSV \u6587\u4ef6\u6709\u8868\u5934\uff0c\u8bf7\u5c06 header \u8bbe\u7f6e\u4e3a true\u3002 # \u5982\u679c CSV \u6587\u4ef6\u6ca1\u6709\u8868\u5934\uff0c\u8bf7\u5c06 header \u8bbe\u7f6e\u4e3a false\u3002\u9ed8\u8ba4\u503c\u4e3a false\u3002 header: false # \u6279\u91cf\u64cd\u4f5c\u7c7b\u578b\uff0c\u5305\u62ec INSERT\u3001UPDATE \u548c DELETE\u3002\u9ed8\u8ba4\u4e3a INSERT\u3002 #writeMode: INSERT # \u6307\u5b9a\u5355\u6279\u6b21\u5199\u5165NebulaGraph\u7684\u6700\u5927\u70b9\u6570\u91cf\u3002 batch: 256 # \u6307\u5b9a Spark \u5206\u7247\u6570\u91cf\u3002 partition: 32 # \u751f\u6210 SST \u6587\u4ef6\u65f6\u662f\u5426\u8981\u57fa\u4e8eNebulaGraph\u4e2d\u56fe\u7a7a\u95f4\u7684 partition \u8fdb\u884c\u6570\u636e\u91cd\u5206\u533a\u3002 repartitionWithNebula: false } # \u8bbe\u7f6e Tag team \u76f8\u5173\u4fe1\u606f\u3002 { name: team type: { source: csv sink: sst } path: \"hdfs://*.*.*.*:9000/dataset/vertex_team.csv\" fields: [_c1] nebula.fields: [name] vertex: { field:_c0 } separator: \",\" header: false batch: 256 partition: 32 repartitionWithNebula: false } # \u5982\u679c\u9700\u8981\u6dfb\u52a0\u66f4\u591a\u70b9\uff0c\u8bf7\u53c2\u8003\u524d\u9762\u7684\u914d\u7f6e\u8fdb\u884c\u6dfb\u52a0\u3002 ] # \u5904\u7406\u8fb9 edges: [ # \u8bbe\u7f6e Edge type follow \u76f8\u5173\u4fe1\u606f\u3002 { # \u6307\u5b9aNebulaGraph\u4e2d\u5b9a\u4e49\u7684 Edge type \u540d\u79f0\u3002 name: follow type: { # \u6307\u5b9a\u6570\u636e\u6e90\uff0c\u4f7f\u7528 CSV\u3002 source: csv # \u6307\u5b9a\u5982\u4f55\u5c06\u70b9\u6570\u636e\u5bfc\u5165NebulaGraph\uff1aClient \u6216 SST\u3002 sink: sst } # \u6307\u5b9a CSV \u6587\u4ef6\u7684\u8def\u5f84\u3002 # \u6587\u4ef6\u5b58\u50a8\u5728 HDFS \u4e0a\uff0c\u7528\u53cc\u5f15\u53f7\u62ec\u8d77\u8def\u5f84\uff0c\u4ee5 hdfs://\u5f00\u5934\uff0c\u4f8b\u5982\"hdfs://<ip/hostname>:port/xx/xx.csv\"\u3002 path: \"hdfs://*.*.*.*:9000/dataset/edge_follow.csv\" # \u5982\u679c CSV \u6587\u4ef6\u6ca1\u6709\u8868\u5934\uff0c\u4f7f\u7528 [_c0, _c1, _c2, ..., _cn] \u8868\u793a\u5176\u8868\u5934\uff0c\u5e76\u5c06\u5217\u6307\u793a\u4e3a\u5c5e\u6027\u503c\u7684\u6e90\u3002 # \u5982\u679c CSV \u6587\u4ef6\u6709\u8868\u5934\uff0c\u5219\u4f7f\u7528\u5b9e\u9645\u7684\u5217\u540d\u3002 fields: [_c2] # \u6307\u5b9aNebulaGraph\u4e2d\u5b9a\u4e49\u7684\u5c5e\u6027\u540d\u79f0\u3002 # fields \u4e0e nebula.fields \u7684\u987a\u5e8f\u5fc5\u987b\u4e00\u4e00\u5bf9\u5e94\u3002 nebula.fields: [degree] # \u6307\u5b9a\u4e00\u4e2a\u5217\u4f5c\u4e3a\u8d77\u59cb\u70b9\u548c\u76ee\u7684\u70b9\u7684\u6e90\u3002 # vertex \u7684\u503c\u5fc5\u987b\u4e0e\u4e0a\u8ff0 fields \u6216\u8005 csv.fields \u4e2d\u7684\u5217\u540d\u4fdd\u6301\u4e00\u81f4\u3002 # \u76ee\u524d\uff0cNebulaGraph 3.6.0\u4ec5\u652f\u6301\u5b57\u7b26\u4e32\u6216\u6574\u6570\u7c7b\u578b\u7684 VID\u3002 source: { field: _c0 # \u4e3a VID \u589e\u52a0\u6307\u5b9a\u7684\u524d\u7f00\u3002\u4f8b\u5982 VID \u4e3a 12345\uff0c\u589e\u52a0\u524d\u7f00 tag1 \u540e\u4e3a tag1_12345\u3002\u4e0b\u5212\u7ebf\u65e0\u6cd5\u4fee\u6539\u3002 # prefix:\"tag1\" # \u5bf9 string \u7c7b\u578b\u7684 VID \u8fdb\u884c\u54c8\u5e0c\u5316\u64cd\u4f5c\u3002 # policy:hash } target: { field: _c1 # \u4e3a VID \u589e\u52a0\u6307\u5b9a\u7684\u524d\u7f00\u3002\u4f8b\u5982 VID \u4e3a 12345\uff0c\u589e\u52a0\u524d\u7f00 tag1 \u540e\u4e3a tag1_12345\u3002\u4e0b\u5212\u7ebf\u65e0\u6cd5\u4fee\u6539\u3002 # prefix:\"tag1\" # \u5bf9 string \u7c7b\u578b\u7684 VID \u8fdb\u884c\u54c8\u5e0c\u5316\u64cd\u4f5c\u3002 # policy:hash } # \u6307\u5b9a\u7684\u5206\u9694\u7b26\u3002\u9ed8\u8ba4\u503c\u4e3a\u82f1\u6587\u9017\u53f7\uff08,\uff09\u3002 separator: \",\" # \u6307\u5b9a\u4e00\u4e2a\u5217\u4f5c\u4e3a rank \u7684\u6e90\uff08\u53ef\u9009\uff09\u3002 #ranking: rank # \u5982\u679c CSV \u6587\u4ef6\u6709\u8868\u5934\uff0c\u8bf7\u5c06 header \u8bbe\u7f6e\u4e3a true\u3002 # \u5982\u679c CSV \u6587\u4ef6\u6ca1\u6709\u8868\u5934\uff0c\u8bf7\u5c06 header \u8bbe\u7f6e\u4e3a false\u3002\u9ed8\u8ba4\u503c\u4e3a false\u3002 header: false # \u6279\u91cf\u64cd\u4f5c\u7c7b\u578b\uff0c\u5305\u62ec INSERT\u3001UPDATE \u548c DELETE\u3002\u9ed8\u8ba4\u4e3a INSERT\u3002 #writeMode: INSERT # \u6307\u5b9a\u5355\u6279\u6b21\u5199\u5165NebulaGraph\u7684\u6700\u5927\u8fb9\u6570\u91cf\u3002 batch: 256 # \u6307\u5b9a Spark \u5206\u7247\u6570\u91cf\u3002 partition: 32 # \u751f\u6210 SST \u6587\u4ef6\u65f6\u662f\u5426\u8981\u57fa\u4e8eNebulaGraph\u4e2d\u56fe\u7a7a\u95f4\u7684 partition \u8fdb\u884c\u6570\u636e\u91cd\u5206\u533a\u3002 repartitionWithNebula: false } # \u8bbe\u7f6e Edge type serve \u76f8\u5173\u4fe1\u606f\u3002 { name: serve type: { source: csv sink: sst } path: \"hdfs://*.*.*.*:9000/dataset/edge_serve.csv\" fields: [_c2,_c3] nebula.fields: [start_year, end_year] source: { field: _c0 } target: { field: _c1 } separator: \",\" header: false batch: 256 partition: 32 repartitionWithNebula: false } ] # \u5982\u679c\u9700\u8981\u6dfb\u52a0\u66f4\u591a\u8fb9\uff0c\u8bf7\u53c2\u8003\u524d\u9762\u7684\u914d\u7f6e\u8fdb\u884c\u6dfb\u52a0\u3002 }","title":"\u6b65\u9aa4 3\uff1a\u4fee\u6539\u914d\u7f6e\u6587\u4ef6"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-sst/#4_sst","text":"\u8fd0\u884c\u5982\u4e0b\u547d\u4ee4\u5c06 CSV \u6e90\u6587\u4ef6\u751f\u6210\u4e3a SST \u6587\u4ef6\u3002\u5173\u4e8e\u53c2\u6570\u7684\u8bf4\u660e\uff0c\u8bf7\u53c2\u89c1 \u547d\u4ee4\u53c2\u6570 \u3002 ${ SPARK_HOME } /bin/spark-submit --master \"local\" --conf spark.sql.shuffle.partitions = <shuffle_concurrency> --class com.vesoft.nebula.exchange.Exchange <nebula-exchange-3.6.0.jar_path> -c <sst_application.conf_path> Note \u751f\u6210 SST \u6587\u4ef6\u65f6\uff0c\u4f1a\u6d89\u53ca\u5230 Spark \u7684 shuffle \u64cd\u4f5c\uff0c\u8bf7\u6ce8\u610f\u5728\u63d0\u4ea4\u547d\u4ee4\u4e2d\u589e\u52a0 spark.sql.shuffle.partitions \u7684\u914d\u7f6e\u3002 Note JAR \u5305\u6709\u4e24\u79cd\u83b7\u53d6\u65b9\u5f0f\uff1a \u81ea\u884c\u7f16\u8bd1 \u6216\u8005\u4ece maven \u4ed3\u5e93\u4e0b\u8f7d\u3002 \u793a\u4f8b\uff1a ${ SPARK_HOME } /bin/spark-submit --master \"local\" --conf spark.sql.shuffle.partitions = 200 --class com.vesoft.nebula.exchange.Exchange /root/nebula-exchange/nebula-exchange/target/nebula-exchange-3.6.0.jar -c /root/nebula-exchange/nebula-exchange/target/classes/sst_application.conf \u4efb\u52a1\u6267\u884c\u5b8c\u6210\u540e\uff0c\u53ef\u4ee5\u5728 HDFS \u4e0a\u7684 /sst \u76ee\u5f55\uff08 nebula.path.remote \u53c2\u6570\u6307\u5b9a\uff09\u5185\u67e5\u770b\u5230\u751f\u6210\u7684 SST \u6587\u4ef6\u3002 Note \u5982\u679c\u5bf9 Schema \u6709\u4fee\u6539\u64cd\u4f5c\uff0c\u4f8b\u5982\u91cd\u5efa\u56fe\u7a7a\u95f4\u3001\u4fee\u6539 Tag\u3001\u4fee\u6539 Edge type \u7b49\uff0c\u9700\u8981\u91cd\u65b0\u751f\u6210 SST \u6587\u4ef6\uff0c\u56e0\u4e3a SST \u6587\u4ef6\u4f1a\u9a8c\u8bc1 Space ID\u3001Tag ID\u3001Edge ID \u7b49\u4fe1\u606f\u3002","title":"\u6b65\u9aa4 4\uff1a\u751f\u6210 SST \u6587\u4ef6"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-sst/#5_sst","text":"Note \u5bfc\u5165\u524d\u8bf7\u786e\u8ba4\u4ee5\u4e0b\u4fe1\u606f\uff1a \u786e\u8ba4\u6240\u6709\u90e8\u7f72 Storage \u670d\u52a1\u7684\u673a\u5668\u4e0a\u90fd\u5df2\u90e8\u7f72 Hadoop \u670d\u52a1\uff0c\u5e76\u914d\u7f6e HADOOP_HOME \u548c JAVA_HOME\u3002 Meta \u670d\u52a1\u914d\u7f6e\u6587\u4ef6\u4e2d\u7684 --ws_storage_http_port \uff08\u5982\u679c\u6ca1\u6709\uff0c\u8bf7\u624b\u52a8\u6dfb\u52a0\uff09\u548c Storage \u670d\u52a1\u914d\u7f6e\u6587\u4ef6\u4e2d\u7684 --ws_http_port \u4e00\u81f4\u3002\u4f8b\u5982\u90fd\u4e3a 19779 \u3002 Graph \u670d\u52a1\u914d\u7f6e\u6587\u4ef6\u4e2d\u7684 --ws_meta_http_port \uff08\u5982\u679c\u6ca1\u6709\uff0c\u8bf7\u624b\u52a8\u6dfb\u52a0\uff09\u548c Meta \u670d\u52a1\u914d\u7f6e\u6587\u4ef6\u4e2d\u7684 --ws_http_port \u4e00\u81f4\u3002\u4f8b\u5982\u90fd\u4e3a 19559 \u3002 \u4f7f\u7528\u5ba2\u6237\u7aef\u5de5\u5177\u8fde\u63a5NebulaGraph\uff0c\u6309\u5982\u4e0b\u64cd\u4f5c\u5bfc\u5165 SST \u6587\u4ef6\uff1a \u6267\u884c\u547d\u4ee4\u9009\u62e9\u4e4b\u524d\u521b\u5efa\u7684\u56fe\u7a7a\u95f4\u3002 nebula> USE basketballplayer; \u6267\u884c\u547d\u4ee4\u4e0b\u8f7d SST \u6587\u4ef6\uff1a nebula> SUBMIT JOB DOWNLOAD HDFS \"hdfs://<hadoop_address>:<hadoop_port>/<sst_file_path>\"; \u793a\u4f8b\uff1a nebula> SUBMIT JOB DOWNLOAD HDFS \"hdfs://*.*.*.*:9000/sst\"; \u6267\u884c\u547d\u4ee4\u5bfc\u5165 SST \u6587\u4ef6\uff1a nebula> SUBMIT JOB INGEST; Note \u5982\u679c\u9700\u8981\u91cd\u65b0\u4e0b\u8f7d\uff0c\u8bf7\u5728NebulaGraph\u5b89\u88c5\u8def\u5f84\u5185\u7684 data/storage/nebula \u76ee\u5f55\u5185\uff0c\u5c06\u5bf9\u5e94 Space ID \u76ee\u5f55\u5185\u7684 download \u6587\u4ef6\u5939\u5220\u9664\uff0c\u7136\u540e\u91cd\u65b0\u4e0b\u8f7d SST \u6587\u4ef6\u3002\u5982\u679c\u56fe\u7a7a\u95f4\u662f\u591a\u526f\u672c\uff0c\u4fdd\u5b58\u526f\u672c\u7684\u6240\u6709\u673a\u5668\u90fd\u9700\u8981\u5220\u9664 download \u6587\u4ef6\u5939\u3002 \u5982\u679c\u5bfc\u5165\u65f6\u51fa\u73b0\u95ee\u9898\u9700\u8981\u91cd\u65b0\u5bfc\u5165\uff0c\u91cd\u65b0\u6267\u884c SUBMIT JOB INGEST; \u5373\u53ef\u3002","title":"\u6b65\u9aa4 5\uff1a\u5bfc\u5165 SST \u6587\u4ef6"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-sst/#6","text":"\u7528\u6237\u53ef\u4ee5\u5728NebulaGraph\u5ba2\u6237\u7aef\uff08\u4f8b\u5982 NebulaGraph Studio\uff09\u4e2d\u6267\u884c\u67e5\u8be2\u8bed\u53e5\uff0c\u786e\u8ba4\u6570\u636e\u662f\u5426\u5df2\u5bfc\u5165\u3002\u4f8b\u5982\uff1a LOOKUP ON player YIELD id(vertex); \u7528\u6237\u4e5f\u53ef\u4ee5\u4f7f\u7528\u547d\u4ee4 SHOW STATS \u67e5\u770b\u7edf\u8ba1\u6570\u636e\u3002","title":"\u6b65\u9aa4 6\uff1a\uff08\u53ef\u9009\uff09\u9a8c\u8bc1\u6570\u636e"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-sst/#7nebulagraph","text":"\u5bfc\u5165\u6570\u636e\u540e\uff0c\u7528\u6237\u53ef\u4ee5\u5728NebulaGraph\u4e2d\u91cd\u65b0\u521b\u5efa\u5e76\u91cd\u5efa\u7d22\u5f15\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1 \u7d22\u5f15\u4ecb\u7ecd \u3002","title":"\u6b65\u9aa4 7\uff1a\uff08\u5982\u6709\uff09\u5728NebulaGraph\u4e2d\u91cd\u5efa\u7d22\u5f15"},{"location":"nebula-dashboard/1.what-is-dashboard/","text":"\u4ec0\u4e48\u662f NebulaGraph Dashboard\uff08\u793e\u533a\u7248\uff09 \u00b6 NebulaGraph Dashboard\uff08\u7b80\u79f0 Dashboard\uff09\u662f\u4e00\u6b3e\u7528\u4e8e\u76d1\u63a7NebulaGraph\u96c6\u7fa4\u4e2d\u673a\u5668\u548c\u670d\u52a1\u72b6\u6001\u7684\u53ef\u89c6\u5316\u5de5\u5177\u3002 Enterpriseonly \u4f01\u4e1a\u7248\u589e\u52a0\u4e86\u53ef\u89c6\u5316\u521b\u5efa\u96c6\u7fa4\u3001\u6279\u91cf\u5bfc\u5165\u96c6\u7fa4\u3001\u5feb\u901f\u6269\u7f29\u5bb9\u7b49\u529f\u80fd\uff0c\u70b9\u51fb \u5b9a\u4ef7 \u67e5\u770b\u66f4\u591a\u3002\u7528\u6237\u8fd8\u53ef\u4ee5\u5728\u963f\u91cc\u4e91\u4e0a \u514d\u8d39\u8bd5\u7528 \u3002 \u4ea7\u54c1\u529f\u80fd \u00b6 \u76d1\u63a7\u96c6\u7fa4\u4e2d\u6240\u6709\u673a\u5668\u7684\u72b6\u6001\uff0c\u5305\u62ec CPU\u3001\u5185\u5b58\u3001\u8d1f\u8f7d\u3001\u78c1\u76d8\u548c\u6d41\u91cf\u3002 \u76d1\u63a7\u96c6\u7fa4\u4e2d\u6240\u6709\u670d\u52a1\u7684\u4fe1\u606f\uff0c\u5305\u62ec\u670d\u52a1 IP \u5730\u5740\u3001\u7248\u672c\u548c\u76d1\u63a7\u6307\u6807\uff08\u4f8b\u5982\u67e5\u8be2\u6570\u91cf\u3001\u67e5\u8be2\u5ef6\u8fdf\u3001\u5fc3\u8df3\u5ef6\u8fdf\u7b49\uff09\u3002 \u76d1\u63a7\u96c6\u7fa4\u672c\u8eab\u7684\u4fe1\u606f\uff0c\u5305\u62ec\u96c6\u7fa4\u7684\u670d\u52a1\u4fe1\u606f\u3001\u5206\u533a\u4fe1\u606f\u3001\u914d\u7f6e\u548c\u957f\u65f6\u4efb\u52a1\u3002 \u652f\u6301\u5168\u5c40\u8c03\u6574\u76d1\u63a7\u6570\u636e\u7684\u9875\u9762\u66f4\u65b0\u9891\u7387\u3002 \u9002\u7528\u573a\u666f \u00b6 \u5982\u679c\u6709\u4ee5\u4e0b\u4efb\u4e00\u9700\u6c42\uff0c\u90fd\u53ef\u4ee5\u4f7f\u7528 Dashboard\uff1a \u9700\u8981\u65b9\u4fbf\u5feb\u6377\u5730\u76d1\u6d4b\u5173\u952e\u6307\u6807\uff0c\u96c6\u4e2d\u5448\u73b0\u4e1a\u52a1\u7684\u591a\u4e2a\u91cd\u70b9\u4fe1\u606f\uff0c\u4fdd\u8bc1\u4e1a\u52a1\u6b63\u5e38\u8fd0\u884c\u3002 \u9700\u8981\u591a\u7ef4\u5ea6\uff08\u4f8b\u5982\u65f6\u95f4\u6bb5\u3001\u805a\u5408\u89c4\u5219\u3001\u6307\u6807\uff09\u76d1\u63a7\u96c6\u7fa4\u3002 \u6545\u969c\u53d1\u751f\u540e\uff0c\u9700\u8981\u590d\u76d8\u95ee\u9898\uff0c\u786e\u8ba4\u6545\u969c\u53d1\u751f\u65f6\u95f4\u3001\u5f02\u5e38\u73b0\u8c61\u3002 \u6ce8\u610f\u4e8b\u9879 \u00b6 \u76d1\u63a7\u6570\u636e\u9ed8\u8ba4\u4fdd\u7559 14 \u5929\uff0c\u5373\u53ea\u80fd\u67e5\u8be2\u6700\u8fd1 14 \u5929\u5185\u4efb\u610f\u65f6\u95f4\u6bb5\u7684\u76d1\u63a7\u6570\u636e\u3002 Note \u76d1\u63a7\u670d\u52a1\u7531 prometheus \u63d0\u4f9b\uff0c\u66f4\u65b0\u9891\u7387\u548c\u4fdd\u7559\u65f6\u95f4\u7b49\u90fd\u53ef\u4ee5\u81ea\u884c\u4fee\u6539\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1 prometheus \u5b98\u65b9\u6587\u6863 \u3002 \u7248\u672c\u517c\u5bb9\u6027 \u00b6 NebulaGraph\u7684\u7248\u672c\u548c Dashboard \u793e\u533a\u7248\u7684\u7248\u672c\u5bf9\u5e94\u5173\u7cfb\u5982\u4e0b\u3002 NebulaGraph\u7248\u672c Dashboard \u7248\u672c 3.5.0 3.4.0 3.4.0 ~ 3.4.1 3.4.0\u30013.2.0 3.3.0 3.2.0 2.5.0 ~ 3.2.0 3.1.0 2.5.x ~ 3.1.0 1.1.1 2.0.1 ~ 2.5.1 1.0.2 2.0.1 ~ 2.5.1 1.0.1 \u66f4\u65b0\u8bf4\u660e \u00b6 Release \u89c6\u9891 \u00b6 NebulaGraph Dashboard Demo \u4ecb\u7ecd\uff08v3.0 \u7248\u672c\uff09 \uff082 \u5206 57 \u79d2\uff09","title":"\u4ec0\u4e48\u662f NebulaGraph Dashboard"},{"location":"nebula-dashboard/1.what-is-dashboard/#nebulagraph_dashboard","text":"NebulaGraph Dashboard\uff08\u7b80\u79f0 Dashboard\uff09\u662f\u4e00\u6b3e\u7528\u4e8e\u76d1\u63a7NebulaGraph\u96c6\u7fa4\u4e2d\u673a\u5668\u548c\u670d\u52a1\u72b6\u6001\u7684\u53ef\u89c6\u5316\u5de5\u5177\u3002 Enterpriseonly \u4f01\u4e1a\u7248\u589e\u52a0\u4e86\u53ef\u89c6\u5316\u521b\u5efa\u96c6\u7fa4\u3001\u6279\u91cf\u5bfc\u5165\u96c6\u7fa4\u3001\u5feb\u901f\u6269\u7f29\u5bb9\u7b49\u529f\u80fd\uff0c\u70b9\u51fb \u5b9a\u4ef7 \u67e5\u770b\u66f4\u591a\u3002\u7528\u6237\u8fd8\u53ef\u4ee5\u5728\u963f\u91cc\u4e91\u4e0a \u514d\u8d39\u8bd5\u7528 \u3002","title":"\u4ec0\u4e48\u662f NebulaGraph Dashboard\uff08\u793e\u533a\u7248\uff09"},{"location":"nebula-dashboard/1.what-is-dashboard/#_1","text":"\u76d1\u63a7\u96c6\u7fa4\u4e2d\u6240\u6709\u673a\u5668\u7684\u72b6\u6001\uff0c\u5305\u62ec CPU\u3001\u5185\u5b58\u3001\u8d1f\u8f7d\u3001\u78c1\u76d8\u548c\u6d41\u91cf\u3002 \u76d1\u63a7\u96c6\u7fa4\u4e2d\u6240\u6709\u670d\u52a1\u7684\u4fe1\u606f\uff0c\u5305\u62ec\u670d\u52a1 IP \u5730\u5740\u3001\u7248\u672c\u548c\u76d1\u63a7\u6307\u6807\uff08\u4f8b\u5982\u67e5\u8be2\u6570\u91cf\u3001\u67e5\u8be2\u5ef6\u8fdf\u3001\u5fc3\u8df3\u5ef6\u8fdf\u7b49\uff09\u3002 \u76d1\u63a7\u96c6\u7fa4\u672c\u8eab\u7684\u4fe1\u606f\uff0c\u5305\u62ec\u96c6\u7fa4\u7684\u670d\u52a1\u4fe1\u606f\u3001\u5206\u533a\u4fe1\u606f\u3001\u914d\u7f6e\u548c\u957f\u65f6\u4efb\u52a1\u3002 \u652f\u6301\u5168\u5c40\u8c03\u6574\u76d1\u63a7\u6570\u636e\u7684\u9875\u9762\u66f4\u65b0\u9891\u7387\u3002","title":"\u4ea7\u54c1\u529f\u80fd"},{"location":"nebula-dashboard/1.what-is-dashboard/#_2","text":"\u5982\u679c\u6709\u4ee5\u4e0b\u4efb\u4e00\u9700\u6c42\uff0c\u90fd\u53ef\u4ee5\u4f7f\u7528 Dashboard\uff1a \u9700\u8981\u65b9\u4fbf\u5feb\u6377\u5730\u76d1\u6d4b\u5173\u952e\u6307\u6807\uff0c\u96c6\u4e2d\u5448\u73b0\u4e1a\u52a1\u7684\u591a\u4e2a\u91cd\u70b9\u4fe1\u606f\uff0c\u4fdd\u8bc1\u4e1a\u52a1\u6b63\u5e38\u8fd0\u884c\u3002 \u9700\u8981\u591a\u7ef4\u5ea6\uff08\u4f8b\u5982\u65f6\u95f4\u6bb5\u3001\u805a\u5408\u89c4\u5219\u3001\u6307\u6807\uff09\u76d1\u63a7\u96c6\u7fa4\u3002 \u6545\u969c\u53d1\u751f\u540e\uff0c\u9700\u8981\u590d\u76d8\u95ee\u9898\uff0c\u786e\u8ba4\u6545\u969c\u53d1\u751f\u65f6\u95f4\u3001\u5f02\u5e38\u73b0\u8c61\u3002","title":"\u9002\u7528\u573a\u666f"},{"location":"nebula-dashboard/1.what-is-dashboard/#_3","text":"\u76d1\u63a7\u6570\u636e\u9ed8\u8ba4\u4fdd\u7559 14 \u5929\uff0c\u5373\u53ea\u80fd\u67e5\u8be2\u6700\u8fd1 14 \u5929\u5185\u4efb\u610f\u65f6\u95f4\u6bb5\u7684\u76d1\u63a7\u6570\u636e\u3002 Note \u76d1\u63a7\u670d\u52a1\u7531 prometheus \u63d0\u4f9b\uff0c\u66f4\u65b0\u9891\u7387\u548c\u4fdd\u7559\u65f6\u95f4\u7b49\u90fd\u53ef\u4ee5\u81ea\u884c\u4fee\u6539\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1 prometheus \u5b98\u65b9\u6587\u6863 \u3002","title":"\u6ce8\u610f\u4e8b\u9879"},{"location":"nebula-dashboard/1.what-is-dashboard/#_4","text":"NebulaGraph\u7684\u7248\u672c\u548c Dashboard \u793e\u533a\u7248\u7684\u7248\u672c\u5bf9\u5e94\u5173\u7cfb\u5982\u4e0b\u3002 NebulaGraph\u7248\u672c Dashboard \u7248\u672c 3.5.0 3.4.0 3.4.0 ~ 3.4.1 3.4.0\u30013.2.0 3.3.0 3.2.0 2.5.0 ~ 3.2.0 3.1.0 2.5.x ~ 3.1.0 1.1.1 2.0.1 ~ 2.5.1 1.0.2 2.0.1 ~ 2.5.1 1.0.1","title":"\u7248\u672c\u517c\u5bb9\u6027"},{"location":"nebula-dashboard/1.what-is-dashboard/#_5","text":"Release","title":"\u66f4\u65b0\u8bf4\u660e"},{"location":"nebula-dashboard/1.what-is-dashboard/#_6","text":"NebulaGraph Dashboard Demo \u4ecb\u7ecd\uff08v3.0 \u7248\u672c\uff09 \uff082 \u5206 57 \u79d2\uff09","title":"\u89c6\u9891"},{"location":"nebula-dashboard/2.deploy-dashboard/","text":"\u90e8\u7f72 Dashboard \u793e\u533a\u7248 \u00b6 \u672c\u6587\u5c06\u4ecb\u7ecd\u5982\u4f55\u901a\u8fc7 TAR \u5305\u5b89\u88c5\u90e8\u7f72 NebulaGraph Dashboard\u3002 \u4e0b\u8f7d\u548c\u7f16\u8bd1 Dashboard \u7684\u6700\u65b0\u6e90\u7801\uff0c\u53c2\u89c1 GitHub NebulaGraph dashboard \u9875\u9762\u7684\u8bf4\u660e\u3002 \u524d\u63d0\u6761\u4ef6 \u00b6 \u5728\u90e8\u7f72 Dashboard \u4e4b\u524d\uff0c\u7528\u6237\u9700\u8981\u786e\u8ba4\u4ee5\u4e0b\u4fe1\u606f\uff1a NebulaGraph\u670d\u52a1\u5df2\u7ecf\u90e8\u7f72\u5e76\u542f\u52a8\u3002\u8be6\u7ec6\u4fe1\u606f\u53c2\u8003 NebulaGraph\u5b89\u88c5\u90e8\u7f72 \u3002 \u786e\u4fdd\u4ee5\u4e0b\u7aef\u53e3\u672a\u88ab\u4f7f\u7528\uff1a 9200 9100 9090 8090 7003 \u5f85\u76d1\u63a7\u7684\u673a\u5668\u4e0a\u5df2\u7ecf\u5b89\u88c5 node-exporter\u3002\u5b89\u88c5\u65b9\u6cd5\u8bf7\u53c2\u89c1 Prometheus \u5b98\u65b9\u6587\u6863 \u3002 \u64cd\u4f5c\u6b65\u9aa4 \u00b6 \u4e0b\u8f7d TAR \u5305 nebula-dashboard-3.4.0.x86_64.tar.gz \u3002 \u6267\u884c\u547d\u4ee4 tar -xvf nebula-dashboard-3.4.0.x86_64.tar.gz \u89e3\u538b\u7f29\u3002 \u8fdb\u5165\u89e3\u538b\u7f29\u7684 nebula-dashboard \u6587\u4ef6\u5939\uff0c\u5e76\u4fee\u6539\u914d\u7f6e\u6587\u4ef6 config.yaml \u3002 \u914d\u7f6e\u6587\u4ef6\u5185\u4e3b\u8981\u5305\u542b 4 \u79cd\u4f9d\u8d56\u670d\u52a1\u7684\u914d\u7f6e\u548c\u96c6\u7fa4\u7684\u914d\u7f6e\u3002\u4f9d\u8d56\u670d\u52a1\u7684\u8bf4\u660e\u5982\u4e0b\u3002 \u670d\u52a1\u540d\u79f0 \u9ed8\u8ba4\u7aef\u53e3\u53f7 \u8bf4\u660e nebula-http-gateway 8090 \u4e3a\u96c6\u7fa4\u670d\u52a1\u63d0\u4f9b HTTP \u63a5\u53e3\uff0c\u6267\u884c nGQL \u8bed\u53e5\u4e0eNebulaGraph\u8fdb\u884c\u4ea4\u4e92\u3002 nebula-stats-exporter 9200 \u6536\u96c6\u96c6\u7fa4\u7684\u6027\u80fd\u6307\u6807\uff0c\u5305\u62ec\u670d\u52a1 IP \u5730\u5740\u3001\u7248\u672c\u548c\u76d1\u63a7\u6307\u6807\uff08\u4f8b\u5982\u67e5\u8be2\u6570\u91cf\u3001\u67e5\u8be2\u5ef6\u8fdf\u3001\u5fc3\u8df3\u5ef6\u8fdf \u7b49\uff09\u3002 node-exporter 9100 \u6536\u96c6\u96c6\u7fa4\u4e2d\u673a\u5668\u7684\u8d44\u6e90\u4fe1\u606f\uff0c\u5305\u62ec CPU\u3001\u5185\u5b58\u3001\u8d1f\u8f7d\u3001\u78c1\u76d8\u548c\u6d41\u91cf\u3002 prometheus 9090 \u5b58\u50a8\u76d1\u63a7\u6570\u636e\u7684\u65f6\u95f4\u5e8f\u5217\u6570\u636e\u5e93\u3002 \u914d\u7f6e\u6587\u4ef6\u8bf4\u660e\u5982\u4e0b\u3002 port : 7003 # Web \u670d\u52a1\u7aef\u53e3\u3002 gateway : ip : hostIP # \u90e8\u7f72 Dashboard \u7684\u673a\u5668 IP\u3002 port : 8090 https : false # \u662f\u5426\u4e3a HTTPS \u7aef\u53e3\u3002 runmode : dev # \u7a0b\u5e8f\u8fd0\u884c\u6a21\u5f0f\uff0c\u5305\u62ec dev\u3001test\u3001prod\u3002\u4e00\u822c\u7528\u4e8e\u533a\u5206\u4e0d\u540c\u8fd0\u884c\u73af\u5883\u3002 stats-exporter : ip : hostIP # \u90e8\u7f72 Dashboard \u7684\u673a\u5668 IP\u3002 nebulaPort : 9200 https : false # \u662f\u5426\u4e3a HTTPS \u7aef\u53e3\u3002 node-exporter : - ip : nebulaHostIP_1 # \u90e8\u7f72NebulaGraph\u7684\u673a\u5668 IP\u3002 port : 9100 https : false # \u662f\u5426\u4e3a HTTPS \u7aef\u53e3\u3002 # - ip: nebulaHostIP_2 # port: 9100 # https: false prometheus : ip : hostIP # \u90e8\u7f72 Dashboard \u7684\u673a\u5668 IP\u3002 prometheusPort : 9090 https : false # \u662f\u5426\u4e3a HTTPS \u7aef\u53e3\u3002 scrape_interval : 5s # \u6536\u96c6\u76d1\u63a7\u6570\u636e\u7684\u95f4\u9694\u65f6\u95f4\u3002\u9ed8\u8ba4\u4e3a 1 \u5206\u949f\u3002 evaluation_interval : 5s # \u544a\u8b66\u89c4\u5219\u626b\u63cf\u65f6\u95f4\u95f4\u9694\u3002\u9ed8\u8ba4\u4e3a 1 \u5206\u949f\u3002 # \u96c6\u7fa4\u8282\u70b9\u4fe1\u606f nebula-cluster : name : 'default' # \u96c6\u7fa4\u540d\u79f0 metad : - name : metad0 endpointIP : nebulaMetadIP # \u90e8\u7f72 Meta \u670d\u52a1\u7684\u673a\u5668 IP\u3002 port : 9559 endpointPort : 19559 # - name: metad1 # endpointIP: nebulaMetadIP # port: 9559 # endpointPort: 19559 graphd : - name : graphd0 endpointIP : GraphdIP # \u90e8\u7f72 Graph \u670d\u52a1\u7684\u673a\u5668 IP\u3002 port : 9669 endpointPort : 19669 # - name: graphd1 # endpointIP: GraphdIP # port: 9669 # endpointPort: 19669 storaged : - name : storaged0 endpointIP : StoragedIP # \u90e8\u7f72 Storage \u670d\u52a1\u7684\u673a\u5668 IP\u3002 port : 9779 endpointPort : 19779 # - name: storaged1 # endpointIP: StoragedIP # port: 9779 # endpointPort: 19779 \u6267\u884c ./dashboard.service start all \u4e00\u952e\u542f\u52a8\u670d\u52a1\u3002 \u5bb9\u5668\u90e8\u7f72 \u00b6 \u5982\u679c\u4f7f\u7528\u5bb9\u5668\u90e8\u7f72 Dashboard\uff0c\u540c\u6837\u662f\u4fee\u6539\u914d\u7f6e\u6587\u4ef6 config.yaml \uff0c\u4fee\u6539\u5b8c\u6210\u540e\uff0c\u6267\u884c docker-compose up -d \u5373\u53ef\u542f\u52a8\u5bb9\u5668\u3002 Note \u5982\u679c\u4fee\u6539\u4e86 config.yaml \u5185\u7684\u7aef\u53e3\u53f7\uff0c docker-compose.yaml \u91cc\u7684\u7aef\u53e3\u53f7\u4e5f\u9700\u8981\u4fdd\u6301\u4e00\u81f4\u3002 \u6267\u884c docker-compose stop \u547d\u4ee4\u505c\u6b62\u5bb9\u5668\u90e8\u7f72\u7684 Dashboard\u3002 \u7ba1\u7406 Dashboard \u670d\u52a1 \u00b6 Dashboard \u4f7f\u7528\u811a\u672c dashboard.service \u7ba1\u7406\u670d\u52a1\uff0c\u5305\u62ec\u542f\u52a8\u3001\u91cd\u542f\u3001\u505c\u6b62\u548c\u67e5\u770b\u72b6\u6001\u3002 sudo <dashboard_path>/dashboard.service [ -v ] [ -h ] <start | restart | stop | status> <prometheus | webserver | exporter | gateway | all> \u53c2\u6570 \u8bf4\u660e dashboard_path Dashboard \u5b89\u88c5\u8def\u5f84\u3002 -v \u663e\u793a\u8be6\u7ec6\u8c03\u8bd5\u4fe1\u606f\u3002 -h \u663e\u793a\u5e2e\u52a9\u4fe1\u606f\u3002 start \u542f\u52a8\u670d\u52a1\u3002 restart \u91cd\u542f\u670d\u52a1\u3002 stop \u505c\u6b62\u670d\u52a1\u3002 status \u67e5\u770b\u670d\u52a1\u72b6\u6001\u3002 prometheus \u7ba1\u7406 prometheus \u670d\u52a1\u3002 webserver \u7ba1\u7406 webserver \u670d\u52a1\u3002 exporter \u7ba1\u7406 exporter \u670d\u52a1\u3002 gateway \u7ba1\u7406 gateway \u670d\u52a1\u3002 all \u7ba1\u7406\u6240\u6709\u670d\u52a1\u3002 Note \u67e5\u770b Dashboard \u7248\u672c\u53ef\u4ee5\u4f7f\u7528\u547d\u4ee4 ./dashboard.service -version \u3002 \u540e\u7eed\u64cd\u4f5c \u00b6 \u8fde\u63a5 Dashboard","title":"\u90e8\u7f72 Dashboard"},{"location":"nebula-dashboard/2.deploy-dashboard/#dashboard","text":"\u672c\u6587\u5c06\u4ecb\u7ecd\u5982\u4f55\u901a\u8fc7 TAR \u5305\u5b89\u88c5\u90e8\u7f72 NebulaGraph Dashboard\u3002 \u4e0b\u8f7d\u548c\u7f16\u8bd1 Dashboard \u7684\u6700\u65b0\u6e90\u7801\uff0c\u53c2\u89c1 GitHub NebulaGraph dashboard \u9875\u9762\u7684\u8bf4\u660e\u3002","title":"\u90e8\u7f72 Dashboard \u793e\u533a\u7248"},{"location":"nebula-dashboard/2.deploy-dashboard/#_1","text":"\u5728\u90e8\u7f72 Dashboard \u4e4b\u524d\uff0c\u7528\u6237\u9700\u8981\u786e\u8ba4\u4ee5\u4e0b\u4fe1\u606f\uff1a NebulaGraph\u670d\u52a1\u5df2\u7ecf\u90e8\u7f72\u5e76\u542f\u52a8\u3002\u8be6\u7ec6\u4fe1\u606f\u53c2\u8003 NebulaGraph\u5b89\u88c5\u90e8\u7f72 \u3002 \u786e\u4fdd\u4ee5\u4e0b\u7aef\u53e3\u672a\u88ab\u4f7f\u7528\uff1a 9200 9100 9090 8090 7003 \u5f85\u76d1\u63a7\u7684\u673a\u5668\u4e0a\u5df2\u7ecf\u5b89\u88c5 node-exporter\u3002\u5b89\u88c5\u65b9\u6cd5\u8bf7\u53c2\u89c1 Prometheus \u5b98\u65b9\u6587\u6863 \u3002","title":"\u524d\u63d0\u6761\u4ef6"},{"location":"nebula-dashboard/2.deploy-dashboard/#_2","text":"\u4e0b\u8f7d TAR \u5305 nebula-dashboard-3.4.0.x86_64.tar.gz \u3002 \u6267\u884c\u547d\u4ee4 tar -xvf nebula-dashboard-3.4.0.x86_64.tar.gz \u89e3\u538b\u7f29\u3002 \u8fdb\u5165\u89e3\u538b\u7f29\u7684 nebula-dashboard \u6587\u4ef6\u5939\uff0c\u5e76\u4fee\u6539\u914d\u7f6e\u6587\u4ef6 config.yaml \u3002 \u914d\u7f6e\u6587\u4ef6\u5185\u4e3b\u8981\u5305\u542b 4 \u79cd\u4f9d\u8d56\u670d\u52a1\u7684\u914d\u7f6e\u548c\u96c6\u7fa4\u7684\u914d\u7f6e\u3002\u4f9d\u8d56\u670d\u52a1\u7684\u8bf4\u660e\u5982\u4e0b\u3002 \u670d\u52a1\u540d\u79f0 \u9ed8\u8ba4\u7aef\u53e3\u53f7 \u8bf4\u660e nebula-http-gateway 8090 \u4e3a\u96c6\u7fa4\u670d\u52a1\u63d0\u4f9b HTTP \u63a5\u53e3\uff0c\u6267\u884c nGQL \u8bed\u53e5\u4e0eNebulaGraph\u8fdb\u884c\u4ea4\u4e92\u3002 nebula-stats-exporter 9200 \u6536\u96c6\u96c6\u7fa4\u7684\u6027\u80fd\u6307\u6807\uff0c\u5305\u62ec\u670d\u52a1 IP \u5730\u5740\u3001\u7248\u672c\u548c\u76d1\u63a7\u6307\u6807\uff08\u4f8b\u5982\u67e5\u8be2\u6570\u91cf\u3001\u67e5\u8be2\u5ef6\u8fdf\u3001\u5fc3\u8df3\u5ef6\u8fdf \u7b49\uff09\u3002 node-exporter 9100 \u6536\u96c6\u96c6\u7fa4\u4e2d\u673a\u5668\u7684\u8d44\u6e90\u4fe1\u606f\uff0c\u5305\u62ec CPU\u3001\u5185\u5b58\u3001\u8d1f\u8f7d\u3001\u78c1\u76d8\u548c\u6d41\u91cf\u3002 prometheus 9090 \u5b58\u50a8\u76d1\u63a7\u6570\u636e\u7684\u65f6\u95f4\u5e8f\u5217\u6570\u636e\u5e93\u3002 \u914d\u7f6e\u6587\u4ef6\u8bf4\u660e\u5982\u4e0b\u3002 port : 7003 # Web \u670d\u52a1\u7aef\u53e3\u3002 gateway : ip : hostIP # \u90e8\u7f72 Dashboard \u7684\u673a\u5668 IP\u3002 port : 8090 https : false # \u662f\u5426\u4e3a HTTPS \u7aef\u53e3\u3002 runmode : dev # \u7a0b\u5e8f\u8fd0\u884c\u6a21\u5f0f\uff0c\u5305\u62ec dev\u3001test\u3001prod\u3002\u4e00\u822c\u7528\u4e8e\u533a\u5206\u4e0d\u540c\u8fd0\u884c\u73af\u5883\u3002 stats-exporter : ip : hostIP # \u90e8\u7f72 Dashboard \u7684\u673a\u5668 IP\u3002 nebulaPort : 9200 https : false # \u662f\u5426\u4e3a HTTPS \u7aef\u53e3\u3002 node-exporter : - ip : nebulaHostIP_1 # \u90e8\u7f72NebulaGraph\u7684\u673a\u5668 IP\u3002 port : 9100 https : false # \u662f\u5426\u4e3a HTTPS \u7aef\u53e3\u3002 # - ip: nebulaHostIP_2 # port: 9100 # https: false prometheus : ip : hostIP # \u90e8\u7f72 Dashboard \u7684\u673a\u5668 IP\u3002 prometheusPort : 9090 https : false # \u662f\u5426\u4e3a HTTPS \u7aef\u53e3\u3002 scrape_interval : 5s # \u6536\u96c6\u76d1\u63a7\u6570\u636e\u7684\u95f4\u9694\u65f6\u95f4\u3002\u9ed8\u8ba4\u4e3a 1 \u5206\u949f\u3002 evaluation_interval : 5s # \u544a\u8b66\u89c4\u5219\u626b\u63cf\u65f6\u95f4\u95f4\u9694\u3002\u9ed8\u8ba4\u4e3a 1 \u5206\u949f\u3002 # \u96c6\u7fa4\u8282\u70b9\u4fe1\u606f nebula-cluster : name : 'default' # \u96c6\u7fa4\u540d\u79f0 metad : - name : metad0 endpointIP : nebulaMetadIP # \u90e8\u7f72 Meta \u670d\u52a1\u7684\u673a\u5668 IP\u3002 port : 9559 endpointPort : 19559 # - name: metad1 # endpointIP: nebulaMetadIP # port: 9559 # endpointPort: 19559 graphd : - name : graphd0 endpointIP : GraphdIP # \u90e8\u7f72 Graph \u670d\u52a1\u7684\u673a\u5668 IP\u3002 port : 9669 endpointPort : 19669 # - name: graphd1 # endpointIP: GraphdIP # port: 9669 # endpointPort: 19669 storaged : - name : storaged0 endpointIP : StoragedIP # \u90e8\u7f72 Storage \u670d\u52a1\u7684\u673a\u5668 IP\u3002 port : 9779 endpointPort : 19779 # - name: storaged1 # endpointIP: StoragedIP # port: 9779 # endpointPort: 19779 \u6267\u884c ./dashboard.service start all \u4e00\u952e\u542f\u52a8\u670d\u52a1\u3002","title":"\u64cd\u4f5c\u6b65\u9aa4"},{"location":"nebula-dashboard/2.deploy-dashboard/#_3","text":"\u5982\u679c\u4f7f\u7528\u5bb9\u5668\u90e8\u7f72 Dashboard\uff0c\u540c\u6837\u662f\u4fee\u6539\u914d\u7f6e\u6587\u4ef6 config.yaml \uff0c\u4fee\u6539\u5b8c\u6210\u540e\uff0c\u6267\u884c docker-compose up -d \u5373\u53ef\u542f\u52a8\u5bb9\u5668\u3002 Note \u5982\u679c\u4fee\u6539\u4e86 config.yaml \u5185\u7684\u7aef\u53e3\u53f7\uff0c docker-compose.yaml \u91cc\u7684\u7aef\u53e3\u53f7\u4e5f\u9700\u8981\u4fdd\u6301\u4e00\u81f4\u3002 \u6267\u884c docker-compose stop \u547d\u4ee4\u505c\u6b62\u5bb9\u5668\u90e8\u7f72\u7684 Dashboard\u3002","title":"\u5bb9\u5668\u90e8\u7f72"},{"location":"nebula-dashboard/2.deploy-dashboard/#dashboard_1","text":"Dashboard \u4f7f\u7528\u811a\u672c dashboard.service \u7ba1\u7406\u670d\u52a1\uff0c\u5305\u62ec\u542f\u52a8\u3001\u91cd\u542f\u3001\u505c\u6b62\u548c\u67e5\u770b\u72b6\u6001\u3002 sudo <dashboard_path>/dashboard.service [ -v ] [ -h ] <start | restart | stop | status> <prometheus | webserver | exporter | gateway | all> \u53c2\u6570 \u8bf4\u660e dashboard_path Dashboard \u5b89\u88c5\u8def\u5f84\u3002 -v \u663e\u793a\u8be6\u7ec6\u8c03\u8bd5\u4fe1\u606f\u3002 -h \u663e\u793a\u5e2e\u52a9\u4fe1\u606f\u3002 start \u542f\u52a8\u670d\u52a1\u3002 restart \u91cd\u542f\u670d\u52a1\u3002 stop \u505c\u6b62\u670d\u52a1\u3002 status \u67e5\u770b\u670d\u52a1\u72b6\u6001\u3002 prometheus \u7ba1\u7406 prometheus \u670d\u52a1\u3002 webserver \u7ba1\u7406 webserver \u670d\u52a1\u3002 exporter \u7ba1\u7406 exporter \u670d\u52a1\u3002 gateway \u7ba1\u7406 gateway \u670d\u52a1\u3002 all \u7ba1\u7406\u6240\u6709\u670d\u52a1\u3002 Note \u67e5\u770b Dashboard \u7248\u672c\u53ef\u4ee5\u4f7f\u7528\u547d\u4ee4 ./dashboard.service -version \u3002","title":"\u7ba1\u7406 Dashboard \u670d\u52a1"},{"location":"nebula-dashboard/2.deploy-dashboard/#_4","text":"\u8fde\u63a5 Dashboard","title":"\u540e\u7eed\u64cd\u4f5c"},{"location":"nebula-dashboard/3.connect-dashboard/","text":"\u8fde\u63a5 Dashboard \u00b6 Dashboard \u90e8\u7f72\u5b8c\u6210\u540e\uff0c\u53ef\u4ee5\u901a\u8fc7\u6d4f\u89c8\u5668\u767b\u5f55\u4f7f\u7528 Dashboard\u3002 \u524d\u63d0\u6761\u4ef6 \u00b6 Dashboard \u76f8\u5173\u670d\u52a1\u5df2\u7ecf\u542f\u52a8\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1 \u90e8\u7f72 Dashboard \u3002 \u5efa\u8bae\u4f7f\u7528 Chrome 89 \u53ca\u4ee5\u4e0a\u7684\u7248\u672c\u7684 Chrome \u6d4f\u89c8\u5668\uff0c\u5426\u5219\u53ef\u80fd\u6709\u517c\u5bb9\u95ee\u9898\u3002 \u64cd\u4f5c\u6b65\u9aa4 \u00b6 \u786e\u8ba4 Dashboard \u670d\u52a1\u6240\u5728\u673a\u5668\u7684 IP \u5730\u5740\uff0c\u5728\u6d4f\u89c8\u5668\u4e2d\u8f93\u5165 <IP>:7003 \u6253\u5f00\u767b\u5f55\u9875\u9762\u3002 \u8f93\u5165NebulaGraph\u6570\u636e\u5e93\u7684\u8d26\u53f7\u548c\u5bc6\u7801\u3002 \u5982\u679cNebulaGraph\u5df2\u7ecf\u542f\u7528\u8eab\u4efd\u9a8c\u8bc1\uff0c\u7528\u6237\u53ef\u4ee5\u4f7f\u7528\u5df2\u521b\u5efa\u7684\u8d26\u53f7\u8fde\u63a5 Dashboard\u3002 \u5982\u679cNebulaGraph\u672a\u542f\u7528\u8eab\u4efd\u9a8c\u8bc1\uff0c\u7528\u6237\u53ea\u80fd\u4f7f\u7528\u9ed8\u8ba4\u7528\u6237 root \u548c\u4efb\u610f\u5bc6\u7801\u8fde\u63a5 Dashboard\u3002 \u6709\u5173\u5982\u4f55\u542f\u7528\u8eab\u4efd\u9a8c\u8bc1\u8bf7\u53c2\u89c1 \u8eab\u4efd\u9a8c\u8bc1 \u3002 \u5355\u51fb \u767b\u5f55 \u3002","title":"\u8fde\u63a5 Dashboard"},{"location":"nebula-dashboard/3.connect-dashboard/#dashboard","text":"Dashboard \u90e8\u7f72\u5b8c\u6210\u540e\uff0c\u53ef\u4ee5\u901a\u8fc7\u6d4f\u89c8\u5668\u767b\u5f55\u4f7f\u7528 Dashboard\u3002","title":"\u8fde\u63a5 Dashboard"},{"location":"nebula-dashboard/3.connect-dashboard/#_1","text":"Dashboard \u76f8\u5173\u670d\u52a1\u5df2\u7ecf\u542f\u52a8\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1 \u90e8\u7f72 Dashboard \u3002 \u5efa\u8bae\u4f7f\u7528 Chrome 89 \u53ca\u4ee5\u4e0a\u7684\u7248\u672c\u7684 Chrome \u6d4f\u89c8\u5668\uff0c\u5426\u5219\u53ef\u80fd\u6709\u517c\u5bb9\u95ee\u9898\u3002","title":"\u524d\u63d0\u6761\u4ef6"},{"location":"nebula-dashboard/3.connect-dashboard/#_2","text":"\u786e\u8ba4 Dashboard \u670d\u52a1\u6240\u5728\u673a\u5668\u7684 IP \u5730\u5740\uff0c\u5728\u6d4f\u89c8\u5668\u4e2d\u8f93\u5165 <IP>:7003 \u6253\u5f00\u767b\u5f55\u9875\u9762\u3002 \u8f93\u5165NebulaGraph\u6570\u636e\u5e93\u7684\u8d26\u53f7\u548c\u5bc6\u7801\u3002 \u5982\u679cNebulaGraph\u5df2\u7ecf\u542f\u7528\u8eab\u4efd\u9a8c\u8bc1\uff0c\u7528\u6237\u53ef\u4ee5\u4f7f\u7528\u5df2\u521b\u5efa\u7684\u8d26\u53f7\u8fde\u63a5 Dashboard\u3002 \u5982\u679cNebulaGraph\u672a\u542f\u7528\u8eab\u4efd\u9a8c\u8bc1\uff0c\u7528\u6237\u53ea\u80fd\u4f7f\u7528\u9ed8\u8ba4\u7528\u6237 root \u548c\u4efb\u610f\u5bc6\u7801\u8fde\u63a5 Dashboard\u3002 \u6709\u5173\u5982\u4f55\u542f\u7528\u8eab\u4efd\u9a8c\u8bc1\u8bf7\u53c2\u89c1 \u8eab\u4efd\u9a8c\u8bc1 \u3002 \u5355\u51fb \u767b\u5f55 \u3002","title":"\u64cd\u4f5c\u6b65\u9aa4"},{"location":"nebula-dashboard/4.use-dashboard/","text":"Dashboard \u9875\u9762\u4ecb\u7ecd \u00b6 Dashboard \u9875\u9762\u4e3b\u8981\u5206\u4e3a\u673a\u5668\u3001\u670d\u52a1\u3001\u7ba1\u7406\u4e09\u4e2a\u90e8\u5206\uff0c\u672c\u6587\u5c06\u8be6\u7ec6\u4ecb\u7ecd\u8fd9\u4e9b\u754c\u9762\u3002 \u9875\u9762\u6982\u89c8 \u00b6 \u673a\u5668\u9875\u9762\u4ecb\u7ecd \u00b6 \u5355\u51fb \u673a\u5668 -> \u6982\u89c8 \u8fdb\u5165\u673a\u5668\u6982\u89c8\u9875\u9762\u3002 \u7528\u6237\u53ef\u5feb\u901f\u67e5\u770b CPU\u3001Memory\u3001Load\u3001Disk \u548c Network In/Out \u53d8\u5316\u60c5\u51b5\u3002 \u9ed8\u8ba4\u6700\u591a\u53ef\u9009\u62e9 14 \u5929\u7684\u76d1\u63a7\u6570\u636e\u8fdb\u884c\u67e5\u770b\uff0c\u652f\u6301\u9009\u62e9\u65f6\u95f4\u6bb5\uff0c\u4e5f\u53ef\u4ee5\u5feb\u6377\u9009\u62e9\u6700\u8fd1 1 \u5c0f\u65f6\u30016 \u5c0f\u65f6\u300112 \u5c0f\u65f6\u30011 \u5929\u30013 \u5929\u30017 \u5929\u548c 14 \u5929\u3002 \u9ed8\u8ba4\u52fe\u9009\u663e\u793a\u6240\u6709\u5b9e\u4f8b\u7684\u76d1\u63a7\u6570\u636e\uff0c\u53ef\u4ee5\u5728 \u5b9e\u4f8b \u6846\u5185\u8c03\u6574\u3002 \u9875\u9762\u7684\u76d1\u63a7\u6570\u636e\u9ed8\u8ba4\u4e0d\u81ea\u52a8\u66f4\u65b0\uff0c\u53ef\u4ee5\u8c03\u6574 \u66f4\u65b0\u9891\u7387 \u8ba9\u9875\u9762\u81ea\u52a8\u66f4\u65b0\uff0c\u4e5f\u53ef\u4ee5\u5355\u51fb \u6309\u94ae\u624b\u52a8\u66f4\u65b0\u3002 \u5982\u679c\u9700\u8981\u8bbe\u7f6e\u57fa\u7ebf\uff0c\u4f5c\u4e3a\u53c2\u8003\u6807\u51c6\u7ebf\uff0c\u53ef\u4ee5\u5355\u51fb\u6a21\u5757\u53f3\u4e0a\u89d2\u7684 \u6309\u94ae\u3002 \u5982\u679c\u9700\u8981\u67e5\u770b\u67d0\u4e00\u9879\u66f4\u8be6\u7ec6\u7684\u76d1\u63a7\u6307\u6807\uff0c\u53ef\u4ee5\u5355\u51fb\u6a21\u5757\u53f3\u4e0a\u89d2\u7684 \u6309\u94ae\uff0c\u5728\u793a\u4f8b\u4e2d\u9009\u62e9 Load \u67e5\u770b\u8be6\u60c5\u4fe1\u606f\uff0c\u5982\u4e0b\u56fe\u3002 \u53ef\u4ee5\u8bbe\u7f6e\u76d1\u63a7\u65f6\u95f4\u6bb5\u3001\u5b9e\u4f8b\u3001\u66f4\u65b0\u9891\u7387\u548c\u57fa\u7ebf\u3002 \u53ef\u4ee5\u641c\u7d22\u548c\u52fe\u9009\u6307\u6807\u3002\u76d1\u63a7\u6307\u6807\u8be6\u60c5\u8bf7\u53c2\u89c1 \u76d1\u63a7\u6307\u6807\u8bf4\u660e \u3002 \u53ef\u4ee5\u6682\u65f6\u9690\u85cf\u4e0d\u9700\u8981\u67e5\u770b\u7684\u8282\u70b9\u3002 \u53ef\u4ee5\u5355\u51fb \u6309\u94ae\u67e5\u770b\u6307\u6807\u8be6\u60c5\u3002 \u670d\u52a1\u9875\u9762\u4ecb\u7ecd \u00b6 \u5355\u51fb \u670d\u52a1 -> \u6982\u89c8 \u8fdb\u5165\u670d\u52a1\u6982\u89c8\u9875\u9762\u3002 \u7528\u6237\u53ef\u5feb\u901f\u67e5\u770b Graph\u3001Meta\u3001Storage \u670d\u52a1\u7684\u4fe1\u606f\u3002 Note \u670d\u52a1\u76d1\u63a7\u9875\u4ec5\u652f\u6301\u6bcf\u79cd\u670d\u52a1\u8bbe\u7f6e\u4e24\u4e2a\u76d1\u63a7\u6307\u6807\uff0c\u53ef\u4ee5\u5355\u51fb\u6a21\u5757\u5185\u7684\u8bbe\u7f6e\u6309\u94ae\u8fdb\u884c\u8c03\u6574\u3002 \u9ed8\u8ba4\u6700\u591a\u53ef\u9009\u62e9 14 \u5929\u7684\u76d1\u63a7\u6570\u636e\u8fdb\u884c\u67e5\u770b\uff0c\u652f\u6301\u9009\u62e9\u65f6\u95f4\u6bb5\uff0c\u4e5f\u53ef\u4ee5\u5feb\u6377\u9009\u62e9\u6700\u8fd1 1 \u5c0f\u65f6\u30016 \u5c0f\u65f6\u300112 \u5c0f\u65f6\u30011 \u5929\u30013 \u5929\u30017 \u5929\u548c 14 \u5929\u3002 \u9ed8\u8ba4\u52fe\u9009\u663e\u793a\u6240\u6709\u5b9e\u4f8b\u7684\u76d1\u63a7\u6570\u636e\uff0c\u53ef\u4ee5\u5728 \u5b9e\u4f8b \u6846\u5185\u8c03\u6574\u3002 \u9875\u9762\u7684\u76d1\u63a7\u6570\u636e\u9ed8\u8ba4\u4e0d\u81ea\u52a8\u66f4\u65b0\uff0c\u53ef\u4ee5\u8c03\u6574 \u66f4\u65b0\u9891\u7387 \u8ba9\u9875\u9762\u81ea\u52a8\u66f4\u65b0\uff0c\u4e5f\u53ef\u4ee5\u5355\u51fb \u6309\u94ae\u624b\u52a8\u66f4\u65b0\u3002 \u53ef\u4ee5\u67e5\u770b\u96c6\u7fa4\u5185\u6240\u6709\u670d\u52a1\u7684\u72b6\u6001\u3002 \u5982\u679c\u9700\u8981\u67e5\u770b\u67d0\u4e00\u9879\u66f4\u8be6\u7ec6\u7684\u76d1\u63a7\u6307\u6807\uff0c\u53ef\u4ee5\u5355\u51fb\u6a21\u5757\u53f3\u4e0a\u89d2\u7684 \u6309\u94ae\uff0c\u5728\u793a\u4f8b\u4e2d\u9009\u62e9 Graph \u67e5\u770b\u8be6\u60c5\u4fe1\u606f\uff0c\u5982\u4e0b\u56fe\u3002 \u53ef\u4ee5\u8bbe\u7f6e\u76d1\u63a7\u65f6\u95f4\u6bb5\u3001\u5b9e\u4f8b\u3001\u66f4\u65b0\u9891\u7387\u3001\u5468\u671f\u3001\u805a\u5408\u65b9\u5f0f\u548c\u57fa\u7ebf\u3002 \u53ef\u4ee5\u641c\u7d22\u548c\u52fe\u9009\u6307\u6807\u3002\u76d1\u63a7\u6307\u6807\u8be6\u60c5\u8bf7\u53c2\u89c1 \u76d1\u63a7\u6307\u6807\u8bf4\u660e \u3002 \u53ef\u4ee5\u6682\u65f6\u9690\u85cf\u4e0d\u9700\u8981\u67e5\u770b\u7684\u8282\u70b9\u3002 \u53ef\u4ee5\u5355\u51fb \u6309\u94ae\u67e5\u770b\u6307\u6807\u8be6\u60c5\u3002 Graph \u670d\u52a1\u652f\u6301\u4e00\u7cfb\u5217\u57fa\u4e8e\u56fe\u7a7a\u95f4\u7684\u76d1\u63a7\u6307\u6807\u3002\u8be6\u60c5\u53c2\u89c1\u4e0b\u6587 \u56fe\u7a7a\u95f4\u76d1\u63a7 \u3002 \u56fe\u7a7a\u95f4\u76d1\u63a7 \u00b6 Caution \u4f7f\u7528\u56fe\u7a7a\u95f4\u6307\u6807\u524d\uff0c\u7528\u6237\u9700\u8981\u5728 Graph \u670d\u52a1\u4e2d\uff0c\u8bbe\u7f6e enable_space_level_metrics \u4e3a true \u3002\u5177\u4f53\u64cd\u4f5c\uff0c\u53c2\u89c1 Graph \u670d\u52a1\u914d\u7f6e \u3002 \u56fe\u76d1\u63a7\u6307\u6807\u4e0d\u517c\u5bb9\u6027 \u5982\u679c\u56fe\u7a7a\u95f4\u7684\u540d\u79f0\u5305\u62ec\u7279\u6b8a\u5b57\u7b26\uff0c\u53ef\u80fd\u4f1a\u6709\u56fe\u7a7a\u95f4\u76d1\u63a7\u6307\u6807\u6570\u636e\u4e0d\u663e\u793a\u7684\u95ee\u9898\u3002 \u670d\u52a1\u76d1\u63a7\u9875\u9762\u8fd8\u53ef\u4ee5\u76d1\u63a7\u56fe\u7a7a\u95f4\u7ea7\u522b\u6307\u6807\u3002 \u53ea\u6709\u5f53\u56fe\u7a7a\u95f4\u6307\u6807\u7684\u884c\u4e3a\u88ab\u89e6\u53d1\u540e\uff0c\u7528\u6237\u624d\u80fd\u6307\u5b9a\u56fe\u7a7a\u95f4\u67e5\u770b\u5bf9\u5e94\u7684\u56fe\u7a7a\u95f4\u6307\u6807\u7684\u4fe1\u606f \u3002\u56fe\u7a7a\u95f4\u7684\u76d1\u63a7\u6307\u6807\u8bb0\u5f55\u4e0d\u540c\u56fe\u7a7a\u95f4\u7684\u6570\u636e\u3002\u76ee\u524d\uff0c\u53ea\u6709 Graph \u670d\u52a1\u652f\u6301\u57fa\u4e8e\u56fe\u7a7a\u95f4\u7684\u76d1\u63a7\u6307\u6807\u3002 Dashboard \u652f\u6301\u7684\u56fe\u7a7a\u95f4\u6307\u6807\uff0c\u53c2\u89c1 \u56fe\u7a7a\u95f4\u7ea7\u522b\u76d1\u63a7\u6307\u6807 \u3002 \u7ba1\u7406\u9875\u9762\u4ecb\u7ecd \u00b6 \u4fe1\u606f\u603b\u89c8 \u00b6 \u7528\u6237\u53ef\u4ee5\u5728 \u4fe1\u606f\u603b\u89c8 \u9875\u9762\u67e5\u770bNebulaGraph\u5185\u6838\u76f8\u5173\u4fe1\u606f\uff0c\u5305\u62ec Storage \u670d\u52a1\u4fe1\u606f\u3001Storage Leader \u5206\u5e03\u3001NebulaGraph\u5404\u4e2a\u670d\u52a1\u7684\u7248\u672c\u4fe1\u606f\u53ca\u6240\u5728\u8282\u70b9\u4fe1\u606f\u3001\u5206\u7247\u7684\u5206\u5e03\u60c5\u51b5\u53ca\u8be6\u7ec6\u4fe1\u606f\u3002 Storage Leader \u5206\u5e03 \u00b6 \u663e\u793a Leader \u6570\u91cf\u53ca Leader \u7684\u5206\u5e03\u3002 \u5355\u51fb\u53f3\u4e0a\u89d2\u7684 Balance Leader \u6309\u94ae\u53ef\u4ee5\u5feb\u901f\u5728NebulaGraph\u96c6\u7fa4\u4e2d\u5747\u8861\u5206\u5e03 Leader\u3002\u5173\u4e8e Leader \u7684\u8be6\u7ec6\u4fe1\u606f\uff0c\u53c2\u89c1 Storage \u670d\u52a1 \u3002 \u5355\u51fb\u53f3\u4e0a\u89d2\u7684 \u8be6\u60c5 \uff0c\u67e5\u770b Leader \u5206\u5e03\u7684\u8be6\u7ec6\u4fe1\u606f\u3002 \u7248\u672c \u00b6 \u663e\u793aNebulaGraph\u6240\u6709\u670d\u52a1\u7248\u672c\u53ca\u670d\u52a1\u5730\u5740\u3002\u5355\u51fb\u53f3\u4e0a\u89d2\u7684 \u8be6\u60c5 \uff0c\u67e5\u770b\u66f4\u591a\u4fe1\u606f\u3002 \u670d\u52a1\u4fe1\u606f \u00b6 \u5c55\u793a Storage \u670d\u52a1\u7684\u57fa\u672c\u4fe1\u606f\u3002\u53c2\u6570\u8bf4\u660e\u5982\u4e0b\uff1a \u53c2\u6570 \u8bf4\u660e Host \u4e3b\u673a\u5730\u5740 Port \u4e3b\u673a\u7aef\u53e3\u53f7 Status \u4e3b\u673a\u72b6\u6001 Git Info Sha \u7248\u672c Commit ID Leader Count Leader \u603b\u6570 Partition Distribution \u5206\u7247\u5206\u5e03 Leader Distribution Leader \u5206\u5e03 \u5355\u51fb\u53f3\u4e0a\u89d2\u7684 \u8be6\u60c5 \uff0c\u67e5\u770b\u66f4\u591a\u4fe1\u606f\u3002 Partition \u5206\u5e03 \u00b6 \u5de6\u4e0a\u65b9\u9009\u62e9\u6307\u5b9a\u56fe\u7a7a\u95f4\uff0c\u67e5\u770b\u56fe\u7a7a\u95f4\u7684\u5206\u7247\u5206\u5e03\u60c5\u51b5\u3002\u663e\u793a\u6240\u6709 Storage \u670d\u52a1\u7684 IP \u5730\u5740\u3001\u7aef\u53e3\uff0c\u53ca\u5bf9\u5e94 Storage \u670d\u52a1\u4e2d\u7684\u5206\u7247\u6570\u91cf\u3002 \u5355\u51fb\u53f3\u4e0a\u89d2\u7684 \u8be6\u60c5 \uff0c\u67e5\u770b\u66f4\u591a\u4fe1\u606f\u3002 \u5206\u7247\u4fe1\u606f \u00b6 \u663e\u793a\u5206\u7247\u4fe1\u606f\u3002\u7528\u6237\u9700\u8981\u5728\u5de6\u4e0a\u89d2\u9009\u62e9\u56fe\u7a7a\u95f4\uff0c\u67e5\u770b\u5206\u7247\u4fe1\u606f\u3002\u53c2\u6570\u8bf4\u660e\u5982\u4e0b\uff1a \u53c2\u6570 \u8bf4\u660e Partition ID \u5206\u7247\u5e8f\u53f7\u3002 Leader \u5206\u7247\u7684 leader \u526f\u672c\u7684 IP \u5730\u5740\u548c\u7aef\u53e3\u3002 Peers \u5206\u7247\u6240\u6709\u526f\u672c\u7684 IP \u5730\u5740\u548c\u7aef\u53e3\u3002 Losts \u5206\u7247\u7684\u6545\u969c\u526f\u672c\u7684 IP \u5730\u5740\u548c\u7aef\u53e3\u3002 \u5355\u51fb\u53f3\u4e0a\u89d2\u7684 \u8be6\u60c5 \uff0c\u67e5\u770b\u66f4\u591a\u4fe1\u606f\uff0c\u901a\u8fc7\u53f3\u4e0a\u89d2\u7684\u8f93\u5165\u6846\uff0c\u8f93\u5165\u5206\u7247 ID\uff0c\u7b5b\u9009\u5c55\u793a\u7684\u6570\u636e\u3002 \u914d\u7f6e \u00b6 \u5c55\u793a\u670d\u52a1\u7684\u914d\u7f6e\u4fe1\u606f\u3002\u6682\u4e0d\u652f\u6301\u5728\u7ebf\u4fee\u6539\u914d\u7f6e\u3002 \u5176\u4ed6 \u00b6 \u5728\u9875\u9762\u5de6\u4e0b\u89d2\uff0c\u8fd8\u53ef\u4ee5\u8fdb\u884c\u5982\u4e0b\u64cd\u4f5c\uff1a \u9000\u51fa\u767b\u5f55 \u5207\u6362\u4e2d\u82f1\u6587 \u67e5\u770b\u5f53\u524d Dashboard \u7248\u672c \u67e5\u770b\u5e2e\u52a9\u4fe1\u606f \u6298\u53e0\u4fa7\u8fb9\u680f","title":"Dashboard \u9875\u9762\u4ecb\u7ecd"},{"location":"nebula-dashboard/4.use-dashboard/#dashboard","text":"Dashboard \u9875\u9762\u4e3b\u8981\u5206\u4e3a\u673a\u5668\u3001\u670d\u52a1\u3001\u7ba1\u7406\u4e09\u4e2a\u90e8\u5206\uff0c\u672c\u6587\u5c06\u8be6\u7ec6\u4ecb\u7ecd\u8fd9\u4e9b\u754c\u9762\u3002","title":"Dashboard \u9875\u9762\u4ecb\u7ecd"},{"location":"nebula-dashboard/4.use-dashboard/#_1","text":"","title":"\u9875\u9762\u6982\u89c8"},{"location":"nebula-dashboard/4.use-dashboard/#_2","text":"\u5355\u51fb \u673a\u5668 -> \u6982\u89c8 \u8fdb\u5165\u673a\u5668\u6982\u89c8\u9875\u9762\u3002 \u7528\u6237\u53ef\u5feb\u901f\u67e5\u770b CPU\u3001Memory\u3001Load\u3001Disk \u548c Network In/Out \u53d8\u5316\u60c5\u51b5\u3002 \u9ed8\u8ba4\u6700\u591a\u53ef\u9009\u62e9 14 \u5929\u7684\u76d1\u63a7\u6570\u636e\u8fdb\u884c\u67e5\u770b\uff0c\u652f\u6301\u9009\u62e9\u65f6\u95f4\u6bb5\uff0c\u4e5f\u53ef\u4ee5\u5feb\u6377\u9009\u62e9\u6700\u8fd1 1 \u5c0f\u65f6\u30016 \u5c0f\u65f6\u300112 \u5c0f\u65f6\u30011 \u5929\u30013 \u5929\u30017 \u5929\u548c 14 \u5929\u3002 \u9ed8\u8ba4\u52fe\u9009\u663e\u793a\u6240\u6709\u5b9e\u4f8b\u7684\u76d1\u63a7\u6570\u636e\uff0c\u53ef\u4ee5\u5728 \u5b9e\u4f8b \u6846\u5185\u8c03\u6574\u3002 \u9875\u9762\u7684\u76d1\u63a7\u6570\u636e\u9ed8\u8ba4\u4e0d\u81ea\u52a8\u66f4\u65b0\uff0c\u53ef\u4ee5\u8c03\u6574 \u66f4\u65b0\u9891\u7387 \u8ba9\u9875\u9762\u81ea\u52a8\u66f4\u65b0\uff0c\u4e5f\u53ef\u4ee5\u5355\u51fb \u6309\u94ae\u624b\u52a8\u66f4\u65b0\u3002 \u5982\u679c\u9700\u8981\u8bbe\u7f6e\u57fa\u7ebf\uff0c\u4f5c\u4e3a\u53c2\u8003\u6807\u51c6\u7ebf\uff0c\u53ef\u4ee5\u5355\u51fb\u6a21\u5757\u53f3\u4e0a\u89d2\u7684 \u6309\u94ae\u3002 \u5982\u679c\u9700\u8981\u67e5\u770b\u67d0\u4e00\u9879\u66f4\u8be6\u7ec6\u7684\u76d1\u63a7\u6307\u6807\uff0c\u53ef\u4ee5\u5355\u51fb\u6a21\u5757\u53f3\u4e0a\u89d2\u7684 \u6309\u94ae\uff0c\u5728\u793a\u4f8b\u4e2d\u9009\u62e9 Load \u67e5\u770b\u8be6\u60c5\u4fe1\u606f\uff0c\u5982\u4e0b\u56fe\u3002 \u53ef\u4ee5\u8bbe\u7f6e\u76d1\u63a7\u65f6\u95f4\u6bb5\u3001\u5b9e\u4f8b\u3001\u66f4\u65b0\u9891\u7387\u548c\u57fa\u7ebf\u3002 \u53ef\u4ee5\u641c\u7d22\u548c\u52fe\u9009\u6307\u6807\u3002\u76d1\u63a7\u6307\u6807\u8be6\u60c5\u8bf7\u53c2\u89c1 \u76d1\u63a7\u6307\u6807\u8bf4\u660e \u3002 \u53ef\u4ee5\u6682\u65f6\u9690\u85cf\u4e0d\u9700\u8981\u67e5\u770b\u7684\u8282\u70b9\u3002 \u53ef\u4ee5\u5355\u51fb \u6309\u94ae\u67e5\u770b\u6307\u6807\u8be6\u60c5\u3002","title":"\u673a\u5668\u9875\u9762\u4ecb\u7ecd"},{"location":"nebula-dashboard/4.use-dashboard/#_3","text":"\u5355\u51fb \u670d\u52a1 -> \u6982\u89c8 \u8fdb\u5165\u670d\u52a1\u6982\u89c8\u9875\u9762\u3002 \u7528\u6237\u53ef\u5feb\u901f\u67e5\u770b Graph\u3001Meta\u3001Storage \u670d\u52a1\u7684\u4fe1\u606f\u3002 Note \u670d\u52a1\u76d1\u63a7\u9875\u4ec5\u652f\u6301\u6bcf\u79cd\u670d\u52a1\u8bbe\u7f6e\u4e24\u4e2a\u76d1\u63a7\u6307\u6807\uff0c\u53ef\u4ee5\u5355\u51fb\u6a21\u5757\u5185\u7684\u8bbe\u7f6e\u6309\u94ae\u8fdb\u884c\u8c03\u6574\u3002 \u9ed8\u8ba4\u6700\u591a\u53ef\u9009\u62e9 14 \u5929\u7684\u76d1\u63a7\u6570\u636e\u8fdb\u884c\u67e5\u770b\uff0c\u652f\u6301\u9009\u62e9\u65f6\u95f4\u6bb5\uff0c\u4e5f\u53ef\u4ee5\u5feb\u6377\u9009\u62e9\u6700\u8fd1 1 \u5c0f\u65f6\u30016 \u5c0f\u65f6\u300112 \u5c0f\u65f6\u30011 \u5929\u30013 \u5929\u30017 \u5929\u548c 14 \u5929\u3002 \u9ed8\u8ba4\u52fe\u9009\u663e\u793a\u6240\u6709\u5b9e\u4f8b\u7684\u76d1\u63a7\u6570\u636e\uff0c\u53ef\u4ee5\u5728 \u5b9e\u4f8b \u6846\u5185\u8c03\u6574\u3002 \u9875\u9762\u7684\u76d1\u63a7\u6570\u636e\u9ed8\u8ba4\u4e0d\u81ea\u52a8\u66f4\u65b0\uff0c\u53ef\u4ee5\u8c03\u6574 \u66f4\u65b0\u9891\u7387 \u8ba9\u9875\u9762\u81ea\u52a8\u66f4\u65b0\uff0c\u4e5f\u53ef\u4ee5\u5355\u51fb \u6309\u94ae\u624b\u52a8\u66f4\u65b0\u3002 \u53ef\u4ee5\u67e5\u770b\u96c6\u7fa4\u5185\u6240\u6709\u670d\u52a1\u7684\u72b6\u6001\u3002 \u5982\u679c\u9700\u8981\u67e5\u770b\u67d0\u4e00\u9879\u66f4\u8be6\u7ec6\u7684\u76d1\u63a7\u6307\u6807\uff0c\u53ef\u4ee5\u5355\u51fb\u6a21\u5757\u53f3\u4e0a\u89d2\u7684 \u6309\u94ae\uff0c\u5728\u793a\u4f8b\u4e2d\u9009\u62e9 Graph \u67e5\u770b\u8be6\u60c5\u4fe1\u606f\uff0c\u5982\u4e0b\u56fe\u3002 \u53ef\u4ee5\u8bbe\u7f6e\u76d1\u63a7\u65f6\u95f4\u6bb5\u3001\u5b9e\u4f8b\u3001\u66f4\u65b0\u9891\u7387\u3001\u5468\u671f\u3001\u805a\u5408\u65b9\u5f0f\u548c\u57fa\u7ebf\u3002 \u53ef\u4ee5\u641c\u7d22\u548c\u52fe\u9009\u6307\u6807\u3002\u76d1\u63a7\u6307\u6807\u8be6\u60c5\u8bf7\u53c2\u89c1 \u76d1\u63a7\u6307\u6807\u8bf4\u660e \u3002 \u53ef\u4ee5\u6682\u65f6\u9690\u85cf\u4e0d\u9700\u8981\u67e5\u770b\u7684\u8282\u70b9\u3002 \u53ef\u4ee5\u5355\u51fb \u6309\u94ae\u67e5\u770b\u6307\u6807\u8be6\u60c5\u3002 Graph \u670d\u52a1\u652f\u6301\u4e00\u7cfb\u5217\u57fa\u4e8e\u56fe\u7a7a\u95f4\u7684\u76d1\u63a7\u6307\u6807\u3002\u8be6\u60c5\u53c2\u89c1\u4e0b\u6587 \u56fe\u7a7a\u95f4\u76d1\u63a7 \u3002","title":"\u670d\u52a1\u9875\u9762\u4ecb\u7ecd"},{"location":"nebula-dashboard/4.use-dashboard/#_4","text":"Caution \u4f7f\u7528\u56fe\u7a7a\u95f4\u6307\u6807\u524d\uff0c\u7528\u6237\u9700\u8981\u5728 Graph \u670d\u52a1\u4e2d\uff0c\u8bbe\u7f6e enable_space_level_metrics \u4e3a true \u3002\u5177\u4f53\u64cd\u4f5c\uff0c\u53c2\u89c1 Graph \u670d\u52a1\u914d\u7f6e \u3002 \u56fe\u76d1\u63a7\u6307\u6807\u4e0d\u517c\u5bb9\u6027 \u5982\u679c\u56fe\u7a7a\u95f4\u7684\u540d\u79f0\u5305\u62ec\u7279\u6b8a\u5b57\u7b26\uff0c\u53ef\u80fd\u4f1a\u6709\u56fe\u7a7a\u95f4\u76d1\u63a7\u6307\u6807\u6570\u636e\u4e0d\u663e\u793a\u7684\u95ee\u9898\u3002 \u670d\u52a1\u76d1\u63a7\u9875\u9762\u8fd8\u53ef\u4ee5\u76d1\u63a7\u56fe\u7a7a\u95f4\u7ea7\u522b\u6307\u6807\u3002 \u53ea\u6709\u5f53\u56fe\u7a7a\u95f4\u6307\u6807\u7684\u884c\u4e3a\u88ab\u89e6\u53d1\u540e\uff0c\u7528\u6237\u624d\u80fd\u6307\u5b9a\u56fe\u7a7a\u95f4\u67e5\u770b\u5bf9\u5e94\u7684\u56fe\u7a7a\u95f4\u6307\u6807\u7684\u4fe1\u606f \u3002\u56fe\u7a7a\u95f4\u7684\u76d1\u63a7\u6307\u6807\u8bb0\u5f55\u4e0d\u540c\u56fe\u7a7a\u95f4\u7684\u6570\u636e\u3002\u76ee\u524d\uff0c\u53ea\u6709 Graph \u670d\u52a1\u652f\u6301\u57fa\u4e8e\u56fe\u7a7a\u95f4\u7684\u76d1\u63a7\u6307\u6807\u3002 Dashboard \u652f\u6301\u7684\u56fe\u7a7a\u95f4\u6307\u6807\uff0c\u53c2\u89c1 \u56fe\u7a7a\u95f4\u7ea7\u522b\u76d1\u63a7\u6307\u6807 \u3002","title":"\u56fe\u7a7a\u95f4\u76d1\u63a7"},{"location":"nebula-dashboard/4.use-dashboard/#_5","text":"","title":"\u7ba1\u7406\u9875\u9762\u4ecb\u7ecd"},{"location":"nebula-dashboard/4.use-dashboard/#_6","text":"\u7528\u6237\u53ef\u4ee5\u5728 \u4fe1\u606f\u603b\u89c8 \u9875\u9762\u67e5\u770bNebulaGraph\u5185\u6838\u76f8\u5173\u4fe1\u606f\uff0c\u5305\u62ec Storage \u670d\u52a1\u4fe1\u606f\u3001Storage Leader \u5206\u5e03\u3001NebulaGraph\u5404\u4e2a\u670d\u52a1\u7684\u7248\u672c\u4fe1\u606f\u53ca\u6240\u5728\u8282\u70b9\u4fe1\u606f\u3001\u5206\u7247\u7684\u5206\u5e03\u60c5\u51b5\u53ca\u8be6\u7ec6\u4fe1\u606f\u3002","title":"\u4fe1\u606f\u603b\u89c8"},{"location":"nebula-dashboard/4.use-dashboard/#storage_leader","text":"\u663e\u793a Leader \u6570\u91cf\u53ca Leader \u7684\u5206\u5e03\u3002 \u5355\u51fb\u53f3\u4e0a\u89d2\u7684 Balance Leader \u6309\u94ae\u53ef\u4ee5\u5feb\u901f\u5728NebulaGraph\u96c6\u7fa4\u4e2d\u5747\u8861\u5206\u5e03 Leader\u3002\u5173\u4e8e Leader \u7684\u8be6\u7ec6\u4fe1\u606f\uff0c\u53c2\u89c1 Storage \u670d\u52a1 \u3002 \u5355\u51fb\u53f3\u4e0a\u89d2\u7684 \u8be6\u60c5 \uff0c\u67e5\u770b Leader \u5206\u5e03\u7684\u8be6\u7ec6\u4fe1\u606f\u3002","title":"Storage Leader \u5206\u5e03"},{"location":"nebula-dashboard/4.use-dashboard/#_7","text":"\u663e\u793aNebulaGraph\u6240\u6709\u670d\u52a1\u7248\u672c\u53ca\u670d\u52a1\u5730\u5740\u3002\u5355\u51fb\u53f3\u4e0a\u89d2\u7684 \u8be6\u60c5 \uff0c\u67e5\u770b\u66f4\u591a\u4fe1\u606f\u3002","title":"\u7248\u672c"},{"location":"nebula-dashboard/4.use-dashboard/#_8","text":"\u5c55\u793a Storage \u670d\u52a1\u7684\u57fa\u672c\u4fe1\u606f\u3002\u53c2\u6570\u8bf4\u660e\u5982\u4e0b\uff1a \u53c2\u6570 \u8bf4\u660e Host \u4e3b\u673a\u5730\u5740 Port \u4e3b\u673a\u7aef\u53e3\u53f7 Status \u4e3b\u673a\u72b6\u6001 Git Info Sha \u7248\u672c Commit ID Leader Count Leader \u603b\u6570 Partition Distribution \u5206\u7247\u5206\u5e03 Leader Distribution Leader \u5206\u5e03 \u5355\u51fb\u53f3\u4e0a\u89d2\u7684 \u8be6\u60c5 \uff0c\u67e5\u770b\u66f4\u591a\u4fe1\u606f\u3002","title":"\u670d\u52a1\u4fe1\u606f"},{"location":"nebula-dashboard/4.use-dashboard/#partition","text":"\u5de6\u4e0a\u65b9\u9009\u62e9\u6307\u5b9a\u56fe\u7a7a\u95f4\uff0c\u67e5\u770b\u56fe\u7a7a\u95f4\u7684\u5206\u7247\u5206\u5e03\u60c5\u51b5\u3002\u663e\u793a\u6240\u6709 Storage \u670d\u52a1\u7684 IP \u5730\u5740\u3001\u7aef\u53e3\uff0c\u53ca\u5bf9\u5e94 Storage \u670d\u52a1\u4e2d\u7684\u5206\u7247\u6570\u91cf\u3002 \u5355\u51fb\u53f3\u4e0a\u89d2\u7684 \u8be6\u60c5 \uff0c\u67e5\u770b\u66f4\u591a\u4fe1\u606f\u3002","title":"Partition \u5206\u5e03"},{"location":"nebula-dashboard/4.use-dashboard/#_9","text":"\u663e\u793a\u5206\u7247\u4fe1\u606f\u3002\u7528\u6237\u9700\u8981\u5728\u5de6\u4e0a\u89d2\u9009\u62e9\u56fe\u7a7a\u95f4\uff0c\u67e5\u770b\u5206\u7247\u4fe1\u606f\u3002\u53c2\u6570\u8bf4\u660e\u5982\u4e0b\uff1a \u53c2\u6570 \u8bf4\u660e Partition ID \u5206\u7247\u5e8f\u53f7\u3002 Leader \u5206\u7247\u7684 leader \u526f\u672c\u7684 IP \u5730\u5740\u548c\u7aef\u53e3\u3002 Peers \u5206\u7247\u6240\u6709\u526f\u672c\u7684 IP \u5730\u5740\u548c\u7aef\u53e3\u3002 Losts \u5206\u7247\u7684\u6545\u969c\u526f\u672c\u7684 IP \u5730\u5740\u548c\u7aef\u53e3\u3002 \u5355\u51fb\u53f3\u4e0a\u89d2\u7684 \u8be6\u60c5 \uff0c\u67e5\u770b\u66f4\u591a\u4fe1\u606f\uff0c\u901a\u8fc7\u53f3\u4e0a\u89d2\u7684\u8f93\u5165\u6846\uff0c\u8f93\u5165\u5206\u7247 ID\uff0c\u7b5b\u9009\u5c55\u793a\u7684\u6570\u636e\u3002","title":"\u5206\u7247\u4fe1\u606f"},{"location":"nebula-dashboard/4.use-dashboard/#_10","text":"\u5c55\u793a\u670d\u52a1\u7684\u914d\u7f6e\u4fe1\u606f\u3002\u6682\u4e0d\u652f\u6301\u5728\u7ebf\u4fee\u6539\u914d\u7f6e\u3002","title":"\u914d\u7f6e"},{"location":"nebula-dashboard/4.use-dashboard/#_11","text":"\u5728\u9875\u9762\u5de6\u4e0b\u89d2\uff0c\u8fd8\u53ef\u4ee5\u8fdb\u884c\u5982\u4e0b\u64cd\u4f5c\uff1a \u9000\u51fa\u767b\u5f55 \u5207\u6362\u4e2d\u82f1\u6587 \u67e5\u770b\u5f53\u524d Dashboard \u7248\u672c \u67e5\u770b\u5e2e\u52a9\u4fe1\u606f \u6298\u53e0\u4fa7\u8fb9\u680f","title":"\u5176\u4ed6"},{"location":"nebula-dashboard/6.monitor-parameter/","text":"\u76d1\u63a7\u6307\u6807\u8bf4\u660e \u00b6 \u672c\u6587\u4ecb\u7ecd Dashboard \u4e2d\u5c55\u793a\u7684NebulaGraph\u76d1\u63a7\u6307\u6807\u3002 \u673a\u5668 \u00b6 Note \u4ee5\u4e0b\u673a\u5668\u6307\u6807\u9002\u7528\u4e8e Linux \u64cd\u4f5c\u7cfb\u7edf\u3002 \u78c1\u76d8\u5bb9\u91cf\u548c\u6d41\u91cf\u7684\u9ed8\u8ba4\u5355\u4f4d\u4e3a\u5b57\u8282\uff08Byte\uff09\uff0c\u9875\u9762\u663e\u793a\u65f6\u5355\u4f4d\u4f1a\u968f\u7740\u6570\u636e\u91cf\u7ea7\u800c\u53d8\u5316\uff0c\u4f8b\u5982\u6d41\u91cf\u4f4e\u4e8e 1 KB/s \u65f6\u5355\u4f4d\u4e3a Bytes/s\u3002 \u5bf9\u4e8e\u9ad8\u4e8e v1.0.2 \u7248\u672c\u7684\u793e\u533a\u7248 Dashboard\uff0c\u673a\u5668\u7684 Buff \u548c Cache \u6240\u5360\u7684\u5185\u5b58\u6ca1\u6709\u88ab\u8ba1\u7b97\u5728\u5185\u5b58\u4f7f\u7528\u7387\u4e2d\u3002 CPU \u00b6 \u53c2\u6570 \u8bf4\u660e cpu_utilization CPU \u5df2\u4f7f\u7528\u767e\u5206\u6bd4 cpu_idle CPU \u7a7a\u95f2\u767e\u5206\u6bd4 cpu_wait \u7b49\u5f85 IO \u64cd\u4f5c\u7684 CPU \u767e\u5206\u6bd4 cpu_user \u7528\u6237\u7a7a\u95f4\uff08\u975eNebulaGraph\u56fe\u7a7a\u95f4\uff09\u5360\u7528\u7684 CPU \u767e\u5206\u6bd4 cpu_system \u5185\u6838\u7a7a\u95f4\uff08\u975eNebulaGraph\u5185\u6838\u7a7a\u95f4\uff09\u5360\u7528\u7684 CPU \u767e\u5206\u6bd4 \u5185\u5b58 \u00b6 \u53c2\u6570 \u8bf4\u660e memory_utilization \u5185\u5b58\u5df2\u4f7f\u7528\u767e\u5206\u6bd4 memory_used \u5df2\u4f7f\u7528\u5185\u5b58\uff08\u4e0d\u5305\u62ec\u7f13\u5b58\uff09\u3002 memory_free \u7a7a\u95f2\u5185\u5b58 \u8d1f\u8f7d \u00b6 \u53c2\u6570 \u8bf4\u660e load_1m \u6700\u8fd1 1 \u5206\u949f\u7cfb\u7edf\u5e73\u5747\u8d1f\u8f7d load_5m \u6700\u8fd1 5 \u5206\u949f\u7cfb\u7edf\u5e73\u5747\u8d1f\u8f7d load_15m \u6700\u8fd1 15 \u5206\u949f\u7cfb\u7edf\u5e73\u5747\u8d1f\u8f7d \u78c1\u76d8 \u00b6 \u53c2\u6570 \u8bf4\u660e disk_used_percentage \u78c1\u76d8\u4f7f\u7528\u7387 disk_used \u78c1\u76d8\u5df2\u4f7f\u7528\u5b58\u50a8\u7a7a\u95f4 disk_free \u78c1\u76d8\u5269\u4f59\u5b58\u50a8\u7a7a\u95f4 disk_readbytes \u78c1\u76d8\u6bcf\u79d2\u8bfb\u53d6\u7684\u5b57\u8282\u6570 disk_writebytes \u78c1\u76d8\u6bcf\u79d2\u5199\u5165\u7684\u5b57\u8282\u6570 disk_readiops \u78c1\u76d8\u6bcf\u79d2\u7684\u8bfb\u8bf7\u6c42\u6570\u91cf disk_writeiops \u78c1\u76d8\u6bcf\u79d2\u7684\u5199\u8bf7\u6c42\u6570\u91cf inode_utilization inode \u5df2\u4f7f\u7528\u767e\u5206\u6bd4 \u6d41\u91cf \u00b6 \u53c2\u6570 \u8bf4\u660e network_in_rate \u7f51\u5361\u6bcf\u79d2\u63a5\u6536\u7684\u5b57\u8282\u6570 network_out_rate \u7f51\u5361\u6bcf\u79d2\u53d1\u9001\u7684\u5b57\u8282\u6570 network_in_errs \u7f51\u5361\u6bcf\u79d2\u63a5\u6536\u9519\u8bef\u7684\u5b57\u8282\u6570 network_out_errs \u7f51\u5361\u6bcf\u79d2\u53d1\u9001\u9519\u8bef\u7684\u5b57\u8282\u6570 network_in_packets \u7f51\u5361\u6bcf\u79d2\u63a5\u6536\u7684\u6570\u636e\u5305\u6570\u91cf network_out_packets \u7f51\u5361\u6bcf\u79d2\u53d1\u9001\u7684\u6570\u636e\u5305\u6570\u91cf \u670d\u52a1 \u00b6 \u5468\u671f \u00b6 \u6307\u6807\u7edf\u8ba1\u7684\u65f6\u95f4\u8303\u56f4\uff0c\u5f53\u524d\u652f\u6301 5 \u79d2\u300160 \u79d2\u3001600 \u79d2\u548c 3600 \u79d2\uff0c\u5206\u522b\u8868\u793a\u6700\u8fd1 5 \u79d2\u3001\u6700\u8fd1 1 \u5206\u949f\u3001\u6700\u8fd1 10 \u5206\u949f\u548c\u6700\u8fd1 1 \u5c0f\u65f6\u3002 \u805a\u5408\u65b9\u5f0f \u00b6 \u53c2\u6570 \u8bf4\u660e rate \u5468\u671f\u5185\u5e73\u5747\u6bcf\u79d2\u64cd\u4f5c\u7684\u901f\u7387 sum \u5468\u671f\u5185\u64cd\u4f5c\u7684\u603b\u548c avg \u5468\u671f\u5185\u54cd\u5e94\u5e73\u5747\u8017\u65f6 P75 \u5468\u671f\u5185\u54cd\u5e94\u8017\u65f6\u4ece\u5c0f\u5230\u5927\u6392\u5217\uff0c\u987a\u5e8f\u5904\u4e8e 75%\u4f4d\u7f6e\u7684\u5206\u4f4d\u6570 P95 \u5468\u671f\u5185\u54cd\u5e94\u8017\u65f6\u4ece\u5c0f\u5230\u5927\u6392\u5217\uff0c\u987a\u5e8f\u5904\u4e8e 95%\u4f4d\u7f6e\u7684\u5206\u4f4d\u6570 P99 \u5468\u671f\u5185\u54cd\u5e94\u8017\u65f6\u4ece\u5c0f\u5230\u5927\u6392\u5217\uff0c\u987a\u5e8f\u5904\u4e8e 99%\u4f4d\u7f6e\u7684\u5206\u4f4d\u6570 P999 \u5468\u671f\u5185\u54cd\u5e94\u8017\u65f6\u4ece\u5c0f\u5230\u5927\u6392\u5217\uff0c\u987a\u5e8f\u5904\u4e8e 99.9%\u4f4d\u7f6e\u7684\u5206\u4f4d\u6570 Note \u4ee5\u4e0b\u4e3a Dashboard \u83b7\u53d6\u5185\u6838\u7684\u5168\u91cf\u6307\u6807\uff0c\u4f46 Dashboard \u4ec5\u5c55\u793a\u91cd\u8981\u7684\u6307\u6807\u3002 Graph \u00b6 \u53c2\u6570 \u8bf4\u660e num_active_queries \u6d3b\u8dc3\u7684\u67e5\u8be2\u8bed\u53e5\u6570\u7684\u53d8\u5316\u6570\u3002 \u8ba1\u7b97\u516c\u5f0f\uff1a\u65f6\u95f4\u8303\u56f4\u5185\u5f00\u59cb\u6267\u884c\u7684\u8bed\u53e5\u6570\u51cf\u53bb\u6267\u884c\u5b8c\u6bd5\u7684\u8bed\u53e5\u6570\u3002 num_active_sessions \u6d3b\u8dc3\u7684\u4f1a\u8bdd\u6570\u7684\u53d8\u5316\u6570\u3002 \u8ba1\u7b97\u516c\u5f0f\uff1a\u65f6\u95f4\u8303\u56f4\u5185\u767b\u5f55\u7684\u4f1a\u8bdd\u6570\u51cf\u53bb\u767b\u51fa\u7684\u4f1a\u8bdd\u6570\u3002 \u4f8b\u5982\u67e5\u8be2num_active_sessions.sum.5\uff0c\u8fc7\u53bb 5 \u79d2\u4e2d\u767b\u5f55\u4e86 10 \u4e2a\u4f1a\u8bdd\u6570\uff0c\u767b\u51fa\u4e86 30 \u4e2a\u4f1a\u8bdd\u6570\uff0c\u90a3\u4e48\u8be5\u6307\u6807\u503c\u5c31\u662f -20 \uff0810-30\uff09\u3002 num_aggregate_executors \u805a\u5408\uff08Aggregate\uff09\u7b97\u5b50\u6267\u884c\u65f6\u95f4\u3002 num_auth_failed_sessions_bad_username_password \u56e0\u7528\u6237\u540d\u5bc6\u7801\u9519\u8bef\u5bfc\u9a8c\u8bc1\u5931\u8d25\u7684\u4f1a\u8bdd\u6570\u91cf\u3002 num_auth_failed_sessions_out_of_max_allowed \u56e0\u4e3a\u8d85\u8fc7 FLAG_OUT_OF_MAX_ALLOWED_CONNECTIONS \u53c2\u6570\u5bfc\u81f4\u7684\u9a8c\u8bc1\u767b\u5f55\u7684\u5931\u8d25\u7684\u4f1a\u8bdd\u6570\u91cf\u3002 num_auth_failed_sessions \u767b\u5f55\u9a8c\u8bc1\u5931\u8d25\u7684\u4f1a\u8bdd\u6570\u91cf\u3002 num_indexscan_executors \u7d22\u5f15\u626b\u63cf\uff08IndexScan\uff09\u7b97\u5b50\u6267\u884c\u65f6\u95f4\u3002 num_killed_queries \u88ab\u7ec8\u6b62\u7684\u67e5\u8be2\u6570\u91cf\u3002 num_opened_sessions \u670d\u52a1\u7aef\u5efa\u7acb\u8fc7\u7684\u4f1a\u8bdd\u6570\u91cf\u3002 num_queries \u67e5\u8be2\u6b21\u6570\u3002 num_query_errors_leader_changes \u56e0\u67e5\u8be2\u9519\u8bef\u800c\u5bfc\u81f4\u7684 Leader \u53d8\u66f4\u7684\u6b21\u6570\u3002 num_query_errors \u67e5\u8be2\u9519\u8bef\u6b21\u6570\u3002 num_reclaimed_expired_sessions \u670d\u52a1\u7aef\u4e3b\u52a8\u56de\u6536\u7684\u8fc7\u671f\u7684\u4f1a\u8bdd\u6570\u91cf\u3002 num_rpc_sent_to_metad_failed Graphd \u670d\u52a1\u53d1\u7ed9 Metad \u7684 RPC \u8bf7\u6c42\u5931\u8d25\u7684\u6570\u91cf\u3002 num_rpc_sent_to_metad Graphd \u670d\u52a1\u53d1\u7ed9 Metad \u670d\u52a1\u7684 RPC \u8bf7\u6c42\u6570\u91cf\u3002 num_rpc_sent_to_storaged_failed Graphd \u670d\u52a1\u53d1\u7ed9 Storaged \u670d\u52a1\u7684 RPC \u8bf7\u6c42\u5931\u8d25\u7684\u6570\u91cf\u3002 num_rpc_sent_to_storaged Graphd \u670d\u52a1\u53d1\u7ed9 Storaged \u670d\u52a1\u7684 RPC \u8bf7\u6c42\u6570\u91cf\u3002 num_sentences Graphd \u670d\u52a1\u63a5\u6536\u7684\u8bed\u53e5\u6570\u3002 num_slow_queries \u6162\u67e5\u8be2\u6b21\u6570\u3002 num_sort_executors \u6392\u5e8f\uff08Sort\uff09\u7b97\u5b50\u6267\u884c\u65f6\u95f4\u3002 optimizer_latency_us \u4f18\u5316\u5668\u9636\u6bb5\u5ef6\u8fdf\u65f6\u95f4\u3002 query_latency_us \u67e5\u8be2\u5ef6\u8fdf\u65f6\u95f4\u3002 slow_query_latency_us \u6162\u67e5\u8be2\u5ef6\u8fdf\u65f6\u95f4\u3002 num_queries_hit_memory_watermark \u8fbe\u5230\u5185\u5b58\u6c34\u4f4d\u7ebf\u7684\u8bed\u53e5\u7684\u6570\u91cf\u3002 resp_part_completeness \u90e8\u5206\u6210\u529f\u7684\u5b8c\u6574\u6027\u3002\u9700\u8981\u5728 Graph \u914d\u7f6e\u4e2d\u8bbe\u7f6e accept_partial_success \u4e3a true \u3002 Meta \u00b6 \u53c2\u6570 \u8bf4\u660e commit_log_latency_us Raft \u534f\u8bae\u4e2d Commit \u65e5\u5fd7\u7684\u5ef6\u8fdf\u65f6\u95f4\u3002 commit_snapshot_latency_us Raft \u534f\u8bae\u4e2d Commit \u5feb\u7167\u7684\u5ef6\u8fdf\u65f6\u95f4\u3002 heartbeat_latency_us \u5fc3\u8df3\u5ef6\u8fdf\u65f6\u95f4\u3002 num_heartbeats \u5fc3\u8df3\u6b21\u6570\u3002 num_raft_votes Raft \u534f\u8bae\u4e2d\u6295\u7968\u7684\u6b21\u6570\u3002 transfer_leader_latency_us Raft \u534f\u8bae\u4e2d\u8f6c\u79fb Leader \u7684\u5ef6\u8fdf\u65f6\u95f4\u3002 num_agent_heartbeats AgentHBProcessor \u5fc3\u8df3\u6b21\u6570\u3002 agent_heartbeat_latency_us AgentHBProcessor \u5ef6\u8fdf\u65f6\u95f4\u3002 replicate_log_latency_us Raft \u590d\u5236\u65e5\u5fd7\u81f3\u5927\u591a\u6570\u8282\u70b9\u7684\u5ef6\u8fdf\u3002 num_send_snapshot Raft \u53d1\u9001\u5feb\u7167\u81f3\u5176\u4ed6\u8282\u70b9\u7684\u6b21\u6570\u3002 append_log_latency_us Raft \u590d\u5236\u65e5\u5fd7\u5230\u5355\u4e2a\u8282\u70b9\u7684\u5ef6\u8fdf\u3002 append_wal_latency_us Raft \u5199\u5165\u5355\u6761 WAL \u7684\u5ef6\u8fdf\u3002 num_grant_votes Raft \u6295\u7968\u7ed9\u5176\u4ed6\u8282\u70b9\u7684\u6b21\u6570\u3002 num_start_elect Raft \u53d1\u8d77\u6295\u7968\u7684\u6b21\u6570\u3002 Storage \u00b6 \u53c2\u6570 \u8bf4\u660e add_edges_latency_us \u6dfb\u52a0\u8fb9\u7684\u5ef6\u8fdf\u65f6\u95f4\u3002 add_vertices_latency_us \u6dfb\u52a0\u70b9\u7684\u5ef6\u8fdf\u65f6\u95f4\u3002 commit_log_latency_us Raft \u534f\u8bae\u4e2d Commit \u65e5\u5fd7\u7684\u5ef6\u8fdf\u65f6\u95f4\u3002 commit_snapshot_latency_us Raft \u534f\u8bae\u4e2d Commit \u5feb\u7167\u7684\u5ef6\u8fdf\u65f6\u95f4\u3002 delete_edges_latency_us \u5220\u9664\u8fb9\u7684\u5ef6\u8fdf\u65f6\u95f4\u3002 delete_vertices_latency_us \u5220\u9664\u70b9\u7684\u5ef6\u8fdf\u65f6\u95f4\u3002 get_neighbors_latency_us \u67e5\u8be2\u90bb\u5c45\u5ef6\u8fdf\u65f6\u95f4\u3002 get_dst_by_src_latency_us \u901a\u8fc7\u8d77\u59cb\u70b9\u83b7\u53d6\u7ec8\u70b9\u7684\u5ef6\u8fdf\u65f6\u95f4\u3002 num_get_prop GetPropProcessor \u6267\u884c\u7684\u6b21\u6570\u3002 num_get_neighbors_errors GetNeighborsProcessor \u6267\u884c\u51fa\u9519\u7684\u6b21\u6570\u3002 num_get_dst_by_src_errors GetDstBySrcProcessor \u6267\u884c\u51fa\u9519\u7684\u6b21\u6570\u3002 get_prop_latency_us GetPropProcessor \u6267\u884c\u7684\u5ef6\u8fdf\u65f6\u95f4\u3002 num_edges_deleted \u5220\u9664\u7684\u8fb9\u6570\u91cf\u3002 num_edges_inserted \u63d2\u5165\u7684\u8fb9\u6570\u91cf\u3002 num_raft_votes Raft \u534f\u8bae\u4e2d\u6295\u7968\u7684\u6b21\u6570\u3002 num_rpc_sent_to_metad_failed Storaged \u670d\u52a1\u53d1\u7ed9 Metad \u670d\u52a1\u7684 RPC \u8bf7\u6c42\u5931\u8d25\u7684\u6570\u91cf\u3002 num_rpc_sent_to_metad Storaged \u670d\u52a1\u53d1\u7ed9 Metad \u670d\u52a1\u7684 RPC \u8bf7\u6c42\u6570\u91cf\u3002 num_tags_deleted \u5220\u9664\u7684 Tag \u6570\u91cf\u3002 num_vertices_deleted \u5220\u9664\u7684\u70b9\u6570\u91cf\u3002 num_vertices_inserted \u63d2\u5165\u7684\u70b9\u6570\u91cf\u3002 transfer_leader_latency_us Raft \u534f\u8bae\u4e2d\u8f6c\u79fb Leader \u7684\u5ef6\u8fdf\u65f6\u95f4\u3002 lookup_latency_us LookupProcessor \u6267\u884c\u7684\u5ef6\u8fdf\u65f6\u95f4\u3002 num_lookup_errors LookupProcessor \u6267\u884c\u65f6\u51fa\u9519\u7684\u6b21\u6570\u3002 num_scan_vertex ScanVertexProcessor \u6267\u884c\u7684\u6b21\u6570\u3002 num_scan_vertex_errors ScanVertexProcessor \u6267\u884c\u65f6\u51fa\u9519\u7684\u6b21\u6570\u3002 update_edge_latency_us UpdateEdgeProcessor \u6267\u884c\u7684\u5ef6\u8fdf\u65f6\u95f4\u3002 num_update_vertex UpdateVertexProcessor \u6267\u884c\u7684\u6b21\u6570\u3002 num_update_vertex_errors UpdateVertexProcessor \u6267\u884c\u65f6\u51fa\u9519\u7684\u6b21\u6570\u3002 kv_get_latency_us Getprocessor \u7684\u5ef6\u8fdf\u65f6\u95f4\u3002 kv_put_latency_us PutProcessor \u7684\u5ef6\u8fdf\u65f6\u95f4\u3002 kv_remove_latency_us RemoveProcessor \u7684\u5ef6\u8fdf\u65f6\u95f4\u3002 num_kv_get_errors GetProcessor \u6267\u884c\u51fa\u9519\u6b21\u6570\u3002 num_kv_get GetProcessor \u6267\u884c\u6b21\u6570\u3002 num_kv_put_errors PutProcessor \u6267\u884c\u51fa\u9519\u6b21\u6570\u3002 num_kv_put PutProcessor \u6267\u884c\u6b21\u6570\u3002 num_kv_remove_errors RemoveProcessor \u6267\u884c\u51fa\u9519\u6b21\u6570\u3002 num_kv_remove RemoveProcessor \u6267\u884c\u6b21\u6570\u3002 forward_tranx_latency_us \u4f20\u8f93\u5ef6\u8fdf\u65f6\u95f4\u3002 scan_edge_latency_us ScanEdgeProcessor \u6267\u884c\u7684\u5ef6\u8fdf\u65f6\u95f4\u3002 num_scan_edge_errors ScanEdgeProcessor \u6267\u884c\u65f6\u51fa\u9519\u7684\u6b21\u6570\u3002 num_scan_edge ScanEdgeProcessor \u6267\u884c\u7684\u6b21\u6570\u3002 scan_vertex_latency_us ScanVertexProcessor \u6267\u884c\u7684\u5ef6\u8fdf\u65f6\u95f4\u3002 num_add_edges \u6dfb\u52a0\u8fb9\u7684\u6b21\u6570\u3002 num_add_edges_errors \u6dfb\u52a0\u8fb9\u65f6\u51fa\u9519\u7684\u6b21\u6570\u3002 num_add_vertices \u6dfb\u52a0\u70b9\u7684\u6b21\u6570\u3002 num_start_elect Raft \u53d1\u8d77\u6295\u7968\u7684\u6b21\u6570 num_add_vertices_errors \u6dfb\u52a0\u70b9\u65f6\u51fa\u9519\u7684\u6b21\u6570\u3002 num_delete_vertices_errors \u5220\u9664\u70b9\u65f6\u51fa\u9519\u7684\u6b21\u6570\u3002 append_log_latency_us Raft \u590d\u5236\u65e5\u5fd7\u5230\u5355\u4e2a\u8282\u70b9\u7684\u5ef6\u8fdf\u3002 num_grant_votes Raft \u6295\u7968\u7ed9\u5176\u4ed6\u8282\u70b9\u7684\u6b21\u6570\u3002 replicate_log_latency_us Raft \u590d\u5236\u65e5\u5fd7\u5230\u5927\u591a\u6570\u8282\u70b9\u7684\u5ef6\u8fdf\u3002 num_delete_tags \u5220\u9664 Tag \u7684\u6b21\u6570\u3002 num_delete_tags_errors \u5220\u9664 Tag \u65f6\u51fa\u9519\u7684\u6b21\u6570\u3002 num_delete_edges \u5220\u9664\u8fb9\u7684\u6b21\u6570\u3002 num_delete_edges_errors \u5220\u9664\u8fb9\u65f6\u51fa\u9519\u7684\u6b21\u6570\u3002 num_send_snapshot \u53d1\u9001\u5feb\u7167\u7684\u6b21\u6570\u3002 update_vertex_latency_us UpdateVertexProcessor \u6267\u884c\u7684\u5ef6\u8fdf\u65f6\u95f4\u3002 append_wal_latency_us Raft \u5199\u5165\u5355\u6761 WAL \u7684\u5ef6\u8fdf\u3002 num_update_edge UpdateEdgeProcessor \u6267\u884c\u7684\u6b21\u6570\u3002 delete_tags_latency_us \u5220\u9664 Tag \u7684\u5ef6\u8fdf\u65f6\u95f4\u3002 num_update_edge_errors UpdateEdgeProcessor \u6267\u884c\u65f6\u51fa\u9519\u7684\u6b21\u6570\u3002 num_get_neighbors GetNeighborsProcessor \u6267\u884c\u7684\u6b21\u6570\u3002 num_get_dst_by_src GetDstBySrcProcessor \u6267\u884c\u7684\u6b21\u6570\u3002 num_get_prop_errors GetPropProcessor \u6267\u884c\u65f6\u51fa\u9519\u7684\u6b21\u6570\u3002 num_delete_vertices \u5220\u9664\u70b9\u7684\u6b21\u6570\u3002 num_lookup LookupProcessor \u6267\u884c\u7684\u6b21\u6570\u3002 num_sync_data Storage \u540c\u6b65 Drainer \u6570\u636e\u7684\u6b21\u6570\u3002 num_sync_data_errors Storage \u540c\u6b65 Drainer \u6570\u636e\u51fa\u9519\u7684\u6b21\u6570\u3002 sync_data_latency_us Storage \u540c\u6b65 Drainer \u6570\u636e\u7684\u5ef6\u8fdf\u65f6\u95f4\u3002 \u56fe\u7a7a\u95f4\u7ea7\u522b\u76d1\u63a7\u6307\u6807 \u00b6 Note \u56fe\u7a7a\u95f4\u7ea7\u522b\u76d1\u63a7\u6307\u6807\u662f\u52a8\u6001\u521b\u5efa\u7684, \u53ea\u6709\u5f53\u56fe\u7a7a\u95f4\u5185\u89e6\u53d1\u8be5\u884c\u4e3a\u65f6\uff0c\u5bf9\u5e94\u7684\u6307\u6807\u624d\u4f1a\u521b\u5efa\uff0c\u7528\u6237\u624d\u80fd\u67e5\u8be2\u5230\u3002 \u53c2\u6570 \u8bf4\u660e num_active_queries \u5f53\u524d\u6b63\u5728\u6267\u884c\u7684\u67e5\u8be2\u6570\u3002 num_queries \u67e5\u8be2\u6b21\u6570\u3002 num_sentences Graphd \u670d\u52a1\u63a5\u6536\u7684\u8bed\u53e5\u6570\u3002 optimizer_latency_us \u4f18\u5316\u5668\u9636\u6bb5\u5ef6\u8fdf\u65f6\u95f4\u3002 query_latency_us \u67e5\u8be2\u5ef6\u8fdf\u65f6\u95f4\u3002 num_slow_queries \u6162\u67e5\u8be2\u6b21\u6570\u3002 num_query_errors \u67e5\u8be2\u62a5\u9519\u8bed\u53e5\u6570\u91cf\u3002 num_query_errors_leader_changes \u56e0\u67e5\u8be2\u9519\u8bef\u800c\u5bfc\u81f4\u7684 Leader \u53d8\u66f4\u7684\u6b21\u6570\u3002 num_killed_queries \u88ab\u7ec8\u6b62\u7684\u67e5\u8be2\u6570\u91cf\u3002 num_aggregate_executors \u805a\u5408\uff08Aggregate\uff09\u7b97\u5b50\u6267\u884c\u65f6\u95f4\u3002 num_sort_executors \u6392\u5e8f\uff08Sort\uff09\u7b97\u5b50\u6267\u884c\u65f6\u95f4\u3002 num_indexscan_executors \u7d22\u5f15\u626b\u63cf\uff08IndexScan\uff09\u7b97\u5b50\u6267\u884c\u65f6\u95f4\u3002 num_auth_failed_sessions_bad_username_password \u56e0\u7528\u6237\u540d\u5bc6\u7801\u9519\u8bef\u5bfc\u9a8c\u8bc1\u5931\u8d25\u7684\u4f1a\u8bdd\u6570\u91cf\u3002 num_auth_failed_sessions \u767b\u5f55\u9a8c\u8bc1\u5931\u8d25\u7684\u4f1a\u8bdd\u6570\u91cf\u3002 num_opened_sessions \u670d\u52a1\u7aef\u5efa\u7acb\u8fc7\u7684\u4f1a\u8bdd\u6570\u91cf\u3002 num_queries_hit_memory_watermark \u8fbe\u5230\u5185\u5b58\u6c34\u4f4d\u7ebf\u7684\u8bed\u53e5\u7684\u6570\u91cf\u3002 num_reclaimed_expired_sessions \u670d\u52a1\u7aef\u4e3b\u52a8\u56de\u6536\u7684\u8fc7\u671f\u7684\u4f1a\u8bdd\u6570\u91cf\u3002 num_rpc_sent_to_metad_failed Graphd \u670d\u52a1\u53d1\u7ed9 Metad \u7684 RPC \u8bf7\u6c42\u5931\u8d25\u7684\u6570\u91cf\u3002 num_rpc_sent_to_metad Graphd \u670d\u52a1\u53d1\u7ed9 Metad \u670d\u52a1\u7684 RPC \u8bf7\u6c42\u6570\u91cf\u3002 num_rpc_sent_to_storaged_failed Graphd \u670d\u52a1\u53d1\u7ed9 Storaged \u670d\u52a1\u7684 RPC \u8bf7\u6c42\u5931\u8d25\u7684\u6570\u91cf\u3002 num_rpc_sent_to_storaged Graphd \u670d\u52a1\u53d1\u7ed9 Storaged \u670d\u52a1\u7684 RPC \u8bf7\u6c42\u6570\u91cf\u3002 slow_query_latency_us \u6162\u67e5\u8be2\u5ef6\u8fdf\u65f6\u95f4\u3002","title":"\u76d1\u63a7\u6307\u6807\u8bf4\u660e"},{"location":"nebula-dashboard/6.monitor-parameter/#_1","text":"\u672c\u6587\u4ecb\u7ecd Dashboard \u4e2d\u5c55\u793a\u7684NebulaGraph\u76d1\u63a7\u6307\u6807\u3002","title":"\u76d1\u63a7\u6307\u6807\u8bf4\u660e"},{"location":"nebula-dashboard/6.monitor-parameter/#_2","text":"Note \u4ee5\u4e0b\u673a\u5668\u6307\u6807\u9002\u7528\u4e8e Linux \u64cd\u4f5c\u7cfb\u7edf\u3002 \u78c1\u76d8\u5bb9\u91cf\u548c\u6d41\u91cf\u7684\u9ed8\u8ba4\u5355\u4f4d\u4e3a\u5b57\u8282\uff08Byte\uff09\uff0c\u9875\u9762\u663e\u793a\u65f6\u5355\u4f4d\u4f1a\u968f\u7740\u6570\u636e\u91cf\u7ea7\u800c\u53d8\u5316\uff0c\u4f8b\u5982\u6d41\u91cf\u4f4e\u4e8e 1 KB/s \u65f6\u5355\u4f4d\u4e3a Bytes/s\u3002 \u5bf9\u4e8e\u9ad8\u4e8e v1.0.2 \u7248\u672c\u7684\u793e\u533a\u7248 Dashboard\uff0c\u673a\u5668\u7684 Buff \u548c Cache \u6240\u5360\u7684\u5185\u5b58\u6ca1\u6709\u88ab\u8ba1\u7b97\u5728\u5185\u5b58\u4f7f\u7528\u7387\u4e2d\u3002","title":"\u673a\u5668"},{"location":"nebula-dashboard/6.monitor-parameter/#cpu","text":"\u53c2\u6570 \u8bf4\u660e cpu_utilization CPU \u5df2\u4f7f\u7528\u767e\u5206\u6bd4 cpu_idle CPU \u7a7a\u95f2\u767e\u5206\u6bd4 cpu_wait \u7b49\u5f85 IO \u64cd\u4f5c\u7684 CPU \u767e\u5206\u6bd4 cpu_user \u7528\u6237\u7a7a\u95f4\uff08\u975eNebulaGraph\u56fe\u7a7a\u95f4\uff09\u5360\u7528\u7684 CPU \u767e\u5206\u6bd4 cpu_system \u5185\u6838\u7a7a\u95f4\uff08\u975eNebulaGraph\u5185\u6838\u7a7a\u95f4\uff09\u5360\u7528\u7684 CPU \u767e\u5206\u6bd4","title":"CPU"},{"location":"nebula-dashboard/6.monitor-parameter/#_3","text":"\u53c2\u6570 \u8bf4\u660e memory_utilization \u5185\u5b58\u5df2\u4f7f\u7528\u767e\u5206\u6bd4 memory_used \u5df2\u4f7f\u7528\u5185\u5b58\uff08\u4e0d\u5305\u62ec\u7f13\u5b58\uff09\u3002 memory_free \u7a7a\u95f2\u5185\u5b58","title":"\u5185\u5b58"},{"location":"nebula-dashboard/6.monitor-parameter/#_4","text":"\u53c2\u6570 \u8bf4\u660e load_1m \u6700\u8fd1 1 \u5206\u949f\u7cfb\u7edf\u5e73\u5747\u8d1f\u8f7d load_5m \u6700\u8fd1 5 \u5206\u949f\u7cfb\u7edf\u5e73\u5747\u8d1f\u8f7d load_15m \u6700\u8fd1 15 \u5206\u949f\u7cfb\u7edf\u5e73\u5747\u8d1f\u8f7d","title":"\u8d1f\u8f7d"},{"location":"nebula-dashboard/6.monitor-parameter/#_5","text":"\u53c2\u6570 \u8bf4\u660e disk_used_percentage \u78c1\u76d8\u4f7f\u7528\u7387 disk_used \u78c1\u76d8\u5df2\u4f7f\u7528\u5b58\u50a8\u7a7a\u95f4 disk_free \u78c1\u76d8\u5269\u4f59\u5b58\u50a8\u7a7a\u95f4 disk_readbytes \u78c1\u76d8\u6bcf\u79d2\u8bfb\u53d6\u7684\u5b57\u8282\u6570 disk_writebytes \u78c1\u76d8\u6bcf\u79d2\u5199\u5165\u7684\u5b57\u8282\u6570 disk_readiops \u78c1\u76d8\u6bcf\u79d2\u7684\u8bfb\u8bf7\u6c42\u6570\u91cf disk_writeiops \u78c1\u76d8\u6bcf\u79d2\u7684\u5199\u8bf7\u6c42\u6570\u91cf inode_utilization inode \u5df2\u4f7f\u7528\u767e\u5206\u6bd4","title":"\u78c1\u76d8"},{"location":"nebula-dashboard/6.monitor-parameter/#_6","text":"\u53c2\u6570 \u8bf4\u660e network_in_rate \u7f51\u5361\u6bcf\u79d2\u63a5\u6536\u7684\u5b57\u8282\u6570 network_out_rate \u7f51\u5361\u6bcf\u79d2\u53d1\u9001\u7684\u5b57\u8282\u6570 network_in_errs \u7f51\u5361\u6bcf\u79d2\u63a5\u6536\u9519\u8bef\u7684\u5b57\u8282\u6570 network_out_errs \u7f51\u5361\u6bcf\u79d2\u53d1\u9001\u9519\u8bef\u7684\u5b57\u8282\u6570 network_in_packets \u7f51\u5361\u6bcf\u79d2\u63a5\u6536\u7684\u6570\u636e\u5305\u6570\u91cf network_out_packets \u7f51\u5361\u6bcf\u79d2\u53d1\u9001\u7684\u6570\u636e\u5305\u6570\u91cf","title":"\u6d41\u91cf"},{"location":"nebula-dashboard/6.monitor-parameter/#_7","text":"","title":"\u670d\u52a1"},{"location":"nebula-dashboard/6.monitor-parameter/#_8","text":"\u6307\u6807\u7edf\u8ba1\u7684\u65f6\u95f4\u8303\u56f4\uff0c\u5f53\u524d\u652f\u6301 5 \u79d2\u300160 \u79d2\u3001600 \u79d2\u548c 3600 \u79d2\uff0c\u5206\u522b\u8868\u793a\u6700\u8fd1 5 \u79d2\u3001\u6700\u8fd1 1 \u5206\u949f\u3001\u6700\u8fd1 10 \u5206\u949f\u548c\u6700\u8fd1 1 \u5c0f\u65f6\u3002","title":"\u5468\u671f"},{"location":"nebula-dashboard/6.monitor-parameter/#_9","text":"\u53c2\u6570 \u8bf4\u660e rate \u5468\u671f\u5185\u5e73\u5747\u6bcf\u79d2\u64cd\u4f5c\u7684\u901f\u7387 sum \u5468\u671f\u5185\u64cd\u4f5c\u7684\u603b\u548c avg \u5468\u671f\u5185\u54cd\u5e94\u5e73\u5747\u8017\u65f6 P75 \u5468\u671f\u5185\u54cd\u5e94\u8017\u65f6\u4ece\u5c0f\u5230\u5927\u6392\u5217\uff0c\u987a\u5e8f\u5904\u4e8e 75%\u4f4d\u7f6e\u7684\u5206\u4f4d\u6570 P95 \u5468\u671f\u5185\u54cd\u5e94\u8017\u65f6\u4ece\u5c0f\u5230\u5927\u6392\u5217\uff0c\u987a\u5e8f\u5904\u4e8e 95%\u4f4d\u7f6e\u7684\u5206\u4f4d\u6570 P99 \u5468\u671f\u5185\u54cd\u5e94\u8017\u65f6\u4ece\u5c0f\u5230\u5927\u6392\u5217\uff0c\u987a\u5e8f\u5904\u4e8e 99%\u4f4d\u7f6e\u7684\u5206\u4f4d\u6570 P999 \u5468\u671f\u5185\u54cd\u5e94\u8017\u65f6\u4ece\u5c0f\u5230\u5927\u6392\u5217\uff0c\u987a\u5e8f\u5904\u4e8e 99.9%\u4f4d\u7f6e\u7684\u5206\u4f4d\u6570 Note \u4ee5\u4e0b\u4e3a Dashboard \u83b7\u53d6\u5185\u6838\u7684\u5168\u91cf\u6307\u6807\uff0c\u4f46 Dashboard \u4ec5\u5c55\u793a\u91cd\u8981\u7684\u6307\u6807\u3002","title":"\u805a\u5408\u65b9\u5f0f"},{"location":"nebula-dashboard/6.monitor-parameter/#graph","text":"\u53c2\u6570 \u8bf4\u660e num_active_queries \u6d3b\u8dc3\u7684\u67e5\u8be2\u8bed\u53e5\u6570\u7684\u53d8\u5316\u6570\u3002 \u8ba1\u7b97\u516c\u5f0f\uff1a\u65f6\u95f4\u8303\u56f4\u5185\u5f00\u59cb\u6267\u884c\u7684\u8bed\u53e5\u6570\u51cf\u53bb\u6267\u884c\u5b8c\u6bd5\u7684\u8bed\u53e5\u6570\u3002 num_active_sessions \u6d3b\u8dc3\u7684\u4f1a\u8bdd\u6570\u7684\u53d8\u5316\u6570\u3002 \u8ba1\u7b97\u516c\u5f0f\uff1a\u65f6\u95f4\u8303\u56f4\u5185\u767b\u5f55\u7684\u4f1a\u8bdd\u6570\u51cf\u53bb\u767b\u51fa\u7684\u4f1a\u8bdd\u6570\u3002 \u4f8b\u5982\u67e5\u8be2num_active_sessions.sum.5\uff0c\u8fc7\u53bb 5 \u79d2\u4e2d\u767b\u5f55\u4e86 10 \u4e2a\u4f1a\u8bdd\u6570\uff0c\u767b\u51fa\u4e86 30 \u4e2a\u4f1a\u8bdd\u6570\uff0c\u90a3\u4e48\u8be5\u6307\u6807\u503c\u5c31\u662f -20 \uff0810-30\uff09\u3002 num_aggregate_executors \u805a\u5408\uff08Aggregate\uff09\u7b97\u5b50\u6267\u884c\u65f6\u95f4\u3002 num_auth_failed_sessions_bad_username_password \u56e0\u7528\u6237\u540d\u5bc6\u7801\u9519\u8bef\u5bfc\u9a8c\u8bc1\u5931\u8d25\u7684\u4f1a\u8bdd\u6570\u91cf\u3002 num_auth_failed_sessions_out_of_max_allowed \u56e0\u4e3a\u8d85\u8fc7 FLAG_OUT_OF_MAX_ALLOWED_CONNECTIONS \u53c2\u6570\u5bfc\u81f4\u7684\u9a8c\u8bc1\u767b\u5f55\u7684\u5931\u8d25\u7684\u4f1a\u8bdd\u6570\u91cf\u3002 num_auth_failed_sessions \u767b\u5f55\u9a8c\u8bc1\u5931\u8d25\u7684\u4f1a\u8bdd\u6570\u91cf\u3002 num_indexscan_executors \u7d22\u5f15\u626b\u63cf\uff08IndexScan\uff09\u7b97\u5b50\u6267\u884c\u65f6\u95f4\u3002 num_killed_queries \u88ab\u7ec8\u6b62\u7684\u67e5\u8be2\u6570\u91cf\u3002 num_opened_sessions \u670d\u52a1\u7aef\u5efa\u7acb\u8fc7\u7684\u4f1a\u8bdd\u6570\u91cf\u3002 num_queries \u67e5\u8be2\u6b21\u6570\u3002 num_query_errors_leader_changes \u56e0\u67e5\u8be2\u9519\u8bef\u800c\u5bfc\u81f4\u7684 Leader \u53d8\u66f4\u7684\u6b21\u6570\u3002 num_query_errors \u67e5\u8be2\u9519\u8bef\u6b21\u6570\u3002 num_reclaimed_expired_sessions \u670d\u52a1\u7aef\u4e3b\u52a8\u56de\u6536\u7684\u8fc7\u671f\u7684\u4f1a\u8bdd\u6570\u91cf\u3002 num_rpc_sent_to_metad_failed Graphd \u670d\u52a1\u53d1\u7ed9 Metad \u7684 RPC \u8bf7\u6c42\u5931\u8d25\u7684\u6570\u91cf\u3002 num_rpc_sent_to_metad Graphd \u670d\u52a1\u53d1\u7ed9 Metad \u670d\u52a1\u7684 RPC \u8bf7\u6c42\u6570\u91cf\u3002 num_rpc_sent_to_storaged_failed Graphd \u670d\u52a1\u53d1\u7ed9 Storaged \u670d\u52a1\u7684 RPC \u8bf7\u6c42\u5931\u8d25\u7684\u6570\u91cf\u3002 num_rpc_sent_to_storaged Graphd \u670d\u52a1\u53d1\u7ed9 Storaged \u670d\u52a1\u7684 RPC \u8bf7\u6c42\u6570\u91cf\u3002 num_sentences Graphd \u670d\u52a1\u63a5\u6536\u7684\u8bed\u53e5\u6570\u3002 num_slow_queries \u6162\u67e5\u8be2\u6b21\u6570\u3002 num_sort_executors \u6392\u5e8f\uff08Sort\uff09\u7b97\u5b50\u6267\u884c\u65f6\u95f4\u3002 optimizer_latency_us \u4f18\u5316\u5668\u9636\u6bb5\u5ef6\u8fdf\u65f6\u95f4\u3002 query_latency_us \u67e5\u8be2\u5ef6\u8fdf\u65f6\u95f4\u3002 slow_query_latency_us \u6162\u67e5\u8be2\u5ef6\u8fdf\u65f6\u95f4\u3002 num_queries_hit_memory_watermark \u8fbe\u5230\u5185\u5b58\u6c34\u4f4d\u7ebf\u7684\u8bed\u53e5\u7684\u6570\u91cf\u3002 resp_part_completeness \u90e8\u5206\u6210\u529f\u7684\u5b8c\u6574\u6027\u3002\u9700\u8981\u5728 Graph \u914d\u7f6e\u4e2d\u8bbe\u7f6e accept_partial_success \u4e3a true \u3002","title":"Graph"},{"location":"nebula-dashboard/6.monitor-parameter/#meta","text":"\u53c2\u6570 \u8bf4\u660e commit_log_latency_us Raft \u534f\u8bae\u4e2d Commit \u65e5\u5fd7\u7684\u5ef6\u8fdf\u65f6\u95f4\u3002 commit_snapshot_latency_us Raft \u534f\u8bae\u4e2d Commit \u5feb\u7167\u7684\u5ef6\u8fdf\u65f6\u95f4\u3002 heartbeat_latency_us \u5fc3\u8df3\u5ef6\u8fdf\u65f6\u95f4\u3002 num_heartbeats \u5fc3\u8df3\u6b21\u6570\u3002 num_raft_votes Raft \u534f\u8bae\u4e2d\u6295\u7968\u7684\u6b21\u6570\u3002 transfer_leader_latency_us Raft \u534f\u8bae\u4e2d\u8f6c\u79fb Leader \u7684\u5ef6\u8fdf\u65f6\u95f4\u3002 num_agent_heartbeats AgentHBProcessor \u5fc3\u8df3\u6b21\u6570\u3002 agent_heartbeat_latency_us AgentHBProcessor \u5ef6\u8fdf\u65f6\u95f4\u3002 replicate_log_latency_us Raft \u590d\u5236\u65e5\u5fd7\u81f3\u5927\u591a\u6570\u8282\u70b9\u7684\u5ef6\u8fdf\u3002 num_send_snapshot Raft \u53d1\u9001\u5feb\u7167\u81f3\u5176\u4ed6\u8282\u70b9\u7684\u6b21\u6570\u3002 append_log_latency_us Raft \u590d\u5236\u65e5\u5fd7\u5230\u5355\u4e2a\u8282\u70b9\u7684\u5ef6\u8fdf\u3002 append_wal_latency_us Raft \u5199\u5165\u5355\u6761 WAL \u7684\u5ef6\u8fdf\u3002 num_grant_votes Raft \u6295\u7968\u7ed9\u5176\u4ed6\u8282\u70b9\u7684\u6b21\u6570\u3002 num_start_elect Raft \u53d1\u8d77\u6295\u7968\u7684\u6b21\u6570\u3002","title":"Meta"},{"location":"nebula-dashboard/6.monitor-parameter/#storage","text":"\u53c2\u6570 \u8bf4\u660e add_edges_latency_us \u6dfb\u52a0\u8fb9\u7684\u5ef6\u8fdf\u65f6\u95f4\u3002 add_vertices_latency_us \u6dfb\u52a0\u70b9\u7684\u5ef6\u8fdf\u65f6\u95f4\u3002 commit_log_latency_us Raft \u534f\u8bae\u4e2d Commit \u65e5\u5fd7\u7684\u5ef6\u8fdf\u65f6\u95f4\u3002 commit_snapshot_latency_us Raft \u534f\u8bae\u4e2d Commit \u5feb\u7167\u7684\u5ef6\u8fdf\u65f6\u95f4\u3002 delete_edges_latency_us \u5220\u9664\u8fb9\u7684\u5ef6\u8fdf\u65f6\u95f4\u3002 delete_vertices_latency_us \u5220\u9664\u70b9\u7684\u5ef6\u8fdf\u65f6\u95f4\u3002 get_neighbors_latency_us \u67e5\u8be2\u90bb\u5c45\u5ef6\u8fdf\u65f6\u95f4\u3002 get_dst_by_src_latency_us \u901a\u8fc7\u8d77\u59cb\u70b9\u83b7\u53d6\u7ec8\u70b9\u7684\u5ef6\u8fdf\u65f6\u95f4\u3002 num_get_prop GetPropProcessor \u6267\u884c\u7684\u6b21\u6570\u3002 num_get_neighbors_errors GetNeighborsProcessor \u6267\u884c\u51fa\u9519\u7684\u6b21\u6570\u3002 num_get_dst_by_src_errors GetDstBySrcProcessor \u6267\u884c\u51fa\u9519\u7684\u6b21\u6570\u3002 get_prop_latency_us GetPropProcessor \u6267\u884c\u7684\u5ef6\u8fdf\u65f6\u95f4\u3002 num_edges_deleted \u5220\u9664\u7684\u8fb9\u6570\u91cf\u3002 num_edges_inserted \u63d2\u5165\u7684\u8fb9\u6570\u91cf\u3002 num_raft_votes Raft \u534f\u8bae\u4e2d\u6295\u7968\u7684\u6b21\u6570\u3002 num_rpc_sent_to_metad_failed Storaged \u670d\u52a1\u53d1\u7ed9 Metad \u670d\u52a1\u7684 RPC \u8bf7\u6c42\u5931\u8d25\u7684\u6570\u91cf\u3002 num_rpc_sent_to_metad Storaged \u670d\u52a1\u53d1\u7ed9 Metad \u670d\u52a1\u7684 RPC \u8bf7\u6c42\u6570\u91cf\u3002 num_tags_deleted \u5220\u9664\u7684 Tag \u6570\u91cf\u3002 num_vertices_deleted \u5220\u9664\u7684\u70b9\u6570\u91cf\u3002 num_vertices_inserted \u63d2\u5165\u7684\u70b9\u6570\u91cf\u3002 transfer_leader_latency_us Raft \u534f\u8bae\u4e2d\u8f6c\u79fb Leader \u7684\u5ef6\u8fdf\u65f6\u95f4\u3002 lookup_latency_us LookupProcessor \u6267\u884c\u7684\u5ef6\u8fdf\u65f6\u95f4\u3002 num_lookup_errors LookupProcessor \u6267\u884c\u65f6\u51fa\u9519\u7684\u6b21\u6570\u3002 num_scan_vertex ScanVertexProcessor \u6267\u884c\u7684\u6b21\u6570\u3002 num_scan_vertex_errors ScanVertexProcessor \u6267\u884c\u65f6\u51fa\u9519\u7684\u6b21\u6570\u3002 update_edge_latency_us UpdateEdgeProcessor \u6267\u884c\u7684\u5ef6\u8fdf\u65f6\u95f4\u3002 num_update_vertex UpdateVertexProcessor \u6267\u884c\u7684\u6b21\u6570\u3002 num_update_vertex_errors UpdateVertexProcessor \u6267\u884c\u65f6\u51fa\u9519\u7684\u6b21\u6570\u3002 kv_get_latency_us Getprocessor \u7684\u5ef6\u8fdf\u65f6\u95f4\u3002 kv_put_latency_us PutProcessor \u7684\u5ef6\u8fdf\u65f6\u95f4\u3002 kv_remove_latency_us RemoveProcessor \u7684\u5ef6\u8fdf\u65f6\u95f4\u3002 num_kv_get_errors GetProcessor \u6267\u884c\u51fa\u9519\u6b21\u6570\u3002 num_kv_get GetProcessor \u6267\u884c\u6b21\u6570\u3002 num_kv_put_errors PutProcessor \u6267\u884c\u51fa\u9519\u6b21\u6570\u3002 num_kv_put PutProcessor \u6267\u884c\u6b21\u6570\u3002 num_kv_remove_errors RemoveProcessor \u6267\u884c\u51fa\u9519\u6b21\u6570\u3002 num_kv_remove RemoveProcessor \u6267\u884c\u6b21\u6570\u3002 forward_tranx_latency_us \u4f20\u8f93\u5ef6\u8fdf\u65f6\u95f4\u3002 scan_edge_latency_us ScanEdgeProcessor \u6267\u884c\u7684\u5ef6\u8fdf\u65f6\u95f4\u3002 num_scan_edge_errors ScanEdgeProcessor \u6267\u884c\u65f6\u51fa\u9519\u7684\u6b21\u6570\u3002 num_scan_edge ScanEdgeProcessor \u6267\u884c\u7684\u6b21\u6570\u3002 scan_vertex_latency_us ScanVertexProcessor \u6267\u884c\u7684\u5ef6\u8fdf\u65f6\u95f4\u3002 num_add_edges \u6dfb\u52a0\u8fb9\u7684\u6b21\u6570\u3002 num_add_edges_errors \u6dfb\u52a0\u8fb9\u65f6\u51fa\u9519\u7684\u6b21\u6570\u3002 num_add_vertices \u6dfb\u52a0\u70b9\u7684\u6b21\u6570\u3002 num_start_elect Raft \u53d1\u8d77\u6295\u7968\u7684\u6b21\u6570 num_add_vertices_errors \u6dfb\u52a0\u70b9\u65f6\u51fa\u9519\u7684\u6b21\u6570\u3002 num_delete_vertices_errors \u5220\u9664\u70b9\u65f6\u51fa\u9519\u7684\u6b21\u6570\u3002 append_log_latency_us Raft \u590d\u5236\u65e5\u5fd7\u5230\u5355\u4e2a\u8282\u70b9\u7684\u5ef6\u8fdf\u3002 num_grant_votes Raft \u6295\u7968\u7ed9\u5176\u4ed6\u8282\u70b9\u7684\u6b21\u6570\u3002 replicate_log_latency_us Raft \u590d\u5236\u65e5\u5fd7\u5230\u5927\u591a\u6570\u8282\u70b9\u7684\u5ef6\u8fdf\u3002 num_delete_tags \u5220\u9664 Tag \u7684\u6b21\u6570\u3002 num_delete_tags_errors \u5220\u9664 Tag \u65f6\u51fa\u9519\u7684\u6b21\u6570\u3002 num_delete_edges \u5220\u9664\u8fb9\u7684\u6b21\u6570\u3002 num_delete_edges_errors \u5220\u9664\u8fb9\u65f6\u51fa\u9519\u7684\u6b21\u6570\u3002 num_send_snapshot \u53d1\u9001\u5feb\u7167\u7684\u6b21\u6570\u3002 update_vertex_latency_us UpdateVertexProcessor \u6267\u884c\u7684\u5ef6\u8fdf\u65f6\u95f4\u3002 append_wal_latency_us Raft \u5199\u5165\u5355\u6761 WAL \u7684\u5ef6\u8fdf\u3002 num_update_edge UpdateEdgeProcessor \u6267\u884c\u7684\u6b21\u6570\u3002 delete_tags_latency_us \u5220\u9664 Tag \u7684\u5ef6\u8fdf\u65f6\u95f4\u3002 num_update_edge_errors UpdateEdgeProcessor \u6267\u884c\u65f6\u51fa\u9519\u7684\u6b21\u6570\u3002 num_get_neighbors GetNeighborsProcessor \u6267\u884c\u7684\u6b21\u6570\u3002 num_get_dst_by_src GetDstBySrcProcessor \u6267\u884c\u7684\u6b21\u6570\u3002 num_get_prop_errors GetPropProcessor \u6267\u884c\u65f6\u51fa\u9519\u7684\u6b21\u6570\u3002 num_delete_vertices \u5220\u9664\u70b9\u7684\u6b21\u6570\u3002 num_lookup LookupProcessor \u6267\u884c\u7684\u6b21\u6570\u3002 num_sync_data Storage \u540c\u6b65 Drainer \u6570\u636e\u7684\u6b21\u6570\u3002 num_sync_data_errors Storage \u540c\u6b65 Drainer \u6570\u636e\u51fa\u9519\u7684\u6b21\u6570\u3002 sync_data_latency_us Storage \u540c\u6b65 Drainer \u6570\u636e\u7684\u5ef6\u8fdf\u65f6\u95f4\u3002","title":"Storage"},{"location":"nebula-dashboard/6.monitor-parameter/#_10","text":"Note \u56fe\u7a7a\u95f4\u7ea7\u522b\u76d1\u63a7\u6307\u6807\u662f\u52a8\u6001\u521b\u5efa\u7684, \u53ea\u6709\u5f53\u56fe\u7a7a\u95f4\u5185\u89e6\u53d1\u8be5\u884c\u4e3a\u65f6\uff0c\u5bf9\u5e94\u7684\u6307\u6807\u624d\u4f1a\u521b\u5efa\uff0c\u7528\u6237\u624d\u80fd\u67e5\u8be2\u5230\u3002 \u53c2\u6570 \u8bf4\u660e num_active_queries \u5f53\u524d\u6b63\u5728\u6267\u884c\u7684\u67e5\u8be2\u6570\u3002 num_queries \u67e5\u8be2\u6b21\u6570\u3002 num_sentences Graphd \u670d\u52a1\u63a5\u6536\u7684\u8bed\u53e5\u6570\u3002 optimizer_latency_us \u4f18\u5316\u5668\u9636\u6bb5\u5ef6\u8fdf\u65f6\u95f4\u3002 query_latency_us \u67e5\u8be2\u5ef6\u8fdf\u65f6\u95f4\u3002 num_slow_queries \u6162\u67e5\u8be2\u6b21\u6570\u3002 num_query_errors \u67e5\u8be2\u62a5\u9519\u8bed\u53e5\u6570\u91cf\u3002 num_query_errors_leader_changes \u56e0\u67e5\u8be2\u9519\u8bef\u800c\u5bfc\u81f4\u7684 Leader \u53d8\u66f4\u7684\u6b21\u6570\u3002 num_killed_queries \u88ab\u7ec8\u6b62\u7684\u67e5\u8be2\u6570\u91cf\u3002 num_aggregate_executors \u805a\u5408\uff08Aggregate\uff09\u7b97\u5b50\u6267\u884c\u65f6\u95f4\u3002 num_sort_executors \u6392\u5e8f\uff08Sort\uff09\u7b97\u5b50\u6267\u884c\u65f6\u95f4\u3002 num_indexscan_executors \u7d22\u5f15\u626b\u63cf\uff08IndexScan\uff09\u7b97\u5b50\u6267\u884c\u65f6\u95f4\u3002 num_auth_failed_sessions_bad_username_password \u56e0\u7528\u6237\u540d\u5bc6\u7801\u9519\u8bef\u5bfc\u9a8c\u8bc1\u5931\u8d25\u7684\u4f1a\u8bdd\u6570\u91cf\u3002 num_auth_failed_sessions \u767b\u5f55\u9a8c\u8bc1\u5931\u8d25\u7684\u4f1a\u8bdd\u6570\u91cf\u3002 num_opened_sessions \u670d\u52a1\u7aef\u5efa\u7acb\u8fc7\u7684\u4f1a\u8bdd\u6570\u91cf\u3002 num_queries_hit_memory_watermark \u8fbe\u5230\u5185\u5b58\u6c34\u4f4d\u7ebf\u7684\u8bed\u53e5\u7684\u6570\u91cf\u3002 num_reclaimed_expired_sessions \u670d\u52a1\u7aef\u4e3b\u52a8\u56de\u6536\u7684\u8fc7\u671f\u7684\u4f1a\u8bdd\u6570\u91cf\u3002 num_rpc_sent_to_metad_failed Graphd \u670d\u52a1\u53d1\u7ed9 Metad \u7684 RPC \u8bf7\u6c42\u5931\u8d25\u7684\u6570\u91cf\u3002 num_rpc_sent_to_metad Graphd \u670d\u52a1\u53d1\u7ed9 Metad \u670d\u52a1\u7684 RPC \u8bf7\u6c42\u6570\u91cf\u3002 num_rpc_sent_to_storaged_failed Graphd \u670d\u52a1\u53d1\u7ed9 Storaged \u670d\u52a1\u7684 RPC \u8bf7\u6c42\u5931\u8d25\u7684\u6570\u91cf\u3002 num_rpc_sent_to_storaged Graphd \u670d\u52a1\u53d1\u7ed9 Storaged \u670d\u52a1\u7684 RPC \u8bf7\u6c42\u6570\u91cf\u3002 slow_query_latency_us \u6162\u67e5\u8be2\u5ef6\u8fdf\u65f6\u95f4\u3002","title":"\u56fe\u7a7a\u95f4\u7ea7\u522b\u76d1\u63a7\u6307\u6807"},{"location":"nebula-operator/1.introduction-to-nebula-operator/","text":"\u4ec0\u4e48\u662f NebulaGraph Operator \u00b6 \u57fa\u672c\u6982\u5ff5 \u00b6 NebulaGraph Operator \u662f\u7528\u4e8e\u5728 Kubernetes \u7cfb\u7edf\u4e0a\u81ea\u52a8\u5316\u90e8\u7f72\u548c\u8fd0\u7ef4 NebulaGraph \u96c6\u7fa4\u7684\u5de5\u5177\u3002\u4f9d\u6258\u4e8e Kubernetes \u6269\u5c55\u673a\u5236\uff0cNebulaGraph\u5c06\u5176\u8fd0\u7ef4\u9886\u57df\u7684\u77e5\u8bc6\u5168\u9762\u6ce8\u5165\u81f3 Kubernetes \u7cfb\u7edf\u4e2d\uff0c\u8ba9NebulaGraph\u6210\u4e3a\u771f\u6b63\u7684\u4e91\u539f\u751f\u56fe\u6570\u636e\u5e93\u3002 \u5de5\u4f5c\u539f\u7406 \u00b6 \u5bf9\u4e8e Kubernetes \u7cfb\u7edf\u5185\u4e0d\u5b58\u5728\u7684\u8d44\u6e90\u7c7b\u578b\uff0c\u7528\u6237\u53ef\u4ee5\u901a\u8fc7\u6dfb\u52a0\u81ea\u5b9a\u4e49 API \u5bf9\u8c61\u7684\u65b9\u5f0f\u6ce8\u518c\uff0c\u5e38\u89c1\u7684\u65b9\u6cd5\u662f\u4f7f\u7528 CustomResourceDefinition\uff08CRD\uff09 \u3002 NebulaGraph Operator \u5c06NebulaGraph\u96c6\u7fa4\u7684\u90e8\u7f72\u7ba1\u7406\u62bd\u8c61\u4e3a CRD\u3002\u901a\u8fc7\u7ed3\u5408\u591a\u4e2a\u5185\u7f6e\u7684 API \u5bf9\u8c61\uff0c\u5305\u62ec StatefulSet\u3001Service \u548c ConfigMap\uff0cNebulaGraph\u96c6\u7fa4\u7684\u65e5\u5e38\u7ba1\u7406\u548c\u7ef4\u62a4\u88ab\u7f16\u7801\u4e3a\u4e00\u4e2a\u63a7\u5236\u5faa\u73af\u3002\u5728 Kubernetes \u7cfb\u7edf\u5185\uff0c\u6bcf\u4e00\u79cd\u5185\u7f6e\u8d44\u6e90\u5bf9\u8c61\uff0c\u90fd\u8fd0\u884c\u7740\u4e00\u4e2a\u7279\u5b9a\u7684\u63a7\u5236\u5faa\u73af\uff0c\u5c06\u5b83\u7684\u5b9e\u9645\u72b6\u6001\u901a\u8fc7\u4e8b\u5148\u89c4\u5b9a\u597d\u7684\u7f16\u6392\u52a8\u4f5c\uff0c\u9010\u6b65\u8c03\u6574\u4e3a\u6700\u7ec8\u7684\u671f\u671b\u72b6\u6001\u3002\u5f53\u4e00\u4e2a CR \u5b9e\u4f8b\u88ab\u63d0\u4ea4\u65f6\uff0cNebulaGraph Operator \u4f1a\u6839\u636e\u63a7\u5236\u6d41\u7a0b\u9a71\u52a8\u6570\u636e\u5e93\u96c6\u7fa4\u8fdb\u5165\u6700\u7ec8\u72b6\u6001\u3002 \u529f\u80fd\u4ecb\u7ecd \u00b6 NebulaGraph Operator \u5df2\u5177\u5907\u7684\u529f\u80fd\u5982\u4e0b\uff1a \u96c6\u7fa4\u521b\u5efa\u548c\u5378\u8f7d \uff1aNebulaGraph Operator \u7b80\u5316\u4e86\u7528\u6237\u90e8\u7f72\u548c\u5378\u8f7d\u96c6\u7fa4\u7684\u8fc7\u7a0b\u3002\u7528\u6237\u53ea\u9700\u63d0\u4f9b\u5bf9\u5e94\u7684 CR \u6587\u4ef6\uff0cNebulaGraph Operator \u5373\u53ef\u5feb\u901f\u521b\u5efa\u6216\u8005\u5220\u9664\u4e00\u4e2a\u5bf9\u5e94\u7684NebulaGraph\u96c6\u7fa4\u3002\u66f4\u591a\u4fe1\u606f\u53c2\u8003 \u4f7f\u7528 Kubectl \u90e8\u7f72NebulaGraph\u96c6\u7fa4 \u6216\u8005 \u4f7f\u7528 Helm \u90e8\u7f72NebulaGraph\u96c6\u7fa4 \u3002 \u96c6\u7fa4\u5347\u7ea7 \uff1a\u652f\u6301\u5347\u7ea7 3.5.0 \u7248\u7684NebulaGraph\u96c6\u7fa4\u81f3 3.6.0 \u7248\u3002 \u6545\u969c\u81ea\u6108 \uff1aNebulaGraph Operator \u8c03\u7528NebulaGraph\u96c6\u7fa4\u63d0\u4f9b\u7684\u63a5\u53e3\uff0c\u52a8\u6001\u5730\u611f\u77e5\u670d\u52a1\u72b6\u6001\u3002\u4e00\u65e6\u53d1\u73b0\u5f02\u5e38\uff0cNebulaGraph Operator \u81ea\u52a8\u8fdb\u884c\u5bb9\u9519\u5904\u7406\u3002\u66f4\u591a\u4fe1\u606f\u53c2\u8003 \u6545\u969c\u81ea\u6108 \u3002 \u5747\u8861\u8c03\u5ea6 \uff1a\u57fa\u4e8e\u8c03\u5ea6\u5668\u6269\u5c55\u63a5\u53e3\uff0cNebulaGraph Operator \u63d0\u4f9b\u7684\u8c03\u5ea6\u5668\u53ef\u4ee5\u5c06\u5e94\u7528 Pods \u5747\u5300\u5730\u5206\u5e03\u5728NebulaGraph\u96c6\u7fa4\u4e2d\u3002 \u4f7f\u7528\u9650\u5236 \u00b6 \u7248\u672c\u9650\u5236 \u00b6 NebulaGraph Operator \u4e0d\u652f\u6301 v1.x \u7248\u672c\u7684 NebulaGraph\uff0c\u5176\u4e0eNebulaGraph\u7248\u672c\u7684\u5bf9\u5e94\u5173\u7cfb\u5982\u4e0b\uff1a NebulaGraph\u7248\u672c NebulaGraph Operator \u7248\u672c 3.5.x ~ 3.6.0 1.5.0 \u30011.6.x 3.0.0 ~ 3.4.1 1.3.0\u30011.4.0 ~ 1.4.2 3.0.0 ~ 3.3.x 1.0.0\u30011.1.0\u30011.2.0 2.5.x ~ 2.6.x 0.9.0 2.5.x 0.8.0 \u5386\u53f2\u7248\u672c\u517c\u5bb9\u6027 1.x \u7248\u672c\u7684 NebulaGraph Operator \u4e0d\u517c\u5bb9 3.x \u4ee5\u4e0b\u7248\u672c\u7684 NebulaGraph. \u7531\u4e8e 0.9.0 \u7248\u672c\u7684 NebulaGraph Operator \u7684\u65e5\u5fd7\u76d8\u548c\u6570\u636e\u76d8\u5206\u5f00\u5b58\u50a8\uff0c\u56e0\u6b64\u7528 0.9.0 \u7248\u7684 NebulaGraph Operator \u7ba1\u7406\u901a\u8fc7 0.8.0 \u7248\u672c\u521b\u5efa\u7684 2.5.x \u7248\u672c\u7684NebulaGraph\u96c6\u7fa4\u4f1a\u5bfc\u81f4\u517c\u5bb9\u6027\u95ee\u9898\u3002\u7528\u6237\u53ef\u4ee5\u5907\u4efd 2.5.x \u7248\u672c\u7684NebulaGraph\u96c6\u7fa4\uff0c\u7136\u540e\u4f7f\u7528 0.9.0 \u7248\u672c\u7684 Operator \u521b\u5efa 2.6.x \u7248\u672c\u96c6\u7fa4\u3002 \u66f4\u65b0\u8bf4\u660e \u00b6 Release","title":"\u4ec0\u4e48\u662f NebulaGraph Operator"},{"location":"nebula-operator/1.introduction-to-nebula-operator/#nebulagraph_operator","text":"","title":"\u4ec0\u4e48\u662f NebulaGraph Operator"},{"location":"nebula-operator/1.introduction-to-nebula-operator/#_1","text":"NebulaGraph Operator \u662f\u7528\u4e8e\u5728 Kubernetes \u7cfb\u7edf\u4e0a\u81ea\u52a8\u5316\u90e8\u7f72\u548c\u8fd0\u7ef4 NebulaGraph \u96c6\u7fa4\u7684\u5de5\u5177\u3002\u4f9d\u6258\u4e8e Kubernetes \u6269\u5c55\u673a\u5236\uff0cNebulaGraph\u5c06\u5176\u8fd0\u7ef4\u9886\u57df\u7684\u77e5\u8bc6\u5168\u9762\u6ce8\u5165\u81f3 Kubernetes \u7cfb\u7edf\u4e2d\uff0c\u8ba9NebulaGraph\u6210\u4e3a\u771f\u6b63\u7684\u4e91\u539f\u751f\u56fe\u6570\u636e\u5e93\u3002","title":"\u57fa\u672c\u6982\u5ff5"},{"location":"nebula-operator/1.introduction-to-nebula-operator/#_2","text":"\u5bf9\u4e8e Kubernetes \u7cfb\u7edf\u5185\u4e0d\u5b58\u5728\u7684\u8d44\u6e90\u7c7b\u578b\uff0c\u7528\u6237\u53ef\u4ee5\u901a\u8fc7\u6dfb\u52a0\u81ea\u5b9a\u4e49 API \u5bf9\u8c61\u7684\u65b9\u5f0f\u6ce8\u518c\uff0c\u5e38\u89c1\u7684\u65b9\u6cd5\u662f\u4f7f\u7528 CustomResourceDefinition\uff08CRD\uff09 \u3002 NebulaGraph Operator \u5c06NebulaGraph\u96c6\u7fa4\u7684\u90e8\u7f72\u7ba1\u7406\u62bd\u8c61\u4e3a CRD\u3002\u901a\u8fc7\u7ed3\u5408\u591a\u4e2a\u5185\u7f6e\u7684 API \u5bf9\u8c61\uff0c\u5305\u62ec StatefulSet\u3001Service \u548c ConfigMap\uff0cNebulaGraph\u96c6\u7fa4\u7684\u65e5\u5e38\u7ba1\u7406\u548c\u7ef4\u62a4\u88ab\u7f16\u7801\u4e3a\u4e00\u4e2a\u63a7\u5236\u5faa\u73af\u3002\u5728 Kubernetes \u7cfb\u7edf\u5185\uff0c\u6bcf\u4e00\u79cd\u5185\u7f6e\u8d44\u6e90\u5bf9\u8c61\uff0c\u90fd\u8fd0\u884c\u7740\u4e00\u4e2a\u7279\u5b9a\u7684\u63a7\u5236\u5faa\u73af\uff0c\u5c06\u5b83\u7684\u5b9e\u9645\u72b6\u6001\u901a\u8fc7\u4e8b\u5148\u89c4\u5b9a\u597d\u7684\u7f16\u6392\u52a8\u4f5c\uff0c\u9010\u6b65\u8c03\u6574\u4e3a\u6700\u7ec8\u7684\u671f\u671b\u72b6\u6001\u3002\u5f53\u4e00\u4e2a CR \u5b9e\u4f8b\u88ab\u63d0\u4ea4\u65f6\uff0cNebulaGraph Operator \u4f1a\u6839\u636e\u63a7\u5236\u6d41\u7a0b\u9a71\u52a8\u6570\u636e\u5e93\u96c6\u7fa4\u8fdb\u5165\u6700\u7ec8\u72b6\u6001\u3002","title":"\u5de5\u4f5c\u539f\u7406"},{"location":"nebula-operator/1.introduction-to-nebula-operator/#_3","text":"NebulaGraph Operator \u5df2\u5177\u5907\u7684\u529f\u80fd\u5982\u4e0b\uff1a \u96c6\u7fa4\u521b\u5efa\u548c\u5378\u8f7d \uff1aNebulaGraph Operator \u7b80\u5316\u4e86\u7528\u6237\u90e8\u7f72\u548c\u5378\u8f7d\u96c6\u7fa4\u7684\u8fc7\u7a0b\u3002\u7528\u6237\u53ea\u9700\u63d0\u4f9b\u5bf9\u5e94\u7684 CR \u6587\u4ef6\uff0cNebulaGraph Operator \u5373\u53ef\u5feb\u901f\u521b\u5efa\u6216\u8005\u5220\u9664\u4e00\u4e2a\u5bf9\u5e94\u7684NebulaGraph\u96c6\u7fa4\u3002\u66f4\u591a\u4fe1\u606f\u53c2\u8003 \u4f7f\u7528 Kubectl \u90e8\u7f72NebulaGraph\u96c6\u7fa4 \u6216\u8005 \u4f7f\u7528 Helm \u90e8\u7f72NebulaGraph\u96c6\u7fa4 \u3002 \u96c6\u7fa4\u5347\u7ea7 \uff1a\u652f\u6301\u5347\u7ea7 3.5.0 \u7248\u7684NebulaGraph\u96c6\u7fa4\u81f3 3.6.0 \u7248\u3002 \u6545\u969c\u81ea\u6108 \uff1aNebulaGraph Operator \u8c03\u7528NebulaGraph\u96c6\u7fa4\u63d0\u4f9b\u7684\u63a5\u53e3\uff0c\u52a8\u6001\u5730\u611f\u77e5\u670d\u52a1\u72b6\u6001\u3002\u4e00\u65e6\u53d1\u73b0\u5f02\u5e38\uff0cNebulaGraph Operator \u81ea\u52a8\u8fdb\u884c\u5bb9\u9519\u5904\u7406\u3002\u66f4\u591a\u4fe1\u606f\u53c2\u8003 \u6545\u969c\u81ea\u6108 \u3002 \u5747\u8861\u8c03\u5ea6 \uff1a\u57fa\u4e8e\u8c03\u5ea6\u5668\u6269\u5c55\u63a5\u53e3\uff0cNebulaGraph Operator \u63d0\u4f9b\u7684\u8c03\u5ea6\u5668\u53ef\u4ee5\u5c06\u5e94\u7528 Pods \u5747\u5300\u5730\u5206\u5e03\u5728NebulaGraph\u96c6\u7fa4\u4e2d\u3002","title":"\u529f\u80fd\u4ecb\u7ecd"},{"location":"nebula-operator/1.introduction-to-nebula-operator/#_4","text":"","title":"\u4f7f\u7528\u9650\u5236"},{"location":"nebula-operator/1.introduction-to-nebula-operator/#_5","text":"NebulaGraph Operator \u4e0d\u652f\u6301 v1.x \u7248\u672c\u7684 NebulaGraph\uff0c\u5176\u4e0eNebulaGraph\u7248\u672c\u7684\u5bf9\u5e94\u5173\u7cfb\u5982\u4e0b\uff1a NebulaGraph\u7248\u672c NebulaGraph Operator \u7248\u672c 3.5.x ~ 3.6.0 1.5.0 \u30011.6.x 3.0.0 ~ 3.4.1 1.3.0\u30011.4.0 ~ 1.4.2 3.0.0 ~ 3.3.x 1.0.0\u30011.1.0\u30011.2.0 2.5.x ~ 2.6.x 0.9.0 2.5.x 0.8.0 \u5386\u53f2\u7248\u672c\u517c\u5bb9\u6027 1.x \u7248\u672c\u7684 NebulaGraph Operator \u4e0d\u517c\u5bb9 3.x \u4ee5\u4e0b\u7248\u672c\u7684 NebulaGraph. \u7531\u4e8e 0.9.0 \u7248\u672c\u7684 NebulaGraph Operator \u7684\u65e5\u5fd7\u76d8\u548c\u6570\u636e\u76d8\u5206\u5f00\u5b58\u50a8\uff0c\u56e0\u6b64\u7528 0.9.0 \u7248\u7684 NebulaGraph Operator \u7ba1\u7406\u901a\u8fc7 0.8.0 \u7248\u672c\u521b\u5efa\u7684 2.5.x \u7248\u672c\u7684NebulaGraph\u96c6\u7fa4\u4f1a\u5bfc\u81f4\u517c\u5bb9\u6027\u95ee\u9898\u3002\u7528\u6237\u53ef\u4ee5\u5907\u4efd 2.5.x \u7248\u672c\u7684NebulaGraph\u96c6\u7fa4\uff0c\u7136\u540e\u4f7f\u7528 0.9.0 \u7248\u672c\u7684 Operator \u521b\u5efa 2.6.x \u7248\u672c\u96c6\u7fa4\u3002","title":"\u7248\u672c\u9650\u5236"},{"location":"nebula-operator/1.introduction-to-nebula-operator/#_6","text":"Release","title":"\u66f4\u65b0\u8bf4\u660e"},{"location":"nebula-operator/11.rolling-update-strategy/","text":"NebulaGraph\u96c6\u7fa4\u7684\u6eda\u52a8\u66f4\u65b0\u7b56\u7565 \u00b6 NebulaGraph\u96c6\u7fa4\u4f7f\u7528\u5206\u5e03\u5f0f\u67b6\u6784\u5c06\u6570\u636e\u5206\u6210\u591a\u4e2a\u903b\u8f91\u5206\u7247\uff0c\u8fd9\u4e9b\u5206\u7247\u901a\u5e38\u5747\u5206\u5728\u4e0d\u540c\u7684\u8282\u70b9\u4e0a\u3002\u5206\u5e03\u5f0f\u7cfb\u7edf\u4e2d\uff0c\u540c\u4e00\u4efd\u6570\u636e\u901a\u5e38\u4f1a\u6709\u591a\u4e2a\u526f\u672c\u3002\u4e3a\u4e86\u4fdd\u8bc1\u591a\u4e2a\u526f\u672c\u6570\u636e\u7684\u4e00\u81f4\u6027\uff0cNebulaGraph\u96c6\u7fa4\u4f7f\u7528 Raft \u534f\u8bae\u5b9e\u73b0\u4e86\u591a\u5206\u7247\u526f\u672c\u540c\u6b65\u3002Raft \u534f\u8bae\u4e2d\uff0c\u6bcf\u4e2a\u5206\u7247\u90fd\u4f1a\u9009\u4e3e\u51fa\u4e00\u4e2a Leader \u526f\u672c\uff0cLeader \u526f\u672c\u8d1f\u8d23\u5904\u7406\u5199\u8bf7\u6c42\uff0cFollower \u526f\u672c\u8d1f\u8d23\u5904\u7406\u8bfb\u8bf7\u6c42\u3002 \u901a\u8fc7 Operator \u521b\u5efa\u7684NebulaGraph\u96c6\u7fa4\u5728\u6eda\u52a8\u66f4\u65b0\u8fc7\u7a0b\u4e2d\uff0c\u4e00\u4e2a\u5b58\u50a8\u8282\u70b9\u4f1a\u6682\u65f6\u505c\u6b62\u63d0\u4f9b\u670d\u52a1\u4ee5\u8fdb\u884c\u66f4\u65b0\u3002\u5173\u4e8e\u6eda\u52a8\u66f4\u65b0\u7684\u6982\u8ff0\uff0c\u53c2\u89c1 \u6267\u884c\u6eda\u52a8\u66f4\u65b0 \u3002\u5982\u679c Leader \u526f\u672c\u6240\u5728\u7684\u8282\u70b9\u505c\u6b62\u63d0\u4f9b\u670d\u52a1\uff0c\u4f1a\u5bfc\u81f4\u8be5\u5206\u7247\u7684\u8bfb\u5199\u4e0d\u53ef\u7528\u3002\u4e3a\u4e86\u907f\u514d\u8fd9\u79cd\u60c5\u51b5\uff0cOperator \u4f1a\u5728NebulaGraph\u96c6\u7fa4\u6eda\u52a8\u66f4\u65b0\u8fc7\u7a0b\u4e2d\uff0c\u9ed8\u8ba4\u5c06 Leader \u526f\u672c\u8fc1\u79fb\u5230\u5176\u4ed6\u672a\u53d7\u5f71\u54cd\u8282\u70b9\u4e0a\u3002\u8fd9\u6837\uff0c\u5f53\u4e00\u4e2a\u5b58\u50a8\u8282\u70b9\u5904\u4e8e\u66f4\u65b0\u72b6\u6001\u65f6\uff0c\u5176\u4ed6\u8282\u70b9\u4e0a\u7684 Leader \u526f\u672c\u80fd\u591f\u7ee7\u7eed\u5904\u7406\u5ba2\u6237\u7aef\u8bf7\u6c42\uff0c\u4ee5\u4fdd\u8bc1\u96c6\u7fa4\u7684\u8bfb\u5199\u53ef\u7528\u6027\u3002 \u4e00\u4e2a\u5b58\u50a8\u8282\u70b9\u4e0a\u7684\u6240\u6709 Leader \u526f\u672c\u5168\u90e8\u8fc1\u79fb\u5230\u5176\u4ed6\u8282\u70b9\u7684\u8fd9\u4e2a\u8fc7\u7a0b\u53ef\u80fd\u4f1a\u6301\u7eed\u8f83\u957f\u65f6\u95f4\u3002\u4e3a\u4e86\u66f4\u597d\u5730\u63a7\u5236\u6eda\u52a8\u66f4\u65b0\u7684\u65f6\u95f4\uff0cOperator \u63d0\u4f9b\u4e86\u4e00\u4e2a\u540d\u4e3a enableForceUpdate \u53c2\u6570\u3002\u5f53\u786e\u5b9a\u6ca1\u6709\u5916\u90e8\u8bbf\u95ee\u6d41\u91cf\u65f6\uff0c\u53ef\u5c06\u8be5\u53c2\u6570\u8bbe\u7f6e\u4e3a true \uff0c\u8fd9\u6837\uff0cLeader \u526f\u672c\u5c06\u4e0d\u4f1a\u88ab\u8fc1\u79fb\u5230\u5176\u4ed6\u8282\u70b9\u4e0a\uff0c\u4ece\u800c\u52a0\u5feb\u6eda\u52a8\u66f4\u65b0\u7684\u901f\u5ea6\u3002 \u6eda\u52a8\u66f4\u65b0\u89e6\u53d1\u6761\u4ef6 \u00b6 Operator \u4f1a\u5728\u4ee5\u4e0b\u60c5\u51b5\u4e0b\u89e6\u53d1NebulaGraph\u96c6\u7fa4\u7684\u6eda\u52a8\u66f4\u65b0\uff1a NebulaGraph \u96c6\u7fa4\u7684\u7248\u672c\u53d1\u751f\u53d8\u5316\u3002 NebulaGraph \u96c6\u7fa4\u7684\u914d\u7f6e\u53d1\u751f\u53d8\u5316\u3002 \u914d\u7f6e\u6eda\u52a8\u66f4\u65b0\u7b56\u7565 \u00b6 \u5728\u521b\u5efa\u96c6\u7fa4\u5b9e\u4f8b\u7684 YAML \u6587\u4ef6\u4e2d\uff0c\u6dfb\u52a0 spec.storaged.enableForceUpdate \u53c2\u6570\uff0c\u8bbe\u7f6e\u4e3a true \u6216 false \uff0c\u4ee5\u63a7\u5236\u6eda\u52a8\u66f4\u65b0\u7684\u901f\u5ea6\u3002 \u5f53 enableForceUpdate \u4e3a true \u65f6\uff0c\u8868\u793a\u4e0d\u8fc1\u79fb\u5206\u7247 Leader \u526f\u672c\uff0c\u4ece\u800c\u52a0\u5feb\u6eda\u52a8\u66f4\u65b0\u7684\u901f\u5ea6\uff1b\u53cd\u4e4b\uff0c\u8868\u793a\u8fc1\u79fb\u5206\u7247 Leader \u526f\u672c\uff0c\u4ee5\u4fdd\u8bc1\u96c6\u7fa4\u7684\u8bfb\u5199\u53ef\u7528\u6027\u3002\u9ed8\u8ba4\u503c\u4e3a false \u3002 Caution \u8bbe\u7f6e enableForceUpdate \u4e3a true \u65f6\uff0c\u786e\u4fdd\u6ca1\u6709\u6d41\u91cf\u8fdb\u5165\u96c6\u7fa4\u8fdb\u884c\u8bfb\u5199\u64cd\u4f5c\u3002\u56e0\u4e3a\u8be5\u8bbe\u7f6e\u4f1a\u5f3a\u5236\u91cd\u5efa\u96c6\u7fa4 Pod\uff0c\u6b64\u8fc7\u7a0b\u4f1a\u53d1\u751f\u6570\u636e\u4e22\u5931\u6216\u5ba2\u6237\u7aef\u8bf7\u6c42\u5931\u8d25\u7684\u60c5\u51b5\u3002 \u914d\u7f6e\u793a\u4f8b\uff1a ... spec : ... storaged : enableForceUpdate : true // \u8bbe\u7f6e\u4e3a true \u65f6\uff0c\u52a0\u5feb\u6eda\u52a8\u66f4\u65b0\u7684\u901f\u5ea6\u3002 ...","title":"\u914d\u7f6e\u6eda\u52a8\u66f4\u65b0\u7b56\u7565"},{"location":"nebula-operator/11.rolling-update-strategy/#nebulagraph","text":"NebulaGraph\u96c6\u7fa4\u4f7f\u7528\u5206\u5e03\u5f0f\u67b6\u6784\u5c06\u6570\u636e\u5206\u6210\u591a\u4e2a\u903b\u8f91\u5206\u7247\uff0c\u8fd9\u4e9b\u5206\u7247\u901a\u5e38\u5747\u5206\u5728\u4e0d\u540c\u7684\u8282\u70b9\u4e0a\u3002\u5206\u5e03\u5f0f\u7cfb\u7edf\u4e2d\uff0c\u540c\u4e00\u4efd\u6570\u636e\u901a\u5e38\u4f1a\u6709\u591a\u4e2a\u526f\u672c\u3002\u4e3a\u4e86\u4fdd\u8bc1\u591a\u4e2a\u526f\u672c\u6570\u636e\u7684\u4e00\u81f4\u6027\uff0cNebulaGraph\u96c6\u7fa4\u4f7f\u7528 Raft \u534f\u8bae\u5b9e\u73b0\u4e86\u591a\u5206\u7247\u526f\u672c\u540c\u6b65\u3002Raft \u534f\u8bae\u4e2d\uff0c\u6bcf\u4e2a\u5206\u7247\u90fd\u4f1a\u9009\u4e3e\u51fa\u4e00\u4e2a Leader \u526f\u672c\uff0cLeader \u526f\u672c\u8d1f\u8d23\u5904\u7406\u5199\u8bf7\u6c42\uff0cFollower \u526f\u672c\u8d1f\u8d23\u5904\u7406\u8bfb\u8bf7\u6c42\u3002 \u901a\u8fc7 Operator \u521b\u5efa\u7684NebulaGraph\u96c6\u7fa4\u5728\u6eda\u52a8\u66f4\u65b0\u8fc7\u7a0b\u4e2d\uff0c\u4e00\u4e2a\u5b58\u50a8\u8282\u70b9\u4f1a\u6682\u65f6\u505c\u6b62\u63d0\u4f9b\u670d\u52a1\u4ee5\u8fdb\u884c\u66f4\u65b0\u3002\u5173\u4e8e\u6eda\u52a8\u66f4\u65b0\u7684\u6982\u8ff0\uff0c\u53c2\u89c1 \u6267\u884c\u6eda\u52a8\u66f4\u65b0 \u3002\u5982\u679c Leader \u526f\u672c\u6240\u5728\u7684\u8282\u70b9\u505c\u6b62\u63d0\u4f9b\u670d\u52a1\uff0c\u4f1a\u5bfc\u81f4\u8be5\u5206\u7247\u7684\u8bfb\u5199\u4e0d\u53ef\u7528\u3002\u4e3a\u4e86\u907f\u514d\u8fd9\u79cd\u60c5\u51b5\uff0cOperator \u4f1a\u5728NebulaGraph\u96c6\u7fa4\u6eda\u52a8\u66f4\u65b0\u8fc7\u7a0b\u4e2d\uff0c\u9ed8\u8ba4\u5c06 Leader \u526f\u672c\u8fc1\u79fb\u5230\u5176\u4ed6\u672a\u53d7\u5f71\u54cd\u8282\u70b9\u4e0a\u3002\u8fd9\u6837\uff0c\u5f53\u4e00\u4e2a\u5b58\u50a8\u8282\u70b9\u5904\u4e8e\u66f4\u65b0\u72b6\u6001\u65f6\uff0c\u5176\u4ed6\u8282\u70b9\u4e0a\u7684 Leader \u526f\u672c\u80fd\u591f\u7ee7\u7eed\u5904\u7406\u5ba2\u6237\u7aef\u8bf7\u6c42\uff0c\u4ee5\u4fdd\u8bc1\u96c6\u7fa4\u7684\u8bfb\u5199\u53ef\u7528\u6027\u3002 \u4e00\u4e2a\u5b58\u50a8\u8282\u70b9\u4e0a\u7684\u6240\u6709 Leader \u526f\u672c\u5168\u90e8\u8fc1\u79fb\u5230\u5176\u4ed6\u8282\u70b9\u7684\u8fd9\u4e2a\u8fc7\u7a0b\u53ef\u80fd\u4f1a\u6301\u7eed\u8f83\u957f\u65f6\u95f4\u3002\u4e3a\u4e86\u66f4\u597d\u5730\u63a7\u5236\u6eda\u52a8\u66f4\u65b0\u7684\u65f6\u95f4\uff0cOperator \u63d0\u4f9b\u4e86\u4e00\u4e2a\u540d\u4e3a enableForceUpdate \u53c2\u6570\u3002\u5f53\u786e\u5b9a\u6ca1\u6709\u5916\u90e8\u8bbf\u95ee\u6d41\u91cf\u65f6\uff0c\u53ef\u5c06\u8be5\u53c2\u6570\u8bbe\u7f6e\u4e3a true \uff0c\u8fd9\u6837\uff0cLeader \u526f\u672c\u5c06\u4e0d\u4f1a\u88ab\u8fc1\u79fb\u5230\u5176\u4ed6\u8282\u70b9\u4e0a\uff0c\u4ece\u800c\u52a0\u5feb\u6eda\u52a8\u66f4\u65b0\u7684\u901f\u5ea6\u3002","title":"NebulaGraph\u96c6\u7fa4\u7684\u6eda\u52a8\u66f4\u65b0\u7b56\u7565"},{"location":"nebula-operator/11.rolling-update-strategy/#_1","text":"Operator \u4f1a\u5728\u4ee5\u4e0b\u60c5\u51b5\u4e0b\u89e6\u53d1NebulaGraph\u96c6\u7fa4\u7684\u6eda\u52a8\u66f4\u65b0\uff1a NebulaGraph \u96c6\u7fa4\u7684\u7248\u672c\u53d1\u751f\u53d8\u5316\u3002 NebulaGraph \u96c6\u7fa4\u7684\u914d\u7f6e\u53d1\u751f\u53d8\u5316\u3002","title":"\u6eda\u52a8\u66f4\u65b0\u89e6\u53d1\u6761\u4ef6"},{"location":"nebula-operator/11.rolling-update-strategy/#_2","text":"\u5728\u521b\u5efa\u96c6\u7fa4\u5b9e\u4f8b\u7684 YAML \u6587\u4ef6\u4e2d\uff0c\u6dfb\u52a0 spec.storaged.enableForceUpdate \u53c2\u6570\uff0c\u8bbe\u7f6e\u4e3a true \u6216 false \uff0c\u4ee5\u63a7\u5236\u6eda\u52a8\u66f4\u65b0\u7684\u901f\u5ea6\u3002 \u5f53 enableForceUpdate \u4e3a true \u65f6\uff0c\u8868\u793a\u4e0d\u8fc1\u79fb\u5206\u7247 Leader \u526f\u672c\uff0c\u4ece\u800c\u52a0\u5feb\u6eda\u52a8\u66f4\u65b0\u7684\u901f\u5ea6\uff1b\u53cd\u4e4b\uff0c\u8868\u793a\u8fc1\u79fb\u5206\u7247 Leader \u526f\u672c\uff0c\u4ee5\u4fdd\u8bc1\u96c6\u7fa4\u7684\u8bfb\u5199\u53ef\u7528\u6027\u3002\u9ed8\u8ba4\u503c\u4e3a false \u3002 Caution \u8bbe\u7f6e enableForceUpdate \u4e3a true \u65f6\uff0c\u786e\u4fdd\u6ca1\u6709\u6d41\u91cf\u8fdb\u5165\u96c6\u7fa4\u8fdb\u884c\u8bfb\u5199\u64cd\u4f5c\u3002\u56e0\u4e3a\u8be5\u8bbe\u7f6e\u4f1a\u5f3a\u5236\u91cd\u5efa\u96c6\u7fa4 Pod\uff0c\u6b64\u8fc7\u7a0b\u4f1a\u53d1\u751f\u6570\u636e\u4e22\u5931\u6216\u5ba2\u6237\u7aef\u8bf7\u6c42\u5931\u8d25\u7684\u60c5\u51b5\u3002 \u914d\u7f6e\u793a\u4f8b\uff1a ... spec : ... storaged : enableForceUpdate : true // \u8bbe\u7f6e\u4e3a true \u65f6\uff0c\u52a0\u5feb\u6eda\u52a8\u66f4\u65b0\u7684\u901f\u5ea6\u3002 ...","title":"\u914d\u7f6e\u6eda\u52a8\u66f4\u65b0\u7b56\u7565"},{"location":"nebula-operator/2.deploy-nebula-operator/","text":"\u90e8\u7f72 NebulaGraph Operator \u00b6 \u7528\u6237\u53ef\u4f7f\u7528 Helm \u5de5\u5177\u90e8\u7f72 NebulaGraph Operator\u3002 \u80cc\u666f\u4fe1\u606f \u00b6 NebulaGraph Operator \u4e3a\u7528\u6237\u7ba1\u7406NebulaGraph\u96c6\u7fa4\uff0c\u4f7f\u7528\u6237\u65e0\u9700\u5728\u751f\u4ea7\u73af\u5883\u4e2d\u624b\u52a8\u5b89\u88c5\u3001\u6269\u5c55\u3001\u5347\u7ea7\u548c\u5378\u8f7d NebulaGraph\uff0c\u51cf\u8f7b\u7528\u6237\u7ba1\u7406\u4e0d\u540c\u5e94\u7528\u7248\u672c\u7684\u8d1f\u62c5\u3002 \u524d\u63d0\u6761\u4ef6 \u00b6 \u5b89\u88c5 NebulaGraph Operator \u524d\uff0c\u7528\u6237\u9700\u8981\u5b89\u88c5\u4ee5\u4e0b\u8f6f\u4ef6\u5e76\u786e\u4fdd\u5b89\u88c5\u7248\u672c\u7684\u6b63\u786e\u6027\u3002 \u8f6f\u4ef6 \u7248\u672c\u8981\u6c42 Kubernetes >= 1.16 Helm >= 3.2.0 CoreDNS >= 1.6.0 Note \u5982\u679c\u4f7f\u7528\u57fa\u4e8e\u89d2\u8272\u7684\u8bbf\u95ee\u63a7\u5236\u7684\u7b56\u7565\uff0c\u7528\u6237\u9700\u5f00\u542f RBAC \uff08\u53ef\u9009\uff09\u3002 CoreDNS \u662f\u4e00\u4e2a\u7075\u6d3b\u7684\u3001\u53ef\u6269\u5c55\u7684 DNS \u670d\u52a1\u5668\uff0c\u88ab \u5b89\u88c5 \u5728\u96c6\u7fa4\u5185\u4f5c\u4e3a\u96c6\u7fa4\u5185 Pods \u7684 DNS \u670d\u52a1\u5668\u3002NebulaGraph\u96c6\u7fa4\u4e2d\u7684\u6bcf\u4e2a\u7ec4\u4ef6\u901a\u8fc7 DNS \u89e3\u6790\u7c7b\u4f3c x.default.svc.cluster.local \u8fd9\u6837\u7684\u57df\u540d\u76f8\u4e92\u901a\u4fe1\u3002 \u64cd\u4f5c\u6b65\u9aa4 \u00b6 \u5b89\u88c5 NebulaGraph Operator \u00b6 \u6dfb\u52a0 NebulaGraph Operator Helm \u4ed3\u5e93\u3002 helm repo add nebula-operator https://vesoft-inc.github.io/nebula-operator/charts \u62c9\u53d6\u6700\u65b0\u7684 Operator Helm \u4ed3\u5e93\u3002 helm repo update \u53c2\u8003 Helm \u4ed3\u5e93 \u83b7\u53d6\u66f4\u591a helm repo \u76f8\u5173\u4fe1\u606f\u3002 \u521b\u5efa\u547d\u540d\u7a7a\u95f4\u7528\u4e8e\u5b89\u88c5 NebulaGraph Operator\u3002 kubectl create namespace <namespace_name> \u4f8b\u5982\uff0c\u521b\u5efa nebula-operator-system \u547d\u540d\u7a7a\u95f4\u3002 kubectl create namespace nebula-operator-system nebula-operator chart \u4e2d\u7684\u6240\u6709\u8d44\u6e90\u90fd\u4f1a\u5b89\u88c5\u5728\u8be5\u547d\u540d\u7a7a\u95f4\u4e0b\u3002 \u5b89\u88c5 NebulaGraph Operator\u3002 helm install nebula-operator nebula-operator/nebula-operator --namespace = <namespace_name> --version = ${ chart_version } \u4f8b\u5982\uff0c\u5b89\u88c51.5.0\u7248\u7684 Operator \u547d\u4ee4\u5982\u4e0b\u3002 helm install nebula-operator nebula-operator/nebula-operator --namespace = nebula-operator-system --version = 1 .5.0 1.5.0 \u4e3a nebula-operator chart \u7684\u7248\u672c\uff0c\u4e0d\u6307\u5b9a --version \u65f6\u9ed8\u8ba4\u4f7f\u7528\u6700\u65b0\u7248\u7684 chart\u3002\u6267\u884c helm search repo -l nebula-operator \u67e5\u770b chart \u7248\u672c\u3002 \u7528\u6237\u53ef\u5728\u6267\u884c\u5b89\u88c5 NebulaGraph Operator chart \u547d\u4ee4\u65f6\u81ea\u5b9a\u4e49 Operator \u7684\u914d\u7f6e\u3002\u66f4\u591a\u4fe1\u606f\uff0c\u67e5\u770b\u4e0b\u6587 \u81ea\u5b9a\u4e49\u914d\u7f6e Chart \u3002 \u81ea\u5b9a\u4e49\u914d\u7f6e Chart \u00b6 \u6267\u884c helm install [NAME] [CHART] [flags] \u547d\u4ee4\u5b89\u88c5 Chart \u65f6\uff0c\u53ef\u6307\u5b9a Chart \u914d\u7f6e\u3002\u66f4\u591a\u4fe1\u606f\uff0c\u53c2\u8003 \u5b89\u88c5\u524d\u81ea\u5b9a\u4e49 Chart \u3002 \u5728 nebula-operator chart \u914d\u7f6e\u6587\u4ef6\u4e2d\u67e5\u770b\u76f8\u5173\u7684\u914d\u7f6e\u9009\u9879\u3002 \u6216\u8005\u901a\u8fc7\u547d\u4ee4 helm show values nebula-operator/nebula-operator \u67e5\u770b\u53ef\u914d\u7f6e\u7684\u9009\u9879\uff0c\u5982\u4e0b\u6240\u793a\u3002 [ abby@master ~ ] $ helm show values nebula-operator/nebula-operator image : nebulaOperator : image : vesoft/nebula-operator:v1.5.0 imagePullPolicy : Always kubeRBACProxy : image : bitnami/kube-rbac-proxy:0.14.2 imagePullPolicy : Always kubeScheduler : image : registry.k8s.io/kube-scheduler:v1.24.11 imagePullPolicy : Always imagePullSecrets : [] kubernetesClusterDomain : \"\" controllerManager : create : true replicas : 2 env : [] resources : limits : cpu : 200m memory : 200Mi requests : cpu : 100m memory : 100Mi admissionWebhook : create : false scheduler : create : true schedulerName : nebula-scheduler replicas : 2 env : [] resources : limits : cpu : 200m memory : 200Mi requests : cpu : 100m memory : 100Mi ... \u90e8\u5206\u53c2\u6570\u63cf\u8ff0\u5982\u4e0b\uff1a \u53c2\u6570 \u9ed8\u8ba4\u503c \u63cf\u8ff0 image.nebulaOperator.image vesoft/nebula-operator:v1.5.0 NebulaGraph Operator \u7684\u955c\u50cf\uff0c\u7248\u672c\u4e3a1.5.0\u3002 image.nebulaOperator.imagePullPolicy IfNotPresent \u955c\u50cf\u62c9\u53d6\u7b56\u7565\u3002 imagePullSecrets - \u955c\u50cf\u62c9\u53d6\u5bc6\u94a5\u3002 kubernetesClusterDomain cluster.local \u96c6\u7fa4\u57df\u540d\u3002 controllerManager.create true \u662f\u5426\u542f\u7528 controller-manager\u3002 controllerManager.replicas 2 controller-manager \u526f\u672c\u6570\u3002 admissionWebhook.create false \u662f\u5426\u542f\u7528 Admission Webhook\u3002\u9ed8\u8ba4\u5173\u95ed\uff0c\u5982\u9700\u5f00\u542f\uff0c\u9700\u8bbe\u7f6e\u4e3a true \u5e76\u4e14\u9700\u8981\u5b89\u88c5 cert-manager \u3002 shceduler.create true \u662f\u5426\u542f\u7528 Scheduler\u3002 shceduler.schedulerName nebula-scheduler \u8c03\u5ea6\u5668\u540d\u79f0\u3002 shceduler.replicas 2 nebula-scheduler \u526f\u672c\u6570\u3002 \u4ee5\u4e0b\u793a\u4f8b\u4e3a\u5728\u5b89\u88c5 NebulaGraph Operator \u65f6\uff0c\u6307\u5b9a NebulaGraph Operator \u7684 AdmissionWebhook \u673a\u5236\u4e3a\u5f00\u542f\u72b6\u6001\uff08\u9ed8\u8ba4\u5173\u95ed AdmissionWebhook\uff09\uff1a helm install nebula-operator nebula-operator/nebula-operator --namespace = <nebula-operator-system> --set admissionWebhook.create = true \u66f4\u65b0 NebulaGraph Operator \u00b6 \u62c9\u53d6\u6700\u65b0\u7684 Helm \u4ed3\u5e93\u3002 helm repo update \u901a\u8fc7 --set \u4f20\u9012\u914d\u7f6e\u53c2\u6570\uff0c\u66f4\u65b0 NebulaGraph Operator\u3002 --set \uff1a\u901a\u8fc7\u547d\u4ee4\u884c\u7684\u65b9\u5f0f\u65b0\u589e\u6216\u8986\u76d6\u6307\u5b9a\u9879\u3002\u6709\u5173\u53ef\u4ee5\u66f4\u65b0\u7684\u914d\u7f6e\u9879\uff0c\u67e5\u770b\u4e0a\u6587 \u81ea\u5b9a\u4e49\u914d\u7f6e Chart \u3002 \u4f8b\u5982\uff0c\u66f4\u65b0 NebulaGraph Operator \u7684 AdmissionWebhook \u673a\u5236\u4e3a\u5f00\u542f\u72b6\u6001\u3002 helm upgrade nebula-operator nebula-operator/nebula-operator --namespace = nebula-operator-system --version = 1 .5.0 --set admissionWebhook.create = true \u66f4\u591a\u4fe1\u606f\uff0c\u53c2\u8003 Helm \u5347\u7ea7 \u3002 \u5347\u7ea7 NebulaGraph Operator \u00b6 \u5386\u53f2\u7248\u672c\u517c\u5bb9\u6027 \u4e0d\u652f\u6301\u5347\u7ea7 0.9.0 \u53ca\u4ee5\u4e0b\u7248\u672c\u7684 NebulaGraph Operator \u81f3 1.x \u7248\u672c\u3002 1.x \u7248\u672c\u7684 NebulaGraph Operator \u4e0d\u517c\u5bb9 3.x \u4ee5\u4e0b\u7248\u672c\u7684 NebulaGraph\u3002 \u62c9\u53d6\u6700\u65b0\u7684 Helm \u4ed3\u5e93\u3002 helm repo update \u5347\u7ea7 NebulaGraph Operator \u81f3 1.5.0 \u7248\u672c\u3002 helm upgrade nebula-operator nebula-operator/nebula-operator --namespace = <namespace_name> --version = 1 .5.0 \u793a\u4f8b\uff1a helm upgrade nebula-operator nebula-operator/nebula-operator --namespace = nebula-operator-system --version = 1 .5.0 \u8f93\u51fa\uff1a Release \"nebula-operator\" has been upgraded. Happy Helming! NAME: nebula-operator LAST DEPLOYED: Tue Nov 16 02 :21:08 2021 NAMESPACE: nebula-operator-system STATUS: deployed REVISION: 3 TEST SUITE: None NOTES: NebulaGraph Operator installed! \u62c9\u53d6\u6700\u65b0\u7684 CRD \u914d\u7f6e\u6587\u4ef6\u3002 Note \u5347\u7ea7 Operator \u540e\uff0c\u9700\u8981\u540c\u65f6\u5347\u7ea7\u76f8\u5e94\u7684 CRD \u914d\u7f6e\uff0c\u5426\u5219NebulaGraph\u96c6\u7fa4\u521b\u5efa\u4f1a\u5931\u8d25\u3002\u6709\u5173 CRD \u7684\u914d\u7f6e\uff0c\u53c2\u89c1 apps.nebula-graph.io_nebulaclusters.yaml \u3002 \u4e0b\u8f7d NebulaGraph Operator chart \u81f3\u672c\u5730\u3002 helm pull nebula-operator/nebula-operator --version = 1 .5.0 --version : \u5347\u7ea7\u7248\u672c\u53f7\u3002\u5982\u4e0d\u6307\u5b9a\uff0c\u5219\u9ed8\u8ba4\u4e3a\u6700\u65b0\u7248\u672c\u3002 \u6267\u884c tar -zxvf \u89e3\u538b\u5b89\u88c5\u5305\u3002 \u4f8b\u5982\uff1a\u89e3\u538b 1.5.0 chart \u5305\u81f3 /tmp \u8def\u5f84\u4e0b\u3002 tar -zxvf nebula-operator-1.5.0.tgz -C /tmp -C /tmp : \u5982\u4e0d\u6307\u5b9a\uff0c\u5219\u9ed8\u8ba4\u89e3\u538b\u81f3\u5f53\u524d\u8def\u5f84\u3002 \u5728 nebula-operator \u76ee\u5f55\u4e0b\u5347\u7ea7 CRD \u914d\u7f6e\u6587\u4ef6\u3002 kubectl apply -f crds/nebulacluster.yaml \u8f93\u51fa\uff1a customresourcedefinition.apiextensions.k8s.io/nebulaclusters.apps.nebula-graph.io configured \u5378\u8f7d NebulaGraph Operator \u00b6 \u5378\u8f7d NebulaGraph Operator chart\u3002 helm uninstall nebula-operator --namespace = <nebula-operator-system> \u5220\u9664 CRD\u3002 kubectl delete crd nebulaclusters.apps.nebula-graph.io \u540e\u7eed\u64cd\u4f5c \u00b6 \u4f7f\u7528 NebulaGraph Operator \u81ea\u52a8\u5316\u90e8\u7f72NebulaGraph\u96c6\u7fa4\u3002\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u8003 \u4f7f\u7528 Kubectl \u90e8\u7f72NebulaGraph\u96c6\u7fa4 \u6216\u8005 \u4f7f\u7528 Helm \u90e8\u7f72NebulaGraph\u96c6\u7fa4 \u3002","title":"\u90e8\u7f72 NebulaGraph Operator"},{"location":"nebula-operator/2.deploy-nebula-operator/#nebulagraph_operator","text":"\u7528\u6237\u53ef\u4f7f\u7528 Helm \u5de5\u5177\u90e8\u7f72 NebulaGraph Operator\u3002","title":"\u90e8\u7f72 NebulaGraph Operator"},{"location":"nebula-operator/2.deploy-nebula-operator/#_1","text":"NebulaGraph Operator \u4e3a\u7528\u6237\u7ba1\u7406NebulaGraph\u96c6\u7fa4\uff0c\u4f7f\u7528\u6237\u65e0\u9700\u5728\u751f\u4ea7\u73af\u5883\u4e2d\u624b\u52a8\u5b89\u88c5\u3001\u6269\u5c55\u3001\u5347\u7ea7\u548c\u5378\u8f7d NebulaGraph\uff0c\u51cf\u8f7b\u7528\u6237\u7ba1\u7406\u4e0d\u540c\u5e94\u7528\u7248\u672c\u7684\u8d1f\u62c5\u3002","title":"\u80cc\u666f\u4fe1\u606f"},{"location":"nebula-operator/2.deploy-nebula-operator/#_2","text":"\u5b89\u88c5 NebulaGraph Operator \u524d\uff0c\u7528\u6237\u9700\u8981\u5b89\u88c5\u4ee5\u4e0b\u8f6f\u4ef6\u5e76\u786e\u4fdd\u5b89\u88c5\u7248\u672c\u7684\u6b63\u786e\u6027\u3002 \u8f6f\u4ef6 \u7248\u672c\u8981\u6c42 Kubernetes >= 1.16 Helm >= 3.2.0 CoreDNS >= 1.6.0 Note \u5982\u679c\u4f7f\u7528\u57fa\u4e8e\u89d2\u8272\u7684\u8bbf\u95ee\u63a7\u5236\u7684\u7b56\u7565\uff0c\u7528\u6237\u9700\u5f00\u542f RBAC \uff08\u53ef\u9009\uff09\u3002 CoreDNS \u662f\u4e00\u4e2a\u7075\u6d3b\u7684\u3001\u53ef\u6269\u5c55\u7684 DNS \u670d\u52a1\u5668\uff0c\u88ab \u5b89\u88c5 \u5728\u96c6\u7fa4\u5185\u4f5c\u4e3a\u96c6\u7fa4\u5185 Pods \u7684 DNS \u670d\u52a1\u5668\u3002NebulaGraph\u96c6\u7fa4\u4e2d\u7684\u6bcf\u4e2a\u7ec4\u4ef6\u901a\u8fc7 DNS \u89e3\u6790\u7c7b\u4f3c x.default.svc.cluster.local \u8fd9\u6837\u7684\u57df\u540d\u76f8\u4e92\u901a\u4fe1\u3002","title":"\u524d\u63d0\u6761\u4ef6"},{"location":"nebula-operator/2.deploy-nebula-operator/#_3","text":"","title":"\u64cd\u4f5c\u6b65\u9aa4"},{"location":"nebula-operator/2.deploy-nebula-operator/#nebulagraph_operator_1","text":"\u6dfb\u52a0 NebulaGraph Operator Helm \u4ed3\u5e93\u3002 helm repo add nebula-operator https://vesoft-inc.github.io/nebula-operator/charts \u62c9\u53d6\u6700\u65b0\u7684 Operator Helm \u4ed3\u5e93\u3002 helm repo update \u53c2\u8003 Helm \u4ed3\u5e93 \u83b7\u53d6\u66f4\u591a helm repo \u76f8\u5173\u4fe1\u606f\u3002 \u521b\u5efa\u547d\u540d\u7a7a\u95f4\u7528\u4e8e\u5b89\u88c5 NebulaGraph Operator\u3002 kubectl create namespace <namespace_name> \u4f8b\u5982\uff0c\u521b\u5efa nebula-operator-system \u547d\u540d\u7a7a\u95f4\u3002 kubectl create namespace nebula-operator-system nebula-operator chart \u4e2d\u7684\u6240\u6709\u8d44\u6e90\u90fd\u4f1a\u5b89\u88c5\u5728\u8be5\u547d\u540d\u7a7a\u95f4\u4e0b\u3002 \u5b89\u88c5 NebulaGraph Operator\u3002 helm install nebula-operator nebula-operator/nebula-operator --namespace = <namespace_name> --version = ${ chart_version } \u4f8b\u5982\uff0c\u5b89\u88c51.5.0\u7248\u7684 Operator \u547d\u4ee4\u5982\u4e0b\u3002 helm install nebula-operator nebula-operator/nebula-operator --namespace = nebula-operator-system --version = 1 .5.0 1.5.0 \u4e3a nebula-operator chart \u7684\u7248\u672c\uff0c\u4e0d\u6307\u5b9a --version \u65f6\u9ed8\u8ba4\u4f7f\u7528\u6700\u65b0\u7248\u7684 chart\u3002\u6267\u884c helm search repo -l nebula-operator \u67e5\u770b chart \u7248\u672c\u3002 \u7528\u6237\u53ef\u5728\u6267\u884c\u5b89\u88c5 NebulaGraph Operator chart \u547d\u4ee4\u65f6\u81ea\u5b9a\u4e49 Operator \u7684\u914d\u7f6e\u3002\u66f4\u591a\u4fe1\u606f\uff0c\u67e5\u770b\u4e0b\u6587 \u81ea\u5b9a\u4e49\u914d\u7f6e Chart \u3002","title":"\u5b89\u88c5 NebulaGraph Operator"},{"location":"nebula-operator/2.deploy-nebula-operator/#chart","text":"\u6267\u884c helm install [NAME] [CHART] [flags] \u547d\u4ee4\u5b89\u88c5 Chart \u65f6\uff0c\u53ef\u6307\u5b9a Chart \u914d\u7f6e\u3002\u66f4\u591a\u4fe1\u606f\uff0c\u53c2\u8003 \u5b89\u88c5\u524d\u81ea\u5b9a\u4e49 Chart \u3002 \u5728 nebula-operator chart \u914d\u7f6e\u6587\u4ef6\u4e2d\u67e5\u770b\u76f8\u5173\u7684\u914d\u7f6e\u9009\u9879\u3002 \u6216\u8005\u901a\u8fc7\u547d\u4ee4 helm show values nebula-operator/nebula-operator \u67e5\u770b\u53ef\u914d\u7f6e\u7684\u9009\u9879\uff0c\u5982\u4e0b\u6240\u793a\u3002 [ abby@master ~ ] $ helm show values nebula-operator/nebula-operator image : nebulaOperator : image : vesoft/nebula-operator:v1.5.0 imagePullPolicy : Always kubeRBACProxy : image : bitnami/kube-rbac-proxy:0.14.2 imagePullPolicy : Always kubeScheduler : image : registry.k8s.io/kube-scheduler:v1.24.11 imagePullPolicy : Always imagePullSecrets : [] kubernetesClusterDomain : \"\" controllerManager : create : true replicas : 2 env : [] resources : limits : cpu : 200m memory : 200Mi requests : cpu : 100m memory : 100Mi admissionWebhook : create : false scheduler : create : true schedulerName : nebula-scheduler replicas : 2 env : [] resources : limits : cpu : 200m memory : 200Mi requests : cpu : 100m memory : 100Mi ... \u90e8\u5206\u53c2\u6570\u63cf\u8ff0\u5982\u4e0b\uff1a \u53c2\u6570 \u9ed8\u8ba4\u503c \u63cf\u8ff0 image.nebulaOperator.image vesoft/nebula-operator:v1.5.0 NebulaGraph Operator \u7684\u955c\u50cf\uff0c\u7248\u672c\u4e3a1.5.0\u3002 image.nebulaOperator.imagePullPolicy IfNotPresent \u955c\u50cf\u62c9\u53d6\u7b56\u7565\u3002 imagePullSecrets - \u955c\u50cf\u62c9\u53d6\u5bc6\u94a5\u3002 kubernetesClusterDomain cluster.local \u96c6\u7fa4\u57df\u540d\u3002 controllerManager.create true \u662f\u5426\u542f\u7528 controller-manager\u3002 controllerManager.replicas 2 controller-manager \u526f\u672c\u6570\u3002 admissionWebhook.create false \u662f\u5426\u542f\u7528 Admission Webhook\u3002\u9ed8\u8ba4\u5173\u95ed\uff0c\u5982\u9700\u5f00\u542f\uff0c\u9700\u8bbe\u7f6e\u4e3a true \u5e76\u4e14\u9700\u8981\u5b89\u88c5 cert-manager \u3002 shceduler.create true \u662f\u5426\u542f\u7528 Scheduler\u3002 shceduler.schedulerName nebula-scheduler \u8c03\u5ea6\u5668\u540d\u79f0\u3002 shceduler.replicas 2 nebula-scheduler \u526f\u672c\u6570\u3002 \u4ee5\u4e0b\u793a\u4f8b\u4e3a\u5728\u5b89\u88c5 NebulaGraph Operator \u65f6\uff0c\u6307\u5b9a NebulaGraph Operator \u7684 AdmissionWebhook \u673a\u5236\u4e3a\u5f00\u542f\u72b6\u6001\uff08\u9ed8\u8ba4\u5173\u95ed AdmissionWebhook\uff09\uff1a helm install nebula-operator nebula-operator/nebula-operator --namespace = <nebula-operator-system> --set admissionWebhook.create = true","title":"\u81ea\u5b9a\u4e49\u914d\u7f6e Chart"},{"location":"nebula-operator/2.deploy-nebula-operator/#nebulagraph_operator_2","text":"\u62c9\u53d6\u6700\u65b0\u7684 Helm \u4ed3\u5e93\u3002 helm repo update \u901a\u8fc7 --set \u4f20\u9012\u914d\u7f6e\u53c2\u6570\uff0c\u66f4\u65b0 NebulaGraph Operator\u3002 --set \uff1a\u901a\u8fc7\u547d\u4ee4\u884c\u7684\u65b9\u5f0f\u65b0\u589e\u6216\u8986\u76d6\u6307\u5b9a\u9879\u3002\u6709\u5173\u53ef\u4ee5\u66f4\u65b0\u7684\u914d\u7f6e\u9879\uff0c\u67e5\u770b\u4e0a\u6587 \u81ea\u5b9a\u4e49\u914d\u7f6e Chart \u3002 \u4f8b\u5982\uff0c\u66f4\u65b0 NebulaGraph Operator \u7684 AdmissionWebhook \u673a\u5236\u4e3a\u5f00\u542f\u72b6\u6001\u3002 helm upgrade nebula-operator nebula-operator/nebula-operator --namespace = nebula-operator-system --version = 1 .5.0 --set admissionWebhook.create = true \u66f4\u591a\u4fe1\u606f\uff0c\u53c2\u8003 Helm \u5347\u7ea7 \u3002","title":"\u66f4\u65b0 NebulaGraph Operator"},{"location":"nebula-operator/2.deploy-nebula-operator/#nebulagraph_operator_3","text":"\u5386\u53f2\u7248\u672c\u517c\u5bb9\u6027 \u4e0d\u652f\u6301\u5347\u7ea7 0.9.0 \u53ca\u4ee5\u4e0b\u7248\u672c\u7684 NebulaGraph Operator \u81f3 1.x \u7248\u672c\u3002 1.x \u7248\u672c\u7684 NebulaGraph Operator \u4e0d\u517c\u5bb9 3.x \u4ee5\u4e0b\u7248\u672c\u7684 NebulaGraph\u3002 \u62c9\u53d6\u6700\u65b0\u7684 Helm \u4ed3\u5e93\u3002 helm repo update \u5347\u7ea7 NebulaGraph Operator \u81f3 1.5.0 \u7248\u672c\u3002 helm upgrade nebula-operator nebula-operator/nebula-operator --namespace = <namespace_name> --version = 1 .5.0 \u793a\u4f8b\uff1a helm upgrade nebula-operator nebula-operator/nebula-operator --namespace = nebula-operator-system --version = 1 .5.0 \u8f93\u51fa\uff1a Release \"nebula-operator\" has been upgraded. Happy Helming! NAME: nebula-operator LAST DEPLOYED: Tue Nov 16 02 :21:08 2021 NAMESPACE: nebula-operator-system STATUS: deployed REVISION: 3 TEST SUITE: None NOTES: NebulaGraph Operator installed! \u62c9\u53d6\u6700\u65b0\u7684 CRD \u914d\u7f6e\u6587\u4ef6\u3002 Note \u5347\u7ea7 Operator \u540e\uff0c\u9700\u8981\u540c\u65f6\u5347\u7ea7\u76f8\u5e94\u7684 CRD \u914d\u7f6e\uff0c\u5426\u5219NebulaGraph\u96c6\u7fa4\u521b\u5efa\u4f1a\u5931\u8d25\u3002\u6709\u5173 CRD \u7684\u914d\u7f6e\uff0c\u53c2\u89c1 apps.nebula-graph.io_nebulaclusters.yaml \u3002 \u4e0b\u8f7d NebulaGraph Operator chart \u81f3\u672c\u5730\u3002 helm pull nebula-operator/nebula-operator --version = 1 .5.0 --version : \u5347\u7ea7\u7248\u672c\u53f7\u3002\u5982\u4e0d\u6307\u5b9a\uff0c\u5219\u9ed8\u8ba4\u4e3a\u6700\u65b0\u7248\u672c\u3002 \u6267\u884c tar -zxvf \u89e3\u538b\u5b89\u88c5\u5305\u3002 \u4f8b\u5982\uff1a\u89e3\u538b 1.5.0 chart \u5305\u81f3 /tmp \u8def\u5f84\u4e0b\u3002 tar -zxvf nebula-operator-1.5.0.tgz -C /tmp -C /tmp : \u5982\u4e0d\u6307\u5b9a\uff0c\u5219\u9ed8\u8ba4\u89e3\u538b\u81f3\u5f53\u524d\u8def\u5f84\u3002 \u5728 nebula-operator \u76ee\u5f55\u4e0b\u5347\u7ea7 CRD \u914d\u7f6e\u6587\u4ef6\u3002 kubectl apply -f crds/nebulacluster.yaml \u8f93\u51fa\uff1a customresourcedefinition.apiextensions.k8s.io/nebulaclusters.apps.nebula-graph.io configured","title":"\u5347\u7ea7 NebulaGraph Operator"},{"location":"nebula-operator/2.deploy-nebula-operator/#nebulagraph_operator_4","text":"\u5378\u8f7d NebulaGraph Operator chart\u3002 helm uninstall nebula-operator --namespace = <nebula-operator-system> \u5220\u9664 CRD\u3002 kubectl delete crd nebulaclusters.apps.nebula-graph.io","title":"\u5378\u8f7d NebulaGraph Operator"},{"location":"nebula-operator/2.deploy-nebula-operator/#_4","text":"\u4f7f\u7528 NebulaGraph Operator \u81ea\u52a8\u5316\u90e8\u7f72NebulaGraph\u96c6\u7fa4\u3002\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u8003 \u4f7f\u7528 Kubectl \u90e8\u7f72NebulaGraph\u96c6\u7fa4 \u6216\u8005 \u4f7f\u7528 Helm \u90e8\u7f72NebulaGraph\u96c6\u7fa4 \u3002","title":"\u540e\u7eed\u64cd\u4f5c"},{"location":"nebula-operator/4.connect-to-nebula-graph-service/","text":"\u901a\u8fc7 Operator \u8fde\u63a5NebulaGraph \u00b6 \u4f7f\u7528 NebulaGraph Operator \u521b\u5efaNebulaGraph \u96c6\u7fa4\u540e\uff0c\u7528\u6237\u53ef\u5728NebulaGraph\u96c6\u7fa4\u5185\u90e8\u8bbf\u95eeNebulaGraph\uff0c\u4e5f\u53ef\u5728\u96c6\u7fa4\u5916\u8bbf\u95eeNebulaGraph\u3002\u5982\u679c\u7528\u6237\u5728\u96c6\u7fa4\u5185\u90e8\uff0c\u53ef\u4ee5\u901a\u8fc7\u8bbf\u95ee\u96c6\u7fa4\u5185\u7684\u865a\u62df IP \u5730\u5740\uff08ClusterIP\uff09\u8bbf\u95ee\u6570\u636e\u5e93\u3002\u800c\u5982\u679c\u7528\u6237\u5728\u96c6\u7fa4\u5916\u90e8\uff0c\u5219\u9700\u8981\u4f7f\u7528\u96c6\u7fa4\u8282\u70b9\u7684\u516c\u5171 IP \u5730\u5740\u6216\u8005\u901a\u8fc7\u90e8\u7f72 Nginx Ingress \u63a7\u5236\u5668\u6765\u8bbf\u95eeNebulaGraph\u3002IP \u5730\u5740\u7c7b\u578b\u53ef\u4ee5\u5728\u521b\u5efa\u96c6\u7fa4\u7684\u914d\u7f6e\u6587\u4ef6\u4e2d\uff0c\u901a\u8fc7 spec.graphd.service \u6307\u5b9a\u3002\u5173\u4e8e Service \u7684\u66f4\u591a\u4fe1\u606f\uff0c\u53c2\u8003 Service \u3002 \u524d\u63d0\u6761\u4ef6 \u00b6 \u4f7f\u7528 NebulaGraph Operator \u521b\u5efaNebulaGraph\u96c6\u7fa4\u3002\u5177\u4f53\u6b65\u9aa4\u53c2\u8003 \u4f7f\u7528 Kubectl \u90e8\u7f72NebulaGraph\u96c6\u7fa4 \u6216\u8005 \u4f7f\u7528 Helm \u90e8\u7f72NebulaGraph\u96c6\u7fa4 \u3002 \u5728NebulaGraph\u96c6\u7fa4\u5185\u8fde\u63a5NebulaGraph \u00b6 \u7528\u6237\u4e5f\u53ef\u4ee5\u521b\u5efa ClusterIP \u7c7b\u578b\u7684 Service\uff0c\u4e3a\u96c6\u7fa4\u5185\u7684\u5176\u4ed6 Pod \u63d0\u4f9b\u8bbf\u95eeNebulaGraph\u7684\u5165\u53e3\u3002\u901a\u8fc7\u8be5 Service \u7684 IP \u548c\u6570\u636e\u5e93 Graph \u670d\u52a1\u7684\u7aef\u53e3\u53f7\uff08 9669 \uff09\uff0c\u53ef\u8fde\u63a5NebulaGraph\u3002\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u8003 ClusterIP \u3002 \u521b\u5efa\u540d\u4e3a graphd-clusterip-service.yaml \u7684\u6587\u4ef6\u3002\u793a\u4f8b\u5185\u5bb9\u5982\u4e0b\uff1a apiVersion : v1 kind : Service metadata : labels : app.kubernetes.io/cluster : nebula app.kubernetes.io/component : graphd app.kubernetes.io/managed-by : nebula-operator app.kubernetes.io/name : nebula-graph name : nebula-graphd-svc namespace : default spec : externalTrafficPolicy : Local ports : - name : thrift port : 9669 protocol : TCP targetPort : 9669 - name : http port : 19669 protocol : TCP targetPort : 19669 selector : app.kubernetes.io/cluster : nebula app.kubernetes.io/component : graphd app.kubernetes.io/managed-by : nebula-operator app.kubernetes.io/name : nebula-graph type : ClusterIP # \u8bbe\u7f6e Service \u7c7b\u578b\u4e3a ClusterIP\u3002 NebulaGraph\u9ed8\u8ba4\u4f7f\u7528 9669 \u7aef\u53e3\u4e3a\u5ba2\u6237\u7aef\u63d0\u4f9b\u670d\u52a1\u3002 19669 \u4e3a Graph \u670d\u52a1\u7684 HTTP \u7aef\u53e3\u53f7\u3002 targetPort \u7684\u503c\u4e3a\u6620\u5c04\u81f3 Pod \u7684\u7aef\u53e3\uff0c\u53ef\u81ea\u5b9a\u4e49\u3002 \u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\u4f7f Service \u670d\u52a1\u5728\u96c6\u7fa4\u4e2d\u751f\u6548\u3002 kubectl create -f graphd-clusterip-service.yaml \u67e5\u770b Service\uff0c\u547d\u4ee4\u5982\u4e0b\uff1a $ kubectl get service -l app.kubernetes.io/cluster = <nebula> #<nebula>\u4e3a\u53d8\u91cf\u503c\uff0c\u8bf7\u7528\u5b9e\u9645\u96c6\u7fa4\u540d\u79f0\u66ff\u6362\u3002 NAME TYPE CLUSTER-IP EXTERNAL-IP PORT ( S ) AGE nebula-graphd-svc ClusterIP 10 .98.213.34 <none> 9669 /TCP,19669/TCP,19670/TCP 23h ... \u4f7f\u7528\u4e0a\u8ff0 <cluster-name>-graphd-svc Service \u7684 IP \u8fde\u63a5NebulaGraph\uff1a kubectl run -ti --image vesoft/nebula-console:v3.5.0 --restart = Never -- <nebula_console_name> -addr <cluster_ip> -port <service_port> -u <username> -p <password> \u793a\u4f8b\uff1a kubectl run -ti --image vesoft/nebula-console:v3.5.0 --restart = Never -- nebula-console -addr 10 .98.213.34 -port 9669 -u root -p vesoft --image \uff1a\u4e3a\u8fde\u63a5NebulaGraph\u7684\u5de5\u5177 NebulaGraph Console \u7684\u955c\u50cf\u3002 <nebula-console> \uff1a\u81ea\u5b9a\u4e49\u7684 Pod \u540d\u79f0\u3002 -addr \uff1a\u8fde\u63a5 Graphd \u670d\u52a1\u7684 IP \u5730\u5740\uff0c\u5373 ClusterIP \u7c7b\u578b\u7684 Service IP \u5730\u5740\u3002 -port \uff1a\u8fde\u63a5 Graphd \u670d\u52a1\u7684\u7aef\u53e3\u3002\u9ed8\u8ba4\u7aef\u53e3\u4e3a 9669 \u3002 -u \uff1aNebulaGraph\u8d26\u53f7\u7684\u7528\u6237\u540d\u3002\u672a\u542f\u7528\u8eab\u4efd\u8ba4\u8bc1\u65f6\uff0c\u53ef\u4ee5\u4f7f\u7528\u4efb\u610f\u5df2\u5b58\u5728\u7684\u7528\u6237\u540d\uff08\u9ed8\u8ba4\u4e3a root \uff09\u3002 -p \uff1a\u7528\u6237\u540d\u5bf9\u5e94\u7684\u5bc6\u7801\u3002\u672a\u542f\u7528\u8eab\u4efd\u8ba4\u8bc1\u65f6\uff0c\u5bc6\u7801\u53ef\u4ee5\u586b\u5199\u4efb\u610f\u5b57\u7b26\u3002 \u5982\u679c\u8fd4\u56de\u4ee5\u4e0b\u5185\u5bb9\uff0c\u8bf4\u660e\u6210\u529f\u8fde\u63a5\u6570\u636e\u5e93\uff1a If you don ' t see a command prompt, try pressing enter. ( root@nebula ) [( none )] > \u7528\u6237\u8fd8\u53ef\u4ee5\u4f7f\u7528 \u5b8c\u5168\u9650\u5b9a\u57df\u540d\uff08FQDN\uff09 \u8fde\u63a5\u6570\u636e\u5e93\uff0c\u57df\u540d\u683c\u5f0f\u4e3a <cluster-name>-graphd.<cluster-namespace>.svc.<CLUSTER_DOMAIN> \uff0c CLUSTER_DOMAIN \u7684\u9ed8\u8ba4\u503c\u4e3a cluster.local \u3002 kubectl run -ti --image vesoft/nebula-console:v3.5.0 --restart = Never -- <nebula_console_name> -addr <cluster_name>-graphd-svc.default.svc.cluster.local -port <service_port> -u <username> -p <password> <service_port> \u4e3a Graph \u670d\u52a1\u9ed8\u8ba4\u7684\u7aef\u53e3 9669 \u3002 Note \u5982\u679c\u5728\u96c6\u7fa4\u914d\u7f6e\u6587\u4ef6\u4e2d\u8bbe\u7f6e\u4e86 spec.console \u5b57\u6bb5\uff0c\u60a8\u8fd8\u53ef\u4ee5\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\u8fde\u63a5\u5230NebulaGraph\u6570\u636e\u5e93\uff1a # \u8fdb\u5165 nebula-console Pod\u3002 kubectl exec -it nebula-console -- /bin/sh # \u8fde\u63a5\u5230\u6570\u636e\u5e93\u3002 nebula-console -addr nebula-graphd-svc.default.svc.cluster.local -port 9669 -u <username> -p <password> \u6709\u5173 nebula-console \u5bb9\u5668\u7684\u914d\u7f6e\uff0c\u8bf7\u53c2\u89c1 nebula-console \u3002 \u901a\u8fc7 NodePort \u5728NebulaGraph\u96c6\u7fa4\u5916\u90e8\u8fde\u63a5NebulaGraph \u00b6 \u7528\u6237\u53ef\u521b\u5efa NodePort \u7c7b\u578b\u7684 Service\uff0c\u901a\u8fc7\u96c6\u7fa4\u4efb\u4e00\u8282\u70b9 IP \u548c\u66b4\u9732\u7684\u8282\u70b9\u7aef\u53e3\uff0c\u4ece\u96c6\u7fa4\u5916\u90e8\u8bbf\u95ee\u96c6\u7fa4\u5185\u90e8\u7684\u670d\u52a1\u3002\u7528\u6237\u4e5f\u53ef\u4ee5\u4f7f\u7528\u4e91\u5382\u5546\uff08\u4f8b\u5982 Azure\u3001AWS \u7b49\uff09\u63d0\u4f9b\u7684\u8d1f\u8f7d\u5747\u8861\u670d\u52a1\uff0c\u8bbe\u7f6e Service \u7684\u7c7b\u578b\u4e3a LoadBalancer \uff0c\u901a\u8fc7\u4e91\u5382\u5546\u63d0\u4f9b\u7684\u8d1f\u8f7d\u5747\u8861\u5668\u7684\u516c\u7f51 IP \u548c\u7aef\u53e3\uff0c\u4ece\u96c6\u7fa4\u5916\u90e8\u8bbf\u95ee\u96c6\u7fa4\u5185\u90e8\u7684\u670d\u52a1\u3002 NodePort \u7c7b\u578b\u7684 Service \u901a\u8fc7\u6807\u7b7e\u9009\u62e9\u5668 spec.selector \u5c06\u524d\u7aef\u7684\u8bf7\u6c42\u8f6c\u53d1\u5230\u5e26\u6709\u6807\u7b7e app.kubernetes.io/cluster: <cluster-name> \u3001 app.kubernetes.io/component: graphd \u7684 Graphd pod \u4e2d\u3002 \u5f53\u6839\u636e\u96c6\u7fa4 \u793a\u4f8b\u6a21\u677f \uff0c\u5176\u4e2d spec.graphd.service.type=NodePort \uff0c\u521b\u5efa NebulaGraph \u96c6\u7fa4\u540e\uff0cNebulaGraph Operator \u4f1a\u81ea\u52a8\u5728\u540c\u4e00\u547d\u540d\u7a7a\u95f4\u4e0b\uff0c\u521b\u5efa\u540d\u4e3a <cluster-name>-graphd-svc \u3001\u7c7b\u578b\u4e3a NodePort \u7684 Service\u3002\u901a\u8fc7\u4efb\u4e00\u8282\u70b9 IP \u548c\u66b4\u9732\u7684\u8282\u70b9\u7aef\u53e3\uff0c\u53ef\u76f4\u63a5\u8fde\u63a5 NebulaGraph \u6570\u636e\u5e93\uff08\u53c2\u89c1\u4e0b\u6587\u7b2c 4 \u6b65\uff09\u3002\u7528\u6237\u4e5f\u53ef\u4ee5\u6839\u636e\u81ea\u5df1\u7684\u9700\u6c42\uff0c\u521b\u5efa\u81ea\u5b9a\u4e49\u7684 Service\u3002 \u64cd\u4f5c\u6b65\u9aa4\u5982\u4e0b\uff1a \u521b\u5efa\u540d\u4e3a graphd-nodeport-service.yaml \u7684\u6587\u4ef6\u3002\u793a\u4f8b\u5185\u5bb9\u5982\u4e0b\uff1a apiVersion : v1 kind : Service metadata : labels : app.kubernetes.io/cluster : nebula app.kubernetes.io/component : graphd app.kubernetes.io/managed-by : nebula-operator app.kubernetes.io/name : nebula-graph name : nebula-graphd-svc-nodeport namespace : default spec : externalTrafficPolicy : Local ports : - name : thrift port : 9669 protocol : TCP targetPort : 9669 - name : http port : 19669 protocol : TCP targetPort : 19669 selector : app.kubernetes.io/cluster : nebula app.kubernetes.io/component : graphd app.kubernetes.io/managed-by : nebula-operator app.kubernetes.io/name : nebula-graph type : NodePort # \u8bbe\u7f6e Service \u7c7b\u578b\u4e3a NodePort\u3002 NebulaGraph\u9ed8\u8ba4\u4f7f\u7528 9669 \u7aef\u53e3\u4e3a\u5ba2\u6237\u7aef\u63d0\u4f9b\u670d\u52a1\u3002 19669 \u4e3a Graph \u670d\u52a1\u7684 HTTP \u7aef\u53e3\u53f7\u3002 targetPort \u7684\u503c\u4e3a\u6620\u5c04\u81f3 Pod \u7684\u7aef\u53e3\uff0c\u53ef\u81ea\u5b9a\u4e49\u3002 \u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\u4f7f Service \u670d\u52a1\u5728\u96c6\u7fa4\u4e2d\u751f\u6548\u3002 kubectl create -f graphd-nodeport-service.yaml \u67e5\u770b Service \u4e2dNebulaGraph\u6620\u5c04\u81f3\u96c6\u7fa4\u8282\u70b9\u7684\u7aef\u53e3\u3002 kubectl get services -l app.kubernetes.io/cluster = <nebula> #<nebula>\u4e3a\u53d8\u91cf\u503c\uff0c\u8bf7\u7528\u5b9e\u9645\u96c6\u7fa4\u540d\u79f0\u66ff\u6362\u3002 \u8fd4\u56de\uff1a NAME TYPE CLUSTER-IP EXTERNAL-IP PORT ( S ) AGE nebula-graphd-svc-nodeport NodePort 10 .107.153.129 <none> 9669 :32236/TCP,19669:31674/TCP,19670:31057/TCP 24h ... NodePort \u7c7b\u578b\u7684 Service \u4e2d\uff0c\u6620\u5c04\u81f3\u96c6\u7fa4\u8282\u70b9\u7684\u7aef\u53e3\u4e3a 32236 \u3002 \u4f7f\u7528\u8282\u70b9 IP \u548c\u4e0a\u8ff0\u6620\u5c04\u7684\u8282\u70b9\u7aef\u53e3\u8fde\u63a5NebulaGraph\u3002 kubectl run -ti --image vesoft/nebula-console:v3.5.0 --restart = Never -- <nebula_console_name> -addr <node_ip> -port <node_port> -u <username> -p <password> \u793a\u4f8b\u5982\u4e0b\uff1a kubectl run -ti --image vesoft/nebula-console:v3.5.0 --restart = Never -- nebula-console -addr 192 .168.8.24 -port 32236 -u root -p vesoft If you don ' t see a command prompt, try pressing enter. ( root@nebula ) [( none )] > --image \uff1a\u4e3a\u8fde\u63a5NebulaGraph\u7684\u5de5\u5177 Console \u7684\u955c\u50cf\u3002 <nebula-console> \uff1a\u81ea\u5b9a\u4e49\u7684 Pod \u540d\u79f0\u3002\u672c\u793a\u4f8b\u4e3a nebula-console \u3002 -addr \uff1aNebulaGraph\u96c6\u7fa4\u4e2d\u4efb\u4e00\u8282\u70b9 IP \u5730\u5740\u3002\u672c\u793a\u4f8b\u4e3a 192.168.8.24 \u3002 -port \uff1aNebulaGraph\u6620\u5c04\u81f3\u8282\u70b9\u7684\u7aef\u53e3\u3002\u672c\u793a\u4f8b\u4e3a 32236 \u3002 -u \uff1aNebulaGraph\u8d26\u53f7\u7684\u7528\u6237\u540d\u3002\u672a\u542f\u7528\u8eab\u4efd\u8ba4\u8bc1\u65f6\uff0c\u53ef\u4ee5\u4f7f\u7528\u4efb\u610f\u5df2\u5b58\u5728\u7684\u7528\u6237\u540d\uff08\u9ed8\u8ba4\u4e3a root\uff09\u3002 -p \uff1a\u7528\u6237\u540d\u5bf9\u5e94\u7684\u5bc6\u7801\u3002\u672a\u542f\u7528\u8eab\u4efd\u8ba4\u8bc1\u65f6\uff0c\u5bc6\u7801\u53ef\u4ee5\u586b\u5199\u4efb\u610f\u5b57\u7b26\u3002 Note \u5982\u679c\u5728\u96c6\u7fa4\u914d\u7f6e\u6587\u4ef6\u4e2d\u8bbe\u7f6e\u4e86 spec.console \u5b57\u6bb5\uff0c\u60a8\u8fd8\u53ef\u4ee5\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\u8fde\u63a5\u5230NebulaGraph\u6570\u636e\u5e93\uff1a # \u8fdb\u5165nebula-console Pod\u3002 kubectl exec -it nebula-console -- /bin/sh # \u8fde\u63a5\u5230\u6570\u636e\u5e93\u3002 nebula-console -addr <node_ip> -port <node_port> -u <username> -p <password> \u6709\u5173 nebula-console \u5bb9\u5668\u7684\u914d\u7f6e\uff0c\u8bf7\u53c2\u89c1 nebula-console \u3002 \u901a\u8fc7 Ingress \u5728NebulaGraph\u96c6\u7fa4\u5916\u90e8\u8fde\u63a5NebulaGraph \u00b6 \u5f53\u96c6\u7fa4\u4e2d\u6709\u591a\u4e2a Pod \u65f6\uff0c\u4e3a\u6bcf\u4e2a Pod \u5206\u522b\u63d0\u4f9b\u670d\u52a1\u4f1a\u53d8\u5f97\u975e\u5e38\u56f0\u96be\u548c\u7e41\u7410\uff0c\u800c\u4f7f\u7528 Ingress \u53ef\u4ee5\u8f7b\u677e\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\u3002Ingress \u53ef\u4ee5\u5c06\u6d41\u91cf\u8def\u7531\u5230\u96c6\u7fa4\u5185\u90e8\u7684\u591a\u4e2a Pod\u3002 Nginx Ingress \u662f Kubernetes \u4e2d\u7684\u4e00\u4e2a Ingress \u63a7\u5236\u5668\uff08Controller\uff09\uff0c\u662f\u5bf9 Kubernetes Ingress \u8d44\u6e90\u7684\u4e00\u4e2a\u5b9e\u73b0\uff0c\u901a\u8fc7 Watch \u673a\u5236\u611f\u77e5 Kubernetes \u96c6\u7fa4\u4e2d\u7684 Ingress \u8d44\u6e90\u3002\u5b83\u5c06\u8fd9\u4e9b Ingress \u89c4\u5219\u8f6c\u6362\u4e3a Nginx \u914d\u7f6e\u5e76\u542f\u52a8\u4e00\u4e2a Nginx \u5b9e\u4f8b\u6765\u5904\u7406\u6d41\u91cf\u3002 \u7528\u6237\u53ef\u4ee5\u901a\u8fc7 HostNetwork \u548c DaemonSet \u7ec4\u5408\u7684\u6a21\u5f0f\u4f7f\u7528 Nginx Ingress \u4ece\u96c6\u7fa4\u5916\u90e8\u8fde\u63a5NebulaGraph\u96c6\u7fa4\u3002 \u7531\u4e8e\u4f7f\u7528 HostNetwork\uff0cNginx Ingress \u7684 Pods \u53ef\u80fd\u88ab\u8c03\u5ea6\u5728\u540c\u4e00\u4e2a\u8282\u70b9\u4e0a\uff08\u5f53\u591a\u4e2a Pod \u5c1d\u8bd5\u5728\u540c\u4e00\u4e2a\u8282\u70b9\u4e0a\u76d1\u542c\u76f8\u540c\u7684\u7aef\u53e3\u65f6\uff0c\u5c06\u4f1a\u51fa\u73b0\u7aef\u53e3\u51b2\u7a81\uff09\u3002\u4e3a\u4e86\u907f\u514d\u8fd9\u79cd\u60c5\u51b5\uff0cNginx Ingress \u4ee5 DaemonSet \u6a21\u5f0f\uff08\u786e\u4fdd\u96c6\u7fa4\u4e2d\u6bcf\u4e2a\u8282\u70b9\u90fd\u8fd0\u884c\u4e00\u4e2a Pod \u526f\u672c\uff09\u90e8\u7f72\u5728\u8fd9\u4e9b\u8282\u70b9\u4e0a\uff0c\u9700\u5148\u9009\u62e9\u4e00\u4e9b\u8282\u70b9\u5e76\u4e3a\u8282\u70b9\u6253\u4e0a\u6807\u7b7e\uff0c\u4e13\u95e8\u7528\u4e8e\u90e8\u7f72 Nginx Ingress\u3002 \u7531\u4e8e Ingress \u4e0d\u652f\u6301 TCP \u6216 UDP \u670d\u52a1\uff0c\u4e3a\u6b64 nginx-ingress-controller \u4f7f\u7528 --tcp-services-configmap \u548c --udp-services-configmap \u53c2\u6570\u6307\u5411\u4e00\u4e2a ConfigMap\uff0c\u8be5 ConfigMap \u4e2d\u7684\u952e\u6307\u9700\u8981\u4f7f\u7528\u7684\u5916\u90e8\u7aef\u53e3\uff0c\u503c\u6307\u8981\u516c\u5f00\u7684\u670d\u52a1\u7684\u683c\u5f0f\uff0c\u503c\u7684\u683c\u5f0f\u4e3a <\u547d\u540d\u7a7a\u95f4/\u670d\u52a1\u540d\u79f0>:<\u670d\u52a1\u7aef\u53e3> \u3002 \u4f8b\u5982\u6307\u5411\u540d\u4e3a tcp-services \u7684 ConfigMap \u7684\u914d\u7f6e\u5982\u4e0b\uff1a apiVersion : v1 kind : ConfigMap metadata : name : tcp-services namespace : nginx-ingress data : 9769 : \"default/nebula-graphd-svc:9669\" \u64cd\u4f5c\u6b65\u9aa4\u5982\u4e0b\uff1a \u521b\u5efa\u540d\u4e3a nginx-ingress-daemonset-hostnetwork.yaml \u7684\u6587\u4ef6\u3002 \u5355\u51fb nginx-ingress-daemonset-hostnetwork.yaml \u67e5\u770b\u5b8c\u6574\u7684 YAML \u793a\u4f8b\u5185\u5bb9\u3002 Note \u4e0a\u8ff0 YAML \u4e2d\u7684\u8d44\u6e90\u5bf9\u8c61\u5747\u4f7f\u7528 nginx-ingress \u547d\u540d\u7a7a\u95f4\u3002\u7528\u6237\u53ef\u6267\u884c kubectl create namesapce nginx-ingress \u521b\u5efa\u547d\u540d\u7a7a\u95f4\uff0c\u6216\u8005\u81ea\u5b9a\u4e49\u5176\u4ed6\u547d\u540d\u7a7a\u95f4\u3002 \u4e3a\u4efb\u4e00\u8282\u70b9\uff08\u672c\u793a\u4f8b\u4f7f\u7528\u7684\u8282\u70b9\u540d\u4e3a worker2 \uff0cIP \u4e3a 192.168.8.160 \uff09\u6253\u4e0a\u6807\u7b7e\uff0c\u4ee5\u8fd0\u884c\u4e0a\u8ff0 YAML \u6587\u4ef6\u4e2d\u540d\u4e3a nginx-ingress-controller \u7684 DaemonSet\u3002 kubectl label node worker2 nginx-ingress = true \u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\u4f7f Nginx Ingress \u5728\u96c6\u7fa4\u4e2d\u751f\u6548\u3002 kubectl create -f nginx-ingress-daemonset-hostnetwork.yaml \u8fd4\u56de\uff1a configmap/nginx-ingress-controller created configmap/tcp-services created serviceaccount/nginx-ingress created serviceaccount/nginx-ingress-backend created clusterrole.rbac.authorization.k8s.io/nginx-ingress created clusterrolebinding.rbac.authorization.k8s.io/nginx-ingress created role.rbac.authorization.k8s.io/nginx-ingress created rolebinding.rbac.authorization.k8s.io/nginx-ingress created service/nginx-ingress-controller-metrics created service/nginx-ingress-default-backend created service/nginx-ingress-proxy-tcp created daemonset.apps/nginx-ingress-controller created \u6210\u529f\u90e8\u7f72 Nginx Ingress \u540e\uff0c\u7531\u4e8e Nginx Ingress \u4e2d\u914d\u7f6e\u7684\u7f51\u7edc\u7c7b\u578b\u4e3a hostNetwork \uff0c\u56e0\u6b64\u7528\u6237\u53ef\u901a\u8fc7\u90e8\u7f72\u4e86 Nginx Ingress \u7684\u8282\u70b9\u7684 IP\uff08 192.168.8.160 \uff09\u548c\u5916\u90e8\u7aef\u53e3\uff08 9769 \uff09\u8bbf\u95eeNebulaGraph\u670d\u52a1\u3002 \u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\u90e8\u7f72\u8fde\u63a5NebulaGraph\u670d\u52a1\u7684 Console \u5e76\u901a\u8fc7\u5bbf\u4e3b\u673a IP\uff08\u672c\u793a\u4f8b\u4e3a 192.168.8.160 \uff09\u548c\u4e0a\u8ff0\u914d\u7f6e\u7684\u5916\u90e8\u7aef\u53e3\u8bbf\u95eeNebulaGraph\u670d\u52a1\u3002 kubectl run -ti --image vesoft/nebula-console:v3.5.0 --restart = Never -- <nebula_console_name> -addr <host_ip> -port <external_port> -u <username> -p <password> \u793a\u4f8b\uff1a kubectl run -ti --image vesoft/nebula-console:v3.5.0 --restart = Never -- nebula-console -addr 192 .168.8.160 -port 9769 -u root -p vesoft --image \uff1a\u4e3a\u8fde\u63a5NebulaGraph\u7684\u5de5\u5177 NebulaGraph Console \u7684\u955c\u50cf\u3002 <nebula-console> \uff1a\u81ea\u5b9a\u4e49\u7684 Pod \u540d\u79f0\u3002\u672c\u793a\u4f8b\u4e3a nebula-console \u3002 -addr \uff1a\u90e8\u7f72 Nginx Ingress \u7684\u8282\u70b9 IP\uff0c\u672c\u793a\u4f8b\u4e3a 192.168.8.160 \u3002 -port \uff1a\u5916\u7f51\u8bbf\u95ee\u4f7f\u7528\u7684\u7684\u7aef\u53e3\u3002\u672c\u793a\u4f8b\u8bbe\u7f6e\u4e3a 9769 \u3002 -u \uff1aNebulaGraph\u8d26\u53f7\u7684\u7528\u6237\u540d\u3002\u672a\u542f\u7528\u8eab\u4efd\u8ba4\u8bc1\u65f6\uff0c\u53ef\u4ee5\u4f7f\u7528\u4efb\u610f\u5df2\u5b58\u5728\u7684\u7528\u6237\u540d\uff08\u9ed8\u8ba4\u4e3a root\uff09\u3002 -p \uff1a\u7528\u6237\u540d\u5bf9\u5e94\u7684\u5bc6\u7801\u3002\u672a\u542f\u7528\u8eab\u4efd\u8ba4\u8bc1\u65f6\uff0c\u5bc6\u7801\u53ef\u4ee5\u586b\u5199\u4efb\u610f\u5b57\u7b26\u3002 \u5982\u679c\u8fd4\u56de\u4ee5\u4e0b\u5185\u5bb9\uff0c\u8bf4\u660e\u6210\u529f\u8fde\u63a5\u6570\u636e\u5e93\uff1a If you don ' t see a command prompt, try pressing enter. ( root@nebula ) [( none )] > Note \u5982\u679c\u5728\u96c6\u7fa4\u914d\u7f6e\u6587\u4ef6\u4e2d\u8bbe\u7f6e\u4e86 spec.console \u5b57\u6bb5\uff0c\u60a8\u8fd8\u53ef\u4ee5\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\u8fde\u63a5\u5230NebulaGraph\u6570\u636e\u5e93\uff1a # \u8fdb\u5165nebula-console Pod\u3002 kubectl exec -it nebula-console -- /bin/sh # \u8fde\u63a5\u5230\u6570\u636e\u5e93\u3002 nebula-console -addr <ingress_host_ip> -port <external_port> -u <username> -p <password> \u6709\u5173 nebula-console \u5bb9\u5668\u7684\u914d\u7f6e\uff0c\u8bf7\u53c2\u89c1 nebula-console \u3002","title":"\u8fde\u63a5 NebulaGraph"},{"location":"nebula-operator/4.connect-to-nebula-graph-service/#operator_nebulagraph","text":"\u4f7f\u7528 NebulaGraph Operator \u521b\u5efaNebulaGraph \u96c6\u7fa4\u540e\uff0c\u7528\u6237\u53ef\u5728NebulaGraph\u96c6\u7fa4\u5185\u90e8\u8bbf\u95eeNebulaGraph\uff0c\u4e5f\u53ef\u5728\u96c6\u7fa4\u5916\u8bbf\u95eeNebulaGraph\u3002\u5982\u679c\u7528\u6237\u5728\u96c6\u7fa4\u5185\u90e8\uff0c\u53ef\u4ee5\u901a\u8fc7\u8bbf\u95ee\u96c6\u7fa4\u5185\u7684\u865a\u62df IP \u5730\u5740\uff08ClusterIP\uff09\u8bbf\u95ee\u6570\u636e\u5e93\u3002\u800c\u5982\u679c\u7528\u6237\u5728\u96c6\u7fa4\u5916\u90e8\uff0c\u5219\u9700\u8981\u4f7f\u7528\u96c6\u7fa4\u8282\u70b9\u7684\u516c\u5171 IP \u5730\u5740\u6216\u8005\u901a\u8fc7\u90e8\u7f72 Nginx Ingress \u63a7\u5236\u5668\u6765\u8bbf\u95eeNebulaGraph\u3002IP \u5730\u5740\u7c7b\u578b\u53ef\u4ee5\u5728\u521b\u5efa\u96c6\u7fa4\u7684\u914d\u7f6e\u6587\u4ef6\u4e2d\uff0c\u901a\u8fc7 spec.graphd.service \u6307\u5b9a\u3002\u5173\u4e8e Service \u7684\u66f4\u591a\u4fe1\u606f\uff0c\u53c2\u8003 Service \u3002","title":"\u901a\u8fc7 Operator \u8fde\u63a5NebulaGraph"},{"location":"nebula-operator/4.connect-to-nebula-graph-service/#_1","text":"\u4f7f\u7528 NebulaGraph Operator \u521b\u5efaNebulaGraph\u96c6\u7fa4\u3002\u5177\u4f53\u6b65\u9aa4\u53c2\u8003 \u4f7f\u7528 Kubectl \u90e8\u7f72NebulaGraph\u96c6\u7fa4 \u6216\u8005 \u4f7f\u7528 Helm \u90e8\u7f72NebulaGraph\u96c6\u7fa4 \u3002","title":"\u524d\u63d0\u6761\u4ef6"},{"location":"nebula-operator/4.connect-to-nebula-graph-service/#nebulagraphnebulagraph","text":"\u7528\u6237\u4e5f\u53ef\u4ee5\u521b\u5efa ClusterIP \u7c7b\u578b\u7684 Service\uff0c\u4e3a\u96c6\u7fa4\u5185\u7684\u5176\u4ed6 Pod \u63d0\u4f9b\u8bbf\u95eeNebulaGraph\u7684\u5165\u53e3\u3002\u901a\u8fc7\u8be5 Service \u7684 IP \u548c\u6570\u636e\u5e93 Graph \u670d\u52a1\u7684\u7aef\u53e3\u53f7\uff08 9669 \uff09\uff0c\u53ef\u8fde\u63a5NebulaGraph\u3002\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u8003 ClusterIP \u3002 \u521b\u5efa\u540d\u4e3a graphd-clusterip-service.yaml \u7684\u6587\u4ef6\u3002\u793a\u4f8b\u5185\u5bb9\u5982\u4e0b\uff1a apiVersion : v1 kind : Service metadata : labels : app.kubernetes.io/cluster : nebula app.kubernetes.io/component : graphd app.kubernetes.io/managed-by : nebula-operator app.kubernetes.io/name : nebula-graph name : nebula-graphd-svc namespace : default spec : externalTrafficPolicy : Local ports : - name : thrift port : 9669 protocol : TCP targetPort : 9669 - name : http port : 19669 protocol : TCP targetPort : 19669 selector : app.kubernetes.io/cluster : nebula app.kubernetes.io/component : graphd app.kubernetes.io/managed-by : nebula-operator app.kubernetes.io/name : nebula-graph type : ClusterIP # \u8bbe\u7f6e Service \u7c7b\u578b\u4e3a ClusterIP\u3002 NebulaGraph\u9ed8\u8ba4\u4f7f\u7528 9669 \u7aef\u53e3\u4e3a\u5ba2\u6237\u7aef\u63d0\u4f9b\u670d\u52a1\u3002 19669 \u4e3a Graph \u670d\u52a1\u7684 HTTP \u7aef\u53e3\u53f7\u3002 targetPort \u7684\u503c\u4e3a\u6620\u5c04\u81f3 Pod \u7684\u7aef\u53e3\uff0c\u53ef\u81ea\u5b9a\u4e49\u3002 \u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\u4f7f Service \u670d\u52a1\u5728\u96c6\u7fa4\u4e2d\u751f\u6548\u3002 kubectl create -f graphd-clusterip-service.yaml \u67e5\u770b Service\uff0c\u547d\u4ee4\u5982\u4e0b\uff1a $ kubectl get service -l app.kubernetes.io/cluster = <nebula> #<nebula>\u4e3a\u53d8\u91cf\u503c\uff0c\u8bf7\u7528\u5b9e\u9645\u96c6\u7fa4\u540d\u79f0\u66ff\u6362\u3002 NAME TYPE CLUSTER-IP EXTERNAL-IP PORT ( S ) AGE nebula-graphd-svc ClusterIP 10 .98.213.34 <none> 9669 /TCP,19669/TCP,19670/TCP 23h ... \u4f7f\u7528\u4e0a\u8ff0 <cluster-name>-graphd-svc Service \u7684 IP \u8fde\u63a5NebulaGraph\uff1a kubectl run -ti --image vesoft/nebula-console:v3.5.0 --restart = Never -- <nebula_console_name> -addr <cluster_ip> -port <service_port> -u <username> -p <password> \u793a\u4f8b\uff1a kubectl run -ti --image vesoft/nebula-console:v3.5.0 --restart = Never -- nebula-console -addr 10 .98.213.34 -port 9669 -u root -p vesoft --image \uff1a\u4e3a\u8fde\u63a5NebulaGraph\u7684\u5de5\u5177 NebulaGraph Console \u7684\u955c\u50cf\u3002 <nebula-console> \uff1a\u81ea\u5b9a\u4e49\u7684 Pod \u540d\u79f0\u3002 -addr \uff1a\u8fde\u63a5 Graphd \u670d\u52a1\u7684 IP \u5730\u5740\uff0c\u5373 ClusterIP \u7c7b\u578b\u7684 Service IP \u5730\u5740\u3002 -port \uff1a\u8fde\u63a5 Graphd \u670d\u52a1\u7684\u7aef\u53e3\u3002\u9ed8\u8ba4\u7aef\u53e3\u4e3a 9669 \u3002 -u \uff1aNebulaGraph\u8d26\u53f7\u7684\u7528\u6237\u540d\u3002\u672a\u542f\u7528\u8eab\u4efd\u8ba4\u8bc1\u65f6\uff0c\u53ef\u4ee5\u4f7f\u7528\u4efb\u610f\u5df2\u5b58\u5728\u7684\u7528\u6237\u540d\uff08\u9ed8\u8ba4\u4e3a root \uff09\u3002 -p \uff1a\u7528\u6237\u540d\u5bf9\u5e94\u7684\u5bc6\u7801\u3002\u672a\u542f\u7528\u8eab\u4efd\u8ba4\u8bc1\u65f6\uff0c\u5bc6\u7801\u53ef\u4ee5\u586b\u5199\u4efb\u610f\u5b57\u7b26\u3002 \u5982\u679c\u8fd4\u56de\u4ee5\u4e0b\u5185\u5bb9\uff0c\u8bf4\u660e\u6210\u529f\u8fde\u63a5\u6570\u636e\u5e93\uff1a If you don ' t see a command prompt, try pressing enter. ( root@nebula ) [( none )] > \u7528\u6237\u8fd8\u53ef\u4ee5\u4f7f\u7528 \u5b8c\u5168\u9650\u5b9a\u57df\u540d\uff08FQDN\uff09 \u8fde\u63a5\u6570\u636e\u5e93\uff0c\u57df\u540d\u683c\u5f0f\u4e3a <cluster-name>-graphd.<cluster-namespace>.svc.<CLUSTER_DOMAIN> \uff0c CLUSTER_DOMAIN \u7684\u9ed8\u8ba4\u503c\u4e3a cluster.local \u3002 kubectl run -ti --image vesoft/nebula-console:v3.5.0 --restart = Never -- <nebula_console_name> -addr <cluster_name>-graphd-svc.default.svc.cluster.local -port <service_port> -u <username> -p <password> <service_port> \u4e3a Graph \u670d\u52a1\u9ed8\u8ba4\u7684\u7aef\u53e3 9669 \u3002 Note \u5982\u679c\u5728\u96c6\u7fa4\u914d\u7f6e\u6587\u4ef6\u4e2d\u8bbe\u7f6e\u4e86 spec.console \u5b57\u6bb5\uff0c\u60a8\u8fd8\u53ef\u4ee5\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\u8fde\u63a5\u5230NebulaGraph\u6570\u636e\u5e93\uff1a # \u8fdb\u5165 nebula-console Pod\u3002 kubectl exec -it nebula-console -- /bin/sh # \u8fde\u63a5\u5230\u6570\u636e\u5e93\u3002 nebula-console -addr nebula-graphd-svc.default.svc.cluster.local -port 9669 -u <username> -p <password> \u6709\u5173 nebula-console \u5bb9\u5668\u7684\u914d\u7f6e\uff0c\u8bf7\u53c2\u89c1 nebula-console \u3002","title":"\u5728NebulaGraph\u96c6\u7fa4\u5185\u8fde\u63a5NebulaGraph"},{"location":"nebula-operator/4.connect-to-nebula-graph-service/#nodeportnebulagraphnebulagraph","text":"\u7528\u6237\u53ef\u521b\u5efa NodePort \u7c7b\u578b\u7684 Service\uff0c\u901a\u8fc7\u96c6\u7fa4\u4efb\u4e00\u8282\u70b9 IP \u548c\u66b4\u9732\u7684\u8282\u70b9\u7aef\u53e3\uff0c\u4ece\u96c6\u7fa4\u5916\u90e8\u8bbf\u95ee\u96c6\u7fa4\u5185\u90e8\u7684\u670d\u52a1\u3002\u7528\u6237\u4e5f\u53ef\u4ee5\u4f7f\u7528\u4e91\u5382\u5546\uff08\u4f8b\u5982 Azure\u3001AWS \u7b49\uff09\u63d0\u4f9b\u7684\u8d1f\u8f7d\u5747\u8861\u670d\u52a1\uff0c\u8bbe\u7f6e Service \u7684\u7c7b\u578b\u4e3a LoadBalancer \uff0c\u901a\u8fc7\u4e91\u5382\u5546\u63d0\u4f9b\u7684\u8d1f\u8f7d\u5747\u8861\u5668\u7684\u516c\u7f51 IP \u548c\u7aef\u53e3\uff0c\u4ece\u96c6\u7fa4\u5916\u90e8\u8bbf\u95ee\u96c6\u7fa4\u5185\u90e8\u7684\u670d\u52a1\u3002 NodePort \u7c7b\u578b\u7684 Service \u901a\u8fc7\u6807\u7b7e\u9009\u62e9\u5668 spec.selector \u5c06\u524d\u7aef\u7684\u8bf7\u6c42\u8f6c\u53d1\u5230\u5e26\u6709\u6807\u7b7e app.kubernetes.io/cluster: <cluster-name> \u3001 app.kubernetes.io/component: graphd \u7684 Graphd pod \u4e2d\u3002 \u5f53\u6839\u636e\u96c6\u7fa4 \u793a\u4f8b\u6a21\u677f \uff0c\u5176\u4e2d spec.graphd.service.type=NodePort \uff0c\u521b\u5efa NebulaGraph \u96c6\u7fa4\u540e\uff0cNebulaGraph Operator \u4f1a\u81ea\u52a8\u5728\u540c\u4e00\u547d\u540d\u7a7a\u95f4\u4e0b\uff0c\u521b\u5efa\u540d\u4e3a <cluster-name>-graphd-svc \u3001\u7c7b\u578b\u4e3a NodePort \u7684 Service\u3002\u901a\u8fc7\u4efb\u4e00\u8282\u70b9 IP \u548c\u66b4\u9732\u7684\u8282\u70b9\u7aef\u53e3\uff0c\u53ef\u76f4\u63a5\u8fde\u63a5 NebulaGraph \u6570\u636e\u5e93\uff08\u53c2\u89c1\u4e0b\u6587\u7b2c 4 \u6b65\uff09\u3002\u7528\u6237\u4e5f\u53ef\u4ee5\u6839\u636e\u81ea\u5df1\u7684\u9700\u6c42\uff0c\u521b\u5efa\u81ea\u5b9a\u4e49\u7684 Service\u3002 \u64cd\u4f5c\u6b65\u9aa4\u5982\u4e0b\uff1a \u521b\u5efa\u540d\u4e3a graphd-nodeport-service.yaml \u7684\u6587\u4ef6\u3002\u793a\u4f8b\u5185\u5bb9\u5982\u4e0b\uff1a apiVersion : v1 kind : Service metadata : labels : app.kubernetes.io/cluster : nebula app.kubernetes.io/component : graphd app.kubernetes.io/managed-by : nebula-operator app.kubernetes.io/name : nebula-graph name : nebula-graphd-svc-nodeport namespace : default spec : externalTrafficPolicy : Local ports : - name : thrift port : 9669 protocol : TCP targetPort : 9669 - name : http port : 19669 protocol : TCP targetPort : 19669 selector : app.kubernetes.io/cluster : nebula app.kubernetes.io/component : graphd app.kubernetes.io/managed-by : nebula-operator app.kubernetes.io/name : nebula-graph type : NodePort # \u8bbe\u7f6e Service \u7c7b\u578b\u4e3a NodePort\u3002 NebulaGraph\u9ed8\u8ba4\u4f7f\u7528 9669 \u7aef\u53e3\u4e3a\u5ba2\u6237\u7aef\u63d0\u4f9b\u670d\u52a1\u3002 19669 \u4e3a Graph \u670d\u52a1\u7684 HTTP \u7aef\u53e3\u53f7\u3002 targetPort \u7684\u503c\u4e3a\u6620\u5c04\u81f3 Pod \u7684\u7aef\u53e3\uff0c\u53ef\u81ea\u5b9a\u4e49\u3002 \u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\u4f7f Service \u670d\u52a1\u5728\u96c6\u7fa4\u4e2d\u751f\u6548\u3002 kubectl create -f graphd-nodeport-service.yaml \u67e5\u770b Service \u4e2dNebulaGraph\u6620\u5c04\u81f3\u96c6\u7fa4\u8282\u70b9\u7684\u7aef\u53e3\u3002 kubectl get services -l app.kubernetes.io/cluster = <nebula> #<nebula>\u4e3a\u53d8\u91cf\u503c\uff0c\u8bf7\u7528\u5b9e\u9645\u96c6\u7fa4\u540d\u79f0\u66ff\u6362\u3002 \u8fd4\u56de\uff1a NAME TYPE CLUSTER-IP EXTERNAL-IP PORT ( S ) AGE nebula-graphd-svc-nodeport NodePort 10 .107.153.129 <none> 9669 :32236/TCP,19669:31674/TCP,19670:31057/TCP 24h ... NodePort \u7c7b\u578b\u7684 Service \u4e2d\uff0c\u6620\u5c04\u81f3\u96c6\u7fa4\u8282\u70b9\u7684\u7aef\u53e3\u4e3a 32236 \u3002 \u4f7f\u7528\u8282\u70b9 IP \u548c\u4e0a\u8ff0\u6620\u5c04\u7684\u8282\u70b9\u7aef\u53e3\u8fde\u63a5NebulaGraph\u3002 kubectl run -ti --image vesoft/nebula-console:v3.5.0 --restart = Never -- <nebula_console_name> -addr <node_ip> -port <node_port> -u <username> -p <password> \u793a\u4f8b\u5982\u4e0b\uff1a kubectl run -ti --image vesoft/nebula-console:v3.5.0 --restart = Never -- nebula-console -addr 192 .168.8.24 -port 32236 -u root -p vesoft If you don ' t see a command prompt, try pressing enter. ( root@nebula ) [( none )] > --image \uff1a\u4e3a\u8fde\u63a5NebulaGraph\u7684\u5de5\u5177 Console \u7684\u955c\u50cf\u3002 <nebula-console> \uff1a\u81ea\u5b9a\u4e49\u7684 Pod \u540d\u79f0\u3002\u672c\u793a\u4f8b\u4e3a nebula-console \u3002 -addr \uff1aNebulaGraph\u96c6\u7fa4\u4e2d\u4efb\u4e00\u8282\u70b9 IP \u5730\u5740\u3002\u672c\u793a\u4f8b\u4e3a 192.168.8.24 \u3002 -port \uff1aNebulaGraph\u6620\u5c04\u81f3\u8282\u70b9\u7684\u7aef\u53e3\u3002\u672c\u793a\u4f8b\u4e3a 32236 \u3002 -u \uff1aNebulaGraph\u8d26\u53f7\u7684\u7528\u6237\u540d\u3002\u672a\u542f\u7528\u8eab\u4efd\u8ba4\u8bc1\u65f6\uff0c\u53ef\u4ee5\u4f7f\u7528\u4efb\u610f\u5df2\u5b58\u5728\u7684\u7528\u6237\u540d\uff08\u9ed8\u8ba4\u4e3a root\uff09\u3002 -p \uff1a\u7528\u6237\u540d\u5bf9\u5e94\u7684\u5bc6\u7801\u3002\u672a\u542f\u7528\u8eab\u4efd\u8ba4\u8bc1\u65f6\uff0c\u5bc6\u7801\u53ef\u4ee5\u586b\u5199\u4efb\u610f\u5b57\u7b26\u3002 Note \u5982\u679c\u5728\u96c6\u7fa4\u914d\u7f6e\u6587\u4ef6\u4e2d\u8bbe\u7f6e\u4e86 spec.console \u5b57\u6bb5\uff0c\u60a8\u8fd8\u53ef\u4ee5\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\u8fde\u63a5\u5230NebulaGraph\u6570\u636e\u5e93\uff1a # \u8fdb\u5165nebula-console Pod\u3002 kubectl exec -it nebula-console -- /bin/sh # \u8fde\u63a5\u5230\u6570\u636e\u5e93\u3002 nebula-console -addr <node_ip> -port <node_port> -u <username> -p <password> \u6709\u5173 nebula-console \u5bb9\u5668\u7684\u914d\u7f6e\uff0c\u8bf7\u53c2\u89c1 nebula-console \u3002","title":"\u901a\u8fc7NodePort\u5728NebulaGraph\u96c6\u7fa4\u5916\u90e8\u8fde\u63a5NebulaGraph"},{"location":"nebula-operator/4.connect-to-nebula-graph-service/#ingressnebulagraphnebulagraph","text":"\u5f53\u96c6\u7fa4\u4e2d\u6709\u591a\u4e2a Pod \u65f6\uff0c\u4e3a\u6bcf\u4e2a Pod \u5206\u522b\u63d0\u4f9b\u670d\u52a1\u4f1a\u53d8\u5f97\u975e\u5e38\u56f0\u96be\u548c\u7e41\u7410\uff0c\u800c\u4f7f\u7528 Ingress \u53ef\u4ee5\u8f7b\u677e\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\u3002Ingress \u53ef\u4ee5\u5c06\u6d41\u91cf\u8def\u7531\u5230\u96c6\u7fa4\u5185\u90e8\u7684\u591a\u4e2a Pod\u3002 Nginx Ingress \u662f Kubernetes \u4e2d\u7684\u4e00\u4e2a Ingress \u63a7\u5236\u5668\uff08Controller\uff09\uff0c\u662f\u5bf9 Kubernetes Ingress \u8d44\u6e90\u7684\u4e00\u4e2a\u5b9e\u73b0\uff0c\u901a\u8fc7 Watch \u673a\u5236\u611f\u77e5 Kubernetes \u96c6\u7fa4\u4e2d\u7684 Ingress \u8d44\u6e90\u3002\u5b83\u5c06\u8fd9\u4e9b Ingress \u89c4\u5219\u8f6c\u6362\u4e3a Nginx \u914d\u7f6e\u5e76\u542f\u52a8\u4e00\u4e2a Nginx \u5b9e\u4f8b\u6765\u5904\u7406\u6d41\u91cf\u3002 \u7528\u6237\u53ef\u4ee5\u901a\u8fc7 HostNetwork \u548c DaemonSet \u7ec4\u5408\u7684\u6a21\u5f0f\u4f7f\u7528 Nginx Ingress \u4ece\u96c6\u7fa4\u5916\u90e8\u8fde\u63a5NebulaGraph\u96c6\u7fa4\u3002 \u7531\u4e8e\u4f7f\u7528 HostNetwork\uff0cNginx Ingress \u7684 Pods \u53ef\u80fd\u88ab\u8c03\u5ea6\u5728\u540c\u4e00\u4e2a\u8282\u70b9\u4e0a\uff08\u5f53\u591a\u4e2a Pod \u5c1d\u8bd5\u5728\u540c\u4e00\u4e2a\u8282\u70b9\u4e0a\u76d1\u542c\u76f8\u540c\u7684\u7aef\u53e3\u65f6\uff0c\u5c06\u4f1a\u51fa\u73b0\u7aef\u53e3\u51b2\u7a81\uff09\u3002\u4e3a\u4e86\u907f\u514d\u8fd9\u79cd\u60c5\u51b5\uff0cNginx Ingress \u4ee5 DaemonSet \u6a21\u5f0f\uff08\u786e\u4fdd\u96c6\u7fa4\u4e2d\u6bcf\u4e2a\u8282\u70b9\u90fd\u8fd0\u884c\u4e00\u4e2a Pod \u526f\u672c\uff09\u90e8\u7f72\u5728\u8fd9\u4e9b\u8282\u70b9\u4e0a\uff0c\u9700\u5148\u9009\u62e9\u4e00\u4e9b\u8282\u70b9\u5e76\u4e3a\u8282\u70b9\u6253\u4e0a\u6807\u7b7e\uff0c\u4e13\u95e8\u7528\u4e8e\u90e8\u7f72 Nginx Ingress\u3002 \u7531\u4e8e Ingress \u4e0d\u652f\u6301 TCP \u6216 UDP \u670d\u52a1\uff0c\u4e3a\u6b64 nginx-ingress-controller \u4f7f\u7528 --tcp-services-configmap \u548c --udp-services-configmap \u53c2\u6570\u6307\u5411\u4e00\u4e2a ConfigMap\uff0c\u8be5 ConfigMap \u4e2d\u7684\u952e\u6307\u9700\u8981\u4f7f\u7528\u7684\u5916\u90e8\u7aef\u53e3\uff0c\u503c\u6307\u8981\u516c\u5f00\u7684\u670d\u52a1\u7684\u683c\u5f0f\uff0c\u503c\u7684\u683c\u5f0f\u4e3a <\u547d\u540d\u7a7a\u95f4/\u670d\u52a1\u540d\u79f0>:<\u670d\u52a1\u7aef\u53e3> \u3002 \u4f8b\u5982\u6307\u5411\u540d\u4e3a tcp-services \u7684 ConfigMap \u7684\u914d\u7f6e\u5982\u4e0b\uff1a apiVersion : v1 kind : ConfigMap metadata : name : tcp-services namespace : nginx-ingress data : 9769 : \"default/nebula-graphd-svc:9669\" \u64cd\u4f5c\u6b65\u9aa4\u5982\u4e0b\uff1a \u521b\u5efa\u540d\u4e3a nginx-ingress-daemonset-hostnetwork.yaml \u7684\u6587\u4ef6\u3002 \u5355\u51fb nginx-ingress-daemonset-hostnetwork.yaml \u67e5\u770b\u5b8c\u6574\u7684 YAML \u793a\u4f8b\u5185\u5bb9\u3002 Note \u4e0a\u8ff0 YAML \u4e2d\u7684\u8d44\u6e90\u5bf9\u8c61\u5747\u4f7f\u7528 nginx-ingress \u547d\u540d\u7a7a\u95f4\u3002\u7528\u6237\u53ef\u6267\u884c kubectl create namesapce nginx-ingress \u521b\u5efa\u547d\u540d\u7a7a\u95f4\uff0c\u6216\u8005\u81ea\u5b9a\u4e49\u5176\u4ed6\u547d\u540d\u7a7a\u95f4\u3002 \u4e3a\u4efb\u4e00\u8282\u70b9\uff08\u672c\u793a\u4f8b\u4f7f\u7528\u7684\u8282\u70b9\u540d\u4e3a worker2 \uff0cIP \u4e3a 192.168.8.160 \uff09\u6253\u4e0a\u6807\u7b7e\uff0c\u4ee5\u8fd0\u884c\u4e0a\u8ff0 YAML \u6587\u4ef6\u4e2d\u540d\u4e3a nginx-ingress-controller \u7684 DaemonSet\u3002 kubectl label node worker2 nginx-ingress = true \u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\u4f7f Nginx Ingress \u5728\u96c6\u7fa4\u4e2d\u751f\u6548\u3002 kubectl create -f nginx-ingress-daemonset-hostnetwork.yaml \u8fd4\u56de\uff1a configmap/nginx-ingress-controller created configmap/tcp-services created serviceaccount/nginx-ingress created serviceaccount/nginx-ingress-backend created clusterrole.rbac.authorization.k8s.io/nginx-ingress created clusterrolebinding.rbac.authorization.k8s.io/nginx-ingress created role.rbac.authorization.k8s.io/nginx-ingress created rolebinding.rbac.authorization.k8s.io/nginx-ingress created service/nginx-ingress-controller-metrics created service/nginx-ingress-default-backend created service/nginx-ingress-proxy-tcp created daemonset.apps/nginx-ingress-controller created \u6210\u529f\u90e8\u7f72 Nginx Ingress \u540e\uff0c\u7531\u4e8e Nginx Ingress \u4e2d\u914d\u7f6e\u7684\u7f51\u7edc\u7c7b\u578b\u4e3a hostNetwork \uff0c\u56e0\u6b64\u7528\u6237\u53ef\u901a\u8fc7\u90e8\u7f72\u4e86 Nginx Ingress \u7684\u8282\u70b9\u7684 IP\uff08 192.168.8.160 \uff09\u548c\u5916\u90e8\u7aef\u53e3\uff08 9769 \uff09\u8bbf\u95eeNebulaGraph\u670d\u52a1\u3002 \u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\u90e8\u7f72\u8fde\u63a5NebulaGraph\u670d\u52a1\u7684 Console \u5e76\u901a\u8fc7\u5bbf\u4e3b\u673a IP\uff08\u672c\u793a\u4f8b\u4e3a 192.168.8.160 \uff09\u548c\u4e0a\u8ff0\u914d\u7f6e\u7684\u5916\u90e8\u7aef\u53e3\u8bbf\u95eeNebulaGraph\u670d\u52a1\u3002 kubectl run -ti --image vesoft/nebula-console:v3.5.0 --restart = Never -- <nebula_console_name> -addr <host_ip> -port <external_port> -u <username> -p <password> \u793a\u4f8b\uff1a kubectl run -ti --image vesoft/nebula-console:v3.5.0 --restart = Never -- nebula-console -addr 192 .168.8.160 -port 9769 -u root -p vesoft --image \uff1a\u4e3a\u8fde\u63a5NebulaGraph\u7684\u5de5\u5177 NebulaGraph Console \u7684\u955c\u50cf\u3002 <nebula-console> \uff1a\u81ea\u5b9a\u4e49\u7684 Pod \u540d\u79f0\u3002\u672c\u793a\u4f8b\u4e3a nebula-console \u3002 -addr \uff1a\u90e8\u7f72 Nginx Ingress \u7684\u8282\u70b9 IP\uff0c\u672c\u793a\u4f8b\u4e3a 192.168.8.160 \u3002 -port \uff1a\u5916\u7f51\u8bbf\u95ee\u4f7f\u7528\u7684\u7684\u7aef\u53e3\u3002\u672c\u793a\u4f8b\u8bbe\u7f6e\u4e3a 9769 \u3002 -u \uff1aNebulaGraph\u8d26\u53f7\u7684\u7528\u6237\u540d\u3002\u672a\u542f\u7528\u8eab\u4efd\u8ba4\u8bc1\u65f6\uff0c\u53ef\u4ee5\u4f7f\u7528\u4efb\u610f\u5df2\u5b58\u5728\u7684\u7528\u6237\u540d\uff08\u9ed8\u8ba4\u4e3a root\uff09\u3002 -p \uff1a\u7528\u6237\u540d\u5bf9\u5e94\u7684\u5bc6\u7801\u3002\u672a\u542f\u7528\u8eab\u4efd\u8ba4\u8bc1\u65f6\uff0c\u5bc6\u7801\u53ef\u4ee5\u586b\u5199\u4efb\u610f\u5b57\u7b26\u3002 \u5982\u679c\u8fd4\u56de\u4ee5\u4e0b\u5185\u5bb9\uff0c\u8bf4\u660e\u6210\u529f\u8fde\u63a5\u6570\u636e\u5e93\uff1a If you don ' t see a command prompt, try pressing enter. ( root@nebula ) [( none )] > Note \u5982\u679c\u5728\u96c6\u7fa4\u914d\u7f6e\u6587\u4ef6\u4e2d\u8bbe\u7f6e\u4e86 spec.console \u5b57\u6bb5\uff0c\u60a8\u8fd8\u53ef\u4ee5\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\u8fde\u63a5\u5230NebulaGraph\u6570\u636e\u5e93\uff1a # \u8fdb\u5165nebula-console Pod\u3002 kubectl exec -it nebula-console -- /bin/sh # \u8fde\u63a5\u5230\u6570\u636e\u5e93\u3002 nebula-console -addr <ingress_host_ip> -port <external_port> -u <username> -p <password> \u6709\u5173 nebula-console \u5bb9\u5668\u7684\u914d\u7f6e\uff0c\u8bf7\u53c2\u89c1 nebula-console \u3002","title":"\u901a\u8fc7Ingress\u5728NebulaGraph\u96c6\u7fa4\u5916\u90e8\u8fde\u63a5NebulaGraph"},{"location":"nebula-operator/5.operator-failover/","text":"\u6545\u969c\u81ea\u6108 \u00b6 NebulaGraph Operator \u8c03\u7528NebulaGraph\u96c6\u7fa4\u63d0\u4f9b\u7684\u63a5\u53e3\uff0c\u52a8\u6001\u5730\u611f\u77e5\u670d\u52a1\u662f\u5426\u6b63\u5e38\u8fd0\u884c\u3002\u5f53NebulaGraph\u96c6\u7fa4\u4e2d\u67d0\u4e00\u7ec4\u4ef6\u505c\u6b62\u8fd0\u884c\u65f6\uff0cNebulaGraph Operator \u4f1a\u81ea\u52a8\u5730\u8fdb\u884c\u5bb9\u9519\u5904\u7406\u3002\u672c\u6587\u901a\u8fc7\u5220\u9664NebulaGraph\u96c6\u7fa4\u4e2d 1 \u4e2a Storage \u670d\u52a1 Pod\uff0c\u6a21\u62df\u96c6\u7fa4\u6545\u969c\u4e3a\u4f8b\uff0c\u8bf4\u660e Nebular Operator \u5982\u4f55\u8fdb\u884c\u6545\u969c\u81ea\u6108\u3002 \u524d\u63d0\u6761\u4ef6 \u00b6 \u5b89\u88c5 NebulaGraph Operator \u64cd\u4f5c\u6b65\u9aa4 \u00b6 \u521b\u5efaNebulaGraph\u96c6\u7fa4\u3002\u5177\u4f53\u6b65\u9aa4\u53c2\u8003 \u4f7f\u7528 Kubectl \u90e8\u7f72NebulaGraph\u96c6\u7fa4 \u6216\u8005 \u4f7f\u7528 Helm \u90e8\u7f72NebulaGraph\u96c6\u7fa4 \u3002 \u5f85\u6240\u6709 Pods \u90fd\u5904\u4e8e Running \u72b6\u6001\u65f6\uff0c\u6a21\u62df\u6545\u969c\uff0c\u5220\u9664\u540d\u4e3a <cluster_name>-storaged-2 Pod\u3002 kubectl delete pod <cluster-name>-storaged-2 --now <cluster_name> \u4e3aNebulaGraph\u96c6\u7fa4\u7684\u540d\u79f0\u3002 NebulaGraph Operator \u81ea\u52a8\u521b\u5efa\u540d\u4e3a <cluster-name>-storaged-2 \u7684 Pod\uff0c\u4ee5\u4fee\u590d\u6545\u969c\u3002 \u6267\u884c kubectl get pods \u67e5\u770b <cluster-name>-storaged-2 Pod \u7684\u521b\u5efa\u72b6\u6001\u3002 ... nebula-cluster-storaged-1 1 /1 Running 0 5d23h nebula-cluster-storaged-2 0 /1 ContainerCreating 0 1s ... ... nebula-cluster-storaged-1 1 /1 Running 0 5d23h nebula-cluster-storaged-2 1 /1 Running 0 4m2s ... \u5f53 <cluster-name>-storaged-2 \u7684\u72b6\u6001\u7531 ContainerCreating \u53d8\u4e3a Running \u65f6\uff0c\u8bf4\u660e\u81ea\u6108\u6210\u529f\u3002","title":"\u6545\u969c\u81ea\u6108"},{"location":"nebula-operator/5.operator-failover/#_1","text":"NebulaGraph Operator \u8c03\u7528NebulaGraph\u96c6\u7fa4\u63d0\u4f9b\u7684\u63a5\u53e3\uff0c\u52a8\u6001\u5730\u611f\u77e5\u670d\u52a1\u662f\u5426\u6b63\u5e38\u8fd0\u884c\u3002\u5f53NebulaGraph\u96c6\u7fa4\u4e2d\u67d0\u4e00\u7ec4\u4ef6\u505c\u6b62\u8fd0\u884c\u65f6\uff0cNebulaGraph Operator \u4f1a\u81ea\u52a8\u5730\u8fdb\u884c\u5bb9\u9519\u5904\u7406\u3002\u672c\u6587\u901a\u8fc7\u5220\u9664NebulaGraph\u96c6\u7fa4\u4e2d 1 \u4e2a Storage \u670d\u52a1 Pod\uff0c\u6a21\u62df\u96c6\u7fa4\u6545\u969c\u4e3a\u4f8b\uff0c\u8bf4\u660e Nebular Operator \u5982\u4f55\u8fdb\u884c\u6545\u969c\u81ea\u6108\u3002","title":"\u6545\u969c\u81ea\u6108"},{"location":"nebula-operator/5.operator-failover/#_2","text":"\u5b89\u88c5 NebulaGraph Operator","title":"\u524d\u63d0\u6761\u4ef6"},{"location":"nebula-operator/5.operator-failover/#_3","text":"\u521b\u5efaNebulaGraph\u96c6\u7fa4\u3002\u5177\u4f53\u6b65\u9aa4\u53c2\u8003 \u4f7f\u7528 Kubectl \u90e8\u7f72NebulaGraph\u96c6\u7fa4 \u6216\u8005 \u4f7f\u7528 Helm \u90e8\u7f72NebulaGraph\u96c6\u7fa4 \u3002 \u5f85\u6240\u6709 Pods \u90fd\u5904\u4e8e Running \u72b6\u6001\u65f6\uff0c\u6a21\u62df\u6545\u969c\uff0c\u5220\u9664\u540d\u4e3a <cluster_name>-storaged-2 Pod\u3002 kubectl delete pod <cluster-name>-storaged-2 --now <cluster_name> \u4e3aNebulaGraph\u96c6\u7fa4\u7684\u540d\u79f0\u3002 NebulaGraph Operator \u81ea\u52a8\u521b\u5efa\u540d\u4e3a <cluster-name>-storaged-2 \u7684 Pod\uff0c\u4ee5\u4fee\u590d\u6545\u969c\u3002 \u6267\u884c kubectl get pods \u67e5\u770b <cluster-name>-storaged-2 Pod \u7684\u521b\u5efa\u72b6\u6001\u3002 ... nebula-cluster-storaged-1 1 /1 Running 0 5d23h nebula-cluster-storaged-2 0 /1 ContainerCreating 0 1s ... ... nebula-cluster-storaged-1 1 /1 Running 0 5d23h nebula-cluster-storaged-2 1 /1 Running 0 4m2s ... \u5f53 <cluster-name>-storaged-2 \u7684\u72b6\u6001\u7531 ContainerCreating \u53d8\u4e3a Running \u65f6\uff0c\u8bf4\u660e\u81ea\u6108\u6210\u529f\u3002","title":"\u64cd\u4f5c\u6b65\u9aa4"},{"location":"nebula-operator/6.get-started-with-operator/","text":"\u4f7f\u7528\u6d41\u7a0b \u00b6 \u4f7f\u7528 NebulaGraph Operator \u8bbf\u95eeNebulaGraph\u96c6\u7fa4\u670d\u52a1\u7684\u6d41\u7a0b\u5982\u4e0b\uff1a \u5b89\u88c5 NebulaGraph Operator \u3002 \u521b\u5efaNebulaGraph\u96c6\u7fa4\u3002 \u5177\u4f53\u6b65\u9aa4\u53c2\u8003 \u4f7f\u7528 Kubectl \u90e8\u7f72NebulaGraph\u96c6\u7fa4 \u6216\u8005 \u4f7f\u7528 Helm \u90e8\u7f72NebulaGraph\u96c6\u7fa4 \u3002 \u8fde\u63a5NebulaGraph\u670d\u52a1 \u3002","title":"\u4f7f\u7528\u6d41\u7a0b"},{"location":"nebula-operator/6.get-started-with-operator/#_1","text":"\u4f7f\u7528 NebulaGraph Operator \u8bbf\u95eeNebulaGraph\u96c6\u7fa4\u670d\u52a1\u7684\u6d41\u7a0b\u5982\u4e0b\uff1a \u5b89\u88c5 NebulaGraph Operator \u3002 \u521b\u5efaNebulaGraph\u96c6\u7fa4\u3002 \u5177\u4f53\u6b65\u9aa4\u53c2\u8003 \u4f7f\u7528 Kubectl \u90e8\u7f72NebulaGraph\u96c6\u7fa4 \u6216\u8005 \u4f7f\u7528 Helm \u90e8\u7f72NebulaGraph\u96c6\u7fa4 \u3002 \u8fde\u63a5NebulaGraph\u670d\u52a1 \u3002","title":"\u4f7f\u7528\u6d41\u7a0b"},{"location":"nebula-operator/7.operator-faq/","text":"\u5e38\u89c1\u95ee\u9898 \u00b6 NebulaGraph Operator \u652f\u6301 v1.x \u7248\u672c\u7684NebulaGraph\u5417\uff1f \u00b6 \u4e0d\u652f\u6301\uff0c\u56e0\u4e3a v1.x \u7248\u672c\u7684NebulaGraph\u4e0d\u652f\u6301 DNS\uff0c\u800c NebulaGraph Operator \u9700\u8981\u4f7f\u7528 DNS\u3002 \u4f7f\u7528\u672c\u5730\u5b58\u50a8\u662f\u5426\u53ef\u4ee5\u4fdd\u8bc1\u96c6\u7fa4\u7a33\u5b9a\u6027\uff1f \u00b6 \u65e0\u6cd5\u4fdd\u8bc1\u3002\u4f7f\u7528\u672c\u5730\u5b58\u50a8\u610f\u5473\u7740 Pod \u88ab\u7ed1\u5b9a\u5230\u4e00\u4e2a\u7279\u5b9a\u7684\u8282\u70b9\uff0cNebulaGraph Operator \u76ee\u524d\u4e0d\u652f\u6301\u5728\u7ed1\u5b9a\u7684\u8282\u70b9\u53d1\u751f\u6545\u969c\u65f6\u8fdb\u884c\u6545\u969c\u8f6c\u79fb\u3002 \u6269\u7f29\u5bb9\u96c6\u7fa4\u65f6\uff0c\u5982\u4f55\u786e\u4fdd\u7a33\u5b9a\u6027\uff1f \u00b6 \u5efa\u8bae\u63d0\u524d\u5907\u4efd\u6570\u636e\uff0c\u4ee5\u4fbf\u6545\u969c\u53d1\u751f\u65f6\u56de\u6eda\u6570\u636e\u3002 Operator \u6587\u6863\u4e2d\u7684 replica \u548cNebulaGraph\u5185\u6838\u6587\u6863\u4e2d\u7684 replica \u662f\u4e00\u6837\u7684\u5417\uff1f \u00b6 \u4e8c\u8005\u662f\u4e0d\u540c\u7684\u6982\u5ff5\u3002Operator \u6587\u6863\u4e2d\u7684 replica \u662f K8s \u4e2d\u7684 Pod \u526f\u672c\uff0c\u800c\u5185\u6838\u6587\u6863\u4e2d\u7684 replica \u662fNebulaGraph\u4e2d\u7684\u5206\u7247\u526f\u672c\u3002 \u5982\u4f55\u67e5\u770b NebulaGraph \u96c6\u7fa4\u4e2d\u5404\u670d\u52a1\u7684\u65e5\u5fd7\uff1f \u00b6 NebulaGraph \u96c6\u7fa4\u65e5\u5fd7\u6ca1\u6709\u88ab\u6536\u96c6\u5230 K8s \u96c6\u7fa4\u4e2d\uff0c\u56e0\u6b64\u65e0\u6cd5\u901a\u8fc7 kubectl logs \u67e5\u770b\u3002\u7528\u6237\u53ef\u4ee5\u901a\u8fc7\u8fdb\u5165\u5bb9\u5668\u5e76\u5728\u5bb9\u5668\u5185\u67e5\u770b\u65e5\u5fd7\u6587\u4ef6\u7684\u65b9\u5f0f\u6765\u83b7\u53d6 NebulaGraph \u96c6\u7fa4\u5404\u670d\u52a1\u65e5\u5fd7\u3002 \u64cd\u4f5c\u5982\u4e0b\uff1a # \u67e5\u627e\u8981\u8fdb\u5165\u7684\u5bb9\u5668\u6240\u5728\u7684 Pod \u540d\u79f0\u3002\u5176\u4e2d <cluster-name> \u4e3a\u96c6\u7fa4\u540d\u79f0\u3002 kubectl get pods -l app.kubernetes.io/cluster = <cluster-name> # \u8fdb\u5165 Pod \u4e2d\u7684\u5bb9\u5668\uff0c\u4f8b\u5982\u8fdb\u5165 nebula-graphd-0 \u5bb9\u5668\u3002 kubectl exec -it nebula-graphd-0 -- /bin/bash # \u8fdb\u5165 /usr/local/nebula/logs \u76ee\u5f55\uff0c\u67e5\u770b\u65e5\u5fd7\u6587\u4ef6\u3002 cd /usr/local/nebula/logs host not found:nebula-<metad|storaged|graphd>-0.nebula.<metad|storaged|graphd>-headless.default.svc.cluster.local \u9519\u8bef\u5982\u4f55\u89e3\u51b3\uff1f \u00b6 \u8fd9\u4e2a\u9519\u8bef\u4e00\u822c\u662f\u7531\u4e8e DNS \u89e3\u6790\u5931\u8d25\u5bfc\u81f4\u7684\uff0c\u9700\u68c0\u67e5\u662f\u5426\u4fee\u6539\u4e86\u96c6\u7fa4\u57df\u540d\u3002\u5982\u679c\u4fee\u6539\u4e86\u96c6\u7fa4\u57df\u540d\uff0c\u9700\u8981\u540c\u6b65\u4fee\u6539 Operator \u914d\u7f6e\u6587\u4ef6\u4e2d\u7684 kubernetesClusterDomain \u5b57\u6bb5\u3002\u540c\u6b65\u4fee\u6539 Operator \u914d\u7f6e\u6587\u4ef6\u7684\u64cd\u4f5c\u5982\u4e0b\uff1a \u67e5\u770b Operator \u914d\u7f6e\u6587\u4ef6\u3002 [ abby@master ~ ] $ helm show values nebula-operator/nebula-operator image : nebulaOperator : image : vesoft/nebula-operator:v1.5.0 imagePullPolicy : Always kubeRBACProxy : image : bitnami/kube-rbac-proxy:0.14.2 imagePullPolicy : Always kubeScheduler : image : registry.k8s.io/kube-scheduler:v1.24.11 imagePullPolicy : Always imagePullSecrets : [] kubernetesClusterDomain : \"\" # \u96c6\u7fa4\u57df\u540d\uff0c\u9ed8\u8ba4\u4e3a cluster.local\u3002 \u4fee\u6539 kubernetesClusterDomain \u5b57\u6bb5\u7684\u503c\u4e3a\u96c6\u7fa4\u57df\u540d\u3002 helm upgrade nebula-operator nebula-operator/nebula-operator --namespace=<nebula-operator-system> --version=1.5.0 --set kubernetesClusterDomain=<cluster-domain> \u4e3a Operator \u6240\u5728\u7684\u547d\u540d\u7a7a\u95f4\uff0c \u4e3a\u66f4\u65b0\u540e\u7684\u96c6\u7fa4\u57df\u540d\u3002","title":"\u5e38\u89c1\u95ee\u9898"},{"location":"nebula-operator/7.operator-faq/#_1","text":"","title":"\u5e38\u89c1\u95ee\u9898"},{"location":"nebula-operator/7.operator-faq/#nebulagraph_operator_v1x_nebulagraph","text":"\u4e0d\u652f\u6301\uff0c\u56e0\u4e3a v1.x \u7248\u672c\u7684NebulaGraph\u4e0d\u652f\u6301 DNS\uff0c\u800c NebulaGraph Operator \u9700\u8981\u4f7f\u7528 DNS\u3002","title":"NebulaGraph Operator \u652f\u6301 v1.x \u7248\u672c\u7684NebulaGraph\u5417\uff1f"},{"location":"nebula-operator/7.operator-faq/#_2","text":"\u65e0\u6cd5\u4fdd\u8bc1\u3002\u4f7f\u7528\u672c\u5730\u5b58\u50a8\u610f\u5473\u7740 Pod \u88ab\u7ed1\u5b9a\u5230\u4e00\u4e2a\u7279\u5b9a\u7684\u8282\u70b9\uff0cNebulaGraph Operator \u76ee\u524d\u4e0d\u652f\u6301\u5728\u7ed1\u5b9a\u7684\u8282\u70b9\u53d1\u751f\u6545\u969c\u65f6\u8fdb\u884c\u6545\u969c\u8f6c\u79fb\u3002","title":"\u4f7f\u7528\u672c\u5730\u5b58\u50a8\u662f\u5426\u53ef\u4ee5\u4fdd\u8bc1\u96c6\u7fa4\u7a33\u5b9a\u6027\uff1f"},{"location":"nebula-operator/7.operator-faq/#_3","text":"\u5efa\u8bae\u63d0\u524d\u5907\u4efd\u6570\u636e\uff0c\u4ee5\u4fbf\u6545\u969c\u53d1\u751f\u65f6\u56de\u6eda\u6570\u636e\u3002","title":"\u6269\u7f29\u5bb9\u96c6\u7fa4\u65f6\uff0c\u5982\u4f55\u786e\u4fdd\u7a33\u5b9a\u6027\uff1f"},{"location":"nebula-operator/7.operator-faq/#operator_replica_nebulagraph_replica","text":"\u4e8c\u8005\u662f\u4e0d\u540c\u7684\u6982\u5ff5\u3002Operator \u6587\u6863\u4e2d\u7684 replica \u662f K8s \u4e2d\u7684 Pod \u526f\u672c\uff0c\u800c\u5185\u6838\u6587\u6863\u4e2d\u7684 replica \u662fNebulaGraph\u4e2d\u7684\u5206\u7247\u526f\u672c\u3002","title":"Operator \u6587\u6863\u4e2d\u7684 replica \u548cNebulaGraph\u5185\u6838\u6587\u6863\u4e2d\u7684 replica \u662f\u4e00\u6837\u7684\u5417\uff1f"},{"location":"nebula-operator/7.operator-faq/#nebulagraph","text":"NebulaGraph \u96c6\u7fa4\u65e5\u5fd7\u6ca1\u6709\u88ab\u6536\u96c6\u5230 K8s \u96c6\u7fa4\u4e2d\uff0c\u56e0\u6b64\u65e0\u6cd5\u901a\u8fc7 kubectl logs \u67e5\u770b\u3002\u7528\u6237\u53ef\u4ee5\u901a\u8fc7\u8fdb\u5165\u5bb9\u5668\u5e76\u5728\u5bb9\u5668\u5185\u67e5\u770b\u65e5\u5fd7\u6587\u4ef6\u7684\u65b9\u5f0f\u6765\u83b7\u53d6 NebulaGraph \u96c6\u7fa4\u5404\u670d\u52a1\u65e5\u5fd7\u3002 \u64cd\u4f5c\u5982\u4e0b\uff1a # \u67e5\u627e\u8981\u8fdb\u5165\u7684\u5bb9\u5668\u6240\u5728\u7684 Pod \u540d\u79f0\u3002\u5176\u4e2d <cluster-name> \u4e3a\u96c6\u7fa4\u540d\u79f0\u3002 kubectl get pods -l app.kubernetes.io/cluster = <cluster-name> # \u8fdb\u5165 Pod \u4e2d\u7684\u5bb9\u5668\uff0c\u4f8b\u5982\u8fdb\u5165 nebula-graphd-0 \u5bb9\u5668\u3002 kubectl exec -it nebula-graphd-0 -- /bin/bash # \u8fdb\u5165 /usr/local/nebula/logs \u76ee\u5f55\uff0c\u67e5\u770b\u65e5\u5fd7\u6587\u4ef6\u3002 cd /usr/local/nebula/logs","title":"\u5982\u4f55\u67e5\u770b NebulaGraph \u96c6\u7fa4\u4e2d\u5404\u670d\u52a1\u7684\u65e5\u5fd7\uff1f"},{"location":"nebula-operator/7.operator-faq/#host_not_foundnebula-metadstoragedgraphd-0nebulametadstoragedgraphd-headlessdefaultsvcclusterlocal","text":"\u8fd9\u4e2a\u9519\u8bef\u4e00\u822c\u662f\u7531\u4e8e DNS \u89e3\u6790\u5931\u8d25\u5bfc\u81f4\u7684\uff0c\u9700\u68c0\u67e5\u662f\u5426\u4fee\u6539\u4e86\u96c6\u7fa4\u57df\u540d\u3002\u5982\u679c\u4fee\u6539\u4e86\u96c6\u7fa4\u57df\u540d\uff0c\u9700\u8981\u540c\u6b65\u4fee\u6539 Operator \u914d\u7f6e\u6587\u4ef6\u4e2d\u7684 kubernetesClusterDomain \u5b57\u6bb5\u3002\u540c\u6b65\u4fee\u6539 Operator \u914d\u7f6e\u6587\u4ef6\u7684\u64cd\u4f5c\u5982\u4e0b\uff1a \u67e5\u770b Operator \u914d\u7f6e\u6587\u4ef6\u3002 [ abby@master ~ ] $ helm show values nebula-operator/nebula-operator image : nebulaOperator : image : vesoft/nebula-operator:v1.5.0 imagePullPolicy : Always kubeRBACProxy : image : bitnami/kube-rbac-proxy:0.14.2 imagePullPolicy : Always kubeScheduler : image : registry.k8s.io/kube-scheduler:v1.24.11 imagePullPolicy : Always imagePullSecrets : [] kubernetesClusterDomain : \"\" # \u96c6\u7fa4\u57df\u540d\uff0c\u9ed8\u8ba4\u4e3a cluster.local\u3002 \u4fee\u6539 kubernetesClusterDomain \u5b57\u6bb5\u7684\u503c\u4e3a\u96c6\u7fa4\u57df\u540d\u3002 helm upgrade nebula-operator nebula-operator/nebula-operator --namespace=<nebula-operator-system> --version=1.5.0 --set kubernetesClusterDomain=<cluster-domain> \u4e3a Operator \u6240\u5728\u7684\u547d\u540d\u7a7a\u95f4\uff0c \u4e3a\u66f4\u65b0\u540e\u7684\u96c6\u7fa4\u57df\u540d\u3002","title":"host not found:nebula-&lt;metad|storaged|graphd&gt;-0.nebula.&lt;metad|storaged|graphd&gt;-headless.default.svc.cluster.local\u9519\u8bef\u5982\u4f55\u89e3\u51b3\uff1f"},{"location":"nebula-operator/9.upgrade-nebula-cluster/","text":"\u5347\u7ea7NebulaGraph\u96c6\u7fa4 \u00b6 \u672c\u6587\u4ecb\u7ecd\u5982\u4f55\u5347\u7ea7\u901a\u8fc7 NebulaGraph Operator \u521b\u5efa\u7684NebulaGraph\u96c6\u7fa4\u3002 \u5386\u53f2\u7248\u672c\u517c\u5bb9\u6027 1.x \u7248\u672c\u7684 NebulaGraph Operator \u4e0d\u517c\u5bb9 3.x \u4ee5\u4e0b\u7248\u672c\u7684 NebulaGraph\u3002 \u4f7f\u7528\u9650\u5236 \u00b6 \u53ea\u652f\u6301\u5347\u7ea7\u4f7f\u7528 NebulaGraph Operator \u521b\u5efa\u7684NebulaGraph\u96c6\u7fa4\u3002 \u53ea\u652f\u6301\u5347\u7ea7 NebulaGraph 3.5.0 \u81f3 3.6.0 \u7248\u672c\u3002 \u4f7f\u7528 Kubectl \u5347\u7ea7NebulaGraph\u96c6\u7fa4 \u00b6 \u524d\u63d0\u6761\u4ef6 \u00b6 \u5df2\u521b\u5efaNebulaGraph\u96c6\u7fa4\u3002\u5177\u4f53\u6b65\u9aa4\uff0c\u53c2\u89c1 \u4f7f\u7528 Kubectl \u521b\u5efaNebulaGraph\u96c6\u7fa4 \u3002 \u672c\u6587\u793a\u4f8b\u4e2d\u5f85\u5347\u7ea7\u7684NebulaGraph\u7248\u672c\u4e3a 3.5.0\uff0c\u5176 YAML \u6587\u4ef6\u540d\u4e3a apps_v1alpha1_nebulacluster.yaml \u3002 \u64cd\u4f5c\u6b65\u9aa4 \u00b6 \u67e5\u770b\u96c6\u7fa4\u4e2d\u670d\u52a1\u7684\u955c\u50cf\u7248\u672c\u3002 kubectl get pods -l app.kubernetes.io/cluster = nebula -o jsonpath = \"{.items[*].spec.containers[*].image}\" | tr -s '[[:space:]]' '\\n' | sort | uniq -c \u8fd4\u56de\uff1a 1 vesoft/nebula-graphd:v3.5.0 1 vesoft/nebula-metad:v3.5.0 3 vesoft/nebula-storaged:v3.5.0 \u7f16\u8f91 apps_v1alpha1_nebulacluster.yaml \u5e76\u5c06\u6240\u6709 version \u7684\u503c\u4ece 3.5.0 \u4fee\u6539\u81f3 v3.6.0\u3002 \u4fee\u6539\u540e\u7684 YAML \u6587\u4ef6\u5185\u5bb9\u5982\u4e0b\uff1a apiVersion : apps.nebula-graph.io/v1alpha1 kind : NebulaCluster metadata : name : nebula spec : graphd : resources : requests : cpu : \"500m\" memory : \"500Mi\" limits : cpu : \"1\" memory : \"1Gi\" replicas : 1 image : vesoft/nebula-graphd version : v3.6.0 //\u5c06\u503c\u4ece 3.5.0 \u4fee\u6539\u81f3 v3.6.0\u3002 service : type : NodePort externalTrafficPolicy : Local logVolumeClaim : resources : requests : storage : 2Gi storageClassName : fast-disks metad : resources : requests : cpu : \"500m\" memory : \"500Mi\" limits : cpu : \"1\" memory : \"1Gi\" replicas : 1 image : vesoft/nebula-metad version : v3.6.0 //\u5c06\u503c\u4ece 3.5.0 \u4fee\u6539\u81f3 v3.6.0\u3002 dataVolumeClaim : resources : requests : storage : 2Gi storageClassName : fast-disks logVolumeClaim : resources : requests : storage : 2Gi storageClassName : fast-disks storaged : resources : requests : cpu : \"500m\" memory : \"500Mi\" limits : cpu : \"1\" memory : \"1Gi\" replicas : 3 image : vesoft/nebula-storaged version : v3.6.0 //\u5c06\u503c\u4ece 3.5.0 \u4fee\u6539\u81f3 v3.6.0\u3002 dataVolumeClaims : - resources : requests : storage : 2Gi storageClassName : fast-disks - resources : requests : storage : 2Gi storageClassName : fast-disks logVolumeClaim : resources : requests : storage : 2Gi storageClassName : fast-disks reference : name : statefulsets.apps version : v1 schedulerName : default-scheduler imagePullPolicy : Always \u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\u5c06\u7248\u672c\u5347\u7ea7\u7684\u66f4\u65b0\u5e94\u7528\u4e8e\u96c6\u7fa4 CR \u4e2d\u3002 kubectl apply -f apps_v1alpha1_nebulacluster.yaml \u7b49\u5f85\u7ea6 2 \u5206\u949f\u540e\uff0c\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\u53ef\u67e5\u770b\u5230\u670d\u52a1\u7684\u955c\u50cf\u7248\u672c\u53d8\u66f4\u4e3a v3.6.0\u3002 kubectl get pods -l app.kubernetes.io/cluster = nebula -o jsonpath = \"{.items[*].spec.containers[*].image}\" | tr -s '[[:space:]]' '\\n' | sort | uniq -c \u8fd4\u56de\uff1a 1 vesoft/nebula-graphd:v3.6.0 1 vesoft/nebula-metad:v3.6.0 3 vesoft/nebula-storaged:v3.6.0 \u4f7f\u7528 Helm \u5347\u7ea7NebulaGraph\u96c6\u7fa4 \u00b6 \u524d\u63d0\u6761\u4ef6 \u00b6 \u5df2\u521b\u5efaNebulaGraph\u96c6\u7fa4\u3002\u5177\u4f53\u6b65\u9aa4\uff0c\u53c2\u89c1 \u4f7f\u7528 Helm \u521b\u5efaNebulaGraph\u96c6\u7fa4 \u3002 \u64cd\u4f5c\u6b65\u9aa4 \u00b6 \u66f4\u65b0 Helm \u4ed3\u5e93\uff0c\u62c9\u53d6\u6700\u65b0\u7684\u4ed3\u5e93\u8d44\u6e90\u3002 helm repo update \u914d\u7f6e Helm \u7684\u73af\u5883\u53d8\u91cf\u3002 export NEBULA_CLUSTER_NAME = nebula #NebulaGraph\u96c6\u7fa4\u7684\u540d\u5b57\u3002 export NEBULA_CLUSTER_NAMESPACE = nebula #NebulaGraph\u96c6\u7fa4\u6240\u5904\u7684\u547d\u540d\u7a7a\u95f4\u7684\u540d\u5b57\u3002 \u5347\u7ea7NebulaGraph\u96c6\u7fa4\u3002 \u4f8b\u5982\u5347\u7ea7\u81f3 v3.6.0NebulaGraph\u96c6\u7fa4\u7684\u547d\u4ee4\u5982\u4e0b\u3002 helm upgrade \" ${ NEBULA_CLUSTER_NAME } \" nebula-operator/nebula-cluster \\ --namespace = \" ${ NEBULA_CLUSTER_NAMESPACE } \" \\ --set nameOverride = ${ NEBULA_CLUSTER_NAME } \\ --set nebula.version = v3.6.0 --set nebula.version \u7684\u503c\u6307\u9700\u8981\u5347\u7ea7\u96c6\u7fa4\u7684\u76ee\u6807\u7248\u672c\u53f7\u3002 \u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\u67e5\u770b\u96c6\u7fa4\u72b6\u6001\u53ca\u96c6\u7fa4\u7248\u672c\u3002 \u67e5\u770b\u96c6\u7fa4\u72b6\u6001\uff1a $ kubectl -n \" ${ NEBULA_CLUSTER_NAMESPACE } \" get pod -l \"app.kubernetes.io/cluster= ${ NEBULA_CLUSTER_NAME } \" NAME READY STATUS RESTARTS AGE nebula-graphd-0 1 /1 Running 0 2m nebula-graphd-1 1 /1 Running 0 2m nebula-metad-0 1 /1 Running 0 2m nebula-metad-1 1 /1 Running 0 2m nebula-metad-2 1 /1 Running 0 2m nebula-storaged-0 1 /1 Running 0 2m nebula-storaged-1 1 /1 Running 0 2m nebula-storaged-2 1 /1 Running 0 2m \u67e5\u770b\u96c6\u7fa4\u7248\u672c\uff1a $ kubectl get pods -l app.kubernetes.io/cluster = nebula -o jsonpath = \"{.items[*].spec.containers[*].image}\" | tr -s '[[:space:]]' '\\n' | sort | uniq -c 1 vesoft/nebula-graphd:v3.6.0 1 vesoft/nebula-metad:v3.6.0 3 vesoft/nebula-storaged:v3.6.0 \u52a0\u901f\u5347\u7ea7\u8fc7\u7a0b \u00b6 \u96c6\u7fa4\u7684\u5347\u7ea7\u8fc7\u7a0b\u662f\u4e00\u4e2a\u6eda\u52a8\u66f4\u65b0\u7684\u8fc7\u7a0b\u4e5f\u662f\u8017\u65f6\u7684\u8fc7\u7a0b\uff0c\u56e0\u4e3a Storage \u670d\u52a1\u7684 Leader \u5206\u7247\u526f\u672c\u4f1a\u8fdb\u884c\u72b6\u6001\u8f6c\u79fb\u3002\u7528\u6237\u53ef\u5728\u96c6\u7fa4\u5b9e\u4f8b\u7684 YAML \u6587\u4ef6\u4e2d\u914d\u7f6e enableForceUpdate \u53c2\u6570\uff0c\u6765\u7565\u8fc7 Leader \u5206\u7247\u526f\u672c\u8f6c\u79fb\u64cd\u4f5c\uff0c\u4ee5\u8fbe\u5230\u52a0\u901f\u5347\u7ea7\u7684\u8fc7\u7a0b\u3002\u8be6\u60c5\u53c2\u89c1 \u914d\u7f6e\u6eda\u52a8\u66f4\u65b0\u7b56\u7565 \u3002","title":"\u5347\u7ea7 NebulaGraph"},{"location":"nebula-operator/9.upgrade-nebula-cluster/#nebulagraph","text":"\u672c\u6587\u4ecb\u7ecd\u5982\u4f55\u5347\u7ea7\u901a\u8fc7 NebulaGraph Operator \u521b\u5efa\u7684NebulaGraph\u96c6\u7fa4\u3002 \u5386\u53f2\u7248\u672c\u517c\u5bb9\u6027 1.x \u7248\u672c\u7684 NebulaGraph Operator \u4e0d\u517c\u5bb9 3.x \u4ee5\u4e0b\u7248\u672c\u7684 NebulaGraph\u3002","title":"\u5347\u7ea7NebulaGraph\u96c6\u7fa4"},{"location":"nebula-operator/9.upgrade-nebula-cluster/#_1","text":"\u53ea\u652f\u6301\u5347\u7ea7\u4f7f\u7528 NebulaGraph Operator \u521b\u5efa\u7684NebulaGraph\u96c6\u7fa4\u3002 \u53ea\u652f\u6301\u5347\u7ea7 NebulaGraph 3.5.0 \u81f3 3.6.0 \u7248\u672c\u3002","title":"\u4f7f\u7528\u9650\u5236"},{"location":"nebula-operator/9.upgrade-nebula-cluster/#kubectl_nebulagraph","text":"","title":"\u4f7f\u7528 Kubectl \u5347\u7ea7NebulaGraph\u96c6\u7fa4"},{"location":"nebula-operator/9.upgrade-nebula-cluster/#_2","text":"\u5df2\u521b\u5efaNebulaGraph\u96c6\u7fa4\u3002\u5177\u4f53\u6b65\u9aa4\uff0c\u53c2\u89c1 \u4f7f\u7528 Kubectl \u521b\u5efaNebulaGraph\u96c6\u7fa4 \u3002 \u672c\u6587\u793a\u4f8b\u4e2d\u5f85\u5347\u7ea7\u7684NebulaGraph\u7248\u672c\u4e3a 3.5.0\uff0c\u5176 YAML \u6587\u4ef6\u540d\u4e3a apps_v1alpha1_nebulacluster.yaml \u3002","title":"\u524d\u63d0\u6761\u4ef6"},{"location":"nebula-operator/9.upgrade-nebula-cluster/#_3","text":"\u67e5\u770b\u96c6\u7fa4\u4e2d\u670d\u52a1\u7684\u955c\u50cf\u7248\u672c\u3002 kubectl get pods -l app.kubernetes.io/cluster = nebula -o jsonpath = \"{.items[*].spec.containers[*].image}\" | tr -s '[[:space:]]' '\\n' | sort | uniq -c \u8fd4\u56de\uff1a 1 vesoft/nebula-graphd:v3.5.0 1 vesoft/nebula-metad:v3.5.0 3 vesoft/nebula-storaged:v3.5.0 \u7f16\u8f91 apps_v1alpha1_nebulacluster.yaml \u5e76\u5c06\u6240\u6709 version \u7684\u503c\u4ece 3.5.0 \u4fee\u6539\u81f3 v3.6.0\u3002 \u4fee\u6539\u540e\u7684 YAML \u6587\u4ef6\u5185\u5bb9\u5982\u4e0b\uff1a apiVersion : apps.nebula-graph.io/v1alpha1 kind : NebulaCluster metadata : name : nebula spec : graphd : resources : requests : cpu : \"500m\" memory : \"500Mi\" limits : cpu : \"1\" memory : \"1Gi\" replicas : 1 image : vesoft/nebula-graphd version : v3.6.0 //\u5c06\u503c\u4ece 3.5.0 \u4fee\u6539\u81f3 v3.6.0\u3002 service : type : NodePort externalTrafficPolicy : Local logVolumeClaim : resources : requests : storage : 2Gi storageClassName : fast-disks metad : resources : requests : cpu : \"500m\" memory : \"500Mi\" limits : cpu : \"1\" memory : \"1Gi\" replicas : 1 image : vesoft/nebula-metad version : v3.6.0 //\u5c06\u503c\u4ece 3.5.0 \u4fee\u6539\u81f3 v3.6.0\u3002 dataVolumeClaim : resources : requests : storage : 2Gi storageClassName : fast-disks logVolumeClaim : resources : requests : storage : 2Gi storageClassName : fast-disks storaged : resources : requests : cpu : \"500m\" memory : \"500Mi\" limits : cpu : \"1\" memory : \"1Gi\" replicas : 3 image : vesoft/nebula-storaged version : v3.6.0 //\u5c06\u503c\u4ece 3.5.0 \u4fee\u6539\u81f3 v3.6.0\u3002 dataVolumeClaims : - resources : requests : storage : 2Gi storageClassName : fast-disks - resources : requests : storage : 2Gi storageClassName : fast-disks logVolumeClaim : resources : requests : storage : 2Gi storageClassName : fast-disks reference : name : statefulsets.apps version : v1 schedulerName : default-scheduler imagePullPolicy : Always \u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\u5c06\u7248\u672c\u5347\u7ea7\u7684\u66f4\u65b0\u5e94\u7528\u4e8e\u96c6\u7fa4 CR \u4e2d\u3002 kubectl apply -f apps_v1alpha1_nebulacluster.yaml \u7b49\u5f85\u7ea6 2 \u5206\u949f\u540e\uff0c\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\u53ef\u67e5\u770b\u5230\u670d\u52a1\u7684\u955c\u50cf\u7248\u672c\u53d8\u66f4\u4e3a v3.6.0\u3002 kubectl get pods -l app.kubernetes.io/cluster = nebula -o jsonpath = \"{.items[*].spec.containers[*].image}\" | tr -s '[[:space:]]' '\\n' | sort | uniq -c \u8fd4\u56de\uff1a 1 vesoft/nebula-graphd:v3.6.0 1 vesoft/nebula-metad:v3.6.0 3 vesoft/nebula-storaged:v3.6.0","title":"\u64cd\u4f5c\u6b65\u9aa4"},{"location":"nebula-operator/9.upgrade-nebula-cluster/#helm_nebulagraph","text":"","title":"\u4f7f\u7528 Helm \u5347\u7ea7NebulaGraph\u96c6\u7fa4"},{"location":"nebula-operator/9.upgrade-nebula-cluster/#_4","text":"\u5df2\u521b\u5efaNebulaGraph\u96c6\u7fa4\u3002\u5177\u4f53\u6b65\u9aa4\uff0c\u53c2\u89c1 \u4f7f\u7528 Helm \u521b\u5efaNebulaGraph\u96c6\u7fa4 \u3002","title":"\u524d\u63d0\u6761\u4ef6"},{"location":"nebula-operator/9.upgrade-nebula-cluster/#_5","text":"\u66f4\u65b0 Helm \u4ed3\u5e93\uff0c\u62c9\u53d6\u6700\u65b0\u7684\u4ed3\u5e93\u8d44\u6e90\u3002 helm repo update \u914d\u7f6e Helm \u7684\u73af\u5883\u53d8\u91cf\u3002 export NEBULA_CLUSTER_NAME = nebula #NebulaGraph\u96c6\u7fa4\u7684\u540d\u5b57\u3002 export NEBULA_CLUSTER_NAMESPACE = nebula #NebulaGraph\u96c6\u7fa4\u6240\u5904\u7684\u547d\u540d\u7a7a\u95f4\u7684\u540d\u5b57\u3002 \u5347\u7ea7NebulaGraph\u96c6\u7fa4\u3002 \u4f8b\u5982\u5347\u7ea7\u81f3 v3.6.0NebulaGraph\u96c6\u7fa4\u7684\u547d\u4ee4\u5982\u4e0b\u3002 helm upgrade \" ${ NEBULA_CLUSTER_NAME } \" nebula-operator/nebula-cluster \\ --namespace = \" ${ NEBULA_CLUSTER_NAMESPACE } \" \\ --set nameOverride = ${ NEBULA_CLUSTER_NAME } \\ --set nebula.version = v3.6.0 --set nebula.version \u7684\u503c\u6307\u9700\u8981\u5347\u7ea7\u96c6\u7fa4\u7684\u76ee\u6807\u7248\u672c\u53f7\u3002 \u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\u67e5\u770b\u96c6\u7fa4\u72b6\u6001\u53ca\u96c6\u7fa4\u7248\u672c\u3002 \u67e5\u770b\u96c6\u7fa4\u72b6\u6001\uff1a $ kubectl -n \" ${ NEBULA_CLUSTER_NAMESPACE } \" get pod -l \"app.kubernetes.io/cluster= ${ NEBULA_CLUSTER_NAME } \" NAME READY STATUS RESTARTS AGE nebula-graphd-0 1 /1 Running 0 2m nebula-graphd-1 1 /1 Running 0 2m nebula-metad-0 1 /1 Running 0 2m nebula-metad-1 1 /1 Running 0 2m nebula-metad-2 1 /1 Running 0 2m nebula-storaged-0 1 /1 Running 0 2m nebula-storaged-1 1 /1 Running 0 2m nebula-storaged-2 1 /1 Running 0 2m \u67e5\u770b\u96c6\u7fa4\u7248\u672c\uff1a $ kubectl get pods -l app.kubernetes.io/cluster = nebula -o jsonpath = \"{.items[*].spec.containers[*].image}\" | tr -s '[[:space:]]' '\\n' | sort | uniq -c 1 vesoft/nebula-graphd:v3.6.0 1 vesoft/nebula-metad:v3.6.0 3 vesoft/nebula-storaged:v3.6.0","title":"\u64cd\u4f5c\u6b65\u9aa4"},{"location":"nebula-operator/9.upgrade-nebula-cluster/#_6","text":"\u96c6\u7fa4\u7684\u5347\u7ea7\u8fc7\u7a0b\u662f\u4e00\u4e2a\u6eda\u52a8\u66f4\u65b0\u7684\u8fc7\u7a0b\u4e5f\u662f\u8017\u65f6\u7684\u8fc7\u7a0b\uff0c\u56e0\u4e3a Storage \u670d\u52a1\u7684 Leader \u5206\u7247\u526f\u672c\u4f1a\u8fdb\u884c\u72b6\u6001\u8f6c\u79fb\u3002\u7528\u6237\u53ef\u5728\u96c6\u7fa4\u5b9e\u4f8b\u7684 YAML \u6587\u4ef6\u4e2d\u914d\u7f6e enableForceUpdate \u53c2\u6570\uff0c\u6765\u7565\u8fc7 Leader \u5206\u7247\u526f\u672c\u8f6c\u79fb\u64cd\u4f5c\uff0c\u4ee5\u8fbe\u5230\u52a0\u901f\u5347\u7ea7\u7684\u8fc7\u7a0b\u3002\u8be6\u60c5\u53c2\u89c1 \u914d\u7f6e\u6eda\u52a8\u66f4\u65b0\u7b56\u7565 \u3002","title":"\u52a0\u901f\u5347\u7ea7\u8fc7\u7a0b"},{"location":"nebula-operator/3.deploy-nebula-graph-cluster/3.1create-cluster-with-kubectl/","text":"\u4f7f\u7528 Kubectl \u90e8\u7f72NebulaGraph\u96c6\u7fa4 \u00b6 \u5386\u53f2\u7248\u672c\u517c\u5bb9\u6027 1.x \u7248\u672c\u7684 NebulaGraph Operator \u4e0d\u517c\u5bb9 3.x \u4ee5\u4e0b\u7248\u672c\u7684NebulaGraph\u3002 \u524d\u63d0\u6761\u4ef6 \u00b6 \u5b89\u88c5 NebulaGraph Operator \u5df2\u521b\u5efa StorageClass \u521b\u5efa\u96c6\u7fa4 \u00b6 \u672c\u6587\u4ee5\u521b\u5efa\u540d\u4e3a nebula \u7684\u96c6\u7fa4\u4e3a\u4f8b\uff0c\u8bf4\u660e\u5982\u4f55\u90e8\u7f72NebulaGraph\u96c6\u7fa4\u3002 \u521b\u5efa\u547d\u540d\u7a7a\u95f4\uff0c\u4f8b\u5982 nebula \u3002\u5982\u679c\u4e0d\u6307\u5b9a\u547d\u540d\u7a7a\u95f4\uff0c\u9ed8\u8ba4\u4f7f\u7528 default \u547d\u540d\u7a7a\u95f4\u3002 kubectl create namespace nebula \u521b\u5efa\u96c6\u7fa4\u914d\u7f6e\u6587\u4ef6\u3002 \u521b\u5efa\u540d\u4e3a apps_v1alpha1_nebulacluster.yaml \u7684\u6587\u4ef6\u3002\u6587\u4ef6\u5185\u5bb9\u53c2\u89c1 \u793a\u4f8b\u914d\u7f6e \u3002 \u793a\u4f8b\u914d\u7f6e\u7684\u53c2\u6570\u63cf\u8ff0\u5982\u4e0b\uff1a \u53c2\u6570 \u9ed8\u8ba4\u503c \u63cf\u8ff0 metadata.name - \u521b\u5efa\u7684NebulaGraph\u96c6\u7fa4\u540d\u79f0\u3002 spec.console - \u542f\u52a8 Console \u5bb9\u5668\u7528\u4e8e\u8fde\u63a5 Graph \u670d\u52a1\u3002\u914d\u7f6e\u8be6\u60c5\uff0c\u53c2\u89c1 nebula-console . spec.graphd.replicas 1 Graphd \u670d\u52a1\u7684\u526f\u672c\u6570\u3002 spec.graphd.image vesoft/nebula-graphd Graphd \u670d\u52a1\u7684\u5bb9\u5668\u955c\u50cf\u3002 spec.graphd.version v3.6.0 Graphd \u670d\u52a1\u7684\u7248\u672c\u53f7\u3002 spec.graphd.service \u8bbf\u95ee Graphd \u670d\u52a1\u7684 Service \u914d\u7f6e\u3002 spec.graphd.logVolumeClaim.storageClassName - Graphd \u670d\u52a1\u7684\u65e5\u5fd7\u76d8\u5b58\u50a8\u5377\u7684\u5b58\u50a8\u7c7b\u540d\u79f0\u3002\u4f7f\u7528\u793a\u4f8b\u914d\u7f6e\u65f6\u9700\u8981\u5c06\u5176\u66ff\u6362\u4e3a\u4e8b\u5148\u521b\u5efa\u7684\u5b58\u50a8\u7c7b\u540d\u79f0\uff0c\u53c2\u89c1 Storage Classes \u67e5\u770b\u521b\u5efa\u5b58\u50a8\u7c7b\u8be6\u60c5\u3002 spec.metad.replicas 1 Metad \u670d\u52a1\u7684\u526f\u672c\u6570\u3002 spec.metad.image vesoft/nebula-metad Metad \u670d\u52a1\u7684\u5bb9\u5668\u955c\u50cf\u3002 spec.metad.version v3.6.0 Metad \u670d\u52a1\u7684\u7248\u672c\u53f7\u3002 spec.metad.dataVolumeClaim.storageClassName - Metad \u670d\u52a1\u7684\u6570\u636e\u76d8\u5b58\u50a8\u914d\u7f6e\u3002\u4f7f\u7528\u793a\u4f8b\u914d\u7f6e\u65f6\u9700\u8981\u5c06\u5176\u66ff\u6362\u4e3a\u4e8b\u5148\u521b\u5efa\u7684\u5b58\u50a8\u7c7b\u540d\u79f0\uff0c\u53c2\u89c1 Storage Classes \u67e5\u770b\u521b\u5efa\u5b58\u50a8\u7c7b\u8be6\u60c5\u3002 spec.metad.logVolumeClaim.storageClassName - Metad \u670d\u52a1\u7684\u65e5\u5fd7\u76d8\u5b58\u50a8\u914d\u7f6e\u3002\u4f7f\u7528\u793a\u4f8b\u914d\u7f6e\u65f6\u9700\u8981\u5c06\u5176\u66ff\u6362\u4e3a\u4e8b\u5148\u521b\u5efa\u7684\u5b58\u50a8\u7c7b\u540d\u79f0\uff0c\u53c2\u89c1 Storage Classes \u67e5\u770b\u521b\u5efa\u5b58\u50a8\u7c7b\u8be6\u60c5\u3002 spec.storaged.replicas 3 Storaged \u670d\u52a1\u7684\u526f\u672c\u6570\u3002 spec.storaged.image vesoft/nebula-storaged Storaged \u670d\u52a1\u7684\u5bb9\u5668\u955c\u50cf\u3002 spec.storaged.version v3.6.0 Storaged \u670d\u52a1\u7684\u7248\u672c\u53f7\u3002 spec.storaged.dataVolumeClaims.resources.requests.storage - Storaged \u670d\u52a1\u7684\u6570\u636e\u76d8\u5b58\u50a8\u5927\u5c0f\uff0c\u53ef\u6307\u5b9a\u591a\u5757\u6570\u636e\u76d8\u5b58\u50a8\u6570\u636e\u3002\u5f53\u6307\u5b9a\u591a\u5757\u6570\u636e\u76d8\u65f6\uff0c\u8def\u5f84\u4e3a\uff1a /usr/local/nebula/data1 \u3001 /usr/local/nebula/data2 \u7b49\u3002 spec.storaged.dataVolumeClaims.resources.storageClassName - Storaged \u670d\u52a1\u7684\u6570\u636e\u76d8\u5b58\u50a8\u914d\u7f6e\u3002\u4f7f\u7528\u793a\u4f8b\u914d\u7f6e\u65f6\u9700\u8981\u5c06\u5176\u66ff\u6362\u4e3a\u4e8b\u5148\u521b\u5efa\u7684\u5b58\u50a8\u7c7b\u540d\u79f0\uff0c\u53c2\u89c1 Storage Classes \u67e5\u770b\u521b\u5efa\u5b58\u50a8\u7c7b\u8be6\u60c5\u3002 spec.storaged.logVolumeClaim.storageClassName - Storaged \u670d\u52a1\u7684\u65e5\u5fd7\u76d8\u5b58\u50a8\u914d\u7f6e\u3002\u4f7f\u7528\u793a\u4f8b\u914d\u7f6e\u65f6\u9700\u8981\u5c06\u5176\u66ff\u6362\u4e3a\u4e8b\u5148\u521b\u5efa\u7684\u5b58\u50a8\u7c7b\u540d\u79f0\uff0c\u53c2\u89c1 Storage Classes \u67e5\u770b\u521b\u5efa\u5b58\u50a8\u7c7b\u8be6\u60c5\u3002 spec.<metad|storaged|graphd>.securityContext {} \u5b9a\u4e49\u96c6\u7fa4\u5bb9\u5668\u7684\u6743\u9650\u548c\u8bbf\u95ee\u63a7\u5236\uff0c\u4ee5\u63a7\u5236\u8bbf\u95ee\u548c\u6267\u884c\u5bb9\u5668\u7684\u64cd\u4f5c\u3002\u8be6\u60c5\u53c2\u89c1 SecurityContext \u3002 spec.agent {} Agent \u670d\u52a1\u7684\u914d\u7f6e\u3002\u7528\u4e8e\u5907\u4efd\u548c\u6062\u590d\u53ca\u65e5\u5fd7\u6e05\u7406\u529f\u80fd\uff0c\u5982\u679c\u4e0d\u81ea\u5b9a\u4e49\u8be5\u914d\u7f6e\uff0c\u5c06\u4f7f\u7528\u9ed8\u8ba4\u914d\u7f6e\u3002 spec.reference.name - \u4f9d\u8d56\u7684\u63a7\u5236\u5668\u540d\u79f0\u3002 spec.schedulerName - \u8c03\u5ea6\u5668\u540d\u79f0\u3002 spec.imagePullPolicy NebulaGraph\u955c\u50cf\u7684\u62c9\u53d6\u7b56\u7565\u3002\u5173\u4e8e\u62c9\u53d6\u7b56\u7565\u8be6\u60c5\uff0c\u8bf7\u53c2\u8003 Image pull policy \u3002 \u955c\u50cf\u62c9\u53d6\u7b56\u7565\u3002 spec.logRotate - \u65e5\u5fd7\u8f6e\u8f6c\u914d\u7f6e\u3002\u8be6\u60c5\u53c2\u89c1 \u7ba1\u7406\u96c6\u7fa4\u65e5\u5fd7 \u3002 spec.enablePVReclaim false \u5b9a\u4e49\u662f\u5426\u5728\u5220\u9664\u96c6\u7fa4\u540e\u81ea\u52a8\u5220\u9664 PVC \u4ee5\u91ca\u653e\u6570\u636e\u3002\u8be6\u60c5\u53c2\u89c1 \u56de\u6536 PV \u3002 \u521b\u5efaNebulaGraph\u96c6\u7fa4\u3002 kubectl create -f apps_v1alpha1_nebulacluster.yaml \u8fd4\u56de\uff1a nebulacluster.apps.nebula-graph.io/nebula created \u67e5\u770bNebulaGraph\u96c6\u7fa4\u72b6\u6001\u3002 kubectl get nebulaclusters nebula \u8fd4\u56de\uff1a NAME GRAPHD-DESIRED GRAPHD-READY METAD-DESIRED METAD-READY STORAGED-DESIRED STORAGED-READY AGE nebula 1 1 1 1 3 3 86s \u6269\u7f29\u5bb9\u96c6\u7fa4 \u00b6 \u4e0d\u652f\u6301\u6269\u7f29\u5bb9\u793e\u533a\u7248\u7684NebulaGraph\u96c6\u7fa4\u3002 \u5220\u9664\u96c6\u7fa4 \u00b6 \u4f7f\u7528 Kubectl \u5220\u9664NebulaGraph\u96c6\u7fa4\u7684\u547d\u4ee4\u5982\u4e0b\uff1a kubectl delete -f apps_v1alpha1_nebulacluster.yaml \u540e\u7eed\u64cd\u4f5c \u00b6 \u8fde\u63a5NebulaGraph\u6570\u636e\u5e93","title":"\u4f7f\u7528 Kubectl \u90e8\u7f72 NebulaGraph \u96c6\u7fa4"},{"location":"nebula-operator/3.deploy-nebula-graph-cluster/3.1create-cluster-with-kubectl/#kubectl_nebulagraph","text":"\u5386\u53f2\u7248\u672c\u517c\u5bb9\u6027 1.x \u7248\u672c\u7684 NebulaGraph Operator \u4e0d\u517c\u5bb9 3.x \u4ee5\u4e0b\u7248\u672c\u7684NebulaGraph\u3002","title":"\u4f7f\u7528 Kubectl \u90e8\u7f72NebulaGraph\u96c6\u7fa4"},{"location":"nebula-operator/3.deploy-nebula-graph-cluster/3.1create-cluster-with-kubectl/#_1","text":"\u5b89\u88c5 NebulaGraph Operator \u5df2\u521b\u5efa StorageClass","title":"\u524d\u63d0\u6761\u4ef6"},{"location":"nebula-operator/3.deploy-nebula-graph-cluster/3.1create-cluster-with-kubectl/#_2","text":"\u672c\u6587\u4ee5\u521b\u5efa\u540d\u4e3a nebula \u7684\u96c6\u7fa4\u4e3a\u4f8b\uff0c\u8bf4\u660e\u5982\u4f55\u90e8\u7f72NebulaGraph\u96c6\u7fa4\u3002 \u521b\u5efa\u547d\u540d\u7a7a\u95f4\uff0c\u4f8b\u5982 nebula \u3002\u5982\u679c\u4e0d\u6307\u5b9a\u547d\u540d\u7a7a\u95f4\uff0c\u9ed8\u8ba4\u4f7f\u7528 default \u547d\u540d\u7a7a\u95f4\u3002 kubectl create namespace nebula \u521b\u5efa\u96c6\u7fa4\u914d\u7f6e\u6587\u4ef6\u3002 \u521b\u5efa\u540d\u4e3a apps_v1alpha1_nebulacluster.yaml \u7684\u6587\u4ef6\u3002\u6587\u4ef6\u5185\u5bb9\u53c2\u89c1 \u793a\u4f8b\u914d\u7f6e \u3002 \u793a\u4f8b\u914d\u7f6e\u7684\u53c2\u6570\u63cf\u8ff0\u5982\u4e0b\uff1a \u53c2\u6570 \u9ed8\u8ba4\u503c \u63cf\u8ff0 metadata.name - \u521b\u5efa\u7684NebulaGraph\u96c6\u7fa4\u540d\u79f0\u3002 spec.console - \u542f\u52a8 Console \u5bb9\u5668\u7528\u4e8e\u8fde\u63a5 Graph \u670d\u52a1\u3002\u914d\u7f6e\u8be6\u60c5\uff0c\u53c2\u89c1 nebula-console . spec.graphd.replicas 1 Graphd \u670d\u52a1\u7684\u526f\u672c\u6570\u3002 spec.graphd.image vesoft/nebula-graphd Graphd \u670d\u52a1\u7684\u5bb9\u5668\u955c\u50cf\u3002 spec.graphd.version v3.6.0 Graphd \u670d\u52a1\u7684\u7248\u672c\u53f7\u3002 spec.graphd.service \u8bbf\u95ee Graphd \u670d\u52a1\u7684 Service \u914d\u7f6e\u3002 spec.graphd.logVolumeClaim.storageClassName - Graphd \u670d\u52a1\u7684\u65e5\u5fd7\u76d8\u5b58\u50a8\u5377\u7684\u5b58\u50a8\u7c7b\u540d\u79f0\u3002\u4f7f\u7528\u793a\u4f8b\u914d\u7f6e\u65f6\u9700\u8981\u5c06\u5176\u66ff\u6362\u4e3a\u4e8b\u5148\u521b\u5efa\u7684\u5b58\u50a8\u7c7b\u540d\u79f0\uff0c\u53c2\u89c1 Storage Classes \u67e5\u770b\u521b\u5efa\u5b58\u50a8\u7c7b\u8be6\u60c5\u3002 spec.metad.replicas 1 Metad \u670d\u52a1\u7684\u526f\u672c\u6570\u3002 spec.metad.image vesoft/nebula-metad Metad \u670d\u52a1\u7684\u5bb9\u5668\u955c\u50cf\u3002 spec.metad.version v3.6.0 Metad \u670d\u52a1\u7684\u7248\u672c\u53f7\u3002 spec.metad.dataVolumeClaim.storageClassName - Metad \u670d\u52a1\u7684\u6570\u636e\u76d8\u5b58\u50a8\u914d\u7f6e\u3002\u4f7f\u7528\u793a\u4f8b\u914d\u7f6e\u65f6\u9700\u8981\u5c06\u5176\u66ff\u6362\u4e3a\u4e8b\u5148\u521b\u5efa\u7684\u5b58\u50a8\u7c7b\u540d\u79f0\uff0c\u53c2\u89c1 Storage Classes \u67e5\u770b\u521b\u5efa\u5b58\u50a8\u7c7b\u8be6\u60c5\u3002 spec.metad.logVolumeClaim.storageClassName - Metad \u670d\u52a1\u7684\u65e5\u5fd7\u76d8\u5b58\u50a8\u914d\u7f6e\u3002\u4f7f\u7528\u793a\u4f8b\u914d\u7f6e\u65f6\u9700\u8981\u5c06\u5176\u66ff\u6362\u4e3a\u4e8b\u5148\u521b\u5efa\u7684\u5b58\u50a8\u7c7b\u540d\u79f0\uff0c\u53c2\u89c1 Storage Classes \u67e5\u770b\u521b\u5efa\u5b58\u50a8\u7c7b\u8be6\u60c5\u3002 spec.storaged.replicas 3 Storaged \u670d\u52a1\u7684\u526f\u672c\u6570\u3002 spec.storaged.image vesoft/nebula-storaged Storaged \u670d\u52a1\u7684\u5bb9\u5668\u955c\u50cf\u3002 spec.storaged.version v3.6.0 Storaged \u670d\u52a1\u7684\u7248\u672c\u53f7\u3002 spec.storaged.dataVolumeClaims.resources.requests.storage - Storaged \u670d\u52a1\u7684\u6570\u636e\u76d8\u5b58\u50a8\u5927\u5c0f\uff0c\u53ef\u6307\u5b9a\u591a\u5757\u6570\u636e\u76d8\u5b58\u50a8\u6570\u636e\u3002\u5f53\u6307\u5b9a\u591a\u5757\u6570\u636e\u76d8\u65f6\uff0c\u8def\u5f84\u4e3a\uff1a /usr/local/nebula/data1 \u3001 /usr/local/nebula/data2 \u7b49\u3002 spec.storaged.dataVolumeClaims.resources.storageClassName - Storaged \u670d\u52a1\u7684\u6570\u636e\u76d8\u5b58\u50a8\u914d\u7f6e\u3002\u4f7f\u7528\u793a\u4f8b\u914d\u7f6e\u65f6\u9700\u8981\u5c06\u5176\u66ff\u6362\u4e3a\u4e8b\u5148\u521b\u5efa\u7684\u5b58\u50a8\u7c7b\u540d\u79f0\uff0c\u53c2\u89c1 Storage Classes \u67e5\u770b\u521b\u5efa\u5b58\u50a8\u7c7b\u8be6\u60c5\u3002 spec.storaged.logVolumeClaim.storageClassName - Storaged \u670d\u52a1\u7684\u65e5\u5fd7\u76d8\u5b58\u50a8\u914d\u7f6e\u3002\u4f7f\u7528\u793a\u4f8b\u914d\u7f6e\u65f6\u9700\u8981\u5c06\u5176\u66ff\u6362\u4e3a\u4e8b\u5148\u521b\u5efa\u7684\u5b58\u50a8\u7c7b\u540d\u79f0\uff0c\u53c2\u89c1 Storage Classes \u67e5\u770b\u521b\u5efa\u5b58\u50a8\u7c7b\u8be6\u60c5\u3002 spec.<metad|storaged|graphd>.securityContext {} \u5b9a\u4e49\u96c6\u7fa4\u5bb9\u5668\u7684\u6743\u9650\u548c\u8bbf\u95ee\u63a7\u5236\uff0c\u4ee5\u63a7\u5236\u8bbf\u95ee\u548c\u6267\u884c\u5bb9\u5668\u7684\u64cd\u4f5c\u3002\u8be6\u60c5\u53c2\u89c1 SecurityContext \u3002 spec.agent {} Agent \u670d\u52a1\u7684\u914d\u7f6e\u3002\u7528\u4e8e\u5907\u4efd\u548c\u6062\u590d\u53ca\u65e5\u5fd7\u6e05\u7406\u529f\u80fd\uff0c\u5982\u679c\u4e0d\u81ea\u5b9a\u4e49\u8be5\u914d\u7f6e\uff0c\u5c06\u4f7f\u7528\u9ed8\u8ba4\u914d\u7f6e\u3002 spec.reference.name - \u4f9d\u8d56\u7684\u63a7\u5236\u5668\u540d\u79f0\u3002 spec.schedulerName - \u8c03\u5ea6\u5668\u540d\u79f0\u3002 spec.imagePullPolicy NebulaGraph\u955c\u50cf\u7684\u62c9\u53d6\u7b56\u7565\u3002\u5173\u4e8e\u62c9\u53d6\u7b56\u7565\u8be6\u60c5\uff0c\u8bf7\u53c2\u8003 Image pull policy \u3002 \u955c\u50cf\u62c9\u53d6\u7b56\u7565\u3002 spec.logRotate - \u65e5\u5fd7\u8f6e\u8f6c\u914d\u7f6e\u3002\u8be6\u60c5\u53c2\u89c1 \u7ba1\u7406\u96c6\u7fa4\u65e5\u5fd7 \u3002 spec.enablePVReclaim false \u5b9a\u4e49\u662f\u5426\u5728\u5220\u9664\u96c6\u7fa4\u540e\u81ea\u52a8\u5220\u9664 PVC \u4ee5\u91ca\u653e\u6570\u636e\u3002\u8be6\u60c5\u53c2\u89c1 \u56de\u6536 PV \u3002 \u521b\u5efaNebulaGraph\u96c6\u7fa4\u3002 kubectl create -f apps_v1alpha1_nebulacluster.yaml \u8fd4\u56de\uff1a nebulacluster.apps.nebula-graph.io/nebula created \u67e5\u770bNebulaGraph\u96c6\u7fa4\u72b6\u6001\u3002 kubectl get nebulaclusters nebula \u8fd4\u56de\uff1a NAME GRAPHD-DESIRED GRAPHD-READY METAD-DESIRED METAD-READY STORAGED-DESIRED STORAGED-READY AGE nebula 1 1 1 1 3 3 86s","title":"\u521b\u5efa\u96c6\u7fa4"},{"location":"nebula-operator/3.deploy-nebula-graph-cluster/3.1create-cluster-with-kubectl/#_3","text":"\u4e0d\u652f\u6301\u6269\u7f29\u5bb9\u793e\u533a\u7248\u7684NebulaGraph\u96c6\u7fa4\u3002","title":"\u6269\u7f29\u5bb9\u96c6\u7fa4"},{"location":"nebula-operator/3.deploy-nebula-graph-cluster/3.1create-cluster-with-kubectl/#_4","text":"\u4f7f\u7528 Kubectl \u5220\u9664NebulaGraph\u96c6\u7fa4\u7684\u547d\u4ee4\u5982\u4e0b\uff1a kubectl delete -f apps_v1alpha1_nebulacluster.yaml","title":"\u5220\u9664\u96c6\u7fa4"},{"location":"nebula-operator/3.deploy-nebula-graph-cluster/3.1create-cluster-with-kubectl/#_5","text":"\u8fde\u63a5NebulaGraph\u6570\u636e\u5e93","title":"\u540e\u7eed\u64cd\u4f5c"},{"location":"nebula-operator/3.deploy-nebula-graph-cluster/3.2create-cluster-with-helm/","text":"\u4f7f\u7528 Helm \u90e8\u7f72NebulaGraph\u96c6\u7fa4 \u00b6 \u5386\u53f2\u7248\u672c\u517c\u5bb9\u6027 1.x \u7248\u672c\u7684 NebulaGraph Operator \u4e0d\u517c\u5bb9 3.x \u4ee5\u4e0b\u7248\u672c\u7684NebulaGraph\u3002 \u524d\u63d0\u6761\u4ef6 \u00b6 \u5b89\u88c5 NebulaGraph Operator \u5df2\u521b\u5efa StorageClass \u521b\u5efaNebulaGraph\u96c6\u7fa4 \u00b6 \u6dfb\u52a0 NebulaGraph Operator Helm \u4ed3\u5e93 helm repo add nebula-operator https://vesoft-inc.github.io/nebula-operator/charts \u66f4\u65b0 Helm \u4ed3\u5e93\uff0c\u62c9\u53d6\u6700\u65b0\u4ed3\u5e93\u8d44\u6e90\u3002 helm repo update \u4e3a\u5b89\u88c5\u96c6\u7fa4\u6240\u9700\u7684\u914d\u7f6e\u53c2\u6570\u8bbe\u7f6e\u73af\u5883\u53d8\u91cf\u3002 export NEBULA_CLUSTER_NAME = nebula #NebulaGraph\u96c6\u7fa4\u7684\u540d\u5b57\u3002 export NEBULA_CLUSTER_NAMESPACE = nebula #NebulaGraph\u96c6\u7fa4\u6240\u5904\u7684\u547d\u540d\u7a7a\u95f4\u7684\u540d\u5b57\u3002 export STORAGE_CLASS_NAME = fast-disks #NebulaGraph\u96c6\u7fa4\u7684 StorageClass\u3002 \u4e3aNebulaGraph\u96c6\u7fa4\u521b\u5efa\u547d\u540d\u7a7a\u95f4\uff08\u5982\u5df2\u521b\u5efa\uff0c\u7565\u8fc7\u6b64\u6b65\uff09\u3002 kubectl create namespace \" ${ NEBULA_CLUSTER_NAMESPACE } \" \u521b\u5efaNebulaGraph\u96c6\u7fa4\u3002 helm install \" ${ NEBULA_CLUSTER_NAME } \" nebula-operator/nebula-cluster \\ --set nameOverride = ${ NEBULA_CLUSTER_NAME } \\ --set nebula.storageClassName = \" ${ STORAGE_CLASS_NAME } \" \\ # \u6307\u5b9aNebulaGraph\u96c6\u7fa4\u7684\u7248\u672c\u3002 --set nebula.version = v3.6.0 \\ # \u6307\u5b9a\u96c6\u7fa4 chart \u7684\u7248\u672c\uff0c\u4e0d\u6307\u5b9a\u5219\u9ed8\u8ba4\u5b89\u88c5\u6700\u65b0\u7248\u672c chart\u3002 # \u6267\u884c helm search repo nebula-operator/nebula-cluster \u547d\u4ee4\u53ef\u67e5\u770b\u6240\u6709 chart \u7248\u672c\u3002 --version = 1 .5.0 \\ --namespace = \" ${ NEBULA_CLUSTER_NAMESPACE } \" \\ \u6267\u884c helm show values nebula-operator/nebula-cluster \u547d\u4ee4\uff0c\u6216\u8005\u5355\u51fb nebula-cluster/values.yaml \u53ef\u67e5\u770bNebulaGraph\u96c6\u7fa4\u7684\u6240\u6709\u914d\u7f6e\u53c2\u6570\u3002 \u5355\u51fb Chart parameters \u67e5\u770b\u53ef\u914d\u7f6e\u7684\u96c6\u7fa4\u53c2\u6570\u7684\u63cf\u8ff0\u53ca\u9ed8\u8ba4\u503c\u3002 \u901a\u8fc7 --set \u53c2\u6570\u8bbe\u7f6eNebulaGraph\u96c6\u7fa4\u7684\u914d\u7f6e\u53c2\u6570\uff0c\u4f8b\u5982\uff0c --set nebula.storaged.replicas=3 \u53ef\u8bbe\u7f6eNebulaGraph\u96c6\u7fa4\u4e2d Storage \u670d\u52a1\u7684\u526f\u672c\u6570\u4e3a 3\u3002 \u67e5\u770bNebulaGraph\u96c6\u7fa4\u521b\u5efa\u72b6\u6001\u3002 kubectl -n \" ${ NEBULA_CLUSTER_NAMESPACE } \" get pod -l \"app.kubernetes.io/cluster= ${ NEBULA_CLUSTER_NAME } \" \u6269\u7f29\u5bb9\u96c6\u7fa4 \u00b6 \u4e0d\u652f\u6301\u6269\u7f29\u5bb9\u793e\u533a\u7248\u7684NebulaGraph\u96c6\u7fa4\u3002 \u5220\u9664\u96c6\u7fa4 \u00b6 \u4f7f\u7528 Helm \u5220\u9664\u96c6\u7fa4\u7684\u547d\u4ee4\u5982\u4e0b\uff1a helm uninstall \" ${ NEBULA_CLUSTER_NAME } \" --namespace = \" ${ NEBULA_CLUSTER_NAMESPACE } \" \u6216\u8005\u4f7f\u7528\u771f\u5b9e\u503c\u5220\u9664\u96c6\u7fa4\uff0c\u4f8b\u5982\uff1a helm uninstall nebula --namespace = nebula \u540e\u7eed\u64cd\u4f5c \u00b6 \u8fde\u63a5NebulaGraph","title":"\u4f7f\u7528 Helm \u90e8\u7f72 NebulaGraph \u96c6\u7fa4"},{"location":"nebula-operator/3.deploy-nebula-graph-cluster/3.2create-cluster-with-helm/#helm_nebulagraph","text":"\u5386\u53f2\u7248\u672c\u517c\u5bb9\u6027 1.x \u7248\u672c\u7684 NebulaGraph Operator \u4e0d\u517c\u5bb9 3.x \u4ee5\u4e0b\u7248\u672c\u7684NebulaGraph\u3002","title":"\u4f7f\u7528 Helm \u90e8\u7f72NebulaGraph\u96c6\u7fa4"},{"location":"nebula-operator/3.deploy-nebula-graph-cluster/3.2create-cluster-with-helm/#_1","text":"\u5b89\u88c5 NebulaGraph Operator \u5df2\u521b\u5efa StorageClass","title":"\u524d\u63d0\u6761\u4ef6"},{"location":"nebula-operator/3.deploy-nebula-graph-cluster/3.2create-cluster-with-helm/#nebulagraph","text":"\u6dfb\u52a0 NebulaGraph Operator Helm \u4ed3\u5e93 helm repo add nebula-operator https://vesoft-inc.github.io/nebula-operator/charts \u66f4\u65b0 Helm \u4ed3\u5e93\uff0c\u62c9\u53d6\u6700\u65b0\u4ed3\u5e93\u8d44\u6e90\u3002 helm repo update \u4e3a\u5b89\u88c5\u96c6\u7fa4\u6240\u9700\u7684\u914d\u7f6e\u53c2\u6570\u8bbe\u7f6e\u73af\u5883\u53d8\u91cf\u3002 export NEBULA_CLUSTER_NAME = nebula #NebulaGraph\u96c6\u7fa4\u7684\u540d\u5b57\u3002 export NEBULA_CLUSTER_NAMESPACE = nebula #NebulaGraph\u96c6\u7fa4\u6240\u5904\u7684\u547d\u540d\u7a7a\u95f4\u7684\u540d\u5b57\u3002 export STORAGE_CLASS_NAME = fast-disks #NebulaGraph\u96c6\u7fa4\u7684 StorageClass\u3002 \u4e3aNebulaGraph\u96c6\u7fa4\u521b\u5efa\u547d\u540d\u7a7a\u95f4\uff08\u5982\u5df2\u521b\u5efa\uff0c\u7565\u8fc7\u6b64\u6b65\uff09\u3002 kubectl create namespace \" ${ NEBULA_CLUSTER_NAMESPACE } \" \u521b\u5efaNebulaGraph\u96c6\u7fa4\u3002 helm install \" ${ NEBULA_CLUSTER_NAME } \" nebula-operator/nebula-cluster \\ --set nameOverride = ${ NEBULA_CLUSTER_NAME } \\ --set nebula.storageClassName = \" ${ STORAGE_CLASS_NAME } \" \\ # \u6307\u5b9aNebulaGraph\u96c6\u7fa4\u7684\u7248\u672c\u3002 --set nebula.version = v3.6.0 \\ # \u6307\u5b9a\u96c6\u7fa4 chart \u7684\u7248\u672c\uff0c\u4e0d\u6307\u5b9a\u5219\u9ed8\u8ba4\u5b89\u88c5\u6700\u65b0\u7248\u672c chart\u3002 # \u6267\u884c helm search repo nebula-operator/nebula-cluster \u547d\u4ee4\u53ef\u67e5\u770b\u6240\u6709 chart \u7248\u672c\u3002 --version = 1 .5.0 \\ --namespace = \" ${ NEBULA_CLUSTER_NAMESPACE } \" \\ \u6267\u884c helm show values nebula-operator/nebula-cluster \u547d\u4ee4\uff0c\u6216\u8005\u5355\u51fb nebula-cluster/values.yaml \u53ef\u67e5\u770bNebulaGraph\u96c6\u7fa4\u7684\u6240\u6709\u914d\u7f6e\u53c2\u6570\u3002 \u5355\u51fb Chart parameters \u67e5\u770b\u53ef\u914d\u7f6e\u7684\u96c6\u7fa4\u53c2\u6570\u7684\u63cf\u8ff0\u53ca\u9ed8\u8ba4\u503c\u3002 \u901a\u8fc7 --set \u53c2\u6570\u8bbe\u7f6eNebulaGraph\u96c6\u7fa4\u7684\u914d\u7f6e\u53c2\u6570\uff0c\u4f8b\u5982\uff0c --set nebula.storaged.replicas=3 \u53ef\u8bbe\u7f6eNebulaGraph\u96c6\u7fa4\u4e2d Storage \u670d\u52a1\u7684\u526f\u672c\u6570\u4e3a 3\u3002 \u67e5\u770bNebulaGraph\u96c6\u7fa4\u521b\u5efa\u72b6\u6001\u3002 kubectl -n \" ${ NEBULA_CLUSTER_NAMESPACE } \" get pod -l \"app.kubernetes.io/cluster= ${ NEBULA_CLUSTER_NAME } \"","title":"\u521b\u5efaNebulaGraph\u96c6\u7fa4"},{"location":"nebula-operator/3.deploy-nebula-graph-cluster/3.2create-cluster-with-helm/#_2","text":"\u4e0d\u652f\u6301\u6269\u7f29\u5bb9\u793e\u533a\u7248\u7684NebulaGraph\u96c6\u7fa4\u3002","title":"\u6269\u7f29\u5bb9\u96c6\u7fa4"},{"location":"nebula-operator/3.deploy-nebula-graph-cluster/3.2create-cluster-with-helm/#_3","text":"\u4f7f\u7528 Helm \u5220\u9664\u96c6\u7fa4\u7684\u547d\u4ee4\u5982\u4e0b\uff1a helm uninstall \" ${ NEBULA_CLUSTER_NAME } \" --namespace = \" ${ NEBULA_CLUSTER_NAMESPACE } \" \u6216\u8005\u4f7f\u7528\u771f\u5b9e\u503c\u5220\u9664\u96c6\u7fa4\uff0c\u4f8b\u5982\uff1a helm uninstall nebula --namespace = nebula","title":"\u5220\u9664\u96c6\u7fa4"},{"location":"nebula-operator/3.deploy-nebula-graph-cluster/3.2create-cluster-with-helm/#_4","text":"\u8fde\u63a5NebulaGraph","title":"\u540e\u7eed\u64cd\u4f5c"},{"location":"nebula-operator/8.custom-cluster-configurations/8.1.custom-conf-parameter/","text":"\u81ea\u5b9a\u4e49NebulaGraph\u96c6\u7fa4\u7684\u914d\u7f6e\u53c2\u6570 \u00b6 NebulaGraph\u96c6\u7fa4\u4e2d Meta\u3001Storage\u3001Graph \u670d\u52a1\u90fd\u6709\u5404\u81ea\u7684\u914d\u7f6e\uff0c\u5176\u5728\u7528\u6237\u521b\u5efa\u7684NebulaGraph\u96c6\u7fa4\u5b9e\u4f8b\u7684 YAML \u6587\u4ef6\u4e2d\u88ab\u5b9a\u4e49\u4e3a config \u3002 config \u4e2d\u7684\u8bbe\u7f6e\u4f1a\u88ab\u6620\u5c04\u5e76\u52a0\u8f7d\u5230\u5bf9\u5e94\u670d\u52a1\u7684 ConfigMap \u4e2d\u3002\u5404\u4e2a\u670d\u52a1\u5728\u542f\u52a8\u65f6\u4f1a\u6302\u8f7d ConfigMap \u4e2d\u7684\u914d\u7f6e\u5230 /usr/local/nebula/etc/ \u76ee\u5f55\u4e0b\u3002 Note \u6682\u4e0d\u652f\u6301\u901a\u8fc7 Helm \u81ea\u5b9a\u4e49NebulaGraph\u96c6\u7fa4\u7684\u914d\u7f6e\u53c2\u6570\u3002 config \u7ed3\u6784\u5982\u4e0b\uff1a Config map [ string ] string `json:\"config,omitempty\"` \u524d\u63d0\u6761\u4ef6 \u00b6 \u5df2\u4f7f\u7528 K8s \u521b\u5efa\u4e00\u4e2a\u96c6\u7fa4\u3002\u5177\u4f53\u6b65\u9aa4\uff0c\u53c2\u89c1 \u4f7f\u7528 Kubectl \u521b\u5efaNebulaGraph\u96c6\u7fa4 \u3002 \u64cd\u4f5c\u6b65\u9aa4 \u00b6 \u4ee5\u4e0b\u793a\u4f8b\u4f7f\u7528\u540d\u4e3a nebula \u7684\u96c6\u7fa4\u3001\u540d\u4e3a nebula_cluster.yaml \u7684 YAML \u914d\u7f6e\u6587\u4ef6\uff0c\u8bf4\u660e\u5982\u4f55\u4e3a\u96c6\u7fa4\u7684 Graph \u670d\u52a1\u914d\u7f6e config \uff1a \u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\u8fdb\u5165 nebula \u96c6\u7fa4\u7684\u7f16\u8f91\u9875\u9762\u3002 kubectl edit nebulaclusters.apps.nebula-graph.io nebula \u5728 YAML \u6587\u4ef6\u7684 spec.graphd.config \u914d\u7f6e\u9879\u4e2d\uff0c\u6dfb\u52a0 enable_authorize \u548c auth_type \u3002 apiVersion : apps.nebula-graph.io/v1alpha1 kind : NebulaCluster metadata : name : nebula namespace : default spec : graphd : resources : requests : cpu : \"500m\" memory : \"500Mi\" limits : cpu : \"1\" memory : \"1Gi\" replicas : 1 image : vesoft/nebula-graphd version : v3.6.0 storageClaim : resources : requests : storage : 2Gi storageClassName : fast-disks config : //\u4e3a Graph \u670d\u52a1\u81ea\u5b9a\u4e49\u53c2\u6570\u3002 \"enable_authorize\" : \"true\" \"auth_type\" : \"password\" ... \u5982\u679c\u9700\u8981\u4e3a Meta \u670d\u52a1\u548c Storage \u670d\u52a1\u914d\u7f6e config \uff0c\u5219\u5728 spec.metad.config \u548c spec.storaged.config \u4e2d\u6dfb\u52a0\u5bf9\u5e94\u7684\u914d\u7f6e\u9879\u3002 \u6267\u884c kubectl apply -f nebula_cluster.yaml \u4f7f\u4e0a\u8ff0\u66f4\u65b0\u751f\u6548\u3002 \u5728\u81ea\u5b9a\u4e49\u53c2\u6570 enable_authorize \u548c auth_type \u540e\uff0cGraph \u670d\u52a1\u5bf9\u5e94\u7684 ConfigMap\uff08 nebula-graphd \uff09\u4e2d\u7684\u914d\u7f6e\u5c06\u88ab\u8986\u76d6\u3002 \u5728\u7ebf\u4fee\u6539\u96c6\u7fa4\u914d\u7f6e \u00b6 \u5728\u7ebf\u4fee\u6539\u96c6\u7fa4\u914d\u7f6e\u4e3b\u8981\u901a\u8fc7\u8c03\u7528 HTTP \u63a5\u53e3\u5bf9\u96c6\u7fa4\u7684\u914d\u7f6e\u53c2\u6570\u8fdb\u884c\u4fee\u6539\uff0c\u800c\u65e0\u9700\u91cd\u542f\u96c6\u7fa4 Pod\u3002 \u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u53ea\u6709\u5f53 config \u4e2d\u7684\u914d\u7f6e\u9879\u5747\u4e3a\u53ef\u5728\u8fd0\u884c\u65f6\u52a8\u6001\u4fee\u6539\u7684\u53c2\u6570\u65f6\uff0c\u624d\u80fd\u89e6\u53d1\u5728\u7ebf\u4fee\u6539\u96c6\u7fa4\u914d\u7f6e\u64cd\u4f5c\u3002\u5982\u679c config \u4e2d\u7684\u914d\u7f6e\u9879\u5305\u542b\u4e0d\u53ef\u52a8\u6001\u4fee\u6539\u7684\u53c2\u6570\uff0c\u90a3\u4e48\u96c6\u7fa4\u914d\u7f6e\u5c06\u901a\u8fc7\u91cd\u542f Pod \u7684\u65b9\u5f0f\u8fdb\u884c\u66f4\u65b0\u3002 \u5173\u4e8e\u5404\u4e2a\u670d\u52a1\u53ef\u52a8\u6001\u4fee\u6539\u7684\u53c2\u6570\uff0c\u5206\u522b\u53c2\u89c1 Meta \u670d\u52a1\u914d\u7f6e\u53c2\u6570 \u3001 Storage \u670d\u52a1\u914d\u7f6e\u53c2\u6570 \u3001 Graph \u670d\u52a1\u914d\u7f6e\u53c2\u6570 \u7684\u914d\u7f6e\u53c2\u6570\u8868\u683c\u4e2d \u662f\u5426\u652f\u6301\u8fd0\u884c\u65f6\u52a8\u6001\u4fee\u6539 \u4e00\u5217\u3002","title":"\u81ea\u5b9a\u4e49 NebulaGraph \u96c6\u7fa4\u7684\u914d\u7f6e\u53c2\u6570"},{"location":"nebula-operator/8.custom-cluster-configurations/8.1.custom-conf-parameter/#nebulagraph","text":"NebulaGraph\u96c6\u7fa4\u4e2d Meta\u3001Storage\u3001Graph \u670d\u52a1\u90fd\u6709\u5404\u81ea\u7684\u914d\u7f6e\uff0c\u5176\u5728\u7528\u6237\u521b\u5efa\u7684NebulaGraph\u96c6\u7fa4\u5b9e\u4f8b\u7684 YAML \u6587\u4ef6\u4e2d\u88ab\u5b9a\u4e49\u4e3a config \u3002 config \u4e2d\u7684\u8bbe\u7f6e\u4f1a\u88ab\u6620\u5c04\u5e76\u52a0\u8f7d\u5230\u5bf9\u5e94\u670d\u52a1\u7684 ConfigMap \u4e2d\u3002\u5404\u4e2a\u670d\u52a1\u5728\u542f\u52a8\u65f6\u4f1a\u6302\u8f7d ConfigMap \u4e2d\u7684\u914d\u7f6e\u5230 /usr/local/nebula/etc/ \u76ee\u5f55\u4e0b\u3002 Note \u6682\u4e0d\u652f\u6301\u901a\u8fc7 Helm \u81ea\u5b9a\u4e49NebulaGraph\u96c6\u7fa4\u7684\u914d\u7f6e\u53c2\u6570\u3002 config \u7ed3\u6784\u5982\u4e0b\uff1a Config map [ string ] string `json:\"config,omitempty\"`","title":"\u81ea\u5b9a\u4e49NebulaGraph\u96c6\u7fa4\u7684\u914d\u7f6e\u53c2\u6570"},{"location":"nebula-operator/8.custom-cluster-configurations/8.1.custom-conf-parameter/#_1","text":"\u5df2\u4f7f\u7528 K8s \u521b\u5efa\u4e00\u4e2a\u96c6\u7fa4\u3002\u5177\u4f53\u6b65\u9aa4\uff0c\u53c2\u89c1 \u4f7f\u7528 Kubectl \u521b\u5efaNebulaGraph\u96c6\u7fa4 \u3002","title":"\u524d\u63d0\u6761\u4ef6"},{"location":"nebula-operator/8.custom-cluster-configurations/8.1.custom-conf-parameter/#_2","text":"\u4ee5\u4e0b\u793a\u4f8b\u4f7f\u7528\u540d\u4e3a nebula \u7684\u96c6\u7fa4\u3001\u540d\u4e3a nebula_cluster.yaml \u7684 YAML \u914d\u7f6e\u6587\u4ef6\uff0c\u8bf4\u660e\u5982\u4f55\u4e3a\u96c6\u7fa4\u7684 Graph \u670d\u52a1\u914d\u7f6e config \uff1a \u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\u8fdb\u5165 nebula \u96c6\u7fa4\u7684\u7f16\u8f91\u9875\u9762\u3002 kubectl edit nebulaclusters.apps.nebula-graph.io nebula \u5728 YAML \u6587\u4ef6\u7684 spec.graphd.config \u914d\u7f6e\u9879\u4e2d\uff0c\u6dfb\u52a0 enable_authorize \u548c auth_type \u3002 apiVersion : apps.nebula-graph.io/v1alpha1 kind : NebulaCluster metadata : name : nebula namespace : default spec : graphd : resources : requests : cpu : \"500m\" memory : \"500Mi\" limits : cpu : \"1\" memory : \"1Gi\" replicas : 1 image : vesoft/nebula-graphd version : v3.6.0 storageClaim : resources : requests : storage : 2Gi storageClassName : fast-disks config : //\u4e3a Graph \u670d\u52a1\u81ea\u5b9a\u4e49\u53c2\u6570\u3002 \"enable_authorize\" : \"true\" \"auth_type\" : \"password\" ... \u5982\u679c\u9700\u8981\u4e3a Meta \u670d\u52a1\u548c Storage \u670d\u52a1\u914d\u7f6e config \uff0c\u5219\u5728 spec.metad.config \u548c spec.storaged.config \u4e2d\u6dfb\u52a0\u5bf9\u5e94\u7684\u914d\u7f6e\u9879\u3002 \u6267\u884c kubectl apply -f nebula_cluster.yaml \u4f7f\u4e0a\u8ff0\u66f4\u65b0\u751f\u6548\u3002 \u5728\u81ea\u5b9a\u4e49\u53c2\u6570 enable_authorize \u548c auth_type \u540e\uff0cGraph \u670d\u52a1\u5bf9\u5e94\u7684 ConfigMap\uff08 nebula-graphd \uff09\u4e2d\u7684\u914d\u7f6e\u5c06\u88ab\u8986\u76d6\u3002","title":"\u64cd\u4f5c\u6b65\u9aa4"},{"location":"nebula-operator/8.custom-cluster-configurations/8.1.custom-conf-parameter/#_3","text":"\u5728\u7ebf\u4fee\u6539\u96c6\u7fa4\u914d\u7f6e\u4e3b\u8981\u901a\u8fc7\u8c03\u7528 HTTP \u63a5\u53e3\u5bf9\u96c6\u7fa4\u7684\u914d\u7f6e\u53c2\u6570\u8fdb\u884c\u4fee\u6539\uff0c\u800c\u65e0\u9700\u91cd\u542f\u96c6\u7fa4 Pod\u3002 \u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u53ea\u6709\u5f53 config \u4e2d\u7684\u914d\u7f6e\u9879\u5747\u4e3a\u53ef\u5728\u8fd0\u884c\u65f6\u52a8\u6001\u4fee\u6539\u7684\u53c2\u6570\u65f6\uff0c\u624d\u80fd\u89e6\u53d1\u5728\u7ebf\u4fee\u6539\u96c6\u7fa4\u914d\u7f6e\u64cd\u4f5c\u3002\u5982\u679c config \u4e2d\u7684\u914d\u7f6e\u9879\u5305\u542b\u4e0d\u53ef\u52a8\u6001\u4fee\u6539\u7684\u53c2\u6570\uff0c\u90a3\u4e48\u96c6\u7fa4\u914d\u7f6e\u5c06\u901a\u8fc7\u91cd\u542f Pod \u7684\u65b9\u5f0f\u8fdb\u884c\u66f4\u65b0\u3002 \u5173\u4e8e\u5404\u4e2a\u670d\u52a1\u53ef\u52a8\u6001\u4fee\u6539\u7684\u53c2\u6570\uff0c\u5206\u522b\u53c2\u89c1 Meta \u670d\u52a1\u914d\u7f6e\u53c2\u6570 \u3001 Storage \u670d\u52a1\u914d\u7f6e\u53c2\u6570 \u3001 Graph \u670d\u52a1\u914d\u7f6e\u53c2\u6570 \u7684\u914d\u7f6e\u53c2\u6570\u8868\u683c\u4e2d \u662f\u5426\u652f\u6301\u8fd0\u884c\u65f6\u52a8\u6001\u4fee\u6539 \u4e00\u5217\u3002","title":"\u5728\u7ebf\u4fee\u6539\u96c6\u7fa4\u914d\u7f6e"},{"location":"nebula-operator/8.custom-cluster-configurations/8.2.pv-reclaim/","text":"\u56de\u6536 PV \u00b6 NebulaGraph Operator \u4f7f\u7528\u6301\u4e45\u5316\u5377 PV\uff08Persistent Volume\uff09\u548c\u6301\u4e45\u5316\u5377\u58f0\u660e PVC\uff08Persistent Volume Claim\uff09\u6765\u5b58\u50a8\u6301\u4e45\u5316\u6570\u636e\u3002\u5982\u679c\u7528\u6237\u4e0d\u5c0f\u5fc3\u5220\u9664\u4e86\u4e00\u4e2aNebulaGraph\u96c6\u7fa4\uff0c\u9ed8\u8ba4 PV \u548c PVC \u5bf9\u8c61\u53ca\u5176\u6570\u636e\u4ecd\u53ef\u4fdd\u7559\uff0c\u4ee5\u786e\u4fdd\u6570\u636e\u5b89\u5168\u3002 \u7528\u6237\u4e5f\u53ef\u4ee5\u5728\u96c6\u7fa4\u5b9e\u4f8b\u7684\u914d\u7f6e\u6587\u4ef6\u4e2d\u901a\u8fc7\u8bbe\u7f6e\u53c2\u6570 spec.enablePVReclaim \u4e3a true \u6765\u5b9a\u4e49\u5728\u5220\u9664\u96c6\u7fa4\u540e\u81ea\u52a8\u5220\u9664 PVC \u4ee5\u91ca\u653e\u6570\u636e\u3002\u81f3\u4e8e\u5728\u5220\u9664 PVC \u540e\u662f\u5426\u5220\u9664 PV\uff0c\u7528\u6237\u9700\u8981\u81ea\u5b9a\u4e49 PV \u7684\u56de\u6536\u7b56\u7565\u3002\u53c2\u89c1 StorageClass \u4e2d\u8bbe\u7f6e reclaimPolicy \u548c PV Reclaiming \u4e86\u89e3 PV \u56de\u6536\u7b56\u7565\u3002 \u524d\u63d0\u6761\u4ef6 \u00b6 \u5df2\u4f7f\u7528 K8s \u521b\u5efa\u4e00\u4e2a\u96c6\u7fa4\u3002\u5177\u4f53\u6b65\u9aa4\uff0c\u53c2\u89c1 \u4f7f\u7528 Kubectl \u521b\u5efaNebulaGraph\u96c6\u7fa4 \u3002 \u6ce8\u610f\u4e8b\u9879 \u00b6 \u4e0d\u652f\u6301\u5728\u96c6\u7fa4\u8fd0\u884c\u65f6\u52a8\u6001\u589e\u52a0\u6216\u6302\u8f7d PV\u3002 \u64cd\u4f5c\u6b65\u9aa4 \u00b6 \u4ee5\u4e0b\u793a\u4f8b\u4f7f\u7528\u540d\u4e3a nebula \u7684\u96c6\u7fa4\u3001\u540d\u4e3a nebula_cluster.yaml \u7684 YAML \u914d\u7f6e\u6587\u4ef6\uff0c\u8bf4\u660e\u5982\u4f55\u8bbe\u7f6e enablePVReclaim \uff1a \u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\u8fdb\u5165 nebula \u96c6\u7fa4\u7684\u7f16\u8f91\u9875\u9762\u3002 kubectl edit nebulaclusters.apps.nebula-graph.io nebula \u5728 YAML \u6587\u4ef6\u7684 spec \u914d\u7f6e\u9879\u4e2d\uff0c\u6dfb\u52a0 enablePVReclaim \u5e76\u8bbe\u7f6e\u5176\u503c\u4e3a true \u3002 apiVersion : apps.nebula-graph.io/v1alpha1 kind : NebulaCluster metadata : name : nebula spec : enablePVReclaim : true //\u8bbe\u7f6e\u5176\u503c\u4e3a true\u3002 graphd : image : vesoft/nebula-graphd logVolumeClaim : resources : requests : storage : 2Gi storageClassName : fast-disks replicas : 1 resources : limits : cpu : \"1\" memory : 1Gi requests : cpu : 500m memory : 500Mi version : v3.6.0 imagePullPolicy : IfNotPresent metad : dataVolumeClaim : resources : requests : storage : 2Gi storageClassName : fast-disks image : vesoft/nebula-metad logVolumeClaim : resources : requests : storage : 2Gi storageClassName : fast-disks replicas : 1 resources : limits : cpu : \"1\" memory : 1Gi requests : cpu : 500m memory : 500Mi version : v3.6.0 nodeSelector : nebula : cloud reference : name : statefulsets.apps version : v1 schedulerName : default-scheduler storaged : dataVolumeClaims : - resources : requests : storage : 2Gi storageClassName : fast-disks - resources : requests : storage : 2Gi storageClassName : fast-disks image : vesoft/nebula-storaged logVolumeClaim : resources : requests : storage : 2Gi storageClassName : fast-disks replicas : 3 resources : limits : cpu : \"1\" memory : 1Gi requests : cpu : 500m memory : 500Mi version : v3.6.0 ... \u6267\u884c kubectl apply -f nebula_cluster.yaml \u4f7f\u4e0a\u8ff0\u66f4\u65b0\u751f\u6548\u3002 \u5f53\u96c6\u7fa4\u5220\u9664\u540e\uff0c\u7cfb\u7edf\u5c06\u4f1a\u81ea\u52a8\u5220\u9664 PVC \u4ee5\u56de\u6536\u5b58\u50a8\u8d44\u6e90\u3002\u662f\u5426\u5220\u9664 PV\uff0c\u53d6\u51b3\u4e8e PV \u7684\u56de\u6536\u7b56\u7565\u3002","title":"\u56de\u6536 PV"},{"location":"nebula-operator/8.custom-cluster-configurations/8.2.pv-reclaim/#pv","text":"NebulaGraph Operator \u4f7f\u7528\u6301\u4e45\u5316\u5377 PV\uff08Persistent Volume\uff09\u548c\u6301\u4e45\u5316\u5377\u58f0\u660e PVC\uff08Persistent Volume Claim\uff09\u6765\u5b58\u50a8\u6301\u4e45\u5316\u6570\u636e\u3002\u5982\u679c\u7528\u6237\u4e0d\u5c0f\u5fc3\u5220\u9664\u4e86\u4e00\u4e2aNebulaGraph\u96c6\u7fa4\uff0c\u9ed8\u8ba4 PV \u548c PVC \u5bf9\u8c61\u53ca\u5176\u6570\u636e\u4ecd\u53ef\u4fdd\u7559\uff0c\u4ee5\u786e\u4fdd\u6570\u636e\u5b89\u5168\u3002 \u7528\u6237\u4e5f\u53ef\u4ee5\u5728\u96c6\u7fa4\u5b9e\u4f8b\u7684\u914d\u7f6e\u6587\u4ef6\u4e2d\u901a\u8fc7\u8bbe\u7f6e\u53c2\u6570 spec.enablePVReclaim \u4e3a true \u6765\u5b9a\u4e49\u5728\u5220\u9664\u96c6\u7fa4\u540e\u81ea\u52a8\u5220\u9664 PVC \u4ee5\u91ca\u653e\u6570\u636e\u3002\u81f3\u4e8e\u5728\u5220\u9664 PVC \u540e\u662f\u5426\u5220\u9664 PV\uff0c\u7528\u6237\u9700\u8981\u81ea\u5b9a\u4e49 PV \u7684\u56de\u6536\u7b56\u7565\u3002\u53c2\u89c1 StorageClass \u4e2d\u8bbe\u7f6e reclaimPolicy \u548c PV Reclaiming \u4e86\u89e3 PV \u56de\u6536\u7b56\u7565\u3002","title":"\u56de\u6536 PV"},{"location":"nebula-operator/8.custom-cluster-configurations/8.2.pv-reclaim/#_1","text":"\u5df2\u4f7f\u7528 K8s \u521b\u5efa\u4e00\u4e2a\u96c6\u7fa4\u3002\u5177\u4f53\u6b65\u9aa4\uff0c\u53c2\u89c1 \u4f7f\u7528 Kubectl \u521b\u5efaNebulaGraph\u96c6\u7fa4 \u3002","title":"\u524d\u63d0\u6761\u4ef6"},{"location":"nebula-operator/8.custom-cluster-configurations/8.2.pv-reclaim/#_2","text":"\u4e0d\u652f\u6301\u5728\u96c6\u7fa4\u8fd0\u884c\u65f6\u52a8\u6001\u589e\u52a0\u6216\u6302\u8f7d PV\u3002","title":"\u6ce8\u610f\u4e8b\u9879"},{"location":"nebula-operator/8.custom-cluster-configurations/8.2.pv-reclaim/#_3","text":"\u4ee5\u4e0b\u793a\u4f8b\u4f7f\u7528\u540d\u4e3a nebula \u7684\u96c6\u7fa4\u3001\u540d\u4e3a nebula_cluster.yaml \u7684 YAML \u914d\u7f6e\u6587\u4ef6\uff0c\u8bf4\u660e\u5982\u4f55\u8bbe\u7f6e enablePVReclaim \uff1a \u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\u8fdb\u5165 nebula \u96c6\u7fa4\u7684\u7f16\u8f91\u9875\u9762\u3002 kubectl edit nebulaclusters.apps.nebula-graph.io nebula \u5728 YAML \u6587\u4ef6\u7684 spec \u914d\u7f6e\u9879\u4e2d\uff0c\u6dfb\u52a0 enablePVReclaim \u5e76\u8bbe\u7f6e\u5176\u503c\u4e3a true \u3002 apiVersion : apps.nebula-graph.io/v1alpha1 kind : NebulaCluster metadata : name : nebula spec : enablePVReclaim : true //\u8bbe\u7f6e\u5176\u503c\u4e3a true\u3002 graphd : image : vesoft/nebula-graphd logVolumeClaim : resources : requests : storage : 2Gi storageClassName : fast-disks replicas : 1 resources : limits : cpu : \"1\" memory : 1Gi requests : cpu : 500m memory : 500Mi version : v3.6.0 imagePullPolicy : IfNotPresent metad : dataVolumeClaim : resources : requests : storage : 2Gi storageClassName : fast-disks image : vesoft/nebula-metad logVolumeClaim : resources : requests : storage : 2Gi storageClassName : fast-disks replicas : 1 resources : limits : cpu : \"1\" memory : 1Gi requests : cpu : 500m memory : 500Mi version : v3.6.0 nodeSelector : nebula : cloud reference : name : statefulsets.apps version : v1 schedulerName : default-scheduler storaged : dataVolumeClaims : - resources : requests : storage : 2Gi storageClassName : fast-disks - resources : requests : storage : 2Gi storageClassName : fast-disks image : vesoft/nebula-storaged logVolumeClaim : resources : requests : storage : 2Gi storageClassName : fast-disks replicas : 3 resources : limits : cpu : \"1\" memory : 1Gi requests : cpu : 500m memory : 500Mi version : v3.6.0 ... \u6267\u884c kubectl apply -f nebula_cluster.yaml \u4f7f\u4e0a\u8ff0\u66f4\u65b0\u751f\u6548\u3002 \u5f53\u96c6\u7fa4\u5220\u9664\u540e\uff0c\u7cfb\u7edf\u5c06\u4f1a\u81ea\u52a8\u5220\u9664 PVC \u4ee5\u56de\u6536\u5b58\u50a8\u8d44\u6e90\u3002\u662f\u5426\u5220\u9664 PV\uff0c\u53d6\u51b3\u4e8e PV \u7684\u56de\u6536\u7b56\u7565\u3002","title":"\u64cd\u4f5c\u6b65\u9aa4"},{"location":"nebula-operator/8.custom-cluster-configurations/8.3.balance-data-when-scaling-storage/","text":"\u5747\u8861\u6269\u5bb9\u540e\u7684 Storage \u6570\u636e \u00b6 Enterpriseonly \u4ec5\u4f01\u4e1a\u7248NebulaGraph\u96c6\u7fa4\u652f\u6301\u5747\u8861\u6269\u5bb9\u540e\u7684 Storage \u6570\u636e\u3002 \u7528\u6237\u5728\u6269\u5bb9 Storage \u670d\u52a1\u540e\uff0c\u53ef\u4ee5\u81ea\u4e3b\u51b3\u5b9a\u662f\u5426\u5747\u8861 Storage \u670d\u52a1\u4e2d\u7684\u6570\u636e\u3002\u672c\u6587\u4ecb\u7ecd\u5982\u4f55\u8bbe\u7f6e\u5747\u8861 Storage \u6570\u636e\u3002 NebulaGraph\u7684 Storage \u670d\u52a1\u7684\u6269\u5bb9\u5206\u4e3a\u4e24\u4e2a\u9636\u6bb5\uff0c\u7b2c\u4e00\u4e2a\u9636\u6bb5\u7b49\u5f85\u6240\u6709\u6269\u5bb9\u7684 Pods \u4e3a Ready \u7684\u72b6\u6001\uff1b\u7b2c\u4e8c\u4e2a\u9636\u6bb5\u6267\u884c BALANCE DATA \u548c BALANCE LEADER \u547d\u4ee4\u5747\u8861\u6570\u636e\u3002\u8fd9\u4e24\u4e2a\u9636\u6bb5\u5c06\u63a7\u5236\u5668\u526f\u672c\u7684\u6269\u5bb9\u8fc7\u7a0b\u4e0e\u5747\u8861\u6570\u636e\u8fc7\u7a0b\u89e3\u8026\uff0c\u4f7f\u7528\u6237\u53ef\u4ee5\u9009\u62e9\u5728\u4f4e\u6d41\u91cf\u65f6\u8fdb\u884c\u5747\u8861\u6570\u636e\u64cd\u4f5c\uff0c\u6709\u6548\u964d\u4f4e\u6570\u636e\u8fc1\u79fb\u5bf9\u5728\u7ebf\u670d\u52a1\u7684\u5f71\u54cd\u3002 \u7528\u6237\u53ef\u4ee5\u5728\u96c6\u7fa4\u7684 CR \u5b9e\u4f8b\u7684\u914d\u7f6e\u6587\u4ef6\u4e2d\u901a\u8fc7\u53c2\u6570 enableAutoBalance \u6765\u63a7\u5236\u662f\u5426\u81ea\u52a8\u5747\u8861\u6570\u636e\u3002 \u524d\u63d0\u6761\u4ef6 \u00b6 \u5df2\u4f7f\u7528 K8s \u521b\u5efa\u4e00\u4e2a\u96c6\u7fa4\u3002\u5177\u4f53\u6b65\u9aa4\uff0c\u53c2\u89c1 \u4f7f\u7528 Kubectl \u521b\u5efaNebulaGraph\u96c6\u7fa4 \u3002 \u64cd\u4f5c\u6b65\u9aa4 \u00b6 \u4ee5\u4e0b\u793a\u4f8b\u4f7f\u7528\u540d\u4e3a nebula \u7684\u96c6\u7fa4\u3001\u540d\u4e3a nebula_cluster.yaml \u7684 YAML \u914d\u7f6e\u6587\u4ef6\uff0c\u8bf4\u660e\u5982\u4f55\u8bbe\u7f6e enableAutoBalance \uff1a \u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\u8fdb\u5165 nebula \u96c6\u7fa4\u7684\u7f16\u8f91\u9875\u9762\u3002 kubectl edit nebulaclusters.apps.nebula-graph.io nebula \u5728 YAML \u6587\u4ef6\u7684 spec.storaged \u914d\u7f6e\u9879\u4e2d\uff0c\u6dfb\u52a0 enableAutoBalance \u5e76\u8bbe\u7f6e\u5176\u503c\u4e3a true \u3002 apiVersion : apps.nebula-graph.io/v1alpha1 kind : NebulaCluster metadata : name : nebula spec : graphd : image : vesoft/nebula-graphd logVolumeClaim : resources : requests : storage : 2Gi storageClassName : fast-disks replicas : 1 resources : limits : cpu : \"1\" memory : 1Gi requests : cpu : 500m memory : 500Mi version : v3.6.0 imagePullPolicy : IfNotPresent metad : dataVolumeClaim : resources : requests : storage : 2Gi storageClassName : fast-disks image : vesoft/nebula-metad logVolumeClaim : resources : requests : storage : 2Gi storageClassName : fast-disks replicas : 1 resources : limits : cpu : \"1\" memory : 1Gi requests : cpu : 500m memory : 500Mi version : v3.6.0 nodeSelector : nebula : cloud reference : name : statefulsets.apps version : v1 schedulerName : default-scheduler storaged : enableAutoBalance : true //\u5c06\u5176\u503c\u8bbe\u7f6e\u4e3a true \u65f6\u8868\u793a\u6269\u5bb9\u540e\u81ea\u52a8\u5747\u8861 Storage \u6570\u636e\u3002 dataVolumeClaims : - resources : requests : storage : 2Gi storageClassName : fast-disks - resources : requests : storage : 2Gi storageClassName : fast-disks image : vesoft/nebula-storaged logVolumeClaim : resources : requests : storage : 2Gi storageClassName : fast-disks replicas : 3 resources : limits : cpu : \"1\" memory : 1Gi requests : cpu : 500m memory : 500Mi version : v3.6.0 ... \u5f53\u8bbe\u7f6e enableAutoBalance \u7684\u503c\u4e3a true \u65f6\uff0c\u8868\u793a\u6269\u5bb9\u540e\u81ea\u52a8\u5747\u8861 Storage \u6570\u636e\u3002 \u5f53\u8bbe\u7f6e enableAutoBalance \u7684\u503c\u4e3a false \u65f6\uff0c\u8868\u793a\u6269\u5bb9\u540e\u4e0d\u4f1a\u5747\u8861 Storage \u6570\u636e\u3002 \u5f53\u4e0d\u8bbe\u7f6e enableAutoBalance \u53c2\u6570\u65f6\uff0c\u9ed8\u8ba4\u6269\u5bb9 Storage \u540e\u7cfb\u7edf\u4e0d\u4f1a\u81ea\u52a8\u5747\u8861 Storage \u6570\u636e\u3002 \u6267\u884c kubectl apply -f nebula_cluster.yaml \u4f7f\u4e0a\u8ff0\u66f4\u65b0\u751f\u6548\u3002","title":"\u5747\u8861\u6269\u5bb9\u540e\u7684 Storage \u6570\u636e"},{"location":"nebula-operator/8.custom-cluster-configurations/8.3.balance-data-when-scaling-storage/#storage","text":"Enterpriseonly \u4ec5\u4f01\u4e1a\u7248NebulaGraph\u96c6\u7fa4\u652f\u6301\u5747\u8861\u6269\u5bb9\u540e\u7684 Storage \u6570\u636e\u3002 \u7528\u6237\u5728\u6269\u5bb9 Storage \u670d\u52a1\u540e\uff0c\u53ef\u4ee5\u81ea\u4e3b\u51b3\u5b9a\u662f\u5426\u5747\u8861 Storage \u670d\u52a1\u4e2d\u7684\u6570\u636e\u3002\u672c\u6587\u4ecb\u7ecd\u5982\u4f55\u8bbe\u7f6e\u5747\u8861 Storage \u6570\u636e\u3002 NebulaGraph\u7684 Storage \u670d\u52a1\u7684\u6269\u5bb9\u5206\u4e3a\u4e24\u4e2a\u9636\u6bb5\uff0c\u7b2c\u4e00\u4e2a\u9636\u6bb5\u7b49\u5f85\u6240\u6709\u6269\u5bb9\u7684 Pods \u4e3a Ready \u7684\u72b6\u6001\uff1b\u7b2c\u4e8c\u4e2a\u9636\u6bb5\u6267\u884c BALANCE DATA \u548c BALANCE LEADER \u547d\u4ee4\u5747\u8861\u6570\u636e\u3002\u8fd9\u4e24\u4e2a\u9636\u6bb5\u5c06\u63a7\u5236\u5668\u526f\u672c\u7684\u6269\u5bb9\u8fc7\u7a0b\u4e0e\u5747\u8861\u6570\u636e\u8fc7\u7a0b\u89e3\u8026\uff0c\u4f7f\u7528\u6237\u53ef\u4ee5\u9009\u62e9\u5728\u4f4e\u6d41\u91cf\u65f6\u8fdb\u884c\u5747\u8861\u6570\u636e\u64cd\u4f5c\uff0c\u6709\u6548\u964d\u4f4e\u6570\u636e\u8fc1\u79fb\u5bf9\u5728\u7ebf\u670d\u52a1\u7684\u5f71\u54cd\u3002 \u7528\u6237\u53ef\u4ee5\u5728\u96c6\u7fa4\u7684 CR \u5b9e\u4f8b\u7684\u914d\u7f6e\u6587\u4ef6\u4e2d\u901a\u8fc7\u53c2\u6570 enableAutoBalance \u6765\u63a7\u5236\u662f\u5426\u81ea\u52a8\u5747\u8861\u6570\u636e\u3002","title":"\u5747\u8861\u6269\u5bb9\u540e\u7684 Storage \u6570\u636e"},{"location":"nebula-operator/8.custom-cluster-configurations/8.3.balance-data-when-scaling-storage/#_1","text":"\u5df2\u4f7f\u7528 K8s \u521b\u5efa\u4e00\u4e2a\u96c6\u7fa4\u3002\u5177\u4f53\u6b65\u9aa4\uff0c\u53c2\u89c1 \u4f7f\u7528 Kubectl \u521b\u5efaNebulaGraph\u96c6\u7fa4 \u3002","title":"\u524d\u63d0\u6761\u4ef6"},{"location":"nebula-operator/8.custom-cluster-configurations/8.3.balance-data-when-scaling-storage/#_2","text":"\u4ee5\u4e0b\u793a\u4f8b\u4f7f\u7528\u540d\u4e3a nebula \u7684\u96c6\u7fa4\u3001\u540d\u4e3a nebula_cluster.yaml \u7684 YAML \u914d\u7f6e\u6587\u4ef6\uff0c\u8bf4\u660e\u5982\u4f55\u8bbe\u7f6e enableAutoBalance \uff1a \u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\u8fdb\u5165 nebula \u96c6\u7fa4\u7684\u7f16\u8f91\u9875\u9762\u3002 kubectl edit nebulaclusters.apps.nebula-graph.io nebula \u5728 YAML \u6587\u4ef6\u7684 spec.storaged \u914d\u7f6e\u9879\u4e2d\uff0c\u6dfb\u52a0 enableAutoBalance \u5e76\u8bbe\u7f6e\u5176\u503c\u4e3a true \u3002 apiVersion : apps.nebula-graph.io/v1alpha1 kind : NebulaCluster metadata : name : nebula spec : graphd : image : vesoft/nebula-graphd logVolumeClaim : resources : requests : storage : 2Gi storageClassName : fast-disks replicas : 1 resources : limits : cpu : \"1\" memory : 1Gi requests : cpu : 500m memory : 500Mi version : v3.6.0 imagePullPolicy : IfNotPresent metad : dataVolumeClaim : resources : requests : storage : 2Gi storageClassName : fast-disks image : vesoft/nebula-metad logVolumeClaim : resources : requests : storage : 2Gi storageClassName : fast-disks replicas : 1 resources : limits : cpu : \"1\" memory : 1Gi requests : cpu : 500m memory : 500Mi version : v3.6.0 nodeSelector : nebula : cloud reference : name : statefulsets.apps version : v1 schedulerName : default-scheduler storaged : enableAutoBalance : true //\u5c06\u5176\u503c\u8bbe\u7f6e\u4e3a true \u65f6\u8868\u793a\u6269\u5bb9\u540e\u81ea\u52a8\u5747\u8861 Storage \u6570\u636e\u3002 dataVolumeClaims : - resources : requests : storage : 2Gi storageClassName : fast-disks - resources : requests : storage : 2Gi storageClassName : fast-disks image : vesoft/nebula-storaged logVolumeClaim : resources : requests : storage : 2Gi storageClassName : fast-disks replicas : 3 resources : limits : cpu : \"1\" memory : 1Gi requests : cpu : 500m memory : 500Mi version : v3.6.0 ... \u5f53\u8bbe\u7f6e enableAutoBalance \u7684\u503c\u4e3a true \u65f6\uff0c\u8868\u793a\u6269\u5bb9\u540e\u81ea\u52a8\u5747\u8861 Storage \u6570\u636e\u3002 \u5f53\u8bbe\u7f6e enableAutoBalance \u7684\u503c\u4e3a false \u65f6\uff0c\u8868\u793a\u6269\u5bb9\u540e\u4e0d\u4f1a\u5747\u8861 Storage \u6570\u636e\u3002 \u5f53\u4e0d\u8bbe\u7f6e enableAutoBalance \u53c2\u6570\u65f6\uff0c\u9ed8\u8ba4\u6269\u5bb9 Storage \u540e\u7cfb\u7edf\u4e0d\u4f1a\u81ea\u52a8\u5747\u8861 Storage \u6570\u636e\u3002 \u6267\u884c kubectl apply -f nebula_cluster.yaml \u4f7f\u4e0a\u8ff0\u66f4\u65b0\u751f\u6548\u3002","title":"\u64cd\u4f5c\u6b65\u9aa4"},{"location":"nebula-operator/8.custom-cluster-configurations/8.4.manage-running-logs/","text":"\u7ba1\u7406\u96c6\u7fa4\u65e5\u5fd7 \u00b6 NebulaGraph\u96c6\u7fa4\u5404\u670d\u52a1\uff08graphd\u3001metad\u3001storaged\uff09\u5728\u8fd0\u884c\u671f\u95f4\u4f1a\u751f\u6210\u8fd0\u884c\u65e5\u5fd7\uff0c\u65e5\u5fd7\u9ed8\u8ba4\u5b58\u653e\u5728\u5404\u4e2a\u670d\u52a1\u5bb9\u5668\u7684 /usr/local/nebula/logs \u76ee\u5f55\u4e0b\u3002 \u67e5\u770b\u8fd0\u884c\u65e5\u5fd7 \u00b6 \u5982\u679c\u60a8\u9700\u8981\u67e5\u770bNebulaGraph\u96c6\u7fa4\u7684\u8fd0\u884c\u65e5\u5fd7\uff0c\u53ef\u4ee5\u901a\u8fc7 kubectl logs \u547d\u4ee4\u67e5\u770b\u3002 \u4f8b\u5982\uff0c\u67e5\u770b Storage \u670d\u52a1\u7684\u8fd0\u884c\u65e5\u5fd7\uff1a // \u67e5\u770b Storage \u670d\u52a1 Pod \u7684\u540d\u79f0\uff08nebula-storaged-0\uff09\u3002 $ kubectl get pods -l app.kubernetes.io/component = storaged NAME READY STATUS RESTARTS AGE nebula-storaged-0 1 /1 Running 0 45h ... // \u8fdb\u5165 Storage \u670d\u52a1\u6240\u5728\u5bb9\u5668 storaged\u3002 $ kubectl exec -it nebula-storaged-0 -c storaged -- /bin/bash // \u67e5\u770b Storage \u670d\u52a1\u7684\u8fd0\u884c\u65e5\u5fd7\u3002 $ cd /usr/local/nebula/logs \u6e05\u7406\u65e5\u5fd7 \u00b6 \u96c6\u7fa4\u670d\u52a1\u5728\u8fd0\u884c\u671f\u95f4\u751f\u6210\u7684\u8fd0\u884c\u65e5\u5fd7\u4f1a\u5360\u7528\u78c1\u76d8\u7a7a\u95f4\uff0c\u4e3a\u907f\u514d\u5360\u7528\u8fc7\u591a\u78c1\u76d8\u7a7a\u95f4\uff0cOperator \u4f7f\u7528 sidecar \u5bb9\u5668\u5b9a\u671f\u6e05\u7406\u548c\u5f52\u6863\u65e5\u5fd7\u3002 \u4e3a\u4e86\u65b9\u4fbf\u65e5\u5fd7\u7684\u91c7\u96c6\u548c\u7ba1\u7406\uff0c\u6bcf\u4e2aNebulaGraph\u670d\u52a1\u90fd\u4f1a\u90e8\u7f72\u4e00\u4e2a sidecar \u5bb9\u5668\uff0c\u8d1f\u8d23\u6536\u96c6\u8be5\u670d\u52a1\u5bb9\u5668\u4ea7\u751f\u7684\u65e5\u5fd7\uff0c\u5e76\u5c06\u5176\u53d1\u9001\u5230\u6307\u5b9a\u7684\u65e5\u5fd7\u78c1\u76d8\u4e2d\u3002sidecar \u5bb9\u5668\u4f7f\u7528 logrotate \u5de5\u5177\u81ea\u52a8\u6e05\u7406\u548c\u5f52\u6863\u65e5\u5fd7\u3002 \u5728\u96c6\u7fa4\u5b9e\u4f8b\u7684 YAML \u914d\u7f6e\u6587\u4ef6\u4e2d\uff0c\u901a\u8fc7 spec.logRotate \u5b57\u6bb5\u5f00\u542f\u65e5\u5fd7\u8f6e\u8f6c\u529f\u80fd\uff0c\u540c\u65f6\u5728 spec.<graphd|metad|storaged>.config \u4e0b\u8bbe\u7f6e timestamp_in_logfile_name \u503c\u4e3a false \u4ee5\u81ea\u52a8\u5bf9\u5404\u670d\u52a1\u65e5\u5fd7\u8fdb\u884c\u6e05\u7406\u548c\u5f52\u6863\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u65e5\u5fd7\u8f6e\u8f6c\u529f\u80fd\u662f\u5173\u95ed\u7684\u3002\u4e3aNebulaGraph\u5404\u4e2a\u670d\u52a1\u90fd\u5f00\u542f\u65e5\u5fd7\u8f6e\u8f6c\u529f\u80fd\u793a\u4f8b\u5982\u4e0b\uff1a ... spec : graphd : config : # \u662f\u5426\u5728\u65e5\u5fd7\u6587\u4ef6\u540d\u4e2d\u5305\u542b\u65f6\u95f4\u6233\uff0c\u9700\u8bbe\u7f6e\u4e3a false \u4ee5\u5b9e\u73b0\u65e5\u5fd7\u8f6e\u8f6c\u3002\u9ed8\u8ba4\u503c\u4e3a true\u3002 \"timestamp_in_logfile_name\" : \"false\" metad : config : \"timestamp_in_logfile_name\" : \"false\" storaged : config : \"timestamp_in_logfile_name\" : \"false\" logRotate : # \u65e5\u5fd7\u8f6e\u8f6c\u914d\u7f6e # \u65e5\u5fd7\u6587\u4ef6\u5728\u88ab\u5220\u9664\u524d\u4f1a\u88ab\u8f6e\u8f6c\u7684\u6b21\u6570\u3002\u9ed8\u8ba4\u503c\u4e3a 5\uff0c0 \u8868\u793a\u5220\u9664\u524d\u4e0d\u4f1a\u88ab\u8f6e\u8f6c\u3002 rotate : 5 # \u4ec5\u5f53\u65e5\u5fd7\u6587\u4ef6\u589e\u957f\u8d85\u8fc7\u5b9a\u4e49\u7684\u5b57\u8282\u5927\u5c0f\u65f6\u624d\u4f1a\u8f6e\u8f6c\u65e5\u5fd7\u6587\u4ef6\u3002\u9ed8\u8ba4\u503c\u4e3a 200M\u3002 size : \"200M\" \u6536\u96c6\u65e5\u5fd7 \u00b6 \u5982\u679c\u4e0d\u60f3\u6302\u8f7d\u989d\u5916\u7684\u65e5\u5fd7\u78c1\u76d8\u5907\u4efd\u65e5\u5fd7\u6587\u4ef6\uff0c\u6216\u8005\u60f3\u901a\u8fc7\u8bf8\u5982 fluent-bit \u4e4b\u7c7b\u7684\u670d\u52a1\u6536\u96c6\u65e5\u5fd7\u5e76\u5c06\u5176\u53d1\u9001\u5230\u65e5\u5fd7\u4e2d\u5fc3\uff0c\u53ef\u4ee5\u914d\u7f6e\u65e5\u5fd7\u81f3\u6807\u51c6\u9519\u8bef\u8f93\u51fa\u3002Operator \u4f7f\u7528 glog \u5de5\u5177\u5c06\u65e5\u5fd7\u8bb0\u5f55\u5230\u6807\u51c6\u9519\u8bef\u8f93\u51fa\u3002 Caution \u76ee\u524d Operator \u4ec5\u6536\u96c6\u6807\u51c6\u9519\u8bef\u65e5\u5fd7\u3002 \u5728\u96c6\u7fa4\u5b9e\u4f8b\u7684 YAML \u914d\u7f6e\u6587\u4ef6\u4e2d\uff0c\u53ef\u4ee5\u5728\u5404\u4e2a\u670d\u52a1\u4e0b\u7684 config \u548c env \u5b57\u6bb5\u4e2d\u914d\u7f6e\u65e5\u5fd7\u8bb0\u5f55\u5230\u6807\u51c6\u9519\u8bef\u8f93\u51fa\u3002 ... spec : graphd : config : # \u662f\u5426\u5c06\u6807\u51c6\u9519\u8bef\u91cd\u5b9a\u5411\u5230\u5355\u72ec\u7684\u8f93\u51fa\u6587\u4ef6\u3002\u9ed8\u8ba4\u503c\u4e3a false\uff0c\u8868\u793a\u4e0d\u91cd\u5b9a\u5411\u3002 redirect_stdout : \"false\" # \u65e5\u5fd7\u5185\u5bb9\u7684\u4e25\u91cd\u7a0b\u5ea6\u7ea7\u522b\uff1aINFO\u3001WARNING\u3001ERROR \u548c FATAL\u3002\u53d6\u503c\u5206\u522b\u4e3a 0\u30011\u30012 \u548c 3\u3002 stderrthreshold : \"0\" env : - name : GLOG_logtostderr # \u65e5\u5fd7\u5199\u5165\u6807\u51c6\u9519\u8bef\u800c\u4e0d\u662f\u6587\u4ef6\u3002 value : \"1\" # 1 \u8868\u793a\u5199\u5165\u6807\u51c6\u9519\u8bef\uff0c0 \u8868\u793a\u5199\u5165\u6587\u4ef6\u4e2d\u3002 image : vesoft/nebula-graphd replicas : 1 resources : requests : cpu : 500m memory : 500Mi service : externalTrafficPolicy : Local type : NodePort version : v3.6.0 metad : config : redirect_stdout : \"false\" stderrthreshold : \"0\" dataVolumeClaim : resources : requests : storage : 1Gi storageClassName : ebs-sc env : - name : GLOG_logtostderr value : \"1\" image : vesoft/nebula-metad ...","title":"\u7ba1\u7406\u96c6\u7fa4\u65e5\u5fd7"},{"location":"nebula-operator/8.custom-cluster-configurations/8.4.manage-running-logs/#_1","text":"NebulaGraph\u96c6\u7fa4\u5404\u670d\u52a1\uff08graphd\u3001metad\u3001storaged\uff09\u5728\u8fd0\u884c\u671f\u95f4\u4f1a\u751f\u6210\u8fd0\u884c\u65e5\u5fd7\uff0c\u65e5\u5fd7\u9ed8\u8ba4\u5b58\u653e\u5728\u5404\u4e2a\u670d\u52a1\u5bb9\u5668\u7684 /usr/local/nebula/logs \u76ee\u5f55\u4e0b\u3002","title":"\u7ba1\u7406\u96c6\u7fa4\u65e5\u5fd7"},{"location":"nebula-operator/8.custom-cluster-configurations/8.4.manage-running-logs/#_2","text":"\u5982\u679c\u60a8\u9700\u8981\u67e5\u770bNebulaGraph\u96c6\u7fa4\u7684\u8fd0\u884c\u65e5\u5fd7\uff0c\u53ef\u4ee5\u901a\u8fc7 kubectl logs \u547d\u4ee4\u67e5\u770b\u3002 \u4f8b\u5982\uff0c\u67e5\u770b Storage \u670d\u52a1\u7684\u8fd0\u884c\u65e5\u5fd7\uff1a // \u67e5\u770b Storage \u670d\u52a1 Pod \u7684\u540d\u79f0\uff08nebula-storaged-0\uff09\u3002 $ kubectl get pods -l app.kubernetes.io/component = storaged NAME READY STATUS RESTARTS AGE nebula-storaged-0 1 /1 Running 0 45h ... // \u8fdb\u5165 Storage \u670d\u52a1\u6240\u5728\u5bb9\u5668 storaged\u3002 $ kubectl exec -it nebula-storaged-0 -c storaged -- /bin/bash // \u67e5\u770b Storage \u670d\u52a1\u7684\u8fd0\u884c\u65e5\u5fd7\u3002 $ cd /usr/local/nebula/logs","title":"\u67e5\u770b\u8fd0\u884c\u65e5\u5fd7"},{"location":"nebula-operator/8.custom-cluster-configurations/8.4.manage-running-logs/#_3","text":"\u96c6\u7fa4\u670d\u52a1\u5728\u8fd0\u884c\u671f\u95f4\u751f\u6210\u7684\u8fd0\u884c\u65e5\u5fd7\u4f1a\u5360\u7528\u78c1\u76d8\u7a7a\u95f4\uff0c\u4e3a\u907f\u514d\u5360\u7528\u8fc7\u591a\u78c1\u76d8\u7a7a\u95f4\uff0cOperator \u4f7f\u7528 sidecar \u5bb9\u5668\u5b9a\u671f\u6e05\u7406\u548c\u5f52\u6863\u65e5\u5fd7\u3002 \u4e3a\u4e86\u65b9\u4fbf\u65e5\u5fd7\u7684\u91c7\u96c6\u548c\u7ba1\u7406\uff0c\u6bcf\u4e2aNebulaGraph\u670d\u52a1\u90fd\u4f1a\u90e8\u7f72\u4e00\u4e2a sidecar \u5bb9\u5668\uff0c\u8d1f\u8d23\u6536\u96c6\u8be5\u670d\u52a1\u5bb9\u5668\u4ea7\u751f\u7684\u65e5\u5fd7\uff0c\u5e76\u5c06\u5176\u53d1\u9001\u5230\u6307\u5b9a\u7684\u65e5\u5fd7\u78c1\u76d8\u4e2d\u3002sidecar \u5bb9\u5668\u4f7f\u7528 logrotate \u5de5\u5177\u81ea\u52a8\u6e05\u7406\u548c\u5f52\u6863\u65e5\u5fd7\u3002 \u5728\u96c6\u7fa4\u5b9e\u4f8b\u7684 YAML \u914d\u7f6e\u6587\u4ef6\u4e2d\uff0c\u901a\u8fc7 spec.logRotate \u5b57\u6bb5\u5f00\u542f\u65e5\u5fd7\u8f6e\u8f6c\u529f\u80fd\uff0c\u540c\u65f6\u5728 spec.<graphd|metad|storaged>.config \u4e0b\u8bbe\u7f6e timestamp_in_logfile_name \u503c\u4e3a false \u4ee5\u81ea\u52a8\u5bf9\u5404\u670d\u52a1\u65e5\u5fd7\u8fdb\u884c\u6e05\u7406\u548c\u5f52\u6863\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u65e5\u5fd7\u8f6e\u8f6c\u529f\u80fd\u662f\u5173\u95ed\u7684\u3002\u4e3aNebulaGraph\u5404\u4e2a\u670d\u52a1\u90fd\u5f00\u542f\u65e5\u5fd7\u8f6e\u8f6c\u529f\u80fd\u793a\u4f8b\u5982\u4e0b\uff1a ... spec : graphd : config : # \u662f\u5426\u5728\u65e5\u5fd7\u6587\u4ef6\u540d\u4e2d\u5305\u542b\u65f6\u95f4\u6233\uff0c\u9700\u8bbe\u7f6e\u4e3a false \u4ee5\u5b9e\u73b0\u65e5\u5fd7\u8f6e\u8f6c\u3002\u9ed8\u8ba4\u503c\u4e3a true\u3002 \"timestamp_in_logfile_name\" : \"false\" metad : config : \"timestamp_in_logfile_name\" : \"false\" storaged : config : \"timestamp_in_logfile_name\" : \"false\" logRotate : # \u65e5\u5fd7\u8f6e\u8f6c\u914d\u7f6e # \u65e5\u5fd7\u6587\u4ef6\u5728\u88ab\u5220\u9664\u524d\u4f1a\u88ab\u8f6e\u8f6c\u7684\u6b21\u6570\u3002\u9ed8\u8ba4\u503c\u4e3a 5\uff0c0 \u8868\u793a\u5220\u9664\u524d\u4e0d\u4f1a\u88ab\u8f6e\u8f6c\u3002 rotate : 5 # \u4ec5\u5f53\u65e5\u5fd7\u6587\u4ef6\u589e\u957f\u8d85\u8fc7\u5b9a\u4e49\u7684\u5b57\u8282\u5927\u5c0f\u65f6\u624d\u4f1a\u8f6e\u8f6c\u65e5\u5fd7\u6587\u4ef6\u3002\u9ed8\u8ba4\u503c\u4e3a 200M\u3002 size : \"200M\"","title":"\u6e05\u7406\u65e5\u5fd7"},{"location":"nebula-operator/8.custom-cluster-configurations/8.4.manage-running-logs/#_4","text":"\u5982\u679c\u4e0d\u60f3\u6302\u8f7d\u989d\u5916\u7684\u65e5\u5fd7\u78c1\u76d8\u5907\u4efd\u65e5\u5fd7\u6587\u4ef6\uff0c\u6216\u8005\u60f3\u901a\u8fc7\u8bf8\u5982 fluent-bit \u4e4b\u7c7b\u7684\u670d\u52a1\u6536\u96c6\u65e5\u5fd7\u5e76\u5c06\u5176\u53d1\u9001\u5230\u65e5\u5fd7\u4e2d\u5fc3\uff0c\u53ef\u4ee5\u914d\u7f6e\u65e5\u5fd7\u81f3\u6807\u51c6\u9519\u8bef\u8f93\u51fa\u3002Operator \u4f7f\u7528 glog \u5de5\u5177\u5c06\u65e5\u5fd7\u8bb0\u5f55\u5230\u6807\u51c6\u9519\u8bef\u8f93\u51fa\u3002 Caution \u76ee\u524d Operator \u4ec5\u6536\u96c6\u6807\u51c6\u9519\u8bef\u65e5\u5fd7\u3002 \u5728\u96c6\u7fa4\u5b9e\u4f8b\u7684 YAML \u914d\u7f6e\u6587\u4ef6\u4e2d\uff0c\u53ef\u4ee5\u5728\u5404\u4e2a\u670d\u52a1\u4e0b\u7684 config \u548c env \u5b57\u6bb5\u4e2d\u914d\u7f6e\u65e5\u5fd7\u8bb0\u5f55\u5230\u6807\u51c6\u9519\u8bef\u8f93\u51fa\u3002 ... spec : graphd : config : # \u662f\u5426\u5c06\u6807\u51c6\u9519\u8bef\u91cd\u5b9a\u5411\u5230\u5355\u72ec\u7684\u8f93\u51fa\u6587\u4ef6\u3002\u9ed8\u8ba4\u503c\u4e3a false\uff0c\u8868\u793a\u4e0d\u91cd\u5b9a\u5411\u3002 redirect_stdout : \"false\" # \u65e5\u5fd7\u5185\u5bb9\u7684\u4e25\u91cd\u7a0b\u5ea6\u7ea7\u522b\uff1aINFO\u3001WARNING\u3001ERROR \u548c FATAL\u3002\u53d6\u503c\u5206\u522b\u4e3a 0\u30011\u30012 \u548c 3\u3002 stderrthreshold : \"0\" env : - name : GLOG_logtostderr # \u65e5\u5fd7\u5199\u5165\u6807\u51c6\u9519\u8bef\u800c\u4e0d\u662f\u6587\u4ef6\u3002 value : \"1\" # 1 \u8868\u793a\u5199\u5165\u6807\u51c6\u9519\u8bef\uff0c0 \u8868\u793a\u5199\u5165\u6587\u4ef6\u4e2d\u3002 image : vesoft/nebula-graphd replicas : 1 resources : requests : cpu : 500m memory : 500Mi service : externalTrafficPolicy : Local type : NodePort version : v3.6.0 metad : config : redirect_stdout : \"false\" stderrthreshold : \"0\" dataVolumeClaim : resources : requests : storage : 1Gi storageClassName : ebs-sc env : - name : GLOG_logtostderr value : \"1\" image : vesoft/nebula-metad ...","title":"\u6536\u96c6\u65e5\u5fd7"},{"location":"nebula-studio/about-studio/st-ug-limitations/","text":"\u4f7f\u7528\u9650\u5236 \u00b6 \u672c\u6587\u63cf\u8ff0\u4f7f\u7528 Studio \u7684\u9650\u5236\u3002 \u7cfb\u7edf\u67b6\u6784 \u00b6 Studio \u76ee\u524d\u4ec5\u652f\u6301 x86_64 \u67b6\u6784\u3002 \u6570\u636e\u4e0a\u4f20 \u00b6 Studio \u4e0a\u4f20\u6570\u636e\u4ec5\u652f\u6301\u4e0a\u4f20\u65e0\u8868\u5934\u7684 CSV \u6587\u4ef6\uff0c\u4f46\u662f\uff0c\u5355\u4e2a\u6587\u4ef6\u5927\u5c0f\u53ca\u4fdd\u5b58\u65f6\u95f4\u4e0d\u53d7\u9650\u5236\uff0c\u800c\u4e14\u6570\u636e\u603b\u91cf\u4ee5\u672c\u5730\u5b58\u50a8\u5bb9\u91cf\u4e3a\u51c6\u3002 \u6570\u636e\u5907\u4efd \u00b6 \u76ee\u524d\u4ec5\u652f\u6301\u5728 \u63a7\u5236\u53f0 \u4e0a\u4ee5 CSV \u683c\u5f0f\u5bfc\u51fa\u67e5\u8be2\u7ed3\u679c\uff0c\u4e0d\u652f\u6301\u5176\u4ed6\u6570\u636e\u5907\u4efd\u65b9\u5f0f\u3002 nGQL \u652f\u6301 \u00b6 \u9664\u4ee5\u4e0b\u5185\u5bb9\u5916\uff0c\u7528\u6237\u53ef\u4ee5\u5728 \u63a7\u5236\u53f0 \u4e0a\u6267\u884c\u6240\u6709 nGQL \u8bed\u53e5\uff1a USE <space_name> \uff1a\u53ea\u80fd\u5728 Space \u4e0b\u62c9\u5217\u8868\u4e2d\u9009\u62e9\u56fe\u7a7a\u95f4\uff0c\u4e0d\u80fd\u8fd0\u884c\u8fd9\u4e2a\u8bed\u53e5\u9009\u62e9\u56fe\u7a7a\u95f4\u3002 \u63a7\u5236\u53f0 \u4e0a\u4f7f\u7528 nGQL \u8bed\u53e5\u65f6\uff0c\u7528\u6237\u53ef\u4ee5\u76f4\u63a5\u56de\u8f66\u6362\u884c\uff0c\u4e0d\u80fd\u4f7f\u7528\u6362\u884c\u7b26\u3002 \u6d4f\u89c8\u5668\u652f\u6301 \u00b6 \u5efa\u8bae\u4f7f\u7528\u6700\u65b0\u7248\u672c\u7684 Chrome \u8bbf\u95ee Studio\u3002\u5426\u5219\u4f1a\u51fa\u73b0\u6837\u5f0f\u663e\u793a\u5f02\u5e38\u548c\u4ea4\u4e92\u5f02\u5e38\u7b49\u95ee\u9898\u3002","title":"\u4f7f\u7528\u9650\u5236"},{"location":"nebula-studio/about-studio/st-ug-limitations/#_1","text":"\u672c\u6587\u63cf\u8ff0\u4f7f\u7528 Studio \u7684\u9650\u5236\u3002","title":"\u4f7f\u7528\u9650\u5236"},{"location":"nebula-studio/about-studio/st-ug-limitations/#_2","text":"Studio \u76ee\u524d\u4ec5\u652f\u6301 x86_64 \u67b6\u6784\u3002","title":"\u7cfb\u7edf\u67b6\u6784"},{"location":"nebula-studio/about-studio/st-ug-limitations/#_3","text":"Studio \u4e0a\u4f20\u6570\u636e\u4ec5\u652f\u6301\u4e0a\u4f20\u65e0\u8868\u5934\u7684 CSV \u6587\u4ef6\uff0c\u4f46\u662f\uff0c\u5355\u4e2a\u6587\u4ef6\u5927\u5c0f\u53ca\u4fdd\u5b58\u65f6\u95f4\u4e0d\u53d7\u9650\u5236\uff0c\u800c\u4e14\u6570\u636e\u603b\u91cf\u4ee5\u672c\u5730\u5b58\u50a8\u5bb9\u91cf\u4e3a\u51c6\u3002","title":"\u6570\u636e\u4e0a\u4f20"},{"location":"nebula-studio/about-studio/st-ug-limitations/#_4","text":"\u76ee\u524d\u4ec5\u652f\u6301\u5728 \u63a7\u5236\u53f0 \u4e0a\u4ee5 CSV \u683c\u5f0f\u5bfc\u51fa\u67e5\u8be2\u7ed3\u679c\uff0c\u4e0d\u652f\u6301\u5176\u4ed6\u6570\u636e\u5907\u4efd\u65b9\u5f0f\u3002","title":"\u6570\u636e\u5907\u4efd"},{"location":"nebula-studio/about-studio/st-ug-limitations/#ngql","text":"\u9664\u4ee5\u4e0b\u5185\u5bb9\u5916\uff0c\u7528\u6237\u53ef\u4ee5\u5728 \u63a7\u5236\u53f0 \u4e0a\u6267\u884c\u6240\u6709 nGQL \u8bed\u53e5\uff1a USE <space_name> \uff1a\u53ea\u80fd\u5728 Space \u4e0b\u62c9\u5217\u8868\u4e2d\u9009\u62e9\u56fe\u7a7a\u95f4\uff0c\u4e0d\u80fd\u8fd0\u884c\u8fd9\u4e2a\u8bed\u53e5\u9009\u62e9\u56fe\u7a7a\u95f4\u3002 \u63a7\u5236\u53f0 \u4e0a\u4f7f\u7528 nGQL \u8bed\u53e5\u65f6\uff0c\u7528\u6237\u53ef\u4ee5\u76f4\u63a5\u56de\u8f66\u6362\u884c\uff0c\u4e0d\u80fd\u4f7f\u7528\u6362\u884c\u7b26\u3002","title":"nGQL \u652f\u6301"},{"location":"nebula-studio/about-studio/st-ug-limitations/#_5","text":"\u5efa\u8bae\u4f7f\u7528\u6700\u65b0\u7248\u672c\u7684 Chrome \u8bbf\u95ee Studio\u3002\u5426\u5219\u4f1a\u51fa\u73b0\u6837\u5f0f\u663e\u793a\u5f02\u5e38\u548c\u4ea4\u4e92\u5f02\u5e38\u7b49\u95ee\u9898\u3002","title":"\u6d4f\u89c8\u5668\u652f\u6301"},{"location":"nebula-studio/about-studio/st-ug-what-is-graph-studio/","text":"\u4ec0\u4e48\u662f NebulaGraph Studio \u00b6 NebulaGraph Studio\uff08\u7b80\u79f0 Studio\uff09\u662f\u4e00\u6b3e\u53ef\u4ee5\u901a\u8fc7 Web \u8bbf\u95ee\u7684\u5f00\u6e90\u56fe\u6570\u636e\u5e93\u53ef\u89c6\u5316\u5de5\u5177\uff0c\u642d\u914d NebulaGraph \u5185\u6838\u4f7f\u7528\uff0c\u63d0\u4f9b\u6784\u56fe\u3001\u6570\u636e\u5bfc\u5165\u3001\u7f16\u5199 nGQL \u67e5\u8be2\u7b49\u4e00\u7ad9\u5f0f\u670d\u52a1\u3002\u7528\u6237\u53ef\u4ee5\u5728NebulaGraph GitHub \u4ed3\u5e93\u4e2d\u67e5\u770b\u6700\u65b0\u6e90\u7801\uff0c\u8be6\u60c5\u53c2\u89c1 nebula-studio \u3002 Note \u7528\u6237\u53ef\u4ee5 \u5728\u7ebf\u8bd5\u7528 Studio \u90e8\u5206\u529f\u80fd\u3002\u4f01\u4e1a\u7248 NebulaGraph \u63d0\u4f9b\u529f\u80fd\u66f4\u5f3a\u5927\u7684\u53ef\u89c6\u5316\u5de5\u5177\uff0c\u70b9\u51fb \u514d\u8d39\u8bd5\u7528 \u5373\u53ef\u5728\u963f\u91cc\u4e91\u4e0a\u4f53\u9a8c\u3002 \u53d1\u884c\u7248\u672c \u00b6 \u7528\u6237\u53ef\u4ee5\u4f7f\u7528 RPM \u5305\u3001DEB \u5305\u3001tar \u5305\u548c Docker \u670d\u52a1\u5b89\u88c5\u90e8\u7f72 Studio\uff0c\u5728 Kubernetes \u96c6\u7fa4\u91cc\u8fd8\u652f\u6301\u4f7f\u7528 Helm \u5b89\u88c5\u90e8\u7f72 Studio\u3002\u8be6\u7ec6\u4fe1\u606f\u53c2\u8003 \u90e8\u7f72 Studio \u3002 \u51e0\u79cd\u90e8\u7f72\u65b9\u5f0f\u529f\u80fd\u57fa\u672c\u76f8\u540c\uff0c\u5728\u4f7f\u7528 Studio \u65f6\u53ef\u80fd\u4f1a\u53d7\u5230\u9650\u5236\u3002\u8be6\u7ec6\u4fe1\u606f\uff0c\u53c2\u8003 \u4f7f\u7528\u9650\u5236 \u3002 \u4ea7\u54c1\u529f\u80fd \u00b6 Studio \u53ef\u4ee5\u65b9\u4fbf\u7ba1\u7406NebulaGraph\u6570\u636e\uff0c\u5177\u5907\u4ee5\u4e0b\u529f\u80fd\uff1a \u4f7f\u7528 Schema \u7ba1\u7406\u529f\u80fd\uff0c\u7528\u6237\u53ef\u4ee5\u4f7f\u7528\u56fe\u5f62\u754c\u9762\u5b8c\u6210\u56fe\u7a7a\u95f4\u3001Tag\uff08\u6807\u7b7e\uff09\u3001Edge Type\uff08\u8fb9\u7c7b\u578b\uff09\u3001\u7d22\u5f15\u7684\u521b\u5efa\uff0c\u67e5\u770b\u56fe\u7a7a\u95f4\u7684\u7edf\u8ba1\u6570\u636e\uff0c\u5feb\u901f\u4e0a\u624bNebulaGraph\u3002 \u4f7f\u7528 \u5bfc\u5165 \u529f\u80fd\uff0c\u901a\u8fc7\u7b80\u5355\u7684\u914d\u7f6e\uff0c\u7528\u6237\u5373\u80fd\u6279\u91cf\u5bfc\u5165\u70b9\u548c\u8fb9\u6570\u636e\uff0c\u5e76\u80fd\u5b9e\u65f6\u67e5\u770b\u6570\u636e\u5bfc\u5165\u65e5\u5fd7\u3002 \u4f7f\u7528 \u63a7\u5236\u53f0 \u529f\u80fd\uff0c\u7528\u6237\u53ef\u4ee5\u4f7f\u7528 nGQL \u8bed\u53e5\u521b\u5efa Schema\uff0c\u5e76\u5bf9\u6570\u636e\u6267\u884c\u589e\u5220\u6539\u67e5\u64cd\u4f5c\u3002 \u9002\u7528\u573a\u666f \u00b6 \u5982\u679c\u6709\u4ee5\u4e0b\u4efb\u4e00\u9700\u6c42\uff0c\u90fd\u53ef\u4ee5\u4f7f\u7528 Studio\uff1a \u5df2\u7ecf\u5b89\u88c5\u90e8\u7f72\u4e86NebulaGraph\uff0c\u60f3\u4f7f\u7528 GUI \u5de5\u5177\u521b\u5efa Schema\u3001\u5bfc\u5165\u6570\u636e\u3001\u6267\u884c nGQL \u8bed\u53e5\u67e5\u8be2\u3002 \u521a\u5f00\u59cb\u5b66\u4e60 nGQL\uff08NebulaGraph Query Language\uff09\uff0c\u4f46\u662f\u4e0d\u4e60\u60ef\u7528\u547d\u4ee4\u884c\u5de5\u5177\uff0c\u66f4\u5e0c\u671b\u4f7f\u7528 GUI \u5de5\u5177\u67e5\u770b\u8bed\u53e5\u8f93\u51fa\u7684\u7ed3\u679c\u3002 \u8eab\u4efd\u9a8c\u8bc1 \u00b6 \u56e0\u4e3aNebulaGraph\u9ed8\u8ba4\u4e0d\u542f\u7528\u8eab\u4efd\u9a8c\u8bc1\uff0c\u6240\u4ee5\u7528\u6237\u53ef\u4ee5\u4f7f\u7528 root \u8d26\u53f7\u548c\u4efb\u610f\u5bc6\u7801\u767b\u5f55 Studio\u3002 \u5f53NebulaGraph\u542f\u7528\u4e86\u8eab\u4efd\u9a8c\u8bc1\u540e\uff0c\u7528\u6237\u53ea\u80fd\u4f7f\u7528\u6307\u5b9a\u7684\u8d26\u53f7\u548c\u5bc6\u7801\u767b\u5f55 Studio\u3002\u5173\u4e8eNebulaGraph\u7684\u8eab\u4efd\u9a8c\u8bc1\u529f\u80fd\uff0c\u53c2\u8003 \u8eab\u4efd\u9a8c\u8bc1 \u3002 \u7248\u672c\u517c\u5bb9\u6027 \u00b6 Note Studio \u7248\u672c\u53d1\u5e03\u8282\u594f\u72ec\u7acb\u4e8eNebulaGraph\u5185\u6838\uff0c\u5176\u547d\u540d\u65b9\u5f0f\u4e5f\u4e0d\u53c2\u7167\u5185\u6838\u547d\u540d\u89c4\u5219\uff0c\u4e24\u8005\u517c\u5bb9\u5bf9\u5e94\u5173\u7cfb\u5982\u4e0b\u8868\u3002 NebulaGraph\u7248\u672c Studio \u7248\u672c 3.6.0 3.8.0\u30013.7.0 3.5.x 3.7.0 3.4.0 ~ 3.4.1 3.7.0\u30013.6.0\u30013.5.1\u30013.5.0 3.3.0 3.5.1\u30013.5.0 3.0.0 \uff5e 3.2.x 3.4.1\u30013.4.0 3.1.0 3.3.2 3.0.0 3.2.x 2.6.x 3.1.x 2.6.x 3.1.x 2.0 & 2.0.1 2.x 1.x 1.x \u7248\u672c\u66f4\u65b0 \u00b6 Studio \u5904\u4e8e\u6301\u7eed\u5f00\u53d1\u72b6\u6001\u4e2d\u3002\u7528\u6237\u53ef\u4ee5\u901a\u8fc7 Studio \u7248\u672c\u66f4\u65b0\u8bf4\u660e \u67e5\u770b\u6700\u65b0\u53d1\u5e03\u7684\u529f\u80fd\u3002 \u6210\u529f\u8fde\u63a5 Studio \u540e\uff0c\u7528\u6237\u53ef\u4ee5\u5728\u9875\u9762\u53f3\u4e0a\u89d2\u70b9\u51fb\u7528\u6237\u5934\u50cf\uff0c\u518d\u70b9\u51fb \u66f4\u65b0\u65e5\u5fd7 \uff0c\u67e5\u770b Studio \u7684\u7248\u672c\u66f4\u65b0\u8bf4\u660e\u3002","title":"\u4ec0\u4e48\u662f NebulaGraph Studio"},{"location":"nebula-studio/about-studio/st-ug-what-is-graph-studio/#nebulagraph_studio","text":"NebulaGraph Studio\uff08\u7b80\u79f0 Studio\uff09\u662f\u4e00\u6b3e\u53ef\u4ee5\u901a\u8fc7 Web \u8bbf\u95ee\u7684\u5f00\u6e90\u56fe\u6570\u636e\u5e93\u53ef\u89c6\u5316\u5de5\u5177\uff0c\u642d\u914d NebulaGraph \u5185\u6838\u4f7f\u7528\uff0c\u63d0\u4f9b\u6784\u56fe\u3001\u6570\u636e\u5bfc\u5165\u3001\u7f16\u5199 nGQL \u67e5\u8be2\u7b49\u4e00\u7ad9\u5f0f\u670d\u52a1\u3002\u7528\u6237\u53ef\u4ee5\u5728NebulaGraph GitHub \u4ed3\u5e93\u4e2d\u67e5\u770b\u6700\u65b0\u6e90\u7801\uff0c\u8be6\u60c5\u53c2\u89c1 nebula-studio \u3002 Note \u7528\u6237\u53ef\u4ee5 \u5728\u7ebf\u8bd5\u7528 Studio \u90e8\u5206\u529f\u80fd\u3002\u4f01\u4e1a\u7248 NebulaGraph \u63d0\u4f9b\u529f\u80fd\u66f4\u5f3a\u5927\u7684\u53ef\u89c6\u5316\u5de5\u5177\uff0c\u70b9\u51fb \u514d\u8d39\u8bd5\u7528 \u5373\u53ef\u5728\u963f\u91cc\u4e91\u4e0a\u4f53\u9a8c\u3002","title":"\u4ec0\u4e48\u662f NebulaGraph Studio"},{"location":"nebula-studio/about-studio/st-ug-what-is-graph-studio/#_1","text":"\u7528\u6237\u53ef\u4ee5\u4f7f\u7528 RPM \u5305\u3001DEB \u5305\u3001tar \u5305\u548c Docker \u670d\u52a1\u5b89\u88c5\u90e8\u7f72 Studio\uff0c\u5728 Kubernetes \u96c6\u7fa4\u91cc\u8fd8\u652f\u6301\u4f7f\u7528 Helm \u5b89\u88c5\u90e8\u7f72 Studio\u3002\u8be6\u7ec6\u4fe1\u606f\u53c2\u8003 \u90e8\u7f72 Studio \u3002 \u51e0\u79cd\u90e8\u7f72\u65b9\u5f0f\u529f\u80fd\u57fa\u672c\u76f8\u540c\uff0c\u5728\u4f7f\u7528 Studio \u65f6\u53ef\u80fd\u4f1a\u53d7\u5230\u9650\u5236\u3002\u8be6\u7ec6\u4fe1\u606f\uff0c\u53c2\u8003 \u4f7f\u7528\u9650\u5236 \u3002","title":"\u53d1\u884c\u7248\u672c"},{"location":"nebula-studio/about-studio/st-ug-what-is-graph-studio/#_2","text":"Studio \u53ef\u4ee5\u65b9\u4fbf\u7ba1\u7406NebulaGraph\u6570\u636e\uff0c\u5177\u5907\u4ee5\u4e0b\u529f\u80fd\uff1a \u4f7f\u7528 Schema \u7ba1\u7406\u529f\u80fd\uff0c\u7528\u6237\u53ef\u4ee5\u4f7f\u7528\u56fe\u5f62\u754c\u9762\u5b8c\u6210\u56fe\u7a7a\u95f4\u3001Tag\uff08\u6807\u7b7e\uff09\u3001Edge Type\uff08\u8fb9\u7c7b\u578b\uff09\u3001\u7d22\u5f15\u7684\u521b\u5efa\uff0c\u67e5\u770b\u56fe\u7a7a\u95f4\u7684\u7edf\u8ba1\u6570\u636e\uff0c\u5feb\u901f\u4e0a\u624bNebulaGraph\u3002 \u4f7f\u7528 \u5bfc\u5165 \u529f\u80fd\uff0c\u901a\u8fc7\u7b80\u5355\u7684\u914d\u7f6e\uff0c\u7528\u6237\u5373\u80fd\u6279\u91cf\u5bfc\u5165\u70b9\u548c\u8fb9\u6570\u636e\uff0c\u5e76\u80fd\u5b9e\u65f6\u67e5\u770b\u6570\u636e\u5bfc\u5165\u65e5\u5fd7\u3002 \u4f7f\u7528 \u63a7\u5236\u53f0 \u529f\u80fd\uff0c\u7528\u6237\u53ef\u4ee5\u4f7f\u7528 nGQL \u8bed\u53e5\u521b\u5efa Schema\uff0c\u5e76\u5bf9\u6570\u636e\u6267\u884c\u589e\u5220\u6539\u67e5\u64cd\u4f5c\u3002","title":"\u4ea7\u54c1\u529f\u80fd"},{"location":"nebula-studio/about-studio/st-ug-what-is-graph-studio/#_3","text":"\u5982\u679c\u6709\u4ee5\u4e0b\u4efb\u4e00\u9700\u6c42\uff0c\u90fd\u53ef\u4ee5\u4f7f\u7528 Studio\uff1a \u5df2\u7ecf\u5b89\u88c5\u90e8\u7f72\u4e86NebulaGraph\uff0c\u60f3\u4f7f\u7528 GUI \u5de5\u5177\u521b\u5efa Schema\u3001\u5bfc\u5165\u6570\u636e\u3001\u6267\u884c nGQL \u8bed\u53e5\u67e5\u8be2\u3002 \u521a\u5f00\u59cb\u5b66\u4e60 nGQL\uff08NebulaGraph Query Language\uff09\uff0c\u4f46\u662f\u4e0d\u4e60\u60ef\u7528\u547d\u4ee4\u884c\u5de5\u5177\uff0c\u66f4\u5e0c\u671b\u4f7f\u7528 GUI \u5de5\u5177\u67e5\u770b\u8bed\u53e5\u8f93\u51fa\u7684\u7ed3\u679c\u3002","title":"\u9002\u7528\u573a\u666f"},{"location":"nebula-studio/about-studio/st-ug-what-is-graph-studio/#_4","text":"\u56e0\u4e3aNebulaGraph\u9ed8\u8ba4\u4e0d\u542f\u7528\u8eab\u4efd\u9a8c\u8bc1\uff0c\u6240\u4ee5\u7528\u6237\u53ef\u4ee5\u4f7f\u7528 root \u8d26\u53f7\u548c\u4efb\u610f\u5bc6\u7801\u767b\u5f55 Studio\u3002 \u5f53NebulaGraph\u542f\u7528\u4e86\u8eab\u4efd\u9a8c\u8bc1\u540e\uff0c\u7528\u6237\u53ea\u80fd\u4f7f\u7528\u6307\u5b9a\u7684\u8d26\u53f7\u548c\u5bc6\u7801\u767b\u5f55 Studio\u3002\u5173\u4e8eNebulaGraph\u7684\u8eab\u4efd\u9a8c\u8bc1\u529f\u80fd\uff0c\u53c2\u8003 \u8eab\u4efd\u9a8c\u8bc1 \u3002","title":"\u8eab\u4efd\u9a8c\u8bc1"},{"location":"nebula-studio/about-studio/st-ug-what-is-graph-studio/#_5","text":"Note Studio \u7248\u672c\u53d1\u5e03\u8282\u594f\u72ec\u7acb\u4e8eNebulaGraph\u5185\u6838\uff0c\u5176\u547d\u540d\u65b9\u5f0f\u4e5f\u4e0d\u53c2\u7167\u5185\u6838\u547d\u540d\u89c4\u5219\uff0c\u4e24\u8005\u517c\u5bb9\u5bf9\u5e94\u5173\u7cfb\u5982\u4e0b\u8868\u3002 NebulaGraph\u7248\u672c Studio \u7248\u672c 3.6.0 3.8.0\u30013.7.0 3.5.x 3.7.0 3.4.0 ~ 3.4.1 3.7.0\u30013.6.0\u30013.5.1\u30013.5.0 3.3.0 3.5.1\u30013.5.0 3.0.0 \uff5e 3.2.x 3.4.1\u30013.4.0 3.1.0 3.3.2 3.0.0 3.2.x 2.6.x 3.1.x 2.6.x 3.1.x 2.0 & 2.0.1 2.x 1.x 1.x","title":"\u7248\u672c\u517c\u5bb9\u6027"},{"location":"nebula-studio/about-studio/st-ug-what-is-graph-studio/#_6","text":"Studio \u5904\u4e8e\u6301\u7eed\u5f00\u53d1\u72b6\u6001\u4e2d\u3002\u7528\u6237\u53ef\u4ee5\u901a\u8fc7 Studio \u7248\u672c\u66f4\u65b0\u8bf4\u660e \u67e5\u770b\u6700\u65b0\u53d1\u5e03\u7684\u529f\u80fd\u3002 \u6210\u529f\u8fde\u63a5 Studio \u540e\uff0c\u7528\u6237\u53ef\u4ee5\u5728\u9875\u9762\u53f3\u4e0a\u89d2\u70b9\u51fb\u7528\u6237\u5934\u50cf\uff0c\u518d\u70b9\u51fb \u66f4\u65b0\u65e5\u5fd7 \uff0c\u67e5\u770b Studio \u7684\u7248\u672c\u66f4\u65b0\u8bf4\u660e\u3002","title":"\u7248\u672c\u66f4\u65b0"},{"location":"nebula-studio/deploy-connect/st-ug-connect/","text":"\u8fde\u63a5\u6570\u636e\u5e93 \u00b6 \u5728\u6210\u529f\u542f\u52a8 Studio \u540e\uff0c\u7528\u6237\u9700\u8981\u914d\u7f6e\u8fde\u63a5NebulaGraph\u3002\u672c\u6587\u4e3b\u8981\u63cf\u8ff0 Studio \u5982\u4f55\u8fde\u63a5NebulaGraph\u3002 \u524d\u63d0\u6761\u4ef6 \u00b6 \u5728\u8fde\u63a5NebulaGraph\u6570\u636e\u5e93\u524d\uff0c\u7528\u6237\u9700\u8981\u786e\u8ba4\u4ee5\u4e0b\u4fe1\u606f\uff1a Studio \u5df2\u7ecf\u542f\u52a8\u3002\u8be6\u7ec6\u4fe1\u606f\u53c2\u8003 \u90e8\u7f72 Studio \u3002 NebulaGraph\u7684 Graph \u670d\u52a1\u672c\u673a IP \u5730\u5740\u4ee5\u53ca\u670d\u52a1\u6240\u7528\u7aef\u53e3\u3002\u9ed8\u8ba4\u7aef\u53e3\u4e3a 9669 \u3002 NebulaGraph\u767b\u5f55\u8d26\u53f7\u4fe1\u606f\uff0c\u5305\u62ec\u7528\u6237\u540d\u548c\u5bc6\u7801\u3002 \u64cd\u4f5c\u6b65\u9aa4 \u00b6 \u6309\u4ee5\u4e0b\u6b65\u9aa4\u8fde\u63a5NebulaGraph\uff1a \u5728\u6d4f\u89c8\u5668\u5730\u5740\u680f\u8f93\u5165 http://<ip_address>:7001 \u3002 \u5728\u6d4f\u89c8\u5668\u7a97\u53e3\u4e2d\u770b\u5230\u4ee5\u4e0b\u767b\u5f55\u754c\u9762\u8868\u793a\u5df2\u7ecf\u6210\u529f\u90e8\u7f72\u5e76\u542f\u52a8\u4e86 Studio\u3002 \u5728 Studio \u7684 \u914d\u7f6e\u6570\u636e\u5e93 \u9875\u9762\u4e0a\uff0c\u8f93\u5165\u4ee5\u4e0b\u4fe1\u606f\uff1a Graphd IP \u5730\u5740 \uff1a\u586b\u5199NebulaGraph\u7684 Graph \u670d\u52a1\u672c\u673a IP \u5730\u5740\u3002\u4f8b\u5982 192.168.10.100 \u3002 Note \u5373\u4f7fNebulaGraph\u4e0e Studio \u90e8\u7f72\u5728\u540c\u4e00\u53f0\u673a\u5668\u4e0a\uff0c\u7528\u6237\u4e5f\u5fc5\u987b\u586b\u5199\u8fd9\u53f0\u673a\u5668\u7684\u672c\u673a IP \u5730\u5740\uff0c\u800c\u4e0d\u662f 127.0.0.1 \u6216\u8005 localhost \u3002 \u5728\u65b0\u7684\u6807\u7b7e\u9875\u8fde\u63a5\u53e6\u4e00\u4e2aNebulaGraph\u65f6\uff0c\u4f1a\u8986\u76d6\u65e7\u6807\u7b7e\u9875\u7684\u4f1a\u8bdd\u3002\u5982\u679c\u9700\u8981\u540c\u65f6\u767b\u5f55\u591a\u4e2aNebulaGraph\uff0c\u53ef\u4ee5\u7528\u4e0d\u540c\u7684\u6d4f\u89c8\u5668\u6216\u8005\u65e0\u75d5\u6a21\u5f0f\u3002 Port \uff1aGraphd \u670d\u52a1\u7684\u7aef\u53e3\u3002\u9ed8\u8ba4\u4e3a 9669 \u3002 \u7528\u6237\u540d \u548c \u5bc6\u7801 \uff1a\u6839\u636eNebulaGraph\u7684\u8eab\u4efd\u9a8c\u8bc1\u8bbe\u7f6e\u586b\u5199\u767b\u5f55\u8d26\u53f7\u548c\u5bc6\u7801\u3002 \u5982\u679c\u672a\u542f\u7528\u8eab\u4efd\u9a8c\u8bc1\uff0c\u53ef\u4ee5\u586b\u5199\u9ed8\u8ba4\u7528\u6237\u540d root \u548c\u4efb\u610f\u5bc6\u7801\u3002 \u5982\u679c\u5df2\u542f\u7528\u8eab\u4efd\u9a8c\u8bc1\uff0c\u4f46\u662f\u672a\u521b\u5efa\u8d26\u53f7\u4fe1\u606f\uff0c\u7528\u6237\u53ea\u80fd\u4ee5 GOD \u89d2\u8272\u767b\u5f55\uff0c\u5fc5\u987b\u586b\u5199 root \u53ca\u5bf9\u5e94\u7684\u5bc6\u7801 nebula \u3002 \u5982\u679c\u5df2\u542f\u7528\u8eab\u4efd\u9a8c\u8bc1\uff0c\u540c\u65f6\u53c8\u521b\u5efa\u4e86\u4e0d\u540c\u7684\u7528\u6237\u5e76\u5206\u914d\u4e86\u89d2\u8272\uff0c\u4e0d\u540c\u89d2\u8272\u7684\u7528\u6237\u4f7f\u7528\u81ea\u5df1\u7684\u8d26\u53f7\u548c\u5bc6\u7801\u767b\u5f55\u3002 \u5b8c\u6210\u8bbe\u7f6e\u540e\uff0c\u70b9\u51fb \u8fde\u63a5 \u6309\u94ae\u3002 Note \u4e00\u6b21\u8fde\u63a5\u4f1a\u8bdd\u6301\u7eed 30 \u5206\u949f\u3002\u5982\u679c\u8d85\u8fc7 30 \u5206\u949f\u6ca1\u6709\u64cd\u4f5c\uff0c\u4f1a\u8bdd\u5373\u65ad\u5f00\uff0c\u7528\u6237\u9700\u8981\u91cd\u65b0\u767b\u5f55\u6570\u636e\u5e93\u3002 \u9996\u6b21\u767b\u5f55\u4f1a\u663e\u793a\u6b22\u8fce\u9875\uff0c\u6839\u636e\u4f7f\u7528\u6d41\u7a0b\u5c55\u793a\u76f8\u5173\u529f\u80fd\uff0c\u5e76\u4e14\u652f\u6301\u81ea\u52a8\u4e0b\u8f7d\u5e76\u5bfc\u5165\u6d4b\u8bd5\u6570\u636e\u96c6\u3002 \u60f3\u8981\u518d\u6b21\u8bbf\u95ee\u6b22\u8fce\u9875\uff0c\u5355\u51fb \u3002 \u540e\u7eed\u64cd\u4f5c \u00b6 \u6210\u529f\u8fde\u63a5NebulaGraph\u540e\uff0c\u7528\u6237\u53ef\u4ee5\u6267\u884c\u4ee5\u4e0b\u64cd\u4f5c\uff1a \u4f7f\u7528 \u63a7\u5236\u53f0 \u6216\u8005 Schema \u9875\u9762\u7ba1\u7406 Schema\u3002 \u6279\u91cf\u5bfc\u5165\u6570\u636e \u3002 \u5728 \u63a7\u5236\u53f0 \u9875\u9762\u4e0a\u6267\u884c nGQL \u8bed\u53e5\u67e5\u8be2\u6570\u636e\u3002 \u5728 Schema \u8349\u56fe \u9875\u9762\u56fe\u5f62\u5316\u8bbe\u8ba1 Schema\u3002 Note \u8d26\u53f7\u7684\u6743\u9650\u51b3\u5b9a\u4e86\u80fd\u6267\u884c\u54ea\u4e9b\u64cd\u4f5c\u3002\u8be6\u60c5\u53c2\u89c1 \u5185\u7f6e\u89d2\u8272\u6743\u9650 \u3002 \u767b\u51fa \u00b6 \u5982\u679c\u9700\u8981\u91cd\u65b0\u8fde\u63a5NebulaGraph\uff0c\u53ef\u4ee5\u767b\u51fa\u540e\u91cd\u65b0\u914d\u7f6e\u6570\u636e\u5e93\u3002 \u5728\u9875\u9762\u53f3\u4e0a\u89d2\u5355\u51fb\u7528\u6237\u5934\u50cf\uff0c\u5355\u51fb \u767b\u51fa \u3002","title":"\u8fde\u63a5\u6570\u636e\u5e93"},{"location":"nebula-studio/deploy-connect/st-ug-connect/#_1","text":"\u5728\u6210\u529f\u542f\u52a8 Studio \u540e\uff0c\u7528\u6237\u9700\u8981\u914d\u7f6e\u8fde\u63a5NebulaGraph\u3002\u672c\u6587\u4e3b\u8981\u63cf\u8ff0 Studio \u5982\u4f55\u8fde\u63a5NebulaGraph\u3002","title":"\u8fde\u63a5\u6570\u636e\u5e93"},{"location":"nebula-studio/deploy-connect/st-ug-connect/#_2","text":"\u5728\u8fde\u63a5NebulaGraph\u6570\u636e\u5e93\u524d\uff0c\u7528\u6237\u9700\u8981\u786e\u8ba4\u4ee5\u4e0b\u4fe1\u606f\uff1a Studio \u5df2\u7ecf\u542f\u52a8\u3002\u8be6\u7ec6\u4fe1\u606f\u53c2\u8003 \u90e8\u7f72 Studio \u3002 NebulaGraph\u7684 Graph \u670d\u52a1\u672c\u673a IP \u5730\u5740\u4ee5\u53ca\u670d\u52a1\u6240\u7528\u7aef\u53e3\u3002\u9ed8\u8ba4\u7aef\u53e3\u4e3a 9669 \u3002 NebulaGraph\u767b\u5f55\u8d26\u53f7\u4fe1\u606f\uff0c\u5305\u62ec\u7528\u6237\u540d\u548c\u5bc6\u7801\u3002","title":"\u524d\u63d0\u6761\u4ef6"},{"location":"nebula-studio/deploy-connect/st-ug-connect/#_3","text":"\u6309\u4ee5\u4e0b\u6b65\u9aa4\u8fde\u63a5NebulaGraph\uff1a \u5728\u6d4f\u89c8\u5668\u5730\u5740\u680f\u8f93\u5165 http://<ip_address>:7001 \u3002 \u5728\u6d4f\u89c8\u5668\u7a97\u53e3\u4e2d\u770b\u5230\u4ee5\u4e0b\u767b\u5f55\u754c\u9762\u8868\u793a\u5df2\u7ecf\u6210\u529f\u90e8\u7f72\u5e76\u542f\u52a8\u4e86 Studio\u3002 \u5728 Studio \u7684 \u914d\u7f6e\u6570\u636e\u5e93 \u9875\u9762\u4e0a\uff0c\u8f93\u5165\u4ee5\u4e0b\u4fe1\u606f\uff1a Graphd IP \u5730\u5740 \uff1a\u586b\u5199NebulaGraph\u7684 Graph \u670d\u52a1\u672c\u673a IP \u5730\u5740\u3002\u4f8b\u5982 192.168.10.100 \u3002 Note \u5373\u4f7fNebulaGraph\u4e0e Studio \u90e8\u7f72\u5728\u540c\u4e00\u53f0\u673a\u5668\u4e0a\uff0c\u7528\u6237\u4e5f\u5fc5\u987b\u586b\u5199\u8fd9\u53f0\u673a\u5668\u7684\u672c\u673a IP \u5730\u5740\uff0c\u800c\u4e0d\u662f 127.0.0.1 \u6216\u8005 localhost \u3002 \u5728\u65b0\u7684\u6807\u7b7e\u9875\u8fde\u63a5\u53e6\u4e00\u4e2aNebulaGraph\u65f6\uff0c\u4f1a\u8986\u76d6\u65e7\u6807\u7b7e\u9875\u7684\u4f1a\u8bdd\u3002\u5982\u679c\u9700\u8981\u540c\u65f6\u767b\u5f55\u591a\u4e2aNebulaGraph\uff0c\u53ef\u4ee5\u7528\u4e0d\u540c\u7684\u6d4f\u89c8\u5668\u6216\u8005\u65e0\u75d5\u6a21\u5f0f\u3002 Port \uff1aGraphd \u670d\u52a1\u7684\u7aef\u53e3\u3002\u9ed8\u8ba4\u4e3a 9669 \u3002 \u7528\u6237\u540d \u548c \u5bc6\u7801 \uff1a\u6839\u636eNebulaGraph\u7684\u8eab\u4efd\u9a8c\u8bc1\u8bbe\u7f6e\u586b\u5199\u767b\u5f55\u8d26\u53f7\u548c\u5bc6\u7801\u3002 \u5982\u679c\u672a\u542f\u7528\u8eab\u4efd\u9a8c\u8bc1\uff0c\u53ef\u4ee5\u586b\u5199\u9ed8\u8ba4\u7528\u6237\u540d root \u548c\u4efb\u610f\u5bc6\u7801\u3002 \u5982\u679c\u5df2\u542f\u7528\u8eab\u4efd\u9a8c\u8bc1\uff0c\u4f46\u662f\u672a\u521b\u5efa\u8d26\u53f7\u4fe1\u606f\uff0c\u7528\u6237\u53ea\u80fd\u4ee5 GOD \u89d2\u8272\u767b\u5f55\uff0c\u5fc5\u987b\u586b\u5199 root \u53ca\u5bf9\u5e94\u7684\u5bc6\u7801 nebula \u3002 \u5982\u679c\u5df2\u542f\u7528\u8eab\u4efd\u9a8c\u8bc1\uff0c\u540c\u65f6\u53c8\u521b\u5efa\u4e86\u4e0d\u540c\u7684\u7528\u6237\u5e76\u5206\u914d\u4e86\u89d2\u8272\uff0c\u4e0d\u540c\u89d2\u8272\u7684\u7528\u6237\u4f7f\u7528\u81ea\u5df1\u7684\u8d26\u53f7\u548c\u5bc6\u7801\u767b\u5f55\u3002 \u5b8c\u6210\u8bbe\u7f6e\u540e\uff0c\u70b9\u51fb \u8fde\u63a5 \u6309\u94ae\u3002 Note \u4e00\u6b21\u8fde\u63a5\u4f1a\u8bdd\u6301\u7eed 30 \u5206\u949f\u3002\u5982\u679c\u8d85\u8fc7 30 \u5206\u949f\u6ca1\u6709\u64cd\u4f5c\uff0c\u4f1a\u8bdd\u5373\u65ad\u5f00\uff0c\u7528\u6237\u9700\u8981\u91cd\u65b0\u767b\u5f55\u6570\u636e\u5e93\u3002 \u9996\u6b21\u767b\u5f55\u4f1a\u663e\u793a\u6b22\u8fce\u9875\uff0c\u6839\u636e\u4f7f\u7528\u6d41\u7a0b\u5c55\u793a\u76f8\u5173\u529f\u80fd\uff0c\u5e76\u4e14\u652f\u6301\u81ea\u52a8\u4e0b\u8f7d\u5e76\u5bfc\u5165\u6d4b\u8bd5\u6570\u636e\u96c6\u3002 \u60f3\u8981\u518d\u6b21\u8bbf\u95ee\u6b22\u8fce\u9875\uff0c\u5355\u51fb \u3002","title":"\u64cd\u4f5c\u6b65\u9aa4"},{"location":"nebula-studio/deploy-connect/st-ug-connect/#_4","text":"\u6210\u529f\u8fde\u63a5NebulaGraph\u540e\uff0c\u7528\u6237\u53ef\u4ee5\u6267\u884c\u4ee5\u4e0b\u64cd\u4f5c\uff1a \u4f7f\u7528 \u63a7\u5236\u53f0 \u6216\u8005 Schema \u9875\u9762\u7ba1\u7406 Schema\u3002 \u6279\u91cf\u5bfc\u5165\u6570\u636e \u3002 \u5728 \u63a7\u5236\u53f0 \u9875\u9762\u4e0a\u6267\u884c nGQL \u8bed\u53e5\u67e5\u8be2\u6570\u636e\u3002 \u5728 Schema \u8349\u56fe \u9875\u9762\u56fe\u5f62\u5316\u8bbe\u8ba1 Schema\u3002 Note \u8d26\u53f7\u7684\u6743\u9650\u51b3\u5b9a\u4e86\u80fd\u6267\u884c\u54ea\u4e9b\u64cd\u4f5c\u3002\u8be6\u60c5\u53c2\u89c1 \u5185\u7f6e\u89d2\u8272\u6743\u9650 \u3002","title":"\u540e\u7eed\u64cd\u4f5c"},{"location":"nebula-studio/deploy-connect/st-ug-connect/#_5","text":"\u5982\u679c\u9700\u8981\u91cd\u65b0\u8fde\u63a5NebulaGraph\uff0c\u53ef\u4ee5\u767b\u51fa\u540e\u91cd\u65b0\u914d\u7f6e\u6570\u636e\u5e93\u3002 \u5728\u9875\u9762\u53f3\u4e0a\u89d2\u5355\u51fb\u7528\u6237\u5934\u50cf\uff0c\u5355\u51fb \u767b\u51fa \u3002","title":"\u767b\u51fa"},{"location":"nebula-studio/deploy-connect/st-ug-deploy/","text":"\u90e8\u7f72 Studio \u00b6 \u672c\u6587\u4ecb\u7ecd\u5982\u4f55\u5728\u672c\u5730\u901a\u8fc7 RPM\u3001DEB\u3001tar \u5305\u548c Docker \u90e8\u7f72 Studio\u3002 RPM \u90e8\u7f72 Studio \u00b6 \u524d\u63d0\u6761\u4ef6 \u00b6 \u5728\u90e8\u7f72 RPM \u7248 Studio \u4e4b\u524d\uff0c\u7528\u6237\u9700\u8981\u786e\u8ba4\u4ee5\u4e0b\u4fe1\u606f\uff1a NebulaGraph\u670d\u52a1\u5df2\u7ecf\u90e8\u7f72\u5e76\u542f\u52a8\u3002\u8be6\u7ec6\u4fe1\u606f\uff0c\u53c2\u8003 NebulaGraph\u5b89\u88c5\u90e8\u7f72 \u3002 \u4f7f\u7528\u7684 Linux \u53d1\u884c\u7248\u4e3a CentOS \uff0c\u5df2\u5b89\u88c5 lsof\u3002 \u786e\u4fdd\u4ee5\u4e0b\u7aef\u53e3\u672a\u88ab\u5360\u7528\u3002 \u7aef\u53e3\u53f7 \u8bf4\u660e 7001 Studio \u63d0\u4f9b web \u670d\u52a1\u4f7f\u7528\u3002 \u5b89\u88c5 \u00b6 \u6839\u636e\u9700\u8981\u9009\u62e9\u5e76\u4e0b\u8f7d RPM \u5305\uff0c\u5efa\u8bae\u9009\u62e9\u6700\u65b0\u7248\u672c\u3002\u5e38\u7528\u4e0b\u8f7d\u94fe\u63a5\u5982\u4e0b\uff1a \u5b89\u88c5\u5305 \u68c0\u9a8c\u548c \u9002\u7528NebulaGraph\u7248\u672c nebula-graph-studio-3.8.0.x86_64.rpm nebula-graph-studio-3.8.0.x86_64.rpm.sha256 3.6.0 \u4f7f\u7528 sudo rpm -i <rpm_name> \u547d\u4ee4\u5b89\u88c5 RPM \u5305\u3002 \u4f8b\u5982\uff0c\u5b89\u88c5 Studio 3.8.0 \u7248\u672c\u9700\u8981\u8fd0\u884c\u4ee5\u4e0b\u547d\u4ee4\uff0c\u9ed8\u8ba4\u5b89\u88c5\u8def\u5f84\u4e3a /usr/local/nebula-graph-studio \uff1a $ sudo rpm -i nebula-graph-studio-3.8.0.x86_64.rpm \u4e5f\u53ef\u4ee5\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\u5b89\u88c5\u5230\u6307\u5b9a\u8def\u5f84\uff1a $ sudo rpm -i nebula-graph-studio-3.8.0.x86_64.rpm --prefix = <path> \u5f53\u5c4f\u5e55\u8fd4\u56de\u4ee5\u4e0b\u4fe1\u606f\u65f6\uff0c\u8868\u793a PRM \u7248 Studio \u5df2\u7ecf\u6210\u529f\u542f\u52a8\u3002 Start installing NebulaGraph Studio now... NebulaGraph Studio has been installed. NebulaGraph Studio started automatically. \u542f\u52a8\u6210\u529f\u540e\uff0c\u5728\u6d4f\u89c8\u5668\u5730\u5740\u680f\u8f93\u5165 http://<ip address>:7001 \u3002 \u5982\u679c\u5728\u6d4f\u89c8\u5668\u7a97\u53e3\u4e2d\u80fd\u770b\u5230\u4ee5\u4e0b\u767b\u5f55\u754c\u9762\uff0c\u8868\u793a\u5df2\u7ecf\u6210\u529f\u90e8\u7f72\u5e76\u542f\u52a8 Studio\u3002 \u5378\u8f7d \u00b6 \u7528\u6237\u53ef\u4ee5\u4f7f\u7528\u4ee5\u4e0b\u7684\u547d\u4ee4\u5378\u8f7d Studio\u3002 $ sudo rpm -e nebula-graph-studio-3.8.0.x86_64 \u5f53\u5c4f\u5e55\u8fd4\u56de\u4ee5\u4e0b\u4fe1\u606f\u65f6\uff0c\u8868\u793a PRM \u7248 Studio \u5df2\u7ecf\u5378\u8f7d\u3002 NebulaGraph Studio removed, bye~ \u5f02\u5e38\u5904\u7406 \u00b6 \u5982\u679c\u5728\u5b89\u88c5\u8fc7\u7a0b\u4e2d\u81ea\u52a8\u542f\u52a8\u5931\u8d25\u6216\u662f\u9700\u8981\u624b\u52a8\u542f\u52a8\u6216\u505c\u6b62\u670d\u52a1\uff0c\u8bf7\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\uff1a \u624b\u52a8\u542f\u52a8\u670d\u52a1 $ bash /usr/local/nebula-graph-studio/scripts/rpm/start.sh \u624b\u52a8\u505c\u6b62\u670d\u52a1 $ bash /usr/local/nebula-graph-studio/scripts/rpm/stop.sh \u5982\u679c\u542f\u52a8\u670d\u52a1\u65f6\u9047\u5230\u62a5\u9519 ERROR: bind EADDRINUSE 0.0.0.0:7001 \uff0c\u7528\u6237\u53ef\u4ee5\u901a\u8fc7\u4ee5\u4e0b\u547d\u4ee4\u67e5\u770b\u7aef\u53e3 7001 \u662f\u5426\u88ab\u5360\u7528\u3002 $ lsof -i:7001 \u5982\u679c\u7aef\u53e3\u88ab\u5360\u7528\uff0c\u4e14\u65e0\u6cd5\u7ed3\u675f\u8be5\u7aef\u53e3\u4e0a\u8fdb\u7a0b\uff0c\u7528\u6237\u53ef\u4ee5\u4fee\u6539 studio \u914d\u7f6e\u5185\u7684\u542f\u52a8\u7aef\u53e3\uff0c\u5e76\u91cd\u65b0\u542f\u52a8\u670d\u52a1\u3002 //\u4fee\u6539 studio \u670d\u52a1\u914d\u7f6e\u3002\u914d\u7f6e\u6587\u4ef6\u9ed8\u8ba4\u8def\u5f84\u4e3a ` /usr/local/nebula-graph-studio ` \u3002 $ vi etc/studio-api.yaml //\u4fee\u6539\u7aef\u53e3\u53f7\uff0c\u6539\u6210\u4efb\u610f\u4e00\u4e2a\u5f53\u524d\u53ef\u7528\u7684\u5373\u53ef\u3002 Port: 7001 //\u91cd\u542f\u670d\u52a1 $ systemctl restart nebula-graph-studio.service DEB \u90e8\u7f72 Studio \u00b6 \u524d\u63d0\u6761\u4ef6 \u00b6 \u5728\u901a\u8fc7 DEB \u90e8\u7f72\u5b89\u88c5 Studio \u4e4b\u524d\uff0c\u7528\u6237\u9700\u8981\u786e\u8ba4\u4ee5\u4e0b\u4fe1\u606f\uff1a NebulaGraph\u670d\u52a1\u5df2\u7ecf\u90e8\u7f72\u5e76\u542f\u52a8\u3002\u8be6\u7ec6\u4fe1\u606f\uff0c\u53c2\u8003 NebulaGraph\u5b89\u88c5\u90e8\u7f72 \u3002 \u4f7f\u7528\u7684 Linux \u53d1\u884c\u7248\u4e3a Ubuntu\u3002 \u786e\u4fdd\u4ee5\u4e0b\u7aef\u53e3\u672a\u88ab\u5360\u7528\u3002 \u7aef\u53e3\u53f7 \u8bf4\u660e 7001 Studio \u63d0\u4f9b\u7684 web \u670d\u52a1 \u786e\u4fdd\u7cfb\u7edf\u4e2d\u5b58\u5728 /usr/lib/systemd/system \u76ee\u5f55\u3002\u5982\u6ca1\u6709\u8be5\u76ee\u5f55\uff0c\u9700\u624b\u52a8\u521b\u5efa\u3002 \u5b89\u88c5 \u00b6 \u6839\u636e\u9700\u8981\u9009\u62e9\u5e76\u4e0b\u8f7d DEB \u5305\uff0c\u5efa\u8bae\u9009\u62e9\u6700\u65b0\u7248\u672c\u3002\u5e38\u7528\u4e0b\u8f7d\u94fe\u63a5\u5982\u4e0b\uff1a \u5b89\u88c5\u5305 \u68c0\u9a8c\u548c \u9002\u7528NebulaGraph\u7248\u672c nebula-graph-studio-3.8.0.x86_64.deb nebula-graph-studio-3.8.0.x86_64.deb.sha256 3.6.0 \u4f7f\u7528 sudo dpkg -i <deb_name> \u547d\u4ee4\u5b89\u88c5 DEB \u5305\u3002 \u4f8b\u5982\uff0c\u5b89\u88c5 Studio 3.8.0 \u7248\u672c\u9700\u8981\u8fd0\u884c\u4ee5\u4e0b\u547d\u4ee4\uff1a $ sudo dpkg -i nebula-graph-studio-3.8.0.x86_64.deb \u542f\u52a8\u6210\u529f\u540e\uff0c\u5728\u6d4f\u89c8\u5668\u5730\u5740\u680f\u8f93\u5165 http://<ip address>:7001 \u3002 \u5982\u679c\u5728\u6d4f\u89c8\u5668\u7a97\u53e3\u4e2d\u80fd\u770b\u5230\u4ee5\u4e0b\u767b\u5f55\u754c\u9762\uff0c\u8868\u793a\u5df2\u7ecf\u6210\u529f\u90e8\u7f72\u5e76\u542f\u52a8 Studio\u3002 \u5378\u8f7d \u00b6 \u7528\u6237\u53ef\u4ee5\u4f7f\u7528\u4ee5\u4e0b\u7684\u547d\u4ee4\u5378\u8f7d Studio\u3002 $ sudo dpkg -r nebula-graph-studio tar \u5305\u90e8\u7f72 Studio \u00b6 \u524d\u63d0\u6761\u4ef6 \u00b6 \u5728\u90e8\u7f72 tar \u5305\u5b89\u88c5\u7684 Studio \u4e4b\u524d\uff0c\u7528\u6237\u9700\u8981\u786e\u8ba4\u4ee5\u4e0b\u4fe1\u606f\uff1a NebulaGraph\u670d\u52a1\u5df2\u7ecf\u90e8\u7f72\u5e76\u542f\u52a8\u3002\u8be6\u7ec6\u4fe1\u606f\uff0c\u53c2\u8003 NebulaGraph\u5b89\u88c5\u90e8\u7f72 \u3002 \u786e\u4fdd\u4ee5\u4e0b\u7aef\u53e3\u672a\u88ab\u5360\u7528\u3002 \u7aef\u53e3\u53f7 \u8bf4\u660e 7001 Studio \u63d0\u4f9b\u7684 web \u670d\u52a1 \u5b89\u88c5\u90e8\u7f72 \u00b6 \u6839\u636e\u9700\u8981\u4e0b\u8f7d tar \u5305\uff0c\u5efa\u8bae\u9009\u62e9\u6700\u65b0\u7248\u672c\u3002 \u5b89\u88c5\u5305 Studio \u7248\u672c \u9002\u7528NebulaGraph\u7248\u672c nebula-graph-studio-3.8.0.x86_64.tar.gz 3.8.0 3.6.0 \u89e3\u538b tar \u5305\u3002 tar -xvf nebula-graph-studio-3.8.0.x86_64.tar.gz \u90e8\u7f72 nebula-graph-studio \u5e76\u542f\u52a8\u3002 $ cd nebula-graph-studio $ ./server \u542f\u52a8\u6210\u529f\u540e\uff0c\u5728\u6d4f\u89c8\u5668\u5730\u5740\u680f\u8f93\u5165 http://<ip address>:7001 \u3002 \u5982\u679c\u5728\u6d4f\u89c8\u5668\u7a97\u53e3\u4e2d\u80fd\u770b\u5230\u4ee5\u4e0b\u767b\u5f55\u754c\u9762\uff0c\u8868\u793a\u5df2\u7ecf\u6210\u529f\u90e8\u7f72\u5e76\u542f\u52a8 Studio\u3002 \u505c\u6b62\u670d\u52a1 \u00b6 \u7528\u6237\u53ef\u4ee5\u91c7\u7528 kill <pid> \u7684\u65b9\u5f0f\u6765\u5173\u505c\u670d\u52a1\uff1a $ kill $( lsof -t -i :7001 ) # stop nebula-graph-studio Docker \u90e8\u7f72 Studio \u00b6 \u524d\u63d0\u6761\u4ef6 \u00b6 \u5728\u90e8\u7f72 Docker \u7248 Studio \u4e4b\u524d\uff0c\u7528\u6237\u9700\u8981\u786e\u8ba4\u4ee5\u4e0b\u4fe1\u606f\uff1a NebulaGraph\u670d\u52a1\u5df2\u7ecf\u90e8\u7f72\u5e76\u542f\u52a8\u3002\u8be6\u7ec6\u4fe1\u606f\uff0c\u53c2\u8003 NebulaGraph\u5b89\u88c5\u90e8\u7f72 \u3002 \u5728\u5373\u5c06\u8fd0\u884c Docker \u7248 Studio \u7684\u673a\u5668\u4e0a\u5b89\u88c5\u5e76\u542f\u52a8 Docker Compose\u3002\u8be6\u7ec6\u4fe1\u606f\u53c2\u8003 Docker Compose \u6587\u6863 \u3002 \u786e\u4fdd\u4ee5\u4e0b\u7aef\u53e3\u672a\u88ab\u5360\u7528\u3002 \u7aef\u53e3\u53f7 \u8bf4\u660e 7001 Studio \u63d0\u4f9b\u7684 web \u670d\u52a1 \uff08\u53ef\u9009\uff09\u5728\u4e2d\u56fd\u5927\u9646\u4ece Docker Hub \u62c9\u53d6 Docker \u955c\u50cf\u7684\u901f\u5ea6\u53ef\u80fd\u6bd4\u8f83\u6162\uff0c\u7528\u6237\u53ef\u4ee5\u4f7f\u7528 registry-mirrors \u53c2\u6570\u914d\u7f6e\u52a0\u901f\u955c\u50cf\u3002\u4f8b\u5982\uff0c\u5982\u679c\u8981\u4f7f\u7528 Docker \u4e2d\u56fd\u533a\u5b98\u65b9\u955c\u50cf\u3001\u7f51\u6613\u955c\u50cf\u548c\u4e2d\u56fd\u79d1\u6280\u5927\u5b66\u7684\u955c\u50cf\uff0c\u5219\u6309\u4ee5\u4e0b\u683c\u5f0f\u914d\u7f6e registry-mirrors \u53c2\u6570\uff1a { \"registry-mirrors\" : [ \"https://registry.docker-cn.com\" , \"http://hub-mirror.c.163.com\" , \"https://docker.mirrors.ustc.edu.cn\" ] } \u914d\u7f6e\u6587\u4ef6\u7684\u8def\u5f84\u548c\u65b9\u6cd5\u56e0\u64cd\u4f5c\u7cfb\u7edf\u548c/\u6216 Docker Desktop \u7248\u672c\u800c\u5f02\u3002\u8be6\u7ec6\u4fe1\u606f\u53c2\u8003 Docker Daemon \u914d\u7f6e\u6587\u6863 \u3002 \u64cd\u4f5c\u6b65\u9aa4 \u00b6 \u5728\u547d\u4ee4\u884c\u5de5\u5177\u4e2d\u6309\u4ee5\u4e0b\u6b65\u9aa4\u4f9d\u6b21\u8fd0\u884c\u547d\u4ee4\uff0c\u90e8\u7f72\u5e76\u542f\u52a8 Docker \u7248 Studio\uff0c\u8fd9\u91cc\u6211\u4eec\u7528NebulaGraph\u7248\u672c\u4e3a 3.6.0 \u7684\u8fdb\u884c\u6f14\u793a\uff1a \u4e0b\u8f7d Studio \u7684\u90e8\u7f72\u914d\u7f6e\u6587\u4ef6\u3002 \u5b89\u88c5\u5305 \u9002\u7528NebulaGraph\u7248\u672c nebula-graph-studio-3.8.0.tar.gz 3.6.0 \u521b\u5efa nebula-graph-studio-3.8.0 \u76ee\u5f55\uff0c\u5e76\u5c06\u5b89\u88c5\u5305\u89e3\u538b\u81f3\u76ee\u5f55\u4e2d\u3002 mkdir nebula-graph-studio-3.8.0 && tar -zxvf nebula-graph-studio-3.8.0.tar.gz -C nebula-graph-studio-3.8.0 \u89e3\u538b\u540e\u8fdb\u5165 nebula-graph-studio-3.8.0 \u76ee\u5f55\u3002 cd nebula-graph-studio-3.8.0 \u62c9\u53d6 Studio \u7684 Docker \u955c\u50cf\u3002 docker-compose pull \u6784\u5efa\u5e76\u542f\u52a8 Studio \u670d\u52a1\u3002\u5176\u4e2d\uff0c -d \u8868\u793a\u5728\u540e\u53f0\u8fd0\u884c\u670d\u52a1\u5bb9\u5668\u3002 docker-compose up -d \u5f53\u5c4f\u5e55\u8fd4\u56de\u4ee5\u4e0b\u4fe1\u606f\u65f6\uff0c\u8868\u793a Docker \u7248 Studio \u5df2\u7ecf\u6210\u529f\u542f\u52a8\u3002 Creating docker_web_1 ... done \u542f\u52a8\u6210\u529f\u540e\uff0c\u5728\u6d4f\u89c8\u5668\u5730\u5740\u680f\u8f93\u5165 http://<ip address>:7001 \u3002 Note \u5728\u8fd0\u884c Docker \u7248 Studio \u7684\u673a\u5668\u4e0a\uff0c\u7528\u6237\u53ef\u4ee5\u8fd0\u884c ifconfig \u6216\u8005 ipconfig \u83b7\u53d6\u672c\u673a IP \u5730\u5740\u3002\u5982\u679c\u4f7f\u7528\u8fd9\u53f0\u673a\u5668\u8bbf\u95ee Studio\uff0c\u53ef\u4ee5\u5728\u6d4f\u89c8\u5668\u5730\u5740\u680f\u91cc\u8f93\u5165 http://localhost:7001 \u3002 \u5982\u679c\u5728\u6d4f\u89c8\u5668\u7a97\u53e3\u4e2d\u80fd\u770b\u5230\u4ee5\u4e0b\u767b\u5f55\u754c\u9762\uff0c\u8868\u793a\u5df2\u7ecf\u6210\u529f\u90e8\u7f72\u5e76\u542f\u52a8 Studio\u3002 Helm \u90e8\u7f72 Studio \u00b6 \u672c\u5c0f\u8282\u4ecb\u7ecd\u5982\u4f55\u5728 Kubernetes \u4e2d\u4f7f\u7528 Helm \u90e8\u7f72\u5e76\u542f\u52a8 Studio\u3002 \u524d\u63d0\u6761\u4ef6 \u00b6 \u5b89\u88c5 Studio \u524d\uff0c\u7528\u6237\u9700\u8981\u5b89\u88c5\u4ee5\u4e0b\u8f6f\u4ef6\u5e76\u786e\u4fdd\u5b89\u88c5\u7248\u672c\u7684\u6b63\u786e\u6027\uff1a \u8f6f\u4ef6 \u7248\u672c\u8981\u6c42 Kubernetes >= 1.14 Helm >= 3.2.0 \u64cd\u4f5c\u6b65\u9aa4 \u00b6 \u514b\u9686 Studio \u7684\u6e90\u4ee3\u7801\u5230\u4e3b\u673a\u3002 $ git clone https://github.com/vesoft-inc/nebula-studio.git \u8fdb\u5165 nebula-studio \u76ee\u5f55\u3002 $ cd nebula-studio \u66f4\u65b0\u5e76\u5b89\u88c5 Helm Chart\uff0c\u547d\u540d\u4e3a my-studio \u3002 $ helm upgrade --install my-studio --set service.type = NodePort --set service.port ={ 30070 } deployment/helm Helm Chart \u914d\u7f6e\u53c2\u6570\u8bf4\u660e\u5982\u4e0b\u3002 \u53c2\u6570 \u9ed8\u8ba4\u503c \u63cf\u8ff0 replicaCount 0 Deployment \u7684\u526f\u672c\u6570\u3002 image.nebulaStudio.name vesoft/nebula-graph-studio nebula-graph-studio \u955c\u50cf\u7684\u4ed3\u5e93\u5730\u5740\u3002 image.nebulaStudio.version v3.8.0 nebula-graph-studio \u7684\u7248\u672c\u3002 service.type ClusterIP \u670d\u52a1\u7c7b\u578b\uff0c\u5fc5\u987b\u4e3a NodePort \uff0c ClusterIP \u6216 LoadBalancer \u5176\u4e2d\u4e4b\u4e00\u3002 service.port 7001 nebula-graph-studio \u4e2d web \u670d\u52a1\u7684\u7aef\u53e3\u3002 service.nodePort 32701 Kubernetes \u96c6\u7fa4\u5916\u90e8\u8bbf\u95ee nebula-studio \u7684\u4ee3\u7406\u7aef\u53e3\u3002 resources.nebulaStudio {} nebula-studio \u7684\u8d44\u6e90\u9650\u5236/\u8bf7\u6c42\u3002 persistent.storageClassName \"\" storageClass \u540d\u79f0\uff0c\u5982\u679c\u4e0d\u6307\u5b9a\u5c31\u4f7f\u7528\u9ed8\u8ba4\u503c\u3002 persistent.size 5Gi \u5b58\u50a8\u76d8\u5927\u5c0f\u3002 \u542f\u52a8\u6210\u529f\u540e\uff0c\u5728\u6d4f\u89c8\u5668\u5730\u5740\u680f\u8f93\u5165 http://<node_address>:30070 \u3002 \u5982\u679c\u5728\u6d4f\u89c8\u5668\u7a97\u53e3\u4e2d\u80fd\u770b\u5230\u4ee5\u4e0b\u767b\u5f55\u754c\u9762\uff0c\u8868\u793a\u5df2\u7ecf\u6210\u529f\u90e8\u7f72\u5e76\u542f\u52a8 Studio\u3002 \u5378\u8f7d \u00b6 $ helm uninstall my-studio \u540e\u7eed\u64cd\u4f5c \u00b6 \u8fdb\u5165 Studio \u767b\u5f55\u754c\u9762\u540e\uff0c\u7528\u6237\u9700\u8981\u8fde\u63a5NebulaGraph\u3002\u8be6\u7ec6\u4fe1\u606f\uff0c\u53c2\u8003 \u8fde\u63a5\u6570\u636e\u5e93 \u3002","title":"\u90e8\u7f72 Studio"},{"location":"nebula-studio/deploy-connect/st-ug-deploy/#studio","text":"\u672c\u6587\u4ecb\u7ecd\u5982\u4f55\u5728\u672c\u5730\u901a\u8fc7 RPM\u3001DEB\u3001tar \u5305\u548c Docker \u90e8\u7f72 Studio\u3002","title":"\u90e8\u7f72 Studio"},{"location":"nebula-studio/deploy-connect/st-ug-deploy/#rpm_studio","text":"","title":"RPM \u90e8\u7f72 Studio"},{"location":"nebula-studio/deploy-connect/st-ug-deploy/#_1","text":"\u5728\u90e8\u7f72 RPM \u7248 Studio \u4e4b\u524d\uff0c\u7528\u6237\u9700\u8981\u786e\u8ba4\u4ee5\u4e0b\u4fe1\u606f\uff1a NebulaGraph\u670d\u52a1\u5df2\u7ecf\u90e8\u7f72\u5e76\u542f\u52a8\u3002\u8be6\u7ec6\u4fe1\u606f\uff0c\u53c2\u8003 NebulaGraph\u5b89\u88c5\u90e8\u7f72 \u3002 \u4f7f\u7528\u7684 Linux \u53d1\u884c\u7248\u4e3a CentOS \uff0c\u5df2\u5b89\u88c5 lsof\u3002 \u786e\u4fdd\u4ee5\u4e0b\u7aef\u53e3\u672a\u88ab\u5360\u7528\u3002 \u7aef\u53e3\u53f7 \u8bf4\u660e 7001 Studio \u63d0\u4f9b web \u670d\u52a1\u4f7f\u7528\u3002","title":"\u524d\u63d0\u6761\u4ef6"},{"location":"nebula-studio/deploy-connect/st-ug-deploy/#_2","text":"\u6839\u636e\u9700\u8981\u9009\u62e9\u5e76\u4e0b\u8f7d RPM \u5305\uff0c\u5efa\u8bae\u9009\u62e9\u6700\u65b0\u7248\u672c\u3002\u5e38\u7528\u4e0b\u8f7d\u94fe\u63a5\u5982\u4e0b\uff1a \u5b89\u88c5\u5305 \u68c0\u9a8c\u548c \u9002\u7528NebulaGraph\u7248\u672c nebula-graph-studio-3.8.0.x86_64.rpm nebula-graph-studio-3.8.0.x86_64.rpm.sha256 3.6.0 \u4f7f\u7528 sudo rpm -i <rpm_name> \u547d\u4ee4\u5b89\u88c5 RPM \u5305\u3002 \u4f8b\u5982\uff0c\u5b89\u88c5 Studio 3.8.0 \u7248\u672c\u9700\u8981\u8fd0\u884c\u4ee5\u4e0b\u547d\u4ee4\uff0c\u9ed8\u8ba4\u5b89\u88c5\u8def\u5f84\u4e3a /usr/local/nebula-graph-studio \uff1a $ sudo rpm -i nebula-graph-studio-3.8.0.x86_64.rpm \u4e5f\u53ef\u4ee5\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\u5b89\u88c5\u5230\u6307\u5b9a\u8def\u5f84\uff1a $ sudo rpm -i nebula-graph-studio-3.8.0.x86_64.rpm --prefix = <path> \u5f53\u5c4f\u5e55\u8fd4\u56de\u4ee5\u4e0b\u4fe1\u606f\u65f6\uff0c\u8868\u793a PRM \u7248 Studio \u5df2\u7ecf\u6210\u529f\u542f\u52a8\u3002 Start installing NebulaGraph Studio now... NebulaGraph Studio has been installed. NebulaGraph Studio started automatically. \u542f\u52a8\u6210\u529f\u540e\uff0c\u5728\u6d4f\u89c8\u5668\u5730\u5740\u680f\u8f93\u5165 http://<ip address>:7001 \u3002 \u5982\u679c\u5728\u6d4f\u89c8\u5668\u7a97\u53e3\u4e2d\u80fd\u770b\u5230\u4ee5\u4e0b\u767b\u5f55\u754c\u9762\uff0c\u8868\u793a\u5df2\u7ecf\u6210\u529f\u90e8\u7f72\u5e76\u542f\u52a8 Studio\u3002","title":"\u5b89\u88c5"},{"location":"nebula-studio/deploy-connect/st-ug-deploy/#_3","text":"\u7528\u6237\u53ef\u4ee5\u4f7f\u7528\u4ee5\u4e0b\u7684\u547d\u4ee4\u5378\u8f7d Studio\u3002 $ sudo rpm -e nebula-graph-studio-3.8.0.x86_64 \u5f53\u5c4f\u5e55\u8fd4\u56de\u4ee5\u4e0b\u4fe1\u606f\u65f6\uff0c\u8868\u793a PRM \u7248 Studio \u5df2\u7ecf\u5378\u8f7d\u3002 NebulaGraph Studio removed, bye~","title":"\u5378\u8f7d"},{"location":"nebula-studio/deploy-connect/st-ug-deploy/#_4","text":"\u5982\u679c\u5728\u5b89\u88c5\u8fc7\u7a0b\u4e2d\u81ea\u52a8\u542f\u52a8\u5931\u8d25\u6216\u662f\u9700\u8981\u624b\u52a8\u542f\u52a8\u6216\u505c\u6b62\u670d\u52a1\uff0c\u8bf7\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\uff1a \u624b\u52a8\u542f\u52a8\u670d\u52a1 $ bash /usr/local/nebula-graph-studio/scripts/rpm/start.sh \u624b\u52a8\u505c\u6b62\u670d\u52a1 $ bash /usr/local/nebula-graph-studio/scripts/rpm/stop.sh \u5982\u679c\u542f\u52a8\u670d\u52a1\u65f6\u9047\u5230\u62a5\u9519 ERROR: bind EADDRINUSE 0.0.0.0:7001 \uff0c\u7528\u6237\u53ef\u4ee5\u901a\u8fc7\u4ee5\u4e0b\u547d\u4ee4\u67e5\u770b\u7aef\u53e3 7001 \u662f\u5426\u88ab\u5360\u7528\u3002 $ lsof -i:7001 \u5982\u679c\u7aef\u53e3\u88ab\u5360\u7528\uff0c\u4e14\u65e0\u6cd5\u7ed3\u675f\u8be5\u7aef\u53e3\u4e0a\u8fdb\u7a0b\uff0c\u7528\u6237\u53ef\u4ee5\u4fee\u6539 studio \u914d\u7f6e\u5185\u7684\u542f\u52a8\u7aef\u53e3\uff0c\u5e76\u91cd\u65b0\u542f\u52a8\u670d\u52a1\u3002 //\u4fee\u6539 studio \u670d\u52a1\u914d\u7f6e\u3002\u914d\u7f6e\u6587\u4ef6\u9ed8\u8ba4\u8def\u5f84\u4e3a ` /usr/local/nebula-graph-studio ` \u3002 $ vi etc/studio-api.yaml //\u4fee\u6539\u7aef\u53e3\u53f7\uff0c\u6539\u6210\u4efb\u610f\u4e00\u4e2a\u5f53\u524d\u53ef\u7528\u7684\u5373\u53ef\u3002 Port: 7001 //\u91cd\u542f\u670d\u52a1 $ systemctl restart nebula-graph-studio.service","title":"\u5f02\u5e38\u5904\u7406"},{"location":"nebula-studio/deploy-connect/st-ug-deploy/#deb_studio","text":"","title":"DEB \u90e8\u7f72 Studio"},{"location":"nebula-studio/deploy-connect/st-ug-deploy/#_5","text":"\u5728\u901a\u8fc7 DEB \u90e8\u7f72\u5b89\u88c5 Studio \u4e4b\u524d\uff0c\u7528\u6237\u9700\u8981\u786e\u8ba4\u4ee5\u4e0b\u4fe1\u606f\uff1a NebulaGraph\u670d\u52a1\u5df2\u7ecf\u90e8\u7f72\u5e76\u542f\u52a8\u3002\u8be6\u7ec6\u4fe1\u606f\uff0c\u53c2\u8003 NebulaGraph\u5b89\u88c5\u90e8\u7f72 \u3002 \u4f7f\u7528\u7684 Linux \u53d1\u884c\u7248\u4e3a Ubuntu\u3002 \u786e\u4fdd\u4ee5\u4e0b\u7aef\u53e3\u672a\u88ab\u5360\u7528\u3002 \u7aef\u53e3\u53f7 \u8bf4\u660e 7001 Studio \u63d0\u4f9b\u7684 web \u670d\u52a1 \u786e\u4fdd\u7cfb\u7edf\u4e2d\u5b58\u5728 /usr/lib/systemd/system \u76ee\u5f55\u3002\u5982\u6ca1\u6709\u8be5\u76ee\u5f55\uff0c\u9700\u624b\u52a8\u521b\u5efa\u3002","title":"\u524d\u63d0\u6761\u4ef6"},{"location":"nebula-studio/deploy-connect/st-ug-deploy/#_6","text":"\u6839\u636e\u9700\u8981\u9009\u62e9\u5e76\u4e0b\u8f7d DEB \u5305\uff0c\u5efa\u8bae\u9009\u62e9\u6700\u65b0\u7248\u672c\u3002\u5e38\u7528\u4e0b\u8f7d\u94fe\u63a5\u5982\u4e0b\uff1a \u5b89\u88c5\u5305 \u68c0\u9a8c\u548c \u9002\u7528NebulaGraph\u7248\u672c nebula-graph-studio-3.8.0.x86_64.deb nebula-graph-studio-3.8.0.x86_64.deb.sha256 3.6.0 \u4f7f\u7528 sudo dpkg -i <deb_name> \u547d\u4ee4\u5b89\u88c5 DEB \u5305\u3002 \u4f8b\u5982\uff0c\u5b89\u88c5 Studio 3.8.0 \u7248\u672c\u9700\u8981\u8fd0\u884c\u4ee5\u4e0b\u547d\u4ee4\uff1a $ sudo dpkg -i nebula-graph-studio-3.8.0.x86_64.deb \u542f\u52a8\u6210\u529f\u540e\uff0c\u5728\u6d4f\u89c8\u5668\u5730\u5740\u680f\u8f93\u5165 http://<ip address>:7001 \u3002 \u5982\u679c\u5728\u6d4f\u89c8\u5668\u7a97\u53e3\u4e2d\u80fd\u770b\u5230\u4ee5\u4e0b\u767b\u5f55\u754c\u9762\uff0c\u8868\u793a\u5df2\u7ecf\u6210\u529f\u90e8\u7f72\u5e76\u542f\u52a8 Studio\u3002","title":"\u5b89\u88c5"},{"location":"nebula-studio/deploy-connect/st-ug-deploy/#_7","text":"\u7528\u6237\u53ef\u4ee5\u4f7f\u7528\u4ee5\u4e0b\u7684\u547d\u4ee4\u5378\u8f7d Studio\u3002 $ sudo dpkg -r nebula-graph-studio","title":"\u5378\u8f7d"},{"location":"nebula-studio/deploy-connect/st-ug-deploy/#tar_studio","text":"","title":"tar \u5305\u90e8\u7f72 Studio"},{"location":"nebula-studio/deploy-connect/st-ug-deploy/#_8","text":"\u5728\u90e8\u7f72 tar \u5305\u5b89\u88c5\u7684 Studio \u4e4b\u524d\uff0c\u7528\u6237\u9700\u8981\u786e\u8ba4\u4ee5\u4e0b\u4fe1\u606f\uff1a NebulaGraph\u670d\u52a1\u5df2\u7ecf\u90e8\u7f72\u5e76\u542f\u52a8\u3002\u8be6\u7ec6\u4fe1\u606f\uff0c\u53c2\u8003 NebulaGraph\u5b89\u88c5\u90e8\u7f72 \u3002 \u786e\u4fdd\u4ee5\u4e0b\u7aef\u53e3\u672a\u88ab\u5360\u7528\u3002 \u7aef\u53e3\u53f7 \u8bf4\u660e 7001 Studio \u63d0\u4f9b\u7684 web \u670d\u52a1","title":"\u524d\u63d0\u6761\u4ef6"},{"location":"nebula-studio/deploy-connect/st-ug-deploy/#_9","text":"\u6839\u636e\u9700\u8981\u4e0b\u8f7d tar \u5305\uff0c\u5efa\u8bae\u9009\u62e9\u6700\u65b0\u7248\u672c\u3002 \u5b89\u88c5\u5305 Studio \u7248\u672c \u9002\u7528NebulaGraph\u7248\u672c nebula-graph-studio-3.8.0.x86_64.tar.gz 3.8.0 3.6.0 \u89e3\u538b tar \u5305\u3002 tar -xvf nebula-graph-studio-3.8.0.x86_64.tar.gz \u90e8\u7f72 nebula-graph-studio \u5e76\u542f\u52a8\u3002 $ cd nebula-graph-studio $ ./server \u542f\u52a8\u6210\u529f\u540e\uff0c\u5728\u6d4f\u89c8\u5668\u5730\u5740\u680f\u8f93\u5165 http://<ip address>:7001 \u3002 \u5982\u679c\u5728\u6d4f\u89c8\u5668\u7a97\u53e3\u4e2d\u80fd\u770b\u5230\u4ee5\u4e0b\u767b\u5f55\u754c\u9762\uff0c\u8868\u793a\u5df2\u7ecf\u6210\u529f\u90e8\u7f72\u5e76\u542f\u52a8 Studio\u3002","title":"\u5b89\u88c5\u90e8\u7f72"},{"location":"nebula-studio/deploy-connect/st-ug-deploy/#_10","text":"\u7528\u6237\u53ef\u4ee5\u91c7\u7528 kill <pid> \u7684\u65b9\u5f0f\u6765\u5173\u505c\u670d\u52a1\uff1a $ kill $( lsof -t -i :7001 ) # stop nebula-graph-studio","title":"\u505c\u6b62\u670d\u52a1"},{"location":"nebula-studio/deploy-connect/st-ug-deploy/#docker_studio","text":"","title":"Docker \u90e8\u7f72 Studio"},{"location":"nebula-studio/deploy-connect/st-ug-deploy/#_11","text":"\u5728\u90e8\u7f72 Docker \u7248 Studio \u4e4b\u524d\uff0c\u7528\u6237\u9700\u8981\u786e\u8ba4\u4ee5\u4e0b\u4fe1\u606f\uff1a NebulaGraph\u670d\u52a1\u5df2\u7ecf\u90e8\u7f72\u5e76\u542f\u52a8\u3002\u8be6\u7ec6\u4fe1\u606f\uff0c\u53c2\u8003 NebulaGraph\u5b89\u88c5\u90e8\u7f72 \u3002 \u5728\u5373\u5c06\u8fd0\u884c Docker \u7248 Studio \u7684\u673a\u5668\u4e0a\u5b89\u88c5\u5e76\u542f\u52a8 Docker Compose\u3002\u8be6\u7ec6\u4fe1\u606f\u53c2\u8003 Docker Compose \u6587\u6863 \u3002 \u786e\u4fdd\u4ee5\u4e0b\u7aef\u53e3\u672a\u88ab\u5360\u7528\u3002 \u7aef\u53e3\u53f7 \u8bf4\u660e 7001 Studio \u63d0\u4f9b\u7684 web \u670d\u52a1 \uff08\u53ef\u9009\uff09\u5728\u4e2d\u56fd\u5927\u9646\u4ece Docker Hub \u62c9\u53d6 Docker \u955c\u50cf\u7684\u901f\u5ea6\u53ef\u80fd\u6bd4\u8f83\u6162\uff0c\u7528\u6237\u53ef\u4ee5\u4f7f\u7528 registry-mirrors \u53c2\u6570\u914d\u7f6e\u52a0\u901f\u955c\u50cf\u3002\u4f8b\u5982\uff0c\u5982\u679c\u8981\u4f7f\u7528 Docker \u4e2d\u56fd\u533a\u5b98\u65b9\u955c\u50cf\u3001\u7f51\u6613\u955c\u50cf\u548c\u4e2d\u56fd\u79d1\u6280\u5927\u5b66\u7684\u955c\u50cf\uff0c\u5219\u6309\u4ee5\u4e0b\u683c\u5f0f\u914d\u7f6e registry-mirrors \u53c2\u6570\uff1a { \"registry-mirrors\" : [ \"https://registry.docker-cn.com\" , \"http://hub-mirror.c.163.com\" , \"https://docker.mirrors.ustc.edu.cn\" ] } \u914d\u7f6e\u6587\u4ef6\u7684\u8def\u5f84\u548c\u65b9\u6cd5\u56e0\u64cd\u4f5c\u7cfb\u7edf\u548c/\u6216 Docker Desktop \u7248\u672c\u800c\u5f02\u3002\u8be6\u7ec6\u4fe1\u606f\u53c2\u8003 Docker Daemon \u914d\u7f6e\u6587\u6863 \u3002","title":"\u524d\u63d0\u6761\u4ef6"},{"location":"nebula-studio/deploy-connect/st-ug-deploy/#_12","text":"\u5728\u547d\u4ee4\u884c\u5de5\u5177\u4e2d\u6309\u4ee5\u4e0b\u6b65\u9aa4\u4f9d\u6b21\u8fd0\u884c\u547d\u4ee4\uff0c\u90e8\u7f72\u5e76\u542f\u52a8 Docker \u7248 Studio\uff0c\u8fd9\u91cc\u6211\u4eec\u7528NebulaGraph\u7248\u672c\u4e3a 3.6.0 \u7684\u8fdb\u884c\u6f14\u793a\uff1a \u4e0b\u8f7d Studio \u7684\u90e8\u7f72\u914d\u7f6e\u6587\u4ef6\u3002 \u5b89\u88c5\u5305 \u9002\u7528NebulaGraph\u7248\u672c nebula-graph-studio-3.8.0.tar.gz 3.6.0 \u521b\u5efa nebula-graph-studio-3.8.0 \u76ee\u5f55\uff0c\u5e76\u5c06\u5b89\u88c5\u5305\u89e3\u538b\u81f3\u76ee\u5f55\u4e2d\u3002 mkdir nebula-graph-studio-3.8.0 && tar -zxvf nebula-graph-studio-3.8.0.tar.gz -C nebula-graph-studio-3.8.0 \u89e3\u538b\u540e\u8fdb\u5165 nebula-graph-studio-3.8.0 \u76ee\u5f55\u3002 cd nebula-graph-studio-3.8.0 \u62c9\u53d6 Studio \u7684 Docker \u955c\u50cf\u3002 docker-compose pull \u6784\u5efa\u5e76\u542f\u52a8 Studio \u670d\u52a1\u3002\u5176\u4e2d\uff0c -d \u8868\u793a\u5728\u540e\u53f0\u8fd0\u884c\u670d\u52a1\u5bb9\u5668\u3002 docker-compose up -d \u5f53\u5c4f\u5e55\u8fd4\u56de\u4ee5\u4e0b\u4fe1\u606f\u65f6\uff0c\u8868\u793a Docker \u7248 Studio \u5df2\u7ecf\u6210\u529f\u542f\u52a8\u3002 Creating docker_web_1 ... done \u542f\u52a8\u6210\u529f\u540e\uff0c\u5728\u6d4f\u89c8\u5668\u5730\u5740\u680f\u8f93\u5165 http://<ip address>:7001 \u3002 Note \u5728\u8fd0\u884c Docker \u7248 Studio \u7684\u673a\u5668\u4e0a\uff0c\u7528\u6237\u53ef\u4ee5\u8fd0\u884c ifconfig \u6216\u8005 ipconfig \u83b7\u53d6\u672c\u673a IP \u5730\u5740\u3002\u5982\u679c\u4f7f\u7528\u8fd9\u53f0\u673a\u5668\u8bbf\u95ee Studio\uff0c\u53ef\u4ee5\u5728\u6d4f\u89c8\u5668\u5730\u5740\u680f\u91cc\u8f93\u5165 http://localhost:7001 \u3002 \u5982\u679c\u5728\u6d4f\u89c8\u5668\u7a97\u53e3\u4e2d\u80fd\u770b\u5230\u4ee5\u4e0b\u767b\u5f55\u754c\u9762\uff0c\u8868\u793a\u5df2\u7ecf\u6210\u529f\u90e8\u7f72\u5e76\u542f\u52a8 Studio\u3002","title":"\u64cd\u4f5c\u6b65\u9aa4"},{"location":"nebula-studio/deploy-connect/st-ug-deploy/#helm_studio","text":"\u672c\u5c0f\u8282\u4ecb\u7ecd\u5982\u4f55\u5728 Kubernetes \u4e2d\u4f7f\u7528 Helm \u90e8\u7f72\u5e76\u542f\u52a8 Studio\u3002","title":"Helm \u90e8\u7f72 Studio"},{"location":"nebula-studio/deploy-connect/st-ug-deploy/#_13","text":"\u5b89\u88c5 Studio \u524d\uff0c\u7528\u6237\u9700\u8981\u5b89\u88c5\u4ee5\u4e0b\u8f6f\u4ef6\u5e76\u786e\u4fdd\u5b89\u88c5\u7248\u672c\u7684\u6b63\u786e\u6027\uff1a \u8f6f\u4ef6 \u7248\u672c\u8981\u6c42 Kubernetes >= 1.14 Helm >= 3.2.0","title":"\u524d\u63d0\u6761\u4ef6"},{"location":"nebula-studio/deploy-connect/st-ug-deploy/#_14","text":"\u514b\u9686 Studio \u7684\u6e90\u4ee3\u7801\u5230\u4e3b\u673a\u3002 $ git clone https://github.com/vesoft-inc/nebula-studio.git \u8fdb\u5165 nebula-studio \u76ee\u5f55\u3002 $ cd nebula-studio \u66f4\u65b0\u5e76\u5b89\u88c5 Helm Chart\uff0c\u547d\u540d\u4e3a my-studio \u3002 $ helm upgrade --install my-studio --set service.type = NodePort --set service.port ={ 30070 } deployment/helm Helm Chart \u914d\u7f6e\u53c2\u6570\u8bf4\u660e\u5982\u4e0b\u3002 \u53c2\u6570 \u9ed8\u8ba4\u503c \u63cf\u8ff0 replicaCount 0 Deployment \u7684\u526f\u672c\u6570\u3002 image.nebulaStudio.name vesoft/nebula-graph-studio nebula-graph-studio \u955c\u50cf\u7684\u4ed3\u5e93\u5730\u5740\u3002 image.nebulaStudio.version v3.8.0 nebula-graph-studio \u7684\u7248\u672c\u3002 service.type ClusterIP \u670d\u52a1\u7c7b\u578b\uff0c\u5fc5\u987b\u4e3a NodePort \uff0c ClusterIP \u6216 LoadBalancer \u5176\u4e2d\u4e4b\u4e00\u3002 service.port 7001 nebula-graph-studio \u4e2d web \u670d\u52a1\u7684\u7aef\u53e3\u3002 service.nodePort 32701 Kubernetes \u96c6\u7fa4\u5916\u90e8\u8bbf\u95ee nebula-studio \u7684\u4ee3\u7406\u7aef\u53e3\u3002 resources.nebulaStudio {} nebula-studio \u7684\u8d44\u6e90\u9650\u5236/\u8bf7\u6c42\u3002 persistent.storageClassName \"\" storageClass \u540d\u79f0\uff0c\u5982\u679c\u4e0d\u6307\u5b9a\u5c31\u4f7f\u7528\u9ed8\u8ba4\u503c\u3002 persistent.size 5Gi \u5b58\u50a8\u76d8\u5927\u5c0f\u3002 \u542f\u52a8\u6210\u529f\u540e\uff0c\u5728\u6d4f\u89c8\u5668\u5730\u5740\u680f\u8f93\u5165 http://<node_address>:30070 \u3002 \u5982\u679c\u5728\u6d4f\u89c8\u5668\u7a97\u53e3\u4e2d\u80fd\u770b\u5230\u4ee5\u4e0b\u767b\u5f55\u754c\u9762\uff0c\u8868\u793a\u5df2\u7ecf\u6210\u529f\u90e8\u7f72\u5e76\u542f\u52a8 Studio\u3002","title":"\u64cd\u4f5c\u6b65\u9aa4"},{"location":"nebula-studio/deploy-connect/st-ug-deploy/#_15","text":"$ helm uninstall my-studio","title":"\u5378\u8f7d"},{"location":"nebula-studio/deploy-connect/st-ug-deploy/#_16","text":"\u8fdb\u5165 Studio \u767b\u5f55\u754c\u9762\u540e\uff0c\u7528\u6237\u9700\u8981\u8fde\u63a5NebulaGraph\u3002\u8be6\u7ec6\u4fe1\u606f\uff0c\u53c2\u8003 \u8fde\u63a5\u6570\u636e\u5e93 \u3002","title":"\u540e\u7eed\u64cd\u4f5c"},{"location":"nebula-studio/manage-schema/st-ug-crud-edge-type/","text":"\u64cd\u4f5c Edge type \u00b6 \u5728NebulaGraph\u4e2d\u521b\u5efa\u56fe\u7a7a\u95f4\u540e\uff0c\u7528\u6237\u53ef\u80fd\u9700\u8981\u521b\u5efa Edge type\uff08\u8fb9\u7c7b\u578b\uff09\u3002\u7528\u6237\u53ef\u4ee5\u9009\u62e9\u4f7f\u7528 \u63a7\u5236\u53f0 \u6216\u8005 Schema \u64cd\u4f5c Edge type\u3002\u672c\u6587\u4ec5\u8bf4\u660e\u5982\u4f55\u4f7f\u7528 Schema \u64cd\u4f5c Edge type\u3002 \u524d\u63d0\u6761\u4ef6 \u00b6 \u5728 Studio \u4e0a\u64cd\u4f5c Edge type \u4e4b\u524d\uff0c\u7528\u6237\u5fc5\u987b\u786e\u8ba4\u4ee5\u4e0b\u4fe1\u606f\uff1a Studio \u5df2\u7ecf\u8fde\u63a5\u5230NebulaGraph\u3002 \u56fe\u7a7a\u95f4\u5df2\u7ecf\u521b\u5efa\u3002 \u5f53\u524d\u767b\u5f55\u7684\u8d26\u53f7\u62e5\u6709 GOD\u3001ADMIN \u6216\u8005 DBA \u7684\u6743\u9650\u3002 \u521b\u5efa\u8fb9\u7c7b\u578b \u00b6 \u5728\u9876\u90e8\u5bfc\u822a\u680f\u4e2d\uff0c\u70b9\u51fb Schema \u9875\u7b7e\u3002 \u5728 \u56fe\u7a7a\u95f4\u5217\u8868 \u4e2d\uff0c\u627e\u5230\u56fe\u7a7a\u95f4\uff0c\u70b9\u51fb\u56fe\u7a7a\u95f4\u540d\u79f0\u6216\u8005\u5728 \u64cd\u4f5c \u5217\u4e2d\u70b9\u51fb Schema \u3002 \u5728 \u5f53\u524d\u56fe\u7a7a\u95f4 \u91cc\u786e\u8ba4\u56fe\u7a7a\u95f4\u540d\u79f0\u3002\u7528\u6237\u4e5f\u53ef\u4ee5\u901a\u8fc7\u9009\u62e9\u56fe\u7a7a\u95f4\u540d\u79f0\u5207\u6362\u56fe\u7a7a\u95f4\u3002 \u70b9\u51fb \u8fb9\u7c7b\u578b \u9875\u7b7e\uff0c\u5e76\u70b9\u51fb + \u521b\u5efa \u6309\u94ae\u3002 \u5728 \u521b\u5efa\u8fb9\u7c7b\u578b \u9875\u9762\u4e0a\uff0c\u5b8c\u6210\u4ee5\u4e0b\u8bbe\u7f6e\uff1a \u540d\u79f0 \uff1a\u8f93\u5165 Edge type \u540d\u79f0\u3002\u672c\u793a\u4f8b\u4e2d\uff0c\u8f93\u5165 serve \u3002 \u63cf\u8ff0 \uff08\u53ef\u9009\uff09\uff1a\u8f93\u5165 Edge type \u7684\u5907\u6ce8\u3002 \u5b9a\u4e49\u5c5e\u6027 \uff08\u53ef\u9009\uff09\uff1a\u5982\u679c Edge type \u9700\u8981\u5c5e\u6027\uff0c\u70b9\u51fb + \u6dfb\u52a0\u5c5e\u6027 \uff0c\u6dfb\u52a0\u4e00\u4e2a\u6216\u591a\u4e2a\u5c5e\u6027\uff1a \u8f93\u5165\u5c5e\u6027\u540d\u79f0\u3002 \u9009\u62e9\u6570\u636e\u7c7b\u578b\u3002 \u9009\u62e9\u662f\u5426\u5141\u8bb8\u7a7a\u503c\u3002 \uff08\u53ef\u9009\uff09\u8f93\u5165\u9ed8\u8ba4\u503c\u3002 \uff08\u53ef\u9009\uff09\u8f93\u5165\u5c5e\u6027\u5907\u6ce8\u3002 \u8bbe\u7f6eTTL\uff08\u5b58\u6d3b\u65f6\u95f4\uff09 \uff08\u53ef\u9009\uff09\uff1aEdge type \u672a\u8bbe\u7f6e\u7d22\u5f15\u65f6\uff0c\u7528\u6237\u53ef\u4ee5\u8bbe\u7f6e TTL\u3002\u52fe\u9009 \u8bbe\u7f6eTTL\uff08\u5b58\u6d3b\u65f6\u95f4\uff09 \uff0c\u8bbe\u7f6e TTL_COL \u548c TTL_DURATION \uff08\u5355\u4f4d\uff1a\u79d2\uff09\u3002\u8be6\u60c5\u53c2\u8003 TTL \u914d\u7f6e \u3002 \u5b8c\u6210\u8bbe\u7f6e\u540e\uff0c\u5728 \u5bf9\u5e94\u7684 nGQL \u8bed\u53e5 \u9762\u677f\u4e0a\uff0c\u7528\u6237\u80fd\u770b\u5230\u4e0e\u4e0a\u8ff0\u914d\u7f6e\u7b49\u4ef7\u7684 nGQL \u8bed\u53e5\u3002 \u786e\u8ba4\u65e0\u8bef\u540e\uff0c\u70b9\u51fb \u521b\u5efa \u6309\u94ae\u3002 \u5982\u679c Edge Type \u521b\u5efa\u6210\u529f\uff0c \u8fb9\u7c7b\u578b \u9762\u677f\u4f1a\u663e\u793a\u8fd9\u4e2a Edge type \u7684\u5c5e\u6027\u5217\u8868\u3002 \u4fee\u6539 Edge type \u00b6 \u6309\u4ee5\u4e0b\u6b65\u9aa4\u4f7f\u7528 Schema \u4fee\u6539 Edge type\uff1a \u5728\u9876\u90e8\u5bfc\u822a\u680f\u4e2d\uff0c\u70b9\u51fb Schema \u9875\u7b7e\u3002 \u5728 \u56fe\u7a7a\u95f4\u5217\u8868 \u4e2d\uff0c\u627e\u5230\u56fe\u7a7a\u95f4\uff0c\u70b9\u51fb\u56fe\u7a7a\u95f4\u540d\u79f0\u6216\u8005\u5728 \u64cd\u4f5c \u5217\u4e2d\u70b9\u51fb Schema \u3002 \u5728 \u5f53\u524d\u56fe\u7a7a\u95f4 \u91cc\u786e\u8ba4\u56fe\u7a7a\u95f4\u540d\u79f0\u3002\u7528\u6237\u4e5f\u53ef\u4ee5\u901a\u8fc7\u9009\u62e9\u56fe\u7a7a\u95f4\u540d\u79f0\u5b8c\u6210\u56fe\u7a7a\u95f4\u5207\u6362\u3002 \u70b9\u51fb \u8fb9\u7c7b\u578b \u9875\u7b7e\uff0c\u627e\u5230\u9700\u8981\u4fee\u6539\u7684 Edge Type\uff0c\u5e76\u5728 \u64cd\u4f5c \u5217\u4e2d\uff0c\u70b9\u51fb \u56fe\u6807\u3002 \u5728 \u7f16\u8f91 \u9875\u9762\uff0c\u7528\u6237\u53ef\u4ee5\u9009\u62e9\u4ee5\u4e0b\u64cd\u4f5c\uff1a \u5982\u679c\u8981\u4fee\u6539\u63cf\u8ff0\uff1a\u5728 \u63cf\u8ff0 \u53f3\u4fa7\u70b9\u51fb \u7f16\u8f91 \uff0c\u4fee\u6539\u540e\u70b9\u51fb \u786e\u8ba4 \u3002 \u5982\u679c\u8981\u4fee\u6539\u5c5e\u6027\uff1a\u5728 \u5b9a\u4e49\u5c5e\u6027 \u533a\u57df\uff0c\u627e\u5230\u9700\u8981\u4fee\u6539\u7684\u5c5e\u6027\uff0c\u5728\u53f3\u4fa7\u70b9\u51fb \u7f16\u8f91 \uff0c\u4fee\u6539\u540e\u70b9\u51fb \u786e\u8ba4 \u3002 \u5982\u679c\u8981\u5220\u9664\u5c5e\u6027\uff1a\u5728 \u5b9a\u4e49\u5c5e\u6027 \u533a\u57df\uff0c\u627e\u5230\u9700\u8981\u5220\u9664\u7684\u5c5e\u6027\uff0c\u5728\u53f3\u4fa7\u70b9\u51fb \u5220\u9664 \uff0c\u7136\u540e\u70b9\u51fb \u786e\u8ba4 \u3002 \u5982\u679c\u8981\u6dfb\u52a0\u5c5e\u6027\uff1a\u5728 \u5b9a\u4e49\u5c5e\u6027 \u533a\u57df\uff0c\u70b9\u51fb + \u6dfb\u52a0\u5c5e\u6027 \uff0c\u8bbe\u7f6e\u5c5e\u6027\u4fe1\u606f\uff0c\u70b9\u51fb \u786e\u8ba4 \u3002\u8be6\u7ec6\u8bf4\u660e\u53c2\u8003 \u521b\u5efa\u8fb9\u7c7b\u578b \u3002 \u5982\u679c\u8981\u4fee\u6539 TTL \u4fe1\u606f\uff1a\u5728 \u8bbe\u7f6e TTL \u533a\u57df\uff0c\u70b9\u51fb \u7f16\u8f91 \uff0c\u4fee\u6539\u540e\u70b9\u51fb \u786e\u8ba4 \u3002\u8be6\u60c5\u53c2\u8003 TTL \u914d\u7f6e \u3002 \u5982\u679c\u8981\u5220\u9664\u5df2\u7ecf\u914d\u7f6e\u7684 TTL \u4fe1\u606f\uff1a\u5728 \u8bbe\u7f6e TTL \u533a\u57df\uff0c\u53d6\u6d88\u52fe\u9009 \u8bbe\u7f6eTTL\uff08\u5b58\u6d3b\u65f6\u95f4\uff09 \uff0c\u7136\u540e\u70b9\u51fb \u786e\u5b9a \u3002 \u5982\u679c\u8981\u914d\u7f6e TTL \u4fe1\u606f\uff1a\u5728 \u8bbe\u7f6e TTL \u533a\u57df\uff0c\u52fe\u9009 \u8bbe\u7f6eTTL\uff08\u5b58\u6d3b\u65f6\u95f4\uff09 \uff0c\u8bbe\u7f6e TTL_COL \u548c TTL_DURATION \uff08\u5355\u4f4d\uff1a\u79d2\uff09\uff0c\u70b9\u51fb \u786e\u8ba4 \u3002\u8be6\u60c5\u53c2\u8003 TTL \u914d\u7f6e \u3002 Note TTL \u4e0e\u7d22\u5f15\u7684\u5171\u5b58\u95ee\u9898\uff0c\u8be6\u60c5\u8bf7\u89c1 TTL \u3002 \u5220\u9664 Edge type \u00b6 Danger \u5220\u9664 Edge type \u524d\u5148\u786e\u8ba4 \u5f71\u54cd \uff0c\u5df2\u5220\u9664\u7684\u6570\u636e\u5982\u672a \u5907\u4efd \u65e0\u6cd5\u6062\u590d\u3002 \u5728\u9876\u90e8\u5bfc\u822a\u680f\u4e2d\uff0c\u70b9\u51fb Schema \u9875\u7b7e\u3002 \u5728 \u56fe\u7a7a\u95f4\u5217\u8868 \u4e2d\uff0c\u627e\u5230\u56fe\u7a7a\u95f4\uff0c\u70b9\u51fb\u56fe\u7a7a\u95f4\u540d\u79f0\u6216\u8005\u5728 \u64cd\u4f5c \u5217\u4e2d\u70b9\u51fb Schema \u3002 \u5728 \u5f53\u524d\u56fe\u7a7a\u95f4 \u91cc\u786e\u8ba4\u56fe\u7a7a\u95f4\u540d\u79f0\u3002\u7528\u6237\u4e5f\u53ef\u4ee5\u901a\u8fc7\u9009\u62e9\u56fe\u7a7a\u95f4\u540d\u79f0\u5207\u6362\u56fe\u7a7a\u95f4\u3002 \u70b9\u51fb \u8fb9\u7c7b\u578b \u9875\u7b7e\uff0c\u627e\u5230\u9700\u8981\u4fee\u6539\u7684 Edge type\uff0c\u5e76\u5728 \u64cd\u4f5c \u5217\u4e2d\uff0c\u70b9\u51fb \u56fe\u6807\u3002 \u5728\u5f39\u51fa\u7684\u5bf9\u8bdd\u6846\u4e2d\u70b9\u51fb \u786e\u8ba4 \u3002 \u540e\u7eed\u64cd\u4f5c \u00b6 Edge type \u521b\u5efa\u6210\u529f\u540e\uff0c\u7528\u6237\u53ef\u4ee5\u5728 \u63a7\u5236\u53f0 \u4e0a\u9010\u6761\u63d2\u5165\u8fb9\u6570\u636e\uff0c\u6216\u8005\u4f7f\u7528 \u5bfc\u5165 \u529f\u80fd\u6279\u91cf\u63d2\u5165\u8fb9\u6570\u636e\u3002","title":"\u64cd\u4f5c Edge type"},{"location":"nebula-studio/manage-schema/st-ug-crud-edge-type/#edge_type","text":"\u5728NebulaGraph\u4e2d\u521b\u5efa\u56fe\u7a7a\u95f4\u540e\uff0c\u7528\u6237\u53ef\u80fd\u9700\u8981\u521b\u5efa Edge type\uff08\u8fb9\u7c7b\u578b\uff09\u3002\u7528\u6237\u53ef\u4ee5\u9009\u62e9\u4f7f\u7528 \u63a7\u5236\u53f0 \u6216\u8005 Schema \u64cd\u4f5c Edge type\u3002\u672c\u6587\u4ec5\u8bf4\u660e\u5982\u4f55\u4f7f\u7528 Schema \u64cd\u4f5c Edge type\u3002","title":"\u64cd\u4f5c Edge type"},{"location":"nebula-studio/manage-schema/st-ug-crud-edge-type/#_1","text":"\u5728 Studio \u4e0a\u64cd\u4f5c Edge type \u4e4b\u524d\uff0c\u7528\u6237\u5fc5\u987b\u786e\u8ba4\u4ee5\u4e0b\u4fe1\u606f\uff1a Studio \u5df2\u7ecf\u8fde\u63a5\u5230NebulaGraph\u3002 \u56fe\u7a7a\u95f4\u5df2\u7ecf\u521b\u5efa\u3002 \u5f53\u524d\u767b\u5f55\u7684\u8d26\u53f7\u62e5\u6709 GOD\u3001ADMIN \u6216\u8005 DBA \u7684\u6743\u9650\u3002","title":"\u524d\u63d0\u6761\u4ef6"},{"location":"nebula-studio/manage-schema/st-ug-crud-edge-type/#_2","text":"\u5728\u9876\u90e8\u5bfc\u822a\u680f\u4e2d\uff0c\u70b9\u51fb Schema \u9875\u7b7e\u3002 \u5728 \u56fe\u7a7a\u95f4\u5217\u8868 \u4e2d\uff0c\u627e\u5230\u56fe\u7a7a\u95f4\uff0c\u70b9\u51fb\u56fe\u7a7a\u95f4\u540d\u79f0\u6216\u8005\u5728 \u64cd\u4f5c \u5217\u4e2d\u70b9\u51fb Schema \u3002 \u5728 \u5f53\u524d\u56fe\u7a7a\u95f4 \u91cc\u786e\u8ba4\u56fe\u7a7a\u95f4\u540d\u79f0\u3002\u7528\u6237\u4e5f\u53ef\u4ee5\u901a\u8fc7\u9009\u62e9\u56fe\u7a7a\u95f4\u540d\u79f0\u5207\u6362\u56fe\u7a7a\u95f4\u3002 \u70b9\u51fb \u8fb9\u7c7b\u578b \u9875\u7b7e\uff0c\u5e76\u70b9\u51fb + \u521b\u5efa \u6309\u94ae\u3002 \u5728 \u521b\u5efa\u8fb9\u7c7b\u578b \u9875\u9762\u4e0a\uff0c\u5b8c\u6210\u4ee5\u4e0b\u8bbe\u7f6e\uff1a \u540d\u79f0 \uff1a\u8f93\u5165 Edge type \u540d\u79f0\u3002\u672c\u793a\u4f8b\u4e2d\uff0c\u8f93\u5165 serve \u3002 \u63cf\u8ff0 \uff08\u53ef\u9009\uff09\uff1a\u8f93\u5165 Edge type \u7684\u5907\u6ce8\u3002 \u5b9a\u4e49\u5c5e\u6027 \uff08\u53ef\u9009\uff09\uff1a\u5982\u679c Edge type \u9700\u8981\u5c5e\u6027\uff0c\u70b9\u51fb + \u6dfb\u52a0\u5c5e\u6027 \uff0c\u6dfb\u52a0\u4e00\u4e2a\u6216\u591a\u4e2a\u5c5e\u6027\uff1a \u8f93\u5165\u5c5e\u6027\u540d\u79f0\u3002 \u9009\u62e9\u6570\u636e\u7c7b\u578b\u3002 \u9009\u62e9\u662f\u5426\u5141\u8bb8\u7a7a\u503c\u3002 \uff08\u53ef\u9009\uff09\u8f93\u5165\u9ed8\u8ba4\u503c\u3002 \uff08\u53ef\u9009\uff09\u8f93\u5165\u5c5e\u6027\u5907\u6ce8\u3002 \u8bbe\u7f6eTTL\uff08\u5b58\u6d3b\u65f6\u95f4\uff09 \uff08\u53ef\u9009\uff09\uff1aEdge type \u672a\u8bbe\u7f6e\u7d22\u5f15\u65f6\uff0c\u7528\u6237\u53ef\u4ee5\u8bbe\u7f6e TTL\u3002\u52fe\u9009 \u8bbe\u7f6eTTL\uff08\u5b58\u6d3b\u65f6\u95f4\uff09 \uff0c\u8bbe\u7f6e TTL_COL \u548c TTL_DURATION \uff08\u5355\u4f4d\uff1a\u79d2\uff09\u3002\u8be6\u60c5\u53c2\u8003 TTL \u914d\u7f6e \u3002 \u5b8c\u6210\u8bbe\u7f6e\u540e\uff0c\u5728 \u5bf9\u5e94\u7684 nGQL \u8bed\u53e5 \u9762\u677f\u4e0a\uff0c\u7528\u6237\u80fd\u770b\u5230\u4e0e\u4e0a\u8ff0\u914d\u7f6e\u7b49\u4ef7\u7684 nGQL \u8bed\u53e5\u3002 \u786e\u8ba4\u65e0\u8bef\u540e\uff0c\u70b9\u51fb \u521b\u5efa \u6309\u94ae\u3002 \u5982\u679c Edge Type \u521b\u5efa\u6210\u529f\uff0c \u8fb9\u7c7b\u578b \u9762\u677f\u4f1a\u663e\u793a\u8fd9\u4e2a Edge type \u7684\u5c5e\u6027\u5217\u8868\u3002","title":"\u521b\u5efa\u8fb9\u7c7b\u578b"},{"location":"nebula-studio/manage-schema/st-ug-crud-edge-type/#edge_type_1","text":"\u6309\u4ee5\u4e0b\u6b65\u9aa4\u4f7f\u7528 Schema \u4fee\u6539 Edge type\uff1a \u5728\u9876\u90e8\u5bfc\u822a\u680f\u4e2d\uff0c\u70b9\u51fb Schema \u9875\u7b7e\u3002 \u5728 \u56fe\u7a7a\u95f4\u5217\u8868 \u4e2d\uff0c\u627e\u5230\u56fe\u7a7a\u95f4\uff0c\u70b9\u51fb\u56fe\u7a7a\u95f4\u540d\u79f0\u6216\u8005\u5728 \u64cd\u4f5c \u5217\u4e2d\u70b9\u51fb Schema \u3002 \u5728 \u5f53\u524d\u56fe\u7a7a\u95f4 \u91cc\u786e\u8ba4\u56fe\u7a7a\u95f4\u540d\u79f0\u3002\u7528\u6237\u4e5f\u53ef\u4ee5\u901a\u8fc7\u9009\u62e9\u56fe\u7a7a\u95f4\u540d\u79f0\u5b8c\u6210\u56fe\u7a7a\u95f4\u5207\u6362\u3002 \u70b9\u51fb \u8fb9\u7c7b\u578b \u9875\u7b7e\uff0c\u627e\u5230\u9700\u8981\u4fee\u6539\u7684 Edge Type\uff0c\u5e76\u5728 \u64cd\u4f5c \u5217\u4e2d\uff0c\u70b9\u51fb \u56fe\u6807\u3002 \u5728 \u7f16\u8f91 \u9875\u9762\uff0c\u7528\u6237\u53ef\u4ee5\u9009\u62e9\u4ee5\u4e0b\u64cd\u4f5c\uff1a \u5982\u679c\u8981\u4fee\u6539\u63cf\u8ff0\uff1a\u5728 \u63cf\u8ff0 \u53f3\u4fa7\u70b9\u51fb \u7f16\u8f91 \uff0c\u4fee\u6539\u540e\u70b9\u51fb \u786e\u8ba4 \u3002 \u5982\u679c\u8981\u4fee\u6539\u5c5e\u6027\uff1a\u5728 \u5b9a\u4e49\u5c5e\u6027 \u533a\u57df\uff0c\u627e\u5230\u9700\u8981\u4fee\u6539\u7684\u5c5e\u6027\uff0c\u5728\u53f3\u4fa7\u70b9\u51fb \u7f16\u8f91 \uff0c\u4fee\u6539\u540e\u70b9\u51fb \u786e\u8ba4 \u3002 \u5982\u679c\u8981\u5220\u9664\u5c5e\u6027\uff1a\u5728 \u5b9a\u4e49\u5c5e\u6027 \u533a\u57df\uff0c\u627e\u5230\u9700\u8981\u5220\u9664\u7684\u5c5e\u6027\uff0c\u5728\u53f3\u4fa7\u70b9\u51fb \u5220\u9664 \uff0c\u7136\u540e\u70b9\u51fb \u786e\u8ba4 \u3002 \u5982\u679c\u8981\u6dfb\u52a0\u5c5e\u6027\uff1a\u5728 \u5b9a\u4e49\u5c5e\u6027 \u533a\u57df\uff0c\u70b9\u51fb + \u6dfb\u52a0\u5c5e\u6027 \uff0c\u8bbe\u7f6e\u5c5e\u6027\u4fe1\u606f\uff0c\u70b9\u51fb \u786e\u8ba4 \u3002\u8be6\u7ec6\u8bf4\u660e\u53c2\u8003 \u521b\u5efa\u8fb9\u7c7b\u578b \u3002 \u5982\u679c\u8981\u4fee\u6539 TTL \u4fe1\u606f\uff1a\u5728 \u8bbe\u7f6e TTL \u533a\u57df\uff0c\u70b9\u51fb \u7f16\u8f91 \uff0c\u4fee\u6539\u540e\u70b9\u51fb \u786e\u8ba4 \u3002\u8be6\u60c5\u53c2\u8003 TTL \u914d\u7f6e \u3002 \u5982\u679c\u8981\u5220\u9664\u5df2\u7ecf\u914d\u7f6e\u7684 TTL \u4fe1\u606f\uff1a\u5728 \u8bbe\u7f6e TTL \u533a\u57df\uff0c\u53d6\u6d88\u52fe\u9009 \u8bbe\u7f6eTTL\uff08\u5b58\u6d3b\u65f6\u95f4\uff09 \uff0c\u7136\u540e\u70b9\u51fb \u786e\u5b9a \u3002 \u5982\u679c\u8981\u914d\u7f6e TTL \u4fe1\u606f\uff1a\u5728 \u8bbe\u7f6e TTL \u533a\u57df\uff0c\u52fe\u9009 \u8bbe\u7f6eTTL\uff08\u5b58\u6d3b\u65f6\u95f4\uff09 \uff0c\u8bbe\u7f6e TTL_COL \u548c TTL_DURATION \uff08\u5355\u4f4d\uff1a\u79d2\uff09\uff0c\u70b9\u51fb \u786e\u8ba4 \u3002\u8be6\u60c5\u53c2\u8003 TTL \u914d\u7f6e \u3002 Note TTL \u4e0e\u7d22\u5f15\u7684\u5171\u5b58\u95ee\u9898\uff0c\u8be6\u60c5\u8bf7\u89c1 TTL \u3002","title":"\u4fee\u6539 Edge type"},{"location":"nebula-studio/manage-schema/st-ug-crud-edge-type/#edge_type_2","text":"Danger \u5220\u9664 Edge type \u524d\u5148\u786e\u8ba4 \u5f71\u54cd \uff0c\u5df2\u5220\u9664\u7684\u6570\u636e\u5982\u672a \u5907\u4efd \u65e0\u6cd5\u6062\u590d\u3002 \u5728\u9876\u90e8\u5bfc\u822a\u680f\u4e2d\uff0c\u70b9\u51fb Schema \u9875\u7b7e\u3002 \u5728 \u56fe\u7a7a\u95f4\u5217\u8868 \u4e2d\uff0c\u627e\u5230\u56fe\u7a7a\u95f4\uff0c\u70b9\u51fb\u56fe\u7a7a\u95f4\u540d\u79f0\u6216\u8005\u5728 \u64cd\u4f5c \u5217\u4e2d\u70b9\u51fb Schema \u3002 \u5728 \u5f53\u524d\u56fe\u7a7a\u95f4 \u91cc\u786e\u8ba4\u56fe\u7a7a\u95f4\u540d\u79f0\u3002\u7528\u6237\u4e5f\u53ef\u4ee5\u901a\u8fc7\u9009\u62e9\u56fe\u7a7a\u95f4\u540d\u79f0\u5207\u6362\u56fe\u7a7a\u95f4\u3002 \u70b9\u51fb \u8fb9\u7c7b\u578b \u9875\u7b7e\uff0c\u627e\u5230\u9700\u8981\u4fee\u6539\u7684 Edge type\uff0c\u5e76\u5728 \u64cd\u4f5c \u5217\u4e2d\uff0c\u70b9\u51fb \u56fe\u6807\u3002 \u5728\u5f39\u51fa\u7684\u5bf9\u8bdd\u6846\u4e2d\u70b9\u51fb \u786e\u8ba4 \u3002","title":"\u5220\u9664 Edge type"},{"location":"nebula-studio/manage-schema/st-ug-crud-edge-type/#_3","text":"Edge type \u521b\u5efa\u6210\u529f\u540e\uff0c\u7528\u6237\u53ef\u4ee5\u5728 \u63a7\u5236\u53f0 \u4e0a\u9010\u6761\u63d2\u5165\u8fb9\u6570\u636e\uff0c\u6216\u8005\u4f7f\u7528 \u5bfc\u5165 \u529f\u80fd\u6279\u91cf\u63d2\u5165\u8fb9\u6570\u636e\u3002","title":"\u540e\u7eed\u64cd\u4f5c"},{"location":"nebula-studio/manage-schema/st-ug-crud-index/","text":"\u64cd\u4f5c\u7d22\u5f15 \u00b6 \u7528\u6237\u53ef\u4ee5\u4e3a Tag \u548c Edge type \u521b\u5efa\u7d22\u5f15\uff0c\u4f7f\u5f97\u56fe\u67e5\u8be2\u65f6\u53ef\u4ee5\u4ece\u62e5\u6709\u5171\u540c\u5c5e\u6027\u7684\u540c\u4e00\u7c7b\u578b\u7684\u70b9\u6216\u8fb9\u5f00\u59cb\u904d\u5386\uff0c\u4f7f\u5927\u578b\u56fe\u7684\u67e5\u8be2\u66f4\u4e3a\u9ad8\u6548\u3002\u7528\u6237\u53ef\u4ee5\u9009\u62e9\u4f7f\u7528 \u63a7\u5236\u53f0 \u6216\u8005 Schema \u64cd\u4f5c\u7d22\u5f15\u3002\u672c\u6587\u4ec5\u8bf4\u660e\u5982\u4f55\u4f7f\u7528 Schema \u64cd\u4f5c\u7d22\u5f15\u3002 Note \u4e00\u822c\u5728\u521b\u5efa\u4e86 Tag \u6216\u8005 Edge type \u4e4b\u540e\u5373\u53ef\u521b\u5efa\u7d22\u5f15\uff0c\u4f46\u662f\uff0c\u7d22\u5f15\u4f1a\u5f71\u54cd\u5199\u6027\u80fd\uff0c\u6240\u4ee5\uff0c\u5efa\u8bae\u5148\u5bfc\u5165\u6570\u636e\uff0c\u518d\u6279\u91cf\u91cd\u5efa\u7d22\u5f15\u3002\u5173\u4e8e\u7d22\u5f15\u7684\u8be6\u7ec6\u4fe1\u606f\uff0c\u53c2\u8003 \u7d22\u5f15\u4ecb\u7ecd \u3002 \u524d\u63d0\u6761\u4ef6 \u00b6 \u5728 Studio \u4e0a\u64cd\u4f5c\u7d22\u5f15\u4e4b\u524d\uff0c\u7528\u6237\u5fc5\u987b\u786e\u8ba4\u4ee5\u4e0b\u4fe1\u606f\uff1a Studio \u5df2\u7ecf\u8fde\u63a5\u5230NebulaGraph\u3002 \u56fe\u7a7a\u95f4\u3001Tag \u548c Edge type \u5df2\u7ecf\u521b\u5efa\u3002 \u5f53\u524d\u767b\u5f55\u7684\u8d26\u53f7\u62e5\u6709 GOD\u3001ADMIN \u6216\u8005 DBA \u7684\u6743\u9650\u3002 \u521b\u5efa\u7d22\u5f15 \u00b6 \u5728\u9876\u90e8\u5bfc\u822a\u680f\u4e2d\uff0c\u70b9\u51fb Schema \u9875\u7b7e\u3002 \u5728 \u56fe\u7a7a\u95f4\u5217\u8868 \u4e2d\uff0c\u627e\u5230\u56fe\u7a7a\u95f4\uff0c\u70b9\u51fb\u56fe\u7a7a\u95f4\u540d\u79f0\u6216\u8005\u5728 \u64cd\u4f5c \u5217\u4e2d\u70b9\u51fb Schema \u3002 \u5728 \u5f53\u524d\u56fe\u7a7a\u95f4 \u91cc\u786e\u8ba4\u56fe\u7a7a\u95f4\u540d\u79f0\u3002\u7528\u6237\u4e5f\u53ef\u4ee5\u901a\u8fc7\u9009\u62e9\u56fe\u7a7a\u95f4\u540d\u79f0\u5207\u6362\u56fe\u7a7a\u95f4\u3002 \u70b9\u51fb \u7d22\u5f15 \u9875\u7b7e\uff0c\u5e76\u70b9\u51fb + \u521b\u5efa \u6309\u94ae\u3002 \u5728 \u521b\u5efa\u7d22\u5f15 \u9875\u9762\u4e0a\uff0c\u5b8c\u6210\u4ee5\u4e0b\u8bbe\u7f6e\uff1a \u7d22\u5f15\u7c7b\u578b \uff1a\u9009\u62e9\u7d22\u5f15\u7c7b\u578b\uff0c\u5373 Tag \u6216\u8005 Edge type \u3002\u672c\u793a\u4f8b\u4e2d\u9009\u62e9 Edge type \u3002 \u5173\u8054\u540d\u79f0 \uff1a\u9009\u62e9\u8981\u5173\u8054\u7684 Tag \u6216 Edge type \u540d\u79f0\u3002\u672c\u793a\u4f8b\u4e2d\u9009\u62e9 follow \u3002 \u7d22\u5f15\u540d\u79f0 \uff1a\u8f93\u5165\u7d22\u5f15\u540d\u79f0\u3002\u672c\u793a\u4f8b\u4e2d\uff0c\u8f93\u5165 follow_index \u3002 \u63cf\u8ff0 \uff08\u53ef\u9009\uff09\uff1a\u8f93\u5165\u7d22\u5f15\u7684\u5907\u6ce8\u3002 \u7d22\u5f15\u5c5e\u6027 \uff08\u53ef\u9009\uff09\uff1a\u70b9\u51fb + \u6dfb\u52a0\u5c5e\u6027 \uff0c\u5728\u5f39\u51fa\u7684\u5bf9\u8bdd\u6846\u5217\u8868\u91cc\u9009\u62e9\u9700\u8981\u5173\u8054\u7684\u5c5e\u6027\uff0c\u70b9\u51fb \u786e\u8ba4 \u3002\u5982\u679c\u9700\u8981\u5173\u8054\u591a\u4e2a\u5c5e\u6027\uff0c\u91cd\u590d\u8fd9\u4e00\u6b65\u9aa4\u3002\u7528\u6237\u53ef\u4ee5\u6309\u754c\u9762\u63d0\u793a\u91cd\u6392\u7d22\u5f15\u5c5e\u6027\u7684\u987a\u5e8f\u3002\u672c\u793a\u4f8b\u4e2d\u9009\u62e9 degree \u3002 Note \u7d22\u5f15\u5c5e\u6027\u7684\u987a\u5e8f\u4f1a\u5f71\u54cd LOOKUP \u8bed\u53e5\u7684\u67e5\u8be2\u7ed3\u679c\u3002\u8be6\u7ec6\u4fe1\u606f\uff0c\u53c2\u8003 LOOKUP \u3002 \u5b8c\u6210\u8bbe\u7f6e\u540e\uff0c\u5728 \u5bf9\u5e94\u7684 nGQL \u9762\u677f\uff0c\u7528\u6237\u80fd\u770b\u5230\u4e0e\u4e0a\u8ff0\u914d\u7f6e\u7b49\u4ef7\u7684 nGQL \u8bed\u53e5\u3002 \u786e\u8ba4\u65e0\u8bef\u540e\uff0c\u70b9\u51fb \u521b\u5efa \u6309\u94ae\u3002 \u5982\u679c\u7d22\u5f15\u521b\u5efa\u6210\u529f\uff0c \u7d22\u5f15 \u9762\u677f\u4f1a\u663e\u793a\u8fd9\u4e2a\u7d22\u5f15\u7684\u5c5e\u6027\u5217\u8868\u3002 \u67e5\u770b\u7d22\u5f15 \u00b6 \u5728\u9876\u90e8\u5bfc\u822a\u680f\u4e2d\uff0c\u70b9\u51fb Schema \u9875\u7b7e\u3002 \u5728 \u56fe\u7a7a\u95f4\u5217\u8868 \u4e2d\uff0c\u627e\u5230\u56fe\u7a7a\u95f4\uff0c\u70b9\u51fb\u56fe\u7a7a\u95f4\u540d\u79f0\u6216\u8005\u5728 \u64cd\u4f5c \u5217\u4e2d\u70b9\u51fb Schema \u3002 \u5728 \u5f53\u524d\u56fe\u7a7a\u95f4 \u91cc\u786e\u8ba4\u56fe\u7a7a\u95f4\u540d\u79f0\u3002\u7528\u6237\u4e5f\u53ef\u4ee5\u901a\u8fc7\u9009\u62e9\u56fe\u7a7a\u95f4\u540d\u79f0\u5207\u6362\u56fe\u7a7a\u95f4\u3002 \u70b9\u51fb \u7d22\u5f15 \u9875\u7b7e\uff0c\u5728\u5217\u8868\u5de6\u4e0a\u65b9\uff0c\u9009\u62e9\u9700\u8981\u67e5\u770b\u7684\u7d22\u5f15\u7c7b\u578b\u3002 \u5728\u5217\u8868\u4e2d\uff0c\u627e\u5230\u9700\u8981\u67e5\u770b\u7684\u7d22\u5f15\uff0c\u70b9\u51fb\u7d22\u5f15\u6240\u5728\u884c\u5373\u53ef\u5c55\u5f00\u67e5\u770b\u8be5\u7d22\u5f15\u76f8\u5173\u7684\u6240\u6709\u5c5e\u6027\u540d\u79f0\u3001\u6570\u636e\u7c7b\u578b\u3002 \u91cd\u5efa\u7d22\u5f15 \u00b6 \u5728\u9876\u90e8\u5bfc\u822a\u680f\u4e2d\uff0c\u70b9\u51fb Schema \u9875\u7b7e\u3002 \u5728 \u56fe\u7a7a\u95f4\u5217\u8868 \u4e2d\uff0c\u627e\u5230\u56fe\u7a7a\u95f4\uff0c\u70b9\u51fb\u56fe\u7a7a\u95f4\u540d\u79f0\u6216\u8005\u5728 \u64cd\u4f5c \u5217\u4e2d\u70b9\u51fb Schema \u3002 \u5728 \u5f53\u524d\u56fe\u7a7a\u95f4 \u91cc\u786e\u8ba4\u56fe\u7a7a\u95f4\u540d\u79f0\u3002\u7528\u6237\u4e5f\u53ef\u4ee5\u901a\u8fc7\u9009\u62e9\u56fe\u7a7a\u95f4\u540d\u79f0\u5207\u6362\u56fe\u7a7a\u95f4\u3002 \u70b9\u51fb \u7d22\u5f15 \u9875\u7b7e\uff0c\u5728\u5217\u8868\u5de6\u4e0a\u65b9\uff0c\u9009\u62e9\u7d22\u5f15\u7c7b\u578b\u3002 \u627e\u5230\u9700\u8981\u91cd\u5efa\u7684\u7d22\u5f15\uff0c\u5728 \u64cd\u4f5c\u5217 \u70b9\u51fb \u91cd\u5efa\u7d22\u5f15 \u3002 Note \u5173\u4e8e\u91cd\u5efa\u7d22\u5f15\uff0c\u8be6\u60c5\u53c2\u89c1 REBUILD INDEX \u3002 \u5220\u9664\u7d22\u5f15 \u00b6 \u5728\u9876\u90e8\u5bfc\u822a\u680f\u4e2d\uff0c\u70b9\u51fb Schema \u9875\u7b7e\u3002 \u5728 \u56fe\u7a7a\u95f4\u5217\u8868 \u4e2d\uff0c\u627e\u5230\u56fe\u7a7a\u95f4\uff0c\u70b9\u51fb\u56fe\u7a7a\u95f4\u540d\u79f0\u6216\u8005\u5728 \u64cd\u4f5c \u5217\u4e2d\u70b9\u51fb Schema \u3002 \u5728 \u5f53\u524d\u56fe\u7a7a\u95f4 \u91cc\u786e\u8ba4\u56fe\u7a7a\u95f4\u540d\u79f0\u3002\u7528\u6237\u4e5f\u53ef\u4ee5\u901a\u8fc7\u9009\u62e9\u56fe\u7a7a\u95f4\u540d\u79f0\u5207\u6362\u56fe\u7a7a\u95f4\u3002 \u70b9\u51fb \u7d22\u5f15 \u9875\u7b7e\uff0c\u5728\u5217\u8868\u5de6\u4e0a\u65b9\uff0c\u9009\u62e9\u7d22\u5f15\u7c7b\u578b\u3002 \u627e\u5230\u9700\u8981\u5220\u9664\u7684\u7d22\u5f15\uff0c\u5e76\u5728 \u64cd\u4f5c \u5217\u4e2d\uff0c\u70b9\u51fb \u56fe\u6807\u3002 \u5728\u5f39\u51fa\u7684\u5bf9\u8bdd\u6846\u4e2d\u70b9\u51fb \u786e\u8ba4 \u3002","title":"\u64cd\u4f5c\u7d22\u5f15"},{"location":"nebula-studio/manage-schema/st-ug-crud-index/#_1","text":"\u7528\u6237\u53ef\u4ee5\u4e3a Tag \u548c Edge type \u521b\u5efa\u7d22\u5f15\uff0c\u4f7f\u5f97\u56fe\u67e5\u8be2\u65f6\u53ef\u4ee5\u4ece\u62e5\u6709\u5171\u540c\u5c5e\u6027\u7684\u540c\u4e00\u7c7b\u578b\u7684\u70b9\u6216\u8fb9\u5f00\u59cb\u904d\u5386\uff0c\u4f7f\u5927\u578b\u56fe\u7684\u67e5\u8be2\u66f4\u4e3a\u9ad8\u6548\u3002\u7528\u6237\u53ef\u4ee5\u9009\u62e9\u4f7f\u7528 \u63a7\u5236\u53f0 \u6216\u8005 Schema \u64cd\u4f5c\u7d22\u5f15\u3002\u672c\u6587\u4ec5\u8bf4\u660e\u5982\u4f55\u4f7f\u7528 Schema \u64cd\u4f5c\u7d22\u5f15\u3002 Note \u4e00\u822c\u5728\u521b\u5efa\u4e86 Tag \u6216\u8005 Edge type \u4e4b\u540e\u5373\u53ef\u521b\u5efa\u7d22\u5f15\uff0c\u4f46\u662f\uff0c\u7d22\u5f15\u4f1a\u5f71\u54cd\u5199\u6027\u80fd\uff0c\u6240\u4ee5\uff0c\u5efa\u8bae\u5148\u5bfc\u5165\u6570\u636e\uff0c\u518d\u6279\u91cf\u91cd\u5efa\u7d22\u5f15\u3002\u5173\u4e8e\u7d22\u5f15\u7684\u8be6\u7ec6\u4fe1\u606f\uff0c\u53c2\u8003 \u7d22\u5f15\u4ecb\u7ecd \u3002","title":"\u64cd\u4f5c\u7d22\u5f15"},{"location":"nebula-studio/manage-schema/st-ug-crud-index/#_2","text":"\u5728 Studio \u4e0a\u64cd\u4f5c\u7d22\u5f15\u4e4b\u524d\uff0c\u7528\u6237\u5fc5\u987b\u786e\u8ba4\u4ee5\u4e0b\u4fe1\u606f\uff1a Studio \u5df2\u7ecf\u8fde\u63a5\u5230NebulaGraph\u3002 \u56fe\u7a7a\u95f4\u3001Tag \u548c Edge type \u5df2\u7ecf\u521b\u5efa\u3002 \u5f53\u524d\u767b\u5f55\u7684\u8d26\u53f7\u62e5\u6709 GOD\u3001ADMIN \u6216\u8005 DBA \u7684\u6743\u9650\u3002","title":"\u524d\u63d0\u6761\u4ef6"},{"location":"nebula-studio/manage-schema/st-ug-crud-index/#_3","text":"\u5728\u9876\u90e8\u5bfc\u822a\u680f\u4e2d\uff0c\u70b9\u51fb Schema \u9875\u7b7e\u3002 \u5728 \u56fe\u7a7a\u95f4\u5217\u8868 \u4e2d\uff0c\u627e\u5230\u56fe\u7a7a\u95f4\uff0c\u70b9\u51fb\u56fe\u7a7a\u95f4\u540d\u79f0\u6216\u8005\u5728 \u64cd\u4f5c \u5217\u4e2d\u70b9\u51fb Schema \u3002 \u5728 \u5f53\u524d\u56fe\u7a7a\u95f4 \u91cc\u786e\u8ba4\u56fe\u7a7a\u95f4\u540d\u79f0\u3002\u7528\u6237\u4e5f\u53ef\u4ee5\u901a\u8fc7\u9009\u62e9\u56fe\u7a7a\u95f4\u540d\u79f0\u5207\u6362\u56fe\u7a7a\u95f4\u3002 \u70b9\u51fb \u7d22\u5f15 \u9875\u7b7e\uff0c\u5e76\u70b9\u51fb + \u521b\u5efa \u6309\u94ae\u3002 \u5728 \u521b\u5efa\u7d22\u5f15 \u9875\u9762\u4e0a\uff0c\u5b8c\u6210\u4ee5\u4e0b\u8bbe\u7f6e\uff1a \u7d22\u5f15\u7c7b\u578b \uff1a\u9009\u62e9\u7d22\u5f15\u7c7b\u578b\uff0c\u5373 Tag \u6216\u8005 Edge type \u3002\u672c\u793a\u4f8b\u4e2d\u9009\u62e9 Edge type \u3002 \u5173\u8054\u540d\u79f0 \uff1a\u9009\u62e9\u8981\u5173\u8054\u7684 Tag \u6216 Edge type \u540d\u79f0\u3002\u672c\u793a\u4f8b\u4e2d\u9009\u62e9 follow \u3002 \u7d22\u5f15\u540d\u79f0 \uff1a\u8f93\u5165\u7d22\u5f15\u540d\u79f0\u3002\u672c\u793a\u4f8b\u4e2d\uff0c\u8f93\u5165 follow_index \u3002 \u63cf\u8ff0 \uff08\u53ef\u9009\uff09\uff1a\u8f93\u5165\u7d22\u5f15\u7684\u5907\u6ce8\u3002 \u7d22\u5f15\u5c5e\u6027 \uff08\u53ef\u9009\uff09\uff1a\u70b9\u51fb + \u6dfb\u52a0\u5c5e\u6027 \uff0c\u5728\u5f39\u51fa\u7684\u5bf9\u8bdd\u6846\u5217\u8868\u91cc\u9009\u62e9\u9700\u8981\u5173\u8054\u7684\u5c5e\u6027\uff0c\u70b9\u51fb \u786e\u8ba4 \u3002\u5982\u679c\u9700\u8981\u5173\u8054\u591a\u4e2a\u5c5e\u6027\uff0c\u91cd\u590d\u8fd9\u4e00\u6b65\u9aa4\u3002\u7528\u6237\u53ef\u4ee5\u6309\u754c\u9762\u63d0\u793a\u91cd\u6392\u7d22\u5f15\u5c5e\u6027\u7684\u987a\u5e8f\u3002\u672c\u793a\u4f8b\u4e2d\u9009\u62e9 degree \u3002 Note \u7d22\u5f15\u5c5e\u6027\u7684\u987a\u5e8f\u4f1a\u5f71\u54cd LOOKUP \u8bed\u53e5\u7684\u67e5\u8be2\u7ed3\u679c\u3002\u8be6\u7ec6\u4fe1\u606f\uff0c\u53c2\u8003 LOOKUP \u3002 \u5b8c\u6210\u8bbe\u7f6e\u540e\uff0c\u5728 \u5bf9\u5e94\u7684 nGQL \u9762\u677f\uff0c\u7528\u6237\u80fd\u770b\u5230\u4e0e\u4e0a\u8ff0\u914d\u7f6e\u7b49\u4ef7\u7684 nGQL \u8bed\u53e5\u3002 \u786e\u8ba4\u65e0\u8bef\u540e\uff0c\u70b9\u51fb \u521b\u5efa \u6309\u94ae\u3002 \u5982\u679c\u7d22\u5f15\u521b\u5efa\u6210\u529f\uff0c \u7d22\u5f15 \u9762\u677f\u4f1a\u663e\u793a\u8fd9\u4e2a\u7d22\u5f15\u7684\u5c5e\u6027\u5217\u8868\u3002","title":"\u521b\u5efa\u7d22\u5f15"},{"location":"nebula-studio/manage-schema/st-ug-crud-index/#_4","text":"\u5728\u9876\u90e8\u5bfc\u822a\u680f\u4e2d\uff0c\u70b9\u51fb Schema \u9875\u7b7e\u3002 \u5728 \u56fe\u7a7a\u95f4\u5217\u8868 \u4e2d\uff0c\u627e\u5230\u56fe\u7a7a\u95f4\uff0c\u70b9\u51fb\u56fe\u7a7a\u95f4\u540d\u79f0\u6216\u8005\u5728 \u64cd\u4f5c \u5217\u4e2d\u70b9\u51fb Schema \u3002 \u5728 \u5f53\u524d\u56fe\u7a7a\u95f4 \u91cc\u786e\u8ba4\u56fe\u7a7a\u95f4\u540d\u79f0\u3002\u7528\u6237\u4e5f\u53ef\u4ee5\u901a\u8fc7\u9009\u62e9\u56fe\u7a7a\u95f4\u540d\u79f0\u5207\u6362\u56fe\u7a7a\u95f4\u3002 \u70b9\u51fb \u7d22\u5f15 \u9875\u7b7e\uff0c\u5728\u5217\u8868\u5de6\u4e0a\u65b9\uff0c\u9009\u62e9\u9700\u8981\u67e5\u770b\u7684\u7d22\u5f15\u7c7b\u578b\u3002 \u5728\u5217\u8868\u4e2d\uff0c\u627e\u5230\u9700\u8981\u67e5\u770b\u7684\u7d22\u5f15\uff0c\u70b9\u51fb\u7d22\u5f15\u6240\u5728\u884c\u5373\u53ef\u5c55\u5f00\u67e5\u770b\u8be5\u7d22\u5f15\u76f8\u5173\u7684\u6240\u6709\u5c5e\u6027\u540d\u79f0\u3001\u6570\u636e\u7c7b\u578b\u3002","title":"\u67e5\u770b\u7d22\u5f15"},{"location":"nebula-studio/manage-schema/st-ug-crud-index/#_5","text":"\u5728\u9876\u90e8\u5bfc\u822a\u680f\u4e2d\uff0c\u70b9\u51fb Schema \u9875\u7b7e\u3002 \u5728 \u56fe\u7a7a\u95f4\u5217\u8868 \u4e2d\uff0c\u627e\u5230\u56fe\u7a7a\u95f4\uff0c\u70b9\u51fb\u56fe\u7a7a\u95f4\u540d\u79f0\u6216\u8005\u5728 \u64cd\u4f5c \u5217\u4e2d\u70b9\u51fb Schema \u3002 \u5728 \u5f53\u524d\u56fe\u7a7a\u95f4 \u91cc\u786e\u8ba4\u56fe\u7a7a\u95f4\u540d\u79f0\u3002\u7528\u6237\u4e5f\u53ef\u4ee5\u901a\u8fc7\u9009\u62e9\u56fe\u7a7a\u95f4\u540d\u79f0\u5207\u6362\u56fe\u7a7a\u95f4\u3002 \u70b9\u51fb \u7d22\u5f15 \u9875\u7b7e\uff0c\u5728\u5217\u8868\u5de6\u4e0a\u65b9\uff0c\u9009\u62e9\u7d22\u5f15\u7c7b\u578b\u3002 \u627e\u5230\u9700\u8981\u91cd\u5efa\u7684\u7d22\u5f15\uff0c\u5728 \u64cd\u4f5c\u5217 \u70b9\u51fb \u91cd\u5efa\u7d22\u5f15 \u3002 Note \u5173\u4e8e\u91cd\u5efa\u7d22\u5f15\uff0c\u8be6\u60c5\u53c2\u89c1 REBUILD INDEX \u3002","title":"\u91cd\u5efa\u7d22\u5f15"},{"location":"nebula-studio/manage-schema/st-ug-crud-index/#_6","text":"\u5728\u9876\u90e8\u5bfc\u822a\u680f\u4e2d\uff0c\u70b9\u51fb Schema \u9875\u7b7e\u3002 \u5728 \u56fe\u7a7a\u95f4\u5217\u8868 \u4e2d\uff0c\u627e\u5230\u56fe\u7a7a\u95f4\uff0c\u70b9\u51fb\u56fe\u7a7a\u95f4\u540d\u79f0\u6216\u8005\u5728 \u64cd\u4f5c \u5217\u4e2d\u70b9\u51fb Schema \u3002 \u5728 \u5f53\u524d\u56fe\u7a7a\u95f4 \u91cc\u786e\u8ba4\u56fe\u7a7a\u95f4\u540d\u79f0\u3002\u7528\u6237\u4e5f\u53ef\u4ee5\u901a\u8fc7\u9009\u62e9\u56fe\u7a7a\u95f4\u540d\u79f0\u5207\u6362\u56fe\u7a7a\u95f4\u3002 \u70b9\u51fb \u7d22\u5f15 \u9875\u7b7e\uff0c\u5728\u5217\u8868\u5de6\u4e0a\u65b9\uff0c\u9009\u62e9\u7d22\u5f15\u7c7b\u578b\u3002 \u627e\u5230\u9700\u8981\u5220\u9664\u7684\u7d22\u5f15\uff0c\u5e76\u5728 \u64cd\u4f5c \u5217\u4e2d\uff0c\u70b9\u51fb \u56fe\u6807\u3002 \u5728\u5f39\u51fa\u7684\u5bf9\u8bdd\u6846\u4e2d\u70b9\u51fb \u786e\u8ba4 \u3002","title":"\u5220\u9664\u7d22\u5f15"},{"location":"nebula-studio/manage-schema/st-ug-crud-space/","text":"\u64cd\u4f5c\u56fe\u7a7a\u95f4 \u00b6 Studio \u8fde\u63a5\u5230NebulaGraph\u540e\uff0c\u7528\u6237\u53ef\u4ee5\u521b\u5efa\u6216\u5220\u9664\u56fe\u7a7a\u95f4\u3002\u7528\u6237\u53ef\u4ee5\u4f7f\u7528 \u63a7\u5236\u53f0 \u6216\u8005 Schema \u64cd\u4f5c\u56fe\u7a7a\u95f4\u3002\u672c\u6587\u4ec5\u8bf4\u660e\u5982\u4f55\u4f7f\u7528 Schema \u64cd\u4f5c\u56fe\u7a7a\u95f4\u3002 \u524d\u63d0\u6761\u4ef6 \u00b6 \u64cd\u4f5c\u56fe\u7a7a\u95f4\u4e4b\u524d\uff0c\u7528\u6237\u9700\u8981\u786e\u4fdd\u4ee5\u4e0b\u4fe1\u606f\uff1a Studio \u5df2\u7ecf\u8fde\u63a5\u5230NebulaGraph\u3002 \u5f53\u524d\u767b\u5f55\u7684\u8d26\u53f7\u62e5\u6709\u521b\u5efa\u6216\u5220\u9664\u56fe\u7a7a\u95f4\u7684\u6743\u9650\uff0c\u5373\uff1a \u5982\u679cNebulaGraph\u672a\u5f00\u542f\u8eab\u4efd\u9a8c\u8bc1\uff0c\u7528\u6237\u4ee5\u9ed8\u8ba4\u7528\u6237\u540d user \u8d26\u53f7\u548c\u4efb\u610f\u5bc6\u7801\u767b\u5f55\u3002 \u5982\u679cNebulaGraph\u5df2\u5f00\u542f\u8eab\u4efd\u9a8c\u8bc1\uff0c\u7528\u6237\u4ee5 root \u8d26\u53f7\u53ca\u5176\u5bc6\u7801\u767b\u5f55\u3002 \u521b\u5efa\u56fe\u7a7a\u95f4 \u00b6 \u5728\u9876\u90e8\u5bfc\u822a\u680f\u91cc\uff0c\u70b9\u51fb Schema \u9875\u7b7e\u3002 \u5728\u56fe\u7a7a\u95f4\u5217\u8868\u4e0a\u65b9\uff0c\u70b9\u51fb + \u521b\u5efa\u56fe\u7a7a\u95f4 \u6309\u94ae\uff0c\u5b8c\u6210\u4ee5\u4e0b\u914d\u7f6e\uff1a \u540d\u79f0 \uff1a\u6307\u5b9a\u56fe\u7a7a\u95f4\u540d\u79f0\uff0c\u672c\u793a\u4f8b\u4e2d\u8bbe\u7f6e\u4e3a basketballplayer \u3002\u4e0d\u53ef\u4e0e\u5df2\u6709\u7684\u56fe\u7a7a\u95f4\u540d\u79f0\u91cd\u590d\u3002 vid type \uff1a\u56fe\u7a7a\u95f4\u4e2d\u70b9 ID\uff08VID\uff09\u7684\u6570\u636e\u7c7b\u578b\uff0c\u53ef\u9009\u503c\u4e3a\u5b9a\u957f\u5b57\u7b26\u4e32 FIXED_STRING(<N>) \u6216 INT64 \uff0c\u4e00\u65e6\u5b9a\u4e49\u65e0\u6cd5\u4fee\u6539\u3002\u672c\u793a\u4f8b\u8bbe\u7f6e\u4e3a FIXED_STRING(32) \u3002\u8be6\u7ec6\u4fe1\u606f\uff0c\u53c2\u8003 VID \u3002 \u63cf\u8ff0 \uff1a\u56fe\u7a7a\u95f4\u7684\u63cf\u8ff0\uff0c\u6700\u5927\u4e3a 256 \u5b57\u8282\u3002\u9ed8\u8ba4\u65e0\u63cf\u8ff0\u3002\u672c\u793a\u4f8b\u8bbe\u7f6e\u4e3a Statistics of basketball players \u3002 \u53ef\u9009\u53c2\u6570 \uff1a\u5206\u522b\u8bbe\u7f6e partition_num \u3001 replica_factor \u7684\u503c\u3002\u5728\u672c\u793a\u4f8b\u4e2d\uff0c\u4e24\u4e2a\u53c2\u6570\u5206\u522b\u8bbe\u7f6e\u4e3a 100 \u3001 1 \u3002\u8be6\u7ec6\u4fe1\u606f\uff0c\u53c2\u8003 CREATE SPACE \u8bed\u6cd5 \u3002 \u5728 \u5bf9\u5e94\u7684 nGQL \u8bed\u53e5 \u9762\u677f\u4e0a\uff0c\u7528\u6237\u80fd\u770b\u5230\u4e0a\u8ff0\u8bbe\u7f6e\u5bf9\u5e94\u7684 nGQL \u8bed\u53e5\u3002\u5982\u4e0b\u6240\u793a\uff1a CREATE SPACE basketballplayer (partition_num = 100, replica_factor = 1, vid_type = FIXED_STRING(32)) COMMENT = \"Statistics of basketball players\" \u914d\u7f6e\u786e\u8ba4\u65e0\u8bef\u540e\uff0c\u70b9\u51fb \u521b\u5efa \u6309\u94ae\u3002 \u5982\u679c\u9875\u9762\u56de\u5230 \u56fe\u7a7a\u95f4\u5217\u8868 \uff0c\u800c\u4e14\u5217\u8868\u4e2d\u663e\u793a\u521a\u521b\u5efa\u7684\u56fe\u7a7a\u95f4\u4fe1\u606f\uff0c\u8868\u793a\u56fe\u7a7a\u95f4\u521b\u5efa\u6210\u529f\u3002 \u5220\u9664\u56fe\u7a7a\u95f4 \u00b6 Danger \u5220\u9664\u56fe\u7a7a\u95f4\u4f1a\u5220\u9664\u5176\u4e2d\u7684\u6240\u6709\u6570\u636e\uff0c\u5df2\u5220\u9664\u7684\u6570\u636e\u5982\u672a \u5907\u4efd \u65e0\u6cd5\u6062\u590d\u3002 \u5728\u9876\u90e8\u5bfc\u822a\u680f\u91cc\uff0c\u70b9\u51fb Schema \u9875\u7b7e\u3002 \u5728\u56fe\u7a7a\u95f4\u5217\u8868\u91cc\uff0c\u627e\u5230\u9700\u8981\u5220\u9664\u7684\u56fe\u7a7a\u95f4\uff0c\u5e76\u5728 \u64cd\u4f5c \u5217\u4e2d\uff0c\u9009\u62e9 \u5220\u9664\u56fe\u7a7a\u95f4 \u3002 \u5728\u5f39\u51fa\u7684\u5bf9\u8bdd\u6846\u4e2d\u70b9\u51fb \u786e\u8ba4 \u3002 \u540e\u7eed\u64cd\u4f5c \u00b6 \u56fe\u7a7a\u95f4\u521b\u5efa\u6210\u529f\u540e\uff0c\u7528\u6237\u53ef\u4ee5\u5f00\u59cb\u521b\u5efa\u6216\u4fee\u6539 Schema\uff0c\u5305\u62ec\uff1a \u64cd\u4f5c Tag \u64cd\u4f5c Edge type \u64cd\u4f5c\u7d22\u5f15","title":"\u64cd\u4f5c\u56fe\u7a7a\u95f4"},{"location":"nebula-studio/manage-schema/st-ug-crud-space/#_1","text":"Studio \u8fde\u63a5\u5230NebulaGraph\u540e\uff0c\u7528\u6237\u53ef\u4ee5\u521b\u5efa\u6216\u5220\u9664\u56fe\u7a7a\u95f4\u3002\u7528\u6237\u53ef\u4ee5\u4f7f\u7528 \u63a7\u5236\u53f0 \u6216\u8005 Schema \u64cd\u4f5c\u56fe\u7a7a\u95f4\u3002\u672c\u6587\u4ec5\u8bf4\u660e\u5982\u4f55\u4f7f\u7528 Schema \u64cd\u4f5c\u56fe\u7a7a\u95f4\u3002","title":"\u64cd\u4f5c\u56fe\u7a7a\u95f4"},{"location":"nebula-studio/manage-schema/st-ug-crud-space/#_2","text":"\u64cd\u4f5c\u56fe\u7a7a\u95f4\u4e4b\u524d\uff0c\u7528\u6237\u9700\u8981\u786e\u4fdd\u4ee5\u4e0b\u4fe1\u606f\uff1a Studio \u5df2\u7ecf\u8fde\u63a5\u5230NebulaGraph\u3002 \u5f53\u524d\u767b\u5f55\u7684\u8d26\u53f7\u62e5\u6709\u521b\u5efa\u6216\u5220\u9664\u56fe\u7a7a\u95f4\u7684\u6743\u9650\uff0c\u5373\uff1a \u5982\u679cNebulaGraph\u672a\u5f00\u542f\u8eab\u4efd\u9a8c\u8bc1\uff0c\u7528\u6237\u4ee5\u9ed8\u8ba4\u7528\u6237\u540d user \u8d26\u53f7\u548c\u4efb\u610f\u5bc6\u7801\u767b\u5f55\u3002 \u5982\u679cNebulaGraph\u5df2\u5f00\u542f\u8eab\u4efd\u9a8c\u8bc1\uff0c\u7528\u6237\u4ee5 root \u8d26\u53f7\u53ca\u5176\u5bc6\u7801\u767b\u5f55\u3002","title":"\u524d\u63d0\u6761\u4ef6"},{"location":"nebula-studio/manage-schema/st-ug-crud-space/#_3","text":"\u5728\u9876\u90e8\u5bfc\u822a\u680f\u91cc\uff0c\u70b9\u51fb Schema \u9875\u7b7e\u3002 \u5728\u56fe\u7a7a\u95f4\u5217\u8868\u4e0a\u65b9\uff0c\u70b9\u51fb + \u521b\u5efa\u56fe\u7a7a\u95f4 \u6309\u94ae\uff0c\u5b8c\u6210\u4ee5\u4e0b\u914d\u7f6e\uff1a \u540d\u79f0 \uff1a\u6307\u5b9a\u56fe\u7a7a\u95f4\u540d\u79f0\uff0c\u672c\u793a\u4f8b\u4e2d\u8bbe\u7f6e\u4e3a basketballplayer \u3002\u4e0d\u53ef\u4e0e\u5df2\u6709\u7684\u56fe\u7a7a\u95f4\u540d\u79f0\u91cd\u590d\u3002 vid type \uff1a\u56fe\u7a7a\u95f4\u4e2d\u70b9 ID\uff08VID\uff09\u7684\u6570\u636e\u7c7b\u578b\uff0c\u53ef\u9009\u503c\u4e3a\u5b9a\u957f\u5b57\u7b26\u4e32 FIXED_STRING(<N>) \u6216 INT64 \uff0c\u4e00\u65e6\u5b9a\u4e49\u65e0\u6cd5\u4fee\u6539\u3002\u672c\u793a\u4f8b\u8bbe\u7f6e\u4e3a FIXED_STRING(32) \u3002\u8be6\u7ec6\u4fe1\u606f\uff0c\u53c2\u8003 VID \u3002 \u63cf\u8ff0 \uff1a\u56fe\u7a7a\u95f4\u7684\u63cf\u8ff0\uff0c\u6700\u5927\u4e3a 256 \u5b57\u8282\u3002\u9ed8\u8ba4\u65e0\u63cf\u8ff0\u3002\u672c\u793a\u4f8b\u8bbe\u7f6e\u4e3a Statistics of basketball players \u3002 \u53ef\u9009\u53c2\u6570 \uff1a\u5206\u522b\u8bbe\u7f6e partition_num \u3001 replica_factor \u7684\u503c\u3002\u5728\u672c\u793a\u4f8b\u4e2d\uff0c\u4e24\u4e2a\u53c2\u6570\u5206\u522b\u8bbe\u7f6e\u4e3a 100 \u3001 1 \u3002\u8be6\u7ec6\u4fe1\u606f\uff0c\u53c2\u8003 CREATE SPACE \u8bed\u6cd5 \u3002 \u5728 \u5bf9\u5e94\u7684 nGQL \u8bed\u53e5 \u9762\u677f\u4e0a\uff0c\u7528\u6237\u80fd\u770b\u5230\u4e0a\u8ff0\u8bbe\u7f6e\u5bf9\u5e94\u7684 nGQL \u8bed\u53e5\u3002\u5982\u4e0b\u6240\u793a\uff1a CREATE SPACE basketballplayer (partition_num = 100, replica_factor = 1, vid_type = FIXED_STRING(32)) COMMENT = \"Statistics of basketball players\" \u914d\u7f6e\u786e\u8ba4\u65e0\u8bef\u540e\uff0c\u70b9\u51fb \u521b\u5efa \u6309\u94ae\u3002 \u5982\u679c\u9875\u9762\u56de\u5230 \u56fe\u7a7a\u95f4\u5217\u8868 \uff0c\u800c\u4e14\u5217\u8868\u4e2d\u663e\u793a\u521a\u521b\u5efa\u7684\u56fe\u7a7a\u95f4\u4fe1\u606f\uff0c\u8868\u793a\u56fe\u7a7a\u95f4\u521b\u5efa\u6210\u529f\u3002","title":"\u521b\u5efa\u56fe\u7a7a\u95f4"},{"location":"nebula-studio/manage-schema/st-ug-crud-space/#_4","text":"Danger \u5220\u9664\u56fe\u7a7a\u95f4\u4f1a\u5220\u9664\u5176\u4e2d\u7684\u6240\u6709\u6570\u636e\uff0c\u5df2\u5220\u9664\u7684\u6570\u636e\u5982\u672a \u5907\u4efd \u65e0\u6cd5\u6062\u590d\u3002 \u5728\u9876\u90e8\u5bfc\u822a\u680f\u91cc\uff0c\u70b9\u51fb Schema \u9875\u7b7e\u3002 \u5728\u56fe\u7a7a\u95f4\u5217\u8868\u91cc\uff0c\u627e\u5230\u9700\u8981\u5220\u9664\u7684\u56fe\u7a7a\u95f4\uff0c\u5e76\u5728 \u64cd\u4f5c \u5217\u4e2d\uff0c\u9009\u62e9 \u5220\u9664\u56fe\u7a7a\u95f4 \u3002 \u5728\u5f39\u51fa\u7684\u5bf9\u8bdd\u6846\u4e2d\u70b9\u51fb \u786e\u8ba4 \u3002","title":"\u5220\u9664\u56fe\u7a7a\u95f4"},{"location":"nebula-studio/manage-schema/st-ug-crud-space/#_5","text":"\u56fe\u7a7a\u95f4\u521b\u5efa\u6210\u529f\u540e\uff0c\u7528\u6237\u53ef\u4ee5\u5f00\u59cb\u521b\u5efa\u6216\u4fee\u6539 Schema\uff0c\u5305\u62ec\uff1a \u64cd\u4f5c Tag \u64cd\u4f5c Edge type \u64cd\u4f5c\u7d22\u5f15","title":"\u540e\u7eed\u64cd\u4f5c"},{"location":"nebula-studio/manage-schema/st-ug-crud-tag/","text":"\u64cd\u4f5c Tag\uff08\u70b9\u7c7b\u578b\uff09 \u00b6 \u5728NebulaGraph\u4e2d\u521b\u5efa\u56fe\u7a7a\u95f4\u540e\uff0c\u7528\u6237\u9700\u8981\u521b\u5efa Tag\uff08\u70b9\u7c7b\u578b\uff09\u3002\u7528\u6237\u53ef\u4ee5\u9009\u62e9\u4f7f\u7528 \u63a7\u5236\u53f0 \u6216\u8005 Schema \u7ba1\u7406\u529f\u80fd\u64cd\u4f5c Tag\u3002\u672c\u6587\u4ec5\u8bf4\u660e\u5982\u4f55\u4f7f\u7528 Schema \u7ba1\u7406\u529f\u80fd\u64cd\u4f5c Tag\u3002 \u524d\u63d0\u6761\u4ef6 \u00b6 \u5728 Studio \u4e0a\u64cd\u4f5c Tag \u4e4b\u524d\uff0c\u7528\u6237\u5fc5\u987b\u786e\u8ba4\u4ee5\u4e0b\u4fe1\u606f\uff1a Studio \u5df2\u7ecf\u8fde\u63a5\u5230NebulaGraph\u3002 \u56fe\u7a7a\u95f4\u5df2\u7ecf\u521b\u5efa\u3002 \u5f53\u524d\u767b\u5f55\u7684\u8d26\u53f7\u62e5\u6709 GOD\u3001ADMIN \u6216\u8005 DBA \u7684\u6743\u9650\u3002 \u521b\u5efa Tag \u00b6 \u5728\u9876\u90e8\u5bfc\u822a\u680f\u4e2d\uff0c\u70b9\u51fb Schema \u9875\u7b7e\u3002 \u5728 \u56fe\u7a7a\u95f4\u5217\u8868 \u4e2d\uff0c\u627e\u5230\u56fe\u7a7a\u95f4\uff0c\u70b9\u51fb\u56fe\u7a7a\u95f4\u540d\u79f0\u6216\u8005\u5728 \u64cd\u4f5c \u5217\u4e2d\u70b9\u51fb Schema \u3002 \u5728 \u5f53\u524d\u56fe\u7a7a\u95f4 \u91cc\u786e\u8ba4\u56fe\u7a7a\u95f4\u540d\u79f0\u3002\u7528\u6237\u4e5f\u53ef\u4ee5\u901a\u8fc7\u9009\u62e9\u56fe\u7a7a\u95f4\u540d\u79f0\u5207\u6362\u56fe\u7a7a\u95f4\u3002 \u70b9\u51fb \u6807\u7b7e \u9875\u7b7e\uff0c\u5e76\u70b9\u51fb + \u521b\u5efa \u6309\u94ae\u3002 \u5728 \u521b\u5efa\u6807\u7b7e \u9875\u9762\u4e0a\uff0c\u5b8c\u6210\u4ee5\u4e0b\u8bbe\u7f6e\uff1a \u540d\u79f0 \uff1a\u8f93\u5165 Tag \u540d\u79f0\u3002\u672c\u793a\u4f8b\u4e2d\uff0c\u8f93\u5165 player \u3002 \u63cf\u8ff0 \uff08\u53ef\u9009\uff09\uff1a\u8f93\u5165 Tag \u7684\u5907\u6ce8\u3002 \u5b9a\u4e49\u5c5e\u6027 \uff08\u53ef\u9009\uff09\uff1a\u5982\u679c Tag \u9700\u8981\u5c5e\u6027\uff0c\u70b9\u51fb + \u6dfb\u52a0\u5c5e\u6027 \uff0c\u6dfb\u52a0\u4e00\u4e2a\u6216\u591a\u4e2a\u5c5e\u6027\uff1a \u8f93\u5165\u5c5e\u6027\u540d\u79f0\u3002 \u9009\u62e9\u6570\u636e\u7c7b\u578b\u3002 \u9009\u62e9\u662f\u5426\u5141\u8bb8\u7a7a\u503c\u3002 \uff08\u53ef\u9009\uff09\u8f93\u5165\u9ed8\u8ba4\u503c\u3002 \uff08\u53ef\u9009\uff09\u8f93\u5165\u5c5e\u6027\u5907\u6ce8\u3002 \u8bbe\u7f6eTTL\uff08\u5b58\u6d3b\u65f6\u95f4\uff09 \uff08\u53ef\u9009\uff09\uff1aTag \u672a\u8bbe\u7f6e\u7d22\u5f15\u65f6\uff0c\u7528\u6237\u53ef\u4ee5\u8bbe\u7f6e TTL\u3002\u52fe\u9009 \u8bbe\u7f6eTTL\uff08\u5b58\u6d3b\u65f6\u95f4\uff09 \uff0c\u8bbe\u7f6e TTL_COL \u548c TTL_DURATION \uff08\u5355\u4f4d\uff1a\u79d2\uff09\u3002\u8be6\u60c5\u53c2\u8003 TTL \u914d\u7f6e \u3002 \u5b8c\u6210\u8bbe\u7f6e\u540e\uff0c\u5728 \u5bf9\u5e94\u7684nGQL\u8bed\u53e5 \u9762\u677f\uff0c\u7528\u6237\u80fd\u770b\u5230\u4e0e\u4e0a\u8ff0\u914d\u7f6e\u7b49\u4ef7\u7684 nGQL \u8bed\u53e5\u3002 \u786e\u8ba4\u65e0\u8bef\u540e\uff0c\u70b9\u51fb \u521b\u5efa \u6309\u94ae\u3002 \u5982\u679c Tag \u521b\u5efa\u6210\u529f\uff0c \u6807\u7b7e \u9762\u677f\u4f1a\u663e\u793a\u8fd9\u4e2a Tag \u7684\u5c5e\u6027\u5217\u8868\u3002 \u4fee\u6539 Tag \u00b6 \u5728\u9876\u90e8\u5bfc\u822a\u680f\u4e2d\uff0c\u70b9\u51fb Schema \u9875\u7b7e\u3002 \u5728 \u56fe\u7a7a\u95f4\u5217\u8868 \u4e2d\uff0c\u627e\u5230\u56fe\u7a7a\u95f4\uff0c\u70b9\u51fb\u56fe\u7a7a\u95f4\u540d\u79f0\u6216\u8005\u5728 \u64cd\u4f5c \u5217\u4e2d\u70b9\u51fb Schema \u3002 \u5728 \u5f53\u524d\u56fe\u7a7a\u95f4 \u91cc\u786e\u8ba4\u56fe\u7a7a\u95f4\u540d\u79f0\u3002\u7528\u6237\u4e5f\u53ef\u4ee5\u901a\u8fc7\u9009\u62e9\u56fe\u7a7a\u95f4\u540d\u79f0\u5207\u6362\u56fe\u7a7a\u95f4\u3002 \u70b9\u51fb \u6807\u7b7e \u9875\u7b7e\uff0c\u627e\u5230\u9700\u8981\u4fee\u6539\u7684 Tag\uff0c\u5e76\u5728 \u64cd\u4f5c \u5217\u4e2d\uff0c\u70b9\u51fb \u56fe\u6807\u3002 \u5728 \u7f16\u8f91 \u9875\u9762\uff0c\u7528\u6237\u53ef\u4ee5\u9009\u62e9\u4ee5\u4e0b\u64cd\u4f5c\uff1a \u5982\u679c\u8981\u4fee\u6539\u63cf\u8ff0\uff1a\u5728 \u63cf\u8ff0 \u53f3\u4fa7\u70b9\u51fb \u7f16\u8f91 \uff0c\u4fee\u6539\u540e\u70b9\u51fb \u786e\u8ba4 \u3002 \u5982\u679c\u8981\u4fee\u6539\u5c5e\u6027\uff1a\u5728 \u5b9a\u4e49\u5c5e\u6027 \u533a\u57df\uff0c\u627e\u5230\u9700\u8981\u4fee\u6539\u7684\u5c5e\u6027\uff0c\u5728\u53f3\u4fa7\u70b9\u51fb \u7f16\u8f91 \uff0c\u4fee\u6539\u540e\u70b9\u51fb \u786e\u8ba4 \u3002 \u5982\u679c\u8981\u5220\u9664\u5c5e\u6027\uff1a\u5728 \u5b9a\u4e49\u5c5e\u6027 \u533a\u57df\uff0c\u627e\u5230\u9700\u8981\u5220\u9664\u7684\u5c5e\u6027\uff0c\u5728\u53f3\u4fa7\u70b9\u51fb \u5220\u9664 \uff0c\u7136\u540e\u70b9\u51fb \u786e\u8ba4 \u3002 \u5982\u679c\u8981\u6dfb\u52a0\u5c5e\u6027\uff1a\u5728 \u5b9a\u4e49\u5c5e\u6027 \u533a\u57df\uff0c\u70b9\u51fb + \u6dfb\u52a0\u5c5e\u6027 \uff0c\u8bbe\u7f6e\u5c5e\u6027\u4fe1\u606f\uff0c\u70b9\u51fb \u786e\u8ba4 \u3002\u8be6\u7ec6\u8bf4\u660e\u53c2\u8003 \u521b\u5efa Tag \u3002 \u5982\u679c\u8981\u4fee\u6539 TTL \u4fe1\u606f\uff1a\u5728 \u8bbe\u7f6e TTL \u533a\u57df\uff0c\u70b9\u51fb \u7f16\u8f91 \uff0c\u4fee\u6539\u540e\u70b9\u51fb \u786e\u8ba4 \u3002\u8be6\u60c5\u53c2\u8003 TTL \u914d\u7f6e \u3002 \u5982\u679c\u8981\u5220\u9664\u5df2\u7ecf\u914d\u7f6e\u7684 TTL \u4fe1\u606f\uff1a\u5728 \u8bbe\u7f6e TTL \u533a\u57df\uff0c\u53d6\u6d88\u52fe\u9009 \u8bbe\u7f6eTTL\uff08\u5b58\u6d3b\u65f6\u95f4\uff09 \uff0c\u7136\u540e\u70b9\u51fb \u786e\u5b9a \u3002 \u5982\u679c\u8981\u914d\u7f6e TTL \u4fe1\u606f\uff1a\u5728 \u8bbe\u7f6e TTL \u533a\u57df\uff0c\u52fe\u9009 \u8bbe\u7f6eTTL\uff08\u5b58\u6d3b\u65f6\u95f4\uff09 \uff0c\u8bbe\u7f6e TTL_COL \u548c TTL_DURATION \uff08\u5355\u4f4d\uff1a\u79d2\uff09\uff0c\u70b9\u51fb \u786e\u8ba4 \u3002\u8be6\u60c5\u53c2\u8003 TTL \u914d\u7f6e \u3002 Note TTL \u4e0e\u7d22\u5f15\u7684\u5171\u5b58\u95ee\u9898\uff0c\u8be6\u60c5\u53c2\u8003 TTL \u3002 \u5220\u9664 Tag \u00b6 Danger \u5220\u9664 Tag \u524d\u5148\u786e\u8ba4 \u5f71\u54cd \uff0c\u5df2\u5220\u9664\u7684\u6570\u636e\u5982\u672a \u5907\u4efd \u65e0\u6cd5\u6062\u590d\u3002 \u5728\u9876\u90e8\u5bfc\u822a\u680f\u4e2d\uff0c\u70b9\u51fb Schema \u9875\u7b7e\u3002 \u5728 \u56fe\u7a7a\u95f4\u5217\u8868 \u4e2d\uff0c\u627e\u5230\u56fe\u7a7a\u95f4\uff0c\u70b9\u51fb\u56fe\u7a7a\u95f4\u540d\u79f0\u6216\u8005\u5728 \u64cd\u4f5c \u5217\u4e2d\u70b9\u51fb Schema \u3002 \u5728 \u5f53\u524d\u56fe\u7a7a\u95f4 \u91cc\u786e\u8ba4\u56fe\u7a7a\u95f4\u540d\u79f0\u3002\u7528\u6237\u4e5f\u53ef\u4ee5\u901a\u8fc7\u9009\u62e9\u56fe\u7a7a\u95f4\u540d\u79f0\u5207\u6362\u56fe\u7a7a\u95f4\u3002 \u70b9\u51fb \u6807\u7b7e \u9875\u7b7e\uff0c\u627e\u5230\u9700\u8981\u5220\u9664\u7684 Tag\uff0c\u5e76\u5728 \u64cd\u4f5c \u5217\u4e2d\uff0c\u70b9\u51fb \u56fe\u6807\u3002 \u5728\u5f39\u51fa\u7684\u5bf9\u8bdd\u6846\u4e2d\u70b9\u51fb \u786e\u8ba4 \u3002 \u540e\u7eed\u64cd\u4f5c \u00b6 Tag \u521b\u5efa\u6210\u529f\u540e\uff0c\u7528\u6237\u53ef\u4ee5\u5728 \u63a7\u5236\u53f0 \u4e0a\u9010\u6761\u63d2\u5165\u70b9\u6570\u636e\uff0c\u6216\u8005\u4f7f\u7528 \u5bfc\u5165 \u529f\u80fd\u6279\u91cf\u63d2\u5165\u70b9\u6570\u636e\u3002","title":"\u64cd\u4f5c Tag"},{"location":"nebula-studio/manage-schema/st-ug-crud-tag/#tag","text":"\u5728NebulaGraph\u4e2d\u521b\u5efa\u56fe\u7a7a\u95f4\u540e\uff0c\u7528\u6237\u9700\u8981\u521b\u5efa Tag\uff08\u70b9\u7c7b\u578b\uff09\u3002\u7528\u6237\u53ef\u4ee5\u9009\u62e9\u4f7f\u7528 \u63a7\u5236\u53f0 \u6216\u8005 Schema \u7ba1\u7406\u529f\u80fd\u64cd\u4f5c Tag\u3002\u672c\u6587\u4ec5\u8bf4\u660e\u5982\u4f55\u4f7f\u7528 Schema \u7ba1\u7406\u529f\u80fd\u64cd\u4f5c Tag\u3002","title":"\u64cd\u4f5c Tag\uff08\u70b9\u7c7b\u578b\uff09"},{"location":"nebula-studio/manage-schema/st-ug-crud-tag/#_1","text":"\u5728 Studio \u4e0a\u64cd\u4f5c Tag \u4e4b\u524d\uff0c\u7528\u6237\u5fc5\u987b\u786e\u8ba4\u4ee5\u4e0b\u4fe1\u606f\uff1a Studio \u5df2\u7ecf\u8fde\u63a5\u5230NebulaGraph\u3002 \u56fe\u7a7a\u95f4\u5df2\u7ecf\u521b\u5efa\u3002 \u5f53\u524d\u767b\u5f55\u7684\u8d26\u53f7\u62e5\u6709 GOD\u3001ADMIN \u6216\u8005 DBA \u7684\u6743\u9650\u3002","title":"\u524d\u63d0\u6761\u4ef6"},{"location":"nebula-studio/manage-schema/st-ug-crud-tag/#tag_1","text":"\u5728\u9876\u90e8\u5bfc\u822a\u680f\u4e2d\uff0c\u70b9\u51fb Schema \u9875\u7b7e\u3002 \u5728 \u56fe\u7a7a\u95f4\u5217\u8868 \u4e2d\uff0c\u627e\u5230\u56fe\u7a7a\u95f4\uff0c\u70b9\u51fb\u56fe\u7a7a\u95f4\u540d\u79f0\u6216\u8005\u5728 \u64cd\u4f5c \u5217\u4e2d\u70b9\u51fb Schema \u3002 \u5728 \u5f53\u524d\u56fe\u7a7a\u95f4 \u91cc\u786e\u8ba4\u56fe\u7a7a\u95f4\u540d\u79f0\u3002\u7528\u6237\u4e5f\u53ef\u4ee5\u901a\u8fc7\u9009\u62e9\u56fe\u7a7a\u95f4\u540d\u79f0\u5207\u6362\u56fe\u7a7a\u95f4\u3002 \u70b9\u51fb \u6807\u7b7e \u9875\u7b7e\uff0c\u5e76\u70b9\u51fb + \u521b\u5efa \u6309\u94ae\u3002 \u5728 \u521b\u5efa\u6807\u7b7e \u9875\u9762\u4e0a\uff0c\u5b8c\u6210\u4ee5\u4e0b\u8bbe\u7f6e\uff1a \u540d\u79f0 \uff1a\u8f93\u5165 Tag \u540d\u79f0\u3002\u672c\u793a\u4f8b\u4e2d\uff0c\u8f93\u5165 player \u3002 \u63cf\u8ff0 \uff08\u53ef\u9009\uff09\uff1a\u8f93\u5165 Tag \u7684\u5907\u6ce8\u3002 \u5b9a\u4e49\u5c5e\u6027 \uff08\u53ef\u9009\uff09\uff1a\u5982\u679c Tag \u9700\u8981\u5c5e\u6027\uff0c\u70b9\u51fb + \u6dfb\u52a0\u5c5e\u6027 \uff0c\u6dfb\u52a0\u4e00\u4e2a\u6216\u591a\u4e2a\u5c5e\u6027\uff1a \u8f93\u5165\u5c5e\u6027\u540d\u79f0\u3002 \u9009\u62e9\u6570\u636e\u7c7b\u578b\u3002 \u9009\u62e9\u662f\u5426\u5141\u8bb8\u7a7a\u503c\u3002 \uff08\u53ef\u9009\uff09\u8f93\u5165\u9ed8\u8ba4\u503c\u3002 \uff08\u53ef\u9009\uff09\u8f93\u5165\u5c5e\u6027\u5907\u6ce8\u3002 \u8bbe\u7f6eTTL\uff08\u5b58\u6d3b\u65f6\u95f4\uff09 \uff08\u53ef\u9009\uff09\uff1aTag \u672a\u8bbe\u7f6e\u7d22\u5f15\u65f6\uff0c\u7528\u6237\u53ef\u4ee5\u8bbe\u7f6e TTL\u3002\u52fe\u9009 \u8bbe\u7f6eTTL\uff08\u5b58\u6d3b\u65f6\u95f4\uff09 \uff0c\u8bbe\u7f6e TTL_COL \u548c TTL_DURATION \uff08\u5355\u4f4d\uff1a\u79d2\uff09\u3002\u8be6\u60c5\u53c2\u8003 TTL \u914d\u7f6e \u3002 \u5b8c\u6210\u8bbe\u7f6e\u540e\uff0c\u5728 \u5bf9\u5e94\u7684nGQL\u8bed\u53e5 \u9762\u677f\uff0c\u7528\u6237\u80fd\u770b\u5230\u4e0e\u4e0a\u8ff0\u914d\u7f6e\u7b49\u4ef7\u7684 nGQL \u8bed\u53e5\u3002 \u786e\u8ba4\u65e0\u8bef\u540e\uff0c\u70b9\u51fb \u521b\u5efa \u6309\u94ae\u3002 \u5982\u679c Tag \u521b\u5efa\u6210\u529f\uff0c \u6807\u7b7e \u9762\u677f\u4f1a\u663e\u793a\u8fd9\u4e2a Tag \u7684\u5c5e\u6027\u5217\u8868\u3002","title":"\u521b\u5efa Tag"},{"location":"nebula-studio/manage-schema/st-ug-crud-tag/#tag_2","text":"\u5728\u9876\u90e8\u5bfc\u822a\u680f\u4e2d\uff0c\u70b9\u51fb Schema \u9875\u7b7e\u3002 \u5728 \u56fe\u7a7a\u95f4\u5217\u8868 \u4e2d\uff0c\u627e\u5230\u56fe\u7a7a\u95f4\uff0c\u70b9\u51fb\u56fe\u7a7a\u95f4\u540d\u79f0\u6216\u8005\u5728 \u64cd\u4f5c \u5217\u4e2d\u70b9\u51fb Schema \u3002 \u5728 \u5f53\u524d\u56fe\u7a7a\u95f4 \u91cc\u786e\u8ba4\u56fe\u7a7a\u95f4\u540d\u79f0\u3002\u7528\u6237\u4e5f\u53ef\u4ee5\u901a\u8fc7\u9009\u62e9\u56fe\u7a7a\u95f4\u540d\u79f0\u5207\u6362\u56fe\u7a7a\u95f4\u3002 \u70b9\u51fb \u6807\u7b7e \u9875\u7b7e\uff0c\u627e\u5230\u9700\u8981\u4fee\u6539\u7684 Tag\uff0c\u5e76\u5728 \u64cd\u4f5c \u5217\u4e2d\uff0c\u70b9\u51fb \u56fe\u6807\u3002 \u5728 \u7f16\u8f91 \u9875\u9762\uff0c\u7528\u6237\u53ef\u4ee5\u9009\u62e9\u4ee5\u4e0b\u64cd\u4f5c\uff1a \u5982\u679c\u8981\u4fee\u6539\u63cf\u8ff0\uff1a\u5728 \u63cf\u8ff0 \u53f3\u4fa7\u70b9\u51fb \u7f16\u8f91 \uff0c\u4fee\u6539\u540e\u70b9\u51fb \u786e\u8ba4 \u3002 \u5982\u679c\u8981\u4fee\u6539\u5c5e\u6027\uff1a\u5728 \u5b9a\u4e49\u5c5e\u6027 \u533a\u57df\uff0c\u627e\u5230\u9700\u8981\u4fee\u6539\u7684\u5c5e\u6027\uff0c\u5728\u53f3\u4fa7\u70b9\u51fb \u7f16\u8f91 \uff0c\u4fee\u6539\u540e\u70b9\u51fb \u786e\u8ba4 \u3002 \u5982\u679c\u8981\u5220\u9664\u5c5e\u6027\uff1a\u5728 \u5b9a\u4e49\u5c5e\u6027 \u533a\u57df\uff0c\u627e\u5230\u9700\u8981\u5220\u9664\u7684\u5c5e\u6027\uff0c\u5728\u53f3\u4fa7\u70b9\u51fb \u5220\u9664 \uff0c\u7136\u540e\u70b9\u51fb \u786e\u8ba4 \u3002 \u5982\u679c\u8981\u6dfb\u52a0\u5c5e\u6027\uff1a\u5728 \u5b9a\u4e49\u5c5e\u6027 \u533a\u57df\uff0c\u70b9\u51fb + \u6dfb\u52a0\u5c5e\u6027 \uff0c\u8bbe\u7f6e\u5c5e\u6027\u4fe1\u606f\uff0c\u70b9\u51fb \u786e\u8ba4 \u3002\u8be6\u7ec6\u8bf4\u660e\u53c2\u8003 \u521b\u5efa Tag \u3002 \u5982\u679c\u8981\u4fee\u6539 TTL \u4fe1\u606f\uff1a\u5728 \u8bbe\u7f6e TTL \u533a\u57df\uff0c\u70b9\u51fb \u7f16\u8f91 \uff0c\u4fee\u6539\u540e\u70b9\u51fb \u786e\u8ba4 \u3002\u8be6\u60c5\u53c2\u8003 TTL \u914d\u7f6e \u3002 \u5982\u679c\u8981\u5220\u9664\u5df2\u7ecf\u914d\u7f6e\u7684 TTL \u4fe1\u606f\uff1a\u5728 \u8bbe\u7f6e TTL \u533a\u57df\uff0c\u53d6\u6d88\u52fe\u9009 \u8bbe\u7f6eTTL\uff08\u5b58\u6d3b\u65f6\u95f4\uff09 \uff0c\u7136\u540e\u70b9\u51fb \u786e\u5b9a \u3002 \u5982\u679c\u8981\u914d\u7f6e TTL \u4fe1\u606f\uff1a\u5728 \u8bbe\u7f6e TTL \u533a\u57df\uff0c\u52fe\u9009 \u8bbe\u7f6eTTL\uff08\u5b58\u6d3b\u65f6\u95f4\uff09 \uff0c\u8bbe\u7f6e TTL_COL \u548c TTL_DURATION \uff08\u5355\u4f4d\uff1a\u79d2\uff09\uff0c\u70b9\u51fb \u786e\u8ba4 \u3002\u8be6\u60c5\u53c2\u8003 TTL \u914d\u7f6e \u3002 Note TTL \u4e0e\u7d22\u5f15\u7684\u5171\u5b58\u95ee\u9898\uff0c\u8be6\u60c5\u53c2\u8003 TTL \u3002","title":"\u4fee\u6539 Tag"},{"location":"nebula-studio/manage-schema/st-ug-crud-tag/#tag_3","text":"Danger \u5220\u9664 Tag \u524d\u5148\u786e\u8ba4 \u5f71\u54cd \uff0c\u5df2\u5220\u9664\u7684\u6570\u636e\u5982\u672a \u5907\u4efd \u65e0\u6cd5\u6062\u590d\u3002 \u5728\u9876\u90e8\u5bfc\u822a\u680f\u4e2d\uff0c\u70b9\u51fb Schema \u9875\u7b7e\u3002 \u5728 \u56fe\u7a7a\u95f4\u5217\u8868 \u4e2d\uff0c\u627e\u5230\u56fe\u7a7a\u95f4\uff0c\u70b9\u51fb\u56fe\u7a7a\u95f4\u540d\u79f0\u6216\u8005\u5728 \u64cd\u4f5c \u5217\u4e2d\u70b9\u51fb Schema \u3002 \u5728 \u5f53\u524d\u56fe\u7a7a\u95f4 \u91cc\u786e\u8ba4\u56fe\u7a7a\u95f4\u540d\u79f0\u3002\u7528\u6237\u4e5f\u53ef\u4ee5\u901a\u8fc7\u9009\u62e9\u56fe\u7a7a\u95f4\u540d\u79f0\u5207\u6362\u56fe\u7a7a\u95f4\u3002 \u70b9\u51fb \u6807\u7b7e \u9875\u7b7e\uff0c\u627e\u5230\u9700\u8981\u5220\u9664\u7684 Tag\uff0c\u5e76\u5728 \u64cd\u4f5c \u5217\u4e2d\uff0c\u70b9\u51fb \u56fe\u6807\u3002 \u5728\u5f39\u51fa\u7684\u5bf9\u8bdd\u6846\u4e2d\u70b9\u51fb \u786e\u8ba4 \u3002","title":"\u5220\u9664 Tag"},{"location":"nebula-studio/manage-schema/st-ug-crud-tag/#_2","text":"Tag \u521b\u5efa\u6210\u529f\u540e\uff0c\u7528\u6237\u53ef\u4ee5\u5728 \u63a7\u5236\u53f0 \u4e0a\u9010\u6761\u63d2\u5165\u70b9\u6570\u636e\uff0c\u6216\u8005\u4f7f\u7528 \u5bfc\u5165 \u529f\u80fd\u6279\u91cf\u63d2\u5165\u70b9\u6570\u636e\u3002","title":"\u540e\u7eed\u64cd\u4f5c"},{"location":"nebula-studio/manage-schema/st-ug-view-schema/","text":"\u67e5\u770b Schema \u00b6 \u7528\u6237\u53ef\u4ee5\u5728 Studio \u4e0a\u53ef\u89c6\u5316\u5730\u67e5\u770b Schema\u3002 \u64cd\u4f5c\u6b65\u9aa4 \u00b6 \u5728\u9876\u90e8\u5bfc\u822a\u680f\u91cc\uff0c\u70b9\u51fb Schema \u9875\u7b7e\u3002 \u5728 \u56fe\u7a7a\u95f4\u5217\u8868 \u4e2d\uff0c\u627e\u5230\u56fe\u7a7a\u95f4\uff0c\u5355\u51fb\u56fe\u7a7a\u95f4\u540d\u79f0\u6216\u8005\u5728 \u64cd\u4f5c \u5217\u4e2d\u5355\u51fb Schema \u3002 \u5355\u51fb \u67e5\u770b Schema \u9875\u7b7e\uff0c\u5355\u51fb \u83b7\u53d6 Schema \u3002 \u5176\u4ed6\u64cd\u4f5c \u00b6 \u5728 \u56fe\u7a7a\u95f4\u5217\u8868 \u4e2d\uff0c\u627e\u5230\u56fe\u7a7a\u95f4\uff0c\u5728 \u64cd\u4f5c \u5217\u53ef\u4ee5\u6267\u884c\u5982\u4e0b\u64cd\u4f5c\uff1a \u67e5\u770b Schema DDL\uff1a\u663e\u793a\u8be5\u56fe\u7a7a\u95f4\u7684 Schema \u521b\u5efa\u8bed\u53e5\uff0c\u5305\u62ec\u56fe\u7a7a\u95f4\u3001Tag\u3001Edge type \u548c\u7d22\u5f15\u3002 \u514b\u9686\u56fe\u7a7a\u95f4\uff1a\u514b\u9686\u8be5\u56fe\u7a7a\u95f4\u7684 Schema \u5230\u65b0\u7684\u56fe\u7a7a\u95f4\u3002 \u5220\u9664\u56fe\u7a7a\u95f4\uff1a\u5220\u9664\u8be5\u56fe\u7a7a\u95f4\uff0c\u5305\u62ec Schema \u548c\u6240\u6709\u70b9\u8fb9\u6570\u636e\u3002","title":"\u67e5\u770b Schema"},{"location":"nebula-studio/manage-schema/st-ug-view-schema/#schema","text":"\u7528\u6237\u53ef\u4ee5\u5728 Studio \u4e0a\u53ef\u89c6\u5316\u5730\u67e5\u770b Schema\u3002","title":"\u67e5\u770b Schema"},{"location":"nebula-studio/manage-schema/st-ug-view-schema/#_1","text":"\u5728\u9876\u90e8\u5bfc\u822a\u680f\u91cc\uff0c\u70b9\u51fb Schema \u9875\u7b7e\u3002 \u5728 \u56fe\u7a7a\u95f4\u5217\u8868 \u4e2d\uff0c\u627e\u5230\u56fe\u7a7a\u95f4\uff0c\u5355\u51fb\u56fe\u7a7a\u95f4\u540d\u79f0\u6216\u8005\u5728 \u64cd\u4f5c \u5217\u4e2d\u5355\u51fb Schema \u3002 \u5355\u51fb \u67e5\u770b Schema \u9875\u7b7e\uff0c\u5355\u51fb \u83b7\u53d6 Schema \u3002","title":"\u64cd\u4f5c\u6b65\u9aa4"},{"location":"nebula-studio/manage-schema/st-ug-view-schema/#_2","text":"\u5728 \u56fe\u7a7a\u95f4\u5217\u8868 \u4e2d\uff0c\u627e\u5230\u56fe\u7a7a\u95f4\uff0c\u5728 \u64cd\u4f5c \u5217\u53ef\u4ee5\u6267\u884c\u5982\u4e0b\u64cd\u4f5c\uff1a \u67e5\u770b Schema DDL\uff1a\u663e\u793a\u8be5\u56fe\u7a7a\u95f4\u7684 Schema \u521b\u5efa\u8bed\u53e5\uff0c\u5305\u62ec\u56fe\u7a7a\u95f4\u3001Tag\u3001Edge type \u548c\u7d22\u5f15\u3002 \u514b\u9686\u56fe\u7a7a\u95f4\uff1a\u514b\u9686\u8be5\u56fe\u7a7a\u95f4\u7684 Schema \u5230\u65b0\u7684\u56fe\u7a7a\u95f4\u3002 \u5220\u9664\u56fe\u7a7a\u95f4\uff1a\u5220\u9664\u8be5\u56fe\u7a7a\u95f4\uff0c\u5305\u62ec Schema \u548c\u6240\u6709\u70b9\u8fb9\u6570\u636e\u3002","title":"\u5176\u4ed6\u64cd\u4f5c"},{"location":"nebula-studio/quick-start/draft/","text":"Schema \u8349\u56fe \u00b6 Studio \u652f\u6301 Schema \u8349\u56fe\u529f\u80fd\u3002\u7528\u6237\u53ef\u4ee5\u5728\u753b\u677f\u4e0a\u81ea\u884c\u8bbe\u8ba1 Schema\uff0c\u53ef\u4ee5\u76f4\u89c2\u5c55\u793a\u70b9\u8fb9\u5173\u7cfb\uff0c\u8bbe\u8ba1\u5b8c\u6210\u540e\u53ef\u4ee5\u5c06 Schema \u5e94\u7528\u5230\u6307\u5b9a\u56fe\u7a7a\u95f4\u3002 \u529f\u80fd\u8bf4\u660e \u00b6 \u56fe\u5f62\u5316\u8bbe\u8ba1 Schema\u3002 \u5e94\u7528 Schema \u5230\u6307\u5b9a\u56fe\u7a7a\u95f4\u3002 \u5bfc\u51fa Schema \u4e3a PNG \u683c\u5f0f\u56fe\u7247\u3002 \u5165\u53e3 \u00b6 \u5728\u9876\u90e8\u5bfc\u822a\u680f\u91cc\uff0c\u70b9\u51fb \u56fe\u6807\u3002 \u8bbe\u8ba1 Schema \u00b6 \u4ee5 basketballplayer \u7684 Schema \u4e3a\u4f8b\uff0c\u8bf4\u660e\u5982\u4f55\u8bbe\u8ba1 Schema\u3002 \u5728\u9875\u9762\u5de6\u4e0a\u89d2\u5355\u51fb \u65b0\u5efa \u3002 \u5728\u753b\u5e03\u4e0b\u65b9\u9009\u62e9\u5408\u9002\u989c\u8272\u7684 Tag \u6807\u7b7e\uff0c\u6309\u4f4f\u5de6\u952e\u62d6\u62fd\u81f3\u753b\u5e03\u4e2d\uff0c\u521b\u5efa\u4e00\u4e2a Tag\u3002 \u5355\u51fb Tag\uff0c\u5728\u53f3\u4fa7\u586b\u5199\u6807\u7b7e\u540d\u79f0 player \u3001\u63cf\u8ff0\uff0c\u5e76\u4e14\u6dfb\u52a0\u5c5e\u6027 name \u548c age \u3002 \u518d\u6b21\u521b\u5efa\u4e00\u4e2a Tag\uff0c\u6807\u7b7e\u540d\u79f0\u4e3a team \uff0c\u5c5e\u6027\u4e3a name \u3002 \u4ece Tag player \u4e0a\u7684\u951a\u70b9\u8fde\u63a5\u81f3 Tag team \u7684\u951a\u70b9\uff0c\u5355\u51fb\u751f\u6210\u7684\u8fb9\uff0c\u5728\u53f3\u4fa7\u586b\u5199\u8fb9\u7c7b\u578b\u540d\u79f0 serve \uff0c\u5e76\u4e14\u6dfb\u52a0\u5c5e\u6027 start_year \u548c end_year \u3002 \u4ece Tag player \u4e0a\u7684\u951a\u70b9\u8fde\u63a5\u81f3\u81ea\u8eab\u53e6\u4e00\u4e2a\u951a\u70b9\uff0c\u5355\u51fb\u751f\u6210\u7684\u8fb9\uff0c\u5728\u53f3\u4fa7\u586b\u5199\u8fb9\u7c7b\u578b\u540d\u79f0 follow \uff0c\u5e76\u4e14\u6dfb\u52a0\u5c5e\u6027 degree \u3002 \u8bbe\u8ba1\u5b8c\u6210\u540e\uff0c\u5728\u9875\u9762\u4e0a\u65b9\u5355\u51fb \u4fee\u6539\u8349\u56fe\u540d\u79f0\uff0c\u7136\u540e\u5728\u53f3\u4e0a\u89d2\u5355\u51fb \u4fdd\u5b58\u8349\u56fe\u3002 \u5e94\u7528 Schema \u00b6 \u5728\u9875\u9762\u5de6\u4fa7\u7684 \u8349\u56fe\u5217\u8868 \u5185\u9009\u62e9\u9700\u8981\u5bfc\u5165\u7684 Schema \u8349\u56fe\uff0c\u7136\u540e\u5728\u53f3\u4e0a\u89d2\u5355\u51fb \u5e94\u7528\u5230\u56fe\u7a7a\u95f4 \u3002 \u9009\u62e9\u5c06 Schema \u5bfc\u5165\u65b0\u5efa\u56fe\u7a7a\u95f4\u6216\u8005\u5df2\u521b\u5efa\u7684\u56fe\u7a7a\u95f4\uff0c\u5355\u51fb \u786e\u8ba4 \u3002 Note \u521b\u5efa\u56fe\u7a7a\u95f4\u7684\u53c2\u6570\u8bf4\u660e\u53c2\u89c1 CREATE SPACE \u3002 \u5982\u679c\u56fe\u7a7a\u95f4\u4e2d\u5df2\u6709\u91cd\u540d Schema\uff0c\u5bfc\u5165\u64cd\u4f5c\u4f1a\u5931\u8d25\uff0c\u5e76\u63d0\u793a\u4fee\u6539\u540d\u79f0\u6216\u66f4\u6362\u56fe\u7a7a\u95f4\u3002 \u4fee\u6539 Schema \u00b6 \u5728\u9875\u9762\u5de6\u4fa7\u7684 \u8349\u56fe\u5217\u8868 \u5185\u9009\u62e9\u9700\u8981\u4fee\u6539\u7684 Schema \u8349\u56fe\uff0c\u4fee\u6539\u5b8c\u6210\u540e\u5728\u53f3\u4e0a\u89d2\u5355\u51fb \u4fdd\u5b58\u3002 Note \u5df2\u5e94\u7528 Schema \u7684\u56fe\u7a7a\u95f4 \u4e0d\u4f1a \u540c\u6b65\u4fee\u6539\u3002 \u5220\u9664 Schema \u00b6 \u5728\u9875\u9762\u5de6\u4fa7\u7684 \u8349\u56fe\u5217\u8868 \u5185\u627e\u5230\u9700\u8981\u5220\u9664\u7684 Schema \u8349\u56fe\uff0c\u5728\u7f29\u7565\u56fe\u53f3\u4e0a\u89d2\u5355\u51fb X \u5e76\u786e\u8ba4\u5373\u53ef\u5220\u9664\u3002 \u5bfc\u51fa Schema \u00b6 \u5728\u9875\u9762\u53f3\u4e0a\u89d2\u5355\u51fb \u53ef\u4ee5\u5bfc\u51fa Schema \u4e3a PNG \u683c\u5f0f\u56fe\u7247\u3002","title":"Schema \u8349\u56fe"},{"location":"nebula-studio/quick-start/draft/#schema","text":"Studio \u652f\u6301 Schema \u8349\u56fe\u529f\u80fd\u3002\u7528\u6237\u53ef\u4ee5\u5728\u753b\u677f\u4e0a\u81ea\u884c\u8bbe\u8ba1 Schema\uff0c\u53ef\u4ee5\u76f4\u89c2\u5c55\u793a\u70b9\u8fb9\u5173\u7cfb\uff0c\u8bbe\u8ba1\u5b8c\u6210\u540e\u53ef\u4ee5\u5c06 Schema \u5e94\u7528\u5230\u6307\u5b9a\u56fe\u7a7a\u95f4\u3002","title":"Schema \u8349\u56fe"},{"location":"nebula-studio/quick-start/draft/#_1","text":"\u56fe\u5f62\u5316\u8bbe\u8ba1 Schema\u3002 \u5e94\u7528 Schema \u5230\u6307\u5b9a\u56fe\u7a7a\u95f4\u3002 \u5bfc\u51fa Schema \u4e3a PNG \u683c\u5f0f\u56fe\u7247\u3002","title":"\u529f\u80fd\u8bf4\u660e"},{"location":"nebula-studio/quick-start/draft/#_2","text":"\u5728\u9876\u90e8\u5bfc\u822a\u680f\u91cc\uff0c\u70b9\u51fb \u56fe\u6807\u3002","title":"\u5165\u53e3"},{"location":"nebula-studio/quick-start/draft/#schema_1","text":"\u4ee5 basketballplayer \u7684 Schema \u4e3a\u4f8b\uff0c\u8bf4\u660e\u5982\u4f55\u8bbe\u8ba1 Schema\u3002 \u5728\u9875\u9762\u5de6\u4e0a\u89d2\u5355\u51fb \u65b0\u5efa \u3002 \u5728\u753b\u5e03\u4e0b\u65b9\u9009\u62e9\u5408\u9002\u989c\u8272\u7684 Tag \u6807\u7b7e\uff0c\u6309\u4f4f\u5de6\u952e\u62d6\u62fd\u81f3\u753b\u5e03\u4e2d\uff0c\u521b\u5efa\u4e00\u4e2a Tag\u3002 \u5355\u51fb Tag\uff0c\u5728\u53f3\u4fa7\u586b\u5199\u6807\u7b7e\u540d\u79f0 player \u3001\u63cf\u8ff0\uff0c\u5e76\u4e14\u6dfb\u52a0\u5c5e\u6027 name \u548c age \u3002 \u518d\u6b21\u521b\u5efa\u4e00\u4e2a Tag\uff0c\u6807\u7b7e\u540d\u79f0\u4e3a team \uff0c\u5c5e\u6027\u4e3a name \u3002 \u4ece Tag player \u4e0a\u7684\u951a\u70b9\u8fde\u63a5\u81f3 Tag team \u7684\u951a\u70b9\uff0c\u5355\u51fb\u751f\u6210\u7684\u8fb9\uff0c\u5728\u53f3\u4fa7\u586b\u5199\u8fb9\u7c7b\u578b\u540d\u79f0 serve \uff0c\u5e76\u4e14\u6dfb\u52a0\u5c5e\u6027 start_year \u548c end_year \u3002 \u4ece Tag player \u4e0a\u7684\u951a\u70b9\u8fde\u63a5\u81f3\u81ea\u8eab\u53e6\u4e00\u4e2a\u951a\u70b9\uff0c\u5355\u51fb\u751f\u6210\u7684\u8fb9\uff0c\u5728\u53f3\u4fa7\u586b\u5199\u8fb9\u7c7b\u578b\u540d\u79f0 follow \uff0c\u5e76\u4e14\u6dfb\u52a0\u5c5e\u6027 degree \u3002 \u8bbe\u8ba1\u5b8c\u6210\u540e\uff0c\u5728\u9875\u9762\u4e0a\u65b9\u5355\u51fb \u4fee\u6539\u8349\u56fe\u540d\u79f0\uff0c\u7136\u540e\u5728\u53f3\u4e0a\u89d2\u5355\u51fb \u4fdd\u5b58\u8349\u56fe\u3002","title":"\u8bbe\u8ba1 Schema"},{"location":"nebula-studio/quick-start/draft/#schema_2","text":"\u5728\u9875\u9762\u5de6\u4fa7\u7684 \u8349\u56fe\u5217\u8868 \u5185\u9009\u62e9\u9700\u8981\u5bfc\u5165\u7684 Schema \u8349\u56fe\uff0c\u7136\u540e\u5728\u53f3\u4e0a\u89d2\u5355\u51fb \u5e94\u7528\u5230\u56fe\u7a7a\u95f4 \u3002 \u9009\u62e9\u5c06 Schema \u5bfc\u5165\u65b0\u5efa\u56fe\u7a7a\u95f4\u6216\u8005\u5df2\u521b\u5efa\u7684\u56fe\u7a7a\u95f4\uff0c\u5355\u51fb \u786e\u8ba4 \u3002 Note \u521b\u5efa\u56fe\u7a7a\u95f4\u7684\u53c2\u6570\u8bf4\u660e\u53c2\u89c1 CREATE SPACE \u3002 \u5982\u679c\u56fe\u7a7a\u95f4\u4e2d\u5df2\u6709\u91cd\u540d Schema\uff0c\u5bfc\u5165\u64cd\u4f5c\u4f1a\u5931\u8d25\uff0c\u5e76\u63d0\u793a\u4fee\u6539\u540d\u79f0\u6216\u66f4\u6362\u56fe\u7a7a\u95f4\u3002","title":"\u5e94\u7528 Schema"},{"location":"nebula-studio/quick-start/draft/#schema_3","text":"\u5728\u9875\u9762\u5de6\u4fa7\u7684 \u8349\u56fe\u5217\u8868 \u5185\u9009\u62e9\u9700\u8981\u4fee\u6539\u7684 Schema \u8349\u56fe\uff0c\u4fee\u6539\u5b8c\u6210\u540e\u5728\u53f3\u4e0a\u89d2\u5355\u51fb \u4fdd\u5b58\u3002 Note \u5df2\u5e94\u7528 Schema \u7684\u56fe\u7a7a\u95f4 \u4e0d\u4f1a \u540c\u6b65\u4fee\u6539\u3002","title":"\u4fee\u6539 Schema"},{"location":"nebula-studio/quick-start/draft/#schema_4","text":"\u5728\u9875\u9762\u5de6\u4fa7\u7684 \u8349\u56fe\u5217\u8868 \u5185\u627e\u5230\u9700\u8981\u5220\u9664\u7684 Schema \u8349\u56fe\uff0c\u5728\u7f29\u7565\u56fe\u53f3\u4e0a\u89d2\u5355\u51fb X \u5e76\u786e\u8ba4\u5373\u53ef\u5220\u9664\u3002","title":"\u5220\u9664 Schema"},{"location":"nebula-studio/quick-start/draft/#schema_5","text":"\u5728\u9875\u9762\u53f3\u4e0a\u89d2\u5355\u51fb \u53ef\u4ee5\u5bfc\u51fa Schema \u4e3a PNG \u683c\u5f0f\u56fe\u7247\u3002","title":"\u5bfc\u51fa Schema"},{"location":"nebula-studio/quick-start/st-ug-console/","text":"\u63a7\u5236\u53f0\u754c\u9762 \u00b6 \u672c\u6587\u4ecb\u7ecd Studio \u7684\u63a7\u5236\u53f0\u754c\u9762\u3002 \u4e0b\u8868\u5217\u51fa\u4e86\u63a7\u5236\u53f0\u754c\u9762\u4e0a\u7684\u5404\u79cd\u529f\u80fd\u3002 \u7f16\u53f7 \u529f\u80fd \u8bf4\u660e 1 \u5de5\u5177\u680f \u70b9\u51fb \u63a7\u5236\u53f0 \u9875\u7b7e\u8fdb\u5165\u63a7\u5236\u53f0\u9875\u9762\u3002 2 \u9009\u62e9\u56fe\u7a7a\u95f4 \u5728 \u5f53\u524d\u56fe\u7a7a\u95f4 \u5217\u8868\u4e2d\u9009\u62e9\u4e00\u4e2a\u56fe\u7a7a\u95f4\u3002 \u8bf4\u660e \uff1aStudio \u4e0d\u652f\u6301\u76f4\u63a5\u5728\u8f93\u5165\u6846\u4e2d\u8fd0\u884c USE <space_name> \u8bed\u53e5\u3002 3 \u6536\u85cf\u5939 \u70b9\u51fb \u6309\u94ae\uff0c\u5c55\u5f00\u6536\u85cf\u5939\uff0c\u70b9\u51fb\u5176\u4e2d\u4e00\u4e2a\u8bed\u53e5\uff0c\u8f93\u5165\u6846\u4e2d\u5373\u81ea\u52a8\u8f93\u5165\u8be5\u8bed\u53e5\u3002 4 \u5386\u53f2\u6e05\u5355 \u70b9\u51fb \u6309\u94ae\uff0c\u5728\u8bed\u53e5\u8fd0\u884c\u8bb0\u5f55\u5217\u8868\u91cc\uff0c\u70b9\u51fb\u5176\u4e2d\u4e00\u4e2a\u8bed\u53e5\uff0c\u8f93\u5165\u6846\u4e2d\u5373\u81ea\u52a8\u8f93\u5165\u8be5\u8bed\u53e5\u3002\u5217\u8868\u91cc\u63d0\u4f9b\u6700\u8fd1 15 \u6b21\u8bed\u53e5\u8fd0\u884c\u8bb0\u5f55\u3002 5 \u6e05\u7a7a\u8f93\u5165\u6846 \u70b9\u51fb \u6309\u94ae\uff0c\u6e05\u7a7a\u8f93\u5165\u6846\u4e2d\u5df2\u7ecf\u8f93\u5165\u7684\u5185\u5bb9\u3002 6 \u8fd0\u884c \u5728\u8f93\u5165\u6846\u4e2d\u8f93\u5165 nGQL \u8bed\u53e5\u540e\uff0c\u70b9\u51fb \u6309\u94ae\u5373\u5f00\u59cb\u8fd0\u884c\u8bed\u53e5\u3002 7 \u81ea\u5b9a\u4e49\u53c2\u6570\u5c55\u793a \u70b9\u51fb \u6309\u94ae\u53ef\u5c55\u5f00\u81ea\u5b9a\u4e49\u53c2\u6570\uff0c\u7528\u4e8e\u53c2\u6570\u5316\u67e5\u8be2\uff0c\u8be6\u60c5\u4fe1\u606f\u53ef\u89c1 \u7ba1\u7406\u53c2\u6570 \u3002 8 \u8f93\u5165\u6846 \u5728\u8f93\u5165\u6846\u4e2d\u8f93\u5165 nGQL \u8bed\u53e5\u540e\uff0c\u70b9\u51fb \u6309\u94ae\u8fd0\u884c\u8bed\u53e5\u3002\u7528\u6237\u53ef\u4ee5\u540c\u65f6\u8f93\u5165\u591a\u4e2a\u8bed\u53e5\u540c\u65f6\u8fd0\u884c\uff0c\u8bed\u53e5\u4e4b\u95f4\u4ee5 ; \u5206\u9694\u3002\u652f\u6301\u7528 // \u6dfb\u52a0\u6ce8\u91ca\u3002 9 \u8bed\u53e5\u8fd0\u884c\u72b6\u6001 \u8fd0\u884c nGQL \u8bed\u53e5\u540e\uff0c\u8fd9\u91cc\u663e\u793a\u8bed\u53e5\u8fd0\u884c\u72b6\u6001\u3002\u5982\u679c\u8bed\u53e5\u8fd0\u884c\u6210\u529f\uff0c\u8bed\u53e5\u4ee5\u7eff\u8272\u663e\u793a\u3002\u5982\u679c\u8bed\u53e5\u8fd0\u884c\u5931\u8d25\uff0c\u8bed\u53e5\u4ee5\u7ea2\u8272\u663e\u793a\u3002 10 \u6dfb\u52a0\u5230\u6536\u85cf\u5939 \u70b9\u51fb \u6309\u94ae\uff0c\u5c06\u8bed\u53e5\u5b58\u5165\u6536\u85cf\u5939\u4e2d\uff0c\u5df2\u6536\u85cf\u7684\u8bed\u53e5\u8be5\u6309\u94ae\u4ee5\u9ec4\u8272\u5c55\u793a\u3002 11 \u5bfc\u51fa CSV \u6587\u4ef6\u6216 PNG \u683c\u5f0f\u56fe\u7247 \u8fd0\u884c nGQL \u8bed\u53e5\u8fd4\u56de\u7ed3\u679c\u540e\uff0c\u8fd4\u56de\u7ed3\u679c\u4e3a\u8868\u683c\u5f62\u5f0f\u65f6\uff0c\u70b9\u51fb \u6309\u94ae\u5373\u80fd\u5c06\u7ed3\u679c\u4ee5 CSV \u6587\u4ef6\u7684\u5f62\u5f0f\u5bfc\u51fa\u3002\u5207\u6362\u5230\u53ef\u89c6\u5316\u7a97\u53e3\uff0c\u70b9\u51fb \u6309\u94ae\u5373\u80fd\u5c06\u7ed3\u679c\u4ee5 CSV \u6587\u4ef6\u6216 PNG \u56fe\u7247\u7684\u5f62\u5f0f\u5bfc\u51fa\u3002 12 \u5c55\u5f00/\u9690\u85cf\u6267\u884c\u7ed3\u679c \u70b9\u51fb \u6309\u94ae\uff0c\u9690\u85cf\u6b64\u6761 nGQL \u8bed\u53e5\u8fd4\u56de\u7684\u7ed3\u679c\u6216\u70b9\u51fb \u6309\u94ae\uff0c\u5c55\u5f00\u6b64\u6761 nGQL \u8bed\u53e5\u8fd4\u56de\u7684\u7ed3\u679c. 13 \u5173\u95ed\u6267\u884c\u7ed3\u679c \u70b9\u51fb \u6309\u94ae\uff0c\u5173\u95ed\u6b64\u6761 nGQL \u8bed\u53e5\u8fd4\u56de\u7684\u7ed3\u679c\u3002 14 \u8868\u683c\u7a97\u53e3 \u663e\u793a\u8bed\u53e5\u8fd0\u884c\u7ed3\u679c\u3002\u5982\u679c\u8bed\u53e5\u4f1a\u8fd4\u56de\u7ed3\u679c\uff0c\u7a97\u53e3\u4f1a\u4ee5\u8868\u683c\u5f62\u5f0f\u5448\u73b0\u8fd4\u56de\u7684\u7ed3\u679c\u3002 15 \u53ef\u89c6\u5316\u7a97\u53e3 \u663e\u793a\u8bed\u53e5\u8fd0\u884c\u7ed3\u679c\u3002\u5982\u679c\u8bed\u53e5\u4f1a\u8fd4\u56de\u5b8c\u6574\u7684\u70b9\u8fb9\u7ed3\u679c\uff0c\u7a97\u53e3\u4f1a\u4ee5\u53ef\u89c6\u5316\u5f62\u5f0f\u5448\u73b0\u8fd4\u56de\u7684\u7ed3\u679c\u3002\u70b9\u51fb\u53f3\u65b9 \u6309\u94ae\uff0c\u5c55\u5f00\u6570\u636e\u6982\u89c8\u9762\u677f\u3002","title":"\u63a7\u5236\u53f0\u754c\u9762"},{"location":"nebula-studio/quick-start/st-ug-console/#_1","text":"\u672c\u6587\u4ecb\u7ecd Studio \u7684\u63a7\u5236\u53f0\u754c\u9762\u3002 \u4e0b\u8868\u5217\u51fa\u4e86\u63a7\u5236\u53f0\u754c\u9762\u4e0a\u7684\u5404\u79cd\u529f\u80fd\u3002 \u7f16\u53f7 \u529f\u80fd \u8bf4\u660e 1 \u5de5\u5177\u680f \u70b9\u51fb \u63a7\u5236\u53f0 \u9875\u7b7e\u8fdb\u5165\u63a7\u5236\u53f0\u9875\u9762\u3002 2 \u9009\u62e9\u56fe\u7a7a\u95f4 \u5728 \u5f53\u524d\u56fe\u7a7a\u95f4 \u5217\u8868\u4e2d\u9009\u62e9\u4e00\u4e2a\u56fe\u7a7a\u95f4\u3002 \u8bf4\u660e \uff1aStudio \u4e0d\u652f\u6301\u76f4\u63a5\u5728\u8f93\u5165\u6846\u4e2d\u8fd0\u884c USE <space_name> \u8bed\u53e5\u3002 3 \u6536\u85cf\u5939 \u70b9\u51fb \u6309\u94ae\uff0c\u5c55\u5f00\u6536\u85cf\u5939\uff0c\u70b9\u51fb\u5176\u4e2d\u4e00\u4e2a\u8bed\u53e5\uff0c\u8f93\u5165\u6846\u4e2d\u5373\u81ea\u52a8\u8f93\u5165\u8be5\u8bed\u53e5\u3002 4 \u5386\u53f2\u6e05\u5355 \u70b9\u51fb \u6309\u94ae\uff0c\u5728\u8bed\u53e5\u8fd0\u884c\u8bb0\u5f55\u5217\u8868\u91cc\uff0c\u70b9\u51fb\u5176\u4e2d\u4e00\u4e2a\u8bed\u53e5\uff0c\u8f93\u5165\u6846\u4e2d\u5373\u81ea\u52a8\u8f93\u5165\u8be5\u8bed\u53e5\u3002\u5217\u8868\u91cc\u63d0\u4f9b\u6700\u8fd1 15 \u6b21\u8bed\u53e5\u8fd0\u884c\u8bb0\u5f55\u3002 5 \u6e05\u7a7a\u8f93\u5165\u6846 \u70b9\u51fb \u6309\u94ae\uff0c\u6e05\u7a7a\u8f93\u5165\u6846\u4e2d\u5df2\u7ecf\u8f93\u5165\u7684\u5185\u5bb9\u3002 6 \u8fd0\u884c \u5728\u8f93\u5165\u6846\u4e2d\u8f93\u5165 nGQL \u8bed\u53e5\u540e\uff0c\u70b9\u51fb \u6309\u94ae\u5373\u5f00\u59cb\u8fd0\u884c\u8bed\u53e5\u3002 7 \u81ea\u5b9a\u4e49\u53c2\u6570\u5c55\u793a \u70b9\u51fb \u6309\u94ae\u53ef\u5c55\u5f00\u81ea\u5b9a\u4e49\u53c2\u6570\uff0c\u7528\u4e8e\u53c2\u6570\u5316\u67e5\u8be2\uff0c\u8be6\u60c5\u4fe1\u606f\u53ef\u89c1 \u7ba1\u7406\u53c2\u6570 \u3002 8 \u8f93\u5165\u6846 \u5728\u8f93\u5165\u6846\u4e2d\u8f93\u5165 nGQL \u8bed\u53e5\u540e\uff0c\u70b9\u51fb \u6309\u94ae\u8fd0\u884c\u8bed\u53e5\u3002\u7528\u6237\u53ef\u4ee5\u540c\u65f6\u8f93\u5165\u591a\u4e2a\u8bed\u53e5\u540c\u65f6\u8fd0\u884c\uff0c\u8bed\u53e5\u4e4b\u95f4\u4ee5 ; \u5206\u9694\u3002\u652f\u6301\u7528 // \u6dfb\u52a0\u6ce8\u91ca\u3002 9 \u8bed\u53e5\u8fd0\u884c\u72b6\u6001 \u8fd0\u884c nGQL \u8bed\u53e5\u540e\uff0c\u8fd9\u91cc\u663e\u793a\u8bed\u53e5\u8fd0\u884c\u72b6\u6001\u3002\u5982\u679c\u8bed\u53e5\u8fd0\u884c\u6210\u529f\uff0c\u8bed\u53e5\u4ee5\u7eff\u8272\u663e\u793a\u3002\u5982\u679c\u8bed\u53e5\u8fd0\u884c\u5931\u8d25\uff0c\u8bed\u53e5\u4ee5\u7ea2\u8272\u663e\u793a\u3002 10 \u6dfb\u52a0\u5230\u6536\u85cf\u5939 \u70b9\u51fb \u6309\u94ae\uff0c\u5c06\u8bed\u53e5\u5b58\u5165\u6536\u85cf\u5939\u4e2d\uff0c\u5df2\u6536\u85cf\u7684\u8bed\u53e5\u8be5\u6309\u94ae\u4ee5\u9ec4\u8272\u5c55\u793a\u3002 11 \u5bfc\u51fa CSV \u6587\u4ef6\u6216 PNG \u683c\u5f0f\u56fe\u7247 \u8fd0\u884c nGQL \u8bed\u53e5\u8fd4\u56de\u7ed3\u679c\u540e\uff0c\u8fd4\u56de\u7ed3\u679c\u4e3a\u8868\u683c\u5f62\u5f0f\u65f6\uff0c\u70b9\u51fb \u6309\u94ae\u5373\u80fd\u5c06\u7ed3\u679c\u4ee5 CSV \u6587\u4ef6\u7684\u5f62\u5f0f\u5bfc\u51fa\u3002\u5207\u6362\u5230\u53ef\u89c6\u5316\u7a97\u53e3\uff0c\u70b9\u51fb \u6309\u94ae\u5373\u80fd\u5c06\u7ed3\u679c\u4ee5 CSV \u6587\u4ef6\u6216 PNG \u56fe\u7247\u7684\u5f62\u5f0f\u5bfc\u51fa\u3002 12 \u5c55\u5f00/\u9690\u85cf\u6267\u884c\u7ed3\u679c \u70b9\u51fb \u6309\u94ae\uff0c\u9690\u85cf\u6b64\u6761 nGQL \u8bed\u53e5\u8fd4\u56de\u7684\u7ed3\u679c\u6216\u70b9\u51fb \u6309\u94ae\uff0c\u5c55\u5f00\u6b64\u6761 nGQL \u8bed\u53e5\u8fd4\u56de\u7684\u7ed3\u679c. 13 \u5173\u95ed\u6267\u884c\u7ed3\u679c \u70b9\u51fb \u6309\u94ae\uff0c\u5173\u95ed\u6b64\u6761 nGQL \u8bed\u53e5\u8fd4\u56de\u7684\u7ed3\u679c\u3002 14 \u8868\u683c\u7a97\u53e3 \u663e\u793a\u8bed\u53e5\u8fd0\u884c\u7ed3\u679c\u3002\u5982\u679c\u8bed\u53e5\u4f1a\u8fd4\u56de\u7ed3\u679c\uff0c\u7a97\u53e3\u4f1a\u4ee5\u8868\u683c\u5f62\u5f0f\u5448\u73b0\u8fd4\u56de\u7684\u7ed3\u679c\u3002 15 \u53ef\u89c6\u5316\u7a97\u53e3 \u663e\u793a\u8bed\u53e5\u8fd0\u884c\u7ed3\u679c\u3002\u5982\u679c\u8bed\u53e5\u4f1a\u8fd4\u56de\u5b8c\u6574\u7684\u70b9\u8fb9\u7ed3\u679c\uff0c\u7a97\u53e3\u4f1a\u4ee5\u53ef\u89c6\u5316\u5f62\u5f0f\u5448\u73b0\u8fd4\u56de\u7684\u7ed3\u679c\u3002\u70b9\u51fb\u53f3\u65b9 \u6309\u94ae\uff0c\u5c55\u5f00\u6570\u636e\u6982\u89c8\u9762\u677f\u3002","title":"\u63a7\u5236\u53f0\u754c\u9762"},{"location":"nebula-studio/quick-start/st-ug-create-schema/","text":"\u521b\u5efa Schema \u00b6 \u5728NebulaGraph\u4e2d\uff0c\u7528\u6237\u5fc5\u987b\u5148\u6709 Schema\uff0c\u624d\u80fd\u5411\u5176\u4e2d\u5199\u5165\u70b9\u6570\u636e\u548c\u8fb9\u6570\u636e\u3002\u672c\u6587\u63cf\u8ff0\u5982\u4f55\u4f7f\u7528NebulaGraph\u7684 \u63a7\u5236\u53f0 \u6216 Schema \u529f\u80fd\u521b\u5efa Schema\u3002 Note \u7528\u6237\u53ef\u4ee5\u4f7f\u7528 nebula-console \u521b\u5efa Schema\u3002\u8be6\u60c5\u53c2\u89c1 NebulaGraph\u4f7f\u7528\u624b\u518c \u548c NebulaGraph\u5feb\u901f\u5f00\u59cb \u3002 \u7528\u6237\u53ef\u4ee5\u4f7f\u7528 Schema \u8349\u56fe\u529f\u80fd\u56fe\u5f62\u5316\u8bbe\u8ba1 Schema\u3002\u8be6\u60c5\u53c2\u89c1 Schema \u8349\u56fe \u3002 \u524d\u63d0\u6761\u4ef6 \u00b6 \u5728 Studio \u4e0a\u521b\u5efa Schema \u4e4b\u524d\uff0c\u7528\u6237\u9700\u8981\u786e\u8ba4\u4ee5\u4e0b\u4fe1\u606f\uff1a Studio \u5df2\u7ecf\u8fde\u63a5\u5230NebulaGraph\u6570\u636e\u5e93\u3002 \u8d26\u53f7\u62e5\u6709 GOD\u3001ADMIN \u6216 DBA \u6743\u9650\u3002\u8be6\u7ec6\u4fe1\u606f\uff0c\u53c2\u8003 NebulaGraph\u5185\u7f6e\u89d2\u8272 \u3002 \u5df2\u7ecf\u89c4\u5212 Schema \u7684\u8981\u7d20\u3002 \u5df2\u7ecf\u521b\u5efa\u56fe\u7a7a\u95f4\u3002 Note \u672c\u793a\u4f8b\u5df2\u7ecf\u521b\u5efa\u56fe\u7a7a\u95f4\u3002\u5982\u679c\u8d26\u53f7\u62e5\u6709 GOD \u6743\u9650\uff0c\u4e5f\u53ef\u4ee5\u5728 \u63a7\u5236\u53f0 \u6216 Schema \u4e0a\u521b\u5efa\u4e00\u4e2a\u56fe\u7a7a\u95f4\u3002 \u4f7f\u7528 Schema \u7ba1\u7406\u529f\u80fd\u521b\u5efa Schema \u00b6 \u6309\u4ee5\u4e0b\u6b65\u9aa4\u4f7f\u7528 Schema \u7ba1\u7406\u529f\u80fd\u521b\u5efa Schema\uff1a \u521b\u5efa Tag\u3002\u8be6\u7ec6\u4fe1\u606f\uff0c\u53c2\u8003 \u64cd\u4f5c Tag \u3002 \u521b\u5efa Edge type\u3002\u8be6\u7ec6\u4fe1\u606f\uff0c\u53c2\u8003 \u64cd\u4f5c Edge type \u3002 \u4f7f\u7528\u63a7\u5236\u53f0\u521b\u5efa Schema \u00b6 \u5728\u9876\u90e8\u5bfc\u822a\u680f\u91cc\uff0c\u70b9\u51fb \u63a7\u5236\u53f0 \u9875\u7b7e\u3002 \u5728 \u5f53\u524d Space \u4e2d\u9009\u62e9\u4e00\u4e2a\u56fe\u7a7a\u95f4\u3002\u5728\u672c\u793a\u4f8b\u4e2d\uff0c\u9009\u62e9 basketballplayer \u3002 \u5728\u547d\u4ee4\u884c\u4e2d\uff0c\u4f9d\u6b21\u8f93\u5165\u4ee5\u4e0b\u8bed\u53e5\uff0c\u5e76\u70b9\u51fb\u53f3\u4fa7\u7684 \u8fd0\u884c \u6309\u94ae\u3002 // \u521b\u5efa Tag player\uff0c\u5e26\u6709 2 \u4e2a\u5c5e\u6027 CREATE TAG player(name string, age int); // \u521b\u5efa Tag team\uff0c\u5e26\u6709 1 \u4e2a\u5c5e\u6027 CREATE TAG team(name string); // \u521b\u5efa Edge type follow\uff0c\u5e26\u6709 1 \u4e2a\u5c5e\u6027 CREATE EDGE follow(degree int); // \u521b\u5efa Edge type serve\uff0c\u5e26\u6709 2 \u4e2a\u5c5e\u6027 CREATE EDGE serve(start_year int, end_year int); \u81f3\u6b64\uff0c\u7528\u6237\u5df2\u7ecf\u5b8c\u6210\u4e86 Schema \u521b\u5efa\u3002\u7528\u6237\u53ef\u4ee5\u8fd0\u884c\u4ee5\u4e0b\u8bed\u53e5\u67e5\u770b Tag \u4e0e Edge type \u7684\u5b9a\u4e49\u662f\u5426\u6b63\u786e\u3001\u5b8c\u6574\u3002 // \u5217\u51fa\u5f53\u524d\u56fe\u7a7a\u95f4\u4e2d\u6240\u6709 Tag SHOW TAGS; // \u5217\u51fa\u5f53\u524d\u56fe\u7a7a\u95f4\u4e2d\u6240\u6709 Edge type SHOW EDGES; // \u67e5\u770b\u6bcf\u79cd Tag \u548c Edge type \u7684\u7ed3\u6784\u662f\u5426\u6b63\u786e DESCRIBE TAG player; DESCRIBE TAG team; DESCRIBE EDGE follow; DESCRIBE EDGE serve; \u540e\u7eed\u64cd\u4f5c \u00b6 \u521b\u5efa Schema \u540e\uff0c\u7528\u6237\u53ef\u4ee5\u5f00\u59cb \u5bfc\u5165\u6570\u636e \u3002","title":"\u521b\u5efa Schema"},{"location":"nebula-studio/quick-start/st-ug-create-schema/#schema","text":"\u5728NebulaGraph\u4e2d\uff0c\u7528\u6237\u5fc5\u987b\u5148\u6709 Schema\uff0c\u624d\u80fd\u5411\u5176\u4e2d\u5199\u5165\u70b9\u6570\u636e\u548c\u8fb9\u6570\u636e\u3002\u672c\u6587\u63cf\u8ff0\u5982\u4f55\u4f7f\u7528NebulaGraph\u7684 \u63a7\u5236\u53f0 \u6216 Schema \u529f\u80fd\u521b\u5efa Schema\u3002 Note \u7528\u6237\u53ef\u4ee5\u4f7f\u7528 nebula-console \u521b\u5efa Schema\u3002\u8be6\u60c5\u53c2\u89c1 NebulaGraph\u4f7f\u7528\u624b\u518c \u548c NebulaGraph\u5feb\u901f\u5f00\u59cb \u3002 \u7528\u6237\u53ef\u4ee5\u4f7f\u7528 Schema \u8349\u56fe\u529f\u80fd\u56fe\u5f62\u5316\u8bbe\u8ba1 Schema\u3002\u8be6\u60c5\u53c2\u89c1 Schema \u8349\u56fe \u3002","title":"\u521b\u5efa Schema"},{"location":"nebula-studio/quick-start/st-ug-create-schema/#_1","text":"\u5728 Studio \u4e0a\u521b\u5efa Schema \u4e4b\u524d\uff0c\u7528\u6237\u9700\u8981\u786e\u8ba4\u4ee5\u4e0b\u4fe1\u606f\uff1a Studio \u5df2\u7ecf\u8fde\u63a5\u5230NebulaGraph\u6570\u636e\u5e93\u3002 \u8d26\u53f7\u62e5\u6709 GOD\u3001ADMIN \u6216 DBA \u6743\u9650\u3002\u8be6\u7ec6\u4fe1\u606f\uff0c\u53c2\u8003 NebulaGraph\u5185\u7f6e\u89d2\u8272 \u3002 \u5df2\u7ecf\u89c4\u5212 Schema \u7684\u8981\u7d20\u3002 \u5df2\u7ecf\u521b\u5efa\u56fe\u7a7a\u95f4\u3002 Note \u672c\u793a\u4f8b\u5df2\u7ecf\u521b\u5efa\u56fe\u7a7a\u95f4\u3002\u5982\u679c\u8d26\u53f7\u62e5\u6709 GOD \u6743\u9650\uff0c\u4e5f\u53ef\u4ee5\u5728 \u63a7\u5236\u53f0 \u6216 Schema \u4e0a\u521b\u5efa\u4e00\u4e2a\u56fe\u7a7a\u95f4\u3002","title":"\u524d\u63d0\u6761\u4ef6"},{"location":"nebula-studio/quick-start/st-ug-create-schema/#schema_schema","text":"\u6309\u4ee5\u4e0b\u6b65\u9aa4\u4f7f\u7528 Schema \u7ba1\u7406\u529f\u80fd\u521b\u5efa Schema\uff1a \u521b\u5efa Tag\u3002\u8be6\u7ec6\u4fe1\u606f\uff0c\u53c2\u8003 \u64cd\u4f5c Tag \u3002 \u521b\u5efa Edge type\u3002\u8be6\u7ec6\u4fe1\u606f\uff0c\u53c2\u8003 \u64cd\u4f5c Edge type \u3002","title":"\u4f7f\u7528 Schema \u7ba1\u7406\u529f\u80fd\u521b\u5efa Schema"},{"location":"nebula-studio/quick-start/st-ug-create-schema/#schema_1","text":"\u5728\u9876\u90e8\u5bfc\u822a\u680f\u91cc\uff0c\u70b9\u51fb \u63a7\u5236\u53f0 \u9875\u7b7e\u3002 \u5728 \u5f53\u524d Space \u4e2d\u9009\u62e9\u4e00\u4e2a\u56fe\u7a7a\u95f4\u3002\u5728\u672c\u793a\u4f8b\u4e2d\uff0c\u9009\u62e9 basketballplayer \u3002 \u5728\u547d\u4ee4\u884c\u4e2d\uff0c\u4f9d\u6b21\u8f93\u5165\u4ee5\u4e0b\u8bed\u53e5\uff0c\u5e76\u70b9\u51fb\u53f3\u4fa7\u7684 \u8fd0\u884c \u6309\u94ae\u3002 // \u521b\u5efa Tag player\uff0c\u5e26\u6709 2 \u4e2a\u5c5e\u6027 CREATE TAG player(name string, age int); // \u521b\u5efa Tag team\uff0c\u5e26\u6709 1 \u4e2a\u5c5e\u6027 CREATE TAG team(name string); // \u521b\u5efa Edge type follow\uff0c\u5e26\u6709 1 \u4e2a\u5c5e\u6027 CREATE EDGE follow(degree int); // \u521b\u5efa Edge type serve\uff0c\u5e26\u6709 2 \u4e2a\u5c5e\u6027 CREATE EDGE serve(start_year int, end_year int); \u81f3\u6b64\uff0c\u7528\u6237\u5df2\u7ecf\u5b8c\u6210\u4e86 Schema \u521b\u5efa\u3002\u7528\u6237\u53ef\u4ee5\u8fd0\u884c\u4ee5\u4e0b\u8bed\u53e5\u67e5\u770b Tag \u4e0e Edge type \u7684\u5b9a\u4e49\u662f\u5426\u6b63\u786e\u3001\u5b8c\u6574\u3002 // \u5217\u51fa\u5f53\u524d\u56fe\u7a7a\u95f4\u4e2d\u6240\u6709 Tag SHOW TAGS; // \u5217\u51fa\u5f53\u524d\u56fe\u7a7a\u95f4\u4e2d\u6240\u6709 Edge type SHOW EDGES; // \u67e5\u770b\u6bcf\u79cd Tag \u548c Edge type \u7684\u7ed3\u6784\u662f\u5426\u6b63\u786e DESCRIBE TAG player; DESCRIBE TAG team; DESCRIBE EDGE follow; DESCRIBE EDGE serve;","title":"\u4f7f\u7528\u63a7\u5236\u53f0\u521b\u5efa Schema"},{"location":"nebula-studio/quick-start/st-ug-create-schema/#_2","text":"\u521b\u5efa Schema \u540e\uff0c\u7528\u6237\u53ef\u4ee5\u5f00\u59cb \u5bfc\u5165\u6570\u636e \u3002","title":"\u540e\u7eed\u64cd\u4f5c"},{"location":"nebula-studio/quick-start/st-ug-import-data/","text":"\u5bfc\u5165\u6570\u636e \u00b6 Studio \u652f\u6301\u754c\u9762\u5316\u5730\u5c06 CSV \u683c\u5f0f\u6570\u636e\u5bfc\u5165\u81f3NebulaGraph\u4e2d\u3002 \u524d\u63d0\u6761\u4ef6 \u00b6 \u5bfc\u5165\u6570\u636e\u4e4b\u524d\uff0c\u9700\u8981\u786e\u8ba4\u4ee5\u4e0b\u4fe1\u606f\uff1a NebulaGraph\u91cc\u5df2\u7ecf\u521b\u5efa Schema\u3002 CSV \u6587\u4ef6\u7b26\u5408 Schema \u8981\u6c42\u3002 \u8d26\u53f7\u62e5\u6709 GOD\u3001ADMIN \u6216 DBA \u6743\u9650\u3002\u8be6\u60c5\u53c2\u89c1 NebulaGraph\u5185\u7f6e\u89d2\u8272 \u3002 \u5165\u53e3 \u00b6 \u5728\u9876\u90e8\u5bfc\u822a\u680f\u91cc\uff0c\u5355\u51fb \u56fe\u6807\u3002 \u5bfc\u5165\u6570\u636e\u4e3b\u8981\u5206\u4e3a 2 \u4e2a\u90e8\u5206\uff0c\u65b0\u5efa\u6570\u636e\u6e90\u548c\u521b\u5efa\u5bfc\u5165\u4efb\u52a1\uff0c\u63a5\u4e0b\u6765\u5c06\u8be6\u7ec6\u4ecb\u7ecd\u3002 \u65b0\u5efa\u6570\u636e\u6e90 \u00b6 \u5728\u9875\u9762\u53f3\u4e0a\u89d2\u5355\u51fb \u65b0\u5efa\u6570\u636e\u6e90 \uff0c\u8bbe\u7f6e\u6570\u636e\u6765\u6e90\u53ca\u5176\u76f8\u5173\u8bbe\u7f6e\u3002\u5f53\u524d\u652f\u6301 3 \u79cd\u7c7b\u578b\u7684\u6570\u636e\u6e90\u3002 \u6570\u636e\u6e90\u7c7b\u578b \u8bf4\u660e \u4e91\u5b58\u50a8 \u6dfb\u52a0\u4e91\u5b58\u50a8\u4f5c\u4e3a CSV \u6587\u4ef6\u6765\u6e90\uff0c\u53ea\u652f\u6301\u517c\u5bb9 Amazon S3\u63a5\u53e3\u7684\u4e91\u670d\u52a1\u3002 SFTP \u6dfb\u52a0 SFTP \u4f5c\u4e3a CSV \u6587\u4ef6\u6765\u6e90\u3002 \u672c\u5730\u6587\u4ef6 \u4e0a\u4f20\u672c\u5730 CSV \u6587\u4ef6\u3002\u6587\u4ef6\u5927\u5c0f\u4e0d\u80fd\u8d85\u8fc7 200 MB\uff0c\u8d85\u8fc7\u9650\u5236\u7684\u6587\u4ef6\u8bf7\u653e\u5165\u5176\u4ed6\u65b9\u5f0f\u7684\u6570\u636e\u6e90\u4e2d\u3002 Note \u4e0a\u4f20\u672c\u5730 CSV \u6587\u4ef6\u65f6\uff0c\u4e00\u6b21\u53ef\u4ee5\u9009\u62e9\u591a\u4e2a CSV \u6587\u4ef6\u3002 \u6570\u636e\u6e90\u6dfb\u52a0\u540e\uff0c\u53ef\u4ee5\u5728\u9875\u9762\u4e0a\u65b9\u5355\u51fb \u6570\u636e\u6e90\u7ba1\u7406 \uff0c\u5207\u6362\u9875\u7b7e\u5373\u53ef\u67e5\u770b\u4e0d\u540c\u7c7b\u578b\u7684\u6570\u636e\u6e90\u8be6\u60c5\uff0c\u4e5f\u53ef\u4ee5\u7f16\u8f91\u6216\u5220\u9664\u6570\u636e\u6e90\u3002 \u521b\u5efa\u5bfc\u5165\u4efb\u52a1 \u00b6 \u5728\u9875\u9762\u5de6\u4e0a\u89d2\u5355\u51fb \u521b\u5efa\u5bfc\u5165\u4efb\u52a1 \uff0c\u5b8c\u6210\u5982\u4e0b\u8bbe\u7f6e\uff1a Caution \u7528\u6237\u4e5f\u53ef\u4ee5\u5355\u51fb \u5bfc\u5165\u6a21\u7248 \uff0c\u4e0b\u8f7d\u793a\u4f8b\u914d\u7f6e\u6587\u4ef6 example.yaml \uff0c\u914d\u7f6e\u540e\u518d\u4e0a\u4f20\u914d\u7f6e\u6587\u4ef6\u3002\u914d\u7f6e\u65b9\u5f0f\u4e0e NebulaGraph Importer \u5927\u81f4\u76f8\u540c\u3002 \u56fe\u7a7a\u95f4 \uff1a\u9700\u8981\u5bfc\u5165\u6570\u636e\u7684\u56fe\u7a7a\u95f4\u540d\u79f0\u3002 \u4efb\u52a1\u540d\u79f0 \uff1a\u9ed8\u8ba4\u81ea\u52a8\u751f\u6210\uff0c\u53ef\u4ee5\u4fee\u6539\u3002 \u66f4\u591a\u914d\u7f6e \uff08\u53ef\u9009\uff09\uff1a\u53ef\u4ee5\u81ea\u5b9a\u4e49\u8bbe\u7f6e\u5e76\u53d1\u6570\u3001\u6279\u5904\u7406\u91cf\u3001\u91cd\u8bd5\u6b21\u6570\u3001\u8bfb\u53d6\u5e76\u53d1\u6570\u548c\u5bfc\u5165\u5e76\u53d1\u6570\u3002 \u5173\u8054\u6807\u7b7e \uff1a \u5355\u51fb \u6dfb\u52a0 Tag \uff0c\u7136\u540e\u5728\u4e0b\u65b9\u65b0\u589e\u7684\u6807\u7b7e\u5185\u9009\u62e9 Tag\u3002 \u5355\u51fb \u6dfb\u52a0\u5bfc\u5165\u6587\u4ef6 \uff0c\u5728 \u6587\u4ef6\u6e90 \u91cc\u9009\u62e9 \u6570\u636e\u6e90\u7c7b\u578b \u548c \u6587\u4ef6\u8def\u5f84 \uff0c\u627e\u5230\u9700\u8981\u5bfc\u5165\u7684\u6587\u4ef6\uff0c\u7136\u540e\u5355\u51fb \u6dfb\u52a0 \u3002 \u5728\u9884\u89c8\u9875\u9762\u8bbe\u7f6e\u6587\u4ef6\u7684\u5206\u9694\u7b26\u548c\u662f\u5426\u643a\u5e26\u8868\u5934\uff0c\u7136\u540e\u5355\u51fb \u786e\u8ba4 \u3002 \u5728 VID \u5217 \u4e3a VID \u9009\u62e9\u5bf9\u5e94\u7684\u5217\u3002\u652f\u6301\u9009\u62e9\u591a\u4e2a\u5217\u5408\u5e76\u4e3a VID\uff0c\u4e5f\u53ef\u4ee5\u4e3a VID \u6dfb\u52a0\u524d\u7f00\u6216\u540e\u7f00\u3002 \u5728 \u5c5e\u6027 \u6846\u5185\u4e3a\u5c5e\u6027\u9009\u62e9\u5bf9\u5e94\u7684\u5217\u3002\u5bf9\u4e8e\u53ef\u4ee5\u4e3a NULL \u6216\u8bbe\u7f6e\u4e86 DEFAULT \u7684\u5c5e\u6027\uff0c\u53ef\u4ee5\u4e0d\u6307\u5b9a\u5bf9\u5e94\u7684\u5217\u3002 \u91cd\u590d 2 ~ 5 \u6b65\u9aa4\u5c06\u6b65\u9aa4 1 \u6240\u9009 Tag \u7684\u6570\u636e\u6587\u4ef6\u5168\u90e8\u5bfc\u5165\u3002 \u91cd\u590d 1 ~ 6 \u6b65\u9aa4\u5c06\u6240\u6709\u9700\u8981\u5bfc\u5165\u7684 Tag \u6570\u636e\u5168\u90e8\u5bfc\u5165\u3002 \u5173\u8054\u8fb9 \uff1a\u4e0e\u5173\u8054\u6807\u7b7e\u7684\u64cd\u4f5c\u76f8\u540c\u3002 \u5b8c\u6210\u8bbe\u7f6e\u540e\uff0c\u5355\u51fb \u5bfc\u5165 ,\u8f93\u5165NebulaGraph\u8d26\u53f7\u7684\u5bc6\u7801\u5e76\u786e\u8ba4\u3002 \u5bfc\u5165\u4efb\u52a1\u521b\u5efa\u540e\uff0c\u53ef\u4ee5\u5728 \u5bfc\u5165\u6570\u636e \u9875\u7b7e\u5185\u67e5\u770b\u5bfc\u5165\u4efb\u52a1\u7684\u8fdb\u5ea6\uff0c\u652f\u6301\u6839\u636e\u56fe\u7a7a\u95f4\u7b5b\u9009\u4efb\u52a1\u3001\u7f16\u8f91\u4efb\u52a1\u3001\u67e5\u770b\u65e5\u5fd7\u3001\u4e0b\u8f7d\u65e5\u5fd7\u3001\u91cd\u65b0\u5bfc\u5165\u3001\u4e0b\u8f7d\u914d\u7f6e\u6587\u4ef6\u3001\u5220\u9664\u4efb\u52a1\u7b49\u64cd\u4f5c\u3002 \u540e\u7eed\u64cd\u4f5c \u00b6 \u5b8c\u6210\u6570\u636e\u5bfc\u5165\u540e\uff0c\u7528\u6237\u53ef\u4ee5\u8fdb\u5165 \u63a7\u5236\u53f0 \u9875\u9762\u3002","title":"\u5bfc\u5165\u6570\u636e"},{"location":"nebula-studio/quick-start/st-ug-import-data/#_1","text":"Studio \u652f\u6301\u754c\u9762\u5316\u5730\u5c06 CSV \u683c\u5f0f\u6570\u636e\u5bfc\u5165\u81f3NebulaGraph\u4e2d\u3002","title":"\u5bfc\u5165\u6570\u636e"},{"location":"nebula-studio/quick-start/st-ug-import-data/#_2","text":"\u5bfc\u5165\u6570\u636e\u4e4b\u524d\uff0c\u9700\u8981\u786e\u8ba4\u4ee5\u4e0b\u4fe1\u606f\uff1a NebulaGraph\u91cc\u5df2\u7ecf\u521b\u5efa Schema\u3002 CSV \u6587\u4ef6\u7b26\u5408 Schema \u8981\u6c42\u3002 \u8d26\u53f7\u62e5\u6709 GOD\u3001ADMIN \u6216 DBA \u6743\u9650\u3002\u8be6\u60c5\u53c2\u89c1 NebulaGraph\u5185\u7f6e\u89d2\u8272 \u3002","title":"\u524d\u63d0\u6761\u4ef6"},{"location":"nebula-studio/quick-start/st-ug-import-data/#_3","text":"\u5728\u9876\u90e8\u5bfc\u822a\u680f\u91cc\uff0c\u5355\u51fb \u56fe\u6807\u3002 \u5bfc\u5165\u6570\u636e\u4e3b\u8981\u5206\u4e3a 2 \u4e2a\u90e8\u5206\uff0c\u65b0\u5efa\u6570\u636e\u6e90\u548c\u521b\u5efa\u5bfc\u5165\u4efb\u52a1\uff0c\u63a5\u4e0b\u6765\u5c06\u8be6\u7ec6\u4ecb\u7ecd\u3002","title":"\u5165\u53e3"},{"location":"nebula-studio/quick-start/st-ug-import-data/#_4","text":"\u5728\u9875\u9762\u53f3\u4e0a\u89d2\u5355\u51fb \u65b0\u5efa\u6570\u636e\u6e90 \uff0c\u8bbe\u7f6e\u6570\u636e\u6765\u6e90\u53ca\u5176\u76f8\u5173\u8bbe\u7f6e\u3002\u5f53\u524d\u652f\u6301 3 \u79cd\u7c7b\u578b\u7684\u6570\u636e\u6e90\u3002 \u6570\u636e\u6e90\u7c7b\u578b \u8bf4\u660e \u4e91\u5b58\u50a8 \u6dfb\u52a0\u4e91\u5b58\u50a8\u4f5c\u4e3a CSV \u6587\u4ef6\u6765\u6e90\uff0c\u53ea\u652f\u6301\u517c\u5bb9 Amazon S3\u63a5\u53e3\u7684\u4e91\u670d\u52a1\u3002 SFTP \u6dfb\u52a0 SFTP \u4f5c\u4e3a CSV \u6587\u4ef6\u6765\u6e90\u3002 \u672c\u5730\u6587\u4ef6 \u4e0a\u4f20\u672c\u5730 CSV \u6587\u4ef6\u3002\u6587\u4ef6\u5927\u5c0f\u4e0d\u80fd\u8d85\u8fc7 200 MB\uff0c\u8d85\u8fc7\u9650\u5236\u7684\u6587\u4ef6\u8bf7\u653e\u5165\u5176\u4ed6\u65b9\u5f0f\u7684\u6570\u636e\u6e90\u4e2d\u3002 Note \u4e0a\u4f20\u672c\u5730 CSV \u6587\u4ef6\u65f6\uff0c\u4e00\u6b21\u53ef\u4ee5\u9009\u62e9\u591a\u4e2a CSV \u6587\u4ef6\u3002 \u6570\u636e\u6e90\u6dfb\u52a0\u540e\uff0c\u53ef\u4ee5\u5728\u9875\u9762\u4e0a\u65b9\u5355\u51fb \u6570\u636e\u6e90\u7ba1\u7406 \uff0c\u5207\u6362\u9875\u7b7e\u5373\u53ef\u67e5\u770b\u4e0d\u540c\u7c7b\u578b\u7684\u6570\u636e\u6e90\u8be6\u60c5\uff0c\u4e5f\u53ef\u4ee5\u7f16\u8f91\u6216\u5220\u9664\u6570\u636e\u6e90\u3002","title":"\u65b0\u5efa\u6570\u636e\u6e90"},{"location":"nebula-studio/quick-start/st-ug-import-data/#_5","text":"\u5728\u9875\u9762\u5de6\u4e0a\u89d2\u5355\u51fb \u521b\u5efa\u5bfc\u5165\u4efb\u52a1 \uff0c\u5b8c\u6210\u5982\u4e0b\u8bbe\u7f6e\uff1a Caution \u7528\u6237\u4e5f\u53ef\u4ee5\u5355\u51fb \u5bfc\u5165\u6a21\u7248 \uff0c\u4e0b\u8f7d\u793a\u4f8b\u914d\u7f6e\u6587\u4ef6 example.yaml \uff0c\u914d\u7f6e\u540e\u518d\u4e0a\u4f20\u914d\u7f6e\u6587\u4ef6\u3002\u914d\u7f6e\u65b9\u5f0f\u4e0e NebulaGraph Importer \u5927\u81f4\u76f8\u540c\u3002 \u56fe\u7a7a\u95f4 \uff1a\u9700\u8981\u5bfc\u5165\u6570\u636e\u7684\u56fe\u7a7a\u95f4\u540d\u79f0\u3002 \u4efb\u52a1\u540d\u79f0 \uff1a\u9ed8\u8ba4\u81ea\u52a8\u751f\u6210\uff0c\u53ef\u4ee5\u4fee\u6539\u3002 \u66f4\u591a\u914d\u7f6e \uff08\u53ef\u9009\uff09\uff1a\u53ef\u4ee5\u81ea\u5b9a\u4e49\u8bbe\u7f6e\u5e76\u53d1\u6570\u3001\u6279\u5904\u7406\u91cf\u3001\u91cd\u8bd5\u6b21\u6570\u3001\u8bfb\u53d6\u5e76\u53d1\u6570\u548c\u5bfc\u5165\u5e76\u53d1\u6570\u3002 \u5173\u8054\u6807\u7b7e \uff1a \u5355\u51fb \u6dfb\u52a0 Tag \uff0c\u7136\u540e\u5728\u4e0b\u65b9\u65b0\u589e\u7684\u6807\u7b7e\u5185\u9009\u62e9 Tag\u3002 \u5355\u51fb \u6dfb\u52a0\u5bfc\u5165\u6587\u4ef6 \uff0c\u5728 \u6587\u4ef6\u6e90 \u91cc\u9009\u62e9 \u6570\u636e\u6e90\u7c7b\u578b \u548c \u6587\u4ef6\u8def\u5f84 \uff0c\u627e\u5230\u9700\u8981\u5bfc\u5165\u7684\u6587\u4ef6\uff0c\u7136\u540e\u5355\u51fb \u6dfb\u52a0 \u3002 \u5728\u9884\u89c8\u9875\u9762\u8bbe\u7f6e\u6587\u4ef6\u7684\u5206\u9694\u7b26\u548c\u662f\u5426\u643a\u5e26\u8868\u5934\uff0c\u7136\u540e\u5355\u51fb \u786e\u8ba4 \u3002 \u5728 VID \u5217 \u4e3a VID \u9009\u62e9\u5bf9\u5e94\u7684\u5217\u3002\u652f\u6301\u9009\u62e9\u591a\u4e2a\u5217\u5408\u5e76\u4e3a VID\uff0c\u4e5f\u53ef\u4ee5\u4e3a VID \u6dfb\u52a0\u524d\u7f00\u6216\u540e\u7f00\u3002 \u5728 \u5c5e\u6027 \u6846\u5185\u4e3a\u5c5e\u6027\u9009\u62e9\u5bf9\u5e94\u7684\u5217\u3002\u5bf9\u4e8e\u53ef\u4ee5\u4e3a NULL \u6216\u8bbe\u7f6e\u4e86 DEFAULT \u7684\u5c5e\u6027\uff0c\u53ef\u4ee5\u4e0d\u6307\u5b9a\u5bf9\u5e94\u7684\u5217\u3002 \u91cd\u590d 2 ~ 5 \u6b65\u9aa4\u5c06\u6b65\u9aa4 1 \u6240\u9009 Tag \u7684\u6570\u636e\u6587\u4ef6\u5168\u90e8\u5bfc\u5165\u3002 \u91cd\u590d 1 ~ 6 \u6b65\u9aa4\u5c06\u6240\u6709\u9700\u8981\u5bfc\u5165\u7684 Tag \u6570\u636e\u5168\u90e8\u5bfc\u5165\u3002 \u5173\u8054\u8fb9 \uff1a\u4e0e\u5173\u8054\u6807\u7b7e\u7684\u64cd\u4f5c\u76f8\u540c\u3002 \u5b8c\u6210\u8bbe\u7f6e\u540e\uff0c\u5355\u51fb \u5bfc\u5165 ,\u8f93\u5165NebulaGraph\u8d26\u53f7\u7684\u5bc6\u7801\u5e76\u786e\u8ba4\u3002 \u5bfc\u5165\u4efb\u52a1\u521b\u5efa\u540e\uff0c\u53ef\u4ee5\u5728 \u5bfc\u5165\u6570\u636e \u9875\u7b7e\u5185\u67e5\u770b\u5bfc\u5165\u4efb\u52a1\u7684\u8fdb\u5ea6\uff0c\u652f\u6301\u6839\u636e\u56fe\u7a7a\u95f4\u7b5b\u9009\u4efb\u52a1\u3001\u7f16\u8f91\u4efb\u52a1\u3001\u67e5\u770b\u65e5\u5fd7\u3001\u4e0b\u8f7d\u65e5\u5fd7\u3001\u91cd\u65b0\u5bfc\u5165\u3001\u4e0b\u8f7d\u914d\u7f6e\u6587\u4ef6\u3001\u5220\u9664\u4efb\u52a1\u7b49\u64cd\u4f5c\u3002","title":"\u521b\u5efa\u5bfc\u5165\u4efb\u52a1"},{"location":"nebula-studio/quick-start/st-ug-import-data/#_6","text":"\u5b8c\u6210\u6570\u636e\u5bfc\u5165\u540e\uff0c\u7528\u6237\u53ef\u4ee5\u8fdb\u5165 \u63a7\u5236\u53f0 \u9875\u9762\u3002","title":"\u540e\u7eed\u64cd\u4f5c"},{"location":"nebula-studio/quick-start/st-ug-plan-schema/","text":"\u89c4\u5212 Schema \u00b6 \u5728\u4f7f\u7528 Studio \u4e4b\u524d\uff0c\u7528\u6237\u9700\u8981\u5148\u6839\u636eNebulaGraph\u7684\u8981\u6c42\u89c4\u5212 Schema\uff08\u6a21\u5f0f\uff09\u3002 Schema \u81f3\u5c11\u8981\u5305\u542b\u4ee5\u4e0b\u8981\u7d20\uff1a Tag\uff0c\u4ee5\u53ca\u6bcf\u79cd Tag \u7684\u5c5e\u6027\u3002 Edge type\uff0c\u4ee5\u53ca\u6bcf\u79cd Edge type \u7684\u5c5e\u6027\u3002 \u7528\u6237\u53ef\u4ee5\u4e0b\u8f7dNebulaGraph\u793a\u4f8b\u6570\u636e\u96c6 basketballplayer \uff0c\u672c\u6587\u5c06\u901a\u8fc7\u8be5\u793a\u4f8b\u8bf4\u660e\u5982\u4f55\u89c4\u5212 Schema\u3002 \u4e0b\u8868\u5217\u51fa\u4e86 Schema \u8981\u7d20\u3002 \u7c7b\u578b \u540d\u79f0 \u5c5e\u6027\u540d\uff08\u6570\u636e\u7c7b\u578b\uff09 \u8bf4\u660e Tag player - name \uff08 string \uff09 - age \uff08 int \uff09 \u8868\u793a\u7403\u5458\u3002 Tag team - name \uff08 string \uff09 \u8868\u793a\u7403\u961f\u3002 Edge type serve - start_year \uff08 int \uff09 - end_year \uff08 int \uff09 \u8868\u793a\u7403\u5458\u7684\u884c\u4e3a\u3002 \u8be5\u884c\u4e3a\u5c06\u7403\u5458\u548c\u7403\u961f\u8054\u7cfb\u8d77\u6765\uff0c\u65b9\u5411\u662f\u4ece\u7403\u5458\u5230\u7403\u961f\u3002 Edge type follow - degree \uff08 int \uff09 \u8868\u793a\u7403\u5458\u7684\u884c\u4e3a\u3002 \u8be5\u884c\u4e3a\u5c06\u4e24\u4e2a\u7403\u5458\u8054\u7cfb\u8d77\u6765\uff0c\u65b9\u5411\u662f\u4ece\u4e00\u4e2a\u7403\u5458\u5230\u53e6\u4e00\u4e2a\u7403\u5458\u3002 \u4e0b\u56fe\u8bf4\u660e\u793a\u4f8b\u4e2d player \u7c7b\u70b9\u4e0e team \u7c7b\u70b9\u4e4b\u95f4\u5982\u4f55\u53d1\u751f\u5173\u7cfb\uff08 serve / follow \uff09\u3002","title":"\u89c4\u5212 Schema"},{"location":"nebula-studio/quick-start/st-ug-plan-schema/#schema","text":"\u5728\u4f7f\u7528 Studio \u4e4b\u524d\uff0c\u7528\u6237\u9700\u8981\u5148\u6839\u636eNebulaGraph\u7684\u8981\u6c42\u89c4\u5212 Schema\uff08\u6a21\u5f0f\uff09\u3002 Schema \u81f3\u5c11\u8981\u5305\u542b\u4ee5\u4e0b\u8981\u7d20\uff1a Tag\uff0c\u4ee5\u53ca\u6bcf\u79cd Tag \u7684\u5c5e\u6027\u3002 Edge type\uff0c\u4ee5\u53ca\u6bcf\u79cd Edge type \u7684\u5c5e\u6027\u3002 \u7528\u6237\u53ef\u4ee5\u4e0b\u8f7dNebulaGraph\u793a\u4f8b\u6570\u636e\u96c6 basketballplayer \uff0c\u672c\u6587\u5c06\u901a\u8fc7\u8be5\u793a\u4f8b\u8bf4\u660e\u5982\u4f55\u89c4\u5212 Schema\u3002 \u4e0b\u8868\u5217\u51fa\u4e86 Schema \u8981\u7d20\u3002 \u7c7b\u578b \u540d\u79f0 \u5c5e\u6027\u540d\uff08\u6570\u636e\u7c7b\u578b\uff09 \u8bf4\u660e Tag player - name \uff08 string \uff09 - age \uff08 int \uff09 \u8868\u793a\u7403\u5458\u3002 Tag team - name \uff08 string \uff09 \u8868\u793a\u7403\u961f\u3002 Edge type serve - start_year \uff08 int \uff09 - end_year \uff08 int \uff09 \u8868\u793a\u7403\u5458\u7684\u884c\u4e3a\u3002 \u8be5\u884c\u4e3a\u5c06\u7403\u5458\u548c\u7403\u961f\u8054\u7cfb\u8d77\u6765\uff0c\u65b9\u5411\u662f\u4ece\u7403\u5458\u5230\u7403\u961f\u3002 Edge type follow - degree \uff08 int \uff09 \u8868\u793a\u7403\u5458\u7684\u884c\u4e3a\u3002 \u8be5\u884c\u4e3a\u5c06\u4e24\u4e2a\u7403\u5458\u8054\u7cfb\u8d77\u6765\uff0c\u65b9\u5411\u662f\u4ece\u4e00\u4e2a\u7403\u5458\u5230\u53e6\u4e00\u4e2a\u7403\u5458\u3002 \u4e0b\u56fe\u8bf4\u660e\u793a\u4f8b\u4e2d player \u7c7b\u70b9\u4e0e team \u7c7b\u70b9\u4e4b\u95f4\u5982\u4f55\u53d1\u751f\u5173\u7cfb\uff08 serve / follow \uff09\u3002","title":"\u89c4\u5212 Schema"},{"location":"nebula-studio/troubleshooting/st-ug-config-server-errors/","text":"\u8fde\u63a5\u6570\u636e\u5e93\u9519\u8bef \u00b6 \u95ee\u9898\u63cf\u8ff0 \u00b6 \u6309 \u8fde\u63a5 Studio \u6587\u6863\u64cd\u4f5c\uff0c\u63d0\u793a \u914d\u7f6e\u5931\u8d25 \u3002 \u53ef\u80fd\u7684\u539f\u56e0\u53ca\u89e3\u51b3\u65b9\u6cd5 \u00b6 \u7528\u6237\u53ef\u4ee5\u6309\u4ee5\u4e0b\u6b65\u9aa4\u6392\u67e5\u95ee\u9898\u3002 \u7b2c 1 \u6b65\u3002\u786e\u8ba4 Host \u5b57\u6bb5\u7684\u683c\u5f0f\u662f\u5426\u6b63\u786e \u00b6 \u5fc5\u987b\u586b\u5199NebulaGraph\u56fe\u6570\u636e\u5e93 Graph \u670d\u52a1\u7684 IP \u5730\u5740\uff08 graph_server_ip \uff09\u548c\u7aef\u53e3\u3002\u5982\u679c\u672a\u505a\u4fee\u6539\uff0c\u7aef\u53e3\u9ed8\u8ba4\u4e3a 9669 \u3002\u5373\u4f7fNebulaGraph\u4e0e Studio \u90fd\u90e8\u7f72\u5728\u5f53\u524d\u673a\u5668\u4e0a\uff0c\u7528\u6237\u4e5f\u5fc5\u987b\u4f7f\u7528\u672c\u673a IP \u5730\u5740\uff0c\u800c\u4e0d\u80fd\u4f7f\u7528 127.0.0.1 \u3001 localhost \u6216\u8005 0.0.0.0 \u3002 \u7b2c 2 \u6b65\u3002\u786e\u8ba4 \u7528\u6237\u540d \u548c \u5bc6\u7801 \u662f\u5426\u6b63\u786e \u00b6 \u5982\u679cNebulaGraph\u6ca1\u6709\u5f00\u542f\u8eab\u4efd\u8ba4\u8bc1\uff0c\u7528\u6237\u53ef\u4ee5\u586b\u5199\u4efb\u610f\u5b57\u7b26\u4e32\u767b\u5f55\u3002 \u5982\u679c\u5df2\u7ecf\u5f00\u542f\u8eab\u4efd\u8ba4\u8bc1\uff0c\u7528\u6237\u5fc5\u987b\u4f7f\u7528\u5206\u914d\u7684\u8d26\u53f7\u767b\u5f55\u3002 \u7b2c 3 \u6b65\u3002\u786e\u8ba4NebulaGraph\u670d\u52a1\u662f\u5426\u6b63\u5e38 \u00b6 \u68c0\u67e5NebulaGraph\u670d\u52a1\u72b6\u6001\u3002\u5173\u4e8e\u67e5\u770b\u670d\u52a1\u7684\u64cd\u4f5c\uff1a \u5982\u679c\u5728 Linux \u670d\u52a1\u5668\u4e0a\u901a\u8fc7\u7f16\u8bd1\u90e8\u7f72\u7684NebulaGraph\uff0c\u53c2\u8003 \u67e5\u770bNebulaGraph\u670d\u52a1 \u3002 \u5982\u679c\u4f7f\u7528 Docker Compose \u90e8\u7f72\u548c RPM \u90e8\u7f72\u7684NebulaGraph\uff0c\u53c2\u8003 \u67e5\u770bNebulaGraph\u670d\u52a1\u72b6\u6001\u548c\u7aef\u53e3 \u3002 \u5982\u679cNebulaGraph\u670d\u52a1\u6b63\u5e38\uff0c\u8fdb\u5165\u7b2c 4 \u6b65\u7ee7\u7eed\u6392\u67e5\u95ee\u9898\u3002\u5426\u5219\uff0c\u8bf7\u91cd\u542fNebulaGraph\u670d\u52a1\u3002 Note \u5982\u679c\u4e4b\u524d\u4f7f\u7528 docker-compose up -d \u542f\u52a8NebulaGraph\uff0c\u5fc5\u987b\u8fd0\u884c docker-compose down \u547d\u4ee4\u505c\u6b62NebulaGraph\u3002 \u7b2c 4 \u6b65\u3002\u786e\u8ba4 Graph \u670d\u52a1\u7684\u7f51\u7edc\u8fde\u63a5\u662f\u5426\u6b63\u5e38 \u00b6 \u5728 Studio \u673a\u5668\u4e0a\u8fd0\u884c\u547d\u4ee4\uff08\u4f8b\u5982 telnet <graph_server_ip> 9669 \uff09\u786e\u8ba4NebulaGraph\u7684 Graph \u670d\u52a1\u7f51\u7edc\u8fde\u63a5\u662f\u5426\u6b63\u5e38\u3002 \u5982\u679c\u8fde\u63a5\u5931\u8d25\uff0c\u5219\u6309\u4ee5\u4e0b\u8981\u6c42\u68c0\u67e5\uff1a \u5982\u679c Studio \u4e0eNebulaGraph\u5728\u540c\u4e00\u53f0\u673a\u5668\u4e0a\uff0c\u68c0\u67e5\u7aef\u53e3\u662f\u5426\u5df2\u66b4\u9732\u3002 \u5982\u679c\u4e24\u8005\u4e0d\u5728\u540c\u4e00\u53f0\u673a\u5668\u4e0a\uff0c\u68c0\u67e5NebulaGraph\u670d\u52a1\u5668\u7684\u7f51\u7edc\u914d\u7f6e\uff0c\u4f8b\u5982\uff0c\u9632\u706b\u5899\u3001\u7f51\u5173\u4ee5\u53ca\u7aef\u53e3\u3002 \u5982\u679c\u6309\u4e0a\u8ff0\u6b65\u9aa4\u6392\u67e5\u540e\u4ecd\u65e0\u6cd5\u8fde\u63a5NebulaGraph\u670d\u52a1\uff0c\u8bf7\u524d\u5f80 NebulaGraph\u5b98\u65b9\u8bba\u575b \u54a8\u8be2\u3002","title":"\u8fde\u63a5\u6570\u636e\u5e93\u9519\u8bef"},{"location":"nebula-studio/troubleshooting/st-ug-config-server-errors/#_1","text":"","title":"\u8fde\u63a5\u6570\u636e\u5e93\u9519\u8bef"},{"location":"nebula-studio/troubleshooting/st-ug-config-server-errors/#_2","text":"\u6309 \u8fde\u63a5 Studio \u6587\u6863\u64cd\u4f5c\uff0c\u63d0\u793a \u914d\u7f6e\u5931\u8d25 \u3002","title":"\u95ee\u9898\u63cf\u8ff0"},{"location":"nebula-studio/troubleshooting/st-ug-config-server-errors/#_3","text":"\u7528\u6237\u53ef\u4ee5\u6309\u4ee5\u4e0b\u6b65\u9aa4\u6392\u67e5\u95ee\u9898\u3002","title":"\u53ef\u80fd\u7684\u539f\u56e0\u53ca\u89e3\u51b3\u65b9\u6cd5"},{"location":"nebula-studio/troubleshooting/st-ug-config-server-errors/#1_host","text":"\u5fc5\u987b\u586b\u5199NebulaGraph\u56fe\u6570\u636e\u5e93 Graph \u670d\u52a1\u7684 IP \u5730\u5740\uff08 graph_server_ip \uff09\u548c\u7aef\u53e3\u3002\u5982\u679c\u672a\u505a\u4fee\u6539\uff0c\u7aef\u53e3\u9ed8\u8ba4\u4e3a 9669 \u3002\u5373\u4f7fNebulaGraph\u4e0e Studio \u90fd\u90e8\u7f72\u5728\u5f53\u524d\u673a\u5668\u4e0a\uff0c\u7528\u6237\u4e5f\u5fc5\u987b\u4f7f\u7528\u672c\u673a IP \u5730\u5740\uff0c\u800c\u4e0d\u80fd\u4f7f\u7528 127.0.0.1 \u3001 localhost \u6216\u8005 0.0.0.0 \u3002","title":"\u7b2c 1 \u6b65\u3002\u786e\u8ba4 Host \u5b57\u6bb5\u7684\u683c\u5f0f\u662f\u5426\u6b63\u786e"},{"location":"nebula-studio/troubleshooting/st-ug-config-server-errors/#2","text":"\u5982\u679cNebulaGraph\u6ca1\u6709\u5f00\u542f\u8eab\u4efd\u8ba4\u8bc1\uff0c\u7528\u6237\u53ef\u4ee5\u586b\u5199\u4efb\u610f\u5b57\u7b26\u4e32\u767b\u5f55\u3002 \u5982\u679c\u5df2\u7ecf\u5f00\u542f\u8eab\u4efd\u8ba4\u8bc1\uff0c\u7528\u6237\u5fc5\u987b\u4f7f\u7528\u5206\u914d\u7684\u8d26\u53f7\u767b\u5f55\u3002","title":"\u7b2c 2 \u6b65\u3002\u786e\u8ba4 \u7528\u6237\u540d \u548c \u5bc6\u7801 \u662f\u5426\u6b63\u786e"},{"location":"nebula-studio/troubleshooting/st-ug-config-server-errors/#3_nebulagraph","text":"\u68c0\u67e5NebulaGraph\u670d\u52a1\u72b6\u6001\u3002\u5173\u4e8e\u67e5\u770b\u670d\u52a1\u7684\u64cd\u4f5c\uff1a \u5982\u679c\u5728 Linux \u670d\u52a1\u5668\u4e0a\u901a\u8fc7\u7f16\u8bd1\u90e8\u7f72\u7684NebulaGraph\uff0c\u53c2\u8003 \u67e5\u770bNebulaGraph\u670d\u52a1 \u3002 \u5982\u679c\u4f7f\u7528 Docker Compose \u90e8\u7f72\u548c RPM \u90e8\u7f72\u7684NebulaGraph\uff0c\u53c2\u8003 \u67e5\u770bNebulaGraph\u670d\u52a1\u72b6\u6001\u548c\u7aef\u53e3 \u3002 \u5982\u679cNebulaGraph\u670d\u52a1\u6b63\u5e38\uff0c\u8fdb\u5165\u7b2c 4 \u6b65\u7ee7\u7eed\u6392\u67e5\u95ee\u9898\u3002\u5426\u5219\uff0c\u8bf7\u91cd\u542fNebulaGraph\u670d\u52a1\u3002 Note \u5982\u679c\u4e4b\u524d\u4f7f\u7528 docker-compose up -d \u542f\u52a8NebulaGraph\uff0c\u5fc5\u987b\u8fd0\u884c docker-compose down \u547d\u4ee4\u505c\u6b62NebulaGraph\u3002","title":"\u7b2c 3 \u6b65\u3002\u786e\u8ba4NebulaGraph\u670d\u52a1\u662f\u5426\u6b63\u5e38"},{"location":"nebula-studio/troubleshooting/st-ug-config-server-errors/#4_graph","text":"\u5728 Studio \u673a\u5668\u4e0a\u8fd0\u884c\u547d\u4ee4\uff08\u4f8b\u5982 telnet <graph_server_ip> 9669 \uff09\u786e\u8ba4NebulaGraph\u7684 Graph \u670d\u52a1\u7f51\u7edc\u8fde\u63a5\u662f\u5426\u6b63\u5e38\u3002 \u5982\u679c\u8fde\u63a5\u5931\u8d25\uff0c\u5219\u6309\u4ee5\u4e0b\u8981\u6c42\u68c0\u67e5\uff1a \u5982\u679c Studio \u4e0eNebulaGraph\u5728\u540c\u4e00\u53f0\u673a\u5668\u4e0a\uff0c\u68c0\u67e5\u7aef\u53e3\u662f\u5426\u5df2\u66b4\u9732\u3002 \u5982\u679c\u4e24\u8005\u4e0d\u5728\u540c\u4e00\u53f0\u673a\u5668\u4e0a\uff0c\u68c0\u67e5NebulaGraph\u670d\u52a1\u5668\u7684\u7f51\u7edc\u914d\u7f6e\uff0c\u4f8b\u5982\uff0c\u9632\u706b\u5899\u3001\u7f51\u5173\u4ee5\u53ca\u7aef\u53e3\u3002 \u5982\u679c\u6309\u4e0a\u8ff0\u6b65\u9aa4\u6392\u67e5\u540e\u4ecd\u65e0\u6cd5\u8fde\u63a5NebulaGraph\u670d\u52a1\uff0c\u8bf7\u524d\u5f80 NebulaGraph\u5b98\u65b9\u8bba\u575b \u54a8\u8be2\u3002","title":"\u7b2c 4 \u6b65\u3002\u786e\u8ba4 Graph \u670d\u52a1\u7684\u7f51\u7edc\u8fde\u63a5\u662f\u5426\u6b63\u5e38"},{"location":"nebula-studio/troubleshooting/st-ug-connection-errors/","text":"\u65e0\u6cd5\u8bbf\u95ee Studio \u00b6 \u95ee\u9898\u63cf\u8ff0 \u00b6 \u6211\u6309\u7167\u6587\u6863\u63cf\u8ff0\u542f\u52a8 Studio \u540e\u8bbf\u95ee 127.0.0.1:7001 \u6216\u8005 0.0.0.0:7001 \uff0c\u4f46\u662f\u6253\u4e0d\u5f00\u9875\u9762\uff0c\u4e3a\u4ec0\u4e48\uff1f \u53ef\u80fd\u7684\u539f\u56e0\u53ca\u89e3\u51b3\u65b9\u6cd5 \u00b6 \u7528\u6237\u53ef\u4ee5\u6309\u4ee5\u4e0b\u987a\u5e8f\u6392\u67e5\u95ee\u9898\u3002 1.\u786e\u8ba4\u7cfb\u7edf\u67b6\u6784 \u00b6 \u9700\u8981\u786e\u8ba4\u90e8\u7f72 Studio \u670d\u52a1\u7684\u673a\u5668\u662f\u5426\u4e3a x86_64 \u67b6\u6784\u3002\u76ee\u524d Studio \u4ec5\u652f\u6301 x86_64 \u7cfb\u7edf\u67b6\u6784\u3002 2.\u68c0\u67e5 Studio \u670d\u52a1\u662f\u5426\u6b63\u5e38\u542f\u52a8 \u00b6 \u4f7f\u7528 RPM \u6216 DEB \u5305\u90e8\u7f72\u7684 Studio\uff0c\u4f7f\u7528 systemctl status nebula-graph-studio \u67e5\u770b\u8fd0\u884c\u72b6\u6001\u3002 \u4f7f\u7528 tar \u5305\u90e8\u7f72\u7684 Studio\uff0c\u4f7f\u7528 sudo lsof -i:7001 \u67e5\u770b\u7aef\u53e3\u72b6\u6001\u3002 \u4f7f\u7528 Docker-compose \u90e8\u7f72\u7684 Studio\uff0c\u4f7f\u7528 docker-compose ps \u67e5\u770b\u8fd0\u884c\u72b6\u6001\u3002 \u5982\u679c\u670d\u52a1\u6b63\u5e38\uff0c\u8fd4\u56de\u7ed3\u679c\u5982\u4e0b\u3002\u5176\u4e2d\uff0c State \u5217\u5e94\u5168\u90e8\u663e\u793a\u4e3a Up \u3002 Name Command State Ports ------------------------------------------------------------------------------------------------------ nebula-web-docker_client_1 ./nebula-go-api Up 0 .0.0.0:32782->8080/tcp nebula-web-docker_importer_1 nebula-importer --port = 569 ... Up 0 .0.0.0:32783->5699/tcp nebula-web-docker_nginx_1 /docker-entrypoint.sh ngin ... Up 0 .0.0.0:7001->7001/tcp, 80 /tcp nebula-web-docker_web_1 docker-entrypoint.sh npm r ... Up 0 .0.0.0:32784->7001/tcp Note \u5982\u679c\u4e4b\u524d\u4f7f\u7528 docker-compose up -d \u542f\u52a8 Studio\uff0c\u5fc5\u987b\u8fd0\u884c docker-compose down \u547d\u4ee4\u505c\u6b62 Studio\u3002 \u5982\u679c\u670d\u52a1\u6ca1\u6709\u6b63\u5e38\u8fd0\u884c\uff0c\u8bf7\u91cd\u65b0\u542f\u52a8 Studio\u3002\u8be6\u7ec6\u4fe1\u606f\uff0c\u53c2\u8003 \u90e8\u7f72 Studio \u3002 3.\u786e\u8ba4\u8bbf\u95ee\u5730\u5740 \u00b6 \u5982\u679c Studio \u4e0e\u6d4f\u89c8\u5668\u5728\u540c\u4e00\u53f0\u673a\u5668\u4e0a\uff0c\u7528\u6237\u53ef\u4ee5\u5728\u6d4f\u89c8\u5668\u91cc\u4f7f\u7528 localhost:7001 \u3001 127.0.0.1:7001 \u6216\u8005 0.0.0.0:7001 \u8bbf\u95ee Studio\u3002 \u5982\u679c\u4e24\u8005\u4e0d\u5728\u540c\u4e00\u53f0\u673a\u5668\u4e0a\uff0c\u5fc5\u987b\u5728\u6d4f\u89c8\u5668\u91cc\u8f93\u5165 <studio_server_ip>:7001 \u3002\u5176\u4e2d\uff0c studio_server_ip \u662f\u6307\u90e8\u7f72 Studio \u670d\u52a1\u7684\u673a\u5668\u7684 IP \u5730\u5740\u3002 4.\u786e\u8ba4\u7f51\u7edc\u8fde\u901a\u6027 \u00b6 \u8fd0\u884c curl <studio_server_ip>:7001 -I \u786e\u8ba4\u662f\u5426\u6b63\u5e38\u3002\u5982\u679c\u8fd4\u56de HTTP/1.1 200 OK \uff0c\u8868\u793a\u7f51\u7edc\u8fde\u901a\u6b63\u5e38\u3002 \u5982\u679c\u8fde\u63a5\u88ab\u62d2\u7edd\uff0c\u5219\u6309\u4ee5\u4e0b\u8981\u6c42\u68c0\u67e5\uff1a \u5982\u679c\u6d4f\u89c8\u5668\u4e0e Studio \u5728\u540c\u4e00\u53f0\u673a\u5668\u4e0a\uff0c\u68c0\u67e5\u7aef\u53e3\u662f\u5426\u5df2\u66b4\u9732\u3002 \u5982\u679c\u4e24\u8005\u4e0d\u5728\u540c\u4e00\u53f0\u673a\u5668\u4e0a\uff0c\u68c0\u67e5 Studio \u6240\u5728\u673a\u5668\u7684\u7f51\u7edc\u914d\u7f6e\uff0c\u4f8b\u5982\uff0c\u9632\u706b\u5899\u3001\u7f51\u5173\u4ee5\u53ca\u7aef\u53e3\u3002 \u5982\u679c\u6309\u4e0a\u8ff0\u6b65\u9aa4\u6392\u67e5\u540e\u4ecd\u65e0\u6cd5\u8bbf\u95ee Studio\uff0c\u8bf7\u524d\u5f80 NebulaGraph\u5b98\u65b9\u8bba\u575b \u54a8\u8be2\u3002","title":"\u65e0\u6cd5\u8bbf\u95ee Studio"},{"location":"nebula-studio/troubleshooting/st-ug-connection-errors/#studio","text":"","title":"\u65e0\u6cd5\u8bbf\u95ee Studio"},{"location":"nebula-studio/troubleshooting/st-ug-connection-errors/#_1","text":"\u6211\u6309\u7167\u6587\u6863\u63cf\u8ff0\u542f\u52a8 Studio \u540e\u8bbf\u95ee 127.0.0.1:7001 \u6216\u8005 0.0.0.0:7001 \uff0c\u4f46\u662f\u6253\u4e0d\u5f00\u9875\u9762\uff0c\u4e3a\u4ec0\u4e48\uff1f","title":"\u95ee\u9898\u63cf\u8ff0"},{"location":"nebula-studio/troubleshooting/st-ug-connection-errors/#_2","text":"\u7528\u6237\u53ef\u4ee5\u6309\u4ee5\u4e0b\u987a\u5e8f\u6392\u67e5\u95ee\u9898\u3002","title":"\u53ef\u80fd\u7684\u539f\u56e0\u53ca\u89e3\u51b3\u65b9\u6cd5"},{"location":"nebula-studio/troubleshooting/st-ug-connection-errors/#1","text":"\u9700\u8981\u786e\u8ba4\u90e8\u7f72 Studio \u670d\u52a1\u7684\u673a\u5668\u662f\u5426\u4e3a x86_64 \u67b6\u6784\u3002\u76ee\u524d Studio \u4ec5\u652f\u6301 x86_64 \u7cfb\u7edf\u67b6\u6784\u3002","title":"1.\u786e\u8ba4\u7cfb\u7edf\u67b6\u6784"},{"location":"nebula-studio/troubleshooting/st-ug-connection-errors/#2_studio","text":"\u4f7f\u7528 RPM \u6216 DEB \u5305\u90e8\u7f72\u7684 Studio\uff0c\u4f7f\u7528 systemctl status nebula-graph-studio \u67e5\u770b\u8fd0\u884c\u72b6\u6001\u3002 \u4f7f\u7528 tar \u5305\u90e8\u7f72\u7684 Studio\uff0c\u4f7f\u7528 sudo lsof -i:7001 \u67e5\u770b\u7aef\u53e3\u72b6\u6001\u3002 \u4f7f\u7528 Docker-compose \u90e8\u7f72\u7684 Studio\uff0c\u4f7f\u7528 docker-compose ps \u67e5\u770b\u8fd0\u884c\u72b6\u6001\u3002 \u5982\u679c\u670d\u52a1\u6b63\u5e38\uff0c\u8fd4\u56de\u7ed3\u679c\u5982\u4e0b\u3002\u5176\u4e2d\uff0c State \u5217\u5e94\u5168\u90e8\u663e\u793a\u4e3a Up \u3002 Name Command State Ports ------------------------------------------------------------------------------------------------------ nebula-web-docker_client_1 ./nebula-go-api Up 0 .0.0.0:32782->8080/tcp nebula-web-docker_importer_1 nebula-importer --port = 569 ... Up 0 .0.0.0:32783->5699/tcp nebula-web-docker_nginx_1 /docker-entrypoint.sh ngin ... Up 0 .0.0.0:7001->7001/tcp, 80 /tcp nebula-web-docker_web_1 docker-entrypoint.sh npm r ... Up 0 .0.0.0:32784->7001/tcp Note \u5982\u679c\u4e4b\u524d\u4f7f\u7528 docker-compose up -d \u542f\u52a8 Studio\uff0c\u5fc5\u987b\u8fd0\u884c docker-compose down \u547d\u4ee4\u505c\u6b62 Studio\u3002 \u5982\u679c\u670d\u52a1\u6ca1\u6709\u6b63\u5e38\u8fd0\u884c\uff0c\u8bf7\u91cd\u65b0\u542f\u52a8 Studio\u3002\u8be6\u7ec6\u4fe1\u606f\uff0c\u53c2\u8003 \u90e8\u7f72 Studio \u3002","title":"2.\u68c0\u67e5 Studio \u670d\u52a1\u662f\u5426\u6b63\u5e38\u542f\u52a8"},{"location":"nebula-studio/troubleshooting/st-ug-connection-errors/#3","text":"\u5982\u679c Studio \u4e0e\u6d4f\u89c8\u5668\u5728\u540c\u4e00\u53f0\u673a\u5668\u4e0a\uff0c\u7528\u6237\u53ef\u4ee5\u5728\u6d4f\u89c8\u5668\u91cc\u4f7f\u7528 localhost:7001 \u3001 127.0.0.1:7001 \u6216\u8005 0.0.0.0:7001 \u8bbf\u95ee Studio\u3002 \u5982\u679c\u4e24\u8005\u4e0d\u5728\u540c\u4e00\u53f0\u673a\u5668\u4e0a\uff0c\u5fc5\u987b\u5728\u6d4f\u89c8\u5668\u91cc\u8f93\u5165 <studio_server_ip>:7001 \u3002\u5176\u4e2d\uff0c studio_server_ip \u662f\u6307\u90e8\u7f72 Studio \u670d\u52a1\u7684\u673a\u5668\u7684 IP \u5730\u5740\u3002","title":"3.\u786e\u8ba4\u8bbf\u95ee\u5730\u5740"},{"location":"nebula-studio/troubleshooting/st-ug-connection-errors/#4","text":"\u8fd0\u884c curl <studio_server_ip>:7001 -I \u786e\u8ba4\u662f\u5426\u6b63\u5e38\u3002\u5982\u679c\u8fd4\u56de HTTP/1.1 200 OK \uff0c\u8868\u793a\u7f51\u7edc\u8fde\u901a\u6b63\u5e38\u3002 \u5982\u679c\u8fde\u63a5\u88ab\u62d2\u7edd\uff0c\u5219\u6309\u4ee5\u4e0b\u8981\u6c42\u68c0\u67e5\uff1a \u5982\u679c\u6d4f\u89c8\u5668\u4e0e Studio \u5728\u540c\u4e00\u53f0\u673a\u5668\u4e0a\uff0c\u68c0\u67e5\u7aef\u53e3\u662f\u5426\u5df2\u66b4\u9732\u3002 \u5982\u679c\u4e24\u8005\u4e0d\u5728\u540c\u4e00\u53f0\u673a\u5668\u4e0a\uff0c\u68c0\u67e5 Studio \u6240\u5728\u673a\u5668\u7684\u7f51\u7edc\u914d\u7f6e\uff0c\u4f8b\u5982\uff0c\u9632\u706b\u5899\u3001\u7f51\u5173\u4ee5\u53ca\u7aef\u53e3\u3002 \u5982\u679c\u6309\u4e0a\u8ff0\u6b65\u9aa4\u6392\u67e5\u540e\u4ecd\u65e0\u6cd5\u8bbf\u95ee Studio\uff0c\u8bf7\u524d\u5f80 NebulaGraph\u5b98\u65b9\u8bba\u575b \u54a8\u8be2\u3002","title":"4.\u786e\u8ba4\u7f51\u7edc\u8fde\u901a\u6027"},{"location":"nebula-studio/troubleshooting/st-ug-faq/","text":"\u5e38\u89c1\u95ee\u9898 \u00b6 \u4e3a\u4ec0\u4e48\u6211\u65e0\u6cd5\u4f7f\u7528\u67d0\u4e2a\u529f\u80fd\uff1f \u5982\u679c\u53d1\u73b0\u65e0\u6cd5\u4f7f\u7528\u67d0\u4e2a\u529f\u80fd\uff0c\u5efa\u8bae\u6309\u4ee5\u4e0b\u6b65\u9aa4\u6392\u9664\u95ee\u9898\uff1a \u786e\u8ba4NebulaGraph\u662f\u6700\u65b0\u7248\u672c\u3002\u5982\u679c\u4f7f\u7528 Docker Compose \u90e8\u7f72NebulaGraph\u6570\u636e\u5e93\uff0c\u5efa\u8bae\u8fd0\u884c docker-compose pull && docker-compose up -d \u62c9\u53d6\u6700\u65b0\u7684 Docker \u955c\u50cf\uff0c\u5e76\u542f\u52a8\u5bb9\u5668\u3002 \u786e\u8ba4 Studio \u662f\u6700\u65b0\u7248\u672c\u3002\u8be6\u7ec6\u4fe1\u606f\u53c2\u8003 \u7248\u672c\u66f4\u65b0 \u3002 \u641c\u7d22 \u8bba\u575b \u6216 GitHub \u7684 nebula \u548c nebula-web-docker \u9879\u76ee\uff0c\u786e\u8ba4\u662f\u5426\u5df2\u7ecf\u6709\u7c7b\u4f3c\u7684\u95ee\u9898\u3002 \u5982\u679c\u4e0a\u8ff0\u64cd\u4f5c\u5747\u672a\u89e3\u51b3\u95ee\u9898\uff0c\u6b22\u8fce\u5728\u8bba\u575b\u4e0a\u63d0\u4ea4\u95ee\u9898\u3002","title":"Studio \u5e38\u89c1\u95ee\u9898"},{"location":"nebula-studio/troubleshooting/st-ug-faq/#_1","text":"\u4e3a\u4ec0\u4e48\u6211\u65e0\u6cd5\u4f7f\u7528\u67d0\u4e2a\u529f\u80fd\uff1f \u5982\u679c\u53d1\u73b0\u65e0\u6cd5\u4f7f\u7528\u67d0\u4e2a\u529f\u80fd\uff0c\u5efa\u8bae\u6309\u4ee5\u4e0b\u6b65\u9aa4\u6392\u9664\u95ee\u9898\uff1a \u786e\u8ba4NebulaGraph\u662f\u6700\u65b0\u7248\u672c\u3002\u5982\u679c\u4f7f\u7528 Docker Compose \u90e8\u7f72NebulaGraph\u6570\u636e\u5e93\uff0c\u5efa\u8bae\u8fd0\u884c docker-compose pull && docker-compose up -d \u62c9\u53d6\u6700\u65b0\u7684 Docker \u955c\u50cf\uff0c\u5e76\u542f\u52a8\u5bb9\u5668\u3002 \u786e\u8ba4 Studio \u662f\u6700\u65b0\u7248\u672c\u3002\u8be6\u7ec6\u4fe1\u606f\u53c2\u8003 \u7248\u672c\u66f4\u65b0 \u3002 \u641c\u7d22 \u8bba\u575b \u6216 GitHub \u7684 nebula \u548c nebula-web-docker \u9879\u76ee\uff0c\u786e\u8ba4\u662f\u5426\u5df2\u7ecf\u6709\u7c7b\u4f3c\u7684\u95ee\u9898\u3002 \u5982\u679c\u4e0a\u8ff0\u64cd\u4f5c\u5747\u672a\u89e3\u51b3\u95ee\u9898\uff0c\u6b22\u8fce\u5728\u8bba\u575b\u4e0a\u63d0\u4ea4\u95ee\u9898\u3002","title":"\u5e38\u89c1\u95ee\u9898"},{"location":"reuse/source-monitoring-metrics/","text":"Graph \u00b6 \u53c2\u6570 \u8bf4\u660e num_active_queries \u6d3b\u8dc3\u7684\u67e5\u8be2\u8bed\u53e5\u6570\u7684\u53d8\u5316\u6570\u3002 \u8ba1\u7b97\u516c\u5f0f\uff1a\u65f6\u95f4\u8303\u56f4\u5185\u5f00\u59cb\u6267\u884c\u7684\u8bed\u53e5\u6570\u51cf\u53bb\u6267\u884c\u5b8c\u6bd5\u7684\u8bed\u53e5\u6570\u3002 num_active_sessions \u6d3b\u8dc3\u7684\u4f1a\u8bdd\u6570\u7684\u53d8\u5316\u6570\u3002 \u8ba1\u7b97\u516c\u5f0f\uff1a\u65f6\u95f4\u8303\u56f4\u5185\u767b\u5f55\u7684\u4f1a\u8bdd\u6570\u51cf\u53bb\u767b\u51fa\u7684\u4f1a\u8bdd\u6570\u3002 \u4f8b\u5982\u67e5\u8be2num_active_sessions.sum.5\uff0c\u8fc7\u53bb 5 \u79d2\u4e2d\u767b\u5f55\u4e86 10 \u4e2a\u4f1a\u8bdd\u6570\uff0c\u767b\u51fa\u4e86 30 \u4e2a\u4f1a\u8bdd\u6570\uff0c\u90a3\u4e48\u8be5\u6307\u6807\u503c\u5c31\u662f -20 \uff0810-30\uff09\u3002 num_aggregate_executors \u805a\u5408\uff08Aggregate\uff09\u7b97\u5b50\u6267\u884c\u65f6\u95f4\u3002 num_auth_failed_sessions_bad_username_password \u56e0\u7528\u6237\u540d\u5bc6\u7801\u9519\u8bef\u5bfc\u9a8c\u8bc1\u5931\u8d25\u7684\u4f1a\u8bdd\u6570\u91cf\u3002 num_auth_failed_sessions_out_of_max_allowed \u56e0\u4e3a\u8d85\u8fc7 FLAG_OUT_OF_MAX_ALLOWED_CONNECTIONS \u53c2\u6570\u5bfc\u81f4\u7684\u9a8c\u8bc1\u767b\u5f55\u7684\u5931\u8d25\u7684\u4f1a\u8bdd\u6570\u91cf\u3002 num_auth_failed_sessions \u767b\u5f55\u9a8c\u8bc1\u5931\u8d25\u7684\u4f1a\u8bdd\u6570\u91cf\u3002 num_indexscan_executors \u7d22\u5f15\u626b\u63cf\uff08IndexScan\uff09\u7b97\u5b50\u6267\u884c\u65f6\u95f4\u3002 num_killed_queries \u88ab\u7ec8\u6b62\u7684\u67e5\u8be2\u6570\u91cf\u3002 num_opened_sessions \u670d\u52a1\u7aef\u5efa\u7acb\u8fc7\u7684\u4f1a\u8bdd\u6570\u91cf\u3002 num_queries \u67e5\u8be2\u6b21\u6570\u3002 num_query_errors_leader_changes \u56e0\u67e5\u8be2\u9519\u8bef\u800c\u5bfc\u81f4\u7684 Leader \u53d8\u66f4\u7684\u6b21\u6570\u3002 num_query_errors \u67e5\u8be2\u9519\u8bef\u6b21\u6570\u3002 num_reclaimed_expired_sessions \u670d\u52a1\u7aef\u4e3b\u52a8\u56de\u6536\u7684\u8fc7\u671f\u7684\u4f1a\u8bdd\u6570\u91cf\u3002 num_rpc_sent_to_metad_failed Graphd \u670d\u52a1\u53d1\u7ed9 Metad \u7684 RPC \u8bf7\u6c42\u5931\u8d25\u7684\u6570\u91cf\u3002 num_rpc_sent_to_metad Graphd \u670d\u52a1\u53d1\u7ed9 Metad \u670d\u52a1\u7684 RPC \u8bf7\u6c42\u6570\u91cf\u3002 num_rpc_sent_to_storaged_failed Graphd \u670d\u52a1\u53d1\u7ed9 Storaged \u670d\u52a1\u7684 RPC \u8bf7\u6c42\u5931\u8d25\u7684\u6570\u91cf\u3002 num_rpc_sent_to_storaged Graphd \u670d\u52a1\u53d1\u7ed9 Storaged \u670d\u52a1\u7684 RPC \u8bf7\u6c42\u6570\u91cf\u3002 num_sentences Graphd \u670d\u52a1\u63a5\u6536\u7684\u8bed\u53e5\u6570\u3002 num_slow_queries \u6162\u67e5\u8be2\u6b21\u6570\u3002 num_sort_executors \u6392\u5e8f\uff08Sort\uff09\u7b97\u5b50\u6267\u884c\u65f6\u95f4\u3002 optimizer_latency_us \u4f18\u5316\u5668\u9636\u6bb5\u5ef6\u8fdf\u65f6\u95f4\u3002 query_latency_us \u67e5\u8be2\u5ef6\u8fdf\u65f6\u95f4\u3002 slow_query_latency_us \u6162\u67e5\u8be2\u5ef6\u8fdf\u65f6\u95f4\u3002 num_queries_hit_memory_watermark \u8fbe\u5230\u5185\u5b58\u6c34\u4f4d\u7ebf\u7684\u8bed\u53e5\u7684\u6570\u91cf\u3002 resp_part_completeness \u90e8\u5206\u6210\u529f\u7684\u5b8c\u6574\u6027\u3002\u9700\u8981\u5728 Graph \u914d\u7f6e\u4e2d\u8bbe\u7f6e accept_partial_success \u4e3a true \u3002 Meta \u00b6 \u53c2\u6570 \u8bf4\u660e commit_log_latency_us Raft \u534f\u8bae\u4e2d Commit \u65e5\u5fd7\u7684\u5ef6\u8fdf\u65f6\u95f4\u3002 commit_snapshot_latency_us Raft \u534f\u8bae\u4e2d Commit \u5feb\u7167\u7684\u5ef6\u8fdf\u65f6\u95f4\u3002 heartbeat_latency_us \u5fc3\u8df3\u5ef6\u8fdf\u65f6\u95f4\u3002 num_heartbeats \u5fc3\u8df3\u6b21\u6570\u3002 num_raft_votes Raft \u534f\u8bae\u4e2d\u6295\u7968\u7684\u6b21\u6570\u3002 transfer_leader_latency_us Raft \u534f\u8bae\u4e2d\u8f6c\u79fb Leader \u7684\u5ef6\u8fdf\u65f6\u95f4\u3002 num_agent_heartbeats AgentHBProcessor \u5fc3\u8df3\u6b21\u6570\u3002 agent_heartbeat_latency_us AgentHBProcessor \u5ef6\u8fdf\u65f6\u95f4\u3002 replicate_log_latency_us Raft \u590d\u5236\u65e5\u5fd7\u81f3\u5927\u591a\u6570\u8282\u70b9\u7684\u5ef6\u8fdf\u3002 num_send_snapshot Raft \u53d1\u9001\u5feb\u7167\u81f3\u5176\u4ed6\u8282\u70b9\u7684\u6b21\u6570\u3002 append_log_latency_us Raft \u590d\u5236\u65e5\u5fd7\u5230\u5355\u4e2a\u8282\u70b9\u7684\u5ef6\u8fdf\u3002 append_wal_latency_us Raft \u5199\u5165\u5355\u6761 WAL \u7684\u5ef6\u8fdf\u3002 num_grant_votes Raft \u6295\u7968\u7ed9\u5176\u4ed6\u8282\u70b9\u7684\u6b21\u6570\u3002 num_start_elect Raft \u53d1\u8d77\u6295\u7968\u7684\u6b21\u6570\u3002 Storage \u00b6 \u53c2\u6570 \u8bf4\u660e add_edges_latency_us \u6dfb\u52a0\u8fb9\u7684\u5ef6\u8fdf\u65f6\u95f4\u3002 add_vertices_latency_us \u6dfb\u52a0\u70b9\u7684\u5ef6\u8fdf\u65f6\u95f4\u3002 commit_log_latency_us Raft \u534f\u8bae\u4e2d Commit \u65e5\u5fd7\u7684\u5ef6\u8fdf\u65f6\u95f4\u3002 commit_snapshot_latency_us Raft \u534f\u8bae\u4e2d Commit \u5feb\u7167\u7684\u5ef6\u8fdf\u65f6\u95f4\u3002 delete_edges_latency_us \u5220\u9664\u8fb9\u7684\u5ef6\u8fdf\u65f6\u95f4\u3002 delete_vertices_latency_us \u5220\u9664\u70b9\u7684\u5ef6\u8fdf\u65f6\u95f4\u3002 get_neighbors_latency_us \u67e5\u8be2\u90bb\u5c45\u5ef6\u8fdf\u65f6\u95f4\u3002 get_dst_by_src_latency_us \u901a\u8fc7\u8d77\u59cb\u70b9\u83b7\u53d6\u7ec8\u70b9\u7684\u5ef6\u8fdf\u65f6\u95f4\u3002 num_get_prop GetPropProcessor \u6267\u884c\u7684\u6b21\u6570\u3002 num_get_neighbors_errors GetNeighborsProcessor \u6267\u884c\u51fa\u9519\u7684\u6b21\u6570\u3002 num_get_dst_by_src_errors GetDstBySrcProcessor \u6267\u884c\u51fa\u9519\u7684\u6b21\u6570\u3002 get_prop_latency_us GetPropProcessor \u6267\u884c\u7684\u5ef6\u8fdf\u65f6\u95f4\u3002 num_edges_deleted \u5220\u9664\u7684\u8fb9\u6570\u91cf\u3002 num_edges_inserted \u63d2\u5165\u7684\u8fb9\u6570\u91cf\u3002 num_raft_votes Raft \u534f\u8bae\u4e2d\u6295\u7968\u7684\u6b21\u6570\u3002 num_rpc_sent_to_metad_failed Storaged \u670d\u52a1\u53d1\u7ed9 Metad \u670d\u52a1\u7684 RPC \u8bf7\u6c42\u5931\u8d25\u7684\u6570\u91cf\u3002 num_rpc_sent_to_metad Storaged \u670d\u52a1\u53d1\u7ed9 Metad \u670d\u52a1\u7684 RPC \u8bf7\u6c42\u6570\u91cf\u3002 num_tags_deleted \u5220\u9664\u7684 Tag \u6570\u91cf\u3002 num_vertices_deleted \u5220\u9664\u7684\u70b9\u6570\u91cf\u3002 num_vertices_inserted \u63d2\u5165\u7684\u70b9\u6570\u91cf\u3002 transfer_leader_latency_us Raft \u534f\u8bae\u4e2d\u8f6c\u79fb Leader \u7684\u5ef6\u8fdf\u65f6\u95f4\u3002 lookup_latency_us LookupProcessor \u6267\u884c\u7684\u5ef6\u8fdf\u65f6\u95f4\u3002 num_lookup_errors LookupProcessor \u6267\u884c\u65f6\u51fa\u9519\u7684\u6b21\u6570\u3002 num_scan_vertex ScanVertexProcessor \u6267\u884c\u7684\u6b21\u6570\u3002 num_scan_vertex_errors ScanVertexProcessor \u6267\u884c\u65f6\u51fa\u9519\u7684\u6b21\u6570\u3002 update_edge_latency_us UpdateEdgeProcessor \u6267\u884c\u7684\u5ef6\u8fdf\u65f6\u95f4\u3002 num_update_vertex UpdateVertexProcessor \u6267\u884c\u7684\u6b21\u6570\u3002 num_update_vertex_errors UpdateVertexProcessor \u6267\u884c\u65f6\u51fa\u9519\u7684\u6b21\u6570\u3002 kv_get_latency_us Getprocessor \u7684\u5ef6\u8fdf\u65f6\u95f4\u3002 kv_put_latency_us PutProcessor \u7684\u5ef6\u8fdf\u65f6\u95f4\u3002 kv_remove_latency_us RemoveProcessor \u7684\u5ef6\u8fdf\u65f6\u95f4\u3002 num_kv_get_errors GetProcessor \u6267\u884c\u51fa\u9519\u6b21\u6570\u3002 num_kv_get GetProcessor \u6267\u884c\u6b21\u6570\u3002 num_kv_put_errors PutProcessor \u6267\u884c\u51fa\u9519\u6b21\u6570\u3002 num_kv_put PutProcessor \u6267\u884c\u6b21\u6570\u3002 num_kv_remove_errors RemoveProcessor \u6267\u884c\u51fa\u9519\u6b21\u6570\u3002 num_kv_remove RemoveProcessor \u6267\u884c\u6b21\u6570\u3002 forward_tranx_latency_us \u4f20\u8f93\u5ef6\u8fdf\u65f6\u95f4\u3002 scan_edge_latency_us ScanEdgeProcessor \u6267\u884c\u7684\u5ef6\u8fdf\u65f6\u95f4\u3002 num_scan_edge_errors ScanEdgeProcessor \u6267\u884c\u65f6\u51fa\u9519\u7684\u6b21\u6570\u3002 num_scan_edge ScanEdgeProcessor \u6267\u884c\u7684\u6b21\u6570\u3002 scan_vertex_latency_us ScanVertexProcessor \u6267\u884c\u7684\u5ef6\u8fdf\u65f6\u95f4\u3002 num_add_edges \u6dfb\u52a0\u8fb9\u7684\u6b21\u6570\u3002 num_add_edges_errors \u6dfb\u52a0\u8fb9\u65f6\u51fa\u9519\u7684\u6b21\u6570\u3002 num_add_vertices \u6dfb\u52a0\u70b9\u7684\u6b21\u6570\u3002 num_start_elect Raft \u53d1\u8d77\u6295\u7968\u7684\u6b21\u6570 num_add_vertices_errors \u6dfb\u52a0\u70b9\u65f6\u51fa\u9519\u7684\u6b21\u6570\u3002 num_delete_vertices_errors \u5220\u9664\u70b9\u65f6\u51fa\u9519\u7684\u6b21\u6570\u3002 append_log_latency_us Raft \u590d\u5236\u65e5\u5fd7\u5230\u5355\u4e2a\u8282\u70b9\u7684\u5ef6\u8fdf\u3002 num_grant_votes Raft \u6295\u7968\u7ed9\u5176\u4ed6\u8282\u70b9\u7684\u6b21\u6570\u3002 replicate_log_latency_us Raft \u590d\u5236\u65e5\u5fd7\u5230\u5927\u591a\u6570\u8282\u70b9\u7684\u5ef6\u8fdf\u3002 num_delete_tags \u5220\u9664 Tag \u7684\u6b21\u6570\u3002 num_delete_tags_errors \u5220\u9664 Tag \u65f6\u51fa\u9519\u7684\u6b21\u6570\u3002 num_delete_edges \u5220\u9664\u8fb9\u7684\u6b21\u6570\u3002 num_delete_edges_errors \u5220\u9664\u8fb9\u65f6\u51fa\u9519\u7684\u6b21\u6570\u3002 num_send_snapshot \u53d1\u9001\u5feb\u7167\u7684\u6b21\u6570\u3002 update_vertex_latency_us UpdateVertexProcessor \u6267\u884c\u7684\u5ef6\u8fdf\u65f6\u95f4\u3002 append_wal_latency_us Raft \u5199\u5165\u5355\u6761 WAL \u7684\u5ef6\u8fdf\u3002 num_update_edge UpdateEdgeProcessor \u6267\u884c\u7684\u6b21\u6570\u3002 delete_tags_latency_us \u5220\u9664 Tag \u7684\u5ef6\u8fdf\u65f6\u95f4\u3002 num_update_edge_errors UpdateEdgeProcessor \u6267\u884c\u65f6\u51fa\u9519\u7684\u6b21\u6570\u3002 num_get_neighbors GetNeighborsProcessor \u6267\u884c\u7684\u6b21\u6570\u3002 num_get_dst_by_src GetDstBySrcProcessor \u6267\u884c\u7684\u6b21\u6570\u3002 num_get_prop_errors GetPropProcessor \u6267\u884c\u65f6\u51fa\u9519\u7684\u6b21\u6570\u3002 num_delete_vertices \u5220\u9664\u70b9\u7684\u6b21\u6570\u3002 num_lookup LookupProcessor \u6267\u884c\u7684\u6b21\u6570\u3002 num_sync_data Storage \u540c\u6b65 Drainer \u6570\u636e\u7684\u6b21\u6570\u3002 num_sync_data_errors Storage \u540c\u6b65 Drainer \u6570\u636e\u51fa\u9519\u7684\u6b21\u6570\u3002 sync_data_latency_us Storage \u540c\u6b65 Drainer \u6570\u636e\u7684\u5ef6\u8fdf\u65f6\u95f4\u3002 \u56fe\u7a7a\u95f4\u7ea7\u522b\u76d1\u63a7\u6307\u6807 \u00b6 Note \u56fe\u7a7a\u95f4\u7ea7\u522b\u76d1\u63a7\u6307\u6807\u662f\u52a8\u6001\u521b\u5efa\u7684, \u53ea\u6709\u5f53\u56fe\u7a7a\u95f4\u5185\u89e6\u53d1\u8be5\u884c\u4e3a\u65f6\uff0c\u5bf9\u5e94\u7684\u6307\u6807\u624d\u4f1a\u521b\u5efa\uff0c\u7528\u6237\u624d\u80fd\u67e5\u8be2\u5230\u3002 \u53c2\u6570 \u8bf4\u660e num_active_queries \u5f53\u524d\u6b63\u5728\u6267\u884c\u7684\u67e5\u8be2\u6570\u3002 num_queries \u67e5\u8be2\u6b21\u6570\u3002 num_sentences Graphd \u670d\u52a1\u63a5\u6536\u7684\u8bed\u53e5\u6570\u3002 optimizer_latency_us \u4f18\u5316\u5668\u9636\u6bb5\u5ef6\u8fdf\u65f6\u95f4\u3002 query_latency_us \u67e5\u8be2\u5ef6\u8fdf\u65f6\u95f4\u3002 num_slow_queries \u6162\u67e5\u8be2\u6b21\u6570\u3002 num_query_errors \u67e5\u8be2\u62a5\u9519\u8bed\u53e5\u6570\u91cf\u3002 num_query_errors_leader_changes \u56e0\u67e5\u8be2\u9519\u8bef\u800c\u5bfc\u81f4\u7684 Leader \u53d8\u66f4\u7684\u6b21\u6570\u3002 num_killed_queries \u88ab\u7ec8\u6b62\u7684\u67e5\u8be2\u6570\u91cf\u3002 num_aggregate_executors \u805a\u5408\uff08Aggregate\uff09\u7b97\u5b50\u6267\u884c\u65f6\u95f4\u3002 num_sort_executors \u6392\u5e8f\uff08Sort\uff09\u7b97\u5b50\u6267\u884c\u65f6\u95f4\u3002 num_indexscan_executors \u7d22\u5f15\u626b\u63cf\uff08IndexScan\uff09\u7b97\u5b50\u6267\u884c\u65f6\u95f4\u3002 num_auth_failed_sessions_bad_username_password \u56e0\u7528\u6237\u540d\u5bc6\u7801\u9519\u8bef\u5bfc\u9a8c\u8bc1\u5931\u8d25\u7684\u4f1a\u8bdd\u6570\u91cf\u3002 num_auth_failed_sessions \u767b\u5f55\u9a8c\u8bc1\u5931\u8d25\u7684\u4f1a\u8bdd\u6570\u91cf\u3002 num_opened_sessions \u670d\u52a1\u7aef\u5efa\u7acb\u8fc7\u7684\u4f1a\u8bdd\u6570\u91cf\u3002 num_queries_hit_memory_watermark \u8fbe\u5230\u5185\u5b58\u6c34\u4f4d\u7ebf\u7684\u8bed\u53e5\u7684\u6570\u91cf\u3002 num_reclaimed_expired_sessions \u670d\u52a1\u7aef\u4e3b\u52a8\u56de\u6536\u7684\u8fc7\u671f\u7684\u4f1a\u8bdd\u6570\u91cf\u3002 num_rpc_sent_to_metad_failed Graphd \u670d\u52a1\u53d1\u7ed9 Metad \u7684 RPC \u8bf7\u6c42\u5931\u8d25\u7684\u6570\u91cf\u3002 num_rpc_sent_to_metad Graphd \u670d\u52a1\u53d1\u7ed9 Metad \u670d\u52a1\u7684 RPC \u8bf7\u6c42\u6570\u91cf\u3002 num_rpc_sent_to_storaged_failed Graphd \u670d\u52a1\u53d1\u7ed9 Storaged \u670d\u52a1\u7684 RPC \u8bf7\u6c42\u5931\u8d25\u7684\u6570\u91cf\u3002 num_rpc_sent_to_storaged Graphd \u670d\u52a1\u53d1\u7ed9 Storaged \u670d\u52a1\u7684 RPC \u8bf7\u6c42\u6570\u91cf\u3002 slow_query_latency_us \u6162\u67e5\u8be2\u5ef6\u8fdf\u65f6\u95f4\u3002","title":"Source monitoring metrics"},{"location":"reuse/source-monitoring-metrics/#graph","text":"\u53c2\u6570 \u8bf4\u660e num_active_queries \u6d3b\u8dc3\u7684\u67e5\u8be2\u8bed\u53e5\u6570\u7684\u53d8\u5316\u6570\u3002 \u8ba1\u7b97\u516c\u5f0f\uff1a\u65f6\u95f4\u8303\u56f4\u5185\u5f00\u59cb\u6267\u884c\u7684\u8bed\u53e5\u6570\u51cf\u53bb\u6267\u884c\u5b8c\u6bd5\u7684\u8bed\u53e5\u6570\u3002 num_active_sessions \u6d3b\u8dc3\u7684\u4f1a\u8bdd\u6570\u7684\u53d8\u5316\u6570\u3002 \u8ba1\u7b97\u516c\u5f0f\uff1a\u65f6\u95f4\u8303\u56f4\u5185\u767b\u5f55\u7684\u4f1a\u8bdd\u6570\u51cf\u53bb\u767b\u51fa\u7684\u4f1a\u8bdd\u6570\u3002 \u4f8b\u5982\u67e5\u8be2num_active_sessions.sum.5\uff0c\u8fc7\u53bb 5 \u79d2\u4e2d\u767b\u5f55\u4e86 10 \u4e2a\u4f1a\u8bdd\u6570\uff0c\u767b\u51fa\u4e86 30 \u4e2a\u4f1a\u8bdd\u6570\uff0c\u90a3\u4e48\u8be5\u6307\u6807\u503c\u5c31\u662f -20 \uff0810-30\uff09\u3002 num_aggregate_executors \u805a\u5408\uff08Aggregate\uff09\u7b97\u5b50\u6267\u884c\u65f6\u95f4\u3002 num_auth_failed_sessions_bad_username_password \u56e0\u7528\u6237\u540d\u5bc6\u7801\u9519\u8bef\u5bfc\u9a8c\u8bc1\u5931\u8d25\u7684\u4f1a\u8bdd\u6570\u91cf\u3002 num_auth_failed_sessions_out_of_max_allowed \u56e0\u4e3a\u8d85\u8fc7 FLAG_OUT_OF_MAX_ALLOWED_CONNECTIONS \u53c2\u6570\u5bfc\u81f4\u7684\u9a8c\u8bc1\u767b\u5f55\u7684\u5931\u8d25\u7684\u4f1a\u8bdd\u6570\u91cf\u3002 num_auth_failed_sessions \u767b\u5f55\u9a8c\u8bc1\u5931\u8d25\u7684\u4f1a\u8bdd\u6570\u91cf\u3002 num_indexscan_executors \u7d22\u5f15\u626b\u63cf\uff08IndexScan\uff09\u7b97\u5b50\u6267\u884c\u65f6\u95f4\u3002 num_killed_queries \u88ab\u7ec8\u6b62\u7684\u67e5\u8be2\u6570\u91cf\u3002 num_opened_sessions \u670d\u52a1\u7aef\u5efa\u7acb\u8fc7\u7684\u4f1a\u8bdd\u6570\u91cf\u3002 num_queries \u67e5\u8be2\u6b21\u6570\u3002 num_query_errors_leader_changes \u56e0\u67e5\u8be2\u9519\u8bef\u800c\u5bfc\u81f4\u7684 Leader \u53d8\u66f4\u7684\u6b21\u6570\u3002 num_query_errors \u67e5\u8be2\u9519\u8bef\u6b21\u6570\u3002 num_reclaimed_expired_sessions \u670d\u52a1\u7aef\u4e3b\u52a8\u56de\u6536\u7684\u8fc7\u671f\u7684\u4f1a\u8bdd\u6570\u91cf\u3002 num_rpc_sent_to_metad_failed Graphd \u670d\u52a1\u53d1\u7ed9 Metad \u7684 RPC \u8bf7\u6c42\u5931\u8d25\u7684\u6570\u91cf\u3002 num_rpc_sent_to_metad Graphd \u670d\u52a1\u53d1\u7ed9 Metad \u670d\u52a1\u7684 RPC \u8bf7\u6c42\u6570\u91cf\u3002 num_rpc_sent_to_storaged_failed Graphd \u670d\u52a1\u53d1\u7ed9 Storaged \u670d\u52a1\u7684 RPC \u8bf7\u6c42\u5931\u8d25\u7684\u6570\u91cf\u3002 num_rpc_sent_to_storaged Graphd \u670d\u52a1\u53d1\u7ed9 Storaged \u670d\u52a1\u7684 RPC \u8bf7\u6c42\u6570\u91cf\u3002 num_sentences Graphd \u670d\u52a1\u63a5\u6536\u7684\u8bed\u53e5\u6570\u3002 num_slow_queries \u6162\u67e5\u8be2\u6b21\u6570\u3002 num_sort_executors \u6392\u5e8f\uff08Sort\uff09\u7b97\u5b50\u6267\u884c\u65f6\u95f4\u3002 optimizer_latency_us \u4f18\u5316\u5668\u9636\u6bb5\u5ef6\u8fdf\u65f6\u95f4\u3002 query_latency_us \u67e5\u8be2\u5ef6\u8fdf\u65f6\u95f4\u3002 slow_query_latency_us \u6162\u67e5\u8be2\u5ef6\u8fdf\u65f6\u95f4\u3002 num_queries_hit_memory_watermark \u8fbe\u5230\u5185\u5b58\u6c34\u4f4d\u7ebf\u7684\u8bed\u53e5\u7684\u6570\u91cf\u3002 resp_part_completeness \u90e8\u5206\u6210\u529f\u7684\u5b8c\u6574\u6027\u3002\u9700\u8981\u5728 Graph \u914d\u7f6e\u4e2d\u8bbe\u7f6e accept_partial_success \u4e3a true \u3002","title":"Graph"},{"location":"reuse/source-monitoring-metrics/#meta","text":"\u53c2\u6570 \u8bf4\u660e commit_log_latency_us Raft \u534f\u8bae\u4e2d Commit \u65e5\u5fd7\u7684\u5ef6\u8fdf\u65f6\u95f4\u3002 commit_snapshot_latency_us Raft \u534f\u8bae\u4e2d Commit \u5feb\u7167\u7684\u5ef6\u8fdf\u65f6\u95f4\u3002 heartbeat_latency_us \u5fc3\u8df3\u5ef6\u8fdf\u65f6\u95f4\u3002 num_heartbeats \u5fc3\u8df3\u6b21\u6570\u3002 num_raft_votes Raft \u534f\u8bae\u4e2d\u6295\u7968\u7684\u6b21\u6570\u3002 transfer_leader_latency_us Raft \u534f\u8bae\u4e2d\u8f6c\u79fb Leader \u7684\u5ef6\u8fdf\u65f6\u95f4\u3002 num_agent_heartbeats AgentHBProcessor \u5fc3\u8df3\u6b21\u6570\u3002 agent_heartbeat_latency_us AgentHBProcessor \u5ef6\u8fdf\u65f6\u95f4\u3002 replicate_log_latency_us Raft \u590d\u5236\u65e5\u5fd7\u81f3\u5927\u591a\u6570\u8282\u70b9\u7684\u5ef6\u8fdf\u3002 num_send_snapshot Raft \u53d1\u9001\u5feb\u7167\u81f3\u5176\u4ed6\u8282\u70b9\u7684\u6b21\u6570\u3002 append_log_latency_us Raft \u590d\u5236\u65e5\u5fd7\u5230\u5355\u4e2a\u8282\u70b9\u7684\u5ef6\u8fdf\u3002 append_wal_latency_us Raft \u5199\u5165\u5355\u6761 WAL \u7684\u5ef6\u8fdf\u3002 num_grant_votes Raft \u6295\u7968\u7ed9\u5176\u4ed6\u8282\u70b9\u7684\u6b21\u6570\u3002 num_start_elect Raft \u53d1\u8d77\u6295\u7968\u7684\u6b21\u6570\u3002","title":"Meta"},{"location":"reuse/source-monitoring-metrics/#storage","text":"\u53c2\u6570 \u8bf4\u660e add_edges_latency_us \u6dfb\u52a0\u8fb9\u7684\u5ef6\u8fdf\u65f6\u95f4\u3002 add_vertices_latency_us \u6dfb\u52a0\u70b9\u7684\u5ef6\u8fdf\u65f6\u95f4\u3002 commit_log_latency_us Raft \u534f\u8bae\u4e2d Commit \u65e5\u5fd7\u7684\u5ef6\u8fdf\u65f6\u95f4\u3002 commit_snapshot_latency_us Raft \u534f\u8bae\u4e2d Commit \u5feb\u7167\u7684\u5ef6\u8fdf\u65f6\u95f4\u3002 delete_edges_latency_us \u5220\u9664\u8fb9\u7684\u5ef6\u8fdf\u65f6\u95f4\u3002 delete_vertices_latency_us \u5220\u9664\u70b9\u7684\u5ef6\u8fdf\u65f6\u95f4\u3002 get_neighbors_latency_us \u67e5\u8be2\u90bb\u5c45\u5ef6\u8fdf\u65f6\u95f4\u3002 get_dst_by_src_latency_us \u901a\u8fc7\u8d77\u59cb\u70b9\u83b7\u53d6\u7ec8\u70b9\u7684\u5ef6\u8fdf\u65f6\u95f4\u3002 num_get_prop GetPropProcessor \u6267\u884c\u7684\u6b21\u6570\u3002 num_get_neighbors_errors GetNeighborsProcessor \u6267\u884c\u51fa\u9519\u7684\u6b21\u6570\u3002 num_get_dst_by_src_errors GetDstBySrcProcessor \u6267\u884c\u51fa\u9519\u7684\u6b21\u6570\u3002 get_prop_latency_us GetPropProcessor \u6267\u884c\u7684\u5ef6\u8fdf\u65f6\u95f4\u3002 num_edges_deleted \u5220\u9664\u7684\u8fb9\u6570\u91cf\u3002 num_edges_inserted \u63d2\u5165\u7684\u8fb9\u6570\u91cf\u3002 num_raft_votes Raft \u534f\u8bae\u4e2d\u6295\u7968\u7684\u6b21\u6570\u3002 num_rpc_sent_to_metad_failed Storaged \u670d\u52a1\u53d1\u7ed9 Metad \u670d\u52a1\u7684 RPC \u8bf7\u6c42\u5931\u8d25\u7684\u6570\u91cf\u3002 num_rpc_sent_to_metad Storaged \u670d\u52a1\u53d1\u7ed9 Metad \u670d\u52a1\u7684 RPC \u8bf7\u6c42\u6570\u91cf\u3002 num_tags_deleted \u5220\u9664\u7684 Tag \u6570\u91cf\u3002 num_vertices_deleted \u5220\u9664\u7684\u70b9\u6570\u91cf\u3002 num_vertices_inserted \u63d2\u5165\u7684\u70b9\u6570\u91cf\u3002 transfer_leader_latency_us Raft \u534f\u8bae\u4e2d\u8f6c\u79fb Leader \u7684\u5ef6\u8fdf\u65f6\u95f4\u3002 lookup_latency_us LookupProcessor \u6267\u884c\u7684\u5ef6\u8fdf\u65f6\u95f4\u3002 num_lookup_errors LookupProcessor \u6267\u884c\u65f6\u51fa\u9519\u7684\u6b21\u6570\u3002 num_scan_vertex ScanVertexProcessor \u6267\u884c\u7684\u6b21\u6570\u3002 num_scan_vertex_errors ScanVertexProcessor \u6267\u884c\u65f6\u51fa\u9519\u7684\u6b21\u6570\u3002 update_edge_latency_us UpdateEdgeProcessor \u6267\u884c\u7684\u5ef6\u8fdf\u65f6\u95f4\u3002 num_update_vertex UpdateVertexProcessor \u6267\u884c\u7684\u6b21\u6570\u3002 num_update_vertex_errors UpdateVertexProcessor \u6267\u884c\u65f6\u51fa\u9519\u7684\u6b21\u6570\u3002 kv_get_latency_us Getprocessor \u7684\u5ef6\u8fdf\u65f6\u95f4\u3002 kv_put_latency_us PutProcessor \u7684\u5ef6\u8fdf\u65f6\u95f4\u3002 kv_remove_latency_us RemoveProcessor \u7684\u5ef6\u8fdf\u65f6\u95f4\u3002 num_kv_get_errors GetProcessor \u6267\u884c\u51fa\u9519\u6b21\u6570\u3002 num_kv_get GetProcessor \u6267\u884c\u6b21\u6570\u3002 num_kv_put_errors PutProcessor \u6267\u884c\u51fa\u9519\u6b21\u6570\u3002 num_kv_put PutProcessor \u6267\u884c\u6b21\u6570\u3002 num_kv_remove_errors RemoveProcessor \u6267\u884c\u51fa\u9519\u6b21\u6570\u3002 num_kv_remove RemoveProcessor \u6267\u884c\u6b21\u6570\u3002 forward_tranx_latency_us \u4f20\u8f93\u5ef6\u8fdf\u65f6\u95f4\u3002 scan_edge_latency_us ScanEdgeProcessor \u6267\u884c\u7684\u5ef6\u8fdf\u65f6\u95f4\u3002 num_scan_edge_errors ScanEdgeProcessor \u6267\u884c\u65f6\u51fa\u9519\u7684\u6b21\u6570\u3002 num_scan_edge ScanEdgeProcessor \u6267\u884c\u7684\u6b21\u6570\u3002 scan_vertex_latency_us ScanVertexProcessor \u6267\u884c\u7684\u5ef6\u8fdf\u65f6\u95f4\u3002 num_add_edges \u6dfb\u52a0\u8fb9\u7684\u6b21\u6570\u3002 num_add_edges_errors \u6dfb\u52a0\u8fb9\u65f6\u51fa\u9519\u7684\u6b21\u6570\u3002 num_add_vertices \u6dfb\u52a0\u70b9\u7684\u6b21\u6570\u3002 num_start_elect Raft \u53d1\u8d77\u6295\u7968\u7684\u6b21\u6570 num_add_vertices_errors \u6dfb\u52a0\u70b9\u65f6\u51fa\u9519\u7684\u6b21\u6570\u3002 num_delete_vertices_errors \u5220\u9664\u70b9\u65f6\u51fa\u9519\u7684\u6b21\u6570\u3002 append_log_latency_us Raft \u590d\u5236\u65e5\u5fd7\u5230\u5355\u4e2a\u8282\u70b9\u7684\u5ef6\u8fdf\u3002 num_grant_votes Raft \u6295\u7968\u7ed9\u5176\u4ed6\u8282\u70b9\u7684\u6b21\u6570\u3002 replicate_log_latency_us Raft \u590d\u5236\u65e5\u5fd7\u5230\u5927\u591a\u6570\u8282\u70b9\u7684\u5ef6\u8fdf\u3002 num_delete_tags \u5220\u9664 Tag \u7684\u6b21\u6570\u3002 num_delete_tags_errors \u5220\u9664 Tag \u65f6\u51fa\u9519\u7684\u6b21\u6570\u3002 num_delete_edges \u5220\u9664\u8fb9\u7684\u6b21\u6570\u3002 num_delete_edges_errors \u5220\u9664\u8fb9\u65f6\u51fa\u9519\u7684\u6b21\u6570\u3002 num_send_snapshot \u53d1\u9001\u5feb\u7167\u7684\u6b21\u6570\u3002 update_vertex_latency_us UpdateVertexProcessor \u6267\u884c\u7684\u5ef6\u8fdf\u65f6\u95f4\u3002 append_wal_latency_us Raft \u5199\u5165\u5355\u6761 WAL \u7684\u5ef6\u8fdf\u3002 num_update_edge UpdateEdgeProcessor \u6267\u884c\u7684\u6b21\u6570\u3002 delete_tags_latency_us \u5220\u9664 Tag \u7684\u5ef6\u8fdf\u65f6\u95f4\u3002 num_update_edge_errors UpdateEdgeProcessor \u6267\u884c\u65f6\u51fa\u9519\u7684\u6b21\u6570\u3002 num_get_neighbors GetNeighborsProcessor \u6267\u884c\u7684\u6b21\u6570\u3002 num_get_dst_by_src GetDstBySrcProcessor \u6267\u884c\u7684\u6b21\u6570\u3002 num_get_prop_errors GetPropProcessor \u6267\u884c\u65f6\u51fa\u9519\u7684\u6b21\u6570\u3002 num_delete_vertices \u5220\u9664\u70b9\u7684\u6b21\u6570\u3002 num_lookup LookupProcessor \u6267\u884c\u7684\u6b21\u6570\u3002 num_sync_data Storage \u540c\u6b65 Drainer \u6570\u636e\u7684\u6b21\u6570\u3002 num_sync_data_errors Storage \u540c\u6b65 Drainer \u6570\u636e\u51fa\u9519\u7684\u6b21\u6570\u3002 sync_data_latency_us Storage \u540c\u6b65 Drainer \u6570\u636e\u7684\u5ef6\u8fdf\u65f6\u95f4\u3002","title":"Storage"},{"location":"reuse/source-monitoring-metrics/#_1","text":"Note \u56fe\u7a7a\u95f4\u7ea7\u522b\u76d1\u63a7\u6307\u6807\u662f\u52a8\u6001\u521b\u5efa\u7684, \u53ea\u6709\u5f53\u56fe\u7a7a\u95f4\u5185\u89e6\u53d1\u8be5\u884c\u4e3a\u65f6\uff0c\u5bf9\u5e94\u7684\u6307\u6807\u624d\u4f1a\u521b\u5efa\uff0c\u7528\u6237\u624d\u80fd\u67e5\u8be2\u5230\u3002 \u53c2\u6570 \u8bf4\u660e num_active_queries \u5f53\u524d\u6b63\u5728\u6267\u884c\u7684\u67e5\u8be2\u6570\u3002 num_queries \u67e5\u8be2\u6b21\u6570\u3002 num_sentences Graphd \u670d\u52a1\u63a5\u6536\u7684\u8bed\u53e5\u6570\u3002 optimizer_latency_us \u4f18\u5316\u5668\u9636\u6bb5\u5ef6\u8fdf\u65f6\u95f4\u3002 query_latency_us \u67e5\u8be2\u5ef6\u8fdf\u65f6\u95f4\u3002 num_slow_queries \u6162\u67e5\u8be2\u6b21\u6570\u3002 num_query_errors \u67e5\u8be2\u62a5\u9519\u8bed\u53e5\u6570\u91cf\u3002 num_query_errors_leader_changes \u56e0\u67e5\u8be2\u9519\u8bef\u800c\u5bfc\u81f4\u7684 Leader \u53d8\u66f4\u7684\u6b21\u6570\u3002 num_killed_queries \u88ab\u7ec8\u6b62\u7684\u67e5\u8be2\u6570\u91cf\u3002 num_aggregate_executors \u805a\u5408\uff08Aggregate\uff09\u7b97\u5b50\u6267\u884c\u65f6\u95f4\u3002 num_sort_executors \u6392\u5e8f\uff08Sort\uff09\u7b97\u5b50\u6267\u884c\u65f6\u95f4\u3002 num_indexscan_executors \u7d22\u5f15\u626b\u63cf\uff08IndexScan\uff09\u7b97\u5b50\u6267\u884c\u65f6\u95f4\u3002 num_auth_failed_sessions_bad_username_password \u56e0\u7528\u6237\u540d\u5bc6\u7801\u9519\u8bef\u5bfc\u9a8c\u8bc1\u5931\u8d25\u7684\u4f1a\u8bdd\u6570\u91cf\u3002 num_auth_failed_sessions \u767b\u5f55\u9a8c\u8bc1\u5931\u8d25\u7684\u4f1a\u8bdd\u6570\u91cf\u3002 num_opened_sessions \u670d\u52a1\u7aef\u5efa\u7acb\u8fc7\u7684\u4f1a\u8bdd\u6570\u91cf\u3002 num_queries_hit_memory_watermark \u8fbe\u5230\u5185\u5b58\u6c34\u4f4d\u7ebf\u7684\u8bed\u53e5\u7684\u6570\u91cf\u3002 num_reclaimed_expired_sessions \u670d\u52a1\u7aef\u4e3b\u52a8\u56de\u6536\u7684\u8fc7\u671f\u7684\u4f1a\u8bdd\u6570\u91cf\u3002 num_rpc_sent_to_metad_failed Graphd \u670d\u52a1\u53d1\u7ed9 Metad \u7684 RPC \u8bf7\u6c42\u5931\u8d25\u7684\u6570\u91cf\u3002 num_rpc_sent_to_metad Graphd \u670d\u52a1\u53d1\u7ed9 Metad \u670d\u52a1\u7684 RPC \u8bf7\u6c42\u6570\u91cf\u3002 num_rpc_sent_to_storaged_failed Graphd \u670d\u52a1\u53d1\u7ed9 Storaged \u670d\u52a1\u7684 RPC \u8bf7\u6c42\u5931\u8d25\u7684\u6570\u91cf\u3002 num_rpc_sent_to_storaged Graphd \u670d\u52a1\u53d1\u7ed9 Storaged \u670d\u52a1\u7684 RPC \u8bf7\u6c42\u6570\u91cf\u3002 slow_query_latency_us \u6162\u67e5\u8be2\u5ef6\u8fdf\u65f6\u95f4\u3002","title":"\u56fe\u7a7a\u95f4\u7ea7\u522b\u76d1\u63a7\u6307\u6807"},{"location":"reuse/source_connect-to-nebula-graph/","text":"\u672c\u6587\u4ecb\u7ecd\u5982\u4f55\u4f7f\u7528\u539f\u751f\u547d\u4ee4\u884c\u5ba2\u6237\u7aef NebulaGraph Console \u8fde\u63a5NebulaGraph\u3002 Caution \u9996\u6b21\u8fde\u63a5\u5230NebulaGraph\u540e\uff0c\u5fc5\u987b\u5148 \u6ce8\u518c Storage \u670d\u52a1 \uff0c\u624d\u80fd\u6b63\u5e38\u67e5\u8be2\u6570\u636e\u3002 NebulaGraph\u652f\u6301\u591a\u79cd\u7c7b\u578b\u7684\u5ba2\u6237\u7aef\uff0c\u5305\u62ec\u547d\u4ee4\u884c\u5ba2\u6237\u7aef\u3001\u53ef\u89c6\u5316\u754c\u9762\u5ba2\u6237\u7aef\u548c\u6d41\u884c\u7f16\u7a0b\u8bed\u8a00\u5ba2\u6237\u7aef\u3002\u8be6\u60c5\u53c2\u89c1 \u5ba2\u6237\u7aef\u5217\u8868 \u3002 \u524d\u63d0\u6761\u4ef6 \u00b6 NebulaGraph\u670d\u52a1\u5df2 \u542f\u52a8 \u3002 \u8fd0\u884c NebulaGraph Console \u7684\u673a\u5668\u548c\u8fd0\u884cNebulaGraph\u7684\u670d\u52a1\u5668\u7f51\u7edc\u4e92\u901a\u3002 NebulaGraph Console \u7684\u7248\u672c\u517c\u5bb9NebulaGraph\u7684\u7248\u672c\u3002 Note \u7248\u672c\u76f8\u540c\u7684 NebulaGraph Console \u548cNebulaGraph\u517c\u5bb9\u7a0b\u5ea6\u6700\u9ad8\uff0c\u7248\u672c\u4e0d\u540c\u7684 NebulaGraph Console \u8fde\u63a5NebulaGraph\u65f6\uff0c\u53ef\u80fd\u4f1a\u6709\u517c\u5bb9\u95ee\u9898\uff0c\u6216\u8005\u65e0\u6cd5\u8fde\u63a5\u5e76\u62a5\u9519 incompatible version between client and server \u3002 \u64cd\u4f5c\u6b65\u9aa4 \u00b6 \u5728 NebulaGraph Console \u4e0b\u8f7d\u9875\u9762 \uff0c\u786e\u8ba4\u9700\u8981\u7684\u7248\u672c\uff0c\u5355\u51fb Assets \u3002 Note \u5efa\u8bae\u9009\u62e9 \u6700\u65b0 \u7248\u672c\u3002 \u5728 Assets \u533a\u57df\u627e\u5230\u673a\u5668\u8fd0\u884c\u6240\u9700\u7684\u4e8c\u8fdb\u5236\u6587\u4ef6\uff0c\u4e0b\u8f7d\u6587\u4ef6\u5230\u673a\u5668\u4e0a\u3002 \uff08\u53ef\u9009\uff09\u4e3a\u65b9\u4fbf\u4f7f\u7528\uff0c\u91cd\u547d\u540d\u6587\u4ef6\u4e3a nebula-console \u3002 Note \u5728 Windows \u7cfb\u7edf\u4e2d\uff0c\u8bf7\u91cd\u547d\u540d\u4e3a nebula-console.exe \u3002 \u5728\u8fd0\u884c NebulaGraph Console \u7684\u673a\u5668\u4e0a\u6267\u884c\u5982\u4e0b\u547d\u4ee4\uff0c\u4e3a\u7528\u6237\u6388\u4e88 nebula-console \u6587\u4ef6\u7684\u6267\u884c\u6743\u9650\u3002 Note Windows \u7cfb\u7edf\u8bf7\u8df3\u8fc7\u6b64\u6b65\u9aa4\u3002 $ chmod 111 nebula-console \u5728\u547d\u4ee4\u884c\u754c\u9762\u4e2d\uff0c\u5207\u6362\u5de5\u4f5c\u76ee\u5f55\u81f3 nebula-console \u6587\u4ef6\u6240\u5728\u76ee\u5f55\u3002 \u6267\u884c\u5982\u4e0b\u547d\u4ee4\u8fde\u63a5NebulaGraph\u3002 Linux \u6216 macOS $ ./nebula-console -addr <ip> -port <port> -u <username> -p <password> [ -t 120 ] [ -e \"nGQL_statement\" | -f filename.nGQL ] Windows > nebula-console . exe -addr < ip > -port < port > -u < username > -p < password > [ -t 120 ] [ -e \"nGQL_statement\" | -f filename . nGQL ] \u53c2\u6570\u8bf4\u660e\u5982\u4e0b\u3002 \u53c2\u6570 \u8bf4\u660e -h/-help \u663e\u793a\u5e2e\u52a9\u83dc\u5355\u3002 -addr/-address \u8bbe\u7f6e\u8981\u8fde\u63a5\u7684 Graph \u670d\u52a1\u7684 IP \u5730\u5740\u3002\u9ed8\u8ba4\u5730\u5740\u4e3a 127.0.0.1\u3002 -P/-port \u8bbe\u7f6e\u8981\u8fde\u63a5\u7684 Graph \u670d\u52a1\u7684\u7aef\u53e3\u3002\u9ed8\u8ba4\u7aef\u53e3\u4e3a 9669\u3002 -u/-user \u8bbe\u7f6eNebulaGraph\u8d26\u53f7\u7684\u7528\u6237\u540d\u3002\u672a\u542f\u7528\u8eab\u4efd\u8ba4\u8bc1\u65f6\uff0c\u53ef\u4ee5\u4f7f\u7528\u4efb\u610f\u5df2\u5b58\u5728\u7684\u7528\u6237\u540d\uff08\u9ed8\u8ba4\u4e3a root \uff09\u3002 -p/-password \u8bbe\u7f6e\u7528\u6237\u540d\u5bf9\u5e94\u7684\u5bc6\u7801\u3002\u672a\u542f\u7528\u8eab\u4efd\u8ba4\u8bc1\u65f6\uff0c\u5bc6\u7801\u53ef\u4ee5\u586b\u5199\u4efb\u610f\u5b57\u7b26\u3002 -t/-timeout \u8bbe\u7f6e\u6574\u6570\u7c7b\u578b\u7684\u8fde\u63a5\u8d85\u65f6\u65f6\u95f4\u3002\u5355\u4f4d\u4e3a\u6beb\u79d2\uff0c\u9ed8\u8ba4\u503c\u4e3a 120\u3002 -e/-eval \u8bbe\u7f6e\u5b57\u7b26\u4e32\u7c7b\u578b\u7684 nGQL \u8bed\u53e5\u3002\u8fde\u63a5\u6210\u529f\u540e\u4f1a\u6267\u884c\u4e00\u6b21\u8be5\u8bed\u53e5\u5e76\u8fd4\u56de\u7ed3\u679c\uff0c\u7136\u540e\u81ea\u52a8\u65ad\u5f00\u8fde\u63a5\u3002 -f/-file \u8bbe\u7f6e\u5b58\u50a8 nGQL \u8bed\u53e5\u7684\u6587\u4ef6\u7684\u8def\u5f84\u3002\u8fde\u63a5\u6210\u529f\u540e\u4f1a\u6267\u884c\u8be5\u6587\u4ef6\u5185\u7684 nGQL \u8bed\u53e5\u5e76\u8fd4\u56de\u7ed3\u679c\uff0c\u6267\u884c\u5b8c\u6bd5\u540e\u81ea\u52a8\u65ad\u5f00\u8fde\u63a5\u3002 -enable_ssl \u8fde\u63a5NebulaGraph\u65f6\u4f7f\u7528 SSL \u52a0\u5bc6\u3002 -ssl_root_ca_path \u6307\u5b9a CA \u8bc1\u4e66\u7684\u5b58\u50a8\u8def\u5f84\u3002 -ssl_cert_path \u6307\u5b9a CRT \u8bc1\u4e66\u7684\u5b58\u50a8\u8def\u5f84\u3002 -ssl_private_key_path \u6307\u5b9a\u79c1\u94a5\u6587\u4ef6\u7684\u5b58\u50a8\u8def\u5f84\u3002 \u66f4\u591a\u53c2\u6570\u53c2\u89c1 \u9879\u76ee\u4ed3\u5e93 \u3002","title":"Source connect to nebula graph"},{"location":"reuse/source_connect-to-nebula-graph/#_1","text":"NebulaGraph\u670d\u52a1\u5df2 \u542f\u52a8 \u3002 \u8fd0\u884c NebulaGraph Console \u7684\u673a\u5668\u548c\u8fd0\u884cNebulaGraph\u7684\u670d\u52a1\u5668\u7f51\u7edc\u4e92\u901a\u3002 NebulaGraph Console \u7684\u7248\u672c\u517c\u5bb9NebulaGraph\u7684\u7248\u672c\u3002 Note \u7248\u672c\u76f8\u540c\u7684 NebulaGraph Console \u548cNebulaGraph\u517c\u5bb9\u7a0b\u5ea6\u6700\u9ad8\uff0c\u7248\u672c\u4e0d\u540c\u7684 NebulaGraph Console \u8fde\u63a5NebulaGraph\u65f6\uff0c\u53ef\u80fd\u4f1a\u6709\u517c\u5bb9\u95ee\u9898\uff0c\u6216\u8005\u65e0\u6cd5\u8fde\u63a5\u5e76\u62a5\u9519 incompatible version between client and server \u3002","title":"\u524d\u63d0\u6761\u4ef6"},{"location":"reuse/source_connect-to-nebula-graph/#_2","text":"\u5728 NebulaGraph Console \u4e0b\u8f7d\u9875\u9762 \uff0c\u786e\u8ba4\u9700\u8981\u7684\u7248\u672c\uff0c\u5355\u51fb Assets \u3002 Note \u5efa\u8bae\u9009\u62e9 \u6700\u65b0 \u7248\u672c\u3002 \u5728 Assets \u533a\u57df\u627e\u5230\u673a\u5668\u8fd0\u884c\u6240\u9700\u7684\u4e8c\u8fdb\u5236\u6587\u4ef6\uff0c\u4e0b\u8f7d\u6587\u4ef6\u5230\u673a\u5668\u4e0a\u3002 \uff08\u53ef\u9009\uff09\u4e3a\u65b9\u4fbf\u4f7f\u7528\uff0c\u91cd\u547d\u540d\u6587\u4ef6\u4e3a nebula-console \u3002 Note \u5728 Windows \u7cfb\u7edf\u4e2d\uff0c\u8bf7\u91cd\u547d\u540d\u4e3a nebula-console.exe \u3002 \u5728\u8fd0\u884c NebulaGraph Console \u7684\u673a\u5668\u4e0a\u6267\u884c\u5982\u4e0b\u547d\u4ee4\uff0c\u4e3a\u7528\u6237\u6388\u4e88 nebula-console \u6587\u4ef6\u7684\u6267\u884c\u6743\u9650\u3002 Note Windows \u7cfb\u7edf\u8bf7\u8df3\u8fc7\u6b64\u6b65\u9aa4\u3002 $ chmod 111 nebula-console \u5728\u547d\u4ee4\u884c\u754c\u9762\u4e2d\uff0c\u5207\u6362\u5de5\u4f5c\u76ee\u5f55\u81f3 nebula-console \u6587\u4ef6\u6240\u5728\u76ee\u5f55\u3002 \u6267\u884c\u5982\u4e0b\u547d\u4ee4\u8fde\u63a5NebulaGraph\u3002 Linux \u6216 macOS $ ./nebula-console -addr <ip> -port <port> -u <username> -p <password> [ -t 120 ] [ -e \"nGQL_statement\" | -f filename.nGQL ] Windows > nebula-console . exe -addr < ip > -port < port > -u < username > -p < password > [ -t 120 ] [ -e \"nGQL_statement\" | -f filename . nGQL ] \u53c2\u6570\u8bf4\u660e\u5982\u4e0b\u3002 \u53c2\u6570 \u8bf4\u660e -h/-help \u663e\u793a\u5e2e\u52a9\u83dc\u5355\u3002 -addr/-address \u8bbe\u7f6e\u8981\u8fde\u63a5\u7684 Graph \u670d\u52a1\u7684 IP \u5730\u5740\u3002\u9ed8\u8ba4\u5730\u5740\u4e3a 127.0.0.1\u3002 -P/-port \u8bbe\u7f6e\u8981\u8fde\u63a5\u7684 Graph \u670d\u52a1\u7684\u7aef\u53e3\u3002\u9ed8\u8ba4\u7aef\u53e3\u4e3a 9669\u3002 -u/-user \u8bbe\u7f6eNebulaGraph\u8d26\u53f7\u7684\u7528\u6237\u540d\u3002\u672a\u542f\u7528\u8eab\u4efd\u8ba4\u8bc1\u65f6\uff0c\u53ef\u4ee5\u4f7f\u7528\u4efb\u610f\u5df2\u5b58\u5728\u7684\u7528\u6237\u540d\uff08\u9ed8\u8ba4\u4e3a root \uff09\u3002 -p/-password \u8bbe\u7f6e\u7528\u6237\u540d\u5bf9\u5e94\u7684\u5bc6\u7801\u3002\u672a\u542f\u7528\u8eab\u4efd\u8ba4\u8bc1\u65f6\uff0c\u5bc6\u7801\u53ef\u4ee5\u586b\u5199\u4efb\u610f\u5b57\u7b26\u3002 -t/-timeout \u8bbe\u7f6e\u6574\u6570\u7c7b\u578b\u7684\u8fde\u63a5\u8d85\u65f6\u65f6\u95f4\u3002\u5355\u4f4d\u4e3a\u6beb\u79d2\uff0c\u9ed8\u8ba4\u503c\u4e3a 120\u3002 -e/-eval \u8bbe\u7f6e\u5b57\u7b26\u4e32\u7c7b\u578b\u7684 nGQL \u8bed\u53e5\u3002\u8fde\u63a5\u6210\u529f\u540e\u4f1a\u6267\u884c\u4e00\u6b21\u8be5\u8bed\u53e5\u5e76\u8fd4\u56de\u7ed3\u679c\uff0c\u7136\u540e\u81ea\u52a8\u65ad\u5f00\u8fde\u63a5\u3002 -f/-file \u8bbe\u7f6e\u5b58\u50a8 nGQL \u8bed\u53e5\u7684\u6587\u4ef6\u7684\u8def\u5f84\u3002\u8fde\u63a5\u6210\u529f\u540e\u4f1a\u6267\u884c\u8be5\u6587\u4ef6\u5185\u7684 nGQL \u8bed\u53e5\u5e76\u8fd4\u56de\u7ed3\u679c\uff0c\u6267\u884c\u5b8c\u6bd5\u540e\u81ea\u52a8\u65ad\u5f00\u8fde\u63a5\u3002 -enable_ssl \u8fde\u63a5NebulaGraph\u65f6\u4f7f\u7528 SSL \u52a0\u5bc6\u3002 -ssl_root_ca_path \u6307\u5b9a CA \u8bc1\u4e66\u7684\u5b58\u50a8\u8def\u5f84\u3002 -ssl_cert_path \u6307\u5b9a CRT \u8bc1\u4e66\u7684\u5b58\u50a8\u8def\u5f84\u3002 -ssl_private_key_path \u6307\u5b9a\u79c1\u94a5\u6587\u4ef6\u7684\u5b58\u50a8\u8def\u5f84\u3002 \u66f4\u591a\u53c2\u6570\u53c2\u89c1 \u9879\u76ee\u4ed3\u5e93 \u3002","title":"\u64cd\u4f5c\u6b65\u9aa4"},{"location":"reuse/source_create_instance_aliyun/","text":"\u8d26\u53f7\u4e0e\u6743\u9650 \u00b6 \u51c6\u5907 \u963f\u91cc\u4e91\u8d26\u53f7 \u3002 \u5982\u679c\u4f7f\u7528 RAM \u7528\u6237\u521b\u5efa\u5b9e\u4f8b\uff0c\u9700\u4e3a\u5176\u6dfb\u52a0\u4ee5\u4e0b\u6743\u9650\uff1a AliyunECSFullAccess AliyunVPCFullAccess AliyunROSFullAccess AliyunCloudMonitorFullAccess AliyunComputeNestUserFullAccess \u8d44\u6e90\u4e0e\u8d39\u7528 \u00b6 NebulaGraph Cloud \u963f\u91cc\u4e91\u7248\u652f\u6301\u514d\u8d39\u8bd5\u7528\u548c\u4ed8\u8d39\u4f7f\u7528\uff0c\u4e8c\u8005\u7684\u8be6\u7ec6\u8bf4\u660e\u5982\u4e0b\u8868\u3002 \u9879\u76ee \u514d\u8d39\u8bd5\u7528\u7248 \u4ed8\u8d39\u7248 \u4e91\u8d44\u6e90\u5f52\u5c5e \u963f\u91cc\u4e91\u5b98\u65b9\u8d26\u53f7 \u7528\u6237\u8d26\u53f7 \u4e91\u8d44\u6e90\u8d39\u7528 \u963f\u91cc\u4e91\u627f\u62c5 \u7528\u6237\u627f\u62c5 \u4e91\u8d44\u6e90\u4f7f\u7528\u65f6\u957f 30 \u5929\uff08\u4e0d\u53ef\u7eed\u671f\uff09 \u7528\u6237\u521b\u5efa\u5b9e\u4f8b\u65f6\u9009\u62e9 NebulaGraph\u8bb8\u53ef\u8bc1\u8d39\u7528 \u8bd5\u7528\u671f\u5185\u514d\u8d39 \u7528\u6237\u627f\u62c5 NebulaGraph\u670d\u52a1\u8bb8\u53ef\u8bc1\u6709\u6548\u671f 30 \u5929 \u7528\u6237\u521b\u5efa\u5b9e\u4f8b\u65f6\u9009\u62e9 \u8bb8\u53ef\u8bc1\u8fc7\u671f\u540e\u6570\u636e\u662f\u5426\u4fdd\u7559 \u5426\uff08\u56e0\u4e91\u8d44\u6e90\u4f1a\u540c\u65f6\u5230\u671f\uff09 \u662f \u4e91\u8d44\u6e90\u5230\u671f\u540e\u6570\u636e\u662f\u5426\u4fdd\u7559 \u5426 \u5426 \u6570\u636e\u76d8\u5feb\u7167\u8d39\u7528 \u963f\u91cc\u4e91\u627f\u62c5 \u7528\u6237\u627f\u62c5\uff08\u53ef\u5173\u95ed\u529f\u80fd\uff09 \u6570\u636e\u5907\u4efd \u00b6 \u5728\u521b\u5efa\u670d\u52a1\u5b9e\u4f8b\u65f6\uff0c\u7cfb\u7edf\u4f1a\u9ed8\u8ba4\u5f00\u542f\u6570\u636e\u76d8\u81ea\u52a8\u5feb\u7167\u5907\u4efd\uff0c\u7528\u4e8e\u5468\u671f\u6027\u5907\u4efdNebulaGraph\u6570\u636e\u3002 \u521b\u5efa\u4ed8\u8d39\u7248\u670d\u52a1\u5b9e\u4f8b\u524d\u9700 \u5f00\u901a\u5feb\u7167 \u3002\u514d\u8d39\u8bd5\u7528\u5b9e\u4f8b\u4f7f\u7528\u7684\u662f\u963f\u91cc\u4e91\u5b98\u65b9\u8d26\u53f7\u4e0b\u7684\u8d44\u6e90\uff0c\u5df2\u5f00\u901a\u5feb\u7167\uff0c\u65e0\u9700\u7528\u6237\u624b\u52a8\u5f00\u901a\u3002 \u9ed8\u8ba4\u7684\u5feb\u7167\u5907\u4efd\u7b56\u7565\u4e3a\u6bcf\u5929 00:00 \u521b\u5efa\u5feb\u7167\u3002 \u521b\u5efa\u5feb\u7167\u4f1a\u4ea7\u751f\u8d39\u7528\uff0c\u8be6\u60c5\u53c2\u89c1 \u5feb\u7167\u8ba1\u8d39 \u3002 \u5982\u9700\u5220\u9664\u5feb\u7167\u3001\u4fee\u6539\u6216\u5220\u9664\u81ea\u52a8\u5feb\u7167\u7b56\u7565\uff0c\u53c2\u89c1 \u5feb\u7167\u6587\u6863 \u3002 \u5957\u9910\u7248\u672c \u00b6 NebulaGraph Cloud \u963f\u91cc\u4e91\u7248\u652f\u6301\u5982\u4e0b\u5957\u9910\u7248\u672c\u3002 \u5957\u9910\u7248\u672c \u8bf4\u660e \u57fa\u7840\u7248 \u5c06\u6240\u6709NebulaGraph\u670d\u52a1\u8282\u70b9\u90e8\u7f72\u5728 1 \u53f0 ECS \u670d\u52a1\u5668\u4e0a\u3002 \u6807\u51c6\u7248 \u5c06 Graph \u670d\u52a1\u548c Storage \u670d\u52a1\u5206\u522b\u90e8\u7f72\u5728\u4e0d\u540c\u7684 ECS \u670d\u52a1\u5668\u4e0a\uff0c\u6bcf\u4e2a\u670d\u52a1\u90fd\u662f\u5355\u8282\u70b9\uff081 \u53f0 ECS\uff09\u3002\u5c06\u751f\u6001\u5de5\u5177\u6df7\u5408\u90e8\u7f72\u5728 1 \u53f0 ECS \u670d\u52a1\u5668\u4e0a\u3002 \u9ad8\u53ef\u7528\u7248 \u5c06 Graph \u670d\u52a1\u548c Storage \u670d\u52a1\u5206\u522b\u90e8\u7f72\u5728\u4e0d\u540c\u7684 ECS \u670d\u52a1\u5668\u4e0a\uff0c\u6bcf\u4e2a\u670d\u52a1\u90fd\u5305\u542b 3 \u8282\u70b9\uff083 \u53f0 ECS\uff09\u3002\u5c06\u751f\u6001\u5de5\u5177\u6df7\u5408\u90e8\u7f72\u5728 1 \u53f0 ECS \u670d\u52a1\u5668\u4e0a\u3002 \u4ed8\u8d39\u7248\u548c\u514d\u8d39\u8bd5\u7528\u7248\u670d\u52a1\u5b9e\u4f8b\u652f\u6301\u7684\u5957\u9910\u7248\u672c\u6709\u6240\u4e0d\u540c\uff0c\u8be6\u60c5\u53c2\u89c1\u521b\u5efa\u5b9e\u4f8b\u9875\u9762\u3002 \u521b\u5efa\u4ed8\u8d39\u7248\u670d\u52a1\u5b9e\u4f8b \u00b6 \u767b\u5f55 \u963f\u91cc\u4e91\u63a7\u5236\u53f0 \u3002 \u6253\u5f00\u4e91\u5e02\u573a\u7684 NebulaGraph\u4ea7\u54c1\u9875 \u3002 \u9009\u62e9 \u5957\u9910\u7248\u672c \u548c \u8d2d\u4e70\u65f6\u957f \uff08\u5373NebulaGraph\u670d\u52a1\u7684\u8bb8\u53ef\u8bc1\u6709\u6548\u671f\uff09\uff0c\u5e76\u5355\u51fb \u7acb\u5373\u8d2d\u4e70 \u3002 Caution \u5f53\u524d\u4e91\u5e02\u573a\u663e\u793a\u7684\u90e8\u5206\u4ef7\u683c\u5e76\u975e\u5b9e\u9645\u552e\u4ef7\uff0c\u8d2d\u4e70\u65f6\u9700\u901a\u8fc7\u53f3\u4fa7\u7684\u9489\u9489\u5ba2\u670d\u786e\u8ba4\u5b9e\u9645\u4ef7\u683c\u3002 \u5728 \u521b\u5efa\u670d\u52a1\u5b9e\u4f8b \u9875\uff0c\u4fdd\u6301 \u9009\u62e9\u6a21\u677f \u5904\u7684\u9009\u62e9\u4e0d\u53d8\u3002\u5982\u9700\u5207\u6362\u90e8\u7f72\u67b6\u6784\uff0c\u53ef\u6539\u53d8\u9009\u4e2d\u7684\u9009\u9879\uff0c\u91cd\u65b0\u9009\u62e9\u6a21\u677f\u3002 Note \u6539\u53d8\u6a21\u677f\u4f1a\u6539\u53d8\u4e4b\u524d\u9009\u62e9\u7684\u5957\u9910\u7248\u672c\uff0c\u8f6f\u4ef6\u8d39\u7528\uff08NebulaGraph\u8bb8\u53ef\u8bc1\u8d39\u7528\uff09\u548c\u521b\u5efa\u670d\u52a1\u5b9e\u4f8b\u9700\u8981\u7684\u8d44\u6e90\u4e5f\u4f1a\u6539\u53d8\u3002 \uff08\u53ef\u9009\uff09\u8bbe\u7f6e \u670d\u52a1\u5b9e\u4f8b\u540d\u79f0 \u3002\u9ed8\u8ba4\u503c\u4e3a\u670d\u52a1\u5b9e\u4f8b ID\u3002 \u9009\u62e9\u8981\u521b\u5efa\u670d\u52a1\u5b9e\u4f8b\u7684 \u5730\u57df \u3002 \u5728 \u4ed8\u8d39\u6a21\u5f0f\u8bbe\u7f6e \u533a\u57df\uff0c\u6307\u5b9a ECS \u670d\u52a1\u5668\u7684\u4ed8\u8d39\u65b9\u5f0f\u3002\u9ed8\u8ba4\u4e3a \u6309\u91cf\u4ed8\u8d39 \u3002 \u6309\u91cf\u4ed8\u8d39 \uff1a\u6309\u7167\u8ba1\u8d39\u5468\u671f\u8ba1\u8d39\uff0c\u5728\u6bcf\u4e2a\u7ed3\u7b97\u5468\u671f\u751f\u6210\u8d26\u5355\u5e76\u4ece\u8d26\u6237\u4e2d\u6263\u9664\u76f8\u5e94\u8d39\u7528\u3002\u8be6\u60c5\u53c2\u89c1 \u6309\u91cf\u4ed8\u8d39 \u3002 \u5305\u5e74\u5305\u6708 \uff1a\u5148\u4ed8\u8d39\u540e\u4f7f\u7528\u3002\u8be6\u60c5\u53c2\u89c1 \u5305\u5e74\u5305\u6708 \u3002\u9009\u62e9\u5305\u5e74\u5305\u6708\u6a21\u5f0f\u9700\u8981\u6307\u5b9a \u8d2d\u4e70\u65f6\u957f\u5468\u671f \u548c \u8d2d\u4e70\u65f6\u957f \u3002 \u8d2d\u4e70\u65f6\u957f\u5468\u671f \u5f53\u524d\u4ec5\u652f\u6301 Month \uff0c\u5373\u6309\u6708\u8d2d\u4e70\u3002 \u5728 NebulaGraph\u914d\u7f6e \u533a\u57df\uff0c\u5b8c\u6210\u6570\u636e\u76d8\u548c ECS \u670d\u52a1\u5668\u5bc6\u7801\u8bbe\u7f6e\u3002 \u5728 \u57fa\u7840\u8bbe\u65bd\u914d\u7f6e \u533a\u57df\uff0c\u5b8c\u6210\u4ee5\u4e0b\u8bbe\u7f6e\u3002 \u9009\u62e9 \u4e13\u6709\u7f51\u7edc VPC \u5b9e\u4f8b ID \u3002 \u5982\u679c\u4e0b\u62c9\u5217\u8868\u4e3a\u7a7a\uff0c\u5148\u5355\u51fb\u5176\u53f3\u4fa7\u7684 \u65b0\u5efa\u4e13\u6709\u7f51\u7edc \uff0c\u5b8c\u6210\u4e13\u6709\u7f51\u7edc\u521b\u5efa\u3002 \u9009\u62e9 \u4ea4\u6362\u673a\u53ef\u7528\u533a \u3002 \u9009\u62e9 \u4e1a\u52a1\u7f51\u7edc\u4ea4\u6362\u673a\u7684\u5b9e\u4f8b ID \u3002 \u5982\u679c\u4e0b\u62c9\u5217\u8868\u4e3a\u7a7a\uff0c\u5148\u5355\u51fb\u5176\u53f3\u4fa7\u7684 \u65b0\u5efa\u4ea4\u6362\u673a \uff0c\u5b8c\u6210\u4ea4\u6362\u673a\u521b\u5efa\u3002 \u5b8c\u6210 \u6743\u9650\u786e\u8ba4 \uff0c\u5e76\u9009\u4e2d \u6211\u540c\u610f\u6388\u6743\u670d\u52a1\u5546\uff08\u676d\u5dde\u60a6\u6570\u79d1\u6280\u6709\u9650\u516c\u53f8\uff09\u83b7\u53d6\u4e0a\u8ff0\u6743\u9650\u4ee5\u63d0\u4f9b\u4ee3\u8fd0\u7ef4\u670d\u52a1 \u3002 \u5728\u9875\u9762\u5e95\u90e8\uff0c\u5355\u51fb \u4e0b\u4e00\u6b65\uff1a\u786e\u8ba4\u8ba2\u5355 \u3002 \u5728 \u670d\u52a1\u6761\u6b3e \u533a\u57df\uff0c\u52fe\u9009 \u6211\u5df2\u9605\u8bfb\u5e76\u540c\u610f\u300a\u5546\u54c1\u5728\u7ebf\u534f\u8bae\u300b\u300a\u4e91\u5e02\u573a\u5e73\u53f0\u670d\u52a1\u534f\u8bae\u300b\u300a\u8ba1\u7b97\u5de2\u670d\u52a1\u534f\u8bae\u300b \u3002 \u5728\u9875\u9762\u5e95\u90e8\uff0c\u5355\u51fb \u7acb\u5373\u652f\u4ed8 \u3002 \u5728 \u652f\u4ed8 \u9875\u9762\uff0c\u9009\u62e9\u652f\u4ed8\u65b9\u5f0f\uff0c\u4e4b\u540e\u5355\u51fb\u9875\u9762\u5e95\u90e8\u7684 \u652f\u4ed8 \u3002 \u5728 \u652f\u4ed8\u5b8c\u6210 \u9875\u9762\uff0c\u5355\u51fb \u7ba1\u7406\u63a7\u5236\u53f0 \u3002 \u5728 \u5df2\u8d2d\u4e70\u7684\u670d\u52a1 \u9875\u9762\uff0c\u5355\u51fb\u8981\u521b\u5efa\u7684\u5b9e\u4f8b\u53f3\u4fa7\u7684 \u7acb\u5373\u8fdb\u5165\u8ba1\u7b97\u5de2\u90e8\u7f72\u6216\u67e5\u770b\u90e8\u7f72\u8be6\u60c5 \u3002 Note \u5982\u679c\u5df2\u8d2d\u4e70\u7684\u670d\u52a1\u5217\u8868\u4e2d\u672a\u663e\u793a\u8981\u521b\u5efa\u7684\u5b9e\u4f8b\uff0c\u5237\u65b0\u9875\u9762\u3002 \u5728 \u670d\u52a1\u5b9e\u4f8b\u8be6\u60c5 \u9875\u67e5\u770b\u5b9e\u4f8b\u7684 \u72b6\u6001 \uff0c\u786e\u4fdd\u72b6\u6001\u4e3a \u90e8\u7f72\u4e2d \u3002 \u90e8\u7f72\u7684\u5e73\u5747\u8017\u65f6\u4e3a 10 \u5206\u949f\u3002\u5b8c\u6210\u540e\u5b9e\u4f8b\u7684\u72b6\u6001\u53d8\u4e3a \u5df2\u90e8\u7f72 \u3002 \u521b\u5efa\u514d\u8d39\u7248\u8bd5\u7528\u7248\u670d\u52a1\u5b9e\u4f8b \u00b6 Danger \u514d\u8d39\u8bd5\u7528\u5b9e\u4f8b\u4e0d\u53ef\u5728\u751f\u4ea7\u73af\u5883\u4e2d\u4f7f\u7528\u3002 \u767b\u5f55\u963f\u91cc\u4e91\u8ba1\u7b97\u5de2 \u63a8\u8350\u670d\u52a1 \u9875\u9762\uff0c\u641c\u7d22 NebulaGraph \u3002 \u5728 NebulaGraph\u96c6\u7fa4\u7248 \u5361\u7247\u4e0a\uff0c\u5355\u51fb \u514d\u8d39\u8bd5\u7528 \u3002 \u7cfb\u7edf\u4f1a\u4e3a\u9996\u6b21\u521b\u5efaNebulaGraph\u670d\u52a1\u5b9e\u4f8b\u7684\u7528\u6237\u5f39\u51fa\u7533\u8bf7\u5bf9\u8bdd\u6846\u3002\u5728 \u7533\u8bf7\u6743\u9650 \u5bf9\u8bdd\u6846\u4e2d\u586b\u5199\u7533\u8bf7\u4eba\u4fe1\u606f\u3002\u5e26\u6709\u7ea2\u8272\u661f\u53f7\uff08*\uff09\u7684\u4e3a\u5fc5\u586b\u9879\u3002 Note \u7533\u8bf7\u901a\u8fc7\u540e\u9700\u4ece\u7b2c 1 \u6b65\u91cd\u65b0\u5f00\u59cb\u3002 \uff08\u53ef\u9009\uff09\u8bbe\u7f6e \u670d\u52a1\u5b9e\u4f8b\u540d\u79f0 \u3002\u9ed8\u8ba4\u503c\u4e3a\u670d\u52a1\u5b9e\u4f8b ID\u3002 \u9009\u62e9\u8981\u521b\u5efa\u5b9e\u4f8b\u7684 \u5730\u57df \u3002 \u5728 NebulaGraph\u914d\u7f6e \u533a\u57df\uff0c\u5b8c\u6210\u6570\u636e\u76d8\u548c ECS \u670d\u52a1\u5668\u5bc6\u7801\u8bbe\u7f6e\u3002 \u5728 \u57fa\u7840\u8bbe\u65bd\u914d\u7f6e \u533a\u57df\uff0c\u9009\u62e9 \u4ea4\u6362\u673a\u53ef\u7528\u533a \u3002 \u5b8c\u6210 \u6743\u9650\u786e\u8ba4 \uff0c\u5e76\u9009\u4e2d \u6211\u540c\u610f\u6388\u6743\u670d\u52a1\u5546\uff08\u676d\u5dde\u60a6\u6570\u79d1\u6280\u6709\u9650\u516c\u53f8\uff09\u83b7\u53d6\u4e0a\u8ff0\u6743\u9650\u4ee5\u63d0\u4f9b\u4ee3\u8fd0\u7ef4\u670d\u52a1 \u3002 \u5728\u9875\u9762\u5e95\u90e8\uff0c\u5355\u51fb \u4e0b\u4e00\u6b65\uff1a\u786e\u8ba4\u8ba2\u5355 \u3002 \u5728 \u670d\u52a1\u6761\u6b3e \u533a\u57df\uff0c\u52fe\u9009 \u6211\u5df2\u9605\u8bfb\u5e76\u540c\u610f\u300a\u8ba1\u7b97\u5de2\u670d\u52a1\u534f\u8bae\u300b \u3002 \u5728\u9875\u9762\u5e95\u90e8\uff0c\u5355\u51fb \u5f00\u59cb\u514d\u8d39\u8bd5\u7528 \u3002 \u5728 \u63d0\u4ea4\u6210\u529f \u9875\u9762\uff0c\u5355\u51fb \u53bb\u5217\u8868\u67e5\u770b \u3002 \u5728\u5b9e\u4f8b\u5217\u8868\u4e2d\u67e5\u770b\u76ee\u6807\u5b9e\u4f8b\u7684 \u72b6\u6001 \uff0c\u786e\u4fdd\u72b6\u6001\u4e3a \u90e8\u7f72\u4e2d \u3002 \u90e8\u7f72\u7684\u5e73\u5747\u8017\u65f6\u4e3a 10 \u5206\u949f\u3002\u5b8c\u6210\u540e\u5b9e\u4f8b\u7684\u72b6\u6001\u53d8\u4e3a \u5df2\u90e8\u7f72 \u3002 \u5e38\u89c1\u95ee\u9898 \u00b6 Q\uff1a\u670d\u52a1\u5b9e\u4f8b\u7684\u72b6\u6001\u663e\u793a\u4e3a \u90e8\u7f72\u5931\u8d25 \u600e\u4e48\u5904\u7406\uff1f \u5982\u679c\u4f7f\u7528 RAM \u8d26\u53f7\u521b\u5efa\u7684\u5b9e\u4f8b\uff0c\u786e\u8ba4\u4e3a\u8be5\u8d26\u53f7\u6388\u4e88\u4e86\u672c\u6587\u524d\u63d0\u6761\u4ef6\u4e2d\u6307\u5b9a\u7684\u6743\u9650\u3002 \u5982\u679c\u6743\u9650\u7b26\u5408\u8981\u6c42\uff0c \u5220\u9664 \u521b\u5efa\u5931\u8d25\u7684\u5b9e\u4f8b\uff0c\u5c1d\u8bd5\u91cd\u65b0\u521b\u5efa\u3002 \u5982\u679c\u4ecd\u7136\u521b\u5efa\u5931\u8d25\uff0c\u5230 NebulaGraph\u8bba\u575b \u5bfb\u6c42\u5e2e\u52a9\u3002","title":"Source create instance aliyun"},{"location":"reuse/source_create_instance_aliyun/#_1","text":"\u51c6\u5907 \u963f\u91cc\u4e91\u8d26\u53f7 \u3002 \u5982\u679c\u4f7f\u7528 RAM \u7528\u6237\u521b\u5efa\u5b9e\u4f8b\uff0c\u9700\u4e3a\u5176\u6dfb\u52a0\u4ee5\u4e0b\u6743\u9650\uff1a AliyunECSFullAccess AliyunVPCFullAccess AliyunROSFullAccess AliyunCloudMonitorFullAccess AliyunComputeNestUserFullAccess","title":"\u8d26\u53f7\u4e0e\u6743\u9650"},{"location":"reuse/source_create_instance_aliyun/#_2","text":"NebulaGraph Cloud \u963f\u91cc\u4e91\u7248\u652f\u6301\u514d\u8d39\u8bd5\u7528\u548c\u4ed8\u8d39\u4f7f\u7528\uff0c\u4e8c\u8005\u7684\u8be6\u7ec6\u8bf4\u660e\u5982\u4e0b\u8868\u3002 \u9879\u76ee \u514d\u8d39\u8bd5\u7528\u7248 \u4ed8\u8d39\u7248 \u4e91\u8d44\u6e90\u5f52\u5c5e \u963f\u91cc\u4e91\u5b98\u65b9\u8d26\u53f7 \u7528\u6237\u8d26\u53f7 \u4e91\u8d44\u6e90\u8d39\u7528 \u963f\u91cc\u4e91\u627f\u62c5 \u7528\u6237\u627f\u62c5 \u4e91\u8d44\u6e90\u4f7f\u7528\u65f6\u957f 30 \u5929\uff08\u4e0d\u53ef\u7eed\u671f\uff09 \u7528\u6237\u521b\u5efa\u5b9e\u4f8b\u65f6\u9009\u62e9 NebulaGraph\u8bb8\u53ef\u8bc1\u8d39\u7528 \u8bd5\u7528\u671f\u5185\u514d\u8d39 \u7528\u6237\u627f\u62c5 NebulaGraph\u670d\u52a1\u8bb8\u53ef\u8bc1\u6709\u6548\u671f 30 \u5929 \u7528\u6237\u521b\u5efa\u5b9e\u4f8b\u65f6\u9009\u62e9 \u8bb8\u53ef\u8bc1\u8fc7\u671f\u540e\u6570\u636e\u662f\u5426\u4fdd\u7559 \u5426\uff08\u56e0\u4e91\u8d44\u6e90\u4f1a\u540c\u65f6\u5230\u671f\uff09 \u662f \u4e91\u8d44\u6e90\u5230\u671f\u540e\u6570\u636e\u662f\u5426\u4fdd\u7559 \u5426 \u5426 \u6570\u636e\u76d8\u5feb\u7167\u8d39\u7528 \u963f\u91cc\u4e91\u627f\u62c5 \u7528\u6237\u627f\u62c5\uff08\u53ef\u5173\u95ed\u529f\u80fd\uff09","title":"\u8d44\u6e90\u4e0e\u8d39\u7528"},{"location":"reuse/source_create_instance_aliyun/#_3","text":"\u5728\u521b\u5efa\u670d\u52a1\u5b9e\u4f8b\u65f6\uff0c\u7cfb\u7edf\u4f1a\u9ed8\u8ba4\u5f00\u542f\u6570\u636e\u76d8\u81ea\u52a8\u5feb\u7167\u5907\u4efd\uff0c\u7528\u4e8e\u5468\u671f\u6027\u5907\u4efdNebulaGraph\u6570\u636e\u3002 \u521b\u5efa\u4ed8\u8d39\u7248\u670d\u52a1\u5b9e\u4f8b\u524d\u9700 \u5f00\u901a\u5feb\u7167 \u3002\u514d\u8d39\u8bd5\u7528\u5b9e\u4f8b\u4f7f\u7528\u7684\u662f\u963f\u91cc\u4e91\u5b98\u65b9\u8d26\u53f7\u4e0b\u7684\u8d44\u6e90\uff0c\u5df2\u5f00\u901a\u5feb\u7167\uff0c\u65e0\u9700\u7528\u6237\u624b\u52a8\u5f00\u901a\u3002 \u9ed8\u8ba4\u7684\u5feb\u7167\u5907\u4efd\u7b56\u7565\u4e3a\u6bcf\u5929 00:00 \u521b\u5efa\u5feb\u7167\u3002 \u521b\u5efa\u5feb\u7167\u4f1a\u4ea7\u751f\u8d39\u7528\uff0c\u8be6\u60c5\u53c2\u89c1 \u5feb\u7167\u8ba1\u8d39 \u3002 \u5982\u9700\u5220\u9664\u5feb\u7167\u3001\u4fee\u6539\u6216\u5220\u9664\u81ea\u52a8\u5feb\u7167\u7b56\u7565\uff0c\u53c2\u89c1 \u5feb\u7167\u6587\u6863 \u3002","title":"\u6570\u636e\u5907\u4efd"},{"location":"reuse/source_create_instance_aliyun/#_4","text":"NebulaGraph Cloud \u963f\u91cc\u4e91\u7248\u652f\u6301\u5982\u4e0b\u5957\u9910\u7248\u672c\u3002 \u5957\u9910\u7248\u672c \u8bf4\u660e \u57fa\u7840\u7248 \u5c06\u6240\u6709NebulaGraph\u670d\u52a1\u8282\u70b9\u90e8\u7f72\u5728 1 \u53f0 ECS \u670d\u52a1\u5668\u4e0a\u3002 \u6807\u51c6\u7248 \u5c06 Graph \u670d\u52a1\u548c Storage \u670d\u52a1\u5206\u522b\u90e8\u7f72\u5728\u4e0d\u540c\u7684 ECS \u670d\u52a1\u5668\u4e0a\uff0c\u6bcf\u4e2a\u670d\u52a1\u90fd\u662f\u5355\u8282\u70b9\uff081 \u53f0 ECS\uff09\u3002\u5c06\u751f\u6001\u5de5\u5177\u6df7\u5408\u90e8\u7f72\u5728 1 \u53f0 ECS \u670d\u52a1\u5668\u4e0a\u3002 \u9ad8\u53ef\u7528\u7248 \u5c06 Graph \u670d\u52a1\u548c Storage \u670d\u52a1\u5206\u522b\u90e8\u7f72\u5728\u4e0d\u540c\u7684 ECS \u670d\u52a1\u5668\u4e0a\uff0c\u6bcf\u4e2a\u670d\u52a1\u90fd\u5305\u542b 3 \u8282\u70b9\uff083 \u53f0 ECS\uff09\u3002\u5c06\u751f\u6001\u5de5\u5177\u6df7\u5408\u90e8\u7f72\u5728 1 \u53f0 ECS \u670d\u52a1\u5668\u4e0a\u3002 \u4ed8\u8d39\u7248\u548c\u514d\u8d39\u8bd5\u7528\u7248\u670d\u52a1\u5b9e\u4f8b\u652f\u6301\u7684\u5957\u9910\u7248\u672c\u6709\u6240\u4e0d\u540c\uff0c\u8be6\u60c5\u53c2\u89c1\u521b\u5efa\u5b9e\u4f8b\u9875\u9762\u3002","title":"\u5957\u9910\u7248\u672c"},{"location":"reuse/source_create_instance_aliyun/#_5","text":"\u767b\u5f55 \u963f\u91cc\u4e91\u63a7\u5236\u53f0 \u3002 \u6253\u5f00\u4e91\u5e02\u573a\u7684 NebulaGraph\u4ea7\u54c1\u9875 \u3002 \u9009\u62e9 \u5957\u9910\u7248\u672c \u548c \u8d2d\u4e70\u65f6\u957f \uff08\u5373NebulaGraph\u670d\u52a1\u7684\u8bb8\u53ef\u8bc1\u6709\u6548\u671f\uff09\uff0c\u5e76\u5355\u51fb \u7acb\u5373\u8d2d\u4e70 \u3002 Caution \u5f53\u524d\u4e91\u5e02\u573a\u663e\u793a\u7684\u90e8\u5206\u4ef7\u683c\u5e76\u975e\u5b9e\u9645\u552e\u4ef7\uff0c\u8d2d\u4e70\u65f6\u9700\u901a\u8fc7\u53f3\u4fa7\u7684\u9489\u9489\u5ba2\u670d\u786e\u8ba4\u5b9e\u9645\u4ef7\u683c\u3002 \u5728 \u521b\u5efa\u670d\u52a1\u5b9e\u4f8b \u9875\uff0c\u4fdd\u6301 \u9009\u62e9\u6a21\u677f \u5904\u7684\u9009\u62e9\u4e0d\u53d8\u3002\u5982\u9700\u5207\u6362\u90e8\u7f72\u67b6\u6784\uff0c\u53ef\u6539\u53d8\u9009\u4e2d\u7684\u9009\u9879\uff0c\u91cd\u65b0\u9009\u62e9\u6a21\u677f\u3002 Note \u6539\u53d8\u6a21\u677f\u4f1a\u6539\u53d8\u4e4b\u524d\u9009\u62e9\u7684\u5957\u9910\u7248\u672c\uff0c\u8f6f\u4ef6\u8d39\u7528\uff08NebulaGraph\u8bb8\u53ef\u8bc1\u8d39\u7528\uff09\u548c\u521b\u5efa\u670d\u52a1\u5b9e\u4f8b\u9700\u8981\u7684\u8d44\u6e90\u4e5f\u4f1a\u6539\u53d8\u3002 \uff08\u53ef\u9009\uff09\u8bbe\u7f6e \u670d\u52a1\u5b9e\u4f8b\u540d\u79f0 \u3002\u9ed8\u8ba4\u503c\u4e3a\u670d\u52a1\u5b9e\u4f8b ID\u3002 \u9009\u62e9\u8981\u521b\u5efa\u670d\u52a1\u5b9e\u4f8b\u7684 \u5730\u57df \u3002 \u5728 \u4ed8\u8d39\u6a21\u5f0f\u8bbe\u7f6e \u533a\u57df\uff0c\u6307\u5b9a ECS \u670d\u52a1\u5668\u7684\u4ed8\u8d39\u65b9\u5f0f\u3002\u9ed8\u8ba4\u4e3a \u6309\u91cf\u4ed8\u8d39 \u3002 \u6309\u91cf\u4ed8\u8d39 \uff1a\u6309\u7167\u8ba1\u8d39\u5468\u671f\u8ba1\u8d39\uff0c\u5728\u6bcf\u4e2a\u7ed3\u7b97\u5468\u671f\u751f\u6210\u8d26\u5355\u5e76\u4ece\u8d26\u6237\u4e2d\u6263\u9664\u76f8\u5e94\u8d39\u7528\u3002\u8be6\u60c5\u53c2\u89c1 \u6309\u91cf\u4ed8\u8d39 \u3002 \u5305\u5e74\u5305\u6708 \uff1a\u5148\u4ed8\u8d39\u540e\u4f7f\u7528\u3002\u8be6\u60c5\u53c2\u89c1 \u5305\u5e74\u5305\u6708 \u3002\u9009\u62e9\u5305\u5e74\u5305\u6708\u6a21\u5f0f\u9700\u8981\u6307\u5b9a \u8d2d\u4e70\u65f6\u957f\u5468\u671f \u548c \u8d2d\u4e70\u65f6\u957f \u3002 \u8d2d\u4e70\u65f6\u957f\u5468\u671f \u5f53\u524d\u4ec5\u652f\u6301 Month \uff0c\u5373\u6309\u6708\u8d2d\u4e70\u3002 \u5728 NebulaGraph\u914d\u7f6e \u533a\u57df\uff0c\u5b8c\u6210\u6570\u636e\u76d8\u548c ECS \u670d\u52a1\u5668\u5bc6\u7801\u8bbe\u7f6e\u3002 \u5728 \u57fa\u7840\u8bbe\u65bd\u914d\u7f6e \u533a\u57df\uff0c\u5b8c\u6210\u4ee5\u4e0b\u8bbe\u7f6e\u3002 \u9009\u62e9 \u4e13\u6709\u7f51\u7edc VPC \u5b9e\u4f8b ID \u3002 \u5982\u679c\u4e0b\u62c9\u5217\u8868\u4e3a\u7a7a\uff0c\u5148\u5355\u51fb\u5176\u53f3\u4fa7\u7684 \u65b0\u5efa\u4e13\u6709\u7f51\u7edc \uff0c\u5b8c\u6210\u4e13\u6709\u7f51\u7edc\u521b\u5efa\u3002 \u9009\u62e9 \u4ea4\u6362\u673a\u53ef\u7528\u533a \u3002 \u9009\u62e9 \u4e1a\u52a1\u7f51\u7edc\u4ea4\u6362\u673a\u7684\u5b9e\u4f8b ID \u3002 \u5982\u679c\u4e0b\u62c9\u5217\u8868\u4e3a\u7a7a\uff0c\u5148\u5355\u51fb\u5176\u53f3\u4fa7\u7684 \u65b0\u5efa\u4ea4\u6362\u673a \uff0c\u5b8c\u6210\u4ea4\u6362\u673a\u521b\u5efa\u3002 \u5b8c\u6210 \u6743\u9650\u786e\u8ba4 \uff0c\u5e76\u9009\u4e2d \u6211\u540c\u610f\u6388\u6743\u670d\u52a1\u5546\uff08\u676d\u5dde\u60a6\u6570\u79d1\u6280\u6709\u9650\u516c\u53f8\uff09\u83b7\u53d6\u4e0a\u8ff0\u6743\u9650\u4ee5\u63d0\u4f9b\u4ee3\u8fd0\u7ef4\u670d\u52a1 \u3002 \u5728\u9875\u9762\u5e95\u90e8\uff0c\u5355\u51fb \u4e0b\u4e00\u6b65\uff1a\u786e\u8ba4\u8ba2\u5355 \u3002 \u5728 \u670d\u52a1\u6761\u6b3e \u533a\u57df\uff0c\u52fe\u9009 \u6211\u5df2\u9605\u8bfb\u5e76\u540c\u610f\u300a\u5546\u54c1\u5728\u7ebf\u534f\u8bae\u300b\u300a\u4e91\u5e02\u573a\u5e73\u53f0\u670d\u52a1\u534f\u8bae\u300b\u300a\u8ba1\u7b97\u5de2\u670d\u52a1\u534f\u8bae\u300b \u3002 \u5728\u9875\u9762\u5e95\u90e8\uff0c\u5355\u51fb \u7acb\u5373\u652f\u4ed8 \u3002 \u5728 \u652f\u4ed8 \u9875\u9762\uff0c\u9009\u62e9\u652f\u4ed8\u65b9\u5f0f\uff0c\u4e4b\u540e\u5355\u51fb\u9875\u9762\u5e95\u90e8\u7684 \u652f\u4ed8 \u3002 \u5728 \u652f\u4ed8\u5b8c\u6210 \u9875\u9762\uff0c\u5355\u51fb \u7ba1\u7406\u63a7\u5236\u53f0 \u3002 \u5728 \u5df2\u8d2d\u4e70\u7684\u670d\u52a1 \u9875\u9762\uff0c\u5355\u51fb\u8981\u521b\u5efa\u7684\u5b9e\u4f8b\u53f3\u4fa7\u7684 \u7acb\u5373\u8fdb\u5165\u8ba1\u7b97\u5de2\u90e8\u7f72\u6216\u67e5\u770b\u90e8\u7f72\u8be6\u60c5 \u3002 Note \u5982\u679c\u5df2\u8d2d\u4e70\u7684\u670d\u52a1\u5217\u8868\u4e2d\u672a\u663e\u793a\u8981\u521b\u5efa\u7684\u5b9e\u4f8b\uff0c\u5237\u65b0\u9875\u9762\u3002 \u5728 \u670d\u52a1\u5b9e\u4f8b\u8be6\u60c5 \u9875\u67e5\u770b\u5b9e\u4f8b\u7684 \u72b6\u6001 \uff0c\u786e\u4fdd\u72b6\u6001\u4e3a \u90e8\u7f72\u4e2d \u3002 \u90e8\u7f72\u7684\u5e73\u5747\u8017\u65f6\u4e3a 10 \u5206\u949f\u3002\u5b8c\u6210\u540e\u5b9e\u4f8b\u7684\u72b6\u6001\u53d8\u4e3a \u5df2\u90e8\u7f72 \u3002","title":"\u521b\u5efa\u4ed8\u8d39\u7248\u670d\u52a1\u5b9e\u4f8b"},{"location":"reuse/source_create_instance_aliyun/#_6","text":"Danger \u514d\u8d39\u8bd5\u7528\u5b9e\u4f8b\u4e0d\u53ef\u5728\u751f\u4ea7\u73af\u5883\u4e2d\u4f7f\u7528\u3002 \u767b\u5f55\u963f\u91cc\u4e91\u8ba1\u7b97\u5de2 \u63a8\u8350\u670d\u52a1 \u9875\u9762\uff0c\u641c\u7d22 NebulaGraph \u3002 \u5728 NebulaGraph\u96c6\u7fa4\u7248 \u5361\u7247\u4e0a\uff0c\u5355\u51fb \u514d\u8d39\u8bd5\u7528 \u3002 \u7cfb\u7edf\u4f1a\u4e3a\u9996\u6b21\u521b\u5efaNebulaGraph\u670d\u52a1\u5b9e\u4f8b\u7684\u7528\u6237\u5f39\u51fa\u7533\u8bf7\u5bf9\u8bdd\u6846\u3002\u5728 \u7533\u8bf7\u6743\u9650 \u5bf9\u8bdd\u6846\u4e2d\u586b\u5199\u7533\u8bf7\u4eba\u4fe1\u606f\u3002\u5e26\u6709\u7ea2\u8272\u661f\u53f7\uff08*\uff09\u7684\u4e3a\u5fc5\u586b\u9879\u3002 Note \u7533\u8bf7\u901a\u8fc7\u540e\u9700\u4ece\u7b2c 1 \u6b65\u91cd\u65b0\u5f00\u59cb\u3002 \uff08\u53ef\u9009\uff09\u8bbe\u7f6e \u670d\u52a1\u5b9e\u4f8b\u540d\u79f0 \u3002\u9ed8\u8ba4\u503c\u4e3a\u670d\u52a1\u5b9e\u4f8b ID\u3002 \u9009\u62e9\u8981\u521b\u5efa\u5b9e\u4f8b\u7684 \u5730\u57df \u3002 \u5728 NebulaGraph\u914d\u7f6e \u533a\u57df\uff0c\u5b8c\u6210\u6570\u636e\u76d8\u548c ECS \u670d\u52a1\u5668\u5bc6\u7801\u8bbe\u7f6e\u3002 \u5728 \u57fa\u7840\u8bbe\u65bd\u914d\u7f6e \u533a\u57df\uff0c\u9009\u62e9 \u4ea4\u6362\u673a\u53ef\u7528\u533a \u3002 \u5b8c\u6210 \u6743\u9650\u786e\u8ba4 \uff0c\u5e76\u9009\u4e2d \u6211\u540c\u610f\u6388\u6743\u670d\u52a1\u5546\uff08\u676d\u5dde\u60a6\u6570\u79d1\u6280\u6709\u9650\u516c\u53f8\uff09\u83b7\u53d6\u4e0a\u8ff0\u6743\u9650\u4ee5\u63d0\u4f9b\u4ee3\u8fd0\u7ef4\u670d\u52a1 \u3002 \u5728\u9875\u9762\u5e95\u90e8\uff0c\u5355\u51fb \u4e0b\u4e00\u6b65\uff1a\u786e\u8ba4\u8ba2\u5355 \u3002 \u5728 \u670d\u52a1\u6761\u6b3e \u533a\u57df\uff0c\u52fe\u9009 \u6211\u5df2\u9605\u8bfb\u5e76\u540c\u610f\u300a\u8ba1\u7b97\u5de2\u670d\u52a1\u534f\u8bae\u300b \u3002 \u5728\u9875\u9762\u5e95\u90e8\uff0c\u5355\u51fb \u5f00\u59cb\u514d\u8d39\u8bd5\u7528 \u3002 \u5728 \u63d0\u4ea4\u6210\u529f \u9875\u9762\uff0c\u5355\u51fb \u53bb\u5217\u8868\u67e5\u770b \u3002 \u5728\u5b9e\u4f8b\u5217\u8868\u4e2d\u67e5\u770b\u76ee\u6807\u5b9e\u4f8b\u7684 \u72b6\u6001 \uff0c\u786e\u4fdd\u72b6\u6001\u4e3a \u90e8\u7f72\u4e2d \u3002 \u90e8\u7f72\u7684\u5e73\u5747\u8017\u65f6\u4e3a 10 \u5206\u949f\u3002\u5b8c\u6210\u540e\u5b9e\u4f8b\u7684\u72b6\u6001\u53d8\u4e3a \u5df2\u90e8\u7f72 \u3002","title":"\u521b\u5efa\u514d\u8d39\u7248\u8bd5\u7528\u7248\u670d\u52a1\u5b9e\u4f8b"},{"location":"reuse/source_create_instance_aliyun/#_7","text":"Q\uff1a\u670d\u52a1\u5b9e\u4f8b\u7684\u72b6\u6001\u663e\u793a\u4e3a \u90e8\u7f72\u5931\u8d25 \u600e\u4e48\u5904\u7406\uff1f \u5982\u679c\u4f7f\u7528 RAM \u8d26\u53f7\u521b\u5efa\u7684\u5b9e\u4f8b\uff0c\u786e\u8ba4\u4e3a\u8be5\u8d26\u53f7\u6388\u4e88\u4e86\u672c\u6587\u524d\u63d0\u6761\u4ef6\u4e2d\u6307\u5b9a\u7684\u6743\u9650\u3002 \u5982\u679c\u6743\u9650\u7b26\u5408\u8981\u6c42\uff0c \u5220\u9664 \u521b\u5efa\u5931\u8d25\u7684\u5b9e\u4f8b\uff0c\u5c1d\u8bd5\u91cd\u65b0\u521b\u5efa\u3002 \u5982\u679c\u4ecd\u7136\u521b\u5efa\u5931\u8d25\uff0c\u5230 NebulaGraph\u8bba\u575b \u5bfb\u6c42\u5e2e\u52a9\u3002","title":"\u5e38\u89c1\u95ee\u9898"},{"location":"reuse/source_install-nebula-graph-by-rpm-or-deb/","text":"RPM \u548c DEB \u662f Linux \u7cfb\u7edf\u4e0b\u5e38\u89c1\u7684\u4e24\u79cd\u5b89\u88c5\u5305\u683c\u5f0f\uff0c\u672c\u6587\u4ecb\u7ecd\u5982\u4f55\u4f7f\u7528 RPM \u6216 DEB \u6587\u4ef6\u5728\u4e00\u53f0\u673a\u5668\u4e0a\u5feb\u901f\u5b89\u88c5NebulaGraph\u3002 Note \u90e8\u7f72NebulaGraph\u96c6\u7fa4\u7684\u65b9\u5f0f\u53c2\u89c1 \u4f7f\u7528 RPM/DEB \u5305\u90e8\u7f72\u96c6\u7fa4 \u3002 \u524d\u63d0\u6761\u4ef6 \u00b6 \u5b89\u88c5 wget \u5de5\u5177\u3002 \u4e0b\u8f7d\u5b89\u88c5\u5305 \u00b6 Note \u5f53\u524d\u4ec5\u652f\u6301\u5728 Linux \u7cfb\u7edf\u4e0b\u5b89\u88c5NebulaGraph\uff0c\u4e14\u4ec5\u652f\u6301 CentOS 7.x\u3001CentOS 8.x\u3001Ubuntu 16.04\u3001Ubuntu 18.04\u3001Ubuntu 20.04 \u64cd\u4f5c\u7cfb\u7edf\u3002 \u5982\u679c\u7528\u6237\u4f7f\u7528\u7684\u662f\u56fd\u4ea7\u5316\u7684 Linux \u64cd\u4f5c\u7cfb\u7edf\uff0c\u8bf7 \u5b89\u88c5\u4f01\u4e1a\u7248NebulaGraph \u3002 \u963f\u91cc\u4e91 OSS \u4e0b\u8f7d \u00b6 \u4e0b\u8f7d release \u7248\u672c URL \u683c\u5f0f\u5982\u4e0b\uff1a //Centos 7 https://oss-cdn.nebula-graph.com.cn/package/<release_version>/nebula-graph-<release_version>.el7.x86_64.rpm //Centos 8 https://oss-cdn.nebula-graph.com.cn/package/<release_version>/nebula-graph-<release_version>.el8.x86_64.rpm //Ubuntu 1604 https://oss-cdn.nebula-graph.com.cn/package/<release_version>/nebula-graph-<release_version>.ubuntu1604.amd64.deb //Ubuntu 1804 https://oss-cdn.nebula-graph.com.cn/package/<release_version>/nebula-graph-<release_version>.ubuntu1804.amd64.deb //Ubuntu 2004 https://oss-cdn.nebula-graph.com.cn/package/<release_version>/nebula-graph-<release_version>.ubuntu2004.amd64.deb \u4f8b\u5982\u8981\u4e0b\u8f7d\u9002\u7528\u4e8e Centos 7.5 \u7684 3.6.0 \u5b89\u88c5\u5305\uff1a wget https://oss-cdn.nebula-graph.com.cn/package/3.6.0/nebula-graph-3.6.0.el7.x86_64.rpm wget https://oss-cdn.nebula-graph.com.cn/package/3.6.0/nebula-graph-3.6.0.el7.x86_64.rpm.sha256sum.txt \u4e0b\u8f7d\u9002\u7528\u4e8e ubuntu 1804 \u7684 3.6.0 \u5b89\u88c5\u5305\uff1a wget https://oss-cdn.nebula-graph.com.cn/package/3.6.0/nebula-graph-3.6.0.ubuntu1804.amd64.deb wget https://oss-cdn.nebula-graph.com.cn/package/3.6.0/nebula-graph-3.6.0.ubuntu1804.amd64.deb.sha256sum.txt \u4e0b\u8f7d\u65e5\u5e38\u5f00\u53d1\u7248\u672c (nightly) Danger nightly \u7248\u672c\u901a\u5e38\u7528\u4e8e\u6d4b\u8bd5\u65b0\u529f\u80fd\u3001\u65b0\u7279\u6027\uff0c\u8bf7 \u4e0d\u8981 \u5728\u751f\u4ea7\u73af\u5883\u4e2d\u4f7f\u7528 nightly \u7248\u672c\u3002 nightly \u7248\u672c\u4e0d\u4fdd\u8bc1\u6bcf\u65e5\u90fd\u80fd\u5b8c\u6574\u53d1\u5e03\uff0c\u4e5f\u4e0d\u4fdd\u8bc1\u662f\u5426\u4f1a\u66f4\u6539\u6587\u4ef6\u540d\u3002 URL \u683c\u5f0f\u5982\u4e0b\uff1a //Centos 7 https://oss-cdn.nebula-graph.com.cn/package/nightly/<yyyy.mm.dd>/nebula-graph-<yyyy.mm.dd>-nightly.el7.x86_64.rpm //Centos 8 https://oss-cdn.nebula-graph.com.cn/package/nightly/<yyyy.mm.dd>/nebula-graph-<yyyy.mm.dd>-nightly.el8.x86_64.rpm //Ubuntu 1604 https://oss-cdn.nebula-graph.com.cn/package/nightly/<yyyy.mm.dd>/nebula-graph-<yyyy.mm.dd>-nightly.ubuntu1604.amd64.deb //Ubuntu 1804 https://oss-cdn.nebula-graph.com.cn/package/nightly/<yyyy.mm.dd>/nebula-graph-<yyyy.mm.dd>-nightly.ubuntu1804.amd64.deb //Ubuntu 2004 https://oss-cdn.nebula-graph.com.cn/package/nightly/<yyyy.mm.dd>/nebula-graph-<yyyy.mm.dd>-nightly.ubuntu2004.amd64.deb \u4f8b\u5982\u8981\u4e0b\u8f7d 2021.11.24 \u9002\u7528\u4e8e Centos 7.5 \u7684 2.x \u5b89\u88c5\u5305\uff1a wget https://oss-cdn.nebula-graph.com.cn/package/nightly/2021.11.24/nebula-graph-2021.11.24-nightly.el7.x86_64.rpm wget https://oss-cdn.nebula-graph.com.cn/package/nightly/2021.11.24/nebula-graph-2021.11.24-nightly.el7.x86_64.rpm.sha256sum.txt \u8981\u4e0b\u8f7d 2021.11.24 \u9002\u7528\u4e8e Ubuntu 1804 \u7684 2.x \u5b89\u88c5\u5305\uff1a wget https://oss-cdn.nebula-graph.com.cn/package/nightly/2021.11.24/nebula-graph-2021.11.24-nightly.ubuntu1804.amd64.deb wget https://oss-cdn.nebula-graph.com.cn/package/nightly/2021.11.24/nebula-graph-2021.11.24-nightly.ubuntu1804.amd64.deb.sha256sum.txt \u5b89\u88c5NebulaGraph \u00b6 \u5b89\u88c5 RPM \u5305 $ sudo rpm -ivh --prefix = <installation_path> <package_name> --prefix \u4e3a\u53ef\u9009\u9879\uff0c\u7528\u4e8e\u6307\u5b9a\u5b89\u88c5\u8def\u5f84\u3002\u5982\u4e0d\u8bbe\u7f6e\uff0c\u7cfb\u7edf\u4f1a\u5c06NebulaGraph\u5b89\u88c5\u5230\u9ed8\u8ba4\u8def\u5f84 /usr/local/nebula/ \u3002 \u4f8b\u5982\uff0c\u8981\u5728\u9ed8\u8ba4\u8def\u5f84\u4e0b\u5b89\u88c53.6.0\u7248\u672c\u7684 RPM \u5305\uff0c\u8fd0\u884c\u5982\u4e0b\u547d\u4ee4\uff1a sudo rpm -ivh nebula-graph-3.6.0.el7.x86_64.rpm \u5b89\u88c5 DEB \u5305 $ sudo dpkg -i <package_name> Note \u4f7f\u7528 DEB \u5305\u5b89\u88c5NebulaGraph\u65f6\u4e0d\u652f\u6301\u81ea\u5b9a\u4e49\u5b89\u88c5\u8def\u5f84\u3002\u9ed8\u8ba4\u5b89\u88c5\u8def\u5f84\u4e3a /usr/local/nebula/ \u3002 \u4f8b\u5982\u5b89\u88c53.6.0\u7248\u672c\u7684 DEB \u5305\uff1a sudo dpkg -i nebula-graph-3.6.0.ubuntu1804.amd64.deb \u540e\u7eed\u64cd\u4f5c \u00b6 \u542f\u52a8NebulaGraph \u8fde\u63a5NebulaGraph","title":"Source install nebula graph by rpm or deb"},{"location":"reuse/source_install-nebula-graph-by-rpm-or-deb/#_1","text":"\u5b89\u88c5 wget \u5de5\u5177\u3002","title":"\u524d\u63d0\u6761\u4ef6"},{"location":"reuse/source_install-nebula-graph-by-rpm-or-deb/#_2","text":"Note \u5f53\u524d\u4ec5\u652f\u6301\u5728 Linux \u7cfb\u7edf\u4e0b\u5b89\u88c5NebulaGraph\uff0c\u4e14\u4ec5\u652f\u6301 CentOS 7.x\u3001CentOS 8.x\u3001Ubuntu 16.04\u3001Ubuntu 18.04\u3001Ubuntu 20.04 \u64cd\u4f5c\u7cfb\u7edf\u3002 \u5982\u679c\u7528\u6237\u4f7f\u7528\u7684\u662f\u56fd\u4ea7\u5316\u7684 Linux \u64cd\u4f5c\u7cfb\u7edf\uff0c\u8bf7 \u5b89\u88c5\u4f01\u4e1a\u7248NebulaGraph \u3002","title":"\u4e0b\u8f7d\u5b89\u88c5\u5305"},{"location":"reuse/source_install-nebula-graph-by-rpm-or-deb/#oss","text":"\u4e0b\u8f7d release \u7248\u672c URL \u683c\u5f0f\u5982\u4e0b\uff1a //Centos 7 https://oss-cdn.nebula-graph.com.cn/package/<release_version>/nebula-graph-<release_version>.el7.x86_64.rpm //Centos 8 https://oss-cdn.nebula-graph.com.cn/package/<release_version>/nebula-graph-<release_version>.el8.x86_64.rpm //Ubuntu 1604 https://oss-cdn.nebula-graph.com.cn/package/<release_version>/nebula-graph-<release_version>.ubuntu1604.amd64.deb //Ubuntu 1804 https://oss-cdn.nebula-graph.com.cn/package/<release_version>/nebula-graph-<release_version>.ubuntu1804.amd64.deb //Ubuntu 2004 https://oss-cdn.nebula-graph.com.cn/package/<release_version>/nebula-graph-<release_version>.ubuntu2004.amd64.deb \u4f8b\u5982\u8981\u4e0b\u8f7d\u9002\u7528\u4e8e Centos 7.5 \u7684 3.6.0 \u5b89\u88c5\u5305\uff1a wget https://oss-cdn.nebula-graph.com.cn/package/3.6.0/nebula-graph-3.6.0.el7.x86_64.rpm wget https://oss-cdn.nebula-graph.com.cn/package/3.6.0/nebula-graph-3.6.0.el7.x86_64.rpm.sha256sum.txt \u4e0b\u8f7d\u9002\u7528\u4e8e ubuntu 1804 \u7684 3.6.0 \u5b89\u88c5\u5305\uff1a wget https://oss-cdn.nebula-graph.com.cn/package/3.6.0/nebula-graph-3.6.0.ubuntu1804.amd64.deb wget https://oss-cdn.nebula-graph.com.cn/package/3.6.0/nebula-graph-3.6.0.ubuntu1804.amd64.deb.sha256sum.txt \u4e0b\u8f7d\u65e5\u5e38\u5f00\u53d1\u7248\u672c (nightly) Danger nightly \u7248\u672c\u901a\u5e38\u7528\u4e8e\u6d4b\u8bd5\u65b0\u529f\u80fd\u3001\u65b0\u7279\u6027\uff0c\u8bf7 \u4e0d\u8981 \u5728\u751f\u4ea7\u73af\u5883\u4e2d\u4f7f\u7528 nightly \u7248\u672c\u3002 nightly \u7248\u672c\u4e0d\u4fdd\u8bc1\u6bcf\u65e5\u90fd\u80fd\u5b8c\u6574\u53d1\u5e03\uff0c\u4e5f\u4e0d\u4fdd\u8bc1\u662f\u5426\u4f1a\u66f4\u6539\u6587\u4ef6\u540d\u3002 URL \u683c\u5f0f\u5982\u4e0b\uff1a //Centos 7 https://oss-cdn.nebula-graph.com.cn/package/nightly/<yyyy.mm.dd>/nebula-graph-<yyyy.mm.dd>-nightly.el7.x86_64.rpm //Centos 8 https://oss-cdn.nebula-graph.com.cn/package/nightly/<yyyy.mm.dd>/nebula-graph-<yyyy.mm.dd>-nightly.el8.x86_64.rpm //Ubuntu 1604 https://oss-cdn.nebula-graph.com.cn/package/nightly/<yyyy.mm.dd>/nebula-graph-<yyyy.mm.dd>-nightly.ubuntu1604.amd64.deb //Ubuntu 1804 https://oss-cdn.nebula-graph.com.cn/package/nightly/<yyyy.mm.dd>/nebula-graph-<yyyy.mm.dd>-nightly.ubuntu1804.amd64.deb //Ubuntu 2004 https://oss-cdn.nebula-graph.com.cn/package/nightly/<yyyy.mm.dd>/nebula-graph-<yyyy.mm.dd>-nightly.ubuntu2004.amd64.deb \u4f8b\u5982\u8981\u4e0b\u8f7d 2021.11.24 \u9002\u7528\u4e8e Centos 7.5 \u7684 2.x \u5b89\u88c5\u5305\uff1a wget https://oss-cdn.nebula-graph.com.cn/package/nightly/2021.11.24/nebula-graph-2021.11.24-nightly.el7.x86_64.rpm wget https://oss-cdn.nebula-graph.com.cn/package/nightly/2021.11.24/nebula-graph-2021.11.24-nightly.el7.x86_64.rpm.sha256sum.txt \u8981\u4e0b\u8f7d 2021.11.24 \u9002\u7528\u4e8e Ubuntu 1804 \u7684 2.x \u5b89\u88c5\u5305\uff1a wget https://oss-cdn.nebula-graph.com.cn/package/nightly/2021.11.24/nebula-graph-2021.11.24-nightly.ubuntu1804.amd64.deb wget https://oss-cdn.nebula-graph.com.cn/package/nightly/2021.11.24/nebula-graph-2021.11.24-nightly.ubuntu1804.amd64.deb.sha256sum.txt","title":"\u963f\u91cc\u4e91 OSS \u4e0b\u8f7d"},{"location":"reuse/source_install-nebula-graph-by-rpm-or-deb/#nebulagraph","text":"\u5b89\u88c5 RPM \u5305 $ sudo rpm -ivh --prefix = <installation_path> <package_name> --prefix \u4e3a\u53ef\u9009\u9879\uff0c\u7528\u4e8e\u6307\u5b9a\u5b89\u88c5\u8def\u5f84\u3002\u5982\u4e0d\u8bbe\u7f6e\uff0c\u7cfb\u7edf\u4f1a\u5c06NebulaGraph\u5b89\u88c5\u5230\u9ed8\u8ba4\u8def\u5f84 /usr/local/nebula/ \u3002 \u4f8b\u5982\uff0c\u8981\u5728\u9ed8\u8ba4\u8def\u5f84\u4e0b\u5b89\u88c53.6.0\u7248\u672c\u7684 RPM \u5305\uff0c\u8fd0\u884c\u5982\u4e0b\u547d\u4ee4\uff1a sudo rpm -ivh nebula-graph-3.6.0.el7.x86_64.rpm \u5b89\u88c5 DEB \u5305 $ sudo dpkg -i <package_name> Note \u4f7f\u7528 DEB \u5305\u5b89\u88c5NebulaGraph\u65f6\u4e0d\u652f\u6301\u81ea\u5b9a\u4e49\u5b89\u88c5\u8def\u5f84\u3002\u9ed8\u8ba4\u5b89\u88c5\u8def\u5f84\u4e3a /usr/local/nebula/ \u3002 \u4f8b\u5982\u5b89\u88c53.6.0\u7248\u672c\u7684 DEB \u5305\uff1a sudo dpkg -i nebula-graph-3.6.0.ubuntu1804.amd64.deb","title":"\u5b89\u88c5NebulaGraph"},{"location":"reuse/source_install-nebula-graph-by-rpm-or-deb/#_3","text":"\u542f\u52a8NebulaGraph \u8fde\u63a5NebulaGraph","title":"\u540e\u7eed\u64cd\u4f5c"},{"location":"reuse/source_manage-service/","text":"NebulaGraph\u652f\u6301\u901a\u8fc7\u811a\u672c\u7ba1\u7406\u670d\u52a1\u3002 \u4f7f\u7528\u811a\u672c\u7ba1\u7406\u670d\u52a1 \u00b6 \u4f7f\u7528\u811a\u672c nebula.service \u7ba1\u7406\u670d\u52a1\uff0c\u5305\u62ec\u542f\u52a8\u3001\u505c\u6b62\u3001\u91cd\u542f\u3001\u4e2d\u6b62\u548c\u67e5\u770b\u3002 Note nebula.service \u7684\u9ed8\u8ba4\u8def\u5f84\u662f /usr/local/nebula/scripts \uff0c\u5982\u679c\u4fee\u6539\u8fc7\u5b89\u88c5\u8def\u5f84\uff0c\u8bf7\u4f7f\u7528\u5b9e\u9645\u8def\u5f84\u3002 \u8bed\u6cd5 \u00b6 $ sudo /usr/local/nebula/scripts/nebula.service [ -v ] [ -c <config_file_path> ] <start | stop | restart | kill | status> <metad | graphd | storaged | all> \u53c2\u6570 \u8bf4\u660e -v \u663e\u793a\u8be6\u7ec6\u8c03\u8bd5\u4fe1\u606f\u3002 -c \u6307\u5b9a\u914d\u7f6e\u6587\u4ef6\u8def\u5f84\uff0c\u9ed8\u8ba4\u8def\u5f84\u4e3a /usr/local/nebula/etc/ \u3002 start \u542f\u52a8\u670d\u52a1\u3002 stop \u505c\u6b62\u670d\u52a1\u3002 restart \u91cd\u542f\u670d\u52a1\u3002 kill \u4e2d\u6b62\u670d\u52a1\u3002 status \u67e5\u770b\u670d\u52a1\u72b6\u6001\u3002 metad \u7ba1\u7406 Meta \u670d\u52a1\u3002 graphd \u7ba1\u7406 Graph \u670d\u52a1\u3002 storaged \u7ba1\u7406 Storage \u670d\u52a1\u3002 all \u7ba1\u7406\u6240\u6709\u670d\u52a1\u3002 \u542f\u52a8NebulaGraph\u670d\u52a1 \u00b6 \u6267\u884c\u5982\u4e0b\u547d\u4ee4\u542f\u52a8\u670d\u52a1\uff1a $ sudo /usr/local/nebula/scripts/nebula.service start all [ INFO ] Starting nebula-metad... [ INFO ] Done [ INFO ] Starting nebula-graphd... [ INFO ] Done [ INFO ] Starting nebula-storaged... [ INFO ] Done \u505c\u6b62NebulaGraph\u670d\u52a1 \u00b6 Danger \u8bf7\u52ff\u4f7f\u7528 kill -9 \u547d\u4ee4\u5f3a\u5236\u7ec8\u6b62\u8fdb\u7a0b\uff0c\u5426\u5219\u53ef\u80fd\u8f83\u5c0f\u6982\u7387\u51fa\u73b0\u6570\u636e\u4e22\u5931\u3002 \u6267\u884c\u5982\u4e0b\u547d\u4ee4\u505c\u6b62NebulaGraph\u670d\u52a1\uff1a $ sudo /usr/local/nebula/scripts/nebula.service stop all [ INFO ] Stopping nebula-metad... [ INFO ] Done [ INFO ] Stopping nebula-graphd... [ INFO ] Done [ INFO ] Stopping nebula-storaged... [ INFO ] Done \u67e5\u770bNebulaGraph\u670d\u52a1 \u00b6 \u6267\u884c\u5982\u4e0b\u547d\u4ee4\u67e5\u770bNebulaGraph\u670d\u52a1\u72b6\u6001\uff1a $ sudo /usr/local/nebula/scripts/nebula.service status all \u5982\u679c\u8fd4\u56de\u5982\u4e0b\u7ed3\u679c\uff0c\u8868\u793aNebulaGraph\u670d\u52a1\u6b63\u5e38\u8fd0\u884c\u3002 [ INFO ] nebula-metad ( 33fd35e ) : Running as 29020 , Listening on 9559 [ INFO ] nebula-graphd ( 33fd35e ) : Running as 29095 , Listening on 9669 [ WARN ] nebula-storaged after v3.0.0 will not start service until it is added to cluster. [ WARN ] See Manage Storage hosts:ADD HOSTS in https://docs.nebula-graph.io/ [ INFO ] nebula-storaged ( 33fd35e ) : Running as 29147 , Listening on 9779 Note \u6b63\u5e38\u542f\u52a8NebulaGraph\u540e\uff0c nebula-storaged \u8fdb\u7a0b\u7684\u7aef\u53e3\u663e\u793a\u7ea2\u8272\u3002\u8fd9\u662f\u56e0\u4e3a nebula-storaged \u5728\u542f\u52a8\u6d41\u7a0b\u4e2d\u4f1a\u7b49\u5f85 nebula-metad \u6dfb\u52a0\u5f53\u524d Storage \u670d\u52a1\uff0c\u5f53\u524d Storage \u670d\u52a1\u6536\u5230 Ready \u4fe1\u53f7\u540e\u624d\u4f1a\u6b63\u5f0f\u542f\u52a8\u670d\u52a1\u3002\u4ece 3.0.0 \u7248\u672c\u5f00\u59cb\uff0c\u5728\u914d\u7f6e\u6587\u4ef6\u4e2d\u6dfb\u52a0\u7684 Storage \u8282\u70b9\u65e0\u6cd5\u76f4\u63a5\u8bfb\u5199\uff0c\u914d\u7f6e\u6587\u4ef6\u7684\u4f5c\u7528\u4ec5\u4ec5\u662f\u5c06 Storage \u8282\u70b9\u6ce8\u518c\u81f3 Meta \u670d\u52a1\u4e2d\u3002\u5fc5\u987b\u4f7f\u7528 ADD HOSTS \u547d\u4ee4\u540e\uff0c\u624d\u80fd\u6b63\u5e38\u8bfb\u5199 Storage \u8282\u70b9\u3002\u66f4\u591a\u4fe1\u606f\uff0c\u53c2\u89c1 \u7ba1\u7406 Storage \u4e3b\u673a \u3002 \u5982\u679c\u8fd4\u56de\u7c7b\u4f3c\u5982\u4e0b\u7ed3\u679c\uff0c\u8868\u793aNebulaGraph\u670d\u52a1\u5f02\u5e38\uff0c\u53ef\u4ee5\u6839\u636e\u5f02\u5e38\u670d\u52a1\u4fe1\u606f\u8fdb\u4e00\u6b65\u6392\u67e5\uff0c\u6216\u8005\u5728 NebulaGraph\u793e\u533a \u5bfb\u6c42\u5e2e\u52a9\u3002 [ INFO ] nebula-metad: Running as 25600 , Listening on 9559 [ INFO ] nebula-graphd: Exited [ INFO ] nebula-storaged: Running as 25646 , Listening on 9779 NebulaGraph\u670d\u52a1\u7531 Meta \u670d\u52a1\u3001Graph \u670d\u52a1\u548c Storage \u670d\u52a1\u5171\u540c\u63d0\u4f9b\uff0c\u8fd9\u4e09\u79cd\u670d\u52a1\u7684\u914d\u7f6e\u6587\u4ef6\u90fd\u4fdd\u5b58\u5728\u5b89\u88c5\u76ee\u5f55\u7684 etc \u76ee\u5f55\u5185\uff0c\u9ed8\u8ba4\u8def\u5f84\u4e3a /usr/local/nebula/etc/ \uff0c\u7528\u6237\u53ef\u4ee5\u68c0\u67e5\u76f8\u5e94\u7684\u914d\u7f6e\u6587\u4ef6\u6392\u67e5\u95ee\u9898\u3002 \u4e0b\u4e00\u6b65 \u00b6 \u8fde\u63a5NebulaGraph","title":"Source manage service"},{"location":"reuse/source_manage-service/#_1","text":"\u4f7f\u7528\u811a\u672c nebula.service \u7ba1\u7406\u670d\u52a1\uff0c\u5305\u62ec\u542f\u52a8\u3001\u505c\u6b62\u3001\u91cd\u542f\u3001\u4e2d\u6b62\u548c\u67e5\u770b\u3002 Note nebula.service \u7684\u9ed8\u8ba4\u8def\u5f84\u662f /usr/local/nebula/scripts \uff0c\u5982\u679c\u4fee\u6539\u8fc7\u5b89\u88c5\u8def\u5f84\uff0c\u8bf7\u4f7f\u7528\u5b9e\u9645\u8def\u5f84\u3002","title":"\u4f7f\u7528\u811a\u672c\u7ba1\u7406\u670d\u52a1"},{"location":"reuse/source_manage-service/#_2","text":"$ sudo /usr/local/nebula/scripts/nebula.service [ -v ] [ -c <config_file_path> ] <start | stop | restart | kill | status> <metad | graphd | storaged | all> \u53c2\u6570 \u8bf4\u660e -v \u663e\u793a\u8be6\u7ec6\u8c03\u8bd5\u4fe1\u606f\u3002 -c \u6307\u5b9a\u914d\u7f6e\u6587\u4ef6\u8def\u5f84\uff0c\u9ed8\u8ba4\u8def\u5f84\u4e3a /usr/local/nebula/etc/ \u3002 start \u542f\u52a8\u670d\u52a1\u3002 stop \u505c\u6b62\u670d\u52a1\u3002 restart \u91cd\u542f\u670d\u52a1\u3002 kill \u4e2d\u6b62\u670d\u52a1\u3002 status \u67e5\u770b\u670d\u52a1\u72b6\u6001\u3002 metad \u7ba1\u7406 Meta \u670d\u52a1\u3002 graphd \u7ba1\u7406 Graph \u670d\u52a1\u3002 storaged \u7ba1\u7406 Storage \u670d\u52a1\u3002 all \u7ba1\u7406\u6240\u6709\u670d\u52a1\u3002","title":"\u8bed\u6cd5"},{"location":"reuse/source_manage-service/#nebulagraph","text":"\u6267\u884c\u5982\u4e0b\u547d\u4ee4\u542f\u52a8\u670d\u52a1\uff1a $ sudo /usr/local/nebula/scripts/nebula.service start all [ INFO ] Starting nebula-metad... [ INFO ] Done [ INFO ] Starting nebula-graphd... [ INFO ] Done [ INFO ] Starting nebula-storaged... [ INFO ] Done","title":"\u542f\u52a8NebulaGraph\u670d\u52a1"},{"location":"reuse/source_manage-service/#nebulagraph_1","text":"Danger \u8bf7\u52ff\u4f7f\u7528 kill -9 \u547d\u4ee4\u5f3a\u5236\u7ec8\u6b62\u8fdb\u7a0b\uff0c\u5426\u5219\u53ef\u80fd\u8f83\u5c0f\u6982\u7387\u51fa\u73b0\u6570\u636e\u4e22\u5931\u3002 \u6267\u884c\u5982\u4e0b\u547d\u4ee4\u505c\u6b62NebulaGraph\u670d\u52a1\uff1a $ sudo /usr/local/nebula/scripts/nebula.service stop all [ INFO ] Stopping nebula-metad... [ INFO ] Done [ INFO ] Stopping nebula-graphd... [ INFO ] Done [ INFO ] Stopping nebula-storaged... [ INFO ] Done","title":"\u505c\u6b62NebulaGraph\u670d\u52a1"},{"location":"reuse/source_manage-service/#nebulagraph_2","text":"\u6267\u884c\u5982\u4e0b\u547d\u4ee4\u67e5\u770bNebulaGraph\u670d\u52a1\u72b6\u6001\uff1a $ sudo /usr/local/nebula/scripts/nebula.service status all \u5982\u679c\u8fd4\u56de\u5982\u4e0b\u7ed3\u679c\uff0c\u8868\u793aNebulaGraph\u670d\u52a1\u6b63\u5e38\u8fd0\u884c\u3002 [ INFO ] nebula-metad ( 33fd35e ) : Running as 29020 , Listening on 9559 [ INFO ] nebula-graphd ( 33fd35e ) : Running as 29095 , Listening on 9669 [ WARN ] nebula-storaged after v3.0.0 will not start service until it is added to cluster. [ WARN ] See Manage Storage hosts:ADD HOSTS in https://docs.nebula-graph.io/ [ INFO ] nebula-storaged ( 33fd35e ) : Running as 29147 , Listening on 9779 Note \u6b63\u5e38\u542f\u52a8NebulaGraph\u540e\uff0c nebula-storaged \u8fdb\u7a0b\u7684\u7aef\u53e3\u663e\u793a\u7ea2\u8272\u3002\u8fd9\u662f\u56e0\u4e3a nebula-storaged \u5728\u542f\u52a8\u6d41\u7a0b\u4e2d\u4f1a\u7b49\u5f85 nebula-metad \u6dfb\u52a0\u5f53\u524d Storage \u670d\u52a1\uff0c\u5f53\u524d Storage \u670d\u52a1\u6536\u5230 Ready \u4fe1\u53f7\u540e\u624d\u4f1a\u6b63\u5f0f\u542f\u52a8\u670d\u52a1\u3002\u4ece 3.0.0 \u7248\u672c\u5f00\u59cb\uff0c\u5728\u914d\u7f6e\u6587\u4ef6\u4e2d\u6dfb\u52a0\u7684 Storage \u8282\u70b9\u65e0\u6cd5\u76f4\u63a5\u8bfb\u5199\uff0c\u914d\u7f6e\u6587\u4ef6\u7684\u4f5c\u7528\u4ec5\u4ec5\u662f\u5c06 Storage \u8282\u70b9\u6ce8\u518c\u81f3 Meta \u670d\u52a1\u4e2d\u3002\u5fc5\u987b\u4f7f\u7528 ADD HOSTS \u547d\u4ee4\u540e\uff0c\u624d\u80fd\u6b63\u5e38\u8bfb\u5199 Storage \u8282\u70b9\u3002\u66f4\u591a\u4fe1\u606f\uff0c\u53c2\u89c1 \u7ba1\u7406 Storage \u4e3b\u673a \u3002 \u5982\u679c\u8fd4\u56de\u7c7b\u4f3c\u5982\u4e0b\u7ed3\u679c\uff0c\u8868\u793aNebulaGraph\u670d\u52a1\u5f02\u5e38\uff0c\u53ef\u4ee5\u6839\u636e\u5f02\u5e38\u670d\u52a1\u4fe1\u606f\u8fdb\u4e00\u6b65\u6392\u67e5\uff0c\u6216\u8005\u5728 NebulaGraph\u793e\u533a \u5bfb\u6c42\u5e2e\u52a9\u3002 [ INFO ] nebula-metad: Running as 25600 , Listening on 9559 [ INFO ] nebula-graphd: Exited [ INFO ] nebula-storaged: Running as 25646 , Listening on 9779 NebulaGraph\u670d\u52a1\u7531 Meta \u670d\u52a1\u3001Graph \u670d\u52a1\u548c Storage \u670d\u52a1\u5171\u540c\u63d0\u4f9b\uff0c\u8fd9\u4e09\u79cd\u670d\u52a1\u7684\u914d\u7f6e\u6587\u4ef6\u90fd\u4fdd\u5b58\u5728\u5b89\u88c5\u76ee\u5f55\u7684 etc \u76ee\u5f55\u5185\uff0c\u9ed8\u8ba4\u8def\u5f84\u4e3a /usr/local/nebula/etc/ \uff0c\u7528\u6237\u53ef\u4ee5\u68c0\u67e5\u76f8\u5e94\u7684\u914d\u7f6e\u6587\u4ef6\u6392\u67e5\u95ee\u9898\u3002","title":"\u67e5\u770bNebulaGraph\u670d\u52a1"},{"location":"reuse/source_manage-service/#_3","text":"\u8fde\u63a5NebulaGraph","title":"\u4e0b\u4e00\u6b65"},{"location":"reuse/source_ngql_for_quick_start/","text":"\u4f7f\u7528\u8bf4\u660e \u00b6 \u56fe\u7a7a\u95f4\u548c Schema \u00b6 \u4e00\u4e2aNebulaGraph\u5b9e\u4f8b\u7531\u4e00\u4e2a\u6216\u591a\u4e2a\u56fe\u7a7a\u95f4\u7ec4\u6210\u3002\u6bcf\u4e2a\u56fe\u7a7a\u95f4\u90fd\u662f\u7269\u7406\u9694\u79bb\u7684\uff0c\u7528\u6237\u53ef\u4ee5\u5728\u540c\u4e00\u4e2a\u5b9e\u4f8b\u4e2d\u4f7f\u7528\u4e0d\u540c\u7684\u56fe\u7a7a\u95f4\u5b58\u50a8\u4e0d\u540c\u7684\u6570\u636e\u96c6\u3002 \u4e3a\u4e86\u5728\u56fe\u7a7a\u95f4\u4e2d\u63d2\u5165\u6570\u636e\uff0c\u9700\u8981\u4e3a\u56fe\u6570\u636e\u5e93\u5b9a\u4e49\u4e00\u4e2a Schema\u3002NebulaGraph\u7684 Schema \u662f\u7531\u5982\u4e0b\u51e0\u90e8\u5206\u7ec4\u6210\u3002 \u7ec4\u6210\u90e8\u5206 \u8bf4\u660e \u70b9\uff08Vertex\uff09 \u8868\u793a\u73b0\u5b9e\u4e16\u754c\u4e2d\u7684\u5b9e\u4f53\u3002\u4e00\u4e2a\u70b9\u53ef\u4ee5\u6709 0 \u5230\u591a\u4e2a\u6807\u7b7e\u3002 \u6807\u7b7e\uff08Tag\uff09 \u70b9\u7684\u7c7b\u578b\uff0c\u5b9a\u4e49\u4e86\u4e00\u7ec4\u63cf\u8ff0\u70b9\u7c7b\u578b\u7684\u5c5e\u6027\u3002 \u8fb9\uff08Edge\uff09 \u8868\u793a\u4e24\u4e2a\u70b9\u4e4b\u95f4 \u6709\u65b9\u5411 \u7684\u5173\u7cfb\u3002 \u8fb9\u7c7b\u578b\uff08Edge type\uff09 \u8fb9\u7684\u7c7b\u578b\uff0c\u5b9a\u4e49\u4e86\u4e00\u7ec4\u63cf\u8ff0\u8fb9\u7684\u7c7b\u578b\u7684\u5c5e\u6027\u3002 \u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u89c1 \u6570\u636e\u7ed3\u6784 \u3002 \u672c\u6587\u5c06\u4f7f\u7528\u4e0b\u56fe\u7684\u6570\u636e\u96c6\u6f14\u793a\u57fa\u7840\u64cd\u4f5c\u7684\u8bed\u6cd5\u3002 \u5f02\u6b65\u5b9e\u73b0\u521b\u5efa\u548c\u4fee\u6539 \u00b6 Caution \u5728NebulaGraph\u4e2d\uff0c\u4e0b\u5217\u521b\u5efa\u548c\u4fee\u6539\u64cd\u4f5c\u662f\u5f02\u6b65\u5b9e\u73b0\u7684\u3002\u8981\u5728 \u4e0b\u4e00\u4e2a \u5fc3\u8df3\u5468\u671f\u4e4b\u540e\u624d\u80fd\u751f\u6548\uff0c\u5426\u5219\u8bbf\u95ee\u4f1a\u62a5\u9519\u3002\u4e3a\u786e\u4fdd\u6570\u636e\u540c\u6b65\uff0c\u540e\u7eed\u64cd\u4f5c\u80fd\u987a\u5229\u8fdb\u884c\uff0c\u8bf7\u7b49\u5f85 2 \u4e2a\u5fc3\u8df3\u5468\u671f\uff0820 \u79d2\uff09\u3002 CREATE SPACE CREATE TAG CREATE EDGE ALTER TAG ALTER EDGE CREATE TAG INDEX CREATE EDGE INDEX Note \u9ed8\u8ba4\u5fc3\u8df3\u5468\u671f\u662f 10 \u79d2\u3002\u4fee\u6539\u5fc3\u8df3\u5468\u671f\u53c2\u6570 heartbeat_interval_secs \uff0c\u8bf7\u53c2\u89c1 \u914d\u7f6e\u7b80\u4ecb \u3002 \u7b2c\u4e00\u6b65\uff1a\u521b\u5efa\u548c\u9009\u62e9\u56fe\u7a7a\u95f4 \u00b6 nGQL \u8bed\u6cd5 \u00b6 \u521b\u5efa\u56fe\u7a7a\u95f4 CREATE SPACE [IF NOT EXISTS] <graph_space_name> ( [partition_num = <partition_number>,] [replica_factor = <replica_number>,] vid_type = {FIXED_STRING(<N>) | INT64} ) [COMMENT = '<comment>']; \u53c2\u6570\u8be6\u60c5\u8bf7\u53c2\u89c1 CREATE SPACE \u3002 \u5217\u51fa\u521b\u5efa\u6210\u529f\u7684\u56fe\u7a7a\u95f4 nebula> SHOW SPACES; \u9009\u62e9\u6570\u636e\u5e93 USE <graph_space_name>; \u793a\u4f8b \u00b6 \u6267\u884c\u5982\u4e0b\u8bed\u53e5\u521b\u5efa\u540d\u4e3a basketballplayer \u7684\u56fe\u7a7a\u95f4\u3002 nebula> CREATE SPACE basketballplayer(partition_num=15, replica_factor=1, vid_type=fixed_string(30)); Note \u5982\u679c\u62a5\u9519\u63d0\u793a [ERROR (-1005)]: Host not enough! \uff0c\u8bf7\u68c0\u67e5\u662f\u5426\u5df2 \u6dfb\u52a0 Storage \u4e3b\u673a \u3002 \u6267\u884c\u547d\u4ee4 SHOW HOSTS \u68c0\u67e5\u5206\u7247\u7684\u5206\u5e03\u60c5\u51b5\uff0c\u786e\u4fdd\u5e73\u8861\u5206\u5e03\u3002 nebula> SHOW HOSTS; +-------------+-----------+-----------+--------------+----------------------------------+------------------------+---------+ | Host | Port | Status | Leader count | Leader distribution | Partition distribution | Version | +-------------+-----------+-----------+--------------+----------------------------------+------------------------+---------+ | \"storaged0\" | 9779 | \"ONLINE\" | 5 | \"basketballplayer:5\" | \"basketballplayer:5\" | \"3.6.0\" | | \"storaged1\" | 9779 | \"ONLINE\" | 5 | \"basketballplayer:5\" | \"basketballplayer:5\" | \"3.6.0\" | | \"storaged2\" | 9779 | \"ONLINE\" | 5 | \"basketballplayer:5\" | \"basketballplayer:5\" | \"3.6.0\" | +-------------+-----------+-----------+--------------+----------------------------------+------------------------+---------+ \u5982\u679c Leader distribution \u5206\u5e03\u4e0d\u5747\u5300\uff0c\u8bf7\u6267\u884c\u547d\u4ee4 BALANCE LEADER \u91cd\u65b0\u5206\u914d\u3002\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u89c1 Storage \u8d1f\u8f7d\u5747\u8861 \u3002 \u9009\u62e9\u56fe\u7a7a\u95f4 basketballplayer \u3002 nebula[(none)]> USE basketballplayer; \u7528\u6237\u53ef\u4ee5\u6267\u884c\u547d\u4ee4 SHOW SPACES \u67e5\u770b\u521b\u5efa\u7684\u56fe\u7a7a\u95f4\u3002 nebula> SHOW SPACES; +--------------------+ | Name | +--------------------+ | \"basketballplayer\" | +--------------------+ \u7b2c\u4e8c\u6b65\uff1a\u521b\u5efa Tag \u548c Edge type \u00b6 nGQL \u8bed\u6cd5 \u00b6 CREATE {TAG | EDGE} [IF NOT EXISTS] {<tag_name> | <edge_type_name>} ( <prop_name> <data_type> [NULL | NOT NULL] [DEFAULT <default_value>] [COMMENT '<comment>'] [{, <prop_name> <data_type> [NULL | NOT NULL] [DEFAULT <default_value>] [COMMENT '<comment>']} ...] ) [TTL_DURATION = <ttl_duration>] [TTL_COL = <prop_name>] [COMMENT = '<comment>']; \u53c2\u6570\u8be6\u60c5\u8bf7\u53c2\u89c1 CREATE TAG \u548c CREATE EDGE \u3002 \u793a\u4f8b \u00b6 \u521b\u5efa Tag: player \u548c team \uff0c\u4ee5\u53ca Edge type: follow \u548c serve \u3002\u8bf4\u660e\u5982\u4e0b\u8868\u3002 \u540d\u79f0 \u7c7b\u578b \u5c5e\u6027 player Tag name (string), age (int) team Tag name (string) follow Edge type degree (int) serve Edge type start_year (int), end_year (int) nebula> CREATE TAG player(name string, age int); nebula> CREATE TAG team(name string); nebula> CREATE EDGE follow(degree int); nebula> CREATE EDGE serve(start_year int, end_year int); \u7b2c\u4e09\u6b65\uff1a\u63d2\u5165\u6570\u636e \u00b6 \u7528\u6237\u53ef\u4ee5\u4f7f\u7528 INSERT \u8bed\u53e5\uff0c\u57fa\u4e8e\u73b0\u6709\u7684 Tag \u63d2\u5165\u70b9\uff0c\u6216\u8005\u57fa\u4e8e\u73b0\u6709\u7684 Edge type \u63d2\u5165\u8fb9\u3002 nGQL \u8bed\u6cd5 \u00b6 \u63d2\u5165\u70b9 INSERT VERTEX [IF NOT EXISTS] [tag_props, [tag_props] ...] VALUES <vid>: ([prop_value_list]) tag_props: tag_name ([prop_name_list]) prop_name_list: [prop_name [, prop_name] ...] prop_value_list: [prop_value [, prop_value] ...] vid \u662f Vertex ID \u7684\u7f29\u5199\uff0c vid \u5728\u4e00\u4e2a\u56fe\u7a7a\u95f4\u4e2d\u662f\u552f\u4e00\u7684\u3002\u53c2\u6570\u8be6\u60c5\u8bf7\u53c2\u89c1 INSERT VERTEX \u3002 \u63d2\u5165\u8fb9 INSERT EDGE [IF NOT EXISTS] <edge_type> ( <prop_name_list> ) VALUES <src_vid> -> <dst_vid>[@<rank>] : ( <prop_value_list> ) [, <src_vid> -> <dst_vid>[@<rank>] : ( <prop_value_list> ), ...]; <prop_name_list> ::= [ <prop_name> [, <prop_name> ] ...] <prop_value_list> ::= [ <prop_value> [, <prop_value> ] ...] \u53c2\u6570\u8be6\u60c5\u8bf7\u53c2\u89c1 INSERT EDGE \u3002 \u793a\u4f8b \u00b6 \u63d2\u5165\u4ee3\u8868\u7403\u5458\u548c\u7403\u961f\u7684\u70b9\u3002 nebula> INSERT VERTEX player(name, age) VALUES \"player100\":(\"Tim Duncan\", 42); nebula> INSERT VERTEX player(name, age) VALUES \"player101\":(\"Tony Parker\", 36); nebula> INSERT VERTEX player(name, age) VALUES \"player102\":(\"LaMarcus Aldridge\", 33); nebula> INSERT VERTEX team(name) VALUES \"team203\":(\"Trail Blazers\"), \"team204\":(\"Spurs\"); \u63d2\u5165\u4ee3\u8868\u7403\u5458\u548c\u7403\u961f\u4e4b\u95f4\u5173\u7cfb\u7684\u8fb9\u3002 nebula> INSERT EDGE follow(degree) VALUES \"player101\" -> \"player100\":(95); nebula> INSERT EDGE follow(degree) VALUES \"player101\" -> \"player102\":(90); nebula> INSERT EDGE follow(degree) VALUES \"player102\" -> \"player100\":(75); nebula> INSERT EDGE serve(start_year, end_year) VALUES \"player101\" -> \"team204\":(1999, 2018),\"player102\" -> \"team203\":(2006, 2015); \u7b2c\u56db\u6b65\uff1a\u67e5\u8be2\u6570\u636e \u00b6 GO \u8bed\u53e5\u53ef\u4ee5\u6839\u636e\u6307\u5b9a\u7684\u6761\u4ef6\u904d\u5386\u6570\u636e\u5e93\u3002 GO \u8bed\u53e5\u4ece\u4e00\u4e2a\u6216\u591a\u4e2a\u70b9\u5f00\u59cb\uff0c\u6cbf\u7740\u4e00\u6761\u6216\u591a\u6761\u8fb9\u904d\u5386\uff0c\u8fd4\u56de YIELD \u5b50\u53e5\u4e2d\u6307\u5b9a\u7684\u4fe1\u606f\u3002 FETCH \u8bed\u53e5\u53ef\u4ee5\u83b7\u5f97\u70b9\u6216\u8fb9\u7684\u5c5e\u6027\u3002 LOOKUP \u8bed\u53e5\u662f\u57fa\u4e8e \u7d22\u5f15 \u7684\uff0c\u548c WHERE \u5b50\u53e5\u4e00\u8d77\u4f7f\u7528\uff0c\u67e5\u627e\u7b26\u5408\u7279\u5b9a\u6761\u4ef6\u7684\u6570\u636e\u3002 MATCH \u8bed\u53e5\u662f\u67e5\u8be2\u56fe\u6570\u636e\u6700\u5e38\u7528\u7684\uff0c\u53ef\u4ee5\u7075\u6d3b\u7684\u63cf\u8ff0\u5404\u79cd\u56fe\u6a21\u5f0f\uff0c\u4f46\u662f\u5b83\u4f9d\u8d56 \u7d22\u5f15 \u53bb\u5339\u914dNebulaGraph\u4e2d\u7684\u6570\u636e\u6a21\u578b\uff0c\u6027\u80fd\u4e5f\u8fd8\u9700\u8981\u8c03\u4f18\u3002 nGQL \u8bed\u6cd5 \u00b6 GO GO [[<M> TO] <N> {STEP|STEPS}] FROM <vertex_list> OVER <edge_type_list> [{REVERSELY | BIDIRECT}] [ WHERE <conditions> ] YIELD [DISTINCT] <return_list> [{ SAMPLE <sample_list> | <limit_by_list_clause> }] [| GROUP BY {<col_name> | expression> | <position>} YIELD <col_name>] [| ORDER BY <expression> [{ASC | DESC}]] [| LIMIT [<offset>,] <number_rows>]; FETCH \u67e5\u8be2 Tag \u5c5e\u6027 FETCH PROP ON {<tag_name>[, tag_name ...] | *} <vid> [, vid ...] YIELD <return_list> [AS <alias>]; \u67e5\u8be2\u8fb9\u5c5e\u6027 FETCH PROP ON <edge_type> <src_vid> -> <dst_vid>[@<rank>] [, <src_vid> -> <dst_vid> ...] YIELD <output>; LOOKUP LOOKUP ON {<vertex_tag> | <edge_type>} [WHERE <expression> [AND <expression> ...]] YIELD <return_list> [AS <alias>]; <return_list> <prop_name> [AS <col_alias>] [, <prop_name> [AS <prop_alias>] ...]; MATCH MATCH <pattern> [<clause_1>] RETURN <output> [<clause_2>]; GO \u8bed\u53e5\u793a\u4f8b \u00b6 \u4ece VID \u4e3a player101 \u7684\u7403\u5458\u5f00\u59cb\uff0c\u6cbf\u7740\u8fb9 follow \u627e\u5230\u8fde\u63a5\u7684\u7403\u5458\u3002 nebula> GO FROM \"player101\" OVER follow YIELD id($$); +-------------+ | id($$) | +-------------+ | \"player100\" | | \"player102\" | +-------------+ \u4ece VID \u4e3a player101 \u7684\u7403\u5458\u5f00\u59cb\uff0c\u6cbf\u7740\u8fb9 follow \u67e5\u627e\u5e74\u9f84\u5927\u4e8e\u6216\u7b49\u4e8e 35 \u5c81\u7684\u7403\u5458\uff0c\u5e76\u8fd4\u56de\u4ed6\u4eec\u7684\u59d3\u540d\u548c\u5e74\u9f84\uff0c\u540c\u65f6\u91cd\u547d\u540d\u5bf9\u5e94\u7684\u5217\u3002 nebula> GO FROM \"player101\" OVER follow WHERE properties($$).age >= 35 \\ YIELD properties($$).name AS Teammate, properties($$).age AS Age; +-----------------+-----+ | Teammate | Age | +-----------------+-----+ | \"Tim Duncan\" | 42 | +-----------------+-----+ \u5b50\u53e5/\u7b26\u53f7 \u8bf4\u660e YIELD \u6307\u5b9a\u8be5\u67e5\u8be2\u9700\u8981\u8fd4\u56de\u7684\u503c\u6216\u7ed3\u679c\u3002 $$ \u8868\u793a\u8fb9\u7684\u7ec8\u70b9\u3002 \\ \u8868\u793a\u6362\u884c\u7ee7\u7eed\u8f93\u5165\u3002 \u4ece VID \u4e3a player101 \u7684\u7403\u5458\u5f00\u59cb\uff0c\u6cbf\u7740\u8fb9 follow \u67e5\u627e\u8fde\u63a5\u7684\u7403\u5458\uff0c\u7136\u540e\u68c0\u7d22\u8fd9\u4e9b\u7403\u5458\u7684\u7403\u961f\u3002\u4e3a\u4e86\u5408\u5e76\u8fd9\u4e24\u4e2a\u67e5\u8be2\u8bf7\u6c42\uff0c\u53ef\u4ee5\u4f7f\u7528\u7ba1\u9053\u7b26\u6216\u4e34\u65f6\u53d8\u91cf\u3002 \u4f7f\u7528\u7ba1\u9053\u7b26 nebula> GO FROM \"player101\" OVER follow YIELD dst(edge) AS id | \\ GO FROM $-.id OVER serve YIELD properties($$).name AS Team, \\ properties($^).name AS Player; +-----------------+---------------------+ | Team | Player | +-----------------+---------------------+ | \"Trail Blazers\" | \"LaMarcus Aldridge\" | +-----------------+---------------------+ \u5b50\u53e5/\u7b26\u53f7 \u8bf4\u660e $^ \u8868\u793a\u8fb9\u7684\u8d77\u70b9\u3002 | \u7ec4\u5408\u591a\u4e2a\u67e5\u8be2\u7684\u7ba1\u9053\u7b26\uff0c\u5c06\u524d\u4e00\u4e2a\u67e5\u8be2\u7684\u7ed3\u679c\u96c6\u7528\u4e8e\u540e\u4e00\u4e2a\u67e5\u8be2\u3002 $- \u8868\u793a\u7ba1\u9053\u7b26\u524d\u9762\u7684\u67e5\u8be2\u8f93\u51fa\u7684\u7ed3\u679c\u96c6\u3002 \u4f7f\u7528\u4e34\u65f6\u53d8\u91cf Note \u5f53\u590d\u5408\u8bed\u53e5\u4f5c\u4e3a\u4e00\u4e2a\u6574\u4f53\u63d0\u4ea4\u7ed9\u670d\u52a1\u5668\u65f6\uff0c\u5176\u4e2d\u7684\u4e34\u65f6\u53d8\u91cf\u4f1a\u5728\u8bed\u53e5\u7ed3\u675f\u65f6\u88ab\u91ca\u653e\u3002 nebula> $var = GO FROM \"player101\" OVER follow YIELD dst(edge) AS id; \\ GO FROM $var.id OVER serve YIELD properties($$).name AS Team, \\ properties($^).name AS Player; +-----------------+---------------------+ | Team | Player | +-----------------+---------------------+ | \"Trail Blazers\" | \"LaMarcus Aldridge\" | +-----------------+---------------------+ FETCH \u8bed\u53e5\u793a\u4f8b \u00b6 \u67e5\u8be2 VID \u4e3a player100 \u7684\u7403\u5458\u7684\u5c5e\u6027\u3002 nebula> FETCH PROP ON player \"player100\" YIELD properties(vertex); +-------------------------------+ | properties(VERTEX) | +-------------------------------+ | {age: 42, name: \"Tim Duncan\"} | +-------------------------------+ Note LOOKUP \u548c MATCH \u7684\u793a\u4f8b\u5728\u4e0b\u6587\u7684 \u7d22\u5f15 \u90e8\u5206\u67e5\u770b\u3002 \u5176\u4ed6\u64cd\u4f5c \u00b6 \u4fee\u6539\u70b9\u548c\u8fb9 \u00b6 \u7528\u6237\u53ef\u4ee5\u4f7f\u7528 UPDATE \u8bed\u53e5\u6216 UPSERT \u8bed\u53e5\u4fee\u6539\u73b0\u6709\u6570\u636e\u3002 UPSERT \u662f UPDATE \u548c INSERT \u7684\u7ed3\u5408\u4f53\u3002\u5f53\u4f7f\u7528 UPSERT \u66f4\u65b0\u4e00\u4e2a\u70b9\u6216\u8fb9\uff0c\u5982\u679c\u5b83\u4e0d\u5b58\u5728\uff0c\u6570\u636e\u5e93\u4f1a\u81ea\u52a8\u63d2\u5165\u4e00\u4e2a\u65b0\u7684\u70b9\u6216\u8fb9\u3002 Note \u6bcf\u4e2a partition \u5185\u90e8\uff0c UPSERT \u64cd\u4f5c\u662f\u4e00\u4e2a\u4e32\u884c\u64cd\u4f5c\uff0c\u6240\u4ee5\u6267\u884c\u901f\u5ea6\u6bd4\u6267\u884c INSERT \u6216 UPDATE \u6162\u5f88\u591a\u3002\u5176\u4ec5\u5728\u591a\u4e2a partition \u4e4b\u95f4\u6709\u5e76\u53d1\u3002 nGQL \u8bed\u6cd5 \u00b6 UPDATE \u70b9 UPDATE VERTEX <vid> SET <properties to be updated> [WHEN <condition>] [YIELD <columns>]; UPDATE \u8fb9 UPDATE EDGE ON <edge_type> <source vid> -> <destination vid> [@rank] SET <properties to be updated> [WHEN <condition>] [YIELD <columns to be output>]; UPSERT \u70b9\u6216\u8fb9 UPSERT {VERTEX <vid> | EDGE <edge_type>} SET <update_columns> [WHEN <condition>] [YIELD <columns>]; \u793a\u4f8b \u00b6 \u7528 UPDATE \u4fee\u6539 VID \u4e3a player100 \u7684\u7403\u5458\u7684 name \u5c5e\u6027\uff0c\u7136\u540e\u7528 FETCH \u8bed\u53e5\u68c0\u67e5\u7ed3\u679c\u3002 nebula> UPDATE VERTEX \"player100\" SET player.name = \"Tim\"; nebula> FETCH PROP ON player \"player100\" YIELD properties(vertex); +------------------------+ | properties(VERTEX) | +------------------------+ | {age: 42, name: \"Tim\"} | +------------------------+ \u7528 UPDATE \u4fee\u6539\u67d0\u6761\u8fb9\u7684 degree \u5c5e\u6027\uff0c\u7136\u540e\u7528 FETCH \u68c0\u67e5\u7ed3\u679c\u3002 nebula> UPDATE EDGE ON follow \"player101\" -> \"player100\" SET degree = 96; nebula> FETCH PROP ON follow \"player101\" -> \"player100\" YIELD properties(edge); +------------------+ | properties(EDGE) | +------------------+ | {degree: 96} | +------------------+ \u7528 INSERT \u63d2\u5165\u4e00\u4e2a VID \u4e3a player111 \u7684\u70b9\uff0c\u7136\u540e\u7528 UPSERT \u66f4\u65b0\u5b83\u3002 nebula> INSERT VERTEX player(name,age) VALUES \"player111\":(\"David West\", 38); nebula> UPSERT VERTEX \"player111\" SET player.name = \"David\", player.age = $^.player.age + 11 \\ WHEN $^.player.name == \"David West\" AND $^.player.age > 20 \\ YIELD $^.player.name AS Name, $^.player.age AS Age; +---------+-----+ | Name | Age | +---------+-----+ | \"David\" | 49 | +---------+-----+ \u5220\u9664\u70b9\u548c\u8fb9 \u00b6 nGQL \u8bed\u6cd5 \u00b6 \u5220\u9664\u70b9 DELETE VERTEX <vid1>[, <vid2>...] \u5220\u9664\u8fb9 DELETE EDGE <edge_type> <src_vid> -> <dst_vid>[@<rank>] [, <src_vid> -> <dst_vid>...] \u793a\u4f8b \u00b6 \u5220\u9664\u70b9 nebula> DELETE VERTEX \"player111\", \"team203\"; \u5220\u9664\u8fb9 nebula> DELETE EDGE follow \"player101\" -> \"team204\"; \u4f7f\u7528\u7d22\u5f15 \u00b6 \u7528\u6237\u53ef\u4ee5\u901a\u8fc7 CREATE INDEX \u8bed\u53e5\u4e3a Tag \u548c Edge type \u589e\u52a0\u7d22\u5f15\u3002 \u4f7f\u7528\u7d22\u5f15\u5fc5\u8bfb MATCH \u548c LOOKUP \u8bed\u53e5\u7684\u6267\u884c\u90fd\u4f9d\u8d56\u7d22\u5f15\uff0c\u4f46\u662f\u7d22\u5f15\u4f1a\u5bfc\u81f4\u5199\u6027\u80fd\u5927\u5e45\u964d\u4f4e \u3002\u8bf7 \u4e0d\u8981\u968f\u610f \u5728\u751f\u4ea7\u73af\u5883\u4e2d\u4f7f\u7528\u7d22\u5f15\uff0c\u9664\u975e\u5f88\u6e05\u695a\u4f7f\u7528\u7d22\u5f15\u5bf9\u4e1a\u52a1\u7684\u5f71\u54cd\u3002 \u5fc5\u987b \u4e3a\u201c\u5df2\u5199\u5165\u4f46\u672a\u6784\u5efa\u7d22\u5f15\u201d\u7684\u6570\u636e\u91cd\u5efa\u7d22\u5f15\uff0c\u5426\u5219\u65e0\u6cd5\u5728 MATCH \u548c LOOKUP \u8bed\u53e5\u4e2d\u8fd4\u56de\u8fd9\u4e9b\u6570\u636e\u3002\u53c2\u89c1 \u91cd\u5efa\u7d22\u5f15 \u3002 nGQL \u8bed\u6cd5 \u00b6 \u521b\u5efa\u7d22\u5f15 CREATE {TAG | EDGE} INDEX [IF NOT EXISTS] <index_name> ON {<tag_name> | <edge_name>} ([<prop_name_list>]) [COMMENT = '<comment>']; \u91cd\u5efa\u7d22\u5f15 REBUILD {TAG | EDGE} INDEX <index_name>; Note \u4e3a\u6ca1\u6709\u6307\u5b9a\u957f\u5ea6\u7684\u53d8\u91cf\u5c5e\u6027\u521b\u5efa\u7d22\u5f15\u65f6\uff0c\u9700\u8981\u6307\u5b9a\u7d22\u5f15\u957f\u5ea6\u3002\u5728 utf-8 \u7f16\u7801\u4e2d\uff0c\u4e00\u4e2a\u4e2d\u6587\u5b57\u7b26\u5360 3 \u5b57\u8282\uff0c\u8bf7\u6839\u636e\u53d8\u91cf\u5c5e\u6027\u957f\u5ea6\u8bbe\u7f6e\u5408\u9002\u7684\u7d22\u5f15\u957f\u5ea6\u3002\u4f8b\u5982 10 \u4e2a\u4e2d\u6587\u5b57\u7b26\uff0c\u7d22\u5f15\u957f\u5ea6\u9700\u8981\u4e3a 30\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1 \u521b\u5efa\u7d22\u5f15 \u3002 \u57fa\u4e8e\u7d22\u5f15\u7684 LOOKUP \u548c MATCH \u793a\u4f8b \u00b6 \u786e\u4fdd LOOKUP \u6216 MATCH \u6709\u4e00\u4e2a\u7d22\u5f15\u53ef\u7528\u3002\u5982\u679c\u6ca1\u6709\uff0c\u8bf7\u5148\u521b\u5efa\u7d22\u5f15\u3002 \u627e\u5230 Tag \u4e3a player \u7684\u70b9\u7684\u4fe1\u606f\uff0c\u5b83\u7684 name \u5c5e\u6027\u503c\u4e3a Tony Parker \u3002 // \u4e3a name \u5c5e\u6027\u521b\u5efa\u7d22\u5f15 player_index_1\u3002 nebula> CREATE TAG INDEX IF NOT EXISTS player_index_1 ON player(name(20)); // \u91cd\u5efa\u7d22\u5f15\u786e\u4fdd\u80fd\u5bf9\u5df2\u5b58\u5728\u6570\u636e\u751f\u6548\u3002 nebula> REBUILD TAG INDEX player_index_1 +------------+ | New Job Id | +------------+ | 31 | +------------+ // \u4f7f\u7528 LOOKUP \u8bed\u53e5\u68c0\u7d22\u70b9\u7684\u5c5e\u6027\u3002 nebula> LOOKUP ON player WHERE player.name == \"Tony Parker\" \\ YIELD properties(vertex).name AS name, properties(vertex).age AS age; +---------------+-----+ | name | age | +---------------+-----+ | \"Tony Parker\" | 36 | +---------------+-----+ // \u4f7f\u7528 MATCH \u8bed\u53e5\u68c0\u7d22\u70b9\u7684\u5c5e\u6027\u3002 nebula> MATCH (v:player{name:\"Tony Parker\"}) RETURN v; +-----------------------------------------------------+ | v | +-----------------------------------------------------+ | (\"player101\" :player{age: 36, name: \"Tony Parker\"}) | +-----------------------------------------------------+","title":"Source ngql for quick start"},{"location":"reuse/source_ngql_for_quick_start/#_1","text":"","title":"\u4f7f\u7528\u8bf4\u660e"},{"location":"reuse/source_ngql_for_quick_start/#schema","text":"\u4e00\u4e2aNebulaGraph\u5b9e\u4f8b\u7531\u4e00\u4e2a\u6216\u591a\u4e2a\u56fe\u7a7a\u95f4\u7ec4\u6210\u3002\u6bcf\u4e2a\u56fe\u7a7a\u95f4\u90fd\u662f\u7269\u7406\u9694\u79bb\u7684\uff0c\u7528\u6237\u53ef\u4ee5\u5728\u540c\u4e00\u4e2a\u5b9e\u4f8b\u4e2d\u4f7f\u7528\u4e0d\u540c\u7684\u56fe\u7a7a\u95f4\u5b58\u50a8\u4e0d\u540c\u7684\u6570\u636e\u96c6\u3002 \u4e3a\u4e86\u5728\u56fe\u7a7a\u95f4\u4e2d\u63d2\u5165\u6570\u636e\uff0c\u9700\u8981\u4e3a\u56fe\u6570\u636e\u5e93\u5b9a\u4e49\u4e00\u4e2a Schema\u3002NebulaGraph\u7684 Schema \u662f\u7531\u5982\u4e0b\u51e0\u90e8\u5206\u7ec4\u6210\u3002 \u7ec4\u6210\u90e8\u5206 \u8bf4\u660e \u70b9\uff08Vertex\uff09 \u8868\u793a\u73b0\u5b9e\u4e16\u754c\u4e2d\u7684\u5b9e\u4f53\u3002\u4e00\u4e2a\u70b9\u53ef\u4ee5\u6709 0 \u5230\u591a\u4e2a\u6807\u7b7e\u3002 \u6807\u7b7e\uff08Tag\uff09 \u70b9\u7684\u7c7b\u578b\uff0c\u5b9a\u4e49\u4e86\u4e00\u7ec4\u63cf\u8ff0\u70b9\u7c7b\u578b\u7684\u5c5e\u6027\u3002 \u8fb9\uff08Edge\uff09 \u8868\u793a\u4e24\u4e2a\u70b9\u4e4b\u95f4 \u6709\u65b9\u5411 \u7684\u5173\u7cfb\u3002 \u8fb9\u7c7b\u578b\uff08Edge type\uff09 \u8fb9\u7684\u7c7b\u578b\uff0c\u5b9a\u4e49\u4e86\u4e00\u7ec4\u63cf\u8ff0\u8fb9\u7684\u7c7b\u578b\u7684\u5c5e\u6027\u3002 \u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u89c1 \u6570\u636e\u7ed3\u6784 \u3002 \u672c\u6587\u5c06\u4f7f\u7528\u4e0b\u56fe\u7684\u6570\u636e\u96c6\u6f14\u793a\u57fa\u7840\u64cd\u4f5c\u7684\u8bed\u6cd5\u3002","title":"\u56fe\u7a7a\u95f4\u548c Schema"},{"location":"reuse/source_ngql_for_quick_start/#_2","text":"Caution \u5728NebulaGraph\u4e2d\uff0c\u4e0b\u5217\u521b\u5efa\u548c\u4fee\u6539\u64cd\u4f5c\u662f\u5f02\u6b65\u5b9e\u73b0\u7684\u3002\u8981\u5728 \u4e0b\u4e00\u4e2a \u5fc3\u8df3\u5468\u671f\u4e4b\u540e\u624d\u80fd\u751f\u6548\uff0c\u5426\u5219\u8bbf\u95ee\u4f1a\u62a5\u9519\u3002\u4e3a\u786e\u4fdd\u6570\u636e\u540c\u6b65\uff0c\u540e\u7eed\u64cd\u4f5c\u80fd\u987a\u5229\u8fdb\u884c\uff0c\u8bf7\u7b49\u5f85 2 \u4e2a\u5fc3\u8df3\u5468\u671f\uff0820 \u79d2\uff09\u3002 CREATE SPACE CREATE TAG CREATE EDGE ALTER TAG ALTER EDGE CREATE TAG INDEX CREATE EDGE INDEX Note \u9ed8\u8ba4\u5fc3\u8df3\u5468\u671f\u662f 10 \u79d2\u3002\u4fee\u6539\u5fc3\u8df3\u5468\u671f\u53c2\u6570 heartbeat_interval_secs \uff0c\u8bf7\u53c2\u89c1 \u914d\u7f6e\u7b80\u4ecb \u3002","title":"\u5f02\u6b65\u5b9e\u73b0\u521b\u5efa\u548c\u4fee\u6539"},{"location":"reuse/source_ngql_for_quick_start/#_3","text":"","title":"\u7b2c\u4e00\u6b65\uff1a\u521b\u5efa\u548c\u9009\u62e9\u56fe\u7a7a\u95f4"},{"location":"reuse/source_ngql_for_quick_start/#ngql","text":"\u521b\u5efa\u56fe\u7a7a\u95f4 CREATE SPACE [IF NOT EXISTS] <graph_space_name> ( [partition_num = <partition_number>,] [replica_factor = <replica_number>,] vid_type = {FIXED_STRING(<N>) | INT64} ) [COMMENT = '<comment>']; \u53c2\u6570\u8be6\u60c5\u8bf7\u53c2\u89c1 CREATE SPACE \u3002 \u5217\u51fa\u521b\u5efa\u6210\u529f\u7684\u56fe\u7a7a\u95f4 nebula> SHOW SPACES; \u9009\u62e9\u6570\u636e\u5e93 USE <graph_space_name>;","title":"nGQL \u8bed\u6cd5"},{"location":"reuse/source_ngql_for_quick_start/#_4","text":"\u6267\u884c\u5982\u4e0b\u8bed\u53e5\u521b\u5efa\u540d\u4e3a basketballplayer \u7684\u56fe\u7a7a\u95f4\u3002 nebula> CREATE SPACE basketballplayer(partition_num=15, replica_factor=1, vid_type=fixed_string(30)); Note \u5982\u679c\u62a5\u9519\u63d0\u793a [ERROR (-1005)]: Host not enough! \uff0c\u8bf7\u68c0\u67e5\u662f\u5426\u5df2 \u6dfb\u52a0 Storage \u4e3b\u673a \u3002 \u6267\u884c\u547d\u4ee4 SHOW HOSTS \u68c0\u67e5\u5206\u7247\u7684\u5206\u5e03\u60c5\u51b5\uff0c\u786e\u4fdd\u5e73\u8861\u5206\u5e03\u3002 nebula> SHOW HOSTS; +-------------+-----------+-----------+--------------+----------------------------------+------------------------+---------+ | Host | Port | Status | Leader count | Leader distribution | Partition distribution | Version | +-------------+-----------+-----------+--------------+----------------------------------+------------------------+---------+ | \"storaged0\" | 9779 | \"ONLINE\" | 5 | \"basketballplayer:5\" | \"basketballplayer:5\" | \"3.6.0\" | | \"storaged1\" | 9779 | \"ONLINE\" | 5 | \"basketballplayer:5\" | \"basketballplayer:5\" | \"3.6.0\" | | \"storaged2\" | 9779 | \"ONLINE\" | 5 | \"basketballplayer:5\" | \"basketballplayer:5\" | \"3.6.0\" | +-------------+-----------+-----------+--------------+----------------------------------+------------------------+---------+ \u5982\u679c Leader distribution \u5206\u5e03\u4e0d\u5747\u5300\uff0c\u8bf7\u6267\u884c\u547d\u4ee4 BALANCE LEADER \u91cd\u65b0\u5206\u914d\u3002\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u89c1 Storage \u8d1f\u8f7d\u5747\u8861 \u3002 \u9009\u62e9\u56fe\u7a7a\u95f4 basketballplayer \u3002 nebula[(none)]> USE basketballplayer; \u7528\u6237\u53ef\u4ee5\u6267\u884c\u547d\u4ee4 SHOW SPACES \u67e5\u770b\u521b\u5efa\u7684\u56fe\u7a7a\u95f4\u3002 nebula> SHOW SPACES; +--------------------+ | Name | +--------------------+ | \"basketballplayer\" | +--------------------+","title":"\u793a\u4f8b"},{"location":"reuse/source_ngql_for_quick_start/#tag_edge_type","text":"","title":"\u7b2c\u4e8c\u6b65\uff1a\u521b\u5efa Tag \u548c Edge type"},{"location":"reuse/source_ngql_for_quick_start/#ngql_1","text":"CREATE {TAG | EDGE} [IF NOT EXISTS] {<tag_name> | <edge_type_name>} ( <prop_name> <data_type> [NULL | NOT NULL] [DEFAULT <default_value>] [COMMENT '<comment>'] [{, <prop_name> <data_type> [NULL | NOT NULL] [DEFAULT <default_value>] [COMMENT '<comment>']} ...] ) [TTL_DURATION = <ttl_duration>] [TTL_COL = <prop_name>] [COMMENT = '<comment>']; \u53c2\u6570\u8be6\u60c5\u8bf7\u53c2\u89c1 CREATE TAG \u548c CREATE EDGE \u3002","title":"nGQL \u8bed\u6cd5"},{"location":"reuse/source_ngql_for_quick_start/#_5","text":"\u521b\u5efa Tag: player \u548c team \uff0c\u4ee5\u53ca Edge type: follow \u548c serve \u3002\u8bf4\u660e\u5982\u4e0b\u8868\u3002 \u540d\u79f0 \u7c7b\u578b \u5c5e\u6027 player Tag name (string), age (int) team Tag name (string) follow Edge type degree (int) serve Edge type start_year (int), end_year (int) nebula> CREATE TAG player(name string, age int); nebula> CREATE TAG team(name string); nebula> CREATE EDGE follow(degree int); nebula> CREATE EDGE serve(start_year int, end_year int);","title":"\u793a\u4f8b"},{"location":"reuse/source_ngql_for_quick_start/#_6","text":"\u7528\u6237\u53ef\u4ee5\u4f7f\u7528 INSERT \u8bed\u53e5\uff0c\u57fa\u4e8e\u73b0\u6709\u7684 Tag \u63d2\u5165\u70b9\uff0c\u6216\u8005\u57fa\u4e8e\u73b0\u6709\u7684 Edge type \u63d2\u5165\u8fb9\u3002","title":"\u7b2c\u4e09\u6b65\uff1a\u63d2\u5165\u6570\u636e"},{"location":"reuse/source_ngql_for_quick_start/#ngql_2","text":"\u63d2\u5165\u70b9 INSERT VERTEX [IF NOT EXISTS] [tag_props, [tag_props] ...] VALUES <vid>: ([prop_value_list]) tag_props: tag_name ([prop_name_list]) prop_name_list: [prop_name [, prop_name] ...] prop_value_list: [prop_value [, prop_value] ...] vid \u662f Vertex ID \u7684\u7f29\u5199\uff0c vid \u5728\u4e00\u4e2a\u56fe\u7a7a\u95f4\u4e2d\u662f\u552f\u4e00\u7684\u3002\u53c2\u6570\u8be6\u60c5\u8bf7\u53c2\u89c1 INSERT VERTEX \u3002 \u63d2\u5165\u8fb9 INSERT EDGE [IF NOT EXISTS] <edge_type> ( <prop_name_list> ) VALUES <src_vid> -> <dst_vid>[@<rank>] : ( <prop_value_list> ) [, <src_vid> -> <dst_vid>[@<rank>] : ( <prop_value_list> ), ...]; <prop_name_list> ::= [ <prop_name> [, <prop_name> ] ...] <prop_value_list> ::= [ <prop_value> [, <prop_value> ] ...] \u53c2\u6570\u8be6\u60c5\u8bf7\u53c2\u89c1 INSERT EDGE \u3002","title":"nGQL \u8bed\u6cd5"},{"location":"reuse/source_ngql_for_quick_start/#_7","text":"\u63d2\u5165\u4ee3\u8868\u7403\u5458\u548c\u7403\u961f\u7684\u70b9\u3002 nebula> INSERT VERTEX player(name, age) VALUES \"player100\":(\"Tim Duncan\", 42); nebula> INSERT VERTEX player(name, age) VALUES \"player101\":(\"Tony Parker\", 36); nebula> INSERT VERTEX player(name, age) VALUES \"player102\":(\"LaMarcus Aldridge\", 33); nebula> INSERT VERTEX team(name) VALUES \"team203\":(\"Trail Blazers\"), \"team204\":(\"Spurs\"); \u63d2\u5165\u4ee3\u8868\u7403\u5458\u548c\u7403\u961f\u4e4b\u95f4\u5173\u7cfb\u7684\u8fb9\u3002 nebula> INSERT EDGE follow(degree) VALUES \"player101\" -> \"player100\":(95); nebula> INSERT EDGE follow(degree) VALUES \"player101\" -> \"player102\":(90); nebula> INSERT EDGE follow(degree) VALUES \"player102\" -> \"player100\":(75); nebula> INSERT EDGE serve(start_year, end_year) VALUES \"player101\" -> \"team204\":(1999, 2018),\"player102\" -> \"team203\":(2006, 2015);","title":"\u793a\u4f8b"},{"location":"reuse/source_ngql_for_quick_start/#_8","text":"GO \u8bed\u53e5\u53ef\u4ee5\u6839\u636e\u6307\u5b9a\u7684\u6761\u4ef6\u904d\u5386\u6570\u636e\u5e93\u3002 GO \u8bed\u53e5\u4ece\u4e00\u4e2a\u6216\u591a\u4e2a\u70b9\u5f00\u59cb\uff0c\u6cbf\u7740\u4e00\u6761\u6216\u591a\u6761\u8fb9\u904d\u5386\uff0c\u8fd4\u56de YIELD \u5b50\u53e5\u4e2d\u6307\u5b9a\u7684\u4fe1\u606f\u3002 FETCH \u8bed\u53e5\u53ef\u4ee5\u83b7\u5f97\u70b9\u6216\u8fb9\u7684\u5c5e\u6027\u3002 LOOKUP \u8bed\u53e5\u662f\u57fa\u4e8e \u7d22\u5f15 \u7684\uff0c\u548c WHERE \u5b50\u53e5\u4e00\u8d77\u4f7f\u7528\uff0c\u67e5\u627e\u7b26\u5408\u7279\u5b9a\u6761\u4ef6\u7684\u6570\u636e\u3002 MATCH \u8bed\u53e5\u662f\u67e5\u8be2\u56fe\u6570\u636e\u6700\u5e38\u7528\u7684\uff0c\u53ef\u4ee5\u7075\u6d3b\u7684\u63cf\u8ff0\u5404\u79cd\u56fe\u6a21\u5f0f\uff0c\u4f46\u662f\u5b83\u4f9d\u8d56 \u7d22\u5f15 \u53bb\u5339\u914dNebulaGraph\u4e2d\u7684\u6570\u636e\u6a21\u578b\uff0c\u6027\u80fd\u4e5f\u8fd8\u9700\u8981\u8c03\u4f18\u3002","title":"\u7b2c\u56db\u6b65\uff1a\u67e5\u8be2\u6570\u636e"},{"location":"reuse/source_ngql_for_quick_start/#ngql_3","text":"GO GO [[<M> TO] <N> {STEP|STEPS}] FROM <vertex_list> OVER <edge_type_list> [{REVERSELY | BIDIRECT}] [ WHERE <conditions> ] YIELD [DISTINCT] <return_list> [{ SAMPLE <sample_list> | <limit_by_list_clause> }] [| GROUP BY {<col_name> | expression> | <position>} YIELD <col_name>] [| ORDER BY <expression> [{ASC | DESC}]] [| LIMIT [<offset>,] <number_rows>]; FETCH \u67e5\u8be2 Tag \u5c5e\u6027 FETCH PROP ON {<tag_name>[, tag_name ...] | *} <vid> [, vid ...] YIELD <return_list> [AS <alias>]; \u67e5\u8be2\u8fb9\u5c5e\u6027 FETCH PROP ON <edge_type> <src_vid> -> <dst_vid>[@<rank>] [, <src_vid> -> <dst_vid> ...] YIELD <output>; LOOKUP LOOKUP ON {<vertex_tag> | <edge_type>} [WHERE <expression> [AND <expression> ...]] YIELD <return_list> [AS <alias>]; <return_list> <prop_name> [AS <col_alias>] [, <prop_name> [AS <prop_alias>] ...]; MATCH MATCH <pattern> [<clause_1>] RETURN <output> [<clause_2>];","title":"nGQL \u8bed\u6cd5"},{"location":"reuse/source_ngql_for_quick_start/#go","text":"\u4ece VID \u4e3a player101 \u7684\u7403\u5458\u5f00\u59cb\uff0c\u6cbf\u7740\u8fb9 follow \u627e\u5230\u8fde\u63a5\u7684\u7403\u5458\u3002 nebula> GO FROM \"player101\" OVER follow YIELD id($$); +-------------+ | id($$) | +-------------+ | \"player100\" | | \"player102\" | +-------------+ \u4ece VID \u4e3a player101 \u7684\u7403\u5458\u5f00\u59cb\uff0c\u6cbf\u7740\u8fb9 follow \u67e5\u627e\u5e74\u9f84\u5927\u4e8e\u6216\u7b49\u4e8e 35 \u5c81\u7684\u7403\u5458\uff0c\u5e76\u8fd4\u56de\u4ed6\u4eec\u7684\u59d3\u540d\u548c\u5e74\u9f84\uff0c\u540c\u65f6\u91cd\u547d\u540d\u5bf9\u5e94\u7684\u5217\u3002 nebula> GO FROM \"player101\" OVER follow WHERE properties($$).age >= 35 \\ YIELD properties($$).name AS Teammate, properties($$).age AS Age; +-----------------+-----+ | Teammate | Age | +-----------------+-----+ | \"Tim Duncan\" | 42 | +-----------------+-----+ \u5b50\u53e5/\u7b26\u53f7 \u8bf4\u660e YIELD \u6307\u5b9a\u8be5\u67e5\u8be2\u9700\u8981\u8fd4\u56de\u7684\u503c\u6216\u7ed3\u679c\u3002 $$ \u8868\u793a\u8fb9\u7684\u7ec8\u70b9\u3002 \\ \u8868\u793a\u6362\u884c\u7ee7\u7eed\u8f93\u5165\u3002 \u4ece VID \u4e3a player101 \u7684\u7403\u5458\u5f00\u59cb\uff0c\u6cbf\u7740\u8fb9 follow \u67e5\u627e\u8fde\u63a5\u7684\u7403\u5458\uff0c\u7136\u540e\u68c0\u7d22\u8fd9\u4e9b\u7403\u5458\u7684\u7403\u961f\u3002\u4e3a\u4e86\u5408\u5e76\u8fd9\u4e24\u4e2a\u67e5\u8be2\u8bf7\u6c42\uff0c\u53ef\u4ee5\u4f7f\u7528\u7ba1\u9053\u7b26\u6216\u4e34\u65f6\u53d8\u91cf\u3002 \u4f7f\u7528\u7ba1\u9053\u7b26 nebula> GO FROM \"player101\" OVER follow YIELD dst(edge) AS id | \\ GO FROM $-.id OVER serve YIELD properties($$).name AS Team, \\ properties($^).name AS Player; +-----------------+---------------------+ | Team | Player | +-----------------+---------------------+ | \"Trail Blazers\" | \"LaMarcus Aldridge\" | +-----------------+---------------------+ \u5b50\u53e5/\u7b26\u53f7 \u8bf4\u660e $^ \u8868\u793a\u8fb9\u7684\u8d77\u70b9\u3002 | \u7ec4\u5408\u591a\u4e2a\u67e5\u8be2\u7684\u7ba1\u9053\u7b26\uff0c\u5c06\u524d\u4e00\u4e2a\u67e5\u8be2\u7684\u7ed3\u679c\u96c6\u7528\u4e8e\u540e\u4e00\u4e2a\u67e5\u8be2\u3002 $- \u8868\u793a\u7ba1\u9053\u7b26\u524d\u9762\u7684\u67e5\u8be2\u8f93\u51fa\u7684\u7ed3\u679c\u96c6\u3002 \u4f7f\u7528\u4e34\u65f6\u53d8\u91cf Note \u5f53\u590d\u5408\u8bed\u53e5\u4f5c\u4e3a\u4e00\u4e2a\u6574\u4f53\u63d0\u4ea4\u7ed9\u670d\u52a1\u5668\u65f6\uff0c\u5176\u4e2d\u7684\u4e34\u65f6\u53d8\u91cf\u4f1a\u5728\u8bed\u53e5\u7ed3\u675f\u65f6\u88ab\u91ca\u653e\u3002 nebula> $var = GO FROM \"player101\" OVER follow YIELD dst(edge) AS id; \\ GO FROM $var.id OVER serve YIELD properties($$).name AS Team, \\ properties($^).name AS Player; +-----------------+---------------------+ | Team | Player | +-----------------+---------------------+ | \"Trail Blazers\" | \"LaMarcus Aldridge\" | +-----------------+---------------------+","title":"GO\u8bed\u53e5\u793a\u4f8b"},{"location":"reuse/source_ngql_for_quick_start/#fetch","text":"\u67e5\u8be2 VID \u4e3a player100 \u7684\u7403\u5458\u7684\u5c5e\u6027\u3002 nebula> FETCH PROP ON player \"player100\" YIELD properties(vertex); +-------------------------------+ | properties(VERTEX) | +-------------------------------+ | {age: 42, name: \"Tim Duncan\"} | +-------------------------------+ Note LOOKUP \u548c MATCH \u7684\u793a\u4f8b\u5728\u4e0b\u6587\u7684 \u7d22\u5f15 \u90e8\u5206\u67e5\u770b\u3002","title":"FETCH\u8bed\u53e5\u793a\u4f8b"},{"location":"reuse/source_ngql_for_quick_start/#_9","text":"","title":"\u5176\u4ed6\u64cd\u4f5c"},{"location":"reuse/source_ngql_for_quick_start/#_10","text":"\u7528\u6237\u53ef\u4ee5\u4f7f\u7528 UPDATE \u8bed\u53e5\u6216 UPSERT \u8bed\u53e5\u4fee\u6539\u73b0\u6709\u6570\u636e\u3002 UPSERT \u662f UPDATE \u548c INSERT \u7684\u7ed3\u5408\u4f53\u3002\u5f53\u4f7f\u7528 UPSERT \u66f4\u65b0\u4e00\u4e2a\u70b9\u6216\u8fb9\uff0c\u5982\u679c\u5b83\u4e0d\u5b58\u5728\uff0c\u6570\u636e\u5e93\u4f1a\u81ea\u52a8\u63d2\u5165\u4e00\u4e2a\u65b0\u7684\u70b9\u6216\u8fb9\u3002 Note \u6bcf\u4e2a partition \u5185\u90e8\uff0c UPSERT \u64cd\u4f5c\u662f\u4e00\u4e2a\u4e32\u884c\u64cd\u4f5c\uff0c\u6240\u4ee5\u6267\u884c\u901f\u5ea6\u6bd4\u6267\u884c INSERT \u6216 UPDATE \u6162\u5f88\u591a\u3002\u5176\u4ec5\u5728\u591a\u4e2a partition \u4e4b\u95f4\u6709\u5e76\u53d1\u3002","title":"\u4fee\u6539\u70b9\u548c\u8fb9"},{"location":"reuse/source_ngql_for_quick_start/#ngql_4","text":"UPDATE \u70b9 UPDATE VERTEX <vid> SET <properties to be updated> [WHEN <condition>] [YIELD <columns>]; UPDATE \u8fb9 UPDATE EDGE ON <edge_type> <source vid> -> <destination vid> [@rank] SET <properties to be updated> [WHEN <condition>] [YIELD <columns to be output>]; UPSERT \u70b9\u6216\u8fb9 UPSERT {VERTEX <vid> | EDGE <edge_type>} SET <update_columns> [WHEN <condition>] [YIELD <columns>];","title":"nGQL \u8bed\u6cd5"},{"location":"reuse/source_ngql_for_quick_start/#_11","text":"\u7528 UPDATE \u4fee\u6539 VID \u4e3a player100 \u7684\u7403\u5458\u7684 name \u5c5e\u6027\uff0c\u7136\u540e\u7528 FETCH \u8bed\u53e5\u68c0\u67e5\u7ed3\u679c\u3002 nebula> UPDATE VERTEX \"player100\" SET player.name = \"Tim\"; nebula> FETCH PROP ON player \"player100\" YIELD properties(vertex); +------------------------+ | properties(VERTEX) | +------------------------+ | {age: 42, name: \"Tim\"} | +------------------------+ \u7528 UPDATE \u4fee\u6539\u67d0\u6761\u8fb9\u7684 degree \u5c5e\u6027\uff0c\u7136\u540e\u7528 FETCH \u68c0\u67e5\u7ed3\u679c\u3002 nebula> UPDATE EDGE ON follow \"player101\" -> \"player100\" SET degree = 96; nebula> FETCH PROP ON follow \"player101\" -> \"player100\" YIELD properties(edge); +------------------+ | properties(EDGE) | +------------------+ | {degree: 96} | +------------------+ \u7528 INSERT \u63d2\u5165\u4e00\u4e2a VID \u4e3a player111 \u7684\u70b9\uff0c\u7136\u540e\u7528 UPSERT \u66f4\u65b0\u5b83\u3002 nebula> INSERT VERTEX player(name,age) VALUES \"player111\":(\"David West\", 38); nebula> UPSERT VERTEX \"player111\" SET player.name = \"David\", player.age = $^.player.age + 11 \\ WHEN $^.player.name == \"David West\" AND $^.player.age > 20 \\ YIELD $^.player.name AS Name, $^.player.age AS Age; +---------+-----+ | Name | Age | +---------+-----+ | \"David\" | 49 | +---------+-----+","title":"\u793a\u4f8b"},{"location":"reuse/source_ngql_for_quick_start/#_12","text":"","title":"\u5220\u9664\u70b9\u548c\u8fb9"},{"location":"reuse/source_ngql_for_quick_start/#ngql_5","text":"\u5220\u9664\u70b9 DELETE VERTEX <vid1>[, <vid2>...] \u5220\u9664\u8fb9 DELETE EDGE <edge_type> <src_vid> -> <dst_vid>[@<rank>] [, <src_vid> -> <dst_vid>...]","title":"nGQL \u8bed\u6cd5"},{"location":"reuse/source_ngql_for_quick_start/#_13","text":"\u5220\u9664\u70b9 nebula> DELETE VERTEX \"player111\", \"team203\"; \u5220\u9664\u8fb9 nebula> DELETE EDGE follow \"player101\" -> \"team204\";","title":"\u793a\u4f8b"},{"location":"reuse/source_ngql_for_quick_start/#_14","text":"\u7528\u6237\u53ef\u4ee5\u901a\u8fc7 CREATE INDEX \u8bed\u53e5\u4e3a Tag \u548c Edge type \u589e\u52a0\u7d22\u5f15\u3002 \u4f7f\u7528\u7d22\u5f15\u5fc5\u8bfb MATCH \u548c LOOKUP \u8bed\u53e5\u7684\u6267\u884c\u90fd\u4f9d\u8d56\u7d22\u5f15\uff0c\u4f46\u662f\u7d22\u5f15\u4f1a\u5bfc\u81f4\u5199\u6027\u80fd\u5927\u5e45\u964d\u4f4e \u3002\u8bf7 \u4e0d\u8981\u968f\u610f \u5728\u751f\u4ea7\u73af\u5883\u4e2d\u4f7f\u7528\u7d22\u5f15\uff0c\u9664\u975e\u5f88\u6e05\u695a\u4f7f\u7528\u7d22\u5f15\u5bf9\u4e1a\u52a1\u7684\u5f71\u54cd\u3002 \u5fc5\u987b \u4e3a\u201c\u5df2\u5199\u5165\u4f46\u672a\u6784\u5efa\u7d22\u5f15\u201d\u7684\u6570\u636e\u91cd\u5efa\u7d22\u5f15\uff0c\u5426\u5219\u65e0\u6cd5\u5728 MATCH \u548c LOOKUP \u8bed\u53e5\u4e2d\u8fd4\u56de\u8fd9\u4e9b\u6570\u636e\u3002\u53c2\u89c1 \u91cd\u5efa\u7d22\u5f15 \u3002","title":"\u4f7f\u7528\u7d22\u5f15"},{"location":"reuse/source_ngql_for_quick_start/#ngql_6","text":"\u521b\u5efa\u7d22\u5f15 CREATE {TAG | EDGE} INDEX [IF NOT EXISTS] <index_name> ON {<tag_name> | <edge_name>} ([<prop_name_list>]) [COMMENT = '<comment>']; \u91cd\u5efa\u7d22\u5f15 REBUILD {TAG | EDGE} INDEX <index_name>; Note \u4e3a\u6ca1\u6709\u6307\u5b9a\u957f\u5ea6\u7684\u53d8\u91cf\u5c5e\u6027\u521b\u5efa\u7d22\u5f15\u65f6\uff0c\u9700\u8981\u6307\u5b9a\u7d22\u5f15\u957f\u5ea6\u3002\u5728 utf-8 \u7f16\u7801\u4e2d\uff0c\u4e00\u4e2a\u4e2d\u6587\u5b57\u7b26\u5360 3 \u5b57\u8282\uff0c\u8bf7\u6839\u636e\u53d8\u91cf\u5c5e\u6027\u957f\u5ea6\u8bbe\u7f6e\u5408\u9002\u7684\u7d22\u5f15\u957f\u5ea6\u3002\u4f8b\u5982 10 \u4e2a\u4e2d\u6587\u5b57\u7b26\uff0c\u7d22\u5f15\u957f\u5ea6\u9700\u8981\u4e3a 30\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1 \u521b\u5efa\u7d22\u5f15 \u3002","title":"nGQL \u8bed\u6cd5"},{"location":"reuse/source_ngql_for_quick_start/#lookupmatch","text":"\u786e\u4fdd LOOKUP \u6216 MATCH \u6709\u4e00\u4e2a\u7d22\u5f15\u53ef\u7528\u3002\u5982\u679c\u6ca1\u6709\uff0c\u8bf7\u5148\u521b\u5efa\u7d22\u5f15\u3002 \u627e\u5230 Tag \u4e3a player \u7684\u70b9\u7684\u4fe1\u606f\uff0c\u5b83\u7684 name \u5c5e\u6027\u503c\u4e3a Tony Parker \u3002 // \u4e3a name \u5c5e\u6027\u521b\u5efa\u7d22\u5f15 player_index_1\u3002 nebula> CREATE TAG INDEX IF NOT EXISTS player_index_1 ON player(name(20)); // \u91cd\u5efa\u7d22\u5f15\u786e\u4fdd\u80fd\u5bf9\u5df2\u5b58\u5728\u6570\u636e\u751f\u6548\u3002 nebula> REBUILD TAG INDEX player_index_1 +------------+ | New Job Id | +------------+ | 31 | +------------+ // \u4f7f\u7528 LOOKUP \u8bed\u53e5\u68c0\u7d22\u70b9\u7684\u5c5e\u6027\u3002 nebula> LOOKUP ON player WHERE player.name == \"Tony Parker\" \\ YIELD properties(vertex).name AS name, properties(vertex).age AS age; +---------------+-----+ | name | age | +---------------+-----+ | \"Tony Parker\" | 36 | +---------------+-----+ // \u4f7f\u7528 MATCH \u8bed\u53e5\u68c0\u7d22\u70b9\u7684\u5c5e\u6027\u3002 nebula> MATCH (v:player{name:\"Tony Parker\"}) RETURN v; +-----------------------------------------------------+ | v | +-----------------------------------------------------+ | (\"player101\" :player{age: 36, name: \"Tony Parker\"}) | +-----------------------------------------------------+","title":"\u57fa\u4e8e\u7d22\u5f15\u7684LOOKUP\u548cMATCH\u793a\u4f8b"},{"location":"synchronization-and-migration/2.balance-syntax/","text":"\u8d1f\u8f7d\u5747\u8861 \u00b6 \u6211\u4eec\u53ef\u4ee5\u63d0\u4ea4\u4efb\u52a1\u8ba9NebulaGraph\u7684 Storage \u670d\u52a1\u5b9e\u73b0\u8d1f\u8f7d\u5747\u8861\u3002\u8be6\u7ec6\u793a\u4f8b\u8bf7\u53c2\u89c1 Storage \u8d1f\u8f7d\u5747\u8861 \u3002 Note \u5176\u4ed6\u4f5c\u4e1a\u7ba1\u7406\u547d\u4ee4\u8bf7\u53c2\u89c1 \u4f5c\u4e1a\u7ba1\u7406 \u3002 \u8d1f\u8f7d\u5747\u8861\u76f8\u5173\u7684\u8bed\u6cd5\u8bf4\u660e\u5982\u4e0b\u3002 \u8bed\u6cd5 \u8bf4\u660e SUBMIT JOB BALANCE LEADER \u542f\u52a8\u4efb\u52a1\u5747\u8861\u5206\u5e03\u6240\u6709\u56fe\u7a7a\u95f4\u4e2d\u7684 leader\u3002\u8be5\u547d\u4ee4\u4f1a\u8fd4\u56de\u4efb\u52a1 ID\uff08 job_id \uff09\u3002 \u67e5\u770b\u3001\u505c\u6b62\u3001\u91cd\u542f\u4efb\u52a1\uff0c\u8bf7\u53c2\u89c1 \u4f5c\u4e1a\u7ba1\u7406 \u3002","title":"\u8d1f\u8f7d\u5747\u8861"},{"location":"synchronization-and-migration/2.balance-syntax/#_1","text":"\u6211\u4eec\u53ef\u4ee5\u63d0\u4ea4\u4efb\u52a1\u8ba9NebulaGraph\u7684 Storage \u670d\u52a1\u5b9e\u73b0\u8d1f\u8f7d\u5747\u8861\u3002\u8be6\u7ec6\u793a\u4f8b\u8bf7\u53c2\u89c1 Storage \u8d1f\u8f7d\u5747\u8861 \u3002 Note \u5176\u4ed6\u4f5c\u4e1a\u7ba1\u7406\u547d\u4ee4\u8bf7\u53c2\u89c1 \u4f5c\u4e1a\u7ba1\u7406 \u3002 \u8d1f\u8f7d\u5747\u8861\u76f8\u5173\u7684\u8bed\u6cd5\u8bf4\u660e\u5982\u4e0b\u3002 \u8bed\u6cd5 \u8bf4\u660e SUBMIT JOB BALANCE LEADER \u542f\u52a8\u4efb\u52a1\u5747\u8861\u5206\u5e03\u6240\u6709\u56fe\u7a7a\u95f4\u4e2d\u7684 leader\u3002\u8be5\u547d\u4ee4\u4f1a\u8fd4\u56de\u4efb\u52a1 ID\uff08 job_id \uff09\u3002 \u67e5\u770b\u3001\u505c\u6b62\u3001\u91cd\u542f\u4efb\u52a1\uff0c\u8bf7\u53c2\u89c1 \u4f5c\u4e1a\u7ba1\u7406 \u3002","title":"\u8d1f\u8f7d\u5747\u8861"}]}