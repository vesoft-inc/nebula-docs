{"config":{"lang":["en"],"separator":"[\\s\\u200b\\u3000\\-\u3001\u3002\uff0c\uff0e\uff1f\uff01\uff1b]+","pipeline":["stemmer"]},"docs":[{"location":"","title":"\u6b22\u8fce\u9605\u8bfb NebulaGraph master \u6587\u6863","text":"<p>Note</p> <p>\u672c\u6587\u6863\u66f4\u65b0\u65f6\u95f42024-2-1\uff0cGitHub commit 3c9ec6a\u3002\u8be5\u7248\u672c\u4e3b\u8272\u7cfb\u4e3a\"\u6851\u8272\"\uff0c\u8272\u53f7\u4e3a #55295B\u3002</p>"},{"location":"#_1","title":"\u5feb\u901f\u5f00\u59cb","text":"<ul> <li>\u5feb\u901f\u5f00\u59cb</li> <li>\u90e8\u7f72\u8981\u6c42</li> <li>nGQL \u547d\u4ee4\u6c47\u603b</li> <li>FAQ</li> <li>\u751f\u6001\u5de5\u5177</li> <li>Academy \u8bfe\u7a0b</li> <li>\u5728\u7ebf\u4f53\u9a8c</li> </ul>"},{"location":"#_2","title":"\u6700\u65b0\u53d1\u5e03","text":"<ul> <li>NebulaGraph  master</li> <li>NebulaGraph Dashboard Community</li> <li>NebulaGraph Studio</li> </ul>"},{"location":"#_3","title":"\u5176\u4ed6\u8d44\u6599","text":"<ul> <li>\u5b66\u4e60\u8def\u5f84</li> <li>\u5f15\u7528 NebulaGraph</li> <li>\u8bba\u575b</li> <li>\u4e3b\u9875</li> <li>\u7cfb\u5217\u89c6\u9891</li> <li>\u82f1\u6587\u6587\u6863</li> </ul>"},{"location":"#_4","title":"\u56fe\u4f8b\u8bf4\u660e","text":"<p>Note</p> <p>\u989d\u5916\u7684\u4fe1\u606f\u6216\u8005\u64cd\u4f5c\u76f8\u5173\u7684\u63d0\u9192\u7b49\u3002</p> <p>Caution</p> <p>\u53ef\u80fd\u4f1a\u4ea7\u751f\u4e0d\u826f\u5f71\u54cd\uff0c\u4f8b\u5982\u5bfc\u81f4\u6027\u80fd\u4e0b\u964d\u6216\u5f15\u53d1\u5df2\u77e5\u7684\u5c0f\u95ee\u9898\u3002</p> <p>Warning</p> <p>\u53ef\u80fd\u5bfc\u81f4\u4e25\u91cd\u540e\u679c\uff0c\u4f8b\u5982\u6570\u636e\u4e22\u5931\u3001\u7cfb\u7edf\u5d29\u6e83\u3002</p> <p>Danger</p> <p>\u53ef\u80fd\u5bfc\u81f4\u6781\u5176\u4e25\u91cd\u7684\u540e\u679c\uff0c\u4f8b\u5982\u7cfb\u7edf\u635f\u574f\u3001\u4fe1\u606f\u6cc4\u9732\u3002</p> <p>Compatibility</p> <p>nGQL \u4e0e openCypher \u7684\u517c\u5bb9\u6027\u6216 nGQL \u5f53\u524d\u7248\u672c\u4e0e\u5386\u53f2\u7248\u672c\u7684\u517c\u5bb9\u6027\u3002</p> <p>Enterpriseonly</p> <p>\u63cf\u8ff0\u793e\u533a\u7248\u548c\u4f01\u4e1a\u7248\u7684\u5dee\u5f02\u3002</p>"},{"location":"#_5","title":"\u4fee\u6539\u6587\u6863\u4e2d\u7684\u9519\u8bef","text":"<p>NebulaGraph \u6587\u6863\u4ee5 Markdown \u8bed\u8a00\u7f16\u5199\u3002\u5355\u51fb\u6587\u6863\u6807\u9898\u53f3\u4e0a\u4fa7\u7684\u94c5\u7b14\u56fe\u6807\u5373\u53ef\u63d0\u4ea4\u4fee\u6539\u5efa\u8bae\u3002</p>"},{"location":"nebula-bench/","title":"NebulaGraph Bench","text":"<p>NebulaGraph Bench \u662f\u4e00\u6b3e\u5229\u7528 LDBC \u6570\u636e\u96c6\u5bf9 NebulaGraph \u8fdb\u884c\u6027\u80fd\u6d4b\u8bd5\u7684\u5de5\u5177\u3002</p>"},{"location":"nebula-bench/#_1","title":"\u9002\u7528\u573a\u666f","text":"<ul> <li>\u751f\u6210\u6d4b\u8bd5\u6570\u636e\u5e76\u5bfc\u5165 NebulaGraph \u3002</li> </ul> <ul> <li>\u5bf9 NebulaGraph \u96c6\u7fa4\u8fdb\u884c\u6027\u80fd\u6d4b\u8bd5\u3002</li> </ul>"},{"location":"nebula-bench/#_2","title":"\u66f4\u65b0\u8bf4\u660e","text":"<p>Release</p> <p>\u8be6\u7ec6\u4f7f\u7528\u8bf4\u660e\u8bf7\u53c2\u89c1 NebulaGraph Bench\u3002</p>"},{"location":"nebula-console/","title":"NebulaGraph Console","text":"<p>NebulaGraph Console \u662f NebulaGraph \u7684\u539f\u751f\u547d\u4ee4\u884c\u5ba2\u6237\u7aef\uff0c\u7528\u4e8e\u8fde\u63a5 NebulaGraph \u96c6\u7fa4\u5e76\u6267\u884c\u67e5\u8be2\uff0c\u540c\u65f6\u652f\u6301\u7ba1\u7406\u53c2\u6570\u3001\u5bfc\u51fa\u547d\u4ee4\u7684\u6267\u884c\u7ed3\u679c\u3001\u5bfc\u5165\u6d4b\u8bd5\u6570\u636e\u96c6\u7b49\u529f\u80fd\u3002</p>"},{"location":"nebula-console/#_1","title":"\u7248\u672c\u5bf9\u7167\u8868","text":"<p>\u53c2\u89c1Github\u3002</p>"},{"location":"nebula-console/#nebulagraph_console_1","title":"\u83b7\u53d6 NebulaGraph Console","text":"<p>NebulaGraph Console \u7684\u83b7\u53d6\u65b9\u5f0f\u5982\u4e0b\uff1a</p> <ul> <li>\u4ece GitHub \u53d1\u5e03\u9875\u4e0b\u8f7d\u4e8c\u8fdb\u5236\u6587\u4ef6\u3002</li> </ul> <ul> <li>\u7f16\u8bd1\u6e90\u7801\u83b7\u53d6\u4e8c\u8fdb\u5236\u6587\u4ef6\u3002\u7f16\u8bd1\u65b9\u6cd5\u53c2\u89c1 Install from source code\u3002</li> </ul>"},{"location":"nebula-console/#_2","title":"\u529f\u80fd\u8bf4\u660e","text":""},{"location":"nebula-console/#nebulagraph","title":"\u8fde\u63a5 NebulaGraph","text":"<p>\u8fd0\u884c\u4e8c\u8fdb\u5236\u6587\u4ef6 <code>nebula-console</code> \u8fde\u63a5 NebulaGraph \u7684\u547d\u4ee4\u8bed\u6cd5\u5982\u4e0b\uff1a</p> <pre><code>&lt;path_of_console&gt; -addr &lt;ip&gt; -port &lt;port&gt; -u &lt;username&gt; -p &lt;password&gt;\n</code></pre> <ul> <li><code>path_of_console</code>\u662f NebulaGraph Console \u4e8c\u8fdb\u5236\u6587\u4ef6\u7684\u5b58\u50a8\u8def\u5f84\u3002</li> <li>\u5f00\u542f SSL \u52a0\u5bc6\u540e\uff0c\u9700\u8981\u53cc\u5411\u8ba4\u8bc1\u65f6\uff0c\u8fde\u63a5\u65f6\u9700\u8981\u6307\u5b9a SSL \u76f8\u5173\u53c2\u6570\u3002</li> </ul> <p>\u793a\u4f8b\u5982\u4e0b\uff1a</p> <ul> <li> <p>\u76f4\u63a5\u8fde\u63a5 NebulaGraph </p> <pre><code>./nebula-console -addr 192.168.8.100 -port 9669 -u root -p nebula\n</code></pre> </li> </ul> <ul> <li> <p>\u5f00\u542f SSL \u52a0\u5bc6\u4e14\u9700\u8981\u53cc\u5411\u8ba4\u8bc1</p> <pre><code>./nebula-console -addr 192.168.8.100 -port 9669 -u root  -p nebula -enable_ssl -ssl_root_ca_path /home/xxx/cert/root.crt -ssl_cert_path /home/xxx/cert/client.crt -ssl_private_key_path /home/xxx/cert/client.key\n</code></pre> </li> </ul> <p>\u5e38\u7528\u53c2\u6570\u7684\u8bf4\u660e\u5982\u4e0b\u3002</p> \u53c2\u6570 \u8bf4\u660e <code>-h/-help</code> \u663e\u793a\u5e2e\u52a9\u83dc\u5355\u3002 <code>-addr/-address</code> \u8bbe\u7f6e\u8981\u8fde\u63a5\u7684 Graph \u670d\u52a1\u7684 IP \u6216\u4e3b\u673a\u540d\u3002\u9ed8\u8ba4\u5730\u5740\u4e3a 127.0.0.1\u3002 <code>-P/-port</code> \u8bbe\u7f6e\u8981\u8fde\u63a5\u7684 Graph \u670d\u52a1\u7684\u7aef\u53e3\u3002\u9ed8\u8ba4\u7aef\u53e3\u4e3a 9669\u3002 <code>-u/-user</code> \u8bbe\u7f6e NebulaGraph \u8d26\u53f7\u7684\u7528\u6237\u540d\u3002\u672a\u542f\u7528\u8eab\u4efd\u8ba4\u8bc1\u65f6\uff0c\u53ef\u4ee5\u4f7f\u7528\u4efb\u610f\u5df2\u5b58\u5728\u7684\u7528\u6237\u540d\uff08\u9ed8\u8ba4\u4e3a<code>root</code>\uff09\u3002 <code>-p/-password</code> \u8bbe\u7f6e\u7528\u6237\u540d\u5bf9\u5e94\u7684\u5bc6\u7801\u3002\u672a\u542f\u7528\u8eab\u4efd\u8ba4\u8bc1\u65f6\uff0c\u5bc6\u7801\u53ef\u4ee5\u586b\u5199\u4efb\u610f\u5b57\u7b26\u3002 <code>-t/-timeout</code> \u8bbe\u7f6e\u6574\u6570\u7c7b\u578b\u7684\u8fde\u63a5\u8d85\u65f6\u65f6\u95f4\u3002\u5355\u4f4d\u4e3a\u6beb\u79d2\uff0c\u9ed8\u8ba4\u503c\u4e3a 120\u3002 <code>-e/-eval</code> \u8bbe\u7f6e\u5b57\u7b26\u4e32\u7c7b\u578b\u7684 nGQL \u8bed\u53e5\u3002\u8fde\u63a5\u6210\u529f\u540e\u4f1a\u6267\u884c\u4e00\u6b21\u8be5\u8bed\u53e5\u5e76\u8fd4\u56de\u7ed3\u679c\uff0c\u7136\u540e\u81ea\u52a8\u65ad\u5f00\u8fde\u63a5\u3002 <code>-f/-file</code> \u8bbe\u7f6e\u5b58\u50a8 nGQL \u8bed\u53e5\u7684\u6587\u4ef6\u7684\u8def\u5f84\u3002\u8fde\u63a5\u6210\u529f\u540e\u4f1a\u6267\u884c\u8be5\u6587\u4ef6\u5185\u7684 nGQL \u8bed\u53e5\u5e76\u8fd4\u56de\u7ed3\u679c\uff0c\u6267\u884c\u5b8c\u6bd5\u540e\u81ea\u52a8\u65ad\u5f00\u8fde\u63a5\u3002 <code>-enable_ssl</code> \u8fde\u63a5 NebulaGraph \u65f6\u4f7f\u7528 SSL \u52a0\u5bc6\u53cc\u5411\u8ba4\u8bc1\u3002 <code>-ssl_root_ca_path</code> \u6307\u5b9a CA \u6839\u8bc1\u4e66\u7684\u5b58\u50a8\u8def\u5f84\u3002 <code>-ssl_cert_path</code> \u6307\u5b9a SSL \u516c\u94a5\u8bc1\u4e66\u7684\u5b58\u50a8\u8def\u5f84\u3002 <code>-ssl_private_key_path</code> \u6307\u5b9a SSL \u5bc6\u94a5\u7684\u5b58\u50a8\u8def\u5f84\u3002 <code>-ssl_insecure_skip_verify</code> \u6307\u5b9a\u5ba2\u6237\u7aef\u662f\u5426\u8df3\u8fc7\u9a8c\u8bc1\u670d\u52a1\u7aef\u7684\u8bc1\u4e66\u94fe\u548c\u4e3b\u673a\u540d\u3002\u9ed8\u8ba4\u4e3a<code>false</code>\u3002\u5982\u679c\u8bbe\u7f6e\u4e3a<code>true</code>\uff0c\u5219\u63a5\u53d7\u670d\u52a1\u7aef\u63d0\u4f9b\u7684\u4efb\u4f55\u8bc1\u4e66\u94fe\u548c\u4e3b\u673a\u540d\u3002 <p>\u66f4\u591a\u53c2\u6570\u53c2\u89c1\u9879\u76ee\u4ed3\u5e93\u3002</p>"},{"location":"nebula-console/#_3","title":"\u7ba1\u7406\u53c2\u6570","text":"<p>NebulaGraph Console \u53ef\u4ee5\u4fdd\u5b58\u53c2\u6570\uff0c\u7528\u4e8e\u53c2\u6570\u5316\u67e5\u8be2\u3002</p> <p>Note</p> <ul> <li>VID \u4e0d\u652f\u6301\u53c2\u6570\u5316\u67e5\u8be2\u3002</li> </ul> <ul> <li><code>SAMPLE</code>\u5b50\u53e5\u4e2d\u4e0d\u652f\u6301\u53c2\u6570\u5316\u67e5\u8be2\u3002</li> </ul> <ul> <li>\u4f1a\u8bdd\u91ca\u653e\u540e\uff0c\u53c2\u6570\u4e0d\u4f1a\u4fdd\u7559\u3002</li> </ul> <ul> <li> <p>\u4fdd\u5b58\u53c2\u6570\u547d\u4ee4\u5982\u4e0b\uff1a</p> <pre><code>nebula&gt; :param &lt;param_name&gt; =&gt; &lt;param_value&gt;;\n</code></pre> <p>\u793a\u4f8b\uff1a</p> <pre><code>nebula&gt; :param p1 =&gt; \"Tim Duncan\";\nnebula&gt; MATCH (v:player{name:$p1})-[:follow]-&gt;(n)  RETURN v,n;\n+----------------------------------------------------+-------------------------------------------------------+\n| v                                                  | n                                                     |\n+----------------------------------------------------+-------------------------------------------------------+\n| (\"player100\" :player{age: 42, name: \"Tim Duncan\"}) | (\"player125\" :player{age: 41, name: \"Manu Ginobili\"}) |\n| (\"player100\" :player{age: 42, name: \"Tim Duncan\"}) | (\"player101\" :player{age: 36, name: \"Tony Parker\"})   |\n+----------------------------------------------------+-------------------------------------------------------+\n\nnebula&gt; :param p2 =&gt; {\"a\":3,\"b\":false,\"c\":\"Tim Duncan\"};\nnebula&gt; RETURN $p2.b AS b;\n+-------+\n| b     |\n+-------+\n| false |\n+-------+\n</code></pre> </li> </ul> <ul> <li> <p>\u67e5\u770b\u5f53\u524d\u4fdd\u5b58\u7684\u6240\u6709\u53c2\u6570\uff0c\u547d\u4ee4\u5982\u4e0b\uff1a</p> <pre><code>nebula&gt; :params;\n</code></pre> </li> </ul> <ul> <li> <p>\u67e5\u770b\u6307\u5b9a\u53c2\u6570\uff0c\u547d\u4ee4\u5982\u4e0b\uff1a</p> <pre><code>nebula&gt; :params &lt;param_name&gt;;\n</code></pre> </li> </ul> <ul> <li> <p>\u5220\u9664\u6307\u5b9a\u53c2\u6570\uff0c\u547d\u4ee4\u5982\u4e0b\uff1a</p> <pre><code>nebula&gt; :param &lt;param_name&gt; =&gt;;\n</code></pre> </li> </ul>"},{"location":"nebula-console/#_4","title":"\u5bfc\u51fa\u6267\u884c\u7ed3\u679c","text":"<p>\u5bfc\u51fa\u547d\u4ee4\u6267\u884c\u7684\u8fd4\u56de\u7ed3\u679c\uff0c\u53ef\u4ee5\u4fdd\u5b58\u4e3a CSV \u6587\u4ef6\u3001 DOT \u6587\u4ef6\u6216\u8005 Profile/Explain \u7ed3\u679c\u3002</p> <p>Note</p> <ul> <li>\u6587\u4ef6\u4fdd\u5b58\u5728\u5f53\u524d\u5de5\u4f5c\u76ee\u5f55\u4e2d\uff0c\u5373 Linux \u547d\u4ee4<code>pwd</code>\u663e\u793a\u7684\u76ee\u5f55\u3002</li> </ul> <ul> <li>\u547d\u4ee4\u53ea\u5bf9\u4e0b\u4e00\u6761\u67e5\u8be2\u8bed\u53e5\u751f\u6548\u3002</li> </ul> <ul> <li>DOT \u6587\u4ef6\u7684\u5185\u5bb9\u53ef\u4ee5\u590d\u5236\u540e\u5728 GraphvizOnline \u7f51\u9875\u4e2d\u7c98\u8d34\uff0c\u751f\u6210\u53ef\u89c6\u5316\u7684\u6267\u884c\u8ba1\u5212\u56fe\u3002</li> </ul> <ul> <li> <p>\u5bfc\u51fa CSV \u6587\u4ef6\u547d\u4ee4\u5982\u4e0b\uff1a</p> <pre><code>nebula&gt; :CSV &lt;file_name.csv&gt;;\n</code></pre> </li> </ul> <ul> <li> <p>\u5bfc\u51fa DOT \u6587\u4ef6\u547d\u4ee4\u5982\u4e0b\uff1a</p> <pre><code>nebula&gt; :dot &lt;file_name.dot&gt;;\n</code></pre> <p>\u793a\u4f8b\uff1a</p> <pre><code>nebula&gt; :dot a.dot;\nnebula&gt; PROFILE FORMAT=\"dot\" GO FROM \"player100\" OVER follow;\n</code></pre> </li> </ul> <ul> <li> <p>\u5bfc\u51fa PROFILE/EXPLAIN \u7ed3\u679c\u5230\u6587\u4ef6\u547d\u4ee4\u5982\u4e0b\uff1a</p> <p><pre><code>nebula&gt; :profile &lt;file_name&gt;;\n</code></pre> \u6216\u8005</p> <pre><code>nebula&gt; :explain &lt;file_name&gt;;\n</code></pre> </li> </ul> <p>Note</p> <p>\u76f8\u6bd4\u4e8e Studio \u4e2d\u7684\u622a\u56fe\u3001CSV \u6587\u4ef6\uff0c\u56e0\u4e3a\u4fdd\u6709\u66f4\u591a\u4fe1\u606f\u91cf\u548c\u62e5\u6709\u66f4\u597d\u7684\u53ef\u8bfb\u6027\uff0c\u7ecf\u7531\u6b64\u547d\u4ee4\u8f93\u51fa\u7684\u6587\u672c\u6587\u4ef6\u5185\u5bb9\u662f\u9996\u63a8\u7684\u5728 GitHub issue\u3001\u8bba\u575b\u4e2d\u62a5\u544a\u6267\u884c\u8ba1\u5212\u3001\u56fe\u67e5\u8be2\u8c03\u4f18\u7684\u65b9\u5f0f\u3002</p> <p>\u793a\u4f8b\uff1a</p> <pre><code>nebula&gt; :profile profile.log\nnebula&gt; PROFILE GO FROM \"player102\" OVER serve YIELD dst(edge);\nnebula&gt; :profile profile.dot\nnebula&gt; PROFILE FORMAT=\"dot\" GO FROM \"player102\" OVER serve YIELD dst(edge);\nnebula&gt; :explain explain.log\nnebula&gt; EXPLAIN GO FROM \"player102\" OVER serve YIELD dst(edge);\n</code></pre>"},{"location":"nebula-console/#_5","title":"\u52a0\u8f7d\u6d4b\u8bd5\u6570\u636e\u96c6","text":"<p>\u6d4b\u8bd5\u6570\u636e\u96c6\u540d\u79f0\u4e3a basketballplayer\uff0c\u8be6\u7ec6 Schema \u4fe1\u606f\u548c\u6570\u636e\u4fe1\u606f\u8bf7\u4f7f\u7528\u76f8\u5173<code>SHOW</code>\u547d\u4ee4\u67e5\u770b\u3002</p> <p>\u52a0\u8f7d\u6d4b\u8bd5\u6570\u636e\u96c6\u547d\u4ee4\u5982\u4e0b\uff1a</p> <pre><code>nebula&gt; :play basketballplayer;\n</code></pre>"},{"location":"nebula-console/#_6","title":"\u91cd\u590d\u6267\u884c\u8bed\u53e5","text":"<p>\u91cd\u590d\u6267\u884c\u4e0b\u4e00\u4e2a\u547d\u4ee4 N \u6b21\uff0c\u7136\u540e\u6253\u5370\u5e73\u5747\u6267\u884c\u65f6\u95f4\u3002\u547d\u4ee4\u5982\u4e0b\uff1a</p> <pre><code>nebula&gt; :repeat N;\n</code></pre> <p>\u793a\u4f8b\uff1a</p> <pre><code>nebula&gt; :repeat 3;\nnebula&gt; GO FROM \"player100\" OVER follow YIELD dst(edge);\n+-------------+\n| dst(EDGE)   |\n+-------------+\n| \"player101\" |\n| \"player125\" |\n+-------------+\nGot 2 rows (time spent 2602/3214 us)\n\nFri, 20 Aug 2021 06:36:05 UTC\n\n+-------------+\n| dst(EDGE)   |\n+-------------+\n| \"player101\" |\n| \"player125\" |\n+-------------+\nGot 2 rows (time spent 583/849 us)\n\nFri, 20 Aug 2021 06:36:05 UTC\n\n+-------------+\n| dst(EDGE)   |\n+-------------+\n| \"player101\" |\n| \"player125\" |\n+-------------+\nGot 2 rows (time spent 496/671 us)\n\nFri, 20 Aug 2021 06:36:05 UTC\n\nExecuted 3 times, (total time spent 3681/4734 us), (average time spent 1227/1578 us)\n</code></pre>"},{"location":"nebula-console/#_7","title":"\u7761\u7720","text":"<p>\u7761\u7720 N \u79d2\u3002\u5e38\u7528\u4e8e\u4fee\u6539 Schema \u7684\u64cd\u4f5c\u4e2d\uff0c\u56e0\u4e3a\u4fee\u6539 Schema \u662f\u5f02\u6b65\u5b9e\u73b0\u7684\uff0c\u9700\u8981\u5728\u4e0b\u4e00\u4e2a\u5fc3\u8df3\u5468\u671f\u624d\u540c\u6b65\u6570\u636e\u3002\u547d\u4ee4\u5982\u4e0b\uff1a</p> <pre><code>nebula&gt; :sleep N;\n</code></pre>"},{"location":"nebula-console/#_8","title":"\u65ad\u5f00\u8fde\u63a5","text":"<p>\u7528\u6237\u53ef\u4ee5\u4f7f\u7528<code>:EXIT</code>\u6216\u8005<code>:QUIT</code>\u4ece NebulaGraph \u65ad\u5f00\u8fde\u63a5\u3002\u4e3a\u65b9\u4fbf\u4f7f\u7528\uff0cNebulaGraph Console \u652f\u6301\u4f7f\u7528\u4e0d\u5e26\u5192\u53f7\uff08:\uff09\u7684\u5c0f\u5199\u547d\u4ee4\uff0c\u4f8b\u5982<code>quit</code>\u3002</p> <p>\u793a\u4f8b\uff1a</p> <pre><code>nebula&gt; :QUIT;\n\nBye root!\n</code></pre>"},{"location":"1.introduction/1.what-is-nebula-graph/","title":"\u4ec0\u4e48\u662f NebulaGraph","text":"<p>NebulaGraph \u662f\u4e00\u6b3e\u5f00\u6e90\u7684\u3001\u5206\u5e03\u5f0f\u7684\u3001\u6613\u6269\u5c55\u7684\u539f\u751f\u56fe\u6570\u636e\u5e93\uff0c\u80fd\u591f\u627f\u8f7d\u5305\u542b\u6570\u5343\u4ebf\u4e2a\u70b9\u548c\u6570\u4e07\u4ebf\u6761\u8fb9\u7684\u8d85\u5927\u89c4\u6a21\u6570\u636e\u96c6\uff0c\u5e76\u4e14\u63d0\u4f9b\u6beb\u79d2\u7ea7\u67e5\u8be2\u3002</p> <p></p>"},{"location":"1.introduction/1.what-is-nebula-graph/#_1","title":"\u4ec0\u4e48\u662f\u56fe\u6570\u636e\u5e93","text":"<p>\u56fe\u6570\u636e\u5e93\u662f\u4e13\u95e8\u5b58\u50a8\u5e9e\u5927\u7684\u56fe\u5f62\u7f51\u7edc\u5e76\u4ece\u4e2d\u68c0\u7d22\u4fe1\u606f\u7684\u6570\u636e\u5e93\u3002\u5b83\u53ef\u4ee5\u5c06\u56fe\u4e2d\u7684\u6570\u636e\u9ad8\u6548\u5b58\u50a8\u4e3a\u70b9\uff08Vertex\uff09\u548c\u8fb9\uff08Edge\uff09\uff0c\u8fd8\u53ef\u4ee5\u5c06\u5c5e\u6027\uff08Property\uff09\u9644\u52a0\u5230\u70b9\u548c\u8fb9\u4e0a\u3002</p> <p></p> <p>\u56fe\u6570\u636e\u5e93\u9002\u5408\u5b58\u50a8\u5927\u591a\u6570\u4ece\u73b0\u5b9e\u62bd\u8c61\u51fa\u7684\u6570\u636e\u7c7b\u578b\u3002\u4e16\u754c\u4e0a\u51e0\u4e4e\u6240\u6709\u9886\u57df\u7684\u4e8b\u7269\u90fd\u6709\u5185\u5728\u8054\u7cfb\uff0c\u50cf\u5173\u7cfb\u578b\u6570\u636e\u5e93\u8fd9\u6837\u7684\u5efa\u6a21\u7cfb\u7edf\u4f1a\u63d0\u53d6\u5b9e\u4f53\u4e4b\u95f4\u7684\u5173\u7cfb\uff0c\u5e76\u5c06\u5173\u7cfb\u5355\u72ec\u5b58\u50a8\u5230\u8868\u548c\u5217\u4e2d\uff0c\u800c\u5b9e\u4f53\u7684\u7c7b\u578b\u548c\u5c5e\u6027\u5b58\u50a8\u5728\u5176\u4ed6\u5217\u751a\u81f3\u5176\u4ed6\u8868\u4e2d\uff0c\u8fd9\u4f7f\u5f97\u6570\u636e\u7ba1\u7406\u8d39\u65f6\u8d39\u529b\u3002</p> <p>NebulaGraph \u4f5c\u4e3a\u4e00\u4e2a\u5178\u578b\u7684\u56fe\u6570\u636e\u5e93\uff0c\u53ef\u4ee5\u5c06\u4e30\u5bcc\u7684\u5173\u7cfb\u901a\u8fc7\u8fb9\u53ca\u5176\u7c7b\u578b\u548c\u5c5e\u6027\u81ea\u7136\u5730\u5448\u73b0\u3002</p>"},{"location":"1.introduction/1.what-is-nebula-graph/#nebulagraph_1","title":"NebulaGraph \u7684\u4f18\u52bf","text":""},{"location":"1.introduction/1.what-is-nebula-graph/#_2","title":"\u5f00\u6e90","text":"<p>NebulaGraph \u662f\u5728 Apache 2.0 \u6761\u6b3e\u4e0b\u5f00\u53d1\u7684\u3002\u8d8a\u6765\u8d8a\u591a\u7684\u4eba\uff0c\u5982\u6570\u636e\u5e93\u5f00\u53d1\u4eba\u5458\u3001\u6570\u636e\u79d1\u5b66\u5bb6\u3001\u5b89\u5168\u4e13\u5bb6\u3001\u7b97\u6cd5\u5de5\u7a0b\u5e08\uff0c\u90fd\u53c2\u4e0e\u5230 NebulaGraph \u7684\u8bbe\u8ba1\u548c\u5f00\u53d1\u4e2d\u6765\uff0c\u6b22\u8fce\u8bbf\u95ee NebulaGraph GitHub \u4e3b\u9875\u53c2\u4e0e\u5f00\u6e90\u9879\u76ee\u3002</p>"},{"location":"1.introduction/1.what-is-nebula-graph/#_3","title":"\u9ad8\u6027\u80fd","text":"<p>\u57fa\u4e8e\u56fe\u6570\u636e\u5e93\u7684\u7279\u6027\u4f7f\u7528 C++ \u7f16\u5199\u7684 NebulaGraph\uff0c\u53ef\u4ee5\u63d0\u4f9b\u6beb\u79d2\u7ea7\u67e5\u8be2\u3002\u4f17\u591a\u6570\u636e\u5e93\u4e2d\uff0cNebulaGraph \u5728\u56fe\u6570\u636e\u670d\u52a1\u9886\u57df\u5c55\u73b0\u4e86\u5353\u8d8a\u7684\u6027\u80fd\uff0c\u6570\u636e\u89c4\u6a21\u8d8a\u5927\uff0cNebulaGraph \u4f18\u52bf\u5c31\u8d8a\u5927\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1 NebulaGraph benchmarking \u9875\u9762\u3002</p>"},{"location":"1.introduction/1.what-is-nebula-graph/#_4","title":"\u6613\u6269\u5c55","text":"<p>NebulaGraph \u91c7\u7528 shared-nothing \u67b6\u6784\uff0c\u652f\u6301\u5728\u4e0d\u505c\u6b62\u6570\u636e\u5e93\u670d\u52a1\u7684\u60c5\u51b5\u4e0b\u6269\u7f29\u5bb9\u3002</p>"},{"location":"1.introduction/1.what-is-nebula-graph/#_5","title":"\u6613\u5f00\u53d1","text":"<p>NebulaGraph \u63d0\u4f9b Java\u3001Python\u3001C++ \u548c Go \u7b49\u6d41\u884c\u7f16\u7a0b\u8bed\u8a00\u7684\u5ba2\u6237\u7aef\uff0c\u66f4\u591a\u5ba2\u6237\u7aef\u4ecd\u5728\u5f00\u53d1\u4e2d\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1 NebulaGraph clients\u3002</p>"},{"location":"1.introduction/1.what-is-nebula-graph/#_6","title":"\u9ad8\u53ef\u9760\u8bbf\u95ee\u63a7\u5236","text":"<p>NebulaGraph \u652f\u6301\u4e25\u683c\u7684\u89d2\u8272\u8bbf\u95ee\u63a7\u5236\u548c LDAP\uff08Lightweight Directory Access Protocol\uff09\u7b49\u5916\u90e8\u8ba4\u8bc1\u670d\u52a1\uff0c\u80fd\u591f\u6709\u6548\u63d0\u9ad8\u6570\u636e\u5b89\u5168\u6027\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1\u9a8c\u8bc1\u548c\u6388\u6743\u3002</p>"},{"location":"1.introduction/1.what-is-nebula-graph/#_7","title":"\u751f\u6001\u591a\u6837\u5316","text":"<p>NebulaGraph \u5f00\u653e\u4e86\u8d8a\u6765\u8d8a\u591a\u7684\u539f\u751f\u5de5\u5177\uff0c\u4f8b\u5982 NebulaGraph Studio\u3001NebulaGraph Console\u3001NebulaGraph Exchange \u7b49\uff0c\u66f4\u591a\u5de5\u5177\u53ef\u4ee5\u67e5\u770b\u751f\u6001\u5de5\u5177\u6982\u89c8\u3002</p> <p>\u6b64\u5916\uff0cNebulaGraph \u8fd8\u5177\u5907\u4e0e Spark\u3001Flink\u3001HBase \u7b49\u4ea7\u54c1\u6574\u5408\u7684\u80fd\u529b\uff0c\u5728\u8fd9\u4e2a\u5145\u6ee1\u6311\u6218\u4e0e\u673a\u9047\u7684\u65f6\u4ee3\uff0c\u5927\u5927\u589e\u5f3a\u4e86\u81ea\u8eab\u7684\u7ade\u4e89\u529b\u3002</p>"},{"location":"1.introduction/1.what-is-nebula-graph/#opencypher","title":"\u517c\u5bb9 openCypher \u67e5\u8be2\u8bed\u8a00","text":"<p>NebulaGraph \u67e5\u8be2\u8bed\u8a00\uff0c\u7b80\u79f0\u4e3a nGQL\uff0c\u662f\u4e00\u79cd\u58f0\u660e\u6027\u7684\u3001\u90e8\u5206\u517c\u5bb9 openCypher \u7684\u6587\u672c\u67e5\u8be2\u8bed\u8a00\uff0c\u6613\u4e8e\u7406\u89e3\u548c\u4f7f\u7528\u3002\u8be6\u7ec6\u8bed\u6cd5\u8bf7\u53c2\u89c1 nGQL \u6307\u5357\u3002</p>"},{"location":"1.introduction/1.what-is-nebula-graph/#_8","title":"\u9762\u5411\u672a\u6765\u786c\u4ef6\uff0c\u8bfb\u5199\u5e73\u8861","text":"<p>\u95ea\u5b58\u578b\u8bbe\u5907\u6709\u7740\u6781\u9ad8\u7684\u6027\u80fd\uff0c\u5e76\u4e14\u4ef7\u683c\u5feb\u901f\u4e0b\u964d\uff0cNebulaGraph \u662f\u4e00\u4e2a\u9762\u5411 SSD \u8bbe\u8ba1\u7684\u4ea7\u54c1\uff0c\u76f8\u6bd4\u4e8e\u57fa\u4e8e HDD + \u5927\u5185\u5b58\u7684\u4ea7\u54c1\uff0c\u66f4\u9002\u5408\u9762\u5411\u672a\u6765\u7684\u786c\u4ef6\u8d8b\u52bf\uff0c\u4e5f\u66f4\u5bb9\u6613\u505a\u5230\u8bfb\u5199\u5e73\u8861\u3002</p>"},{"location":"1.introduction/1.what-is-nebula-graph/#_9","title":"\u7075\u6d3b\u6570\u636e\u5efa\u6a21","text":"<p>\u7528\u6237\u53ef\u4ee5\u8f7b\u677e\u5730\u5728 NebulaGraph \u4e2d\u5efa\u7acb\u6570\u636e\u6a21\u578b\uff0c\u4e0d\u5fc5\u5c06\u6570\u636e\u5f3a\u5236\u8f6c\u6362\u4e3a\u5173\u7cfb\u8868\u3002\u800c\u4e14\u53ef\u4ee5\u81ea\u7531\u589e\u52a0\u3001\u66f4\u65b0\u548c\u5220\u9664\u5c5e\u6027\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1\u6570\u636e\u6a21\u578b\u3002</p>"},{"location":"1.introduction/1.what-is-nebula-graph/#_10","title":"\u5e7f\u53d7\u6b22\u8fce","text":"<p>\u817e\u8baf\u3001\u7f8e\u56e2\u3001\u4eac\u4e1c\u3001\u5feb\u624b\u3001360 \u7b49\u79d1\u6280\u5de8\u5934\u90fd\u5728\u4f7f\u7528 NebulaGraph \u3002\u8be6\u60c5\u8bf7\u53c2\u89c1 NebulaGraph \u5b98\u7f51\u3002</p>"},{"location":"1.introduction/1.what-is-nebula-graph/#_11","title":"\u9002\u7528\u573a\u666f","text":"<p>NebulaGraph \u53ef\u7528\u4e8e\u5404\u79cd\u57fa\u4e8e\u56fe\u7684\u4e1a\u52a1\u573a\u666f\u3002\u4e3a\u8282\u7ea6\u8f6c\u6362\u5404\u7c7b\u6570\u636e\u5230\u5173\u7cfb\u578b\u6570\u636e\u5e93\u7684\u65f6\u95f4\uff0c\u4ee5\u53ca\u907f\u514d\u590d\u6742\u67e5\u8be2\uff0c\u5efa\u8bae\u4f7f\u7528 NebulaGraph \u3002</p>"},{"location":"1.introduction/1.what-is-nebula-graph/#_12","title":"\u6b3a\u8bc8\u68c0\u6d4b","text":"<p>\u91d1\u878d\u673a\u6784\u5fc5\u987b\u4ed4\u7ec6\u7814\u7a76\u5927\u91cf\u7684\u4ea4\u6613\u4fe1\u606f\uff0c\u624d\u80fd\u68c0\u6d4b\u51fa\u6f5c\u5728\u7684\u91d1\u878d\u6b3a\u8bc8\u884c\u4e3a\uff0c\u5e76\u4e86\u89e3\u67d0\u4e2a\u6b3a\u8bc8\u884c\u4e3a\u548c\u8bbe\u5907\u7684\u5185\u5728\u5173\u8054\u3002\u8fd9\u79cd\u573a\u666f\u53ef\u4ee5\u901a\u8fc7\u56fe\u6765\u5efa\u6a21\uff0c\u7136\u540e\u501f\u52a9 NebulaGraph\uff0c\u53ef\u4ee5\u5f88\u5bb9\u6613\u5730\u68c0\u6d4b\u51fa\u8bc8\u9a97\u56e2\u4f19\u6216\u5176\u4ed6\u590d\u6742\u8bc8\u9a97\u884c\u4e3a\u3002</p>"},{"location":"1.introduction/1.what-is-nebula-graph/#_13","title":"\u5b9e\u65f6\u63a8\u8350","text":"<p>NebulaGraph \u80fd\u591f\u53ca\u65f6\u5904\u7406\u8bbf\u95ee\u8005\u4ea7\u751f\u7684\u5b9e\u65f6\u4fe1\u606f\uff0c\u5e76\u4e14\u7cbe\u51c6\u63a8\u9001\u6587\u7ae0\u3001\u89c6\u9891\u3001\u4ea7\u54c1\u548c\u670d\u52a1\u3002</p>"},{"location":"1.introduction/1.what-is-nebula-graph/#_14","title":"\u77e5\u8bc6\u56fe\u8c31","text":"<p>\u81ea\u7136\u8bed\u8a00\u53ef\u4ee5\u8f6c\u5316\u4e3a\u77e5\u8bc6\u56fe\u8c31\uff0c\u5b58\u50a8\u5728 NebulaGraph \u4e2d\u3002\u7528\u81ea\u7136\u8bed\u8a00\u7ec4\u7ec7\u7684\u95ee\u9898\u53ef\u4ee5\u901a\u8fc7\u667a\u80fd\u95ee\u7b54\u7cfb\u7edf\u4e2d\u7684\u8bed\u4e49\u89e3\u6790\u5668\u8fdb\u884c\u89e3\u6790\u5e76\u91cd\u65b0\u7ec4\u7ec7\uff0c\u7136\u540e\u4ece\u77e5\u8bc6\u56fe\u8c31\u4e2d\u68c0\u7d22\u51fa\u95ee\u9898\u7684\u53ef\u80fd\u7b54\u6848\uff0c\u63d0\u4f9b\u7ed9\u63d0\u95ee\u4eba\u3002</p>"},{"location":"1.introduction/1.what-is-nebula-graph/#_15","title":"\u793e\u4ea4\u7f51\u7edc","text":"<p>\u4eba\u9645\u5173\u7cfb\u4fe1\u606f\u662f\u5178\u578b\u7684\u56fe\u6570\u636e\uff0cNebulaGraph \u53ef\u4ee5\u8f7b\u677e\u5904\u7406\u6570\u5341\u4ebf\u4eba\u548c\u6570\u4e07\u4ebf\u4eba\u9645\u5173\u7cfb\u7684\u793e\u4ea4\u7f51\u7edc\u4fe1\u606f\uff0c\u5e76\u5728\u6d77\u91cf\u5e76\u53d1\u7684\u60c5\u51b5\u4e0b\uff0c\u63d0\u4f9b\u5feb\u901f\u7684\u597d\u53cb\u63a8\u8350\u548c\u5de5\u4f5c\u5c97\u4f4d\u67e5\u8be2\u3002</p>"},{"location":"1.introduction/1.what-is-nebula-graph/#_16","title":"\u89c6\u9891","text":"<p>\u7528\u6237\u4e5f\u53ef\u4ee5\u901a\u8fc7\u89c6\u9891\u4e86\u89e3\u4ec0\u4e48\u662f\u56fe\u6570\u636e\u3002</p> <ul> <li>NebulaGraph \u4ecb\u7ecd\u89c6\u9891\uff0801 \u5206 39 \u79d2\uff09</li> </ul>"},{"location":"1.introduction/1.what-is-nebula-graph/#_17","title":"\u4e3b\u9898\u6f14\u8bb2","text":"<p>\u67e5\u770b\u6f14\u8bb2\u5feb\u901f\u4e86\u89e3\u56fe\u6570\u636e\u5e93\u6982\u51b5\u3002</p>"},{"location":"1.introduction/1.what-is-nebula-graph/#_18","title":"\u76f8\u5173\u94fe\u63a5","text":"<ul> <li>\u5b98\u65b9\u7f51\u7ad9</li> <li>\u6587\u6863\u9996\u9875</li> <li>\u535a\u5ba2\u9996\u9875</li> <li>\u8bba\u575b</li> <li>GitHub</li> </ul>"},{"location":"1.introduction/2.1.path/","title":"\u8def\u5f84","text":"<p>\u56fe\u8bba\u4e2d\u4e00\u4e2a\u975e\u5e38\u91cd\u8981\u7684\u6982\u5ff5\u662f\u8def\u5f84\uff0c\u8def\u5f84\u662f\u6307\u4e00\u4e2a\u6709\u9650\u6216\u65e0\u9650\u7684\u8fb9\u5e8f\u5217\uff0c\u8fd9\u4e9b\u8fb9\u8fde\u63a5\u7740\u4e00\u7cfb\u5217\u7684\u70b9\u3002</p> <p>\u8def\u5f84\u7684\u7c7b\u578b\u5206\u4e3a\u4e09\u79cd\uff1a<code>walk</code>\u3001<code>trail</code>\u3001<code>path</code>\u3002\u5173\u4e8e\u8def\u5f84\u7684\u8be6\u7ec6\u8bf4\u660e\uff0c\u8bf7\u53c2\u89c1\u7ef4\u57fa\u767e\u79d1\u3002</p> <p>\u672c\u6587\u4ee5\u4e0b\u56fe\u4e3a\u4f8b\u8fdb\u884c\u7b80\u5355\u4ecb\u7ecd\u3002</p> <p></p>"},{"location":"1.introduction/2.1.path/#walk","title":"walk","text":"<p><code>walk</code>\u7c7b\u578b\u7684\u8def\u5f84\u7531\u6709\u9650\u6216\u65e0\u9650\u7684\u8fb9\u5e8f\u5217\u6784\u6210\u3002\u904d\u5386\u65f6\u70b9\u548c\u8fb9\u53ef\u4ee5\u91cd\u590d\u3002</p> <p>\u67e5\u770b\u793a\u4f8b\u56fe\uff0c\u7531\u4e8e C\u3001D\u3001E \u6784\u6210\u4e86\u4e00\u4e2a\u73af\uff0c\u56e0\u6b64\u8be5\u56fe\u5305\u542b\u65e0\u9650\u4e2a\u8def\u5f84\uff0c\u4f8b\u5982<code>A-&gt;B-&gt;C-&gt;D-&gt;E</code>\u3001<code>A-&gt;B-&gt;C-&gt;D-&gt;E-&gt;C</code>\u3001<code>A-&gt;B-&gt;C-&gt;D-&gt;E-&gt;C-&gt;D</code>\u3002</p> <p>Note</p> <p><code>GO</code>\u8bed\u53e5\u91c7\u7528\u7684\u662f<code>walk</code>\u7c7b\u578b\u8def\u5f84\u3002</p>"},{"location":"1.introduction/2.1.path/#trail","title":"trail","text":"<p><code>trail</code>\u7c7b\u578b\u7684\u8def\u5f84\u7531\u6709\u9650\u7684\u8fb9\u5e8f\u5217\u6784\u6210\u3002\u904d\u5386\u65f6\u53ea\u6709\u70b9\u53ef\u4ee5\u91cd\u590d\uff0c\u8fb9\u4e0d\u53ef\u4ee5\u91cd\u590d\u3002\u67ef\u5c3c\u65af\u5821\u4e03\u6865\u95ee\u9898\u7684\u8def\u5f84\u7c7b\u578b\u5c31\u662f<code>trail</code>\u3002</p> <p>\u67e5\u770b\u793a\u4f8b\u56fe\uff0c\u7531\u4e8e\u8fb9\u4e0d\u53ef\u4ee5\u91cd\u590d\uff0c\u6240\u4ee5\u8be5\u56fe\u5305\u542b\u6709\u9650\u4e2a\u8def\u5f84\uff0c\u6700\u957f\u8def\u5f84\u7531 5 \u6761\u8fb9\u7ec4\u6210\uff1a<code>A-&gt;B-&gt;C-&gt;D-&gt;E-&gt;C</code>\u3002</p> <p>Note</p> <p><code>MATCH</code>\u3001<code>FIND PATH</code>\u548c<code>GET SUBGRAPH</code>\u8bed\u53e5\u91c7\u7528\u7684\u662f<code>trail</code>\u7c7b\u578b\u8def\u5f84\u3002</p> <p>\u5728 trail \u7c7b\u578b\u4e2d\uff0c\u8fd8\u6709<code>cycle</code>\u548c<code>circuit</code>\u4e24\u79cd\u7279\u6b8a\u7684\u8def\u5f84\u7c7b\u578b\uff0c\u4ee5\u4e0b\u56fe\u4e3a\u4f8b\u5bf9\u8fd9\u4e24\u79cd\u7279\u6b8a\u7684\u8def\u5f84\u7c7b\u578b\u8fdb\u884c\u4ecb\u7ecd\u3002</p> <p></p> <ul> <li> <p>cycle</p> <p><code>cycle</code> \u662f\u5c01\u95ed\u7684 <code>trail</code> \u7c7b\u578b\u7684\u8def\u5f84\uff0c\u904d\u5386\u65f6\u8fb9\u4e0d\u53ef\u4ee5\u91cd\u590d\uff0c\u8d77\u70b9\u548c\u7ec8\u70b9\u91cd\u590d\uff0c\u5e76\u4e14\u6ca1\u6709\u5176\u4ed6\u70b9\u91cd\u590d\u3002\u5728\u6b64\u793a\u4f8b\u56fe\u4e2d\uff0c\u6700\u957f\u8def\u5f84\u7531\u4e09\u6761\u8fb9\u7ec4\u6210\uff1a<code>A-&gt;B-&gt;C-&gt;A</code>\u6216<code>C-&gt;D-&gt;E-&gt;C</code>.</p> </li> </ul> <ul> <li> <p>circuit</p> <p><code>circuit</code> \u4e5f\u662f\u5c01\u95ed\u7684 <code>trail</code> \u7c7b\u578b\u7684\u8def\u5f84\uff0c\u904d\u5386\u65f6\u8fb9\u4e0d\u53ef\u4ee5\u91cd\u590d\uff0c\u9664\u8d77\u70b9\u548c\u7ec8\u70b9\u91cd\u590d\u5916\uff0c\u53ef\u80fd\u5b58\u5728\u5176\u4ed6\u70b9\u91cd\u590d\u3002\u5728\u6b64\u793a\u4f8b\u56fe\u4e2d\uff0c\u6700\u957f\u8def\u5f84\u4e3a\uff1a<code>A-&gt;B-&gt;C-&gt;D-&gt;E-&gt;C-&gt;A</code>\u3002</p> </li> </ul>"},{"location":"1.introduction/2.1.path/#path","title":"path","text":"<p><code>path</code>\u7c7b\u578b\u7684\u8def\u5f84\u7531\u6709\u9650\u7684\u8fb9\u5e8f\u5217\u6784\u6210\u3002\u904d\u5386\u65f6\u70b9\u548c\u8fb9\u90fd\u4e0d\u53ef\u4ee5\u91cd\u590d\u3002</p> <p>\u67e5\u770b\u793a\u4f8b\u56fe\uff0c\u7531\u4e8e\u70b9\u548c\u8fb9\u90fd\u4e0d\u53ef\u4ee5\u91cd\u590d\uff0c\u6240\u4ee5\u8be5\u56fe\u5305\u542b\u6709\u9650\u4e2a\u8def\u5f84\uff0c\u6700\u957f\u8def\u5f84\u7531 4 \u6761\u8fb9\u7ec4\u6210\uff1a<code>A-&gt;B-&gt;C-&gt;D-&gt;E</code>\u3002</p>"},{"location":"1.introduction/2.1.path/#_2","title":"\u89c6\u9891","text":"<p>\u7528\u6237\u4e5f\u53ef\u4ee5\u89c2\u770b\u89c6\u9891\u4e86\u89e3\u8def\u5f84\u7684\u76f8\u5173\u6982\u5ff5\u3002</p> <p>Path\uff0803 \u5206 09 \u79d2\uff09</p>"},{"location":"1.introduction/2.data-model/","title":"\u6570\u636e\u6a21\u578b","text":"<p>\u672c\u6587\u4ecb\u7ecd NebulaGraph \u7684\u6570\u636e\u6a21\u578b\u3002\u6570\u636e\u6a21\u578b\u662f\u4e00\u79cd\u7ec4\u7ec7\u6570\u636e\u5e76\u8bf4\u660e\u5b83\u4eec\u5982\u4f55\u76f8\u4e92\u5173\u8054\u7684\u6a21\u578b\u3002</p>"},{"location":"1.introduction/2.data-model/#_2","title":"\u6570\u636e\u6a21\u578b","text":"<p>NebulaGraph \u6570\u636e\u6a21\u578b\u4f7f\u7528 6 \u79cd\u57fa\u672c\u7684\u6570\u636e\u6a21\u578b\uff1a</p> <ul> <li> <p>\u56fe\u7a7a\u95f4\uff08Space\uff09</p> <p>\u56fe\u7a7a\u95f4\u7528\u4e8e\u9694\u79bb\u4e0d\u540c\u56e2\u961f\u6216\u8005\u9879\u76ee\u7684\u6570\u636e\u3002\u4e0d\u540c\u56fe\u7a7a\u95f4\u7684\u6570\u636e\u662f\u76f8\u4e92\u9694\u79bb\u7684\uff0c\u53ef\u4ee5\u6307\u5b9a\u4e0d\u540c\u7684\u5b58\u50a8\u526f\u672c\u6570\u3001\u6743\u9650\u3001\u5206\u7247\u7b49\u3002</p> </li> </ul> <ul> <li> <p>\u70b9\uff08Vertex\uff09</p> <p>\u70b9\u7528\u6765\u4fdd\u5b58\u5b9e\u4f53\u5bf9\u8c61\uff0c\u7279\u70b9\u5982\u4e0b\uff1a</p> <ul> <li>\u70b9\u662f\u7528\u70b9\u6807\u8bc6\u7b26\uff08<code>VID</code>\uff09\u6807\u8bc6\u7684\u3002<code>VID</code>\u5728\u540c\u4e00\u56fe\u7a7a\u95f4\u4e2d\u552f\u4e00\u3002VID \u662f\u4e00\u4e2a int64\uff0c\u6216\u8005 fixed_string(N)\u3002</li> <li>\u70b9\u53ef\u4ee5\u6709 0 \u5230\u591a\u4e2a Tag\u3002</li> </ul> <p>Compatibility</p> <p>NebulaGraph 2.x \u53ca\u4ee5\u4e0b\u7248\u672c\u4e2d\u7684\u70b9\u5fc5\u987b\u5305\u542b\u81f3\u5c11\u4e00\u4e2a Tag\u3002</p> </li> </ul> <ul> <li> <p>\u8fb9\uff08Edge\uff09</p> <p>\u8fb9\u662f\u7528\u6765\u8fde\u63a5\u70b9\u7684\uff0c\u8868\u793a\u4e24\u4e2a\u70b9\u4e4b\u95f4\u7684\u5173\u7cfb\u6216\u884c\u4e3a\uff0c\u7279\u70b9\u5982\u4e0b\uff1a</p> <ul> <li>\u4e24\u70b9\u4e4b\u95f4\u53ef\u4ee5\u6709\u591a\u6761\u8fb9\u3002</li> <li>\u8fb9\u662f\u6709\u65b9\u5411\u7684\uff0c\u4e0d\u5b58\u5728\u65e0\u5411\u8fb9\u3002</li> <li>\u56db\u5143\u7ec4 <code>&lt;\u8d77\u70b9 VID\u3001Edge type\u3001\u8fb9\u6392\u5e8f\u503c (rank)\u3001\u7ec8\u70b9 VID&gt;</code> \u7528\u4e8e\u552f\u4e00\u6807\u8bc6\u4e00\u6761\u8fb9\u3002\u8fb9\u6ca1\u6709 EID\u3002</li> <li>\u4e00\u6761\u8fb9\u6709\u4e14\u4ec5\u6709\u4e00\u4e2a Edge type\u3002</li> <li>\u4e00\u6761\u8fb9\u6709\u4e14\u4ec5\u6709\u4e00\u4e2a Rank\uff0c\u7c7b\u578b\u4e3a int64\uff0c\u9ed8\u8ba4\u503c\u4e3a 0\u3002</li> </ul> <p>\u5173\u4e8e</p> <p>Rank \u53ef\u4ee5\u7528\u6765\u533a\u5206 Edge type\u3001\u8d77\u59cb\u70b9\u3001\u76ee\u7684\u70b9\u90fd\u76f8\u540c\u7684\u8fb9\u3002\u8be5\u503c\u5b8c\u5168\u7531\u7528\u6237\u81ea\u5df1\u6307\u5b9a\u3002       \u8bfb\u53d6\u65f6\u5fc5\u987b\u81ea\u884c\u53d6\u5f97\u5168\u90e8\u7684 Rank \u503c\u540e\u6392\u5e8f\u8fc7\u6ee4\u548c\u62fc\u63a5\u3002       \u4e0d\u652f\u6301\u8bf8\u5982<code>next(), pre(), head(), tail(), max(), min(), lessThan(), moreThan()</code>\u7b49\u51fd\u6570\u529f\u80fd\uff0c\u4e5f\u4e0d\u80fd\u901a\u8fc7\u521b\u5efa\u7d22\u5f15\u52a0\u901f\u8bbf\u95ee\u6216\u8005\u6761\u4ef6\u8fc7\u6ee4\u3002 </p> </li> </ul> <ul> <li> <p>\u6807\u7b7e\uff08Tag\uff09</p> <p>Tag \u7531\u4e00\u7ec4\u4e8b\u5148\u9884\u5b9a\u4e49\u7684\u5c5e\u6027\u6784\u6210\u3002</p> </li> </ul> <ul> <li> <p>\u8fb9\u7c7b\u578b\uff08Edge type\uff09</p> <p>Edge type \u7531\u4e00\u7ec4\u4e8b\u5148\u9884\u5b9a\u4e49\u7684\u5c5e\u6027\u6784\u6210\u3002</p> </li> </ul> <ul> <li> <p>\u5c5e\u6027\uff08Property\uff09</p> <p>\u5c5e\u6027\u662f\u6307\u4ee5\u952e\u503c\u5bf9\uff08Key-value pair\uff09\u5f62\u5f0f\u8868\u793a\u7684\u4fe1\u606f\u3002</p> </li> </ul> <p>Note</p> <p>Tag \u548c Edge type \u7684\u4f5c\u7528\uff0c\u7c7b\u4f3c\u4e8e\u5173\u7cfb\u578b\u6570\u636e\u5e93\u4e2d\u201c\u70b9\u8868\u201d\u548c\u201c\u8fb9\u8868\u201d\u7684\u8868\u7ed3\u6784\u3002</p>"},{"location":"1.introduction/2.data-model/#_3","title":"\u6709\u5411\u5c5e\u6027\u56fe","text":"<p>NebulaGraph \u4f7f\u7528\u6709\u5411\u5c5e\u6027\u56fe\u6a21\u578b\uff0c\u6307\u70b9\u548c\u8fb9\u6784\u6210\u7684\u56fe\uff0c\u8fd9\u4e9b\u8fb9\u662f\u6709\u65b9\u5411\u7684\uff0c\u70b9\u548c\u8fb9\u90fd\u53ef\u4ee5\u6709\u5c5e\u6027\u3002</p> <p>\u4e0b\u8868\u4e3a\u7bee\u7403\u8fd0\u52a8\u5458\u6570\u636e\u96c6\u7684\u7ed3\u6784\u793a\u4f8b\uff0c\u5305\u62ec\u4e24\u79cd\u7c7b\u578b\u7684\u70b9\uff08player\u3001team\uff09\u548c\u4e24\u79cd\u7c7b\u578b\u7684\u8fb9\uff08serve\u3001follow\uff09\u3002</p> \u7c7b\u578b \u540d\u79f0 \u5c5e\u6027\u540d\uff08\u6570\u636e\u7c7b\u578b\uff09 \u8bf4\u660e Tag player name (string) age\uff08int\uff09 \u8868\u793a\u7403\u5458\u3002 Tag team name (string) \u8868\u793a\u7403\u961f\u3002 Edge type serve start_year (int)  end_year (int) \u8868\u793a\u7403\u5458\u7684\u884c\u4e3a\u3002\u8be5\u884c\u4e3a\u5c06\u7403\u5458\u548c\u7403\u961f\u8054\u7cfb\u8d77\u6765\uff0c\u65b9\u5411\u662f\u4ece\u7403\u5458\u5230\u7403\u961f\u3002 Edge type follow degree (int) \u8868\u793a\u7403\u5458\u7684\u884c\u4e3a\u3002\u8be5\u884c\u4e3a\u5c06\u4e24\u4e2a\u7403\u5458\u8054\u7cfb\u8d77\u6765\uff0c\u65b9\u5411\u662f\u4ece\u4e00\u4e2a\u7403\u5458\u5230\u53e6\u4e00\u4e2a\u7403\u5458\u3002 <p>Note</p> <p>NebulaGraph \u4e2d\u6ca1\u6709\u65e0\u5411\u8fb9\uff0c\u53ea\u652f\u6301\u6709\u5411\u8fb9\u3002</p> <p>Compatibility</p> <p>\u7531\u4e8e NebulaGraph master \u7684\u6570\u636e\u6a21\u578b\u4e2d\uff0c\u5141\u8bb8\u5b58\u5728\"\u60ac\u6302\u8fb9\"\uff0c\u56e0\u6b64\u5728\u589e\u5220\u65f6\uff0c\u7528\u6237\u9700\u81ea\u884c\u4fdd\u8bc1\u201c\u4e00\u6761\u8fb9\u6240\u5bf9\u5e94\u7684\u8d77\u70b9\u548c\u7ec8\u70b9\u201d\u7684\u5b58\u5728\u6027\u3002\u8be6\u89c1 INSERT VERTEX\u3001DELETE VERTEX\u3001INSERT EDGE\u3001DELETE EDGE\u3002</p> <p>\u4e0d\u652f\u6301 openCypher \u4e2d\u7684 MERGE \u8bed\u53e5\u3002</p>"},{"location":"1.introduction/3.vid/","title":"\u70b9 VID","text":"<p>\u5728\u4e00\u4e2a\u56fe\u7a7a\u95f4\u4e2d\uff0c\u4e00\u4e2a\u70b9\u7531\u70b9\u7684 ID \u552f\u4e00\u6807\u8bc6\uff0c\u5373 VID \u6216 Vertex ID\u3002</p>"},{"location":"1.introduction/3.vid/#vid_1","title":"VID \u7684\u7279\u70b9","text":"<ul> <li>VID \u6570\u636e\u7c7b\u578b\u53ea\u53ef\u4ee5\u4e3a\u5b9a\u957f\u5b57\u7b26\u4e32<code>FIXED_STRING(&lt;N&gt;)</code>\u6216<code>INT64</code>\u3002\u4e00\u4e2a\u56fe\u7a7a\u95f4\u53ea\u80fd\u9009\u7528\u5176\u4e2d\u4e00\u79cd VID \u7c7b\u578b\u3002</li> </ul> <ul> <li>VID \u5728\u4e00\u4e2a\u56fe\u7a7a\u95f4\u4e2d\u5fc5\u987b\u552f\u4e00\uff0c\u5176\u4f5c\u7528\u7c7b\u4f3c\u4e8e\u5173\u7cfb\u578b\u6570\u636e\u5e93\u4e2d\u7684\u4e3b\u952e\uff08\u7d22\u5f15+\u552f\u4e00\u7ea6\u675f\uff09\u3002\u4f46\u4e0d\u540c\u56fe\u7a7a\u95f4\u4e2d\u7684 VID \u662f\u5b8c\u5168\u72ec\u7acb\u65e0\u5173\u7684\u3002</li> </ul> <ul> <li>\u70b9 VID \u7684\u751f\u6210\u65b9\u5f0f\u5fc5\u987b\u7531\u7528\u6237\u81ea\u884c\u6307\u5b9a\uff0c\u7cfb\u7edf\u4e0d\u63d0\u4f9b\u81ea\u589e ID \u6216\u8005 UUID\u3002</li> </ul> <ul> <li> <p>VID \u76f8\u540c\u7684\u70b9\uff0c\u4f1a\u88ab\u8ba4\u4e3a\u662f\u540c\u4e00\u4e2a\u70b9\u3002\u4f8b\u5982\uff1a</p> <ul> <li>VID \u76f8\u5f53\u4e8e\u4e00\u4e2a\u5b9e\u4f53\u7684\u552f\u4e00\u6807\u53f7\uff0c\u4f8b\u5982\u4e00\u4e2a\u4eba\u7684\u8eab\u4efd\u8bc1\u53f7\u3002Tag \u76f8\u5f53\u4e8e\u5b9e\u4f53\u6240\u62e5\u6709\u7684\u7c7b\u578b\uff0c\u4f8b\u5982\"\u6ef4\u6ef4\u53f8\u673a\"\u548c\"\u8001\u677f\"\u3002\u4e0d\u540c\u7684 Tag \u53c8\u76f8\u5e94\u5b9a\u4e49\u4e86\u4e24\u7ec4\u4e0d\u540c\u7684\u5c5e\u6027\uff0c\u4f8b\u5982\"\u9a7e\u7167\u53f7\u3001\u9a7e\u9f84\u3001\u63a5\u5355\u91cf\u3001\u63a5\u5355\u5c0f\u53f7\"\u548c\"\u5de5\u53f7\u3001\u85aa\u6c34\u3001\u503a\u52a1\u989d\u5ea6\u3001\u5546\u52a1\u7535\u8bdd\"\u3002</li> </ul> <ul> <li>\u540c\u65f6\u64cd\u4f5c\u76f8\u540c VID \u5e76\u4e14\u76f8\u540c Tag \u7684\u4e24\u6761<code>INSERT</code>\u8bed\u53e5\uff08\u5747\u65e0<code>IF NOT EXISTS</code>\u53c2\u6570\uff09\uff0c\u665a\u5199\u5165\u7684<code>INSERT</code>\u4f1a\u8986\u76d6\u5148\u5199\u5165\u7684\u3002</li> </ul> <ul> <li>\u540c\u65f6\u64cd\u4f5c\u5305\u542b\u76f8\u540c VID \u4f46\u662f\u4e24\u4e2a\u4e0d\u540c<code>TAG A</code>\u548c<code>TAG B</code>\u7684\u4e24\u6761<code>INSERT</code>\u8bed\u53e5\uff0c\u5bf9<code>TAG A</code>\u7684\u64cd\u4f5c\u4e0d\u4f1a\u5f71\u54cd<code>TAG B</code>\u3002</li> </ul> </li> </ul> <ul> <li>VID \u901a\u5e38\u4f1a\u88ab\uff08LSM-tree \u65b9\u5f0f\uff09\u7d22\u5f15\u5e76\u7f13\u5b58\u5728\u5185\u5b58\u4e2d\uff0c\u56e0\u6b64\u76f4\u63a5\u8bbf\u95ee VID \u7684\u6027\u80fd\u6700\u9ad8\u3002</li> </ul>"},{"location":"1.introduction/3.vid/#vid_2","title":"VID \u4f7f\u7528\u5efa\u8bae","text":"<ul> <li>NebulaGraph 1.x \u53ea\u652f\u6301 VID \u7c7b\u578b\u4e3a<code>INT64</code>\uff0c\u4ece 2.x \u5f00\u59cb\u652f\u6301<code>INT64</code>\u548c<code>FIXED_STRING(&lt;N&gt;)</code>\u3002\u5728<code>CREATE SPACE</code>\u4e2d\u901a\u8fc7\u53c2\u6570<code>vid_type</code>\u53ef\u4ee5\u6307\u5b9a VID \u7c7b\u578b\u3002</li> </ul> <ul> <li>\u53ef\u4ee5\u4f7f\u7528<code>id()</code>\u51fd\u6570\uff0c\u6307\u5b9a\u6216\u5f15\u7528\u8be5\u70b9\u7684 VID\u3002</li> </ul> <ul> <li>\u53ef\u4ee5\u4f7f\u7528<code>LOOKUP</code>\u6216\u8005<code>MATCH</code>\u8bed\u53e5\uff0c\u6765\u901a\u8fc7\u5c5e\u6027\u7d22\u5f15\u67e5\u627e\u5bf9\u5e94\u7684 VID\u3002</li> </ul> <ul> <li>\u6027\u80fd\u4e0a\uff0c\u76f4\u63a5\u901a\u8fc7 VID \u627e\u5230\u70b9\u7684\u8bed\u53e5\u6027\u80fd\u6700\u9ad8\uff0c\u4f8b\u5982<code>DELETE xxx WHERE id(xxx) == \"player100\"</code>\uff0c\u6216\u8005<code>GO FROM \"player100\"</code>\u7b49\u8bed\u53e5\u3002\u901a\u8fc7\u5c5e\u6027\u5148\u67e5\u627e VID\uff0c\u518d\u8fdb\u884c\u56fe\u64cd\u4f5c\u7684\u6027\u80fd\u4f1a\u53d8\u5dee\uff0c\u4f8b\u5982<code>LOOKUP | GO FROM $-.ids</code>\u7b49\u8bed\u53e5\uff0c\u76f8\u6bd4\u524d\u8005\u591a\u4e86\u4e00\u6b21\u5185\u5b58\u6216\u786c\u76d8\u7684\u968f\u673a\u8bfb\uff08<code>LOOKUP</code>\uff09\u4ee5\u53ca\u4e00\u6b21\u5e8f\u5217\u5316\uff08<code>|</code>\uff09\u3002</li> </ul>"},{"location":"1.introduction/3.vid/#vid_3","title":"VID \u751f\u6210\u5efa\u8bae","text":"<p>VID \u7684\u751f\u6210\u5de5\u4f5c\u5b8c\u5168\u4ea4\u7ed9\u5e94\u7528\u7aef\uff0c\u6709\u4e00\u4e9b\u901a\u7528\u7684\u5efa\u8bae\uff1a</p> <ul> <li>\uff08\u6700\u4f18\uff09\u901a\u8fc7\u6709\u552f\u4e00\u6027\u7684\u4e3b\u952e\u6216\u8005\u5c5e\u6027\u6765\u76f4\u63a5\u4f5c\u4e3a VID\uff1b\u5c5e\u6027\u8bbf\u95ee\u4f9d\u8d56\u4e8e VID;</li> </ul> <ul> <li>\u901a\u8fc7\u6709\u552f\u4e00\u6027\u7684\u5c5e\u6027\u7ec4\u5408\u6765\u751f\u6210 VID\uff0c\u5c5e\u6027\u8bbf\u95ee\u4f9d\u8d56\u4e8e\u5c5e\u6027\u7d22\u5f15\u3002</li> </ul> <ul> <li>\u901a\u8fc7 snowflake \u7b49\u7b97\u6cd5\u751f\u6210 VID\uff0c\u5c5e\u6027\u8bbf\u95ee\u4f9d\u8d56\u4e8e\u5c5e\u6027\u7d22\u5f15\u3002</li> </ul> <ul> <li>\u5982\u679c\u4e2a\u522b\u8bb0\u5f55\u7684\u4e3b\u952e\u7279\u522b\u957f\uff0c\u4f46\u7edd\u5927\u591a\u6570\u8bb0\u5f55\u7684\u4e3b\u952e\u90fd\u5f88\u77ed\u7684\u60c5\u51b5\uff0c\u4e0d\u8981\u5c06<code>FIXED_STRING(&lt;N&gt;)</code>\u7684<code>N</code>\u8bbe\u7f6e\u6210\u8d85\u5927\uff0c\u8fd9\u4f1a\u6d6a\u8d39\u5927\u91cf\u5185\u5b58\u548c\u786c\u76d8\uff0c\u4e5f\u4f1a\u964d\u4f4e\u6027\u80fd\u3002\u6b64\u65f6\u53ef\u901a\u8fc7 BASE64\uff0cMD5\uff0chash \u7f16\u7801\u52a0\u62fc\u63a5\u7684\u65b9\u5f0f\u6765\u751f\u6210\u3002</li> </ul> <ul> <li>\u5982\u679c\u7528 hash \u65b9\u5f0f\u751f\u6210 int64 VID\uff1a\u5728\u6709 10 \u4ebf\u4e2a\u70b9\u7684\u60c5\u51b5\u4e0b\uff0c\u53d1\u751f hash \u51b2\u7a81\u7684\u6982\u7387\u5927\u7ea6\u662f 1/10\u3002\u8fb9\u7684\u6570\u91cf\u4e0e\u78b0\u649e\u7684\u6982\u7387\u65e0\u5173\u3002</li> </ul>"},{"location":"1.introduction/3.vid/#vid_4","title":"\u5b9a\u4e49\u548c\u4fee\u6539 VID \u4e0e\u5176\u6570\u636e\u7c7b\u578b","text":"<p>VID \u7684\u6570\u636e\u7c7b\u578b\u5fc5\u987b\u5728\u521b\u5efa\u56fe\u7a7a\u95f4\u65f6\u5b9a\u4e49\uff0c\u4e14\u4e00\u65e6\u5b9a\u4e49\u65e0\u6cd5\u4fee\u6539\u3002</p> <p>VID \u5fc5\u987b\u5728\u63d2\u5165\u70b9\u65f6\u8bbe\u7f6e\uff0c\u4e14\u4e00\u65e6\u8bbe\u7f6e\u65e0\u6cd5\u4fee\u6539\u3002</p>"},{"location":"1.introduction/3.vid/#start_vid","title":"\"\u67e5\u8be2\u8d77\u59cb\u70b9\"(<code>start vid</code>) \u4e0e\u5168\u5c40\u626b\u63cf","text":"<p>\u7edd\u5927\u591a\u6570\u60c5\u51b5\u4e0b\uff0cNebulaGraph \u7684\u67e5\u8be2\u8bed\u53e5\uff08<code>MATCH</code>\u3001<code>GO</code>\u3001<code>LOOKUP</code>\uff09\u7684\u6267\u884c\u8ba1\u5212\uff0c\u5fc5\u987b\u8981\u901a\u8fc7\u4e00\u5b9a\u65b9\u5f0f\u627e\u5230\u67e5\u8be2\u8d77\u59cb\u70b9\u7684 VID\uff08<code>start vid</code>\uff09\u3002</p> <p>\u5b9a\u4f4d <code>start vid</code> \u53ea\u6709\u4e24\u79cd\u65b9\u5f0f\uff1a</p> <ol> <li> <p>\u4f8b\u5982 <code>GO FROM \"player100\" OVER</code> \u662f\u5728\u8bed\u53e5\u4e2d\u663e\u5f0f\u7684\u6307\u660e <code>start vid</code> \u662f \"player100\"\uff1b</p> </li> <li> <p>\u4f8b\u5982 <code>LOOKUP ON player WHERE player.name == \"Tony Parker\"</code> \u6216\u8005 <code>MATCH (v:player {name:\"Tony Parker\"})</code>\uff0c\u662f\u901a\u8fc7\u5c5e\u6027 <code>player.name</code> \u7684\u7d22\u5f15\u6765\u5b9a\u4f4d\u5230 <code>start vid</code>\uff1b</p> </li> </ol>"},{"location":"1.introduction/3.nebula-graph-architecture/1.architecture-overview/","title":"NebulaGraph \u67b6\u6784\u603b\u89c8","text":"<p>NebulaGraph \u7531\u4e09\u79cd\u670d\u52a1\u6784\u6210\uff1aGraph \u670d\u52a1\u3001Meta \u670d\u52a1\u548c Storage \u670d\u52a1\uff0c\u662f\u4e00\u79cd\u5b58\u50a8\u4e0e\u8ba1\u7b97\u5206\u79bb\u7684\u67b6\u6784\u3002</p> <p>\u6bcf\u4e2a\u670d\u52a1\u90fd\u6709\u53ef\u6267\u884c\u7684\u4e8c\u8fdb\u5236\u6587\u4ef6\u548c\u5bf9\u5e94\u8fdb\u7a0b\uff0c\u7528\u6237\u53ef\u4ee5\u4f7f\u7528\u8fd9\u4e9b\u4e8c\u8fdb\u5236\u6587\u4ef6\u5728\u4e00\u4e2a\u6216\u591a\u4e2a\u8ba1\u7b97\u673a\u4e0a\u90e8\u7f72 NebulaGraph \u96c6\u7fa4\u3002</p> <p>\u4e0b\u56fe\u5c55\u793a\u4e86 NebulaGraph \u96c6\u7fa4\u7684\u7ecf\u5178\u67b6\u6784\u3002</p> <p></p>"},{"location":"1.introduction/3.nebula-graph-architecture/1.architecture-overview/#meta","title":"Meta \u670d\u52a1","text":"<p>\u5728 NebulaGraph \u67b6\u6784\u4e2d\uff0cMeta \u670d\u52a1\u662f\u7531 nebula-metad \u8fdb\u7a0b\u63d0\u4f9b\u7684\uff0c\u8d1f\u8d23\u6570\u636e\u7ba1\u7406\uff0c\u4f8b\u5982 Schema \u64cd\u4f5c\u3001\u96c6\u7fa4\u7ba1\u7406\u548c\u7528\u6237\u6743\u9650\u7ba1\u7406\u7b49\u3002</p> <p>Meta \u670d\u52a1\u7684\u8be6\u7ec6\u8bf4\u660e\uff0c\u8bf7\u53c2\u89c1 Meta \u670d\u52a1\u3002</p>"},{"location":"1.introduction/3.nebula-graph-architecture/1.architecture-overview/#graph_storage","title":"Graph \u670d\u52a1\u548c Storage \u670d\u52a1","text":"<p>NebulaGraph \u91c7\u7528\u8ba1\u7b97\u5b58\u50a8\u5206\u79bb\u67b6\u6784\u3002Graph \u670d\u52a1\u8d1f\u8d23\u5904\u7406\u8ba1\u7b97\u8bf7\u6c42\uff0cStorage \u670d\u52a1\u8d1f\u8d23\u5b58\u50a8\u6570\u636e\u3002\u5b83\u4eec\u7531\u4e0d\u540c\u7684\u8fdb\u7a0b\u63d0\u4f9b\uff0cGraph \u670d\u52a1\u662f\u7531 nebula-graphd \u8fdb\u7a0b\u63d0\u4f9b\uff0cStorage \u670d\u52a1\u662f\u7531 nebula-storaged \u8fdb\u7a0b\u63d0\u4f9b\u3002\u8ba1\u7b97\u5b58\u50a8\u5206\u79bb\u67b6\u6784\u7684\u4f18\u52bf\u5982\u4e0b\uff1a</p> <ul> <li>\u6613\u6269\u5c55<p>\u5206\u5e03\u5f0f\u67b6\u6784\u4fdd\u8bc1\u4e86 Graph \u670d\u52a1\u548c Storage \u670d\u52a1\u7684\u7075\u6d3b\u6027\uff0c\u65b9\u4fbf\u6269\u5bb9\u548c\u7f29\u5bb9\u3002</p> </li> </ul> <ul> <li>\u9ad8\u53ef\u7528<p>\u5982\u679c\u63d0\u4f9b Graph \u670d\u52a1\u7684\u670d\u52a1\u5668\u6709\u4e00\u90e8\u5206\u51fa\u73b0\u6545\u969c\uff0c\u5176\u4f59\u670d\u52a1\u5668\u53ef\u4ee5\u7ee7\u7eed\u4e3a\u5ba2\u6237\u7aef\u63d0\u4f9b\u670d\u52a1\uff0c\u800c\u4e14 Storage \u670d\u52a1\u5b58\u50a8\u7684\u6570\u636e\u4e0d\u4f1a\u4e22\u5931\u3002\u670d\u52a1\u6062\u590d\u901f\u5ea6\u8f83\u5feb\uff0c\u751a\u81f3\u80fd\u505a\u5230\u7528\u6237\u65e0\u611f\u77e5\u3002</p> </li> </ul> <ul> <li>\u8282\u7ea6\u6210\u672c<p>\u8ba1\u7b97\u5b58\u50a8\u5206\u79bb\u67b6\u6784\u80fd\u591f\u63d0\u9ad8\u8d44\u6e90\u5229\u7528\u7387\uff0c\u800c\u4e14\u53ef\u6839\u636e\u4e1a\u52a1\u9700\u6c42\u7075\u6d3b\u63a7\u5236\u6210\u672c\u3002</p> </li> </ul> <ul> <li>\u66f4\u591a\u53ef\u80fd\u6027<p>\u57fa\u4e8e\u5206\u79bb\u67b6\u6784\u7684\u7279\u6027\uff0cGraph \u670d\u52a1\u5c06\u53ef\u4ee5\u5728\u66f4\u591a\u7c7b\u578b\u7684\u5b58\u50a8\u5f15\u64ce\u4e0a\u5355\u72ec\u8fd0\u884c\uff0cStorage \u670d\u52a1\u4e5f\u53ef\u4ee5\u4e3a\u591a\u79cd\u76ee\u7684\u8ba1\u7b97\u5f15\u64ce\u63d0\u4f9b\u670d\u52a1\u3002</p> </li> </ul> <p>Graph \u670d\u52a1\u548c Storage \u670d\u52a1\u7684\u8be6\u7ec6\u8bf4\u660e\uff0c\u8bf7\u53c2\u89c1 Graph \u670d\u52a1\u548c Storage \u670d\u52a1\u3002</p>"},{"location":"1.introduction/3.nebula-graph-architecture/2.meta-service/","title":"Meta \u670d\u52a1","text":"<p>\u672c\u6587\u4ecb\u7ecd Meta \u670d\u52a1\u7684\u67b6\u6784\u548c\u529f\u80fd\u3002</p>"},{"location":"1.introduction/3.nebula-graph-architecture/2.meta-service/#meta_1","title":"Meta \u670d\u52a1\u67b6\u6784","text":"<p>Meta \u670d\u52a1\u662f\u7531 nebula-metad \u8fdb\u7a0b\u63d0\u4f9b\u7684\uff0c\u7528\u6237\u53ef\u4ee5\u6839\u636e\u573a\u666f\u914d\u7f6e nebula-metad \u8fdb\u7a0b\u6570\u91cf\uff1a</p> <ul> <li>\u6d4b\u8bd5\u73af\u5883\u4e2d\uff0c\u7528\u6237\u53ef\u4ee5\u5728 NebulaGraph \u96c6\u7fa4\u4e2d\u90e8\u7f72 1 \u4e2a\u6216 3 \u4e2a nebula-metad \u8fdb\u7a0b\u3002\u5982\u679c\u8981\u90e8\u7f72 3 \u4e2a\uff0c\u7528\u6237\u53ef\u4ee5\u5c06\u5b83\u4eec\u90e8\u7f72\u5728 1 \u53f0\u673a\u5668\u4e0a\uff0c\u6216\u8005\u5206\u522b\u90e8\u7f72\u5728\u4e0d\u540c\u7684\u673a\u5668\u4e0a\u3002</li> <li>\u751f\u4ea7\u73af\u5883\u4e2d\uff0c\u5efa\u8bae\u5728 NebulaGraph \u96c6\u7fa4\u4e2d\u90e8\u7f72 3 \u4e2a nebula-metad \u8fdb\u7a0b\u3002\u8bf7\u5c06\u8fd9\u4e9b\u8fdb\u7a0b\u90e8\u7f72\u5728\u4e0d\u540c\u7684\u673a\u5668\u4e0a\u4ee5\u4fdd\u8bc1\u9ad8\u53ef\u7528\u3002</li> </ul> <p>\u6240\u6709 nebula-metad \u8fdb\u7a0b\u6784\u6210\u4e86\u57fa\u4e8e Raft \u534f\u8bae\u7684\u96c6\u7fa4\uff0c\u5176\u4e2d\u4e00\u4e2a\u8fdb\u7a0b\u662f leader\uff0c\u5176\u4ed6\u8fdb\u7a0b\u90fd\u662f follower\u3002</p> <p>leader \u662f\u7531\u591a\u6570\u6d3e\u9009\u4e3e\u51fa\u6765\uff0c\u53ea\u6709 leader \u80fd\u591f\u5bf9\u5ba2\u6237\u7aef\u6216\u5176\u4ed6\u7ec4\u4ef6\u63d0\u4f9b\u670d\u52a1\uff0c\u5176\u4ed6 follower \u4f5c\u4e3a\u5019\u8865\uff0c\u5982\u679c leader \u51fa\u73b0\u6545\u969c\uff0c\u4f1a\u5728\u6240\u6709 follower \u4e2d\u9009\u4e3e\u51fa\u65b0\u7684 leader\u3002</p> <p>Note</p> <p>leader \u548c follower \u7684\u6570\u636e\u901a\u8fc7 Raft \u534f\u8bae\u4fdd\u6301\u4e00\u81f4\uff0c\u56e0\u6b64 leader \u6545\u969c\u548c\u9009\u4e3e\u65b0 leader \u4e0d\u4f1a\u5bfc\u81f4\u6570\u636e\u4e0d\u4e00\u81f4\u3002\u66f4\u591a\u5173\u4e8e Raft \u7684\u4ecb\u7ecd\u89c1 Storage \u670d\u52a1\u3002</p>"},{"location":"1.introduction/3.nebula-graph-architecture/2.meta-service/#meta_2","title":"Meta \u670d\u52a1\u529f\u80fd","text":""},{"location":"1.introduction/3.nebula-graph-architecture/2.meta-service/#_1","title":"\u7ba1\u7406\u7528\u6237\u8d26\u53f7","text":"<p>Meta \u670d\u52a1\u4e2d\u5b58\u50a8\u4e86\u7528\u6237\u7684\u8d26\u53f7\u548c\u6743\u9650\u4fe1\u606f\uff0c\u5f53\u5ba2\u6237\u7aef\u901a\u8fc7\u8d26\u53f7\u53d1\u9001\u8bf7\u6c42\u7ed9 Meta \u670d\u52a1\uff0cMeta \u670d\u52a1\u4f1a\u68c0\u67e5\u8d26\u53f7\u4fe1\u606f\uff0c\u4ee5\u53ca\u8be5\u8d26\u53f7\u662f\u5426\u6709\u5bf9\u5e94\u7684\u8bf7\u6c42\u6743\u9650\u3002</p> <p>\u66f4\u591a NebulaGraph \u7684\u8bbf\u95ee\u63a7\u5236\u8bf4\u660e\uff0c\u8bf7\u53c2\u89c1\u8eab\u4efd\u9a8c\u8bc1\u3002</p>"},{"location":"1.introduction/3.nebula-graph-architecture/2.meta-service/#_2","title":"\u7ba1\u7406\u5206\u7247","text":"<p>Meta \u670d\u52a1\u8d1f\u8d23\u5b58\u50a8\u548c\u7ba1\u7406\u5206\u7247\u7684\u4f4d\u7f6e\u4fe1\u606f\uff0c\u5e76\u4e14\u4fdd\u8bc1\u5206\u7247\u7684\u8d1f\u8f7d\u5747\u8861\u3002</p>"},{"location":"1.introduction/3.nebula-graph-architecture/2.meta-service/#_3","title":"\u7ba1\u7406\u56fe\u7a7a\u95f4","text":"<p>NebulaGraph \u652f\u6301\u591a\u4e2a\u56fe\u7a7a\u95f4\uff0c\u4e0d\u540c\u56fe\u7a7a\u95f4\u5185\u7684\u6570\u636e\u662f\u5b89\u5168\u9694\u79bb\u7684\u3002Meta \u670d\u52a1\u5b58\u50a8\u6240\u6709\u56fe\u7a7a\u95f4\u7684\u5143\u6570\u636e\uff08\u975e\u5b8c\u6574\u6570\u636e\uff09\uff0c\u5e76\u8ddf\u8e2a\u6570\u636e\u7684\u53d8\u66f4\uff0c\u4f8b\u5982\u589e\u52a0\u6216\u5220\u9664\u56fe\u7a7a\u95f4\u3002</p>"},{"location":"1.introduction/3.nebula-graph-architecture/2.meta-service/#schema","title":"\u7ba1\u7406 Schema \u4fe1\u606f","text":"<p>NebulaGraph \u662f\u5f3a\u7c7b\u578b\u56fe\u6570\u636e\u5e93\uff0c\u5b83\u7684 Schema \u5305\u62ec Tag\u3001Edge type\u3001Tag \u5c5e\u6027\u548c Edge type \u5c5e\u6027\u3002</p> <p>Meta \u670d\u52a1\u4e2d\u5b58\u50a8\u4e86 Schema \u4fe1\u606f\uff0c\u540c\u65f6\u8fd8\u8d1f\u8d23 Schema \u7684\u6dfb\u52a0\u3001\u4fee\u6539\u548c\u5220\u9664\uff0c\u5e76\u8bb0\u5f55\u5b83\u4eec\u7684\u7248\u672c\u3002</p> <p>\u66f4\u591a NebulaGraph \u7684 Schema \u4fe1\u606f\uff0c\u8bf7\u53c2\u89c1\u6570\u636e\u6a21\u578b\u3002</p>"},{"location":"1.introduction/3.nebula-graph-architecture/2.meta-service/#ttl","title":"\u7ba1\u7406 TTL \u4fe1\u606f","text":"<p>Meta \u670d\u52a1\u5b58\u50a8 TTL\uff08Time To Live\uff09\u5b9a\u4e49\u4fe1\u606f\uff0c\u53ef\u4ee5\u7528\u4e8e\u8bbe\u7f6e\u6570\u636e\u751f\u547d\u5468\u671f\u3002\u6570\u636e\u8fc7\u671f\u540e\uff0c\u4f1a\u7531 Storage \u670d\u52a1\u8fdb\u884c\u5904\u7406\uff0c\u5177\u4f53\u8fc7\u7a0b\u53c2\u89c1 TTL\u3002</p>"},{"location":"1.introduction/3.nebula-graph-architecture/2.meta-service/#_4","title":"\u7ba1\u7406\u4f5c\u4e1a","text":"<p>Meta \u670d\u52a1\u4e2d\u7684\u4f5c\u4e1a\u7ba1\u7406\u6a21\u5757\u8d1f\u8d23\u4f5c\u4e1a\u7684\u521b\u5efa\u3001\u6392\u961f\u3001\u67e5\u8be2\u548c\u5220\u9664\u3002</p>"},{"location":"1.introduction/3.nebula-graph-architecture/3.graph-service/","title":"Graph \u670d\u52a1","text":"<p>Graph \u670d\u52a1\u4e3b\u8981\u8d1f\u8d23\u5904\u7406\u67e5\u8be2\u8bf7\u6c42\uff0c\u5305\u62ec\u89e3\u6790\u67e5\u8be2\u8bed\u53e5\u3001\u6821\u9a8c\u8bed\u53e5\u3001\u751f\u6210\u6267\u884c\u8ba1\u5212\u4ee5\u53ca\u6309\u7167\u6267\u884c\u8ba1\u5212\u6267\u884c\u56db\u4e2a\u5927\u6b65\u9aa4\uff0c\u672c\u6587\u5c06\u57fa\u4e8e\u8fd9\u4e9b\u6b65\u9aa4\u4ecb\u7ecd Graph \u670d\u52a1\u3002</p>"},{"location":"1.introduction/3.nebula-graph-architecture/3.graph-service/#graph_1","title":"Graph \u670d\u52a1\u67b6\u6784","text":"<p>\u67e5\u8be2\u8bf7\u6c42\u53d1\u9001\u5230 Graph \u670d\u52a1\u540e\uff0c\u4f1a\u7531\u5982\u4e0b\u6a21\u5757\u4f9d\u6b21\u5904\u7406\uff1a</p> <ol> <li> <p>Parser\uff1a\u8bcd\u6cd5\u8bed\u6cd5\u89e3\u6790\u6a21\u5757\u3002</p> </li> <li> <p>Validator\uff1a\u8bed\u4e49\u6821\u9a8c\u6a21\u5757\u3002</p> </li> <li> <p>Planner\uff1a\u6267\u884c\u8ba1\u5212\u4e0e\u4f18\u5316\u5668\u6a21\u5757\u3002</p> </li> <li> <p>Executor\uff1a\u6267\u884c\u5f15\u64ce\u6a21\u5757\u3002</p> </li> </ol>"},{"location":"1.introduction/3.nebula-graph-architecture/3.graph-service/#parser","title":"Parser","text":"<p>Parser \u6a21\u5757\u6536\u5230\u8bf7\u6c42\u540e\uff0c\u901a\u8fc7 Flex\uff08\u8bcd\u6cd5\u5206\u6790\u5de5\u5177\uff09\u548c Bison\uff08\u8bed\u6cd5\u5206\u6790\u5de5\u5177\uff09\u751f\u6210\u7684\u8bcd\u6cd5\u8bed\u6cd5\u89e3\u6790\u5668\uff0c\u5c06\u8bed\u53e5\u8f6c\u6362\u4e3a\u62bd\u8c61\u8bed\u6cd5\u6811\uff08AST\uff09\uff0c\u5728\u8bed\u6cd5\u89e3\u6790\u9636\u6bb5\u4f1a\u62e6\u622a\u4e0d\u7b26\u5408\u8bed\u6cd5\u89c4\u5219\u7684\u8bed\u53e5\u3002</p> <p>\u4f8b\u5982<code>GO FROM \"Tim\" OVER like WHERE properties(edge).likeness &gt; 8.0 YIELD dst(edge)</code>\u8bed\u53e5\u8f6c\u6362\u7684 AST \u5982\u4e0b\u3002</p> <p></p>"},{"location":"1.introduction/3.nebula-graph-architecture/3.graph-service/#validator","title":"Validator","text":"<p>Validator \u6a21\u5757\u5bf9\u751f\u6210\u7684 AST \u8fdb\u884c\u8bed\u4e49\u6821\u9a8c\uff0c\u4e3b\u8981\u5305\u62ec\uff1a</p> <ul> <li>\u6821\u9a8c\u5143\u6570\u636e\u4fe1\u606f<p>\u6821\u9a8c\u8bed\u53e5\u4e2d\u7684\u5143\u6570\u636e\u4fe1\u606f\u662f\u5426\u6b63\u786e\u3002</p> <p>\u4f8b\u5982\u89e3\u6790 <code>OVER</code>\u3001<code>WHERE</code>\u548c<code>YIELD</code> \u8bed\u53e5\u65f6\uff0c\u4f1a\u67e5\u627e Schema \u6821\u9a8c Edge type\u3001Tag \u7684\u4fe1\u606f\u662f\u5426\u5b58\u5728\uff0c\u6216\u8005\u63d2\u5165\u6570\u636e\u65f6\u6821\u9a8c\u63d2\u5165\u7684\u6570\u636e\u7c7b\u578b\u548c Schema \u4e2d\u7684\u662f\u5426\u4e00\u81f4\u3002</p> </li> </ul> <ul> <li>\u6821\u9a8c\u4e0a\u4e0b\u6587\u5f15\u7528\u4fe1\u606f<p>\u6821\u9a8c\u5f15\u7528\u7684\u53d8\u91cf\u662f\u5426\u5b58\u5728\u6216\u8005\u5f15\u7528\u7684\u5c5e\u6027\u662f\u5426\u5c5e\u4e8e\u53d8\u91cf\u3002</p> <p>\u4f8b\u5982\u8bed\u53e5<code>$var = GO FROM \"Tim\" OVER like YIELD dst(edge) AS ID; GO FROM $var.ID OVER serve YIELD dst(edge)</code>\uff0cValidator \u6a21\u5757\u9996\u5148\u4f1a\u68c0\u67e5\u53d8\u91cf <code>var</code> \u662f\u5426\u5b9a\u4e49\uff0c\u5176\u6b21\u518d\u68c0\u67e5\u5c5e\u6027 <code>ID</code> \u662f\u5426\u5c5e\u4e8e\u53d8\u91cf <code>var</code>\u3002</p> </li> </ul> <ul> <li>\u6821\u9a8c\u7c7b\u578b\u63a8\u65ad<p>\u63a8\u65ad\u8868\u8fbe\u5f0f\u7684\u7ed3\u679c\u7c7b\u578b\uff0c\u5e76\u6839\u636e\u5b50\u53e5\u6821\u9a8c\u7c7b\u578b\u662f\u5426\u6b63\u786e\u3002</p> <p>\u4f8b\u5982 <code>WHERE</code> \u5b50\u53e5\u8981\u6c42\u7ed3\u679c\u662f <code>bool</code>\u3001<code>null</code> \u6216\u8005 <code>empty</code>\u3002</p> </li> </ul> <ul> <li>\u6821\u9a8c <code>*</code> \u4ee3\u8868\u7684\u4fe1\u606f<p>\u67e5\u8be2\u8bed\u53e5\u4e2d\u5305\u542b <code>*</code> \u65f6\uff0c\u6821\u9a8c\u5b50\u53e5\u65f6\u9700\u8981\u5c06 <code>*</code> \u6d89\u53ca\u7684 Schema \u90fd\u8fdb\u884c\u6821\u9a8c\u3002</p> <p>\u4f8b\u5982\u8bed\u53e5<code>GO FROM \"Tim\" OVER * YIELD dst(edge), properties(edge).likeness, dst(edge)</code>\uff0c\u6821\u9a8c<code>OVER</code>\u5b50\u53e5\u65f6\u9700\u8981\u6821\u9a8c\u6240\u6709\u7684 Edge type\uff0c\u5982\u679c Edge type \u5305\u542b <code>like</code>\u548c<code>serve</code>\uff0c\u8be5\u8bed\u53e5\u4f1a\u5c55\u5f00\u4e3a<code>GO FROM \"Tim\" OVER like,serve YIELD dst(edge), properties(edge).likeness, dst(edge)</code>\u3002</p> </li> </ul> <ul> <li>\u6821\u9a8c\u8f93\u5165\u8f93\u51fa<p>\u6821\u9a8c\u7ba1\u9053\u7b26\uff08|\uff09\u524d\u540e\u7684\u4e00\u81f4\u6027\u3002</p> <p>\u4f8b\u5982\u8bed\u53e5<code>GO FROM \"Tim\" OVER like YIELD dst(edge) AS ID | GO FROM $-.ID OVER serve YIELD dst(edge)</code>\uff0cValidator \u6a21\u5757\u4f1a\u6821\u9a8c <code>$-.ID</code> \u5728\u7ba1\u9053\u7b26\u5de6\u4fa7\u662f\u5426\u5df2\u7ecf\u5b9a\u4e49\u3002</p> </li> </ul> <p>\u6821\u9a8c\u5b8c\u6210\u540e\uff0cValidator \u6a21\u5757\u8fd8\u4f1a\u751f\u6210\u4e00\u4e2a\u9ed8\u8ba4\u53ef\u6267\u884c\uff0c\u4f46\u662f\u672a\u8fdb\u884c\u4f18\u5316\u7684\u6267\u884c\u8ba1\u5212\uff0c\u5b58\u50a8\u5728\u76ee\u5f55 <code>src/planner</code> \u5185\u3002</p>"},{"location":"1.introduction/3.nebula-graph-architecture/3.graph-service/#planner","title":"Planner","text":"<p>\u5982\u679c\u914d\u7f6e\u6587\u4ef6 <code>nebula-graphd.conf</code> \u4e2d <code>enable_optimizer</code> \u8bbe\u7f6e\u4e3a <code>false</code>\uff0cPlanner \u6a21\u5757\u4e0d\u4f1a\u4f18\u5316 Validator \u6a21\u5757\u751f\u6210\u7684\u6267\u884c\u8ba1\u5212\uff0c\u800c\u662f\u76f4\u63a5\u4ea4\u7ed9 Executor \u6a21\u5757\u6267\u884c\u3002</p> <p>\u5982\u679c\u914d\u7f6e\u6587\u4ef6 <code>nebula-graphd.conf</code>\u4e2d<code>enable_optimizer</code> \u8bbe\u7f6e\u4e3a <code>true</code>\uff0cPlanner \u6a21\u5757\u4f1a\u5bf9 Validator \u6a21\u5757\u751f\u6210\u7684\u6267\u884c\u8ba1\u5212\u8fdb\u884c\u4f18\u5316\u3002\u5982\u4e0b\u56fe\u6240\u793a\u3002</p> <p></p> <ul> <li>\u4f18\u5316\u524d<p>\u5982\u4e0a\u56fe\u53f3\u4fa7\u672a\u4f18\u5316\u7684\u6267\u884c\u8ba1\u5212\uff0c\u6bcf\u4e2a\u8282\u70b9\u4f9d\u8d56\u53e6\u4e00\u4e2a\u8282\u70b9\uff0c\u4f8b\u5982\u6839\u8282\u70b9 <code>Project</code> \u4f9d\u8d56 <code>Filter</code>\u3001<code>Filter</code> \u4f9d\u8d56 <code>GetNeighbor</code>\uff0c\u6700\u7ec8\u627e\u5230\u53f6\u5b50\u8282\u70b9 <code>Start</code>\uff0c\u624d\u80fd\u5f00\u59cb\u6267\u884c\uff08\u5e76\u975e\u771f\u6b63\u6267\u884c\uff09\u3002</p> <p>\u5728\u8fd9\u4e2a\u8fc7\u7a0b\u4e2d\uff0c\u6bcf\u4e2a\u8282\u70b9\u4f1a\u6709\u5bf9\u5e94\u7684\u8f93\u5165\u53d8\u91cf\u548c\u8f93\u51fa\u53d8\u91cf\uff0c\u8fd9\u4e9b\u53d8\u91cf\u5b58\u50a8\u5728\u4e00\u4e2a\u54c8\u5e0c\u8868\u4e2d\u3002\u7531\u4e8e\u6267\u884c\u8ba1\u5212\u4e0d\u662f\u771f\u6b63\u6267\u884c\uff0c\u6240\u4ee5\u54c8\u5e0c\u8868\u4e2d\u6bcf\u4e2a key \u7684 value \u503c\u90fd\u4e3a\u7a7a\uff08\u9664\u4e86 <code>Start</code> \u8282\u70b9\uff0c\u8d77\u59cb\u6570\u636e\u4f1a\u5b58\u50a8\u5728\u8be5\u8282\u70b9\u7684\u8f93\u5165\u53d8\u91cf\u4e2d\uff09\u3002\u54c8\u5e0c\u8868\u5b9a\u4e49\u5728\u4ed3\u5e93 <code>nebula-graph</code> \u5185\u7684 <code>src/context/ExecutionContext.cpp</code> \u4e2d\u3002</p> <p>\u4f8b\u5982\u54c8\u5e0c\u8868\u7684\u540d\u79f0\u4e3a <code>ResultMap</code>\uff0c\u5728\u5efa\u7acb <code>Filter</code> \u8fd9\u4e2a\u8282\u70b9\u65f6\uff0c\u5b9a\u4e49\u8be5\u8282\u70b9\u4ece <code>ResultMap[\"GN1\"]</code> \u4e2d\u8bfb\u53d6\u6570\u636e\uff0c\u7136\u540e\u5c06\u7ed3\u679c\u5b58\u50a8\u5728 <code>ResultMap[\"Filter2\"]</code> \u4e2d\uff0c\u4f9d\u6b21\u7c7b\u63a8\uff0c\u5c06\u6bcf\u4e2a\u8282\u70b9\u7684\u8f93\u5165\u8f93\u51fa\u90fd\u786e\u5b9a\u597d\u3002</p> </li> </ul> <ul> <li>\u4f18\u5316\u8fc7\u7a0b<p>Planner \u6a21\u5757\u76ee\u524d\u7684\u4f18\u5316\u65b9\u5f0f\u662f RBO\uff08rule-based optimization\uff09\uff0c\u5373\u9884\u5b9a\u4e49\u4f18\u5316\u89c4\u5219\uff0c\u7136\u540e\u5bf9 Validator \u6a21\u5757\u751f\u6210\u7684\u9ed8\u8ba4\u6267\u884c\u8ba1\u5212\u8fdb\u884c\u4f18\u5316\u3002\u65b0\u7684\u4f18\u5316\u89c4\u5219 CBO\uff08cost-based optimization\uff09\u6b63\u5728\u5f00\u53d1\u4e2d\u3002\u4f18\u5316\u4ee3\u7801\u5b58\u50a8\u5728\u4ed3\u5e93 <code>nebula-graph</code> \u7684\u76ee\u5f55 <code>src/optimizer/</code> \u5185\u3002</p> <p>RBO \u662f\u4e00\u4e2a\u81ea\u5e95\u5411\u4e0a\u7684\u63a2\u7d22\u8fc7\u7a0b\uff0c\u5373\u5bf9\u4e8e\u6bcf\u4e2a\u89c4\u5219\u800c\u8a00\uff0c\u90fd\u4f1a\u7531\u6267\u884c\u8ba1\u5212\u7684\u6839\u8282\u70b9\uff08\u793a\u4f8b\u662f<code>Project</code>\uff09\u5f00\u59cb\uff0c\u4e00\u6b65\u6b65\u5411\u4e0b\u63a2\u7d22\u5230\u6700\u5e95\u5c42\u7684\u8282\u70b9\uff0c\u5728\u8fc7\u7a0b\u4e2d\u67e5\u770b\u662f\u5426\u53ef\u4ee5\u5339\u914d\u89c4\u5219\u3002</p> <p>\u5982\u4e0a\u56fe\u6240\u793a\uff0c\u63a2\u7d22\u5230\u8282\u70b9 <code>Filter</code> \u65f6\uff0c\u53d1\u73b0\u4f9d\u8d56\u7684\u8282\u70b9\u662f <code>GetNeighbor</code>\uff0c\u5339\u914d\u9884\u5148\u5b9a\u4e49\u7684\u89c4\u5219\uff0c\u5c31\u4f1a\u5c06 <code>Filter</code> \u878d\u5165\u5230 <code>GetNeighbor</code> \u4e2d\uff0c\u7136\u540e\u79fb\u9664\u8282\u70b9 <code>Filter</code>\uff0c\u7ee7\u7eed\u5339\u914d\u4e0b\u4e00\u4e2a\u89c4\u5219\u3002\u5728\u6267\u884c\u9636\u6bb5\uff0c\u5f53\u7b97\u5b50 <code>GetNeighbor</code> \u8c03\u7528 Storage \u670d\u52a1\u7684\u63a5\u53e3\u83b7\u53d6\u4e00\u4e2a\u70b9\u7684\u90bb\u8fb9\u65f6\uff0cStorage \u670d\u52a1\u5185\u90e8\u4f1a\u76f4\u63a5\u5c06\u4e0d\u7b26\u5408\u6761\u4ef6\u7684\u8fb9\u8fc7\u6ee4\u6389\uff0c\u8fd9\u6837\u53ef\u4ee5\u6781\u5927\u5730\u51cf\u5c11\u4f20\u8f93\u7684\u6570\u636e\u91cf\uff0c\u8be5\u4f18\u5316\u79f0\u4e3a\u8fc7\u6ee4\u4e0b\u63a8\u3002</p> </li> </ul>"},{"location":"1.introduction/3.nebula-graph-architecture/3.graph-service/#executor","title":"Executor","text":"<p>Executor \u6a21\u5757\u5305\u542b\u8c03\u5ea6\u5668\uff08Scheduler\uff09\u548c\u6267\u884c\u5668\uff08Executor\uff09\uff0c\u901a\u8fc7\u8c03\u5ea6\u5668\u8c03\u5ea6\u6267\u884c\u8ba1\u5212\uff0c\u8ba9\u6267\u884c\u5668\u6839\u636e\u6267\u884c\u8ba1\u5212\u751f\u6210\u5bf9\u5e94\u7684\u6267\u884c\u7b97\u5b50\uff0c\u4ece\u53f6\u5b50\u8282\u70b9\u5f00\u59cb\u6267\u884c\uff0c\u76f4\u5230\u6839\u8282\u70b9\u7ed3\u675f\u3002\u5982\u4e0b\u56fe\u6240\u793a\u3002</p> <p></p> <p>\u6bcf\u4e00\u4e2a\u6267\u884c\u8ba1\u5212\u8282\u70b9\u90fd\u4e00\u4e00\u5bf9\u5e94\u4e00\u4e2a\u6267\u884c\u7b97\u5b50\uff0c\u8282\u70b9\u7684\u8f93\u5165\u8f93\u51fa\u5728\u4f18\u5316\u6267\u884c\u8ba1\u5212\u65f6\u5df2\u7ecf\u786e\u5b9a\uff0c\u6bcf\u4e2a\u7b97\u5b50\u53ea\u9700\u8981\u62ff\u5230\u8f93\u5165\u53d8\u91cf\u4e2d\u7684\u503c\u8fdb\u884c\u8ba1\u7b97\uff0c\u6700\u540e\u5c06\u8ba1\u7b97\u7ed3\u679c\u653e\u5165\u5bf9\u5e94\u7684\u8f93\u51fa\u53d8\u91cf\u4e2d\u5373\u53ef\uff0c\u6240\u4ee5\u53ea\u9700\u8981\u4ece\u8282\u70b9 <code>Start</code> \u4e00\u6b65\u6b65\u6267\u884c\uff0c\u6700\u540e\u4e00\u4e2a\u7b97\u5b50\u7684\u8f93\u51fa\u53d8\u91cf\u4f1a\u4f5c\u4e3a\u6700\u7ec8\u7ed3\u679c\u8fd4\u56de\u7ed9\u5ba2\u6237\u7aef\u3002</p>"},{"location":"1.introduction/3.nebula-graph-architecture/3.graph-service/#_1","title":"\u4ee3\u7801\u7ed3\u6784","text":"<p>NebulaGraph \u7684\u4ee3\u7801\u5c42\u6b21\u7ed3\u6784\u5982\u4e0b\uff1a</p> <pre><code>|--src\n   |--graph\n      |--context    //\u6821\u9a8c\u671f\u548c\u6267\u884c\u671f\u4e0a\u4e0b\u6587\n      |--executor   //\u6267\u884c\u7b97\u5b50\n      |--gc         //\u5783\u573e\u6536\u96c6\u5668\n      |--optimizer  //\u4f18\u5316\u89c4\u5219\n      |--planner    //\u6267\u884c\u8ba1\u5212\u7ed3\u6784\n      |--scheduler  //\u8c03\u5ea6\u5668\n      |--service    //\u5bf9\u5916\u670d\u52a1\u7ba1\u7406\n      |--session    //\u4f1a\u8bdd\u7ba1\u7406\n      |--stats      //\u8fd0\u884c\u6307\u6807\n      |--util       //\u57fa\u7840\u7ec4\u4ef6\n      |--validator  //\u8bed\u53e5\u6821\u9a8c\n      |--visitor    //visitor\u8868\u8fbe\u5f0f\n</code></pre>"},{"location":"1.introduction/3.nebula-graph-architecture/3.graph-service/#_2","title":"\u89c6\u9891","text":"<p>\u7528\u6237\u4e5f\u53ef\u4ee5\u901a\u8fc7\u89c6\u9891\u5168\u65b9\u4f4d\u4e86\u89e3 NebulaGraph \u7684\u67e5\u8be2\u5f15\u64ce\u3002</p> <ul> <li>nMeetup\u00b7\u4e0a\u6d77 \uff5c\u5168\u9762\u89e3\u6790 Query Engine\uff0833 \u5206 30 \u79d2\uff09</li> </ul>"},{"location":"1.introduction/3.nebula-graph-architecture/4.storage-service/","title":"Storage \u670d\u52a1","text":"<p>NebulaGraph \u7684\u5b58\u50a8\u5305\u542b\u4e24\u4e2a\u90e8\u5206\uff0c\u4e00\u4e2a\u662f Meta \u76f8\u5173\u7684\u5b58\u50a8\uff0c\u79f0\u4e3a Meta \u670d\u52a1\uff0c\u5728\u524d\u6587\u5df2\u6709\u4ecb\u7ecd\u3002</p> <p>\u53e6\u4e00\u4e2a\u662f\u5177\u4f53\u6570\u636e\u76f8\u5173\u7684\u5b58\u50a8\uff0c\u79f0\u4e3a Storage \u670d\u52a1\u3002\u5176\u8fd0\u884c\u5728 nebula-storaged \u8fdb\u7a0b\u4e2d\u3002\u672c\u6587\u4ec5\u4ecb\u7ecd Storage \u670d\u52a1\u7684\u67b6\u6784\u8bbe\u8ba1\u3002</p>"},{"location":"1.introduction/3.nebula-graph-architecture/4.storage-service/#_1","title":"\u4f18\u52bf","text":"<ul> <li>\u9ad8\u6027\u80fd\uff08\u81ea\u7814 KVStore\uff09</li> </ul> <ul> <li>\u6613\u6c34\u5e73\u6269\u5c55\uff08Shared-nothing \u67b6\u6784\uff0c\u4e0d\u4f9d\u8d56 NAS \u7b49\u786c\u4ef6\u8bbe\u5907\uff09</li> </ul> <ul> <li>\u5f3a\u4e00\u81f4\u6027\uff08Raft\uff09</li> </ul> <ul> <li>\u9ad8\u53ef\u7528\u6027\uff08Raft\uff09</li> </ul> <ul> <li>\u652f\u6301\u5411\u7b2c\u4e09\u65b9\u7cfb\u7edf\u8fdb\u884c\u540c\u6b65\uff08\u4f8b\u5982\u5168\u6587\u7d22\u5f15\uff09</li> </ul>"},{"location":"1.introduction/3.nebula-graph-architecture/4.storage-service/#storage_1","title":"Storage \u670d\u52a1\u67b6\u6784","text":"<p>Storage \u670d\u52a1\u662f\u7531 nebula-storaged \u8fdb\u7a0b\u63d0\u4f9b\u7684\uff0c\u7528\u6237\u53ef\u4ee5\u6839\u636e\u573a\u666f\u914d\u7f6e nebula-storaged \u8fdb\u7a0b\u6570\u91cf\uff0c\u4f8b\u5982\u6d4b\u8bd5\u73af\u5883 1 \u4e2a\uff0c\u751f\u4ea7\u73af\u5883 3 \u4e2a\u3002</p> <p>\u6240\u6709 nebula-storaged \u8fdb\u7a0b\u6784\u6210\u4e86\u57fa\u4e8e Raft \u534f\u8bae\u7684\u96c6\u7fa4\uff0c\u6574\u4e2a\u670d\u52a1\u67b6\u6784\u53ef\u4ee5\u5206\u4e3a\u4e09\u5c42\uff0c\u4ece\u4e0a\u5230\u4e0b\u4f9d\u6b21\u4e3a\uff1a</p> <ul> <li> <p>Storage interface \u5c42</p> <p>Storage \u670d\u52a1\u7684\u6700\u4e0a\u5c42\uff0c\u5b9a\u4e49\u4e86\u4e00\u7cfb\u5217\u548c\u56fe\u76f8\u5173\u7684 API\u3002API \u8bf7\u6c42\u4f1a\u5728\u8fd9\u4e00\u5c42\u88ab\u7ffb\u8bd1\u6210\u4e00\u7ec4\u9488\u5bf9\u5206\u7247\u7684 KV \u64cd\u4f5c\uff0c\u4f8b\u5982\uff1a</p> <ul> <li><code>getNeighbors</code>\uff1a\u67e5\u8be2\u4e00\u6279\u70b9\u7684\u51fa\u8fb9\u6216\u8005\u5165\u8fb9\uff0c\u8fd4\u56de\u8fb9\u4ee5\u53ca\u5bf9\u5e94\u7684\u5c5e\u6027\uff0c\u5e76\u4e14\u652f\u6301\u6761\u4ef6\u8fc7\u6ee4\u3002</li> </ul> <ul> <li><code>insert vertex/edge</code>\uff1a\u63d2\u5165\u4e00\u6761\u70b9\u6216\u8005\u8fb9\u53ca\u5176\u5c5e\u6027\u3002</li> </ul> <ul> <li><code>getProps</code>\uff1a\u83b7\u53d6\u4e00\u4e2a\u70b9\u6216\u8005\u4e00\u6761\u8fb9\u7684\u5c5e\u6027\u3002</li> </ul> <p>\u6b63\u662f\u8fd9\u4e00\u5c42\u7684\u5b58\u5728\uff0c\u4f7f\u5f97 Storage \u670d\u52a1\u53d8\u6210\u4e86\u771f\u6b63\u7684\u56fe\u5b58\u50a8\uff0c\u5426\u5219 Storage \u670d\u52a1\u53ea\u662f\u4e00\u4e2a KV \u5b58\u50a8\u670d\u52a1\u3002</p> </li> </ul> <ul> <li> <p>Consensus \u5c42</p> <p>Storage \u670d\u52a1\u7684\u4e2d\u95f4\u5c42\uff0c\u5b9e\u73b0\u4e86 Multi Group Raft\uff0c\u4fdd\u8bc1\u5f3a\u4e00\u81f4\u6027\u548c\u9ad8\u53ef\u7528\u6027\u3002</p> </li> </ul> <ul> <li> <p>Store Engine \u5c42</p> <p>Storage \u670d\u52a1\u7684\u6700\u5e95\u5c42\uff0c\u662f\u4e00\u4e2a\u5355\u673a\u7248\u672c\u5730\u5b58\u50a8\u5f15\u64ce\uff0c\u63d0\u4f9b\u5bf9\u672c\u5730\u6570\u636e\u7684<code>get</code>\u3001<code>put</code>\u3001<code>scan</code>\u7b49\u64cd\u4f5c\u3002\u76f8\u5173\u63a5\u53e3\u5b58\u50a8\u5728<code>KVStore.h</code>\u548c<code>KVEngine.h</code>\u6587\u4ef6\uff0c\u7528\u6237\u53ef\u4ee5\u6839\u636e\u4e1a\u52a1\u9700\u6c42\u5b9a\u5236\u5f00\u53d1\u76f8\u5173\u7684\u672c\u5730\u5b58\u50a8\u63d2\u4ef6\u3002</p> </li> </ul> <p>\u4e0b\u6587\u5c06\u57fa\u4e8e\u67b6\u6784\u4ecb\u7ecd Storage \u670d\u52a1\u7684\u90e8\u5206\u7279\u6027\u3002</p>"},{"location":"1.introduction/3.nebula-graph-architecture/4.storage-service/#storage_2","title":"Storage \u5199\u5165\u6d41\u7a0b","text":""},{"location":"1.introduction/3.nebula-graph-architecture/4.storage-service/#kvstore","title":"KVStore","text":"<p>NebulaGraph \u4f7f\u7528\u81ea\u884c\u5f00\u53d1\u7684 KVStore\uff0c\u800c\u4e0d\u662f\u5176\u4ed6\u5f00\u6e90 KVStore\uff0c\u539f\u56e0\u5982\u4e0b\uff1a</p> <ul> <li>\u9700\u8981\u9ad8\u6027\u80fd KVStore\u3002</li> </ul> <ul> <li>\u9700\u8981\u4ee5\u5e93\u7684\u5f62\u5f0f\u63d0\u4f9b\uff0c\u5b9e\u73b0\u9ad8\u6548\u8ba1\u7b97\u4e0b\u63a8\u3002\u5bf9\u4e8e\u5f3a Schema \u7684 NebulaGraph \u6765\u8bf4\uff0c\u8ba1\u7b97\u4e0b\u63a8\u65f6\u5982\u4f55\u63d0\u4f9b Schema \u4fe1\u606f\uff0c\u662f\u9ad8\u6548\u7684\u5173\u952e\u3002</li> </ul> <ul> <li>\u9700\u8981\u6570\u636e\u5f3a\u4e00\u81f4\u6027\u3002</li> </ul> <p>\u57fa\u4e8e\u4e0a\u8ff0\u539f\u56e0\uff0cNebulaGraph \u4f7f\u7528 RocksDB \u4f5c\u4e3a\u672c\u5730\u5b58\u50a8\u5f15\u64ce\uff0c\u5b9e\u73b0\u4e86\u81ea\u5df1\u7684 KVStore\uff0c\u6709\u5982\u4e0b\u4f18\u52bf\uff1a</p> <ul> <li>\u5bf9\u4e8e\u591a\u786c\u76d8\u673a\u5668\uff0cNebulaGraph \u53ea\u9700\u914d\u7f6e\u591a\u4e2a\u4e0d\u540c\u7684\u6570\u636e\u76ee\u5f55\u5373\u53ef\u5145\u5206\u5229\u7528\u591a\u786c\u76d8\u7684\u5e76\u53d1\u80fd\u529b\u3002</li> </ul> <ul> <li> <p>\u7531 Meta \u670d\u52a1\u7edf\u4e00\u7ba1\u7406\u6240\u6709 Storage \u670d\u52a1\uff0c\u53ef\u4ee5\u6839\u636e\u6240\u6709\u5206\u7247\u7684\u5206\u5e03\u60c5\u51b5\u548c\u72b6\u6001\uff0c\u624b\u52a8\u8fdb\u884c\u8d1f\u8f7d\u5747\u8861\u3002</p> <p>Note</p> <p>\u4e0d\u652f\u6301\u81ea\u52a8\u8d1f\u8f7d\u5747\u8861\u662f\u4e3a\u4e86\u9632\u6b62\u81ea\u52a8\u6570\u636e\u642c\u8fc1\u5f71\u54cd\u7ebf\u4e0a\u4e1a\u52a1\u3002</p> </li> </ul> <ul> <li>\u5b9a\u5236\u9884\u5199\u65e5\u5fd7\uff08WAL\uff09\uff0c\u6bcf\u4e2a\u5206\u7247\u90fd\u6709\u81ea\u5df1\u7684 WAL\u3002</li> </ul> <ul> <li>\u652f\u6301\u591a\u4e2a\u56fe\u7a7a\u95f4\uff0c\u4e0d\u540c\u56fe\u7a7a\u95f4\u76f8\u4e92\u9694\u79bb\uff0c\u6bcf\u4e2a\u56fe\u7a7a\u95f4\u53ef\u4ee5\u8bbe\u7f6e\u81ea\u5df1\u7684\u5206\u7247\u6570\u548c\u526f\u672c\u6570\u3002</li> </ul>"},{"location":"1.introduction/3.nebula-graph-architecture/4.storage-service/#_2","title":"\u6570\u636e\u5b58\u50a8\u683c\u5f0f","text":"<p>\u56fe\u5b58\u50a8\u7684\u4e3b\u8981\u6570\u636e\u662f\u70b9\u548c\u8fb9\uff0cNebulaGraph \u5c06\u70b9\u548c\u8fb9\u7684\u4fe1\u606f\u5b58\u50a8\u4e3a key\uff0c\u540c\u65f6\u5c06\u70b9\u548c\u8fb9\u7684\u5c5e\u6027\u4fe1\u606f\u5b58\u50a8\u5728 value \u4e2d\uff0c\u4ee5\u4fbf\u66f4\u9ad8\u6548\u5730\u4f7f\u7528\u5c5e\u6027\u8fc7\u6ee4\u3002</p> <ul> <li> <p>\u70b9\u6570\u636e\u5b58\u50a8\u683c\u5f0f</p> <p>\u76f8\u6bd4 NebulaGraph 2.x \u7248\u672c\uff0c3.x \u7248\u672c\u5728\u5f00\u542f\u65e0 Tag \u7684\u70b9\u914d\u7f6e\u540e\uff0c\u6bcf\u4e2a\u70b9\u591a\u4e86\u4e00\u4e2a\u4e0d\u542b TagID \u5b57\u6bb5\u5e76\u4e14\u65e0 value \u7684 key\u3002</p> <p></p> \u5b57\u6bb5 \u8bf4\u660e <code>Type</code> key \u7c7b\u578b\u3002\u957f\u5ea6\u4e3a 1 \u5b57\u8282\u3002 <code>PartID</code> \u6570\u636e\u5206\u7247\u7f16\u53f7\u3002\u957f\u5ea6\u4e3a 3 \u5b57\u8282\u3002\u6b64\u5b57\u6bb5\u4e3b\u8981\u7528\u4e8e Storage \u8d1f\u8f7d\u5747\u8861\uff08balance\uff09\u65f6\u65b9\u4fbf\u6839\u636e\u524d\u7f00\u626b\u63cf\u6574\u4e2a\u5206\u7247\u7684\u6570\u636e\u3002 <code>VertexID</code> \u70b9 ID\u3002\u5f53\u70b9 ID \u7c7b\u578b\u4e3a int \u65f6\uff0c\u957f\u5ea6\u4e3a 8 \u5b57\u8282\uff1b\u5f53\u70b9 ID \u7c7b\u578b\u4e3a string \u65f6\uff0c\u957f\u5ea6\u4e3a\u521b\u5efa\u56fe\u7a7a\u95f4\u65f6\u6307\u5b9a\u7684<code>fixed_string</code>\u957f\u5ea6\u3002 <code>TagID</code> \u70b9\u5173\u8054\u7684 Tag ID\u3002\u957f\u5ea6\u4e3a 4 \u5b57\u8282\u3002 <code>SerializedValue</code> \u5e8f\u5217\u5316\u7684 value\uff0c\u7528\u4e8e\u4fdd\u5b58\u70b9\u7684\u5c5e\u6027\u4fe1\u606f\u3002 </li> </ul> <ul> <li>\u8fb9\u6570\u636e\u5b58\u50a8\u683c\u5f0f<p></p> \u5b57\u6bb5 \u8bf4\u660e <code>Type</code> key \u7c7b\u578b\u3002\u957f\u5ea6\u4e3a 1 \u5b57\u8282\u3002 <code>PartID</code> \u6570\u636e\u5206\u7247\u7f16\u53f7\u3002\u957f\u5ea6\u4e3a 3 \u5b57\u8282\u3002\u6b64\u5b57\u6bb5\u4e3b\u8981\u7528\u4e8e Storage \u8d1f\u8f7d\u5747\u8861\uff08balance\uff09\u65f6\u65b9\u4fbf\u6839\u636e\u524d\u7f00\u626b\u63cf\u6574\u4e2a\u5206\u7247\u7684\u6570\u636e\u3002 <code>VertexID</code> \u70b9 ID\u3002\u524d\u4e00\u4e2a<code>VertexID</code>\u5728\u51fa\u8fb9\u91cc\u8868\u793a\u8d77\u59cb\u70b9 ID\uff0c\u5728\u5165\u8fb9\u91cc\u8868\u793a\u76ee\u7684\u70b9 ID\uff1b\u540e\u4e00\u4e2a<code>VertexID</code>\u51fa\u8fb9\u91cc\u8868\u793a\u76ee\u7684\u70b9 ID\uff0c\u5728\u5165\u8fb9\u91cc\u8868\u793a\u8d77\u59cb\u70b9 ID\u3002 <code>Edge type</code> \u8fb9\u7684\u7c7b\u578b\u3002\u5927\u4e8e 0 \u8868\u793a\u51fa\u8fb9\uff0c\u5c0f\u4e8e 0 \u8868\u793a\u5165\u8fb9\u3002\u957f\u5ea6\u4e3a 4 \u5b57\u8282\u3002 <code>Rank</code> \u7528\u6765\u5904\u7406\u4e24\u70b9\u4e4b\u95f4\u6709\u591a\u4e2a\u540c\u7c7b\u578b\u8fb9\u7684\u60c5\u51b5\u3002\u7528\u6237\u53ef\u4ee5\u6839\u636e\u81ea\u5df1\u7684\u9700\u6c42\u8fdb\u884c\u8bbe\u7f6e\uff0c\u4f8b\u5982\u5b58\u653e\u4ea4\u6613\u65f6\u95f4\u3001\u4ea4\u6613\u6d41\u6c34\u53f7\u7b49\u3002\u957f\u5ea6\u4e3a 8 \u5b57\u8282\uff0c <code>PlaceHolder</code> \u9884\u7559\u5b57\u6bb5\u3002\u957f\u5ea6\u4e3a 1 \u5b57\u8282\u3002 <code>SerializedValue</code> \u5e8f\u5217\u5316\u7684 value\uff0c\u7528\u4e8e\u4fdd\u5b58\u8fb9\u7684\u5c5e\u6027\u4fe1\u606f\u3002 </li> </ul>"},{"location":"1.introduction/3.nebula-graph-architecture/4.storage-service/#_3","title":"\u5c5e\u6027\u8bf4\u660e","text":"<p>NebulaGraph \u4f7f\u7528\u5f3a\u7c7b\u578b Schema\u3002</p> <p>\u5bf9\u4e8e\u70b9\u6216\u8fb9\u7684\u5c5e\u6027\u4fe1\u606f\uff0cNebulaGraph \u4f1a\u5c06\u5c5e\u6027\u4fe1\u606f\u7f16\u7801\u540e\u6309\u987a\u5e8f\u5b58\u50a8\u3002\u7531\u4e8e\u5b9a\u957f\u5c5e\u6027\u7684\u957f\u5ea6\u662f\u56fa\u5b9a\u7684\uff0c\u67e5\u8be2\u65f6\u53ef\u4ee5\u6839\u636e\u504f\u79fb\u91cf\u5feb\u901f\u67e5\u8be2\u3002\u5728\u89e3\u7801\u4e4b\u524d\uff0c\u9700\u8981\u5148\u4ece Meta \u670d\u52a1\u4e2d\u67e5\u8be2\u5177\u4f53\u7684 Schema \u4fe1\u606f\uff08\u5e76\u7f13\u5b58\uff09\u3002\u540c\u65f6\u4e3a\u4e86\u652f\u6301\u5728\u7ebf\u53d8\u66f4 Schema\uff0c\u5728\u7f16\u7801\u5c5e\u6027\u65f6\uff0c\u4f1a\u52a0\u5165\u5bf9\u5e94\u7684 Schema \u7248\u672c\u4fe1\u606f\u3002</p>"},{"location":"1.introduction/3.nebula-graph-architecture/4.storage-service/#_4","title":"\u6570\u636e\u5206\u7247","text":"<p>\u7531\u4e8e\u8d85\u5927\u89c4\u6a21\u5173\u7cfb\u7f51\u7edc\u7684\u8282\u70b9\u6570\u91cf\u9ad8\u8fbe\u767e\u4ebf\u5230\u5343\u4ebf\uff0c\u800c\u8fb9\u7684\u6570\u91cf\u66f4\u4f1a\u9ad8\u8fbe\u4e07\u4ebf\uff0c\u5373\u4f7f\u4ec5\u5b58\u50a8\u70b9\u548c\u8fb9\u4e24\u8005\u4e5f\u8fdc\u5927\u4e8e\u4e00\u822c\u670d\u52a1\u5668\u7684\u5bb9\u91cf\u3002\u56e0\u6b64\u9700\u8981\u6709\u65b9\u6cd5\u5c06\u56fe\u5143\u7d20\u5207\u5272\uff0c\u5e76\u5b58\u50a8\u5728\u4e0d\u540c\u903b\u8f91\u5206\u7247\uff08Partition\uff09\u4e0a\u3002NebulaGraph \u91c7\u7528\u8fb9\u5206\u5272\u7684\u65b9\u5f0f\u3002</p> <p></p>"},{"location":"1.introduction/3.nebula-graph-architecture/4.storage-service/#_5","title":"\u5207\u8fb9\u4e0e\u5b58\u50a8\u653e\u5927","text":"<p>NebulaGraph \u4e2d\u903b\u8f91\u4e0a\u7684\u4e00\u6761\u8fb9\u5bf9\u5e94\u7740\u786c\u76d8\u4e0a\u7684\u4e24\u4e2a\u952e\u503c\u5bf9\uff08key-value pair\uff09\uff0c\u5728\u8fb9\u7684\u6570\u91cf\u548c\u5c5e\u6027\u8f83\u591a\u65f6\uff0c\u5b58\u50a8\u653e\u5927\u73b0\u8c61\u8f83\u660e\u663e\u3002\u8fb9\u7684\u5b58\u50a8\u65b9\u5f0f\u5982\u4e0b\u56fe\u6240\u793a\u3002</p> <p></p> <p>\u4e0a\u56fe\u4ee5\u6700\u7b80\u5355\u7684\u4e24\u4e2a\u70b9\u548c\u4e00\u6761\u8fb9\u4e3a\u4f8b\uff0c\u8d77\u70b9 SrcVertex \u901a\u8fc7\u8fb9 EdgeA \u8fde\u63a5\u76ee\u7684\u70b9 DstVertex\uff0c\u5f62\u6210\u8def\u5f84<code>(SrcVertex)-[EdgeA]-&gt;(DstVertex)</code>\u3002\u8fd9\u4e24\u4e2a\u70b9\u548c\u4e00\u6761\u8fb9\u4f1a\u4ee5 6 \u4e2a\u952e\u503c\u5bf9\u7684\u5f62\u5f0f\u4fdd\u5b58\u5728\u5b58\u50a8\u5c42\u7684\u4e24\u4e2a\u4e0d\u540c\u5206\u7247\uff0c\u5373 Partition x \u548c Partition y \u4e2d\uff0c\u8be6\u7ec6\u8bf4\u660e\u5982\u4e0b\uff1a</p> <ul> <li>\u70b9 SrcVertex \u7684\u952e\u503c\u4fdd\u5b58\u5728 Partition x \u4e2d\u3002</li> </ul> <ul> <li>\u8fb9 EdgeA \u7684\u7b2c\u4e00\u4efd\u952e\u503c\uff0c\u8fd9\u91cc\u7528 EdgeA_Out \u8868\u793a\uff0c\u4e0e SrcVertex \u4e00\u540c\u4fdd\u5b58\u5728 Partition x \u4e2d\u3002key \u7684\u5b57\u6bb5\u6709 Type\u3001PartID\uff08x\uff09\u3001VID\uff08Src\uff0c\u5373\u70b9 SrcVertex \u7684 ID\uff09\u3001EdgeType\uff08\u7b26\u53f7\u4e3a\u6b63\uff0c\u4ee3\u8868\u8fb9\u65b9\u5411\u4e3a\u51fa\uff09\u3001Rank\uff080\uff09\u3001VID\uff08Dst\uff0c\u5373\u70b9 DstVertex \u7684 ID\uff09\u548c PlaceHolder\u3002SerializedValue \u5373 Value\uff0c\u662f\u5e8f\u5217\u5316\u7684\u8fb9\u5c5e\u6027\u3002</li> </ul> <ul> <li>\u70b9 DstVertex \u7684\u952e\u503c\u4fdd\u5b58\u5728 Partition y \u4e2d\u3002</li> </ul> <ul> <li>\u8fb9 EdgeA \u7684\u7b2c\u4e8c\u4efd\u952e\u503c\uff0c\u8fd9\u91cc\u7528 EdgeA_In \u8868\u793a\uff0c\u4e0e DstVertex \u4e00\u540c\u4fdd\u5b58\u5728 Partition y \u4e2d\u3002key \u7684\u5b57\u6bb5\u6709 Type\u3001PartID\uff08y\uff09\u3001VID\uff08Dst\uff0c\u5373\u70b9 DstVertex \u7684 ID\uff09\u3001EdgeType\uff08\u7b26\u53f7\u4e3a\u8d1f\uff0c\u4ee3\u8868\u8fb9\u65b9\u5411\u4e3a\u5165\uff09\u3001Rank\uff080\uff09\u3001VID\uff08Src\uff0c\u5373\u70b9 SrcVertex \u7684 ID\uff09\u548c PlaceHolder\u3002SerializedValue \u5373 Value\uff0c\u662f\u5e8f\u5217\u5316\u7684\u8fb9\u5c5e\u6027\uff0c\u4e0e EdgeA_Out \u4e2d\u8be5\u90e8\u5206\u7684\u5b8c\u5168\u76f8\u540c\u3002</li> </ul> <p>EdgeA_Out \u548c EdgeA_In \u4ee5\u65b9\u5411\u76f8\u53cd\u7684\u4e24\u6761\u8fb9\u7684\u5f62\u5f0f\u5b58\u5728\u4e8e\u5b58\u50a8\u5c42\uff0c\u4e8c\u8005\u7ec4\u5408\u6210\u4e86\u903b\u8f91\u4e0a\u7684\u4e00\u6761\u8fb9 EdgeA\u3002EdgeA_Out \u7528\u4e8e\u4ece\u8d77\u70b9\u5f00\u59cb\u7684\u904d\u5386\u8bf7\u6c42\uff0c\u4f8b\u5982<code>(a)-[]-&gt;()</code>\uff1bEdgeA_In \u7528\u4e8e\u6307\u5411\u76ee\u7684\u70b9\u7684\u904d\u5386\u8bf7\u6c42\uff0c\u6216\u8005\u8bf4\u4ece\u76ee\u7684\u70b9\u5f00\u59cb\uff0c\u6cbf\u7740\u8fb9\u7684\u65b9\u5411\u9006\u5e8f\u8fdb\u884c\u7684\u904d\u5386\u8bf7\u6c42\uff0c\u4f8b\u5982\u4f8b\u5982<code>()-[]-&gt;(a)</code>\u3002</p> <p>\u5982 EdgeA_Out \u548c EdgeA_In \u4e00\u6837\uff0cNebulaGraph \u5197\u4f59\u4e86\u5b58\u50a8\u6bcf\u6761\u8fb9\u7684\u4fe1\u606f\uff0c\u5bfc\u81f4\u5b58\u50a8\u8fb9\u6240\u9700\u7684\u5b9e\u9645\u7a7a\u95f4\u7ffb\u500d\u3002\u56e0\u4e3a\u8fb9\u5bf9\u5e94\u7684 key \u5360\u7528\u7684\u786c\u76d8\u7a7a\u95f4\u8f83\u5c0f\uff0c\u4f46 value \u5360\u7528\u7684\u7a7a\u95f4\u4e0e\u5c5e\u6027\u503c\u7684\u957f\u5ea6\u548c\u6570\u91cf\u6210\u6b63\u6bd4\uff0c\u6240\u4ee5\uff0c\u5f53\u8fb9\u7684\u5c5e\u6027\u503c\u8f83\u5927\u6216\u6570\u91cf\u8f83\u591a\u65f6\u5019\uff0c\u786c\u76d8\u7a7a\u95f4\u5360\u7528\u91cf\u4f1a\u6bd4\u8f83\u5927\u3002</p>"},{"location":"1.introduction/3.nebula-graph-architecture/4.storage-service/#_6","title":"\u5206\u7247\u7b97\u6cd5","text":"<p>\u5206\u7247\u7b56\u7565\u91c7\u7528\u9759\u6001 Hash \u7684\u65b9\u5f0f\uff0c\u5373\u5bf9\u70b9 VID \u8fdb\u884c\u53d6\u6a21\u64cd\u4f5c\uff0c\u540c\u4e00\u4e2a\u70b9\u7684\u6240\u6709 Tag\u3001\u51fa\u8fb9\u548c\u5165\u8fb9\u4fe1\u606f\u90fd\u4f1a\u5b58\u50a8\u5230\u540c\u4e00\u4e2a\u5206\u7247\uff0c\u8fd9\u79cd\u65b9\u5f0f\u6781\u5927\u5730\u63d0\u5347\u4e86\u67e5\u8be2\u6548\u7387\u3002</p> <p>Note</p> <p>\u521b\u5efa\u56fe\u7a7a\u95f4\u65f6\u9700\u6307\u5b9a\u5206\u7247\u6570\u91cf\uff0c\u5206\u7247\u6570\u91cf\u8bbe\u7f6e\u540e\u65e0\u6cd5\u4fee\u6539\uff0c\u5efa\u8bae\u8bbe\u7f6e\u65f6\u63d0\u524d\u6ee1\u8db3\u4e1a\u52a1\u5c06\u6765\u7684\u6269\u5bb9\u9700\u6c42\u3002</p> <p>\u591a\u673a\u96c6\u7fa4\u90e8\u7f72\u65f6\uff0c\u5206\u7247\u5206\u5e03\u5728\u96c6\u7fa4\u5185\u7684\u4e0d\u540c\u673a\u5668\u4e0a\u3002\u5206\u7247\u6570\u91cf\u5728 CREATE SPACE \u8bed\u53e5\u4e2d\u6307\u5b9a\uff0c\u6b64\u540e\u4e0d\u53ef\u66f4\u6539\u3002</p> <p>\u5982\u679c\u9700\u8981\u5c06\u67d0\u4e9b\u70b9\u653e\u7f6e\u5728\u76f8\u540c\u7684\u5206\u7247\uff08\u4f8b\u5982\u5728\u4e00\u53f0\u673a\u5668\u4e0a\uff09\uff0c\u53ef\u4ee5\u53c2\u8003\u516c\u5f0f\u6216\u4ee3\u7801\u3002</p> <p>\u4e0b\u6587\u7528\u7b80\u5355\u4ee3\u7801\u8bf4\u660e VID \u548c\u5206\u7247\u7684\u5173\u7cfb\u3002</p> <pre><code>// \u5982\u679c ID \u957f\u5ea6\u4e3a 8\uff0c\u4e3a\u4e86\u517c\u5bb9 1.0\uff0c\u5c06\u6570\u636e\u7c7b\u578b\u89c6\u4e3a int64\u3002\nuint64_t vid = 0;\nif (id.size() == 8) {\n    memcpy(static_cast&lt;void*&gt;(&amp;vid), id.data(), 8);\n} else {\n    MurmurHash2 hash;\n    vid = hash(id.data());\n}\nPartitionID pId = vid % numParts + 1;\n</code></pre> <p>\u7b80\u5355\u6765\u8bf4\uff0c\u4e0a\u8ff0\u4ee3\u7801\u662f\u5c06\u4e00\u4e2a\u56fa\u5b9a\u7684\u5b57\u7b26\u4e32\u8fdb\u884c\u54c8\u5e0c\u8ba1\u7b97\uff0c\u8f6c\u6362\u6210\u6570\u636e\u7c7b\u578b\u4e3a int64 \u7684\u6570\u5b57\uff08int64 \u6570\u5b57\u7684\u54c8\u5e0c\u8ba1\u7b97\u7ed3\u679c\u662f\u6570\u5b57\u672c\u8eab\uff09\uff0c\u5c06\u6570\u5b57\u53d6\u6a21\uff0c\u7136\u540e\u52a0 1\uff0c\u5373\uff1a</p> <pre><code>pId = vid % numParts + 1;\n</code></pre> <p>\u793a\u4f8b\u7684\u90e8\u5206\u53c2\u6570\u8bf4\u660e\u5982\u4e0b\u3002</p> \u53c2\u6570 \u8bf4\u660e <code>%</code> \u53d6\u6a21\u8fd0\u7b97\u3002 <code>numParts</code> <code>VID</code>\u6240\u5728\u56fe\u7a7a\u95f4\u7684\u5206\u7247\u6570\uff0c\u5373 CREATE SPACE \u8bed\u53e5\u4e2d\u7684<code>partition_num</code>\u503c\u3002 <code>pId</code> <code>VID</code>\u6240\u5728\u5206\u7247\u7684 ID\u3002 <p>\u4f8b\u5982\u6709 100 \u4e2a\u5206\u7247\uff0c<code>VID</code>\u4e3a 1\u3001101 \u548c 1001 \u7684\u4e09\u4e2a\u70b9\u5c06\u4f1a\u5b58\u50a8\u5728\u76f8\u540c\u7684\u5206\u7247\u3002\u5206\u7247 ID \u548c\u673a\u5668\u5730\u5740\u4e4b\u95f4\u7684\u6620\u5c04\u662f\u968f\u673a\u7684\uff0c\u6240\u4ee5\u4e0d\u80fd\u5047\u5b9a\u4efb\u4f55\u4e24\u4e2a\u5206\u7247\u4f4d\u4e8e\u540c\u4e00\u53f0\u673a\u5668\u4e0a\u3002</p>"},{"location":"1.introduction/3.nebula-graph-architecture/4.storage-service/#raft","title":"Raft","text":""},{"location":"1.introduction/3.nebula-graph-architecture/4.storage-service/#raft_1","title":"\u5173\u4e8e Raft \u7684\u7b80\u5355\u4ecb\u7ecd","text":"<p>\u5206\u5e03\u5f0f\u7cfb\u7edf\u4e2d\uff0c\u540c\u4e00\u4efd\u6570\u636e\u901a\u5e38\u4f1a\u6709\u591a\u4e2a\u526f\u672c\uff0c\u8fd9\u6837\u5373\u4f7f\u5c11\u6570\u526f\u672c\u53d1\u751f\u6545\u969c\uff0c\u7cfb\u7edf\u4ecd\u53ef\u6b63\u5e38\u8fd0\u884c\u3002\u8fd9\u5c31\u9700\u8981\u4e00\u5b9a\u7684\u6280\u672f\u624b\u6bb5\u6765\u4fdd\u8bc1\u591a\u4e2a\u526f\u672c\u4e4b\u95f4\u7684\u4e00\u81f4\u6027\u3002</p> <p>\u57fa\u672c\u539f\u7406\uff1aRaft \u5c31\u662f\u4e00\u79cd\u7528\u4e8e\u4fdd\u8bc1\u591a\u526f\u672c\u4e00\u81f4\u6027\u7684\u534f\u8bae\u3002Raft \u91c7\u7528\u591a\u4e2a\u526f\u672c\u4e4b\u95f4\u7ade\u9009\u7684\u65b9\u5f0f\uff0c\u8d62\u5f97\u201d\u8d85\u8fc7\u534a\u6570\u201d\u526f\u672c\u6295\u7968\u7684\uff08\u5019\u9009\uff09\u526f\u672c\u6210\u4e3a Leader\uff0c\u7531 Leader \u4ee3\u8868\u6240\u6709\u526f\u672c\u5bf9\u5916\u63d0\u4f9b\u670d\u52a1\uff1b\u5176\u4ed6 Follower \u4f5c\u4e3a\u5907\u4efd\u3002\u5f53\u8be5 Leader \u51fa\u73b0\u5f02\u5e38\u540e\uff08\u901a\u4fe1\u6545\u969c\u3001\u8fd0\u7ef4\u547d\u4ee4\u7b49\uff09\uff0c\u5176\u4f59 Follower \u8fdb\u884c\u65b0\u4e00\u8f6e\u9009\u4e3e\uff0c\u6295\u7968\u51fa\u4e00\u4e2a\u65b0\u7684 Leader\u3002Leader \u548c Follower \u4e4b\u95f4\u901a\u8fc7\u5fc3\u8df3\u7684\u65b9\u5f0f\u76f8\u4e92\u63a2\u6d4b\u662f\u5426\u5b58\u6d3b\uff0c\u5e76\u4ee5 Raft-wal \u7684\u65b9\u5f0f\u5199\u5165\u786c\u76d8\uff0c\u8d85\u8fc7\u591a\u4e2a\u5fc3\u8df3\u4ecd\u65e0\u54cd\u5e94\u7684\u526f\u672c\u4f1a\u88ab\u8ba4\u4e3a\u53d1\u751f\u6545\u969c\u3002</p> <p>Note</p> <p>\u56e0\u4e3a Raft-wal \u9700\u8981\u5b9a\u671f\u5199\u786c\u76d8\uff0c\u5982\u679c\u786c\u76d8\u5199\u80fd\u529b\u74f6\u9888\u4f1a\u5bfc\u81f4 Raft \u5fc3\u8df3\u5931\u8d25\uff0c\u5bfc\u81f4\u91cd\u65b0\u53d1\u8d77\u9009\u4e3e\u3002\u786c\u76d8 IO \u4e25\u91cd\u5835\u585e\u60c5\u51b5\u4e0b\uff0c\u4f1a\u5bfc\u81f4\u957f\u671f\u65e0\u6cd5\u9009\u4e3e\u51fa Leader\u3002</p> <p>\u8bfb\u5199\u6d41\u7a0b\uff1a\u5bf9\u4e8e\u5ba2\u6237\u7aef\u7684\u6bcf\u4e2a\u5199\u5165\u8bf7\u6c42\uff0cLeader \u4f1a\u5c06\u8be5\u5199\u5165\u4ee5 Raft-wal \u7684\u65b9\u5f0f\uff0c\u5c06\u8be5\u6761\u540c\u6b65\u7ed9\u5176\u4ed6 Follower\uff0c\u5e76\u53ea\u6709\u5728\u201c\u8d85\u8fc7\u534a\u6570\u201d\u526f\u672c\u90fd\u6210\u529f\u6536\u5230 Raft-wal \u540e\uff0c\u624d\u4f1a\u8fd4\u56de\u5ba2\u6237\u7aef\u8be5\u5199\u5165\u6210\u529f\u3002\u5bf9\u4e8e\u5ba2\u6237\u7aef\u7684\u6bcf\u4e2a\u8bfb\u53d6\u8bf7\u6c42\uff0c\u90fd\u76f4\u63a5\u8bbf\u95ee Leader\uff0c\u800c Follower \u5e76\u4e0d\u53c2\u4e0e\u8bfb\u8bf7\u6c42\u670d\u52a1\u3002</p> <p>\u6545\u969c\u6d41\u7a0b\uff1a\u573a\u666f 1\uff1a\u8003\u8651\u4e00\u4e2a\u914d\u7f6e\u4e3a\u5355\u526f\u672c\uff08\u56fe\u7a7a\u95f4\uff09\u7684\u96c6\u7fa4\uff1b\u5982\u679c\u7cfb\u7edf\u53ea\u6709\u4e00\u4e2a\u526f\u672c\u65f6\uff0c\u5176\u81ea\u8eab\u5c31\u662f Leader\uff1b\u5982\u679c\u5176\u53d1\u751f\u6545\u969c\uff0c\u7cfb\u7edf\u5c06\u5b8c\u5168\u4e0d\u53ef\u7528\u3002\u573a\u666f 2\uff1a\u8003\u8651\u4e00\u4e2a\u914d\u7f6e\u4e3a 3 \u526f\u672c\uff08\u56fe\u7a7a\u95f4\uff09\u7684\u96c6\u7fa4\uff1b\u5982\u679c\u7cfb\u7edf\u6709 3 \u4e2a\u526f\u672c\uff0c\u5176\u4e2d\u4e00\u4e2a\u526f\u672c\u662f Leader\uff0c\u5176\u4ed6 2 \u4e2a\u526f\u672c\u662f Follower\uff1b\u5373\u4f7f\u539f Leader \u53d1\u751f\u6545\u969c\uff0c\u5269\u4e0b\u4e24\u4e2a\u526f\u672c\u4ecd\u53ef\u6295\u7968\u51fa\u4e00\u4e2a\u65b0\u7684 Leader\uff08\u4ee5\u53ca\u4e00\u4e2a Follower\uff09\uff0c\u6b64\u65f6\u7cfb\u7edf\u4ecd\u53ef\u4f7f\u7528\uff1b\u4f46\u662f\u5f53\u8fd9 2 \u4e2a\u526f\u672c\u4e2d\u4efb\u4e00\u8005\u518d\u6b21\u53d1\u751f\u6545\u969c\u540e\uff0c\u7531\u4e8e\u6295\u7968\u4eba\u6570\u4e0d\u8db3\uff0c\u7cfb\u7edf\u5c06\u5b8c\u5168\u4e0d\u53ef\u7528\u3002</p> <p>Note</p> <p>Raft \u591a\u526f\u672c\u7684\u65b9\u5f0f\u4e0e HDFS \u591a\u526f\u672c\u7684\u65b9\u5f0f\u662f\u4e0d\u540c\u7684\uff0cRaft \u57fa\u4e8e\u201c\u591a\u6570\u6d3e\u201d\u6295\u7968\uff0c\u56e0\u6b64\u526f\u672c\u6570\u91cf\u4e0d\u80fd\u662f\u5076\u6570\u3002</p>"},{"location":"1.introduction/3.nebula-graph-architecture/4.storage-service/#multi_group_raft","title":"Multi Group Raft","text":"<p>\u7531\u4e8e Storage \u670d\u52a1\u9700\u8981\u652f\u6301\u96c6\u7fa4\u5206\u5e03\u5f0f\u67b6\u6784\uff0c\u6240\u4ee5\u57fa\u4e8e Raft \u534f\u8bae\u5b9e\u73b0\u4e86 Multi Group Raft\uff0c\u5373\u6bcf\u4e2a\u5206\u7247\u7684\u6240\u6709\u526f\u672c\u5171\u540c\u7ec4\u6210\u4e00\u4e2a Raft group\uff0c\u5176\u4e2d\u4e00\u4e2a\u526f\u672c\u662f leader\uff0c\u5176\u4ed6\u526f\u672c\u662f follower\uff0c\u4ece\u800c\u5b9e\u73b0\u5f3a\u4e00\u81f4\u6027\u548c\u9ad8\u53ef\u7528\u6027\u3002Raft \u7684\u90e8\u5206\u5b9e\u73b0\u5982\u4e0b\u3002</p> <p>\u7531\u4e8e Raft \u65e5\u5fd7\u4e0d\u5141\u8bb8\u7a7a\u6d1e\uff0cNebulaGraph \u4f7f\u7528 Multi Group Raft \u7f13\u89e3\u6b64\u95ee\u9898\uff0c\u5206\u7247\u6570\u91cf\u8f83\u591a\u65f6\uff0c\u53ef\u4ee5\u6709\u6548\u63d0\u9ad8 NebulaGraph \u7684\u6027\u80fd\u3002\u4f46\u662f\u5206\u7247\u6570\u91cf\u592a\u591a\u4f1a\u589e\u52a0\u5f00\u9500\uff0c\u4f8b\u5982 Raft group \u5185\u90e8\u5b58\u50a8\u7684\u72b6\u6001\u4fe1\u606f\u3001WAL \u6587\u4ef6\uff0c\u6216\u8005\u8d1f\u8f7d\u8fc7\u4f4e\u65f6\u7684\u6279\u91cf\u64cd\u4f5c\u3002</p> <p>\u5b9e\u73b0 Multi Group Raft \u6709 2 \u4e2a\u5173\u952e\u70b9\uff1a</p> <ul> <li> <p>\u5171\u4eab Transport \u5c42</p> <p>\u6bcf\u4e00\u4e2a Raft group \u5185\u90e8\u90fd\u9700\u8981\u5411\u5bf9\u5e94\u7684 peer \u53d1\u9001\u6d88\u606f\uff0c\u5982\u679c\u4e0d\u80fd\u5171\u4eab Transport \u5c42\uff0c\u4f1a\u5bfc\u81f4\u8fde\u63a5\u7684\u5f00\u9500\u5de8\u5927\u3002</p> </li> </ul> <ul> <li> <p>\u5171\u4eab\u7ebf\u7a0b\u6c60</p> <p>\u5982\u679c\u4e0d\u5171\u4eab\u4e00\u7ec4\u7ebf\u7a0b\u6c60\uff0c\u4f1a\u9020\u6210\u7cfb\u7edf\u7684\u7ebf\u7a0b\u6570\u8fc7\u591a\uff0c\u5bfc\u81f4\u5927\u91cf\u7684\u4e0a\u4e0b\u6587\u5207\u6362\u5f00\u9500\u3002</p> </li> </ul>"},{"location":"1.introduction/3.nebula-graph-architecture/4.storage-service/#batch","title":"\u6279\u91cf\uff08Batch\uff09\u64cd\u4f5c","text":"<p>NebulaGraph \u4e2d\uff0c\u6bcf\u4e2a\u5206\u7247\u90fd\u662f\u4e32\u884c\u5199\u65e5\u5fd7\uff0c\u4e3a\u4e86\u63d0\u9ad8\u541e\u5410\uff0c\u5199\u65e5\u5fd7\u65f6\u9700\u8981\u505a\u6279\u91cf\u64cd\u4f5c\uff0c\u4f46\u662f\u7531\u4e8e NebulaGraph \u5229\u7528 WAL \u5b9e\u73b0\u4e00\u4e9b\u7279\u6b8a\u529f\u80fd\uff0c\u9700\u8981\u5bf9\u6279\u91cf\u64cd\u4f5c\u8fdb\u884c\u5206\u7ec4\uff0c\u8fd9\u662f NebulaGraph \u7684\u7279\u8272\u3002</p> <p>\u4f8b\u5982\u65e0\u9501 CAS \u64cd\u4f5c\u9700\u8981\u4e4b\u524d\u7684 WAL \u5168\u90e8\u63d0\u4ea4\u540e\u624d\u80fd\u6267\u884c\uff0c\u5982\u679c\u4e00\u4e2a\u6279\u91cf\u5199\u5165\u7684 WAL \u91cc\u5305\u542b\u4e86 CAS \u7c7b\u578b\u7684 WAL\uff0c\u5c31\u9700\u8981\u62c6\u5206\u6210\u7c92\u5ea6\u66f4\u5c0f\u7684\u51e0\u4e2a\u7ec4\uff0c\u8fd8\u8981\u4fdd\u8bc1\u8fd9\u51e0\u7ec4 WAL \u4e32\u884c\u63d0\u4ea4\u3002</p>"},{"location":"1.introduction/3.nebula-graph-architecture/4.storage-service/#leader_transfer_leadership","title":"leader \u5207\u6362\uff08Transfer Leadership\uff09","text":"<p>leader \u5207\u6362\u5bf9\u4e8e\u8d1f\u8f7d\u5747\u8861\u81f3\u5173\u91cd\u8981\uff0c\u5f53\u628a\u67d0\u4e2a\u5206\u7247\u4ece\u4e00\u53f0\u673a\u5668\u8fc1\u79fb\u5230\u53e6\u4e00\u53f0\u673a\u5668\u65f6\uff0c\u9996\u5148\u4f1a\u68c0\u67e5\u5206\u7247\u662f\u4e0d\u662f leader\uff0c\u5982\u679c\u662f\u7684\u8bdd\uff0c\u9700\u8981\u5148\u5207\u6362 leader\uff0c\u6570\u636e\u8fc1\u79fb\u5b8c\u6bd5\u4e4b\u540e\uff0c\u901a\u5e38\u8fd8\u8981\u91cd\u65b0\u5747\u8861 leader \u5206\u5e03\u3002</p> <p>\u5bf9\u4e8e leader \u6765\u8bf4\uff0c\u63d0\u4ea4 leader \u5207\u6362\u547d\u4ee4\u65f6\uff0c\u5c31\u4f1a\u653e\u5f03\u81ea\u5df1\u7684 leader \u8eab\u4efd\uff0c\u5f53 follower \u6536\u5230 leader \u5207\u6362\u547d\u4ee4\u65f6\uff0c\u5c31\u4f1a\u53d1\u8d77\u9009\u4e3e\u3002</p>"},{"location":"1.introduction/3.nebula-graph-architecture/4.storage-service/#_7","title":"\u6210\u5458\u53d8\u66f4","text":"<p>\u4e3a\u4e86\u907f\u514d\u8111\u88c2\uff0c\u5f53\u4e00\u4e2a Raft group \u7684\u6210\u5458\u53d1\u751f\u53d8\u5316\u65f6\uff0c\u9700\u8981\u6709\u4e00\u4e2a\u4e2d\u95f4\u72b6\u6001\uff0c\u8be5\u72b6\u6001\u4e0b\u65b0\u65e7 group \u7684\u591a\u6570\u6d3e\u9700\u8981\u6709\u91cd\u53e0\u7684\u90e8\u5206\uff0c\u8fd9\u6837\u5c31\u9632\u6b62\u4e86\u65b0\u7684 group \u6216\u65e7\u7684 group \u5355\u65b9\u9762\u505a\u51fa\u51b3\u5b9a\u3002\u4e3a\u4e86\u66f4\u52a0\u7b80\u5316\uff0cDiego Ongaro \u5728\u81ea\u5df1\u7684\u535a\u58eb\u8bba\u6587\u4e2d\u63d0\u51fa\u6bcf\u6b21\u53ea\u589e\u51cf\u4e00\u4e2a peer \u7684\u65b9\u5f0f\uff0c\u4ee5\u4fdd\u8bc1\u65b0\u65e7 group \u7684\u591a\u6570\u6d3e\u603b\u662f\u6709\u91cd\u53e0\u3002 NebulaGraph \u4e5f\u91c7\u7528\u4e86\u8fd9\u4e2a\u65b9\u5f0f\uff0c\u53ea\u4e0d\u8fc7\u589e\u52a0\u6210\u5458\u548c\u79fb\u9664\u6210\u5458\u7684\u5b9e\u73b0\u6709\u6240\u533a\u522b\u3002\u5177\u4f53\u5b9e\u73b0\u65b9\u5f0f\u8bf7\u53c2\u89c1 Raft Part class \u91cc addPeer/removePeer \u7684\u5b9e\u73b0\u3002</p>"},{"location":"1.introduction/3.nebula-graph-architecture/4.storage-service/#hdfs","title":"\u4e0e HDFS \u7684\u533a\u522b","text":"<p>Storage \u670d\u52a1\u57fa\u4e8e Raft \u534f\u8bae\u5b9e\u73b0\u7684\u5206\u5e03\u5f0f\u67b6\u6784\uff0c\u4e0e HDFS \u7684\u5206\u5e03\u5f0f\u67b6\u6784\u6709\u4e00\u4e9b\u533a\u522b\u3002\u4f8b\u5982\uff1a</p> <ul> <li>Storage \u670d\u52a1\u672c\u8eab\u901a\u8fc7 Raft \u534f\u8bae\u4fdd\u8bc1\u4e00\u81f4\u6027\uff0c\u526f\u672c\u6570\u91cf\u901a\u5e38\u4e3a\u5947\u6570\uff0c\u65b9\u4fbf\u8fdb\u884c\u9009\u4e3e leader\uff0c\u800c HDFS \u5b58\u50a8\u5177\u4f53\u6570\u636e\u7684 DataNode \u9700\u8981\u901a\u8fc7 NameNode \u4fdd\u8bc1\u4e00\u81f4\u6027\uff0c\u5bf9\u526f\u672c\u6570\u91cf\u6ca1\u6709\u8981\u6c42\u3002</li> </ul> <ul> <li>Storage \u670d\u52a1\u53ea\u6709 leader \u526f\u672c\u63d0\u4f9b\u8bfb\u5199\u670d\u52a1\uff0c\u800c HDFS \u7684\u6240\u6709\u526f\u672c\u90fd\u53ef\u4ee5\u63d0\u4f9b\u8bfb\u5199\u670d\u52a1\u3002</li> </ul> <ul> <li>Storage \u670d\u52a1\u65e0\u6cd5\u4fee\u6539\u526f\u672c\u6570\u91cf\uff0c\u53ea\u80fd\u5728\u521b\u5efa\u56fe\u7a7a\u95f4\u65f6\u6307\u5b9a\u526f\u672c\u6570\u91cf\uff0c\u800c HDFS \u53ef\u4ee5\u8c03\u6574\u526f\u672c\u6570\u91cf\u3002</li> </ul> <ul> <li>Storage \u670d\u52a1\u662f\u76f4\u63a5\u8bbf\u95ee\u6587\u4ef6\u7cfb\u7edf\uff0c\u800c HDFS \u7684\u4e0a\u5c42\uff08\u4f8b\u5982 HBase\uff09\u9700\u8981\u5148\u8bbf\u95ee HDFS\uff0c\u518d\u8bbf\u95ee\u5230\u6587\u4ef6\u7cfb\u7edf\uff0c\u8fdc\u7a0b\u8fc7\u7a0b\u8c03\u7528\uff08RPC\uff09\u6b21\u6570\u66f4\u591a\u3002</li> </ul> <p>\u603b\u800c\u8a00\u4e4b\uff0cStorage \u670d\u52a1\u66f4\u52a0\u8f7b\u91cf\u7ea7\uff0c\u7cbe\u7b80\u4e86\u4e00\u4e9b\u529f\u80fd\uff0c\u67b6\u6784\u6ca1\u6709 HDFS \u590d\u6742\uff0c\u53ef\u4ee5\u6709\u6548\u63d0\u9ad8\u5c0f\u5757\u5b58\u50a8\u7684\u8bfb\u5199\u6027\u80fd\u3002</p>"},{"location":"14.client/1.nebula-client/","title":"\u5ba2\u6237\u7aef\u4ecb\u7ecd","text":"<p>NebulaGraph \u63d0\u4f9b\u591a\u79cd\u7c7b\u578b\u5ba2\u6237\u7aef\uff0c\u4fbf\u4e8e\u7528\u6237\u8fde\u63a5\u3001\u7ba1\u7406 NebulaGraph \u56fe\u6570\u636e\u5e93\u3002</p> <ul> <li>NebulaGraph Console\uff1a\u539f\u751f CLI \u5ba2\u6237\u7aef</li> </ul> <ul> <li>NebulaGraph CPP\uff1aC++ \u5ba2\u6237\u7aef</li> </ul> <ul> <li>NebulaGraph Java\uff1aJava \u5ba2\u6237\u7aef</li> </ul> <ul> <li>NebulaGraph Python\uff1aPython \u5ba2\u6237\u7aef</li> </ul> <ul> <li>NebulaGraph Go\uff1aGo \u5ba2\u6237\u7aef</li> </ul> <p>Note</p> <p>\u4ec5\u4ee5\u4e0b\u7c7b\u652f\u6301\u7ebf\u7a0b\u5b89\u5168\uff08thread-safe\uff09\uff1a</p> <ul> <li>NebulaGraph Java \u5ba2\u6237\u7aef\u63d0\u4f9b\u7684 NebulaPool \u548c SessionPool </li> <li>NebulaGraph Go \u5ba2\u6237\u7aef\u63d0\u4f9b\u7684 ConnectionPool \u548c SessionPool</li> </ul> <p>Caution</p> <p>\u4ee5\u4e0b\u5ba2\u6237\u7aef\u5de5\u5177\u4e5f\u53ef\u7528\u4e8e\u8fde\u63a5\u548c\u7ba1\u7406 NebulaGraph \u3002\u4ed6\u4eec\u7531\u975e\u5e38\u9177\u7684\u793e\u533a\u7528\u6237\u63d0\u4f9b\u548c\u7ef4\u62a4\uff0c\u6b22\u8fce\u5927\u5bb6\u53c2\u4e0e\u6d4b\u8bd5\u548c\u8d21\u732e\u3002</p> <ul> <li>NebulaGraph PHP </li> <li>NebulaGraph Node</li> <li>NebulaGraph .net</li> <li>NebulaGraph JDBC</li> <li>NebulaGraph Carina\uff08Python ORM\uff09</li> <li>NORM\uff08Golang ORM\uff09</li> <li>Graph-Ocean\uff08Java ORM\uff09</li> <li>NebulaGraph Ngbatis\uff08MyBatis \u98ce\u683c\u7684 Java ORM\uff09</li> </ul>"},{"location":"14.client/3.nebula-cpp-client/","title":"NebulaGraph CPP","text":"<p>NebulaGraph CPP \u662f\u4e00\u6b3e C++ \u8bed\u8a00\u7684\u5ba2\u6237\u7aef\uff0c\u53ef\u4ee5\u8fde\u63a5\u3001\u7ba1\u7406 NebulaGraph \u56fe\u6570\u636e\u5e93\u3002</p>"},{"location":"14.client/3.nebula-cpp-client/#_1","title":"\u524d\u63d0\u6761\u4ef6","text":"<p>\u8bf7\u786e\u4fdd\u5df2\u5b89\u88c5 C++ \u4e14 GCC \u7248\u672c\u4e3a 4.8 \u53ca\u4ee5\u4e0a\u3002</p>"},{"location":"14.client/3.nebula-cpp-client/#_2","title":"\u7248\u672c\u5bf9\u7167\u8868","text":"<p>\u53c2\u89c1Github\u3002</p>"},{"location":"14.client/3.nebula-cpp-client/#nebulagraph_cpp_1","title":"\u5b89\u88c5 NebulaGraph CPP","text":"<p>\u672c\u6587\u4ecb\u7ecd\u901a\u8fc7\u7f16\u8bd1\u65b9\u5f0f\u5b89\u88c5 NebulaGraph CPP\u3002</p>"},{"location":"14.client/3.nebula-cpp-client/#_3","title":"\u524d\u63d0\u6761\u4ef6","text":"<ul> <li>\u51c6\u5907\u6b63\u786e\u7684\u7f16\u8bd1\u73af\u5883\uff0c\u8be6\u60c5\u8bf7\u53c2\u89c1\u8f6f\u786c\u4ef6\u8981\u6c42\u548c\u5b89\u88c5\u4e09\u65b9\u5e93\u4f9d\u8d56\u5305\u3002</li> <li>\u786e\u4fdd\u5df2\u5b89\u88c5 C++ \u4e14 GCC \u7248\u672c\u4e3a\uff1a{10.1.0 | 9.3.0 | 9.2.0 | 9.1.0 | 8.3.0 | 7.5.0 | 7.1.0}\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1 gcc_preset_versions \u53c2\u6570\u3002</li> </ul>"},{"location":"14.client/3.nebula-cpp-client/#_4","title":"\u5b89\u88c5\u6b65\u9aa4","text":"<ol> <li> <p>\u514b\u9686 NebulaGraph CPP \u6e90\u7801\u5230\u673a\u5668\u3002</p> <ul> <li> <p>\uff08\u63a8\u8350\uff09\u5982\u679c\u9700\u8981\u5b89\u88c5\u6307\u5b9a\u7248\u672c\u7684 NebulaGraph CPP\uff0c\u8bf7\u4f7f\u7528\u9009\u9879<code>--branch</code>\u6307\u5b9a\u5206\u652f\u3002\u4f8b\u5982\u5b89\u88c5 v3.4.0\u53d1\u5e03\u7248\u672c\uff0c\u8bf7\u6267\u884c\u5982\u4e0b\u547d\u4ee4\uff1a</p> <pre><code>$ git clone --branch release-3.4 https://github.com/vesoft-inc/nebula-cpp.git\n</code></pre> </li> </ul> <ul> <li> <p>\u5982\u679c\u9700\u8981\u5b89\u88c5\u65e5\u5e38\u5f00\u53d1\u7248\u672c\uff0c\u8bf7\u6267\u884c\u5982\u4e0b\u547d\u4ee4\u4e0b\u8f7d<code>master</code>\u5206\u652f\u7684\u6e90\u7801\uff1a</p> <pre><code>$ git clone https://github.com/vesoft-inc/nebula-cpp.git\n</code></pre> </li> </ul> </li> <li> <p>\u8fdb\u5165\u76ee\u5f55 nebula-cpp\u3002</p> <pre><code>$ cd nebula-cpp\n</code></pre> </li> <li> <p>\u521b\u5efa\u76ee\u5f55 build \u5e76\u8fdb\u5165\u8be5\u76ee\u5f55\u3002</p> <pre><code>$ mkdir build &amp;&amp; cd build\n</code></pre> </li> <li> <p>\u4f7f\u7528 CMake \u751f\u6210 makefile \u6587\u4ef6\u3002</p> <p>Note</p> <p>\u9ed8\u8ba4\u5b89\u88c5\u8def\u5f84\u4e3a<code>/usr/local/nebula</code>\uff0c\u5982\u679c\u9700\u8981\u4fee\u6539\u8def\u5f84\uff0c\u8bf7\u5728\u4e0b\u65b9\u547d\u4ee4\u5185\u589e\u52a0\u53c2\u6570 <code>-DCMAKE_INSTALL_PREFIX=&lt;installation_path&gt;</code>\u3002</p> <pre><code>$ cmake -DCMAKE_BUILD_TYPE=Release ..\n</code></pre> <p>Note</p> <p>\u5982\u679c g++ \u4e0d\u652f\u6301 C++11\uff0c\u8bf7\u6dfb\u52a0\u9009\u9879<code>-DDISABLE_CXX11_ABI=ON</code>\u3002</p> </li> <li> <p>\u7f16\u8bd1 NebulaGraph CPP\u3002  </p> <p>\u4e3a\u4e86\u9002\u5f53\u5730\u52a0\u5feb\u7f16\u8bd1\u901f\u5ea6\uff0c\u53ef\u4ee5\u4f7f\u7528\u9009\u9879<code>-j</code>\u5e76\u884c\u7f16\u8bd1\u3002\u5e76\u884c\u6570\u91cf<code>N</code>\u5efa\u8bae\u4e3a\\(\\min(\\text{CPU}\u6838\u6570\uff0c\\frac{\u5185\u5b58 (GB)}{2})\\)\u3002</p> <pre><code>$ make -j{N}\n</code></pre> </li> <li> <p>\u5b89\u88c5 NebulaGraph CPP\u3002</p> <pre><code>$ sudo make install\n</code></pre> </li> <li> <p>\u66f4\u65b0\u52a8\u6001\u94fe\u63a5\u5e93\u3002</p> <pre><code>$ sudo ldconfig\n</code></pre> </li> </ol>"},{"location":"14.client/3.nebula-cpp-client/#_5","title":"\u4f7f\u7528\u65b9\u6cd5","text":"<p>\u5c06 CPP \u6587\u4ef6\u7f16\u8bd1\u4e3a\u53ef\u6267\u884c\u6587\u4ef6\u5373\u53ef\u3002\u63a5\u4e0b\u6765\u4ee5<code>SessionExample.cpp</code>\u4e3a\u4f8b\uff0c\u4ecb\u7ecd\u5982\u4f55\u64cd\u4f5c\u3002</p> <ol> <li> <p>\u4f7f\u7528\u793a\u4f8b\u4ee3\u7801\u521b\u5efa<code>SessionExample.cpp</code>\u6587\u4ef6\u3002</p> </li> <li> <p>\u7f16\u8bd1\u6587\u4ef6\uff0c\u547d\u4ee4\u5982\u4e0b\uff1a</p> <pre><code>$ LIBRARY_PATH=&lt;library_folder_path&gt;:$LIBRARY_PATH g++ -std=c++11 SessionExample.cpp -I&lt;include_folder_path&gt; -lnebula_graph_client -o session_example\n</code></pre> <ul> <li><code>library_folder_path</code>\uff1a NebulaGraph \u52a8\u6001\u5e93\u6587\u4ef6\u5b58\u50a8\u8def\u5f84\uff0c\u9ed8\u8ba4\u4e3a<code>/usr/local/nebula/lib64</code>\u3002</li> </ul> <ul> <li><code>include_folder_path</code>\uff1a NebulaGraph \u5934\u6587\u4ef6\u5b58\u50a8\u8def\u5f84\uff0c\u9ed8\u8ba4\u4e3a<code>/usr/local/nebula/include</code>\u3002</li> </ul> <p>\u793a\u4f8b\uff1a</p> <pre><code>$ LIBRARY_PATH=/usr/local/nebula/lib64:$LIBRARY_PATH g++ -std=c++11 SessionExample.cpp -I/usr/local/nebula/include -lnebula_graph_client -o session_example\n</code></pre> </li> </ol>"},{"location":"14.client/3.nebula-cpp-client/#api","title":"API \u6587\u6863","text":"<p>\u70b9\u51fb\u6b64\u5904\u67e5\u770b CPP \u5ba2\u6237\u7aef\u63d0\u4f9b\u7684\u5404\u79cd\u7c7b\u548c\u65b9\u6cd5\u3002</p>"},{"location":"14.client/3.nebula-cpp-client/#_6","title":"\u6838\u5fc3\u4ee3\u7801","text":"<p>NebulaGraph CPP \u5ba2\u6237\u7aef\u63d0\u4f9b Session Pool \u548c Connection Pool \u4e24\u79cd\u65b9\u5f0f\u8fde\u63a5 NebulaGraph \u3002\u4f7f\u7528 Connection Pool \u9700\u8981\u7528\u6237\u81ea\u884c\u7ba1\u7406 Session \u5b9e\u4f8b\u3002</p> <ul> <li> <p>Session Pool</p> <p>\u8be6\u7ec6\u793a\u4f8b\u8bf7\u53c2\u89c1 SessionPoolExample\u3002</p> </li> </ul> <ul> <li> <p>Connection Pool</p> <p>\u8be6\u7ec6\u793a\u4f8b\u8bf7\u53c2\u89c1 SessionExample\u3002</p> </li> </ul>"},{"location":"14.client/4.nebula-java-client/","title":"NebulaGraph Java","text":"<p>NebulaGraph Java \u662f\u4e00\u6b3e Java \u8bed\u8a00\u7684\u5ba2\u6237\u7aef\uff0c\u53ef\u4ee5\u8fde\u63a5\u3001\u7ba1\u7406 NebulaGraph \u56fe\u6570\u636e\u5e93\u3002</p>"},{"location":"14.client/4.nebula-java-client/#_1","title":"\u524d\u63d0\u6761\u4ef6","text":"<p>\u5df2\u5b89\u88c5 Java\uff0c\u7248\u672c\u4e3a 8.0 \u53ca\u4ee5\u4e0a\u3002</p>"},{"location":"14.client/4.nebula-java-client/#_2","title":"\u7248\u672c\u5bf9\u7167\u8868","text":"<p>\u53c2\u89c1Github\u3002</p>"},{"location":"14.client/4.nebula-java-client/#nebulagraph_java_1","title":"\u4e0b\u8f7d NebulaGraph Java","text":"<ul> <li> <p>\uff08\u63a8\u8350\uff09\u5982\u679c\u9700\u8981\u4f7f\u7528\u6307\u5b9a\u7248\u672c\u7684 NebulaGraph Java\uff0c\u8bf7\u4f7f\u7528\u9009\u9879<code>--branch</code>\u6307\u5b9a\u5206\u652f\u3002\u4f8b\u5982\u4f7f\u7528 v3.6.1\u53d1\u5e03\u7248\u672c\uff0c\u8bf7\u6267\u884c\u5982\u4e0b\u547d\u4ee4\uff1a</p> <pre><code>$ git clone --branch release-3.6 https://github.com/vesoft-inc/nebula-java.git\n</code></pre> </li> </ul> <ul> <li> <p>\u5982\u679c\u9700\u8981\u5b89\u88c5\u65e5\u5e38\u5f00\u53d1\u7248\u672c\uff0c\u8bf7\u6267\u884c\u5982\u4e0b\u547d\u4ee4\u4e0b\u8f7d<code>master</code>\u5206\u652f\u7684\u6e90\u7801\uff1a</p> <pre><code>$ git clone https://github.com/vesoft-inc/nebula-java.git\n</code></pre> </li> </ul>"},{"location":"14.client/4.nebula-java-client/#_3","title":"\u4f7f\u7528\u65b9\u6cd5","text":"<p>Note</p> <p>\u5efa\u8bae\u4e00\u4e2a\u7ebf\u7a0b\u4f7f\u7528\u4e00\u4e2a\u4f1a\u8bdd\uff0c\u5982\u679c\u591a\u4e2a\u7ebf\u7a0b\u4f7f\u7528\u540c\u4e00\u4e2a\u4f1a\u8bdd\uff0c\u4f1a\u964d\u4f4e\u6548\u7387\u3002</p> <p>\u4f7f\u7528 IDEA \u7b49\u5de5\u5177\u5bfc\u5165 Maven \u9879\u76ee\uff0c\u8bf7\u5728<code>pom.xml</code>\u4e2d\u6dfb\u52a0\u5982\u4e0b\u4f9d\u8d56\uff1a</p> <p>Note</p> <p><code>3.0.0-SNAPSHOT</code>\u4e3a\u65e5\u5e38\u7814\u53d1\u7248\u672c\uff0c\u53ef\u80fd\u5b58\u5728\u672a\u77e5\u95ee\u9898\uff0c\u5efa\u8bae\u4f7f\u7528 release \u7248\u672c\u53f7\u66ff\u6362<code>3.0.0-SNAPSHOT</code>\u3002</p> <pre><code>&lt;dependency&gt;\n  &lt;groupId&gt;com.vesoft&lt;/groupId&gt;\n  &lt;artifactId&gt;client&lt;/artifactId&gt;\n  &lt;version&gt;3.0.0-SNAPSHOT&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre> <p>\u5982\u679c\u65e0\u6cd5\u4e0b\u8f7d\u65e5\u5e38\u7814\u53d1\u7248\u672c\u7684\u4f9d\u8d56\uff0c\u8bf7\u5728<code>pom.xml</code>\u4e2d\u6dfb\u52a0\u5982\u4e0b\u5185\u5bb9\uff08release \u7248\u672c\u4e0d\u9700\u8981\u6dfb\u52a0\uff09\uff1a</p> <pre><code>&lt;repositories&gt; \n  &lt;repository&gt; \n    &lt;id&gt;snapshots&lt;/id&gt; \n    &lt;url&gt;https://oss.sonatype.org/content/repositories/snapshots/&lt;/url&gt; \n  &lt;/repository&gt; \n&lt;/repositories&gt;\n</code></pre> <p>\u5982\u679c\u6ca1\u6709 Maven \u7ba1\u7406\u9879\u76ee\uff0c\u8bf7\u624b\u52a8\u4e0b\u8f7d JAR \u5305\u8fdb\u884c\u5b89\u88c5\u3002</p>"},{"location":"14.client/4.nebula-java-client/#api","title":"API \u6587\u6863","text":"<p>\u70b9\u51fb\u6b64\u5904\u67e5\u770b Java \u5ba2\u6237\u7aef\u63d0\u4f9b\u7684\u5404\u79cd\u7c7b\u548c\u65b9\u6cd5\u3002</p>"},{"location":"14.client/4.nebula-java-client/#_4","title":"\u6838\u5fc3\u4ee3\u7801","text":"<p>NebulaGraph Java \u5ba2\u6237\u7aef\u63d0\u4f9b Connection Pool \u548c Session Pool \u4e24\u79cd\u4f7f\u7528\u65b9\u5f0f\uff0c\u4f7f\u7528 Connection Pool \u9700\u8981\u7528\u6237\u81ea\u884c\u7ba1\u7406 Session \u5b9e\u4f8b\u3002</p> <ul> <li> <p>Session Pool</p> <p>\u8be6\u7ec6\u793a\u4f8b\u8bf7\u53c2\u89c1 GraphSessionPoolExample\u3002</p> </li> </ul> <ul> <li> <p>Connection Pool</p> <p>\u8be6\u7ec6\u793a\u4f8b\u8bf7\u53c2\u89c1 GraphClientExample\u3002</p> </li> </ul>"},{"location":"14.client/4.nebula-java-client/#java","title":"Java \u76f8\u5173\u5e93","text":"<p>\u4ee5\u4e0b\u7531\u975e\u5e38\u9177\u7684\u793e\u533a\u7528\u6237\u63d0\u4f9b\u548c\u7ef4\u62a4\uff0c\u6b22\u8fce\u5927\u5bb6\u53c2\u4e0e\u6d4b\u8bd5\u548c\u8d21\u732e\u3002</p> <ul> <li>java-jdbc</li> <li>java-orm</li> <li>java-springboot demo</li> <li>ngbatis</li> </ul>"},{"location":"14.client/5.nebula-python-client/","title":"NebulaGraph Python","text":"<p>NebulaGraph Python \u662f\u4e00\u6b3e Python \u8bed\u8a00\u7684\u5ba2\u6237\u7aef\uff0c\u53ef\u4ee5\u8fde\u63a5\u3001\u7ba1\u7406 NebulaGraph \u56fe\u6570\u636e\u5e93\u3002</p>"},{"location":"14.client/5.nebula-python-client/#_1","title":"\u524d\u63d0\u6761\u4ef6","text":"<p>\u5df2\u5b89\u88c5 Python\uff0c\u7248\u672c\u4e3a 3.6 \u53ca\u4ee5\u4e0a\u3002</p>"},{"location":"14.client/5.nebula-python-client/#_2","title":"\u7248\u672c\u5bf9\u7167\u8868","text":"<p>\u53c2\u89c1Github\u3002</p>"},{"location":"14.client/5.nebula-python-client/#nebulagraph_python_1","title":"\u5b89\u88c5 NebulaGraph Python","text":""},{"location":"14.client/5.nebula-python-client/#pip","title":"pip \u5b89\u88c5","text":"<pre><code>$ pip install nebula3-python==&lt;version&gt;\n</code></pre>"},{"location":"14.client/5.nebula-python-client/#_3","title":"\u514b\u9686\u6e90\u7801\u5b89\u88c5","text":"<ol> <li> <p>\u514b\u9686 NebulaGraph Python \u6e90\u7801\u5230\u673a\u5668\u3002</p> <ul> <li> <p>\uff08\u63a8\u8350\uff09\u5982\u679c\u9700\u8981\u5b89\u88c5\u6307\u5b9a\u7248\u672c\u7684 NebulaGraph Python\uff0c\u8bf7\u4f7f\u7528\u9009\u9879<code>--branch</code>\u6307\u5b9a\u5206\u652f\u3002\u4f8b\u5982\u5b89\u88c5 v3.4.0\u53d1\u5e03\u7248\u672c\uff0c\u8bf7\u6267\u884c\u5982\u4e0b\u547d\u4ee4\uff1a</p> <pre><code>$ git clone --branch release-3.4 https://github.com/vesoft-inc/nebula-python.git\n</code></pre> </li> </ul> <ul> <li> <p>\u5982\u679c\u9700\u8981\u5b89\u88c5\u65e5\u5e38\u5f00\u53d1\u7248\u672c\uff0c\u8bf7\u6267\u884c\u5982\u4e0b\u547d\u4ee4\u4e0b\u8f7d<code>master</code>\u5206\u652f\u7684\u6e90\u7801\uff1a</p> <pre><code>$ git clone https://github.com/vesoft-inc/nebula-python.git\n</code></pre> </li> </ul> </li> <li> <p>\u8fdb\u5165\u76ee\u5f55 nebula-python\u3002</p> <pre><code>$ cd nebula-python\n</code></pre> </li> <li> <p>\u6267\u884c\u5982\u4e0b\u547d\u4ee4\u5b89\u88c5\u3002</p> <pre><code>$ pip install .\n</code></pre> </li> </ol>"},{"location":"14.client/5.nebula-python-client/#api","title":"API \u6587\u6863","text":"<p>\u70b9\u51fb\u6b64\u5904\u67e5\u770b Python \u5ba2\u6237\u7aef\u63d0\u4f9b\u7684\u5404\u79cd\u7c7b\u548c\u65b9\u6cd5\u3002</p>"},{"location":"14.client/5.nebula-python-client/#_4","title":"\u6838\u5fc3\u4ee3\u7801","text":"<p>NebulaGraph Python \u5ba2\u6237\u7aef\u63d0\u4f9b Connection Pool \u548c Session Pool \u4e24\u79cd\u4f7f\u7528\u65b9\u5f0f\uff0c\u4f7f\u7528 Connection Pool \u9700\u8981\u7528\u6237\u81ea\u884c\u7ba1\u7406 Session \u5b9e\u4f8b\u3002</p> <ul> <li> <p>Session Pool</p> <p>\u8be6\u7ec6\u793a\u4f8b\u8bf7\u53c2\u89c1 SessinPoolExample.py\u3002</p> <p>\u4f7f\u7528\u9650\u5236\u8bf7\u53c2\u89c1 Example of using session pool\u3002</p> </li> </ul> <ul> <li> <p>Connection Pool</p> <p>\u8be6\u7ec6\u793a\u4f8b\u8bf7\u53c2\u89c1 Example\u3002</p> </li> </ul>"},{"location":"14.client/6.nebula-go-client/","title":"NebulaGraph Go","text":"<p>NebulaGraph Go \u662f\u4e00\u6b3e Go \u8bed\u8a00\u7684\u5ba2\u6237\u7aef\uff0c\u53ef\u4ee5\u8fde\u63a5\u3001\u7ba1\u7406 NebulaGraph \u56fe\u6570\u636e\u5e93\u3002</p>"},{"location":"14.client/6.nebula-go-client/#_1","title":"\u524d\u63d0\u6761\u4ef6","text":"<p>\u5df2\u5b89\u88c5 Go\uff0c\u7248\u672c\u4e3a 1.13 \u53ca\u4ee5\u4e0a\u3002</p>"},{"location":"14.client/6.nebula-go-client/#_2","title":"\u7248\u672c\u5bf9\u7167\u8868","text":"<p>\u53c2\u89c1Github\u3002</p>"},{"location":"14.client/6.nebula-go-client/#nebulagraph_go_1","title":"\u4e0b\u8f7d NebulaGraph Go","text":"<ul> <li> <p>\uff08\u63a8\u8350\uff09\u5982\u679c\u9700\u8981\u4e0b\u8f7d\u6307\u5b9a\u7248\u672c\u7684 NebulaGraph Go\uff0c\u8bf7\u4f7f\u7528\u9009\u9879<code>--branch</code>\u6307\u5b9a\u5206\u652f\u3002\u4f8b\u5982\u5b89\u88c5 v3.7.0\u53d1\u5e03\u7248\u672c\uff0c\u8bf7\u6267\u884c\u5982\u4e0b\u547d\u4ee4\uff1a</p> <pre><code>$ git clone --branch release-3.7 https://github.com/vesoft-inc/nebula-go.git\n</code></pre> </li> </ul> <ul> <li> <p>\u5982\u679c\u9700\u8981\u5b89\u88c5\u65e5\u5e38\u5f00\u53d1\u7248\u672c\uff0c\u8bf7\u6267\u884c\u5982\u4e0b\u547d\u4ee4\u4e0b\u8f7d<code>master</code>\u5206\u652f\u7684\u6e90\u7801\uff1a</p> <pre><code>$ git clone https://github.com/vesoft-inc/nebula-go.git\n</code></pre> </li> </ul>"},{"location":"14.client/6.nebula-go-client/#_3","title":"\u5b89\u88c5\u6216\u66f4\u65b0","text":"<p>\u5b89\u88c5\u6216\u66f4\u65b0\u7684\u547d\u4ee4\u5982\u4e0b\uff1a</p> <pre><code>$ go get -u -v github.com/vesoft-inc/nebula-go@&lt;tag&gt;\n</code></pre> <p><code>tag</code>\uff1a\u6307\u5b9a\u5206\u652f\u3002\u4f8b\u5982<code>master</code>\u6216<code>release-3.7</code>\u3002</p>"},{"location":"14.client/6.nebula-go-client/#api","title":"API \u6587\u6863","text":"<p>\u70b9\u51fb\u6b64\u5904\u67e5\u770b Go \u5ba2\u6237\u7aef\u63d0\u4f9b\u7684\u5404\u79cd\u65b9\u6cd5\u548c\u7c7b\u578b\u3002</p>"},{"location":"14.client/6.nebula-go-client/#_4","title":"\u6838\u5fc3\u4ee3\u7801","text":"<p>NebulaGraph Go \u5ba2\u6237\u7aef\u63d0\u4f9b Connection Pool \u548c Session Pool \u4e24\u79cd\u4f7f\u7528\u65b9\u5f0f\uff0c\u4f7f\u7528 Connection Pool \u9700\u8981\u7528\u6237\u81ea\u884c\u7ba1\u7406 Session \u5b9e\u4f8b\u3002</p> <ul> <li> <p>Session Pool</p> <p>\u8be6\u7ec6\u793a\u4f8b\u8bf7\u53c2\u89c1 session_pool_example.go\u3002</p> <p>\u4f7f\u7528\u9650\u5236\u8bf7\u53c2\u89c1 Usage example\u3002</p> </li> </ul> <ul> <li> <p>Connection Pool</p> <p>\u8be6\u7ec6\u793a\u4f8b\u8bf7\u53c2\u89c1 graph_client_basic_example \u548c graph_client_goroutines_example\u3002</p> </li> </ul>"},{"location":"15.contribution/how-to-contribute/","title":"\u5982\u4f55\u8d21\u732e\u4ee3\u7801\u548c\u6587\u6863","text":""},{"location":"15.contribution/how-to-contribute/#_2","title":"\u5f00\u59cb\u4e4b\u524d","text":""},{"location":"15.contribution/how-to-contribute/#github","title":"GitHub \u6216\u793e\u533a\u63d0\u4ea4\u95ee\u9898","text":"<p>\u6b22\u8fce\u4e3a\u9879\u76ee\u8d21\u732e\u4efb\u4f55\u4ee3\u7801\u6216\u6587\u6863\uff0c\u4f46\u662f\u5efa\u8bae\u5148\u5728 GitHub \u6216\u793e\u533a\u4e0a\u63d0\u4ea4\u4e00\u4e2a\u95ee\u9898\uff0c\u548c\u5927\u5bb6\u5171\u540c\u8ba8\u8bba\u3002</p>"},{"location":"15.contribution/how-to-contribute/#cla","title":"\u7b7e\u7f72\u8d21\u732e\u8005\u8bb8\u53ef\u534f\u8bae CLA","text":"<ol> <li>\u6253\u5f00 CLA \u670d\u52a1\u767b\u5f55\u9875\u9762\u3002</li> <li>\u5355\u51fb Sign in with GitHub\u3002</li> <li>\u9605\u8bfb\u5e76\u540c\u610f\u534f\u8bae vesoft inc. Contributor License Agreement\u3002</li> </ol> <p>\u5982\u679c\u6709\u4efb\u4f55\u95ee\u9898\uff0c\u8bf7\u63d0\u4ea4 issue\u3002</p>"},{"location":"15.contribution/how-to-contribute/#_3","title":"\u4fee\u6539\u5355\u7bc7\u6587\u6863","text":"<p>NebulaGraph \u6587\u6863\u4ee5 Markdown \u8bed\u8a00\u7f16\u5199\u3002\u5355\u51fb\u6587\u6863\u6807\u9898\u53f3\u4fa7\u7684\u94c5\u7b14\u56fe\u6807\u5373\u53ef\u63d0\u4ea4\u4fee\u6539\u5efa\u8bae\u3002</p> <p>\u8be5\u65b9\u6cd5\u4ec5\u9002\u7528\u4e8e\u4fee\u6539\u5355\u7bc7\u6587\u6863\u3002</p>"},{"location":"15.contribution/how-to-contribute/#_4","title":"\u6279\u91cf\u4fee\u6539\u6216\u65b0\u589e\u6587\u4ef6","text":"<p>\u8be5\u65b9\u6cd5\u9002\u7528\u4e8e\u8d21\u732e\u4ee3\u7801\u3001\u6279\u91cf\u4fee\u6539\u591a\u7bc7\u6587\u6863\u6216\u8005\u65b0\u589e\u6587\u6863\u3002</p>"},{"location":"15.contribution/how-to-contribute/#step_1_github_fork","title":"Step 1\uff1a\u901a\u8fc7 GitHub fork \u4ed3\u5e93","text":"<p>NebulaGraph \u9879\u76ee\u6709\u5f88\u591a\u4ed3\u5e93\uff0c\u4ee5 NebulaGraph \u4ed3\u5e93\u4e3a\u4f8b\uff1a</p> <ol> <li> <p>\u8bbf\u95ee github.com/vesoft-inc/nebula\u3002</p> </li> <li> <p>\u5728\u53f3\u4e0a\u89d2\u5355\u51fb\u6309\u94ae<code>Fork</code>\uff0c\u7136\u540e\u5355\u51fb\u7528\u6237\u540d\uff0c\u5373\u53ef fork \u51fa NebulaGraph \u4ed3\u5e93\u3002</p> </li> </ol>"},{"location":"15.contribution/how-to-contribute/#step_2","title":"Step 2\uff1a\u5c06\u5206\u652f\u514b\u9686\u5230\u672c\u5730","text":"<ol> <li> <p>\u5b9a\u4e49\u672c\u5730\u5de5\u4f5c\u76ee\u5f55\u3002</p> <pre><code># \u5b9a\u4e49\u5de5\u4f5c\u76ee\u5f55\u3002\nworking_dir=$HOME/Workspace\n</code></pre> </li> <li> <p>\u5c06<code>user</code>\u8bbe\u7f6e\u4e3a GitHub \u7684\u7528\u6237\u540d\u3002</p> <pre><code>user={GitHub \u7528\u6237\u540d}\n</code></pre> </li> <li> <p>\u514b\u9686\u4ee3\u7801\u3002</p> <pre><code>mkdir -p $working_dir\ncd $working_dir\ngit clone https://github.com/$user/nebula.git\n# \u6216\uff1agit clone git@github.com:$user/nebula.git\n\ncd $working_dir/nebula\ngit remote add upstream https://github.com/vesoft-inc/nebula.git\n# \u6216\uff1agit remote add upstream git@github.com:vesoft-inc/nebula.git\n\n# \u7531\u4e8e\u6ca1\u6709\u5199\u8bbf\u95ee\u6743\u9650\uff0c\u8bf7\u52ff\u63a8\u9001\u81f3\u4e0a\u6e38\u4e3b\u5206\u652f\u3002\ngit remote set-url --push upstream no_push\n\n# \u786e\u8ba4\u8fdc\u7a0b\u5206\u652f\u6709\u6548\u3002\n# \u6b63\u786e\u7684\u683c\u5f0f\u4e3a\uff1a\n# origin    git@github.com:$(user)/nebula.git (fetch)\n# origin    git@github.com:$(user)/nebula.git (push)\n# upstream  https://github.com/vesoft-inc/nebula (fetch)\n# upstream  no_push (push)\ngit remote -v\n</code></pre> </li> <li> <p>\uff08\u53ef\u9009\uff09\u5b9a\u4e49 pre-commit hook\u3002</p> <p>\u8bf7\u5c06 NebulaGraph \u7684 pre-commit hook \u8fde\u63a5\u5230<code>.git</code>\u76ee\u5f55\u3002</p> <p>hook \u5c06\u68c0\u67e5 commit\uff0c\u5305\u62ec\u683c\u5f0f\u3001\u6784\u5efa\u3001\u6587\u6863\u751f\u6210\u7b49\u3002</p> <pre><code>cd $working_dir/nebula/.git/hooks\nln -s $working_dir/nebula/.linters/cpp/hooks/pre-commit.sh .\n</code></pre> <p>pre-commit hook \u6709\u65f6\u5019\u53ef\u80fd\u65e0\u6cd5\u6b63\u5e38\u6267\u884c\uff0c\u7528\u6237\u5fc5\u987b\u624b\u52a8\u6267\u884c\u3002</p> <pre><code>cd $working_dir/nebula/.git/hooks\nchmod +x pre-commit\n</code></pre> </li> </ol>"},{"location":"15.contribution/how-to-contribute/#step_3","title":"Step 3\uff1a\u5206\u652f","text":"<ol> <li> <p>\u66f4\u65b0\u672c\u5730\u4e3b\u5206\u652f\u3002</p> <pre><code>cd $working_dir/nebula\ngit fetch upstream\ngit checkout master\ngit rebase upstream/master\n</code></pre> </li> <li> <p>\u4ece\u4e3b\u5206\u652f\u521b\u5efa\u5e76\u5207\u6362\u5206\u652f\uff1a</p> <pre><code>git checkout -b myfeature\n</code></pre> <p>Note</p> <p>\u7531\u4e8e\u4e00\u4e2a PR \u901a\u5e38\u5305\u542b\u591a\u4e2a commits\uff0c\u6700\u7ec8\u5408\u5165 upstream/master \u5206\u652f\u65f6\uff0c\u6211\u4eec\u4f1a\u5c06\u8fd9\u4e9b commits \u6324\u538b\uff08squash\uff09\u6210\u4e00\u4e2a commit \u8fdb\u884c\u5408\u5e76\u3002\u56e0\u6b64\u5f3a\u70c8\u5efa\u8bae\u521b\u5efa\u4e00\u4e2a\u72ec\u7acb\u7684\u5206\u652f\u8fdb\u884c\u66f4\u6539\uff0c\u8fd9\u6837\u5728\u5408\u5165\u65f6\u624d\u5bb9\u6613\u88ab\u6324\u538b\u3002\u5408\u5e76\u540e\uff0c\u8fd9\u4e2a\u5206\u652f\u53ef\u4ee5\u88ab\u4e22\u5f03\u3002\u5982\u679c\u672a\u521b\u5efa\u5355\u72ec\u7684\u5206\u652f\uff0c\u800c\u662f\u76f4\u63a5\u5c06 commits \u63d0\u4ea4\u81f3 origin/master\uff0c\u5728\u5408\u5165\u65f6\uff0c\u53ef\u80fd\u4f1a\u51fa\u73b0\u95ee\u9898\u3002   \u82e5\u672a\u521b\u5efa\u5355\u72ec\u7684\u5206\u652f\uff08\u6216\u662f origin/master \u5408\u5e76\u4e86\u5176\u4ed6\u7684\u5206\u652f\u7b49\uff09\uff0c\u5bfc\u81f4 origin/master \u548c upstream/master \u4e0d\u4e00\u81f4\u65f6\uff0c\u7528\u6237\u53ef\u4ee5\u4f7f\u7528 hard reset \u5f3a\u5236\u4e24\u8005\u8fdb\u884c\u4e00\u81f4\u3002\u4f8b\u5982\uff1a</p> <pre><code>git fetch upstream\ngit checkout master\ngit reset --hard upstream/master\ngit push --force origin master\n</code></pre> </li> </ol>"},{"location":"15.contribution/how-to-contribute/#step_4","title":"Step 4\uff1a\u5f00\u53d1","text":"<ul> <li> <p>\u4ee3\u7801\u98ce\u683c</p> <p>NebulaGraph \u91c7\u7528<code>cpplint</code>\u6765\u786e\u4fdd\u4ee3\u7801\u7b26\u5408 Google \u7684\u4ee3\u7801\u98ce\u683c\u6307\u5357\u3002\u68c0\u67e5\u5668\u5c06\u5728\u63d0\u4ea4\u4ee3\u7801\u4e4b\u524d\u6267\u884c\u3002</p> </li> </ul> <ul> <li> <p>\u5355\u5143\u6d4b\u8bd5\u8981\u6c42</p> <p>\u8bf7\u4e3a\u65b0\u529f\u80fd\u6216 Bug \u4fee\u590d\u6dfb\u52a0\u5355\u5143\u6d4b\u8bd5\u3002</p> </li> </ul> <ul> <li> <p>\u6784\u5efa\u4ee3\u7801\u65f6\u5f00\u542f\u5355\u5143\u6d4b\u8bd5</p> <p>\u8be6\u60c5\u8bf7\u53c2\u89c1\u4f7f\u7528\u6e90\u7801\u5b89\u88c5 NebulaGraph \u3002</p> <p>Note</p> <p>\u8bf7\u786e\u4fdd\u5df2\u8bbe\u7f6e<code>-DENABLE_TESTING = ON</code>\u542f\u7528\u6784\u5efa\u5355\u5143\u6d4b\u8bd5\u3002</p> </li> </ul> <ul> <li> <p>\u8fd0\u884c\u6240\u6709\u5355\u5143\u6d4b\u8bd5</p> <p>\u5728<code>nebula</code>\u6839\u76ee\u5f55\u6267\u884c\u5982\u4e0b\u547d\u4ee4\uff1a</p> <pre><code>cd nebula/build\nctest -j$(nproc)\n</code></pre> </li> </ul>"},{"location":"15.contribution/how-to-contribute/#step_5","title":"Step 5\uff1a\u4fdd\u6301\u5206\u652f\u540c\u6b65","text":"<pre><code># \u5f53\u5904\u4e8e myfeature \u5206\u652f\u65f6\u3002\ngit fetch upstream\ngit rebase upstream/master\n</code></pre> <p>\u5728\u5176\u4ed6\u8d21\u732e\u8005\u5c06 PR \u5408\u5e76\u5230\u57fa\u7840\u5206\u652f\u4e4b\u540e\uff0c\u7528\u6237\u9700\u8981\u66f4\u65b0 head \u5206\u652f\u3002</p>"},{"location":"15.contribution/how-to-contribute/#step_6commit","title":"Step 6\uff1aCommit","text":"<p>\u63d0\u4ea4\u4ee3\u7801\u66f4\u6539\uff1a</p> <pre><code>git commit -a\n</code></pre> <p>\u7528\u6237\u53ef\u4ee5\u4f7f\u7528\u547d\u4ee4<code>--amend</code>\u91cd\u65b0\u7f16\u8f91\u4e4b\u524d\u7684\u4ee3\u7801\u3002</p>"},{"location":"15.contribution/how-to-contribute/#step_7push","title":"Step 7\uff1aPush","text":"<p>\u9700\u8981\u5ba1\u6838\u6216\u79bb\u7ebf\u5907\u4efd\u4ee3\u7801\u65f6\uff0c\u53ef\u4ee5\u5c06\u672c\u5730\u4ed3\u5e93\u521b\u5efa\u7684\u5206\u652f push \u5230 GitHub \u7684\u8fdc\u7a0b\u4ed3\u5e93\u3002</p> <pre><code>git push origin myfeature\n</code></pre>"},{"location":"15.contribution/how-to-contribute/#step_8_pull_request","title":"Step 8\uff1a\u521b\u5efa pull request","text":"<ol> <li> <p>\u8bbf\u95ee fork \u51fa\u7684\u4ed3\u5e93<code>https://github.com/$user/nebula</code> \uff08\u66ff\u6362\u6b64\u5904\u7684\u7528\u6237\u540d<code>$user</code>)\u3002</p> </li> <li> <p>\u5355\u51fb<code>myfeature</code>\u5206\u652f\u65c1\u7684\u6309\u94ae<code>Compare &amp; pull request</code>\u3002</p> </li> </ol>"},{"location":"15.contribution/how-to-contribute/#step_9","title":"Step 9\uff1a\u4ee3\u7801\u5ba1\u67e5","text":"<p>pull request \u521b\u5efa\u540e\uff0c\u81f3\u5c11\u9700\u8981\u4e24\u4eba\u5ba1\u67e5\u3002\u5ba1\u67e5\u4eba\u5458\u5c06\u8fdb\u884c\u5f7b\u5e95\u7684\u4ee3\u7801\u5ba1\u67e5\uff0c\u4ee5\u786e\u4fdd\u53d8\u66f4\u6ee1\u8db3\u5b58\u50a8\u5e93\u7684\u8d21\u732e\u51c6\u5219\u548c\u5176\u4ed6\u8d28\u91cf\u6807\u51c6\u3002</p>"},{"location":"15.contribution/how-to-contribute/#_5","title":"\u6dfb\u52a0\u6d4b\u8bd5\u7528\u4f8b","text":"<p>\u6dfb\u52a0\u6d4b\u8bd5\u7528\u4f8b\u7684\u65b9\u6cd5\u53c2\u89c1 How to add test cases\u3002</p>"},{"location":"15.contribution/how-to-contribute/#_6","title":"\u6350\u8d60\u9879\u76ee","text":""},{"location":"15.contribution/how-to-contribute/#step_1","title":"Step 1\uff1a\u786e\u8ba4\u9879\u76ee\u6350\u8d60","text":"<p>\u901a\u8fc7\u90ae\u4ef6\u3001\u5fae\u4fe1\u3001Slack \u7b49\u65b9\u5f0f\u8054\u7edc NebulaGraph \u5b98\u65b9\u4eba\u5458\uff0c\u786e\u8ba4\u6350\u8d60\u9879\u76ee\u4e00\u4e8b\u3002\u9879\u76ee\u5c06\u88ab\u6350\u8d60\u81f3 NebulaGraph Contrib \u7ec4\u7ec7\u4e0b\u3002</p> <ul> <li>\u90ae\u4ef6\u5730\u5740\uff1ainfo@vesoft.com</li> </ul> <ul> <li>\u5fae\u4fe1\uff1aNebulaGraphbot</li> </ul> <ul> <li>Slack\uff1aJoin Slack</li> </ul>"},{"location":"15.contribution/how-to-contribute/#step_6","title":"Step 2\uff1a\u83b7\u53d6\u9879\u76ee\u63a5\u6536\u4eba\u4fe1\u606f","text":"<p>\u7531 NebulaGraph \u5b98\u65b9\u4eba\u5458\u7ed9\u51fa NebulaGraph Contrib \u7684\u9879\u76ee\u63a5\u6536\u8005 ID\u3002</p>"},{"location":"15.contribution/how-to-contribute/#step_7","title":"Step 3\uff1a\u6350\u8d60\u9879\u76ee","text":"<p>\u7531\u60a8\u5c06\u9879\u76ee\u8f6c\u79fb\u81f3\u672c\u6b21\u6350\u8d60\u7684\u9879\u76ee\u63a5\u53d7\u4eba\uff0c\u5e76\u7531\u9879\u76ee\u63a5\u6536\u8005\u5c06\u8be5\u9879\u76ee\u8f6c\u79fb\u81f3 NebulaGraph Contrib \u7ec4\u7ec7\u4e0b\u3002\u6350\u8d60\u540e\uff0c\u60a8\u5c06\u4ee5 Maintain \u89d2\u8272\u7ee7\u7eed\u4e3b\u5bfc\u793e\u533a\u9879\u76ee\u7684\u53d1\u5c55\u3002</p> <p>GitHub \u4e0a\u8f6c\u79fb\u4ed3\u5e93\u7684\u64cd\u4f5c\uff0c\u8bf7\u53c2\u89c1 Transferring a repository owned by your user account\u3002 </p>"},{"location":"2.quick-start/1.quick-start-overview/","title":"\u57fa\u4e8e Docker \u5feb\u901f\u90e8\u7f72","text":"<p>NebulaGraph  \u63d0\u4f9b\u4e86\u57fa\u4e8e Docker \u7684\u5feb\u901f\u90e8\u7f72\u65b9\u5f0f\uff0c\u53ef\u4ee5\u5728\u51e0\u5206\u949f\u5185\u5b8c\u6210\u90e8\u7f72\u3002</p> \u4f7f\u7528 Docker Desktop\u4f7f\u7528 Docker Compose <p>\u6309\u7167\u4ee5\u4e0b\u6b65\u9aa4\u53ef\u4ee5\u5feb\u901f\u5728 Docker Desktop \u4e2d\u90e8\u7f72 NebulaGraph \u3002</p> <ol> <li> <p>\u5b89\u88c5 Docker Desktop\u3002</p> <p>Caution</p> <p>\u5982\u679c\u5728 Windows \u7aef\u5b89\u88c5 Docker Desktop \u9700\u5b89\u88c5 WSL 2\u3002</p> </li> <li> <p>\u5728\u4eea\u8868\u76d8\u4e2d\u5355\u51fb<code>Extensions</code>\u6216<code>Add Extensions</code>\u6253\u5f00Extensions Marketplace \u641c\u7d22 NebulaGraph \uff0c\u4e5f\u53ef\u4ee5\u70b9\u51fb NebulaGraph  \u5728 Docker Desktop \u6253\u5f00\u3002</p> </li> <li>\u5bfc\u822a\u5230 NebulaGraph \u7684\u6269\u5c55\u5e02\u573a\u3002</li> <li> <p>\u70b9\u51fb<code>Install</code>\u4e0b\u8f7d NebulaGraph \u3002</p> <p></p> </li> <li> <p>\u5728\u6709\u66f4\u65b0\u7684\u65f6\u5019\uff0c\u53ef\u4ee5\u70b9\u51fb<code>Update</code>\u66f4\u65b0\u5230\u6700\u65b0\u7248\u672c\u3002</p> <p></p> </li> </ol> <p>\u89c6\u9891\u4ecb\u7ecd</p> <p> </p> <p>\u4f7f\u7528 Docker Compose \u53ef\u4ee5\u57fa\u4e8e\u51c6\u5907\u597d\u7684\u914d\u7f6e\u6587\u4ef6\u5feb\u901f\u90e8\u7f72 NebulaGraph \u670d\u52a1\uff0c\u4ec5\u5efa\u8bae\u5728\u6d4b\u8bd5 NebulaGraph \u529f\u80fd\u65f6\u4f7f\u7528\u8be5\u65b9\u5f0f\u3002</p>"},{"location":"2.quick-start/1.quick-start-overview/#_1","title":"\u524d\u63d0\u6761\u4ef6","text":"<ul> <li> <p>\u4e3b\u673a\u4e0a\u5b89\u88c5\u5982\u4e0b\u5e94\u7528\u7a0b\u5e8f\u3002</p> \u5e94\u7528\u7a0b\u5e8f \u63a8\u8350\u7248\u672c \u5b98\u65b9\u5b89\u88c5\u53c2\u8003 Docker \u6700\u65b0\u7248\u672c Install Docker Engine Docker Compose \u6700\u65b0\u7248\u672c Install Docker Compose Git \u6700\u65b0\u7248\u672c Download Git </li> </ul> <ul> <li>\u5982\u679c\u4f7f\u7528\u975e root \u7528\u6237\u90e8\u7f72 NebulaGraph\uff0c\u8bf7\u6388\u6743\u8be5\u7528\u6237 Docker \u76f8\u5173\u7684\u6743\u9650\u3002\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u89c1 Manage Docker as a non-root user\u3002</li> </ul> <ul> <li>\u542f\u52a8\u4e3b\u673a\u4e0a\u7684 Docker \u670d\u52a1\u3002</li> </ul> <ul> <li>\u5982\u679c\u5df2\u7ecf\u901a\u8fc7 Docker Compose \u5728\u4e3b\u673a\u4e0a\u90e8\u7f72\u4e86\u53e6\u4e00\u4e2a\u7248\u672c\u7684 NebulaGraph\uff0c\u4e3a\u907f\u514d\u517c\u5bb9\u6027\u95ee\u9898\uff0c\u9700\u8981\u5220\u9664\u76ee\u5f55<code>nebula-docker-compose/data</code>\u3002</li> </ul>"},{"location":"2.quick-start/1.quick-start-overview/#nebulagraph","title":"\u90e8\u7f72 NebulaGraph","text":"<ol> <li> <p>\u901a\u8fc7 Git \u514b\u9686<code>nebula-docker-compose</code>\u4ed3\u5e93\u7684<code>3.6.0</code>\u5206\u652f\u5230\u4e3b\u673a\u3002</p> <p>Danger</p> <p><code>master</code>\u5206\u652f\u5305\u542b\u6700\u65b0\u7684\u672a\u6d4b\u8bd5\u4ee3\u7801\u3002\u8bf7\u4e0d\u8981\u5728\u751f\u4ea7\u73af\u5883\u4f7f\u7528\u6b64\u7248\u672c\u3002</p> <pre><code>$ git clone -b release-3.6 https://github.com/vesoft-inc/nebula-docker-compose.git\n</code></pre> <p>Note</p> <p>Docker Compose \u7684<code>x.y</code>\u7248\u672c\u5bf9\u9f50\u5185\u6838\u7684<code>x.y</code>\u7248\u672c\uff0c\u5bf9\u4e8e\u5185\u6838<code>z</code>\u7248\u672c\uff0cDocker Compose \u4e0d\u4f1a\u53d1\u5e03\u5bf9\u5e94\u7684<code>z</code>\u7248\u672c\uff0c\u4f46\u662f\u4f1a\u62c9\u53d6<code>z</code>\u7248\u672c\u7684\u5185\u6838\u955c\u50cf\u3002</p> </li> <li> <p>\u5207\u6362\u81f3\u76ee\u5f55<code>nebula-docker-compose</code>\u3002</p> <pre><code>$ cd nebula-docker-compose/\n</code></pre> </li> <li> <p>\u6267\u884c\u5982\u4e0b\u547d\u4ee4\u542f\u52a8 NebulaGraph \u670d\u52a1\u3002</p> <p>Note</p> <ul> <li>\u5982\u679c\u957f\u671f\u672a\u5185\u6838\u66f4\u65b0\u955c\u50cf\uff0c\u8bf7\u5148\u66f4\u65b0 NebulaGraph \u955c\u50cf\u548c NebulaGraph Console \u955c\u50cf\u3002</li> <li>\u6267\u884c\u547d\u4ee4\u540e\u7684\u8fd4\u56de\u7ed3\u679c\u56e0\u5b89\u88c5\u76ee\u5f55\u4e0d\u540c\u800c\u4e0d\u540c\u3002</li> </ul> <pre><code>[nebula-docker-compose]$ docker-compose up -d\nCreating nebula-docker-compose_metad0_1 ... done\nCreating nebula-docker-compose_metad2_1 ... done\nCreating nebula-docker-compose_metad1_1 ... done\nCreating nebula-docker-compose_storaged0_1 ... done\nCreating nebula-docker-compose_storaged1_1 ... done\nCreating nebula-docker-compose_storaged2_1 ... done\n</code></pre> <p>Compatibility</p> <p>\u4ece 3.1 \u7248\u672c\u5f00\u59cb\uff0cDocker-compose \u4f1a\u81ea\u52a8\u542f\u52a8 NebulaGraph Console \u955c\u50cf\u7684\u5bb9\u5668\uff0c\u5e76\u5c06 Storage \u4e3b\u673a\u589e\u52a0\u81f3\u96c6\u7fa4\u4e2d\uff08\u5373<code>ADD HOSTS</code>\u547d\u4ee4\uff09\u3002</p> <p>Note</p> <p>\u4e0a\u8ff0\u670d\u52a1\u7684\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u89c1\u67b6\u6784\u603b\u89c8\u3002</p> </li> </ol>"},{"location":"2.quick-start/1.quick-start-overview/#nebulagraph_1","title":"\u8fde\u63a5 NebulaGraph","text":"<p>\u8fde\u63a5 NebulaGraph \u6709\u4e24\u79cd\u65b9\u5f0f\uff1a</p> <ul> <li>\u5728\u5bb9\u5668\u5916\u901a\u8fc7 Nebula Console \u8fde\u63a5\u3002\u56e0\u4e3a\u5bb9\u5668\u7684\u914d\u7f6e\u6587\u4ef6\u4e2d\u5c06 Graph \u670d\u52a1\u7684\u5916\u90e8\u6620\u5c04\u7aef\u53e3\u4e5f\u56fa\u5b9a\u4e3a 9669\uff0c\u56e0\u6b64\u53ef\u4ee5\u76f4\u63a5\u901a\u8fc7\u9ed8\u8ba4\u7aef\u53e3\u8fde\u63a5\u3002\u8be6\u60c5\u53c2\u89c1\u8fde\u63a5 NebulaGraph \u3002</li> </ul> <ul> <li>\u767b\u5f55\u5b89\u88c5\u4e86 NebulaGraph Console \u7684\u5bb9\u5668\uff0c\u7136\u540e\u518d\u8fde\u63a5 Graph \u670d\u52a1\u3002\u672c\u5c0f\u8282\u4ecb\u7ecd\u8fd9\u79cd\u65b9\u5f0f\u3002</li> </ul> <ol> <li> <p>\u4f7f\u7528<code>docker-compose ps</code>\u547d\u4ee4\u67e5\u770b NebulaGraph Console \u5bb9\u5668\u540d\u79f0\u3002</p> <pre><code>$ docker-compose ps\n          Name                         Command             State                 Ports\n----------------------------------------------------------------------------------------------\nnebula-docker-compose_console_1     sh -c sleep 3 &amp;&amp;          Up\n                                  nebula-co ...\n......\n</code></pre> </li> <li> <p>\u8fdb\u5165 NebulaGraph Console \u5bb9\u5668\u4e2d\u3002</p> <pre><code>$ docker exec -it nebula-docker-compose_console_1 /bin/sh\n/ #\n</code></pre> </li> <li> <p>\u901a\u8fc7 NebulaGraph Console \u8fde\u63a5 NebulaGraph \u3002</p> <pre><code>/ # ./usr/local/bin/nebula-console -u &lt;user_name&gt; -p &lt;password&gt; --address=graphd --port=9669\n</code></pre> <p>Note</p> <p>\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u8eab\u4efd\u8ba4\u8bc1\u529f\u80fd\u662f\u5173\u95ed\u7684\uff0c\u53ea\u80fd\u4f7f\u7528\u5df2\u5b58\u5728\u7684\u7528\u6237\u540d\uff08\u9ed8\u8ba4\u4e3a<code>root</code>\uff09\u548c\u4efb\u610f\u5bc6\u7801\u767b\u5f55\u3002\u5982\u679c\u60f3\u4f7f\u7528\u8eab\u4efd\u8ba4\u8bc1\uff0c\u8bf7\u53c2\u89c1\u8eab\u4efd\u8ba4\u8bc1\u3002</p> </li> <li> <p>\u67e5\u770b\u96c6\u7fa4\u72b6\u6001\u3002</p> <pre><code>nebula&gt; SHOW HOSTS;\n+-------------+------+----------+--------------+----------------------+------------------------+---------+\n| Host        | Port | Status   | Leader count | Leader distribution  | Partition distribution | Version |\n+-------------+------+----------+--------------+----------------------+------------------------+---------+\n| \"storaged0\" | 9779 | \"ONLINE\" | 0            | \"No valid partition\" | \"No valid partition\"   | \"master\" |\n| \"storaged1\" | 9779 | \"ONLINE\" | 0            | \"No valid partition\" | \"No valid partition\"   | \"master\" |\n| \"storaged2\" | 9779 | \"ONLINE\" | 0            | \"No valid partition\" | \"No valid partition\"   | \"master\" |\n+-------------+------+----------+--------------+----------------------+------------------------+---------+\n</code></pre> </li> </ol> <p>\u6267\u884c\u4e24\u6b21<code>exit</code>\u53ef\u4ee5\u9000\u51fa\u5bb9\u5668\u3002</p>"},{"location":"2.quick-start/1.quick-start-overview/#nebulagraph_2","title":"\u67e5\u770b NebulaGraph \u670d\u52a1\u7684\u72b6\u6001\u548c\u7aef\u53e3","text":"<p>\u6267\u884c\u547d\u4ee4<code>docker-compose ps</code>\u53ef\u4ee5\u5217\u51fa NebulaGraph \u670d\u52a1\u7684\u72b6\u6001\u548c\u7aef\u53e3\u3002</p> <p>Note</p> <p>NebulaGraph \u9ed8\u8ba4\u4f7f\u7528<code>9669</code>\u7aef\u53e3\u4e3a\u5ba2\u6237\u7aef\u63d0\u4f9b\u670d\u52a1\uff0c\u5982\u679c\u9700\u8981\u4fee\u6539\u7aef\u53e3\uff0c\u8bf7\u4fee\u6539\u76ee\u5f55<code>nebula-docker-compose</code>\u5185\u7684\u6587\u4ef6<code>docker-compose.yaml</code>\uff0c\u7136\u540e\u91cd\u542f NebulaGraph \u670d\u52a1\u3002</p> <pre><code>$ docker-compose ps\nnebula-docker-compose_console_1     sh -c sleep 3 &amp;&amp;                 Up\n                                  nebula-co ...\nnebula-docker-compose_graphd1_1     /usr/local/nebula/bin/nebu ...   Up      0.0.0.0:49174-&gt;19669/tcp,:::49174-&gt;19669/tcp, 0.0.0.0:49171-&gt;19670/tcp,:::49171-&gt;19670/tcp, 0.0.0.0:49177-&gt;9669/tcp,:::49177-&gt;9669/tcp\nnebula-docker-compose_graphd2_1     /usr/local/nebula/bin/nebu ...   Up      0.0.0.0:49175-&gt;19669/tcp,:::49175-&gt;19669/tcp, 0.0.0.0:49172-&gt;19670/tcp,:::49172-&gt;19670/tcp, 0.0.0.0:49178-&gt;9669/tcp,:::49178-&gt;9669/tcp\nnebula-docker-compose_graphd_1      /usr/local/nebula/bin/nebu ...   Up      0.0.0.0:49180-&gt;19669/tcp,:::49180-&gt;19669/tcp, 0.0.0.0:49179-&gt;19670/tcp,:::49179-&gt;19670/tcp, 0.0.0.0:9669-&gt;9669/tcp,:::9669-&gt;9669/tcp\nnebula-docker-compose_metad0_1      /usr/local/nebula/bin/nebu ...   Up      0.0.0.0:49157-&gt;19559/tcp,:::49157-&gt;19559/tcp, 0.0.0.0:49154-&gt;19560/tcp,:::49154-&gt;19560/tcp, 0.0.0.0:49160-&gt;9559/tcp,:::49160-&gt;9559/tcp, 9560/tcp\nnebula-docker-compose_metad1_1      /usr/local/nebula/bin/nebu ...   Up      0.0.0.0:49156-&gt;19559/tcp,:::49156-&gt;19559/tcp, 0.0.0.0:49153-&gt;19560/tcp,:::49153-&gt;19560/tcp, 0.0.0.0:49159-&gt;9559/tcp,:::49159-&gt;9559/tcp, 9560/tcp\nnebula-docker-compose_metad2_1      /usr/local/nebula/bin/nebu ...   Up      0.0.0.0:49158-&gt;19559/tcp,:::49158-&gt;19559/tcp, 0.0.0.0:49155-&gt;19560/tcp,:::49155-&gt;19560/tcp, 0.0.0.0:49161-&gt;9559/tcp,:::49161-&gt;9559/tcp, 9560/tcp\nnebula-docker-compose_storaged0_1   /usr/local/nebula/bin/nebu ...   Up      0.0.0.0:49166-&gt;19779/tcp,:::49166-&gt;19779/tcp, 0.0.0.0:49163-&gt;19780/tcp,:::49163-&gt;19780/tcp, 9777/tcp, 9778/tcp, 0.0.0.0:49169-&gt;9779/tcp,:::49169-&gt;9779/tcp, 9780/tcp\nnebula-docker-compose_storaged1_1   /usr/local/nebula/bin/nebu ...   Up      0.0.0.0:49165-&gt;19779/tcp,:::49165-&gt;19779/tcp, 0.0.0.0:49162-&gt;19780/tcp,:::49162-&gt;19780/tcp, 9777/tcp, 9778/tcp, 0.0.0.0:49168-&gt;9779/tcp,:::49168-&gt;9779/tcp, 9780/tcp\nnebula-docker-compose_storaged2_1   /usr/local/nebula/bin/nebu ...   Up      0.0.0.0:49167-&gt;19779/tcp,:::49167-&gt;19779/tcp, 0.0.0.0:49164-&gt;19780/tcp,:::49164-&gt;19780/tcp, 9777/tcp, 9778/tcp, 0.0.0.0:49170-&gt;9779/tcp,:::49170-&gt;9779/tcp, 9780/tcp\n</code></pre> <p>\u5982\u679c\u670d\u52a1\u6709\u5f02\u5e38\uff0c\u7528\u6237\u53ef\u4ee5\u5148\u786e\u8ba4\u5f02\u5e38\u7684\u5bb9\u5668\u540d\u79f0\uff08\u4f8b\u5982<code>nebula-docker-compose_graphd2_1</code>\uff09,</p> <p>\u7136\u540e\u6267\u884c<code>docker ps</code>\u67e5\u770b\u5bf9\u5e94\u7684<code>CONTAINER ID</code>\uff08\u793a\u4f8b\u4e3a<code>2a6c56c405f5</code>)\u3002</p> <pre><code>[nebula-docker-compose]$ docker ps\nCONTAINER ID   IMAGE                               COMMAND                  CREATED          STATUS                    PORTS                                                                                                  NAMES\n2a6c56c405f5   vesoft/nebula-graphd:nightly     \"/usr/local/nebula/b\u2026\"   36 minutes ago   Up 36 minutes (healthy)   0.0.0.0:49230-&gt;9669/tcp, 0.0.0.0:49229-&gt;19669/tcp, 0.0.0.0:49228-&gt;19670/tcp                            nebula-docker-compose_graphd2_1\n7042e0a8e83d   vesoft/nebula-storaged:nightly   \"./bin/nebula-storag\u2026\"   36 minutes ago   Up 36 minutes (healthy)   9777-9778/tcp, 9780/tcp, 0.0.0.0:49227-&gt;9779/tcp, 0.0.0.0:49226-&gt;19779/tcp, 0.0.0.0:49225-&gt;19780/tcp   nebula-docker-compose_storaged2_1\n18e3ea63ad65   vesoft/nebula-storaged:nightly   \"./bin/nebula-storag\u2026\"   36 minutes ago   Up 36 minutes (healthy)   9777-9778/tcp, 9780/tcp, 0.0.0.0:49219-&gt;9779/tcp, 0.0.0.0:49218-&gt;19779/tcp, 0.0.0.0:49217-&gt;19780/tcp   nebula-docker-compose_storaged0_1\n4dcabfe8677a   vesoft/nebula-graphd:nightly     \"/usr/local/nebula/b\u2026\"   36 minutes ago   Up 36 minutes (healthy)   0.0.0.0:49224-&gt;9669/tcp, 0.0.0.0:49223-&gt;19669/tcp, 0.0.0.0:49222-&gt;19670/tcp                            nebula-docker-compose_graphd1_1\na74054c6ae25   vesoft/nebula-graphd:nightly     \"/usr/local/nebula/b\u2026\"   36 minutes ago   Up 36 minutes (healthy)   0.0.0.0:9669-&gt;9669/tcp, 0.0.0.0:49221-&gt;19669/tcp, 0.0.0.0:49220-&gt;19670/tcp                             nebula-docker-compose_graphd_1\n880025a3858c   vesoft/nebula-storaged:nightly   \"./bin/nebula-storag\u2026\"   36 minutes ago   Up 36 minutes (healthy)   9777-9778/tcp, 9780/tcp, 0.0.0.0:49216-&gt;9779/tcp, 0.0.0.0:49215-&gt;19779/tcp, 0.0.0.0:49214-&gt;19780/tcp   nebula-docker-compose_storaged1_1\n45736a32a23a   vesoft/nebula-metad:nightly      \"./bin/nebula-metad \u2026\"   36 minutes ago   Up 36 minutes (healthy)   9560/tcp, 0.0.0.0:49213-&gt;9559/tcp, 0.0.0.0:49212-&gt;19559/tcp, 0.0.0.0:49211-&gt;19560/tcp                  nebula-docker-compose_metad0_1\n3b2c90eb073e   vesoft/nebula-metad:nightly      \"./bin/nebula-metad \u2026\"   36 minutes ago   Up 36 minutes (healthy)   9560/tcp, 0.0.0.0:49207-&gt;9559/tcp, 0.0.0.0:49206-&gt;19559/tcp, 0.0.0.0:49205-&gt;19560/tcp                  nebula-docker-compose_metad2_1\n7bb31b7a5b3f   vesoft/nebula-metad:nightly      \"./bin/nebula-metad \u2026\"   36 minutes ago   Up 36 minutes (healthy)   9560/tcp, 0.0.0.0:49210-&gt;9559/tcp, 0.0.0.0:49209-&gt;19559/tcp, 0.0.0.0:49208-&gt;19560/tcp                  nebula-docker-compose_metad1_1\n</code></pre> <p>\u6700\u540e\u767b\u5f55\u5bb9\u5668\u6392\u67e5\u95ee\u9898</p> <pre><code>[nebula-docker-compose]$ docker exec -it 2a6c56c405f5 bash\n[root@2a6c56c405f5 nebula]#\n</code></pre>"},{"location":"2.quick-start/1.quick-start-overview/#nebulagraph_3","title":"\u67e5\u770b NebulaGraph \u670d\u52a1\u7684\u6570\u636e\u548c\u65e5\u5fd7","text":"<p>NebulaGraph \u7684\u6240\u6709\u6570\u636e\u548c\u65e5\u5fd7\u90fd\u6301\u4e45\u5316\u5b58\u50a8\u5728<code>nebula-docker-compose/data</code>\u548c<code>nebula-docker-compose/logs</code>\u76ee\u5f55\u4e2d\u3002</p> <p>\u76ee\u5f55\u7684\u7ed3\u6784\u5982\u4e0b\uff1a</p> <pre><code>nebula-docker-compose/\n  |-- docker-compose.yaml\n  \u251c\u2500\u2500 data\n  \u2502\u00a0\u00a0 \u251c\u2500\u2500 meta0\n  \u2502\u00a0\u00a0 \u251c\u2500\u2500 meta1\n  \u2502\u00a0\u00a0 \u251c\u2500\u2500 meta2\n  \u2502\u00a0\u00a0 \u251c\u2500\u2500 storage0\n  \u2502\u00a0\u00a0 \u251c\u2500\u2500 storage1\n  \u2502\u00a0\u00a0 \u2514\u2500\u2500 storage2\n  \u2514\u2500\u2500 logs\n      \u251c\u2500\u2500 graph\n      \u251c\u2500\u2500 graph1\n      \u251c\u2500\u2500 graph2\n      \u251c\u2500\u2500 meta0\n      \u251c\u2500\u2500 meta1\n      \u251c\u2500\u2500 meta2\n      \u251c\u2500\u2500 storage0\n      \u251c\u2500\u2500 storage1\n      \u2514\u2500\u2500 storage2\n</code></pre>"},{"location":"2.quick-start/1.quick-start-overview/#nebulagraph_4","title":"\u505c\u6b62 NebulaGraph \u670d\u52a1","text":"<p>\u7528\u6237\u53ef\u4ee5\u6267\u884c\u5982\u4e0b\u547d\u4ee4\u505c\u6b62 NebulaGraph \u670d\u52a1\uff1a</p> <pre><code>$ docker-compose down\n</code></pre> <p>\u5982\u679c\u8fd4\u56de\u5982\u4e0b\u4fe1\u606f\uff0c\u8868\u793a\u5df2\u7ecf\u6210\u529f\u505c\u6b62\u670d\u52a1\u3002</p> <pre><code>Stopping nebula-docker-compose_console_1   ... done\nStopping nebula-docker-compose_graphd1_1   ... done\nStopping nebula-docker-compose_graphd_1    ... done\nStopping nebula-docker-compose_graphd2_1   ... done\nStopping nebula-docker-compose_storaged1_1 ... done\nStopping nebula-docker-compose_storaged0_1 ... done\nStopping nebula-docker-compose_storaged2_1 ... done\nStopping nebula-docker-compose_metad2_1    ... done\nStopping nebula-docker-compose_metad0_1    ... done\nStopping nebula-docker-compose_metad1_1    ... done\nRemoving nebula-docker-compose_console_1   ... done\nRemoving nebula-docker-compose_graphd1_1   ... done\nRemoving nebula-docker-compose_graphd_1    ... done\nRemoving nebula-docker-compose_graphd2_1   ... done\nRemoving nebula-docker-compose_storaged1_1 ... done\nRemoving nebula-docker-compose_storaged0_1 ... done\nRemoving nebula-docker-compose_storaged2_1 ... done\nRemoving nebula-docker-compose_metad2_1    ... done\nRemoving nebula-docker-compose_metad0_1    ... done\nRemoving nebula-docker-compose_metad1_1    ... done\nRemoving network nebula-docker-compose_nebula-net\n</code></pre> <p>Danger</p> <p>\u547d\u4ee4<code>docker-compose down -v</code>\u7684\u53c2\u6570<code>-v</code>\u5c06\u4f1a\u5220\u9664\u6240\u6709\u672c\u5730\u7684\u6570\u636e\u3002\u5982\u679c\u4f7f\u7528\u7684\u662f nightly \u7248\u672c\uff0c\u5e76\u4e14\u6709\u4e00\u4e9b\u517c\u5bb9\u6027\u95ee\u9898\uff0c\u8bf7\u5c1d\u8bd5\u8fd9\u4e2a\u547d\u4ee4\u3002</p>"},{"location":"2.quick-start/1.quick-start-overview/#_2","title":"\u4fee\u6539\u914d\u7f6e","text":"<p>Docker Compose \u90e8\u7f72\u7684 NebulaGraph\uff0c\u914d\u7f6e\u6587\u4ef6\u4f4d\u7f6e\u4e3a<code>nebula-docker-compose/docker-compose.yaml</code>\uff0c\u4fee\u6539\u8be5\u6587\u4ef6\u5185\u7684\u914d\u7f6e\u5e76\u91cd\u542f\u670d\u52a1\u5373\u53ef\u4f7f\u65b0\u914d\u7f6e\u751f\u6548\u3002</p> <p>\u5177\u4f53\u7684\u914d\u7f6e\u8bf4\u660e\u8bf7\u53c2\u89c1\u914d\u7f6e\u7ba1\u7406\u3002</p>"},{"location":"2.quick-start/1.quick-start-overview/#_3","title":"\u5e38\u89c1\u95ee\u9898","text":""},{"location":"2.quick-start/1.quick-start-overview/#docker_1","title":"\u5982\u4f55\u56fa\u5b9a Docker \u6620\u5c04\u5230\u5916\u90e8\u7684\u7aef\u53e3\uff1f","text":"<p>\u5728\u76ee\u5f55<code>nebula-docker-compose</code>\u5185\u4fee\u6539\u6587\u4ef6<code>docker-compose.yaml</code>\uff0c\u5c06\u5bf9\u5e94\u670d\u52a1\u7684<code>ports</code>\u8bbe\u7f6e\u4e3a\u56fa\u5b9a\u6620\u5c04\uff0c\u4f8b\u5982\uff1a</p> <pre><code>graphd:\n    image: vesoft/nebula-graphd:release-3.6\n    ...\n    ports:\n      - 9669:9669\n      - 19669\n      - 19670\n</code></pre> <p><code>9669:9669</code>\u8868\u793a\u5185\u90e8\u7684 9669 \u6620\u5c04\u5230\u5916\u90e8\u7684\u7aef\u53e3\u4e5f\u662f 9669\uff0c\u4e0b\u65b9\u7684<code>19669</code>\u8868\u793a\u5185\u90e8\u7684 19669 \u6620\u5c04\u5230\u5916\u90e8\u7684\u7aef\u53e3\u662f\u968f\u673a\u7684\u3002</p>"},{"location":"2.quick-start/1.quick-start-overview/#nebulagraph_docker","title":"\u5982\u4f55\u5347\u7ea7/\u66f4\u65b0 NebulaGraph \u670d\u52a1\u7684 Docker \u955c\u50cf\uff1f","text":"<ol> <li> <p>\u5728\u6587\u4ef6<code>nebula-docker-compose/docker-compose.yaml</code>\u4e2d\uff0c\u627e\u5230\u6240\u6709\u670d\u52a1\u7684<code>image</code>\u5e76\u4fee\u6539\u5176\u503c\u4e3a\u76f8\u5e94\u7684\u955c\u50cf\u7248\u672c\u3002</p> </li> <li> <p>\u5728\u76ee\u5f55<code>nebula-docker-compose</code>\u5185\u6267\u884c\u547d\u4ee4<code>docker-compose pull</code>\uff0c\u66f4\u65b0 Graph \u670d\u52a1\u3001Storage \u670d\u52a1\u3001Meta \u670d\u52a1\u548c NebulaGraph Console \u7684\u955c\u50cf\u3002</p> </li> <li> <p>\u6267\u884c\u547d\u4ee4<code>docker-compose up -d</code>\u542f\u52a8 NebulaGraph \u670d\u52a1\u3002</p> </li> <li> <p>\u901a\u8fc7 NebulaGraph Console \u8fde\u63a5 NebulaGraph \u540e\uff0c\u5206\u522b\u6267\u884c\u547d\u4ee4<code>SHOW HOSTS GRAPH</code>\u3001<code>SHOW HOSTS STORAGE</code>\u3001<code>SHOW HOSTS META</code>\u67e5\u770b\u5404\u670d\u52a1\u7248\u672c\u3002</p> </li> </ol>"},{"location":"2.quick-start/1.quick-start-overview/#docker-compose_pullerror_toomanyrequests","title":"\u6267\u884c\u547d\u4ee4<code>docker-compose pull</code>\u62a5\u9519<code>ERROR: toomanyrequests</code>","text":"<p>\u53ef\u80fd\u9047\u5230\u5982\u4e0b\u9519\u8bef\uff1a</p> <p><code>ERROR: toomanyrequests: You have reached your pull rate limit. You may increase the limit by authenticating and upgrading: https://www.docker.com/increase-rate-limit</code></p> <p>\u4ee5\u4e0a\u9519\u8bef\u8868\u793a\u5df2\u8fbe\u5230 Docker Hub \u7684\u901f\u7387\u9650\u5236\u3002\u89e3\u51b3\u65b9\u6848\u8bf7\u53c2\u89c1 Understanding Docker Hub Rate Limiting\u3002</p>"},{"location":"2.quick-start/1.quick-start-overview/#nebulagraph_console","title":"\u5982\u4f55\u66f4\u65b0 NebulaGraph Console\uff1f","text":"<p><code>docker-compose pull</code>\u4f1a\u540c\u65f6\u66f4\u65b0 NebulaGraph \u670d\u52a1\u548c NebulaGraph Console\u3002</p>"},{"location":"2.quick-start/2.start-free-trial-on-cloud/","title":"\u4ece\u4e91\u5f00\u59cb\uff08\u514d\u8d39\u8bd5\u7528\uff09","text":"<p>\u7528\u6237\u53ef\u4ee5\u5728\u963f\u91cc\u4e91\u4e91\u5e02\u573a\u4e0a\u514d\u8d39\u8bd5\u7528 NebulaGraph \u3002\u65e0\u9700\u4e0b\u8f7d\u548c\u5b89\u88c5\u4efb\u4f55\u8f6f\u4ef6\uff0c\u53ea\u9700\u7b80\u5355\u7684\u70b9\u51fb\u64cd\u4f5c\uff0c\u5373\u53ef\u5728\u4e91\u7aef\u4f53\u9a8c\u5230 NebulaGraph \u7684\u5f3a\u5927\u529f\u80fd\u3002\u7acb\u5373\u5355\u51fb\u514d\u8d39\u8bd5\u7528\uff0c\u63a2\u7d22 NebulaGraph \u7684\u9b45\u529b\u3002</p>"},{"location":"2.quick-start/6.cheatsheet-for-ngql-command/","title":"nGQL \u547d\u4ee4\u6c47\u603b","text":""},{"location":"2.quick-start/6.cheatsheet-for-ngql-command/#_1","title":"\u51fd\u6570","text":"<ul> <li> <p>\u6570\u5b66\u51fd\u6570</p> \u51fd\u6570 \u8bf4\u660e double abs(double x) \u8fd4\u56de x \u7684\u7edd\u5bf9\u503c\u3002 double floor(double x) \u8fd4\u56de\u5c0f\u4e8e\u6216\u7b49\u4e8e x \u7684\u6700\u5927\u6574\u6570\u3002 double ceil(double x) \u8fd4\u56de\u5927\u4e8e\u6216\u7b49\u4e8e x \u7684\u6700\u5c0f\u6574\u6570\u3002 double round(double x) \u8fd4\u56de\u79bb x \u6700\u8fd1\u7684\u6574\u6570\u503c\uff0c\u5982\u679c x \u6070\u597d\u5728\u4e2d\u95f4\uff0c\u5219\u8fd4\u56de\u79bb 0 \u8f83\u8fdc\u7684\u6574\u6570\u3002 double sqrt(double x) \u8fd4\u56de x \u7684\u5e73\u65b9\u6839\u3002 double cbrt(double x) \u8fd4\u56de x \u7684\u7acb\u65b9\u6839\u3002 double hypot(double x, double y) \u8fd4\u56de\u76f4\u89d2\u4e09\u89d2\u5f62\uff08\u76f4\u89d2\u8fb9\u957f\u4e3a x \u548c y\uff09\u7684\u659c\u8fb9\u957f\u3002 double pow(double x, double y) \u8fd4\u56de x<sup>y</sup> \u7684\u503c\u3002 double exp(double x) \u8fd4\u56de e<sup>x</sup> \u7684\u503c\u3002 double exp2(double x) \u8fd4\u56de 2<sup>x</sup> \u7684\u503c\u3002 double log(double x) \u8fd4\u56de\u4ee5\u81ea\u7136\u6570 e \u4e3a\u5e95 x \u7684\u5bf9\u6570\u3002 double log2(double x) \u8fd4\u56de\u4ee5 2 \u4e3a\u5e95 x \u7684\u5bf9\u6570\u3002 double log10(double x) \u8fd4\u56de\u4ee5 10 \u4e3a\u5e95 x \u7684\u5bf9\u6570\u3002 double sin(double x) \u8fd4\u56de x \u7684\u6b63\u5f26\u503c\u3002 double asin(double x) \u8fd4\u56de x \u7684\u53cd\u6b63\u5f26\u503c\u3002 double cos(double x) \u8fd4\u56de x \u7684\u4f59\u5f26\u503c\u3002 double acos(double x) \u8fd4\u56de x \u7684\u53cd\u4f59\u5f26\u503c\u3002 double tan(double x) \u8fd4\u56de x \u7684\u6b63\u5207\u503c\u3002 double atan(double x) \u8fd4\u56de x \u7684\u53cd\u6b63\u5207\u503c\u3002 double rand() \u8fd4\u56de [0,1) \u5185\u7684\u968f\u673a\u6d6e\u70b9\u6570\u3002 int rand32(int min, int max) \u8fd4\u56de<code>[min, max)</code>\u5185\u7684\u4e00\u4e2a\u968f\u673a 32 \u4f4d\u6574\u6570\u3002 \u7528\u6237\u53ef\u4ee5\u53ea\u4f20\u5165\u4e00\u4e2a\u53c2\u6570\uff0c\u8be5\u53c2\u6570\u4f1a\u5224\u5b9a\u4e3a<code>max</code>\uff0c\u6b64\u65f6<code>min</code>\u9ed8\u8ba4\u4e3a<code>0</code>\u3002 \u5982\u679c\u4e0d\u4f20\u5165\u53c2\u6570\uff0c\u6b64\u65f6\u4f1a\u4ece\u5e26\u7b26\u53f7\u7684 32 \u4f4d int \u8303\u56f4\u5185\u968f\u673a\u8fd4\u56de\u3002 int rand64(int min, int max) \u8fd4\u56de<code>[min, max)</code>\u5185\u7684\u4e00\u4e2a\u968f\u673a 64 \u4f4d\u6574\u6570\u3002 \u7528\u6237\u53ef\u4ee5\u53ea\u4f20\u5165\u4e00\u4e2a\u53c2\u6570\uff0c\u8be5\u53c2\u6570\u4f1a\u5224\u5b9a\u4e3a<code>max</code>\uff0c\u6b64\u65f6<code>min</code>\u9ed8\u8ba4\u4e3a<code>0</code>\u3002 \u5982\u679c\u4e0d\u4f20\u5165\u53c2\u6570\uff0c\u6b64\u65f6\u4f1a\u4ece\u5e26\u7b26\u53f7\u7684 64 \u4f4d int \u8303\u56f4\u5185\u968f\u673a\u8fd4\u56de\u3002 bit_and() \u9010\u4f4d\u505a AND \u64cd\u4f5c\u3002 bit_or() \u9010\u4f4d\u505a OR \u64cd\u4f5c\u3002 bit_xor() \u9010\u4f4d\u505a XOR \u64cd\u4f5c\u3002 int size() \u8fd4\u56de\u5217\u8868\u6216\u6620\u5c04\u4e2d\u5143\u7d20\u7684\u6570\u91cf\uff0c\u6216\u5b57\u7b26\u4e32\u7684\u957f\u5ea6\u3002 int range(int start, int end, int step) \u8fd4\u56de<code>[start,end]</code>\u4e2d\u6307\u5b9a\u6b65\u957f\u7684\u503c\u7ec4\u6210\u7684\u5217\u8868\u3002\u6b65\u957f<code>step</code>\u9ed8\u8ba4\u4e3a 1\u3002 int sign(double x) \u8fd4\u56de x \u7684\u6b63\u8d1f\u53f7\u3002 \u5982\u679c x \u4e3a<code>0</code>\uff0c\u5219\u8fd4\u56de<code>0</code>\u3002 \u5982\u679c x \u4e3a\u8d1f\u6570\uff0c\u5219\u8fd4\u56de<code>-1</code>\u3002 \u5982\u679c x \u4e3a\u6b63\u6570\uff0c\u5219\u8fd4\u56de<code>1</code>\u3002 double e() \u8fd4\u56de\u81ea\u7136\u5bf9\u6570\u7684\u5e95 e\uff082.718281828459045\uff09\u3002 double pi() \u8fd4\u56de\u6570\u5b66\u5e38\u6570\u03c0\uff083.141592653589793\uff09\u3002 double radians() \u5c06\u89d2\u5ea6\u8f6c\u6362\u4e3a\u5f27\u5ea6\u3002<code>radians(180)</code>\u8fd4\u56de<code>3.141592653589793</code>\u3002 </li> </ul> <ul> <li> <p>\u805a\u5408\u51fd\u6570</p> \u51fd\u6570 \u8bf4\u660e avg() \u8fd4\u56de\u53c2\u6570\u7684\u5e73\u5747\u503c\u3002 count() \u8bed\u6cd5\uff1a<code>count({expr | *})</code> \u3002<code>count()</code>\u8fd4\u56de\u603b\u884c\u6570\uff08\u5305\u62ec NULL\uff09\u3002 <code>count(expr)</code>\u8fd4\u56de\u6ee1\u8db3\u8868\u8fbe\u5f0f\u7684\u975e\u7a7a\u503c\u7684\u603b\u6570\u3002 <code>count()</code>\u548c<code>size()</code>\u662f\u4e0d\u540c\u7684\u3002 max() \u8fd4\u56de\u53c2\u6570\u7684\u6700\u5927\u503c\u3002 min() \u8fd4\u56de\u53c2\u6570\u7684\u6700\u5c0f\u503c\u3002 collect() <code>collect()</code>\u51fd\u6570\u8fd4\u56de\u4e00\u4e2a\u7b26\u5408\u8868\u8fbe\u5f0f\u8fd4\u56de\u7ed3\u679c\u7684\u5217\u8868\u3002\u8be5\u51fd\u6570\u53ef\u4ee5\u5c06\u591a\u6761\u8bb0\u5f55\u6216\u503c\u5408\u5e76\u8fdb\u4e00\u4e2a\u5217\u8868\uff0c\u5b9e\u73b0\u6570\u636e\u805a\u5408\u3002 std() \u8fd4\u56de\u53c2\u6570\u7684\u603b\u4f53\u6807\u51c6\u5dee\u3002 sum() \u8fd4\u56de\u53c2\u6570\u7684\u548c\u3002 </li> </ul> <ul> <li> <p>\u5b57\u7b26\u4e32\u51fd\u6570</p> \u51fd\u6570 \u8bf4\u660e int strcasecmp(string a, string b) \u6bd4\u8f83\u4e24\u4e2a\u5b57\u7b26\u4e32\uff08\u4e0d\u533a\u5206\u5927\u5c0f\u5199\uff09\u3002\u5f53 a=b \u65f6\uff0c\u8fd4\u56de 0\uff0c\u5f53 a&gt;b \u662f\uff0c\u8fd4\u56de\u5927\u4e8e 0 \u7684\u6570\uff0c\u5f53 a&lt;b \u65f6\uff0c\u8fd4\u56de\u5c0f\u4e8e 0 \u7684\u6570\u3002 string lower(string a) \u8fd4\u56de\u5c0f\u5199\u5f62\u5f0f\u7684\u5b57\u7b26\u4e32\u3002 string toLower(string a) \u548c<code>lower()</code>\u76f8\u540c\u3002 string upper(string a) \u8fd4\u56de\u5927\u5199\u5f62\u5f0f\u7684\u5b57\u7b26\u4e32\u3002 string toUpper(string a) \u548c<code>upper()</code>\u76f8\u540c\u3002 int length(a) \u8fd4\u56de\u7ed9\u5b9a\u5b57\u7b26\u4e32\u7684\u957f\u5ea6\u6216\u8def\u5f84\u7684\u957f\u5ea6\uff0c\u5355\u4f4d\u5206\u522b\u662f\u5b57\u8282\u548c\u8df3\u6570\u3002 string trim(string a) \u5220\u9664\u5b57\u7b26\u4e32\u5934\u90e8\u548c\u5c3e\u90e8\u7684\u7a7a\u683c\u3002 string ltrim(string a) \u5220\u9664\u5b57\u7b26\u4e32\u5934\u90e8\u7684\u7a7a\u683c\u3002 string rtrim(string a) \u5220\u9664\u5b57\u7b26\u4e32\u5c3e\u90e8\u7684\u7a7a\u683c\u3002 string left(string a, int count) \u8fd4\u56de\u5b57\u7b26\u4e32\u5de6\u4fa7<code>count</code>\u4e2a\u5b57\u7b26\u7ec4\u6210\u7684\u5b50\u5b57\u7b26\u4e32\u3002\u5982\u679c<code>count</code>\u8d85\u8fc7\u5b57\u7b26\u4e32 a \u7684\u957f\u5ea6\uff0c\u5219\u8fd4\u56de\u5b57\u7b26\u4e32 a\u3002 string right(string a, int count) \u8fd4\u56de\u5b57\u7b26\u4e32\u53f3\u4fa7<code>count</code>\u4e2a\u5b57\u7b26\u7ec4\u6210\u7684\u5b50\u5b57\u7b26\u4e32\u3002\u5982\u679c<code>count</code>\u8d85\u8fc7\u5b57\u7b26\u4e32 a \u7684\u957f\u5ea6\uff0c\u5219\u8fd4\u56de\u5b57\u7b26\u4e32 a\u3002 string lpad(string a, int size, string letters) \u5728\u5b57\u7b26\u4e32 a \u7684\u5de6\u4fa7\u586b\u5145<code>letters</code>\u5b57\u7b26\u4e32\uff0c\u5e76\u8fd4\u56de<code>size</code>\u957f\u5ea6\u7684\u5b57\u7b26\u4e32\u3002 string rpad(string a, int size, string letters) \u5728\u5b57\u7b26\u4e32 a \u7684\u53f3\u4fa7\u586b\u5145<code>letters</code>\u5b57\u7b26\u4e32\uff0c\u5e76\u8fd4\u56de<code>size</code>\u957f\u5ea6\u7684\u5b57\u7b26\u4e32\u3002 string substr(string a, int pos, int count) \u4ece\u5b57\u7b26\u4e32 a \u7684\u6307\u5b9a\u4f4d\u7f6e<code>pos</code>\u5f00\u59cb\uff08\u4e0d\u5305\u62ec<code>pos</code>\u4f4d\u7f6e\u7684\u5b57\u7b26\uff09\uff0c\u63d0\u53d6\u53f3\u4fa7\u7684<code>count</code>\u4e2a\u5b57\u7b26\uff0c\u7ec4\u6210\u65b0\u7684\u5b57\u7b26\u4e32\u5e76\u8fd4\u56de\u3002 string substring(string a, int pos, int count) \u548c<code>substr()</code>\u76f8\u540c\u3002 string reverse(string) \u9006\u5e8f\u8fd4\u56de\u5b57\u7b26\u4e32\u3002 string replace(string a, string b, string c) \u5c06\u5b57\u7b26\u4e32 a \u4e2d\u7684\u5b50\u5b57\u7b26\u4e32 b \u66ff\u6362\u4e3a\u5b57\u7b26\u4e32 c\u3002 list split(string a, string b) \u5728\u5b50\u5b57\u7b26\u4e32 b \u5904\u62c6\u5206\u5b57\u7b26\u4e32 a\uff0c\u8fd4\u56de\u4e00\u4e2a\u5b57\u7b26\u4e32\u5217\u8868\u3002 concat() <code>concat()</code>\u51fd\u6570\u81f3\u5c11\u9700\u8981\u4e24\u4e2a\u6216\u4ee5\u4e0a\u5b57\u7b26\u4e32\u53c2\u6570\uff0c\u5e76\u5c06\u6240\u6709\u53c2\u6570\u8fde\u63a5\u6210\u4e00\u4e2a\u5b57\u7b26\u4e32\u3002\u8bed\u6cd5\uff1a<code>concat(string1,string2,...)</code> concat_ws() <code>concat_ws()</code>\u51fd\u6570\u5c06\u4e24\u4e2a\u6216\u4ee5\u4e0a\u5b57\u7b26\u4e32\u53c2\u6570\u4e0e\u9884\u5b9a\u4e49\u7684\u5206\u9694\u7b26\uff08separator\uff09\u76f8\u8fde\u63a5\u3002 extract() <code>extract()</code> \u4ece\u6307\u5b9a\u5b57\u7b26\u4e32\u4e2d\u63d0\u53d6\u7b26\u5408\u6b63\u5219\u8868\u8fbe\u5f0f\u7684\u5b50\u5b57\u7b26\u4e32\u3002 json_extract() <code>json_extract()</code> \u5c06\u6307\u5b9a JSON \u5b57\u7b26\u4e32\u8f6c\u6362\u4e3a map \u7c7b\u578b\u3002 </li> </ul> <ul> <li> <p>\u65e5\u671f\u65f6\u95f4\u51fd\u6570</p> \u51fd\u6570 \u8bf4\u660e int now() \u6839\u636e\u5f53\u524d\u7cfb\u7edf\u8fd4\u56de\u5f53\u524d\u65f6\u95f4\u6233\u3002 timestamp timestamp() \u6839\u636e\u5f53\u524d\u7cfb\u7edf\u8fd4\u56de\u5f53\u524d\u65f6\u95f4\u6233\u3002 date date() \u6839\u636e\u5f53\u524d\u7cfb\u7edf\u8fd4\u56de\u5f53\u524d\u65e5\u671f\uff08UTC \u65f6\u95f4\uff09\u3002 time time() \u6839\u636e\u5f53\u524d\u7cfb\u7edf\u8fd4\u56de\u5f53\u524d\u65f6\u95f4\uff08UTC \u65f6\u95f4\uff09\u3002 datetime datetime() \u6839\u636e\u5f53\u524d\u7cfb\u7edf\u8fd4\u56de\u5f53\u524d\u65e5\u671f\u548c\u65f6\u95f4\uff08UTC \u65f6\u95f4\uff09\u3002 </li> </ul> <ul> <li> <p>Schema \u76f8\u5173\u51fd\u6570</p> <ul> <li> <p>\u539f\u751f nGQL \u8bed\u53e5\u9002\u7528</p> \u51fd\u6570 \u8bf4\u660e id(vertex) \u8fd4\u56de\u70b9 ID\u3002\u6570\u636e\u7c7b\u578b\u548c\u70b9 ID \u7684\u7c7b\u578b\u4fdd\u6301\u4e00\u81f4\u3002 map properties(vertex) \u8fd4\u56de\u70b9\u7684\u6240\u6709\u5c5e\u6027\u3002 map properties(edge) \u8fd4\u56de\u8fb9\u7684\u6240\u6709\u5c5e\u6027\u3002 string type(edge) \u8fd4\u56de\u8fb9\u7684 Edge type\u3002 src(edge) \u8fd4\u56de\u8fb9\u7684\u8d77\u59cb\u70b9 ID\u3002\u6570\u636e\u7c7b\u578b\u548c\u70b9 ID \u7684\u7c7b\u578b\u4fdd\u6301\u4e00\u81f4\u3002 dst(edge) \u8fd4\u56de\u8fb9\u7684\u76ee\u7684\u70b9 ID\u3002\u6570\u636e\u7c7b\u578b\u548c\u70b9 ID \u7684\u7c7b\u578b\u4fdd\u6301\u4e00\u81f4\u3002 int rank(edge) \u8fd4\u56de\u8fb9\u7684 rank\u3002 vertex \u8fd4\u56de\u70b9\u7684\u4fe1\u606f\u3002\u5305\u62ec\u70b9 ID\u3001Tag\u3001\u5c5e\u6027\u548c\u503c\u3002 edge \u8fd4\u56de\u8fb9\u7684\u4fe1\u606f\u3002\u5305\u62ec Edge type\u3001\u8d77\u59cb\u70b9 ID\u3001\u76ee\u7684\u70b9 ID\u3001rank\u3001\u5c5e\u6027\u548c\u503c\u3002 vertices \u8fd4\u56de\u5b50\u56fe\u4e2d\u7684\u70b9\u7684\u4fe1\u606f\u3002\u8be6\u60c5\u53c2\u89c1 GET SUBGRAPH\u3002 edges \u8fd4\u56de\u5b50\u56fe\u4e2d\u7684\u8fb9\u7684\u4fe1\u606f\u3002\u8be6\u60c5\u53c2\u89c1 GET SUBGRAPH\u3002 path \u8fd4\u56de\u8def\u5f84\u4fe1\u606f\u3002\u8be6\u60c5\u53c2\u89c1 FIND PATH\u3002 </li> </ul> <ul> <li> <p>openCypher \u517c\u5bb9\u8bed\u53e5\u9002\u7528</p> \u51fd\u6570 \u8bf4\u660e id(&lt;vertex&gt;) \u8fd4\u56de\u70b9 ID\u3002\u6570\u636e\u7c7b\u578b\u548c\u70b9 ID \u7684\u7c7b\u578b\u4fdd\u6301\u4e00\u81f4\u3002 list tags(&lt;vertex&gt;) \u8fd4\u56de\u70b9\u7684 Tag\uff0c\u4e0e labels() \u4f5c\u7528\u76f8\u540c\u3002 list labels(&lt;vertex&gt;) \u8fd4\u56de\u70b9\u7684 Tag\uff0c\u4e0e tags() \u4f5c\u7528\u76f8\u540c\uff0c\u7528\u4e8e\u517c\u5bb9 openCypher \u8bed\u6cd5\u3002 map properties(&lt;vertex_or_edge&gt;) \u8fd4\u56de\u70b9\u6216\u8fb9\u7684\u6240\u6709\u5c5e\u6027\u3002 string type(&lt;edge&gt;) \u8fd4\u56de\u8fb9\u7684 Edge type\u3002 src(&lt;edge&gt;) \u8fd4\u56de\u8fb9\u7684\u8d77\u59cb\u70b9 ID\u3002\u6570\u636e\u7c7b\u578b\u548c\u70b9 ID \u7684\u7c7b\u578b\u4fdd\u6301\u4e00\u81f4\u3002 dst(&lt;edge&gt;) \u8fd4\u56de\u8fb9\u7684\u76ee\u7684\u70b9 ID\u3002\u6570\u636e\u7c7b\u578b\u548c\u70b9 ID \u7684\u7c7b\u578b\u4fdd\u6301\u4e00\u81f4\u3002 vertex startNode(&lt;path&gt;) \u83b7\u53d6\u4e00\u6761\u8fb9\u6216\u4e00\u6761\u8def\u5f84\u5e76\u8fd4\u56de\u5b83\u7684\u8d77\u59cb\u70b9 ID\u3002 string endNode(&lt;path&gt;) \u83b7\u53d6\u4e00\u6761\u8fb9\u6216\u4e00\u6761\u8def\u5f84\u5e76\u8fd4\u56de\u5b83\u7684\u76ee\u7684\u70b9 ID\u3002 int rank(&lt;edge&gt;) \u8fd4\u56de\u8fb9\u7684 rank\u3002 </li> </ul> </li> </ul> <ul> <li> <p>\u5217\u8868\u51fd\u6570</p> \u51fd\u6570 \u8bf4\u660e keys(expr) \u8fd4\u56de\u4e00\u4e2a\u5217\u8868\uff0c\u5305\u542b\u5b57\u7b26\u4e32\u5f62\u5f0f\u7684\u70b9\u3001\u8fb9\u6216\u6620\u5c04\u7684\u6240\u6709\u5c5e\u6027\u3002 labels(vertex) \u8fd4\u56de\u70b9\u7684 Tag \u5217\u8868\u3002 nodes(path) \u8fd4\u56de\u8def\u5f84\u4e2d\u6240\u6709\u70b9\u7684\u5217\u8868\u3002 range(start, end [, step]) \u8fd4\u56de<code>[start,end]</code>\u8303\u56f4\u5185\u56fa\u5b9a\u6b65\u957f\u7684\u5217\u8868\uff0c\u9ed8\u8ba4\u6b65\u957f<code>step</code>\u4e3a 1\u3002 relationships(path) \u8fd4\u56de\u8def\u5f84\u4e2d\u6240\u6709\u5173\u7cfb\u7684\u5217\u8868\u3002 reverse(list) \u8fd4\u56de\u5c06\u539f\u5217\u8868\u9006\u5e8f\u6392\u5217\u7684\u65b0\u5217\u8868\u3002 tail(list) \u8fd4\u56de\u4e0d\u5305\u542b\u539f\u5217\u8868\u7b2c\u4e00\u4e2a\u5143\u7d20\u7684\u65b0\u5217\u8868\u3002 head(list) \u8fd4\u56de\u5217\u8868\u7684\u7b2c\u4e00\u4e2a\u5143\u7d20\u3002 last(list) \u8fd4\u56de\u5217\u8868\u7684\u6700\u540e\u4e00\u4e2a\u5143\u7d20\u3002 reduce() \u5c06\u8868\u8fbe\u5f0f\u9010\u4e2a\u5e94\u7528\u4e8e\u5217\u8868\u4e2d\u7684\u5143\u7d20\uff0c\u7136\u540e\u548c\u7d2f\u52a0\u5668\u4e2d\u7684\u5f53\u524d\u7ed3\u679c\u7d2f\u52a0\uff0c\u6700\u540e\u8fd4\u56de\u5b8c\u6574\u7ed3\u679c\u3002 </li> </ul> <ul> <li> <p>\u7c7b\u578b\u8f6c\u6362\u51fd\u6570</p> \u51fd\u6570 \u8bf4\u660e bool toBoolean() \u5c06\u5b57\u7b26\u4e32\u8f6c\u6362\u4e3a\u5e03\u5c14\u3002 float toFloat() \u5c06\u6574\u6570\u6216\u5b57\u7b26\u4e32\u8f6c\u6362\u4e3a\u6d6e\u70b9\u6570\u3002 string toString() \u5c06\u4efb\u610f\u6570\u636e\u7c7b\u578b\u8f6c\u6362\u4e3a\u5b57\u7b26\u4e32\u7c7b\u578b\u3002 int toInteger() \u5c06\u6d6e\u70b9\u6216\u5b57\u7b26\u4e32\u8f6c\u6362\u4e3a\u6574\u6570\u3002 set toSet() \u5c06\u5217\u8868\u6216\u96c6\u5408\u8f6c\u6362\u4e3a\u96c6\u5408\u3002 int hash() <code>hash()</code>\u51fd\u6570\u8fd4\u56de\u53c2\u6570\u7684\u54c8\u5e0c\u503c\u3002\u5176\u53c2\u6570\u53ef\u4ee5\u662f\u6570\u5b57\u3001\u5b57\u7b26\u4e32\u3001\u5217\u8868\u3001\u5e03\u5c14\u503c\u3001NULL \u7b49\u7c7b\u578b\u7684\u503c\uff0c\u6216\u8005\u8ba1\u7b97\u7ed3\u679c\u4e3a\u8fd9\u4e9b\u7c7b\u578b\u7684\u8868\u8fbe\u5f0f\u3002 </li> </ul> <ul> <li> <p>\u8c13\u8bcd\u51fd\u6570</p> <p>\u8c13\u8bcd\u51fd\u6570\u53ea\u8fd4\u56de<code>true</code>\u6216<code>false</code>\uff0c\u901a\u5e38\u7528\u4e8e<code>WHERE</code>\u5b50\u53e5\u4e2d\u3002</p> <pre><code>&lt;predicate&gt;(&lt;variable&gt; IN &lt;list&gt; WHERE &lt;condition&gt;)\n</code></pre> \u51fd\u6570 \u8bf4\u660e exists() \u5982\u679c\u6307\u5b9a\u7684\u5c5e\u6027\u5728\u70b9\u3001\u8fb9\u6216\u6620\u5c04\u4e2d\u5b58\u5728\uff0c\u5219\u8fd4\u56de<code>true</code>\uff0c\u5426\u5219\u8fd4\u56de<code>false</code>\u3002 any() \u5982\u679c\u6307\u5b9a\u7684\u8c13\u8bcd\u9002\u7528\u4e8e\u5217\u8868\u4e2d\u7684\u81f3\u5c11\u4e00\u4e2a\u5143\u7d20\uff0c\u5219\u8fd4\u56de<code>true</code>\uff0c\u5426\u5219\u8fd4\u56de<code>false</code>\u3002 all() \u5982\u679c\u6307\u5b9a\u7684\u8c13\u8bcd\u9002\u7528\u4e8e\u5217\u8868\u4e2d\u7684\u6bcf\u4e2a\u5143\u7d20\uff0c\u5219\u8fd4\u56de<code>true</code>\uff0c\u5426\u5219\u8fd4\u56de<code>false</code>\u3002 none() \u5982\u679c\u6307\u5b9a\u7684\u8c13\u8bcd\u4e0d\u9002\u7528\u4e8e\u5217\u8868\u4e2d\u7684\u4efb\u4f55\u4e00\u4e2a\u5143\u7d20\uff0c\u5219\u8fd4\u56de<code>true</code>\uff0c\u5426\u5219\u8fd4\u56de<code>false</code>\u3002 single() \u5982\u679c\u6307\u5b9a\u7684\u8c13\u8bcd\u9002\u7528\u4e8e\u5217\u8868\u4e2d\u7684\u552f\u4e00\u4e00\u4e2a\u5143\u7d20\uff0c\u5219\u8fd4\u56de<code>true</code>\uff0c\u5426\u5219\u8fd4\u56de<code>false</code>\u3002 </li> </ul> <ul> <li> <p>\u6761\u4ef6\u8868\u8fbe\u5f0f\u51fd\u6570</p> \u51fd\u6570 \u8bf4\u660e CASE \u4f7f\u7528\u6761\u4ef6\u6765\u8fc7\u6ee4 nGQL \u67e5\u8be2\u8bed\u53e5\u7684\u7ed3\u679c\uff0c\u5e38\u7528\u4e8e<code>YIELD</code>\u548c<code>RETURN</code>\u5b50\u53e5\u4e2d\u3002<code>CASE</code>\u8868\u8fbe\u5f0f\u4f1a\u904d\u5386\u6240\u6709\u6761\u4ef6\uff0c\u5e76\u5728\u6ee1\u8db3\u7b2c\u4e00\u4e2a\u6761\u4ef6\u65f6\u505c\u6b62\u8bfb\u53d6\u540e\u7eed\u6761\u4ef6\uff0c\u7136\u540e\u8fd4\u56de\u7ed3\u679c\u3002\u5982\u679c\u4e0d\u6ee1\u8db3\u4efb\u4f55\u6761\u4ef6\uff0c\u5c06\u901a\u8fc7<code>ELSE</code>\u5b50\u53e5\u8fd4\u56de\u7ed3\u679c\u3002\u5982\u679c\u6ca1\u6709<code>ELSE</code>\u5b50\u53e5\u4e14\u4e0d\u6ee1\u8db3\u4efb\u4f55\u6761\u4ef6\uff0c\u5219\u8fd4\u56de<code>NULL</code>\u3002 coalesce() \u8fd4\u56de\u6240\u6709\u8868\u8fbe\u5f0f\u4e2d\u7b2c\u4e00\u4e2a\u975e\u7a7a\u5143\u7d20\u3002 </li> </ul>"},{"location":"2.quick-start/6.cheatsheet-for-ngql-command/#_2","title":"\u901a\u7528\u67e5\u8be2\u8bed\u53e5","text":"<ul> <li> <p>MATCH</p> <pre><code>MATCH &lt;pattern&gt; [&lt;clause_1&gt;]  RETURN &lt;output&gt;  [&lt;clause_2&gt;];\n</code></pre> \u6a21\u5f0f \u793a\u4f8b \u8bf4\u660e \u5339\u914d\u70b9 <code>(v)</code> \u7528\u6237\u53ef\u4ee5\u5728\u4e00\u5bf9\u62ec\u53f7\u4e2d\u4f7f\u7528\u81ea\u5b9a\u4e49\u53d8\u91cf\u6765\u8868\u793a\u6a21\u5f0f\u4e2d\u7684\u70b9\u3002\u4f8b\u5982<code>(v)</code>\u3002 \u5339\u914d Tag <code>MATCH (v:player) RETURN v</code> \u7528\u6237\u53ef\u4ee5\u5728\u70b9\u7684\u53f3\u4fa7\u7528<code>:&lt;tag_name&gt;</code>\u8868\u793a\u6a21\u5f0f\u4e2d\u7684 Tag\u3002 \u5339\u914d\u591a Tag <code>MATCH (v:player:team) RETURN v</code> \u7528\u6237\u53ef\u4ee5\u7528\u82f1\u6587\u5192\u53f7\uff08:\uff09\u5339\u914d\u591a Tag \u7684\u70b9\u3002 \u5339\u914d\u70b9\u7684\u5c5e\u6027 <code>MATCH (v:player{name:\"Tim Duncan\"}) RETURN v</code> <code>MATCH (v) WITH v, properties(v) as props, keys(properties(v)) as kk WHERE [i in kk where props[i] == \"Tim Duncan\"] RETURN v</code> \u7528\u6237\u53ef\u4ee5\u5728 Tag \u7684\u53f3\u4fa7\u7528<code>{&lt;prop_name&gt;: &lt;prop_value&gt;}</code>\u8868\u793a\u6a21\u5f0f\u4e2d\u70b9\u7684\u5c5e\u6027\uff1b\u6216\u8005\u4e0d\u6307\u5b9a Tag \u76f4\u63a5\u5339\u914d\u70b9\u7684\u5c5e\u6027\u3002 \u5339\u914d\u5355\u70b9 ID <code>MATCH (v) WHERE id(v) == 'player101' RETURN v</code> \u7528\u6237\u53ef\u4ee5\u4f7f\u7528\u70b9 ID \u53bb\u5339\u914d\u70b9\u3002<code>id()</code>\u51fd\u6570\u53ef\u4ee5\u68c0\u7d22\u70b9\u7684 ID\u3002 \u5339\u914d\u591a\u70b9 ID <code>MATCH (v:player { name: 'Tim Duncan' })--(v2) WHERE id(v2) IN [\"player101\", \"player102\"] RETURN v2</code> \u8981\u5339\u914d\u591a\u4e2a\u70b9\u7684 ID\uff0c\u53ef\u4ee5\u7528<code>WHERE id(v) IN [vid_list]</code>\u3002 \u5339\u914d\u8fde\u63a5\u7684\u70b9 <code>MATCH (v:player{name:\"Tim Duncan\"})--(v2) RETURN v2.player.name AS Name</code> \u7528\u6237\u53ef\u4ee5\u4f7f\u7528<code>--</code>\u7b26\u53f7\u8868\u793a\u4e24\u4e2a\u65b9\u5411\u7684\u8fb9\uff0c\u5e76\u5339\u914d\u8fd9\u4e9b\u8fb9\u8fde\u63a5\u7684\u70b9\u3002\u7528\u6237\u53ef\u4ee5\u5728<code>--</code>\u7b26\u53f7\u4e0a\u589e\u52a0<code>&lt;</code>\u6216<code>&gt;</code>\u7b26\u53f7\u6307\u5b9a\u8fb9\u7684\u65b9\u5411\u3002 \u5339\u914d\u8def\u5f84 <code>MATCH p=(v:player{name:\"Tim Duncan\"})--&gt;(v2) RETURN p</code> \u8fde\u63a5\u8d77\u6765\u7684\u70b9\u548c\u8fb9\u6784\u6210\u4e86\u8def\u5f84\u3002\u7528\u6237\u53ef\u4ee5\u4f7f\u7528\u81ea\u5b9a\u4e49\u53d8\u91cf\u547d\u540d\u8def\u5f84\u3002 \u5339\u914d\u8fb9 <code>MATCH (v:player{name:\"Tim Duncan\"})-[e]-(v2) RETURN e</code><code>MATCH ()&lt;-[e]-()   RETURN e</code> \u9664\u4e86\u7528<code>--</code>\u3001<code>--&gt;</code>\u3001<code>&lt;--</code>\u8868\u793a\u672a\u547d\u540d\u7684\u8fb9\u4e4b\u5916\uff0c\u7528\u6237\u8fd8\u53ef\u4ee5\u5728\u65b9\u62ec\u53f7\u4e2d\u4f7f\u7528\u81ea\u5b9a\u4e49\u53d8\u91cf\u547d\u540d\u8fb9\u3002\u4f8b\u5982<code>-[e]-</code>\u3002 \u5339\u914d Edge type <code>MATCH ()-[e:follow]-&gt;() RETURN e</code> \u548c\u70b9\u4e00\u6837\uff0c\u7528\u6237\u53ef\u4ee5\u7528<code>:&lt;edge_type&gt;</code>\u8868\u793a\u6a21\u5f0f\u4e2d\u7684 Edge type\uff0c\u4f8b\u5982<code>-[e:follow]-</code>\u3002 \u5339\u914d\u8fb9\u7684\u5c5e\u6027 <code>MATCH (v:player{name:\"Tim Duncan\"})-[e:follow{degree:95}]-&gt;(v2) RETURN e</code> <code>MATCH ()-[e]-&gt;() WITH e, properties(e) as props, keys(properties(e)) as kk WHERE [i in kk where props[i] == 90] RETURN e</code> \u7528\u6237\u53ef\u4ee5\u7528<code>{&lt;prop_name&gt;: &lt;prop_value&gt;}</code>\u8868\u793a\u6a21\u5f0f\u4e2d Edge type \u7684\u5c5e\u6027\uff0c\u4f8b\u5982<code>[e:follow{likeness:95}]</code>\uff1b\u6216\u8005\u4e0d\u6307\u5b9a Edge type \u76f4\u63a5\u5339\u914d\u8fb9\u7684\u5c5e\u6027\u3002 \u5339\u914d\u591a\u4e2a Edge type <code>MATCH (v:player{name:\"Tim Duncan\"})-[e:follow | :serve]-&gt;(v2) RETURN e</code> \u4f7f\u7528<code>|</code>\u53ef\u4ee5\u5339\u914d\u591a\u4e2a Edge type\uff0c\u4f8b\u5982<code>[e:follow | :serve]</code>\u3002\u7b2c\u4e00\u4e2a Edge type \u524d\u7684\u82f1\u6587\u5192\u53f7\uff08:\uff09\u4e0d\u53ef\u7701\u7565\uff0c\u540e\u7eed Edge type \u524d\u7684\u82f1\u6587\u5192\u53f7\u53ef\u4ee5\u7701\u7565\uff0c\u4f8b\u5982<code>[e:follow | serve]</code>\u3002 \u5339\u914d\u591a\u6761\u8fb9 <code>MATCH (v:player{name:\"Tim Duncan\"})-[]-&gt;(v2)&lt;-[e:serve]-(v3) RETURN v2, v3</code> \u7528\u6237\u53ef\u4ee5\u6269\u5c55\u6a21\u5f0f\uff0c\u5339\u914d\u8def\u5f84\u4e2d\u7684\u591a\u6761\u8fb9\u3002 \u5339\u914d\u5b9a\u957f\u8def\u5f84 <code>MATCH p=(v:player{name:\"Tim Duncan\"})-[e:follow*2]-&gt;(v2) RETURN DISTINCT v2 AS Friends</code> \u7528\u6237\u53ef\u4ee5\u5728\u6a21\u5f0f\u4e2d\u4f7f\u7528<code>:&lt;edge_type&gt;*&lt;hop&gt;</code>\u5339\u914d\u5b9a\u957f\u8def\u5f84\u3002<code>hop</code>\u5fc5\u987b\u662f\u4e00\u4e2a\u975e\u8d1f\u6574\u6570\u3002<code>e</code>\u7684\u6570\u636e\u7c7b\u578b\u662f\u5217\u8868\u3002 \u5339\u914d\u53d8\u957f\u8def\u5f84 <code>MATCH p=(v:player{name:\"Tim Duncan\"})-[e:follow*1..3]-&gt;(v2) RETURN v2 AS Friends</code> <code>minHop</code>\uff1a\u53ef\u9009\u9879\u3002\u8868\u793a\u8def\u5f84\u7684\u6700\u5c0f\u957f\u5ea6\u3002<code>minHop</code>\u5fc5\u987b\u662f\u4e00\u4e2a\u975e\u8d1f\u6574\u6570\uff0c\u9ed8\u8ba4\u503c\u4e3a 1\u3002<code>maxHop</code>\uff1a\u53ef\u9009\u9879\u3002\u8868\u793a\u8def\u5f84\u7684\u6700\u5927\u957f\u5ea6\u3002<code>maxHop</code>\u5fc5\u987b\u662f\u4e00\u4e2a\u975e\u8d1f\u6574\u6570\uff0c\u9ed8\u8ba4\u4e3a\u65e0\u7a77\u5927\u3002<code>e</code>\u7684\u6570\u636e\u7c7b\u578b\u662f\u5217\u8868\u3002 \u5339\u914d\u591a\u4e2a Edge type \u7684\u53d8\u957f\u8def\u5f84 <code>MATCH p=(v:player{name:\"Tim Duncan\"})-[e:follow | serve*2]-&gt;(v2) RETURN DISTINCT v2</code> \u7528\u6237\u53ef\u4ee5\u5728\u53d8\u957f\u6216\u5b9a\u957f\u6a21\u5f0f\u4e2d\u6307\u5b9a\u591a\u4e2a Edge type\u3002<code>hop</code>\u3001<code>minHop</code>\u548c<code>maxHop</code>\u5bf9\u6240\u6709 Edge type \u90fd\u751f\u6548\u3002<code>e</code>\u7684\u6570\u636e\u7c7b\u578b\u662f\u5217\u8868\u3002 \u68c0\u7d22\u70b9\u6216\u8fb9\u7684\u4fe1\u606f <code>MATCH (v:player{name:\"Tim Duncan\"}) RETURN v</code><code>MATCH (v:player{name:\"Tim Duncan\"})-[e]-&gt;(v2) RETURN e</code> \u4f7f\u7528<code>RETURN {&lt;vertex_name&gt; | &lt;edge_name&gt;}</code>\u68c0\u7d22\u70b9\u6216\u8fb9\u7684\u6240\u6709\u4fe1\u606f\u3002 \u68c0\u7d22\u70b9 ID <code>MATCH (v:player{name:\"Tim Duncan\"}) RETURN id(v)</code> \u4f7f\u7528<code>id()</code>\u51fd\u6570\u68c0\u7d22\u70b9 ID\u3002 \u68c0\u7d22 Tag <code>MATCH (v:player{name:\"Tim Duncan\"}) RETURN labels(v)</code> \u4f7f\u7528<code>labels()</code>\u51fd\u6570\u68c0\u7d22\u70b9\u4e0a\u7684 Tag \u5217\u8868\u3002\u68c0\u7d22\u5217\u8868<code>labels(v)</code>\u4e2d\u7684\u7b2c N \u4e2a\u5143\u7d20\uff0c\u53ef\u4ee5\u4f7f\u7528<code>labels(v)[n-1]</code>\u3002 \u68c0\u7d22\u70b9\u6216\u8fb9\u7684\u5355\u4e2a\u5c5e\u6027 <code>MATCH (v:player{name:\"Tim Duncan\"}) RETURN v.player.age</code> \u4f7f\u7528<code>RETURN {&lt;vertex_name&gt; | &lt;edge_name&gt;}.&lt;property&gt;</code>\u68c0\u7d22\u5355\u4e2a\u5c5e\u6027\u3002\u4f7f\u7528<code>AS</code>\u8bbe\u7f6e\u5c5e\u6027\u7684\u522b\u540d\u3002 \u68c0\u7d22\u70b9\u6216\u8fb9\u7684\u6240\u6709\u5c5e\u6027 <code>MATCH p=(v:player{name:\"Tim Duncan\"})-[]-&gt;(v2) RETURN properties(v2)</code> \u4f7f\u7528<code>properties()</code>\u51fd\u6570\u68c0\u7d22\u70b9\u6216\u8fb9\u7684\u6240\u6709\u5c5e\u6027\u3002 \u68c0\u7d22 Edge type <code>MATCH p=(v:player{name:\"Tim Duncan\"})-[e]-&gt;() RETURN DISTINCT type(e)</code> \u4f7f\u7528<code>type()</code>\u51fd\u6570\u68c0\u7d22\u5339\u914d\u7684 Edge type\u3002 \u68c0\u7d22\u8def\u5f84 <code>MATCH p=(v:player{name:\"Tim Duncan\"})-[*3]-&gt;() RETURN p</code> \u4f7f\u7528<code>RETURN &lt;path_name&gt;</code>\u68c0\u7d22\u5339\u914d\u8def\u5f84\u7684\u6240\u6709\u4fe1\u606f\u3002 \u68c0\u7d22\u8def\u5f84\u4e2d\u7684\u70b9 <code>MATCH p=(v:player{name:\"Tim Duncan\"})-[]-&gt;(v2) RETURN nodes(p)</code> \u4f7f\u7528<code>nodes()</code>\u51fd\u6570\u68c0\u7d22\u8def\u5f84\u4e2d\u7684\u6240\u6709\u70b9\u3002 \u68c0\u7d22\u8def\u5f84\u4e2d\u7684\u8fb9 <code>MATCH p=(v:player{name:\"Tim Duncan\"})-[]-&gt;(v2) RETURN relationships(p)</code> \u4f7f\u7528<code>relationships()</code>\u51fd\u6570\u68c0\u7d22\u8def\u5f84\u4e2d\u7684\u6240\u6709\u8fb9\u3002 \u68c0\u7d22\u8def\u5f84\u957f\u5ea6 <code>MATCH p=(v:player{name:\"Tim Duncan\"})-[*..2]-&gt;(v2) RETURN p AS Paths, length(p) AS Length</code> \u4f7f\u7528<code>length()</code>\u51fd\u6570\u68c0\u7d22\u8def\u5f84\u7684\u957f\u5ea6\u3002 </li> </ul> <ul> <li>OPTIONAL MATCH \u6a21\u5f0f \u793a\u4f8b \u8bf4\u660e \u4f5c\u4e3a<code>MATCH</code>\u8bed\u53e5\u7684\u53ef\u9009\u9879\u53bb\u5339\u914d\u56fe\u6570\u636e\u5e93\u4e2d\u7684\u6a21\u5f0f <code>MATCH (m)-[]-&gt;(n) WHERE id(m)==\"player100\" OPTIONAL MATCH (n)-[]-&gt;(l) RETURN id(m),id(n),id(l)</code> \u5982\u679c\u56fe\u6570\u636e\u5e93\u4e2d\u6ca1\u6709\u5bf9\u5e94\u7684\u6a21\u5f0f\uff0c\u5bf9\u5e94\u7684\u5217\u8fd4\u56de<code>NULL</code>\u3002 </li> </ul> <ul> <li> <p>LOOKUP</p> <pre><code>LOOKUP ON {&lt;vertex_tag&gt; | &lt;edge_type&gt;} \n[WHERE &lt;expression&gt; [AND &lt;expression&gt; ...]] \nYIELD &lt;return_list&gt; [AS &lt;alias&gt;]\n</code></pre> \u6a21\u5f0f \u793a\u4f8b \u8bf4\u660e \u68c0\u7d22\u70b9 <code>LOOKUP ON player WHERE player.name == \"Tony Parker\" YIELD player.name AS name, player.age AS age</code> \u8fd4\u56de Tag \u4e3a<code>player</code>\u4e14<code>name</code>\u4e3a<code>Tony Parker</code>\u7684\u70b9\u3002 \u68c0\u7d22\u8fb9 <code>LOOKUP ON follow WHERE follow.degree == 90 YIELD follow.degree</code> \u8fd4\u56de Edge type \u4e3a<code>follow</code>\u4e14<code>degree</code>\u4e3a<code>90</code>\u7684\u8fb9\u3002 \u901a\u8fc7 Tag \u5217\u51fa\u6240\u6709\u70b9 <code>LOOKUP ON player YIELD properties(vertex),id(vertex)</code> \u67e5\u627e\u6240\u6709 Tag \u4e3a<code>player</code>\u7684\u70b9 VID\u3002 \u901a\u8fc7 Edge type \u5217\u51fa\u8fb9 <code>LOOKUP ON follow YIELD edge AS e</code> \u67e5\u627e Edge type \u4e3a<code>follow</code>\u7684\u6240\u6709\u8fb9\u7684\u4fe1\u606f\u3002 \u7edf\u8ba1\u70b9 <code>LOOKUP ON player YIELD id(vertex)| YIELD COUNT(*) AS Player_Count</code> \u7edf\u8ba1 Tag \u4e3a<code>player</code>\u7684\u70b9\u3002 \u7edf\u8ba1\u8fb9 <code>LOOKUP ON follow YIELD edge as e | YIELD COUNT(*) AS Like_Count</code> \u7edf\u8ba1 Edge type \u4e3a<code>follow</code>\u7684\u8fb9\u3002 </li> </ul> <ul> <li> <p>GO</p> <pre><code>GO [[&lt;M&gt; TO] &lt;N&gt; {STEP|STEPS} ] FROM &lt;vertex_list&gt;\nOVER &lt;edge_type_list&gt; [{REVERSELY | BIDIRECT}]\n[ WHERE &lt;conditions&gt; ]\nYIELD [DISTINCT] &lt;return_list&gt;\n[{SAMPLE &lt;sample_list&gt; | LIMIT &lt;limit_list&gt;}]\n[| GROUP BY {col_name | expr | position} YIELD &lt;col_name&gt;]\n[| ORDER BY &lt;expression&gt; [{ASC | DESC}]]\n[| LIMIT [&lt;offset_value&gt;,] &lt;number_rows&gt;]\n</code></pre> \u793a\u4f8b \u8bf4\u660e <code>GO FROM \"player102\" OVER serve YIELD dst(edge)</code> \u8fd4\u56de player102 \u6240\u5c5e\u961f\u4f0d\u3002 <code>GO 2 STEPS FROM \"player102\" OVER follow YIELD dst(edge)</code> \u8fd4\u56de\u8ddd\u79bb player102 \u4e24\u8df3\u7684\u670b\u53cb\u3002 <code>GO FROM \"player100\", \"player102\" OVER serve WHERE properties(edge).start_year &gt; 1995 YIELD DISTINCT properties($$).name AS team_name, properties(edge).start_year AS start_year, properties($^).name AS player_name</code> \u6dfb\u52a0\u8fc7\u6ee4\u6761\u4ef6\u3002 <code>GO FROM \"player100\" OVER follow, serve YIELD properties(edge).degree, properties(edge).start_year</code> \u904d\u5386\u591a\u4e2a Edge type\u3002\u5c5e\u6027\u6ca1\u6709\u503c\u65f6\uff0c\u4f1a\u663e\u793a<code>NULL</code>\u3002 <code>GO FROM \"player100\" OVER follow REVERSELY YIELD src(edge) AS destination</code> \u8fd4\u56de player100 \u5165\u65b9\u5411\u7684\u90bb\u5c45\u70b9\u3002 <code>GO FROM \"player100\" OVER follow REVERSELY YIELD src(edge) AS id | GO FROM $-.id OVER serve WHERE properties($^).age &gt; 20 YIELD properties($^).name AS FriendOf, properties($$).name AS Team</code> \u67e5\u8be2 player100 \u7684\u670b\u53cb\u548c\u670b\u53cb\u6240\u5c5e\u961f\u4f0d\u3002 <code>GO FROM \"player102\" OVER follow YIELD dst(edge) AS both</code> \u8fd4\u56de player102 \u6240\u6709\u90bb\u5c45\u70b9\u3002 <code>GO 2 STEPS FROM \"player100\" OVER follow YIELD src(edge) AS src, dst(edge) AS dst, properties($$).age AS age | GROUP BY $-.dst YIELD $-.dst AS dst, collect_set($-.src) AS src, collect($-.age) AS age</code> \u6839\u636e\u5e74\u9f84\u5206\u7ec4\u3002 </li> </ul> <ul> <li> <p>FETCH</p> <ul> <li> <p>\u83b7\u53d6\u70b9\u7684\u5c5e\u6027\u503c</p> <pre><code>FETCH PROP ON {&lt;tag_name&gt;[, tag_name ...] | *} \n&lt;vid&gt; [, vid ...] \nYIELD &lt;return_list&gt; [AS &lt;alias&gt;]\n</code></pre> \u793a\u4f8b \u8bf4\u660e <code>FETCH PROP ON player \"player100\" YIELD properties(vertex)</code> \u5728<code>FETCH</code>\u8bed\u53e5\u4e2d\u6307\u5b9a Tag \u83b7\u53d6\u5bf9\u5e94\u70b9\u7684\u5c5e\u6027\u503c\u3002 <code>FETCH PROP ON player \"player100\" YIELD player.name AS name</code> \u4f7f\u7528<code>YIELD</code>\u5b50\u53e5\u6307\u5b9a\u8fd4\u56de\u7684\u5c5e\u6027\u3002 <code>FETCH PROP ON player \"player101\", \"player102\", \"player103\" YIELD properties(vertex)</code> \u6307\u5b9a\u591a\u4e2a\u70b9 ID \u83b7\u53d6\u591a\u4e2a\u70b9\u7684\u5c5e\u6027\u503c\uff0c\u70b9\u4e4b\u95f4\u7528\u82f1\u6587\u9017\u53f7\uff08,\uff09\u5206\u9694\u3002 <code>FETCH PROP ON player, t1 \"player100\", \"player103\" YIELD properties(vertex)</code> \u5728<code>FETCH</code>\u8bed\u53e5\u4e2d\u6307\u5b9a\u591a\u4e2a Tag \u83b7\u53d6\u5c5e\u6027\u503c\u3002Tag \u4e4b\u95f4\u7528\u82f1\u6587\u9017\u53f7\uff08,\uff09\u5206\u9694\u3002 <code>FETCH PROP ON * \"player100\", \"player106\", \"team200\" YIELD properties(vertex)</code> \u5728<code>FETCH</code>\u8bed\u53e5\u4e2d\u4f7f\u7528<code>*</code>\u83b7\u53d6\u5f53\u524d\u56fe\u7a7a\u95f4\u6240\u6709\u6807\u7b7e\u91cc\uff0c\u70b9\u7684\u5c5e\u6027\u503c\u3002 </li> </ul> <ul> <li> <p>\u83b7\u53d6\u8fb9\u7684\u5c5e\u6027\u503c</p> <pre><code>FETCH PROP ON &lt;edge_type&gt; &lt;src_vid&gt; -&gt; &lt;dst_vid&gt;[@&lt;rank&gt;] [, &lt;src_vid&gt; -&gt; &lt;dst_vid&gt; ...]\nYIELD &lt;output&gt;;\n</code></pre> \u793a\u4f8b \u8bf4\u660e <code>FETCH PROP ON serve \"player100\" -&gt; \"team204\" YIELD properties(edge)</code> \u83b7\u53d6\u8fde\u63a5 player100 \u548c team204 \u7684\u8fb9 serve \u7684\u6240\u6709\u5c5e\u6027\u503c\u3002 <code>FETCH PROP ON serve \"player100\" -&gt; \"team204\" YIELD serve.start_year</code> \u4f7f\u7528<code>YIELD</code>\u5b50\u53e5\u6307\u5b9a\u8fd4\u56de\u7684\u5c5e\u6027\u3002 <code>FETCH PROP ON serve \"player100\" -&gt; \"team204\", \"player133\" -&gt; \"team202\" YIELD properties(edge)</code> \u6307\u5b9a\u591a\u4e2a\u8fb9\u6a21\u5f0f (<code>&lt;src_vid&gt; -&gt; &lt;dst_vid&gt;[@&lt;rank&gt;]</code>) \u83b7\u53d6\u591a\u4e2a\u8fb9\u7684\u5c5e\u6027\u503c\u3002\u6a21\u5f0f\u4e4b\u95f4\u7528\u82f1\u6587\u9017\u53f7\uff08,\uff09\u5206\u9694\u3002 <code>FETCH PROP ON serve \"player100\" -&gt; \"team204\"@1 YIELD properties(edge)</code> \u8981\u83b7\u53d6 rank \u4e0d\u4e3a 0 \u7684\u8fb9\uff0c\u8bf7\u5728 FETCH \u8bed\u53e5\u4e2d\u8bbe\u7f6e rank\u3002 <code>GO FROM \"player101\" OVER follow YIELD follow._src AS s, follow._dst AS d | FETCH PROP ON follow $-.s -&gt; $-.d YIELD follow.degree</code> \u8fd4\u56de\u4ece\u70b9 player101 \u5f00\u59cb\u7684 follow \u8fb9\u7684 degree \u503c\u3002 <code>$var = GO FROM \"player101\" OVER follow YIELD follow._src AS s, follow._dst AS d; FETCH PROP ON follow $var.s -&gt; $var.d YIELD follow.degree</code> \u81ea\u5b9a\u4e49\u53d8\u91cf\u6784\u5efa\u67e5\u8be2\u3002 </li> </ul> </li> </ul> <ul> <li> <p>SHOW</p> \u8bed\u53e5 \u8bed\u6cd5 \u793a\u4f8b \u8bf4\u660e SHOW CHARSET <code>SHOW CHARSET</code> <code>SHOW CHARSET</code> \u663e\u793a\u5f53\u524d\u7684\u5b57\u7b26\u96c6\u3002 SHOW COLLATION <code>SHOW COLLATION</code> <code>SHOW COLLATION</code> \u663e\u793a\u5f53\u524d\u7684\u6392\u5e8f\u89c4\u5219\u3002 SHOW CREATE SPACE <code>SHOW CREATE SPACE &lt;space_name&gt;</code> <code>SHOW CREATE SPACE basketballplayer</code> \u663e\u793a\u6307\u5b9a\u56fe\u7a7a\u95f4\u7684\u521b\u5efa\u8bed\u53e5\u3002 SHOW CREATE TAG/EDGE <code>SHOW CREATE {TAG &lt;tag_name&gt; | EDGE &lt;edge_name&gt;}</code> <code>SHOW CREATE TAG player</code> \u663e\u793a\u6307\u5b9a Tag/Edge type \u7684\u57fa\u672c\u4fe1\u606f\u3002 SHOW HOSTS <code>SHOW HOSTS [GRAPH | STORAGE | META]</code> <code>SHOW HOSTS</code><code>SHOW HOSTS GRAPH</code> \u663e\u793a Graph\u3001Storage\u3001Meta \u670d\u52a1\u4e3b\u673a\u4fe1\u606f\u3001\u7248\u672c\u4fe1\u606f\u3002 SHOW INDEX STATUS <code>SHOW {TAG | EDGE} INDEX STATUS</code> <code>SHOW TAG INDEX STATUS</code> \u91cd\u5efa\u539f\u751f\u7d22\u5f15\u7684\u4f5c\u4e1a\u72b6\u6001\uff0c\u4ee5\u4fbf\u786e\u5b9a\u91cd\u5efa\u7d22\u5f15\u662f\u5426\u6210\u529f\u3002 SHOW INDEXES <code>SHOW {TAG | EDGE} INDEXES</code> <code>SHOW TAG INDEXES</code> \u5217\u51fa\u5f53\u524d\u56fe\u7a7a\u95f4\u5185\u7684\u6240\u6709 Tag \u548c Edge type\uff08\u5305\u62ec\u5c5e\u6027\uff09\u7684\u7d22\u5f15\u3002 SHOW PARTS <code>SHOW PARTS [&lt;part_id&gt;]</code> <code>SHOW PARTS</code> \u663e\u793a\u56fe\u7a7a\u95f4\u4e2d\u6307\u5b9a\u5206\u7247\u6216\u6240\u6709\u5206\u7247\u7684\u4fe1\u606f\u3002 SHOW ROLES <code>SHOW ROLES IN &lt;space_name&gt;</code> <code>SHOW ROLES in basketballplayer</code> \u663e\u793a\u5206\u914d\u7ed9\u7528\u6237\u7684\u89d2\u8272\u4fe1\u606f\u3002 SHOW SNAPSHOTS <code>SHOW SNAPSHOTS</code> <code>SHOW SNAPSHOTS</code> \u663e\u793a\u6240\u6709\u5feb\u7167\u4fe1\u606f\u3002 SHOW SPACES <code>SHOW SPACES</code> <code>SHOW SPACES</code> \u663e\u793a\u73b0\u5b58\u7684\u56fe\u7a7a\u95f4\u3002 SHOW STATS <code>SHOW STATS</code> <code>SHOW STATS</code> \u663e\u793a\u6700\u8fd1<code>STATS</code>\u4f5c\u4e1a\u6536\u96c6\u7684\u56fe\u7a7a\u95f4\u7edf\u8ba1\u4fe1\u606f\u3002 SHOW TAGS/EDGES <code>SHOW TAGS | EDGES</code> <code>SHOW TAGS</code>\u3001<code>SHOW EDGES</code> \u663e\u793a\u5f53\u524d\u56fe\u7a7a\u95f4\u5185\u7684\u6240\u6709 Tag/Edge type\u3002 SHOW USERS <code>SHOW USERS</code> <code>SHOW USERS</code> \u663e\u793a\u7528\u6237\u4fe1\u606f\u3002 SHOW SESSIONS <code>SHOW SESSIONS</code> <code>SHOW SESSIONS</code> \u663e\u793a\u6240\u6709\u4f1a\u8bdd\u4fe1\u606f\u3002 SHOW SESSIONS <code>SHOW SESSION &lt;Session_Id&gt;</code> <code>SHOW SESSION 1623304491050858</code> \u6307\u5b9a\u4f1a\u8bdd ID \u8fdb\u884c\u67e5\u770b\u3002 SHOW QUERIES <code>SHOW [ALL] QUERIES</code> <code>SHOW QUERIES</code> \u67e5\u770b\u5f53\u524d Session \u4e2d\u6b63\u5728\u6267\u884c\u7684\u67e5\u8be2\u8bf7\u6c42\u4fe1\u606f\u3002 SHOW META LEADER <code>SHOW META LEADER</code> <code>SHOW META LEADER</code> \u663e\u793a\u5f53\u524d Meta \u96c6\u7fa4\u7684 leader \u4fe1\u606f\u3002 </li> </ul>"},{"location":"2.quick-start/6.cheatsheet-for-ngql-command/#_3","title":"\u5b50\u53e5\u548c\u9009\u9879","text":"\u5b50\u53e5 \u8bed\u6cd5 \u793a\u4f8b \u8bf4\u660e GROUP BY <code>GROUP BY &lt;var&gt; YIELD &lt;var&gt;, &lt;aggregation_function(var)&gt;</code> <code>GO FROM \"player100\" OVER follow BIDIRECT YIELD $$.player.name as Name | GROUP BY $-.Name YIELD $-.Name as Player, count(*) AS Name_Count</code> \u67e5\u627e\u6240\u6709\u8fde\u63a5\u5230 player100 \u7684\u70b9\uff0c\u5e76\u6839\u636e\u4ed6\u4eec\u7684\u59d3\u540d\u8fdb\u884c\u5206\u7ec4\uff0c\u8fd4\u56de\u59d3\u540d\u7684\u51fa\u73b0\u6b21\u6570\u3002 LIMIT <code>YIELD &lt;var&gt; [| LIMIT [&lt;offset_value&gt;,] &lt;number_rows&gt;]</code> <code>GO FROM \"player100\" OVER follow REVERSELY YIELD $$.player.name AS Friend, $$.player.age AS Age | ORDER BY $-.Age, $-.Friend | LIMIT 1, 3</code> \u4ece\u6392\u5e8f\u7ed3\u679c\u4e2d\u8fd4\u56de\u7b2c 2 \u884c\u5f00\u59cb\u7684 3 \u884c\u6570\u636e\u3002 SKIP <code>RETURN &lt;var&gt; [SKIP &lt;offset&gt;] [LIMIT &lt;number_rows&gt;]</code> <code>MATCH (v:player{name:\"Tim Duncan\"}) --&gt; (v2) RETURN v2.player.name AS Name, v2.player.age AS Age ORDER BY Age DESC SKIP 1</code> \u7528\u6237\u53ef\u4ee5\u5355\u72ec\u4f7f\u7528<code>SKIP &lt;offset&gt;</code>\u8bbe\u7f6e\u504f\u79fb\u91cf\uff0c\u540e\u9762\u4e0d\u9700\u8981\u6dfb\u52a0<code>LIMIT &lt;number_rows&gt;</code>\u3002 SAMPLE <code>&lt;go_statement&gt; SAMPLE &lt;sample_list&gt;;</code> <code>GO 3 STEPS FROM \"player100\"  OVER *   YIELD properties($$).name AS NAME, properties($$).age AS Age  SAMPLE [1,2,3];</code> \u5728\u7ed3\u679c\u96c6\u4e2d\u5747\u5300\u53d6\u6837\u5e76\u8fd4\u56de\u6307\u5b9a\u6570\u91cf\u7684\u6570\u636e\u3002 ORDER BY <code>&lt;YIELD clause&gt; ORDER BY &lt;expression&gt; [ASC | DESC] [, &lt;expression&gt; [ASC | DESC] ...]</code> <code>FETCH PROP ON player \"player100\", \"player101\", \"player102\", \"player103\" YIELD player.age AS age, player.name AS name | ORDER BY $-.age ASC, $-.name DESC</code> <code>ORDER BY</code>\u5b50\u53e5\u6307\u5b9a\u8f93\u51fa\u7ed3\u679c\u7684\u6392\u5e8f\u89c4\u5219\u3002 RETURN <code>RETURN {&lt;vertex_name&gt;|&lt;edge_name&gt;|&lt;vertex_name&gt;.&lt;property&gt;|&lt;edge_name&gt;.&lt;property&gt;|...}</code> <code>MATCH (v:player) RETURN v.player.name, v.player.age LIMIT 3</code> \u8fd4\u56de\u70b9\u7684\u5c5e\u6027\u4e3a<code>name</code>\u548c<code>age</code>\u7684\u524d\u4e09\u884c\u503c\u3002 TTL <code>CREATE TAG &lt;tag_name&gt;(&lt;property_name_1&gt; &lt;property_value_1&gt;, &lt;property_name_2&gt; &lt;property_value_2&gt;, ...) ttl_duration= &lt;value_int&gt;, ttl_col = &lt;property_name&gt;</code> <code>CREATE TAG t2(a int, b int, c string) ttl_duration= 100, ttl_col = \"a\"</code> \u521b\u5efa Tag \u5e76\u8bbe\u7f6e TTL \u9009\u9879\u3002 WHERE <code>WHERE {&lt;vertex|edge_alias&gt;.&lt;property_name&gt; {&gt;|==|&lt;|...} &lt;value&gt;...}</code> <code>MATCH (v:player) WHERE v.player.name == \"Tim Duncan\" XOR (v.player.age &lt; 30 AND v.player.name == \"Yao Ming\") OR NOT (v.player.name == \"Yao Ming\" OR v.player.name == \"Tim Duncan\") RETURN v.player.name, v.player.age</code> <code>WHERE</code>\u5b50\u53e5\u53ef\u4ee5\u6839\u636e\u6761\u4ef6\u8fc7\u6ee4\u8f93\u51fa\u7ed3\u679c\uff0c\u901a\u5e38\u7528\u4e8e<code>GO</code>\u548c<code>LOOKUP</code>\u8bed\u53e5\uff0c<code>MATCH</code>\u548c<code>WITH</code>\u8bed\u53e5\u3002 YIELD <code>YIELD [DISTINCT] &lt;col&gt; [AS &lt;alias&gt;] [, &lt;col&gt; [AS &lt;alias&gt;] ...] [WHERE &lt;conditions&gt;];</code> <code>GO FROM \"player100\" OVER follow YIELD dst(edge) AS ID | FETCH PROP ON player $-.ID YIELD player.age AS Age | YIELD AVG($-.Age) as Avg_age, count(*)as Num_friends</code> \u67e5\u627e player100 \u5173\u6ce8\u7684 player\uff0c\u5e76\u8ba1\u7b97\u4ed6\u4eec\u7684\u5e73\u5747\u5e74\u9f84\u3002 WITH <code>MATCH $expressions WITH {nodes()|labels()|...}</code> <code>MATCH p=(v:player{name:\"Tim Duncan\"})--() WITH nodes(p) AS n UNWIND n AS n1 RETURN DISTINCT n1</code> <code>WITH</code>\u5b50\u53e5\u53ef\u4ee5\u83b7\u53d6\u5e76\u5904\u7406\u67e5\u8be2\u524d\u534a\u90e8\u5206\u7684\u7ed3\u679c\uff0c\u5e76\u5c06\u5904\u7406\u7ed3\u679c\u4f5c\u4e3a\u8f93\u5165\u4f20\u9012\u7ed9\u67e5\u8be2\u7684\u540e\u534a\u90e8\u5206\u3002 UNWIND <code>UNWIND &lt;list&gt; AS &lt;alias&gt; &lt;RETURN clause&gt;</code> <code>UNWIND [1,2,3] AS n RETURN n</code> \u62c6\u5206\u5217\u8868\u3002"},{"location":"2.quick-start/6.cheatsheet-for-ngql-command/#_4","title":"\u56fe\u7a7a\u95f4\u8bed\u53e5","text":"\u8bed\u53e5 \u8bed\u6cd5 \u793a\u4f8b \u8bf4\u660e CREATE SPACE <code>CREATE SPACE [IF NOT EXISTS] &lt;graph_space_name&gt; ( [partition_num = &lt;partition_number&gt;,] [replica_factor = &lt;replica_number&gt;,]  vid_type = {FIXED_STRING(&lt;N&gt;) | INT[64]} ) [COMMENT = '&lt;comment&gt;']</code> <code>CREATE SPACE my_space_1 (vid_type=FIXED_STRING(30))</code> \u521b\u5efa\u4e00\u4e2a\u65b0\u7684\u56fe\u7a7a\u95f4\u3002 CREATE SPACE <code>CREATE SPACE &lt;new_graph_space_name&gt; AS &lt;old_graph_space_name&gt;</code> <code>CREATE SPACE my_space_4 as my_space_3</code> \u514b\u9686\u73b0\u6709\u56fe\u7a7a\u95f4\u7684 Schema\u3002 USE <code>USE &lt;graph_space_name&gt;</code> <code>USE space1</code> \u6307\u5b9a\u4e00\u4e2a\u56fe\u7a7a\u95f4\uff0c\u6216\u5207\u6362\u5230\u53e6\u4e00\u4e2a\u56fe\u7a7a\u95f4\uff0c\u5c06\u5176\u4f5c\u4e3a\u540e\u7eed\u67e5\u8be2\u7684\u5de5\u4f5c\u7a7a\u95f4\u3002 SHOW SPACES <code>SHOW SPACES</code> <code>SHOW SPACES</code> \u5217\u51fa NebulaGraph \u793a\u4f8b\u4e2d\u7684\u6240\u6709\u56fe\u7a7a\u95f4\u3002 DESCRIBE SPACE <code>DESC[RIBE] SPACE &lt;graph_space_name&gt;</code> <code>DESCRIBE SPACE basketballplayer</code> \u663e\u793a\u6307\u5b9a\u56fe\u7a7a\u95f4\u7684\u4fe1\u606f\u3002 CLEAR SPACE <code>CLEAR SPACE [IF EXISTS] &lt;graph_space_name&gt;</code> \u6e05\u7a7a\u56fe\u7a7a\u95f4\u4e2d\u7684\u70b9\u548c\u8fb9\uff0c\u4f46\u4e0d\u4f1a\u5220\u9664\u56fe\u7a7a\u95f4\u672c\u8eab\u4ee5\u53ca\u5176\u4e2d\u7684 Schema \u4fe1\u606f\u3002 DROP SPACE <code>DROP SPACE [IF EXISTS] &lt;graph_space_name&gt;</code> <code>DROP SPACE basketballplayer</code> \u5220\u9664\u6307\u5b9a\u56fe\u7a7a\u95f4\u7684\u6240\u6709\u5185\u5bb9\u3002"},{"location":"2.quick-start/6.cheatsheet-for-ngql-command/#tag","title":"TAG \u8bed\u53e5","text":"\u8bed\u53e5 \u8bed\u6cd5 \u793a\u4f8b \u8bf4\u660e CREATE TAG <code>CREATE TAG [IF NOT EXISTS] &lt;tag_name&gt; ( &lt;prop_name&gt; &lt;data_type&gt; [NULL | NOT NULL] [DEFAULT &lt;default_value&gt;] [COMMENT '&lt;comment&gt;'] [{, &lt;prop_name&gt; &lt;data_type&gt; [NULL |  NOT NULL] [DEFAULT &lt;default_value&gt;] [COMMENT '&lt;comment&gt;']} ...] ) [TTL_DURATION = &lt;ttl_duration&gt;] [TTL_COL = &lt;prop_name&gt;] [COMMENT = '&lt;comment&gt;']</code> <code>CREATE TAG woman(name string, age int, married bool, salary double, create_time timestamp) TTL_DURATION = 100, TTL_COL = \"create_time\"</code> \u901a\u8fc7\u6307\u5b9a\u540d\u79f0\u521b\u5efa\u4e00\u4e2a Tag\u3002 DROP TAG <code>DROP TAG [IF EXISTS] &lt;tag_name&gt;</code> <code>DROP TAG test;</code> \u5220\u9664\u5f53\u524d\u5de5\u4f5c\u7a7a\u95f4\u5185\u6240\u6709\u70b9\u4e0a\u7684\u6307\u5b9a Tag\u3002 ALTER TAG <code>ALTER TAG &lt;tag_name&gt;    &lt;alter_definition&gt; [, alter_definition] ...]    [ttl_definition [, ttl_definition] ... ]    [COMMENT = '&lt;comment&gt;']</code> <code>ALTER TAG t1 ADD (p3 int, p4 string)</code> \u4fee\u6539 Tag \u7684\u7ed3\u6784\u3002\u4f8b\u5982\u589e\u5220\u5c5e\u6027\u3001\u4fee\u6539\u6570\u636e\u7c7b\u578b\uff0c\u4e5f\u53ef\u4ee5\u4e3a\u5c5e\u6027\u8bbe\u7f6e\u3001\u4fee\u6539 TTL\uff08Time-To-Live)\u3002 SHOW TAGS <code>SHOW TAGS</code> <code>SHOW TAGS</code> \u663e\u793a\u5f53\u524d\u56fe\u7a7a\u95f4\u5185\u7684\u6240\u6709 Tag \u540d\u79f0\u3002 DESCRIBE TAG <code>DESC[RIBE] TAG &lt;tag_name&gt;</code> <code>DESCRIBE TAG player</code> \u67e5\u770b\u6307\u5b9a Tag \u7684\u8be6\u7ec6\u4fe1\u606f\uff0c\u4f8b\u5982\u5b57\u6bb5\u540d\u79f0\u3001\u6570\u636e\u7c7b\u578b\u7b49\u3002 DELETE TAG <code>DELETE TAG &lt;tag_name_list&gt; FROM &lt;VID&gt;</code> <code>DELETE TAG test1 FROM \"test\"</code> \u5220\u9664\u6307\u5b9a\u70b9\u4e0a\u7684\u6307\u5b9a Tag\u3002"},{"location":"2.quick-start/6.cheatsheet-for-ngql-command/#edge_type","title":"Edge type \u8bed\u53e5","text":"\u8bed\u53e5 \u8bed\u6cd5 \u793a\u4f8b \u8bf4\u660e CREATE EDGE <code>CREATE EDGE [IF NOT EXISTS] &lt;edge_type_name&gt;    ( &lt;prop_name&gt; &lt;data_type&gt; [NULL | NOT NULL] [DEFAULT &lt;default_value&gt;] [COMMENT '&lt;comment&gt;'] [{, &lt;prop_name&gt; &lt;data_type&gt; [NULL | NOT NULL] [DEFAULT &lt;default_value&gt;] [COMMENT '&lt;comment&gt;']} ...] ) [TTL_DURATION = &lt;ttl_duration&gt;] [TTL_COL = &lt;prop_name&gt;] [COMMENT = '&lt;comment&gt;']</code> <code>CREATE EDGE e1(p1 string, p2 int, p3 timestamp) TTL_DURATION = 100, TTL_COL = \"p2\"</code> \u6307\u5b9a\u540d\u79f0\u521b\u5efa\u4e00\u4e2a Edge type\u3002 DROP EDGE <code>DROP EDGE [IF EXISTS] &lt;edge_type_name&gt;</code> <code>DROP EDGE e1</code> \u5220\u9664\u5f53\u524d\u5de5\u4f5c\u7a7a\u95f4\u5185\u7684\u6307\u5b9a Edge type\u3002 ALTER EDGE <code>ALTER EDGE &lt;edge_type_name&gt;    &lt;alter_definition&gt; [, alter_definition] ...]    [ttl_definition [, ttl_definition] ... ]    [COMMENT = '&lt;comment&gt;']</code> <code>ALTER EDGE e1 ADD (p3 int, p4 string)</code> \u4fee\u6539 Edge type \u7684\u7ed3\u6784\u3002 SHOW EDGES <code>SHOW EDGES</code> <code>SHOW EDGES</code> \u663e\u793a\u5f53\u524d\u56fe\u7a7a\u95f4\u5185\u7684\u6240\u6709 Edge type \u540d\u79f0\u3002 DESCRIBE EDGE <code>DESC[RIBE] EDGE &lt;edge_type_name&gt;</code> <code>DESCRIBE EDGE follow</code> \u67e5\u770b\u6307\u5b9a Edge type \u7684\u8be6\u7ec6\u4fe1\u606f\uff0c\u4f8b\u5982\u5b57\u6bb5\u540d\u79f0\u3001\u6570\u636e\u7c7b\u578b\u7b49\u3002"},{"location":"2.quick-start/6.cheatsheet-for-ngql-command/#_5","title":"\u70b9\u8bed\u53e5","text":"\u8bed\u53e5 \u8bed\u6cd5 \u793a\u4f8b \u8bf4\u660e INSERT VERTEX <code>INSERT VERTEX [IF NOT EXISTS] [tag_props, [tag_props] ...] VALUES &lt;vid&gt;: ([prop_value_list])</code> <code>INSERT VERTEX t2 (name, age) VALUES \"13\":(\"n3\", 12), \"14\":(\"n4\", 8)</code> \u5728 NebulaGraph \u5b9e\u4f8b\u7684\u6307\u5b9a\u56fe\u7a7a\u95f4\u4e2d\u63d2\u5165\u4e00\u4e2a\u6216\u591a\u4e2a\u70b9\u3002 DELETE VERTEX <code>DELETE VERTEX &lt;vid&gt; [, &lt;vid&gt; ...]</code> <code>DELETE VERTEX \"team1\"</code> \u5220\u9664\u70b9\uff0c\u4ee5\u53ca\u70b9\u5173\u8054\u7684\u51fa\u8fb9\u548c\u5165\u8fb9\u3002 UPDATE VERTEX <code>UPDATE VERTEX ON &lt;tag_name&gt; &lt;vid&gt; SET &lt;update_prop&gt; [WHEN &lt;condition&gt;] [YIELD &lt;output&gt;]</code> <code>UPDATE VERTEX ON player \"player101\" SET age = age + 2</code> \u4fee\u6539\u70b9\u4e0a Tag \u7684\u5c5e\u6027\u503c\u3002 UPSERT VERTEX <code>UPSERT VERTEX ON &lt;tag&gt; &lt;vid&gt; SET &lt;update_prop&gt; [WHEN &lt;condition&gt;] [YIELD &lt;output&gt;]</code> <code>UPSERT VERTEX ON player \"player667\" SET age = 31</code> \u7ed3\u5408<code>UPDATE</code>\u548c<code>INSERT</code>\uff0c\u5982\u679c\u70b9\u5b58\u5728\uff0c\u4f1a\u4fee\u6539\u70b9\u7684\u5c5e\u6027\u503c\uff1b\u5982\u679c\u70b9\u4e0d\u5b58\u5728\uff0c\u4f1a\u63d2\u5165\u65b0\u7684\u70b9\u3002"},{"location":"2.quick-start/6.cheatsheet-for-ngql-command/#_6","title":"\u8fb9\u8bed\u53e5","text":"\u8bed\u53e5 \u8bed\u6cd5 \u793a\u4f8b \u8bf4\u660e INSERT EDGE <code>INSERT EDGE [IF NOT EXISTS] &lt;edge_type&gt; ( &lt;prop_name_list&gt; ) VALUES &lt;src_vid&gt; -&gt; &lt;dst_vid&gt;[@&lt;rank&gt;] : ( &lt;prop_value_list&gt; ) [, &lt;src_vid&gt; -&gt; &lt;dst_vid&gt;[@&lt;rank&gt;] : ( &lt;prop_value_list&gt; ), ...]</code> <code>INSERT EDGE e2 (name, age) VALUES \"11\"-&gt;\"13\":(\"n1\", 1)</code> \u5728 NebulaGraph \u5b9e\u4f8b\u7684\u6307\u5b9a\u56fe\u7a7a\u95f4\u4e2d\u63d2\u5165\u4e00\u6761\u6216\u591a\u6761\u8fb9\u3002 DELETE EDGE <code>DELETE EDGE &lt;edge_type&gt; &lt;src_vid&gt; -&gt; &lt;dst_vid&gt;[@&lt;rank&gt;] [, &lt;src_vid&gt; -&gt; &lt;dst_vid&gt;[@&lt;rank&gt;] ...]</code> <code>DELETE EDGE serve \"player100\" -&gt; \"team204\"@0</code> \u5220\u9664\u8fb9\u3002\u4e00\u6b21\u53ef\u4ee5\u5220\u9664\u4e00\u6761\u6216\u591a\u6761\u8fb9\u3002 UPDATE EDGE <code>UPDATE EDGE ON &lt;edge_type&gt; &lt;src_vid&gt; -&gt; &lt;dst_vid&gt; [@&lt;rank&gt;] SET &lt;update_prop&gt; [WHEN &lt;condition&gt;] [YIELD &lt;output&gt;]</code> <code>UPDATE EDGE ON serve \"player100\" -&gt; \"team204\"@0 SET start_year = start_year + 1</code> \u4fee\u6539\u8fb9\u4e0a Edge type \u7684\u5c5e\u6027\u3002 UPSERT EDGE <code>UPSERT EDGE ON &lt;edge_type&gt; &lt;src_vid&gt; -&gt; &lt;dst_vid&gt; [@rank] SET &lt;update_prop&gt; [WHEN &lt;condition&gt;] [YIELD &lt;properties&gt;]</code> <code>UPSERT EDGE on serve \"player666\" -&gt; \"team200\"@0 SET end_year = 2021</code> \u7ed3\u5408<code>UPDATE</code>\u548c<code>INSERT</code>\uff0c\u5982\u679c\u8fb9\u5b58\u5728\uff0c\u4f1a\u66f4\u65b0\u8fb9\u7684\u5c5e\u6027\uff1b\u5982\u679c\u8fb9\u4e0d\u5b58\u5728\uff0c\u4f1a\u63d2\u5165\u65b0\u7684\u8fb9\u3002"},{"location":"2.quick-start/6.cheatsheet-for-ngql-command/#_7","title":"\u7d22\u5f15","text":"<ul> <li> <p>\u539f\u751f\u7d22\u5f15</p> <p>\u7d22\u5f15\u914d\u5408<code>LOOKUP</code>\u548c<code>MATCH</code>\u8bed\u53e5\u4f7f\u7528\u3002</p> \u8bed\u53e5 \u8bed\u6cd5 \u793a\u4f8b \u8bf4\u660e CREATE INDEX <code>CREATE {TAG | EDGE} INDEX [IF NOT EXISTS] &lt;index_name&gt; ON {&lt;tag_name&gt; | &lt;edge_name&gt;} ([&lt;prop_name_list&gt;]) [COMMENT = '&lt;comment&gt;']</code> <code>CREATE TAG INDEX player_index on player()</code> \u5bf9 Tag\u3001EdgeType \u6216\u5176\u5c5e\u6027\u521b\u5efa\u539f\u751f\u7d22\u5f15\u3002 SHOW CREATE INDEX <code>SHOW CREATE {TAG | EDGE} INDEX &lt;index_name&gt;</code> <code>show create tag index index_2</code> \u521b\u5efa Tag \u6216\u8005 Edge type \u65f6\u4f7f\u7528\u7684 nGQL \u8bed\u53e5\uff0c\u5176\u4e2d\u5305\u542b\u7d22\u5f15\u7684\u8be6\u7ec6\u4fe1\u606f\uff0c\u4f8b\u5982\u5176\u5173\u8054\u7684\u5c5e\u6027\u3002 SHOW INDEXES <code>SHOW {TAG | EDGE} INDEXES</code> <code>SHOW TAG INDEXES</code> \u5217\u51fa\u5f53\u524d\u56fe\u7a7a\u95f4\u5185\u7684\u6240\u6709 Tag \u548c Edge type\uff08\u5305\u62ec\u5c5e\u6027\uff09\u7684\u7d22\u5f15\u3002 DESCRIBE INDEX <code>DESCRIBE {TAG | EDGE} INDEX &lt;index_name&gt;</code> <code>DESCRIBE TAG INDEX player_index_0</code> \u67e5\u770b\u6307\u5b9a\u7d22\u5f15\u7684\u4fe1\u606f\uff0c\u5305\u62ec\u7d22\u5f15\u7684\u5c5e\u6027\u540d\u79f0\uff08Field\uff09\u548c\u6570\u636e\u7c7b\u578b\uff08Type\uff09\u3002 REBUILD INDEX <code>REBUILD {TAG | EDGE} INDEX [&lt;index_name_list&gt;]</code> <code>REBUILD TAG INDEX single_person_index</code> \u91cd\u5efa\u7d22\u5f15\u3002\u7d22\u5f15\u529f\u80fd\u4e0d\u4f1a\u81ea\u52a8\u5bf9\u5176\u521b\u5efa\u4e4b\u524d\u5df2\u5b58\u5728\u7684\u5b58\u91cf\u6570\u636e\u751f\u6548\u3002 SHOW INDEX STATUS <code>SHOW {TAG | EDGE} INDEX STATUS</code> <code>SHOW TAG INDEX STATUS</code> \u67e5\u770b\u7d22\u5f15\u540d\u79f0\u548c\u5bf9\u5e94\u7684\u72b6\u6001\u3002 DROP INDEX <code>DROP {TAG | EDGE} INDEX [IF EXISTS] &lt;index_name&gt;</code> <code>DROP TAG INDEX player_index_0</code> \u5220\u9664\u5f53\u524d\u56fe\u7a7a\u95f4\u4e2d\u5df2\u5b58\u5728\u7684\u7d22\u5f15\u3002 </li> </ul> <ul> <li> <p>\u5168\u6587\u7d22\u5f15</p> \u8bed\u6cd5 \u793a\u4f8b \u8bf4\u660e <code>SIGN IN TEXT SERVICE [(&lt;elastic_ip:port&gt; [,&lt;username&gt;, &lt;password&gt;]), (&lt;elastic_ip:port&gt;), ...]</code> <code>SIGN IN TEXT SERVICE (127.0.0.1:9200)</code> NebulaGraph \u7684\u5168\u6587\u7d22\u5f15\u662f\u57fa\u4e8e Elasticsearch \u5b9e\u73b0\uff0c\u90e8\u7f72 Elasticsearch \u96c6\u7fa4\u4e4b\u540e\uff0c\u53ef\u4ee5\u4f7f\u7528<code>SIGN IN</code>\u8bed\u53e5\u767b\u5f55 Elasticsearch \u5ba2\u6237\u7aef\u3002 <code>SHOW TEXT SEARCH CLIENTS</code> <code>SHOW TEXT SEARCH CLIENTS</code> \u5217\u51fa\u6587\u672c\u641c\u7d22\u5ba2\u6237\u7aef\u3002 <code>SIGN OUT TEXT SERVICE</code> <code>SIGN OUT TEXT SERVICE</code> \u9000\u51fa\u6240\u6709\u6587\u672c\u641c\u7d22\u5ba2\u6237\u7aef\u3002 <code>CREATE FULLTEXT {TAG | EDGE} INDEX &lt;index_name&gt; ON {&lt;tag_name&gt; | &lt;edge_name&gt;} (&lt;prop_name&gt; [,&lt;prop_name&gt;]...) [ANALYZER=\"&lt;analyzer_name&gt;\"]</code> <code>CREATE FULLTEXT TAG INDEX nebula_index_1 ON player(name)</code> \u521b\u5efa\u5168\u6587\u7d22\u5f15\u3002 <code>SHOW FULLTEXT INDEXES</code> <code>SHOW FULLTEXT INDEXES</code> \u663e\u793a\u5168\u6587\u7d22\u5f15\u3002 <code>REBUILD FULLTEXT INDEX</code> <code>REBUILD FULLTEXT INDEX</code> \u91cd\u5efa\u5168\u6587\u7d22\u5f15\u3002 <code>DROP FULLTEXT INDEX &lt;index_name&gt;</code> <code>DROP FULLTEXT INDEX nebula_index_1</code> \u5220\u9664\u5168\u6587\u7d22\u5f15\u3002 <code>LOOKUP ON {&lt;tag&gt; | &lt;edge_type&gt;} WHERE ES_QUERY(&lt;index_name&gt;, \"&lt;text&gt;\") YIELD &lt;return_list&gt; [| LIMIT [&lt;offset&gt;,] &lt;number_rows&gt;]</code> <code>LOOKUP ON player WHERE ES_QUERY(fulltext_index_1,\"Chris\") YIELD id(vertex)</code> \u4f7f\u7528\u67e5\u8be2\u9009\u9879\u3002 </li> </ul>"},{"location":"2.quick-start/6.cheatsheet-for-ngql-command/#_8","title":"\u5b50\u56fe\u548c\u8def\u5f84","text":"\u7c7b\u578b \u8bed\u6cd5 \u793a\u4f8b \u8bf4\u660e \u5b50\u56fe <code>GET SUBGRAPH [WITH PROP] [&lt;step_count&gt; {STEP|STEPS}] FROM {&lt;vid&gt;, &lt;vid&gt;...} [{IN | OUT | BOTH} &lt;edge_type&gt;, &lt;edge_type&gt;...] YIELD [VERTICES AS &lt;vertex_alias&gt;] [,EDGES AS &lt;edge_alias&gt;]</code> <code>GET SUBGRAPH 1 STEPS FROM \"player100\" YIELD VERTICES AS nodes, EDGES AS relationships</code> \u6307\u5b9a Edge type \u7684\u8d77\u59cb\u70b9\u53ef\u4ee5\u5230\u8fbe\u7684\u70b9\u548c\u8fb9\u7684\u4fe1\u606f\uff0c\u8fd4\u56de\u5b50\u56fe\u4fe1\u606f\u3002 \u8def\u5f84 <code>FIND { SHORTEST | ALL | NOLOOP } PATH [WITH PROP] FROM &lt;vertex_id_list&gt; TO &lt;vertex_id_list&gt; OVER &lt;edge_type_list&gt; [REVERSELY | BIDIRECT]  [&lt;WHERE clause&gt;] [UPTO &lt;N&gt; {STEP|STEPS}]  YIELD path as &lt;alias&gt; [| ORDER BY $-.path] [| LIMIT &lt;M&gt;]</code> <code>FIND SHORTEST PATH FROM \"player102\" TO \"team204\" OVER * YIELD path as p</code> \u67e5\u627e\u6307\u5b9a\u8d77\u59cb\u70b9\u548c\u76ee\u7684\u70b9\u4e4b\u95f4\u7684\u8def\u5f84\u3002\u8fd4\u56de\u7684\u8def\u5f84\u683c\u5f0f\u7c7b\u4f3c\u4e8e<code>(&lt;vertex_id&gt;)-[:&lt;edge_type_name&gt;@&lt;rank&gt;]-&gt;(&lt;vertex_id)</code>\u3002"},{"location":"2.quick-start/6.cheatsheet-for-ngql-command/#_9","title":"\u67e5\u8be2\u8c03\u4f18","text":"\u7c7b\u578b \u8bed\u6cd5 \u793a\u4f8b \u8bf4\u660e EXPLAIN <code>EXPLAIN [format=\"row\" | \"dot\"] &lt;your_nGQL_statement&gt;</code> <code>EXPLAIN format=\"row\" SHOW TAGS</code><code>EXPLAIN format=\"dot\" SHOW TAGS</code> \u8f93\u51fa nGQL \u8bed\u53e5\u7684\u6267\u884c\u8ba1\u5212\uff0c\u4f46\u4e0d\u4f1a\u6267\u884c nGQL \u8bed\u53e5\u3002 PROFILE <code>PROFILE [format=\"row\" | \"dot\"] &lt;your_nGQL_statement&gt;</code> <code>PROFILE format=\"row\" SHOW TAGS</code><code>EXPLAIN format=\"dot\" SHOW TAGS</code> \u6267\u884c nGQL \u8bed\u53e5\uff0c\u7136\u540e\u8f93\u51fa\u6267\u884c\u8ba1\u5212\u548c\u6267\u884c\u6982\u8981\u3002"},{"location":"2.quick-start/6.cheatsheet-for-ngql-command/#_10","title":"\u8fd0\u7ef4","text":"<ul> <li> <p>SUBMIT JOB BALANCE</p> \u8bed\u6cd5 \u8bf4\u660e <code>SUBMIT JOB BALANCE LEADER</code> \u542f\u52a8\u4efb\u52a1\u5747\u8861\u5206\u5e03\u6240\u6709\u56fe\u7a7a\u95f4\u4e2d\u7684 leader\u3002\u8be5\u547d\u4ee4\u4f1a\u8fd4\u56de\u4efb\u52a1 ID\u3002 </li> </ul> <ul> <li> <p>\u4f5c\u4e1a\u7ba1\u7406</p> \u8bed\u6cd5 \u8bf4\u660e <code>SUBMIT JOB COMPACT</code> \u89e6\u53d1 RocksDB \u7684\u957f\u8017\u65f6<code>compact</code>\u64cd\u4f5c\u3002 <code>SUBMIT JOB FLUSH</code> \u5c06\u5185\u5b58\u4e2d\u7684 RocksDB memfile \u5199\u5165\u786c\u76d8\u3002 <code>SUBMIT JOB STATS</code> \u542f\u52a8\u4e00\u4e2a\u4f5c\u4e1a\uff0c\u8be5\u4f5c\u4e1a\u5bf9\u5f53\u524d\u56fe\u7a7a\u95f4\u8fdb\u884c\u7edf\u8ba1\u3002\u4f5c\u4e1a\u5b8c\u6210\u540e\uff0c\u7528\u6237\u53ef\u4ee5\u4f7f\u7528<code>SHOW STATS</code>\u8bed\u53e5\u5217\u51fa\u7edf\u8ba1\u7ed3\u679c\u3002 <code>SHOW JOB &lt;job_id&gt;</code> \u663e\u793a\u5f53\u524d\u56fe\u7a7a\u95f4\u5185\u6307\u5b9a\u4f5c\u4e1a\u548c\u76f8\u5173\u4efb\u52a1\u7684\u4fe1\u606f\u3002Meta \u670d\u52a1\u5c06<code>SUBMIT JOB</code>\u8bf7\u6c42\u89e3\u6790\u4e3a\u591a\u4e2a\u4efb\u52a1\uff0c\u7136\u540e\u5206\u914d\u7ed9\u8fdb\u7a0b nebula-storaged\u3002 <code>SHOW JOBS</code> \u5217\u51fa\u5f53\u524d\u56fe\u7a7a\u95f4\u5185\u6240\u6709\u672a\u8fc7\u671f\u7684\u4f5c\u4e1a\u3002 <code>STOP JOB</code> \u505c\u6b62\u5f53\u524d\u56fe\u7a7a\u95f4\u5185\u672a\u5b8c\u6210\u7684\u4f5c\u4e1a\u3002 <code>RECOVER JOB</code> \u91cd\u65b0\u6267\u884c\u5f53\u524d\u56fe\u7a7a\u95f4\u5185\u5931\u8d25\u7684\u4f5c\u4e1a\uff0c\u5e76\u8fd4\u56de\u5df2\u6062\u590d\u7684\u4f5c\u4e1a\u6570\u91cf\u3002 </li> </ul> <ul> <li> <p>\u7ec8\u6b62\u67e5\u8be2</p> \u8bed\u6cd5 \u793a\u4f8b \u8bf4\u660e <code>KILL QUERY (session=&lt;session_id&gt;, plan=&lt;plan_id&gt;)</code> <code>KILL QUERY(SESSION=1625553545984255,PLAN=163)</code> \u5728\u4e00\u4e2a\u4f1a\u8bdd\u4e2d\u6267\u884c\u547d\u4ee4\u7ec8\u6b62\u53e6\u4e00\u4e2a\u4f1a\u8bdd\u4e2d\u7684\u67e5\u8be2\u3002 </li> </ul> <ul> <li> <p>\u7ec8\u6b62\u4f1a\u8bdd</p> \u8bed\u6cd5 \u793a\u4f8b \u8bf4\u660e <code>KILL {SESSION|SESSIONS} &lt;SessionId&gt;</code> <code>KILL SESSION 1672887983842984</code> \u7ec8\u6b62\u5355\u4e2a\u4f1a\u8bdd\u3002 <code>SHOW SESSIONS | YIELD $-.SessionId AS sid [WHERE &lt;filter_clause&gt;] | KILL {SESSION|SESSIONS} $-.sid</code> <code>SHOW SESSIONS | YIELD $-.SessionId AS sid, $-.CreateTime as CreateTime | ORDER BY $-.CreateTime ASC | LIMIT 2 | KILL SESSIONS $-.sid</code> \u7ec8\u6b62\u591a\u4e2a\u4f1a\u8bdd\u3002 <code>SHOW SESSIONS | KILL SESSIONS $-.SessionId</code> <code>SHOW SESSIONS | KILL SESSIONS $-.SessionId</code> \u7ec8\u6b62\u6240\u6709\u4f1a\u8bdd\u3002 </li> </ul>"},{"location":"2.quick-start/3.quick-start-on-premise/2.install-nebula-graph/","title":"\u5b89\u88c5 NebulaGraph","text":"<p>RPM \u548c DEB \u662f Linux \u7cfb\u7edf\u4e0b\u5e38\u89c1\u7684\u4e24\u79cd\u5b89\u88c5\u5305\u683c\u5f0f\uff0c\u672c\u6587\u4ecb\u7ecd\u5982\u4f55\u4f7f\u7528 RPM \u6216 DEB \u6587\u4ef6\u5728\u4e00\u53f0\u673a\u5668\u4e0a\u5feb\u901f\u5b89\u88c5 NebulaGraph \u3002</p> <p>Note</p> <p>\u90e8\u7f72 NebulaGraph \u96c6\u7fa4\u7684\u65b9\u5f0f\u53c2\u89c1\u4f7f\u7528 RPM/DEB \u5305\u90e8\u7f72\u96c6\u7fa4\u3002</p>"},{"location":"2.quick-start/3.quick-start-on-premise/2.install-nebula-graph/#_1","title":"\u524d\u63d0\u6761\u4ef6","text":"<ul> <li>\u5b89\u88c5<code>wget</code>\u5de5\u5177\u3002</li> </ul>"},{"location":"2.quick-start/3.quick-start-on-premise/2.install-nebula-graph/#_2","title":"\u4e0b\u8f7d\u5b89\u88c5\u5305","text":"<p>Note</p> <ul> <li>\u5f53\u524d\u4ec5\u652f\u6301\u5728 Linux \u7cfb\u7edf\u4e0b\u5b89\u88c5 NebulaGraph\uff0c\u4e14\u4ec5\u652f\u6301 CentOS 7.x\u3001CentOS 8.x\u3001Ubuntu 16.04\u3001Ubuntu 18.04\u3001Ubuntu 20.04 \u64cd\u4f5c\u7cfb\u7edf\u3002</li> </ul> <ul> <li>\u5982\u679c\u7528\u6237\u4f7f\u7528\u7684\u662f\u56fd\u4ea7\u5316\u7684 Linux \u64cd\u4f5c\u7cfb\u7edf\uff0c\u8bf7\u5b89\u88c5\u4f01\u4e1a\u7248 NebulaGraph \u3002  </li> </ul>"},{"location":"2.quick-start/3.quick-start-on-premise/2.install-nebula-graph/#oss","title":"\u963f\u91cc\u4e91 OSS \u4e0b\u8f7d","text":"<ul> <li>\u4e0b\u8f7d release \u7248\u672c<p>URL \u683c\u5f0f\u5982\u4e0b\uff1a</p> <pre><code>//Centos 7\nhttps://oss-cdn.nebula-graph.com.cn/package/&lt;release_version&gt;/nebula-graph-&lt;release_version&gt;.el7.x86_64.rpm\n\n//Centos 8\nhttps://oss-cdn.nebula-graph.com.cn/package/&lt;release_version&gt;/nebula-graph-&lt;release_version&gt;.el8.x86_64.rpm\n\n//Ubuntu 1604\nhttps://oss-cdn.nebula-graph.com.cn/package/&lt;release_version&gt;/nebula-graph-&lt;release_version&gt;.ubuntu1604.amd64.deb\n\n//Ubuntu 1804\nhttps://oss-cdn.nebula-graph.com.cn/package/&lt;release_version&gt;/nebula-graph-&lt;release_version&gt;.ubuntu1804.amd64.deb\n\n//Ubuntu 2004\nhttps://oss-cdn.nebula-graph.com.cn/package/&lt;release_version&gt;/nebula-graph-&lt;release_version&gt;.ubuntu2004.amd64.deb\n</code></pre> <p>\u4f8b\u5982\u8981\u4e0b\u8f7d\u9002\u7528\u4e8e<code>Centos 7.5</code>\u7684<code>master</code>\u5b89\u88c5\u5305\uff1a</p> <pre><code>wget https://oss-cdn.nebula-graph.com.cn/package/master/nebula-graph-master.el7.x86_64.rpm\nwget https://oss-cdn.nebula-graph.com.cn/package/master/nebula-graph-master.el7.x86_64.rpm.sha256sum.txt\n</code></pre> <p>\u4e0b\u8f7d\u9002\u7528\u4e8e<code>ubuntu 1804</code>\u7684<code>master</code>\u5b89\u88c5\u5305\uff1a   <pre><code>wget https://oss-cdn.nebula-graph.com.cn/package/master/nebula-graph-master.ubuntu1804.amd64.deb\nwget https://oss-cdn.nebula-graph.com.cn/package/master/nebula-graph-master.ubuntu1804.amd64.deb.sha256sum.txt\n</code></pre></p> </li> </ul> <ul> <li> <p>\u4e0b\u8f7d\u65e5\u5e38\u5f00\u53d1\u7248\u672c (nightly)</p> <p>Danger</p> <ul> <li>nightly \u7248\u672c\u901a\u5e38\u7528\u4e8e\u6d4b\u8bd5\u65b0\u529f\u80fd\u3001\u65b0\u7279\u6027\uff0c\u8bf7\u4e0d\u8981\u5728\u751f\u4ea7\u73af\u5883\u4e2d\u4f7f\u7528 nightly \u7248\u672c\u3002</li> <li>nightly \u7248\u672c\u4e0d\u4fdd\u8bc1\u6bcf\u65e5\u90fd\u80fd\u5b8c\u6574\u53d1\u5e03\uff0c\u4e5f\u4e0d\u4fdd\u8bc1\u662f\u5426\u4f1a\u66f4\u6539\u6587\u4ef6\u540d\u3002</li> </ul> <p>URL \u683c\u5f0f\u5982\u4e0b\uff1a</p> <pre><code>//Centos 7\nhttps://oss-cdn.nebula-graph.com.cn/package/nightly/&lt;yyyy.mm.dd&gt;/nebula-graph-&lt;yyyy.mm.dd&gt;-nightly.el7.x86_64.rpm\n\n//Centos 8\nhttps://oss-cdn.nebula-graph.com.cn/package/nightly/&lt;yyyy.mm.dd&gt;/nebula-graph-&lt;yyyy.mm.dd&gt;-nightly.el8.x86_64.rpm\n\n//Ubuntu 1604\nhttps://oss-cdn.nebula-graph.com.cn/package/nightly/&lt;yyyy.mm.dd&gt;/nebula-graph-&lt;yyyy.mm.dd&gt;-nightly.ubuntu1604.amd64.deb\n\n//Ubuntu 1804\nhttps://oss-cdn.nebula-graph.com.cn/package/nightly/&lt;yyyy.mm.dd&gt;/nebula-graph-&lt;yyyy.mm.dd&gt;-nightly.ubuntu1804.amd64.deb\n\n//Ubuntu 2004\nhttps://oss-cdn.nebula-graph.com.cn/package/nightly/&lt;yyyy.mm.dd&gt;/nebula-graph-&lt;yyyy.mm.dd&gt;-nightly.ubuntu2004.amd64.deb\n</code></pre> <p>\u4f8b\u5982\u8981\u4e0b\u8f7d<code>2021.11.24</code>\u9002\u7528\u4e8e<code>Centos 7.5</code>\u7684<code>2.x</code>\u5b89\u88c5\u5305\uff1a</p> <pre><code>wget https://oss-cdn.nebula-graph.com.cn/package/nightly/2021.11.24/nebula-graph-2021.11.24-nightly.el7.x86_64.rpm\nwget https://oss-cdn.nebula-graph.com.cn/package/nightly/2021.11.24/nebula-graph-2021.11.24-nightly.el7.x86_64.rpm.sha256sum.txt\n</code></pre> <p>\u8981\u4e0b\u8f7d<code>2021.11.24</code>\u9002\u7528\u4e8e<code>Ubuntu 1804</code>\u7684<code>2.x</code>\u5b89\u88c5\u5305\uff1a   <pre><code>wget https://oss-cdn.nebula-graph.com.cn/package/nightly/2021.11.24/nebula-graph-2021.11.24-nightly.ubuntu1804.amd64.deb\nwget https://oss-cdn.nebula-graph.com.cn/package/nightly/2021.11.24/nebula-graph-2021.11.24-nightly.ubuntu1804.amd64.deb.sha256sum.txt\n</code></pre></p> </li> </ul>"},{"location":"2.quick-start/3.quick-start-on-premise/2.install-nebula-graph/#nebulagraph_1","title":"\u5b89\u88c5 NebulaGraph","text":"<ul> <li> <p>\u5b89\u88c5 RPM \u5305</p> <pre><code>$ sudo rpm -ivh --prefix=&lt;installation_path&gt; &lt;package_name&gt;\n</code></pre> <p><code>--prefix</code>\u4e3a\u53ef\u9009\u9879\uff0c\u7528\u4e8e\u6307\u5b9a\u5b89\u88c5\u8def\u5f84\u3002\u5982\u4e0d\u8bbe\u7f6e\uff0c\u7cfb\u7edf\u4f1a\u5c06 NebulaGraph \u5b89\u88c5\u5230\u9ed8\u8ba4\u8def\u5f84<code>/usr/local/nebula/</code>\u3002</p> <p>\u4f8b\u5982\uff0c\u8981\u5728\u9ed8\u8ba4\u8def\u5f84\u4e0b\u5b89\u88c5master\u7248\u672c\u7684 RPM \u5305\uff0c\u8fd0\u884c\u5982\u4e0b\u547d\u4ee4\uff1a</p> <pre><code>sudo rpm -ivh nebula-graph-master.el7.x86_64.rpm\n</code></pre> </li> </ul> <ul> <li> <p>\u5b89\u88c5 DEB \u5305</p> <pre><code>$ sudo dpkg -i &lt;package_name&gt;\n</code></pre> <p>Note</p> <p>\u4f7f\u7528 DEB \u5305\u5b89\u88c5 NebulaGraph \u65f6\u4e0d\u652f\u6301\u81ea\u5b9a\u4e49\u5b89\u88c5\u8def\u5f84\u3002\u9ed8\u8ba4\u5b89\u88c5\u8def\u5f84\u4e3a<code>/usr/local/nebula/</code>\u3002</p> <p>\u4f8b\u5982\u5b89\u88c5master\u7248\u672c\u7684 DEB \u5305\uff1a</p> <pre><code>sudo dpkg -i nebula-graph-master.ubuntu1804.amd64.deb\n</code></pre> </li> </ul>"},{"location":"2.quick-start/3.quick-start-on-premise/2.install-nebula-graph/#_3","title":"\u540e\u7eed\u64cd\u4f5c","text":"<ul> <li>\u542f\u52a8 NebulaGraph </li> <li>\u8fde\u63a5 NebulaGraph </li> </ul>"},{"location":"2.quick-start/3.quick-start-on-premise/3.1add-storage-hosts/","title":"\u6ce8\u518c Storage \u670d\u52a1","text":"<p>\u9996\u6b21\u8fde\u63a5\u5230 NebulaGraph \u540e\uff0c\u9700\u8981\u5148\u6dfb\u52a0 Storage \u4e3b\u673a\uff0c\u5e76\u786e\u8ba4\u4e3b\u673a\u90fd\u5904\u4e8e\u5728\u7ebf\u72b6\u6001\u3002</p> <p>\u5386\u53f2\u7248\u672c\u517c\u5bb9\u6027</p> <p>\u4ece NebulaGraph 3.0.0 \u7248\u672c\u5f00\u59cb\uff0c\u5fc5\u987b\u5148\u4f7f\u7528<code>ADD HOSTS</code>\u6dfb\u52a0\u4e3b\u673a\uff0c\u624d\u80fd\u6b63\u5e38\u901a\u8fc7 Storage \u670d\u52a1\u8bfb\u5199\u6570\u636e\u3002</p>"},{"location":"2.quick-start/3.quick-start-on-premise/3.1add-storage-hosts/#_1","title":"\u524d\u63d0\u6761\u4ef6","text":"<p>\u5df2\u8fde\u63a5 NebulaGraph \u670d\u52a1\u3002</p>"},{"location":"2.quick-start/3.quick-start-on-premise/3.1add-storage-hosts/#_2","title":"\u64cd\u4f5c\u6b65\u9aa4","text":"<ol> <li> <p>\u6dfb\u52a0 Storage \u4e3b\u673a\u3002</p> <p>\u6267\u884c\u5982\u4e0b\u547d\u4ee4\u6dfb\u52a0\u4e3b\u673a\uff1a</p> <pre><code>ADD HOSTS &lt;ip&gt;:&lt;port&gt; [,&lt;ip&gt;:&lt;port&gt; ...];\n</code></pre> <p>\u793a\u4f8b\uff1a</p> <pre><code>nebula&gt; ADD HOSTS 192.168.10.100:9779, 192.168.10.101:9779, 192.168.10.102:9779;\n</code></pre> <p>Caution</p> <p>\u8bf7\u786e\u4fdd\u6dfb\u52a0\u7684\u4e3b\u673a IP \u548c\u914d\u7f6e\u6587\u4ef6<code>nebula-storaged.conf</code>\u4e2d<code>local_ip</code>\u914d\u7f6e\u7684 IP \u4e00\u81f4\uff0c\u5426\u5219\u4f1a\u5bfc\u81f4\u6dfb\u52a0 Storage \u4e3b\u673a\u5931\u8d25\u3002\u5173\u4e8e\u914d\u7f6e\u6587\u4ef6\u7684\u8be6\u60c5\uff0c\u53c2\u89c1\u914d\u7f6e\u7ba1\u7406\u3002 </p> </li> <li> <p>\u68c0\u67e5\u4e3b\u673a\u72b6\u6001\uff0c\u786e\u8ba4\u5168\u90e8\u5728\u7ebf\u3002</p> <pre><code>nebula&gt; SHOW HOSTS;\n+------------------+------+----------+--------------+----------------------  +------------------------+---------+\n| Host             | Port | Status   | Leader count | Leader distribution  |   Partition distribution | Version |\n+------------------+------+----------+--------------+----------------------  +------------------------+---------+\n| \"192.168.10.100\" | 9779 | \"ONLINE\" | 0            | \"No valid partition\" | \"No   valid partition\"   | \"master\" |\n| \"192.168.10.101\" | 9779 | \"ONLINE\" | 0            | \"No valid partition\" | \"No   valid partition\"   | \"master\" |\n| \"192.168.10.102\" | 9779 | \"ONLINE\" | 0            | \"No valid partition\" | \"No   valid partition\"   | \"master\" |\n+------------------+------+----------+--------------+----------------------  +------------------------+---------+\n</code></pre> <p>\u5728\u8fd4\u56de\u7ed3\u679c\u7684 Status \u5217\uff0c\u53ef\u4ee5\u770b\u5230\u6240\u6709 Storage \u4e3b\u673a\u90fd\u5728\u7ebf\u3002</p> </li> </ol>"},{"location":"2.quick-start/3.quick-start-on-premise/3.connect-to-nebula-graph/","title":"\u8fde\u63a5 NebulaGraph","text":"<p>\u672c\u6587\u4ecb\u7ecd\u5982\u4f55\u4f7f\u7528\u539f\u751f\u547d\u4ee4\u884c\u5ba2\u6237\u7aef NebulaGraph Console \u8fde\u63a5 NebulaGraph \u3002</p> <p>Caution</p> <p>\u9996\u6b21\u8fde\u63a5\u5230 NebulaGraph \u540e\uff0c\u5fc5\u987b\u5148\u6ce8\u518c Storage \u670d\u52a1\uff0c\u624d\u80fd\u6b63\u5e38\u67e5\u8be2\u6570\u636e\u3002</p> <p>NebulaGraph \u652f\u6301\u591a\u79cd\u7c7b\u578b\u7684\u5ba2\u6237\u7aef\uff0c\u5305\u62ec\u547d\u4ee4\u884c\u5ba2\u6237\u7aef\u3001\u53ef\u89c6\u5316\u754c\u9762\u5ba2\u6237\u7aef\u548c\u6d41\u884c\u7f16\u7a0b\u8bed\u8a00\u5ba2\u6237\u7aef\u3002\u8be6\u60c5\u53c2\u89c1\u5ba2\u6237\u7aef\u5217\u8868\u3002</p>"},{"location":"2.quick-start/3.quick-start-on-premise/3.connect-to-nebula-graph/#_1","title":"\u524d\u63d0\u6761\u4ef6","text":"<ul> <li>NebulaGraph \u670d\u52a1\u5df2\u542f\u52a8\u3002</li> </ul> <ul> <li>\u8fd0\u884c NebulaGraph Console \u7684\u673a\u5668\u548c\u8fd0\u884c NebulaGraph \u7684\u670d\u52a1\u5668\u7f51\u7edc\u4e92\u901a\u3002</li> </ul> <ul> <li> <p>NebulaGraph Console \u7684\u7248\u672c\u517c\u5bb9 NebulaGraph \u7684\u7248\u672c\u3002</p> <p>Note</p> <p>\u7248\u672c\u76f8\u540c\u7684 NebulaGraph Console \u548c NebulaGraph \u517c\u5bb9\u7a0b\u5ea6\u6700\u9ad8\uff0c\u7248\u672c\u4e0d\u540c\u7684 NebulaGraph Console \u8fde\u63a5 NebulaGraph \u65f6\uff0c\u53ef\u80fd\u4f1a\u6709\u517c\u5bb9\u95ee\u9898\uff0c\u6216\u8005\u65e0\u6cd5\u8fde\u63a5\u5e76\u62a5\u9519<code>incompatible version between client and server</code>\u3002</p> </li> </ul>"},{"location":"2.quick-start/3.quick-start-on-premise/3.connect-to-nebula-graph/#_2","title":"\u64cd\u4f5c\u6b65\u9aa4","text":"<ol> <li> <p>\u5728 NebulaGraph Console \u4e0b\u8f7d\u9875\u9762\uff0c\u786e\u8ba4\u9700\u8981\u7684\u7248\u672c\uff0c\u5355\u51fb Assets\u3002</p> <p>Note</p> <p>\u5efa\u8bae\u9009\u62e9\u6700\u65b0\u7248\u672c\u3002</p> </li> <li> <p>\u5728 Assets \u533a\u57df\u627e\u5230\u673a\u5668\u8fd0\u884c\u6240\u9700\u7684\u4e8c\u8fdb\u5236\u6587\u4ef6\uff0c\u4e0b\u8f7d\u6587\u4ef6\u5230\u673a\u5668\u4e0a\u3002</p> </li> <li> <p>\uff08\u53ef\u9009\uff09\u4e3a\u65b9\u4fbf\u4f7f\u7528\uff0c\u91cd\u547d\u540d\u6587\u4ef6\u4e3a<code>nebula-console</code>\u3002</p> <p>Note</p> <p>\u5728 Windows \u7cfb\u7edf\u4e2d\uff0c\u8bf7\u91cd\u547d\u540d\u4e3a<code>nebula-console.exe</code>\u3002</p> </li> <li> <p>\u5728\u8fd0\u884c NebulaGraph Console \u7684\u673a\u5668\u4e0a\u6267\u884c\u5982\u4e0b\u547d\u4ee4\uff0c\u4e3a\u7528\u6237\u6388\u4e88 nebula-console \u6587\u4ef6\u7684\u6267\u884c\u6743\u9650\u3002</p> <p>Note</p> <p>Windows \u7cfb\u7edf\u8bf7\u8df3\u8fc7\u6b64\u6b65\u9aa4\u3002</p> <pre><code>$ chmod 111 nebula-console\n</code></pre> </li> <li> <p>\u5728\u547d\u4ee4\u884c\u754c\u9762\u4e2d\uff0c\u5207\u6362\u5de5\u4f5c\u76ee\u5f55\u81f3 nebula-console \u6587\u4ef6\u6240\u5728\u76ee\u5f55\u3002</p> </li> <li> <p>\u6267\u884c\u5982\u4e0b\u547d\u4ee4\u8fde\u63a5 NebulaGraph \u3002</p> <ul> <li> <p>Linux \u6216 macOS</p> <pre><code>$ ./nebula-console -addr &lt;ip&gt; -port &lt;port&gt; -u &lt;username&gt; -p &lt;password&gt;\n  [-t 120] [-e \"nGQL_statement\" | -f filename.nGQL]\n</code></pre> </li> </ul> <ul> <li> <p>Windows</p> <pre><code>&gt; nebula-console.exe -addr &lt;ip&gt; -port &lt;port&gt; -u &lt;username&gt; -p &lt;password&gt;\n  [-t 120] [-e \"nGQL_statement\" | -f filename.nGQL]\n</code></pre> </li> </ul> <p>\u53c2\u6570\u8bf4\u660e\u5982\u4e0b\u3002</p> \u53c2\u6570 \u8bf4\u660e <code>-h/-help</code> \u663e\u793a\u5e2e\u52a9\u83dc\u5355\u3002 <code>-addr/-address</code> \u8bbe\u7f6e\u8981\u8fde\u63a5\u7684 Graph \u670d\u52a1\u7684 IP \u6216\u4e3b\u673a\u540d\u3002\u9ed8\u8ba4\u5730\u5740\u4e3a 127.0.0.1\u3002 <code>-P/-port</code> \u8bbe\u7f6e\u8981\u8fde\u63a5\u7684 Graph \u670d\u52a1\u7684\u7aef\u53e3\u3002\u9ed8\u8ba4\u7aef\u53e3\u4e3a 9669\u3002 <code>-u/-user</code> \u8bbe\u7f6e NebulaGraph \u8d26\u53f7\u7684\u7528\u6237\u540d\u3002\u672a\u542f\u7528\u8eab\u4efd\u8ba4\u8bc1\u65f6\uff0c\u53ef\u4ee5\u4f7f\u7528\u4efb\u610f\u5df2\u5b58\u5728\u7684\u7528\u6237\u540d\uff08\u9ed8\u8ba4\u4e3a<code>root</code>\uff09\u3002 <code>-p/-password</code> \u8bbe\u7f6e\u7528\u6237\u540d\u5bf9\u5e94\u7684\u5bc6\u7801\u3002\u672a\u542f\u7528\u8eab\u4efd\u8ba4\u8bc1\u65f6\uff0c\u5bc6\u7801\u53ef\u4ee5\u586b\u5199\u4efb\u610f\u5b57\u7b26\u3002 <code>-t/-timeout</code> \u8bbe\u7f6e\u6574\u6570\u7c7b\u578b\u7684\u8fde\u63a5\u8d85\u65f6\u65f6\u95f4\u3002\u5355\u4f4d\u4e3a\u6beb\u79d2\uff0c\u9ed8\u8ba4\u503c\u4e3a 120\u3002 <code>-e/-eval</code> \u8bbe\u7f6e\u5b57\u7b26\u4e32\u7c7b\u578b\u7684 nGQL \u8bed\u53e5\u3002\u8fde\u63a5\u6210\u529f\u540e\u4f1a\u6267\u884c\u4e00\u6b21\u8be5\u8bed\u53e5\u5e76\u8fd4\u56de\u7ed3\u679c\uff0c\u7136\u540e\u81ea\u52a8\u65ad\u5f00\u8fde\u63a5\u3002 <code>-f/-file</code> \u8bbe\u7f6e\u5b58\u50a8 nGQL \u8bed\u53e5\u7684\u6587\u4ef6\u7684\u8def\u5f84\u3002\u8fde\u63a5\u6210\u529f\u540e\u4f1a\u6267\u884c\u8be5\u6587\u4ef6\u5185\u7684 nGQL \u8bed\u53e5\u5e76\u8fd4\u56de\u7ed3\u679c\uff0c\u6267\u884c\u5b8c\u6bd5\u540e\u81ea\u52a8\u65ad\u5f00\u8fde\u63a5\u3002 <code>-enable_ssl</code> \u8fde\u63a5 NebulaGraph \u65f6\u4f7f\u7528 SSL \u52a0\u5bc6\u3002 <code>-ssl_root_ca_path</code> \u6307\u5b9a CA \u8bc1\u4e66\u7684\u5b58\u50a8\u8def\u5f84\u3002 <code>-ssl_cert_path</code> \u6307\u5b9a CRT \u8bc1\u4e66\u7684\u5b58\u50a8\u8def\u5f84\u3002 <code>-ssl_private_key_path</code> \u6307\u5b9a\u79c1\u94a5\u6587\u4ef6\u7684\u5b58\u50a8\u8def\u5f84\u3002 <p>\u66f4\u591a\u53c2\u6570\u53c2\u89c1\u9879\u76ee\u4ed3\u5e93\u3002</p> </li> </ol>"},{"location":"2.quick-start/3.quick-start-on-premise/4.nebula-graph-crud/","title":"\u4f7f\u7528\u5e38\u7528 nGQL\uff08CRUD \u547d\u4ee4\uff09","text":"<p>\u672c\u6587\u4ecb\u7ecd NebulaGraph \u67e5\u8be2\u8bed\u8a00\u7684\u57fa\u7840\u8bed\u6cd5\uff0c\u5305\u62ec\u7528\u4e8e Schema \u521b\u5efa\u548c\u5e38\u7528\u589e\u5220\u6539\u67e5\u64cd\u4f5c\u7684\u8bed\u53e5\u3002</p> <p>\u5982\u9700\u4e86\u89e3\u66f4\u591a\u8bed\u53e5\u7684\u7528\u6cd5\uff0c\u53c2\u89c1 nGQL \u6307\u5357\u3002</p>"},{"location":"2.quick-start/3.quick-start-on-premise/4.nebula-graph-crud/#_1","title":"\u4f7f\u7528\u8bf4\u660e","text":""},{"location":"2.quick-start/3.quick-start-on-premise/4.nebula-graph-crud/#schema","title":"\u56fe\u7a7a\u95f4\u548c Schema","text":"<p>\u4e00\u4e2a NebulaGraph \u5b9e\u4f8b\u7531\u4e00\u4e2a\u6216\u591a\u4e2a\u56fe\u7a7a\u95f4\u7ec4\u6210\u3002\u6bcf\u4e2a\u56fe\u7a7a\u95f4\u90fd\u662f\u7269\u7406\u9694\u79bb\u7684\uff0c\u7528\u6237\u53ef\u4ee5\u5728\u540c\u4e00\u4e2a\u5b9e\u4f8b\u4e2d\u4f7f\u7528\u4e0d\u540c\u7684\u56fe\u7a7a\u95f4\u5b58\u50a8\u4e0d\u540c\u7684\u6570\u636e\u96c6\u3002</p> <p></p> <p>\u4e3a\u4e86\u5728\u56fe\u7a7a\u95f4\u4e2d\u63d2\u5165\u6570\u636e\uff0c\u9700\u8981\u4e3a\u56fe\u6570\u636e\u5e93\u5b9a\u4e49\u4e00\u4e2a Schema\u3002 NebulaGraph \u7684 Schema \u662f\u7531\u5982\u4e0b\u51e0\u90e8\u5206\u7ec4\u6210\u3002</p> \u7ec4\u6210\u90e8\u5206 \u8bf4\u660e \u70b9\uff08Vertex\uff09 \u8868\u793a\u73b0\u5b9e\u4e16\u754c\u4e2d\u7684\u5b9e\u4f53\u3002\u4e00\u4e2a\u70b9\u53ef\u4ee5\u6709 0 \u5230\u591a\u4e2a\u6807\u7b7e\u3002 \u6807\u7b7e\uff08Tag\uff09 \u70b9\u7684\u7c7b\u578b\uff0c\u5b9a\u4e49\u4e86\u4e00\u7ec4\u63cf\u8ff0\u70b9\u7c7b\u578b\u7684\u5c5e\u6027\u3002 \u8fb9\uff08Edge\uff09 \u8868\u793a\u4e24\u4e2a\u70b9\u4e4b\u95f4\u6709\u65b9\u5411\u7684\u5173\u7cfb\u3002 \u8fb9\u7c7b\u578b\uff08Edge type\uff09 \u8fb9\u7684\u7c7b\u578b\uff0c\u5b9a\u4e49\u4e86\u4e00\u7ec4\u63cf\u8ff0\u8fb9\u7684\u7c7b\u578b\u7684\u5c5e\u6027\u3002 <p>\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u89c1\u6570\u636e\u7ed3\u6784\u3002</p> <p>\u672c\u6587\u5c06\u4f7f\u7528\u4e0b\u56fe\u7684\u6570\u636e\u96c6\u6f14\u793a\u57fa\u7840\u64cd\u4f5c\u7684\u8bed\u6cd5\u3002</p> <p></p>"},{"location":"2.quick-start/3.quick-start-on-premise/4.nebula-graph-crud/#_2","title":"\u5f02\u6b65\u5b9e\u73b0\u521b\u5efa\u548c\u4fee\u6539","text":"<p>Caution</p> <p>\u5728 NebulaGraph \u4e2d\uff0c\u4e0b\u5217\u521b\u5efa\u548c\u4fee\u6539\u64cd\u4f5c\u662f\u5f02\u6b65\u5b9e\u73b0\u7684\u3002\u8981\u5728\u4e0b\u4e00\u4e2a\u5fc3\u8df3\u5468\u671f\u4e4b\u540e\u624d\u80fd\u751f\u6548\uff0c\u5426\u5219\u8bbf\u95ee\u4f1a\u62a5\u9519\u3002\u4e3a\u786e\u4fdd\u6570\u636e\u540c\u6b65\uff0c\u540e\u7eed\u64cd\u4f5c\u80fd\u987a\u5229\u8fdb\u884c\uff0c\u8bf7\u7b49\u5f85 2 \u4e2a\u5fc3\u8df3\u5468\u671f\uff0820 \u79d2\uff09\u3002</p> <ul> <li><code>CREATE SPACE</code></li> <li><code>CREATE TAG</code></li> <li><code>CREATE EDGE</code></li> <li><code>ALTER TAG</code></li> <li><code>ALTER EDGE</code></li> <li><code>CREATE TAG INDEX</code></li> <li><code>CREATE EDGE INDEX</code></li> </ul> <p>Note</p> <p>\u9ed8\u8ba4\u5fc3\u8df3\u5468\u671f\u662f 10 \u79d2\u3002\u4fee\u6539\u5fc3\u8df3\u5468\u671f\u53c2\u6570<code>heartbeat_interval_secs</code>\uff0c\u8bf7\u53c2\u89c1\u914d\u7f6e\u7b80\u4ecb\u3002</p>"},{"location":"2.quick-start/3.quick-start-on-premise/4.nebula-graph-crud/#_3","title":"\u7b2c\u4e00\u6b65\uff1a\u521b\u5efa\u548c\u9009\u62e9\u56fe\u7a7a\u95f4","text":""},{"location":"2.quick-start/3.quick-start-on-premise/4.nebula-graph-crud/#ngql","title":"nGQL \u8bed\u6cd5","text":"<ul> <li>\u521b\u5efa\u56fe\u7a7a\u95f4<pre><code>CREATE SPACE [IF NOT EXISTS] &lt;graph_space_name&gt; (\n[partition_num = &lt;partition_number&gt;,]\n[replica_factor = &lt;replica_number&gt;,]\nvid_type = {FIXED_STRING(&lt;N&gt;) | INT64}\n)\n\n[COMMENT = '&lt;comment&gt;'];\n</code></pre> <p>\u53c2\u6570\u8be6\u60c5\u8bf7\u53c2\u89c1 CREATE SPACE\u3002</p> </li> </ul> <ul> <li>\u5217\u51fa\u521b\u5efa\u6210\u529f\u7684\u56fe\u7a7a\u95f4<pre><code>nebula&gt; SHOW SPACES;\n</code></pre> </li> </ul> <ul> <li>\u9009\u62e9\u5df2\u521b\u5efa\u7684\u56fe\u7a7a\u95f4<pre><code>USE &lt;graph_space_name&gt;;\n</code></pre> </li> </ul>"},{"location":"2.quick-start/3.quick-start-on-premise/4.nebula-graph-crud/#_4","title":"\u793a\u4f8b","text":"<ol> <li> <p>\u6267\u884c\u5982\u4e0b\u8bed\u53e5\u521b\u5efa\u540d\u4e3a<code>basketballplayer</code>\u7684\u56fe\u7a7a\u95f4\u3002</p> <pre><code>nebula&gt; CREATE SPACE basketballplayer(partition_num=15, replica_factor=1, vid_type=fixed_string(30));\n</code></pre> <p>Note</p> <p>\u5982\u679c\u62a5\u9519\u63d0\u793a<code>[ERROR (-1005)]: Host not enough!</code>\uff0c\u8bf7\u68c0\u67e5\u662f\u5426\u5df2\u6dfb\u52a0 Storage \u4e3b\u673a\u3002</p> </li> <li> <p>\u6267\u884c\u547d\u4ee4<code>SHOW HOSTS</code>\u68c0\u67e5\u5206\u7247\u7684\u5206\u5e03\u60c5\u51b5\uff0c\u786e\u4fdd\u5e73\u8861\u5206\u5e03\u3002</p> <pre><code>nebula&gt; SHOW HOSTS;\n+-------------+-----------+-----------+--------------+----------------------------------+------------------------+---------+\n| Host        | Port      | Status    | Leader count | Leader distribution              | Partition distribution | Version |\n+-------------+-----------+-----------+--------------+----------------------------------+------------------------+---------+\n| \"storaged0\" | 9779      | \"ONLINE\"  | 5            | \"basketballplayer:5\"             | \"basketballplayer:5\"   | \"master\" |\n| \"storaged1\" | 9779      | \"ONLINE\"  | 5            | \"basketballplayer:5\"             | \"basketballplayer:5\"   | \"master\" |\n| \"storaged2\" | 9779      | \"ONLINE\"  | 5            | \"basketballplayer:5\"             | \"basketballplayer:5\"   | \"master\" |\n+-------------+-----------+-----------+--------------+----------------------------------+------------------------+---------+\n</code></pre> <p>\u5982\u679c Leader distribution \u5206\u5e03\u4e0d\u5747\u5300\uff0c\u8bf7\u6267\u884c\u547d\u4ee4<code>BALANCE LEADER</code>\u91cd\u65b0\u5206\u914d\u3002\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u89c1 Storage \u8d1f\u8f7d\u5747\u8861\u3002</p> </li> <li> <p>\u9009\u62e9\u56fe\u7a7a\u95f4<code>basketballplayer</code>\u3002</p> <pre><code>nebula[(none)]&gt; USE basketballplayer;\n</code></pre> <p>\u7528\u6237\u53ef\u4ee5\u6267\u884c\u547d\u4ee4<code>SHOW SPACES</code>\u67e5\u770b\u521b\u5efa\u7684\u56fe\u7a7a\u95f4\u3002</p> <pre><code>nebula&gt; SHOW SPACES;\n+--------------------+\n| Name               |\n+--------------------+\n| \"basketballplayer\" |\n+--------------------+\n</code></pre> </li> </ol>"},{"location":"2.quick-start/3.quick-start-on-premise/4.nebula-graph-crud/#tag_edge_type","title":"\u7b2c\u4e8c\u6b65\uff1a\u521b\u5efa Tag \u548c Edge type","text":""},{"location":"2.quick-start/3.quick-start-on-premise/4.nebula-graph-crud/#ngql_1","title":"nGQL \u8bed\u6cd5","text":"<pre><code>CREATE {TAG | EDGE} [IF NOT EXISTS] {&lt;tag_name&gt; | &lt;edge_type_name&gt;}\n    (\n      &lt;prop_name&gt; &lt;data_type&gt; [NULL | NOT NULL] [DEFAULT &lt;default_value&gt;] [COMMENT '&lt;comment&gt;']\n      [{, &lt;prop_name&gt; &lt;data_type&gt; [NULL | NOT NULL] [DEFAULT &lt;default_value&gt;] [COMMENT '&lt;comment&gt;']} ...] \n    )\n    [TTL_DURATION = &lt;ttl_duration&gt;]\n    [TTL_COL = &lt;prop_name&gt;]\n    [COMMENT = '&lt;comment&gt;'];\n</code></pre> <p>\u53c2\u6570\u8be6\u60c5\u8bf7\u53c2\u89c1 CREATE TAG \u548c CREATE EDGE\u3002</p>"},{"location":"2.quick-start/3.quick-start-on-premise/4.nebula-graph-crud/#_5","title":"\u793a\u4f8b","text":"<p>\u521b\u5efa Tag:<code>player</code>\u548c<code>team</code>\uff0c\u4ee5\u53ca Edge type:<code>follow</code>\u548c<code>serve</code>\u3002\u8bf4\u660e\u5982\u4e0b\u8868\u3002</p> \u540d\u79f0 \u7c7b\u578b \u5c5e\u6027 player Tag name (string), age (int) team Tag name (string) follow Edge type degree (int) serve Edge type start_year (int), end_year (int) <pre><code>nebula&gt; CREATE TAG player(name string, age int);\n\nnebula&gt; CREATE TAG team(name string);\n\nnebula&gt; CREATE EDGE follow(degree int);\n\nnebula&gt; CREATE EDGE serve(start_year int, end_year int);\n</code></pre>"},{"location":"2.quick-start/3.quick-start-on-premise/4.nebula-graph-crud/#_6","title":"\u7b2c\u4e09\u6b65\uff1a\u63d2\u5165\u6570\u636e","text":"<p>\u7528\u6237\u53ef\u4ee5\u4f7f\u7528<code>INSERT</code>\u8bed\u53e5\uff0c\u57fa\u4e8e\u73b0\u6709\u7684 Tag \u63d2\u5165\u70b9\uff0c\u6216\u8005\u57fa\u4e8e\u73b0\u6709\u7684 Edge type \u63d2\u5165\u8fb9\u3002</p>"},{"location":"2.quick-start/3.quick-start-on-premise/4.nebula-graph-crud/#ngql_2","title":"nGQL \u8bed\u6cd5","text":"<ul> <li>\u63d2\u5165\u70b9<pre><code>INSERT VERTEX [IF NOT EXISTS] [tag_props, [tag_props] ...]\nVALUES &lt;vid&gt;: ([prop_value_list])\n\ntag_props:\n  tag_name ([prop_name_list])\n\nprop_name_list:\n   [prop_name [, prop_name] ...]\n\nprop_value_list:\n   [prop_value [, prop_value] ...]  \n</code></pre> <p><code>vid</code>\u662f Vertex ID \u7684\u7f29\u5199\uff0c<code>vid</code>\u5728\u4e00\u4e2a\u56fe\u7a7a\u95f4\u4e2d\u662f\u552f\u4e00\u7684\u3002\u53c2\u6570\u8be6\u60c5\u8bf7\u53c2\u89c1 INSERT VERTEX\u3002</p> </li> </ul> <ul> <li>\u63d2\u5165\u8fb9<pre><code>INSERT EDGE [IF NOT EXISTS] &lt;edge_type&gt; ( &lt;prop_name_list&gt; ) VALUES \n&lt;src_vid&gt; -&gt; &lt;dst_vid&gt;[@&lt;rank&gt;] : ( &lt;prop_value_list&gt; )\n[, &lt;src_vid&gt; -&gt; &lt;dst_vid&gt;[@&lt;rank&gt;] : ( &lt;prop_value_list&gt; ), ...];\n\n&lt;prop_name_list&gt; ::=\n[ &lt;prop_name&gt; [, &lt;prop_name&gt; ] ...]\n\n&lt;prop_value_list&gt; ::=\n[ &lt;prop_value&gt; [, &lt;prop_value&gt; ] ...]\n</code></pre> <p>\u53c2\u6570\u8be6\u60c5\u8bf7\u53c2\u89c1 INSERT EDGE\u3002</p> </li> </ul>"},{"location":"2.quick-start/3.quick-start-on-premise/4.nebula-graph-crud/#_7","title":"\u793a\u4f8b","text":"<ul> <li>\u63d2\u5165\u4ee3\u8868\u7403\u5458\u548c\u7403\u961f\u7684\u70b9\u3002<pre><code>nebula&gt; INSERT VERTEX player(name, age) VALUES \"player100\":(\"Tim Duncan\", 42);\n\nnebula&gt; INSERT VERTEX player(name, age) VALUES \"player101\":(\"Tony Parker\", 36);\n\nnebula&gt; INSERT VERTEX player(name, age) VALUES \"player102\":(\"LaMarcus Aldridge\", 33);\n\nnebula&gt; INSERT VERTEX team(name) VALUES \"team203\":(\"Trail Blazers\"), \"team204\":(\"Spurs\");\n</code></pre> </li> </ul> <ul> <li>\u63d2\u5165\u4ee3\u8868\u7403\u5458\u548c\u7403\u961f\u4e4b\u95f4\u5173\u7cfb\u7684\u8fb9\u3002<pre><code>nebula&gt; INSERT EDGE follow(degree) VALUES \"player101\" -&gt; \"player100\":(95);\n\nnebula&gt; INSERT EDGE follow(degree) VALUES \"player101\" -&gt; \"player102\":(90);\n\nnebula&gt; INSERT EDGE follow(degree) VALUES \"player102\" -&gt; \"player100\":(75);\n\nnebula&gt; INSERT EDGE serve(start_year, end_year) VALUES \"player101\" -&gt; \"team204\":(1999, 2018),\"player102\" -&gt; \"team203\":(2006,  2015);\n</code></pre> </li> </ul>"},{"location":"2.quick-start/3.quick-start-on-premise/4.nebula-graph-crud/#_8","title":"\u7b2c\u56db\u6b65\uff1a\u67e5\u8be2\u6570\u636e","text":"<ul> <li>GO \u8bed\u53e5\u53ef\u4ee5\u6839\u636e\u6307\u5b9a\u7684\u6761\u4ef6\u904d\u5386\u6570\u636e\u5e93\u3002<code>GO</code>\u8bed\u53e5\u4ece\u4e00\u4e2a\u6216\u591a\u4e2a\u70b9\u5f00\u59cb\uff0c\u6cbf\u7740\u4e00\u6761\u6216\u591a\u6761\u8fb9\u904d\u5386\uff0c\u8fd4\u56de<code>YIELD</code>\u5b50\u53e5\u4e2d\u6307\u5b9a\u7684\u4fe1\u606f\u3002</li> </ul> <ul> <li>FETCH \u8bed\u53e5\u53ef\u4ee5\u83b7\u5f97\u70b9\u6216\u8fb9\u7684\u5c5e\u6027\u3002</li> </ul> <ul> <li>LOOKUP \u8bed\u53e5\u662f\u57fa\u4e8e\u7d22\u5f15\u7684\uff0c\u548c<code>WHERE</code>\u5b50\u53e5\u4e00\u8d77\u4f7f\u7528\uff0c\u67e5\u627e\u7b26\u5408\u7279\u5b9a\u6761\u4ef6\u7684\u6570\u636e\u3002</li> </ul> <ul> <li>MATCH \u8bed\u53e5\u662f\u67e5\u8be2\u56fe\u6570\u636e\u6700\u5e38\u7528\u7684\uff0c\u53ef\u4ee5\u7075\u6d3b\u7684\u63cf\u8ff0\u5404\u79cd\u56fe\u6a21\u5f0f\uff0c\u4f46\u662f\u5b83\u4f9d\u8d56\u7d22\u5f15\u53bb\u5339\u914d NebulaGraph \u4e2d\u7684\u6570\u636e\u6a21\u578b\uff0c\u6027\u80fd\u4e5f\u8fd8\u9700\u8981\u8c03\u4f18\u3002</li> </ul>"},{"location":"2.quick-start/3.quick-start-on-premise/4.nebula-graph-crud/#ngql_3","title":"nGQL \u8bed\u6cd5","text":"<ul> <li><code>GO</code><pre><code>GO [[&lt;M&gt; TO] &lt;N&gt; {STEP|STEPS}] FROM &lt;vertex_list&gt;\nOVER &lt;edge_type_list&gt; [{REVERSELY | BIDIRECT}]\n[ WHERE &lt;conditions&gt; ]\nYIELD [DISTINCT] &lt;return_list&gt;\n[{ SAMPLE &lt;sample_list&gt; | &lt;limit_by_list_clause&gt; }]\n[| GROUP BY {&lt;col_name&gt; | expression&gt; | &lt;position&gt;} YIELD &lt;col_name&gt;]\n[| ORDER BY &lt;expression&gt; [{ASC | DESC}]]\n[| LIMIT [&lt;offset&gt;,] &lt;number_rows&gt;];\n</code></pre> </li> </ul> <ul> <li> <p><code>FETCH</code></p> <ul> <li> <p>\u67e5\u8be2 Tag \u5c5e\u6027</p> <pre><code>FETCH PROP ON {&lt;tag_name&gt;[, tag_name ...] | *}\n&lt;vid&gt; [, vid ...]\nYIELD &lt;return_list&gt; [AS &lt;alias&gt;];\n</code></pre> </li> </ul> <ul> <li> <p>\u67e5\u8be2\u8fb9\u5c5e\u6027</p> <pre><code>FETCH PROP ON &lt;edge_type&gt; &lt;src_vid&gt; -&gt; &lt;dst_vid&gt;[@&lt;rank&gt;] [, &lt;src_vid&gt; -&gt; &lt;dst_vid&gt; ...]\nYIELD &lt;output&gt;;\n</code></pre> </li> </ul> </li> </ul> <ul> <li><code>LOOKUP</code><pre><code>LOOKUP ON {&lt;vertex_tag&gt; | &lt;edge_type&gt;}\n[WHERE &lt;expression&gt; [AND &lt;expression&gt; ...]]\nYIELD &lt;return_list&gt; [AS &lt;alias&gt;];\n\n&lt;return_list&gt;\n    &lt;prop_name&gt; [AS &lt;col_alias&gt;] [, &lt;prop_name&gt; [AS &lt;prop_alias&gt;] ...];\n</code></pre> </li> </ul> <ul> <li><code>MATCH</code><pre><code>MATCH &lt;pattern&gt; [&lt;clause_1&gt;]  RETURN &lt;output&gt;  [&lt;clause_2&gt;];\n</code></pre> </li> </ul>"},{"location":"2.quick-start/3.quick-start-on-premise/4.nebula-graph-crud/#go","title":"<code>GO</code>\u8bed\u53e5\u793a\u4f8b","text":"<ul> <li>\u4ece VID \u4e3a<code>player101</code>\u7684\u7403\u5458\u5f00\u59cb\uff0c\u6cbf\u7740\u8fb9<code>follow</code>\u627e\u5230\u8fde\u63a5\u7684\u7403\u5458\u3002<pre><code>nebula&gt; GO FROM \"player101\" OVER follow YIELD id($$);\n+-------------+\n| id($$)      |\n+-------------+\n| \"player100\" |\n| \"player102\" |\n+-------------+\n</code></pre> </li> </ul> <ul> <li>\u4ece VID \u4e3a<code>player101</code>\u7684\u7403\u5458\u5f00\u59cb\uff0c\u6cbf\u7740\u8fb9<code>follow</code>\u67e5\u627e\u5e74\u9f84\u5927\u4e8e\u6216\u7b49\u4e8e 35 \u5c81\u7684\u7403\u5458\uff0c\u5e76\u8fd4\u56de\u4ed6\u4eec\u7684\u59d3\u540d\u548c\u5e74\u9f84\uff0c\u540c\u65f6\u91cd\u547d\u540d\u5bf9\u5e94\u7684\u5217\u3002<pre><code>nebula&gt; GO FROM \"player101\" OVER follow WHERE properties($$).age &gt;= 35 \\\n        YIELD properties($$).name AS Teammate, properties($$).age AS Age;\n+-----------------+-----+\n| Teammate        | Age |\n+-----------------+-----+\n| \"Tim Duncan\"    | 42  |\n+-----------------+-----+\n</code></pre> \u5b50\u53e5/\u7b26\u53f7 \u8bf4\u660e <code>YIELD</code> \u6307\u5b9a\u8be5\u67e5\u8be2\u9700\u8981\u8fd4\u56de\u7684\u503c\u6216\u7ed3\u679c\u3002 <code>$$</code> \u8868\u793a\u8fb9\u7684\u7ec8\u70b9\u3002 <code>\\</code> \u8868\u793a\u6362\u884c\u7ee7\u7eed\u8f93\u5165\u3002 </li> </ul> <ul> <li> <p>\u4ece VID \u4e3a<code>player101</code>\u7684\u7403\u5458\u5f00\u59cb\uff0c\u6cbf\u7740\u8fb9<code>follow</code>\u67e5\u627e\u8fde\u63a5\u7684\u7403\u5458\uff0c\u7136\u540e\u68c0\u7d22\u8fd9\u4e9b\u7403\u5458\u7684\u7403\u961f\u3002\u4e3a\u4e86\u5408\u5e76\u8fd9\u4e24\u4e2a\u67e5\u8be2\u8bf7\u6c42\uff0c\u53ef\u4ee5\u4f7f\u7528\u7ba1\u9053\u7b26\u6216\u4e34\u65f6\u53d8\u91cf\u3002</p> <ul> <li> <p>\u4f7f\u7528\u7ba1\u9053\u7b26</p> <pre><code>nebula&gt; GO FROM \"player101\" OVER follow YIELD dst(edge) AS id | \\\n        GO FROM $-.id OVER serve YIELD properties($$).name AS Team, \\\n        properties($^).name AS Player;\n+-----------------+---------------------+\n| Team            | Player              |\n+-----------------+---------------------+\n| \"Trail Blazers\" | \"LaMarcus Aldridge\" |\n+-----------------+---------------------+\n</code></pre> \u5b50\u53e5/\u7b26\u53f7 \u8bf4\u660e <code>$^</code> \u8868\u793a\u8fb9\u7684\u8d77\u70b9\u3002 <code>|</code> \u7ec4\u5408\u591a\u4e2a\u67e5\u8be2\u7684\u7ba1\u9053\u7b26\uff0c\u5c06\u524d\u4e00\u4e2a\u67e5\u8be2\u7684\u7ed3\u679c\u96c6\u7528\u4e8e\u540e\u4e00\u4e2a\u67e5\u8be2\u3002 <code>$-</code> \u8868\u793a\u7ba1\u9053\u7b26\u524d\u9762\u7684\u67e5\u8be2\u8f93\u51fa\u7684\u7ed3\u679c\u96c6\u3002 </li> </ul> <ul> <li> <p>\u4f7f\u7528\u4e34\u65f6\u53d8\u91cf</p> <p>Note</p> <p>\u5f53\u590d\u5408\u8bed\u53e5\u4f5c\u4e3a\u4e00\u4e2a\u6574\u4f53\u63d0\u4ea4\u7ed9\u670d\u52a1\u5668\u65f6\uff0c\u5176\u4e2d\u7684\u4e34\u65f6\u53d8\u91cf\u4f1a\u5728\u8bed\u53e5\u7ed3\u675f\u65f6\u88ab\u91ca\u653e\u3002</p> <pre><code>nebula&gt; $var = GO FROM \"player101\" OVER follow YIELD dst(edge) AS id; \\\n        GO FROM $var.id OVER serve YIELD properties($$).name AS Team, \\\n        properties($^).name AS Player;\n+-----------------+---------------------+\n| Team            | Player              |\n+-----------------+---------------------+\n| \"Trail Blazers\" | \"LaMarcus Aldridge\" |\n+-----------------+---------------------+\n</code></pre> </li> </ul> </li> </ul>"},{"location":"2.quick-start/3.quick-start-on-premise/4.nebula-graph-crud/#fetch","title":"<code>FETCH</code>\u8bed\u53e5\u793a\u4f8b","text":"<p>\u67e5\u8be2 VID \u4e3a<code>player100</code>\u7684\u7403\u5458\u7684\u5c5e\u6027\u3002</p> <pre><code>nebula&gt; FETCH PROP ON player \"player100\" YIELD properties(vertex);\n+-------------------------------+\n| properties(VERTEX)            |\n+-------------------------------+\n| {age: 42, name: \"Tim Duncan\"} |\n+-------------------------------+\n</code></pre> <p>Note</p> <p><code>LOOKUP</code>\u548c<code>MATCH</code>\u7684\u793a\u4f8b\u5728\u4e0b\u6587\u7684\u7d22\u5f15 \u90e8\u5206\u67e5\u770b\u3002</p>"},{"location":"2.quick-start/3.quick-start-on-premise/4.nebula-graph-crud/#_9","title":"\u5176\u4ed6\u64cd\u4f5c","text":""},{"location":"2.quick-start/3.quick-start-on-premise/4.nebula-graph-crud/#_10","title":"\u4fee\u6539\u70b9\u548c\u8fb9","text":"<p>\u7528\u6237\u53ef\u4ee5\u4f7f\u7528<code>UPDATE</code>\u8bed\u53e5\u6216<code>UPSERT</code>\u8bed\u53e5\u4fee\u6539\u73b0\u6709\u6570\u636e\u3002</p> <p><code>UPSERT</code>\u662f<code>UPDATE</code>\u548c<code>INSERT</code>\u7684\u7ed3\u5408\u4f53\u3002\u5f53\u4f7f\u7528<code>UPSERT</code>\u66f4\u65b0\u4e00\u4e2a\u70b9\u6216\u8fb9\uff0c\u5982\u679c\u5b83\u4e0d\u5b58\u5728\uff0c\u6570\u636e\u5e93\u4f1a\u81ea\u52a8\u63d2\u5165\u4e00\u4e2a\u65b0\u7684\u70b9\u6216\u8fb9\u3002</p> <p>Note</p> <p>\u6bcf\u4e2a partition \u5185\u90e8\uff0c<code>UPSERT</code> \u64cd\u4f5c\u662f\u4e00\u4e2a\u4e32\u884c\u64cd\u4f5c\uff0c\u6240\u4ee5\u6267\u884c\u901f\u5ea6\u6bd4\u6267\u884c <code>INSERT</code> \u6216 <code>UPDATE</code> \u6162\u5f88\u591a\u3002\u5176\u4ec5\u5728\u591a\u4e2a partition \u4e4b\u95f4\u6709\u5e76\u53d1\u3002</p>"},{"location":"2.quick-start/3.quick-start-on-premise/4.nebula-graph-crud/#ngql_4","title":"nGQL \u8bed\u6cd5","text":"<ul> <li><code>UPDATE</code>\u70b9<pre><code>UPDATE VERTEX &lt;vid&gt; SET &lt;properties to be updated&gt;\n[WHEN &lt;condition&gt;] [YIELD &lt;columns&gt;];\n</code></pre> </li> </ul> <ul> <li><code>UPDATE</code>\u8fb9<pre><code>UPDATE EDGE ON &lt;edge_type&gt; &lt;source vid&gt; -&gt; &lt;destination vid&gt; [@rank] \nSET &lt;properties to be updated&gt; [WHEN &lt;condition&gt;] [YIELD &lt;columns to be output&gt;];\n</code></pre> </li> </ul> <ul> <li><code>UPSERT</code>\u70b9\u6216\u8fb9<pre><code>UPSERT {VERTEX &lt;vid&gt; | EDGE &lt;edge_type&gt;} SET &lt;update_columns&gt;\n[WHEN &lt;condition&gt;] [YIELD &lt;columns&gt;];\n</code></pre> </li> </ul>"},{"location":"2.quick-start/3.quick-start-on-premise/4.nebula-graph-crud/#_11","title":"\u793a\u4f8b","text":"<ul> <li>\u7528<code>UPDATE</code>\u4fee\u6539 VID \u4e3a<code>player100</code>\u7684\u7403\u5458\u7684<code>name</code>\u5c5e\u6027\uff0c\u7136\u540e\u7528<code>FETCH</code>\u8bed\u53e5\u68c0\u67e5\u7ed3\u679c\u3002<pre><code>nebula&gt; UPDATE VERTEX \"player100\" SET player.name = \"Tim\";\n\nnebula&gt; FETCH PROP ON player \"player100\" YIELD properties(vertex);\n+------------------------+\n| properties(VERTEX)     |\n+------------------------+\n| {age: 42, name: \"Tim\"} |\n+------------------------+\n</code></pre> </li> </ul> <ul> <li>\u7528<code>UPDATE</code>\u4fee\u6539\u67d0\u6761\u8fb9\u7684<code>degree</code>\u5c5e\u6027\uff0c\u7136\u540e\u7528<code>FETCH</code>\u68c0\u67e5\u7ed3\u679c\u3002<pre><code>nebula&gt; UPDATE EDGE ON follow \"player101\" -&gt; \"player100\" SET degree = 96;\n\nnebula&gt; FETCH PROP ON follow \"player101\" -&gt; \"player100\" YIELD properties(edge);\n+------------------+\n| properties(EDGE) |\n+------------------+\n| {degree: 96}     |\n+------------------+\n</code></pre> </li> </ul> <ul> <li>\u7528<code>INSERT</code>\u63d2\u5165\u4e00\u4e2a VID \u4e3a<code>player111</code>\u7684\u70b9\uff0c\u7136\u540e\u7528<code>UPSERT</code>\u66f4\u65b0\u5b83\u3002<pre><code>nebula&gt; INSERT VERTEX player(name,age) VALUES \"player111\":(\"David West\", 38);\n\nnebula&gt; UPSERT VERTEX \"player111\" SET player.name = \"David\", player.age = $^.player.age + 11 \\\n        WHEN $^.player.name == \"David West\" AND $^.player.age &gt; 20 \\\n        YIELD $^.player.name AS Name, $^.player.age AS Age;\n+---------+-----+\n| Name    | Age |\n+---------+-----+\n| \"David\" | 49  |\n+---------+-----+\n</code></pre> </li> </ul>"},{"location":"2.quick-start/3.quick-start-on-premise/4.nebula-graph-crud/#_12","title":"\u5220\u9664\u70b9\u548c\u8fb9","text":""},{"location":"2.quick-start/3.quick-start-on-premise/4.nebula-graph-crud/#ngql_5","title":"nGQL \u8bed\u6cd5","text":"<ul> <li>\u5220\u9664\u70b9<pre><code>DELETE VERTEX &lt;vid1&gt;[, &lt;vid2&gt;...]\n</code></pre> </li> </ul> <ul> <li>\u5220\u9664\u8fb9<pre><code>DELETE EDGE &lt;edge_type&gt; &lt;src_vid&gt; -&gt; &lt;dst_vid&gt;[@&lt;rank&gt;]\n[, &lt;src_vid&gt; -&gt; &lt;dst_vid&gt;...]\n</code></pre> </li> </ul>"},{"location":"2.quick-start/3.quick-start-on-premise/4.nebula-graph-crud/#_13","title":"\u793a\u4f8b","text":"<ul> <li>\u5220\u9664\u70b9<pre><code>nebula&gt; DELETE VERTEX \"player111\", \"team203\";\n</code></pre> </li> </ul> <ul> <li>\u5220\u9664\u8fb9<pre><code>nebula&gt; DELETE EDGE follow \"player101\" -&gt; \"team204\";\n</code></pre> </li> </ul>"},{"location":"2.quick-start/3.quick-start-on-premise/4.nebula-graph-crud/#_14","title":"\u4f7f\u7528\u7d22\u5f15","text":"<p>\u7528\u6237\u53ef\u4ee5\u901a\u8fc7 CREATE INDEX \u8bed\u53e5\u4e3a Tag \u548c Edge type \u589e\u52a0\u7d22\u5f15\u3002</p> <p>Caution</p> <p><code>MATCH</code>\u548c<code>LOOKUP</code>\u8bed\u53e5\u7684\u6267\u884c\u90fd\u4f9d\u8d56\u7d22\u5f15\uff0c\u4f46\u662f\u7d22\u5f15\u4f1a\u5bfc\u81f4\u5199\u6027\u80fd\u5927\u5e45\u964d\u4f4e\u3002\u8bf7\u4e0d\u8981\u968f\u610f\u5728\u751f\u4ea7\u73af\u5883\u4e2d\u4f7f\u7528\u7d22\u5f15\uff0c\u9664\u975e\u5f88\u6e05\u695a\u4f7f\u7528\u7d22\u5f15\u5bf9\u4e1a\u52a1\u7684\u5f71\u54cd\u3002</p> <p>\u5fc5\u987b\u4e3a\u201c\u5df2\u5199\u5165\u4f46\u672a\u6784\u5efa\u7d22\u5f15\u201d\u7684\u6570\u636e\u91cd\u5efa\u7d22\u5f15\uff0c\u5426\u5219\u65e0\u6cd5\u5728<code>MATCH</code>\u548c<code>LOOKUP</code>\u8bed\u53e5\u4e2d\u8fd4\u56de\u8fd9\u4e9b\u6570\u636e\u3002\u53c2\u89c1\u91cd\u5efa\u7d22\u5f15\u3002</p>"},{"location":"2.quick-start/3.quick-start-on-premise/4.nebula-graph-crud/#ngql_6","title":"nGQL \u8bed\u6cd5","text":"<ul> <li>\u521b\u5efa\u7d22\u5f15<pre><code>CREATE {TAG | EDGE} INDEX [IF NOT EXISTS] &lt;index_name&gt;\nON {&lt;tag_name&gt; | &lt;edge_name&gt;} ([&lt;prop_name_list&gt;]) [COMMENT = '&lt;comment&gt;'];\n</code></pre> </li> </ul> <ul> <li>\u91cd\u5efa\u7d22\u5f15<pre><code>REBUILD {TAG | EDGE} INDEX &lt;index_name&gt;;\n</code></pre> </li> </ul> <p>Note</p> <p>\u4e3a\u6ca1\u6709\u6307\u5b9a\u957f\u5ea6\u7684\u53d8\u91cf\u5c5e\u6027\u521b\u5efa\u7d22\u5f15\u65f6\uff0c\u9700\u8981\u6307\u5b9a\u7d22\u5f15\u957f\u5ea6\u3002\u5728 utf-8 \u7f16\u7801\u4e2d\uff0c\u4e00\u4e2a\u4e2d\u6587\u5b57\u7b26\u5360 3 \u5b57\u8282\uff0c\u8bf7\u6839\u636e\u53d8\u91cf\u5c5e\u6027\u957f\u5ea6\u8bbe\u7f6e\u5408\u9002\u7684\u7d22\u5f15\u957f\u5ea6\u3002\u4f8b\u5982 10 \u4e2a\u4e2d\u6587\u5b57\u7b26\uff0c\u7d22\u5f15\u957f\u5ea6\u9700\u8981\u4e3a 30\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1\u521b\u5efa\u7d22\u5f15\u3002</p>"},{"location":"2.quick-start/3.quick-start-on-premise/4.nebula-graph-crud/#lookupmatch","title":"\u57fa\u4e8e\u7d22\u5f15\u7684<code>LOOKUP</code>\u548c<code>MATCH</code>\u793a\u4f8b","text":"<p>\u786e\u4fdd<code>LOOKUP</code>\u6216<code>MATCH</code>\u6709\u4e00\u4e2a\u7d22\u5f15\u53ef\u7528\u3002\u5982\u679c\u6ca1\u6709\uff0c\u8bf7\u5148\u521b\u5efa\u7d22\u5f15\u3002</p> <p>\u627e\u5230 Tag \u4e3a<code>player</code>\u7684\u70b9\u7684\u4fe1\u606f\uff0c\u5b83\u7684<code>name</code>\u5c5e\u6027\u503c\u4e3a<code>Tony Parker</code>\u3002</p> <pre><code>// \u4e3a name \u5c5e\u6027\u521b\u5efa\u7d22\u5f15 player_index_1\u3002\nnebula&gt; CREATE TAG INDEX IF NOT EXISTS player_index_1 ON player(name(20));\n\n// \u91cd\u5efa\u7d22\u5f15\u786e\u4fdd\u80fd\u5bf9\u5df2\u5b58\u5728\u6570\u636e\u751f\u6548\u3002\nnebula&gt; REBUILD TAG INDEX player_index_1\n+------------+\n| New Job Id |\n+------------+\n| 31         |\n+------------+\n\n// \u4f7f\u7528 LOOKUP \u8bed\u53e5\u68c0\u7d22\u70b9\u7684\u5c5e\u6027\u3002\nnebula&gt; LOOKUP ON player WHERE player.name == \"Tony Parker\" \\\n        YIELD properties(vertex).name AS name, properties(vertex).age AS age;\n+---------------+-----+\n| name          | age |\n+---------------+-----+\n| \"Tony Parker\" | 36  |\n+---------------+-----+\n\n// \u4f7f\u7528 MATCH \u8bed\u53e5\u68c0\u7d22\u70b9\u7684\u5c5e\u6027\u3002\nnebula&gt; MATCH (v:player{name:\"Tony Parker\"}) RETURN v;\n+-----------------------------------------------------+\n| v                                                   |\n+-----------------------------------------------------+\n| (\"player101\" :player{age: 36, name: \"Tony Parker\"}) |\n+-----------------------------------------------------+\n</code></pre>"},{"location":"2.quick-start/3.quick-start-on-premise/5.start-stop-service/","title":"\u542f\u52a8 NebulaGraph \u670d\u52a1","text":"<p>NebulaGraph \u652f\u6301\u901a\u8fc7\u811a\u672c\u7ba1\u7406\u670d\u52a1\u3002</p>"},{"location":"2.quick-start/3.quick-start-on-premise/5.start-stop-service/#_1","title":"\u4f7f\u7528\u811a\u672c\u7ba1\u7406\u670d\u52a1","text":"<p>\u4f7f\u7528\u811a\u672c<code>nebula.service</code>\u7ba1\u7406\u670d\u52a1\uff0c\u5305\u62ec\u542f\u52a8\u3001\u505c\u6b62\u3001\u91cd\u542f\u3001\u4e2d\u6b62\u548c\u67e5\u770b\u3002</p> <p>Note</p> <p><code>nebula.service</code>\u7684\u9ed8\u8ba4\u8def\u5f84\u662f<code>/usr/local/nebula/scripts</code>\uff0c\u5982\u679c\u4fee\u6539\u8fc7\u5b89\u88c5\u8def\u5f84\uff0c\u8bf7\u4f7f\u7528\u5b9e\u9645\u8def\u5f84\u3002</p>"},{"location":"2.quick-start/3.quick-start-on-premise/5.start-stop-service/#_2","title":"\u8bed\u6cd5","text":"<pre><code>$ sudo /usr/local/nebula/scripts/nebula.service\n[-v] [-c &lt;config_file_path&gt;]\n&lt;start | stop | restart | kill | status&gt;\n&lt;metad | graphd | storaged | all&gt;\n</code></pre> \u53c2\u6570 \u8bf4\u660e <code>-v</code> \u663e\u793a\u8be6\u7ec6\u8c03\u8bd5\u4fe1\u606f\u3002 <code>-c</code> \u6307\u5b9a\u914d\u7f6e\u6587\u4ef6\u8def\u5f84\uff0c\u9ed8\u8ba4\u8def\u5f84\u4e3a<code>/usr/local/nebula/etc/</code>\u3002 <code>start</code> \u542f\u52a8\u670d\u52a1\u3002 <code>stop</code> \u505c\u6b62\u670d\u52a1\u3002 <code>restart</code> \u91cd\u542f\u670d\u52a1\u3002 <code>kill</code> \u4e2d\u6b62\u670d\u52a1\u3002 <code>status</code> \u67e5\u770b\u670d\u52a1\u72b6\u6001\u3002 <code>metad</code> \u7ba1\u7406 Meta \u670d\u52a1\u3002 <code>graphd</code> \u7ba1\u7406 Graph \u670d\u52a1\u3002 <code>storaged</code> \u7ba1\u7406 Storage \u670d\u52a1\u3002 <code>all</code> \u7ba1\u7406\u6240\u6709\u670d\u52a1\u3002"},{"location":"2.quick-start/3.quick-start-on-premise/5.start-stop-service/#nebulagraph_1","title":"\u542f\u52a8 NebulaGraph \u670d\u52a1","text":"<p>\u6267\u884c\u5982\u4e0b\u547d\u4ee4\u542f\u52a8\u670d\u52a1\uff1a</p> <pre><code>$ sudo /usr/local/nebula/scripts/nebula.service start all\n[INFO] Starting nebula-metad...\n[INFO] Done\n[INFO] Starting nebula-graphd...\n[INFO] Done\n[INFO] Starting nebula-storaged...\n[INFO] Done\n</code></pre>"},{"location":"2.quick-start/3.quick-start-on-premise/5.start-stop-service/#nebulagraph_2","title":"\u505c\u6b62 NebulaGraph \u670d\u52a1","text":"<p>Danger</p> <p>\u8bf7\u52ff\u4f7f\u7528<code>kill -9</code> \u547d\u4ee4\u5f3a\u5236\u7ec8\u6b62\u8fdb\u7a0b\uff0c\u5426\u5219\u53ef\u80fd\u8f83\u5c0f\u6982\u7387\u51fa\u73b0\u6570\u636e\u4e22\u5931\u3002</p> <p>\u6267\u884c\u5982\u4e0b\u547d\u4ee4\u505c\u6b62 NebulaGraph \u670d\u52a1\uff1a</p> <pre><code>$ sudo /usr/local/nebula/scripts/nebula.service stop all\n[INFO] Stopping nebula-metad...\n[INFO] Done\n[INFO] Stopping nebula-graphd...\n[INFO] Done\n[INFO] Stopping nebula-storaged...\n[INFO] Done\n</code></pre>"},{"location":"2.quick-start/3.quick-start-on-premise/5.start-stop-service/#nebulagraph_3","title":"\u67e5\u770b NebulaGraph \u670d\u52a1","text":"<p>\u6267\u884c\u5982\u4e0b\u547d\u4ee4\u67e5\u770b NebulaGraph \u670d\u52a1\u72b6\u6001\uff1a</p> <pre><code>$ sudo /usr/local/nebula/scripts/nebula.service status all\n</code></pre> <ul> <li> <p>\u5982\u679c\u8fd4\u56de\u5982\u4e0b\u7ed3\u679c\uff0c\u8868\u793a NebulaGraph \u670d\u52a1\u6b63\u5e38\u8fd0\u884c\u3002</p> <pre><code>[INFO] nebula-metad(33fd35e): Running as 29020, Listening on 9559\n[INFO] nebula-graphd(33fd35e): Running as 29095, Listening on 9669\n[WARN] nebula-storaged after v3.0.0 will not start service until it is added to cluster.\n[WARN] See Manage Storage hosts:ADD HOSTS in https://docs.nebula-graph.io/\n[INFO] nebula-storaged(33fd35e): Running as 29147, Listening on 9779\n</code></pre> <p>Note</p> <p>\u6b63\u5e38\u542f\u52a8 NebulaGraph \u540e\uff0c<code>nebula-storaged</code>\u8fdb\u7a0b\u7684\u7aef\u53e3\u663e\u793a\u7ea2\u8272\u3002\u8fd9\u662f\u56e0\u4e3a<code>nebula-storaged</code>\u5728\u542f\u52a8\u6d41\u7a0b\u4e2d\u4f1a\u7b49\u5f85<code>nebula-metad</code>\u6dfb\u52a0\u5f53\u524d Storage \u670d\u52a1\uff0c\u5f53\u524d Storage \u670d\u52a1\u6536\u5230 Ready \u4fe1\u53f7\u540e\u624d\u4f1a\u6b63\u5f0f\u542f\u52a8\u670d\u52a1\u3002\u4ece 3.0.0 \u7248\u672c\u5f00\u59cb\uff0c\u5728\u914d\u7f6e\u6587\u4ef6\u4e2d\u6dfb\u52a0\u7684 Storage \u8282\u70b9\u65e0\u6cd5\u76f4\u63a5\u8bfb\u5199\uff0c\u914d\u7f6e\u6587\u4ef6\u7684\u4f5c\u7528\u4ec5\u4ec5\u662f\u5c06 Storage \u8282\u70b9\u6ce8\u518c\u81f3 Meta \u670d\u52a1\u4e2d\u3002\u5fc5\u987b\u4f7f\u7528<code>ADD HOSTS</code>\u547d\u4ee4\u540e\uff0c\u624d\u80fd\u6b63\u5e38\u8bfb\u5199 Storage \u8282\u70b9\u3002\u66f4\u591a\u4fe1\u606f\uff0c\u53c2\u89c1\u7ba1\u7406 Storage \u4e3b\u673a\u3002</p> </li> </ul> <ul> <li>\u5982\u679c\u8fd4\u56de\u7c7b\u4f3c\u5982\u4e0b\u7ed3\u679c\uff0c\u8868\u793a NebulaGraph \u670d\u52a1\u5f02\u5e38\uff0c\u53ef\u4ee5\u6839\u636e\u5f02\u5e38\u670d\u52a1\u4fe1\u606f\u8fdb\u4e00\u6b65\u6392\u67e5\uff0c\u6216\u8005\u5728 NebulaGraph \u793e\u533a\u5bfb\u6c42\u5e2e\u52a9\u3002<pre><code>[INFO] nebula-metad: Running as 25600, Listening on 9559\n[INFO] nebula-graphd: Exited\n[INFO] nebula-storaged: Running as 25646, Listening on 9779\n</code></pre> </li> </ul> <p>NebulaGraph \u670d\u52a1\u7531 Meta \u670d\u52a1\u3001Graph \u670d\u52a1\u548c Storage \u670d\u52a1\u5171\u540c\u63d0\u4f9b\uff0c\u8fd9\u4e09\u79cd\u670d\u52a1\u7684\u914d\u7f6e\u6587\u4ef6\u90fd\u4fdd\u5b58\u5728\u5b89\u88c5\u76ee\u5f55\u7684<code>etc</code>\u76ee\u5f55\u5185\uff0c\u9ed8\u8ba4\u8def\u5f84\u4e3a<code>/usr/local/nebula/etc/</code>\uff0c\u7528\u6237\u53ef\u4ee5\u68c0\u67e5\u76f8\u5e94\u7684\u914d\u7f6e\u6587\u4ef6\u6392\u67e5\u95ee\u9898\u3002</p>"},{"location":"2.quick-start/3.quick-start-on-premise/5.start-stop-service/#_3","title":"\u4e0b\u4e00\u6b65","text":"<ul> <li>\u8fde\u63a5 NebulaGraph </li> </ul>"},{"location":"20.appendix/0.FAQ/","title":"\u5e38\u89c1\u95ee\u9898 FAQ","text":"<p>\u672c\u6587\u5217\u51fa\u4e86\u4f7f\u7528 NebulaGraph master \u65f6\u53ef\u80fd\u9047\u5230\u7684\u5e38\u89c1\u95ee\u9898\uff0c\u7528\u6237\u53ef\u4ee5\u4f7f\u7528\u6587\u6863\u4e2d\u5fc3\u6216\u8005\u6d4f\u89c8\u5668\u7684\u641c\u7d22\u529f\u80fd\u67e5\u627e\u76f8\u5e94\u95ee\u9898\u3002</p> <p>\u5982\u679c\u6309\u7167\u6587\u4e2d\u7684\u5efa\u8bae\u65e0\u6cd5\u89e3\u51b3\u95ee\u9898\uff0c\u8bf7\u5230 NebulaGraph \u8bba\u575b \u63d0\u95ee\u6216\u63d0\u4ea4 GitHub issue\u3002</p>"},{"location":"20.appendix/0.FAQ/#_1","title":"\u5173\u4e8e\u672c\u624b\u518c","text":""},{"location":"20.appendix/0.FAQ/#_2","title":"\u4e3a\u4ec0\u4e48\u624b\u518c\u793a\u4f8b\u548c\u7cfb\u7edf\u884c\u4e3a\u4e0d\u4e00\u81f4\uff1f","text":"<p>NebulaGraph \u4e00\u76f4\u5728\u6301\u7eed\u5f00\u53d1\uff0c\u529f\u80fd\u6216\u64cd\u4f5c\u7684\u884c\u4e3a\u53ef\u80fd\u4f1a\u6709\u53d8\u5316\uff0c\u5982\u679c\u53d1\u73b0\u4e0d\u4e00\u81f4\uff0c\u8bf7\u63d0\u4ea4 issue \u901a\u77e5 NebulaGraph \u56e2\u961f\u3002</p> <p>Note</p> <p>\u5982\u679c\u53d1\u73b0\u672c\u6587\u6863\u4e2d\u7684\u9519\u8bef\uff1a</p> <ol> <li>\u7528\u6237\u53ef\u4ee5\u70b9\u51fb\u9875\u9762\u9876\u90e8\u53f3\u4e0a\u89d2\u7684\"\u94c5\u7b14\"\u56fe\u6807\u8fdb\u5165\u7f16\u8f91\u9875\u9762\u3002</li> <li>\u4f7f\u7528 Markdown \u4fee\u6539\u6587\u6863\u3002\u5b8c\u6210\u540e\u70b9\u51fb\u9875\u9762\u5e95\u90e8\u7684 \"Commit changes\"\uff0c\u8fd9\u4f1a\u89e6\u53d1\u4e00\u4e2a GitHub pull request\u3002</li> <li>\u5b8c\u6210 CLA \u7b7e\u7f72\uff0c\u5e76\u4e14\u81f3\u5c11 2 \u4f4d reviewer \u5ba1\u6838\u901a\u8fc7\u5373\u53ef\u5408\u5e76\u3002</li> </ol>"},{"location":"20.appendix/0.FAQ/#_3","title":"\u5173\u4e8e\u5386\u53f2\u517c\u5bb9\u6027","text":"<p>Compatibility</p> <p>NebulaGraph master \u4e0e \u5386\u53f2\u7248\u672c \uff08\u5305\u62ec NebulaGraph 1.x \u548c 2.x) \u7684\u6570\u636e\u683c\u5f0f\u3001\u5ba2\u6237\u7aef\u901a\u4fe1\u534f\u8bae\u5747\u53cc\u5411\u4e0d\u517c\u5bb9\u3002 \u4f7f\u7528\u8001\u7248\u672c\u5ba2\u6237\u7aef\u8fde\u63a5\u65b0\u7248\u672c\u670d\u52a1\u7aef\uff0c\u4f1a\u5bfc\u81f4\u670d\u52a1\u8fdb\u7a0b\u9000\u51fa\u3002 \u6570\u636e\u683c\u5f0f\u5347\u7ea7\u53c2\u89c1\u5347\u7ea7 NebulaGraph \u5386\u53f2\u7248\u672c\u81f3\u5f53\u524d\u7248\u672c\u3002 \u5ba2\u6237\u7aef\u4e0e\u5de5\u5177\u5747\u9700\u8981\u4e0b\u8f7d\u5bf9\u5e94\u7248\u672c\u3002</p>"},{"location":"20.appendix/0.FAQ/#_4","title":"\u5173\u4e8e\u6267\u884c\u62a5\u9519","text":""},{"location":"20.appendix/0.FAQ/#-1005graphmemoryexceeded_-2600","title":"\u5982\u4f55\u5904\u7406\u9519\u8bef\u4fe1\u606f<code>-1005:GraphMemoryExceeded: (-2600\uff09</code>","text":"<p>\u8fd9\u4e2a\u9519\u8bef\u662f\u7531 Memory Tracker \u53d1\u51fa\u7684\uff0c\u5b83\u5728\u89c2\u5bdf\u5230\u5185\u5b58\u4f7f\u7528\u8d85\u8fc7\u4e86\u8bbe\u5b9a\u9608\u503c\u65f6\u53d1\u51fa\u8b66\u62a5\u3002\u8fd9\u4e2a\u673a\u5236\u53ef\u4ee5\u5e2e\u52a9\u907f\u514d\u670d\u52a1\u8fdb\u7a0b\u88ab\u7cfb\u7edf\u7684 OOM\uff08Out of Memory\uff09killer \u7ec8\u6b62\u3002\u89e3\u51b3\u6b65\u9aa4\uff1a</p> <ol> <li> <p>\u68c0\u67e5\u5185\u5b58\u4f7f\u7528\u60c5\u51b5\uff1a\u9996\u5148\uff0c\u4f60\u9700\u8981\u67e5\u770b\u547d\u4ee4\u6267\u884c\u8fc7\u7a0b\u4e2d\u7684\u5185\u5b58\u7528\u91cf\u3002\u5982\u679c\u5185\u5b58\u4f7f\u7528\u91cf\u786e\u5b9e\u5f88\u9ad8\uff0c\u90a3\u4e48\u8fd9\u4e2a\u9519\u8bef\u53ef\u80fd\u662f\u9884\u671f\u4e2d\u7684\u60c5\u51b5\u3002</p> </li> <li> <p>\u68c0\u67e5 Memory Tracker \u7684\u914d\u7f6e\uff1a\u5982\u679c\u5185\u5b58\u4f7f\u7528\u91cf\u5e76\u4e0d\u9ad8\uff0c\u68c0\u67e5 Memory Tracker \u7684\u76f8\u5173\u914d\u7f6e\u3002\u8fd9\u5305\u62ec<code>memory_tracker_untracked_reserved_memory_mb</code>\uff08\u672a\u88ab\u8ddf\u8e2a\u7684\u9884\u7559\u5185\u5b58\u91cf\uff0c\u5355\u4f4d\u4e3a MB\uff09\uff0c<code>memory_tracker_limit_ratio</code>\uff08\u5185\u5b58\u9650\u5236\u6bd4\u4f8b\uff09\uff0c\u4ee5\u53ca<code>memory_purge_enabled</code>\uff08\u662f\u5426\u542f\u7528\u5185\u5b58\u6e05\u7406\uff09\u3002\u5173\u4e8e Memory Tracker \u7684\u914d\u7f6e\uff0c\u53c2\u89c1 memory tracker \u914d\u7f6e\u3002</p> </li> <li> <p>\u4f18\u5316\u914d\u7f6e\uff1a\u6839\u636e\u5b9e\u9645\u60c5\u51b5\uff0c\u8c03\u6574\u8fd9\u4e9b\u914d\u7f6e\u3002\u4f8b\u5982\uff0c\u5982\u679c\u53ef\u7528\u5185\u5b58\u9650\u5236\u8fc7\u4f4e\uff0c\u53ef\u4ee5\u8c03\u9ad8<code>memory_tracker_limit_ratio</code>\u7684\u503c\u3002</p> </li> </ol>"},{"location":"20.appendix/0.FAQ/#semanticerror_missing_yield_clause","title":"\u5982\u4f55\u5904\u7406\u9519\u8bef\u4fe1\u606f<code>SemanticError: Missing yield clause</code>","text":"<p>\u4ece NebulaGraph 3.0.0 \u5f00\u59cb\uff0c\u67e5\u8be2\u8bed\u53e5<code>LOOKUP</code>\u3001<code>GO</code>\u3001<code>FETCH</code>\u5fc5\u987b\u7528<code>YIELD</code>\u5b50\u53e5\u6307\u5b9a\u8f93\u51fa\u7ed3\u679c\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1YIELD\u3002</p>"},{"location":"20.appendix/0.FAQ/#host_not_enough","title":"\u5982\u4f55\u5904\u7406\u9519\u8bef\u4fe1\u606f<code>Host not enough!</code>","text":"<p>\u4ece 3.0.0 \u7248\u672c\u5f00\u59cb\uff0c\u5728\u914d\u7f6e\u6587\u4ef6\u4e2d\u6dfb\u52a0\u7684 Storage \u8282\u70b9\u65e0\u6cd5\u76f4\u63a5\u8bfb\u5199\uff0c\u914d\u7f6e\u6587\u4ef6\u7684\u4f5c\u7528\u4ec5\u4ec5\u662f\u5c06 Storage \u8282\u70b9\u6ce8\u518c\u81f3 Meta \u670d\u52a1\u4e2d\u3002\u5fc5\u987b\u4f7f\u7528<code>ADD HOSTS</code>\u547d\u4ee4\u540e\uff0c\u624d\u80fd\u6b63\u5e38\u8bfb\u5199 Storage \u8282\u70b9\u3002\u8be6\u60c5\u53c2\u89c1\u7ba1\u7406 Storage \u4e3b\u673a\u3002</p>"},{"location":"20.appendix/0.FAQ/#to_get_the_property_of_the_vertex_in_vage_should_use_the_format_vartagprop","title":"\u5982\u4f55\u5904\u7406\u9519\u8bef\u4fe1\u606f<code>To get the property of the vertex in 'v.age', should use the format 'var.tag.prop'</code>","text":"<p>\u4ece 3.0.0 \u7248\u672c\u5f00\u59cb\uff0c<code>pattern</code>\u652f\u6301\u540c\u65f6\u5339\u914d\u591a\u4e2a Tag\uff0c\u6240\u4ee5\u8fd4\u56de\u5c5e\u6027\u65f6\uff0c\u9700\u8981\u989d\u5916\u6307\u5b9a Tag \u540d\u79f0\u3002\u5373\u4ece<code>RETURN \u53d8\u91cf\u540d.\u5c5e\u6027\u540d</code>\u6539\u4e3a<code>RETURN \u53d8\u91cf\u540d.Tag\u540d.\u5c5e\u6027\u540d</code>\u3002</p>"},{"location":"20.appendix/0.FAQ/#used_memory_hits_the_high_watermark0800000_of_total_system_memory","title":"\u5982\u4f55\u5904\u7406\u9519\u8bef\u4fe1\u606f <code>Used memory hits the high watermark(0.800000) of total system memory.</code>","text":"<p>\u62a5\u9519\u539f\u56e0\uff1a NebulaGraph \u7684<code>system_memory_high_watermark_ratio</code>\u53c2\u6570\u6307\u5b9a\u4e86\u5185\u5b58\u9ad8\u6c34\u4f4d\u62a5\u8b66\u673a\u5236\u7684\u89e6\u53d1\u9608\u503c\uff0c\u9ed8\u8ba4\u4e3a<code>0.8</code>\u3002\u7cfb\u7edf\u5185\u5b58\u5360\u7528\u7387\u9ad8\u4e8e\u8be5\u503c\u4f1a\u89e6\u53d1\u62a5\u8b66\u673a\u5236\uff0cNebulaGraph \u4f1a\u505c\u6b62\u63a5\u53d7\u67e5\u8be2\u3002</p> <p>\u89e3\u51b3\u65b9\u6848\uff1a</p> <ul> <li>\u6e05\u7406\u7cfb\u7edf\u5185\u5b58\uff0c\u4f7f\u5176\u964d\u4f4e\u5230\u9608\u503c\u4ee5\u4e0b\u3002</li> <li>\u4fee\u6539 Graph \u914d\u7f6e\u3002\u5728\u6240\u6709 Graph \u670d\u52a1\u5668\u7684\u914d\u7f6e\u6587\u4ef6\u4e2d\u589e\u52a0<code>system_memory_high_watermark_ratio</code>\u53c2\u6570\uff0c\u4e3a\u5176\u8bbe\u7f6e\u4e00\u4e2a\u5927\u4e8e<code>0.8</code>\u7684\u503c\uff0c\u4f8b\u5982<code>0.9</code>\u3002</li> </ul> <p>\u9700\u8981\u6ce8\u610f\u7684\u662f<code>system_memory_high_watermark_ratio</code>\u53c2\u6570\u5df2\u88ab\u5f03\u7528\u3002\u5efa\u8bae\u7528\u6237\u4f7f\u7528 Memory Tracker \u529f\u80fd\u6765\u9650\u5236NebulaGraph\u7684\u5185\u5b58\u4f7f\u7528\u91cf\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1 Graph \u670d\u52a1\u7684 memory tracker \u914d\u7f6e\u548c Storage \u670d\u52a1\u7684 memory tracker \u914d\u7f6e\u3002</p>"},{"location":"20.appendix/0.FAQ/#storage_error_e_rpc_failure","title":"\u5982\u4f55\u5904\u7406\u9519\u8bef\u4fe1\u606f<code>Storage Error E_RPC_FAILURE</code>","text":"<p>\u62a5\u9519\u539f\u56e0\u901a\u5e38\u4e3a Graph \u670d\u52a1\u5411 Storage \u670d\u52a1\u8bf7\u6c42\u4e86\u8fc7\u591a\u7684\u6570\u636e\uff0c\u5bfc\u81f4 Storage \u670d\u52a1\u8d85\u65f6\u3002\u8bf7\u5c1d\u8bd5\u4ee5\u4e0b\u89e3\u51b3\u65b9\u6848\uff1a</p> <ul> <li>\u4fee\u6539\u914d\u7f6e\u6587\u4ef6\uff1a\u5728<code>nebula-graphd.conf</code>\u6587\u4ef6\u4e2d\u4fee\u6539<code>--storage_client_timeout_ms</code>\u53c2\u6570\u7684\u503c\uff0c\u4ee5\u589e\u52a0 Storage client \u7684\u8fde\u63a5\u8d85\u65f6\u65f6\u95f4\u3002\u8be5\u503c\u7684\u5355\u4f4d\u4e3a\u6beb\u79d2\uff08ms\uff09\u3002\u4f8b\u5982\uff0c\u8bbe\u7f6e<code>--storage_client_timeout_ms=60000</code>\u3002\u5982\u679c<code>nebula-graphd.conf</code>\u6587\u4ef6\u4e2d\u672a\u914d\u7f6e\u8be5\u53c2\u6570\uff0c\u8bf7\u624b\u52a8\u589e\u52a0\u3002\u63d0\u793a\uff1a\u8bf7\u5728\u914d\u7f6e\u6587\u4ef6\u5f00\u5934\u6dfb\u52a0<code>--local_config=true</code>\u518d\u91cd\u542f\u670d\u52a1\u3002</li> <li>\u4f18\u5316\u67e5\u8be2\u8bed\u53e5\uff1a\u51cf\u5c11\u5168\u5e93\u626b\u63cf\u578b\u7684\u67e5\u8be2\uff0c\u65e0\u8bba\u662f\u5426\u7528<code>LIMIT</code>\u9650\u5236\u4e86\u8fd4\u56de\u7ed3\u679c\u7684\u6570\u91cf\uff1b\u7528 GO \u8bed\u53e5\u6539\u5199 MATCH \u8bed\u53e5\uff08\u524d\u8005\u6709\u4f18\u5316\uff0c\u540e\u8005\u65e0\u4f18\u5316\uff09\u3002</li> <li>\u68c0\u67e5 Storaged \u662f\u5426\u53d1\u751f\u8fc7 OOM\u3002(<code>dmesg |grep nebula</code>)\u3002</li> <li>\u4e3a Storage \u670d\u52a1\u5668\u63d0\u4f9b\u6027\u80fd\u66f4\u597d\u7684 SSD \u6216\u8005\u5185\u5b58\u3002</li> <li>\u91cd\u8bd5\u8bf7\u6c42\u3002</li> </ul>"},{"location":"20.appendix/0.FAQ/#the_leader_has_changed_try_again_later","title":"\u5982\u4f55\u5904\u7406\u9519\u8bef\u4fe1\u606f<code>The leader has changed. Try again later</code>","text":"<p>\u5df2\u77e5\u95ee\u9898\uff0c\u901a\u5e38\u9700\u8981\u91cd\u8bd5 1-N \u6b21 (N==partition \u6570\u91cf\uff09\u3002\u539f\u56e0\u4e3a meta client \u66f4\u65b0 leader \u7f13\u5b58\u9700\u8981 1-2 \u4e2a\u5fc3\u8df3\u6216\u8005\u901a\u8fc7\u9519\u8bef\u89e6\u53d1\u5f3a\u5236\u66f4\u65b0\u3002</p> <p>\u5982\u679c\u767b\u5f55 NebulaGraph \u65f6\uff0c\u51fa\u73b0\u8be5\u62a5\u9519\uff0c\u53ef\u4ee5\u8003\u8651\u4f7f\u7528 <code>df -h</code> \u67e5\u770b\u78c1\u76d8\u7a7a\u95f4\uff0c\u68c0\u67e5\u672c\u5730\u78c1\u76d8\u7a7a\u95f4\u662f\u5426\u5df2\u6ee1\u3002</p>"},{"location":"20.appendix/0.FAQ/#schema_not_exist_xxx","title":"Schema not exist: xxx","text":"<p>\u67e5\u8be2\u65f6\u63d0\u793a<code>Schema not exist</code>\uff0c\u8bf7\u786e\u8ba4\uff1a</p> <ul> <li>Schema \u4e2d\u662f\u5426\u5b58\u5728\u8be5 Tag \u6216 Edge type\u3002</li> </ul> <ul> <li>Tag \u6216 Edge type \u7684\u540d\u79f0\u662f\u5426\u4e3a\u5173\u952e\u5b57\uff0c\u5982\u679c\u662f\u5173\u952e\u5b57\uff0c\u8bf7\u4f7f\u7528\u53cd\u5f15\u53f7\uff08`\uff09\u5c06\u5b83\u4eec\u62ec\u8d77\u6765\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1\u5173\u952e\u5b57\u3002</li> </ul>"},{"location":"20.appendix/0.FAQ/#exchangeconnectorsalgorithm_snapshot","title":"\u7f16\u8bd1 Exchange\u3001Connectors\u3001Algorithm \u65f6\u65e0\u6cd5\u4e0b\u8f7d SNAPSHOT \u5305","text":"<p>\u73b0\u8c61\uff1a\u7f16\u8bd1\u65f6\u63d0\u793a<code>Could not find artifact com.vesoft:client:jar:xxx-SNAPSHOT</code>\u3002</p> <p>\u539f\u56e0\uff1a\u672c\u5730 maven \u6ca1\u6709\u914d\u7f6e\u7528\u4e8e\u4e0b\u8f7d SNAPSHOT \u7684\u4ed3\u5e93\u3002maven \u4e2d\u9ed8\u8ba4\u7684 central \u4ed3\u5e93\u7528\u4e8e\u5b58\u653e\u6b63\u5f0f\u53d1\u5e03\u7248\u672c\uff0c\u800c\u4e0d\u662f\u5f00\u53d1\u7248\u672c\uff08SNAPSHOT\uff09\u3002</p> <p>\u89e3\u51b3\u65b9\u6848\uff1a\u5728 maven \u7684 setting.xml\u6587\u4ef6\u7684<code>profiles</code>\u4f5c\u7528\u57df\u5185\u4e2d\u589e\u52a0\u4ee5\u4e0b\u914d\u7f6e\uff1a</p> <pre><code>  &lt;profile&gt;\n     &lt;activation&gt;\n        &lt;activeByDefault&gt;true&lt;/activeByDefault&gt;\n     &lt;/activation&gt;\n     &lt;repositories&gt;\n        &lt;repository&gt;\n            &lt;id&gt;snapshots&lt;/id&gt;\n            &lt;url&gt;https://oss.sonatype.org/content/repositories/snapshots/&lt;/url&gt;\n            &lt;snapshots&gt;\n               &lt;enabled&gt;true&lt;/enabled&gt;\n            &lt;/snapshots&gt;\n      &lt;/repository&gt;\n     &lt;/repositories&gt;\n  &lt;/profile&gt;\n</code></pre>"},{"location":"20.appendix/0.FAQ/#error_-1004_syntaxerror_syntax_error_near","title":"\u5982\u4f55\u5904\u7406\u9519\u8bef\u4fe1\u606f<code>[ERROR (-1004)]: SyntaxError: syntax error near</code>\uff1f","text":"<p>\u5927\u90e8\u5206\u60c5\u51b5\u4e0b\uff0c\u67e5\u8be2\u8bed\u53e5\u9700\u8981\u6709<code>YIELD</code>\u6216<code>RETURN</code>\uff0c\u8bf7\u68c0\u67e5\u67e5\u8be2\u8bed\u53e5\u662f\u5426\u5305\u542b\u3002</p>"},{"location":"20.appendix/0.FAQ/#cant_solve_the_start_vids_from_the_sentence","title":"\u5982\u4f55\u5904\u7406\u9519\u8bef\u4fe1\u606f<code>can\u2019t solve the start vids from the sentence</code>","text":"<p>\u67e5\u8be2\u5f15\u64ce\u9700\u8981\u77e5\u9053\u4ece\u54ea\u4e9b VID \u5f00\u59cb\u56fe\u904d\u5386\u3002\u8fd9\u4e9b\u5f00\u59cb\u56fe\u904d\u5386\u7684 VID\uff0c\u6216\u8005\u901a\u8fc7\u7528\u6237\u6307\u5b9a\uff0c\u4f8b\u5982\uff1a</p> <pre><code>&gt; GO FROM ${vids} ...\n&gt; MATCH (src) WHERE id(src) == ${vids}\n# \u5f00\u59cb\u56fe\u904d\u5386\u7684 VID \u901a\u8fc7\u5982\u4e0a\u529e\u6cd5\u6307\u5b9a\n</code></pre> <p>\u6216\u8005\u901a\u8fc7\u4e00\u4e2a\u5c5e\u6027\u7d22\u5f15\u6765\u5f97\u5230\uff0c\u4f8b\u5982\uff1a</p> <pre><code># CREATE TAG INDEX IF NOT EXISTS i_player ON player(name(20));\n# REBUILD TAG INDEX i_player;\n\n&gt; LOOKUP ON player WHERE player.name == \"abc\" | ... YIELD ...\n&gt; MATCH (src) WHERE src.name == \"abc\" ...\n# \u901a\u8fc7\u70b9\u5c5e\u6027 name \u7684\u7d22\u5f15\uff0c\u6765\u5f97\u5230 VID\n</code></pre> <p>\u5426\u5219\uff0c\u5c31\u4f1a\u629b\u51fa\u8fd9\u6837\u4e00\u4e2a\u5f02\u5e38 <code>can\u2019t solve the start vids from the sentence</code>\u3002</p>"},{"location":"20.appendix/0.FAQ/#wrong_vertex_id_type_1001","title":"\u5982\u4f55\u5904\u7406\u9519\u8bef\u4fe1\u606f<code>Wrong vertex id type: 1001</code>","text":"<p>\u68c0\u67e5\u8f93\u5165\u7684 VID \u7c7b\u578b\u662f\u5426\u662f<code>create space</code>\u8bbe\u7f6e\u7684<code>INT64</code>\u6216<code>FIXED_STRING(N)</code>\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1 create space\u3002</p>"},{"location":"20.appendix/0.FAQ/#the_vid_must_be_a_64-bit_integer_or_a_string_fitting_space_vertex_id_length_limit","title":"\u5982\u4f55\u5904\u7406\u9519\u8bef\u4fe1\u606f<code>The VID must be a 64-bit integer or a string fitting space vertex id length limit.</code>","text":"<p>\u68c0\u67e5\u8f93\u5165\u7684 VID \u662f\u5426\u8d85\u8fc7\u9650\u5236\u957f\u5ea6\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1 create space\u3002</p>"},{"location":"20.appendix/0.FAQ/#edge_conflict_vertex_conflict","title":"\u5982\u4f55\u5904\u7406\u9519\u8bef\u4fe1\u606f <code>edge conflict</code> \u6216 <code>vertex conflict</code>","text":"<p>Storage \u670d\u52a1\u5728\u6beb\u79d2\u7ea7\u65f6\u95f4\u5185\u591a\u6b21\u6536\u5230\u63d2\u5165\u6216\u8005\u66f4\u65b0\u540c\u4e00\u70b9\u6216\u8fb9\u7684\u8bf7\u6c42\u65f6\uff0c\u53ef\u80fd\u8fd4\u56de\u8be5\u9519\u8bef\u3002\u8bf7\u7a0d\u540e\u91cd\u8bd5\u3002</p>"},{"location":"20.appendix/0.FAQ/#rpc_failure_in_metaclient_connection_refused","title":"\u5982\u4f55\u5904\u7406\u9519\u8bef\u4fe1\u606f <code>RPC failure in MetaClient: Connection refused</code>","text":"<p>\u62a5\u9519\u539f\u56e0\u901a\u5e38\u4e3a metad \u670d\u52a1\u72b6\u6001\u5f02\u5e38\uff0c\u6216\u662f metad \u548c graphd \u670d\u52a1\u6240\u5728\u673a\u5668\u7f51\u7edc\u4e0d\u901a\u3002\u8bf7\u5c1d\u8bd5\u4ee5\u4e0b\u89e3\u51b3\u65b9\u6848\uff1a</p> <ul> <li>\u5728 metad \u6240\u5728\u670d\u52a1\u5668\u67e5\u770b\u4e0b metad \u670d\u52a1\u72b6\u6001\uff0c\u5982\u679c\u670d\u52a1\u72b6\u6001\u5f02\u5e38\uff0c\u53ef\u4ee5\u91cd\u65b0\u542f\u52a8 metad \u670d\u52a1\u3002</li> </ul> <ul> <li>\u5728\u62a5\u9519\u670d\u52a1\u5668\u4e0b\u4f7f\u7528<code>telnet meta-ip:port</code>\u67e5\u770b\u7f51\u7edc\u72b6\u6001\u3002</li> </ul> <ul> <li>\u68c0\u67e5\u914d\u7f6e\u6587\u4ef6\u4e2d\u7684\u7aef\u53e3\u914d\u7f6e\uff0c\u5982\u679c\u7aef\u53e3\u53f7\u4e0e\u8fde\u63a5\u65f6\u4f7f\u7528\u7684\u4e0d\u540c\uff0c\u6539\u7528\u914d\u7f6e\u6587\u4ef6\u4e2d\u7684\u7aef\u53e3\u6216\u8005\u4fee\u6539\u914d\u7f6e\u3002</li> </ul>"},{"location":"20.appendix/0.FAQ/#nebula-graphinfo_storageclientbaseinl214_request_to_xxxx9779_failed_n6apache6thrift9transport19ttransportexceptione_timed_out","title":"\u5982\u4f55\u5904\u7406 <code>nebula-graph.INFO</code> \u4e2d\u9519\u8bef\u65e5\u5fd7 <code>StorageClientBase.inl:214] Request to \"x.x.x.x\":9779 failed: N6apache6thrift9transport19TTransportExceptionE: Timed Out</code>","text":"<p>\u62a5\u9519\u539f\u56e0\u53ef\u80fd\u662f\u67e5\u8be2\u7684\u6570\u636e\u91cf\u6bd4\u8f83\u5927\uff0cstoraged \u5904\u7406\u8d85\u65f6\u3002\u8bf7\u5c1d\u8bd5\u4ee5\u4e0b\u89e3\u51b3\u65b9\u6cd5\uff1a</p> <ul> <li>\u5bfc\u5165\u6570\u636e\u65f6\uff0c\u624b\u52a8 compaction\uff0c\u52a0\u901f\u8bfb\u7684\u901f\u5ea6\u3002</li> </ul> <ul> <li>\u589e\u52a0 Graph \u670d\u52a1\u4e0e Storage \u670d\u52a1\u7684 RPC \u8fde\u63a5\u8d85\u65f6\u65f6\u95f4\uff0c\u5728<code>nebula-graphd.conf</code>\u6587\u4ef6\u91cc\u9762\u4fee\u6539<code>--storage_client_timeout_ms</code>\u53c2\u6570\u7684\u503c\u3002\u8be5\u503c\u7684\u5355\u4f4d\u4e3a\u6beb\u79d2\uff08ms\uff09\uff0c\u9ed8\u8ba4\u503c\u4e3a 60000 \u6beb\u79d2\u3002</li> </ul>"},{"location":"20.appendix/0.FAQ/#nebula-storagedinfo_metaclientcpp65_heartbeat_failed_statuswrong_cluster_nebula-metadinfo_hbprocessorcpp54_reject_wrong_cluster_host_xxxx9771","title":"\u5982\u4f55\u5904\u7406 <code>nebula-storaged.INFO</code> \u4e2d\u9519\u8bef\u65e5\u5fd7 <code>MetaClient.cpp:65] Heartbeat failed, status:Wrong cluster!</code> \u6216\u8005 <code>nebula-metad.INFO</code> \u542b\u6709\u9519\u8bef\u65e5\u5fd7<code>HBProcessor.cpp:54] Reject wrong cluster host \"x.x.x.x\":9771!</code>","text":"<p>\u62a5\u9519\u7684\u539f\u56e0\u53ef\u80fd\u662f\u7528\u6237\u4fee\u6539\u4e86 metad \u7684 ip \u6216\u8005\u7aef\u53e3\u4fe1\u606f\uff0c\u6216\u8005 storage \u4e4b\u524d\u52a0\u5165\u8fc7\u5176\u4ed6\u96c6\u7fa4\u3002\u8bf7\u5c1d\u8bd5\u4ee5\u4e0b\u89e3\u51b3\u65b9\u6cd5\uff1a</p> <p>\u7528\u6237\u5230 storage \u90e8\u7f72\u7684\u673a\u5668\u6240\u5728\u7684\u5b89\u88c5\u76ee\u5f55\uff08\u9ed8\u8ba4\u5b89\u88c5\u76ee\u5f55\u4e3a <code>/usr/local/nebula</code>\uff09\u4e0b\u9762\u5c06<code>cluster.id</code>\u6587\u4ef6\u5220\u9664\uff0c\u7136\u540e\u91cd\u542f storaged \u670d\u52a1\u3002</p>"},{"location":"20.appendix/0.FAQ/#storage_error_more_than_one_request_trying_to_addupdatedelete_one_edgevertex_at_he_same_time","title":"\u5982\u4f55\u5904\u7406\u62a5\u9519\u4fe1\u606f<code>Storage Error: More than one request trying to add/update/delete one edge/vertex at he same time.</code>","text":"<p>\u4e0a\u8ff0\u62a5\u9519\u8868\u793a\u5f53\u524d\u7248\u672c\u4e0d\u5141\u8bb8\u540c\u65f6\u5bf9\u4e00\u4e2a\u70b9\u6216\u8005\u4e00\u6761\u8fb9\u8fdb\u884c\u5e76\u53d1\u64cd\u4f5c\u3002\u5982\u51fa\u73b0\u6b64\u62a5\u9519\u8bf7\u91cd\u65b0\u6267\u884c\u64cd\u4f5c\u547d\u4ee4\u3002</p>"},{"location":"20.appendix/0.FAQ/#the_maximum_number_of_statements_allowed_has_been_exceeded_the_maximum_number_of_statements_for_nebula_is_512","title":"\u5982\u4f55\u5904\u7406\u9519\u8bef\u4fe1\u606f <code>The maximum number of statements allowed has been exceeded</code> \u548c <code>the maximum number of statements for Nebula is 512</code>","text":"<p>\u8fd9\u4e24\u4e2a\u62a5\u9519\u4fe1\u606f\u90fd\u662f\u7531\u4e8e\u5355\u6761\u63d2\u5165\u8bed\u53e5\u957f\u5ea6\u8d85\u8fc7 <code>max_allowed_statements</code> \u5f15\u8d77\u7684\uff0c\u901a\u8fc7\u4fee\u6539 <code>nebula-graphd.conf</code> \u914d\u7f6e\u6587\u4ef6\u7684 <code>etc</code> \u76ee\u5f55\u4e0b <code>--max_allowed_statements</code> \u53c2\u6570\u9879\uff0c\u80fd\u907f\u514d\u8bed\u53e5\u63d2\u5165\u62a5\u9519\u3002</p>"},{"location":"20.appendix/0.FAQ/#_5","title":"\u5173\u4e8e\u8bbe\u8ba1\u4e0e\u529f\u80fd","text":""},{"location":"20.appendix/0.FAQ/#time_spent","title":"\u8fd4\u56de\u6d88\u606f\u4e2d <code>time spent</code> \u7684\u542b\u4e49\u662f\u4ec0\u4e48\uff1f","text":"<p>\u5c06\u547d\u4ee4<code>SHOW SPACES</code>\u8fd4\u56de\u7684\u6d88\u606f\u4f5c\u4e3a\u793a\u4f8b\uff1a</p> <pre><code>nebula&gt; SHOW SPACES;\n+--------------------+\n| Name               |\n+--------------------+\n| \"basketballplayer\" |\n+--------------------+\nGot 1 rows (time spent 1235/1934 us)\n</code></pre> <ul> <li>\u7b2c\u4e00\u4e2a\u6570\u5b57<code>1235</code>\u8868\u793a\u6570\u636e\u5e93\u672c\u8eab\u6267\u884c\u8be5\u547d\u4ee4\u82b1\u8d39\u7684\u65f6\u95f4\uff0c\u5373\u67e5\u8be2\u5f15\u64ce\u4ece\u5ba2\u6237\u7aef\u63a5\u6536\u5230\u4e00\u4e2a\u67e5\u8be2\uff0c\u7136\u540e\u4ece\u5b58\u50a8\u670d\u52a1\u5668\u83b7\u53d6\u6570\u636e\u5e76\u6267\u884c\u4e00\u7cfb\u5217\u8ba1\u7b97\u6240\u82b1\u8d39\u7684\u65f6\u95f4\u3002</li> </ul> <ul> <li>\u7b2c\u4e8c\u4e2a\u6570\u5b57<code>1934</code>\u8868\u793a\u4ece\u5ba2\u6237\u7aef\u89d2\u5ea6\u770b\u6240\u82b1\u8d39\u7684\u65f6\u95f4\uff0c\u5373\u4ece\u5ba2\u6237\u7aef\u53d1\u9001\u8bf7\u6c42\u3001\u63a5\u6536\u7ed3\u679c\uff0c\u7136\u540e\u5728\u5c4f\u5e55\u4e0a\u663e\u793a\u7ed3\u679c\u6240\u82b1\u8d39\u7684\u65f6\u95f4\u3002</li> </ul>"},{"location":"20.appendix/0.FAQ/#nebulagraph_nebula-storaged","title":"\u4e3a\u4ec0\u4e48\u5728\u6b63\u5e38\u8fde\u63a5 NebulaGraph \u540e\uff0c<code>nebula-storaged</code>\u8fdb\u7a0b\u7684\u7aef\u53e3\u53f7\u4e00\u76f4\u663e\u793a\u7ea2\u8272\uff1f","text":"<p><code>nebula-storaged</code>\u8fdb\u7a0b\u7684\u7aef\u53e3\u53f7\u7684\u7ea2\u8272\u95ea\u70c1\u72b6\u6001\u662f\u56e0\u4e3a<code>nebula-storaged</code>\u5728\u542f\u52a8\u6d41\u7a0b\u4e2d\u4f1a\u7b49\u5f85<code>nebula-metad</code>\u6dfb\u52a0\u5f53\u524d Storage \u670d\u52a1\uff0c\u5f53\u524d Storage \u670d\u52a1\u6536\u5230 Ready \u4fe1\u53f7\u540e\u624d\u4f1a\u6b63\u5f0f\u542f\u52a8\u670d\u52a1\u3002\u4ece 3.0.0 \u7248\u672c\u5f00\u59cb\uff0cMeta \u670d\u52a1\u65e0\u6cd5\u76f4\u63a5\u8bfb\u5199\u5728\u914d\u7f6e\u6587\u4ef6\u4e2d\u6dfb\u52a0\u7684 Storage \u670d\u52a1\uff0c\u914d\u7f6e\u6587\u4ef6\u7684\u4f5c\u7528\u4ec5\u4ec5\u662f\u5c06 Storage \u670d\u52a1\u6ce8\u518c\u81f3 Meta \u670d\u52a1\u4e2d\u3002\u7528\u6237\u5fc5\u987b\u4f7f\u7528<code>ADD HOSTS</code>\u547d\u4ee4\u540e\uff0c\u624d\u80fd\u4f7f Meta \u670d\u52a1\u6b63\u5e38\u8bfb\u5199 Storage \u670d\u52a1\u3002\u66f4\u591a\u4fe1\u606f\uff0c\u53c2\u89c1\u7ba1\u7406 Storage \u4e3b\u673a\u3002</p>"},{"location":"20.appendix/0.FAQ/#nebulagraph","title":"\u4e3a\u4ec0\u4e48 NebulaGraph \u7684\u8fd4\u56de\u7ed3\u679c\u6bcf\u884c\u4e4b\u95f4\u6ca1\u6709\u6a2a\u7ebf\u5206\u9694\u4e86\uff1f","text":"<p>\u8fd9\u662f NebulaGraph Console 2.6.0 \u7248\u672c\u7684\u53d8\u52a8\u9020\u6210\u7684\uff0c\u4e0d\u662f NebulaGraph \u5185\u6838\u7684\u53d8\u66f4\uff0c\u4e0d\u5f71\u54cd\u8fd4\u56de\u6570\u636e\u672c\u8eab\u7684\u5185\u5bb9\u3002</p>"},{"location":"20.appendix/0.FAQ/#_6","title":"\u5173\u4e8e\u60ac\u6302\u8fb9","text":"<p>\u60ac\u6302\u8fb9 (Dangling edge) \u662f\u6307\u4e00\u6761\u8fb9\u7684\u8d77\u70b9\u6216\u8005\u7ec8\u70b9\u5728\u6570\u636e\u5e93\u4e2d\u4e0d\u5b58\u5728\u3002</p> <p>NebulaGraph  master \u7684\u6570\u636e\u6a21\u578b\u4e2d\uff0c\u7531\u4e8e\u8bbe\u8ba1\u5141\u8bb8\u56fe\u4e2d\u5b58\u5728\u201c\u60ac\u6302\u8fb9\u201d\uff1b \u6ca1\u6709 openCypher \u4e2d\u7684 MERGE \u8bed\u53e5\u3002 \u5bf9\u4e8e\u60ac\u6302\u8fb9\u7684\u4fdd\u8bc1\u5b8c\u5168\u4f9d\u8d56\u5e94\u7528\u5c42\u9762\u3002 \u8be6\u89c1 INSERT VERTEX, DELETE VERTEX, INSERT EDGE, DELETE EDGE\u3002</p>"},{"location":"20.appendix/0.FAQ/#create_spacereplica_factor_2","title":"\u53ef\u4ee5\u5728<code>CREATE SPACE</code>\u65f6\u8bbe\u7f6e<code>replica_factor</code>\u4e3a\u5076\u6570\uff08\u4f8b\u5982\u8bbe\u7f6e\u4e3a 2\uff09\u5417\uff1f","text":"<p>\u4e0d\u8981\u8fd9\u6837\u8bbe\u7f6e\u3002</p> <p>Storage \u670d\u52a1\u4f7f\u7528 Raft \u534f\u8bae\uff08\u591a\u6570\u8868\u51b3\uff09\uff0c\u4e3a\u4fdd\u8bc1\u53ef\u7528\u6027\uff0c\u8981\u6c42\u51fa\u6545\u969c\u7684\u526f\u672c\u6570\u91cf\u4e0d\u80fd\u8fbe\u5230\u4e00\u534a\u3002</p> <p>\u5f53\u673a\u5668\u6570\u91cf\u4e3a 1 \u65f6\uff0c<code>replica_factor</code>\u53ea\u80fd\u8bbe\u7f6e\u4e3a<code>1</code>\u3002</p> <p>\u5f53\u673a\u5668\u6570\u91cf\u8db3\u591f\u65f6\uff0c\u5982\u679c<code>replica_factor=2</code>\uff0c\u5f53\u5176\u4e2d\u4e00\u4e2a\u526f\u672c\u6545\u969c\u65f6\uff0c\u5c31\u4f1a\u5bfc\u81f4\u7cfb\u7edf\u65e0\u6cd5\u6b63\u5e38\u5de5\u4f5c\uff1b\u5982\u679c<code>replica_factor=4</code>\uff0c\u53ea\u80fd\u6709\u4e00\u4e2a\u526f\u672c\u53ef\u4ee5\u51fa\u73b0\u6545\u969c\uff0c\u8fd9\u548c<code>replica_factor=3</code>\u662f\u4e00\u6837\u3002\u4ee5\u6b64\u7c7b\u63a8\uff0c\u6240\u4ee5<code>replica_factor</code>\u8bbe\u7f6e\u4e3a\u5947\u6570\u5373\u53ef\u3002</p> <p>\u5efa\u8bae\u5728\u751f\u4ea7\u73af\u5883\u4e2d\u8bbe\u7f6e<code>replica_factor=3</code>\uff0c\u6d4b\u8bd5\u73af\u5883\u4e2d\u8bbe\u7f6e<code>replica_factor=1</code>\uff0c\u4e0d\u8981\u4f7f\u7528\u5076\u6570\u3002</p>"},{"location":"20.appendix/0.FAQ/#_7","title":"\u662f\u5426\u652f\u6301\u505c\u6b62\u6216\u8005\u4e2d\u65ad\u6162\u67e5\u8be2","text":"<p>\u652f\u6301\u3002</p> <p>\u8be6\u60c5\u8bf7\u53c2\u89c1\u7ec8\u6b62\u67e5\u8be2\u3002</p>"},{"location":"20.appendix/0.FAQ/#gomatch","title":"\u4f7f\u7528<code>GO</code>\u548c<code>MATCH</code>\u6267\u884c\u76f8\u540c\u8bed\u4e49\u7684\u67e5\u8be2\uff0c\u67e5\u8be2\u7ed3\u679c\u4e3a\u4ec0\u4e48\u4e0d\u540c\uff1f","text":"<p>\u539f\u56e0\u53ef\u80fd\u6709\u4ee5\u4e0b\u51e0\u79cd\uff1a</p> <ul> <li><code>GO</code>\u67e5\u8be2\u5230\u4e86\u60ac\u6302\u8fb9\u3002</li> </ul> <ul> <li><code>RETURN</code> \u547d\u4ee4\u672a\u6307\u5b9a\u6392\u5e8f\u65b9\u5f0f\u3002</li> </ul> <ul> <li>\u89e6\u53d1\u4e86 Storage \u670d\u52a1\u4e2d<code>max_edge_returned_per_vertex</code>\u5b9a\u4e49\u7684\u7a20\u5bc6\u70b9\u622a\u65ad\u9650\u5236\u3002</li> </ul> <ul> <li> <p>\u8def\u5f84\u7684\u7c7b\u578b\u4e0d\u540c\uff0c\u5bfc\u81f4\u67e5\u8be2\u7ed3\u679c\u53ef\u80fd\u4f1a\u4e0d\u540c\u3002</p> <ul> <li><code>GO</code>\u8bed\u53e5\u91c7\u7528\u7684\u662f<code>walk</code>\u7c7b\u578b\uff0c\u904d\u5386\u65f6\u70b9\u548c\u8fb9\u53ef\u4ee5\u91cd\u590d\u3002</li> </ul> <ul> <li><code>MATCH</code>\u8bed\u53e5\u517c\u5bb9 openCypher\uff0c\u91c7\u7528\u7684\u662f<code>trail</code>\u7c7b\u578b\uff0c\u904d\u5386\u65f6\u53ea\u6709\u70b9\u53ef\u4ee5\u91cd\u590d\uff0c\u8fb9\u4e0d\u53ef\u4ee5\u91cd\u590d\u3002</li> </ul> </li> </ul> <p>\u56e0\u8def\u5f84\u7c7b\u578b\u4e0d\u540c\u5bfc\u81f4\u67e5\u8be2\u7ed3\u679c\u4e0d\u540c\u7684\u793a\u4f8b\u56fe\u548c\u8bf4\u660e\u5982\u4e0b\u3002</p> <p></p> <p>\u4ece\u70b9 A \u5f00\u59cb\u67e5\u8be2\u8ddd\u79bb 5 \u8df3\u7684\u70b9\uff0c\u90fd\u4f1a\u67e5\u8be2\u5230\u70b9 C\uff08<code>A-&gt;B-&gt;C-&gt;D-&gt;E-&gt;C</code>\uff09\uff0c\u67e5\u8be2 6 \u8df3\u7684\u70b9\u65f6\uff0c<code>GO</code>\u8bed\u53e5\u4f1a\u67e5\u8be2\u5230\u70b9 D\uff08<code>A-&gt;B-&gt;C-&gt;D-&gt;E-&gt;C-&gt;D</code>\uff09\uff0c\u56e0\u4e3a\u8fb9<code>C-&gt;D</code>\u53ef\u4ee5\u91cd\u590d\u67e5\u8be2\uff0c\u800c<code>MATCH</code>\u8bed\u53e5\u67e5\u8be2\u4e3a\u7a7a\uff0c\u56e0\u4e3a\u8fb9\u4e0d\u53ef\u4ee5\u91cd\u590d\u3002</p> <p>\u6240\u4ee5\u4f7f\u7528<code>GO</code>\u548c<code>MATCH</code>\u6267\u884c\u76f8\u540c\u8bed\u4e49\u7684\u67e5\u8be2\uff0c\u53ef\u80fd\u4f1a\u51fa\u73b0<code>MATCH</code>\u8bed\u53e5\u7684\u67e5\u8be2\u7ed3\u679c\u6bd4<code>GO</code>\u8bed\u53e5\u5c11\u3002</p> <p>\u5173\u4e8e\u8def\u5f84\u7684\u8be6\u7ec6\u8bf4\u660e\uff0c\u8bf7\u53c2\u89c1\u7ef4\u57fa\u767e\u79d1\u3002</p>"},{"location":"20.appendix/0.FAQ/#tag_edge_type","title":"\u5982\u4f55\u7edf\u8ba1\u6bcf\u79cd Tag \u6709\u591a\u5c11\u4e2a\u70b9\uff0c\u6bcf\u4e2a Edge type \u6709\u591a\u5c11\u6761\u8fb9\uff1f","text":"<p>\u8bf7\u53c2\u89c1 show-stats\u3002</p>"},{"location":"20.appendix/0.FAQ/#tag_edge_type_1","title":"\u5982\u4f55\u83b7\u53d6\u6bcf\u79cd Tag \u7684\u6240\u6709\u70b9\uff0c\u6216\u8005\u6bcf\u79cd Edge type \u7684\u6240\u6709\u8fb9\uff1f","text":"<ol> <li> <p>\u5efa\u7acb\u5e76\u91cd\u5efa\u7d22\u5f15\u3002</p> <pre><code>&gt; CREATE TAG INDEX IF NOT EXISTS i_player ON player();\n&gt; REBUILD TAG INDEX i_player;\n</code></pre> </li> <li> <p>\u4f7f\u7528<code>LOOKUP</code>\u6216<code>MATCH</code>\u8bed\u53e5\u3002\u4f8b\u5982\uff1a</p> <pre><code>&gt; LOOKUP ON player;\n&gt; MATCH (n:player) RETURN n;\n</code></pre> </li> </ol> <p>\u66f4\u591a\u8be6\u60c5\u8bf7\u53c2\u89c1 INDEX\u3001LOOKUP \u548c MATCH\u3002</p>"},{"location":"20.appendix/0.FAQ/#tagedge_type","title":"\u80fd\u4e0d\u80fd\u7528\u4e2d\u6587\u5b57\u7b26\u505a\u6807\u8bc6\u7b26\uff0c\u6bd4\u5982\u56fe\u7a7a\u95f4\u3001Tag\u3001Edge type\u3001\u5c5e\u6027\u3001\u7d22\u5f15\u7684\u540d\u79f0\uff1f","text":"<p>\u80fd\uff0c\u8be6\u60c5\u53c2\u89c1\u5173\u952e\u5b57\u548c\u4fdd\u7559\u5b57\u3002</p>"},{"location":"20.appendix/0.FAQ/#_8","title":"\u83b7\u53d6\u6307\u5b9a\u70b9\u7684\u51fa\u5ea6\uff08\u6216\u8005\u5165\u5ea6\uff09?","text":"<p>\u4e00\u4e2a\u70b9\u7684\u201c\u51fa\u5ea6\u201d\u662f\u6307\u4ece\u8be5\u70b9\u51fa\u53d1\u7684\u201c\u8fb9\u201d\u7684\u6761\u6570\u3002\u5165\u5ea6\uff0c\u662f\u6307\u6307\u5411\u8be5\u70b9\u7684\u8fb9\u7684\u6761\u6570\u3002</p> <pre><code>nebula &gt; MATCH (s)-[e]-&gt;() WHERE id(s) == \"given\" RETURN count(e); #\u51fa\u5ea6\nnebula &gt; MATCH (s)&lt;-[e]-() WHERE id(s) == \"given\" RETURN count(e); #\u5165\u5ea6\n</code></pre> <p>\u56e0\u4e3a\u6ca1\u6709\u5bf9\u51fa\u5ea6\u548c\u5165\u5ea6\u7684\u8fdb\u884c\u7279\u6b8a\u5904\u7406\uff08\u4f8b\u5982\u7d22\u5f15\u6216\u8005\u7f13\u5b58\uff09\uff0c\u8fd9\u662f\u4e00\u4e2a\u8f83\u6162\u7684\u64cd\u4f5c\u3002\u7279\u522b\u5f53\u9047\u5230\u8d85\u7ea7\u8282\u70b9\u65f6\uff0c\u53ef\u80fd\u4f1a\u53d1\u751fOOM\u3002</p>"},{"location":"20.appendix/0.FAQ/#_9","title":"\u662f\u5426\u6709\u529e\u6cd5\u5feb\u901f\u83b7\u53d6\u201c\u6240\u6709\u201d\u70b9\u7684\u51fa\u5ea6\u548c\u5165\u5ea6\uff1f","text":"<p>\u6ca1\u6709\u76f4\u63a5\u547d\u4ee4\u3002</p> <p>\u53ef\u4ee5\u4f7f\u7528 NebulaGraph Algorithm\u3002</p>"},{"location":"20.appendix/0.FAQ/#_10","title":"\u5173\u4e8e\u8fd0\u7ef4","text":""},{"location":"20.appendix/0.FAQ/#_11","title":"\u8fd0\u884c\u65e5\u5fd7\u6587\u4ef6\u8fc7\u5927\u65f6\u5982\u4f55\u56de\u6536\u65e5\u5fd7\uff1f","text":"<p>NebulaGraph\u4f7f\u7528 glog \u6253\u5370\u65e5\u5fd7\uff0cglog \u6ca1\u6709\u65e5\u5fd7\u56de\u6536\u7684\u529f\u80fd\u3002\u7528\u6237\u53ef\u4ee5\u901a\u8fc7\u5b9a\u65f6\u4efb\u52a1\u6216\u65e5\u5fd7\u7ba1\u7406\u5de5\u5177 logrotate \u6765\u7ba1\u7406\u8fd0\u884c\u65e5\u5fd7\u3002\u64cd\u4f5c\u8be6\u60c5\uff0c\u53c2\u89c1\u56de\u6536\u65e5\u5fd7\u3002</p>"},{"location":"20.appendix/0.FAQ/#nebulagraph_1","title":"\u5982\u4f55\u67e5\u770b NebulaGraph \u7248\u672c","text":"<p>\u670d\u52a1\u8fd0\u884c\u65f6\uff1a<code>nebula-console</code> \u4e2d\u6267\u884c\u547d\u4ee4 <code>SHOW HOSTS META</code>\uff0c\u8be6\u89c1 SHOW HOSTS</p> <p>\u670d\u52a1\u672a\u8fd0\u884c\u65f6\uff1a\u5728\u5b89\u88c5\u8def\u5f84\u7684<code>bin</code>\u76ee\u5f55\u5185\uff0c\u6267\u884c<code>./&lt;binary_name&gt; --version</code>\u547d\u4ee4\uff0c\u53ef\u4ee5\u67e5\u770b\u5230 version \u548c GitHub \u4e0a\u7684 commit ID\uff0c\u4f8b\u5982\uff1a</p> <pre><code>$ ./nebula-graphd --version\n</code></pre> <ul> <li> <p>Docker Compose \u90e8\u7f72</p> <p>\u67e5\u770b Docker Compose \u90e8\u7f72\u7684 NebulaGraph \u7248\u672c\uff0c\u65b9\u5f0f\u548c\u7f16\u8bd1\u5b89\u88c5\u7c7b\u4f3c\uff0c\u53ea\u662f\u8981\u5148\u8fdb\u5165\u5bb9\u5668\u5185\u90e8\uff0c\u793a\u4f8b\u547d\u4ee4\u5982\u4e0b\uff1a</p> <pre><code>docker exec -it nebula-docker-compose_graphd_1 bash\ncd bin/\n./nebula-graphd --version\n</code></pre> </li> </ul> <ul> <li> <p>RPM/DEB \u5305\u5b89\u88c5</p> <p>\u6267\u884c<code>rpm -qa |grep nebula</code>\u5373\u53ef\u67e5\u770b\u7248\u672c\u3002</p> </li> </ul>"},{"location":"20.appendix/0.FAQ/#host_host_offline","title":"\u4fee\u6539 Host \u540d\u79f0\u540e\uff0c\u65e7\u7684 Host \u4e00\u76f4\u663e\u793a <code>OFFLINE</code> \u600e\u4e48\u529e\uff1f","text":"<p><code>OFFLINE</code> \u72b6\u6001\u7684 Host \u5c06\u5728\u4e00\u5929\u540e\u81ea\u52a8\u5220\u9664\u3002</p>"},{"location":"20.appendix/0.FAQ/#dmp","title":"\u5982\u4f55\u67e5\u770b dmp \u6587\u4ef6\uff1f","text":"<p>dmp \u6587\u4ef6\u662f\u9519\u8bef\u62a5\u544a\u6587\u4ef6\uff0c\u8be6\u7ec6\u8bb0\u5f55\u4e86\u8fdb\u7a0b\u9000\u51fa\u7684\u4fe1\u606f\uff0c\u53ef\u4ee5\u7528\u64cd\u4f5c\u7cfb\u7edf\u81ea\u5e26\u7684 gdb \u5de5\u5177\u67e5\u770b\u3002Coredump \u6587\u4ef6\u9ed8\u8ba4\u4fdd\u5b58\u5728\u542f\u52a8\u4e8c\u8fdb\u5236\u7684\u5f53\u524d\u76ee\u5f55\u4e0b\uff08\u9ed8\u8ba4\u4e3a<code>/usr/local/nebula</code>\u76ee\u5f55\uff09\uff0c\u5728 NebulaGraph \u670d\u52a1 crash \u65f6\uff0c\u7cfb\u7edf\u4f1a\u81ea\u52a8\u751f\u6210\u3002</p> <ol> <li>\u67e5\u770b Core \u6587\u4ef6\u8fdb\u7a0b\u540d\u5b57\uff0cpid \u4e00\u822c\u4e3a\u6570\u503c\u3002    <pre><code>$ file core.&lt;pid&gt;\n</code></pre></li> <li>\u4f7f\u7528 gdb \u8c03\u8bd5\u3002    <pre><code>$ gdb &lt;process.name&gt; core.&lt;pid&gt;\n</code></pre></li> <li>\u67e5\u770b\u6587\u4ef6\u5185\u5bb9\u3002    <pre><code>$(gdb) bt\n</code></pre> \u4f8b\u5982\uff1a</li> </ol> <pre><code> $ file core.1316027\n core.1316027: ELF 64-bit LSB core file, x86-64, version 1 (SYSV), SVR4-style, from '/home/workspace/fork/nebula-debug/bin/nebula-metad --flagfile /home/k', real uid: 1008, effective uid: 1008, real gid: 1008, effective gid: 1008, execfn: '/home/workspace/fork/nebula-debug/bin/nebula-metad', platform: 'x86_64'\n\n $ gdb /home/workspace/fork/nebula-debug/bin/nebula-metad core.1316027\n\n $(gdb) bt\n #0  0x00007f9de58fecf5 in __memcpy_ssse3_back () from /lib64/libc.so.6\n #1  0x0000000000eb2299 in void std::__cxx11::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt;::_M_construct&lt;char*&gt;(char*, char*, std::forward_iterator_tag) ()\n #2  0x0000000000ef71a7 in nebula::meta::cpp2::QueryDesc::QueryDesc(nebula::meta::cpp2::QueryDesc const&amp;) ()\n ...\n</code></pre> <p>\u5982\u679c\u7528\u6237\u4e0d\u6e05\u695a dmp \u6253\u5370\u51fa\u6765\u7684\u76f8\u5173\u4fe1\u606f\uff0c\u53ef\u4ee5\u5c06\u6253\u5370\u51fa\u6765\u7684\u5185\u5bb9\uff0c\u5e26\u4e0a\u64cd\u4f5c\u7cfb\u7edf\u7248\u672c\u3001\u786c\u4ef6\u914d\u7f6e\u3001Core\u6587\u4ef6\u4ea7\u751f\u524d\u540e\u7684\u9519\u8bef\u65e5\u5fd7\u548c\u53ef\u80fd\u5bfc\u81f4\u9519\u8bef\u7684\u64cd\u4f5c\u8d34\u5728 NebulaGraph \u8bba\u575b\u4e0a\u5bfb\u6c42\u5e2e\u52a9\u3002</p>"},{"location":"20.appendix/0.FAQ/#systemctl_nebulagraph","title":"\u5982\u4f55\u901a\u8fc7 systemctl \u8bbe\u7f6e\u5f00\u673a\u81ea\u52a8\u542f\u52a8 NebulaGraph \u670d\u52a1\uff1f","text":"<ol> <li> <p>\u6267\u884c <code>systemctl enable</code> \u542f\u52a8 metad\u3001graphd \u548c storaged \u670d\u52a1\u3002</p> <pre><code>[root]# systemctl enable nebula-metad.service\nCreated symlink from /etc/systemd/system/multi-user.target.wants/nebula-metad.service to /usr/lib/systemd/system/nebula-metad.service.\n[root]# systemctl enable nebula-graphd.service\nCreated symlink from /etc/systemd/system/multi-user.target.wants/nebula-graphd.service to /usr/lib/systemd/system/nebula-graphd.service.\n[root]# systemctl enable nebula-storaged.service\nCreated symlink from /etc/systemd/system/multi-user.target.wants/nebula-storaged.service to /usr/lib/systemd/system/nebula-storaged.service.\n</code></pre> </li> <li> <p>\u914d\u7f6e metad\u3001graphd \u548c storaged \u7684 service \u6587\u4ef6\uff0c\u8bbe\u7f6e\u670d\u52a1\u81ea\u52a8\u62c9\u8d77\u3002</p> <p>Caution</p> <p>\u5728\u914d\u7f6eservice\u6587\u4ef6\u65f6\u9700\u6ce8\u610f\u4ee5\u4e0b\u51e0\u70b9\uff1a   - PIDFile\u3001ExecStart\u3001ExecReload\u3001ExecStop \u53c2\u6570\u7684\u8def\u5f84\u9700\u8981\u4e0e\u670d\u52a1\u5668\u4e0a\u7684\u4e00\u81f4\u3002   - RestartSec \u4e3a\u91cd\u542f\u524d\u7b49\u5f85\u7684\u65f6\u957f(\u79d2)\uff0c\u53ef\u6839\u636e\u5b9e\u9645\u60c5\u51b5\u4fee\u6539\u3002   - \uff08\u53ef\u9009\uff09StartLimitInterval \u4e3a\u65e0\u9650\u6b21\u91cd\u542f\uff0c\u9ed8\u8ba4\u662f 10 \u79d2\u5185\u5982\u679c\u91cd\u542f\u8d85\u8fc7 5 \u6b21\u5219\u4e0d\u518d\u91cd\u542f\uff0c\u8bbe\u7f6e\u4e3a 0 \u8868\u793a\u4e0d\u9650\u6b21\u6570\u91cd\u542f\u3002   - \uff08\u53ef\u9009\uff09LimitNOFILE \u4e3a\u670d\u52a1\u6700\u5927\u6587\u4ef6\u6253\u5f00\u6570\uff0c\u9ed8\u8ba4\u4e3a1024\uff0c\u53ef\u6839\u636e\u5b9e\u9645\u60c5\u51b5\u4fee\u6539\u3002</p> <p>\u914d\u7f6e metad \u670d\u52a1\u7684 service \u6587\u4ef6\uff1a  <pre><code>$ vi /usr/lib/systemd/system/nebula-metad.service\n\n[Unit]\nDescription=Nebula Graph Metad Service\nAfter=network.target\n\n[Service ]\nType=forking\nRestart=always\nRestartSec=15s\nPIDFile=/usr/local/nebula/pids/nebula-metad.pid\nExecStart=/usr/local/nebula/scripts/nebula.service start metad\nExecReload=/usr/local/nebula/scripts/nebula.service restart metad\nExecStop=/usr/local/nebula/scripts/nebula.service stop metad\nPrivateTmp=true\nStartLimitInterval=0\nLimitNOFILE=1024\n\n[Install]\nWantedBy=multi-user.target\n</code></pre></p> <p>\u914d\u7f6e graphd \u670d\u52a1\u7684 service \u6587\u4ef6\uff1a  <pre><code>$ vi /usr/lib/systemd/system/nebula-graphd.service\n[Unit]\nDescription=Nebula Graph Graphd Service\nAfter=network.target\n\n[Service]\nType=forking\nRestart=always\nRestartSec=15s\nPIDFile=/usr/local/nebula/pids/nebula-graphd.pid\nExecStart=/usr/local/nebula/scripts/nebula.service start graphd\nExecReload=/usr/local/nebula/scripts/nebula.service restart graphd\nExecStop=/usr/local/nebula/scripts/nebula.service stop graphd\nPrivateTmp=true\nStartLimitInterval=0\nLimitNOFILE=1024\n\n[Install]\nWantedBy=multi-user.target\n</code></pre></p> <p>\u914d\u7f6e storaged \u670d\u52a1\u7684 service \u6587\u4ef6\uff1a  <pre><code>$ vi /usr/lib/systemd/system/nebula-storaged.service\n[Unit]\nDescription=Nebula Graph Storaged Service\nAfter=network.target\n\n[Service]\nType=forking\nRestart=always\nRestartSec=15s\nPIDFile=/usr/local/nebula/pids/nebula-storaged.pid\nExecStart=/usr/local/nebula/scripts/nebula.service start storaged\nExecReload=/usr/local/nebula/scripts/nebula.service restart storaged\nExecStop=/usr/local/nebula/scripts/nebula.service stop storaged\nPrivateTmp=true\nStartLimitInterval=0\nLimitNOFILE=1024\n\n[Install]\nWantedBy=multi-user.target\n</code></pre></p> </li> <li> <p>reload \u914d\u7f6e\u6587\u4ef6\u3002</p> <pre><code>[root]# sudo systemctl daemon-reload\n</code></pre> </li> <li> <p>\u91cd\u542f\u670d\u52a1\u3002</p> <pre><code>$ systemctl restart nebula-metad.service\n$ systemctl restart nebula-graphd.service\n$ systemctl restart nebula-storaged.service\n</code></pre> </li> </ol>"},{"location":"20.appendix/0.FAQ/#_12","title":"\u5173\u4e8e\u8fde\u63a5","text":""},{"location":"20.appendix/0.FAQ/#_13","title":"\u9632\u706b\u5899\u4e2d\u9700\u8981\u5f00\u653e\u54ea\u4e9b\u7aef\u53e3\uff1f","text":"<p>\u5982\u679c\u6ca1\u6709\u4fee\u6539\u8fc7\u914d\u7f6e\u6587\u4ef6\u4e2d\u9884\u8bbe\u7684\u7aef\u53e3\uff0c\u8bf7\u5728\u9632\u706b\u5899\u4e2d\u5f00\u653e\u5982\u4e0b\u7aef\u53e3\uff1a</p> \u670d\u52a1\u7c7b\u578b \u7aef\u53e3 Meta 9559, 9560, 19559 Graph 9669, 19669 Storage 9777 ~ 9780, 19779 <p>\u5982\u679c\u4fee\u6539\u8fc7\u914d\u7f6e\u6587\u4ef6\u4e2d\u9884\u8bbe\u7684\u7aef\u53e3\uff0c\u8bf7\u627e\u51fa\u5b9e\u9645\u4f7f\u7528\u7684\u7aef\u53e3\u5e76\u5728\u9632\u706b\u5899\u4e2d\u5f00\u653e\u5b83\u4eec\u3002</p> <p>\u66f4\u591a\u7aef\u53e3\u4fe1\u606f\uff0c\u53c2\u89c1\u516c\u53f8\u4ea7\u54c1\u7aef\u53e3\u5168\u96c6\u3002</p>"},{"location":"20.appendix/0.FAQ/#_14","title":"\u5982\u4f55\u6d4b\u8bd5\u7aef\u53e3\u662f\u5426\u5df2\u5f00\u653e\uff1f","text":"<p>\u7528\u6237\u53ef\u4ee5\u4f7f\u7528\u5982\u4e0b telnet \u547d\u4ee4\u68c0\u67e5\u7aef\u53e3\u72b6\u6001\uff1a</p> <pre><code>telnet &lt;ip&gt; &lt;port&gt;\n</code></pre> <p>Note</p> <p>\u5982\u679c\u65e0\u6cd5\u4f7f\u7528 telnet \u547d\u4ee4\uff0c\u8bf7\u5148\u68c0\u67e5\u4e3b\u673a\u4e2d\u662f\u5426\u5b89\u88c5\u5e76\u542f\u52a8\u4e86 telnet\u3002</p> <p>\u793a\u4f8b\uff1a</p> <pre><code>// \u5982\u679c\u7aef\u53e3\u5df2\u5f00\u653e\uff1a\n$ telnet 192.168.1.10 9669\nTrying 192.168.1.10...\nConnected to 192.168.1.10.\nEscape character is '^]'.\n\n// \u5982\u679c\u7aef\u53e3\u672a\u5f00\u653e\uff1a\n$ telnet 192.168.1.10 9777\nTrying 192.168.1.10...\ntelnet: connect to address 192.168.1.10: Connection refused\n</code></pre>"},{"location":"20.appendix/0.FAQ/#max_sessions_per_ip_per_user","title":"\u4f1a\u8bdd\u6570\u91cf\u8fbe\u5230<code>max_sessions_per_ip_per_user</code>\u6240\u8bbe\u503c\u4e0a\u9650\u65f6\u600e\u4e48\u529e\uff1f","text":"<p>\u5f53\u4f1a\u8bdd\u6570\u91cf\u8fbe\u5230\u4e0a\u9650\u65f6\uff0c\u5373\u8d85\u8fc7<code>max_sessions_per_ip_per_user</code>\u6240\u8bbe\u503c\uff0c\u5728\u8fde\u63a5 NebulaGraph \u7684\u65f6\u5019\uff0c\u4f1a\u51fa\u73b0\u4ee5\u4e0b\u62a5\u9519\uff1a</p> <pre><code>Fail to create a new session from connection pool, fail to authenticate, error: Create Session failed: Too many sessions created from 127.0.0.1 by user root. the threshold is 2. You can change it by modifying 'max_sessions_per_ip_per_user' in nebula-graphd.conf\n</code></pre> <p>\u7528\u6237\u53ef\u4ee5\u901a\u8fc7\u4ee5\u4e0b\u4e09\u79cd\u65b9\u5f0f\u89e3\u51b3\u95ee\u9898\uff1a</p> <ol> <li>\u6267\u884c<code>KILL SESSION</code>\u547d\u4ee4\uff0c\u5173\u95ed\u4e0d\u9700\u8981\u7684 Session\u3002\u8be6\u60c5\u53c2\u89c1\u7ec8\u6b62\u4f1a\u8bdd\u3002</li> <li>\u5728 Graph \u670d\u52a1\u7684\u914d\u7f6e\u6587\u4ef6<code>nebula_graphd.conf</code>\u4e2d\u589e\u5927<code>max_sessions_per_ip_per_user</code>\u7684\u503c\uff0c\u589e\u52a0\u53ef\u4ee5\u521b\u5efa\u7684\u4f1a\u8bdd\u603b\u6570\u3002\u91cd\u542f Graph \u670d\u52a1\u4f7f\u914d\u7f6e\u751f\u6548\u3002</li> <li>\u5728 Graph \u670d\u52a1\u7684\u914d\u7f6e\u6587\u4ef6<code>nebula_graphd.conf</code>\u4e2d\u51cf\u5c0f<code>session_idle_timeout_secs</code>\u53c2\u6570\u7684\u503c\uff0c\u964d\u4f4e\u7a7a\u95f2\u4f1a\u8bdd\u7684\u8d85\u65f6\u65f6\u95f4\u3002\u91cd\u542f Graph \u670d\u52a1\u4f7f\u914d\u7f6e\u751f\u6548\u3002</li> </ol>"},{"location":"20.appendix/0.FAQ/#_15","title":"\u5173\u4e8e\u6269\u5bb9\u3001\u7f29\u5bb9","text":"<p>Warning</p> <p>\u96c6\u7fa4\u6269\u7f29\u5bb9\u529f\u80fd\u672a\u6b63\u5f0f\u5728\u793e\u533a\u7248\u4e2d\u53d1\u5e03\u3002\u4ee5\u4e0b\u6d89\u53ca<code>SUBMIT JOB BALANCE DATA REMOVE</code>\u548c<code>SUBMIT JOB BALANCE DATA</code>\u7684\u64cd\u4f5c\u5728\u793e\u533a\u7248\u4e2d\u5747\u4e3a\u5b9e\u9a8c\u6027\u529f\u80fd\uff0c\u529f\u80fd\u672a\u7a33\u5b9a\u3002\u5982\u9700\u4f7f\u7528\uff0c\u8bf7\u5148\u505a\u597d\u6570\u636e\u5907\u4efd\uff0c\u5e76\u4e14\u5728 Graph \u914d\u7f6e\u6587\u4ef6\u4e2d\u5c06<code>enable_experimental_feature</code>\u548c<code>enable_data_balance</code>\u5747\u8bbe\u7f6e\u4e3a<code>true</code>\u3002</p>"},{"location":"20.appendix/0.FAQ/#metagraphstorage","title":"\u5982\u4f55\u589e\u52a0\u6216\u51cf\u5c11 Meta\u3001Graph\u3001Storage \u8282\u70b9\u7684\u6570\u91cf","text":"<ul> <li> <p>NebulaGraph master \u672a\u63d0\u4f9b\u8fd0\u7ef4\u547d\u4ee4\u4ee5\u5b9e\u73b0\u81ea\u52a8\u6269\u7f29\u5bb9\uff0c\u4f46\u53ef\u53c2\u8003\u4ee5\u4e0b\u6b65\u9aa4\u5b9e\u73b0\u624b\u52a8\u6269\u7f29\u5bb9\uff1a</p> <ul> <li> <p>Meta \u7684\u6269\u5bb9\u548c\u7f29\u5bb9\uff1a Meta \u4e0d\u652f\u6301\u81ea\u52a8\u6269\u7f29\u5bb9\u3002</p> <p>Note</p> <p>\u7528\u6237\u53ef\u4ee5\u4f7f\u7528\u811a\u672c\u5de5\u5177 \u8fc1\u79fb Meta \u670d\u52a1\uff0c\u4f46\u662f\u9700\u8981\u81ea\u884c\u4fee\u6539 Graph \u670d\u52a1\u548c Storage \u670d\u52a1\u7684\u914d\u7f6e\u6587\u4ef6\u4e2d\u7684 Meta \u8bbe\u7f6e\u3002</p> </li> </ul> <ul> <li>Graph \u7684\u7f29\u5bb9\uff1a\u5c06\u8be5 Graph \u7684 IP \u4ece client \u7684\u4ee3\u7801\u4e2d\u79fb\u9664\uff0c\u5173\u95ed\u8be5 Graph \u8fdb\u7a0b\u3002</li> </ul> <ul> <li>Graph \u7684\u6269\u5bb9\uff1a\u5728\u65b0\u673a\u5668\u4e0a\u51c6\u5907 Graph \u4e8c\u8fdb\u5236\u6587\u4ef6\u548c\u914d\u7f6e\u6587\u4ef6\uff0c\u5728\u914d\u7f6e\u6587\u4ef6\u4e2d\u4fee\u6539\u6216\u589e\u52a0\u5df2\u5728\u8fd0\u884c\u7684 Meta \u5730\u5740\uff0c\u542f\u52a8 Graph \u8fdb\u7a0b\u3002</li> </ul> <ul> <li> <p>Storage \u7684\u7f29\u5bb9\uff1a\u6267\u884c<code>SUBMIT JOB BALANCE DATA REMOVE &lt;ip:port&gt;</code>\u548c<code>DROP HOSTS &lt;ip:port&gt;</code>\u3002\u5b8c\u6210\u540e\u5173\u95ed Storage \u8fdb\u7a0b\u3002</p> <p>Caution</p> <ul> <li>\u6267\u884c\u8be5\u547d\u4ee4\u8fc1\u79fb\u6307\u5b9a Storage \u8282\u70b9\u4e2d\u7684\u5206\u7247\u6570\u636e\u524d\uff0c\u9700\u8981\u786e\u4fdd\u5176\u4ed6 Storage \u8282\u70b9\u6570\u91cf\u8db3\u591f\u4ee5\u6ee1\u8db3\u8bbe\u7f6e\u7684\u526f\u672c\u6570\u3002\u4f8b\u5982\uff0c\u5982\u679c\u8bbe\u7f6e\u4e86\u526f\u672c\u6570\u4e3a 3\uff0c\u90a3\u4e48\u5728\u6267\u884c\u8be5\u547d\u4ee4\u524d\uff0c\u9700\u8981\u786e\u4fdd\u5176\u4ed6 Storage \u8282\u70b9\u6570\u91cf\u5927\u4e8e\u7b49\u4e8e 3\u3002</li> <li>\u5982\u679c\u5f85\u8fc1\u79fb\u7684 Storage \u8282\u70b9\u4e2d\u6709\u591a\u4e2a\u56fe\u7a7a\u95f4\u7684\u5206\u7247\uff0c\u9700\u8981\u5206\u522b\u5728\u6bcf\u4e2a\u56fe\u7a7a\u95f4\u5185\u6267\u884c\u8be5\u547d\u4ee4\u4ee5\u8fc1\u79fb\u8be5 Storage \u8282\u70b9\u4e2d\u7684\u6240\u6709\u5206\u7247\u3002</li> </ul> </li> </ul> <ul> <li> <p>Storage \u7684\u6269\u5bb9\uff1a\u5728\u65b0\u673a\u5668\u4e0a\u51c6\u5907 Storage \u4e8c\u8fdb\u5236\u6587\u4ef6\u548c\u914d\u7f6e\u6587\u4ef6\uff0c\u5728\u914d\u7f6e\u6587\u4ef6\u4e2d\u4fee\u6539\u6216\u589e\u52a0\u5df2\u5728\u8fd0\u884c\u7684 Meta \u5730\u5740\uff0c\u7136\u540e\u6ce8\u518c Storage \u5230 Meta \u5e76\u542f\u52a8 Storage \u8fdb\u7a0b\u3002\u8be6\u60c5\u53c2\u89c1\u6ce8\u518c Storage \u670d\u52a1\u3002</p> <p>Storage \u6269\u7f29\u5bb9\u4e4b\u540e\uff0c\u6839\u636e\u9700\u8981\u6267\u884c<code>SUBMIT JOB BALANCE DATA</code>\u5c06\u5f53\u524d\u56fe\u7a7a\u95f4\u7684\u5206\u7247\u5e73\u5747\u5206\u914d\u5230\u6240\u6709 Storage \u8282\u70b9\u4e2d\u548c\u6267\u884c<code>SUBMIT JOB BALANCE LEADER</code>\u547d\u4ee4\u5747\u8861\u5206\u5e03\u6240\u6709\u56fe\u7a7a\u95f4\u4e2d\u7684 leader\u3002\u8fd0\u884c\u547d\u4ee4\u524d\uff0c\u9700\u8981\u9009\u62e9\u4e00\u4e2a\u56fe\u7a7a\u95f4\u3002</p> </li> </ul> </li> </ul>"},{"location":"20.appendix/0.FAQ/#storage","title":"\u5982\u4f55\u5728 Storage \u8282\u70b9\u4e2d\u589e\u52a0\u6216\u51cf\u5c11\u78c1\u76d8","text":"<p>\u76ee\u524d\uff0cStorage \u4e0d\u652f\u6301\u52a8\u6001\u8bc6\u522b\u65b0\u7684\u78c1\u76d8\u3002\u53ef\u4ee5\u901a\u8fc7\u4ee5\u4e0b\u6b65\u9aa4\u5728\u5206\u5e03\u5f0f\u96c6\u7fa4\u7684 Storage \u8282\u70b9\u4e2d\u589e\u52a0\u6216\u51cf\u5c11\u78c1\u76d8\uff08\u4e0d\u652f\u6301\u5bf9\u5355\u4e2a Storage \u8282\u70b9\u7684\u96c6\u7fa4\u589e\u52a0\u6216\u51cf\u5c11\u78c1\u76d8\uff09\uff1a</p> <ol> <li> <p>\u6267\u884c<code>SUBMIT JOB BALANCE DATA REMOVE &lt;ip:port&gt;</code>\u5c06\u5f85\u589e\u52a0\u6216\u51cf\u5c11\u78c1\u76d8\u7684 Storage \u8282\u70b9\u8fc1\u5230\u5176\u4ed6 Storage \u8282\u70b9\u4e2d\u3002</p> <p>Caution</p> <ul> <li>\u6267\u884c\u8be5\u547d\u4ee4\u8fc1\u79fb\u6307\u5b9a Storage \u8282\u70b9\u4e2d\u7684\u5206\u7247\u6570\u636e\u524d\uff0c\u9700\u8981\u786e\u4fdd\u5176\u4ed6 Storage \u8282\u70b9\u6570\u91cf\u8db3\u591f\u4ee5\u6ee1\u8db3\u8bbe\u7f6e\u7684\u526f\u672c\u6570\u3002\u4f8b\u5982\uff0c\u5982\u679c\u8bbe\u7f6e\u4e86\u526f\u672c\u6570\u4e3a 3\uff0c\u90a3\u4e48\u5728\u6267\u884c\u8be5\u547d\u4ee4\u524d\uff0c\u9700\u8981\u786e\u4fdd\u5176\u4ed6 Storage \u8282\u70b9\u6570\u91cf\u5927\u4e8e\u7b49\u4e8e 3\u3002</li> <li>\u5982\u679c\u5f85\u8fc1\u79fb\u7684 Storage \u8282\u70b9\u4e2d\u6709\u591a\u4e2a\u56fe\u7a7a\u95f4\u7684\u5206\u7247\uff0c\u9700\u8981\u5206\u522b\u5728\u6bcf\u4e2a\u56fe\u7a7a\u95f4\u5185\u6267\u884c\u8be5\u547d\u4ee4\u4ee5\u8fc1\u79fb\u8be5 Storage \u8282\u70b9\u4e2d\u7684\u6240\u6709\u5206\u7247\u3002</li> </ul> </li> <li> <p>\u6267\u884c<code>DROP HOSTS &lt;ip:port&gt;</code>\u79fb\u9664\u5f85\u589e\u52a0\u6216\u51cf\u5c11\u78c1\u76d8\u7684 Storage \u8282\u70b9\u3002</p> </li> <li> <p>\u5728\u6240\u6709 Storage \u8282\u70b9\u914d\u7f6e\u6587\u4ef6\u4e2d\u901a\u8fc7<code>--data_path</code>\u914d\u7f6e\u65b0\u589e\u6216\u51cf\u5c11\u78c1\u76d8\u8def\u5f84\uff0c\u8be6\u60c5\u53c2\u89c1 Storage \u914d\u7f6e\u6587\u4ef6\u3002</p> </li> <li>\u6267\u884c<code>ADD HOSTS &lt;ip:port&gt;</code>\u91cd\u65b0\u6dfb\u52a0\u5f85\u589e\u52a0\u6216\u51cf\u5c11\u78c1\u76d8\u7684 Storage \u8282\u70b9\u3002</li> <li>\u6839\u636e\u9700\u8981\u6267\u884c<code>SUBMIT JOB BALANCE DATA</code>\u5c06\u5f53\u524d\u56fe\u7a7a\u95f4\u7684\u5206\u7247\u5e73\u5747\u5206\u914d\u5230\u6240\u6709 Storage \u8282\u70b9\u4e2d\u548c\u6267\u884c<code>SUBMIT JOB BALANCE LEADER</code>\u547d\u4ee4\u5747\u8861\u5206\u5e03\u6240\u6709\u56fe\u7a7a\u95f4\u4e2d\u7684 leader\u3002\u8fd0\u884c\u547d\u4ee4\u524d\uff0c\u9700\u8981\u9009\u62e9\u4e00\u4e2a\u56fe\u7a7a\u95f4\u3002</li> </ol>"},{"location":"20.appendix/6.eco-tool-version/","title":"\u751f\u6001\u5de5\u5177\u6982\u89c8","text":""},{"location":"20.appendix/6.eco-tool-version/#nebulagraph_studio","title":"NebulaGraph Studio","text":"<p>NebulaGraph Studio\uff08\u7b80\u79f0 Studio\uff09\u662f\u4e00\u6b3e\u53ef\u4ee5\u901a\u8fc7 Web \u8bbf\u95ee\u7684\u56fe\u6570\u636e\u5e93\u53ef\u89c6\u5316\u5de5\u5177\uff0c\u642d\u914d NebulaGraph \u4f7f\u7528\uff0c\u63d0\u4f9b\u6784\u56fe\u3001\u6570\u636e\u5bfc\u5165\u3001\u7f16\u5199 nGQL \u67e5\u8be2\u3001\u56fe\u63a2\u7d22\u7b49\u4e00\u7ad9\u5f0f\u670d\u52a1\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1\u4ec0\u4e48\u662f NebulaGraph Studio\u3002</p> <p>Note</p> <p>Studio \u7248\u672c\u53d1\u5e03\u8282\u594f\u72ec\u7acb\u4e8e NebulaGraph \u5185\u6838\uff0c\u5176\u547d\u540d\u65b9\u5f0f\u4e5f\u4e0d\u53c2\u7167\u5185\u6838\u547d\u540d\u89c4\u5219\uff0c\u4e24\u8005\u517c\u5bb9\u5bf9\u5e94\u5173\u7cfb\u5982\u4e0b\u8868\u3002</p> NebulaGraph \u7248\u672c Studio \u7248\u672c master v3.9.0"},{"location":"20.appendix/6.eco-tool-version/#nebulagraph_dashboard","title":"NebulaGraph Dashboard\uff08\u793e\u533a\u7248\uff09","text":"<p>NebulaGraph Dashboard\uff08\u7b80\u79f0 Dashboard\uff09\u662f\u4e00\u6b3e\u7528\u4e8e\u76d1\u63a7NebulaGraph\u96c6\u7fa4\u4e2d\u673a\u5668\u548c\u670d\u52a1\u72b6\u6001\u7684\u53ef\u89c6\u5316\u5de5\u5177\u3002\u8be6\u60c5\u53c2\u89c1\u4ec0\u4e48\u662f NebulaGraph Dashboard\u3002</p> NebulaGraph\u7248\u672c Dashboard \u793e\u533a\u7248\u672c master v3.4.0"},{"location":"20.appendix/6.eco-tool-version/#nebulagraph_exchange","title":"NebulaGraph Exchange","text":"<p>NebulaGraph Exchange\uff08\u7b80\u79f0 Exchange\uff09\u662f\u4e00\u6b3e Apache Spark\u2122 \u5e94\u7528\uff0c\u7528\u4e8e\u5728\u5206\u5e03\u5f0f\u73af\u5883\u4e2d\u5c06\u96c6\u7fa4\u4e2d\u7684\u6570\u636e\u6279\u91cf\u8fc1\u79fb\u5230 NebulaGraph \u4e2d\uff0c\u80fd\u652f\u6301\u591a\u79cd\u4e0d\u540c\u683c\u5f0f\u7684\u6279\u5f0f\u6570\u636e\u548c\u6d41\u5f0f\u6570\u636e\u7684\u8fc1\u79fb\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1\u4ec0\u4e48\u662f NebulaGraph Exchange\u3002</p> NebulaGraph \u7248\u672c Exchange \u7248\u672c master v3.7.0"},{"location":"20.appendix/6.eco-tool-version/#nebulagraph_operator","title":"NebulaGraph Operator","text":"<p>NebulaGraph Operator\uff08\u7b80\u79f0 Operator\uff09\u662f\u7528\u4e8e\u5728 Kubernetes \u7cfb\u7edf\u4e0a\u81ea\u52a8\u5316\u90e8\u7f72\u548c\u8fd0\u7ef4 NebulaGraph \u96c6\u7fa4\u7684\u5de5\u5177\u3002\u4f9d\u6258\u4e8e Kubernetes \u6269\u5c55\u673a\u5236\uff0cNebulaGraph \u5c06\u5176\u8fd0\u7ef4\u9886\u57df\u7684\u77e5\u8bc6\u5168\u9762\u6ce8\u5165\u81f3 Kubernetes \u7cfb\u7edf\u4e2d\uff0c\u8ba9 NebulaGraph \u6210\u4e3a\u771f\u6b63\u7684\u4e91\u539f\u751f\u56fe\u6570\u636e\u5e93\u3002\u8be6\u60c5\u8bf7\u53c2\u8003\u4ec0\u4e48\u662f NebulaGraph Operator\u3002</p> NebulaGraph \u7248\u672c Operator \u7248\u672c master v1.7.5"},{"location":"20.appendix/6.eco-tool-version/#nebulagraph_importer","title":"NebulaGraph Importer","text":"<p>NebulaGraph Importer\uff08\u7b80\u79f0 Importer\uff09\u662f\u4e00\u6b3e NebulaGraph \u7684 CSV \u6587\u4ef6\u5bfc\u5165\u5de5\u5177\u3002Importer \u53ef\u4ee5\u8bfb\u53d6\u672c\u5730\u7684 CSV \u6587\u4ef6\uff0c\u7136\u540e\u5bfc\u5165\u6570\u636e\u81f3 NebulaGraph \u4e2d\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1\u4ec0\u4e48\u662f NebulaGraph Importer\u3002</p> NebulaGraph \u7248\u672c Importer \u7248\u672c master v4.1.0"},{"location":"20.appendix/6.eco-tool-version/#nebulagraph_spark_connector","title":"NebulaGraph Spark Connector","text":"<p>NebulaGraph Spark Connector \u662f\u4e00\u4e2a Spark \u8fde\u63a5\u5668\uff0c\u63d0\u4f9b\u901a\u8fc7 Spark \u6807\u51c6\u5f62\u5f0f\u8bfb\u5199NebulaGraph\u6570\u636e\u7684\u80fd\u529b\u3002NebulaGraph Spark Connector \u7531 Reader \u548c Writer \u4e24\u90e8\u5206\u7ec4\u6210\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1\u4ec0\u4e48\u662f NebulaGraph Spark Connector\u3002</p> NebulaGraph \u7248\u672c Spark Connector \u7248\u672c master v3.6.0"},{"location":"20.appendix/6.eco-tool-version/#nebulagraph_flink_connector","title":"NebulaGraph Flink Connector","text":"<p>NebulaGraph Flink Connector \u662f\u4e00\u6b3e\u5e2e\u52a9 Flink \u7528\u6237\u5feb\u901f\u8bbf\u95eeNebulaGraph\u7684\u8fde\u63a5\u5668\uff0c\u652f\u6301\u4eceNebulaGraph\u4e2d\u8bfb\u53d6\u6570\u636e\uff0c\u6216\u8005\u5c06\u5176\u4ed6\u5916\u90e8\u6570\u636e\u6e90\u8bfb\u53d6\u7684\u6570\u636e\u5199\u5165NebulaGraph\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1\u4ec0\u4e48\u662f NebulaGraph Flink Connector\u3002</p> NebulaGraph \u7248\u672c Flink Connector \u7248\u672c master v3.5.0"},{"location":"20.appendix/6.eco-tool-version/#nebulagraph_algorithm","title":"NebulaGraph Algorithm","text":"<p>NebulaGraph Algorithm\uff08\u7b80\u79f0 Algorithm\uff09\u662f\u4e00\u6b3e\u57fa\u4e8e GraphX \u7684 Spark \u5e94\u7528\u7a0b\u5e8f\uff0c\u901a\u8fc7\u63d0\u4ea4 Spark \u4efb\u52a1\u7684\u5f62\u5f0f\u4f7f\u7528\u5b8c\u6574\u7684\u7b97\u6cd5\u5de5\u5177\u5bf9 NebulaGraph \u6570\u636e\u5e93\u4e2d\u7684\u6570\u636e\u6267\u884c\u56fe\u8ba1\u7b97\uff0c\u4e5f\u53ef\u4ee5\u901a\u8fc7\u7f16\u7a0b\u5f62\u5f0f\u8c03\u7528 lib \u5e93\u4e0b\u7684\u7b97\u6cd5\u9488\u5bf9 DataFrame \u6267\u884c\u56fe\u8ba1\u7b97\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1\u4ec0\u4e48\u662f NebulaGraph Algorithm\u3002</p> NebulaGraph \u7248\u672c Algorithm \u7248\u672c master v3.0.0"},{"location":"20.appendix/6.eco-tool-version/#nebulagraph_console","title":"NebulaGraph Console","text":"<p>NebulaGraph Console \u662f NebulaGraph \u7684\u539f\u751f CLI \u5ba2\u6237\u7aef\u3002\u5982\u4f55\u4f7f\u7528\u8bf7\u53c2\u89c1 NebulaGraph Console\u3002</p> NebulaGraph \u7248\u672c Console \u7248\u672c master v3.6.0"},{"location":"20.appendix/6.eco-tool-version/#nebulagraph_docker_compose","title":"NebulaGraph Docker Compose","text":"<p>Docker Compose \u53ef\u4ee5\u5feb\u901f\u90e8\u7f72 NebulaGraph \u96c6\u7fa4\u3002\u5982\u4f55\u4f7f\u7528\u8bf7\u53c2\u89c1 Docker Compose \u90e8\u7f72 NebulaGraph\u3002</p> NebulaGraph \u7248\u672c Docker Compose \u7248\u672c master v3.6.0"},{"location":"20.appendix/6.eco-tool-version/#backup_restore","title":"Backup &amp; Restore","text":"<p>Backup&amp;Restore\uff08\u7b80\u79f0 BR\uff09\u662f\u4e00\u6b3e\u547d\u4ee4\u884c\u754c\u9762\uff08CLI\uff09\u5de5\u5177\uff0c\u53ef\u4ee5\u5e2e\u52a9\u5907\u4efd NebulaGraph \u7684\u56fe\u7a7a\u95f4\u6570\u636e\uff0c\u6216\u8005\u901a\u8fc7\u5907\u4efd\u6587\u4ef6\u6062\u590d\u6570\u636e\u3002</p> NebulaGraph \u7248\u672c BR \u7248\u672c master v3.6.0"},{"location":"20.appendix/6.eco-tool-version/#nebulagraph_bench","title":"NebulaGraph Bench","text":"<p>NebulaGraph Bench \u7528\u4e8e\u6d4b\u8bd5 NebulaGraph \u7684\u57fa\u7ebf\u6027\u80fd\u6570\u636e\uff0c\u4f7f\u7528 LDBC v0.3.3 \u7684\u6807\u51c6\u6570\u636e\u96c6\u3002</p> NebulaGraph \u7248\u672c Bench \u7248\u672c master v1.2.0"},{"location":"20.appendix/6.eco-tool-version/#apisdk","title":"API\u3001SDK","text":"<p>Compatibility</p> <p>\u9009\u62e9\u4e0e\u5185\u6838\u7248\u672c\u76f8\u540c<code>X.Y.*</code>\u7684\u6700\u65b0\u7248\u672c\u3002</p> NebulaGraph \u7248\u672c \u8bed\u8a00\uff08commit id\uff09 master C++ master Go master Python master Java master HTTP"},{"location":"20.appendix/error-code/","title":"\u9519\u8bef\u7801","text":"<p>NebulaGraph \u8fd0\u884c\u51fa\u73b0\u95ee\u9898\u65f6\uff0c\u4f1a\u8fd4\u56de\u9519\u8bef\u7801\u3002\u672c\u6587\u4ecb\u7ecd\u9519\u8bef\u7801\u7684\u8be6\u7ec6\u4fe1\u606f\u3002</p> <p>Note</p> <ul> <li>\u5982\u679c\u51fa\u73b0\u9519\u8bef\u4f46\u6ca1\u6709\u8fd4\u56de\u9519\u8bef\u7801\uff0c\u6216\u9519\u8bef\u7801\u63cf\u8ff0\u4e0d\u6e05\uff0c\u8bf7\u5728\u8bba\u575b\u6216 GitHub \u53cd\u9988\u3002</li> </ul> <ul> <li>\u8fd4\u56de<code>0</code>\u8868\u793a\u6267\u884c\u6210\u529f\u3002</li> </ul> \u9519\u8bef\u540d\u79f0 \u9519\u8bef\u7801 \u8bf4\u660e <code>E_DISCONNECTED</code> <code>-1</code> \u8fde\u63a5\u65ad\u5f00 <code>E_FAIL_TO_CONNECT</code> <code>-2</code> \u65e0\u6cd5\u5efa\u7acb\u8fde\u63a5 <code>E_RPC_FAILURE</code> <code>-3</code> RPC \u5931\u8d25 <code>E_LEADER_CHANGED</code> <code>-4</code> Raft leader \u53d8\u66f4 <code>E_SPACE_NOT_FOUND</code> <code>-5</code> \u56fe\u7a7a\u95f4\u4e0d\u5b58\u5728 <code>E_TAG_NOT_FOUND</code> <code>-6</code> Tag \u4e0d\u5b58\u5728 <code>E_EDGE_NOT_FOUND</code> <code>-7</code> Edge type\u4e0d\u5b58\u5728 <code>E_INDEX_NOT_FOUND</code> <code>-8</code> \u7d22\u5f15\u4e0d\u5b58\u5728 <code>E_EDGE_PROP_NOT_FOUND</code> <code>-9</code> \u8fb9\u5c5e\u6027\u4e0d\u5b58\u5728 <code>E_TAG_PROP_NOT_FOUND</code> <code>-10</code> Tag \u5c5e\u6027\u4e0d\u5b58\u5728 <code>E_ROLE_NOT_FOUND</code> <code>-11</code> \u5f53\u524d\u89d2\u8272\u4e0d\u5b58\u5728 <code>E_CONFIG_NOT_FOUND</code> <code>-12</code> \u5f53\u524d\u914d\u7f6e\u4e0d\u5b58\u5728 <code>E_MACHINE_NOT_FOUND</code> <code>-13</code> \u5f53\u524d\u4e3b\u673a\u4e0d\u5b58\u5728 <code>E_LISTENER_NOT_FOUND</code> <code>-15</code> listener \u4e0d\u5b58\u5728 <code>E_PART_NOT_FOUND</code> <code>-16</code> \u5f53\u524d\u5206\u533a\u4e0d\u5b58\u5728 <code>E_KEY_NOT_FOUND</code> <code>-17</code> key \u4e0d\u5b58\u5728 <code>E_USER_NOT_FOUND</code> <code>-18</code> \u7528\u6237\u4e0d\u5b58\u5728 <code>E_STATS_NOT_FOUND</code> <code>-19</code> \u7edf\u8ba1\u4fe1\u606f\u4e0d\u5b58\u5728 <code>E_SERVICE_NOT_FOUND</code> <code>-20</code> \u6ca1\u6709\u627e\u5230\u5f53\u524d\u670d\u52a1 <code>E_DRAINER_NOT_FOUND</code> <code>-21</code> drainer \u4e0d\u5b58\u5728 <code>E_DRAINER_CLIENT_NOT_FOUND</code> <code>-22</code> drainer \u5ba2\u6237\u7aef\u4e0d\u5b58\u5728 <code>E_PART_STOPPED</code> <code>-23</code> \u5f53\u524d partition \u5df2\u7ecf\u88ab\u505c\u6b62 <code>E_BACKUP_FAILED</code> <code>-24</code> \u5907\u4efd\u5931\u8d25 <code>E_BACKUP_EMPTY_TABLE</code> <code>-25</code> \u5907\u4efd\u7684\u8868\u4e3a\u7a7a <code>E_BACKUP_TABLE_FAILED</code> <code>-26</code> \u5907\u4efd\u8868\u5931\u8d25 <code>E_PARTIAL_RESULT</code> <code>-27</code> multiget \u65e0\u6cd5\u83b7\u5f97\u6240\u6709\u6570\u636e <code>E_REBUILD_INDEX_FAILED</code> <code>-28</code> \u91cd\u5efa\u7d22\u5f15\u5931\u8d25 <code>E_INVALID_PASSWORD</code> <code>-29</code> \u5bc6\u7801\u65e0\u6548 <code>E_FAILED_GET_ABS_PATH</code> <code>-30</code> \u65e0\u6cd5\u83b7\u5f97\u7edd\u5bf9\u8def\u5f84 <code>E_BAD_USERNAME_PASSWORD</code> <code>-1001</code> \u8eab\u4efd\u9a8c\u8bc1\u5931\u8d25 <code>E_SESSION_INVALID</code> <code>-1002</code> \u65e0\u6548\u4f1a\u8bdd <code>E_SESSION_TIMEOUT</code> <code>-1003</code> \u4f1a\u8bdd\u8d85\u65f6 <code>E_SYNTAX_ERROR</code> <code>-1004</code> \u8bed\u6cd5\u9519\u8bef <code>E_EXECUTION_ERROR</code> <code>-1005</code> \u6267\u884c\u9519\u8bef <code>E_STATEMENT_EMPTY</code> <code>-1006</code> \u8bed\u53e5\u4e3a\u7a7a <code>E_BAD_PERMISSION</code> <code>-1008</code> \u6743\u9650\u4e0d\u8db3 <code>E_SEMANTIC_ERROR</code> <code>-1009</code> \u8bed\u4e49\u9519\u8bef <code>E_TOO_MANY_CONNECTIONS</code> <code>-1010</code> \u8d85\u51fa\u6700\u5927\u8fde\u63a5\u6570 <code>E_PARTIAL_SUCCEEDED</code> <code>-1011</code> \u8bbf\u95ee\u5b58\u50a8\u5931\u8d25\uff08\u4ec5\u6709\u90e8\u5206\u8bf7\u6c42\u6210\u529f\uff09 <code>E_NO_HOSTS</code> <code>-2001</code> \u4e3b\u673a\u4e0d\u5b58\u5728 <code>E_EXISTED</code> <code>-2002</code> \u4e3b\u673a\u5df2\u7ecf\u5b58\u5728 <code>E_INVALID_HOST</code> <code>-2003</code> \u65e0\u6548\u4e3b\u673a <code>E_UNSUPPORTED</code> <code>-2004</code> \u5f53\u524d\u547d\u4ee4\u3001\u8bed\u53e5\u3001\u529f\u80fd\u4e0d\u652f\u6301 <code>E_NOT_DROP</code> <code>-2005</code> \u4e0d\u5141\u8bb8\u5220\u9664 <code>E_CONFIG_IMMUTABLE</code> <code>-2007</code> \u914d\u7f6e\u9879\u4e0d\u80fd\u6539\u53d8 <code>E_CONFLICT</code> <code>-2008</code> \u53c2\u6570\u4e0e meta \u6570\u636e\u51b2\u7a81 <code>E_INVALID_PARM</code> <code>-2009</code> \u65e0\u6548\u7684\u53c2\u6570 <code>E_WRONGCLUSTER</code> <code>-2010</code> \u9519\u8bef\u7684\u96c6\u7fa4 <code>E_ZONE_NOT_ENOUGH</code> <code>-2011</code> listener \u51b2\u7a81 <code>E_ZONE_IS_EMPTY</code> <code>-2012</code> \u4e3b\u673a\u4e0d\u5b58\u5728 <code>E_SCHEMA_NAME_EXISTS</code> <code>-2013</code> Schema \u540d\u5b57\u5df2\u5b58\u5728 <code>E_RELATED_INDEX_EXISTS</code> <code>-2014</code> \u4e0e Tag \u6216 Edge Type \u76f8\u5173\u7684\u7d22\u5f15\u5b58\u5728\uff0c\u4e0d\u80fd\u88ab\u5220\u9664 <code>E_RELATED_SPACE_EXISTS</code> <code>-2015</code> \u4ecd\u6709\u56fe\u7a7a\u95f4\u5728\u4e3b\u673a\u4e0a\uff0c\u4e0d\u80fd\u88ab\u5220\u9664 <code>E_STORE_FAILURE</code> <code>-2021</code> \u5b58\u50a8\u6570\u636e\u5931\u8d25 <code>E_STORE_SEGMENT_ILLEGAL</code> <code>-2022</code> \u5b58\u50a8\u6bb5\u975e\u6cd5 <code>E_BAD_BALANCE_PLAN</code> <code>-2023</code> \u65e0\u6548\u7684\u6570\u636e\u5747\u8861\u8ba1\u5212 <code>E_BALANCED</code> <code>-2024</code> \u96c6\u7fa4\u5df2\u7ecf\u5904\u4e8e\u6570\u636e\u5747\u8861\u72b6\u6001 <code>E_NO_RUNNING_BALANCE_PLAN</code> <code>-2025</code> \u6ca1\u6709\u6b63\u5728\u8fd0\u884c\u7684\u6570\u636e\u5747\u8861\u8ba1\u5212 <code>E_NO_VALID_HOST</code> <code>-2026</code> \u7f3a\u5c11\u6709\u6548\u7684\u4e3b\u673a <code>E_CORRUPTED_BALANCE_PLAN</code> <code>-2027</code> \u5df2\u7ecf\u635f\u574f\u7684\u6570\u636e\u5747\u8861\u8ba1\u5212 <code>E_IMPROPER_ROLE</code> <code>-2030</code> \u56de\u6536\u7528\u6237\u89d2\u8272\u5931\u8d25 <code>E_INVALID_PARTITION_NUM</code> <code>-2031</code> \u65e0\u6548\u7684\u5206\u533a\u6570\u91cf <code>E_INVALID_REPLICA_FACTOR</code> <code>-2032</code> \u65e0\u6548\u7684\u526f\u672c\u56e0\u5b50 <code>E_INVALID_CHARSET</code> <code>-2033</code> \u65e0\u6548\u7684\u5b57\u7b26\u96c6 <code>E_INVALID_COLLATE</code> <code>-2034</code> \u65e0\u6548\u7684\u5b57\u7b26\u6392\u5e8f\u89c4\u5219 <code>E_CHARSET_COLLATE_NOT_MATCH</code> <code>-2035</code> \u5b57\u7b26\u96c6\u548c\u5b57\u7b26\u6392\u5e8f\u89c4\u5219\u4e0d\u5339\u914d <code>E_SNAPSHOT_FAILURE</code> <code>-2040</code> \u751f\u6210\u5feb\u7167\u5931\u8d25 <code>E_BLOCK_WRITE_FAILURE</code> <code>-2041</code> \u5199\u5165\u5757\u6570\u636e\u5931\u8d25 <code>E_ADD_JOB_FAILURE</code> <code>-2044</code> \u589e\u52a0\u65b0\u7684\u4efb\u52a1\u5931\u8d25 <code>E_STOP_JOB_FAILURE</code> <code>-2045</code> \u505c\u6b62\u4efb\u52a1\u5931\u8d25 <code>E_SAVE_JOB_FAILURE</code> <code>-2046</code> \u4fdd\u5b58\u4efb\u52a1\u4fe1\u606f\u5931\u8d25 <code>E_BALANCER_FAILURE</code> <code>-2047</code> \u6570\u636e\u5747\u8861\u5931\u8d25 <code>E_JOB_NOT_FINISHED</code> <code>-2048</code> \u5f53\u524d\u4efb\u52a1\u8fd8\u6ca1\u6709\u5b8c\u6210 <code>E_TASK_REPORT_OUT_DATE</code> <code>-2049</code> \u4efb\u52a1\u62a5\u8868\u5931\u6548 <code>E_JOB_NOT_IN_SPACE</code> <code>-2050</code> \u5f53\u524d\u4efb\u52a1\u4e0d\u5728\u56fe\u7a7a\u95f4\u5185 <code>E_JOB_NEED_RECOVER</code> <code>-2051</code> \u5f53\u524d\u4efb\u52a1\u9700\u8981\u6062\u590d <code>E_JOB_ALREADY_FINISH</code> <code>-2052</code> \u4efb\u52a1\u5df2\u7ecf\u5931\u8d25\u6216\u5b8c\u6210 <code>E_JOB_SUBMITTED</code> <code>-2053</code> \u4efb\u52a1\u9ed8\u8ba4\u72b6\u6001 <code>E_JOB_NOT_STOPPABLE</code> <code>-2054</code> \u7ed9\u5b9a\u4efb\u52a1\u4e0d\u652f\u6301\u505c\u6b62 <code>E_JOB_HAS_NO_TARGET_STORAGE</code> <code>-2055</code> leader \u5206\u5e03\u672a\u4e0a\u62a5\uff0c\u56e0\u6b64\u65e0\u6cd5\u5c06\u4efb\u52a1\u53d1\u9001\u5230\u5b58\u50a8 <code>E_INVALID_JOB</code> <code>-2065</code> \u65e0\u6548\u7684\u4efb\u52a1 <code>E_BACKUP_BUILDING_INDEX</code> <code>-2066</code> \u5907\u4efd\u7ec8\u6b62\uff08\u6b63\u5728\u521b\u5efa\u7d22\u5f15\uff09 <code>E_BACKUP_SPACE_NOT_FOUND</code> <code>-2067</code> \u5907\u4efd\u65f6\u56fe\u7a7a\u95f4\u4e0d\u5b58\u5728 <code>E_RESTORE_FAILURE</code> <code>-2068</code> \u5907\u4efd\u6062\u590d\u5931\u8d25 <code>E_SESSION_NOT_FOUND</code> <code>-2069</code> \u4f1a\u8bdd\u4e0d\u5b58\u5728 <code>E_LIST_CLUSTER_FAILURE</code> <code>-2070</code> \u83b7\u53d6\u96c6\u7fa4\u4fe1\u606f\u5931\u8d25 <code>E_LIST_CLUSTER_GET_ABS_PATH_FAILURE</code> <code>-2071</code> \u83b7\u53d6\u96c6\u7fa4\u4fe1\u606f\u65f6\u65e0\u6cd5\u83b7\u53d6\u7edd\u5bf9\u8def\u5f84 <code>E_LIST_CLUSTER_NO_AGENT_FAILURE</code> <code>-2072</code> \u83b7\u53d6\u96c6\u7fa4\u4fe1\u606f\u65f6\u65e0\u6cd5\u83b7\u5f97 agent <code>E_QUERY_NOT_FOUND</code> <code>-2073</code> query \u672a\u627e\u5230 <code>E_AGENT_HB_FAILURE</code> <code>-2074</code> agent \u6ca1\u6709\u6c47\u62a5\u5fc3\u8df3 <code>E_HOST_CAN_NOT_BE_ADDED</code> <code>-2082</code> \u8be5\u4e3b\u673a\u4e0d\u80fd\u88ab\u6dfb\u52a0\uff0c\u56e0\u4e3a\u5b83\u4e0d\u662f\u4e00\u4e2a Storage \u4e3b\u673a <code>E_ACCESS_ES_FAILURE</code> <code>-2090</code> \u8bbf\u95ee Elasticsearch \u5931\u8d25 <code>E_GRAPH_MEMORY_EXCEEDED</code> <code>-2600</code> Graph \u5185\u5b58\u8d85\u51fa <code>E_CONSENSUS_ERROR</code> <code>-3001</code> \u9009\u4e3e\u65f6\u65e0\u6cd5\u8fbe\u6210\u5171\u8bc6 <code>E_KEY_HAS_EXISTS</code> <code>-3002</code> key \u5df2\u7ecf\u5b58\u5728 <code>E_DATA_TYPE_MISMATCH</code> <code>-3003</code> \u6570\u636e\u7c7b\u578b\u4e0d\u5339\u914d <code>E_INVALID_FIELD_VALUE</code> <code>-3004</code> \u65e0\u6548\u7684\u5b57\u6bb5\u503c <code>E_INVALID_OPERATION</code> <code>-3005</code> \u65e0\u6548\u7684\u64cd\u4f5c <code>E_NOT_NULLABLE</code> <code>-3006</code> \u5f53\u524d\u503c\u4e0d\u5141\u8bb8\u4e3a\u7a7a <code>E_FIELD_UNSET</code> <code>-3007</code> \u5b57\u6bb5\u975e\u7a7a\u6216\u8005\u6ca1\u6709\u9ed8\u8ba4\u503c\u65f6\uff0c\u5b57\u6bb5\u503c\u5fc5\u987b\u8bbe\u7f6e <code>E_OUT_OF_RANGE</code> <code>-3008</code> \u53d6\u503c\u8d85\u51fa\u4e86\u5f53\u524d\u7c7b\u578b\u7684\u8303\u56f4 <code>E_DATA_CONFLICT_ERROR</code> <code>-3010</code> \u6570\u636e\u51b2\u7a81 <code>E_WRITE_STALLED</code> <code>-3011</code> \u5199\u5165\u88ab\u5ef6\u8fdf <code>E_IMPROPER_DATA_TYPE</code> <code>-3021</code> \u4e0d\u6b63\u786e\u7684\u6570\u636e\u7c7b\u578b <code>E_INVALID_SPACEVIDLEN</code> <code>-3022</code> VID \u957f\u5ea6\u65e0\u6548 <code>E_INVALID_FILTER</code> <code>-3031</code> \u65e0\u6548\u7684\u8fc7\u6ee4\u5668 <code>E_INVALID_UPDATER</code> <code>-3032</code> \u65e0\u6548\u7684\u5b57\u6bb5\u66f4\u65b0 <code>E_INVALID_STORE</code> <code>-3033</code> \u65e0\u6548\u7684 KV \u5b58\u50a8 <code>E_INVALID_PEER</code> <code>-3034</code> peer \u65e0\u6548 <code>E_RETRY_EXHAUSTED</code> <code>-3035</code> \u91cd\u8bd5\u6b21\u6570\u8017\u5149 <code>E_TRANSFER_LEADER_FAILED</code> <code>-3036</code> leader \u8f6c\u6362\u5931\u8d25 <code>E_INVALID_STAT_TYPE</code> <code>-3037</code> \u65e0\u6548\u7684\u7edf\u8ba1\u7c7b\u578b <code>E_INVALID_VID</code> <code>-3038</code> VID \u65e0\u6548 <code>E_LOAD_META_FAILED</code> <code>-3040</code> \u52a0\u8f7d\u5143\u4fe1\u606f\u5931\u8d25 <code>E_FAILED_TO_CHECKPOINT</code> <code>-3041</code> \u751f\u6210 checkpoint \u5931\u8d25 <code>E_CHECKPOINT_BLOCKED</code> <code>-3042</code> \u751f\u6210 checkpoint \u88ab\u963b\u585e <code>E_FILTER_OUT</code> <code>-3043</code> \u6570\u636e\u88ab\u8fc7\u6ee4 <code>E_INVALID_DATA</code> <code>-3044</code> \u65e0\u6548\u7684\u6570\u636e <code>E_MUTATE_EDGE_CONFLICT</code> <code>-3045</code> \u5e76\u53d1\u5199\u5165\u540c\u4e00\u6761\u8fb9\u53d1\u751f\u51b2\u7a81 <code>E_MUTATE_TAG_CONFLICT</code> <code>-3046</code> \u5e76\u53d1\u5199\u5165\u540c\u4e00\u4e2a\u70b9\u53d1\u751f\u51b2\u7a81 <code>E_OUTDATED_LOCK</code> <code>-3047</code> \u9501\u5df2\u7ecf\u5931\u6548 <code>E_INVALID_TASK_PARA</code> <code>-3051</code> \u65e0\u6548\u7684\u4efb\u52a1\u53c2\u6570 <code>E_USER_CANCEL</code> <code>-3052</code> \u7528\u6237\u53d6\u6d88\u4e86\u4efb\u52a1 <code>E_TASK_EXECUTION_FAILED</code> <code>-3053</code> \u4efb\u52a1\u6267\u884c\u5931\u8d25 <code>E_PLAN_IS_KILLED</code> <code>-3060</code> \u6267\u884c\u8ba1\u5212\u88ab\u6e05\u9664 <code>E_NO_TERM</code> <code>-3070</code> \u6536\u5230\u8bf7\u6c42\u65f6\u5fc3\u8df3\u6d41\u7a0b\u672a\u5b8c\u6210 <code>E_OUTDATED_TERM</code> <code>-3071</code> \u6536\u5230\u65e7 leader \u7684\u8fc7\u65f6\u5fc3\u8df3\uff08\u5df2\u9009\u4e3e\u51fa\u65b0\u7684 leader\uff09 <code>E_WRITE_WRITE_CONFLICT</code> <code>-3073</code> \u5e76\u53d1\u5199\u5165\u65f6\u4e0e\u540e\u5230\u7684\u8bf7\u6c42\u53d1\u751f\u51b2\u7a81 <code>E_RAFT_UNKNOWN_PART</code> <code>-3500</code> \u672a\u77e5\u7684\u5206\u533a <code>E_RAFT_LOG_GAP</code> <code>-3501</code> raft \u65e5\u5fd7\u843d\u540e <code>E_RAFT_LOG_STALE</code> <code>-3502</code> raft \u65e5\u5fd7\u8fc7\u671f <code>E_RAFT_TERM_OUT_OF_DATE</code> <code>-3503</code> \u5fc3\u8df3\u4fe1\u606f\u5df2\u7ecf\u8fc7\u671f <code>E_RAFT_UNKNOWN_APPEND_LOG</code> <code>-3504</code> \u672a\u77e5\u7684\u8ffd\u52a0\u65e5\u5fd7 <code>E_RAFT_WAITING_SNAPSHOT</code> <code>-3511</code> \u7b49\u5f85\u5feb\u7167\u5b8c\u6210 <code>E_RAFT_SENDING_SNAPSHOT</code> <code>-3512</code> \u53d1\u9001\u5feb\u7167\u8fc7\u7a0b\u51fa\u9519 <code>E_RAFT_INVALID_PEER</code> <code>-3513</code> \u65e0\u6548\u7684\u63a5\u6536\u7aef <code>E_RAFT_NOT_READY</code> <code>-3514</code> Raft \u6ca1\u6709\u542f\u52a8 <code>E_RAFT_STOPPED</code> <code>-3515</code> Raft \u5df2\u7ecf\u505c\u6b62 <code>E_RAFT_BAD_ROLE</code> <code>-3516</code> \u9519\u8bef\u7684\u89d2\u8272 <code>E_RAFT_WAL_FAIL</code> <code>-3521</code> \u5199\u5165 WAL \u5931\u8d25 <code>E_RAFT_HOST_STOPPED</code> <code>-3522</code> \u4e3b\u673a\u5df2\u7ecf\u505c\u6b62 <code>E_RAFT_TOO_MANY_REQUESTS</code> <code>-3523</code> \u8bf7\u6c42\u6570\u91cf\u8fc7\u591a <code>E_RAFT_PERSIST_SNAPSHOT_FAILED</code> <code>-3524</code> \u6301\u4e45\u5316\u5feb\u7167\u5931\u8d25 <code>E_RAFT_RPC_EXCEPTION</code> <code>-3525</code> RPC \u5f02\u5e38 <code>E_RAFT_NO_WAL_FOUND</code> <code>-3526</code> \u6ca1\u6709\u53d1\u73b0 WAL \u65e5\u5fd7 <code>E_RAFT_HOST_PAUSED</code> <code>-3527</code> \u4e3b\u673a\u6682\u505c <code>E_RAFT_WRITE_BLOCKED</code> <code>-3528</code> \u5199\u5165\u88ab\u5835\u585e <code>E_RAFT_BUFFER_OVERFLOW</code> <code>-3529</code> \u7f13\u5b58\u6ea2\u51fa <code>E_RAFT_ATOMIC_OP_FAILED</code> <code>-3530</code> \u539f\u5b50\u64cd\u4f5c\u5931\u8d25 <code>E_LEADER_LEASE_FAILED</code> <code>-3531</code> leader \u79df\u7ea6\u8fc7\u671f <code>E_RAFT_CAUGHT_UP</code> <code>-3532</code> Raft \u5df2\u7ecf\u540c\u6b65\u6570\u636e <code>E_STORAGE_MEMORY_EXCEEDED</code> <code>-3600</code> Storage \u5185\u5b58\u8d85\u51fa <code>E_LOG_GAP</code> <code>-4001</code> drainer \u65e5\u5fd7\u843d\u540e <code>E_LOG_STALE</code> <code>-4002</code> drainer \u65e5\u5fd7\u8fc7\u671f <code>E_INVALID_DRAINER_STORE</code> <code>-4003</code> drainer \u6570\u636e\u5b58\u50a8\u65e0\u6548 <code>E_SPACE_MISMATCH</code> <code>-4004</code> \u56fe\u7a7a\u95f4\u4e0d\u5339\u914d <code>E_PART_MISMATCH</code> <code>-4005</code> \u5206\u533a\u4e0d\u5339\u914d <code>E_DATA_CONFLICT</code> <code>-4006</code> \u6570\u636e\u51b2\u7a81 <code>E_REQ_CONFLICT</code> <code>-4007</code> \u8bf7\u6c42\u51b2\u7a81 <code>E_DATA_ILLEGAL</code> <code>-4008</code> \u6570\u636e\u975e\u6cd5 <code>E_CACHE_CONFIG_ERROR</code> <code>-5001</code> \u7f13\u5b58\u914d\u7f6e\u9519\u8bef <code>E_NOT_ENOUGH_SPACE</code> <code>-5002</code> \u7a7a\u95f4\u4e0d\u8db3 <code>E_CACHE_MISS</code> <code>-5003</code> \u6ca1\u6709\u547d\u4e2d\u7f13\u5b58 <code>E_POOL_NOT_FOUND</code> <code>-5005</code> \u5199\u7f13\u5b58\u5931\u8d25 <code>E_NODE_NUMBER_EXCEED_LIMIT</code> <code>-7001</code> \u673a\u5668\u8282\u70b9\u6570\u8d85\u51fa\u9650\u5236 <code>E_PARSING_LICENSE_FAILURE</code> <code>-7002</code> \u89e3\u6790\u8bc1\u4e66\u5931\u8d25 <code>E_UNKNOWN</code> <code>-8000</code> \u672a\u77e5\u9519\u8bef"},{"location":"20.appendix/history/","title":"NebulaGraph \u5e74\u8868","text":"<ol> <li> <p>2018.9.5 \u7531 @dutor \u63d0\u4ea4\u4e86\u7b2c\u4e00\u884c\u4ee3\u7801\u3002</p> <p></p> </li> <li> <p>2019.5 \u53d1\u5e03\u4e86 v0.1.0 alpha \u7248\u672c, \u5e76\u5f00\u6e90\u3002</p> <p> </p> <p>\u6b64\u540e\u4e00\u5e74\u5185\u9646\u7eed\u53d1\u5e03 v1.0.0-beta, v1.0.0-rc1, v1.0.0-rc2, v1.0.0-rc3, v1.0.0-rc4</p> <p></p> </li> <li> <p>2019.7 \u5728 HBaseCon \u7b2c\u4e00\u6b21\u516c\u5f00\u4eae\u76f8<sup>1</sup>@dangleptr</p> <p></p> </li> <li> <p>2020.3 \u5728 v1.0 \u5f00\u53d1\u7684\u6536\u5c3e\u9636\u6bb5\uff0c\u542f\u52a8\u4e86 v2.0 \u9879\u76ee\u7684\u7814\u53d1</p> </li> <li> <p>2020.6 \u53d1\u5e03\u4e86\u7b2c\u4e00\u4e2a\u6b63\u5f0f\u5927\u7248\u672c v1.0.0 GA</p> <p></p> </li> <li> <p>2021.3 \u53d1\u5e03\u4e86\u7b2c\u4e8c\u4e2a\u5927\u7248\u672c v2.0 GA</p> <p></p> </li> <li> <p>2021.8 \u53d1\u5e03 v2.5.0</p> </li> <li> <p>2021.10 \u53d1\u5e03 v2.6.0</p> </li> <li> <p>2022.2 \u53d1\u5e03 v3.0.0</p> </li> <li> <p>2022.4 \u53d1\u5e03 v3.1.0</p> </li> <li> <p>2022.7 \u53d1\u5e03 v3.2.0</p> </li> <li> <p>2022.10 \u53d1\u5e03 v3.3.0</p> </li> <li> <p>2023.2 \u53d1\u5e03 v3.4.0</p> </li> <li> <p>2023.5 \u53d1\u5e03 v3.5.0</p> </li> <li> <p>2023.8 \u53d1\u5e03 v3.6.0</p> </li> </ol> <ol> <li> <p>NebulaGraph 1.x \u7248\u672c\u652f\u6301 RocksDB \u548c HBase \u4e24\u79cd\u4e3b\u8981\u7684\u540e\u7aef\uff0c\u4f46\u5728 NebulaGraph 2.x \u7248\u672c\u53d6\u6d88\u4e86\u9ed8\u8ba4\u5bf9 HBase \u7684\u652f\u6301\u3002\u00a0\u21a9</p> </li> </ol>"},{"location":"20.appendix/mind-map/","title":"\u601d\u7ef4\u5bfc\u56fe","text":"<p>\u4ee5\u4e0b\u7ed9\u51fa NebulaGraph \u7ed3\u6784\u6846\u67b6\u7684\u601d\u7ef4\u5bfc\u56fe\uff0c\u7528\u6237\u53ef\u4ee5\u70b9\u51fb \u5e76\u67e5\u770b\u5927\u56fe\u3002</p> <p></p> <p>\u4ee5\u4e0b\u7ed9\u51fa nGQL \u7684\u601d\u7ef4\u5bfc\u56fe\uff0c\u7528\u6237\u53ef\u4ee5\u70b9\u51fb \u5e76\u67e5\u770b\u5927\u56fe\u3002</p> <p></p>"},{"location":"20.appendix/port-guide/","title":"\u4ea7\u54c1\u7aef\u53e3\u5168\u96c6","text":"<p>\u4ee5\u4e0b\u662f NebulaGraph \u5185\u6838\u53ca\u5468\u8fb9\u5de5\u5177\u4f7f\u7528\u7684\u9ed8\u8ba4\u7aef\u53e3\u4fe1\u606f\uff1a</p> \u5e8f\u53f7 \u6240\u5c5e\u4ea7\u54c1/\u670d\u52a1 \u7c7b\u578b \u9ed8\u8ba4\u7aef\u53e3 \u8bf4\u660e 1 NebulaGraph TCP 9669 Graph \u670d\u52a1\u7684 RPC \u5b88\u62a4\u8fdb\u7a0b\u76d1\u542c\u7aef\u53e3\u3002\u901a\u5e38\u7528\u4e8e\u5ba2\u6237\u7aef\u8fde\u63a5Graph\u670d\u52a1\u3002 2 NebulaGraph TCP 19669 Graph \u670d\u52a1\u7684 HTTP \u7aef\u53e3\u3002 3 NebulaGraph TCP 19670 Graph \u670d\u52a1\u7684 HTTP/2 \u7aef\u53e3\u3002\uff083.x \u540e\u5df2\u5f03\u7528\u8be5\u7aef\u53e3\uff09 4 NebulaGraph TCP 9559\u30019560 <code>9559</code>\u662f Meta \u670d\u52a1\u7684 RPC \u5b88\u62a4\u8fdb\u7a0b\u76d1\u542c\u7aef\u53e3\u3002\u901a\u5e38\u7531 Graph \u670d\u52a1\u548c Storage \u670d\u52a1\u53d1\u8d77\u8bf7\u6c42\uff0c\u7528\u4e8e\u83b7\u53d6\u548c\u66f4\u65b0\u56fe\u6570\u636e\u5e93\u7684\u5143\u6570\u636e\u4fe1\u606f\u3002\u540c\u65f6\u8fd8\u4f1a\u4f7f\u7528\u76f8\u90bb\u7684<code>+1</code>\uff08<code>9560</code>\uff09\u7aef\u53e3\u7528\u4e8e Meta \u670d\u52a1\u4e4b\u95f4\u7684 Raft \u901a\u4fe1\u3002 5 NebulaGraph TCP 19559 Meta \u670d\u52a1\u7684 HTTP \u7aef\u53e3\u3002 6 NebulaGraph TCP 19560 Meta \u670d\u52a1\u7684 HTTP/2 \u7aef\u53e3\u3002\uff083.x \u540e\u5df2\u5f03\u7528\u8be5\u7aef\u53e3\uff09 7 NebulaGraph TCP 9779\u30019778\u30019780 <code>9779</code>\u662f Storage \u670d\u52a1\u7684 RPC \u5b88\u62a4\u8fdb\u7a0b\u76d1\u542c\u7aef\u53e3\u3002\u901a\u5e38\u7531 Graph \u670d\u52a1\u53d1\u8d77\u8bf7\u6c42\uff0c\u7528\u4e8e\u6267\u884c\u6570\u636e\u5b58\u50a8\u76f8\u5173\u7684\u64cd\u4f5c\uff0c\u4f8b\u5982\u8bfb\u53d6\u3001\u5199\u5165\u6216\u5220\u9664\u6570\u636e\u3002\u540c\u65f6\u8fd8\u4f1a\u4f7f\u7528\u76f8\u90bb\u7684<code>-1</code>\uff08<code>9778</code>\uff09\u548c<code>+1</code>\uff08<code>9780</code>\uff09\u7aef\u53e3\u3002<code>9778</code>\uff1aAdmin \u670d\u52a1\uff08Storage \u63a5\u6536 Meta \u547d\u4ee4\u7684\u670d\u52a1\uff09\u5360\u7528\u7684\u7aef\u53e3\u3002<code>9780</code>\uff1aStorage \u670d\u52a1\u4e4b\u95f4\u7684 Raft \u901a\u4fe1\u7aef\u53e3\u3002 8 NebulaGraph TCP 19779 Storage \u670d\u52a1\u7684 HTTP \u7aef\u53e3\u3002 9 NebulaGraph TCP 19780 Storage \u670d\u52a1\u7684 HTTP/2 \u7aef\u53e3\u3002\uff083.x \u540e\u5df2\u5f03\u7528\u8be5\u7aef\u53e3\uff09 10 NebulaGraph TCP 8888 \u5907\u4efd\u548c\u6062\u590d\u529f\u80fd\u7684 Agent \u670d\u52a1\u7aef\u53e3\u3002Agent \u662f\u96c6\u7fa4\u4e2d\u6bcf\u53f0\u673a\u5668\u7684\u4e00\u4e2a\u5b88\u62a4\u8fdb\u7a0b\uff0c\u7528\u4e8e\u542f\u505c NebulaGraph \u670d\u52a1\u548c\u4e0a\u4f20\u3001\u4e0b\u8f7d\u5907\u4efd\u6587\u4ef6\u3002 11 NebulaGraph TCP 9789\u30019788\u30019790 <code>9789</code>\u662f\u5168\u6587\u7d22\u5f15\u4e2d Raft Listener \u7684\u7aef\u53e3\uff0c\u4ece Storage \u670d\u52a1\u8bfb\u53d6\u6570\u636e\uff0c\u7136\u540e\u5c06\u5b83\u4eec\u5199\u5165 Elasticsearch \u96c6\u7fa4\u3002\u4e5f\u662f\u96c6\u7fa4\u95f4\u6570\u636e\u540c\u6b65\u4e2d Storage Listener \u7684\u7aef\u53e3\u3002\u7528\u4e8e\u540c\u6b65\u4e3b\u96c6\u7fa4\u7684 Storage \u6570\u636e\u3002\u540c\u65f6\u8fd8\u4f1a\u4f7f\u7528\u76f8\u90bb\u7684<code>-1</code>\uff08<code>9788</code>\uff09\u548c<code>+1</code>\uff08<code>9790</code>\uff09\u7aef\u53e3\u3002<code>9788</code>\uff1a\u5185\u90e8\u7aef\u53e3\u3002<code>9790</code>\uff1aRaft \u901a\u4fe1\u7aef\u53e3\u3002 12 NebulaGraph TCP 9200 NebulaGraph \u4f7f\u7528\u8be5\u7aef\u53e3\u4e0e Elasticsearch \u8fdb\u884c HTTP \u901a\u4fe1\uff0c\u4ee5\u6267\u884c\u5168\u6587\u641c\u7d22\u67e5\u8be2\u548c\u7ba1\u7406\u5168\u6587\u7d22\u5f15\u3002 13 NebulaGraph TCP 9569\u30019568\u30019570 <code>9569</code>\u662f\u96c6\u7fa4\u95f4\u6570\u636e\u540c\u6b65\u529f\u80fd\u4e2d Meta Listener \u7684\u7aef\u53e3\uff0c\u7528\u4e8e\u540c\u6b65\u4e3b\u96c6\u7fa4\u7684 Meta \u6570\u636e\u3002\u540c\u65f6\u8fd8\u4f1a\u4f7f\u7528\u76f8\u90bb\u7684<code>-1</code>\uff08<code>9568</code>\uff09\u548c<code>+1</code>\uff08<code>9570</code>\uff09\u7aef\u53e3\u3002<code>9568</code>\uff1a\u5185\u90e8\u7aef\u53e3\u3002<code>9570</code>\uff1aRaft \u901a\u4fe1\u7aef\u53e3\u3002 14 NebulaGraph TCP 9889\u30019888\u30019890 <code>9889</code>\u662f\u96c6\u7fa4\u95f4\u6570\u636e\u540c\u6b65\u529f\u80fd\u4e2d Drainer \u670d\u52a1\u7aef\u53e3\u3002\u7528\u4e8e\u540c\u6b65 Storage\u3001Meta \u6570\u636e\u7ed9\u4ece\u96c6\u7fa4\u3002\u540c\u65f6\u8fd8\u4f1a\u4f7f\u7528\u76f8\u90bb\u7684<code>-1</code>\uff08<code>9888</code>\uff09\u548c<code>+1</code>\uff08<code>9890</code>\uff09\u7aef\u53e3\u3002<code>9888</code>\uff1a\u5185\u90e8\u7aef\u53e3\u3002<code>9890</code>\uff1aRaft \u901a\u4fe1\u7aef\u53e3\u3002 15 NebulaGraph Studio TCP 7001 Studio \u63d0\u4f9b Web \u670d\u52a1\u5360\u7528\u7aef\u53e3\u3002 16 NebulaGraph Dashboard TCP 8090 Nebula HTTP Gateway \u4f9d\u8d56\u670d\u52a1\u7aef\u53e3\u3002\u4e3a\u96c6\u7fa4\u670d\u52a1\u63d0\u4f9b HTTP \u63a5\u53e3\uff0c\u6267\u884c nGQL \u8bed\u53e5\u4e0e NebulaGraph \u6570\u636e\u5e93\u8fdb\u884c\u4ea4\u4e92\u3002 17 NebulaGraph Dashboard TCP 9200 Nebula Stats Exporter \u4f9d\u8d56\u670d\u52a1\u7aef\u53e3\u3002\u6536\u96c6\u96c6\u7fa4\u7684\u6027\u80fd\u6307\u6807\uff0c\u5305\u62ec\u670d\u52a1 IP \u5730\u5740\u3001\u7248\u672c\u548c\u76d1\u63a7\u6307\u6807\uff08\u4f8b\u5982\u67e5\u8be2\u6570\u91cf\u3001\u67e5\u8be2\u5ef6\u8fdf\u3001\u5fc3\u8df3\u5ef6\u8fdf \u7b49\uff09\u3002 18 NebulaGraph Dashboard TCP 9100 Node Exporter \u4f9d\u8d56\u670d\u52a1\u7aef\u53e3\u3002\u6536\u96c6\u96c6\u7fa4\u4e2d\u673a\u5668\u7684\u8d44\u6e90\u4fe1\u606f\uff0c\u5305\u62ec CPU\u3001\u5185\u5b58\u3001\u8d1f\u8f7d\u3001\u78c1\u76d8\u548c\u6d41\u91cf\u3002 19 NebulaGraph Dashboard TCP 9090 Prometheus \u670d\u52a1\u7684\u7aef\u53e3\u3002\u5b58\u50a8\u76d1\u63a7\u6570\u636e\u7684\u65f6\u95f4\u5e8f\u5217\u6570\u636e\u5e93\u3002 20 NebulaGraph Dashboard TCP 7003 Dashboard \u793e\u533a\u7248 \u63d0\u4f9b Web \u670d\u52a1\u5360\u7528\u7aef\u53e3\u3002"},{"location":"20.appendix/release-notes/dashboard-comm-release-note/","title":"NebulaGraph Dashboard \u793e\u533a\u7248\u66f4\u65b0\u8bf4\u660e","text":""},{"location":"20.appendix/release-notes/dashboard-comm-release-note/#v340","title":"\u793e\u533a\u7248 v3.4.0","text":"<ul> <li>\u529f\u80fd<ul> <li>\u5185\u7f6e dashboard.service \u811a\u672c\uff0c\u652f\u6301\u4e00\u952e\u7ba1\u7406 Dashboard \u670d\u52a1\u548c\u67e5\u770b Dashboard \u7248\u672c\u3002</li> <li>\u652f\u6301\u67e5\u770b Meta \u670d\u52a1\u7684\u914d\u7f6e\u3002</li> </ul> </li> </ul> <ul> <li>\u4f18\u5316<ul> <li>\u8c03\u6574\u76ee\u5f55\u7ed3\u6784\uff0c\u7b80\u5316\u90e8\u7f72\u6b65\u9aa4\u3002</li> <li>\u673a\u5668\u7684\u6982\u89c8\u9875\u9762\u663e\u793a\u76d1\u63a7\u6307\u6807\u540d\u79f0\u3002</li> <li>\u4f18\u5316<code>num_queries</code>\u7b49\u76d1\u63a7\u6307\u6807\u7684\u8ba1\u7b97\u65b9\u5f0f\uff0c\u8c03\u6574\u4e3a\u65f6\u5e8f\u805a\u5408\u663e\u793a\u3002</li> </ul> </li> </ul>"},{"location":"20.appendix/release-notes/nebula-comm-release-note/","title":"NebulaGraph \u66f4\u65b0\u8bf4\u660e","text":""},{"location":"20.appendix/release-notes/nebula-comm-release-note/#v360","title":"v3.6.0","text":"<ul> <li> <p>\u529f\u80fd</p> <ul> <li> <p>\u589e\u5f3a\u5168\u6587\u7d22\u5f15\u529f\u80fd\u3002 #5567 #5575 #5577 #5580 #5584 #5587</p> <p>\u6d89\u53ca\u53d8\u66f4\u5185\u5bb9\u5982\u4e0b\uff1a</p> <ul> <li>\u539f\u6709\u7684\u5168\u6587\u7d22\u5f15\u529f\u80fd\u7531\u8c03\u7528 Elasticsearch \u7684 Term-level queries \u6539\u4e3a Full text queries \u65b9\u5f0f\u3002</li> <li>\u53d8\u66f4\u540e\u9664\u4e86\u652f\u6301\u539f\u6709\u7684\u901a\u914d\u7b26\u3001\u6b63\u5219\u3001\u6a21\u7cca\u5339\u914d\u7b49\u65b9\u5f0f\uff08\u4f46\u8bed\u6cd5\u53d1\u751f\u53d8\u5316\uff09\uff0c\u8fd8\u589e\u52a0\u4e86\u5bf9\u5206\u8bcd\u7684\u652f\u6301\uff08\u4f9d\u8d56 Elasticsearch \u81ea\u8eab\u4f7f\u7528\u7684\u5206\u8bcd\u5668\uff09\uff0c\u67e5\u8be2\u7ed3\u679c\u5305\u542b\u8bc4\u5206\u7ed3\u679c\u3002\u66f4\u591a\u8bed\u6cd5\u8bf7\u53c2\u89c1 Elasticsearch \u5b98\u65b9\u6587\u6863\u3002</li> </ul> </li> </ul> </li> </ul> <ul> <li> <p>\u589e\u5f3a</p> <ul> <li>\u652f\u6301\u4f7f\u7528<code>MATCH</code>\u5b50\u53e5\u68c0\u7d22 VID \u6216\u5c5e\u6027\u7d22\u5f15\u65f6\u4f7f\u7528\u53d8\u91cf\u3002 #5486 #5553</li> <li>\u6027\u80fd<ul> <li>\u652f\u6301\u5e76\u884c\u542f\u52a8 RocksDB \u5b9e\u4f8b\u4ee5\u52a0\u5feb Storage \u670d\u52a1\u7684\u542f\u52a8\u901f\u5ea6\u3002 #5521</li> <li>\u4f18\u5316 RocksDB \u8fed\u4ee3\u5668\u6267\u884c<code>DeleteRange</code>\u64cd\u4f5c\u540e\u7684\u524d\u7f00\u641c\u7d22\u6027\u80fd\u3002 #5525</li> <li>\u4f18\u5316 appendLog \u53d1\u9001\u903b\u8f91\u4ee5\u907f\u514d follower \u5b95\u673a\u540e\u5f71\u54cd\u5199\u6027\u80fd\u3002 #5571</li> <li>\u4f18\u5316<code>MATCH</code>\u8bed\u53e5\u67e5\u8be2\u4e0d\u5b58\u5728\u7684\u5c5e\u6027\u65f6\u7684\u6027\u80fd\u3002 #5634</li> </ul> </li> </ul> </li> </ul> <ul> <li>\u7f3a\u9677\u4fee\u590d<ul> <li>DQL<ul> <li>\u4fee\u590d\u5355\u4e2a\u5927\u67e5\u8be2\u5bfc\u81f4 Graph \u670d\u52a1\u5d29\u6e83\u7684\u95ee\u9898\u3002 #5619</li> <li>\u4fee\u590d\u6267\u884c<code>Find All Path</code>\u8bed\u53e5\u5bfc\u81f4 Graph \u670d\u52a1\u5d29\u6e83\u7684\u95ee\u9898\u3002 #5621 #5640</li> <li>\u4fee\u590d\u90e8\u5206\u8fc7\u671f\u6570\u636e\u5728\u6700\u5e95\u5c42\u4e0d\u4f1a\u88ab\u56de\u6536\u7684\u95ee\u9898\u3002 #5447 #5622</li> <li>\u4fee\u590d\u5728<code>MATCH</code>\u8bed\u53e5\u4e2d\u6dfb\u52a0\u8def\u5f84\u53d8\u91cf\u4f1a\u5bfc\u81f4<code>all()</code>\u51fd\u6570\u4e0b\u63a8\u4f18\u5316\u5931\u6548\u7684\u95ee\u9898\u3002 #5631</li> <li>\u4fee\u590d<code>MATCH</code>\u8bed\u53e5\u4e2d\u901a\u8fc7\u6700\u77ed\u8def\u5f84\u67e5\u8be2\u81ea\u73af\u65f6\u8fd4\u56de\u7ed3\u679c\u9519\u8bef\u7684\u95ee\u9898\u3002 #5636</li> <li>\u4fee\u590d\u901a\u8fc7\u7ba1\u9053\u7b26\u5220\u9664\u8fb9\u5bfc\u81f4 Graph \u670d\u52a1\u5d29\u6e83\u7684\u95ee\u9898\u3002 #5645</li> <li>\u4fee\u590d<code>MATCH</code>\u8bed\u53e5\u4e2d\u5339\u914d\u591a\u8df3\u65f6\u8fd4\u56de\u7ed3\u679c\u7f3a\u5c11\u8fb9\u5c5e\u6027\u7684\u95ee\u9898\u3002 #5646</li> </ul> </li> <li>\u5176\u4ed6<ul> <li>\u4fee\u590d Meta \u6570\u636e\u4e0d\u4e00\u81f4\u7684\u95ee\u9898\u3002 #5517</li> <li>\u4fee\u590d RocksDB \u5bfc\u5165\u64cd\u4f5c\u5bfc\u81f4 leader \u79df\u7ea6\u65e0\u6548\u7684\u95ee\u9898\u3002 #5534</li> <li>\u4fee\u590d\u5b58\u50a8\u7684\u7edf\u8ba1\u903b\u8f91\u9519\u8bef\u7684\u95ee\u9898\u3002 #5547</li> <li>\u4fee\u590d\u8bbe\u7f6e\u65e0\u6548\u8bf7\u6c42\u53c2\u6570\u7684\u6807\u5fd7\u5bfc\u81f4 Web \u670d\u52a1\u5d29\u6e83\u7684\u95ee\u9898\u3002 #5566</li> <li>\u4fee\u590d\u5217\u51fa\u4f1a\u8bdd\u65f6\u6253\u5370\u8fc7\u591a\u65e5\u5fd7\u7684\u95ee\u9898\u3002 #5618</li> </ul> </li> </ul> </li> </ul>"},{"location":"20.appendix/release-notes/studio-release-note/","title":"NebulaGraph Studio \u66f4\u65b0\u8bf4\u660e","text":""},{"location":"20.appendix/release-notes/studio-release-note/#v380","title":"v3.8.0","text":"<ul> <li>\u529f\u80fd<ul> <li>\u652f\u6301\u4f7f\u7528 MySQL \u6570\u636e\u5e93\u4f5c\u4e3a\u540e\u7aef\u5b58\u50a8\u3002</li> </ul> </li> </ul> <ul> <li>\u589e\u5f3a<ul> <li>\u652f\u6301\u81ea\u5b9a\u4e49 WebSocket \u7684\u8bfb\u5199\u53c2\u6570\u3002</li> <li>\u6613\u7528\u6027<ul> <li>\u652f\u6301\u5728\u5bfc\u5165\u4efb\u52a1\u5217\u8868\u6839\u636e\u56fe\u7a7a\u95f4\u540d\u79f0\u7b5b\u9009\u4efb\u52a1\u3002</li> </ul> </li> <li>\u517c\u5bb9\u6027<ul> <li> <p>\u7531\u4e8e\u6570\u636e\u5e93\u8868\u7ed3\u6784\u53d8\u66f4\uff0c\u9700\u8981\u5728\u914d\u7f6e\u6587\u4ef6\u5185\u5c06<code>DB.AutoMigrate</code>\u8bbe\u7f6e\u4e3a<code>true</code>\uff0c\u7cfb\u7edf\u4f1a\u81ea\u52a8\u5bf9\u5df2\u6709\u5386\u53f2\u6570\u636e\u8fdb\u884c\u5347\u7ea7\u9002\u914d\u3002</p> <p>\u5982\u679c\u662f\u81ea\u5df1\u624b\u52a8\u521b\u5efa\u7684\u5e93\u8868\uff0c\u8bf7\u624b\u52a8\u4fee\u6539\u8fd9\u4e9b\u8868\uff1a<code>task_infos</code>\u3001<code>task_effects</code>\u3001<code>sketches</code>\u3001<code>schema_snapshots</code>\u3001<code>favorites</code>\u3001<code>files</code>\u3001<code>datasources</code>\u3002</p> <p>\u793a\u4f8b\u5982\u4e0b\uff1a</p> <pre><code>ALTER TABLE `task_infos` ADD COLUMN `b_id` CHAR(32) NOT NULL DEFAULT '';\nUPDATE TABLE `task_infos` SET `b_id` = `id`;\nCREATE UNIQUE INDEX `idx_task_infos_id` ON `task_infos`(`b_id`);\n\nALTER TABLE `task_effects` ADD COLUMN `b_id` CHAR(32) NOT NULL DEFAULT '';\nUPDATE TABLE `task_effects` SET `b_id` = `id`;\nCREATE UNIQUE INDEX `idx_task_effects_id` ON `task_effects`(`b_id`);\n...\n</code></pre> </li> </ul> </li> </ul> </li> </ul>"},{"location":"20.appendix/release-notes/studio-release-note/#v370","title":"v3.7.0","text":"<ul> <li> <p>\u589e\u5f3a</p> <ul> <li>\u652f\u6301\u5bfc\u5165 SFTP\u3001Amazon S3 \u7684\u6570\u636e\u6587\u4ef6\u3002</li> <li>\u5bfc\u5165\u9875\u9762\u652f\u6301\u914d\u7f6e\u66f4\u591a\u5bfc\u5165\u53c2\u6570\uff0c\u5982\u5e76\u53d1\u6570\u3001\u91cd\u8bd5\u6b21\u6570\u7b49\u3002</li> <li>\u652f\u6301\u91cd\u8dd1\u4efb\u52a1\u3002</li> <li>\u652f\u6301\u4efb\u52a1\u4fdd\u5b58\u4e3a\u8349\u7a3f\u3002</li> <li>\u652f\u6301\u5728 ARM \u67b6\u6784\u7684 Docker \u5bb9\u5668\u5185\u8fd0\u884c Studio\u3002</li> </ul> </li> </ul>"},{"location":"3.ngql-guide/4.job-statements/","title":"\u4f5c\u4e1a\u7ba1\u7406","text":"<p>\u5728 Storage \u670d\u52a1\u4e0a\u957f\u671f\u8fd0\u884c\u7684\u4efb\u52a1\u79f0\u4e3a\u4f5c\u4e1a\uff0c\u4f8b\u5982<code>COMPACT</code>\u3001<code>FLUSH</code>\u548c<code>STATS</code>\u3002 \u5982\u679c\u56fe\u7a7a\u95f4\u7684\u6570\u636e\u91cf\u5f88\u5927\uff0c\u8fd9\u4e9b\u4f5c\u4e1a\u53ef\u80fd\u8017\u65f6\u5f88\u957f\u3002\u4f5c\u4e1a\u7ba1\u7406\u53ef\u4ee5\u5e2e\u52a9\u6267\u884c\u3001\u67e5\u770b\u3001\u505c\u6b62\u548c\u6062\u590d\u4f5c\u4e1a\u3002</p> <p>Note</p> <p>\u6240\u6709\u4f5c\u4e1a\u7ba1\u7406\u547d\u4ee4\u90fd\u9700\u8981\u5148\u9009\u62e9\u56fe\u7a7a\u95f4\u540e\u624d\u80fd\u6267\u884c\u3002</p>"},{"location":"3.ngql-guide/4.job-statements/#submit_job_balance_leader","title":"SUBMIT JOB BALANCE LEADER","text":"<p><code>SUBMIT JOB BALANCE LEADER</code>\u8bed\u53e5\u4f1a\u542f\u52a8\u4efb\u52a1\u5747\u8861\u5206\u5e03\u6240\u6709\u56fe\u7a7a\u95f4\u4e2d\u7684 leader\u3002\u8be5\u547d\u4ee4\u4f1a\u8fd4\u56de\u4efb\u52a1 ID\u3002</p> <p>\u793a\u4f8b\uff1a</p> <pre><code>nebula&gt; SUBMIT JOB BALANCE LEADER;\n+------------+\n| New Job Id |\n+------------+\n| 33         |\n+------------+\n</code></pre>"},{"location":"3.ngql-guide/4.job-statements/#submit_job_compact","title":"SUBMIT JOB COMPACT","text":"<p><code>SUBMIT JOB COMPACT</code> \u8bed\u53e5\u4f1a\u5728\u5f53\u524d\u56fe\u7a7a\u95f4\u5185\u89e6\u53d1 RocksDB \u7684\u957f\u8017\u65f6 <code>compact</code> \u64cd\u4f5c\u3002</p> <p><code>compact</code>\u914d\u7f6e\u8be6\u60c5\u8bf7\u53c2\u89c1 Storage \u670d\u52a1\u914d\u7f6e\u3002</p> <p>\u793a\u4f8b\uff1a</p> <pre><code>nebula&gt; SUBMIT JOB COMPACT;\n+------------+\n| New Job Id |\n+------------+\n| 40         |\n+------------+\n</code></pre>"},{"location":"3.ngql-guide/4.job-statements/#submit_job_flush","title":"SUBMIT JOB FLUSH","text":"<p><code>SUBMIT JOB FLUSH</code>\u8bed\u53e5\u5c06\u5f53\u524d\u56fe\u7a7a\u95f4\u5185\u5b58\u4e2d\u7684 RocksDB memfile \u5199\u5165\u786c\u76d8\u3002</p> <p>\u793a\u4f8b\uff1a</p> <pre><code>nebula&gt; SUBMIT JOB FLUSH;\n+------------+\n| New Job Id |\n+------------+\n| 96         |\n+------------+\n</code></pre>"},{"location":"3.ngql-guide/4.job-statements/#submit_job_stats","title":"SUBMIT JOB STATS","text":"<p><code>SUBMIT JOB STATS</code>\u8bed\u53e5\u4f1a\u5728\u5f53\u524d\u56fe\u7a7a\u95f4\u5185\u542f\u52a8\u4e00\u4e2a\u4f5c\u4e1a\uff0c\u8be5\u4f5c\u4e1a\u5bf9\u5f53\u524d\u56fe\u7a7a\u95f4\u8fdb\u884c\u7edf\u8ba1\u3002\u4f5c\u4e1a\u5b8c\u6210\u540e\uff0c\u7528\u6237\u53ef\u4ee5\u4f7f\u7528<code>SHOW STATS</code>\u8bed\u53e5\u5217\u51fa\u7edf\u8ba1\u7ed3\u679c\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1 SHOW STATS\u3002</p> <p>Note</p> <p>\u5982\u679c\u5b58\u50a8\u5728 NebulaGraph \u4e2d\u7684\u6570\u636e\u6709\u53d8\u5316\uff0c\u4e3a\u4e86\u83b7\u53d6\u6700\u65b0\u7684\u7edf\u8ba1\u7ed3\u679c\uff0c\u8bf7\u91cd\u65b0\u6267\u884c<code>SUBMIT JOB STATS</code>\u3002</p> <p>\u793a\u4f8b\uff1a</p> <pre><code>nebula&gt; SUBMIT JOB STATS;\n+------------+\n| New Job Id |\n+------------+\n| 9          |\n+------------+\n</code></pre>"},{"location":"3.ngql-guide/4.job-statements/#submit_job_downloadingest","title":"SUBMIT JOB DOWNLOAD/INGEST","text":"<p><code>SUBMIT JOB DOWNLOAD HDFS</code>\u548c<code>SUBMIT JOB INGEST</code>\u547d\u4ee4\u7528\u4e8e\u5c06 SST \u6587\u4ef6\u5bfc\u5165 NebulaGraph \u3002\u8be6\u60c5\u53c2\u89c1\u5bfc\u5165 SST \u6587\u4ef6\u6570\u636e\u3002</p> <p><code>SUBMIT JOB DOWNLOAD HDFS</code>\u8bed\u53e5\u4f1a\u4e0b\u8f7d\u6307\u5b9a\u7684 HDFS \u4e0a\u7684 SST \u6587\u4ef6\u3002</p> <p><code>SUBMIT JOB INGEST</code>\u8bed\u53e5\u4f1a\u5c06\u4e0b\u8f7d\u7684 SST \u6587\u4ef6\u5bfc\u5165\u56fe\u7a7a\u95f4\u3002</p> <p>\u793a\u4f8b\uff1a</p> <pre><code>nebula&gt; SUBMIT JOB DOWNLOAD HDFS \"hdfs://192.168.10.100:9000/sst\";\n+------------+\n| New Job Id |\n+------------+\n| 10         |\n+------------+\n\nnebula&gt; SUBMIT JOB INGEST;\n+------------+\n| New Job Id |\n+------------+\n| 11         |\n+------------+\n</code></pre>"},{"location":"3.ngql-guide/4.job-statements/#show_job","title":"SHOW JOB","text":"<p>Meta \u670d\u52a1\u5c06<code>SUBMIT JOB</code>\u8bf7\u6c42\u89e3\u6790\u4e3a\u591a\u4e2a\u4efb\u52a1\uff0c\u7136\u540e\u5206\u914d\u7ed9\u8fdb\u7a0b nebula-storaged\u3002<code>SHOW JOB &lt;job_id&gt;</code>\u8bed\u53e5\u663e\u793a\u5f53\u524d\u56fe\u7a7a\u95f4\u5185\u6307\u5b9a\u4f5c\u4e1a\u548c\u76f8\u5173\u4efb\u52a1\u7684\u4fe1\u606f\u3002</p> <p><code>job_id</code>\u5728\u6267\u884c<code>SUBMIT JOB</code>\u8bed\u53e5\u65f6\u4f1a\u8fd4\u56de\u3002</p> <p>\u793a\u4f8b\uff1a</p> <pre><code>nebula&gt; SHOW JOB 8;\n+----------------+-----------------+------------+----------------------------+----------------------------+-------------+\n| Job Id(TaskId) | Command(Dest)   | Status     | Start Time                 | Stop Time                  | Error Code  |\n+----------------+-----------------+------------+----------------------------+----------------------------+-------------+\n| 8              | \"STATS\"         | \"FINISHED\" | 2022-10-18T08:14:45.000000 | 2022-10-18T08:14:45.000000 | \"SUCCEEDED\" |\n| 0              | \"192.168.8.129\" | \"FINISHED\" | 2022-10-18T08:14:45.000000 | 2022-10-18T08:15:13.000000 | \"SUCCEEDED\" |\n| \"Total:1\"      | \"Succeeded:1\"   | \"Failed:0\" | \"In Progress:0\"            | \"\"                         | \"\"          |\n+----------------+-----------------+------------+----------------------------+----------------------------+-------------+\n</code></pre> \u53c2\u6570 \u8bf4\u660e <code>Job Id(TaskId)</code> \u7b2c\u4e00\u884c\u663e\u793a\u4f5c\u4e1a ID\uff0c\u6700\u540e\u4e00\u884c\u663e\u793a\u4f5c\u4e1a\u76f8\u5173\u7684\u4efb\u52a1\u603b\u6570\uff0c\u5176\u4ed6\u884c\u663e\u793a\u4f5c\u4e1a\u76f8\u5173\u7684\u4efb\u52a1 ID\u3002 <code>Command(Dest)</code> \u7b2c\u4e00\u884c\u663e\u793a\u6267\u884c\u7684\u4f5c\u4e1a\u547d\u4ee4\u540d\u79f0\uff0c\u6700\u540e\u4e00\u884c\u663e\u793a\u4f5c\u4e1a\u76f8\u5173\u7684\u6210\u529f\u7684\u4efb\u52a1\u6570\u3002\u5176\u4ed6\u884c\u663e\u793a\u4efb\u52a1\u5bf9\u5e94\u7684 nebula-storaged \u8fdb\u7a0b\u3002 <code>Status</code> \u663e\u793a\u4f5c\u4e1a\u6216\u4efb\u52a1\u7684\u72b6\u6001\uff0c\u6700\u540e\u4e00\u884c\u663e\u793a\u4f5c\u4e1a\u76f8\u5173\u7684\u5931\u8d25\u7684\u4efb\u52a1\u6570\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1\u4f5c\u4e1a\u72b6\u6001\u3002 <code>Start Time</code> \u663e\u793a\u4f5c\u4e1a\u6216\u4efb\u52a1\u5f00\u59cb\u6267\u884c\u7684\u65f6\u95f4\uff0c\u6700\u540e\u4e00\u884c\u663e\u793a\u4f5c\u4e1a\u76f8\u5173\u7684\u6b63\u5728\u8fdb\u884c\u7684\u4efb\u52a1\u6570\u3002 <code>Stop Time</code> \u663e\u793a\u4f5c\u4e1a\u6216\u4efb\u52a1\u7ed3\u675f\u6267\u884c\u7684\u65f6\u95f4\uff0c\u7ed3\u675f\u540e\u7684\u72b6\u6001\u5305\u62ec<code>FINISHED</code>\u3001<code>FAILED</code>\u6216<code>STOPPED</code>\u3002 <code>Error Code</code> \u663e\u793a\u4f5c\u4e1a\u6216\u4efb\u52a1\u7684\u9519\u8bef\u7801\u3002"},{"location":"3.ngql-guide/4.job-statements/#_2","title":"\u4f5c\u4e1a\u72b6\u6001","text":"<p>\u4f5c\u4e1a\u72b6\u6001\u7684\u8bf4\u660e\u5982\u4e0b\u3002</p> \u72b6\u6001 \u8bf4\u660e QUEUE \u4f5c\u4e1a\u6216\u4efb\u52a1\u5728\u7b49\u5f85\u961f\u5217\u4e2d\u3002\u6b64\u9636\u6bb5<code>Start Time</code>\u4e3a\u7a7a\u3002 RUNNING \u4f5c\u4e1a\u6216\u4efb\u52a1\u5728\u6267\u884c\u4e2d\u3002<code>Start Time</code>\u4e3a\u8be5\u9636\u6bb5\u7684\u8d77\u59cb\u65f6\u95f4\u3002 FINISHED \u4f5c\u4e1a\u6216\u4efb\u52a1\u6210\u529f\u5b8c\u6210\u3002<code>Stop Time</code>\u4e3a\u8be5\u9636\u6bb5\u7684\u8d77\u59cb\u65f6\u95f4\u3002 FAILED \u4f5c\u4e1a\u6216\u4efb\u52a1\u5931\u8d25\u3002<code>Stop Time</code>\u4e3a\u8be5\u9636\u6bb5\u7684\u8d77\u59cb\u65f6\u95f4\u3002 STOPPED \u4f5c\u4e1a\u6216\u4efb\u52a1\u505c\u6b62\u3002<code>Stop Time</code>\u4e3a\u8be5\u9636\u6bb5\u7684\u8d77\u59cb\u65f6\u95f4\u3002 REMOVED \u4f5c\u4e1a\u6216\u4efb\u52a1\u88ab\u5220\u9664\u3002 <p>\u72b6\u6001\u8f6c\u6362\u7684\u8bf4\u660e\u5982\u4e0b\u3002</p> <pre><code>Queue -- running -- finished -- removed\n     \\          \\                /\n      \\          \\ -- failed -- /\n       \\          \\            /\n        \\ ---------- stopped -/\n</code></pre>"},{"location":"3.ngql-guide/4.job-statements/#show_jobs","title":"SHOW JOBS","text":"<p><code>SHOW JOBS</code>\u8bed\u53e5\u5217\u51fa\u5f53\u524d\u56fe\u7a7a\u95f4\u5185\u6240\u6709\u672a\u8fc7\u671f\u7684\u4f5c\u4e1a\u3002</p> <p>\u4f5c\u4e1a\u7684\u9ed8\u8ba4\u8fc7\u671f\u65f6\u95f4\u4e3a\u4e00\u5468\u3002\u5982\u679c\u9700\u8981\u4fee\u6539\u8fc7\u671f\u65f6\u95f4\uff0c\u8bf7\u4fee\u6539 Meta \u670d\u52a1\u7684\u53c2\u6570<code>job_expired_secs</code>\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1 Meta \u670d\u52a1\u914d\u7f6e\u3002</p> <p>\u793a\u4f8b\uff1a</p> <pre><code>nebula&gt; SHOW JOBS;\n+--------+---------------------+------------+----------------------------+----------------------------+\n| Job Id | Command             | Status     | Start Time                 | Stop Time                  |\n+--------+---------------------+------------+----------------------------+----------------------------+\n| 34     | \"STATS\"             | \"FINISHED\" | 2021-11-01T03:32:27.000000 | 2021-11-01T03:32:27.000000 |\n| 33     | \"FLUSH\"             | \"FINISHED\" | 2021-11-01T03:32:15.000000 | 2021-11-01T03:32:15.000000 |\n| 32     | \"COMPACT\"           | \"FINISHED\" | 2021-11-01T03:32:06.000000 | 2021-11-01T03:32:06.000000 |\n| 31     | \"REBUILD_TAG_INDEX\" | \"FINISHED\" | 2021-10-29T05:39:16.000000 | 2021-10-29T05:39:17.000000 |\n| 10     | \"COMPACT\"           | \"FINISHED\" | 2021-10-26T02:27:05.000000 | 2021-10-26T02:27:05.000000 |\n+--------+---------------------+------------+----------------------------+----------------------------+\n</code></pre>"},{"location":"3.ngql-guide/4.job-statements/#stop_job","title":"STOP JOB","text":"<p><code>STOP JOB &lt;job_id&gt;</code>\u8bed\u53e5\u53ef\u4ee5\u505c\u6b62\u5f53\u524d\u56fe\u7a7a\u95f4\u5185\u672a\u5b8c\u6210\u7684\u4f5c\u4e1a\u3002</p> <p>\u793a\u4f8b\uff1a</p> <pre><code>nebula&gt; STOP JOB 22;\n+---------------+\n| Result        |\n+---------------+\n| \"Job stopped\" |\n+---------------+\n</code></pre>"},{"location":"3.ngql-guide/4.job-statements/#recover_job","title":"RECOVER JOB","text":"<p><code>RECOVER JOB [&lt;job_id&gt;]</code>\u8bed\u53e5\u53ef\u4ee5\u91cd\u65b0\u6267\u884c\u5f53\u524d\u56fe\u7a7a\u95f4\u5185\u72b6\u6001\u4e3a<code>FAILED</code>\u3001<code>STOPPED</code>\u7684\u4f5c\u4e1a\uff0c\u672a\u6307\u5b9a<code>&lt;job_id&gt;</code>\u65f6\uff0c\u4f1a\u4ece\u6700\u65e9\u7684\u4f5c\u4e1a\u5f00\u59cb\u5c1d\u8bd5\u91cd\u65b0\u6267\u884c\uff0c\u5e76\u8fd4\u56de\u5df2\u6062\u590d\u7684\u4f5c\u4e1a\u6570\u91cf\u3002</p> <p>\u793a\u4f8b\uff1a</p> <pre><code>nebula&gt; RECOVER JOB;\n+-------------------+\n| Recovered job num |\n+-------------------+\n| 5 job recovered   |\n+-------------------+\n</code></pre>"},{"location":"3.ngql-guide/4.job-statements/#faq","title":"FAQ","text":""},{"location":"3.ngql-guide/4.job-statements/#_3","title":"\u5982\u4f55\u6392\u67e5\u4f5c\u4e1a\u95ee\u9898\uff1f","text":"<p><code>SUBMIT JOB</code>\u64cd\u4f5c\u4f7f\u7528\u7684\u662f HTTP \u7aef\u53e3\uff0c\u8bf7\u68c0\u67e5 Storage \u670d\u52a1\u673a\u5668\u4e0a\u7684 HTTP \u7aef\u53e3\u662f\u5426\u6b63\u5e38\u5de5\u4f5c\u3002\u7528\u6237\u53ef\u4ee5\u6267\u884c\u5982\u4e0b\u547d\u4ee4\u8c03\u8bd5\uff1a</p> <pre><code>curl \"http://{storaged-ip}:19779/admin?space={space_name}&amp;op=compact\"\n</code></pre>"},{"location":"3.ngql-guide/1.nGQL-overview/1.overview/","title":"\u4ec0\u4e48\u662f nGQL","text":"<p>nGQL\u662f NebulaGraph \u4f7f\u7528\u7684\u7684\u58f0\u660e\u5f0f\u56fe\u67e5\u8be2\u8bed\u8a00\uff0c\u652f\u6301\u7075\u6d3b\u9ad8\u6548\u7684\u56fe\u6a21\u5f0f\uff0c\u800c\u4e14 nGQL \u662f\u4e3a\u5f00\u53d1\u548c\u8fd0\u7ef4\u4eba\u5458\u8bbe\u8ba1\u7684\u7c7b SQL \u67e5\u8be2\u8bed\u8a00\uff0c\u6613\u4e8e\u5b66\u4e60\u3002</p> <p>nGQL \u662f\u4e00\u4e2a\u8fdb\u884c\u4e2d\u7684\u9879\u76ee\uff0c\u4f1a\u6301\u7eed\u53d1\u5e03\u65b0\u7279\u6027\u548c\u4f18\u5316\uff0c\u56e0\u6b64\u53ef\u80fd\u4f1a\u51fa\u73b0\u8bed\u6cd5\u548c\u5b9e\u9645\u64cd\u4f5c\u4e0d\u4e00\u81f4\u7684\u95ee\u9898\uff0c\u5982\u679c\u9047\u5230\u6b64\u7c7b\u95ee\u9898\uff0c\u8bf7\u63d0\u4ea4 issue \u901a\u77e5 NebulaGraph \u56e2\u961f\u3002 NebulaGraph 3.0 \u53ca\u66f4\u65b0\u7248\u672c\u6b63\u5728\u652f\u6301 openCypher 9\u3002</p>"},{"location":"3.ngql-guide/1.nGQL-overview/1.overview/#ngql_1","title":"nGQL \u53ef\u4ee5\u505a\u4ec0\u4e48","text":"<ul> <li>\u652f\u6301\u56fe\u904d\u5386</li> </ul> <ul> <li>\u652f\u6301\u6a21\u5f0f\u5339\u914d</li> </ul> <ul> <li>\u652f\u6301\u805a\u5408</li> </ul> <ul> <li>\u652f\u6301\u4fee\u6539\u56fe</li> </ul> <ul> <li>\u652f\u6301\u8bbf\u95ee\u63a7\u5236</li> </ul> <ul> <li>\u652f\u6301\u805a\u5408\u67e5\u8be2</li> </ul> <ul> <li>\u652f\u6301\u7d22\u5f15</li> </ul> <ul> <li>\u652f\u6301\u5927\u90e8\u5206 openCypher 9 \u56fe\u67e5\u8be2\u8bed\u6cd5\uff08\u4e0d\u652f\u6301\u4fee\u6539\u548c\u63a7\u5236\u8bed\u6cd5\uff09</li> </ul>"},{"location":"3.ngql-guide/1.nGQL-overview/1.overview/#basketballplayer","title":"\u793a\u4f8b\u6570\u636e Basketballplayer","text":"<p>\u7528\u6237\u53ef\u4ee5\u4e0b\u8f7d NebulaGraph \u793a\u4f8b\u6570\u636e basketballplayer \u6587\u4ef6\uff0c\u7136\u540e\u4f7f\u7528 NebulaGraph Console\uff0c\u4f7f\u7528\u9009\u9879<code>-f</code>\u6267\u884c\u811a\u672c\u3002</p> <p>Note</p> <p>\u5bfc\u5165\u793a\u4f8b\u6570\u636e\u524d\uff0c\u786e\u4fdd\u5df2\u6267\u884c<code>ADD HOSTS</code>\u547d\u4ee4\u5c06 Storage \u4e3b\u673a\u589e\u52a0\u81f3\u96c6\u7fa4\u4e2d\u3002\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u89c1\u7ba1\u7406 Storage \u4e3b\u673a\u3002</p>"},{"location":"3.ngql-guide/1.nGQL-overview/1.overview/#_1","title":"\u5360\u4f4d\u6807\u8bc6\u7b26\u548c\u5360\u4f4d\u7b26\u503c","text":"<p>NebulaGraph \u67e5\u8be2\u8bed\u8a00 nGQL \u53c2\u7167\u4ee5\u4e0b\u6807\u51c6\u8bbe\u8ba1\uff1a</p> <ul> <li>(Draft) ISO/IEC JTC1 N14279 SC 32 - Database_Languages - GQL</li> </ul> <ul> <li>(Draft) ISO/IEC JTC1 SC32 N3228 - SQL_Property_Graph_Queries - SQLPGQ</li> </ul> <ul> <li>OpenCypher 9</li> </ul> <p>\u5728\u6a21\u677f\u4ee3\u7801\u4e2d\uff0c\u4efb\u4f55\u975e\u5173\u952e\u5b57\u3001\u5b57\u9762\u503c\u6216\u6807\u70b9\u7b26\u53f7\u7684\u6807\u8bb0\u90fd\u662f\u5360\u4f4d\u7b26\u6807\u8bc6\u7b26\u6216\u5360\u4f4d\u7b26\u503c\u3002</p> <p>\u672c\u6587\u4e2d nGQL \u8bed\u6cd5\u7b26\u53f7\u7684\u8bf4\u660e\u5982\u4e0b\u3002</p> \u7b26\u53f7 \u542b\u4e49 &lt; &gt; \u8bed\u6cd5\u5143\u7d20\u7684\u540d\u79f0\u3002 : \u5b9a\u4e49\u5143\u7d20\u7684\u516c\u5f0f\u3002 [ ] \u53ef\u9009\u5143\u7d20\u3002 { } \u663e\u5f0f\u7684\u6307\u5b9a\u5143\u7d20\u3002 | \u6240\u6709\u53ef\u9009\u7684\u5143\u7d20\u3002 ... \u53ef\u4ee5\u91cd\u590d\u591a\u6b21\u3002 <p>\u4f8b\u5982\u521b\u5efa\u70b9\u7684 nGQL \u8bed\u6cd5\uff1a</p> <pre><code>INSERT VERTEX [IF NOT EXISTS] [tag_props, [tag_props] ...]\nVALUES &lt;vid&gt;: ([prop_value_list])\n\ntag_props:\n  tag_name ([prop_name_list])\n\nprop_name_list:\n   [prop_name [, prop_name] ...]\n\nprop_value_list:\n   [prop_value [, prop_value] ...]  \n</code></pre> <p>\u793a\u4f8b\u8bed\u53e5\uff1a</p> <pre><code>nebula&gt; CREATE TAG IF NOT EXISTS player(name string, age int);\n</code></pre>"},{"location":"3.ngql-guide/1.nGQL-overview/1.overview/#opencypher","title":"\u5173\u4e8e openCypher \u517c\u5bb9\u6027","text":""},{"location":"3.ngql-guide/1.nGQL-overview/1.overview/#ngql_opencypher","title":"\u539f\u751f nGQL \u548c openCypher \u7684\u5173\u7cfb","text":"<p>\u539f\u751f nGQL \u662f\u7531 NebulaGraph \u81ea\u884c\u521b\u9020\u548c\u5b9e\u73b0\u7684\u56fe\u67e5\u8be2\u8bed\u8a00\u3002openCypher \u662f\u7531 openCypher Implementers Group \u7ec4\u7ec7\u6240\u5f00\u6e90\u548c\u7ef4\u62a4\u7684\u56fe\u67e5\u8be2\u8bed\u8a00\uff0c\u6700\u65b0\u7248\u672c\u4e3a openCypher 9\u3002</p> <p>\u7531\u4e8e nGQL \u8bed\u8a00\u90e8\u5206\u517c\u5bb9\u4e86 openCypher\uff0c\u8fd9\u4e2a\u90e8\u5206\u5728\u672c\u6587\u4e2d\u79f0\u4e3a openCypher \u517c\u5bb9\u8bed\u53e5\u3002</p> <p>Note</p> <p><code>nGQL \u8bed\u8a00</code> = <code>\u539f\u751f nGQL \u8bed\u53e5</code> + <code>openCypher \u517c\u5bb9\u8bed\u53e5</code></p>"},{"location":"3.ngql-guide/1.nGQL-overview/1.overview/#ngql_opencypher_9","title":"nGQL \u5b8c\u5168\u517c\u5bb9 openCypher 9 \u5417\uff1f","text":"<p>\u4e0d\u3002</p> <p>openCypher \u517c\u5bb9\u6027</p> <p>nGQL \u8bbe\u8ba1\u76ee\u6807\u4ec5\u4e3a\u517c\u5bb9\u90e8\u5206\u7684 DQL \u8bed\u53e5(match, optional match, with\u7b49)\u3002</p> <p>\u4e0d\u8ba1\u5212\u517c\u5bb9\u4efb\u4f55 DDL\uff0cDML\uff0cDCL\uff1b</p> <p>\u4e0d\u8ba1\u5212\u517c\u5bb9 Bolt \u534f\u8bae\uff1b</p> <p>\u4e0d\u8ba1\u5212\u517c\u5bb9 APOC \u4e0e GDS\u3002</p> <p>\u5728\u672c\u6587\u641c\u7d22 \"compatibility\" \u6216\u8005 \u201c\u517c\u5bb9\u6027\u201d \u67e5\u770b\u5177\u4f53\u4e0d\u517c\u5bb9\u7684\u7ec6\u8282\u3002</p> <p>\u5728 Issues \u4e2d\u5df2\u7ecf\u5217\u51fa\u5df2\u77e5\u7684\u517c\u5bb9\u9519\u8bef\u3002\u5982\u679c\u53d1\u73b0\u8fd9\u79cd\u7c7b\u578b\u7684\u65b0\u95ee\u9898\uff0c\u8bf7\u63d0\u4ea4\u95ee\u9898\u5e76\u9644\u5e26<code>incompatible</code>\u6807\u7b7e\u3002</p>"},{"location":"3.ngql-guide/1.nGQL-overview/1.overview/#ngql_opencypher_10","title":"nGQL \u548c openCypher 9 \u7684 \u4e3b\u8981\u5dee\u5f02\u6709\u54ea\u4e9b\uff1f","text":"\u7c7b\u522b openCypher 9 nGQL Schema \u5f31 Schema \u5f3a Schema \u76f8\u7b49\u8fd0\u7b97\u7b26 <code>=</code> <code>==</code> \u6570\u5b66\u6c42\u5e42 <code>^</code> \u4f7f\u7528<code>pow(x, y)</code>\u66ff\u4ee3<code>^</code>\u3002 \u8fb9 Rank \u65e0\u6b64\u6982\u5ff5 \u7528<code>@rank</code>\u8bbe\u7f6e\u3002 \u8bed\u53e5 - \u4e0d\u652f\u6301 openCypher 9 \u7684\u6240\u6709 DML \u8bed\u53e5\uff08\u5982<code>CREATE</code>\u3001<code>MERGE</code>\u7b49\uff09\uff0c\u4e0d\u652f\u6301\u6240\u6709\u7684 DCL\uff0c\u548c\u652f\u6301\u90e8\u5206 <code>MATCH</code>, <code>OPTIONAL MATCH</code> \u8bed\u6cd5\u548c\u51fd\u6570\u3002 \u8bed\u53e5\u6587\u672c\u6362\u884c \u6362\u884c\u7b26 <code>\\</code> + \u6362\u884c\u7b26 Label \u4e0e Tag \u662f\u4e0d\u540c\u7684\u6982\u5ff5 Label \u7528\u4e8e\u5bfb\u627e\u70b9\uff08\u70b9\u7684\u7d22\u5f15\uff09\u3002 Tag \u7528\u4e8e\u5b9a\u4e49\u70b9\u7684\u4e00\u79cd\u7c7b\u578b\u53ca\u76f8\u5e94\u7684\u5c5e\u6027\uff0c\u65e0\u7d22\u5f15\u529f\u80fd\u3002 \u9884\u7f16\u8bd1\u4e0e\u53c2\u6570\u5316\u67e5\u8be2 \u652f\u6301 \u4ec5\u652f\u6301\u53c2\u6570\u5316\u67e5\u8be2\u3002 <p>Compatibility</p> <p>\u8bf7\u6ce8\u610f openCypher 9 \u548c Cypher \u5728\u8bed\u6cd5\u548c\u8bb8\u53ef\u4e0a\u6709\u4e0d\u540c\uff1a</p> <ol> <li> <p>Cypher \u8981\u6c42\u6240\u6709 Cypher \u8bed\u53e5\u5fc5\u987b\u201c\u663e\u5f0f\u5730\u5728\u4e00\u4e2a\u4e8b\u52a1\u4e2d\u201d\u6267\u884c\uff0c\u800c openCypher \u6ca1\u6709\u8fd9\u6837\u7684\u8981\u6c42\u3002\u53e6\u5916\uff0cnGQL \u6ca1\u6709\u4e8b\u52a1\u53ca\u9694\u79bb\u6027\u3002</p> </li> <li> <p>Cypher \u4f01\u4e1a\u7248\u529f\u80fd\u6709\u591a\u79cd\u7684\u7ea6\u675f\uff08constraints\uff09\uff0c\u5305\u62ec Unique node property constraints\u3001Node property existence constraints\u3001Relationship property existence constraints\u3001Node key constraints\u3002 OpenCypher \u6807\u51c6\u4e2d\u6ca1\u6709\u7ea6\u675f\u3002 \u800c nGQL \u662f\u5f3a Schema \u7cfb\u7edf\uff0c\u524d\u8ff0\u7684\u7ea6\u675f\u5927\u591a\u901a\u8fc7 Schema \u5b9a\u4e49\u53ef\u5b9e\u73b0\uff08\u5305\u62ec NOT NULL\uff09\uff0c\u552f\u4e00\u4e0d\u80fd\u652f\u6301\u7684\u529f\u80fd\u662f\u201c\u5c5e\u6027\u503c\u552f\u4e00\u6027\u201d\uff08UNIQUE constraint\uff09\u3002</p> </li> <li> <p>Cypher \u6709 APoC\uff0copenCypher 9 \u6ca1\u6709 APoC\u3002Cypher \u6709 Bolt \u534f\u8bae\u652f\u6301\u8981\u6c42\uff0c openCypher 9 \u6ca1\u6709\u3002</p> </li> </ol>"},{"location":"3.ngql-guide/1.nGQL-overview/1.overview/#ngql_2","title":"\u54ea\u91cc\u53ef\u4ee5\u627e\u5230\u66f4\u591a nGQL \u7684\u793a\u4f8b\uff1f","text":"<p>\u7528\u6237\u53ef\u4ee5\u5728 GitHub \u7684 features \u76ee\u5f55\u5185\u67e5\u770b\u8d85\u8fc7 2500 \u6761 nGQL \u793a\u4f8b\u3002</p> <p>features \u76ee\u5f55\u5185\u5305\u542b\u5f88\u591a<code>.features</code>\u683c\u5f0f\u7684\u6587\u4ef6\uff0c\u6bcf\u4e2a\u6587\u4ef6\u90fd\u8bb0\u5f55\u4e86\u4f7f\u7528 nGQL \u7684\u573a\u666f\u548c\u793a\u4f8b\u3002\u4f8b\u5982\uff1a</p> <pre><code>Feature: Basic match\n\n  Background:\n    Given a graph with space named \"basketballplayer\"\n\n  Scenario: Single node\n    When executing query:\n      \"\"\"\n      MATCH (v:player {name: \"Yao Ming\"}) RETURN v;\n      \"\"\"\n    Then the result should be, in any order, with relax comparison:\n      | v                                                |\n      | (\"player133\" :player{age: 38, name: \"Yao Ming\"}) |\n\n  Scenario: One step\n    When executing query:\n      \"\"\"\n      MATCH (v1:player{name: \"LeBron James\"}) -[r]-&gt; (v2)\n      RETURN type(r) AS Type, v2.player.name AS Name\n      \"\"\"\n    Then the result should be, in any order:\n\n      | Type     | Name        |\n      | \"follow\" | \"Ray Allen\" |\n      | \"serve\"  | \"Lakers\"    |\n      | \"serve\"  | \"Heat\"      |\n      | \"serve\"  | \"Cavaliers\" |\n\nFeature:  Comparison of where clause\n\n  Background:\n    Given a graph with space named \"basketballplayer\"\n\n    Scenario: push edge props filter down\n      When profiling query:\n        \"\"\"\n        GO FROM \"player100\" OVER follow \n        WHERE properties(edge).degree IN [v IN [95,99] WHERE v &gt; 0] \n        YIELD dst(edge), properties(edge).degree\n        \"\"\"\n      Then the result should be, in any order:\n        | follow._dst | follow.degree |\n        | \"player101\" | 95            |\n        | \"player125\" | 95            |\n      And the execution plan should be:\n        | id | name         | dependencies | operator info                                                         |\n        | 0  | Project      | 1            |                                                                       |\n        | 1  | GetNeighbors | 2            | {\"filter\": \"(properties(edge).degree IN [v IN [95,99] WHERE (v&gt;0)])\"} |\n        | 2  | Start        |              |                                                                       |\n</code></pre> <p>\u793a\u4f8b\u4e2d\u7684\u5173\u952e\u5b57\u8bf4\u660e\u5982\u4e0b\u3002</p> \u5173\u952e\u5b57 \u8bf4\u660e <code>Feature</code> \u63cf\u8ff0\u5f53\u524d\u6587\u6863\u7684\u4e3b\u9898\u3002 <code>Background</code> \u63cf\u8ff0\u5f53\u524d\u6587\u6863\u7684\u80cc\u666f\u4fe1\u606f\u3002 <code>Given</code> \u63cf\u8ff0\u6267\u884c\u793a\u4f8b\u8bed\u53e5\u7684\u524d\u63d0\u6761\u4ef6\u3002 <code>Scenario</code> \u63cf\u8ff0\u5177\u4f53\u573a\u666f\u3002\u5982\u679c\u573a\u666f\u4e4b\u524d\u6709<code>@skip</code>\u6807\u8bc6\uff0c\u8868\u793a\u8fd9\u4e2a\u573a\u666f\u4e0b\u793a\u4f8b\u8bed\u53e5\u53ef\u80fd\u65e0\u6cd5\u6b63\u5e38\u5de5\u4f5c\uff0c\u8bf7\u4e0d\u8981\u5728\u751f\u4ea7\u73af\u5883\u4e2d\u4f7f\u7528\u8be5\u793a\u4f8b\u8bed\u53e5\u3002 <code>When</code> \u63cf\u8ff0\u8981\u6267\u884c\u7684 nGQL \u793a\u4f8b\u8bed\u53e5\u3002\u53ef\u4ee5\u662f<code>executing query</code>\u6216<code>profiling query</code>\u3002 <code>Then</code> \u63cf\u8ff0\u6267\u884c<code>When</code>\u5185\u8bed\u53e5\u7684\u9884\u671f\u8fd4\u56de\u7ed3\u679c\u3002\u5982\u679c\u8fd4\u56de\u7ed3\u679c\u548c\u6587\u6863\u4e0d\u540c\uff0c\u8bf7\u63d0\u4ea4 issue \u901a\u77e5 NebulaGraph \u56e2\u961f\u3002 <code>And</code> \u63cf\u8ff0\u6267\u884c<code>When</code>\u5185\u8bed\u53e5\u7684\u526f\u4f5c\u7528\u6216\u6267\u884c\u8ba1\u5212\u3002 <code>@skip</code> \u8df3\u8fc7\u8fd9\u4e2a\u793a\u4f8b\u3002\u901a\u5e38\u8868\u793a\u6d4b\u8bd5\u4ee3\u7801\u8fd8\u6ca1\u6709\u51c6\u5907\u597d\u3002 <p>\u6b22\u8fce\u589e\u52a0\u66f4\u591a tck case\uff0c\u5728 CI/CD \u4e2d\u81ea\u52a8\u56de\u5f52\u6240\u4f7f\u7528\u7684\u8bed\u53e5\u3002</p>"},{"location":"3.ngql-guide/1.nGQL-overview/1.overview/#tinkerpop_gremlin","title":"\u662f\u5426\u652f\u6301 TinkerPop Gremlin\uff1f","text":"<p>\u4e0d\u652f\u6301\u3002\u4e5f\u6ca1\u6709\u8ba1\u5212\u3002</p>"},{"location":"3.ngql-guide/1.nGQL-overview/1.overview/#w3c_rdfsparql_graphql","title":"\u662f\u5426\u652f\u6301 W3C \u7684 RDF\uff08SPARQL\uff09 \u6216 GraphQL \u7b49\uff1f","text":"<p>\u4e0d\u652f\u6301\u3002\u4e5f\u6ca1\u6709\u8ba1\u5212\u3002</p> <p>NebulaGraph \u7684\u6570\u636e\u6a21\u578b\u662f\u5c5e\u6027\u56fe\uff0c\u662f\u4e00\u4e2a\u5f3a Schema \u7cfb\u7edf\uff0c\u4e0d\u652f\u6301 RDF \u6807\u51c6\u3002</p> <p>nGQL \u4e5f\u4e0d\u652f\u6301 SPARQL \u548c GraphQL\u3002</p>"},{"location":"3.ngql-guide/1.nGQL-overview/3.graph-patterns/","title":"\u6a21\u5f0f","text":"<p>\u6a21\u5f0f\uff08pattern\uff09\u548c\u56fe\u6a21\u5f0f\u5339\u914d\uff0c\u662f\u56fe\u67e5\u8be2\u8bed\u8a00\u7684\u6838\u5fc3\u529f\u80fd\uff0c\u672c\u6587\u4ecb\u7ecd NebulaGraph \u8bbe\u8ba1\u7684\u5404\u79cd\u6a21\u5f0f\uff0c\u90e8\u5206\u8fd8\u672a\u5b9e\u73b0\u3002</p>"},{"location":"3.ngql-guide/1.nGQL-overview/3.graph-patterns/#_2","title":"\u5355\u70b9\u6a21\u5f0f","text":"<p>\u70b9\u7528\u4e00\u5bf9\u62ec\u53f7\u6765\u63cf\u8ff0\uff0c\u901a\u5e38\u5305\u542b\u4e00\u4e2a\u540d\u79f0\u3002\u4f8b\u5982\uff1a</p> <pre><code>(a)\n</code></pre> <p>\u793a\u4f8b\u4e3a\u4e00\u4e2a\u7b80\u5355\u7684\u6a21\u5f0f\uff0c\u63cf\u8ff0\u4e86\u5355\u4e2a\u70b9\uff0c\u5e76\u4f7f\u7528\u53d8\u91cf<code>a</code>\u547d\u540d\u8be5\u70b9\u3002</p>"},{"location":"3.ngql-guide/1.nGQL-overview/3.graph-patterns/#_3","title":"\u591a\u70b9\u5173\u8054\u6a21\u5f0f","text":"<p>\u591a\u4e2a\u70b9\u901a\u8fc7\u8fb9\u76f8\u8fde\u662f\u5e38\u89c1\u7684\u7ed3\u6784\uff0c\u6a21\u5f0f\u7528\u7bad\u5934\u6765\u63cf\u8ff0\u4e24\u4e2a\u70b9\u4e4b\u95f4\u7684\u8fb9\u3002\u4f8b\u5982\uff1a</p> <pre><code>(a)-[]-&gt;(b)\n</code></pre> <p>\u793a\u4f8b\u4e3a\u4e00\u4e2a\u7b80\u5355\u7684\u6570\u636e\u7ed3\u6784\uff1a\u4e24\u4e2a\u70b9\u548c\u4e00\u6761\u8fde\u63a5\u4e24\u4e2a\u70b9\u7684\u8fb9\uff0c\u4e24\u4e2a\u70b9\u5206\u522b\u4e3a<code>a</code>\u548c<code>b</code>\uff0c\u8fb9\u662f\u6709\u65b9\u5411\u7684\uff0c\u4ece<code>a</code>\u5230<code>b</code>\u3002</p> <p>\u8fd9\u79cd\u63cf\u8ff0\u70b9\u548c\u8fb9\u7684\u65b9\u5f0f\u53ef\u4ee5\u6269\u5c55\u5230\u4efb\u610f\u6570\u91cf\u7684\u70b9\u548c\u8fb9\uff0c\u4f8b\u5982\uff1a</p> <pre><code>(a)-[]-&gt;(b)&lt;-[]-(c)\n</code></pre> <p>\u8fd9\u6837\u7684\u4e00\u7cfb\u5217\u70b9\u548c\u8fb9\u79f0\u4e3a<code>\u8def\u5f84</code>\uff08path\uff09\u3002</p> <p>\u53ea\u6709\u5728\u6d89\u53ca\u67d0\u4e2a\u70b9\u65f6\uff0c\u624d\u9700\u8981\u547d\u540d\u8fd9\u4e2a\u70b9\u3002\u5982\u679c\u4e0d\u6d89\u53ca\u8fd9\u4e2a\u70b9\uff0c\u5219\u53ef\u4ee5\u7701\u7565\u540d\u79f0\uff0c\u4f8b\u5982\uff1a</p> <pre><code>(a)-[]-&gt;()&lt;-[]-(c)\n</code></pre>"},{"location":"3.ngql-guide/1.nGQL-overview/3.graph-patterns/#tag","title":"Tag \u6a21\u5f0f","text":"<p>Note</p> <p>nGQL \u4e2d\u7684<code>Tag</code>\u6982\u5ff5\u4e0e openCypher \u4e2d\u7684<code>Label</code>\u6709\u4e00\u4e9b\u4e0d\u540c\u3002\u4f8b\u5982\uff0c\u5fc5\u987b\u521b\u5efa\u4e00\u4e2a<code>Tag</code>\u4e4b\u540e\u624d\u80fd\u4f7f\u7528\u5b83\uff0c\u800c\u4e14<code>Tag</code>\u8fd8\u5b9a\u4e49\u4e86\u5c5e\u6027\u7684\u7c7b\u578b\u3002</p> <p>\u6a21\u5f0f\u9664\u4e86\u7b80\u5355\u5730\u63cf\u8ff0\u56fe\u4e2d\u7684\u70b9\u4e4b\u5916\uff0c\u8fd8\u53ef\u4ee5\u63cf\u8ff0\u70b9\u7684 Tag\u3002\u4f8b\u5982\uff1a</p> <pre><code>(a:User)-[]-&gt;(b)\n</code></pre> <p>\u6a21\u5f0f\u4e5f\u53ef\u4ee5\u63cf\u8ff0\u6709\u591a\u4e2a Tag \u7684\u70b9\uff0c\u4f8b\u5982\uff1a</p> <pre><code>(a:User:Admin)-[]-&gt;(b)\n</code></pre>"},{"location":"3.ngql-guide/1.nGQL-overview/3.graph-patterns/#_4","title":"\u5c5e\u6027\u6a21\u5f0f","text":"<p>\u70b9\u548c\u8fb9\u662f\u56fe\u7684\u57fa\u672c\u7ed3\u6784\u3002nGQL \u5728\u8fd9\u4e24\u79cd\u7ed3\u6784\u4e0a\u90fd\u53ef\u4ee5\u589e\u52a0\u5c5e\u6027\uff0c\u65b9\u4fbf\u5b9e\u73b0\u66f4\u4e30\u5bcc\u7684\u6a21\u578b\u3002</p> <p>\u5728\u6a21\u5f0f\u4e2d\uff0c\u5c5e\u6027\u7684\u8868\u793a\u65b9\u5f0f\u4e3a\uff1a\u7528\u82b1\u62ec\u53f7\u62ec\u8d77\u4e00\u4e9b\u952e\u503c\u5bf9\uff0c\u7528\u82f1\u6587\u9017\u53f7\u5206\u9694\uff0c\u5e76\u4e14\u9700\u8981\u6307\u5b9a\u5c5e\u6027\u6240\u5c5e\u7684 Tag \u6216\u8005 Edge type\u3002</p> <p>\u4f8b\u5982\u4e00\u4e2a\u70b9\u6709\u4e24\u4e2a\u5c5e\u6027\uff1a</p> <pre><code>(a:player{name: \"Tim Duncan\", age: 42})\n</code></pre> <p>\u5728\u8fd9\u4e2a\u70b9\u4e0a\u53ef\u4ee5\u6709\u4e00\u6761\u8fb9\u662f\uff1a</p> <pre><code>(a)-[e:follow{degree: 95}]-&gt;(b)\n</code></pre>"},{"location":"3.ngql-guide/1.nGQL-overview/3.graph-patterns/#_5","title":"\u8fb9\u6a21\u5f0f","text":"<p>\u63cf\u8ff0\u4e00\u6761\u8fb9\u6700\u7b80\u5355\u7684\u65b9\u6cd5\u662f\u4f7f\u7528\u7bad\u5934\u8fde\u63a5\u4e24\u4e2a\u70b9\u3002</p> <p>\u53ef\u4ee5\u7528\u4ee5\u4e0b\u65b9\u5f0f\u63cf\u8ff0\u8fb9\u4ee5\u53ca\u5b83\u7684\u65b9\u5411\u6027\u3002\u5982\u679c\u4e0d\u5173\u5fc3\u8fb9\u7684\u65b9\u5411\uff0c\u53ef\u4ee5\u7701\u7565\u7bad\u5934\uff0c\u4f8b\u5982\uff1a</p> <pre><code>(a)-[]-(b)\n</code></pre> <p>\u548c\u70b9\u4e00\u6837\uff0c\u8fb9\u4e5f\u53ef\u4ee5\u547d\u540d\u3002\u4e00\u5bf9\u65b9\u62ec\u53f7\u7528\u4e8e\u5206\u9694\u7bad\u5934\uff0c\u53d8\u91cf\u653e\u5728\u4e24\u8005\u4e4b\u95f4\u3002\u4f8b\u5982\uff1a</p> <pre><code>(a)-[r]-&gt;(b)\n</code></pre> <p>\u548c\u70b9\u4e0a\u7684 Tag \u4e00\u6837\uff0c\u8fb9\u4e5f\u53ef\u4ee5\u6709\u7c7b\u578b\u3002\u63cf\u8ff0\u8fb9\u7684\u7c7b\u578b\uff0c\u4f8b\u5982\uff1a</p> <pre><code>(a)-[r:REL_TYPE]-&gt;(b)\n</code></pre> <p>\u548c\u70b9\u4e0a\u7684 Tag \u4e0d\u540c\uff0c\u4e00\u6761\u8fb9\u53ea\u80fd\u6709\u4e00\u79cd Edge type\u3002\u4f46\u662f\u5982\u679c\u6211\u4eec\u60f3\u63cf\u8ff0\u591a\u4e2a\u53ef\u9009 Edge type\uff0c\u53ef\u4ee5\u7528\u7ba1\u9053\u7b26\u53f7\uff08|\uff09\u5c06\u53ef\u9009\u503c\u5206\u5f00\uff0c\u4f8b\u5982\uff1a</p> <pre><code>(a)-[r:TYPE1|TYPE2]-&gt;(b)\n</code></pre> <p>\u548c\u70b9\u4e00\u6837\uff0c\u8fb9\u7684\u540d\u79f0\u53ef\u4ee5\u7701\u7565\uff0c\u4f8b\u5982\uff1a</p> <pre><code>(a)-[:REL_TYPE]-&gt;(b)\n</code></pre>"},{"location":"3.ngql-guide/1.nGQL-overview/3.graph-patterns/#_6","title":"\u53d8\u957f\u6a21\u5f0f","text":"<p>\u5728\u56fe\u4e2d\u6307\u5b9a\u8fb9\u7684\u957f\u5ea6\u6765\u63cf\u8ff0\u591a\u6761\u8fb9\uff08\u4ee5\u53ca\u4e2d\u95f4\u7684\u70b9\uff09\u7ec4\u6210\u7684\u4e00\u6761\u957f\u8def\u5f84\uff0c\u4e0d\u9700\u8981\u4f7f\u7528\u591a\u4e2a\u70b9\u548c\u8fb9\u6765\u63cf\u8ff0\u3002\u4f8b\u5982\uff1a</p> <pre><code>(a)-[*2]-&gt;(b)\n</code></pre> <p>\u8be5\u6a21\u5f0f\u63cf\u8ff0\u4e86 3 \u70b9 2 \u8fb9\u7ec4\u6210\u7684\u56fe\uff0c\u5b83\u4eec\u90fd\u5728\u4e00\u6761\u8def\u5f84\u4e0a\uff08\u957f\u5ea6\u4e3a 2\uff09\uff0c\u7b49\u4ef7\u4e8e\uff1a</p> <pre><code>(a)-[]-&gt;()-[]-&gt;(b)\n</code></pre> <p>\u4e5f\u53ef\u4ee5\u6307\u5b9a\u957f\u5ea6\u8303\u56f4\uff0c\u8fd9\u6837\u7684\u8fb9\u6a21\u5f0f\u79f0\u4e3a<code>variable-length edges</code>\uff0c\u4f8b\u5982\uff1a</p> <pre><code>(a)-[*3..5]-&gt;(b)\n</code></pre> <p><code>*3..5</code>\u8868\u793a\u6700\u5c0f\u957f\u5ea6\u4e3a 3\uff0c\u6700\u5927\u957f\u5ea6\u4e3a 5\u3002</p> <p>\u8be5\u6a21\u5f0f\u63cf\u8ff0\u4e86 4 \u70b9 3 \u8fb9\u30015 \u70b9 4 \u8fb9\u6216 6 \u70b9 5 \u8fb9\u7ec4\u6210\u7684\u56fe\u3002</p> <p>\u4e5f\u53ef\u4ee5\u6307\u5b9a\u957f\u5ea6\u8303\u56f4\u7684\u4e0a\u9650\u6216\u4e0b\u9650\uff0c\u4e5f\u53ef\u4ee5\u4e24\u4e2a\u90fd\u4e0d\u6307\u5b9a\uff0c\u4f8b\u5982\uff1a</p> <pre><code>(a)-[*..5]-&gt;(b)  // \u6700\u5c0f\u957f\u5ea6\u4e3a 1\uff0c\u6700\u5927\u957f\u5ea6\u4e3a 5\u3002\n(a)-[*3..]-&gt;(b)  // \u6700\u5c0f\u957f\u5ea6\u4e3a 3\uff0c\u6700\u5927\u957f\u5ea6\u4e3a\u65e0\u7a77\u5927\u3002\n(a)-[*]-&gt;(b)     // \u6700\u5c0f\u957f\u5ea6\u4e3a 1\uff0c\u6700\u5927\u957f\u5ea6\u4e3a\u65e0\u7a77\u5927\u3002\n</code></pre>"},{"location":"3.ngql-guide/1.nGQL-overview/3.graph-patterns/#_7","title":"\u8def\u5f84\u53d8\u91cf","text":"<p>\u4e00\u7cfb\u5217\u8fde\u63a5\u7684\u70b9\u548c\u8fb9\u79f0\u4e3a<code>\u8def\u5f84</code>\u3002nGQL \u5141\u8bb8\u4f7f\u7528\u53d8\u91cf\u6765\u547d\u540d\u8def\u5f84\uff0c\u4f8b\u5982\uff1a</p> <pre><code>p = (a)-[*3..5]-&gt;(b) // \u4ece a \u5230 b\uff0c \u6700\u5c0f\u957f\u5ea6\u4e3a 1\uff0c\u6700\u5927\u957f\u5ea6\u4e3a 5 \u7684\u8def\u5f84\n</code></pre> <p>\u53ef\u4ee5\u5728 MATCH \u8bed\u53e5\u4e2d\u4f7f\u7528\u8def\u5f84\u53d8\u91cf\u3002</p>"},{"location":"3.ngql-guide/1.nGQL-overview/comments/","title":"\u6ce8\u91ca","text":"<p>\u672c\u6587\u4ecb\u7ecd nGQL \u4e2d\u7684\u6ce8\u91ca\u65b9\u5f0f\u3002</p>"},{"location":"3.ngql-guide/1.nGQL-overview/comments/#examples","title":"Examples","text":"<pre><code>nebula&gt; RETURN 1+1;     # \u8fd9\u6761\u6ce8\u91ca\u5ef6\u7eed\u5230\u884c\u5c3e\u3002\nnebula&gt; RETURN 1+1;     // \u8fd9\u6761\u6ce8\u91ca\u5ef6\u7eed\u5230\u884c\u5c3e\u3002\nnebula&gt; RETURN 1 /* \u8fd9\u662f\u4e00\u6761\u884c\u5185\u6ce8\u91ca */ + 1 == 2;\nnebula&gt; RETURN 11 +            \\\n/* \u591a\u884c\u6ce8\u91ca       \\\n\u7528\u53cd\u659c\u7ebf\u6765\u6362\u884c\u3002   \\\n*/ 12;\n</code></pre> <p>Note</p> <ul> <li>nGQL \u8bed\u53e5\u4e2d\u7684\u53cd\u659c\u7ebf\uff08\\\uff09\u4ee3\u8868\u6362\u884c\u3002</li> <li>\u5982\u679c nGQL \u8bed\u53e5\u4ee5<code>#</code>\u6216\u8005<code>//</code>\u5f00\u5934\uff0c\u4e0d\u4f1a\u6267\u884c\u8be5\u884c\u547d\u4ee4\u5e76\u4e14\u4f1a\u8fd4\u56de\u63d0\u793a<code>StatementEmpty</code>\u3002</li> </ul>"},{"location":"3.ngql-guide/1.nGQL-overview/comments/#opencypher","title":"openCypher \u517c\u5bb9\u6027","text":"<ul> <li>\u5728 nGQL \u4e2d\uff0c\u7528\u6237\u5fc5\u987b\u5728\u884c\u672b\u4f7f\u7528\u53cd\u659c\u7ebf\uff08\\\uff09\u6765\u6362\u884c\uff0c\u5373\u4f7f\u662f\u5728\u4f7f\u7528<code>/* */</code>\u7b26\u53f7\u7684\u591a\u884c\u6ce8\u91ca\u5185\u3002</li> <li>\u5728 openCypher \u4e2d\u4e0d\u9700\u8981\u4f7f\u7528\u53cd\u659c\u7ebf\u6362\u884c\u3002</li> </ul> <pre><code>/* openCypher \u98ce\u683c\uff1a\n\u8fd9\u6761\u6ce8\u91ca\n\u5ef6\u7eed\u4e86\u4e0d\u6b62\n\u4e00\u884c */\nMATCH (n:label)\nRETURN n;\n</code></pre> <pre><code>/* \u539f\u751f nGQL \u98ce\u683c\uff1a  \\\n\u8fd9\u6761\u6ce8\u91ca       \\\n\u5ef6\u7eed\u4e86\u4e0d\u6b62     \\\n\u4e00\u884c */       \\\nMATCH (n:tag) \\\nRETURN n;\n</code></pre>"},{"location":"3.ngql-guide/1.nGQL-overview/identifier-case-sensitivity/","title":"\u5927\u5c0f\u5199\u533a\u5206","text":""},{"location":"3.ngql-guide/1.nGQL-overview/identifier-case-sensitivity/#_2","title":"\u6807\u8bc6\u7b26\u533a\u5206\u5927\u5c0f\u5199","text":"<p>\u4ee5\u4e0b\u8bed\u53e5\u4f1a\u51fa\u73b0\u9519\u8bef\uff0c\u56e0\u4e3a<code>my_space</code>\u548c<code>MY_SPACE</code>\u662f\u4e24\u4e2a\u4e0d\u540c\u7684\u56fe\u7a7a\u95f4\u3002</p> <pre><code>nebula&gt; CREATE SPACE IF NOT EXISTS my_space (vid_type=FIXED_STRING(30));\nnebula&gt; use MY_SPACE;\n[ERROR (-1005)]: SpaceNotFound: \n</code></pre>"},{"location":"3.ngql-guide/1.nGQL-overview/identifier-case-sensitivity/#_3","title":"\u5173\u952e\u5b57\u4e0d\u533a\u5206\u5927\u5c0f\u5199","text":"<p>\u4ee5\u4e0b\u8bed\u53e5\u662f\u7b49\u4ef7\u7684\uff0c\u56e0\u4e3a<code>show</code>\u548c<code>spaces</code>\u662f\u5173\u952e\u5b57\u3002</p> <pre><code>nebula&gt; show spaces;  \nnebula&gt; SHOW SPACES;\nnebula&gt; SHOW spaces;\nnebula&gt; show SPACES;\n</code></pre>"},{"location":"3.ngql-guide/1.nGQL-overview/identifier-case-sensitivity/#_4","title":"\u51fd\u6570\u4e0d\u533a\u5206\u5927\u5c0f\u5199","text":"<p>\u51fd\u6570\u540d\u79f0\u4e0d\u533a\u5206\u5927\u5c0f\u5199\uff0c\u4f8b\u5982<code>count()</code>\u3001<code>COUNT()</code>\u3001<code>couNT()</code>\u662f\u7b49\u4ef7\u7684\u3002</p> <pre><code>nebula&gt; WITH [NULL, 1, 1, 2, 2] As a \\\n        UNWIND a AS b \\\n        RETURN count(b), COUNT(*), couNT(DISTINCT b);\n+----------+----------+-------------------+\n| count(b) | COUNT(*) | couNT(distinct b) |\n+----------+----------+-------------------+\n| 4        | 5        | 2                 |\n+----------+----------+-------------------+\n</code></pre>"},{"location":"3.ngql-guide/1.nGQL-overview/keywords-and-reserved-words/","title":"\u5173\u952e\u5b57","text":"<p>\u5173\u952e\u5b57\u662f nGQL \u4e2d\u5177\u6709\u7279\u6b8a\u542b\u4e49\u7684\u8bcd\uff0c\u4f8b\u5982<code>CREATE TAG</code>\u8bed\u53e5\u4e2d\u7684<code>CREATE</code>\u548c<code>TAG</code>\u3002\u9700\u8981\u7ecf\u8fc7\u7279\u6b8a\u5904\u7406\u624d\u80fd\u4f5c\u4e3a\u6807\u8bc6\u7b26\u4f7f\u7528\u7684\u5173\u952e\u5b57\u88ab\u79f0\u4e3a\u4fdd\u7559\u5173\u952e\u5b57\uff0c\u800c\u80fd\u591f\u76f4\u63a5\u4f5c\u4e3a\u6807\u8bc6\u7b26\u4f7f\u7528\u7684\u8fd9\u90e8\u5206\u5173\u952e\u5b57\u88ab\u79f0\u4e3a\u975e\u4fdd\u7559\u5173\u952e\u5b57\u3002</p> <p>\u4e0d\u5efa\u8bae\u5728\u521b\u5efa Schema \u65f6\u4f7f\u7528\u5173\u952e\u5b57\u3002\u5982\u679c\u5fc5\u987b\u4f7f\u7528\u5173\u952e\u5b57\uff0c\u8bf7\u6ce8\u610f\u4e00\u4e0b\u89c4\u5219\uff1a</p> <ul> <li>\u4f7f\u7528\u4fdd\u7559\u5173\u952e\u5b57\u6216\u7279\u6b8a\u5b57\u7b26\u4f5c\u4e3a\u6807\u8bc6\u7b26\u65f6\uff0c\u5fc5\u987b\u7528\u53cd\u5f15\u53f7\uff08`\uff09\u5305\u56f4\uff0c\u4f8b\u5982 `AND`\u3002\u5426\u5219\uff0c\u4f1a\u8fd4\u56de\u8bed\u4e49\u9519\u8bef\uff0c\u521b\u5efa\u5931\u8d25\u3002</li> </ul> <ul> <li> <p>\u4f7f\u7528\u975e\u4fdd\u7559\u5173\u952e\u5b57\u4f5c\u4e3a\u6807\u8bc6\u7b26\u65f6\uff1a</p> <ul> <li>\u82e5\u5176\u5305\u542b\u5927\u5199\u5b57\u6bcd\uff0c\u5fc5\u987b\u7528\u53cd\u5f15\u53f7\uff08`\uff09\u5305\u56f4\uff0c\u4f8b\u5982 `Comment`\u3002\u5426\u5219\uff0c\u867d\u7136\u80fd\u521b\u5efa\u6210\u529f\uff0c\u7cfb\u7edf\u4f1a\u81ea\u52a8\u5c06\u6807\u8bc6\u7b26\u8f6c\u5316\u4e3a\u5168\u5c0f\u5199\u5b57\u6bcd\uff0c\u4e5f\u5373 `comment`\u3002</li> <li>\u82e5\u5176\u4e3a\u5168\u5c0f\u5199\u5b57\u6bcd\uff0c\u53ef\u4ee5\u4e0d\u4f7f\u7528\u53cd\u5f15\u53f7\uff08`\uff09\u5305\u56f4\u3002</li> </ul> </li> </ul> <pre><code>nebula&gt; CREATE TAG TAG(name string);\n[ERROR (-1004)]: SyntaxError: syntax error near `TAG'\n\nnebula&gt; CREATE TAG `TAG` (name string);\nExecution succeeded\n\nnebula&gt; CREATE TAG SPACE(name string);\nExecution succeeded\n\nnebula&gt; CREATE TAG \u4e2d\u6587(\u7b80\u4f53 string);\nExecution succeeded\n\nnebula&gt; CREATE TAG `\uffe5%\u7279\u6b8a \u5b57\u7b26&amp;*+-*/` (`q~\uff01\uff08\uff09=  wer` string);\nExecution succeeded\n</code></pre>"},{"location":"3.ngql-guide/1.nGQL-overview/keywords-and-reserved-words/#_2","title":"\u4fdd\u7559\u5173\u952e\u5b57","text":"<pre><code>ACROSS\nADD\nALTER\nAND\nAS\nASC\nASCENDING\nBALANCE\nBOOL\nBY\nCASE\nCHANGE\nCOMPACT\nCREATE\nDATE\nDATETIME\nDELETE\nDESC\nDESCENDING\nDESCRIBE\nDISTINCT\nDOUBLE\nDOWNLOAD\nDROP\nDURATION\nEDGE\nEDGES\nEXISTS\nEXPLAIN\nFALSE\nFETCH\nFIND\nFIXED_STRING\nFLOAT\nFLUSH\nFROM\nGEOGRAPHY\nGET\nGO\nGRANT\nIF\nIGNORE_EXISTED_INDEX\nIN\nINDEX\nINDEXES\nINGEST\nINSERT\nINT\nINT16\nINT32\nINT64\nINT8\nINTERSECT\nIS\nJOIN\nLEFT\nLIST\nLOOKUP\nMAP\nMATCH\nMINUS\nNO\nNOT\nNULL\nOF\nON\nOR\nORDER\nOVER\nOVERWRITE\nPATH\nPROP\nREBUILD\nRECOVER\nREMOVE\nRESTART\nRETURN\nREVERSELY\nREVOKE\nSET\nSHOW\nSTEP\nSTEPS\nSTOP\nSTRING\nSUBMIT\nTAG\nTAGS\nTIME\nTIMESTAMP\nTO\nTRUE\nUNION\nUNWIND\nUPDATE\nUPSERT\nUPTO\nUSE\nVERTEX\nVERTICES\nWHEN\nWHERE\nWITH\nXOR\nYIELD\n</code></pre>"},{"location":"3.ngql-guide/1.nGQL-overview/keywords-and-reserved-words/#_3","title":"\u975e\u4fdd\u7559\u5173\u952e\u5b57","text":"<pre><code>ACCOUNT\nADMIN\nAGENT\nALL\nALLSHORTESTPATHS\nANALYZER\nANY\nATOMIC_EDGE\nAUTO\nBASIC\nBIDIRECT\nBOTH\nCHARSET\nCLEAR\nCLIENTS\nCOLLATE\nCOLLATION\nCOMMENT\nCONFIGS\nCONTAINS\nDATA\nDBA\nDEFAULT\nDIVIDE\nDRAINER\nDRAINERS\nELASTICSEARCH\nELSE\nEND\nENDS\nES_QUERY\nFORCE\nFORMAT\nFULLTEXT\nGOD\nGRANTS\nGRAPH\nGROUP\nGROUPS\nGUEST\nHDFS\nHOST\nHOSTS\nHTTP\nHTTPS\nINTO\nIP\nJOB\nJOBS\nKILL\nLEADER\nLIMIT\nLINESTRING\nLISTENER\nLOCAL\nMERGE\nMETA\nNEW\nNOLOOP\nNONE\nOFFSET\nOPTIONAL\nOUT\nPART\nPARTITION_NUM\nPARTS\nPASSWORD\nPLAN\nPOINT\nPOLYGON\nPROFILE\nQUERIES\nQUERY\nREAD\nREDUCE\nRENAME\nREPLICA_FACTOR\nRESET\nROLE\nROLES\nS2_MAX_CELLS\nS2_MAX_LEVEL\nSAMPLE\nSEARCH\nSERVICE\nSESSION\nSESSIONS\nSHORTEST\nSHORTESTPATH\nSIGN\nSINGLE\nSKIP\nSNAPSHOT\nSNAPSHOTS\nSPACE\nSPACES\nSTARTS\nSTATS\nSTATUS\nSTORAGE\nSUBGRAPH\nSYNC\nTEXT\nTEXT_SEARCH\nTHEN\nTOP\nTTL_COL\nTTL_DURATION\nUSER\nUSERS\nUUID\nVALUE\nVALUES\nVARIABLES\nVID_TYPE\nWHITELIST\nWRITE\nZONE\nZONES\n</code></pre>"},{"location":"3.ngql-guide/1.nGQL-overview/ngql-style-guide/","title":"nGQL \u98ce\u683c\u6307\u5357","text":"<p>nGQL \u6ca1\u6709\u4e25\u683c\u7684\u6784\u5efa\u683c\u5f0f\u8981\u6c42\uff0c\u4f46\u6839\u636e\u6070\u5f53\u800c\u7edf\u4e00\u7684\u98ce\u683c\u521b\u5efa nGQL \u8bed\u53e5\u6709\u5229\u4e8e\u63d0\u9ad8\u53ef\u8bfb\u6027\u3001\u907f\u514d\u6b67\u4e49\u3002\u5728\u540c\u4e00\u7ec4\u7ec7\u6216\u9879\u76ee\u4e2d\u4f7f\u7528\u76f8\u540c\u7684 nGQL \u98ce\u683c\u6709\u5229\u4e8e\u964d\u4f4e\u7ef4\u62a4\u6210\u672c\uff0c\u89c4\u907f\u56e0\u683c\u5f0f\u6df7\u4e71\u6216\u8bef\u89e3\u9020\u6210\u7684\u95ee\u9898\u3002\u672c\u6587\u4e3a\u5199\u4f5c nGQL \u8bed\u53e5\u63d0\u4f9b\u4e86\u98ce\u683c\u53c2\u8003\u3002</p> <p>Compatibility</p> <p>nGQL \u98ce\u683c\u4e0e Cypher Style Guide \u4e0d\u540c\u3002</p>"},{"location":"3.ngql-guide/1.nGQL-overview/ngql-style-guide/#_1","title":"\u6362\u884c","text":"<ol> <li> <p>\u6362\u884c\u5199\u5b50\u53e5\u3002</p> <p>\u4e0d\u63a8\u8350\uff1a</p> <pre><code>GO FROM \"player100\" OVER follow REVERSELY YIELD src(edge) AS id;\n</code></pre> <p>\u63a8\u8350\uff1a</p> <pre><code>GO FROM \"player100\" \\\nOVER follow REVERSELY \\\nYIELD src(edge) AS id;\n</code></pre> </li> <li> <p>\u6362\u884c\u5199\u590d\u5408\u8bed\u53e5\u4e2d\u7684\u4e0d\u540c\u8bed\u53e5\u3002</p> <p>\u4e0d\u63a8\u8350\uff1a</p> <pre><code>GO FROM \"player100\" OVER follow REVERSELY YIELD src(edge) AS id | GO FROM $-.id \\\nOVER serve WHERE properties($^).age &gt; 20 YIELD properties($^).name AS FriendOf, properties($$).name AS Team;\n</code></pre> <p>\u63a8\u8350\uff1a</p> <pre><code>GO FROM \"player100\" \\\nOVER follow REVERSELY \\\nYIELD src(edge) AS id | \\\nGO FROM $-.id OVER serve \\\nWHERE properties($^).age &gt; 20 \\\nYIELD properties($^).name AS FriendOf, properties($$).name AS Team;\n</code></pre> </li> <li> <p>\u5b50\u53e5\u957f\u5ea6\u8d85\u8fc7 80 \u4e2a\u5b57\u7b26\u65f6\uff0c\u5728\u5408\u9002\u7684\u4f4d\u7f6e\u6362\u884c\u3002</p> <p>\u4e0d\u63a8\u8350\uff1a</p> <pre><code>MATCH (v:player{name:\"Tim Duncan\"})-[e]-&gt;(v2) \\\nWHERE (v2.player.name STARTS WITH \"Y\" AND v2.player.age &gt; 35 AND v2.player.age &lt; v.player.age) OR (v2.player.name STARTS WITH \"T\" AND v2.player.age &lt; 45 AND v2.player.age &gt; v.player.age) \\\nRETURN v2;\n</code></pre> <p>\u63a8\u8350\uff1a</p> <pre><code>MATCH (v:player{name:\"Tim Duncan\"})-[e]-&gt;(v2) \\\nWHERE (v2.player.name STARTS WITH \"Y\" AND v2.player.age &gt; 35 AND v2.player.age &lt; v.player.age) \\\nOR (v2.player.name STARTS WITH \"T\" AND v2.player.age &lt; 45 AND v2.player.age &gt; v.player.age) \\\nRETURN v2;\n</code></pre> </li> </ol> <p>Note</p> <p>\u5373\u4f7f\u5b50\u53e5\u4e0d\u8d85\u8fc7 80 \u4e2a\u5b57\u7b26\uff0c\u5982\u9700\u6362\u884c\u540e\u6709\u52a9\u4e8e\u7406\u89e3\uff0c\u4e5f\u53ef\u5c06\u5b50\u53e5\u518d\u6b21\u5206\u884c\u3002</p>"},{"location":"3.ngql-guide/1.nGQL-overview/ngql-style-guide/#_2","title":"\u6807\u8bc6\u7b26\u547d\u540d","text":"<p>\u5728 nGQL \u8bed\u53e5\u4e2d\uff0c\u5173\u952e\u5b57\u3001\u6807\u70b9\u7b26\u53f7\u3001\u7a7a\u683c\u4ee5\u5916\u7684\u5b57\u7b26\u5185\u5bb9\u90fd\u662f\u6807\u8bc6\u7b26\u3002\u63a8\u8350\u7684\u6807\u8bc6\u7b26\u547d\u540d\u65b9\u5f0f\u5982\u4e0b\u3002</p> <ol> <li> <p>\u4f7f\u7528\u5355\u6570\u540d\u8bcd\u547d\u540d Tag\uff0c\u7528\u539f\u578b\u52a8\u8bcd\u6216\u52a8\u8bcd\u77ed\u8bed\u6784\u6210 Edge type\u3002</p> <p>\u4e0d\u63a8\u8350\uff1a</p> <pre><code>MATCH p=(v:players)-[e:are_following]-(v2) \\\nRETURN nodes(p);\n</code></pre> <p>\u63a8\u8350\uff1a</p> <pre><code>MATCH p=(v:player)-[e:follow]-(v2) \\\nRETURN nodes(p);\n</code></pre> </li> <li> <p>\u6807\u8bc6\u7b26\u7528\u86c7\u5f62\u547d\u540d\u6cd5\uff0c\u4ee5\u4e0b\u5212\u7ebf\uff08_\uff09\u8fde\u63a5\u5355\u8bcd\uff0c\u4e14\u6240\u6709\u5b57\u6bcd\u5c0f\u5199\u3002</p> <p>\u4e0d\u63a8\u8350\uff1a</p> <pre><code>MATCH (v:basketballTeam) \\\nRETURN v;\n</code></pre> <p>\u63a8\u8350\uff1a</p> <pre><code>MATCH (v:basketball_team) \\\nRETURN v;\n</code></pre> </li> <li> <p>\u8bed\u6cd5\u5173\u952e\u8bcd\u5927\u5199\uff0c\u53d8\u91cf\u5c0f\u5199\u3002</p> <p>\u4e0d\u63a8\u8350\uff1a</p> <pre><code>match (V:player) return V limit 5;\n</code></pre> <p>\u63a8\u8350\uff1a</p> <pre><code>MATCH (v:player) RETURN v LIMIT 5;\n</code></pre> </li> </ol>"},{"location":"3.ngql-guide/1.nGQL-overview/ngql-style-guide/#pattern","title":"Pattern","text":"<ol> <li> <p>\u5206\u884c\u5199 Pattern \u65f6\uff0c\u5728\u8868\u793a\u8fb9\u7684\u7bad\u5934\u53f3\u4fa7\u6362\u884c\uff0c\u800c\u4e0d\u662f\u5de6\u4fa7\u3002</p> <p>\u4e0d\u63a8\u8350\uff1a</p> <pre><code>MATCH (v:player{name: \"Tim Duncan\", age: 42}) \\\n-[e:follow]-&gt;()-[e2:serve]-&gt;()&lt;--(v2) \\\nRETURN v, e, v2;\n</code></pre> <p>\u63a8\u8350\uff1a</p> <pre><code>MATCH (v:player{name: \"Tim Duncan\", age: 42})-[e:follow]-&gt; \\\n()-[e2:serve]-&gt;()&lt;--(v2) \\\nRETURN v, e, v2;\n</code></pre> </li> <li> <p>\u5c06\u65e0\u9700\u67e5\u8be2\u7684\u70b9\u548c\u8fb9\u533f\u540d\u5316\u3002</p> <p>\u4e0d\u63a8\u8350\uff1a</p> <pre><code>MATCH (v:player)-[e:follow]-&gt;(v2) \\\nRETURN v;\n</code></pre> <p>\u63a8\u8350\uff1a</p> <pre><code>MATCH (v:player)-[:follow]-&gt;() \\\nRETURN v;\n</code></pre> </li> <li> <p>\u5c06\u975e\u533f\u540d\u70b9\u653e\u5728\u533f\u540d\u70b9\u7684\u524d\u9762\u3002</p> <p>\u4e0d\u63a8\u8350\uff1a</p> <pre><code>MATCH ()-[:follow]-&gt;(v) \\\nRETURN v;\n</code></pre> <p>\u63a8\u8350\uff1a</p> <pre><code>MATCH (v)&lt;-[:follow]-() \\\nRETURN v;\n</code></pre> </li> </ol>"},{"location":"3.ngql-guide/1.nGQL-overview/ngql-style-guide/#_3","title":"\u5b57\u7b26\u4e32","text":"<p>\u5b57\u7b26\u4e32\u7528\u53cc\u5f15\u53f7\u5305\u56f4\u3002</p> <p>\u4e0d\u63a8\u8350\uff1a</p> <pre><code>RETURN 'Hello Nebula!';\n</code></pre> <p>\u63a8\u8350\uff1a</p> <pre><code>RETURN \"Hello Nebula!\\\"123\\\"\";\n</code></pre> <p>Note</p> <p>\u5b57\u7b26\u4e32\u4e2d\u9700\u8981\u5d4c\u5957\u5355\u5f15\u53f7\u6216\u53cc\u5f15\u53f7\u65f6\uff0c\u7528\u53cd\u659c\u7ebf\uff08\\\uff09\u8f6c\u4e49\u3002\u4f8b\u5982\uff1a</p> <pre><code>RETURN \"\\\"The database is amazing,\\\" the user says.\";\n</code></pre>"},{"location":"3.ngql-guide/1.nGQL-overview/ngql-style-guide/#_4","title":"\u7ed3\u675f\u8bed\u53e5","text":"<ol> <li> <p>\u7528\u82f1\u6587\u5206\u53f7\uff08;\uff09\u7ed3\u675f nGQL \u8bed\u53e5\u3002</p> <p>\u4e0d\u63a8\u8350\uff1a</p> <pre><code>FETCH PROP ON player \"player100\" YIELD properties(vertex)\n</code></pre> <p>\u63a8\u8350\uff1a</p> <pre><code>FETCH PROP ON player \"player100\" YIELD properties(vertex);\n</code></pre> </li> <li> <p>\u4f7f\u7528\u7ba1\u9053\u7b26\uff08|\uff09\u5206\u9694\u7684\u590d\u5408\u8bed\u53e5\uff0c\u4ec5\u5728\u6700\u540e\u4e00\u884c\u672b\u7528\u82f1\u6587\u5206\u53f7\u7ed3\u5c3e\u3002\u5728\u7ba1\u9053\u7b26\u524d\u4f7f\u7528\u82f1\u6587\u5206\u53f7\u4f1a\u5bfc\u81f4\u8bed\u53e5\u6267\u884c\u5931\u8d25\u3002</p> <p>\u4e0d\u652f\u6301\uff1a</p> <pre><code>GO FROM \"player100\" \\\nOVER follow \\\nYIELD dst(edge) AS id; | \\\nGO FROM $-.id \\\nOVER serve \\\nYIELD properties($$).name AS Team, properties($^).name AS Player;\n</code></pre> <p>\u652f\u6301\uff1a</p> <pre><code>GO FROM \"player100\" \\\nOVER follow \\\nYIELD dst(edge) AS id | \\\nGO FROM $-.id \\\nOVER serve \\\nYIELD properties($$).name AS Team, properties($^).name AS Player;\n</code></pre> </li> <li> <p>\u5728\u5305\u542b\u81ea\u5b9a\u4e49\u53d8\u91cf\u7684\u590d\u5408\u8bed\u53e5\u4e2d\uff0c\u7528\u82f1\u6587\u5206\u53f7\u7ed3\u675f\u5b9a\u4e49\u53d8\u91cf\u7684\u8bed\u53e5\u3002\u4e0d\u6309\u89c4\u5219\u52a0\u5206\u53f7\u6216\u4f7f\u7528\u7ba1\u9053\u7b26\u7ed3\u675f\u8be5\u8bed\u53e5\u4f1a\u5bfc\u81f4\u6267\u884c\u5931\u8d25\u3002</p> <p>\u4e0d\u652f\u6301\uff1a</p> <pre><code>$var = GO FROM \"player100\" \\\nOVER follow \\\nYIELD dst(edge) AS id \\\nGO FROM $var.id \\\nOVER serve \\\nYIELD properties($$).name AS Team, properties($^).name AS Player;\n</code></pre> <p>\u4e5f\u4e0d\u652f\u6301\uff1a</p> <pre><code>$var = GO FROM \"player100\" \\\nOVER follow \\\nYIELD dst(edge) AS id | \\\nGO FROM $var.id \\\nOVER serve \\\nYIELD properties($$).name AS Team, properties($^).name AS Player;\n</code></pre> <p>\u652f\u6301\uff1a</p> <pre><code>$var = GO FROM \"player100\" \\\nOVER follow \\\nYIELD dst(edge) AS id; \\\nGO FROM $var.id \\\nOVER serve \\\nYIELD properties($$).name AS Team, properties($^).name AS Player;\n</code></pre> </li> </ol>"},{"location":"3.ngql-guide/10.tag-statements/1.create-tag/","title":"CREATE TAG","text":"<p><code>CREATE TAG</code>\u8bed\u53e5\u53ef\u4ee5\u901a\u8fc7\u6307\u5b9a\u540d\u79f0\u521b\u5efa\u4e00\u4e2a Tag\u3002</p>"},{"location":"3.ngql-guide/10.tag-statements/1.create-tag/#opencypher","title":"OpenCypher \u517c\u5bb9\u6027","text":"<p>nGQL \u4e2d\u7684 Tag \u548c openCypher \u4e2d\u7684 Label \u76f8\u4f3c\uff0c\u4f46\u53c8\u6709\u6240\u4e0d\u540c\uff0c\u4f8b\u5982\u5b83\u4eec\u7684\u521b\u5efa\u65b9\u5f0f\u3002</p> <ul> <li>openCypher \u4e2d\u7684 Label \u9700\u8981\u5728<code>CREATE</code>\u8bed\u53e5\u4e2d\u4e0e\u70b9\u4e00\u8d77\u521b\u5efa\u3002</li> <li>nGQL \u4e2d\u7684 Tag \u9700\u8981\u4f7f\u7528<code>CREATE TAG</code>\u8bed\u53e5\u72ec\u7acb\u521b\u5efa\u3002Tag \u66f4\u50cf\u662f MySQL \u4e2d\u7684\u8868\u3002</li> </ul>"},{"location":"3.ngql-guide/10.tag-statements/1.create-tag/#_1","title":"\u524d\u63d0\u6761\u4ef6","text":"<p>\u6267\u884c<code>CREATE TAG</code>\u8bed\u53e5\u9700\u8981\u5f53\u524d\u767b\u5f55\u7684\u7528\u6237\u62e5\u6709\u6307\u5b9a\u56fe\u7a7a\u95f4\u7684\u521b\u5efa Tag \u6743\u9650\uff0c\u5426\u5219\u4f1a\u62a5\u9519\u3002</p>"},{"location":"3.ngql-guide/10.tag-statements/1.create-tag/#_2","title":"\u8bed\u6cd5","text":"<p>\u521b\u5efa Tag \u524d\uff0c\u9700\u8981\u5148\u7528<code>USE</code>\u8bed\u53e5\u6307\u5b9a\u5de5\u4f5c\u7a7a\u95f4\u3002</p> <pre><code>CREATE TAG [IF NOT EXISTS] &lt;tag_name&gt;\n    (\n      &lt;prop_name&gt; &lt;data_type&gt; [NULL | NOT NULL] [DEFAULT &lt;default_value&gt;] [COMMENT '&lt;comment&gt;']\n      [{, &lt;prop_name&gt; &lt;data_type&gt; [NULL | NOT NULL] [DEFAULT &lt;default_value&gt;] [COMMENT '&lt;comment&gt;']} ...] \n    )\n    [TTL_DURATION = &lt;ttl_duration&gt;]\n    [TTL_COL = &lt;prop_name&gt;]\n    [COMMENT = '&lt;comment&gt;'];\n</code></pre> \u53c2\u6570 \u8bf4\u660e <code>IF NOT EXISTS</code> \u68c0\u6d4b\u5f85\u521b\u5efa\u7684 Tag \u662f\u5426\u5b58\u5728\uff0c\u53ea\u6709\u4e0d\u5b58\u5728\u65f6\uff0c\u624d\u4f1a\u521b\u5efa Tag\u3002\u4ec5\u68c0\u6d4b Tag \u7684\u540d\u79f0\uff0c\u4e0d\u4f1a\u68c0\u6d4b\u5177\u4f53\u5c5e\u6027\u3002 <code>&lt;tag_name&gt;</code> 1\u3001\u6bcf\u4e2a\u56fe\u7a7a\u95f4\u5185\u7684 Tag \u5fc5\u987b\u662f\u552f\u4e00\u7684\u30022\u3001Tag \u540d\u79f0\u8bbe\u7f6e\u540e\u65e0\u6cd5\u4fee\u6539\u30023\u3001\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u4ec5\u652f\u6301 1~4 \u5b57\u8282\u7684 UTF-8 \u7f16\u7801\u5b57\u7b26\uff0c\u5305\u62ec\u82f1\u6587\u5b57\u6bcd\uff08\u533a\u5206\u5927\u5c0f\u5199\uff09\u3001\u6570\u5b57\u3001\u4e2d\u6587\u7b49\u3002\u4e0d\u80fd\u5305\u542b\u4e0b\u5212\u7ebf\uff08_\uff09\u4ee5\u5916\u7684\u7279\u6b8a\u5b57\u7b26\uff0c\u4e14\u4e0d\u80fd\u4ee5\u6570\u5b57\u5f00\u5934\u30024\u3001\u5982\u679c\u9700\u8981\u4f7f\u7528\u7279\u6b8a\u5b57\u7b26\u3001\u4fdd\u7559\u5173\u952e\u5b57\u6216\u8005\u4ee5\u6570\u5b57\u5f00\u5934\uff0c\u8bf7\u4f7f\u7528\u53cd\u5f15\u53f7\uff08`\uff09\u5305\u56f4\u6574\u4e2a\u540d\u79f0\u3002\u53cd\u5f15\u53f7\u4e2d\u4e0d\u80fd\u5305\u542b\u82f1\u6587\u53e5\u53f7\uff08<code>.</code>\uff09\u3002\u8be6\u60c5\u53c2\u89c1\u5173\u952e\u5b57\u548c\u4fdd\u7559\u5b57\u3002\u6ce8\u610f\uff1a1\u3001\u5982\u679c\u4ee5\u4e2d\u6587\u547d\u540d Tag\uff0c\u62a5<code>SyntaxError</code>\u9519\u8bef\u65f6\uff0c\u9700\u4f7f\u7528\u53cd\u5f15\u53f7\uff08`\uff09\u5305\u56f4\u4e2d\u6587\u5b57\u7b26\u30022\u3001\u540d\u79f0\u4e2d\u5982\u9700\u5305\u542b\u53cd\u5f15\u53f7\uff08`\uff09\uff0c\u4f7f\u7528\u53cd\u659c\u6760\uff08\\\uff09\u6765\u8f6c\u4e49\u53cd\u5f15\u53f7\uff08`\uff09\uff0c\u5982\uff1a\\`\uff1b\u5982\u9700\u5305\u542b\u53cd\u659c\u6760\uff08\\\uff09\uff0c\u53cd\u659c\u6760\uff08\\\uff09\u672c\u8eab\u4e5f\u9700\u8f6c\u4e49\uff0c\u5982\uff1a\\\\\u3002 <code>&lt;prop_name&gt;</code> \u5c5e\u6027\u540d\u79f0\u3002\u6bcf\u4e2a Tag \u4e2d\u7684\u5c5e\u6027\u540d\u79f0\u5fc5\u987b\u552f\u4e00\u3002\u5c5e\u6027\u7684\u547d\u540d\u89c4\u5219\u4e0e Tag \u76f8\u540c\u3002 <code>&lt;data_type&gt;</code> \u5c5e\u6027\u7684\u6570\u636e\u7c7b\u578b\uff0c\u76ee\u524d\u652f\u6301\u6570\u503c\u3001\u5e03\u5c14\u3001\u5b57\u7b26\u4e32\u4ee5\u53ca\u65e5\u671f\u4e0e\u65f6\u95f4\u3002 <code>NULL | NOT NULL</code> \u6307\u5b9a\u5c5e\u6027\u503c\u662f\u5426\u652f\u6301\u4e3a<code>NULL</code>\u3002\u9ed8\u8ba4\u503c\u4e3a<code>NULL</code>\u3002\u6307\u5b9a<code>NOT NULL</code>\u4e14\u6ca1\u6709\u6307\u5b9a<code>DEFAULT</code>\u503c\u65f6\uff0c\u63d2\u5165\u6570\u636e\u5fc5\u987b\u6307\u5b9a\u503c\uff1b\u540c\u65f6\u6307\u5b9a<code>NOT NULL</code>\u548c<code>DEFAULT</code>\u503c\u65f6\uff0c\u63d2\u5165\u6570\u636e\u5982\u679c\u6ca1\u6709\u6307\u5b9a\u503c\uff0c\u5219\u9ed8\u8ba4\u63d2\u5165<code>DEFAULT</code>\u503c\u3002 <code>DEFAULT</code> \u6307\u5b9a\u5c5e\u6027\u7684\u9ed8\u8ba4\u503c\u3002\u9ed8\u8ba4\u503c\u53ef\u4ee5\u662f\u4e00\u4e2a\u6587\u5b57\u503c\u6216 NebulaGraph \u652f\u6301\u7684\u8868\u8fbe\u5f0f\u3002\u5982\u679c\u63d2\u5165\u70b9\u65f6\u6ca1\u6709\u6307\u5b9a\u67d0\u4e2a\u5c5e\u6027\u7684\u503c\uff0c\u5219\u4f7f\u7528\u9ed8\u8ba4\u503c\u3002 <code>COMMENT</code> \u5bf9\u5355\u4e2a\u5c5e\u6027\u6216 Tag \u7684\u63cf\u8ff0\u3002\u6700\u5927\u4e3a 256 \u5b57\u8282\u3002\u9ed8\u8ba4\u65e0\u63cf\u8ff0\u3002 <code>TTL_DURATION</code> \u6307\u5b9a\u65f6\u95f4\u6233\u5dee\u503c\uff0c\u5355\u4f4d\uff1a\u79d2\u3002\u65f6\u95f4\u6233\u5dee\u503c\u5fc5\u987b\u4e3a 64 \u4f4d\u975e\u8d1f\u6574\u6570\u3002\u5c5e\u6027\u503c\u548c\u65f6\u95f4\u6233\u5dee\u503c\u4e4b\u548c\u5982\u679c\u5c0f\u4e8e\u5f53\u524d\u65f6\u95f4\u6233\uff0c\u5c5e\u6027\u5c31\u4f1a\u8fc7\u671f\u3002\u9ed8\u8ba4\u503c\u4e3a<code>0</code>\uff0c\u8868\u793a\u5c5e\u6027\u6c38\u4e0d\u8fc7\u671f\u3002 <code>TTL_COL</code> \u6307\u5b9a\u8981\u8bbe\u7f6e\u5b58\u6d3b\u65f6\u95f4\u7684\u5c5e\u6027\u3002\u5c5e\u6027\u7684\u6570\u636e\u7c7b\u578b\u5fc5\u987b\u662f<code>int</code>\u6216\u8005<code>timestamp</code>\u3002\u4e00\u4e2a Tag \u53ea\u80fd\u6307\u5b9a\u4e00\u4e2a\u5b57\u6bb5\u4e3a<code>TTL_COL</code>\u3002\u66f4\u591a TTL \u7684\u4fe1\u606f\u8bf7\u53c2\u89c1 TTL\u3002"},{"location":"3.ngql-guide/10.tag-statements/1.create-tag/#_3","title":"\u793a\u4f8b","text":"<pre><code>nebula&gt; CREATE TAG IF NOT EXISTS player(name string, age int);\n\n# \u521b\u5efa\u6ca1\u6709\u5c5e\u6027\u7684 Tag\u3002\nnebula&gt; CREATE TAG IF NOT EXISTS no_property();\u00a0\n\n# \u521b\u5efa\u5305\u542b\u9ed8\u8ba4\u503c\u7684 Tag\u3002\nnebula&gt; CREATE TAG IF NOT EXISTS player_with_default(name string, age int DEFAULT 20);\n\n# \u5bf9\u5b57\u6bb5 create_time \u8bbe\u7f6e TTL \u4e3a 100 \u79d2\u3002\nnebula&gt; CREATE TAG IF NOT EXISTS woman(name string, age int, \\\n        married bool, salary double, create_time timestamp) \\\n        TTL_DURATION = 100, TTL_COL = \"create_time\";\n</code></pre>"},{"location":"3.ngql-guide/10.tag-statements/1.create-tag/#tag","title":"\u521b\u5efa Tag \u8bf4\u660e","text":"<p>\u5c1d\u8bd5\u4f7f\u7528\u65b0\u521b\u5efa\u7684 Tag \u53ef\u80fd\u4f1a\u5931\u8d25\uff0c\u56e0\u4e3a\u521b\u5efa\u662f\u5f02\u6b65\u5b9e\u73b0\u7684\u3002\u4e3a\u786e\u4fdd\u6570\u636e\u540c\u6b65\uff0c\u540e\u7eed\u64cd\u4f5c\u80fd\u987a\u5229\u8fdb\u884c\uff0c\u8bf7\u7b49\u5f85 2 \u4e2a\u5fc3\u8df3\u5468\u671f\uff0820 \u79d2\uff09\u3002</p> <p>\u5982\u679c\u9700\u8981\u4fee\u6539\u5fc3\u8df3\u95f4\u9694\uff0c\u8bf7\u4e3a\u6240\u6709\u914d\u7f6e\u6587\u4ef6\u4fee\u6539\u53c2\u6570<code>heartbeat_interval_secs</code>\u3002</p>"},{"location":"3.ngql-guide/10.tag-statements/2.drop-tag/","title":"DROP TAG","text":"<p><code>DROP TAG</code>\u8bed\u53e5\u53ef\u4ee5\u5220\u9664\u5f53\u524d\u5de5\u4f5c\u7a7a\u95f4\u5185\u6240\u6709\u70b9\u4e0a\u7684\u6307\u5b9a Tag\u3002</p> <p>\u70b9\u53ef\u4ee5\u6709\u4e00\u4e2a\u6216\u591a\u4e2a Tag\u3002</p> <ul> <li>\u5982\u679c\u67d0\u4e2a\u70b9\u53ea\u6709\u4e00\u4e2a Tag\uff0c\u5220\u9664\u8fd9\u4e2a Tag \u540e\uff0c\u7528\u6237\u5c31\u65e0\u6cd5\u8bbf\u95ee\u8fd9\u4e2a\u70b9\uff0c\u4e0b\u6b21 Compaction \u64cd\u4f5c\u65f6\u4f1a\u5220\u9664\u8be5\u70b9\uff0c\u4f46\u4e0e\u8be5\u70b9\u76f8\u90bb\u7684\u8fb9\u4ecd\u7136\u5b58\u5728\u2014\u2014\u8fd9\u4f1a\u9020\u6210\u60ac\u6302\u8fb9\u3002</li> </ul> <ul> <li>\u5982\u679c\u67d0\u4e2a\u70b9\u6709\u591a\u4e2a Tag\uff0c\u5220\u9664\u5176\u4e2d\u4e00\u4e2a Tag\uff0c\u4ecd\u7136\u53ef\u4ee5\u8bbf\u95ee\u8fd9\u4e2a\u70b9\uff0c\u4f46\u662f\u65e0\u6cd5\u8bbf\u95ee\u5df2\u5220\u9664 Tag \u6240\u5b9a\u4e49\u7684\u6240\u6709\u5c5e\u6027\u3002</li> </ul> <p>\u5220\u9664 Tag \u64cd\u4f5c\u4ec5\u5220\u9664 Schema \u6570\u636e\uff0c\u786c\u76d8\u4e0a\u7684\u6587\u4ef6\u6216\u76ee\u5f55\u4e0d\u4f1a\u7acb\u523b\u5220\u9664\uff0c\u800c\u662f\u5728\u4e0b\u4e00\u6b21 Compaction \u64cd\u4f5c\u65f6\u5220\u9664\u3002</p> <p>Compatibility</p> <p>NebulaGraph master \u4e2d\u9ed8\u8ba4\u4e0d\u652f\u6301\u63d2\u5165\u65e0 Tag \u7684\u70b9\u3002\u5982\u9700\u4f7f\u7528\u65e0 Tag \u7684\u70b9\uff0c\u5728\u96c6\u7fa4\u5185\u6240\u6709 Graph \u670d\u52a1\u7684\u914d\u7f6e\u6587\u4ef6\uff08<code>nebula-graphd.conf</code>\uff09\u4e2d\u65b0\u589e<code>--graph_use_vertex_key=true</code>\uff1b\u5728\u6240\u6709 Storage \u670d\u52a1\u7684\u914d\u7f6e\u6587\u4ef6\uff08<code>nebula-storaged.conf</code>\uff09\u4e2d\u65b0\u589e<code>--use_vertex_key=true</code>\u3002</p>"},{"location":"3.ngql-guide/10.tag-statements/2.drop-tag/#_1","title":"\u524d\u63d0\u6761\u4ef6","text":"<ul> <li>\u767b\u5f55\u7684\u7528\u6237\u5fc5\u987b\u62e5\u6709\u5bf9\u5e94\u6743\u9650\u624d\u80fd\u6267\u884c<code>DROP TAG</code>\u8bed\u53e5\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1\u5185\u7f6e\u89d2\u8272\u6743\u9650\u3002</li> </ul> <ul> <li>\u786e\u4fdd Tag \u4e0d\u5305\u542b\u4efb\u4f55\u7d22\u5f15\uff0c\u5426\u5219<code>DROP TAG</code>\u65f6\u4f1a\u62a5\u51b2\u7a81\u9519\u8bef<code>[ERROR (-1005)]: Conflict!</code>\u3002\u5220\u9664\u7d22\u5f15\u8bf7\u53c2\u89c1 drop index\u3002</li> </ul>"},{"location":"3.ngql-guide/10.tag-statements/2.drop-tag/#_2","title":"\u8bed\u6cd5","text":"<pre><code>DROP TAG [IF EXISTS] &lt;tag_name&gt;;\n</code></pre> <ul> <li><code>IF EXISTS</code>\uff1a\u68c0\u6d4b\u5f85\u5220\u9664\u7684 Tag \u662f\u5426\u5b58\u5728\uff0c\u53ea\u6709\u5b58\u5728\u65f6\uff0c\u624d\u4f1a\u5220\u9664 Tag\u3002</li> </ul> <ul> <li><code>tag_name</code>\uff1a\u6307\u5b9a\u8981\u5220\u9664\u7684 Tag \u540d\u79f0\u3002\u4e00\u6b21\u53ea\u80fd\u5220\u9664\u4e00\u4e2a Tag\u3002</li> </ul>"},{"location":"3.ngql-guide/10.tag-statements/2.drop-tag/#_3","title":"\u793a\u4f8b","text":"<pre><code>nebula&gt; CREATE TAG IF NOT EXISTS test(p1 string, p2 int);\nnebula&gt; DROP TAG test;\n</code></pre>"},{"location":"3.ngql-guide/10.tag-statements/3.alter-tag/","title":"ALTER TAG","text":"<p><code>ALTER TAG</code>\u8bed\u53e5\u53ef\u4ee5\u4fee\u6539 Tag \u7684\u7ed3\u6784\u3002\u4f8b\u5982\u589e\u5220\u5c5e\u6027\u3001\u4fee\u6539\u6570\u636e\u7c7b\u578b\uff0c\u4e5f\u53ef\u4ee5\u4e3a\u5c5e\u6027\u8bbe\u7f6e\u3001\u4fee\u6539 TTL\uff08Time-To-Live\uff09\u3002</p>"},{"location":"3.ngql-guide/10.tag-statements/3.alter-tag/#_1","title":"\u6ce8\u610f\u4e8b\u9879","text":"<ul> <li>\u767b\u5f55\u7684\u7528\u6237\u5fc5\u987b\u62e5\u6709\u5bf9\u5e94\u6743\u9650\u624d\u80fd\u6267\u884c<code>ALTER TAG</code>\u8bed\u53e5\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1\u5185\u7f6e\u89d2\u8272\u6743\u9650\u3002</li> </ul> <ul> <li>\u786e\u4fdd\u8981\u4fee\u6539\u7684\u5c5e\u6027\u4e0d\u5305\u542b\u7d22\u5f15\uff0c\u5426\u5219<code>ALTER TAG</code>\u65f6\u4f1a\u62a5\u51b2\u7a81\u9519\u8bef<code>[ERROR (-1005)]: Conflict!</code>\u3002\u5220\u9664\u7d22\u5f15\u8bf7\u53c2\u89c1 drop index\u3002</li> </ul> <ul> <li>\u786e\u4fdd\u65b0\u589e\u7684\u5c5e\u6027\u540d\u4e0d\u4e0e\u5df2\u5b58\u5728\u6216\u88ab\u5220\u9664\u7684\u5c5e\u6027\u540d\u540c\u540d\uff0c\u5426\u5219\u65b0\u589e\u5c5e\u6027\u4f1a\u5931\u8d25\u3002</li> </ul>"},{"location":"3.ngql-guide/10.tag-statements/3.alter-tag/#_2","title":"\u8bed\u6cd5","text":"<pre><code>ALTER TAG &lt;tag_name&gt;\n    &lt;alter_definition&gt; [[, alter_definition] ...]\n    [ttl_definition [, ttl_definition] ... ]\n    [COMMENT = '&lt;comment&gt;'];\n\nalter_definition:\n| ADD    (prop_name data_type [NULL | NOT NULL] [DEFAULT &lt;default_value&gt;] [COMMENT '&lt;comment&gt;'])\n| DROP   (prop_name)\n| CHANGE (prop_name data_type [NULL | NOT NULL] [DEFAULT &lt;default_value&gt;] [COMMENT '&lt;comment&gt;'])\n\nttl_definition:\n    TTL_DURATION = ttl_duration, TTL_COL = prop_name\n</code></pre> <ul> <li><code>tag_name</code>\uff1a\u6307\u5b9a\u8981\u4fee\u6539\u7684 Tag \u540d\u79f0\u3002\u4e00\u6b21\u53ea\u80fd\u4fee\u6539\u4e00\u4e2a Tag\u3002\u8bf7\u786e\u4fdd\u8981\u4fee\u6539\u7684 Tag \u5728\u5f53\u524d\u5de5\u4f5c\u7a7a\u95f4\u4e2d\u5b58\u5728\uff0c\u5426\u5219\u4f1a\u62a5\u9519\u3002</li> </ul> <ul> <li>\u53ef\u4ee5\u5728\u4e00\u4e2a<code>ALTER TAG</code>\u8bed\u53e5\u4e2d\u4f7f\u7528\u591a\u4e2a<code>ADD</code>\u3001<code>DROP</code>\u548c<code>CHANGE</code>\u5b50\u53e5\uff0c\u5b50\u53e5\u4e4b\u95f4\u7528\u82f1\u6587\u9017\u53f7\uff08,\uff09\u5206\u9694\u3002</li> </ul> <ul> <li>\u5f53\u4f7f\u7528<code>ADD</code>\u6216<code>CHANGE</code>\u6307\u5b9a\u5c5e\u6027\u503c\u4e3a<code>NOT NULL</code>\u65f6\uff0c\u5fc5\u9700\u4e3a\u8be5\u5c5e\u6027\u6307\u5b9a\u9ed8\u8ba4\u503c\uff0c\u5373\u5b9a\u4e49<code>DEFAULT</code>\u7684\u503c\u3002</li> </ul> <ul> <li> <p>\u5f53\u4f7f\u7528<code>CHANGE</code>\u4fee\u6539\u5c5e\u6027\u7684\u6570\u636e\u7c7b\u578b\u65f6\uff1a</p> <ul> <li>\u4ec5\u5141\u8bb8\u4fee\u6539<code>FIXED_STRING</code>\u548c<code>INT</code>\u7c7b\u578b\u7684\u957f\u5ea6\u4e3a\u66f4\u5927\u7684\u957f\u5ea6\uff0c\u4e0d\u5141\u8bb8\u51cf\u5c11\u957f\u5ea6\u3002</li> <li>\u4ec5\u5141\u8bb8\u4fee\u6539<code>FIXED_STRING</code>\u7c7b\u578b\u4e3a<code>STRING</code>\u7c7b\u578b\u3001\u4fee\u6539<code>FLOAT</code>\u7c7b\u578b\u4e3a<code>DOUBLE</code>\u7c7b\u578b\u3002</li> </ul> </li> </ul>"},{"location":"3.ngql-guide/10.tag-statements/3.alter-tag/#_3","title":"\u793a\u4f8b","text":"<pre><code>nebula&gt; CREATE TAG IF NOT EXISTS t1 (p1 string, p2 int);\nnebula&gt; ALTER TAG t1 ADD (p3 int32, p4 fixed_string(10));\nnebula&gt; ALTER TAG t1 TTL_DURATION = 2, TTL_COL = \"p2\";\nnebula&gt; ALTER TAG t1 COMMENT = 'test1';\nnebula&gt; ALTER TAG t1 ADD (p5 double NOT NULL DEFAULT 0.4 COMMENT 'p5') COMMENT='test2';\n// \u5c06 TAG t1 \u7684 p3 \u5c5e\u6027\u7c7b\u578b\u4ece INT32 \u6539\u4e3a INT64\uff0cp4 \u5c5e\u6027\u7c7b\u578b\u4ece FIXED_STRING(10) \u6539\u4e3a STRING\u3002\nnebula&gt; ALTER TAG t1 CHANGE (p3 int64, p4 string);\n</code></pre>"},{"location":"3.ngql-guide/10.tag-statements/3.alter-tag/#tag","title":"\u4fee\u6539 Tag \u8bf4\u660e","text":"<p>\u5c1d\u8bd5\u4f7f\u7528\u521a\u4fee\u6539\u7684 Tag \u53ef\u80fd\u4f1a\u5931\u8d25\uff0c\u56e0\u4e3a\u4fee\u6539\u662f\u5f02\u6b65\u5b9e\u73b0\u7684\u3002\u4e3a\u786e\u4fdd\u6570\u636e\u540c\u6b65\uff0c\u540e\u7eed\u64cd\u4f5c\u80fd\u987a\u5229\u8fdb\u884c\uff0c\u8bf7\u7b49\u5f85 2 \u4e2a\u5fc3\u8df3\u5468\u671f\uff0820 \u79d2\uff09\u3002</p> <p>\u5982\u679c\u9700\u8981\u4fee\u6539\u5fc3\u8df3\u95f4\u9694\uff0c\u8bf7\u4e3a\u6240\u6709\u914d\u7f6e\u6587\u4ef6\u4fee\u6539\u53c2\u6570<code>heartbeat_interval_secs</code>\u3002</p>"},{"location":"3.ngql-guide/10.tag-statements/4.show-tags/","title":"SHOW TAGS","text":"<p><code>SHOW TAGS</code>\u8bed\u53e5\u663e\u793a\u5f53\u524d\u56fe\u7a7a\u95f4\u5185\u7684\u6240\u6709 Tag \u540d\u79f0\u3002</p> <p>\u6267\u884c<code>SHOW TAGS</code>\u8bed\u53e5\u4e0d\u9700\u8981\u4efb\u4f55\u6743\u9650\uff0c\u4f46\u662f\u8fd4\u56de\u7ed3\u679c\u7531\u767b\u5f55\u7684\u7528\u6237\u6743\u9650\u51b3\u5b9a\u3002</p>"},{"location":"3.ngql-guide/10.tag-statements/4.show-tags/#_1","title":"\u8bed\u6cd5","text":"<pre><code>SHOW TAGS;\n</code></pre>"},{"location":"3.ngql-guide/10.tag-statements/4.show-tags/#_2","title":"\u793a\u4f8b","text":"<pre><code>nebula&gt; SHOW TAGS;\n+----------+\n| Name     |\n+----------+\n| \"player\" |\n| \"team\"   |\n+----------+\n</code></pre>"},{"location":"3.ngql-guide/10.tag-statements/5.describe-tag/","title":"DESCRIBE TAG","text":"<p><code>DESCRIBE TAG</code>\u663e\u793a\u6307\u5b9a Tag \u7684\u8be6\u7ec6\u4fe1\u606f\uff0c\u4f8b\u5982\u5b57\u6bb5\u540d\u79f0\u3001\u6570\u636e\u7c7b\u578b\u7b49\u3002</p>"},{"location":"3.ngql-guide/10.tag-statements/5.describe-tag/#_1","title":"\u524d\u63d0\u6761\u4ef6","text":"<p>\u767b\u5f55\u7684\u7528\u6237\u5fc5\u987b\u62e5\u6709\u5bf9\u5e94\u6743\u9650\u624d\u80fd\u6267\u884c<code>DESCRIBE TAG</code>\u8bed\u53e5\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1\u5185\u7f6e\u89d2\u8272\u6743\u9650\u3002</p>"},{"location":"3.ngql-guide/10.tag-statements/5.describe-tag/#_2","title":"\u8bed\u6cd5","text":"<pre><code>DESC[RIBE] TAG &lt;tag_name&gt;;\n</code></pre> <p><code>DESCRIBE</code>\u53ef\u4ee5\u7f29\u5199\u4e3a<code>DESC</code>\u3002</p>"},{"location":"3.ngql-guide/10.tag-statements/5.describe-tag/#_3","title":"\u793a\u4f8b","text":"<pre><code>nebula&gt; DESCRIBE TAG player;\n+--------+----------+-------+---------+---------+\n| Field  | Type     | Null  | Default | Comment |\n+--------+----------+-------+---------+---------+\n| \"name\" | \"string\" | \"YES\" |         |         |\n| \"age\"  | \"int64\"  | \"YES\" |         |         |\n+--------+----------+-------+---------+---------+\n</code></pre>"},{"location":"3.ngql-guide/10.tag-statements/6.delete-tag/","title":"DELETE TAG","text":"<p><code>DELETE TAG</code>\u8bed\u53e5\u53ef\u4ee5\u5220\u9664\u6307\u5b9a\u70b9\u4e0a\u7684\u6307\u5b9a Tag\u3002</p>"},{"location":"3.ngql-guide/10.tag-statements/6.delete-tag/#_1","title":"\u524d\u63d0\u6761\u4ef6","text":"<p>\u767b\u5f55\u7684\u7528\u6237\u5fc5\u987b\u62e5\u6709\u5bf9\u5e94\u6743\u9650\u624d\u80fd\u6267\u884c<code>DELETE TAG</code>\u8bed\u53e5\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1\u5185\u7f6e\u89d2\u8272\u6743\u9650\u3002</p>"},{"location":"3.ngql-guide/10.tag-statements/6.delete-tag/#_2","title":"\u8bed\u6cd5","text":"<pre><code>DELETE TAG &lt;tag_name_list&gt; FROM &lt;VID_list&gt;;\n</code></pre> <ul> <li><code>tag_name_list</code>\uff1a\u6307\u5b9a Tag \u540d\u79f0\u3002\u591a\u4e2a Tag \u7528\u82f1\u6587\u9017\u53f7\uff08,\uff09\u5206\u9694\uff0c\u4e5f\u53ef\u4ee5\u7528<code>*</code>\u8868\u793a\u6240\u6709 Tag\u3002</li> </ul> <ul> <li><code>VID_list</code>\uff1a\u6307\u5b9a\u8981\u5220\u9664 Tag \u7684\u70b9 ID\u3002\u53ef\u4ee5\u6307\u5b9a\u591a\u4e2a VID\uff0c\u7528\u82f1\u6587\u9017\u53f7\uff08,\uff09\u5206\u9694\u3002</li> </ul>"},{"location":"3.ngql-guide/10.tag-statements/6.delete-tag/#_3","title":"\u793a\u4f8b","text":"<pre><code>nebula&gt; CREATE TAG IF NOT EXISTS test1(p1 string, p2 int);\nnebula&gt; CREATE TAG IF NOT EXISTS test2(p3 string, p4 int);\nnebula&gt; INSERT VERTEX test1(p1, p2),test2(p3, p4) VALUES \"test\":(\"123\", 1, \"456\", 2);\nnebula&gt; FETCH PROP ON * \"test\" YIELD vertex AS v;\n+------------------------------------------------------------+\n| v                                                          |\n+------------------------------------------------------------+\n| (\"test\" :test1{p1: \"123\", p2: 1} :test2{p3: \"456\", p4: 2}) |\n+------------------------------------------------------------+\n\nnebula&gt; DELETE TAG test1 FROM \"test\";\nnebula&gt; FETCH PROP ON * \"test\" YIELD vertex AS v;\n+-----------------------------------+\n| v                                 |\n+-----------------------------------+\n| (\"test\" :test2{p3: \"456\", p4: 2}) |\n+-----------------------------------+\n\nnebula&gt; DELETE TAG * FROM \"test\";\nnebula&gt; FETCH PROP ON * \"test\" YIELD vertex AS v;\n+---+\n| v |\n+---+\n+---+\n</code></pre> <p>Compatibility</p> <ul> <li>\u5728 openCypher \u4e2d\uff0c\u53ef\u4ee5\u4f7f\u7528 <code>REMOVE v:LABEL</code> \u8bed\u53e5\u6765\u79fb\u9664\u8be5\u70b9 <code>v</code> \u7684 <code>LABEL</code>\u3002</li> <li>\u76f8\u540c\u8bed\u610f\uff0c\u4f46\u4e0d\u540c\u8bed\u6cd5\u3002\u5728 nGQL \u4e2d\u4f7f\u7528 <code>DELETE TAG</code>\u3002</li> </ul>"},{"location":"3.ngql-guide/10.tag-statements/improve-query-by-tag-index/","title":"\u589e\u52a0\u548c\u5220\u9664\u6807\u7b7e","text":"<p>\u5728 openCypher \u4e2d\uff0c\u6709\u589e\u52a0\u6807\u7b7e\uff08<code>SET label</code>\uff09\u548c\u79fb\u9664\u6807\u7b7e\uff08<code>REMOVE label</code>\uff09\u7684\u529f\u80fd\uff0c\u53ef\u4ee5\u7528\u4e8e\u52a0\u901f\u67e5\u8be2\u6216\u8005\u6807\u8bb0\u8fc7\u7a0b\u3002</p> <p>\u5728 NebulaGraph \u4e2d\uff0c\u53ef\u4ee5\u901a\u8fc7 Tag \u53d8\u76f8\u5b9e\u73b0\u76f8\u540c\u64cd\u4f5c\uff0c\u521b\u5efa Tag \u5e76\u5c06 Tag \u63d2\u5165\u5230\u5df2\u6709\u7684\u70b9\u4e0a\uff0c\u5c31\u53ef\u4ee5\u6839\u636e Tag \u540d\u79f0\u5feb\u901f\u67e5\u627e\u70b9\uff0c\u4e5f\u53ef\u4ee5\u901a\u8fc7<code>DELETE TAG</code>\u5220\u9664\u67d0\u4e9b\u70b9\u4e0a\u4e0d\u518d\u9700\u8981\u7684 Tag\u3002</p>"},{"location":"3.ngql-guide/10.tag-statements/improve-query-by-tag-index/#_2","title":"\u793a\u4f8b","text":"<p>\u4f8b\u5982\u5728 basketballplayer \u6570\u636e\u96c6\u4e2d\uff0c\u90e8\u5206\u7bee\u7403\u8fd0\u52a8\u5458\u540c\u65f6\u4e5f\u662f\u7403\u961f\u80a1\u4e1c\uff0c\u53ef\u4ee5\u4e3a\u80a1\u4e1c Tag<code>shareholder</code>\u521b\u5efa\u7d22\u5f15\uff0c\u65b9\u4fbf\u5feb\u901f\u67e5\u627e\u3002\u5982\u679c\u4e0d\u518d\u662f\u80a1\u4e1c\uff0c\u53ef\u4ee5\u901a\u8fc7<code>DELETE TAG</code>\u8bed\u53e5\u5220\u9664\u76f8\u5e94\u8fd0\u52a8\u5458\u7684\u80a1\u4e1c Tag\u3002</p> <pre><code>//\u521b\u5efa\u80a1\u4e1c Tag \u548c\u7d22\u5f15\nnebula&gt; CREATE TAG IF NOT EXISTS shareholder();\nnebula&gt; CREATE TAG INDEX IF NOT EXISTS shareholder_tag on shareholder();\n\n//\u4e3a\u70b9\u6dfb\u52a0 Tag\nnebula&gt; INSERT VERTEX shareholder() VALUES \"player100\":();\nnebula&gt; INSERT VERTEX shareholder() VALUES \"player101\":();\n\n//\u5feb\u901f\u67e5\u8be2\u6240\u6709\u80a1\u4e1c\nnebula&gt; MATCH (v:shareholder) RETURN v;\n+---------------------------------------------------------------------+\n| v                                                                   |\n+---------------------------------------------------------------------+\n| (\"player100\" :player{age: 42, name: \"Tim Duncan\"} :shareholder{})  |\n| (\"player101\" :player{age: 36, name: \"Tony Parker\"} :shareholder{}) |\n+---------------------------------------------------------------------+\nnebula&gt; LOOKUP ON shareholder YIELD id(vertex);\n+-------------+\n| id(VERTEX)  |\n+-------------+\n| \"player100\" |\n| \"player101\" |\n+-------------+\n\n//\u5982\u679c player100 \u4e0d\u518d\u662f\u80a1\u4e1c\nnebula&gt; DELETE TAG shareholder FROM \"player100\";\nnebula&gt; LOOKUP ON shareholder YIELD id(vertex);\n+-------------+\n| id(VERTEX)  |\n+-------------+\n| \"player101\" |\n+-------------+\n</code></pre> <p>Note</p> <p>\u5982\u679c\u63d2\u5165\u6d4b\u8bd5\u6570\u636e\u540e\u624d\u521b\u5efa\u7d22\u5f15\uff0c\u8bf7\u7528<code>REBUILD TAG INDEX &lt;index_name_list&gt;;</code>\u8bed\u53e5\u91cd\u5efa\u7d22\u5f15\u3002</p>"},{"location":"3.ngql-guide/11.edge-type-statements/1.create-edge/","title":"CREATE EDGE","text":"<p><code>CREATE EDGE</code>\u8bed\u53e5\u53ef\u4ee5\u901a\u8fc7\u6307\u5b9a\u540d\u79f0\u521b\u5efa\u4e00\u4e2a Edge type\u3002</p>"},{"location":"3.ngql-guide/11.edge-type-statements/1.create-edge/#opencypher","title":"OpenCypher \u517c\u5bb9\u6027","text":"<p>nGQL \u4e2d\u7684 Edge type \u548c openCypher \u4e2d\u7684\u5173\u7cfb\u7c7b\u578b\u76f8\u4f3c\uff0c\u4f46\u53c8\u6709\u6240\u4e0d\u540c\uff0c\u4f8b\u5982\u5b83\u4eec\u7684\u521b\u5efa\u65b9\u5f0f\u3002</p> <ul> <li>openCypher \u4e2d\u7684\u5173\u7cfb\u7c7b\u578b\u9700\u8981\u5728<code>CREATE</code>\u8bed\u53e5\u4e2d\u4e0e\u70b9\u4e00\u8d77\u521b\u5efa\u3002</li> <li>nGQL \u4e2d\u7684 Edge type \u9700\u8981\u4f7f\u7528<code>CREATE EDGE</code>\u8bed\u53e5\u72ec\u7acb\u521b\u5efa\u3002Edge type \u66f4\u50cf\u662f MySQL \u4e2d\u7684\u8868\u3002</li> </ul>"},{"location":"3.ngql-guide/11.edge-type-statements/1.create-edge/#_1","title":"\u524d\u63d0\u6761\u4ef6","text":"<p>\u6267\u884c<code>CREATE EDGE</code>\u8bed\u53e5\u9700\u8981\u5f53\u524d\u767b\u5f55\u7684\u7528\u6237\u62e5\u6709\u6307\u5b9a\u56fe\u7a7a\u95f4\u7684\u521b\u5efa Edge type \u6743\u9650\uff0c\u5426\u5219\u4f1a\u62a5\u9519\u3002</p>"},{"location":"3.ngql-guide/11.edge-type-statements/1.create-edge/#_2","title":"\u8bed\u6cd5","text":"<p>\u521b\u5efa Edge type \u524d\uff0c\u9700\u8981\u5148\u7528<code>USE</code>\u8bed\u53e5\u6307\u5b9a\u5de5\u4f5c\u7a7a\u95f4\u3002</p> <pre><code>CREATE EDGE [IF NOT EXISTS] &lt;edge_type_name&gt;\n    (\n      &lt;prop_name&gt; &lt;data_type&gt; [NULL | NOT NULL] [DEFAULT &lt;default_value&gt;] [COMMENT '&lt;comment&gt;']\n      [{, &lt;prop_name&gt; &lt;data_type&gt; [NULL | NOT NULL] [DEFAULT &lt;default_value&gt;] [COMMENT '&lt;comment&gt;']} ...] \n    )\n    [TTL_DURATION = &lt;ttl_duration&gt;]\n    [TTL_COL = &lt;prop_name&gt;]\n    [COMMENT = '&lt;comment&gt;'];\n</code></pre> \u53c2\u6570 \u8bf4\u660e <code>IF NOT EXISTS</code> \u68c0\u6d4b\u5f85\u521b\u5efa\u7684 Edge type \u662f\u5426\u5b58\u5728\uff0c\u53ea\u6709\u4e0d\u5b58\u5728\u65f6\uff0c\u624d\u4f1a\u521b\u5efa Edge type\u3002\u4ec5\u68c0\u6d4b Edge type \u7684\u540d\u79f0\uff0c\u4e0d\u4f1a\u68c0\u6d4b\u5177\u4f53\u5c5e\u6027\u3002 <code>&lt;edge_type_name&gt;</code> 1\u3001\u6bcf\u4e2a\u56fe\u7a7a\u95f4\u5185\u7684 Edge type \u5fc5\u987b\u662f\u552f\u4e00\u7684\u3002 2\u3001Edge type \u540d\u79f0\u8bbe\u7f6e\u540e\u65e0\u6cd5\u4fee\u6539\u30023\u3001\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u4ec5\u652f\u6301 1~4 \u5b57\u8282\u7684 UTF-8 \u7f16\u7801\u5b57\u7b26\uff0c\u5305\u62ec\u82f1\u6587\u5b57\u6bcd\uff08\u533a\u5206\u5927\u5c0f\u5199\uff09\u3001\u6570\u5b57\u3001\u4e2d\u6587\u7b49\u3002\u4e0d\u80fd\u5305\u542b\u4e0b\u5212\u7ebf\uff08_\uff09\u4ee5\u5916\u7684\u7279\u6b8a\u5b57\u7b26\uff0c\u4e14\u4e0d\u80fd\u4ee5\u6570\u5b57\u5f00\u5934\u30024\u3001\u5982\u679c\u9700\u8981\u4f7f\u7528\u7279\u6b8a\u5b57\u7b26\u3001\u4fdd\u7559\u5173\u952e\u5b57\u6216\u8005\u4ee5\u6570\u5b57\u5f00\u5934\uff0c\u8bf7\u4f7f\u7528\u53cd\u5f15\u53f7\uff08`\uff09\u5305\u56f4\u6574\u4e2a\u540d\u79f0\u3002\u53cd\u5f15\u53f7\u4e2d\u4e0d\u80fd\u5305\u542b\u82f1\u6587\u53e5\u53f7\uff08<code>.</code>\uff09\u3002\u8be6\u60c5\u53c2\u89c1\u5173\u952e\u5b57\u548c\u4fdd\u7559\u5b57\u3002\u6ce8\u610f\uff1a1\u3001\u5982\u679c\u4ee5\u4e2d\u6587\u547d\u540d Edge type\uff0c\u62a5<code>SyntaxError</code>\u9519\u8bef\u65f6\uff0c\u9700\u4f7f\u7528\u53cd\u5f15\u53f7\uff08`\uff09\u5305\u56f4\u4e2d\u6587\u5b57\u7b26\u30022\u3001\u540d\u79f0\u4e2d\u5982\u9700\u5305\u542b\u53cd\u5f15\u53f7\uff08`\uff09\uff0c\u4f7f\u7528\u53cd\u659c\u6760\uff08\\\uff09\u6765\u8f6c\u4e49\u53cd\u5f15\u53f7\uff08`\uff09\uff0c\u5982\uff1a\\`\uff1b\u5982\u9700\u5305\u542b\u53cd\u659c\u6760\uff08\\\uff09\uff0c\u53cd\u659c\u6760\uff08\\\uff09\u672c\u8eab\u4e5f\u9700\u8f6c\u4e49\uff0c\u5982\uff1a\\\\\u3002 <code>&lt;prop_name&gt;</code> \u5c5e\u6027\u540d\u79f0\u3002\u6bcf\u4e2a Edge type \u4e2d\u7684\u5c5e\u6027\u540d\u79f0\u5fc5\u987b\u552f\u4e00\u3002\u5c5e\u6027\u7684\u547d\u540d\u89c4\u5219\u4e0e Edge type \u76f8\u540c\u3002 <code>&lt;data_type&gt;</code> \u5c5e\u6027\u7684\u6570\u636e\u7c7b\u578b\uff0c\u76ee\u524d\u652f\u6301\u6570\u503c\u3001\u5e03\u5c14\u3001\u5b57\u7b26\u4e32\u4ee5\u53ca\u65e5\u671f\u4e0e\u65f6\u95f4\u3002 <code>NULL | NOT NULL</code> \u6307\u5b9a\u5c5e\u6027\u503c\u662f\u5426\u652f\u6301\u4e3a<code>NULL</code>\u3002\u9ed8\u8ba4\u503c\u4e3a<code>NULL</code>\u3002\u5f53\u6307\u5b9a\u5c5e\u6027\u503c\u4e3a<code>NOT NULL</code>\u65f6\uff0c\u5fc5\u9700\u6307\u5b9a\u5c5e\u6027\u7684\u9ed8\u8ba4\u503c\uff0c\u4e5f\u5c31\u662f<code>DEFAULT</code>\u7684\u503c\u3002 <code>DEFAULT</code> \u6307\u5b9a\u5c5e\u6027\u7684\u9ed8\u8ba4\u503c\u3002\u9ed8\u8ba4\u503c\u53ef\u4ee5\u662f\u4e00\u4e2a\u6587\u5b57\u503c\u6216 NebulaGraph \u652f\u6301\u7684\u8868\u8fbe\u5f0f\u3002\u5982\u679c\u63d2\u5165\u8fb9\u65f6\u6ca1\u6709\u6307\u5b9a\u67d0\u4e2a\u5c5e\u6027\u7684\u503c\uff0c\u5219\u4f7f\u7528\u9ed8\u8ba4\u503c\u3002 <code>COMMENT</code> \u5bf9\u5355\u4e2a\u5c5e\u6027\u6216 Edge type \u7684\u63cf\u8ff0\u3002\u6700\u5927\u4e3a 256 \u5b57\u8282\u3002\u9ed8\u8ba4\u65e0\u63cf\u8ff0\u3002 <code>TTL_DURATION</code> \u6307\u5b9a\u65f6\u95f4\u6233\u5dee\u503c\uff0c\u5355\u4f4d\uff1a\u79d2\u3002\u65f6\u95f4\u6233\u5dee\u503c\u5fc5\u987b\u4e3a 64 \u4f4d\u975e\u8d1f\u6574\u6570\u3002\u5c5e\u6027\u503c\u548c\u65f6\u95f4\u6233\u5dee\u503c\u4e4b\u548c\u5982\u679c\u5c0f\u4e8e\u5f53\u524d\u65f6\u95f4\u6233\uff0c\u5c5e\u6027\u5c31\u4f1a\u8fc7\u671f\u3002\u9ed8\u8ba4\u503c\u4e3a<code>0</code>\uff0c\u8868\u793a\u5c5e\u6027\u6c38\u4e0d\u8fc7\u671f\u3002 <code>TTL_COL</code> \u6307\u5b9a\u8981\u8bbe\u7f6e\u5b58\u6d3b\u65f6\u95f4\u7684\u5c5e\u6027\u3002\u5c5e\u6027\u7684\u6570\u636e\u7c7b\u578b\u5fc5\u987b\u662f<code>int</code>\u6216\u8005<code>timestamp</code>\u3002\u4e00\u4e2a Edge type \u53ea\u80fd\u6307\u5b9a\u4e00\u4e2a\u5b57\u6bb5\u4e3a<code>TTL_COL</code>\u3002\u66f4\u591a TTL \u7684\u4fe1\u606f\u8bf7\u53c2\u89c1 TTL\u3002"},{"location":"3.ngql-guide/11.edge-type-statements/1.create-edge/#_3","title":"\u793a\u4f8b","text":"<pre><code>nebula&gt; CREATE EDGE IF NOT EXISTS follow(degree int);\n\n# \u521b\u5efa\u6ca1\u6709\u5c5e\u6027\u7684 Edge type\u3002\nnebula&gt; CREATE EDGE IF NOT EXISTS no_property();\n\n# \u521b\u5efa\u5305\u542b\u9ed8\u8ba4\u503c\u7684 Edge type\u3002\nnebula&gt; CREATE EDGE IF NOT EXISTS follow_with_default(degree int DEFAULT 20);\n\n# \u5bf9\u5b57\u6bb5 p2 \u8bbe\u7f6e TTL \u4e3a 100 \u79d2\u3002\nnebula&gt; CREATE EDGE IF NOT EXISTS e1(p1 string, p2 int, p3 timestamp) \\\n        TTL_DURATION = 100, TTL_COL = \"p2\";\n</code></pre>"},{"location":"3.ngql-guide/11.edge-type-statements/2.drop-edge/","title":"DROP EDGE","text":"<p><code>DROP EDGE</code>\u8bed\u53e5\u53ef\u4ee5\u5220\u9664\u5f53\u524d\u5de5\u4f5c\u7a7a\u95f4\u5185\u7684\u6307\u5b9a Edge type\u3002</p> <p>\u4e00\u4e2a\u8fb9\u53ea\u80fd\u6709\u4e00\u4e2a Edge type\uff0c\u5220\u9664\u8fd9\u4e2a Edge type \u540e\uff0c\u7528\u6237\u5c31\u65e0\u6cd5\u8bbf\u95ee\u8fd9\u4e2a\u8fb9\uff0c\u4e0b\u6b21 Compaction \u64cd\u4f5c\u65f6\u4f1a\u5220\u9664\u8be5\u8fb9\u3002</p> <p>\u5220\u9664 Edge type \u64cd\u4f5c\u4ec5\u5220\u9664 Schema \u6570\u636e\uff0c\u786c\u76d8\u4e0a\u7684\u6587\u4ef6\u6216\u76ee\u5f55\u4e0d\u4f1a\u7acb\u523b\u5220\u9664\uff0c\u800c\u662f\u5728\u4e0b\u4e00\u6b21 Compaction \u64cd\u4f5c\u65f6\u5220\u9664\u3002</p>"},{"location":"3.ngql-guide/11.edge-type-statements/2.drop-edge/#_1","title":"\u524d\u63d0\u6761\u4ef6","text":"<ul> <li>\u767b\u5f55\u7684\u7528\u6237\u5fc5\u987b\u62e5\u6709\u5bf9\u5e94\u6743\u9650\u624d\u80fd\u6267\u884c<code>DROP EDGE</code>\u8bed\u53e5\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1\u5185\u7f6e\u89d2\u8272\u6743\u9650\u3002</li> </ul> <ul> <li>\u786e\u4fdd Edge type \u4e0d\u5305\u542b\u4efb\u4f55\u7d22\u5f15\uff0c\u5426\u5219<code>DROP EDGE</code>\u65f6\u4f1a\u62a5\u51b2\u7a81\u9519\u8bef<code>[ERROR (-1005)]: Conflict!</code>\u3002\u5220\u9664\u7d22\u5f15\u8bf7\u53c2\u89c1 drop index\u3002</li> </ul>"},{"location":"3.ngql-guide/11.edge-type-statements/2.drop-edge/#_2","title":"\u8bed\u6cd5","text":"<pre><code>DROP EDGE [IF EXISTS] &lt;edge_type_name&gt;\n</code></pre> <ul> <li><code>IF EXISTS</code>\uff1a\u68c0\u6d4b\u5f85\u5220\u9664\u7684 Edge type \u662f\u5426\u5b58\u5728\uff0c\u53ea\u6709\u5b58\u5728\u65f6\uff0c\u624d\u4f1a\u5220\u9664 Edge type\u3002</li> </ul> <ul> <li><code>edge_type_name</code>\uff1a\u6307\u5b9a\u8981\u5220\u9664\u7684 Edge type \u540d\u79f0\u3002\u4e00\u6b21\u53ea\u80fd\u5220\u9664\u4e00\u4e2a Edge type\u3002</li> </ul>"},{"location":"3.ngql-guide/11.edge-type-statements/2.drop-edge/#_3","title":"\u793a\u4f8b","text":"<pre><code>nebula&gt; CREATE EDGE IF NOT EXISTS e1(p1 string, p2 int);\nnebula&gt; DROP EDGE e1;\n</code></pre>"},{"location":"3.ngql-guide/11.edge-type-statements/3.alter-edge/","title":"ALTER EDGE","text":"<p><code>ALTER EDGE</code>\u8bed\u53e5\u53ef\u4ee5\u4fee\u6539 Edge type \u7684\u7ed3\u6784\u3002\u4f8b\u5982\u589e\u5220\u5c5e\u6027\u3001\u4fee\u6539\u6570\u636e\u7c7b\u578b\uff0c\u4e5f\u53ef\u4ee5\u4e3a\u5c5e\u6027\u8bbe\u7f6e\u3001\u4fee\u6539 TTL\uff08Time-To-Live\uff09\u3002</p>"},{"location":"3.ngql-guide/11.edge-type-statements/3.alter-edge/#_1","title":"\u6ce8\u610f\u4e8b\u9879","text":"<ul> <li>\u767b\u5f55\u7684\u7528\u6237\u5fc5\u987b\u62e5\u6709\u5bf9\u5e94\u6743\u9650\u624d\u80fd\u6267\u884c<code>ALTER EDGE</code>\u8bed\u53e5\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1\u5185\u7f6e\u89d2\u8272\u6743\u9650\u3002</li> </ul> <ul> <li>\u786e\u4fdd\u8981\u4fee\u6539\u7684\u5c5e\u6027\u4e0d\u5305\u542b\u7d22\u5f15\uff0c\u5426\u5219<code>ALTER EDGE</code>\u65f6\u4f1a\u62a5\u51b2\u7a81\u9519\u8bef<code>[ERROR (-1005)]: Conflict!</code>\u3002\u5220\u9664\u7d22\u5f15\u8bf7\u53c2\u89c1 drop index\u3002</li> </ul> <ul> <li>\u786e\u4fdd\u65b0\u589e\u7684\u5c5e\u6027\u540d\u4e0d\u4e0e\u5df2\u5b58\u5728\u6216\u88ab\u5220\u9664\u7684\u5c5e\u6027\u540d\u540c\u540d\uff0c\u5426\u5219\u65b0\u589e\u5c5e\u6027\u4f1a\u5931\u8d25\u3002</li> </ul> <ul> <li>\u5141\u8bb8\u589e\u52a0<code>FIXED_STRING</code>\u548c<code>INT</code>\u7c7b\u578b\u7684\u957f\u5ea6\u3002</li> <li>\u5141\u8bb8<code>FIXED_STRING</code>\u7c7b\u578b\u8f6c\u6362\u4e3a<code>STRING</code>\u7c7b\u578b\u3001<code>FLOAT</code>\u7c7b\u578b\u8f6c\u6362\u4e3a<code>DOUBLE</code>\u7c7b\u578b\u3002</li> </ul>"},{"location":"3.ngql-guide/11.edge-type-statements/3.alter-edge/#_2","title":"\u8bed\u6cd5","text":"<pre><code>ALTER EDGE &lt;edge_type_name&gt;\n    &lt;alter_definition&gt; [, alter_definition] ...]\n    [ttl_definition [, ttl_definition] ... ]\n    [COMMENT = '&lt;comment&gt;'];\n\nalter_definition:\n| ADD    (prop_name data_type)\n| DROP   (prop_name)\n| CHANGE (prop_name data_type)\n\nttl_definition:\n    TTL_DURATION = ttl_duration, TTL_COL = prop_name\n</code></pre> <ul> <li><code>edge_type_name</code>\uff1a\u6307\u5b9a\u8981\u4fee\u6539\u7684 Edge type \u540d\u79f0\u3002\u4e00\u6b21\u53ea\u80fd\u4fee\u6539\u4e00\u4e2a Edge type\u3002\u8bf7\u786e\u4fdd\u8981\u4fee\u6539\u7684 Edge type \u5728\u5f53\u524d\u5de5\u4f5c\u7a7a\u95f4\u4e2d\u5b58\u5728\uff0c\u5426\u5219\u4f1a\u62a5\u9519\u3002</li> </ul> <ul> <li>\u53ef\u4ee5\u5728\u4e00\u4e2a<code>ALTER EDGE</code>\u8bed\u53e5\u4e2d\u4f7f\u7528\u591a\u4e2a<code>ADD</code>\u3001<code>DROP</code>\u548c<code>CHANGE</code>\u5b50\u53e5\uff0c\u5b50\u53e5\u4e4b\u95f4\u7528\u82f1\u6587\u9017\u53f7\uff08,\uff09\u5206\u9694\u3002</li> </ul> <ul> <li>\u5f53\u4f7f\u7528<code>ADD</code>\u6216<code>CHANGE</code>\u6307\u5b9a\u5c5e\u6027\u503c\u4e3a<code>NOT NULL</code>\u65f6\uff0c\u5fc5\u9700\u4e3a\u8be5\u5c5e\u6027\u6307\u5b9a\u9ed8\u8ba4\u503c\uff0c\u5373\u5b9a\u4e49<code>DEFAULT</code>\u7684\u503c\u3002</li> </ul>"},{"location":"3.ngql-guide/11.edge-type-statements/3.alter-edge/#_3","title":"\u793a\u4f8b","text":"<pre><code>nebula&gt; CREATE EDGE IF NOT EXISTS e1(p1 string, p2 int);\nnebula&gt; ALTER EDGE e1 ADD (p3 int, p4 string);\nnebula&gt; ALTER EDGE e1 TTL_DURATION = 2, TTL_COL = \"p2\";\nnebula&gt; ALTER EDGE e1 COMMENT = 'edge1';\n</code></pre>"},{"location":"3.ngql-guide/11.edge-type-statements/3.alter-edge/#edge_type","title":"\u4fee\u6539 Edge type \u8bf4\u660e","text":"<p>\u5c1d\u8bd5\u4f7f\u7528\u521a\u4fee\u6539\u7684 Edge type \u53ef\u80fd\u4f1a\u5931\u8d25\uff0c\u56e0\u4e3a\u4fee\u6539\u662f\u5f02\u6b65\u5b9e\u73b0\u7684\u3002\u4e3a\u786e\u4fdd\u6570\u636e\u540c\u6b65\uff0c\u540e\u7eed\u64cd\u4f5c\u80fd\u987a\u5229\u8fdb\u884c\uff0c\u8bf7\u7b49\u5f85 2 \u4e2a\u5fc3\u8df3\u5468\u671f\uff0820 \u79d2\uff09\u3002</p> <p>\u5982\u679c\u9700\u8981\u4fee\u6539\u5fc3\u8df3\u95f4\u9694\uff0c\u8bf7\u4e3a\u6240\u6709\u914d\u7f6e\u6587\u4ef6\u4fee\u6539\u53c2\u6570<code>heartbeat_interval_secs</code>\u3002</p>"},{"location":"3.ngql-guide/11.edge-type-statements/4.show-edges/","title":"SHOW EDGES","text":"<p><code>SHOW EDGES</code>\u8bed\u53e5\u663e\u793a\u5f53\u524d\u56fe\u7a7a\u95f4\u5185\u7684\u6240\u6709 Edge type \u540d\u79f0\u3002</p> <p>\u6267\u884c<code>SHOW EDGES</code>\u8bed\u53e5\u4e0d\u9700\u8981\u4efb\u4f55\u6743\u9650\uff0c\u4f46\u662f\u8fd4\u56de\u7ed3\u679c\u7531\u767b\u5f55\u7684\u7528\u6237\u6743\u9650 \u51b3\u5b9a\u3002</p>"},{"location":"3.ngql-guide/11.edge-type-statements/4.show-edges/#_1","title":"\u8bed\u6cd5","text":"<pre><code>SHOW EDGES;\n</code></pre>"},{"location":"3.ngql-guide/11.edge-type-statements/4.show-edges/#_2","title":"\u793a\u4f8b","text":"<pre><code>nebula&gt; SHOW EDGES;\n+----------+\n| Name     |\n+----------+\n| \"follow\" |\n| \"serve\"  |\n+----------+\n</code></pre>"},{"location":"3.ngql-guide/11.edge-type-statements/5.describe-edge/","title":"DESCRIBE EDGE","text":"<p><code>DESCRIBE EDGE</code>\u663e\u793a\u6307\u5b9a Edge type \u7684\u8be6\u7ec6\u4fe1\u606f\uff0c\u4f8b\u5982\u5b57\u6bb5\u540d\u79f0\u3001\u6570\u636e\u7c7b\u578b\u7b49\u3002</p>"},{"location":"3.ngql-guide/11.edge-type-statements/5.describe-edge/#_1","title":"\u524d\u63d0\u6761\u4ef6","text":"<p>\u767b\u5f55\u7684\u7528\u6237\u5fc5\u987b\u62e5\u6709\u5bf9\u5e94\u6743\u9650\u624d\u80fd\u6267\u884c<code>DESCRIBE EDGE</code>\u8bed\u53e5\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1\u5185\u7f6e\u89d2\u8272\u6743\u9650\u3002</p>"},{"location":"3.ngql-guide/11.edge-type-statements/5.describe-edge/#_2","title":"\u8bed\u6cd5","text":"<pre><code>DESC[RIBE] EDGE &lt;edge_type_name&gt;\n</code></pre> <p><code>DESCRIBE</code>\u53ef\u4ee5\u7f29\u5199\u4e3a<code>DESC</code>\u3002</p>"},{"location":"3.ngql-guide/11.edge-type-statements/5.describe-edge/#_3","title":"\u793a\u4f8b","text":"<pre><code>nebula&gt; DESCRIBE EDGE follow;\n+----------+---------+-------+---------+---------+\n| Field    | Type    | Null  | Default | Comment |\n+----------+---------+-------+---------+---------+\n| \"degree\" | \"int64\" | \"YES\" |         |         |\n+----------+---------+-------+---------+---------+\n</code></pre>"},{"location":"3.ngql-guide/12.vertex-statements/1.insert-vertex/","title":"INSERT VERTEX","text":"<p><code>INSERT VERTEX</code>\u8bed\u53e5\u53ef\u4ee5\u5728 NebulaGraph \u5b9e\u4f8b\u7684\u6307\u5b9a\u56fe\u7a7a\u95f4\u4e2d\u63d2\u5165\u4e00\u4e2a\u6216\u591a\u4e2a\u70b9\u3002</p>"},{"location":"3.ngql-guide/12.vertex-statements/1.insert-vertex/#_1","title":"\u524d\u63d0\u6761\u4ef6","text":"<p>\u6267\u884c<code>INSERT VERTEX</code>\u8bed\u53e5\u9700\u8981\u5f53\u524d\u767b\u5f55\u7684\u7528\u6237\u62e5\u6709\u6307\u5b9a\u56fe\u7a7a\u95f4\u7684\u63d2\u5165\u70b9\u6743\u9650\uff0c\u5426\u5219\u4f1a\u62a5\u9519\u3002</p>"},{"location":"3.ngql-guide/12.vertex-statements/1.insert-vertex/#_2","title":"\u8bed\u6cd5","text":"<pre><code>INSERT VERTEX [IF NOT EXISTS] [tag_props, [tag_props] ...]\nVALUES VID: ([prop_value_list])\n\ntag_props:\n  tag_name ([prop_name_list])\n\nprop_name_list:\n   [prop_name [, prop_name] ...]\n\nprop_value_list:\n   [prop_value [, prop_value] ...]   \n</code></pre> <ul> <li> <p><code>IF NOT EXISTS</code>\uff1a\u68c0\u6d4b\u5f85\u63d2\u5165\u7684 VID \u662f\u5426\u5b58\u5728\uff0c\u53ea\u6709\u4e0d\u5b58\u5728\u65f6\uff0c\u624d\u4f1a\u63d2\u5165\uff0c\u5982\u679c\u5df2\u7ecf\u5b58\u5728\uff0c\u4e0d\u4f1a\u8fdb\u884c\u4fee\u6539\u3002</p> <p>Note</p> <ul> <li><code>IF NOT EXISTS</code> \u4ec5\u68c0\u6d4b VID + Tag \u7684\u503c\u662f\u5426\u76f8\u540c\uff0c\u4e0d\u4f1a\u68c0\u6d4b\u5c5e\u6027\u503c\u3002</li> <li><code>IF NOT EXISTS</code> \u4f1a\u5148\u8bfb\u53d6\u4e00\u6b21\u6570\u636e\u662f\u5426\u5b58\u5728\uff0c\u56e0\u6b64\u5bf9\u6027\u80fd\u4f1a\u6709\u660e\u663e\u5f71\u54cd\u3002</li> </ul> </li> </ul> <ul> <li> <p><code>tag_name</code>\uff1a\u70b9\u5173\u8054\u7684 Tag\uff08\u70b9\u7c7b\u578b\uff09\u3002Tag \u7684\u521b\u5efa\uff0c\u8be6\u60c5\u8bf7\u53c2\u89c1 CREATE TAG\u3002</p> <p>Caution</p> <p>NebulaGraph master \u4e2d\u9ed8\u8ba4\u4e0d\u652f\u6301\u63d2\u5165\u65e0 Tag \u7684\u70b9\u3002\u5982\u9700\u4f7f\u7528\u65e0 Tag \u7684\u70b9\uff0c\u5728\u96c6\u7fa4\u5185\u6240\u6709 Graph \u670d\u52a1\u7684\u914d\u7f6e\u6587\u4ef6\uff08<code>nebula-graphd.conf</code>\uff09\u4e2d\u65b0\u589e<code>--graph_use_vertex_key=true</code>\uff1b\u5728\u6240\u6709 Storage \u670d\u52a1\u7684\u914d\u7f6e\u6587\u4ef6\uff08<code>nebula-storaged.conf</code>\uff09\u4e2d\u65b0\u589e<code>--use_vertex_key=true</code>\u3002\u63d2\u5165\u65e0 Tag \u70b9\u7684\u547d\u4ee4\u793a\u4f8b\u5982<code>INSERT VERTEX VALUES \"1\":();</code>\u3002</p> </li> </ul> <ul> <li><code>property_name</code>\uff1a\u9700\u8981\u8bbe\u7f6e\u7684\u5c5e\u6027\u540d\u79f0\u3002</li> </ul> <ul> <li><code>vid</code>\uff1a\u70b9 ID\u3002\u5728 NebulaGraph master \u4e2d\u652f\u6301\u5b57\u7b26\u4e32\u548c\u6574\u6570\uff0c\u9700\u8981\u5728\u521b\u5efa\u56fe\u7a7a\u95f4\u65f6\u8bbe\u7f6e\uff0c\u8be6\u60c5\u8bf7\u53c2\u89c1 CREATE SPACE\u3002</li> </ul> <ul> <li><code>property_value</code>\uff1a\u6839\u636e<code>prop_name_list</code>\u586b\u5199\u5c5e\u6027\u503c\u3002\u5982\u679c\u6ca1\u6709\u586b\u5199\u5c5e\u6027\u503c\uff0c\u800c Tag \u4e2d\u5bf9\u5e94\u7684\u5c5e\u6027\u8bbe\u7f6e\u4e3a<code>NOT NULL</code>\uff0c\u4f1a\u8fd4\u56de\u9519\u8bef\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1 CREATE TAG\u3002</li> </ul> <p>Caution</p> <p><code>INSERT VERTEX</code>\u4e0e openCypher \u4e2d<code>CREATE</code>\u7684\u8bed\u610f\u4e0d\u540c\uff1a</p> <ul> <li><code>INSERT VERTEX</code>\u8bed\u610f\u66f4\u63a5\u8fd1\u4e8e NoSQL(key-value) \u65b9\u5f0f\u7684 INSERT \u8bed\u610f\uff0c\u6216\u8005 SQL \u4e2d\u7684<code>UPSERT</code> (<code>UPDATE</code> or <code>INSERT</code>)\u3002</li> <li>\u76f8\u540c<code>VID</code>\u548c<code>TAG</code>\u7684\u60c5\u51b5\u4e0b\uff0c\u5982\u679c\u6ca1\u6709\u4f7f\u7528<code>IF NOT EXISTS</code>\uff0c\u65b0\u5199\u5165\u7684\u6570\u636e\u4f1a\u8986\u76d6\u65e7\u6570\u636e\uff0c\u4e0d\u5b58\u5728\u65f6\u4f1a\u65b0\u5199\u5165\u3002</li> <li>\u76f8\u540c<code>VID</code>\u4f46\u4e0d\u540c<code>TAG</code>\u7684\u60c5\u51b5\u4e0b\uff0c\u4e0d\u540c TAG \u5bf9\u5e94\u7684\u8bb0\u5f55\u4e0d\u4f1a\u76f8\u4e92\u8986\u76d6\uff0c\u4e0d\u5b58\u5728\u4f1a\u65b0\u5199\u5165\u3002</li> </ul> <p>\u53c2\u8003\u4ee5\u4e0b\u793a\u4f8b\u3002</p>"},{"location":"3.ngql-guide/12.vertex-statements/1.insert-vertex/#_3","title":"\u793a\u4f8b","text":"<pre><code># \u63d2\u5165\u4e0d\u5305\u542b\u5c5e\u6027\u7684\u70b9\u3002\nnebula&gt; CREATE TAG IF NOT EXISTS t1();                   \nnebula&gt; INSERT VERTEX t1() VALUES \"10\":(); \n</code></pre> <pre><code>nebula&gt; CREATE TAG IF NOT EXISTS t2 (name string, age int);                \nnebula&gt; INSERT VERTEX t2 (name, age) VALUES \"11\":(\"n1\", 12);\n\n# \u521b\u5efa\u5931\u8d25\uff0c\u56e0\u4e3a\"a13\"\u4e0d\u662f int \u7c7b\u578b\u3002\nnebula&gt; INSERT VERTEX t2 (name, age) VALUES \"12\":(\"n1\", \"a13\"); \n\n# \u4e00\u6b21\u63d2\u5165 2 \u4e2a\u70b9\u3002\nnebula&gt; INSERT VERTEX t2 (name, age) VALUES \"13\":(\"n3\", 12), \"14\":(\"n4\", 8); \n</code></pre> <pre><code>nebula&gt; CREATE TAG IF NOT EXISTS t3(p1 int);\nnebula&gt; CREATE TAG IF NOT EXISTS t4(p2 string);\n\n# \u4e00\u6b21\u63d2\u5165\u4e24\u4e2a Tag \u7684\u5c5e\u6027\u5230\u540c\u4e00\u4e2a\u70b9\u3002\nnebula&gt; INSERT VERTEX  t3 (p1), t4(p2) VALUES \"21\": (321, \"hello\");\n</code></pre> <p>\u4e00\u4e2a\u70b9\u53ef\u4ee5\u591a\u6b21\u63d2\u5165\u5c5e\u6027\u503c\uff0c\u4ee5\u6700\u540e\u4e00\u6b21\u4e3a\u51c6\u3002</p> <pre><code># \u591a\u6b21\u63d2\u5165\u5c5e\u6027\u503c\u3002\nnebula&gt; INSERT VERTEX t2 (name, age) VALUES \"11\":(\"n2\", 13);\nnebula&gt; INSERT VERTEX t2 (name, age) VALUES \"11\":(\"n3\", 14);\nnebula&gt; INSERT VERTEX t2 (name, age) VALUES \"11\":(\"n4\", 15);\nnebula&gt; FETCH PROP ON t2 \"11\" YIELD properties(vertex);\n+-----------------------+\n| properties(VERTEX)    |\n+-----------------------+\n| {age: 15, name: \"n4\"} |\n+-----------------------+\n</code></pre> <pre><code>nebula&gt; CREATE TAG IF NOT EXISTS t5(p1 fixed_string(5) NOT NULL, p2 int, p3 int DEFAULT NULL);\nnebula&gt; INSERT VERTEX t5(p1, p2, p3) VALUES \"001\":(\"Abe\", 2, 3);\n\n# \u63d2\u5165\u5931\u8d25\uff0c\u56e0\u4e3a\u5c5e\u6027 p1 \u4e0d\u80fd\u4e3a NULL\u3002\nnebula&gt; INSERT VERTEX t5(p1, p2, p3) VALUES \"002\":(NULL, 4, 5);\n[ERROR (-1009)]: SemanticError: No schema found for `t5'\n\n# \u5c5e\u6027 p3 \u4e3a\u9ed8\u8ba4\u503c NULL\u3002\nnebula&gt; INSERT VERTEX t5(p1, p2) VALUES \"003\":(\"cd\", 5);\nnebula&gt; FETCH PROP ON t5 \"003\" YIELD properties(vertex);\n+---------------------------------+\n| properties(VERTEX)              |\n+---------------------------------+\n| {p1: \"cd\", p2: 5, p3: __NULL__} |\n+---------------------------------+\n\n# \u5c5e\u6027 p1 \u6700\u5927\u957f\u5ea6\u4e3a 5\uff0c\u56e0\u6b64\u4f1a\u88ab\u622a\u65ad\u3002\nnebula&gt; INSERT VERTEX t5(p1, p2) VALUES \"004\":(\"shalalalala\", 4);\nnebula&gt; FETCH PROP on t5 \"004\" YIELD properties(vertex);\n+------------------------------------+\n| properties(VERTEX)                 |\n+------------------------------------+\n| {p1: \"shala\", p2: 4, p3: __NULL__} |\n+------------------------------------+\n</code></pre> <p>\u4f7f\u7528<code>IF NOT EXISTS</code>\u63d2\u5165\u5df2\u5b58\u5728\u7684\u70b9\u65f6\uff0c\u4e0d\u4f1a\u8fdb\u884c\u4fee\u6539\u3002</p> <pre><code># \u63d2\u5165\u70b9 1\u3002\nnebula&gt; INSERT VERTEX t2 (name, age) VALUES \"1\":(\"n2\", 13);\n\n# \u4f7f\u7528 IF NOT EXISTS \u4fee\u6539\u70b9 1\uff0c\u56e0\u4e3a\u70b9 1 \u5df2\u5b58\u5728\uff0c\u4e0d\u4f1a\u8fdb\u884c\u4fee\u6539\u3002\nnebula&gt; INSERT VERTEX IF NOT EXISTS t2 (name, age) VALUES \"1\":(\"n3\", 14);\nnebula&gt; FETCH PROP ON t2 \"1\" YIELD properties(vertex);\n+-----------------------+\n| properties(VERTEX)    |\n+-----------------------+\n| {age: 13, name: \"n2\"} |\n+-----------------------+\n</code></pre>"},{"location":"3.ngql-guide/12.vertex-statements/2.update-vertex/","title":"UPDATE VERTEX","text":"<p><code>UPDATE VERTEX</code>\u8bed\u53e5\u53ef\u4ee5\u4fee\u6539\u70b9\u4e0a Tag \u7684\u5c5e\u6027\u503c\u3002</p> <p>NebulaGraph \u652f\u6301 CAS\uff08compare and set\uff09\u64cd\u4f5c\u3002</p> <p>Note</p> <p>\u4e00\u6b21\u53ea\u80fd\u4fee\u6539\u4e00\u4e2a Tag\u3002</p>"},{"location":"3.ngql-guide/12.vertex-statements/2.update-vertex/#_1","title":"\u8bed\u6cd5","text":"<pre><code>UPDATE VERTEX ON &lt;tag_name&gt; &lt;vid&gt;\nSET &lt;update_prop&gt;\n[WHEN &lt;condition&gt;]\n[YIELD &lt;output&gt;]\n</code></pre> \u53c2\u6570 \u662f\u5426\u5fc5\u987b \u8bf4\u660e \u793a\u4f8b <code>ON &lt;tag_name&gt;</code> \u662f \u6307\u5b9a\u70b9\u7684 Tag\u3002\u8981\u4fee\u6539\u7684\u5c5e\u6027\u5fc5\u987b\u5728\u8fd9\u4e2a Tag \u5185\u3002 <code>ON player</code> <code>&lt;vid&gt;</code> \u662f \u6307\u5b9a\u8981\u4fee\u6539\u7684\u70b9 ID\u3002 <code>\"player100\"</code> <code>SET &lt;update_prop&gt;</code> \u662f \u6307\u5b9a\u5982\u4f55\u4fee\u6539\u5c5e\u6027\u503c\u3002 <code>SET age = age +1</code> <code>WHEN &lt;condition&gt;</code> \u5426 \u6307\u5b9a\u8fc7\u6ee4\u6761\u4ef6\u3002\u5982\u679c<code>&lt;condition&gt;</code>\u7ed3\u679c\u4e3a<code>false</code>\uff0c<code>SET</code>\u5b50\u53e5\u4e0d\u4f1a\u751f\u6548\u3002 <code>WHEN name == \"Tim\"</code> <code>YIELD &lt;output&gt;</code> \u5426 \u6307\u5b9a\u8bed\u53e5\u7684\u8f93\u51fa\u683c\u5f0f\u3002 <code>YIELD name AS Name</code>"},{"location":"3.ngql-guide/12.vertex-statements/2.update-vertex/#_2","title":"\u793a\u4f8b","text":"<pre><code>// \u67e5\u770b\u70b9\u201dplayer101\u201c\u7684\u5c5e\u6027\u3002\nnebula&gt; FETCH PROP ON player \"player101\" YIELD properties(vertex);\n+--------------------------------+\n| properties(VERTEX)             |\n+--------------------------------+\n| {age: 36, name: \"Tony Parker\"} |\n+--------------------------------+\n\n// \u4fee\u6539\u5c5e\u6027 age \u7684\u503c\uff0c\u5e76\u8fd4\u56de name \u548c\u65b0\u7684 age\u3002\nnebula&gt; UPDATE VERTEX ON player \"player101\" \\\n        SET age = age + 2 \\\n        WHEN name == \"Tony Parker\" \\\n        YIELD name AS Name, age AS Age;\n+---------------+-----+\n| Name          | Age |\n+---------------+-----+\n| \"Tony Parker\" | 38  |\n+---------------+-----+\n</code></pre>"},{"location":"3.ngql-guide/12.vertex-statements/3.upsert-vertex/","title":"UPSERT VERTEX","text":"<p><code>UPSERT VERTEX</code>\u8bed\u53e5\u7ed3\u5408<code>UPDATE</code>\u548c<code>INSERT</code>\uff0c\u5982\u679c\u70b9\u5b58\u5728\uff0c\u4f1a\u4fee\u6539\u70b9\u7684\u5c5e\u6027\u503c\uff1b\u5982\u679c\u70b9\u4e0d\u5b58\u5728\uff0c\u4f1a\u63d2\u5165\u65b0\u7684\u70b9\u3002</p> <p>Note</p> <p><code>UPSERT VERTEX</code>\u4e00\u6b21\u53ea\u80fd\u4fee\u6539\u4e00\u4e2a Tag\u3002</p> <p><code>UPSERT VERTEX</code>\u6027\u80fd\u8fdc\u4f4e\u4e8e<code>INSERT</code>\uff0c\u56e0\u4e3a<code>UPSERT</code>\u662f\u4e00\u7ec4\u5206\u7247\u7ea7\u522b\u7684\u8bfb\u53d6\u3001\u4fee\u6539\u3001\u5199\u5165\u64cd\u4f5c\u3002</p> <p>Caution</p> <p>\u5e76\u53d1<code>UPSERT</code>\u540c\u4e00\u4e2a TAG \u6216 EDGE TYPE \u4f1a\u62a5\u9519\u3002</p>"},{"location":"3.ngql-guide/12.vertex-statements/3.upsert-vertex/#_1","title":"\u8bed\u6cd5","text":"<pre><code>UPSERT VERTEX ON &lt;tag&gt; &lt;vid&gt;\nSET &lt;update_prop&gt;\n[WHEN &lt;condition&gt;]\n[YIELD &lt;output&gt;]\n</code></pre> \u53c2\u6570 \u662f\u5426\u5fc5\u987b \u8bf4\u660e \u793a\u4f8b <code>ON &lt;tag&gt;</code> \u662f \u6307\u5b9a\u70b9\u7684 Tag\u3002\u8981\u4fee\u6539\u7684\u5c5e\u6027\u5fc5\u987b\u5728\u8fd9\u4e2a Tag \u5185\u3002 <code>ON player</code> <code>&lt;vid&gt;</code> \u662f \u6307\u5b9a\u8981\u4fee\u6539\u6216\u63d2\u5165\u7684\u70b9 ID\u3002 <code>\"player100\"</code> <code>SET &lt;update_prop&gt;</code> \u662f \u6307\u5b9a\u5982\u4f55\u4fee\u6539\u5c5e\u6027\u503c\u3002 <code>SET age = age +1</code> <code>WHEN &lt;condition&gt;</code> \u5426 \u6307\u5b9a\u8fc7\u6ee4\u6761\u4ef6\u3002 <code>WHEN name == \"Tim\"</code> <code>YIELD &lt;output&gt;</code> \u5426 \u6307\u5b9a\u8bed\u53e5\u7684\u8f93\u51fa\u683c\u5f0f\u3002 <code>YIELD name AS Name</code>"},{"location":"3.ngql-guide/12.vertex-statements/3.upsert-vertex/#_2","title":"\u63d2\u5165\u4e0d\u5b58\u5728\u7684\u70b9","text":"<p>\u5982\u679c\u70b9\u4e0d\u5b58\u5728\uff0c\u65e0\u8bba<code>WHEN</code>\u5b50\u53e5\u7684\u6761\u4ef6\u662f\u5426\u6ee1\u8db3\uff0c\u90fd\u4f1a\u63d2\u5165\u70b9\uff0c\u540c\u65f6\u6267\u884c<code>SET</code>\u5b50\u53e5\uff0c\u56e0\u6b64\u65b0\u63d2\u5165\u7684\u70b9\u7684\u5c5e\u6027\u503c\u53d6\u51b3\u4e8e\uff1a</p> <ul> <li><code>SET</code>\u5b50\u53e5\u3002</li> </ul> <ul> <li>\u5c5e\u6027\u662f\u5426\u6709\u9ed8\u8ba4\u503c\u3002</li> </ul> <p>\u4f8b\u5982\uff1a</p> <ul> <li>\u8981\u63d2\u5165\u7684\u70b9\u5305\u542b\u57fa\u4e8e Tag<code>player</code>\u7684\u5c5e\u6027<code>name</code>\u548c<code>age</code>\u3002</li> </ul> <ul> <li><code>SET</code>\u5b50\u53e5\u6307\u5b9a<code>age=30</code>\u3002</li> </ul> <p>\u4e0d\u540c\u60c5\u51b5\u4e0b\u7684\u5c5e\u6027\u503c\u5982\u4e0b\u8868\u3002</p> \u662f\u5426\u6ee1\u8db3<code>WHEN</code>\u5b50\u53e5\u6761\u4ef6 \u5c5e\u6027\u662f\u5426\u6709\u9ed8\u8ba4\u503c <code>name</code>\u5c5e\u6027\u503c <code>age</code>\u5c5e\u6027\u503c \u662f \u662f \u9ed8\u8ba4\u503c <code>30</code> \u662f \u5426 <code>NULL</code> <code>30</code> \u5426 \u662f \u9ed8\u8ba4\u503c <code>30</code> \u5426 \u5426 <code>NULL</code> <code>30</code> <p>\u793a\u4f8b\u5982\u4e0b\uff1a</p> <pre><code>// \u67e5\u770b\u4e09\u4e2a\u70b9\u662f\u5426\u5b58\u5728\uff0c\u7ed3\u679c \u201cEmpty set\u201d \u8868\u793a\u9876\u70b9\u4e0d\u5b58\u5728\u3002\nnebula&gt; FETCH PROP ON * \"player666\", \"player667\", \"player668\" YIELD properties(vertex);\n+--------------------+\n| properties(VERTEX) |\n+--------------------+\n+--------------------+\nEmpty set\n\nnebula&gt; UPSERT VERTEX ON player \"player666\" \\\n        SET age = 30 \\\n        WHEN name == \"Joe\" \\\n        YIELD name AS Name, age AS Age;\n+----------+----------+\n| Name     | Age      |\n+----------+----------+\n| __NULL__ | 30       |\n+----------+----------+\n\nnebula&gt; UPSERT VERTEX ON player \"player666\" \\\n        SET age = 31 \\\n        WHEN name == \"Joe\" \\\n        YIELD name AS Name, age AS Age;\n+----------+-----+\n| Name     | Age |\n+----------+-----+\n| __NULL__ | 30  |\n+----------+-----+\n\nnebula&gt; UPSERT VERTEX ON player \"player667\" \\\n        SET age = 31 \\\n        YIELD name AS Name, age AS Age;\n+----------+-----+\n| Name     | Age |\n+----------+-----+\n| __NULL__ | 31  |\n+----------+-----+\n\nnebula&gt; UPSERT VERTEX ON player \"player668\" \\\n        SET name = \"Amber\", age = age + 1 \\\n        YIELD name AS Name, age AS Age;\n+---------+----------+\n| Name    | Age      |\n+---------+----------+\n| \"Amber\" | __NULL__ |\n+---------+----------+\n</code></pre> <p>\u4e0a\u9762\u6700\u540e\u4e00\u4e2a\u793a\u4f8b\u4e2d\uff0c\u56e0\u4e3a<code>age</code>\u6ca1\u6709\u9ed8\u8ba4\u503c\uff0c\u63d2\u5165\u70b9\u65f6\uff0c<code>age</code>\u9ed8\u8ba4\u503c\u4e3a<code>NULL</code>\uff0c\u6267\u884c<code>age = age + 1</code>\u540e\u4ecd\u4e3a<code>NULL</code>\u3002\u5982\u679c<code>age</code>\u6709\u9ed8\u8ba4\u503c\uff0c\u5219<code>age = age + 1</code>\u53ef\u4ee5\u6b63\u5e38\u6267\u884c\uff0c\u4f8b\u5982\uff1a</p> <pre><code>nebula&gt; CREATE TAG IF NOT EXISTS player_with_default(name string, age int DEFAULT 20);\nExecution succeeded\n\nnebula&gt; UPSERT VERTEX ON player_with_default \"player101\" \\\n        SET age = age + 1 \\\n        YIELD name AS Name, age AS Age;\n\n+----------+-----+\n| Name     | Age |\n+----------+-----+\n| __NULL__ | 21  |\n+----------+-----+\n</code></pre>"},{"location":"3.ngql-guide/12.vertex-statements/3.upsert-vertex/#_3","title":"\u4fee\u6539\u5b58\u5728\u7684\u70b9","text":"<p>\u5982\u679c\u70b9\u5b58\u5728\uff0c\u4e14\u6ee1\u8db3<code>WHEN</code>\u5b50\u53e5\u7684\u6761\u4ef6\uff0c\u5c31\u4f1a\u4fee\u6539\u70b9\u7684\u5c5e\u6027\u503c\u3002</p> <pre><code>nebula&gt; FETCH PROP ON player \"player101\" YIELD properties(vertex);\n+--------------------------------+\n| properties(VERTEX)             |\n+--------------------------------+\n| {age: 36, name: \"Tony Parker\"} |\n+--------------------------------+\n\nnebula&gt; UPSERT VERTEX ON player \"player101\" \\\n        SET age = age + 2 \\\n        WHEN name == \"Tony Parker\" \\\n        YIELD name AS Name, age AS Age;\n+---------------+-----+\n| Name          | Age |\n+---------------+-----+\n| \"Tony Parker\" | 38  |\n+---------------+-----+\n</code></pre> <p>\u5982\u679c\u70b9\u5b58\u5728\uff0c\u4f46\u662f\u4e0d\u6ee1\u8db3<code>WHEN</code>\u5b50\u53e5\u7684\u6761\u4ef6\uff0c\u4fee\u6539\u4e0d\u4f1a\u751f\u6548\u3002</p> <pre><code>nebula&gt; FETCH PROP ON player \"player101\" YIELD properties(vertex);\n+--------------------------------+\n| properties(VERTEX)             |\n+--------------------------------+\n| {age: 38, name: \"Tony Parker\"} |\n+--------------------------------+\n\nnebula&gt; UPSERT VERTEX ON player \"player101\" \\\n        SET age = age + 2 \\\n        WHEN name == \"Someone else\" \\\n        YIELD name AS Name, age AS Age;\n+---------------+-----+\n| Name          | Age |\n+---------------+-----+\n| \"Tony Parker\" | 38  |\n+---------------+-----+\n</code></pre>"},{"location":"3.ngql-guide/12.vertex-statements/4.delete-vertex/","title":"DELETE VERTEX","text":"<p><code>DELETE VERTEX</code>\u8bed\u53e5\u53ef\u4ee5\u5220\u9664\u70b9\uff0c\u4f46\u662f\u9ed8\u8ba4\u4e0d\u5220\u9664\u8be5\u70b9\u5173\u8054\u7684\u51fa\u8fb9\u548c\u5165\u8fb9\u3002</p> <p>Compatibility</p> <p>NebulaGraph 2.x \u9ed8\u8ba4\u5220\u9664\u70b9\u53ca\u5173\u8054\u8be5\u70b9\u7684\u51fa\u8fb9\u548c\u5165\u8fb9\uff0cNebulaGraph  master \u9ed8\u8ba4\u53ea\u5220\u9664\u70b9\uff0c\u4e0d\u5220\u9664\u8be5\u70b9\u5173\u8054\u7684\u51fa\u8fb9\u548c\u5165\u8fb9\uff0c\u6b64\u65f6\u5c06\u9ed8\u8ba4\u5b58\u5728\u60ac\u6302\u8fb9\u3002</p> <p><code>DELETE VERTEX</code>\u8bed\u53e5\u4e00\u6b21\u53ef\u4ee5\u5220\u9664\u4e00\u4e2a\u6216\u591a\u4e2a\u70b9\u3002\u7528\u6237\u53ef\u4ee5\u7ed3\u5408\u7ba1\u9053\u7b26\u4e00\u8d77\u4f7f\u7528\uff0c\u8be6\u60c5\u8bf7\u53c2\u89c1\u7ba1\u9053\u7b26\u3002</p> <p>Note</p> <ul> <li><code>DELETE VERTEX</code>\u662f\u76f4\u63a5\u5220\u9664\u70b9\uff0c\u4e0d\u5220\u9664\u5173\u8054\u7684\u8fb9\u3002</li> </ul> <ul> <li><code>DELETE TAG</code>\u662f\u5220\u9664\u6307\u5b9a\u70b9\u4e0a\u7684\u6307\u5b9a Tag\u3002</li> </ul>"},{"location":"3.ngql-guide/12.vertex-statements/4.delete-vertex/#_1","title":"\u8bed\u6cd5","text":"<pre><code>DELETE VERTEX &lt;vid&gt; [ , &lt;vid&gt; ... ] [WITH EDGE];\n</code></pre> <ul> <li><code>WITH EDGE</code>: \u5220\u9664\u8be5\u70b9\u5173\u8054\u7684\u51fa\u8fb9\u548c\u5165\u8fb9\u3002</li> </ul>"},{"location":"3.ngql-guide/12.vertex-statements/4.delete-vertex/#_2","title":"\u793a\u4f8b","text":"<pre><code># \u5220\u9664 VID \u4e3a `team1` \u7684\u70b9\uff0c\u4e0d\u5220\u9664\u8be5\u70b9\u5173\u8054\u7684\u51fa\u8fb9\u548c\u5165\u8fb9\u3002\nnebula&gt; DELETE VERTEX \"team1\";\n\n# \u5220\u9664 VID \u4e3a `team1` \u7684\u70b9\uff0c\u5e76\u5220\u9664\u8be5\u70b9\u5173\u8054\u7684\u51fa\u8fb9\u548c\u5165\u8fb9\u3002\nnebula&gt; DELETE VERTEX \"team1\" WITH EDGE;\n</code></pre> <pre><code># \u7ed3\u5408\u7ba1\u9053\u7b26\uff0c\u5220\u9664\u7b26\u5408\u6761\u4ef6\u7684\u70b9\u3002\nnebula&gt; GO FROM \"player100\" OVER serve WHERE properties(edge).start_year == \"2021\" YIELD dst(edge) AS id | DELETE VERTEX $-.id;\n</code></pre>"},{"location":"3.ngql-guide/12.vertex-statements/4.delete-vertex/#_3","title":"\u5220\u9664\u8fc7\u7a0b","text":"<p>NebulaGraph \u627e\u5230\u76ee\u6807\u70b9\u5e76\u5220\u9664\uff0c\u8be5\u76ee\u6807\u70b9\u7684\u6240\u6709\u90bb\u8fb9\uff08\u51fa\u8fb9\u548c\u5165\u8fb9\uff09\u5c06\u6210\u4e3a\u60ac\u6302\u8fb9\u3002</p> <p>Caution</p> <ul> <li>\u4e0d\u652f\u6301\u539f\u5b50\u6027\u5220\u9664\uff0c\u5982\u679c\u53d1\u751f\u9519\u8bef\u8bf7\u91cd\u8bd5\uff0c\u907f\u514d\u51fa\u73b0\u90e8\u5206\u5220\u9664\u7684\u60c5\u51b5\u3002\u5426\u5219\u4f1a\u5bfc\u81f4\u60ac\u6302\u8fb9\u3002</li> <li>\u5220\u9664\u8d85\u7ea7\u8282\u70b9\u8017\u65f6\u8f83\u591a\uff0c\u4e3a\u907f\u514d\u5220\u9664\u5b8c\u6210\u524d\u8fde\u63a5\u8d85\u65f6\uff0c\u53ef\u4ee5\u8c03\u6574<code>nebula-graphd.conf</code>\u4e2d\u7684\u53c2\u6570<code>--storage_client_timeout_ms</code>\u5ef6\u957f\u8d85\u65f6\u65f6\u95f4\u3002</li> </ul>"},{"location":"3.ngql-guide/12.vertex-statements/4.delete-vertex/#_4","title":"\u60ac\u6302\u8fb9\u89c6\u9891","text":"<ul> <li>NebulaGraph \u7684\u60ac\u6302\u8fb9\u5c0f\u79d1\u666e\uff082 \u5206 28 \u79d2\uff09</li> </ul>"},{"location":"3.ngql-guide/13.edge-statements/1.insert-edge/","title":"INSERT EDGE","text":"<p><code>INSERT EDGE</code>\u8bed\u53e5\u53ef\u4ee5\u5728 NebulaGraph \u5b9e\u4f8b\u7684\u6307\u5b9a\u56fe\u7a7a\u95f4\u4e2d\u63d2\u5165\u4e00\u6761\u6216\u591a\u6761\u8fb9\u3002\u8fb9\u662f\u6709\u65b9\u5411\u7684\uff0c\u4ece\u8d77\u59cb\u70b9\uff08src_vid\uff09\u5230\u76ee\u7684\u70b9\uff08dst_vid\uff09\u3002</p> <p><code>INSERT EDGE</code>\u7684\u6267\u884c\u65b9\u5f0f\u4e3a\u8986\u76d6\u5f0f\u63d2\u5165\u3002\u5982\u679c\u5df2\u6709 Edge type\u3001\u8d77\u70b9\u3001\u7ec8\u70b9\u3001rank \u90fd\u76f8\u540c\u7684\u8fb9\uff0c\u5219\u8986\u76d6\u539f\u8fb9\u3002</p>"},{"location":"3.ngql-guide/13.edge-statements/1.insert-edge/#_1","title":"\u8bed\u6cd5","text":"<pre><code>INSERT EDGE [IF NOT EXISTS] &lt;edge_type&gt; ( &lt;prop_name_list&gt; ) VALUES \n&lt;src_vid&gt; -&gt; &lt;dst_vid&gt;[@&lt;rank&gt;] : ( &lt;prop_value_list&gt; )\n[, &lt;src_vid&gt; -&gt; &lt;dst_vid&gt;[@&lt;rank&gt;] : ( &lt;prop_value_list&gt; ), ...];\n\n&lt;prop_name_list&gt; ::=\n  [ &lt;prop_name&gt; [, &lt;prop_name&gt; ] ...]\n\n&lt;prop_value_list&gt; ::=\n  [ &lt;prop_value&gt; [, &lt;prop_value&gt; ] ...]\n</code></pre> <ul> <li> <p><code>IF NOT EXISTS</code>\uff1a\u7528\u6237\u53ef\u4ee5\u4f7f\u7528<code>IF NOT EXISTS</code>\u5173\u952e\u5b57\u68c0\u6d4b\u5f85\u63d2\u5165\u7684\u8fb9\u662f\u5426\u5b58\u5728\uff0c\u53ea\u6709\u4e0d\u5b58\u5728\u65f6\uff0c\u624d\u4f1a\u63d2\u5165\u3002</p> <p>Note</p> <ul> <li><code>IF NOT EXISTS</code> \u4ec5\u68c0\u6d4b&lt;\u8fb9\u7684\u7c7b\u578b\u3001\u8d77\u59cb\u70b9\u3001\u76ee\u7684\u70b9\u548c rank&gt;\u662f\u5426\u5b58\u5728\uff0c\u4e0d\u4f1a\u68c0\u6d4b\u5c5e\u6027\u503c\u662f\u5426\u91cd\u5408\u3002</li> </ul> <ul> <li><code>IF NOT EXISTS</code> \u4f1a\u5148\u8bfb\u53d6\u4e00\u6b21\u6570\u636e\u662f\u5426\u5b58\u5728\uff0c\u56e0\u6b64\u5bf9\u6027\u80fd\u4f1a\u6709\u660e\u663e\u5f71\u54cd\u3002</li> </ul> </li> </ul> <ul> <li><code>&lt;edge_type&gt;</code>\uff1a\u8fb9\u5173\u8054\u7684 Edge type\uff0c\u53ea\u80fd\u6307\u5b9a\u4e00\u4e2a Edge type\u3002Edge type \u5fc5\u987b\u63d0\u524d\u521b\u5efa\uff0c\u8be6\u60c5\u8bf7\u53c2\u89c1 CREATE EDGE\u3002</li> </ul> <ul> <li><code>&lt;prop_name_list&gt;</code>\uff1a\u9700\u8981\u8bbe\u7f6e\u7684\u5c5e\u6027\u540d\u79f0\u5217\u8868\u3002</li> </ul> <ul> <li><code>src_vid</code>\uff1a\u8d77\u59cb\u70b9 ID\uff0c\u8868\u793a\u8fb9\u7684\u8d77\u70b9\u3002</li> </ul> <ul> <li><code>dst_vid</code>\uff1a\u76ee\u7684\u70b9 ID\uff0c\u8868\u793a\u8fb9\u7684\u7ec8\u70b9\u3002</li> </ul> <ul> <li> <p><code>rank</code>\uff1a\u53ef\u9009\u9879\u3002\u8fb9\u7684 rank \u503c\u3002\u6570\u636e\u7c7b\u578b\u4e3a<code>int</code>\u3002\u9ed8\u8ba4\u503c\u4e3a<code>0</code>\u3002</p> <p>openCypher \u517c\u5bb9\u6027</p> <p>openCypher \u4e2d\u6ca1\u6709 rank \u7684\u6982\u5ff5\u3002</p> </li> </ul> <ul> <li><code>&lt;prop_value_list&gt;</code>\uff1a\u6839\u636e<code>prop_name_list</code>\u586b\u5199\u5c5e\u6027\u503c\u3002\u5982\u679c\u5c5e\u6027\u503c\u548c Edge type \u4e2d\u7684\u6570\u636e\u7c7b\u578b\u4e0d\u5339\u914d\uff0c\u4f1a\u8fd4\u56de\u9519\u8bef\u3002\u5982\u679c\u6ca1\u6709\u586b\u5199\u5c5e\u6027\u503c\uff0c\u800c Edge type \u4e2d\u5bf9\u5e94\u7684\u5c5e\u6027\u8bbe\u7f6e\u4e3a<code>NOT NULL</code>\uff0c\u4e5f\u4f1a\u8fd4\u56de\u9519\u8bef\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1 CREATE EDGE\u3002</li> </ul>"},{"location":"3.ngql-guide/13.edge-statements/1.insert-edge/#_2","title":"\u793a\u4f8b","text":"<pre><code># \u63d2\u5165\u4e0d\u5305\u542b\u5c5e\u6027\u7684\u8fb9\u3002\nnebula&gt; CREATE EDGE IF NOT EXISTS e1();                 \nnebula&gt; INSERT EDGE e1 () VALUES \"10\"-&gt;\"11\":();  \n\n# \u63d2\u5165 rank \u4e3a 1 \u7684\u8fb9\u3002\nnebula&gt; INSERT EDGE e1 () VALUES \"10\"-&gt;\"11\"@1:(); \n</code></pre> <pre><code>nebula&gt; CREATE EDGE IF NOT EXISTS e2 (name string, age int); \nnebula&gt; INSERT EDGE e2 (name, age) VALUES \"11\"-&gt;\"13\":(\"n1\", 1);\n\n# \u4e00\u6b21\u63d2\u5165 2 \u6761\u8fb9\u3002\nnebula&gt; INSERT EDGE e2 (name, age) VALUES \\\n        \"12\"-&gt;\"13\":(\"n1\", 1), \"13\"-&gt;\"14\":(\"n2\", 2); \n\n# \u521b\u5efa\u5931\u8d25\uff0c\u56e0\u4e3a\"a13\"\u4e0d\u662f int \u7c7b\u578b\u3002\nnebula&gt; INSERT EDGE e2 (name, age) VALUES \"11\"-&gt;\"13\":(\"n1\", \"a13\");\n</code></pre> <p>\u4e00\u6761\u8fb9\u53ef\u4ee5\u591a\u6b21\u63d2\u5165\u5c5e\u6027\u503c\uff0c\u4ee5\u6700\u540e\u4e00\u6b21\u4e3a\u51c6\u3002</p> <pre><code># \u591a\u6b21\u63d2\u5165\u5c5e\u6027\u503c\u3002\nnebula&gt; INSERT EDGE e2 (name, age) VALUES \"11\"-&gt;\"13\":(\"n1\", 12);\nnebula&gt; INSERT EDGE e2 (name, age) VALUES \"11\"-&gt;\"13\":(\"n1\", 13);\nnebula&gt; INSERT EDGE e2 (name, age) VALUES \"11\"-&gt;\"13\":(\"n1\", 14);\nnebula&gt; FETCH PROP ON e2 \"11\"-&gt;\"13\" YIELD edge AS e;\n+-------------------------------------------+\n| e                                         |\n+-------------------------------------------+\n| [:e2 \"11\"-&gt;\"13\" @0 {age: 14, name: \"n1\"}] |\n+-------------------------------------------+\n</code></pre> <p>\u4f7f\u7528<code>IF NOT EXISTS</code>\u63d2\u5165\u5df2\u5b58\u5728\u7684\u8fb9\u65f6\uff0c\u4e0d\u4f1a\u8fdb\u884c\u4fee\u6539\u3002</p> <pre><code># \u63d2\u5165\u8fb9\u3002\nnebula&gt; INSERT EDGE e2 (name, age) VALUES \"14\"-&gt;\"15\"@1:(\"n1\", 12);\n# \u4f7f\u7528 IF NOT EXISTS \u4fee\u6539\u8fb9\uff0c\u56e0\u4e3a\u8fb9\u5df2\u5b58\u5728\uff0c\u4e0d\u4f1a\u8fdb\u884c\u4fee\u6539\u3002\nnebula&gt; INSERT EDGE IF NOT EXISTS e2 (name, age) VALUES \"14\"-&gt;\"15\"@1:(\"n2\", 13);\nnebula&gt; FETCH PROP ON e2 \"14\"-&gt;\"15\"@1 YIELD edge AS e;\n+-------------------------------------------+\n| e                                         |\n+-------------------------------------------+\n| [:e2 \"14\"-&gt;\"15\" @1 {age: 12, name: \"n1\"}] |\n+-------------------------------------------+\n</code></pre> <p>Note</p> <ul> <li>NebulaGraph master \u5141\u8bb8\u5b58\u5728\u60ac\u6302\u8fb9\uff08Dangling edge\uff09\u3002\u56e0\u6b64\u53ef\u4ee5\u5728\u8d77\u70b9\u6216\u8005\u7ec8\u70b9\u5b58\u5728\u524d\uff0c\u5148\u5199\u8fb9\uff1b\u6b64\u65f6\u5c31\u53ef\u4ee5\u901a\u8fc7 <code>&lt;edgetype&gt;._src</code>\u6216<code>&lt;edgetype&gt;._dst</code>\u83b7\u53d6\u5230\uff08\u5c1a\u672a\u5199\u5165\u7684\uff09\u70b9 VID\uff08\u4e0d\u5efa\u8bae\u8fd9\u6837\u4f7f\u7528\uff09\u3002</li> <li>\u76ee\u524d\u8fd8\u4e0d\u80fd\u4fdd\u8bc1\u64cd\u4f5c\u7684\u539f\u5b50\u6027\uff0c\u5982\u679c\u5931\u8d25\u8bf7\u91cd\u8bd5\uff0c\u5426\u5219\u4f1a\u53d1\u751f\u90e8\u5206\u5199\u5165\u3002\u6b64\u65f6\u8bfb\u53d6\u8be5\u6570\u636e\u7684\u884c\u4e3a\u662f\u672a\u5b9a\u4e49\u7684\u3002\u4f8b\u5982\u5199\u5165\u64cd\u4f5c\u6d89\u53ca\u5230\u591a\u4e2a\u673a\u5668\u65f6\uff0c\u53ef\u80fd\u4f1a\u51fa\u73b0\u63d2\u5165\u5355\u4e2a\u8fb9\u7684\u6b63\u53cd\u5411\u8fb9\u53ea\u5199\u5165\u6210\u529f\u4e00\u4e2a\uff0c\u6216\u8005\u63d2\u5165\u591a\u4e2a\u8fb9\u65f6\u53ea\u5199\u5165\u6210\u529f\u4e00\u90e8\u5206\uff0c\u6b64\u65f6\u4f1a\u8fd4\u56de\u62a5\u9519\uff0c\u8bf7\u91cd\u65b0\u6267\u884c\u547d\u4ee4\u3002</li> <li>\u5e76\u53d1\u5199\u5165\u540c\u4e00\u6761\u8fb9\u4f1a\u62a5<code>edge conflict</code>\u9519\u8bef\uff0c\u53ef\u7a0d\u540e\u91cd\u8bd5\u3002</li> <li><code>\u8fb9\u7684 INSERT \u901f\u5ea6</code>\u5927\u7ea6\u662f\u70b9\u7684 INSERT \u901f\u5ea6\u4e00\u534a\u3002\u539f\u56e0\u662f INSERT \u8fb9\u4f1a\u5bf9\u5e94 storaged \u7684\u4e24\u4e2a INSERT\uff0c<code>INSERT \u70b9</code>\u5bf9\u5e94 storaged \u7684\u4e00\u4e2a INSERT\u3002</li> </ul>"},{"location":"3.ngql-guide/13.edge-statements/2.update-edge/","title":"UPDATE EDGE","text":"<p><code>UPDATE EDGE</code>\u8bed\u53e5\u53ef\u4ee5\u4fee\u6539\u8fb9\u4e0a Edge type \u7684\u5c5e\u6027\u3002</p> <p>NebulaGraph \u652f\u6301 CAS\uff08compare and swap\uff09\u64cd\u4f5c\u3002</p>"},{"location":"3.ngql-guide/13.edge-statements/2.update-edge/#_1","title":"\u8bed\u6cd5","text":"<pre><code>UPDATE EDGE ON &lt;edge_type&gt;\n&lt;src_vid&gt; -&gt; &lt;dst_vid&gt; [@&lt;rank&gt;]\nSET &lt;update_prop&gt;\n[WHEN &lt;condition&gt;]\n[YIELD &lt;output&gt;]\n</code></pre> \u53c2\u6570 \u662f\u5426\u5fc5\u987b \u8bf4\u660e \u793a\u4f8b <code>ON &lt;edge_type&gt;</code> \u662f \u6307\u5b9a Edge type\u3002\u8981\u4fee\u6539\u7684\u5c5e\u6027\u5fc5\u987b\u5728\u8fd9\u4e2a Edge type \u5185\u3002 <code>ON serve</code> <code>&lt;src_vid&gt;</code> \u662f \u6307\u5b9a\u8fb9\u7684\u8d77\u59cb\u70b9 ID\u3002 <code>\"player100\"</code> <code>&lt;dst_vid&gt;</code> \u662f \u6307\u5b9a\u8fb9\u7684\u76ee\u7684\u70b9 ID\u3002 <code>\"team204\"</code> <code>&lt;rank&gt;</code> \u5426 \u6307\u5b9a\u8fb9\u7684 rank \u503c\u3002 <code>10</code> <code>SET &lt;update_prop&gt;</code> \u662f \u6307\u5b9a\u5982\u4f55\u4fee\u6539\u5c5e\u6027\u503c\u3002 <code>SET start_year = start_year +1</code> <code>WHEN &lt;condition&gt;</code> \u5426 \u6307\u5b9a\u8fc7\u6ee4\u6761\u4ef6\u3002\u5982\u679c<code>&lt;condition&gt;</code>\u7ed3\u679c\u4e3a<code>false</code>\uff0c<code>SET</code>\u5b50\u53e5\u4e0d\u4f1a\u751f\u6548\u3002 <code>WHEN end_year &lt; 2010</code> <code>YIELD &lt;output&gt;</code> \u5426 \u6307\u5b9a\u8bed\u53e5\u7684\u8f93\u51fa\u683c\u5f0f\u3002 <code>YIELD start_year AS Start_Year</code>"},{"location":"3.ngql-guide/13.edge-statements/2.update-edge/#_2","title":"\u793a\u4f8b","text":"<pre><code>// \u7528 GO \u8bed\u53e5\u67e5\u770b\u8fb9\u7684\u5c5e\u6027\u503c\u3002\nnebula&gt; GO FROM \"player100\" \\\n        OVER serve \\\n        YIELD properties(edge).start_year, properties(edge).end_year;\n+-----------------------------+---------------------------+\n| properties(EDGE).start_year | properties(EDGE).end_year |\n+-----------------------------+---------------------------+\n| 1997                        | 2016                      |\n+-----------------------------+---------------------------+\n\n// \u4fee\u6539\u5c5e\u6027 start_year \u7684\u503c\uff0c\u5e76\u8fd4\u56de end_year \u548c\u65b0\u7684 start_year\u3002\n\nnebula&gt; UPDATE EDGE ON serve \"player100\" -&gt; \"team204\"@0 \\\n        SET start_year = start_year + 1 \\\n        WHEN end_year &gt; 2010 \\\n        YIELD start_year, end_year;\n+------------+----------+\n| start_year | end_year |\n+------------+----------+\n| 1998       | 2016     |\n+------------+----------+\n</code></pre>"},{"location":"3.ngql-guide/13.edge-statements/3.upsert-edge/","title":"UPSERT EDGE","text":"<p><code>UPSERT EDGE</code>\u8bed\u53e5\u7ed3\u5408<code>UPDATE</code>\u548c<code>INSERT</code>\uff0c\u5982\u679c\u8fb9\u5b58\u5728\uff0c\u4f1a\u66f4\u65b0\u8fb9\u7684\u5c5e\u6027\uff1b\u5982\u679c\u8fb9\u4e0d\u5b58\u5728\uff0c\u4f1a\u63d2\u5165\u65b0\u7684\u8fb9\u3002</p> <p><code>UPSERT EDGE</code>\u6027\u80fd\u8fdc\u4f4e\u4e8e<code>INSERT</code>\uff0c\u56e0\u4e3a<code>UPSERT</code>\u662f\u4e00\u7ec4\u5206\u7247\u7ea7\u522b\u7684\u8bfb\u53d6\u3001\u4fee\u6539\u3001\u5199\u5165\u64cd\u4f5c\u3002</p> <p>Caution</p> <p>\u5e76\u53d1<code>UPSERT</code>\u540c\u4e00\u4e2a TAG \u6216 EDGE TYPE \u4f1a\u62a5\u9519\u3002</p>"},{"location":"3.ngql-guide/13.edge-statements/3.upsert-edge/#_1","title":"\u8bed\u6cd5","text":"<pre><code>UPSERT EDGE ON &lt;edge_type&gt;\n&lt;src_vid&gt; -&gt; &lt;dst_vid&gt; [@rank]\nSET &lt;update_prop&gt;\n[WHEN &lt;condition&gt;]\n[YIELD &lt;properties&gt;]\n</code></pre> \u53c2\u6570 \u662f\u5426\u5fc5\u987b \u8bf4\u660e \u793a\u4f8b <code>ON &lt;edge_type&gt;</code> \u662f \u6307\u5b9a Edge type\u3002\u8981\u4fee\u6539\u7684\u5c5e\u6027\u5fc5\u987b\u5728\u8fd9\u4e2a Edge type \u5185\u3002 <code>ON serve</code> <code>&lt;src_vid&gt;</code> \u662f \u6307\u5b9a\u8fb9\u7684\u8d77\u59cb\u70b9 ID\u3002 <code>\"player100\"</code> <code>&lt;dst_vid&gt;</code> \u662f \u6307\u5b9a\u8fb9\u7684\u76ee\u7684\u70b9 ID\u3002 <code>\"team204\"</code> <code>&lt;rank&gt;</code> \u5426 \u6307\u5b9a\u8fb9\u7684 rank \u503c\u3002\u6570\u636e\u7c7b\u578b\u4e3a<code>int</code>\u3002 <code>10</code> <code>SET &lt;update_prop&gt;</code> \u662f \u6307\u5b9a\u5982\u4f55\u4fee\u6539\u5c5e\u6027\u503c\u3002 <code>SET start_year = start_year +1</code> <code>WHEN &lt;condition&gt;</code> \u5426 \u6307\u5b9a\u8fc7\u6ee4\u6761\u4ef6\u3002 <code>WHEN end_year &lt; 2010</code> <code>YIELD &lt;output&gt;</code> \u5426 \u6307\u5b9a\u8bed\u53e5\u7684\u8f93\u51fa\u683c\u5f0f\u3002 <code>YIELD start_year AS Start_Year</code>"},{"location":"3.ngql-guide/13.edge-statements/3.upsert-edge/#_2","title":"\u63d2\u5165\u4e0d\u5b58\u5728\u7684\u8fb9","text":"<p>\u5982\u679c\u8fb9\u4e0d\u5b58\u5728\uff0c\u65e0\u8bba<code>WHEN</code>\u5b50\u53e5\u7684\u6761\u4ef6\u662f\u5426\u6ee1\u8db3\uff0c\u90fd\u4f1a\u63d2\u5165\u8fb9\uff0c\u540c\u65f6\u6267\u884c<code>SET</code>\u5b50\u53e5\uff0c\u56e0\u6b64\u65b0\u63d2\u5165\u7684\u8fb9\u7684\u5c5e\u6027\u503c\u53d6\u51b3\u4e8e\uff1a</p> <ul> <li><code>SET</code>\u5b50\u53e5\u3002</li> </ul> <ul> <li>\u5c5e\u6027\u662f\u5426\u6709\u9ed8\u8ba4\u503c\u3002</li> </ul> <p>\u4f8b\u5982\uff1a</p> <ul> <li>\u8981\u63d2\u5165\u7684\u8fb9\u5305\u542b\u57fa\u4e8e Edge type<code>serve</code>\u7684\u5c5e\u6027<code>start_year</code>\u548c<code>end_year</code>\u3002</li> </ul> <ul> <li><code>SET</code>\u5b50\u53e5\u6307\u5b9a<code>end_year = 2021</code>\u3002</li> </ul> <p>\u4e0d\u540c\u60c5\u51b5\u4e0b\u7684\u5c5e\u6027\u503c\u5982\u4e0b\u8868\u3002</p> \u662f\u5426\u6ee1\u8db3<code>WHEN</code>\u5b50\u53e5\u6761\u4ef6 \u5c5e\u6027\u662f\u5426\u6709\u9ed8\u8ba4\u503c <code>start_year</code>\u5c5e\u6027\u503c <code>end_year</code>\u5c5e\u6027\u503c \u662f \u662f \u9ed8\u8ba4\u503c <code>2021</code> \u662f \u5426 <code>NULL</code> <code>2021</code> \u5426 \u662f \u9ed8\u8ba4\u503c <code>2021</code> \u5426 \u5426 <code>NULL</code> <code>2021</code> <p>\u793a\u4f8b\u5982\u4e0b\uff1a</p> <pre><code>// \u67e5\u770b\u5982\u4e0b\u4e09\u4e2a\u70b9\u662f\u5426\u6709 serve \u7c7b\u578b\u7684\u51fa\u8fb9\uff0c\u7ed3\u679c \u201cEmpty set\u201d \u8868\u793a\u6ca1\u6709 serve \u7c7b\u578b\u7684\u51fa\u8fb9\u3002\nnebula&gt; GO FROM \"player666\", \"player667\", \"player668\" \\\n        OVER serve \\\n        YIELD properties(edge).start_year, properties(edge).end_year;\n+-----------------------------+---------------------------+\n| properties(EDGE).start_year | properties(EDGE).end_year |\n+-----------------------------+---------------------------+\n+-----------------------------+---------------------------+\nEmpty set\n\nnebula&gt; UPSERT EDGE on serve \\\n        \"player666\" -&gt; \"team200\"@0 \\\n        SET end_year = 2021 \\\n        WHEN end_year == 2010 \\\n        YIELD start_year, end_year;\n+------------+----------+\n| start_year | end_year |\n+------------+----------+\n| __NULL__   | 2021     |\n+------------+----------+\n\nnebula&gt; UPSERT EDGE on serve \\\n        \"player666\" -&gt; \"team200\"@0 \\\n        SET end_year = 2022 \\\n        WHEN end_year == 2010 \\\n        YIELD start_year, end_year;\n+------------+----------+\n| start_year | end_year |\n+------------+----------+\n| __NULL__   | 2021     |\n+------------+----------+\n\nnebula&gt; UPSERT EDGE on serve \\\n        \"player667\" -&gt; \"team200\"@0 \\\n        SET end_year = 2022 \\\n        YIELD start_year, end_year;\n+------------+----------+\n| start_year | end_year |\n+------------+----------+\n| __NULL__   | 2022     |\n+------------+----------+\n\nnebula&gt; UPSERT EDGE on serve \\\n        \"player668\" -&gt; \"team200\"@0 \\\n        SET start_year = 2000, end_year = end_year + 1 \\\n        YIELD start_year, end_year;\n+------------+----------+\n| start_year | end_year |\n+------------+----------+\n| 2000       | __NULL__ |\n+------------+----------+\n</code></pre> <p>\u4e0a\u9762\u6700\u540e\u4e00\u4e2a\u793a\u4f8b\u4e2d\uff0c\u56e0\u4e3a<code>end_year</code>\u6ca1\u6709\u9ed8\u8ba4\u503c\uff0c\u63d2\u5165\u8fb9\u65f6\uff0c<code>end_year</code>\u9ed8\u8ba4\u503c\u4e3a<code>NULL</code>\uff0c\u6267\u884c<code>end_year = end_year + 1</code>\u540e\u4ecd\u4e3a<code>NULL</code>\u3002\u5982\u679c<code>end_year</code>\u6709\u9ed8\u8ba4\u503c\uff0c\u5219<code>end_year = end_year + 1</code>\u53ef\u4ee5\u6b63\u5e38\u6267\u884c\uff0c\u4f8b\u5982\uff1a</p> <pre><code>nebula&gt; CREATE EDGE IF NOT EXISTS serve_with_default(start_year int, end_year int DEFAULT 2010);\nExecution succeeded\n\nnebula&gt; UPSERT EDGE on serve_with_default \\\n        \"player668\" -&gt; \"team200\" \\\n        SET end_year = end_year + 1 \\\n        YIELD start_year, end_year;\n+------------+----------+\n| start_year | end_year |\n+------------+----------+\n| __NULL__   | 2011     |\n+------------+----------+\n</code></pre>"},{"location":"3.ngql-guide/13.edge-statements/3.upsert-edge/#_3","title":"\u4fee\u6539\u5b58\u5728\u7684\u8fb9","text":"<p>\u5982\u679c\u8fb9\u5b58\u5728\uff0c\u4e14\u6ee1\u8db3<code>WHEN</code>\u5b50\u53e5\u7684\u6761\u4ef6\uff0c\u5c31\u4f1a\u4fee\u6539\u8fb9\u7684\u5c5e\u6027\u503c\u3002</p> <pre><code>nebula&gt; MATCH (v:player{name:\"Ben Simmons\"})-[e:serve]-(v2) \\\n        RETURN e;\n+-----------------------------------------------------------------------+\n| e                                                                     |\n+-----------------------------------------------------------------------+\n| [:serve \"player149\"-&gt;\"team219\" @0 {end_year: 2019, start_year: 2016}] |\n+-----------------------------------------------------------------------+\n\nnebula&gt; UPSERT EDGE on serve \\\n        \"player149\" -&gt; \"team219\" \\\n        SET end_year = end_year + 1 \\\n        WHEN start_year == 2016 \\\n        YIELD start_year, end_year;\n+------------+----------+\n| start_year | end_year |\n+------------+----------+\n| 2016       | 2020     |\n+------------+----------+\n</code></pre> <p>\u5982\u679c\u8fb9\u5b58\u5728\uff0c\u4f46\u662f\u4e0d\u6ee1\u8db3<code>WHEN</code>\u5b50\u53e5\u7684\u6761\u4ef6\uff0c\u4fee\u6539\u4e0d\u4f1a\u751f\u6548\u3002</p> <pre><code>nebula&gt; MATCH (v:player{name:\"Ben Simmons\"})-[e:serve]-(v2) \\\n        RETURN e;\n+-----------------------------------------------------------------------+\n| e                                                                     |\n+-----------------------------------------------------------------------+\n| [:serve \"player149\"-&gt;\"team219\" @0 {end_year: 2020, start_year: 2016}] |\n+-----------------------------------------------------------------------+\n\nnebula&gt; UPSERT EDGE on serve \\\n        \"player149\" -&gt; \"team219\" \\\n        SET end_year = end_year + 1 \\\n        WHEN start_year != 2016 \\\n        YIELD start_year, end_year;\n+------------+----------+\n| start_year | end_year |\n+------------+----------+\n| 2016       | 2020     |\n+------------+----------+\n</code></pre>"},{"location":"3.ngql-guide/13.edge-statements/4.delete-edge/","title":"DELETE EDGE","text":"<p><code>DELETE EDGE</code>\u8bed\u53e5\u53ef\u4ee5\u5220\u9664\u8fb9\u3002\u4e00\u6b21\u53ef\u4ee5\u5220\u9664\u4e00\u6761\u6216\u591a\u6761\u8fb9\u3002\u7528\u6237\u53ef\u4ee5\u7ed3\u5408\u7ba1\u9053\u7b26\u4e00\u8d77\u4f7f\u7528\uff0c\u8be6\u60c5\u8bf7\u53c2\u89c1\u7ba1\u9053\u7b26\u3002</p> <p>\u5982\u679c\u9700\u8981\u5220\u9664\u4e00\u4e2a\u70b9\u7684\u6240\u6709\u51fa\u8fb9\uff0c\u8bf7\u5220\u9664\u8fd9\u4e2a\u70b9\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1 DELETE VERTEX\u3002</p>"},{"location":"3.ngql-guide/13.edge-statements/4.delete-edge/#_1","title":"\u8bed\u6cd5","text":"<pre><code>DELETE EDGE &lt;edge_type&gt; &lt;src_vid&gt; -&gt; &lt;dst_vid&gt;[@&lt;rank&gt;] [, &lt;src_vid&gt; -&gt; &lt;dst_vid&gt;[@&lt;rank&gt;] ...]\n</code></pre> <p>Caution</p> <p>\u5982\u679c\u4e0d\u6307\u5b9a rank\uff0c\u5219\u4ec5\u4ec5\u5220\u9664 rank \u4e3a 0 \u7684\u8fb9\u3002\u9700\u8981\u5220\u9664\u6240\u6709\u7684 rank\uff0c\u89c1\u5982\u4e0b\u793a\u4f8b\u3002</p>"},{"location":"3.ngql-guide/13.edge-statements/4.delete-edge/#_2","title":"\u793a\u4f8b","text":"<pre><code>nebula&gt; DELETE EDGE serve \"player100\" -&gt; \"team204\"@0;\n</code></pre> <pre><code># \u7ed3\u5408\u7ba1\u9053\u7b26\uff0c\u5220\u9664\u4e24\u70b9\u4e4b\u95f4\u540c\u7c7b\u578b\u7684\u6240\u6709rank\u7684\u8fb9\u3002\nnebula&gt; GO FROM \"player100\" OVER follow \\\n        WHERE dst(edge) == \"player101\" \\\n        YIELD src(edge) AS src, dst(edge) AS dst, rank(edge) AS rank \\\n        | DELETE EDGE follow $-.src -&gt; $-.dst @ $-.rank;\n</code></pre>"},{"location":"3.ngql-guide/14.native-index-statements/","title":"\u7d22\u5f15\u4ecb\u7ecd","text":"<p>\u4e3a\u4e86\u63d0\u9ad8\u67e5\u8be2\u6027\u80fd\uff0cNebulaGraph \u652f\u6301\u4e3a\u70b9\u7684 Tag \u6216 Tag \u7684\u67d0\u4e2a\u5c5e\u6027\uff0c\u8fb9\u7684 Edge type \u6216 Edge type \u7684\u67d0\u4e2a\u5c5e\u6027\u521b\u5efa\u7d22\u5f15\u3002\u7d22\u5f15\u53ef\u4ee5\u57fa\u4e8e\u6307\u5b9a\u7684 Tag\u3001Edge type\u3001\u5c5e\u6027\u67e5\u8be2\u6570\u636e\uff0c\u4f46\u662f\u7d22\u5f15\u672c\u8eab\u4e0d\u5b58\u50a8\u6570\u636e\uff0c\u800c\u662f\u5b58\u50a8\u6570\u636e\u7684\u4f4d\u7f6e\u3002</p> <p>NebulaGraph \u652f\u6301\u4e24\u79cd\u7c7b\u578b\u7d22\u5f15\uff1a\u539f\u751f\u7d22\u5f15\u548c\u5168\u6587\u7d22\u5f15\u3002</p>"},{"location":"3.ngql-guide/14.native-index-statements/#_2","title":"\u4f7f\u7528\u8bf4\u660e","text":"<ul> <li>\u7d22\u5f15\u53ef\u4ee5\u63d0\u9ad8\u67e5\u8be2\u6027\u80fd\uff0c\u4f46\u662f\u4f1a\u964d\u4f4e\u5199\u5165\u6027\u80fd\u3002</li> <li>\u7d22\u5f15\u662f\u6267\u884c<code>LOOKUP</code>\u8bed\u53e5\u65f6\u7528\u4e8e\u5b9a\u4f4d\u5230\u6570\u636e\u7684\u524d\u7f6e\u6761\u4ef6\uff0c\u5982\u679c\u6ca1\u6709\u7d22\u5f15\uff0c\u6267\u884c<code>LOOKUP</code>\u8bed\u53e5\u4f1a\u62a5\u9519\u3002</li> <li>\u4f7f\u7528\u7d22\u5f15\u65f6\uff0cNebulaGraph \u4f1a\u81ea\u52a8\u9009\u62e9\u6700\u4f18\u7684\u7d22\u5f15\u3002</li> <li>\u5177\u6709\u9ad8\u9009\u62e9\u5ea6\u7684\u7d22\u5f15\uff0c\u5373\u7d22\u5f15\u5217\u4e2d\u4e0d\u540c\u503c\u7684\u8bb0\u5f55\u6570\u4e0e\u603b\u8bb0\u5f55\u6570\u7684\u6bd4\u503c\u8f83\u9ad8\uff08\u4f8b\u5982\u8eab\u4efd\u8bc1\u53f7\u7684\u6bd4\u503c\u4e3a 1\uff09\u53ef\u663e\u8457\u63d0\u5347\u67e5\u8be2\u6027\u80fd\uff1b\u800c\u5bf9\u4e8e\u4f4e\u9009\u62e9\u5ea6\u7684\u7d22\u5f15\uff08\u4f8b\u5982\u56fd\u5bb6\uff09\uff0c\u67e5\u8be2\u6027\u80fd\u53ef\u80fd\u4e0d\u4f1a\u5e26\u6765\u663e\u8457\u63d0\u5347\u3002</li> </ul>"},{"location":"3.ngql-guide/14.native-index-statements/#_3","title":"\u539f\u751f\u7d22\u5f15","text":"<p>\u539f\u751f\u7d22\u5f15\u53ef\u4ee5\u57fa\u4e8e\u6307\u5b9a\u7684\u5c5e\u6027\u67e5\u8be2\u6570\u636e\uff0c\u6709\u5982\u4e0b\u7279\u70b9\uff1a</p> <ul> <li>\u5305\u62ec Tag \u7d22\u5f15\u548c Edge type \u7d22\u5f15\u3002</li> </ul> <ul> <li>\u5fc5\u987b\u624b\u52a8\u91cd\u5efa\u7d22\u5f15\uff08<code>REBUILD INDEX</code>\uff09\u3002</li> </ul> <ul> <li>\u652f\u6301\u521b\u5efa\u540c\u4e00\u4e2a Tag \u6216 Edge type \u7684\u591a\u4e2a\u5c5e\u6027\u7684\u7d22\u5f15\uff08\u590d\u5408\u7d22\u5f15\uff09\uff0c\u4f46\u662f\u4e0d\u80fd\u8de8 Tag \u6216 Edge type\u3002</li> </ul>"},{"location":"3.ngql-guide/14.native-index-statements/#_4","title":"\u539f\u751f\u7d22\u5f15\u64cd\u4f5c","text":"<ul> <li>CREATE INDEX</li> </ul> <ul> <li>SHOW CREATE INDEX</li> </ul> <ul> <li>SHOW INDEXES</li> </ul> <ul> <li>DESCRIBE INDEX</li> </ul> <ul> <li>REBUILD INDEX</li> </ul> <ul> <li>SHOW INDEX STATUS</li> </ul> <ul> <li>DROP INDEX</li> </ul> <ul> <li>LOOKUP</li> </ul> <ul> <li>MATCH</li> </ul> <ul> <li>\u5730\u7406\u7a7a\u95f4\u7d22\u5f15</li> </ul>"},{"location":"3.ngql-guide/14.native-index-statements/#_5","title":"\u5168\u6587\u7d22\u5f15","text":"<p>\u5168\u6587\u7d22\u5f15\u662f\u57fa\u4e8e Elasticsearch \u6765\u5b9e\u73b0\u7684\uff0c\u7528\u4e8e\u5bf9\u5b57\u7b26\u4e32\u5c5e\u6027\u8fdb\u884c\u524d\u7f00\u641c\u7d22\u3001\u901a\u914d\u7b26\u641c\u7d22\u3001\u6b63\u5219\u8868\u8fbe\u5f0f\u641c\u7d22\u548c\u6a21\u7cca\u641c\u7d22\uff0c\u6709\u5982\u4e0b\u7279\u70b9\uff1a</p> <ul> <li>\u53ea\u5141\u8bb8\u521b\u5efa\u4e00\u4e2a\u5c5e\u6027\u7684\u7d22\u5f15\u3002</li> </ul> <ul> <li>\u4e0d\u652f\u6301\u903b\u8f91\u64cd\u4f5c\uff0c\u4f8b\u5982<code>AND</code>\u3001<code>OR</code>\u3001<code>NOT</code>\u3002</li> </ul> <p>Note</p> <p>\u5982\u679c\u9700\u8981\u8fdb\u884c\u6574\u4e2a\u5b57\u7b26\u4e32\u7684\u5339\u914d\uff0c\u8bf7\u4f7f\u7528\u539f\u751f\u7d22\u5f15\u3002</p>"},{"location":"3.ngql-guide/14.native-index-statements/#null","title":"\u6ca1\u6709 NULL \u503c\u7d22\u5f15","text":"<p>\u4e0d\u652f\u6301\u5bf9\u503c\u4e3a NULL \u7684\u5c5e\u6027\u521b\u5efa\u7d22\u5f15\u3002</p>"},{"location":"3.ngql-guide/14.native-index-statements/#_6","title":"\u6ca1\u6709\u552f\u4e00\u7d22\u5f15","text":"<p>\u5728 Cypher \u4e2d\uff0c\u53ef\u4ee5\u901a\u8fc7 Constrains \u5b9e\u73b0\u5c5e\u6027\u503c\u7684\u552f\u4e00\u6027\u9650\u5236\u3002\u5728 MySQL \u4e2d\uff0c\u53ef\u4ee5\u5efa\u7acb\u552f\u4e00\u7d22\u5f15\u6765\u9650\u5236\u67d0\u5b57\u6bb5\u53ea\u6709\u552f\u4e00\u503c\u3002\u5728 nGQL \u4e2d\u6ca1\u6709\u5c5e\u6027\u7684\u552f\u4e00\u7d22\u5f15\uff08\u7528\u6237\u81ea\u884c\u4fdd\u8bc1\u5c5e\u6027\u503c\u7684\u552f\u4e00\u6027\uff09\u3002</p>"},{"location":"3.ngql-guide/14.native-index-statements/#_7","title":"\u6570\u5b57\u3001\u65e5\u671f\u548c\u65f6\u95f4\u7c7b\u578b\u7684\u8303\u56f4\u67e5\u8be2","text":"<p>\u539f\u751f\u7d22\u5f15\u8fd8\u652f\u6301\u5bf9\u6570\u5b57\u3001\u65e5\u671f\u548c\u65f6\u95f4\u7c7b\u578b\u7684\u5c5e\u6027\u8fdb\u884c\u8303\u56f4\u67e5\u8be2\uff0c\u4e0d\u652f\u6301\u5176\u4ed6\u5c5e\u6027\u7c7b\u578b\u7684\u8303\u56f4\u67e5\u8be2\u3002</p>"},{"location":"3.ngql-guide/14.native-index-statements/1.create-native-index/","title":"CREATE INDEX","text":""},{"location":"3.ngql-guide/14.native-index-statements/1.create-native-index/#_1","title":"\u524d\u63d0\u6761\u4ef6","text":"<p>\u521b\u5efa\u7d22\u5f15\u4e4b\u524d\uff0c\u8bf7\u786e\u4fdd\u76f8\u5173\u7684 Tag \u6216 Edge type \u5df2\u7ecf\u521b\u5efa\u3002\u5982\u4f55\u521b\u5efa Tag \u548c Edge type\uff0c\u8bf7\u53c2\u89c1 CREATE TAG \u548c CREATE EDGE\u3002</p> <p>\u5982\u4f55\u521b\u5efa\u5168\u6587\u7d22\u5f15\uff0c\u8bf7\u53c2\u89c1\u90e8\u7f72\u5168\u6587\u7d22\u5f15\u3002</p>"},{"location":"3.ngql-guide/14.native-index-statements/1.create-native-index/#_2","title":"\u4f7f\u7528\u7d22\u5f15\u5fc5\u8bfb","text":"<p>\u7d22\u5f15\u7684\u6982\u5ff5\u548c\u4f7f\u7528\u9650\u5236\u90fd\u8f83\u4e3a\u590d\u6742\u3002\u5728\u4f7f\u7528\u7d22\u5f15\u524d\uff0c\u8bf7\u52a1\u5fc5\u9605\u8bfb\u4ee5\u4e0b\u5185\u5bb9\u3002</p> <p><code>CREATE INDEX</code>\u8bed\u53e5\u7528\u4e8e\u5bf9 Tag\u3001EdgeType \u6216\u5176\u5c5e\u6027\u521b\u5efa\u539f\u751f\u7d22\u5f15\u3002\u901a\u5e38\u5206\u522b\u79f0\u4e3a\u201cTag \u7d22\u5f15\u201d\u3001\u201cEdge type \u7d22\u5f15\u201d\u548c\u201c\u5c5e\u6027\u7d22\u5f15\u201d\u3002</p> <ul> <li>Tag \u7d22\u5f15\u548c Edge type \u7d22\u5f15\u5e94\u7528\u4e8e\u548c Tag\u3001Edge type \u81ea\u8eab\u76f8\u5173\u7684\u67e5\u8be2\uff0c\u4f8b\u5982\u7528<code>LOOKUP</code>\u67e5\u627e\u6709 Tag <code>player</code>\u7684\u6240\u6709\u70b9\u3002</li> </ul> <ul> <li>\u201c\u5c5e\u6027\u7d22\u5f15\u201d\u5e94\u7528\u4e8e\u57fa\u4e8e\u5c5e\u6027\u7684\u67e5\u8be2\uff0c\u4f8b\u5982\u57fa\u4e8e\u5c5e\u6027<code>age</code>\u627e\u5230<code>age == 19</code>\u7684\u6240\u6709\u7684\u70b9\u3002</li> </ul> <p>\u5982\u679c\u5df2\u7ecf\u4e3a Tag <code>T</code>\u7684\u5c5e\u6027<code>A</code>\u5efa\u7acb\u8fc7\u5c5e\u6027\u7d22\u5f15<code>i_TA</code>\uff08<code>T</code>\u7684\u7d22\u5f15\u4e3a<code>i_T</code>\uff09\uff0c\u7d22\u5f15\u4e4b\u95f4\u7684\u53ef\u66ff\u4ee3\u5173\u7cfb\u5982\u4e0b\uff08Edge type \u7d22\u5f15\u540c\u7406\uff09\uff1a</p> <ul> <li>\u67e5\u8be2\u5f15\u64ce\u53ef\u4ee5\u4f7f\u7528<code>i_TA</code>\u6765\u66ff\u4ee3<code>i_T</code>\u3002</li> </ul> <ul> <li> <p>\u5728<code>MATCH</code>\u3001<code>LOOKUP</code>\u8bed\u53e5\u4e2d<code>i_T</code>\u53ef\u4ee5\u66ff\u4ee3<code>i_TA</code>\u67e5\u627e\u5c5e\u6027\u3002</p> <p>\u5386\u53f2\u7248\u672c\u517c\u5bb9\u6027</p> <p>\u5728\u6b64\u524d\u7684\u7248\u672c\u4e2d\uff0c<code>LOOKUP</code>\u8bed\u53e5\u4e2d\u7684 Tag \u6216 Edge type \u7d22\u5f15\u4e0d\u53ef\u66ff\u4ee3\u5c5e\u6027\u7d22\u5f15\u7528\u4e8e\u5c5e\u6027\u67e5\u627e\u3002</p> </li> </ul> <p>\u4f7f\u7528\u66ff\u4ee3\u7d22\u5f15\u8fdb\u884c\u67e5\u8be2\u867d\u7136\u80fd\u83b7\u5f97\u76f8\u540c\u7684\u7ed3\u679c\uff0c\u4f46\u67e5\u8be2\u6027\u80fd\u4f1a\u6839\u636e\u9009\u62e9\u7684\u7d22\u5f15\u6709\u6240\u533a\u522b\u3002</p> <p>Caution</p> <p>\u4e0d\u8981\u4efb\u610f\u5728\u751f\u4ea7\u73af\u5883\u4e2d\u4f7f\u7528\u7d22\u5f15\uff0c\u9664\u975e\u5f88\u6e05\u695a\u4f7f\u7528\u7d22\u5f15\u5bf9\u4e1a\u52a1\u7684\u5f71\u54cd\u3002\u7d22\u5f15\u4f1a\u5bfc\u81f4\u5199\u6027\u80fd\u5927\u5e45\u4e0b\u964d\u3002</p> <p>\u53d8\u957f\u5b57\u7b26\u4e32\u7684\u5c5e\u6027\u7d22\u5f15\u957f\u5ea6\u6700\u957f\u4e3a 256\uff1b\u5b9a\u957f\u5b57\u7b26\u4e32\u7684\u5c5e\u6027\u7d22\u5f15\u957f\u5ea6\u4e3a\u7d22\u5f15\u540d\u672c\u8eab\u7684\u957f\u5ea6\uff0c\u65e0\u9650\u5236\u3002\u957f\u7d22\u5f15\u4f1a\u964d\u4f4e Storage \u670d\u52a1\u7684\u626b\u63cf\u6027\u80fd\uff0c\u4ee5\u53ca\u5360\u7528\u66f4\u591a\u5185\u5b58\uff0c\u5efa\u8bae\u5c06\u7d22\u5f15\u957f\u5ea6\u8bbe\u7f6e\u4e3a\u548c\u8981\u88ab\u7d22\u5f15\u7684\u6700\u957f\u5b57\u7b26\u4e32\u76f8\u540c\u3002</p>"},{"location":"3.ngql-guide/14.native-index-statements/1.create-native-index/#_3","title":"\u64cd\u4f5c\u6b65\u9aa4","text":"<p>\u5982\u679c\u5fc5\u987b\u4f7f\u7528\u7d22\u5f15\uff0c\u901a\u5e38\u6309\u7167\u5982\u4e0b\u6b65\u9aa4\uff1a</p> <ol> <li> <p>\u521d\u6b21\u5bfc\u5165\u6570\u636e\u81f3 NebulaGraph \u3002</p> </li> <li> <p>\u521b\u5efa\u7d22\u5f15\u3002</p> </li> <li> <p>\u91cd\u5efa\u7d22\u5f15\u3002</p> </li> <li> <p>\u4f7f\u7528 LOOKUP \u6216 MATCH \u8bed\u53e5\u67e5\u8be2\u6570\u636e\u3002\u4e0d\u9700\u8981\uff08\u4e5f\u65e0\u6cd5\uff09\u6307\u5b9a\u4f7f\u7528\u54ea\u4e2a\u7d22\u5f15\uff0cNebulaGraph \u4f1a\u81ea\u52a8\u8ba1\u7b97\u3002</p> </li> </ol> <p>Note</p> <p>\u5982\u679c\u5148\u521b\u5efa\u7d22\u5f15\u518d\u5bfc\u5165\u6570\u636e\uff0c\u4f1a\u56e0\u4e3a\u5199\u6027\u80fd\u7684\u4e0b\u964d\u5bfc\u81f4\u5bfc\u5165\u901f\u5ea6\u6781\u6162\u3002</p> <p>\u65e5\u5e38\u589e\u91cf\u5199\u5165\u65f6\u4fdd\u6301 <code>--disable_auto_compaction = false</code>\u3002</p> <p>\u65b0\u521b\u5efa\u7684\u7d22\u5f15\u5e76\u4e0d\u4f1a\u7acb\u523b\u751f\u6548\u3002\u521b\u5efa\u65b0\u7684\u7d22\u5f15\u5e76\u5c1d\u8bd5\u7acb\u523b\u4f7f\u7528\uff08\u4f8b\u5982<code>LOOKUP</code>\u6216\u8005<code>REBUILD INDEX</code>) \u901a\u5e38\u4f1a\u5931\u8d25\uff08\u62a5\u9519<code>can't find xxx in the space</code>\uff09\u3002\u56e0\u4e3a\u521b\u5efa\u6b65\u9aa4\u662f\u5f02\u6b65\u5b9e\u73b0\u7684\uff0cNebulaGraph \u8981\u5728\u4e0b\u4e00\u4e2a\u5fc3\u8df3\u5468\u671f\u624d\u80fd\u5b8c\u6210\u7d22\u5f15\u7684\u521b\u5efa\u3002\u4e3a\u786e\u4fdd\u6570\u636e\u540c\u6b65\uff0c\u540e\u7eed\u64cd\u4f5c\u80fd\u987a\u5229\u8fdb\u884c\uff0c\u8bf7\u7b49\u5f85 2 \u4e2a\u5fc3\u8df3\u5468\u671f\uff0820 \u79d2\uff09\u3002\u5982\u679c\u9700\u8981\u4fee\u6539\u5fc3\u8df3\u95f4\u9694\uff0c\u8bf7\u4e3a\u6240\u6709\u914d\u7f6e\u6587\u4ef6\u4fee\u6539\u53c2\u6570<code>heartbeat_interval_secs</code>\u3002</p> <p>Danger</p> <p>\u521b\u5efa\u7d22\u5f15\uff0c\u6216\u8005\u5220\u9664\u5e76\u518d\u6b21\u521b\u5efa\u540c\u540d\u7d22\u5f15\u540e\uff0c\u5fc5\u987b<code>REBUILD INDEX</code>\u3002\u5426\u5219\u65e0\u6cd5\u5728<code>MATCH</code>\u548c<code>LOOKUP</code>\u8bed\u53e5\u4e2d\u8fd4\u56de\u8fd9\u4e9b\u6570\u636e\u3002</p>"},{"location":"3.ngql-guide/14.native-index-statements/1.create-native-index/#_4","title":"\u8bed\u6cd5","text":"<pre><code>CREATE {TAG | EDGE} INDEX [IF NOT EXISTS] &lt;index_name&gt; ON {&lt;tag_name&gt; | &lt;edge_name&gt;} ([&lt;prop_name_list&gt;]) [COMMENT '&lt;comment&gt;'];\n</code></pre> \u53c2\u6570 \u8bf4\u660e <code>TAG | EDGE</code> \u6307\u5b9a\u8981\u521b\u5efa\u7684\u7d22\u5f15\u7c7b\u578b\u3002 <code>IF NOT EXISTS</code> \u68c0\u6d4b\u5f85\u521b\u5efa\u7684\u7d22\u5f15\u662f\u5426\u5b58\u5728\uff0c\u53ea\u6709\u4e0d\u5b58\u5728\u65f6\uff0c\u624d\u4f1a\u521b\u5efa\u7d22\u5f15\u3002 <code>&lt;index_name&gt;</code> 1\u3001\u7d22\u5f15\u540d\u3002\u7d22\u5f15\u540d\u5728\u4e00\u4e2a\u56fe\u7a7a\u95f4\u4e2d\u5fc5\u987b\u662f\u552f\u4e00\u7684\u3002\u63a8\u8350\u7684\u547d\u540d\u65b9\u5f0f\u4e3a<code>i_tagName_propName</code>\u30022\u3001\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u4ec5\u652f\u6301 1~4 \u5b57\u8282\u7684 UTF-8 \u7f16\u7801\u5b57\u7b26\uff0c\u5305\u62ec\u82f1\u6587\u5b57\u6bcd\uff08\u533a\u5206\u5927\u5c0f\u5199\uff09\u3001\u6570\u5b57\u3001\u4e2d\u6587\u7b49\u3002\u4e0d\u80fd\u5305\u542b\u4e0b\u5212\u7ebf\uff08_\uff09\u4ee5\u5916\u7684\u7279\u6b8a\u5b57\u7b26\uff0c\u4e14\u4e0d\u80fd\u4ee5\u6570\u5b57\u5f00\u5934\u30023\u3001\u5982\u679c\u9700\u8981\u4f7f\u7528\u7279\u6b8a\u5b57\u7b26\u3001\u4fdd\u7559\u5173\u952e\u5b57\u6216\u8005\u4ee5\u6570\u5b57\u5f00\u5934\uff0c\u8bf7\u4f7f\u7528\u53cd\u5f15\u53f7\uff08`\uff09\u5305\u56f4\u6574\u4e2a\u540d\u79f0\u3002\u53cd\u5f15\u53f7\u4e2d\u4e0d\u80fd\u5305\u542b\u82f1\u6587\u53e5\u53f7\uff08<code>.</code>\uff09\u3002\u8be6\u60c5\u53c2\u89c1\u5173\u952e\u5b57\u548c\u4fdd\u7559\u5b57\u3002\u6ce8\u610f\uff1a1\u3001\u5982\u679c\u4ee5\u4e2d\u6587\u4e3a\u7d22\u5f15\u547d\u540d\uff0c\u62a5<code>SyntaxError</code>\u9519\u8bef\u65f6\uff0c\u9700\u4f7f\u7528\u53cd\u5f15\u53f7\uff08`\uff09\u5305\u56f4\u4e2d\u6587\u5b57\u7b26\u30022\u3001\u540d\u79f0\u4e2d\u5982\u9700\u5305\u542b\u53cd\u5f15\u53f7\uff08`\uff09\uff0c\u4f7f\u7528\u53cd\u659c\u6760\uff08\\\uff09\u6765\u8f6c\u4e49\u53cd\u5f15\u53f7\uff08`\uff09\uff0c\u5982\uff1a\\`\uff1b\u5982\u9700\u5305\u542b\u53cd\u659c\u6760\uff08\\\uff09\uff0c\u53cd\u659c\u6760\uff08\\\uff09\u672c\u8eab\u4e5f\u9700\u8f6c\u4e49\uff0c\u5982\uff1a\\\\\u3002 <code>&lt;tag_name&gt; | &lt;edge_name&gt;</code> \u6307\u5b9a\u7d22\u5f15\u5173\u8054\u7684 Tag \u6216 Edge \u540d\u79f0\u3002 <code>&lt;prop_name_list&gt;</code> \u4e3a\u53d8\u957f\u5b57\u7b26\u4e32\u5c5e\u6027\u521b\u5efa\u7d22\u5f15\u65f6\uff0c\u5fc5\u987b\u7528<code>prop_name(length)</code>\u6307\u5b9a\u7d22\u5f15\u957f\u5ea6\uff0c\u7d22\u5f15\u957f\u5ea6\u6700\u957f\u4e3a 256\uff1b\u4e3a Tag \u6216 Edge type \u672c\u8eab\u521b\u5efa\u7d22\u5f15\u65f6\uff0c\u5ffd\u7565<code>&lt;prop_name_list&gt;</code>\u3002 <code>COMMENT</code> \u7d22\u5f15\u7684\u63cf\u8ff0\u3002\u6700\u5927\u4e3a 256 \u5b57\u8282\u3002\u9ed8\u8ba4\u65e0\u63cf\u8ff0\u3002"},{"location":"3.ngql-guide/14.native-index-statements/1.create-native-index/#tagedge_type","title":"\u521b\u5efa Tag/Edge type \u7d22\u5f15","text":"<pre><code>nebula&gt; CREATE TAG INDEX player_index on player();\n</code></pre> <pre><code>nebula&gt; CREATE EDGE INDEX follow_index on follow();\n</code></pre> <p>\u4e3a Tag \u6216 Edge type \u521b\u5efa\u7d22\u5f15\u540e\uff0c\u7528\u6237\u53ef\u4ee5\u4f7f\u7528 <code>LOOKUP</code> \u8bed\u53e5\u67e5\u627e<code>\u5e26\u6709\u8be5 Tag \u7684</code>\u6240\u6709\u70b9\u7684 VID\uff0c\u6216\u8005<code>\u6240\u6709\u8be5\u7c7b\u578b\u7684\u8fb9</code>\u7684<code>\u5bf9\u5e94\u8d77\u59cb\u70b9 VID\u3001\u76ee\u7684\u70b9 VID\u3001\u4ee5\u53ca rank</code>\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1 LOOKUP\u3002</p>"},{"location":"3.ngql-guide/14.native-index-statements/1.create-native-index/#_5","title":"\u521b\u5efa\u5355\u5c5e\u6027\u7d22\u5f15","text":"<pre><code>nebula&gt; CREATE TAG INDEX IF NOT EXISTS player_index_0 on player(name(10));\n</code></pre> <p>\u4e0a\u8ff0\u793a\u4f8b\u662f\u4e3a\u6240\u6709\u5305\u542b Tag<code>player</code>\u7684\u70b9\u521b\u5efa\u5c5e\u6027<code>name</code>\u7684\u7d22\u5f15\uff0c\u7d22\u5f15\u957f\u5ea6\u4e3a 10\u3002\u5373\u53ea\u4f7f\u7528\u5c5e\u6027<code>name</code>\u7684\u524d 10 \u4e2a\u5b57\u7b26\u6765\u521b\u5efa\u7d22\u5f15\u3002</p> <pre><code># \u53d8\u957f\u5b57\u7b26\u4e32\u9700\u8981\u6307\u5b9a\u7d22\u5f15\u957f\u5ea6\u3002\nnebula&gt; CREATE TAG IF NOT EXISTS var_string(p1 string);\nnebula&gt; CREATE TAG INDEX IF NOT EXISTS var ON var_string(p1(10));\n\n# \u5b9a\u957f\u5b57\u7b26\u4e32\u4e0d\u9700\u8981\u6307\u5b9a\u7d22\u5f15\u957f\u5ea6\u3002\nnebula&gt; CREATE TAG IF NOT EXISTS fix_string(p1 FIXED_STRING(10));\nnebula&gt; CREATE TAG INDEX IF NOT EXISTS fix ON fix_string(p1);\n</code></pre> <pre><code>nebula&gt; CREATE EDGE INDEX IF NOT EXISTS follow_index_0 on follow(degree);\n</code></pre>"},{"location":"3.ngql-guide/14.native-index-statements/1.create-native-index/#_6","title":"\u521b\u5efa\u590d\u5408\u5c5e\u6027\u7d22\u5f15","text":"<p><code>\u590d\u5408\u5c5e\u6027\u7d22\u5f15</code>\u7528\u4e8e\u67e5\u627e\u4e00\u4e2a Tag\uff08\u6216\u8005 Edge type) \u4e2d\u7684\u591a\u4e2a\u5c5e\u6027\uff08\u7684\u7ec4\u5408\uff09\u3002</p> <pre><code>nebula&gt; CREATE TAG INDEX IF NOT EXISTS player_index_1 on player(name(10), age);\n</code></pre> <p>Caution</p> <p>\u4e0d\u652f\u6301\u8de8 Tag \u6216 Edge type \u521b\u5efa\u590d\u5408\u7d22\u5f15\u3002</p> <p>Note</p> <p>\u4f7f\u7528\u590d\u5408\u5c5e\u6027\u7d22\u5f15\u65f6\uff0c\u9075\u5faa\"\u6700\u5de6\u5339\u914d\u539f\u5219\"\uff0c\u5fc5\u987b\u4ece\u590d\u5408\u5c5e\u6027\u7d22\u5f15\u7684\u6700\u5de6\u4fa7\u5f00\u59cb\u5339\u914d\u3002</p>"},{"location":"3.ngql-guide/14.native-index-statements/2.1.show-create-index/","title":"SHOW CREATE INDEX","text":"<p><code>SHOW CREATE INDEX</code>\u5c55\u793a\u521b\u5efa Tag \u6216\u8005 Edge type \u65f6\u4f7f\u7528\u7684 nGQL \u8bed\u53e5\uff0c\u5176\u4e2d\u5305\u542b\u7d22\u5f15\u7684\u8be6\u7ec6\u4fe1\u606f\uff0c\u4f8b\u5982\u5176\u5173\u8054\u7684\u5c5e\u6027\u3002</p>"},{"location":"3.ngql-guide/14.native-index-statements/2.1.show-create-index/#_1","title":"\u8bed\u6cd5","text":"<pre><code>SHOW CREATE {TAG | EDGE} INDEX &lt;index_name&gt;;\n</code></pre>"},{"location":"3.ngql-guide/14.native-index-statements/2.1.show-create-index/#_2","title":"\u793a\u4f8b","text":"<p>\u7528\u6237\u53ef\u4ee5\u5148\u8fd0\u884c<code>SHOW TAG INDEXES</code>\u67e5\u770b\u6709\u54ea\u4e9b Tag \u7d22\u5f15\uff0c\u7136\u540e\u7528<code>SHOW CREATE TAG INDEX</code>\u67e5\u770b\u6307\u5b9a\u7d22\u5f15\u7684\u521b\u5efa\u4fe1\u606f\u3002</p> <pre><code>nebula&gt; SHOW TAG INDEXES;\n+------------------+----------+----------+\n| Index Name       | By Tag   | Columns  |\n+------------------+----------+----------+\n| \"player_index_0\" | \"player\" | []       |\n| \"player_index_1\" | \"player\" | [\"name\"] |\n+------------------+----------+----------+\n\nnebula&gt; SHOW CREATE TAG INDEX player_index_1;\n+------------------+--------------------------------------------------+\n| Tag Index Name   | Create Tag Index                                 |\n+------------------+--------------------------------------------------+\n| \"player_index_1\" | \"CREATE TAG INDEX `player_index_1` ON `player` ( |\n|                  |  `name`(20)                                      |\n|                  | )\"                                               |\n+------------------+--------------------------------------------------+\n</code></pre> <p>Edge type \u7d22\u5f15\u53ef\u4ee5\u7528\u7c7b\u4f3c\u7684\u65b9\u6cd5\u67e5\u8be2\uff1a</p> <pre><code>nebula&gt; SHOW EDGE INDEXES;\n+----------------+----------+---------+\n| Index Name     | By Edge  | Columns |\n+----------------+----------+---------+\n| \"follow_index\" | \"follow\" | []      |\n+----------------+----------+---------+\n\nnebula&gt; SHOW CREATE EDGE INDEX follow_index;\n+-----------------+-------------------------------------------------+\n| Edge Index Name | Create Edge Index                               |\n+-----------------+-------------------------------------------------+\n| \"follow_index\"  | \"CREATE EDGE INDEX `follow_index` ON `follow` ( |\n|                 | )\"                                              |\n+-----------------+-------------------------------------------------+\n</code></pre>"},{"location":"3.ngql-guide/14.native-index-statements/2.show-native-indexes/","title":"SHOW INDEXES","text":"<p><code>SHOW INDEXES</code>\u8bed\u53e5\u53ef\u4ee5\u5217\u51fa\u5f53\u524d\u56fe\u7a7a\u95f4\u5185\u7684\u6240\u6709 Tag \u548c Edge type\uff08\u5305\u62ec\u5c5e\u6027\uff09\u7684\u7d22\u5f15\u3002</p>"},{"location":"3.ngql-guide/14.native-index-statements/2.show-native-indexes/#_1","title":"\u8bed\u6cd5","text":"<pre><code>SHOW {TAG | EDGE} INDEXES;\n</code></pre>"},{"location":"3.ngql-guide/14.native-index-statements/2.show-native-indexes/#_2","title":"\u793a\u4f8b","text":"<pre><code>nebula&gt; SHOW TAG INDEXES;\n+------------------+--------------+-----------------+\n| Index Name       | By Tag       | Columns         |\n+------------------+--------------+-----------------+\n| \"fix\"            | \"fix_string\" | [\"p1\"]          |\n| \"player_index_0\" | \"player\"     | [\"name\"]        |\n| \"player_index_1\" | \"player\"     | [\"name\", \"age\"] |\n| \"var\"            | \"var_string\" | [\"p1\"]          |\n+------------------+--------------+-----------------+\n\nnebula&gt; SHOW EDGE INDEXES;\n+----------------+----------+---------+\n| Index Name     | By Edge  | Columns |\n+----------------+----------+---------+\n| \"follow_index\" | \"follow\" | []      |\n+----------------+----------+---------+\n</code></pre>"},{"location":"3.ngql-guide/14.native-index-statements/3.describe-native-index/","title":"DESCRIBE INDEX","text":"<p><code>DESCRIBE INDEX</code>\u8bed\u53e5\u53ef\u4ee5\u67e5\u770b\u6307\u5b9a\u7d22\u5f15\u7684\u4fe1\u606f\uff0c\u5305\u62ec\u7d22\u5f15\u7684\u5c5e\u6027\u540d\u79f0\uff08Field\uff09\u548c\u6570\u636e\u7c7b\u578b\uff08Type\uff09\u3002</p>"},{"location":"3.ngql-guide/14.native-index-statements/3.describe-native-index/#_1","title":"\u8bed\u6cd5","text":"<pre><code>DESCRIBE {TAG | EDGE} INDEX &lt;index_name&gt;;\n</code></pre>"},{"location":"3.ngql-guide/14.native-index-statements/3.describe-native-index/#_2","title":"\u793a\u4f8b","text":"<pre><code>nebula&gt; DESCRIBE TAG INDEX player_index_0;\n+--------+--------------------+\n| Field  | Type               |\n+--------+--------------------+\n| \"name\" | \"fixed_string(30)\" |\n+--------+--------------------+\n\nnebula&gt; DESCRIBE TAG INDEX player_index_1;\n+--------+--------------------+\n| Field  | Type               |\n+--------+--------------------+\n| \"name\" | \"fixed_string(10)\" |\n| \"age\"  | \"int64\"            |\n+--------+--------------------+\n</code></pre>"},{"location":"3.ngql-guide/14.native-index-statements/4.rebuild-native-index/","title":"REBUILD INDEX","text":"<p>Danger</p> <ul> <li>\u7d22\u5f15\u529f\u80fd\u4e0d\u4f1a\u81ea\u52a8\u5bf9\u5176\u521b\u5efa\u4e4b\u524d\u5df2\u5b58\u5728\u7684\u5b58\u91cf\u6570\u636e\u751f\u6548\u2014\u2014\u2014\u2014\u5728\u7d22\u5f15\u91cd\u5efa\u5b8c\u6210\u4e4b\u524d\uff0c\u65e0\u6cd5\u57fa\u4e8e\u8be5\u7d22\u5f15\u4f7f\u7528<code>LOOKUP</code>\u548c<code>MATCH</code>\u8bed\u53e5\u67e5\u8be2\u5230\u5b58\u91cf\u6570\u636e\u3002</li> <li>\u7d22\u5f15\u7684\u91cd\u5efa\u672a\u5b8c\u6210\u65f6\uff0c\u4f9d\u8d56\u7d22\u5f15\u7684\u67e5\u8be2\u4ec5\u80fd\u4f7f\u7528\u90e8\u5206\u7d22\u5f15\uff0c\u56e0\u6b64\u4e0d\u80fd\u83b7\u5f97\u51c6\u786e\u7ed3\u679c\u3002</li> </ul> <p>\u8bf7\u5728\u521b\u5efa\u7d22\u5f15\u540e\uff0c\u9009\u62e9\u5408\u9002\u7684\u65f6\u95f4\u4e3a\u5b58\u91cf\u6570\u636e\u91cd\u5efa\u7d22\u5f15\u3002\u4f7f\u7528\u7d22\u5f15\u7684\u8be6\u60c5\u8bf7\u53c2\u89c1 CREATE INDEX\u3002</p> <p>Caution</p> <p>\u901a\u8fc7\u4fee\u6539\u914d\u7f6e\u6587\u4ef6\u4e2d\u7684<code>rebuild_index_part_rate_limit</code> \u548c <code>rebuild_index_batch_size</code> \u4e24\u4e2a\u53c2\u6570\uff0c\u53ef\u4f18\u5316\u91cd\u5efa\u7d22\u5f15\u7684\u901f\u5ea6\uff0c\u53e6\u5916\uff0c\u66f4\u5927\u53c2\u6570\u53ef\u80fd\u4f1a\u5bfc\u81f4\u66f4\u9ad8\u7684\u5185\u5b58\u548c\u7f51\u7edc\u5360\u7528\uff0c\u8be6\u60c5\u8bf7\u53c2\u89c1 Storage\u670d\u52a1\u914d\u7f6e\u3002</p>"},{"location":"3.ngql-guide/14.native-index-statements/4.rebuild-native-index/#_1","title":"\u8bed\u6cd5","text":"<pre><code>REBUILD {TAG | EDGE} INDEX [&lt;index_name_list&gt;];\n\n&lt;index_name_list&gt;::=\n    [index_name [, index_name] ...]\n</code></pre> <ul> <li>\u53ef\u4ee5\u4e00\u6b21\u91cd\u5efa\u591a\u4e2a\u7d22\u5f15\uff0c\u7d22\u5f15\u540d\u79f0\u4e4b\u95f4\u7528\u82f1\u6587\u9017\u53f7\uff08,\uff09\u5206\u9694\u3002\u5982\u679c\u6ca1\u6709\u6307\u5b9a\u7d22\u5f15\u540d\u79f0\uff0c\u5c06\u4f1a\u91cd\u5efa\u6240\u6709\u7d22\u5f15\u3002</li> </ul> <ul> <li>\u91cd\u5efa\u5b8c\u6210\u540e\uff0c\u7528\u6237\u53ef\u4ee5\u4f7f\u7528\u547d\u4ee4<code>SHOW {TAG | EDGE} INDEX STATUS</code>\u68c0\u67e5\u7d22\u5f15\u662f\u5426\u91cd\u5efa\u5b8c\u6210\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1 SHOW INDEX STATUS\u3002</li> </ul>"},{"location":"3.ngql-guide/14.native-index-statements/4.rebuild-native-index/#_2","title":"\u793a\u4f8b","text":"<pre><code>nebula&gt; CREATE TAG IF NOT EXISTS person(name string, age int, gender string, email string);\nnebula&gt; CREATE TAG INDEX IF NOT EXISTS single_person_index ON person(name(10));\n\n# \u91cd\u5efa\u7d22\u5f15\uff0c\u8fd4\u56de\u4efb\u52a1 ID\u3002\nnebula&gt; REBUILD TAG INDEX single_person_index;\n+------------+\n| New Job Id |\n+------------+\n| 31         |\n+------------+\n\n# \u67e5\u770b\u7d22\u5f15\u72b6\u6001\u3002\nnebula&gt; SHOW TAG INDEX STATUS;\n+-----------------------+--------------+\n| Name                  | Index Status |\n+-----------------------+--------------+\n| \"single_person_index\" | \"FINISHED\"   |\n+-----------------------+--------------+\n\n# \u4e5f\u53ef\u4ee5\u4f7f\u7528 SHOW JOB &lt;job_id&gt;\u67e5\u770b\u91cd\u5efa\u7d22\u5f15\u7684\u4efb\u52a1\u72b6\u6001\u3002\nnebula&gt; SHOW JOB 31;\n+----------------+---------------------+------------+-------------------------+-------------------------+-------------+\n| Job Id(TaskId) | Command(Dest)       | Status     | Start Time              | Stop Time               | Error Code  |\n+----------------+---------------------+------------+-------------------------+-------------------------+-------------+\n| 31             | \"REBUILD_TAG_INDEX\" | \"FINISHED\" | 2021-07-07T09:04:24.000 | 2021-07-07T09:04:24.000 | \"SUCCEEDED\" |\n| 0              | \"storaged1\"         | \"FINISHED\" | 2021-07-07T09:04:24.000 | 2021-07-07T09:04:28.000 | \"SUCCEEDED\" |\n| 1              | \"storaged2\"         | \"FINISHED\" | 2021-07-07T09:04:24.000 | 2021-07-07T09:04:28.000 | \"SUCCEEDED\" |\n| 2              | \"storaged0\"         | \"FINISHED\" | 2021-07-07T09:04:24.000 | 2021-07-07T09:04:28.000 | \"SUCCEEDED\" |\n| \"Total:3\"      | \"Succeeded:3\"       | \"Failed:0\" | \"In Progress:0\"         | \"\"                      | \"\"          |\n+----------------+---------------------+------------+----------------------------+----------------------------+-------------+\n+----------------+---------------------+------------+-------------------------+-------------------------+-------------+\n</code></pre> <p>NebulaGraph \u521b\u5efa\u4e00\u4e2a\u4efb\u52a1\u53bb\u91cd\u5efa\u7d22\u5f15\uff0c\u56e0\u6b64\u53ef\u4ee5\u6839\u636e\u8fd4\u56de\u7684\u4efb\u52a1 ID\uff0c\u901a\u8fc7<code>SHOW JOB &lt;job_id&gt;</code>\u8bed\u53e5\u67e5\u770b\u4efb\u52a1\u72b6\u6001\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1 SHOW JOB\u3002</p>"},{"location":"3.ngql-guide/14.native-index-statements/5.show-native-index-status/","title":"SHOW INDEX STATUS","text":"<p><code>SHOW INDEX STATUS</code>\u8bed\u53e5\u53ef\u4ee5\u67e5\u770b\u7d22\u5f15\u540d\u79f0\u548c\u5bf9\u5e94\u4f5c\u4e1a\u7684\u72b6\u6001\u3002</p> <p>\u91cd\u5efa\u7d22\u5f15\u65f6\u7684\u4f5c\u4e1a\u72b6\u6001\u5305\u62ec\uff1a</p> <ul> <li><code>QUEUE</code>\uff1a\u961f\u5217\u4e2d</li> <li><code>RUNNING</code>\uff1a\u6267\u884c\u4e2d</li> <li><code>FINISHED</code>\uff1a\u5df2\u5b8c\u6210</li> <li><code>FAILED</code>\uff1a\u5931\u8d25</li> <li><code>STOPPED</code>\uff1a\u505c\u6b62</li> <li><code>INVALID</code>\uff1a\u5931\u6548</li> </ul> <p>Note</p> <p>\u5982\u4f55\u521b\u5efa\u7d22\u5f15\u8bf7\u53c2\u89c1 CREATE INDEX\u3002</p>"},{"location":"3.ngql-guide/14.native-index-statements/5.show-native-index-status/#_1","title":"\u8bed\u6cd5","text":"<pre><code>SHOW {TAG | EDGE} INDEX STATUS;\n</code></pre>"},{"location":"3.ngql-guide/14.native-index-statements/5.show-native-index-status/#_2","title":"\u793a\u4f8b","text":"<pre><code>nebula&gt; SHOW TAG INDEX STATUS;\n+----------------------+--------------+\n| Name                 | Index Status |\n+----------------------+--------------+\n| \"player_index_0\"     | \"FINISHED\"   |\n| \"player_index_1\"     | \"FINISHED\"   |\n+----------------------+--------------+\n</code></pre>"},{"location":"3.ngql-guide/14.native-index-statements/6.drop-native-index/","title":"DROP INDEX","text":"<p><code>DROP INDEX</code>\u8bed\u53e5\u53ef\u4ee5\u5220\u9664\u5f53\u524d\u56fe\u7a7a\u95f4\u4e2d\u5df2\u5b58\u5728\u7684\u7d22\u5f15\u3002</p>"},{"location":"3.ngql-guide/14.native-index-statements/6.drop-native-index/#_1","title":"\u524d\u63d0\u6761\u4ef6","text":"<p>\u6267\u884c<code>DROP INDEX</code>\u8bed\u53e5\u9700\u8981\u5f53\u524d\u767b\u5f55\u7684\u7528\u6237\u62e5\u6709\u6307\u5b9a\u56fe\u7a7a\u95f4\u7684<code>DROP TAG INDEX</code>\u548c<code>DROP EDGE INDEX</code>\u6743\u9650\uff0c\u5426\u5219\u4f1a\u62a5\u9519\u3002</p>"},{"location":"3.ngql-guide/14.native-index-statements/6.drop-native-index/#_2","title":"\u8bed\u6cd5","text":"<pre><code>DROP {TAG | EDGE} INDEX [IF EXISTS] &lt;index_name&gt;;\n</code></pre> <p><code>IF EXISTS</code>\uff1a\u68c0\u6d4b\u5f85\u5220\u9664\u7684\u7d22\u5f15\u662f\u5426\u5b58\u5728\uff0c\u53ea\u6709\u5b58\u5728\u65f6\uff0c\u624d\u4f1a\u5220\u9664\u7d22\u5f15\u3002</p>"},{"location":"3.ngql-guide/14.native-index-statements/6.drop-native-index/#_3","title":"\u793a\u4f8b","text":"<pre><code>nebula&gt; DROP TAG INDEX player_index_0;\n</code></pre>"},{"location":"3.ngql-guide/15.full-text-index-statements/1.search-with-text-based-index/","title":"\u5168\u6587\u641c\u7d22","text":"<p>\u5168\u6587\u641c\u7d22\u662f\u57fa\u4e8e\u5168\u6587\u7d22\u5f15\u5bf9\u503c\u4e3a\u5b57\u7b26\u4e32\u7c7b\u578b\u7684\u5c5e\u6027\u8fdb\u884c\u524d\u7f00\u641c\u7d22\u3001\u901a\u914d\u7b26\u641c\u7d22\u3001\u6b63\u5219\u8868\u8fbe\u5f0f\u641c\u7d22\u548c\u6a21\u7cca\u641c\u7d22\u3002</p> <p>\u5728<code>LOOKUP</code>\u8bed\u53e5\u4e2d\uff0c\u4f7f\u7528<code>WHERE</code>\u5b50\u53e5\u6307\u5b9a\u5b57\u7b26\u4e32\u7684\u641c\u7d22\u6761\u4ef6\u3002</p>"},{"location":"3.ngql-guide/15.full-text-index-statements/1.search-with-text-based-index/#_2","title":"\u524d\u63d0\u6761\u4ef6","text":"<p>\u8bf7\u786e\u4fdd\u5df2\u7ecf\u90e8\u7f72\u5168\u6587\u7d22\u5f15\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1\u90e8\u7f72\u5168\u6587\u7d22\u5f15\u548c\u90e8\u7f72 listener\u3002</p>"},{"location":"3.ngql-guide/15.full-text-index-statements/1.search-with-text-based-index/#_3","title":"\u6ce8\u610f\u4e8b\u9879","text":"<p>\u4f7f\u7528\u5168\u6587\u7d22\u5f15\u524d\uff0c\u8bf7\u786e\u8ba4\u5df2\u7ecf\u4e86\u89e3\u5168\u6587\u7d22\u5f15\u7684\u4f7f\u7528\u9650\u5236\u3002</p>"},{"location":"3.ngql-guide/15.full-text-index-statements/1.search-with-text-based-index/#_4","title":"\u5168\u6587\u672c\u67e5\u8be2","text":"<p>\u5168\u6587\u672c\u67e5\u8be2\u4f7f\u60a8\u80fd\u591f\u641c\u7d22\u7ecf\u8fc7\u5206\u6790\u7684\u6587\u672c\u5b57\u6bb5\uff0c\u4f7f\u7528\u5177\u6709\u4e25\u683c\u8bed\u6cd5\u7684\u89e3\u6790\u5668\uff0c\u6839\u636e\u63d0\u4f9b\u7684\u67e5\u8be2\u5b57\u7b26\u4e32\u8fd4\u56de\u5185\u5bb9\u3002\u8be6\u60c5\u53c2\u89c1Query string query\u3002</p>"},{"location":"3.ngql-guide/15.full-text-index-statements/1.search-with-text-based-index/#_5","title":"\u8bed\u6cd5","text":""},{"location":"3.ngql-guide/15.full-text-index-statements/1.search-with-text-based-index/#_6","title":"\u521b\u5efa\u5168\u6587\u7d22\u5f15","text":"<pre><code>CREATE FULLTEXT {TAG | EDGE} INDEX &lt;index_name&gt; ON {&lt;tag_name&gt; | &lt;edge_name&gt;} (&lt;prop_name&gt; [,&lt;prop_name&gt;]...) [ANALYZER=\"&lt;analyzer_name&gt;\"];\n</code></pre> <ul> <li>\u521b\u5efa\u5168\u6587\u7d22\u5f15\u65f6\u652f\u6301\u591a\u5c5e\u6027\u7684\u590d\u5408\u7d22\u5f15\u3002</li> <li><code>&lt;analyzer_name&gt;</code>\u4e3a\u5206\u8bcd\u5668\u540d\u79f0\u3002\u9ed8\u8ba4\u4e3a<code>standard</code>\u3002\u4f7f\u7528\u5176\u4ed6\u5206\u8bcd\u5668\uff08\u4f8b\u5982 IK Analysis\uff09\u9700\u8981\u786e\u4fdd\u5df2\u7ecf\u63d0\u524d\u5728 Elasticsearch \u4e2d\u5b89\u88c5\u5bf9\u5e94\u5206\u8bcd\u5668\u3002</li> </ul>"},{"location":"3.ngql-guide/15.full-text-index-statements/1.search-with-text-based-index/#_7","title":"\u663e\u793a\u5168\u6587\u7d22\u5f15","text":"<pre><code>SHOW FULLTEXT INDEXES;\n</code></pre>"},{"location":"3.ngql-guide/15.full-text-index-statements/1.search-with-text-based-index/#_8","title":"\u91cd\u5efa\u5168\u6587\u7d22\u5f15","text":"<pre><code>REBUILD FULLTEXT INDEX;\n</code></pre> <p>Caution</p> <p>\u6570\u636e\u91cf\u5927\u65f6\uff0c\u91cd\u5efa\u5168\u6587\u7d22\u5f15\u901f\u5ea6\u8f83\u6162\uff0c\u53ef\u4ee5\u4fee\u6539 Storage \u670d\u52a1\u7684\u914d\u7f6e\u6587\u4ef6\uff08<code>nebula-storaged.conf</code>\uff09\u4e2d<code>snapshot_send_files=false</code>\u3002</p>"},{"location":"3.ngql-guide/15.full-text-index-statements/1.search-with-text-based-index/#_9","title":"\u5220\u9664\u5168\u6587\u7d22\u5f15","text":"<pre><code>DROP FULLTEXT INDEX &lt;index_name&gt;;\n</code></pre>"},{"location":"3.ngql-guide/15.full-text-index-statements/1.search-with-text-based-index/#_10","title":"\u4f7f\u7528\u67e5\u8be2\u9009\u9879","text":"<pre><code>LOOKUP ON {&lt;tag&gt; | &lt;edge_type&gt;} WHERE ES_QUERY(&lt;index_name&gt;, \"&lt;text&gt;\") YIELD &lt;return_list&gt; [| LIMIT [&lt;offset&gt;,] &lt;number_rows&gt;];\n\n&lt;return_list&gt;\n    &lt;prop_name&gt; [AS &lt;prop_alias&gt;] [, &lt;prop_name&gt; [AS &lt;prop_alias&gt;] ...] [, id(vertex)  [AS &lt;prop_alias&gt;]] [, score() AS &lt;score_alias&gt;]\n</code></pre> <ul> <li><code>index_name</code>\uff1a\u7d22\u5f15\u540d\u79f0\u3002</li> </ul> <ul> <li><code>text</code>\uff1a\u641c\u7d22\u6761\u4ef6\u3002WHERE \u540e\u53ea\u80fd\u8ddf\u4e00\u4e2a ES_QUERY\uff0c\u6240\u6709\u5224\u65ad\u6761\u4ef6\u5fc5\u987b\u5199\u5728 text \u91cc\u3002\u8be6\u7ec6\u8bed\u6cd5\u8bf7\u53c2\u89c1Query string syntax\u3002</li> </ul> <ul> <li><code>score()</code>\uff1a\u5bf9\u7b26\u5408\u6761\u4ef6\u7684\u70b9\u505a N \u5ea6\u6269\u5c55\u8ba1\u7b97\u51fa\u7684\u5206\u6570\u3002\u9ed8\u8ba4\u503c\u4e3a<code>1.0</code>\u3002\u5206\u6570\u8d8a\u9ad8\uff0c\u5339\u914d\u7a0b\u5ea6\u8d8a\u9ad8\u3002\u8fd4\u56de\u503c\u9ed8\u8ba4\u6309\u7167\u5206\u6570\u4ece\u9ad8\u5230\u4f4e\u6392\u5e8f\u3002\u8be6\u60c5\u53c2\u89c1Search and Scoring in Lucene\u3002</li> </ul>"},{"location":"3.ngql-guide/15.full-text-index-statements/1.search-with-text-based-index/#_11","title":"\u793a\u4f8b","text":"<pre><code>//\u521b\u5efa\u56fe\u7a7a\u95f4\u3002\nnebula&gt; CREATE SPACE IF NOT EXISTS basketballplayer (partition_num=3,replica_factor=1, vid_type=fixed_string(30));\n\n//\u767b\u5f55\u6587\u672c\u641c\u7d22\u5ba2\u6237\u7aef\u3002\nnebula&gt; SIGN IN TEXT SERVICE (192.168.8.100:9200, HTTP);\n\n//\u68c0\u67e5\u662f\u5426\u6210\u529f\u767b\u5f55\u3002\nnebula&gt; SHOW TEXT SEARCH CLIENTS;\n+-----------------+-----------------+------+\n| Type            | Host            | Port |\n+-----------------+-----------------+------+\n| \"ELASTICSEARCH\" | \"192.168.8.100\" | 9200 |\n+-----------------+-----------------+------+\n\n//\u5207\u6362\u56fe\u7a7a\u95f4\u3002\nnebula&gt; USE basketballplayer;\n\n//\u6dfb\u52a0 listener \u5230 NebulaGraph \u96c6\u7fa4\u3002\nnebula&gt; ADD LISTENER ELASTICSEARCH 192.168.8.100:9789;\n\n//\u68c0\u67e5\u662f\u5426\u6210\u529f\u6dfb\u52a0 listener\uff0c\u5f53\u72b6\u6001\u4e3a Online \u65f6\u8868\u793a\u6210\u529f\u6dfb\u52a0\u3002\nnebula&gt; SHOW LISTENER;\n+--------+-----------------+------------------------+-------------+\n| PartId | Type            | Host                   | Host Status |\n+--------+-----------------+------------------------+-------------+\n| 1      | \"ELASTICSEARCH\" | \"\"192.168.8.100\":9789\" | \"ONLINE\"    |\n| 2      | \"ELASTICSEARCH\" | \"\"192.168.8.100\":9789\" | \"ONLINE\"    |\n| 3      | \"ELASTICSEARCH\" | \"\"192.168.8.100\":9789\" | \"ONLINE\"    |\n+--------+-----------------+------------------------+-------------+\n\n//\u521b\u5efa Tag\u3002\nnebula&gt; CREATE TAG IF NOT EXISTS player(name string, city string);\n\n//\u521b\u5efa\u5355\u5c5e\u6027\u5168\u6587\u7d22\u5f15\u3002\nnebula&gt; CREATE FULLTEXT TAG INDEX fulltext_index_1 ON player(name) ANALYZER=\"standard\";\n\n//\u521b\u5efa\u591a\u5c5e\u6027\u5168\u6587\u7d22\u5f15\u3002\nnebula&gt; CREATE FULLTEXT TAG INDEX fulltext_index_2 ON player(name,city) ANALYZER=\"standard\";\n\n//\u91cd\u5efa\u5168\u6587\u7d22\u5f15\u3002\nnebula&gt; REBUILD FULLTEXT INDEX;\n\n//\u67e5\u770b\u5168\u6587\u7d22\u5f15\u3002\nnebula&gt; SHOW FULLTEXT INDEXES;\n+--------------------+-------------+-------------+--------------+------------+\n| Name               | Schema Type | Schema Name | Fields       | Analyzer   |\n+--------------------+-------------+-------------+--------------+------------+\n| \"fulltext_index_1\" | \"Tag\"       | \"player\"    | \"name\"       | \"standard\" |\n| \"fulltext_index_2\" | \"Tag\"       | \"player\"    | \"name, city\" | \"standard\" |\n+--------------------+-------------+-------------+--------------+------------+\n\n//\u63d2\u5165\u6d4b\u8bd5\u6570\u636e\u3002\nnebula&gt; INSERT VERTEX player(name, city) VALUES \\\n  \"Russell Westbrook\": (\"Russell Westbrook\", \"Los Angeles\"), \\\n  \"Chris Paul\": (\"Chris Paul\", \"Houston\"),\\\n  \"Boris Diaw\": (\"Boris Diaw\", \"Houston\"),\\\n  \"David West\": (\"David West\", \"Philadelphia\"),\\\n  \"Danny Green\": (\"Danny Green\", \"Philadelphia\"),\\\n  \"Tim Duncan\": (\"Tim Duncan\", \"New York\"),\\\n  \"James Harden\": (\"James Harden\", \"New York\"),\\\n  \"Tony Parker\": (\"Tony Parker\", \"Chicago\"),\\\n  \"Aron Baynes\": (\"Aron Baynes\", \"Chicago\"),\\\n  \"Ben Simmons\": (\"Ben Simmons\", \"Phoenix\"),\\\n  \"Blake Griffin\": (\"Blake Griffin\", \"Phoenix\");\n\n//\u6d4b\u8bd5\u67e5\u8be2\nnebula&gt; LOOKUP ON player WHERE ES_QUERY(fulltext_index_1,\"Chris\") YIELD id(vertex);\n+--------------+\n| id(VERTEX)   |\n+--------------+\n| \"Chris Paul\" |\n+--------------+\n\nnebula&gt; LOOKUP ON player WHERE ES_QUERY(fulltext_index_1,\"Harden\") YIELD properties(vertex);\n+----------------------------------------------------------------+\n| properties(VERTEX)                                             |\n+----------------------------------------------------------------+\n| {_vid: \"James Harden\", city: \"New York\", name: \"James Harden\"} |\n+----------------------------------------------------------------+\n\nnebula&gt; LOOKUP ON player WHERE ES_QUERY(fulltext_index_1,\"Da*\") YIELD properties(vertex);\n+------------------------------------------------------------------+\n| properties(VERTEX)                                               |\n+------------------------------------------------------------------+\n| {_vid: \"David West\", city: \"Philadelphia\", name: \"David West\"}   |\n| {_vid: \"Danny Green\", city: \"Philadelphia\", name: \"Danny Green\"} |\n+------------------------------------------------------------------+\n\nnebula&gt; LOOKUP ON player WHERE ES_QUERY(fulltext_index_1,\"*b*\") YIELD id(vertex);\n+---------------------+\n| id(VERTEX)          |\n+---------------------+\n| \"Russell Westbrook\" |\n| \"Boris Diaw\"        |\n| \"Aron Baynes\"       |\n| \"Ben Simmons\"       |\n| \"Blake Griffin\"     |\n+---------------------+\n\nnebula&gt; LOOKUP ON player WHERE ES_QUERY(fulltext_index_1,\"*b*\") YIELD id(vertex) | LIMIT 2,3;\n+-----------------+\n| id(VERTEX)      |\n+-----------------+\n| \"Aron Baynes\"   |\n| \"Ben Simmons\"   |\n| \"Blake Griffin\" |\n+-----------------+\n\nnebula&gt; LOOKUP ON player WHERE ES_QUERY(fulltext_index_1,\"*b*\") YIELD id(vertex) | YIELD count(*);\n+----------+\n| count(*) |\n+----------+\n| 5        |\n+----------+\n\nnebula&gt; LOOKUP ON player WHERE ES_QUERY(fulltext_index_1,\"*b*\") YIELD id(vertex), score() AS score;\n+---------------------+-------+\n| id(VERTEX)          | score |\n+---------------------+-------+\n| \"Russell Westbrook\" | 1.0   |\n| \"Boris Diaw\"        | 1.0   |\n| \"Aron Baynes\"       | 1.0   |\n| \"Ben Simmons\"       | 1.0   |\n| \"Blake Griffin\"     | 1.0   |\n+---------------------+-------+\n\n//\u5bf9\u4e8e\u5305\u542b b \u7684\u8bcd\u7684\u6587\u6863\uff0c\u5b83\u7684\u5f97\u5206\u5c06\u4e58\u4ee5\u52a0\u6743\u56e0\u5b50 4\uff0c\u800c\u5bf9\u4e8e\u5305\u542b c \u7684\u8bcd\u7684\u6587\u6863\uff0c\u4f7f\u7528\u9ed8\u8ba4\u52a0\u6743\u56e0\u5b50 1\u3002\nnebula&gt; LOOKUP ON player WHERE ES_QUERY(fulltext_index_1,\"*b*^4 OR *c*\") YIELD id(vertex), score() AS score;\n+---------------------+-------+\n| id(VERTEX)          | score |\n+---------------------+-------+\n| \"Russell Westbrook\" | 4.0   |\n| \"Boris Diaw\"        | 4.0   |\n| \"Aron Baynes\"       | 4.0   |\n| \"Ben Simmons\"       | 4.0   |\n| \"Blake Griffin\"     | 4.0   |\n| \"Chris Paul\"        | 1.0   |\n| \"Tim Duncan\"        | 1.0   |\n+---------------------+-------+\n\n//\u4f7f\u7528\u591a\u5c5e\u6027\u5168\u6587\u7d22\u5f15\u67e5\u8be2\uff0c\u6b64\u65f6\u6761\u4ef6\u4f1a\u5728\u7d22\u5f15\u7684\u6240\u6709\u5c5e\u6027\u5185\u8fdb\u884c\u5339\u914d\u3002\nnebula&gt; LOOKUP ON player WHERE ES_QUERY(fulltext_index_2,\"*h*\") YIELD properties(vertex);\n+------------------------------------------------------------------+\n| properties(VERTEX)                                               |\n+------------------------------------------------------------------+\n| {_vid: \"Chris Paul\", city: \"Houston\", name: \"Chris Paul\"}        |\n| {_vid: \"Boris Diaw\", city: \"Houston\", name: \"Boris Diaw\"}        |\n| {_vid: \"David West\", city: \"Philadelphia\", name: \"David West\"}   |\n| {_vid: \"James Harden\", city: \"New York\", name: \"James Harden\"}   |\n| {_vid: \"Tony Parker\", city: \"Chicago\", name: \"Tony Parker\"}      |\n| {_vid: \"Aron Baynes\", city: \"Chicago\", name: \"Aron Baynes\"}      |\n| {_vid: \"Ben Simmons\", city: \"Phoenix\", name: \"Ben Simmons\"}      |\n| {_vid: \"Blake Griffin\", city: \"Phoenix\", name: \"Blake Griffin\"}  |\n| {_vid: \"Danny Green\", city: \"Philadelphia\", name: \"Danny Green\"} |\n+------------------------------------------------------------------+\n\n//\u4f7f\u7528\u591a\u5c5e\u6027\u5168\u6587\u7d22\u5f15\u67e5\u8be2\u65f6\uff0c\u53ef\u4ee5\u5bf9\u4e0d\u540c\u7684\u5c5e\u6027\u6307\u5b9a\u4e0d\u540c\u7684\u6587\u672c\u8fdb\u884c\u67e5\u8be2\u3002\nnebula&gt; LOOKUP ON player WHERE ES_QUERY(fulltext_index_2,\"name:*b* AND city:Houston\") YIELD properties(vertex);\n+-----------------------------------------------------------+\n| properties(VERTEX)                                        |\n+-----------------------------------------------------------+\n| {_vid: \"Boris Diaw\", city: \"Houston\", name: \"Boris Diaw\"} |\n+-----------------------------------------------------------+\n\n//\u5220\u9664\u5355\u5c5e\u6027\u5168\u6587\u7d22\u5f15\u3002\nnebula&gt; DROP FULLTEXT INDEX fulltext_index_1;\n</code></pre>"},{"location":"3.ngql-guide/17.query-tuning-statements/1.explain-and-profile/","title":"EXPLAIN \u548c PROFILE","text":"<p><code>EXPLAIN</code>\u8bed\u53e5\u8f93\u51fa nGQL \u8bed\u53e5\u7684\u6267\u884c\u8ba1\u5212\uff0c\u4f46\u4e0d\u4f1a\u6267\u884c nGQL \u8bed\u53e5\u3002</p> <p><code>PROFILE</code>\u8bed\u53e5\u6267\u884c nGQL \u8bed\u53e5\uff0c\u7136\u540e\u8f93\u51fa\u6267\u884c\u8ba1\u5212\u548c\u6267\u884c\u6982\u8981\u3002\u7528\u6237\u53ef\u4ee5\u6839\u636e\u6267\u884c\u8ba1\u5212\u548c\u6267\u884c\u6982\u8981\u4f18\u5316\u67e5\u8be2\u6027\u80fd\u3002</p>"},{"location":"3.ngql-guide/17.query-tuning-statements/1.explain-and-profile/#_1","title":"\u6267\u884c\u8ba1\u5212","text":"<p>\u6267\u884c\u8ba1\u5212\u7531 NebulaGraph \u67e5\u8be2\u5f15\u64ce\u4e2d\u7684\u6267\u884c\u8ba1\u5212\u5668\u51b3\u5b9a\u3002</p> <p>\u6267\u884c\u8ba1\u5212\u5668\u5c06\u89e3\u6790\u540e\u7684 nGQL \u8bed\u53e5\u5904\u7406\u4e3a<code>action</code>\u3002<code>action</code>\u662f\u6700\u5c0f\u7684\u6267\u884c\u5355\u5143\u3002\u5178\u578b\u7684<code>action</code>\u5305\u62ec\u83b7\u53d6\u6307\u5b9a\u70b9\u7684\u6240\u6709\u90bb\u5c45\u3001\u83b7\u53d6\u8fb9\u7684\u5c5e\u6027\u3001\u6839\u636e\u6761\u4ef6\u8fc7\u6ee4\u70b9\u6216\u8fb9\u7b49\u3002\u6bcf\u4e2a<code>action</code>\u90fd\u88ab\u5206\u914d\u7ed9\u4e00\u4e2a<code>operator</code>\u3002</p> <p>\u4f8b\u5982<code>SHOW TAGS</code>\u8bed\u53e5\u5206\u4e3a\u4e24\u4e2a<code>action</code>\uff0c<code>operator</code>\u4e3a<code>Start</code>\u548c<code>ShowTags</code>\u3002\u66f4\u590d\u6742\u7684<code>GO</code>\u8bed\u53e5\u53ef\u80fd\u4f1a\u88ab\u5904\u7406\u6210 10 \u4e2a\u4ee5\u4e0a\u7684<code>action</code>\u3002</p>"},{"location":"3.ngql-guide/17.query-tuning-statements/1.explain-and-profile/#_2","title":"\u8bed\u6cd5","text":"<ul> <li><code>EXPLAIN</code><pre><code>EXPLAIN [format= {\"row\" | \"dot\" | \"tck\"}] &lt;your_nGQL_statement&gt;;\n</code></pre> </li> </ul> <ul> <li><code>PROFILE</code><pre><code>PROFILE [format= {\"row\" | \"dot\" | \"tck\"}] &lt;your_nGQL_statement&gt;;\n</code></pre> </li> </ul>"},{"location":"3.ngql-guide/17.query-tuning-statements/1.explain-and-profile/#_3","title":"\u8f93\u51fa\u683c\u5f0f","text":"<p><code>EXPLAIN</code>\u6216<code>PROFILE</code>\u8bed\u53e5\u7684\u8f93\u51fa\u6709\u4e09\u79cd\u683c\u5f0f\uff1a<code>row</code>\uff08\u9ed8\u8ba4\uff09\u3001<code>dot</code>\u548c<code>tck</code>\u3002\u7528\u6237\u53ef\u4ee5\u4f7f\u7528<code>format</code>\u9009\u9879\u4fee\u6539\u8f93\u51fa\u683c\u5f0f\u3002</p>"},{"location":"3.ngql-guide/17.query-tuning-statements/1.explain-and-profile/#row","title":"<code>row</code>\u683c\u5f0f","text":"<p><code>row</code>\u683c\u5f0f\u5c06\u8fd4\u56de\u4fe1\u606f\u8f93\u51fa\u5230\u4e00\u4e2a\u8868\u683c\u4e2d\u3002</p> <ul> <li><code>EXPLAIN</code><pre><code>nebula&gt; EXPLAIN format=\"row\" SHOW TAGS;\nExecution succeeded (time spent 327/892 us)\n\nExecution Plan\n\n-----+----------+--------------+----------------+----------------------------------------------------------------------\n| id | name     | dependencies | profiling data | operator info                                                       |\n-----+----------+--------------+----------------+----------------------------------------------------------------------\n|  1 | ShowTags | 0            |                | outputVar: [{\"colNames\":[],\"name\":\"__ShowTags_1\",\"type\":\"DATASET\"}] |\n|    |          |              |                | inputVar:                                                           |\n-----+----------+--------------+----------------+----------------------------------------------------------------------\n|  0 | Start    |              |                | outputVar: [{\"colNames\":[],\"name\":\"__Start_0\",\"type\":\"DATASET\"}]    |\n-----+----------+--------------+----------------+----------------------------------------------------------------------\n</code></pre> </li> </ul> <ul> <li><code>PROFILE</code><pre><code>nebula&gt; PROFILE format=\"row\" SHOW TAGS;\n+--------+\n| Name   |\n+--------+\n| player |\n| team   |\n+--------+\nGot 2 rows (time spent 2038/2728 us)\n\nExecution Plan\n\n-----+----------+--------------+----------------------------------------------------+----------------------------------------------------------------------\n| id | name     | dependencies | profiling data                                     | operator info                                                       |\n-----+----------+--------------+----------------------------------------------------+----------------------------------------------------------------------\n|  1 | ShowTags | 0            | ver: 0, rows: 1, execTime: 42us, totalTime: 1177us | outputVar: [{\"colNames\":[],\"name\":\"__ShowTags_1\",\"type\":\"DATASET\"}] |\n|    |          |              |                                                    | inputVar:                                                           |\n-----+----------+--------------+----------------------------------------------------+----------------------------------------------------------------------\n|  0 | Start    |              | ver: 0, rows: 0, execTime: 1us, totalTime: 57us    | outputVar: [{\"colNames\":[],\"name\":\"__Start_0\",\"type\":\"DATASET\"}]    |\n-----+----------+--------------+----------------------------------------------------+----------------------------------------------------------------------\n</code></pre> </li> </ul> \u53c2\u6570 \u8bf4\u660e <code>id</code> <code>operator</code>\u7684 ID\u3002 <code>name</code> <code>operator</code>\u7684\u540d\u79f0\u3002 <code>dependencies</code> \u5f53\u524d<code>operator</code>\u6240\u4f9d\u8d56\u7684<code>operator</code>\u7684 ID\u3002 <code>profiling data</code> \u6267\u884c\u6982\u8981\u6587\u4ef6\u5185\u5bb9\u3002 <code>ver</code>\u8868\u793a<code>operator</code>\u7684\u7248\u672c\uff1b<code>rows</code>\u8868\u793a<code>operator</code>\u8f93\u51fa\u7ed3\u679c\u7684\u884c\u6570\uff1b<code>execTime</code>\u8868\u793a\u6267\u884c<code>action</code>\u7684\u65f6\u95f4\uff1b<code>totalTime</code>\u8868\u793a\u6267\u884c<code>action</code>\u7684\u65f6\u95f4\u3001\u7cfb\u7edf\u8c03\u5ea6\u65f6\u95f4\u3001\u6392\u961f\u65f6\u95f4\u7684\u603b\u548c\u3002 <code>operator info</code> <code>operator</code>\u7684\u8be6\u7ec6\u4fe1\u606f\u3002"},{"location":"3.ngql-guide/17.query-tuning-statements/1.explain-and-profile/#dot","title":"<code>dot</code>\u683c\u5f0f","text":"<p><code>dot</code>\u683c\u5f0f\u5c06\u8fd4\u56de DOT \u8bed\u8a00\u7684\u4fe1\u606f\uff0c\u7136\u540e\u7528\u6237\u53ef\u4ee5\u4f7f\u7528 Graphviz \u751f\u6210\u8ba1\u5212\u56fe\u3002</p> <p>Note</p> <p>Graphviz \u662f\u4e00\u6b3e\u5f00\u6e90\u53ef\u89c6\u5316\u56fe\u5de5\u5177\uff0c\u53ef\u4ee5\u7ed8\u5236 DOT \u8bed\u8a00\u811a\u672c\u63cf\u8ff0\u7684\u56fe\u3002Graphviz \u63d0\u4f9b\u4e00\u4e2a\u5728\u7ebf\u5de5\u5177\uff0c\u53ef\u4ee5\u9884\u89c8 DOT \u8bed\u8a00\u6587\u4ef6\uff0c\u5e76\u5c06\u5b83\u4eec\u5bfc\u51fa\u4e3a SVG \u6216 JSON \u7b49\u5176\u4ed6\u683c\u5f0f\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1 Graphviz Online\u3002</p> <pre><code>nebula&gt; EXPLAIN format=\"dot\" SHOW TAGS;\nExecution succeeded (time spent 161/665 us)\nExecution Plan\n---------------------------------------------------------------------------------------------------------------------------------------------  -------------\n  plan\n---------------------------------------------------------------------------------------------------------------------------------------------  -------------\n  digraph exec_plan {\n      rankdir=LR;\n      \"ShowTags_0\"[label=\"ShowTags_0|outputVar: \\[\\{\\\"colNames\\\":\\[\\],\\\"name\\\":\\\"__ShowTags_0\\\",\\\"type\\\":\\\"DATASET\\\"\\}\\]\\l|inputVar:\\l\",   shape=Mrecord];\n      \"Start_2\"-&gt;\"ShowTags_0\";\n      \"Start_2\"[label=\"Start_2|outputVar: \\[\\{\\\"colNames\\\":\\[\\],\\\"name\\\":\\\"__Start_2\\\",\\\"type\\\":\\\"DATASET\\\"\\}\\]\\l|inputVar: \\l\",   shape=Mrecord];\n  }\n---------------------------------------------------------------------------------------------------------------------------------------------  -------------\n</code></pre> <p>\u5c06\u4e0a\u8ff0\u793a\u4f8b\u7684 DOT \u8bed\u8a00\u8f6c\u6362\u4e3a Graphviz \u56fe\uff0c\u5982\u4e0b\u6240\u793a\u3002</p> <p></p>"},{"location":"3.ngql-guide/17.query-tuning-statements/1.explain-and-profile/#tck","title":"<code>tck</code>\u683c\u5f0f","text":"<p><code>tck</code>\u683c\u5f0f\u7c7b\u4f3c\u4e8e\u8868\u683c\uff0c\u4f46\u662f\u6ca1\u6709\u8fb9\u6846\u548c\u884c\u4e4b\u95f4\u7684\u95f4\u7684\u5206\u5272\u7ebf\u3002\u7528\u6237\u53ef\u4ee5\u5c06\u7ed3\u679c\u7528\u5728\u5355\u5143\u6d4b\u8bd5\u7684\u6d4b\u8bd5\u7528\u4f8b\u4e2d\u3002 \u5173\u4e8e<code>tck</code>\u683c\u5f0f\u7684\u6d4b\u8bd5\u7528\u4f8b\uff0c\u53c2\u89c1 TCK case\u3002</p> <ul> <li><code>EXPLAIN</code><pre><code>nebula&gt; EXPLAIN format=\"tck\" FETCH PROP ON player \"player_1\",\"player_2\",\"player_3\" YIELD properties(vertex).name as name, properties(vertex).age as age;\nExecution succeeded (time spent 261\u00b5s/613.718\u00b5s)\n\nExecution Plan (optimize time 28 us)\n\n\n| id | name        | dependencies | profiling data | operator info |\n|  2 | Project     | 1            |                |               |\n|  1 | GetVertices | 0            |                |               |\n|  0 | Start       |              |                |               |\n\n\nWed, 22 Mar 2023 23:15:52 CST\n</code></pre> </li> </ul> <ul> <li><code>PROFILE</code><pre><code>nebula&gt; PROFILE format=\"tck\" FETCH PROP ON player \"player_1\",\"player_2\",\"player_3\" YIELD properties(vertex).name as name, properties(vertex).age as age;\n\n| name         | age |\n| \"Piter Park\" | 24  |\n| \"aaa\"        | 24  |\n| \"ccc\"        | 24  |\n\nGot 3 rows (time spent 1.474ms/2.19677ms)\n\nExecution Plan (optimize time 41 us)\n\n\n| id | name        | dependencies | profiling data                                                                                                      | operator info |\n|  2 | Project     | 1            | {\"rows\":3,\"version\":0}                                                                                              |               |\n|  1 | GetVertices | 0            | {\"resp[0]\":{\"exec\":\"232(us)\",\"host\":\"127.0.0.1:9779\",\"total\":\"758(us)\"},\"rows\":3,\"total_rpc\":\"875(us)\",\"version\":0} |               |\n|  0 | Start       |              | {\"rows\":0,\"version\":0}                                                                                              |               |\n\n\nWed, 22 Mar 2023 23:16:13 CST\n</code></pre> </li> </ul>"},{"location":"3.ngql-guide/17.query-tuning-statements/2.kill-session/","title":"\u7ec8\u6b62\u4f1a\u8bdd\uff08KILL SESSION\uff09","text":"<p><code>KILL SESSION</code>\u8bed\u53e5\u7528\u4e8e\u5173\u95ed\u672a\u767b\u51fa\u7684\u4f1a\u8bdd\uff08Session\uff09\u3002</p> <p>Note</p> <ul> <li>\u53ea\u6709<code>root</code>\u7528\u6237\u53ef\u4ee5\u7ec8\u6b62\u4f1a\u8bdd\u3002</li> <li>\u6267\u884c<code>KILL SESSION</code>\u547d\u4ee4\u540e\uff0c\u6240\u6709\u7684 Graph \u670d\u52a1\u540c\u6b65\u6700\u65b0\u7684\u4f1a\u8bdd\u4fe1\u606f\u9700\u8981\u7b49\u5f85<code>2* session_reclaim_interval_secs</code>\u79d2\uff0c\u9ed8\u8ba4\u7b49\u5f85<code>120</code>\u79d2\u3002</li> </ul>"},{"location":"3.ngql-guide/17.query-tuning-statements/2.kill-session/#_1","title":"\u8bed\u6cd5","text":"<p><code>KILL SESSION</code>\u8bed\u53e5\u652f\u6301\u7ec8\u6b62\u5355\u4e2a\u548c\u591a\u4e2a\u4f1a\u8bdd\uff0c\u8bed\u6cd5\u5982\u4e0b\uff1a</p> <ul> <li> <p>\u7ec8\u6b62\u5355\u4e2a\u4f1a\u8bdd</p> <pre><code>KILL {SESSION|SESSIONS} &lt;SessionId&gt;\n</code></pre> <ul> <li><code>{SESSION|SESSIONS}</code>\uff1a\u652f\u6301<code>SESSION</code>\u548c<code>SESSIONS</code>\u7684\u5199\u6cd5\u3002</li> <li><code>&lt;SessionId&gt;</code>\uff1a\u6307\u4f1a\u8bdd Session \u7684 ID\u3002\u53ef\u6267\u884c SHOW SESSIONS \u547d\u4ee4\u67e5\u770b\u4f1a\u8bdd ID\u3002</li> </ul> </li> </ul> <ul> <li> <p>\u7ec8\u6b62\u591a\u4e2a\u4f1a\u8bdd</p> <pre><code>SHOW SESSIONS \n| YIELD $-.SessionId AS sid [WHERE &lt;filter_clause&gt;]\n| KILL {SESSION|SESSIONS} $-.sid\n</code></pre> <p>Note</p> <p><code>KILL SESSION</code>\u8bed\u53e5\u652f\u6301\u7ba1\u9053\u64cd\u4f5c\uff0c\u5373\u5c06<code>SHOW SESSIONS</code>\u8bed\u53e5\u4e0e<code>KILL SESSION</code>\u8bed\u53e5\u7ed3\u5408\u4f7f\u7528\uff0c\u4ee5\u7ec8\u6b62\u591a\u4e2a\u4f1a\u8bdd\u3002</p> <ul> <li><code>[WHERE &lt;filter_clause&gt;]</code>\uff1a<ul> <li>\u53ef\u9009\u9879\uff0c\u4f7f\u7528<code>WHERE</code>\u5b50\u53e5\u8fc7\u6ee4\u4f1a\u8bdd\uff1b<code>&lt;filter_expression&gt;</code>\u6307\u6ee4\u8fc7\u8868\u8fbe\u5f0f\uff0c\u4f8b\u5982<code>WHERE $-.CreateTime &lt; datetime(\"2022-12-14T18:00:00\")</code>\u3002\u5982\u679c\u4e0d\u52a0\u8be5\u9009\u9879\uff0c\u5219\u5173\u95ed\u6240\u6709\u5f53\u524d\u4f1a\u8bdd\u3002</li> <li><code>WHERE</code>\u5b50\u53e5\u4e2d\u652f\u6301\u7684\u8fc7\u6ee4\u9879\u6709\uff1a<code>SessionId</code>\u3001<code>UserName</code>\u3001<code>SpaceName</code>\u3001<code>CreateTime</code>\u3001<code>UpdateTime</code>\u3001<code>GraphAddr</code>\u3001<code>Timezone</code>\u3001<code>ClientIp</code>\u3002\u53ef\u4ee5\u6267\u884c SHOW SESSIONS \u547d\u4ee4\u67e5\u770b\u8fd9\u4e9b\u8fc7\u6ee4\u9879\u7684\u542b\u4e49\u3002</li> </ul> </li> </ul> <ul> <li><code>{SESSION|SESSIONS}</code>\uff1a\u652f\u6301<code>SESSION</code>\u548c<code>SESSIONS</code>\u7684\u5199\u6cd5\u3002</li> </ul> <p>Caution</p> <p>\u8bf7\u8c28\u614e\u4f7f\u7528\u8fc7\u6ee4\u6761\u4ef6\u4ee5\u9632\u8bef\u5220\u4f1a\u8bdd\u3002</p> </li> </ul>"},{"location":"3.ngql-guide/17.query-tuning-statements/2.kill-session/#_2","title":"\u793a\u4f8b","text":"<ul> <li> <p>\u7ec8\u6b62\u5355\u4e2a\u4f1a\u8bdd\u3002</p> <pre><code>nebula&gt; KILL SESSION 1672887983842984 \n</code></pre> </li> </ul> <ul> <li> <p>\u7ec8\u6b62\u591a\u4e2a\u4f1a\u8bdd\u3002</p> <ul> <li>\u7ec8\u6b62\u521b\u5efa\u65f6\u95f4\u5c0f\u4e8e<code>2023-01-05T18:00:00</code>\u7684\u6240\u6709\u4f1a\u8bdd\u3002   <pre><code>nebula&gt; SHOW SESSIONS | YIELD $-.SessionId AS sid WHERE $-.CreateTime &lt; datetime(\"2023-01-05T18:00:00\") | KILL SESSIONS $-.sid\n</code></pre></li> </ul> <ul> <li>\u7ec8\u6b62\u521b\u5efa\u65f6\u95f4\u6700\u65e9\u7684\u4e24\u4e2a\u4f1a\u8bdd\u3002   <pre><code>nebula&gt; SHOW SESSIONS | YIELD $-.SessionId AS sid, $-.CreateTime as CreateTime | ORDER BY $-.CreateTime ASC | LIMIT 2 | KILL SESSIONS $-.sid\n</code></pre></li> </ul> <ul> <li>\u7ec8\u6b62\u7528\u6237\u540d\u4e3a<code>session_user1</code>\u521b\u5efa\u7684\u6240\u6709\u4f1a\u8bdd\u3002   <pre><code>nebula&gt; SHOW SESSIONS | YIELD $-.SessionId as sid WHERE $-.UserName == \"session_user1\" | KILL SESSIONS $-.sid\n</code></pre></li> </ul> <ul> <li> <p>\u7ec8\u6b62\u6240\u6709\u4f1a\u8bdd   <pre><code>nebula&gt; SHOW SESSIONS | YIELD $-.SessionId as sid | KILL SESSION $-.sid\n\n// \u6216\u8005\nnebula&gt; SHOW SESSIONS | KILL SESSIONS $-.SessionId\n</code></pre></p> <p>Caution</p> <p>\u7ec8\u6b62\u6240\u6709\u4f1a\u8bdd\u65f6\uff0c\u5f53\u524d\u4f1a\u8bdd\u4e5f\u4f1a\u88ab\u7ec8\u6b62\u3002\u8bf7\u8c28\u614e\u4f7f\u7528\u3002</p> </li> </ul> </li> </ul>"},{"location":"3.ngql-guide/17.query-tuning-statements/6.kill-query/","title":"\u7ec8\u6b62\u67e5\u8be2","text":"<p><code>KILL QUERY</code>\u547d\u4ee4\u53ef\u4ee5\u7ec8\u6b62\u6b63\u5728\u6267\u884c\u7684\u67e5\u8be2\uff0c\u5e38\u7528\u4e8e\u7ec8\u6b62\u6162\u67e5\u8be2\u3002</p> <p>Note</p> <p>\u4ec5 God \u89d2\u8272\u6743\u9650\u53ef\u4ee5\u7ec8\u6b62\u4efb\u610f\u67e5\u8be2\uff0c\u5176\u4ed6\u89d2\u8272\u53ea\u80fd\u7ec8\u6b62\u81ea\u5df1\u7684\u67e5\u8be2\u3002</p>"},{"location":"3.ngql-guide/17.query-tuning-statements/6.kill-query/#_2","title":"\u8bed\u6cd5","text":"<pre><code>KILL QUERY (session=&lt;session_id&gt;, plan=&lt;plan_id&gt;);\n</code></pre> <ul> <li><code>session_id</code>\uff1a\u4f1a\u8bdd ID\u3002</li> <li><code>plan_id</code>\uff1a\u6267\u884c\u8ba1\u5212 ID\u3002</li> </ul> <p>\u4f1a\u8bdd ID \u548c\u6267\u884c\u8ba1\u5212 ID \u53ef\u4ee5\u552f\u4e00\u786e\u5b9a\u4e00\u4e2a\u67e5\u8be2\u3002\u4e8c\u8005\u53ef\u4ee5\u901a\u8fc7 SHOW QUERIES \u8bed\u53e5\u83b7\u53d6\u3002</p>"},{"location":"3.ngql-guide/17.query-tuning-statements/6.kill-query/#_3","title":"\u793a\u4f8b","text":"<p>\u5728\u4e00\u4e2a\u4f1a\u8bdd\u4e2d\u6267\u884c\u547d\u4ee4\u7ec8\u6b62\u53e6\u4e00\u4e2a\u4f1a\u8bdd\u4e2d\u7684\u67e5\u8be2\uff1a</p> <pre><code>nebula&gt; KILL QUERY(SESSION=1625553545984255,PLAN=163);\n</code></pre> <p>\u53e6\u4e00\u4e2a\u4f1a\u8bdd\u4e2d\u7684\u67e5\u8be2\u4f1a\u7ec8\u6b62\uff0c\u5e76\u8fd4\u56de\u5982\u4e0b\u4fe1\u606f\uff1a</p> <pre><code>[ERROR (-1005)]: ExecutionPlanId[1001] does not exist in current Session.\n</code></pre>"},{"location":"3.ngql-guide/3.data-types/1.numeric/","title":"\u6570\u503c","text":"<p>nGQL \u652f\u6301\u6574\u6570\u548c\u6d6e\u70b9\u6570\u3002</p>"},{"location":"3.ngql-guide/3.data-types/1.numeric/#_2","title":"\u6574\u6570","text":"<p>nGQL \u652f\u6301\u5e26\u7b26\u53f7\u7684 64 \u4f4d\u6574\u6570\uff08INT64\uff09\u300132 \u4f4d\u6574\u6570\uff08INT32\uff09\u300116 \u4f4d\u6574\u6570\uff08INT16\uff09\u548c 8 \u4f4d\u6574\u6570\uff08INT8\uff09\u3002</p> \u7c7b\u578b \u58f0\u660e\u5173\u952e\u5b57 \u8303\u56f4 INT64 <code>INT64</code>\u6216<code>INT</code> -9,223,372,036,854,775,808 ~ 9,223,372,036,854,775,807 INT32 <code>INT32</code> -2,147,483,648 ~ 2,147,483,647 INT16 <code>INT16</code> -32,768 ~ 32,767 INT8 <code>INT8</code> -128 ~ 127"},{"location":"3.ngql-guide/3.data-types/1.numeric/#_3","title":"\u6d6e\u70b9\u6570","text":"<p>nGQL \u652f\u6301\u5355\u7cbe\u5ea6\u6d6e\u70b9\uff08FLOAT\uff09\u548c\u53cc\u7cbe\u5ea6\u6d6e\u70b9\uff08DOUBLE\uff09\u3002</p> \u7c7b\u578b \u58f0\u660e\u5173\u952e\u5b57 \u8303\u56f4 \u7cbe\u5ea6 FLOAT <code>FLOAT</code> 3.4E +/- 38 6~7 \u4f4d DOUBLE <code>DOUBLE</code> 1.7E +/- 308 15~16 \u4f4d <p>nGQL \u652f\u6301\u79d1\u5b66\u8ba1\u6570\u6cd5\uff0c\u4f8b\u5982<code>1e2</code>\u3001<code>1.1e2</code>\u3001<code>.3e4</code>\u3001<code>1.e4</code>\u3001<code>-1234E-10</code>\u3002</p> <p>Note</p> <p>\u4e0d\u652f\u6301 MySQL \u4e2d\u7684 DECIMAL \u6570\u636e\u7c7b\u578b\u3002</p>"},{"location":"3.ngql-guide/3.data-types/1.numeric/#_4","title":"\u6570\u503c\u7684\u8bfb\u5199","text":"<p>\u5728\u5199\u5165\u548c\u8bfb\u53d6\u4e0d\u540c\u7c7b\u578b\u7684\u6570\u636e\u65f6\uff0cnGQL \u7684\u884c\u4e3a\u9075\u5b88\u4ee5\u4e0b\u89c4\u5219\uff1a</p> \u6570\u503c\u7c7b\u578b \u8bbe\u7f6e\u4e3a VID \u8bbe\u7f6e\u4e3a\u5c5e\u6027\u7c7b\u578b \u8bfb\u53d6\u8be5\u7c7b\u578b\u7684\u5c5e\u6027\u503c\u5f97\u5230\u7684\u7c7b\u578b INT64 \u652f\u6301 \u652f\u6301 INT64 INT32 \u4e0d\u652f\u6301 \u652f\u6301 INT64 INT16 \u4e0d\u652f\u6301 \u652f\u6301 INT64 INT8 \u4e0d\u652f\u6301 \u652f\u6301 INT64 FLOAT \u4e0d\u652f\u6301 \u652f\u6301 DOUBLE DOUBLE \u4e0d\u652f\u6301 \u652f\u6301 DOUBLE <p>\u4f8b\u5982\uff0cnGQL \u4e0d\u652f\u6301\u8bbe\u7f6e INT8 \u7c7b\u578b\u7684 VID\uff0c\u4f46\u652f\u6301\u5c06 TAG \u6216 Edge type \u7684\u67d0\u4e2a\u5c5e\u6027\u7c7b\u578b\u8bbe\u7f6e\u4e3a INT8\u3002\u5f53\u4f7f\u7528 nGQL \u8bed\u53e5\u8bfb\u53d6 INT8 \u7c7b\u578b\u7684\u5c5e\u6027\u65f6\uff0c\u83b7\u53d6\u5230\u7684\u503c\u7684\u7c7b\u578b\u4e3a INT64\u3002</p> <ul> <li> <p>NebulaGraph \u652f\u6301\u5199\u5165\u591a\u79cd\u8fdb\u5236\u7684\u6570\u503c\uff1a</p> <ul> <li>\u5341\u8fdb\u5236\uff0c\u4f8b\u5982<code>123456</code>\u3002</li> <li>\u5341\u516d\u8fdb\u5236\uff0c\u4f8b\u5982<code>0x1e240</code>\u3002</li> <li>\u516b\u8fdb\u5236\uff0c\u4f8b\u5982<code>0361100</code>\u3002</li> </ul> <p>\u4f46 NebulaGraph \u4f1a\u5c06\u5199\u5165\u7684\u975e\u5341\u8fdb\u5236\u6570\u503c\u89e3\u6790\u4e3a\u5341\u8fdb\u5236\u7684\u503c\u4fdd\u5b58\u3002\u8bfb\u53d6\u5230\u7684\u503c\u4e3a\u5341\u8fdb\u5236\u3002</p> <p>\u4f8b\u5982\uff0c\u5c5e\u6027<code>score</code>\u7684\u7c7b\u578b\u4e3a<code>INT</code>\uff0c\u901a\u8fc7 INSERT \u8bed\u53e5\u4e3a\u5176\u8d4b\u503c<code>0xb</code>\uff0c\u4f7f\u7528 FETCH \u7b49\u8bed\u53e5\u67e5\u8be2\u8be5\u5c5e\u6027\u503c\u83b7\u53d6\u5230\u7684\u7ed3\u679c\u662f<code>11</code>\uff0c\u5373\u5c06\u5341\u516d\u8fdb\u5236\u7684<code>0xb</code>\u8f6c\u6362\u4e3a\u5341\u8fdb\u5236\u540e\u7684\u503c\u3002</p> </li> </ul> <ul> <li>\u5c06 FLOAT/DOUBLE \u7c7b\u578b\u7684\u6570\u503c\u63d2\u5165 INT \u7c7b\u578b\u7684\u5217\uff0c\u4f1a\u5c06\u6570\u503c\u56db\u820d\u4e94\u5165\u53d6\u6574\u3002</li> </ul>"},{"location":"3.ngql-guide/3.data-types/10.geography/","title":"\u5730\u7406\u7a7a\u95f4","text":"<p>\u5730\u7406\u7a7a\u95f4\uff08GEOGRAPHY\uff09\u662f\u7531\u7ecf\u7eac\u5ea6\u6784\u6210\u7684\u8868\u793a\u5730\u7406\u7a7a\u95f4\u4fe1\u606f\u7684\u6570\u636e\u7c7b\u578b\u3002 NebulaGraph \u5f53\u524d\u652f\u6301\u7b80\u5355\u5730\u7406\u8981\u7d20\u4e2d\u7684 Point\u3001LineString \u548c Polygon \u4e09\u79cd\u5730\u7406\u5f62\u72b6\u3002\u652f\u6301 SQL-MM 3 \u4e2d\u7684\u90e8\u5206\u6838\u5fc3 geo \u89e3\u6790\u3001\u6784\u9020\u3001\u683c\u5f0f\u8bbe\u7f6e\u3001\u8f6c\u6362\u3001\u8c13\u8bcd\u548c\u5ea6\u91cf\u7b49\u51fd\u6570\u3002</p>"},{"location":"3.ngql-guide/3.data-types/10.geography/#geography","title":"GEOGRAPHY","text":"<p>GEOGRAPHY \u7684\u57fa\u672c\u7c7b\u578b\u662f\u70b9\uff0c\u7531\u7ecf\u7eac\u5ea6\u786e\u5b9a\u4e00\u4e2a\u70b9\uff0c\u4f8b\u5982<code>\"POINT(3 8)\"</code>\u8868\u793a\u7ecf\u5ea6\u4e3a<code>3\u00b0</code>\uff0c\u7eac\u5ea6\u4e3a<code>8\u00b0</code>\u3002\u591a\u4e2a\u70b9\u53ef\u4ee5\u6784\u6210\u7ebf\u6bb5\u6216\u591a\u8fb9\u5f62\u3002</p> \u7c7b\u578b \u793a\u4f8b \u8bf4\u660e Point <code>\"POINT(3 8)\"</code> \u70b9\u7c7b\u578b LineString <code>\"LINESTRING(3 8, 4.7 73.23)\"</code> \u7ebf\u6bb5\u7c7b\u578b Polygon <code>\"POLYGON((0 1, 1 2, 2 3, 0 1))\"</code> \u591a\u8fb9\u5f62\u7c7b\u578b <p>Note</p> <p>\u8bf7\u52ff\u76f4\u63a5\u63d2\u5165\u4e0a\u8ff0\u7c7b\u578b\u7684 GEOGRAPHY \u6570\u636e\uff0c\u4f8b\u5982<code>INSERT VERTEX any_shape(geo) VALUES \"1\":(\"POINT(1 1)\")</code>\uff0c\u9700\u8981\u4f7f\u7528 geo \u51fd\u6570\u6307\u5b9a\u6570\u636e\u7c7b\u578b\u540e\u624d\u80fd\u63d2\u5165\uff0c\u4f8b\u5982<code>INSERT VERTEX any_shape(geo) VALUES \"1\":(ST_GeogFromText(\"POINT(1 1)\"));</code>\u3002</p>"},{"location":"3.ngql-guide/3.data-types/10.geography/#_2","title":"\u793a\u4f8b","text":"<pre><code>//\u521b\u5efa Tag\uff0c\u5141\u8bb8\u5b58\u50a8\u4efb\u610f\u5f62\u72b6\u5730\u7406\u7a7a\u95f4\u6570\u636e\u7c7b\u578b\u3002\nnebula&gt; CREATE TAG IF NOT EXISTS any_shape(geo geography);\n\n//\u521b\u5efa Tag\uff0c\u53ea\u5141\u8bb8\u5b58\u50a8\u70b9\u5f62\u72b6\u5730\u7406\u7a7a\u95f4\u6570\u636e\u7c7b\u578b\u3002\nnebula&gt; CREATE TAG IF NOT EXISTS only_point(geo geography(point));\n\n//\u521b\u5efa Tag\uff0c\u53ea\u5141\u8bb8\u5b58\u50a8\u7ebf\u6bb5\u5f62\u72b6\u5730\u7406\u7a7a\u95f4\u6570\u636e\u7c7b\u578b\u3002\nnebula&gt; CREATE TAG IF NOT EXISTS only_linestring(geo geography(linestring));\n\n//\u521b\u5efa Tag\uff0c\u53ea\u5141\u8bb8\u5b58\u50a8\u591a\u8fb9\u5f62\u5f62\u72b6\u5730\u7406\u7a7a\u95f4\u6570\u636e\u7c7b\u578b\u3002\nnebula&gt; CREATE TAG IF NOT EXISTS only_polygon(geo geography(polygon));\n\n//\u521b\u5efa Edge type\uff0c\u5141\u8bb8\u5b58\u50a8\u4efb\u610f\u5f62\u72b6\u5730\u7406\u7a7a\u95f4\u6570\u636e\u7c7b\u578b\u3002\nnebula&gt; CREATE EDGE IF NOT EXISTS any_shape_edge(geo geography);\n\n//\u521b\u5efa\u5b58\u50a8\u591a\u8fb9\u5f62\u5730\u7406\u7a7a\u95f4\u7684\u70b9\u3002\nnebula&gt; INSERT VERTEX any_shape(geo) VALUES \"103\":(ST_GeogFromText(\"POLYGON((0 1, 1 2, 2 3, 0 1))\"));\n\n//\u521b\u5efa\u5b58\u50a8\u591a\u8fb9\u5f62\u5730\u7406\u7a7a\u95f4\u7684\u8fb9\u3002\nnebula&gt; INSERT EDGE any_shape_edge(geo) VALUES \"201\"-&gt;\"302\":(ST_GeogFromText(\"POLYGON((0 1, 1 2, 2 3, 0 1))\"));\n\n//\u67e5\u8be2\u70b9 103 \u7684\u5c5e\u6027 geo\u3002\nnebula&gt; FETCH PROP ON any_shape \"103\" YIELD ST_ASText(any_shape.geo);\n+---------------------------------+\n| ST_ASText(any_shape.geo)        |\n+---------------------------------+\n| \"POLYGON((0 1, 1 2, 2 3, 0 1))\" |\n+---------------------------------+\n\n//\u67e5\u8be2\u8fb9 201-&gt;302 \u7684\u5c5e\u6027 geo\u3002\nnebula&gt; FETCH PROP ON any_shape_edge \"201\"-&gt;\"302\" YIELD ST_ASText(any_shape_edge.geo);\n+---------------------------------+\n| ST_ASText(any_shape_edge.geo)   |\n+---------------------------------+\n| \"POLYGON((0 1, 1 2, 2 3, 0 1))\" |\n+---------------------------------+\n\n//\u4e3a geo \u5c5e\u6027\u521b\u5efa\u7d22\u5f15\u5e76\u4f7f\u7528 LOOKUP \u67e5\u8be2\u3002\nnebula&gt; CREATE TAG INDEX IF NOT EXISTS any_shape_geo_index ON any_shape(geo);\nnebula&gt; REBUILD TAG INDEX any_shape_geo_index;\nnebula&gt; LOOKUP ON any_shape YIELD ST_ASText(any_shape.geo);\n+---------------------------------+\n| ST_ASText(any_shape.geo)        |\n+---------------------------------+\n| \"POLYGON((0 1, 1 2, 2 3, 0 1))\" |\n+---------------------------------+\n</code></pre> <p>\u4e3a geo \u5c5e\u6027\u521b\u5efa\u7d22\u5f15\u65f6\uff0c\u8fd8\u53ef\u4ee5\u6307\u5b9a geo \u7d22\u5f15\u7684\u53c2\u6570\u3002\u8bf4\u660e\u5982\u4e0b\u3002</p> \u53c2\u6570 \u9ed8\u8ba4\u503c \u8bf4\u660e <code>s2_max_level</code> <code>30</code> S2 cell \u7528\u4e8e\u586b\u5145\u7684\u6700\u5927\u7b49\u7ea7\u3002\u53d6\u503c\uff1a<code>1</code>~<code>30</code>\u3002\u8bbe\u7f6e\u4e3a\u5c0f\u4e8e\u9ed8\u8ba4\u503c\u65f6\uff0c\u610f\u5473\u7740\u4f1a\u4f7f\u7528\u8f83\u5927\u7684\u5355\u5143\u683c\u8fdb\u884c\u586b\u5145\u3002 <code>s2_max_cells</code> <code>8</code> S2 cell \u7528\u4e8e\u586b\u5145\u7684\u6700\u5927\u6570\u91cf\uff0c\u53ef\u4ee5\u9650\u5236\u586b\u5145\u65f6\u7684\u5de5\u4f5c\u91cf\u3002\u53d6\u503c\uff1a<code>1</code>~<code>30</code>\u3002\u5bf9\u4e8e\u590d\u6742\u5f62\u72b6\u7684\u533a\u57df\uff08\u4f8b\u5982\u7ec6\u77e9\u5f62\uff09\uff0c\u53ef\u4ee5\u4f7f\u7528\u66f4\u5927\u7684\u503c\u3002 <p>Note</p> <p>\u6307\u5b9a\u5982\u4e0a\u4e24\u4e2a\u53c2\u6570\u5bf9 Point \u7c7b\u578b\u5c5e\u6027\u6ca1\u6709\u5f71\u54cd\uff0cPoint \u7c7b\u578b\u5c5e\u6027\u7684<code>s2_max_level</code>\u5f3a\u5236\u4e3a<code>30</code>\u3002</p> <pre><code>nebula&gt; CREATE TAG INDEX IF NOT EXISTS any_shape_geo_index ON any_shape(geo) with (s2_max_level=30, s2_max_cells=8);\n</code></pre> <p>\u66f4\u591a\u7d22\u5f15\u8bf4\u660e\u8bf7\u53c2\u89c1\u7d22\u5f15\u4ecb\u7ecd\u3002</p>"},{"location":"3.ngql-guide/3.data-types/2.boolean/","title":"\u5e03\u5c14","text":"<p>NebulaGraph \u4f7f\u7528\u5173\u952e\u5b57<code>BOOL</code>\u58f0\u660e\u5e03\u5c14\u6570\u636e\u7c7b\u578b\uff0c\u53ef\u9009\u503c\u4e3a<code>true</code>\u6216<code>false</code>\u3002</p> <p>nGQL \u652f\u6301\u4ee5\u5982\u4e0b\u65b9\u5f0f\u4f7f\u7528\u5e03\u5c14\u503c\uff1a</p> <ul> <li>\u5c06\u5c5e\u6027\u503c\u7684\u6570\u636e\u7c7b\u578b\u5b9a\u4e49\u4e3a\u5e03\u5c14\u3002</li> <li>\u5728<code>WHERE</code>\u5b50\u53e5\u4e2d\u7528\u5e03\u5c14\u503c\u4f5c\u4e3a\u5224\u65ad\u6761\u4ef6\u3002</li> </ul>"},{"location":"3.ngql-guide/3.data-types/3.string/","title":"\u5b57\u7b26\u4e32","text":"<p>NebulaGraph \u652f\u6301\u5b9a\u957f\u5b57\u7b26\u4e32\u548c\u53d8\u957f\u5b57\u7b26\u4e32\u3002</p>"},{"location":"3.ngql-guide/3.data-types/3.string/#_2","title":"\u58f0\u660e\u4e0e\u8868\u793a\u65b9\u5f0f","text":"<p>nGQL \u4e2d\u7684\u5b57\u7b26\u4e32\u58f0\u660e\u65b9\u5f0f\u5982\u4e0b\uff1a</p> <ul> <li>\u4f7f\u7528\u5173\u952e\u5b57<code>STRING</code>\u58f0\u660e\u53d8\u957f\u5b57\u7b26\u4e32\u3002</li> <li>\u4f7f\u7528\u5173\u952e\u5b57<code>FIXED_STRING(&lt;length&gt;)</code>\u58f0\u660e\u5b9a\u957f\u5b57\u7b26\u4e32\uff0c<code>&lt;length&gt;</code>\u4e3a\u5b57\u7b26\u4e32\u957f\u5ea6\uff0c\u4f8b\u5982<code>FIXED_STRING(32)</code>\u3002</li> </ul> <p>\u5b57\u7b26\u4e32\u7684\u8868\u793a\u65b9\u5f0f\u4e3a\u7528\u53cc\u5f15\u53f7\u6216\u5355\u5f15\u53f7\u5305\u88f9\uff0c\u4f8b\u5982<code>\"Hello, Cooper\"</code>\u6216<code>'Hello, Cooper'</code>\u3002</p>"},{"location":"3.ngql-guide/3.data-types/3.string/#_3","title":"\u5b57\u7b26\u4e32\u8bfb\u5199","text":"<p>nGQL \u652f\u6301\u4ee5\u5982\u4e0b\u65b9\u5f0f\u4f7f\u7528\u5b57\u7b26\u4e32\uff1a</p> <ul> <li>\u5c06 VID \u7684\u6570\u636e\u7c7b\u578b\u5b9a\u4e49\u4e3a\u5b9a\u957f\u5b57\u7b26\u4e32\u3002</li> <li>\u5c06\u53d8\u957f\u5b57\u7b26\u4e32\u8bbe\u7f6e\u4e3a Schema \u540d\u79f0\uff0c\u5305\u62ec\u56fe\u7a7a\u95f4\u3001Tag\u3001Edge type \u548c\u5c5e\u6027\u7684\u540d\u79f0\u3002</li> <li>\u5c06\u5c5e\u6027\u503c\u7684\u6570\u636e\u7c7b\u578b\u5b9a\u4e49\u4e3a\u5b9a\u957f\u6216\u53d8\u957f\u5b57\u7b26\u4e32\u3002</li> </ul> <p>\u4f8b\u5982\uff1a</p> <ul> <li>\u5c06\u5c5e\u6027\u503c\u7684\u7c7b\u578b\u5b9a\u4e49\u4e3a\u5b9a\u957f\u5b57\u7b26\u4e32<pre><code>nebula&gt; CREATE TAG IF NOT EXISTS t1 (p1 FIXED_STRING(10)); \n</code></pre> </li> </ul> <ul> <li>\u5c06\u5c5e\u6027\u503c\u7684\u7c7b\u578b\u5b9a\u4e49\u4e3a\u53d8\u957f\u5b57\u7b26\u4e32<pre><code>nebula&gt; CREATE TAG IF NOT EXISTS t2 (p2 STRING); \n</code></pre> </li> </ul> <p>\u5982\u679c\u5c1d\u8bd5\u5199\u5165\u7684\u5b9a\u957f\u5b57\u7b26\u4e32\u8d85\u51fa\u957f\u5ea6\u9650\u5236\uff1a</p> <ul> <li>\u5f53\u8be5\u5b9a\u957f\u5b57\u7b26\u4e32\u4e3a\u5c5e\u6027\u503c\u65f6\uff0c\u5199\u5165\u4f1a\u6210\u529f\uff0cNebulaGraph \u5c06\u622a\u65ad\u5b57\u7b26\u4e32\uff0c\u4ec5\u5b58\u5165\u7b26\u5408\u957f\u5ea6\u9650\u5236\u7684\u90e8\u5206\u3002</li> <li>\u5f53\u8be5\u5b9a\u957f\u5b57\u7b26\u4e32\u4e3a VID \u65f6\uff0c\u5199\u5165\u4f1a\u5931\u8d25\uff0cNebulaGraph \u5c06\u62a5\u9519\u3002</li> </ul>"},{"location":"3.ngql-guide/3.data-types/3.string/#_4","title":"\u8f6c\u4e49\u5b57\u7b26","text":"<p>\u53cd\u659c\u6760\uff08<code>\\</code>\uff09\u5728\u5b57\u7b26\u4e32\u4e2d\u4e3a\u8f6c\u4e49\u5b57\u7b26\uff0c\u7528\u4e8e\u8868\u793a\u7279\u6b8a\u5b57\u7b26\u3002</p> <p>\u4f8b\u5982\uff0c\u5982\u679c\u60f3\u5728\u4e00\u4e2a\u5b57\u7b26\u4e32\u4e2d\u5305\u542b\u4e00\u4e2a\u53cc\u5f15\u53f7(<code>\"</code>), \u4e0d\u80fd\u76f4\u63a5\u5199<code>\"Hello \"world\"\"</code>\uff0c\u56e0\u4e3a\u8fd9\u4f1a\u5f15\u8d77\u8bed\u6cd5\u9519\u8bef\u3002\u76f8\u53cd\uff0c\u9700\u8981\u4f7f\u7528\u53cd\u659c\u6760\uff08<code>\\</code>\uff09\u6765\u8f6c\u4e49\u53cc\u5f15\u53f7\uff0c\u5982<code>\"Hello \\\"world\\\"\"</code>\u3002</p> <pre><code>nebula&gt; RETURN \"Hello \\\"world\\\"\"\n+-----------------+\n| \"Hello \"world\"\" |\n+-----------------+\n| \"Hello \"world\"\" |\n+-----------------+\n</code></pre> <p>\u540c\u6837\uff0c\u53cd\u659c\u6760\u672c\u8eab\u4e5f\u9700\u8981\u8f6c\u4e49\uff0c\u56e0\u4e3a\u5b83\u662f\u4e00\u4e2a\u7279\u6b8a\u5b57\u7b26\u3002\u4f8b\u5982\uff0c\u8981\u5728\u5b57\u7b26\u4e32\u4e2d\u5305\u542b\u4e00\u4e2a\u53cd\u659c\u6760\uff0c\u9700\u8981\u5199\u6210<code>\"Hello \\\\ world\"</code>\u3002</p> <pre><code>nebula&gt; RETURN \"Hello \\\\ world\"\n+-----------------+\n| \"Hello \\ world\" |\n+-----------------+\n| \"Hello \\ world\" |\n+-----------------+\n</code></pre> <p>\u66f4\u591a\u8f6c\u4e49\u5b57\u7b26\u7684\u793a\u4f8b\uff0c\u8bf7\u53c2\u89c1 Escape character examples\u3002</p>"},{"location":"3.ngql-guide/3.data-types/3.string/#opencypher","title":"OpenCypher \u517c\u5bb9\u6027","text":"<p>openCypher\u3001Cypher \u548c nGQL \u4e4b\u95f4\u6709\u4e00\u4e9b\u7ec6\u5fae\u533a\u522b\uff0c\u4f8b\u5982\u4e0b\u9762 openCypher \u7684\u793a\u4f8b\uff0c\u4e0d\u80fd\u5c06\u5355\u5f15\u53f7\u66ff\u6362\u4e3a\u53cc\u5f15\u53f7\u3002</p> <pre><code># File: Literals.feature\nFeature: Literals\n\nBackground:\n    Given any graph\n Scenario: Return a single-quoted string\n    When executing query:\n      \"\"\"\n      RETURN '' AS literal\n      \"\"\"\n    Then the result should be, in any order:\n      | literal |\n      | ''      |    # Note: it should return single-quotes as openCypher required.\n    And no side effects\n</code></pre> <p>Cypher \u7684\u8fd4\u56de\u7ed3\u679c\u540c\u65f6\u652f\u6301\u5355\u5f15\u53f7\u548c\u53cc\u5f15\u53f7\uff0cnGQL \u9075\u5faa Cypher \u7684\u65b9\u5f0f\u3002</p> <pre><code>nebula &gt; YIELD '' AS quote1, \"\" AS quote2, \"'\" AS quote3, '\"' AS quote4\n+--------+--------+--------+--------+\n| quote1 | quote2 | quote3 | quote4 |\n+--------+--------+--------+--------+\n| \"\"     | \"\"     | \"'\"    | \"\"\"    |\n+--------+--------+--------+--------+\n</code></pre>"},{"location":"3.ngql-guide/3.data-types/4.date-and-time/","title":"\u65e5\u671f\u548c\u65f6\u95f4\u7c7b\u578b","text":"<p>\u672c\u6587\u4ecb\u7ecd\u65e5\u671f\u548c\u65f6\u95f4\u7684\u7c7b\u578b\uff0c\u5305\u62ec<code>DATE</code>\u3001<code>TIME</code>\u3001<code>DATETIME</code>\u3001<code>TIMESTAMP</code>\u548c<code>DURATION</code>\u3002</p>"},{"location":"3.ngql-guide/3.data-types/4.date-and-time/#_2","title":"\u6ce8\u610f\u4e8b\u9879","text":"<ul> <li> <p>\u5728\u63d2\u5165\u65f6\u95f4\u7c7b\u578b\u7684\u5c5e\u6027\u503c\u65f6\uff0cNebulaGraph \u4f1a\u6839\u636e\u914d\u7f6e\u6587\u4ef6\u4e2d<code>timezone_name</code>\u53c2\u6570\u6307\u5b9a\u7684\u65f6\u533a\uff0c\u5c06\u8be5<code>DATE</code>\u3001<code>TIME</code>\u3001<code>DATETIME</code>\u8f6c\u6362\u6210\u76f8\u5e94\u7684\u4e16\u754c\u534f\u8c03\u65f6\u95f4\uff08UTC\uff09\u65f6\u95f4\u3002</p> <p>Note</p> <p>\u5982\u9700\u4fee\u6539\u5f53\u524d\u65f6\u533a\uff0c\u8bf7\u540c\u65f6\u4fee\u6539\u6240\u6709\u670d\u52a1\u7684\u914d\u7f6e\u6587\u4ef6\u4e2d\u7684<code>timezone_name</code>\u53c2\u6570\u3002</p> </li> </ul> <ul> <li>\u51fd\u6570<code>date()</code>\u3001<code>time()</code>\u548c<code>datetime()</code>\u53ef\u4ee5\u6307\u5b9a\u65f6\u533a\u8fdb\u884c\u8f6c\u6362\uff0c\u4f8b\u5982<code>datetime(\"2017-03-04 22:30:40.003000+08:00\")</code>\u6216<code>datetime(\"2017-03-04T22:30:40.003000[Asia/Shanghai]\")</code>\u3002</li> </ul> <ul> <li>\u51fd\u6570<code>date()</code>\u3001<code>time()</code>\u3001<code>datetime()</code>\u548c<code>timestamp()</code>\u53ef\u4ee5\u7528\u7a7a\u503c\u83b7\u53d6\u5f53\u524d\u7684\u65e5\u671f\u6216\u65f6\u95f4\u3002</li> </ul> <ul> <li>\u51fd\u6570<code>date()</code>\u3001<code>time()</code>\u3001<code>datetime()</code>\u548c<code>duration()</code>\u53ef\u4ee5\u7528\u5c5e\u6027\u540d\u79f0\u83b7\u53d6\u81ea\u8eab\u7684\u67d0\u4e00\u4e2a\u5177\u4f53\u5c5e\u6027\u503c\uff0c\u4f8b\u5982<code>date().month</code>\u83b7\u53d6\u5f53\u524d\u6708\u4efd\u3001<code>time(\"02:59:40\").minute</code>\u83b7\u53d6\u4f20\u5165\u65f6\u95f4\u7684\u5206\u949f\u6570\u3002</li> </ul> <ul> <li>\u8fdb\u884c\u65f6\u95f4\u8fd0\u7b97\u65f6\u5efa\u8bae\u4f7f\u7528<code>duration()</code>\u8ba1\u7b97\u65f6\u523b\u7684\u504f\u79fb\u3002\u6b64\u5916\u8fd8\u652f\u6301<code>date()</code>\u548c<code>date()</code>\u7684\u52a0\u51cf\u3001<code>timestamp()</code>\u548c<code>timestamp()</code>\u7684\u52a0\u51cf\u3002</li> </ul> <ul> <li>\u8bbe\u7f6e\u65f6\u95f4\u7684\u5e74\u4efd\u4e3a\u8d1f\u6570\u65f6\uff0c\u9700\u8981\u4f7f\u7528 Map \u7c7b\u578b\u6570\u636e\u3002</li> </ul>"},{"location":"3.ngql-guide/3.data-types/4.date-and-time/#opencypher","title":"openCypher \u517c\u5bb9\u6027","text":"<ul> <li>\u652f\u6301\u5e74\u3001\u6708\u3001\u65e5\u3001\u65f6\u3001\u5206\u3001\u79d2\u3001\u6beb\u79d2\u3001\u5fae\u79d2\uff0c\u4e0d\u652f\u6301\u7eb3\u79d2\u3002</li> </ul> <ul> <li>\u4e0d\u652f\u6301\u51fd\u6570<code>localdatetime()</code>\u3002</li> </ul> <ul> <li>\u4e0d\u652f\u6301\u5927\u90e8\u5206\u5b57\u7b26\u4e32\u65f6\u95f4\u683c\u5f0f\uff0c\u652f\u6301<code>YYYY-MM-DDThh:mm:ss</code>\u548c<code>YYYY-MM-DD hh:mm:ss</code>\u3002</li> </ul> <ul> <li>\u652f\u6301\u5355\u4e2a\u6570\u5b57\u7684\u5b57\u7b26\u4e32\u65f6\u95f4\u683c\u5f0f\uff0c\u4f8b\u5982<code>time(\"1:1:1\")</code>\u3002</li> </ul>"},{"location":"3.ngql-guide/3.data-types/4.date-and-time/#date","title":"DATE","text":"<p><code>DATE</code>\u5305\u542b\u65e5\u671f\uff0c\u4f46\u662f\u4e0d\u5305\u542b\u65f6\u95f4\u3002 NebulaGraph \u68c0\u7d22\u548c\u663e\u793a<code>DATE</code>\u7684\u683c\u5f0f\u4e3a<code>YYYY-MM-DD</code>\u3002\u652f\u6301\u7684\u8303\u56f4\u662f<code>-32768-01-01</code>\u5230<code>32767-12-31</code>\u3002</p> <p><code>date()</code>\u652f\u6301\u7684\u5c5e\u6027\u540d\u79f0\u5305\u62ec<code>year</code>\u3001<code>month</code>\u548c<code>day</code>\u3002<code>date()</code>\u652f\u6301\u8f93\u5165<code>YYYY</code>\u3001<code>YYYY-MM</code>\u6216<code>YYYY-MM-DD</code>\uff0c\u672a\u8f93\u5165\u7684\u6708\u4efd\u6216\u65e5\u671f\u9ed8\u8ba4\u4e3a<code>01</code>\u3002</p> <pre><code>nebula&gt; RETURN DATE({year:-123, month:12, day:3});\n+------------------------------------+\n| date({year:-(123),month:12,day:3}) |\n+------------------------------------+\n| -123-12-03                         |\n+------------------------------------+\n\nnebula&gt; RETURN DATE(\"23333\");\n+---------------+\n| date(\"23333\") |\n+---------------+\n| 23333-01-01   |\n+---------------+\n\nnebula&gt; RETURN DATE(\"2023-12-12\") - DATE(\"2023-12-11\");\n+-----------------------------------------+\n| (date(\"2023-12-12\")-date(\"2023-12-11\")) |\n+-----------------------------------------+\n| 1                                       |\n+-----------------------------------------+\n</code></pre>"},{"location":"3.ngql-guide/3.data-types/4.date-and-time/#time","title":"TIME","text":"<p><code>TIME</code>\u5305\u542b\u65f6\u95f4\uff0c\u4f46\u662f\u4e0d\u5305\u542b\u65e5\u671f\u3002 NebulaGraph \u68c0\u7d22\u548c\u663e\u793a<code>TIME</code>\u7684\u683c\u5f0f\u4e3a<code>hh:mm:ss.msmsmsususus</code>\u3002\u652f\u6301\u7684\u8303\u56f4\u662f<code>00:00:00.000000</code>\u5230<code>23:59:59.999999</code>\u3002</p> <p><code>time()</code>\u652f\u6301\u7684\u5c5e\u6027\u540d\u79f0\u5305\u62ec<code>hour</code>\u3001<code>minute</code>\u548c<code>second</code>\u3002</p>"},{"location":"3.ngql-guide/3.data-types/4.date-and-time/#datetime","title":"DATETIME","text":"<p><code>DATETIME</code>\u5305\u542b\u65e5\u671f\u548c\u65f6\u95f4\u3002 NebulaGraph \u68c0\u7d22\u548c\u663e\u793a<code>DATETIME</code>\u7684\u683c\u5f0f\u4e3a<code>YYYY-MM-DDThh:mm:ss.msmsmsususus</code>\u3002\u652f\u6301\u7684\u8303\u56f4\u662f<code>-32768-01-01T00:00:00.000000</code>\u5230<code>32767-12-31T23:59:59.999999</code>\u3002</p> <ul> <li><code>datetime()</code>\u652f\u6301\u7684\u5c5e\u6027\u540d\u79f0\u5305\u62ec<code>year</code>\u3001<code>month</code>\u3001<code>day</code>\u3001<code>hour</code>\u3001<code>minute</code>\u548c<code>second</code>\u3002</li> </ul> <ul> <li><code>datetime()</code>\u53ef\u5c06<code>TIMESTAMP</code>\u7c7b\u578b\u7684\u65e5\u671f\u503c\u8f6c\u6362\u6210<code>DATETIME</code>\u7c7b\u578b\u7684\u65e5\u671f\u503c\u3002<code>TIMESTAMP</code>\u7c7b\u578b\u7684\u65e5\u671f\u503c\u53d6\u503c\u8303\u56f4\uff1a<code>0~9223372036</code>\u3002</li> </ul> <ul> <li><code>datetime()</code>\u652f\u6301<code>int</code>\u7c7b\u578b\u7684\u53c2\u6570\uff0c\u8be5<code>int</code>\u53c2\u6570\u8868\u793a\u65f6\u95f4\u6233\u3002</li> </ul> <pre><code># \u83b7\u53d6\u5f53\u524d\u65f6\u95f4\u3002\nnebula&gt; RETURN datetime();\n+----------------------------+\n| datetime()                 |\n+----------------------------+\n| 2022-08-29T06:37:08.933000 |\n+----------------------------+\n\n# \u83b7\u53d6\u5f53\u524d\u65f6\u95f4\u7684\u5c0f\u65f6\u3002\nnebula&gt; RETURN datetime().hour;\n+-----------------+\n| datetime().hour |\n+-----------------+\n| 6               |\n+-----------------+\n\n# \u5c06\u65f6\u95f4\u6233\u8f6c\u6362\u6210 DATETIME \u7c7b\u578b\u7684\u683c\u5f0f\u3002\nnebula&gt; RETURN datetime(timestamp(1625469277));\n+---------------------------------+\n| datetime(timestamp(1625469277)) |\n+---------------------------------+\n| 2021-07-05T07:14:37.000000      |\n+---------------------------------+\n\nnebula&gt; RETURN datetime(1625469277);\n+----------------------------+\n| datetime(1625469277)       |\n+----------------------------+\n| 2021-07-05T07:14:37.000000 |\n+----------------------------+\n</code></pre>"},{"location":"3.ngql-guide/3.data-types/4.date-and-time/#timestamp","title":"TIMESTAMP","text":"<p><code>TIMESTAMP</code>\u5305\u542b\u65e5\u671f\u548c\u65f6\u95f4\u3002\u652f\u6301\u7684\u8303\u56f4\u662f UTC \u65f6\u95f4\u7684<code>1970-01-01T00:00:01</code>\u5230<code>2262-04-11T23:47:16</code>\u3002</p> <p><code>TIMESTAMP</code>\u8fd8\u6709\u4ee5\u4e0b\u7279\u70b9\uff1a</p> <ul> <li>\u4ee5\u65f6\u95f4\u6233\u5f62\u5f0f\u5b58\u50a8\u548c\u663e\u793a\u3002\u4f8b\u5982<code>1615974839</code>\uff0c\u8868\u793a<code>2021-03-17T17:53:59</code>\u3002</li> </ul> <ul> <li>\u67e5\u8be2<code>TIMESTAMP</code>\u7c7b\u578b\u5c5e\u6027\u503c\u7684\u65b9\u5f0f\u5305\u62ec\u65f6\u95f4\u6233\u6574\u6570\u548c<code>timestamp()</code>\u51fd\u6570\u3002</li> </ul> <ul> <li>\u63d2\u5165<code>TIMESTAMP</code>\u7c7b\u578b\u5c5e\u6027\u503c\u7684\u65b9\u5f0f\u5305\u62ec\u65f6\u95f4\u6233\u6574\u6570\u3001<code>timestamp()</code>\u51fd\u6570\u548c<code>now()</code>\u51fd\u6570\u3002</li> </ul> <ul> <li><code>timestamp()</code>\u51fd\u6570\u652f\u6301\u4f20\u5165\u7a7a\u503c\u83b7\u53d6\u5f53\u524d\u65f6\u95f4\u6233\uff1b\u540c\u65f6\u652f\u6301\u4f20\u5165\u6574\u6570\u4ee5\u6807\u8bc6\u8be5\u6574\u6570\u4e3a\u65f6\u95f4\u6233\uff0c\u6574\u6570\u53d6\u503c\uff1a<code>0~9223372036</code>\u3002</li> </ul> <ul> <li><code>timestamp()</code>\u51fd\u6570\u53ef\u5c06<code>DATETIME</code>\u7c7b\u578b\u7684\u65e5\u671f\u503c\u8f6c\u6362\u6210<code>TIMESTAMP</code>\u7c7b\u578b\u7684\u65e5\u671f\u503c\uff0c\u4e14\u4f20\u5165\u7684<code>DATETIME</code>\u7c7b\u578b\u7684\u65e5\u671f\u503c\u4e3a<code>string</code>\u7c7b\u578b\u3002</li> </ul> <ul> <li>\u5e95\u5c42\u5b58\u50a8\u7684\u6570\u636e\u683c\u5f0f\u4e3a 64 \u4f4d int\u3002</li> </ul> <pre><code># \u4f20\u5165\u5f53\u524d\u65f6\u95f4\u3002\nnebula&gt; RETURN timestamp();\n+-------------+\n| timestamp() |\n+-------------+\n| 1625469277  |\n+-------------+\n\n# \u4f20\u5165\u6307\u5b9a\u65f6\u95f4\u3002\nnebula&gt; RETURN timestamp(\"2022-01-05T06:18:43\");\n+----------------------------------+\n| timestamp(\"2022-01-05T06:18:43\") |\n+----------------------------------+\n| 1641363523                       |\n+----------------------------------+\n\n# \u4f20\u5165 datetime()\u3002\nnebula&gt; RETURN timestamp(datetime(\"2022-08-29T07:53:10.939000\"));\n+---------------------------------------------------+\n| timestamp(datetime(\"2022-08-29T07:53:10.939000\")) |\n+---------------------------------------------------+\n| 1661759590                                        |\n+---------------------------------------------------+    \n</code></pre> <p>Note</p> <p>\u4f20\u5165<code>timestamp()</code>\u51fd\u6570\u7684\u65f6\u95f4\u5b57\u7b26\u4e32\u4e0d\u652f\u6301\u5305\u542b\u6beb\u79d2\u548c\u5fae\u79d2\uff0c\u4f46\u662f\u901a\u8fc7<code>timestamp(datetime())</code>\u4f20\u5165\u7684\u65f6\u95f4\u5b57\u7b26\u4e32\u652f\u6301\u5305\u542b\u6beb\u79d2\u548c\u5fae\u79d2\u3002</p>"},{"location":"3.ngql-guide/3.data-types/4.date-and-time/#duration","title":"DURATION","text":"<p><code>DURATION</code>\u662f\u4e00\u6bb5\u8fde\u7eed\u7684\u65f6\u95f4\uff0c\u7531<code>years</code>\u3001<code>months</code>\u3001<code>days</code>\u3001<code>hours</code>\u3001<code>minutes</code>\u3001<code>seconds</code>\u516d\u4e2aKey\u81ea\u7531\u7ec4\u5408\u6210\u7684Map\u7c7b\u578b\u6570\u636e\u8868\u793a\u3002\u4f8b\u5982<code>duration({years: 12, months: 5, days: 14, hours: 16, minutes: 12, seconds: 70})</code>\u3002</p> <p><code>DURATION</code>\u8fd8\u6709\u4ee5\u4e0b\u7279\u70b9\uff1a</p> <ul> <li>\u4e0d\u652f\u6301\u4e3a<code>DURATION</code>\u7c7b\u578b\u6570\u636e\u521b\u5efa\u7d22\u5f15\u3002</li> </ul> <ul> <li>\u53ef\u4ee5\u7528\u4e8e\u5bf9\u6307\u5b9a\u65f6\u95f4\u8fdb\u884c\u8ba1\u7b97\u3002</li> </ul>"},{"location":"3.ngql-guide/3.data-types/4.date-and-time/#_3","title":"\u793a\u4f8b","text":"<ol> <li> <p>\u521b\u5efa Tag\uff0c\u540d\u79f0\u4e3a<code>date1</code>\uff0c\u5305\u542b<code>DATE</code>\u3001<code>TIME</code>\u548c<code>DATETIME</code>\u4e09\u79cd\u7c7b\u578b\u3002</p> <pre><code>nebula&gt; CREATE TAG IF NOT EXISTS date1(p1 date, p2 time, p3 datetime);\n</code></pre> </li> <li> <p>\u63d2\u5165\u70b9\uff0c\u540d\u79f0\u4e3a<code>test1</code>\u3002</p> <pre><code>nebula&gt; INSERT VERTEX date1(p1, p2, p3) VALUES \"test1\":(date(\"2021-03-17\"), time(\"17:53:59\"), datetime(\"2017-03-04T22:30:40.003000[Asia/Shanghai]\"));\n</code></pre> </li> <li> <p>\u67e5\u8be2<code>test1</code>\u7684\u5c5e\u6027<code>p1</code>\u662f\u5426\u4e3a<code>2021-03-17</code>\u3002</p> <pre><code>nebula&gt; MATCH (v:date1) RETURN v.date1.p1 == date(\"2021-03-17\");\n+----------------------------------+\n| (v.date1.p1==date(\"2021-03-17\")) |\n+----------------------------------+\n| true                             |\n+----------------------------------+\n</code></pre> </li> <li> <p>\u83b7\u53d6<code>test1</code>\u7684\u5c5e\u6027<code>p1</code>\u7684\u6708\u4efd\u3002</p> <pre><code>nebula&gt; CREATE TAG INDEX IF NOT EXISTS date1_index ON date1(p1);\nnebula&gt; REBUILD TAG INDEX date1_index;\nnebula&gt; MATCH (v:date1) RETURN v.date1.p1.month;\n+------------------+\n| v.date1.p1.month |\n+------------------+\n| 3                |\n+------------------+\n</code></pre> </li> <li> <p>\u67e5\u627e Tag <code>date1</code>\u4e2d\u5c5e\u6027<code>p3</code>\u5c0f\u4e8e<code>2023-01-01T00:00:00.000000</code>\u7684\u503c\u3002</p> <pre><code>nebula&gt; MATCH (v:date1)  \\\nWHERE v.date1.p3 &lt; datetime(\"2023-01-01T00:00:00.000000\") \\\nRETURN v.date1.p3;\n+----------------------------+\n| v.date1.p3                 |\n+----------------------------+\n| 2017-03-04T14:30:40.003000 |\n+----------------------------+\n</code></pre> </li> <li> <p>\u521b\u5efa Tag\uff0c\u540d\u79f0\u4e3a<code>school</code>\uff0c\u5305\u542b<code>TIMESTAMP</code>\u7c7b\u578b\u3002</p> <pre><code>nebula&gt; CREATE TAG IF NOT EXISTS school(name string , found_time timestamp);\n</code></pre> </li> <li> <p>\u63d2\u5165\u70b9\uff0c\u540d\u79f0\u4e3a<code>DUT</code>\uff0c\u5b58\u50a8\u65f6\u95f4\u4e3a<code>\"1988-03-01T08:00:00\"</code>\u3002</p> <pre><code># \u65f6\u95f4\u6233\u5f62\u5f0f\u63d2\u5165\uff0c1988-03-01T08:00:00 \u5bf9\u5e94\u7684\u65f6\u95f4\u6233\u4e3a 573177600\uff0c\u8f6c\u6362\u4e3a UTC \u65f6\u95f4\u4e3a 573206400\u3002\nnebula&gt; INSERT VERTEX school(name, found_time) VALUES \"DUT\":(\"DUT\", 573206400);\n\n# \u65e5\u671f\u548c\u65f6\u95f4\u683c\u5f0f\u63d2\u5165\u3002\nnebula&gt; INSERT VERTEX school(name, found_time) VALUES \"DUT\":(\"DUT\", timestamp(\"1988-03-01T08:00:00\"));\n</code></pre> </li> <li> <p>\u63d2\u5165\u70b9\uff0c\u540d\u79f0\u4e3a<code>dut</code>\uff0c\u7528<code>now()</code>\u6216<code>timestamp()</code>\u51fd\u6570\u5b58\u50a8\u65f6\u95f4\u3002</p> <pre><code># \u7528 now() \u51fd\u6570\u5b58\u50a8\u65f6\u95f4\nnebula&gt; INSERT VERTEX school(name, found_time) VALUES \"dut\":(\"dut\", now());\n\n# \u7528 timestamp() \u51fd\u6570\u5b58\u50a8\u65f6\u95f4\nnebula&gt; INSERT VERTEX school(name, found_time) VALUES \"dut\":(\"dut\", timestamp());\n</code></pre> </li> </ol> <p>\u8fd8\u53ef\u4ee5\u4f7f\u7528<code>WITH</code>\u8bed\u53e5\u8bbe\u7f6e\u5177\u4f53\u65e5\u671f\u65f6\u95f4\u6216\u8fdb\u884c\u8ba1\u7b97\uff0c\u4f8b\u5982\uff1a</p> <pre><code>nebula&gt; WITH time({hour: 12, minute: 31, second: 14, millisecond:111, microsecond: 222}) AS d RETURN d;\n+-----------------+\n| d               |\n+-----------------+\n| 12:31:14.111222 |\n+-----------------+\n\nnebula&gt; WITH date({year: 1984, month: 10, day: 11}) AS x RETURN x + 1;\n+------------+\n| (x+1)      |\n+------------+\n| 1984-10-12 |\n+------------+\n\nnebula&gt; WITH date('1984-10-11') as x, duration({years: 12, days: 14, hours: 99, minutes: 12}) as d \\\n        RETURN x + d AS sum, x - d AS diff;\n+------------+------------+\n| sum        | diff       |\n+------------+------------+\n| 1996-10-29 | 1972-09-23 |\n+------------+------------+\n</code></pre>"},{"location":"3.ngql-guide/3.data-types/5.null/","title":"NULL","text":"<p>\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u63d2\u5165\u70b9\u6216\u8fb9\u65f6\uff0c\u5c5e\u6027\u503c\u53ef\u4ee5\u4e3a<code>NULL</code>\uff0c\u7528\u6237\u4e5f\u53ef\u4ee5\u8bbe\u7f6e\u5c5e\u6027\u503c\u4e0d\u5141\u8bb8\u4e3a<code>NULL</code>\uff08<code>NOT NULL</code>\uff09\uff0c\u5373\u63d2\u5165\u70b9\u6216\u8fb9\u65f6\u5fc5\u987b\u8bbe\u7f6e\u8be5\u5c5e\u6027\u7684\u503c\uff0c\u9664\u975e\u521b\u5efa\u5c5e\u6027\u65f6\u5df2\u7ecf\u8bbe\u7f6e\u9ed8\u8ba4\u503c\u3002</p>"},{"location":"3.ngql-guide/3.data-types/5.null/#null_1","title":"NULL \u7684\u903b\u8f91\u64cd\u4f5c","text":"<p><code>AND</code>\u3001<code>OR</code>\u3001<code>XOR</code>\u548c<code>NOT</code>\u7684\u771f\u503c\u8868\u5982\u4e0b\u3002</p> a b a AND b a OR b a XOR b NOT a false false false false false true false null false null null true false true false true true true true false false true true false true null null true null false true true true true false false null false false null null null null null null null null null null true null true null null"},{"location":"3.ngql-guide/3.data-types/5.null/#opencypher","title":"OpenCypher \u517c\u5bb9\u6027","text":"<p>NebulaGraph \u4e2d\uff0cNULL \u7684\u6bd4\u8f83\u548c\u64cd\u4f5c\u4e0e openCypher \u4e0d\u540c\uff0c\u540e\u7eed\u4e5f\u53ef\u80fd\u4f1a\u6709\u53d8\u5316\u3002</p>"},{"location":"3.ngql-guide/3.data-types/5.null/#null_2","title":"NULL \u7684\u6bd4\u8f83","text":"<p>NebulaGraph \u4e2d\uff0cNULL \u7684\u6bd4\u8f83\u64cd\u4f5c\u4e0d\u517c\u5bb9 openCypher\u3002</p>"},{"location":"3.ngql-guide/3.data-types/5.null/#null_3","title":"NULL \u7684\u64cd\u4f5c\u548c\u8fd4\u56de","text":"<p>NebulaGraph \u4e2d\uff0c\u5bf9 NULL \u7684\u64cd\u4f5c\u4ee5\u53ca\u8fd4\u56de\u7ed3\u679c\u4e0d\u517c\u5bb9 openCypher\u3002</p>"},{"location":"3.ngql-guide/3.data-types/5.null/#_1","title":"\u793a\u4f8b","text":""},{"location":"3.ngql-guide/3.data-types/5.null/#not_null","title":"\u4f7f\u7528 NOT NULL","text":"<p>\u521b\u5efa Tag\uff0c\u540d\u79f0\u4e3a<code>player</code>\uff0c\u6307\u5b9a\u5c5e\u6027<code>name</code>\u4e3a<code>NOT NULL</code>\u3002</p> <pre><code>nebula&gt; CREATE TAG IF NOT EXISTS player(name string NOT NULL, age int);\n</code></pre> <p>\u4f7f\u7528<code>SHOW</code>\u547d\u4ee4\u67e5\u770b\u521b\u5efa Tag \u8bed\u53e5\uff0c\u5c5e\u6027<code>name</code>\u4e3a<code>NOT NULL</code>\uff0c\u5c5e\u6027<code>age</code>\u4e3a\u9ed8\u8ba4\u7684<code>NULL</code>\u3002</p> <pre><code>nebula&gt; SHOW CREATE TAG player;\n+-----------+-----------------------------------+\n| Tag       | Create Tag                        |\n+-----------+-----------------------------------+\n| \"student\" | \"CREATE TAG `player` (           |\n|           |  `name` string NOT NULL,          |\n|           |  `age` int64 NULL                 |\n|           | ) ttl_duration = 0, ttl_col = \"\"\" |\n+-----------+-----------------------------------+\n</code></pre> <p>\u63d2\u5165\u70b9<code>Kobe</code>\uff0c\u5c5e\u6027<code>age</code>\u53ef\u4ee5\u4e3a<code>NULL</code>\u3002</p> <pre><code>nebula&gt; INSERT VERTEX player(name, age) VALUES \"Kobe\":(\"Kobe\",null);\n</code></pre>"},{"location":"3.ngql-guide/3.data-types/5.null/#not_null_1","title":"\u4f7f\u7528 NOT NULL \u5e76\u8bbe\u7f6e\u9ed8\u8ba4\u503c","text":"<p>\u521b\u5efa Tag\uff0c\u540d\u79f0\u4e3a<code>player</code>\uff0c\u6307\u5b9a\u5c5e\u6027<code>age</code>\u4e3a<code>NOT NULL</code>\uff0c\u5e76\u8bbe\u7f6e\u9ed8\u8ba4\u503c<code>18</code>\u3002</p> <pre><code>nebula&gt; CREATE TAG IF NOT EXISTS player(name string, age int NOT NULL DEFAULT 18);\n</code></pre> <p>\u63d2\u5165\u70b9<code>Kobe</code>\uff0c\u53ea\u8bbe\u7f6e\u5c5e\u6027<code>name</code>\u3002</p> <pre><code>nebula&gt; INSERT VERTEX player(name) VALUES \"Kobe\":(\"Kobe\");\n</code></pre> <p>\u67e5\u8be2\u70b9<code>Kobe</code>\uff0c\u5c5e\u6027<code>age</code>\u4e3a\u9ed8\u8ba4\u503c<code>18</code>\u3002</p> <pre><code>nebula&gt; FETCH PROP ON player \"Kobe\" YIELD properties(vertex);\n+--------------------------+\n| properties(VERTEX)       |\n+--------------------------+\n| {age: 18, name: \"Kobe\"}  |\n+--------------------------+\n</code></pre>"},{"location":"3.ngql-guide/3.data-types/6.list/","title":"\u5217\u8868","text":"<p>\u5217\u8868\uff08List\uff09\u662f\u590d\u5408\u6570\u636e\u7c7b\u578b\uff0c\u4e00\u4e2a\u5217\u8868\u662f\u4e00\u7ec4\u5143\u7d20\u7684\u5e8f\u5217\uff0c\u53ef\u4ee5\u901a\u8fc7\u5143\u7d20\u5728\u5e8f\u5217\u4e2d\u7684\u4f4d\u7f6e\u8bbf\u95ee\u5217\u8868\u4e2d\u7684\u5143\u7d20\u3002</p> <p>\u5217\u8868\u7528\u5de6\u65b9\u62ec\u53f7\uff08[\uff09\u548c\u53f3\u65b9\u62ec\u53f7\uff08]\uff09\u5305\u88f9\u591a\u4e2a\u5143\u7d20\uff0c\u5404\u4e2a\u5143\u7d20\u4e4b\u95f4\u7528\u82f1\u6587\u9017\u53f7\uff08,\uff09\u9694\u5f00\u3002\u5143\u7d20\u524d\u540e\u7684\u7a7a\u683c\u5728\u5217\u8868\u4e2d\u88ab\u5ffd\u7565\uff0c\u56e0\u6b64\u53ef\u4ee5\u4f7f\u7528\u6362\u884c\u7b26\u3001\u5236\u8868\u7b26\u548c\u7a7a\u683c\u8c03\u6574\u683c\u5f0f\u3002</p>"},{"location":"3.ngql-guide/3.data-types/6.list/#opencypher","title":"OpenCypher \u517c\u5bb9\u6027","text":"<p>\u590d\u5408\u6570\u636e\u7c7b\u578b\uff08\u4f8b\u5982 List\u3001Set\u3001Map\uff09\u4e0d\u80fd\u5b58\u50a8\u4e3a\u70b9\u6216\u8fb9\u7684\u5c5e\u6027\u3002</p>"},{"location":"3.ngql-guide/3.data-types/6.list/#_2","title":"\u5217\u8868\u64cd\u4f5c","text":"<p>\u5bf9\u5217\u8868\u8fdb\u884c\u64cd\u4f5c\u53ef\u4ee5\u4f7f\u7528\u9884\u8bbe\u7684\u5217\u8868\u51fd\u6570\uff0c\u4e5f\u53ef\u4ee5\u4f7f\u7528\u4e0b\u6807\u8868\u8fbe\u5f0f\u8fc7\u6ee4\u5217\u8868\u5185\u7684\u5143\u7d20\u3002</p>"},{"location":"3.ngql-guide/3.data-types/6.list/#_3","title":"\u4e0b\u6807\u8868\u8fbe\u5f0f\u8bed\u6cd5","text":"<pre><code>[M]\n[M..N]\n[M..]\n[..N]\n</code></pre> <p>nGQL \u7684\u4e0b\u6807\u652f\u6301\u4ece\u524d\u5f80\u540e\u67e5\u8be2\uff0c\u4ece 0 \u5f00\u59cb\uff0c0 \u8868\u793a\u7b2c\u4e00\u4e2a\u5143\u7d20\uff0c1 \u8868\u793a\u7b2c\u4e8c\u4e2a\u5143\u7d20\uff0c\u4ee5\u6b64\u7c7b\u63a8\uff1b\u4e5f\u652f\u6301\u4ece\u540e\u5f80\u524d\u67e5\u8be2\uff0c\u4ece-1 \u5f00\u59cb\uff0c-1 \u8868\u793a\u6700\u540e\u4e00\u4e2a\u5143\u7d20\uff0c-2 \u8868\u793a\u5012\u6570\u7b2c\u4e8c\u4e2a\u5143\u7d20\uff0c\u4ee5\u6b64\u7c7b\u63a8\u3002</p> <ul> <li>[M]\uff1a\u8868\u793a\u4e0b\u6807\u4e3a M \u7684\u5143\u7d20\u3002</li> <li>[M..N]\uff1a\u8868\u793a<code>M \u2264 \u4e0b\u6807 \uff1c N</code>\u7684\u5143\u7d20\u3002<code>N</code>\u4e3a 0 \u65f6\uff0c\u8fd4\u56de\u4e3a\u7a7a\u3002</li> <li>[M..]\uff1a\u8868\u793a<code>M \u2264 \u4e0b\u6807</code>\u7684\u5143\u7d20\u3002</li> <li>[..N]\uff1a\u8868\u793a<code>\u4e0b\u6807 \uff1c N</code>\u7684\u5143\u7d20\u3002<code>N</code>\u4e3a 0 \u65f6\uff0c\u8fd4\u56de\u4e3a\u7a7a\u3002</li> </ul> <p>Note</p> <ul> <li>\u8d8a\u754c\u7684\u4e0b\u6807\u8fd4\u56de\u4e3a\u7a7a\uff0c\u672a\u8d8a\u754c\u7684\u53ef\u4ee5\u6b63\u5e38\u8fd4\u56de\u3002</li> <li><code>M</code>\u2265<code>N</code>\u65f6\uff0c\u8fd4\u56de\u4e3a\u7a7a\u3002</li> <li>\u67e5\u8be2\u5355\u4e2a\u5143\u7d20\u65f6\uff0c\u5982\u679c<code>M</code>\u4e3a null\uff0c\u8fd4\u56de\u62a5\u9519<code>BAD_TYPE</code>\uff1b\u8303\u56f4\u67e5\u8be2\u65f6\uff0c<code>M</code>\u6216<code>N</code>\u4e3a null\uff0c\u8fd4\u56de\u4e3a<code>null</code>\u3002</li> </ul>"},{"location":"3.ngql-guide/3.data-types/6.list/#_4","title":"\u793a\u4f8b","text":"<pre><code># \u8fd4\u56de\u5217\u8868 [1,2,3]\nnebula&gt; RETURN list[1, 2, 3] AS a;\n+-----------+\n| a         |\n+-----------+\n| [1, 2, 3] |\n+-----------+\n\n# \u8fd4\u56de\u5217\u8868 [1,2,3,4,5] \u4e2d\u4f4d\u7f6e\u4e0b\u6807\u4e3a 3 \u7684\u5143\u7d20\u3002\u5217\u8868\u7684\u4f4d\u7f6e\u4e0b\u6807\u662f\u4ece 0 \u5f00\u59cb\uff0c\u56e0\u6b64\u8fd4\u56de\u7684\u5143\u7d20\u4e3a 4\u3002\nnebula&gt; RETURN range(1,5)[3];\n+---------------+\n| range(1,5)[3] |\n+---------------+\n| 4             |\n+---------------+\n\n# \u8fd4\u56de\u5217\u8868 [1,2,3,4,5] \u4e2d\u4f4d\u7f6e\u4e0b\u6807\u4e3a-2 \u7684\u5143\u7d20\u3002\u5217\u8868\u7684\u6700\u540e\u4e00\u4e2a\u5143\u7d20\u7684\u4f4d\u7f6e\u4e0b\u6807\u662f-1\uff0c\u56e0\u6b64-2 \u662f\u6307\u5012\u6570\u7b2c\u4e8c\u4e2a\u5143\u7d20\uff0c\u5373 4\u3002\nnebula&gt; RETURN range(1,5)[-2];\n+------------------+\n| range(1,5)[-(2)] |\n+------------------+\n| 4                |\n+------------------+\n\n# \u8fd4\u56de\u5217\u8868 [1,2,3,4,5] \u4e2d\u4e0b\u6807\u4f4d\u7f6e\u4ece 0 \u5230 3\uff08\u4e0d\u5305\u62ec 3\uff09\u7684\u5143\u7d20\u3002\nnebula&gt; RETURN range(1,5)[0..3];\n+------------------+\n| range(1,5)[0..3] |\n+------------------+\n| [1, 2, 3]        |\n+------------------+\n\n# \u8fd4\u56de\u5217\u8868 [1,2,3,4,5] \u4e2d\u4f4d\u7f6e\u4e0b\u6807\u5927\u4e8e 2 \u7684\u5143\u7d20\u3002\nnebula&gt; RETURN range(1,5)[3..] AS a;\n+--------+\n| a      |\n+--------+\n| [4, 5] |\n+--------+\n\n# \u8fd4\u56de\u5217\u8868\u5185\u4e0b\u6807\u5c0f\u4e8e 3 \u7684\u5143\u7d20\u3002\nnebula&gt; WITH list[1, 2, 3, 4, 5] AS a \\\n        RETURN a[..3] AS r;\n+-----------+\n| r         |\n+-----------+\n| [1, 2, 3] |\n+-----------+\n\n# \u7b5b\u9009\u5217\u8868 [1,2,3,4,5] \u4e2d\u5927\u4e8e 2 \u7684\u5143\u7d20\uff0c\u5c06\u8fd9\u4e9b\u5143\u7d20\u5206\u522b\u505a\u8fd0\u7b97\u5e76\u8fd4\u56de\u3002\nnebula&gt; RETURN [n IN range(1,5) WHERE n &gt; 2 | n + 10] AS a;\n+--------------+\n| a            |\n+--------------+\n| [13, 14, 15] |\n+--------------+\n\n# \u8fd4\u56de\u5217\u8868\u5185\u7b2c\u4e00\u4e2a\u81f3\u5012\u6570\u7b2c\u4e8c\u4e2a\uff08\u5305\u62ec\uff09\u7684\u5143\u7d20\u3002\nnebula&gt; YIELD list[1, 2, 3][0..-1] AS a;\n+--------+\n| a      |\n+--------+\n| [1, 2] |\n+--------+\n\n# \u8fd4\u56de\u5217\u8868\u5185\u5012\u6570\u7b2c\u4e09\u4e2a\u81f3\u5012\u6570\u7b2c\u4e00\u4e2a\uff08\u4e0d\u5305\u62ec\uff09\u7684\u5143\u7d20\u3002\nnebula&gt; YIELD list[1, 2, 3, 4, 5][-3..-1] AS a;\n+--------+\n| a      |\n+--------+\n| [3, 4] |\n+--------+\n\n# \u8bbe\u7f6e\u53d8\u91cf\uff0c\u8fd4\u56de\u5217\u8868\u5185\u4e0b\u6807\u4e3a 1\u30012 \u7684\u5143\u7d20\u3002\nnebula&gt; $var = YIELD 1 AS f, 3 AS t; \\\n        YIELD list[1, 2, 3][$var.f..$var.t] AS a;\n+--------+\n| a      |\n+--------+\n| [2, 3] |\n+--------+\n\n# \u8d8a\u754c\u7684\u4e0b\u6807\u8fd4\u56de\u4e3a\u7a7a\uff0c\u672a\u8d8a\u754c\u7684\u53ef\u4ee5\u6b63\u5e38\u8fd4\u56de\u3002\nnebula&gt; RETURN list[1, 2, 3, 4, 5] [0..10] AS a;\n+-----------------+\n| a               |\n+-----------------+\n| [1, 2, 3, 4, 5] |\n+-----------------+\n\nnebula&gt; RETURN list[1, 2, 3] [-5..5] AS a;\n+-----------+\n| a         |\n+-----------+\n| [1, 2, 3] |\n+-----------+\n\n# [0..0] \u65f6\u8fd4\u56de\u4e3a\u7a7a\u3002\nnebula&gt; RETURN list[1, 2, 3, 4, 5] [0..0] AS a;\n+----+\n| a  |\n+----+\n| [] |\n+----+\n\n# M \u2265 N \u65f6\uff0c\u8fd4\u56de\u4e3a\u7a7a\u3002\nnebula&gt; RETURN list[1, 2, 3, 4, 5] [3..1] AS a;\n+----+\n| a  |\n+----+\n| [] |\n+----+\n\n# \u8303\u56f4\u67e5\u8be2\u65f6\uff0c\u4e0b\u6807\u6709 null \u65f6\uff0c\u8fd4\u56de\u4e3a null\u3002\nnebula&gt; WITH list[1,2,3] AS a \\\n        RETURN a[0..null] as r;\n+----------+\n| r        |\n+----------+\n| __NULL__ |\n+----------+\n\n# \u5c06\u5217\u8868 [1,2,3,4,5] \u4e2d\u7684\u5143\u7d20\u5206\u522b\u505a\u8fd0\u7b97\uff0c\u7136\u540e\u5c06\u5217\u8868\u53bb\u6389\u8868\u5934\u5e76\u8fd4\u56de\u3002\nnebula&gt; RETURN tail([n IN range(1, 5) | 2 * n - 10]) AS a;\n+-----------------+\n| a               |\n+-----------------+\n| [-6, -4, -2, 0] |\n+-----------------+\n\n# \u5c06\u5217\u8868 [1,2,3] \u4e2d\u7684\u5143\u7d20\u5224\u65ad\u4e3a\u771f\uff0c\u7136\u540e\u8fd4\u56de\u3002\nnebula&gt; RETURN [n IN range(1, 3) WHERE true | n] AS r;\n+-----------+\n| r         |\n+-----------+\n| [1, 2, 3] |\n+-----------+\n\n# \u8fd4\u56de\u5217\u8868 [1,2,3] \u7684\u957f\u5ea6\u3002\nnebula&gt; RETURN size(list[1,2,3]);\n+---------------+\n| size([1,2,3]) |\n+---------------+\n| 3             |\n+---------------+\n\n# \u5c06\u5217\u8868 [92,90] \u4e2d\u7684\u5143\u7d20\u505a\u8fd0\u7b97\uff0c\u7136\u540e\u5728 where \u5b50\u53e5\u4e2d\u8fdb\u884c\u6761\u4ef6\u5224\u65ad\u3002\nnebula&gt; GO FROM \"player100\" OVER follow WHERE properties(edge).degree NOT IN [x IN [92, 90] | x + $$.player.age] \\\n        YIELD dst(edge) AS id, properties(edge).degree AS degree;\n+-------------+--------+\n| id          | degree |\n+-------------+--------+\n| \"player101\" | 95     |\n| \"player102\" | 90     |\n+-------------+--------+\n\n# \u5c06 MATCH \u8bed\u53e5\u7684\u67e5\u8be2\u7ed3\u679c\u4f5c\u4e3a\u5217\u8868\u4e2d\u7684\u5143\u7d20\u8fdb\u884c\u8fd0\u7b97\u5e76\u8fd4\u56de\u3002\nnebula&gt; MATCH p = (n:player{name:\"Tim Duncan\"})-[:follow]-&gt;(m) \\\n        RETURN [n IN nodes(p) | n.player.age + 100] AS r;\n+------------+\n| r          |\n+------------+\n| [142, 136] |\n| [142, 141] |\n+------------+\n</code></pre>"},{"location":"3.ngql-guide/3.data-types/6.list/#opencypher_1","title":"OpenCypher \u517c\u5bb9\u6027","text":"<ul> <li>\u5728 openCypher \u4e2d\uff0c\u67e5\u8be2\u8d8a\u754c\u5143\u7d20\u65f6\u8fd4\u56de<code>null</code>\uff0c\u800c\u5728 nGQL \u4e2d\uff0c\u67e5\u8be2\u5355\u4e2a\u8d8a\u754c\u5143\u7d20\u65f6\u8fd4\u56de<code>OUT_OF_RANGE</code>\u3002<pre><code>nebula&gt; RETURN range(0,5)[-12];\n+-------------------+\n| range(0,5)[-(12)] |\n+-------------------+\n| OUT_OF_RANGE      |\n+-------------------+\n</code></pre> </li> </ul> <ul> <li> <p>\u590d\u5408\u6570\u636e\u7c7b\u578b\uff08\u4f8b\u5982 set\u3001map\u3001list\uff09\u4e0d\u80fd\u5b58\u50a8\u4e3a\u70b9\u6216\u8fb9\u7684\u5c5e\u6027\u3002</p> <ul> <li>\u5efa\u8bae\u4fee\u6539\u56fe\u5efa\u6a21\u65b9\u5f0f\uff1a\u5c06\u590d\u5408\u6570\u636e\u7c7b\u578b\u5efa\u6a21\u4e3a\u70b9\u7684\u90bb\u8fb9\uff0c\u800c\u4e0d\u662f\u8be5\u70b9\u7684\u81ea\u8eab\u5c5e\u6027\uff0c\u6bcf\u6761\u90bb\u8fb9\u53ef\u4ee5\u52a8\u6001\u589e\u5220\uff0c\u5e76\u4e14\u53ef\u4ee5\u8bbe\u7f6e\u90bb\u8fb9\u7684 Rank \u503c\u6765\u63a7\u5236\u90bb\u8fb9\u7684\u987a\u5e8f\u3002</li> </ul> </li> </ul> <ul> <li>List \u4e2d\u4e0d\u652f\u6301 pattern\uff0c\u4f8b\u5982 <code>[(src)-[]-&gt;(m) | m.name]</code>\u3002</li> </ul>"},{"location":"3.ngql-guide/3.data-types/7.set/","title":"\u96c6\u5408","text":"<p>\u96c6\u5408\uff08Set\uff09\u662f\u590d\u5408\u6570\u636e\u7c7b\u578b\uff0c\u96c6\u5408\u4e2d\u662f\u4e00\u7ec4\u5143\u7d20\uff0c\u4e0e\u5217\u8868\uff08List\uff09\u4e0d\u540c\u7684\u662f\uff0c\u96c6\u5408\u4e2d\u7684\u5143\u7d20\u662f\u65e0\u5e8f\u7684\uff0c\u4e14\u4e0d\u5141\u8bb8\u91cd\u590d\u3002</p> <p>\u96c6\u5408\u7528\u5de6\u82b1\u62ec\u53f7\uff08{\uff09\u548c\u53f3\u82b1\u62ec\u53f7\uff08}\uff09\u5305\u88f9\u591a\u4e2a\u5143\u7d20\uff0c\u5404\u4e2a\u5143\u7d20\u4e4b\u95f4\u7528\u82f1\u6587\u9017\u53f7\uff08,\uff09\u9694\u5f00\u3002\u5143\u7d20\u524d\u540e\u7684\u7a7a\u683c\u5728\u96c6\u5408\u4e2d\u88ab\u5ffd\u7565\uff0c\u56e0\u6b64\u53ef\u4ee5\u4f7f\u7528\u6362\u884c\u7b26\u3001\u5236\u8868\u7b26\u548c\u7a7a\u683c\u8c03\u6574\u683c\u5f0f\u3002</p>"},{"location":"3.ngql-guide/3.data-types/7.set/#opencypher","title":"OpenCypher \u517c\u5bb9\u6027","text":"<ul> <li>\u590d\u5408\u6570\u636e\u7c7b\u578b\uff08\u4f8b\u5982 List\u3001Set\u3001Map\uff09\u4e0d\u80fd\u5b58\u50a8\u4e3a\u70b9\u6216\u8fb9\u7684\u5c5e\u6027\u3002</li> </ul> <ul> <li>\u5728 OpenCypher \u4e2d\uff0c\u96c6\u5408\u4e0d\u662f\u4e00\u4e2a\u6570\u636e\u7c7b\u578b\uff0c\u800c\u5728 nGQL \u4e2d\uff0c\u7528\u6237\u53ef\u4ee5\u4f7f\u7528\u96c6\u5408\u3002</li> </ul>"},{"location":"3.ngql-guide/3.data-types/7.set/#_2","title":"\u793a\u4f8b","text":"<pre><code># \u8fd4\u56de\u96c6\u5408 {1,2,3}\u3002\nnebula&gt; RETURN set{1, 2, 3} AS a;\n+-----------+\n| a         |\n+-----------+\n| {3, 2, 1} |\n+-----------+\n\n# \u8fd4\u56de\u96c6\u5408 {1,2,1}\uff0c\u56e0\u4e3a\u96c6\u5408\u4e0d\u5141\u8bb8\u91cd\u590d\u5143\u7d20\uff0c\u4f1a\u8fd4\u56de {1,2}\uff0c\u4e14\u987a\u5e8f\u662f\u65e0\u5e8f\u7684\u3002\nnebula&gt; RETURN set{1, 2, 1} AS a;\n+--------+\n| a      |\n+--------+\n| {2, 1} |\n+--------+\n\n# \u5224\u65ad\u96c6\u5408\u4e2d\u662f\u5426\u6709\u6307\u5b9a\u5143\u7d20 1\u3002\nnebula&gt; RETURN 1 IN set{1, 2} AS a;\n+------+\n| a    |\n+------+\n| true |\n+------+\n\n# \u8ba1\u7b97\u96c6\u5408\u4e2d\u7684\u5143\u7d20\u6570\u91cf\u3002\nnebula&gt; YIELD size(set{1, 2, 1}) AS a;\n+---+\n| a |\n+---+\n| 2 |\n+---+\n\n# \u8fd4\u56de\u76ee\u6807\u70b9\u5c5e\u6027\u503c\u7ec4\u6210\u7684\u96c6\u5408\u3002\nnebula&gt; GO FROM \"player100\" OVER follow \\\n        YIELD set{properties($$).name,properties($$).age} as a;\n+-----------------------+\n| a                     |\n+-----------------------+\n| {36, \"Tony Parker\"}   |\n| {41, \"Manu Ginobili\"} |\n+-----------------------+\n</code></pre>"},{"location":"3.ngql-guide/3.data-types/8.map/","title":"\u6620\u5c04","text":"<p>\u6620\u5c04\uff08Map\uff09\u662f\u590d\u5408\u6570\u636e\u7c7b\u578b\u3002\u4e00\u4e2a\u6620\u5c04\u662f\u4e00\u7ec4\u952e\u503c\u5bf9\uff08Key-Value\uff09\u7684\u65e0\u5e8f\u96c6\u5408\u3002\u5728\u6620\u5c04\u4e2d\uff0cKey \u662f\u5b57\u7b26\u4e32\u7c7b\u578b\uff0cValue \u53ef\u4ee5\u662f\u4efb\u4f55\u6570\u636e\u7c7b\u578b\u3002\u7528\u6237\u53ef\u4ee5\u901a\u8fc7<code>map['&lt;key&gt;']</code>\u7684\u65b9\u6cd5\u83b7\u53d6\u6620\u5c04\u4e2d\u7684\u5143\u7d20\u3002</p> <p>\u6620\u5c04\u7528\u5de6\u82b1\u62ec\u53f7\uff08{\uff09\u548c\u53f3\u82b1\u62ec\u53f7\uff08}\uff09\u5305\u88f9\u591a\u4e2a\u952e\u503c\u5bf9\uff0c\u5404\u4e2a\u952e\u503c\u5bf9\u4e4b\u95f4\u7528\u82f1\u6587\u9017\u53f7\uff08,\uff09\u9694\u5f00\u3002\u952e\u503c\u5bf9\u524d\u540e\u7684\u7a7a\u683c\u5728\u6620\u5c04\u4e2d\u88ab\u5ffd\u7565\uff0c\u56e0\u6b64\u53ef\u4ee5\u4f7f\u7528\u6362\u884c\u7b26\u3001\u5236\u8868\u7b26\u548c\u7a7a\u683c\u8c03\u6574\u683c\u5f0f\u3002</p>"},{"location":"3.ngql-guide/3.data-types/8.map/#opencypher","title":"OpenCypher \u517c\u5bb9\u6027","text":"<ul> <li>\u590d\u5408\u6570\u636e\u7c7b\u578b\uff08\u4f8b\u5982 List\u3001Set\u3001Map\uff09\u4e0d\u80fd\u5b58\u50a8\u4e3a\u70b9\u6216\u8fb9\u7684\u5c5e\u6027\u3002</li> </ul> <ul> <li>\u4e0d\u652f\u6301\u6620\u5c04\u6295\u5f71\uff08map projection\uff09\u3002</li> </ul>"},{"location":"3.ngql-guide/3.data-types/8.map/#_2","title":"\u793a\u4f8b","text":"<pre><code># \u8fd4\u56de\u7b80\u5355\u7684\u6620\u5c04\u3002\nnebula&gt; YIELD map{key1: 'Value1', Key2: 'Value2'} as a;\n+----------------------------------+\n| a                                |\n+----------------------------------+\n| {Key2: \"Value2\", key1: \"Value1\"} |\n+----------------------------------+\n\n# \u8fd4\u56de\u5217\u8868\u7c7b\u578b\u7684\u6620\u5c04\u3002\nnebula&gt; YIELD map{listKey: [{inner: 'Map1'}, {inner: 'Map2'}]} as a;\n+-----------------------------------------------+\n| a                                             |\n+-----------------------------------------------+\n| {listKey: [{inner: \"Map1\"}, {inner: \"Map2\"}]} |\n+-----------------------------------------------+\n\n# \u8fd4\u56de\u6df7\u5408\u7c7b\u578b\u7684\u6620\u5c04\u3002\nnebula&gt; RETURN map{a: LIST[1,2], b: SET{1,2,1}, c: \"hee\"} as a;\n+----------------------------------+\n| a                                |\n+----------------------------------+\n| {a: [1, 2], b: {2, 1}, c: \"hee\"} |\n+----------------------------------+\n\n# \u8fd4\u56de\u6620\u5c04\u4e2d\u7684\u6307\u5b9a\u5143\u7d20\u3002\nnebula&gt; RETURN map{a: LIST[1,2], b: SET{1,2,1}, c: \"hee\"}[\"b\"] AS b;\n+--------+\n| b      |\n+--------+\n| {2, 1} |\n+--------+\n\n# \u5224\u65ad\u6620\u5c04\u4e2d\u662f\u5426\u6709\u6307\u5b9akey\uff0c\u6682\u4e0d\u652f\u6301\u5224\u65advalue\u3002\nnebula&gt; RETURN \"a\" IN MAP{a:1, b:2} AS a;\n+------+\n| a    |\n+------+\n| true |\n+------+\n</code></pre>"},{"location":"3.ngql-guide/3.data-types/9.type-conversion/","title":"\u7c7b\u578b\u8f6c\u6362","text":"<p>\u7c7b\u578b\u8f6c\u6362\u662f\u6307\u5c06\u8868\u8fbe\u5f0f\u7684\u7c7b\u578b\u8f6c\u6362\u4e3a\u53e6\u4e00\u4e2a\u7c7b\u578b\u3002</p> <p>NebulaGraph \u652f\u6301\u663e\u5f0f\u5730\u8f6c\u6362\u7c7b\u578b\u3002\u8be6\u60c5\u53c2\u89c1\u7c7b\u578b\u8f6c\u6362\u51fd\u6570\u3002</p>"},{"location":"3.ngql-guide/3.data-types/9.type-conversion/#_2","title":"\u793a\u4f8b","text":"<pre><code># \u5c06\u5217\u8868\u62c6\u5206\uff0c\u5e76\u5404\u81ea\u8f6c\u6362\u4e3a\u5e03\u5c14\u503c\u663e\u793a\u3002\nnebula&gt; UNWIND [true, false, 'true', 'false', NULL] AS b \\\n        RETURN toBoolean(b) AS b;\n+----------+\n| b        |\n+----------+\n| true     |\n+----------+\n| false    |\n+----------+\n| true     |\n+----------+\n| false    |\n+----------+\n| __NULL__ |\n+----------+\n\n# \u5c06\u6574\u6570\u6216\u5b57\u7b26\u4e32\u8f6c\u6362\u4e3a\u6d6e\u70b9\u6570\u3002\nnebula&gt; RETURN toFloat(1), toFloat('1.3'), toFloat('1e3'), toFloat('not a number');\n+------------+----------------+----------------+-------------------------+\n| toFloat(1) | toFloat(\"1.3\") | toFloat(\"1e3\") | toFloat(\"not a number\") |\n+------------+----------------+----------------+-------------------------+\n| 1.0        | 1.3            | 1000.0         | __NULL__                |\n+------------+----------------+----------------+-------------------------+\n</code></pre>"},{"location":"3.ngql-guide/4.variable-and-composite-queries/1.composite-queries/","title":"\u590d\u5408\u67e5\u8be2\uff08\u5b50\u53e5\u7ed3\u6784\uff09","text":"<p>\u590d\u5408\u67e5\u8be2\u5c06\u6765\u81ea\u4e0d\u540c\u8bf7\u6c42\u7684\u6570\u636e\u653e\u5728\u4e00\u8d77\uff0c\u7136\u540e\u8fdb\u884c\u8fc7\u6ee4\u3001\u5206\u7ec4\u6216\u8005\u6392\u5e8f\u7b49\uff0c\u6700\u540e\u8fd4\u56de\u7ed3\u679c\u3002</p> <p>NebulaGraph \u652f\u6301\u4e09\u79cd\u65b9\u5f0f\u8fdb\u884c\u590d\u5408\u67e5\u8be2\uff08\u6216\u5b50\u67e5\u8be2\uff09\uff1a</p> <ul> <li>\uff08opencypher \u517c\u5bb9\u8bed\u53e5\uff09\u8fde\u63a5\u5404\u4e2a\u5b50\u53e5\uff0c\u8ba9\u5b83\u4eec\u5728\u5f7c\u6b64\u4e4b\u95f4\u63d0\u4f9b\u4e2d\u95f4\u7ed3\u679c\u96c6\u3002</li> </ul> <ul> <li>\uff08\u539f\u751f nGQL\uff09\u591a\u4e2a\u67e5\u8be2\u53ef\u4ee5\u5408\u5e76\u5904\u7406\uff0c\u4ee5\u82f1\u6587\u5206\u53f7\uff08;\uff09\u5206\u9694\uff0c\u8fd4\u56de\u6700\u540e\u4e00\u4e2a\u67e5\u8be2\u7684\u7ed3\u679c\u3002</li> </ul> <ul> <li>\uff08\u539f\u751f nGQL\uff09\u53ef\u4ee5\u7528\u7ba1\u9053\u7b26\uff08|\uff09\u5c06\u591a\u4e2a\u67e5\u8be2\u8fde\u63a5\u8d77\u6765\uff0c\u4e0a\u4e00\u4e2a\u67e5\u8be2\u7684\u7ed3\u679c\u53ef\u4ee5\u4f5c\u4e3a\u4e0b\u4e00\u4e2a\u67e5\u8be2\u7684\u8f93\u5165\u3002</li> </ul>"},{"location":"3.ngql-guide/4.variable-and-composite-queries/1.composite-queries/#opencypher","title":"OpenCypher \u517c\u5bb9\u6027","text":"<p>\u5728\u590d\u5408\u67e5\u8be2\u4e2d\uff0c\u8bf7\u4e0d\u8981\u6df7\u7528 opencypher \u517c\u5bb9\u8bed\u53e5\u548c\u539f\u751f nGQL \u8bed\u53e5\uff0c\u4f8b\u5982<code>MATCH ... | GO ... | YIELD ...</code>\u3002</p> <ul> <li>\u5982\u679c\u4f7f\u7528 openCypher \u517c\u5bb9\u8bed\u53e5\uff08<code>MATCH</code>\u3001<code>RETURN</code>\u3001<code>WITH</code>\u7b49\uff09\uff0c\u8bf7\u4e0d\u8981\u4f7f\u7528\u7ba1\u9053\u7b26\u6216\u5206\u53f7\u7ec4\u5408\u5b50\u53e5\u3002</li> </ul> <ul> <li>\u5982\u679c\u4f7f\u7528\u539f\u751f nGQL \u8bed\u53e5\uff08<code>FETCH</code>\u3001<code>GO</code>\u3001<code>LOOKUP</code>\u7b49\uff09\uff0c\u5fc5\u987b\u4f7f\u7528\u7ba1\u9053\u7b26\u6216\u5206\u53f7\u7ec4\u5408\u5b50\u53e5\u3002</li> </ul>"},{"location":"3.ngql-guide/4.variable-and-composite-queries/1.composite-queries/#_2","title":"\u590d\u5408\u67e5\u8be2\u4e0d\u652f\u6301\u4e8b\u52a1","text":"<p>\u4f8b\u5982\u4e00\u4e2a\u67e5\u8be2\u7531\u4e09\u4e2a\u5b50\u67e5\u8be2 A\u3001B\u3001C \u7ec4\u6210\uff0cA \u662f\u4e00\u4e2a\u8bfb\u64cd\u4f5c\uff0cB \u662f\u4e00\u4e2a\u8ba1\u7b97\u64cd\u4f5c\uff0cC \u662f\u4e00\u4e2a\u5199\u64cd\u4f5c\uff0c\u5982\u679c\u5728\u6267\u884c\u8fc7\u7a0b\u4e2d\uff0c\u4efb\u4f55\u4e00\u4e2a\u64cd\u4f5c\u6267\u884c\u5931\u8d25\uff0c\u5219\u6574\u4e2a\u7ed3\u679c\u662f\u672a\u5b9a\u4e49\u7684\uff1a\u6ca1\u6709\u56de\u6eda\uff0c\u800c\u4e14\u5199\u5165\u7684\u5185\u5bb9\u53d6\u51b3\u4e8e\u6267\u884c\u7a0b\u5e8f\u3002</p> <p>Note</p> <p>openCypher \u6ca1\u6709\u4e8b\u52a1\u8981\u6c42\u3002</p>"},{"location":"3.ngql-guide/4.variable-and-composite-queries/1.composite-queries/#_3","title":"\u793a\u4f8b","text":"<ul> <li>opencypher \u517c\u5bb9\u8bed\u53e5<pre><code># \u5b50\u53e5\u8fde\u63a5\u591a\u4e2a\u67e5\u8be2\u3002\nnebula&gt; MATCH p=(v:player{name:\"Tim Duncan\"})--() \\\n        WITH nodes(p) AS n \\\n        UNWIND n AS n1 \\\n        RETURN DISTINCT n1;\n</code></pre> </li> </ul> <ul> <li>\u539f\u751f nGQL\uff08\u5206\u53f7\uff09<pre><code># \u53ea\u8fd4\u56de\u8fb9\u3002\nnebula&gt; SHOW TAGS; SHOW EDGES;\n\n# \u63d2\u5165\u591a\u4e2a\u70b9\u3002\nnebula&gt; INSERT VERTEX player(name, age) VALUES \"player100\":(\"Tim Duncan\", 42); \\\n        INSERT VERTEX player(name, age) VALUES \"player101\":(\"Tony Parker\", 36); \\\n        INSERT VERTEX player(name, age) VALUES \"player102\":(\"LaMarcus Aldridge\", 33);\n</code></pre> </li> </ul> <ul> <li>\u539f\u751f nGQL\uff08\u7ba1\u9053\u7b26\uff09<pre><code># \u7ba1\u9053\u7b26\u8fde\u63a5\u591a\u4e2a\u67e5\u8be2\u3002\nnebula&gt; GO FROM \"player100\" OVER follow YIELD dst(edge) AS id | \\\n        GO FROM $-.id OVER serve YIELD properties($$).name AS Team, \\\n        properties($^).name AS Player;\n+-----------+-----------------+\n| Team      | Player          |\n+-----------+-----------------+\n| \"Spurs\"   | \"Tony Parker\"   |\n| \"Hornets\" | \"Tony Parker\"   |\n| \"Spurs\"   | \"Manu Ginobili\" |\n+-----------+-----------------+\n</code></pre> </li> </ul>"},{"location":"3.ngql-guide/4.variable-and-composite-queries/2.user-defined-variables/","title":"\u81ea\u5b9a\u4e49\u53d8\u91cf","text":"<p>NebulaGraph \u5141\u8bb8\u5c06\u4e00\u6761\u8bed\u53e5\u7684\u7ed3\u679c\u4f5c\u4e3a\u81ea\u5b9a\u4e49\u53d8\u91cf\u4f20\u9012\u7ed9\u53e6\u4e00\u6761\u8bed\u53e5\u3002</p>"},{"location":"3.ngql-guide/4.variable-and-composite-queries/2.user-defined-variables/#opencypher","title":"OpenCypher \u517c\u5bb9\u6027","text":"<p>\u5f53\u5f15\u7528\u4e00\u4e2a\u53d8\u91cf\u7684\u70b9\u3001\u8fb9\u6216\u8def\u5f84\uff0c\u9700\u8981\u5148\u7ed9\u5b83\u547d\u540d\u3002\u4f8b\u5982\uff1a</p> <pre><code>nebula&gt; MATCH (v:player{name:\"Tim Duncan\"}) RETURN v;\n+----------------------------------------------------+\n| v                                                  |\n+----------------------------------------------------+\n| (\"player100\" :player{name: \"Tim Duncan\", age: 42}) |\n+----------------------------------------------------+\n</code></pre> <p>\u793a\u4f8b\u4e2d\u7684<code>v</code>\u5c31\u662f\u81ea\u5b9a\u4e49\u53d8\u91cf\u3002</p> <p>Caution</p> <p>\u5728\u540c\u4e00\u4e2a MATCH \u8bed\u53e5\u7684\u6a21\u5f0f\u4e2d\uff0c\u4e0d\u80fd\u91cd\u590d\u4f7f\u7528\u8fb9\u53d8\u91cf\u3002\u4f8b\u5982<code>e</code>\u4e0d\u80fd\u91cd\u590d\u88ab\u5199\u5728\u6a21\u5f0f<code>p=(v1)-[e*2..2]-&gt;(v2)-[e*2..2]-&gt;(v3)</code>\u4e2d\u3002</p>"},{"location":"3.ngql-guide/4.variable-and-composite-queries/2.user-defined-variables/#ngql","title":"\u539f\u751f nGQL","text":"<p>nGQL \u6269\u5c55\u7684\u81ea\u5b9a\u4e49\u53d8\u91cf\u53ef\u4ee5\u8868\u793a\u4e3a<code>$var_name</code>\uff0c<code>var_name</code>\u7531\u5b57\u6bcd\u3001\u6570\u5b57\u6216\u4e0b\u5212\u7ebf\uff08_\uff09\u6784\u6210\uff0c\u4e0d\u5141\u8bb8\u4f7f\u7528\u5176\u4ed6\u5b57\u7b26\u3002</p> <p>\u81ea\u5b9a\u4e49\u53d8\u91cf\u4ec5\u5728\u5f53\u524d\u6267\u884c\uff08\u672c\u590d\u5408\u67e5\u8be2\u4e2d\uff09\u6709\u6548\uff0c\u6267\u884c\u7ed3\u675f\u540e\u53d8\u91cf\u4e5f\u4f1a\u91ca\u653e\uff0c\u4e0d\u80fd\u5728\u5176\u4ed6\u5ba2\u6237\u7aef\u3001\u6267\u884c\u3001session \u4e2d\u4f7f\u7528\u4e4b\u524d\u7684\u81ea\u5b9a\u4e49\u53d8\u91cf\u3002</p> <p>\u7528\u6237\u53ef\u4ee5\u5728\u590d\u5408\u67e5\u8be2\u4e2d\u4f7f\u7528\u81ea\u5b9a\u4e49\u53d8\u91cf\u3002\u590d\u5408\u67e5\u8be2\u7684\u8be6\u7ec6\u4fe1\u606f\u8bf7\u53c2\u89c1\u590d\u5408\u67e5\u8be2\u3002</p> <p>Note</p> <ul> <li>\u81ea\u5b9a\u4e49\u53d8\u91cf\u533a\u5206\u5927\u5c0f\u5199\u3002</li> <li>\u5728\u5305\u542b\u6269\u5c55\u7684\u81ea\u5b9a\u4e49\u53d8\u91cf\u7684\u590d\u5408\u8bed\u53e5\u4e2d\uff0c\u7528\u82f1\u6587\u5206\u53f7<code>;</code>\u7ed3\u675f\u5b9a\u4e49\u53d8\u91cf\u7684\u8bed\u53e5\u3002\u8be6\u60c5\u53c2\u89c1 nGQL \u98ce\u683c\u6307\u5357\u3002</li> </ul>"},{"location":"3.ngql-guide/4.variable-and-composite-queries/2.user-defined-variables/#_2","title":"\u793a\u4f8b","text":"<pre><code>nebula&gt; $var = GO FROM \"player100\" OVER follow YIELD dst(edge) AS id; \\\n        GO FROM $var.id OVER serve YIELD properties($$).name AS Team, \\\n        properties($^).name AS Player;\n+-----------+-----------------+\n| Team      | Player          |\n+-----------+-----------------+\n| \"Spurs\"   | \"Tony Parker\"   |\n| \"Hornets\" | \"Tony Parker\"   |\n| \"Spurs\"   | \"Manu Ginobili\" |\n+-----------+-----------------+\n</code></pre>"},{"location":"3.ngql-guide/4.variable-and-composite-queries/2.user-defined-variables/#_3","title":"\u96c6\u5408\u8fd0\u7b97\u4e0e\u53d8\u91cf\u8bed\u53e5\u7684\u8303\u56f4\u4e0e\u8fd0\u7b97\u987a\u5e8f","text":"<p>\u5f53\u6211\u4eec\u9700\u8981\u5bf9\u96c6\u5408\u8fd0\u7b97\u7684\u590d\u5408\u8bed\u53e5\u8fdb\u884c\u53d8\u91cf\u8d4b\u503c\u65f6\uff0c\u9700\u8981\u6ce8\u610f\u7528\u62ec\u53f7\u5305\u88f9\u8bed\u53e5\u7684\u8303\u56f4\uff0c\u6bd4\u5982\u4e0b\u8fb9\u7684\u4f8b\u5b50\u91cc<code>$var</code>\u8d4b\u503c\u7684\u6765\u6e90\u662f\u4e24\u4e2a\u8bed\u53e5<code>INTERSECT</code>\u4e4b\u540e\u7684\u8f93\u51fa\u3002</p> <pre><code>$var = ( \\\n    GO FROM \"player100\" OVER follow \\\n      YIELD dst(edge) AS id \\\n    INTERSECT \\\n    GO FROM \"player100\" OVER follow \\\n      YIELD dst(edge) AS id \\\n       ); \\\n    GO FROM $var.id OVER follow YIELD follow.degree AS degree\n</code></pre>"},{"location":"3.ngql-guide/4.variable-and-composite-queries/3.property-reference/","title":"\u5f15\u7528\u5c5e\u6027","text":"<p>nGQL \u63d0\u4f9b\u5c5e\u6027\u5f15\u7528\u7b26\u4ee5\u5141\u8bb8\u7528\u6237\u5728<code>GO</code>\u8bed\u53e5\u4e2d\u5f15\u7528\u8d77\u59cb\u70b9\u3001\u76ee\u7684\u70b9\u3001\u8fb9\u7684\u5c5e\u6027\uff0c\u4ee5\u53ca\u5f15\u7528\u590d\u5408\u67e5\u8be2\u7684\u8f93\u51fa\u7ed3\u679c\u3002\u672c\u6587\u5c06\u8be6\u7ec6\u4ecb\u7ecd\u5982\u4f55\u5728 nGQL \u4e2d\u4f7f\u7528\u8fd9\u4e9b\u5c5e\u6027\u5f15\u7528\u7b26\u3002</p>"},{"location":"3.ngql-guide/4.variable-and-composite-queries/3.property-reference/#opencypher","title":"openCypher \u517c\u5bb9\u6027","text":"<p>\u5c5e\u6027\u5f15\u7528\u7b26\u4ec5\u9002\u7528\u4e8e\u539f\u751f nGQL\u3002</p>"},{"location":"3.ngql-guide/4.variable-and-composite-queries/3.property-reference/#_2","title":"\u70b9\u5c5e\u6027\u5f15\u7528\u7b26","text":"\u5f15\u7528\u7b26 \u8bf4\u660e <code>$^</code> \u5f15\u7528\u8d77\u59cb\u70b9\u3002 <code>$$</code> \u5f15\u7528\u76ee\u7684\u70b9\u3002"},{"location":"3.ngql-guide/4.variable-and-composite-queries/3.property-reference/#_3","title":"\u5f15\u7528\u8bed\u6cd5","text":"<pre><code>$^.&lt;tag_name&gt;.&lt;prop_name&gt;  # \u8d77\u59cb\u70b9\u5c5e\u6027\u5f15\u7528\n$$.&lt;tag_name&gt;.&lt;prop_name&gt;   # \u76ee\u7684\u70b9\u5c5e\u6027\u5f15\u7528\n</code></pre> <ul> <li><code>tag_name</code>\uff1a\u70b9\u7684 Tag \u540d\u79f0\u3002</li> <li><code>prop_name</code>\uff1aTag \u5185\u7684\u5c5e\u6027\u540d\u79f0\u3002</li> </ul>"},{"location":"3.ngql-guide/4.variable-and-composite-queries/3.property-reference/#_4","title":"\u8fb9\u5c5e\u6027\u5f15\u7528\u7b26","text":"\u5f15\u7528\u7b26 \u8bf4\u660e <code>_src</code> \u8fb9\u7684\u8d77\u59cb\u70b9 <code>_dst</code> \u8fb9\u7684\u76ee\u7684\u70b9 <code>_type</code> \u8fb9\u7684\u7c7b\u578b\u5185\u90e8\u7f16\u7801\uff0c\u6b63\u8d1f\u53f7\u8868\u793a\u65b9\u5411\uff1a\u6b63\u6570\u4e3a\u6b63\u5411\u8fb9\uff0c\u8d1f\u6570\u4e3a\u9006\u5411\u8fb9 <code>_rank</code> \u8fb9\u7684 rank \u503c"},{"location":"3.ngql-guide/4.variable-and-composite-queries/3.property-reference/#_5","title":"\u5f15\u7528\u8bed\u6cd5","text":"<p>nGQL \u5141\u8bb8\u7528\u6237\u5f15\u7528\u8fb9\u7684\u5c5e\u6027\uff0c\u5305\u62ec\u81ea\u5b9a\u4e49\u7684\u8fb9\u5c5e\u6027\u548c\u56db\u79cd\u5185\u7f6e\u7684\u8fb9\u5c5e\u6027\u3002</p> <pre><code>&lt;edge_type&gt;.&lt;prop_name&gt;  # \u81ea\u5b9a\u4e49\u8fb9\u5c5e\u6027\u5f15\u7528\n&lt;edge_type&gt;._src|_dst|_type|_rank  # \u5185\u7f6e\u8fb9\u5c5e\u6027\u5f15\u7528\n</code></pre> <ul> <li><code>edge_type</code>\uff1aEdge type\u3002</li> <li><code>prop_name</code>\uff1aEdge type \u7684\u5c5e\u6027\u540d\u79f0\u3002</li> </ul>"},{"location":"3.ngql-guide/4.variable-and-composite-queries/3.property-reference/#_6","title":"\u590d\u5408\u67e5\u8be2\u4e2d\u7684\u5f15\u7528\u7b26","text":"\u5f15\u7528\u7b26 \u8bf4\u660e <code>$-</code> \u5f15\u7528\u590d\u5408\u67e5\u8be2\u4e2d\u7ba1\u9053\u7b26\u4e4b\u524d\u7684\u8bed\u53e5\u8f93\u51fa\u7ed3\u679c\u3002\u66f4\u591a\u4fe1\u606f\u8bf7\u53c2\u89c1\u7ba1\u9053\u7b26\u3002"},{"location":"3.ngql-guide/4.variable-and-composite-queries/3.property-reference/#_7","title":"\u793a\u4f8b","text":""},{"location":"3.ngql-guide/4.variable-and-composite-queries/3.property-reference/#_8","title":"\u4f7f\u7528\u70b9\u5c5e\u6027\u5f15\u7528\u7b26","text":"<pre><code># \u8fd4\u56de\u8d77\u59cb\u70b9\u7684 Tag player \u7684 name \u5c5e\u6027\u503c\u548c\u76ee\u7684\u70b9\u7684 Tag player \u7684 age \u5c5e\u6027\u503c\u3002\nnebula&gt; GO FROM \"player100\" OVER follow YIELD $^.player.name AS startName, $$.player.age AS endAge;\n+--------------+--------+\n| startName    | endAge |\n+--------------+--------+\n| \"Tim Duncan\" | 36     |\n| \"Tim Duncan\" | 41     |\n+--------------+--------+\n</code></pre> <p>\u5386\u53f2\u7248\u672c\u517c\u5bb9\u6027</p> <p>\u4eceNebulaGraph 2.6.0 \u8d77\u652f\u6301\u4e86\u65b0\u7684 Schema \u76f8\u5173\u51fd\u6570\u3002\u4ee5\u4e0a\u793a\u4f8b\u5728NebulaGraph master \u4e2d\u7684\u8fd1\u4f3c\u5199\u6cd5\u5982\u4e0b\uff1a</p> <pre><code>GO FROM \"player100\" OVER follow YIELD properties($^).name AS startName, properties($$).age AS endAge;\n</code></pre> <p>NebulaGraph master \u517c\u5bb9\u65b0\u65e7\u8bed\u6cd5\u3002</p>"},{"location":"3.ngql-guide/4.variable-and-composite-queries/3.property-reference/#_9","title":"\u4f7f\u7528\u8fb9\u5c5e\u6027\u5f15\u7528\u7b26","text":"<pre><code># \u8fd4\u56de Edge type follow \u7684 degree \u5c5e\u6027\u503c\u3002\nnebula&gt; GO FROM \"player100\" OVER follow YIELD follow.degree;\n+---------------+\n| follow.degree |\n+---------------+\n| 95            |\n+---------------+\n\n# \u8fd4\u56de EdgeType \u662f follow \u7684\u8d77\u59cb\u70b9 VID\u3001\u76ee\u7684\u70b9 VID\u3001EdgeType \u7f16\u7801\uff08\u6b63\u6570\u4e3a\u6b63\u5411\u8fb9\uff0c\u8d1f\u6570\u4e3a\u9006\u5411\u8fb9\uff09\uff0c\u548c\u8fb9\u7684 rank \u503c\u3002\nnebula&gt; GO FROM \"player100\" OVER follow YIELD follow._src, follow._dst, follow._type, follow._rank;\n+-------------+-------------+--------------+--------------+\n| follow._src | follow._dst | follow._type | follow._rank |\n+-------------+-------------+--------------+--------------+\n| \"player100\" | \"player101\" | 17           | 0            |\n| \"player100\" | \"player125\" | 17           | 0            |\n+-------------+-------------+--------------+--------------+\n</code></pre> <p>\u5386\u53f2\u7248\u672c\u517c\u5bb9\u6027</p> <p>\u4ece NebulaGraph 2.6.0 \u8d77\u652f\u6301\u4e86\u65b0\u7684 Schema \u76f8\u5173\u51fd\u6570\u3002\u4ee5\u4e0a\u793a\u4f8b\u5728 NebulaGraph master \u4e2d\u7684\u8fd1\u4f3c\u5199\u6cd5\u5982\u4e0b\uff1a</p> <pre><code>GO FROM \"player100\" OVER follow YIELD properties(edge).degree;\nGO FROM \"player100\" OVER follow YIELD src(edge), dst(edge), type(edge), rank(edge);\n</code></pre> <p>NebulaGraph master \u517c\u5bb9\u65b0\u65e7\u8bed\u6cd5\u3002</p>"},{"location":"3.ngql-guide/4.variable-and-composite-queries/3.property-reference/#_10","title":"\u590d\u5408\u67e5\u8be2\u4e2d\u4f7f\u7528\u5c5e\u6027\u5f15\u7528\u7b26","text":"<p>\u4ee5\u4e0b\u590d\u5408\u67e5\u8be2\u8bed\u53e5\u793a\u4f8b\u6267\u884c\u64cd\u4f5c\u5982\u4e0b\uff1a</p> <ol> <li>\u4f7f\u7528<code>$-.id</code>\u5f15\u7528\u7ba1\u9053\u7b26\u524d\u9762\u7684<code>GO FROM \"player100\" OVER follow YIELD dst(edge) AS id</code>\u8bed\u53e5\u7684\u7ed3\u679c\uff0c\u5373\u8fd4\u56de<code>follow</code>\u8fb9\u7c7b\u578b\u7684\u76ee\u7684\u70b9 ID\u3002</li> <li>\u4f7f\u7528<code>properties($^)</code>\u51fd\u6570\u83b7\u53d6<code>serve</code>\u7c7b\u578b\u8fb9\u4e0a\u8d77\u59cb\u70b9\u7684\u7403\u5458\u7684<code>name</code>\u5c5e\u6027\u3002</li> <li>\u4f7f\u7528<code>properties($$)</code>\u51fd\u6570\u83b7\u53d6<code>serve</code>\u7c7b\u578b\u8fb9\u4e0a\u76ee\u7684\u70b9\u7684\u56e2\u961f\u7684<code>name</code>\u5c5e\u6027\u3002</li> </ol> <pre><code>nebula&gt; GO FROM \"player100\" OVER follow \\\n        YIELD dst(edge) AS id | \\\n        GO FROM $-.id OVER serve \\\n        YIELD properties($^).name AS Player, properties($$).name AS Team;\n+-----------------+-----------+\n| Player          | Team      |\n+-----------------+-----------+\n| \"Tony Parker\"   | \"Spurs\"   |\n| \"Tony Parker\"   | \"Hornets\" |\n| \"Manu Ginobili\" | \"Spurs\"   |\n+-----------------+-----------+\n</code></pre>"},{"location":"3.ngql-guide/5.operators/1.comparison/","title":"\u6bd4\u8f83\u7b26","text":"<p>NebulaGraph \u652f\u6301\u7684\u6bd4\u8f83\u7b26\u5982\u4e0b\u3002</p> \u7b26\u53f7 \u8bf4\u660e <code>==</code> \u76f8\u7b49 <code>!=</code>,  <code>&lt;&gt;</code> \u4e0d\u7b49\u4e8e <code>&gt;</code> \u5927\u4e8e <code>&gt;=</code> \u5927\u4e8e\u7b49\u4e8e <code>&lt;</code> \u5c0f\u4e8e <code>&lt;=</code> \u5c0f\u4e8e\u7b49\u4e8e <code>IS NULL</code> \u4e3a NULL <code>IS NOT NULL</code> \u4e0d\u4e3a NULL <code>IS EMPTY</code> \u4e0d\u5b58\u5728 <code>IS NOT EMPTY</code> \u5b58\u5728 <p>\u6bd4\u8f83\u64cd\u4f5c\u7684\u7ed3\u679c\u662f<code>true</code>\u6216\u8005<code>false</code>\u3002</p> <p>Note</p> <ul> <li>\u6bd4\u8f83\u4e0d\u540c\u7c7b\u578b\u7684\u503c\u901a\u5e38\u6ca1\u6709\u5b9a\u4e49\uff0c\u7ed3\u679c\u53ef\u80fd\u662f<code>NULL</code>\u6216\u5176\u5b83\u3002</li> </ul> <ul> <li><code>EMPTY</code>\u5f53\u524d\u4ec5\u7528\u4e8e\u5224\u65ad\uff0c\u4e0d\u652f\u6301\u51fd\u6570\u6216\u8005\u8fd0\u7b97\u64cd\u4f5c\uff0c\u5305\u62ec\u4e14\u4e0d\u9650\u4e8e<code>GROUP BY</code>\u3001<code>count()</code>\u3001<code>sum()</code>\u3001<code>max()</code>\u3001<code>hash()</code>\u3001<code>collect()</code>\u3001<code>+</code>\u3001<code>*</code>\u3002</li> </ul>"},{"location":"3.ngql-guide/5.operators/1.comparison/#opencypher","title":"OpenCypher \u517c\u5bb9\u6027","text":"<p>openCypher \u4e2d\u6ca1\u6709<code>EMPTY</code>\uff0c\u56e0\u6b64\u4e0d\u652f\u6301\u5728 MATCH \u8bed\u53e5\u4e2d\u4f7f\u7528<code>EMPTY</code>\u3002</p>"},{"location":"3.ngql-guide/5.operators/1.comparison/#_2","title":"\u793a\u4f8b","text":""},{"location":"3.ngql-guide/5.operators/1.comparison/#_3","title":"<code>==</code>","text":"<p>\u5b57\u7b26\u4e32\u6bd4\u8f83\u65f6\uff0c\u4f1a\u533a\u5206\u5927\u5c0f\u5199\u3002\u4e0d\u540c\u7c7b\u578b\u7684\u503c\u4e0d\u76f8\u7b49\u3002</p> <p>Note</p> <p>nGQL \u4e2d\u7684\u76f8\u7b49\u7b26\u53f7\u662f<code>==</code>\uff0copenCypher \u4e2d\u7684\u76f8\u7b49\u7b26\u53f7\u662f<code>=</code>\u3002</p> <pre><code>nebula&gt; RETURN 'A' == 'a', toUpper('A') == toUpper('a'), toLower('A') == toLower('a');\n+------------+------------------------------+------------------------------+\n| (\"A\"==\"a\") | (toUpper(\"A\")==toUpper(\"a\")) | (toLower(\"A\")==toLower(\"a\")) |\n+------------+------------------------------+------------------------------+\n| false      | true                         | true                         |\n+------------+------------------------------+------------------------------+\n\nnebula&gt; RETURN '2' == 2, toInteger('2') == 2;\n+----------+---------------------+\n| (\"2\"==2) | (toInteger(\"2\")==2) |\n+----------+---------------------+\n| false    | true                |\n+----------+---------------------+\n</code></pre>"},{"location":"3.ngql-guide/5.operators/1.comparison/#_4","title":"<code>&gt;</code>","text":"<pre><code>nebula&gt; RETURN 3 &gt; 2;\n+-------+\n| (3&gt;2) |\n+-------+\n| true  |\n+-------+\n\nnebula&gt; WITH 4 AS one, 3 AS two \\\n        RETURN one &gt; two AS result;\n+--------+\n| result |\n+--------+\n| true   |\n+--------+\n</code></pre>"},{"location":"3.ngql-guide/5.operators/1.comparison/#_5","title":"<code>&gt;=</code>","text":"<pre><code>nebula&gt; RETURN 2 &gt;= \"2\", 2 &gt;= 2;\n+----------+--------+\n| (2&gt;=\"2\") | (2&gt;=2) |\n+----------+--------+\n| __NULL__ | true   |\n+----------+--------+\n</code></pre>"},{"location":"3.ngql-guide/5.operators/1.comparison/#_6","title":"<code>&lt;</code>","text":"<pre><code>nebula&gt; YIELD 2.0 &lt; 1.9;\n+---------+\n| (2&lt;1.9) |\n+---------+\n| false   |\n+---------+\n</code></pre>"},{"location":"3.ngql-guide/5.operators/1.comparison/#_7","title":"<code>&lt;=</code>","text":"<pre><code>nebula&gt; YIELD 0.11 &lt;= 0.11;\n+--------------+\n| (0.11&lt;=0.11) |\n+--------------+\n| true         |\n+--------------+\n</code></pre>"},{"location":"3.ngql-guide/5.operators/1.comparison/#_8","title":"<code>!=</code>","text":"<pre><code>nebula&gt; YIELD 1 != '1';\n+----------+\n| (1!=\"1\") |\n+----------+\n| true     |\n+----------+\n</code></pre>"},{"location":"3.ngql-guide/5.operators/1.comparison/#is_not_null","title":"<code>IS [NOT] NULL</code>","text":"<pre><code># \u8fd4\u56de\u5173\u4e8e null \u7684\u4e00\u4e9b\u5224\u65ad\u7ed3\u679c\u3002\nnebula&gt; RETURN null IS NULL AS value1, null == null AS value2, null != null AS value3;\n+--------+----------+----------+\n| value1 | value2   | value3   |\n+--------+----------+----------+\n| true   | __NULL__ | __NULL__ |\n+--------+----------+----------+\n\n# \u8fd4\u56de\u5173\u4e8e NULL \u7684\u4e00\u4e9b\u5c5e\u6027\u4fe1\u606f\u3002\nnebula&gt; RETURN length(NULL), size(NULL), count(NULL), NULL IS NULL, NULL IS NOT NULL, sin(NULL), NULL + NULL, [1, NULL] IS NULL;\n+--------------+------------+-------------+--------------+------------------+-----------+-------------+------------------+\n| length(NULL) | size(NULL) | count(NULL) | NULL IS NULL | NULL IS NOT NULL | sin(NULL) | (NULL+NULL) | [1,NULL] IS NULL |\n+--------------+------------+-------------+--------------+------------------+-----------+-------------+------------------+\n| __NULL__     | __NULL__   | 0           | true         | false            | __NULL__  | __NULL__    | false            |\n+--------------+------------+-------------+--------------+------------------+-----------+-------------+------------------+\n\n# \u521b\u5efa map \u6570\u636e\uff0c\u5224\u65ad map \u7684 name \u5c5e\u6027\u662f\u5426\u4e0d\u4e3a NULL\u3002\nnebula&gt; WITH {name: null} AS `map` \\\n        RETURN `map`.name IS NOT NULL;\n+----------------------+\n| map.name IS NOT NULL |\n+----------------------+\n| false                |\n+----------------------+\n\n# \u521b\u5efa map1\u3001map2\u3001map3 \u7684\u6570\u636e\uff0c\u5e76\u5224\u65ad\u8fd4\u56de\u5176 name \u5c5e\u6027\u662f\u5426\u4e3a NULL\u3002\nnebula&gt; WITH {name: 'Mats', name2: 'Pontus'} AS map1, \\\n        {name: null} AS map2, {notName: 0, notName2: null } AS map3 \\\n        RETURN map1.name IS NULL, map2.name IS NOT NULL, map3.name IS NULL;\n+-------------------+-----------------------+-------------------+\n| map1.name IS NULL | map2.name IS NOT NULL | map3.name IS NULL |\n+-------------------+-----------------------+-------------------+\n| false             | false                 | true              |\n+-------------------+-----------------------+-------------------+\n\n# \u67e5\u8be2\u6240\u6709 Tag \u4e3a player \u7684\u70b9\u6570\u636e\uff0c\u5224\u65ad\u5e76\u8fd4\u56de\u70b9\u7684 age \u5c5e\u6027\u662f\u5426\u4e3a NULL\u3001name \u5c5e\u6027\u662f\u5426\u4e0d\u4e3a NULL\u3001empty \u5c5e\u6027\u662f\u5426\u4e3a NULL\u3002\nnebula&gt; MATCH (n:player) \\\n        RETURN n.player.age IS NULL, n.player.name IS NOT NULL, n.player.empty IS NULL;\n+----------------------+---------------------------+------------------------+\n| n.player.age IS NULL | n.player.name IS NOT NULL | n.player.empty IS NULL |\n+----------------------+---------------------------+------------------------+\n| false                | true                      | true                   |\n| false                | true                      | true                   |\n...\n</code></pre>"},{"location":"3.ngql-guide/5.operators/1.comparison/#is_not_empty","title":"<code>IS [NOT] EMPTY</code>","text":"<pre><code># \u5224\u65ad null \u662f\u5426\u4e0d\u5b58\u5728\u3002\nnebula&gt; RETURN null IS EMPTY;\n+---------------+\n| NULL IS EMPTY |\n+---------------+\n| false         |\n+---------------+\n\n# \u5224\u65ad a \u5b57\u7b26\u4e32\u662f\u5426\u5b58\u5728\u3002\nnebula&gt; RETURN \"a\" IS NOT EMPTY;\n+------------------+\n| \"a\" IS NOT EMPTY |\n+------------------+\n| true             |\n+------------------+\n\n# \u904d\u5386\u6240\u6709 player100 \u6307\u5411\u7684\u76ee\u7684\u70b9\uff0c\u5e76\u8fd4\u56de\u76ee\u7684\u70b9\u6570\u636e name \u5c5e\u6027\u5b58\u5728\u7684\u70b9 id\u3002\nnebula&gt; GO FROM \"player100\" OVER * WHERE properties($$).name IS NOT EMPTY YIELD dst(edge);\n+-------------+\n| dst(EDGE)   |\n+-------------+\n| \"team204\"   |\n| \"player101\" |\n| \"player125\" |\n+-------------+\n</code></pre>"},{"location":"3.ngql-guide/5.operators/10.arithmetic/","title":"\u7b97\u672f\u8fd0\u7b97\u7b26","text":"<p>NebulaGraph \u652f\u6301\u7684\u7b97\u672f\u8fd0\u7b97\u7b26\u5982\u4e0b\u3002</p> \u7b26\u53f7 \u8bf4\u660e <code>+</code> \u52a0\u6cd5 <code>-</code> \u51cf\u6cd5 <code>*</code> \u4e58\u6cd5 <code>/</code> \u9664\u6cd5 <code>%</code> \u53d6\u6a21 <code>-</code> \u8d1f\u6570\u7b26\u53f7"},{"location":"3.ngql-guide/5.operators/10.arithmetic/#_2","title":"\u793a\u4f8b","text":"<pre><code># \u8fd4\u56de 1+2 \u7684\u7ed3\u679c\u3002\nnebula&gt; RETURN 1+2 AS result;\n+--------+\n| result |\n+--------+\n| 3      |\n+--------+\n\n# \u8fd4\u56de -10+5 \u7684\u7ed3\u679c\u3002\nnebula&gt; RETURN -10+5 AS result;\n+--------+\n| result |\n+--------+\n| -5     |\n+--------+\n\n# \u8fd4\u56de (3*8)%5 \u7684\u7ed3\u679c\u3002\nnebula&gt; RETURN (3*8)%5 AS result;\n+--------+\n| result |\n+--------+\n| 4      |\n+--------+\n</code></pre>"},{"location":"3.ngql-guide/5.operators/2.boolean/","title":"\u5e03\u5c14\u7b26","text":"<p>NebulaGraph \u652f\u6301\u7684\u5e03\u5c14\u7b26\u5982\u4e0b\u3002</p> \u7b26\u53f7 \u8bf4\u660e AND \u903b\u8f91\u4e0e OR \u903b\u8f91\u6216 NOT \u903b\u8f91\u975e XOR \u903b\u8f91\u5f02\u6216 <p>\u5bf9\u4e8e\u4ee5\u4e0a\u8fd0\u7b97\u7684\u4f18\u5148\u7ea7\uff0c\u8bf7\u53c2\u89c1\u8fd0\u7b97\u4f18\u5148\u7ea7\u3002</p> <p>\u5bf9\u4e8e\u5e26\u6709<code>NULL</code>\u7684\u903b\u8f91\u8fd0\u7b97\uff0c\u8bf7\u53c2\u89c1 NULL\u3002</p> <p>Note</p> <p>\u975e 0 \u6570\u5b57\u4e0d\u80fd\u8f6c\u6362\u4e3a\u5e03\u5c14\u503c\u3002</p>"},{"location":"3.ngql-guide/5.operators/4.pipe/","title":"\u7ba1\u9053\u7b26","text":"<p>nGQL \u652f\u6301\u4f7f\u7528\u7ba1\u9053\u7b26\uff08|\uff09\u5c06\u591a\u4e2a\u67e5\u8be2\u7ec4\u5408\u8d77\u6765\u3002</p>"},{"location":"3.ngql-guide/5.operators/4.pipe/#opencypher","title":"openCypher \u517c\u5bb9\u6027","text":"<p>\u7ba1\u9053\u7b26\u4ec5\u9002\u7528\u4e8e\u539f\u751f nGQL\u3002</p>"},{"location":"3.ngql-guide/5.operators/4.pipe/#_2","title":"\u8bed\u6cd5","text":"<p>nGQL \u548c SQL \u4e4b\u95f4\u7684\u4e00\u4e2a\u4e3b\u8981\u533a\u522b\u662f\u5b50\u67e5\u8be2\u7684\u7ec4\u6210\u65b9\u5f0f\u3002</p> <ul> <li>\u5728 SQL \u4e2d\uff0c\u5b50\u67e5\u8be2\u662f\u5d4c\u5957\u5728\u67e5\u8be2\u8bed\u53e5\u4e2d\u7684\u3002</li> </ul> <ul> <li>\u5728 nGQL \u4e2d\uff0c\u5b50\u67e5\u8be2\u662f\u901a\u8fc7\u7c7b\u4f3c shell \u4e2d\u7684\u7ba1\u9053\u7b26\uff08<code>|</code>\uff09\u5b9e\u73b0\u7684\u3002</li> </ul>"},{"location":"3.ngql-guide/5.operators/4.pipe/#_3","title":"\u793a\u4f8b","text":"<pre><code>nebula&gt; GO FROM \"player100\" OVER follow \\\n        YIELD dst(edge) AS dstid, properties($$).name AS Name | \\\n        GO FROM $-.dstid OVER follow YIELD dst(edge);\n\n+-------------+\n| dst(EDGE)   |\n+-------------+\n| \"player100\" |\n| \"player102\" |\n| \"player125\" |\n| \"player100\" |\n+-------------+\n</code></pre> <p>\u5fc5\u987b\u5728<code>YIELD</code>\u5b50\u53e5\u4e2d\u4e3a\u9700\u8981\u7684\u8fd4\u56de\u7ed3\u679c\u8bbe\u7f6e\u522b\u540d\uff0c\u624d\u80fd\u5728\u7ba1\u9053\u7b26\u53f3\u4fa7\u4f7f\u7528\u5f15\u7528\u7b26<code>$-</code>\uff0c\u4f8b\u5982\u793a\u4f8b\u4e2d\u7684<code>$-.dstid</code>\u3002</p>"},{"location":"3.ngql-guide/5.operators/4.pipe/#_4","title":"\u6027\u80fd\u63d0\u793a","text":"<p>NebulaGraph \u4e2d\u7684\u7ba1\u9053\u5bf9\u6027\u80fd\u6709\u5f71\u54cd\uff0c\u4ee5<code>A | B</code>\u4e3a\u4f8b\uff0c\u4f53\u73b0\u5728\u4ee5\u4e0b\u51e0\u4e2a\u65b9\u9762\uff1a</p> <ol> <li> <p>\u7ba1\u9053\u662f\u540c\u6b65\u64cd\u4f5c\u3002\u4e5f\u5373\u9700\u8981\u7ba1\u9053\u4e4b\u524d\u7684\u5b50\u53e5<code>A</code>\u6267\u884c\u5b8c\u6bd5\u540e\uff0c\u6570\u636e\u624d\u80fd\u6574\u4f53\u8fdb\u5165\u7ba1\u9053\u5b50\u53e5\u3002</p> </li> <li> <p>\u5982\u679c<code>A</code>\u53d1\u5927\u91cf\u6570\u636e\u7ed9 <code>|</code>\uff0c\u6574\u4e2a\u67e5\u8be2\u8bf7\u6c42\u7684\u603b\u4f53\u65f6\u5ef6\u53ef\u80fd\u4f1a\u975e\u5e38\u5927\u3002\u6b64\u65f6\u53ef\u4ee5\u5c1d\u8bd5\u62c6\u5206\u8fd9\u4e2a\u8bed\u53e5\uff1a</p> <ol> <li> <p>\u5e94\u7528\u7a0b\u5e8f\u53d1\u9001<code>A</code>\uff0c </p> </li> <li> <p>\u5c06\u6536\u5230\u7684\u8fd4\u56de\u7ed3\u679c\u5728\u5e94\u7528\u7a0b\u5e8f\u62c6\u5206\uff0c</p> </li> <li> <p>\u5e76\u53d1\u53d1\u9001\u7ed9\u591a\u4e2a graphd\uff0c</p> </li> <li> <p>\u6bcf\u4e2a graphd \u6267\u884c\u90e8\u5206 B\u3002</p> </li> </ol> <p>\u8fd9\u6837\u901a\u5e38\u6bd4\u5355\u4e2a graphd \u6267\u884c\u5b8c\u6574\u5730<code>A | B</code>\u8981\u5feb\u5f88\u591a\u3002</p> </li> </ol>"},{"location":"3.ngql-guide/5.operators/6.set/","title":"\u96c6\u5408\u8fd0\u7b97\u7b26","text":"<p>\u5408\u5e76\u591a\u4e2a\u8bf7\u6c42\u65f6\uff0c\u53ef\u4ee5\u4f7f\u7528\u96c6\u5408\u8fd0\u7b97\u7b26\uff0c\u5305\u62ec<code>UNION</code>\u3001<code>UNION ALL</code>\u3001<code>INTERSECT</code>\u548c<code>MINUS</code>\u3002</p> <p>\u6240\u6709\u96c6\u5408\u8fd0\u7b97\u7b26\u7684\u4f18\u5148\u7ea7\u76f8\u540c\uff0c\u5982\u679c\u4e00\u4e2a nGQL \u8bed\u53e5\u4e2d\u6709\u591a\u4e2a\u96c6\u5408\u8fd0\u7b97\u7b26\uff0cNebulaGraph \u4f1a\u4ece\u5de6\u5230\u53f3\u8fdb\u884c\u8ba1\u7b97\uff0c\u9664\u975e\u7528\u62ec\u53f7\u6307\u5b9a\u987a\u5e8f\u3002</p> <p>Caution</p> <p>\u96c6\u5408\u8fd0\u7b97\u7b26\u524d\u540e\u7684\u67e5\u8be2\u8bed\u53e5\u4e2d\u5b9a\u4e49\u7684\u53d8\u91cf\u540d\u53ca\u987a\u5e8f\u5fc5\u9700\u4fdd\u6301\u4e00\u81f4\uff0c\u4f8b\u5982<code>RETURN a,b,c UNION RETURN a,b,c</code>\u4e2d\u7684<code>a,b,c</code>\u7684\u540d\u79f0\u53ca\u987a\u5e8f\u9700\u8981\u4fdd\u6301\u4e00\u81f4\u3002</p>"},{"location":"3.ngql-guide/5.operators/6.set/#unionunion_distinctunion_all","title":"UNION\u3001UNION DISTINCT\u3001UNION ALL","text":"<pre><code>&lt;left&gt; UNION [DISTINCT | ALL] &lt;right&gt; [ UNION [DISTINCT | ALL] &lt;right&gt; ...]\n</code></pre> <ul> <li>\u8fd0\u7b97\u7b26<code>UNION DISTINCT</code>\uff08\u6216\u4f7f\u7528\u7f29\u5199<code>UNION</code>\uff09\u8fd4\u56de\u4e24\u4e2a\u96c6\u5408 A \u548c B \u7684\u5e76\u96c6\uff0c\u4e0d\u5305\u542b\u91cd\u590d\u7684\u5143\u7d20\u3002</li> </ul> <ul> <li>\u8fd0\u7b97\u7b26<code>UNION ALL</code>\u8fd4\u56de\u4e24\u4e2a\u96c6\u5408 A \u548c B \u7684\u5e76\u96c6\uff0c\u5305\u542b\u91cd\u590d\u7684\u5143\u7d20\u3002</li> </ul> <ul> <li><code>left</code>\u548c<code>right</code>\u5fc5\u987b\u6709\u76f8\u540c\u6570\u91cf\u7684\u5217\u548c\u6570\u636e\u7c7b\u578b\u3002\u5982\u679c\u9700\u8981\u8f6c\u6362\u6570\u636e\u7c7b\u578b\uff0c\u8bf7\u53c2\u89c1\u7c7b\u578b\u8f6c\u6362\u3002</li> </ul>"},{"location":"3.ngql-guide/5.operators/6.set/#_2","title":"\u793a\u4f8b","text":"<pre><code># \u8fd4\u56de\u4e24\u4e2a\u67e5\u8be2\u7ed3\u679c\u7684\u5e76\u96c6\uff0c\u4e0d\u5305\u542b\u91cd\u590d\u7684\u5143\u7d20\u3002\nnebula&gt; GO FROM \"player102\" OVER follow YIELD dst(edge) \\\n        UNION \\\n        GO FROM \"player100\" OVER follow YIELD dst(edge);\n+-------------+\n| dst(EDGE)   |\n+-------------+\n| \"player100\" |\n| \"player101\" |\n| \"player125\" |\n+-------------+\n\n# \u67e5\u8be2 Tag \u4e3a player \u7684\u70b9\uff0c\u6839\u636e\u540d\u79f0\u6392\u5e8f\u540e\u83b7\u53d6\u524d 3 \u6761\u6570\u636e\uff0c\u5e76\u4e0e\u6570\u7ec4\u5408\u5e76\u8fd4\u56de\uff0c\u4e0d\u5305\u542b\u91cd\u590d\u7684\u5143\u7d20\u3002\nnebula&gt; MATCH (v:player) \\\n        WITH v.player.name AS n \\\n        RETURN n ORDER BY n LIMIT 3 \\\n        UNION \\\n        UNWIND [\"Tony Parker\", \"Ben Simmons\"] AS n \\\n        RETURN n;\n+---------------------+\n| n                   |\n+---------------------+\n| \"Amar'e Stoudemire\" |\n| \"Aron Baynes\"       |\n| \"Ben Simmons\"       |\n| \"Tony Parker\"       |\n+---------------------+\n\n# \u8fd4\u56de\u4e24\u4e2a\u67e5\u8be2\u7ed3\u679c\u7684\u5e76\u96c6\uff0c\u5305\u542b\u91cd\u590d\u7684\u5143\u7d20\u3002\nnebula&gt; GO FROM \"player102\" OVER follow YIELD dst(edge) \\\n        UNION ALL \\\n        GO FROM \"player100\" OVER follow YIELD dst(edge);\n+-------------+\n| dst(EDGE)   |\n+-------------+\n| \"player100\" |\n| \"player101\" |\n| \"player101\" |\n| \"player125\" |\n+-------------+\n\n# \u67e5\u8be2 Tag \u4e3a player \u7684\u70b9\uff0c\u6839\u636e\u540d\u79f0\u6392\u5e8f\u540e\u83b7\u53d6\u524d 3 \u6761\u6570\u636e\uff0c\u5e76\u4e0e\u6570\u7ec4\u5408\u5e76\u8fd4\u56de\uff0c\u5305\u542b\u91cd\u590d\u7684\u5143\u7d20\u3002\nnebula&gt; MATCH (v:player) \\\n        WITH v.player.name AS n \\\n        RETURN n ORDER BY n LIMIT 3 \\\n        UNION ALL \\\n        UNWIND [\"Tony Parker\", \"Ben Simmons\"] AS n \\\n        RETURN n;\n+---------------------+\n| n                   |\n+---------------------+\n| \"Amar'e Stoudemire\" |\n| \"Aron Baynes\"       |\n| \"Ben Simmons\"       |\n| \"Tony Parker\"       |\n| \"Ben Simmons\"       |\n+---------------------+\n\n# UNION \u4e5f\u53ef\u4ee5\u548c YIELD \u8bed\u53e5\u4e00\u8d77\u4f7f\u7528\uff0c\u53bb\u91cd\u65f6\u4f1a\u68c0\u67e5\u6bcf\u4e00\u884c\u7684\u6240\u6709\u5217\uff0c\u6bcf\u5217\u90fd\u76f8\u540c\u65f6\u624d\u4f1a\u53bb\u91cd\u3002\nnebula&gt; GO FROM \"player102\" OVER follow \\\n        YIELD dst(edge) AS id, properties(edge).degree AS Degree, properties($$).age AS Age \\\n        UNION /* DISTINCT */ \\\n        GO FROM \"player100\" OVER follow \\\n        YIELD dst(edge) AS id, properties(edge).degree AS Degree, properties($$).age AS Age;\n+-------------+--------+-----+\n| id          | Degree | Age |\n+-------------+--------+-----+\n| \"player100\" | 75     | 42  |\n| \"player101\" | 75     | 36  |\n| \"player101\" | 95     | 36  |\n| \"player125\" | 95     | 41  |\n+-------------+--------+-----+\n</code></pre>"},{"location":"3.ngql-guide/5.operators/6.set/#intersect","title":"INTERSECT","text":"<pre><code>&lt;left&gt; INTERSECT &lt;right&gt;\n</code></pre> <ul> <li>\u8fd0\u7b97\u7b26<code>INTERSECT</code>\u8fd4\u56de\u4e24\u4e2a\u96c6\u5408 A \u548c B \u7684\u4ea4\u96c6\u3002</li> </ul> <ul> <li><code>left</code>\u548c<code>right</code>\u5fc5\u987b\u6709\u76f8\u540c\u6570\u91cf\u7684\u5217\u548c\u6570\u636e\u7c7b\u578b\u3002\u5982\u679c\u9700\u8981\u8f6c\u6362\u6570\u636e\u7c7b\u578b\uff0c\u8bf7\u53c2\u89c1\u7c7b\u578b\u8f6c\u6362\u3002</li> </ul>"},{"location":"3.ngql-guide/5.operators/6.set/#_3","title":"\u793a\u4f8b","text":"<pre><code># \u8fd4\u56de\u4e24\u4e2a\u67e5\u8be2\u7ed3\u679c\u7684\u4ea4\u96c6\u3002\nnebula&gt; GO FROM \"player102\" OVER follow \\\n        YIELD dst(edge) AS id, properties(edge).degree AS Degree, properties($$).age AS Age \\\n        INTERSECT \\\n        GO FROM \"player100\" OVER follow \\\n        YIELD dst(edge) AS id, properties(edge).degree AS Degree, properties($$).age AS Age;\n+----+--------+-----+\n| id | Degree | Age |\n+----+--------+-----+\n+----+--------+-----+\n\n# \u8fd4\u56de player102 \u7684\u90bb\u5c45\u548c\u8fb9\u6570\u636e\u4e0e player100 \u7684\u90bb\u5c45\u548c\u8fb9\u6570\u636e\u4e4b\u95f4\u7684\u4ea4\u96c6\u3002\nnebula&gt; MATCH (v:player)-[e:follow]-&gt;(v2) \\\n        WHERE id(v) == \"player102\" \\\n        RETURN id(v2) As id, e.degree As Degree, v2.player.age AS Age \\\n        INTERSECT \\\n        MATCH (v:player)-[e:follow]-&gt;(v2) \\\n        WHERE id(v) == \"player100\" \\\n        RETURN id(v2) As id, e.degree As Degree, v2.player.age AS Age;\n+----+--------+-----+\n| id | Degree | Age |\n+----+--------+-----+\n+----+--------+-----+\n\n# \u8fd4\u56de [1,2] \u4e0e [1,2,3,4] \u7684\u4ea4\u96c6\u3002\nnebula&gt; UNWIND [1,2] AS a RETURN a \\\n        INTERSECT \\\n        UNWIND [1,2,3,4] AS a \\\n        RETURN a;\n+---+\n| a |\n+---+\n| 1 |\n| 2 |\n+---+\n</code></pre>"},{"location":"3.ngql-guide/5.operators/6.set/#minus","title":"MINUS","text":"<pre><code>&lt;left&gt; MINUS &lt;right&gt;\n</code></pre> <p>\u8fd0\u7b97\u7b26<code>MINUS</code>\u8fd4\u56de\u4e24\u4e2a\u96c6\u5408 A \u548c B \u7684\u5dee\u5f02\uff0c\u5373<code>A-B</code>\u3002\u8bf7\u6ce8\u610f<code>left</code>\u548c<code>right</code>\u7684\u987a\u5e8f\uff0c<code>A-B</code>\u8868\u793a\u5728\u96c6\u5408 A \u4e2d\uff0c\u4f46\u662f\u4e0d\u5728\u96c6\u5408 B \u4e2d\u7684\u5143\u7d20\u3002</p>"},{"location":"3.ngql-guide/5.operators/6.set/#_4","title":"\u793a\u4f8b","text":"<pre><code># \u8fd4\u56de\u5728\u7b2c\u4e00\u4e2a\u67e5\u8be2\u7ed3\u679c\u4e2d\uff0c\u4f46\u662f\u4e0d\u5728\u7b2c\u4e8c\u4e2a\u67e5\u8be2\u7ed3\u679c\u4e2d\u7684\u5143\u7d20\u3002\nnebula&gt; GO FROM \"player100\" OVER follow YIELD dst(edge) \\\n        MINUS \\\n        GO FROM \"player102\" OVER follow YIELD dst(edge);\n+-------------+\n| dst(EDGE)   |\n+-------------+\n| \"player125\" |\n+-------------+\n\n# \u8fd4\u56de\u5728 player102 \u7684\u90bb\u5c45\u4e2d\uff0c\u4f46\u4e0d\u5728 player100 \u7684\u90bb\u5c45\u4e2d\u7684\u5143\u7d20\u3002\nnebula&gt; GO FROM \"player102\" OVER follow YIELD dst(edge) AS id \\\n        MINUS \\\n        GO FROM \"player100\" OVER follow YIELD dst(edge) AS id;\n+-------------+\n| id          |\n+-------------+\n| \"player100\" |\n+-------------+\n\n# \u8fd4\u56de\u5728 player102 \u7684\u90bb\u5c45\u4e2d\uff0c\u4f46\u4e0d\u5728 player100 \u7684\u90bb\u5c45\u4e2d\u7684\u5143\u7d20\u3002\nnebula&gt; MATCH (v:player)-[e:follow]-&gt;(v2) \\\n        WHERE id(v) ==\"player102\" \\\n        RETURN id(v2) AS id\\\n        MINUS \\\n        MATCH (v:player)-[e:follow]-&gt;(v2) \\\n        WHERE id(v) ==\"player100\" \\\n        RETURN id(v2) AS id;\n+-------------+\n| id          |\n+-------------+\n| \"player100\" |\n+-------------+\n\n# \u8fd4\u56de [1,2,3] \u4e2d\u4e0d\u4e0e 4 \u76f8\u540c\u7684\u5143\u7d20\u3002\nnebula&gt; UNWIND [1,2,3] AS a RETURN a \\\n        MINUS \\\n        WITH 4 AS a \\\n        RETURN a;\n+---+\n| a |\n+---+\n| 1 |\n| 2 |\n| 3 |\n+---+\n</code></pre>"},{"location":"3.ngql-guide/5.operators/6.set/#_5","title":"\u96c6\u5408\u8fd0\u7b97\u7b26\u548c\u7ba1\u9053\u7b26\u7684\u4f18\u5148\u7ea7","text":"<p>\u5f53\u67e5\u8be2\u5305\u542b\u96c6\u5408\u8fd0\u7b97\u7b26\u548c\u7ba1\u9053\u7b26\uff08|\uff09\u65f6\uff0c\u7ba1\u9053\u7b26\u7684\u4f18\u5148\u7ea7\u9ad8\u3002\u4f8b\u5982<code>GO FROM 1 UNION GO FROM 2 | GO FROM 3</code>\u76f8\u5f53\u4e8e<code>GO FROM 1 UNION (GO FROM 2 | GO FROM 3)</code>\u3002</p>"},{"location":"3.ngql-guide/5.operators/6.set/#_6","title":"\u793a\u4f8b","text":"<pre><code>nebula&gt; GO FROM \"player102\" OVER follow \\\n        YIELD dst(edge) AS play_dst  \\\n        UNION \\\n        GO FROM \"team200\" OVER serve REVERSELY \\\n        YIELD src(edge) AS play_src \\\n        | GO FROM $-.play_src OVER follow YIELD dst(edge) AS play_dst;\n\n+-------------+\n| play_dst    |\n+-------------+\n| \"player100\" |\n| \"player101\" |\n| \"player117\" |\n| \"player105\" |\n+-------------+\n</code></pre> <p>\u8be5\u67e5\u8be2\u4f1a\u5148\u6267\u884c\u7ea2\u6846\u5185\u7684\u8bed\u53e5\uff0c\u7136\u540e\u6267\u884c\u7eff\u6846\u7684<code>UNION</code>\u64cd\u4f5c\u3002</p> <p>\u5706\u62ec\u53f7\u53ef\u4ee5\u4fee\u6539\u6267\u884c\u7684\u4f18\u5148\u7ea7\uff0c\u4f8b\u5982\uff1a</p> <pre><code>nebula&gt; (GO FROM \"player102\" OVER follow \\\n        YIELD dst(edge) AS play_dst  \\\n        UNION \\\n        GO FROM \"team200\" OVER serve REVERSELY \\\n        YIELD src(edge) AS play_dst) \\\n        | GO FROM $-.play_dst OVER follow YIELD dst(edge) AS play_dst;\n</code></pre> <p>\u8be5\u67e5\u8be2\u4e2d\uff0c\u5706\u62ec\u53f7\u5305\u88f9\u7684\u90e8\u5206\u5148\u6267\u884c\uff0c\u5373\u5148\u6267\u884c<code>UNION</code>\u64cd\u4f5c\uff0c\u518d\u5c06\u7ed3\u679c\u7ed3\u5408\u7ba1\u9053\u7b26\u8fdb\u884c\u4e0b\u4e00\u6b65\u64cd\u4f5c\u3002</p>"},{"location":"3.ngql-guide/5.operators/7.string/","title":"\u5b57\u7b26\u4e32\u8fd0\u7b97\u7b26","text":"<p>NebulaGraph \u652f\u6301\u4f7f\u7528\u5b57\u7b26\u4e32\u8fd0\u7b97\u7b26\u8fdb\u884c\u8fde\u63a5\u3001\u641c\u7d22\u3001\u5339\u914d\u8fd0\u7b97\u3002\u652f\u6301\u7684\u8fd0\u7b97\u7b26\u5982\u4e0b\u3002</p> \u540d\u79f0 \u8bf4\u660e + \u8fde\u63a5\u5b57\u7b26\u4e32\u3002 CONTAINS \u5728\u5b57\u7b26\u4e32\u4e2d\u6267\u884c\u641c\u7d22\u3002 (NOT) IN \u5b57\u7b26\u4e32\u662f\u5426\u5339\u914d\u67d0\u4e2a\u503c\u3002 (NOT) STARTS WITH \u5728\u5b57\u7b26\u4e32\u7684\u5f00\u5934\u6267\u884c\u5339\u914d\u3002 (NOT) ENDS WITH \u5728\u5b57\u7b26\u4e32\u7684\u7ed3\u5c3e\u6267\u884c\u5339\u914d\u3002 \u6b63\u5219\u8868\u8fbe\u5f0f \u901a\u8fc7\u6b63\u5219\u8868\u8fbe\u5f0f\u5339\u914d\u5b57\u7b26\u4e32\u3002 <p>Note</p> <p>\u6240\u6709\u641c\u7d22\u6216\u5339\u914d\u90fd\u533a\u5206\u5927\u5c0f\u5199\u3002</p>"},{"location":"3.ngql-guide/5.operators/7.string/#_2","title":"\u793a\u4f8b","text":""},{"location":"3.ngql-guide/5.operators/7.string/#_3","title":"<code>+</code>","text":"<pre><code># \u8fd4\u56de\u8fde\u63a5\u540e\u7684\u5b57\u7b26\u4e32\u3002\nnebula&gt; RETURN 'a' + 'b';\n+-----------+\n| (\"a\"+\"b\") |\n+-----------+\n| \"ab\"      |\n+-----------+\nnebula&gt; UNWIND 'a' AS a UNWIND 'b' AS b RETURN a + b;\n+-------+\n| (a+b) |\n+-------+\n| \"ab\"  |\n+-------+\n</code></pre>"},{"location":"3.ngql-guide/5.operators/7.string/#contains","title":"<code>CONTAINS</code>","text":"<p><code>CONTAINS</code>\u8981\u6c42\u5f85\u8fd0\u7b97\u7684\u5de6\u53f3\u4e24\u8fb9\u90fd\u662f\u5b57\u7b26\u4e32\u7c7b\u578b\u3002</p> <pre><code># \u67e5\u8be2\u8fd4\u56de id \u503c\u4e3a player101\uff0c\u4e14\u76ee\u6807\u70b9\u5c5e\u6027 name \u4e2d\u542b\u6709\"ets\"\u7684\u6570\u636e\u3002\nnebula&gt; MATCH (s:player)-[e:serve]-&gt;(t:team) WHERE id(s) == \"player101\" \\\n        AND t.team.name CONTAINS \"ets\" RETURN s.player.name, e.start_year, e.end_year, t.team.name;\n+---------------+--------------+------------+-------------+\n| s.player.name | e.start_year | e.end_year | t.team.name |\n+---------------+--------------+------------+-------------+\n| \"Tony Parker\" | 2018         | 2019       | \"Hornets\"   |\n+---------------+--------------+------------+-------------+\n\n# \u67e5\u8be2\u8fd4\u56de player101 \u7684\u8fb9\u5c5e\u6027 start_year \u8f6c\u4e3a\u5b57\u7b26\u4e32\u540e\u542b\u6709\"19\"\uff0c\u4e14\u70b9\u5c5e\u6027 name \u4e2d\u542b\u6709\"ny\"\u7684\u6570\u636e\u3002\nnebula&gt; GO FROM \"player101\" OVER serve WHERE (STRING)properties(edge).start_year CONTAINS \"19\" AND \\\n        properties($^).name CONTAINS \"ny\" \\\n        YIELD properties($^).name, properties(edge).start_year, properties(edge).end_year, properties($$).name;\n+---------------------+-----------------------------+---------------------------+---------------------+\n| properties($^).name | properties(EDGE).start_year | properties(EDGE).end_year | properties($$).name |\n+---------------------+-----------------------------+---------------------------+---------------------+\n| \"Tony Parker\"       | 1999                        | 2018                      | \"Spurs\"             |\n+---------------------+-----------------------------+---------------------------+---------------------+\n\n# \u67e5\u8be2\u8fd4\u56de palyer101 \u6307\u5411\u7684\u76ee\u6807\u70b9\u5c5e\u6027 name \u4e2d\u4e0d\u542b\u6709\"ets\"\u7684\u6570\u636e\u3002\nnebula&gt; GO FROM \"player101\" OVER serve WHERE !(properties($$).name CONTAINS \"ets\") \\\n        YIELD properties($^).name, properties(edge).start_year, properties(edge).end_year, properties($$).name;\n+---------------------+-----------------------------+---------------------------+---------------------+\n| properties($^).name | properties(EDGE).start_year | properties(EDGE).end_year | properties($$).name |\n+---------------------+-----------------------------+---------------------------+---------------------+\n| \"Tony Parker\"       | 1999                        | 2018                      | \"Spurs\"             |\n+---------------------+-----------------------------+---------------------------+---------------------+\n</code></pre>"},{"location":"3.ngql-guide/5.operators/7.string/#not_in","title":"<code>(NOT) IN</code>","text":"<pre><code># \u8fd4\u56de\u5217\u8868\u4e2d\u662f\u5426\u542b\u6709\u67d0\u4e2a\u503c\u3002\nnebula&gt; RETURN  1 IN [1,2,3], \"Yao\" NOT IN [\"Yi\", \"Tim\", \"Kobe\"], NULL IN [\"Yi\", \"Tim\", \"Kobe\"];\n+----------------+------------------------------------+-------------------------------+\n| (1 IN [1,2,3]) | (\"Yao\" NOT IN [\"Yi\",\"Tim\",\"Kobe\"]) | (NULL IN [\"Yi\",\"Tim\",\"Kobe\"]) |\n+----------------+------------------------------------+-------------------------------+\n| true           | true                               | __NULL__                      |\n+----------------+------------------------------------+-------------------------------+\n</code></pre>"},{"location":"3.ngql-guide/5.operators/7.string/#not_starts_with","title":"<code>(NOT) STARTS WITH</code>","text":"<pre><code># \u8fd4\u56de\u662f\u5426\u4ee5\u67d0\u4e2a\u5b57\u7b26\u4e32\u5f00\u5934\u3002\nnebula&gt; RETURN 'apple' STARTS WITH 'app', 'apple' STARTS WITH 'a', 'apple' STARTS WITH toUpper('a');\n+-----------------------------+---------------------------+------------------------------------+\n| (\"apple\" STARTS WITH \"app\") | (\"apple\" STARTS WITH \"a\") | (\"apple\" STARTS WITH toUpper(\"a\")) |\n+-----------------------------+---------------------------+------------------------------------+\n| true                        | true                      | false                              |\n+-----------------------------+---------------------------+------------------------------------+\n\nnebula&gt; RETURN 'apple' STARTS WITH 'b','apple' NOT STARTS WITH 'app';\n+---------------------------+---------------------------------+\n| (\"apple\" STARTS WITH \"b\") | (\"apple\" NOT STARTS WITH \"app\") |\n+---------------------------+---------------------------------+\n| false                     | false                           |\n+---------------------------+---------------------------------+\n</code></pre>"},{"location":"3.ngql-guide/5.operators/7.string/#not_ends_with","title":"<code>(NOT) ENDS WITH</code>","text":"<pre><code># \u8fd4\u56de\u662f\u5426\u4ee5\u67d0\u4e2a\u5b57\u7b26\u4e32\u7ed3\u5c3e\u3002\nnebula&gt; RETURN 'apple' ENDS WITH 'app', 'apple' ENDS WITH 'e', 'apple' ENDS WITH 'E', 'apple' ENDS WITH 'b';\n+---------------------------+-------------------------+-------------------------+-------------------------+\n| (\"apple\" ENDS WITH \"app\") | (\"apple\" ENDS WITH \"e\") | (\"apple\" ENDS WITH \"E\") | (\"apple\" ENDS WITH \"b\") |\n+---------------------------+-------------------------+-------------------------+-------------------------+\n| false                     | true                    | false                   | false                   |\n+---------------------------+-------------------------+-------------------------+-------------------------+\n</code></pre>"},{"location":"3.ngql-guide/5.operators/7.string/#_4","title":"\u6b63\u5219\u8868\u8fbe\u5f0f","text":"<p>Note</p> <p>\u5f53\u524d\u4ec5 opencypher \u517c\u5bb9\u8bed\u53e5\uff08<code>MATCH</code>\u3001<code>WITH</code>\u7b49\uff09\u652f\u6301\u6b63\u5219\u8868\u8fbe\u5f0f\uff0c\u539f\u751f nGQL \u8bed\u53e5\uff08<code>FETCH</code>\u3001<code>GO</code>\u3001<code>LOOKUP</code>\u7b49\uff09\u4e0d\u652f\u6301\u6b63\u5219\u8868\u8fbe\u5f0f\u3002</p> <p>NebulaGraph \u652f\u6301\u4f7f\u7528\u6b63\u5219\u8868\u8fbe\u5f0f\u8fdb\u884c\u8fc7\u6ee4\uff0c\u6b63\u5219\u8868\u8fbe\u5f0f\u7684\u8bed\u6cd5\u662f\u7ee7\u627f\u81ea<code>std::regex</code>\uff0c\u7528\u6237\u53ef\u4ee5\u4f7f\u7528\u8bed\u6cd5<code>=~ '&lt;regexp&gt;'</code>\u8fdb\u884c\u6b63\u5219\u8868\u8fbe\u5f0f\u5339\u914d\u3002\u4f8b\u5982\uff1a</p> <pre><code># \u8fd4\u56de\u662f\u5426\u5339\u914d\u6b63\u5219\u8868\u8fbe\u5f0f\u3002\nnebula&gt; RETURN \"384748.39\" =~ \"\\\\d+(\\\\.\\\\d{2})?\";\n+--------------------------------+\n| (\"384748.39\"=~\"\\d+(\\.\\d{2})?\") |\n+--------------------------------+\n| true                           |\n+--------------------------------+\n\n# \u67e5\u8be2\u8fd4\u56de\u7b26\u5408\u6b63\u5219\u8868\u8fbe\u5f0f\u7684\u70b9\u6570\u636e\u3002\nnebula&gt; MATCH (v:player) WHERE v.player.name =~ 'Tony.*' RETURN v.player.name;\n+---------------+\n| v.player.name |\n+---------------+\n| \"Tony Parker\" |\n+---------------+\n</code></pre>"},{"location":"3.ngql-guide/5.operators/8.list/","title":"\u5217\u8868\u8fd0\u7b97\u7b26","text":"<p>NebulaGraph \u652f\u6301\u4f7f\u7528\u5217\u8868\uff08List\uff09\u8fd0\u7b97\u7b26\u8fdb\u884c\u8fd0\u7b97\u3002\u652f\u6301\u7684\u8fd0\u7b97\u7b26\u5982\u4e0b\u3002</p> \u540d\u79f0 \u8bf4\u660e + \u8fde\u63a5\u5217\u8868\u3002 IN \u5143\u7d20\u662f\u5426\u5b58\u5728\u4e8e\u5217\u8868\u4e2d\u3002 [] \u4f7f\u7528\u4e0b\u6807\u64cd\u4f5c\u7b26\u8bbf\u95ee\u5217\u8868\u4e2d\u7684\u5143\u7d20\u3002"},{"location":"3.ngql-guide/5.operators/8.list/#_2","title":"\u793a\u4f8b","text":"<pre><code># \u8fd4\u56de\u8fde\u63a5\u540e\u7684\u5217\u8868\u3002\nnebula&gt; YIELD [1,2,3,4,5]+[6,7] AS myList;\n+-----------------------+\n| myList                |\n+-----------------------+\n| [1, 2, 3, 4, 5, 6, 7] |\n+-----------------------+\n\n# \u8fd4\u56de\u5217\u8868\u4e2d\u7684\u5143\u7d20\u6570\u91cf\u3002\nnebula&gt; RETURN size([NULL, 1, 2]);\n+------------------+\n| size([NULL,1,2]) |\n+------------------+\n| 3                |\n+------------------+\n\n# \u8fd4\u56de NULL \u662f\u5426\u5b58\u5728\u5217\u8868\u4e2d\u3002\nnebula&gt; RETURN NULL IN [NULL, 1];\n+--------------------+\n| (NULL IN [NULL,1]) |\n+--------------------+\n| __NULL__           |\n+--------------------+\n\n# \u8fd4\u56de\u5728\u5217\u8868[2, 3, 4, 5]\u4e2d\u5b58\u5728\uff0c\u4e14\u4e5f\u5728\u5217\u8868[2, 3, 8]\u4e2d\u5b58\u5728\u7684\u5143\u7d20\uff0c\u5e76\u62c6\u5206\u663e\u793a\u3002\nnebula&gt; WITH [2, 3, 4, 5] AS numberlist \\\n    UNWIND numberlist AS number \\\n    WITH number \\\n    WHERE number IN [2, 3, 8] \\\n    RETURN number;\n+--------+\n| number |\n+--------+\n| 2      |\n| 3      |\n+--------+\n\n# \u8fd4\u56de\u5217\u8868\u4e2d\u4e0b\u6807\u4e3a 1 \u7684\u5143\u7d20\u3002\nnebula&gt; WITH ['Anne', 'John', 'Bill', 'Diane', 'Eve'] AS names RETURN names[1] AS result;\n+--------+\n| result |\n+--------+\n| \"John\" |\n+--------+\n</code></pre>"},{"location":"3.ngql-guide/5.operators/9.precedence/","title":"\u8fd0\u7b97\u7b26\u4f18\u5148\u7ea7","text":"<p>nGQL \u8fd0\u7b97\u7b26\u7684\u4f18\u5148\u7ea7\u4ece\u9ad8\u5230\u4f4e\u6392\u5217\u5982\u4e0b\uff08\u540c\u4e00\u884c\u7684\u8fd0\u7b97\u7b26\u4f18\u5148\u7ea7\u76f8\u540c\uff09\uff1a</p> <ul> <li><code>-</code>\uff08\u8d1f\u6570\uff09</li> <li><code>!</code>\u3001<code>NOT</code></li> <li><code>*</code>\u3001<code>/</code>\u3001<code>%</code></li> <li><code>-</code>\u3001<code>+</code></li> <li><code>==</code>\u3001<code>&gt;=</code>\u3001<code>&gt;</code>\u3001<code>&lt;=</code>\u3001<code>&lt;</code>\u3001<code>&lt;&gt;</code>\u3001<code>!=</code></li> <li><code>AND</code></li> <li><code>OR</code>\u3001<code>XOR</code></li> <li><code>=</code>\uff08\u8d4b\u503c\uff09</li> </ul> <p>\u5982\u679c\u8868\u8fbe\u5f0f\u4e2d\u6709\u76f8\u540c\u4f18\u5148\u7ea7\u7684\u8fd0\u7b97\u7b26\uff0c\u8fd0\u7b97\u662f\u4ece\u5de6\u5230\u53f3\u8fdb\u884c\uff0c\u53ea\u6709\u8d4b\u503c\u64cd\u4f5c\u662f\u4f8b\u5916\uff08\u4ece\u53f3\u5230\u5de6\u8fd0\u7b97\uff09\u3002</p> <p>\u8fd0\u7b97\u7b26\u7684\u4f18\u5148\u7ea7\u51b3\u5b9a\u8fd0\u7b97\u7684\u987a\u5e8f\uff0c\u8981\u663e\u5f0f\u4fee\u6539\u8fd0\u7b97\u987a\u5e8f\uff0c\u53ef\u4ee5\u4f7f\u7528\u5706\u62ec\u53f7\u3002</p>"},{"location":"3.ngql-guide/5.operators/9.precedence/#_2","title":"\u793a\u4f8b","text":"<pre><code>nebula&gt; RETURN 2+3*5;\n+-----------+\n| (2+(3*5)) |\n+-----------+\n| 17        |\n+-----------+\n\nnebula&gt; RETURN (2+3)*5;\n+-----------+\n| ((2+3)*5) |\n+-----------+\n| 25        |\n+-----------+\n</code></pre>"},{"location":"3.ngql-guide/5.operators/9.precedence/#opencypher","title":"openCypher \u517c\u5bb9\u6027","text":"<p>\u5728 openCypher \u4e2d\uff0c\u6bd4\u8f83\u64cd\u4f5c\u53ef\u4ee5\u4efb\u610f\u8fde\u63a5\uff0c\u4f8b\u5982<code>x &lt; y &lt;= z</code>\u7b49\u4ef7\u4e8e<code>x &lt; y AND y &lt;= z</code>\u3002</p> <p>\u5728 nGQL \u4e2d\uff0c<code>x &lt; y &lt;= z</code>\u7b49\u4ef7\u4e8e<code>(x &lt; y) &lt;= z</code>\uff0c<code>(x &lt; y)</code>\u7684\u7ed3\u679c\u662f\u4e00\u4e2a\u5e03\u5c14\u503c\uff0c\u518d\u5c06\u5e03\u5c14\u503c\u548c<code>z</code>\u6bd4\u8f83\uff0c\u6700\u7ec8\u7ed3\u679c\u662f<code>NULL</code>\u3002</p>"},{"location":"3.ngql-guide/6.functions-and-expressions/1.math/","title":"\u5185\u7f6e\u6570\u5b66\u51fd\u6570","text":"<p>\u672c\u6587\u4ecb\u7ecd NebulaGraph \u652f\u6301\u7684\u6570\u5b66\u51fd\u6570\u3002</p>"},{"location":"3.ngql-guide/6.functions-and-expressions/1.math/#abs","title":"abs()","text":"<p>abs() \u8fd4\u56de\u6307\u5b9a\u6570\u5b57\u7684\u7edd\u5bf9\u503c\u3002</p> <p>\u8bed\u6cd5\uff1a<code>abs(&lt;expression&gt;)</code></p> <ul> <li><code>expression</code>\uff1a\u7ed3\u679c\u7684\u6570\u636e\u7c7b\u578b\u4e3a double \u7684\u8868\u8fbe\u5f0f\u3002</li> </ul> <ul> <li>\u8fd4\u56de\u7c7b\u578b\uff1adouble\u3002</li> </ul> <p>\u793a\u4f8b\uff1a</p> <pre><code>nebula&gt; RETURN abs(-10);\n+------------+\n| abs(-(10)) |\n+------------+\n| 10         |\n+------------+\n\nnebula&gt; RETURN abs(5-6);\n+------------+\n| abs((5-6)) |\n+------------+\n| 1          |\n+------------+\n</code></pre>"},{"location":"3.ngql-guide/6.functions-and-expressions/1.math/#floor","title":"floor()","text":"<p>floor() \u8fd4\u56de\u5c0f\u4e8e\u6216\u7b49\u4e8e\u6307\u5b9a\u6570\u5b57\u7684\u6700\u5927\u6574\u6570\u3002</p> <p>\u8bed\u6cd5\uff1a<code>floor(&lt;expression&gt;)</code></p> <ul> <li><code>expression</code>\uff1a\u7ed3\u679c\u7684\u6570\u636e\u7c7b\u578b\u4e3a double \u7684\u8868\u8fbe\u5f0f\u3002</li> </ul> <ul> <li>\u8fd4\u56de\u7c7b\u578b\uff1adouble\u3002</li> </ul> <p>\u793a\u4f8b\uff1a</p> <pre><code>nebula&gt; RETURN floor(9.9);\n+------------+\n| floor(9.9) |\n+------------+\n| 9.0        |\n+------------+\n</code></pre>"},{"location":"3.ngql-guide/6.functions-and-expressions/1.math/#ceil","title":"ceil()","text":"<p>ceil() \u8fd4\u56de\u5927\u4e8e\u6216\u7b49\u4e8e\u6307\u5b9a\u6570\u5b57\u7684\u6700\u5c0f\u6574\u6570\u3002</p> <p>\u8bed\u6cd5\uff1a<code>ceil(&lt;expression&gt;)</code></p> <ul> <li><code>expression</code>\uff1a\u7ed3\u679c\u7684\u6570\u636e\u7c7b\u578b\u4e3a double \u7684\u8868\u8fbe\u5f0f\u3002</li> </ul> <ul> <li>\u8fd4\u56de\u7c7b\u578b\uff1adouble\u3002</li> </ul> <p>\u793a\u4f8b\uff1a</p> <pre><code>nebula&gt; RETURN ceil(9.1);\n+-----------+\n| ceil(9.1) |\n+-----------+\n| 10.0      |\n+-----------+\n</code></pre>"},{"location":"3.ngql-guide/6.functions-and-expressions/1.math/#round","title":"round()","text":"<p>round() \u8fd4\u56de\u6307\u5b9a\u6570\u5b57\u56db\u820d\u4e94\u5165\u540e\u7684\u503c\u3002\u6781\u7aef\u60c5\u51b5\u4e0b\u8bf7\u6ce8\u610f\u6d6e\u70b9\u6570\u7684\u7cbe\u5ea6\u95ee\u9898\u3002</p> <p>\u8bed\u6cd5\uff1a<code>round(&lt;expression&gt;, &lt;digit&gt;)</code></p> <ul> <li><code>expression</code>\uff1a\u7ed3\u679c\u7684\u6570\u636e\u7c7b\u578b\u4e3a double \u7684\u8868\u8fbe\u5f0f\u3002</li> </ul> <ul> <li><code>digit</code>\uff1a\u5c0f\u6570\u4f4d\u6570\u3002\u5c0f\u4e8e 0 \u65f6 \uff0c\u5728\u5c0f\u6570\u70b9\u5de6\u4fa7\u505a\u56db\u820d\u4e94\u5165\u3002\u6570\u636e\u7c7b\u578b\u4e3a int\u3002</li> </ul> <ul> <li>\u8fd4\u56de\u7c7b\u578b\uff1adouble\u3002</li> </ul> <p>\u793a\u4f8b\uff1a</p> <pre><code>nebula&gt; RETURN round(314.15926, 2);\n+--------------------+\n| round(314.15926,2) |\n+--------------------+\n| 314.16             |\n+--------------------+\n\nnebula&gt; RETURN round(314.15926, -1);\n+-----------------------+\n| round(314.15926,-(1)) |\n+-----------------------+\n| 310.0                 |\n+-----------------------+\n</code></pre>"},{"location":"3.ngql-guide/6.functions-and-expressions/1.math/#sqrt","title":"sqrt()","text":"<p>sqrt() \u8fd4\u56de\u6307\u5b9a\u6570\u5b57\u7684\u5e73\u65b9\u6839\u3002</p> <p>\u8bed\u6cd5\uff1a<code>sqrt(&lt;expression&gt;)</code></p> <ul> <li><code>expression</code>\uff1a\u7ed3\u679c\u7684\u6570\u636e\u7c7b\u578b\u4e3a double \u7684\u8868\u8fbe\u5f0f\u3002</li> </ul> <ul> <li>\u8fd4\u56de\u7c7b\u578b\uff1adouble\u3002</li> </ul> <p>\u793a\u4f8b\uff1a</p> <pre><code>nebula&gt; RETURN sqrt(9);\n+---------+\n| sqrt(9) |\n+---------+\n| 3.0     |\n+---------+\n</code></pre>"},{"location":"3.ngql-guide/6.functions-and-expressions/1.math/#cbrt","title":"cbrt()","text":"<p>cbrt() \u8fd4\u56de\u6307\u5b9a\u6570\u5b57\u7684\u7acb\u65b9\u6839\u3002</p> <p>\u8bed\u6cd5\uff1a<code>cbrt(&lt;expression&gt;)</code></p> <ul> <li><code>expression</code>\uff1a\u7ed3\u679c\u7684\u6570\u636e\u7c7b\u578b\u4e3a double \u7684\u8868\u8fbe\u5f0f\u3002</li> </ul> <ul> <li>\u8fd4\u56de\u7c7b\u578b\uff1adouble\u3002</li> </ul> <p>\u793a\u4f8b\uff1a</p> <pre><code>nebula&gt; RETURN cbrt(8);\n+---------+\n| cbrt(8) |\n+---------+\n| 2.0     |\n+---------+\n</code></pre>"},{"location":"3.ngql-guide/6.functions-and-expressions/1.math/#hypot","title":"hypot()","text":"<p>hypot() \u8fd4\u56de\u76f4\u89d2\u4e09\u89d2\u5f62\u7684\u659c\u8fb9\u957f\u3002</p> <p>\u8bed\u6cd5\uff1a<code>hypot(&lt;expression_x&gt;,&lt;expression_y&gt;)</code></p> <ul> <li><code>expression_x</code>\u3001<code>expression_y</code>\uff1a\u7ed3\u679c\u7684\u6570\u636e\u7c7b\u578b\u4e3a double \u7684\u8868\u8fbe\u5f0f\u3002\u8868\u793a\u76f4\u89d2\u4e09\u89d2\u5f62\u7684\u8fb9\u957f<code>x</code>\u548c<code>y</code>\u3002</li> </ul> <ul> <li>\u8fd4\u56de\u7c7b\u578b\uff1adouble\u3002</li> </ul> <p>\u793a\u4f8b\uff1a</p> <pre><code>nebula&gt; RETURN hypot(3,2*2);\n+----------------+\n| hypot(3,(2*2)) |\n+----------------+\n| 5.0            |\n+----------------+\n</code></pre>"},{"location":"3.ngql-guide/6.functions-and-expressions/1.math/#pow","title":"pow()","text":"<p>pow() \u8fd4\u56de\u6307\u5b9a\u6570\u5b57\u7684\u5e42\uff08x<sup>y</sup>\uff09\u3002</p> <p>\u8bed\u6cd5\uff1a<code>pow(&lt;expression_x&gt;,&lt;expression_y&gt;,)</code></p> <ul> <li><code>expression_x</code>\uff1a\u7ed3\u679c\u7684\u6570\u636e\u7c7b\u578b\u4e3a double \u7684\u8868\u8fbe\u5f0f\u3002\u8868\u793a\u5e95\u6570<code>x</code>\u3002</li> </ul> <ul> <li><code>expression_y</code>\uff1a\u7ed3\u679c\u7684\u6570\u636e\u7c7b\u578b\u4e3a double \u7684\u8868\u8fbe\u5f0f\u3002\u8868\u793a\u6307\u6570<code>y</code>\u3002</li> </ul> <ul> <li>\u8fd4\u56de\u7c7b\u578b\uff1adouble\u3002</li> </ul> <p>\u793a\u4f8b\uff1a</p> <pre><code>nebula&gt; RETURN pow(3,3);\n+----------+\n| pow(3,3) |\n+----------+\n| 27       |\n+----------+\n</code></pre>"},{"location":"3.ngql-guide/6.functions-and-expressions/1.math/#exp","title":"exp()","text":"<p>exp() \u8fd4\u56de\u81ea\u7136\u5e38\u6570 e \u7684\u5e42\uff08e<sup>x</sup>\uff09\u3002</p> <p>\u8bed\u6cd5\uff1a<code>exp(&lt;expression&gt;)</code></p> <ul> <li><code>expression</code>\uff1a\u7ed3\u679c\u7684\u6570\u636e\u7c7b\u578b\u4e3a double \u7684\u8868\u8fbe\u5f0f\u3002\u8868\u793a\u6307\u6570<code>x</code>\u3002</li> </ul> <ul> <li>\u8fd4\u56de\u7c7b\u578b\uff1adouble\u3002</li> </ul> <p>\u793a\u4f8b\uff1a</p> <pre><code>nebula&gt; RETURN exp(2);\n+------------------+\n| exp(2)           |\n+------------------+\n| 7.38905609893065 |\n+------------------+\n</code></pre>"},{"location":"3.ngql-guide/6.functions-and-expressions/1.math/#exp2","title":"exp2()","text":"<p>exp2() \u8fd4\u56de2\u7684\u5e42\uff082<sup>x</sup> \uff09\u3002</p> <p>\u8bed\u6cd5\uff1a<code>exp2(&lt;expression&gt;)</code></p> <ul> <li><code>expression</code>\uff1a\u7ed3\u679c\u7684\u6570\u636e\u7c7b\u578b\u4e3a double \u7684\u8868\u8fbe\u5f0f\u3002\u8868\u793a\u6307\u6570<code>x</code>\u3002</li> </ul> <ul> <li>\u8fd4\u56de\u7c7b\u578b\uff1adouble\u3002</li> </ul> <p>\u793a\u4f8b\uff1a</p> <pre><code>nebula&gt; RETURN exp2(3);\n+---------+\n| exp2(3) |\n+---------+\n| 8.0     |\n+---------+\n</code></pre>"},{"location":"3.ngql-guide/6.functions-and-expressions/1.math/#log","title":"log()","text":"<p>log() \u8fd4\u56de\u4ee5\u81ea\u7136\u6570 e \u4e3a\u5e95\u7684\u5bf9\u6570\uff08\\(log_{e}{N}\\)\uff09\u3002</p> <p>\u8bed\u6cd5\uff1a<code>log(&lt;expression&gt;)</code></p> <ul> <li><code>expression</code>\uff1a\u7ed3\u679c\u7684\u6570\u636e\u7c7b\u578b\u4e3a double \u7684\u8868\u8fbe\u5f0f\u3002\u8868\u793a\u771f\u6570<code>N</code>\u3002</li> </ul> <ul> <li>\u8fd4\u56de\u7c7b\u578b\uff1adouble\u3002</li> </ul> <p>\u793a\u4f8b\uff1a</p> <pre><code>nebula&gt; RETURN log(8);\n+--------------------+\n| log(8)             |\n+--------------------+\n| 2.0794415416798357 |\n+--------------------+\n</code></pre>"},{"location":"3.ngql-guide/6.functions-and-expressions/1.math/#log2","title":"log2()","text":"<p>log2() \u8fd4\u56de\u4ee5 2 \u4e3a\u5e95\u7684\u5bf9\u6570\uff08\\(log_{2}{N}\\)\uff09\u3002</p> <p>\u8bed\u6cd5\uff1a<code>log2(&lt;expression&gt;)</code></p> <ul> <li><code>expression</code>\uff1a\u7ed3\u679c\u7684\u6570\u636e\u7c7b\u578b\u4e3a double \u7684\u8868\u8fbe\u5f0f\u3002\u8868\u793a\u771f\u6570<code>N</code>\u3002</li> </ul> <ul> <li>\u8fd4\u56de\u7c7b\u578b\uff1adouble\u3002</li> </ul> <p>\u793a\u4f8b\uff1a</p> <pre><code>nebula&gt; RETURN log2(8);\n+---------+\n| log2(8) |\n+---------+\n| 3.0     |\n+---------+\n</code></pre>"},{"location":"3.ngql-guide/6.functions-and-expressions/1.math/#log10","title":"log10()","text":"<p>log10() \u8fd4\u56de\u4ee5 10 \u4e3a\u5e95\u7684\u5bf9\u6570\uff08\\(log_{10}{N}\\)\uff09\u3002</p> <p>\u8bed\u6cd5\uff1a<code>log10(&lt;expression&gt;)</code></p> <ul> <li><code>expression</code>\uff1a\u7ed3\u679c\u7684\u6570\u636e\u7c7b\u578b\u4e3a double \u7684\u8868\u8fbe\u5f0f\u3002\u8868\u793a\u771f\u6570<code>N</code>\u3002</li> </ul> <ul> <li>\u8fd4\u56de\u7c7b\u578b\uff1adouble\u3002</li> </ul> <p>\u793a\u4f8b\uff1a</p> <pre><code>nebula&gt; RETURN log10(100);\n+------------+\n| log10(100) |\n+------------+\n| 2.0        |\n+------------+\n</code></pre>"},{"location":"3.ngql-guide/6.functions-and-expressions/1.math/#sin","title":"sin()","text":"<p>sin() \u8fd4\u56de\u6307\u5b9a\u6570\u5b57\u7684\u6b63\u5f26\u503c\u3002\u53ef\u4ee5\u4f7f\u7528\u51fd\u6570<code>radians()</code>\u5c06\u89d2\u5ea6\u8f6c\u5316\u4e3a\u5f27\u5ea6\u3002</p> <p>\u8bed\u6cd5\uff1a<code>sin(&lt;expression&gt;)</code></p> <ul> <li><code>expression</code>\uff1a\u7ed3\u679c\u7684\u6570\u636e\u7c7b\u578b\u4e3a double \u7684\u8868\u8fbe\u5f0f\u3002</li> </ul> <ul> <li>\u8fd4\u56de\u7c7b\u578b\uff1adouble\u3002</li> </ul> <p>\u793a\u4f8b\uff1a</p> <pre><code>nebula&gt; RETURN sin(3);\n+--------------------+\n| sin(3)             |\n+--------------------+\n| 0.1411200080598672 |\n+--------------------+\n</code></pre>"},{"location":"3.ngql-guide/6.functions-and-expressions/1.math/#asin","title":"asin()","text":"<p>asin() \u8fd4\u56de\u6307\u5b9a\u6570\u5b57\u7684\u53cd\u6b63\u5f26\u503c\u3002\u53ef\u4ee5\u4f7f\u7528\u51fd\u6570<code>radians()</code>\u5c06\u89d2\u5ea6\u8f6c\u5316\u4e3a\u5f27\u5ea6\u3002</p> <p>\u8bed\u6cd5\uff1a<code>asin(&lt;expression&gt;)</code></p> <ul> <li><code>expression</code>\uff1a\u7ed3\u679c\u7684\u6570\u636e\u7c7b\u578b\u4e3a double \u7684\u8868\u8fbe\u5f0f\u3002</li> </ul> <ul> <li>\u8fd4\u56de\u7c7b\u578b\uff1adouble\u3002</li> </ul> <p>\u793a\u4f8b\uff1a</p> <pre><code>nebula&gt; RETURN asin(0.5);\n+--------------------+\n| asin(0.5)          |\n+--------------------+\n| 0.5235987755982989 |\n+--------------------+\n</code></pre>"},{"location":"3.ngql-guide/6.functions-and-expressions/1.math/#cos","title":"cos()","text":"<p>cos() \u8fd4\u56de\u6307\u5b9a\u6570\u5b57\u7684\u4f59\u5f26\u503c\u3002\u53ef\u4ee5\u4f7f\u7528\u51fd\u6570<code>radians()</code>\u5c06\u89d2\u5ea6\u8f6c\u5316\u4e3a\u5f27\u5ea6\u3002</p> <p>\u8bed\u6cd5\uff1a<code>cos(&lt;expression&gt;)</code></p> <ul> <li><code>expression</code>\uff1a\u7ed3\u679c\u7684\u6570\u636e\u7c7b\u578b\u4e3a double \u7684\u8868\u8fbe\u5f0f\u3002</li> </ul> <ul> <li>\u8fd4\u56de\u7c7b\u578b\uff1adouble\u3002</li> </ul> <p>\u793a\u4f8b\uff1a</p> <pre><code>nebula&gt; RETURN cos(0.5);\n+--------------------+\n| cos(0.5)           |\n+--------------------+\n| 0.8775825618903728 |\n+--------------------+\n</code></pre>"},{"location":"3.ngql-guide/6.functions-and-expressions/1.math/#acos","title":"acos()","text":"<p>acos() \u8fd4\u56de\u6307\u5b9a\u6570\u5b57\u7684\u53cd\u4f59\u5f26\u503c\u3002\u53ef\u4ee5\u4f7f\u7528\u51fd\u6570<code>radians()</code>\u5c06\u89d2\u5ea6\u8f6c\u5316\u4e3a\u5f27\u5ea6\u3002</p> <p>\u8bed\u6cd5\uff1a<code>acos(&lt;expression&gt;)</code></p> <ul> <li><code>expression</code>\uff1a\u7ed3\u679c\u7684\u6570\u636e\u7c7b\u578b\u4e3a double \u7684\u8868\u8fbe\u5f0f\u3002</li> </ul> <ul> <li>\u8fd4\u56de\u7c7b\u578b\uff1adouble\u3002</li> </ul> <p>\u793a\u4f8b\uff1a</p> <pre><code>nebula&gt; RETURN acos(0.5);\n+--------------------+\n| acos(0.5)          |\n+--------------------+\n| 1.0471975511965979 |\n+--------------------+\n</code></pre>"},{"location":"3.ngql-guide/6.functions-and-expressions/1.math/#tan","title":"tan()","text":"<p>tan() \u8fd4\u56de\u6307\u5b9a\u6570\u5b57\u7684\u6b63\u5207\u503c\u3002\u53ef\u4ee5\u4f7f\u7528\u51fd\u6570<code>radians()</code>\u5c06\u89d2\u5ea6\u8f6c\u5316\u4e3a\u5f27\u5ea6\u3002</p> <p>\u8bed\u6cd5\uff1a<code>tan(&lt;expression&gt;)</code></p> <ul> <li><code>expression</code>\uff1a\u7ed3\u679c\u7684\u6570\u636e\u7c7b\u578b\u4e3a double \u7684\u8868\u8fbe\u5f0f\u3002</li> </ul> <ul> <li>\u8fd4\u56de\u7c7b\u578b\uff1adouble\u3002</li> </ul> <p>\u793a\u4f8b\uff1a</p> <pre><code>nebula&gt; RETURN tan(0.5);\n+--------------------+\n| tan(0.5)           |\n+--------------------+\n| 0.5463024898437905 |\n+--------------------+\n</code></pre>"},{"location":"3.ngql-guide/6.functions-and-expressions/1.math/#atan","title":"atan()","text":"<p>atan() \u8fd4\u56de\u6307\u5b9a\u6570\u5b57\u7684\u53cd\u6b63\u5207\u503c\u3002\u53ef\u4ee5\u4f7f\u7528\u51fd\u6570<code>radians()</code>\u5c06\u89d2\u5ea6\u8f6c\u5316\u4e3a\u5f27\u5ea6\u3002</p> <p>\u8bed\u6cd5\uff1a<code>atan(&lt;expression&gt;)</code></p> <ul> <li><code>expression</code>\uff1a\u7ed3\u679c\u7684\u6570\u636e\u7c7b\u578b\u4e3a double \u7684\u8868\u8fbe\u5f0f\u3002</li> </ul> <ul> <li>\u8fd4\u56de\u7c7b\u578b\uff1adouble\u3002</li> </ul> <p>\u793a\u4f8b\uff1a</p> <pre><code>nebula&gt; RETURN atan(0.5);\n+--------------------+\n| atan(0.5)          |\n+--------------------+\n| 0.4636476090008061 |\n+--------------------+\n</code></pre>"},{"location":"3.ngql-guide/6.functions-and-expressions/1.math/#rand","title":"rand()","text":"<p>rand() \u8fd4\u56de [0,1) \u5185\u7684\u968f\u673a\u6d6e\u70b9\u6570\u3002</p> <p>\u8bed\u6cd5\uff1a<code>rand()</code></p> <ul> <li>\u8fd4\u56de\u7c7b\u578b\uff1adouble\u3002</li> </ul> <p>\u793a\u4f8b\uff1a</p> <pre><code>nebula&gt; RETURN rand();\n+--------------------+\n| rand()             |\n+--------------------+\n| 0.6545837172298736 |\n+--------------------+\n</code></pre>"},{"location":"3.ngql-guide/6.functions-and-expressions/1.math/#rand32","title":"rand32()","text":"<p>rand32() \u8fd4\u56de\u6307\u5b9a\u8303\u56f4\uff08<code>[min, max)</code>\uff09\u5185\u7684\u968f\u673a 32 \u4f4d\u6574\u6570\u3002</p> <p>\u8bed\u6cd5\uff1a<code>rand32(&lt;expression_min&gt;,&lt;expression_max&gt;)</code></p> <ul> <li><code>expression_min</code>\uff1a\u7ed3\u679c\u7684\u6570\u636e\u7c7b\u578b\u4e3a int \u7684\u8868\u8fbe\u5f0f\u3002\u8868\u793a\u6700\u5c0f\u503c<code>min</code>\u3002</li> </ul> <ul> <li><code>expression_max</code>\uff1a\u7ed3\u679c\u7684\u6570\u636e\u7c7b\u578b\u4e3a int \u7684\u8868\u8fbe\u5f0f\u3002\u8868\u793a\u6700\u5927\u503c<code>max</code>\u3002</li> </ul> <ul> <li>\u8fd4\u56de\u7c7b\u578b\uff1aint\u3002</li> </ul> <ul> <li>\u7528\u6237\u53ef\u4ee5\u53ea\u4f20\u5165\u4e00\u4e2a\u53c2\u6570\uff0c\u8be5\u53c2\u6570\u4f1a\u5224\u5b9a\u4e3a<code>max</code>\uff0c\u6b64\u65f6<code>min</code>\u9ed8\u8ba4\u4e3a<code>0</code>\u3002\u5982\u679c\u4e0d\u4f20\u5165\u53c2\u6570\uff0c\u6b64\u65f6\u4f1a\u4ece\u5e26\u7b26\u53f7\u7684 32 \u4f4d int \u8303\u56f4\u5185\u968f\u673a\u8fd4\u56de\u3002</li> </ul> <p>\u793a\u4f8b\uff1a</p> <pre><code>nebula&gt; RETURN rand32(1,100);\n+---------------+\n| rand32(1,100) |\n+---------------+\n| 63            |\n+---------------+\n</code></pre>"},{"location":"3.ngql-guide/6.functions-and-expressions/1.math/#rand64","title":"rand64()","text":"<p>rand64() \u8fd4\u56de\u6307\u5b9a\u8303\u56f4\uff08<code>[min, max)</code>\uff09\u5185\u7684\u968f\u673a 64 \u4f4d\u6574\u6570\u3002</p> <p>\u8bed\u6cd5\uff1a<code>rand64(&lt;expression_min&gt;,&lt;expression_max&gt;)</code></p> <ul> <li><code>expression_min</code>\uff1a\u7ed3\u679c\u7684\u6570\u636e\u7c7b\u578b\u4e3a int \u7684\u8868\u8fbe\u5f0f\u3002\u8868\u793a\u6700\u5c0f\u503c<code>min</code>\u3002</li> </ul> <ul> <li><code>expression_max</code>\uff1a\u7ed3\u679c\u7684\u6570\u636e\u7c7b\u578b\u4e3a int \u7684\u8868\u8fbe\u5f0f\u3002\u8868\u793a\u6700\u5927\u503c<code>max</code>\u3002</li> </ul> <ul> <li>\u8fd4\u56de\u7c7b\u578b\uff1aint\u3002</li> </ul> <ul> <li>\u7528\u6237\u53ef\u4ee5\u53ea\u4f20\u5165\u4e00\u4e2a\u53c2\u6570\uff0c\u8be5\u53c2\u6570\u4f1a\u5224\u5b9a\u4e3a<code>max</code>\uff0c\u6b64\u65f6<code>min</code>\u9ed8\u8ba4\u4e3a<code>0</code>\u3002\u5982\u679c\u4e0d\u4f20\u5165\u53c2\u6570\uff0c\u6b64\u65f6\u4f1a\u4ece\u5e26\u7b26\u53f7\u7684 64 \u4f4d int \u8303\u56f4\u5185\u968f\u673a\u8fd4\u56de\u3002</li> </ul> <p>\u793a\u4f8b\uff1a</p> <pre><code>nebula&gt; RETURN rand64(1,100);\n+---------------+\n| rand64(1,100) |\n+---------------+\n| 34            |\n+---------------+\n</code></pre>"},{"location":"3.ngql-guide/6.functions-and-expressions/1.math/#bit_and","title":"bit_and()","text":"<p>bit_and() \u8fd4\u56de\u6309\u4f4d\u8fdb\u884c AND \u8fd0\u7b97\u540e\u7684\u7ed3\u679c\u3002</p> <p>\u8bed\u6cd5\uff1a<code>bit_and(&lt;expression_1&gt;,&lt;expression_2&gt;)</code></p> <ul> <li><code>expression_1</code>\u3001<code>expression_2</code>\uff1a\u7ed3\u679c\u7684\u6570\u636e\u7c7b\u578b\u4e3a int \u7684\u8868\u8fbe\u5f0f\u3002</li> </ul> <ul> <li>\u8fd4\u56de\u7c7b\u578b\uff1aint\u3002</li> </ul> <p>\u793a\u4f8b\uff1a</p> <pre><code>nebula&gt; RETURN bit_and(5,6);\n+--------------+\n| bit_and(5,6) |\n+--------------+\n| 4            |\n+--------------+\n</code></pre>"},{"location":"3.ngql-guide/6.functions-and-expressions/1.math/#bit_or","title":"bit_or()","text":"<p>bit_or() \u8fd4\u56de\u6309\u4f4d\u8fdb\u884c OR \u8fd0\u7b97\u540e\u7684\u7ed3\u679c\u3002</p> <p>\u8bed\u6cd5\uff1a<code>bit_or(&lt;expression_1&gt;,&lt;expression_2&gt;)</code></p> <ul> <li><code>expression_1</code>\u3001<code>expression_2</code>\uff1a\u7ed3\u679c\u7684\u6570\u636e\u7c7b\u578b\u4e3a int \u7684\u8868\u8fbe\u5f0f\u3002</li> </ul> <ul> <li>\u8fd4\u56de\u7c7b\u578b\uff1aint\u3002</li> </ul> <p>\u793a\u4f8b\uff1a</p> <pre><code>nebula&gt; RETURN bit_or(5,6);\n+-------------+\n| bit_or(5,6) |\n+-------------+\n| 7           |\n+-------------+\n</code></pre>"},{"location":"3.ngql-guide/6.functions-and-expressions/1.math/#bit_xor","title":"bit_xor()","text":"<p>bit_xor() \u8fd4\u56de\u6309\u4f4d\u8fdb\u884c XOR \u8fd0\u7b97\u540e\u7684\u7ed3\u679c\u3002</p> <p>\u8bed\u6cd5\uff1a<code>bit_xor(&lt;expression_1&gt;,&lt;expression_2&gt;)</code></p> <ul> <li><code>expression_1</code>\u3001<code>expression_2</code>\uff1a\u7ed3\u679c\u7684\u6570\u636e\u7c7b\u578b\u4e3a int \u7684\u8868\u8fbe\u5f0f\u3002</li> </ul> <ul> <li>\u8fd4\u56de\u7c7b\u578b\uff1aint\u3002</li> </ul> <p>\u793a\u4f8b\uff1a</p> <pre><code>nebula&gt; RETURN bit_xor(5,6);\n+--------------+\n| bit_xor(5,6) |\n+--------------+\n| 3            |\n+--------------+\n</code></pre>"},{"location":"3.ngql-guide/6.functions-and-expressions/1.math/#size","title":"size()","text":"<p>size() \u8fd4\u56de\u5217\u8868\u6216\u6620\u5c04\u4e2d\u5143\u7d20\u7684\u6570\u91cf\uff0c\u6216\u8005\u8fd4\u56de\u5b57\u7b26\u4e32\u7684\u957f\u5ea6\u3002</p> <p>\u8bed\u6cd5\uff1a<code>size({&lt;expression&gt;|&lt;string&gt;})</code></p> <ul> <li><code>expression</code>\uff1a\u5217\u8868\u6216\u6620\u5c04\u7684\u8868\u8fbe\u5f0f\u3002</li> <li><code>string</code>\uff1a\u6307\u5b9a\u7684\u5b57\u7b26\u4e32\u3002</li> <li>\u8fd4\u56de\u7c7b\u578b\uff1aint\u3002</li> </ul> <p>\u793a\u4f8b\uff1a</p> <pre><code>nebula&gt; RETURN size([1,2,3,4]);\n+-----------------+\n| size([1,2,3,4]) |\n+-----------------+\n| 4               |\n+-----------------+\n</code></pre> <pre><code>nebula&gt; RETURN size(\"basketballplayer\") as size;\n+------+\n| size |\n+------+\n| 16   |\n+------+\n</code></pre>"},{"location":"3.ngql-guide/6.functions-and-expressions/1.math/#range","title":"range()","text":"<p>range() \u8fd4\u56de\u6307\u5b9a\u8303\u56f4\uff08<code>[start,end]</code>\uff09\u4e2d\u6307\u5b9a\u6b65\u957f\u7684\u503c\u7ec4\u6210\u7684\u5217\u8868\u3002</p> <p>\u8bed\u6cd5\uff1a<code>range(&lt;expression_start&gt;,&lt;expression_end&gt;[,&lt;expression_step&gt;])</code></p> <ul> <li><code>expression_start</code>\uff1a\u7ed3\u679c\u7684\u6570\u636e\u7c7b\u578b\u4e3a int \u7684\u8868\u8fbe\u5f0f\u3002\u8868\u793a\u8d77\u59cb\u503c<code>start</code>\u3002</li> </ul> <ul> <li><code>expression_end</code>\uff1a\u7ed3\u679c\u7684\u6570\u636e\u7c7b\u578b\u4e3a int \u7684\u8868\u8fbe\u5f0f\u3002\u8868\u793a\u7ed3\u675f\u503c<code>end</code>\u3002</li> </ul> <ul> <li><code>expression_step</code>\uff1a\u7ed3\u679c\u7684\u6570\u636e\u7c7b\u578b\u4e3a int \u7684\u8868\u8fbe\u5f0f\u3002\u8868\u793a\u6b65\u957f<code>step</code>\uff0c\u9ed8\u8ba4\u503c\u4e3a<code>1</code>\u3002</li> </ul> <ul> <li>\u8fd4\u56de\u7c7b\u578b\uff1alist\u3002</li> </ul> <p>\u793a\u4f8b\uff1a</p> <pre><code>nebula&gt; RETURN range(1,3*3,2);\n+------------------+\n| range(1,(3*3),2) |\n+------------------+\n| [1, 3, 5, 7, 9]  |\n+------------------+\n</code></pre>"},{"location":"3.ngql-guide/6.functions-and-expressions/1.math/#sign","title":"sign()","text":"<p>sign() \u8fd4\u56de\u6307\u5b9a\u6570\u5b57\u7684\u6b63\u8d1f\u53f7\u3002\u5982\u679c\u6570\u5b57\u4e3a<code>0</code>\uff0c\u5219\u8fd4\u56de<code>0</code>\uff1b\u5982\u679c\u6570\u5b57\u4e3a\u8d1f\u6570\uff0c\u5219\u8fd4\u56de<code>-1</code>\uff1b\u5982\u679c\u6570\u5b57\u4e3a\u6b63\u6570\uff0c\u5219\u8fd4\u56de<code>1</code>\u3002</p> <p>\u8bed\u6cd5\uff1a<code>sign(&lt;expression&gt;)</code></p> <ul> <li><code>expression</code>\uff1a\u7ed3\u679c\u7684\u6570\u636e\u7c7b\u578b\u4e3a double \u7684\u8868\u8fbe\u5f0f\u3002</li> </ul> <ul> <li>\u8fd4\u56de\u7c7b\u578b\uff1aint\u3002</li> </ul> <p>\u793a\u4f8b\uff1a</p> <pre><code>nebula&gt; RETURN sign(10);\n+----------+\n| sign(10) |\n+----------+\n| 1        |\n+----------+\n</code></pre>"},{"location":"3.ngql-guide/6.functions-and-expressions/1.math/#e","title":"e()","text":"<p>e() \u8fd4\u56de\u81ea\u7136\u5bf9\u6570\u7684\u5e95 e\uff082.718281828459045\uff09\u3002</p> <p>\u8bed\u6cd5\uff1a<code>e()</code></p> <ul> <li>\u8fd4\u56de\u7c7b\u578b\uff1adouble\u3002</li> </ul> <p>\u793a\u4f8b\uff1a</p> <pre><code>nebula&gt; RETURN e();\n+-------------------+\n| e()               |\n+-------------------+\n| 2.718281828459045 |\n+-------------------+\n</code></pre>"},{"location":"3.ngql-guide/6.functions-and-expressions/1.math/#pi","title":"pi()","text":"<p>pi() \u8fd4\u56de\u6570\u5b66\u5e38\u6570\u03c0\uff083.141592653589793\uff09\u3002</p> <p>\u8bed\u6cd5\uff1a<code>pi()</code></p> <ul> <li>\u8fd4\u56de\u7c7b\u578b\uff1adouble\u3002</li> </ul> <p>\u793a\u4f8b\uff1a</p> <pre><code>nebula&gt; RETURN pi();\n+-------------------+\n| pi()              |\n+-------------------+\n| 3.141592653589793 |\n+-------------------+\n</code></pre>"},{"location":"3.ngql-guide/6.functions-and-expressions/1.math/#radians","title":"radians()","text":"<p>radians() \u8fd4\u56de\u6307\u5b9a\u89d2\u5ea6\u7684\u5f27\u5ea6\u3002</p> <p>\u8bed\u6cd5\uff1a<code>radians(&lt;angle&gt;)</code></p> <ul> <li>\u8fd4\u56de\u7c7b\u578b\uff1adouble\u3002</li> </ul> <p>\u793a\u4f8b\uff1a</p> <pre><code>nebula&gt; RETURN radians(180);\n+-------------------+\n| radians(180)      |\n+-------------------+\n| 3.141592653589793 |\n+-------------------+\n</code></pre>"},{"location":"3.ngql-guide/6.functions-and-expressions/14.geo/","title":"geo \u51fd\u6570","text":"<p>geo \u51fd\u6570\u7528\u4e8e\u751f\u6210\u5730\u7406\u7a7a\u95f4\uff08GEOGRAPHY\uff09\u6570\u636e\u7c7b\u578b\u7684\u503c\u6216\u5bf9\u5176\u6267\u884c\u64cd\u4f5c\u3002</p> <p>\u5173\u4e8e\u5730\u7406\u7a7a\u95f4\u6570\u636e\u7c7b\u578b\u8bf4\u660e\u8bf7\u53c2\u89c1\u5730\u7406\u7a7a\u95f4\u3002</p>"},{"location":"3.ngql-guide/6.functions-and-expressions/14.geo/#_1","title":"\u51fd\u6570\u8bf4\u660e","text":"\u51fd\u6570 \u8fd4\u56de\u7c7b\u578b \u8bf4\u660e ST_Point(longitude, latitude) <code>GEOGRAPHY</code> \u521b\u5efa\u5305\u542b\u4e00\u4e2a\u70b9\u7684\u5730\u7406\u7a7a\u95f4\u3002 ST_GeogFromText(wkt_string) <code>GEOGRAPHY</code> \u8fd4\u56de\u4e0e\u4f20\u5165\u7684 WKT \u5b57\u7b26\u4e32\u5f62\u5f0f\u76f8\u5bf9\u5e94\u7684 GEOGRAPHY\u3002 ST_ASText(geography) <code>STRING</code> \u8fd4\u56de\u4f20\u5165\u7684 GEOGRAPHY \u7684 WKT \u5b57\u7b26\u4e32\u5f62\u5f0f\u3002 ST_Centroid(geography) <code>GEOGRAPHY</code> \u4ee5\u5355\u70b9 GEOGRAPHY \u7684\u5f62\u5f0f\u8fd4\u56de\u4f20\u5165\u7684 GEOGRAPHY \u7684\u5f62\u5fc3\u3002 ST_ISValid(geography) <code>BOOL</code> \u8fd4\u56de\u4f20\u5165\u7684 GEOGRAPHY \u662f\u5426\u6709\u6548\u3002 ST_Intersects(geography_1, geography_2) <code>BOOL</code> \u8fd4\u56de\u4f20\u5165\u7684\u4e24\u4e2a GEOGRAPHY \u662f\u5426\u6709\u4ea4\u96c6\u3002 ST_Covers(geography_1, geography_2) <code>BOOL</code> \u8fd4\u56de geography_1 \u662f\u5426\u5b8c\u5168\u5305\u542b geography_2\u3002\u5982\u679c geography_2 \u4e2d\u6ca1\u6709\u4f4d\u4e8e geography_1 \u5916\u90e8\u7684\u70b9\uff0c\u8fd4\u56de True\u3002 ST_CoveredBy(geography_1, geography_2) <code>BOOL</code> \u8fd4\u56de geography_2 \u662f\u5426\u5b8c\u5168\u5305\u542b geography_1\u3002\u5982\u679c geography_1 \u4e2d\u6ca1\u6709\u4f4d\u4e8e geography_2 \u5916\u90e8\u7684\u70b9\uff0c\u8fd4\u56de True\u3002 ST_DWithin(geography_1, geography_2, distance) <code>BOOL</code> \u5982\u679c geography_1 \u4e2d\u81f3\u5c11\u6709\u4e00\u4e2a\u70b9\u4e0e geography_2 \u4e2d\u7684\u4e00\u4e2a\u70b9\u7684\u8ddd\u79bb\u5c0f\u4e8e\u6216\u7b49\u4e8e distance \u53c2\u6570\uff08\u4ee5\u7c73\u4e3a\u5355\u4f4d\uff09\u6307\u5b9a\u7684\u8ddd\u79bb\uff0c\u5219\u8fd4\u56de True\u3002 ST_Distance(geography_1, geography_2) <code>FLOAT</code> \u8fd4\u56de\u4e24\u4e2a\u975e\u7a7a GEOGRAPHY \u4e4b\u95f4\u7684\u6700\u77ed\u8ddd\u79bb\uff08\u4ee5\u7c73\u4e3a\u5355\u4f4d\uff09\u3002 S2_CellIdFromPoint(point_geography) <code>INT</code> \u8fd4\u56de\u8986\u76d6\u70b9 GEOGRAPHY \u7684 S2 \u5355\u5143ID\u3002 S2_CoveringCellIds(geography) <code>ARRAY&lt;INT64&gt;</code> \u8fd4\u56de\u8986\u76d6\u4f20\u5165\u7684 GEOGRAPHY \u7684 S2 \u5355\u5143 ID \u7684\u6570\u7ec4\u3002"},{"location":"3.ngql-guide/6.functions-and-expressions/14.geo/#_2","title":"\u793a\u4f8b","text":"<pre><code>nebula&gt; RETURN ST_ASText(ST_Point(1,1));\n+--------------------------+\n| ST_ASText(ST_Point(1,1)) |\n+--------------------------+\n| \"POINT(1 1)\"             |\n+--------------------------+\n\nnebula&gt; RETURN ST_ASText(ST_GeogFromText(\"POINT(3 8)\"));\n+------------------------------------------+\n| ST_ASText(ST_GeogFromText(\"POINT(3 8)\")) |\n+------------------------------------------+\n| \"POINT(3 8)\"                             |\n+------------------------------------------+\n\nnebula&gt; RETURN ST_ASTEXT(ST_Centroid(ST_GeogFromText(\"LineString(0 1,1 0)\")));\n+----------------------------------------------------------------+\n| ST_ASTEXT(ST_Centroid(ST_GeogFromText(\"LineString(0 1,1 0)\"))) |\n+----------------------------------------------------------------+\n| \"POINT(0.5000380800773782 0.5000190382261059)\"                 |\n+----------------------------------------------------------------+\n\nnebula&gt; RETURN ST_ISValid(ST_GeogFromText(\"POINT(3 8)\"));\n+-------------------------------------------+\n| ST_ISValid(ST_GeogFromText(\"POINT(3 8)\")) |\n+-------------------------------------------+\n| true                                      |\n+-------------------------------------------+\n\nnebula&gt; RETURN ST_Intersects(ST_GeogFromText(\"LineString(0 1,1 0)\"),ST_GeogFromText(\"LineString(0 0,1 1)\"));\n+----------------------------------------------------------------------------------------------+\n| ST_Intersects(ST_GeogFromText(\"LineString(0 1,1 0)\"),ST_GeogFromText(\"LineString(0 0,1 1)\")) |\n+----------------------------------------------------------------------------------------------+\n| true                                                                                         |\n+----------------------------------------------------------------------------------------------+\n\nnebula&gt; RETURN ST_Covers(ST_GeogFromText(\"POLYGON((0 0,10 0,10 10,0 10,0 0))\"),ST_Point(1,2));\n+--------------------------------------------------------------------------------+\n| ST_Covers(ST_GeogFromText(\"POLYGON((0 0,10 0,10 10,0 10,0 0))\"),ST_Point(1,2)) |\n+--------------------------------------------------------------------------------+\n| true                                                                           |\n+--------------------------------------------------------------------------------+\n\nnebula&gt; RETURN ST_CoveredBy(ST_Point(1,2),ST_GeogFromText(\"POLYGON((0 0,10 0,10 10,0 10,0 0))\"));\n+-----------------------------------------------------------------------------------+\n| ST_CoveredBy(ST_Point(1,2),ST_GeogFromText(\"POLYGON((0 0,10 0,10 10,0 10,0 0))\")) |\n+-----------------------------------------------------------------------------------+\n| true                                                                              |\n+-----------------------------------------------------------------------------------+\n\nnebula&gt; RETURN ST_dwithin(ST_GeogFromText(\"Point(0 0)\"),ST_GeogFromText(\"Point(10 10)\"),20000000000.0);\n+---------------------------------------------------------------------------------------+\n| ST_dwithin(ST_GeogFromText(\"Point(0 0)\"),ST_GeogFromText(\"Point(10 10)\"),20000000000) |\n+---------------------------------------------------------------------------------------+\n| true                                                                                  |\n+---------------------------------------------------------------------------------------+\n\nnebula&gt; RETURN ST_Distance(ST_GeogFromText(\"Point(0 0)\"),ST_GeogFromText(\"Point(10 10)\"));\n+----------------------------------------------------------------------------+\n| ST_Distance(ST_GeogFromText(\"Point(0 0)\"),ST_GeogFromText(\"Point(10 10)\")) |\n+----------------------------------------------------------------------------+\n| 1.5685230187677438e+06                                                     |\n+----------------------------------------------------------------------------+\n\nnebula&gt; RETURN S2_CellIdFromPoint(ST_GeogFromText(\"Point(1 1)\"));\n+---------------------------------------------------+\n| S2_CellIdFromPoint(ST_GeogFromText(\"Point(1 1)\")) |\n+---------------------------------------------------+\n| 1153277837650709461                               |\n+---------------------------------------------------+\n\nnebula&gt; RETURN S2_CoveringCellIds(ST_GeogFromText(\"POLYGON((0 1, 1 2, 2 3, 0 1))\"));\n+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------+\n| S2_CoveringCellIds(ST_GeogFromText(\"POLYGON((0 1, 1 2, 2 3, 0 1))\"))                                                                                                     |\n+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------+\n| [1152391494368201343, 1153466862374223872, 1153554823304445952, 1153836298281156608, 1153959443583467520, 1154240918560178176, 1160503736791990272, 1160591697722212352] |\n+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------+\n</code></pre>"},{"location":"3.ngql-guide/6.functions-and-expressions/15.aggregating/","title":"\u805a\u5408\u51fd\u6570","text":"<p>\u672c\u6587\u4ecb\u7ecd NebulaGraph \u652f\u6301\u7684\u805a\u5408\u51fd\u6570\u3002</p>"},{"location":"3.ngql-guide/6.functions-and-expressions/15.aggregating/#avg","title":"avg()","text":"<p>avg() \u8fd4\u56de\u53c2\u6570\u7684\u5e73\u5747\u503c\u3002</p> <p>\u8bed\u6cd5\uff1a<code>avg(&lt;expression&gt;)</code></p> <ul> <li>\u8fd4\u56de\u7c7b\u578b\uff1adouble\u3002</li> </ul> <p>\u793a\u4f8b\uff1a</p> <pre><code># \u8fd4\u56de Tag player \u7684 age \u5c5e\u6027\u7684\u5e73\u5747\u503c\u3002\nnebula&gt; MATCH (v:player) RETURN avg(v.player.age);\n+--------------------+\n| avg(v.player.age)  |\n+--------------------+\n| 33.294117647058826 |\n+--------------------+\n</code></pre>"},{"location":"3.ngql-guide/6.functions-and-expressions/15.aggregating/#count","title":"count()","text":"<p>count() \u8fd4\u56de\u53c2\u6570\u7684\u6570\u91cf\u3002</p> <ul> <li>\uff08\u539f\u751f nGQL\uff09\u7528\u6237\u53ef\u4ee5\u540c\u65f6\u4f7f\u7528<code>count()</code>\u548c<code>GROUP BY</code>\u5bf9\u4f20\u53c2\u8fdb\u884c\u5206\u7ec4\u548c\u8ba1\u6570\uff0c\u518d\u4f7f\u7528<code>YIELD</code>\u8fd4\u56de\u7ed3\u679c\u3002</li> </ul> <ul> <li>\uff08openCypher \u65b9\u5f0f\uff09\u7528\u6237\u53ef\u4ee5\u4f7f\u7528<code>count()</code>\u5bf9\u6307\u5b9a\u7684\u503c\u8fdb\u884c\u8ba1\u6570\uff0c\u518d\u4f7f\u7528<code>RETURN</code>\u8fd4\u56de\u7ed3\u679c\u3002\u4e0d\u9700\u8981\u4f7f\u7528<code>GROUP BY</code>\u3002</li> </ul> <p>\u8bed\u6cd5\uff1a<code>count({&lt;expression&gt; | *})</code></p> <ul> <li>count(*) \u8fd4\u56de\u603b\u884c\u6570\uff08\u5305\u62ec NULL\uff09\u3002</li> </ul> <ul> <li>\u8fd4\u56de\u7c7b\u578b\uff1aint\u3002</li> </ul> <p>\u793a\u4f8b\uff1a</p> <pre><code># \u5c06\u5217\u8868\u62c6\u5206\uff0c\u5e76\u8fd4\u56de\u62c6\u5206\u540e\u884c\u7684\u6570\u91cf\uff0c\u5217\u8868\u5143\u7d20\u7684\u6570\u91cf\uff0c\u62c6\u5206\u540e\u5c06\u884c\u53bb\u91cd\u540e\u7684\u6570\u91cf\u3002\nnebula&gt; WITH [NULL, 1, 1, 2, 2] As a UNWIND a AS b \\\n        RETURN count(b), count(*), count(DISTINCT b);\n+----------+----------+-------------------+\n| count(b) | count(*) | count(distinct b) |\n+----------+----------+-------------------+\n| 4        | 5        | 2                 |\n+----------+----------+-------------------+\n</code></pre> <pre><code># \u8fd4\u56de player101 follow \u7684\u4eba\uff0c\u4ee5\u53ca follow player101 \u7684\u4eba\uff0c\u5373\u53cc\u5411\u67e5\u8be2\u3002\n# \u4f7f\u7528`count()`\u548c`GROUP BY`\u8fdb\u884c\u5206\u7ec4\u548c\u8ba1\u6570\u3002\nnebula&gt; GO FROM \"player101\" OVER follow BIDIRECT \\\n        YIELD properties($$).name AS Name \\\n        | GROUP BY $-.Name YIELD $-.Name, count(*);\n+---------------------+----------+\n| $-.Name             | count(*) |\n+---------------------+----------+\n| \"LaMarcus Aldridge\" | 2        |\n| \"Tim Duncan\"        | 2        |\n| \"Marco Belinelli\"   | 1        |\n| \"Manu Ginobili\"     | 1        |\n| \"Boris Diaw\"        | 1        |\n| \"Dejounte Murray\"   | 1        |\n+---------------------+----------+\n\n# \u4f7f\u7528`count()`\u8fdb\u884c\u8ba1\u6570\u3002\nnebula&gt; MATCH (v1:player)-[:follow]-(v2:player) \\\n        WHERE id(v1)== \"player101\" \\\n        RETURN v2.player.name AS Name, count(*) as cnt ORDER BY cnt DESC;\n+---------------------+-----+\n| Name                | cnt |\n+---------------------+-----+\n| \"LaMarcus Aldridge\" | 2   |\n| \"Tim Duncan\"        | 2   |\n| \"Boris Diaw\"        | 1   |\n| \"Manu Ginobili\"     | 1   |\n| \"Dejounte Murray\"   | 1   |\n| \"Marco Belinelli\"   | 1   |\n+---------------------+-----+\n</code></pre> <p>\u4e0a\u8ff0\u793a\u4f8b\u7684\u8fd4\u56de\u7ed3\u679c\u6709\u4e24\u5217\uff1a</p> <ul> <li><code>$-.Name</code>\uff1a\u67e5\u8be2\u7ed3\u679c\u5305\u542b\u7684\u59d3\u540d\u3002</li> </ul> <ul> <li><code>count(*)</code>\uff1a\u59d3\u540d\u51fa\u73b0\u7684\u6b21\u6570\u3002</li> </ul> <p>\u56e0\u4e3a\u6d4b\u8bd5\u6570\u636e\u96c6<code>basketballplayer</code>\u4e2d\u6ca1\u6709\u91cd\u590d\u7684\u59d3\u540d\uff0c<code>count(*)</code>\u5217\u4e2d\u6570\u5b57<code>2</code>\u8868\u793a\u8be5\u884c\u7684\u4eba\u548c<code>player101</code>\u662f\u4e92\u76f8<code>follow</code>\u7684\u5173\u7cfb\u3002</p> <pre><code># \u65b9\u6cd5\u4e00\uff1a\u7edf\u8ba1\u6570\u636e\u5e93\u4e2d\u7684\u5e74\u9f84\u5206\u5e03\u60c5\u51b5\u3002\nnebula&gt; LOOKUP ON player \\\n        YIELD player.age As playerage \\\n        | GROUP BY $-.playerage \\\n        YIELD $-.playerage as age, count(*) AS number \\\n        | ORDER BY $-.number DESC, $-.age DESC;\n+-----+--------+\n| age | number |\n+-----+--------+\n| 34  | 4      |\n| 33  | 4      |\n| 30  | 4      |\n| 29  | 4      |\n| 38  | 3      |\n+-----+--------+\n...\n\n# \u65b9\u6cd5\u4e8c\uff1a\u7edf\u8ba1\u6570\u636e\u5e93\u4e2d\u7684\u5e74\u9f84\u5206\u5e03\u60c5\u51b5\u3002\nnebula&gt; MATCH (n:player) \\\n        RETURN n.player.age as age, count(*) as number \\\n        ORDER BY number DESC, age DESC;\n+-----+--------+\n| age | number |\n+-----+--------+\n| 34  | 4      |\n| 33  | 4      |\n| 30  | 4      |\n| 29  | 4      |\n| 38  | 3      |\n+-----+--------+\n...\n</code></pre> <pre><code># \u7edf\u8ba1 Tim Duncan \u5173\u8054\u7684\u8fb9\u6570\u3002\nnebula&gt; MATCH (v:player{name:\"Tim Duncan\"}) -[e]- (v2) \\\n        RETURN count(e);\n+----------+\n| count(e) |\n+----------+\n| 13       |\n+----------+\n\n\n# \u591a\u8df3\u67e5\u8be2\uff0c\u7edf\u8ba1 Tim Duncan \u5173\u8054\u7684\u8fb9\u6570\uff0c\u8fd4\u56de\u4e24\u5217\uff08\u4e0d\u53bb\u91cd\u548c\u53bb\u91cd\uff09\u3002\nnebula&gt; MATCH (n:player {name : \"Tim Duncan\"})-[]-&gt;(friend:player)-[]-&gt;(fof:player) \\\n        RETURN count(fof), count(DISTINCT fof);\n+------------+---------------------+\n| count(fof) | count(distinct fof) |\n+------------+---------------------+\n| 4          | 3                   |\n+------------+---------------------+\n</code></pre>"},{"location":"3.ngql-guide/6.functions-and-expressions/15.aggregating/#max","title":"max()","text":"<p>max() \u8fd4\u56de\u53c2\u6570\u7684\u6700\u5927\u503c\u3002</p> <p>\u8bed\u6cd5\uff1a<code>max(&lt;expression&gt;)</code></p> <ul> <li>\u8fd4\u56de\u7c7b\u578b\uff1a\u4e0e\u539f\u53c2\u6570\u76f8\u540c\u3002</li> </ul> <p>\u793a\u4f8b\uff1a</p> <pre><code># \u8fd4\u56de Tag player \u7684 age \u5c5e\u6027\u7684\u6700\u5927\u503c\u3002\nnebula&gt; MATCH (v:player) RETURN max(v.player.age);\n+-------------------+\n| max(v.player.age) |\n+-------------------+\n| 47                |\n+-------------------+\n</code></pre>"},{"location":"3.ngql-guide/6.functions-and-expressions/15.aggregating/#min","title":"min()","text":"<p>min() \u8fd4\u56de\u53c2\u6570\u7684\u6700\u5c0f\u503c\u3002</p> <p>\u8bed\u6cd5\uff1a<code>min(&lt;expression&gt;)</code></p> <ul> <li>\u8fd4\u56de\u7c7b\u578b\uff1a\u4e0e\u539f\u53c2\u6570\u76f8\u540c\u3002</li> </ul> <p>\u793a\u4f8b\uff1a</p> <pre><code># \u8fd4\u56de Tag player \u7684 age \u5c5e\u6027\u7684\u6700\u5c0f\u503c\u3002\nnebula&gt; MATCH (v:player) RETURN min(v.player.age);\n+-------------------+\n| min(v.player.age) |\n+-------------------+\n| 20                |\n+-------------------+\n</code></pre>"},{"location":"3.ngql-guide/6.functions-and-expressions/15.aggregating/#collect","title":"collect()","text":"<p>collect() \u8fd4\u56de\u4e00\u4e2a\u7b26\u5408\u8868\u8fbe\u5f0f\u8fd4\u56de\u7ed3\u679c\u7684\u5217\u8868\u3002\u8be5\u51fd\u6570\u53ef\u4ee5\u5c06\u591a\u6761\u8bb0\u5f55\u6216\u503c\u5408\u5e76\u8fdb\u4e00\u4e2a\u5217\u8868\uff0c\u5b9e\u73b0\u6570\u636e\u805a\u5408\u3002</p> <p>\u8bed\u6cd5\uff1a<code>collect(&lt;expression&gt;)</code></p> <ul> <li>\u8fd4\u56de\u7c7b\u578b\uff1alist\u3002</li> </ul> <p>\u793a\u4f8b\uff1a</p> <pre><code># \u5c06\u5217\u8868\u62c6\u5206\u4e3a\u5355\u72ec\u7684\u884c\u3002\nnebula&gt; UNWIND [1, 2, 1] AS a \\\n        RETURN a;\n+---+\n| a |\n+---+\n| 1 |\n| 2 |\n| 1 |\n+---+\n\n# \u5c06\u5217\u8868\u62c6\u5206\u4e3a\u5355\u72ec\u7684\u884c\u8bb0\u5f55\u540e\u518d\u5408\u5e76\u4e3a\u4e00\u4e2a\u5217\u8868\u8fd4\u56de\u3002\nnebula&gt; UNWIND [1, 2, 1] AS a \\\n        RETURN collect(a);\n+------------+\n| collect(a) |\n+------------+\n| [1, 2, 1]  |\n+------------+\n\n# \u7edf\u8ba1\u5e76\u8fd4\u56de\u5217\u8868\u4e2d\u76f8\u540c\u5143\u7d20\u7684\u6570\u91cf\u3002\nnebula&gt; UNWIND [1, 2, 1] AS a \\\n        RETURN a, collect(a), size(collect(a));\n+---+------------+------------------+\n| a | collect(a) | size(collect(a)) |\n+---+------------+------------------+\n| 2 | [2]        | 1                |\n| 1 | [1, 1]     | 2                |\n+---+------------+------------------+\n\n# \u964d\u5e8f\u6392\u5217\uff0c\u9650\u5236\u8f93\u51fa\u884c\u6570\u4e3a 3\uff0c\u7136\u540e\u5c06\u7ed3\u679c\u8f93\u51fa\u5230\u5217\u8868\u4e2d\u3002\nnebula&gt; UNWIND [\"c\", \"b\", \"a\", \"d\" ] AS p \\\n        WITH p AS q \\\n        ORDER BY q DESC LIMIT 3 \\\n        RETURN collect(q);\n+-----------------+\n| collect(q)      |\n+-----------------+\n| [\"d\", \"c\", \"b\"] |\n+-----------------+\n\n# \u5c06\u5217\u8868\u62c6\u5206\u540e\u53bb\u91cd\uff0c\u518d\u5408\u5e76\u4e3a\u65b0\u7684\u5217\u8868\u8fd4\u56de\u3002\nnebula&gt; WITH [1, 1, 2, 2] AS coll \\\n        UNWIND coll AS x \\\n        WITH DISTINCT x \\\n        RETURN collect(x) AS ss;\n+--------+\n| ss     |\n+--------+\n| [1, 2] |\n+--------+\n\n# \u5c06 Tag player \u7684 age \u5c5e\u6027\u503c\u5408\u5e76\u4e3a\u5217\u8868\u8fd4\u56de\u3002\nnebula&gt; MATCH (n:player) \\\n        RETURN collect(n.player.age);\n+---------------------------------------------------------------+\n| collect(n.player.age)                                         |\n+---------------------------------------------------------------+\n| [32, 32, 34, 29, 41, 40, 33, 25, 40, 37, ...\n...\n\n# \u57fa\u4e8e\u5e74\u9f84\u805a\u5408\u59d3\u540d\u3002\nnebula&gt; MATCH (n:player) \\\n        RETURN n.player.age AS age, collect(n.player.name);\n+-----+--------------------------------------------------------------------------+\n| age | collect(n.player.name)                                                   |\n+-----+--------------------------------------------------------------------------+\n| 24  | [\"Giannis Antetokounmpo\"]                                                |\n| 20  | [\"Luka Doncic\"]                                                          |\n| 25  | [\"Joel Embiid\", \"Kyle Anderson\"]                                         |\n+-----+--------------------------------------------------------------------------+\n...\n\n# \u5c06 player100 \u7684\u76ee\u7684\u70b9 name \u5c5e\u6027\u503c\u805a\u5408\uff0c\u7ed3\u679c\u5408\u5e76\u4e3a\u5217\u8868\u8fd4\u56de\u3002\nnebula&gt; GO FROM \"player100\" OVER serve \\\n        YIELD properties($$).name AS name \\\n        | GROUP BY $-.name \\\n        YIELD collect($-.name) AS name;\n+-----------+\n| name      |\n+-----------+\n| [\"Spurs\"] |\n+-----------+\n\n# \u5c06 Tag player \u7684 age \u5c5e\u6027\u503c\u805a\u5408\uff0c\u7ed3\u679c\u5408\u5e76\u4e3a\u5217\u8868\u8fd4\u56de\u3002\nnebula&gt; LOOKUP ON player \\\n        YIELD player.age As playerage \\\n        | GROUP BY $-.playerage \\\n        YIELD collect($-.playerage) AS playerage;\n+------------------+\n| playerage        |\n+------------------+\n| [22]             |\n| [47]             |\n| [43]             |\n| [25, 25]         |\n+------------------+\n...\n</code></pre>"},{"location":"3.ngql-guide/6.functions-and-expressions/15.aggregating/#std","title":"std()","text":"<p>std() \u8fd4\u56de\u53c2\u6570\u7684\u603b\u4f53\u6807\u51c6\u5dee\u3002</p> <p>\u8bed\u6cd5\uff1a<code>std(&lt;expression&gt;)</code></p> <ul> <li>\u8fd4\u56de\u7c7b\u578b\uff1adouble\u3002</li> </ul> <p>\u793a\u4f8b\uff1a</p> <pre><code># \u8fd4\u56de Tag player \u7684 age \u5c5e\u6027\u503c\u7684\u6807\u51c6\u5dee\u3002\nnebula&gt; MATCH (v:player) RETURN std(v.player.age);\n+-------------------+\n| std(v.player.age) |\n+-------------------+\n| 6.423895701687502 |\n+-------------------+\n</code></pre>"},{"location":"3.ngql-guide/6.functions-and-expressions/15.aggregating/#sum","title":"sum()","text":"<p>sum() \u8fd4\u56de\u53c2\u6570\u7684\u548c\u3002</p> <p>\u8bed\u6cd5\uff1a<code>sum(&lt;expression&gt;)</code></p> <ul> <li>\u8fd4\u56de\u7c7b\u578b\uff1a\u4e0e\u539f\u53c2\u6570\u76f8\u540c\u3002</li> </ul> <p>\u793a\u4f8b\uff1a</p> <pre><code># \u8fd4\u56de Tag player \u7684 age \u5c5e\u6027\u503c\u7684\u603b\u548c\u3002\nnebula&gt; MATCH (v:player) RETURN sum(v.player.age);\n+-------------------+\n| sum(v.player.age) |\n+-------------------+\n| 1698              |\n+-------------------+\n</code></pre>"},{"location":"3.ngql-guide/6.functions-and-expressions/15.aggregating/#_2","title":"\u805a\u5408\u793a\u4f8b","text":"<pre><code>nebula&gt;  GO FROM \"player100\" OVER follow YIELD dst(edge) AS dst, properties($$).age AS age \\\n         | GROUP BY $-.dst \\\n         YIELD \\\n         $-.dst AS dst, \\\n         toInteger((sum($-.age)/count($-.age)))+avg(distinct $-.age+1)+1 AS statistics;\n+-------------+------------+\n| dst         | statistics |\n+-------------+------------+\n| \"player125\" | 84.0       |\n| \"player101\" | 74.0       |\n+-------------+------------+\n</code></pre>"},{"location":"3.ngql-guide/6.functions-and-expressions/16.type-conversion/","title":"\u7c7b\u578b\u8f6c\u6362\u51fd\u6570","text":"<p>\u672c\u6587\u4ecb\u7ecd NebulaGraph \u652f\u6301\u7684\u7c7b\u578b\u8f6c\u6362\u51fd\u6570\u3002</p>"},{"location":"3.ngql-guide/6.functions-and-expressions/16.type-conversion/#toboolean","title":"toBoolean()","text":"<p>toBoolean() \u5c06\u5b57\u7b26\u4e32\u8f6c\u6362\u4e3a\u5e03\u5c14\u3002</p> <p>\u8bed\u6cd5\uff1a<code>toBoolean(&lt;value&gt;)</code></p> <ul> <li>\u8fd4\u56de\u7c7b\u578b\uff1abool\u3002</li> </ul> <p>\u793a\u4f8b\uff1a</p> <pre><code>nebula&gt; UNWIND [true, false, 'true', 'false', NULL] AS b \\\n        RETURN toBoolean(b) AS b;\n+----------+\n| b        |\n+----------+\n| true     |\n| false    |\n| true     |\n| false    |\n| __NULL__ |\n+----------+\n</code></pre>"},{"location":"3.ngql-guide/6.functions-and-expressions/16.type-conversion/#tofloat","title":"toFloat()","text":"<p>toFloat() \u5c06\u6574\u6570\u6216\u5b57\u7b26\u4e32\u8f6c\u6362\u4e3a\u6d6e\u70b9\u6570\u3002</p> <p>\u8bed\u6cd5\uff1a<code>toFloat(&lt;value&gt;)</code></p> <ul> <li>\u8fd4\u56de\u7c7b\u578b\uff1afloat\u3002</li> </ul> <p>\u793a\u4f8b\uff1a</p> <pre><code>nebula&gt; RETURN toFloat(1), toFloat('1.3'), toFloat('1e3'), toFloat('not a number');\n+------------+----------------+----------------+-------------------------+\n| toFloat(1) | toFloat(\"1.3\") | toFloat(\"1e3\") | toFloat(\"not a number\") |\n+------------+----------------+----------------+-------------------------+\n| 1.0        | 1.3            | 1000.0         | __NULL__                |\n+------------+----------------+----------------+-------------------------+\n</code></pre>"},{"location":"3.ngql-guide/6.functions-and-expressions/16.type-conversion/#tostring","title":"toString()","text":"<p>toString() \u5c06\u4efb\u610f\u975e\u590d\u5408\u6570\u636e\u7c7b\u578b\u6570\u636e\u8f6c\u6362\u4e3a\u5b57\u7b26\u4e32\u7c7b\u578b\u3002</p> <p>\u8bed\u6cd5\uff1a<code>toString(&lt;value&gt;)</code></p> <ul> <li>\u8fd4\u56de\u7c7b\u578b\uff1astring\u3002</li> </ul> <p>\u793a\u4f8b\uff1a</p> <pre><code>nebula&gt; RETURN toString(9669) AS int2str, toString(null) AS null2str;\n+---------+----------+\n| int2str | null2str |\n+---------+----------+\n| \"9669\"  | __NULL__ |\n+---------+----------+\n</code></pre>"},{"location":"3.ngql-guide/6.functions-and-expressions/16.type-conversion/#tointeger","title":"toInteger()","text":"<p>toInteger() \u5c06\u6d6e\u70b9\u6216\u5b57\u7b26\u4e32\u8f6c\u6362\u4e3a\u6574\u6570\u3002</p> <p>\u8bed\u6cd5\uff1a<code>toInteger(&lt;value&gt;)</code></p> <ul> <li>\u8fd4\u56de\u7c7b\u578b\uff1aint\u3002</li> </ul> <p>\u793a\u4f8b\uff1a</p> <pre><code>nebula&gt; RETURN toInteger(1), toInteger('1'), toInteger('1e3'), toInteger('not a number');\n+--------------+----------------+------------------+---------------------------+\n| toInteger(1) | toInteger(\"1\") | toInteger(\"1e3\") | toInteger(\"not a number\") |\n+--------------+----------------+------------------+---------------------------+\n| 1            | 1              | 1000             | __NULL__                  |\n+--------------+----------------+------------------+---------------------------+\n</code></pre>"},{"location":"3.ngql-guide/6.functions-and-expressions/16.type-conversion/#toset","title":"toSet()","text":"<p>toSet() \u5c06\u5217\u8868\u6216\u96c6\u5408\u8f6c\u6362\u4e3a\u96c6\u5408\u3002</p> <p>\u8bed\u6cd5\uff1a<code>toSet(&lt;value&gt;)</code></p> <ul> <li>\u8fd4\u56de\u7c7b\u578b\uff1aset\u3002</li> </ul> <p>\u793a\u4f8b\uff1a</p> <pre><code>nebula&gt; RETURN toSet(list[1,2,3,1,2]) AS list2set;\n+-----------+\n| list2set  |\n+-----------+\n| {3, 1, 2} |\n+-----------+\n</code></pre>"},{"location":"3.ngql-guide/6.functions-and-expressions/16.type-conversion/#hash","title":"hash()","text":"<p>hash() \u8fd4\u56de\u53c2\u6570\u7684\u54c8\u5e0c\u503c\u3002\u5176\u53c2\u6570\u53ef\u4ee5\u662f\u6570\u5b57\u3001\u5b57\u7b26\u4e32\u3001\u5217\u8868\u3001\u5e03\u5c14\u503c\u3001NULL \u7b49\u7c7b\u578b\u7684\u503c\uff0c\u6216\u8005\u8ba1\u7b97\u7ed3\u679c\u4e3a\u8fd9\u4e9b\u7c7b\u578b\u7684\u8868\u8fbe\u5f0f\u3002</p> <p><code>hash()</code>\u51fd\u6570\u91c7\u7528 MurmurHash2 \u7b97\u6cd5\uff0c\u79cd\u5b50\uff08seed\uff09\u4e3a<code>0xc70f6907UL</code>\u3002\u7528\u6237\u53ef\u4ee5\u5728 <code>MurmurHash2.h</code> \u4e2d\u67e5\u770b\u5176\u6e90\u4ee3\u7801\u3002</p> <p>\u5728 Java \u4e2d\u7684\u8c03\u7528\u65b9\u5f0f\u5982\u4e0b\uff1a</p> <pre><code>MurmurHash2.hash64(\"to_be_hashed\".getBytes(),\"to_be_hashed\".getBytes().length, 0xc70f6907)\n</code></pre> <p>\u8bed\u6cd5\uff1a<code>hash(&lt;string&gt;)</code></p> <ul> <li>\u8fd4\u56de\u7c7b\u578b\uff1aint\u3002</li> </ul> <p>\u793a\u4f8b\uff1a</p> <pre><code>nebula&gt; RETURN hash(\"abcde\");\n+--------------------+\n| hash(\"abcde\")      |\n+--------------------+\n| 811036730794841393 |\n+--------------------+\n\nnebula&gt; YIELD hash([1,2,3]);\n+----------------+\n| hash([1,2,3])  |\n+----------------+\n| 11093822460243 |\n+----------------+\n\nnebula&gt; YIELD hash(NULL);\n+------------+\n| hash(NULL) |\n+------------+\n| -1         |\n+------------+\n\nnebula&gt; YIELD hash(toLower(\"HELLO NEBULA\"));\n+-------------------------------+\n| hash(toLower(\"HELLO NEBULA\")) |\n+-------------------------------+\n| -8481157362655072082          |\n+-------------------------------+\n</code></pre>"},{"location":"3.ngql-guide/6.functions-and-expressions/2.string/","title":"\u5185\u7f6e\u5b57\u7b26\u4e32\u51fd\u6570","text":"<p>\u672c\u6587\u4ecb\u7ecd NebulaGraph \u652f\u6301\u7684\u5b57\u7b26\u4e32\u51fd\u6570\u3002</p>"},{"location":"3.ngql-guide/6.functions-and-expressions/2.string/#_2","title":"\u6ce8\u610f\u4e8b\u9879","text":"<ul> <li>\u5b57\u7b26\u4e32\u7684\u8868\u793a\u65b9\u5f0f\u4e3a\u7528\u53cc\u5f15\u53f7\u6216\u5355\u5f15\u53f7\u5305\u88f9\u3002</li> </ul> <ul> <li>\u548c SQL \u4e00\u6837\uff0cnGQL \u7684\u5b57\u7b26\u7d22\u5f15\uff08\u4f4d\u7f6e\uff09\u4ece<code>1</code>\u5f00\u59cb\u3002\u4f46\u662f C \u8bed\u8a00\u7684\u5b57\u7b26\u7d22\u5f15\u662f\u4ece<code>0</code>\u5f00\u59cb\u7684\u3002</li> </ul>"},{"location":"3.ngql-guide/6.functions-and-expressions/2.string/#strcasecmp","title":"strcasecmp()","text":"<p>strcasecmp() \u6bd4\u8f83\u4e24\u4e2a\u5b57\u7b26\u4e32\uff08\u4e0d\u533a\u5206\u5927\u5c0f\u5199\uff09\u3002</p> <p>\u8bed\u6cd5\uff1a<code>strcasecmp(&lt;string_a&gt;,&lt;string_b&gt;)</code></p> <ul> <li><code>string_a</code>\u3001<code>string_b</code>\uff1a\u5f85\u6bd4\u8f83\u7684\u5b57\u7b26\u4e32\u3002</li> </ul> <ul> <li>\u8fd4\u56de\u7c7b\u578b\uff1aint\u3002</li> </ul> <ul> <li>\u5f53 <code>string_a = string_b</code> \u65f6\uff0c\u8fd4\u56de <code>0</code>\uff0c\u5f53 <code>string_a &gt; string_b</code> \u662f\uff0c\u8fd4\u56de\u5927\u4e8e <code>0</code> \u7684\u6570\uff0c\u5f53 <code>string_a &lt; string_b</code> \u65f6\uff0c\u8fd4\u56de\u5c0f\u4e8e <code>0</code> \u7684\u6570\u3002</li> </ul> <p>\u793a\u4f8b\uff1a</p> <pre><code># \u6bd4\u8f83\u5b57\u7b26\u4e32 \"a\" \u548c \"aa\"\nnebula&gt; RETURN strcasecmp(\"a\",\"aa\");\n+----------------------+\n| strcasecmp(\"a\",\"aa\") |\n+----------------------+\n| -97                  |\n+----------------------+\n</code></pre>"},{"location":"3.ngql-guide/6.functions-and-expressions/2.string/#lower_tolower","title":"lower() \u548c toLower()","text":"<p>lower() \u548c toLower() \u90fd\u53ef\u4ee5\u8fd4\u56de\u6307\u5b9a\u5b57\u7b26\u4e32\u7684\u5c0f\u5199\u5f62\u5f0f\u3002</p> <p>\u8bed\u6cd5\uff1a<code>lower(&lt;string&gt;)</code>\u3001<code>toLower(&lt;string&gt;)</code></p> <ul> <li><code>string</code>\uff1a\u6307\u5b9a\u7684\u5b57\u7b26\u4e32\u3002</li> </ul> <ul> <li>\u8fd4\u56de\u7c7b\u578b\uff1astring\u3002</li> </ul> <p>\u793a\u4f8b\uff1a</p> <pre><code># \u8fd4\u56de \"Basketball_Player\" \u5c0f\u5199\u5f62\u5f0f\nnebula&gt; RETURN lower(\"Basketball_Player\");\n+----------------------------+\n| lower(\"Basketball_Player\") |\n+----------------------------+\n| \"basketball_player\"        |\n+----------------------------+\n</code></pre>"},{"location":"3.ngql-guide/6.functions-and-expressions/2.string/#upper_toupper","title":"upper() \u548c toUpper()","text":"<p>upper() \u548c toUpper() \u90fd\u53ef\u4ee5\u8fd4\u56de\u6307\u5b9a\u5b57\u7b26\u4e32\u7684\u5927\u5199\u5f62\u5f0f\u3002</p> <p>\u8bed\u6cd5\uff1a<code>upper(&lt;string&gt;)</code>\u3001<code>toUpper(&lt;string&gt;)</code></p> <ul> <li><code>string</code>\uff1a\u6307\u5b9a\u7684\u5b57\u7b26\u4e32\u3002</li> </ul> <ul> <li>\u8fd4\u56de\u7c7b\u578b\uff1astring\u3002</li> </ul> <p>\u793a\u4f8b\uff1a</p> <pre><code># \u8fd4\u56de \"Basketball_Player\" \u5927\u5199\u5f62\u5f0f\nnebula&gt; RETURN upper(\"Basketball_Player\");\n+----------------------------+\n| upper(\"Basketball_Player\") |\n+----------------------------+\n| \"BASKETBALL_PLAYER\"        |\n+----------------------------+\n</code></pre>"},{"location":"3.ngql-guide/6.functions-and-expressions/2.string/#length","title":"length()","text":"<p>length() \u8fd4\u56de\uff1a</p> <ul> <li>\u6307\u5b9a\u5b57\u7b26\u4e32\u7684\u957f\u5ea6\uff0c\u5355\u4f4d\uff1a\u5b57\u8282\u3002</li> <li>\u8def\u5f84\u7684\u957f\u5ea6\uff0c\u5355\u4f4d\uff1a\u8df3\u3002</li> </ul> <p>\u8bed\u6cd5\uff1a<code>length({&lt;string&gt;|&lt;path&gt;})</code></p> <ul> <li><code>string</code>\uff1a\u6307\u5b9a\u7684\u5b57\u7b26\u4e32\u3002</li> <li><code>path</code>\uff1a\u6307\u5b9a\u7684\u8def\u5f84\uff0c\u4f7f\u7528\u53d8\u91cf\u8868\u793a\u3002</li> <li>\u8fd4\u56de\u7c7b\u578b\uff1aint\u3002</li> </ul> <p>\u793a\u4f8b\uff1a</p> <pre><code># \u8fd4\u56de\u5b57\u7b26\u4e32 \"basketball\" \u7684\u957f\u5ea6\nnebula&gt; RETURN length(\"basketball\");\n+----------------------+\n| length(\"basketball\") |\n+----------------------+\n| 10                   |\n+----------------------+\n</code></pre> <pre><code># \u8fd4\u56de p \u5230 v2 \u8def\u5f84\u7684\u957f\u5ea6\nnebula&gt; MATCH p=(v:player{name:\"Tim Duncan\"})--&gt;(v2) return length(p);\n+-----------+\n| length(p) |\n+-----------+\n| 1         |\n| 1         |\n| 1         |\n+-----------+\n</code></pre>"},{"location":"3.ngql-guide/6.functions-and-expressions/2.string/#trim","title":"trim()","text":"<p>trim() \u5220\u9664\u6307\u5b9a\u5b57\u7b26\u4e32\u5934\u90e8\u548c\u5c3e\u90e8\u7684\u7a7a\u683c\u3002</p> <p>\u8bed\u6cd5\uff1a<code>trim(&lt;string&gt;)</code></p> <ul> <li><code>string</code>\uff1a\u6307\u5b9a\u7684\u5b57\u7b26\u4e32\u3002</li> </ul> <ul> <li>\u8fd4\u56de\u7c7b\u578b\uff1astring\u3002</li> </ul> <p>\u793a\u4f8b\uff1a</p> <pre><code># \u88c1\u526a\u6389\u5b57\u7b26\u4e32 \" basketball player \" \u5934\u90e8\u548c\u5c3e\u90e8\u7684\u7a7a\u683c\nnebula&gt; RETURN trim(\" basketball player \");\n+-----------------------------+\n| trim(\" basketball player \") |\n+-----------------------------+\n| \"basketball player\"         |\n+-----------------------------+\n</code></pre>"},{"location":"3.ngql-guide/6.functions-and-expressions/2.string/#ltrim","title":"ltrim()","text":"<p>ltrim() \u5220\u9664\u5b57\u7b26\u4e32\u5934\u90e8\u7684\u7a7a\u683c\u3002</p> <p>\u8bed\u6cd5\uff1a<code>ltrim(&lt;string&gt;)</code></p> <ul> <li><code>string</code>\uff1a\u6307\u5b9a\u7684\u5b57\u7b26\u4e32\u3002</li> </ul> <ul> <li>\u8fd4\u56de\u7c7b\u578b\uff1astring\u3002</li> </ul> <p>\u793a\u4f8b\uff1a</p> <pre><code># \u88c1\u526a\u6389\u5b57\u7b26\u4e32 \" basketball player \" \u5934\u90e8\u7684\u7a7a\u683c\nnebula&gt; RETURN ltrim(\" basketball player \");\n+------------------------------+\n| ltrim(\" basketball player \") |\n+------------------------------+\n| \"basketball player \"         |\n+------------------------------+\n</code></pre>"},{"location":"3.ngql-guide/6.functions-and-expressions/2.string/#rtrim","title":"rtrim()","text":"<p>rtrim() \u5220\u9664\u5b57\u7b26\u4e32\u5c3e\u90e8\u7684\u7a7a\u683c\u3002</p> <p>\u8bed\u6cd5\uff1a<code>rtrim(&lt;string&gt;)</code></p> <ul> <li><code>string</code>\uff1a\u6307\u5b9a\u7684\u5b57\u7b26\u4e32\u3002</li> </ul> <ul> <li>\u8fd4\u56de\u7c7b\u578b\uff1astring\u3002</li> </ul> <p>\u793a\u4f8b\uff1a</p> <pre><code># \u88c1\u526a\u6389\u5b57\u7b26\u4e32 \" basketball player \" \u5c3e\u90e8\u7684\u7a7a\u683c\nnebula&gt; RETURN rtrim(\" basketball player \");\n+------------------------------+\n| rtrim(\" basketball player \") |\n+------------------------------+\n| \" basketball player\"         |\n+------------------------------+\n</code></pre>"},{"location":"3.ngql-guide/6.functions-and-expressions/2.string/#left","title":"left()","text":"<p>left() \u8fd4\u56de\u6307\u5b9a\u5b57\u7b26\u4e32\u5934\u90e8\u82e5\u5e72\u4e2a\u5b57\u7b26\u7ec4\u6210\u7684\u5b50\u5b57\u7b26\u4e32\u3002</p> <p>\u8bed\u6cd5\uff1a<code>left(&lt;string&gt;,&lt;count&gt;)</code></p> <ul> <li><code>string</code>\uff1a\u6307\u5b9a\u7684\u5b57\u7b26\u4e32\u3002</li> </ul> <ul> <li><code>count</code>\uff1a\u6307\u5b9a\u4ece\u5934\u90e8\u5f00\u59cb\u7684\u5b57\u7b26\u6570\u91cf\u3002\u5982\u679c<code>count</code>\u8d85\u8fc7\u5b57\u7b26\u4e32\u7684\u957f\u5ea6\uff0c\u5219\u8fd4\u56de\u5b57\u7b26\u4e32\u672c\u8eab\u3002</li> </ul> <ul> <li>\u8fd4\u56de\u7c7b\u578b\uff1astring\u3002</li> </ul> <p>\u793a\u4f8b\uff1a</p> <pre><code># \u8fd4\u56de\u5b57\u7b26\u4e32 \"basketball_player\" \u4ece\u5934\u90e8\u5f00\u59cb\u7684 6 \u4e2a\u5b57\u7b26\u7ec4\u6210\u7684\u5b57\u7b26\u4e32\nnebula&gt; RETURN left(\"basketball_player\",6);\n+-----------------------------+\n| left(\"basketball_player\",6) |\n+-----------------------------+\n| \"basket\"                    |\n+-----------------------------+\n</code></pre>"},{"location":"3.ngql-guide/6.functions-and-expressions/2.string/#right","title":"right()","text":"<p>right() \u8fd4\u56de\u6307\u5b9a\u5b57\u7b26\u4e32\u5c3e\u90e8\u82e5\u5e72\u4e2a\u5b57\u7b26\u7ec4\u6210\u7684\u5b50\u5b57\u7b26\u4e32\u3002</p> <p>\u8bed\u6cd5\uff1a<code>right(&lt;string&gt;,&lt;count&gt;)</code></p> <ul> <li><code>string</code>\uff1a\u6307\u5b9a\u7684\u5b57\u7b26\u4e32\u3002</li> </ul> <ul> <li><code>count</code>\uff1a\u6307\u5b9a\u4ece\u5c3e\u90e8\u5f00\u59cb\u7684\u5b57\u7b26\u6570\u91cf\u3002\u5982\u679c<code>count</code>\u8d85\u8fc7\u5b57\u7b26\u4e32\u7684\u957f\u5ea6\uff0c\u5219\u8fd4\u56de\u5b57\u7b26\u4e32\u672c\u8eab\u3002</li> </ul> <ul> <li>\u8fd4\u56de\u7c7b\u578b\uff1astring\u3002</li> </ul> <p>\u793a\u4f8b\uff1a</p> <pre><code># \u8fd4\u56de\u5b57\u7b26\u4e32 \"basketball_player\" \u4ece\u5c3e\u90e8 6 \u4e2a\u5b57\u7b26\u7ec4\u6210\u7684\u5b57\u7b26\u4e32\nnebula&gt; RETURN right(\"basketball_player\",6);\n+------------------------------+\n| right(\"basketball_player\",6) |\n+------------------------------+\n| \"player\"                     |\n+------------------------------+\n</code></pre>"},{"location":"3.ngql-guide/6.functions-and-expressions/2.string/#lpad","title":"lpad()","text":"<p>lpad() \u5728\u6307\u5b9a\u5b57\u7b26\u4e32\u7684\u5934\u90e8\u586b\u5145\u5b57\u7b26\u4e32\u81f3\u6307\u5b9a\u957f\u5ea6\uff0c\u5e76\u8fd4\u56de\u7ed3\u679c\u5b57\u7b26\u4e32\u3002</p> <p>\u8bed\u6cd5\uff1a<code>lpad(&lt;string&gt;,&lt;count&gt;,&lt;letters&gt;)</code></p> <ul> <li><code>string</code>\uff1a\u6307\u5b9a\u7684\u5b57\u7b26\u4e32\u3002</li> </ul> <ul> <li><code>count</code>\uff1a\u6307\u5b9a\u4ece\u5c3e\u90e8\u5f00\u59cb\u5c06\u8981\u8fd4\u56de\u7684\u5b57\u7b26\u6570\u91cf\u3002\u5982\u679c<code>count</code>\u5c11\u4e8e<code>string</code>\u5b57\u7b26\u4e32\u7684\u957f\u5ea6\uff0c\u5219\u53ea\u8fd4\u56de<code>string</code>\u5b57\u7b26\u4e32\u4ece\u524d\u5230\u540e\u7684<code>count</code>\u4e2a\u5b57\u7b26\u3002</li> </ul> <ul> <li><code>letters</code>\uff1a\u4ece\u5934\u90e8\u586b\u5145\u7684\u5b57\u7b26\u4e32\u3002</li> </ul> <ul> <li>\u8fd4\u56de\u7c7b\u578b\uff1astring\u3002</li> </ul> <p>\u793a\u4f8b\uff1a</p> <pre><code># \u5728\u5b57\u7b26\u4e32 \"abcd\" \u5934\u90e8\u586b\u5145 \"b\" \u5b57\u7b26\uff0c\u5ef6\u957f\u5b57\u7b26\u4e32\u957f\u5ea6\u81f3 10\nnebula&gt; RETURN lpad(\"abcd\",10,\"b\");\n+---------------------+\n| lpad(\"abcd\",10,\"b\") |\n+---------------------+\n| \"bbbbbbabcd\"        |\n+---------------------+\n\n# \u8fd4\u56de\u5b57\u7b26\u4e32 \"abcd\" \u7684\u524d\u4e09\u4e2a\u5b57\u7b26\nnebula&gt; RETURN lpad(\"abcd\",3,\"b\");\n+--------------------+\n| lpad(\"abcd\",3,\"b\") |\n+--------------------+\n| \"abc\"              |\n+--------------------+\n</code></pre>"},{"location":"3.ngql-guide/6.functions-and-expressions/2.string/#rpad","title":"rpad()","text":"<p>rpad() \u5728\u6307\u5b9a\u5b57\u7b26\u4e32\u7684\u5c3e\u90e8\u586b\u5145\u5b57\u7b26\u4e32\u81f3\u6307\u5b9a\u957f\u5ea6\uff0c\u5e76\u8fd4\u56de\u7ed3\u679c\u5b57\u7b26\u4e32\u3002</p> <p>\u8bed\u6cd5\uff1a<code>rpad(&lt;string&gt;,&lt;count&gt;,&lt;letters&gt;)</code></p> <ul> <li><code>string</code>\uff1a\u6307\u5b9a\u7684\u5b57\u7b26\u4e32\u3002</li> </ul> <ul> <li><code>count</code>\uff1a\u6307\u5b9a\u4ece\u5934\u90e8\u5f00\u59cb\u5c06\u8981\u8fd4\u56de\u7684\u5b57\u7b26\u6570\u91cf\u3002\u5982\u679c<code>count</code>\u5c11\u4e8e<code>string</code>\u5b57\u7b26\u4e32\u7684\u957f\u5ea6\uff0c\u5219\u53ea\u8fd4\u56de<code>string</code>\u5b57\u7b26\u4e32\u4ece\u524d\u5230\u540e\u7684<code>count</code>\u4e2a\u5b57\u7b26\u3002</li> </ul> <ul> <li><code>letters</code>\uff1a\u4ece\u5c3e\u90e8\u586b\u5145\u7684\u5b57\u7b26\u4e32\u3002</li> </ul> <ul> <li>\u8fd4\u56de\u7c7b\u578b\uff1astring\u3002</li> </ul> <p>\u793a\u4f8b\uff1a</p> <pre><code># \u5728\u5b57\u7b26\u4e32 \"abcd\" \u5c3e\u90e8\u586b\u5145 \"b\" \u5b57\u7b26\uff0c\u5ef6\u957f\u5b57\u7b26\u4e32\u957f\u5ea6\u81f3 10\nnebula&gt; RETURN rpad(\"abcd\",10,\"b\");\n+---------------------+\n| rpad(\"abcd\",10,\"b\") |\n+---------------------+\n| \"abcdbbbbbb\"        |\n+---------------------+\n\n# \u8fd4\u56de\u5b57\u7b26\u4e32 \"abcd\" \u7684\u524d\u4e09\u4e2a\u5b57\u7b26\nnebula&gt; RETURN rpad(\"abcd\",3,\"b\");\n+--------------------+\n| rpad(\"abcd\",3,\"b\") |\n+--------------------+\n| \"abc\"              |\n+--------------------+\n</code></pre>"},{"location":"3.ngql-guide/6.functions-and-expressions/2.string/#substr_substring","title":"substr() \u548c substring()","text":"<p>substr() \u548c substring() \u4ece\u6307\u5b9a\u5b57\u7b26\u4e32\u7684\u6307\u5b9a\u4f4d\u7f6e\u5f00\u59cb\uff08\u4e0d\u5305\u62ec\u5f00\u59cb\u4f4d\u7f6e\u7684\u5b57\u7b26\uff09\uff0c\u63d0\u53d6\u540e\u9762\u7684\u82e5\u5e72\u4e2a\u5b57\u7b26\uff0c\u7ec4\u6210\u65b0\u7684\u5b57\u7b26\u4e32\u5e76\u8fd4\u56de\u3002</p> <p>\u8bed\u6cd5\uff1a<code>substr(&lt;string&gt;,&lt;pos&gt;,&lt;count&gt;)</code>\u3001<code>substring(&lt;string&gt;,&lt;pos&gt;,&lt;count&gt;)</code></p> <ul> <li><code>string</code>\uff1a\u6307\u5b9a\u7684\u5b57\u7b26\u4e32\u3002</li> </ul> <ul> <li><code>pos</code>\uff1a\u6307\u5b9a\u5f00\u59cb\u7684\u4f4d\u7f6e\uff0c\u5373\u5b57\u7b26\u7d22\u5f15\uff0c\u6570\u636e\u7c7b\u578b\u4e3a int\u3002</li> </ul> <ul> <li><code>count</code>\uff1a\u6307\u5b9a\u4ece\u5f00\u59cb\u4f4d\u7f6e\u5f80\u540e\u63d0\u53d6\u7684\u5b57\u7b26\u6570\u91cf\u3002</li> </ul> <ul> <li>\u8fd4\u56de\u7c7b\u578b\uff1astring\u3002</li> </ul>"},{"location":"3.ngql-guide/6.functions-and-expressions/2.string/#substrsubstring","title":"<code>substr()</code>\u548c<code>substring()</code>\u7684\u8fd4\u56de\u8bf4\u660e","text":"<ul> <li>\u5982\u679c<code>pos</code>\u4e3a 0\uff0c\u8868\u793a\u4ece\u6307\u5b9a\u5b57\u7b26\u4e32\u5934\u90e8\u5f00\u59cb\u63d0\u53d6\uff08\u5305\u62ec\u7b2c\u4e00\u4e2a\u5b57\u7b26\uff09\u3002</li> </ul> <ul> <li>\u5982\u679c<code>pos</code>\u5927\u4e8e\u6700\u5927\u5b57\u7b26\u7d22\u5f15\uff0c\u5219\u8fd4\u56de\u7a7a\u5b57\u7b26\u4e32\u3002</li> </ul> <ul> <li>\u5982\u679c<code>pos</code>\u662f\u8d1f\u6570\uff0c\u5219\u8fd4\u56de<code>BAD_DATA</code>\u3002</li> </ul> <ul> <li>\u5982\u679c\u7701\u7565<code>count</code>\uff0c\u5219\u8fd4\u56de\u4ece<code>pos</code>\u4f4d\u7f6e\u5f00\u59cb\u5230\u5b57\u7b26\u4e32\u672b\u5c3e\u7684\u5b50\u5b57\u7b26\u4e32\u3002</li> </ul> <ul> <li>\u5982\u679c<code>count</code>\u4e3a 0\uff0c\u5219\u8fd4\u56de\u7a7a\u5b57\u7b26\u4e32\u3002</li> </ul> <ul> <li>\u4f7f\u7528<code>NULL</code>\u4f5c\u4e3a\u4efb\u4f55\u53c2\u6570\u4f1a\u51fa\u73b0\u9519\u8bef\u3002</li> </ul> <p>openCypher \u517c\u5bb9\u6027</p> <p>\u5728 openCypher \u4e2d\uff0c\u5982\u679c\u5b57\u7b26\u4e32<code>a</code>\u4e3a<code>null</code>\uff0c\u4f1a\u8fd4\u56de<code>null</code>\u3002</p> <p>\u793a\u4f8b\uff1a</p> <pre><code># \u8fd4\u56de\u5b57\u7b26\u4e32 \"abcdefg\" \u4ece\u4e0b\u6807 2 \u5f00\u59cb\u7684 4 \u4e2a\u5b57\u7b26\u7ec4\u6210\u7684\u5b50\u5b57\u7b26\u4e32\nnebula&gt; RETURN substr(\"abcdefg\",2,4);\n+-----------------------+\n| substr(\"abcdefg\",2,4) |\n+-----------------------+\n| \"cdef\"                |\n+-----------------------+\n\n# \u8fd4\u56de\u5b57\u7b26\u4e32 \"abcdefg\" \u4ece\u4e0b\u6807 0 \u5f00\u59cb\u7684 4 \u4e2a\u5b57\u7b26\u7ec4\u6210\u7684\u5b50\u5b57\u7b26\u4e32\nnebula&gt; RETURN substr(\"abcdefg\",0,4);\n+-----------------------+\n| substr(\"abcdefg\",0,4) |\n+-----------------------+\n| \"abcd\"                |\n+-----------------------+\n\n# \u8fd4\u56de\u5b57\u7b26\u4e32 \"abcdefg\" \u4ece\u4e0b\u6807 0 \u5f00\u59cb\u5230\u7ed3\u5c3e\u7684\u5b57\u7b26\u7ec4\u6210\u7684\u5b50\u5b57\u7b26\u4e32\nnebula&gt; RETURN substr(\"abcdefg\",2);\n+---------------------+\n| substr(\"abcdefg\",2) |\n+---------------------+\n| \"cdefg\"             |\n+---------------------+\n</code></pre>"},{"location":"3.ngql-guide/6.functions-and-expressions/2.string/#reverse","title":"reverse()","text":"<p>reverse() \u9006\u5e8f\u8fd4\u56de\u6307\u5b9a\u7684\u5b57\u7b26\u4e32\u3002</p> <p>\u8bed\u6cd5\uff1a<code>reverse(&lt;string&gt;)</code></p> <ul> <li><code>string</code>\uff1a\u6307\u5b9a\u7684\u5b57\u7b26\u4e32\u3002</li> </ul> <ul> <li>\u8fd4\u56de\u7c7b\u578b\uff1astring\u3002</li> </ul> <p>\u793a\u4f8b\uff1a</p> <pre><code># \u9006\u5e8f\u8fd4\u56de\u5b57\u7b26\u4e32 \"abcdefg\"\nnebula&gt; RETURN reverse(\"abcdefg\");\n+--------------------+\n| reverse(\"abcdefg\") |\n+--------------------+\n| \"gfedcba\"          |\n+--------------------+\n</code></pre>"},{"location":"3.ngql-guide/6.functions-and-expressions/2.string/#replace","title":"replace()","text":"<p>replace() \u5c06\u6307\u5b9a\u5b57\u7b26\u4e32\u4e2d\u7684\u5b50\u5b57\u7b26\u4e32 a \u66ff\u6362\u4e3a\u5b57\u7b26\u4e32 b\u3002</p> <p>\u8bed\u6cd5\uff1a<code>replace(&lt;string&gt;,&lt;substr_a&gt;,&lt;string_b&gt;)</code></p> <ul> <li><code>string</code>\uff1a\u6307\u5b9a\u7684\u5b57\u7b26\u4e32\u3002</li> </ul> <ul> <li><code>substr_a</code>\uff1a\u5b50\u5b57\u7b26\u4e32 a\u3002</li> </ul> <ul> <li><code>string_b</code>\uff1a\u5b57\u7b26\u4e32 b\u3002</li> </ul> <ul> <li>\u8fd4\u56de\u7c7b\u578b\uff1astring\u3002</li> </ul> <p>\u793a\u4f8b\uff1a</p> <pre><code>nebula&gt; RETURN replace(\"abcdefg\",\"cd\",\"AAAAA\");\n+---------------------------------+\n| replace(\"abcdefg\",\"cd\",\"AAAAA\") |\n+---------------------------------+\n| \"abAAAAAefg\"                    |\n+---------------------------------+\n</code></pre>"},{"location":"3.ngql-guide/6.functions-and-expressions/2.string/#split","title":"split()","text":"<p>split() \u5c06\u5b50\u5b57\u7b26\u4e32 b \u8bc6\u522b\u4e3a\u5206\u9694\u7b26\uff0c\u5206\u9694\u6307\u5b9a\u5b57\u7b26\u4e32\uff0c\u5e76\u8fd4\u56de\u5206\u9694\u540e\u7684\u5b57\u7b26\u4e32\u5217\u8868\u3002</p> <p>\u8bed\u6cd5\uff1a<code>split(&lt;string&gt;,&lt;substr&gt;)</code></p> <ul> <li><code>string</code>\uff1a\u6307\u5b9a\u7684\u5b57\u7b26\u4e32\u3002</li> </ul> <ul> <li><code>substr</code>\uff1a\u5b50\u5b57\u7b26\u4e32 b\u3002</li> </ul> <ul> <li>\u8fd4\u56de\u7c7b\u578b\uff1alist\u3002</li> </ul> <p>\u793a\u4f8b\uff1a</p> <pre><code>nebula&gt; RETURN split(\"basketballplayer\",\"a\");\n+-------------------------------+\n| split(\"basketballplayer\",\"a\") |\n+-------------------------------+\n| [\"b\", \"sketb\", \"llpl\", \"yer\"] |\n+-------------------------------+\n</code></pre>"},{"location":"3.ngql-guide/6.functions-and-expressions/2.string/#concat","title":"concat()","text":"<p>concat() \u8fd4\u56de\u6240\u6709\u53c2\u6570\u8fde\u63a5\u6210\u7684\u5b57\u7b26\u4e32\u3002</p> <p>\u8bed\u6cd5\uff1a<code>concat(&lt;string1&gt;,&lt;string2&gt;,...)</code></p> <ul> <li>\u51fd\u6570\u81f3\u5c11\u9700\u8981\u4e24\u4e2a\u6216\u4ee5\u4e0a\u5b57\u7b26\u4e32\u53c2\u6570\u3002\u5982\u679c\u5b57\u7b26\u4e32\u53c2\u6570\u53ea\u6709\u4e00\u4e2a\uff0c\u5219\u8fd4\u56de\u8be5\u5b57\u7b26\u4e32\u53c2\u6570\u672c\u8eab\u3002</li> </ul> <ul> <li>\u5982\u679c\u4efb\u4f55\u4e00\u4e2a\u7684\u5b57\u7b26\u4e32\u53c2\u6570\u4e3a <code>NULL</code>\uff0c\u5219 <code>concat()</code> \u51fd\u6570\u8fd4\u56de\u503c\u4e3a<code>NULL</code>\u3002</li> </ul> <ul> <li>\u8fd4\u56de\u7c7b\u578b\uff1astring\u3002</li> </ul> <p>\u793a\u4f8b\uff1a</p> <pre><code>//\u62fc\u63a5 1\uff0c2\uff0c3\nnebula&gt; RETURN concat(\"1\",\"2\",\"3\") AS r;\n+-------+\n| r     |\n+-------+\n| \"123\" |\n+-------+\n\n//\u5b57\u7b26\u4e32\u53c2\u6570\u6709 NULL\nnebula&gt; RETURN concat(\"1\",\"2\",NULL) AS r;\n+----------+\n| r        |\n+----------+\n| __NULL__ |\n+----------+\n\nnebula&gt; GO FROM \"player100\" over follow \\\n        YIELD concat(src(edge), properties($^).age, properties($$).name, properties(edge).degree) AS A;\n+------------------------------+\n| A                            |\n+------------------------------+\n| \"player10042Tony Parker95\"   |\n| \"player10042Manu Ginobili95\" |\n+------------------------------+\n</code></pre>"},{"location":"3.ngql-guide/6.functions-and-expressions/2.string/#concat_ws","title":"concat_ws()","text":"<p>concat_ws() \u8fd4\u56de\u7528\u5206\u9694\u7b26\uff08separator\uff09\u8fde\u63a5\u7684\u6240\u6709\u5b57\u7b26\u4e32\u3002</p> <p>\u8bed\u6cd5\uff1a<code>concat_ws(&lt;separator&gt;,&lt;string1&gt;,&lt;string2&gt;,... )</code></p> <ul> <li>\u51fd\u6570\u81f3\u5c11\u9700\u8981\u4e24\u4e2a\u6216\u4ee5\u4e0a\u5b57\u7b26\u4e32\u53c2\u6570\u3002</li> </ul> <ul> <li>\u5982\u679c\u5206\u9694\u7b26\u4e3a<code>NULL</code>\u65f6\uff0c<code>concat_ws()</code>\u51fd\u6570\u624d\u8fd4\u56de<code>NULL</code>\u3002</li> </ul> <ul> <li>\u5982\u679c\u5206\u9694\u7b26\u4e0d\u4e3a<code>NULL</code>\uff0c\u5b57\u7b26\u4e32\u53c2\u6570\u53ea\u6709\u4e00\u4e2a\uff0c\u5219\u8fd4\u56de\u8be5\u5b57\u7b26\u4e32\u53c2\u6570\u672c\u8eab\u3002</li> </ul> <ul> <li>\u5b57\u7b26\u4e32\u53c2\u6570\u5b58\u5728<code>NULL</code>\u503c\u65f6\uff0c\u5ffd\u7565<code>NULL</code>\u503c\uff0c\u7ee7\u7eed\u8fde\u63a5\u4e0b\u4e00\u4e2a\u53c2\u6570\u3002</li> </ul> <p>\u793a\u4f8b\uff1a</p> <pre><code>//\u5206\u9694\u7b26\u4e3a +\uff0c\u8fde\u63a5 a\uff0cb\uff0cc\u3002\nnebula&gt; RETURN concat_ws(\"+\",\"a\",\"b\",\"c\") AS r;\n+---------+\n| r       |\n+---------+\n| \"a+b+c\" |\n+---------+\n\n//\u5206\u9694\u7b26\u4e3a NULL\u3002\nneubla&gt; RETURN concat_ws(NULL,\"a\",\"b\",\"c\") AS r;\n+----------+\n| r        |\n+----------+\n| __NULL__ |\n+----------+\n\n//\u5206\u9694\u7b26\u4e3a +\uff0c\u5b57\u7b26\u4e32\u53c2\u6570\u6709 NULL\u3002\nnebula&gt; RETURN concat_ws(\"+\",\"a\",NULL,\"b\",\"c\") AS r;\n+---------+\n| r       |\n+---------+\n| \"a+b+c\" |\n+---------+\n\n//\u5206\u9694\u7b26\u4e3a +\u3002\u5b57\u7b26\u4e32\u53c2\u6570\u53ea\u6709\u4e00\u4e2a\nnebula&gt; RETURN concat_ws(\"+\",\"a\") AS r;\n+-----+\n| r   |\n+-----+\n| \"a\" |\n+-----+\n\nnebula&gt; GO FROM \"player100\" over follow \\\n        YIELD concat_ws(\" \",src(edge), properties($^).age, properties($$).name, properties(edge).degree) AS A;\n+---------------------------------+\n| A                               |\n+---------------------------------+\n| \"player100 42 Tony Parker 95\"   |\n| \"player100 42 Manu Ginobili 95\" |\n+---------------------------------+\n</code></pre>"},{"location":"3.ngql-guide/6.functions-and-expressions/2.string/#extract","title":"extract()","text":"<p>extract() \u4ece\u6307\u5b9a\u5b57\u7b26\u4e32\u4e2d\u63d0\u53d6\u7b26\u5408\u6b63\u5219\u8868\u8fbe\u5f0f\u7684\u5b50\u5b57\u7b26\u4e32\u3002</p> <p>\u8bed\u6cd5\uff1a<code>extract(&lt;string&gt;,\"&lt;regular_expression&gt;\")</code></p> <ul> <li><code>string</code>\uff1a\u6307\u5b9a\u7684\u5b57\u7b26\u4e32\u3002</li> <li><code>regular_expression</code>\uff1a\u6b63\u5219\u8868\u8fbe\u5f0f\u3002</li> <li>\u8fd4\u56de\u7c7b\u578b\uff1alist\u3002</li> </ul> <p>\u793a\u4f8b\uff1a</p> <pre><code>nebula&gt; MATCH (a:player)-[b:serve]-(c:team{name: \"Lakers\"}) \\\n        WHERE a.player.age &gt; 45 \\\n        RETURN extract(a.player.name, \"\\\\w+\") AS result;\n+----------------------------+\n| result                     |\n+----------------------------+\n| [\"Shaquille\", \"O\", \"Neal\"] |\n+----------------------------+\n\nnebula&gt; MATCH (a:player)-[b:serve]-(c:team{name: \"Lakers\"}) \\\n        WHERE a.player.age &gt; 45 \\\n        RETURN extract(a.player.name, \"hello\") AS result;\n+--------+\n| result |\n+--------+\n| []     |\n+--------+\n</code></pre>"},{"location":"3.ngql-guide/6.functions-and-expressions/2.string/#json_extract","title":"json_extract() \u51fd\u6570","text":"<p>json_extract() \u5c06\u6307\u5b9a JSON \u5b57\u7b26\u4e32\u8f6c\u6362\u4e3a map \u7c7b\u578b\u3002</p> <p>\u8bed\u6cd5\uff1a<code>extract(&lt;string&gt;)</code></p> <ul> <li><code>string</code>\uff1a\u6307\u5b9a\u5b57\u7b26\u4e32\uff0c\u4e3a JSON \u683c\u5f0f\u3002</li> <li>\u8fd4\u56de\u7c7b\u578b\uff1amap\u3002</li> </ul> <p>Caution</p> <ul> <li>\u76ee\u524d\u4ec5\u652f\u6301 Bool\u3001Double\u3001Int\u3001String \u548c NULL \u7c7b\u578b\u6570\u636e\u3002</li> <li>\u4ec5\u652f\u6301\u6df1\u5ea6\u4e3a 1 \u7684 Map \u5d4c\u5957\uff0c\u5982\u679c\u5d4c\u5957\u6df1\u5ea6\u4e3a 2 \u53ca\u4ee5\u4e0a\uff0c\u5d4c\u5957\u9879\u4fdd\u7559\u4e3a\u7a7a\u3002</li> </ul> <p>\u793a\u4f8b\uff1a</p> <pre><code>nebula&gt; YIELD json_extract('{\"a\": 1, \"b\": {}, \"c\": {\"d\": true}}') AS result;\n+-----------------------------+\n| result                      |\n+-----------------------------+\n| {a: 1, b: {}, c: {d: true}} |\n+-----------------------------+\n</code></pre>"},{"location":"3.ngql-guide/6.functions-and-expressions/3.date-and-time/","title":"\u5185\u7f6e\u65e5\u671f\u65f6\u95f4\u51fd\u6570","text":"<p>NebulaGraph \u652f\u6301\u4ee5\u4e0b\u5185\u7f6e\u65e5\u671f\u65f6\u95f4\u51fd\u6570\u3002</p> \u51fd\u6570 \u8bf4\u660e int now() \u6839\u636e\u5f53\u524d\u7cfb\u7edf\u8fd4\u56de\u5f53\u524d\u65f6\u95f4\u6233\u3002 timestamp timestamp() \u6839\u636e\u5f53\u524d\u7cfb\u7edf\u8fd4\u56de\u5f53\u524d\u65f6\u95f4\u6233\u3002 date date() \u6839\u636e\u5f53\u524d\u7cfb\u7edf\u8fd4\u56de\u5f53\u524d\u65e5\u671f\uff08UTC \u65f6\u95f4\uff09\u3002 time time() \u6839\u636e\u5f53\u524d\u7cfb\u7edf\u8fd4\u56de\u5f53\u524d\u65f6\u95f4\uff08UTC \u65f6\u95f4\uff09\u3002 datetime datetime() \u6839\u636e\u5f53\u524d\u7cfb\u7edf\u8fd4\u56de\u5f53\u524d\u65e5\u671f\u548c\u65f6\u95f4\uff08UTC \u65f6\u95f4\uff09\u3002 map duration() \u6301\u7eed\u65f6\u95f4\u3002\u53ef\u4ee5\u7528\u4e8e\u5bf9\u6307\u5b9a\u65f6\u95f4\u8fdb\u884c\u8ba1\u7b97\u3002 <p>\u8be6\u7ec6\u4fe1\u606f\u53c2\u89c1\u65e5\u671f\u548c\u65f6\u95f4\u7c7b\u578b\u3002</p>"},{"location":"3.ngql-guide/6.functions-and-expressions/3.date-and-time/#_2","title":"\u793a\u4f8b","text":"<pre><code>nebula&gt;  RETURN now(), timestamp(), date(), time(), datetime();\n+------------+-------------+------------+-----------------+----------------------------+\n| now()      | timestamp() | date()     | time()          | datetime()                 |\n+------------+-------------+------------+-----------------+----------------------------+\n| 1640057560 | 1640057560  | 2021-12-21 | 03:32:40.351000 | 2021-12-21T03:32:40.351000 |\n+------------+-------------+------------+-----------------+----------------------------+\n</code></pre>"},{"location":"3.ngql-guide/6.functions-and-expressions/4.schema/","title":"Schema \u76f8\u5173\u51fd\u6570","text":"<p>\u672c\u6587\u4ecb\u7ecd NebulaGraph \u652f\u6301\u7684 Schema \u76f8\u5173\u7684\u51fd\u6570\u3002</p> <p>Schema \u76f8\u5173\u7684\u51fd\u6570\u5206\u4e3a\u4e24\u7c7b\uff1a</p> <ul> <li>\u9002\u7528\u4e8e\u539f\u751f nGQL \u8bed\u53e5</li> <li>\u9002\u7528\u4e8e openCypher \u517c\u5bb9\u8bed\u53e5</li> </ul>"},{"location":"3.ngql-guide/6.functions-and-expressions/4.schema/#ngql","title":"\u539f\u751f nGQL \u8bed\u53e5\u9002\u7528","text":"<p>\u539f\u751f nGQL \u8bed\u53e5\u7684<code>YIELD</code>\u548c<code>WHERE</code>\u5b50\u53e5\u4e2d\u53ef\u4ee5\u4f7f\u7528\u5982\u4e0b\u4ecb\u7ecd\u7684\u51fd\u6570\u3002</p> <p>Note</p> <p>\u7531\u4e8e vertex\u3001edge\u3001vertices\u3001edges\u3001path \u5c5e\u4e8e\u5173\u952e\u5b57\uff0c\u4f7f\u7528\u65f6\u9700\u8981\u7528<code>AS &lt;alias&gt;</code>\u8bbe\u7f6e\u522b\u540d\u624d\u80fd\u6b63\u5e38\u4f7f\u7528\u3002\u4f8b\u5982<code>GO FROM \"player100\" OVER follow YIELD edge AS e;</code>\u3002</p>"},{"location":"3.ngql-guide/6.functions-and-expressions/4.schema/#idvertex","title":"id(vertex)","text":"<p>id(vertex) \u8fd4\u56de\u70b9 ID\u3002</p> <p>\u8bed\u6cd5\uff1a<code>id(vertex)</code></p> <ul> <li>\u8fd4\u56de\u7c7b\u578b\uff1a\u548c\u70b9 ID \u7684\u7c7b\u578b\u4fdd\u6301\u4e00\u81f4\u3002</li> </ul> <p>\u793a\u4f8b\uff1a</p> <pre><code>nebula&gt; LOOKUP ON player WHERE player.age  &gt; 45 YIELD id(vertex);\n+-------------+\n| id(VERTEX)  |\n+-------------+\n| \"player144\" |\n| \"player140\" |\n+-------------+\n</code></pre>"},{"location":"3.ngql-guide/6.functions-and-expressions/4.schema/#propertiesvertex","title":"properties(vertex)","text":"<p>properties(vertex) \u8fd4\u56de\u70b9\u7684\u6240\u6709\u5c5e\u6027\u3002</p> <p>\u8bed\u6cd5\uff1a<code>properties(vertex)</code></p> <ul> <li>\u8fd4\u56de\u7c7b\u578b\uff1amap\u3002</li> </ul> <p>\u793a\u4f8b\uff1a</p> <pre><code>nebula&gt; LOOKUP ON player WHERE player.age  &gt; 45 \\\n        YIELD properties(vertex);\n+-------------------------------------+\n| properties(VERTEX)                  |\n+-------------------------------------+\n| {age: 47, name: \"Shaquille O'Neal\"} |\n| {age: 46, name: \"Grant Hill\"}       |\n+-------------------------------------+\n</code></pre> <p>\u7528\u6237\u4e5f\u53ef\u4ee5\u4f7f\u7528\u5c5e\u6027\u5f15\u7528\u7b26\uff08<code>$^</code>\u548c<code>$$</code>\uff09\u66ff\u4ee3\u51fd\u6570<code>properties()</code>\u4e2d\u7684<code>vertex</code>\u53c2\u6570\u6765\u83b7\u53d6\u70b9\u7684\u6240\u6709\u5c5e\u6027\u3002</p> <ul> <li><code>$^</code>\u8868\u793a\u63a2\u7d22\u5f00\u59cb\u65f6\u7684\u70b9\u6570\u636e\u3002\u4f8b\u5982<code>GO FROM \"player100\" OVER follow reversely YIELD properties($^)</code>\u4e2d\uff0c<code>$^</code>\u6307<code>player100</code>\u8fd9\u4e2a\u70b9\u3002</li> </ul> <ul> <li><code>$$</code>\u8868\u793a\u63a2\u7d22\u7ed3\u675f\u7684\u7ec8\u70b9\u6570\u636e\u3002</li> </ul> <p><code>properties($^)</code>\u548c<code>properties($$)</code>\u4e00\u822c\u7528\u4e8e<code>GO</code>\u8bed\u53e5\u4e2d\u3002\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u89c1\u5c5e\u6027\u5f15\u7528\u7b26\u3002</p> <p>Caution</p> <p>\u7528\u6237\u53ef\u4ee5\u901a\u8fc7<code>properties().&lt;property_name&gt;</code>\u6765\u83b7\u53d6\u70b9\u7684\u6307\u5b9a\u5c5e\u6027\u3002\u4f46\u662f\u4e0d\u5efa\u8bae\u4f7f\u7528\u8fd9\u79cd\u65b9\u5f0f\u83b7\u53d6\u6307\u5b9a\u5c5e\u6027\uff0c\u56e0\u4e3a<code>properties()</code>\u51fd\u6570\u8fd4\u56de\u6240\u6709\u5c5e\u6027\uff0c\u8fd9\u6837\u4f1a\u964d\u4f4e\u67e5\u8be2\u6027\u80fd\u3002</p>"},{"location":"3.ngql-guide/6.functions-and-expressions/4.schema/#propertiesedge","title":"properties(edge)","text":"<p>properties(edge) \u8fd4\u56de\u8fb9\u7684\u6240\u6709\u5c5e\u6027\u3002</p> <p>\u8bed\u6cd5\uff1a<code>properties(edge)</code></p> <ul> <li>\u8fd4\u56de\u7c7b\u578b\uff1amap\u3002</li> </ul> <p>\u793a\u4f8b\uff1a</p> <pre><code>nebula&gt; GO FROM \"player100\" OVER follow \\\n        YIELD properties(edge);\n+------------------+\n| properties(EDGE) |\n+------------------+\n| {degree: 95}     |\n| {degree: 95}     |\n+------------------+\n</code></pre> <p>Warning</p> <p>\u7528\u6237\u53ef\u4ee5\u901a\u8fc7<code>properties(edge).&lt;property_name&gt;</code>\u6765\u83b7\u53d6\u8fb9\u7684\u6307\u5b9a\u5c5e\u6027\u3002\u4f46\u662f\u4e0d\u5efa\u8bae\u4f7f\u7528\u8fd9\u79cd\u65b9\u5f0f\u83b7\u53d6\u6307\u5b9a\u5c5e\u6027\uff0c\u56e0\u4e3a<code>properties(edge)</code>\u51fd\u6570\u8fd4\u56de\u8fb9\u7684\u6240\u6709\u5c5e\u6027\uff0c\u8fd9\u6837\u4f1a\u964d\u4f4e\u67e5\u8be2\u6027\u80fd\u3002</p>"},{"location":"3.ngql-guide/6.functions-and-expressions/4.schema/#typeedge","title":"type(edge)","text":"<p>type(edge) \u8fd4\u56de\u8fb9\u7684 Edge type\u3002</p> <p>\u8bed\u6cd5\uff1a<code>type(edge)</code></p> <ul> <li>\u8fd4\u56de\u7c7b\u578b\uff1astring\u3002</li> </ul> <p>\u793a\u4f8b\uff1a</p> <pre><code>nebula&gt; GO FROM \"player100\" OVER follow \\\n        YIELD src(edge), dst(edge), type(edge), rank(edge);\n+-------------+-------------+------------+------------+\n| src(EDGE)   | dst(EDGE)   | type(EDGE) | rank(EDGE) |\n+-------------+-------------+------------+------------+\n| \"player100\" | \"player101\" | \"follow\"   | 0          |\n| \"player100\" | \"player125\" | \"follow\"   | 0          |\n+-------------+-------------+------------+------------+\n</code></pre>"},{"location":"3.ngql-guide/6.functions-and-expressions/4.schema/#srcedge","title":"src(edge)","text":"<p>src(edge) \u8fd4\u56de\u8fb9\u7684\u8d77\u59cb\u70b9 ID\u3002</p> <p>\u8bed\u6cd5\uff1a<code>src(edge)</code></p> <ul> <li>\u8fd4\u56de\u7c7b\u578b\uff1a\u548c\u70b9 ID \u7684\u7c7b\u578b\u4fdd\u6301\u4e00\u81f4\u3002</li> </ul> <p>\u793a\u4f8b\uff1a</p> <pre><code>nebula&gt; GO FROM \"player100\" OVER follow \\\n        YIELD src(edge), dst(edge);\n+-------------+-------------+\n| src(EDGE)   | dst(EDGE)   |\n+-------------+-------------+\n| \"player100\" | \"player101\" |\n| \"player100\" | \"player125\" |\n+-------------+-------------+\n</code></pre> <p>Note</p> <p>src(edge) \u548c properties(<code>$^</code>) \u67e5\u627e\u8d77\u59cb\u70b9\u7684\u8bed\u4e49\u4e0d\u540c\u3002src(edge) \u59cb\u7ec8\u8868\u793a\u56fe\u6570\u636e\u5e93\u4e2d\u8fb9\u7684\u8d77\u59cb\u70b9 ID\uff0c\u800c properties(<code>$^</code>) \u8868\u793a\u63a2\u7d22\u5f00\u59cb\u65f6\u7684\u70b9\u6570\u636e\uff0c\u4f8b\u5982\u793a\u4f8b\u4e2d<code>GO FROM \"player100\"</code>\u4e2d<code>player100</code>\u8fd9\u4e2a\u70b9\u7684\u6570\u636e\u3002</p>"},{"location":"3.ngql-guide/6.functions-and-expressions/4.schema/#dstedge","title":"dst(edge)","text":"<p>dst(edge) \u8fd4\u56de\u8fb9\u7684\u76ee\u7684\u70b9 ID\u3002</p> <p>\u8bed\u6cd5\uff1a<code>dst(edge)</code></p> <ul> <li>\u8fd4\u56de\u7c7b\u578b\uff1a\u548c\u70b9 ID \u7684\u7c7b\u578b\u4fdd\u6301\u4e00\u81f4\u3002</li> </ul> <p>\u793a\u4f8b\uff1a</p> <pre><code>nebula&gt; GO FROM \"player100\" OVER follow \\\n        YIELD src(edge), dst(edge);\n+-------------+-------------+\n| src(EDGE)   | dst(EDGE)   |\n+-------------+-------------+\n| \"player100\" | \"player101\" |\n| \"player100\" | \"player125\" |\n+-------------+-------------+\n</code></pre> <p>Note</p> <p>dst(edge) \u59cb\u7ec8\u8868\u793a\u56fe\u6570\u636e\u5e93\u4e2d\u8fb9\u7684\u76ee\u7684\u70b9 ID\u3002</p>"},{"location":"3.ngql-guide/6.functions-and-expressions/4.schema/#rankedge","title":"rank(edge)","text":"<p>rank(edge) \u8fd4\u56de\u8fb9\u7684 rank\u3002</p> <p>\u8bed\u6cd5\uff1a<code>rank(edge)</code></p> <ul> <li>\u8fd4\u56de\u7c7b\u578b\uff1aint\u3002</li> </ul> <p>\u793a\u4f8b\uff1a</p> <pre><code>nebula&gt; GO FROM \"player100\" OVER follow \\\n        YIELD src(edge), dst(edge), rank(edge);\n+-------------+-------------+------------+\n| src(EDGE)   | dst(EDGE)   | rank(EDGE) |\n+-------------+-------------+------------+\n| \"player100\" | \"player101\" | 0          |\n| \"player100\" | \"player125\" | 0          |\n+-------------+-------------+------------+\n</code></pre>"},{"location":"3.ngql-guide/6.functions-and-expressions/4.schema/#vertex","title":"vertex","text":"<p>vertex \u8fd4\u56de\u70b9\u7684\u4fe1\u606f\u3002\u5305\u62ec\u70b9 ID\u3001Tag\u3001\u5c5e\u6027\u548c\u503c\u3002\u9700\u8981\u7528<code>AS &lt;alias&gt;</code>\u8bbe\u7f6e\u522b\u540d\u3002</p> <p>\u8bed\u6cd5\uff1a<code>vertex</code></p> <p>\u793a\u4f8b\uff1a</p> <pre><code>nebula&gt; LOOKUP ON player WHERE player.age  &gt; 45 YIELD vertex AS v;\n+----------------------------------------------------------+\n| v                                                        |\n+----------------------------------------------------------+\n| (\"player144\" :player{age: 47, name: \"Shaquille O'Neal\"}) |\n| (\"player140\" :player{age: 46, name: \"Grant Hill\"})       |\n+----------------------------------------------------------+\n</code></pre>"},{"location":"3.ngql-guide/6.functions-and-expressions/4.schema/#edge","title":"edge","text":"<p>edge \u8fd4\u56de\u8fb9\u7684\u4fe1\u606f\u3002\u5305\u62ec Edge type\u3001\u8d77\u59cb\u70b9 ID\u3001\u76ee\u7684\u70b9 ID\u3001rank\u3001\u5c5e\u6027\u548c\u503c\u3002\u9700\u8981\u7528<code>AS &lt;alias&gt;</code>\u8bbe\u7f6e\u522b\u540d\u3002</p> <p>\u8bed\u6cd5\uff1a<code>edge</code></p> <p>\u793a\u4f8b\uff1a</p> <pre><code>nebula&gt; GO FROM \"player100\" OVER follow YIELD edge AS e;\n+----------------------------------------------------+\n| e                                                  |\n+----------------------------------------------------+\n| [:follow \"player100\"-&gt;\"player101\" @0 {degree: 95}] |\n| [:follow \"player100\"-&gt;\"player125\" @0 {degree: 95}] |\n+----------------------------------------------------+\n</code></pre>"},{"location":"3.ngql-guide/6.functions-and-expressions/4.schema/#vertices","title":"vertices","text":"<p>vertices \u8fd4\u56de\u5b50\u56fe\u4e2d\u7684\u70b9\u7684\u4fe1\u606f\u3002\u8be6\u60c5\u53c2\u89c1 GET SUBGRAPH\u3002</p>"},{"location":"3.ngql-guide/6.functions-and-expressions/4.schema/#edges","title":"edges","text":"<p>edges \u8fd4\u56de\u5b50\u56fe\u4e2d\u7684\u8fb9\u7684\u4fe1\u606f\u3002\u8be6\u60c5\u53c2\u89c1 GET SUBGRAPH\u3002</p>"},{"location":"3.ngql-guide/6.functions-and-expressions/4.schema/#path","title":"path","text":"<p>path \u8fd4\u56de\u8def\u5f84\u4fe1\u606f\u3002\u8be6\u60c5\u53c2\u89c1 FIND PATH\u3002</p>"},{"location":"3.ngql-guide/6.functions-and-expressions/4.schema/#opencypher","title":"openCypher \u517c\u5bb9\u8bed\u53e5\u9002\u7528","text":"<p>openCypher \u517c\u5bb9\u8bed\u53e5\u7684<code>RETURN</code>\u548c<code>WHERE</code>\u5b50\u53e5\u4e2d\u53ef\u4ee5\u4f7f\u7528\u5982\u4e0b\u4ecb\u7ecd\u7684\u51fd\u6570\u3002</p>"},{"location":"3.ngql-guide/6.functions-and-expressions/4.schema/#id","title":"id()","text":"<p>id() \u8fd4\u56de\u70b9 ID\u3002</p> <p>\u8bed\u6cd5\uff1a<code>id(&lt;vertex&gt;)</code></p> <ul> <li>\u8fd4\u56de\u7c7b\u578b\uff1a\u548c\u70b9 ID \u7684\u7c7b\u578b\u4fdd\u6301\u4e00\u81f4\u3002</li> </ul> <p>\u793a\u4f8b\uff1a</p> <pre><code>nebula&gt; MATCH (v:player) RETURN id(v); \n+-------------+\n| id(v)       |\n+-------------+\n| \"player129\" |\n| \"player115\" |\n| \"player106\" |\n| \"player102\" |\n...\n</code></pre>"},{"location":"3.ngql-guide/6.functions-and-expressions/4.schema/#tags_labels","title":"tags() \u548clabels()","text":"<p>tags() \u548clabels() \u8fd4\u56de\u70b9\u7684 Tag\u3002</p> <p>\u8bed\u6cd5\uff1a<code>tags(&lt;vertex&gt;)</code>\u3001<code>labels(&lt;vertex&gt;)</code></p> <ul> <li>\u8fd4\u56de\u7c7b\u578b\uff1alist\u3002</li> </ul> <p>\u793a\u4f8b\uff1a</p> <pre><code>nebula&gt; MATCH (v) WHERE id(v) == \"player100\" \\\n        RETURN tags(v);\n+------------+\n| tags(v)    |\n+------------+\n| [\"player\"] |\n+------------+\n</code></pre>"},{"location":"3.ngql-guide/6.functions-and-expressions/4.schema/#properties","title":"properties()","text":"<p>properties() \u8fd4\u56de\u70b9\u6216\u8fb9\u7684\u6240\u6709\u5c5e\u6027\u3002</p> <p>\u8bed\u6cd5\uff1a<code>properties(&lt;vertex_or_edge&gt;)</code></p> <ul> <li>\u8fd4\u56de\u7c7b\u578b\uff1amap\u3002</li> </ul> <p>\u793a\u4f8b\uff1a</p> <pre><code>nebula&gt; MATCH (v:player)-[e:follow]-() RETURN properties(v),properties(e);\n+---------------------------------------+---------------+\n| properties(v)                         | properties(e) |\n+---------------------------------------+---------------+\n| {age: 31, name: \"Stephen Curry\"}      | {degree: 90}  |\n| {age: 47, name: \"Shaquille O'Neal\"}   | {degree: 100} |\n| {age: 34, name: \"LeBron James\"}       | {degree: 13}  |\n...\n</code></pre>"},{"location":"3.ngql-guide/6.functions-and-expressions/4.schema/#type","title":"type()","text":"<p>type() \u8fd4\u56de\u8fb9\u7684 Edge type\u3002</p> <p>\u8bed\u6cd5\uff1a<code>type(&lt;edge&gt;)</code></p> <ul> <li>\u8fd4\u56de\u7c7b\u578b\uff1astring\u3002</li> </ul> <p>\u793a\u4f8b\uff1a</p> <pre><code>nebula&gt; MATCH (v:player{name:\"Tim Duncan\"})-[e]-&gt;() \\\n        RETURN type(e);\n+----------+\n| type(e)  |\n+----------+\n| \"serve\"  |\n| \"follow\" |\n| \"follow\" |\n+----------+\n</code></pre>"},{"location":"3.ngql-guide/6.functions-and-expressions/4.schema/#typeid","title":"typeid()","text":"<p>typeid() \u8fd4\u56de\u8fb9\u7684 Edge type \u7684\u5185\u90e8 ID \u503c\uff0c\u53ef\u4ee5\u7528\u6b63\u8d1f\u6765\u5224\u65ad\u65b9\u5411\u3002</p> <p>\u8bed\u6cd5\uff1a<code>typeid(&lt;edge&gt;)</code></p> <ul> <li>\u8fd4\u56de\u7c7b\u578b\uff1aint\u3002</li> </ul> <p>\u793a\u4f8b\uff1a</p> <pre><code>nebula&gt; MATCH (v:player)-[e:follow]-(v2) RETURN e,typeid(e), \\\n        CASE WHEN typeid(e) &gt; 0 \\\n        THEN \"\u6b63\u5411\" ELSE \"\u53cd\u5411\" END AS direction \\\n        LIMIT 5;\n+----------------------------------------------------+-----------+-----------+\n| e                                                  | typeid(e) | direction |\n+----------------------------------------------------+-----------+-----------+\n| [:follow \"player127\"-&gt;\"player114\" @0 {degree: 90}] | 5         | \"\u6b63\u5411\"    |\n| [:follow \"player127\"-&gt;\"player148\" @0 {degree: 70}] | 5         | \"\u6b63\u5411\"    |\n| [:follow \"player148\"-&gt;\"player127\" @0 {degree: 80}] | -5        | \"\u53cd\u5411\"    |\n| [:follow \"player147\"-&gt;\"player136\" @0 {degree: 90}] | 5         | \"\u6b63\u5411\"    |\n| [:follow \"player136\"-&gt;\"player147\" @0 {degree: 90}] | -5        | \"\u53cd\u5411\"    |\n+----------------------------------------------------+-----------+-----------+\n</code></pre>"},{"location":"3.ngql-guide/6.functions-and-expressions/4.schema/#src","title":"src()","text":"<p>src() \u8fd4\u56de\u8fb9\u7684\u8d77\u59cb\u70b9 ID\u3002</p> <p>\u8bed\u6cd5\uff1a<code>src(&lt;edge&gt;)</code></p> <ul> <li>\u8fd4\u56de\u7c7b\u578b\uff1a\u548c\u70b9 ID \u7684\u7c7b\u578b\u4fdd\u6301\u4e00\u81f4\u3002</li> </ul> <p>\u793a\u4f8b\uff1a</p> <pre><code>nebula&gt; MATCH ()-[e]-&gt;(v:player{name:\"Tim Duncan\"}) \\\n        RETURN src(e);\n+-------------+\n| src(e)      |\n+-------------+\n| \"player125\" |\n| \"player113\" |\n| \"player102\" |\n...\n</code></pre>"},{"location":"3.ngql-guide/6.functions-and-expressions/4.schema/#dst","title":"dst()","text":"<p>dst() \u8fd4\u56de\u8fb9\u7684\u76ee\u7684\u70b9 ID\u3002</p> <p>\u8bed\u6cd5\uff1a<code>dst(&lt;edge&gt;)</code></p> <ul> <li>\u8fd4\u56de\u7c7b\u578b\uff1a\u548c\u70b9 ID \u7684\u7c7b\u578b\u4fdd\u6301\u4e00\u81f4\u3002</li> </ul> <p>\u793a\u4f8b\uff1a</p> <pre><code>nebula&gt; MATCH (v:player{name:\"Tim Duncan\"})-[e]-&gt;() \\\n        RETURN dst(e);\n+-------------+\n| dst(e)      |\n+-------------+\n| \"team204\"   |\n| \"player101\" |\n| \"player125\" |\n+-------------+\n</code></pre>"},{"location":"3.ngql-guide/6.functions-and-expressions/4.schema/#startnode","title":"startNode()","text":"<p>startNode() \u83b7\u53d6\u4e00\u6761\u8def\u5f84\u5e76\u8fd4\u56de\u5b83\u7684\u8d77\u59cb\u70b9\u4fe1\u606f\uff0c\u5305\u62ec\u70b9 ID\u3001Tag\u3001\u5c5e\u6027\u548c\u503c\u3002</p> <p>\u8bed\u6cd5\uff1a<code>startNode(&lt;path&gt;)</code></p> <p>\u793a\u4f8b\uff1a</p> <pre><code>nebula&gt; MATCH p = (a :player {name : \"Tim Duncan\"})-[r:serve]-(t) \\\n        RETURN startNode(p);\n+----------------------------------------------------+\n| startNode(p)                                       |\n+----------------------------------------------------+\n| (\"player100\" :player{age: 42, name: \"Tim Duncan\"}) |\n+----------------------------------------------------+\n</code></pre>"},{"location":"3.ngql-guide/6.functions-and-expressions/4.schema/#endnode","title":"endNode()","text":"<p>endNode() \u83b7\u53d6\u4e00\u6761\u8def\u5f84\u5e76\u8fd4\u56de\u5b83\u7684\u76ee\u7684\u70b9\u4fe1\u606f\uff0c\u5305\u62ec\u70b9 ID\u3001Tag\u3001\u5c5e\u6027\u548c\u503c\u3002</p> <p>\u8bed\u6cd5\uff1a<code>endNode(&lt;path&gt;)</code></p> <p>\u793a\u4f8b\uff1a</p> <pre><code>nebula&gt; MATCH p = (a :player {name : \"Tim Duncan\"})-[r:serve]-(t) \\\n        RETURN endNode(p);\n+----------------------------------+\n| endNode(p)                       |\n+----------------------------------+\n| (\"team204\" :team{name: \"Spurs\"}) |\n+----------------------------------+\n</code></pre>"},{"location":"3.ngql-guide/6.functions-and-expressions/4.schema/#rank","title":"rank()","text":"<p>rank() \u8fd4\u56de\u8fb9\u7684 rank\u3002</p> <p>\u8bed\u6cd5\uff1a<code>rank(&lt;edge&gt;)</code></p> <ul> <li>\u8fd4\u56de\u7c7b\u578b\uff1aint\u3002</li> </ul> <p>\u793a\u4f8b\uff1a</p> <pre><code>nebula&gt; MATCH (v:player{name:\"Tim Duncan\"})-[e]-&gt;() \\\n        RETURN rank(e);\n+---------+\n| rank(e) |\n+---------+\n| 0       |\n| 0       |\n| 0       |\n+---------+\n</code></pre>"},{"location":"3.ngql-guide/6.functions-and-expressions/5.conditional-expressions/","title":"\u6761\u4ef6\u8868\u8fbe\u5f0f\u51fd\u6570","text":"<p>\u672c\u6587\u4ecb\u7ecd NebulaGraph \u652f\u6301\u7684\u6761\u4ef6\u8868\u8fbe\u5f0f\u51fd\u6570\u3002</p>"},{"location":"3.ngql-guide/6.functions-and-expressions/5.conditional-expressions/#case","title":"CASE","text":"<p><code>CASE</code>\u8868\u8fbe\u5f0f\u4f7f\u7528\u6761\u4ef6\u6765\u8fc7\u6ee4\u4f20\u53c2\u3002\u548c openCypher \u4e00\u6837\uff0cnGQL \u63d0\u4f9b\u4e24\u79cd\u5f62\u5f0f\u7684<code>CASE</code>\u8868\u8fbe\u5f0f\uff1a\u7b80\u5355\u5f62\u5f0f\u548c\u901a\u7528\u5f62\u5f0f\u3002</p> <p><code>CASE</code>\u8868\u8fbe\u5f0f\u4f1a\u904d\u5386\u6240\u6709\u6761\u4ef6\uff0c\u5e76\u5728\u6ee1\u8db3\u7b2c\u4e00\u4e2a\u6761\u4ef6\u65f6\u505c\u6b62\u8bfb\u53d6\u540e\u7eed\u6761\u4ef6\uff0c\u7136\u540e\u8fd4\u56de\u7ed3\u679c\u3002\u5982\u679c\u4e0d\u6ee1\u8db3\u4efb\u4f55\u6761\u4ef6\uff0c\u5c06\u901a\u8fc7<code>ELSE</code>\u5b50\u53e5\u8fd4\u56de\u7ed3\u679c\u3002\u5982\u679c\u6ca1\u6709<code>ELSE</code>\u5b50\u53e5\u4e14\u4e0d\u6ee1\u8db3\u4efb\u4f55\u6761\u4ef6\uff0c\u5219\u8fd4\u56de<code>NULL</code>\u3002</p>"},{"location":"3.ngql-guide/6.functions-and-expressions/5.conditional-expressions/#_2","title":"\u7b80\u5355\u5f62\u5f0f","text":"<ul> <li>\u8bed\u6cd5</li> </ul> <pre><code>CASE &lt;comparer&gt;\nWHEN &lt;value&gt; THEN &lt;result&gt;\n[WHEN ...]\n[ELSE &lt;default&gt;]\nEND\n</code></pre> <p>Caution</p> <p><code>CASE</code>\u8868\u8fbe\u5f0f\u4e00\u5b9a\u8981\u7528<code>END</code>\u7ed3\u5c3e\u3002</p> \u53c2\u6570 \u8bf4\u660e <code>comparer</code> \u7528\u4e8e\u4e0e<code>value</code>\u8fdb\u884c\u6bd4\u8f83\u7684\u503c\u6216\u8005\u6709\u6548\u8868\u8fbe\u5f0f\u3002 <code>value</code> \u548c<code>comparer</code>\u8fdb\u884c\u6bd4\u8f83\uff0c\u5982\u679c\u5339\u914d\uff0c\u5219\u6ee1\u8db3\u6b64\u6761\u4ef6\u3002 <code>result</code> \u5982\u679c<code>value</code>\u5339\u914d<code>comparer</code>\uff0c\u5219\u8fd4\u56de\u8be5<code>result</code>\u3002 <code>default</code> \u5982\u679c\u6ca1\u6709\u6761\u4ef6\u5339\u914d\uff0c\u5219\u8fd4\u56de\u8be5<code>default</code>\u3002 <ul> <li>\u793a\u4f8b</li> </ul> <pre><code>nebula&gt; RETURN \\\n        CASE 2+3 \\\n        WHEN 4 THEN 0 \\\n        WHEN 5 THEN 1 \\\n        ELSE -1 \\\n        END \\\n        AS result;\n+--------+\n| result |\n+--------+\n| 1      |\n+--------+\n</code></pre> <pre><code>nebula&gt; GO FROM \"player100\" OVER follow \\\n        YIELD properties($$).name AS Name, \\\n        CASE properties($$).age &gt; 35 \\\n        WHEN true THEN \"Yes\" \\\n        WHEN false THEN \"No\" \\\n        ELSE \"Nah\" \\\n        END \\\n        AS Age_above_35;\n+-----------------+--------------+\n| Name            | Age_above_35 |\n+-----------------+--------------+\n| \"Tony Parker\"   | \"Yes\"        |\n| \"Manu Ginobili\" | \"Yes\"        |\n+-----------------+--------------+\n</code></pre>"},{"location":"3.ngql-guide/6.functions-and-expressions/5.conditional-expressions/#_3","title":"\u901a\u7528\u5f62\u5f0f","text":"<ul> <li>\u8bed\u6cd5</li> </ul> <pre><code>CASE\nWHEN &lt;condition&gt; THEN &lt;result&gt;\n[WHEN ...]\n[ELSE &lt;default&gt;]\nEND\n</code></pre> \u53c2\u6570 \u8bf4\u660e <code>condition</code> \u5982\u679c\u6761\u4ef6<code>condition</code>\u4e3a true\uff0c\u8868\u793a\u6ee1\u8db3\u6b64\u6761\u4ef6\u3002 <code>result</code> <code>condition</code>\u4e3a true\uff0c\u5219\u8fd4\u56de\u6b64<code>result</code>\u3002 <code>default</code> \u5982\u679c\u6ca1\u6709\u6761\u4ef6\u5339\u914d\uff0c\u5219\u8fd4\u56de\u8be5<code>default</code>\u3002 <ul> <li>\u793a\u4f8b</li> </ul> <pre><code>nebula&gt; YIELD \\\n        CASE WHEN 4 &gt; 5 THEN 0 \\\n        WHEN 3+4==7 THEN 1 \\\n        ELSE 2 \\\n        END \\\n        AS result;\n+--------+\n| result |\n+--------+\n| 1      |\n+--------+\n</code></pre> <pre><code>nebula&gt; MATCH (v:player) WHERE v.player.age &gt; 30 \\\n        RETURN v.player.name AS Name,  \\\n        CASE \\\n        WHEN v.player.name STARTS WITH \"T\" THEN \"Yes\" \\\n        ELSE \"No\" \\\n        END \\\n        AS Starts_with_T;\n+---------------------+---------------+\n| Name                | Starts_with_T |\n+---------------------+---------------+\n| \"Tim Duncan\"        | \"Yes\"         |\n| \"LaMarcus Aldridge\" | \"No\"          |\n| \"Tony Parker\"       | \"Yes\"         |\n+---------------------+---------------+\n</code></pre>"},{"location":"3.ngql-guide/6.functions-and-expressions/5.conditional-expressions/#_4","title":"\u7b80\u5355\u5f62\u5f0f\u548c\u901a\u7528\u5f62\u5f0f\u7684\u533a\u522b","text":"<p>\u4e3a\u4e86\u907f\u514d\u8bef\u7528\u7b80\u5355\u5f62\u5f0f\u548c\u901a\u7528\u5f62\u5f0f\uff0c\u7528\u6237\u9700\u8981\u4e86\u89e3\u5b83\u4eec\u7684\u5dee\u5f02\u3002\u8bf7\u53c2\u89c1\u5982\u4e0b\u793a\u4f8b\uff1a</p> <pre><code>nebula&gt; GO FROM \"player100\" OVER follow \\\n        YIELD properties($$).name AS Name, properties($$).age AS Age, \\\n        CASE properties($$).age \\\n        WHEN properties($$).age &gt; 35 THEN \"Yes\" \\\n        ELSE \"No\" \\\n        END \\\n        AS Age_above_35;\n+-----------------+-----+--------------+\n| Name            | Age | Age_above_35 |\n+-----------------+-----+--------------+\n| \"Tony Parker\"   | 36  | \"No\"         |\n| \"Manu Ginobili\" | 41  | \"No\"         |\n+-----------------+-----+--------------+\n</code></pre> <p>\u793a\u4f8b\u672c\u610f\u4e3a\u5f53\u73a9\u5bb6\u5e74\u9f84\u5927\u4e8e 35 \u65f6\u8f93\u51fa<code>Yes</code>\u3002\u4f46\u662f\u67e5\u770b\u8f93\u51fa\u7ed3\u679c\uff0c\u5e74\u9f84\u4e3a 36 \u65f6\u8f93\u51fa\u7684\u5374\u662f<code>No</code>\u3002</p> <p>\u8fd9\u662f\u56e0\u4e3a\u67e5\u8be2\u4f7f\u7528\u4e86\u7b80\u5355\u5f62\u5f0f\u7684<code>CASE</code>\u8868\u8fbe\u5f0f\uff0c\u6bd4\u8f83\u5bf9\u8c61\u662f<code>$$.player.age</code>\u548c<code>$$.player.age &gt; 35</code>\u3002\u5f53\u5e74\u9f84\u4e3a 36 \u65f6\uff1a</p> <ul> <li><code>$$.player.age</code>\u7684\u503c\u4e3a<code>36</code>\uff0c\u6570\u636e\u7c7b\u578b\u4e3a int\u3002</li> </ul> <ul> <li><code>$$.player.age &gt; 35</code>\u7684\u503c\u4e3a<code>true</code>\uff0c\u6570\u636e\u7c7b\u578b\u4e3a boolean\u3002</li> </ul> <p>\u8fd9\u4e24\u79cd\u6570\u636e\u7c7b\u578b\u65e0\u6cd5\u5339\u914d\uff0c\u4e0d\u6ee1\u8db3\u6761\u4ef6\uff0c\u56e0\u6b64\u8fd4\u56de<code>No</code>\u3002</p>"},{"location":"3.ngql-guide/6.functions-and-expressions/5.conditional-expressions/#coalesce","title":"coalesce()","text":"<p>coalesce() \u8fd4\u56de\u6240\u6709\u8868\u8fbe\u5f0f\u4e2d\u7b2c\u4e00\u4e2a\u975e\u7a7a\u5143\u7d20\u3002</p> <p>\u8bed\u6cd5\uff1a<code>coalesce(&lt;expression_1&gt;[,&lt;expression_2&gt;...])</code></p> <ul> <li>\u8fd4\u56de\u7c7b\u578b\uff1a\u4e0e\u539f\u5143\u7d20\u7c7b\u578b\u76f8\u540c\u3002</li> </ul> <p>\u793a\u4f8b\uff1a</p> <pre><code>nebula&gt; RETURN coalesce(null,[1,2,3]) as result;\n+-----------+\n| result    |\n+-----------+\n| [1, 2, 3] |\n+-----------+\n\nnebula&gt; RETURN coalesce(null) as result;\n+----------+\n| result   |\n+----------+\n| __NULL__ |\n+----------+\n</code></pre>"},{"location":"3.ngql-guide/6.functions-and-expressions/6.list/","title":"\u5217\u8868\u51fd\u6570","text":"<p>\u672c\u6587\u4ecb\u7ecd NebulaGraph \u652f\u6301\u7684\u5217\u8868\uff08List\uff09\u51fd\u6570\u3002\u90e8\u5206\u5217\u8868\u51fd\u6570\u5728\u539f\u751f nGQL \u8bed\u53e5\u548c openCypher \u517c\u5bb9\u8bed\u53e5\u4e2d\u7684\u8bed\u6cd5\u4e0d\u540c\u3002</p>"},{"location":"3.ngql-guide/6.functions-and-expressions/6.list/#_2","title":"\u6ce8\u610f\u4e8b\u9879","text":"<ul> <li>\u548c SQL \u4e00\u6837\uff0cnGQL \u7684\u5b57\u7b26\u7d22\u5f15\uff08\u4f4d\u7f6e\uff09\u4ece<code>1</code>\u5f00\u59cb\u3002\u4f46\u662f C \u8bed\u8a00\u7684\u5b57\u7b26\u7d22\u5f15\u662f\u4ece<code>0</code>\u5f00\u59cb\u7684\u3002</li> </ul>"},{"location":"3.ngql-guide/6.functions-and-expressions/6.list/#_3","title":"\u901a\u7528","text":""},{"location":"3.ngql-guide/6.functions-and-expressions/6.list/#range","title":"range()","text":"<p>range() \u8fd4\u56de\u6307\u5b9a\u6574\u6570\u8303\u56f4<code>[start,end]</code>\u5185\u56fa\u5b9a\u6b65\u957f\u7684\u5217\u8868\u3002</p> <p>\u8bed\u6cd5\uff1a<code>range(start, end [, step])</code></p> <ul> <li><code>step</code>\uff1a\u53ef\u9009\u53c2\u6570\u3002\u6b65\u957f\u3002\u9ed8\u8ba4\u4e3a <code>1</code>\u3002</li> </ul> <ul> <li>\u8fd4\u56de\u7c7b\u578b\uff1alist\u3002</li> </ul> <p>\u793a\u4f8b\uff1a</p> <pre><code>nebula&gt; RETURN range(1,9,2);\n+-----------------+\n| range(1,9,2)    |\n+-----------------+\n| [1, 3, 5, 7, 9] |\n+-----------------+\n</code></pre>"},{"location":"3.ngql-guide/6.functions-and-expressions/6.list/#reverse","title":"reverse()","text":"<p>reverse() \u8fd4\u56de\u5c06\u539f\u5217\u8868\u9006\u5e8f\u6392\u5217\u7684\u65b0\u5217\u8868\u3002</p> <p>\u8bed\u6cd5\uff1a<code>reverse(&lt;list&gt;)</code></p> <ul> <li>\u8fd4\u56de\u7c7b\u578b\uff1alist\u3002</li> </ul> <p>\u793a\u4f8b\uff1a</p> <pre><code>nebula&gt; WITH [NULL, 4923, 'abc', 521, 487] AS ids \\\n        RETURN reverse(ids);\n+-----------------------------------+\n| reverse(ids)                      |\n+-----------------------------------+\n| [487, 521, \"abc\", 4923, __NULL__] |\n+-----------------------------------+\n</code></pre>"},{"location":"3.ngql-guide/6.functions-and-expressions/6.list/#tail","title":"tail()","text":"<p>tail() \u8fd4\u56de\u4e0d\u5305\u542b\u539f\u5217\u8868\u7b2c\u4e00\u4e2a\u5143\u7d20\u7684\u65b0\u5217\u8868\u3002</p> <p>\u8bed\u6cd5\uff1a<code>tail(&lt;list&gt;)</code></p> <ul> <li>\u8fd4\u56de\u7c7b\u578b\uff1alist\u3002</li> </ul> <p>\u793a\u4f8b\uff1a</p> <pre><code>nebula&gt; WITH [NULL, 4923, 'abc', 521, 487] AS ids \\\n        RETURN tail(ids);\n+-------------------------+\n| tail(ids)               |\n+-------------------------+\n| [4923, \"abc\", 521, 487] |\n+-------------------------+\n</code></pre>"},{"location":"3.ngql-guide/6.functions-and-expressions/6.list/#head","title":"head()","text":"<p>head() \u8fd4\u56de\u5217\u8868\u7684\u7b2c\u4e00\u4e2a\u5143\u7d20\u3002</p> <p>\u8bed\u6cd5\uff1a<code>head(&lt;list&gt;)</code></p> <ul> <li>\u8fd4\u56de\u7c7b\u578b\uff1a\u4e0e\u539f\u5217\u8868\u5185\u7684\u5143\u7d20\u7c7b\u578b\u76f8\u540c\u3002</li> </ul> <p>\u793a\u4f8b\uff1a</p> <pre><code>nebula&gt; WITH [NULL, 4923, 'abc', 521, 487] AS ids \\\n        RETURN head(ids);\n+-----------+\n| head(ids) |\n+-----------+\n| __NULL__  |\n+-----------+\n</code></pre>"},{"location":"3.ngql-guide/6.functions-and-expressions/6.list/#last","title":"last()","text":"<p>last() \u8fd4\u56de\u5217\u8868\u7684\u6700\u540e\u4e00\u4e2a\u5143\u7d20\u3002</p> <p>\u8bed\u6cd5\uff1a<code>last(&lt;list&gt;)</code></p> <ul> <li>\u8fd4\u56de\u7c7b\u578b\uff1a\u4e0e\u539f\u5217\u8868\u5185\u7684\u5143\u7d20\u7c7b\u578b\u76f8\u540c\u3002</li> </ul> <p>\u793a\u4f8b\uff1a</p> <pre><code>nebula&gt; WITH [NULL, 4923, 'abc', 521, 487] AS ids \\\n        RETURN last(ids);\n+-----------+\n| last(ids) |\n+-----------+\n| 487       |\n+-----------+\n</code></pre>"},{"location":"3.ngql-guide/6.functions-and-expressions/6.list/#reduce","title":"reduce()","text":"<p>reduce() \u5c06\u8868\u8fbe\u5f0f\u9010\u4e2a\u5e94\u7528\u4e8e\u5217\u8868\u4e2d\u7684\u5143\u7d20\uff0c\u7136\u540e\u548c\u7d2f\u52a0\u5668\u4e2d\u7684\u5f53\u524d\u7ed3\u679c\u7d2f\u52a0\uff0c\u6700\u540e\u8fd4\u56de\u5b8c\u6574\u7ed3\u679c\u3002\u8be5\u51fd\u6570\u5c06\u904d\u5386\u7ed9\u5b9a\u5217\u8868\u4e2d\u7684\u6bcf\u4e2a\u5143\u7d20 e\uff0c\u5728 e \u4e0a\u8fd0\u884c\u8868\u8fbe\u5f0f\u5e76\u548c\u7d2f\u52a0\u5668\u7684\u5f53\u524d\u7ed3\u679c\u7d2f\u52a0\uff0c\u5c06\u65b0\u7684\u7ed3\u679c\u5b58\u50a8\u5728\u7d2f\u52a0\u5668\u4e2d\u3002\u8fd9\u4e2a\u51fd\u6570\u7c7b\u4f3c\u4e8e\u51fd\u6570\u5f0f\u8bed\u8a00\uff08\u5982 Lisp \u548c Scala\uff09\u4e2d\u7684 fold \u6216 reduce \u65b9\u6cd5\u3002</p> <p>openCypher \u517c\u5bb9\u6027</p> <p>\u5728 openCypher \u4e2d\uff0c<code>reduce()</code>\u51fd\u6570\u6ca1\u6709\u5b9a\u4e49\u3002nGQL \u4f7f\u7528\u4e86 Cypher \u65b9\u5f0f\u5b9e\u73b0<code>reduce()</code>\u51fd\u6570\u3002</p> <p>\u8bed\u6cd5\uff1a<code>reduce(&lt;accumulator&gt; = &lt;initial&gt;, &lt;variable&gt; IN &lt;list&gt; | &lt;expression&gt;)</code></p> <ul> <li><code>accumulator</code>\uff1a\u5728\u904d\u5386\u5217\u8868\u65f6\u4fdd\u5b58\u7d2f\u52a0\u7ed3\u679c\u3002</li> </ul> <ul> <li><code>initial</code>\uff1a\u4e3a<code>accumulator</code>\u63d0\u4f9b\u521d\u59cb\u503c\u7684\u8868\u8fbe\u5f0f\u6216\u503c\u3002</li> </ul> <ul> <li><code>variable</code>\uff1a\u4e3a\u5217\u8868\u5f15\u5165\u4e00\u4e2a\u53d8\u91cf\uff0c\u51b3\u5b9a\u4f7f\u7528\u5217\u8868\u4e2d\u7684\u54ea\u4e2a\u5143\u7d20\u3002</li> </ul> <ul> <li><code>list</code>\uff1a\u5217\u8868\u6216\u5217\u8868\u8868\u8fbe\u5f0f\u3002</li> </ul> <ul> <li><code>expression</code>\uff1a\u8be5\u8868\u8fbe\u5f0f\u5c06\u5bf9\u5217\u8868\u4e2d\u7684\u6bcf\u4e2a\u5143\u7d20\u8fd0\u884c\u4e00\u6b21\uff0c\u5e76\u5c06\u7ed3\u679c\u7d2f\u52a0\u81f3<code>accumulator</code>\u3002</li> </ul> <ul> <li>\u8fd4\u56de\u7c7b\u578b\uff1a\u53d6\u51b3\u4e8e\u63d0\u4f9b\u7684\u53c2\u6570\uff0c\u4ee5\u53ca\u8868\u8fbe\u5f0f\u7684\u8bed\u4e49\u3002</li> </ul> <p>\u793a\u4f8b\uff1a</p> <pre><code>nebula&gt; RETURN reduce(totalNum = -4 * 5, n IN [1, 2] | totalNum + n * 2) AS r;\n+-----+\n| r   |\n+-----+\n| -14 |\n+-----+\n\nnebula&gt; MATCH p = (n:player{name:\"LeBron James\"})&lt;-[:follow]-(m) \\\n        RETURN  nodes(p)[0].player.age AS src1,  nodes(p)[1].player.age AS dst2,  \\\n        reduce(totalAge = 100, n IN nodes(p) | totalAge + n.player.age) AS sum; \n+------+------+-----+\n| src1 | dst2 | sum |\n+------+------+-----+\n| 34   | 31   | 165 |\n| 34   | 29   | 163 |\n| 34   | 33   | 167 |\n| 34   | 26   | 160 |\n| 34   | 34   | 168 |\n| 34   | 37   | 171 |\n+------+------+-----+\n\nnebula&gt; LOOKUP ON player WHERE player.name == \"Tony Parker\" YIELD id(vertex) AS VertexID \\\n        |  GO FROM $-.VertexID over follow \\\n        WHERE properties(edge).degree != reduce(totalNum = 5, n IN range(1, 3) | properties($$).age + totalNum + n) \\\n        YIELD properties($$).name AS id, properties($$).age AS age, properties(edge).degree AS degree;\n+---------------------+-----+--------+\n| id                  | age | degree |\n+---------------------+-----+--------+\n| \"Tim Duncan\"        | 42  | 95     |\n| \"LaMarcus Aldridge\" | 33  | 90     |\n| \"Manu Ginobili\"     | 41  | 95     |\n+---------------------+-----+--------+\n</code></pre>"},{"location":"3.ngql-guide/6.functions-and-expressions/6.list/#ngql","title":"\u539f\u751f nGQL \u8bed\u53e5\u9002\u7528","text":""},{"location":"3.ngql-guide/6.functions-and-expressions/6.list/#keys","title":"keys()","text":"<p>keys() \u8fd4\u56de\u4e00\u4e2a\u5217\u8868\uff0c\u5305\u542b\u5b57\u7b26\u4e32\u5f62\u5f0f\u7684\u70b9\u3001\u8fb9\u7684\u6240\u6709\u5c5e\u6027\u3002</p> <p>\u8bed\u6cd5\uff1a<code>keys({vertex | edge})</code></p> <ul> <li>\u8fd4\u56de\u7c7b\u578b\uff1alist\u3002</li> </ul> <p>\u793a\u4f8b\uff1a</p> <pre><code>nebula&gt; LOOKUP ON player \\\n        WHERE player.age  &gt; 45 \\\n        YIELD keys(vertex);\n+-----------------+\n| keys(VERTEX)    |\n+-----------------+\n| [\"age\", \"name\"] |\n| [\"age\", \"name\"] |\n+-----------------+\n</code></pre>"},{"location":"3.ngql-guide/6.functions-and-expressions/6.list/#labels","title":"labels()","text":"<p>labels() \u8fd4\u56de\u70b9\u7684 Tag \u5217\u8868\u3002</p> <p>\u8bed\u6cd5\uff1a<code>labels(verte)</code></p> <ul> <li>\u8fd4\u56de\u7c7b\u578b\uff1alist\u3002</li> </ul> <p>\u793a\u4f8b\uff1a</p> <pre><code>nebula&gt; FETCH PROP ON * \"player101\", \"player102\", \"team204\" \\\n        YIELD labels(vertex);\n+----------------+\n| labels(VERTEX) |\n+----------------+\n| [\"player\"]     |\n| [\"player\"]     |\n| [\"team\"]       |\n+----------------+\n</code></pre>"},{"location":"3.ngql-guide/6.functions-and-expressions/6.list/#opencypher","title":"openCypher \u517c\u5bb9\u8bed\u53e5\u9002\u7528","text":""},{"location":"3.ngql-guide/6.functions-and-expressions/6.list/#keys_1","title":"keys()","text":"<p>keys() \u8fd4\u56de\u4e00\u4e2a\u5217\u8868\uff0c\u5305\u542b\u5b57\u7b26\u4e32\u5f62\u5f0f\u7684\u70b9\u3001\u8fb9\u6216\u6620\u5c04\u7684\u6240\u6709\u5c5e\u6027\u3002</p> <p>\u8bed\u6cd5\uff1a<code>keys(&lt;vertex_or_edge&gt;)</code></p> <ul> <li>\u8fd4\u56de\u7c7b\u578b\uff1alist\u3002</li> </ul> <p>\u793a\u4f8b\uff1a</p> <pre><code>nebula&gt; MATCH (v:player{name:\"Tim Duncan\"})-[e]-&gt;() \\\n        RETURN keys(e);\n+----------------------------+\n| keys(e)                    |\n+----------------------------+\n| [\"end_year\", \"start_year\"] |\n| [\"degree\"]                 |\n| [\"degree\"]                 |\n+----------------------------+\n</code></pre>"},{"location":"3.ngql-guide/6.functions-and-expressions/6.list/#labels_1","title":"labels()","text":"<p>labels() \u8fd4\u56de\u70b9\u7684 Tag \u5217\u8868\u3002</p> <p>\u8bed\u6cd5\uff1a<code>labels(&lt;vertex&gt;)</code></p> <ul> <li>\u8fd4\u56de\u7c7b\u578b\uff1alist\u3002</li> </ul> <p>\u793a\u4f8b\uff1a</p> <pre><code>nebula&gt; MATCH (v)-[e:serve]-&gt;() \\\n        WHERE id(v)==\"player100\" \\\n        RETURN labels(v);\n+------------+\n| labels(v)  |\n+------------+\n| [\"player\"] |\n+------------+\n</code></pre>"},{"location":"3.ngql-guide/6.functions-and-expressions/6.list/#nodes","title":"nodes()","text":"<p>nodes() \u8fd4\u56de\u8def\u5f84\u4e2d\u6240\u6709\u70b9\u7684\u5217\u8868\u3002\u5305\u62ec\u70b9 ID\u3001Tag\u3001\u5c5e\u6027\u548c\u503c\u3002</p> <p>\u8bed\u6cd5\uff1a<code>nodes(&lt;path&gt;)</code></p> <ul> <li>\u8fd4\u56de\u7c7b\u578b\uff1alist\u3002</li> </ul> <p>\u793a\u4f8b\uff1a</p> <pre><code>nebula&gt; MATCH p=(v:player{name:\"Tim Duncan\"})--&gt;(v2) \\\n        RETURN nodes(p);\n+-------------------------------------------------------------------------------------------------------------+\n| nodes(p)                                                                                                    |\n+-------------------------------------------------------------------------------------------------------------+\n| [(\"player100\" :player{age: 42, name: \"Tim Duncan\"}), (\"team204\" :team{name: \"Spurs\"})]                      |\n| [(\"player100\" :player{age: 42, name: \"Tim Duncan\"}), (\"player101\" :player{age: 36, name: \"Tony Parker\"})]   |\n| [(\"player100\" :player{age: 42, name: \"Tim Duncan\"}), (\"player125\" :player{age: 41, name: \"Manu Ginobili\"})] |\n+-------------------------------------------------------------------------------------------------------------+\n</code></pre>"},{"location":"3.ngql-guide/6.functions-and-expressions/6.list/#relationships","title":"relationships()","text":"<p>relationships() \u8fd4\u56de\u8def\u5f84\u4e2d\u6240\u6709\u5173\u7cfb\u7684\u5217\u8868\u3002</p> <p>\u8bed\u6cd5\uff1a<code>relationships(&lt;path&gt;)</code></p> <ul> <li>\u8fd4\u56de\u7c7b\u578b\uff1alist\u3002</li> </ul> <p>\u793a\u4f8b\uff1a</p> <pre><code>nebula&gt; MATCH p=(v:player{name:\"Tim Duncan\"})--&gt;(v2) \\\n        RETURN relationships(p);\n+-------------------------------------------------------------------------+\n| relationships(p)                                                        |\n+-------------------------------------------------------------------------+\n| [[:serve \"player100\"-&gt;\"team204\" @0 {end_year: 2016, start_year: 1997}]] |\n| [[:follow \"player100\"-&gt;\"player101\" @0 {degree: 95}]]                    |\n| [[:follow \"player100\"-&gt;\"player125\" @0 {degree: 95}]]                    |\n+-------------------------------------------------------------------------+\n</code></pre>"},{"location":"3.ngql-guide/6.functions-and-expressions/8.predicate/","title":"\u8c13\u8bcd\u51fd\u6570","text":"<p>\u8c13\u8bcd\u51fd\u6570\u53ea\u8fd4\u56de<code>true</code>\u6216<code>false</code>\uff0c\u901a\u5e38\u7528\u4e8e<code>WHERE</code>\u5b50\u53e5\u4e2d\u3002</p> <p>NebulaGraph \u652f\u6301\u4ee5\u4e0b\u8c13\u8bcd\u51fd\u6570\u3002</p> \u51fd\u6570 \u8bf4\u660e exists() \u5982\u679c\u6307\u5b9a\u7684\u5c5e\u6027\u5728\u70b9\u3001\u8fb9\u6216\u6620\u5c04\u4e2d\u5b58\u5728\uff0c\u5219\u8fd4\u56de<code>true</code>\uff0c\u5426\u5219\u8fd4\u56de<code>false</code>\u3002 any() \u5982\u679c\u6307\u5b9a\u7684\u8c13\u8bcd\u9002\u7528\u4e8e\u5217\u8868\u4e2d\u7684\u81f3\u5c11\u4e00\u4e2a\u5143\u7d20\uff0c\u5219\u8fd4\u56de<code>true</code>\uff0c\u5426\u5219\u8fd4\u56de<code>false</code>\u3002 all() \u5982\u679c\u6307\u5b9a\u7684\u8c13\u8bcd\u9002\u7528\u4e8e\u5217\u8868\u4e2d\u7684\u6bcf\u4e2a\u5143\u7d20\uff0c\u5219\u8fd4\u56de<code>true</code>\uff0c\u5426\u5219\u8fd4\u56de<code>false</code>\u3002 none() \u5982\u679c\u6307\u5b9a\u7684\u8c13\u8bcd\u4e0d\u9002\u7528\u4e8e\u5217\u8868\u4e2d\u7684\u4efb\u4f55\u4e00\u4e2a\u5143\u7d20\uff0c\u5219\u8fd4\u56de<code>true</code>\uff0c\u5426\u5219\u8fd4\u56de<code>false</code>\u3002 single() \u5982\u679c\u6307\u5b9a\u7684\u8c13\u8bcd\u9002\u7528\u4e8e\u5217\u8868\u4e2d\u7684\u552f\u4e00\u4e00\u4e2a\u5143\u7d20\uff0c\u5219\u8fd4\u56de<code>true</code>\uff0c\u5426\u5219\u8fd4\u56de<code>false</code>\u3002 <p>Note</p> <p>\u5982\u679c\u5217\u8868\u4e3a\u7a7a\uff0c\u6216\u8005\u5217\u8868\u4e2d\u7684\u6240\u6709\u5143\u7d20\u90fd\u4e3a\u7a7a\uff0c\u5219\u8fd4\u56de NULL\u3002</p> <p>Compatibility</p> <p>\u5728 openCypher \u4e2d\u53ea\u5b9a\u4e49\u4e86\u51fd\u6570<code>exists()</code>\uff0c\u5176\u4ed6\u51e0\u4e2a\u51fd\u6570\u4f9d\u8d56\u4e8e\u5177\u4f53\u5b9e\u73b0\u3002</p>"},{"location":"3.ngql-guide/6.functions-and-expressions/8.predicate/#_2","title":"\u8bed\u6cd5","text":"<pre><code>&lt;predicate&gt;(&lt;variable&gt; IN &lt;list&gt; WHERE &lt;condition&gt;)\n</code></pre>"},{"location":"3.ngql-guide/6.functions-and-expressions/8.predicate/#_3","title":"\u793a\u4f8b","text":"<pre><code>nebula&gt; RETURN any(n IN [1, 2, 3, 4, 5, NULL] \\\n        WHERE n &gt; 2) AS r;\n+------+\n| r    |\n+------+\n| true |\n+------+\n\nnebula&gt; RETURN single(n IN range(1, 5) \\\n        WHERE n == 3) AS r;\n+------+\n| r    |\n+------+\n| true |\n+------+\n\nnebula&gt; RETURN none(n IN range(1, 3) \\\n        WHERE n == 0) AS r;\n+------+\n| r    |\n+------+\n| true |\n+------+\n\nnebula&gt; WITH [1, 2, 3, 4, 5, NULL] AS a \\\n        RETURN any(n IN a WHERE n &gt; 2);\n+-------------------------+\n| any(n IN a WHERE (n&gt;2)) |\n+-------------------------+\n| true                    |\n+-------------------------+\n\nnebula&gt; MATCH p = (n:player{name:\"LeBron James\"})&lt;-[:follow]-(m) \\\n        RETURN nodes(p)[0].player.name AS n1, nodes(p)[1].player.name AS n2, \\\n        all(n IN nodes(p) WHERE n.player.name NOT STARTS WITH \"D\") AS b;\n+----------------+-------------------+-------+\n| n1             | n2                | b     |\n+----------------+-------------------+-------+\n| \"LeBron James\" | \"Danny Green\"     | false |\n| \"LeBron James\" | \"Dejounte Murray\" | false |\n| \"LeBron James\" | \"Chris Paul\"      | true  |\n| \"LeBron James\" | \"Kyrie Irving\"    | true  |\n| \"LeBron James\" | \"Carmelo Anthony\" | true  |\n| \"LeBron James\" | \"Dwyane Wade\"     | false |\n+----------------+-------------------+-------+\n\nnebula&gt; MATCH p = (n:player{name:\"LeBron James\"})-[:follow]-&gt;(m) \\\n        RETURN single(n IN nodes(p) WHERE n.player.age &gt; 40) AS b;\n+------+\n| b    |\n+------+\n| true |\n+------+\n\nnebula&gt; MATCH (n:player) \\\n        RETURN exists(n.player.id), n IS NOT NULL;\n+---------------------+---------------+\n| exists(n.player.id) | n IS NOT NULL |\n+---------------------+---------------+\n| false               | true          |\n...\n\nnebula&gt; MATCH (n:player) \\\n        WHERE exists(n['name']) \\\n        RETURN n;\n+---------------------------------------------------------------+\n| n                                                             |\n+---------------------------------------------------------------+\n| (\"player105\" :player{age: 31, name: \"Danny Green\"})           |\n| (\"player109\" :player{age: 34, name: \"Tiago Splitter\"})        |\n| (\"player111\" :player{age: 38, name: \"David West\"})            |\n...\n</code></pre>"},{"location":"3.ngql-guide/7.general-query-statements/1.general-query-statements-overview/","title":"NebulaGraph \u67e5\u8be2\u8bed\u53e5\u6982\u8ff0","text":"<p>\u672c\u6587\u4ecb\u7ecd NebulaGraph \u7684\u901a\u7528\u7684\u67e5\u8be2\u8bed\u53e5\u5206\u7c7b\u53ca\u5404\u7c7b\u8bed\u53e5\u7684\u4f7f\u7528\u573a\u666f\u3002</p>"},{"location":"3.ngql-guide/7.general-query-statements/1.general-query-statements-overview/#_1","title":"\u80cc\u666f\u4fe1\u606f","text":"<p>NebulaGraph \u7684\u6570\u636e\u4ee5\u70b9\u548c\u8fb9\u7684\u5f62\u5f0f\u5b58\u50a8\u3002\u6bcf\u4e2a\u70b9\u53ef\u4ee5\u6709 0 \u6216\u591a\u4e2a\u6807\u7b7e\uff08Tag\uff09\uff1b\u6bcf\u6761\u8fb9\u6709\u4e14\u4ec5\u6709\u4e00\u4e2a\u8fb9\u7c7b\u578b\uff08Edge Type\uff09\u3002\u6807\u7b7e\u5b9a\u4e49\u70b9\u7684\u7c7b\u578b\u4ee5\u53ca\u63cf\u8ff0\u70b9\u7684\u5c5e\u6027\uff1b\u8fb9\u7c7b\u578b\u5b9a\u4e49\u8fb9\u7684\u7c7b\u578b\u4ee5\u53ca\u63cf\u8ff0\u8fb9\u7684\u5c5e\u6027\u3002\u5728\u67e5\u8be2\u65f6\uff0c\u53ef\u4ee5\u901a\u8fc7\u6307\u5b9a\u70b9\u7684\u6807\u7b7e\u6216\u8fb9\u7684\u7c7b\u578b\u6765\u9650\u5b9a\u67e5\u8be2\u7684\u8303\u56f4\u3002\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u89c1\u6570\u636e\u6a21\u578b\u3002</p>"},{"location":"3.ngql-guide/7.general-query-statements/1.general-query-statements-overview/#_2","title":"\u67e5\u8be2\u8bed\u53e5\u5206\u7c7b","text":"<p>NebulaGraph \u7684\u6838\u5fc3\u67e5\u8be2\u8bed\u53e5\u53ef\u5206\u4e3a\uff1a</p> <ul> <li>FETCH PROP ON</li> <li>LOOKUP ON</li> <li>GO</li> <li>MATCH</li> <li>FIND PATH</li> <li>GET SUBGRAPH</li> <li>SHOW</li> </ul> <p><code>FETCH PROP ON</code>\u548c<code>LOOKUP ON</code>\u66f4\u591a\u7528\u4e8e\u57fa\u7840\u7684\u6570\u636e\u67e5\u8be2\uff1b<code>GO</code>\u548c<code>MATCH</code>\u7528\u4e8e\u66f4\u590d\u6742\u7684\u67e5\u8be2\u548c\u56fe\u6570\u636e\u904d\u5386\uff1b<code>FIND PATH</code>\u548c<code>GET SUBGRAPH</code>\u7528\u4e8e\u56fe\u6570\u636e\u7684\u8def\u5f84\u67e5\u8be2\u548c\u5b50\u56fe\u67e5\u8be2\uff1b<code>SHOW</code>\u7528\u4e8e\u83b7\u53d6\u6570\u636e\u5e93\u7684\u5143\u6570\u636e\u4fe1\u606f\u3002</p>"},{"location":"3.ngql-guide/7.general-query-statements/1.general-query-statements-overview/#_3","title":"\u7528\u6cd5\u53ca\u4f7f\u7528\u573a\u666f","text":""},{"location":"3.ngql-guide/7.general-query-statements/1.general-query-statements-overview/#fetch_prop_on","title":"FETCH PROP ON","text":"<p>\u7528\u6cd5\uff1a\u7528\u4e8e\u83b7\u53d6\u6307\u5b9a\u70b9\u6216\u8fb9\u7684\u5c5e\u6027\u3002</p> <p>\u573a\u666f\uff1a\u5df2\u77e5\u5177\u4f53\u7684\u70b9 ID \u6216\u8fb9 ID\uff0c\u5e76\u60f3\u83b7\u53d6\u5176\u5c5e\u6027\u3002</p> <p>\u8bf4\u660e\uff1a</p> <ul> <li>\u5fc5\u9700\u6307\u5b9a\u70b9\u6216\u8fb9\u7684 ID\u3002</li> <li>\u5fc5\u9700\u6307\u5b9a\u70b9\u6216\u8fb9\u6240\u5c5e\u7684\u6807\u7b7e\u6216\u8fb9\u7c7b\u578b\u3002</li> <li>\u4f7f\u7528<code>YIELD</code>\u5b50\u53e5\u6307\u5b9a\u8fd4\u56de\u7684\u5c5e\u6027\u3002</li> </ul> <p>\u793a\u4f8b\uff1a</p> <pre><code>FETCH PROP ON player \"player100\" YIELD properties(vertex);\n              --+---  ----+-----       -------+----------\n                |         |                   |\n                |         |                   |\n                |         |                   +--------- \u8fd4\u56de\u70b9\u7684 player TAG \u4e0b\u6240\u6709\u5c5e\u6027\n                |         |\n                |         +----------------- \u4ece \"player100\" \u8fd9\u4e2a\u70b9\u83b7\u53d6\n                |\n                +--------------------------- \u83b7\u53d6 player \u8fd9\u4e2a TAG \u4e0b\u7684\u5c5e\u6027\n</code></pre> <p>\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u89c1 FETCH PROP ON\u3002</p>"},{"location":"3.ngql-guide/7.general-query-statements/1.general-query-statements-overview/#lookup_on","title":"LOOKUP ON","text":"<p>\u7528\u6cd5\uff1a\u7528\u4e8e\u57fa\u4e8e\u7d22\u5f15\u67e5\u8be2\u70b9\u6216\u8fb9 ID\u3002</p> <p>\u573a\u666f\uff1a\u6839\u636e\u5c5e\u6027\u503c\u67e5\u627e\u70b9\u6216\u8fb9\u7684 ID\u3002</p> <p>\u8bf4\u660e\uff1a</p> <ul> <li>\u5fc5\u9700\u9884\u5148\u5b9a\u4e49\u7d22\u5f15\u3002</li> <li>\u5fc5\u9700\u6307\u5b9a\u70b9\u6216\u8fb9\u6240\u5c5e\u7684\u6807\u7b7e\u6216\u8fb9\u7c7b\u578b\u3002</li> <li>\u4f7f\u7528<code>YIELD</code>\u5b50\u53e5\u6307\u5b9a\u8fd4\u56de\u7684 ID\u3002</li> </ul> <p>\u793a\u4f8b\uff1a</p> <pre><code>LOOKUP ON player WHERE player.name == \"Tony Parker\" YIELD id(vertex);\n          --+--- ------------------+---------------       ---+------\n            |                      |                         |\n            |                      |                         |\n            |                      |                         +---- \u8fd4\u56de\u67e5\u5230\u70b9\u7684 VID\n            |                      |\n            |                      +------------ \u8fc7\u6ee4\u6761\u4ef6\u662f\u5c5e\u6027 name \u7684\u503c\n            |\n            +----------------------------------- \u6839\u636e\u70b9\u7684 TAG player \u67e5\u8be2\n</code></pre> <p>\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u89c1 LOOKUP ON\u3002</p>"},{"location":"3.ngql-guide/7.general-query-statements/1.general-query-statements-overview/#go","title":"GO","text":"<p>\u7528\u6cd5\uff1a\u7528\u4e8e\u57fa\u4e8e\u7ed9\u5b9a\u7684\u70b9\u8fdb\u884c\u56fe\u904d\u5386\uff0c\u6309\u9700\u8fd4\u56de\u8d77\u59cb\u70b9\u3001\u8fb9\u6216\u76ee\u6807\u70b9\u7684\u4fe1\u606f\u3002\u53ef\u4ee5\u6307\u5b9a\u904d\u5386\u7684\u6df1\u5ea6\u3001\u8fb9\u7684\u7c7b\u578b\u3001\u65b9\u5411\u7b49\u3002</p> <p>\u573a\u666f\uff1a\u590d\u6742\u7684\u56fe\u904d\u5386\uff0c\u6bd4\u5982\u627e\u5230\u67d0\u4e2a\u70b9\u7684\u670b\u53cb\u3001\u670b\u53cb\u7684\u670b\u53cb\u7b49\u3002</p> <p>\u8bf4\u660e\uff1a</p> <ul> <li>\u7ed3\u5408\u5c5e\u6027\u5f15\u7528\u7b26(<code>$^</code>\u548c<code>$$</code>)\u6765\u8fd4\u56de\u8d77\u59cb\u70b9\u6216\u76ee\u6807\u70b9\u7684\u5c5e\u6027\uff0c\u4f8b\u5982<code>YIELD $^.player.name</code>\u3002</li> <li>\u7ed3\u5408\u51fd\u6570<code>properties($^)</code>\u548c<code>properties($$)</code>\u6765\u8fd4\u56de\u8d77\u59cb\u70b9\u6216\u76ee\u6807\u70b9\u7684\u6240\u6709\u5c5e\u6027\uff1b\u6216\u8005\u5728\u51fd\u6570\u4e2d\u6307\u5b9a\u5c5e\u6027\u540d\uff0c\u6765\u8fd4\u56de\u6307\u5b9a\u7684\u5c5e\u6027\uff0c\u4f8b\u5982<code>YIELD properties($^).name</code>\u3002</li> <li>\u7ed3\u5408\u51fd\u6570<code>src(edge)</code>\u548c<code>dst(edge)</code>\u6765\u8fd4\u56de\u8fb9\u7684\u8d77\u59cb\u70b9\u6216\u76ee\u6807\u70b9 ID\uff0c\u4f8b\u5982<code>YIELD src(edge)</code>\u3002</li> </ul> <p>\u793a\u4f8b\uff1a</p> <pre><code>GO 3 STEPS FROM \"player102\" OVER follow YIELD dst(edge);\n-----+---       --+-------       -+----       ---+-----\n     |            |               |              |\n     |            |               |              |\n     |            |               |              +--------- \u8fd4\u56de\u6700\u540e\u4e00\u8df3\u8fb9\u7684\u7ec8\u70b9\n     |            |               |\n     |            |               +------ \u4ece follow \u8fd9\u4e2a\u8fb9\u7684\u51fa\u65b9\u5411\u63a2\u7d22\n     |            |\n     |            +--------------------- \u8d77\u70b9\u662f \"player102\"\n     |\n     +---------------------------------- \u63a2\u7d22 3 \u6b65\n</code></pre> <p>\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u89c1 GO\u3002</p>"},{"location":"3.ngql-guide/7.general-query-statements/1.general-query-statements-overview/#match","title":"MATCH","text":"<p>\u7528\u6cd5\uff1a\u7528\u4e8e\u6267\u884c\u590d\u6742\u7684\u56fe\u6a21\u5f0f\u5339\u914d\u67e5\u8be2\u3002</p> <p>\u573a\u666f\uff1a\u590d\u6742\u7684\u56fe\u6a21\u5f0f\u5339\u914d\u65f6\u4f7f\u7528\uff0c\u6bd4\u5982\u5bfb\u627e\u6ee1\u8db3\u7279\u5b9a\u6a21\u5f0f\u7684\u70b9\u548c\u8fb9\u7684\u7ec4\u5408\u3002</p> <p>\u8bf4\u660e\uff1a</p> <p>MATCH \u8bed\u53e5\u517c\u5bb9 OpenCypher \u7684\u8bed\u6cd5\uff0c\u4f46\u662f\u6709\u4e00\u4e9b\u5dee\u5f02\uff1a</p> <ul> <li>\u4f7f\u7528<code>==</code>\u8868\u8fbe\u76f8\u7b49\u5224\u65ad\u800c\u4e0d\u662f<code>=</code>\uff0c\u4f8b\u5982<code>WHERE player.name == \"Tony Parker\"</code>\u3002</li> </ul> <ul> <li>\u5f15\u7528\u70b9\u7684\u5c5e\u6027\u65f6\uff0c\u9700\u8981\u6307\u5b9a\u70b9\u7684\u6807\u7b7e\uff0c\u4f8b\u5982<code>YIELD player.name</code>\u3002</li> </ul> <ul> <li>\u65b0\u589e<code>WHERE id(v) == \"player100\"</code>\u8bed\u6cd5\u3002</li> </ul> <ul> <li>\u5fc5\u987b\u4f7f\u7528<code>RETURN</code>\u5b50\u53e5\u6307\u5b9a\u8fd4\u56de\u7684\u4fe1\u606f\u3002</li> </ul> <p>\u793a\u4f8b\uff1a</p> <pre><code>MATCH (v:player{name:\"Tim Duncan\"})--(v2:player) \\\n        RETURN v2.player.name AS Name;\n</code></pre> <p>\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u89c1 MATCH\u3002</p>"},{"location":"3.ngql-guide/7.general-query-statements/1.general-query-statements-overview/#find_path","title":"FIND PATH","text":"<p>\u7528\u6cd5\uff1a\u7528\u4e8e\u67e5\u8be2\u7ed9\u5b9a\u7684\u8d77\u59cb\u70b9\u548c\u76ee\u6807\u70b9\u4e4b\u95f4\u7684\u6240\u6709\u8def\u5f84\uff1b\u6216\u8005\u67e5\u8be2\u8def\u5f84\u4e2d\u7684\u70b9\u548c\u8fb9\u7684\u5c5e\u6027\u65f6\u4f7f\u7528\u3002</p> <p>\u573a\u666f\uff1a\u67e5\u8be2\u4e24\u4e2a\u70b9\u4e4b\u95f4\u7684\u6240\u6709\u8def\u5f84\u3002</p> <p>\u8bf4\u660e\uff1a\u5fc5\u987b\u4f7f\u7528<code>YIELD</code>\u5b50\u53e5\u6307\u5b9a\u8fd4\u56de\u4fe1\u606f\u3002</p> <p>\u793a\u4f8b\uff1a</p> <pre><code>FIND SHORTEST PATH FROM \"player102\" TO \"team204\" OVER * YIELD path AS p;\n-------+-----           -------+---------------- ---+--       ----+----\n       |                       |                    |             |\n       |                       |                    |             |\n       |                       |                    |             +---------- \u8fd4\u56de\u8def\u5f84\u4e3a p \u5217\n       |                       |                    |\n       |                       |                    +----------- \u7ecf\u7531\u6240\u6709\u7c7b\u578b\u7684\u8fb9\u7684\u51fa\u65b9\u5411\u63a2\u7d22\n       |                       |    \n       |                       |\n       |                       +------------------ \u4ece\u7ed9\u5b9a\u7684\u8d77\u70b9\u3001\u7ec8\u70b9 VID\n       |\n       +--------------------------- \u67e5\u627e\u6700\u77ed\u8def\u5f84\n</code></pre> <p>\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u89c1 FIND PATH\u3002</p>"},{"location":"3.ngql-guide/7.general-query-statements/1.general-query-statements-overview/#get_subgraph","title":"GET SUBGRAPH","text":"<p>\u7528\u6cd5\uff1a\u63d0\u53d6\u6ee1\u8db3\u7279\u5b9a\u6761\u4ef6\u7684\u56fe\u7684\u4e00\u90e8\u5206\uff1b\u67e5\u8be2\u5b50\u56fe\u4e2d\u7684\u70b9\u548c\u8fb9\u7684\u5c5e\u6027\u3002</p> <p>\u573a\u666f\uff1a\u5206\u6790\u56fe\u7684\u5c40\u90e8\u7ed3\u6784\u6216\u7279\u5b9a\u533a\u57df\u65f6\u975e\u5e38\u6709\u7528\uff0c\u6bd4\u5982\u63d0\u53d6\u67d0\u4e2a\u4eba\u7684\u793e\u4ea4\u7f51\u7edc\u5b50\u56fe\uff0c\u6216\u8005\u63d0\u53d6\u67d0\u4e2a\u533a\u57df\u7684\u4ea4\u901a\u7f51\u7edc\u3002</p> <p>\u8bf4\u660e\uff1a\u5fc5\u987b\u4f7f\u7528<code>YIELD</code>\u5b50\u53e5\u6307\u5b9a\u8fd4\u56de\u4fe1\u606f\u3002</p> <p>\u793a\u4f8b\uff1a</p> <pre><code>GET SUBGRAPH 5 STEPS FROM \"player101\" YIELD VERTICES AS nodes, EDGES AS relationships;\n             -----+- -----+--------         ------------------------+----------------\n                  |       |                                         |\n                  |       |                                         |\n                  |       +------- \u4ece \"player101\" \u5f00\u59cb\u51fa\u53d1            +------------ \u8fd4\u56de\u6240\u6709\u7684\u70b9\u3001\u8fb9\n                  |\n                  +----------------- \u83b7\u53d6 5 \u6b65\u7684\u63a2\u7d22                                              \n</code></pre> <p>\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u89c1 GET SUBGRAPH\u3002</p>"},{"location":"3.ngql-guide/7.general-query-statements/1.general-query-statements-overview/#show","title":"SHOW","text":"<p>SHOW \u8bed\u53e5\u4e3b\u8981\u7528\u4e8e\u83b7\u53d6\u6570\u636e\u5e93\u7684\u5143\u6570\u636e\u4fe1\u606f\uff0c\u800c\u4e0d\u662f\u7528\u4e8e\u83b7\u53d6\u5b58\u50a8\u5728\u6570\u636e\u5e93\u4e2d\u7684\u5b9e\u9645\u6570\u636e\u5185\u5bb9\u3002\u8fd9\u7c7b\u8bed\u53e5\u901a\u5e38\u7528\u4e8e\u67e5\u8be2\u6570\u636e\u5e93\u7684\u7ed3\u6784\u548c\u914d\u7f6e\uff0c\u5982\u67e5\u770b\u73b0\u6709\u7684\u56fe\u7a7a\u95f4\u3001\u6807\u7b7e\u3001\u8fb9\u7c7b\u578b\u3001\u7d22\u5f15\u7b49\u3002</p> \u8bed\u53e5 \u8bed\u6cd5 \u793a\u4f8b \u8bf4\u660e SHOW CHARSET <code>SHOW CHARSET</code> <code>SHOW CHARSET</code> \u663e\u793a\u5f53\u524d\u7684\u5b57\u7b26\u96c6\u3002 SHOW COLLATION <code>SHOW COLLATION</code> <code>SHOW COLLATION</code> \u663e\u793a\u5f53\u524d\u7684\u6392\u5e8f\u89c4\u5219\u3002 SHOW CREATE SPACE <code>SHOW CREATE SPACE &lt;space_name&gt;</code> <code>SHOW CREATE SPACE basketballplayer</code> \u663e\u793a\u6307\u5b9a\u56fe\u7a7a\u95f4\u7684\u521b\u5efa\u8bed\u53e5\u3002 SHOW CREATE TAG/EDGE <code>SHOW CREATE {TAG &lt;tag_name&gt; | EDGE &lt;edge_name&gt;}</code> <code>SHOW CREATE TAG player</code> \u663e\u793a\u6307\u5b9a Tag/Edge type \u7684\u57fa\u672c\u4fe1\u606f\u3002 SHOW HOSTS <code>SHOW HOSTS [GRAPH | STORAGE | META]</code> <code>SHOW HOSTS</code><code>SHOW HOSTS GRAPH</code> \u663e\u793a Graph\u3001Storage\u3001Meta \u670d\u52a1\u4e3b\u673a\u4fe1\u606f\u3001\u7248\u672c\u4fe1\u606f\u3002 SHOW INDEX STATUS <code>SHOW {TAG | EDGE} INDEX STATUS</code> <code>SHOW TAG INDEX STATUS</code> \u91cd\u5efa\u539f\u751f\u7d22\u5f15\u7684\u4f5c\u4e1a\u72b6\u6001\uff0c\u4ee5\u4fbf\u786e\u5b9a\u91cd\u5efa\u7d22\u5f15\u662f\u5426\u6210\u529f\u3002 SHOW INDEXES <code>SHOW {TAG | EDGE} INDEXES</code> <code>SHOW TAG INDEXES</code> \u5217\u51fa\u5f53\u524d\u56fe\u7a7a\u95f4\u5185\u7684\u6240\u6709 Tag \u548c Edge type\uff08\u5305\u62ec\u5c5e\u6027\uff09\u7684\u7d22\u5f15\u3002 SHOW PARTS <code>SHOW PARTS [&lt;part_id&gt;]</code> <code>SHOW PARTS</code> \u663e\u793a\u56fe\u7a7a\u95f4\u4e2d\u6307\u5b9a\u5206\u7247\u6216\u6240\u6709\u5206\u7247\u7684\u4fe1\u606f\u3002 SHOW ROLES <code>SHOW ROLES IN &lt;space_name&gt;</code> <code>SHOW ROLES in basketballplayer</code> \u663e\u793a\u5206\u914d\u7ed9\u7528\u6237\u7684\u89d2\u8272\u4fe1\u606f\u3002 SHOW SNAPSHOTS <code>SHOW SNAPSHOTS</code> <code>SHOW SNAPSHOTS</code> \u663e\u793a\u6240\u6709\u5feb\u7167\u4fe1\u606f\u3002 SHOW SPACES <code>SHOW SPACES</code> <code>SHOW SPACES</code> \u663e\u793a\u73b0\u5b58\u7684\u56fe\u7a7a\u95f4\u3002 SHOW STATS <code>SHOW STATS</code> <code>SHOW STATS</code> \u663e\u793a\u6700\u8fd1<code>STATS</code>\u4f5c\u4e1a\u6536\u96c6\u7684\u56fe\u7a7a\u95f4\u7edf\u8ba1\u4fe1\u606f\u3002 SHOW TAGS/EDGES <code>SHOW TAGS | EDGES</code> <code>SHOW TAGS</code>\u3001<code>SHOW EDGES</code> \u663e\u793a\u5f53\u524d\u56fe\u7a7a\u95f4\u5185\u7684\u6240\u6709 Tag/Edge type\u3002 SHOW USERS <code>SHOW USERS</code> <code>SHOW USERS</code> \u663e\u793a\u7528\u6237\u4fe1\u606f\u3002 SHOW SESSIONS <code>SHOW SESSIONS</code> <code>SHOW SESSIONS</code> \u663e\u793a\u6240\u6709\u4f1a\u8bdd\u4fe1\u606f\u3002 SHOW SESSIONS <code>SHOW SESSION &lt;Session_Id&gt;</code> <code>SHOW SESSION 1623304491050858</code> \u6307\u5b9a\u4f1a\u8bdd ID \u8fdb\u884c\u67e5\u770b\u3002 SHOW QUERIES <code>SHOW [ALL] QUERIES</code> <code>SHOW QUERIES</code> \u67e5\u770b\u5f53\u524d Session \u4e2d\u6b63\u5728\u6267\u884c\u7684\u67e5\u8be2\u8bf7\u6c42\u4fe1\u606f\u3002 SHOW META LEADER <code>SHOW META LEADER</code> <code>SHOW META LEADER</code> \u663e\u793a\u5f53\u524d Meta \u96c6\u7fa4\u7684 leader \u4fe1\u606f\u3002"},{"location":"3.ngql-guide/7.general-query-statements/1.general-query-statements-overview/#_4","title":"\u590d\u5408\u67e5\u8be2","text":"<p>NebulaGraph \u7684\u67e5\u8be2\u8bed\u53e5\u53ef\u4ee5\u7ec4\u5408\u4f7f\u7528\uff0c\u4ee5\u5b9e\u73b0\u66f4\u590d\u6742\u7684\u67e5\u8be2\u3002</p> <p>\u590d\u5408\u8bed\u53e5\u4e2d\u5982\u9700\u5f15\u7528\u5b50\u67e5\u8be2\u7684\u7ed3\u679c\uff0c\u9700\u8981\u4e3a\u8be5\u7ed3\u679c\u8bbe\u7f6e\u522b\u540d\uff0c\u5e76\u4f7f\u7528\u7ba1\u9053\u7b26<code>|</code>\u4f20\u9012\u7ed9\u4e0b\u4e00\u4e2a\u5b50\u67e5\u8be2\uff0c\u540c\u65f6\u5728\u4e0b\u4e00\u4e2a\u5b50\u67e5\u8be2\u4e2d\u4f7f\u7528<code>$-</code>\u5f15\u7528\u8be5\u7ed3\u679c\u7684\u522b\u540d\u3002\u8be6\u60c5\u53c2\u89c1\u7ba1\u9053\u7b26\u3002</p> <p>\u793a\u4f8b\uff1a</p> <pre><code>nebula&gt; GO FROM \"player100\" OVER follow \\\n        YIELD dst(edge) AS dstid, properties($$).name AS Name | \\\n        GO FROM $-.dstid OVER follow YIELD dst(edge);\n\n+-------------+\n| dst(EDGE)   |\n+-------------+\n| \"player100\" |\n| \"player102\" |\n| \"player125\" |\n| \"player100\" |\n+-------------+\n</code></pre> <p>\u7ba1\u9053\u7b26<code>|</code>\u4ec5\u9002\u7528\u4e8e nGQL\uff0c\u4e0d\u9002\u7528\u4e8e OpenCypher \u8bed\u53e5\uff0c\u5373\u4e0d\u80fd\u5728 MATCH \u8bed\u53e5\u4e2d\u4f7f\u7528\u7ba1\u9053\u7b26\u3002\u5982\u679c\u9700\u8981\u4f7f\u7528 MATCH \u8bed\u53e5\u8fdb\u884c\u590d\u5408\u67e5\u8be2\uff0c\u53ef\u4ee5\u4f7f\u7528 WITH \u5b50\u53e5\u3002</p> <p>\u793a\u4f8b\uff1a</p> <pre><code>nebula&gt; MATCH (v:player)--&gt;(v2:player) \\\n        WITH DISTINCT v2 AS v2, v2.player.age AS Age \\\n        ORDER BY Age \\\n        WHERE Age&lt;25 \\\n        RETURN v2.player.name AS Name, Age;\n+----------------------+-----+\n| Name                 | Age |\n+----------------------+-----+\n| \"Luka Doncic\"        | 20  |\n| \"Ben Simmons\"        | 22  |\n| \"Kristaps Porzingis\" | 23  |\n+----------------------+-----+\n</code></pre>"},{"location":"3.ngql-guide/7.general-query-statements/1.general-query-statements-overview/#_5","title":"\u66f4\u591a\u4fe1\u606f","text":"<ul> <li>nGQL \u7b80\u660e\u6559\u7a0b</li> <li>nGQL \u8bed\u53e5\u6c47\u603b</li> </ul>"},{"location":"3.ngql-guide/7.general-query-statements/2.match/","title":"MATCH","text":"<p><code>MATCH</code>\u8bed\u53e5\u63d0\u4f9b\u57fa\u4e8e\u6a21\u5f0f\uff08Pattern\uff09\u5339\u914d\u7684\u641c\u7d22\u529f\u80fd\uff0c\u5176\u901a\u8fc7\u5b9a\u4e49\u4e00\u4e2a\u6216\u591a\u4e2a\u6a21\u5f0f\uff0c\u5141\u8bb8\u5728 NebulaGraph \u4e2d\u67e5\u627e\u4e0e\u6a21\u5f0f\u5339\u914d\u7684\u6570\u636e\u3002\u5728\u68c0\u7d22\u5230\u5339\u914d\u7684\u6570\u636e\u540e\uff0c\u7528\u6237\u53ef\u4ee5\u4f7f\u7528 RETURN \u5b50\u53e5\u5c06\u5176\u4f5c\u4e3a\u7ed3\u679c\u8fd4\u56de\u3002</p> <p>\u5728\u672c\u6587\u4e2d\uff0c\u6211\u4eec\u5c06\u4f7f\u7528\u540d\u4e3a basketballplayer \u7684\u6d4b\u8bd5\u6570\u636e\u96c6\u6765\u6f14\u793a MATCH \u8bed\u53e5\u7684\u4f7f\u7528\u3002</p>"},{"location":"3.ngql-guide/7.general-query-statements/2.match/#_1","title":"\u8bed\u6cd5","text":"<p><code>MATCH</code>\u8bed\u53e5\u7684\u8bed\u6cd5\u76f8\u8f83\u4e8e\u5176\u4ed6\u67e5\u8be2\u8bed\u53e5\uff08\u5982<code>GO</code>\u548c<code>LOOKUP</code>\uff09\u66f4\u5177\u7075\u6d3b\u6027\u3002\u5728\u8fdb\u884c\u67e5\u8be2\u65f6\uff0c<code>MATCH</code>\u8bed\u53e5\u4f7f\u7528\u7684\u8def\u5f84\u7c7b\u578b\u662f<code>trail</code>\uff0c\u8fd9\u610f\u5473\u7740\u70b9\u53ef\u4ee5\u91cd\u590d\u51fa\u73b0\uff0c\u4f46\u8fb9\u4e0d\u80fd\u91cd\u590d\u3002</p> <p><code>MATCH</code>\u8bed\u6cd5\u7684\u57fa\u672c\u7ed3\u6784\u5982\u4e0b\uff1a</p> <pre><code>MATCH &lt;pattern&gt; [&lt;clause_1&gt;]  RETURN &lt;output&gt;  [&lt;clause_2&gt;];\n</code></pre> <ul> <li><code>pattern</code>\uff1a<code>MATCH</code>\u8bed\u53e5\u652f\u6301\u5339\u914d\u4e00\u4e2a\u6216\u591a\u4e2a\u6a21\u5f0f\uff0c\u591a\u4e2a\u6a21\u5f0f\u4e4b\u95f4\u7528\u82f1\u6587\u9017\u53f7\uff08,\uff09\u5206\u9694\u3002\u4f8b\u5982<code>(a)-[]-&gt;(b),(c)-[]-&gt;(d)</code>\u3002Pattern \u7684\u8be6\u7ec6\u8bf4\u660e\u8bf7\u53c2\u89c1\u6a21\u5f0f\u3002</li> </ul> <ul> <li><code>clause_1</code>\uff1a\u652f\u6301<code>WHERE</code>\u3001<code>WITH</code>\u3001<code>UNWIND</code>\u3001<code>OPTIONAL MATCH</code>\u5b50\u53e5\uff0c\u4e5f\u53ef\u4ee5\u4f7f\u7528<code>MATCH</code>\u4f5c\u4e3a\u5b50\u53e5\u3002</li> </ul> <ul> <li><code>output</code>\uff1a\u5b9a\u4e49\u9700\u8981\u8fd4\u56de\u8f93\u51fa\u7ed3\u679c\u7684\u5217\u8868\u540d\u79f0\u3002\u53ef\u4ee5\u4f7f\u7528<code>AS</code>\u8bbe\u7f6e\u5217\u8868\u7684\u522b\u540d\u3002</li> </ul> <ul> <li><code>clause_2</code>\uff1a\u652f\u6301<code>ORDER BY</code>\u3001<code>LIMIT</code>\u5b50\u53e5\u3002</li> </ul> <p>\u5386\u53f2\u7248\u672c\u517c\u5bb9\u6027</p> <ul> <li>\u4ece 3.5.0 \u7248\u672c\u5f00\u59cb\uff0c<code>MATCH</code>\u8bed\u53e5\u652f\u6301\u5168\u8868\u626b\u63cf\uff0c\u5373\u5728\u4e0d\u4f7f\u7528\u4efb\u4f55\u7d22\u5f15\u6216\u8005\u8fc7\u6ee4\u6761\u4ef6\u7684\u60c5\u51b5\u4e0b\u53ef\u904d\u5386\u56fe\u4e2d\u70b9\u6216\u8fb9\u3002\u5728\u6b64\u4e4b\u524d\u7684\u7248\u672c\u4e2d\uff0cMATCH \u8bed\u53e5\u5728\u67d0\u4e9b\u60c5\u51b5\u4e0b\u9700\u8981\u7d22\u5f15\u624d\u80fd\u6267\u884c\u67e5\u8be2\u6216\u8005\u9700\u8981\u4f7f\u7528<code>LIMIT</code>\u9650\u5236\u8f93\u51fa\u7ed3\u679c\u6570\u91cf\u3002</li> <li>\u4ece 3.0.0 \u7248\u672c\u5f00\u59cb\uff0c\u4e3a\u4e86\u533a\u522b\u4e0d\u540c Tag \u7684\u5c5e\u6027\uff0c\u8fd4\u56de\u5c5e\u6027\u65f6\u5fc5\u987b\u989d\u5916\u6307\u5b9a Tag \u540d\u79f0\u3002\u5373\u4ece<code>RETURN &lt;\u53d8\u91cf\u540d&gt;.&lt;\u5c5e\u6027\u540d&gt;</code>\u6539\u4e3a<code>RETURN &lt;\u53d8\u91cf\u540d&gt;.&lt;Tag\u540d&gt;.&lt;\u5c5e\u6027\u540d&gt;</code>\u3002</li> </ul>"},{"location":"3.ngql-guide/7.general-query-statements/2.match/#_2","title":"\u4f7f\u7528\u8bf4\u660e","text":"<ul> <li>\u5c3d\u91cf\u907f\u514d\u6267\u884c\u5168\u8868\u626b\u63cf\uff0c\u56e0\u4e3a\u8fd9\u53ef\u80fd\u5bfc\u81f4\u67e5\u8be2\u6027\u80fd\u4e0b\u964d\uff1b\u5e76\u4e14\u5982\u679c\u5728\u8fdb\u884c\u5168\u8868\u626b\u63cf\u65f6\u5185\u5b58\u4e0d\u8db3\uff0c\u53ef\u80fd\u4f1a\u5bfc\u81f4\u67e5\u8be2\u5931\u8d25\uff0c\u7cfb\u7edf\u4f1a\u63d0\u793a\u62a5\u9519\u3002\u5efa\u8bae\u4f7f\u7528\u5177\u6709\u8fc7\u6ee4\u6761\u4ef6\u6216\u6307\u5b9a Tag\u3001\u8fb9\u7c7b\u578b\u7684\u67e5\u8be2\uff0c\u4f8b\u5982<code>MATCH (v:player) RETURN v.player.name AS Name</code>\u8bed\u53e5\u4e2d\u7684<code>v:player</code>\u548c<code>v.player.name</code>\u3002</li> </ul> <ul> <li>\u53ef\u4e3a Tag\u3001Edge type \u6216 Tag\u3001Edge type \u7684\u67d0\u4e2a\u5c5e\u6027\u521b\u5efa\u7d22\u5f15\uff0c\u4ee5\u63d0\u9ad8\u67e5\u8be2\u6027\u80fd\u3002\u4f8b\u5982\uff0c\u7528\u6237\u53ef\u4ee5\u4e3a<code>player</code> Tag \u521b\u5efa\u7d22\u5f15\uff0c\u6216\u8005\u4e3a<code>player</code> Tag \u7684<code>name</code>\u5c5e\u6027\u521b\u5efa\u7d22\u5f15\u3002\u6709\u5173\u7d22\u5f15\u7684\u4f7f\u7528\u53ca\u6ce8\u610f\u4e8b\u9879\uff0c\u8bf7\u53c2\u89c1\u4f7f\u7528\u7d22\u5f15\u5fc5\u8bfb\u3002</li> </ul> <ul> <li>\u76ee\u524d MATCH \u8bed\u53e5\u65e0\u6cd5\u67e5\u8be2\u5230\u60ac\u6302\u8fb9\u3002</li> </ul>"},{"location":"3.ngql-guide/7.general-query-statements/2.match/#_3","title":"\u4f7f\u7528\u6a21\u5f0f","text":""},{"location":"3.ngql-guide/7.general-query-statements/2.match/#_4","title":"\u5339\u914d\u70b9","text":"<p>\u7528\u6237\u53ef\u4ee5\u5728\u4e00\u5bf9\u62ec\u53f7\u4e2d\u4f7f\u7528\u81ea\u5b9a\u4e49\u53d8\u91cf\u6765\u8868\u793a\u6a21\u5f0f\u4e2d\u7684\u70b9\u3002\u4f8b\u5982<code>(v)</code>\u3002</p> <pre><code># \u5339\u914d\u5168\u56fe\u7a7a\u95f4\u4e2d\u7684\u4efb\u610f 3 \u4e2a\u70b9\nnebula&gt; MATCH (v) \\\n        RETURN v \\\n        LIMIT 3;\n+-----------------------------------------------------------+\n| v                                                         |\n+-----------------------------------------------------------+\n| (\"player102\" :player{age: 33, name: \"LaMarcus Aldridge\"}) |\n| (\"player106\" :player{age: 25, name: \"Kyle Anderson\"})     |\n| (\"player115\" :player{age: 40, name: \"Kobe Bryant\"})       |\n+-----------------------------------------------------------+\n</code></pre>"},{"location":"3.ngql-guide/7.general-query-statements/2.match/#tag","title":"\u5339\u914d Tag","text":"<p>\u5386\u53f2\u7248\u672c\u517c\u5bb9\u6027</p> <p>\u5728 NebulaGraph 3.0.0 \u4e4b\u524d\uff0c\u5339\u914d Tag \u7684\u524d\u63d0\u662f Tag \u672c\u8eab\u6709\u7d22\u5f15\u6216\u8005 Tag \u7684\u67d0\u4e2a\u5c5e\u6027\u6709\u7d22\u5f15\uff0c\u5426\u5219\uff0c\u7528\u6237\u65e0\u6cd5\u57fa\u4e8e\u8be5 Tag \u6267\u884c<code>MATCH</code>\u8bed\u53e5\u3002\u4ece NebulaGraph 3.0.0 \u5f00\u59cb\uff0c\u5339\u914d Tag \u53ef\u4ee5\u4e0d\u521b\u5efa\u7d22\u5f15\uff0c\u4f46\u9700\u8981\u4f7f\u7528<code>LIMIT</code>\u9650\u5236\u8f93\u51fa\u7ed3\u679c\u6570\u91cf\u3002\u4ece NebulaGraph 3.5.0 \u5f00\u59cb\uff0c<code>MATCH</code>\u8bed\u53e5\u652f\u6301\u5168\u8868\u626b\u63cf\uff0c\u65e0\u9700\u4e3a Tag \u6216 Tag \u7684\u67d0\u4e2a\u5c5e\u6027\u521b\u5efa\u7d22\u5f15\uff0c\u6216\u8005\u4f7f\u7528<code>LIMIT</code>\u9650\u5236\u8f93\u51fa\u7ed3\u679c\u6570\u91cf\uff0c\u5373\u53ef\u6267\u884c<code>MATCH</code>\u8bed\u53e5\u3002</p> <p>\u7528\u6237\u53ef\u4ee5\u5728\u70b9\u7684\u53f3\u4fa7\u7528<code>:&lt;tag_name&gt;</code>\u8868\u793a\u6a21\u5f0f\u4e2d\u7684 Tag\u3002</p> <pre><code># \u5339\u914d\u5168\u56fe\u7a7a\u95f4\u4e2d\u6240\u6709 Tag \u4e3a player \u7684\u70b9\nnebula&gt; MATCH (v:player) \\\n        RETURN v;\n+-----------------------------------------------------------+\n| v                                                         |\n+-----------------------------------------------------------+\n| (\"player102\" :player{age: 33, name: \"LaMarcus Aldridge\"}) |\n| (\"player106\" :player{age: 25, name: \"Kyle Anderson\"})     |\n| (\"player115\" :player{age: 40, name: \"Kobe Bryant\"})       |\n...\n</code></pre> <p>\u9700\u8981\u5339\u914d\u62e5\u6709\u591a\u4e2a Tag \u7684\u70b9\uff0c\u53ef\u4ee5\u7528\u82f1\u6587\u5192\u53f7\uff08:\uff09\u3002</p> <pre><code>nebula&gt; CREATE TAG actor (name string, age int);\nnebula&gt; INSERT VERTEX actor(name, age) VALUES \"player100\":(\"Tim Duncan\", 42);\nnebula&gt; MATCH (v:player:actor) \\\n        RETURN v;\n+----------------------------------------------------------------------------------------+\n| v                                                                                      |\n+----------------------------------------------------------------------------------------+\n| (\"player100\" :actor{age: 42, name: \"Tim Duncan\"} :player{age: 42, name: \"Tim Duncan\"}) |\n+----------------------------------------------------------------------------------------+\n</code></pre>"},{"location":"3.ngql-guide/7.general-query-statements/2.match/#_5","title":"\u5339\u914d\u70b9\u7684\u5c5e\u6027","text":"<p>\u7528\u6237\u53ef\u4ee5\u5728 Tag \u7684\u53f3\u4fa7\u7528<code>{&lt;prop_name&gt;: &lt;prop_value&gt;}</code>\u8868\u793a\u6a21\u5f0f\u4e2d\u70b9\u7684\u5c5e\u6027\u3002</p> <pre><code># \u4f7f\u7528\u5c5e\u6027 name \u641c\u7d22\u5339\u914d\u7684\u70b9\u3002\nnebula&gt; MATCH (v:player{name:\"Tim Duncan\"}) \\\n        RETURN v;\n+----------------------------------------------------+\n| v                                                  |\n+----------------------------------------------------+\n| (\"player100\" :player{age: 42, name: \"Tim Duncan\"}) |\n+----------------------------------------------------+\n</code></pre> <p>\u4f7f\u7528<code>WHERE</code>\u5b50\u53e5\u4e5f\u53ef\u4ee5\u5b9e\u73b0\u76f8\u540c\u7684\u64cd\u4f5c\uff1a</p> <pre><code># \u67e5\u627e\u7c7b\u578b\u4e3a player\uff0c\u540d\u5b57\u4e3a Tim Duncan \u7684\u70b9\u3002\nnebula&gt; MATCH (v:player) \\\n        WHERE v.player.name == \"Tim Duncan\" \\\n        RETURN v;\n+----------------------------------------------------+\n| v                                                  |\n+----------------------------------------------------+\n| (\"player100\" :player{age: 42, name: \"Tim Duncan\"}) |\n+----------------------------------------------------+\n</code></pre> <p>openCypher \u517c\u5bb9\u6027</p> <p>\u5728 openCypher 9 \u4e2d\uff0c<code>=</code>\u662f\u76f8\u7b49\u8fd0\u7b97\u7b26\uff0c\u5728 nGQL \u4e2d\uff0c<code>==</code>\u662f\u76f8\u7b49\u8fd0\u7b97\u7b26\uff0c<code>=</code>\u662f\u8d4b\u503c\u8fd0\u7b97\u7b26\u3002</p> <p>\u4f7f\u7528<code>WHERE</code>\u5b50\u53e5\u76f4\u63a5\u5339\u914d\u70b9\u7684\u5c5e\u6027\u3002</p> <pre><code>nebula&gt; MATCH (v) \\\n        WITH v, properties(v) as props, keys(properties(v)) as kk \\\n        WHERE [i in kk where props[i] == \"Tim Duncan\"] \\\n        RETURN v;\n+----------------------------------------------------+\n| v                                                  |\n+----------------------------------------------------+\n| (\"player100\" :player{age: 42, name: \"Tim Duncan\"}) |\n+----------------------------------------------------+\n\nnebula&gt; WITH ['Tim Duncan', 'Yao Ming'] AS names \\\n        MATCH (v1:player)--&gt;(v2:player) \\\n        WHERE v1.player.name in names \\\n        RETURN v1, v2;\n+----------------------------------------------------+----------------------------------------------------------+\n| v1                                                 | v2                                                       |\n+----------------------------------------------------+----------------------------------------------------------+\n| (\"player133\" :player{age: 38, name: \"Yao Ming\"})   | (\"player114\" :player{age: 39, name: \"Tracy McGrady\"})    |\n| (\"player133\" :player{age: 38, name: \"Yao Ming\"})   | (\"player144\" :player{age: 47, name: \"Shaquille O'Neal\"}) |\n| (\"player100\" :player{age: 42, name: \"Tim Duncan\"}) | (\"player101\" :player{age: 36, name: \"Tony Parker\"})      |\n| (\"player100\" :player{age: 42, name: \"Tim Duncan\"}) | (\"player125\" :player{age: 41, name: \"Manu Ginobili\"})    |\n+----------------------------------------------------+----------------------------------------------------------+\n</code></pre>"},{"location":"3.ngql-guide/7.general-query-statements/2.match/#id","title":"\u5339\u914d\u70b9 ID","text":"<p>\u7528\u6237\u53ef\u4ee5\u4f7f\u7528\u70b9 ID \u53bb\u5339\u914d\u70b9\u3002<code>id()</code>\u51fd\u6570\u53ef\u4ee5\u68c0\u7d22\u70b9\u7684 ID\u3002</p> <pre><code># \u67e5\u627e ID \u4e3a \u201cplayer101\u201d \u7684\u70b9\u3002\uff08\u6ce8\uff1aID \u5168\u5c40\u552f\u4e00\uff09\u3002\nnebula&gt; MATCH (v) \\\n        WHERE id(v) == 'player101' \\\n        RETURN v;\n+-----------------------------------------------------+\n| v                                                   |\n+-----------------------------------------------------+\n| (\"player101\" :player{age: 36, name: \"Tony Parker\"}) |\n+-----------------------------------------------------+\n</code></pre> <p>\u8981\u5339\u914d\u591a\u4e2a\u70b9\u7684 ID\uff0c\u53ef\u4ee5\u7528<code>WHERE id(v) IN [vid_list]</code>\u6216\u8005<code>WHERE id(v) IN {vid_list}</code>\u3002</p> <pre><code># \u67e5\u627e\u4e0e `Tim Duncan` \u76f4\u63a5\u76f8\u8fde\u7684\u70b9\uff0c\u5e76\u4e14\u8fd9\u4e9b\u70b9\u7684 ID \u5fc5\u987b\u662f `player101` \u6216 `player102`\u3002\nnebula&gt; MATCH (v:player { name: 'Tim Duncan' })--(v2) \\\n        WHERE id(v2) IN [\"player101\", \"player102\"] \\\n        RETURN v2;\n+-----------------------------------------------------------+\n| v2                                                        |\n+-----------------------------------------------------------+\n| (\"player101\" :player{age: 36, name: \"Tony Parker\"})       |\n| (\"player101\" :player{age: 36, name: \"Tony Parker\"})       |\n| (\"player102\" :player{age: 33, name: \"LaMarcus Aldridge\"}) |\n+-----------------------------------------------------------+\n\nnebula&gt; MATCH (v) WHERE id(v) IN {\"player100\", \"player101\"} \\\n        RETURN v.player.name AS name;\n+---------------+\n| name          |\n+---------------+\n| \"Tony Parker\" |\n| \"Tim Duncan\"  |\n+---------------+\n</code></pre>"},{"location":"3.ngql-guide/7.general-query-statements/2.match/#_6","title":"\u5339\u914d\u8fde\u63a5\u7684\u70b9","text":"<p>\u7528\u6237\u53ef\u4ee5\u4f7f\u7528<code>--</code>\u7b26\u53f7\u8868\u793a\u4e24\u4e2a\u65b9\u5411\u7684\u8fb9\uff0c\u5e76\u5339\u914d\u8fd9\u4e9b\u8fb9\u8fde\u63a5\u7684\u70b9\u3002</p> <p>\u5386\u53f2\u7248\u672c\u517c\u5bb9\u6027</p> <p>\u5728 nGQL 1.x \u4e2d\uff0c<code>--</code>\u7b26\u53f7\u7528\u4e8e\u884c\u5185\u6ce8\u91ca\uff0c\u4ece nGQL 2.x \u8d77\uff0c<code>--</code>\u7b26\u53f7\u8868\u793a\u51fa\u8fb9\u6216\u5165\u8fb9\uff0c\u4e0d\u518d\u7528\u4e8e\u6ce8\u91ca\u3002</p> <pre><code>nebula&gt; MATCH (v:player{name:\"Tim Duncan\"})--(v2:player) \\\n        RETURN v2.player.name AS Name;\n+---------------------+\n| Name                |\n+---------------------+\n| \"Manu Ginobili\"     |\n| \"Manu Ginobili\"     |\n| \"Dejounte Murray\"   |\n...\n</code></pre> <p>\u7528\u6237\u53ef\u4ee5\u5728<code>--</code>\u7b26\u53f7\u4e0a\u589e\u52a0<code>&lt;</code>\u6216<code>&gt;</code>\u7b26\u53f7\u6307\u5b9a\u8fb9\u7684\u65b9\u5411\u3002</p> <pre><code># `--&gt;` \u8868\u793a\u8fb9\u4ece v \u5f00\u59cb\uff0c\u6307\u5411 v2\u3002\u5bf9\u4e8e\u70b9 v \u6765\u8bf4\u662f\u51fa\u8fb9\uff0c\u5bf9\u4e8e\u70b9 v2 \u6765\u8bf4\u662f\u5165\u8fb9\u3002\nnebula&gt; MATCH (v:player{name:\"Tim Duncan\"})--&gt;(v2:player) \\\n        RETURN v2.player.name AS Name;\n+-----------------+\n| Name            |\n+-----------------+\n| \"Tony Parker\"   |\n| \"Manu Ginobili\" |\n+-----------------+\n</code></pre> <p>\u5982\u679c\u9700\u8981\u5224\u65ad\u76ee\u6807\u70b9\uff0c\u53ef\u4ee5\u4f7f\u7528<code>CASE</code>\u8868\u8fbe\u5f0f\u3002</p> <pre><code>nebula&gt; MATCH (v:player{name:\"Tim Duncan\"})--(v2) \\\n        RETURN \\\n        CASE WHEN v2.team.name IS NOT NULL \\\n        THEN v2.team.name  \\\n        WHEN v2.player.name IS NOT NULL \\\n        THEN v2.player.name END AS Name;\n\n+---------------------+\n| Name                |\n+---------------------+\n| \"Manu Ginobili\"     |\n| \"Manu Ginobili\"     |\n| \"Spurs\"             |\n| \"Dejounte Murray\"   |\n...\n</code></pre> <p>\u5982\u679c\u9700\u8981\u6269\u5c55\u6a21\u5f0f\uff0c\u53ef\u4ee5\u589e\u52a0\u66f4\u591a\u70b9\u548c\u8fb9\u3002</p> <pre><code>nebula&gt; MATCH (v:player{name:\"Tim Duncan\"})--&gt;(v2)&lt;--(v3) \\\n        RETURN v3.player.name AS Name;\n+---------------------+\n| Name                |\n+---------------------+\n| \"Dejounte Murray\"   |\n| \"LaMarcus Aldridge\" |\n| \"Marco Belinelli\"   |\n...\n</code></pre> <p>\u5982\u679c\u4e0d\u9700\u8981\u5f15\u7528\u70b9\uff0c\u53ef\u4ee5\u7701\u7565\u62ec\u53f7\u4e2d\u8868\u793a\u70b9\u7684\u53d8\u91cf\u3002</p> <pre><code>nebula&gt; MATCH (v:player{name:\"Tim Duncan\"})--&gt;()&lt;--(v3) \\\n        RETURN v3.player.name AS Name;\n+---------------------+\n| Name                |\n+---------------------+\n| \"Dejounte Murray\"   |\n| \"LaMarcus Aldridge\" |\n| \"Marco Belinelli\"   |\n...\n</code></pre>"},{"location":"3.ngql-guide/7.general-query-statements/2.match/#_7","title":"\u5339\u914d\u8def\u5f84","text":"<p>\u8fde\u63a5\u8d77\u6765\u7684\u70b9\u548c\u8fb9\u6784\u6210\u4e86\u8def\u5f84\u3002\u7528\u6237\u53ef\u4ee5\u4f7f\u7528\u81ea\u5b9a\u4e49\u53d8\u91cf\u547d\u540d\u8def\u5f84\u3002</p> <pre><code>nebula&gt; MATCH p=(v:player{name:\"Tim Duncan\"})--&gt;(v2) \\\n        RETURN p;\n+--------------------------------------------------------------------------------------------------------------------------------------+\n| p                                                                                                                                    |\n+--------------------------------------------------------------------------------------------------------------------------------------+\n| &lt;(\"player100\" :player{age: 42, name: \"Tim Duncan\"})-[:serve@0 {end_year: 2016, start_year: 1997}]-&gt;(\"team204\" :team{name: \"Spurs\"})&gt; |\n| &lt;(\"player100\" :player{age: 42, name: \"Tim Duncan\"})-[:follow@0 {degree: 95}]-&gt;(\"player101\" :player{age: 36, name: \"Tony Parker\"})&gt;   |\n| &lt;(\"player100\" :player{age: 42, name: \"Tim Duncan\"})-[:follow@0 {degree: 95}]-&gt;(\"player125\" :player{age: 41, name: \"Manu Ginobili\"})&gt; |\n+--------------------------------------------------------------------------------------------------------------------------------------+\n</code></pre> <p>openCypher \u517c\u5bb9\u6027</p> <p>\u5728 nGQL \u4e2d\uff0c<code>@</code>\u7b26\u53f7\u8868\u793a\u8fb9\u7684 rank\uff0c\u5728 openCypher \u4e2d\uff0c\u6ca1\u6709 rank \u6982\u5ff5\u3002</p>"},{"location":"3.ngql-guide/7.general-query-statements/2.match/#_8","title":"\u5339\u914d\u8fb9","text":"<pre><code>nebula&gt; MATCH ()&lt;-[e]-() \\\n        RETURN e \\\n        LIMIT 3;\n+----------------------------------------------------+\n| e                                                  |\n+----------------------------------------------------+\n| [:follow \"player101\"-&gt;\"player102\" @0 {degree: 90}] |\n| [:follow \"player103\"-&gt;\"player102\" @0 {degree: 70}] |\n| [:follow \"player135\"-&gt;\"player102\" @0 {degree: 80}] |\n+----------------------------------------------------+\n</code></pre>"},{"location":"3.ngql-guide/7.general-query-statements/2.match/#edge_type","title":"\u5339\u914d Edge type","text":"<p>\u548c\u70b9\u4e00\u6837\uff0c\u7528\u6237\u53ef\u4ee5\u7528<code>:&lt;edge_type&gt;</code>\u8868\u793a\u6a21\u5f0f\u4e2d\u7684 Edge type\uff0c\u4f8b\u5982<code>-[e:follow]-</code>\u3002</p> <p>\u5386\u53f2\u7248\u672c\u517c\u5bb9\u6027</p> <p>\u5728 NebulaGraph 3.0.0 \u4e4b\u524d\uff0c\u5339\u914d Edge Type \u7684\u524d\u63d0\u662f Edge Type \u672c\u8eab\u6709\u5bf9\u5e94\u5c5e\u6027\u7684\u7d22\u5f15\uff0c\u5426\u5219\uff0c\u7528\u6237\u65e0\u6cd5\u57fa\u4e8e Edge Type \u6267\u884c <code>MATCH</code> \u8bed\u53e5\u3002\u4ece NebulaGraph 3.0.0 \u5f00\u59cb\uff0c\u5339\u914d Edge Type \u53ef\u4ee5\u4e0d\u521b\u5efa\u7d22\u5f15\uff0c\u4f46\u9700\u8981\u4f7f\u7528 <code>LIMIT</code> \u9650\u5236\u8f93\u51fa\u7ed3\u679c\u6570\u91cf\uff0c\u5e76\u4e14\u5fc5\u987b\u6307\u5b9a\u8fb9\u7684\u65b9\u5411\u3002\u4ece NebulaGraph 3.5.0 \u5f00\u59cb\uff0c\u65e0\u9700\u4e3a Edge Type \u521b\u5efa\u7d22\u5f15\u6216\u8005\u4f7f\u7528<code>LIMIT</code>\u9650\u5236\u8f93\u51fa\u7ed3\u679c\u6570\u91cf\uff0c\u5373\u53ef\u4f7f\u7528<code>MATCH</code>\u8bed\u53e5\u5339\u914d\u8fb9\u3002</p> <pre><code>nebula&gt; MATCH ()-[e:follow]-&gt;() \\\n        RETURN e;\n+----------------------------------------------------+\n| e                                                  |\n+----------------------------------------------------+\n| [:follow \"player102\"-&gt;\"player100\" @0 {degree: 75}] |\n| [:follow \"player102\"-&gt;\"player101\" @0 {degree: 75}] |\n| [:follow \"player129\"-&gt;\"player116\" @0 {degree: 90}] |\n...\n</code></pre>"},{"location":"3.ngql-guide/7.general-query-statements/2.match/#_9","title":"\u5339\u914d\u8fb9\u7684\u5c5e\u6027","text":"<p>\u7528\u6237\u53ef\u4ee5\u7528<code>{&lt;prop_name&gt;: &lt;prop_value&gt;}</code>\u8868\u793a\u6a21\u5f0f\u4e2d Edge type \u7684\u5c5e\u6027\uff0c\u4f8b\u5982<code>[e:follow{likeness:95}]</code>\u3002</p> <pre><code>nebula&gt; MATCH (v:player{name:\"Tim Duncan\"})-[e:follow{degree:95}]-&gt;(v2) \\\n        RETURN e;\n+--------------------------------------------------------+\n| e                                                      |\n+--------------------------------------------------------+\n| [:follow \"player100\"-&gt;\"player101\" @0 {degree: 95}]     |\n| [:follow \"player100\"-&gt;\"player125\" @0 {degree: 95}]     |\n+--------------------------------------------------------+\n</code></pre> <p>\u4f7f\u7528<code>WHERE</code>\u5b50\u53e5\u76f4\u63a5\u5339\u914d\u8fb9\u7684\u5c5e\u6027\u3002</p> <pre><code>nebula&gt; MATCH ()-[e]-&gt;() \\\n        WITH e, properties(e) as props, keys(properties(e)) as kk \\\n        WHERE [i in kk where props[i] == 90] \\\n        RETURN e;\n+----------------------------------------------------+\n| e                                                  |\n+----------------------------------------------------+\n| [:follow \"player125\"-&gt;\"player100\" @0 {degree: 90}] |\n| [:follow \"player140\"-&gt;\"player114\" @0 {degree: 90}] |\n| [:follow \"player133\"-&gt;\"player144\" @0 {degree: 90}] |\n| [:follow \"player133\"-&gt;\"player114\" @0 {degree: 90}] |\n...\n+----------------------------------------------------+\n</code></pre>"},{"location":"3.ngql-guide/7.general-query-statements/2.match/#edge_type_1","title":"\u5339\u914d\u591a\u4e2a Edge type","text":"<p>\u4f7f\u7528<code>|</code>\u53ef\u4ee5\u5339\u914d\u591a\u4e2a Edge type\uff0c\u4f8b\u5982<code>[e:follow|:serve]</code>\u3002\u7b2c\u4e00\u4e2a Edge type \u524d\u7684\u82f1\u6587\u5192\u53f7\uff08:\uff09\u4e0d\u53ef\u7701\u7565\uff0c\u540e\u7eed Edge type \u524d\u7684\u82f1\u6587\u5192\u53f7\u53ef\u4ee5\u7701\u7565\uff0c\u4f8b\u5982<code>[e:follow|serve]</code>\u3002</p> <pre><code>nebula&gt; MATCH (v:player{name:\"Tim Duncan\"})-[e:follow|:serve]-&gt;(v2) \\\n        RETURN e;\n+---------------------------------------------------------------------------+\n| e                                                                         |\n+---------------------------------------------------------------------------+\n| [:follow \"player100\"-&gt;\"player101\" @0 {degree: 95}]                        |\n| [:follow \"player100\"-&gt;\"player125\" @0 {degree: 95}]                        |\n| [:serve \"player100\"-&gt;\"team204\" @0 {end_year: 2016, start_year: 1997}]     |\n+---------------------------------------------------------------------------+\n</code></pre>"},{"location":"3.ngql-guide/7.general-query-statements/2.match/#_10","title":"\u5339\u914d\u591a\u6761\u8fb9","text":"<p>\u7528\u6237\u53ef\u4ee5\u6269\u5c55\u6a21\u5f0f\uff0c\u5339\u914d\u8def\u5f84\u4e2d\u7684\u591a\u6761\u8fb9\u3002</p> <pre><code>nebula&gt; MATCH (v:player{name:\"Tim Duncan\"})-[]-&gt;(v2)&lt;-[e:serve]-(v3) \\\n        RETURN v2, v3;\n+----------------------------------+-----------------------------------------------------------+\n| v2                               | v3                                                        |\n+----------------------------------+-----------------------------------------------------------+\n| (\"team204\" :team{name: \"Spurs\"}) | (\"player104\" :player{age: 32, name: \"Marco Belinelli\"})   |\n| (\"team204\" :team{name: \"Spurs\"}) | (\"player101\" :player{age: 36, name: \"Tony Parker\"})       |\n| (\"team204\" :team{name: \"Spurs\"}) | (\"player102\" :player{age: 33, name: \"LaMarcus Aldridge\"}) |\n...\n</code></pre>"},{"location":"3.ngql-guide/7.general-query-statements/2.match/#_11","title":"\u5339\u914d\u5b9a\u957f\u8def\u5f84","text":"<p>\u7528\u6237\u53ef\u4ee5\u5728\u6a21\u5f0f\u4e2d\u4f7f\u7528<code>:&lt;edge_type&gt;*&lt;hop&gt;</code>\u5339\u914d\u5b9a\u957f\u8def\u5f84\u3002<code>hop</code>\u5fc5\u987b\u662f\u4e00\u4e2a\u975e\u8d1f\u6574\u6570\u3002</p> <pre><code>nebula&gt; MATCH p=(v:player{name:\"Tim Duncan\"})-[e:follow*2]-&gt;(v2) \\\n        RETURN DISTINCT v2 AS Friends;\n+-----------------------------------------------------------+\n| Friends                                                   |\n+-----------------------------------------------------------+\n| (\"player100\" :player{age: 42, name: \"Tim Duncan\"})        |\n| (\"player125\" :player{age: 41, name: \"Manu Ginobili\"})     |\n| (\"player102\" :player{age: 33, name: \"LaMarcus Aldridge\"}) |\n+-----------------------------------------------------------+\n</code></pre> <p>\u5982\u679c<code>hop</code>\u4e3a 0\uff0c\u6a21\u5f0f\u4f1a\u5339\u914d\u8def\u5f84\u4e0a\u7684\u8d77\u59cb\u70b9\u3002</p> <pre><code>nebula&gt; MATCH (v:player{name:\"Tim Duncan\"}) -[*0]-&gt; (v2) \\\n        RETURN v2;\n+----------------------------------------------------+\n| v2                                                 |\n+----------------------------------------------------+\n| (\"player100\" :player{age: 42, name: \"Tim Duncan\"}) |\n+----------------------------------------------------+\n</code></pre> <p>Note</p> <p>\u5728\u5bf9\u5339\u914d\u7684\u591a\u8df3\u8fb9\u8fdb\u884c\u8fc7\u6ee4\u65f6\uff0c\u5982\u5bf9<code>-[e:follow*2]-&gt;</code>\u4e2d\u7684<code>e</code>\u8fdb\u884c\u8fc7\u6ee4\uff0c\u6b64\u65f6\u7684<code>e</code>\u4e0d\u518d\u662f\u5355\u6761\u8fb9\u7684\u6570\u636e\u7c7b\u578b\uff0c\u800c\u662f\u4e00\u4e2a\u5305\u542b\u591a\u6761\u8fb9\u7684\u5217\u8868\uff0c\u4f8b\u5982\uff1a</p> <p>\u4ee5\u4e0b\u8bed\u53e5\u53ef\u4ee5\u8fd0\u884c\u4f46\u662f\u6ca1\u6709\u8fd4\u56de\u6570\u636e\uff0c\u56e0\u4e3a<code>e</code>\u662f\u4e00\u4e2a\u5217\u8868\uff0c\u6ca1\u6709<code>.degree</code>\u7684\u5c5e\u6027\u3002</p> <p><pre><code>nebula&gt; MATCH p=(v:player{name:\"Tim Duncan\"})-[e:follow*2]-&gt;(v2) \\\n        WHERE e.degree &gt; 1 \\\n        RETURN DISTINCT v2 AS Friends;\n</code></pre> \u8fd9\u662f\u6b63\u786e\u7684\u8868\u8fbe\uff1a <pre><code>nebula&gt; MATCH p=(v:player{name:\"Tim Duncan\"})-[e:follow*2]-&gt;(v2) \\\n        WHERE ALL(e_ in e WHERE e_.degree &gt; 0) \\\n        RETURN DISTINCT v2 AS Friends;\n</code></pre> \u8fdb\u4e00\u6b65\uff0c\u8fd9\u662f\u8868\u8fbe\u5bf9\u591a\u8df3\u8fb9\u7684\u7b2c\u4e00\u8df3\u7684\u8fb9\u5c5e\u6027\u8fc7\u6ee4\u7684\u8868\u8fbe\uff1a <pre><code>nebula&gt; MATCH p=(v:player{name:\"Tim Duncan\"})-[e:follow*2]-&gt;(v2) \\\n        WHERE e[0].degree &gt; 98 \\\n        RETURN DISTINCT v2 AS Friends;\n</code></pre></p>"},{"location":"3.ngql-guide/7.general-query-statements/2.match/#_12","title":"\u5339\u914d\u53d8\u957f\u8def\u5f84","text":"<p>\u7528\u6237\u53ef\u4ee5\u5728\u6a21\u5f0f\u4e2d\u4f7f\u7528<code>:&lt;edge_type&gt;*[minHop..maxHop]</code>\u5339\u914d\u53d8\u957f\u8def\u5f84\u3002</p> <p>Caution</p> <p>\u5982\u679c\u672a\u8bbe\u7f6e <code>maxHop</code> \u53ef\u80fd\u4f1a\u5bfc\u81f4 graph \u670d\u52a1 OOM\uff0c\u8bf7\u8c28\u614e\u6267\u884c\u8be5\u547d\u4ee4\u3002</p> \u53c2\u6570 \u8bf4\u660e <code>minHop</code> \u53ef\u9009\u9879\u3002\u8868\u793a\u8def\u5f84\u7684\u6700\u5c0f\u957f\u5ea6\u3002<code>minHop</code>\u5fc5\u987b\u662f\u4e00\u4e2a\u975e\u8d1f\u6574\u6570\uff0c\u9ed8\u8ba4\u503c\u4e3a 1\u3002 <code>maxHop</code> \u53ef\u9009\u9879\u3002\u8868\u793a\u8def\u5f84\u7684\u6700\u5927\u957f\u5ea6\u3002<code>maxHop</code>\u5fc5\u987b\u662f\u4e00\u4e2a\u975e\u8d1f\u6574\u6570\uff0c\u9ed8\u8ba4\u503c\u4e3a\u65e0\u7a77\u5927\u3002 <p>\u5982\u679c\u672a\u6307\u5b9a<code>minHop</code>\u548c<code>maxHop</code>\uff0c\u4ec5\u8bbe\u7f6e\u4e86<code>:&lt;edge_type&gt;*</code>\uff0c\u5219\u4e8c\u8005\u90fd\u5e94\u7528\u9ed8\u8ba4\u503c\uff0c\u5373<code>minHop</code>\u4e3a 1\uff0c<code>maxHop</code>\u4e3a\u65e0\u7a77\u5927\u3002</p> <pre><code>nebula&gt; MATCH p=(v:player{name:\"Tim Duncan\"})-[e:follow*]-&gt;(v2) \\\n        RETURN v2 AS Friends;\n+-----------------------------------------------------------+\n| Friends                                                   |\n+-----------------------------------------------------------+\n| (\"player125\" :player{age: 41, name: \"Manu Ginobili\"})     |\n| (\"player101\" :player{age: 36, name: \"Tony Parker\"})       |\n...\n\nnebula&gt; MATCH p=(v:player{name:\"Tim Duncan\"})-[e:follow*1..3]-&gt;(v2) \\\n        RETURN v2 AS Friends;\n+-----------------------------------------------------------+\n| Friends                                                   |\n+-----------------------------------------------------------+\n| (\"player101\" :player{age: 36, name: \"Tony Parker\"})       |\n| (\"player125\" :player{age: 41, name: \"Manu Ginobili\"})     |\n| (\"player100\" :player{age: 42, name: \"Tim Duncan\"})        |\n...\n\nnebula&gt; MATCH p=(v:player{name:\"Tim Duncan\"})-[e:follow*1..]-&gt;(v2) \\\n        RETURN v2 AS Friends;\n+-----------------------------------------------------------+\n| Friends                                                   |\n+-----------------------------------------------------------+\n| (\"player125\" :player{age: 41, name: \"Manu Ginobili\"})     |\n| (\"player101\" :player{age: 36, name: \"Tony Parker\"})       |\n| (\"player100\" :player{age: 42, name: \"Tim Duncan\"})        |\n...\n</code></pre> <p>\u7528\u6237\u53ef\u4ee5\u4f7f\u7528<code>DISTINCT</code>\u5173\u952e\u5b57\u805a\u5408\u91cd\u590d\u7ed3\u679c\u3002</p> <pre><code>nebula&gt; MATCH p=(v:player{name:\"Tim Duncan\"})-[e:follow*1..3]-&gt;(v2:player) \\\n        RETURN DISTINCT v2 AS Friends, count(v2);\n+-----------------------------------------------------------+-----------+\n| Friends                                                   | count(v2) |\n+-----------------------------------------------------------+-----------+\n| (\"player102\" :player{age: 33, name: \"LaMarcus Aldridge\"}) | 1         |\n| (\"player100\" :player{age: 42, name: \"Tim Duncan\"})        | 4         |\n| (\"player101\" :player{age: 36, name: \"Tony Parker\"})       | 3         |\n| (\"player125\" :player{age: 41, name: \"Manu Ginobili\"})     | 3         |\n+-----------------------------------------------------------+-----------+\n</code></pre> <p>\u5982\u679c<code>minHop</code>\u4e3a<code>0</code>\uff0c\u6a21\u5f0f\u4f1a\u5339\u914d\u8def\u5f84\u4e0a\u7684\u8d77\u59cb\u70b9\u3002\u4f8b\u5982\uff0c\u4e0e\u4e0a\u4e2a\u793a\u4f8b\u76f8\u6bd4\uff0c\u4e0b\u9762\u7684\u793a\u4f8b\u8bbe\u7f6e<code>minHop</code>\u4e3a<code>0</code>\u3002\u6b64\u65f6\uff0c\u56e0\u4e3a\u8868\u793a<code>\"Tim Duncan\"</code>\u7684\u70b9\u662f\u8def\u5f84\u7684\u8d77\u59cb\u70b9\uff0c\u6240\u4ee5\u5b83\u5728\u7ed3\u679c\u96c6\u4e2d\u7684\u8ba1\u6570\u4e3a 5\uff0c\u6bd4\u5728\u4e0a\u4e2a\u793a\u4f8b\u7684\u7ed3\u679c\u4e2d\u591a\u8ba1\u4e00\u6b21\u3002</p> <pre><code>nebula&gt; MATCH p=(v:player{name:\"Tim Duncan\"})-[e:follow*0..3]-&gt;(v2:player) \\\n        RETURN DISTINCT v2 AS Friends, count(v2);\n+-----------------------------------------------------------+-----------+\n| Friends                                                   | count(v2) |\n+-----------------------------------------------------------+-----------+\n| (\"player102\" :player{age: 33, name: \"LaMarcus Aldridge\"}) | 1         |\n| (\"player100\" :player{age: 42, name: \"Tim Duncan\"})        | 5         |\n| (\"player125\" :player{age: 41, name: \"Manu Ginobili\"})     | 3         |\n| (\"player101\" :player{age: 36, name: \"Tony Parker\"})       | 3         |\n+-----------------------------------------------------------+-----------+\n</code></pre> <p>Note</p> <p>\u5f53\u5728\u6a21\u5f0f\u4e2d\u4f7f\u7528\u53d8\u91cf<code>e</code>\u5339\u914d\u5b9a\u957f\u6216\u8005\u53d8\u957f\u8def\u5f84\u65f6\uff0c\u4f8b\u5982<code>-[e:follow*0..3]-&gt;</code>\uff0c\u4e0d\u652f\u6301\u5728\u5176\u4ed6\u6a21\u5f0f\u4e2d\u5f15\u7528<code>e</code>\u3002\u4f8b\u5982\uff0c\u4e0d\u652f\u6301\u4ee5\u4e0b\u8bed\u53e5\uff1a</p> <pre><code>nebula&gt; MATCH (v:player)-[e:like*1..3]-&gt;(n) \\\n        WHERE (n)-[e*1..4]-&gt;(:player) \\\n        RETURN v;\n</code></pre>"},{"location":"3.ngql-guide/7.general-query-statements/2.match/#edge_type_2","title":"\u5339\u914d\u591a\u4e2a Edge type \u7684\u53d8\u957f\u8def\u5f84","text":"<p>\u7528\u6237\u53ef\u4ee5\u5728\u53d8\u957f\u6216\u5b9a\u957f\u6a21\u5f0f\u4e2d\u6307\u5b9a\u591a\u4e2a Edge type\u3002<code>hop</code>\u3001<code>minHop</code>\u548c<code>maxHop</code>\u5bf9\u6240\u6709 Edge type \u90fd\u751f\u6548\u3002</p> <pre><code>nebula&gt; MATCH p=(v:player{name:\"Tim Duncan\"})-[e:follow|serve*2]-&gt;(v2) \\\n        RETURN DISTINCT v2;\n+-----------------------------------------------------------+\n| v2                                                        |\n+-----------------------------------------------------------+\n| (\"team204\" :team{name: \"Spurs\"})                          |\n| (\"player100\" :player{age: 42, name: \"Tim Duncan\"})        |\n| (\"team215\" :team{name: \"Hornets\"})                        |\n| (\"player125\" :player{age: 41, name: \"Manu Ginobili\"})     |\n| (\"player102\" :player{age: 33, name: \"LaMarcus Aldridge\"}) |\n+-----------------------------------------------------------+\n</code></pre>"},{"location":"3.ngql-guide/7.general-query-statements/2.match/#_13","title":"\u5339\u914d\u591a\u4e2a\u6a21\u5f0f","text":"<p>\u7528\u6237\u53ef\u4ee5\u7528\u82f1\u6587\u9017\u53f7\uff08,\uff09\u5206\u9694\u591a\u4e2a\u6a21\u5f0f\u3002</p> <pre><code>nebula&gt; CREATE TAG INDEX IF NOT EXISTS team_index ON team(name(20));\nnebula&gt; REBUILD TAG INDEX team_index;\nnebula&gt; MATCH (v1:player{name:\"Tim Duncan\"}), (v2:team{name:\"Spurs\"}) \\\n        RETURN v1,v2;\n+----------------------------------------------------+----------------------------------+\n| v1                                                 | v2                               |\n+----------------------------------------------------+----------------------------------+\n| (\"player100\" :player{age: 42, name: \"Tim Duncan\"}) | (\"team204\" :team{name: \"Spurs\"}) |\n+----------------------------------------------------+----------------------------------+\n</code></pre>"},{"location":"3.ngql-guide/7.general-query-statements/2.match/#_14","title":"\u5339\u914d\u6700\u77ed\u8def\u5f84","text":"<p>\u7528\u6237\u53ef\u4ee5\u4f7f\u7528<code>allShortestPaths</code>\u8fd4\u56de\u8d77\u59cb\u70b9\u5230\u76ee\u6807\u70b9\u7684\u6240\u6709\u6700\u77ed\u8def\u5f84\u3002</p> <pre><code>nebula&gt; MATCH p = allShortestPaths((a:player{name:\"Tim Duncan\"})-[e*..5]-(b:player{name:\"Tony Parker\"})) \\\n        RETURN p;\n+------------------------------------------------------------------------------------------------------------------------------------+\n| p                                                                                                                                  |\n+------------------------------------------------------------------------------------------------------------------------------------+\n| &lt;(\"player100\" :player{age: 42, name: \"Tim Duncan\"})&lt;-[:follow@0 {degree: 95}]-(\"player101\" :player{age: 36, name: \"Tony Parker\"})&gt; |\n| &lt;(\"player100\" :player{age: 42, name: \"Tim Duncan\"})-[:follow@0 {degree: 95}]-&gt;(\"player101\" :player{age: 36, name: \"Tony Parker\"})&gt; |\n+------------------------------------------------------------------------------------------------------------------------------------+\n</code></pre> <p>\u7528\u6237\u53ef\u4ee5\u4f7f\u7528<code>shortestPath</code>\u8fd4\u56de\u8d77\u59cb\u70b9\u5230\u76ee\u6807\u70b9\u7684\u4efb\u610f\u4e00\u6761\u6700\u77ed\u8def\u5f84\u3002</p> <pre><code>nebula&gt; MATCH p = shortestPath((a:player{name:\"Tim Duncan\"})-[e*..5]-(b:player{name:\"Tony Parker\"})) \\\n        RETURN p;\n+------------------------------------------------------------------------------------------------------------------------------------+\n| p                                                                                                                                  |\n+------------------------------------------------------------------------------------------------------------------------------------+\n| &lt;(\"player100\" :player{age: 42, name: \"Tim Duncan\"})&lt;-[:follow@0 {degree: 95}]-(\"player101\" :player{age: 36, name: \"Tony Parker\"})&gt; |\n+------------------------------------------------------------------------------------------------------------------------------------+\n</code></pre>"},{"location":"3.ngql-guide/7.general-query-statements/2.match/#match_1","title":"\u591aMATCH\u68c0\u7d22","text":"<p>\u4e0d\u540c\u7684\u6a21\u5f0f\u6709\u4e0d\u540c\u7684\u7b5b\u9009\u6761\u4ef6\u65f6\uff0c\u53ef\u4ee5\u4f7f\u7528\u591a<code>MATCH</code>\uff0c\u4f1a\u8fd4\u56de\u6a21\u5f0f\u5b8c\u5168\u5339\u914d\u7684\u884c\u3002</p> <pre><code>nebula&gt; MATCH (m)-[]-&gt;(n) WHERE id(m)==\"player100\" \\\n        MATCH (n)-[]-&gt;(l) WHERE id(n)==\"player125\" \\\n        RETURN id(m),id(n),id(l);\n+-------------+-------------+-------------+\n| id(m)       | id(n)       | id(l)       |\n+-------------+-------------+-------------+\n| \"player100\" | \"player125\" | \"team204\"   |\n| \"player100\" | \"player125\" | \"player100\" |\n+-------------+-------------+-------------+\n</code></pre>"},{"location":"3.ngql-guide/7.general-query-statements/2.match/#optional_match","title":"OPTIONAL MATCH\u68c0\u7d22","text":"<p>\u53c2\u89c1OPTIONAL MATCH\u3002</p> <p>Caution</p> <p>NebulaGraph master \u4e2d<code>MATCH</code>\u8bed\u53e5\u7684\u6027\u80fd\u548c\u8d44\u6e90\u5360\u7528\u5f97\u5230\u4e86\u4f18\u5316.\u4f46\u5bf9\u6027\u80fd\u8981\u6c42\u8f83\u9ad8\u65f6\uff0c\u4ecd\u5efa\u8bae\u4f7f\u7528 <code>GO</code>, <code>LOOKUP</code>, <code>|</code> \u548c <code>FETCH</code> \u7b49\u6765\u66ff\u4ee3<code>MATCH</code>\u3002</p>"},{"location":"3.ngql-guide/7.general-query-statements/3.go/","title":"GO","text":"<p><code>GO</code>\u8bed\u53e5\u662f NebulaGraph \u56fe\u6570\u636e\u5e93\u4e2d\u7528\u4e8e\u4ece\u7ed9\u5b9a\u8d77\u59cb\u70b9\u5f00\u59cb\u904d\u5386\u56fe\u7684\u8bed\u53e5\u3002<code>GO</code>\u8bed\u53e5\u91c7\u7528\u7684\u8def\u5f84\u7c7b\u578b\u662f<code>walk</code>\uff0c\u5373\u904d\u5386\u65f6\u70b9\u548c\u8fb9\u90fd\u53ef\u4ee5\u91cd\u590d\u3002</p>"},{"location":"3.ngql-guide/7.general-query-statements/3.go/#opencypher","title":"openCypher \u517c\u5bb9\u6027","text":"<p>\u672c\u6587\u64cd\u4f5c\u4ec5\u9002\u7528\u4e8e\u539f\u751f nGQL\u3002</p>"},{"location":"3.ngql-guide/7.general-query-statements/3.go/#_1","title":"\u8bed\u6cd5","text":"<pre><code>GO [[&lt;M&gt; TO] &lt;N&gt; {STEP|STEPS} ] FROM &lt;vertex_list&gt;\nOVER &lt;edge_type_list&gt; [{REVERSELY | BIDIRECT}]\n[ WHERE &lt;conditions&gt;\u00a0]\nYIELD\u00a0[DISTINCT] &lt;return_list&gt;\n[{ SAMPLE &lt;sample_list&gt; | &lt;limit_by_list_clause&gt; }]\n[| GROUP BY {&lt;col_name&gt; | expression&gt; | &lt;position&gt;} YIELD &lt;col_name&gt;]\n[| ORDER BY &lt;expression&gt; [{ASC | DESC}]]\n[| LIMIT [&lt;offset&gt;,] &lt;number_rows&gt;];\n\n&lt;vertex_list&gt; ::=\n    &lt;vid&gt; [, &lt;vid&gt; ...]\n\n&lt;edge_type_list&gt; ::=\n   &lt;edge_type&gt; [, &lt;edge_type&gt; ...]\n   | *\n\n&lt;return_list&gt; ::=\n    &lt;col_name&gt; [AS &lt;col_alias&gt;] [, &lt;col_name&gt; [AS &lt;col_alias&gt;] ...]\n</code></pre> <ul> <li><code>&lt;N&gt; {STEP|STEPS}</code>\uff1a\u6307\u5b9a\u8df3\u6570\u3002\u5982\u679c\u6ca1\u6709\u6307\u5b9a\u8df3\u6570\uff0c\u9ed8\u8ba4\u503c<code>N</code>\u4e3a<code>1</code>\u3002\u5982\u679c<code>N</code>\u4e3a<code>0</code>\uff0cNebulaGraph \u4e0d\u4f1a\u68c0\u7d22\u4efb\u4f55\u8fb9\u3002</li> </ul> <ul> <li><code>M TO N {STEP|STEPS}</code>\uff1a\u904d\u5386<code>M~N</code>\u8df3\u7684\u8fb9\u3002\u5982\u679c<code>M</code>\u4e3a<code>0</code>\uff0c\u8f93\u51fa\u7ed3\u679c\u548c<code>M</code>\u4e3a<code>1</code>\u76f8\u540c\uff0c\u5373<code>GO 0 TO 2</code>\u548c<code>GO 1 TO 2</code>\u662f\u76f8\u540c\u7684\u3002</li> </ul> <ul> <li><code>&lt;vertex_list&gt;</code>\uff1a\u7528\u9017\u53f7\u5206\u9694\u7684\u70b9 ID \u5217\u8868\u3002</li> </ul> <ul> <li><code>&lt;edge_type_list&gt;</code>\uff1a\u904d\u5386\u7684 Edge type \u5217\u8868\u3002</li> </ul> <ul> <li><code>REVERSELY | BIDIRECT</code>\uff1a\u9ed8\u8ba4\u60c5\u51b5\u4e0b\u68c0\u7d22\u7684\u662f<code>&lt;vertex_list&gt;</code>\u7684\u51fa\u8fb9\uff08\u6b63\u5411\uff09\uff0c<code>REVERSELY</code>\u8868\u793a\u53cd\u5411\uff0c\u5373\u68c0\u7d22\u5165\u8fb9\uff1b<code>BIDIRECT</code> \u4e3a\u53cc\u5411\uff0c\u5373\u68c0\u7d22\u6b63\u5411\u548c\u53cd\u5411\u3002\u53ef\u901a\u8fc7<code>YIELD</code>\u8fd4\u56de<code>&lt;edge_type&gt;._type</code>\u5b57\u6bb5\u5224\u65ad\u65b9\u5411\uff0c\u5176\u6b63\u6570\u4e3a\u6b63\u5411\uff0c\u8d1f\u6570\u4e3a\u53cd\u5411\u3002</li> </ul> <ul> <li> <p><code>WHERE &lt;conditions&gt;</code>\uff1a\u6307\u5b9a\u904d\u5386\u7684\u8fc7\u6ee4\u6761\u4ef6\u3002\u7528\u6237\u53ef\u4ee5\u5728\u8d77\u59cb\u70b9\u3001\u76ee\u7684\u70b9\u548c\u8fb9\u4f7f\u7528<code>WHERE</code>\u5b50\u53e5\uff0c\u8fd8\u53ef\u4ee5\u7ed3\u5408<code>AND</code>\u3001<code>OR</code>\u3001<code>NOT</code>\u3001<code>XOR</code>\u4e00\u8d77\u4f7f\u7528\u3002\u8be6\u60c5\u53c2\u89c1 WHERE\u3002</p> <p>Note</p> <ul> <li>\u904d\u5386\u591a\u4e2a Edge type \u65f6\uff0c<code>WHERE</code>\u5b50\u53e5\u6709\u4e00\u4e9b\u9650\u5236\u3002\u4f8b\u5982\u4e0d\u652f\u6301<code>WHERE edge1.prop1 &gt; edge2.prop2</code>\u3002</li> <li>GO \u8bed\u53e5\u6267\u884c\u65f6\u5148\u904d\u5386\u6240\u6709\u7684\u70b9\uff0c\u7136\u540e\u518d\u6839\u636e\u8fc7\u6ee4\u5668\u6761\u4ef6\u8fdb\u884c\u8fc7\u6ee4\u3002</li> </ul> </li> </ul> <ul> <li><code>YIELD [DISTINCT] &lt;return_list&gt;</code>\uff1a\u5b9a\u4e49\u9700\u8981\u8fd4\u56de\u7684\u8f93\u51fa\u3002<code>&lt;return_list&gt;</code>\u5efa\u8bae\u4f7f\u7528 Schema \u76f8\u5173\u51fd\u6570\u6307\u5b9a\u8fd4\u56de\u4fe1\u606f\uff0c\u5f53\u524d\u652f\u6301<code>src(edge)</code>\u3001<code>dst(edge)</code>\u3001<code>type(edge)</code>\u7b49\uff0c\u6682\u4e0d\u652f\u6301\u5d4c\u5957\u51fd\u6570\u3002\u8be6\u60c5\u53c2\u89c1 YIELD\u3002</li> </ul> <ul> <li><code>SAMPLE &lt;sample_list&gt;</code>\uff1a\u7528\u4e8e\u5728\u7ed3\u679c\u96c6\u4e2d\u53d6\u6837\u3002\u8be6\u60c5\u53c2\u89c1 SAMPLE\u3002</li> </ul> <ul> <li><code>&lt;limit_by_list_clause&gt;</code>\uff1a\u7528\u4e8e\u5728\u904d\u5386\u8fc7\u7a0b\u4e2d\u9010\u6b65\u9650\u5236\u8f93\u51fa\u6570\u91cf\u3002\u8be6\u60c5\u53c2\u89c1 LIMIT\u3002</li> </ul> <ul> <li><code>GROUP BY</code>\uff1a\u6839\u636e\u6307\u5b9a\u5c5e\u6027\u7684\u503c\u5c06\u8f93\u51fa\u5206\u7ec4\u3002\u8be6\u60c5\u53c2\u89c1 GROUP BY\u3002\u5206\u7ec4\u540e\u9700\u8981\u518d\u6b21\u4f7f\u7528<code>YIELD</code>\u5b9a\u4e49\u9700\u8981\u8fd4\u56de\u7684\u8f93\u51fa\u3002</li> </ul> <ul> <li> <p><code>ORDER BY</code>\uff1a\u6307\u5b9a\u8f93\u51fa\u7ed3\u679c\u7684\u6392\u5e8f\u89c4\u5219\u3002\u8be6\u60c5\u53c2\u89c1 ORDER BY\u3002</p> <p>Note</p> <p>\u6ca1\u6709\u6307\u5b9a\u6392\u5e8f\u89c4\u5219\u65f6\uff0c\u8f93\u51fa\u7ed3\u679c\u7684\u987a\u5e8f\u4e0d\u662f\u56fa\u5b9a\u7684\u3002</p> </li> </ul> <ul> <li><code>LIMIT  [&lt;offset&gt;,] &lt;number_rows&gt;]</code>\uff1a\u9650\u5236\u8f93\u51fa\u7ed3\u679c\u7684\u884c\u6570\u3002\u8be6\u60c5\u53c2\u89c1 LIMIT\u3002</li> </ul>"},{"location":"3.ngql-guide/7.general-query-statements/3.go/#_2","title":"\u4f7f\u7528\u8bf4\u660e","text":"<ul> <li>GO \u8bed\u53e5\u4e2d\u7684<code>WHERE</code>\u548c<code>YIELD</code>\u5b50\u53e5\u901a\u5e38\u7ed3\u5408\u5c5e\u6027\u5f15\u7528\u7b26(<code>$^</code>\u548c<code>$$</code>)\u6216\u51fd\u6570<code>properties($^)</code>\u548c<code>properties($$)</code>\u6307\u5b9a\u70b9\u7684\u5c5e\u6027\uff1b\u4f7f\u7528\u51fd\u6570<code>properties(edge)</code>\u6307\u5b9a\u8fb9\u7684\u5c5e\u6027\u3002\u7528\u6cd5\u53c2\u89c1\u5c5e\u6027\u5f15\u7528\u7b26\u548c Schema \u76f8\u5173\u51fd\u6570\u3002</li> <li>GO \u590d\u5408\u8bed\u53e5\u4e2d\u5982\u9700\u5f15\u7528\u5b50\u67e5\u8be2\u7684\u7ed3\u679c\uff0c\u9700\u8981\u4e3a\u8be5\u7ed3\u679c\u8bbe\u7f6e\u522b\u540d\uff0c\u5e76\u4f7f\u7528\u7ba1\u9053\u7b26<code>|</code>\u4f20\u9012\u7ed9\u4e0b\u4e00\u4e2a\u5b50\u67e5\u8be2\uff0c\u540c\u65f6\u5728\u4e0b\u4e00\u4e2a\u5b50\u67e5\u8be2\u4e2d\u4f7f\u7528<code>$-</code>\u5f15\u7528\u8be5\u7ed3\u679c\u7684\u522b\u540d\u3002\u8be6\u60c5\u53c2\u89c1\u7ba1\u9053\u7b26\u3002</li> <li>\u5f53\u67e5\u8be2\u5c5e\u6027\u6ca1\u6709\u503c\u65f6\uff0c\u8fd4\u56de\u7ed3\u679c\u663e\u793a<code>NULL</code>\u3002</li> </ul>"},{"location":"3.ngql-guide/7.general-query-statements/3.go/#_3","title":"\u573a\u666f\u53ca\u793a\u4f8b","text":""},{"location":"3.ngql-guide/7.general-query-statements/3.go/#_4","title":"\u67e5\u8be2\u8d77\u59cb\u70b9\u7684\u76f4\u63a5\u90bb\u5c45\u70b9","text":"<p>\u573a\u666f\uff1a\u67e5\u8be2\u67d0\u4e2a\u70b9\u7684\u76f4\u63a5\u76f8\u90bb\u70b9\uff0c\u4f8b\u5982\u67e5\u8be2\u4e00\u4e2a\u4eba\u6240\u5c5e\u961f\u4f0d\u3002</p> <pre><code># \u8fd4\u56de player102 \u6240\u5c5e\u961f\u4f0d\u3002\nnebula&gt;\u00a0GO FROM \"player102\" OVER serve YIELD dst(edge);\n+-----------+\n| dst(EDGE) |\n+-----------+\n| \"team203\" |\n| \"team204\" |\n+-----------+\n</code></pre>"},{"location":"3.ngql-guide/7.general-query-statements/3.go/#_5","title":"\u67e5\u8be2\u6307\u5b9a\u8df3\u6570\u5185\u7684\u70b9","text":"<p>\u573a\u666f\uff1a\u67e5\u8be2\u4e00\u4e2a\u70b9\u5728\u6307\u5b9a\u8df3\u6570\u5185\u7684\u6240\u6709\u70b9\uff0c\u4f8b\u5982\u67e5\u8be2\u4e00\u4e2a\u4eba\u4e24\u8df3\u5185\u7684\u670b\u53cb\u3002</p> <pre><code># \u8fd4\u56de\u8ddd\u79bb player102 \u4e24\u8df3\u7684\u670b\u53cb\u3002\nnebula&gt; GO 2 STEPS FROM \"player102\" OVER follow YIELD dst(edge);\n+-------------+\n| dst(EDGE)   |\n+-------------+\n| \"player101\" |\n| \"player125\" |\n| \"player100\" |\n| \"player102\" |\n| \"player125\" |\n+-------------+\n</code></pre> <pre><code># \u67e5\u8be2 player100 1~2 \u8df3\u5185\u7684\u670b\u53cb\u3002\nnebula&gt; GO 1 TO 2 STEPS FROM \"player100\" OVER follow \\\n        YIELD dst(edge) AS destination;\n+-------------+\n| destination |\n+-------------+\n| \"player101\" |\n| \"player125\" |\n...\n\n# \u8be5 MATCH \u67e5\u8be2\u4e0e\u4e0a\u4e00\u4e2a GO \u67e5\u8be2\u5177\u6709\u76f8\u540c\u7684\u8bed\u4e49\u3002\nnebula&gt; MATCH (v) -[e:follow*1..2]-&gt;(v2) \\\n        WHERE id(v) == \"player100\" \\\n        RETURN id(v2) AS destination;\n+-------------+\n| destination |\n+-------------+\n| \"player100\" |\n| \"player102\" |\n...\n</code></pre>"},{"location":"3.ngql-guide/7.general-query-statements/3.go/#_6","title":"\u6dfb\u52a0\u8fc7\u6ee4\u6761\u4ef6","text":"<p>\u573a\u666f\uff1a\u67e5\u8be2\u6ee1\u8db3\u7279\u5b9a\u6761\u4ef6\u7684\u70b9\u548c\u8fb9\uff0c\u4f8b\u5982\u67e5\u8be2\u8d77\u59cb\u70b9\u548c\u76ee\u7684\u70b9\u4e4b\u95f4\u5177\u6709\u7279\u5b9a\u5c5e\u6027\u7684\u8fb9\u3002</p> <pre><code># \u4f7f\u7528 WHERE \u6dfb\u52a0\u8fc7\u6ee4\u6761\u4ef6\u3002\nnebula&gt;\u00a0GO FROM \"player100\", \"player102\" OVER serve \\\n        WHERE properties(edge).start_year &gt; 1995 \\\n        YIELD DISTINCT properties($$).name AS team_name, properties(edge).start_year AS start_year, properties($^).name AS player_name;\n\n+-----------------+------------+---------------------+\n| team_name       | start_year | player_name         |\n+-----------------+------------+---------------------+\n| \"Spurs\"         | 1997       | \"Tim Duncan\"        |\n| \"Trail Blazers\" | 2006       | \"LaMarcus Aldridge\" |\n| \"Spurs\"         | 2015       | \"LaMarcus Aldridge\" |\n+-----------------+------------+---------------------+\n</code></pre>"},{"location":"3.ngql-guide/7.general-query-statements/3.go/#_7","title":"\u67e5\u8be2\u6240\u6709\u8fb9","text":"<p>\u573a\u666f\uff1a\u67e5\u8be2\u8d77\u59cb\u70b9\u5173\u8054\u7684\u6240\u6709\u8fb9\u3002</p> <pre><code># \u8fd4\u56de player102 \u5173\u8054\u7684\u6240\u6709\u8fb9\u3002\nnebula&gt; GO FROM \"player102\" OVER * BIDIRECT YIELD edge AS e;\n+-----------------------------------------------------------------------+\n| e                                                                     |\n+-----------------------------------------------------------------------+\n| [:follow \"player101\"-&gt;\"player102\" @0 {degree: 90}]                    |\n| [:follow \"player103\"-&gt;\"player102\" @0 {degree: 70}]                    |\n| [:follow \"player135\"-&gt;\"player102\" @0 {degree: 80}]                    |\n| [:follow \"player102\"-&gt;\"player100\" @0 {degree: 75}]                    |\n| [:follow \"player102\"-&gt;\"player101\" @0 {degree: 75}]                    |\n| [:serve \"player102\"-&gt;\"team203\" @0 {end_year: 2015, start_year: 2006}] |\n| [:serve \"player102\"-&gt;\"team204\" @0 {end_year: 2019, start_year: 2015}] |\n+-----------------------------------------------------------------------+\n</code></pre>"},{"location":"3.ngql-guide/7.general-query-statements/3.go/#edge_type","title":"\u67e5\u8be2\u591a\u4e2a Edge type","text":"<p>\u573a\u666f\uff1a\u67e5\u8be2\u8d77\u59cb\u70b9\u5173\u8054\u7684\u591a\u4e2a\u8fb9\u7c7b\u578b\u53ef\u4ee5\u901a\u8fc7\u8bbe\u7f6e\u591a\u4e2aEdge Type\u5b9e\u73b0\uff0c\u4e5f\u53ef\u4ee5\u901a\u8fc7\u8bbe\u7f6e<code>*</code>\u5173\u8054\u6240\u6709\u7684\u8fb9\u7c7b\u578b\u3002</p> <pre><code># \u904d\u5386\u591a\u4e2a Edge type\u3002\nnebula&gt; GO FROM \"player100\" OVER follow, serve \\\n        YIELD properties(edge).degree, properties(edge).start_year;\n+-------------------------+-----------------------------+\n| properties(EDGE).degree | properties(EDGE).start_year |\n+-------------------------+-----------------------------+\n| 95                      | __NULL__                    |\n| 95                      | __NULL__                    |\n| __NULL__                | 1997                        |\n+-------------------------+-----------------------------+\n</code></pre>"},{"location":"3.ngql-guide/7.general-query-statements/3.go/#_8","title":"\u67e5\u8be2\u5165\u8fb9\u65b9\u5411\u7684\u70b9","text":"<pre><code># \u8fd4\u56de\u5173\u6ce8 player100 \u7684\u90bb\u5c45\u70b9\u3002\nnebula&gt; GO FROM \"player100\" OVER follow REVERSELY \\\n        YIELD src(edge) AS destination;\n+-------------+\n| destination |\n+-------------+\n| \"player101\" |\n| \"player102\" |\n...\n\n# \u8be5 MATCH \u67e5\u8be2\u4e0e\u4e0a\u4e00\u4e2a GO \u67e5\u8be2\u5177\u6709\u76f8\u540c\u7684\u8bed\u4e49\u3002\nnebula&gt; MATCH (v)&lt;-[e:follow]- (v2) WHERE id(v) == 'player100' \\\n        RETURN id(v2) AS destination;\n+-------------+\n| destination |\n+-------------+\n| \"player101\" |\n| \"player102\" |\n...\n</code></pre>"},{"location":"3.ngql-guide/7.general-query-statements/3.go/#_9","title":"\u5b50\u67e5\u8be2\u4f5c\u4e3a\u8d77\u59cb\u70b9","text":"<p>\u573a\u666f\uff1a\u4f7f\u7528\u5b50\u67e5\u8be2\u7684\u7ed3\u679c\u4f5c\u4e3a\u56fe\u904d\u5386\u7684\u8d77\u59cb\u70b9\u3002</p> <pre><code># \u67e5\u8be2 player100 \u7684\u670b\u53cb\u548c\u670b\u53cb\u6240\u5c5e\u961f\u4f0d\u3002\nnebula&gt; GO FROM \"player100\" OVER follow REVERSELY \\\n        YIELD src(edge) AS id | \\\n        GO FROM $-.id OVER serve \\\n        WHERE properties($^).age &gt; 20 \\\n        YIELD properties($^).name AS FriendOf, properties($$).name AS Team;\n+---------------------+-----------------+\n| FriendOf            | Team            |\n+---------------------+-----------------+\n| \"Boris Diaw\"        | \"Spurs\"         |\n| \"Boris Diaw\"        | \"Jazz\"          |\n| \"Boris Diaw\"        | \"Suns\"          |\n...\n\n# \u8be5 MATCH \u67e5\u8be2\u4e0e\u4e0a\u4e00\u4e2a GO \u67e5\u8be2\u5177\u6709\u76f8\u540c\u7684\u8bed\u4e49\u3002\nnebula&gt; MATCH (v)&lt;-[e:follow]- (v2)-[e2:serve]-&gt;(v3)  \\\n        WHERE id(v) == 'player100' \\\n        RETURN v2.player.name AS FriendOf, v3.team.name AS Team;\n+---------------------+-----------------+\n| FriendOf            | Team            |\n+---------------------+-----------------+\n| \"Boris Diaw\"        | \"Spurs\"         |\n| \"Boris Diaw\"        | \"Jazz\"          |\n| \"Boris Diaw\"        | \"Suns\"          |\n...\n</code></pre>"},{"location":"3.ngql-guide/7.general-query-statements/3.go/#group_by","title":"\u4f7f\u7528 GROUP BY \u5206\u7ec4","text":"<p>\u573a\u666f\uff1a\u4f7f\u7528<code>GROUP BY</code>\u5206\u7ec4\uff0c\u7136\u540e\u4f7f\u7528<code>YIELD</code>\u8fd4\u56de\u5206\u7ec4\u540e\u7684\u7ed3\u679c\u3002</p> <pre><code># \u6839\u636e\u5e74\u9f84\u5206\u7ec4\u3002\nnebula&gt; GO 2 STEPS FROM \"player100\" OVER follow \\\n        YIELD src(edge) AS src, dst(edge) AS dst, properties($$).age AS age \\\n        | GROUP BY $-.dst \\\n        YIELD $-.dst AS dst, collect_set($-.src) AS src, collect($-.age) AS age;\n+-------------+----------------------------+----------+\n| dst         | src                        | age      |\n+-------------+----------------------------+----------+\n| \"player125\" | {\"player101\"}              | [41]     |\n| \"player100\" | {\"player125\", \"player101\"} | [42, 42] |\n| \"player102\" | {\"player101\"}              | [33]     |\n+-------------+----------------------------+----------+\n</code></pre>"},{"location":"3.ngql-guide/7.general-query-statements/3.go/#order_by_limit","title":"\u4f7f\u7528 ORDER BY \u548c LIMIT \u6392\u5e8f\u548c\u9650\u5236\u8f93\u51fa\u7ed3\u679c","text":"<pre><code># \u5206\u7ec4\u5e76\u9650\u5236\u8f93\u51fa\u7ed3\u679c\u7684\u884c\u6570\u3002\nnebula&gt; $a = GO FROM \"player100\" OVER follow YIELD src(edge) AS src, dst(edge) AS dst; \\\n        GO 2 STEPS FROM $a.dst OVER follow \\\n        YIELD $a.src AS src, $a.dst, src(edge), dst(edge) \\\n        | ORDER BY $-.src | OFFSET 1 LIMIT 2;\n+-------------+-------------+-------------+-------------+\n| src         | $a.dst      | src(EDGE)   | dst(EDGE)   |\n+-------------+-------------+-------------+-------------+\n| \"player100\" | \"player101\" | \"player100\" | \"player101\" |\n| \"player100\" | \"player125\" | \"player100\" | \"player125\" |\n+-------------+-------------+-------------+-------------+\n</code></pre>"},{"location":"3.ngql-guide/7.general-query-statements/3.go/#_10","title":"\u5176\u4ed6\u7528\u6cd5","text":"<pre><code># \u5728\u591a\u4e2a\u8fb9\u4e0a\u901a\u8fc7 IS NOT EMPTY \u8fdb\u884c\u5224\u65ad\u3002\nnebula&gt; GO FROM \"player100\" OVER follow WHERE properties($$).name IS NOT EMPTY YIELD dst(edge);\n+-------------+\n| dst(EDGE)   |\n+-------------+\n| \"player125\" |\n| \"player101\" |\n+-------------+\n</code></pre>"},{"location":"3.ngql-guide/7.general-query-statements/4.fetch/","title":"FETCH","text":"<p><code>FETCH</code>\u53ef\u4ee5\u83b7\u53d6\u6307\u5b9a\u70b9\u6216\u8fb9\u7684\u5c5e\u6027\u503c\u3002</p>"},{"location":"3.ngql-guide/7.general-query-statements/4.fetch/#opencypher","title":"openCypher \u517c\u5bb9\u6027","text":"<p>\u672c\u6587\u64cd\u4f5c\u4ec5\u9002\u7528\u4e8e\u539f\u751f nGQL\u3002</p>"},{"location":"3.ngql-guide/7.general-query-statements/4.fetch/#_1","title":"\u83b7\u53d6\u70b9\u7684\u5c5e\u6027\u503c","text":""},{"location":"3.ngql-guide/7.general-query-statements/4.fetch/#_2","title":"\u8bed\u6cd5","text":"<pre><code>FETCH PROP ON {&lt;tag_name&gt;[, tag_name ...] | *}\n&lt;vid&gt; [, vid ...]\nYIELD [DISTINCT] &lt;return_list&gt; [AS &lt;alias&gt;];\n</code></pre> \u53c2\u6570 \u8bf4\u660e <code>tag_name</code> Tag \u540d\u79f0\u3002 <code>*</code> \u8868\u793a\u5f53\u524d\u56fe\u7a7a\u95f4\u4e2d\u7684\u6240\u6709 Tag\u3002 <code>vid</code> \u70b9 ID\u3002 <code>YIELD</code> \u5b9a\u4e49\u9700\u8981\u8fd4\u56de\u7684\u8f93\u51fa\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1 <code>YIELD</code>\u3002 <code>AS</code> \u8bbe\u7f6e\u522b\u540d\u3002"},{"location":"3.ngql-guide/7.general-query-statements/4.fetch/#tag","title":"\u57fa\u4e8e Tag \u83b7\u53d6\u70b9\u7684\u5c5e\u6027\u503c","text":"<p>\u5728<code>FETCH</code>\u8bed\u53e5\u4e2d\u6307\u5b9a Tag \u83b7\u53d6\u5bf9\u5e94\u70b9\u7684\u5c5e\u6027\u503c\u3002</p> <pre><code># \u83b7\u53d6 Tag \u4e3a player\uff0c\u4e14 ID \u4e3a player100 \u7684\u70b9\u6570\u636e\u7684\u5c5e\u6027\u503c\u3002\nnebula&gt; FETCH PROP ON player \"player100\" YIELD properties(vertex);\n+-------------------------------+\n| properties(VERTEX)            |\n+-------------------------------+\n| {age: 42, name: \"Tim Duncan\"} |\n+-------------------------------+\n</code></pre>"},{"location":"3.ngql-guide/7.general-query-statements/4.fetch/#_3","title":"\u83b7\u53d6\u70b9\u7684\u6307\u5b9a\u5c5e\u6027\u503c","text":"<p>\u4f7f\u7528<code>YIELD</code>\u5b50\u53e5\u6307\u5b9a\u8fd4\u56de\u7684\u5c5e\u6027\u3002</p> <pre><code># \u83b7\u53d6 Tag \u4e3a player\uff0c\u4e14 ID \u4e3a player100 \u7684\u70b9\u6570\u636e name \u7684\u5c5e\u6027\u503c\u3002\nnebula&gt; FETCH PROP ON player \"player100\" \\\n        YIELD properties(vertex).name AS name;\n+--------------+\n| name         |\n+--------------+\n| \"Tim Duncan\" |\n+--------------+\n</code></pre>"},{"location":"3.ngql-guide/7.general-query-statements/4.fetch/#_4","title":"\u83b7\u53d6\u591a\u4e2a\u70b9\u7684\u5c5e\u6027\u503c","text":"<p>\u6307\u5b9a\u591a\u4e2a\u70b9 ID \u83b7\u53d6\u591a\u4e2a\u70b9\u7684\u5c5e\u6027\u503c\uff0c\u70b9\u4e4b\u95f4\u7528\u82f1\u6587\u9017\u53f7\uff08,\uff09\u5206\u9694\u3002</p> <pre><code># \u83b7\u53d6 Tag \u4e3a player\uff0c\u4e14 ID \u4e3a player101\uff0cplayer102\uff0cplayer103 \u4e09\u4e2a\u70b9\u6570\u636e\u7684\u5c5e\u6027\u503c\u3002\nnebula&gt; FETCH PROP ON player \"player101\", \"player102\", \"player103\" YIELD properties(vertex);\n+--------------------------------------+\n| properties(VERTEX)                   |\n+--------------------------------------+\n| {age: 33, name: \"LaMarcus Aldridge\"} |\n| {age: 36, name: \"Tony Parker\"}       |\n| {age: 32, name: \"Rudy Gay\"}          |\n+--------------------------------------+\n</code></pre>"},{"location":"3.ngql-guide/7.general-query-statements/4.fetch/#tag_1","title":"\u57fa\u4e8e\u591a\u4e2a Tag \u83b7\u53d6\u70b9\u7684\u5c5e\u6027\u503c","text":"<p>\u5728<code>FETCH</code>\u8bed\u53e5\u4e2d\u6307\u5b9a\u591a\u4e2a Tag \u83b7\u53d6\u5c5e\u6027\u503c\u3002Tag \u4e4b\u95f4\u7528\u82f1\u6587\u9017\u53f7\uff08,\uff09\u5206\u9694\u3002</p> <pre><code># \u521b\u5efa\u65b0 Tag t1\u3002\nnebula&gt; CREATE TAG IF NOT EXISTS t1(a string, b int);\n\n# \u4e3a\u70b9 player100 \u6dfb\u52a0 Tag t1\u3002\nnebula&gt; INSERT VERTEX t1(a, b) VALUES \"player100\":(\"Hello\", 100);\n\n# \u57fa\u4e8e Tag player \u548c t1 \u83b7\u53d6\u70b9 player100 \u4e0a\u7684\u5c5e\u6027\u503c\u3002\nnebula&gt; FETCH PROP ON player, t1 \"player100\" YIELD vertex AS v;\n+----------------------------------------------------------------------------+\n| v                                                                          |\n+----------------------------------------------------------------------------+\n| (\"player100\" :player{age: 42, name: \"Tim Duncan\"} :t1{a: \"Hello\", b: 100}) |\n+----------------------------------------------------------------------------+\n</code></pre> <p>\u7528\u6237\u53ef\u4ee5\u5728<code>FETCH</code>\u8bed\u53e5\u4e2d\u7ec4\u5408\u591a\u4e2a Tag \u548c\u591a\u4e2a\u70b9\u3002</p> <pre><code># \u83b7\u53d6 Tag \u4e3a player \u6216 t1\uff0c\u4e14 ID \u4e3a player100\uff0cplayer103 \u4e24\u4e2a\u70b9\u6570\u636e\u7684\u5c5e\u6027\u503c\u3002\nnebula&gt; FETCH PROP ON player, t1 \"player100\", \"player103\" YIELD vertex AS v;\n+----------------------------------------------------------------------------+\n| v                                                                          |\n+----------------------------------------------------------------------------+\n| (\"player100\" :player{age: 42, name: \"Tim Duncan\"} :t1{a: \"Hello\", b: 100}) |\n| (\"player103\" :player{age: 32, name: \"Rudy Gay\"})                           |\n+----------------------------------------------------------------------------+\n</code></pre>"},{"location":"3.ngql-guide/7.general-query-statements/4.fetch/#_5","title":"\u5728\u6240\u6709\u6807\u7b7e\u4e2d\u83b7\u53d6\u70b9\u7684\u5c5e\u6027\u503c","text":"<p>\u5728<code>FETCH</code>\u8bed\u53e5\u4e2d\u4f7f\u7528<code>*</code>\u83b7\u53d6\u5f53\u524d\u56fe\u7a7a\u95f4\u6240\u6709\u6807\u7b7e\u91cc\uff0c\u70b9\u7684\u5c5e\u6027\u503c\u3002</p> <pre><code># \u83b7\u53d6\u5f53\u524d\u56fe\u7a7a\u95f4\u6240\u6709\u6807\u7b7e\u91cc ID \u4e3a player100\uff0cplayer106\uff0cteam200 \u7684\u70b9\u6570\u636e\u5c5e\u6027\u503c\u3002\nnebula&gt; FETCH PROP ON * \"player100\", \"player106\", \"team200\" YIELD vertex AS v;\n+----------------------------------------------------------------------------+\n| v                                                                          |\n+----------------------------------------------------------------------------+\n| (\"player100\" :player{age: 42, name: \"Tim Duncan\"} :t1{a: \"Hello\", b: 100}) |\n| (\"player106\" :player{age: 25, name: \"Kyle Anderson\"})                      |\n| (\"team200\" :team{name: \"Warriors\"})                                        |\n+----------------------------------------------------------------------------+\n</code></pre>"},{"location":"3.ngql-guide/7.general-query-statements/4.fetch/#_6","title":"\u83b7\u53d6\u8fb9\u7684\u5c5e\u6027\u503c","text":""},{"location":"3.ngql-guide/7.general-query-statements/4.fetch/#_7","title":"\u8bed\u6cd5","text":"<pre><code>FETCH PROP ON &lt;edge_type&gt; &lt;src_vid&gt; -&gt; &lt;dst_vid&gt;[@&lt;rank&gt;] [, &lt;src_vid&gt; -&gt; &lt;dst_vid&gt; ...]\nYIELD &lt;output&gt;;\n</code></pre> \u53c2\u6570 \u8bf4\u660e <code>edge_type</code> Edge type \u540d\u79f0\u3002 <code>src_vid</code> \u8d77\u59cb\u70b9 ID\uff0c\u8868\u793a\u8fb9\u7684\u8d77\u70b9\u3002 <code>dst_vid</code> \u76ee\u7684\u70b9 ID\uff0c\u8868\u793a\u8fb9\u7684\u7ec8\u70b9\u3002 <code>rank</code> \u8fb9\u7684 rank\u3002\u53ef\u9009\u53c2\u6570\uff0c\u9ed8\u8ba4\u503c\u4e3a<code>0</code>\u3002\u8d77\u59cb\u70b9\u3001\u76ee\u7684\u70b9\u3001Edge type \u548c rank \u53ef\u4ee5\u552f\u4e00\u786e\u5b9a\u4e00\u6761\u8fb9\u3002 <code>YIELD</code> \u5b9a\u4e49\u9700\u8981\u8fd4\u56de\u7684\u8f93\u51fa\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1 <code>YIELD</code>\u3002"},{"location":"3.ngql-guide/7.general-query-statements/4.fetch/#_8","title":"\u83b7\u53d6\u8fb9\u7684\u6240\u6709\u5c5e\u6027\u503c","text":"<pre><code># \u83b7\u53d6\u8fde\u63a5 player100 \u548c team204 \u7684\u8fb9 serve \u7684\u6240\u6709\u5c5e\u6027\u503c\u3002\nnebula&gt; FETCH PROP ON serve \"player100\" -&gt; \"team204\" YIELD properties(edge);\n+------------------------------------+\n| properties(EDGE)                   |\n+------------------------------------+\n| {end_year: 2016, start_year: 1997} |\n+------------------------------------+\n</code></pre>"},{"location":"3.ngql-guide/7.general-query-statements/4.fetch/#_9","title":"\u83b7\u53d6\u8fb9\u7684\u6307\u5b9a\u5c5e\u6027\u503c","text":"<p>\u4f7f\u7528<code>YIELD</code>\u5b50\u53e5\u6307\u5b9a\u8fd4\u56de\u7684\u5c5e\u6027\u3002</p> <pre><code># \u83b7\u53d6\u8fde\u63a5 player100 \u548c team204 \u7684\u8fb9 serve \u7684 start_year \u5c5e\u6027\u503c\u3002\nnebula&gt; FETCH PROP ON serve \"player100\" -&gt; \"team204\"    \\\n        YIELD properties(edge).start_year;\n+-----------------------------+\n| properties(EDGE).start_year |\n+-----------------------------+\n| 1997                        |\n+-----------------------------+\n</code></pre>"},{"location":"3.ngql-guide/7.general-query-statements/4.fetch/#_10","title":"\u83b7\u53d6\u591a\u6761\u8fb9\u7684\u5c5e\u6027\u503c","text":"<p>\u6307\u5b9a\u591a\u4e2a\u8fb9\u6a21\u5f0f (<code>&lt;src_vid&gt; -&gt; &lt;dst_vid&gt;[@&lt;rank&gt;]</code>) \u83b7\u53d6\u591a\u4e2a\u8fb9\u7684\u5c5e\u6027\u503c\u3002\u6a21\u5f0f\u4e4b\u95f4\u7528\u82f1\u6587\u9017\u53f7\uff08,\uff09\u5206\u9694\u3002</p> <pre><code># \u83b7\u53d6\u8fde\u63a5 player100 \u548c team204 \u7684\u8fb9\uff0c\u8fde\u63a5 player133 \u548c team202 \u7684\u8fb9 serve \u7684\u6240\u6709\u5c5e\u6027\u503c\u3002\nnebula&gt; FETCH PROP ON serve \"player100\" -&gt; \"team204\", \"player133\" -&gt; \"team202\" YIELD edge AS e;\n+-----------------------------------------------------------------------+\n| e                                                                     |\n+-----------------------------------------------------------------------+\n| [:serve \"player100\"-&gt;\"team204\" @0 {end_year: 2016, start_year: 1997}] |\n| [:serve \"player133\"-&gt;\"team202\" @0 {end_year: 2011, start_year: 2002}] |\n+-----------------------------------------------------------------------+\n</code></pre>"},{"location":"3.ngql-guide/7.general-query-statements/4.fetch/#rank","title":"\u57fa\u4e8e rank \u83b7\u53d6\u5c5e\u6027\u503c","text":"<p>\u5982\u679c\u6709\u591a\u6761\u8fb9\uff0c\u8d77\u59cb\u70b9\u3001\u76ee\u7684\u70b9\u548c Edge type \u90fd\u76f8\u540c\uff0c\u53ef\u4ee5\u901a\u8fc7\u6307\u5b9a rank \u83b7\u53d6\u6b63\u786e\u7684\u8fb9\u5c5e\u6027\u503c\u3002</p> <pre><code># \u63d2\u5165\u4e0d\u540c\u5c5e\u6027\u503c\u3001\u4e0d\u540c rank \u7684\u8fb9\u3002\nnebula&gt; insert edge serve(start_year,end_year) \\\n        values \"player100\"-&gt;\"team204\"@1:(1998, 2017);\n\nnebula&gt; insert edge serve(start_year,end_year) \\\n        values \"player100\"-&gt;\"team204\"@2:(1990, 2018);\n\n# \u9ed8\u8ba4\u8fd4\u56de rank \u4e3a 0 \u7684\u8fb9\u3002\nnebula&gt; FETCH PROP ON serve \"player100\" -&gt; \"team204\" YIELD edge AS e;\n+-----------------------------------------------------------------------+\n| e                                                                     |\n+-----------------------------------------------------------------------+\n| [:serve \"player100\"-&gt;\"team204\" @0 {end_year: 2016, start_year: 1997}] |\n+-----------------------------------------------------------------------+\n\n# \u8981\u83b7\u53d6 rank \u4e0d\u4e3a 0 \u7684\u8fb9\uff0c\u8bf7\u5728 FETCH \u8bed\u53e5\u4e2d\u8bbe\u7f6e rank\u3002\nnebula&gt; FETCH PROP ON serve \"player100\" -&gt; \"team204\"@1 YIELD edge AS e;\n+-----------------------------------------------------------------------+\n| e                                                                     |\n+-----------------------------------------------------------------------+\n| [:serve \"player100\"-&gt;\"team204\" @1 {end_year: 2017, start_year: 1998}] |\n+-----------------------------------------------------------------------+\n</code></pre>"},{"location":"3.ngql-guide/7.general-query-statements/4.fetch/#fetch_1","title":"\u590d\u5408\u8bed\u53e5\u4e2d\u4f7f\u7528 FETCH","text":"<p>\u5c06<code>FETCH</code>\u4e0e\u539f\u751f nGQL \u7ed3\u5408\u4f7f\u7528\u662f\u4e00\u79cd\u5e38\u89c1\u7684\u65b9\u5f0f\uff0c\u4f8b\u5982\u548c<code>GO</code>\u4e00\u8d77\u3002</p> <pre><code># \u8fd4\u56de\u4ece\u70b9 player101 \u5f00\u59cb\u7684 follow \u8fb9\u7684 degree \u503c\u3002src(edge) \u83b7\u53d6\u8fb9\u7684\u8d77\u59cb\u70b9 ID\uff0cdst(edge) \u83b7\u53d6\u8fb9\u7684\u76ee\u7684\u70b9 ID\u3002\nnebula&gt; GO FROM \"player101\" OVER follow \\\n        YIELD src(edge) AS s, dst(edge) AS d \\\n        | FETCH PROP ON follow $-.s -&gt; $-.d \\\n        YIELD properties(edge).degree;\n+-------------------------+\n| properties(EDGE).degree |\n+-------------------------+\n| 95                      |\n| 90                      |\n| 95                      |\n+-------------------------+\n</code></pre> <p>\u7528\u6237\u4e5f\u53ef\u4ee5\u901a\u8fc7\u81ea\u5b9a\u4e49\u53d8\u91cf\u6784\u5efa\u7c7b\u4f3c\u7684\u67e5\u8be2\u3002</p> <pre><code># \u8fd4\u56de\u4ece\u70b9 player101 \u5f00\u59cb\u7684 follow \u8fb9\u7684 degree \u503c\u3002src(edge) \u83b7\u53d6\u8fb9\u7684\u8d77\u59cb\u70b9 ID\uff0cdst(edge) \u83b7\u53d6\u8fb9\u7684\u76ee\u7684\u70b9 ID\u3002\nnebula&gt; $var = GO FROM \"player101\" OVER follow \\\n        YIELD src(edge) AS s, dst(edge) AS d; \\\n        FETCH PROP ON follow $var.s -&gt; $var.d \\\n        YIELD properties(edge).degree;\n+-------------------------+\n| properties(EDGE).degree |\n+-------------------------+\n| 95                      |\n| 90                      |\n| 95                      |\n+-------------------------+\n</code></pre> <p>\u66f4\u591a\u590d\u5408\u8bed\u53e5\u7684\u8be6\u60c5\uff0c\u8bf7\u53c2\u89c1\u590d\u5408\u67e5\u8be2\uff08\u5b50\u53e5\u7ed3\u6784\uff09\u3002</p>"},{"location":"3.ngql-guide/7.general-query-statements/5.lookup/","title":"LOOKUP","text":"<p><code>LOOKUP</code>\u6839\u636e\u7d22\u5f15\u904d\u5386\u6570\u636e\u3002\u7528\u6237\u53ef\u4ee5\u4f7f\u7528<code>LOOKUP</code>\u5b9e\u73b0\u5982\u4e0b\u529f\u80fd\uff1a</p> <ul> <li>\u6839\u636e<code>WHERE</code>\u5b50\u53e5\u641c\u7d22\u7279\u5b9a\u6570\u636e\u3002</li> </ul> <ul> <li>\u901a\u8fc7 Tag \u5217\u51fa\u70b9\uff1a\u68c0\u7d22\u6307\u5b9a Tag \u7684\u6240\u6709\u70b9 ID\u3002</li> </ul> <ul> <li>\u901a\u8fc7 Edge type \u5217\u51fa\u8fb9\uff1a\u68c0\u7d22\u6307\u5b9a Edge type \u7684\u6240\u6709\u8fb9\u7684\u8d77\u59cb\u70b9\u3001\u76ee\u7684\u70b9\u548c rank\u3002</li> </ul> <ul> <li>\u7edf\u8ba1\u5305\u542b\u6307\u5b9a Tag \u7684\u70b9\u6216\u5c5e\u4e8e\u6307\u5b9a Edge type \u7684\u8fb9\u7684\u6570\u91cf\u3002</li> </ul>"},{"location":"3.ngql-guide/7.general-query-statements/5.lookup/#opencypher","title":"OpenCypher \u517c\u5bb9\u6027","text":"<p>\u672c\u6587\u64cd\u4f5c\u4ec5\u9002\u7528\u4e8e\u539f\u751f nGQL\u3002</p>"},{"location":"3.ngql-guide/7.general-query-statements/5.lookup/#_1","title":"\u6ce8\u610f\u4e8b\u9879","text":"<ul> <li>\u7d22\u5f15\u4f1a\u5bfc\u81f4\u5199\u6027\u80fd\u5927\u5e45\u964d\u4f4e\u3002\u8bf7\u4e0d\u8981\u968f\u610f\u5728\u751f\u4ea7\u73af\u5883\u4e2d\u4f7f\u7528\u7d22\u5f15\uff0c\u9664\u975e\u5f88\u6e05\u695a\u4f7f\u7528\u7d22\u5f15\u5bf9\u4e1a\u52a1\u7684\u5f71\u54cd\u3002</li> </ul> <ul> <li> <p>\u901a\u8fc7<code>Explain</code>\u547d\u4ee4\u67e5\u770b\u9009\u62e9\u7684\u7d22\u5f15\u3002</p> <p>\u5386\u53f2\u7248\u672c\u517c\u5bb9\u6027</p> <p>\u5728 2.5.0 \u7248\u672c\u4e4b\u524d\uff0c\u5982\u679c\u7528<code>LOOKUP</code>\u8bed\u53e5\u57fa\u4e8e\u6307\u5b9a\u5c5e\u6027\u67e5\u8be2\u65f6\u8be5\u5c5e\u6027\u6ca1\u6709\u7d22\u5f15\uff0c\u7cfb\u7edf\u5c06\u62a5\u9519\uff0c\u800c\u4e0d\u4f1a\u4f7f\u7528\u5176\u5b83\u7d22\u5f15\u3002</p> </li> </ul>"},{"location":"3.ngql-guide/7.general-query-statements/5.lookup/#_2","title":"\u524d\u63d0\u6761\u4ef6","text":"<p>\u8bf7\u786e\u4fdd<code>LOOKUP</code>\u8bed\u53e5\u6709\u81f3\u5c11\u4e00\u4e2a\u7d22\u5f15\u53ef\u7528\u3002</p> <p>\u5982\u679c\u5df2\u7ecf\u5b58\u5728\u76f8\u5173\u7684\u70b9\u3001\u8fb9\u6216\u5c5e\u6027\uff0c\u5fc5\u987b\u5728\u65b0\u521b\u5efa\u7d22\u5f15\u540e\u91cd\u5efa\u7d22\u5f15\uff0c\u624d\u80fd\u4f7f\u5176\u751f\u6548\u3002</p>"},{"location":"3.ngql-guide/7.general-query-statements/5.lookup/#_3","title":"\u8bed\u6cd5","text":"<pre><code>LOOKUP ON {&lt;vertex_tag&gt; | &lt;edge_type&gt;}\n[WHERE &lt;expression&gt; [AND &lt;expression&gt; ...]]\nYIELD [DISTINCT] &lt;return_list&gt; [AS &lt;alias&gt;]\n[&lt;clause&gt;];\n\n&lt;return_list&gt;\n    &lt;prop_name&gt; [AS &lt;col_alias&gt;] [, &lt;prop_name&gt; [AS &lt;prop_alias&gt;] ...];\n</code></pre> <ul> <li><code>WHERE &lt;expression&gt;</code>\uff1a\u6307\u5b9a\u904d\u5386\u7684\u8fc7\u6ee4\u6761\u4ef6\uff0c\u8fd8\u53ef\u4ee5\u7ed3\u5408\u5e03\u5c14\u8fd0\u7b97\u7b26 AND \u548c OR \u4e00\u8d77\u4f7f\u7528\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1 WHERE\u3002</li> </ul> <ul> <li><code>YIELD</code>\uff1a\u5b9a\u4e49\u9700\u8981\u8fd4\u56de\u7684\u8f93\u51fa\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1 <code>YIELD</code>\u3002</li> </ul> <ul> <li><code>DISTINCT</code>\uff1a\u805a\u5408\u8f93\u51fa\u7ed3\u679c\uff0c\u8fd4\u56de\u53bb\u91cd\u540e\u7684\u7ed3\u679c\u96c6\u3002</li> </ul> <ul> <li><code>AS</code>\uff1a\u8bbe\u7f6e\u522b\u540d\u3002</li> </ul> <ul> <li><code>clause</code>\uff1a\u652f\u6301<code>ORDER BY</code>\u3001<code>LIMIT</code>\u5b50\u53e5\u3002</li> </ul>"},{"location":"3.ngql-guide/7.general-query-statements/5.lookup/#where","title":"WHERE \u8bed\u53e5\u9650\u5236","text":"<p>\u5728<code>LOOKUP</code>\u8bed\u53e5\u4e2d\u4f7f\u7528<code>WHERE</code>\u5b50\u53e5\uff0c\u4e0d\u652f\u6301\u5982\u4e0b\u64cd\u4f5c\uff1a</p> <ul> <li><code>$-</code>\u548c<code>$^</code>\u3002</li> <li>\u5728\u5173\u7cfb\u8868\u8fbe\u5f0f\u4e2d\uff0c\u4e0d\u652f\u6301\u8fd0\u7b97\u7b26\u4e24\u8fb9\u90fd\u6709\u5b57\u6bb5\u540d\uff0c\u4f8b\u5982<code>tagName.prop1 &gt; tagName.prop2</code>\u3002</li> <li>\u4e0d\u652f\u6301\u8fd0\u7b97\u8868\u8fbe\u5f0f\u548c\u51fd\u6570\u8868\u8fbe\u5f0f\u4e2d\u5d4c\u5957 AliasProp \u8868\u8fbe\u5f0f\u3002</li> <li>\u4e0d\u652f\u6301 XOR \u8fd0\u7b97\u7b26\u3002</li> <li>\u4e0d\u652f\u6301\u9664<code>STARTS WITH</code>\u4e4b\u5916\u7684\u5b57\u7b26\u4e32\u64cd\u4f5c\u3002</li> <li>\u4e0d\u652f\u6301\u8fc7\u6ee4 <code>rank()</code>\u3002</li> <li>\u4e0d\u652f\u6301\u56fe\u6a21\u5f0f.</li> </ul>"},{"location":"3.ngql-guide/7.general-query-statements/5.lookup/#_4","title":"\u68c0\u7d22\u70b9","text":"<p>\u8fd4\u56de Tag \u4e3a<code>player</code>\u4e14<code>name</code>\u4e3a<code>Tony Parker</code>\u7684\u70b9\u3002</p> <pre><code># \u521b\u5efa Tag \u4e3a player \u7684\u590d\u5408\u5c5e\u6027\u7d22\u5f15 index_player\u3002\nnebula&gt; CREATE TAG INDEX IF NOT EXISTS index_player ON player(name(30), age);\n\n# \u91cd\u5efa\u590d\u5408\u5c5e\u6027\u7d22\u5f15 index_player\uff0c\u8fd4\u56de\u4efb\u52a1 id\u3002\nnebula&gt; REBUILD TAG INDEX index_player;\n+------------+\n| New Job Id |\n+------------+\n| 15         |\n+------------+\n\n# \u8fd4\u56de\u6240\u6709 name \u7b49\u4e8e Tony Parker \u7684\u70b9\u6570\u636e\u7684 ID\u3002\nnebula&gt; LOOKUP ON player \\\n        WHERE player.name == \"Tony Parker\" \\\n        YIELD id(vertex);\n+---------------+\n| id(VERTEX)    |\n+---------------+\n| \"player101\"   |\n+---------------+\n\n# \u67e5\u8be2\u6240\u6709 name \u7b49\u4e8e Tony Parker \u7684\u70b9\u6570\u636e\uff0c\u8fd4\u56de name \u548c age \u5c5e\u6027\u503c\u3002\nnebula&gt; LOOKUP ON player \\\n        WHERE player.name == \"Tony Parker\" \\\n        YIELD properties(vertex).name AS name, properties(vertex).age AS age;\n+---------------+-----+\n| name          | age |\n+---------------+-----+\n| \"Tony Parker\" | 36  |\n+---------------+-----+\n\n# \u67e5\u8be2\u6240\u6709 age \u5927\u4e8e 45 \u7684\u70b9\u6570\u636e\uff0c\u5e76\u8fd4\u56de\u70b9\u6570\u636e\u7684 ID\u3002\nnebula&gt; LOOKUP ON player \\\n        WHERE player.age  &gt; 45 \\\n        YIELD id(vertex);\n+-------------+\n| id(VERTEX)  |\n+-------------+\n| \"player144\" |\n| \"player140\" |\n+-------------+\n\n# \u67e5\u8be2\u6240\u6709 name \u4ee5 B \u5f00\u5934\uff0c\u4e14 age \u5728 22 \u548c 30 \u4e4b\u95f4\u7684\u70b9\u6570\u636e\uff0c\u5e76\u8fd4\u56de name \u548c age \u5c5e\u6027\u503c\u3002\nnebula&gt; LOOKUP ON player \\\n        WHERE player.name STARTS WITH \"B\" \\\n        AND player.age IN [22,30] \\\n        YIELD properties(vertex).name, properties(vertex).age;\n+-------------------------+------------------------+\n| properties(VERTEX).name | properties(VERTEX).age |\n+-------------------------+------------------------+\n| \"Ben Simmons\"           | 22                     |\n| \"Blake Griffin\"         | 30                     |\n+-------------------------+------------------------+\n\n# \u67e5\u8be2\u6240\u6709 name \u7b49\u4e8e Kobe Bryant \u7684\u70b9\u6570\u636e\uff0c\u8fd4\u56de\u70b9\u7684 ID \u548c name \u5c5e\u6027\u503c\uff0c\u5e76\u4ee5\u6b64\u4e3a\u8d77\u59cb\u70b9\u8fdb\u884c\u904d\u5386\uff0c\u8fd4\u56de\u904d\u5386\u7ed3\u679c\u3002\nnebula&gt; LOOKUP ON player \\\n        WHERE player.name == \"Kobe Bryant\"\\\n        YIELD id(vertex) AS VertexID, properties(vertex).name AS name |\\\n        GO FROM $-.VertexID OVER serve \\\n        YIELD $-.name, properties(edge).start_year, properties(edge).end_year, properties($$).name;\n+---------------+-----------------------------+---------------------------+---------------------+\n| $-.name       | properties(EDGE).start_year | properties(EDGE).end_year | properties($$).name |\n+---------------+-----------------------------+---------------------------+---------------------+\n| \"Kobe Bryant\" | 1996                        | 2016                      | \"Lakers\"            |\n+---------------+-----------------------------+---------------------------+---------------------+\n</code></pre>"},{"location":"3.ngql-guide/7.general-query-statements/5.lookup/#_5","title":"\u68c0\u7d22\u8fb9","text":"<p>\u8fd4\u56de Edge type \u4e3a<code>follow</code>\u4e14<code>degree</code>\u4e3a<code>90</code>\u7684\u8fb9\u3002</p> <pre><code># \u521b\u5efa Edge type \u4e3a follow\uff0c\u5c5e\u6027 degree \u7684\u7d22\u5f15 index_follow\u3002\nnebula&gt; CREATE EDGE INDEX IF NOT EXISTS index_follow ON follow(degree);\n\n# \u91cd\u5efa\u5c5e\u6027\u7d22\u5f15 index_follow\uff0c\u8fd4\u56de\u4efb\u52a1 id\u3002\nnebula&gt; REBUILD EDGE INDEX index_follow;\n+------------+\n| New Job Id |\n+------------+\n| 62         |\n+------------+\n\n# \u67e5\u8be2\u5e76\u8fd4\u56de\u6240\u6709 degree \u7b49\u4e8e 90 \u7684\u8fb9\u3002\nnebula&gt; LOOKUP ON follow \\\n        WHERE follow.degree == 90 YIELD edge AS e;\n+----------------------------------------------------+\n| e                                                  |\n+----------------------------------------------------+\n| [:follow \"player109\"-&gt;\"player125\" @0 {degree: 90}] |\n| [:follow \"player118\"-&gt;\"player120\" @0 {degree: 90}] |\n| [:follow \"player118\"-&gt;\"player131\" @0 {degree: 90}] |\n...\n\n# \u67e5\u8be2\u6240\u6709 degree \u7b49\u4e8e 90 \u7684\u8fb9\uff0c\u5e76\u8fd4\u56de degree \u5c5e\u6027\u503c\u3002\nnebula&gt; LOOKUP ON follow \\\n        WHERE follow.degree == 90 \\\n        YIELD properties(edge).degree;\n+-------------------------+\n| properties(EDGE).degree |\n+-------------------------+\n| 90                      |\n| 90                      |\n...\n\n# \u6839\u636e degree \u5c5e\u6027\u503c\u5347\u5e8f\u6392\u5217\uff0c\u5e76\u8fd4\u56de\u524d 10 \u6761 degree \u5c5e\u6027\u503c\u3002\nnebula&gt; LOOKUP ON follow \\\n        YIELD properties(edge).degree as degree \\\n        | ORDER BY $-.degree \\\n        | LIMIT 10;\n+--------+\n| degree |\n+--------+\n| -1     |\n| -1     |\n| 9      |\n| 10     |\n| 13     |\n| 50     |\n| 55     |\n| 60     |\n| 70     |\n| 70     |\n+--------+\n\n# \u67e5\u8be2\u6240\u6709 degree \u7b49\u4e8e 60 \u7684\u8fb9\uff0c\u8fd4\u56de\u8fb9\u7684\u76ee\u7684\u70b9 ID \u548c\u8fb9\u7684 degree \u5c5e\u6027\u503c\uff0c\u5e76\u4e3a\u6b64\u8d77\u59cb\u70b9\u8fdb\u884c\u904d\u5386\uff0c\u8fd4\u56de\u904d\u5386\u7ed3\u679c\u3002\nnebula&gt; LOOKUP ON follow \\\n        WHERE follow.degree == 60 \\\n        YIELD dst(edge) AS DstVID, properties(edge).degree AS Degree |\\\n        GO FROM $-.DstVID OVER serve \\\n        YIELD $-.DstVID, properties(edge).start_year, properties(edge).end_year, properties($$).name;\n+-------------+-----------------------------+---------------------------+---------------------+\n| $-.DstVID   | properties(EDGE).start_year | properties(EDGE).end_year | properties($$).name |\n+-------------+-----------------------------+---------------------------+---------------------+\n| \"player105\" | 2010                        | 2018                      | \"Spurs\"             |\n| \"player105\" | 2009                        | 2010                      | \"Cavaliers\"         |\n| \"player105\" | 2018                        | 2019                      | \"Raptors\"           |\n+-------------+-----------------------------+---------------------------+---------------------+\n</code></pre>"},{"location":"3.ngql-guide/7.general-query-statements/5.lookup/#tag_edge_type","title":"\u901a\u8fc7 Tag \u5217\u51fa\u6240\u6709\u7684\u5bf9\u5e94\u7684\u70b9/\u901a\u8fc7 Edge type \u5217\u51fa\u8fb9","text":"<p>\u5982\u679c\u9700\u8981\u901a\u8fc7 Tag \u5217\u51fa\u6240\u6709\u7684\u70b9\uff0c\u6216\u901a\u8fc7 Edge type \u5217\u51fa\u8fb9\uff0c\u5219 Tag\u3001Edge type \u6216\u5c5e\u6027\u4e0a\u5fc5\u987b\u6709\u81f3\u5c11\u4e00\u4e2a\u7d22\u5f15\u3002</p> <p>\u4f8b\u5982\u4e00\u4e2a Tag <code>player</code>\u6709\u5c5e\u6027<code>name</code>\u548c<code>age</code>\uff0c\u4e3a\u4e86\u904d\u5386\u6240\u6709\u5305\u542b Tag <code>player</code>\u7684\u70b9 ID\uff0cTag <code>player</code>\u3001\u5c5e\u6027<code>name</code>\u6216\u5c5e\u6027<code>age</code>\u4e2d\u5fc5\u987b\u6709\u4e00\u4e2a\u5df2\u7ecf\u521b\u5efa\u7d22\u5f15\u3002</p> <ul> <li>\u67e5\u627e\u6240\u6709 Tag \u4e3a<code>player</code>\u7684\u70b9 VID\u3002<pre><code># \u521b\u5efa\u540d\u4e3a player \u7684 Tag\u3002\nnebula&gt; CREATE TAG IF NOT EXISTS player(name string,age int);\n\n# \u521b\u5efa Tag \u4e3a player \u7684\u7d22\u5f15 player_index\u3002\nnebula&gt; CREATE TAG INDEX IF NOT EXISTS player_index on player();\n\n# \u91cd\u5efa\u7d22\u5f15 player_index\uff0c\u8fd4\u56de\u4efb\u52a1 id\u3002\nnebula&gt; REBUILD TAG INDEX player_index;\n+------------+\n| New Job Id |\n+------------+\n| 66         |\n+------------+\n\n# \u63d2\u5165\u4e24\u4e2a\u70b9\u6570\u636e\u3002\nnebula&gt; INSERT VERTEX player(name,age) \\\n        VALUES \"player100\":(\"Tim Duncan\", 42), \"player101\":(\"Tony Parker\", 36);\n\n# \u5217\u51fa\u6240\u6709\u7684 player\u3002\u7c7b\u4f3c\u4e8e MATCH (n:player) RETURN id(n) /*, n */\u3002\nnebula&gt; LOOKUP ON player YIELD id(vertex);\n+-------------+\n| id(VERTEX)  |\n+-------------+\n| \"player100\" |\n| \"player101\" |\n...\n\n# \u4ece\u7ed3\u679c\u4e2d\u8fd4\u56de\u6700\u524d\u9762\u7684 4 \u884c\u6570\u636e\u3002\nnebula&gt; LOOKUP ON player YIELD id(vertex) | LIMIT 4;\n+-------------+\n| id(VERTEX)  |\n+-------------+\n| \"player105\" |\n| \"player109\" |\n| \"player111\" |\n| \"player118\" |\n+-------------+\n</code></pre> </li> </ul> <ul> <li>\u67e5\u627e Edge type \u4e3a<code>follow</code>\u7684\u6240\u6709\u8fb9\u7684\u4fe1\u606f\u3002<pre><code># \u521b\u5efa\u540d\u4e3a follow \u7684 Edge type\u3002\nnebula&gt; CREATE EDGE IF NOT EXISTS follow(degree int);\n\n# \u521b\u5efa Edge type \u4e3a follow \u7684\u7d22\u5f15 follow_index\u3002\nnebula&gt; CREATE EDGE INDEX IF NOT EXISTS follow_index on follow();\n\n# \u91cd\u5efa\u7d22\u5f15 follow_index\u3002\nnebula&gt; REBUILD EDGE INDEX follow_index;\n+------------+\n| New Job Id |\n+------------+\n| 88         |\n+------------+\n\n# \u63d2\u5165\u8fb9\u6570\u636e\u3002\nnebula&gt; INSERT EDGE follow(degree) \\\n        VALUES \"player100\"-&gt;\"player101\":(95);\n\n# \u5217\u51fa\u6240\u6709\u7684 follow \u8fb9\u3002\u7c7b\u4f3c\u4e8e MATCH (s)-[e:follow]-&gt;(d) RETURN id(s), rank(e), id(d) /*, type(e) */\u3002\nnebula)&gt; LOOKUP ON follow YIELD edge AS e;\n+-----------------------------------------------------+\n| e                                                   |\n+-----------------------------------------------------+\n| [:follow \"player105\"-&gt;\"player100\" @0 {degree: 70}]  |\n| [:follow \"player105\"-&gt;\"player116\" @0 {degree: 80}]  |\n| [:follow \"player109\"-&gt;\"player100\" @0 {degree: 80}]  |\n...\n</code></pre> </li> </ul>"},{"location":"3.ngql-guide/7.general-query-statements/5.lookup/#_6","title":"\u7edf\u8ba1\u70b9\u6216\u8fb9","text":"<p>\u7edf\u8ba1 Tag \u4e3a<code>player</code>\u7684\u70b9\u548c Edge type \u4e3a<code>follow</code>\u7684\u8fb9\u3002</p> <pre><code># \u7edf\u8ba1 Tag \u4e3a player \u7684\u70b9\u603b\u6570\u3002\nnebula&gt; LOOKUP ON player YIELD id(vertex)|\\\n        YIELD COUNT(*) AS Player_Number;\n+---------------+\n| Player_Number |\n+---------------+\n| 51            |\n+---------------+\n\n# \u7edf\u8ba1 Edge type \u4e3a follow \u7684\u8fb9\u603b\u6570\u3002\nnebula&gt; LOOKUP ON follow YIELD edge AS e| \\\n        YIELD COUNT(*) AS Follow_Number;\n+---------------+\n| Follow_Number |\n+---------------+\n| 81            |\n+---------------+\n</code></pre> <p>Note</p> <p>\u4f7f\u7528 <code>SHOW STATS</code>\u547d\u4ee4\u4e5f\u53ef\u4ee5\u7edf\u8ba1\u70b9\u548c\u8fb9\u3002</p>"},{"location":"3.ngql-guide/7.general-query-statements/6.find-path/","title":"FIND PATH","text":"<p><code>FIND PATH</code>\u8bed\u53e5\u67e5\u627e\u6307\u5b9a\u8d77\u59cb\u70b9\u548c\u76ee\u7684\u70b9\u4e4b\u95f4\u7684\u8def\u5f84\u3002</p> <p>Note</p> <p>\u7528\u6237\u53ef\u5728\u914d\u7f6e\u6587\u4ef6<code>nebula-graphd.conf</code>\u4e2d\u6dfb\u52a0<code>num_operator_threads</code>\u53c2\u6570\u63d0\u9ad8<code>FIND PATH</code>\u7684\u67e5\u8be2\u6027\u80fd\u3002<code>num_operator_threads</code>\u7684\u53d6\u503c\u4e3a<code>2</code>~<code>10</code>\uff0c\u8be5\u503c\u4e0d\u80fd\u8d85\u8fc7 Graph \u670d\u52a1\u6240\u5728\u673a\u5668\u7684 CPU \u6838\u5fc3\u4e2a\u6570\uff0c\u5efa\u8bae\u8bbe\u7f6e\u4e3a Graph \u670d\u52a1\u6240\u5728\u673a\u5668\u7684 CPU \u6838\u5fc3\u4e2a\u6570\u3002\u5173\u4e8e\u914d\u7f6e\u6587\u4ef6\u7684\u8be6\u7ec6\u4fe1\u606f\uff0c\u53c2\u89c1 Graph \u670d\u52a1\u914d\u7f6e\u3002</p>"},{"location":"3.ngql-guide/7.general-query-statements/6.find-path/#_1","title":"\u8bed\u6cd5","text":"<pre><code>FIND { SHORTEST | ALL | NOLOOP } PATH [WITH PROP] FROM &lt;vertex_id_list&gt; TO &lt;vertex_id_list&gt;\nOVER &lt;edge_type_list&gt; [REVERSELY | BIDIRECT] \n[&lt;WHERE clause&gt;] [UPTO &lt;N&gt; {STEP|STEPS}] \nYIELD path as &lt;alias&gt;\n[| ORDER BY $-.path] [| LIMIT &lt;M&gt;];\n\n&lt;vertex_id_list&gt; ::=\n    [vertex_id [, vertex_id] ...]\n</code></pre> <ul> <li><code>SHORTEST</code>\uff1a\u67e5\u627e\u6240\u6709\u6700\u77ed\u8def\u5f84\u3002</li> </ul> <ul> <li><code>ALL</code>\uff1a\u67e5\u627e\u6240\u6709\u8def\u5f84\u3002</li> </ul> <ul> <li><code>NOLOOP</code>\uff1a\u67e5\u627e\u975e\u5faa\u73af\u8def\u5f84\u3002</li> </ul> <ul> <li><code>WITH PROP</code>\uff1a\u5c55\u793a\u70b9\u548c\u8fb9\u7684\u5c5e\u6027\u3002\u4e0d\u6dfb\u52a0\u672c\u53c2\u6570\u5219\u9690\u85cf\u5c5e\u6027\u3002</li> </ul> <ul> <li><code>&lt;vertex_id_list&gt;</code>\uff1a\u70b9 ID \u5217\u8868\u3002\u591a\u4e2a\u70b9\u7528\u82f1\u6587\u9017\u53f7\uff08,\uff09\u5206\u9694\u3002\u652f\u6301<code>$-</code>\u548c<code>$var</code>\u3002</li> </ul> <ul> <li><code>&lt;edge_type_list&gt;</code>\uff1aEdge type \u5217\u8868\u3002\u591a\u4e2a Edge type \u7528\u82f1\u6587\u9017\u53f7\uff08,\uff09\u5206\u9694\u3002<code>*</code>\u8868\u793a\u6240\u6709 Edge type\u3002</li> </ul> <ul> <li><code>REVERSELY | BIDIRECT</code>\uff1a<code>REVERSELY</code>\u8868\u793a\u53cd\u5411\uff0c<code>BIDIRECT</code>\u8868\u793a\u53cc\u5411\u3002</li> </ul> <ul> <li><code>&lt;WHERE clause&gt;</code>\uff1a\u53ef\u4ee5\u4f7f\u7528<code>WHERE</code>\u5b50\u53e5\u8fc7\u6ee4\u8fb9\u5c5e\u6027\u3002</li> </ul> <ul> <li><code>UPTO &lt;N&gt; {STEP|STEPS}</code>\uff1a\u8def\u5f84\u7684\u6700\u5927\u8df3\u6570\u3002\u9ed8\u8ba4\u503c\u4e3a<code>5</code>\u3002</li> </ul> <ul> <li><code>ORDER BY $-.path</code>\uff1a\u5c06\u8fd4\u56de\u7ed3\u679c\u8fdb\u884c\u6392\u5e8f\u3002\u6392\u5e8f\u89c4\u5219\u53c2\u89c1 Path\u3002</li> </ul> <ul> <li><code>LIMIT &lt;M&gt;</code>\uff1a\u6307\u5b9a\u8fd4\u56de\u7684\u6700\u5927\u884c\u6570\u3002</li> </ul> <p>Note</p> <p><code>FIND PATH</code>\u8bed\u53e5\u68c0\u7d22\u7684\u8def\u5f84\u7c7b\u578b\u4e3a<code>trail</code>\uff0c\u5373\u68c0\u7d22\u7684\u8def\u5f84\u53ea\u6709\u70b9\u53ef\u4ee5\u91cd\u590d\uff0c\u8fb9\u4e0d\u53ef\u4ee5\u91cd\u590d\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1\u8def\u5f84\u3002</p>"},{"location":"3.ngql-guide/7.general-query-statements/6.find-path/#_2","title":"\u9650\u5236","text":"<ul> <li>\u6307\u5b9a\u8d77\u59cb\u70b9\u548c\u76ee\u7684\u70b9\u7684\u5217\u8868\u540e\uff0c\u4f1a\u8fd4\u56de\u8d77\u59cb\u70b9\u548c\u76ee\u7684\u70b9\u6240\u6709\u7ec4\u5408\u7684\u8def\u5f84\u3002</li> </ul> <ul> <li>\u641c\u7d22\u6240\u6709\u8def\u5f84\u65f6\u53ef\u80fd\u4f1a\u51fa\u73b0\u5faa\u73af\u3002</li> </ul> <ul> <li>\u4f7f\u7528<code>WHERE</code>\u5b50\u53e5\u65f6\u53ea\u80fd\u8fc7\u6ee4\u8fb9\u5c5e\u6027\uff0c\u6682\u4e0d\u652f\u6301\u8fc7\u6ee4\u70b9\u5c5e\u6027\uff0c\u4e14\u4e0d\u652f\u6301\u51fd\u6570\u3002</li> </ul> <ul> <li>graphd \u662f\u5355\u8fdb\u7a0b\u67e5\u8be2\uff0c\u4f1a\u5360\u7528\u5f88\u591a\u5185\u5b58\u3002</li> </ul>"},{"location":"3.ngql-guide/7.general-query-statements/6.find-path/#_3","title":"\u793a\u4f8b","text":"<p>\u8fd4\u56de\u7684\u8def\u5f84\u683c\u5f0f\u7c7b\u4f3c\u4e8e<code>(&lt;vertex_id&gt;)-[:&lt;edge_type_name&gt;@&lt;rank&gt;]-&gt;(&lt;vertex_id)</code>\u3002</p> <pre><code># \u67e5\u627e\u5e76\u8fd4\u56de player102 \u5230 team204 \u7684\u6700\u77ed\u8def\u5f84\u3002\nnebula&gt; FIND SHORTEST PATH FROM \"player102\" TO \"team204\" OVER * YIELD path AS p;\n+--------------------------------------------+\n| p                                          |\n+--------------------------------------------+\n| &lt;(\"player102\")-[:serve@0 {}]-&gt;(\"team204\")&gt; |\n+--------------------------------------------+\n</code></pre> <pre><code># \u67e5\u627e\u5e76\u8fd4\u56de\u5e26\u5c5e\u6027\u503c\u7684 team204 \u5230 player100 \u7684\u6700\u77ed\u53cd\u5411\u8def\u5f84\u3002\nnebula&gt; FIND SHORTEST PATH WITH PROP FROM \"team204\" TO \"player100\" OVER * REVERSELY YIELD path AS p;\n+--------------------------------------------------------------------------------------------------------------------------------------+\n| p                                                                                                                                    |\n+--------------------------------------------------------------------------------------------------------------------------------------+\n| &lt;(\"team204\" :team{name: \"Spurs\"})&lt;-[:serve@0 {end_year: 2016, start_year: 1997}]-(\"player100\" :player{age: 42, name: \"Tim Duncan\"})&gt; |\n+--------------------------------------------------------------------------------------------------------------------------------------+\n</code></pre> <pre><code># \u67e5\u627e\u5e76\u8fd4\u56de\u8d77\u70b9\u4e3a player100,player130 \u800c\u7ec8\u70b9\u4e3a player132,player133 \u7684 18 \u8df3\u4e4b\u5185\u53cc\u5411\u6700\u77ed\u8def\u5f84\u3002\nnebula&gt; FIND SHORTEST PATH FROM \"player100\", \"player130\" TO \"player132\", \"player133\" OVER * BIDIRECT UPTO 18 STEPS YIELD path as p;\n+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+\n| p                                                                                                                                                                                              |\n+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+\n| &lt;(\"player100\")&lt;-[:follow@0 {}]-(\"player144\")&lt;-[:follow@0 {}]-(\"player133\")&gt;                                                                                                                    |\n| &lt;(\"player100\")-[:serve@0 {}]-&gt;(\"team204\")&lt;-[:serve@0 {}]-(\"player138\")-[:serve@0 {}]-&gt;(\"team225\")&lt;-[:serve@0 {}]-(\"player132\")&gt;                                                                |\n| &lt;(\"player130\")-[:serve@0 {}]-&gt;(\"team219\")&lt;-[:serve@0 {}]-(\"player112\")-[:serve@0 {}]-&gt;(\"team204\")&lt;-[:serve@0 {}]-(\"player114\")&lt;-[:follow@0 {}]-(\"player133\")&gt;                                  |\n| &lt;(\"player130\")-[:serve@0 {}]-&gt;(\"team219\")&lt;-[:serve@0 {}]-(\"player109\")-[:serve@0 {}]-&gt;(\"team204\")&lt;-[:serve@0 {}]-(\"player114\")&lt;-[:follow@0 {}]-(\"player133\")&gt;                                  |\n| &lt;(\"player130\")-[:serve@0 {}]-&gt;(\"team219\")&lt;-[:serve@0 {}]-(\"player104\")-[:serve@20182019 {}]-&gt;(\"team204\")&lt;-[:serve@0 {}]-(\"player114\")&lt;-[:follow@0 {}]-(\"player133\")&gt;                           |\n| ...                                                                                                                                                                                            |\n| &lt;(\"player130\")-[:serve@0 {}]-&gt;(\"team219\")&lt;-[:serve@0 {}]-(\"player112\")-[:serve@0 {}]-&gt;(\"team204\")&lt;-[:serve@0 {}]-(\"player138\")-[:serve@0 {}]-&gt;(\"team225\")&lt;-[:serve@0 {}]-(\"player132\")&gt;        |\n| &lt;(\"player130\")-[:serve@0 {}]-&gt;(\"team219\")&lt;-[:serve@0 {}]-(\"player109\")-[:serve@0 {}]-&gt;(\"team204\")&lt;-[:serve@0 {}]-(\"player138\")-[:serve@0 {}]-&gt;(\"team225\")&lt;-[:serve@0 {}]-(\"player132\")&gt;        |\n| ...                                                                                                                                                                                            |\n+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+\n</code></pre> <pre><code># \u67e5\u627e\u6240\u6709\u4ece player100 \u5230 team204,\u5e76\u4e14 degree \u4e3a\u7a7a\u6216\u8005\u5927\u4e8e\u7b49\u4e8e 0 \u7684\u8def\u5f84\u3002\nnebula&gt; FIND ALL PATH FROM \"player100\" TO \"team204\" OVER * WHERE follow.degree is EMPTY or follow.degree &gt;=0 YIELD path AS p;\n+------------------------------------------------------------------------------+\n| p                                                                            |\n+------------------------------------------------------------------------------+\n| &lt;(\"player100\")-[:serve@0 {}]-&gt;(\"team204\")&gt;                                   |\n| &lt;(\"player100\")-[:follow@0 {}]-&gt;(\"player125\")-[:serve@0 {}]-&gt;(\"team204\")&gt;     |\n| &lt;(\"player100\")-[:follow@0 {}]-&gt;(\"player101\")-[:serve@0 {}]-&gt;(\"team204\")&gt;     |\n| ...                                                                          |\n+------------------------------------------------------------------------------+\n</code></pre> <pre><code># \u67e5\u627e\u6240\u6709\u4ece player100 \u5230 team204 \u65e0\u73af\u8def\u5f84\u3002\nnebula&gt; FIND NOLOOP PATH FROM \"player100\" TO \"team204\" OVER * YIELD path AS p;\n+--------------------------------------------------------------------------------------------------------+\n| p                                                                                                      |\n+--------------------------------------------------------------------------------------------------------+\n| &lt;(\"player100\")-[:serve@0 {}]-&gt;(\"team204\")&gt;                                                             |\n| &lt;(\"player100\")-[:follow@0 {}]-&gt;(\"player125\")-[:serve@0 {}]-&gt;(\"team204\")&gt;                               |\n| &lt;(\"player100\")-[:follow@0 {}]-&gt;(\"player101\")-[:serve@0 {}]-&gt;(\"team204\")&gt;                               |\n| &lt;(\"player100\")-[:follow@0 {}]-&gt;(\"player101\")-[:follow@0 {}]-&gt;(\"player125\")-[:serve@0 {}]-&gt;(\"team204\")&gt; |\n| &lt;(\"player100\")-[:follow@0 {}]-&gt;(\"player101\")-[:follow@0 {}]-&gt;(\"player102\")-[:serve@0 {}]-&gt;(\"team204\")&gt; |\n| ...                                                                                                    |\n+--------------------------------------------------------------------------------------------------------+\n</code></pre>"},{"location":"3.ngql-guide/7.general-query-statements/6.find-path/#faq","title":"FAQ","text":""},{"location":"3.ngql-guide/7.general-query-statements/6.find-path/#where","title":"\u662f\u5426\u652f\u6301 WHERE \u5b50\u53e5\uff0c\u4ee5\u5b9e\u73b0\u56fe\u904d\u5386\u8fc7\u7a0b\u4e2d\u7684\u6761\u4ef6\u8fc7\u6ee4\uff1f","text":"<p>\u652f\u6301\u4f7f\u7528<code>WHERE</code>\u5b50\u53e5\u8fc7\u6ee4\uff0c\u4f46\u53ea\u80fd\u8fc7\u6ee4\u8fb9\u5c5e\u6027\uff0c\u4e0d\u652f\u6301\u8fc7\u6ee4\u70b9\u5c5e\u6027\u3002</p> <p>\u5982\u793a\u4f8b\u4e2d\u7684 <code>WHERE follow.degree is EMPTY or follow.degree &gt;= 0</code>\u3002</p>"},{"location":"3.ngql-guide/7.general-query-statements/7.get-subgraph/","title":"GET SUBGRAPH","text":"<p><code>GET SUBGRAPH</code>\u8bed\u53e5\u67e5\u8be2\u5e76\u8fd4\u56de\u4e00\u4e2a\u901a\u8fc7\u4ece\u6307\u5b9a\u70b9\u51fa\u53d1\u5bf9\u56fe\u8fdb\u884c\u6e38\u8d70\u800c\u751f\u6210\u7684\u5b50\u56fe\u3002\u5728<code>GET SUBGRAPH</code>\u8bed\u53e5\u4e2d\uff0c\u7528\u6237\u53ef\u4ee5\u6307\u5b9a\u6e38\u8d70\u7684\u6b65\u6570\u4ee5\u53ca\u6e38\u8d70\u6240\u7ecf\u8fc7\u7684\u8fb9\u7684\u7c7b\u578b\u6216\u65b9\u5411\u3002</p>"},{"location":"3.ngql-guide/7.general-query-statements/7.get-subgraph/#_1","title":"\u8bed\u6cd5","text":"<pre><code>GET SUBGRAPH [WITH PROP] [&lt;step_count&gt; {STEP|STEPS}] FROM {&lt;vid&gt;, &lt;vid&gt;...}\n[{IN | OUT | BOTH} &lt;edge_type&gt;, &lt;edge_type&gt;...]\n[WHERE &lt;expression&gt; [AND &lt;expression&gt; ...]]\nYIELD [VERTICES AS &lt;vertex_alias&gt;] [, EDGES AS &lt;edge_alias&gt;];\n</code></pre> <ul> <li><code>WITH PROP</code>\uff1a\u5c55\u793a\u5c5e\u6027\u3002\u4e0d\u6dfb\u52a0\u672c\u53c2\u6570\u5219\u9690\u85cf\u5c5e\u6027\u3002</li> </ul> <ul> <li><code>step_count</code>\uff1a\u6307\u5b9a\u4ece\u8d77\u59cb\u70b9\u5f00\u59cb\u7684\u8df3\u6570\uff0c\u8fd4\u56de\u4ece 0 \u5230<code>step_count</code>\u8df3\u7684\u5b50\u56fe\u3002\u5fc5\u987b\u662f\u975e\u8d1f\u6574\u6570\u3002\u9ed8\u8ba4\u503c\u4e3a 1\u3002</li> </ul> <ul> <li><code>vid</code>\uff1a\u6307\u5b9a\u8d77\u59cb\u70b9 ID\u3002</li> </ul> <ul> <li><code>edge_type</code>\uff1a\u6307\u5b9a Edge type\u3002\u53ef\u4ee5\u7528<code>IN</code>\u3001<code>OUT</code>\u548c<code>BOTH</code>\u6765\u6307\u5b9a\u8d77\u59cb\u70b9\u4e0a\u8be5 Edge type \u7684\u65b9\u5411\u3002\u9ed8\u8ba4\u4e3a<code>BOTH</code>\u3002</li> </ul> <ul> <li><code>WHERE</code>\uff1a\u6307\u5b9a\u904d\u5386\u7684\u8fc7\u6ee4\u6761\u4ef6\uff0c\u53ef\u4ee5\u7ed3\u5408\u5e03\u5c14\u8fd0\u7b97\u7b26 AND \u4f7f\u7528\u3002</li> </ul> <ul> <li><code>YIELD</code>\uff1a\u5b9a\u4e49\u9700\u8981\u8fd4\u56de\u7684\u8f93\u51fa\u3002\u53ef\u4ee5\u4ec5\u8fd4\u56de\u70b9\u6216\u8fb9\u3002\u5fc5\u987b\u8bbe\u7f6e\u522b\u540d\u3002</li> </ul> <p>Note</p> <p><code>GET SUBGRAPH</code>\u8bed\u53e5\u68c0\u7d22\u7684\u8def\u5f84\u7c7b\u578b\u4e3a<code>trail</code>\uff0c\u5373\u68c0\u7d22\u7684\u8def\u5f84\u53ea\u6709\u70b9\u53ef\u4ee5\u91cd\u590d\uff0c\u8fb9\u4e0d\u53ef\u4ee5\u91cd\u590d\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1\u8def\u5f84\u3002</p>"},{"location":"3.ngql-guide/7.general-query-statements/7.get-subgraph/#where","title":"WHERE \u8bed\u53e5\u9650\u5236","text":"<p>\u5728<code>GET SUBGRAPH</code>\u8bed\u53e5\u4e2d\u4f7f\u7528<code>WHERE</code>\u5b50\u53e5\uff0c\u6ce8\u610f\u4ee5\u4e0b\u9650\u5236\uff1a</p> <ul> <li>\u4ec5\u652f\u6301<code>AND</code>\u8fd0\u7b97\u7b26\u3002</li> <li>\u4ec5\u652f\u6301\u8fc7\u6ee4\u76ee\u7684\u70b9\uff0c\u70b9\u7684\u683c\u5f0f\u4e3a<code>$$.tagName.propName</code>\u3002</li> <li>\u652f\u6301\u8fc7\u6ee4\u8fb9\uff0c\u8fb9\u7684\u683c\u5f0f\u4e3a<code>edge_type.propName</code>\u3002</li> <li>\u652f\u6301\u6570\u5b66\u51fd\u6570\u3001\u805a\u5408\u51fd\u6570\u3001\u5b57\u7b26\u4e32\u51fd\u6570\u3001\u65e5\u671f\u65f6\u95f4\u51fd\u6570\u3001\u5217\u8868\u51fd\u6570\u4e2d\u7684\u901a\u7528\u51fd\u6570\u548c\u7c7b\u578b\u8f6c\u5316\u51fd\u6570\u3002</li> <li>\u4e0d\u652f\u6301\u805a\u5408\u51fd\u6570\u3001Schema \u76f8\u5173\u51fd\u6570\u3001\u6761\u4ef6\u8868\u8fbe\u5f0f\u51fd\u6570\u3001\u8c13\u8bcd\u51fd\u6570\u3001geo \u51fd\u6570\u548c\u81ea\u5b9a\u4e49\u51fd\u6570\uff0c\u5217\u8868\u51fd\u6570\u4e2d\u9664\u901a\u7528\u51fd\u6570\u4ee5\u5916\u7684\u51fd\u6570\u3002</li> </ul>"},{"location":"3.ngql-guide/7.general-query-statements/7.get-subgraph/#_2","title":"\u793a\u4f8b","text":"<p>\u4ee5\u4e0b\u9762\u7684\u793a\u4f8b\u56fe\u8fdb\u884c\u6f14\u793a\u3002</p> <p></p> <p>\u63d2\u5165\u6d4b\u8bd5\u6570\u636e\uff1a</p> <pre><code>nebula&gt; CREATE SPACE IF NOT EXISTS subgraph(partition_num=15, replica_factor=1, vid_type=fixed_string(30));\nnebula&gt; USE subgraph;\nnebula&gt; CREATE TAG IF NOT EXISTS player(name string, age int);\nnebula&gt; CREATE TAG IF NOT EXISTS team(name string);\nnebula&gt; CREATE EDGE IF NOT EXISTS follow(degree int);\nnebula&gt; CREATE EDGE IF NOT EXISTS serve(start_year int, end_year int);\nnebula&gt; INSERT VERTEX player(name, age) VALUES \"player100\":(\"Tim Duncan\", 42);\nnebula&gt; INSERT VERTEX player(name, age) VALUES \"player101\":(\"Tony Parker\", 36);\nnebula&gt; INSERT VERTEX player(name, age) VALUES \"player102\":(\"LaMarcus Aldridge\", 33);\nnebula&gt; INSERT VERTEX team(name) VALUES \"team203\":(\"Trail Blazers\"), \"team204\":(\"Spurs\");\nnebula&gt; INSERT EDGE follow(degree) VALUES \"player101\" -&gt; \"player100\":(95);\nnebula&gt; INSERT EDGE follow(degree) VALUES \"player101\" -&gt; \"player102\":(90);\nnebula&gt; INSERT EDGE follow(degree) VALUES \"player102\" -&gt; \"player100\":(75);\nnebula&gt; INSERT EDGE serve(start_year, end_year) VALUES \"player101\" -&gt; \"team204\":(1999, 2018),\"player102\" -&gt; \"team203\":(2006,  2015);\n</code></pre> <ul> <li>\u67e5\u8be2\u4ece\u70b9<code>player101</code>\u5f00\u59cb\u30010~1 \u8df3\u3001\u6240\u6709 Edge type \u7684\u5b50\u56fe\u3002<pre><code>nebula&gt; GET SUBGRAPH 1 STEPS FROM \"player101\" YIELD VERTICES AS nodes, EDGES AS relationships;\n+-------------------------------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------+\n| nodes                                                                   | relationships                                                                                                               |\n+-------------------------------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------+\n| [(\"player101\" :player{})]                                               | [[:serve \"player101\"-&gt;\"team204\" @0 {}], [:follow \"player101\"-&gt;\"player100\" @0 {}], [:follow \"player101\"-&gt;\"player102\" @0 {}]] |\n| [(\"team204\" :team{}), (\"player100\" :player{}), (\"player102\" :player{})] | [[:follow \"player102\"-&gt;\"player100\" @0 {}]]                                                                                  |\n+-------------------------------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------+\n</code></pre> <p>\u8fd4\u56de\u7684\u5b50\u56fe\u5982\u4e0b\u3002</p> <p></p> </li> </ul> <ul> <li>\u67e5\u8be2\u4ece\u70b9<code>player101</code>\u5f00\u59cb\u30010~1 \u8df3\u3001<code>follow</code>\u7c7b\u578b\u7684\u5165\u8fb9\u7684\u5b50\u56fe\u3002<pre><code>nebula&gt; GET SUBGRAPH 1 STEPS FROM \"player101\" IN follow YIELD VERTICES AS nodes, EDGES AS relationships;\n+---------------------------+---------------+\n| nodes                     | relationships |\n+---------------------------+---------------+\n| [(\"player101\" :player{})] | []            |\n+---------------------------+---------------+\n</code></pre> <p>\u56e0\u4e3a<code>player101</code>\u6ca1\u6709<code>follow</code>\u7c7b\u578b\u7684\u5165\u8fb9\u3002\u6240\u4ee5\u4ec5\u8fd4\u56de\u70b9<code>player101</code>\u3002</p> </li> </ul> <ul> <li>\u67e5\u8be2\u4ece\u70b9<code>player101</code>\u5f00\u59cb\u30010~1 \u8df3\u3001<code>serve</code>\u7c7b\u578b\u7684\u51fa\u8fb9\u7684\u5b50\u56fe\uff0c\u540c\u65f6\u5c55\u793a\u8fb9\u7684\u5c5e\u6027\u3002<pre><code>nebula&gt; GET SUBGRAPH WITH PROP 1 STEPS FROM \"player101\" OUT serve YIELD VERTICES AS nodes, EDGES AS relationships;\n+-------------------------------------------------------+-------------------------------------------------------------------------+\n| nodes                                                 | relationships                                                           |\n+-------------------------------------------------------+-------------------------------------------------------------------------+\n| [(\"player101\" :player{age: 36, name: \"Tony Parker\"})] | [[:serve \"player101\"-&gt;\"team204\" @0 {end_year: 2018, start_year: 1999}]] |\n| [(\"team204\" :team{name: \"Spurs\"})]                    | []                                                                      |\n+-------------------------------------------------------+-------------------------------------------------------------------------+\n</code></pre> <p>\u8fd4\u56de\u7684\u5b50\u56fe\u5982\u4e0b\u3002</p> <p></p> </li> </ul> <ul> <li>\u67e5\u8be2\u4ece\u70b9<code>player101</code>\u5f00\u59cb\u30010~2 \u8df3\u3001<code>follow</code>\u7c7b\u578b\u8fb9<code>degree</code>\u5927\u4e8e 90\uff0c\u5e74\u9f84\u5927\u4e8e 30 \u7684\u5b50\u56fe\uff0c\u540c\u65f6\u5c55\u793a\u8fb9\u7684\u5c5e\u6027\u3002<pre><code>nebula&gt; GET SUBGRAPH WITH PROP 2 STEPS FROM \"player101\" \\\n    WHERE follow.degree &gt; 90 AND $$.player.age &gt; 30 \\\n    YIELD VERTICES AS nodes, EDGES AS relationships;\n+-------------------------------------------------------+------------------------------------------------------+\n| nodes                                                 | relationships                                        |\n+-------------------------------------------------------+------------------------------------------------------+\n| [(\"player101\" :player{age: 36, name: \"Tony Parker\"})] | [[:follow \"player101\"-&gt;\"player100\" @0 {degree: 95}]] |\n| [(\"player100\" :player{age: 42, name: \"Tim Duncan\"})]  | []                                                   |\n+-------------------------------------------------------+------------------------------------------------------+\n</code></pre> </li> </ul>"},{"location":"3.ngql-guide/7.general-query-statements/7.get-subgraph/#faq","title":"FAQ","text":""},{"location":"3.ngql-guide/7.general-query-statements/7.get-subgraph/#step_count","title":"\u4e3a\u4ec0\u4e48\u8fd4\u56de\u7ed3\u679c\u4e2d\u4f1a\u51fa\u73b0\u8d85\u51fa<code>step_count</code>\u8df3\u6570\u4e4b\u5916\u7684\u5173\u7cfb\uff1f","text":"<p>\u4e3a\u4e86\u5c55\u793a\u5b50\u56fe\u7684\u5b8c\u6574\u6027\uff0c\u4f1a\u5728\u6ee1\u8db3\u6761\u4ef6\u7684\u6240\u6709\u70b9\u4e0a\u989d\u5916\u67e5\u8be2\u4e00\u8df3\u3002\u4f8b\u5982\u4e0b\u56fe\u3002</p> <p></p> <ul> <li>\u7528<code>GET SUBGRAPH 1 STEPS FROM \"A\";</code>\u67e5\u8be2\u7684\u6ee1\u8db3\u7ed3\u679c\u7684\u8def\u5f84\u662f<code>A-&gt;B</code>\u3001<code>B-&gt;A</code>\u548c<code>A-&gt;C</code>\uff0c\u4e3a\u4e86\u5b50\u56fe\u7684\u5b8c\u6574\u6027\uff0c\u4f1a\u5728\u6ee1\u8db3\u7ed3\u679c\u7684\u70b9\u4e0a\u989d\u5916\u67e5\u8be2\u4e00\u8df3\uff0c\u5373<code>B-&gt;C</code>\u3002</li> </ul> <ul> <li>\u7528<code>GET SUBGRAPH 1 STEPS FROM \"A\" IN follow;</code>\u67e5\u8be2\u7684\u6ee1\u8db3\u7ed3\u679c\u7684\u8def\u5f84\u662f<code>B-&gt;A</code>\uff0c\u5728\u6ee1\u8db3\u7ed3\u679c\u7684\u70b9\u4e0a\u989d\u5916\u67e5\u8be2\u4e00\u8df3\uff0c\u5373<code>A-&gt;B</code>\u3002</li> </ul> <p>\u5982\u679c\u53ea\u662f\u67e5\u8be2\u6ee1\u8db3\u6761\u4ef6\u7684\u8def\u5f84\u6216\u70b9\uff0c\u5efa\u8bae\u4f7f\u7528 MATCH \u6216 GO \u8bed\u53e5\u3002\u4f8b\u5982\uff1a</p> <pre><code>nebula&gt; MATCH p= (v:player) -- (v2) WHERE id(v)==\"A\" RETURN p;\n\nnebula&gt; GO 1 STEPS FROM \"A\" OVER follow YIELD src(edge),dst(edge);\n</code></pre>"},{"location":"3.ngql-guide/7.general-query-statements/7.get-subgraph/#step_count_1","title":"\u4e3a\u4ec0\u4e48\u8fd4\u56de\u7ed3\u679c\u4e2d\u4f1a\u51fa\u73b0\u4f4e\u4e8e<code>step_count</code>\u8df3\u6570\u7684\u5173\u7cfb\uff1f","text":"<p>\u67e5\u8be2\u5230\u6ca1\u6709\u591a\u4f59\u5b50\u56fe\u6570\u636e\u65f6\u4f1a\u505c\u6b62\u67e5\u8be2\uff0c\u4e14\u4e0d\u4f1a\u8fd4\u56de\u7a7a\u503c\u3002</p> <pre><code># \u67e5\u8be2\u4ece\u70b9 player101 \u5f00\u59cb\u30010~100 \u8df3\u3001follow \u7c7b\u578b\u7684\u51fa\u8fb9\u7684\u5b50\u56fe\u3002\nnebula&gt; GET SUBGRAPH 100 STEPS FROM \"player101\" OUT follow YIELD VERTICES AS nodes, EDGES AS relationships;\n+----------------------------------------------------+--------------------------------------------------------------------------------------+\n| nodes                                              | relationships                                                                        |\n+----------------------------------------------------+--------------------------------------------------------------------------------------+\n| [(\"player101\" :player{})]                          | [[:follow \"player101\"-&gt;\"player100\" @0 {}], [:follow \"player101\"-&gt;\"player102\" @0 {}]] |\n| [(\"player100\" :player{}), (\"player102\" :player{})] | [[:follow \"player102\"-&gt;\"player100\" @0 {}]]                                           |\n+----------------------------------------------------+--------------------------------------------------------------------------------------+\n</code></pre>"},{"location":"3.ngql-guide/7.general-query-statements/optional-match/","title":"OPTIONAL MATCH","text":"<p>Caution</p> <p>\u76ee\u524d <code>OPTIONAL MATCH</code> \u4e3a Beta \u529f\u80fd\uff0c\u540e\u7eed\u53ef\u80fd\u4f1a\u6709\u4e00\u5b9a\u4f18\u5316\u8c03\u6574\u3002</p> <p><code>OPTIONAL MATCH</code>\u901a\u5e38\u4e0e<code>MATCH</code>\u8bed\u53e5\u4e00\u8d77\u4f7f\u7528\uff0c\u4f5c\u4e3a<code>MATCH</code>\u8bed\u53e5\u7684\u53ef\u9009\u9879\u53bb\u5339\u914d\u547d\u4e2d\u7684\u6a21\u5f0f\uff0c\u5982\u679c\u6ca1\u6709\u547d\u4e2d\u5bf9\u5e94\u7684\u6a21\u5f0f\uff0c\u5bf9\u5e94\u7684\u5217\u8fd4\u56de<code>NULL</code>\u3002</p>"},{"location":"3.ngql-guide/7.general-query-statements/optional-match/#opencypher","title":"openCypher \u517c\u5bb9\u6027","text":"<p>\u672c\u6587\u64cd\u4f5c\u4ec5\u9002\u7528\u4e8e nGQL \u4e2d\u7684 openCypher \u65b9\u5f0f\u3002</p>"},{"location":"3.ngql-guide/7.general-query-statements/optional-match/#_1","title":"\u4f7f\u7528\u9650\u5236","text":"<p><code>OPTIONAL MATCH</code>\u5b50\u53e5\u4e2d\u6682\u4e0d\u652f\u6301\u4f7f\u7528<code>WHERE</code>\u5b50\u53e5\u3002</p>"},{"location":"3.ngql-guide/7.general-query-statements/optional-match/#_2","title":"\u793a\u4f8b","text":"<p><code>MATCH</code>\u8bed\u53e5\u4e2d\u4f7f\u7528<code>OPTIONAL MATCH</code>\u7684\u793a\u4f8b\u5982\u4e0b\uff1a</p> <pre><code># \u627e\u51fa\u7279\u5b9a\u8282\u70b9 m\uff08ID\u4e3a \"player100\" \u7684\u8282\u70b9\uff09\u76f4\u63a5\u8fde\u63a5\u7684\u8282\u70b9\uff0c\u4ee5\u53ca\u8fd9\u4e9b\u8282\u70b9 n \u76f4\u8fde\u7684\u4e0b\u4e00\u5c42\u8282\u70b9 l (OPTIONAL MATCH (n)-[]-&gt;(l))\uff0c \u5982\u679c\u6ca1\u6709\u627e\u5230\u8fd9\u6837\u7684\u8282\u70b9 l\uff0c\u67e5\u8be2\u4e5f\u4f1a\u7ee7\u7eed\uff0c l \u7684\u8fd4\u56de\u503c\u662f null\u3002\nnebula&gt; MATCH (m)-[]-&gt;(n) WHERE id(m)==\"player100\" \\\n        OPTIONAL MATCH (n)-[]-&gt;(l) \\\n        RETURN id(m),id(n),id(l);\n+-------------+-------------+-------------+\n| id(m)       | id(n)       | id(l)       |\n+-------------+-------------+-------------+\n| \"player100\" | \"team204\"   | __NULL__    |\n| \"player100\" | \"player101\" | \"team204\"   |\n| \"player100\" | \"player101\" | \"team215\"   |\n| \"player100\" | \"player101\" | \"player100\" |\n| \"player100\" | \"player101\" | \"player102\" |\n| \"player100\" | \"player101\" | \"player125\" |\n| \"player100\" | \"player125\" | \"team204\"   |\n| \"player100\" | \"player125\" | \"player100\" |\n+-------------+-------------+-------------+\n</code></pre> <p>\u800c\u4f7f\u7528\u591a<code>MATCH</code>\uff0c\u4e0d\u4f7f\u7528<code>OPTIONAL MATCH</code>\u65f6\uff0c\u4f1a\u8fd4\u56de\u6a21\u5f0f\u5b8c\u5168\u5339\u914d\u7684\u884c\u3002\u793a\u4f8b\u5982\u4e0b\uff1a</p> <pre><code># \u627e\u51fa\u7279\u5b9a\u8282\u70b9 m\uff08ID\u4e3a \"player100\" \u7684\u8282\u70b9\uff09\u76f4\u63a5\u8fde\u63a5\u7684\u8282\u70b9\uff0c\u4ee5\u53ca\u8fd9\u4e9b\u8282\u70b9 n \u76f4\u8fde\u7684\u4e0b\u4e00\u5c42\u8282\u70b9 l, \u8282\u70b9 l \u5fc5\u987b\u5b58\u5728\u3002\nnebula&gt; MATCH (m)-[]-&gt;(n) WHERE id(m)==\"player100\" \\\n        MATCH (n)-[]-&gt;(l) \\\n        RETURN id(m),id(n),id(l);\n+-------------+-------------+-------------+\n| id(m)       | id(n)       | id(l)       |\n+-------------+-------------+-------------+\n| \"player100\" | \"player101\" | \"team204\"   |\n| \"player100\" | \"player101\" | \"team215\"   |\n| \"player100\" | \"player101\" | \"player100\" |\n| \"player100\" | \"player101\" | \"player102\" |\n| \"player100\" | \"player101\" | \"player125\" |\n| \"player100\" | \"player125\" | \"team204\"   |\n| \"player100\" | \"player125\" | \"player100\" |\n+-------------+-------------+-------------+\n</code></pre>"},{"location":"3.ngql-guide/7.general-query-statements/6.show/1.show-charset/","title":"SHOW CHARSET","text":"<p><code>SHOW CHARSET</code>\u8bed\u53e5\u663e\u793a\u5f53\u524d\u7684\u5b57\u7b26\u96c6\u3002</p> <p>\u76ee\u524d\u53ef\u7528\u7684\u5b57\u7b26\u96c6\u4e3a<code>utf8</code>\u548c<code>utf8mb4</code>\u3002\u9ed8\u8ba4\u5b57\u7b26\u96c6\u4e3a<code>utf8</code>\u3002 NebulaGraph \u6269\u5c55<code>uft8</code>\u652f\u6301\u56db\u5b57\u8282\u5b57\u7b26\uff0c\u56e0\u6b64<code>utf8</code>\u548c<code>utf8mb4</code>\u662f\u7b49\u4ef7\u7684\u3002</p>"},{"location":"3.ngql-guide/7.general-query-statements/6.show/1.show-charset/#_1","title":"\u8bed\u6cd5","text":"<pre><code>SHOW CHARSET;\n</code></pre>"},{"location":"3.ngql-guide/7.general-query-statements/6.show/1.show-charset/#_2","title":"\u793a\u4f8b","text":"<pre><code>nebula&gt; SHOW CHARSET;\n+---------+-----------------+-------------------+--------+\n| Charset | Description     | Default collation | Maxlen |\n+---------+-----------------+-------------------+--------+\n| \"utf8\"  | \"UTF-8 Unicode\" | \"utf8_bin\"        | 4      |\n+---------+-----------------+-------------------+--------+\n</code></pre> \u53c2\u6570 \u8bf4\u660e <code>Charset</code> \u5b57\u7b26\u96c6\u540d\u79f0\u3002 <code>Description</code> \u5b57\u7b26\u96c6\u8bf4\u660e\u3002 <code>Default collation</code> \u9ed8\u8ba4\u6392\u5e8f\u89c4\u5219\u3002 <code>Maxlen</code> \u5b58\u50a8\u4e00\u4e2a\u5b57\u7b26\u6240\u9700\u7684\u6700\u5927\u5b57\u8282\u6570\u3002"},{"location":"3.ngql-guide/7.general-query-statements/6.show/10.show-roles/","title":"SHOW ROLES","text":"<p><code>SHOW ROLES</code>\u8bed\u53e5\u663e\u793a\u5206\u914d\u7ed9\u7528\u6237\u7684\u89d2\u8272\u4fe1\u606f\u3002</p> <p>\u6839\u636e\u767b\u5f55\u7684\u7528\u6237\u89d2\u8272\uff0c\u8fd4\u56de\u7684\u7ed3\u679c\u4e5f\u6709\u6240\u4e0d\u540c\uff1a</p> <ul> <li>\u5982\u679c\u767b\u5f55\u7684\u7528\u6237\u89d2\u8272\u662f<code>GOD</code>\uff0c\u6216\u8005\u6709\u6743\u8bbf\u95ee\u8be5\u56fe\u7a7a\u95f4\u7684<code>ADMIN</code>\uff0c\u5219\u8fd4\u56de\u8be5\u56fe\u7a7a\u95f4\u5185\u9664<code>GOD</code>\u4e4b\u5916\u7684\u6240\u6709\u7528\u6237\u89d2\u8272\u4fe1\u606f\u3002</li> </ul> <ul> <li>\u5982\u679c\u767b\u5f55\u7684\u7528\u6237\u89d2\u8272\u662f\u6709\u6743\u8bbf\u95ee\u8be5\u56fe\u7a7a\u95f4<code>DBA</code>\u3001<code>USER</code>\u6216<code>GUEST</code>\uff0c\u5219\u8fd4\u56de\u81ea\u8eab\u7684\u89d2\u8272\u4fe1\u606f\u3002</li> </ul> <ul> <li>\u5982\u679c\u767b\u5f55\u7684\u7528\u6237\u89d2\u8272\u6ca1\u6709\u6743\u9650\u8bbf\u95ee\u8be5\u56fe\u7a7a\u95f4\uff0c\u5219\u8fd4\u56de\u6743\u9650\u9519\u8bef\u3002</li> </ul> <p>\u5173\u4e8e\u89d2\u8272\u7684\u8be6\u60c5\u8bf7\u53c2\u89c1\u5185\u7f6e\u89d2\u8272\u6743\u9650\u3002</p>"},{"location":"3.ngql-guide/7.general-query-statements/6.show/10.show-roles/#_1","title":"\u8bed\u6cd5","text":"<pre><code>SHOW ROLES IN &lt;space_name&gt;;\n</code></pre>"},{"location":"3.ngql-guide/7.general-query-statements/6.show/10.show-roles/#_2","title":"\u793a\u4f8b","text":"<pre><code>nebula&gt; SHOW ROLES in basketballplayer;\n+---------+-----------+\n| Account | Role Type |\n+---------+-----------+\n| \"user1\" | \"ADMIN\"   |\n+---------+-----------+\n</code></pre>"},{"location":"3.ngql-guide/7.general-query-statements/6.show/11.show-snapshots/","title":"SHOW SNAPSHOTS","text":"<p><code>SHOW SNAPSHOTS</code>\u8bed\u53e5\u663e\u793a\u6240\u6709\u5feb\u7167\u4fe1\u606f\u3002</p> <p>\u5feb\u7167\u7684\u4f7f\u7528\u65b9\u5f0f\u8bf7\u53c2\u89c1\u7ba1\u7406\u5feb\u7167\u3002</p>"},{"location":"3.ngql-guide/7.general-query-statements/6.show/11.show-snapshots/#_1","title":"\u89d2\u8272\u8981\u6c42","text":"<p>\u53ea\u6709<code>GOD</code>\u89d2\u8272\u7684\u7528\u6237\uff08\u5373<code>root</code>\uff09\u624d\u80fd\u6267\u884c<code>SHOW SNAPSHOTS</code>\u8bed\u53e5\u3002</p>"},{"location":"3.ngql-guide/7.general-query-statements/6.show/11.show-snapshots/#_2","title":"\u8bed\u6cd5","text":"<pre><code>SHOW SNAPSHOTS;\n</code></pre>"},{"location":"3.ngql-guide/7.general-query-statements/6.show/11.show-snapshots/#_3","title":"\u793a\u4f8b","text":"<pre><code>nebula&gt; SHOW SNAPSHOTS;\n+--------------------------------+---------+-----------------------------------------------------+\n| Name                           | Status  | Hosts                                               |\n+--------------------------------+---------+-----------------------------------------------------+\n| \"SNAPSHOT_2020_12_16_11_13_55\" | \"VALID\" | \"storaged0:9779, storaged1:9779, storaged2:9779\"    |\n| \"SNAPSHOT_2020_12_16_11_14_10\" | \"VALID\" | \"storaged0:9779, storaged1:9779, storaged2:9779\"    |\n+--------------------------------+---------+-----------------------------------------------------+\n</code></pre>"},{"location":"3.ngql-guide/7.general-query-statements/6.show/12.show-spaces/","title":"SHOW SPACES","text":"<p><code>SHOW SPACES</code>\u8bed\u53e5\u663e\u793a\u73b0\u5b58\u7684\u56fe\u7a7a\u95f4\u3002</p> <p>\u5982\u4f55\u521b\u5efa\u56fe\u7a7a\u95f4\uff0c\u8bf7\u53c2\u89c1 CREATE SPACE\u3002</p>"},{"location":"3.ngql-guide/7.general-query-statements/6.show/12.show-spaces/#_1","title":"\u8bed\u6cd5","text":"<pre><code>SHOW SPACES;\n</code></pre>"},{"location":"3.ngql-guide/7.general-query-statements/6.show/12.show-spaces/#_2","title":"\u793a\u4f8b","text":"<pre><code>nebula&gt; SHOW SPACES;\n+---------------------+\n| Name                |\n+---------------------+\n| \"docs\"              |\n| \"basketballplayer\"  |\n+---------------------+\n</code></pre>"},{"location":"3.ngql-guide/7.general-query-statements/6.show/14.show-stats/","title":"SHOW STATS","text":"<p><code>SHOW STATS</code>\u8bed\u53e5\u663e\u793a\u6700\u8fd1\u4e00\u6b21<code>SUBMIT JOB STATS</code>\u4f5c\u4e1a\u6536\u96c6\u7684\u56fe\u7a7a\u95f4\u7edf\u8ba1\u4fe1\u606f\u3002</p> <p>\u56fe\u7a7a\u95f4\u7edf\u8ba1\u4fe1\u606f\u5305\u542b\uff1a</p> <ul> <li>\u70b9\u7684\u603b\u6570</li> <li>\u8fb9\u7684\u603b\u6570</li> <li>\u6bcf\u4e2a Tag \u5173\u8054\u7684\u70b9\u7684\u603b\u6570</li> <li>\u6bcf\u4e2a Edge type \u5173\u8054\u7684\u8fb9\u7684\u603b\u6570</li> </ul> <p>Warning</p> <p><code>SHOW STATS</code>\u8fd4\u56de\u7684\u4e0d\u662f\u5b9e\u65f6\u6570\u636e\u3002\u56e0\u4e3a\u8fd4\u56de\u7684\u6570\u636e\u662f\u6700\u8fd1\u4e00\u6b21 SUBMIT JOB STATS \u4f5c\u4e1a\u6536\u96c6\u7684\u6570\u636e\u3002\u8fd4\u56de\u7684\u6570\u636e\u53ef\u80fd\u5305\u542b TTL \u8fc7\u671f\u6570\u636e\uff0c\u8be5\u8fc7\u671f\u6570\u636e\u4f1a\u5728\u4e0b\u6b21\u6267\u884c Compaction \u64cd\u4f5c\u65f6\u88ab\u5220\u9664\u5e76\u4e0d\u7eb3\u5165\u7edf\u8ba1\u3002</p>"},{"location":"3.ngql-guide/7.general-query-statements/6.show/14.show-stats/#_1","title":"\u524d\u63d0\u6761\u4ef6","text":"<p>\u5728\u9700\u8981\u67e5\u770b\u7edf\u8ba1\u4fe1\u606f\u7684\u56fe\u7a7a\u95f4\u4e2d\u6267\u884c<code>SUBMIT JOB STATS</code>\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1 SUBMIT JOB STATS\u3002</p> <p>Caution</p> <p><code>SHOW STATS</code>\u7684\u7ed3\u679c\u53d6\u51b3\u4e8e\u6700\u540e\u4e00\u6b21\u6267\u884c\u7684<code>SUBMIT JOB STATS</code>\u3002\u5982\u679c\u53d1\u751f\u8fc7\u65b0\u7684\u5199\u5165\u6216\u8005\u66f4\u6539\uff0c\u5fc5\u987b\u518d\u6b21\u6267\u884c<code>SUBMIT JOB STATS</code>\uff0c\u5426\u5219\u7edf\u8ba1\u6570\u636e\u6709\u9519\u8bef\u3002</p>"},{"location":"3.ngql-guide/7.general-query-statements/6.show/14.show-stats/#_2","title":"\u8bed\u6cd5","text":"<pre><code>SHOW STATS;\n</code></pre>"},{"location":"3.ngql-guide/7.general-query-statements/6.show/14.show-stats/#_3","title":"\u793a\u4f8b","text":"<pre><code># \u9009\u62e9\u56fe\u7a7a\u95f4\u3002\nnebula&gt; USE basketballplayer;\n\n# \u6267\u884c SUBMIT JOB STATS\u3002\nnebula&gt; SUBMIT JOB STATS;\n+------------+\n| New Job Id |\n+------------+\n| 98         |\n+------------+\n\n# \u786e\u8ba4\u4f5c\u4e1a\u6267\u884c\u6210\u529f\u3002\nnebula&gt; SHOW JOB 98;\n+----------------+---------------+------------+----------------------------+----------------------------+-------------+\n| Job Id(TaskId) | Command(Dest) | Status     | Start Time                 | Stop Time                  | Error Code  |\n+----------------+---------------+------------+----------------------------+----------------------------+-------------+\n| 98             | \"STATS\"       | \"FINISHED\" | 2021-11-01T09:33:21.000000 | 2021-11-01T09:33:21.000000 | \"SUCCEEDED\" |\n| 0              | \"storaged2\"   | \"FINISHED\" | 2021-11-01T09:33:21.000000 | 2021-11-01T09:33:21.000000 | \"SUCCEEDED\" |\n| 1              | \"storaged0\"   | \"FINISHED\" | 2021-11-01T09:33:21.000000 | 2021-11-01T09:33:21.000000 | \"SUCCEEDED\" |\n| 2              | \"storaged1\"   | \"FINISHED\" | 2021-11-01T09:33:21.000000 | 2021-11-01T09:33:21.000000 | \"SUCCEEDED\" |\n| \"Total:3\"      | \"Succeeded:3\" | \"Failed:0\" | \"In Progress:0\"            | \"\"                         | \"\"          |\n+----------------+---------------+------------+----------------------------+----------------------------+-------------+\n\n# \u663e\u793a\u56fe\u7a7a\u95f4\u7edf\u8ba1\u4fe1\u606f\u3002\nnebula&gt; SHOW STATS;\n+---------+------------+-------+\n| Type    | Name       | Count |\n+---------+------------+-------+\n| \"Tag\"   | \"player\"   | 51    |\n| \"Tag\"   | \"team\"     | 30    |\n| \"Edge\"  | \"follow\"   | 81    |\n| \"Edge\"  | \"serve\"    | 152   |\n| \"Space\" | \"vertices\" | 81    |\n| \"Space\" | \"edges\"    | 233   |\n+---------+------------+-------+\n</code></pre>"},{"location":"3.ngql-guide/7.general-query-statements/6.show/15.show-tags-edges/","title":"SHOW TAGS/EDGES","text":"<p><code>SHOW TAGS</code>\u8bed\u53e5\u663e\u793a\u5f53\u524d\u56fe\u7a7a\u95f4\u5185\u7684\u6240\u6709 Tag\u3002</p> <p><code>SHOW EDGES</code>\u8bed\u53e5\u663e\u793a\u5f53\u524d\u56fe\u7a7a\u95f4\u5185\u7684\u6240\u6709 Edge type\u3002</p>"},{"location":"3.ngql-guide/7.general-query-statements/6.show/15.show-tags-edges/#_1","title":"\u8bed\u6cd5","text":"<pre><code>SHOW {TAGS | EDGES};\n</code></pre>"},{"location":"3.ngql-guide/7.general-query-statements/6.show/15.show-tags-edges/#_2","title":"\u793a\u4f8b","text":"<pre><code>nebula&gt; SHOW TAGS;\n+----------+\n| Name     |\n+----------+\n| \"player\" |\n| \"star\"   |\n| \"team\"   |\n+----------+\n\nnebula&gt; SHOW EDGES;\n+----------+\n| Name     |\n+----------+\n| \"follow\" |\n| \"serve\"  |\n+----------+\n</code></pre>"},{"location":"3.ngql-guide/7.general-query-statements/6.show/16.show-users/","title":"SHOW USERS","text":"<p><code>SHOW USERS</code>\u8bed\u53e5\u663e\u793a\u7528\u6237\u4fe1\u606f\u3002</p>"},{"location":"3.ngql-guide/7.general-query-statements/6.show/16.show-users/#_1","title":"\u89d2\u8272\u8981\u6c42","text":"<p>\u53ea\u6709<code>GOD</code>\u89d2\u8272\u7684\u7528\u6237\uff08\u5373<code>root</code>\uff09\u624d\u80fd\u6267\u884c<code>SHOW USERS</code>\u8bed\u53e5\u3002</p>"},{"location":"3.ngql-guide/7.general-query-statements/6.show/16.show-users/#_2","title":"\u8bed\u6cd5","text":"<pre><code>SHOW USERS;\n</code></pre>"},{"location":"3.ngql-guide/7.general-query-statements/6.show/16.show-users/#_3","title":"\u793a\u4f8b","text":"<pre><code>nebula&gt; SHOW USERS;\n+---------+-----------------+\n| Account | IP Whitelist    |\n+---------+-----------------+\n| \"root\"  | \"\"              |\n| \"user1\" | \"\"              |\n| \"user2\" | \"192.168.10.10\" |\n+---------+-----------------+\n</code></pre>"},{"location":"3.ngql-guide/7.general-query-statements/6.show/17.show-sessions/","title":"SHOW SESSIONS","text":"<p>\u767b\u5f55 NebulaGraph \u6570\u636e\u5e93\u65f6\uff0c\u4f1a\u521b\u5efa\u5bf9\u5e94\u4f1a\u8bdd\uff0c\u7528\u6237\u53ef\u4ee5\u67e5\u8be2\u4f1a\u8bdd\u4fe1\u606f\u3002</p>"},{"location":"3.ngql-guide/7.general-query-statements/6.show/17.show-sessions/#_1","title":"\u6ce8\u610f\u4e8b\u9879","text":"<ul> <li>\u6267\u884c<code>exit</code>\u9000\u51fa\u767b\u5f55\u65f6\uff0c\u5ba2\u6237\u7aef\u4f1a\u8c03\u7528 API <code>release</code>\uff0c\u91ca\u653e\u4f1a\u8bdd\u5e76\u6e05\u9664\u4f1a\u8bdd\u4fe1\u606f\u3002\u5982\u679c\u6ca1\u6709\u6b63\u5e38\u9000\u51fa\uff0c\u4e14\u6ca1\u6709\u5728\u914d\u7f6e\u6587\u4ef6 nebula-graphd.conf \u8bbe\u7f6e\u7a7a\u95f2\u4f1a\u8bdd\u8d85\u65f6\u65f6\u95f4\uff08<code>session_idle_timeout_secs</code>\uff09\uff0c\u4f1a\u8bdd\u4e0d\u4f1a\u81ea\u52a8\u91ca\u653e\u3002\u5bf9\u4e8e\u672a\u81ea\u52a8\u91ca\u653e\u7684\u4f1a\u8bdd\uff0c\u9700\u8981\u624b\u52a8\u5220\u9664\u6307\u5b9a\u4f1a\u8bdd\uff0c\u8be6\u60c5\u53c2\u89c1\u7ec8\u6b62\u4f1a\u8bdd\u3002</li> </ul> <ul> <li><code>SHOW SESSIONS</code>\u67e5\u8be2\u6240\u6709 Graph \u670d\u52a1\u4e0a\u7684\u4f1a\u8bdd\u4fe1\u606f\u3002</li> </ul> <ul> <li><code>SHOW LOCAL SESSIONS</code>\u4ece\u5f53\u524d\u8fde\u63a5\u7684 Graph \u670d\u52a1\u83b7\u53d6\u4f1a\u8bdd\u4fe1\u606f\uff0c\u4e0d\u4f1a\u67e5\u8be2\u5176\u4ed6 Graph \u670d\u52a1\u4e0a\u7684\u4f1a\u8bdd\u4fe1\u606f\u3002</li> </ul> <ul> <li><code>SHOW SESSION &lt;Session_Id&gt;</code>\u67e5\u8be2\u6307\u5b9a Session ID \u7684\u4f1a\u8bdd\u4fe1\u606f\u3002</li> </ul>"},{"location":"3.ngql-guide/7.general-query-statements/6.show/17.show-sessions/#_2","title":"\u8bed\u6cd5","text":"<pre><code>SHOW [LOCAL] SESSIONS;\nSHOW SESSION &lt;Session_Id&gt;;\n</code></pre>"},{"location":"3.ngql-guide/7.general-query-statements/6.show/17.show-sessions/#_3","title":"\u793a\u4f8b","text":"<pre><code>nebula&gt; SHOW SESSIONS;\n+------------------+----------+--------------------+----------------------------+----------------------------+------------------+----------+--------------------+\n| SessionId        | UserName | SpaceName          | CreateTime                 | UpdateTime                 | GraphAddr        | Timezone | ClientIp           |\n+------------------+----------+--------------------+----------------------------+----------------------------+------------------+----------+--------------------+\n| 1651220858102296 | \"root\"   | \"basketballplayer\" | 2022-04-29T08:27:38.102296 | 2022-04-29T08:50:46.282921 | \"127.0.0.1:9669\" | 0        | \"127.0.0.1\" |\n| 1651199330300991 | \"root\"   | \"basketballplayer\" | 2022-04-29T02:28:50.300991 | 2022-04-29T08:16:28.339038 | \"127.0.0.1:9669\" | 0        | \"127.0.0.1\" |\n| 1651112899847744 | \"root\"   | \"basketballplayer\" | 2022-04-28T02:28:19.847744 | 2022-04-28T08:17:44.470210 | \"127.0.0.1:9669\" | 0        | \"127.0.0.1\" |\n| 1651041092662100 | \"root\"   | \"basketballplayer\" | 2022-04-27T06:31:32.662100 | 2022-04-27T07:01:25.200978 | \"127.0.0.1:9669\" | 0        | \"127.0.0.1\" |\n| 1650959429593975 | \"root\"   | \"basketballplayer\" | 2022-04-26T07:50:29.593975 | 2022-04-26T07:51:47.184810 | \"127.0.0.1:9669\" | 0        | \"127.0.0.1\" |\n| 1650958897679595 | \"root\"   | \"\"                 | 2022-04-26T07:41:37.679595 | 2022-04-26T07:41:37.683802 | \"127.0.0.1:9669\" | 0        | \"127.0.0.1\" |\n+------------------+----------+--------------------+----------------------------+----------------------------+------------------+----------+--------------------+\n\nnebula&gt; SHOW SESSION 1635254859271703;\n+------------------+----------+--------------------+----------------------------+----------------------------+------------------+----------+--------------------+\n| SessionId        | UserName | SpaceName          | CreateTime                 | UpdateTime                 | GraphAddr        | Timezone | ClientIp           |\n+------------------+----------+--------------------+----------------------------+----------------------------+------------------+----------+--------------------+\n| 1651220858102296 | \"root\"   | \"basketballplayer\" | 2022-04-29T08:27:38.102296 | 2022-04-29T08:50:54.254384 | \"127.0.0.1:9669\" | 0        | \"127.0.0.1\" |\n+------------------+----------+--------------------+----------------------------+----------------------------+------------------+----------+--------------------+\n</code></pre> \u53c2\u6570 \u8bf4\u660e <code>SessionId</code> \u4f1a\u8bdd ID\uff0c\u552f\u4e00\u6807\u8bc6\u4e00\u4e2a\u4f1a\u8bdd\u3002 <code>UserName</code> \u4f1a\u8bdd\u7684\u767b\u5f55\u7528\u6237\u540d\u79f0\u3002 <code>SpaceName</code> \u7528\u6237\u5f53\u524d\u6240\u4f7f\u7528\u7684\u56fe\u7a7a\u95f4\u3002\u521a\u767b\u5f55\u65f6\u4e3a\u7a7a\uff08<code>\"\"</code>\uff09\u3002 <code>CreateTime</code> \u4f1a\u8bdd\u7684\u521b\u5efa\u65f6\u95f4\uff0c\u5373\u7528\u6237\u8ba4\u8bc1\u767b\u5f55\u7684\u65f6\u95f4\u3002\u65f6\u533a\u4e3a\u914d\u7f6e\u6587\u4ef6\u4e2d<code>timezone_name</code>\u6307\u5b9a\u7684\u65f6\u533a\u3002 <code>UpdateTime</code> \u7528\u6237\u6709\u6267\u884c\u64cd\u4f5c\u65f6\uff0c\u4f1a\u66f4\u65b0\u6b64\u65f6\u95f4\u3002\u65f6\u533a\u4e3a\u914d\u7f6e\u6587\u4ef6\u4e2d<code>timezone_name</code>\u6307\u5b9a\u7684\u65f6\u533a\u3002 <code>GraphAddr</code> \u4f1a\u8bdd\u7684 Graph \u670d\u52a1 IP\uff08\u6216\u4e3b\u673a\u540d\uff09\u548c\u7aef\u53e3\u3002 <code>Timezone</code> \u4fdd\u7559\u53c2\u6570\uff0c\u6682\u65e0\u610f\u4e49\u3002 <code>ClientIp</code> \u4f1a\u8bdd\u7684\u5ba2\u6237\u7aef IP \u6216\u4e3b\u673a\u540d\u3002"},{"location":"3.ngql-guide/7.general-query-statements/6.show/18.show-queries/","title":"SHOW QUERIES","text":"<p><code>SHOW QUERIES</code>\u8bed\u53e5\u53ef\u4ee5\u67e5\u770b\u5f53\u524d Session \u4e2d\u6b63\u5728\u6267\u884c\u7684\u67e5\u8be2\u8bf7\u6c42\u4fe1\u606f\u3002</p> <p>Note</p> <p>\u5982\u679c\u9700\u8981\u7ec8\u6b62\u67e5\u8be2\uff0c\u8bf7\u53c2\u89c1\u7ec8\u6b62\u67e5\u8be2\u3002</p>"},{"location":"3.ngql-guide/7.general-query-statements/6.show/18.show-queries/#_1","title":"\u6ce8\u610f\u4e8b\u9879","text":"<ul> <li><code>SHOW LOCAL QUERIES</code>\u4ece\u672c\u5730\u7f13\u5b58\u83b7\u53d6\u5f53\u524d Session \u4e2d\u67e5\u8be2\u7684\u72b6\u6001\uff0c\u51e0\u4e4e\u6ca1\u6709\u5ef6\u8fdf\u3002</li> </ul> <ul> <li><code>SHOW QUERIES</code>\u4ece Meta \u670d\u52a1\u83b7\u53d6\u6240\u6709 Session \u4e2d\u7684\u67e5\u8be2\u4fe1\u606f\u3002\u8fd9\u4e9b\u4fe1\u606f\u4f1a\u6839\u636e\u53c2\u6570<code>session_reclaim_interval_secs</code>\u5b9a\u4e49\u7684\u5468\u671f\u540c\u6b65\u5230 Meta \u670d\u52a1\uff0c\u56e0\u6b64\u5728\u5ba2\u6237\u7aef\u83b7\u53d6\u5230\u7684\u4fe1\u606f\u53ef\u80fd\u5c5e\u4e8e\u4e0a\u4e2a\u540c\u6b65\u5468\u671f\u3002</li> </ul>"},{"location":"3.ngql-guide/7.general-query-statements/6.show/18.show-queries/#_2","title":"\u8bed\u6cd5","text":"<pre><code>SHOW [LOCAL] QUERIES;\n</code></pre>"},{"location":"3.ngql-guide/7.general-query-statements/6.show/18.show-queries/#_3","title":"\u793a\u4f8b","text":"<pre><code>nebula&gt; SHOW LOCAL QUERIES;\n+------------------+-----------------+--------+----------------------+----------------------------+----------------+-----------+-----------------------+\n| SessionID        | ExecutionPlanID | User   | Host                 | StartTime                  | DurationInUSec | Status    | Query                 |\n+------------------+-----------------+--------+----------------------+----------------------------+----------------+-----------+-----------------------+\n| 1625463842921750 | 46              | \"root\" | \"\"192.168.x.x\":9669\" | 2021-07-05T05:44:19.502903 | 0              | \"RUNNING\" | \"SHOW LOCAL QUERIES;\" |\n+------------------+-----------------+--------+----------------------+----------------------------+----------------+-----------+-----------------------+\n\nnebula&gt; SHOW QUERIES;\n+------------------+-----------------+---------+----------------------+----------------------------+----------------+-----------+---------------------------------------------------------+\n| SessionID        | ExecutionPlanID | User    | Host                 | StartTime                  | DurationInUSec | Status    | Query                                                   |\n+------------------+-----------------+---------+----------------------+----------------------------+----------------+-----------+---------------------------------------------------------+\n| 1625456037718757 | 54              | \"user1\" | \"\"192.168.x.x\":9669\" | 2021-07-05T05:51:08.691318 | 1504502        | \"RUNNING\" | \"MATCH p=(v:player)-[*1..4]-(v2) RETURN v2 AS Friends;\" |\n+------------------+-----------------+---------+----------------------+----------------------------+----------------+-----------+---------------------------------------------------------+\n\n# \u8fd4\u56de\u8017\u65f6 TOP 10 \u7684\u67e5\u8be2\u3002\nnebula&gt; SHOW QUERIES | ORDER BY $-.DurationInUSec DESC | LIMIT 10;\n+------------------+-----------------+---------+----------------------+----------------------------+----------------+-----------+-------------------------------------------------------+\n| SessionID        | ExecutionPlanID | User    | Host                 | StartTime                  | DurationInUSec | Status    | Query                                                 |\n+------------------+-----------------+---------+----------------------+----------------------------+----------------+-----------+-------------------------------------------------------+\n| 1625471375320831 | 98              | \"user2\" | \"\"192.168.x.x\":9669\" | 2021-07-05T07:50:24.461779 | 2608176        | \"RUNNING\" | \"MATCH (v:player)-[*1..4]-(v2) RETURN v2 AS Friends;\" |\n| 1625456037718757 | 99              | \"user1\" | \"\"192.168.x.x\":9669\" | 2021-07-05T07:50:24.910616 | 2159333        | \"RUNNING\" | \"MATCH (v:player)-[*1..4]-(v2) RETURN v2 AS Friends;\" |\n+------------------+-----------------+---------+----------------------+----------------------------+----------------+-----------+-------------------------------------------------------+\n</code></pre> <p>\u53c2\u6570\u8bf4\u660e\u5982\u4e0b\u3002</p> \u53c2\u6570 \u8bf4\u660e <code>SessionID</code> \u4f1a\u8bdd ID\u3002 <code>ExecutionPlanID</code> \u6267\u884c\u8ba1\u5212 ID\u3002 <code>User</code> \u6267\u884c\u67e5\u8be2\u7684\u7528\u6237\u540d\u3002 <code>Host</code> \u7528\u6237\u8fde\u63a5\u7684\u670d\u52a1\u5668\u5730\u5740\u548c\u7aef\u53e3\u3002 <code>StartTime</code> \u6267\u884c\u67e5\u8be2\u7684\u5f00\u59cb\u65f6\u95f4\u3002 <code>DurationInUSec</code> \u6267\u884c\u67e5\u8be2\u7684\u6301\u7eed\u65f6\u957f\u3002\u5355\u4f4d\uff1a\u5fae\u79d2\u3002 <code>Status</code> \u67e5\u8be2\u7684\u5f53\u524d\u72b6\u6001\u3002 <code>Query</code> \u67e5\u8be2\u8bed\u53e5\u3002"},{"location":"3.ngql-guide/7.general-query-statements/6.show/19.show-meta-leader/","title":"SHOW META LEADER","text":"<p><code>SHOW META LEADER</code>\u8bed\u53e5\u663e\u793a\u5f53\u524d Meta \u96c6\u7fa4\u7684 leader \u4fe1\u606f\u3002</p> <p>\u5173\u4e8e Meta \u670d\u52a1\u7684\u8be6\u7ec6\u8bf4\u660e\u8bf7\u53c2\u89c1 Meta \u670d\u52a1\u3002</p>"},{"location":"3.ngql-guide/7.general-query-statements/6.show/19.show-meta-leader/#_1","title":"\u8bed\u6cd5","text":"<pre><code>SHOW META LEADER;\n</code></pre>"},{"location":"3.ngql-guide/7.general-query-statements/6.show/19.show-meta-leader/#_2","title":"\u793a\u4f8b","text":"<pre><code>nebula&gt; SHOW META LEADER;\n+------------------+---------------------------+\n| Meta Leader      | secs from last heart beat |\n+------------------+---------------------------+\n| \"127.0.0.1:9559\" | 3                         |\n+------------------+---------------------------+\n</code></pre> \u53c2\u6570 \u8bf4\u660e <code>Meta Leader</code> Meta \u96c6\u7fa4\u7684 leader \u4fe1\u606f\uff0c\u5305\u62ec leader \u6240\u5728\u670d\u52a1\u5668\u7684 IP\uff08\u6216\u4e3b\u673a\u540d\uff09\u548c\u7aef\u53e3\u3002 <code>secs from last heart beat</code> \u8ddd\u79bb\u4e0a\u6b21\u5fc3\u8df3\u7684\u65f6\u95f4\u95f4\u9694\u3002\u5355\u4f4d\uff1a\u79d2\u3002"},{"location":"3.ngql-guide/7.general-query-statements/6.show/2.show-collation/","title":"SHOW COLLATION","text":"<p><code>SHOW COLLATION</code>\u8bed\u53e5\u663e\u793a\u5f53\u524d\u7684\u6392\u5e8f\u89c4\u5219\u3002</p> <p>\u76ee\u524d\u53ef\u7528\u7684\u6392\u5e8f\u89c4\u5219\u4e3a<code>utf8_bin</code>\u548c<code>utf8mb4_bin</code>\u3002</p> <ul> <li>\u5f53\u5b57\u7b26\u96c6\u4e3a<code>utf8</code>\uff0c\u9ed8\u8ba4\u6392\u5e8f\u89c4\u5219\u4e3a<code>utf8_bin</code>\u3002</li> </ul> <ul> <li>\u5f53\u5b57\u7b26\u96c6\u4e3a<code>utf8mb4</code>\uff0c\u9ed8\u8ba4\u6392\u5e8f\u89c4\u5219\u4e3a<code>utf8mb4_bin</code>\u3002</li> </ul>"},{"location":"3.ngql-guide/7.general-query-statements/6.show/2.show-collation/#_1","title":"\u8bed\u6cd5","text":"<pre><code>SHOW COLLATION;\n</code></pre>"},{"location":"3.ngql-guide/7.general-query-statements/6.show/2.show-collation/#_2","title":"\u793a\u4f8b","text":"<pre><code>nebula&gt; SHOW COLLATION;\n+------------+---------+\n| Collation  | Charset |\n+------------+---------+\n| \"utf8_bin\" | \"utf8\"  |\n+------------+---------+\n</code></pre> \u53c2\u6570 \u8bf4\u660e <code>Collation</code> \u6392\u5e8f\u89c4\u5219\u540d\u79f0\u3002 <code>Charset</code> \u4e0e\u6392\u5e8f\u89c4\u5219\u5173\u8054\u7684\u5b57\u7b26\u96c6\u540d\u79f0\u3002"},{"location":"3.ngql-guide/7.general-query-statements/6.show/4.show-create-space/","title":"SHOW CREATE SPACE","text":"<p><code>SHOW CREATE SPACE</code>\u8bed\u53e5\u663e\u793a\u6307\u5b9a\u56fe\u7a7a\u95f4\u7684\u521b\u5efa\u8bed\u53e5\u3002</p> <p>\u56fe\u7a7a\u95f4\u7684\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u89c1 CREATE SPACE\u3002</p>"},{"location":"3.ngql-guide/7.general-query-statements/6.show/4.show-create-space/#_1","title":"\u8bed\u6cd5","text":"<pre><code>SHOW CREATE SPACE &lt;space_name&gt;;\n</code></pre>"},{"location":"3.ngql-guide/7.general-query-statements/6.show/4.show-create-space/#_2","title":"\u793a\u4f8b","text":"<pre><code>nebula&gt; SHOW CREATE SPACE basketballplayer;\n+--------------------+---------------------------------------------------------------------------------------------------------------------------------------------+\n| Space              | Create Space                                                                                                                                |\n+--------------------+---------------------------------------------------------------------------------------------------------------------------------------------+\n| \"basketballplayer\" | \"CREATE SPACE `basketballplayer` (partition_num = 10, replica_factor = 1, charset = utf8, collate = utf8_bin, vid_type = FIXED_STRING(32))\" |\n+--------------------+---------------------------------------------------------------------------------------------------------------------------------------------+\n</code></pre>"},{"location":"3.ngql-guide/7.general-query-statements/6.show/5.show-create-tag-edge/","title":"SHOW CREATE TAG/EDGE","text":"<p><code>SHOW CREATE TAG</code>\u8bed\u53e5\u663e\u793a\u6307\u5b9a Tag \u7684\u57fa\u672c\u4fe1\u606f\u3002Tag \u7684\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u89c1 CREATE TAG\u3002</p> <p><code>SHOW CREATE EDGE</code>\u8bed\u53e5\u663e\u793a\u6307\u5b9a Edge type \u7684\u57fa\u672c\u4fe1\u606f\u3002Edge type \u7684\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u89c1 CREATE EDGE\u3002</p>"},{"location":"3.ngql-guide/7.general-query-statements/6.show/5.show-create-tag-edge/#_1","title":"\u8bed\u6cd5","text":"<pre><code>SHOW CREATE {TAG &lt;tag_name&gt; | EDGE &lt;edge_name&gt;};\n</code></pre>"},{"location":"3.ngql-guide/7.general-query-statements/6.show/5.show-create-tag-edge/#_2","title":"\u793a\u4f8b","text":"<pre><code>nebula&gt; SHOW CREATE TAG player;\n+----------+-----------------------------------+\n| Tag      | Create Tag                        |\n+----------+-----------------------------------+\n| \"player\" | \"CREATE TAG `player` (            |\n|          |  `name` string NULL,              |\n|          |  `age` int64 NULL                 |\n|          | ) ttl_duration = 0, ttl_col = \"\"\" |\n+----------+-----------------------------------+\n\nnebula&gt; SHOW CREATE EDGE follow;\n+----------+-----------------------------------+\n| Edge     | Create Edge                       |\n+----------+-----------------------------------+\n| \"follow\" | \"CREATE EDGE `follow` (           |\n|          |  `degree` int64 NULL              |\n|          | ) ttl_duration = 0, ttl_col = \"\"\" |\n+----------+-----------------------------------+\n</code></pre>"},{"location":"3.ngql-guide/7.general-query-statements/6.show/6.show-hosts/","title":"SHOW HOSTS","text":"<p><code>SHOW HOSTS</code>\u8bed\u53e5\u53ef\u4ee5\u663e\u793a\u96c6\u7fa4\u4fe1\u606f\uff0c\u5305\u62ec\u7aef\u53e3\u3001\u72b6\u6001\u3001leader\u3001\u5206\u7247\u3001\u7248\u672c\u7b49\u4fe1\u606f\uff0c\u6216\u8005\u6307\u5b9a\u663e\u793a Graph\u3001Storage\u3001Meta \u670d\u52a1\u4e3b\u673a\u4fe1\u606f\u3002</p>"},{"location":"3.ngql-guide/7.general-query-statements/6.show/6.show-hosts/#_1","title":"\u8bed\u6cd5","text":"<pre><code>SHOW HOSTS [GRAPH | STORAGE | META];\n</code></pre> <p>Note</p> <p>\u5bf9\u4e8e\u4f7f\u7528\u6e90\u7801\u5b89\u88c5\u7684 NebulaGraph\uff0c\u6267\u884c\u6dfb\u52a0\u4e86\u670d\u52a1\u540d\u7684\u547d\u4ee4\u540e\uff0c\u8f93\u51fa\u7684\u4fe1\u606f\u4e2d\u4e0d\u663e\u793a\u7248\u672c\u4fe1\u606f\u3002</p>"},{"location":"3.ngql-guide/7.general-query-statements/6.show/6.show-hosts/#_2","title":"\u793a\u4f8b","text":"<pre><code>nebula&gt; SHOW HOSTS;\n+-------------+-------+----------+--------------+----------------------------------+------------------------------+---------+\n| Host        | Port  | Status   | Leader count | Leader distribution              | Partition distribution       | Version |\n+-------------+-------+----------+--------------+----------------------------------+------------------------------+---------+\n| \"storaged0\" | 9779  | \"ONLINE\" | 8            | \"docs:5, basketballplayer:3\"     | \"docs:5, basketballplayer:3\" | \"master\" |\n| \"storaged1\" | 9779  | \"ONLINE\" | 9            | \"basketballplayer:4, docs:5\"     | \"docs:5, basketballplayer:4\" | \"master\" |\n| \"storaged2\" | 9779  | \"ONLINE\" | 8            | \"basketballplayer:3, docs:5\"     | \"docs:5, basketballplayer:3\" | \"master\" |\n+-------------+-------+----------+--------------+----------------------------------+------------------------------+---------+\n\nnebula&gt; SHOW HOSTS GRAPH;\n+-----------+------+----------+---------+--------------+---------+\n| Host      | Port | Status   | Role    | Git Info Sha | Version |\n+-----------+------+----------+---------+--------------+---------+\n| \"graphd\"  | 9669 | \"ONLINE\" | \"GRAPH\" | \"3ba41bd\"    | \"master\" |\n| \"graphd1\" | 9669 | \"ONLINE\" | \"GRAPH\" | \"3ba41bd\"    | \"master\" |\n| \"graphd2\" | 9669 | \"ONLINE\" | \"GRAPH\" | \"3ba41bd\"    | \"master\" |\n+-----------+------+----------+---------+--------------+---------+\n\nnebula&gt; SHOW HOSTS STORAGE;\n+-------------+------+----------+-----------+--------------+---------+\n| Host        | Port | Status   | Role      | Git Info Sha | Version |\n+-------------+------+----------+-----------+--------------+---------+\n| \"storaged0\" | 9779 | \"ONLINE\" | \"STORAGE\" | \"3ba41bd\"    | \"master\" |\n| \"storaged1\" | 9779 | \"ONLINE\" | \"STORAGE\" | \"3ba41bd\"    | \"master\" |\n| \"storaged2\" | 9779 | \"ONLINE\" | \"STORAGE\" | \"3ba41bd\"    | \"master\" |\n+-------------+------+----------+-----------+--------------+---------+\n\nnebula&gt; SHOW HOSTS META;\n+----------+------+----------+--------+--------------+---------+\n| Host     | Port | Status   | Role   | Git Info Sha | Version |\n+----------+------+----------+--------+--------------+---------+\n| \"metad2\" | 9559 | \"ONLINE\" | \"META\" | \"3ba41bd\"    | \"master\" |\n| \"metad0\" | 9559 | \"ONLINE\" | \"META\" | \"3ba41bd\"    | \"master\" |\n| \"metad1\" | 9559 | \"ONLINE\" | \"META\" | \"3ba41bd\"    | \"master\" |\n+----------+------+----------+--------+--------------+---------+\n</code></pre>"},{"location":"3.ngql-guide/7.general-query-statements/6.show/7.show-index-status/","title":"SHOW INDEX STATUS","text":"<p><code>SHOW INDEX STATUS</code>\u8bed\u53e5\u663e\u793a\u91cd\u5efa\u539f\u751f\u7d22\u5f15\u7684\u4f5c\u4e1a\u72b6\u6001\uff0c\u4ee5\u4fbf\u786e\u5b9a\u91cd\u5efa\u7d22\u5f15\u662f\u5426\u6210\u529f\u3002</p>"},{"location":"3.ngql-guide/7.general-query-statements/6.show/7.show-index-status/#_1","title":"\u8bed\u6cd5","text":"<pre><code>SHOW {TAG | EDGE} INDEX STATUS;\n</code></pre>"},{"location":"3.ngql-guide/7.general-query-statements/6.show/7.show-index-status/#_2","title":"\u793a\u4f8b","text":"<pre><code>nebula&gt; SHOW TAG INDEX STATUS;\n+------------------------------------+--------------+\n| Name                               | Index Status |\n+------------------------------------+--------------+\n| \"date1_index\"                      | \"FINISHED\"   |\n| \"basketballplayer_all_tag_indexes\" | \"FINISHED\"   |\n| \"any_shape_geo_index\"              | \"FINISHED\"   |\n+------------------------------------+--------------+\n\nnebula&gt; SHOW EDGE INDEX STATUS;\n+----------------+--------------+\n| Name           | Index Status |\n+----------------+--------------+\n| \"follow_index\" | \"FINISHED\"   |\n+----------------+--------------+\n</code></pre>"},{"location":"3.ngql-guide/7.general-query-statements/6.show/7.show-index-status/#_3","title":"\u76f8\u5173\u6587\u6863","text":"<ul> <li>\u7ba1\u7406\u4f5c\u4e1a</li> </ul> <ul> <li>REBUILD NATIVE INDEX</li> </ul>"},{"location":"3.ngql-guide/7.general-query-statements/6.show/8.show-indexes/","title":"SHOW INDEXES","text":"<p><code>SHOW INDEXES</code>\u8bed\u53e5\u53ef\u4ee5\u5217\u51fa\u5f53\u524d\u56fe\u7a7a\u95f4\u5185\u7684\u6240\u6709 Tag \u548c Edge type\uff08\u5305\u62ec\u5c5e\u6027\uff09\u7684\u7d22\u5f15\u3002</p>"},{"location":"3.ngql-guide/7.general-query-statements/6.show/8.show-indexes/#_1","title":"\u8bed\u6cd5","text":"<pre><code>SHOW {TAG | EDGE} INDEXES;\n</code></pre>"},{"location":"3.ngql-guide/7.general-query-statements/6.show/8.show-indexes/#_2","title":"\u793a\u4f8b","text":"<pre><code>nebula&gt; SHOW TAG INDEXES;\n+------------------+----------+----------+\n| Index Name       | By Tag   | Columns  |\n+------------------+----------+----------+\n| \"player_index_0\" | \"player\" | []       |\n| \"player_index_1\" | \"player\" | [\"name\"] |\n+------------------+----------+----------+\n\nnebula&gt; SHOW EDGE INDEXES;\n+----------------+----------+---------+\n| Index Name     | By Edge  | Columns |\n+----------------+----------+---------+\n| \"follow_index\" | \"follow\" | []      |\n+----------------+----------+---------+\n</code></pre> <p>\u5386\u53f2\u7248\u672c\u517c\u5bb9\u6027</p> <p>NebulaGraph 2.0.1 \u4e2d\uff0c <code>SHOW TAG/EDGE INDEXES</code> \u8bed\u53e5\u4ec5\u8fd4\u56de <code>Names</code>\u3002</p>"},{"location":"3.ngql-guide/7.general-query-statements/6.show/9.show-parts/","title":"SHOW PARTS","text":"<p><code>SHOW PARTS</code>\u8bed\u53e5\u663e\u793a\u56fe\u7a7a\u95f4\u4e2d\u6307\u5b9a\u5206\u7247\u6216\u6240\u6709\u5206\u7247\u7684\u4fe1\u606f\u3002</p>"},{"location":"3.ngql-guide/7.general-query-statements/6.show/9.show-parts/#_1","title":"\u8bed\u6cd5","text":"<pre><code>SHOW PARTS [&lt;part_id&gt;];\n</code></pre>"},{"location":"3.ngql-guide/7.general-query-statements/6.show/9.show-parts/#_2","title":"\u793a\u4f8b","text":"<pre><code>nebula&gt; SHOW PARTS;\n+--------------+--------------------+--------------------+-------+\n| Partition ID | Leader             | Peers              | Losts |\n+--------------+--------------------+--------------------+-------+\n| 1            | \"192.168.2.1:9779\" | \"192.168.2.1:9779\" | \"\"    |\n| 2            | \"192.168.2.2:9779\" | \"192.168.2.2:9779\" | \"\"    |\n| 3            | \"192.168.2.3:9779\" | \"192.168.2.3:9779\" | \"\"    |\n| 4            | \"192.168.2.1:9779\" | \"192.168.2.1:9779\" | \"\"    |\n| 5            | \"192.168.2.2:9779\" | \"192.168.2.2:9779\" | \"\"    |\n| 6            | \"192.168.2.3:9779\" | \"192.168.2.3:9779\" | \"\"    |\n| 7            | \"192.168.2.1:9779\" | \"192.168.2.1:9779\" | \"\"    |\n| 8            | \"192.168.2.2:9779\" | \"192.168.2.2:9779\" | \"\"    |\n| 9            | \"192.168.2.3:9779\" | \"192.168.2.3:9779\" | \"\"    |\n| 10           | \"192.168.2.1:9779\" | \"192.168.2.1:9779\" | \"\"    |\n+--------------+--------------------+--------------------+-------+\n\nnebula&gt; SHOW PARTS 1;\n+--------------+--------------------+--------------------+-------+\n| Partition ID | Leader             | Peers              | Losts |\n+--------------+--------------------+--------------------+-------+\n| 1            | \"192.168.2.1:9779\" | \"192.168.2.1:9779\" | \"\"    |\n+--------------+--------------------+--------------------+-------+\n</code></pre> <p>\u8fd4\u56de\u7ed3\u679c\u7684\u8bf4\u660e\u5982\u4e0b\uff1a</p> \u53c2\u6570 \u8bf4\u660e <code>Partition ID</code> \u5b58\u50a8\u5206\u7247\u7684 ID\u3002 <code>Leader</code> \u5206\u7247\u5bf9\u5e94\u7684 Raft leader \u526f\u672c\u7684\u4fe1\u606f\uff0c\u5305\u62ec IP\uff08\u6216\u4e3b\u673a\u540d\uff09\u4e0e\u670d\u52a1\u7aef\u53e3\u3002 <code>Peers</code> \u5206\u7247\u5bf9\u5e94\u7684\u6240\u6709\u526f\u672c\uff08leader \u4e0e follower\uff09\u7684\u4fe1\u606f\uff0c\u5305\u62ec IP\uff08\u6216\u4e3b\u673a\u540d\uff09\u4e0e\u670d\u52a1\u7aef\u53e3\u3002 <code>Losts</code> \u5206\u7247\u5bf9\u5e94\u7684\u5904\u4e8e\u79bb\u7ebf\u72b6\u6001\u7684\u526f\u672c\u4fe1\u606f\uff0c\u5305\u62ec IP\uff08\u6216\u4e3b\u673a\u540d\uff09\u548c\u670d\u52a1\u7aef\u53e3\u3002"},{"location":"3.ngql-guide/8.clauses-and-options/group-by/","title":"GROUP BY","text":"<p><code>GROUP BY</code>\u5b50\u53e5\u53ef\u4ee5\u7528\u4e8e\u805a\u5408\u6570\u636e\u3002</p>"},{"location":"3.ngql-guide/8.clauses-and-options/group-by/#opencypher","title":"openCypher \u517c\u5bb9\u6027","text":"<p>\u672c\u6587\u64cd\u4f5c\u4ec5\u9002\u7528\u4e8e\u539f\u751f nGQL\u3002</p> <p>\u7528\u6237\u4e5f\u53ef\u4ee5\u4f7f\u7528 openCypher \u65b9\u5f0f\u7684 count() \u51fd\u6570\u805a\u5408\u6570\u636e\u3002</p> <pre><code>nebula&gt;  MATCH (v:player)&lt;-[:follow]-(:player) RETURN v.player.name AS Name, count(*) as cnt ORDER BY cnt DESC;\n+----------------------+-----+\n| Name                 | cnt |\n+----------------------+-----+\n| \"Tim Duncan\"         | 10  |\n| \"LeBron James\"       | 6   |\n| \"Tony Parker\"        | 5   |\n| \"Chris Paul\"         | 4   |\n| \"Manu Ginobili\"      | 4   |\n+----------------------+-----+\n...\n</code></pre>"},{"location":"3.ngql-guide/8.clauses-and-options/group-by/#_1","title":"\u8bed\u6cd5","text":"<p><code>GROUP BY</code>\u5b50\u53e5\u53ef\u4ee5\u805a\u5408\u76f8\u540c\u503c\u7684\u884c\uff0c\u7136\u540e\u8fdb\u884c\u8ba1\u6570\u3001\u6392\u5e8f\u548c\u8ba1\u7b97\u7b49\u64cd\u4f5c\u3002</p> <p><code>GROUP BY</code>\u5b50\u53e5\u53ef\u4ee5\u5728\u7ba1\u9053\u7b26\uff08|\uff09\u4e4b\u540e\u548c<code>YIELD</code>\u5b50\u53e5\u4e4b\u524d\u4f7f\u7528\u3002</p> <p><pre><code>| GROUP BY &lt;var&gt; YIELD &lt;var&gt;, &lt;aggregation_function(var)&gt;\n</code></pre> <code>aggregation_function()</code>\u51fd\u6570\u652f\u6301<code>avg()</code>\u3001<code>sum()</code>\u3001<code>max()</code>\u3001<code>min()</code>\u3001<code>count()</code>\u3001<code>collect()</code>\u3001<code>std()</code>\u3002</p>"},{"location":"3.ngql-guide/8.clauses-and-options/group-by/#_2","title":"\u793a\u4f8b","text":"<pre><code># \u67e5\u627e\u6240\u6709\u8fde\u63a5\u5230 player100 \u7684\u70b9\uff0c\u5e76\u6839\u636e\u4ed6\u4eec\u7684\u59d3\u540d\u8fdb\u884c\u5206\u7ec4\uff0c\u8fd4\u56de\u59d3\u540d\u7684\u51fa\u73b0\u6b21\u6570\u3002\nnebula&gt; GO FROM \"player100\" OVER follow BIDIRECT \\\n        YIELD properties($$).name as Name \\\n        | GROUP BY $-.Name \\\n        YIELD $-.Name as Player, count(*) AS Name_Count;\n+---------------------+------------+\n| Player              | Name_Count |\n+---------------------+------------+\n| \"Shaquille O'Neal\"  | 1          |\n| \"Tiago Splitter\"    | 1          |\n| \"Manu Ginobili\"     | 2          |\n| \"Boris Diaw\"        | 1          |\n| \"LaMarcus Aldridge\" | 1          |\n| \"Tony Parker\"       | 2          |\n| \"Marco Belinelli\"   | 1          |\n| \"Dejounte Murray\"   | 1          |\n| \"Danny Green\"       | 1          |\n| \"Aron Baynes\"       | 1          |\n+---------------------+------------+\n</code></pre> <pre><code># \u67e5\u627e\u6240\u6709\u8fde\u63a5\u5230 player100 \u7684\u70b9\uff0c\u5e76\u6839\u636e\u8d77\u59cb\u70b9\u8fdb\u884c\u5206\u7ec4\uff0c\u8fd4\u56de degree \u7684\u603b\u548c\u3002\nnebula&gt; GO FROM \"player100\" OVER follow \\\n        YIELD src(edge) AS player, properties(edge).degree AS degree \\\n        | GROUP BY $-.player \\\n        YIELD sum($-.degree);\n+----------------+\n| sum($-.degree) |\n+----------------+\n| 190            |\n+----------------+\n</code></pre> <p><code>sum()</code>\u51fd\u6570\u8be6\u60c5\u8bf7\u53c2\u89c1\u5185\u7f6e\u6570\u5b66\u51fd\u6570\u3002</p>"},{"location":"3.ngql-guide/8.clauses-and-options/group-by/#_3","title":"\u9690\u5f0f\u5206\u7ec4","text":"<p>\u5728\u4e0a\u8ff0 nGQL \u8bed\u53e5\u4e2d\u660e\u786e\u5199\u51fa<code>GROUP BY</code>\u5e76\u8d77\u5230\u5206\u7ec4\u5b57\u6bb5\u4f5c\u7528\u7684\u7528\u6cd5\u79f0\u4e3a<code>GROUP BY</code>\u663e\u793a\u7528\u6cd5\uff1b\u800c\u5728 openCypher \u8bed\u53e5\u4e2d<code>GROUP BY</code>\u7684\u7528\u6cd5\u662f\u9690\u5f0f\u7684\uff0c\u5373\u5728\u8bed\u53e5\u4e2d\u4e0d\u7528\u5199\u51fa<code>GROUP BY</code>\u4e5f\u53ef\u8d77\u5230\u5206\u7ec4\u5b57\u6bb5\u7684\u4f5c\u7528\u3002nGQL \u8bed\u53e5\u4e2d\u663e\u793a\u5730<code>GROUP BY</code>\u7528\u6cd5\u4e0e openCypher \u8bed\u53e5\u4e2d\u7684\u9690\u5f0f\u5730<code>GROUP BY</code>\u7528\u6cd5\u76f8\u540c\uff0c\u5e76\u4e14 nGQL \u8bed\u53e5\u517c\u5bb9 openCypher \u7684\u7528\u6cd5\uff0c\u5373\u4e5f\u652f\u6301\u9690\u5f0f\u5730\u4f7f\u7528<code>GROUP BY</code>\u3002\u6709\u5173<code>GROUP BY</code>\u7684\u9690\u5f0f\u7528\u6cd5\uff0c\u8bf7\u53c2\u89c1Stack Overflow\u3002</p> <p>\u4f8b\u5982\uff1a\u67e5\u8be2 34 \u5c81\u4ee5\u4e0a\u7684\u7403\u5458\u4e2d\u5b8c\u5168\u91cd\u53e0\u670d\u5f79\u7684\u533a\u95f4\u3002</p> <pre><code>nebula&gt; LOOKUP ON player WHERE player.age &gt; 34 YIELD id(vertex) AS v | \\\n        GO FROM $-.v OVER serve YIELD serve.start_year AS start_year, serve.end_year AS end_year | \\\n        YIELD $-.start_year, $-.end_year, count(*) AS count | \\\n        ORDER BY $-.count DESC | LIMIT 5;\n+---------------+-------------+-------+\n| $-.start_year | $-.end_year | count |\n+---------------+-------------+-------+\n| 2018          | 2019        | 3     |\n| 2007          | 2012        | 2     |\n| 1998          | 2004        | 2     |\n| 2017          | 2018        | 2     |\n| 2010          | 2011        | 2     |\n+---------------+-------------+-------+\n</code></pre>"},{"location":"3.ngql-guide/8.clauses-and-options/joins/","title":"INNER JOIN","text":"<p><code>INNER JOIN</code>\u662f\u4e00\u79cd\u8fde\u63a5\u67e5\u8be2\u3002\u5b83\u57fa\u4e8e\u4e24\u4e2a\u8868\u4e4b\u95f4\u7684\u5171\u540c\u5217\u503c\u8fdb\u884c\u5339\u914d\uff0c\u5e76\u8fd4\u56de\u6ee1\u8db3\u6761\u4ef6\u7684\u8bb0\u5f55\u3002<code>INNER JOIN</code>\u901a\u5e38\u7528\u4e8e\u6839\u636e\u5173\u8054\u5217\u7684\u503c\u6765\u521b\u5efa\u4e00\u4e2a\u5305\u542b\u4e24\u4e2a\u8868\u7684\u7ed3\u679c\u96c6\u3002\u5728 NebulaGraph \u4e2d\uff0c\u53ef\u4ee5\u663e\u793a\u5730\u4f7f\u7528<code>INNER JOIN</code>\u5b50\u53e5\u5728\u4e24\u4e2a\u8868\u4e4b\u95f4\u8fdb\u884c\u8fde\u63a5\u67e5\u8be2\uff0c\u4ee5\u83b7\u53d6\u66f4\u52a0\u590d\u6742\u7684\u67e5\u8be2\u7ed3\u679c\u3002</p> <p>Note</p> <p>\u5728 nGQL \u8bed\u53e5\u4e2d\uff0c<code>GO</code>\u7684\u591a\u8df3\u67e5\u8be2\u9690\u5f0f\u5730\u4f7f\u7528\u4e86<code>INNER JOIN</code>\u5b50\u53e5\u3002\u4f8b\u5982\uff0c<code>GO 1 TO 2 STEPS FROM \"player101\" OVER follow YIELD $$.player.name AS name, $$.player.age AS age</code>\u8bed\u53e5\u4e2d\uff0c<code>GO</code>\u5b50\u53e5\u9690\u5f0f\u5730\u4f7f\u7528\u4e86<code>INNER JOIN</code>\u5b50\u53e5\uff0c\u5c06\u4ece<code>player101</code>\u51fa\u53d1\u6cbf<code>follow</code>\u8fb9\u7b2c\u4e00\u6b65\u67e5\u8be2\u7684\u7ed3\u679c\u5217\u548c\u7b2c\u4e8c\u6b65\u67e5\u8be2\u7684\u8d77\u70b9\u5217\u8fdb\u884c\u5339\u914d\uff0c\u7136\u540e\u57fa\u4e8e\u5339\u914d\u7ed3\u679c\u8fd4\u56de<code>name</code>\u548c<code>age</code>\u3002</p>"},{"location":"3.ngql-guide/8.clauses-and-options/joins/#opencypher","title":"openCypher \u517c\u5bb9\u6027","text":"<p><code>INNER JOIN</code>\u5b50\u53e5\u4ec5\u9002\u7528\u4e8e\u539f\u751f nGQL \u8bed\u6cd5\u3002</p>"},{"location":"3.ngql-guide/8.clauses-and-options/joins/#_1","title":"\u8bed\u6cd5","text":"<pre><code>YIELD &lt;column_name_list&gt;\nFROM &lt;first_table&gt; INNER JOIN &lt;second_table&gt; ON &lt;join_condition&gt;\n</code></pre>"},{"location":"3.ngql-guide/8.clauses-and-options/joins/#_2","title":"\u4f7f\u7528\u8bf4\u660e","text":"<ul> <li>\u5fc5\u987b\u4f7f\u7528<code>YIELD</code>\u5b50\u53e5\u6307\u5b9a\u8fd4\u56de\u7684\u5217\uff0c\u5e76\u4e14<code>YIELD</code>\u5b50\u53e5\u9700\u653e\u7f6e\u5728<code>INNER JOIN</code>\u5b50\u53e5\u4e4b\u524d\u3002</li> <li>\u4f7f\u7528<code>FROM</code>\u5b50\u53e5\u6307\u5b9a\u8981\u8fde\u63a5\u7684\u4e24\u4e2a\u8868\u3002</li> <li><code>INNER JOIN</code>\u5b50\u53e5\u5fc5\u987b\u5305\u542b<code>ON</code>\u5b50\u53e5\uff0c<code>ON</code>\u5b50\u53e5\u6307\u5b9a\u4e86\u8fde\u63a5\u6761\u4ef6\uff0c\u5e76\u4e14\u8fde\u63a5\u6761\u4ef6\u53ea\u652f\u6301\u7b49\u503c\u8fde\u63a5\uff08\u5373<code>==</code>\uff09\u3002</li> <li><code>&lt;first_table&gt;</code>\u548c<code>&lt;second_table&gt;</code>\u662f\u8981\u8fde\u63a5\u7684\u4e24\u4e2a\u8868\uff0c\u4e24\u8868\u540d\u4e0d\u80fd\u76f8\u540c\u3002</li> <li>\u4f7f\u7528\u81ea\u5b9a\u4e49\u53d8\u91cf\u6765\u6307\u5b9a\u8868\u540d\u3002\u8be6\u60c5\u53c2\u89c1\u4f7f\u7528\u81ea\u5b9a\u4e49\u53d8\u91cf\u3002</li> </ul>"},{"location":"3.ngql-guide/8.clauses-and-options/joins/#_3","title":"\u4f7f\u7528\u793a\u4f8b","text":"<p>\u4ee5\u4e0b\u793a\u4f8b\u4ecb\u7ecd\u5982\u4f55\u901a\u8fc7<code>INNER JOIN</code>\u5173\u8054 nGQL \u8bed\u53e5\u4e2d\u7684\u4e24\u4e2a\u67e5\u8be2\u7ed3\u679c\u3002</p> <p>\u793a\u4f8b\u4e00\uff1a\u901a\u8fc7<code>INNER JOIN</code>\u5c06\u7b2c\u4e00\u4e2a<code>LOOKUP</code>\u67e5\u8be2\u4e2d\u7684\u7ed3\u679c<code>dst</code>\u5217\uff08<code>Tony Parker</code>\u7684 ID <code>player101</code>\uff09\u548c\u7b2c\u4e8c\u4e2a<code>GO</code>\u67e5\u8be2\u4e2d\u7684\u7ed3\u679c<code>src</code>\u5217\uff08<code>player101</code>\u548c<code>player125</code>\u4e24\u4e2a ID\uff09\u8fdb\u884c\u5339\u914d\u3002\u5339\u914d\u7684\u7ed3\u679c\u96c6\u4e3a\u4e24\u4e2a\u67e5\u8be2\u7ed3\u679c\u4e2d<code>dst</code>\u548c<code>src</code>\u5217\u90fd\u5305\u542b\u7684<code>player101</code>\uff0c\u57fa\u4e8e\u8fd9\u4e2a<code>player101</code>\u5339\u914d\u7684\u7ed3\u679c\uff0c\u7136\u540e\u901a\u8fc7<code>YIELD $b.vid AS vid, $a.v AS v, $b.e2 AS e2</code>\u8fd4\u56de\u6700\u7ec8\u67e5\u8be2\u7ed3\u679c\u3002</p> <pre><code>nebula&gt; $a = LOOKUP ON player WHERE player.name == 'Tony Parker' YIELD id(vertex) as dst, vertex AS v; \\\n        $b = GO FROM 'player101', 'player125' OVER follow YIELD id($^) as src, id($$) as vid, edge AS e2; \\\n        YIELD $b.vid AS vid, $a.v AS v, $b.e2 AS e2 FROM $a INNER JOIN $b ON $a.dst == $b.src;\n+-------------+-----------------------------------------------------+----------------------------------------------------+\n| vid         | v                                                   | e2                                                 |\n+-------------+-----------------------------------------------------+----------------------------------------------------+\n| \"player100\" | (\"player101\" :player{age: 36, name: \"Tony Parker\"}) | [:follow \"player101\"-&gt;\"player100\" @0 {degree: 95}] |\n| \"player102\" | (\"player101\" :player{age: 36, name: \"Tony Parker\"}) | [:follow \"player101\"-&gt;\"player102\" @0 {degree: 90}] |\n| \"player125\" | (\"player101\" :player{age: 36, name: \"Tony Parker\"}) | [:follow \"player101\"-&gt;\"player125\" @0 {degree: 95}] |\n+-------------+-----------------------------------------------------+----------------------------------------------------+\n</code></pre> <p>\u793a\u4f8b\u4e8c\uff1a\u901a\u8fc7<code>INNER JOIN</code>\u5c06\u7b2c\u4e00\u4e2a<code>LOOKUP</code>\u67e5\u8be2\u4e2d\u7684\u7ed3\u679c<code>src</code>\u5217\uff08<code>Tony Parker</code>\u7684 ID <code>player101</code>\uff09\u548c\u7b2c\u4e8c\u4e2a<code>FETCH</code>\u67e5\u8be2\u4e2d\u7684\u7ed3\u679c<code>src</code>\u5217\uff08<code>player101</code>\u5230<code>player100</code>\u7684\u8d77\u70b9 ID <code>player101</code>\uff09\u8fdb\u884c\u5339\u914d\u3002\u5339\u914d\u7684\u7ed3\u679c\u96c6\u4e3a\u90fd\u5305\u542b\u7684<code>player101</code>\uff0c\u57fa\u4e8e\u8fd9\u4e2a<code>player101</code>\u5339\u914d\u7684\u7ed3\u679c\uff0c\u7136\u540e\u901a\u8fc7<code>YIELD $a.src AS src, $a.v AS v, $b.e AS e</code>\u8fd4\u56de\u6700\u7ec8\u67e5\u8be2\u7ed3\u679c\u3002</p> <pre><code>nebula&gt; $a = LOOKUP ON player WHERE player.name == 'Tony Parker' YIELD id(vertex) as src, vertex AS v; \\\n        $b = FETCH PROP ON follow 'player101'-&gt;'player100' YIELD src(edge) as src, edge as e; \\\n        YIELD $a.src AS src, $a.v AS v, $b.e AS e FROM $a INNER JOIN $b ON $a.src == $b.src;\n+-------------+-----------------------------------------------------+----------------------------------------------------+\n| src         | v                                                   | e                                                  |\n+-------------+-----------------------------------------------------+----------------------------------------------------+\n| \"player101\" | (\"player101\" :player{age: 36, name: \"Tony Parker\"}) | [:follow \"player101\"-&gt;\"player100\" @0 {degree: 95}] |\n+-------------+-----------------------------------------------------+----------------------------------------------------+\n</code></pre> <p>\u793a\u4f8b\u4e09\uff1a\u4f7f\u7528<code>INNER JOIN</code>\u5173\u8054<code>LOOKUP</code>\u3001<code>GO</code>\u548c<code>FIND PATH</code>\u5b50\u53e5\u7684\u67e5\u8be2\u7684\u8fc7\u7a0b\u793a\u4f8b\u6b65\u9aa4\uff1a</p> <ol> <li>\u901a\u8fc7<code>LOOKUP ON</code>\u8bed\u53e5\uff0c\u5148\u5bf9<code>player</code>\u8868\u8fdb\u884c\u67e5\u8be2\uff0c\u627e\u5230\u540d\u4e3a<code>Tony Parker</code>\u7684\u7403\u5458\u9876\u70b9\uff0c\u5e76\u5c06\u5176 ID \u548c\u5c5e\u6027\u5b58\u50a8\u5230<code>$a.src</code>\u548c<code>v</code>\u5217\u4e2d\u3002</li> <li>\u518d\u901a\u8fc7<code>GO</code>\u67e5\u627e\u4ece<code>$a.src</code>\u8282\u70b9\u51fa\u53d1\u7ecf\u8fc7<code>follow</code>\u8fb9\u5f80\u5916\u8d70 2-5 \u6b65\u7684\u7403\u5458\u8282\u70b9\uff0c\u5176\u4e2d\u8981\u6c42\u8fd9\u4e9b\u8282\u70b9\u5bf9\u5e94\u7684<code>player</code>\u70b9\u5e74\u9f84\u5927\u4e8e 30 \u5c81\uff0c\u8fd4\u56de\u8fd9\u4e9b\u8282\u70b9\u7684 ID\uff0c\u5e76\u5c06\u5b83\u4eec\u5b58\u50a8\u5728<code>$b.dst</code>\u5217\u4e2d\u3002</li> <li>\u7136\u540e\u901a\u8fc7<code>FIND ALL PATH</code>\u8bed\u53e5\uff0c\u67e5\u627e\u4ece<code>$a.src</code>\u5230<code>$b.dst</code>\u7684\u6cbf<code>follow</code>\u6240\u6709\u8def\u5f84\uff0c\u5e76\u8fd4\u56de\u8def\u5f84<code>$c.p</code>\u4ee5\u53ca\u8def\u5f84\u4e2d\u7684\u7ec8\u70b9<code>$c.dst</code>\u3002</li> <li>\u6700\u540e\u901a\u8fc7<code>FIND SHORTEST PATH</code>\u8bed\u53e5\uff0c\u67e5\u627e\u4ece<code>$c.dst</code>\u5230<code>$a.src</code>\u7684\u6700\u77ed\u8def\u5f84\uff0c\u5e76\u8fd4\u56de\u8def\u5f84<code>$d.p</code>\u548c\u8def\u5f84\u8d77\u70b9<code>$d.src</code>\u3002</li> <li>\u4f7f\u7528<code>INNER JOIN</code>\u5c06 3 \u548c 4 \u4e2d\u5f97\u5230\u7684\u7ed3\u679c\u8054\u63a5\u8d77\u6765\uff0c\u5339\u914d<code>$c.dst</code>\u548c<code>$d.src</code>\u5217\uff0c\u4e3a\u6bcf\u4e2a\u8054\u63a5\u5339\u914d\u7684\u8bb0\u5f55\u8fd4\u56de<code>YIELD $c.forward AS forwardPath, $c.dst AS end, $d.p AS backwordPath</code>\u3002</li> </ol> <pre><code>nebula&gt; $a = LOOKUP ON player WHERE player.name == 'Tony Parker' YIELD id(vertex) as src, vertex AS v; \\\n        $b = GO 2 TO 5 STEPS FROM $a.src OVER follow WHERE $$.player.age &gt; 30 YIELD id($$) AS dst; \\\n        $c = (FIND ALL PATH FROM $a.src TO $b.dst OVER follow YIELD path AS p | YIELD $-.p AS forward, id(endNode($-.p)) AS dst); \\\n        $d = (FIND SHORTEST PATH FROM $c.dst TO $a.src OVER follow YIELD path AS p | YIELD $-.p AS p, id(startNode($-.p)) AS src); \\\n        YIELD $c.forward AS forwardPath, $c.dst AS end, $d.p AS backwordPath FROM $c INNER JOIN $d ON $c.dst == $d.src;\n+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------+-------------+-----------------------------------------------------------------------------+\n| forwardPath                                                                                                                                                           | end         | backwordPath                                                                |\n+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------+-------------+-----------------------------------------------------------------------------+\n| &lt;(\"player101\")-[:follow@0 {}]-&gt;(\"player102\")&gt;                                                                                                                         | \"player102\" | &lt;(\"player102\")-[:follow@0 {}]-&gt;(\"player101\")&gt;                               |\n| &lt;(\"player101\")-[:follow@0 {}]-&gt;(\"player100\")-[:follow@0 {}]-&gt;(\"player101\")-[:follow@0 {}]-&gt;(\"player102\")&gt;                                                             | \"player102\" | &lt;(\"player102\")-[:follow@0 {}]-&gt;(\"player101\")&gt;                               |\n| &lt;(\"player101\")-[:follow@0 {}]-&gt;(\"player125\")&gt;                                                                                                                         | \"player125\" | &lt;(\"player125\")-[:follow@0 {}]-&gt;(\"player100\")-[:follow@0 {}]-&gt;(\"player101\")&gt; |\n| &lt;(\"player101\")-[:follow@0 {}]-&gt;(\"player100\")-[:follow@0 {}]-&gt;(\"player125\")&gt;                                                                                           | \"player125\" | &lt;(\"player125\")-[:follow@0 {}]-&gt;(\"player100\")-[:follow@0 {}]-&gt;(\"player101\")&gt; |\n| &lt;(\"player101\")-[:follow@0 {}]-&gt;(\"player100\")-[:follow@0 {}]-&gt;(\"player101\")-[:follow@0 {}]-&gt;(\"player125\")&gt;                                                             | \"player125\" | &lt;(\"player125\")-[:follow@0 {}]-&gt;(\"player100\")-[:follow@0 {}]-&gt;(\"player101\")&gt; |\n| &lt;(\"player101\")-[:follow@0 {}]-&gt;(\"player102\")-[:follow@0 {}]-&gt;(\"player100\")-[:follow@0 {}]-&gt;(\"player125\")&gt;                                                             | \"player125\" | &lt;(\"player125\")-[:follow@0 {}]-&gt;(\"player100\")-[:follow@0 {}]-&gt;(\"player101\")&gt; |\n| &lt;(\"player101\")-[:follow@0 {}]-&gt;(\"player102\")-[:follow@0 {}]-&gt;(\"player101\")-[:follow@0 {}]-&gt;(\"player125\")&gt;                                                             | \"player125\" | &lt;(\"player125\")-[:follow@0 {}]-&gt;(\"player100\")-[:follow@0 {}]-&gt;(\"player101\")&gt; |\n...\n+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------+-------------+-----------------------------------------------------------------------------+\n</code></pre>"},{"location":"3.ngql-guide/8.clauses-and-options/limit/","title":"LIMIT","text":"<p><code>LIMIT</code>\u5b50\u53e5\u9650\u5236\u8f93\u51fa\u7ed3\u679c\u7684\u884c\u6570\u3002<code>LIMIT</code>\u5728\u539f\u751f nGQL \u8bed\u53e5\u548c openCypher \u517c\u5bb9\u8bed\u53e5\u4e2d\u7684\u7528\u6cd5\u6709\u6240\u4e0d\u540c\u3002</p> <ul> <li>\u5728\u539f\u751f nGQL \u8bed\u53e5\u4e2d\uff0c\u4e00\u822c\u9700\u8981\u5728<code>LIMIT</code>\u5b50\u53e5\u524d\u4f7f\u7528\u7ba1\u9053\u7b26\uff0c\u53ef\u4ee5\u76f4\u63a5\u5728 LIMIT \u8bed\u53e5\u540e\u8bbe\u7f6e\u6216\u8005\u7701\u7565\u504f\u79fb\u91cf\u53c2\u6570\u3002</li> </ul> <ul> <li> <p>\u5728 openCypher \u517c\u5bb9\u8bed\u53e5\u4e2d\uff0c\u4e0d\u5141\u8bb8\u5728<code>LIMIT</code>\u5b50\u53e5\u524d\u4f7f\u7528\u7ba1\u9053\u7b26\uff0c\u53ef\u4ee5\u4f7f\u7528<code>SKIP</code>\u6307\u660e\u504f\u79fb\u91cf\u3002</p> <p>Note</p> <p>\u5728\u539f\u751f nGQL \u6216 openCypher \u65b9\u5f0f\u4e2d\u4f7f\u7528<code>LIMIT</code>\u65f6\uff0c\u4f7f\u7528<code>ORDER BY</code>\u5b50\u53e5\u9650\u5236\u8f93\u51fa\u987a\u5e8f\u975e\u5e38\u91cd\u8981\uff0c\u5426\u5219\u4f1a\u8f93\u51fa\u4e00\u4e2a\u4e0d\u53ef\u9884\u77e5\u7684\u5b50\u96c6\u3002</p> </li> </ul>"},{"location":"3.ngql-guide/8.clauses-and-options/limit/#ngql_limit","title":"\u539f\u751f nGQL \u8bed\u53e5\u4e2d\u7684 LIMIT","text":"<p>\u5728\u539f\u751f nGQL \u4e2d\uff0c<code>LIMIT</code>\u6709\u901a\u7528\u8bed\u6cd5\u548c<code>GO</code>\u8bed\u53e5\u4e2d\u7684\u4e13\u5c5e\u8bed\u6cd5\u3002</p>"},{"location":"3.ngql-guide/8.clauses-and-options/limit/#ngql_limit_1","title":"\u539f\u751f nGQL \u4e2d\u7684\u901a\u7528 LIMIT \u8bed\u6cd5","text":"<p>\u539f\u751f nGQL \u4e2d\u7684\u901a\u7528<code>LIMIT</code>\u8bed\u6cd5\u4e0e<code>SQL</code>\u4e2d\u7684<code>LIMIT</code>\u539f\u7406\u76f8\u540c\u3002<code>LIMIT</code>\u5b50\u53e5\u63a5\u6536\u4e00\u4e2a\u6216\u4e24\u4e2a\u53c2\u6570\uff0c\u53c2\u6570\u7684\u503c\u5fc5\u987b\u662f\u975e\u8d1f\u6574\u6570\uff0c\u4e14\u5fc5\u987b\u7528\u5728\u7ba1\u9053\u7b26\u4e4b\u540e\u3002\u8bed\u6cd5\u548c\u8bf4\u660e\u5982\u4e0b\uff1a</p> <pre><code>... | LIMIT [&lt;offset&gt;,] &lt;number_rows&gt;;\n</code></pre> \u53c2\u6570 \u8bf4\u660e <code>offset</code> \u504f\u79fb\u91cf\uff0c\u5373\u5b9a\u4e49\u4ece\u54ea\u4e00\u884c\u5f00\u59cb\u8fd4\u56de\u3002\u7d22\u5f15\u4ece<code>0</code>\u5f00\u59cb\u3002\u9ed8\u8ba4\u503c\u4e3a<code>0</code>\uff0c\u8868\u793a\u4ece\u7b2c\u4e00\u884c\u5f00\u59cb\u8fd4\u56de\u3002 <code>number_rows</code> \u8fd4\u56de\u7684\u603b\u884c\u6570\u3002 <p>\u793a\u4f8b\uff1a</p> <pre><code># \u4ece\u7ed3\u679c\u4e2d\u8fd4\u56de\u6700\u524d\u9762\u7684 3 \u884c\u6570\u636e\u3002\nnebula&gt; LOOKUP ON player YIELD id(vertex)|\\\n        LIMIT 3;\n+-------------+\n| id(VERTEX)  |\n+-------------+\n| \"player100\" |\n| \"player101\" |\n| \"player102\" |\n+-------------+\n\n# \u4ece\u6392\u5e8f\u540e\u7ed3\u679c\u4e2d\u8fd4\u56de\u7b2c 2 \u884c\u5f00\u59cb\u7684 3 \u884c\u6570\u636e\u3002\nnebula&gt; GO FROM \"player100\" OVER follow REVERSELY \\\n        YIELD properties($$).name AS Friend, properties($$).age AS Age \\\n        | ORDER BY $-.Age, $-.Friend \\\n        | LIMIT 1, 3;\n+-------------------+-----+\n| Friend            | Age |\n+-------------------+-----+\n| \"Danny Green\"     | 31  |\n| \"Aron Baynes\"     | 32  |\n| \"Marco Belinelli\" | 32  |\n+-------------------+-----+\n</code></pre>"},{"location":"3.ngql-guide/8.clauses-and-options/limit/#go_limit","title":"GO \u8bed\u53e5\u4e2d\u7684 LIMIT","text":"<p><code>GO</code>\u8bed\u53e5\u4e2d\u7684<code>LIMIT</code>\u9664\u4e86\u652f\u6301\u539f\u751f nGQL \u4e2d\u7684\u901a\u7528\u8bed\u6cd5\u5916\uff0c\u8fd8\u652f\u6301\u6839\u636e\u8fb9\u9650\u5236\u8f93\u51fa\u7ed3\u679c\u6570\u91cf\u3002</p> <p>\u8bed\u6cd5\uff1a</p> <pre><code>&lt;go_statement&gt; LIMIT &lt;limit_list&gt;;\n</code></pre> <p><code>limit_list</code>\u662f\u4e00\u4e2a\u5217\u8868\uff0c\u5217\u8868\u4e2d\u7684\u5143\u7d20\u5fc5\u987b\u4e3a\u81ea\u7136\u6570\uff0c\u4e14\u5143\u7d20\u6570\u91cf\u5fc5\u987b\u4e0e<code>GO</code>\u8bed\u53e5\u4e2d\u7684<code>STEPS</code>\u7684\u6700\u5927\u6570\u76f8\u540c\u3002\u4e0b\u6587\u4ee5<code>GO 1 TO 3 STEPS FROM \"A\" OVER * LIMIT &lt;limit_list&gt;</code>\u4e3a\u4f8b\u8be6\u7ec6\u4ecb\u7ecd<code>LIMIT</code>\u7684\u8fd9\u79cd\u7528\u6cd5\u3002</p> <ul> <li>\u5217\u8868<code>limit_list</code>\u5fc5\u987b\u5305\u542b 3 \u4e2a\u81ea\u7136\u6570\u5143\u7d20\uff0c\u4f8b\u5982<code>GO 1 TO 3 STEPS FROM \"A\" OVER * LIMIT [1,2,4]</code>\u3002</li> <li><code>LIMIT [1,2,4]</code>\u4e2d\u7684<code>1</code>\u8868\u793a\u7cfb\u7edf\u5728\u7b2c\u4e00\u6b65\u65f6\u81ea\u52a8\u9009\u62e9 1 \u6761\u8fb9\u7ee7\u7eed\u904d\u5386\uff0c<code>2</code>\u8868\u793a\u5728\u7b2c\u4e8c\u6b65\u65f6\u9009\u62e9 2 \u6761\u8fb9\u7ee7\u7eed\u904d\u5386\uff0c<code>4</code>\u8868\u793a\u5728\u7b2c\u4e09\u6b65\u65f6\u9009\u62e9 4 \u6761\u8fb9\u7ee7\u7eed\u904d\u5386\u3002</li> <li>\u56e0\u4e3a<code>GO 1 TO 3 STEPS</code>\u8868\u793a\u8fd4\u56de\u7b2c\u4e00\u5230\u7b2c\u4e09\u6b65\u7684\u6240\u6709\u904d\u5386\u7ed3\u679c\uff0c\u56e0\u6b64\u4e0b\u56fe\u4e2d\u6240\u6709\u7ea2\u8272\u8fb9\u548c\u5b83\u4eec\u7684\u539f\u70b9\u4e0e\u76ee\u7684\u70b9\u90fd\u4f1a\u88ab\u8fd9\u6761<code>GO</code>\u8bed\u53e5\u5339\u914d\u4e0a\uff0c\u800c\u9ec4\u8272\u8fb9\u8868\u793a<code>GO</code>\u8bed\u53e5\u904d\u5386\u65f6\u6ca1\u6709\u9009\u62e9\u7684\u8def\u5f84\u3002\u5982\u679c\u4e0d\u662f<code>GO 1 TO 3 STEPS</code>\u800c\u662f<code>GO 3 STEPS</code>\uff0c\u5219\u53ea\u4f1a\u5339\u914d\u4e0a\u7b2c\u4e09\u6b65\u7684\u7ea2\u8272\u8fb9\u548c\u5b83\u4eec\u4e24\u7aef\u7684\u70b9\u3002</li> </ul> <p></p> <p>\u5728 basketballplayer \u6570\u636e\u96c6\u4e2d\u7684\u6267\u884c\u793a\u4f8b\u5982\u4e0b\uff1a</p> <pre><code>nebula&gt; GO 3 STEPS FROM \"player100\" \\\n        OVER * \\\n        YIELD properties($$).name AS NAME, properties($$).age AS Age \\\n        LIMIT [3,3,3];\n+-----------------+----------+\n| NAME            | Age      |\n+-----------------+----------+\n| \"Tony Parker\"   | 36       |\n| \"Manu Ginobili\" | 41       |\n| \"Spurs\"         | __NULL__ |\n+-----------------+----------+\n\nnebula&gt; GO 3 STEPS FROM \"player102\" OVER * BIDIRECT\\\n        YIELD dst(edge) \\\n        LIMIT [rand32(5),rand32(5),rand32(5)];\n+-------------+\n| dst(EDGE)   |\n+-------------+\n| \"player100\" |\n| \"player100\" |\n+-------------+\n</code></pre>"},{"location":"3.ngql-guide/8.clauses-and-options/limit/#opencypher_limit","title":"openCypher \u517c\u5bb9\u8bed\u53e5\u4e2d\u7684 LIMIT","text":"<p>\u5728<code>MATCH</code>\u7b49 openCypher \u517c\u5bb9\u8bed\u53e5\u4e2d\u4f7f\u7528 LIMIT \u4e0d\u9700\u8981\u52a0\u7ba1\u9053\u7b26\u3002\u8bed\u6cd5\u548c\u8bf4\u660e\u5982\u4e0b\uff1a</p> <pre><code>... [SKIP &lt;offset&gt;] [LIMIT &lt;number_rows&gt;];\n</code></pre> \u53c2\u6570 \u8bf4\u660e <code>offset</code> \u504f\u79fb\u91cf\uff0c\u5373\u5b9a\u4e49\u4ece\u54ea\u4e00\u884c\u5f00\u59cb\u8fd4\u56de\u3002\u7d22\u5f15\u4ece<code>0</code>\u5f00\u59cb\u3002\u9ed8\u8ba4\u503c\u4e3a<code>0</code>\uff0c\u8868\u793a\u4ece\u7b2c\u4e00\u884c\u5f00\u59cb\u8fd4\u56de\u3002 <code>number_rows</code> \u8fd4\u56de\u7684\u603b\u884c\u6570\u91cf\u3002 <p><code>offset</code>\u548c<code>number_rows</code>\u53ef\u4ee5\u4f7f\u7528\u8868\u8fbe\u5f0f\uff0c\u4f46\u662f\u8868\u8fbe\u5f0f\u7684\u7ed3\u679c\u5fc5\u987b\u662f\u975e\u8d1f\u6574\u6570\u3002</p> <p>Note</p> <p>\u4e24\u4e2a\u6574\u6570\u7ec4\u6210\u7684\u5206\u6570\u8868\u8fbe\u5f0f\u4f1a\u81ea\u52a8\u5411\u4e0b\u53d6\u6574\u3002\u4f8b\u5982<code>8/6</code>\u5411\u4e0b\u53d6\u6574\u4e3a 1\u3002</p>"},{"location":"3.ngql-guide/8.clauses-and-options/limit/#limit_1","title":"\u5355\u72ec\u4f7f\u7528 LIMIT","text":"<p><code>LIMIT</code>\u53ef\u4ee5\u5355\u72ec\u4f7f\u7528\uff0c\u8fd4\u56de\u6307\u5b9a\u6570\u91cf\u7684\u7ed3\u679c\u3002</p> <pre><code>nebula&gt; MATCH (v:player) RETURN v.player.name AS Name, v.player.age AS Age \\\n        ORDER BY Age LIMIT 5;\n+-------------------------+-----+\n| Name                    | Age |\n+-------------------------+-----+\n| \"Luka Doncic\"           | 20  |\n| \"Ben Simmons\"           | 22  |\n| \"Kristaps Porzingis\"    | 23  |\n| \"Giannis Antetokounmpo\" | 24  |\n| \"Kyle Anderson\"         | 25  |\n+-------------------------+-----+\n</code></pre>"},{"location":"3.ngql-guide/8.clauses-and-options/limit/#skip","title":"\u5355\u72ec\u4f7f\u7528 SKIP","text":"<p><code>SKIP</code>\u53ef\u4ee5\u5355\u72ec\u4f7f\u7528\uff0c\u7528\u4e8e\u8bbe\u7f6e\u504f\u79fb\u91cf\uff0c\u8fd4\u56de\u6307\u5b9a\u4f4d\u7f6e\u4e4b\u540e\u7684\u6570\u636e\u3002</p> <pre><code>nebula&gt; MATCH (v:player{name:\"Tim Duncan\"}) --&gt; (v2) \\\n        RETURN v2.player.name AS Name, v2.player.age AS Age \\\n        ORDER BY Age DESC SKIP 1;\n+-----------------+-----+\n| Name            | Age |\n+-----------------+-----+\n| \"Manu Ginobili\" | 41  |\n| \"Tony Parker\"   | 36  |\n+-----------------+-----+\n\nnebula&gt; MATCH (v:player{name:\"Tim Duncan\"}) --&gt; (v2) \\\n        RETURN v2.player.name AS Name, v2.player.age AS Age \\\n        ORDER BY Age DESC SKIP 1+1;\n+---------------+-----+\n| Name          | Age |\n+---------------+-----+\n| \"Tony Parker\" | 36  |\n+---------------+-----+\n</code></pre>"},{"location":"3.ngql-guide/8.clauses-and-options/limit/#skip_limit","title":"\u540c\u65f6\u4f7f\u7528 SKIP \u4e0e LIMIT","text":"<p>\u540c\u65f6\u4f7f\u7528<code>SKIP</code>\u4e0e<code>LIMIT</code>\u53ef\u4ee5\u8fd4\u56de\u4ece\u6307\u5b9a\u4f4d\u7f6e\u5f00\u59cb\u7684\u6307\u5b9a\u6570\u91cf\u7684\u6570\u636e\u3002</p> <pre><code>nebula&gt; MATCH (v:player{name:\"Tim Duncan\"}) --&gt; (v2) \\\n        RETURN v2.player.name AS Name, v2.player.age AS Age \\\n        ORDER BY Age DESC SKIP 1 LIMIT 1;\n+-----------------+-----+\n| Name            | Age |\n+-----------------+-----+\n| \"Manu Ginobili\" | 41  |\n+-----------------+-----+\n</code></pre>"},{"location":"3.ngql-guide/8.clauses-and-options/order-by/","title":"ORDER BY","text":"<p><code>ORDER BY</code>\u5b50\u53e5\u6307\u5b9a\u8f93\u51fa\u7ed3\u679c\u7684\u6392\u5e8f\u89c4\u5219\u3002</p> <ul> <li>\u5728\u539f\u751f nGQL \u4e2d\uff0c\u5fc5\u987b\u5728<code>YIELD</code>\u5b50\u53e5\u4e4b\u540e\u4f7f\u7528\u7ba1\u9053\u7b26\uff08|\uff09\u548c<code>ORDER BY</code>\u5b50\u53e5\u3002</li> </ul> <ul> <li>\u5728 openCypher \u65b9\u5f0f\u4e2d\uff0c\u4e0d\u5141\u8bb8\u4f7f\u7528\u7ba1\u9053\u7b26\u3002\u5728<code>RETURN</code>\u5b50\u53e5\u4e4b\u540e\u4f7f\u7528<code>ORDER BY</code>\u5b50\u53e5\u3002</li> </ul> <p>\u6392\u5e8f\u89c4\u5219\u5206\u4e3a\u5982\u4e0b\u4e24\u79cd\uff1a</p> <ul> <li><code>ASC</code>\uff08\u9ed8\u8ba4\uff09: \u5347\u5e8f\u3002</li> <li><code>DESC</code>: \u964d\u5e8f\u3002</li> </ul>"},{"location":"3.ngql-guide/8.clauses-and-options/order-by/#ngql","title":"\u539f\u751f nGQL \u8bed\u6cd5","text":"<pre><code>&lt;YIELD clause&gt;\n| ORDER BY &lt;expression&gt; [ASC | DESC] [, &lt;expression&gt; [ASC | DESC] ...];\n</code></pre> <p>Compatibility</p> <p>\u539f\u751f nGQL \u8bed\u6cd5\u4e2d\uff0c<code>ORDER BY</code>\u547d\u4ee4\u540e\u5fc5\u987b\u4f7f\u7528\u5f15\u7528\u7b26<code>$-.</code>\u3002\u4f46\u5728 2.5.0 \u4e4b\u524d\u7684\u7248\u672c\u4e2d\u4e0d\u9700\u8981\u3002</p>"},{"location":"3.ngql-guide/8.clauses-and-options/order-by/#_1","title":"\u793a\u4f8b","text":"<pre><code>nebula&gt; FETCH PROP ON player \"player100\", \"player101\", \"player102\", \"player103\" \\\n        YIELD properties(vertex).age AS age, properties(vertex).name AS name \\\n        | ORDER BY $-.age ASC, $-.name DESC;\n+-----+---------------------+\n| age | name                |\n+-----+---------------------+\n| 32  | \"Rudy Gay\"          |\n| 33  | \"LaMarcus Aldridge\" |\n| 36  | \"Tony Parker\"       |\n| 42  | \"Tim Duncan\"        |\n+-----+---------------------+\n\nnebula&gt; $var = GO FROM \"player100\" OVER follow \\\n        YIELD dst(edge) AS dst; \\\n        ORDER BY $var.dst DESC;\n+-------------+\n| dst         |\n+-------------+\n| \"player125\" |\n| \"player101\" |\n+-------------+\n</code></pre>"},{"location":"3.ngql-guide/8.clauses-and-options/order-by/#opencypher","title":"OpenCypher \u65b9\u5f0f\u8bed\u6cd5","text":"<pre><code>&lt;RETURN clause&gt;\nORDER BY &lt;expression&gt; [ASC | DESC] [, &lt;expression&gt; [ASC | DESC] ...];\n</code></pre>"},{"location":"3.ngql-guide/8.clauses-and-options/order-by/#_2","title":"\u793a\u4f8b","text":"<pre><code>nebula&gt; MATCH (v:player) RETURN v.player.name AS Name, v.player.age AS Age  \\\n        ORDER BY Name DESC;\n+-----------------+-----+\n| Name            | Age |\n+-----------------+-----+\n| \"Yao Ming\"      | 38  |\n| \"Vince Carter\"  | 42  |\n| \"Tracy McGrady\" | 39  |\n| \"Tony Parker\"   | 36  |\n| \"Tim Duncan\"    | 42  |\n+-----------------+-----+\n...\n\n# \u9996\u5148\u4ee5\u5e74\u9f84\u6392\u5e8f\uff0c\u5982\u679c\u5e74\u9f84\u76f8\u540c\uff0c\u518d\u4ee5\u59d3\u540d\u6392\u5e8f\u3002\nnebula&gt; MATCH (v:player) RETURN v.player.age AS Age, v.player.name AS Name  \\\n        ORDER BY Age DESC, Name ASC;\n+-----+-------------------+\n| Age | Name              |\n+-----+-------------------+\n| 47  | \"Shaquille O'Neal\" |\n| 46  | \"Grant Hill\"      |\n| 45  | \"Jason Kidd\"      |\n| 45  | \"Steve Nash\"      |\n+-----+-------------------+\n...\n</code></pre>"},{"location":"3.ngql-guide/8.clauses-and-options/order-by/#null","title":"NULL \u503c\u7684\u6392\u5e8f","text":"<p>\u5347\u5e8f\u6392\u5217\u65f6\uff0c\u4f1a\u5728\u8f93\u51fa\u7684\u6700\u540e\u5217\u51fa NULL \u503c\uff0c\u964d\u5e8f\u6392\u5217\u65f6\uff0c\u4f1a\u5728\u8f93\u51fa\u7684\u5f00\u5934\u5217\u51fa NULL \u503c\u3002</p> <pre><code>nebula&gt; MATCH (v:player{name:\"Tim Duncan\"}) --&gt; (v2) \\\n        RETURN v2.player.name AS Name, v2.player.age AS Age  \\\n        ORDER BY Age;\n+-----------------+----------+\n| Name            | Age      |\n+-----------------+----------+\n| \"Tony Parker\"   | 36       |\n| \"Manu Ginobili\" | 41       |\n| __NULL__        | __NULL__ |\n+-----------------+----------+\n\nnebula&gt; MATCH (v:player{name:\"Tim Duncan\"}) --&gt; (v2) \\\n        RETURN v2.player.name AS Name, v2.player.age AS Age  \\\n        ORDER BY Age DESC;\n+-----------------+----------+\n| Name            | Age      |\n+-----------------+----------+\n| __NULL__        | __NULL__ |\n| \"Manu Ginobili\" | 41       |\n| \"Tony Parker\"   | 36       |\n+-----------------+----------+\n</code></pre>"},{"location":"3.ngql-guide/8.clauses-and-options/return/","title":"RETURN","text":"<p><code>RETURN</code>\u5b50\u53e5\u5b9a\u4e49\u4e86 nGQL \u67e5\u8be2\u7684\u8f93\u51fa\u7ed3\u679c\u3002\u5982\u679c\u9700\u8981\u8fd4\u56de\u591a\u4e2a\u5b57\u6bb5\uff0c\u7528\u82f1\u6587\u9017\u53f7\uff08,\uff09\u5206\u9694\u3002</p> <p><code>RETURN</code>\u53ef\u4ee5\u5f15\u5bfc\u5b50\u53e5\u6216\u8bed\u53e5\uff1a</p> <ul> <li><code>RETURN</code>\u5b50\u53e5\u53ef\u4ee5\u7528\u4e8e nGQL \u4e2d\u7684 openCypher \u65b9\u5f0f\u8bed\u53e5\u4e2d\uff0c\u4f8b\u5982<code>MATCH</code>\u6216<code>UNWIND</code>\u3002</li> </ul> <ul> <li><code>RETURN</code>\u53ef\u4ee5\u5355\u72ec\u4f7f\u7528\uff0c\u8f93\u51fa\u8868\u8fbe\u5f0f\u7684\u7ed3\u679c\u3002</li> </ul>"},{"location":"3.ngql-guide/8.clauses-and-options/return/#opencypher","title":"openCypher \u517c\u5bb9\u6027","text":"<p>\u672c\u6587\u64cd\u4f5c\u4ec5\u9002\u7528\u4e8e nGQL \u4e2d\u7684 openCypher \u65b9\u5f0f\u3002\u5173\u4e8e\u539f\u751f nGQL \u5982\u4f55\u5b9a\u4e49\u8f93\u51fa\u7ed3\u679c\uff0c\u8bf7\u53c2\u89c1 <code>YIELD</code>\u3002</p> <p><code>RETURN</code>\u4e0d\u652f\u6301\u5982\u4e0b openCypher \u529f\u80fd\uff1a</p> <ul> <li> <p>\u4f7f\u7528\u4e0d\u5728\u82f1\u6587\u5b57\u6bcd\u8868\u4e2d\u7684\u5b57\u7b26\u4f5c\u4e3a\u53d8\u91cf\u540d\u3002\u4f8b\u5982\uff1a</p> <pre><code>MATCH (`\u70b9 1`:player) \\\nRETURN `\u70b9 1`;\n</code></pre> </li> </ul> <ul> <li> <p>\u8bbe\u7f6e\u4e00\u4e2a\u6a21\u5f0f\uff0c\u5e76\u8fd4\u56de\u8be5\u6a21\u5f0f\u5339\u914d\u7684\u6240\u6709\u5143\u7d20\u3002\u4f8b\u5982\uff1a</p> <pre><code>MATCH (v:player) \\\nRETURN (v)-[e]-&gt;(v2);\n</code></pre> </li> </ul>"},{"location":"3.ngql-guide/8.clauses-and-options/return/#_1","title":"\u5386\u53f2\u7248\u672c\u517c\u5bb9\u6027","text":"<ul> <li>\u5728 nGQL 1.x \u4e2d\uff0c<code>RETURN</code>\u9002\u7528\u4e8e\u539f\u751f nGQL\uff0c\u8bed\u6cd5\u4e3a<code>RETURN &lt;var_ref&gt; IF &lt;var_ref&gt; IS NOT NULL</code>\u3002</li> </ul> <ul> <li>\u4ece nGQL 2.0 \u5f00\u59cb\uff0c<code>RETURN</code>\u4e0d\u9002\u7528\u4e8e\u539f\u751f nGQL\u3002</li> </ul>"},{"location":"3.ngql-guide/8.clauses-and-options/return/#map","title":"Map \u987a\u5e8f\u8bf4\u660e","text":"<p><code>RETURN</code>\u8fd4\u56de Map \u65f6\uff0cKey \u7684\u987a\u5e8f\u662f\u672a\u5b9a\u4e49\u7684\u3002</p> <pre><code>nebula&gt; RETURN {age: 32, name: \"Marco Belinelli\"};\n+------------------------------------+\n| {age:32,name:\"Marco Belinelli\"}    |\n+------------------------------------+\n| {age: 32, name: \"Marco Belinelli\"} |\n+------------------------------------+\n\nnebula&gt; RETURN {zage: 32, name: \"Marco Belinelli\"};\n+-------------------------------------+\n| {zage:32,name:\"Marco Belinelli\"}    |\n+-------------------------------------+\n| {name: \"Marco Belinelli\", zage: 32} |\n+-------------------------------------+\n</code></pre>"},{"location":"3.ngql-guide/8.clauses-and-options/return/#_2","title":"\u8fd4\u56de\u70b9\u6216\u8fb9","text":"<p>\u4f7f\u7528<code>RETURN {&lt;vertex_name&gt; | &lt;edge_name&gt;}</code>\u8fd4\u56de\u70b9\u6216\u8fb9\u7684\u6240\u6709\u4fe1\u606f\u3002</p> <pre><code>// \u8fd4\u56de\u70b9\nnebula&gt; MATCH (v:player) \\ \n        RETURN v;\n+---------------------------------------------------------------+\n| v                                                             |\n+---------------------------------------------------------------+\n| (\"player104\" :player{age: 32, name: \"Marco Belinelli\"})       |\n| (\"player107\" :player{age: 32, name: \"Aron Baynes\"})           |\n| (\"player116\" :player{age: 34, name: \"LeBron James\"})          |\n| (\"player120\" :player{age: 29, name: \"James Harden\"})          |\n| (\"player125\" :player{age: 41, name: \"Manu Ginobili\"})         |\n+---------------------------------------------------------------+\n...\n\n// \u8fd4\u56de\u8fb9\nnebula&gt; MATCH (v:player)-[e]-&gt;() \\\n        RETURN e;\n+------------------------------------------------------------------------------+\n| e                                                                            |\n+------------------------------------------------------------------------------+\n| [:follow \"player104\"-&gt;\"player100\" @0 {degree: 55}]                           |\n| [:follow \"player104\"-&gt;\"player101\" @0 {degree: 50}]                           |\n| [:follow \"player104\"-&gt;\"player105\" @0 {degree: 60}]                           |\n| [:serve \"player104\"-&gt;\"team200\" @0 {end_year: 2009, start_year: 2007}]        |\n| [:serve \"player104\"-&gt;\"team208\" @0 {end_year: 2016, start_year: 2015}]        |\n+------------------------------------------------------------------------------+\n...\n</code></pre>"},{"location":"3.ngql-guide/8.clauses-and-options/return/#id","title":"\u8fd4\u56de\u70b9 ID","text":"<p>\u4f7f\u7528<code>id()</code>\u51fd\u6570\u8fd4\u56de\u70b9 ID\u3002 <pre><code>nebula&gt; MATCH (v:player{name:\"Tim Duncan\"}) \\\n        RETURN id(v);\n+-------------+\n| id(v)       |\n+-------------+\n| \"player100\" |\n+-------------+\n</code></pre></p>"},{"location":"3.ngql-guide/8.clauses-and-options/return/#tag","title":"\u8fd4\u56de Tag","text":"<p>\u4f7f\u7528<code>labels()</code>\u51fd\u6570\u8fd4\u56de\u70b9\u4e0a\u7684 Tag \u5217\u8868\u3002</p> <pre><code>nebula&gt; MATCH (v:player{name:\"Tim Duncan\"}) \\\n        RETURN labels(v);\n+------------+\n| labels(v)  |\n+------------+\n| [\"player\"] |\n+------------+\n</code></pre> <p>\u8fd4\u56de\u5217\u8868<code>labels(v)</code>\u4e2d\u7684\u7b2c N \u4e2a\u5143\u7d20\uff0c\u53ef\u4ee5\u4f7f\u7528<code>labels(v)[n-1]</code>\u3002\u4f8b\u5982\u4e0b\u9762\u793a\u4f8b\u4f7f\u7528<code>labels(v)[0]</code>\u68c0\u7d22\u7b2c\u4e00\u4e2a\u5143\u7d20\u3002</p> <pre><code>nebula&gt; MATCH (v:player{name:\"Tim Duncan\"}) \\\n        RETURN labels(v)[0];\n+--------------+\n| labels(v)[0] |\n+--------------+\n| \"player\"     |\n+--------------+\n</code></pre>"},{"location":"3.ngql-guide/8.clauses-and-options/return/#_3","title":"\u8fd4\u56de\u5c5e\u6027","text":"<p>\u8fd4\u56de\u70b9\u7684\u5c5e\u6027\u65f6\uff0c\u5fc5\u9700\u6307\u5b9a\u5c5e\u6027\u6240\u5c5e\u7684 Tag\uff0c\u56e0\u4e3a\u70b9\u53ef\u4ee5\u6709\u591a\u4e2a Tag\uff0c\u5e76\u4e14\u540c\u4e00\u4e2a\u5c5e\u6027\u540d\u53ef\u4ee5\u5728\u4e0d\u540c\u7684 Tag \u4e0a\u51fa\u73b0\u3002</p> <p>\u652f\u6301\u6307\u5b9a\u70b9\u7684 Tag \u8fd4\u56de\u8be5 Tag \u7684\u6240\u6709\u5c5e\u6027\uff1b\u4e5f\u652f\u6301\u6307\u5b9a\u70b9\u7684 Tag \u548c\u67d0\u4e2a\u5c5e\u6027\u540d\uff0c\u8fd4\u56de\u8be5 Tag \u7684\u6307\u5b9a\u5c5e\u6027\u3002</p> <pre><code>// \u8fd4\u56de\u70b9\u7684\u5c5e\u6027\nnebula&gt; MATCH (v:player) \\\n        RETURN v.player, v.player.name, v.player.age \\\n        LIMIT 3;\n+--------------------------------------+---------------------+--------------+\n| v.player                             | v.player.name       | v.player.age |\n+--------------------------------------+---------------------+--------------+\n| {age: 33, name: \"LaMarcus Aldridge\"} | \"LaMarcus Aldridge\" | 33           |\n| {age: 25, name: \"Kyle Anderson\"}     | \"Kyle Anderson\"     | 25           |\n| {age: 40, name: \"Kobe Bryant\"}       | \"Kobe Bryant\"       | 40           |\n+--------------------------------------+---------------------+--------------+\n</code></pre> <p>\u8fd4\u56de\u8fb9\u7684\u5c5e\u6027\u65f6\uff0c\u65e0\u9700\u6307\u5b9a\u5c5e\u6027\u6240\u5c5e\u7684 Edge type\uff0c\u56e0\u4e3a\u8fb9\u53ea\u80fd\u6709\u4e00\u4e2a Edge type\u3002</p> <pre><code>// \u8fd4\u56de\u8fb9\u7684\u5c5e\u6027\nnebula&gt; MATCH (v:player{name:\"Tim Duncan\"})-[e]-&gt;() \\\n        RETURN e.start_year, e.degree \\\n+--------------+----------+\n| e.start_year | e.degree |\n+--------------+----------+\n| __NULL__     | 95       |\n| __NULL__     | 95       |\n| 1997         | __NULL__ |\n+--------------+----------+\n</code></pre> <p>\u4f7f\u7528<code>properties()</code>\u51fd\u6570\u8fd4\u56de\u70b9\u6216\u8fb9\u7684\u6240\u6709\u5c5e\u6027\u3002</p> <pre><code>nebula&gt; MATCH p=(v:player{name:\"Tim Duncan\"})-[]-&gt;(v2) \\\n        RETURN properties(v2);\n+----------------------------------+\n| properties(v2)                   |\n+----------------------------------+\n| {name: \"Spurs\"}                  |\n| {age: 36, name: \"Tony Parker\"}   |\n| {age: 41, name: \"Manu Ginobili\"} |\n+----------------------------------+\n</code></pre>"},{"location":"3.ngql-guide/8.clauses-and-options/return/#edge_type","title":"\u8fd4\u56de Edge type","text":"<p>\u4f7f\u7528<code>type()</code>\u51fd\u6570\u8fd4\u56de\u5339\u914d\u7684 Edge type\u3002</p> <pre><code>nebula&gt; MATCH p=(v:player{name:\"Tim Duncan\"})-[e]-&gt;() \\\n        RETURN DISTINCT type(e);\n+----------+\n| type(e)  |\n+----------+\n| \"serve\"  |\n| \"follow\" |\n+----------+\n</code></pre>"},{"location":"3.ngql-guide/8.clauses-and-options/return/#_4","title":"\u8fd4\u56de\u8def\u5f84","text":"<p>\u4f7f\u7528<code>RETURN &lt;path_name&gt;</code>\u8fd4\u56de\u5339\u914d\u8def\u5f84\u7684\u6240\u6709\u4fe1\u606f\u3002</p> <pre><code>nebula&gt; MATCH p=(v:player{name:\"Tim Duncan\"})-[*3]-&gt;() \\\n        RETURN p;\n+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+\n| p                                                                                                                                                                                                                                                                                                              |\n+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+\n| &lt;(\"player100\" :player{age: 42, name: \"Tim Duncan\"})-[:follow@0 {degree: 95}]-&gt;(\"player101\" :player{age: 36, name: \"Tony Parker\"})-[:follow@0 {degree: 90}]-&gt;(\"player102\" :player{age: 33, name: \"LaMarcus Aldridge\"})-[:serve@0 {end_year: 2019, start_year: 2015}]-&gt;(\"team204\" :team{name: \"Spurs\"})&gt;         |\n| &lt;(\"player100\" :player{age: 42, name: \"Tim Duncan\"})-[:follow@0 {degree: 95}]-&gt;(\"player101\" :player{age: 36, name: \"Tony Parker\"})-[:follow@0 {degree: 90}]-&gt;(\"player102\" :player{age: 33, name: \"LaMarcus Aldridge\"})-[:serve@0 {end_year: 2015, start_year: 2006}]-&gt;(\"team203\" :team{name: \"Trail Blazers\"})&gt; |\n| &lt;(\"player100\" :player{age: 42, name: \"Tim Duncan\"})-[:follow@0 {degree: 95}]-&gt;(\"player101\" :player{age: 36, name: \"Tony Parker\"})-[:follow@0 {degree: 90}]-&gt;(\"player102\" :player{age: 33, name: \"LaMarcus Aldridge\"})-[:follow@0 {degree: 75}]-&gt;(\"player101\" :player{age: 36, name: \"Tony Parker\"})&gt;           |\n+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+\n...\n</code></pre>"},{"location":"3.ngql-guide/8.clauses-and-options/return/#_5","title":"\u8fd4\u56de\u8def\u5f84\u4e2d\u7684\u70b9","text":"<p>\u4f7f\u7528<code>nodes()</code>\u51fd\u6570\u8fd4\u56de\u8def\u5f84\u4e2d\u7684\u6240\u6709\u70b9\u3002</p> <pre><code>nebula&gt; MATCH p=(v:player{name:\"Tim Duncan\"})-[]-&gt;(v2) \\\n        RETURN nodes(p);\n+-------------------------------------------------------------------------------------------------------------+\n| nodes(p)                                                                                                    |\n+-------------------------------------------------------------------------------------------------------------+\n| [(\"player100\" :player{age: 42, name: \"Tim Duncan\"}), (\"team204\" :team{name: \"Spurs\"})]                      |\n| [(\"player100\" :player{age: 42, name: \"Tim Duncan\"}), (\"player101\" :player{age: 36, name: \"Tony Parker\"})]   |\n| [(\"player100\" :player{age: 42, name: \"Tim Duncan\"}), (\"player125\" :player{age: 41, name: \"Manu Ginobili\"})] |\n+-------------------------------------------------------------------------------------------------------------+\n</code></pre>"},{"location":"3.ngql-guide/8.clauses-and-options/return/#_6","title":"\u8fd4\u56de\u8def\u5f84\u4e2d\u7684\u8fb9","text":"<p>\u4f7f\u7528<code>relationships()</code>\u51fd\u6570\u8fd4\u56de\u8def\u5f84\u4e2d\u7684\u6240\u6709\u8fb9\u3002</p> <pre><code>nebula&gt; MATCH p=(v:player{name:\"Tim Duncan\"})-[]-&gt;(v2) \\\n        RETURN relationships(p);\n+-------------------------------------------------------------------------+\n| relationships(p)                                                        |\n+-------------------------------------------------------------------------+\n| [[:serve \"player100\"-&gt;\"team204\" @0 {end_year: 2016, start_year: 1997}]] |\n| [[:follow \"player100\"-&gt;\"player101\" @0 {degree: 95}]]                    |\n| [[:follow \"player100\"-&gt;\"player125\" @0 {degree: 95}]]                    |\n+-------------------------------------------------------------------------+\n</code></pre>"},{"location":"3.ngql-guide/8.clauses-and-options/return/#_7","title":"\u8fd4\u56de\u8def\u5f84\u957f\u5ea6","text":"<p>\u4f7f\u7528<code>length()</code>\u51fd\u6570\u68c0\u7d22\u8def\u5f84\u7684\u957f\u5ea6\u3002</p> <pre><code>nebula&gt; MATCH p=(v:player{name:\"Tim Duncan\"})-[*..2]-&gt;(v2) \\\n        RETURN p AS Paths, length(p) AS Length;\n+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+\n| Paths                                                                                                                                                                                                                  | Length |\n+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+\n| &lt;(\"player100\" :player{age: 42, name: \"Tim Duncan\"})-[:serve@0 {end_year: 2016, start_year: 1997}]-&gt;(\"team204\" :team{name: \"Spurs\"})&gt;                                                                                   | 1      |\n| &lt;(\"player100\" :player{age: 42, name: \"Tim Duncan\"})-[:follow@0 {degree: 95}]-&gt;(\"player101\" :player{age: 36, name: \"Tony Parker\"})&gt;                                                                                     | 1      |\n| &lt;(\"player100\" :player{age: 42, name: \"Tim Duncan\"})-[:follow@0 {degree: 95}]-&gt;(\"player125\" :player{age: 41, name: \"Manu Ginobili\"})&gt;                                                                                   | 1      |\n| &lt;(\"player100\" :player{age: 42, name: \"Tim Duncan\"})-[:follow@0 {degree: 95}]-&gt;(\"player101\" :player{age: 36, name: \"Tony Parker\"})-[:serve@0 {end_year: 2018, start_year: 1999}]-&gt;(\"team204\" :team{name: \"Spurs\"})&gt;     | 2      |\n| &lt;(\"player100\" :player{age: 42, name: \"Tim Duncan\"})-[:follow@0 {degree: 95}]-&gt;(\"player101\" :player{age: 36, name: \"Tony Parker\"})-[:serve@0 {end_year: 2019, start_year: 2018}]-&gt;(\"team215\" :team{name: \"Hornets\"})&gt;   | 2      |\n| &lt;(\"player100\" :player{age: 42, name: \"Tim Duncan\"})-[:follow@0 {degree: 95}]-&gt;(\"player101\" :player{age: 36, name: \"Tony Parker\"})-[:follow@0 {degree: 95}]-&gt;(\"player100\" :player{age: 42, name: \"Tim Duncan\"})&gt;        | 2      |\n| &lt;(\"player100\" :player{age: 42, name: \"Tim Duncan\"})-[:follow@0 {degree: 95}]-&gt;(\"player101\" :player{age: 36, name: \"Tony Parker\"})-[:follow@0 {degree: 90}]-&gt;(\"player102\" :player{age: 33, name: \"LaMarcus Aldridge\"})&gt; | 2      |\n| &lt;(\"player100\" :player{age: 42, name: \"Tim Duncan\"})-[:follow@0 {degree: 95}]-&gt;(\"player101\" :player{age: 36, name: \"Tony Parker\"})-[:follow@0 {degree: 95}]-&gt;(\"player125\" :player{age: 41, name: \"Manu Ginobili\"})&gt;     | 2      |\n| &lt;(\"player100\" :player{age: 42, name: \"Tim Duncan\"})-[:follow@0 {degree: 95}]-&gt;(\"player125\" :player{age: 41, name: \"Manu Ginobili\"})-[:serve@0 {end_year: 2018, start_year: 2002}]-&gt;(\"team204\" :team{name: \"Spurs\"})&gt;   | 2      |\n| &lt;(\"player100\" :player{age: 42, name: \"Tim Duncan\"})-[:follow@0 {degree: 95}]-&gt;(\"player125\" :player{age: 41, name: \"Manu Ginobili\"})-[:follow@0 {degree: 90}]-&gt;(\"player100\" :player{age: 42, name: \"Tim Duncan\"})&gt;      | 2      |\n+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+\n</code></pre>"},{"location":"3.ngql-guide/8.clauses-and-options/return/#_8","title":"\u8fd4\u56de\u6240\u6709\u5143\u7d20","text":"<p>\u4f7f\u7528\u661f\u53f7\uff08*\uff09\u8fd4\u56de\u5339\u914d\u6a21\u5f0f\u4e2d\u7684\u6240\u6709\u5143\u7d20\u3002</p> <pre><code>nebula&gt; MATCH (v:player{name:\"Tim Duncan\"}) \\\n        RETURN *;\n+----------------------------------------------------+\n| v                                                  |\n+----------------------------------------------------+\n| (\"player100\" :player{age: 42, name: \"Tim Duncan\"}) |\n+----------------------------------------------------+\n\nnebula&gt; MATCH (v:player{name:\"Tim Duncan\"})-[e]-&gt;(v2) \\\n        RETURN *;\n+----------------------------------------------------+-----------------------------------------------------------------------+-------------------------------------------------------+\n| v                                                  | e                                                                     | v2                                                    |\n+----------------------------------------------------+-----------------------------------------------------------------------+-------------------------------------------------------+\n| (\"player100\" :player{age: 42, name: \"Tim Duncan\"}) | [:follow \"player100\"-&gt;\"player101\" @0 {degree: 95}]                    | (\"player101\" :player{age: 36, name: \"Tony Parker\"})   |\n| (\"player100\" :player{age: 42, name: \"Tim Duncan\"}) | [:follow \"player100\"-&gt;\"player125\" @0 {degree: 95}]                    | (\"player125\" :player{age: 41, name: \"Manu Ginobili\"}) |\n| (\"player100\" :player{age: 42, name: \"Tim Duncan\"}) | [:serve \"player100\"-&gt;\"team204\" @0 {end_year: 2016, start_year: 1997}] | (\"team204\" :team{name: \"Spurs\"})                      |\n+----------------------------------------------------+-----------------------------------------------------------------------+-------------------------------------------------------+\n</code></pre>"},{"location":"3.ngql-guide/8.clauses-and-options/return/#_9","title":"\u91cd\u547d\u540d\u5b57\u6bb5","text":"<p>\u4f7f\u7528\u8bed\u6cd5<code>AS &lt;alias&gt;</code>\u91cd\u547d\u540d\u8f93\u51fa\u7ed3\u679c\u4e2d\u7684\u5b57\u6bb5\u3002</p> <pre><code>nebula&gt; MATCH (v:player{name:\"Tim Duncan\"})-[:serve]-&gt;(v2) \\\n        RETURN v2.team.name AS Team;\n+---------+\n| Team    |\n+---------+\n| \"Spurs\" |\n+---------+\n\nnebula&gt; RETURN \"Amber\" AS Name;\n+---------+\n| Name    |\n+---------+\n| \"Amber\" |\n+---------+\n</code></pre>"},{"location":"3.ngql-guide/8.clauses-and-options/return/#_10","title":"\u8fd4\u56de\u4e0d\u5b58\u5728\u7684\u5c5e\u6027","text":"<p>\u5982\u679c\u5339\u914d\u7684\u7ed3\u679c\u4e2d\uff0c\u67d0\u4e2a\u5c5e\u6027\u4e0d\u5b58\u5728\uff0c\u4f1a\u8fd4\u56de<code>NULL</code>\u3002</p> <pre><code>nebula&gt; MATCH (v:player{name:\"Tim Duncan\"})-[e]-&gt;(v2) \\\n        RETURN v2.player.name, type(e), v2.player.age;\n+-----------------+----------+---------------+\n| v2.player.name  | type(e)  | v2.player.age |\n+-----------------+----------+---------------+\n| \"Manu Ginobili\" | \"follow\" | 41            |\n| __NULL__        | \"serve\"  | __NULL__      |\n| \"Tony Parker\"   | \"follow\" | 36            |\n+-----------------+----------+---------------+\n</code></pre>"},{"location":"3.ngql-guide/8.clauses-and-options/return/#_11","title":"\u8fd4\u56de\u8868\u8fbe\u5f0f\u7ed3\u679c","text":"<p><code>RETURN</code>\u8bed\u53e5\u53ef\u4ee5\u8fd4\u56de\u5b57\u9762\u91cf\u3001\u51fd\u6570\u6216\u8c13\u8bcd\u7b49\u8868\u8fbe\u5f0f\u7684\u7ed3\u679c\u3002</p> <pre><code>nebula&gt; MATCH (v:player{name:\"Tony Parker\"})--&gt;(v2:player) \\\n        RETURN DISTINCT v2.player.name, \"Hello\"+\" graphs!\", v2.player.age &gt; 35;\n+---------------------+----------------------+--------------------+\n| v2.player.name      | (\"Hello\"+\" graphs!\") | (v2.player.age&gt;35) |\n+---------------------+----------------------+--------------------+\n| \"LaMarcus Aldridge\" | \"Hello graphs!\"      | false              |\n| \"Tim Duncan\"        | \"Hello graphs!\"      | true               |\n| \"Manu Ginobili\"     | \"Hello graphs!\"      | true               |\n+---------------------+----------------------+--------------------+\n\nnebula&gt; RETURN 1+1;\n+-------+\n| (1+1) |\n+-------+\n| 2     |\n+-------+\n\nnebula&gt; RETURN 1- -1;\n+----------+\n| (1--(1)) |\n+----------+\n| 2        |\n+----------+\n\nnebula&gt; RETURN 3 &gt; 1;\n+-------+\n| (3&gt;1) |\n+-------+\n| true  |\n+-------+\n\nnebula&gt; RETURN 1+1, rand32(1, 5);\n+-------+-------------+\n| (1+1) | rand32(1,5) |\n+-------+-------------+\n| 2     | 1           |\n+-------+-------------+\n</code></pre>"},{"location":"3.ngql-guide/8.clauses-and-options/return/#_12","title":"\u8fd4\u56de\u552f\u4e00\u5b57\u6bb5","text":"<p>\u4f7f\u7528<code>DISTINCT</code>\u53ef\u4ee5\u5220\u9664\u7ed3\u679c\u96c6\u4e2d\u7684\u91cd\u590d\u5b57\u6bb5\u3002</p> <pre><code># \u672a\u4f7f\u7528 DISTINCT\u3002\nnebula&gt; MATCH (v:player{name:\"Tony Parker\"})--(v2:player) \\\n        RETURN v2.player.name, v2.player.age;\n+---------------------+--------+\n| v2.name             | v2.age |\n+---------------------+--------+\n| \"Tim Duncan\"        | 42     |\n| \"LaMarcus Aldridge\" | 33     |\n| \"Marco Belinelli\"   | 32     |\n| \"Boris Diaw\"        | 36     |\n| \"Dejounte Murray\"   | 29     |\n| \"Tim Duncan\"        | 42     |\n| \"LaMarcus Aldridge\" | 33     |\n| \"Manu Ginobili\"     | 41     |\n+---------------------+--------+\n\n# \u4f7f\u7528 DISTINCT\u3002\nnebula&gt; MATCH (v:player{name:\"Tony Parker\"})--(v2:player) \\\n        RETURN DISTINCT v2.player.name, v2.player.age;\n+---------------------+--------+\n| v2.name             | v2.age |\n+---------------------+--------+\n| \"Tim Duncan\"        | 42     |\n| \"LaMarcus Aldridge\" | 33     |\n| \"Marco Belinelli\"   | 32     |\n| \"Boris Diaw\"        | 36     |\n| \"Dejounte Murray\"   | 29     |\n| \"Manu Ginobili\"     | 41     |\n+---------------------+--------+\n</code></pre>"},{"location":"3.ngql-guide/8.clauses-and-options/sample/","title":"SAMPLE","text":"<p><code>SAMPLE</code>\u5b50\u53e5\u7528\u4e8e\u5728\u7ed3\u679c\u96c6\u4e2d\u5747\u5300\u53d6\u6837\u5e76\u8fd4\u56de\u6307\u5b9a\u6570\u91cf\u7684\u6570\u636e\u3002</p> <p><code>SAMPLE</code>\u4ec5\u80fd\u5728<code>GO</code>\u8bed\u53e5\u4e2d\u4f7f\u7528\uff0c\u8bed\u6cd5\u5982\u4e0b\uff1a</p> <pre><code>&lt;go_statement&gt; SAMPLE &lt;sample_list&gt;;\n</code></pre> <p><code>sample_list</code>\u662f\u4e00\u4e2a\u5217\u8868\uff0c\u5217\u8868\u4e2d\u7684\u5143\u7d20\u5fc5\u987b\u4e3a\u81ea\u7136\u6570\uff0c\u4e14\u5143\u7d20\u6570\u91cf\u5fc5\u987b\u4e0e<code>GO</code>\u8bed\u53e5\u4e2d\u7684<code>STEPS</code>\u7684\u6700\u5927\u6570\u76f8\u540c\u3002\u4e0b\u6587\u4ee5<code>GO 1 TO 3 STEPS FROM \"A\" OVER * SAMPLE &lt;sample_list&gt;</code>\u4e3a\u4f8b\u8be6\u7ec6\u4ecb\u7ecd<code>SAMPLE</code>\u7684\u7528\u6cd5\u3002</p> <ul> <li>\u5217\u8868<code>sample_list</code>\u5fc5\u987b\u5305\u542b 3 \u4e2a\u81ea\u7136\u6570\u5143\u7d20\uff0c\u4f8b\u5982<code>GO 1 TO 3 STEPS FROM \"A\" OVER * SAMPLE [1,2,4]</code>\u3002</li> <li><code>SAMPLE [1,2,4]</code>\u4e2d\u7684<code>1</code>\u8868\u793a\u7cfb\u7edf\u5728\u7b2c\u4e00\u6b65\u65f6\u81ea\u52a8\u9009\u62e9 1 \u6761\u8fb9\u7ee7\u7eed\u904d\u5386\uff0c<code>2</code>\u8868\u793a\u5728\u7b2c\u4e8c\u6b65\u65f6\u9009\u62e9 2 \u6761\u8fb9\u7ee7\u7eed\u904d\u5386\uff0c<code>4</code>\u8868\u793a\u5728\u7b2c\u4e09\u6b65\u65f6\u9009\u62e9 4 \u6761\u8fb9\u7ee7\u7eed\u904d\u5386\u3002\u5982\u679c\u67d0\u4e00\u6b65\u6ca1\u6709\u5339\u914d\u7684\u8fb9\u6216\u8005\u5339\u914d\u5230\u7684\u8fb9\u6570\u91cf\u5c0f\u4e8e\u6307\u5b9a\u6570\u91cf\uff0c\u5219\u6309\u5b9e\u9645\u6570\u91cf\u8fd4\u56de\u3002</li> <li>\u56e0\u4e3a<code>GO 1 TO 3 STEPS</code>\u8868\u793a\u8fd4\u56de\u7b2c\u4e00\u5230\u7b2c\u4e09\u6b65\u7684\u6240\u6709\u904d\u5386\u7ed3\u679c\uff0c\u56e0\u6b64\u4e0b\u56fe\u4e2d\u6240\u6709\u7ea2\u8272\u8fb9\u548c\u5b83\u4eec\u7684\u539f\u70b9\u4e0e\u76ee\u7684\u70b9\u90fd\u4f1a\u88ab\u8fd9\u6761<code>GO</code>\u8bed\u53e5\u5339\u914d\u4e0a\uff0c\u800c\u9ec4\u8272\u8fb9\u8868\u793a<code>GO</code>\u8bed\u53e5\u904d\u5386\u65f6\u6ca1\u6709\u9009\u62e9\u7684\u8def\u5f84\u3002\u5982\u679c\u4e0d\u662f<code>GO 1 TO 3 STEPS</code>\u800c\u662f<code>GO 3 STEPS</code>\uff0c\u5219\u53ea\u4f1a\u5339\u914d\u4e0a\u7b2c\u4e09\u6b65\u7684\u7ea2\u8272\u8fb9\u548c\u5b83\u4eec\u4e24\u7aef\u7684\u70b9\u3002</li> </ul> <p></p> <p>\u5728 basketballplayer \u6570\u636e\u96c6\u4e2d\u7684\u6267\u884c\u793a\u4f8b\u5982\u4e0b\uff1a</p> <pre><code>nebula&gt; GO 3 STEPS FROM \"player100\" \\\n        OVER * \\\n        YIELD properties($$).name AS NAME, properties($$).age AS Age \\\n        SAMPLE [1,2,3];\n+-----------------+----------+\n| NAME            | Age      |\n+-----------------+----------+\n| \"Tony Parker\"   | 36       |\n| \"Manu Ginobili\" | 41       |\n| \"Spurs\"         | __NULL__ |\n+-----------------+----------+\n\nnebula&gt; GO 1 TO 3 STEPS FROM \"player100\" \\\n        OVER * \\\n        YIELD properties($$).name AS NAME, properties($$).age AS Age \\\n        SAMPLE [2,2,2];\n+-----------------+----------+\n| NAME            | Age      |\n+-----------------+----------+\n| \"Manu Ginobili\" | 41       |\n| \"Spurs\"         | __NULL__ |\n| \"Tim Duncan\"    | 42       |\n| \"Spurs\"         | __NULL__ |\n| \"Manu Ginobili\" | 41       |\n| \"Spurs\"         | __NULL__ |\n+-----------------+----------+\n</code></pre>"},{"location":"3.ngql-guide/8.clauses-and-options/ttl-options/","title":"TTL","text":"<p>TTL\uff08Time To Live\uff09\u662f\u4e00\u4e2a\u5b9a\u4e49\u6570\u636e\u751f\u5b58\u671f\u7684\u673a\u5236\u3002\u5f53\u6570\u636e\u8fbe\u5230\u5176\u9884\u8bbe\u7684\u751f\u5b58\u65f6\u95f4\u540e\uff0c\u5b83\u4f1a\u88ab\u81ea\u52a8\u4ece\u56fe\u6570\u636e\u5e93\u4e2d\u5220\u9664\u3002\u8fd9\u79cd\u529f\u80fd\u5c24\u5176\u9002\u5408\u4e8e\u53ea\u9700\u8981\u6682\u65f6\u5b58\u50a8\u7684\u6570\u636e\uff0c\u4f8b\u5982\u4e34\u65f6\u4f1a\u8bdd\u6216\u7f13\u5b58\u6570\u636e\u3002</p>"},{"location":"3.ngql-guide/8.clauses-and-options/ttl-options/#opencypher","title":"openCypher \u517c\u5bb9\u6027","text":"<p>\u672c\u6587\u64cd\u4f5c\u4ec5\u9002\u7528\u4e8e\u539f\u751f nGQL\u3002</p>"},{"location":"3.ngql-guide/8.clauses-and-options/ttl-options/#_1","title":"\u6ce8\u610f\u4e8b\u9879","text":"<ul> <li>\u4e0d\u80fd\u4fee\u6539\u5e26\u6709 TTL \u9009\u9879\u7684\u5c5e\u6027\u7684 Schema\u3002</li> </ul> <ul> <li> <p>TTL \u548c INDEX \u5171\u5b58\u95ee\u9898\uff1a</p> <ul> <li>\u5982\u679c\u4e00\u4e2a Tag/Edge type \u7684\u5176\u4e2d\u4e00\u5c5e\u6027\u5df2\u6709 INDEX\uff0c\u5219\u4e0d\u80fd\u4e3a\u5176\u8bbe\u7f6e TTL\uff0c\u4e5f\u4e0d\u80fd\u4e3a\u8be5 Tag \u7684\u5176\u4ed6\u5c5e\u6027\u8bbe\u7f6e TTL\u3002    </li> </ul> <ul> <li>\u5982\u679c\u5df2\u6709 TTL\uff0c\u53ef\u4ee5\u518d\u6dfb\u52a0 INDEX\u3002</li> </ul> </li> </ul>"},{"location":"3.ngql-guide/8.clauses-and-options/ttl-options/#ttl_1","title":"TTL \u9009\u9879","text":"<p>nGQL \u652f\u6301\u7684 TTL \u9009\u9879\u5982\u4e0b\u3002</p> \u9009\u9879 \u8bf4\u660e <code>ttl_col</code> \u6307\u5b9a\u4e00\u4e2a\u73b0\u6709\u7684\u8981\u8bbe\u7f6e\u5b58\u6d3b\u65f6\u95f4\u7684\u5c5e\u6027\u3002\u5c5e\u6027\u7684\u6570\u636e\u7c7b\u578b\u5fc5\u987b\u662f<code>int</code>\u6216\u8005<code>timestamp</code>\u3002 <code>ttl_duration</code> \u6307\u5b9a\u65f6\u95f4\u6233\u5dee\u503c\uff0c\u9ed8\u8ba4\u5355\u4f4d\uff1a\u79d2\u3002\u65f6\u95f4\u6233\u5dee\u503c\u5fc5\u987b\u4e3a 64 \u4f4d\u975e\u8d1f\u6574\u6570\u3002\u5c5e\u6027\u503c\u548c\u65f6\u95f4\u6233\u5dee\u503c\u4e4b\u548c\u5982\u679c\u5c0f\u4e8e\u5f53\u524d\u65f6\u95f4\u6233\uff0c\u5c5e\u6027\u5c31\u4f1a\u8fc7\u671f\u3002\u5982\u679c<code>ttl_duration</code>\u4e3a<code>0</code>\uff0c\u5c5e\u6027\u6c38\u4e0d\u8fc7\u671f\u3002\u53ef\u5728\u914d\u7f6e\u6587\u4ef6<code>nebula-storaged.conf</code>\uff08\u9ed8\u8ba4\u8def\u5f84<code>/usr/local/nightly/etc/</code>\uff09\u4e2d\u8bbe\u7f6e<code>ttl_use_ms</code>\u4e3a<code>true</code>\u5c06\u9ed8\u8ba4\u5355\u4f4d\u8bbe\u4e3a\u6beb\u79d2\u3002 <p>Warning</p> <ul> <li>\u5728\u8bbe\u7f6e<code>ttl_use_ms</code>\u4e3a<code>true</code>\u524d\uff0c\u8bf7\u786e\u4fdd\u6ca1\u6709\u4e3a\u5c5e\u6027\u8bbe\u7f6e TTL\uff0c\u5426\u5219\u4f1a\u56e0\u4e3a\u8fc7\u671f\u65f6\u95f4\u7f29\u77ed\uff0c\u5bfc\u81f4\u6570\u636e\u88ab\u9519\u8bef\u5730\u5220\u9664\u3002</li> <li>\u5728\u8bbe\u7f6e<code>ttl_use_ms</code>\u4e3a<code>true</code>\u540e\uff0c\u5373\u8bbe\u7f6e<code>ttl_duration</code>\u7684\u9ed8\u8ba4\u5355\u4f4d\u4e3a\u6beb\u79d2\u540e\uff0c<code>ttl_col</code>\u7684\u9ed8\u8ba4\u5355\u4f4d\u4ecd\u7136\u4e3a\u79d2\uff0c\u5b83\u7684\u6570\u636e\u7c7b\u578b\u5fc5\u987b\u662f<code>int</code>\uff0c\u5e76\u4e14\u9700\u8981\u624b\u52a8\u8f6c\u6362\u5c5e\u6027\u503c\u4e3a\u6beb\u79d2\u3002\u4f8b\u5982\u8bbe\u7f6e<code>ttl_col</code>\u4e3a<code>a</code>\uff0c\u5219\u9700\u8981\u5c06<code>a</code>\u7684\u503c\u8f6c\u6362\u4e3a\u6beb\u79d2\uff0c\u5982\u5f53<code>a</code>\u7684\u503c\u4e3a<code>now()</code>\uff0c\u5219\u9700\u8981\u5c06<code>a</code>\u7684\u503c\u8bbe\u7f6e\u4e3a<code>now() * 1000</code>\u3002</li> </ul>"},{"location":"3.ngql-guide/8.clauses-and-options/ttl-options/#ttl_2","title":"\u4f7f\u7528 TTL \u9009\u9879","text":"<p>\u5728\u4f7f\u7528 TTL \u529f\u80fd\u4e4b\u524d\uff0c\u5fc5\u987b\u5148\u521b\u5efa\u4e00\u4e2a\u65f6\u95f4\u6233\u6216\u6574\u6570\u5c5e\u6027\uff0c\u5e76\u5728 TTL \u9009\u9879\u4e2d\u6307\u5b9a\u4e86\u5b83\u3002\u6570\u636e\u5e93\u4e0d\u4f1a\u81ea\u52a8\u4e3a\u60a8\u521b\u5efa\u6216\u7ba1\u7406\u8fd9\u4e2a\u65f6\u95f4\u6233\u5c5e\u6027\u3002</p> <p>\u5728\u63d2\u5165\u65f6\u95f4\u6233\u6216\u6574\u6570\u5c5e\u6027\u7684\u503c\u65f6\uff0c\u5efa\u8bae\u4f7f\u7528<code>now()</code>\u51fd\u6570\u6216\u8005\u5f53\u524d\u65f6\u95f4\u6233\u6765\u4ee3\u8868\u5f53\u524d\u65f6\u95f4\u3002</p>"},{"location":"3.ngql-guide/8.clauses-and-options/ttl-options/#tag_edge_type","title":"Tag \u6216 Edge type \u5df2\u5b58\u5728","text":"<p>\u5982\u679c Tag \u548c Edge type \u5df2\u7ecf\u521b\u5efa\uff0c\u8bf7\u4f7f\u7528<code>ALTER</code>\u8bed\u53e5\u66f4\u65b0 Tag \u6216 Edge type\u3002</p> <pre><code># \u521b\u5efa Tag\u3002\nnebula&gt; CREATE TAG IF NOT EXISTS t1 (a timestamp);\n\n# ALTER \u4fee\u6539 Tag\uff0c\u6dfb\u52a0 TTL \u9009\u9879\u3002\nnebula&gt; ALTER TAG t1 TTL_COL = \"a\", TTL_DURATION = 5;\n\n# \u63d2\u5165\u70b9\uff0c\u63d2\u5165\u540e 5 \u79d2\u8fc7\u671f\u3002\nnebula&gt; INSERT VERTEX t1(a) VALUES \"101\":(now());\n</code></pre>"},{"location":"3.ngql-guide/8.clauses-and-options/ttl-options/#tag_edge_type_1","title":"Tag \u6216 Edge type \u4e0d\u5b58\u5728","text":"<p>\u521b\u5efa Tag \u6216 Edge type \u65f6\u53ef\u4ee5\u540c\u65f6\u8bbe\u7f6e TTL \u9009\u9879\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1 CREATE TAG \u548c CREATE EDGE\u3002</p> <pre><code># \u521b\u5efa Tag \u5e76\u8bbe\u7f6e TTL \u9009\u9879\u3002\nnebula&gt; CREATE TAG IF NOT EXISTS t2(a int, b int, c string) TTL_DURATION= 100, TTL_COL = \"a\";\n\n# \u63d2\u5165\u70b9\u3002\u8fc7\u671f\u65f6\u95f4\u6233\u4e3a 1648197238\uff081648197138 + 100\uff09\u3002\nnebula&gt; INSERT VERTEX t2(a, b, c) VALUES \"102\":(1648197138, 30, \"Hello\");\n</code></pre>"},{"location":"3.ngql-guide/8.clauses-and-options/ttl-options/#_2","title":"\u5c5e\u6027\u8fc7\u671f","text":"<p>Caution</p> <ul> <li>\u5f53\u4e3a\u4e00\u4e2a Tag \u6216 Edge type \u7684\u5c5e\u6027\u8bbe\u7f6e TTL \u5e76\u8be5\u5c5e\u6027\u7684\u503c\u4e3a<code>NULL</code>\u65f6\uff0cTTL \u529f\u80fd\u4e0d\u4f1a\u751f\u6548\uff0c\u5373\u8be5\u5c5e\u6027\u6c38\u4e0d\u8fc7\u671f\u3002</li> </ul> <ul> <li>\u5982\u679c\u4e3a\u4e00\u4e2a Tag \u6216 Edge type \u65b0\u589e\u9ed8\u8ba4\u503c\u4e3a<code>now()</code>\u7684\u5c5e\u6027\u5e76\u4e14\u8be5\u5c5e\u6027\u8bbe\u7f6e\u4e86 TTL\uff0c\u8be5 Tag \u6216 Edge type \u76f8\u5173\u7684\u5386\u53f2\u6570\u636e\u4e0d\u4f1a\u8fc7\u671f\uff0c\u56e0\u4e3a\u5386\u53f2\u6570\u636e\u7684\u8be5\u5c5e\u6027\u503c\u4e3a\u5f53\u524d\u65f6\u95f4\u6233\u3002</li> </ul>"},{"location":"3.ngql-guide/8.clauses-and-options/ttl-options/#_3","title":"\u70b9\u5c5e\u6027\u8fc7\u671f","text":"<p>\u70b9\u5c5e\u6027\u8fc7\u671f\u6709\u5982\u4e0b\u5f71\u54cd\uff1a</p> <ul> <li>\u5982\u679c\u4e00\u4e2a\u70b9\u4ec5\u6709\u4e00\u4e2a Tag\uff0c\u70b9\u4e0a\u7684\u4e00\u4e2a\u5c5e\u6027\u8fc7\u671f\uff0c\u70b9\u4e5f\u4f1a\u8fc7\u671f\u3002</li> </ul> <ul> <li>\u5982\u679c\u4e00\u4e2a\u70b9\u6709\u591a\u4e2a Tag\uff0c\u70b9\u4e0a\u7684\u4e00\u4e2a\u5c5e\u6027\u8fc7\u671f\uff0c\u548c\u8be5\u5c5e\u6027\u76f8\u540c Tag \u7684\u5176\u4ed6\u5c5e\u6027\u4e5f\u4f1a\u8fc7\u671f\uff0c\u4f46\u662f\u70b9\u4e0d\u4f1a\u8fc7\u671f\uff0c\u70b9\u4e0a\u5176\u4ed6 Tag \u7684\u5c5e\u6027\u4fdd\u6301\u4e0d\u53d8\u3002</li> </ul>"},{"location":"3.ngql-guide/8.clauses-and-options/ttl-options/#_4","title":"\u8fb9\u5c5e\u6027\u8fc7\u671f","text":"<p>\u56e0\u4e3a\u4e00\u6761\u8fb9\u4ec5\u6709\u4e00\u4e2a Edge type\uff0c\u8fb9\u4e0a\u7684\u4e00\u4e2a\u5c5e\u6027\u8fc7\u671f\uff0c\u8fb9\u4e5f\u4f1a\u8fc7\u671f\u3002</p>"},{"location":"3.ngql-guide/8.clauses-and-options/ttl-options/#_5","title":"\u8fc7\u671f\u5904\u7406","text":"<p>\u5c5e\u6027\u8fc7\u671f\u540e\uff0c\u5bf9\u5e94\u7684\u8fc7\u671f\u6570\u636e\u4ecd\u7136\u5b58\u50a8\u5728\u786c\u76d8\u4e0a\uff0c\u4f46\u662f\u67e5\u8be2\u65f6\u4f1a\u8fc7\u6ee4\u8fc7\u671f\u6570\u636e\u3002</p> <p>NebulaGraph \u81ea\u52a8\u5220\u9664\u8fc7\u671f\u6570\u636e\u540e\uff0c\u4f1a\u5728\u4e0b\u4e00\u6b21 Compaction \u8fc7\u7a0b\u4e2d\u56de\u6536\u786c\u76d8\u7a7a\u95f4\u3002</p> <p>Note</p> <p>\u5982\u679c\u5173\u95ed TTL \u9009\u9879\uff0c\u4e0a\u4e00\u6b21 Compaction \u4e4b\u540e\u7684\u8fc7\u671f\u6570\u636e\u5c06\u53ef\u4ee5\u88ab\u67e5\u8be2\u5230\u3002</p>"},{"location":"3.ngql-guide/8.clauses-and-options/ttl-options/#_6","title":"\u5220\u9664\u5b58\u6d3b\u65f6\u95f4","text":"<p>\u5220\u9664\u5b58\u6d3b\u65f6\u95f4\u53ef\u4ee5\u4f7f\u7528\u5982\u4e0b\u51e0\u79cd\u65b9\u6cd5\uff1a</p> <ul> <li>\u5220\u9664\u8bbe\u7f6e\u5b58\u6d3b\u65f6\u95f4\u7684\u5c5e\u6027\u3002<pre><code>nebula&gt; ALTER TAG t1 DROP (a);\n</code></pre> </li> </ul> <ul> <li>\u8bbe\u7f6e<code>ttl_col</code>\u4e3a\u7a7a\u5b57\u7b26\u4e32\u3002<pre><code>nebula&gt; ALTER TAG t1 TTL_COL = \"\";\n</code></pre> </li> </ul> <ul> <li>\u8bbe\u7f6e<code>ttl_duration</code>\u4e3a<code>0</code>\u3002\u672c\u64cd\u4f5c\u53ef\u4ee5\u4fdd\u7559 TTL \u9009\u9879\uff0c\u5c5e\u6027\u6c38\u4e0d\u8fc7\u671f\uff0c\u4e14\u5c5e\u6027\u7684 Schema \u65e0\u6cd5\u4fee\u6539\u3002<pre><code>nebula&gt; ALTER TAG t1 TTL_DURATION = 0;\n</code></pre> </li> </ul>"},{"location":"3.ngql-guide/8.clauses-and-options/unwind/","title":"UNWIND","text":"<p><code>UNWIND</code>\u8bed\u53e5\u53ef\u4ee5\u5c06\u5217\u8868\u62c6\u5206\u4e3a\u5355\u72ec\u7684\u884c\uff0c\u5217\u8868\u4e2d\u7684\u6bcf\u4e2a\u5143\u7d20\u4e3a\u4e00\u884c\u3002</p> <p><code>UNWIND</code>\u53ef\u4ee5\u4f5c\u4e3a\u5355\u72ec\u8bed\u53e5\u6216\u8bed\u53e5\u4e2d\u7684\u5b50\u53e5\u4f7f\u7528\u3002</p>"},{"location":"3.ngql-guide/8.clauses-and-options/unwind/#unwind_1","title":"UNWIND \u8bed\u53e5","text":""},{"location":"3.ngql-guide/8.clauses-and-options/unwind/#_1","title":"\u8bed\u6cd5","text":"<pre><code>UNWIND &lt;list&gt; AS &lt;alias&gt; &lt;RETURN clause&gt;;\n</code></pre>"},{"location":"3.ngql-guide/8.clauses-and-options/unwind/#_2","title":"\u793a\u4f8b","text":"<ul> <li> <p>\u62c6\u5206\u5217\u8868\u3002</p> <pre><code>nebula&gt; UNWIND [1,2,3] AS n RETURN n;\n+---+\n| n |\n+---+\n| 1 |\n| 2 |\n| 3 |\n+---+\n</code></pre> </li> </ul>"},{"location":"3.ngql-guide/8.clauses-and-options/unwind/#unwind_2","title":"UNWIND \u5b50\u53e5","text":""},{"location":"3.ngql-guide/8.clauses-and-options/unwind/#_3","title":"\u8bed\u6cd5","text":"<ul> <li> <p>\u539f\u751f nGQL \u8bed\u53e5\u4e2d\u4f7f\u7528<code>UNWIND</code>\u5b50\u53e5\u3002</p> <p>Note</p> <p>\u5728\u539f\u751f nGQL \u8bed\u53e5\u4e2d\u4f7f\u7528<code>UNWIND</code>\u5b50\u53e5\u65f6\uff0c\u9700\u8981\u7528\u5728\u7ba1\u9053\u7b26<code>|</code>\u4e4b\u540e\uff0c\u5e76\u4f7f\u7528<code>$-</code>\u5f15\u7528\u7ba1\u9053\u7b26\u4e4b\u524d\u7684\u53d8\u91cf\u3002\u5982\u679c<code>UNWIND</code>\u540e\u4f7f\u7528\u8bed\u53e5\u6216\u5b50\u53e5\uff0c\u9700\u8981\u4f7f\u7528\u7ba1\u9053\u7b26<code>|</code>\u5e76\u4e14\u4f7f\u7528<code>$-</code>\u5f15\u7528\u7ba1\u9053\u7b26\u4e4b\u524d\u7684\u53d8\u91cf\u3002</p> <pre><code>&lt;statement&gt; | UNWIND $-.&lt;var&gt; AS &lt;alias&gt; &lt;|&gt; &lt;clause&gt;;\n</code></pre> </li> </ul> <ul> <li> <p>openCypher \u8bed\u53e5\u4e2d\u4f7f\u7528<code>UNWIND</code>\u5b50\u53e5\u3002</p> <pre><code>&lt;statement&gt; UNWIND &lt;list&gt; AS &lt;alias&gt; &lt;RETURN clause&gt;\uff1b\n</code></pre> </li> </ul>"},{"location":"3.ngql-guide/8.clauses-and-options/unwind/#_4","title":"\u793a\u4f8b","text":"<ul> <li> <p>\u5728<code>UNWIND</code>\u5b50\u53e5\u4e2d\u4f7f\u7528<code>WITH DISTINCT</code>\u53ef\u4ee5\u5c06\u5217\u8868\u4e2d\u7684\u91cd\u590d\u9879\u5ffd\u7565\uff0c\u8fd4\u56de\u53bb\u91cd\u540e\u7684\u7ed3\u679c\u3002</p> <p>Note</p> <p>\u539f\u751f nGQL \u8bed\u53e5\u4e0d\u652f\u6301<code>WITH DISTINCT</code>\u3002  </p> <pre><code>// \u62c6\u5206\u5217\u8868`[1,1,2,2,3,3]`\uff0c\u5220\u9664\u91cd\u590d\u884c\uff0c\u6392\u5e8f\u884c\uff0c\u5c06\u884c\u8f6c\u6362\u4e3a\u5217\u8868\u3002\nnebula&gt; WITH [1,1,2,2,3,3] AS n \\\n        UNWIND n AS r \\\n        WITH DISTINCT r AS r \\\n        ORDER BY r \\\n        RETURN collect(r);\n+------------+\n| collect(r) |\n+------------+\n| [1, 2, 3]  |\n+------------+\n</code></pre> </li> </ul> <ul> <li> <p><code>MATCH</code>\u8bed\u53e5\u4e2d\u4f7f\u7528<code>UNWIND</code>\u3002</p> <pre><code>// \u5c06\u5339\u914d\u8def\u5f84\u4e0a\u7684\u9876\u70b9\u8f93\u51fa\u5230\u5217\u8868\u4e2d\uff0c\u62c6\u5206\u5217\u8868\uff0c\u5220\u9664\u91cd\u590d\u884c\uff0c\u5c06\u884c\u8f6c\u6362\u4e3a\u5217\u8868\u3002\nnebula&gt; MATCH p=(v:player{name:\"Tim Duncan\"})--(v2) \\\n        WITH nodes(p) AS n \\\n        UNWIND n AS r \\\n        WITH DISTINCT r AS r \\\n        RETURN collect(r);\n+----------------------------------------------------------------------------------------------------------------------+\n| collect(r)                                                                                                           |\n+----------------------------------------------------------------------------------------------------------------------+\n| [(\"player100\" :player{age: 42, name: \"Tim Duncan\"}), (\"player101\" :player{age: 36, name: \"Tony Parker\"}),            |\n|(\"team204\" :team{name: \"Spurs\"}), (\"player102\" :player{age: 33, name: \"LaMarcus Aldridge\"}),                          |\n|(\"player125\" :player{age: 41, name: \"Manu Ginobili\"}), (\"player104\" :player{age: 32, name: \"Marco Belinelli\"}),       |\n|(\"player144\" :player{age: 47, name: \"Shaquile O'Neal\"}), (\"player105\" :player{age: 31, name: \"Danny Green\"}),         |\n|(\"player113\" :player{age: 29, name: \"Dejounte Murray\"}), (\"player107\" :player{age: 32, name: \"Aron Baynes\"}),         |\n|(\"player109\" :player{age: 34, name: \"Tiago Splitter\"}), (\"player108\" :player{age: 36, name: \"Boris Diaw\"})]           |  \n+----------------------------------------------------------------------------------------------------------------------+\n</code></pre> </li> </ul> <ul> <li> <p><code>GO</code>\u8bed\u53e5\u4e2d\u4f7f\u7528<code>UNWIND</code>\u3002</p> <pre><code>// \u5728\u70b9\u5217\u8868\u4e2d\u67e5\u8be2\u70b9\u5173\u8054\u7684\u8fb9\u3002\nnebula&gt; YIELD ['player101', 'player100'] AS a | UNWIND $-.a AS  b | GO FROM $-.b OVER follow YIELD edge AS e;\n+----------------------------------------------------+\n| e                                                  |\n+----------------------------------------------------+\n| [:follow \"player101\"-&gt;\"player100\" @0 {degree: 95}] |\n| [:follow \"player101\"-&gt;\"player102\" @0 {degree: 90}] |\n| [:follow \"player101\"-&gt;\"player125\" @0 {degree: 95}] |\n| [:follow \"player100\"-&gt;\"player101\" @0 {degree: 95}] |\n| [:follow \"player100\"-&gt;\"player125\" @0 {degree: 95}] |\n+----------------------------------------------------+\n</code></pre> </li> </ul> <ul> <li> <p><code>LOOKUP</code>\u8bed\u53e5\u4e2d\u4f7f\u7528<code>UNWIND</code>\u3002</p> <pre><code>// \u67e5\u8be2\u5e74\u9f84\u5927\u4e8e 46 \u5c81\u7403\u5458\u7684\u6240\u6709\u5c5e\u6027\uff0c\u53bb\u6389\u91cd\u590d\u5c5e\u6027\uff0c\u5e76\u5c06\u7ed3\u679c\u8f6c\u6362\u4e3a\u884c\u3002\nnebula&gt; LOOKUP ON player \\\n        WHERE player.age &gt; 46 \\\n        YIELD DISTINCT keys(vertex) as p | UNWIND $-.p as a | YIELD $-.a AS a;\n+--------+\n| a      |\n+--------+\n| \"age\"  |\n| \"name\" |\n+--------+\n</code></pre> </li> </ul> <ul> <li> <p><code>FETCH</code>\u8bed\u53e5\u4e2d\u4f7f\u7528<code>UNWIND</code>\u3002</p> <pre><code>// \u67e5\u8be2 player101 \u70b9\u7684\u6240\u6709 Tag\uff0c\u5e76\u5c06\u7ed3\u679c\u8f6c\u6362\u4e3a\u884c\u3002\nnebula&gt; CREATE TAG hero(like string, height int);\n        INSERT VERTEX hero(like, height) VALUES \"player101\":(\"deep\", 182);\n        FETCH PROP ON * \"player101\" \\\n        YIELD tags(vertex) as t | UNWIND $-.t as a | YIELD $-.a AS a;\n+----------+\n| a        |\n+----------+\n| \"hero\"   |\n| \"player\" |\n+----------+\n</code></pre> </li> </ul> <ul> <li> <p><code>GET SUBGRAPH</code>\u8bed\u53e5\u4e2d\u4f7f\u7528<code>UNWIND</code>\u3002</p> <pre><code>// \u67e5\u8be2\u4ece\u70b9 player100 \u5f00\u59cb\u30010~2 \u8df3\u3001serve \u7c7b\u578b\u7684\u51fa\u8fb9\u548c\u5165\u8fb9\u7684\u5b50\u56fe\uff0c\u5e76\u5c06\u7ed3\u679c\u8f6c\u6362\u4e3a\u884c\u3002\nnebula&gt; GET SUBGRAPH 2 STEPS FROM \"player100\" BOTH serve \\\n        YIELD edges as e | UNWIND $-.e as a | YIELD $-.a AS a;\n+----------------------------------------------+\n| a                                            |\n+----------------------------------------------+\n| [:serve \"player100\"-&gt;\"team204\" @0 {}]        |\n| [:serve \"player101\"-&gt;\"team204\" @0 {}]        |\n| [:serve \"player102\"-&gt;\"team204\" @0 {}]        |\n| [:serve \"player103\"-&gt;\"team204\" @0 {}]        |\n| [:serve \"player105\"-&gt;\"team204\" @0 {}]        |\n| [:serve \"player106\"-&gt;\"team204\" @0 {}]        |\n| [:serve \"player107\"-&gt;\"team204\" @0 {}]        |\n| [:serve \"player108\"-&gt;\"team204\" @0 {}]        |\n| [:serve \"player109\"-&gt;\"team204\" @0 {}]        |\n| [:serve \"player110\"-&gt;\"team204\" @0 {}]        |\n| [:serve \"player111\"-&gt;\"team204\" @0 {}]        |\n| [:serve \"player112\"-&gt;\"team204\" @0 {}]        |\n| [:serve \"player113\"-&gt;\"team204\" @0 {}]        |\n| [:serve \"player114\"-&gt;\"team204\" @0 {}]        |\n| [:serve \"player125\"-&gt;\"team204\" @0 {}]        |\n| [:serve \"player138\"-&gt;\"team204\" @0 {}]        |\n| [:serve \"player104\"-&gt;\"team204\" @20132015 {}] |\n| [:serve \"player104\"-&gt;\"team204\" @20182019 {}] |\n+----------------------------------------------+\n</code></pre> </li> </ul> <ul> <li> <p><code>FIND PATH</code>\u8bed\u53e5\u4e2d\u4f7f\u7528<code>UNWIND</code>\u3002</p> <pre><code>// \u627e\u51fa player101 \u5230 team204 \u5ef6 serve \u7c7b\u578b\u8fb9\u7684\u6700\u77ed\u8def\u5f84\u4e0a\u7684\u6240\u6709\u70b9\uff0c\u5e76\u5c06\u7ed3\u679c\u8f6c\u6362\u4e3a\u884c\u3002\nnebula&gt; FIND SHORTEST PATH FROM \"player101\" TO \"team204\" OVER serve \\\n        YIELD path as p | YIELD nodes($-.p) AS nodes | UNWIND $-.nodes AS a | YIELD $-.a AS a;\n+---------------+\n| a             |\n+---------------+\n| (\"player101\") |\n| (\"team204\")   |\n+---------------+\n</code></pre> </li> </ul>"},{"location":"3.ngql-guide/8.clauses-and-options/where/","title":"WHERE","text":"<p><code>WHERE</code>\u5b50\u53e5\u53ef\u4ee5\u6839\u636e\u6761\u4ef6\u8fc7\u6ee4\u8f93\u51fa\u7ed3\u679c\u3002</p> <p><code>WHERE</code>\u5b50\u53e5\u901a\u5e38\u7528\u4e8e\u5982\u4e0b\u67e5\u8be2\uff1a</p> <ul> <li>\u539f\u751f nGQL\uff0c\u4f8b\u5982<code>GO</code>\u548c<code>LOOKUP</code>\u8bed\u53e5\u3002</li> </ul> <ul> <li>openCypher \u65b9\u5f0f\uff0c\u4f8b\u5982<code>MATCH</code>\u548c<code>WITH</code>\u8bed\u53e5\u3002</li> </ul>"},{"location":"3.ngql-guide/8.clauses-and-options/where/#opencypher","title":"openCypher \u517c\u5bb9\u6027","text":"<p>\u8fc7\u6ee4 Rank \u662f\u539f\u751f nGQL \u529f\u80fd\u3002\u5982\u9700\u5728 openCypher \u517c\u5bb9\u8bed\u53e5\u4e2d\u76f4\u63a5\u83b7\u53d6 Rank \u503c\uff0c\u53ef\u4ee5\u4f7f\u7528 rank() \u51fd\u6570\uff0c\u4f8b\u5982<code>MATCH (:player)-[e:follow]-&gt;() RETURN rank(e);</code>\u3002</p>"},{"location":"3.ngql-guide/8.clauses-and-options/where/#_1","title":"\u57fa\u7840\u7528\u6cd5","text":"<p>Note</p> <p>\u4e0b\u6587\u793a\u4f8b\u4e2d\u7684<code>$$</code>\u3001<code>$^</code>\u7b49\u662f\u5f15\u7528\u7b26\u53f7\uff0c\u8be6\u60c5\u8bf7\u53c2\u89c1\u5f15\u7528\u7b26\u3002</p>"},{"location":"3.ngql-guide/8.clauses-and-options/where/#_2","title":"\u7528\u5e03\u5c14\u8fd0\u7b97\u7b26\u5b9a\u4e49\u6761\u4ef6","text":"<p>\u5728<code>WHERE</code>\u5b50\u53e5\u4e2d\u4f7f\u7528\u5e03\u5c14\u8fd0\u7b97\u7b26<code>NOT</code>\u3001<code>AND</code>\u3001<code>OR</code>\u548c<code>XOR</code>\u5b9a\u4e49\u6761\u4ef6\u3002\u5173\u4e8e\u8fd0\u7b97\u7b26\u7684\u4f18\u5148\u7ea7\uff0c\u8bf7\u53c2\u89c1\u8fd0\u7b97\u7b26\u4f18\u5148\u7ea7\u3002</p> <pre><code>nebula&gt; MATCH (v:player) \\\n        WHERE v.player.name == \"Tim Duncan\" \\\n        XOR (v.player.age &lt; 30 AND v.player.name == \"Yao Ming\") \\\n        OR NOT (v.player.name == \"Yao Ming\" OR v.player.name == \"Tim Duncan\") \\\n        RETURN v.player.name, v.player.age;\n+-------------------------+--------------+\n| v.player.name           | v.player.age |\n+-------------------------+--------------+\n| \"Danny Green\"           | 31           |\n| \"Tiago Splitter\"        | 34           |\n| \"David West\"            | 38           |\n...\n</code></pre> <pre><code>nebula&gt; GO FROM \"player100\" \\\n        OVER follow \\\n        WHERE properties(edge).degree &gt; 90 \\\n        OR properties($$).age != 33 \\\n        AND properties($$).name != \"Tony Parker\" \\\n        YIELD properties($$);\n+----------------------------------+\n| properties($$)                   |\n+----------------------------------+\n| {age: 41, name: \"Manu Ginobili\"} |\n+----------------------------------+\n</code></pre>"},{"location":"3.ngql-guide/8.clauses-and-options/where/#_3","title":"\u8fc7\u6ee4\u5c5e\u6027","text":"<p>\u5728<code>WHERE</code>\u5b50\u53e5\u4e2d\u4f7f\u7528\u70b9\u6216\u8fb9\u7684\u5c5e\u6027\u5b9a\u4e49\u6761\u4ef6\u3002</p> <ul> <li>\u8fc7\u6ee4\u70b9\u5c5e\u6027\uff1a<pre><code>nebula&gt; MATCH (v:player)-[e]-&gt;(v2) \\\n        WHERE v2.player.age &lt; 25 \\\n        RETURN v2.player.name, v2.player.age;\n+----------------------+---------------+\n| v2.player.name       | v2.player.age |\n+----------------------+---------------+\n| \"Ben Simmons\"        | 22            |\n| \"Luka Doncic\"        | 20            |\n| \"Kristaps Porzingis\" | 23            |\n+----------------------+---------------+\n</code></pre> <pre><code>nebula&gt; GO FROM \"player100\" OVER follow \\\n        WHERE $^.player.age &gt;= 42 \\\n        YIELD dst(edge);\n+-------------+\n| dst(EDGE)   |\n+-------------+\n| \"player101\" |\n| \"player125\" |\n+-------------+\n</code></pre> </li> </ul> <ul> <li>\u8fc7\u6ee4\u8fb9\u5c5e\u6027\uff1a<pre><code>nebula&gt; MATCH (v:player)-[e]-&gt;() \\\n        WHERE e.start_year &lt; 2000 \\\n        RETURN DISTINCT v.player.name, v.player.age;\n+--------------------+--------------+\n| v.player.name      | v.player.age |\n+--------------------+--------------+\n| \"Tony Parker\"      | 36           |\n| \"Tim Duncan\"       | 42           |\n| \"Grant Hill\"       | 46           |\n...\n</code></pre> <pre><code>nebula&gt; GO FROM \"player100\" OVER follow \\\n        WHERE follow.degree &gt; 90 \\\n        YIELD dst(edge);\n+-------------+\n| dst(EDGE)   |\n+-------------+\n| \"player101\" |\n| \"player125\" |\n+-------------+\n</code></pre> </li> </ul>"},{"location":"3.ngql-guide/8.clauses-and-options/where/#_4","title":"\u8fc7\u6ee4\u52a8\u6001\u8ba1\u7b97\u5c5e\u6027","text":"<pre><code>nebula&gt; MATCH (v:player) \\\n        WHERE v[toLower(\"AGE\")] &lt; 21 \\\n        RETURN v.player.name, v.player.age;\n+---------------+-------+\n| v.name        | v.age |\n+---------------+-------+\n| \"Luka Doncic\" | 20    |\n+---------------+-------+\n</code></pre>"},{"location":"3.ngql-guide/8.clauses-and-options/where/#_5","title":"\u8fc7\u6ee4\u73b0\u5b58\u5c5e\u6027","text":"<pre><code>nebula&gt; MATCH (v:player) \\\n        WHERE exists(v.player.age) \\\n        RETURN v.player.name, v.player.age;\n+-------------------------+--------------+\n| v.player.name           | v.player.age |\n+-------------------------+--------------+\n| \"Danny Green\"           | 31           |\n| \"Tiago Splitter\"        | 34           |\n| \"David West\"            | 38           |\n...\n</code></pre>"},{"location":"3.ngql-guide/8.clauses-and-options/where/#rank","title":"\u8fc7\u6ee4 rank","text":"<p>\u5728 nGQL \u4e2d\uff0c\u5982\u679c\u591a\u4e2a\u8fb9\u62e5\u6709\u76f8\u540c\u7684\u8d77\u59cb\u70b9\u3001\u76ee\u7684\u70b9\u548c\u5c5e\u6027\uff0c\u5219\u5b83\u4eec\u7684\u552f\u4e00\u533a\u522b\u662f rank \u503c\u3002\u5728<code>WHERE</code>\u5b50\u53e5\u4e2d\u53ef\u4ee5\u4f7f\u7528 rank \u8fc7\u6ee4\u8fb9\u3002</p> <pre><code># \u521b\u5efa\u6d4b\u8bd5\u6570\u636e\u3002\nnebula&gt; CREATE SPACE IF NOT EXISTS test (vid_type=FIXED_STRING(30));\nnebula&gt; USE test;\nnebula&gt; CREATE EDGE IF NOT EXISTS e1(p1 int);\nnebula&gt; CREATE TAG IF NOT EXISTS person(p1 int);\nnebula&gt; INSERT VERTEX person(p1) VALUES \"1\":(1);\nnebula&gt; INSERT VERTEX person(p1) VALUES \"2\":(2);\nnebula&gt; INSERT EDGE e1(p1) VALUES \"1\"-&gt;\"2\"@0:(10);\nnebula&gt; INSERT EDGE e1(p1) VALUES \"1\"-&gt;\"2\"@1:(11);\nnebula&gt; INSERT EDGE e1(p1) VALUES \"1\"-&gt;\"2\"@2:(12);\nnebula&gt; INSERT EDGE e1(p1) VALUES \"1\"-&gt;\"2\"@3:(13);\nnebula&gt; INSERT EDGE e1(p1) VALUES \"1\"-&gt;\"2\"@4:(14);\nnebula&gt; INSERT EDGE e1(p1) VALUES \"1\"-&gt;\"2\"@5:(15);\nnebula&gt; INSERT EDGE e1(p1) VALUES \"1\"-&gt;\"2\"@6:(16);\n\n# \u901a\u8fc7 rank \u8fc7\u6ee4\u8fb9\uff0c\u67e5\u627e rank \u5927\u4e8e 2 \u7684\u8fb9\u3002\nnebula&gt; GO FROM \"1\" \\\n        OVER e1 \\\n        WHERE rank(edge) &gt; 2 \\\n        YIELD src(edge), dst(edge), rank(edge) AS Rank, properties(edge).p1 | \\\n        ORDER BY $-.Rank DESC;\n+-----------+-----------+------+---------------------+\n| src(EDGE) | dst(EDGE) | Rank | properties(EDGE).p1 |\n+-----------+-----------+------+---------------------+\n| \"1\"       | \"2\"       | 6    | 16                  |\n| \"1\"       | \"2\"       | 5    | 15                  |\n| \"1\"       | \"2\"       | 4    | 14                  |\n| \"1\"       | \"2\"       | 3    | 13                  |\n+-----------+-----------+------+---------------------+\n\n# \u901a\u8fc7 rank \u8fc7\u6ee4\u8fb9\uff0c\u67e5\u627e rank \u503c\u7b49\u4e8e 0 \u7684 follow \u8fb9\u3002\nnebula&gt; MATCH (v)-[e:follow]-&gt;() \\\n        WHERE rank(e)==0 \\\n        RETURN *;\n+------------------------------------------------------------+-----------------------------------------------------+\n| v                                                          | e                                                   |\n+------------------------------------------------------------+-----------------------------------------------------+\n| (\"player142\" :player{age: 29, name: \"Klay Thompson\"})      | [:follow \"player142\"-&gt;\"player117\" @0 {degree: 90}]  |\n| (\"player139\" :player{age: 34, name: \"Marc Gasol\"})         | [:follow \"player139\"-&gt;\"player138\" @0 {degree: 99}]  |\n| (\"player108\" :player{age: 36, name: \"Boris Diaw\"})         | [:follow \"player108\"-&gt;\"player100\" @0 {degree: 80}]  |\n| (\"player108\" :player{age: 36, name: \"Boris Diaw\"})         | [:follow \"player108\"-&gt;\"player101\" @0 {degree: 80}]  |\n...\n</code></pre>"},{"location":"3.ngql-guide/8.clauses-and-options/where/#pattern","title":"\u8fc7\u6ee4 pattern","text":"<pre><code>nebula&gt; MATCH (v:player{name:\"Tim Duncan\"})-[e]-&gt;(t) \\\n        WHERE (v)-[e]-&gt;(t:team) \\\n        RETURN (v)--&gt;();\n\n+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+\n| (v)--&gt;() = (v)--&gt;()                                                                                                                                                                                                                                                                                                                                                                                              |\n+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+\n| [&lt;(\"player100\" :player{age: 42, name: \"Tim Duncan\"})-[:serve@0 {end_year: 2016, start_year: 1997}]-&gt;(\"team204\" :team{name: \"Spurs\"})&gt;, &lt;(\"player100\" :player{age: 42, name: \"Tim Duncan\"})-[:follow@0 {degree: 95}]-&gt;(\"player101\" :player{age: 36, name: \"Tony Parker\"})&gt;, &lt;(\"player100\" :player{age: 42, name: \"Tim Duncan\"})-[:follow@0 {degree: 95}]-&gt;(\"player125\" :player{age: 41, name: \"Manu Ginobili\"})&gt;] |\n+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+\n\nnebula&gt; MATCH (v:player{name:\"Tim Duncan\"})-[e]-&gt;(t) \\\n        WHERE NOT (v)-[e]-&gt;(t:team) \\\n        RETURN (v)--&gt;();\n+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+\n| (v)--&gt;() = (v)--&gt;()                                                                                                                                                                                                                                                                                                                                                                                              |\n+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+\n| [&lt;(\"player100\" :player{age: 42, name: \"Tim Duncan\"})-[:serve@0 {end_year: 2016, start_year: 1997}]-&gt;(\"team204\" :team{name: \"Spurs\"})&gt;, &lt;(\"player100\" :player{age: 42, name: \"Tim Duncan\"})-[:follow@0 {degree: 95}]-&gt;(\"player101\" :player{age: 36, name: \"Tony Parker\"})&gt;, &lt;(\"player100\" :player{age: 42, name: \"Tim Duncan\"})-[:follow@0 {degree: 95}]-&gt;(\"player125\" :player{age: 41, name: \"Manu Ginobili\"})&gt;] |\n| [&lt;(\"player100\" :player{age: 42, name: \"Tim Duncan\"})-[:serve@0 {end_year: 2016, start_year: 1997}]-&gt;(\"team204\" :team{name: \"Spurs\"})&gt;, &lt;(\"player100\" :player{age: 42, name: \"Tim Duncan\"})-[:follow@0 {degree: 95}]-&gt;(\"player101\" :player{age: 36, name: \"Tony Parker\"})&gt;, &lt;(\"player100\" :player{age: 42, name: \"Tim Duncan\"})-[:follow@0 {degree: 95}]-&gt;(\"player125\" :player{age: 41, name: \"Manu Ginobili\"})&gt;] |\n+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+\n</code></pre>"},{"location":"3.ngql-guide/8.clauses-and-options/where/#_6","title":"\u8fc7\u6ee4\u5b57\u7b26\u4e32","text":"<p>\u5728<code>WHERE</code>\u5b50\u53e5\u4e2d\u4f7f\u7528<code>STARTS WITH</code>\u3001<code>ENDS WITH</code>\u6216<code>CONTAINS</code>\u53ef\u4ee5\u5339\u914d\u5b57\u7b26\u4e32\u7684\u7279\u5b9a\u90e8\u5206\u3002\u5339\u914d\u65f6\u533a\u5206\u5927\u5c0f\u5199\u3002</p>"},{"location":"3.ngql-guide/8.clauses-and-options/where/#starts_with","title":"<code>STARTS WITH</code>","text":"<p><code>STARTS WITH</code>\u4f1a\u4ece\u5b57\u7b26\u4e32\u7684\u8d77\u59cb\u4f4d\u7f6e\u5f00\u59cb\u5339\u914d\u3002</p> <pre><code># \u67e5\u8be2\u59d3\u540d\u4ee5 T \u5f00\u5934\u7684 player \u4fe1\u606f\u3002\nnebula&gt; MATCH (v:player) \\\n        WHERE v.player.name STARTS WITH \"T\" \\\n        RETURN v.player.name, v.player.age;\n+------------------+--------------+\n| v.player.name    | v.player.age |\n+------------------+--------------+\n| \"Tony Parker\"    | 36           |\n| \"Tiago Splitter\" | 34           |\n| \"Tim Duncan\"     | 42           |\n| \"Tracy McGrady\"  | 39           |\n+------------------+--------------+\n</code></pre> <p>\u5982\u679c\u4f7f\u7528\u5c0f\u5199<code>t</code>\uff08<code>STARTS WITH \"t\"</code>\uff09\uff0c\u4f1a\u8fd4\u56de\u7a7a\u96c6\uff0c\u56e0\u4e3a\u6570\u636e\u5e93\u4e2d\u6ca1\u6709\u4ee5\u5c0f\u5199<code>t</code>\u5f00\u5934\u7684\u59d3\u540d\u3002</p> <pre><code>nebula&gt; MATCH (v:player) \\\n        WHERE v.player.name STARTS WITH \"t\" \\\n        RETURN v.player.name, v.player.age;\n+---------------+--------------+\n| v.player.name | v.player.age |\n+---------------+--------------+\n+---------------+--------------+\nEmpty set (time spent 5080/6474 us)\n</code></pre>"},{"location":"3.ngql-guide/8.clauses-and-options/where/#ends_with","title":"<code>ENDS WITH</code>","text":"<p><code>ENDS WITH</code>\u4f1a\u4ece\u5b57\u7b26\u4e32\u7684\u7ed3\u675f\u4f4d\u7f6e\u5f00\u59cb\u5339\u914d\u3002</p> <pre><code>nebula&gt; MATCH (v:player) \\\n        WHERE v.player.name ENDS WITH \"r\" \\\n        RETURN v.player.name, v.player.age;\n+------------------+--------------+\n| v.player.name    | v.player.age |\n+------------------+--------------+\n| \"Tony Parker\"    | 36           |\n| \"Tiago Splitter\" | 34           |\n| \"Vince Carter\"   | 42           |\n+------------------+--------------+\n</code></pre>"},{"location":"3.ngql-guide/8.clauses-and-options/where/#contains","title":"<code>CONTAINS</code>","text":"<p><code>CONTAINS</code>\u4f1a\u68c0\u67e5\u5173\u952e\u5b57\u662f\u5426\u5339\u914d\u5b57\u7b26\u4e32\u7684\u67d0\u4e00\u90e8\u5206\u3002</p> <pre><code>nebula&gt; MATCH (v:player) \\\n        WHERE v.player.name CONTAINS \"Pa\" \\\n        RETURN v.player.name, v.player.age;\n+---------------+--------------+\n| v.player.name | v.player.age |\n+---------------+--------------+\n| \"Paul George\" | 28           |\n| \"Tony Parker\" | 36           |\n| \"Paul Gasol\"  | 38           |\n| \"Chris Paul\"  | 33           |\n+---------------+--------------+\n</code></pre>"},{"location":"3.ngql-guide/8.clauses-and-options/where/#not","title":"\u7ed3\u5408 NOT \u4f7f\u7528","text":"<p>\u7528\u6237\u53ef\u4ee5\u7ed3\u5408\u5e03\u5c14\u8fd0\u7b97\u7b26<code>NOT</code>\u4e00\u8d77\u4f7f\u7528\uff0c\u5426\u5b9a\u5b57\u7b26\u4e32\u5339\u914d\u6761\u4ef6\u3002</p> <pre><code>nebula&gt; MATCH (v:player) \\\n        WHERE NOT v.player.name ENDS WITH \"R\" \\\n        RETURN v.player.name, v.player.age;\n+-------------------------+--------------+\n| v.player.name           | v.player.age |\n+-------------------------+--------------+\n| \"Danny Green\"           | 31           |\n| \"Tiago Splitter\"        | 34           |\n| \"David West\"            | 38           |\n| \"Russell Westbrook\"     | 30           |\n...\n</code></pre>"},{"location":"3.ngql-guide/8.clauses-and-options/where/#_7","title":"\u8fc7\u6ee4\u5217\u8868","text":""},{"location":"3.ngql-guide/8.clauses-and-options/where/#_8","title":"\u5339\u914d\u5217\u8868\u4e2d\u7684\u503c","text":"<p>\u4f7f\u7528<code>IN</code>\u8fd0\u7b97\u7b26\u68c0\u67e5\u67d0\u4e2a\u503c\u662f\u5426\u5728\u6307\u5b9a\u5217\u8868\u4e2d\u3002</p> <pre><code>nebula&gt; MATCH (v:player) \\\n        WHERE v.player.age IN range(20,25) \\\n        RETURN v.player.name, v.player.age;\n+-------------------------+--------------+\n| v.player.name           | v.player.age |\n+-------------------------+--------------+\n| \"Ben Simmons\"           | 22           |\n| \"Giannis Antetokounmpo\" | 24           |\n| \"Kyle Anderson\"         | 25           |\n| \"Joel Embiid\"           | 25           |\n| \"Kristaps Porzingis\"    | 23           |\n| \"Luka Doncic\"           | 20           |\n+-------------------------+--------------+\n\nnebula&gt; LOOKUP ON player \\\n        WHERE player.age IN [25,28]  \\\n        YIELD properties(vertex).name, properties(vertex).age;\n+-------------------------+------------------------+\n| properties(VERTEX).name | properties(VERTEX).age |\n+-------------------------+------------------------+\n| \"Kyle Anderson\"         | 25                     |\n| \"Damian Lillard\"        | 28                     |\n| \"Joel Embiid\"           | 25                     |\n| \"Paul George\"           | 28                     |\n| \"Ricky Rubio\"           | 28                     |\n+-------------------------+------------------------+\n</code></pre>"},{"location":"3.ngql-guide/8.clauses-and-options/where/#not_1","title":"\u7ed3\u5408 NOT \u4f7f\u7528","text":"<pre><code>nebula&gt; MATCH (v:player) \\\n        WHERE v.player.age NOT IN range(20,25) \\\n        RETURN v.player.name AS Name, v.player.age AS Age \\\n        ORDER BY Age;\n+---------------------+-----+\n| Name                | Age |\n+---------------------+-----+\n| \"Kyrie Irving\"      | 26  |\n| \"Cory Joseph\"       | 27  |\n| \"Damian Lillard\"    | 28  |\n| \"Paul George\"       | 28  |\n| \"Ricky Rubio\"       | 28  |\n...\n</code></pre>"},{"location":"3.ngql-guide/8.clauses-and-options/with/","title":"WITH","text":"<p><code>WITH</code>\u5b50\u53e5\u53ef\u4ee5\u83b7\u53d6\u5e76\u5904\u7406\u67e5\u8be2\u524d\u534a\u90e8\u5206\u7684\u7ed3\u679c\uff0c\u5e76\u5c06\u5904\u7406\u7ed3\u679c\u4f5c\u4e3a\u8f93\u5165\u4f20\u9012\u7ed9\u67e5\u8be2\u7684\u540e\u534a\u90e8\u5206\u3002</p>"},{"location":"3.ngql-guide/8.clauses-and-options/with/#opencypher","title":"openCypher \u517c\u5bb9\u6027","text":"<p>\u672c\u6587\u64cd\u4f5c\u4ec5\u9002\u7528\u4e8e openCypher \u65b9\u5f0f\u3002</p> <p>Note</p> <p>\u5728\u539f\u751f nGQL \u4e2d\uff0c\u6709\u4e0e<code>WITH</code>\u7c7b\u4f3c\u7684\u7ba1\u9053\u7b26\uff0c\u4f46\u5b83\u4eec\u7684\u5de5\u4f5c\u65b9\u5f0f\u4e0d\u540c\u3002\u4e0d\u8981\u5728 openCypher \u65b9\u5f0f\u4e2d\u4f7f\u7528\u7ba1\u9053\u7b26\uff0c\u4e5f\u4e0d\u8981\u5728\u539f\u751f nGQL \u4e2d\u4f7f\u7528<code>WITH</code>\u5b50\u53e5\u3002</p>"},{"location":"3.ngql-guide/8.clauses-and-options/with/#_1","title":"\u7ec4\u6210\u590d\u5408\u67e5\u8be2","text":"<p>\u4f7f\u7528<code>WITH</code>\u5b50\u53e5\u53ef\u4ee5\u7ec4\u5408\u8bed\u53e5\uff0c\u5c06\u4e00\u6761\u8bed\u53e5\u7684\u8f93\u51fa\u8f6c\u6362\u4e3a\u53e6\u4e00\u6761\u8bed\u53e5\u7684\u8f93\u5165\u3002</p>"},{"location":"3.ngql-guide/8.clauses-and-options/with/#1","title":"\u793a\u4f8b 1","text":"<ol> <li>\u5339\u914d\u4e00\u4e2a\u8def\u5f84\u3002</li> <li>\u901a\u8fc7<code>nodes()</code>\u51fd\u6570\u5c06\u8def\u5f84\u4e0a\u7684\u6240\u6709\u70b9\u8f93\u51fa\u5230\u4e00\u4e2a\u5217\u8868\u3002</li> <li>\u5c06\u5217\u8868\u62c6\u5206\u4e3a\u884c\u3002</li> <li>\u53bb\u91cd\u540e\u8fd4\u56de\u70b9\u7684\u4fe1\u606f\u3002</li> </ol> <pre><code># \u67e5\u8be2 Tag \u4e3a player\uff0cname \u5c5e\u6027\u4e3a Tim Duncan \u7684\u70b9\u7684\u8def\u5f84\uff0c\u5e76\u8fd4\u56de\u53bb\u91cd\u540e\u8def\u5f84\u4e2d\u7684\u6240\u6709\u7684\u70b9\u4fe1\u606f\u5217\u8868\u3002\nnebula&gt; MATCH p=(v:player{name:\"Tim Duncan\"})--() \\\n        WITH nodes(p) AS n \\\n        UNWIND n AS n1 \\\n        RETURN DISTINCT n1;\n+-----------------------------------------------------------+\n| n1                                                        |\n+-----------------------------------------------------------+\n| (\"player100\" :player{age: 42, name: \"Tim Duncan\"})        |\n| (\"player101\" :player{age: 36, name: \"Tony Parker\"})       |\n| (\"team204\" :team{name: \"Spurs\"})                          |\n| (\"player102\" :player{age: 33, name: \"LaMarcus Aldridge\"}) |\n| (\"player125\" :player{age: 41, name: \"Manu Ginobili\"})     |\n| (\"player104\" :player{age: 32, name: \"Marco Belinelli\"})   |\n| (\"player144\" :player{age: 47, name: \"Shaquille O'Neal\"})  |\n| (\"player105\" :player{age: 31, name: \"Danny Green\"})       |\n| (\"player113\" :player{age: 29, name: \"Dejounte Murray\"})   |\n| (\"player107\" :player{age: 32, name: \"Aron Baynes\"})       |\n| (\"player109\" :player{age: 34, name: \"Tiago Splitter\"})    |\n| (\"player108\" :player{age: 36, name: \"Boris Diaw\"})        |\n+-----------------------------------------------------------+\n</code></pre>"},{"location":"3.ngql-guide/8.clauses-and-options/with/#2","title":"\u793a\u4f8b 2","text":"<ol> <li>\u5339\u914d\u70b9 ID \u4e3a<code>player100</code>\u7684\u70b9\u3002</li> <li>\u901a\u8fc7<code>labels()</code>\u51fd\u6570\u5c06\u70b9\u7684\u6240\u6709 Tag \u8f93\u51fa\u5230\u4e00\u4e2a\u5217\u8868\u3002</li> <li>\u5c06\u5217\u8868\u62c6\u5206\u4e3a\u884c\u3002</li> <li>\u8fd4\u56de\u7ed3\u679c\u3002</li> </ol> <pre><code># \u67e5\u8be2 id \u4e3a player100 \u7684\u70b9\uff0c\u5e76\u8fd4\u56de\u70b9\u7684\u6240\u6709 Tag\u3002\nnebula&gt; MATCH (v) \\\n        WHERE id(v)==\"player100\" \\\n        WITH labels(v) AS tags_unf \\\n        UNWIND tags_unf AS tags_f \\\n        RETURN tags_f;\n+----------+\n| tags_f   |\n+----------+\n| \"player\" |\n+----------+\n</code></pre>"},{"location":"3.ngql-guide/8.clauses-and-options/with/#_2","title":"\u8fc7\u6ee4\u805a\u5408\u67e5\u8be2","text":"<p><code>WITH</code>\u53ef\u4ee5\u5728\u805a\u5408\u67e5\u8be2\u4e2d\u4f5c\u4e3a\u8fc7\u6ee4\u5668\u4f7f\u7528\u3002</p> <pre><code># \u67e5\u8be2\u6240\u6709\u8d77\u59cb\u70b9\u548c\u76ee\u7684\u70b9\u5747\u6709 player \u70b9\u7c7b\u578b\u7684\u8fb9\uff0c\u5e76\u5bf9\u6240\u6709\u76ee\u7684\u70b9\u53bb\u91cd\uff0c\u518d\u6839\u636e age \u5c5e\u6027\u5347\u5e8f\u6392\u5217\uff0c\u8fd4\u56de age \u5c5e\u6027\u503c\u5c0f\u4e8e 25 \u7684\u76ee\u7684\u70b9\u6570\u636e\u3002\nnebula&gt; MATCH (v:player)--&gt;(v2:player) \\\n        WITH DISTINCT v2 AS v2, v2.player.age AS Age \\\n        ORDER BY Age \\\n        WHERE Age&lt;25 \\\n        RETURN v2.player.name AS Name, Age;\n+----------------------+-----+\n| Name                 | Age |\n+----------------------+-----+\n| \"Luka Doncic\"        | 20  |\n| \"Ben Simmons\"        | 22  |\n| \"Kristaps Porzingis\" | 23  |\n+----------------------+-----+\n</code></pre>"},{"location":"3.ngql-guide/8.clauses-and-options/with/#collect","title":"collect() \u4e4b\u524d\u5904\u7406\u8f93\u51fa","text":"<p>\u5728<code>collect()</code>\u51fd\u6570\u5c06\u8f93\u51fa\u7ed3\u679c\u8f6c\u6362\u4e3a\u5217\u8868\u4e4b\u524d\uff0c\u53ef\u4ee5\u4f7f\u7528<code>WITH</code>\u5b50\u53e5\u6392\u5e8f\u548c\u9650\u5236\u8f93\u51fa\u7ed3\u679c\u3002</p> <pre><code># \u67e5\u8be2\u6240\u6709 Tag \u4e3a player \u7684\u70b9\u6570\u636e\uff0c\u5e76\u6839\u636e name \u5c5e\u6027\u5012\u5e8f\u6392\u5217\uff0c\u5c06\u524d 3 \u6761\u7ed3\u679c\u8f6c\u6362\u4e3a\u5217\u8868\u8fd4\u56de\u3002\nnebula&gt; MATCH (v:player) \\\n        WITH v.player.name AS Name \\\n        ORDER BY Name DESC \\\n        LIMIT 3 \\\n        RETURN collect(Name);\n+-----------------------------------------------+\n| collect(Name)                                 |\n+-----------------------------------------------+\n| [\"Yao Ming\", \"Vince Carter\", \"Tracy McGrady\"] |\n+-----------------------------------------------+\n</code></pre>"},{"location":"3.ngql-guide/8.clauses-and-options/with/#return","title":"\u7ed3\u5408 RETURN \u8bed\u53e5\u4f7f\u7528","text":"<p>\u5728<code>WITH</code>\u5b50\u53e5\u4e2d\u8bbe\u7f6e\u522b\u540d\uff0c\u5e76\u901a\u8fc7<code>RETURN</code>\u5b50\u53e5\u8f93\u51fa\u7ed3\u679c\u3002</p> <pre><code># \u5224\u65ad 3 \u662f\u5426\u5b58\u5728\u4e8e list \u6570\u7ec4\u4e2d\u3002\nnebula&gt; WITH [1, 2, 3] AS `list` RETURN 3 IN `list` AS r;\n+------+\n| r    |\n+------+\n| true |\n+------+\n\n# \u8fd4\u56de 3 \u548c 4 \u7684\u6bd4\u8f83\u7ed3\u679c\u3002\nnebula&gt; WITH 4 AS one, 3 AS two RETURN one &gt; two AS result;\n+--------+\n| result |\n+--------+\n| true   |\n+--------+\n</code></pre>"},{"location":"3.ngql-guide/8.clauses-and-options/yield/","title":"YIELD","text":"<p><code>YIELD</code>\u5b9a\u4e49 nGQL \u67e5\u8be2\u7684\u8f93\u51fa\u7ed3\u679c\u3002</p> <p><code>YIELD</code>\u53ef\u4ee5\u5f15\u5bfc\u5b50\u53e5\u6216\u8bed\u53e5\uff1a</p> <ul> <li><code>YIELD</code>\u5b50\u53e5\u7528\u4e8e\u539f\u751f nGQL \u8bed\u53e5\u4e2d\uff0c\u4f8b\u5982<code>GO</code>\u3001<code>FETCH</code>\u6216<code>LOOKUP</code>\uff0c\u5fc5\u987b\u901a\u8fc7<code>YIELD</code>\u5b50\u53e5\u5b9a\u4e49\u8fd4\u56de\u7ed3\u679c\u3002</li> </ul> <ul> <li><code>YIELD</code>\u8bed\u53e5\u53ef\u4ee5\u5728\u72ec\u7acb\u67e5\u8be2\u6216\u590d\u5408\u67e5\u8be2\u4e2d\u4f7f\u7528\u3002</li> </ul>"},{"location":"3.ngql-guide/8.clauses-and-options/yield/#opencypher","title":"openCypher \u517c\u5bb9\u6027","text":"<p>\u672c\u6587\u64cd\u4f5c\u4ec5\u9002\u7528\u4e8e\u539f\u751f nGQL\u3002\u5173\u4e8e openCypher \u65b9\u5f0f\u5982\u4f55\u5b9a\u4e49\u8f93\u51fa\u7ed3\u679c\uff0c\u8bf7\u53c2\u89c1 <code>RETURN</code>\u3002</p> <p><code>YIELD</code>\u5728 nGQL \u548c openCypher \u4e2d\u6709\u4e0d\u540c\u7684\u51fd\u6570\uff1a</p> <ul> <li> <p>\u5728 openCypher \u4e2d\uff0c<code>YIELD</code>\u7528\u4e8e\u5728<code>CALL[\u2026YIELD]</code>\u5b50\u53e5\u4e2d\u6307\u5b9a\u8fc7\u7a0b\u8c03\u7528\u7684\u8f93\u51fa\u3002</p> <p>Note</p> <p>nGQL \u4e0d\u652f\u6301<code>CALL[\u2026YIELD]</code>\u3002</p> </li> </ul> <ul> <li>\u5728 nGQL \u4e2d\uff0c<code>YIELD</code>\u548c openCypher \u4e2d\u7684<code>RETURN</code>\u7c7b\u4f3c\u3002</li> </ul> <p>Note</p> <p>\u4e0b\u6587\u793a\u4f8b\u4e2d\u7684<code>$$</code>\u3001<code>$-</code>\u7b49\u662f\u5f15\u7528\u7b26\u53f7\uff0c\u8be6\u60c5\u8bf7\u53c2\u89c1\u5f15\u7528\u5c5e\u6027\u3002</p>"},{"location":"3.ngql-guide/8.clauses-and-options/yield/#yield_1","title":"YIELD \u5b50\u53e5","text":""},{"location":"3.ngql-guide/8.clauses-and-options/yield/#_1","title":"\u8bed\u6cd5","text":"<pre><code>YIELD [DISTINCT] &lt;col&gt; [AS &lt;alias&gt;] [, &lt;col&gt; [AS &lt;alias&gt;] ...];\n</code></pre> \u53c2\u6570 \u8bf4\u660e <code>DISTINCT</code> \u805a\u5408\u8f93\u51fa\u7ed3\u679c\uff0c\u8fd4\u56de\u53bb\u91cd\u540e\u7684\u7ed3\u679c\u96c6\u3002 <code>col</code> \u8981\u8fd4\u56de\u7684\u5b57\u6bb5\u3002\u5982\u679c\u6ca1\u6709\u4e3a\u5b57\u6bb5\u8bbe\u7f6e\u522b\u540d\uff0c\u8fd4\u56de\u7ed3\u679c\u4e2d\u7684\u5217\u540d\u4e3a<code>col</code>\u3002 <code>alias</code> <code>col</code>\u7684\u522b\u540d\u3002\u4f7f\u7528\u5173\u952e\u5b57<code>AS</code>\u8fdb\u884c\u8bbe\u7f6e\uff0c\u8bbe\u7f6e\u540e\u8fd4\u56de\u7ed3\u679c\u4e2d\u7684\u5217\u540d\u4e3a\u8be5\u522b\u540d\u3002"},{"location":"3.ngql-guide/8.clauses-and-options/yield/#yield_2","title":"\u4f7f\u7528 YIELD \u5b50\u53e5","text":"<ul> <li><code>GO</code>\u8bed\u53e5\u4e2d\u4f7f\u7528<code>YIELD</code>\uff1a<pre><code>nebula&gt; GO FROM \"player100\" OVER follow \\\n        YIELD properties($$).name AS Friend, properties($$).age AS Age;\n+-----------------+-----+\n| Friend          | Age |\n+-----------------+-----+\n| \"Tony Parker\"   | 36  |\n| \"Manu Ginobili\" | 41  |\n+-----------------+-----+\n</code></pre> </li> </ul> <ul> <li><code>FETCH</code>\u8bed\u53e5\u4e2d\u4f7f\u7528<code>YIELD</code>\uff1a<pre><code>nebula&gt; FETCH PROP ON player \"player100\" \\\n        YIELD properties(vertex).name;\n+-------------------------+\n| properties(VERTEX).name |\n+-------------------------+\n| \"Tim Duncan\"            |\n+-------------------------+\n</code></pre> </li> </ul> <ul> <li><code>LOOKUP</code>\u8bed\u53e5\u4e2d\u4f7f\u7528<code>YIELD</code>\uff1a<pre><code>nebula&gt; LOOKUP ON player WHERE player.name == \"Tony Parker\" \\\n        YIELD properties(vertex).name, properties(vertex).age;\n+-------------------------+------------------------+\n| properties(VERTEX).name | properties(VERTEX).age |\n+-------------------------+------------------------+\n| \"Tony Parker\"           | 36                     |\n+-------------------------+------------------------+\n</code></pre> </li> </ul>"},{"location":"3.ngql-guide/8.clauses-and-options/yield/#yield_3","title":"YIELD \u8bed\u53e5","text":""},{"location":"3.ngql-guide/8.clauses-and-options/yield/#_2","title":"\u8bed\u6cd5","text":"<pre><code>YIELD [DISTINCT] &lt;col&gt; [AS &lt;alias&gt;] [, &lt;col&gt; [AS &lt;alias&gt;] ...]\n[WHERE &lt;conditions&gt;];\n</code></pre> \u53c2\u6570 \u8bf4\u660e <code>DISTINCT</code> \u805a\u5408\u8f93\u51fa\u7ed3\u679c\uff0c\u8fd4\u56de\u53bb\u91cd\u540e\u7684\u7ed3\u679c\u96c6\u3002 <code>col</code> \u8981\u6309\u8fd4\u56de\u7684\u5b57\u6bb5\u3002\u5982\u679c\u6ca1\u6709\u4e3a\u5b57\u6bb5\u8bbe\u7f6e\u522b\u540d\uff0c\u8fd4\u56de\u7ed3\u679c\u4e2d\u7684\u5217\u540d\u4e3a<code>col</code>\u3002 <code>alias</code> <code>col</code>\u7684\u522b\u540d\u3002\u4f7f\u7528\u5173\u952e\u5b57<code>AS</code>\u8fdb\u884c\u8bbe\u7f6e\uff0c\u8bbe\u7f6e\u540e\u8fd4\u56de\u7ed3\u679c\u4e2d\u7684\u5217\u540d\u4e3a\u8be5\u522b\u540d\u3002 <code>conditions</code> \u5728<code>WHERE</code>\u5b50\u53e5\u4e2d\u8bbe\u7f6e\u7684\u8fc7\u6ee4\u6761\u4ef6\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1 <code>WHERE</code>\u3002"},{"location":"3.ngql-guide/8.clauses-and-options/yield/#yield_4","title":"\u590d\u5408\u67e5\u8be2\u4e2d\u4f7f\u7528 YIELD \u8bed\u53e5","text":"<p>\u5728\u590d\u5408\u67e5\u8be2\u4e2d\uff0c<code>YIELD</code>\u8bed\u53e5\u53ef\u4ee5\u63a5\u6536\u3001\u8fc7\u6ee4\u3001\u4fee\u6539\u4e4b\u524d\u8bed\u53e5\u7684\u7ed3\u679c\u96c6\uff0c\u7136\u540e\u8f93\u51fa\u3002</p> <pre><code># \u67e5\u627e player100 \u5173\u6ce8\u7684 player\uff0c\u5e76\u8ba1\u7b97\u4ed6\u4eec\u7684\u5e73\u5747\u5e74\u9f84\u3002\nnebula&gt; GO FROM \"player100\" OVER follow \\\n        YIELD dst(edge) AS ID \\\n        | FETCH PROP ON player $-.ID \\\n        YIELD properties(vertex).age AS Age \\\n        | YIELD AVG($-.Age) as Avg_age, count(*)as Num_friends;\n+---------+-------------+\n| Avg_age | Num_friends |\n+---------+-------------+\n| 38.5    | 2           |\n+---------+-------------+\n</code></pre> <pre><code># \u67e5\u627e player101 \u5173\u6ce8\u7684 player\uff0c\u8fd4\u56de degree \u5927\u4e8e 90 \u7684 player\u3002\nnebula&gt; $var1 = GO FROM \"player101\" OVER follow \\\n        YIELD properties(edge).degree AS Degree, dst(edge) as ID; \\\n        YIELD $var1.ID AS ID WHERE $var1.Degree &gt; 90;\n+-------------+\n| ID          |\n+-------------+\n| \"player100\" |\n| \"player125\" |\n+-------------+\n\n# \u67e5\u627e player \u4e2d\u5e74\u9f84\u5927\u4e8e 30 \u4e14\u5c0f\u4e8e 32 \u7684\u70b9\uff0c\u8fd4\u56de\u53bb\u6389\u91cd\u590d\u5c5e\u6027\u7684\u503c\u3002\nnebula&gt; LOOKUP ON player  \\\n        WHERE player.age &lt; 32 and player.age &gt;30  \\\n        YIELD DISTINCT properties(vertex).age as v;\n+--------+\n| v      |\n+--------+\n| 31     |\n+--------+\n</code></pre>"},{"location":"3.ngql-guide/8.clauses-and-options/yield/#yield_5","title":"\u72ec\u7acb\u4f7f\u7528 YIELD \u8bed\u53e5","text":"<p><code>YIELD</code>\u53ef\u4ee5\u8ba1\u7b97\u8868\u8fbe\u5f0f\u5e76\u8fd4\u56de\u7ed3\u679c\u3002</p> <pre><code>nebula&gt; YIELD rand32(1, 6);\n+-------------+\n| rand32(1,6) |\n+-------------+\n| 3           |\n+-------------+\n\nnebula&gt; YIELD \"Hel\" + \"\\tlo\" AS string1, \", World!\" AS string2;\n+-------------+------------+\n| string1     | string2    |\n+-------------+------------+\n| \"Hel    lo\" | \", World!\" |\n+-------------+------------+\n\nnebula&gt; YIELD hash(\"Tim\") % 100;\n+-------------------+\n| (hash(\"Tim\")%100) |\n+-------------------+\n| 42                |\n+-------------------+\n\nnebula&gt; YIELD \\\n      CASE 2+3 \\\n      WHEN 4 THEN 0 \\\n      WHEN 5 THEN 1 \\\n      ELSE -1 \\\n      END \\\n      AS result;\n+--------+\n| result |\n+--------+\n| 1      |\n+--------+\n\nnebula&gt; YIELD 1- -1;\n+----------+\n| (1--(1)) |\n+----------+\n| 2        |\n+----------+\n</code></pre>"},{"location":"3.ngql-guide/9.space-statements/1.create-space/","title":"CREATE SPACE","text":"<p>\u56fe\u7a7a\u95f4\u662f NebulaGraph \u4e2d\u5f7c\u6b64\u9694\u79bb\u7684\u56fe\u6570\u636e\u96c6\u5408\uff0c\u4e0e MySQL \u4e2d\u7684 database \u6982\u5ff5\u7c7b\u4f3c\u3002<code>CREATE SPACE</code>\u8bed\u53e5\u53ef\u4ee5\u521b\u5efa\u4e00\u4e2a\u65b0\u7684\u56fe\u7a7a\u95f4\uff0c\u6216\u8005\u514b\u9686\u73b0\u6709\u56fe\u7a7a\u95f4\u7684 Schema\u3002</p>"},{"location":"3.ngql-guide/9.space-statements/1.create-space/#_1","title":"\u524d\u63d0\u6761\u4ef6","text":"<p>\u53ea\u6709 God \u89d2\u8272\u7684\u7528\u6237\u53ef\u4ee5\u6267\u884c<code>CREATE SPACE</code>\u8bed\u53e5\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1\u8eab\u4efd\u9a8c\u8bc1\u3002</p>"},{"location":"3.ngql-guide/9.space-statements/1.create-space/#_2","title":"\u8bed\u6cd5","text":""},{"location":"3.ngql-guide/9.space-statements/1.create-space/#_3","title":"\u521b\u5efa\u56fe\u7a7a\u95f4","text":"<pre><code>CREATE SPACE [IF NOT EXISTS] &lt;graph_space_name&gt; (\n    [partition_num = &lt;partition_number&gt;,]\n    [replica_factor = &lt;replica_number&gt;,]\n    vid_type = {FIXED_STRING(&lt;N&gt;) | INT[64]}\n    )\n    [COMMENT = '&lt;comment&gt;'];\n</code></pre> \u53c2\u6570 \u8bf4\u660e <code>IF NOT EXISTS</code> \u68c0\u6d4b\u5f85\u521b\u5efa\u7684\u56fe\u7a7a\u95f4\u662f\u5426\u5b58\u5728\uff0c\u53ea\u6709\u4e0d\u5b58\u5728\u65f6\uff0c\u624d\u4f1a\u521b\u5efa\u56fe\u7a7a\u95f4\u3002\u4ec5\u68c0\u6d4b\u56fe\u7a7a\u95f4\u7684\u540d\u79f0\uff0c\u4e0d\u4f1a\u68c0\u6d4b\u5177\u4f53\u5c5e\u6027\u3002 <code>&lt;graph_space_name&gt;</code> 1\u3001\u5728NebulaGraph\u5b9e\u4f8b\u4e2d\u552f\u4e00\u6807\u8bc6\u4e00\u4e2a\u56fe\u7a7a\u95f4\u30022\u3001\u56fe\u7a7a\u95f4\u540d\u79f0\u8bbe\u7f6e\u540e\u65e0\u6cd5\u88ab\u4fee\u6539\u30023\u3001\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u4ec5\u652f\u6301 1~4 \u5b57\u8282\u7684 UTF-8 \u7f16\u7801\u5b57\u7b26\uff0c\u5305\u62ec\u82f1\u6587\u5b57\u6bcd\uff08\u533a\u5206\u5927\u5c0f\u5199\uff09\u3001\u6570\u5b57\u3001\u4e2d\u6587\u7b49\u3002\u4e0d\u80fd\u5305\u542b\u4e0b\u5212\u7ebf\uff08_\uff09\u4ee5\u5916\u7684\u7279\u6b8a\u5b57\u7b26\uff0c\u4e14\u4e0d\u80fd\u4ee5\u6570\u5b57\u5f00\u5934\u30024\u3001\u5982\u679c\u9700\u8981\u4f7f\u7528\u7279\u6b8a\u5b57\u7b26\u3001\u4fdd\u7559\u5173\u952e\u5b57\u6216\u8005\u4ee5\u6570\u5b57\u5f00\u5934\uff0c\u8bf7\u4f7f\u7528\u53cd\u5f15\u53f7\uff08`\uff09\u5305\u56f4\u6574\u4e2a\u540d\u79f0\u3002\u53cd\u5f15\u53f7\u4e2d\u4e0d\u80fd\u5305\u542b\u82f1\u6587\u53e5\u53f7\uff08<code>.</code>\uff09\u3002\u8be6\u60c5\u53c2\u89c1\u5173\u952e\u5b57\u548c\u4fdd\u7559\u5b57\u3002\u6ce8\u610f\uff1a1\u3001\u5982\u679c\u4ee5\u4e2d\u6587\u4e3a\u56fe\u7a7a\u95f4\u547d\u540d\uff0c\u62a5<code>SyntaxError</code>\u9519\u8bef\u65f6\uff0c\u9700\u4f7f\u7528\u53cd\u5f15\u53f7\uff08`\uff09\u5305\u56f4\u4e2d\u6587\u5b57\u7b26\u30022\u3001\u540d\u79f0\u4e2d\u5982\u9700\u5305\u542b\u53cd\u5f15\u53f7\uff08`\uff09\uff0c\u4f7f\u7528\u53cd\u659c\u6760\uff08\\\uff09\u6765\u8f6c\u4e49\u53cd\u5f15\u53f7\uff08`\uff09\uff0c\u5982\uff1a\\`\uff1b\u5982\u9700\u5305\u542b\u53cd\u659c\u6760\uff08\\\uff09\uff0c\u53cd\u659c\u6760\uff08\\\uff09\u672c\u8eab\u4e5f\u9700\u8f6c\u4e49\uff0c\u5982\uff1a\\\\\u3002 <code>partition_num</code> \u6307\u5b9a\u56fe\u7a7a\u95f4\u7684\u5206\u7247\u6570\u91cf\u3002\u5efa\u8bae\u8bbe\u7f6e\u4e3a\u96c6\u7fa4\u4e2d\u786c\u76d8\u6570\u91cf\u7684 20 \u500d\uff08HDD \u786c\u76d8\u5efa\u8bae\u4e3a 2 \u500d\uff09\u3002\u4f8b\u5982\u96c6\u7fa4\u4e2d\u6709 3 \u4e2a\u786c\u76d8\uff0c\u5efa\u8bae\u8bbe\u7f6e 60 \u4e2a\u5206\u7247\u3002\u9ed8\u8ba4\u503c\u4e3a 10\u3002 <code>replica_factor</code> \u6307\u5b9a\u6bcf\u4e2a\u5206\u7247\u7684\u526f\u672c\u6570\u91cf\u3002\u5efa\u8bae\u5728\u751f\u4ea7\u73af\u5883\u4e2d\u8bbe\u7f6e\u4e3a 3\uff0c\u5728\u6d4b\u8bd5\u73af\u5883\u4e2d\u8bbe\u7f6e\u4e3a 1\u3002\u7531\u4e8e\u9700\u8981\u57fa\u4e8e\u591a\u6570\u8868\u51b3\uff0c\u526f\u672c\u6570\u91cf\u5fc5\u987b\u662f\u5947\u6570\u3002\u9ed8\u8ba4\u503c\u4e3a 1\u3002 <code>vid_type</code> \u5fc5\u9009\u53c2\u6570\u3002\u6307\u5b9a\u70b9 ID \u7684\u6570\u636e\u7c7b\u578b\u3002\u53ef\u9009\u503c\u4e3a<code>FIXED_STRING(&lt;N&gt;)</code>\u548c<code>INT64</code>\u3002<code>INT</code>\u7b49\u540c\u4e8e<code>INT64</code>\u3002<code>FIXED_STRING(&lt;N&gt;)</code>\u8868\u793a\u6570\u636e\u7c7b\u578b\u4e3a\u5b9a\u957f\u5b57\u7b26\u4e32\uff0c\u957f\u5ea6\u4e3a<code>N</code>\u5b57\u8282\uff0c\u8d85\u51fa\u957f\u5ea6\u4f1a\u62a5\u9519\u3002\u4f8b\u5982\uff0cUTF-8\u4e2d\uff0c\u4e00\u4e2a\u4e2d\u6587\u5b57\u7b26\u7684\u957f\u5ea6\u4e3a\u4e09\u4e2a\u5b57\u8282\uff0c\u5982\u679c\u8bbe\u7f6e<code>N</code>\u4e3a 12\uff0c\u90a3\u4e48<code>vid_type</code>\u4e3a\u6700\u591a 4 \u4e2a\u4e2d\u6587\u5b57\u7b26\u3002<code>INT64</code>\u8868\u793a\u6570\u636e\u7c7b\u578b\u4e3a\u6574\u6570\u3002 <code>COMMENT</code> \u56fe\u7a7a\u95f4\u7684\u63cf\u8ff0\u3002\u6700\u5927\u4e3a 256 \u5b57\u8282\u3002\u9ed8\u8ba4\u65e0\u63cf\u8ff0\u3002 <p>Caution</p> <ul> <li>\u5982\u679c\u5c06\u526f\u672c\u6570\u8bbe\u7f6e\u4e3a 1\uff0c\u7528\u6237\u5c06\u65e0\u6cd5\u4f7f\u7528 SUBMIT JOB BALANCE \u547d\u4ee4\u4e3a NebulaGraph \u7684\u5b58\u50a8\u670d\u52a1\u5e73\u8861\u8d1f\u8f7d\u6216\u6269\u5bb9\u3002</li> </ul> <ul> <li> <p>VID \u7c7b\u578b\u53d8\u66f4\u4e0e\u957f\u5ea6\u9650\u5236\uff1a</p> <ul> <li>\u5728 NebulaGraph 1.x \u4e2d\uff0cVID \u7684\u7c7b\u578b\u53ea\u80fd\u4e3a<code>INT64</code>\uff0c\u4e0d\u652f\u6301\u5b57\u7b26\u578b\uff1b\u5728 NebulaGraph 2.x \u4e2d\uff0cVID \u7684\u7c7b\u578b\u652f\u6301<code>INT64</code>\u548c<code>FIXED_STRING(&lt;N&gt;)</code>\u3002\u8bf7\u5728\u521b\u5efa\u56fe\u7a7a\u95f4\u65f6\u6307\u5b9a VID \u7c7b\u578b\uff0c\u4f7f\u7528<code>INSERT</code>\u8bed\u53e5\u65f6\u4e5f\u9700\u8981\u4fdd\u6301\u4e00\u81f4\uff0c\u5426\u5219\u4f1a\u62a5\u9519 VID \u7c7b\u578b\u4e0d\u5339\u914d<code>Wrong vertex id type: 1001</code>\u3002</li> </ul> <ul> <li>VID \u6700\u5927\u957f\u5ea6\u5fc5\u987b\u4e3a<code>N</code>\uff0c\u4e0d\u53ef\u4efb\u610f\u957f\u5ea6\uff1b\u8d85\u8fc7\u8be5\u957f\u5ea6\u4e5f\u4f1a\u62a5\u9519<code>The VID must be a 64-bit integer or a string fitting space vertex id length limit.</code>\u3002</li> </ul> </li> </ul> <ul> <li> <p>\u5982\u679c\u51fa\u73b0<code>Host not enough!</code>\u7684\u62a5\u9519\uff0c\u76f4\u63a5\u539f\u56e0\u662f\u7ebf\u4e0a Storage Host \u7684\u6570\u91cf\u5c11\u4e8e\u5373\u5c06\u521b\u5efa\u7684\u56fe\u7a7a\u95f4\u7684<code>replica_factor</code>\u7684\u6570\u91cf\u3002\u6b64\u65f6\uff0c\u53ef\u7528<code>SHOW HOSTS</code>\u6307\u4ee4\u67e5\u770b\u5224\u65ad\uff0c\u51fa\u73b0\u7684\u60c5\u51b5\u6709\uff1a</p> <ul> <li>\u5728\u96c6\u7fa4\u662f\u5355 Storage Host \u7684\u60c5\u51b5\u4e0b\u8bd5\u56fe\u521b\u5efa\u591a\u526f\u672c\uff08replica_factor\uff09\u56fe\u7a7a\u95f4\uff0c\u8fd9\u65f6\u5019\u53ea\u80fd\u9009\u62e9\u521b\u5efa\u5355\u526f\u672c\u6570\u7684\u56fe\u7a7a\u95f4\uff0c\u6216\u8005\u6269\u5bb9 Storage Host \u4e4b\u540e\u518d\u521b\u5efa\u56fe\u7a7a\u95f4\u3002</li> </ul> <ul> <li>\u65b0\u521b\u5efa\u7684\u96c6\u7fa4\u91cc Storage Host \u5df2\u7ecf\u88ab\u670d\u52a1\u53d1\u73b0\uff0c\u4f46\u662f\u5c1a\u672a\u6267\u884c<code>ADD HOSTS</code>\u5c06\u5176\u6fc0\u6d3b\uff0c\u8fd9\u65f6\u5019\u9700\u8981\u901a\u8fc7 Console \u8fde\u63a5\uff0c\u6267\u884c<code>SHOW HOSTS</code>\u83b7\u53d6\u88ab\u53d1\u73b0\u4e86\u7684 Storage Host\uff0c\u7136\u540e\u6267\u884c\u76f8\u5e94\u7684<code>ADD HOSTS</code>\u6fc0\u6d3b\uff0c\u5f85\u6709\u8db3\u591f\u7684 Online Storage Host \u4e4b\u540e\u518d\u5c1d\u8bd5\u521b\u5efa\u56fe\u7a7a\u95f4\u3002</li> </ul> <ul> <li>\u6709\u90e8\u5206 Storage Host \u5904\u5728\u975e Online \u72b6\u6001\uff0c\u9700\u8981\u8fdb\u884c\u8fdb\u4e00\u6b65\u6392\u67e5\u3002</li> </ul> </li> </ul> <p>\u5386\u53f2\u7248\u672c\u517c\u5bb9\u6027</p> <p>2.5.0 \u4e4b\u524d\u7684 2.x \u7248\u672c\u4e2d\uff0c<code>vid_type</code>\u4e0d\u662f\u5fc5\u9009\u53c2\u6570\uff0c\u9ed8\u8ba4\u4e3a<code>FIXED_STRING(8)</code>\u3002</p> <p>Note</p> <p><code>graph_space_name</code>, <code>partition_num</code>, <code>replica_factor</code>, <code>vid_type</code>, <code>comment</code> \u8bbe\u7f6e\u540e\u5c31\u65e0\u6cd5\u6539\u53d8\u3002\u9664\u975e <code>DROP SPACE</code>\uff0c\u5e76\u91cd\u65b0<code>CREATE SPACE</code>\u3002</p>"},{"location":"3.ngql-guide/9.space-statements/1.create-space/#_4","title":"\u514b\u9686\u56fe\u7a7a\u95f4","text":"<pre><code>CREATE SPACE [IF NOT EXISTS] &lt;new_graph_space_name&gt; AS &lt;old_graph_space_name&gt;;\n</code></pre> \u53c2\u6570 \u8bf4\u660e <code>IF NOT EXISTS</code> \u68c0\u6d4b\u5f85\u521b\u5efa\u7684\u56fe\u7a7a\u95f4\u662f\u5426\u5b58\u5728\uff0c\u53ea\u6709\u4e0d\u5b58\u5728\u65f6\uff0c\u624d\u4f1a\u514b\u9686\u56fe\u7a7a\u95f4\u3002\u4ec5\u68c0\u6d4b\u56fe\u7a7a\u95f4\u7684\u540d\u79f0\uff0c\u4e0d\u4f1a\u68c0\u6d4b\u5177\u4f53\u5c5e\u6027\u3002 <code>&lt;new_graph_space_name&gt;</code> \u76ee\u6807\u56fe\u7a7a\u95f4\u540d\u79f0\u3002\u8be5\u56fe\u7a7a\u95f4\u5fc5\u987b\u672a\u521b\u5efa\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u4ec5\u652f\u6301 1~4 \u5b57\u8282\u7684 UTF-8 \u7f16\u7801\u5b57\u7b26\uff0c\u5305\u62ec\u82f1\u6587\u5b57\u6bcd\uff08\u533a\u5206\u5927\u5c0f\u5199\uff09\u3001\u6570\u5b57\u3001\u4e2d\u6587\u7b49\uff0c\u4f46\u662f\u7279\u6b8a\u5b57\u7b26\u53ea\u80fd\u4f7f\u7528\u4e0b\u5212\u7ebf\u3002\u4e0d\u80fd\u4ee5\u6570\u5b57\u5f00\u5934\u3002\u5982\u679c\u9700\u8981\u4f7f\u7528\u7279\u6b8a\u5b57\u7b26\u3001\u4fdd\u7559\u5173\u952e\u5b57\u6216\u8005\u4ee5\u6570\u5b57\u5f00\u5934\uff0c\u8bf7\u4f7f\u7528\u53cd\u5f15\u53f7\uff08`\uff09\u5305\u56f4\u6574\u4e2a\u540d\u79f0\u3002\u53cd\u5f15\u53f7\u4e2d\u4e0d\u80fd\u5305\u542b\u82f1\u6587\u53e5\u53f7\uff08<code>.</code>\uff09\u3002\u8be6\u60c5\u53c2\u89c1\u5173\u952e\u5b57\u548c\u4fdd\u7559\u5b57\u3002\u521b\u5efa\u65f6\u4f1a\u514b\u9686<code>&lt;old_graph_space_name&gt;</code>\u56fe\u7a7a\u95f4\u7684 Schema\uff0c\u5305\u62ec\u56fe\u7a7a\u95f4\u672c\u8eab\u53c2\u6570\uff08\u5206\u7247\u6570\u91cf\u3001\u526f\u672c\u6570\u91cf\u7b49\uff09\u3001Tag\u3001Edge type \u548c \u539f\u751f\u7d22\u5f15\u3002\u6ce8\u610f\uff1a1\u3001\u5982\u679c\u4ee5\u4e2d\u6587\u4e3a\u56fe\u7a7a\u95f4\u547d\u540d\uff0c\u62a5<code>SyntaxError</code>\u9519\u8bef\u65f6\uff0c\u9700\u4f7f\u7528\u53cd\u5f15\u53f7\uff08`\uff09\u5305\u56f4\u4e2d\u6587\u5b57\u7b26\u30022\u3001\u540d\u79f0\u4e2d\u5982\u9700\u5305\u542b\u53cd\u5f15\u53f7\uff08`\uff09\uff0c\u4f7f\u7528\u53cd\u659c\u6760\uff08\\\uff09\u6765\u8f6c\u4e49\u53cd\u5f15\u53f7\uff08`\uff09\uff0c\u5982\uff1a\\`\uff1b\u5982\u9700\u5305\u542b\u53cd\u659c\u6760\uff08\\\uff09\uff0c\u53cd\u659c\u6760\uff08\\\uff09\u672c\u8eab\u4e5f\u9700\u8f6c\u4e49\uff0c\u5982\uff1a\\\\\u3002 <code>&lt;old_graph_space_name&gt;</code> \u539f\u59cb\u56fe\u7a7a\u95f4\u540d\u79f0\u3002\u8be5\u56fe\u7a7a\u95f4\u5fc5\u987b\u5df2\u5b58\u5728\u3002"},{"location":"3.ngql-guide/9.space-statements/1.create-space/#_5","title":"\u793a\u4f8b","text":"<pre><code># \u4ec5\u6307\u5b9a VID \u7c7b\u578b\uff0c\u5176\u4ed6\u9009\u9879\u4f7f\u7528\u9ed8\u8ba4\u503c\u3002\nnebula&gt; CREATE SPACE IF NOT EXISTS my_space_1 (vid_type=FIXED_STRING(30));\n\n# \u6307\u5b9a\u5206\u7247\u6570\u91cf\u3001\u526f\u672c\u6570\u91cf\u548c VID \u7c7b\u578b\u3002\nnebula&gt; CREATE SPACE IF NOT EXISTS my_space_2 (partition_num=15, replica_factor=1, vid_type=FIXED_STRING(30));\n\n# \u6307\u5b9a\u5206\u7247\u6570\u91cf\u3001\u526f\u672c\u6570\u91cf\u548c VID \u7c7b\u578b\uff0c\u5e76\u6dfb\u52a0\u63cf\u8ff0\u3002\nnebula&gt; CREATE SPACE IF NOT EXISTS my_space_3 (partition_num=15, replica_factor=1, vid_type=FIXED_STRING(30)) comment=\"\u6d4b\u8bd5\u56fe\u7a7a\u95f4\";\n\n# \u514b\u9686\u56fe\u7a7a\u95f4\u3002\nnebula&gt; CREATE SPACE IF NOT EXISTS my_space_4 as my_space_3;\nnebula&gt; SHOW CREATE SPACE my_space_4;\n+--------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------+\n| Space        | Create Space                                                                                                                                                 |\n+--------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------+\n| \"my_space_4\" | \"CREATE SPACE `my_space_4` (partition_num = 15, replica_factor = 1, charset = utf8, collate = utf8_bin, vid_type = FIXED_STRING(30)) comment = '\u6d4b\u8bd5\u56fe\u7a7a\u95f4'\" |\n+--------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------+\n</code></pre> <p>Caution</p> <p>\u7acb\u523b\u5c1d\u8bd5\u4f7f\u7528\u521a\u521b\u5efa\u7684\u56fe\u7a7a\u95f4\u53ef\u80fd\u4f1a\u5931\u8d25\u3002\u56e0\u4e3a\u521b\u5efa\u662f\u5f02\u6b65\u5b9e\u73b0\u7684\u3002\u4e3a\u786e\u4fdd\u6570\u636e\u540c\u6b65\uff0c\u540e\u7eed\u64cd\u4f5c\u80fd\u987a\u5229\u8fdb\u884c\uff0c\u8bf7\u7b49\u5f85 2 \u4e2a\u5fc3\u8df3\u5468\u671f\uff0820 \u79d2\uff09\u3002\u5982\u679c\u9700\u8981\u4fee\u6539\u5fc3\u8df3\u95f4\u9694\uff0c\u8bf7\u4e3a\u6240\u6709\u914d\u7f6e\u6587\u4ef6\u4fee\u6539\u53c2\u6570<code>heartbeat_interval_secs</code>\u3002\u4f46\u8fc7\u77ed\u7684\u5fc3\u8df3\u5468\u671f\uff08&lt;5 \u79d2\uff09\u53ef\u80fd\u4f1a\u5bfc\u81f4\u5206\u5e03\u5f0f\u7cfb\u7edf\u4e2d\u7684\u673a\u5668\u8bef\u5224\u5bf9\u7aef\u5931\u8054\u3002</p>"},{"location":"3.ngql-guide/9.space-statements/1.create-space/#_6","title":"\u68c0\u67e5\u5206\u7247\u5206\u5e03\u60c5\u51b5","text":"<p>\u5728\u5927\u578b\u96c6\u7fa4\u4e2d\uff0c\u7531\u4e8e\u542f\u52a8\u65f6\u95f4\u4e0d\u540c\uff0c\u5206\u7247\u7684\u5206\u5e03\u53ef\u80fd\u4e0d\u5747\u8861\u3002\u7528\u6237\u53ef\u4ee5\u6267\u884c\u5982\u4e0b\u547d\u4ee4\u68c0\u67e5\u5206\u7247\u7684\u5206\u5e03\u60c5\u51b5\uff1a</p> <pre><code>nebula&gt; SHOW HOSTS;\n+-------------+------+----------+--------------+--------------------------------+--------------------------------+---------+\n| Host        | Port | Status   | Leader count | Leader distribution            | Partition distribution         | Version |\n+-------------+------+----------+--------------+--------------------------------+--------------------------------+---------+\n| \"storaged0\" | 9779 | \"ONLINE\" | 8            | \"basketballplayer:3, test:5\"   | \"basketballplayer:10, test:10\" | \"master\" |\n| \"storaged1\" | 9779 | \"ONLINE\" | 9            | \"basketballplayer:4, test:5\"   | \"basketballplayer:10, test:10\" | \"master\" |\n| \"storaged2\" | 9779 | \"ONLINE\" | 3            | \"basketballplayer:3\"           | \"basketballplayer:10, test:10\" | \"master\" |\n+-------------+------+----------+--------------+--------------------------------+--------------------------------+---------+\n</code></pre> <p>\u5982\u679c\u9700\u8981\u5747\u8861\u8d1f\u8f7d\uff0c\u8bf7\u6267\u884c\u5982\u4e0b\u547d\u4ee4\uff1a</p> <pre><code>nebula&gt; BALANCE LEADER;\nnebula&gt; SHOW HOSTS;\n+-------------+------+----------+--------------+--------------------------------+--------------------------------+---------+\n| Host        | Port | Status   | Leader count | Leader distribution            | Partition distribution         | Version |\n+-------------+------+----------+--------------+--------------------------------+--------------------------------+---------+\n| \"storaged0\" | 9779 | \"ONLINE\" | 7            | \"basketballplayer:3, test:4\"   | \"basketballplayer:10, test:10\" | \"master\" |\n| \"storaged1\" | 9779 | \"ONLINE\" | 7            | \"basketballplayer:4, test:3\"   | \"basketballplayer:10, test:10\" | \"master\" |\n| \"storaged2\" | 9779 | \"ONLINE\" | 6            | \"basketballplayer:3, test:3\"   | \"basketballplayer:10, test:10\" | \"master\" |\n+-------------+------+----------+--------------+--------------------------------+--------------------------------+---------+\n</code></pre>"},{"location":"3.ngql-guide/9.space-statements/2.use-space/","title":"USE","text":"<p><code>USE</code>\u8bed\u53e5\u53ef\u4ee5\u6307\u5b9a\u4e00\u4e2a\u56fe\u7a7a\u95f4\uff0c\u6216\u5207\u6362\u5230\u53e6\u4e00\u4e2a\u56fe\u7a7a\u95f4\uff0c\u5c06\u5176\u4f5c\u4e3a\u540e\u7eed\u67e5\u8be2\u7684\u5de5\u4f5c\u7a7a\u95f4\u3002</p>"},{"location":"3.ngql-guide/9.space-statements/2.use-space/#_1","title":"\u524d\u63d0\u6761\u4ef6","text":"<p>\u6267\u884c<code>USE</code>\u8bed\u53e5\u6307\u5b9a\u56fe\u7a7a\u95f4\u65f6\uff0c\u9700\u8981\u5f53\u524d\u767b\u5f55\u7684\u7528\u6237\u62e5\u6709\u6307\u5b9a\u56fe\u7a7a\u95f4\u7684\u6743\u9650\uff0c\u5426\u5219\u4f1a\u62a5\u9519\u3002</p>"},{"location":"3.ngql-guide/9.space-statements/2.use-space/#_2","title":"\u8bed\u6cd5","text":"<pre><code>USE &lt;graph_space_name&gt;;\n</code></pre>"},{"location":"3.ngql-guide/9.space-statements/2.use-space/#_3","title":"\u793a\u4f8b","text":"<pre><code># \u521b\u5efa\u793a\u4f8b\u7a7a\u95f4\u3002\nnebula&gt; CREATE SPACE IF NOT EXISTS space1 (vid_type=FIXED_STRING(30));\nnebula&gt; CREATE SPACE IF NOT EXISTS space2 (vid_type=FIXED_STRING(30));\n\n# \u6307\u5b9a\u56fe\u7a7a\u95f4 space1 \u4f5c\u4e3a\u5de5\u4f5c\u7a7a\u95f4\u3002\nnebula&gt; USE space1;\n\n# \u5207\u6362\u5230\u56fe\u7a7a\u95f4 space2\u3002\u68c0\u7d22 space2 \u65f6\uff0c\u65e0\u6cd5\u4ece space1 \u8bfb\u53d6\u4efb\u4f55\u6570\u636e\uff0c\u68c0\u7d22\u7684\u70b9\u548c\u8fb9\u4e0e space1 \u65e0\u5173\u3002\nnebula&gt; USE space2;\n</code></pre> <p>Caution</p> <p>\u4e0d\u80fd\u5728\u4e00\u6761\u8bed\u53e5\u4e2d\u540c\u65f6\u64cd\u4f5c\u4e24\u4e2a\u56fe\u7a7a\u95f4\u3002</p> <p>\u4e0e Fabric Cypher \u4e0d\u540c\uff0cNebulaGraph \u7684\u56fe\u7a7a\u95f4\u5f7c\u6b64\u4e4b\u95f4\u662f\u5b8c\u5168\u9694\u79bb\u7684\uff0c\u5c06\u4e00\u4e2a\u56fe\u7a7a\u95f4\u4f5c\u4e3a\u5de5\u4f5c\u7a7a\u95f4\u540e\uff0c\u7528\u6237\u65e0\u6cd5\u8bbf\u95ee\u5176\u4ed6\u7a7a\u95f4\u3002\u4f7f\u7528\u65b0\u56fe\u7a7a\u95f4\u7684\u552f\u4e00\u65b9\u6cd5\u662f\u901a\u8fc7<code>USE</code>\u8bed\u53e5\u5207\u6362\u3002\u800c\u5728 Fabric Cypher \u4e2d\u53ef\u4ee5\u5728\u4e00\u6761\u8bed\u53e5\u4e2d (<code>USE + CALL</code>\u8bed\u6cd5\uff09\u4f7f\u7528\u4e24\u4e2a\u56fe\u7a7a\u95f4\u3002</p>"},{"location":"3.ngql-guide/9.space-statements/3.show-spaces/","title":"SHOW SPACES","text":"<p><code>SHOW SPACES</code>\u8bed\u53e5\u53ef\u4ee5\u5217\u51fa NebulaGraph \u793a\u4f8b\u4e2d\u7684\u6240\u6709\u56fe\u7a7a\u95f4\u3002</p>"},{"location":"3.ngql-guide/9.space-statements/3.show-spaces/#_1","title":"\u8bed\u6cd5","text":"<pre><code>SHOW SPACES;\n</code></pre>"},{"location":"3.ngql-guide/9.space-statements/3.show-spaces/#_2","title":"\u793a\u4f8b","text":"<pre><code>nebula&gt; SHOW SPACES;\n+--------------------+\n| Name               |\n+--------------------+\n| \"cba\"              |\n| \"basketballplayer\" |\n+--------------------+\n</code></pre> <p>\u521b\u5efa\u56fe\u7a7a\u95f4\u8bf7\u53c2\u89c1 CREATE SPACE\u3002</p>"},{"location":"3.ngql-guide/9.space-statements/4.describe-space/","title":"DESCRIBE SPACE","text":"<p><code>DESCRIBE SPACE</code>\u8bed\u53e5\u53ef\u4ee5\u663e\u793a\u6307\u5b9a\u56fe\u7a7a\u95f4\u7684\u4fe1\u606f\u3002</p>"},{"location":"3.ngql-guide/9.space-statements/4.describe-space/#_1","title":"\u8bed\u6cd5","text":"<p>\u4f60\u53ef\u4ee5\u7528<code>DESC</code>\u4f5c\u4e3a<code>DESCRIBE</code>\u7684\u7f29\u5199\u3002</p> <pre><code>DESC[RIBE] SPACE &lt;graph_space_name&gt;;\n</code></pre>"},{"location":"3.ngql-guide/9.space-statements/4.describe-space/#_2","title":"\u793a\u4f8b","text":"<pre><code>nebula&gt; DESCRIBE SPACE basketballplayer;\n+----+--------------------+------------------+----------------+---------+------------+--------------------+---------+\n| ID | Name               | Partition Number | Replica Factor | Charset | Collate    | Vid Type           | Comment |\n+----+--------------------+------------------+----------------+---------+------------+--------------------+---------+\n| 1  | \"basketballplayer\" | 10               | 1              | \"utf8\"  | \"utf8_bin\" | \"FIXED_STRING(32)\" |         |\n+----+--------------------+------------------+----------------+---------+------------+--------------------+---------+\n</code></pre>"},{"location":"3.ngql-guide/9.space-statements/5.drop-space/","title":"DROP SPACE","text":"<p><code>DROP SPACE</code>\u8bed\u53e5\u7528\u4e8e\u5220\u9664\u6307\u5b9a\u56fe\u7a7a\u95f4\u4ee5\u53ca\u5176\u4e2d\u7684\u6240\u6709\u4fe1\u606f\u3002</p> <p>Note</p> <p><code>DROP SPACE</code>\u662f\u5426\u5220\u9664\u56fe\u7a7a\u95f4\u5bf9\u5e94\u7684\u786c\u76d8\u6570\u636e\u7531 Storage \u914d\u7f6e\u53c2\u6570<code>auto_remove_invalid_space</code>\u51b3\u5b9a\u3002<code>auto_remove_invalid_space</code>\u7684\u9ed8\u8ba4\u503c\u4e3a<code>true</code>\uff0c\u8868\u793a\u4f1a\u5220\u9664\u6570\u636e\u3002\u5982\u9700\u5728\u5220\u9664\u903b\u8f91\u56fe\u7a7a\u95f4\u65f6\u4fdd\u7559\u786c\u76d8\u6570\u636e\uff0c\u5c06<code>auto_remove_invalid_space</code>\u7684\u503c\u4fee\u6539\u4e3a<code>false</code>\u3002\u8be6\u60c5\u53c2\u89c1 Storage \u670d\u52a1\u914d\u7f6e\u3002</p> <p>Warning</p> <p>\u6267\u884c<code>DROP SPACE</code>\u540e\uff0c\u5373\u4f7f\u5feb\u7167\u4e2d\u5b58\u5728\u8be5\u56fe\u7a7a\u95f4\u7684\u6570\u636e\uff0c\u8be5\u56fe\u7a7a\u95f4\u7684\u6570\u636e\u4e5f\u65e0\u6cd5\u6062\u590d\u3002</p>"},{"location":"3.ngql-guide/9.space-statements/5.drop-space/#_1","title":"\u524d\u63d0\u6761\u4ef6","text":"<p>\u53ea\u6709 God \u89d2\u8272\u7684\u7528\u6237\u53ef\u4ee5\u6267\u884c<code>DROP SPACE</code>\u8bed\u53e5\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1\u8eab\u4efd\u9a8c\u8bc1\u3002</p>"},{"location":"3.ngql-guide/9.space-statements/5.drop-space/#_2","title":"\u8bed\u6cd5","text":"<pre><code>DROP SPACE [IF EXISTS] &lt;graph_space_name&gt;;\n</code></pre> <p><code>IF EXISTS</code>\u5173\u952e\u5b57\u53ef\u4ee5\u68c0\u6d4b\u5f85\u5220\u9664\u7684\u56fe\u7a7a\u95f4\u662f\u5426\u5b58\u5728\uff0c\u53ea\u6709\u5b58\u5728\u65f6\uff0c\u624d\u4f1a\u5220\u9664\u56fe\u7a7a\u95f4\u3002</p> <p>\u5386\u53f2\u7248\u672c\u517c\u5bb9\u6027</p> <p>\u5728 NebulaGraph 3.1.0 \u7248\u672c\u524d\uff0c<code>DROP SPACE</code>\u8bed\u53e5\u4e0d\u4f1a\u5220\u9664\u786c\u76d8\u4e0a\u5bf9\u5e94\u56fe\u7a7a\u95f4\u7684\u76ee\u5f55\u548c\u6587\u4ef6\u3002</p> <p>Danger</p> <p>\u8bf7\u8c28\u614e\u6267\u884c\u5220\u9664\u56fe\u7a7a\u95f4\u64cd\u4f5c\u3002</p>"},{"location":"3.ngql-guide/9.space-statements/5.drop-space/#faq","title":"FAQ","text":"<p>\u95ee\uff1a\u6267\u884c<code>DROP SPACE</code>\u8bed\u53e5\u5220\u9664\u56fe\u7a7a\u95f4\u540e\uff0c\u4e3a\u4ec0\u4e48\u78c1\u76d8\u7684\u5927\u5c0f\u6ca1\u53d8\u5316\uff1f</p> <p>\u7b54\uff1a\u5982\u679c\u4f7f\u7528 3.1.0 \u4e4b\u524d\u7248\u672c\u7684 NebulaGraph , <code>DROP SPACE</code>\u8bed\u53e5\u4ec5\u5220\u9664\u6307\u5b9a\u7684\u903b\u8f91\u56fe\u7a7a\u95f4\uff0c\u4e0d\u4f1a\u5220\u9664\u786c\u76d8\u4e0a\u5bf9\u5e94\u56fe\u7a7a\u95f4\u7684\u76ee\u5f55\u548c\u6587\u4ef6\u3002\u5982\u9700\u5220\u9664\u786c\u76d8\u4e0a\u7684\u6570\u636e\uff0c\u9700\u624b\u52a8\u5220\u9664\u76f8\u5e94\u6587\u4ef6\u7684\u8def\u5f84\uff0c\u6587\u4ef6\u8def\u5f84\u4e3a<code>&lt;nebula_graph_install_path&gt;/data/storage/nebula/&lt;space_id&gt;</code>\u3002\u5176\u4e2d<code>&lt;space_id&gt;</code>\u53ef\u4ee5\u901a\u8fc7<code>DESCRIBE SPACE {space_name}</code>\u67e5\u770b\u3002</p>"},{"location":"3.ngql-guide/9.space-statements/6.clear-space/","title":"CLEAR SPACE","text":"<p><code>CLEAR SPACE</code>\u8bed\u53e5\u7528\u4e8e\u6e05\u7a7a\u56fe\u7a7a\u95f4\u4e2d\u7684\u70b9\u548c\u8fb9\uff0c\u4f46\u4e0d\u4f1a\u5220\u9664\u56fe\u7a7a\u95f4\u672c\u8eab\u4ee5\u53ca\u5176\u4e2d\u7684 Schema \u4fe1\u606f\u3002</p> <p>Note</p> <p>\u5efa\u8bae\u5728\u6267\u884c<code>CLEAR SPACE</code>\u64cd\u4f5c\u4e4b\u540e\uff0c\u7acb\u5373\u6267\u884c SUBMIT JOB COMPACT\u64cd\u4f5c\u4ee5\u63d0\u5347\u67e5\u8be2\u6027\u80fd\u3002\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0cCOMPACT \u64cd\u4f5c\u53ef\u80fd\u4f1a\u5f71\u54cd\u67e5\u8be2\u6027\u80fd\uff0c\u5efa\u8bae\u5728\u4e1a\u52a1\u4f4e\u5cf0\u671f\uff08\u4f8b\u5982\u51cc\u6668\uff09\u6267\u884c\u8be5\u64cd\u4f5c\u3002</p>"},{"location":"3.ngql-guide/9.space-statements/6.clear-space/#_1","title":"\u6743\u9650\u8981\u6c42","text":"<p>\u53ea\u6709 God \u89d2\u8272\u7684\u7528\u6237\u53ef\u4ee5\u6267\u884c<code>CLEAR SPACE</code>\u8bed\u53e5\u3002</p>"},{"location":"3.ngql-guide/9.space-statements/6.clear-space/#_2","title":"\u6ce8\u610f\u4e8b\u9879","text":"<ul> <li>\u6570\u636e\u6e05\u9664\u540e\uff0c\u5982\u65e0\u5907\u4efd\uff0c\u65e0\u6cd5\u6062\u590d\u3002\u4f7f\u7528\u8be5\u529f\u80fd\u52a1\u5fc5\u8c28\u614e\u3002</li> <li><code>CLEAR SPACE</code>\u4e0d\u662f\u539f\u5b50\u6027\u64cd\u4f5c\u3002\u5982\u679c\u6267\u884c\u51fa\u9519\uff0c\u8bf7\u91cd\u65b0\u6267\u884c\uff0c\u907f\u514d\u6b8b\u7559\u6570\u636e\u3002</li> <li>\u56fe\u7a7a\u95f4\u4e2d\u7684\u6570\u636e\u91cf\u8d8a\u5927\uff0c<code>CLEAR SPACE</code>\u6d88\u8017\u7684\u65f6\u95f4\u8d8a\u957f\u3002\u5982\u679c<code>CLEAR SPACE</code>\u7684\u6267\u884c\u56e0\u5ba2\u6237\u7aef\u8fde\u63a5\u8d85\u65f6\u800c\u5931\u8d25\uff0c\u53ef\u4ee5\u589e\u5927 Graph \u670d\u52a1\u914d\u7f6e\u4e2d<code>storage_client_timeout_ms</code>\u53c2\u6570\u7684\u503c\u3002</li> <li>\u5728<code>CLEAR SPACE</code>\u7684\u6267\u884c\u8fc7\u7a0b\u4e2d\uff0c\u5411\u8be5\u56fe\u7a7a\u95f4\u5199\u5165\u6570\u636e\u7684\u884c\u4e3a\u4e0d\u4f1a\u88ab\u81ea\u52a8\u7981\u6b62\u3002\u8fd9\u6837\u7684\u5199\u5165\u884c\u4e3a\u53ef\u80fd\u5bfc\u81f4<code>CLEAR SPACE</code>\u6e05\u9664\u6570\u636e\u4e0d\u5b8c\u5168\uff0c\u6b8b\u7559\u7684\u6570\u636e\u4e5f\u53ef\u80fd\u53d7\u5230\u635f\u574f\u3002</li> </ul> <p>Note</p> <p>NebulaGraph \u4e0d\u652f\u6301\u5728\u8fd0\u884c<code>CLEAR SPACE</code>\u7684\u540c\u65f6\u7981\u6b62\u5199\u5165\u3002</p>"},{"location":"3.ngql-guide/9.space-statements/6.clear-space/#_3","title":"\u8bed\u6cd5","text":"<pre><code>CLEAR SPACE [IF EXISTS] &lt;space_name&gt;;\n</code></pre> \u53c2\u6570/\u9009\u9879 \u8bf4\u660e <code>IF EXISTS</code> \u68c0\u67e5\u5f85\u6e05\u7a7a\u7684\u56fe\u7a7a\u95f4\u662f\u5426\u5b58\u5728\uff0c\u5982\u679c\u56fe\u7a7a\u95f4\u5b58\u5728\uff0c\u5219\u7ee7\u7eed\u6267\u884c\u6e05\u7a7a\u64cd\u4f5c\uff1b\u5982\u679c\u56fe\u7a7a\u95f4\u4e0d\u5b58\u5728\uff0c\u5219\u5b8c\u6210\u6267\u884c\uff0c\u5e76\u4e14\u63d0\u793a\u6267\u884c\u6210\u529f\uff0c\u4e0d\u4f1a\u63d0\u793a\u56fe\u7a7a\u95f4\u4e0d\u5b58\u5728\u3002\u82e5\u4e0d\u8bbe\u7f6e\u8be5\u9009\u9879\uff0c\u5f53\u56fe\u7a7a\u95f4\u4e0d\u5b58\u5728\u65f6\uff0c<code>CLEAR SPACE</code>\u8bed\u53e5\u4f1a\u6267\u884c\u5931\u8d25\uff0c\u7cfb\u7edf\u4f1a\u62a5\u9519\u3002 <code>space_name</code> \u8981\u6e05\u9664\u6570\u636e\u7684\u56fe\u7a7a\u95f4\u540d\u79f0\u3002 <p>\u793a\u4f8b\uff1a</p> <pre><code>CLEAR SPACE basketballplayer;\n</code></pre>"},{"location":"3.ngql-guide/9.space-statements/6.clear-space/#_4","title":"\u4fdd\u7559\u7684\u6570\u636e","text":"<p>\u56fe\u7a7a\u95f4\u4e2d\uff0c<code>CLEAR SPACE</code>\u4e0d\u4f1a\u5220\u9664\u7684\u6570\u636e\u5305\u62ec\uff1a</p> <ul> <li>Tag \u4fe1\u606f\u3002</li> <li>Edge type \u4fe1\u606f\u3002</li> <li>\u539f\u751f\u7d22\u5f15\u548c\u5168\u6587\u7d22\u5f15\u7684\u5143\u6570\u636e\u3002</li> </ul> <p>\u4e0b\u9762\u7684\u6267\u884c\u793a\u4f8b\u660e\u786e\u5c55\u793a\u4e86<code>CLEAR SPACE</code>\u4f1a\u5220\u9664\u4e0e\u4fdd\u7559\u7684\u6570\u636e\u3002</p> <pre><code># \u8fdb\u5165\u56fe\u7a7a\u95f4 basketballplayer\u3002\nnebula[(none)]&gt; use basketballplayer;\nExecution succeeded\n\n# \u67e5\u770b Tag \u548c Edge type\u3002\nnebula[basketballplayer]&gt; SHOW TAGS;\n+----------+\n| Name     |\n+----------+\n| \"player\" |\n| \"team\"   |\n+----------+\nGot 2 rows\n\nnebula[basketballplayer]&gt; SHOW EDGES;\n+----------+\n| Name     |\n+----------+\n| \"follow\" |\n| \"serve\"  |\n+----------+\nGot 2 rows\n\n# \u7edf\u8ba1\u56fe\u7a7a\u95f4\u4e2d\u7684\u6570\u636e\u3002\nnebula[basketballplayer]&gt; SUBMIT JOB STATS;\n+------------+\n| New Job Id |\n+------------+\n| 4          |\n+------------+\nGot 1 rows\n\n# \u67e5\u770b\u7edf\u8ba1\u7ed3\u679c\u3002\nnebula[basketballplayer]&gt; SHOW STATS;\n+---------+------------+-------+\n| Type    | Name       | Count |\n+---------+------------+-------+\n| \"Tag\"   | \"player\"   | 51    |\n| \"Tag\"   | \"team\"     | 30    |\n| \"Edge\"  | \"follow\"   | 81    |\n| \"Edge\"  | \"serve\"    | 152   |\n| \"Space\" | \"vertices\" | 81    |\n| \"Space\" | \"edges\"    | 233   |\n+---------+------------+-------+\nGot 6 rows\n\n# \u67e5\u770b Tag \u7d22\u5f15\u3002\nnebula[basketballplayer]&gt; SHOW TAG INDEXES;\n+------------------+----------+----------+\n| Index Name       | By Tag   | Columns  |\n+------------------+----------+----------+\n| \"player_index_0\" | \"player\" | []       |\n| \"player_index_1\" | \"player\" | [\"name\"] |\n+------------------+----------+----------+\nGot 2 rows\n\n# ----------------------- CLEAR SPACE \u5206\u5272\u7ebf -----------------------\n# \u6267\u884c CLEAR SPACE \u6e05\u7a7a\u56fe\u7a7a\u95f4 basketballplayer\u3002\nnebula[basketballplayer]&gt; CLEAR SPACE basketballplayer;\nExecution succeeded\n\n# \u66f4\u65b0\u7edf\u8ba1\u4fe1\u606f\u3002\nnebula[basketballplayer]&gt; SUBMIT JOB STATS;\n+------------+\n| New Job Id |\n+------------+\n| 5          |\n+------------+\nGot 1 rows\n\n# \u67e5\u770b\u7edf\u8ba1\u4fe1\u606f\u3002Tag \u548c Edge type \u8fd8\u5b58\u5728\uff0c\u4f46\u6240\u6709\u7684\u70b9\u548c\u8fb9\u90fd\u6ca1\u4e86\u3002\nnebula[basketballplayer]&gt; SHOW STATS;\n+---------+------------+-------+\n| Type    | Name       | Count |\n+---------+------------+-------+\n| \"Tag\"   | \"player\"   | 0     |\n| \"Tag\"   | \"team\"     | 0     |\n| \"Edge\"  | \"follow\"   | 0     |\n| \"Edge\"  | \"serve\"    | 0     |\n| \"Space\" | \"vertices\" | 0     |\n| \"Space\" | \"edges\"    | 0     |\n+---------+------------+-------+\nGot 6 rows\n\n# \u67e5\u770b Tag \u7d22\u5f15\uff0c\u5b83\u4eec\u4f9d\u7136\u5b58\u5728\u3002\nnebula[basketballplayer]&gt; SHOW TAG INDEXES;\n+------------------+----------+----------+\n| Index Name       | By Tag   | Columns  |\n+------------------+----------+----------+\n| \"player_index_0\" | \"player\" | []       |\n| \"player_index_1\" | \"player\" | [\"name\"] |\n+------------------+----------+----------+\nGot 2 rows (time spent 523/978 us)\n</code></pre>"},{"location":"4.deployment-and-installation/1.resource-preparations/","title":"\u51c6\u5907\u7f16\u8bd1\u3001\u5b89\u88c5\u548c\u8fd0\u884c NebulaGraph \u7684\u73af\u5883","text":"<p>\u672c\u6587\u4ecb\u7ecd\u7f16\u8bd1\u3001\u5b89\u88c5 NebulaGraph \u7684\u8981\u6c42\u548c\u5efa\u8bae\uff0c\u4ee5\u53ca\u5982\u4f55\u9884\u4f30\u96c6\u7fa4\u8fd0\u884c\u6240\u9700\u7684\u8d44\u6e90\u3002</p>"},{"location":"4.deployment-and-installation/1.resource-preparations/#_1","title":"\u5173\u4e8e\u5b58\u50a8\u786c\u4ef6","text":"<p>NebulaGraph \u662f\u9488\u5bf9 NVMe SSD \u8fdb\u884c\u8bbe\u8ba1\u548c\u5b9e\u73b0\u7684\uff0c\u6240\u6709\u9ed8\u8ba4\u53c2\u6570\u90fd\u662f\u57fa\u4e8e SSD \u8bbe\u5907\u8fdb\u884c\u8c03\u4f18\uff0c\u8981\u6c42\u6781\u9ad8\u7684 IOPS \u548c\u6781\u4f4e\u7684 Latency\u3002</p> <ul> <li>\u4e0d\u5efa\u8bae\u4f7f\u7528 HDD\uff1b\u56e0\u4e3a\u5176 IOPS \u6027\u80fd\u5dee\uff0c\u968f\u673a\u5bfb\u9053\u5ef6\u8fdf\u9ad8\u3002</li> </ul> <ul> <li>\u4e0d\u8981\u4f7f\u7528\u8fdc\u7aef\u5b58\u50a8\u8bbe\u5907\uff08\u5982 NAS \u6216 SAN\uff09\uff0c\u4e0d\u8981\u5916\u63a5\u57fa\u4e8e HDFS \u6216\u8005 Ceph \u7684\u865a\u62df\u786c\u76d8\u3002</li> </ul> <ul> <li>\u4e0d\u5efa\u8bae\u914d\u7f6e\u72ec\u7acb\u78c1\u76d8\u5197\u4f59\u9635\u5217\uff08RAID\uff09\u3002NebulaGraph\u672c\u8eab\u63d0\u4f9b\u4e86\u591a\u526f\u672c\u673a\u5236\uff0c\u5982\u679c\u914d\u7f6e RAID\uff0c\u4f1a\u9020\u6210\u8d44\u6e90\u6d6a\u8d39\u3002</li> </ul> <ul> <li>\u4f7f\u7528\u672c\u5730 SSD \u8bbe\u5907\uff1b\u6216 AWS Provisioned IOPS SSD \u6216\u7b49\u4ef7\u4e91\u4ea7\u54c1\u3002</li> </ul>"},{"location":"4.deployment-and-installation/1.resource-preparations/#cpu","title":"\u5173\u4e8e CPU \u67b6\u6784","text":"<p>Note</p> <p>\u4ece 3.0.2 \u5f00\u59cb\uff0cNebulaGraph \u5728 Docker Hub \u4e0a\u7684 Docker \u652f\u6301 ARM64 \u67b6\u6784\u3002\u793e\u533a\u7528\u6237\u53ef\u4ee5\u5728 ARM macOS \u7684 Docker Desktop \u4e0a\u6216\u8005 ARM Linux Server \u4e0a\u8fd0\u884c\u5bb9\u5668\u5316\u7684 NebulaGraph \u3002</p>"},{"location":"4.deployment-and-installation/1.resource-preparations/#_2","title":"\u7f16\u8bd1\u6e90\u7801\u8981\u6c42","text":""},{"location":"4.deployment-and-installation/1.resource-preparations/#_3","title":"\u786c\u4ef6\u8981\u6c42","text":"<p>\u5355\u4e2a\u673a\u5668\u7684\u786c\u4ef6\u8981\u6c42\u5982\u4e0b\u3002</p> \u7c7b\u578b \u8981\u6c42 CPU \u67b6\u6784 x86_64 \u5185\u5b58 4 GB \u786c\u76d8 10 GB\uff0cSSD"},{"location":"4.deployment-and-installation/1.resource-preparations/#_4","title":"\u64cd\u4f5c\u7cfb\u7edf\u8981\u6c42","text":"<p>\u5f53\u524d\u4ec5\u652f\u6301\u5728 Linux \u7cfb\u7edf\u4e2d\u7f16\u8bd1 NebulaGraph\uff0c\u5efa\u8bae\u4f7f\u7528\u5185\u6838\u7248\u672c\u4e3a<code>4.15</code>\u53ca\u4ee5\u4e0a\u7248\u672c\u7684 Linux \u7cfb\u7edf\u3002</p> <p>Note</p> <p>\u5728\u5185\u6838\u7248\u672c\u4f4e\u4e8e\u8981\u6c42\u7684 Linux \u7cfb\u7edf\u4e2d\u5b89\u88c5 NebulaGraph \u53ef\u4f7f\u7528 RPM\u3001DEB \u6216\u8005 TAR \u6587\u4ef6\u3002 </p>"},{"location":"4.deployment-and-installation/1.resource-preparations/#_5","title":"\u8f6f\u4ef6\u8981\u6c42","text":"<p>\u8f6f\u4ef6\u7248\u672c\u9700\u8981\u5982\u4e0b\u8868\u6240\u793a\uff0c\u5982\u679c\u7248\u672c\u4e0d\u7b26\u5408\u8981\u6c42\uff0c\u8bf7\u6309\u7167\u5b89\u88c5\u7f16\u8bd1\u6240\u9700\u8f6f\u4ef6\u4e2d\u7684\u6b65\u9aa4\u8fdb\u884c\u64cd\u4f5c\u3002</p> \u8f6f\u4ef6\u540d\u79f0 \u7248\u672c \u5907\u6ce8 glibc 2.17 \u53ca\u4ee5\u4e0a \u6267\u884c\u547d\u4ee4<code>ldd --version</code>\u68c0\u67e5\u7248\u672c\u3002 make \u4efb\u610f\u7a33\u5b9a\u7248\u672c - m4 \u4efb\u610f\u7a33\u5b9a\u7248\u672c - git \u4efb\u610f\u7a33\u5b9a\u7248\u672c - wget \u4efb\u610f\u7a33\u5b9a\u7248\u672c - unzip \u4efb\u610f\u7a33\u5b9a\u7248\u672c - xz \u4efb\u610f\u7a33\u5b9a\u7248\u672c - readline-devel \u4efb\u610f\u7a33\u5b9a\u7248\u672c - ncurses-devel \u4efb\u610f\u7a33\u5b9a\u7248\u672c - zlib-devel \u4efb\u610f\u7a33\u5b9a\u7248\u672c - g++ 8.5.0 \u53ca\u4ee5\u4e0a \u6267\u884c\u547d\u4ee4<code>g++ -v</code>\u68c0\u67e5\u7248\u672c\u3002 cmake 3.14.0 \u53ca\u4ee5\u4e0a \u6267\u884c\u547d\u4ee4<code>cmake --version</code>\u68c0\u67e5\u7248\u672c\u3002 curl \u4efb\u610f\u7a33\u5b9a\u7248\u672c - redhat-lsb-core \u4efb\u610f\u7a33\u5b9a\u7248\u672c - libstdc++-static \u4efb\u610f\u7a33\u5b9a\u7248\u672c \u4ec5\u5728 CentOS 8+\u3001RedHat 8+\u3001Fedora \u4e2d\u9700\u8981\u3002 libasan \u4efb\u610f\u7a33\u5b9a\u7248\u672c \u4ec5\u5728 CentOS 8+\u3001RedHat 8+\u3001Fedora \u4e2d\u9700\u8981\u3002 bzip2 \u4efb\u610f\u7a33\u5b9a\u7248\u672c - <p>\u5176\u4ed6\u7b2c\u4e09\u65b9\u8f6f\u4ef6\u5c06\u5728\u5b89\u88c5\uff08cmake\uff09\u9636\u6bb5\u81ea\u52a8\u4e0b\u8f7d\u5e76\u5b89\u88c5\u5230<code>build</code>\u76ee\u5f55\u4e2d\u3002</p>"},{"location":"4.deployment-and-installation/1.resource-preparations/#_6","title":"\u5b89\u88c5\u7f16\u8bd1\u6240\u9700\u8f6f\u4ef6","text":"<p>\u5982\u679c\u90e8\u5206\u4f9d\u8d56\u8f6f\u4ef6\u7f3a\u5931\u6216\u8005\u7248\u672c\u4e0d\u6ee1\u8db3\u8981\u6c42\uff0c\u6839\u636e\u5982\u4e0b\u6b65\u9aa4\u624b\u52a8\u5b89\u88c5\u3002\u53ef\u6839\u636e\u5b9e\u9645\u60c5\u51b5\u5220\u51cf\u547d\u4ee4\u4e2d\u8981\u5b89\u88c5\u7684\u8f6f\u4ef6\u3001\u8df3\u8fc7\u65e0\u9700\u6267\u884c\u7684\u6b65\u9aa4\u3002</p> <ol> <li> <p>\u5b89\u88c5\u4f9d\u8d56\u5305\u3002</p> <ul> <li> <p>CentOS\u3001RedHat\u3001Fedora \u7528\u6237\u8bf7\u6267\u884c\u5982\u4e0b\u547d\u4ee4\uff1a</p> <pre><code>$ yum update\n$ yum install -y make \\\n                 m4 \\\n                 git \\\n                 wget \\\n                 unzip \\\n                 xz \\\n                 readline-devel \\\n                 ncurses-devel \\\n                 zlib-devel \\\n                 gcc \\\n                 gcc-c++ \\\n                 cmake \\\n                 curl \\\n                 redhat-lsb-core \\\n                 bzip2\n// \u4ec5 CentOS 8+\u3001RedHat 8+\u3001Fedora \u9700\u8981\u5b89\u88c5 libstdc++-static \u548c libasan\u3002\n$ yum install -y libstdc++-static libasan\n</code></pre> </li> </ul> <ul> <li> <p>Debian \u548c Ubuntu \u7528\u6237\u8bf7\u6267\u884c\u5982\u4e0b\u547d\u4ee4\uff1a</p> <pre><code>$ apt-get update\n$ apt-get install -y make \\\n                     m4 \\\n                     git \\\n                     wget \\\n                     unzip \\\n                     xz-utils \\\n                     curl \\\n                     lsb-core \\\n                     build-essential \\\n                     libreadline-dev \\\n                     ncurses-dev \\\n                     cmake \\\n                     bzip2\n</code></pre> </li> </ul> </li> <li> <p>\u68c0\u67e5\u4e3b\u673a\u4e0a\u7684 G++ \u548c CMake \u7248\u672c\u662f\u5426\u6b63\u786e\u3002\u7248\u672c\u4fe1\u606f\u8bf7\u53c2\u89c1\u8f6f\u4ef6\u8981\u6c42\u3002</p> <pre><code>$ g++ --version\n$ cmake --version\n</code></pre> <p>\u5982\u679c\u7248\u672c\u6b63\u786e\uff0c\u5219\u8f6f\u4ef6\u4f9d\u8d56\u5df2\u51c6\u5907\u5b8c\u6bd5\uff0c\u5ffd\u7565\u540e\u7eed\u6b65\u9aa4\uff1b\u5982\u679c\u4e0d\u6b63\u786e\uff0c\u6839\u636e\u4e0d\u7b26\u5408\u7248\u672c\u8981\u6c42\u7684\u8f6f\u4ef6\u6267\u884c\u540e\u7eed\u6b65\u9aa4\u3002</p> </li> <li> <p>\u5982\u679c CMake \u6216 g++ \u7248\u672c\u4e0d\u7b26\u5408\u8981\u6c42\uff0c\u8bbf\u95ee\u5b98\u7f51\u4ee5\u83b7\u53d6\u7b26\u5408\u9700\u8981\u7684\u7248\u672c\u3002</p> </li> </ol>"},{"location":"4.deployment-and-installation/1.resource-preparations/#_7","title":"\u6d4b\u8bd5\u73af\u5883\u8981\u6c42","text":""},{"location":"4.deployment-and-installation/1.resource-preparations/#_8","title":"\u786c\u4ef6\u8981\u6c42","text":"<p>\u5355\u4e2a\u673a\u5668\u7684\u786c\u4ef6\u8981\u6c42\u5982\u4e0b\u3002</p> \u7c7b\u578b \u8981\u6c42 CPU \u67b6\u6784 x86_64 CPU \u6838\u6570 4 \u5185\u5b58 8 GB \u786c\u76d8 100 GB\uff0cSSD"},{"location":"4.deployment-and-installation/1.resource-preparations/#_9","title":"\u64cd\u4f5c\u7cfb\u7edf\u8981\u6c42","text":"<p>\u5f53\u524d\u4ec5\u652f\u6301\u5728 Linux \u7cfb\u7edf\u4e2d\u5b89\u88c5 NebulaGraph\uff0c\u5efa\u8bae\u5728\u6d4b\u8bd5\u73af\u5883\u4e2d\u4f7f\u7528\u5185\u6838\u7248\u672c\u4e3a<code>3.9</code>\u53ca\u4ee5\u4e0a\u7248\u672c\u7684 Linux \u7cfb\u7edf\u3002</p>"},{"location":"4.deployment-and-installation/1.resource-preparations/#_10","title":"\u670d\u52a1\u67b6\u6784\u5efa\u8bae","text":"\u8fdb\u7a0b \u5efa\u8bae\u6570\u91cf metad\uff08meta \u6570\u636e\u670d\u52a1\u8fdb\u7a0b\uff09 1 storaged\uff08\u5b58\u50a8\u670d\u52a1\u8fdb\u7a0b\uff09 \u22651 graphd\uff08\u67e5\u8be2\u5f15\u64ce\u670d\u52a1\u8fdb\u7a0b\uff09 \u22651 <p>\u4f8b\u5982\u5355\u673a\u6d4b\u8bd5\u73af\u5883\uff0c\u7528\u6237\u53ef\u4ee5\u5728\u673a\u5668\u4e0a\u90e8\u7f72 1 \u4e2a metad\u30011 \u4e2a storaged \u548c 1 \u4e2a graphd \u8fdb\u7a0b\u3002</p> <p>\u5bf9\u4e8e\u66f4\u5e38\u89c1\u7684\u6d4b\u8bd5\u73af\u5883\uff0c\u4f8b\u5982\u4e09\u53f0\u673a\u5668\u6784\u6210\u7684\u96c6\u7fa4\uff0c\u7528\u6237\u53ef\u4ee5\u6309\u7167\u5982\u4e0b\u65b9\u6848\u90e8\u7f72 NebulaGraph \u3002</p> \u673a\u5668\u540d\u79f0 metad \u8fdb\u7a0b\u6570\u91cf storaged \u8fdb\u7a0b\u6570\u91cf graphd \u8fdb\u7a0b\u6570\u91cf A 1 1 1 B - 1 1 C - 1 1"},{"location":"4.deployment-and-installation/1.resource-preparations/#_11","title":"\u751f\u4ea7\u73af\u5883\u8fd0\u884c\u8981\u6c42","text":""},{"location":"4.deployment-and-installation/1.resource-preparations/#_12","title":"\u786c\u4ef6\u8981\u6c42","text":"<p>\u5355\u4e2a\u673a\u5668\u7684\u786c\u4ef6\u8981\u6c42\u5982\u4e0b\u3002</p> \u7c7b\u578b \u8981\u6c42 CPU \u67b6\u6784 x86_64 CPU \u6838\u6570 48 \u5185\u5b58 256 GB \u786c\u76d8 2 * 1.6 TB\uff0cNVMe SSD"},{"location":"4.deployment-and-installation/1.resource-preparations/#_13","title":"\u64cd\u4f5c\u7cfb\u7edf\u8981\u6c42","text":"<p>\u5f53\u524d\u4ec5\u652f\u6301\u5728 Linux \u7cfb\u7edf\u4e2d\u5b89\u88c5 NebulaGraph\uff0c\u5efa\u8bae\u5728\u751f\u4ea7\u73af\u5883\u4e2d\u4f7f\u7528\u5185\u6838\u7248\u672c\u4e3a<code>3.9</code>\u53ca\u4ee5\u4e0a\u7248\u672c\u7684 Linux \u7cfb\u7edf\u3002</p> <p>\u7528\u6237\u53ef\u4ee5\u901a\u8fc7\u8c03\u6574\u4e00\u4e9b\u5185\u6838\u53c2\u6570\u6765\u63d0\u9ad8 NebulaGraph \u6027\u80fd\uff0c\u8be6\u60c5\u8bf7\u53c2\u89c1\u5185\u6838\u914d\u7f6e\u3002</p>"},{"location":"4.deployment-and-installation/1.resource-preparations/#_14","title":"\u670d\u52a1\u67b6\u6784\u5efa\u8bae","text":"<p>Danger</p> <p>\u4e0d\u8981\u8de8\u673a\u623f\u90e8\u7f72\u5355\u4e2a\u96c6\u7fa4\uff08\u4f01\u4e1a\u7248\u652f\u6301\u8de8\u673a\u623f\u96c6\u7fa4\u95f4\u540c\u6b65\uff09\u3002</p> \u8fdb\u7a0b \u6570\u91cf metad\uff08meta \u6570\u636e\u670d\u52a1\u8fdb\u7a0b\uff09 3 storaged\uff08\u5b58\u50a8\u670d\u52a1\u8fdb\u7a0b\uff09 \u22653 graphd\uff08\u67e5\u8be2\u5f15\u64ce\u670d\u52a1\u8fdb\u7a0b\uff09 \u22653 <p>\u6709\u4e14\u4ec5\u6709 3 \u4e2a metad \u8fdb\u7a0b\uff0c\u6bcf\u4e2a metad \u8fdb\u7a0b\u4f1a\u81ea\u52a8\u521b\u5efa\u5e76\u7ef4\u62a4 meta \u6570\u636e\u7684\u4e00\u4e2a\u526f\u672c\u3002</p> <p>storaged \u8fdb\u7a0b\u7684\u6570\u91cf\u4e0d\u4f1a\u5f71\u54cd\u56fe\u7a7a\u95f4\u526f\u672c\u7684\u6570\u91cf\u3002</p> <p>\u7528\u6237\u53ef\u4ee5\u5728\u4e00\u53f0\u673a\u5668\u4e0a\u90e8\u7f72\u591a\u4e2a\u4e0d\u540c\u8fdb\u7a0b\uff0c\u4f8b\u5982\u4e94\u53f0\u673a\u5668\u6784\u6210\u7684\u96c6\u7fa4\uff0c\u7528\u6237\u53ef\u4ee5\u6309\u7167\u5982\u4e0b\u65b9\u6848\u90e8\u7f72 NebulaGraph \u3002</p> \u673a\u5668\u540d\u79f0 metad \u8fdb\u7a0b\u6570\u91cf storaged \u8fdb\u7a0b\u6570\u91cf graphd \u8fdb\u7a0b\u6570\u91cf A 1 1 1 B 1 1 1 C 1 1 1 D - 1 1 E - 1 1"},{"location":"4.deployment-and-installation/1.resource-preparations/#nebulagraph_1","title":"NebulaGraph \u8d44\u6e90\u8981\u6c42","text":"<p>\u7528\u6237\u53ef\u4ee5\u9884\u4f30\u4e00\u4e2a 3 \u526f\u672c NebulaGraph \u96c6\u7fa4\u6240\u9700\u7684\u5185\u5b58\u3001\u786c\u76d8\u7a7a\u95f4\u548c\u5206\u533a\u6570\u91cf\u3002</p> \u8d44\u6e90 \u5355\u4f4d \u8ba1\u7b97\u516c\u5f0f \u8bf4\u660e \u786c\u76d8\u7a7a\u95f4 Bytes <code>\u70b9\u548c\u8fb9\u7684\u603b\u6570</code> * <code>\u5c5e\u6027\u7684\u5e73\u5747\u5b57\u8282\u5927\u5c0f</code> * 7.5 * 120% \u7531\u4e8e\u8fb9\u5b58\u5728\u5b58\u50a8\u653e\u5927\u73b0\u8c61\uff0c\u6240\u4ee5\u9700\u8981<code>\u70b9\u548c\u8fb9\u7684\u603b\u6570</code> * <code>\u5c5e\u6027\u7684\u5e73\u5747\u5b57\u8282\u5927\u5c0f</code> * 7.5 \u7684\u7a7a\u95f4\uff0c\u8be6\u60c5\u8bf7\u53c2\u89c1\u5207\u8fb9\u4e0e\u5b58\u50a8\u653e\u5927\u3002 \u5185\u5b58 Bytes [<code>\u70b9\u548c\u8fb9\u7684\u603b\u6570</code> * 16 + <code>RocksDB \u5b9e\u4f8b\u6570\u91cf</code> * (<code>write_buffer_size</code> * <code>max_write_buffer_number</code>) + <code>\u5757\u7f13\u5b58\u5927\u5c0f</code>] * 120% <code>\u70b9\u548c\u8fb9\u7684\u603b\u6570</code> * 16 \u662f BloomFilter \u9700\u8981\u5360\u7528\u7684\u5185\u5b58\u7a7a\u95f4\uff0c<code>write_buffer_size</code>\u548c<code>max_write_buffer_number</code>\u662f RocksDB \u5185\u5b58\u76f8\u5173\u53c2\u6570\uff0c\u8be6\u60c5\u8bf7\u53c2\u89c1 MemTable\u3002\u5757\u7f13\u5b58\u5927\u5c0f\u8bf7\u53c2\u89c1 Memory usage in RocksDB\u3002 \u5206\u533a\u6570\u91cf - <code>\u96c6\u7fa4\u786c\u76d8\u6570\u91cf</code> * <code>disk_partition_num_multiplier</code> <code>disk_partition_num_multiplier</code>\u662f\u4e00\u4e2a\u7528\u4e8e\u8861\u91cf\u786c\u76d8\u6027\u80fd\u7684\u6574\u6570\uff0c\u53d6\u503c\u8303\u56f4 2~20\u3002\u5efa\u8bae\u5728\u8ba1\u7b97 SSD \u786c\u76d8\u7684\u5206\u533a\u6570\u91cf\u65f6\u4f7f\u7528 20 \u505a\u53c2\u6570\u503c\uff0cHDD \u786c\u76d8\u4f7f\u7528 2\u3002 <ul> <li> <p>\u95ee\u9898 1\uff1a\u4e3a\u4ec0\u4e48\u786c\u76d8\u7a7a\u95f4\u7684\u9884\u4f30\u516c\u5f0f\u4e2d\u9700\u8981\u4e58\u4ee5 7.5\uff1f</p> <p>\u7b54\uff1a\u56e0\u4e3a\u6839\u636e\u6d4b\u8bd5\u503c\uff0c\u76f8\u6bd4\u539f\u59cb\u6570\u636e\u6587\u4ef6\uff08csv\uff09\uff0c\u5355\u526f\u672c\u6240\u5360\u7528\u7684\u7a7a\u95f4\u7ea6\u4e3a\u4e4b\u524d\u7684 2.5 \u500d\uff1b\u53e6\u5916\u7d22\u5f15\u4f1a\u53e6\u5916\u5360\u7528\u786c\u76d8\u7a7a\u95f4\uff0c\u6bcf\u4e2a\u88ab\u7d22\u5f15\u7684\u70b9\u6216\u8fb9\u5360\u7528 16 \u5b57\u8282\u7684\u5185\u5b58\uff0c\u7d22\u5f15\u7684\u5360\u7528\u786c\u76d8\u7a7a\u95f4\u53ef\u6309\u7ecf\u9a8c\u4f30\u7b97\u4e3a\uff1a\u88ab\u7d22\u5f15\u7684\u70b9\u6216\u8fb9\u603b\u6570 * 50 \u5b57\u8282\u3002</p> </li> </ul> <ul> <li> <p>\u95ee\u9898 2\uff1a\u4e3a\u4ec0\u4e48\u78c1\u76d8\u7a7a\u95f4\u548c\u5185\u5b58\u90fd\u8981\u4e58\u4ee5 120%\uff1f</p> <p>\u7b54\uff1a\u989d\u5916\u7684 20% \u7528\u4e8e\u7f13\u51b2\u3002</p> </li> </ul> <ul> <li> <p>\u95ee\u9898 3\uff1a\u5982\u4f55\u83b7\u53d6 RocksDB \u5b9e\u4f8b\u6570\u91cf\uff1f</p> <p>\u7b54\uff1a\u5bf9\u4e8e\u793e\u533a\u7248 NebulaGraph\uff0c\u6bcf\u4e2a\u56fe\u7a7a\u95f4\u5bf9\u5e94\u4e00\u4e2a RocksDB \u5b9e\u4f8b\uff0c\u5e76\u4e14<code>--data_path</code>\u9009\u9879\uff08<code>etc</code>\u76ee\u5f55\u4e0b\u7684<code>nebula-storaged.conf</code>\u6587\u4ef6\u4e2d\uff09\u4e2d\u7684\u6bcf\u4e2a\u76ee\u5f55\u5bf9\u5e94\u4e00\u4e2a RocksDB \u5b9e\u4f8b\u3002\u5373\uff0cRocksDB \u5b9e\u4f8b\u6570\u91cf = \u56fe\u7a7a\u95f4\u603b\u6570 * \u76ee\u5f55\u603b\u6570\u3002</p> </li> </ul> <p>Note</p> <p>\u7528\u6237\u53ef\u4ee5\u5728\u914d\u7f6e\u6587\u4ef6<code>nebula-storaged.conf</code>\u4e2d\u6dfb\u52a0<code>--enable_partitioned_index_filter=true</code>\u6765\u964d\u4f4e bloom \u8fc7\u6ee4\u5668\u5360\u7528\u7684\u5185\u5b58\u5927\u5c0f\uff0c\u4f46\u662f\u5728\u67d0\u4e9b\u968f\u673a\u5bfb\u9053\uff08random-seek\uff09\u7684\u60c5\u51b5\u4e0b\uff0c\u53ef\u80fd\u4f1a\u964d\u4f4e\u8bfb\u53d6\u6027\u80fd\u3002</p> <p>Caution</p> <p>\u6bcf\u4e2a RocksDB \u5b9e\u4f8b\u5373\u4f7f\u8fd8\u672a\u5199\u5165\u4efb\u4f55\u6570\u636e\u65f6\uff0c\u4ecd\u4f1a\u5360\u7528 70M \u5de6\u53f3\u7684\u78c1\u76d8\u7a7a\u95f4\u3002\u4e00\u4e2a\u5206\u533a\u5bf9\u5e94\u4e00\u4e2a RocksDB \u5b9e\u4f8b\uff0c\u5f53\u5206\u533a\u8bbe\u7f6e\u7279\u522b\u591a\u65f6\uff0c\u4f8b\u5982 100\uff0c\u56fe\u7a7a\u95f4\u521b\u5efa\u540e\u5373\u5360\u7528\u4e86\u5927\u91cf\u78c1\u76d8\u7a7a\u95f4\u3002</p>"},{"location":"4.deployment-and-installation/4.uninstall-nebula-graph/","title":"\u5378\u8f7d NebulaGraph","text":"<p>\u672c\u6587\u4ecb\u7ecd\u5982\u4f55\u5378\u8f7d NebulaGraph \u3002</p> <p>Caution</p> <p>\u5982\u679c\u9700\u8981\u91cd\u65b0\u90e8\u7f72 NebulaGraph\uff0c\u8bf7\u52a1\u5fc5\u5b8c\u5168\u5378\u8f7d\u540e\u518d\u91cd\u65b0\u90e8\u7f72\uff0c\u5426\u5219\u53ef\u80fd\u4f1a\u51fa\u73b0\u95ee\u9898\uff0c\u5305\u62ec Meta \u4e0d\u4e00\u81f4\u7b49\u3002</p>"},{"location":"4.deployment-and-installation/4.uninstall-nebula-graph/#_1","title":"\u524d\u63d0\u6761\u4ef6","text":"<p>\u505c\u6b62 NebulaGraph \u670d\u52a1\u3002\u8be6\u60c5\u53c2\u89c1\u7ba1\u7406 NebulaGraph \u670d\u52a1\u3002</p>"},{"location":"4.deployment-and-installation/4.uninstall-nebula-graph/#1","title":"\u6b65\u9aa4 1\uff1a\u5220\u9664\u6570\u636e\u548c\u5143\u6570\u636e\u6587\u4ef6","text":"<p>\u5982\u679c\u5728\u914d\u7f6e\u6587\u4ef6\u5185\u4fee\u6539\u4e86\u6570\u636e\u6587\u4ef6\u7684\u8def\u5f84\uff0c\u53ef\u80fd\u4f1a\u5bfc\u81f4\u5b89\u88c5\u8def\u5f84\u548c\u6570\u636e\u6587\u4ef6\u4fdd\u5b58\u8def\u5f84\u4e0d\u4e00\u81f4\uff0c\u56e0\u6b64\u9700\u8981\u67e5\u770b\u914d\u7f6e\u6587\u4ef6\uff0c\u786e\u8ba4\u6570\u636e\u6587\u4ef6\u4fdd\u5b58\u8def\u5f84\uff0c\u7136\u540e\u624b\u52a8\u5220\u9664\u6570\u636e\u6587\u4ef6\u76ee\u5f55\u3002</p> <p>Note</p> <p>\u5982\u679c\u662f\u96c6\u7fa4\u67b6\u6784\uff0c\u9700\u8981\u5220\u9664\u6240\u6709 Storage \u548c Meta \u670d\u52a1\u8282\u70b9\u7684\u6570\u636e\u6587\u4ef6\u3002</p> <ol> <li> <p>\u68c0\u67e5 Storage \u670d\u52a1\u7684 disk \u914d\u7f6e\u3002\u4f8b\u5982\uff1a</p> <pre><code>########## Disk ##########\n# Root data path. Split by comma. e.g. --data_path=/disk1/path1/,/disk2/path2/\n# One path per Rocksdb instance.\n--data_path=/nebula/data/storage\n</code></pre> </li> <li> <p>\u68c0\u67e5 metad \u670d\u52a1\u7684\u914d\u7f6e\u6587\u4ef6\uff0c\u627e\u5230\u5bf9\u5e94\u5143\u6570\u636e\u76ee\u5f55\u3002</p> </li> <li> <p>\u5220\u9664\u4ee5\u4e0a\u6570\u636e\u548c\u5143\u6570\u636e\u76ee\u5f55\u3002</p> </li> </ol>"},{"location":"4.deployment-and-installation/4.uninstall-nebula-graph/#2","title":"\u6b65\u9aa4 2\uff1a\u5378\u8f7d\u5b89\u88c5\u76ee\u5f55","text":"<p>Note</p> <p>\u5220\u9664\u6574\u4e2a\u5b89\u88c5\u76ee\u5f55\uff0c\u5305\u62ec<code>cluster.id</code>\u6587\u4ef6\u3002</p> <p>\u5b89\u88c5\u8def\u5f84\u4e3a\u53c2\u6570<code>--prefix</code>\u6307\u5b9a\u7684\u8def\u5f84\u3002\u9ed8\u8ba4\u8def\u5f84\u4e3a<code>/usr/local/nebula</code>\u3002</p>"},{"location":"4.deployment-and-installation/4.uninstall-nebula-graph/#nebulagraph_1","title":"\u5378\u8f7d\u7f16\u8bd1\u5b89\u88c5\u7684 NebulaGraph","text":"<p>\u627e\u5230 NebulaGraph \u7684\u5b89\u88c5\u76ee\u5f55\uff0c\u5220\u9664\u6574\u4e2a\u5b89\u88c5\u76ee\u5f55\u3002</p>"},{"location":"4.deployment-and-installation/4.uninstall-nebula-graph/#rpm_nebulagraph","title":"\u5378\u8f7d RPM \u5305\u5b89\u88c5\u7684 NebulaGraph","text":"<ol> <li> <p>\u4f7f\u7528\u5982\u4e0b\u547d\u4ee4\u67e5\u770b NebulaGraph \u7248\u672c\u3002</p> <pre><code>$ rpm -qa | grep \"nebula\"\n</code></pre> <p>\u8fd4\u56de\u7c7b\u4f3c\u5982\u4e0b\u7ed3\u679c\u3002</p> <pre><code>nebula-graph-master-1.x86_64\n</code></pre> </li> <li> <p>\u4f7f\u7528\u5982\u4e0b\u547d\u4ee4\u5378\u8f7d NebulaGraph \u3002</p> <pre><code>sudo rpm -e &lt;nebula_version&gt;\n</code></pre> <p>\u4f8b\u5982\uff1a</p> <pre><code>sudo rpm -e nebula-graph-master-1.x86_64\n</code></pre> </li> <li> <p>\u5220\u9664\u5b89\u88c5\u76ee\u5f55\u3002</p> </li> </ol>"},{"location":"4.deployment-and-installation/4.uninstall-nebula-graph/#deb_nebulagraph","title":"\u5378\u8f7d DEB \u5305\u5b89\u88c5\u7684 NebulaGraph","text":"<ol> <li> <p>\u4f7f\u7528\u5982\u4e0b\u547d\u4ee4\u67e5\u770b NebulaGraph \u7248\u672c\u3002</p> <pre><code>$ dpkg -l | grep \"nebula\"\n</code></pre> <p>\u8fd4\u56de\u7c7b\u4f3c\u5982\u4e0b\u7ed3\u679c\u3002</p> <pre><code>ii  nebula-graph  master  amd64     NebulaGraph Package built using CMake\n</code></pre> </li> <li> <p>\u4f7f\u7528\u5982\u4e0b\u547d\u4ee4\u5378\u8f7d NebulaGraph \u3002</p> <pre><code>sudo dpkg -r &lt;nebula_version&gt;\n</code></pre> <p>\u4f8b\u5982\uff1a</p> <pre><code>sudo dpkg -r nebula-graph\n</code></pre> </li> <li> <p>\u5220\u9664\u5b89\u88c5\u76ee\u5f55\u3002</p> </li> </ol>"},{"location":"4.deployment-and-installation/4.uninstall-nebula-graph/#docker_compose_nebulagraph","title":"\u5378\u8f7d Docker Compose \u90e8\u7f72\u7684 NebulaGraph","text":"<ol> <li> <p>\u5728\u76ee\u5f55<code>nebula-docker-compose</code>\u5185\u6267\u884c\u5982\u4e0b\u547d\u4ee4\u505c\u6b62 NebulaGraph \u670d\u52a1\u3002</p> <pre><code>docker-compose down -v\n</code></pre> </li> <li> <p>\u5220\u9664\u76ee\u5f55<code>nebula-docker-compose</code>\u3002</p> </li> </ol>"},{"location":"4.deployment-and-installation/connect-to-nebula-graph/","title":"\u8fde\u63a5 NebulaGraph \u670d\u52a1","text":"<p>\u672c\u6587\u4ecb\u7ecd\u5982\u4f55\u4f7f\u7528\u539f\u751f\u547d\u4ee4\u884c\u5ba2\u6237\u7aef NebulaGraph Console \u8fde\u63a5 NebulaGraph \u3002</p> <p>Caution</p> <p>\u9996\u6b21\u8fde\u63a5\u5230 NebulaGraph \u540e\uff0c\u5fc5\u987b\u5148\u6ce8\u518c Storage \u670d\u52a1\uff0c\u624d\u80fd\u6b63\u5e38\u67e5\u8be2\u6570\u636e\u3002</p> <p>NebulaGraph \u652f\u6301\u591a\u79cd\u7c7b\u578b\u7684\u5ba2\u6237\u7aef\uff0c\u5305\u62ec\u547d\u4ee4\u884c\u5ba2\u6237\u7aef\u3001\u53ef\u89c6\u5316\u754c\u9762\u5ba2\u6237\u7aef\u548c\u6d41\u884c\u7f16\u7a0b\u8bed\u8a00\u5ba2\u6237\u7aef\u3002\u8be6\u60c5\u53c2\u89c1\u5ba2\u6237\u7aef\u5217\u8868\u3002</p>"},{"location":"4.deployment-and-installation/connect-to-nebula-graph/#_1","title":"\u524d\u63d0\u6761\u4ef6","text":"<ul> <li>NebulaGraph \u670d\u52a1\u5df2\u542f\u52a8\u3002</li> </ul> <ul> <li>\u8fd0\u884c NebulaGraph Console \u7684\u673a\u5668\u548c\u8fd0\u884c NebulaGraph \u7684\u670d\u52a1\u5668\u7f51\u7edc\u4e92\u901a\u3002</li> </ul> <ul> <li> <p>NebulaGraph Console \u7684\u7248\u672c\u517c\u5bb9 NebulaGraph \u7684\u7248\u672c\u3002</p> <p>Note</p> <p>\u7248\u672c\u76f8\u540c\u7684 NebulaGraph Console \u548c NebulaGraph \u517c\u5bb9\u7a0b\u5ea6\u6700\u9ad8\uff0c\u7248\u672c\u4e0d\u540c\u7684 NebulaGraph Console \u8fde\u63a5 NebulaGraph \u65f6\uff0c\u53ef\u80fd\u4f1a\u6709\u517c\u5bb9\u95ee\u9898\uff0c\u6216\u8005\u65e0\u6cd5\u8fde\u63a5\u5e76\u62a5\u9519<code>incompatible version between client and server</code>\u3002</p> </li> </ul>"},{"location":"4.deployment-and-installation/connect-to-nebula-graph/#_2","title":"\u64cd\u4f5c\u6b65\u9aa4","text":"<ol> <li> <p>\u5728 NebulaGraph Console \u4e0b\u8f7d\u9875\u9762\uff0c\u786e\u8ba4\u9700\u8981\u7684\u7248\u672c\uff0c\u5355\u51fb Assets\u3002</p> <p>Note</p> <p>\u5efa\u8bae\u9009\u62e9\u6700\u65b0\u7248\u672c\u3002</p> </li> <li> <p>\u5728 Assets \u533a\u57df\u627e\u5230\u673a\u5668\u8fd0\u884c\u6240\u9700\u7684\u4e8c\u8fdb\u5236\u6587\u4ef6\uff0c\u4e0b\u8f7d\u6587\u4ef6\u5230\u673a\u5668\u4e0a\u3002</p> </li> <li> <p>\uff08\u53ef\u9009\uff09\u4e3a\u65b9\u4fbf\u4f7f\u7528\uff0c\u91cd\u547d\u540d\u6587\u4ef6\u4e3a<code>nebula-console</code>\u3002</p> <p>Note</p> <p>\u5728 Windows \u7cfb\u7edf\u4e2d\uff0c\u8bf7\u91cd\u547d\u540d\u4e3a<code>nebula-console.exe</code>\u3002</p> </li> <li> <p>\u5728\u8fd0\u884c NebulaGraph Console \u7684\u673a\u5668\u4e0a\u6267\u884c\u5982\u4e0b\u547d\u4ee4\uff0c\u4e3a\u7528\u6237\u6388\u4e88 nebula-console \u6587\u4ef6\u7684\u6267\u884c\u6743\u9650\u3002</p> <p>Note</p> <p>Windows \u7cfb\u7edf\u8bf7\u8df3\u8fc7\u6b64\u6b65\u9aa4\u3002</p> <pre><code>$ chmod 111 nebula-console\n</code></pre> </li> <li> <p>\u5728\u547d\u4ee4\u884c\u754c\u9762\u4e2d\uff0c\u5207\u6362\u5de5\u4f5c\u76ee\u5f55\u81f3 nebula-console \u6587\u4ef6\u6240\u5728\u76ee\u5f55\u3002</p> </li> <li> <p>\u6267\u884c\u5982\u4e0b\u547d\u4ee4\u8fde\u63a5 NebulaGraph \u3002</p> <ul> <li> <p>Linux \u6216 macOS</p> <pre><code>$ ./nebula-console -addr &lt;ip&gt; -port &lt;port&gt; -u &lt;username&gt; -p &lt;password&gt;\n  [-t 120] [-e \"nGQL_statement\" | -f filename.nGQL]\n</code></pre> </li> </ul> <ul> <li> <p>Windows</p> <pre><code>&gt; nebula-console.exe -addr &lt;ip&gt; -port &lt;port&gt; -u &lt;username&gt; -p &lt;password&gt;\n  [-t 120] [-e \"nGQL_statement\" | -f filename.nGQL]\n</code></pre> </li> </ul> <p>\u53c2\u6570\u8bf4\u660e\u5982\u4e0b\u3002</p> \u53c2\u6570 \u8bf4\u660e <code>-h/-help</code> \u663e\u793a\u5e2e\u52a9\u83dc\u5355\u3002 <code>-addr/-address</code> \u8bbe\u7f6e\u8981\u8fde\u63a5\u7684 Graph \u670d\u52a1\u7684 IP \u6216\u4e3b\u673a\u540d\u3002\u9ed8\u8ba4\u5730\u5740\u4e3a 127.0.0.1\u3002 <code>-P/-port</code> \u8bbe\u7f6e\u8981\u8fde\u63a5\u7684 Graph \u670d\u52a1\u7684\u7aef\u53e3\u3002\u9ed8\u8ba4\u7aef\u53e3\u4e3a 9669\u3002 <code>-u/-user</code> \u8bbe\u7f6e NebulaGraph \u8d26\u53f7\u7684\u7528\u6237\u540d\u3002\u672a\u542f\u7528\u8eab\u4efd\u8ba4\u8bc1\u65f6\uff0c\u53ef\u4ee5\u4f7f\u7528\u4efb\u610f\u5df2\u5b58\u5728\u7684\u7528\u6237\u540d\uff08\u9ed8\u8ba4\u4e3a<code>root</code>\uff09\u3002 <code>-p/-password</code> \u8bbe\u7f6e\u7528\u6237\u540d\u5bf9\u5e94\u7684\u5bc6\u7801\u3002\u672a\u542f\u7528\u8eab\u4efd\u8ba4\u8bc1\u65f6\uff0c\u5bc6\u7801\u53ef\u4ee5\u586b\u5199\u4efb\u610f\u5b57\u7b26\u3002 <code>-t/-timeout</code> \u8bbe\u7f6e\u6574\u6570\u7c7b\u578b\u7684\u8fde\u63a5\u8d85\u65f6\u65f6\u95f4\u3002\u5355\u4f4d\u4e3a\u6beb\u79d2\uff0c\u9ed8\u8ba4\u503c\u4e3a 120\u3002 <code>-e/-eval</code> \u8bbe\u7f6e\u5b57\u7b26\u4e32\u7c7b\u578b\u7684 nGQL \u8bed\u53e5\u3002\u8fde\u63a5\u6210\u529f\u540e\u4f1a\u6267\u884c\u4e00\u6b21\u8be5\u8bed\u53e5\u5e76\u8fd4\u56de\u7ed3\u679c\uff0c\u7136\u540e\u81ea\u52a8\u65ad\u5f00\u8fde\u63a5\u3002 <code>-f/-file</code> \u8bbe\u7f6e\u5b58\u50a8 nGQL \u8bed\u53e5\u7684\u6587\u4ef6\u7684\u8def\u5f84\u3002\u8fde\u63a5\u6210\u529f\u540e\u4f1a\u6267\u884c\u8be5\u6587\u4ef6\u5185\u7684 nGQL \u8bed\u53e5\u5e76\u8fd4\u56de\u7ed3\u679c\uff0c\u6267\u884c\u5b8c\u6bd5\u540e\u81ea\u52a8\u65ad\u5f00\u8fde\u63a5\u3002 <code>-enable_ssl</code> \u8fde\u63a5 NebulaGraph \u65f6\u4f7f\u7528 SSL \u52a0\u5bc6\u3002 <code>-ssl_root_ca_path</code> \u6307\u5b9a CA \u8bc1\u4e66\u7684\u5b58\u50a8\u8def\u5f84\u3002 <code>-ssl_cert_path</code> \u6307\u5b9a CRT \u8bc1\u4e66\u7684\u5b58\u50a8\u8def\u5f84\u3002 <code>-ssl_private_key_path</code> \u6307\u5b9a\u79c1\u94a5\u6587\u4ef6\u7684\u5b58\u50a8\u8def\u5f84\u3002 <p>\u66f4\u591a\u53c2\u6570\u53c2\u89c1\u9879\u76ee\u4ed3\u5e93\u3002</p> </li> </ol>"},{"location":"4.deployment-and-installation/manage-service/","title":"\u7ba1\u7406 NebulaGraph \u670d\u52a1","text":"<p>NebulaGraph \u652f\u6301\u901a\u8fc7\u811a\u672c\u7ba1\u7406\u670d\u52a1\u3002</p>"},{"location":"4.deployment-and-installation/manage-service/#_1","title":"\u4f7f\u7528\u811a\u672c\u7ba1\u7406\u670d\u52a1","text":"<p>\u4f7f\u7528\u811a\u672c<code>nebula.service</code>\u7ba1\u7406\u670d\u52a1\uff0c\u5305\u62ec\u542f\u52a8\u3001\u505c\u6b62\u3001\u91cd\u542f\u3001\u4e2d\u6b62\u548c\u67e5\u770b\u3002</p> <p>Note</p> <p><code>nebula.service</code>\u7684\u9ed8\u8ba4\u8def\u5f84\u662f<code>/usr/local/nebula/scripts</code>\uff0c\u5982\u679c\u4fee\u6539\u8fc7\u5b89\u88c5\u8def\u5f84\uff0c\u8bf7\u4f7f\u7528\u5b9e\u9645\u8def\u5f84\u3002</p>"},{"location":"4.deployment-and-installation/manage-service/#_2","title":"\u8bed\u6cd5","text":"<pre><code>$ sudo /usr/local/nebula/scripts/nebula.service\n[-v] [-c &lt;config_file_path&gt;]\n&lt;start | stop | restart | kill | status&gt;\n&lt;metad | graphd | storaged | all&gt;\n</code></pre> \u53c2\u6570 \u8bf4\u660e <code>-v</code> \u663e\u793a\u8be6\u7ec6\u8c03\u8bd5\u4fe1\u606f\u3002 <code>-c</code> \u6307\u5b9a\u914d\u7f6e\u6587\u4ef6\u8def\u5f84\uff0c\u9ed8\u8ba4\u8def\u5f84\u4e3a<code>/usr/local/nebula/etc/</code>\u3002 <code>start</code> \u542f\u52a8\u670d\u52a1\u3002 <code>stop</code> \u505c\u6b62\u670d\u52a1\u3002 <code>restart</code> \u91cd\u542f\u670d\u52a1\u3002 <code>kill</code> \u4e2d\u6b62\u670d\u52a1\u3002 <code>status</code> \u67e5\u770b\u670d\u52a1\u72b6\u6001\u3002 <code>metad</code> \u7ba1\u7406 Meta \u670d\u52a1\u3002 <code>graphd</code> \u7ba1\u7406 Graph \u670d\u52a1\u3002 <code>storaged</code> \u7ba1\u7406 Storage \u670d\u52a1\u3002 <code>all</code> \u7ba1\u7406\u6240\u6709\u670d\u52a1\u3002"},{"location":"4.deployment-and-installation/manage-service/#nebulagraph_1","title":"\u542f\u52a8 NebulaGraph \u670d\u52a1","text":"<p>\u6267\u884c\u5982\u4e0b\u547d\u4ee4\u542f\u52a8\u670d\u52a1\uff1a</p> <pre><code>$ sudo /usr/local/nebula/scripts/nebula.service start all\n[INFO] Starting nebula-metad...\n[INFO] Done\n[INFO] Starting nebula-graphd...\n[INFO] Done\n[INFO] Starting nebula-storaged...\n[INFO] Done\n</code></pre>"},{"location":"4.deployment-and-installation/manage-service/#nebulagraph_2","title":"\u505c\u6b62 NebulaGraph \u670d\u52a1","text":"<p>Danger</p> <p>\u8bf7\u52ff\u4f7f\u7528<code>kill -9</code> \u547d\u4ee4\u5f3a\u5236\u7ec8\u6b62\u8fdb\u7a0b\uff0c\u5426\u5219\u53ef\u80fd\u8f83\u5c0f\u6982\u7387\u51fa\u73b0\u6570\u636e\u4e22\u5931\u3002</p> <p>\u6267\u884c\u5982\u4e0b\u547d\u4ee4\u505c\u6b62 NebulaGraph \u670d\u52a1\uff1a</p> <pre><code>$ sudo /usr/local/nebula/scripts/nebula.service stop all\n[INFO] Stopping nebula-metad...\n[INFO] Done\n[INFO] Stopping nebula-graphd...\n[INFO] Done\n[INFO] Stopping nebula-storaged...\n[INFO] Done\n</code></pre>"},{"location":"4.deployment-and-installation/manage-service/#nebulagraph_3","title":"\u67e5\u770b NebulaGraph \u670d\u52a1","text":"<p>\u6267\u884c\u5982\u4e0b\u547d\u4ee4\u67e5\u770b NebulaGraph \u670d\u52a1\u72b6\u6001\uff1a</p> <pre><code>$ sudo /usr/local/nebula/scripts/nebula.service status all\n</code></pre> <ul> <li> <p>\u5982\u679c\u8fd4\u56de\u5982\u4e0b\u7ed3\u679c\uff0c\u8868\u793a NebulaGraph \u670d\u52a1\u6b63\u5e38\u8fd0\u884c\u3002</p> <pre><code>[INFO] nebula-metad(33fd35e): Running as 29020, Listening on 9559\n[INFO] nebula-graphd(33fd35e): Running as 29095, Listening on 9669\n[WARN] nebula-storaged after v3.0.0 will not start service until it is added to cluster.\n[WARN] See Manage Storage hosts:ADD HOSTS in https://docs.nebula-graph.io/\n[INFO] nebula-storaged(33fd35e): Running as 29147, Listening on 9779\n</code></pre> <p>Note</p> <p>\u6b63\u5e38\u542f\u52a8 NebulaGraph \u540e\uff0c<code>nebula-storaged</code>\u8fdb\u7a0b\u7684\u7aef\u53e3\u663e\u793a\u7ea2\u8272\u3002\u8fd9\u662f\u56e0\u4e3a<code>nebula-storaged</code>\u5728\u542f\u52a8\u6d41\u7a0b\u4e2d\u4f1a\u7b49\u5f85<code>nebula-metad</code>\u6dfb\u52a0\u5f53\u524d Storage \u670d\u52a1\uff0c\u5f53\u524d Storage \u670d\u52a1\u6536\u5230 Ready \u4fe1\u53f7\u540e\u624d\u4f1a\u6b63\u5f0f\u542f\u52a8\u670d\u52a1\u3002\u4ece 3.0.0 \u7248\u672c\u5f00\u59cb\uff0c\u5728\u914d\u7f6e\u6587\u4ef6\u4e2d\u6dfb\u52a0\u7684 Storage \u8282\u70b9\u65e0\u6cd5\u76f4\u63a5\u8bfb\u5199\uff0c\u914d\u7f6e\u6587\u4ef6\u7684\u4f5c\u7528\u4ec5\u4ec5\u662f\u5c06 Storage \u8282\u70b9\u6ce8\u518c\u81f3 Meta \u670d\u52a1\u4e2d\u3002\u5fc5\u987b\u4f7f\u7528<code>ADD HOSTS</code>\u547d\u4ee4\u540e\uff0c\u624d\u80fd\u6b63\u5e38\u8bfb\u5199 Storage \u8282\u70b9\u3002\u66f4\u591a\u4fe1\u606f\uff0c\u53c2\u89c1\u7ba1\u7406 Storage \u4e3b\u673a\u3002</p> </li> </ul> <ul> <li>\u5982\u679c\u8fd4\u56de\u7c7b\u4f3c\u5982\u4e0b\u7ed3\u679c\uff0c\u8868\u793a NebulaGraph \u670d\u52a1\u5f02\u5e38\uff0c\u53ef\u4ee5\u6839\u636e\u5f02\u5e38\u670d\u52a1\u4fe1\u606f\u8fdb\u4e00\u6b65\u6392\u67e5\uff0c\u6216\u8005\u5728 NebulaGraph \u793e\u533a\u5bfb\u6c42\u5e2e\u52a9\u3002<pre><code>[INFO] nebula-metad: Running as 25600, Listening on 9559\n[INFO] nebula-graphd: Exited\n[INFO] nebula-storaged: Running as 25646, Listening on 9779\n</code></pre> </li> </ul> <p>NebulaGraph \u670d\u52a1\u7531 Meta \u670d\u52a1\u3001Graph \u670d\u52a1\u548c Storage \u670d\u52a1\u5171\u540c\u63d0\u4f9b\uff0c\u8fd9\u4e09\u79cd\u670d\u52a1\u7684\u914d\u7f6e\u6587\u4ef6\u90fd\u4fdd\u5b58\u5728\u5b89\u88c5\u76ee\u5f55\u7684<code>etc</code>\u76ee\u5f55\u5185\uff0c\u9ed8\u8ba4\u8def\u5f84\u4e3a<code>/usr/local/nebula/etc/</code>\uff0c\u7528\u6237\u53ef\u4ee5\u68c0\u67e5\u76f8\u5e94\u7684\u914d\u7f6e\u6587\u4ef6\u6392\u67e5\u95ee\u9898\u3002</p>"},{"location":"4.deployment-and-installation/manage-service/#_3","title":"\u4e0b\u4e00\u6b65","text":"<ul> <li>\u8fde\u63a5 NebulaGraph </li> </ul>"},{"location":"4.deployment-and-installation/manage-storage-host/","title":"\u7ba1\u7406 Storage \u4e3b\u673a","text":"<p>\u4ece 3.0.0 \u7248\u672c\u5f00\u59cb\uff0c\u5728\u914d\u7f6e\u6587\u4ef6\u4e2d\u6dfb\u52a0\u7684 Storage \u4e3b\u673a\u65e0\u6cd5\u76f4\u63a5\u8bfb\u5199\uff0c\u914d\u7f6e\u6587\u4ef6\u7684\u4f5c\u7528\u4ec5\u4ec5\u662f\u5c06 Storage \u4e3b\u673a\u6ce8\u518c\u81f3 Meta \u670d\u52a1\u4e2d\u3002\u5fc5\u987b\u4f7f\u7528<code>ADD HOSTS</code>\u547d\u4ee4\u540e\uff0c\u624d\u80fd\u6b63\u5e38\u8bfb\u5199 Storage \u4e3b\u673a\u3002</p>"},{"location":"4.deployment-and-installation/manage-storage-host/#_1","title":"\u524d\u63d0\u6761\u4ef6","text":"<ul> <li>\u5df2\u7ecf\u8fde\u63a5\u670d\u52a1</li> </ul>"},{"location":"4.deployment-and-installation/manage-storage-host/#storage_1","title":"\u589e\u52a0 Storage \u4e3b\u673a","text":"<p>\u5411\u96c6\u7fa4\u4e2d\u589e\u52a0 Storage \u4e3b\u673a\u3002</p> <pre><code>nebula&gt; ADD HOSTS &lt;ip&gt;:&lt;port&gt; [,&lt;ip&gt;:&lt;port&gt; ...];\nnebula&gt; ADD HOSTS \"&lt;hostname&gt;\":&lt;port&gt; [,\"&lt;hostname&gt;\":&lt;port&gt; ...];\n</code></pre> <p>Note</p> <ul> <li>\u589e\u52a0 Storage \u4e3b\u673a\u5728\u4e0b\u4e00\u4e2a\u5fc3\u8df3\u5468\u671f\u4e4b\u540e\u624d\u80fd\u751f\u6548\uff0c\u4e3a\u786e\u4fdd\u6570\u636e\u540c\u6b65\uff0c\u8bf7\u7b49\u5f85 2 \u4e2a\u5fc3\u8df3\u5468\u671f\uff0820 \u79d2\uff09\uff0c\u7136\u540e\u6267\u884c<code>SHOW HOSTS</code>\u67e5\u770b\u662f\u5426\u5728\u7ebf\u3002</li> </ul> <ul> <li>IP\u5730\u5740\u548c\u7aef\u53e3\u8bf7\u548c\u914d\u7f6e\u6587\u4ef6\u4e2d\u7684\u8bbe\u7f6e\u4fdd\u6301\u4e00\u81f4\uff0c\u4f8b\u5982\u5355\u673a\u90e8\u7f72\u7684\u9ed8\u8ba4\u4e3a<code>127.0.0.1:9779</code>\u3002</li> </ul> <ul> <li>\u4f7f\u7528\u57df\u540d\u65f6\uff0c\u9700\u8981\u7528\u5f15\u53f7\u5305\u88f9\uff0c\u4f8b\u5982<code>ADD HOSTS \"foo-bar\":9779</code>\u3002</li> </ul> <ul> <li>\u786e\u4fdd\u65b0\u589e\u7684 Storage \u4e3b\u673a\u6ca1\u6709\u88ab\u5176\u4ed6\u96c6\u7fa4\u4f7f\u7528\u8fc7\uff0c\u5426\u5219\u4f1a\u5bfc\u81f4\u6dfb\u52a0 Storage \u8282\u70b9\u5931\u8d25\u3002</li> </ul>"},{"location":"4.deployment-and-installation/manage-storage-host/#storage_2","title":"\u5220\u9664 Storage \u4e3b\u673a","text":"<p>\u4ece\u96c6\u7fa4\u4e2d\u5220\u9664 Storage \u4e3b\u673a\u3002</p> <p>Note</p> <p>\u65e0\u6cd5\u76f4\u63a5\u5220\u9664\u6b63\u5728\u4f7f\u7528\u7684 Storage \u4e3b\u673a\uff0c\u9700\u8981\u5148\u5220\u9664\u5173\u8054\u7684\u56fe\u7a7a\u95f4\uff0c\u624d\u80fd\u5220\u9664 Storage \u4e3b\u673a\u3002</p> <pre><code>nebula&gt; DROP HOSTS &lt;ip&gt;:&lt;port&gt; [,&lt;ip&gt;:&lt;port&gt; ...];\nnebula&gt; DROP HOSTS \"&lt;hostname&gt;\":&lt;port&gt; [,\"&lt;hostname&gt;\":&lt;port&gt; ...];\n</code></pre>"},{"location":"4.deployment-and-installation/manage-storage-host/#storage_3","title":"\u67e5\u770b Storage \u4e3b\u673a","text":"<p>\u67e5\u770b\u96c6\u7fa4\u4e2d\u7684 Storage \u4e3b\u673a\u3002</p> <pre><code>nebula&gt; SHOW HOSTS STORAGE;\n+-------------+------+----------+-----------+--------------+---------+\n| Host        | Port | Status   | Role      | Git Info Sha | Version |\n+-------------+------+----------+-----------+--------------+---------+\n| \"storaged0\" | 9779 | \"ONLINE\" | \"STORAGE\" | \"3ba41bd\"    | \"master\" |\n| \"storaged1\" | 9779 | \"ONLINE\" | \"STORAGE\" | \"3ba41bd\"    | \"master\" |\n| \"storaged2\" | 9779 | \"ONLINE\" | \"STORAGE\" | \"3ba41bd\"    | \"master\" |\n+-------------+------+----------+-----------+--------------+---------+\n</code></pre>"},{"location":"4.deployment-and-installation/standalone-deployment/","title":"\u5b58\u7b97\u5408\u5e76\u7248 NebulaGraph","text":"<p>\u5b58\u7b97\u5408\u5e76\u7248 NebulaGraph \u5c06\u5b58\u50a8\u670d\u52a1\uff08Meta \u548c Storage\uff09\u548c\u8ba1\u7b97\u670d\u52a1\uff08Graph\uff09\u5408\u5e76\u81f3\u4e00\u4e2a\u8fdb\u7a0b\uff0c\u7528\u4e8e\u90e8\u7f72\u5728\u5355\u53f0\u673a\u5668\u4e0a\u3002\u672c\u6587\u4ecb\u7ecd\u5b58\u7b97\u5408\u5e76\u7248 NebulaGraph \u7684\u4f7f\u7528\u573a\u666f\u3001\u5b89\u88c5\u6b65\u9aa4\u7b49\u3002</p> <p>Danger</p> <p>\u5b58\u7b97\u5408\u5e76\u7248 NebulaGraph \u4e0d\u7528\u4e8e\u751f\u4ea7\u73af\u5883\u3002</p>"},{"location":"4.deployment-and-installation/standalone-deployment/#_1","title":"\u80cc\u666f\u4fe1\u606f","text":"<p>\u4f20\u7edf\u7684 NebulaGraph \u67b6\u6784\u7531 3 \u4e2a\u670d\u52a1\u6784\u6210\uff0c\u6bcf\u4e2a\u670d\u52a1\u90fd\u6709\u53ef\u6267\u884c\u7684\u4e8c\u8fdb\u5236\u6587\u4ef6\u548c\u5bf9\u5e94\u7684\u8fdb\u7a0b\uff0c\u8fdb\u7a0b\u4e4b\u95f4\u901a\u8fc7 RPC \u534f\u8bae\u8fdb\u884c\u8c03\u7528\u3002\u800c\u5728\u5b58\u7b97\u5408\u5e76\u7248 NebulaGraph \u4e2d\uff0cNebulaGraph \u4e2d 3 \u4e2a\u670d\u52a1\u5bf9\u5e94\u7684 3 \u4e2a\u8fdb\u7a0b\u88ab\u5408\u4e3a 1 \u4e2a\u8fdb\u7a0b\u3002</p> <p>\u5173\u4e8e NebulaGraph \u7684\u66f4\u591a\u4fe1\u606f\uff0c\u53c2\u89c1\u67b6\u6784\u603b\u89c8\u3002</p>"},{"location":"4.deployment-and-installation/standalone-deployment/#_2","title":"\u4f7f\u7528\u573a\u666f","text":"<p>\u6570\u636e\u89c4\u6a21\u5c0f\uff0c\u53ef\u7528\u6027\u9700\u6c42\u4e0d\u5927\u7684\u573a\u666f\u3002\u4f8b\u5982\uff0c\u53d7\u9650\u4e8e\u673a\u5668\u6570\u91cf\u7684\u6d4b\u8bd5\u73af\u5883\u6216\u8005\u4ec5\u7528\u4e8e\u9a8c\u8bc1\u529f\u80fd\u7684\u573a\u666f\u3002</p>"},{"location":"4.deployment-and-installation/standalone-deployment/#_3","title":"\u4f7f\u7528\u9650\u5236","text":"<ul> <li>\u4ec5\u652f\u6301\u5355\u526f\u672c\u670d\u52a1\u3002</li> <li>\u4e0d\u652f\u6301\u9ad8\u53ef\u7528\u548c\u53ef\u9760\u6027\u3002</li> </ul>"},{"location":"4.deployment-and-installation/standalone-deployment/#_4","title":"\u73af\u5883\u51c6\u5907","text":"<p>\u5173\u4e8e\u5b89\u88c5\u5b58\u7b97\u5408\u5e76\u7248 NebulaGraph \u6240\u9700\u7684\u73af\u5883\uff0c\u53c2\u89c1\u7f16\u8bd1 NebulaGraph \u6e90\u7801\u8981\u6c42\u3002</p>"},{"location":"4.deployment-and-installation/standalone-deployment/#_5","title":"\u5b89\u88c5\u6b65\u9aa4","text":"<p>\u76ee\u524d\u4ec5\u652f\u6301\u4f7f\u7528\u6e90\u7801\u5b89\u88c5\u5b58\u7b97\u5408\u5e76\u7248 NebulaGraph \u3002\u5176\u5b89\u88c5\u6b65\u9aa4\u4e0e\u591a\u8fdb\u7a0b\u7684 NebulaGraph \u6b65\u9aa4\u7c7b\u4f3c\uff0c\u7528\u6237\u53ea\u9700\u5728\u4f7f\u7528 CMake \u751f\u6210 makefile \u6587\u4ef6\u6b65\u9aa4\u7684\u547d\u4ee4\u4e2d\u6dfb\u52a0<code>-DENABLE_STANDALONE_VERSION=on</code>\u3002\u793a\u4f8b\u5982\u4e0b\uff1a</p> <pre><code>cmake -DCMAKE_INSTALL_PREFIX=/usr/local/nebula -DENABLE_TESTING=OFF -DENABLE_STANDALONE_VERSION=on -DCMAKE_BUILD_TYPE=Release ..\n</code></pre> <p>\u6709\u5173\u5177\u4f53\u7684\u5b89\u88c5\u6b65\u9aa4\uff0c\u53c2\u89c1\u4f7f\u7528\u6e90\u7801\u5b89\u88c5\u3002</p> <p>\u7528\u6237\u5b8c\u6210\u5b58\u7b97\u5408\u5e76\u7248 NebulaGraph \u540e\uff0c\u53ef\u4ee5\u53c2\u89c1\u8fde\u63a5\u670d\u52a1\u8fde\u63a5 NebulaGraph \u3002</p>"},{"location":"4.deployment-and-installation/standalone-deployment/#_6","title":"\u914d\u7f6e\u6587\u4ef6","text":"<p>\u5b58\u7b97\u5408\u5e76\u7248 NebulaGraph \u7684\u914d\u7f6e\u6587\u4ef6\u7684\u8def\u5f84\u9ed8\u8ba4\u4e3a<code>/usr/local/nebula/etc</code>\u3002</p> <p>\u7528\u6237\u53ef\u6267\u884c<code>sudo cat nebula-standalone.conf.default</code>\u67e5\u770b\u914d\u7f6e\u6587\u4ef6\u5185\u5bb9\u3002\u914d\u7f6e\u6587\u4ef6\u53c2\u6570\u548c\u63cf\u8ff0\u548c\u591a\u8fdb\u7a0b\u7684 NebulaGraph \u5927\u4f53\u4e00\u81f4\uff0c\u9664\u4ee5\u4e0b\u53c2\u6570\u5916\uff1a</p> \u53c2\u6570 \u9884\u8bbe\u503c \u8bf4\u660e <code>meta_port</code> <code>9559</code> Meta \u670d\u52a1\u7684\u7aef\u53e3\u53f7\u3002 <code>storage_port</code> <code>9779</code> Storage \u670d\u52a1\u7684\u7aef\u53e3\u53f7\u3002 <code>meta_data_path</code> <code>data/meta</code> Meta \u6570\u636e\u5b58\u50a8\u8def\u5f84\u3002 <p>\u7528\u6237\u53ef\u4ee5\u6267\u884c\u547d\u4ee4\u67e5\u770b\u914d\u7f6e\u9879\u5217\u8868\u4e0e\u8bf4\u660e\u3002\u5177\u4f53\u64cd\u4f5c\uff0c\u8bf7\u53c2\u89c1\u914d\u7f6e\u7ba1\u7406\u3002</p>"},{"location":"4.deployment-and-installation/2.compile-and-install-nebula-graph/1.install-nebula-graph-by-compiling-the-source-code/","title":"\u4f7f\u7528\u6e90\u7801\u5b89\u88c5 NebulaGraph","text":"<p>\u4f7f\u7528\u6e90\u7801\u5b89\u88c5 NebulaGraph \u5141\u8bb8\u81ea\u5b9a\u4e49\u7f16\u8bd1\u548c\u5b89\u88c5\u8bbe\u7f6e\uff0c\u5e76\u6d4b\u8bd5\u6700\u65b0\u7279\u6027\u3002</p>"},{"location":"4.deployment-and-installation/2.compile-and-install-nebula-graph/1.install-nebula-graph-by-compiling-the-source-code/#_1","title":"\u524d\u63d0\u6761\u4ef6","text":"<ul> <li> <p>\u51c6\u5907\u6b63\u786e\u7684\u7f16\u8bd1\u73af\u5883\u3002\u53c2\u89c1\u8f6f\u786c\u4ef6\u8981\u6c42\u548c\u5b89\u88c5\u4e09\u65b9\u5e93\u4f9d\u8d56\u5305\u3002</p> <p>Note</p> <p>\u6682\u4e0d\u652f\u6301\u79bb\u7ebf\u7f16\u8bd1 NebulaGraph \u3002</p> </li> </ul> <ul> <li>\u5f85\u5b89\u88c5 NebulaGraph \u7684\u4e3b\u673a\u53ef\u4ee5\u8bbf\u95ee\u4e92\u8054\u7f51\u3002</li> </ul>"},{"location":"4.deployment-and-installation/2.compile-and-install-nebula-graph/1.install-nebula-graph-by-compiling-the-source-code/#_2","title":"\u5b89\u88c5\u6b65\u9aa4","text":"<ol> <li> <p>\u514b\u9686 NebulaGraph \u7684\u6e90\u4ee3\u7801\u5230\u4e3b\u673a\u3002</p> <ul> <li> <p>[\u63a8\u8350] \u5982\u679c\u9700\u8981\u5b89\u88c5master\u7248\u672c\u7684 NebulaGraph\uff0c\u6267\u884c\u5982\u4e0b\u547d\u4ee4\uff1a</p> <pre><code>$ git clone --branch release-3.6 https://github.com/vesoft-inc/nebula.git\n</code></pre> </li> </ul> <ul> <li> <p>\u5982\u679c\u9700\u8981\u5b89\u88c5\u6700\u65b0\u7684\u5f00\u53d1\u7248\u672c\u7528\u4e8e\u6d4b\u8bd5\uff0c\u6267\u884c\u5982\u4e0b\u547d\u4ee4\u514b\u9686 master \u5206\u652f\u7684\u4ee3\u7801\uff1a</p> <pre><code>$ git clone https://github.com/vesoft-inc/nebula.git\n</code></pre> </li> </ul> </li> <li> <p>\u8fdb\u5165<code>nebula/third-party</code>\u76ee\u5f55\uff0c\u5b89\u88c5 NebulaGraph \u4f9d\u8d56\u7684\u7b2c\u4e09\u65b9\u5e93\u3002</p> <pre><code>$ cd nebula/third-party\n$ ./install-third-party.sh\n</code></pre> </li> <li> <p>\u8fd4\u56de<code>nebula</code>\u76ee\u5f55\uff0c\u521b\u5efa\u76ee\u5f55<code>build</code>\u5e76\u8fdb\u5165\u8be5\u76ee\u5f55\u3002</p> <pre><code>$ cd ..\n$ mkdir build &amp;&amp; cd build\n</code></pre> </li> <li> <p>\u4f7f\u7528 CMake \u751f\u6210 makefile \u6587\u4ef6\u3002</p> <p>Note</p> <p>\u9ed8\u8ba4\u5b89\u88c5\u8def\u5f84\u4e3a<code>/usr/local/nebula</code>\uff0c\u5982\u679c\u9700\u8981\u4fee\u6539\u8def\u5f84\uff0c\u8bf7\u5728\u4e0b\u65b9\u547d\u4ee4\u5185\u589e\u52a0\u53c2\u6570 <code>-DCMAKE_INSTALL_PREFIX=&lt;installation_path&gt;</code>\u3002</p> <p>\u66f4\u591a CMake \u53c2\u6570\u8bf4\u660e\uff0c\u8bf7\u53c2\u89c1 CMake \u53c2\u6570\u3002</p> <pre><code>$ cmake -DCMAKE_INSTALL_PREFIX=/usr/local/nebula -DENABLE_TESTING=OFF -DCMAKE_BUILD_TYPE=Release ..\n</code></pre> </li> <li> <p>\u7f16\u8bd1 NebulaGraph \u3002</p> <p>Note</p> <p>\u68c0\u67e5\u8f6f\u786c\u4ef6\u8981\u6c42\u548c\u5b89\u88c5\u4e09\u65b9\u5e93\u4f9d\u8d56\u5305\u3002</p> <p>\u4e3a\u4e86\u9002\u5f53\u5730\u52a0\u5feb\u7f16\u8bd1\u901f\u5ea6\uff0c\u53ef\u4ee5\u4f7f\u7528\u9009\u9879<code>-j</code>\u5e76\u884c\u7f16\u8bd1\u3002\u5e76\u884c\u6570\u91cf<code>N</code>\u5efa\u8bae\u4e3a\\(\\min(\\text{CPU}\u6838\u6570\uff0c\\frac{\u5185\u5b58 (GB)}{2})\\)\u3002</p> <pre><code>$ make -j{N} # E.g., make -j2\n</code></pre> </li> <li> <p>\u5b89\u88c5 NebulaGraph \u3002</p> <pre><code>$ sudo make install\n</code></pre> </li> </ol> <p>Note</p> <p>\u5b89\u88c5\u76ee\u5f55\u4e0b<code>etc/</code>\u76ee\u5f55\u4e2d\uff08\u9ed8\u8ba4\u4e3a<code>/usr/local/nebula/etc</code>\uff09\u7684\u914d\u7f6e\u6587\u4ef6\u4e3a\u53c2\u8003\u6a21\u7248\uff0c\u7528\u6237\u53ef\u4ee5\u6839\u636e\u9700\u8981\u521b\u5efa\u81ea\u5df1\u7684\u914d\u7f6e\u6587\u4ef6\u3002\u5982\u679c\u8981\u4f7f\u7528<code>script</code>\u76ee\u5f55\u4e0b\u7684\u811a\u672c\uff0c\u542f\u52a8\u3001\u505c\u6b62\u3001\u91cd\u542f\u3001\u4e2d\u6b62\u548c\u67e5\u770b\u670d\u52a1\uff0c\u914d\u7f6e\u6587\u4ef6\u9700\u8981\u547d\u540d\u4e3a<code>nebula-graph.conf</code>\uff0c<code>nebula-metad.conf</code>\u548c<code>nebula-storaged.conf</code>\u3002</p>"},{"location":"4.deployment-and-installation/2.compile-and-install-nebula-graph/1.install-nebula-graph-by-compiling-the-source-code/#master","title":"\u66f4\u65b0 master \u7248\u672c","text":"<p>master \u5206\u652f\u7684\u4ee3\u7801\u66f4\u65b0\u901f\u5ea6\u5feb\uff0c\u5982\u679c\u5b89\u88c5\u4e86 master \u5206\u652f\u5bf9\u5e94\u7684\u5f00\u53d1\u7248 NebulaGraph\uff0c\u53ef\u6839\u636e\u4ee5\u4e0b\u6b65\u9aa4\u66f4\u65b0\u7248\u672c\u3002</p> <ol> <li> <p>\u5728\u76ee\u5f55<code>nebula</code>\u4e2d\uff0c\u6267\u884c\u547d\u4ee4<code>git pull upstream master</code>\u66f4\u65b0\u6e90\u7801\u3002</p> </li> <li> <p>\u5728\u76ee\u5f55<code>nebula/build</code>\u4e2d\uff0c\u91cd\u65b0\u6267\u884c<code>make -j{N}</code>\u548c<code>make install</code>\u3002</p> </li> </ol>"},{"location":"4.deployment-and-installation/2.compile-and-install-nebula-graph/1.install-nebula-graph-by-compiling-the-source-code/#_3","title":"\u4e0b\u4e00\u6b65","text":"<p>\u7ba1\u7406 NebulaGraph \u670d\u52a1</p>"},{"location":"4.deployment-and-installation/2.compile-and-install-nebula-graph/1.install-nebula-graph-by-compiling-the-source-code/#cmake","title":"CMake \u53c2\u6570","text":""},{"location":"4.deployment-and-installation/2.compile-and-install-nebula-graph/1.install-nebula-graph-by-compiling-the-source-code/#_4","title":"\u4f7f\u7528\u65b9\u6cd5","text":"<pre><code>$ cmake -D&lt;variable&gt;=&lt;value&gt; ...\n</code></pre> <p>\u4e0b\u6587\u7684 CMake \u53c2\u6570\u53ef\u4ee5\u5728\u914d\u7f6e (CMake) \u9636\u6bb5\u7528\u6765\u8c03\u6574\u7f16\u8bd1\u8bbe\u7f6e\u3002</p>"},{"location":"4.deployment-and-installation/2.compile-and-install-nebula-graph/1.install-nebula-graph-by-compiling-the-source-code/#cmake_install_prefix","title":"CMAKE_INSTALL_PREFIX","text":"<p><code>CMAKE_INSTALL_PREFIX</code>\u6307\u5b9a NebulaGraph \u670d\u52a1\u6a21\u5757\u3001\u811a\u672c\u548c\u914d\u7f6e\u6587\u4ef6\u7684\u5b89\u88c5\u8def\u5f84\uff0c\u9ed8\u8ba4\u8def\u5f84\u4e3a<code>/usr/local/nebula</code>\u3002</p>"},{"location":"4.deployment-and-installation/2.compile-and-install-nebula-graph/1.install-nebula-graph-by-compiling-the-source-code/#enable_werror","title":"ENABLE_WERROR","text":"<p>\u9ed8\u8ba4\u503c\u4e3a<code>ON</code>\uff0c\u8868\u793a\u5c06\u6240\u6709\u8b66\u544a\uff08warning\uff09\u53d8\u4e3a\u9519\u8bef\uff08error\uff09\u3002\u5982\u679c\u6709\u5fc5\u8981\uff0c\u7528\u6237\u53ef\u4ee5\u8bbe\u7f6e\u4e3a<code>OFF</code>\u3002</p>"},{"location":"4.deployment-and-installation/2.compile-and-install-nebula-graph/1.install-nebula-graph-by-compiling-the-source-code/#enable_testing","title":"ENABLE_TESTING","text":"<p>\u9ed8\u8ba4\u503c\u4e3a<code>ON</code>\uff0c\u8868\u793a\u5355\u5143\u6d4b\u8bd5\u670d\u52a1\u7531 NebulaGraph \u670d\u52a1\u6784\u5efa\u3002\u5982\u679c\u53ea\u9700\u8981\u670d\u52a1\u6a21\u5757\uff0c\u53ef\u4ee5\u8bbe\u7f6e\u4e3a<code>OFF</code>\u3002</p>"},{"location":"4.deployment-and-installation/2.compile-and-install-nebula-graph/1.install-nebula-graph-by-compiling-the-source-code/#enable_asan","title":"ENABLE_ASAN","text":"<p>\u9ed8\u8ba4\u503c\u4e3a<code>OFF</code>\uff0c\u8868\u793a\u5173\u95ed\u5185\u5b58\u95ee\u9898\u68c0\u6d4b\u5de5\u5177 ASan\uff08AddressSanitizer\uff09\u3002\u8be5\u5de5\u5177\u662f\u4e3a NebulaGraph \u5f00\u53d1\u8005\u51c6\u5907\u7684\uff0c\u5982\u679c\u9700\u8981\u5f00\u542f\uff0c\u53ef\u4ee5\u8bbe\u7f6e\u4e3a<code>ON</code>\u3002</p>"},{"location":"4.deployment-and-installation/2.compile-and-install-nebula-graph/1.install-nebula-graph-by-compiling-the-source-code/#cmake_build_type","title":"CMAKE_BUILD_TYPE","text":"<p><code>CMAKE_BUILD_TYPE</code>\u63a7\u5236 NebulaGraph \u7684 build \u65b9\u6cd5\uff0c\u53d6\u503c\u8bf4\u660e\u5982\u4e0b\uff1a</p> <ul> <li> <p><code>Debug</code></p> <p><code>CMAKE_BUILD_TYPE</code>\u7684\u9ed8\u8ba4\u503c\uff0c\u8868\u793a build \u8fc7\u7a0b\u4e2d\u53ea\u8bb0\u5f55 debug \u4fe1\u606f\uff0c\u4e0d\u4f7f\u7528\u4f18\u5316\u9009\u9879\u3002</p> </li> </ul> <ul> <li> <p><code>Release</code></p> <p>build \u8fc7\u7a0b\u4e2d\u4f7f\u7528\u4f18\u5316\u9009\u9879\uff0c\u4e0d\u8bb0\u5f55 debug \u4fe1\u606f\u3002</p> </li> </ul> <ul> <li> <p><code>RelWithDebInfo</code></p> <p>build \u8fc7\u7a0b\u4e2d\u65e2\u4f7f\u7528\u4f18\u5316\u9009\u9879\uff0c\u4e5f\u8bb0\u5f55 debug \u4fe1\u606f\u3002</p> </li> </ul> <ul> <li> <p><code>MinSizeRel</code></p> <p>build \u8fc7\u7a0b\u4e2d\u4ec5\u901a\u8fc7\u4f18\u5316\u9009\u9879\u63a7\u5236\u4ee3\u7801\u5927\u5c0f\uff0c\u4e0d\u8bb0\u5f55 debug \u4fe1\u606f\u3002</p> </li> </ul>"},{"location":"4.deployment-and-installation/2.compile-and-install-nebula-graph/1.install-nebula-graph-by-compiling-the-source-code/#enable_include_what_you_use","title":"ENABLE_INCLUDE_WHAT_YOU_USE","text":"<p>\u9ed8\u8ba4\u503c\u4e3a<code>OFF</code>\u3002\u5f53\u5176\u503c\u4e3a<code>ON</code>\u4e14\u7cfb\u7edf\u4e2d\u5b89\u88c5\u4e86include-what-you-use\uff0c\u7cfb\u7edf\u5c06\u5728\u751f\u6210 makefile \u8fc7\u7a0b\u4e2d\u62a5\u544a\u5de5\u7a0b\u6e90\u7801\u4e2d\u5305\u542b\u7684\u5197\u4f59\u5934\u6587\u4ef6\u3002</p>"},{"location":"4.deployment-and-installation/2.compile-and-install-nebula-graph/1.install-nebula-graph-by-compiling-the-source-code/#nebula_use_linker","title":"NEBULA_USE_LINKER","text":"<p>\u6307\u5b9a\u94fe\u63a5\u7a0b\u5e8f\u7684\u65b9\u5f0f\uff1a</p> <ul> <li>\u9ed8\u8ba4\u503c\u4e3a<code>bfd</code>\uff0c\u8868\u793a\u4f7f\u7528 ld.bfd \u94fe\u63a5\u7a0b\u5e8f\u3002</li> <li>\u5982\u679c\u7cfb\u7edf\u4e2d\u5b89\u88c5\u4e86 lld \u94fe\u63a5\u5668, \u53ef\u8bbe\u7f6e\u53c2\u6570\u503c\u4e3a<code>lld</code>\uff0c\u8868\u793a\u4f7f\u7528 ld.lld \u94fe\u63a5\u7a0b\u5e8f\u3002</li> <li>\u5982\u679c\u7cfb\u7edf\u4e2d\u5b89\u88c5\u4e86 gold \u94fe\u63a5\u5668\uff0c\u53ef\u8bbe\u4e3a<code>gold</code>\uff0c\u8868\u793a\u4f7f\u7528 ld.gold \u94fe\u63a5\u7a0b\u5e8f\u3002</li> </ul>"},{"location":"4.deployment-and-installation/2.compile-and-install-nebula-graph/1.install-nebula-graph-by-compiling-the-source-code/#cmake_c_compilercmake_cxx_compiler","title":"CMAKE_C_COMPILER/CMAKE_CXX_COMPILER","text":"<p>\u901a\u5e38\u60c5\u51b5\u4e0b\uff0cCMake \u4f1a\u81ea\u52a8\u67e5\u627e\u5e76\u4f7f\u7528\u4e3b\u673a\u4e0a\u7684 C/C++\u7f16\u8bd1\u5668\uff0c\u4f46\u662f\u5982\u679c\u7f16\u8bd1\u5668\u6ca1\u6709\u5b89\u88c5\u5728\u6807\u51c6\u8def\u5f84\uff0c\u6216\u8005\u60f3\u4f7f\u7528\u5176\u4ed6\u7f16\u8bd1\u5668\uff0c\u8bf7\u6267\u884c\u5982\u4e0b\u547d\u4ee4\u6307\u5b9a\u76ee\u6807\u7f16\u8bd1\u5668\u7684\u5b89\u88c5\u8def\u5f84\uff1a</p> <pre><code>$ cmake -DCMAKE_C_COMPILER=&lt;path_to_gcc/bin/gcc&gt; -DCMAKE_CXX_COMPILER=&lt;path_to_gcc/bin/g++&gt; ..\n$ cmake -DCMAKE_C_COMPILER=&lt;path_to_clang/bin/clang&gt; -DCMAKE_CXX_COMPILER=&lt;path_to_clang/bin/clang++&gt; ..\n</code></pre>"},{"location":"4.deployment-and-installation/2.compile-and-install-nebula-graph/1.install-nebula-graph-by-compiling-the-source-code/#enable_ccache","title":"ENABLE_CCACHE","text":"<p><code>ENABLE_CCACHE</code>\u9ed8\u8ba4\u503c\u4e3a<code>ON</code>\uff0c\u8868\u793a\u4f7f\u7528 Ccache\uff08compiler cache\uff09\u5de5\u5177\u52a0\u901f\u7f16\u8bd1\u3002</p> <p>\u5982\u679c\u60f3\u8981\u7981\u7528 ccache\uff0c\u4ec5\u4ec5\u8bbe\u7f6e<code>ENABLE_CCACHE=OFF</code>\u662f\u4e0d\u884c\u7684\uff0c\u56e0\u4e3a\u5728\u67d0\u4e9b\u5e73\u53f0\u4e0a\uff0cccache \u4f1a\u4ee3\u7406\u5f53\u524d\u7f16\u8bd1\u5668\uff0c\u56e0\u6b64\u8fd8\u9700\u8981\u8bbe\u7f6e\u73af\u5883\u53d8\u91cf<code>export CCACHE_DISABLE=true</code>\uff0c\u6216\u8005\u5728\u6587\u4ef6<code>~/.ccache/ccache.conf</code>\u4e2d\u6dfb\u52a0<code>disable=true</code>\u3002\u66f4\u591a\u4fe1\u606f\u8bf7\u53c2\u89c1 ccache official documentation\u3002</p>"},{"location":"4.deployment-and-installation/2.compile-and-install-nebula-graph/1.install-nebula-graph-by-compiling-the-source-code/#nebula_thirdparty_root","title":"NEBULA_THIRDPARTY_ROOT","text":"<p><code>NEBULA_THIRDPARTY_ROOT</code>\u6307\u5b9a\u7b2c\u4e09\u65b9\u8f6f\u4ef6\u7684\u5b89\u88c5\u8def\u5f84\uff0c\u9ed8\u8ba4\u8def\u5f84\u4e3a<code>/opt/vesoft/third-party</code>\u3002</p>"},{"location":"4.deployment-and-installation/2.compile-and-install-nebula-graph/1.install-nebula-graph-by-compiling-the-source-code/#_5","title":"\u95ee\u9898\u6392\u67e5","text":"<p>\u5982\u679c\u51fa\u73b0\u7f16\u8bd1\u5931\u8d25\uff0c\u8bf7\u53c2\u8003\u4ee5\u4e0b\u5efa\u8bae\uff1a</p> <ol> <li> <p>\u68c0\u67e5\u64cd\u4f5c\u7cfb\u7edf\u7248\u672c\u662f\u5426\u7b26\u5408\u8981\u6c42\u3001\u5185\u5b58\u548c\u786c\u76d8\u7a7a\u95f4\u662f\u5426\u8db3\u591f\u3002</p> </li> <li> <p>\u68c0\u67e5 third-party \u662f\u5426\u6b63\u786e\u5b89\u88c5\u3002</p> </li> <li> <p>\u4f7f\u7528<code>make -j1</code>\u964d\u4f4e\u7f16\u8bd1\u5e76\u53d1\u5ea6\u3002</p> </li> </ol>"},{"location":"4.deployment-and-installation/2.compile-and-install-nebula-graph/2.install-nebula-graph-by-rpm-or-deb/","title":"\u4f7f\u7528 RPM \u6216 DEB \u5305\u5b89\u88c5 NebulaGraph","text":"<p>RPM \u548c DEB \u662f Linux \u7cfb\u7edf\u4e0b\u5e38\u89c1\u7684\u4e24\u79cd\u5b89\u88c5\u5305\u683c\u5f0f\uff0c\u672c\u6587\u4ecb\u7ecd\u5982\u4f55\u4f7f\u7528 RPM \u6216 DEB \u6587\u4ef6\u5728\u4e00\u53f0\u673a\u5668\u4e0a\u5feb\u901f\u5b89\u88c5 NebulaGraph \u3002</p> <p>Note</p> <p>\u90e8\u7f72 NebulaGraph \u96c6\u7fa4\u7684\u65b9\u5f0f\u53c2\u89c1\u4f7f\u7528 RPM/DEB \u5305\u90e8\u7f72\u96c6\u7fa4\u3002</p>"},{"location":"4.deployment-and-installation/2.compile-and-install-nebula-graph/2.install-nebula-graph-by-rpm-or-deb/#_1","title":"\u524d\u63d0\u6761\u4ef6","text":"<ul> <li>\u5b89\u88c5<code>wget</code>\u5de5\u5177\u3002</li> </ul>"},{"location":"4.deployment-and-installation/2.compile-and-install-nebula-graph/2.install-nebula-graph-by-rpm-or-deb/#_2","title":"\u4e0b\u8f7d\u5b89\u88c5\u5305","text":"<p>Note</p> <ul> <li>\u5f53\u524d\u4ec5\u652f\u6301\u5728 Linux \u7cfb\u7edf\u4e0b\u5b89\u88c5 NebulaGraph\uff0c\u4e14\u4ec5\u652f\u6301 CentOS 7.x\u3001CentOS 8.x\u3001Ubuntu 16.04\u3001Ubuntu 18.04\u3001Ubuntu 20.04 \u64cd\u4f5c\u7cfb\u7edf\u3002</li> </ul> <ul> <li>\u5982\u679c\u7528\u6237\u4f7f\u7528\u7684\u662f\u56fd\u4ea7\u5316\u7684 Linux \u64cd\u4f5c\u7cfb\u7edf\uff0c\u8bf7\u5b89\u88c5\u4f01\u4e1a\u7248 NebulaGraph \u3002  </li> </ul>"},{"location":"4.deployment-and-installation/2.compile-and-install-nebula-graph/2.install-nebula-graph-by-rpm-or-deb/#oss","title":"\u963f\u91cc\u4e91 OSS \u4e0b\u8f7d","text":"<ul> <li>\u4e0b\u8f7d release \u7248\u672c<p>URL \u683c\u5f0f\u5982\u4e0b\uff1a</p> <pre><code>//Centos 7\nhttps://oss-cdn.nebula-graph.com.cn/package/&lt;release_version&gt;/nebula-graph-&lt;release_version&gt;.el7.x86_64.rpm\n\n//Centos 8\nhttps://oss-cdn.nebula-graph.com.cn/package/&lt;release_version&gt;/nebula-graph-&lt;release_version&gt;.el8.x86_64.rpm\n\n//Ubuntu 1604\nhttps://oss-cdn.nebula-graph.com.cn/package/&lt;release_version&gt;/nebula-graph-&lt;release_version&gt;.ubuntu1604.amd64.deb\n\n//Ubuntu 1804\nhttps://oss-cdn.nebula-graph.com.cn/package/&lt;release_version&gt;/nebula-graph-&lt;release_version&gt;.ubuntu1804.amd64.deb\n\n//Ubuntu 2004\nhttps://oss-cdn.nebula-graph.com.cn/package/&lt;release_version&gt;/nebula-graph-&lt;release_version&gt;.ubuntu2004.amd64.deb\n</code></pre> <p>\u4f8b\u5982\u8981\u4e0b\u8f7d\u9002\u7528\u4e8e<code>Centos 7.5</code>\u7684<code>master</code>\u5b89\u88c5\u5305\uff1a</p> <pre><code>wget https://oss-cdn.nebula-graph.com.cn/package/master/nebula-graph-master.el7.x86_64.rpm\nwget https://oss-cdn.nebula-graph.com.cn/package/master/nebula-graph-master.el7.x86_64.rpm.sha256sum.txt\n</code></pre> <p>\u4e0b\u8f7d\u9002\u7528\u4e8e<code>ubuntu 1804</code>\u7684<code>master</code>\u5b89\u88c5\u5305\uff1a   <pre><code>wget https://oss-cdn.nebula-graph.com.cn/package/master/nebula-graph-master.ubuntu1804.amd64.deb\nwget https://oss-cdn.nebula-graph.com.cn/package/master/nebula-graph-master.ubuntu1804.amd64.deb.sha256sum.txt\n</code></pre></p> </li> </ul> <ul> <li> <p>\u4e0b\u8f7d\u65e5\u5e38\u5f00\u53d1\u7248\u672c (nightly)</p> <p>Danger</p> <ul> <li>nightly \u7248\u672c\u901a\u5e38\u7528\u4e8e\u6d4b\u8bd5\u65b0\u529f\u80fd\u3001\u65b0\u7279\u6027\uff0c\u8bf7\u4e0d\u8981\u5728\u751f\u4ea7\u73af\u5883\u4e2d\u4f7f\u7528 nightly \u7248\u672c\u3002</li> <li>nightly \u7248\u672c\u4e0d\u4fdd\u8bc1\u6bcf\u65e5\u90fd\u80fd\u5b8c\u6574\u53d1\u5e03\uff0c\u4e5f\u4e0d\u4fdd\u8bc1\u662f\u5426\u4f1a\u66f4\u6539\u6587\u4ef6\u540d\u3002</li> </ul> <p>URL \u683c\u5f0f\u5982\u4e0b\uff1a</p> <pre><code>//Centos 7\nhttps://oss-cdn.nebula-graph.com.cn/package/nightly/&lt;yyyy.mm.dd&gt;/nebula-graph-&lt;yyyy.mm.dd&gt;-nightly.el7.x86_64.rpm\n\n//Centos 8\nhttps://oss-cdn.nebula-graph.com.cn/package/nightly/&lt;yyyy.mm.dd&gt;/nebula-graph-&lt;yyyy.mm.dd&gt;-nightly.el8.x86_64.rpm\n\n//Ubuntu 1604\nhttps://oss-cdn.nebula-graph.com.cn/package/nightly/&lt;yyyy.mm.dd&gt;/nebula-graph-&lt;yyyy.mm.dd&gt;-nightly.ubuntu1604.amd64.deb\n\n//Ubuntu 1804\nhttps://oss-cdn.nebula-graph.com.cn/package/nightly/&lt;yyyy.mm.dd&gt;/nebula-graph-&lt;yyyy.mm.dd&gt;-nightly.ubuntu1804.amd64.deb\n\n//Ubuntu 2004\nhttps://oss-cdn.nebula-graph.com.cn/package/nightly/&lt;yyyy.mm.dd&gt;/nebula-graph-&lt;yyyy.mm.dd&gt;-nightly.ubuntu2004.amd64.deb\n</code></pre> <p>\u4f8b\u5982\u8981\u4e0b\u8f7d<code>2021.11.24</code>\u9002\u7528\u4e8e<code>Centos 7.5</code>\u7684<code>2.x</code>\u5b89\u88c5\u5305\uff1a</p> <pre><code>wget https://oss-cdn.nebula-graph.com.cn/package/nightly/2021.11.24/nebula-graph-2021.11.24-nightly.el7.x86_64.rpm\nwget https://oss-cdn.nebula-graph.com.cn/package/nightly/2021.11.24/nebula-graph-2021.11.24-nightly.el7.x86_64.rpm.sha256sum.txt\n</code></pre> <p>\u8981\u4e0b\u8f7d<code>2021.11.24</code>\u9002\u7528\u4e8e<code>Ubuntu 1804</code>\u7684<code>2.x</code>\u5b89\u88c5\u5305\uff1a   <pre><code>wget https://oss-cdn.nebula-graph.com.cn/package/nightly/2021.11.24/nebula-graph-2021.11.24-nightly.ubuntu1804.amd64.deb\nwget https://oss-cdn.nebula-graph.com.cn/package/nightly/2021.11.24/nebula-graph-2021.11.24-nightly.ubuntu1804.amd64.deb.sha256sum.txt\n</code></pre></p> </li> </ul>"},{"location":"4.deployment-and-installation/2.compile-and-install-nebula-graph/2.install-nebula-graph-by-rpm-or-deb/#nebulagraph","title":"\u5b89\u88c5 NebulaGraph","text":"<ul> <li> <p>\u5b89\u88c5 RPM \u5305</p> <pre><code>$ sudo rpm -ivh --prefix=&lt;installation_path&gt; &lt;package_name&gt;\n</code></pre> <p><code>--prefix</code>\u4e3a\u53ef\u9009\u9879\uff0c\u7528\u4e8e\u6307\u5b9a\u5b89\u88c5\u8def\u5f84\u3002\u5982\u4e0d\u8bbe\u7f6e\uff0c\u7cfb\u7edf\u4f1a\u5c06 NebulaGraph \u5b89\u88c5\u5230\u9ed8\u8ba4\u8def\u5f84<code>/usr/local/nebula/</code>\u3002</p> <p>\u4f8b\u5982\uff0c\u8981\u5728\u9ed8\u8ba4\u8def\u5f84\u4e0b\u5b89\u88c5master\u7248\u672c\u7684 RPM \u5305\uff0c\u8fd0\u884c\u5982\u4e0b\u547d\u4ee4\uff1a</p> <pre><code>sudo rpm -ivh nebula-graph-master.el7.x86_64.rpm\n</code></pre> </li> </ul> <ul> <li> <p>\u5b89\u88c5 DEB \u5305</p> <pre><code>$ sudo dpkg -i &lt;package_name&gt;\n</code></pre> <p>Note</p> <p>\u4f7f\u7528 DEB \u5305\u5b89\u88c5 NebulaGraph \u65f6\u4e0d\u652f\u6301\u81ea\u5b9a\u4e49\u5b89\u88c5\u8def\u5f84\u3002\u9ed8\u8ba4\u5b89\u88c5\u8def\u5f84\u4e3a<code>/usr/local/nebula/</code>\u3002</p> <p>\u4f8b\u5982\u5b89\u88c5master\u7248\u672c\u7684 DEB \u5305\uff1a</p> <pre><code>sudo dpkg -i nebula-graph-master.ubuntu1804.amd64.deb\n</code></pre> </li> </ul>"},{"location":"4.deployment-and-installation/2.compile-and-install-nebula-graph/2.install-nebula-graph-by-rpm-or-deb/#_3","title":"\u540e\u7eed\u64cd\u4f5c","text":"<ul> <li>\u542f\u52a8 NebulaGraph </li> <li>\u8fde\u63a5 NebulaGraph </li> </ul>"},{"location":"4.deployment-and-installation/2.compile-and-install-nebula-graph/3.deploy-nebula-graph-with-docker-compose/","title":"\u4f7f\u7528 Docker Compose \u90e8\u7f72 NebulaGraph","text":"<p>\u4f7f\u7528 Docker Compose \u53ef\u4ee5\u57fa\u4e8e\u51c6\u5907\u597d\u7684\u914d\u7f6e\u6587\u4ef6\u5feb\u901f\u90e8\u7f72 NebulaGraph \u670d\u52a1\uff0c\u4ec5\u5efa\u8bae\u5728\u6d4b\u8bd5 NebulaGraph \u529f\u80fd\u65f6\u4f7f\u7528\u8be5\u65b9\u5f0f\u3002</p>"},{"location":"4.deployment-and-installation/2.compile-and-install-nebula-graph/3.deploy-nebula-graph-with-docker-compose/#_1","title":"\u524d\u63d0\u6761\u4ef6","text":"<ul> <li>\u4e3b\u673a\u4e0a\u5b89\u88c5\u5982\u4e0b\u5e94\u7528\u7a0b\u5e8f\u3002 \u5e94\u7528\u7a0b\u5e8f \u63a8\u8350\u7248\u672c \u5b98\u65b9\u5b89\u88c5\u53c2\u8003 Docker \u6700\u65b0\u7248\u672c Install Docker Engine Docker Compose \u6700\u65b0\u7248\u672c Install Docker Compose Git \u6700\u65b0\u7248\u672c Download Git </li> </ul> <ul> <li>\u5982\u679c\u4f7f\u7528\u975e root \u7528\u6237\u90e8\u7f72 NebulaGraph\uff0c\u8bf7\u6388\u6743\u8be5\u7528\u6237 Docker \u76f8\u5173\u7684\u6743\u9650\u3002\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u89c1 Manage Docker as a non-root user\u3002</li> </ul> <ul> <li>\u542f\u52a8\u4e3b\u673a\u4e0a\u7684 Docker \u670d\u52a1\u3002</li> </ul> <ul> <li>\u5982\u679c\u5df2\u7ecf\u901a\u8fc7 Docker Compose \u5728\u4e3b\u673a\u4e0a\u90e8\u7f72\u4e86\u53e6\u4e00\u4e2a\u7248\u672c\u7684 NebulaGraph\uff0c\u4e3a\u907f\u514d\u517c\u5bb9\u6027\u95ee\u9898\uff0c\u9700\u8981\u5220\u9664\u76ee\u5f55<code>nebula-docker-compose/data</code>\u3002</li> </ul>"},{"location":"4.deployment-and-installation/2.compile-and-install-nebula-graph/3.deploy-nebula-graph-with-docker-compose/#nebulagraph","title":"\u90e8\u7f72 NebulaGraph","text":"<ol> <li> <p>\u901a\u8fc7 Git \u514b\u9686<code>nebula-docker-compose</code>\u4ed3\u5e93\u7684<code>3.6.0</code>\u5206\u652f\u5230\u4e3b\u673a\u3002</p> <p>Danger</p> <p><code>master</code>\u5206\u652f\u5305\u542b\u6700\u65b0\u7684\u672a\u6d4b\u8bd5\u4ee3\u7801\u3002\u8bf7\u4e0d\u8981\u5728\u751f\u4ea7\u73af\u5883\u4f7f\u7528\u6b64\u7248\u672c\u3002</p> <pre><code>$ git clone -b release-3.6 https://github.com/vesoft-inc/nebula-docker-compose.git\n</code></pre> <p>Note</p> <p>Docker Compose \u7684<code>x.y</code>\u7248\u672c\u5bf9\u9f50\u5185\u6838\u7684<code>x.y</code>\u7248\u672c\uff0c\u5bf9\u4e8e\u5185\u6838<code>z</code>\u7248\u672c\uff0cDocker Compose \u4e0d\u4f1a\u53d1\u5e03\u5bf9\u5e94\u7684<code>z</code>\u7248\u672c\uff0c\u4f46\u662f\u4f1a\u62c9\u53d6<code>z</code>\u7248\u672c\u7684\u5185\u6838\u955c\u50cf\u3002</p> </li> <li> <p>\u5207\u6362\u81f3\u76ee\u5f55<code>nebula-docker-compose</code>\u3002</p> <pre><code>$ cd nebula-docker-compose/\n</code></pre> </li> <li> <p>\u6267\u884c\u5982\u4e0b\u547d\u4ee4\u542f\u52a8 NebulaGraph \u670d\u52a1\u3002</p> <p>Note</p> <ul> <li>\u5982\u679c\u957f\u671f\u672a\u5185\u6838\u66f4\u65b0\u955c\u50cf\uff0c\u8bf7\u5148\u66f4\u65b0 NebulaGraph \u955c\u50cf\u548c NebulaGraph Console \u955c\u50cf\u3002</li> <li>\u6267\u884c\u547d\u4ee4\u540e\u7684\u8fd4\u56de\u7ed3\u679c\u56e0\u5b89\u88c5\u76ee\u5f55\u4e0d\u540c\u800c\u4e0d\u540c\u3002</li> </ul> <pre><code>[nebula-docker-compose]$ docker-compose up -d\nCreating nebula-docker-compose_metad0_1 ... done\nCreating nebula-docker-compose_metad2_1 ... done\nCreating nebula-docker-compose_metad1_1 ... done\nCreating nebula-docker-compose_graphd2_1   ... done\nCreating nebula-docker-compose_graphd_1    ... done\nCreating nebula-docker-compose_graphd1_1   ... done\nCreating nebula-docker-compose_storaged0_1 ... done\nCreating nebula-docker-compose_storaged2_1 ... done\nCreating nebula-docker-compose_storaged1_1 ... done\n</code></pre> <p>Compatibility</p> <p>\u4ece 3.1 \u7248\u672c\u5f00\u59cb\uff0cDocker-compose \u4f1a\u81ea\u52a8\u542f\u52a8 NebulaGraph Console \u955c\u50cf\u7684\u5bb9\u5668\uff0c\u5e76\u5c06 Storage \u4e3b\u673a\u589e\u52a0\u81f3\u96c6\u7fa4\u4e2d\uff08\u5373<code>ADD HOSTS</code>\u547d\u4ee4\uff09\u3002</p> <p>Note</p> <p>\u4e0a\u8ff0\u670d\u52a1\u7684\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u89c1\u67b6\u6784\u603b\u89c8\u3002</p> </li> </ol>"},{"location":"4.deployment-and-installation/2.compile-and-install-nebula-graph/3.deploy-nebula-graph-with-docker-compose/#nebulagraph_1","title":"\u8fde\u63a5 NebulaGraph","text":"<p>\u8fde\u63a5 NebulaGraph \u6709\u4e24\u79cd\u65b9\u5f0f\uff1a</p> <ul> <li>\u5728\u5bb9\u5668\u5916\u901a\u8fc7 Nebula Console \u8fde\u63a5\u3002\u56e0\u4e3a\u5bb9\u5668\u7684\u914d\u7f6e\u6587\u4ef6\u4e2d\u5c06 Graph \u670d\u52a1\u7684\u5916\u90e8\u6620\u5c04\u7aef\u53e3\u4e5f\u56fa\u5b9a\u4e3a 9669\uff0c\u56e0\u6b64\u53ef\u4ee5\u76f4\u63a5\u901a\u8fc7\u9ed8\u8ba4\u7aef\u53e3\u8fde\u63a5\u3002\u8be6\u60c5\u53c2\u89c1\u8fde\u63a5 NebulaGraph \u3002</li> </ul> <ul> <li>\u767b\u5f55\u5b89\u88c5\u4e86 NebulaGraph Console \u7684\u5bb9\u5668\uff0c\u7136\u540e\u518d\u8fde\u63a5 Graph \u670d\u52a1\u3002\u672c\u5c0f\u8282\u4ecb\u7ecd\u8fd9\u79cd\u65b9\u5f0f\u3002</li> </ul> <ol> <li> <p>\u4f7f\u7528<code>docker-compose ps</code>\u547d\u4ee4\u67e5\u770b NebulaGraph Console \u5bb9\u5668\u540d\u79f0\u3002</p> <pre><code>$ docker-compose ps\n          Name                         Command             State                 Ports\n----------------------------------------------------------------------------------------------\nnebula-docker-compose_console_1     sh -c sleep 3 &amp;&amp;          Up\n                                  nebula-co ...\n......\n</code></pre> </li> <li> <p>\u8fdb\u5165 NebulaGraph Console \u5bb9\u5668\u4e2d\u3002</p> <pre><code>$ docker exec -it nebula-docker-compose_console_1 /bin/sh\n/ #\n</code></pre> </li> <li> <p>\u901a\u8fc7 NebulaGraph Console \u8fde\u63a5 NebulaGraph \u3002</p> <pre><code>/ # ./usr/local/bin/nebula-console -u &lt;user_name&gt; -p &lt;password&gt; --address=graphd --port=9669\n</code></pre> <p>Note</p> <p>\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u8eab\u4efd\u8ba4\u8bc1\u529f\u80fd\u662f\u5173\u95ed\u7684\uff0c\u53ea\u80fd\u4f7f\u7528\u5df2\u5b58\u5728\u7684\u7528\u6237\u540d\uff08\u9ed8\u8ba4\u4e3a<code>root</code>\uff09\u548c\u4efb\u610f\u5bc6\u7801\u767b\u5f55\u3002\u5982\u679c\u60f3\u4f7f\u7528\u8eab\u4efd\u8ba4\u8bc1\uff0c\u8bf7\u53c2\u89c1\u8eab\u4efd\u8ba4\u8bc1\u3002</p> </li> <li> <p>\u67e5\u770b\u96c6\u7fa4\u72b6\u6001\u3002</p> <pre><code>nebula&gt; SHOW HOSTS;\n+-------------+------+----------+--------------+----------------------+------------------------+---------+\n| Host        | Port | Status   | Leader count | Leader distribution  | Partition distribution | Version |\n+-------------+------+----------+--------------+----------------------+------------------------+---------+\n| \"storaged0\" | 9779 | \"ONLINE\" | 0            | \"No valid partition\" | \"No valid partition\"   | \"master\" |\n| \"storaged1\" | 9779 | \"ONLINE\" | 0            | \"No valid partition\" | \"No valid partition\"   | \"master\" |\n| \"storaged2\" | 9779 | \"ONLINE\" | 0            | \"No valid partition\" | \"No valid partition\"   | \"master\" |\n+-------------+------+----------+--------------+----------------------+------------------------+---------+\n</code></pre> </li> </ol> <p>\u6267\u884c\u4e24\u6b21<code>exit</code>\u53ef\u4ee5\u9000\u51fa\u5bb9\u5668\u3002</p>"},{"location":"4.deployment-and-installation/2.compile-and-install-nebula-graph/3.deploy-nebula-graph-with-docker-compose/#nebulagraph_2","title":"\u67e5\u770b NebulaGraph \u670d\u52a1\u7684\u72b6\u6001\u548c\u7aef\u53e3","text":"<p>\u6267\u884c\u547d\u4ee4<code>docker-compose ps</code>\u53ef\u4ee5\u5217\u51fa NebulaGraph \u670d\u52a1\u7684\u72b6\u6001\u548c\u7aef\u53e3\u3002</p> <p>Note</p> <p>NebulaGraph \u9ed8\u8ba4\u4f7f\u7528<code>9669</code>\u7aef\u53e3\u4e3a\u5ba2\u6237\u7aef\u63d0\u4f9b\u670d\u52a1\uff0c\u5982\u679c\u9700\u8981\u4fee\u6539\u7aef\u53e3\uff0c\u8bf7\u4fee\u6539\u76ee\u5f55<code>nebula-docker-compose</code>\u5185\u7684\u6587\u4ef6<code>docker-compose.yaml</code>\uff0c\u7136\u540e\u91cd\u542f NebulaGraph \u670d\u52a1\u3002</p> <pre><code>$ docker-compose ps\nnebula-docker-compose_console_1     sh -c sleep 3 &amp;&amp;                 Up\n                                  nebula-co ...\nnebula-docker-compose_graphd1_1     /usr/local/nebula/bin/nebu ...   Up      0.0.0.0:49174-&gt;19669/tcp,:::49174-&gt;19669/tcp, 0.0.0.0:49171-&gt;19670/tcp,:::49171-&gt;19670/tcp, 0.0.0.0:49177-&gt;9669/tcp,:::49177-&gt;9669/tcp\nnebula-docker-compose_graphd2_1     /usr/local/nebula/bin/nebu ...   Up      0.0.0.0:49175-&gt;19669/tcp,:::49175-&gt;19669/tcp, 0.0.0.0:49172-&gt;19670/tcp,:::49172-&gt;19670/tcp, 0.0.0.0:49178-&gt;9669/tcp,:::49178-&gt;9669/tcp\nnebula-docker-compose_graphd_1      /usr/local/nebula/bin/nebu ...   Up      0.0.0.0:49180-&gt;19669/tcp,:::49180-&gt;19669/tcp, 0.0.0.0:49179-&gt;19670/tcp,:::49179-&gt;19670/tcp, 0.0.0.0:9669-&gt;9669/tcp,:::9669-&gt;9669/tcp\nnebula-docker-compose_metad0_1      /usr/local/nebula/bin/nebu ...   Up      0.0.0.0:49157-&gt;19559/tcp,:::49157-&gt;19559/tcp, 0.0.0.0:49154-&gt;19560/tcp,:::49154-&gt;19560/tcp, 0.0.0.0:49160-&gt;9559/tcp,:::49160-&gt;9559/tcp, 9560/tcp\nnebula-docker-compose_metad1_1      /usr/local/nebula/bin/nebu ...   Up      0.0.0.0:49156-&gt;19559/tcp,:::49156-&gt;19559/tcp, 0.0.0.0:49153-&gt;19560/tcp,:::49153-&gt;19560/tcp, 0.0.0.0:49159-&gt;9559/tcp,:::49159-&gt;9559/tcp, 9560/tcp\nnebula-docker-compose_metad2_1      /usr/local/nebula/bin/nebu ...   Up      0.0.0.0:49158-&gt;19559/tcp,:::49158-&gt;19559/tcp, 0.0.0.0:49155-&gt;19560/tcp,:::49155-&gt;19560/tcp, 0.0.0.0:49161-&gt;9559/tcp,:::49161-&gt;9559/tcp, 9560/tcp\nnebula-docker-compose_storaged0_1   /usr/local/nebula/bin/nebu ...   Up      0.0.0.0:49166-&gt;19779/tcp,:::49166-&gt;19779/tcp, 0.0.0.0:49163-&gt;19780/tcp,:::49163-&gt;19780/tcp, 9777/tcp, 9778/tcp, 0.0.0.0:49169-&gt;9779/tcp,:::49169-&gt;9779/tcp, 9780/tcp\nnebula-docker-compose_storaged1_1   /usr/local/nebula/bin/nebu ...   Up      0.0.0.0:49165-&gt;19779/tcp,:::49165-&gt;19779/tcp, 0.0.0.0:49162-&gt;19780/tcp,:::49162-&gt;19780/tcp, 9777/tcp, 9778/tcp, 0.0.0.0:49168-&gt;9779/tcp,:::49168-&gt;9779/tcp, 9780/tcp\nnebula-docker-compose_storaged2_1   /usr/local/nebula/bin/nebu ...   Up      0.0.0.0:49167-&gt;19779/tcp,:::49167-&gt;19779/tcp, 0.0.0.0:49164-&gt;19780/tcp,:::49164-&gt;19780/tcp, 9777/tcp, 9778/tcp, 0.0.0.0:49170-&gt;9779/tcp,:::49170-&gt;9779/tcp, 9780/tcp\n</code></pre> <p>\u5982\u679c\u670d\u52a1\u6709\u5f02\u5e38\uff0c\u7528\u6237\u53ef\u4ee5\u5148\u786e\u8ba4\u5f02\u5e38\u7684\u5bb9\u5668\u540d\u79f0\uff08\u4f8b\u5982<code>nebula-docker-compose_graphd2_1</code>\uff09,</p> <p>\u7136\u540e\u6267\u884c<code>docker ps</code>\u67e5\u770b\u5bf9\u5e94\u7684<code>CONTAINER ID</code>\uff08\u793a\u4f8b\u4e3a<code>2a6c56c405f5</code>)\u3002</p> <pre><code>[nebula-docker-compose]$ docker ps\nCONTAINER ID   IMAGE                               COMMAND                  CREATED          STATUS                    PORTS                                                                                                  NAMES\n2a6c56c405f5   vesoft/nebula-graphd:nightly     \"/usr/local/nebula/b\u2026\"   36 minutes ago   Up 36 minutes (healthy)   0.0.0.0:49230-&gt;9669/tcp, 0.0.0.0:49229-&gt;19669/tcp, 0.0.0.0:49228-&gt;19670/tcp                            nebula-docker-compose_graphd2_1\n7042e0a8e83d   vesoft/nebula-storaged:nightly   \"./bin/nebula-storag\u2026\"   36 minutes ago   Up 36 minutes (healthy)   9777-9778/tcp, 9780/tcp, 0.0.0.0:49227-&gt;9779/tcp, 0.0.0.0:49226-&gt;19779/tcp, 0.0.0.0:49225-&gt;19780/tcp   nebula-docker-compose_storaged2_1\n18e3ea63ad65   vesoft/nebula-storaged:nightly   \"./bin/nebula-storag\u2026\"   36 minutes ago   Up 36 minutes (healthy)   9777-9778/tcp, 9780/tcp, 0.0.0.0:49219-&gt;9779/tcp, 0.0.0.0:49218-&gt;19779/tcp, 0.0.0.0:49217-&gt;19780/tcp   nebula-docker-compose_storaged0_1\n4dcabfe8677a   vesoft/nebula-graphd:nightly     \"/usr/local/nebula/b\u2026\"   36 minutes ago   Up 36 minutes (healthy)   0.0.0.0:49224-&gt;9669/tcp, 0.0.0.0:49223-&gt;19669/tcp, 0.0.0.0:49222-&gt;19670/tcp                            nebula-docker-compose_graphd1_1\na74054c6ae25   vesoft/nebula-graphd:nightly     \"/usr/local/nebula/b\u2026\"   36 minutes ago   Up 36 minutes (healthy)   0.0.0.0:9669-&gt;9669/tcp, 0.0.0.0:49221-&gt;19669/tcp, 0.0.0.0:49220-&gt;19670/tcp                             nebula-docker-compose_graphd_1\n880025a3858c   vesoft/nebula-storaged:nightly   \"./bin/nebula-storag\u2026\"   36 minutes ago   Up 36 minutes (healthy)   9777-9778/tcp, 9780/tcp, 0.0.0.0:49216-&gt;9779/tcp, 0.0.0.0:49215-&gt;19779/tcp, 0.0.0.0:49214-&gt;19780/tcp   nebula-docker-compose_storaged1_1\n45736a32a23a   vesoft/nebula-metad:nightly      \"./bin/nebula-metad \u2026\"   36 minutes ago   Up 36 minutes (healthy)   9560/tcp, 0.0.0.0:49213-&gt;9559/tcp, 0.0.0.0:49212-&gt;19559/tcp, 0.0.0.0:49211-&gt;19560/tcp                  nebula-docker-compose_metad0_1\n3b2c90eb073e   vesoft/nebula-metad:nightly      \"./bin/nebula-metad \u2026\"   36 minutes ago   Up 36 minutes (healthy)   9560/tcp, 0.0.0.0:49207-&gt;9559/tcp, 0.0.0.0:49206-&gt;19559/tcp, 0.0.0.0:49205-&gt;19560/tcp                  nebula-docker-compose_metad2_1\n7bb31b7a5b3f   vesoft/nebula-metad:nightly      \"./bin/nebula-metad \u2026\"   36 minutes ago   Up 36 minutes (healthy)   9560/tcp, 0.0.0.0:49210-&gt;9559/tcp, 0.0.0.0:49209-&gt;19559/tcp, 0.0.0.0:49208-&gt;19560/tcp                  nebula-docker-compose_metad1_1\n</code></pre> <p>\u6700\u540e\u767b\u5f55\u5bb9\u5668\u6392\u67e5\u95ee\u9898</p> <pre><code>[nebula-docker-compose]$ docker exec -it 2a6c56c405f5 bash\n[root@2a6c56c405f5 nebula]#\n</code></pre>"},{"location":"4.deployment-and-installation/2.compile-and-install-nebula-graph/3.deploy-nebula-graph-with-docker-compose/#nebulagraph_3","title":"\u67e5\u770b NebulaGraph \u670d\u52a1\u7684\u6570\u636e\u548c\u65e5\u5fd7","text":"<p>NebulaGraph \u7684\u6240\u6709\u6570\u636e\u548c\u65e5\u5fd7\u90fd\u6301\u4e45\u5316\u5b58\u50a8\u5728<code>nebula-docker-compose/data</code>\u548c<code>nebula-docker-compose/logs</code>\u76ee\u5f55\u4e2d\u3002</p> <p>\u76ee\u5f55\u7684\u7ed3\u6784\u5982\u4e0b\uff1a</p> <pre><code>nebula-docker-compose/\n  |-- docker-compose.yaml\n  \u251c\u2500\u2500 data\n  \u2502\u00a0\u00a0 \u251c\u2500\u2500 meta0\n  \u2502\u00a0\u00a0 \u251c\u2500\u2500 meta1\n  \u2502\u00a0\u00a0 \u251c\u2500\u2500 meta2\n  \u2502\u00a0\u00a0 \u251c\u2500\u2500 storage0\n  \u2502\u00a0\u00a0 \u251c\u2500\u2500 storage1\n  \u2502\u00a0\u00a0 \u2514\u2500\u2500 storage2\n  \u2514\u2500\u2500 logs\n      \u251c\u2500\u2500 graph\n      \u251c\u2500\u2500 graph1\n      \u251c\u2500\u2500 graph2\n      \u251c\u2500\u2500 meta0\n      \u251c\u2500\u2500 meta1\n      \u251c\u2500\u2500 meta2\n      \u251c\u2500\u2500 storage0\n      \u251c\u2500\u2500 storage1\n      \u2514\u2500\u2500 storage2\n</code></pre>"},{"location":"4.deployment-and-installation/2.compile-and-install-nebula-graph/3.deploy-nebula-graph-with-docker-compose/#nebulagraph_4","title":"\u505c\u6b62 NebulaGraph \u670d\u52a1","text":"<p>\u7528\u6237\u53ef\u4ee5\u6267\u884c\u5982\u4e0b\u547d\u4ee4\u505c\u6b62 NebulaGraph \u670d\u52a1\uff1a</p> <pre><code>$ docker-compose down\n</code></pre> <p>\u5982\u679c\u8fd4\u56de\u5982\u4e0b\u4fe1\u606f\uff0c\u8868\u793a\u5df2\u7ecf\u6210\u529f\u505c\u6b62\u670d\u52a1\u3002</p> <pre><code>Stopping nebula-docker-compose_console_1   ... done\nStopping nebula-docker-compose_graphd1_1   ... done\nStopping nebula-docker-compose_graphd_1    ... done\nStopping nebula-docker-compose_graphd2_1   ... done\nStopping nebula-docker-compose_storaged1_1 ... done\nStopping nebula-docker-compose_storaged0_1 ... done\nStopping nebula-docker-compose_storaged2_1 ... done\nStopping nebula-docker-compose_metad2_1    ... done\nStopping nebula-docker-compose_metad0_1    ... done\nStopping nebula-docker-compose_metad1_1    ... done\nRemoving nebula-docker-compose_console_1   ... done\nRemoving nebula-docker-compose_graphd1_1   ... done\nRemoving nebula-docker-compose_graphd_1    ... done\nRemoving nebula-docker-compose_graphd2_1   ... done\nRemoving nebula-docker-compose_storaged1_1 ... done\nRemoving nebula-docker-compose_storaged0_1 ... done\nRemoving nebula-docker-compose_storaged2_1 ... done\nRemoving nebula-docker-compose_metad2_1    ... done\nRemoving nebula-docker-compose_metad0_1    ... done\nRemoving nebula-docker-compose_metad1_1    ... done\nRemoving network nebula-docker-compose_nebula-net\n</code></pre> <p>Danger</p> <p>\u547d\u4ee4<code>docker-compose down -v</code>\u7684\u53c2\u6570<code>-v</code>\u5c06\u4f1a\u5220\u9664\u6240\u6709\u672c\u5730\u7684\u6570\u636e\u3002\u5982\u679c\u4f7f\u7528\u7684\u662f nightly \u7248\u672c\uff0c\u5e76\u4e14\u6709\u4e00\u4e9b\u517c\u5bb9\u6027\u95ee\u9898\uff0c\u8bf7\u5c1d\u8bd5\u8fd9\u4e2a\u547d\u4ee4\u3002</p>"},{"location":"4.deployment-and-installation/2.compile-and-install-nebula-graph/3.deploy-nebula-graph-with-docker-compose/#_2","title":"\u4fee\u6539\u914d\u7f6e","text":"<p>Docker Compose \u90e8\u7f72\u7684 NebulaGraph\uff0c\u914d\u7f6e\u6587\u4ef6\u4f4d\u7f6e\u4e3a<code>nebula-docker-compose/docker-compose.yaml</code>\uff0c\u4fee\u6539\u8be5\u6587\u4ef6\u5185\u7684\u914d\u7f6e\u5e76\u91cd\u542f\u670d\u52a1\u5373\u53ef\u4f7f\u65b0\u914d\u7f6e\u751f\u6548\u3002</p> <p>\u5177\u4f53\u7684\u914d\u7f6e\u8bf4\u660e\u8bf7\u53c2\u89c1\u914d\u7f6e\u7ba1\u7406\u3002</p>"},{"location":"4.deployment-and-installation/2.compile-and-install-nebula-graph/3.deploy-nebula-graph-with-docker-compose/#_3","title":"\u5e38\u89c1\u95ee\u9898","text":""},{"location":"4.deployment-and-installation/2.compile-and-install-nebula-graph/3.deploy-nebula-graph-with-docker-compose/#docker","title":"\u5982\u4f55\u56fa\u5b9a Docker \u6620\u5c04\u5230\u5916\u90e8\u7684\u7aef\u53e3\uff1f","text":"<p>\u5728\u76ee\u5f55<code>nebula-docker-compose</code>\u5185\u4fee\u6539\u6587\u4ef6<code>docker-compose.yaml</code>\uff0c\u5c06\u5bf9\u5e94\u670d\u52a1\u7684<code>ports</code>\u8bbe\u7f6e\u4e3a\u56fa\u5b9a\u6620\u5c04\uff0c\u4f8b\u5982\uff1a</p> <pre><code>graphd:\n    image: vesoft/nebula-graphd:release-3.6\n    ...\n    ports:\n      - 9669:9669\n      - 19669\n      - 19670\n</code></pre> <p><code>9669:9669</code>\u8868\u793a\u5185\u90e8\u7684 9669 \u6620\u5c04\u5230\u5916\u90e8\u7684\u7aef\u53e3\u4e5f\u662f 9669\uff0c\u4e0b\u65b9\u7684<code>19669</code>\u8868\u793a\u5185\u90e8\u7684 19669 \u6620\u5c04\u5230\u5916\u90e8\u7684\u7aef\u53e3\u662f\u968f\u673a\u7684\u3002</p>"},{"location":"4.deployment-and-installation/2.compile-and-install-nebula-graph/3.deploy-nebula-graph-with-docker-compose/#nebulagraph_docker","title":"\u5982\u4f55\u5347\u7ea7/\u66f4\u65b0 NebulaGraph \u670d\u52a1\u7684 Docker \u955c\u50cf\uff1f","text":"<ol> <li> <p>\u5728\u6587\u4ef6<code>nebula-docker-compose/docker-compose.yaml</code>\u4e2d\uff0c\u627e\u5230\u6240\u6709\u670d\u52a1\u7684<code>image</code>\u5e76\u4fee\u6539\u5176\u503c\u4e3a\u76f8\u5e94\u7684\u955c\u50cf\u7248\u672c\u3002</p> </li> <li> <p>\u5728\u76ee\u5f55<code>nebula-docker-compose</code>\u5185\u6267\u884c\u547d\u4ee4<code>docker-compose pull</code>\uff0c\u66f4\u65b0 Graph \u670d\u52a1\u3001Storage \u670d\u52a1\u3001Meta \u670d\u52a1\u548c NebulaGraph Console \u7684\u955c\u50cf\u3002</p> </li> <li> <p>\u6267\u884c\u547d\u4ee4<code>docker-compose up -d</code>\u542f\u52a8 NebulaGraph \u670d\u52a1\u3002</p> </li> <li> <p>\u901a\u8fc7 NebulaGraph Console \u8fde\u63a5 NebulaGraph \u540e\uff0c\u5206\u522b\u6267\u884c\u547d\u4ee4<code>SHOW HOSTS GRAPH</code>\u3001<code>SHOW HOSTS STORAGE</code>\u3001<code>SHOW HOSTS META</code>\u67e5\u770b\u5404\u670d\u52a1\u7248\u672c\u3002</p> </li> </ol>"},{"location":"4.deployment-and-installation/2.compile-and-install-nebula-graph/3.deploy-nebula-graph-with-docker-compose/#docker-compose_pullerror_toomanyrequests","title":"\u6267\u884c\u547d\u4ee4<code>docker-compose pull</code>\u62a5\u9519<code>ERROR: toomanyrequests</code>","text":"<p>\u53ef\u80fd\u9047\u5230\u5982\u4e0b\u9519\u8bef\uff1a</p> <p><code>ERROR: toomanyrequests: You have reached your pull rate limit. You may increase the limit by authenticating and upgrading: https://www.docker.com/increase-rate-limit</code></p> <p>\u4ee5\u4e0a\u9519\u8bef\u8868\u793a\u5df2\u8fbe\u5230 Docker Hub \u7684\u901f\u7387\u9650\u5236\u3002\u89e3\u51b3\u65b9\u6848\u8bf7\u53c2\u89c1 Understanding Docker Hub Rate Limiting\u3002</p>"},{"location":"4.deployment-and-installation/2.compile-and-install-nebula-graph/3.deploy-nebula-graph-with-docker-compose/#nebulagraph_console","title":"\u5982\u4f55\u66f4\u65b0 NebulaGraph Console\uff1f","text":"<p><code>docker-compose pull</code>\u4f1a\u540c\u65f6\u66f4\u65b0 NebulaGraph \u670d\u52a1\u548c NebulaGraph Console\u3002</p>"},{"location":"4.deployment-and-installation/2.compile-and-install-nebula-graph/4.install-nebula-graph-from-tar/","title":"\u4f7f\u7528 tar.gz \u6587\u4ef6\u5b89\u88c5 NebulaGraph","text":"<p>\u7528\u6237\u53ef\u4ee5\u4e0b\u8f7d\u6253\u5305\u597d\u7684 tar.gz \u6587\u4ef6\u5feb\u901f\u5b89\u88c5 NebulaGraph \u3002</p> <p>Note</p> <ul> <li>NebulaGraph \u4ece 2.6.0 \u7248\u672c\u8d77\u63d0\u4f9b tar.gz \u6587\u4ef6\u3002</li> </ul> <ul> <li>\u5f53\u524d\u4ec5\u652f\u6301\u5728 Linux \u7cfb\u7edf\u4e0b\u5b89\u88c5 NebulaGraph\uff0c\u4e14\u4ec5\u652f\u6301 CentOS 7.x\u3001CentOS 8.x\u3001Ubuntu 16.04\u3001Ubuntu 18.04\u3001Ubuntu 20.04 \u64cd\u4f5c\u7cfb\u7edf\u3002</li> </ul> <ul> <li>\u5982\u679c\u7528\u6237\u4f7f\u7528\u7684\u662f\u56fd\u4ea7\u5316\u7684 Linux \u64cd\u4f5c\u7cfb\u7edf\uff0c\u8bf7\u5b89\u88c5 NebulaGraph \u3002 </li> </ul>"},{"location":"4.deployment-and-installation/2.compile-and-install-nebula-graph/4.install-nebula-graph-from-tar/#_1","title":"\u64cd\u4f5c\u6b65\u9aa4","text":"<ol> <li> <p>\u4f7f\u7528\u5982\u4e0b\u5730\u5740\u4e0b\u8f7d NebulaGraph \u7684 tar.gz \u6587\u4ef6\u3002</p> <p>\u4e0b\u8f7d\u524d\u9700\u5c06<code>&lt;release_version&gt;</code>\u66ff\u6362\u4e3a\u9700\u8981\u4e0b\u8f7d\u7684\u7248\u672c\u3002</p> <pre><code>//Centos 7\nhttps://oss-cdn.nebula-graph.com.cn/package/&lt;release_version&gt;/nebula-graph-&lt;release_version&gt;.el7.x86_64.tar.gz\n//Checksum\nhttps://oss-cdn.nebula-graph.com.cn/package/&lt;release_version&gt;/nebula-graph-&lt;release_version&gt;.el7.x86_64.tar.gz.sha256sum.txt\n\n//Centos 8\nhttps://oss-cdn.nebula-graph.com.cn/package/&lt;release_version&gt;/nebula-graph-&lt;release_version&gt;.el8.x86_64.tar.gz\n//Checksum\nhttps://oss-cdn.nebula-graph.com.cn/package/&lt;release_version&gt;/nebula-graph-&lt;release_version&gt;.el8.x86_64.tar.gz.sha256sum.txt\n\n//Ubuntu 1604\nhttps://oss-cdn.nebula-graph.com.cn/package/&lt;release_version&gt;/nebula-graph-&lt;release_version&gt;.ubuntu1604.amd64.tar.gz\n//Checksum\nhttps://oss-cdn.nebula-graph.com.cn/package/&lt;release_version&gt;/nebula-graph-&lt;release_version&gt;.ubuntu1604.amd64.tar.gz.sha256sum.txt\n\n//Ubuntu 1804\nhttps://oss-cdn.nebula-graph.com.cn/package/&lt;release_version&gt;/nebula-graph-&lt;release_version&gt;.ubuntu1804.amd64.tar.gz\n//Checksum\nhttps://oss-cdn.nebula-graph.com.cn/package/&lt;release_version&gt;/nebula-graph-&lt;release_version&gt;.ubuntu1804.amd64.tar.gz.sha256sum.txt\n\n//Ubuntu 2004\nhttps://oss-cdn.nebula-graph.com.cn/package/&lt;release_version&gt;/nebula-graph-&lt;release_version&gt;.ubuntu2004.amd64.tar.gz\n//Checksum\nhttps://oss-cdn.nebula-graph.com.cn/package/&lt;release_version&gt;/nebula-graph-&lt;release_version&gt;.ubuntu2004.amd64.tar.gz.sha256sum.txt\n</code></pre> <p>\u4f8b\u5982\uff0c\u8981\u4e0b\u8f7d\u9002\u7528\u4e8e<code>CentOS 7.5</code>\u7684 NebulaGraph release-3.6 tar.gz \u6587\u4ef6\uff0c\u8fd0\u884c\u4ee5\u4e0b\u547d\u4ee4\uff1a</p> <pre><code>wget https://oss-cdn.nebula-graph.com.cn/package/master/nebula-graph-master.el7.x86_64.tar.gz\n</code></pre> </li> <li> <p>\u89e3\u538b tar.gz \u6587\u4ef6\u5230 NebulaGraph \u5b89\u88c5\u76ee\u5f55\u3002</p> <pre><code>tar -xvzf &lt;tar.gz_file_name&gt; -C &lt;install_path&gt;\n</code></pre> <ul> <li><code>tar.gz_file_name</code>\u8868\u793a tar.gz \u6587\u4ef6\u7684\u540d\u79f0\u3002</li> <li><code>install_path</code>\u8868\u793a\u5b89\u88c5\u8def\u5f84\u3002</li> </ul> <p>\u4f8b\u5982\uff1a</p> <pre><code>tar -xvzf nebula-graph-master.el7.x86_64.tar.gz -C /home/joe/nebula/install\n</code></pre> </li> <li> <p>\u4fee\u6539\u914d\u7f6e\u6587\u4ef6\u540d\u4ee5\u5e94\u7528\u914d\u7f6e\u3002</p> <p>\u8fdb\u5165\u89e3\u538b\u51fa\u7684\u76ee\u5f55\uff0c\u5c06\u5b50\u76ee\u5f55<code>etc</code>\u4e2d\u7684\u6587\u4ef6<code>nebula-graphd.conf.default</code>\u3001<code>nebula-metad.conf.default</code>\u548c<code>nebula-storaged.conf.default</code>\u91cd\u547d\u540d\uff0c\u5220\u9664<code>.default</code>\uff0c\u5373\u53ef\u5e94\u7528 NebulaGraph \u7684\u9ed8\u8ba4\u914d\u7f6e\u3002</p> </li> </ol> <p>Note</p> <p>\u5982\u9700\u4fee\u6539\u66f4\u591a\u914d\u7f6e\uff0c\u53c2\u89c1\u914d\u7f6e\u7ba1\u7406\u3002</p> <p>\u81f3\u6b64\uff0cNebulaGraph \u5b89\u88c5\u5b8c\u6bd5\u3002</p>"},{"location":"4.deployment-and-installation/2.compile-and-install-nebula-graph/4.install-nebula-graph-from-tar/#_2","title":"\u4e0b\u4e00\u6b65","text":"<p>\u7ba1\u7406 NebulaGraph \u670d\u52a1</p>"},{"location":"4.deployment-and-installation/2.compile-and-install-nebula-graph/6.deploy-nebula-graph-with-peripherals/","title":"\u4f7f\u7528\u751f\u6001\u5de5\u5177\u5b89\u88c5 NebulaGraph","text":"<p>\u7528\u6237\u53ef\u4ee5\u4f7f\u7528\u4ee5\u4e0b\u751f\u6001\u5de5\u5177\u5b89\u88c5 NebulaGraph \uff1a</p> <ul> <li>NebulaGraph Operator</li> </ul>"},{"location":"4.deployment-and-installation/2.compile-and-install-nebula-graph/6.deploy-nebula-graph-with-peripherals/#_1","title":"\u5b89\u88c5\u8be6\u60c5","text":"<p>\u4f7f\u7528 NebulaGraph Operator \u5b89\u88c5 NebulaGraph \u7684\u8be6\u60c5\uff0c\u53c2\u89c1\u521b\u5efa NebulaGraph \u96c6\u7fa4\u3002</p>"},{"location":"4.deployment-and-installation/2.compile-and-install-nebula-graph/7.compile-using-docker/","title":"\u4f7f\u7528 Docker \u7f16\u8bd1 NebulaGraph","text":"<p>NebulaGraph \u7684\u6e90\u4ee3\u7801\u662f\u4f7f\u7528 C++ \u7f16\u5199\u7684\uff0c\u7f16\u8bd1 NebulaGraph \u9700\u8981\u5b89\u88c5\u4e00\u4e9b\u4f9d\u8d56\uff0c\u8fd9\u4e9b\u4f9d\u8d56\u53ef\u80fd\u4f1a\u4e0e\u5bbf\u4e3b\u673a\u64cd\u4f5c\u7cfb\u7edf\u7684\u4f9d\u8d56\u51b2\u7a81\uff0c\u5bfc\u81f4\u7f16\u8bd1\u5931\u8d25\u3002\u4e3a\u4e86\u907f\u514d\u8fd9\u79cd\u60c5\u51b5\uff0c\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528 Docker \u6765\u7f16\u8bd1 NebulaGraph\u3002NebulaGraph \u63d0\u4f9b\u6574\u4e2a\u7f16\u8bd1\u73af\u5883\u7684 Docker \u955c\u50cf\uff0c\u53ef\u4ee5\u5e2e\u52a9\u6211\u4eec\u5feb\u901f\u642d\u5efa\u7f16\u8bd1\u73af\u5883\u5e76\u7f16\u8bd1 NebulaGraph\uff0c\u540c\u65f6\u907f\u514d\u4e86\u4e0e\u5bbf\u4e3b\u673a\u64cd\u4f5c\u7cfb\u7edf\u7684\u4f9d\u8d56\u51b2\u7a81\u3002\u672c\u6587\u4ecb\u7ecd\u5982\u4f55\u4f7f\u7528 Docker \u7f16\u8bd1 NebulaGraph \u56fe\u6570\u636e\u5e93\u3002</p>"},{"location":"4.deployment-and-installation/2.compile-and-install-nebula-graph/7.compile-using-docker/#_1","title":"\u51c6\u5907\u5de5\u4f5c","text":"<p>\u5728\u5f00\u59cb\u7f16\u8bd1 NebulaGraph \u4e4b\u524d\uff0c\u786e\u4fdd\u5df2\u7ecf\u5b8c\u6210\u4ee5\u4e0b\u51c6\u5907\u5de5\u4f5c\uff1a</p> <ol> <li> <p>\u5b89\u88c5 Docker\uff1a\u786e\u4fdd\u7528\u6237\u7684\u7cfb\u7edf\u5df2\u7ecf\u5b89\u88c5\u4e86 Docker\u3002</p> </li> <li> <p>\u514b\u9686 NebulaGraph \u6e90\u4ee3\u7801\uff1a\u5c06 NebulaGraph \u7684\u6e90\u4ee3\u7801\u514b\u9686\u5230\u672c\u5730\u3002\u4f60\u53ef\u4ee5\u4f7f\u7528 Git \u547d\u4ee4\u6765\u514b\u9686\u4ee3\u7801\u4ed3\u5e93\uff1a</p> <pre><code>git clone --branch release-3.6 https://github.com/vesoft-inc/nebula.git\n</code></pre> <p>\u8fd9\u5c06\u4f1a\u5c06 NebulaGraph \u7684\u6e90\u4ee3\u7801\u514b\u9686\u5230\u5f53\u524d\u76ee\u5f55\u7684<code>nebula</code>\u5b50\u76ee\u5f55\u4e2d\u3002</p> </li> </ol>"},{"location":"4.deployment-and-installation/2.compile-and-install-nebula-graph/7.compile-using-docker/#_2","title":"\u6b65\u9aa4","text":"<ol> <li> <p>\u62c9\u53d6 NebulaGraph \u7f16\u8bd1\u955c\u50cf\u3002</p> <pre><code>docker pull vesoft/nebula-dev:ubuntu2004\n</code></pre> <p>\u8fd9\u91cc\u6211\u4eec\u4f7f\u7528\u7684\u662f NebulaGraph \u7684\u5b98\u65b9\u7f16\u8bd1\u955c\u50cf\uff0c\u7248\u672c\u53f7\u4e3a<code>ubuntu2004</code>\uff0c\u4f60\u4e5f\u53ef\u4ee5\u6839\u636e\u9700\u8981\u4f7f\u7528\u7279\u5b9a\u7684\u7248\u672c\u53f7\u3002\u8be6\u60c5\u53c2\u89c1nebula-dev-docker\u3002</p> </li> <li> <p>\u8fd0\u884c\u7f16\u8bd1\u5bb9\u5668\u3002</p> <p>\u73b0\u5728\uff0c\u6211\u4eec\u53ef\u4ee5\u5728 Docker \u5bb9\u5668\u4e2d\u7f16\u8bd1 NebulaGraph\u3002\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\uff1a</p> <pre><code>docker run -ti \\\n  --security-opt seccomp=unconfined \\\n  -v \"$PWD\":/home \\\n  -w /home \\\n  --name nebula_dev \\\n  vesoft/nebula-dev:ubuntu2004 \\\n  bash\n</code></pre> <ul> <li><code>--security-opt seccomp=unconfined</code>\uff1a\u4e3a\u4e86\u907f\u514d Docker \u5bb9\u5668\u4e2d\u7684 CMake \u7f16\u8bd1\u8fc7\u7a0b\u4e2d\u51fa\u73b0<code>Killed</code>\u9519\u8bef\uff0c\u4e0d\u9650\u5236\u5bb9\u5668\u8fdb\u7a0b\u53ef\u4ee5\u8fdb\u884c\u7684\u7cfb\u7edf\u8c03\u7528\u3002</li> </ul> <ul> <li><code>-v \"$PWD\":/home</code>\uff1a\u8868\u793a\u5f53\u524d\u7684 NebulaGraph \u4ee3\u7801\u672c\u5730\u7684\u8def\u5f84\u4f1a\u88ab\u6302\u8f7d\u5230\u5bb9\u5668\u5185\u90e8\u7684<code>/home</code>\u76ee\u5f55\u3002</li> </ul> <ul> <li><code>-w /home</code>\uff1a\u5c06\u5bb9\u5668\u7684\u5de5\u4f5c\u76ee\u5f55\u8bbe\u7f6e\u4e3a<code>/home</code>\uff0c\u5728\u5bb9\u5668\u4e2d\u8fd0\u884c\u4efb\u4f55\u547d\u4ee4\u90fd\u5c06\u4ee5\u8be5\u76ee\u5f55\u4f5c\u4e3a\u5f53\u524d\u76ee\u5f55\u3002</li> </ul> <ul> <li><code>--name nebula_dev</code>\uff1a\u4e3a\u5bb9\u5668\u6307\u5b9a\u4e00\u4e2a\u540d\u79f0\uff0c\u65b9\u4fbf\u7ba1\u7406\u548c\u64cd\u4f5c\u3002</li> </ul> <ul> <li><code>vesoft/nebula-dev:ubuntu2004</code>\uff1a\u4f7f\u7528<code>vesoft/nebula-dev</code>\u7f16\u8bd1\u955c\u50cf\u7684<code>ubuntu2004</code>\u7248\u672c\u3002</li> </ul> <ul> <li><code>bash</code>\uff1a\u5728\u5bb9\u5668\u4e2d\u8fd0\u884c<code>bash</code>\u547d\u4ee4\uff0c\u8fdb\u5165\u5bb9\u5668\u7684\u4ea4\u4e92\u5f0f\u7ec8\u7aef\u3002</li> </ul> <p>\u6210\u529f\u8fd0\u884c\u4ee5\u4e0a\u547d\u4ee4\u540e\uff0c\u5c06\u4f1a\u81ea\u52a8\u8fdb\u5165\u5bb9\u5668\u7684\u4ea4\u4e92\u5f0f\u7ec8\u7aef\u3002\u82e5\u9000\u51fa\u5bb9\u5668\uff0c\u53ef\u6267\u884c<code>docker exec -ti nebula_dev bash</code>\u91cd\u65b0\u8fdb\u5165\u5bb9\u5668\u3002</p> </li> <li> <p>\u5728\u5bb9\u5668\u5185\u7f16\u8bd1 NebulaGraph\u3002</p> <ol> <li> <p>\u8fdb\u5165 NebulaGraph \u6e90\u4ee3\u7801\u76ee\u5f55</p> <pre><code>cd nebula\n</code></pre> </li> <li> <p>\u521b\u5efa\u76ee\u5f55build\u5e76\u8fdb\u5165\u8be5\u76ee\u5f55\u3002</p> <pre><code>mkdir build &amp;&amp; cd build\n</code></pre> </li> <li> <p>\u4f7f\u7528 CMake \u751f\u6210 makefile \u6587\u4ef6\u3002</p> <pre><code>cmake -DCMAKE_CXX_COMPILER=$TOOLSET_CLANG_DIR/bin/g++ -DCMAKE_C_COMPILER=$TOOLSET_CLANG_DIR/bin/gcc -DENABLE_WERROR=OFF -DCMAKE_BUILD_TYPE=Debug -DENABLE_TESTING=OFF ..\n</code></pre> <p>\u6709\u5173 CMake \u7684 \u66f4\u591a\u4fe1\u606f\uff0c\u53c2\u89c1 CMake \u53c2\u6570\u3002</p> </li> <li> <p>\u6267\u884c\u7f16\u8bd1\u547d\u4ee4\u3002</p> <pre><code># \u6839\u636e\u670d\u52a1\u5668\u7684\u7a7a\u95f2 CPU \u6838\u5fc3\u6570\uff0c\u8bbe\u7f6e\u5408\u7406\u7684\u5e76\u884c\u7f16\u8bd1\u7684\u7ebf\u7a0b\u6570\u3002\u6bd4\u5982\uff0c\u5982\u679c\u670d\u52a1\u5668\u6709 2 \u4e2a\u7a7a\u95f2 CPU \u6838\u5fc3\uff0c\u53ef\u4ee5\u8bbe\u7f6e\u4e3a make -j2\u3002\nmake -j2\n</code></pre> </li> </ol> <p>\u8fd9\u5c06\u4f1a\u5f00\u59cb\u7f16\u8bd1 NebulaGraph\uff0c\u7f16\u8bd1\u8fc7\u7a0b\u53ef\u80fd\u4f1a\u82b1\u8d39\u4e00\u4e9b\u65f6\u95f4\uff0c\u53d6\u51b3\u4e8e\u7528\u6237\u7684\u7cfb\u7edf\u6027\u80fd\u3002</p> </li> <li> <p>\u5c06\u751f\u4ea7\u7684\u53ef\u6267\u884c\u6587\u4ef6\u548c\u5e93\u6587\u4ef6\u5b89\u88c5\u5230<code>/usr/local/nebula</code>\u76ee\u5f55\u4e0b\u3002</p> <p>\u7f16\u8bd1\u6210\u529f\u540e\uff0c\u5728\u5bb9\u5668\u4e2d\u7684<code>/home/nebula/build</code>\u76ee\u5f55\u4e0b\u5c06\u751f\u6210 NebulaGraph \u7684\u53ef\u6267\u884c\u6587\u4ef6\u548c\u5e93\u6587\u4ef6\u3002\u4e3a\u4e86\u65b9\u4fbf\u7ba1\u7406\uff0c\u6211\u4eec\u53ef\u4ee5\u5c06\u8fd9\u4e9b\u6587\u4ef6\u5b89\u88c5\u5230<code>/usr/local/nebula</code>\u76ee\u5f55\u4e0b\u3002\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\uff1a</p> <pre><code>make install\n</code></pre> </li> </ol> <p>\u5b8c\u6210\u4ee5\u4e0a\u6b65\u9aa4\u540e\uff0cNebulaGraph \u5c06\u4f1a\u88ab\u540c\u6b65\u7f16\u8bd1\u5e76\u5b89\u88c5\u5230\u5bbf\u4e3b\u673a\u7684<code>/usr/local/nebula</code>\u76ee\u5f55\u4e0b\u3002</p>"},{"location":"4.deployment-and-installation/2.compile-and-install-nebula-graph/7.compile-using-docker/#_3","title":"\u540e\u7eed\u6b65\u9aa4","text":"<ul> <li>\u542f\u52a8 NebulaGraph \u670d\u52a1</li> <li>\u8fde\u63a5 NebulaGraph \u670d\u52a1</li> </ul>"},{"location":"4.deployment-and-installation/2.compile-and-install-nebula-graph/deploy-nebula-graph-cluster/","title":"\u4f7f\u7528 RPM/DEB \u5305\u90e8\u7f72 NebulaGraph \u591a\u673a\u96c6\u7fa4","text":"<p>\u672c\u6587\u4ecb\u7ecd\u901a\u8fc7 RPM \u6216 DEB \u6587\u4ef6\u90e8\u7f72\u96c6\u7fa4\u7684\u793a\u4f8b\u3002</p> <p>Note</p> <p>\u7528\u6237\u8fd8\u53ef\u4ee5\u901a\u8fc7\u5b98\u65b9\u5de5\u5177\u90e8\u7f72 NebulaGraph \u591a\u673a\u96c6\u7fa4\u3002\u8be6\u60c5\u53c2\u89c1\u4f7f\u7528\u751f\u6001\u5de5\u5177\u5b89\u88c5\u96c6\u7fa4\u3002</p>"},{"location":"4.deployment-and-installation/2.compile-and-install-nebula-graph/deploy-nebula-graph-cluster/#_1","title":"\u90e8\u7f72\u65b9\u6848","text":"\u673a\u5668\u540d\u79f0 IP \u5730\u5740 graphd \u8fdb\u7a0b\u6570\u91cf storaged \u8fdb\u7a0b\u6570\u91cf metad \u8fdb\u7a0b\u6570\u91cf A 192.168.10.111 1 1 1 B 192.168.10.112 1 1 1 C 192.168.10.113 1 1 1 D 192.168.10.114 1 1 - E 192.168.10.115 1 1 -"},{"location":"4.deployment-and-installation/2.compile-and-install-nebula-graph/deploy-nebula-graph-cluster/#_2","title":"\u524d\u63d0\u6761\u4ef6","text":"<ul> <li>\u51c6\u5907 5 \u53f0\u7528\u4e8e\u90e8\u7f72\u96c6\u7fa4\u7684\u673a\u5668\u3002</li> <li>\u5728\u96c6\u7fa4\u4e2d\u901a\u8fc7 NTP \u670d\u52a1\u540c\u6b65\u65f6\u95f4\u3002</li> </ul>"},{"location":"4.deployment-and-installation/2.compile-and-install-nebula-graph/deploy-nebula-graph-cluster/#_3","title":"\u624b\u52a8\u90e8\u7f72\u6d41\u7a0b","text":""},{"location":"4.deployment-and-installation/2.compile-and-install-nebula-graph/deploy-nebula-graph-cluster/#nebulagraph","title":"\u5b89\u88c5 NebulaGraph","text":"<p>\u5728\u96c6\u7fa4\u7684\u6bcf\u4e00\u53f0\u670d\u52a1\u5668\u4e0a\u90fd\u5b89\u88c5 NebulaGraph\uff0c\u5b89\u88c5\u540e\u6682\u4e0d\u9700\u8981\u542f\u52a8\u670d\u52a1\u3002\u5b89\u88c5\u65b9\u5f0f\u8bf7\u53c2\u89c1\uff1a</p> <ul> <li>\u4f7f\u7528 RPM \u6216 DEB \u5305\u5b89\u88c5 NebulaGraph </li> </ul> <ul> <li>\u4f7f\u7528\u6e90\u7801\u5b89\u88c5 NebulaGraph </li> </ul>"},{"location":"4.deployment-and-installation/2.compile-and-install-nebula-graph/deploy-nebula-graph-cluster/#_4","title":"\u4fee\u6539\u914d\u7f6e\u6587\u4ef6","text":"<p>\u4fee\u6539\u6bcf\u4e2a\u670d\u52a1\u5668\u4e0a\u7684 NebulaGraph \u914d\u7f6e\u6587\u4ef6\u3002</p> <p>NebulaGraph \u7684\u6240\u6709\u914d\u7f6e\u6587\u4ef6\u5747\u4f4d\u4e8e\u5b89\u88c5\u76ee\u5f55\u7684<code>etc</code>\u76ee\u5f55\u5185\uff0c\u5305\u62ec<code>nebula-graphd.conf</code>\u3001<code>nebula-metad.conf</code>\u548c<code>nebula-storaged.conf</code>\uff0c\u7528\u6237\u53ef\u4ee5\u53ea\u4fee\u6539\u6240\u9700\u670d\u52a1\u7684\u914d\u7f6e\u6587\u4ef6\u3002\u5404\u4e2a\u673a\u5668\u9700\u8981\u4fee\u6539\u7684\u914d\u7f6e\u6587\u4ef6\u5982\u4e0b\u3002</p> \u673a\u5668\u540d\u79f0 \u5f85\u4fee\u6539\u914d\u7f6e\u6587\u4ef6 A <code>nebula-graphd.conf</code>\u3001<code>nebula-storaged.conf</code>\u3001<code>nebula-metad.conf</code> B <code>nebula-graphd.conf</code>\u3001<code>nebula-storaged.conf</code>\u3001<code>nebula-metad.conf</code> C <code>nebula-graphd.conf</code>\u3001<code>nebula-storaged.conf</code>\u3001<code>nebula-metad.conf</code> D <code>nebula-graphd.conf</code>\u3001<code>nebula-storaged.conf</code> E <code>nebula-graphd.conf</code>\u3001<code>nebula-storaged.conf</code> <p>\u7528\u6237\u53ef\u4ee5\u53c2\u8003\u5982\u4e0b\u914d\u7f6e\u6587\u4ef6\u7684\u5185\u5bb9\uff0c\u4ec5\u5c55\u793a\u96c6\u7fa4\u901a\u4fe1\u7684\u90e8\u5206\u8bbe\u7f6e\uff0c\u672a\u5c55\u793a\u7684\u5185\u5bb9\u4e3a\u9ed8\u8ba4\u8bbe\u7f6e\uff0c\u4fbf\u4e8e\u7528\u6237\u4e86\u89e3\u96c6\u7fa4\u95f4\u5404\u4e2a\u670d\u52a1\u5668\u7684\u5173\u7cfb\u3002</p> <p>Note</p> <p>\u4e3b\u8981\u4fee\u6539\u7684\u914d\u7f6e\u662f<code>meta_server_addrs</code>\uff0c\u6240\u6709\u914d\u7f6e\u6587\u4ef6\u90fd\u9700\u8981\u586b\u5199\u6240\u6709 Meta \u670d\u52a1\u7684 IP \u5730\u5740\u548c\u7aef\u53e3\uff0c\u540c\u65f6\u9700\u8981\u4fee\u6539<code>local_ip</code>\u4e3a\u673a\u5668\u672c\u8eab\u7684\u8054\u7f51 IP \u5730\u5740\u3002\u914d\u7f6e\u53c2\u6570\u7684\u8be6\u7ec6\u8bf4\u660e\u8bf7\u53c2\u89c1\uff1a</p> <ul> <li>Meta \u670d\u52a1\u914d\u7f6e</li> </ul> <ul> <li>Graph \u670d\u52a1\u914d\u7f6e</li> </ul> <ul> <li>Storage \u670d\u52a1\u914d\u7f6e</li> </ul> <ul> <li> <p>\u673a\u5668 A \u914d\u7f6e</p> <ul> <li> <p><code>nebula-graphd.conf</code></p> <pre><code>########## networking ##########\n# Comma separated Meta Server Addresses\n--meta_server_addrs=192.168.10.111:9559,192.168.10.112:9559,192.168.10.113:9559\n# Local IP used to identify the nebula-graphd process.\n# Change it to an address other than loopback if the service is distributed or\n# will be accessed remotely.\n--local_ip=192.168.10.111\n# Network device to listen on\n--listen_netdev=any\n# Port to listen on\n--port=9669\n</code></pre> </li> </ul> <ul> <li> <p><code>nebula-storaged.conf</code></p> <pre><code>########## networking ##########\n# Comma separated Meta server addresses\n--meta_server_addrs=192.168.10.111:9559,192.168.10.112:9559,192.168.10.113:9559\n# Local IP used to identify the nebula-storaged process.\n# Change it to an address other than loopback if the service is distributed or\n# will be accessed remotely.\n--local_ip=192.168.10.111\n# Storage daemon listening port\n--port=9779\n</code></pre> </li> </ul> <ul> <li> <p><code>nebula-metad.conf</code></p> <pre><code>########## networking ##########\n# Comma separated Meta Server addresses\n--meta_server_addrs=192.168.10.111:9559,192.168.10.112:9559,192.168.10.113:9559\n# Local IP used to identify the nebula-metad process.\n# Change it to an address other than loopback if the service is distributed or\n# will be accessed remotely.\n--local_ip=192.168.10.111\n# Meta daemon listening port\n--port=9559\n</code></pre> </li> </ul> </li> </ul> <ul> <li> <p>\u673a\u5668 B \u914d\u7f6e</p> <ul> <li> <p><code>nebula-graphd.conf</code></p> <pre><code>########## networking ##########\n# Comma separated Meta Server Addresses\n--meta_server_addrs=192.168.10.111:9559,192.168.10.112:9559,192.168.10.113:9559\n# Local IP used to identify the nebula-graphd process.\n# Change it to an address other than loopback if the service is distributed or\n# will be accessed remotely.\n--local_ip=192.168.10.112\n# Network device to listen on\n--listen_netdev=any\n# Port to listen on\n--port=9669\n</code></pre> </li> </ul> <ul> <li> <p><code>nebula-storaged.conf</code></p> <pre><code>########## networking ##########\n# Comma separated Meta server addresses\n--meta_server_addrs=192.168.10.111:9559,192.168.10.112:9559,192.168.10.113:9559\n# Local IP used to identify the nebula-storaged process.\n# Change it to an address other than loopback if the service is distributed or\n# will be accessed remotely.\n--local_ip=192.168.10.112\n# Storage daemon listening port\n--port=9779\n</code></pre> </li> </ul> <ul> <li> <p><code>nebula-metad.conf</code></p> <pre><code>########## networking ##########\n# Comma separated Meta Server addresses\n--meta_server_addrs=192.168.10.111:9559,192.168.10.112:9559,192.168.10.113:9559\n# Local IP used to identify the nebula-metad process.\n# Change it to an address other than loopback if the service is distributed or\n# will be accessed remotely.\n--local_ip=192.168.10.112\n# Meta daemon listening port\n--port=9559\n</code></pre> </li> </ul> </li> </ul> <ul> <li> <p>\u673a\u5668 C \u914d\u7f6e</p> <ul> <li> <p><code>nebula-graphd.conf</code></p> <pre><code>########## networking ##########\n# Comma separated Meta Server Addresses\n--meta_server_addrs=192.168.10.111:9559,192.168.10.112:9559,192.168.10.113:9559\n# Local IP used to identify the nebula-graphd process.\n# Change it to an address other than loopback if the service is distributed or\n# will be accessed remotely.\n--local_ip=192.168.10.113\n# Network device to listen on\n--listen_netdev=any\n# Port to listen on\n--port=9669\n</code></pre> </li> </ul> <ul> <li> <p><code>nebula-storaged.conf</code></p> <pre><code>########## networking ##########\n# Comma separated Meta server addresses\n--meta_server_addrs=192.168.10.111:9559,192.168.10.112:9559,192.168.10.113:9559\n# Local IP used to identify the nebula-storaged process.\n# Change it to an address other than loopback if the service is distributed or\n# will be accessed remotely.\n--local_ip=192.168.10.113\n# Storage daemon listening port\n--port=9779\n</code></pre> </li> </ul> <ul> <li> <p><code>nebula-metad.conf</code></p> <pre><code>########## networking ##########\n# Comma separated Meta Server addresses\n--meta_server_addrs=192.168.10.111:9559,192.168.10.112:9559,192.168.10.113:9559\n# Local IP used to identify the nebula-metad process.\n# Change it to an address other than loopback if the service is distributed or\n# will be accessed remotely.\n--local_ip=192.168.10.113\n# Meta daemon listening port\n--port=9559\n</code></pre> </li> </ul> </li> </ul> <ul> <li> <p>\u673a\u5668 D \u914d\u7f6e</p> <ul> <li> <p><code>nebula-graphd.conf</code></p> <pre><code>########## networking ##########\n# Comma separated Meta Server Addresses\n--meta_server_addrs=192.168.10.111:9559,192.168.10.112:9559,192.168.10.113:9559\n# Local IP used to identify the nebula-graphd process.\n# Change it to an address other than loopback if the service is distributed or\n# will be accessed remotely.\n--local_ip=192.168.10.114\n# Network device to listen on\n--listen_netdev=any\n# Port to listen on\n--port=9669\n</code></pre> </li> </ul> <ul> <li> <p><code>nebula-storaged.conf</code></p> <pre><code>########## networking ##########\n# Comma separated Meta server addresses\n--meta_server_addrs=192.168.10.111:9559,192.168.10.112:9559,192.168.10.113:9559\n# Local IP used to identify the nebula-storaged process.\n# Change it to an address other than loopback if the service is distributed or\n# will be accessed remotely.\n--local_ip=192.168.10.114\n# Storage daemon listening port\n--port=9779\n</code></pre> </li> </ul> </li> </ul> <ul> <li> <p>\u673a\u5668 E \u914d\u7f6e</p> <ul> <li> <p><code>nebula-graphd.conf</code></p> <pre><code>########## networking ##########\n# Comma separated Meta Server Addresses\n--meta_server_addrs=192.168.10.111:9559,192.168.10.112:9559,192.168.10.113:9559\n# Local IP used to identify the nebula-graphd process.\n# Change it to an address other than loopback if the service is distributed or\n# will be accessed remotely.\n--local_ip=192.168.10.115\n# Network device to listen on\n--listen_netdev=any\n# Port to listen on\n--port=9669\n</code></pre> </li> </ul> <ul> <li> <p><code>nebula-storaged.conf</code></p> <pre><code>########## networking ##########\n# Comma separated Meta server addresses\n--meta_server_addrs=192.168.10.111:9559,192.168.10.112:9559,192.168.10.113:9559\n# Local IP used to identify the nebula-storaged process.\n# Change it to an address other than loopback if the service is distributed or\n# will be accessed remotely.\n--local_ip=192.168.10.115\n# Storage daemon listening port\n--port=9779\n</code></pre> </li> </ul> </li> </ul>"},{"location":"4.deployment-and-installation/2.compile-and-install-nebula-graph/deploy-nebula-graph-cluster/#_5","title":"\u542f\u52a8\u96c6\u7fa4","text":"<p>\u4f9d\u6b21\u542f\u52a8\u5404\u4e2a\u670d\u52a1\u5668\u4e0a\u7684\u5bf9\u5e94\u8fdb\u7a0b\u3002</p> \u673a\u5668\u540d\u79f0 \u5f85\u542f\u52a8\u7684\u8fdb\u7a0b A graphd\u3001storaged\u3001metad B graphd\u3001storaged\u3001metad C graphd\u3001storaged\u3001metad D graphd\u3001storaged E graphd\u3001storaged <p>\u542f\u52a8 NebulaGraph \u8fdb\u7a0b\u7684\u547d\u4ee4\u5982\u4e0b\uff1a</p> <pre><code>sudo /usr/local/nebula/scripts/nebula.service start &lt;metad|graphd|storaged|all&gt;\n</code></pre> <p>Note</p> <ul> <li>\u786e\u4fdd\u6bcf\u4e2a\u670d\u52a1\u5668\u4e2d\u7684\u5bf9\u5e94\u8fdb\u7a0b\u90fd\u5df2\u542f\u52a8\uff0c\u5426\u5219\u670d\u52a1\u5c06\u542f\u52a8\u5931\u8d25\u3002</li> </ul> <ul> <li>\u5f53\u9700\u90fd\u542f\u52a8 graphd\u3001storaged \u548c metad \u65f6\uff0c\u53ef\u4ee5\u7528 all \u4ee3\u66ff\u3002</li> </ul> <ul> <li><code>/usr/local/nebula</code>\u662f NebulaGraph \u7684\u9ed8\u8ba4\u5b89\u88c5\u8def\u5f84\uff0c\u5982\u679c\u4fee\u6539\u8fc7\u5b89\u88c5\u8def\u5f84\uff0c\u8bf7\u4f7f\u7528\u5b9e\u9645\u8def\u5f84\u3002\u66f4\u591a\u542f\u505c\u670d\u52a1\u7684\u5185\u5bb9\uff0c\u8bf7\u53c2\u89c1\u7ba1\u7406 NebulaGraph \u670d\u52a1\u3002</li> </ul>"},{"location":"4.deployment-and-installation/2.compile-and-install-nebula-graph/deploy-nebula-graph-cluster/#_6","title":"\u68c0\u67e5\u96c6\u7fa4","text":"<p>\u5b89\u88c5\u539f\u751f CLI \u5ba2\u6237\u7aef NebulaGraph Console\uff0c\u7136\u540e\u8fde\u63a5\u4efb\u4f55\u4e00\u4e2a\u5df2\u542f\u52a8 graphd \u8fdb\u7a0b\u7684\u673a\u5668\uff0c\u6dfb\u52a0 Storage \u4e3b\u673a\uff0c\u7136\u540e\u6267\u884c\u547d\u4ee4<code>SHOW HOSTS</code>\u68c0\u67e5\u96c6\u7fa4\u72b6\u6001\u3002\u4f8b\u5982\uff1a</p> <pre><code>$ ./nebula-console --addr 192.168.10.111 --port 9669 -u root -p nebula\n\n2021/05/25 01:41:19 [INFO] connection pool is initialized successfully\nWelcome to NebulaGraph!\n\n&gt; ADD HOSTS 192.168.10.111:9779, 192.168.10.112:9779, 192.168.10.113:9779, 192.168.10.114:9779, 192.168.10.115:9779;\n&gt; SHOW HOSTS;\n+------------------+------+----------+--------------+----------------------+------------------------+----------------------+\n| Host             | Port | Status   | Leader count | Leader distribution  | Partition distribution | Version              |\n+------------------+------+----------+--------------+----------------------+------------------------+----------------------+\n| \"192.168.10.111\" | 9779 | \"ONLINE\" | 0            | \"No valid partition\" | \"No valid partition\"   | \"master\" |\n| \"192.168.10.112\" | 9779 | \"ONLINE\" | 0            | \"No valid partition\" | \"No valid partition\"   | \"master\" |\n| \"192.168.10.113\" | 9779 | \"ONLINE\" | 0            | \"No valid partition\" | \"No valid partition\"   | \"master\" |\n| \"192.168.10.114\" | 9779 | \"ONLINE\" | 0            | \"No valid partition\" | \"No valid partition\"   | \"master\" |\n| \"192.168.10.115\" | 9779 | \"ONLINE\" | 0            | \"No valid partition\" | \"No valid partition\"   | \"master\" |\n+------------------+------+----------+--------------+----------------------+------------------------+----------------------+\n</code></pre>"},{"location":"4.deployment-and-installation/3.upgrade-nebula-graph/upgrade-nebula-comm/","title":"\u5347\u7ea7 NebulaGraph \u81f3 master \u7248\u672c","text":"<p>\u672c\u6587\u4ee5 NebulaGraph 2.6.1 \u7248\u672c\u5347\u7ea7\u5230 master \u7248\u672c\u4e3a\u4f8b\uff0c\u4ecb\u7ecd NebulaGraph 2.x\u30013.x \u7248\u672c\u5347\u7ea7\u5230 master \u7248\u672c\u7684\u65b9\u6cd5\u3002</p>"},{"location":"4.deployment-and-installation/3.upgrade-nebula-graph/upgrade-nebula-comm/#_1","title":"\u9002\u7528\u7248\u672c","text":"<p>\u672c\u6587\u9002\u7528\u4e8e\u5c06 NebulaGraph \u4ece 2.5.0 \u53ca\u4e4b\u540e\u7684 2.x\u30013.x \u7248\u672c\u5347\u7ea7\u5230 master \u7248\u672c\u3002\u4e0d\u9002\u7528\u4e8e 2.5.0 \u4e4b\u524d\u7684\u5386\u53f2\u7248\u672c\uff08\u542b 1.x \u7248\u672c\uff09\u3002\u5982\u9700\u5347\u7ea7\u5386\u53f2\u7248\u672c\uff0c\u5c06\u5176\u6839\u636e\u6700\u65b0\u7684 2.x \u7248\u672c\u6587\u6863\u5347\u7ea7\u5230 2.5 \u7248\u672c\uff0c\u7136\u540e\u6839\u636e\u672c\u6587\u7684\u8bf4\u660e\u5347\u7ea7\u5230 master \u7248\u672c\u3002</p> <p>Caution</p> <p>\u5982\u9700\u4ece 2.0.0 \u4e4b\u524d\u7684\u7248\u672c\uff08\u542b 1.x \u7248\u672c\uff09\u5347\u7ea7\u5230 master\uff0c\u8fd8\u9700\u627e\u5230 master \u7248\u672c\u6587\u4ef6\u4e2d<code>share/resources</code>\u76ee\u5f55\u4e0b\u7684<code>date_time_zonespec.csv</code>\u6587\u4ef6\uff0c\u5c06\u5176\u590d\u5236\u5230 NebulaGraph \u5b89\u88c5\u8def\u5f84\u4e0b\u7684\u76f8\u540c\u76ee\u5f55\u5185\u3002\u4e5f\u53ef\u4ece GitHub \u4e0b\u8f7d\u8be5\u6587\u4ef6\u3002</p> <ul> <li>\u4e0d\u652f\u6301\u8f6e\u8f6c\u70ed\u5347\u7ea7\uff0c\u9700\u5b8c\u5168\u505c\u6b62\u6574\u4e2a\u96c6\u7fa4\u670d\u52a1\u3002</li> </ul> <ul> <li>\u672a\u63d0\u4f9b\u5347\u7ea7\u811a\u672c\uff0c\u9700\u624b\u52a8\u5728\u6bcf\u53f0\u670d\u52a1\u5668\u4e0a\u4f9d\u6b21\u6267\u884c\u3002</li> </ul> <ul> <li>\u4e0d\u652f\u6301\u57fa\u4e8e Docker \u5bb9\u5668\uff08\u5305\u62ec Docker Swarm\u3001Docker Compose\u3001K8s\uff09\u7684\u5347\u7ea7\u3002</li> </ul> <ul> <li>\u5fc5\u987b\u5728\u539f\u670d\u52a1\u5668\u4e0a\u539f\u5730\u5347\u7ea7\uff0c\u4e0d\u80fd\u4fee\u6539\u539f\u673a\u5668\u7684 IP \u5730\u5740\u3001\u914d\u7f6e\u6587\u4ef6\uff0c\u4e0d\u53ef\u66f4\u6539\u96c6\u7fa4\u62d3\u6251\u3002</li> </ul> <ul> <li>\u5df2\u77e5\u4f1a\u9020\u6210\u6570\u636e\u4e22\u5931\u7684 4 \u79cd\u573a\u666f\uff0c\u548c alter schema \u4ee5\u53ca default value \u76f8\u5173\uff0c\u53c2\u89c1 github known issues\u3002</li> </ul> <ul> <li>\u6570\u636e\u76ee\u5f55\u4e0d\u8981\u4f7f\u7528\u8f6f\u8fde\u63a5\u5207\u6362\uff0c\u907f\u514d\u5931\u6548\u3002</li> </ul> <ul> <li>\u90e8\u5206\u5347\u7ea7\u64cd\u4f5c\u9700\u8981\u6709 sudo \u6743\u9650\u3002</li> </ul>"},{"location":"4.deployment-and-installation/3.upgrade-nebula-graph/upgrade-nebula-comm/#_2","title":"\u5347\u7ea7\u5f71\u54cd","text":"<ul> <li> <p>\u5ba2\u6237\u7aef\u517c\u5bb9</p> <p>\u5347\u7ea7\u540e\u65e7\u7248\u672c\u5ba2\u6237\u7aef\u5c06\u65e0\u6cd5\u8fde\u63a5 NebulaGraph\uff0c\u9700\u5c06\u6240\u6709\u5ba2\u6237\u7aef\u90fd\u5347\u7ea7\u5230\u517c\u5bb9 NebulaGraph master \u7684\u7248\u672c\u3002</p> </li> </ul> <ul> <li> <p>\u914d\u7f6e\u53d8\u5316</p> <p>\u5c11\u6570\u914d\u7f6e\u53c2\u6570\u53d1\u751f\u6539\u53d8\uff0c\u8be6\u60c5\u53c2\u8003\u7248\u672c\u53d1\u5e03\u8bf4\u660e\u548c\u53c2\u6570\u6587\u6863\u3002</p> </li> </ul> <ul> <li> <p>\u8bed\u6cd5\u517c\u5bb9</p> <p>nGQL \u8bed\u6cd5\u6709\u90e8\u5206\u4e0d\u517c\u5bb9\uff1a</p> <ul> <li>\u7981\u7528<code>YIELD</code>\u5b50\u53e5\u8fd4\u56de\u81ea\u5b9a\u4e49\u53d8\u91cf\u3002</li> </ul> <ul> <li><code>FETCH</code>\u3001<code>GO</code>\u3001<code>LOOKUP</code>\u3001<code>FIND PATH</code>\u3001<code>GET SUBGRAPH</code>\u8bed\u53e5\u4e2d\u5fc5\u987b\u6dfb\u52a0<code>YIELD</code>\u5b50\u53e5\u3002</li> </ul> <ul> <li>MATCH \u8bed\u53e5\u4e2d\u83b7\u53d6\u70b9\u5c5e\u6027\u65f6\uff0c\u5fc5\u987b\u6307\u5b9a Tag\uff0c\u4f8b\u5982\u4ece<code>return v.name</code>\u53d8\u4e3a<code>return v.player.name</code>\u3002</li> </ul> </li> </ul> <ul> <li> <p>\u5168\u6587\u7d22\u5f15</p> <p>\u5728\u5347\u7ea7\u90e8\u7f72\u4e86\u5168\u6587\u7d22\u5f15\u7684 NebulaGraph \u524d\uff0c\u9700\u8981\u624b\u52a8\u5220\u9664 Elasticsearch (ES) \u4e2d\u7684\u5168\u6587\u7d22\u5f15\u3002\u5728\u5347\u7ea7\u540e\u9700\u8981\u91cd\u65b0\u4f7f\u7528<code>SIGN IN</code>\u8bed\u53e5\u767b\u5f55 ES \u5e76\u91cd\u65b0\u521b\u5efa\u5168\u6587\u7d22\u5f15\u3002\u7528\u6237\u53ef\u901a\u8fc7 cURL \u547d\u4ee4\u624b\u52a8\u5220\u9664 ES \u4e2d\u5168\u6587\u7d22\u5f15\u3002\u547d\u4ee4\u4e3a<code>curl -XDELETE -u &lt;es_username&gt;:&lt;es_password&gt; '&lt;es_access_ip&gt;:&lt;port&gt;/&lt;fullindex_name&gt;'</code>\uff0c\u4f8b\u5982<code>curl -XDELETE -u elastic:elastic 'http://192.168.8.223:9200/nebula_index_2534'</code>\u3002\u5982\u679c ES \u6ca1\u6709\u8bbe\u7f6e\u7528\u6237\u540d\u53ca\u5bc6\u7801\uff0c\u5219\u65e0\u9700\u6307\u5b9a<code>-u</code>\u9009\u9879\u3002 </p> </li> </ul> <p>Caution</p> <p>\u53ef\u80fd\u5b58\u5728\u5176\u5b83\u6682\u672a\u53d1\u73b0\u7684\u5f71\u54cd\uff0c\u5efa\u8bae\u5347\u7ea7\u524d\u8be6\u7ec6\u67e5\u770b\u7248\u672c\u53d1\u5e03\u8bf4\u660e\u548c\u4ea7\u54c1\u624b\u518c\uff0c\u5e76\u5bc6\u5207\u5173\u6ce8\u8bba\u575b\u4e0e GitHub \u7684\u6700\u65b0\u52a8\u6001\u3002</p>"},{"location":"4.deployment-and-installation/3.upgrade-nebula-graph/upgrade-nebula-comm/#_3","title":"\u5347\u7ea7\u51c6\u5907","text":"<ul> <li> <p>\u6839\u636e\u64cd\u4f5c\u7cfb\u7edf\u548c\u67b6\u6784\u4e0b\u8f7d NebulaGraph master \u7248\u672c\u7684\u5305\u6587\u4ef6\u5e76\u89e3\u538b\uff0c\u5347\u7ea7\u8fc7\u7a0b\u4e2d\u9700\u8981\u5176\u4e2d\u7684\u4e8c\u8fdb\u5236\u6587\u4ef6\u3002\u4e0b\u8f7d\u5730\u5740\u53c2\u89c1 Download \u9875\u9762\u3002</p> <p>Note</p> <p>\u7f16\u8bd1\u6e90\u7801\u6216\u8005\u4e0b\u8f7d RPM/DEB\u3001TAR \u5305\u90fd\u53ef\u4ee5\u83b7\u53d6\u65b0\u7248\u4e8c\u8fdb\u5236\u6587\u4ef6\u3002</p> </li> </ul> <ul> <li> <p>\u6839\u636e Storage \u548c Meta \u670d\u52a1\u914d\u7f6e\u4e2d<code>data_path</code>\u53c2\u6570\u7684\u503c\u627e\u5230\u6570\u636e\u6587\u4ef6\u7684\u4f4d\u7f6e\uff0c\u5e76\u5907\u4efd\u6570\u636e\u3002\u9ed8\u8ba4\u8def\u5f84\u4e3a<code>nebula/data/storage</code>\u548c<code>nebula/data/meta</code>\u3002</p> <p>Danger</p> <p>\u5347\u7ea7\u65f6\u4e0d\u4f1a\u81ea\u52a8\u5907\u4efd\u539f\u6709\u6570\u636e\u3002\u52a1\u5fc5\u624b\u52a8\u5907\u4efd\u6570\u636e\uff0c\u9632\u6b62\u4e22\u5931\u3002</p> </li> </ul> <ul> <li>\u5907\u4efd\u914d\u7f6e\u6587\u4ef6\u3002</li> </ul> <ul> <li> <p>\u7edf\u8ba1\u6240\u6709\u56fe\u7a7a\u95f4\u5347\u7ea7\u524d\u7684\u6570\u636e\u91cf\uff0c\u4f9b\u5347\u7ea7\u540e\u6bd4\u8f83\u3002\u7edf\u8ba1\u65b9\u6cd5\u5982\u4e0b\uff1a</p> <ol> <li>\u8fd0\u884c<code>SUBMIT JOB STATS</code>\u3002</li> <li>\u8fd0\u884c<code>SHOW JOBS</code>\u5e76\u8bb0\u5f55\u8fd4\u56de\u7ed3\u679c\u3002</li> </ol> </li> </ul>"},{"location":"4.deployment-and-installation/3.upgrade-nebula-graph/upgrade-nebula-comm/#_4","title":"\u5347\u7ea7\u6b65\u9aa4","text":"<ol> <li> <p>\u505c\u6b62\u6240\u6709 NebulaGraph \u670d\u52a1\u3002</p> <pre><code>&lt;nebula_install_path&gt;/scripts/nebula.service stop all\n</code></pre> <p><code>nebula_install_path</code>\u4ee3\u8868 NebulaGraph \u7684\u5b89\u88c5\u76ee\u5f55\u3002</p> <p><code>storaged</code> \u8fdb\u7a0b flush \u6570\u636e\u8981\u7b49\u5f85\u7ea6 1 \u5206\u949f\u3002\u8fd0\u884c\u547d\u4ee4\u540e\u53ef\u7ee7\u7eed\u8fd0\u884c<code>nebula.service status all</code>\u547d\u4ee4\u4ee5\u786e\u8ba4\u6240\u6709\u670d\u52a1\u90fd\u5df2\u505c\u6b62\u3002\u542f\u52a8\u548c\u505c\u6b62\u670d\u52a1\u7684\u8be6\u7ec6\u8bf4\u660e\u53c2\u89c1\u7ba1\u7406\u670d\u52a1\u3002</p> <p>Note</p> <p>\u5982\u679c\u8d85\u8fc7 20 \u5206\u949f\u4e0d\u80fd\u505c\u6b62\u670d\u52a1\uff0c\u653e\u5f03\u672c\u6b21\u5347\u7ea7\uff0c\u5728\u8bba\u575b\u6216 GitHub \u63d0\u95ee\u3002</p> <p>Caution</p> <p>\u4ece 3.0.0 \u5f00\u59cb\uff0c\u652f\u6301\u63d2\u5165\u65e0 Tag \u7684\u70b9\u3002\u5982\u679c\u7528\u6237\u9700\u8981\u4fdd\u7559\u65e0 Tag \u7684\u70b9\uff0c\u5728\u96c6\u7fa4\u5185\u6240\u6709 Graph \u670d\u52a1\u7684\u914d\u7f6e\u6587\u4ef6\uff08<code>nebula-graphd.conf</code>\uff09\u4e2d\u65b0\u589e<code>--graph_use_vertex_key=true</code>\uff1b\u5728\u6240\u6709 Storage \u670d\u52a1\u7684\u914d\u7f6e\u6587\u4ef6\uff08<code>nebula-storaged.conf</code>\uff09\u4e2d\u65b0\u589e<code>--use_vertex_key=true</code>\u3002</p> </li> <li> <p>\u5728\u5347\u7ea7\u51c6\u5907\u4e2d\u4e0b\u8f7d\u7684\u5305\u7684\u76ee\u7684\u8def\u5f84\u4e0b\uff0c\u7528\u6b64\u5904<code>bin</code>\u76ee\u5f55\u4e2d\u7684\u65b0\u7248\u4e8c\u8fdb\u5236\u6587\u4ef6\u66ff\u6362 NebulaGraph \u5b89\u88c5\u8def\u5f84\u4e0b<code>bin</code>\u76ee\u5f55\u4e2d\u7684\u65e7\u7248\u4e8c\u8fdb\u5236\u6587\u4ef6\u3002</p> <p>Note</p> <p>\u6bcf\u53f0\u90e8\u7f72\u4e86 NebulaGraph \u670d\u52a1\u7684\u673a\u5668\u4e0a\u90fd\u8981\u66f4\u65b0\u76f8\u5e94\u670d\u52a1\u7684\u4e8c\u8fdb\u5236\u6587\u4ef6\u3002</p> </li> <li> <p>\u7f16\u8f91\u6240\u6709 Graph \u670d\u52a1\u7684\u914d\u7f6e\u6587\u4ef6\uff0c\u4fee\u6539\u4ee5\u4e0b\u53c2\u6570\u4ee5\u9002\u5e94\u65b0\u7248\u672c\u7684\u53d6\u503c\u8303\u56f4\u3002\u5982\u53c2\u6570\u503c\u5df2\u5728\u89c4\u5b9a\u8303\u56f4\u5185\uff0c\u5ffd\u7565\u8be5\u6b65\u9aa4\u3002     </p> <ul> <li>\u4e3a<code>session_idle_timeout_secs</code>\u53c2\u6570\u8bbe\u7f6e\u4e00\u4e2a\u5728 [1,604800] \u533a\u95f4\u7684\u503c\uff0c\u63a8\u8350\u503c\u4e3a 28800\u3002</li> <li>\u4e3a<code>client_idle_timeout_secs</code>\u53c2\u6570\u8bbe\u7f6e\u4e00\u4e2a\u5728 [1,604800] \u533a\u95f4\u7684\u503c\uff0c\u63a8\u8350\u503c\u4e3a 28800\u3002</li> </ul> <p>\u8fd9\u4e9b\u53c2\u6570\u5728 2.x \u7248\u672c\u4e2d\u7684\u9ed8\u8ba4\u503c\u4e0d\u5728\u65b0\u7248\u672c\u7684\u53d6\u503c\u8303\u56f4\u5185\uff0c\u5982\u4e0d\u4fee\u6539\u4f1a\u5347\u7ea7\u5931\u8d25\u3002\u8be6\u7ec6\u53c2\u6570\u8bf4\u660e\u53c2\u89c1Graph \u670d\u52a1\u914d\u7f6e\u3002</p> </li> <li> <p>\u542f\u52a8\u6240\u6709 Meta \u670d\u52a1\u3002</p> <pre><code>&lt;nebula_install_path&gt;/scripts/nebula-metad.service start\n</code></pre> <p>\u542f\u52a8\u540e\uff0cMeta \u670d\u52a1\u9009\u4e3e leader\u3002\u8be5\u8fc7\u7a0b\u8017\u65f6\u6570\u79d2\u3002</p> <p>\u542f\u52a8\u540e\u53ef\u4ee5\u4efb\u610f\u542f\u52a8\u4e00\u4e2a Graph \u670d\u52a1\u8282\u70b9\uff0c\u4f7f\u7528 NebulaGraph \u8fde\u63a5\u8be5\u8282\u70b9\u5e76\u8fd0\u884c<code>SHOW HOSTS meta</code>\u548c<code>SHOW META LEADER</code>\uff0c\u5982\u679c\u80fd\u591f\u6b63\u5e38\u8fd4\u56de Meta \u8282\u70b9\u7684\u72b6\u6001\uff0c\u5219 Meta \u670d\u52a1\u542f\u52a8\u6210\u529f\u3002</p> <p>Note</p> <p>\u5982\u679c\u542f\u52a8\u5f02\u5e38\uff0c\u653e\u5f03\u672c\u6b21\u5347\u7ea7\uff0c\u5e76\u5728\u8bba\u575b\u6216 GitHub \u63d0\u95ee\u3002</p> </li> <li> <p>\u542f\u52a8\u6240\u6709 Graph \u548c Storage \u670d\u52a1\u3002</p> <p>Note</p> <p>\u5982\u679c\u542f\u52a8\u5f02\u5e38\uff0c\u653e\u5f03\u672c\u6b21\u5347\u7ea7\uff0c\u5e76\u5728\u8bba\u575b\u6216 GitHub \u63d0\u95ee\u3002</p> </li> <li> <p>\u8fde\u63a5\u65b0\u7248 NebulaGraph\uff0c\u9a8c\u8bc1\u670d\u52a1\u662f\u5426\u53ef\u7528\u3001\u6570\u636e\u662f\u5426\u6b63\u5e38\u3002\u8fde\u63a5\u65b9\u6cd5\u53c2\u89c1\u8fde\u63a5\u670d\u52a1\u3002</p> <p>\u76ee\u524d\u5c1a\u65e0\u6709\u6548\u65b9\u5f0f\u5224\u65ad\u5347\u7ea7\u662f\u5426\u5b8c\u5168\u6210\u529f\uff0c\u53ef\u7528\u4e8e\u6d4b\u8bd5\u7684\u53c2\u8003\u547d\u4ee4\u5982\u4e0b\uff1a</p> <pre><code>nebula&gt; SHOW HOSTS;\nnebula&gt; SHOW HOSTS storage;\nnebula&gt; SHOW SPACES;\nnebula&gt; USE &lt;space_name&gt;\nnebula&gt; SHOW PARTS;\nnebula&gt; SUBMIT JOB STATS;\nnebula&gt; SHOW STATS;\nnebula&gt; MATCH (v) RETURN v LIMIT 5;\n</code></pre> <p>\u4e5f\u53ef\u6839\u636e master \u7248\u672c\u7684\u65b0\u529f\u80fd\u6d4b\u8bd5\uff0c\u65b0\u529f\u80fd\u5217\u8868\u53c2\u89c1\u53d1\u5e03\u8bf4\u660e\u3002</p> </li> </ol>"},{"location":"4.deployment-and-installation/3.upgrade-nebula-graph/upgrade-nebula-comm/#_5","title":"\u5347\u7ea7\u5931\u8d25\u56de\u6eda","text":"<p>\u5982\u679c\u5347\u7ea7\u5931\u8d25\uff0c\u505c\u6b62\u65b0\u7248\u672c\u7684\u6240\u6709\u670d\u52a1\uff0c\u4ece\u5907\u4efd\u4e2d\u6062\u590d\u914d\u7f6e\u6587\u4ef6\u548c\u4e8c\u8fdb\u5236\u6587\u4ef6\uff0c\u542f\u52a8\u5386\u53f2\u7248\u672c\u7684\u670d\u52a1\u3002</p> <p>\u6240\u6709\u5468\u8fb9\u5ba2\u6237\u7aef\u4e5f\u5207\u6362\u4e3a\u65e7\u7248\u3002</p>"},{"location":"4.deployment-and-installation/3.upgrade-nebula-graph/upgrade-nebula-comm/#faq","title":"FAQ","text":""},{"location":"4.deployment-and-installation/3.upgrade-nebula-graph/upgrade-nebula-comm/#_6","title":"\u5347\u7ea7\u8fc7\u7a0b\u4e2d\u662f\u5426\u53ef\u4ee5\u901a\u8fc7\u5ba2\u6237\u7aef\u5199\u5165\u6570\u636e\uff1f","text":"<p>\u4e0d\u53ef\u4ee5\u3002\u5347\u7ea7\u8fc7\u7a0b\u4e2d\u9700\u8981\u505c\u6b62\u6240\u6709\u670d\u52a1\u3002</p>"},{"location":"4.deployment-and-installation/3.upgrade-nebula-graph/upgrade-nebula-comm/#space_0_not_found","title":"\u5347\u7ea7\u8fc7\u7a0b\u4e2d\u51fa\u73b0<code>Space 0 not found</code>\u3002","text":"<p>\u5f53\u5347\u7ea7\u8fc7\u7a0b\u4e2d\u51fa\u73b0<code>Space 0 not found</code>\u544a\u8b66\u4fe1\u606f\u65f6\uff0c\u7528\u6237\u53ef\u4ee5\u5ffd\u7565\u8fd9\u4e2a\u4fe1\u606f\u3002\u5347\u7ea7\u8fc7\u7a0b\u4f1a\u4ece\u78c1\u76d8\u8bfb\u53d6\u6240\u6709 Space ID\uff0c\u800c<code>0</code>\uff08\u8def\u5f84\u4e3a<code>&lt;nebula_storagepath&gt;/data/storage/nebula/0</code>\uff09\u5e76\u4e0d\u4f1a\u5b58\u5728\u78c1\u76d8\u4e0a\u3002Space <code>0</code> \u7528\u6765\u5b58\u50a8 Storage \u670d\u52a1\u7684\u5143\u4fe1\u606f\uff0c\u5e76\u4e0d\u5305\u542b\u7528\u6237\u6570\u636e\uff0c\u56e0\u6b64\u4e0d\u4f1a\u5f71\u54cd\u5347\u7ea7\u3002</p>"},{"location":"4.deployment-and-installation/3.upgrade-nebula-graph/upgrade-nebula-comm/#graph_storage","title":"\u5982\u679c\u67d0\u53f0\u673a\u5668\u53ea\u6709 Graph \u670d\u52a1\uff0c\u6ca1\u6709 Storage \u670d\u52a1\uff0c\u5982\u4f55\u5347\u7ea7\uff1f","text":"<p>\u53ea\u9700\u8981\u5347\u7ea7 Graph \u670d\u52a1\u5bf9\u5e94\u7684\u4e8c\u8fdb\u5236\u6587\u4ef6\u548c\u914d\u7f6e\u6587\u4ef6\u3002</p>"},{"location":"4.deployment-and-installation/3.upgrade-nebula-graph/upgrade-nebula-comm/#permission_denied","title":"\u64cd\u4f5c\u62a5\u9519 <code>Permission denied</code>\u3002","text":"<p>\u90e8\u5206\u547d\u4ee4\u9700\u8981\u6709 sudo \u6743\u9650\u3002</p>"},{"location":"4.deployment-and-installation/3.upgrade-nebula-graph/upgrade-nebula-comm/#_7","title":"\u662f\u5426\u6709\u5de5\u5177\u6216\u8005\u529e\u6cd5\u9a8c\u8bc1\u65b0\u65e7\u7248\u672c\u6570\u636e\u662f\u5426\u4e00\u81f4\uff1f","text":"<p>\u6ca1\u6709\u3002\u5982\u679c\u53ea\u662f\u68c0\u67e5\u6570\u636e\u91cf\uff0c\u53ef\u4ee5\u5728\u5347\u7ea7\u5b8c\u6210\u540e\u518d\u6b21\u8fd0\u884c<code>SUBMIT JOB STATS</code>\u548c<code>SHOW STATS</code>\u7edf\u8ba1\u6570\u636e\u91cf\uff0c\u5e76\u4e0e\u5347\u7ea7\u4e4b\u524d\u505a\u5bf9\u6bd4\u3002</p>"},{"location":"4.deployment-and-installation/3.upgrade-nebula-graph/upgrade-nebula-comm/#storage_offlineleader_count0","title":"Storage <code>OFFLINE</code>\u5e76\u4e14<code>Leader count</code>\u662f<code>0</code>\u600e\u4e48\u5904\u7406\uff1f","text":"<p>\u8fd0\u884c\u4ee5\u4e0b\u547d\u4ee4\u624b\u52a8\u6dfb\u52a0 Storage \u4e3b\u673a\uff1a</p> <pre><code>ADD HOSTS &lt;ip&gt;:&lt;port&gt;[, &lt;ip&gt;:&lt;port&gt; ...];\n</code></pre> <p>\u4f8b\u5982\uff1a</p> <pre><code>ADD HOSTS 192.168.10.100:9779, 192.168.10.101:9779, 192.168.10.102:9779;\n</code></pre> <p>\u5982\u679c\u6709\u591a\u4e2a Meta \u670d\u52a1\u8282\u70b9\uff0c\u624b\u52a8<code>ADD HOSTS</code>\u4e4b\u540e\uff0c\u90e8\u5206 Storage \u8282\u70b9\u9700\u7b49\u5f85\u6570\u4e2a\u5fc3\u8df3\uff08<code>heartbeat_interval_secs</code>\uff09\u7684\u65f6\u95f4\u624d\u80fd\u6b63\u5e38\u8fde\u63a5\u5230\u96c6\u7fa4\u3002</p> <p>\u5982\u679c\u6dfb\u52a0 Storage \u4e3b\u673a\u540e\u95ee\u9898\u4ecd\u7136\u5b58\u5728\uff0c\u5728\u8bba\u575b\u6216 GitHub \u63d0\u95ee\u3002</p>"},{"location":"4.deployment-and-installation/3.upgrade-nebula-graph/upgrade-nebula-comm/#show_jobs_job_id_job","title":"\u4e3a\u4ec0\u4e48\u5347\u7ea7\u540e\u7528<code>SHOW JOBS</code>\u67e5\u8be2\u5230\u7684 Job \u7684 ID \u4e0e\u5347\u7ea7\u524d\u4e00\u6837\uff0c\u4f46 Job \u540d\u79f0\u7b49\u4fe1\u606f\u4e0d\u540c\u4e86\uff1f","text":"<p>NebulaGraph 2.5.0 \u7248\u672c\u8c03\u6574\u4e86 Job \u7684\u5b9a\u4e49\uff0c\u8be6\u60c5\u53c2\u89c1 Pull request\u3002\u5982\u679c\u662f\u4ece 2.5.0 \u4e4b\u524d\u7684\u7248\u672c\u5347\u7ea7\uff0c\u4f1a\u51fa\u73b0\u8be5\u95ee\u9898\u3002</p>"},{"location":"4.deployment-and-installation/3.upgrade-nebula-graph/upgrade-nebula-comm/#_8","title":"\u6709\u54ea\u4e9b\u8bed\u6cd5\u4e0d\u517c\u5bb9 ?","text":"<p>A: \u53c2\u89c1Release Note Incompatibility \u90e8\u5206\u3002</p>"},{"location":"4.deployment-and-installation/6.deploy-text-based-index/1.text-based-index-restrictions/","title":"\u5168\u6587\u7d22\u5f15\u9650\u5236","text":"<p>\u672c\u6587\u4ecb\u7ecd\u5168\u6587\u7d22\u5f15\u7684\u9650\u5236\uff0c\u8bf7\u5728\u4f7f\u7528\u5168\u6587\u7d22\u5f15\u524d\u4ed4\u7ec6\u9605\u8bfb\u3002</p> <p>Caution</p> <p>3.6.0 \u7248\u672c\u91cd\u505a\u4e86\u5168\u6587\u7d22\u5f15\u529f\u80fd\uff0c\u4e0d\u517c\u5bb9\u4e4b\u524d\u7248\u672c\u7684\u5168\u6587\u7d22\u5f15\u3002\u5982\u679c\u4f60\u60f3\u7ee7\u7eed\u4f7f\u7528\u901a\u914d\u7b26\u3001\u6b63\u5219\u3001\u6a21\u7cca\u5339\u914d\u7b49\u65b9\u5f0f\uff0c\u6709\u5982\u4e0b 3 \u79cd\u65b9\u5f0f\uff1a</p> <ul> <li>\u5220\u9664\u539f\u6709\u5168\u6587\u7d22\u5f15\uff0c\u4f7f\u7528\u65b0\u7684\u65b9\u5f0f\u91cd\u5efa\u5168\u6587\u7d22\u5f15\uff0c\u4f7f\u7528\u65b0\u7684\u67e5\u8be2\u8bed\u6cd5\u3002</li> <li>\u5220\u9664\u539f\u6709\u5168\u6587\u7d22\u5f15\uff0c\u76f4\u63a5\u7528 NebulaGraph \u7684\u539f\u751f\u7d22\u5f15\u548c\u5b57\u7b26\u4e32\u8fd0\u7b97\u7b26\u3002</li> <li>\u7ee7\u7eed\u4f7f\u7528\u4e4b\u524d\u7248\u672c\u7684 NebulaGraph \u53ca\u5176\u5168\u6587\u7d22\u5f15\u529f\u80fd\u3002</li> </ul> <p>\u5168\u6587\u7d22\u5f15\u6709\u5982\u4e0b\u9650\u5236\uff1a</p> <ul> <li>\u5168\u6587\u7d22\u5f15\u5f53\u524d\u4ec5\u652f\u6301<code>LOOKUP</code>\u8bed\u53e5\u3002</li> </ul> <ul> <li>\u5168\u6587\u7d22\u5f15\u540d\u79f0\u53ea\u80fd\u5305\u542b\u6570\u5b57\u3001\u5c0f\u5199\u5b57\u6bcd\u3001\u4e0b\u5212\u7ebf\u3002</li> </ul> <ul> <li>\u4e0d\u540c\u56fe\u7a7a\u95f4\u5185\u7684\u5168\u6587\u7d22\u5f15\u540d\u79f0\u4e0d\u80fd\u91cd\u590d\u3002</li> </ul> <ul> <li>\u67e5\u8be2\u9ed8\u8ba4\u8fd4\u56de 10 \u6761\u6570\u636e\u3002\u53ef\u4ee5\u4f7f\u7528<code>LIMIT</code>\u5b50\u53e5\u8fd4\u56de\u66f4\u591a\u6570\u636e\uff0c\u6700\u591a\u53ef\u4ee5\u8fd4\u56de 10000 \u6761\u3002\u53ef\u4ee5\u4fee\u6539 Elasticsearch \u7684\u53c2\u6570\u8c03\u6574\u6700\u5927\u8fd4\u56de\u6761\u6570\u3002</li> </ul> <ul> <li>\u5982\u679c Tag/Edge type \u4e0a\u5b58\u5728\u5168\u6587\u7d22\u5f15\uff0c\u65e0\u6cd5\u5220\u9664\u6216\u4fee\u6539 Tag/Edge type\u3002</li> </ul> <ul> <li>\u5c5e\u6027\u7684\u7c7b\u578b\u5fc5\u987b\u4e3a<code>STRING</code>\u6216<code>FIXED_STRING</code>\u3002</li> </ul> <ul> <li>\u5168\u6587\u7d22\u5f15\u4e0d\u652f\u6301\u591a\u4e2a Tag/Edge type \u7684\u641c\u7d22\u3002</li> </ul> <ul> <li>\u5168\u6587\u7d22\u5f15\u4e0d\u652f\u6301\u641c\u7d22\u5c5e\u6027\u503c\u4e3a<code>NULL</code>\u7684\u5c5e\u6027\u3002</li> </ul> <ul> <li>\u4e0d\u652f\u6301\u4fee\u6539 Elasticsearch \u4e2d\u7684\u7d22\u5f15\uff0c\u53ea\u80fd\u5220\u9664\u91cd\u5efa\u3002</li> </ul> <ul> <li>\u4e0d\u652f\u6301\u4fee\u6539\u5206\u8bcd\u5668\uff0c\u9700\u8981\u5220\u9664\u7d22\u5f15\u6570\u636e\u540e\u91cd\u5efa\u7d22\u5f15\u65f6\u6307\u5b9a\u3002</li> </ul> <ul> <li>\u786e\u4fdd\u540c\u65f6\u542f\u52a8\u4e86 Elasticsearch \u96c6\u7fa4\u548c NebulaGraph\uff0c\u5426\u5219\u53ef\u80fd\u5bfc\u81f4 Elasticsearch \u96c6\u7fa4\u5199\u5165\u7684\u6570\u636e\u4e0d\u5b8c\u6574\u3002</li> </ul> <ul> <li>\u4ece\u5199\u5165 NebulaGraph\uff0c\u5230\u5199\u5165 listener\uff0c\u518d\u5230\u5199\u5165 Elasticsearch \u5e76\u521b\u5efa\u7d22\u5f15\u53ef\u80fd\u9700\u8981\u4e00\u6bb5\u65f6\u95f4\u3002\u5982\u679c\u8bbf\u95ee\u5168\u6587\u7d22\u5f15\u65f6\u8fd4\u56de\u672a\u627e\u5230\u7d22\u5f15\uff0c\u53ef\u68c0\u67e5\u7d22\u5f15\u4efb\u52a1\u7684\u72b6\u6001\u3002</li> </ul> <ul> <li>\u4f7f\u7528 K8s \u65b9\u5f0f\u90e8\u7f72\u7684 NebulaGraph \u96c6\u7fa4\u4e0d\u652f\u6301\u81ea\u52a8\u90e8\u7f72\u5168\u6587\u7d22\u5f15\uff0c\u4f46\u652f\u6301\u624b\u52a8\u90e8\u7f72\u3002</li> </ul>"},{"location":"4.deployment-and-installation/6.deploy-text-based-index/2.deploy-es/","title":"\u90e8\u7f72\u5168\u6587\u7d22\u5f15","text":"<p>NebulaGraph \u7684\u5168\u6587\u7d22\u5f15\u662f\u57fa\u4e8e Elasticsearch \u5b9e\u73b0\uff0c\u8fd9\u610f\u5473\u7740\u7528\u6237\u53ef\u4ee5\u4f7f\u7528 Elasticsearch \u5168\u6587\u67e5\u8be2\u8bed\u8a00\u6765\u68c0\u7d22\u60f3\u8981\u7684\u5185\u5bb9\u3002\u5168\u6587\u7d22\u5f15\u7531\u5185\u7f6e\u7684\u8fdb\u7a0b\u7ba1\u7406\uff0c\u5f53 listener \u96c6\u7fa4\u548c Elasticsearch \u96c6\u7fa4\u90e8\u7f72\u540e\uff0c\u5185\u7f6e\u7684\u8fdb\u7a0b\u53ea\u80fd\u4e3a\u6570\u636e\u7c7b\u578b\u4e3a\u5b9a\u957f\u5b57\u7b26\u4e32\u6216\u53d8\u957f\u5b57\u7b26\u4e32\u7684\u5c5e\u6027\u521b\u5efa\u5168\u6587\u7d22\u5f15\u3002</p>"},{"location":"4.deployment-and-installation/6.deploy-text-based-index/2.deploy-es/#_2","title":"\u6ce8\u610f\u4e8b\u9879","text":"<p>\u4f7f\u7528\u5168\u6587\u7d22\u5f15\u524d\uff0c\u8bf7\u786e\u8ba4\u5df2\u7ecf\u4e86\u89e3\u5168\u6587\u7d22\u5f15\u7684\u4f7f\u7528\u9650\u5236\u3002</p>"},{"location":"4.deployment-and-installation/6.deploy-text-based-index/2.deploy-es/#elasticsearch","title":"\u90e8\u7f72 Elasticsearch \u96c6\u7fa4","text":"<p>\u90e8\u7f72 Elasticsearch \u96c6\u7fa4\u8bf7\u53c2\u89c1 Kubernetes \u5b89\u88c5 Elasticsearch \u6216\u5355\u673a\u5b89\u88c5 Elasticsearch\u3002\u76ee\u524d\u4ec5\u652f\u6301 7.x \u7248\u672c\u7684 Elasticsearch\u3002</p> <p>Note</p> <p>\u4e3a\u4e86\u652f\u6301\u5916\u7f51\u8bbf\u95ee Elasticsearch\uff0c\u8bf7\u5c06<code>config/elasticsearch.yml</code>\u4e2d\u7684<code>network.host</code>\u8bbe\u7f6e\u4e3a<code>0.0.0.0</code>\u3002</p> <p>\u7528\u6237\u53ef\u4ee5\u914d\u7f6e Elasticsearch \u6765\u6ee1\u8db3\u4e1a\u52a1\u9700\u6c42\uff0c\u5982\u679c\u9700\u8981\u5b9a\u5236 Elasticsearch\uff0c\u8bf7\u53c2\u89c1 Elasticsearch \u5b98\u65b9\u6587\u6863\u3002</p>"},{"location":"4.deployment-and-installation/6.deploy-text-based-index/2.deploy-es/#_3","title":"\u767b\u5f55\u6587\u672c\u641c\u7d22\u5ba2\u6237\u7aef","text":"<p>\u90e8\u7f72 Elasticsearch \u96c6\u7fa4\u4e4b\u540e\uff0c\u53ef\u4ee5\u4f7f\u7528<code>SIGN IN</code>\u8bed\u53e5\u767b\u5f55 Elasticsearch \u5ba2\u6237\u7aef\u3002\u5fc5\u987b\u4f7f\u7528 Elasticsearch \u914d\u7f6e\u6587\u4ef6\u4e2d\u7684 IP \u5730\u5740\u548c\u7aef\u53e3\u624d\u80fd\u6b63\u5e38\u8fde\u63a5\uff0c\u540c\u65f6\u767b\u5f55\u591a\u4e2a\u5ba2\u6237\u7aef\uff0c\u8bf7\u5728\u591a\u4e2a<code>elastic_ip:port</code>\u4e4b\u95f4\u7528\u82f1\u6587\u9017\u53f7\uff08,\uff09\u5206\u9694\u3002</p>"},{"location":"4.deployment-and-installation/6.deploy-text-based-index/2.deploy-es/#_4","title":"\u8bed\u6cd5","text":"<pre><code>SIGN IN TEXT SERVICE (&lt;elastic_ip:port&gt;, {HTTP | HTTPS} [,\"&lt;username&gt;\", \"&lt;password&gt;\"]) [, (&lt;elastic_ip:port&gt;, ...)];\n</code></pre>"},{"location":"4.deployment-and-installation/6.deploy-text-based-index/2.deploy-es/#_5","title":"\u793a\u4f8b","text":"<pre><code>nebula&gt; SIGN IN TEXT SERVICE (192.168.8.100:9200, HTTP);\n</code></pre> <p>Note</p> <p>Elasticsearch \u9ed8\u8ba4\u6ca1\u6709\u7528\u6237\u540d\u548c\u5bc6\u7801\uff0c\u5982\u679c\u8bbe\u7f6e\u4e86\u7528\u6237\u540d\u548c\u5bc6\u7801\uff0c\u8bf7\u5728<code>SIGN IN</code>\u8bed\u53e5\u4e2d\u6307\u5b9a\u3002</p> <p>Caution</p> <p>Elasticsearch \u5ba2\u6237\u7aef\u53ea\u80fd\u767b\u5f55\u4e00\u6b21\uff0c\u5982\u6709\u4fee\u6539\uff0c\u9700\u8981<code>SIGN OUT</code>\u540e\u91cd\u65b0<code>SIGN IN</code>\uff0c\u4e14\u5ba2\u6237\u7aef\u5bf9\u5168\u5c40\u751f\u6548\uff0c\u591a\u4e2a\u56fe\u7a7a\u95f4\u5171\u4eab\u76f8\u540c\u7684 Elasticsearch \u5ba2\u6237\u7aef\u3002</p>"},{"location":"4.deployment-and-installation/6.deploy-text-based-index/2.deploy-es/#_6","title":"\u663e\u793a\u6587\u672c\u641c\u7d22\u5ba2\u6237\u7aef","text":"<p><code>SHOW TEXT SEARCH CLIENTS</code>\u8bed\u53e5\u53ef\u4ee5\u5217\u51fa\u6587\u672c\u641c\u7d22\u5ba2\u6237\u7aef\u3002</p>"},{"location":"4.deployment-and-installation/6.deploy-text-based-index/2.deploy-es/#_7","title":"\u8bed\u6cd5","text":"<pre><code>SHOW TEXT SEARCH CLIENTS;\n</code></pre>"},{"location":"4.deployment-and-installation/6.deploy-text-based-index/2.deploy-es/#_8","title":"\u793a\u4f8b","text":"<pre><code>nebula&gt; SHOW TEXT SEARCH CLIENTS;\n+-----------------+-----------------+------+\n| Type            | Host            | Port |\n+-----------------+-----------------+------+\n| \"ELASTICSEARCH\" | \"192.168.8.100\" | 9200 |\n+-----------------+-----------------+------+\n</code></pre>"},{"location":"4.deployment-and-installation/6.deploy-text-based-index/2.deploy-es/#_9","title":"\u9000\u51fa\u6587\u672c\u641c\u7d22\u5ba2\u6237\u7aef","text":"<p><code>SIGN OUT TEXT SERVICE</code>\u8bed\u53e5\u53ef\u4ee5\u9000\u51fa\u6240\u6709\u6587\u672c\u641c\u7d22\u5ba2\u6237\u7aef\u3002</p>"},{"location":"4.deployment-and-installation/6.deploy-text-based-index/2.deploy-es/#_10","title":"\u8bed\u6cd5","text":"<pre><code>SIGN OUT TEXT SERVICE;\n</code></pre>"},{"location":"4.deployment-and-installation/6.deploy-text-based-index/2.deploy-es/#_11","title":"\u793a\u4f8b","text":"<pre><code>nebula&gt; SIGN OUT TEXT SERVICE;\n</code></pre>"},{"location":"4.deployment-and-installation/6.deploy-text-based-index/3.deploy-listener/","title":"\u90e8\u7f72 Raft listener","text":"<p>\u5168\u6587\u7d22\u5f15\u7684\u6570\u636e\u662f\u5f02\u6b65\u5199\u5165 Elasticsearch \u96c6\u7fa4\u7684\u3002\u6d41\u7a0b\u662f\u901a\u8fc7 Storage \u670d\u52a1\u7684 Raft listener\uff08\u7b80\u79f0 listener\uff09\u8fd9\u4e2a\u5355\u72ec\u90e8\u7f72\u7684\u8fdb\u7a0b\uff0c\u4ece Storage \u670d\u52a1\u8bfb\u53d6\u6570\u636e\uff0c\u7136\u540e\u5c06\u5b83\u4eec\u5199\u5165 Elasticsearch \u96c6\u7fa4\u3002</p>"},{"location":"4.deployment-and-installation/6.deploy-text-based-index/3.deploy-listener/#_1","title":"\u524d\u63d0\u6761\u4ef6","text":"<ul> <li>\u5df2\u7ecf\u4e86\u89e3\u5168\u6587\u7d22\u5f15\u7684\u4f7f\u7528\u9650\u5236\u3002</li> </ul> <ul> <li>\u5df2\u7ecf\u90e8\u7f72 NebulaGraph \u96c6\u7fa4\u3002</li> </ul> <ul> <li>\u5b8c\u6210\u90e8\u7f72 Elasticsearch \u96c6\u7fa4\u3002</li> </ul> <ul> <li>\u51c6\u5907\u4e00\u53f0\u6216\u8005\u591a\u53f0\u670d\u52a1\u5668\uff0c\u4ee5\u90e8\u7f72 Raft listener\u3002</li> </ul>"},{"location":"4.deployment-and-installation/6.deploy-text-based-index/3.deploy-listener/#_2","title":"\u6ce8\u610f\u4e8b\u9879","text":"<ul> <li>\u8bf7\u4fdd\u8bc1 NebulaGraph \u5404\u670d\u52a1\uff08Metad\u3001Storaged\u3001Graphd\u3001listener\uff09\u6709\u76f8\u540c\u7684\u7248\u672c\u3002</li> </ul> <ul> <li>\u8bf7\u4fdd\u8bc1 listener \u6240\u5728\u673a\u5668\u7684\u65f6\u533a\u4e0e NebulaGraph \u5404\u670d\u52a1\u6240\u5728\u673a\u5668\u7684\u65f6\u533a\u4e00\u81f4\u3002</li> </ul> <ul> <li>\u53ea\u80fd\u4e3a\u4e00\u4e2a\u56fe\u7a7a\u95f4\u4e00\u6b21\u6027\u6dfb\u52a0\u6240\u6709\u7684 listener \u673a\u5668\u3002\u5c1d\u8bd5\u5411\u5df2\u7ecf\u5b58\u5728\u6709 listener \u7684\u56fe\u7a7a\u95f4\u518d\u6dfb\u52a0\u65b0 listener \u4f1a\u5931\u8d25\u3002\u56e0\u6b64\uff0c\u9700\u5728\u4e00\u4e2a\u547d\u4ee4\u8bed\u53e5\u91cc\u5b8c\u6574\u5730\u6dfb\u52a0\u5168\u90e8\u7684 listener\u3002</li> </ul>"},{"location":"4.deployment-and-installation/6.deploy-text-based-index/3.deploy-listener/#_3","title":"\u90e8\u7f72\u6d41\u7a0b","text":""},{"location":"4.deployment-and-installation/6.deploy-text-based-index/3.deploy-listener/#listener","title":"\u7b2c\u4e00\u6b65\uff1a\u5b89\u88c5 listener \u670d\u52a1","text":"<p>listener \u670d\u52a1\u4e0e storaged \u670d\u52a1\u4f7f\u7528\u76f8\u540c\u7684\u4e8c\u8fdb\u5236\u6587\u4ef6\uff0c\u4f46\u662f\u4e8c\u8005\u914d\u7f6e\u6587\u4ef6\u4e0d\u540c\uff0c\u8fdb\u7a0b\u4f7f\u7528\u7aef\u53e3\u4e5f\u4e0d\u540c\u3002\u6211\u4eec\u5728\u6240\u6709\u9700\u8981\u90e8\u7f72 listener \u7684\u670d\u52a1\u5668\u4e0a\u90fd\u5b89\u88c5 NebulaGraph\uff0c\u4f46\u662f\u4e0d\u542f\u52a8\u670d\u52a1\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1\u4f7f\u7528 RPM \u6216 DEB \u5b89\u88c5\u5305\u5b89\u88c5 NebulaGraph \u3002</p>"},{"location":"4.deployment-and-installation/6.deploy-text-based-index/3.deploy-listener/#listener_1","title":"\u7b2c\u4e8c\u6b65\uff1a\u51c6\u5907 listener \u7684\u914d\u7f6e\u6587\u4ef6","text":"<p>\u5728<code>etc</code>\u76ee\u5f55\u5185\u5c06<code>nebula-storaged-listener.conf.default</code>\u6216<code>nebula-storaged-listener.conf.production</code>\u53bb\u6389\u540e\u7f00\u547d\u540d\u4e3a<code>nebula-storaged-listener.conf</code>\uff0c\u7136\u540e\u4fee\u6539\u914d\u7f6e\u5185\u5bb9\u3002</p> <p>\u5927\u90e8\u5206\u914d\u7f6e\u4e0e Storage \u670d\u52a1\u7684\u914d\u7f6e\u6587\u4ef6\u76f8\u540c\uff0c\u672c\u6587\u4ec5\u4ecb\u7ecd\u5dee\u5f02\u90e8\u5206\u3002</p> \u540d\u79f0 \u9884\u8bbe\u503c \u8bf4\u660e <code>daemonize</code> <code>true</code> \u662f\u5426\u542f\u52a8\u5b88\u62a4\u8fdb\u7a0b\u3002 <code>pid_file</code> <code>pids/nebula-storaged-listener.pid</code> \u8bb0\u5f55\u8fdb\u7a0b ID \u7684\u6587\u4ef6\u3002 <code>meta_server_addrs</code> - \u5168\u90e8 Meta \u670d\u52a1\u7684 IP\uff08\u6216\u4e3b\u673a\u540d\uff09\u548c\u7aef\u53e3\u3002\u591a\u4e2a Meta \u670d\u52a1\u7528\u82f1\u6587\u9017\u53f7\uff08,\uff09\u5206\u9694\u3002 <code>local_ip</code> - listener \u670d\u52a1\u7684 IP\uff08\u6216\u4e3b\u673a\u540d\uff09\u3002\u8bf7\u4f7f\u7528\u771f\u5b9e\u7684 listener \u673a\u5668 IP \u66ff\u6362<code>127.0.0.1</code>\u3002 <code>port</code> - listener \u670d\u52a1\u7684 RPC \u5b88\u62a4\u8fdb\u7a0b\u76d1\u542c\u7aef\u53e3\u3002 <code>heartbeat_interval_secs</code> <code>10</code> Meta \u670d\u52a1\u7684\u5fc3\u8df3\u95f4\u9694\u3002\u5355\u4f4d\uff1a\u79d2\uff08s\uff09\u3002 <code>listener_path</code> <code>data/listener</code> listener \u7684 WAL \u76ee\u5f55\u3002\u53ea\u5141\u8bb8\u4f7f\u7528\u4e00\u4e2a\u76ee\u5f55\u3002 <code>data_path</code> <code>data</code> \u51fa\u4e8e\u517c\u5bb9\u6027\u8003\u8651\uff0c\u53ef\u4ee5\u5ffd\u7565\u6b64\u53c2\u6570\u3002\u586b\u5145\u4e00\u4e2a\u9ed8\u8ba4\u503c<code>data</code>\u3002 <code>part_man_type</code> <code>memory</code> \u90e8\u4ef6\u7ba1\u7406\u5668\u7c7b\u578b\uff0c\u53ef\u9009\u503c\u4e3a<code>memory</code>\u548c<code>meta</code>\u3002 <code>rocksdb_batch_size</code> <code>4096</code> \u6279\u5904\u7406\u64cd\u4f5c\u7684\u9ed8\u8ba4\u4fdd\u7559\u5b57\u8282\u3002 <code>rocksdb_block_cache</code> <code>4</code> BlockBasedTable \u7684\u9ed8\u8ba4\u5757\u7f13\u5b58\u5927\u5c0f\u3002\u5355\u4f4d\uff1a\u5146\u5b57\u8282\uff08MB\uff09\u3002 <code>engine_type</code> <code>rocksdb</code> \u5b58\u50a8\u5f15\u64ce\u7c7b\u578b\uff0c\u4f8b\u5982<code>rocksdb</code>\u3001<code>memory</code>\u7b49\u3002 <code>part_type</code> <code>simple</code> \u90e8\u4ef6\u7c7b\u578b\uff0c\u4f8b\u5982<code>simple</code>\u3001<code>consensus</code>\u7b49\u3002"},{"location":"4.deployment-and-installation/6.deploy-text-based-index/3.deploy-listener/#listener_2","title":"\u7b2c\u4e09\u6b65\uff1a\u542f\u52a8 listener","text":"<p>\u5728\u9700\u8981\u90e8\u7f72 listener \u96c6\u7fa4\u7684\u5b89\u88c5\u76ee\u5f55\u4e0b\uff0c\u6267\u884c\u5982\u4e0b\u547d\u4ee4\u542f\u52a8 listener\uff1a</p> <pre><code>./bin/nebula-storaged --flagfile etc/nebula-storaged-listener.conf\n</code></pre>"},{"location":"4.deployment-and-installation/6.deploy-text-based-index/3.deploy-listener/#listener_nebulagraph","title":"\u7b2c\u56db\u6b65\uff1a\u6dfb\u52a0 listener \u5230 NebulaGraph \u96c6\u7fa4","text":"<p>\u7528\u547d\u4ee4\u884c\u8fde\u63a5\u5230 NebulaGraph \uff0c\u7136\u540e\u6267\u884c <code>USE &lt;space&gt;</code> \u8fdb\u5165\u9700\u8981\u521b\u5efa\u5168\u6587\u7d22\u5f15\u7684\u56fe\u7a7a\u95f4\u3002\u7136\u540e\u6267\u884c\u5982\u4e0b\u547d\u4ee4\u6dfb\u52a0 listener\uff1a</p> <pre><code>ADD LISTENER ELASTICSEARCH &lt;listener_ip:port&gt; [,&lt;listener_ip:port&gt;, ...]\n</code></pre> <p>Warning</p> <p>listener \u5fc5\u987b\u4f7f\u7528\u771f\u5b9e\u7684 IP \u5730\u5740\u3002</p> <p>\u8bf7\u5728\u4e00\u4e2a\u8bed\u53e5\u91cc\u5b8c\u6574\u5730\u6dfb\u52a0\u6240\u6709 listener\u3002\u4f8b\u5982\uff1a</p> <pre><code>nebula&gt; ADD LISTENER ELASTICSEARCH 192.168.8.100:9789,192.168.8.101:9789;\n</code></pre>"},{"location":"4.deployment-and-installation/6.deploy-text-based-index/3.deploy-listener/#listener_3","title":"\u67e5\u770b listener","text":"<p>\u6267\u884c<code>SHOW LISTENER</code>\u8bed\u53e5\u53ef\u4ee5\u5217\u51fa\u6240\u6709\u7684 listener\u3002</p>"},{"location":"4.deployment-and-installation/6.deploy-text-based-index/3.deploy-listener/#_4","title":"\u793a\u4f8b","text":"<pre><code>nebula&gt; SHOW LISTENER;\n+--------+-----------------+------------------------+-------------+\n| PartId | Type            | Host                   | Host Status |\n+--------+-----------------+------------------------+-------------+\n| 1      | \"ELASTICSEARCH\" | \"\"192.168.8.100\":9789\" | \"ONLINE\"    |\n| 2      | \"ELASTICSEARCH\" | \"\"192.168.8.100\":9789\" | \"ONLINE\"    |\n| 3      | \"ELASTICSEARCH\" | \"\"192.168.8.100\":9789\" | \"ONLINE\"    |\n+--------+-----------------+------------------------+-------------+\n</code></pre>"},{"location":"4.deployment-and-installation/6.deploy-text-based-index/3.deploy-listener/#listener_4","title":"\u5220\u9664 listener","text":"<p>\u6267\u884c<code>REMOVE LISTENER ELASTICSEARCH</code>\u8bed\u53e5\u53ef\u4ee5\u5220\u9664\u56fe\u7a7a\u95f4\u7684\u6240\u6709 listener\u3002</p>"},{"location":"4.deployment-and-installation/6.deploy-text-based-index/3.deploy-listener/#_5","title":"\u793a\u4f8b","text":"<pre><code>nebula&gt; REMOVE LISTENER ELASTICSEARCH;\n</code></pre>"},{"location":"5.configurations-and-logs/1.configurations/1.configurations/","title":"\u914d\u7f6e\u7ba1\u7406","text":"<p>NebulaGraph \u57fa\u4e8e gflags \u5e93\u6253\u9020\u4e86\u7cfb\u7edf\u914d\u7f6e\uff0c\u591a\u6570\u914d\u7f6e\u9879\u90fd\u662f\u5176\u4e2d\u7684 flags\u3002 NebulaGraph \u670d\u52a1\u542f\u52a8\u65f6\uff0c\u9ed8\u8ba4\u4f1a\u4ece\u914d\u7f6e\u6587\u4ef6\u4e2d\u83b7\u53d6\u914d\u7f6e\u4fe1\u606f\u3002\u5bf9\u4e8e\u6587\u4ef6\u4e2d\u6ca1\u6709\u7684\u914d\u7f6e\u9879\uff0c\u7cfb\u7edf\u4f7f\u7528\u9ed8\u8ba4\u503c\u3002</p> <p>Note</p> <ul> <li>\u7531\u4e8e\u914d\u7f6e\u9879\u591a\u4e14\u53ef\u80fd\u968f\u7740 NebulaGraph \u7684\u5f00\u53d1\u53d1\u751f\u53d8\u5316\uff0c\u6587\u6863\u4e0d\u4f1a\u4ecb\u7ecd\u6240\u6709\u914d\u7f6e\u9879\u3002\u6309\u4e0b\u6587\u8bf4\u660e\u53ef\u5728\u547d\u4ee4\u884c\u83b7\u53d6\u914d\u7f6e\u9879\u7684\u8be6\u7ec6\u8bf4\u660e\u3002</li> <li>\u4e0d\u5efa\u8bae\u4fee\u6539\u6587\u6863\u672a\u4ecb\u7ecd\u7684\u914d\u7f6e\u9879\uff0c\u9664\u975e\u5df2\u7ecf\u719f\u6089\u6e90\u4ee3\u7801\u5e76\u5b8c\u5168\u4e86\u89e3\u914d\u7f6e\u9879\u7684\u4f5c\u7528\u3002</li> </ul> <p>\u5386\u53f2\u7248\u672c\u517c\u5bb9\u6027</p> <p>1.x \u7248\u672c\u7684\u6587\u6863\u63d0\u4f9b\u4e86\u4f7f\u7528 CONFIGS \u547d\u4ee4\u4fee\u6539\u7f13\u5b58\u4e2d\u914d\u7f6e\u7684\u65b9\u6cd5\uff0c\u4f46\u5728\u751f\u4ea7\u73af\u5883\u4e2d\u4f7f\u7528\u8be5\u65b9\u6cd5\u5bb9\u6613\u5bfc\u81f4\u96c6\u7fa4\u914d\u7f6e\u4e0e\u672c\u5730\u914d\u7f6e\u6587\u4ef6\u4e0d\u4e00\u81f4\u3002\u56e0\u6b64\uff0c\u81ea 2.x \u7248\u672c\u5f00\u59cb\u6587\u6863\u4e2d\u5c06\u4e0d\u518d\u4ecb\u7ecd CONFIGS \u547d\u4ee4\u7684\u4f7f\u7528\u65b9\u6cd5\u3002</p>"},{"location":"5.configurations-and-logs/1.configurations/1.configurations/#_2","title":"\u67e5\u770b\u914d\u7f6e\u9879\u5217\u8868\u4e0e\u8bf4\u660e","text":"<p>\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\u83b7\u53d6\u4e8c\u8fdb\u5236\u6587\u4ef6\u5bf9\u5e94\u670d\u52a1\u7684\u6240\u6709\u914d\u7f6e\u9879\u4fe1\u606f\uff1a</p> <pre><code>&lt;binary&gt; --help\n</code></pre> <p>\u4f8b\u5982\uff1a</p> <pre><code># \u83b7\u53d6 Meta \u914d\u7f6e\u9879\u7684\u5e2e\u52a9\u4fe1\u606f\n$ /usr/local/nebula/bin/nebula-metad  --help\n\n# \u83b7\u53d6 Graph \u914d\u7f6e\u9879\u7684\u5e2e\u52a9\u4fe1\u606f\n$ /usr/local/nebula/bin/nebula-graphd --help\n\n# \u83b7\u53d6 Storage \u914d\u7f6e\u9879\u7684\u5e2e\u52a9\u4fe1\u606f\n$ /usr/local/nebula/bin/nebula-storaged --help\n</code></pre> <p>\u4ee5\u4e0a\u793a\u4f8b\u4f7f\u7528\u4e86\u4e8c\u8fdb\u5236\u6587\u4ef6\u7684\u9ed8\u8ba4\u5b58\u50a8\u8def\u5f84<code>/usr/local/nebula/bin/</code>\u3002\u5982\u679c\u4fee\u6539\u4e86 NebulaGraph \u5b89\u88c5\u8def\u5f84\uff0c\u4f7f\u7528\u5b9e\u9645\u8def\u5f84\u67e5\u8be2\u914d\u7f6e\u9879\u4fe1\u606f\u3002</p>"},{"location":"5.configurations-and-logs/1.configurations/1.configurations/#_3","title":"\u67e5\u770b\u8fd0\u884c\u914d\u7f6e","text":"<p>\u4f7f\u7528<code>curl</code>\u547d\u4ee4\u83b7\u53d6\u8fd0\u884c\u4e2d\u7684\u914d\u7f6e\u9879\u7684\u503c\uff0c\u5373 NebulaGraph \u7684\u8fd0\u884c\u914d\u7f6e\u3002</p> <p>\u4f8b\u5982\uff1a</p> <pre><code># \u83b7\u53d6 Meta \u670d\u52a1\u7684\u8fd0\u884c\u914d\u7f6e\ncurl 127.0.0.1:19559/flags\n\n# \u83b7\u53d6 Graph \u670d\u52a1\u7684\u8fd0\u884c\u914d\u7f6e\ncurl 127.0.0.1:19669/flags\n\n# \u83b7\u53d6 Storage \u670d\u52a1\u7684\u8fd0\u884c\u914d\u7f6e\ncurl 127.0.0.1:19779/flags\n</code></pre> <p>\u4f7f\u7528<code>-s</code>\u6216\u8005<code>--silent</code>\u53c2\u6570\u53ef\u4ee5\u9690\u85cf\u8fdb\u5ea6\u6761\u548c\u9519\u8bef\u4fe1\u606f\u3002\u4f8b\u5982\uff1a</p> <pre><code>curl -s 127.0.0.1:19559/flags\n</code></pre> <p>Note</p> <p>\u5b9e\u9645\u73af\u5883\u4e2d\u9700\u4f7f\u7528\u771f\u5b9e\u7684 IP\uff08\u6216\u4e3b\u673a\u540d\uff09\u53d6\u4ee3\u4ee5\u4e0a\u793a\u4f8b\u4e2d\u7684<code>127.0.0.1</code>\u3002</p>"},{"location":"5.configurations-and-logs/1.configurations/1.configurations/#_4","title":"\u914d\u7f6e\u6587\u4ef6\u7b80\u4ecb","text":""},{"location":"5.configurations-and-logs/1.configurations/1.configurations/#rpmdebtar","title":"\u6e90\u7801\u3001RPM/DEB\u3001TAR \u5305\u96c6\u7fa4\u7684\u914d\u7f6e\u6587\u4ef6","text":"<p>NebulaGraph \u4e3a\u6bcf\u4e2a\u670d\u52a1\u90fd\u63d0\u4f9b\u4e86\u4e24\u4efd\u521d\u59cb\u914d\u7f6e\u6587\u4ef6<code>&lt;service_name&gt;.conf.default</code>\u548c<code>&lt;service_name&gt;.conf.production</code>\uff0c\u65b9\u4fbf\u7528\u6237\u5728\u4e0d\u540c\u573a\u666f\u4e2d\u4f7f\u7528\u3002\u4f7f\u7528\u6e90\u7801\u548c RPM/DEB \u5b89\u88c5\u96c6\u7fa4\u7684\u914d\u7f6e\u6587\u4ef6\u7684\u9ed8\u8ba4\u8def\u5f84\u4e3a<code>/usr/local/nebula/etc/</code>\uff1b\u4f7f\u7528 TAR \u5305\u5b89\u88c5\u96c6\u7fa4\u7684\u914d\u7f6e\u6587\u4ef6\u8def\u5f84\u4e3a<code>&lt;install_path&gt;/&lt;tar_package_directory&gt;/etc</code>TAR \u5305\u7684\u5b89\u88c5\u8def\u5f84\u3002</p> <p>\u521d\u59cb\u914d\u7f6e\u6587\u4ef6\u4e2d\u7684\u914d\u7f6e\u503c\u4ec5\u4f9b\u53c2\u8003\uff0c\u4f7f\u7528\u65f6\u53ef\u6839\u636e\u5b9e\u9645\u9700\u6c42\u8c03\u6574\u3002\u5982\u9700\u4f7f\u7528\u521d\u59cb\u914d\u7f6e\u6587\u4ef6\uff0c\u4ece\u4e0a\u8ff0\u4e24\u4e2a\u6587\u4ef6\u9009\u62e9\u5176\u4e00\uff0c\u5220\u9664\u540e\u7f00<code>.default</code>\u6216<code>.production</code>\u4f7f\u5176\u751f\u6548\u3002</p> <p>Note</p> <p>\u4e3a\u786e\u4fdd\u670d\u52a1\u7684\u53ef\u7528\u6027\uff0c\u540c\u7c7b\u670d\u52a1\u7684\u914d\u7f6e\u5efa\u8bae\u4fdd\u6301\u4e00\u81f4\uff0c\u672c\u673a<code>local_ip</code>\u9664\u5916\u3002\u4f8b\u5982\uff0c\u4e00\u4e2a NebulaGraph \u96c6\u7fa4\u4e2d\u90e8\u7f72\u4e86 3 \u4e2a Storage \u670d\u52a1\u5668\uff0c3 \u8005\u9664<code>local_ip</code>\u5916\u7684\u5176\u5b83\u914d\u7f6e\u5efa\u8bae\u90fd\u76f8\u540c\u3002</p> <p>\u4e0b\u8868\u5217\u51fa\u4e86\u5404\u670d\u52a1\u5bf9\u5e94\u7684\u521d\u59cb\u914d\u7f6e\u6587\u4ef6\u3002</p> NebulaGraph \u670d\u52a1 \u521d\u59cb\u914d\u7f6e\u6587\u4ef6 \u914d\u7f6e\u8bf4\u660e Meta <code>nebula-metad.conf.default</code>\u548c<code>nebula-metad.conf.production</code> Meta \u670d\u52a1\u914d\u7f6e Graph <code>nebula-graphd.conf.default</code>\u548c<code>nebula-graphd.conf.production</code> Graph \u670d\u52a1\u914d\u7f6e Storage <code>nebula-storaged.conf.default</code>\u548c<code>nebula-storaged.conf.production</code> Storage \u670d\u52a1\u914d\u7f6e <p>\u6240\u6709\u670d\u52a1\u7684\u521d\u59cb\u914d\u7f6e\u6587\u4ef6\u4e2d\u90fd\u5305\u542b<code>local_config</code>\u53c2\u6570\uff0c\u9884\u8bbe\u503c\u4e3a<code>true</code>\uff0c\u8868\u793a NebulaGraph \u670d\u52a1\u4f1a\u4ece\u5176\u914d\u7f6e\u6587\u4ef6\u83b7\u53d6\u914d\u7f6e\u5e76\u542f\u52a8\u3002</p> <p>Caution</p> <p>\u4e0d\u5efa\u8bae\u4fee\u6539<code>local_config</code>\u7684\u503c\u4e3a<code>false</code>\u3002\u4fee\u6539\u540e NebulaGraph \u670d\u52a1\u542f\u52a8\u540e\u4f1a\u5148\u5c1d\u8bd5\u4ece Meta \u670d\u52a1\u83b7\u53d6\u7f13\u5b58\u7684\u914d\u7f6e\u4fe1\u606f\uff0c\u53ef\u80fd\u5bfc\u81f4\u96c6\u7fa4\u914d\u7f6e\u4e0d\u4e00\u81f4\uff0c\u9020\u6210\u672a\u77e5\u98ce\u9669\u3002</p>"},{"location":"5.configurations-and-logs/1.configurations/1.configurations/#docker_compose","title":"Docker Compose \u96c6\u7fa4\u7684\u914d\u7f6e\u6587\u4ef6","text":"<p>\u5bf9\u4e8e\u4f7f\u7528 Docker Compose \u521b\u5efa\u7684\u96c6\u7fa4\uff0c\u96c6\u7fa4\u7684\u914d\u7f6e\u6587\u4ef6\u7684\u9ed8\u8ba4\u8def\u5f84\u4e3a<code>&lt;install_path&gt;/nebula-docker-compose/docker-compose.yaml</code>\u3002\u914d\u7f6e\u6587\u4ef6\u4e2d\u7684<code>command</code>\u4e0b\u9762\u7684\u53c2\u6570\u4e3a\u5404\u670d\u52a1\u7684\u542f\u52a8\u53c2\u6570\u3002</p>"},{"location":"5.configurations-and-logs/1.configurations/1.configurations/#nebulagraph_operator","title":"NebulaGraph Operator \u96c6\u7fa4\u7684\u914d\u7f6e\u6587\u4ef6","text":"<p>\u5bf9\u4e8e\u901a\u8fc7 NebulaGraph Operator \u4f7f\u7528 Kubectl \u65b9\u5f0f\u521b\u5efa\u7684\u96c6\u7fa4\uff0c\u96c6\u7fa4\u7684\u914d\u7f6e\u6587\u4ef6\u7684\u8def\u5f84\u4e3a\u7528\u6237\u521b\u5efa\u96c6\u7fa4 YAML \u6587\u4ef6\u7684\u8def\u5f84\u3002\u7528\u6237\u53ef\u901a\u8fc7\u914d\u7f6e\u6587\u4ef6\u4e2d\u7684<code>spec.{graphd|storaged|metad}.config</code>\u53c2\u6570\u4fee\u6539\u96c6\u7fa4\u5404\u4e2a\u670d\u52a1\u7684\u76f8\u5173\u914d\u7f6e\u3002</p> <p>Note</p> <p>\u901a\u8fc7 Helm \u90e8\u7f72\u7684\u96c6\u7fa4\uff0c\u6682\u4e0d\u652f\u6301\u4fee\u6539\u96c6\u7fa4\u670d\u52a1\u7684\u76f8\u5173\u914d\u7f6e\u3002</p> <p>\u5173\u4e8e NebulaGraph \u7684\u914d\u7f6e\u76f8\u5173\u7684\u66f4\u591a\u4fe1\u606f\uff0c\u53c2\u89c1 NebulaGraph Config\u3002</p>"},{"location":"5.configurations-and-logs/1.configurations/1.configurations/#_5","title":"\u4fee\u6539\u914d\u7f6e","text":"<p>\u7528\u6237\u53ef\u4ee5\u5728\u914d\u7f6e\u6587\u4ef6\u4e2d\u4fee\u6539 NebulaGraph \u7684\u914d\u7f6e\uff0c\u6216\u4f7f\u7528\u547d\u4ee4\u52a8\u6001\u4fee\u6539\u914d\u7f6e\u3002</p> <p>Caution</p> <p>\u540c\u65f6\u4f7f\u7528\u4e24\u79cd\u65b9\u5f0f\u4fee\u6539\u914d\u7f6e\u4f1a\u5bfc\u81f4\u914d\u7f6e\u4fe1\u606f\u5931\u53bb\u7edf\u4e00\u7684\u7ba1\u7406\u65b9\u5f0f\uff0c\u53ef\u80fd\u9020\u6210\u914d\u7f6e\u6df7\u4e71\u3002\u5efa\u8bae\u4ec5\u4f7f\u7528\u914d\u7f6e\u6587\u4ef6\u7ba1\u7406\u914d\u7f6e\uff0c\u6216\u5728\u901a\u8fc7\u547d\u4ee4\u52a8\u6001\u66f4\u65b0\u914d\u7f6e\u540e\u5bf9\u914d\u7f6e\u6587\u4ef6\u505a\u76f8\u540c\u7684\u4fee\u6539\uff0c\u4ee5\u4fdd\u8bc1\u4e00\u81f4\u6027\u3002</p>"},{"location":"5.configurations-and-logs/1.configurations/1.configurations/#_6","title":"\u5728\u914d\u7f6e\u6587\u4ef6\u4e2d\u4fee\u6539\u914d\u7f6e","text":"<p>\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u6240\u6709 NebulaGraph \u670d\u52a1\u4ece\u914d\u7f6e\u6587\u4ef6\u83b7\u53d6\u914d\u7f6e\u3002\u7528\u6237\u53ef\u4ee5\u6309\u7167\u4ee5\u4e0b\u6b65\u9aa4\u4fee\u6539\u914d\u7f6e\u5e76\u4f7f\u5176\u751f\u6548\u3002</p> <ul> <li> <p>\u9488\u5bf9\u4f7f\u7528\u6e90\u7801\u3001RPM/DEB\u3001TAR \u5305\u5b89\u88c5\u7684\u96c6\u7fa4\uff1a</p> <ol> <li> <p>\u4f7f\u7528\u6587\u672c\u7f16\u8f91\u5668\u4fee\u6539\u76ee\u6807\u670d\u52a1\u7684\u914d\u7f6e\u6587\u4ef6\u5e76\u4fdd\u5b58\u3002</p> </li> <li> <p>\u9009\u62e9\u5408\u9002\u7684\u65f6\u95f4\u91cd\u542f\u6240\u6709 NebulaGraph \u670d\u52a1\u4f7f\u4fee\u6539\u751f\u6548\u3002</p> </li> </ol> </li> </ul> <ul> <li> <p>\u9488\u5bf9\u4f7f\u7528 Docker Compose \u5b89\u88c5\u7684\u96c6\u7fa4\uff1a</p> <ol> <li>\u5728\u6587\u4ef6<code>&lt;install_path&gt;/nebula-docker-compose/docker-compose.yaml</code>\u4e2d\uff0c\u4fee\u6539\u670d\u52a1\u914d\u7f6e\u3002</li> <li>\u5728\u76ee\u5f55<code>nebula-docker-compose</code>\u5185\u6267\u884c\u547d\u4ee4<code>docker-compose up -d</code>\u91cd\u542f\u6d89\u53ca\u914d\u7f6e\u53d8\u5316\u7684\u670d\u52a1\u3002</li> </ol> </li> </ul> <ul> <li> <p>\u9488\u5bf9\u4f7f\u7528 Kubectl \u65b9\u5f0f\u521b\u5efa\u7684\u96c6\u7fa4\uff1a</p> <p>\u5177\u4f53\u64cd\u4f5c\uff0c\u53c2\u89c1\u81ea\u5b9a\u4e49\u96c6\u7fa4\u7684\u914d\u7f6e\u53c2\u6570\u3002</p> </li> </ul>"},{"location":"5.configurations-and-logs/1.configurations/1.configurations/#_7","title":"\u4f7f\u7528\u547d\u4ee4\u52a8\u6001\u4fee\u6539\u914d\u7f6e","text":"<p>\u7528\u6237\u53ef\u4ee5\u901a\u8fc7<code>curl</code>\u547d\u4ee4\u52a8\u6001\u4fee\u6539 NebulaGraph \u670d\u52a1\u7684\u914d\u7f6e\u3002\u4f8b\u5982\uff0c\u4fee\u6539 Storage \u670d\u52a1\u7684<code>wal_ttl</code>\u53c2\u6570\u4e3a<code>600</code>\uff0c\u547d\u4ee4\u5982\u4e0b\uff1a</p> <pre><code>curl -X PUT -H \"Content-Type: application/json\" -d'{\"wal_ttl\":\"600\"}' -s \"http://192.168.15.6:19779/flags\"\n</code></pre> <p>\u5176\u4e2d\uff0c<code>{\"wal_ttl\":\"600\"}</code>\u4e3a\u5f85\u4fee\u6539\u7684\u914d\u7f6e\u53c2\u6570\u53ca\u5176\u503c\uff1b<code>192.168.15.6:19779</code>\u4e3a Storage \u670d\u52a1\u7684 IP \u5730\u5740\u548c HTTP \u7aef\u53e3\u53f7\u3002</p> <p>Caution</p> <ul> <li>\u52a8\u6001\u4fee\u6539\u914d\u7f6e\u529f\u80fd\u4ec5\u9002\u7528\u4e8e\u539f\u578b\u9a8c\u8bc1\u548c\u6d4b\u8bd5\u73af\u5883\uff0c\u4e0d\u5efa\u8bae\u5728\u751f\u4ea7\u73af\u5883\u4e2d\u4f7f\u7528\u3002\u56e0\u4e3a\u5f53<code>local_config</code>\u503c\u8bbe\u7f6e\u4e3a<code>true</code>\u65f6\uff0c\u52a8\u6001\u4fee\u6539\u7684\u914d\u7f6e\u4e0d\u4f1a\u6301\u4e45\u5316\uff0c\u91cd\u542f\u670d\u52a1\u540e\u914d\u7f6e\u4f1a\u6062\u590d\u4e3a\u521d\u59cb\u914d\u7f6e\u3002</li> <li>\u4ec5\u652f\u6301\u52a8\u6001\u4fee\u6539\u90e8\u5206\u914d\u7f6e\u53c2\u6570\uff0c\u5177\u4f53\u652f\u6301\u7684\u53c2\u6570\u5217\u8868\uff0c\u53c2\u89c1\u5404\u670d\u52a1\u914d\u7f6e\u4e2d\u662f\u5426\u652f\u6301\u8fd0\u884c\u65f6\u52a8\u6001\u4fee\u6539\u7684\u63cf\u8ff0\u3002</li> </ul>"},{"location":"5.configurations-and-logs/1.configurations/2.meta-config/","title":"Meta \u670d\u52a1\u914d\u7f6e","text":"<p>Meta \u670d\u52a1\u63d0\u4f9b\u4e86\u4e24\u4efd\u521d\u59cb\u914d\u7f6e\u6587\u4ef6<code>nebula-metad.conf.default</code>\u548c<code>nebula-metad.conf.production</code>\uff0c\u65b9\u4fbf\u5728\u4e0d\u540c\u573a\u666f\u4e2d\u4f7f\u7528\u3002\u6587\u4ef6\u7684\u9ed8\u8ba4\u8def\u5f84\u4e3a<code>/usr/local/nebula/etc/</code>\u3002</p> <p>Caution</p> <ul> <li>\u4e0d\u5efa\u8bae\u4fee\u6539<code>local_config</code>\u7684\u503c\u4e3a<code>false</code>\u3002\u4fee\u6539\u540e NebulaGraph \u670d\u52a1\u542f\u52a8\u540e\u4f1a\u5148\u5c1d\u8bd5\u4ece Meta \u670d\u52a1\u83b7\u53d6\u7f13\u5b58\u7684\u914d\u7f6e\u4fe1\u606f\uff0c\u53ef\u80fd\u5bfc\u81f4\u96c6\u7fa4\u914d\u7f6e\u4e0d\u4e00\u81f4\uff0c\u9020\u6210\u672a\u77e5\u98ce\u9669\u3002</li> <li>\u4e0d\u5efa\u8bae\u4fee\u6539\u6587\u6863\u672a\u4ecb\u7ecd\u7684\u914d\u7f6e\u9879\uff0c\u9664\u975e\u5df2\u7ecf\u719f\u6089\u6e90\u4ee3\u7801\u5e76\u6e05\u695a\u4e86\u89e3\u914d\u7f6e\u9879\u4f5c\u7528\u3002</li> </ul>"},{"location":"5.configurations-and-logs/1.configurations/2.meta-config/#_1","title":"\u914d\u7f6e\u6587\u4ef6\u4f7f\u7528\u65b9\u5f0f","text":"<p>\u5982\u9700\u4f7f\u7528\u521d\u59cb\u914d\u7f6e\u6587\u4ef6\uff0c\u4ece\u4e0a\u8ff0\u4e24\u4e2a\u6587\u4ef6\u9009\u62e9\u5176\u4e00\uff0c\u5220\u9664\u540e\u7f00<code>.default</code>\u6216<code>.production</code>\uff0cMeta \u670d\u52a1\u624d\u80fd\u5c06\u5176\u8bc6\u522b\u4e3a\u914d\u7f6e\u6587\u4ef6\u5e76\u4ece\u4e2d\u83b7\u53d6\u914d\u7f6e\u4fe1\u606f\u3002</p>"},{"location":"5.configurations-and-logs/1.configurations/2.meta-config/#_2","title":"\u914d\u7f6e\u6587\u4ef6\u53c2\u6570\u503c\u8bf4\u660e","text":"<p>\u914d\u7f6e\u6587\u4ef6\u5185\u6ca1\u6709\u8bbe\u7f6e\u67d0\u4e2a\u53c2\u6570\u8868\u793a\u53c2\u6570\u4f7f\u7528\u7684\u662f\u9ed8\u8ba4\u503c\u3002\u6587\u4ef6\u5185\u53ea\u9884\u8bbe\u4e86\u90e8\u5206\u53c2\u6570\u7684\u503c\uff0c\u800c\u4e14\u4e24\u4efd\u521d\u59cb\u914d\u7f6e\u6587\u4ef6\u5185\u7684\u53c2\u6570\u503c\u4e5f\u7565\u6709\u4e0d\u540c\uff0c\u672c\u6587\u7684\u9884\u8bbe\u503c\u4ee5<code>nebula-metad.conf.default</code>\u4e3a\u51c6\u3002</p> <p>Caution</p> <p>\u914d\u7f6e\u6587\u4ef6\u4e2d\u7684\u90e8\u5206\u53c2\u6570\u503c\u53ef\u4ee5\u5728\u8fd0\u884c\u65f6\u52a8\u6001\u4fee\u6539\u3002\u672c\u6587\u5c06\u8fd9\u4e9b\u53c2\u6570\u6807\u8bb0\u4e3a\u652f\u6301\u8fd0\u884c\u65f6\u52a8\u6001\u4fee\u6539\uff0c\u5e76\u5f53<code>local_config</code>\u503c\u8bbe\u7f6e\u4e3a<code>true</code>\u65f6\u91cd\u542f\u670d\u52a1\u540e\u914d\u7f6e\u4f1a\u6062\u590d\u4e3a\u521d\u59cb\u914d\u7f6e\u3002\u8be6\u60c5\u53c2\u89c1\u4fee\u6539\u914d\u7f6e\u3002</p> <p>\u5982\u9700\u67e5\u770b\u6240\u6709\u7684\u53c2\u6570\u53ca\u5176\u5f53\u524d\u503c\uff0c\u53c2\u89c1\u914d\u7f6e\u7ba1\u7406\u3002</p>"},{"location":"5.configurations-and-logs/1.configurations/2.meta-config/#basics","title":"basics \u914d\u7f6e","text":"\u540d\u79f0 \u9884\u8bbe\u503c \u8bf4\u660e \u662f\u5426\u652f\u6301\u8fd0\u884c\u65f6\u52a8\u6001\u4fee\u6539 <code>daemonize</code> <code>true</code> \u662f\u5426\u542f\u52a8\u5b88\u62a4\u8fdb\u7a0b\u3002 \u4e0d\u652f\u6301 <code>pid_file</code> <code>pids/nebula-metad.pid</code> \u8bb0\u5f55\u8fdb\u7a0b ID \u7684\u6587\u4ef6\u3002 \u4e0d\u652f\u6301 <code>timezone_name</code> - \u6307\u5b9a NebulaGraph \u7684\u65f6\u533a\u3002\u521d\u59cb\u914d\u7f6e\u6587\u4ef6\u4e2d\u672a\u8bbe\u7f6e\u8be5\u53c2\u6570\uff0c\u5982\u9700\u4f7f\u7528\u8bf7\u624b\u52a8\u6dfb\u52a0\u3002\u7cfb\u7edf\u9ed8\u8ba4\u503c\u4e3a<code>UTC+00:00:00</code>\u3002\u683c\u5f0f\u8bf7\u53c2\u89c1 Specifying the Time Zone with TZ\u3002\u4f8b\u5982\uff0c\u4e1c\u516b\u533a\u7684\u8bbe\u7f6e\u65b9\u5f0f\u4e3a<code>--timezone_name=UTC+08:00</code>\u3002 \u4e0d\u652f\u6301 <p>Note</p> <ul> <li>\u5728\u63d2\u5165\u65f6\u95f4\u7c7b\u578b\u7684\u5c5e\u6027\u503c\u65f6\uff0cNebulaGraph \u4f1a\u6839\u636e<code>timezone_name</code>\u8bbe\u7f6e\u7684\u65f6\u533a\u5c06\u8be5\u65f6\u95f4\u503c\uff08TIMESTAMP \u7c7b\u578b\u4f8b\u5916\uff09\u8f6c\u6362\u6210\u76f8\u5e94\u7684 UTC \u65f6\u95f4\uff0c\u56e0\u6b64\u5728\u67e5\u8be2\u4e2d\u8fd4\u56de\u7684\u65f6\u95f4\u7c7b\u578b\u5c5e\u6027\u503c\u4e3a UTC \u65f6\u95f4\u3002</li> <li><code>timezone_name</code>\u53c2\u6570\u53ea\u7528\u4e8e\u8f6c\u6362 NebulaGraph \u4e2d\u5b58\u50a8\u7684\u6570\u636e\uff0cNebulaGraph \u8fdb\u7a0b\u4e2d\u5176\u5b83\u65f6\u533a\u76f8\u5173\u6570\u636e\uff0c\u4f8b\u5982\u65e5\u5fd7\u6253\u5370\u7684\u65f6\u95f4\u7b49\uff0c\u4ecd\u7136\u4f7f\u7528\u4e3b\u673a\u7cfb\u7edf\u9ed8\u8ba4\u7684\u65f6\u533a\u3002</li> </ul>"},{"location":"5.configurations-and-logs/1.configurations/2.meta-config/#logging","title":"logging \u914d\u7f6e","text":"\u540d\u79f0 \u9884\u8bbe\u503c \u8bf4\u660e \u662f\u5426\u652f\u6301\u8fd0\u884c\u65f6\u52a8\u6001\u4fee\u6539 <code>log_dir</code> <code>logs</code> \u5b58\u653e Meta \u670d\u52a1\u65e5\u5fd7\u7684\u76ee\u5f55\uff0c\u5efa\u8bae\u548c\u6570\u636e\u4fdd\u5b58\u5728\u4e0d\u540c\u786c\u76d8\u3002 \u4e0d\u652f\u6301 <code>minloglevel</code> <code>0</code> \u6700\u5c0f\u65e5\u5fd7\u7ea7\u522b\uff0c\u5373\u8bb0\u5f55\u6b64\u7ea7\u522b\u6216\u66f4\u9ad8\u7ea7\u522b\u7684\u65e5\u5fd7\u3002\u53ef\u9009\u503c\u4e3a<code>0</code>\uff08INFO\uff09\u3001<code>1</code>\uff08WARNING\uff09\u3001<code>2</code>\uff08ERROR\uff09\u3001<code>3</code>\uff08FATAL\uff09\u3002\u5efa\u8bae\u5728\u8c03\u8bd5\u65f6\u8bbe\u7f6e\u4e3a<code>0</code>\uff0c\u751f\u4ea7\u73af\u5883\u4e2d\u8bbe\u7f6e\u4e3a<code>1</code>\u3002\u5982\u679c\u8bbe\u7f6e\u4e3a<code>4</code>\uff0cNebulaGraph \u4e0d\u4f1a\u8bb0\u5f55\u4efb\u4f55\u65e5\u5fd7\u3002 \u652f\u6301 <code>v</code> <code>0</code> VLOG \u65e5\u5fd7\u8be6\u7ec6\u7ea7\u522b\uff0c\u5373\u8bb0\u5f55\u5c0f\u4e8e\u6216\u7b49\u4e8e\u6b64\u7ea7\u522b\u7684\u6240\u6709 VLOG \u6d88\u606f\u3002\u53ef\u9009\u503c\u4e3a<code>0</code>\u3001<code>1</code>\u3001<code>2</code>\u3001<code>3</code>\u3001<code>4</code>\u3001<code>5</code>\u3002glog \u63d0\u4f9b\u7684 VLOG \u5b8f\u5141\u8bb8\u7528\u6237\u5b9a\u4e49\u81ea\u5df1\u7684\u6570\u5b57\u65e5\u5fd7\u8bb0\u5f55\u7ea7\u522b\uff0c\u5e76\u7528\u53c2\u6570<code>v</code>\u63a7\u5236\u8bb0\u5f55\u54ea\u4e9b\u8be6\u7ec6\u6d88\u606f\u3002\u8be6\u60c5\u53c2\u89c1 Verbose Logging\u3002 \u652f\u6301 <code>logbufsecs</code> <code>0</code> \u7f13\u51b2\u65e5\u5fd7\u7684\u6700\u5927\u65f6\u95f4\uff0c\u8d85\u65f6\u540e\u8f93\u51fa\u5230\u65e5\u5fd7\u6587\u4ef6\u3002<code>0</code>\u8868\u793a\u5b9e\u65f6\u8f93\u51fa\u3002\u5355\u4f4d\uff1a\u79d2\u3002 \u4e0d\u652f\u6301 <code>redirect_stdout</code> <code>true</code> \u662f\u5426\u5c06\u6807\u51c6\u8f93\u51fa\u548c\u6807\u51c6\u9519\u8bef\u91cd\u5b9a\u5411\u5230\u5355\u72ec\u7684\u8f93\u51fa\u6587\u4ef6\u3002 \u4e0d\u652f\u6301 <code>stdout_log_file</code> <code>metad-stdout.log</code> \u6807\u51c6\u8f93\u51fa\u65e5\u5fd7\u6587\u4ef6\u540d\u79f0\u3002 \u4e0d\u652f\u6301 <code>stderr_log_file</code> <code>metad-stderr.log</code> \u6807\u51c6\u9519\u8bef\u65e5\u5fd7\u6587\u4ef6\u540d\u79f0\u3002 \u4e0d\u652f\u6301 <code>stderrthreshold</code> <code>3</code> \u8981\u590d\u5236\u5230\u6807\u51c6\u9519\u8bef\u4e2d\u7684\u6700\u5c0f\u65e5\u5fd7\u7ea7\u522b\uff08<code>minloglevel</code>\uff09\u3002 \u4e0d\u652f\u6301 <code>timestamp_in_logfile_name</code> <code>true</code> \u65e5\u5fd7\u6587\u4ef6\u540d\u79f0\u4e2d\u662f\u5426\u5305\u542b\u65f6\u95f4\u6233\u3002<code>true</code>\u8868\u793a\u5305\u542b\uff0c<code>false</code>\u8868\u793a\u4e0d\u5305\u542b\u3002 \u4e0d\u652f\u6301"},{"location":"5.configurations-and-logs/1.configurations/2.meta-config/#networking","title":"networking \u914d\u7f6e","text":"\u540d\u79f0 \u9884\u8bbe\u503c \u8bf4\u660e \u662f\u5426\u652f\u6301\u8fd0\u884c\u65f6\u52a8\u6001\u4fee\u6539 <code>meta_server_addrs</code> <code>127.0.0.1:9559</code> \u5168\u90e8 Meta \u670d\u52a1\u7684 IP\uff08\u6216\u4e3b\u673a\u540d\uff09\u548c\u7aef\u53e3\u3002\u591a\u4e2a Meta \u670d\u52a1\u7528\u82f1\u6587\u9017\u53f7\uff08,\uff09\u5206\u9694\u3002 \u4e0d\u652f\u6301 <code>local_ip</code> <code>127.0.0.1</code> Meta \u670d\u52a1\u7684\u672c\u5730 IP\uff08\u6216\u4e3b\u673a\u540d\uff09\u3002\u672c\u5730 IP \u7528\u4e8e\u8bc6\u522b nebula-metad \u8fdb\u7a0b\uff0c\u5982\u679c\u662f\u5206\u5e03\u5f0f\u96c6\u7fa4\u6216\u9700\u8981\u8fdc\u7a0b\u8bbf\u95ee\uff0c\u8bf7\u4fee\u6539\u4e3a\u5bf9\u5e94\u5730\u5740\u3002 \u4e0d\u652f\u6301 <code>port</code> <code>9559</code> Meta \u670d\u52a1\u7684 RPC \u5b88\u62a4\u8fdb\u7a0b\u76d1\u542c\u7aef\u53e3\u3002\u540c\u65f6\u8fd8\u4f1a\u4f7f\u7528\u76f8\u90bb\u7684<code>+1</code>\uff08<code>9560</code>\uff09\u7aef\u53e3\u7528\u4e8e Meta \u670d\u52a1\u4e4b\u95f4\u7684 Raft \u901a\u4fe1\u3002 \u4e0d\u652f\u6301 <code>ws_ip</code> <code>0.0.0.0</code> HTTP \u670d\u52a1\u7684 IP \u5730\u5740\u3002 \u4e0d\u652f\u6301 <code>ws_http_port</code> <code>19559</code> HTTP \u670d\u52a1\u7684\u7aef\u53e3\u3002 \u4e0d\u652f\u6301 <code>ws_storage_http_port</code> <code>19779</code> HTTP \u534f\u8bae\u76d1\u542c Storage \u670d\u52a1\u7684\u7aef\u53e3\uff0c\u9700\u8981\u548c Storage \u670d\u52a1\u914d\u7f6e\u6587\u4ef6\u4e2d\u7684<code>ws_http_port</code>\u4fdd\u6301\u4e00\u81f4\u3002\u4ec5\u5b58\u7b97\u5408\u5e76\u7248 NebulaGraph \u9700\u8981\u8bbe\u7f6e\u672c\u53c2\u6570\u3002 \u4e0d\u652f\u6301 <p>Caution</p> <p>\u4f7f\u7528 IP \u65f6\u5efa\u8bae\u4f7f\u7528\u771f\u5b9e\u7684 IP\u3002\u5426\u5219\u67d0\u4e9b\u60c5\u51b5\u4e0b<code>127.0.0.1/0.0.0.0</code>\u65e0\u6cd5\u6b63\u786e\u89e3\u6790\u3002</p>"},{"location":"5.configurations-and-logs/1.configurations/2.meta-config/#storage","title":"storage \u914d\u7f6e","text":"\u540d\u79f0 \u9884\u8bbe\u503c \u8bf4\u660e \u662f\u5426\u652f\u6301\u8fd0\u884c\u65f6\u52a8\u6001\u4fee\u6539 <code>data_path</code> <code>data/meta</code> meta \u6570\u636e\u5b58\u50a8\u8def\u5f84\u3002 \u4e0d\u652f\u6301"},{"location":"5.configurations-and-logs/1.configurations/2.meta-config/#misc","title":"misc \u914d\u7f6e","text":"\u540d\u79f0 \u9884\u8bbe\u503c \u8bf4\u660e \u662f\u5426\u652f\u6301\u8fd0\u884c\u65f6\u52a8\u6001\u4fee\u6539 <code>default_parts_num</code> <code>10</code> \u521b\u5efa\u56fe\u7a7a\u95f4\u65f6\u7684\u9ed8\u8ba4\u5206\u7247\u6570\u91cf\u3002 \u4e0d\u652f\u6301 <code>default_replica_factor</code> <code>1</code> \u521b\u5efa\u56fe\u7a7a\u95f4\u65f6\u7684\u9ed8\u8ba4\u526f\u672c\u6570\u91cf\u3002 \u4e0d\u652f\u6301 <code>heartbeat_interval_secs</code> <code>10</code> \u9ed8\u8ba4\u5fc3\u8df3\u95f4\u9694\u3002\u8bf7\u786e\u4fdd\u6240\u6709\u670d\u52a1\u7684<code>heartbeat_interval_secs</code>\u53d6\u503c\u76f8\u540c\uff0c\u5426\u5219\u4f1a\u5bfc\u81f4\u7cfb\u7edf\u65e0\u6cd5\u6b63\u5e38\u5de5\u4f5c\u3002\u5355\u4f4d\uff1a\u79d2\u3002 \u652f\u6301 <code>agent_heartbeat_interval_secs</code> <code>60</code> Agent \u670d\u52a1\u53d1\u9001\u5fc3\u8df3\u7684\u65f6\u95f4\u95f4\u9694\u3002\u8be5\u503c\u5f71\u54cd\u7cfb\u7edf\u786e\u5b9a Agent \u670d\u52a1\u79bb\u7ebf\u72b6\u6001\u7684\u65f6\u95f4\u3002 \u4e0d\u652f\u6301"},{"location":"5.configurations-and-logs/1.configurations/2.meta-config/#rocksdb_options","title":"rocksdb options \u914d\u7f6e","text":"\u540d\u79f0 \u9884\u8bbe\u503c \u8bf4\u660e \u662f\u5426\u652f\u6301\u8fd0\u884c\u65f6\u52a8\u6001\u4fee\u6539 <code>rocksdb_wal_sync</code> <code>true</code> \u662f\u5426\u540c\u6b65 RocksDB \u7684 WAL \u65e5\u5fd7\u3002 \u4e0d\u652f\u6301"},{"location":"5.configurations-and-logs/1.configurations/3.graph-config/","title":"Graph \u670d\u52a1\u914d\u7f6e","text":"<p>Graph \u670d\u52a1\u63d0\u4f9b\u4e86\u4e24\u4efd\u521d\u59cb\u914d\u7f6e\u6587\u4ef6<code>nebula-graphd.conf.default</code>\u548c<code>nebula-graphd.conf.production</code>\uff0c\u65b9\u4fbf\u5728\u4e0d\u540c\u573a\u666f\u4e2d\u4f7f\u7528\u3002\u6587\u4ef6\u7684\u9ed8\u8ba4\u8def\u5f84\u4e3a<code>/usr/local/nebula/etc/</code>\u3002</p> <p>Caution</p> <ul> <li>\u4e0d\u5efa\u8bae\u4fee\u6539<code>local_config</code>\u7684\u503c\u4e3a<code>false</code>\u3002\u4fee\u6539\u540e NebulaGraph \u670d\u52a1\u542f\u52a8\u540e\u4f1a\u5148\u5c1d\u8bd5\u4ece Meta \u670d\u52a1\u83b7\u53d6\u7f13\u5b58\u7684\u914d\u7f6e\u4fe1\u606f\uff0c\u53ef\u80fd\u5bfc\u81f4\u96c6\u7fa4\u914d\u7f6e\u4e0d\u4e00\u81f4\uff0c\u9020\u6210\u672a\u77e5\u98ce\u9669\u3002</li> <li>\u4e0d\u5efa\u8bae\u4fee\u6539\u6587\u6863\u672a\u4ecb\u7ecd\u7684\u914d\u7f6e\u9879\uff0c\u9664\u975e\u5df2\u7ecf\u719f\u6089\u6e90\u4ee3\u7801\u5e76\u5b8c\u5168\u4e86\u89e3\u914d\u7f6e\u9879\u7684\u4f5c\u7528\u3002</li> </ul>"},{"location":"5.configurations-and-logs/1.configurations/3.graph-config/#_1","title":"\u914d\u7f6e\u6587\u4ef6\u4f7f\u7528\u65b9\u5f0f","text":"<p>\u5982\u9700\u4f7f\u7528\u521d\u59cb\u914d\u7f6e\u6587\u4ef6\uff0c\u4ece\u4e0a\u8ff0\u4e24\u4e2a\u6587\u4ef6\u9009\u62e9\u5176\u4e00\uff0c\u5220\u9664\u540e\u7f00<code>.default</code>\u6216<code>.production</code>\uff0cGraph \u670d\u52a1\u624d\u80fd\u5c06\u5176\u8bc6\u522b\u4e3a\u914d\u7f6e\u6587\u4ef6\u5e76\u4ece\u4e2d\u83b7\u53d6\u914d\u7f6e\u4fe1\u606f\u3002</p>"},{"location":"5.configurations-and-logs/1.configurations/3.graph-config/#_2","title":"\u914d\u7f6e\u6587\u4ef6\u53c2\u6570\u503c\u8bf4\u660e","text":"<p>\u914d\u7f6e\u6587\u4ef6\u5185\u6ca1\u6709\u8bbe\u7f6e\u67d0\u4e2a\u53c2\u6570\u8868\u793a\u53c2\u6570\u4f7f\u7528\u7684\u662f\u9ed8\u8ba4\u503c\u3002\u6587\u4ef6\u5185\u53ea\u9884\u8bbe\u4e86\u90e8\u5206\u53c2\u6570\u7684\u503c\uff0c\u800c\u4e14\u4e24\u4efd\u521d\u59cb\u914d\u7f6e\u6587\u4ef6\u5185\u7684\u53c2\u6570\u503c\u4e5f\u7565\u6709\u4e0d\u540c\uff0c\u672c\u6587\u7684\u9884\u8bbe\u503c\u4ee5<code>nebula-graphd.conf.default</code>\u4e3a\u51c6\u3002</p> <p>Caution</p> <p>\u914d\u7f6e\u6587\u4ef6\u4e2d\u7684\u90e8\u5206\u53c2\u6570\u503c\u53ef\u4ee5\u5728\u8fd0\u884c\u65f6\u52a8\u6001\u4fee\u6539\u3002\u672c\u6587\u5c06\u8fd9\u4e9b\u53c2\u6570\u6807\u8bb0\u4e3a\u652f\u6301\u8fd0\u884c\u65f6\u52a8\u6001\u4fee\u6539\uff0c\u5e76\u5f53<code>local_config</code>\u503c\u8bbe\u7f6e\u4e3a<code>true</code>\u65f6\u91cd\u542f\u670d\u52a1\u540e\u914d\u7f6e\u4f1a\u6062\u590d\u4e3a\u521d\u59cb\u914d\u7f6e\u3002\u8be6\u60c5\u53c2\u89c1\u4fee\u6539\u914d\u7f6e\u3002</p> <p>\u5982\u9700\u67e5\u770b\u6240\u6709\u7684\u53c2\u6570\u53ca\u5176\u5f53\u524d\u503c\uff0c\u53c2\u89c1\u914d\u7f6e\u7ba1\u7406\u3002</p>"},{"location":"5.configurations-and-logs/1.configurations/3.graph-config/#basics","title":"basics \u914d\u7f6e","text":"\u540d\u79f0 \u9884\u8bbe\u503c \u8bf4\u660e \u662f\u5426\u652f\u6301\u8fd0\u884c\u65f6\u52a8\u6001\u4fee\u6539 <code>daemonize</code> <code>true</code> \u662f\u5426\u542f\u52a8\u5b88\u62a4\u8fdb\u7a0b\u3002 \u4e0d\u652f\u6301 <code>pid_file</code> <code>pids/nebula-graphd.pid</code> \u8bb0\u5f55\u8fdb\u7a0b ID \u7684\u6587\u4ef6\u3002 \u4e0d\u652f\u6301 <code>enable_optimizer</code> <code>true</code> \u662f\u5426\u542f\u7528\u4f18\u5316\u5668\u3002 \u4e0d\u652f\u6301 <code>timezone_name</code> - \u6307\u5b9a NebulaGraph \u7684\u65f6\u533a\u3002\u521d\u59cb\u914d\u7f6e\u6587\u4ef6\u4e2d\u672a\u8bbe\u7f6e\u8be5\u53c2\u6570\uff0c\u4f7f\u7528\u9700\u624b\u52a8\u6dfb\u52a0\u3002\u7cfb\u7edf\u9ed8\u8ba4\u503c\u4e3a<code>UTC+00:00:00</code>\u3002\u683c\u5f0f\u8bf7\u53c2\u89c1 Specifying the Time Zone with TZ\u3002\u4f8b\u5982\uff0c\u4e1c\u516b\u533a\u7684\u8bbe\u7f6e\u65b9\u5f0f\u4e3a<code>--timezone_name=UTC+08:00</code>\u3002 \u4e0d\u652f\u6301 <code>default_charset</code> <code>utf8</code> \u521b\u5efa\u56fe\u7a7a\u95f4\u65f6\u7684\u9ed8\u8ba4\u5b57\u7b26\u96c6\u3002 \u4e0d\u652f\u6301 <code>default_collate</code> <code>utf8_bin</code> \u521b\u5efa\u56fe\u7a7a\u95f4\u65f6\u7684\u9ed8\u8ba4\u6392\u5e8f\u89c4\u5219\u3002 \u4e0d\u652f\u6301 <code>local_config</code> <code>true</code> \u662f\u5426\u4ece\u914d\u7f6e\u6587\u4ef6\u83b7\u53d6\u914d\u7f6e\u4fe1\u606f\u3002 \u4e0d\u652f\u6301 <p>Note</p> <ul> <li>\u5728\u63d2\u5165\u65f6\u95f4\u7c7b\u578b \u7684\u5c5e\u6027\u503c\u65f6\uff0cNebulaGraph \u4f1a\u6839\u636e<code>timezone_name</code>\u8bbe\u7f6e\u7684\u65f6\u533a\u5c06\u8be5\u65f6\u95f4\u503c\uff08TIMESTAMP \u7c7b\u578b\u4f8b\u5916\uff09\u8f6c\u6362\u6210\u76f8\u5e94\u7684 UTC \u65f6\u95f4\uff0c\u56e0\u6b64\u5728\u67e5\u8be2\u4e2d\u8fd4\u56de\u7684\u65f6\u95f4\u7c7b\u578b\u5c5e\u6027\u503c\u4e3a UTC \u65f6\u95f4\u3002</li> <li><code>timezone_name</code>\u53c2\u6570\u53ea\u7528\u4e8e\u8f6c\u6362 NebulaGraph \u4e2d\u5b58\u50a8\u7684\u6570\u636e\uff0cNebulaGraph \u8fdb\u7a0b\u4e2d\u5176\u5b83\u65f6\u533a\u76f8\u5173\u6570\u636e\uff0c\u4f8b\u5982\u65e5\u5fd7\u6253\u5370\u7684\u65f6\u95f4\u7b49\uff0c\u4ecd\u7136\u4f7f\u7528\u4e3b\u673a\u7cfb\u7edf\u9ed8\u8ba4\u7684\u65f6\u533a\u3002</li> </ul>"},{"location":"5.configurations-and-logs/1.configurations/3.graph-config/#logging","title":"logging \u914d\u7f6e","text":"\u540d\u79f0 \u9884\u8bbe\u503c \u8bf4\u660e \u662f\u5426\u652f\u6301\u8fd0\u884c\u65f6\u52a8\u6001\u4fee\u6539 <code>log_dir</code> <code>logs</code> \u5b58\u653e Graph \u670d\u52a1\u65e5\u5fd7\u7684\u76ee\u5f55\uff0c\u5efa\u8bae\u548c\u6570\u636e\u4fdd\u5b58\u5728\u4e0d\u540c\u786c\u76d8\u3002 \u4e0d\u652f\u6301 <code>minloglevel</code> <code>0</code> \u6700\u5c0f\u65e5\u5fd7\u7ea7\u522b\uff0c\u5373\u8bb0\u5f55\u6b64\u7ea7\u522b\u6216\u66f4\u9ad8\u7ea7\u522b\u7684\u65e5\u5fd7\u3002\u53ef\u9009\u503c\u4e3a<code>0</code>\uff08INFO\uff09\u3001<code>1</code>\uff08WARNING\uff09\u3001<code>2</code>\uff08ERROR\uff09\u3001<code>3</code>\uff08FATAL\uff09\u3002\u5efa\u8bae\u5728\u8c03\u8bd5\u65f6\u8bbe\u7f6e\u4e3a<code>0</code>\uff0c\u751f\u4ea7\u73af\u5883\u4e2d\u8bbe\u7f6e\u4e3a<code>1</code>\u3002\u5982\u679c\u8bbe\u7f6e\u4e3a<code>4</code>\uff0cNebulaGraph \u4e0d\u4f1a\u8bb0\u5f55\u4efb\u4f55\u65e5\u5fd7\u3002 \u652f\u6301 <code>v</code> <code>0</code> VLOG \u65e5\u5fd7\u8be6\u7ec6\u7ea7\u522b\uff0c\u5373\u8bb0\u5f55\u5c0f\u4e8e\u6216\u7b49\u4e8e\u6b64\u7ea7\u522b\u7684\u6240\u6709 VLOG \u6d88\u606f\u3002\u53ef\u9009\u503c\u4e3a<code>0</code>\u3001<code>1</code>\u3001<code>2</code>\u3001<code>3</code>\u3001<code>4</code>\u3001<code>5</code>\u3002glog \u63d0\u4f9b\u7684 VLOG \u5b8f\u5141\u8bb8\u7528\u6237\u5b9a\u4e49\u81ea\u5df1\u7684\u6570\u5b57\u65e5\u5fd7\u8bb0\u5f55\u7ea7\u522b\uff0c\u5e76\u7528\u53c2\u6570<code>v</code>\u63a7\u5236\u8bb0\u5f55\u54ea\u4e9b\u8be6\u7ec6\u6d88\u606f\u3002\u8be6\u60c5\u53c2\u89c1 Verbose Logging\u3002 \u652f\u6301 <code>logbufsecs</code> <code>0</code> \u7f13\u51b2\u65e5\u5fd7\u7684\u6700\u5927\u65f6\u95f4\uff0c\u8d85\u65f6\u540e\u8f93\u51fa\u5230\u65e5\u5fd7\u6587\u4ef6\u3002<code>0</code>\u8868\u793a\u5b9e\u65f6\u8f93\u51fa\u3002\u5355\u4f4d\uff1a\u79d2\u3002 \u4e0d\u652f\u6301 <code>redirect_stdout</code> <code>true</code> \u662f\u5426\u5c06\u6807\u51c6\u8f93\u51fa\u548c\u6807\u51c6\u9519\u8bef\u91cd\u5b9a\u5411\u5230\u5355\u72ec\u7684\u8f93\u51fa\u6587\u4ef6\u3002 \u4e0d\u652f\u6301 <code>stdout_log_file</code> <code>graphd-stdout.log</code> \u6807\u51c6\u8f93\u51fa\u65e5\u5fd7\u6587\u4ef6\u540d\u79f0\u3002 \u4e0d\u652f\u6301 <code>stderr_log_file</code> <code>graphd-stderr.log</code> \u6807\u51c6\u9519\u8bef\u65e5\u5fd7\u6587\u4ef6\u540d\u79f0\u3002 \u4e0d\u652f\u6301 <code>stderrthreshold</code> <code>3</code> \u8981\u590d\u5236\u5230\u6807\u51c6\u9519\u8bef\u4e2d\u7684\u6700\u5c0f\u65e5\u5fd7\u7ea7\u522b\uff08<code>minloglevel</code>\uff09\u3002 \u4e0d\u652f\u6301 <code>timestamp_in_logfile_name</code> <code>true</code> \u65e5\u5fd7\u6587\u4ef6\u540d\u79f0\u4e2d\u662f\u5426\u5305\u542b\u65f6\u95f4\u6233\u3002<code>true</code>\u8868\u793a\u5305\u542b\uff0c<code>false</code>\u8868\u793a\u4e0d\u5305\u542b\u3002 \u4e0d\u652f\u6301"},{"location":"5.configurations-and-logs/1.configurations/3.graph-config/#query","title":"query \u914d\u7f6e","text":"\u540d\u79f0 \u9884\u8bbe\u503c \u8bf4\u660e \u662f\u5426\u652f\u6301\u8fd0\u884c\u65f6\u52a8\u6001\u4fee\u6539 <code>accept_partial_success</code> <code>false</code> \u662f\u5426\u5c06\u90e8\u5206\u6210\u529f\u89c6\u4e3a\u9519\u8bef\u3002\u6b64\u914d\u7f6e\u4ec5\u9002\u7528\u4e8e\u53ea\u8bfb\u8bf7\u6c42\uff0c\u5199\u8bf7\u6c42\u603b\u662f\u5c06\u90e8\u5206\u6210\u529f\u89c6\u4e3a\u9519\u8bef\u3002\u67e5\u8be2\u90e8\u5206\u6210\u529f\u65f6\uff0c\u4f1a\u63d0\u793a<code>Got partial result</code>\u3002 \u652f\u6301 <code>session_reclaim_interval_secs</code> <code>60</code> \u5c06 Session \u4fe1\u606f\u53d1\u9001\u7ed9 Meta \u670d\u52a1\u7684\u95f4\u9694\u3002\u5355\u4f4d\uff1a\u79d2\u3002 \u652f\u6301 <code>max_allowed_query_size</code> <code>4194304</code> \u6700\u5927\u67e5\u8be2\u8bed\u53e5\u957f\u5ea6\u3002\u5355\u4f4d\uff1a\u5b57\u8282\u3002\u9ed8\u8ba4\u4e3a<code>4194304</code>\uff0c\u5373 4MB\u3002 \u652f\u6301"},{"location":"5.configurations-and-logs/1.configurations/3.graph-config/#networking","title":"networking \u914d\u7f6e","text":"\u540d\u79f0 \u9884\u8bbe\u503c \u8bf4\u660e \u662f\u5426\u652f\u6301\u8fd0\u884c\u65f6\u52a8\u6001\u4fee\u6539 <code>meta_server_addrs</code> <code>127.0.0.1:9559</code> \u5168\u90e8 Meta \u670d\u52a1\u7684 IP\uff08\u6216\u4e3b\u673a\u540d\uff09\u548c\u7aef\u53e3\u3002\u591a\u4e2a Meta \u670d\u52a1\u7528\u82f1\u6587\u9017\u53f7\uff08,\uff09\u5206\u9694\u3002 \u4e0d\u652f\u6301 <code>local_ip</code> <code>127.0.0.1</code> Graph \u670d\u52a1\u7684\u672c\u5730 IP\uff08\u6216\u4e3b\u673a\u540d\uff09\u3002\u672c\u5730 IP \u7528\u4e8e\u8bc6\u522b nebula-graphd \u8fdb\u7a0b\uff0c\u5982\u679c\u662f\u5206\u5e03\u5f0f\u96c6\u7fa4\u6216\u9700\u8981\u8fdc\u7a0b\u8bbf\u95ee\uff0c\u8bf7\u4fee\u6539\u4e3a\u5bf9\u5e94\u5730\u5740\u3002 \u4e0d\u652f\u6301 <code>listen_netdev</code> <code>any</code> \u76d1\u542c\u7684\u7f51\u7edc\u8bbe\u5907\u3002 \u4e0d\u652f\u6301 <code>port</code> <code>9669</code> Graph \u670d\u52a1\u7684 RPC \u5b88\u62a4\u8fdb\u7a0b\u76d1\u542c\u7aef\u53e3\u3002 \u4e0d\u652f\u6301 <code>reuse_port</code> <code>false</code> \u662f\u5426\u542f\u7528 SO_REUSEPORT\u3002 \u4e0d\u652f\u6301 <code>listen_backlog</code> <code>1024</code> socket \u76d1\u542c\u7684\u8fde\u63a5\u961f\u5217\u6700\u5927\u957f\u5ea6\uff0c\u8c03\u6574\u672c\u53c2\u6570\u9700\u8981\u540c\u65f6\u8c03\u6574<code>net.core.somaxconn</code>\u3002 \u4e0d\u652f\u6301 <code>client_idle_timeout_secs</code> <code>28800</code> \u7a7a\u95f2\u8fde\u63a5\u7684\u8d85\u65f6\u65f6\u95f4\u3002\u53d6\u503c\u8303\u56f4\u4e3a 1~604800\uff0c\u5355\u4f4d\uff1a\u79d2\u3002\u9ed8\u8ba4 8 \u5c0f\u65f6\u3002 \u4e0d\u652f\u6301 <code>session_idle_timeout_secs</code> <code>28800</code> \u7a7a\u95f2\u4f1a\u8bdd\u7684\u8d85\u65f6\u65f6\u95f4\u3002\u53d6\u503c\u8303\u56f4\u4e3a 1~604800\u3002\u9ed8\u8ba4 8 \u5c0f\u65f6\u3002\u5355\u4f4d\uff1a\u79d2\u3002 \u4e0d\u652f\u6301 <code>num_accept_threads</code> <code>1</code> \u63a5\u53d7\u4f20\u5165\u8fde\u63a5\u7684\u7ebf\u7a0b\u6570\u3002 \u4e0d\u652f\u6301 <code>num_netio_threads</code> <code>0</code> \u7f51\u7edc IO \u7ebf\u7a0b\u6570\u3002<code>0</code>\u8868\u793a CPU \u6838\u6570\u3002 \u4e0d\u652f\u6301 <code>num_max_connections</code> <code>0</code> \u6240\u6709\u7f51\u7edc\u7ebf\u7a0b\u7684\u6700\u5927\u6d3b\u52a8\u8fde\u63a5\u6570\uff0c<code>0</code>\u8868\u793a\u6ca1\u6709\u9650\u5236\u3002\u6bcf\u4e2a\u7f51\u7edc\u7ebf\u7a0b\u7684\u6700\u5927\u8fde\u63a5\u6570=<code>num_max_connections</code>/<code>num_netio_threads</code>\u3002 \u4e0d\u652f\u6301 <code>num_worker_threads</code> <code>0</code> \u6267\u884c\u7528\u6237\u67e5\u8be2\u7684\u7ebf\u7a0b\u6570\u3002<code>0</code>\u8868\u793a CPU \u6838\u6570\u3002 \u4e0d\u652f\u6301 <code>ws_ip</code> <code>0.0.0.0</code> HTTP \u670d\u52a1\u7684 IP \u5730\u5740\u3002 \u4e0d\u652f\u6301 <code>ws_http_port</code> <code>19669</code> HTTP \u670d\u52a1\u7684\u7aef\u53e3\u3002 \u4e0d\u652f\u6301 <code>heartbeat_interval_secs</code> <code>10</code> \u9ed8\u8ba4\u5fc3\u8df3\u95f4\u9694\u3002\u8bf7\u786e\u4fdd\u6240\u6709\u670d\u52a1\u7684<code>heartbeat_interval_secs</code>\u53d6\u503c\u76f8\u540c\uff0c\u5426\u5219\u4f1a\u5bfc\u81f4\u7cfb\u7edf\u65e0\u6cd5\u6b63\u5e38\u5de5\u4f5c\u3002\u5355\u4f4d\uff1a\u79d2\u3002 \u652f\u6301 <code>storage_client_timeout_ms</code> - Graph \u670d\u52a1\u4e0e Storage \u670d\u52a1\u7684 RPC \u8fde\u63a5\u8d85\u65f6\u65f6\u95f4\u3002\u521d\u59cb\u914d\u7f6e\u6587\u4ef6\u4e2d\u672a\u8bbe\u7f6e\u8be5\u53c2\u6570\uff0c\u4f7f\u7528\u9700\u624b\u52a8\u6dfb\u52a0\u3002\u9ed8\u8ba4\u503c\u4e3a<code>60000</code>\u6beb\u79d2\u3002 \u4e0d\u652f\u6301 <code>slow_query_threshold_us</code> <code>200000</code> \u5b9a\u4e49\u8d85\u8fc7\u591a\u957f\u65f6\u95f4\u7684\u67e5\u8be2\u4e3a\u6162\u67e5\u8be2\u3002\u5355\u4f4d\uff1a\u5fae\u79d2\u3002\u6ce8\u610f\uff1aDML \u8bed\u53e5\u7684\u6267\u884c\u65f6\u95f4\u5373\u4f7f\u8d85\u8fc7\u8be5\u503c\uff0c\u4e5f\u4e0d\u4f1a\u88ab\u8bb0\u5f55\u4e3a\u6162\u67e5\u8be2\u3002 \u4e0d\u652f\u6301 <code>ws_meta_http_port</code> <code>19559</code> HTTP \u534f\u8bae\u76d1\u542c Meta \u670d\u52a1\u7684\u7aef\u53e3\uff0c\u9700\u8981\u548c Meta \u670d\u52a1\u914d\u7f6e\u6587\u4ef6\u4e2d\u7684<code>ws_http_port</code>\u4fdd\u6301\u4e00\u81f4\u3002 \u4e0d\u652f\u6301 <p>Caution</p> <p>\u4f7f\u7528 IP \u65f6\u5efa\u8bae\u4f7f\u7528\u771f\u5b9e\u7684 IP\u3002\u5426\u5219\u67d0\u4e9b\u60c5\u51b5\u4e0b<code>127.0.0.1/0.0.0.0</code>\u65e0\u6cd5\u6b63\u786e\u89e3\u6790\u3002</p>"},{"location":"5.configurations-and-logs/1.configurations/3.graph-config/#authorization","title":"authorization \u914d\u7f6e","text":"\u540d\u79f0 \u9884\u8bbe\u503c \u8bf4\u660e \u662f\u5426\u652f\u6301\u8fd0\u884c\u65f6\u52a8\u6001\u4fee\u6539 <code>enable_authorize</code> <code>false</code> \u7528\u6237\u767b\u5f55\u65f6\u662f\u5426\u8fdb\u884c\u8eab\u4efd\u9a8c\u8bc1\u3002\u8eab\u4efd\u9a8c\u8bc1\u8be6\u60c5\u8bf7\u53c2\u89c1\u8eab\u4efd\u9a8c\u8bc1\u3002 \u4e0d\u652f\u6301 <code>auth_type</code> <code>password</code> \u7528\u6237\u767b\u5f55\u7684\u8eab\u4efd\u9a8c\u8bc1\u65b9\u5f0f\u3002\u53d6\u503c\u4e3a<code>password</code>\u3001<code>ldap</code>\u3001<code>cloud</code>\u3002 \u4e0d\u652f\u6301"},{"location":"5.configurations-and-logs/1.configurations/3.graph-config/#memory","title":"memory \u914d\u7f6e","text":"\u540d\u79f0 \u9884\u8bbe\u503c \u8bf4\u660e \u662f\u5426\u652f\u6301\u8fd0\u884c\u65f6\u52a8\u6001\u4fee\u6539 <code>system_memory_high_watermark_ratio</code> <code>0.8</code> \u5185\u5b58\u9ad8\u6c34\u4f4d\u62a5\u8b66\u673a\u5236\u7684\u89e6\u53d1\u9608\u503c\u3002\u7cfb\u7edf\u5185\u5b58\u5360\u7528\u7387\u9ad8\u4e8e\u8be5\u503c\u4f1a\u89e6\u53d1\u62a5\u8b66\u673a\u5236\uff0cNebulaGraph \u4f1a\u505c\u6b62\u63a5\u53d7\u67e5\u8be2\u3002 \u652f\u6301"},{"location":"5.configurations-and-logs/1.configurations/3.graph-config/#metrics","title":"metrics \u914d\u7f6e","text":"\u540d\u79f0 \u9884\u8bbe\u503c \u8bf4\u660e \u662f\u5426\u652f\u6301\u8fd0\u884c\u65f6\u52a8\u6001\u4fee\u6539 <code>enable_space_level_metrics</code> <code>false</code> \u5f00\u542f\u540e\u53ef\u6253\u5f00\u56fe\u7a7a\u95f4\u7ea7\u522b\u7684\u76d1\u63a7\uff0c\u5bf9\u5e94\u7684\u76d1\u63a7\u6307\u6807\u540d\u79f0\u4e2d\u5305\u542b\u56fe\u7a7a\u95f4\u7684\u540d\u79f0\uff0c\u4f8b\u5982<code>query_latency_us{space=basketballplayer}.avg.3600</code>\u3002\u652f\u6301\u7684\u76d1\u63a7\u6307\u6807\u53ef\u7528<code>curl</code>\u547d\u4ee4\u67e5\u770b\uff0c\u8be6\u7ec6\u8bf4\u660e\u53c2\u89c1\u67e5\u8be2\u76d1\u63a7\u6307\u6807\u3002 \u4e0d\u652f\u6301"},{"location":"5.configurations-and-logs/1.configurations/3.graph-config/#session","title":"session \u914d\u7f6e","text":"\u540d\u79f0 \u9884\u8bbe\u503c \u8bf4\u660e \u662f\u5426\u652f\u6301\u8fd0\u884c\u65f6\u52a8\u6001\u4fee\u6539 <code>max_sessions_per_ip_per_user</code> <code>300</code> \u76f8\u540c\u7528\u6237\u548c IP \u5730\u5740\u53ef\u4ee5\u521b\u5efa\u7684\u6700\u5927\u6d3b\u8dc3\u4f1a\u8bdd\u6570\u3002 \u4e0d\u652f\u6301"},{"location":"5.configurations-and-logs/1.configurations/3.graph-config/#experimental","title":"experimental \u914d\u7f6e","text":"\u540d\u79f0 \u9884\u8bbe\u503c \u8bf4\u660e \u662f\u5426\u652f\u6301\u8fd0\u884c\u65f6\u52a8\u6001\u4fee\u6539 <code>enable_experimental_feature</code> <code>false</code> \u5b9e\u9a8c\u6027\u529f\u80fd\u5f00\u5173\u3002\u53ef\u9009\u503c\u4e3a<code>true</code>\u548c<code>false</code>\u3002 \u4e0d\u652f\u6301 <code>enable_data_balance</code> <code>true</code> \u662f\u5426\u5f00\u542f\u5747\u8861\u5206\u7247\u529f\u80fd\u3002\u4ec5\u5f53<code>enable_experimental_feature</code>\u4e3a<code>true</code>\u65f6\u751f\u6548\u3002 \u4e0d\u652f\u6301"},{"location":"5.configurations-and-logs/1.configurations/3.graph-config/#memory_tracker","title":"memory tracker \u914d\u7f6e","text":"<p>\u6709\u5173 Memory Tracker \u7684\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u89c1\u56fe\u6570\u636e\u5e93 NebulaGraph \u7684\u5185\u5b58\u7ba1\u7406\u5b9e\u8df5\u4e4b Memory Tracker\u3002</p> \u540d\u79f0 \u9884\u8bbe\u503c \u8bf4\u660e \u662f\u5426\u652f\u6301\u8fd0\u884c\u65f6\u52a8\u6001\u4fee\u6539 <code>memory_tracker_limit_ratio</code> <code>0.8</code> \u53d6\u503c\u53ef\u8bbe\u7f6e\u4e3a\uff1a<code>(0, 1]</code>\u3001<code>2</code>\u3001<code>3</code>\u3002\u8b66\u60d5\uff1a\u8bbe\u7f6e\u8be5\u53c2\u6570\u65f6\u8bf7\u786e\u4fdd<code>system_memory_high_watermark_ratio</code>\u7684\u503c\u4e0d\u4e3a<code>1</code>\uff0c\u5426\u5219\u8be5\u53c2\u6570\u7684\u503c\u4e0d\u751f\u6548\u3002<code>(0, 1]</code>\uff1a\u53ef\u7528\u5185\u5b58\u7684\u767e\u5206\u6bd4\u3002\u8ba1\u7b97\u516c\u5f0f\uff1a\u53ef\u7528\u5185\u5b58\u7684\u767e\u5206\u6bd4 = \u53ef\u7528\u5185\u5b58 / (\u603b\u5185\u5b58 - \u4fdd\u7559\u5185\u5b58)\u3002\u5f53\u6b63\u5728\u8fdb\u884c\u7684\u67e5\u8be2\u5bfc\u81f4\u5185\u5b58\u4f7f\u7528\u8d85\u8fc7\u914d\u7f6e\u7684\u5185\u5b58\u9650\u5236\u65f6\uff0c\u8be5\u67e5\u8be2\u4f1a\u5931\u8d25\uff0c\u5e76\u5728\u5931\u8d25\u540e\u91ca\u653e\u5185\u5b58\u3002 \u6ce8\u610f\uff1a\u5bf9\u4e8e\u4e91\u4e0a\u548c\u672c\u5730\u8282\u70b9\u6df7\u5408\u90e8\u7f72\u7684\u96c6\u7fa4\uff0c\u9700\u8981\u6839\u636e\u5b9e\u9645\u60c5\u51b5\u8c03\u5c0f\u8be5\u53c2\u6570\u3002\u4f8b\u5982\uff0c\u5f53\u9884\u671f Graphd \u53ea\u5360\u7528 50% \u7684\u5185\u5b58\u65f6\uff0c\u8be5\u53c2\u6570\u7684\u503c\u53ef\u8bbe\u7f6e\u4e3a\u5c0f\u4e8e<code>0.5</code>\u3002<code>2</code>\uff1a\u52a8\u6001\u81ea\u9002\u5e94\u6a21\u5f0f\uff08Dynamic Self Adaptive\uff09\uff0cMemory Tracker \u4f1a\u6839\u636e\u7cfb\u7edf\u5f53\u524d\u7684\u53ef\u7528\u5185\u5b58\uff0c\u52a8\u6001\u8c03\u6574\u53ef\u7528\u5185\u5b58\u3002\u6ce8\u610f\uff1a\u6b64\u529f\u80fd\u4e3a\u5b9e\u9a8c\u6027\u529f\u80fd\uff0c\u7531\u4e8e\u52a8\u6001\u81ea\u9002\u5e94\u4e0d\u80fd\u505a\u5230\u5b9e\u65f6\u76d1\u63a7\u64cd\u4f5c\u7cfb\u7edf\u5185\u5b58\u4f7f\u7528\u60c5\u51b5\uff0c\u5728\u4e00\u4e9b\u5927\u5185\u5b58\u5206\u914d\u7684\u573a\u666f\uff0c\u8fd8\u662f\u4f1a\u5b58\u5728 OOM \u53ef\u80fd\u3002<code>3</code>\uff1a\u5173\u6389 Memory Tracker\uff0cMemory Tracker \u5c06\u53ea\u8bb0\u5f55\u5185\u5b58\u4f7f\u7528\u60c5\u51b5\uff0c\u5373\u4f7f\u8d85\u8fc7\u9650\u989d\uff0c\u4e5f\u4e0d\u4f1a\u5e72\u9884\u6267\u884c\u3002 \u652f\u6301 <code>memory_tracker_untracked_reserved_memory_mb</code> <code>50</code> \u4fdd\u7559\u5185\u5b58\u7684\u5927\u5c0f\uff0c\u5355\u4f4d\uff1aMB\u3002 \u652f\u6301 <code>memory_tracker_detail_log</code> <code>false</code> \u662f\u5426\u5b9a\u671f\u751f\u6210\u8f83\u8be6\u7ec6\u7684\u5185\u5b58\u8ddf\u8e2a\u65e5\u5fd7\u3002\u5f53\u503c\u4e3a<code>true</code>\u65f6\uff0c\u4f1a\u5b9a\u671f\u751f\u6210\u5185\u5b58\u8ddf\u8e2a\u65e5\u5fd7\u3002 \u652f\u6301 <code>memory_tracker_detail_log_interval_ms</code> <code>60000</code> \u5185\u5b58\u8ddf\u8e2a\u65e5\u5fd7\u7684\u751f\u6210\u65f6\u95f4\u95f4\u9694\uff0c\u5355\u4f4d\uff1a\u6beb\u79d2\u3002\u4ec5\u5f53<code>memory_tracker_detail_log</code>\u4e3a<code>true</code>\u65f6\uff0c\u8be5\u53c2\u6570\u751f\u6548\u3002 \u652f\u6301 <code>memory_purge_enabled</code> <code>true</code> \u662f\u5426\u5b9a\u671f\u5f00\u542f\u5185\u5b58\u6e05\u7406\u529f\u80fd\u3002\u5f53\u503c\u4e3a<code>true</code>\u65f6\uff0c\u4f1a\u5b9a\u671f\u6e05\u7406\u5185\u5b58\u3002 \u652f\u6301 <code>memory_purge_interval_seconds</code> <code>10</code> \u5185\u5b58\u6e05\u7406\u7684\u65f6\u95f4\u95f4\u9694\uff0c\u5355\u4f4d\uff1a\u79d2\u3002<code>memory_purge_enabled</code>\u4e3a<code>true</code>\u65f6\uff0c\u8be5\u53c2\u6570\u751f\u6548\u3002 \u652f\u6301"},{"location":"5.configurations-and-logs/1.configurations/3.graph-config/#performance_optimization","title":"performance optimization \u914d\u7f6e","text":"\u540d\u79f0 \u9884\u8bbe\u503c \u8bf4\u660e \u662f\u5426\u652f\u6301\u8fd0\u884c\u65f6\u52a8\u6001\u4fee\u6539 <code>max_job_size</code> <code>1</code> \u6700\u5927\u4f5c\u4e1a\u5e76\u53d1\u6570\uff0c\u5373\u67e5\u8be2\u6267\u884c\u65f6\u5728\u53ef\u4ee5\u5e76\u53d1\u6267\u884c\u7684\u9636\u6bb5\u6240\u91c7\u7528\u7684\u6700\u5927\u7ebf\u7a0b\u6570\u3002\u5efa\u8bae\u4e3a\u7269\u7406 CPU \u6838\u6570\u7684\u4e00\u534a\u3002 \u652f\u6301 <code>min_batch_size</code> <code>8192</code> \u5904\u7406\u6570\u636e\u96c6\u7684\u6700\u5c0f\u6279\u5904\u7406\u5927\u5c0f\u3002\u4ec5\u5728<code>max_job_size</code>\u5927\u4e8e 1 \u65f6\u751f\u6548\u3002 \u652f\u6301 <code>optimize_appendvertices</code> <code>false</code> \u542f\u7528\u540e\uff0c\u6267\u884c<code>MATCH</code>\u8bed\u53e5\u65f6\u4e0d\u8fc7\u6ee4\u60ac\u6302\u8fb9\u3002 \u652f\u6301 <code>path_batch_size</code> <code>10000</code> \u6bcf\u4e2a\u7ebf\u7a0b\u6784\u5efa\u7684\u8def\u5f84\u6570\u3002 \u652f\u6301"},{"location":"5.configurations-and-logs/1.configurations/4.storage-config/","title":"Storage \u670d\u52a1\u914d\u7f6e","text":"<p>Storage \u670d\u52a1\u63d0\u4f9b\u4e86\u4e24\u4efd\u521d\u59cb\u914d\u7f6e\u6587\u4ef6<code>nebula-storaged.conf.default</code>\u548c<code>nebula-storaged.conf.production</code>\uff0c\u65b9\u4fbf\u5728\u4e0d\u540c\u573a\u666f\u4e2d\u4f7f\u7528\u3002\u6587\u4ef6\u7684\u9ed8\u8ba4\u8def\u5f84\u4e3a<code>/usr/local/nebula/etc/</code>\u3002</p> <p>Caution</p> <ul> <li>\u4e0d\u5efa\u8bae\u4fee\u6539<code>local_config</code>\u7684\u503c\u4e3a<code>false</code>\u3002\u4fee\u6539\u914d\u7f6e\u5e76\u91cd\u542f Storage \u670d\u52a1\uff0c\u4f1a\u5148\u5c1d\u8bd5\u4ece Meta \u670d\u52a1\u83b7\u53d6\u7f13\u5b58\u7684\u914d\u7f6e\u4fe1\u606f\uff0c\u53ef\u80fd\u5bfc\u81f4\u96c6\u7fa4\u914d\u7f6e\u4e0d\u4e00\u81f4\uff0c\u9020\u6210\u672a\u77e5\u98ce\u9669\u3002</li> <li>\u4e0d\u5efa\u8bae\u4fee\u6539\u6587\u6863\u672a\u4ecb\u7ecd\u7684\u914d\u7f6e\u9879\uff0c\u9664\u975e\u5df2\u7ecf\u719f\u6089\u6e90\u4ee3\u7801\u5e76\u5b8c\u5168\u4e86\u89e3\u914d\u7f6e\u9879\u7684\u4f5c\u7528\u3002</li> </ul>"},{"location":"5.configurations-and-logs/1.configurations/4.storage-config/#_1","title":"\u914d\u7f6e\u6587\u4ef6\u4f7f\u7528\u65b9\u5f0f","text":"<p>\u5982\u9700\u4f7f\u7528\u521d\u59cb\u914d\u7f6e\u6587\u4ef6\uff0c\u4ece\u4e0a\u8ff0\u4e24\u4e2a\u6587\u4ef6\u9009\u62e9\u5176\u4e00\uff0c\u5220\u9664\u540e\u7f00<code>.default</code>\u6216<code>.production</code>\uff0cStorage \u670d\u52a1\u624d\u80fd\u5c06\u5176\u8bc6\u522b\u4e3a\u914d\u7f6e\u6587\u4ef6\u5e76\u4ece\u4e2d\u83b7\u53d6\u914d\u7f6e\u4fe1\u606f\u3002</p>"},{"location":"5.configurations-and-logs/1.configurations/4.storage-config/#_2","title":"\u914d\u7f6e\u6587\u4ef6\u53c2\u6570\u503c\u8bf4\u660e","text":"<p>\u914d\u7f6e\u6587\u4ef6\u5185\u6ca1\u6709\u8bbe\u7f6e\u67d0\u4e2a\u53c2\u6570\u8868\u793a\u53c2\u6570\u4f7f\u7528\u7684\u662f\u9ed8\u8ba4\u503c\u3002\u6587\u4ef6\u5185\u53ea\u9884\u8bbe\u4e86\u90e8\u5206\u53c2\u6570\u7684\u503c\uff0c\u800c\u4e14\u4e24\u4efd\u521d\u59cb\u914d\u7f6e\u6587\u4ef6\u5185\u7684\u53c2\u6570\u503c\u4e5f\u7565\u6709\u4e0d\u540c\uff0c\u672c\u6587\u7684\u9884\u8bbe\u503c\u4ee5<code>nebula-storaged.conf.default</code>\u6587\u4ef6\u4e3a\u51c6\uff0c\u5176\u4e2d\u6ca1\u6709\u7684\u53c2\u6570\u5219\u4ee5<code>nebula-storaged.conf.production</code>\u6587\u4ef6\u4e3a\u51c6\u3002</p> <p>Caution</p> <p>\u914d\u7f6e\u6587\u4ef6\u4e2d\u7684\u90e8\u5206\u53c2\u6570\u503c\u53ef\u4ee5\u5728\u8fd0\u884c\u65f6\u52a8\u6001\u4fee\u6539\u3002\u672c\u6587\u5c06\u8fd9\u4e9b\u53c2\u6570\u6807\u8bb0\u4e3a\u652f\u6301\u8fd0\u884c\u65f6\u52a8\u6001\u4fee\u6539\uff0c\u5e76\u5f53<code>local_config</code>\u503c\u8bbe\u7f6e\u4e3a<code>true</code>\u65f6\u91cd\u542f\u670d\u52a1\u540e\u914d\u7f6e\u4f1a\u6062\u590d\u4e3a\u521d\u59cb\u914d\u7f6e\u3002\u8be6\u60c5\u53c2\u89c1\u4fee\u6539\u914d\u7f6e\u3002</p> <p>Note</p> <p>Raft Listener \u7684\u914d\u7f6e\u548c Storage \u670d\u52a1\u914d\u7f6e\u4e0d\u540c\uff0c\u8be6\u60c5\u8bf7\u53c2\u89c1\u90e8\u7f72 Raft listener\u3002</p> <p>\u5982\u9700\u67e5\u770b\u6240\u6709\u7684\u53c2\u6570\u53ca\u5176\u5f53\u524d\u503c\uff0c\u53c2\u89c1\u914d\u7f6e\u7ba1\u7406\u3002</p>"},{"location":"5.configurations-and-logs/1.configurations/4.storage-config/#basics","title":"basics \u914d\u7f6e","text":"\u540d\u79f0 \u9884\u8bbe\u503c \u8bf4\u660e \u662f\u5426\u652f\u6301\u8fd0\u884c\u65f6\u52a8\u6001\u4fee\u6539 <code>daemonize</code> <code>true</code> \u662f\u5426\u542f\u52a8\u5b88\u62a4\u8fdb\u7a0b\u3002 \u4e0d\u652f\u6301 <code>pid_file</code> <code>pids/nebula-storaged.pid</code> \u8bb0\u5f55\u8fdb\u7a0b ID \u7684\u6587\u4ef6\u3002 \u4e0d\u652f\u6301 <code>timezone_name</code> <code>UTC+00:00:00</code> \u6307\u5b9a NebulaGraph \u7684\u65f6\u533a\u3002\u521d\u59cb\u914d\u7f6e\u6587\u4ef6\u4e2d\u672a\u8bbe\u7f6e\u8be5\u53c2\u6570\uff0c\u5982\u9700\u4f7f\u7528\u8bf7\u624b\u52a8\u6dfb\u52a0\u3002\u683c\u5f0f\u8bf7\u53c2\u89c1 Specifying the Time Zone with TZ\u3002\u4f8b\u5982\uff0c\u4e1c\u516b\u533a\u7684\u8bbe\u7f6e\u65b9\u5f0f\u4e3a<code>--timezone_name=UTC+08:00</code>\u3002 \u4e0d\u652f\u6301 <code>local_config</code> <code>true</code> \u662f\u5426\u4ece\u914d\u7f6e\u6587\u4ef6\u83b7\u53d6\u914d\u7f6e\u4fe1\u606f\u3002 \u4e0d\u652f\u6301 <p>Note</p> <ul> <li>\u5728\u63d2\u5165\u65f6\u95f4\u7c7b\u578b\u7684\u5c5e\u6027\u503c\u65f6\uff0cNebulaGraph \u4f1a\u6839\u636e<code>timezone_name</code>\u8bbe\u7f6e\u7684\u65f6\u533a\u5c06\u8be5\u65f6\u95f4\u503c\uff08TIMESTAMP \u7c7b\u578b\u4f8b\u5916\uff09\u8f6c\u6362\u6210\u76f8\u5e94\u7684 UTC \u65f6\u95f4\uff0c\u56e0\u6b64\u5728\u67e5\u8be2\u4e2d\u8fd4\u56de\u7684\u65f6\u95f4\u7c7b\u578b\u5c5e\u6027\u503c\u4e3a UTC \u65f6\u95f4\u3002</li> <li><code>timezone_name</code>\u53c2\u6570\u53ea\u7528\u4e8e\u8f6c\u6362 NebulaGraph \u4e2d\u5b58\u50a8\u7684\u6570\u636e\uff0cNebulaGraph \u8fdb\u7a0b\u4e2d\u5176\u5b83\u65f6\u533a\u76f8\u5173\u6570\u636e\uff0c\u4f8b\u5982\u65e5\u5fd7\u6253\u5370\u7684\u65f6\u95f4\u7b49\uff0c\u4ecd\u7136\u4f7f\u7528\u4e3b\u673a\u7cfb\u7edf\u9ed8\u8ba4\u7684\u65f6\u533a\u3002</li> </ul>"},{"location":"5.configurations-and-logs/1.configurations/4.storage-config/#logging","title":"logging \u914d\u7f6e","text":"\u540d\u79f0 \u9884\u8bbe\u503c \u8bf4\u660e \u662f\u5426\u652f\u6301\u8fd0\u884c\u65f6\u52a8\u6001\u4fee\u6539 <code>log_dir</code> <code>logs</code> \u5b58\u653e Storage \u670d\u52a1\u65e5\u5fd7\u7684\u76ee\u5f55\uff0c\u5efa\u8bae\u548c\u6570\u636e\u4fdd\u5b58\u5728\u4e0d\u540c\u786c\u76d8\u3002 \u4e0d\u652f\u6301 <code>minloglevel</code> <code>0</code> \u6700\u5c0f\u65e5\u5fd7\u7ea7\u522b\uff0c\u5373\u8bb0\u5f55\u6b64\u7ea7\u522b\u6216\u66f4\u9ad8\u7ea7\u522b\u7684\u65e5\u5fd7\u3002\u53ef\u9009\u503c\uff1a<code>0</code>\uff08INFO\uff09\u3001<code>1</code>\uff08WARNING\uff09\u3001<code>2</code>\uff08ERROR\uff09\u3001<code>3</code>\uff08FATAL\uff09\u3002\u5efa\u8bae\u5728\u8c03\u8bd5\u65f6\u8bbe\u7f6e\u4e3a<code>0</code>\uff0c\u751f\u4ea7\u73af\u5883\u4e2d\u8bbe\u7f6e\u4e3a<code>1</code>\u3002\u5982\u679c\u8bbe\u7f6e\u4e3a<code>4</code>\uff0cNebulaGraph \u4e0d\u4f1a\u8bb0\u5f55\u4efb\u4f55\u65e5\u5fd7\u3002 \u652f\u6301 <code>v</code> <code>0</code> VLOG \u65e5\u5fd7\u8be6\u7ec6\u7ea7\u522b\uff0c\u5373\u8bb0\u5f55\u5c0f\u4e8e\u6216\u7b49\u4e8e\u6b64\u7ea7\u522b\u7684\u6240\u6709 VLOG \u6d88\u606f\u3002\u53ef\u9009\u503c\u4e3a<code>0</code>\u3001<code>1</code>\u3001<code>2</code>\u3001<code>3</code>\u3001<code>4</code>\u3001<code>5</code>\u3002glog \u63d0\u4f9b\u7684 VLOG \u5b8f\u5141\u8bb8\u7528\u6237\u5b9a\u4e49\u81ea\u5df1\u7684\u6570\u5b57\u65e5\u5fd7\u8bb0\u5f55\u7ea7\u522b\uff0c\u5e76\u7528\u53c2\u6570<code>v</code>\u63a7\u5236\u8bb0\u5f55\u54ea\u4e9b\u8be6\u7ec6\u6d88\u606f\u3002\u8be6\u60c5\u53c2\u89c1 Verbose Logging\u3002 \u652f\u6301 <code>logbufsecs</code> <code>0</code> \u7f13\u51b2\u65e5\u5fd7\u7684\u6700\u5927\u65f6\u95f4\uff0c\u8d85\u65f6\u540e\u8f93\u51fa\u5230\u65e5\u5fd7\u6587\u4ef6\u3002<code>0</code>\u8868\u793a\u5b9e\u65f6\u8f93\u51fa\u3002\u5355\u4f4d\uff1a\u79d2\u3002 \u4e0d\u652f\u6301 <code>redirect_stdout</code> <code>true</code> \u662f\u5426\u5c06\u6807\u51c6\u8f93\u51fa\u548c\u6807\u51c6\u9519\u8bef\u91cd\u5b9a\u5411\u5230\u5355\u72ec\u7684\u8f93\u51fa\u6587\u4ef6\u3002 \u4e0d\u652f\u6301 <code>stdout_log_file</code> <code>storaged-stdout.log</code> \u6807\u51c6\u8f93\u51fa\u65e5\u5fd7\u6587\u4ef6\u540d\u79f0\u3002 \u4e0d\u652f\u6301 <code>stderr_log_file</code> <code>storaged-stderr.log</code> \u6807\u51c6\u9519\u8bef\u65e5\u5fd7\u6587\u4ef6\u540d\u79f0\u3002 \u4e0d\u652f\u6301 <code>stderrthreshold</code> <code>3</code> \u8981\u590d\u5236\u5230\u6807\u51c6\u9519\u8bef\u4e2d\u7684\u6700\u5c0f\u65e5\u5fd7\u7ea7\u522b\uff08<code>minloglevel</code>\uff09\u3002 \u4e0d\u652f\u6301 <code>timestamp_in_logfile_name</code> <code>true</code> \u65e5\u5fd7\u6587\u4ef6\u540d\u79f0\u4e2d\u662f\u5426\u5305\u542b\u65f6\u95f4\u6233\u3002<code>true</code>\u8868\u793a\u5305\u542b\uff0c<code>false</code>\u8868\u793a\u4e0d\u5305\u542b\u3002 \u4e0d\u652f\u6301"},{"location":"5.configurations-and-logs/1.configurations/4.storage-config/#networking","title":"networking \u914d\u7f6e","text":"\u540d\u79f0 \u9884\u8bbe\u503c \u8bf4\u660e \u662f\u5426\u652f\u6301\u8fd0\u884c\u65f6\u52a8\u6001\u4fee\u6539 <code>meta_server_addrs</code> <code>127.0.0.1:9559</code> \u5168\u90e8 Meta \u670d\u52a1\u7684 IP\uff08\u6216\u4e3b\u673a\u540d\uff09\u548c\u7aef\u53e3\u3002\u591a\u4e2a Meta \u670d\u52a1\u7528\u82f1\u6587\u9017\u53f7\uff08,\uff09\u5206\u9694\u3002 \u4e0d\u652f\u6301 <code>local_ip</code> <code>127.0.0.1</code> Storage \u670d\u52a1\u7684\u672c\u5730 IP\uff08\u6216\u4e3b\u673a\u540d\uff09\u3002\u672c\u5730 IP \u5730\u5740\u7528\u4e8e\u8bc6\u522b nebula-storaged \u8fdb\u7a0b\uff0c\u5982\u679c\u662f\u5206\u5e03\u5f0f\u96c6\u7fa4\u6216\u9700\u8981\u8fdc\u7a0b\u8bbf\u95ee\uff0c\u8bf7\u4fee\u6539\u4e3a\u5bf9\u5e94\u5730\u5740\u3002 \u4e0d\u652f\u6301 <code>port</code> <code>9779</code> Storage \u670d\u52a1\u7684 RPC \u5b88\u62a4\u8fdb\u7a0b\u76d1\u542c\u7aef\u53e3\u3002\u540c\u65f6\u8fd8\u4f1a\u4f7f\u7528\u76f8\u90bb\u7684<code>-1</code>\uff08<code>9778</code>\uff09\u548c<code>+1</code>\uff08<code>9780</code>\uff09\u7aef\u53e3\u3002<code>9778</code>\uff1aAdmin \u670d\u52a1\uff08Storage \u63a5\u6536 Meta \u547d\u4ee4\u7684\u670d\u52a1\uff09\u5360\u7528\u7684\u7aef\u53e3\u3002<code>9780</code>\uff1aStorage \u670d\u52a1\u4e4b\u95f4\u7684 Raft \u901a\u4fe1\u7aef\u53e3\u3002 \u4e0d\u652f\u6301 <code>ws_ip</code> <code>0.0.0.0</code> HTTP \u670d\u52a1\u7684 IP \u5730\u5740\u3002 \u4e0d\u652f\u6301 <code>ws_http_port</code> <code>19779</code> HTTP \u670d\u52a1\u7684\u7aef\u53e3\u3002 \u4e0d\u652f\u6301 <code>heartbeat_interval_secs</code> <code>10</code> \u9ed8\u8ba4\u5fc3\u8df3\u95f4\u9694\u3002\u8bf7\u786e\u4fdd\u6240\u6709\u670d\u52a1\u7684<code>heartbeat_interval_secs</code>\u53d6\u503c\u76f8\u540c\uff0c\u5426\u5219\u4f1a\u5bfc\u81f4\u7cfb\u7edf\u65e0\u6cd5\u6b63\u5e38\u5de5\u4f5c\u3002\u5355\u4f4d\uff1a\u79d2\u3002 \u652f\u6301 <p>Caution</p> <p>\u4f7f\u7528 IP \u65f6\u5efa\u8bae\u4f7f\u7528\u771f\u5b9e\u7684 IP\u3002\u5426\u5219\u67d0\u4e9b\u60c5\u51b5\u4e0b<code>127.0.0.1/0.0.0.0</code>\u65e0\u6cd5\u6b63\u786e\u89e3\u6790\u3002</p>"},{"location":"5.configurations-and-logs/1.configurations/4.storage-config/#raft","title":"raft \u914d\u7f6e","text":"\u540d\u79f0 \u9884\u8bbe\u503c \u8bf4\u660e \u662f\u5426\u652f\u6301\u8fd0\u884c\u65f6\u52a8\u6001\u4fee\u6539 <code>raft_heartbeat_interval_secs</code> <code>30</code> Raft \u9009\u4e3e\u8d85\u65f6\u65f6\u95f4\u3002\u5355\u4f4d\uff1a\u79d2\u3002 \u652f\u6301 <code>raft_rpc_timeout_ms</code> <code>500</code> Raft \u5ba2\u6237\u7aef\u7684\u8fdc\u7a0b\u8fc7\u7a0b\u8c03\u7528\uff08RPC\uff09\u8d85\u65f6\u65f6\u95f4\u3002\u5355\u4f4d\uff1a\u6beb\u79d2\u3002 \u652f\u6301 <code>wal_ttl</code> <code>14400</code> Raft WAL \u7684\u6709\u6548\u65f6\u95f4\u3002\u5355\u4f4d\uff1a\u79d2\u3002 \u652f\u6301"},{"location":"5.configurations-and-logs/1.configurations/4.storage-config/#disk","title":"disk \u914d\u7f6e","text":"\u540d\u79f0 \u9884\u8bbe\u503c \u8bf4\u660e \u662f\u5426\u652f\u6301\u8fd0\u884c\u65f6\u52a8\u6001\u4fee\u6539 <code>data_path</code> <code>data/storage</code> \u6570\u636e\u5b58\u50a8\u8def\u5f84\uff0c\u591a\u4e2a\u8def\u5f84\u7528\u82f1\u6587\u9017\u53f7\uff08,\uff09\u5206\u9694\u3002\u4e00\u4e2a RocksDB \u5b9e\u4f8b\u5bf9\u5e94\u4e00\u4e2a\u8def\u5f84\u3002 \u4e0d\u652f\u6301 <code>minimum_reserved_bytes</code> <code>268435456</code> \u6bcf\u4e2a\u6570\u636e\u5b58\u50a8\u8def\u5f84\u7684\u5269\u4f59\u7a7a\u95f4\u6700\u5c0f\u503c\uff0c\u4f4e\u4e8e\u8be5\u503c\u65f6\uff0c\u53ef\u80fd\u4f1a\u5bfc\u81f4\u96c6\u7fa4\u6570\u636e\u5199\u5165\u5931\u8d25\u3002\u5355\u4f4d\uff1a\u5b57\u8282\u3002 \u4e0d\u652f\u6301 <code>rocksdb_batch_size</code> <code>4096</code> \u6279\u91cf\u64cd\u4f5c\u7684\u7f13\u5b58\u5927\u5c0f\u3002\u5355\u4f4d\uff1a\u5b57\u8282\u3002 \u4e0d\u652f\u6301 <code>rocksdb_block_cache</code> <code>4</code> BlockBasedTable \u7684\u9ed8\u8ba4\u5757\u7f13\u5b58\u5927\u5c0f\u3002\u5355\u4f4d\uff1a\u5146\u5b57\u8282\u3002 \u4e0d\u652f\u6301 <code>disable_page_cache</code> <code>false</code> \u5141\u8bb8\u6216\u7981\u6b62 NebulaGraph \u4f7f\u7528\u64cd\u4f5c\u7cfb\u7edf\u7684\u9875\u7f13\u5b58\u3002\u9ed8\u8ba4\u503c\u4e3a<code>false</code>\uff0c\u8868\u793a\u5141\u8bb8\u4f7f\u7528 page cache\u3002\u5f53\u503c\u4e3a<code>true</code>\u65f6\uff0c\u7981\u6b62 NebulaGraph \u4f7f\u7528 page cache\uff0c\u6b64\u65f6\u987b\u8bbe\u7f6e\u5145\u8db3\u7684\u5757\u7f13\u5b58\uff08block cache\uff09\u7a7a\u95f4\u3002 \u4e0d\u652f\u6301 <code>engine_type</code> <code>rocksdb</code> \u5b58\u50a8\u5f15\u64ce\u7c7b\u578b\u3002 \u4e0d\u652f\u6301 <code>rocksdb_compression</code> <code>lz4</code> \u538b\u7f29\u7b97\u6cd5\uff0c\u53ef\u9009\u503c\uff1a<code>no</code>\u3001<code>snappy</code>\u3001<code>lz4</code>\u3001<code>lz4hc</code>\u3001<code>zlib</code>\u3001<code>bzip2</code>\u3001<code>zstd</code>\u3002\u8be5\u53c2\u6570\u4f1a\u4fee\u6539\u6bcf\u4e00\u5c42\u7684\u538b\u7f29\u7b97\u6cd5\uff0c\u5982\u9700\u4e3a\u4e0d\u540c\u5c42\u7ea7\u8bbe\u7f6e\u4e0d\u540c\u7684\u538b\u7f29\u7b97\u6cd5\uff0c\u8bf7\u4f7f\u7528<code>rocksdb_compression_per_level</code>\u53c2\u6570\u3002 \u4e0d\u652f\u6301 <code>rocksdb_compression_per_level</code> - \u4e3a\u4e0d\u540c\u5c42\u7ea7\u8bbe\u7f6e\u4e0d\u540c\u7684\u538b\u7f29\u7b97\u6cd5\u3002\u4f18\u5148\u7ea7\u9ad8\u4e8e<code>rocksdb_compression</code>\u3002\u4f8b\u5982<code>no:no:lz4:lz4:snappy:zstd:snappy</code>\u3002\u4e5f\u53ef\u4ee5\u4e0d\u8bbe\u7f6e\u67d0\u4e2a\u5c42\u7ea7\u7684\u538b\u7f29\u7b97\u6cd5\uff0c\u4f8b\u5982<code>no:no:lz4:lz4::zstd</code>\uff0c\u6b64\u65f6 L4\u3001L6 \u5c42\u4f7f\u7528<code>rocksdb_compression</code>\u53c2\u6570\u7684\u538b\u7f29\u7b97\u6cd5\u3002 \u4e0d\u652f\u6301 <code>enable_rocksdb_statistics</code> <code>false</code> \u662f\u5426\u542f\u7528 RocksDB \u7684\u6570\u636e\u7edf\u8ba1\u3002 \u4e0d\u652f\u6301 <code>rocksdb_stats_level</code> <code>kExceptHistogramOrTimers</code> RocksDB \u7684\u6570\u636e\u7edf\u8ba1\u7ea7\u522b\u3002\u53ef\u9009\u503c\uff1a<code>kExceptHistogramOrTimers</code>\uff08\u7981\u7528\u8ba1\u65f6\u5668\u7edf\u8ba1\uff0c\u8df3\u8fc7\u67f1\u72b6\u56fe\u7edf\u8ba1\uff09\u3001<code>kExceptTimers</code>\uff08\u8df3\u8fc7\u8ba1\u65f6\u5668\u7edf\u8ba1\uff09\u3001<code>kExceptDetailedTimers</code>\uff08\u6536\u96c6\u9664\u4e92\u65a5\u9501\u548c\u538b\u7f29\u82b1\u8d39\u65f6\u95f4\u4e4b\u5916\u7684\u6240\u6709\u7edf\u8ba1\u6570\u636e\uff09\u3001<code>kExceptTimeForMutex</code>\u6536\u96c6\u9664\u4e92\u65a5\u9501\u82b1\u8d39\u65f6\u95f4\u4e4b\u5916\u7684\u6240\u6709\u7edf\u8ba1\u6570\u636e\uff09\u3001<code>kAll</code>\uff08\u6536\u96c6\u6240\u6709\u7edf\u8ba1\u6570\u636e\uff09\u3002 \u4e0d\u652f\u6301 <code>enable_rocksdb_prefix_filtering</code> <code>true</code> \u662f\u5426\u542f\u7528 prefix bloom filter\uff0c\u542f\u7528\u65f6\u53ef\u4ee5\u63d0\u5347\u56fe\u904d\u5386\u901f\u5ea6\uff0c\u4f46\u662f\u4f1a\u589e\u52a0\u5185\u5b58\u6d88\u8017\u3002 \u4e0d\u652f\u6301 <code>enable_rocksdb_whole_key_filtering</code> <code>false</code> \u662f\u5426\u542f\u7528 whole key bloom filter\u3002 \u4e0d\u652f\u6301 <code>rocksdb_filtering_prefix_length</code> <code>12</code> \u6bcf\u4e2a key \u7684 prefix \u957f\u5ea6\u3002\u53ef\u9009\u503c\uff1a<code>12</code>\uff08\u5206\u7247 ID+\u70b9 ID\uff09\u3001<code>16</code>\uff08\u5206\u7247 ID+\u70b9 ID+TagID/Edge typeID\uff09\u3002\u5355\u4f4d\uff1a\u5b57\u8282\u3002 \u4e0d\u652f\u6301 <code>enable_partitioned_index_filter</code> <code>false</code> \u8bbe\u7f6e\u4e3a<code>true</code>\u53ef\u4ee5\u964d\u4f4e bloom \u8fc7\u6ee4\u5668\u5360\u7528\u7684\u5185\u5b58\u5927\u5c0f\uff0c\u4f46\u662f\u5728\u67d0\u4e9b\u968f\u673a\u5bfb\u9053\uff08random-seek\uff09\u7684\u60c5\u51b5\u4e0b\uff0c\u53ef\u80fd\u4f1a\u964d\u4f4e\u8bfb\u53d6\u6027\u80fd\u3002\u521d\u59cb\u914d\u7f6e\u6587\u4ef6\u4e2d\u672a\u8bbe\u7f6e\u8be5\u53c2\u6570\uff0c\u5982\u9700\u4f7f\u7528\u8bf7\u624b\u52a8\u6dfb\u52a0\u3002 \u4e0d\u652f\u6301"},{"location":"5.configurations-and-logs/1.configurations/4.storage-config/#rocksdb_options","title":"rocksdb options \u914d\u7f6e","text":"\u540d\u79f0 \u9884\u8bbe\u503c \u8bf4\u660e \u662f\u5426\u652f\u6301\u8fd0\u884c\u65f6\u52a8\u6001\u4fee\u6539 <code>rocksdb_db_options</code> <code>{}</code> RocksDB database \u9009\u9879\u3002 \u4e0d\u652f\u6301 <code>rocksdb_column_family_options</code> <code>{\"write_buffer_size\":\"67108864\",</code><code>\"max_write_buffer_number\":\"4\",</code><code>\"max_bytes_for_level_base\":\"268435456\"}</code> RocksDB column family \u9009\u9879\u3002 \u4e0d\u652f\u6301 <code>rocksdb_block_based_table_options</code> <code>{\"block_size\":\"8192\"}</code> RocksDB block based table \u9009\u9879\u3002 \u4e0d\u652f\u6301 <p>rocksdb options \u914d\u7f6e\u7684\u683c\u5f0f\u4e3a<code>{\"&lt;option_name&gt;\":\"&lt;option_value&gt;\"}</code>\uff0c\u591a\u4e2a\u9009\u9879\u7528\u82f1\u6587\u9017\u53f7\uff08,\uff09\u9694\u5f00\u3002</p> <p><code>rocksdb_db_options</code>\u548c<code>rocksdb_column_family_options</code>\u652f\u6301\u7684\u9009\u9879\u5982\u4e0b\uff1a</p> <ul> <li><code>rocksdb_db_options</code><pre><code>max_total_wal_size\ndelete_obsolete_files_period_micros\nmax_background_jobs\nstats_dump_period_sec\ncompaction_readahead_size\nwritable_file_max_buffer_size\nbytes_per_sync\nwal_bytes_per_sync\ndelayed_write_rate\navoid_flush_during_shutdown\nmax_open_files\nstats_persist_period_sec\nstats_history_buffer_size\nstrict_bytes_per_sync\nenable_rocksdb_prefix_filtering\nenable_rocksdb_whole_key_filtering\nrocksdb_filtering_prefix_length\nnum_compaction_threads\nrate_limit\n</code></pre> </li> </ul> <ul> <li><code>rocksdb_column_family_options</code><pre><code>write_buffer_size\nmax_write_buffer_number\nlevel0_file_num_compaction_trigger\nlevel0_slowdown_writes_trigger\nlevel0_stop_writes_trigger\ntarget_file_size_base\ntarget_file_size_multiplier\nmax_bytes_for_level_base\nmax_bytes_for_level_multiplier\ndisable_auto_compactions \n</code></pre> </li> </ul> <p>\u53c2\u6570\u7684\u8be6\u7ec6\u8bf4\u660e\u8bf7\u53c2\u89c1 RocksDB \u5b98\u65b9\u6587\u6863\u3002</p>"},{"location":"5.configurations-and-logs/1.configurations/4.storage-config/#misc","title":"misc \u914d\u7f6e","text":"<p>Caution</p> <p>\u4e0b\u8868\u4e2d\u7684<code>snapshot</code>\u4e0e NebulaGraph \u5feb\u7167\u662f\u4e0d\u540c\u7684\u6982\u5ff5\uff0c\u8fd9\u91cc\u7684<code>snapshot</code>\u6307 Raft \u540c\u6b65\u8fc7\u7a0b\u4e2d leader \u4e0a\u7684\u5b58\u91cf\u6570\u636e\u3002</p> \u540d\u79f0 \u9884\u8bbe\u503c \u8bf4\u660e \u662f\u5426\u652f\u6301\u8fd0\u884c\u65f6\u52a8\u6001\u4fee\u6539 <code>query_concurrently</code> <code>true</code> \u662f\u5426\u5f00\u542f\u591a\u7ebf\u7a0b\u67e5\u8be2\u3002\u5f00\u542f\u540e\u53ef\u4ee5\u63d0\u9ad8\u5355\u4e2a\u67e5\u8be2\u7684\u65f6\u5ef6\u6027\u80fd\uff0c\u4f46\u5927\u538b\u529b\u4e0b\u4f1a\u964d\u4f4e\u6574\u4f53\u7684\u541e\u5410\u91cf\u3002 \u652f\u6301 <code>auto_remove_invalid_space</code> <code>true</code> \u5728\u6267\u884c<code>DROP SPACE</code>\u540e\uff0c\u4f1a\u5220\u9664\u6307\u5b9a\u56fe\u7a7a\u95f4\uff0c\u8be5\u53c2\u6570\u8bbe\u7f6e\u662f\u5426\u540c\u65f6\u5220\u9664\u6307\u5b9a\u56fe\u7a7a\u95f4\u5185\u7684\u6240\u6709\u6570\u636e\u3002\u5f53\u503c\u4e3a<code>true</code>\u65f6\uff0c\u540c\u65f6\u5220\u9664\u6307\u5b9a\u56fe\u7a7a\u95f4\u5185\u7684\u6240\u6709\u6570\u636e\u3002 \u652f\u6301 <code>num_io_threads</code> <code>16</code> \u7f51\u7edc I/O \u7ebf\u7a0b\u7684\u6570\u91cf\uff0c\u7528\u4e8e\u53d1\u9001 RPC \u8bf7\u6c42\u548c\u63a5\u6536\u54cd\u5e94\u3002 \u4e0d\u652f\u6301 <code>num_max_connections</code> <code>0</code> \u6240\u6709\u7f51\u7edc\u7ebf\u7a0b\u7684\u6700\u5927\u6d3b\u52a8\u8fde\u63a5\u6570\uff0c<code>0</code>\u8868\u793a\u6ca1\u6709\u9650\u5236\u3002\u6bcf\u4e2a\u7f51\u7edc\u7ebf\u7a0b\u7684\u6700\u5927\u8fde\u63a5\u6570=<code>num_max_connections</code>/<code>num_netio_threads</code>\u3002 \u4e0d\u652f\u6301 <code>num_worker_threads</code> <code>32</code> Storage \u7684 RPC \u670d\u52a1\u7684\u5de5\u4f5c\u7ebf\u7a0b\u6570\u91cf\u3002 \u4e0d\u652f\u6301 <code>max_concurrent_subtasks</code> <code>10</code> TaskManager \u5e76\u53d1\u6267\u884c\u5b50\u4efb\u52a1\u7684\u6700\u5927\u4e2a\u6570\u3002 \u4e0d\u652f\u6301 <code>snapshot_part_rate_limit</code> <code>10485760</code> Raft leader \u5411 Raft group \u4e2d\u5176\u5b83\u6210\u5458\u540c\u6b65\u5b58\u91cf\u6570\u636e\u65f6\u7684\u9650\u901f\u3002\u5355\u4f4d\uff1a\u5b57\u8282/\u79d2\u3002 \u652f\u6301 <code>snapshot_batch_size</code> <code>1048576</code> Raft leader \u5411 Raft group \u4e2d\u5176\u5b83\u6210\u5458\u540c\u6b65\u5b58\u91cf\u6570\u636e\u65f6\u6bcf\u6279\u53d1\u9001\u7684\u6570\u636e\u91cf\u3002\u5355\u4f4d\uff1a\u5b57\u8282\u3002 \u652f\u6301 <code>rebuild_index_part_rate_limit</code> <code>4194304</code> \u91cd\u5efa\u7d22\u5f15\u8fc7\u7a0b\u4e2d\uff0cRaft leader \u5411 Raft group \u4e2d\u5176\u5b83\u6210\u5458\u540c\u6b65\u7d22\u5f15\u6570\u636e\u65f6\u7684\u9650\u901f\u3002\u5355\u4f4d\uff1a\u5b57\u8282/\u79d2\u3002 \u652f\u6301 <code>rebuild_index_batch_size</code> <code>1048576</code> \u91cd\u5efa\u7d22\u5f15\u8fc7\u7a0b\u4e2d\uff0cRaft leader \u5411 Raft group \u4e2d\u5176\u5b83\u6210\u5458\u540c\u6b65\u7d22\u5f15\u6570\u636e\u65f6\u6bcf\u6279\u53d1\u9001\u7684\u6570\u636e\u91cf\u3002\u5355\u4f4d\uff1a\u5b57\u8282\u3002 \u652f\u6301"},{"location":"5.configurations-and-logs/1.configurations/4.storage-config/#memory_tracker","title":"memory tracker \u914d\u7f6e","text":"<p>\u6709\u5173 Memory Tracker \u7684\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u89c1\u56fe\u6570\u636e\u5e93 NebulaGraph \u7684\u5185\u5b58\u7ba1\u7406\u5b9e\u8df5\u4e4b Memory Tracker\u3002</p> \u540d\u79f0 \u9884\u8bbe\u503c \u8bf4\u660e \u662f\u5426\u652f\u6301\u8fd0\u884c\u65f6\u52a8\u6001\u4fee\u6539 <code>memory_tracker_limit_ratio</code> <code>0.8</code> \u53d6\u503c\u53ef\u8bbe\u7f6e\u4e3a\uff1a<code>(0, 1]</code>\u3001<code>2</code>\u3001<code>3</code>\u3002<code>(0, 1]</code>\uff1a\u53ef\u7528\u5185\u5b58\u7684\u767e\u5206\u6bd4\u3002\u8ba1\u7b97\u516c\u5f0f\uff1a\u53ef\u7528\u5185\u5b58\u7684\u767e\u5206\u6bd4 = \u53ef\u7528\u5185\u5b58 / (\u603b\u5185\u5b58 - \u4fdd\u7559\u5185\u5b58)\u3002\u5f53\u6b63\u5728\u8fdb\u884c\u7684\u67e5\u8be2\u5bfc\u81f4\u5185\u5b58\u4f7f\u7528\u8d85\u8fc7\u914d\u7f6e\u7684\u5185\u5b58\u9650\u5236\u65f6\uff0c\u8be5\u67e5\u8be2\u4f1a\u5931\u8d25\uff0c\u5e76\u5728\u5931\u8d25\u540e\u91ca\u653e\u5185\u5b58\u3002 \u6ce8\u610f\uff1a\u5bf9\u4e8e\u4e91\u4e0a\u548c\u672c\u5730\u8282\u70b9\u6df7\u5408\u90e8\u7f72\u7684\u96c6\u7fa4\uff0c\u9700\u8981\u6839\u636e\u5b9e\u9645\u60c5\u51b5\u8c03\u5c0f\u8be5\u53c2\u6570\u3002\u4f8b\u5982\uff0c\u5f53\u9884\u671f Graphd \u53ea\u5360\u7528 50% \u7684\u5185\u5b58\u65f6\uff0c\u8be5\u53c2\u6570\u7684\u503c\u53ef\u8bbe\u7f6e\u4e3a\u5c0f\u4e8e<code>0.5</code>\u3002<code>2</code>\uff1a\u52a8\u6001\u81ea\u9002\u5e94\u6a21\u5f0f\uff08Dynamic Self Adaptive\uff09\uff0cMemory Tracker \u4f1a\u6839\u636e\u7cfb\u7edf\u5f53\u524d\u7684\u53ef\u7528\u5185\u5b58\uff0c\u52a8\u6001\u8c03\u6574\u53ef\u7528\u5185\u5b58\u3002\u6ce8\u610f\uff1a\u6b64\u529f\u80fd\u4e3a\u5b9e\u9a8c\u6027\u529f\u80fd\uff0c\u7531\u4e8e\u52a8\u6001\u81ea\u9002\u5e94\u4e0d\u80fd\u505a\u5230\u5b9e\u65f6\u76d1\u63a7\u64cd\u4f5c\u7cfb\u7edf\u5185\u5b58\u4f7f\u7528\u60c5\u51b5\uff0c\u5728\u4e00\u4e9b\u5927\u5185\u5b58\u5206\u914d\u7684\u573a\u666f\uff0c\u8fd8\u662f\u4f1a\u5b58\u5728 OOM \u53ef\u80fd\u3002<code>3</code>\uff1a\u5173\u6389 Memory Tracker\uff0cMemory Tracker \u5c06\u53ea\u8bb0\u5f55\u5185\u5b58\u4f7f\u7528\u60c5\u51b5\uff0c\u5373\u4f7f\u8d85\u8fc7\u9650\u989d\uff0c\u4e5f\u4e0d\u4f1a\u5e72\u9884\u6267\u884c\u3002 \u652f\u6301 <code>memory_tracker_untracked_reserved_memory_mb</code> <code>50</code> \u4fdd\u7559\u5185\u5b58\u7684\u5927\u5c0f\uff0c\u5355\u4f4d\uff1aMB\u3002 \u652f\u6301 <code>memory_tracker_detail_log</code> <code>false</code> \u662f\u5426\u5b9a\u671f\u751f\u6210\u8f83\u8be6\u7ec6\u7684\u5185\u5b58\u8ddf\u8e2a\u65e5\u5fd7\u3002\u5f53\u503c\u4e3a<code>true</code>\u65f6\uff0c\u4f1a\u5b9a\u671f\u751f\u6210\u5185\u5b58\u8ddf\u8e2a\u65e5\u5fd7\u3002 \u652f\u6301 <code>memory_tracker_detail_log_interval_ms</code> <code>60000</code> \u5185\u5b58\u8ddf\u8e2a\u65e5\u5fd7\u7684\u751f\u6210\u65f6\u95f4\u95f4\u9694\uff0c\u5355\u4f4d\uff1a\u6beb\u79d2\u3002\u4ec5\u5f53<code>memory_tracker_detail_log</code>\u4e3a<code>true</code>\u65f6\uff0c\u8be5\u53c2\u6570\u751f\u6548\u3002 \u652f\u6301 <code>memory_purge_enabled</code> <code>true</code> \u662f\u5426\u5b9a\u671f\u5f00\u542f\u5185\u5b58\u6e05\u7406\u529f\u80fd\u3002\u5f53\u503c\u4e3a<code>true</code>\u65f6\uff0c\u4f1a\u5b9a\u671f\u6e05\u7406\u5185\u5b58\u3002 \u652f\u6301 <code>memory_purge_interval_seconds</code> <code>10</code> \u5185\u5b58\u6e05\u7406\u7684\u65f6\u95f4\u95f4\u9694\uff0c\u5355\u4f4d\uff1a\u79d2\u3002<code>memory_purge_enabled</code>\u4e3a<code>true</code>\u65f6\uff0c\u8be5\u53c2\u6570\u751f\u6548\u3002 \u652f\u6301"},{"location":"5.configurations-and-logs/1.configurations/4.storage-config/#_3","title":"\u8d85\u7ea7\u8282\u70b9\u5904\u7406\uff08\u51fa\u5165\u8fb9\u6570\u91cf\u6781\u591a\u7684\u70b9\uff09","text":"<p>\u5728\u6bcf\u4e2a\u70b9\u51fa\u53d1\u7684\u67e5\u8be2\u83b7\u53d6\u5230\u8fb9\u65f6\uff0c\u76f4\u63a5\u622a\u65ad\u3002\u76ee\u7684\u662f\u907f\u514d\u8d85\u7ea7\u8282\u70b9\u7684\u90bb\u8fb9\u8fc7\u591a\uff0c\u5355\u4e2a\u67e5\u8be2\u5360\u7528\u8fc7\u591a\u7684\u786c\u76d8\u548c\u5185\u5b58\u3002\u622a\u53d6\u524d <code>max_edge_returned_per_vertex</code> \u4e2a\u8fb9\uff0c\u591a\u4f59\u7684\u8fb9\u4e0d\u8fd4\u56de\u3002\u8be5\u53c2\u6570\u4f5c\u7528\u4e8e\u5168\u5c40\uff0c\u4e0d\u7528\u4e8e\u5355\u4e2a space\u3002</p> \u5c5e\u6027\u540d \u9ed8\u8ba4\u503c \u8bf4\u660e \u662f\u5426\u652f\u6301\u8fd0\u884c\u65f6\u52a8\u6001\u4fee\u6539 max_edge_returned_per_vertex <code>2147483647</code> \u6bcf\u4e2a\u7a20\u5bc6\u70b9\uff0c\u6700\u591a\u8fd4\u56de\u591a\u5c11\u6761\u8fb9\uff0c\u591a\u4f59\u7684\u8fb9\u622a\u65ad\u4e0d\u8fd4\u56de\u3002\u521d\u59cb\u914d\u7f6e\u6587\u4ef6\u4e2d\u672a\u8bbe\u7f6e\u8be5\u53c2\u6570\uff0c\u5982\u9700\u4f7f\u7528\u8bf7\u624b\u52a8\u6dfb\u52a0\u3002 \u4e0d\u652f\u6301"},{"location":"5.configurations-and-logs/1.configurations/4.storage-config/#_4","title":"\u6570\u636e\u91cf\u5927\u800c\u5185\u5b58\u4e0d\u591f\u65f6","text":"<p>Warning</p> <p>\u4e00\u4e2a\u56fe\u7a7a\u95f4\u81f3\u5c11\u5360\u7528\u5927\u7ea6 300 MB \u7684\u5185\u5b58\u3002</p> <p>\u5982\u679c\u6570\u636e\u91cf\u5f88\u5927\u4f46\u5185\u5b58\u4e0d\u591f\uff0c\u5219\u53ef\u4ee5\u5c1d\u8bd5\u628a storage \u914d\u7f6e\u4e2d\u7684<code>enable_partitioned_index_filter</code>\u8bbe\u7f6e\u4e3a<code>true</code>\uff0c\u51cf\u5c11<code>rocksdb_block_cache</code>\u3002\u4f46\u7531\u4e8e\u7f13\u5b58\u4e86\u8f83\u5c11\u7684 RocksDB \u7d22\u5f15\uff0c\u6027\u80fd\u53ef\u80fd\u4f1a\u53d7\u5f71\u54cd\u3002\u6b64\u5916\uff0c\u5f53\u901a\u8fc7\u8bed\u53e5\u62c9\u53d6\u5927\u91cf\u6570\u636e\u65f6\uff0c\u4ecd\u5b58\u5728 OOM \u7684\u53ef\u80fd\u3002</p>"},{"location":"5.configurations-and-logs/1.configurations/6.kernel-config/","title":"Linux \u5185\u6838\u914d\u7f6e","text":"<p>\u672c\u6587\u4ecb\u7ecd\u4e0e NebulaGraph \u76f8\u5173\u7684 Linux \u5185\u6838\u914d\u7f6e\uff0c\u5e76\u4ecb\u7ecd\u5982\u4f55\u4fee\u6539\u914d\u7f6e\u3002</p>"},{"location":"5.configurations-and-logs/1.configurations/6.kernel-config/#_1","title":"\u8d44\u6e90\u63a7\u5236","text":"<p>\u867d\u7136\u53ef\u4ee5\u7528<code>ulimit</code>\u8fdb\u884c\u8d44\u6e90\u63a7\u5236\uff0c\u4f46\u662f\u6240\u505a\u7684\u66f4\u6539\u4ec5\u5bf9\u5f53\u524d\u4f1a\u8bdd\u6216\u5b50\u8fdb\u7a0b\u751f\u6548\u3002\u5982\u679c\u9700\u8981\u6c38\u4e45\u751f\u6548\uff0c\u8bf7\u7f16\u8f91\u6587\u4ef6<code>/etc/security/limits.conf</code>\u3002\u914d\u7f6e\u5982\u4e0b\uff1a</p> <pre><code># &lt;domain&gt;     &lt;type&gt;      &lt;item&gt;          &lt;value&gt;\n*              soft         core           unlimited    \n*              hard         core           unlimited   \n*              soft         nofile          130000   \n*              hard         nofile          130000\n</code></pre> <p>Note</p> <p>\u914d\u7f6e\u4fee\u6539\u540e\u4f1a\u5bf9\u65b0\u7684\u4f1a\u8bdd\u751f\u6548\u3002</p> <p>\u53c2\u6570\u8bf4\u660e\u5982\u4e0b\u3002</p> \u53c2\u6570 \u8bf4\u660e <code>domain</code> \u63a7\u5236\u57df\u3002\u53ef\u4ee5\u662f\u7528\u6237\u540d\u79f0\u3001\u7528\u6237\u7ec4\u540d\u79f0\uff08\u4ee5<code>@</code>\u5f00\u5934\uff09\uff0c\u6216\u8005\u7528<code>*</code>\u8868\u793a\u6240\u6709\u7528\u6237\u3002 <code>type</code> \u63a7\u5236\u7c7b\u578b\u3002\u53ef\u4ee5\u662f<code>soft</code>\u6216<code>hard</code>\u3002<code>soft</code>\u8868\u793a\u8d44\u6e90\u7684\u8f6f\u9608\u503c\uff08\u9ed8\u8ba4\u9608\u503c\uff09\uff0c<code>hard</code>\u8868\u793a\u7528\u6237\u53ef\u4ee5\u8bbe\u7f6e\u7684\u6700\u5927\u503c\u3002\u53ef\u4ee5\u4f7f\u7528<code>ulimit</code>\u547d\u4ee4\u63d0\u9ad8<code>soft</code>\uff0c\u4f46\u4e0d\u80fd\u8d85\u8fc7<code>hard</code>\u3002 <code>item</code> \u8d44\u6e90\u7c7b\u578b\u3002\u4f8b\u5982<code>core</code>\u9650\u5236\u6838\u5fc3\u8f6c\u50a8\u6587\u4ef6\u7684\u5927\u5c0f\uff0c<code>nofile</code>\u9650\u5236\u4e00\u4e2a\u8fdb\u7a0b\u53ef\u4ee5\u6253\u5f00\u7684\u6700\u5927\u6587\u4ef6\u63cf\u8ff0\u7b26\u6570\u91cf\u3002 <code>value</code> \u8d44\u6e90\u9650\u5236\u503c\u3002\u53ef\u4ee5\u662f\u4e00\u4e2a\u6570\u5b57\uff0c\u6216\u8005 unlimited \u8868\u793a\u6ca1\u6709\u9650\u5236\u3002 <p>\u53ef\u4ee5\u6267\u884c<code>man limits.conf</code>\u67e5\u770b\u66f4\u591a\u5e2e\u52a9\u4fe1\u606f\u3002</p>"},{"location":"5.configurations-and-logs/1.configurations/6.kernel-config/#_2","title":"\u5185\u5b58","text":""},{"location":"5.configurations-and-logs/1.configurations/6.kernel-config/#vmswappiness","title":"vm.swappiness","text":"<p><code>vm.swappiness</code>\u662f\u89e6\u53d1\u865a\u62df\u5185\u5b58\uff08swap\uff09\u7684\u7a7a\u95f2\u5185\u5b58\u767e\u5206\u6bd4\u3002\u503c\u8d8a\u5927\uff0c\u4f7f\u7528 swap \u7684\u53ef\u80fd\u6027\u5c31\u8d8a\u5927\uff0c\u5efa\u8bae\u8bbe\u7f6e\u4e3a 0\uff0c\u8868\u793a\u9996\u5148\u5220\u9664\u9875\u7f13\u5b58\u3002\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c0 \u8868\u793a\u5c3d\u91cf\u4e0d\u4f7f\u7528 swap\u3002</p>"},{"location":"5.configurations-and-logs/1.configurations/6.kernel-config/#vmmin_free_kbytes","title":"vm.min_free_kbytes","text":"<p><code>vm.min_free_kbytes</code>\u7528\u4e8e\u8bbe\u7f6e Linux \u5185\u6838\u4fdd\u7559\u7684\u6700\u5c0f\u7a7a\u95f2\u5343\u5b57\u8282\u6570\u3002\u5982\u679c\u7cfb\u7edf\u5185\u5b58\u8db3\u591f\uff0c\u5efa\u8bae\u8bbe\u7f6e\u8f83\u5927\u503c\u3002\u4f8b\u5982\u7269\u7406\u5185\u5b58\u4e3a 128 GB\uff0c\u53ef\u4ee5\u5c06<code>vm.min_free_kbytes</code>\u8bbe\u7f6e\u4e3a 5 GB\u3002\u5982\u679c\u503c\u592a\u5c0f\uff0c\u4f1a\u5bfc\u81f4\u7cfb\u7edf\u65e0\u6cd5\u7533\u8bf7\u8db3\u591f\u7684\u8fde\u7eed\u7269\u7406\u5185\u5b58\u3002</p>"},{"location":"5.configurations-and-logs/1.configurations/6.kernel-config/#vmmax_map_count","title":"vm.max_map_count","text":"<p><code>vm.max_map_count</code>\u7528\u4e8e\u9650\u5236\u5355\u4e2a\u8fdb\u7a0b\u7684 VMA\uff08\u865a\u62df\u5185\u5b58\u533a\u57df\uff09\u6570\u91cf\u3002\u9ed8\u8ba4\u503c\u4e3a<code>65530</code>\uff0c\u5bf9\u4e8e\u7edd\u5927\u591a\u6570\u5e94\u7528\u7a0b\u5e8f\u6765\u8bf4\u5df2\u7ecf\u8db3\u591f\u3002\u5982\u679c\u5e94\u7528\u7a0b\u5e8f\u56e0\u4e3a\u5185\u5b58\u6d88\u8017\u8fc7\u5927\u800c\u62a5\u9519\uff0c\u8bf7\u589e\u5927\u672c\u53c2\u6570\u7684\u503c\u3002</p>"},{"location":"5.configurations-and-logs/1.configurations/6.kernel-config/#vmdirty_","title":"vm.dirty_*","text":"<p><code>vm.dirty_*</code>\u662f\u4e00\u7cfb\u5217\u63a7\u5236\u7cfb\u7edf\u810f\u6570\u636e\u7f13\u5b58\u7684\u53c2\u6570\u3002\u5bf9\u4e8e\u5199\u5bc6\u96c6\u578b\u573a\u666f\uff0c\u7528\u6237\u53ef\u4ee5\u6839\u636e\u9700\u8981\u8fdb\u884c\u8c03\u6574\uff08\u541e\u5410\u91cf\u4f18\u5148\u6216\u5ef6\u8fdf\u4f18\u5148\uff09\uff0c\u5efa\u8bae\u4f7f\u7528\u7cfb\u7edf\u9ed8\u8ba4\u503c\u3002</p>"},{"location":"5.configurations-and-logs/1.configurations/6.kernel-config/#_3","title":"\u900f\u660e\u5927\u9875","text":"<p>\u900f\u660e\u5927\u9875\uff08Transparent Huge Pages, THP\uff09\u662f\u4e00\u79cd Linux \u5185\u6838\u7684\u5185\u5b58\u7ba1\u7406\u7279\u6027\uff0c\u53ef\u4ee5\u63d0\u9ad8\u7cfb\u7edf\u4f7f\u7528\u5927\u9875\u7684\u80fd\u529b\u3002\u5728\u591a\u6570\u6570\u636e\u5e93\u7cfb\u7edf\u4e2d\uff0c\u900f\u660e\u5927\u9875\u4f1a\u964d\u4f4e\u6027\u80fd\uff0c\u5efa\u8bae\u5173\u95ed\u3002</p> <p>\u64cd\u4f5c\u5982\u4e0b\uff1a</p> <ol> <li> <p>\u7f16\u8f91 GRUB \u914d\u7f6e\u6587\u4ef6<code>/etc/default/grub</code>\u3002</p> <pre><code>sudo vi /etc/default/grub\n</code></pre> </li> <li> <p>\u5728<code>GRUB_CMDLINE_LINUX</code>\u9009\u9879\u4e2d\u6dfb\u52a0<code>transparent_hugepage=never</code>\uff0c\u7136\u540e\u4fdd\u5b58\u5e76\u9000\u51fa\u3002</p> <pre><code>GRUB_CMDLINE_LINUX=\"... transparent_hugepage=never\"\n</code></pre> </li> <li> <p>\u66f4\u65b0 GRUB \u914d\u7f6e\u3002</p> <ul> <li> <p>CentOS</p> <pre><code>sudo grub2-mkconfig -o /boot/grub2/grub.cfg\n</code></pre> </li> </ul> <ul> <li> <p>Ubuntu</p> <pre><code>sudo update-grub\n</code></pre> </li> </ul> </li> <li> <p>\u91cd\u542f\u64cd\u4f5c\u7cfb\u7edf\u3002</p> <pre><code>sudo reboot\n</code></pre> <p>\u5982\u679c\u4e0d\u91cd\u542f\u53ef\u4e34\u65f6\u5173\u95ed\u900f\u660e\u5927\u9875\uff0c\u76f4\u5230\u4e0b\u6b21\u91cd\u542f\u3002</p> <pre><code>echo 'never' &gt; /sys/kernel/mm/transparent_hugepage/enabled\necho 'never' &gt; /sys/kernel/mm/transparent_hugepage/defrag\n</code></pre> </li> </ol>"},{"location":"5.configurations-and-logs/1.configurations/6.kernel-config/#_4","title":"\u7f51\u7edc","text":""},{"location":"5.configurations-and-logs/1.configurations/6.kernel-config/#netipv4tcp_slow_start_after_idle","title":"net.ipv4.tcp_slow_start_after_idle","text":"<p><code>net.ipv4.tcp_slow_start_after_idle</code>\u9ed8\u8ba4\u503c\u4e3a 1\uff0c\u4f1a\u5bfc\u81f4\u95f2\u7f6e\u4e00\u6bb5\u65f6\u95f4\u540e\u62e5\u585e\u7a97\u53e3\u8d85\u65f6\uff0c\u5efa\u8bae\u8bbe\u7f6e\u4e3a<code>0</code>\uff0c\u5c24\u5176\u9002\u5408\u5927\u5e26\u5bbd\u9ad8\u5ef6\u8fdf\u573a\u666f\u3002</p>"},{"location":"5.configurations-and-logs/1.configurations/6.kernel-config/#netcoresomaxconn","title":"net.core.somaxconn","text":"<p><code>net.core.somaxconn</code>\u7528\u4e8e\u9650\u5236 socket \u76d1\u542c\u7684\u8fde\u63a5\u961f\u5217\u6570\u91cf\u3002\u9ed8\u8ba4\u503c\u4e3a<code>128</code>\u3002\u5bf9\u4e8e\u6709\u5927\u91cf\u7a81\u53d1\u8fde\u63a5\u7684\u573a\u666f\uff0c\u5efa\u8bae\u8bbe\u7f6e\u4e3a\u4e0d\u4f4e\u4e8e<code>1024</code>\u3002</p>"},{"location":"5.configurations-and-logs/1.configurations/6.kernel-config/#netipv4tcp_max_syn_backlog","title":"net.ipv4.tcp_max_syn_backlog","text":"<p><code>net.ipv4.tcp_max_syn_backlog</code>\u7528\u4e8e\u9650\u5236\u5904\u4e8e SYN_RECV\uff08\u534a\u8fde\u63a5\uff09\u72b6\u6001\u7684 TCP \u8fde\u63a5\u6570\u91cf\u3002\u9ed8\u8ba4\u503c\u4e3a<code>128</code>\u3002\u5bf9\u4e8e\u6709\u5927\u91cf\u7a81\u53d1\u8fde\u63a5\u7684\u573a\u666f\uff0c\u5efa\u8bae\u8bbe\u7f6e\u4e3a\u4e0d\u4f4e\u4e8e<code>1024</code>\u3002</p>"},{"location":"5.configurations-and-logs/1.configurations/6.kernel-config/#netcorenetdev_max_backlog","title":"net.core.netdev_max_backlog","text":"<p><code>net.core.netdev_max_backlog</code>\u7528\u4e8e\u9650\u5236\u961f\u5217\u4e2d\u6570\u636e\u5305\u7684\u6570\u91cf\u3002\u9ed8\u8ba4\u503c\u4e3a<code>1000</code>\uff0c\u5efa\u8bae\u8bbe\u7f6e\u4e3a<code>10000</code>\u4ee5\u4e0a\uff0c\u5c24\u5176\u662f\u4e07\u5146\u7f51\u5361\u3002</p>"},{"location":"5.configurations-and-logs/1.configurations/6.kernel-config/#netipv4tcp_keepalive_","title":"net.ipv4.tcp_keepalive_*","text":"<p><code>net.ipv4.tcp_keepalive_*</code>\u662f\u4e00\u7cfb\u5217\u4fdd\u6301 TCP \u8fde\u63a5\u5b58\u6d3b\u7684\u53c2\u6570\u3002\u5bf9\u4e8e\u4f7f\u7528\u56db\u5c42\u900f\u660e\u8d1f\u8f7d\u5747\u8861\u7684\u5e94\u7528\u7a0b\u5e8f\uff0c\u5982\u679c\u7a7a\u95f2\u8fde\u63a5\u5f02\u5e38\u65ad\u5f00\uff0c\u8bf7\u589e\u5927<code>tcp_keepalive_time</code>\u548c<code>tcp_keepalive_intvl</code>\u7684\u503c\u3002</p>"},{"location":"5.configurations-and-logs/1.configurations/6.kernel-config/#netipv4tcp_wmemrmem","title":"net.ipv4.tcp_wmem/rmem","text":"<p>TCP \u5957\u63a5\u5b57\u53d1\u9001/\u63a5\u6536\u7f13\u51b2\u6c60\u7684\u6700\u5c0f\u3001\u6700\u5927\u3001\u9ed8\u8ba4\u7a7a\u95f4\u3002\u5bf9\u4e8e\u5927\u8fde\u63a5\uff0c\u5efa\u8bae\u8bbe\u7f6e\u4e3a<code>\u5e26\u5bbd (GB) *\u5f80\u8fd4\u65f6\u5ef6 (ms)</code>\u3002</p>"},{"location":"5.configurations-and-logs/1.configurations/6.kernel-config/#scheduler","title":"scheduler","text":"<p>\u5bf9\u4e8e SSD \u8bbe\u5907\uff0c\u5efa\u8bae\u5c06<code>scheduler</code>\u8bbe\u7f6e\u4e3a<code>noop</code>\u6216\u8005<code>none</code>\uff0c\u8def\u5f84\u4e3a<code>/sys/block/DEV_NAME/queue/scheduler</code>\u3002</p>"},{"location":"5.configurations-and-logs/1.configurations/6.kernel-config/#_5","title":"\u5176\u4ed6\u53c2\u6570","text":""},{"location":"5.configurations-and-logs/1.configurations/6.kernel-config/#kernelcore_pattern","title":"kernel.core_pattern","text":"<p>\u5efa\u8bae\u8bbe\u7f6e\u4e3a<code>core</code>\uff0c\u5e76\u4e14\u5c06<code>kernel.core_uses_pid</code>\u8bbe\u7f6e\u4e3a<code>1</code>\u3002</p>"},{"location":"5.configurations-and-logs/1.configurations/6.kernel-config/#_6","title":"\u4fee\u6539\u53c2\u6570","text":""},{"location":"5.configurations-and-logs/1.configurations/6.kernel-config/#sysctl","title":"sysctl \u547d\u4ee4","text":"<ul> <li> <p><code>sysctl &lt;conf_name&gt;</code></p> <p>\u67e5\u770b\u5f53\u524d\u53c2\u6570\u503c\u3002</p> </li> </ul> <ul> <li> <p><code>sysctl -w &lt;conf_name&gt;=&lt;value&gt;</code></p> <p>\u4e34\u65f6\u4fee\u6539\u53c2\u6570\u503c\uff0c\u7acb\u5373\u751f\u6548\uff0c\u91cd\u542f\u540e\u6062\u590d\u539f\u503c\u3002</p> </li> </ul> <ul> <li> <p><code>sysctl -p [&lt;file_path&gt;]</code> </p> <p>\u4ece\u6307\u5b9a\u914d\u7f6e\u6587\u4ef6\u91cc\u52a0\u8f7d Linux \u7cfb\u7edf\u53c2\u6570\uff0c\u9ed8\u8ba4\u4ece<code>/etc/sysctl.conf</code>\u52a0\u8f7d\u3002</p> </li> </ul>"},{"location":"5.configurations-and-logs/1.configurations/6.kernel-config/#prlimit","title":"prlimit","text":"<p>\u547d\u4ee4<code>prlimit</code>\u53ef\u4ee5\u83b7\u53d6\u548c\u8bbe\u7f6e\u8fdb\u7a0b\u8d44\u6e90\u7684\u9650\u5236\uff0c\u7ed3\u5408<code>sudo</code>\u53ef\u4ee5\u4fee\u6539\u786c\u9608\u503c\uff0c\u4f8b\u5982\uff0c<code>prlimit --nofile=140000 --pid=$$</code>\u8c03\u6574\u5f53\u524d\u8fdb\u7a0b\u5141\u8bb8\u7684\u6253\u5f00\u6587\u4ef6\u7684\u6700\u5927\u6570\u91cf\u4e3a<code>140000</code>\uff0c\u7acb\u5373\u751f\u6548\uff0c\u6b64\u547d\u4ee4\u4ec5\u652f\u6301 RedHat 7u \u6216\u66f4\u9ad8\u7248\u672c\u3002</p>"},{"location":"5.configurations-and-logs/2.log-management/logs/","title":"\u8fd0\u884c\u65e5\u5fd7","text":"<p>\u8fd0\u884c\u65e5\u5fd7\u901a\u5e38\u63d0\u4f9b\u7ed9 DBA \u6216\u5f00\u53d1\u4eba\u5458\u67e5\u770b\uff0c\u5f53\u7cfb\u7edf\u51fa\u73b0\u6545\u969c\uff0cDBA \u6216\u5f00\u53d1\u4eba\u5458\u53ef\u4ee5\u6839\u636e\u8fd0\u884c\u65e5\u5fd7\u5b9a\u4f4d\u95ee\u9898\u3002</p> <p>NebulaGraph \u9ed8\u8ba4\u4f7f\u7528 glog \u6253\u5370\u8fd0\u884c\u65e5\u5fd7\uff0c\u4f7f\u7528 gflags \u63a7\u5236\u65e5\u5fd7\u7ea7\u522b\uff0c\u5e76\u5728\u8fd0\u884c\u65f6\u901a\u8fc7 HTTP \u63a5\u53e3\u52a8\u6001\u4fee\u6539\u65e5\u5fd7\u7ea7\u522b\uff0c\u65b9\u4fbf\u8ddf\u8e2a\u95ee\u9898\u3002</p>"},{"location":"5.configurations-and-logs/2.log-management/logs/#_2","title":"\u8fd0\u884c\u65e5\u5fd7\u76ee\u5f55","text":"<p>\u8fd0\u884c\u65e5\u5fd7\u7684\u9ed8\u8ba4\u76ee\u5f55\u4e3a<code>/usr/local/nebula/logs/</code>\u3002</p> <p>\u5982\u679c\u5728 NebulaGraph \u8fd0\u884c\u8fc7\u7a0b\u4e2d\u5220\u9664\u8fd0\u884c\u65e5\u5fd7\u76ee\u5f55\uff0c\u65e5\u5fd7\u4e0d\u4f1a\u7ee7\u7eed\u6253\u5370\uff0c\u4f46\u662f\u4e0d\u4f1a\u5f71\u54cd\u4e1a\u52a1\u3002\u91cd\u542f\u670d\u52a1\u53ef\u4ee5\u6062\u590d\u6b63\u5e38\u3002</p>"},{"location":"5.configurations-and-logs/2.log-management/logs/#_3","title":"\u914d\u7f6e\u8bf4\u660e","text":"<ul> <li><code>minloglevel</code>\uff1a\u6700\u5c0f\u65e5\u5fd7\u7ea7\u522b\uff0c\u5373\u4e0d\u4f1a\u8bb0\u5f55\u4f4e\u4e8e\u8fd9\u4e2a\u7ea7\u522b\u7684\u65e5\u5fd7\u3002\u53ef\u9009\u503c\u4e3a<code>0</code>\uff08INFO\uff09\u3001<code>1</code>\uff08WARNING\uff09\u3001<code>2</code>\uff08ERROR\uff09\u3001<code>3</code>\uff08FATAL\uff09\u3002\u5efa\u8bae\u5728\u8c03\u8bd5\u65f6\u8bbe\u7f6e\u4e3a<code>0</code>\uff0c\u751f\u4ea7\u73af\u5883\u4e2d\u8bbe\u7f6e\u4e3a<code>1</code>\u3002\u5982\u679c\u8bbe\u7f6e\u4e3a<code>4</code>\uff0cNebulaGraph \u4e0d\u4f1a\u8bb0\u5f55\u4efb\u4f55\u65e5\u5fd7\u3002</li> </ul> <ul> <li><code>v</code>\uff1a\u65e5\u5fd7\u8be6\u7ec6\u7ea7\u522b\uff0c\u503c\u8d8a\u5927\uff0c\u65e5\u5fd7\u8bb0\u5f55\u8d8a\u8be6\u7ec6\u3002\u53ef\u9009\u503c\u4e3a<code>0</code>\u3001<code>1</code>\u3001<code>2</code>\u3001<code>3</code>\u3002</li> </ul> <p>Meta \u670d\u52a1\u3001Graph \u670d\u52a1\u548c Storage \u670d\u52a1\u7684\u65e5\u5fd7\u7ea7\u522b\u53ef\u4ee5\u5728\u5404\u81ea\u7684\u914d\u7f6e\u6587\u4ef6\u4e2d\u67e5\u770b\uff0c\u9ed8\u8ba4\u8def\u5f84\u4e3a<code>/usr/local/nebula/etc/</code>\u3002</p>"},{"location":"5.configurations-and-logs/2.log-management/logs/#_4","title":"\u67e5\u770b\u8fd0\u884c\u65e5\u5fd7\u7ea7\u522b","text":"<p>\u4f7f\u7528\u5982\u4e0b\u547d\u4ee4\u67e5\u770b\u5f53\u524d\u6240\u6709\u7684 gflags \u53c2\u6570\uff08\u5305\u62ec\u65e5\u5fd7\u53c2\u6570\uff09\uff1a</p> <pre><code>$ curl &lt;ws_ip&gt;:&lt;ws_port&gt;/flags\n</code></pre> \u53c2\u6570 \u8bf4\u660e <code>ws_ip</code> HTTP \u670d\u52a1\u7684 IP \u5730\u5740\uff0c\u53ef\u4ee5\u5728\u914d\u7f6e\u6587\u4ef6\u4e2d\u67e5\u770b\u3002\u9ed8\u8ba4\u503c\u4e3a<code>127.0.0.1</code>\u3002 <code>ws_port</code> HTTP \u670d\u52a1\u7684\u7aef\u53e3\uff0c\u53ef\u4ee5\u5728\u914d\u7f6e\u6587\u4ef6\u4e2d\u67e5\u770b\u3002\u9ed8\u8ba4\u503c\u5206\u522b\u4e3a<code>19559</code>\uff08Meta\uff09\u3001<code>19669</code>\uff08Graph\uff09<code>19779</code>\uff08Storage\uff09\u3002 <p>\u793a\u4f8b\u5982\u4e0b\uff1a</p> <ul> <li>\u67e5\u770b Meta \u670d\u52a1\u5f53\u524d\u7684\u6700\u5c0f\u65e5\u5fd7\u7ea7\u522b\uff1a<pre><code>$ curl 127.0.0.1:19559/flags | grep 'minloglevel'\n</code></pre> </li> </ul> <ul> <li>\u67e5\u770b Storage \u670d\u52a1\u5f53\u524d\u7684\u65e5\u5fd7\u8be6\u7ec6\u7ea7\u522b\uff1a<pre><code>$ curl 127.0.0.1:19779/flags | grep -w 'v'\n</code></pre> </li> </ul>"},{"location":"5.configurations-and-logs/2.log-management/logs/#_5","title":"\u4fee\u6539\u8fd0\u884c\u65e5\u5fd7\u7ea7\u522b","text":"<p>\u4f7f\u7528\u5982\u4e0b\u547d\u4ee4\u4fee\u6539\u8fd0\u884c\u65e5\u5fd7\u7ea7\u522b\uff1a</p> <pre><code>$ curl -X PUT -H \"Content-Type: application/json\" -d '{\"&lt;key&gt;\":&lt;value&gt;[,\"&lt;key&gt;\":&lt;value&gt;]}' \"&lt;ws_ip&gt;:&lt;ws_port&gt;/flags\"\n</code></pre> \u53c2\u6570 \u8bf4\u660e <code>key</code> \u5f85\u4fee\u6539\u7684\u8fd0\u884c\u65e5\u5fd7\u7c7b\u578b\uff0c\u53ef\u9009\u503c\u8bf7\u53c2\u89c1\u914d\u7f6e\u8bf4\u660e\u3002 <code>value</code> \u8fd0\u884c\u65e5\u5fd7\u7ea7\u522b\uff0c\u53ef\u9009\u503c\u8bf7\u53c2\u89c1\u914d\u7f6e\u8bf4\u660e\u3002 <code>ws_ip</code> HTTP \u670d\u52a1\u7684 IP \u5730\u5740\uff0c\u53ef\u4ee5\u5728\u914d\u7f6e\u6587\u4ef6\u4e2d\u67e5\u770b\u3002\u9ed8\u8ba4\u503c\u4e3a<code>127.0.0.1</code>\u3002 <code>ws_port</code> HTTP \u670d\u52a1\u7684\u7aef\u53e3\uff0c\u53ef\u4ee5\u5728\u914d\u7f6e\u6587\u4ef6\u4e2d\u67e5\u770b\u3002\u9ed8\u8ba4\u503c\u5206\u522b\u4e3a<code>19559</code>\uff08Meta\uff09\u3001<code>19669</code>\uff08Graph\uff09<code>19779</code>\uff08Storage\uff09\u3002 <p>\u793a\u4f8b\u5982\u4e0b\uff1a</p> <pre><code>$ curl -X PUT -H \"Content-Type: application/json\" -d '{\"minloglevel\":0,\"v\":3}' \"127.0.0.1:19779/flags\" # storaged\n$ curl -X PUT -H \"Content-Type: application/json\" -d '{\"minloglevel\":0,\"v\":3}' \"127.0.0.1:19669/flags\" # graphd\n$ curl -X PUT -H \"Content-Type: application/json\" -d '{\"minloglevel\":0,\"v\":3}' \"127.0.0.1:19559/flags\" # metad\n</code></pre> <p>\u5982\u679c\u5728NebulaGraph\u8fd0\u884c\u65f6\u4fee\u6539\u4e86\u8fd0\u884c\u65e5\u5fd7\u7ea7\u522b\uff0c\u91cd\u542f\u670d\u52a1\u540e\u4f1a\u6062\u590d\u4e3a\u914d\u7f6e\u6587\u4ef6\u4e2d\u8bbe\u7f6e\u7684\u7ea7\u522b\uff0c\u5982\u679c\u9700\u8981\u6c38\u4e45\u4fee\u6539\uff0c\u8bf7\u4fee\u6539\u914d\u7f6e\u6587\u4ef6\u5e76\u91cd\u542f\u670d\u52a1\u3002</p>"},{"location":"5.configurations-and-logs/2.log-management/logs/#rocksdb","title":"RocksDB \u8fd0\u884c\u65e5\u5fd7","text":"<p>RocksDB \u7684\u8fd0\u884c\u65e5\u5fd7\u901a\u5e38\u5728 <code>/usr/local/nebula/data/storage/nebula/$id/data/LOG</code>, \u5176\u4e2d <code>$id</code> \u4e3a\u5b9e\u4f8b\u53f7\u3002\u8be5\u65e5\u5fd7\u901a\u5e38\u7528\u4e8e\u8c03\u8bd5 RocksDB \u53c2\u6570\u3002</p>"},{"location":"5.configurations-and-logs/2.log-management/logs/#_6","title":"\u56de\u6536\u65e5\u5fd7","text":"<p>glog \u672c\u8eab\u4e0d\u652f\u6301\u56de\u6536\u65e5\u5fd7\uff0c\u5982\u679c\u9700\u8981\u56de\u6536\u65e5\u5fd7\uff0c\u53ef\u4ee5\u4f7f\u7528 Linux \u7cfb\u7edf\u4e2d\u5b9a\u65f6\u4efb\u52a1\uff08Cron Jobs\uff09\u6765\u5b9a\u671f\u5220\u9664\u65e7\u7684\u65e5\u5fd7\u6587\u4ef6\u3002\u6216\u8005\uff0c\u4f7f\u7528\u65e5\u5fd7\u7ba1\u7406\u5de5\u5177 logrotate \u6765\u8f6e\u8f6c\u65e5\u5fd7\u4ee5\u5b9a\u671f\u5f52\u6863\u548c\u5220\u9664\u65e5\u5fd7\u3002</p>"},{"location":"5.configurations-and-logs/2.log-management/logs/#_7","title":"\u4f7f\u7528\u5b9a\u65f6\u4efb\u52a1\u56de\u6536\u65e5\u5fd7","text":"<p>\u672c\u6587\u4ee5\u56de\u6536 Graph \u670d\u52a1\u7684\u8fd0\u884c\u65e5\u5fd7\u4e3a\u4f8b\uff0c\u8bf4\u660e\u5982\u4f55\u4f7f\u7528\u5b9a\u65f6\u4efb\u52a1\u6765\u5b9a\u671f\u5220\u9664\u65e7\u7684\u65e5\u5fd7\u6587\u4ef6\u3002\u64cd\u4f5c\u6b65\u9aa4\u5982\u4e0b\uff1a</p> <ol> <li> <p>\u5728 Graph \u670d\u52a1\u914d\u7f6e\u6587\u4ef6\u4e2d\uff0c\u8fdb\u884c\u5982\u4e0b\u914d\u7f6e\uff0c\u7136\u540e\u91cd\u542f\u670d\u52a1\u3002</p> <pre><code>timestamp_in_logfile_name = true\nmax_log_size = 500\n</code></pre> <ul> <li>\u8bbe\u7f6e<code>timestamp_in_logfile_name</code>\u4e3a<code>true</code>\uff0c\u8fd9\u6837\u65e5\u5fd7\u6587\u4ef6\u540d\u4e2d\u4f1a\u5305\u542b\u65f6\u95f4\u6233\uff0c\u4ee5\u5b9a\u671f\u5220\u9664\u65e7\u7684\u65e5\u5fd7\u6587\u4ef6\u3002</li> <li>\u6dfb\u52a0<code>max_log_size</code>\u53c2\u6570\uff0c\u8bbe\u7f6e\u5355\u4e2a\u65e5\u5fd7\u6587\u4ef6\u7684\u6700\u5927\u5927\u5c0f\uff0c\u4f8b\u5982<code>500</code>\u3002\u8d85\u8fc7\u8fd9\u4e2a\u5927\u5c0f\u540e\uff0c\u4f1a\u81ea\u52a8\u521b\u5efa\u65b0\u7684\u65e5\u5fd7\u6587\u4ef6\uff0c\u5355\u4f4d MB\uff0c\u9ed8\u8ba4\u503c\u4e3a<code>1800</code>\u3002</li> </ul> </li> <li> <p>\u5728 Linux \u7cfb\u7edf\u4e2d\uff0c\u4f7f\u7528\u5982\u4e0b\u547d\u4ee4\u7f16\u8f91\u5b9a\u65f6\u4efb\u52a1\uff1a</p> <pre><code>crontab -e\n</code></pre> </li> <li> <p>\u5728\u5b9a\u65f6\u4efb\u52a1\u4e2d\u6dfb\u52a0\u547d\u4ee4\uff0c\u4ee5\u5b9a\u671f\u5220\u9664\u65e7\u7684\u65e5\u5fd7\u6587\u4ef6\u3002</p> <pre><code>* * * * * find &lt;log_path&gt; -name \"&lt;YourProjectName&gt;\" -mtime +7 -delete\n</code></pre> <p>Caution</p> <p>\u4ee5\u4e0a\u547d\u4ee4\u4e2d\u7684<code>find</code>\u547d\u4ee4\u9700\u8981\u4f7f\u7528 root \u7528\u6237\u6216\u8005\u5177\u6709 sudo \u6743\u9650\u7684\u7528\u6237\u6765\u6267\u884c\u3002</p> <ul> <li><code>* * * * *</code>\uff1a\u5b9a\u65f6\u4efb\u52a1\u7684\u65f6\u95f4\u5b57\u6bb5\uff0c\u4e94\u4e2a\u661f\u53f7\u8868\u793a\u8fd9\u4e2a\u4efb\u52a1\u6bcf\u5206\u949f\u90fd\u4f1a\u6267\u884c\u3002\u5176\u4ed6\u8bbe\u7f6e\uff0c\u53c2\u89c1Cron Expression\u3002</li> <li><code>&lt;log_path&gt;</code>\uff1a\u670d\u52a1\u8fd0\u884c\u65e5\u5fd7\u6587\u4ef6\u7684\u8def\u5f84\uff0c\u4f8b\u5982<code>/usr/local/nebula/logs</code>\u3002</li> <li><code>&lt;YourProjectName&gt;</code>\uff1a\u65e5\u5fd7\u6587\u4ef6\u540d\uff0c\u4f8b\u5982<code>nebula-graphd.*</code>\u3002</li> <li><code>-mtime +7</code>\uff1a\u8868\u793a\u5220\u9664\u66f4\u65b0\u65f6\u95f4\u8d85\u8fc7 7 \u5929\u7684\u65e5\u5fd7\u6587\u4ef6\u3002\u4e5f\u53ef\u4ee5\u4f7f\u7528<code>-mmin +n</code>\uff0c\u8868\u793a\u5220\u9664\u66f4\u65b0\u65f6\u95f4\u8d85\u8fc7 n \u5206\u949f\u7684\u65e5\u5fd7\u6587\u4ef6\u3002\u8be6\u60c5\u53c2\u89c1 find \u547d\u4ee4\u3002</li> <li><code>-delete</code>\uff1a\u8868\u793a\u5220\u9664\u6ee1\u8db3\u6761\u4ef6\u7684\u65e5\u5fd7\u6587\u4ef6\u3002</li> </ul> <p>\u4f8b\u5982\uff0c\u6bcf\u5929\u51cc\u6668 3 \u70b9\u81ea\u52a8\u5220\u9664\u66f4\u65b0\u65f6\u95f4\u8d85\u8fc7 7 \u5929\u7684 Graph \u670d\u52a1\u8fd0\u884c\u65e5\u5fd7\u6587\u4ef6\u7684\u547d\u4ee4\uff1a</p> <pre><code>0 3 * * * find /usr/local/nebula/logs -name nebula-graphd.* -mtime +7 -delete\n</code></pre> </li> <li> <p>\u4fdd\u5b58\u5b9a\u65f6\u4efb\u52a1\u3002</p> </li> </ol>"},{"location":"5.configurations-and-logs/2.log-management/logs/#logrotate","title":"\u4f7f\u7528 logrotate \u56de\u6536\u65e5\u5fd7","text":"<p>\u7528\u6237\u53ef\u4ee5\u4f7f\u7528 logrotate \u5de5\u5177\u5bf9\u6307\u5b9a\u7684\u65e5\u5fd7\u6587\u4ef6\u8fdb\u884c\u8f6e\u8f6c\uff0c\u4ee5\u8fbe\u5230\u5f52\u6863\u548c\u56de\u6536\u65e5\u5fd7\u7684\u76ee\u7684\u3002</p> <p>Note</p> <p>\u9700\u8981\u4f7f\u7528 root \u7528\u6237\u6216\u8005\u5177\u6709 sudo \u6743\u9650\u7684\u7528\u6237\u6765\u5b89\u88c5 logrotate \u6216\u8005\u8fd0\u884c logrotate\u3002</p> <p>\u672c\u6587\u4ee5\u56de\u6536 Graph \u670d\u52a1<code>INFO</code>\u7ea7\u522b\u7684\u65e5\u5fd7\u6587\u4ef6\uff08<code>/usr/local/nebula/logs/nebula-graphd.INFO.impl</code>\uff09\u4e3a\u4f8b\u8bf4\u660e\u5982\u4f55\u4f7f\u7528 logrotate \u5de5\u5177\u3002\u64cd\u4f5c\u6b65\u9aa4\u5982\u4e0b\uff1a</p> <ol> <li> <p>\u5728 Graph \u670d\u52a1\u914d\u7f6e\u6587\u4ef6\u4e2d\uff0c\u5c06<code>timestamp_in_logfile_name</code>\u8bbe\u7f6e\u4e3a<code>false</code>\uff0c\u4ee5\u4fbf logrotate \u5de5\u5177\u53ef\u4ee5\u8bc6\u522b\u65e5\u5fd7\u6587\u4ef6\u540d\u3002\u7136\u540e\u91cd\u542f\u670d\u52a1\u3002</p> <pre><code>timestamp_in_logfile_name = false\n</code></pre> </li> <li> <p>\u5b89\u88c5 logrotate\u3002</p> <ul> <li> <p>Debian/Ubuntu\uff1a</p> <pre><code>sudo apt-get install logrotate\n</code></pre> </li> </ul> <ul> <li> <p>CentOS/RHEL\uff1a</p> <pre><code>sudo yum install logrotate\n</code></pre> </li> </ul> </li> <li> <p>\u521b\u5efa logrotate \u914d\u7f6e\u6587\u4ef6\uff0c\u6dfb\u52a0\u65e5\u5fd7\u8f6e\u8f6c\u89c4\u5219\uff0c\u7136\u540e\u4fdd\u5b58\u914d\u7f6e\u6587\u4ef6\u3002</p> <p>\u5728<code>/etc/logrotate.d</code>\u76ee\u5f55\u4e0b\uff0c\u521b\u5efa\u4e00\u4e2a\u65b0\u7684 logrotate \u914d\u7f6e\u6587\u4ef6<code>nebula-graphd.INFO</code></p> <pre><code>sudo vim /etc/logrotate.d/nebula-graphd.INFO\n</code></pre> <p>\u6dfb\u52a0\u4ee5\u4e0b\u5185\u5bb9\uff1a</p> <pre><code># \u9700\u914d\u7f6e\u65e5\u5fd7\u6587\u4ef6\u7684\u7edd\u5bf9\u8def\u5f84\n# \u5e76\u4e14\u6587\u4ef6\u540d\u4e0d\u80fd\u4e3a\u8f6f\u94fe\u63a5\u6587\u4ef6\uff0c\u5982\u4e0d\u80fd\u4e3a`nebula-graph.INFO`\n/usr/local/nebula/logs/nebula-graphd.INFO.impl {\n    daily\n    rotate 2\n    copytruncate\n    nocompress\n    missingok\n    notifempty\n    create 644 root root\n    dateext\n    dateformat .%Y-%m-%d-%s\n    maxsize 1k\n}\n</code></pre> \u53c2\u6570 \u8bf4\u660e <code>daily</code> \u6bcf\u5929\u8f6e\u8f6c\u65e5\u5fd7\u3002\u53ef\u7528\u7684\u65f6\u95f4\u5355\u4f4d\u6709\uff1a<code>hourly</code>\u3001<code>daily</code>\u3001<code>weekly</code>\u3001<code>monthly</code>\u3001<code>yearly</code>\u3002 <code>rotate 2</code> \u5728\u5220\u9664\u524d\u65e5\u5fd7\u6587\u4ef6\u524d\uff0c\u5176\u88ab\u8f6e\u8f6c\u7684\u6b21\u6570\u3002\u5373\u4fdd\u7559\u6700\u8fd1\u751f\u6210\u7684 2 \u4e2a\u65e5\u5fd7\u6587\u4ef6\u3002 <code>copytruncate</code> \u5c06\u5f53\u524d\u65e5\u5fd7\u6587\u4ef6\u590d\u5236\u4e00\u4efd\uff0c\u7136\u540e\u6e05\u7a7a\u5f53\u524d\u65e5\u5fd7\u6587\u4ef6\u3002 <code>nocompress</code> \u4e0d\u538b\u7f29\u65e7\u7684\u65e5\u5fd7\u6587\u4ef6\u3002 <code>missingok</code> \u5982\u679c\u65e5\u5fd7\u6587\u4ef6\u4e22\u5931\uff0c\u4e0d\u62a5\u544a\u9519\u8bef\u3002 <code>notifempty</code> \u5982\u679c\u65e5\u5fd7\u6587\u4ef6\u4e3a\u7a7a\uff0c\u4e0d\u8fdb\u884c\u8f6e\u8f6c\u3002 <code>create 644 root root</code> \u521b\u5efa\u65b0\u7684\u65e5\u5fd7\u6587\u4ef6\uff0c\u5e76\u8bbe\u7f6e\u9002\u5f53\u7684\u6743\u9650\u548c\u6240\u6709\u8005\u3002 <code>dateext</code> \u5728\u65e5\u5fd7\u6587\u4ef6\u540d\u4e2d\u6dfb\u52a0\u65e5\u671f\u540e\u7f00\u3002\u9ed8\u8ba4\u662f\u5f53\u524d\u65e5\u671f\u3002\u9ed8\u8ba4\u662f<code>-%Y%m%d</code>\u7684\u540e\u7f00\u3002\u53ef\u7528<code>dateformat</code>\u9009\u9879\u6269\u5c55\u914d\u7f6e\u3002 <code>dateformat .%Y-%m-%d-%s</code> \u5fc5\u987b\u914d\u5408<code>dateext</code>\u4f7f\u7528\uff0c\u7d27\u8ddf\u5728\u4e0b\u4e00\u884c\u51fa\u73b0\uff0c\u5b9a\u4e49\u6587\u4ef6\u5207\u5272\u540e\u7684\u6587\u4ef6\u540d\u3002\u5728V3.9.0 \u4e4b\u524d\uff0c\u53ea\u652f\u6301<code>%Y</code>\u3001<code>%m</code>\u3001<code>%d</code>\u3001<code>%s</code>\u53c2\u6570\u3002\u5728 V3.9.0 \u53ca\u4e4b\u540e\uff0c\u652f\u6301 %H \u53c2\u6570\u3002 <code>maxsize 1k</code> \u5f53\u65e5\u5fd7\u6587\u4ef6\u5927\u5c0f\u8d85\u8fc7<code>1</code>\u5343\u5b57\u8282\uff08<code>1024</code>\u5b57\u8282\uff09\u6216\u8005\u8d85\u8fc7\u8bbe\u5b9a\u7684\u5468\u671f\uff08\u5982<code>daily</code>\uff09\u65f6\uff0c\u8fdb\u884c\u65e5\u5fd7\u8f6e\u8f6c\u3002\u53ef\u7528\u7684\u5927\u5c0f\u5355\u4f4d\u6709\uff1a<code>k</code>\u3001<code>M</code>\uff0c\u9ed8\u8ba4\u5355\u4f4d\u4e3a\u5b57\u8282\u3002 <p>\u7528\u6237\u53ef\u4ee5\u6839\u636e\u5b9e\u9645\u9700\u6c42\u4fee\u6539\u914d\u7f6e\u6587\u4ef6\u4e2d\u7684\u53c2\u6570\u3002\u66f4\u591a\u5173\u4e8e\u53c2\u6570\u7684\u914d\u7f6e\u53ca\u89e3\u91ca\uff0c\u53c2\u89c1 logrotate\u3002</p> </li> <li> <p>\u6d4b\u8bd5 logrotate \u914d\u7f6e\u3002</p> <p>\u4e3a\u4e86\u9a8c\u8bc1 logrotate \u7684\u914d\u7f6e\u662f\u5426\u6b63\u786e\uff0c\u53ef\u4ee5\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\u6765\u8fdb\u884c\u6d4b\u8bd5\uff1a</p> <pre><code>sudo logrotate --debug /etc/logrotate.d/nebula-graphd.INFO\n</code></pre> </li> <li> <p>\u8fd0\u884c logrotate\u3002</p> <p>\u5c3d\u7ba1<code>logrotate</code>\u901a\u5e38\u7531\u5b9a\u65f6\u4f5c\u4e1a\u81ea\u52a8\u6267\u884c\uff0c\u4f46\u4e5f\u53ef\u4ee5\u624b\u52a8\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\uff0c\u4ee5\u7acb\u5373\u8fdb\u884c\u65e5\u5fd7\u8f6e\u8f6c\uff1a</p> <pre><code>sudo logrotate -fv /etc/logrotate.d/nebula-graphd.INFO\n</code></pre> <p><code>-fv</code>\uff1a<code>f</code>\u8868\u793a\u5f3a\u5236\u6267\u884c\uff0c<code>v</code>\u8868\u793a\u6253\u5370\u8be6\u7ec6\u4fe1\u606f\u3002</p> </li> <li> <p>\u67e5\u770b\u65e5\u5fd7\u8f6e\u8f6c\u7ed3\u679c\u3002</p> <p>\u65e5\u5fd7\u8f6e\u8f6c\u540e\uff0c\u4f1a\u5728<code>/usr/local/nebula/logs</code>\u76ee\u5f55\u4e0b\u770b\u5230\u65b0\u7684\u65e5\u5fd7\u6587\u4ef6\uff0c\u4f8b\u5982<code>nebula-graphd.INFO.impl.2024-01-04-1704338204</code>\u3002\u539f\u59cb\u65e5\u5fd7\u5185\u5bb9\u4f1a\u88ab\u6e05\u7a7a\uff0c\u4f46\u6587\u4ef6\u4f1a\u88ab\u4fdd\u7559\uff0c\u65b0\u65e5\u5fd7\u7ee7\u7eed\u5199\u5165\u3002\u5f53\u65e5\u5fd7\u6587\u4ef6\u6570\u91cf\u8d85\u8fc7<code>rotate</code>\u8bbe\u7f6e\u7684\u503c\u65f6\uff0c\u4f1a\u5220\u9664\u6700\u65e7\u7684\u65e5\u5fd7\u6587\u4ef6\u3002</p> <p>\u4f8b\u5982\uff0c<code>rotate 2</code>\u8868\u793a\u4fdd\u7559\u6700\u8fd1\u751f\u6210\u7684 2 \u4e2a\u65e5\u5fd7\u6587\u4ef6\uff0c\u5f53\u65e5\u5fd7\u6587\u4ef6\u6570\u91cf\u8d85\u8fc7 2 \u4e2a\u65f6\uff0c\u4f1a\u5220\u9664\u6700\u65e7\u7684\u65e5\u5fd7\u6587\u4ef6\u3002</p> <pre><code>[test@test logs]$ ll\n-rw-r--r-- 1 root root        0 Jan  4 11:18 nebula-graphd.INFO.impl \n-rw-r--r-- 1 root root     6894 Jan  4 11:16 nebula-graphd.INFO.impl.2024-01-04-1704338204 # \u5f53\u65b0\u7684\u65e5\u5fd7\u6587\u4ef6\u751f\u6210\u65f6\uff0c\u6b64\u6587\u4ef6\u88ab\u5220\u9664\n-rw-r--r-- 1 root root      222 Jan  4 11:18 nebula-graphd.INFO.impl.2024-01-04-1704338287\n[test@test logs]$ ll\n-rw-r--r-- 1 root root        0 Jan  4 11:18 nebula-graphd.INFO.impl\n-rw-r--r-- 1 root root      222 Jan  4 11:18 nebula-graphd.INFO.impl.2024-01-04-1704338287\n-rw-r--r-- 1 root root      222 Jan  4 11:18 nebula-graphd.INFO.impl.2024-01-04-1704338339 # \u65b0\u751f\u6210\u7684\u65e5\u5fd7\u6587\u4ef6\n</code></pre> </li> </ol> <p>\u5982\u679c\u7528\u6237\u9700\u8981\u5bf9\u591a\u4e2a\u65e5\u5fd7\u6587\u4ef6\u8fdb\u884c\u8f6e\u8f6c\uff0c\u53ef\u4ee5\u5728<code>/etc/logrotate.d</code>\u76ee\u5f55\u4e0b\u521b\u5efa\u591a\u4e2a\u914d\u7f6e\u6587\u4ef6\uff0c\u6bcf\u4e2a\u914d\u7f6e\u6587\u4ef6\u5bf9\u5e94\u4e00\u4e2a\u65e5\u5fd7\u6587\u4ef6\u3002\u4f8b\u5982\uff0c\u7528\u6237\u9700\u8981\u5bf9 Meta \u670d\u52a1\u7684<code>INFO</code>\u7ea7\u522b\u65e5\u5fd7\u6587\u4ef6\u548c<code>WARNING</code>\u7ea7\u522b\u65e5\u5fd7\u6587\u4ef6\u8fdb\u884c\u8f6e\u8f6c\uff0c\u53ef\u4ee5\u521b\u5efa\u4e24\u4e2a\u914d\u7f6e\u6587\u4ef6<code>nebula-metad.INFO</code>\u548c<code>nebula-metad.WARNING</code>\uff0c\u5e76\u5728\u5176\u4e2d\u5206\u522b\u6dfb\u52a0\u65e5\u5fd7\u8f6e\u8f6c\u89c4\u5219\u3002</p>"},{"location":"6.monitor-and-metrics/1.query-performance-metrics/","title":"\u67e5\u8be2 NebulaGraph \u76d1\u63a7\u6307\u6807","text":"<p>NebulaGraph \u652f\u6301\u591a\u79cd\u65b9\u5f0f\u67e5\u8be2\u670d\u52a1\u7684\u76d1\u63a7\u6307\u6807\uff0c\u672c\u6587\u5c06\u4ecb\u7ecd\u6700\u57fa\u7840\u7684\u65b9\u5f0f\uff0c\u5373\u901a\u8fc7 HTTP \u7aef\u53e3\u67e5\u8be2\u3002</p>"},{"location":"6.monitor-and-metrics/1.query-performance-metrics/#_1","title":"\u76d1\u63a7\u6307\u6807\u7ed3\u6784\u8bf4\u660e","text":"<p>NebulaGraph \u7684\u6bcf\u4e2a\u76d1\u63a7\u6307\u6807\u90fd\u7531\u4e09\u4e2a\u90e8\u5206\u7ec4\u6210\uff0c\u4e2d\u95f4\u7528\u82f1\u6587\u53e5\u53f7\uff08.\uff09\u9694\u5f00\uff0c\u4f8b\u5982<code>num_queries.sum.600</code>\u3002\u4e0d\u540c\u7684 NebulaGraph \u670d\u52a1\u652f\u6301\u67e5\u8be2\u7684\u76d1\u63a7\u6307\u6807\u4e5f\u4e0d\u540c\u3002\u6307\u6807\u7ed3\u6784\u7684\u8bf4\u660e\u5982\u4e0b\u3002</p> \u7c7b\u522b \u793a\u4f8b \u8bf4\u660e \u6307\u6807\u540d\u79f0 <code>num_queries</code> \u7b80\u5355\u63cf\u8ff0\u6307\u6807\u7684\u542b\u4e49\u3002 \u7edf\u8ba1\u7c7b\u578b <code>sum</code> \u6307\u6807\u7edf\u8ba1\u7684\u65b9\u6cd5\u3002\u5f53\u524d\u652f\u6301 SUM\u3001AVG\u3001RATE \u548c P \u5206\u4f4d\u6570\uff08P75\u3001P95\u3001P99\u3001P999\uff09\u3002 \u7edf\u8ba1\u65f6\u95f4 <code>600</code> \u6307\u6807\u7edf\u8ba1\u7684\u65f6\u95f4\u8303\u56f4\uff0c\u5f53\u524d\u652f\u6301 5 \u79d2\u300160 \u79d2\u3001600 \u79d2\u548c 3600 \u79d2\uff0c\u5206\u522b\u8868\u793a\u6700\u8fd1 5 \u79d2\u3001\u6700\u8fd1 1 \u5206\u949f\u3001\u6700\u8fd1 10 \u5206\u949f\u548c\u6700\u8fd1 1 \u5c0f\u65f6\u3002"},{"location":"6.monitor-and-metrics/1.query-performance-metrics/#http","title":"\u901a\u8fc7 HTTP \u7aef\u53e3\u67e5\u8be2\u76d1\u63a7\u6307\u6807","text":""},{"location":"6.monitor-and-metrics/1.query-performance-metrics/#_2","title":"\u8bed\u6cd5","text":"<pre><code>curl -G \"http://&lt;host&gt;:&lt;port&gt;/stats?stats=&lt;metric_name_list&gt; [&amp;format=json]\"\n</code></pre> \u9009\u9879 \u8bf4\u660e <code>host</code> \u670d\u52a1\u5668\u7684 IP \u6216\u4e3b\u673a\u540d\uff0c\u53ef\u4ee5\u5728\u5b89\u88c5\u76ee\u5f55\u5185\u67e5\u770b\u914d\u7f6e\u6587\u4ef6\u83b7\u53d6\u3002 <code>port</code> \u670d\u52a1\u5668\u7684 HTTP \u7aef\u53e3\uff0c\u53ef\u4ee5\u5728\u5b89\u88c5\u76ee\u5f55\u5185\u67e5\u770b\u914d\u7f6e\u6587\u4ef6\u83b7\u53d6\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0cMeta \u670d\u52a1\u7aef\u53e3\u4e3a 19559\uff0cGraph \u670d\u52a1\u7aef\u53e3\u4e3a 19669\uff0cStorage \u670d\u52a1\u7aef\u53e3\u4e3a 19779\u3002 <code>metric_name_list</code> \u76d1\u63a7\u6307\u6807\u540d\u79f0\uff0c\u591a\u4e2a\u76d1\u63a7\u6307\u6807\u7528\u82f1\u6587\u9017\u53f7\uff08,\uff09\u9694\u5f00\u3002 <code>&amp;format=json</code> \u5c06\u7ed3\u679c\u4ee5 JSON \u683c\u5f0f\u8fd4\u56de\u3002 <p>Note</p> <p>\u5982\u679c NebulaGraph \u670d\u52a1\u90e8\u7f72\u5728\u5bb9\u5668\u4e2d\uff0c\u9700\u8981\u6267\u884c<code>docker-compose ps</code>\u547d\u4ee4\u67e5\u770b\u6620\u5c04\u5230\u5bb9\u5668\u5916\u90e8\u7684\u7aef\u53e3\uff0c\u7136\u540e\u901a\u8fc7\u8be5\u7aef\u53e3\u67e5\u8be2\u3002</p>"},{"location":"6.monitor-and-metrics/1.query-performance-metrics/#_3","title":"\u67e5\u8be2\u5355\u4e2a\u76d1\u63a7\u6307\u6807","text":"<p>\u67e5\u8be2 Graph \u670d\u52a1\u4e2d\uff0c\u6700\u8fd1 10 \u5206\u949f\u7684\u8bf7\u6c42\u603b\u6570\u3002</p> <pre><code>$ curl -G \"http://192.168.8.40:19669/stats?stats=num_queries.sum.600\"\nnum_queries.sum.600=400\n</code></pre>"},{"location":"6.monitor-and-metrics/1.query-performance-metrics/#_4","title":"\u67e5\u8be2\u591a\u4e2a\u76d1\u63a7\u6307\u6807","text":"<p>\u67e5\u8be2 Meta \u670d\u52a1\u4e2d\uff0c\u6700\u8fd1 1 \u5206\u949f\u7684\u5fc3\u8df3\u5e73\u5747\u5ef6\u8fdf\u548c\u6700\u8fd1 10 \u5206\u949f P99 \u5fc3\u8df3\uff081%\u6700\u6162\u7684\u5fc3\u8df3\uff09\u7684\u5e73\u5747\u5ef6\u8fdf\u3002</p> <pre><code>$ curl -G \"http://192.168.8.40:19559/stats?stats=heartbeat_latency_us.avg.60,heartbeat_latency_us.p99.600\"\nheartbeat_latency_us.avg.60=281\nheartbeat_latency_us.p99.600=985\n</code></pre>"},{"location":"6.monitor-and-metrics/1.query-performance-metrics/#json","title":"\u67e5\u8be2\u76d1\u63a7\u6307\u6807\u5e76\u4ee5 JSON \u683c\u5f0f\u8fd4\u56de","text":"<p>\u67e5\u8be2 Storage \u670d\u52a1\u4e2d\uff0c\u6700\u8fd1 10 \u5206\u949f\u65b0\u589e\u7684\u70b9\u6570\u91cf\uff0c\u5e76\u4ee5 JSON \u683c\u5f0f\u8fd4\u56de\u7ed3\u679c\u3002</p> <pre><code>$ curl -G \"http://192.168.8.40:19779/stats?stats=num_add_vertices.sum.600&amp;format=json\"\n[{\"value\":1,\"name\":\"num_add_vertices.sum.600\"}]\n</code></pre>"},{"location":"6.monitor-and-metrics/1.query-performance-metrics/#_5","title":"\u67e5\u8be2\u670d\u52a1\u5668\u7684\u6240\u6709\u76d1\u63a7\u6307\u6807","text":"<p>\u4e0d\u6307\u5b9a\u67e5\u8be2\u67d0\u4e2a\u76d1\u63a7\u6307\u6807\u65f6\uff0c\u4f1a\u8fd4\u56de\u8be5\u670d\u52a1\u5668\u4e0a\u6240\u6709\u7684\u76d1\u63a7\u6307\u6807\u3002</p> <pre><code>$ curl -G \"http://192.168.8.40:19559/stats\"\nheartbeat_latency_us.avg.5=304\nheartbeat_latency_us.avg.60=308\nheartbeat_latency_us.avg.600=299\nheartbeat_latency_us.avg.3600=285\nheartbeat_latency_us.p75.5=652\nheartbeat_latency_us.p75.60=669\nheartbeat_latency_us.p75.600=651\nheartbeat_latency_us.p75.3600=642\nheartbeat_latency_us.p95.5=930\nheartbeat_latency_us.p95.60=963\nheartbeat_latency_us.p95.600=933\nheartbeat_latency_us.p95.3600=929\nheartbeat_latency_us.p99.5=986\nheartbeat_latency_us.p99.60=1409\nheartbeat_latency_us.p99.600=989\nheartbeat_latency_us.p99.3600=986\nnum_heartbeats.rate.5=0\nnum_heartbeats.rate.60=0\nnum_heartbeats.rate.600=0\nnum_heartbeats.rate.3600=0\nnum_heartbeats.sum.5=2\nnum_heartbeats.sum.60=40\nnum_heartbeats.sum.600=394\nnum_heartbeats.sum.3600=2364\n...\n</code></pre>"},{"location":"6.monitor-and-metrics/1.query-performance-metrics/#_6","title":"\u67e5\u8be2\u56fe\u7a7a\u95f4\u76d1\u63a7\u6307\u6807","text":"<p>Graph \u670d\u52a1\u652f\u6301\u4e00\u7cfb\u5217\u57fa\u4e8e\u56fe\u7a7a\u95f4\u7684\u76d1\u63a7\u6307\u6807\uff0c\u5bf9\u4e0d\u540c\u56fe\u7a7a\u95f4\u7684\u6570\u636e\u5206\u522b\u8bb0\u5f55\u3002</p> <p>\u56fe\u7a7a\u95f4\u6307\u6807\u53ea\u80fd\u901a\u8fc7\u67e5\u8be2\u6240\u6709\u76d1\u63a7\u6307\u6807\u7684\u5f62\u5f0f\u67e5\u8be2\u5230\uff0c\u4f8b\u5982<code>curl -G \"http://192.168.8.40:19559/stats\"</code>\uff0c\u8fd4\u56de\u7ed3\u679c\u4e2d\u4ee5<code>{space=space_name}</code>\u7684\u5f62\u5f0f\u5305\u542b\u56fe\u7a7a\u95f4\u540d\u79f0\uff0c\u4f8b\u5982<code>num_active_queries{space=basketballplayer}.sum.5=0</code>\u3002</p> <p>Caution</p> <p>\u5982\u9700\u5f00\u542f\u56fe\u7a7a\u95f4\u76d1\u63a7\u6307\u6807\uff0c\u5148\u5728 Graph \u670d\u52a1\u7684\u914d\u7f6e\u6587\u4ef6\u4e2d\u5c06<code>enable_space_level_metrics</code>\u53c2\u6570\u7684\u503c\u4fee\u6539\u4e3a<code>true</code>\uff0c\u518d\u542f\u52a8 NebulaGraph \u3002\u4fee\u6539\u914d\u7f6e\u7684\u8be6\u7ec6\u65b9\u5f0f\u53c2\u89c1\u914d\u7f6e\u7ba1\u7406\u3002</p>"},{"location":"6.monitor-and-metrics/1.query-performance-metrics/#_7","title":"\u76d1\u63a7\u6307\u6807\u8bf4\u660e","text":""},{"location":"6.monitor-and-metrics/1.query-performance-metrics/#graph","title":"Graph","text":"\u53c2\u6570 \u8bf4\u660e <code>num_active_queries</code> \u6d3b\u8dc3\u7684\u67e5\u8be2\u8bed\u53e5\u6570\u7684\u53d8\u5316\u6570\u3002\u8ba1\u7b97\u516c\u5f0f\uff1a\u65f6\u95f4\u8303\u56f4\u5185\u5f00\u59cb\u6267\u884c\u7684\u8bed\u53e5\u6570\u51cf\u53bb\u6267\u884c\u5b8c\u6bd5\u7684\u8bed\u53e5\u6570\u3002 <code>num_active_sessions</code> \u6d3b\u8dc3\u7684\u4f1a\u8bdd\u6570\u7684\u53d8\u5316\u6570\u3002\u8ba1\u7b97\u516c\u5f0f\uff1a\u65f6\u95f4\u8303\u56f4\u5185\u767b\u5f55\u7684\u4f1a\u8bdd\u6570\u51cf\u53bb\u767b\u51fa\u7684\u4f1a\u8bdd\u6570\u3002\u4f8b\u5982\u67e5\u8be2num_active_sessions.sum.5\uff0c\u8fc7\u53bb 5 \u79d2\u4e2d\u767b\u5f55\u4e86 10 \u4e2a\u4f1a\u8bdd\u6570\uff0c\u767b\u51fa\u4e86 30 \u4e2a\u4f1a\u8bdd\u6570\uff0c\u90a3\u4e48\u8be5\u6307\u6807\u503c\u5c31\u662f<code>-20</code>\uff0810-30\uff09\u3002 <code>num_aggregate_executors</code> \u805a\u5408\uff08Aggregate\uff09\u7b97\u5b50\u6267\u884c\u65f6\u95f4\u3002 <code>num_auth_failed_sessions_bad_username_password</code> \u56e0\u7528\u6237\u540d\u5bc6\u7801\u9519\u8bef\u5bfc\u9a8c\u8bc1\u5931\u8d25\u7684\u4f1a\u8bdd\u6570\u91cf\u3002 <code>num_auth_failed_sessions_out_of_max_allowed</code> \u56e0\u4e3a\u8d85\u8fc7<code>FLAG_OUT_OF_MAX_ALLOWED_CONNECTIONS</code>\u53c2\u6570\u5bfc\u81f4\u7684\u9a8c\u8bc1\u767b\u5f55\u7684\u5931\u8d25\u7684\u4f1a\u8bdd\u6570\u91cf\u3002 <code>num_auth_failed_sessions</code> \u767b\u5f55\u9a8c\u8bc1\u5931\u8d25\u7684\u4f1a\u8bdd\u6570\u91cf\u3002 <code>num_indexscan_executors</code> \u7d22\u5f15\u626b\u63cf\uff08IndexScan\uff09\u7b97\u5b50\u6267\u884c\u65f6\u95f4\u3002 <code>num_killed_queries</code> \u88ab\u7ec8\u6b62\u7684\u67e5\u8be2\u6570\u91cf\u3002 <code>num_opened_sessions</code> \u670d\u52a1\u7aef\u5efa\u7acb\u8fc7\u7684\u4f1a\u8bdd\u6570\u91cf\u3002 <code>num_queries</code> \u67e5\u8be2\u6b21\u6570\u3002 <code>num_query_errors_leader_changes</code> \u56e0\u67e5\u8be2\u9519\u8bef\u800c\u5bfc\u81f4\u7684 Leader \u53d8\u66f4\u7684\u6b21\u6570\u3002 <code>num_query_errors</code> \u67e5\u8be2\u9519\u8bef\u6b21\u6570\u3002 <code>num_reclaimed_expired_sessions</code> \u670d\u52a1\u7aef\u4e3b\u52a8\u56de\u6536\u7684\u8fc7\u671f\u7684\u4f1a\u8bdd\u6570\u91cf\u3002 <code>num_rpc_sent_to_metad_failed</code> Graphd \u670d\u52a1\u53d1\u7ed9 Metad \u7684 RPC \u8bf7\u6c42\u5931\u8d25\u7684\u6570\u91cf\u3002 <code>num_rpc_sent_to_metad</code> Graphd \u670d\u52a1\u53d1\u7ed9 Metad \u670d\u52a1\u7684 RPC \u8bf7\u6c42\u6570\u91cf\u3002 <code>num_rpc_sent_to_storaged_failed</code> Graphd \u670d\u52a1\u53d1\u7ed9 Storaged \u670d\u52a1\u7684 RPC \u8bf7\u6c42\u5931\u8d25\u7684\u6570\u91cf\u3002 <code>num_rpc_sent_to_storaged</code> Graphd \u670d\u52a1\u53d1\u7ed9 Storaged \u670d\u52a1\u7684 RPC \u8bf7\u6c42\u6570\u91cf\u3002 <code>num_sentences</code> Graphd \u670d\u52a1\u63a5\u6536\u7684\u8bed\u53e5\u6570\u3002 <code>num_slow_queries</code> \u6162\u67e5\u8be2\u6b21\u6570\u3002 <code>num_sort_executors</code> \u6392\u5e8f\uff08Sort\uff09\u7b97\u5b50\u6267\u884c\u65f6\u95f4\u3002 <code>optimizer_latency_us</code> \u4f18\u5316\u5668\u9636\u6bb5\u5ef6\u8fdf\u65f6\u95f4\u3002 <code>query_latency_us</code> \u67e5\u8be2\u5ef6\u8fdf\u65f6\u95f4\u3002 <code>slow_query_latency_us</code> \u6162\u67e5\u8be2\u5ef6\u8fdf\u65f6\u95f4\u3002 <code>num_queries_hit_memory_watermark</code> \u8fbe\u5230\u5185\u5b58\u6c34\u4f4d\u7ebf\u7684\u8bed\u53e5\u7684\u6570\u91cf\u3002 <code>resp_part_completeness</code> \u90e8\u5206\u6210\u529f\u7684\u5b8c\u6574\u6027\u3002\u9700\u8981\u5728 Graph \u914d\u7f6e\u4e2d\u8bbe\u7f6e<code>accept_partial_success</code>\u4e3a<code>true</code>\u3002"},{"location":"6.monitor-and-metrics/1.query-performance-metrics/#meta","title":"Meta","text":"\u53c2\u6570 \u8bf4\u660e <code>commit_log_latency_us</code> Raft \u534f\u8bae\u4e2d Commit \u65e5\u5fd7\u7684\u5ef6\u8fdf\u65f6\u95f4\u3002 <code>commit_snapshot_latency_us</code> Raft \u534f\u8bae\u4e2d Commit \u5feb\u7167\u7684\u5ef6\u8fdf\u65f6\u95f4\u3002 <code>heartbeat_latency_us</code> \u5fc3\u8df3\u5ef6\u8fdf\u65f6\u95f4\u3002 <code>num_heartbeats</code> \u5fc3\u8df3\u6b21\u6570\u3002 <code>num_raft_votes</code> Raft \u534f\u8bae\u4e2d\u6295\u7968\u7684\u6b21\u6570\u3002 <code>transfer_leader_latency_us</code> Raft \u534f\u8bae\u4e2d\u8f6c\u79fb Leader \u7684\u5ef6\u8fdf\u65f6\u95f4\u3002 <code>num_agent_heartbeats</code> AgentHBProcessor \u5fc3\u8df3\u6b21\u6570\u3002 <code>agent_heartbeat_latency_us</code> AgentHBProcessor \u5ef6\u8fdf\u65f6\u95f4\u3002 <code>replicate_log_latency_us</code> Raft \u590d\u5236\u65e5\u5fd7\u81f3\u5927\u591a\u6570\u8282\u70b9\u7684\u5ef6\u8fdf\u3002 <code>num_send_snapshot</code> Raft \u53d1\u9001\u5feb\u7167\u81f3\u5176\u4ed6\u8282\u70b9\u7684\u6b21\u6570\u3002 <code>append_log_latency_us</code> Raft \u590d\u5236\u65e5\u5fd7\u5230\u5355\u4e2a\u8282\u70b9\u7684\u5ef6\u8fdf\u3002 <code>append_wal_latency_us</code> Raft \u5199\u5165\u5355\u6761 WAL \u7684\u5ef6\u8fdf\u3002 <code>num_grant_votes</code> Raft \u6295\u7968\u7ed9\u5176\u4ed6\u8282\u70b9\u7684\u6b21\u6570\u3002 <code>num_start_elect</code> Raft \u53d1\u8d77\u6295\u7968\u7684\u6b21\u6570\u3002"},{"location":"6.monitor-and-metrics/1.query-performance-metrics/#storage","title":"Storage","text":"\u53c2\u6570 \u8bf4\u660e <code>add_edges_latency_us</code> \u6dfb\u52a0\u8fb9\u7684\u5ef6\u8fdf\u65f6\u95f4\u3002 <code>add_vertices_latency_us</code> \u6dfb\u52a0\u70b9\u7684\u5ef6\u8fdf\u65f6\u95f4\u3002 <code>commit_log_latency_us</code> Raft \u534f\u8bae\u4e2d Commit \u65e5\u5fd7\u7684\u5ef6\u8fdf\u65f6\u95f4\u3002 <code>commit_snapshot_latency_us</code> Raft \u534f\u8bae\u4e2d Commit \u5feb\u7167\u7684\u5ef6\u8fdf\u65f6\u95f4\u3002 <code>delete_edges_latency_us</code> \u5220\u9664\u8fb9\u7684\u5ef6\u8fdf\u65f6\u95f4\u3002 <code>delete_vertices_latency_us</code> \u5220\u9664\u70b9\u7684\u5ef6\u8fdf\u65f6\u95f4\u3002 <code>get_neighbors_latency_us</code> \u67e5\u8be2\u90bb\u5c45\u5ef6\u8fdf\u65f6\u95f4\u3002 <code>get_dst_by_src_latency_us</code> \u901a\u8fc7\u8d77\u59cb\u70b9\u83b7\u53d6\u7ec8\u70b9\u7684\u5ef6\u8fdf\u65f6\u95f4\u3002 <code>num_get_prop</code> GetPropProcessor \u6267\u884c\u7684\u6b21\u6570\u3002 <code>num_get_neighbors_errors</code> GetNeighborsProcessor \u6267\u884c\u51fa\u9519\u7684\u6b21\u6570\u3002 <code>num_get_dst_by_src_errors</code> GetDstBySrcProcessor \u6267\u884c\u51fa\u9519\u7684\u6b21\u6570\u3002 <code>get_prop_latency_us</code> GetPropProcessor \u6267\u884c\u7684\u5ef6\u8fdf\u65f6\u95f4\u3002 <code>num_edges_deleted</code> \u5220\u9664\u7684\u8fb9\u6570\u91cf\u3002 <code>num_edges_inserted</code> \u63d2\u5165\u7684\u8fb9\u6570\u91cf\u3002 <code>num_raft_votes</code> Raft \u534f\u8bae\u4e2d\u6295\u7968\u7684\u6b21\u6570\u3002 <code>num_rpc_sent_to_metad_failed</code> Storaged \u670d\u52a1\u53d1\u7ed9 Metad \u670d\u52a1\u7684 RPC \u8bf7\u6c42\u5931\u8d25\u7684\u6570\u91cf\u3002 <code>num_rpc_sent_to_metad</code> Storaged \u670d\u52a1\u53d1\u7ed9 Metad \u670d\u52a1\u7684 RPC \u8bf7\u6c42\u6570\u91cf\u3002 <code>num_tags_deleted</code> \u5220\u9664\u7684 Tag \u6570\u91cf\u3002 <code>num_vertices_deleted</code> \u5220\u9664\u7684\u70b9\u6570\u91cf\u3002 <code>num_vertices_inserted</code> \u63d2\u5165\u7684\u70b9\u6570\u91cf\u3002 <code>transfer_leader_latency_us</code> Raft \u534f\u8bae\u4e2d\u8f6c\u79fb Leader \u7684\u5ef6\u8fdf\u65f6\u95f4\u3002 <code>lookup_latency_us</code> LookupProcessor \u6267\u884c\u7684\u5ef6\u8fdf\u65f6\u95f4\u3002 <code>num_lookup_errors</code> LookupProcessor \u6267\u884c\u65f6\u51fa\u9519\u7684\u6b21\u6570\u3002 <code>num_scan_vertex</code> ScanVertexProcessor \u6267\u884c\u7684\u6b21\u6570\u3002 <code>num_scan_vertex_errors</code> ScanVertexProcessor \u6267\u884c\u65f6\u51fa\u9519\u7684\u6b21\u6570\u3002 <code>update_edge_latency_us</code> UpdateEdgeProcessor \u6267\u884c\u7684\u5ef6\u8fdf\u65f6\u95f4\u3002 <code>num_update_vertex</code> UpdateVertexProcessor \u6267\u884c\u7684\u6b21\u6570\u3002 <code>num_update_vertex_errors</code> UpdateVertexProcessor \u6267\u884c\u65f6\u51fa\u9519\u7684\u6b21\u6570\u3002 <code>kv_get_latency_us</code> Getprocessor \u7684\u5ef6\u8fdf\u65f6\u95f4\u3002 <code>kv_put_latency_us</code> PutProcessor \u7684\u5ef6\u8fdf\u65f6\u95f4\u3002 <code>kv_remove_latency_us</code> RemoveProcessor \u7684\u5ef6\u8fdf\u65f6\u95f4\u3002 <code>num_kv_get_errors</code> GetProcessor \u6267\u884c\u51fa\u9519\u6b21\u6570\u3002 <code>num_kv_get</code> GetProcessor \u6267\u884c\u6b21\u6570\u3002 <code>num_kv_put_errors</code> PutProcessor \u6267\u884c\u51fa\u9519\u6b21\u6570\u3002 <code>num_kv_put</code> PutProcessor \u6267\u884c\u6b21\u6570\u3002 <code>num_kv_remove_errors</code> RemoveProcessor \u6267\u884c\u51fa\u9519\u6b21\u6570\u3002 <code>num_kv_remove</code> RemoveProcessor \u6267\u884c\u6b21\u6570\u3002 <code>forward_tranx_latency_us</code> \u4f20\u8f93\u5ef6\u8fdf\u65f6\u95f4\u3002 <code>scan_edge_latency_us</code> ScanEdgeProcessor \u6267\u884c\u7684\u5ef6\u8fdf\u65f6\u95f4\u3002 <code>num_scan_edge_errors</code> ScanEdgeProcessor \u6267\u884c\u65f6\u51fa\u9519\u7684\u6b21\u6570\u3002 <code>num_scan_edge</code> ScanEdgeProcessor \u6267\u884c\u7684\u6b21\u6570\u3002 <code>scan_vertex_latency_us</code> ScanVertexProcessor \u6267\u884c\u7684\u5ef6\u8fdf\u65f6\u95f4\u3002 <code>num_add_edges</code> \u6dfb\u52a0\u8fb9\u7684\u6b21\u6570\u3002 <code>num_add_edges_errors</code> \u6dfb\u52a0\u8fb9\u65f6\u51fa\u9519\u7684\u6b21\u6570\u3002 <code>num_add_vertices</code> \u6dfb\u52a0\u70b9\u7684\u6b21\u6570\u3002 <code>num_start_elect</code> Raft \u53d1\u8d77\u6295\u7968\u7684\u6b21\u6570 <code>num_add_vertices_errors</code> \u6dfb\u52a0\u70b9\u65f6\u51fa\u9519\u7684\u6b21\u6570\u3002 <code>num_delete_vertices_errors</code> \u5220\u9664\u70b9\u65f6\u51fa\u9519\u7684\u6b21\u6570\u3002 <code>append_log_latency_us</code> Raft \u590d\u5236\u65e5\u5fd7\u5230\u5355\u4e2a\u8282\u70b9\u7684\u5ef6\u8fdf\u3002 <code>num_grant_votes</code> Raft \u6295\u7968\u7ed9\u5176\u4ed6\u8282\u70b9\u7684\u6b21\u6570\u3002 <code>replicate_log_latency_us</code> Raft \u590d\u5236\u65e5\u5fd7\u5230\u5927\u591a\u6570\u8282\u70b9\u7684\u5ef6\u8fdf\u3002 <code>num_delete_tags</code> \u5220\u9664 Tag \u7684\u6b21\u6570\u3002 <code>num_delete_tags_errors</code> \u5220\u9664 Tag \u65f6\u51fa\u9519\u7684\u6b21\u6570\u3002 <code>num_delete_edges</code> \u5220\u9664\u8fb9\u7684\u6b21\u6570\u3002 <code>num_delete_edges_errors</code> \u5220\u9664\u8fb9\u65f6\u51fa\u9519\u7684\u6b21\u6570\u3002 <code>num_send_snapshot</code> \u53d1\u9001\u5feb\u7167\u7684\u6b21\u6570\u3002 <code>update_vertex_latency_us</code> UpdateVertexProcessor \u6267\u884c\u7684\u5ef6\u8fdf\u65f6\u95f4\u3002 <code>append_wal_latency_us</code> Raft \u5199\u5165\u5355\u6761 WAL \u7684\u5ef6\u8fdf\u3002 <code>num_update_edge</code> UpdateEdgeProcessor \u6267\u884c\u7684\u6b21\u6570\u3002 <code>delete_tags_latency_us</code> \u5220\u9664 Tag \u7684\u5ef6\u8fdf\u65f6\u95f4\u3002 <code>num_update_edge_errors</code> UpdateEdgeProcessor \u6267\u884c\u65f6\u51fa\u9519\u7684\u6b21\u6570\u3002 <code>num_get_neighbors</code> GetNeighborsProcessor \u6267\u884c\u7684\u6b21\u6570\u3002 <code>num_get_dst_by_src</code> GetDstBySrcProcessor \u6267\u884c\u7684\u6b21\u6570\u3002 <code>num_get_prop_errors</code> GetPropProcessor \u6267\u884c\u65f6\u51fa\u9519\u7684\u6b21\u6570\u3002 <code>num_delete_vertices</code> \u5220\u9664\u70b9\u7684\u6b21\u6570\u3002 <code>num_lookup</code> LookupProcessor \u6267\u884c\u7684\u6b21\u6570\u3002 <code>num_sync_data</code> Storage \u540c\u6b65 Drainer \u6570\u636e\u7684\u6b21\u6570\u3002 <code>num_sync_data_errors</code> Storage \u540c\u6b65 Drainer \u6570\u636e\u51fa\u9519\u7684\u6b21\u6570\u3002 <code>sync_data_latency_us</code> Storage \u540c\u6b65 Drainer \u6570\u636e\u7684\u5ef6\u8fdf\u65f6\u95f4\u3002"},{"location":"6.monitor-and-metrics/1.query-performance-metrics/#_8","title":"\u56fe\u7a7a\u95f4\u7ea7\u522b\u76d1\u63a7\u6307\u6807","text":"<p>Note</p> <p>\u56fe\u7a7a\u95f4\u7ea7\u522b\u76d1\u63a7\u6307\u6807\u662f\u52a8\u6001\u521b\u5efa\u7684, \u53ea\u6709\u5f53\u56fe\u7a7a\u95f4\u5185\u89e6\u53d1\u8be5\u884c\u4e3a\u65f6\uff0c\u5bf9\u5e94\u7684\u6307\u6807\u624d\u4f1a\u521b\u5efa\uff0c\u7528\u6237\u624d\u80fd\u67e5\u8be2\u5230\u3002</p> \u53c2\u6570 \u8bf4\u660e <code>num_active_queries</code> \u5f53\u524d\u6b63\u5728\u6267\u884c\u7684\u67e5\u8be2\u6570\u3002 <code>num_queries</code> \u67e5\u8be2\u6b21\u6570\u3002 <code>num_sentences</code> Graphd \u670d\u52a1\u63a5\u6536\u7684\u8bed\u53e5\u6570\u3002 <code>optimizer_latency_us</code> \u4f18\u5316\u5668\u9636\u6bb5\u5ef6\u8fdf\u65f6\u95f4\u3002 <code>query_latency_us</code> \u67e5\u8be2\u5ef6\u8fdf\u65f6\u95f4\u3002 <code>num_slow_queries</code> \u6162\u67e5\u8be2\u6b21\u6570\u3002 <code>num_query_errors</code> \u67e5\u8be2\u62a5\u9519\u8bed\u53e5\u6570\u91cf\u3002 <code>num_query_errors_leader_changes</code> \u56e0\u67e5\u8be2\u9519\u8bef\u800c\u5bfc\u81f4\u7684 Leader \u53d8\u66f4\u7684\u6b21\u6570\u3002 <code>num_killed_queries</code> \u88ab\u7ec8\u6b62\u7684\u67e5\u8be2\u6570\u91cf\u3002 <code>num_aggregate_executors</code> \u805a\u5408\uff08Aggregate\uff09\u7b97\u5b50\u6267\u884c\u65f6\u95f4\u3002 <code>num_sort_executors</code> \u6392\u5e8f\uff08Sort\uff09\u7b97\u5b50\u6267\u884c\u65f6\u95f4\u3002 <code>num_indexscan_executors</code> \u7d22\u5f15\u626b\u63cf\uff08IndexScan\uff09\u7b97\u5b50\u6267\u884c\u65f6\u95f4\u3002 <code>num_auth_failed_sessions_bad_username_password</code> \u56e0\u7528\u6237\u540d\u5bc6\u7801\u9519\u8bef\u5bfc\u9a8c\u8bc1\u5931\u8d25\u7684\u4f1a\u8bdd\u6570\u91cf\u3002 <code>num_auth_failed_sessions</code> \u767b\u5f55\u9a8c\u8bc1\u5931\u8d25\u7684\u4f1a\u8bdd\u6570\u91cf\u3002 <code>num_opened_sessions</code> \u670d\u52a1\u7aef\u5efa\u7acb\u8fc7\u7684\u4f1a\u8bdd\u6570\u91cf\u3002 <code>num_queries_hit_memory_watermark</code> \u8fbe\u5230\u5185\u5b58\u6c34\u4f4d\u7ebf\u7684\u8bed\u53e5\u7684\u6570\u91cf\u3002 <code>num_reclaimed_expired_sessions</code> \u670d\u52a1\u7aef\u4e3b\u52a8\u56de\u6536\u7684\u8fc7\u671f\u7684\u4f1a\u8bdd\u6570\u91cf\u3002 <code>num_rpc_sent_to_metad_failed</code> Graphd \u670d\u52a1\u53d1\u7ed9 Metad \u7684 RPC \u8bf7\u6c42\u5931\u8d25\u7684\u6570\u91cf\u3002 <code>num_rpc_sent_to_metad</code> Graphd \u670d\u52a1\u53d1\u7ed9 Metad \u670d\u52a1\u7684 RPC \u8bf7\u6c42\u6570\u91cf\u3002 <code>num_rpc_sent_to_storaged_failed</code> Graphd \u670d\u52a1\u53d1\u7ed9 Storaged \u670d\u52a1\u7684 RPC \u8bf7\u6c42\u5931\u8d25\u7684\u6570\u91cf\u3002 <code>num_rpc_sent_to_storaged</code> Graphd \u670d\u52a1\u53d1\u7ed9 Storaged \u670d\u52a1\u7684 RPC \u8bf7\u6c42\u6570\u91cf\u3002 <code>slow_query_latency_us</code> \u6162\u67e5\u8be2\u5ef6\u8fdf\u65f6\u95f4\u3002"},{"location":"6.monitor-and-metrics/2.rocksdb-statistics/","title":"RocksDB \u7edf\u8ba1\u6570\u636e","text":"<p>NebulaGraph \u4f7f\u7528 RocksDB \u4f5c\u4e3a\u5e95\u5c42\u5b58\u50a8\uff0c\u672c\u6587\u4ecb\u7ecd\u5982\u4f55\u6536\u96c6\u548c\u5c55\u793a NebulaGraph \u7684 RocksDB \u7edf\u8ba1\u4fe1\u606f\u3002</p>"},{"location":"6.monitor-and-metrics/2.rocksdb-statistics/#rocksdb_1","title":"\u542f\u7528 RocksDB","text":"<p>RocksDB \u7edf\u8ba1\u529f\u80fd\u9ed8\u8ba4\u5173\u95ed\uff0c\u542f\u52a8 RocksDB \u7edf\u8ba1\u529f\u80fd\uff0c\u4f60\u9700\u8981\uff1a</p> <ol> <li> <p>\u4fee\u6539 <code>nebula-storaged.conf</code> \u6587\u4ef6\u4e2d <code>--enable_rocksdb_statistics</code> \u53c2\u6570\u4e3a <code>true</code>\u3002\u914d\u7f6e\u9ed8\u8ba4\u6587\u4ef6\u76ee\u5f55\u4e3a <code>/use/local/nebula/etc</code>\u3002</p> </li> <li> <p>\u91cd\u542f\u670d\u52a1\u4f7f\u4fee\u6539\u751f\u6548\u3002</p> </li> </ol>"},{"location":"6.monitor-and-metrics/2.rocksdb-statistics/#rocksdb_2","title":"\u83b7\u53d6 RocksDB \u7edf\u8ba1\u4fe1\u606f","text":"<p>\u7528\u6237\u53ef\u4ee5\u4f7f\u7528\u5b58\u50a8\u670d\u52a1\u4e2d\u7684\u5185\u7f6e HTTP \u670d\u52a1\u6765\u83b7\u53d6\u4ee5\u4e0b\u7c7b\u578b\u7684\u7edf\u8ba1\u4fe1\u606f\uff0c\u4e14\u652f\u6301\u8fd4\u56de JSON \u683c\u5f0f\u7684\u7ed3\u679c\uff1a</p> <ul> <li>\u6240\u6709\u7edf\u8ba1\u4fe1\u606f\u3002</li> <li>\u6307\u5b9a\u6761\u76ee\u7684\u4fe1\u606f\u3002</li> </ul>"},{"location":"6.monitor-and-metrics/2.rocksdb-statistics/#_1","title":"\u793a\u4f8b","text":"<p>\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\u83b7\u53d6\u6240\u6709 RocksDB \u7edf\u8ba1\u4fe1\u606f\uff1a <pre><code>curl -L \"http://${storage_ip}:${port}/rocksdb_stats\"\n</code></pre></p> <p>\u4f8b\u5982\uff1a <pre><code>curl -L \"http://172.28.2.1:19779/rocksdb_stats\"\n\nrocksdb.blobdb.blob.file.bytes.read=0\nrocksdb.blobdb.blob.file.bytes.written=0\nrocksdb.blobdb.blob.file.bytes.synced=0\n...\n</code></pre></p> <p>\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\u83b7\u53d6\u90e8\u5206 RocksDB \u7edf\u8ba1\u4fe1\u606f\uff1a <pre><code>curl -L \"http://${storage_ip}:${port}/rocksdb_stats?stats=${stats_name}\"\n</code></pre></p> <p>\u4f8b\u5982\u4f7f\u7528\u4ee5\u4e0b\u8bed\u53e5\u83b7\u53d6 <code>rocksdb.bytes.read</code> \u548c <code>rocksdb.block.cache.add</code>\u7684\u4fe1\u606f\u3002 <pre><code>curl -L \"http://172.28.2.1:19779/rocksdb_stats?stats=rocksdb.bytes.read,rocksdb.block.cache.add\"\n\nrocksdb.block.cache.add=14\nrocksdb.bytes.read=1632\n</code></pre></p> <p>\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\u83b7\u53d6\u90e8\u5206 JSON \u683c\u5f0f\u7684 RocksDB \u7edf\u8ba1\u4fe1\u606f\uff1a <pre><code>curl -L \"http://${storage_ip}:${port}/rocksdb_stats?stats=${stats_name}&amp;format=json\"\n</code></pre></p> <p>\u4f8b\u5982\u4f7f\u7528\u4ee5\u4e0b\u8bed\u53e5\u83b7\u53d6 <code>rocksdb.bytes.read</code> \u548c <code>rocksdb.block.cache.add</code>\u7684\u7edf\u8ba1\u4fe1\u606f\u5e76\u8fd4\u56de JSON \u7684\u683c\u5f0f\u6570\u636e\u3002 <pre><code>curl -L \"http://172.28.2.1:19779/rocksdb_stats?stats=rocksdb.bytes.read,rocksdb.block.cache.add&amp;format=json\"\n\n[\n  {\n    \"rocksdb.block.cache.add\": 1\n  },\n  {\n    \"rocksdb.bytes.read\": 160\n  }\n]\n</code></pre></p>"},{"location":"7.data-security/4.ssl/","title":"SSL \u52a0\u5bc6","text":"<p>NebulaGraph \u652f\u6301\u5728\u5ba2\u6237\u7aef\u3001Graph \u670d\u52a1\u3001Meta \u670d\u52a1\u548c Storage \u670d\u52a1\u4e4b\u95f4\u8fdb\u884c SSL \u52a0\u5bc6\u4f20\u8f93\uff0c\u672c\u6587\u4ecb\u7ecd\u5982\u4f55\u8bbe\u7f6e SSL \u52a0\u5bc6\u3002</p>"},{"location":"7.data-security/4.ssl/#_1","title":"\u6ce8\u610f\u4e8b\u9879","text":"<p>\u5f00\u542f SSL \u52a0\u5bc6\u4f1a\u8f7b\u5fae\u5f71\u54cd\u6027\u80fd\u3002</p>"},{"location":"7.data-security/4.ssl/#_2","title":"\u53c2\u6570\u4ecb\u7ecd","text":"\u53c2\u6570 \u9ed8\u8ba4\u503c \u8bf4\u660e <code>cert_path</code> - PEM \u8bc1\u4e66\u7684\u8def\u5f84\u3002 <code>key_path</code> - \u5bc6\u94a5\u8bc1\u4e66\u7684\u8def\u5f84\u3002 <code>password_path</code> - \u5bc6\u7801\u6587\u4ef6\u8bc1\u4e66\u7684\u8def\u5f84\u3002 <code>ca_path</code> - \u53d7\u4fe1\u4efb CA \u8bc1\u4e66\u6587\u4ef6\u7684\u8def\u5f84\u3002 <code>enable_ssl</code> <code>false</code> \u662f\u5426\u5f00\u542f SSL \u52a0\u5bc6\u3002 <code>enable_graph_ssl</code> <code>false</code> \u662f\u5426\u4ec5\u5728 Graph \u670d\u52a1\u4e0a\u5f00\u542f SSL \u52a0\u5bc6\u3002 <code>enable_meta_ssl</code> <code>false</code> \u662f\u5426\u4ec5\u5728 Meta \u670d\u52a1\u4e0a\u5f00\u542f SSL \u52a0\u5bc6\u3002"},{"location":"7.data-security/4.ssl/#_3","title":"\u8bc1\u4e66\u6a21\u5f0f","text":"<p>\u4e3a\u4e86\u4f7f\u7528 SSL \u52a0\u5bc6\uff0c\u5fc5\u987b\u6709 SSL \u8bc1\u4e66\u3002 NebulaGraph \u652f\u6301\u4e24\u79cd\u8bc1\u4e66\u6a21\u5f0f\uff1a</p> <ul> <li> <p>\u81ea\u7b7e\u540d\u8bc1\u4e66\u6a21\u5f0f</p> <p>\u9700\u8981\u81ea\u884c\u5236\u4f5c\u7b7e\u540d\u8bc1\u4e66\u3002\u9700\u8981\u6839\u636e\u52a0\u5bc6\u7b56\u7565\uff0c\u5728\u5bf9\u5e94\u7684\u914d\u7f6e\u6587\u4ef6\u5185\u8bbe\u7f6e<code>cert_path</code>\u3001<code>key_path</code>\u548c<code>password_path</code>\u3002</p> </li> </ul> <ul> <li> <p>CA \u7b7e\u540d\u8bc1\u4e66\u6a21\u5f0f</p> <p>\u9700\u8981\u5728\u8ba4\u8bc1\u673a\u6784\uff08Certificate Authority\uff09\u7533\u8bf7\u7b7e\u540d\u8bc1\u4e66\u3002\u9700\u8981\u6839\u636e\u52a0\u5bc6\u7b56\u7565\uff0c\u5728\u5bf9\u5e94\u7684\u914d\u7f6e\u6587\u4ef6\u5185\u8bbe\u7f6e<code>cert_path</code>\u3001<code>key_path</code>\u548c<code>ca_path</code>\u3002</p> </li> </ul>"},{"location":"7.data-security/4.ssl/#_4","title":"\u52a0\u5bc6\u7b56\u7565","text":"<p>NebulaGraph \u652f\u6301\u4e09\u79cd\u52a0\u5bc6\u7b56\u7565\u3002</p> <ul> <li> <p>\u5bf9\u5ba2\u6237\u7aef\u3001Graph \u670d\u52a1\u3001Meta \u670d\u52a1\u548c Storage \u670d\u52a1\u4e4b\u95f4\u7684\u4f20\u8f93\u6570\u636e\u52a0\u5bc6\u3002</p> <p>\u9700\u8981\u4fee\u6539<code>nebula-graphd.conf</code>\u3001<code>nebula-metad.conf</code>\u548c<code>nebula-storaged.conf</code>\u914d\u7f6e\u6587\u4ef6\uff0c\u8bbe\u7f6e<code>enable_ssl = true</code>\u3002</p> </li> </ul> <ul> <li> <p>\u5bf9\u5ba2\u6237\u7aef\u548c Graph \u670d\u52a1\u4e4b\u95f4\u7684\u4f20\u8f93\u6570\u636e\u52a0\u5bc6\u3002</p> <p>\u9002\u7528\u4e8e\u96c6\u7fa4\u8bbe\u7f6e\u5728\u540c\u4e00\u4e2a\u673a\u623f\u5185\uff0c\u4ec5\u5bf9\u5916\u5f00\u653e Graph \u670d\u52a1\u7684\u7aef\u53e3\u3002\u56e0\u4e3a\u5176\u4ed6\u670d\u52a1\u53ef\u4ee5\u901a\u8fc7\u5185\u90e8\u7f51\u7edc\u901a\u4fe1\uff0c\u65e0\u9700\u52a0\u5bc6\u3002\u9700\u8981\u4fee\u6539<code>nebula-graphd.conf</code>\u914d\u7f6e\u6587\u4ef6\uff0c\u8bbe\u7f6e<code>enable_graph_ssl = true</code>\u3002</p> </li> </ul> <ul> <li> <p>\u5bf9\u96c6\u7fa4\u4e2d Meta \u670d\u52a1\u76f8\u5173\u7684\u4f20\u8f93\u6570\u636e\u52a0\u5bc6\u3002</p> <p>\u9002\u7528\u4e8e\u5411 meta \u670d\u52a1\u4f20\u8f93\u9700\u4fdd\u5bc6\u7684\u4fe1\u606f\u3002\u9700\u8981\u4fee\u6539<code>nebula-graphd.conf</code>\u3001<code>nebula-metad.conf</code>\u548c<code>nebula-storaged.conf</code>\u914d\u7f6e\u6587\u4ef6\uff0c\u8bbe\u7f6e<code>enable_meta_ssl = true</code>\u3002</p> </li> </ul>"},{"location":"7.data-security/4.ssl/#_5","title":"\u4f7f\u7528\u65b9\u5f0f","text":"<ol> <li> <p>\u786e\u8ba4\u8bc1\u4e66\u6a21\u5f0f\u548c\u52a0\u5bc6\u7b56\u7565\u3002</p> </li> <li> <p>\u5728\u5bf9\u5e94\u7684\u914d\u7f6e\u6587\u4ef6\u5185\u589e\u52a0\u8bc1\u4e66\u914d\u7f6e\u548c\u7b56\u7565\u914d\u7f6e\u3002</p> <p>\u4f8b\u5982\u4f7f\u7528\u81ea\u7b7e\u540d\u8bc1\u4e66\uff0c\u5e76\u5bf9\u5ba2\u6237\u7aef\u3001Graph \u670d\u52a1\u3001Meta \u670d\u52a1\u548c Storage \u670d\u52a1\u4e4b\u95f4\u7684\u6570\u636e\u4f20\u8f93\u8fdb\u884c\u52a0\u5bc6\u3002\u9700\u8981\u5bf9\u4e09\u4e2a\u914d\u7f6e\u6587\u4ef6\u90fd\u8fdb\u884c\u5982\u4e0b\u8bbe\u7f6e\uff1a</p> <pre><code>--cert_path=xxxxxx\n--key_path=xxxxx\n--password_path=xxxxxx\n--enable_ssl=true\n</code></pre> </li> <li> <p>\u5ba2\u6237\u7aef\u8bbe\u7f6e\u5b89\u5168\u5957\u63a5\u5b57\u5e76\u6dfb\u52a0\u53d7\u4fe1\u4efb\u7684 CA\u3002\u793a\u4f8b\u4ee3\u7801\u8bf7\u53c2\u89c1 nebula-test-run.py\u3002</p> </li> </ol>"},{"location":"7.data-security/1.authentication/1.authentication/","title":"\u8eab\u4efd\u9a8c\u8bc1","text":"<p>\u8eab\u4efd\u9a8c\u8bc1\u7528\u4e8e\u5c06\u4f1a\u8bdd\u6620\u5c04\u5230\u7279\u5b9a\u7528\u6237\uff0c\u4ece\u800c\u5b9e\u73b0\u8bbf\u95ee\u63a7\u5236\u3002 </p> <p>\u5f53\u5ba2\u6237\u7aef\u8fde\u63a5\u5230 NebulaGraph \u65f6\uff0cNebulaGraph \u4f1a\u521b\u5efa\u4e00\u4e2a\u4f1a\u8bdd\uff0c\u4f1a\u8bdd\u4e2d\u5b58\u50a8\u8fde\u63a5\u7684\u5404\u79cd\u4fe1\u606f\uff0c\u5982\u679c\u5f00\u542f\u4e86\u8eab\u4efd\u9a8c\u8bc1\uff0c\u5c31\u4f1a\u5c06\u4f1a\u8bdd\u6620\u5c04\u5230\u5bf9\u5e94\u7684\u7528\u6237\u3002</p>"},{"location":"7.data-security/1.authentication/1.authentication/#_2","title":"\u672c\u5730\u8eab\u4efd\u9a8c\u8bc1","text":"<p>\u672c\u5730\u8eab\u4efd\u9a8c\u8bc1\u662f\u6307\u5728\u670d\u52a1\u5668\u672c\u5730\u5b58\u50a8\u7528\u6237\u540d\u3001\u52a0\u5bc6\u5bc6\u7801\uff0c\u5f53\u7528\u6237\u5c1d\u8bd5\u8bbf\u95ee NebulaGraph \u65f6\uff0c\u5c06\u8fdb\u884c\u8eab\u4efd\u9a8c\u8bc1\u3002</p>"},{"location":"7.data-security/1.authentication/1.authentication/#_3","title":"\u542f\u7528\u672c\u5730\u8eab\u4efd\u9a8c\u8bc1","text":"<ol> <li> <p>\u7f16\u8f91\u914d\u7f6e\u6587\u4ef6<code>nebula-graphd.conf</code>\uff08\u9ed8\u8ba4\u76ee\u5f55\u4e3a<code>/usr/local/nebula/etc/</code>\uff09\uff0c\u8bbe\u7f6e\u5982\u4e0b\u53c2\u6570\uff1a</p> <ul> <li> <p><code>--enable_authorize</code>\uff1a\u662f\u5426\u542f\u7528\u8eab\u4efd\u9a8c\u8bc1\uff0c\u53ef\u9009\u503c\uff1a<code>true</code>\u3001<code>false</code>\u3002   </p> <p>Note</p> <ul> <li>\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u8eab\u4efd\u9a8c\u8bc1\u529f\u80fd\u662f\u5173\u95ed\u7684\uff0c\u7528\u6237\u53ef\u4ee5\u4f7f\u7528<code>root</code>\u7528\u6237\u540d\u548c\u4efb\u610f\u5bc6\u7801\u8fde\u63a5\u5230 NebulaGraph \u3002</li> <li>\u5f00\u542f\u8eab\u4efd\u9a8c\u8bc1\u540e\uff0c\u9ed8\u8ba4\u7684 God \u89d2\u8272\u8d26\u53f7\u4e3a<code>root</code>\uff0c\u5bc6\u7801\u4e3a<code>nebula</code>\u3002\u89d2\u8272\u8be6\u60c5\u8bf7\u53c2\u89c1\u5185\u7f6e\u89d2\u8272\u6743\u9650\u3002</li> </ul> </li> </ul> <ul> <li><code>--failed_login_attempts</code>\uff1a\u53ef\u9009\u9879\uff0c\u9700\u8981\u624b\u52a8\u6dfb\u52a0\u8be5\u53c2\u6570\u3002\u5355\u4e2a Graph \u8282\u70b9\u5141\u8bb8\u8fde\u7eed\u8f93\u5165\u9519\u8bef\u5bc6\u7801\u7684\u6b21\u6570\u3002\u8d85\u8fc7\u8be5\u6b21\u6570\u65f6\uff0c\u8d26\u6237\u4f1a\u88ab\u9501\u5b9a\u3002\u5982\u679c\u6709\u591a\u4e2a Graph \u8282\u70b9\uff0c\u5141\u8bb8\u7684\u6b21\u6570\u4e3a<code>\u8282\u70b9\u6570 * \u6b21\u6570</code>\u3002</li> </ul> <ul> <li><code>--password_lock_time_in_secs</code>\uff1a\u53ef\u9009\u9879\uff0c\u9700\u8981\u624b\u52a8\u6dfb\u52a0\u8be5\u53c2\u6570\u3002\u591a\u6b21\u8f93\u5165\u9519\u8bef\u5bc6\u7801\u540e\uff0c\u8d26\u6237\u88ab\u9501\u5b9a\u7684\u65f6\u95f4\u3002\u5355\u4f4d\uff1a\u79d2\u3002</li> </ul> </li> <li> <p>\u91cd\u542f NebulaGraph \u670d\u52a1\u3002</p> </li> </ol>"},{"location":"7.data-security/1.authentication/2.management-user/","title":"\u7528\u6237\u7ba1\u7406","text":"<p>\u7528\u6237\u7ba1\u7406\u662f NebulaGraph \u8bbf\u95ee\u63a7\u5236\u4e2d\u4e0d\u53ef\u6216\u7f3a\u7684\u7ec4\u6210\u90e8\u5206\uff0c\u672c\u6587\u5c06\u4ecb\u7ecd\u7528\u6237\u7ba1\u7406\u7684\u76f8\u5173\u8bed\u6cd5\u3002</p> <p>\u5f00\u542f\u8eab\u4efd\u9a8c\u8bc1\u540e\uff0c\u7528\u6237\u9700\u8981\u4f7f\u7528\u5df2\u521b\u5efa\u7684\u7528\u6237\u624d\u80fd\u8fde\u63a5 NebulaGraph\uff0c\u800c\u4e14\u8fde\u63a5\u540e\u53ef\u4ee5\u8fdb\u884c\u7684\u64cd\u4f5c\u4e5f\u53d6\u51b3\u4e8e\u8be5\u7528\u6237\u62e5\u6709\u7684\u89d2\u8272\u6743\u9650\u3002</p> <p>Note</p> <ul> <li>\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u8eab\u4efd\u9a8c\u8bc1\u529f\u80fd\u662f\u5173\u95ed\u7684\uff0c\u7528\u6237\u53ef\u4ee5\u4f7f\u7528 root \u7528\u6237\u540d\u548c\u4efb\u610f\u5bc6\u7801\u8fde\u63a5\u5230 NebulaGraph \u3002</li> <li>\u4fee\u6539\u6743\u9650\u540e\uff0c\u5bf9\u5e94\u7684\u7528\u6237\u9700\u8981\u91cd\u65b0\u767b\u5f55\u624d\u80fd\u751f\u6548\u3002</li> </ul>"},{"location":"7.data-security/1.authentication/2.management-user/#create_user","title":"\u521b\u5efa\u7528\u6237\uff08<code>CREATE USER</code>\uff09","text":"<p>\u6267\u884c<code>CREATE USER</code>\u8bed\u53e5\u53ef\u4ee5\u521b\u5efa\u65b0\u7684 NebulaGraph \u7528\u6237\u3002\u5f53\u524d\u4ec5 God \u89d2\u8272\u7528\u6237\uff08\u5373<code>root</code>\u7528\u6237\uff09\u80fd\u591f\u6267\u884c<code>CREATE USER</code>\u8bed\u53e5\u3002</p> <ul> <li> <p>\u8bed\u6cd5</p> <pre><code>CREATE USER [IF NOT EXISTS] &lt;user_name&gt; [WITH PASSWORD '&lt;password&gt;'];\n</code></pre> <ul> <li><code>IF NOT EXISTS</code>\uff1a\u68c0\u6d4b\u5f85\u521b\u5efa\u7684\u7528\u6237\u540d\u662f\u5426\u5b58\u5728\uff0c\u53ea\u6709\u4e0d\u5b58\u5728\u65f6\uff0c\u624d\u4f1a\u521b\u5efa\u65b0\u7528\u6237\u3002</li> <li><code>user_name</code>\uff1a\u5f85\u521b\u5efa\u7684\u7528\u6237\u540d\u3002\u957f\u5ea6\u6700\u591a\u4e3a 16 \u4e2a\u5b57\u7b26\u3002</li> <li><code>password</code>\uff1a\u7528\u6237\u540d\u5bf9\u5e94\u7684\u5bc6\u7801\u3002\u9ed8\u8ba4\u5bc6\u7801\u4e3a\u7a7a\u5b57\u7b26\u4e32\uff08<code>''</code>\uff09\u3002\u957f\u5ea6\u6700\u591a\u4e3a 24 \u4e2a\u5b57\u7b26\u3002</li> </ul> </li> </ul> <ul> <li> <p>\u793a\u4f8b</p> <pre><code>nebula&gt; CREATE USER user1 WITH PASSWORD 'nebula';\nnebula&gt; SHOW USERS;\n+---------+\n| Account |\n+---------+\n| \"root\"  |\n| \"user1\" |\n+---------+\n</code></pre> </li> </ul>"},{"location":"7.data-security/1.authentication/2.management-user/#grant_role","title":"\u6388\u6743\u7528\u6237\uff08<code>GRANT ROLE</code>\uff09","text":"<p>\u6267\u884c<code>GRANT ROLE</code>\u8bed\u53e5\u53ef\u4ee5\u5c06\u6307\u5b9a\u56fe\u7a7a\u95f4\u7684\u5185\u7f6e\u89d2\u8272\u6743\u9650\u6388\u4e88\u7528\u6237\u3002\u5f53\u524d\u4ec5 God \u89d2\u8272\u7528\u6237\u548c Admin \u89d2\u8272\u7528\u6237\u80fd\u591f\u6267\u884c<code>GRANT ROLE</code>\u8bed\u53e5\u3002\u89d2\u8272\u6743\u9650\u7684\u8bf4\u660e\uff0c\u8bf7\u53c2\u89c1\u5185\u7f6e\u89d2\u8272\u6743\u9650\u3002</p> <ul> <li> <p>\u8bed\u6cd5</p> <pre><code>GRANT ROLE &lt;role_type&gt; ON &lt;space_name&gt; TO &lt;user_name&gt;;\n</code></pre> </li> </ul> <ul> <li> <p>\u793a\u4f8b</p> <pre><code>nebula&gt; GRANT ROLE USER ON basketballplayer TO user1;\n</code></pre> </li> </ul>"},{"location":"7.data-security/1.authentication/2.management-user/#revoke_role","title":"\u64a4\u9500\u7528\u6237\u6743\u9650\uff08<code>REVOKE ROLE</code>\uff09","text":"<p>\u6267\u884c<code>REVOKE ROLE</code>\u8bed\u53e5\u53ef\u4ee5\u64a4\u9500\u7528\u6237\u7684\u6307\u5b9a\u56fe\u7a7a\u95f4\u7684\u5185\u7f6e\u89d2\u8272\u6743\u9650\u3002\u5f53\u524d\u4ec5 God \u89d2\u8272\u7528\u6237\u548c Admin \u89d2\u8272\u7528\u6237\u80fd\u591f\u6267\u884c<code>REVOKE ROLE</code>\u8bed\u53e5\u3002\u89d2\u8272\u6743\u9650\u7684\u8bf4\u660e\uff0c\u8bf7\u53c2\u89c1\u5185\u7f6e\u89d2\u8272\u6743\u9650\u3002</p> <ul> <li> <p>\u8bed\u6cd5</p> <pre><code>REVOKE ROLE &lt;role_type&gt; ON &lt;space_name&gt; FROM &lt;user_name&gt;;\n</code></pre> </li> </ul> <ul> <li> <p>\u793a\u4f8b</p> <pre><code>nebula&gt; REVOKE ROLE USER ON basketballplayer FROM user1;\n</code></pre> </li> </ul>"},{"location":"7.data-security/1.authentication/2.management-user/#describe_user","title":"\u67e5\u770b\u6307\u5b9a\u7528\u6237\u6743\u9650\uff08<code>DESCRIBE USER</code>\uff09","text":"<p>\u6267\u884c<code>DESCRIBE USER</code>\u8bed\u53e5\u53ef\u4ee5\u67e5\u770b\u6307\u5b9a\u7528\u6237\u7684\u89d2\u8272\u6743\u9650\u4fe1\u606f\u3002</p> <ul> <li> <p>\u8bed\u6cd5</p> <pre><code>DESCRIBE USER &lt;user_name&gt;;\nDESC USER &lt;user_name&gt;;\n</code></pre> </li> </ul> <ul> <li> <p>\u793a\u4f8b</p> <pre><code>nebula&gt; DESCRIBE USER user1;\n+---------+--------------------+\n| role    | space              |\n+---------+--------------------+\n| \"ADMIN\" | \"basketballplayer\" |\n+---------+--------------------+\n</code></pre> </li> </ul>"},{"location":"7.data-security/1.authentication/2.management-user/#show_roles","title":"\u67e5\u770b\u6307\u5b9a\u7a7a\u95f4\u5185\u7528\u6237\u6743\u9650\uff08<code>SHOW ROLES</code>\uff09","text":"<p>\u6267\u884c<code>SHOW ROLES</code>\u8bed\u53e5\u53ef\u4ee5\u67e5\u770b\u6307\u5b9a\u7a7a\u95f4\u5185\u7684\u6240\u6709\u7528\u6237\uff08\u9664<code>root</code>\u4ee5\u5916\uff09\u548c\u5bf9\u5e94\u89d2\u8272\u6743\u9650\u7684\u4fe1\u606f\u3002</p> <ul> <li> <p>\u8bed\u6cd5</p> <pre><code>SHOW ROLES IN &lt;space_name&gt;;\n</code></pre> </li> </ul> <ul> <li> <p>\u793a\u4f8b</p> <pre><code>nebula&gt; SHOW ROLES IN basketballplayer;\n+---------+-----------+\n| Account | Role Type |\n+---------+-----------+\n| \"user1\" | \"ADMIN\"   |\n+---------+-----------+\n</code></pre> </li> </ul>"},{"location":"7.data-security/1.authentication/2.management-user/#change_password","title":"\u4fee\u6539\u7528\u6237\u5bc6\u7801\uff08<code>CHANGE PASSWORD</code>\uff09","text":"<p>\u6267\u884c<code>CHANGE PASSWORD</code>\u8bed\u53e5\u53ef\u4ee5\u4fee\u6539\u7528\u6237\u5bc6\u7801\uff0c\u4fee\u6539\u65f6\u9700\u8981\u63d0\u4f9b\u65e7\u5bc6\u7801\u548c\u65b0\u5bc6\u7801\u3002</p> <ul> <li> <p>\u8bed\u6cd5</p> <pre><code>CHANGE PASSWORD &lt;user_name&gt; FROM '&lt;old_password&gt;' TO '&lt;new_password&gt;';\n</code></pre> </li> </ul> <ul> <li> <p>\u793a\u4f8b</p> <pre><code>nebula&gt; CHANGE PASSWORD user1 FROM 'nebula' TO 'nebula123';\n</code></pre> </li> </ul>"},{"location":"7.data-security/1.authentication/2.management-user/#alter_user","title":"\u4fee\u6539\u7528\u6237\u5bc6\u7801\uff08<code>ALTER USER</code>\uff09","text":"<p>\u6267\u884c<code>ALTER USER</code>\u8bed\u53e5\u53ef\u4ee5\u4fee\u6539\u7528\u6237\u5bc6\u7801\uff0c\u4fee\u6539\u65f6\u4e0d\u9700\u8981\u63d0\u4f9b\u65e7\u5bc6\u7801\u3002\u5f53\u524d\u4ec5 God \u89d2\u8272\u7528\u6237\uff08\u5373<code>root</code>\u7528\u6237\uff09\u80fd\u591f\u6267\u884c<code>ALTER USER</code>\u8bed\u53e5\u3002</p> <ul> <li> <p>\u8bed\u6cd5</p> <pre><code>ALTER USER &lt;user_name&gt; WITH PASSWORD '&lt;password&gt;';\n</code></pre> </li> </ul> <ul> <li> <p>\u793a\u4f8b</p> <pre><code>nebula&gt; ALTER USER user2 WITH PASSWORD 'change_password';\nnebula&gt; SHOW USERS;\n+---------+\n| Account |\n+---------+\n| \"root\"  |\n| \"user1\" |\n| \"user2\" |\n+---------+\n</code></pre> </li> </ul>"},{"location":"7.data-security/1.authentication/2.management-user/#drop_user","title":"\u5220\u9664\u7528\u6237\uff08<code>DROP USER</code>\uff09","text":"<p>\u6267\u884c<code>DROP USER</code>\u8bed\u53e5\u53ef\u4ee5\u5220\u9664\u7528\u6237\u3002\u5f53\u524d\u4ec5 God \u89d2\u8272\u7528\u6237\u80fd\u591f\u6267\u884c<code>DROP USER</code>\u8bed\u53e5\u3002</p> <p>Note</p> <p>\u5220\u9664\u7528\u6237\u4e0d\u4f1a\u81ea\u52a8\u65ad\u5f00\u8be5\u7528\u6237\u5f53\u524d\u4f1a\u8bdd\uff0c\u800c\u4e14\u6743\u9650\u4ecd\u5728\u5f53\u524d\u4f1a\u8bdd\u4e2d\u751f\u6548\u3002</p> <ul> <li> <p>\u8bed\u6cd5</p> <pre><code>DROP USER [IF EXISTS] &lt;user_name&gt;;\n</code></pre> </li> </ul> <ul> <li> <p>\u793a\u4f8b</p> <pre><code>nebula&gt; DROP USER user1;\n</code></pre> </li> </ul>"},{"location":"7.data-security/1.authentication/2.management-user/#show_users","title":"\u67e5\u770b\u7528\u6237\u5217\u8868\uff08<code>SHOW USERS</code>\uff09","text":"<p>\u6267\u884c<code>SHOW USERS</code>\u8bed\u53e5\u53ef\u4ee5\u67e5\u770b\u7528\u6237\u5217\u8868\u3002\u5f53\u524d\u4ec5 God \u89d2\u8272\u7528\u6237\u80fd\u591f\u6267\u884c<code>SHOW USERS</code>\u8bed\u53e5\u3002</p> <ul> <li> <p>\u8bed\u6cd5</p> <pre><code>SHOW USERS;\n</code></pre> </li> </ul> <ul> <li> <p>\u793a\u4f8b</p> <pre><code>nebula&gt; SHOW USERS;\n+---------+-----------------+\n| Account | IP Whitelist    |\n+---------+-----------------+\n| \"root\"  | \"\"              |\n| \"user1\" | \"\"              |\n| \"user2\" | \"192.168.10.10\" |\n+---------+-----------------+\n</code></pre> </li> </ul>"},{"location":"7.data-security/1.authentication/3.role-list/","title":"\u5185\u7f6e\u89d2\u8272\u6743\u9650","text":"<p>\u6240\u8c13\u89d2\u8272\uff0c\u5c31\u662f\u4e00\u7ec4\u76f8\u5173\u6743\u9650\u7684\u96c6\u5408\u3002\u7528\u6237\u53ef\u4ee5\u628a\u89d2\u8272\u5206\u914d\u7ed9\u521b\u5efa\u7684\u7528\u6237\uff0c\u4ece\u800c\u5b9e\u73b0\u8bbf\u95ee\u63a7\u5236\u3002</p>"},{"location":"7.data-security/1.authentication/3.role-list/#_2","title":"\u5185\u7f6e\u89d2\u8272","text":"<p>NebulaGraph \u5185\u7f6e\u4e86\u591a\u79cd\u89d2\u8272\uff0c\u8bf4\u660e\u5982\u4e0b\uff1a</p> <ul> <li> <p>God</p> <ul> <li>\u521d\u59cb\u6700\u9ad8\u6743\u9650\u89d2\u8272\uff0c\u62e5\u6709\u6240\u6709\u64cd\u4f5c\u7684\u6743\u9650\u3002\u7c7b\u4f3c\u4e8e Linux \u4e2d\u7684<code>root</code>\u548c Windows \u4e2d\u7684<code>administrator</code>\u3002</li> </ul> <ul> <li> <p>Meta \u670d\u52a1\u521d\u59cb\u5316\u65f6\uff0c\u4f1a\u81ea\u52a8\u521b\u5efa God \u89d2\u8272\u7528\u6237<code>root</code>\uff0c\u5bc6\u7801\u4e3a<code>nebula</code>\u3002</p> <p>Caution</p> <p>\u8bf7\u53ca\u65f6\u4fee\u6539<code>root</code>\u7528\u6237\u7684\u5bc6\u7801\uff0c\u4fdd\u8bc1\u6570\u636e\u5b89\u5168\u3002</p> </li> </ul> <ul> <li> <p>\u5728<code>nebula-graphd.conf</code>\u6587\u4ef6\u4e2d\uff08\u9ed8\u8ba4\u76ee\u5f55\u4e3a<code>/usr/local/nebula/etc/</code>\uff09\uff0c\u5f53<code>--enable_authorize</code>\u4e3a<code>true</code>\u65f6\uff1a</p> <ul> <li>\u4e00\u4e2a\u96c6\u7fa4\u53ea\u80fd\u6709\u4e00\u4e2a God \u89d2\u8272\u7528\u6237\uff0c\u8be5\u7528\u6237\u53ef\u4ee5\u7ba1\u7406\u96c6\u7fa4\u5185\u6240\u6709\u56fe\u7a7a\u95f4\u3002</li> <li>\u4e0d\u652f\u6301\u624b\u52a8\u6388\u6743 God \u89d2\u8272\uff0c\u53ea\u80fd\u4f7f\u7528\u9ed8\u8ba4 God \u89d2\u8272\u7528\u6237<code>root</code>\u3002</li> </ul> </li> </ul> </li> </ul> <ul> <li> <p>Admin</p> <ul> <li>\u5bf9\u6743\u9650\u5185\u7684\u56fe\u7a7a\u95f4\u62e5\u6709 Schema \u548c data \u7684\u8bfb\u5199\u6743\u9650\u3002</li> </ul> <ul> <li> <p>\u53ef\u4ee5\u5c06\u6743\u9650\u5185\u7684\u56fe\u7a7a\u95f4\u6388\u6743\u7ed9\u5176\u4ed6\u7528\u6237\u3002</p> <p>Caution</p> <p>\u53ea\u80fd\u6388\u6743\u4f4e\u4e8e ADMIN \u7ea7\u522b\u7684\u89d2\u8272\u7ed9\u5176\u4ed6\u7528\u6237\u3002</p> </li> </ul> </li> </ul> <ul> <li> <p>DBA</p> <ul> <li>\u5bf9\u6743\u9650\u5185\u7684\u56fe\u7a7a\u95f4\u62e5\u6709 Schema \u548c data \u7684\u8bfb\u5199\u6743\u9650\u3002</li> </ul> <ul> <li>\u65e0\u6cd5\u5c06\u6743\u9650\u5185\u7684\u56fe\u7a7a\u95f4\u6388\u6743\u7ed9\u5176\u4ed6\u7528\u6237\u3002</li> </ul> </li> </ul> <ul> <li> <p>User</p> <ul> <li>\u5bf9\u6743\u9650\u5185\u7684\u56fe\u7a7a\u95f4\u62e5\u6709 Schema \u7684\u53ea\u8bfb\u6743\u9650\u3002</li> </ul> <ul> <li>\u5bf9\u6743\u9650\u5185\u7684\u56fe\u7a7a\u95f4\u62e5\u6709 data \u7684\u8bfb\u5199\u6743\u9650\u3002</li> </ul> </li> </ul> <ul> <li> <p>Guest</p> <ul> <li>\u5bf9\u6743\u9650\u5185\u7684\u56fe\u7a7a\u95f4\u62e5\u6709 Schema \u548c data \u7684\u53ea\u8bfb\u6743\u9650\u3002</li> </ul> </li> </ul> <p>Note</p> <ul> <li>\u4e0d\u652f\u6301\u81ea\u884c\u521b\u5efa\u89d2\u8272\uff0c\u53ea\u80fd\u4f7f\u7528\u9ed8\u8ba4\u7684\u5185\u7f6e\u89d2\u8272\u3002</li> <li>\u4e00\u4e2a\u7528\u6237\u5728\u4e00\u4e2a\u56fe\u7a7a\u95f4\u5185\u53ea\u80fd\u62e5\u6709\u4e00\u4e2a\u89d2\u8272\u6743\u9650\u3002\u6388\u6743\u7528\u6237\u8bf7\u53c2\u89c1\u7528\u6237\u7ba1\u7406\u3002</li> </ul>"},{"location":"7.data-security/1.authentication/3.role-list/#_3","title":"\u89d2\u8272\u6743\u9650","text":"<p>\u5404\u89d2\u8272\u7684\u6267\u884c\u6743\u9650\u5982\u4e0b\u3002</p> \u6743\u9650 God Admin DBA User Guest \u76f8\u5173\u8bed\u53e5 Read space Y Y Y Y Y <code>USE</code>\u3001<code>DESCRIBE SPACE</code> Read schema Y Y Y Y Y <code>DESCRIBE TAG</code>\u3001<code>DESCRIBE EDGE</code>\u3001<code>DESCRIBE TAG INDEX</code>\u3001<code>DESCRIBE EDGE INDEX</code> Write schema Y Y Y <code>CREATE TAG</code>\u3001<code>ALTER TAG</code>\u3001<code>CREATE EDGE</code>\u3001<code>ALTER EDGE</code>\u3001<code>DROP TAG</code>\u3001<code>DELETE TAG</code>\u3001<code>DROP EDGE</code>\u3001<code>CREATE TAG INDEX</code>\u3001<code>CREATE EDGE INDEX</code>\u3001<code>DROP TAG INDEX</code>\u3001<code>DROP EDGE INDEX</code> Write user Y <code>CREATE USER</code>\u3001<code>DROP USER</code>\u3001<code>ALTER USER</code> Write role Y Y <code>GRANT</code>\u3001<code>REVOKE</code> Read data Y Y Y Y Y <code>GO</code>\u3001<code>SET</code>\u3001<code>PIPE</code>\u3001<code>MATCH</code>\u3001<code>ASSIGNMENT</code>\u3001<code>LOOKUP</code>\u3001<code>YIELD</code>\u3001<code>ORDER BY</code>\u3001<code>FETCH VERTICES</code>\u3001<code>Find</code>\u3001<code>FETCH EDGES</code>\u3001<code>FIND PATH</code>\u3001<code>LIMIT</code>\u3001<code>GROUP BY</code>\u3001<code>RETURN</code> Write data Y Y Y Y <code>INSERT VERTEX</code>\u3001<code>UPDATE VERTEX</code>\u3001<code>INSERT EDGE</code>\u3001<code>UPDATE EDGE</code>\u3001<code>DELETE VERTEX</code>\u3001<code>DELETE EDGES</code>\u3001<code>DELETE TAG</code> Show operations Y Y Y Y Y <code>SHOW</code>\u3001<code>CHANGE PASSWORD</code> Job Y Y Y Y <code>SUBMIT JOB COMPACT</code>\u3001<code>SUBMIT JOB FLUSH</code>\u3001<code>SUBMIT JOB STATS</code>\u3001<code>STOP JOB</code>\u3001<code>RECOVER JOB</code>\u3001<code>BUILD TAG INDEX</code>\u3001<code>BUILD EDGE INDEX</code>\u3001<code>INGEST</code>\u3001<code>DOWNLOAD</code> Write space Y <code>CREATE SPACE</code>\u3001<code>DROP SPACE</code>\u3001<code>CREATE SNAPSHOT</code>\u3001<code>DROP SNAPSHOT</code>\u3001<code>BALANCE</code>\u3001<code>CONFIG</code> <p>Caution</p> <p>Show operations \u4e3a\u7279\u6b8a\u64cd\u4f5c\uff0c\u53ea\u4f1a\u5728\u81ea\u8eab\u6743\u9650\u5185\u6267\u884c\u3002\u4f8b\u5982<code>SHOW SPACES</code>\uff0c\u6bcf\u4e2a\u89d2\u8272\u90fd\u53ef\u4ee5\u6267\u884c\uff0c\u4f46\u662f\u53ea\u4f1a\u8fd4\u56de\u81ea\u8eab\u6743\u9650\u5185\u7684\u56fe\u7a7a\u95f4\u3002 \u53ea\u6709 God \u89d2\u8272\u53ef\u4ee5\u6267\u884c<code>SHOW USERS</code>\u548c<code>SHOW SNAPSHOTS</code>\u8bed\u53e5\u3002</p>"},{"location":"8.service-tuning/2.graph-modeling/","title":"\u56fe\u5efa\u6a21\u8bbe\u8ba1","text":"<p>\u672c\u6587\u4ecb\u7ecd\u5728 NebulaGraph \u9879\u76ee\u4e2d\u6210\u529f\u5e94\u7528\u7684\u4e00\u4e9b\u56fe\u5efa\u6a21\u548c\u7cfb\u7edf\u8bbe\u8ba1\u7684\u901a\u7528\u5efa\u8bae\u3002</p> <p>Note</p> <p>\u672c\u6587\u5efa\u8bae\u662f\u901a\u7528\u7684\uff0c\u5728\u7279\u5b9a\u9886\u57df\u6709\u4f8b\u5916\uff0c\u8bf7\u7ed3\u5408\u5b9e\u9645\u4e1a\u52a1\u60c5\u51b5\u8fdb\u884c\u56fe\u5efa\u6a21\u3002</p>"},{"location":"8.service-tuning/2.graph-modeling/#_2","title":"\u4ee5\u6027\u80fd\u4e3a\u7b2c\u4e00\u76ee\u6807\u8fdb\u884c\u5efa\u6a21","text":"<p>\u76ee\u524d NebulaGraph \u6ca1\u6709\u5b8c\u7f8e\u7684\u5efa\u6a21\u65b9\u6cd5\uff0c\u5982\u4f55\u5efa\u6a21\u53d6\u51b3\u4e8e\u60f3\u4ece\u6570\u636e\u4e2d\u6316\u6398\u7684\u5185\u5bb9\u3002\u5206\u6790\u6570\u636e\u5e76\u6839\u636e\u4e1a\u52a1\u6a21\u578b\u521b\u5efa\u65b9\u4fbf\u76f4\u89c2\u7684\u6570\u636e\u6a21\u578b\uff0c\u6d4b\u8bd5\u6a21\u578b\u5e76\u4f18\u5316\uff0c\u9010\u6e10\u9002\u5e94\u4e1a\u52a1\u3002\u4e3a\u4e86\u66f4\u597d\u7684\u6027\u80fd\uff0c\u7528\u6237\u53ef\u4ee5\u591a\u6b21\u66f4\u6539\u6216\u91cd\u65b0\u8bbe\u8ba1\u6a21\u578b\u3002</p>"},{"location":"8.service-tuning/2.graph-modeling/#_3","title":"\u8bbe\u8ba1\u548c\u8bc4\u4f30\u6700\u91cd\u8981\u7684\u67e5\u8be2\u8bed\u53e5","text":"<p>\u5728\u6d4b\u8bd5\u73af\u8282\u4e2d\uff0c\u901a\u5e38\u4f1a\u9a8c\u8bc1\u5404\u79cd\u5404\u6837\u7684\u67e5\u8be2\u8bed\u53e5\uff0c\u4ee5\u5168\u9762\u8bc4\u4f30\u7cfb\u7edf\u80fd\u529b\u3002\u4f46\u5728\u5927\u591a\u6570\u751f\u4ea7\u573a\u666f\u4e0b\uff0c\u6bcf\u4e2a\u96c6\u7fa4\u88ab\u9891\u7e41\u8c03\u7528\u7684\u67e5\u8be2\u8bed\u53e5\u7684\u7c7b\u578b\u5e76\u4e0d\u4f1a\u592a\u591a\uff1b\u6839\u636e 20-80 \u539f\u5219\uff0c\u9488\u5bf9\u91cd\u8981\u7684\u67e5\u8be2\u8bed\u53e5\u8fdb\u884c\u5efa\u6a21\u4f18\u5316\u3002</p>"},{"location":"8.service-tuning/2.graph-modeling/#_4","title":"\u907f\u514d\u5168\u91cf\u626b\u63cf","text":"<p>\u901a\u8fc7\u5c5e\u6027\u7d22\u5f15\u6216\u8005 VID \u6765\u5148\u5b9a\u4f4d\u5230\u67d0\u4e2a\uff08\u4e9b\uff09\u70b9\u6216\u8005\u8fb9\uff0c\u7136\u540e\u5f00\u59cb\u56fe\u904d\u5386\uff1b\u5bf9\u4e8e\u6709\u4e9b\u67e5\u8be2\uff0c\u5b83\u4eec\u53ea\u7ed9\u5b9a\u4e86\u4e00\u4e2a\u5b50\u56fe\u6216\u8005\u8def\u5f84\u7684\uff08\u6b63\u5219\uff09\u6a21\u5f0f\uff0c\u4f46\u65e0\u6cd5\u901a\u8fc7\u5c5e\u6027\u7d22\u5f15\u6216\u8005 VID \u5b9a\u4f4d\u5230\u904d\u5386\u8d77\u59cb\u7684\u70b9\u8fb9\uff0c\u800c\u671f\u671b\u627e\u5230\u5e93\u4e2d\u5168\u90e8\u6ee1\u8db3\u8be5\u6a21\u5f0f\u7684\u5b50\u56fe\uff0c\u8fd9\u6837\u7684\u67e5\u8be2\u662f\u901a\u8fc7\u5168\u91cf\u626b\u63cf\u5b9e\u73b0\u7684\uff0c\u8fd9\u6837\u7684\u6027\u80fd\u4f1a\u5f88\u5dee\u3002 NebulaGraph \u6ca1\u6709\u5b9e\u73b0\u5bf9\u4e8e\u5b50\u56fe\u6216\u8005\u8def\u5f84\u7684\u56fe\u7ed3\u6784\u7684\u7d22\u5f15\u3002</p>"},{"location":"8.service-tuning/2.graph-modeling/#tag_edge_type","title":"Tag \u4e0e Edge type \u4e4b\u95f4\u6ca1\u6709\u7ed1\u5b9a\u5173\u7cfb","text":"<p>\u4efb\u4f55 Tag \u53ef\u4ee5\u4e0e\u4efb\u4f55 Edge type \u76f8\u5173\u8054\uff0c\u5b8c\u5168\u4ea4\u7531\u5e94\u7528\u7a0b\u5e8f\u63a7\u5236\u3002\u4e0d\u9700\u8981\u5728 NebulaGraph \u4e2d\u9884\u5148\u5b9a\u4e49\uff0c\u4e5f\u6ca1\u6709\u547d\u4ee4\u83b7\u53d6\u54ea\u4e9b Tag \u4e0e\u54ea\u4e9b Edge type \u76f8\u5173\u8054\u3002</p>"},{"location":"8.service-tuning/2.graph-modeling/#tagedge_type","title":"Tag/Edge type \u9884\u5148\u5b9a\u4e49\u4e86\u4e00\u7ec4\u5c5e\u6027","text":"<p>\u5efa\u7acb Tag\uff08\u6216\u8005 Edge type\uff09\u65f6\uff0c\u9700\u8981\u6307\u5b9a\u5bf9\u5e94\u7684\u5c5e\u6027\u3002\u901a\u5e38\u79f0\u4e3a Schema\u3002</p>"},{"location":"8.service-tuning/2.graph-modeling/#_5","title":"\u533a\u5206\u201c\u7ecf\u5e38\u6539\u53d8\u7684\u90e8\u5206\u201d\u548c\u201c\u4e0d\u7ecf\u5e38\u6539\u53d8\u7684\u90e8\u5206\u201d","text":"<p>\u6539\u53d8\u6307\u7684\u662f\u4e1a\u52a1\u6a21\u578b\u548c\u6570\u636e\u6a21\u578b\u4e0a\u7684\u6539\u53d8\uff08\u5143\u4fe1\u606f\uff09\uff0c\u4e0d\u662f\u6570\u636e\u81ea\u8eab\u7684\u6539\u53d8\u3002</p> <p>\u4e00\u4e9b\u56fe\u6570\u636e\u5e93\u4ea7\u54c1\u662f schema-free \u7684\u8bbe\u8ba1\uff0c\u6240\u4ee5\u5728\u6570\u636e\u6a21\u578b\u4e0a\uff0c\u4e0d\u8bba\u662f\u56fe\u62d3\u6251\u7ed3\u6784\u8fd8\u662f\u5c5e\u6027\uff0c\u90fd\u53ef\u4ee5\u975e\u5e38\u81ea\u7531\u3002\u5c5e\u6027\u53ef\u4ee5\u5efa\u6a21\u8f6c\u53d8\u4e3a\u56fe\u62d3\u6251\uff0c\u53cd\u4e4b\u4ea6\u7136\u3002\u8fd9\u7c7b\u7cfb\u7edf\u901a\u5e38\u5bf9\u4e8e\u56fe\u62d3\u6251\u7684\u8bbf\u95ee\u6709\u7279\u522b\u7684\u4f18\u5316\u3002</p> <p>\u800c NebulaGraph master \u662f\u5f3a Schema \u7684\uff08\u884c\u5b58\u578b\uff09\u7cfb\u7edf\uff0c\u8fd9\u610f\u5473\u7740\u4e1a\u52a1\u6570\u636e\u6a21\u578b\u4e2d\u7684\u90e8\u5206\u662f\u201c\u4e0d\u5e94\u8be5\u7ecf\u5e38\u6539\u53d8\u7684\u201d\uff0c\u4f8b\u5982\u5c5e\u6027 Schema \u5e94\u8be5\u907f\u514d\u6539\u53d8\u3002\u7c7b\u4f3c\u4e8e MySQL \u4e2d ALTER TABLE \u662f\u5e94\u8be5\u5c3d\u91cf\u907f\u514d\u7684\u64cd\u4f5c\u3002</p> <p>\u800c\u70b9\u53ca\u90bb\u8fb9\u53ef\u4ee5\u975e\u5e38\u4f4e\u6210\u672c\u7684\u589e\u5220\uff0c\u56e0\u6b64\u53ef\u4ee5\u5c06\u4e1a\u52a1\u6a21\u578b\u4e2d\u201c\u7ecf\u5e38\u6539\u53d8\u7684\u90e8\u5206\u201d\u5efa\u6a21\u6210\u70b9\u6216\u8fb9\uff08\u5173\u7cfb\uff09\uff0c\u800c\u4e0d\u662f\u5c5e\u6027 Schema\u3002</p> <p>\u4f8b\u5982\uff0c\u5728\u4e00\u4e2a\u4e1a\u52a1\u6a21\u578b\u4e2d\uff0c\u4eba\u7684\u5c5e\u6027\u662f\u76f8\u5bf9\u56fa\u5b9a\u7684\uff0c\u4f8b\u5982\u201c\u5e74\u9f84\u201d\uff0c\u201c\u6027\u522b\u201d\uff0c\u201c\u59d3\u540d\u201d\u3002\u800c\u201c\u901a\u4fe1\u597d\u53cb\u201d\uff0c\u201c\u51fa\u5165\u573a\u6240\u201d\uff0c\u201c\u4ea4\u6613\u8d26\u53f7\u201d\uff0c\u201c\u767b\u5f55\u8bbe\u5907\u201d\u7b49\u662f\u76f8\u5bf9\u5bb9\u6613\u6539\u53d8\u7684\u3002\u524d\u8005\u9002\u5408\u5efa\u6a21\u4e3a\u5c5e\u6027\uff0c\u540e\u8005\u9002\u5408\u5efa\u6a21\u4e3a\u70b9\u6216\u8fb9\u3002</p>"},{"location":"8.service-tuning/2.graph-modeling/#_6","title":"\u81ea\u73af","text":"<p>NebulaGraph \u662f\u5f3a Schema \u7c7b\u578b\u7cfb\u7edf\uff0c\u4f7f\u7528<code>ALTER TAG</code>\u7684\u5f00\u9500\u5f88\u5927\uff0c\u800c\u4e14\u4e5f\u4e0d\u652f\u6301List\u7c7b\u578b\u5c5e\u6027\uff0c\u5f53\u7528\u6237\u9700\u8981\u4e3a\u70b9\u6dfb\u52a0\u4e00\u4e9b\u4e34\u65f6\u5c5e\u6027\u6216\u8005List\u7c7b\u578b\u7684\u5c5e\u6027\u65f6\uff0c\u53ef\u4ee5\u5148\u521b\u5efa\u5305\u542b\u6240\u9700\u5c5e\u6027\u7684\u8fb9\u7c7b\u578b\uff0c\u7136\u540e\u4e3a\u70b9\u63d2\u5165\u4e00\u6761\u6216\u591a\u6761\u6307\u5411\u81ea\u8eab\u7684\u8fb9\u3002\u67e5\u8be2\u65f6\u53ea\u9700\u8981\u67e5\u8be2\u6307\u5411\u81ea\u5df1\u7684\u8fb9\u5c5e\u6027\u3002\u5982\u4e0b\u56fe\u6240\u793a\u3002</p> <p></p> <p>\u793a\u4f8b\uff1a</p> <p>\u5982\u679c\u8981\u68c0\u7d22\u70b9\u7684\u4e34\u65f6\u5c5e\u6027\uff0c\u8bf7\u4ece\u81ea\u73af\u8fb9\u4e2d\u83b7\u53d6\u3002\u4f8b\u5982\uff1a</p> <pre><code>//\u521b\u5efa\u8fb9\u7c7b\u578b\u5e76\u63d2\u5165\u81ea\u73af\u5c5e\u6027\u3002\nnebula&gt; CREATE EDGE IF NOT EXISTS temp(tmp int);\nnebula&gt; INSERT EDGE temp(tmp) VALUES \"player100\"-&gt;\"player100\"@1:(1);\nnebula&gt; INSERT EDGE temp(tmp) VALUES \"player100\"-&gt;\"player100\"@2:(2);\nnebula&gt; INSERT EDGE temp(tmp) VALUES \"player100\"-&gt;\"player100\"@3:(3);\n\n//\u63d2\u5165\u6570\u636e\u540e\uff0c\u53ef\u4ee5\u901a\u8fc7\u67e5\u8be2\u8bed\u53e5\u67e5\u8be2\uff0c\u4f8b\u5982\uff1a\nnebula&gt; GO FROM \"player100\" OVER temp YIELD properties(edge).tmp;\n+----------------------+\n| properties(EDGE).tmp |\n+----------------------+\n| 1                    |\n| 2                    |\n| 3                    |\n+----------------------+\n\n//\u5982\u679c\u9700\u8981\u8fd4\u56de\u7ed3\u679c\u4e3aList\uff0c\u53ef\u4ee5\u901a\u8fc7\u51fd\u6570\u5b9e\u73b0\uff0c\u4f8b\u5982\uff1a\nnebula&gt; MATCH (v1:player)-[e:temp]-&gt;() return collect(e.tmp);\n+----------------+\n| collect(e.tmp) |\n+----------------+\n| [1, 2, 3]      |\n+----------------+\n</code></pre> <p>\u5bf9\u4e8e\u81ea\u73af\u7684\u64cd\u4f5c\u6ca1\u6709\u5c01\u88c5\u4efb\u4f55\u7684\u8bed\u6cd5\u7cd6\uff0c\u64cd\u4f5c\u65b9\u5f0f\u4e0e\u666e\u901a\u7684\u8fb9\u65e0\u5f02\u3002</p> <ul> <li>NebulaGraph \u81ea\u73af\u5c0f\u79d1\u666e\uff082 \u5206 54 \u79d2\uff09</li> </ul>"},{"location":"8.service-tuning/2.graph-modeling/#_7","title":"\u60ac\u6302\u8fb9","text":"<p>\u60ac\u6302\u8fb9 (Dangling edge) \u662f\u6307\u4e00\u6761\u8d77\u70b9\u6216\u8005\u7ec8\u70b9\u4e0d\u5b58\u5728\u4e8e\u6570\u636e\u5e93\u4e2d\u7684\u8fb9\u3002</p> <p>\u5728 NebulaGraph master\u4e2d\uff0c\u6709\u4e24\u79cd\u60c5\u51b5\u53ef\u80fd\u4f1a\u51fa\u73b0\u60ac\u6302\u8fb9\u3002</p> <p>\u7b2c\u4e00\u79cd\u60c5\u51b5\uff1a\u5728\u8d77\u70b9\u548c\u7ec8\u70b9\u63d2\u5165\u4e4b\u524d\uff0c\u7528 INSERT EDGE \u8bed\u53e5\u63d2\u5165\u4e00\u6761\u8fb9\u3002</p> <p>\u7b2c\u4e8c\u79cd\u60c5\u51b5\uff1a\u4f7f\u7528 DELETE VERTEX \u8bed\u53e5\u5220\u9664\u70b9\u7684\u65f6\u5019\uff0c\u6ca1\u6709\u4f7f\u7528<code>WITH EDGE</code>\u9009\u9879\u3002\u6b64\u65f6\u7cfb\u7edf\u9ed8\u8ba4\u4e0d\u5220\u9664\u8be5\u70b9\u5173\u8054\u7684\u51fa\u8fb9\u548c\u5165\u8fb9\uff0c\u8fd9\u4e9b\u8fb9\u5c06\u53d8\u6210\u60ac\u6302\u8fb9\u3002</p> <p>NebulaGraph master \u7684\u6570\u636e\u6a21\u578b\u4e2d\uff0c\u7531\u4e8e\u8bbe\u8ba1\u5141\u8bb8\u56fe\u4e2d\u5b58\u5728\u201c\u60ac\u6302\u8fb9\u201d\uff1b\u6ca1\u6709 openCypher \u4e2d\u7684 MERGE \u8bed\u53e5\u3002\u5bf9\u4e8e\u60ac\u6302\u8fb9\u7684\u4fdd\u8bc1\u5b8c\u5168\u4f9d\u8d56\u5e94\u7528\u5c42\u9762\u3002\u7528\u6237\u53ef\u4ee5\u4f7f\u7528 GO \u548c LOOKUP \u8bed\u53e5\u67e5\u8be2\u5230\u60ac\u6302\u8fb9\uff0c\u4f46\u65e0\u6cd5\u4f7f\u7528 MATCH \u8bed\u53e5\u67e5\u8be2\u5230\u60ac\u6302\u8fb9\u3002</p> <p>\u793a\u4f8b\uff1a <pre><code>// \u63d2\u5165\u8d77\u70b9\u4e3a\u201c11\u201d\uff0c\u7ec8\u70b9\u4e3a\u201c13\u201d\u5e76\u4e14\u90fd\u4e0d\u5b58\u5728\u4e8e\u6570\u636e\u5e93\u4e2d\u7684\u60ac\u6302\u8fb9\nnebula&gt; CREATE EDGE IF NOT EXISTS e1 (name string, age int);\nnebula&gt; INSERT EDGE e1 (name, age) VALUES \"11\"-&gt;\"13\":(\"n1\", 1);\n\n// \u4f7f\u7528 GO \u8bed\u53e5\u67e5\u8be2\nnebula&gt; GO FROM \"11\" over e1 YIELD properties(edge);\n+----------------------+\n| properties(EDGE)     |\n+----------------------+\n| {age: 1, name: \"n1\"} |\n+----------------------+\n\n// \u4f7f\u7528 LOOKUP \u8bed\u53e5\u67e5\u8be2\nnebula&gt; LOOKUP ON e1 YIELD EDGE AS r;\n+-------------------------------------------------------+\n| r                                                     |\n+-------------------------------------------------------+\n| [:e2 \"11\"-&gt;\"13\" @0 {age: 1, name: \"n1\"}]              |\n+-------------------------------------------------------+\n\n// \u4f7f\u7528 MATCH \u67e5\u8be2\uff0c\u4e0d\u80fd\u67e5\u8be2\u5230\u60ac\u6302\u8fb9\nnebula&gt; MATCH ()-[e:e1]-&gt;() RETURN e;\n+---+\n| e |\n+---+\n+---+\nEmpty set (time spent 3153/3573 us)\n</code></pre></p> <ul> <li>NebulaGraph \u7684\u60ac\u6302\u8fb9\u5c0f\u79d1\u666e\uff082 \u5206 28 \u79d2\uff09</li> </ul>"},{"location":"8.service-tuning/2.graph-modeling/#_8","title":"\u5e7f\u5ea6\u4f18\u5148\u5927\u4e8e\u6df1\u5ea6\u4f18\u5148","text":"<ul> <li>NebulaGraph \u57fa\u4e8e\u56fe\u62d3\u6251\u7ed3\u6784\u8fdb\u884c\u6df1\u5ea6\u56fe\u904d\u5386\u7684\u6027\u80fd\u8f83\u4f4e\uff0c\u5e7f\u5ea6\u4f18\u5148\u904d\u5386\u4ee5\u53ca\u83b7\u53d6\u5c5e\u6027\u7684\u6027\u80fd\u8f83\u597d\u3002\u4f8b\u5982\uff0c\u6a21\u578b a \u5305\u62ec\u59d3\u540d\u3001\u5e74\u9f84\u3001\u773c\u775b\u989c\u8272\u4e09\u79cd\u5c5e\u6027\uff0c\u5efa\u8bae\u521b\u5efa\u4e00\u4e2a Tag<code>person</code>\uff0c\u7136\u540e\u4e3a\u5b83\u6dfb\u52a0\u59d3\u540d\u3001\u5e74\u9f84\u3001\u773c\u775b\u989c\u8272\u7684\u5c5e\u6027\u3002\u5982\u679c\u521b\u5efa\u4e00\u4e2a\u5305\u542b\u773c\u775b\u989c\u8272\u7684 Tag \u548c\u4e00\u4e2a Edge type<code>has</code>\uff0c\u7136\u540e\u521b\u5efa\u4e00\u4e2a\u8fb9\u7528\u6765\u8868\u793a\u4eba\u62e5\u6709\u7684\u773c\u775b\u989c\u8272\uff0c\u8fd9\u79cd\u5efa\u6a21\u65b9\u6cd5\u4f1a\u964d\u4f4e\u904d\u5386\u6027\u80fd\u3002</li> </ul> <ul> <li>\u201c\u901a\u8fc7\u8fb9\u5c5e\u6027\u83b7\u53d6\u8fb9\u201d\u7684\u6027\u80fd\u4e0e\u201c\u901a\u8fc7\u70b9\u5c5e\u6027\u83b7\u53d6\u70b9\u201d\u7684\u6027\u80fd\u662f\u63a5\u8fd1\u7684\u3002\u5728\u4e00\u4e9b\u6570\u636e\u5e93\u4e2d\uff0c\u4f1a\u5efa\u8bae\u5c06\u8fb9\u4e0a\u7684\u5c5e\u6027\u91cd\u65b0\u5efa\u6a21\u4e3a\u4e2d\u95f4\u8282\u70b9\u7684\u5c5e\u6027\uff1a\u4f8b\u5982 <code>(src)-[edge {P1, P2}]-&gt;(dst)</code>\uff0c<code>edge</code> \u4e0a\u6709\u5c5e\u6027 <code>P1, P2</code>\uff0c\u4f1a\u5efa\u8bae\u5efa\u6a21\u4e3a <code>(src)-[edge1]-&gt;(i_node {P1, P2})-[edge2]-&gt;(dst)</code>\u3002\u5728 NebulaGraph master \u4e2d\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528 <code>(src)-[edge {P1, P2}]-&gt;(dst)</code>\uff0c\u51cf\u5c11\u904d\u5386\u6df1\u5ea6\u6709\u52a9\u4e8e\u6027\u80fd\u3002</li> </ul>"},{"location":"8.service-tuning/2.graph-modeling/#_9","title":"\u8fb9\u7684\u65b9\u5411","text":"<p>\u67e5\u8be2\u65f6\uff0c\u5982\u679c\u9700\u8981\u4f7f\u7528\u8fb9\u7684\u9006\u5411\u67e5\u8be2\uff0c\u53ef\u4ee5\u7528\u5982\u4e0b\u8bed\u6cd5\uff1a</p> <p><code>(dst)&lt;-[edge]-(src)</code> \u6216\u8005 <code>GO FROM dst REVERSELY</code>;</p> <p>\u5982\u679c\u4e0d\u5173\u5fc3\u8fb9\u7684\u65b9\u5411\uff0c\u53ef\u4ee5\u4f7f\u7528\u5982\u4e0b\u8bed\u6cd5\uff1a</p> <p><code>(src)-[edge]-(dst)</code> \u6216\u8005 <code>GO FROM src BIDIRECT</code>;</p> <p>\u56e0\u6b64\uff0c\u901a\u5e38\u540c\u4e00\u6761\u8fb9\u6ca1\u6709\u5fc5\u8981\u53cd\u5411\u518d\u5197\u4f59\u63d2\u5165\u4e00\u6b21\u3002</p>"},{"location":"8.service-tuning/2.graph-modeling/#tag","title":"\u5408\u7406\u8bbe\u7f6e Tag \u5c5e\u6027","text":"<p>\u5728\u56fe\u5efa\u6a21\u4e2d\uff0c\u8bf7\u5c06\u4e00\u7ec4\u7c7b\u4f3c\u7684\u5e73\u7ea7\u5c5e\u6027\u653e\u5165\u540c\u4e00\u4e2a Tag\uff0c\u5373\u6309\u4e0d\u540c\u6982\u5ff5\u8fdb\u884c\u5206\u7ec4\u3002</p>"},{"location":"8.service-tuning/2.graph-modeling/#_10","title":"\u6b63\u786e\u4f7f\u7528\u7d22\u5f15","text":"<p>\u4f7f\u7528\u5c5e\u6027\u7d22\u5f15\u53ef\u4ee5\u901a\u8fc7\u5c5e\u6027\u67e5\u627e\u5230 VID\u3002\u4f46\u662f\u7d22\u5f15\u4f1a\u5bfc\u81f4\u5199\u6027\u80fd\u5927\u5e45\u4e0b\u964d\uff0c\u53ea\u6709\u5728\u6839\u636e\u70b9\u6216\u8fb9\u7684\u5c5e\u6027\u5b9a\u4f4d\u70b9\u6216\u8fb9\u65f6\u624d\u4f7f\u7528\u7d22\u5f15\u3002</p>"},{"location":"8.service-tuning/2.graph-modeling/#vid","title":"\u5408\u7406\u8bbe\u8ba1 VID","text":"<p>\u53c2\u8003\u70b9 VID \u4e00\u8282\u3002</p>"},{"location":"8.service-tuning/2.graph-modeling/#_11","title":"\u957f\u6587\u672c","text":"<p>\u4e3a\u8fb9\u521b\u5efa\u5c5e\u6027\u65f6\u8bf7\u52ff\u4f7f\u7528\u957f\u6587\u672c\uff1a\u8fd9\u4e9b\u5c5e\u6027\u4f1a\u88ab\u5b58\u50a8 2 \u4efd\uff0c\u5bfc\u81f4\u5199\u5165\u653e\u5927\u95ee\u9898\uff08write amplification\uff09\u3002\u6b64\u65f6\u5efa\u8bae\u5c06\u957f\u6587\u672c\u653e\u5728 HBase/ES \u4e2d\uff0c\u5c06\u5176\u5730\u5740\u5b58\u653e\u5728 NebulaGraph \u4e2d\u3002</p>"},{"location":"8.service-tuning/2.graph-modeling/#_12","title":"\u5173\u4e8e\u652f\u6301\u52a8\u6001\u56fe\uff08\u65f6\u5e8f\u56fe\uff09","text":"<p>\u5728\u67d0\u4e9b\u573a\u666f\u4e0b\uff0c\u56fe\u9700\u8981\u540c\u65f6\u5e26\u6709\u65f6\u5e8f\u4fe1\u606f\uff0c\u4ee5\u63cf\u8ff0\u6574\u4e2a\u56fe\u7684\u7ed3\u6784\u968f\u7740\u65f6\u95f4\u53d8\u5316\u7684\u60c5\u51b5 <sup>1</sup>\u3002</p> <p>NebulaGraph master \u7684\u8fb9\u53ef\u4ee5\u4f7f\u7528 Rank \u5b57\u6bb5\u5b58\u653e\u65f6\u95f4\u4fe1\u606f (int64)\uff0c\u4f46\u662f\u70b9\u4e0a\u6ca1\u6709\u5b57\u6bb5\u53ef\u4ee5\u5b58\u653e\u65f6\u95f4\u4fe1\u606f\uff08\u5b58\u653e\u5728\u5c5e\u6027\u4f1a\u88ab\u65b0\u5199\u5165\u8986\u76d6\uff09\u3002\u4e00\u4e2a\u6298\u4e2d\u7684\u529e\u6cd5\u662f\u5728\u70b9\u4e0a\u8bbe\u8ba1\u81ea\u5df1\u6307\u5411\u81ea\u5df1\u7684\u81ea\u73af\uff0c\u5e76\u5c06\u65f6\u95f4\u4fe1\u606f\u653e\u7f6e\u5728\u81ea\u73af\u7684 Rank \u4e0a\u3002</p> <p></p>"},{"location":"8.service-tuning/2.graph-modeling/#_13","title":"\u4e00\u4e9b\u514d\u8d39\u7684\u5efa\u6a21\u5de5\u5177","text":"<p>arrows.app</p> <ol> <li> <p>https://blog.twitter.com/engineering/en_us/topics/insights/2021/temporal-graph-networks\u00a0\u21a9</p> </li> </ol>"},{"location":"8.service-tuning/3.system-design/","title":"\u7cfb\u7edf\u8bbe\u8ba1\u5efa\u8bae","text":""},{"location":"8.service-tuning/3.system-design/#qps","title":"\u9009\u62e9 QPS \u4f18\u5148\u6216\u65f6\u5ef6\u4f18\u5148","text":"<ul> <li>NebulaGraph master \u66f4\u64c5\u957f\u5904\u7406\uff08\u4e92\u8054\u7f51\u5f0f\u7684\uff09\u6709\u5927\u91cf\u5e76\u53d1\u7684\u5c0f\u8bf7\u6c42\u3002\u4e5f\u5373\uff1a\u867d\u7136\u5168\u56fe\u5f88\u5927\uff08\u4e07\u4ebf\u70b9\u8fb9\uff09\uff0c\u4f46\u662f\u6bcf\u4e2a\u8bf7\u6c42\u8981\u8bbf\u95ee\u5230\u7684\u5b50\u56fe\u672c\u8eab\u5e76\u4e0d\u5927\uff08\u51e0\u767e\u4e07\u4e2a\u70b9\u8fb9\uff09\u2014\u2014\u5355\u4e2a\u8bf7\u6c42\u65f6\u5ef6\u4e0d\u5927\uff1b\u4f46\u8fd9\u7c7b\u8bf7\u6c42\u7684\u5e76\u53d1\u6570\u91cf\u7279\u522b\u591a\u2014\u2014QPS \u5927\u3002</li> </ul> <ul> <li>\u4f46\u5bf9\u4e8e\u4e00\u4e9b\u4ea4\u4e92\u5206\u6790\u578b\u7684\u573a\u666f\uff0c\u5e76\u53d1\u8bf7\u6c42\u7684\u6570\u91cf\u4e0d\u591a\uff0c\u800c\u6bcf\u4e2a\u8bf7\u6c42\u8981\u8bbf\u95ee\u7684\u5b50\u56fe\u672c\u8eab\u7279\u522b\u5927\uff08\u4ebf\u4ee5\u4e0a\uff09\u3002\u4e3a\u964d\u4f4e\u65f6\u5ef6\uff0c\u53ef\u4ee5\u5728\u5e94\u7528\u7a0b\u5e8f\u4e2d\u5c06\u4e00\u4e2a\u5927\u7684\u8bf7\u6c42\uff0c\u62c6\u5206\u4e3a\u591a\u4e2a\u5c0f\u8bf7\u6c42\uff0c\u5e76\u53d1\u53d1\u9001\u7ed9\u591a\u4e2a graphd\u3002\u8fd9\u6837\u53ef\u4ee5\u964d\u4f4e\u5355\u4e2a\u5927\u8bf7\u6c42\u7684\u65f6\u5ef6\uff0c\u964d\u4f4e\u5355\u4e2a graphd \u7684\u5185\u5b58\u5360\u7528\u3002\u53e6\u5916\uff0c\u4e5f\u53ef\u4ee5\u4f7f\u7528\u56fe\u8ba1\u7b97\u529f\u80fd NebulaGraph Algorithm\u3002</li> </ul>"},{"location":"8.service-tuning/3.system-design/#_2","title":"\u6570\u636e\u4f20\u8f93\u4e0e\u4f18\u5316","text":"<ul> <li>\u8bfb\u5199\u5e73\u8861\u3002 NebulaGraph \u9002\u5408\u8bfb\u5199\u5e73\u8861\u6027\u7684\u5728\u7ebf\u573a\u666f\uff0c\u4e5f\u5373 OLTP \u578b\u7684\u7684\u201c\u5e76\u53d1\u7684\u53d1\u751f\u5199\u5165\u4e0e\u8bfb\u53d6\u201d\uff1b\u800c\u975e\u6570\u4ed3 OLAP \u578b\u7684\u201c\u4e00\u6b21\u5199\u5165\u591a\u6b21\u8bfb\u53d6\u201d\u3002</li> <li>\u9009\u62e9\u4e0d\u540c\u7684\u5199\u5165\u65b9\u5f0f\u3002\u5927\u6279\u91cf\u7684\u6570\u636e\u5199\u5165\u53ef\u4ee5\u4f7f\u7528 sst \u52a0\u8f7d\u7684\u65b9\u5f0f\uff1b\u5c0f\u6279\u91cf\u7684\u5199\u5165\u4f7f\u7528<code>INSERT</code>\u8bed\u53e5\u3002</li> <li>\u9009\u62e9\u5408\u9002\u7684\u65f6\u95f4\u8fd0\u884c COMPACTION \u548c BALANCE\uff0c\u6765\u5206\u522b\u4f18\u5316\u6570\u636e\u683c\u5f0f\u548c\u5b58\u50a8\u5206\u5e03\u3002</li> <li>NebulaGraph master \u4e0d\u652f\u6301\u5173\u7cfb\u578b\u6570\u636e\u5e93\u610f\u4e49\u4e0a\u7684\u4e8b\u52a1\u548c\u9694\u79bb\u6027\uff0c\u66f4\u63a5\u8fd1 NoSQL\u3002</li> </ul>"},{"location":"8.service-tuning/3.system-design/#_3","title":"\u67e5\u8be2\u9884\u70ed\u4e0e\u6570\u636e\u9884\u70ed","text":"<p>\u5e94\u7528\u7aef\u8fdb\u884c\u9884\u70ed\uff1a</p> <ul> <li>Graphd \u4e0d\u652f\u6301\u9884\u7f16\u8bd1\u67e5\u8be2\u53ca\u76f8\u5e94\u751f\u6210\u67e5\u8be2\u8ba1\u5212\uff0c\u4e5f\u4e0d\u652f\u6301\u7f13\u5b58\u4e4b\u524d\u7684\u67e5\u8be2\u7ed3\u679c\uff1b</li> <li>Storaged \u4e0d\u652f\u6301\u9884\u70ed\u6570\u636e\uff0c\u53ea\u6709 RocksDB \u81ea\u8eab\u7684 LSM-tree \u548c BloomFilter \u4f1a\u542f\u52a8\u65f6\u52a0\u8f7d\u5230\u5185\u5b58\u4e2d\u3002</li> <li>\u70b9\u548c\u8fb9\u88ab\u8bbf\u95ee\u8fc7\u540e\uff0c\u4f1a\u5404\u81ea\u7f13\u5b58\u5728 Storaged \u7684\u4e24\u79cd (LRU) Cache \u4e2d\u3002</li> </ul>"},{"location":"8.service-tuning/4.plan/","title":"\u6267\u884c\u8ba1\u5212","text":"<p>NebulaGraph master \u5b9e\u73b0\u4e86\u57fa\u4e8e\u89c4\u5219\u7684\u6267\u884c\u8ba1\u5212\u3002\u7528\u6237\u65e0\u6cd5\u6539\u53d8\u6267\u884c\u8ba1\u5212\uff0c\u65e0\u6cd5\u8fdb\u884c\u67e5\u8be2\u7684\u9884\u7f16\u8bd1\uff08\u53ca\u76f8\u5e94\u7684\u8ba1\u5212\u7f13\u5b58\uff09\uff0c\u65e0\u6cd5\u901a\u8fc7\u6307\u5b9a\u7d22\u5f15\u6765\u52a0\u901f\u67e5\u8be2\u3002</p> <p>\u8981\u67e5\u770b\u6267\u884c\u8ba1\u5212\u53ca\u6267\u884c\u6982\u8981\uff0c\u8bf7\u53c2\u8003 EXPLAIN \u548c PROFILE\u3002</p>"},{"location":"8.service-tuning/compaction/","title":"Compaction","text":"<p>\u672c\u6587\u4ecb\u7ecd Compaction \u7684\u76f8\u5173\u4fe1\u606f\u3002</p> <p>NebulaGraph \u4e2d\uff0c<code>Compaction</code>\u662f\u6700\u91cd\u8981\u7684\u540e\u53f0\u64cd\u4f5c\uff0c\u5bf9\u6027\u80fd\u6709\u6781\u5176\u91cd\u8981\u7684\u5f71\u54cd\u3002</p> <p><code>Compaction</code>\u64cd\u4f5c\u4f1a\u8bfb\u53d6\u786c\u76d8\u4e0a\u7684\u6570\u636e\uff0c\u7136\u540e\u91cd\u7ec4\u6570\u636e\u7ed3\u6784\u548c\u7d22\u5f15\uff0c\u7136\u540e\u518d\u5199\u56de\u786c\u76d8\uff0c\u53ef\u4ee5\u6210\u500d\u63d0\u5347\u8bfb\u53d6\u6027\u80fd\u3002\u5c06\u5927\u91cf\u6570\u636e\u5199\u5165 NebulaGraph \u540e\uff0c\u4e3a\u4e86\u63d0\u9ad8\u8bfb\u53d6\u6027\u80fd\uff0c\u9700\u8981\u624b\u52a8\u89e6\u53d1<code>Compaction</code>\u64cd\u4f5c\uff08\u5168\u91cf<code>Compaction</code>\uff09\u3002</p> <p>Note</p> <p><code>Compaction</code>\u64cd\u4f5c\u4f1a\u957f\u65f6\u95f4\u5360\u7528\u786c\u76d8\u7684 IO\uff0c\u5efa\u8bae\u5728\u4e1a\u52a1\u4f4e\u5cf0\u671f\uff08\u4f8b\u5982\u51cc\u6668\uff09\u6267\u884c\u8be5\u64cd\u4f5c\u3002</p> <p>NebulaGraph \u6709\u4e24\u79cd\u7c7b\u578b\u7684<code>Compaction</code>\u64cd\u4f5c\uff1a\u81ea\u52a8<code>Compaction</code>\u548c\u5168\u91cf<code>Compaction</code>\u3002</p>"},{"location":"8.service-tuning/compaction/#compaction_1","title":"\u81ea\u52a8<code>Compaction</code>","text":"<p>\u81ea\u52a8<code>Compaction</code>\u662f\u5728\u7cfb\u7edf\u8bfb\u53d6\u6570\u636e\u3001\u5199\u5165\u6570\u636e\u6216\u7cfb\u7edf\u91cd\u542f\u65f6\u81ea\u52a8\u89e6\u53d1<code>Compaction</code>\u64cd\u4f5c\uff0c\u63d0\u5347\u77ed\u65f6\u95f4\u5185\u7684\u8bfb\u53d6\u6027\u80fd\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u81ea\u52a8<code>Compaction</code>\u662f\u5f00\u542f\u72b6\u6001\uff0c\u53ef\u80fd\u5728\u4e1a\u52a1\u9ad8\u5cf0\u671f\u89e6\u53d1\uff0c\u5bfc\u81f4\u610f\u5916\u62a2\u5360 IO \u5f71\u54cd\u4e1a\u52a1\u3002</p>"},{"location":"8.service-tuning/compaction/#compaction_2","title":"\u5168\u91cf<code>Compaction</code>","text":"<p>\u5168\u91cf<code>Compaction</code>\u53ef\u4ee5\u5bf9\u56fe\u7a7a\u95f4\u8fdb\u884c\u5927\u89c4\u6a21\u540e\u53f0\u64cd\u4f5c\uff0c\u4f8b\u5982\u5408\u5e76\u6587\u4ef6\u3001\u5220\u9664 TTL \u8fc7\u671f\u6570\u636e\u7b49\uff0c\u8be5\u64cd\u4f5c\u9700\u8981\u624b\u52a8\u53d1\u8d77\u3002\u4f7f\u7528\u5982\u4e0b\u8bed\u53e5\u6267\u884c\u5168\u91cf<code>Compaction</code>\u64cd\u4f5c\uff1a</p> <p>Note</p> <p>\u5efa\u8bae\u5728\u4e1a\u52a1\u4f4e\u5cf0\u671f\uff08\u4f8b\u5982\u51cc\u6668\uff09\u6267\u884c\u8be5\u64cd\u4f5c\uff0c\u907f\u514d\u5927\u91cf\u5360\u7528\u786c\u76d8 IO \u5f71\u54cd\u4e1a\u52a1\u3002</p> <pre><code>nebula&gt; USE &lt;your_graph_space&gt;;\nnebula&gt; SUBMIT JOB COMPACT;\n</code></pre> <p>\u4e0a\u8ff0\u547d\u4ee4\u4f1a\u8fd4\u56de\u4f5c\u4e1a\u7684 ID\uff0c\u7528\u6237\u53ef\u4ee5\u4f7f\u7528\u5982\u4e0b\u547d\u4ee4\u67e5\u770b<code>Compaction</code>\u72b6\u6001\uff1a</p> <pre><code>nebula&gt; SHOW JOB &lt;job_id&gt;;\n</code></pre>"},{"location":"8.service-tuning/compaction/#_1","title":"\u64cd\u4f5c\u5efa\u8bae","text":"<p>\u4e3a\u4fdd\u8bc1 NebulaGraph \u7684\u6027\u80fd\uff0c\u8bf7\u53c2\u8003\u5982\u4e0b\u64cd\u4f5c\u5efa\u8bae\uff1a</p> <ul> <li>\u6570\u636e\u5bfc\u5165\u5b8c\u6210\u540e\uff0c\u8bf7\u6267\u884c<code>SUBMIT JOB COMPACT</code>\u3002</li> </ul> <ul> <li>\u4e1a\u52a1\u4f4e\u5cf0\u671f\uff08\u4f8b\u5982\u51cc\u6668\uff09\u6267\u884c<code>SUBMIT JOB COMPACT</code>\u3002</li> </ul> <ul> <li>\u4e3a\u63a7\u5236<code>Compaction</code>\u7684\u5199\u5165\u901f\u7387\uff0c\u8bf7\u5728\u914d\u7f6e\u6587\u4ef6<code>nebula-storaged.conf</code>\u4e2d\u8bbe\u7f6e\u5982\u4e0b\u53c2\u6570\uff08\u6ce8\uff1a\u6b64\u53c2\u6570\u9650\u5236\u5168\u90e8\u5199\u5165\uff0c\u5305\u62ec\u6b63\u5e38\u5199\u5165\u548c Compaction\uff09\uff1a<pre><code># \u5199\u5165\u901f\u5ea6\u9650\u5236\u4e3a 20MB/S\u3002\n--rocksdb_rate_limit=20 (in MB/s)\n</code></pre> </li> </ul>"},{"location":"8.service-tuning/compaction/#faq","title":"FAQ","text":""},{"location":"8.service-tuning/compaction/#compaction_3","title":"Compaction \u76f8\u5173\u7684\u65e5\u5fd7\u5728\u54ea\uff1f","text":"<p>\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c<code>/usr/local/nebula/data/storage/nebula/{1}/data/</code> \u76ee\u5f55\u4e0b\u7684\u6587\u4ef6\u540d\u4e3a <code>LOG</code> \u6587\u4ef6\uff0c\u6216\u8005\u7c7b\u4f3c <code>LOG.old.1625797988509303</code>\uff0c\u627e\u5230\u5982\u4e0b\u7684\u90e8\u5206\u3002</p> <pre><code>** Compaction Stats [default] **\nLevel    Files   Size     Score Read(GB)  Rn(GB) Rnp1(GB) Write(GB) Wnew(GB) Moved(GB) W-Amp Rd(MB/s) Wr(MB/s) Comp(sec) CompMergeCPU(sec) Comp(cnt) Avg(sec) KeyIn KeyDrop\n----------------------------------------------------------------------------------------------------------------------------------------------------------------------------\n  L0      2/0    2.46 KB   0.5      0.0     0.0      0.0       0.0      0.0       0.0   1.0      0.0      0.0      0.53              0.51         2    0.264       0      0\n Sum      2/0    2.46 KB   0.0      0.0     0.0      0.0       0.0      0.0       0.0   1.0      0.0      0.0      0.53              0.51         2    0.264       0      0\n Int      0/0    0.00 KB   0.0      0.0     0.0      0.0       0.0      0.0       0.0   0.0      0.0      0.0      0.00              0.00         0    0.000       0      0\n</code></pre> <p>\u5982\u679c\u5f53\u524d\u7684 <code>L0</code> \u6587\u4ef6\u6570\u91cf\u8f83\u591a\uff0c\u5bf9\u8bfb\u6027\u80fd\u5f71\u54cd\u8f83\u5927\uff0c\u53ef\u4ee5\u89e6\u53d1 compaction\u3002</p>"},{"location":"8.service-tuning/compaction/#compaction_4","title":"\u53ef\u4ee5\u540c\u65f6\u5728\u591a\u4e2a\u56fe\u7a7a\u95f4\u6267\u884c\u5168\u91cf<code>Compaction</code>\u64cd\u4f5c\u5417\uff1f","text":"<p>\u53ef\u4ee5\uff0c\u4f46\u662f\u6b64\u65f6\u7684\u786c\u76d8 IO \u4f1a\u5f88\u9ad8\uff0c\u53ef\u80fd\u4f1a\u5f71\u54cd\u6548\u7387\u3002</p>"},{"location":"8.service-tuning/compaction/#compaction_5","title":"\u5168\u91cf<code>Compaction</code>\u64cd\u4f5c\u4f1a\u8017\u8d39\u591a\u957f\u65f6\u95f4\uff1f","text":"<p>\u5982\u679c\u5df2\u7ecf\u8bbe\u7f6e\u8bfb\u5199\u901f\u7387\u9650\u5236\uff0c\u4f8b\u5982<code>rocksdb_rate_limit</code>\u9650\u5236\u4e3a 20MB/S \u65f6\uff0c\u7528\u6237\u53ef\u4ee5\u901a\u8fc7 <code>\u786c\u76d8\u4f7f\u7528\u91cf/rocksdb_rate_limit</code> \u9884\u4f30\u9700\u8981\u8017\u8d39\u7684\u65f6\u95f4\u3002 \u5982\u679c\u6ca1\u6709\u8bbe\u7f6e\u8bfb\u5199\u901f\u7387\u9650\u5236\uff0c\u6839\u636e\u7ecf\u9a8c\uff0c\u901f\u7387\u5927\u7ea6\u4e3a 50MB/S\u3002</p>"},{"location":"8.service-tuning/compaction/#rocksdb_rate_limit","title":"\u53ef\u4ee5\u52a8\u6001\u8c03\u6574<code>rocksdb_rate_limit</code>\u5417\uff1f","text":"<p>\u4e0d\u53ef\u4ee5\u3002</p>"},{"location":"8.service-tuning/compaction/#compaction_6","title":"\u5168\u91cf<code>Compaction</code>\u64cd\u4f5c\u5f00\u59cb\u540e\u53ef\u4ee5\u505c\u6b62\u5417\uff1f","text":"<p>\u4e0d\u53ef\u4ee5\u505c\u6b62\uff0c\u5fc5\u987b\u7b49\u5f85\u64cd\u4f5c\u5b8c\u6210\u3002\u8fd9\u662f RocksDB \u7684\u9650\u5236\u3002</p>"},{"location":"8.service-tuning/enable_autofdo_for_nebulagraph/","title":"\u542f\u7528 AutoFDO","text":"<p>AutoFDO \u53ef\u4ee5\u5bf9\u4f18\u5316\u8fc7\u7684\u7a0b\u5e8f\u8fdb\u884c\u6027\u80fd\u5206\u6790\uff0c\u5e76\u4f7f\u7528\u6027\u80fd\u4fe1\u606f\u6765\u6307\u5bfc\u7f16\u8bd1\u5668\u518d\u6b21\u4f18\u5316\u7a0b\u5e8f\u3002\u672c\u6587\u5c06\u5e2e\u52a9\u60a8\u4e3a NebulaGraph \u542f\u7528AutoFDO\u3002</p> <p>\u5173\u4e8e AutoFDO \u7684\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u89c1 AutoFDO Wiki\u3002</p>"},{"location":"8.service-tuning/enable_autofdo_for_nebulagraph/#_1","title":"\u51c6\u5907\u8d44\u6e90","text":""},{"location":"8.service-tuning/enable_autofdo_for_nebulagraph/#_2","title":"\u5b89\u88c5\u4f9d\u8d56","text":"<ul> <li> <p>\u5b89\u88c5 perf</p> <pre><code>sudo apt-get update\nsudo apt-get install -y linux-tools-common \\\nlinux-tools-generic \\\nlinux-tools-`uname -r`\n</code></pre> </li> </ul> <ul> <li> <p>\u5b89\u88c5 autofdo tool</p> <pre><code>sudo apt-get update\nsudo apt-get install -y autofdo\n</code></pre> <p>\u6216\u8005\u4f60\u53ef\u4ee5\u4ece\u6e90\u4ee3\u7801\u7f16\u8bd1 autofdo tool\u3002</p> </li> </ul>"},{"location":"8.service-tuning/enable_autofdo_for_nebulagraph/#nebulagraph","title":"\u7f16\u8bd1 NebulaGraph \u4e8c\u8fdb\u5236\u6587\u4ef6","text":"<p>\u5173\u4e8e\u5982\u4f55\u4ece\u6e90\u7801\u7f16\u8bd1 NebulaGraph\uff0c\u8bf7\u53c2\u8003\u4f7f\u7528\u6e90\u7801\u5b89\u88c5 NebulaGraph \u3002</p> <p>\u5728\u914d\u7f6e\u6b65\u9aa4\u4e2d\uff0c\u5c06<code>CMAKE_BUILD_TYPE=Release</code>\u66ff\u6362\u4e3a<code>CMAKE_BUILD_TYPE=RelWithDebInfo</code>\uff1a</p> <pre><code>$ cmake -DCMAKE_INSTALL_PREFIX=/usr/local/nebula -DENABLE_TESTING=OFF -DCMAKE_BUILD_TYPE=RelWithDebInfo ..\n</code></pre>"},{"location":"8.service-tuning/enable_autofdo_for_nebulagraph/#_3","title":"\u51c6\u5907\u6d4b\u8bd5\u6570\u636e","text":"<p>\u5728\u6d4b\u8bd5\u73af\u5883\u4e2d\uff0c\u6211\u4eec\u4f7f\u7528 NebulaGraph Bench \u6765\u51c6\u5907\u6d4b\u8bd5\u6570\u636e\uff0c\u5e76\u901a\u8fc7\u8fd0\u884c FindShortestPath\u3001Go1Step\u3001Go2Step\u3001Go3Step\u3001InsertPersonScenario \u8fd95\u4e2a\u573a\u666f\u811a\u672c\u6765\u6536\u96c6\u6027\u80fd\u6570\u636e\u3002</p> <p>Note</p> <p>\u53ef\u4ee5\u5728\u751f\u4ea7\u73af\u5883\u4e2d\u4f7f\u7528 TopN \u67e5\u8be2\u6765\u6536\u96c6\u6027\u80fd\u6570\u636e\uff0c\u5728\u4f60\u7684\u73af\u5883\u4e2d\u53ef\u4ee5\u63d0\u9ad8\u66f4\u591a\u6027\u80fd\u3002</p>"},{"location":"8.service-tuning/enable_autofdo_for_nebulagraph/#_4","title":"\u51c6\u5907\u6027\u80fd\u6570\u636e","text":""},{"location":"8.service-tuning/enable_autofdo_for_nebulagraph/#autofdo_1","title":"\u6536\u96c6 AutoFDO \u5de5\u5177\u7684\u6027\u80fd\u6570\u636e","text":"<ol> <li> <p>\u6d4b\u8bd5\u6570\u636e\u51c6\u5907\u5b8c\u6210\u540e\uff0c\u6536\u96c6\u4e0d\u540c\u573a\u666f\u7684\u6027\u80fd\u6570\u636e\u3002\u9996\u5148\u83b7\u53d6 <code>storaged</code>\u3001<code>graphd</code>\u3001<code>metad</code>\u7684<code>pid</code>\u3002</p> <pre><code>$ nebula.service status all\n[INFO] nebula-metad: Running as 305422, Listening on 9559\n[INFO] nebula-graphd: Running as 305516, Listening on 9669\n[INFO] nebula-storaged: Running as 305707, Listening on 9779\n</code></pre> </li> <li> <p>\u4e3a<code>nebula-graphd</code>\u548c<code>nebula-storaged</code>\u542f\u52a8<code>perf record</code>\u3002</p> <pre><code>perf record -p 305516,305707 -b -e br_inst_retired.near_taken:pp -o ~/FindShortestPath.data\n</code></pre> <p>Note</p> <p>\u56e0\u4e3a\u4e0e<code>nebula-graphd</code>\u548c<code>nebula-storaged</code>\u76f8\u6bd4\uff0c<code>nebula-metad</code>\u7684\u8d21\u732e\u7387\u5f88\u5c0f\u3002\u4e3a\u4e86\u51cf\u5c11\u5de5\u4f5c\u91cf\uff0c\u6211\u4eec\u6ca1\u6709\u6536\u96c6 <code>nebula-metad</code> \u7684\u6027\u80fd\u6570\u636e\u3002</p> </li> <li> <p>\u542f\u52a8 FindShortestPath \u573a\u666f\u7684\u57fa\u51c6\u6d4b\u8bd5\u3002</p> <pre><code>cd NebulaGraph-Bench \npython3 run.py stress run -s benchmark -scenario find_path.FindShortestPath -a localhost:9669 --args='-u 100 -i 100000'\n</code></pre> </li> <li> <p>\u6d4b\u8bd5\u5b8c\u6210\u540e\uff0c\u6309 Ctrl + C \u7ed3\u675f<code>perf record</code>\u3002</p> </li> <li> <p>\u91cd\u590d\u4e0a\u8ff0\u6b65\u9aa4\u4e3a Go1Step\u3001Go2Step\u3001Go3Step\u3001InsertPersonScenario \u8fd94\u4e2a\u573a\u666f\u6536\u96c6\u6027\u80fd\u6570\u636e\u3002</p> </li> </ol>"},{"location":"8.service-tuning/enable_autofdo_for_nebulagraph/#gcov","title":"\u521b\u5efa Gcov \u6587\u4ef6","text":"<pre><code>create_gcov --binary=$NEBULA_HOME/bin/nebula-storaged \\\n--profile=~/FindShortestPath.data \\\n--gcov=~/FindShortestPath-storaged.gcov \\\n-gcov_version=1\n\ncreate_gcov --binary=$NEBULA_HOME/bin/nebula-graphd \\\n--profile=~/FindShortestPath.data \\\n--gcov=~/FindShortestPath-graphd.gcov \\\n-gcov_version=1\n</code></pre> <p>\u6309\u7167\u4e0a\u9762 FindShortestPath \u7684\u4f8b\u5b50\uff0c\u4e3a Go1Step\u3001Go2Step\u3001Go3Step\u3001InsertPersonScenario \u8fd94\u4e2a\u573a\u666f\u4e5f\u521b\u5efa Gcov \u6587\u4ef6\u3002</p>"},{"location":"8.service-tuning/enable_autofdo_for_nebulagraph/#_5","title":"\u5408\u5e76\u6027\u80fd\u6570\u636e","text":"<pre><code>profile_merger ~/FindShortestPath-graphd.gcov \\\n~/FindShortestPath-storaged.gcov \\\n~/go1step-storaged.gcov \\\n~/go1step-graphd.gcov \\\n~/go2step-storaged.gcov \\\n~/go2step-graphd.gcov \\\n~/go3step-storaged.gcov \\\n~/go3step-master-graphd.gcov \\\n~/InsertPersonScenario-storaged.gcov \\\n~/InsertPersonScenario-graphd.gcov\n</code></pre> <p>\u5408\u5e76\u540e\u7684\u914d\u7f6e\u6587\u4ef6\u540d\u79f0\u4e3a<code>fbdata.afdo</code>\u3002</p>"},{"location":"8.service-tuning/enable_autofdo_for_nebulagraph/#nebulagraph_1","title":"\u4f7f\u7528\u5408\u5e76\u7684\u6027\u80fd\u6570\u636e\u6587\u4ef6\u91cd\u65b0\u7f16\u8bd1 NebulaGraph \u4e8c\u8fdb\u5236\u6587\u4ef6","text":"<p>\u4f7f\u7528\u7f16\u8bd1\u9009\u9879<code>-fauto-profile</code>\u91cd\u65b0\u7f16\u8bd1 NebulaGraph \u4e8c\u8fdb\u5236\u6587\u4ef6\u3002</p> <pre><code>diff --git a/cmake/nebula/GeneralCompilerConfig.cmake b/cmake/nebula/GeneralCompilerConfig.cmake\n@@ -20,6 +20,8 @@ add_compile_options(-Wshadow)\n add_compile_options(-Wnon-virtual-dtor)\n add_compile_options(-Woverloaded-virtual)\n add_compile_options(-Wignored-qualifiers)\n+add_compile_options(-fauto-profile=~/fbdata.afdo)\n</code></pre> <p>Note</p> <p>\u5f53\u4f60\u4f7f\u7528\u591a\u4e2a<code>fbdata.afdo</code>\u591a\u6b21\u7f16\u8bd1\u65f6\uff0c\u8bf7\u5728\u91cd\u65b0\u7f16\u8bd1\u4e4b\u524d\u6267\u884c<code>make clean</code>\u64cd\u4f5c\uff0c\u56e0\u4e3a\u53ea\u662f\u4fee\u6539<code>fbdata.afdo</code>\u4e0d\u4f1a\u89e6\u53d1\u91cd\u65b0\u7f16\u8bd1\u3002</p>"},{"location":"8.service-tuning/enable_autofdo_for_nebulagraph/#_6","title":"\u6027\u80fd\u6d4b\u8bd5\u7ed3\u679c","text":""},{"location":"8.service-tuning/enable_autofdo_for_nebulagraph/#_7","title":"\u8f6f\u786c\u4ef6\u73af\u5883","text":"\u7c7b\u578b \u73af\u5883 CPU Processor# 2 Sockets 2 NUMA 2 CPU Type Intel(R) Xeon(R) Platinum 8380 CPU @ 2.30GHz Cores per Processor 40C80T Cache L1 data: 48KB L1 i: 32KB  L2: 1.25MB per physical core  L3: shared 60MB per processor Memory Micron DDR4 3200MT/s 16GB16Micron DDR4 3200MT/s 16GB16 SSD Disk INTEL SSDPE2KE016T8 SSD R/W Sequential 3200 MB/s (read) / 2100 MB/s(write) Nebula Version master with commit id 51d84a4ed7d2a032a337e3b996c927e3bc5d1415 Kernel 4.18.0-408.el8.x86_64"},{"location":"8.service-tuning/enable_autofdo_for_nebulagraph/#_8","title":"\u6d4b\u8bd5\u7ed3\u679c","text":"\u573a\u666f Average Latency(LiB) Default Binary Optimized Binary with AutoFDO P95 Latency (LiB) Default Binary Optimized Binary with AutoFDO FindShortestPath 1 8072.52 7260.10 1 22102.00 19108.00 2 8034.32 7218.59 2 22060.85 19006.00 3 8079.27 7257.24 3 22147.00 19053.00 4 8087.66 7221.39 4 22143.00 19050.00 5 8044.77 7239.85 5 22181.00 19055.00 STDDEVP 20.57 17.34 STDDEVP 41.41 32.36 Mean 8063.71 7239.43 Mean 22126.77 19054.40 STDDEVP/Mean 0.26% 0.24% STDDEVP/Mean 0.19% 0.17% Opt/Default 100.00% 10.22% Opt/Default 100.00% 13.89% Go1Step 1 422.53 418.37 1 838.00 850.00 2 432.37 402.44 2 866.00 815.00 3 437.45 407.98 3 874.00 836.00 4 429.16 408.38 4 858.00 838.00 5 446.38 411.32 5 901.00 837.00 STDDEVP 8.02 5.20 STDDEVP 20.63 11.30 Mean 433.58 409.70 Mean 867.40 835.20 STDDEVP/Mean 1.85% 1.27% STDDEVP/Mean 2.38% 1.35% Opt/Default 100.00% 5.51% Opt/Default 100.00% 3.71% Go2Step 1 2989.93 2824.29 1 10202.00 9656.95 2 2957.22 2834.55 2 10129.00 9632.40 3 2962.74 2818.62 3 10168.40 9624.70 4 2992.39 2817.27 4 10285.10 9647.50 5 2934.85 2834.91 5 10025.00 9699.65 STDDEVP 21.53 7.57 STDDEVP 85.62 26.25 Mean 2967.43 2825.93 Mean 10161.90 9652.24 STDDEVP/Mean 0.73% 0.27% STDDEVP/Mean 0.84% 0.27% Opt/Default 100.00% 4.77% Opt/Default 100.00% 5.02% Go3Step 1 93551.97 89406.96 1 371359.55 345433.50 2 92418.43 89977.25 2 368868.00 352375.20 3 92587.67 90339.25 3 365390.15 356198.55 4 93371.64 92458.95 4 373578.15 365177.75 5 94046.05 89943.44 5 373392.25 352576.00 STDDEVP 609.07 1059.54 STDDEVP 3077.38 6437.52 Mean 93195.15 90425.17 Mean 370517.62 354352.20 STDDEVP/Mean 0.65% 1.17% STDDEVP/Mean 0.83% 1.82% Opt/Default 100.00% 2.97% Opt/Default 100.00% 4.36% InsertPerson 1 2022.86 1937.36 1 2689.00 2633.45 2 1966.05 1935.41 2 2620.45 2555.00 3 1985.25 1953.58 3 2546.00 2593.00 4 2026.73 1887.28 4 2564.00 2394.00 5 2007.55 1964.41 5 2676.00 2581.00 STDDEVP 23.02 26.42 STDDEVP 57.45 82.62 Mean 2001.69 1935.61 Mean 2619.09 2551.29 STDDEVP/Mean 1.15% 1.37% STDDEVP/Mean 2.19% 3.24% Opt/Default 100.00% 3.30% Opt/Default 100.00% 2.59%"},{"location":"8.service-tuning/load-balance/","title":"Storage \u8d1f\u8f7d\u5747\u8861","text":"<p>\u7528\u6237\u53ef\u4ee5\u4f7f\u7528<code>SUBMIT JOB BALANCE</code>\u8bed\u53e5\u5e73\u8861 Raft leader \u7684\u5206\u5e03\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1 SUBMIT JOB BALANCE\u3002</p> <p>Danger</p> <p><code>SUBMIT JOB BALANCE</code>\u547d\u4ee4\u901a\u8fc7\u521b\u5efa\u548c\u6267\u884c\u4e00\u7ec4\u5b50\u4efb\u52a1\u6765\u8fc1\u79fb\u6570\u636e\u548c\u5747\u8861\u5206\u7247\u5206\u5e03\uff0c\u7981\u6b62\u505c\u6b62\u96c6\u7fa4\u4e2d\u7684\u4efb\u4f55\u673a\u5668\u6216\u6539\u53d8\u673a\u5668\u7684 IP \u5730\u5740\uff0c\u76f4\u5230\u6240\u6709\u5b50\u4efb\u52a1\u5b8c\u6210\uff0c\u5426\u5219\u540e\u7eed\u5b50\u4efb\u52a1\u4f1a\u5931\u8d25\u3002</p>"},{"location":"8.service-tuning/load-balance/#leader","title":"\u5747\u8861 leader \u5206\u5e03","text":"<p>\u7528\u6237\u53ef\u4ee5\u4f7f\u7528\u547d\u4ee4<code>SUBMIT JOB BALANCE LEADER</code>\u5747\u8861\u5206\u5e03\u6240\u6709\u56fe\u7a7a\u95f4\u4e2d\u7684 Leader \u5206\u7247\u526f\u672c\u3002</p>"},{"location":"8.service-tuning/load-balance/#_1","title":"\u793a\u4f8b","text":"<pre><code>nebula&gt; SUBMIT JOB BALANCE LEADER;\n</code></pre> <p>\u7528\u6237\u53ef\u4ee5\u6267\u884c<code>SHOW HOSTS</code>\u68c0\u67e5\u7ed3\u679c\u3002</p> <pre><code>nebula&gt; SHOW HOSTS;\n+------------------+------+----------+--------------+-----------------------------------+------------------------+---------+\n| Host             | Port | Status   | Leader count | Leader distribution               | Partition distribution | Version |\n+------------------+------+----------+--------------+-----------------------------------+------------------------+---------+\n| \"192.168.10.100\" | 9779 | \"ONLINE\" | 4            | \"basketballplayer:3\"              | \"basketballplayer:8\"   | \"master\" |\n| \"192.168.10.101\" | 9779 | \"ONLINE\" | 8            | \"basketballplayer:3\"              | \"basketballplayer:8\"   | \"master\" |\n| \"192.168.10.102\" | 9779 | \"ONLINE\" | 3            | \"basketballplayer:3\"              | \"basketballplayer:8\"   | \"master\" |\n| \"192.168.10.103\" | 9779 | \"ONLINE\" | 0            | \"basketballplayer:2\"              | \"basketballplayer:7\"   | \"master\" |\n| \"192.168.10.104\" | 9779 | \"ONLINE\" | 0            | \"basketballplayer:2\"              | \"basketballplayer:7\"   | \"master\" |\n| \"192.168.10.105\" | 9779 | \"ONLINE\" | 0            | \"basketballplayer:2\"              | \"basketballplayer:7\"   | \"master\" |\n+------------------+------+-----------+----------+--------------+-----------------------------------+------------------------+---------+\n</code></pre> <p>Caution</p> <p>\u5728 NebulaGraph master \u4e2d\uff0cLeader \u5206\u7247\u526f\u672c\u5207\u6362\u671f\u95f4\uff0cLeader \u5206\u7247\u526f\u672c\u4f1a\u88ab\u6682\u65f6\u7981\u6b62\u5199\u5165\u76f4\u5230\u5207\u6362\u5b8c\u6210\u3002\u5982\u679c\u5728 Leader \u5206\u7247\u526f\u672c\u5207\u6362\u671f\u95f4\uff0c\u6709\u5927\u91cf\u7684\u5199\u5165\u8bf7\u6c42\uff0c\u5c06\u4f1a\u5bfc\u81f4\u8bf7\u6c42\u9519\u8bef\uff08Storage Error <code>E_RPC_FAILURE</code>\uff09\uff0c\u9519\u8bef\u5904\u7406\u65b9\u6cd5\u89c1 FAQ\u3002</p> <p>\u7528\u6237\u53ef\u4ee5\u5728 Storage \u914d\u7f6e\u6587\u4ef6\u4e2d\u8bbe\u7f6e<code>raft_heartbeat_interval_secs</code>\u7684\u503c\u6765\u63a7\u5236 Leader \u526f\u672c\u5207\u6362\u7684\u8d85\u65f6\u65f6\u95f4\u3002\u6709\u5173\u914d\u7f6e\u6587\u4ef6\u7684\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u89c1 Storage \u914d\u7f6e\u6587\u4ef6\u3002</p>"},{"location":"8.service-tuning/practice/","title":"\u5b9e\u8df5\u6848\u4f8b","text":"<p>NebulaGraph \u5728\u5404\u884c\u5404\u4e1a\u90fd\u6709\u5e94\u7528\uff0c\u672c\u6587\u4ecb\u7ecd\u90e8\u5206\u5b9e\u8df5\u6848\u4f8b\u3002\u66f4\u591a\u5b9e\u8df5\u5206\u4eab\u5185\u5bb9\u8bf7\u53c2\u89c1\u535a\u5ba2\u3002</p>"},{"location":"8.service-tuning/practice/#_2","title":"\u4e1a\u52a1\u573a\u666f","text":"<ul> <li>\u6848\u4f8b</li> </ul> <ul> <li>\u7ecf\u9a8c</li> </ul> <ul> <li>\u4e09\u65b9\u8bc4\u6d4b</li> </ul>"},{"location":"8.service-tuning/practice/#_3","title":"\u5185\u6838","text":"<ul> <li>MATCH \u4e2d\u53d8\u957f Pattern \u7684\u5b9e\u73b0</li> </ul> <ul> <li>\u5982\u4f55\u5411 NebulaGraph \u589e\u52a0\u4e00\u4e2a\u6d4b\u8bd5\u7528\u4f8b</li> </ul> <ul> <li>\u57fa\u4e8e BDD \u7406\u8bba\u7684 NebulaGraph \u96c6\u6210\u6d4b\u8bd5\u6846\u67b6\u91cd\u6784\uff08\u4e0a\uff09</li> </ul> <ul> <li>\u57fa\u4e8e BDD \u7406\u8bba\u7684 NebulaGraph \u96c6\u6210\u6d4b\u8bd5\u6846\u67b6\u91cd\u6784\uff08\u4e0b\uff09</li> </ul> <ul> <li>\u89e3\u6790 NebulaGraph \u5b50\u56fe\u8bbe\u8ba1\u53ca\u5b9e\u8df5</li> </ul> <ul> <li>\u57fa\u4e8e\u5168\u6587\u641c\u7d22\u5f15\u64ce\u7684\u6587\u672c\u641c\u7d22</li> </ul> <ul> <li>\u5b9e\u64cd | LDBC \u6570\u636e\u5bfc\u5165\u53ca nGQL \u5b9e\u8df5</li> </ul>"},{"location":"8.service-tuning/practice/#_4","title":"\u5468\u8fb9\u5de5\u5177","text":"<ul> <li>\u57fa\u4e8e NebulaGraph Importer \u6279\u91cf\u5bfc\u5165\u5de5\u5177\u6027\u80fd\u9a8c\u8bc1\u65b9\u6848\u603b\u7ed3</li> </ul> <ul> <li>\u8be6\u89e3 NebulaGraph 3.0 \u6027\u80fd\u62a5\u544a</li> </ul> <ul> <li>NebulaGraph  \u652f\u6301 JDBC \u534f\u8bae</li> </ul> <ul> <li>Nebula\u00b7\u5229\u5668 | Norm \u77e5\u4e4e\u5f00\u6e90\u7684 ORM \u5de5\u5177</li> </ul> <ul> <li>\u57fa\u4e8e NebulaGraph \u7684 Betweenness Centrality \u7b97\u6cd5</li> </ul> <ul> <li>\u65e0\u4f9d\u8d56\u5355\u673a\u5c1d\u9c9c NebulaGraph Exchange \u7684 SST \u5bfc\u5165</li> </ul> <ul> <li>logrotate \u5728 NebulaGraph \u7684\u65e5\u5fd7\u6eda\u52a8\u5b9e\u8df5</li> </ul> <p>## \u89c6\u9891</p> <ul> <li>Nebula \u9ad8\u6027\u80fd\u56fe schema \u8bbe\u8ba1 by \u9752\u85e4\u4e91\u5b89\u5168\uff0851 \u5206 30 \u79d2\uff09</li> </ul> <ul> <li>\u540c\u82b1\u987a\u56fe\u6570\u636e\u5e93\u9009\u578b\uff1a\u6d88\u606f\u9762\u3001\u57fa\u672c\u9762\u3001\u6280\u672f\u9762\uff0821 \u5206 53 \u79d2\uff09</li> </ul> <ul> <li>Nebula \u5728 Akulaku \u667a\u80fd\u98ce\u63a7\u7684\u5b9e\u8df5\uff0840 \u5206 03 \u79d2\uff09</li> </ul> <ul> <li>\u4ece\u96f6\u5230\u4e00\uff1a\u5982\u4f55\u4f7f\u7528 NebulaGraph \u6784\u5efa\u4e00\u4e2a\u4f01\u4e1a\u80a1\u6743\u56fe\u8c31\u7cfb\u7edf\uff0809 \u5206 34 \u79d2\uff09</li> </ul> <ul> <li>\u7f8e\u56e2\u56fe\u6570\u636e\u5e93\u5e73\u53f0\u5efa\u8bbe\u53ca\u4e1a\u52a1\u5b9e\u8df5\uff08\u4e0a\uff09\uff0814 \u5206 36 \u79d2\uff09</li> </ul> <ul> <li>\u7f8e\u56e2\u56fe\u6570\u636e\u5e93\u5e73\u53f0\u5efa\u8bbe\u53ca\u4e1a\u52a1\u5b9e\u8df5\uff08\u4e0b\uff09\uff0821 \u5206 33 \u79d2\uff09</li> </ul> <ul> <li>\u4fe1\u606f\u56fe\u8c31\u5728\u643a\u7a0b\u9152\u5e97\u7684\u5e94\u7528\uff0839 \u5206 06 \u79d2\uff09</li> </ul> <ul> <li>OPPO \u56fe\u5e73\u53f0\u5efa\u8bbe\uff0843 \u5206 09 \u79d2\uff09</li> </ul> <ul> <li>NebulaGraph \u5728\u7f51\u6613\u6e38\u620f\u4e1a\u52a1\u4e2d\u7684\u5b9e\u8df5\uff0847 \u5206 40 \u79d2\uff09</li> </ul> <ul> <li>BIGO \u6570\u636e\u7ba1\u7406\u4e0e\u5e94\u7528\u5b9e\u8df5\uff0853 \u5206 47 \u79d2\uff09</li> </ul> <ul> <li>NebulaGraph \u4fdd\u9669\u53cd\u6b3a\u8bc8\u89e3\u51b3\u65b9\u6848 Demo \u5206\u4eab\uff0839 \u5206 54 \u79d2\uff09</li> </ul> <ul> <li>NebulaGraph \u4eba\u9645\u5173\u7cfb\u67e5\u8be2\u4e4b\u75ab\u60c5\u9632\u63a7\u573a\u666f Demo \u5206\u4eab\uff081 \u65f6 01 \u5206 55 \u79d2\uff09</li> </ul> <ul> <li>NebulaGraph \u5728\u643a\u7a0b\u91d1\u878d\u98ce\u63a7\u7684\u5e94\u7528\uff0829 \u5206 06 \u79d2\uff09</li> </ul>"},{"location":"8.service-tuning/super-node/","title":"\u8d85\u7ea7\u9876\u70b9\uff08\u7a20\u5bc6\u70b9\uff09\u5904\u7406","text":""},{"location":"8.service-tuning/super-node/#_2","title":"\u539f\u7406\u4ecb\u7ecd","text":"<p>\u5728\u56fe\u8bba\u4e2d\uff0c\u8d85\u7ea7\u9876\u70b9\uff08\u7a20\u5bc6\u70b9\uff09\u662f\u6307\u4e00\u4e2a\u70b9\u6709\u7740\u6781\u591a\u7684\u76f8\u90bb\u8fb9\u3002\u76f8\u90bb\u8fb9\u53ef\u4ee5\u662f\u51fa\u8fb9\uff08\u6211\u6307\u5411\u8c01\uff09\u6216\u8005\u662f\u5165\u8fb9\uff08\u8c01\u6307\u5411\u6211\uff09\u3002</p> <p>\u7531\u4e8e\u5e42\u5f8b\u5206\u5e03\u7684\u7279\u70b9\uff0c\u8d85\u7ea7\u9876\u70b9\u73b0\u8c61\u975e\u5e38\u666e\u904d\u3002 \u4f8b\u5982\u793e\u4ea4\u7f51\u7edc\u4e2d\u7684\u5f71\u54cd\u529b\u9886\u8896\uff08\u7f51\u7ea2\u5927 V\uff09\u3001\u8bc1\u5238\u5e02\u573a\u4e2d\u7684\u70ed\u95e8\u80a1\u7968\u3001\u94f6\u884c\u7cfb\u7edf\u4e2d\u7684\u56db\u5927\u884c\u3001\u4ea4\u901a\u7f51\u7edc\u4e2d\u7684\u67a2\u7ebd\u7ad9\u3001\u4e92\u8054\u7f51\u4e2d\u7684\u9ad8\u6d41\u91cf\u7f51\u7ad9\u7b49\u3001\u7535\u5546\u7f51\u7edc\u4e2d\u7684\u7206\u6b3e\u4ea7\u54c1\u3002</p> <p>\u5728 NebulaGraph master \u4e2d\uff0c\u4e00\u4e2a<code>\u70b9</code> \u548c\u5176<code>\u5c5e\u6027</code>\u662f\u4e00\u4e2a <code>Key-Value</code>\uff08\u4ee5\u8be5\u70b9\u7684 <code>VID</code> \u4ee5\u53ca\u5176\u4ed6\u5143\u4fe1\u606f\u4f5c\u4e3a <code>Key</code>\uff09\uff0c\u5176 <code>Out-Edge Key-Value</code> \u548c <code>In-Edge Key-Value</code> \u90fd\u5b58\u50a8\u5728\u540c\u4e00\u4e2a partition \u4e2d\uff08\u5177\u4f53\u539f\u7406\u8be6\u89c1\u5b58\u50a8\u67b6\u6784\uff0c\u5e76\u4e14\u4ee5 LSM-tree \u7684\u5f62\u5f0f\u7ec4\u7ec7\u5b58\u653e\u5728\u786c\u76d8\uff08\u548c\u7f13\u5b58\uff09\u4e2d\u3002</p> <p>\u56e0\u6b64\u4e0d\u8bba\u662f<code>\u4ece\u8be5\u70b9\u51fa\u53d1\u7684\u6709\u5411\u904d\u5386</code>\uff0c\u6216\u8005<code>\u4ee5\u8be5\u70b9\u4e3a\u7ec8\u70b9\u7684\u6709\u5411\u904d\u5386</code>\uff0c\u90fd\u4f1a\u6d89\u53ca\u5230\u5927\u91cf\u7684<code>\u987a\u5e8f IO \u626b\u63cf</code>\uff08\u6700\u7406\u60f3\u60c5\u51b5\uff0c\u5f53\u5b8c\u6210 Compact \u64cd\u4f5c\u4e4b\u540e\uff09\uff0c\u6216\u8005\u5927\u91cf\u7684<code>\u968f\u673a IO</code>\uff08\u6709\u5173\u4e8e<code>\u8be5\u70b9</code>\u548c\u5176<code>\u51fa\u5165\u8fb9</code>\u9891\u7e41\u7684\u5199\u5165\uff09\u3002</p> <p>\u7ecf\u9a8c\u4e0a\u8bf4\uff0c\u5f53\u4e00\u4e2a\u70b9\u7684\u51fa\u5165\u5ea6\u8d85\u8fc7 1 \u4e07\u65f6\uff0c\u5c31\u53ef\u4ee5\u89c6\u4e3a\u662f\u7a20\u5bc6\u70b9\u3002\u9700\u8981\u8003\u8651\u4e00\u4e9b\u7279\u6b8a\u7684\u8bbe\u8ba1\u548c\u5904\u7406\u3002</p> <p>Note</p> <p>NebulaGraph \u4e2d\u6ca1\u6709\u4e13\u7528\u7684\u5b57\u6bb5\u6765\u8bb0\u5f55\u6bcf\u4e2a\u70b9\u7684\u51fa\u5ea6\u548c\u5165\u5ea6\uff0c\u4e5f\u6ca1\u6709\u5185\u7f6e\u4efb\u52a1\u6765\u8fdb\u884c\u7edf\u8ba1\uff0c\u56e0\u6b64\u65e0\u6cd5\u9884\u77e5\u54ea\u4e9b\u70b9\u4f1a\u662f\u8d85\u7ea7\u8282\u70b9\u3002\u4e00\u4e2a\u6298\u4e2d\u7684\u529e\u6cd5\u662f\u4f7f\u7528 Spark \u5468\u671f\u6027\u5730\u8ba1\u7b97\u548c\u7edf\u8ba1\u3002</p>"},{"location":"8.service-tuning/super-node/#_3","title":"\u91cd\u590d\u5c5e\u6027\u7d22\u5f15","text":"<p>\u5728\u5c5e\u6027\u56fe\u4e2d\uff0c\u9664\u4e86\u7f51\u7edc\u62d3\u6251\u7ed3\u6784\u4e2d\u7684\u8d85\u7ea7\u9876\u70b9\uff0c\u8fd8\u6709\u4e00\u7c7b\u60c5\u51b5\u7c7b\u4f3c\u4e8e\u8d85\u7ea7\u9876\u70b9\u2014\u2014\u2014\u2014\u67d0\u5c5e\u6027\u6709\u6781\u9ad8\u91cd\u590d\u7387\uff0c\u4e5f\u5373\"\u76f8\u540c\u7684<code>\u70b9\u7c7b\u578b Tag</code>\uff0c\u4e0d\u540c\u7684<code>\u9876\u70b9 VID</code>\uff0c\u540c\u4e00\u5c5e\u6027\u5b57\u6bb5\uff0c\u62e5\u6709\u76f8\u540c\u5c5e\u6027\u503c\"\u3002</p> <p>NebulaGraph master \u5c5e\u6027\u7d22\u5f15\u7684\u8bbe\u8ba1\u590d\u7528\u4e86\u5b58\u50a8\u6a21\u5757 RocksDB \u7684\u529f\u80fd\uff0c\u8fd9\u79cd\u60c5\u51b5\u4e0b\u7684\u7d22\u5f15\u4f1a\u88ab\u5efa\u6a21\u4e3a<code>\u524d\u7f00\u76f8\u540c\u7684 Key</code>\u3002\u5bf9\u4e8e\u8be5\u5c5e\u6027\u7684\u67e5\u627e\uff0c\uff08\u5982\u679c\u672a\u80fd\u547d\u4e2d\u7f13\u5b58\uff0c\uff09\u4f1a\u5bf9\u5e94\u4e3a\u786c\u76d8\u4e0a\u7684\u201c\u4e00\u6b21\u968f\u673a\u67e5\u627e + \u4e00\u6b21\u524d\u7f00\u987a\u5e8f\u626b\u63cf\u201d\uff0c\u4ee5\u627e\u5230\u5bf9\u5e94\u7684<code>\u70b9 VID</code>\uff08\u6b64\u540e\uff0c\u901a\u5e38\u4f1a\u4ece\u8be5\u9876\u70b9\u5f00\u59cb\u56fe\u904d\u5386\uff0c\u8fd9\u6837\u53c8\u4f1a\u53d1\u751f\u8be5\u70b9\u5bf9\u5e94 Key-Value \u7684\u4e00\u6b21\u968f\u673a\u8bfb+\u987a\u5e8f\u626b\u63cf\uff09\u3002\u5f53\u91cd\u590d\u7387\u8d8a\u9ad8\uff0c\u626b\u63cf\u8303\u56f4\u5c31\u8d8a\u5927\u3002</p> <p>\u5173\u4e8e\u5c5e\u6027\u7d22\u5f15\u7684\u539f\u7406\u8be6\u7ec6\u4ecb\u7ecd\u5728\u535a\u5ba2\u300a\u5206\u5e03\u5f0f\u56fe\u6570\u636e\u5e93 NebulaGraph \u7684 Index \u5b9e\u8df5\u300b\u3002</p> <p>\u7ecf\u9a8c\u4e0a\u8bf4\uff0c\u5f53\u91cd\u590d\u5c5e\u6027\u503c\u8d85\u8fc7 1 \u4e07\u65f6\uff0c\u4e5f\u9700\u8981\u7279\u6b8a\u7684\u8bbe\u8ba1\u548c\u5904\u7406\u3002</p>"},{"location":"8.service-tuning/super-node/#_4","title":"\u5efa\u8bae\u7684\u529e\u6cd5","text":""},{"location":"8.service-tuning/super-node/#_5","title":"\u6570\u636e\u5e93\u7aef\u7684\u5e38\u89c1\u529e\u6cd5","text":"<ol> <li>\u622a\u65ad: \u53ea\u8bbf\u95ee\u4e00\u5b9a\u9608\u503c\u7684\u8fb9\uff0c\u8d85\u8fc7\u8be5\u9608\u503c\u7684\u5176\u4ed6\u8fb9\u5219\u4e0d\u8fd4\u56de\u3002</li> <li>Compact\uff1a\u91cd\u65b0\u7ec4\u7ec7 RocksDB \u4e2d\u6570\u636e\u7684\u6392\u5217\u65b9\u5f0f\uff0c\u51cf\u5c11\u968f\u673a\u8bfb\uff0c\u589e\u52a0\u987a\u5e8f\u8bfb\u3002</li> </ol>"},{"location":"8.service-tuning/super-node/#_6","title":"\u5e94\u7528\u7aef\u7684\u5e38\u89c1\u529e\u6cd5","text":"<p>\u6839\u636e\u4e1a\u52a1\u610f\u4e49\uff0c\u5c06\u4e00\u4e9b\u8d85\u7ea7\u9876\u70b9\u62c6\u5206\uff1a</p> <ul> <li> <p>\u5220\u9664\u591a\u6761\u8fb9\uff0c\u5408\u5e76\u4e3a\u4e00\u6761</p> <p>\u4f8b\u5982\uff0c\u4e00\u4e2a\u8f6c\u8d26\u573a\u666f\uff1a <code>\uff08\u8d26\u6237 A)-[\u8f6c\u8d26]-&gt;\uff08\u8d26\u6237 B)</code>\u3002\u6bcf\u6b21<code>\u8f6c\u8d26</code>\u5efa\u6a21\u4e3a<code>\u4e00\u6761 AB \u4e4b\u95f4\u7684\u8fb9</code>\uff0c\u90a3\u4e48<code>\uff08\u8d26\u6237 A)</code>\u548c<code>\uff08\u8d26\u6237 B)</code>\u4e4b\u95f4\u4f1a\u6709\u7740\u6570\u4e07\u5341\u6b21\u8f6c\u8d26\u7684\u573a\u666f\u3002</p> <p>\u6309\u65e5\u3001\u5468\u3001\u6216\u8005\u6708\u4e3a\u7c92\u5ea6\uff0c\u5408\u5e76\u9648\u65e7\u7684\u8f6c\u8d26\u660e\u7ec6\u3002\u4e5f\u5c31\u662f\u6279\u91cf\u5220\u9664\u9648\u65e7\u7684\u8fb9\uff0c\u6539\u4e3a\u5c11\u91cf\u7684\u8fb9\u201c\u6708\u603b\u989d\u201d\u548c\u201c\u6b21\u6570\u3002\u800c\u4fdd\u7559\u6700\u8fd1\u6708\u7684\u8f6c\u8d26\u660e\u7ec6\u3002</p> </li> </ul> <ul> <li> <p>\u62c6\u5206\u76f8\u540c\u7c7b\u578b\u7684\u8fb9\uff0c\u53d8\u4e3a\u591a\u79cd\u4e0d\u540c\u7c7b\u578b\u7684\u8fb9</p> <p>\u4f8b\u5982\uff0c<code>\uff08\u673a\u573a\uff09&lt;-[depart]-\uff08\u822a\u73ed\uff09</code>\u573a\u666f\uff0c\u6bcf\u4e2a\u67b6\u6b21\u822a\u73ed\u7684\u79bb\u6e2f\uff0c\u90fd\u5efa\u6a21\u4e3a\u4e00\u6761\u822a\u73ed\u548c\u673a\u573a\u4e4b\u95f4\u7684\u8fb9\u3002\u90a3\u4e48\u5927\u578b\u673a\u573a\u7684\u79bb\u6e2f\u822a\u73ed\u4f1a\u6781\u591a\u3002</p> <p>\u6839\u636e\u4e0d\u540c\u7684<code>\u822a\u7a7a\u516c\u53f8</code>\u5c06 <code>depart</code> \u8fd9\u4e2a Edge type \u62c6\u5206\u66f4\u7ec6\u7684 Edge type\uff0c\u5982 <code>depart_ceair</code>, <code>depart_csair</code> \u7b49\u3002\u5728\u67e5\u8be2\uff08\u56fe\u904d\u5386\uff09\u65f6\uff0c\u6307\u5b9a\u79bb\u6e2f\u7684\u822a\u7a7a\u516c\u53f8\u3002</p> </li> </ul> <ul> <li> <p>\u5207\u5206\u9876\u70b9\u672c\u8eab</p> <p>\u4f8b\u5982\uff0c\u5bf9\u4e8e<code>\uff08\u4eba\uff09-[\u501f\u6b3e]-&gt;\uff08\u94f6\u884c\uff09</code>\u7684\u501f\u6b3e\u7f51\u7edc\uff0c\u67d0\u5927\u578b\u94f6\u884c A \u7684\u501f\u6b3e\u6b21\u6570\u548c\u501f\u6b3e\u4eba\u4f1a\u975e\u5e38\u7684\u591a\u3002</p> <p>\u53ef\u4ee5\u5c06\u8be5\u5927\u884c\u8282\u70b9 A \u62c6\u5206\u4e3a\u591a\u4e2a\u76f8\u5173\u8054\u7684\u5b50\u8282\u70b9 A1\u3001A2\u3001A3,</p> <p><pre><code>\uff08\u4eba 1)-[\u501f\u6b3e]-&gt;\uff08\u94f6\u884c A1), \uff08\u4eba 2)-[\u501f\u6b3e]-&gt;\uff08\u94f6\u884c A2), \uff08\u4eba 2)-[\u501f\u6b3e]-&gt;\uff08\u94f6\u884c A3);\n\uff08\u94f6\u884c A1)-[\u5c5e\u4e8e]-&gt;\uff08\u94f6\u884c A), \uff08\u94f6\u884c A2)-[\u5c5e\u4e8e]-&gt;\uff08\u94f6\u884c A), \uff08\u94f6\u884c A3)-[\u5c5e\u4e8e]-&gt;\uff08\u94f6\u884c A).\n</code></pre> \u8fd9\u91cc\u7684 A1\u3001A2\u3001A3 \u65e2\u53ef\u4ee5\u662f A \u771f\u5b9e\u7684\u4e09\u4e2a\u5206\u884c\uff08\u4f8b\u5982\u5317\u4eac\u3001\u4e0a\u6d77\u3001\u6d59\u6c5f\uff09\uff0c\u4e5f\u53ef\u4ee5\u662f\u4e09\u4e2a\u6309\u67d0\u79cd\u89c4\u5219\u8bbe\u7acb\u7684\u865a\u62df\u5206\u884c\uff0c\u4f8b\u5982\u6309\u501f\u6b3e\u91d1\u989d\u5212\u5206 <code>A1: 1-1000, A2: 1001-10000, A3: 10000+</code>\u3002\u8fd9\u6837\uff0c\u67e5\u8be2\u65f6\u5bf9\u4e8e A \u7684\u4efb\u4f55\u64cd\u4f5c\uff0c\u90fd\u8f6c\u53d8\u4e3a\u4e3a\u5bf9\u4e8e A1\u3001A2\u3001A3 \u7684\u4e09\u6b21\u5355\u72ec\u64cd\u4f5c\u3002</p> </li> </ul>"},{"location":"backup-and-restore/3.manage-snapshot/","title":"\u7ba1\u7406\u5feb\u7167","text":"<p>NebulaGraph \u63d0\u4f9b\u5feb\u7167\uff08snapshot\uff09\u529f\u80fd\uff0c\u7528\u4e8e\u4fdd\u5b58\u96c6\u7fa4\u5f53\u524d\u65f6\u95f4\u70b9\u7684\u6570\u636e\u72b6\u6001\uff0c\u5f53\u51fa\u73b0\u6570\u636e\u4e22\u5931\u6216\u8bef\u64cd\u4f5c\u65f6\uff0c\u53ef\u4ee5\u901a\u8fc7\u5feb\u7167\u6062\u590d\u6570\u636e\u3002</p>"},{"location":"backup-and-restore/3.manage-snapshot/#_2","title":"\u524d\u63d0\u6761\u4ef6","text":"<p>NebulaGraph \u7684\u8eab\u4efd\u8ba4\u8bc1\u529f\u80fd\u9ed8\u8ba4\u662f\u5173\u95ed\u7684\uff0c\u6b64\u65f6\u4efb\u4f55\u7528\u6237\u90fd\u80fd\u4f7f\u7528\u5feb\u7167\u529f\u80fd\u3002</p> <p>\u5982\u679c\u8eab\u4efd\u8ba4\u8bc1\u5f00\u542f\uff0c\u4ec5 God \u89d2\u8272\u7528\u6237\u53ef\u4ee5\u4f7f\u7528\u5feb\u7167\u529f\u80fd\u3002\u5173\u4e8e\u89d2\u8272\u8bf4\u660e\uff0c\u8bf7\u53c2\u89c1\u5185\u7f6e\u89d2\u8272\u6743\u9650\u3002</p>"},{"location":"backup-and-restore/3.manage-snapshot/#_3","title":"\u6ce8\u610f\u4e8b\u9879","text":"<ul> <li>\u7cfb\u7edf\u7ed3\u6784\u53d1\u751f\u53d8\u5316\u540e\uff0c\u5efa\u8bae\u7acb\u523b\u521b\u5efa\u5feb\u7167\uff0c\u4f8b\u5982\u5728<code>add host</code>\u3001<code>drop host</code>\u3001<code>create space</code>\u3001<code>drop space</code>\u3001<code>balance</code>\u7b49\u64cd\u4f5c\u4e4b\u540e\u3002</li> </ul> <ul> <li>\u4e0d\u652f\u6301\u81ea\u52a8\u56de\u6536\u521b\u5efa\u5931\u8d25\u7684\u5feb\u7167\u5783\u573e\u6587\u4ef6\uff0c\u9700\u8981\u624b\u52a8\u5220\u9664\u3002</li> </ul> <ul> <li>\u4e0d\u652f\u6301\u4fee\u6539\u5feb\u7167\u4fdd\u5b58\u8def\u5f84\u3002</li> </ul>"},{"location":"backup-and-restore/3.manage-snapshot/#_4","title":"\u521b\u5efa\u5feb\u7167","text":"<p>\u547d\u4ee4<code>CREATE SNAPSHOT</code>\u53ef\u4ee5\u521b\u5efa\u96c6\u7fa4\u5f53\u524d\u65f6\u95f4\u70b9\u7684\u5feb\u7167\u3002\u53ea\u652f\u6301\u521b\u5efa\u6240\u6709\u56fe\u7a7a\u95f4\u7684\u5feb\u7167\uff0c\u4e0d\u652f\u6301\u521b\u5efa\u6307\u5b9a\u56fe\u7a7a\u95f4\u7684\u5feb\u7167\u3002</p> <p>Note</p> <p>\u5982\u679c\u5feb\u7167\u521b\u5efa\u5931\u8d25\uff0c\u8bf7\u53c2\u8003\u540e\u6587\u5220\u9664\u635f\u574f\u7684\u5feb\u7167\uff0c\u7136\u540e\u91cd\u65b0\u521b\u5efa\u5feb\u7167\u3002</p> <pre><code>nebula&gt; CREATE SNAPSHOT;\n</code></pre>"},{"location":"backup-and-restore/3.manage-snapshot/#_5","title":"\u67e5\u770b\u5feb\u7167","text":"<p>\u547d\u4ee4<code>SHOW SNAPSHOTS</code>\u53ef\u4ee5\u67e5\u770b\u96c6\u7fa4\u4e2d\u7684\u6240\u6709\u5feb\u7167\u3002</p> <pre><code>nebula&gt; SHOW SNAPSHOTS;\n+--------------------------------+---------+------------------+\n| Name                           | Status  | Hosts            |\n+--------------------------------+---------+------------------+\n| \"SNAPSHOT_2021_03_09_08_43_12\" | \"VALID\" | \"127.0.0.1:9779\" |\n| \"SNAPSHOT_2021_03_09_09_10_52\" | \"VALID\" | \"127.0.0.1:9779\" |\n+--------------------------------+---------+------------------+\n</code></pre> <p>\u53c2\u6570\u8bf4\u660e\u5982\u4e0b\uff1a</p> \u53c2\u6570 \u8bf4\u660e <code>Name</code> \u5feb\u7167\u540d\u79f0\uff0c\u524d\u7f00\u4e3a<code>SNAPSHOT</code>\uff0c\u8868\u793a\u8be5\u6587\u4ef6\u4e3a\u5feb\u7167\u6587\u4ef6\uff0c\u540e\u7f00\u4e3a\u5feb\u7167\u521b\u5efa\u7684\u65f6\u95f4\u70b9\uff08UTC \u65f6\u95f4\uff09\u3002 <code>Status</code> \u5feb\u7167\u72b6\u6001\u3002<code>VALID</code>\u8868\u793a\u5feb\u7167\u6709\u6548\uff0c<code>INVALID</code>\u8868\u793a\u5feb\u7167\u65e0\u6548\u3002 <code>Hosts</code> \u521b\u5efa\u5feb\u7167\u65f6\u6240\u6709 Storage \u670d\u52a1\u5668\u7684 IP\uff08\u6216\u4e3b\u673a\u540d\uff09\u548c\u7aef\u53e3\u3002"},{"location":"backup-and-restore/3.manage-snapshot/#_6","title":"\u5feb\u7167\u8def\u5f84","text":"<p>\u5feb\u7167\u4fdd\u5b58\u5728 Meta \u548c Storage \u914d\u7f6e\u6587\u4ef6\u4e2d<code>data_path</code>\u53c2\u6570\u6307\u5b9a\u7684\u8def\u5f84\u4e2d\u3002\u521b\u5efa\u5feb\u7167\u65f6\uff0c\u5728 leader Meta \u670d\u52a1\u548c\u6240\u6709 Storage \u670d\u52a1\u7684\u6570\u636e\u5b58\u50a8\u8def\u5f84\u4e2d\u4f1a\u68c0\u67e5\u662f\u5426\u6709<code>checkpoints</code>\u76ee\u5f55\uff0c\u5982\u679c\u6ca1\u6709\u4f1a\u81ea\u52a8\u521b\u5efa\u3002\u65b0\u5efa\u7684\u5feb\u7167\u4ee5\u5b50\u76ee\u5f55\u7684\u5f62\u5f0f\u50a8\u5b58\u5728<code>checkpoints</code>\u76ee\u5f55\u5185\u3002\u4f8b\u5982<code>SNAPSHOT_2021_03_09_08_43_12</code>\uff0c\u540e\u7f00<code>2021_03_09_08_43_12</code>\u6839\u636e\u521b\u5efa\u65f6\u95f4\uff08UTC\uff09\u81ea\u52a8\u751f\u6210\u3002</p> <p>\u4e3a\u4e86\u5feb\u901f\u5b9a\u4f4d\u5feb\u7167\u6240\u5728\u8def\u5f84\uff0c\u53ef\u4ee5\u5728\u6570\u636e\u5b58\u50a8\u8def\u5f84\u5185\u4f7f\u7528 Linux \u547d\u4ee4<code>find</code>\u3002\u4f8b\u5982\uff1a</p> <pre><code>$ cd /usr/local/yueshu-graph-master/data\n$ find |grep 'SNAPSHOT_2021_03_09_08_43_12'\n./data/meta2/nebula/0/checkpoints/SNAPSHOT_2021_03_09_08_43_12\n./data/meta2/nebula/0/checkpoints/SNAPSHOT_2021_03_09_08_43_12/data\n./data/meta2/nebula/0/checkpoints/SNAPSHOT_2021_03_09_08_43_12/data/000081.sst\n...\n</code></pre>"},{"location":"backup-and-restore/3.manage-snapshot/#_7","title":"\u5220\u9664\u5feb\u7167","text":"<p>\u547d\u4ee4<code>DROP SNAPSHOT</code>\u53ef\u4ee5\u5220\u9664\u6307\u5b9a\u7684\u5feb\u7167\uff0c\u8bed\u6cd5\u4e3a\uff1a</p> <pre><code>DROP SNAPSHOT &lt;snapshot_name&gt;;\n</code></pre> <p>\u793a\u4f8b\u5982\u4e0b\uff1a</p> <pre><code>nebula&gt; DROP SNAPSHOT SNAPSHOT_2021_03_09_08_43_12;\nnebula&gt; SHOW SNAPSHOTS;\n+--------------------------------+---------+------------------+\n| Name                           | Status  | Hosts            |\n+--------------------------------+---------+------------------+\n| \"SNAPSHOT_2021_03_09_09_10_52\" | \"VALID\" | \"127.0.0.1:9779\" |\n+--------------------------------+---------+------------------+\n</code></pre> <p>Note</p> <p>\u5220\u9664\u6700\u540e\u4e00\u4e2a\u5feb\u7167\u65f6\uff0c\u4f1a\u5c06<code>checkpoints</code>\u76ee\u5f55\u4e00\u8d77\u5220\u9664\u3002</p>"},{"location":"backup-and-restore/3.manage-snapshot/#_8","title":"\u6062\u590d\u5feb\u7167","text":"<p>Warning</p> <p>\u6062\u590d\u5feb\u7167\u6570\u636e\u65f6\uff0c\u5982\u679c\u5feb\u7167\u4e2d\u5907\u4efd\u7684\u56fe\u7a7a\u95f4\u88ab\u5220\u9664\uff08\u6267\u884c\u4e86<code>DROP SPACE</code>\u64cd\u4f5c\uff09\uff0c\u90a3\u4e48\u8be5\u56fe\u7a7a\u95f4\u6570\u636e\u5c06\u65e0\u6cd5\u6062\u590d\u3002</p> <p>\u5f53\u524d\u672a\u63d0\u4f9b\u6062\u590d\u5feb\u7167\u547d\u4ee4\uff0c\u9700\u8981\u624b\u52a8\u62f7\u8d1d\u5feb\u7167\u6587\u4ef6\u5230\u5bf9\u5e94\u7684\u6587\u4ef6\u5939\u5185\uff0c\u4e5f\u53ef\u4ee5\u901a\u8fc7 shell \u811a\u672c\u8fdb\u884c\u64cd\u4f5c\u3002\u5b9e\u73b0\u903b\u8f91\u5982\u4e0b\uff1a</p> <ol> <li> <p>\u521b\u5efa\u5feb\u7167\u540e\uff0c\u4f1a\u5728 leader Meta \u670d\u52a1\u548c\u6240\u6709 Storage \u670d\u52a1\u7684\u5b89\u88c5\u76ee\u5f55\u5185\u751f\u6210<code>checkpoints</code>\u76ee\u5f55\uff0c\u4fdd\u5b58\u521b\u5efa\u7684\u5feb\u7167\u3002\u4ee5\u672c\u6587\u4e3a\u4f8b\uff0c\u5f53\u5b58\u5728 2 \u4e2a\u56fe\u7a7a\u95f4\u65f6\uff0c\u521b\u5efa\u7684\u5feb\u7167\u5206\u522b\u4fdd\u5b58\u5728<code>/usr/local/nebula/data/meta/nebula/0/checkpoints</code>\u3001<code>/usr/local/nebula/data/storage/nebula/3/checkpoints</code>\u548c<code>/usr/local/nebula/data/storage/nebula/4/checkpoints</code>\u4e2d\u3002</p> <pre><code>$ ls /usr/local/nebula/data/meta/nebula/0/checkpoints/\nSNAPSHOT_2021_03_09_09_10_52\n$ ls /usr/local/nebula/data/storage/nebula/3/checkpoints/\nSNAPSHOT_2021_03_09_09_10_52\n$ ls /usr/local/nebula/data/storage/nebula/4/checkpoints/\nSNAPSHOT_2021_03_09_09_10_52\n</code></pre> </li> <li> <p>\u5f53\u6570\u636e\u4e22\u5931\u9700\u8981\u901a\u8fc7\u5feb\u7167\u6062\u590d\u65f6\uff0c\u7528\u6237\u53ef\u4ee5\u627e\u5230\u5408\u9002\u7684\u65f6\u95f4\u70b9\u5feb\u7167\uff0c\u5c06\u5185\u90e8\u7684\u6587\u4ef6\u5939<code>data</code>\u548c<code>wal</code>\u5206\u522b\u62f7\u8d1d\u5230\u5404\u81ea\u7684\u4e0a\u7ea7\u76ee\u5f55\uff08\u548c<code>checkpoints</code>\u5e73\u7ea7\uff09\uff0c\u8986\u76d6\u4e4b\u524d\u7684<code>data</code>\u548c<code>wal</code>\uff0c\u7136\u540e\u91cd\u542f\u96c6\u7fa4\u5373\u53ef\u3002</p> <p>Warning</p> <p>\u9700\u8981\u540c\u65f6\u8986\u76d6\u6240\u6709 Meta \u670d\u52a1\u7684 data \u548c wal \u76ee\u5f55\uff0c\u56e0\u4e3a\u5b58\u5728\u91cd\u542f\u96c6\u7fa4\u540e\u53d1\u751f Meta \u670d\u52a1\u91cd\u65b0\u9009\u4e3e leader \u7684\u60c5\u51b5\uff0c\u5982\u679c\u4e0d\u8986\u76d6\u6240\u6709 Meta \u670d\u52a1\uff0c\u65b0\u7684 leader \u4f7f\u7528\u7684\u8fd8\u662f\u6700\u65b0\u7684 Meta \u670d\u52a1\u6570\u636e\uff0c\u5bfc\u81f4\u6062\u590d\u5931\u8d25\u3002</p> </li> </ol>"},{"location":"backup-and-restore/nebula-br/1.what-is-br/","title":"\u4ec0\u4e48\u662f Backup&amp;Restore","text":"<p>Backup&amp;Restore\uff08\u7b80\u79f0 BR\uff09\u662f\u4e00\u6b3e\u547d\u4ee4\u884c\u754c\u9762\uff08CLI\uff09\u5de5\u5177\uff0c\u53ef\u4ee5\u5e2e\u52a9\u5907\u4efd NebulaGraph \u7684\u56fe\u7a7a\u95f4\u6570\u636e\uff0c\u6216\u8005\u901a\u8fc7\u5907\u4efd\u6587\u4ef6\u6062\u590d\u6570\u636e\u3002</p>"},{"location":"backup-and-restore/nebula-br/1.what-is-br/#_1","title":"\u529f\u80fd","text":"<ul> <li>\u4e00\u952e\u64cd\u4f5c\u5907\u4efd\u548c\u6062\u590d\u6570\u636e\u3002</li> <li>\u652f\u6301\u57fa\u4e8e\u4ee5\u4e0b\u5907\u4efd\u6587\u4ef6\u6062\u590d\u6570\u636e\uff1a<ul> <li>\u672c\u5730\u78c1\u76d8\uff08SSD \u6216 HDD\uff09\uff0c\u5efa\u8bae\u4ec5\u5728\u6d4b\u8bd5\u73af\u5883\u4f7f\u7528\u3002</li> <li>\u517c\u5bb9\u4e9a\u9a6c\u900a\u5bf9\u8c61\u5b58\u50a8\uff08Amazon S3\uff09\u4e91\u5b58\u50a8\u670d\u52a1\u63a5\u53e3\uff0c\u4f8b\u5982\uff1a\u963f\u91cc\u4e91\u5bf9\u8c61\u5b58\u50a8\uff08Alibaba Cloud OSS\uff09\u3001MinIO\u3001Ceph RGW \u7b49\u3002</li> </ul> </li> <li>\u652f\u6301\u5907\u4efd\u5e76\u6062\u590d\u6574\u4e2a NebulaGraph \u96c6\u7fa4\u3002</li> <li>\uff08\u5b9e\u9a8c\u6027\u529f\u80fd\uff09\u652f\u6301\u5907\u4efd\u6307\u5b9a\u56fe\u7a7a\u95f4\u6570\u636e\u3002</li> </ul>"},{"location":"backup-and-restore/nebula-br/1.what-is-br/#_2","title":"\u9650\u5236","text":"<ul> <li>NebulaGraph \u7248\u672c\u9700\u8981\u4e3a v3.x\u3002</li> <li>\u6570\u636e\u5907\u4efd\u4ec5\u652f\u6301\u5168\u91cf\u5907\u4efd\uff0c\u4e0d\u652f\u6301\u589e\u91cf\u5907\u4efd\u3002</li> <li>Listener \u6682\u65f6\u4e0d\u652f\u6301\u5907\u4efd\uff0c\u4e14\u5168\u6587\u7d22\u5f15\u4e5f\u4e0d\u652f\u6301\u5907\u4efd\u3002</li> <li>\u5982\u679c\u5907\u4efd\u6570\u636e\u5230\u672c\u5730\u78c1\u76d8\uff0c\u5907\u4efd\u7684\u6587\u4ef6\u5c06\u4f1a\u653e\u7f6e\u5728\u6bcf\u4e2a\u670d\u52a1\u5668\u7684\u672c\u5730\u8def\u5f84\u4e2d\u3002\u4e5f\u53ef\u4ee5\u5728\u672c\u5730\u6302\u8f7d NFS \u6587\u4ef6\u7cfb\u7edf\uff0c\u4ee5\u4fbf\u5c06\u5907\u4efd\u6570\u636e\u8fd8\u539f\u5230\u4e0d\u540c\u7684\u4e3b\u673a\u4e0a\u3002</li> <li>\u5907\u4efd\u56fe\u7a7a\u95f4\u53ea\u80fd\u6062\u590d\u5230\u539f\u96c6\u7fa4\uff0c\u4e0d\u80fd\u8de8\u96c6\u7fa4\u6062\u590d\uff0c\u5e76\u4e14\u96c6\u7fa4\u7684 Storage \u4e3b\u673a\u6570\u91cf\u53ca IP \u9700\u4e00\u81f4\u3002\u8fd8\u539f\u6307\u5b9a\u56fe\u7a7a\u95f4\u65f6\u5c06\u6e05\u9664\u96c6\u7fa4\u4e2d\u5176\u4f59\u6240\u6709\u56fe\u7a7a\u95f4\u3002</li> <li>\u6570\u636e\u5907\u4efd\u8fc7\u7a0b\u4e2d\uff0c\u6240\u6709\u56fe\u7a7a\u95f4\u4e2d\u7684 DDL \u548c DML \u8bed\u53e5\u5c06\u4f1a\u963b\u585e\uff0c\u6211\u4eec\u5efa\u8bae\u5728\u4e1a\u52a1\u4f4e\u5cf0\u671f\u8fdb\u884c\u64cd\u4f5c\uff0c\u4f8b\u5982\u51cc\u6668 2 \u70b9\u81f3 5 \u70b9\u3002</li> <li>\u6570\u636e\u6062\u590d\u671f\u95f4\u6709\u4e00\u6bb5\u65f6\u95f4\u670d\u52a1\u4f1a\u88ab\u505c\u6b62\u3002</li> <li>\u4e0d\u652f\u6301\u5728\u5bb9\u5668\u90e8\u7f72\u7684 NebulaGraph \u96c6\u7fa4\u4e2d\u4f7f\u7528 BR\u3002</li> </ul>"},{"location":"backup-and-restore/nebula-br/1.what-is-br/#br","title":"\u5982\u4f55\u4f7f\u7528 BR","text":"<p>\u53ef\u4ee5\u6309\u7167\u5982\u4e0b\u6b65\u9aa4\u4f7f\u7528 BR\uff1a</p> <ol> <li>\u5b89\u88c5 BR</li> <li>\u4f7f\u7528 BR \u5907\u4efd\u6570\u636e</li> <li>\u4f7f\u7528 BR \u6062\u590d\u6570\u636e</li> </ol>"},{"location":"backup-and-restore/nebula-br/1.what-is-br/#_3","title":"\u89c6\u9891","text":"<ul> <li>NebulaGraph \u5bb9\u707e\u5907\u4efd\u5de5\u5177 nebula-br \u4ecb\u7ecd\uff083 \u5206 34 \u79d2\uff09</li> </ul>"},{"location":"backup-and-restore/nebula-br/2.compile-br/","title":"\u5b89\u88c5 BR","text":"<p>\u672c\u6587\u4ecb\u7ecd\u88f8\u673a\u90e8\u7f72\u60c5\u51b5\u4e0b\u7684 BR \u5b89\u88c5\u3002</p>"},{"location":"backup-and-restore/nebula-br/2.compile-br/#_1","title":"\u5b89\u88c5\u8bf4\u660e","text":"<p>\u4f7f\u7528 BR \u5de5\u5177\u5907\u4efd\u548c\u6062\u590d NebulaGraph \u65f6\uff0c\u9700\u8981\u5b89\u88c5 NebulaGraph Agent \u670d\u52a1\u3002Agent \u662f\u96c6\u7fa4\u4e2d\u6bcf\u53f0\u673a\u5668\u7684\u4e00\u4e2a\u5b88\u62a4\u8fdb\u7a0b\uff0c\u7528\u4e8e\u542f\u505c NebulaGraph \u670d\u52a1\u548c\u4e0a\u4f20\u3001\u4e0b\u8f7d\u5907\u4efd\u6587\u4ef6\u3002BR \u5de5\u5177\u548c Agent \u63d2\u4ef6\u7684\u5b89\u88c5\u65b9\u5f0f\u5982\u4e0b\u6587\u3002</p>"},{"location":"backup-and-restore/nebula-br/2.compile-br/#_2","title":"\u7248\u672c\u517c\u5bb9\u6027","text":"NebulaGraph BR \u793e\u533a\u7248 Agent 3.5.x 3.5.0 3.4.0\u30010.2.0 3.3.0 ~ 3.4.x 3.3.0 3.4.0\u30010.2.0 3.0.x ~ 3.2.x 0.6.1 0.1.0 ~ 0.2.0"},{"location":"backup-and-restore/nebula-br/2.compile-br/#br_1","title":"\u5b89\u88c5 BR","text":""},{"location":"backup-and-restore/nebula-br/2.compile-br/#_3","title":"\u4f7f\u7528\u4e8c\u8fdb\u5236\u6587\u4ef6\u5b89\u88c5","text":"<ol> <li> <p>\u4e0b\u8f7d BR\u3002</p> <pre><code>wget https://github.com/vesoft-inc/nebula-br/releases/download/v3.6.0/br-3.6.0-linux-amd64\n</code></pre> </li> <li> <p>\u4fee\u6539\u6587\u4ef6\u540d\u79f0\u4e3a<code>br</code>\u3002</p> <pre><code>sudo mv br-3.6.0-linux-amd64 br\n</code></pre> </li> <li> <p>\u6388\u4e88 BR \u6267\u884c\u6743\u9650\u3002</p> <pre><code>sudo chmod +x br\n</code></pre> </li> <li> <p>\u6267\u884c<code>./br version</code>\u67e5\u770b BR \u7248\u672c\u3002</p> <pre><code>[nebula-br]$ ./br version\nNebula Backup And Restore Utility Tool,V-3.6.0\n</code></pre> </li> </ol>"},{"location":"backup-and-restore/nebula-br/2.compile-br/#_4","title":"\u4f7f\u7528\u6e90\u7801\u5b89\u88c5","text":"<p>\u4f7f\u7528\u6e90\u7801\u5b89\u88c5 BR \u524d\uff0c\u51c6\u5907\u5de5\u4f5c\u5982\u4e0b\uff1a</p> <ul> <li>\u5b89\u88c5 Go 1.14.x \u6216\u66f4\u65b0\u7248\u672c\u3002</li> <li>\u5b89\u88c5 make\u3002</li> </ul> <ol> <li> <p>\u514b\u9686<code>nebula-br</code>\u5e93\u81f3\u673a\u5668\u3002</p> <pre><code>git clone https://github.com/vesoft-inc/nebula-br.git\n</code></pre> </li> <li> <p>\u8fdb\u5165<code>br</code>\u76ee\u5f55\u3002</p> <pre><code>cd nebula-br\n</code></pre> </li> <li> <p>\u7f16\u8bd1 BR\u3002</p> <pre><code>make\n</code></pre> </li> </ol> <p>\u7528\u6237\u53ef\u4ee5\u5728\u547d\u4ee4\u884c\u8f93\u5165<code>bin/br version</code>\uff0c\u5982\u679c\u8fd4\u56de\u4ee5\u4e0b\u5185\u5bb9\uff0c\u5219\u8ba4\u4e3a\u7f16\u8bd1\u6210\u529f\u3002</p> <pre><code>[nebula-br]$ bin/br version\nNebulaGraph Backup And Restore Utility Tool,V-3.6.0\n</code></pre>"},{"location":"backup-and-restore/nebula-br/2.compile-br/#agent","title":"\u5b89\u88c5 Agent","text":"<p>NebulaGraph Agent \u4ee5\u4e8c\u8fdb\u5236\u5f62\u5f0f\u5b58\u5728\u5404\u4e2a\u673a\u5668\u7684\u5b89\u88c5\u76ee\u5f55\u4e2d\uff0c\u901a\u8fc7 RPC \u534f\u8bae\u5bf9 BR \u5de5\u5177\u63d0\u4f9b\u670d\u52a1\u3002</p> <p>\u5728\u6bcf\u53f0\u673a\u5668\u4e2d\uff0c\u8fdb\u884c\u4ee5\u4e0b\u64cd\u4f5c\uff1a</p> <ol> <li> <p>\u4e0b\u8f7d Agent\u3002</p> <pre><code>wget https://github.com/vesoft-inc/nebula-agent/releases/download/v3.7.0/agent-3.7.0-linux-amd64\n</code></pre> </li> <li> <p>\u4fee\u6539 Agent \u7684\u540d\u79f0\u4e3a<code>agent</code>\u3002</p> <pre><code>sudo mv agent-3.7.0-linux-amd64 agent\n</code></pre> </li> <li> <p>\u6388\u4e88 Agent \u53ef\u6267\u884c\u6743\u9650\u3002</p> <pre><code>sudo chmod +x agent\n</code></pre> </li> <li> <p>\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\u542f\u52a8 Agent\u3002</p> <p>Note</p> <p>\u542f\u52a8 Agent \u524d\uff0c\u786e\u4fdd\u5df2\u7ecf\u542f\u52a8\u96c6\u7fa4\u4e2d\u7684 Meta \u670d\u52a1\uff0c\u5e76\u4e14 Agent \u6709\u5bf9\u5e94 NebulaGraph \u670d\u52a1\u76ee\u5f55\u548c\u5907\u4efd\u76ee\u5f55\u7684\u8bfb\u5199\u6743\u9650\u3002</p> <pre><code>sudo nohup ./agent --agent=\"&lt;agent_node_ip&gt;:8888\" --meta=\"&lt;metad_node_ip&gt;:9559\" &gt; nebula_agent.log 2&gt;&amp;1 &amp;\n</code></pre> <ul> <li><code>--agent</code>\uff1aAgent \u6240\u5728\u673a\u5668\u7684 IP \u5730\u5740\u548c\u8bbf\u95ee\u7aef\u53e3\u3002</li> <li><code>--meta</code>\uff1a\u96c6\u7fa4\u4e2d\u4efb\u4e00 Meta \u670d\u52a1\u6240\u5728\u673a\u5668\u7684 IP \u5730\u5740\u548c\u8bbf\u95ee\u7aef\u53e3\u3002</li> <li><code>--ratelimit</code>\uff1a\u53ef\u9009\u9879\uff0c\u9650\u5236\u6587\u4ef6\u4e0a\u4f20\u548c\u4e0b\u8f7d\u7684\u901f\u5ea6\uff0c\u9632\u6b62\u5e26\u5bbd\u88ab\u5360\u6ee1\u5bfc\u81f4\u5176\u4ed6\u670d\u52a1\u4e0d\u53ef\u7528\u3002\u5355\u4f4d\uff1aBytes\u3002</li> </ul> <p>\u4f8b\u5982\uff1a</p> <pre><code>sudo nohup ./agent --agent=\"192.168.8.129:8888\" --meta=\"192.168.8.129:9559\" --ratelimit=1048576 &gt; nebula_agent.log 2&gt;&amp;1 &amp;\n</code></pre> <p>Caution</p> <p><code>--agent</code>\u914d\u7f6e\u7684 IP \u5730\u5740\u9700\u8981\u548c\u914d\u7f6e\u6587\u4ef6\u4e2d Meta \u548c Storage \u670d\u52a1\u7684\u5730\u5740\u683c\u5f0f\u4fdd\u6301\u4e00\u81f4\uff0c\u5373\u90fd\u4f7f\u7528\u771f\u5b9e IP \u5730\u5740\uff0c\u5426\u5219 Agent \u65e0\u6cd5\u542f\u52a8\u3002</p> </li> <li> <p>\u8fde\u63a5\u670d\u52a1\u5e76\u67e5\u770b Agent \u7684\u8fd0\u884c\u72b6\u6001\u3002</p> <pre><code>nebula&gt; SHOW HOSTS AGENT;\n+-----------------+------+----------+---------+--------------+---------+\n| Host            | Port | Status   | Role    | Git Info Sha | Version |\n+-----------------+------+----------+---------+--------------+---------+\n| \"192.168.8.129\" | 8888 | \"ONLINE\" | \"AGENT\" | \"96646b8\"    |         |\n+-----------------+------+----------+---------+--------------+---------+  \n</code></pre> </li> </ol>"},{"location":"backup-and-restore/nebula-br/2.compile-br/#_5","title":"\u5e38\u89c1\u95ee\u9898","text":""},{"location":"backup-and-restore/nebula-br/2.compile-br/#e_list_cluster_no_agent_failure","title":"\u62a5\u9519<code>E_LIST_CLUSTER_NO_AGENT_FAILURE</code>","text":"<p>\u5982\u679c\u64cd\u4f5c\u8fc7\u7a0b\u4e2d\u9047\u89c1<code>E_LIST_CLUSTER_NO_AGENT_FAILURE</code>\u9519\u8bef\uff0c\u53ef\u80fd\u662f\u7531\u4e8e Agent \u670d\u52a1\u6ca1\u6709\u542f\u52a8\u6216\u8005 Agent \u670d\u52a1\u6ca1\u6709\u88ab\u6ce8\u518c\u81f3 Meta \u670d\u52a1\u3002\u9996\u5148\u6267\u884c<code>SHOW HOSTS AGENT</code>\u67e5\u770b\u96c6\u7fa4\u4e0a\u6240\u6709\u8282\u70b9\u7684 Agent \u670d\u52a1\u7684\u72b6\u6001\uff0c\u5f53\u65f6\u72b6\u6001\u663e\u793a\u4e3a<code>OFFLINE</code>\u65f6\u8868\u793a\u6ce8\u518c Agent \u5931\u8d25\uff0c \u7136\u540e\u68c0\u67e5\u542f\u52a8 Agent \u670d\u52a1\u7684\u547d\u4ee4\u4e2d\u7684<code>--meta</code>\u53c2\u6570\u662f\u5426\u6b63\u786e\u3002</p>"},{"location":"backup-and-restore/nebula-br/3.br-backup-data/","title":"\u4f7f\u7528 BR \u5907\u4efd\u6570\u636e","text":"<p>\u6210\u529f\u5b89\u88c5 BR \u5de5\u5177\u540e\uff0c\u53ef\u4ee5\u5907\u4efd\u6574\u4e2a\u56fe\u7a7a\u95f4\u7684\u6570\u636e\uff0c\u672c\u6587\u4ecb\u7ecd\u5982\u4f55\u4f7f\u7528 BR \u5907\u4efd\u6570\u636e\u3002</p>"},{"location":"backup-and-restore/nebula-br/3.br-backup-data/#_1","title":"\u51c6\u5907\u5de5\u4f5c","text":"<ul> <li>\u5b89\u88c5 BR \u548c Agent \u5e76\u5728\u96c6\u7fa4\u4e2d\u7684\u6bcf\u4e2a\u4e3b\u673a\u4e0a\u8fd0\u884c Agent\u3002</li> </ul> <ul> <li>\u786e\u8ba4 NebulaGraph \u670d\u52a1\u6b63\u5728\u8fd0\u884c\u4e2d\u3002</li> </ul> <ul> <li> <p>\u5982\u679c\u5728\u672c\u5730\u4fdd\u5b58\u5907\u4efd\u6587\u4ef6\uff0c\u9700\u8981\u5728 Meta \u670d\u52a1\u5668\u3001Storage \u670d\u52a1\u5668\u548c BR \u673a\u5668\u4e0a\u521b\u5efa\u7edd\u5bf9\u8def\u5f84\u76f8\u540c\u7684\u5907\u4efd\u76ee\u5f55\uff0c\u5e76\u8bb0\u5f55\u7edd\u5bf9\u8def\u5f84\uff0c\u540c\u65f6\u9700\u8981\u4fdd\u8bc1\u8d26\u53f7\u5bf9\u8be5\u76ee\u5f55\u6709\u5199\u6743\u9650\u3002</p> <p>Warning</p> <p>\u5728\u751f\u4ea7\u73af\u5883\u4e2d\uff0c\u6211\u4eec\u5efa\u8bae\u7528\u6237\u5c06 NFS (Network File System\uff09\u5b58\u50a8\u8bbe\u5907\u6302\u8f7d\u5230 Meta \u670d\u52a1\u5668\u3001Storage \u670d\u52a1\u5668\u548c BR \u673a\u5668\u4e0a\u8fdb\u884c\u672c\u5730\u5907\u4efd\uff0c\u6216\u8005\u4f7f\u7528 Alibaba Cloud OSS\u3001Amazon S3 \u8fdb\u884c\u8fdc\u7a0b\u5907\u4efd\u3002\u5426\u5219\u5f53\u9700\u8981\u901a\u8fc7\u672c\u5730\u6587\u4ef6\u6062\u590d\u6570\u636e\u65f6\uff0c\u5fc5\u987b\u624b\u52a8\u5c06\u8fd9\u4e9b\u5907\u4efd\u6587\u4ef6\u79fb\u52a8\u5230\u6307\u5b9a\u76ee\u5f55\uff0c\u4f1a\u5bfc\u81f4\u6570\u636e\u5197\u4f59\u548c\u67d0\u4e9b\u95ee\u9898\u3002\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u89c1\u4f7f\u7528 BR \u6062\u590d\u6570\u636e\u3002</p> </li> </ul>"},{"location":"backup-and-restore/nebula-br/3.br-backup-data/#_2","title":"\u64cd\u4f5c\u6b65\u9aa4","text":"<p>\u5728 BR \u5de5\u5177\u7684\u5b89\u88c5\u8def\u5f84\u4e0b\uff08\u7f16\u8bd1\u5b89\u88c5\u7684\u9ed8\u8ba4\u8def\u5f84\u4e3a<code>./bin/br</code>\uff09\u8fd0\u884c\u4ee5\u4e0b\u547d\u4ee4\u5bf9\u6574\u4e2a\u96c6\u7fa4\u8fdb\u884c\u5168\u91cf\u5907\u4efd\u64cd\u4f5c\u3002</p> <p>Note</p> <p>\u786e\u4fdd\u5907\u4efd\u6587\u4ef6\u7684\u8def\u5f84\u5b58\u5728\u3002</p> <pre><code>$ ./br backup full --meta &lt;ip_address&gt; --storage &lt;storage_path&gt;\n</code></pre> <p>\u4f8b\u5982\uff1a</p> <ul> <li> <p>\u8fd0\u884c\u4ee5\u4e0b\u547d\u4ee4\u5bf9 meta \u670d\u52a1\u7684\u5730\u5740\u4e3a<code>192.168.8.129:9559</code>\u7684\u6574\u4e2a\u96c6\u7fa4\u8fdb\u884c\u5168\u91cf\u5907\u4efd\u64cd\u4f5c\uff0c\u5e76\u5c06\u5907\u4efd\u6587\u4ef6\u4fdd\u5b58\u5230\u672c\u5730\u7684 <code>/home/nebula/backup/</code>\u8def\u5f84\u4e0b\u3002</p> <p>Caution</p> <p>\u5982\u679c\u6709\u591a\u4e2a metad \u5730\u5740\uff0c\u53ef\u4ee5\u4f7f\u7528\u5176\u4e2d\u4efb\u610f\u4e00\u4e2a\u3002</p> <p>Caution</p> <p>\u5907\u4efd\u81f3\u672c\u5730\u65f6\uff0c\u9ed8\u8ba4\u53ea\u5907\u4efd leader metad \u7684\u6570\u636e\uff0c\u56e0\u6b64\u5f53\u6709\u591a\u4e2a metad \u8282\u70b9\u65f6\uff0c\u9700\u8981\u624b\u52a8\u5c06\u5907\u4efd\u540e\u7684 leader metad \u7684\u76ee\u5f55\uff08\u8def\u5f84\u4e3a<code>&lt;storage_path&gt;/meta</code>\uff09\u62f7\u8d1d\u5e76\u8986\u76d6\u5176\u4ed6 follower meatd \u8282\u70b9\u7684\u5bf9\u5e94\u76ee\u5f55\u3002</p> <pre><code>$ ./br backup full --meta \"192.168.8.129:9559\" --storage \"local:///home/nebula/backup/\"\n</code></pre> </li> </ul> <ul> <li> <p>\u8fd0\u884c\u4ee5\u4e0b\u547d\u4ee4\u5bf9 meta \u670d\u52a1\u7684\u5730\u5740\u4e3a<code>192.168.8.129:9559</code>\u7684\u6574\u4e2a\u96c6\u7fa4\u8fdb\u884c\u5168\u91cf\u5907\u4efd\u64cd\u4f5c\uff0c\u5e76\u5c06\u5907\u4efd\u6587\u4ef6\u4fdd\u5b58\u5230\u517c\u5bb9 s3 \u534f\u8bae\u7684\u5bf9\u8c61\u5b58\u50a8\u670d\u52a1 <code>br-test</code> \u6876\u4e0b\u7684<code>backup</code>\u4e2d\u3002</p> <pre><code>$ ./br backup full --meta \"192.168.8.129:9559\" --s3.endpoint \"http://192.168.8.129:9000\" --storage=\"s3://br-test/backup/\" --s3.access_key=minioadmin --s3.secret_key=minioadmin --s3.region=default\n</code></pre> </li> </ul> <p>\u4ee5\u4e0b\u5217\u51fa\u547d\u4ee4\u7684\u76f8\u5173\u53c2\u6570\u3002</p> \u53c2\u6570 \u6570\u636e\u7c7b\u578b \u662f\u5426\u5fc5\u9700 \u9ed8\u8ba4\u503c \u8bf4\u660e <code>-h</code>,<code>--help</code> - \u5426 \u65e0 \u67e5\u770b\u5e2e\u52a9\u3002 <code>--debug</code> - \u5426 \u65e0 \u67e5\u770b\u66f4\u591a\u65e5\u5fd7\u4fe1\u606f\u3002 <code>--log</code> string \u5426 <code>\"br.log\"</code> \u65e5\u5fd7\u8def\u5f84\u3002 <code>--meta</code> string \u662f \u65e0 meta \u670d\u52a1\u7684\u5730\u5740\u548c\u7aef\u53e3\u53f7\u3002 <code>--spaces</code> stringArray \u5426 \u65e0 \uff08\u5b9e\u9a8c\u6027\u529f\u80fd\uff09\u6307\u5b9a\u8981\u5907\u4efd\u7684\u56fe\u7a7a\u95f4\u540d\u5b57\uff0c\u672a\u6307\u5b9a\u5c06\u5907\u4efd\u6240\u6709\u56fe\u7a7a\u95f4\u3002\u53ef\u6307\u5b9a\u591a\u4e2a\u56fe\u7a7a\u95f4\uff0c\u7528\u6cd5\u4e3a<code>--spaces nba_01 --spaces nba_02</code>\u3002 <code>--storage</code> string \u662f \u65e0 BR \u5907\u4efd\u6570\u636e\u5b58\u50a8\u4f4d\u7f6e\uff0c\u683c\u5f0f\u4e3a\uff1a<code>&lt;Schema&gt;://&lt;PATH&gt;</code> Schema\uff1a\u53ef\u9009\u503c\u4e3a <code>local</code> \u548c <code>s3</code>\u3002\u9009\u62e9 s3 \u65f6\uff0c\u9700\u8981\u586b\u5199<code>s3.access_key</code>\u3001<code>s3.endpoint</code>\u3001<code>s3.region</code>\u548c <code>s3.secret_key</code>\u3002PATH\uff1a\u5b58\u50a8\u4f4d\u7f6e\u7684\u8def\u5f84\u3002 <code>--s3.access_key</code> string \u5426 \u65e0 \u7528\u4e8e\u6807\u8bc6\u7528\u6237\u3002 <code>--s3.endpoint</code> string \u5426 \u65e0 S3 \u5bf9\u5916\u670d\u52a1\u7684\u8bbf\u95ee\u57df\u540d\u7684 URL\uff0c\u6307\u5b9a http \u6216 https\u3002 <code>--s3.region</code> string \u5426 \u65e0 \u6570\u636e\u4e2d\u5fc3\u6240\u5728\u7269\u7406\u4f4d\u7f6e\u3002 <code>--s3.secret_key</code> string \u5426 \u65e0 \u7528\u6237\u7528\u4e8e\u52a0\u5bc6\u7b7e\u540d\u5b57\u7b26\u4e32\u548c\u7528\u6765\u9a8c\u8bc1\u7b7e\u540d\u5b57\u7b26\u4e32\u7684\u5bc6\u94a5\uff0c\u5fc5\u987b\u4fdd\u5bc6\u3002"},{"location":"backup-and-restore/nebula-br/3.br-backup-data/#_3","title":"\u4e0b\u4e00\u6b65","text":"<p>\u5907\u4efd\u6587\u4ef6\u751f\u6210\u540e\uff0c\u53ef\u4ee5\u4f7f\u7528 BR \u5c06\u5907\u4efd\u6587\u4ef6\u7684\u6570\u636e\u6062\u590d\u5230 NebulaGraph \u4e2d\u3002\u5177\u4f53\u64cd\u4f5c\uff0c\u8bf7\u53c2\u89c1\u4f7f\u7528 BR \u6062\u590d\u6570\u636e\u3002</p>"},{"location":"backup-and-restore/nebula-br/4.br-restore-data/","title":"\u4f7f\u7528 BR \u6062\u590d\u6570\u636e","text":"<p>\u5982\u679c\u4f7f\u7528 BR \u5907\u4efd\u4e86 NebulaGraph \u7684\u6570\u636e\uff0c\u53ef\u4ee5\u901a\u8fc7\u5907\u4efd\u6587\u4ef6\u8fdb\u884c\u6570\u636e\u6062\u590d\u3002\u672c\u6587\u4ecb\u7ecd\u5982\u4f55\u901a\u8fc7\u5907\u4efd\u6587\u4ef6\u6062\u590d\u6570\u636e\u3002</p> <p>Caution</p> <p>\u6062\u590d\u6267\u884c\u6210\u529f\u540e\uff0c\u76ee\u6807\u96c6\u7fa4\u4e0a\u5df2\u6709\u7684\u6570\u636e\u4f1a\u88ab\u5220\u9664\uff0c\u7136\u540e\u66ff\u6362\u4e3a\u5907\u4efd\u6587\u4ef6\u4e2d\u7684\u6570\u636e\u3002\u5efa\u8bae\u63d0\u524d\u5907\u4efd\u76ee\u6807\u96c6\u7fa4\u4e0a\u7684\u6570\u636e\u3002</p> <p>Caution</p> <p>\u6570\u636e\u6062\u590d\u9700\u8981\u79bb\u7ebf\u8fdb\u884c\u3002</p>"},{"location":"backup-and-restore/nebula-br/4.br-restore-data/#_1","title":"\u51c6\u5907\u5de5\u4f5c","text":"<ul> <li>\u5b89\u88c5 BR \u548c Agent \u5e76\u5728\u96c6\u7fa4\u4e2d\u7684\u6bcf\u4e2a\u4e3b\u673a\u4e0a\u8fd0\u884c Agent\u3002</li> </ul> <ul> <li>\u786e\u8ba4\u6ca1\u6709\u5e94\u7528\u7a0b\u5e8f\u8fde\u63a5\u5230\u5f85\u6062\u590d\u6570\u636e\u7684 NebulaGraph \u96c6\u7fa4\u3002</li> </ul> <ul> <li>\u786e\u8ba4\u96c6\u7fa4\u7684\u62d3\u6251\u7ed3\u6784\u4e00\u81f4\uff0c\u5373\u539f\u96c6\u7fa4\u548c\u76ee\u6807\u96c6\u7fa4\u7684\u4e3b\u673a\u6570\u91cf\u4e00\u81f4\uff0c\u4e14\u6bcf\u4e2a\u4e3b\u673a\u6570\u636e\u6587\u4ef6\u5939\u6570\u91cf\u5206\u5e03\u4e00\u81f4\u3002</li> </ul>"},{"location":"backup-and-restore/nebula-br/4.br-restore-data/#_2","title":"\u64cd\u4f5c\u6b65\u9aa4","text":"<p>\u5728 BR \u5de5\u5177\u7684\u5b89\u88c5\u8def\u5f84\u4e0b\uff08\u7f16\u8bd1\u5b89\u88c5\u7684\u9ed8\u8ba4\u8def\u5f84\u4e3a<code>./bin/br</code>\uff09\uff0c\u5b8c\u6210\u4ee5\u4e0b\u64cd\u4f5c\u3002</p> <ol> <li> <p>\u7528\u6237\u53ef\u4ee5\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\u5217\u51fa\u73b0\u6709\u5907\u4efd\u4fe1\u606f\uff1a</p> <pre><code>$ ./br show --storage &lt;storage_path&gt;\n</code></pre> <p>\u4f8b\u5982\uff0c\u53ef\u4ee5\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\u5217\u51fa\u5728\u672c\u5730 <code>/home/nebula/backup</code> \u8def\u5f84\u4e2d\u7684\u5907\u4efd\u7684\u4fe1\u606f\u3002 <pre><code>$ ./br show --storage \"local:///home/nebula/backup\"\n+----------------------------+---------------------+------------------------+-------------+------------+\n|            NAME            |     CREATE TIME     |         SPACES         | FULL BACKUP | ALL SPACES |\n+----------------------------+---------------------+------------------------+-------------+------------+\n| BACKUP_2022_02_10_07_40_41 | 2022-02-10 07:40:41 | basketballplayer       | true        | true       |\n| BACKUP_2022_02_11_08_26_43 | 2022-02-11 08:26:47 | basketballplayer,foesa | true        | true       |\n+----------------------------+---------------------+------------------------+-------------+------------+\n</code></pre></p> <p>\u6216\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\u5217\u51fa\u5728\u517c\u5bb9 s3 \u534f\u8bae\u7684\u5bf9\u8c61\u5b58\u50a8\u670d\u52a1 <code>br-test</code> \u6876\u4e0b\u7684<code>backup</code>\u4e2d\u7684\u5907\u4efd\u7684\u4fe1\u606f\u3002 <pre><code>$ ./br show --s3.endpoint \"http://192.168.8.129:9000\" --storage=\"s3://br-test/backup/\" --s3.access_key=minioadmin --s3.secret_key=minioadmin --s3.region=default\n</code></pre></p> <p>\u4ee5\u4e0b\u5217\u51fa\u547d\u4ee4\u7684\u76f8\u5173\u53c2\u6570\u3002</p> \u53c2\u6570 \u6570\u636e\u7c7b\u578b \u662f\u5426\u5fc5\u9700 \u9ed8\u8ba4\u503c \u8bf4\u660e <code>-h,-help</code> - \u5426 \u65e0 \u67e5\u770b\u5e2e\u52a9\u3002 <code>--debug</code> - \u5426 \u65e0 \u67e5\u770b\u66f4\u591a\u65e5\u5fd7\u4fe1\u606f\u3002 <code>--log</code> string \u5426 \"br.log\" \u65e5\u5fd7\u8def\u5f84\u3002 <code>--storage</code> string \u662f \u65e0 BR \u5907\u4efd\u6570\u636e\u5b58\u50a8\u4f4d\u7f6e\uff0c\u683c\u5f0f\u4e3a\uff1a&lt;Schema&gt;://&lt;PATH&gt; Schema\uff1a\u53ef\u9009\u503c\u4e3a <code>local</code> \u548c <code>s3</code>\u3002\u9009\u62e9 s3 \u65f6\uff0c\u9700\u8981\u586b\u5199<code>s3.access_key</code>\u3001<code>s3.endpoint</code>\u3001<code>s3.region</code>\u548c <code>s3.secret_key</code>\u3002PATH\uff1a\u5b58\u50a8\u4f4d\u7f6e\u7684\u8def\u5f84\u3002 <code>--s3.access_key</code> string \u5426 \u65e0 \u7528\u4e8e\u6807\u8bc6\u7528\u6237\u3002 <code>--s3.endpoint</code> string \u5426 \u65e0 S3 \u5bf9\u5916\u670d\u52a1\u7684\u8bbf\u95ee\u57df\u540d\u7684 URL\uff0c\u6307\u5b9a http \u6216 https\u3002 <code>--s3.region</code> string \u5426 \u65e0 \u6570\u636e\u4e2d\u5fc3\u6240\u5728\u7269\u7406\u4f4d\u7f6e\u3002 <code>--s3.secret_key</code> string \u5426 \u65e0 \u7528\u6237\u7528\u4e8e\u52a0\u5bc6\u7b7e\u540d\u5b57\u7b26\u4e32\u548c\u7528\u6765\u9a8c\u8bc1\u7b7e\u540d\u5b57\u7b26\u4e32\u7684\u5bc6\u94a5\uff0c\u5fc5\u987b\u4fdd\u5bc6\u3002 </li> <li> <p>\u7528\u6237\u53ef\u4ee5\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\u6062\u590d\u6570\u636e\uff1a   <pre><code>$ ./br restore full --meta &lt;ip_address&gt; --storage &lt;storage_path&gt; --name &lt;backup_name&gt;\n</code></pre></p> <p>\u4f8b\u5982\uff0c\u53ef\u4ee5\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\uff0c\u5c06\u672c\u5730 <code>/home/nebula/backup/</code> \u8def\u5f84\u4e2d\u7684\u6570\u636e\u6062\u590d\u5230\u4e3a meta \u5730\u5740\u4e3a<code>192.168.8.129:9559</code>\u96c6\u7fa4\u4e2d\uff1a</p> <pre><code>$ ./br restore full --meta \"192.168.8.129:9559\" --storage \"local:///home/nebula/backup/\" --name BACKUP_2021_12_08_18_38_08\n</code></pre> <p>\u6216\u8005\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\uff0c\u5c06\u517c\u5bb9 s3 \u534f\u8bae\u7684\u5bf9\u8c61\u5b58\u50a8\u670d\u52a1 <code>br-test</code> \u6876\u4e0b\u7684<code>backup</code>\u7684\u5907\u4efd\uff0c\u6062\u590d\u5230 meta \u670d\u52a1\u7684\u5730\u5740\u4e3a<code>192.168.8.129:9559</code>\u7684\u96c6\u7fa4\u4e2d\u3002 <pre><code>$ ./br restore full --meta \"192.168.8.129:9559\" --s3.endpoint \"http://192.168.8.129:9000\" --storage=\"s3://br-test/backup/\" --s3.access_key=minioadmin --s3.secret_key=minioadmin --s3.region=\"default\" --name BACKUP_2021_12_08_18_38_08\n</code></pre></p> <p>\u5982\u679c\u8fd4\u56de\u5982\u4e0b\u4fe1\u606f\uff0c\u8868\u793a\u6570\u636e\u5df2\u7ecf\u6062\u590d\u6210\u529f\u3002 <pre><code>Restore succeed.\n</code></pre></p> <p>Caution</p> <p>\u5982\u679c\u7528\u6237\u65b0\u96c6\u7fa4\u7684IP\u548c\u5907\u4efd\u96c6\u7fa4\u4e0d\u540c\uff0c\u5728\u6062\u590d\u96c6\u7fa4\u540e\u9700\u8981\u4f7f\u7528<code>add host</code>\u5411\u65b0\u96c6\u7fa4\u4e2d\u6dfb\u52a0 Storage \u4e3b\u673a\u3002</p> <p>\u4ee5\u4e0b\u5217\u51fa\u547d\u4ee4\u7684\u76f8\u5173\u53c2\u6570\u3002</p> \u53c2\u6570 \u6570\u636e\u7c7b\u578b \u662f\u5426\u5fc5\u9700 \u9ed8\u8ba4\u503c \u8bf4\u660e <code>-h,-help</code> - \u5426 - \u67e5\u770b\u5e2e\u52a9\u3002 <code>--debug</code> - \u5426 \u65e0 \u67e5\u770b\u66f4\u591a\u65e5\u5fd7\u4fe1\u606f\u3002 <code>--log</code> string \u5426 \"br.log\" \u65e5\u5fd7\u8def\u5f84\u3002 <code>--meta</code> string \u662f \u65e0 meta \u670d\u52a1\u7684\u5730\u5740\u548c\u7aef\u53e3\u53f7\u3002 <code>--name</code> string \u662f \u65e0 \u5907\u4efd\u540d\u5b57\u3002 <code>--storage</code> string \u662f \u65e0 BR \u5907\u4efd\u6570\u636e\u5b58\u50a8\u4f4d\u7f6e\uff0c\u683c\u5f0f\u4e3a\uff1a&lt;Schema&gt;://&lt;PATH&gt; Schema\uff1a\u53ef\u9009\u503c\u4e3a <code>local</code> \u548c <code>s3</code>\u3002\u9009\u62e9 s3 \u65f6\uff0c\u9700\u8981\u586b\u5199<code>s3.access_key</code>\u3001<code>s3.endpoint</code>\u3001<code>s3.region</code>\u548c <code>s3.secret_key</code>\u3002PATH\uff1a\u5b58\u50a8\u4f4d\u7f6e\u7684\u8def\u5f84\u3002 <code>--s3.access_key</code> string \u5426 \u65e0 \u7528\u4e8e\u6807\u8bc6\u7528\u6237\u3002 <code>--s3.endpoint</code> string \u5426 \u65e0 S3 \u5bf9\u5916\u670d\u52a1\u7684\u8bbf\u95ee\u57df\u540d\u7684 URL\uff0c\u6307\u5b9a http \u6216 https\u3002 <code>--s3.region</code> string \u5426 \u65e0 \u6570\u636e\u4e2d\u5fc3\u6240\u5728\u7269\u7406\u4f4d\u7f6e\u3002 <code>--s3.secret_key</code> string \u5426 \u65e0 \u7528\u6237\u7528\u4e8e\u52a0\u5bc6\u7b7e\u540d\u5b57\u7b26\u4e32\u548c\u7528\u6765\u9a8c\u8bc1\u7b7e\u540d\u5b57\u7b26\u4e32\u7684\u5bc6\u94a5\uff0c\u5fc5\u987b\u4fdd\u5bc6\u3002 </li> <li> <p>\u5982\u679c\u5728\u5907\u4efd\u671f\u95f4\u53d1\u73b0\u4efb\u4f55\u9519\u8bef\uff0c\u7528\u6237\u53ef\u4ee5\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\u6e05\u7406\u4e34\u65f6\u6587\u4ef6\u3002\u8be5\u547d\u4ee4\u5c06\u6e05\u7406\u96c6\u7fa4\u548c\u5916\u90e8\u5b58\u50a8\u4e2d\u7684\u6587\u4ef6\uff0c\u540c\u65f6\u7528\u6237\u4e5f\u53ef\u4ee5\u4f7f\u7528\u8be5\u547d\u4ee4\u6e05\u7406\u5916\u90e8\u5b58\u50a8\u4e2d\u7684\u65e7\u7684\u5907\u4efd\u6587\u4ef6\u3002</p> <pre><code>$ ./br cleanup --meta &lt;ip_address&gt; --storage &lt;storage_path&gt; --name &lt;backup_name&gt;\n</code></pre> <p>\u4ee5\u4e0b\u5217\u51fa\u547d\u4ee4\u7684\u76f8\u5173\u53c2\u6570\u3002</p> \u53c2\u6570 \u6570\u636e\u7c7b\u578b \u662f\u5426\u5fc5\u9700 \u9ed8\u8ba4\u503c \u8bf4\u660e <code>-h,-help</code> - \u5426 - \u67e5\u770b\u5e2e\u52a9\u3002 <code>--debug</code> - \u5426 \u65e0 \u67e5\u770b\u66f4\u591a\u65e5\u5fd7\u4fe1\u606f\u3002 <code>--log</code> string \u5426 \"br.log\" \u65e5\u5fd7\u8def\u5f84\u3002 <code>--meta</code> string \u662f \u65e0 meta \u670d\u52a1\u7684\u5730\u5740\u548c\u7aef\u53e3\u53f7\u3002 <code>--name</code> string \u662f \u65e0 \u5907\u4efd\u540d\u5b57\u3002 <code>--storage</code> string \u662f \u65e0 BR \u5907\u4efd\u6570\u636e\u5b58\u50a8\u4f4d\u7f6e\uff0c\u683c\u5f0f\u4e3a\uff1a&lt;Schema&gt;://&lt;PATH&gt; Schema\uff1a\u53ef\u9009\u503c\u4e3a <code>local</code> \u548c <code>s3</code>\u3002\u9009\u62e9 s3 \u65f6\uff0c\u9700\u8981\u586b\u5199<code>s3.access_key</code>\u3001<code>s3.endpoint</code>\u3001<code>s3.region</code>\u548c <code>s3.secret_key</code>\u3002PATH\uff1a\u5b58\u50a8\u4f4d\u7f6e\u7684\u8def\u5f84\u3002 <code>--s3.access_key</code> string \u5426 \u65e0 \u7528\u4e8e\u6807\u8bc6\u7528\u6237\u3002 <code>--s3.endpoint</code> string \u5426 \u65e0 S3 \u5bf9\u5916\u670d\u52a1\u7684\u8bbf\u95ee\u57df\u540d\u7684 URL\uff0c\u6307\u5b9a http \u6216 https\u3002 <code>--s3.region</code> string \u5426 \u65e0 \u6570\u636e\u4e2d\u5fc3\u6240\u5728\u7269\u7406\u4f4d\u7f6e\u3002 <code>--s3.secret_key</code> string \u5426 \u65e0 \u7528\u6237\u7528\u4e8e\u52a0\u5bc6\u7b7e\u540d\u5b57\u7b26\u4e32\u548c\u7528\u6765\u9a8c\u8bc1\u7b7e\u540d\u5b57\u7b26\u4e32\u7684\u5bc6\u94a5\uff0c\u5fc5\u987b\u4fdd\u5bc6\u3002 </li> </ol>"},{"location":"connector/nebula-flink-connector/","title":"NebulaGraph Flink Connector","text":"<p>NebulaGraph Flink Connector \u662f\u4e00\u6b3e\u5e2e\u52a9 Flink \u7528\u6237\u5feb\u901f\u8bbf\u95ee NebulaGraph \u7684\u8fde\u63a5\u5668\uff0c\u652f\u6301\u4ece NebulaGraph \u56fe\u6570\u636e\u5e93\u4e2d\u8bfb\u53d6\u6570\u636e\uff0c\u6216\u8005\u5c06\u5176\u4ed6\u5916\u90e8\u6570\u636e\u6e90\u8bfb\u53d6\u7684\u6570\u636e\u5199\u5165 NebulaGraph \u56fe\u6570\u636e\u5e93\u3002</p> <p>\u66f4\u591a\u4f7f\u7528\u8bf4\u660e\u8bf7\u53c2\u89c1 NebulaGraph Flink Connector\u3002</p>"},{"location":"connector/nebula-flink-connector/#_1","title":"\u9002\u7528\u573a\u666f","text":"<p>NebulaGraph Flink Connector \u9002\u7528\u4e8e\u4ee5\u4e0b\u573a\u666f\uff1a</p> <ul> <li>\u8bfb\u53d6NebulaGraph\u6570\u636e\u8fdb\u884c\u5206\u6790\u8ba1\u7b97\u3002</li> <li>\u5206\u6790\u8ba1\u7b97\u5b8c\u7684\u6570\u636e\u5199\u5165NebulaGraph\u3002</li> <li>\u8fc1\u79fb\u6570\u636e\u3002</li> </ul>"},{"location":"connector/nebula-flink-connector/#_2","title":"\u66f4\u65b0\u8bf4\u660e","text":"<p>Release notes</p>"},{"location":"connector/nebula-spark-connector/","title":"NebulaGraph Spark Connector","text":"<p>NebulaGraph Spark Connector \u662f\u4e00\u4e2a Spark \u8fde\u63a5\u5668\uff0c\u63d0\u4f9b\u901a\u8fc7 Spark \u6807\u51c6\u5f62\u5f0f\u8bfb\u5199 NebulaGraph \u6570\u636e\u7684\u80fd\u529b\u3002NebulaGraph Spark Connector \u7531 Reader \u548c Writer \u4e24\u90e8\u5206\u7ec4\u6210\u3002</p> <ul> <li> <p>Reader</p> <p>\u63d0\u4f9b\u4e00\u4e2a Spark SQL \u63a5\u53e3\uff0c\u7528\u6237\u53ef\u4ee5\u4f7f\u7528\u8be5\u63a5\u53e3\u7f16\u7a0b\u8bfb\u53d6 NebulaGraph \u56fe\u6570\u636e\uff0c\u5355\u6b21\u8bfb\u53d6\u4e00\u4e2a\u70b9\u6216 Edge type \u7684\u6570\u636e\uff0c\u5e76\u5c06\u8bfb\u53d6\u7684\u7ed3\u679c\u7ec4\u88c5\u6210 Spark \u7684 DataFrame\u3002</p> </li> </ul> <ul> <li> <p>Writer</p> <p>\u63d0\u4f9b\u4e00\u4e2a Spark SQL \u63a5\u53e3\uff0c\u7528\u6237\u53ef\u4ee5\u4f7f\u7528\u8be5\u63a5\u53e3\u7f16\u7a0b\u5c06 DataFrame \u683c\u5f0f\u7684\u6570\u636e\u9010\u6761\u6216\u6279\u91cf\u5199\u5165 NebulaGraph \u3002</p> </li> </ul> <p>\u66f4\u591a\u4f7f\u7528\u8bf4\u660e\u8bf7\u53c2\u89c1 NebulaGraph Spark Connector\u3002</p>"},{"location":"connector/nebula-spark-connector/#_1","title":"\u7248\u672c\u517c\u5bb9\u6027","text":"<p>NebulaGraph Spark Connector\u3001 NebulaGraph \u5185\u6838\u7248\u672c\u548c Spark \u7248\u672c\u5bf9\u5e94\u5173\u7cfb\u5982\u4e0b\u3002</p> Spark Connector \u7248\u672c NebulaGraph \u7248\u672c Spark \u7248\u672c nebula-spark-connector_3.0-3.0-SNAPSHOT.jar nightly 3.x nebula-spark-connector_2.2-3.0-SNAPSHOT.jar nightly 2.2.x nebula-spark-connector-3.0-SNAPSHOT.jar nightly 2.4.x nebula-spark-connector_3.0-3.6.0.jar 3.x 3.x nebula-spark-connector_2.2-3.6.0.jar 3.x 2.2.x nebula-spark-connector-3.6.0.jar 3.x 2.4.x nebula-spark-connector_2.2-3.4.0.jar 3.x 2.2.x nebula-spark-connector-3.4.0.jar 3.x 2.4.x nebula-spark-connector_2.2-3.3.0.jar 3.x 2.2.x nebula-spark-connector-3.3.0.jar 3.x 2.4.x nebula-spark-connector-3.0.0.jar 3.x 2.4.x nebula-spark-connector-2.6.1.jar 2.6.0, 2.6.1 2.4.x nebula-spark-connector-2.6.0.jar 2.6.0, 2.6.1 2.4.x nebula-spark-connector-2.5.1.jar 2.5.0, 2.5.1 2.4.x nebula-spark-connector-2.5.0.jar 2.5.0, 2.5.1 2.4.x nebula-spark-connector-2.1.0.jar 2.0.0, 2.0.1 2.4.x nebula-spark-connector-2.0.1.jar 2.0.0, 2.0.1 2.4.x nebula-spark-connector-2.0.0.jar 2.0.0, 2.0.1 2.4.x"},{"location":"connector/nebula-spark-connector/#_2","title":"\u9002\u7528\u573a\u666f","text":"<p>NebulaGraph Spark Connector \u9002\u7528\u4e8e\u4ee5\u4e0b\u573a\u666f\uff1a</p> <ul> <li>\u8bfb\u53d6NebulaGraph\u6570\u636e\u8fdb\u884c\u5206\u6790\u8ba1\u7b97\u3002</li> <li>\u5206\u6790\u8ba1\u7b97\u5b8c\u7684\u6570\u636e\u5199\u5165NebulaGraph\u3002</li> <li>\u8fc1\u79fbNebulaGraph\u6570\u636e\u3002</li> <li>\u7ed3\u5408 NebulaGraph Algorithm \u8fdb\u884c\u56fe\u8ba1\u7b97\u3002</li> </ul>"},{"location":"connector/nebula-spark-connector/#_3","title":"\u7279\u6027","text":"<p>NebulaGraph Spark Connector 3.6.0\u7248\u672c\u7279\u6027\u5982\u4e0b\uff1a</p> <ul> <li>\u63d0\u4f9b\u591a\u79cd\u8fde\u63a5\u914d\u7f6e\u9879\uff0c\u5982\u8d85\u65f6\u65f6\u95f4\u3001\u8fde\u63a5\u91cd\u8bd5\u6b21\u6570\u3001\u6267\u884c\u91cd\u8bd5\u6b21\u6570\u7b49\u3002</li> </ul> <ul> <li>\u63d0\u4f9b\u591a\u79cd\u6570\u636e\u914d\u7f6e\u9879\uff0c\u5982\u5199\u5165\u6570\u636e\u65f6\u8bbe\u7f6e\u5bf9\u5e94\u5217\u4e3a\u70b9 ID\u3001\u8d77\u59cb\u70b9 ID\u3001\u76ee\u7684\u70b9 ID \u6216\u5c5e\u6027\u3002</li> </ul> <ul> <li>Reader \u652f\u6301\u65e0\u5c5e\u6027\u8bfb\u53d6\u548c\u5168\u5c5e\u6027\u8bfb\u53d6\u3002</li> </ul> <ul> <li>Reader \u652f\u6301\u5c06 NebulaGraph \u6570\u636e\u8bfb\u53d6\u6210 Graphx \u7684 VertexRDD \u548c EdgeRDD\uff0c\u652f\u6301\u975e Long \u578b\u70b9 ID\u3002</li> </ul> <ul> <li>\u7edf\u4e00\u4e86 SparkSQL \u7684\u6269\u5c55\u6570\u636e\u6e90\uff0c\u7edf\u4e00\u91c7\u7528 DataSourceV2 \u8fdb\u884c NebulaGraph \u6570\u636e\u6269\u5c55\u3002</li> </ul> <ul> <li>\u652f\u6301<code>insert</code>\u3001<code>update</code>\u548c<code>delete</code>\u4e09\u79cd\u5199\u5165\u6a21\u5f0f\u3002<code>insert</code>\u6a21\u5f0f\u4f1a\u63d2\u5165\uff08\u8986\u76d6\uff09\u6570\u636e\uff0c<code>update</code>\u6a21\u5f0f\u4ec5\u4f1a\u66f4\u65b0\u5df2\u5b58\u5728\u7684\u6570\u636e\uff0c<code>delete</code>\u6a21\u5f0f\u53ea\u5220\u9664\u6570\u636e\u3002</li> </ul> <ul> <li>\u652f\u6301\u4e0e NebulaGraph \u4e4b\u95f4\u7684 SSL \u52a0\u5bc6\u8fde\u63a5\u3002</li> </ul>"},{"location":"connector/nebula-spark-connector/#_4","title":"\u66f4\u65b0\u8bf4\u660e","text":"<p>Release notes</p>"},{"location":"connector/nebula-spark-connector/#nebulagraph_spark_connector_1","title":"\u83b7\u53d6 NebulaGraph Spark Connector","text":""},{"location":"connector/nebula-spark-connector/#_5","title":"\u7f16\u8bd1\u6253\u5305","text":"<ol> <li> <p>\u514b\u9686\u4ed3\u5e93<code>nebula-spark-connector</code>\u3002</p> <pre><code>$ git clone -b release-3.6 https://github.com/vesoft-inc/nebula-spark-connector.git\n</code></pre> </li> <li> <p>\u8fdb\u5165\u76ee\u5f55<code>nebula-spark-connector</code>\u3002</p> </li> <li> <p>\u7f16\u8bd1\u6253\u5305\u3002\u4e0d\u540c\u7248\u672c\u7684 Spark \u547d\u4ee4\u7565\u6709\u4e0d\u540c\u3002</p> <p>Note</p> <p>\u9700\u5df2\u5b89\u88c5\u5bf9\u5e94\u7248\u672c Spark\u3002</p> <ul> <li> <p>Spark 2.4</p> <pre><code>$ mvn clean package -Dmaven.test.skip=true -Dgpg.skip -Dmaven.javadoc.skip=true -pl nebula-spark-connector -am -Pscala-2.11 -Pspark-2.4\n</code></pre> </li> </ul> <ul> <li> <p>Spark 2.2</p> <pre><code>$ mvn clean package -Dmaven.test.skip=true -Dgpg.skip -Dmaven.javadoc.skip=true -pl nebula-spark-connector_2.2 -am -Pscala-2.11 -Pspark-2.2\n</code></pre> </li> </ul> <ul> <li> <p>Spark 3.x</p> <pre><code>$ mvn clean package -Dmaven.test.skip=true -Dgpg.skip -Dmaven.javadoc.skip=true -pl nebula-spark-connector_3.0 -am -Pscala-2.12 -Pspark-3.0\n</code></pre> </li> </ul> </li> </ol> <p>\u7f16\u8bd1\u5b8c\u6210\u540e\uff0c\u5728\u76ee\u5f55\u7684\u6587\u4ef6\u5939<code>target</code>\u4e0b\u751f\u6210\u7c7b\u4f3c\u6587\u4ef6<code>nebula-spark-connector-3.6.0-SHANPSHOT.jar</code>\u3002</p>"},{"location":"connector/nebula-spark-connector/#maven","title":"Maven \u8fdc\u7a0b\u4ed3\u5e93\u4e0b\u8f7d","text":"<p>\u4e0b\u8f7d\u5730\u5740</p>"},{"location":"connector/nebula-spark-connector/#_6","title":"\u4f7f\u7528\u65b9\u6cd5","text":"<p>\u4f7f\u7528 NebulaGraph Spark Connector \u8bfb\u5199 NebulaGraph \u65f6\uff0c\u53ea\u9700\u8981\u7f16\u5199\u4ee5\u4e0b\u4ee3\u7801\u5373\u53ef\u5b9e\u73b0\u3002</p> <pre><code># \u4ece NebulaGraph \u8bfb\u53d6\u70b9\u8fb9\u6570\u636e\u3002\nspark.read.nebula().loadVerticesToDF()\nspark.read.nebula().loadEdgesToDF()\n\n# \u5c06 dataframe \u6570\u636e\u4f5c\u4e3a\u70b9\u548c\u8fb9\u5199\u5165 NebulaGraph \u4e2d\u3002\ndataframe.write.nebula().writeVertices()\ndataframe.write.nebula().writeEdges()\n</code></pre> <p><code>nebula()</code>\u63a5\u6536\u4e24\u4e2a\u914d\u7f6e\u53c2\u6570\uff0c\u5305\u62ec\u8fde\u63a5\u914d\u7f6e\u548c\u8bfb\u5199\u914d\u7f6e\u3002</p> <p>Note</p> <p>\u5982\u679c\u6570\u636e\u7684\u5c5e\u6027\u503c\u5305\u542b\u4e2d\u6587\u5b57\u7b26\uff0c\u53ef\u80fd\u51fa\u73b0\u4e71\u7801\u3002\u8bf7\u5728\u63d0\u4ea4 Spark \u4efb\u52a1\u65f6\u52a0\u4e0a\u4ee5\u4e0b\u9009\u9879\uff1a</p> <pre><code>--conf spark.driver.extraJavaOptions=-Dfile.encoding=utf-8\n--conf spark.executor.extraJavaOptions=-Dfile.encoding=utf-8\n</code></pre>"},{"location":"connector/nebula-spark-connector/#nebulagraph","title":"\u4ece NebulaGraph \u8bfb\u53d6\u6570\u636e","text":"<pre><code>val config = NebulaConnectionConfig\n  .builder()\n  .withMetaAddress(\"127.0.0.1:9559\")\n  .withConenctionRetry(2)\n  .withExecuteRetry(2)\n  .withTimeout(6000)\n  .build()\n\nval nebulaReadVertexConfig: ReadNebulaConfig = ReadNebulaConfig\n  .builder()\n  .withSpace(\"test\")\n  .withLabel(\"person\")\n  .withNoColumn(false)\n  .withReturnCols(List(\"birthday\"))\n  .withLimit(10)\n  .withPartitionNum(10)\n  .build()\nval vertex = spark.read.nebula(config, nebulaReadVertexConfig).loadVerticesToDF()\n\nval nebulaReadEdgeConfig: ReadNebulaConfig = ReadNebulaConfig\n  .builder()\n  .withSpace(\"test\")\n  .withLabel(\"knows\")\n  .withNoColumn(false)\n  .withReturnCols(List(\"degree\"))\n  .withLimit(10)\n  .withPartitionNum(10)\n  .build()\nval edge = spark.read.nebula(config, nebulaReadEdgeConfig).loadEdgesToDF()\n</code></pre> <ul> <li> <p><code>NebulaConnectionConfig</code>\u662f\u8fde\u63a5 NebulaGraph \u7684\u914d\u7f6e\uff0c\u8bf4\u660e\u5982\u4e0b\u3002</p> \u53c2\u6570 \u662f\u5426\u5fc5\u987b \u8bf4\u660e <code>withMetaAddress</code> \u662f \u6240\u6709 Meta \u670d\u52a1\u7684\u5730\u5740\uff0c\u591a\u4e2a\u5730\u5740\u7528\u82f1\u6587\u9017\u53f7\uff08,\uff09\u9694\u5f00\uff0c\u683c\u5f0f\u4e3a<code>ip1:port1,ip2:port2,...</code>\u3002\u8bfb\u53d6\u6570\u636e\u4e0d\u9700\u8981\u914d\u7f6e<code>withGraphAddress</code>\u3002 <code>withConnectionRetry</code> \u5426 NebulaGraph Java Client \u8fde\u63a5 NebulaGraph \u7684\u91cd\u8bd5\u6b21\u6570\u3002\u9ed8\u8ba4\u503c\u4e3a<code>1</code>\u3002 <code>withExecuteRetry</code> \u5426 NebulaGraph Java Client \u6267\u884c\u67e5\u8be2\u8bed\u53e5\u7684\u91cd\u8bd5\u6b21\u6570\u3002\u9ed8\u8ba4\u503c\u4e3a<code>1</code>\u3002 <code>withTimeout</code> \u5426 NebulaGraph Java Client \u8bf7\u6c42\u54cd\u5e94\u7684\u8d85\u65f6\u65f6\u95f4\u3002\u9ed8\u8ba4\u503c\u4e3a<code>6000</code>\uff0c\u5355\u4f4d\uff1a\u6beb\u79d2\uff08ms\uff09\u3002 </li> </ul> <ul> <li> <p><code>ReadNebulaConfig</code>\u662f\u8bfb\u53d6 NebulaGraph \u6570\u636e\u7684\u914d\u7f6e\uff0c\u8bf4\u660e\u5982\u4e0b\u3002</p> \u53c2\u6570 \u662f\u5426\u5fc5\u987b \u8bf4\u660e <code>withSpace</code> \u662f NebulaGraph \u56fe\u7a7a\u95f4\u540d\u79f0\u3002 <code>withLabel</code> \u662f NebulaGraph \u56fe\u7a7a\u95f4\u5185\u7684 Tag \u6216 Edge type \u540d\u79f0\u3002 <code>withNoColumn</code> \u5426 \u662f\u5426\u4e0d\u8bfb\u53d6\u5c5e\u6027\u3002\u9ed8\u8ba4\u503c\u4e3a<code>false</code>\uff0c\u8868\u793a\u8bfb\u53d6\u5c5e\u6027\u3002\u53d6\u503c\u4e3a<code>true</code>\u65f6\uff0c\u8868\u793a\u4e0d\u8bfb\u53d6\u5c5e\u6027\uff0c\u6b64\u65f6<code>withReturnCols</code>\u914d\u7f6e\u65e0\u6548\u3002 <code>withReturnCols</code> \u5426 \u914d\u7f6e\u8981\u8bfb\u53d6\u7684\u70b9\u6216\u8fb9\u7684\u5c5e\u6027\u96c6\u3002\u683c\u5f0f\u4e3a<code>List(property1,property2,...)</code>\uff0c\u9ed8\u8ba4\u503c\u4e3a<code>List()</code>\uff0c\u8868\u793a\u8bfb\u53d6\u5168\u90e8\u5c5e\u6027\u3002 <code>withLimit</code> \u5426 \u914d\u7f6e NebulaGraph Java Storage Client \u4e00\u6b21\u4ece\u670d\u52a1\u7aef\u8bfb\u53d6\u7684\u6570\u636e\u884c\u6570\u3002\u9ed8\u8ba4\u503c\u4e3a 1000\u3002 <code>withPartitionNum</code> \u5426 \u914d\u7f6e\u8bfb\u53d6 NebulaGraph \u6570\u636e\u65f6 Spark \u7684\u5206\u533a\u6570\u3002\u9ed8\u8ba4\u503c\u4e3a 100\u3002\u8be5\u503c\u7684\u914d\u7f6e\u6700\u597d\u4e0d\u8d85\u8fc7\u56fe\u7a7a\u95f4\u7684\u7684\u5206\u7247\u6570\u91cf\uff08partition_num\uff09\u3002 </li> </ul>"},{"location":"connector/nebula-spark-connector/#nebulagraph_1","title":"\u5411 NebulaGraph \u5199\u5165\u6570\u636e","text":"<p>Note</p> <p>DataFrame \u4e2d\u7684\u5217\u4f1a\u81ea\u52a8\u4f5c\u4e3a\u5c5e\u6027\u5199\u5165 NebulaGraph \u3002</p> <pre><code>val config = NebulaConnectionConfig\n  .builder()\n  .withMetaAddress(\"127.0.0.1:9559\")\n  .withGraphAddress(\"127.0.0.1:9669\")\n  .withConenctionRetry(2)\n  .build()\n\nval nebulaWriteVertexConfig: WriteNebulaVertexConfig = WriteNebulaVertexConfig      \n  .builder()\n  .withSpace(\"test\")\n  .withTag(\"person\")\n  .withVidField(\"id\")\n  .withVidPolicy(\"hash\")\n  .withVidAsProp(true)\n  .withUser(\"root\")\n  .withPasswd(\"nebula\")\n  .withBatch(512)\n  .build()    \ndf.write.nebula(config, nebulaWriteVertexConfig).writeVertices()\n\nval nebulaWriteEdgeConfig: WriteNebulaEdgeConfig = WriteNebulaEdgeConfig      \n  .builder()\n  .withSpace(\"test\")\n  .withEdge(\"friend\")\n  .withSrcIdField(\"src\")\n  .withSrcPolicy(null)\n  .withDstIdField(\"dst\")\n  .withDstPolicy(null)\n  .withRankField(\"degree\")\n  .withSrcAsProperty(true)\n  .withDstAsProperty(true)\n  .withRankAsProperty(true)\n  .withUser(\"root\")\n  .withPasswd(\"nebula\")\n  .withBatch(512)\n  .build()\ndf.write.nebula(config, nebulaWriteEdgeConfig).writeEdges()\n</code></pre> <p>\u9ed8\u8ba4\u5199\u5165\u6a21\u5f0f\u4e3a<code>insert</code>\uff0c\u53ef\u4ee5\u901a\u8fc7<code>withWriteMode</code>\u914d\u7f6e\u4fee\u6539\u4e3a<code>update</code>\u6216<code>delete</code>\uff1a</p> <pre><code>val config = NebulaConnectionConfig\n  .builder()\n  .withMetaAddress(\"127.0.0.1:9559\")\n  .withGraphAddress(\"127.0.0.1:9669\")\n  .build()\nval nebulaWriteVertexConfig = WriteNebulaVertexConfig\n  .builder()\n  .withSpace(\"test\")\n  .withTag(\"person\")\n  .withVidField(\"id\")\n  .withVidAsProp(true)\n  .withBatch(512)\n  .withWriteMode(WriteMode.UPDATE)\n  .build()\ndf.write.nebula(config, nebulaWriteVertexConfig).writeVertices()\n</code></pre> <ul> <li> <p><code>NebulaConnectionConfig</code>\u662f\u8fde\u63a5 NebulaGraph \u7684\u914d\u7f6e\uff0c\u8bf4\u660e\u5982\u4e0b\u3002</p> \u53c2\u6570 \u662f\u5426\u5fc5\u987b \u8bf4\u660e <code>withMetaAddress</code> \u662f \u6240\u6709 Meta \u670d\u52a1\u7684\u5730\u5740\uff0c\u591a\u4e2a\u5730\u5740\u7528\u82f1\u6587\u9017\u53f7\uff08,\uff09\u9694\u5f00\uff0c\u683c\u5f0f\u4e3a<code>ip1:port1,ip2:port2,...</code>\u3002 <code>withGraphAddress</code> \u662f Graph \u670d\u52a1\u7684\u5730\u5740\uff0c\u591a\u4e2a\u5730\u5740\u7528\u82f1\u6587\u9017\u53f7\uff08,\uff09\u9694\u5f00\uff0c\u683c\u5f0f\u4e3a<code>ip1:port1,ip2:port2,...</code>\u3002 <code>withConnectionRetry</code> \u5426 NebulaGraph Java Client \u8fde\u63a5 NebulaGraph \u7684\u91cd\u8bd5\u6b21\u6570\u3002\u9ed8\u8ba4\u503c\u4e3a<code>1</code>\u3002 </li> </ul> <ul> <li> <p><code>WriteNebulaVertexConfig</code>\u662f\u5199\u5165\u70b9\u7684\u914d\u7f6e\uff0c\u8bf4\u660e\u5982\u4e0b\u3002</p> \u53c2\u6570 \u662f\u5426\u5fc5\u987b \u8bf4\u660e <code>withSpace</code> \u662f NebulaGraph \u56fe\u7a7a\u95f4\u540d\u79f0\u3002 <code>withTag</code> \u662f \u5199\u5165\u70b9\u65f6\u9700\u8981\u5173\u8054\u7684 Tag \u540d\u79f0\u3002 <code>withVidField</code> \u662f DataFrame \u4e2d\u4f5c\u4e3a\u70b9 ID \u7684\u5217\u3002 <code>withVidPolicy</code> \u5426 \u5199\u5165\u70b9 ID \u65f6\uff0c\u91c7\u7528\u7684\u6620\u5c04\u51fd\u6570\uff0cNebulaGraph \u4ec5\u652f\u6301 HASH\u3002\u9ed8\u8ba4\u4e0d\u505a\u6620\u5c04\u3002 <code>withVidAsProp</code> \u5426 DataFrame \u4e2d\u4f5c\u4e3a\u70b9 ID \u7684\u5217\u662f\u5426\u4e5f\u4f5c\u4e3a\u5c5e\u6027\u5199\u5165\u3002\u9ed8\u8ba4\u503c\u4e3a<code>false</code>\u3002\u5982\u679c\u914d\u7f6e\u4e3a<code>true</code>\uff0c\u8bf7\u786e\u4fdd Tag \u4e2d\u6709\u548c<code>VidField</code>\u76f8\u540c\u7684\u5c5e\u6027\u540d\u3002 <code>withUser</code> \u5426 NebulaGraph \u7528\u6237\u540d\u3002\u82e5\u672a\u5f00\u542f\u8eab\u4efd\u9a8c\u8bc1\uff0c\u65e0\u9700\u914d\u7f6e\u7528\u6237\u540d\u548c\u5bc6\u7801\u3002 <code>withPasswd</code> \u5426 NebulaGraph \u7528\u6237\u540d\u5bf9\u5e94\u7684\u5bc6\u7801\u3002 <code>withBatch</code> \u662f \u4e00\u6b21\u5199\u5165\u7684\u6570\u636e\u884c\u6570\uff0c\u9ed8\u8ba4\u503c\u4e3a<code>512</code>\u3002\u5f53<code>withWriteMode</code>\u4e3a<code>update</code>\u65f6\uff0c\u8be5\u53c2\u6570\u7684\u6700\u5927\u503c\u4e3a<code>512</code>\u3002 <code>withWriteMode</code> \u5426 \u5199\u5165\u6a21\u5f0f\u3002\u53ef\u9009\u503c\u4e3a<code>insert</code>\u3001<code>update</code>\u548c<code>delete</code>\u3002\u9ed8\u8ba4\u4e3a<code>insert</code>\u3002 <code>withDeleteEdge</code> \u5426 \u5220\u9664\u70b9\u65f6\u662f\u5426\u5220\u9664\u8be5\u70b9\u5173\u8054\u7684\u8fb9\u3002\u9ed8\u8ba4\u4e3a<code>false</code>\u3002\u5f53<code>withWriteMode</code>\u4e3a<code>delete</code>\u65f6\u751f\u6548\u3002 </li> </ul> <ul> <li> <p><code>WriteNebulaEdgeConfig</code>\u662f\u5199\u5165\u8fb9\u7684\u914d\u7f6e\uff0c\u8bf4\u660e\u5982\u4e0b\u3002</p> \u53c2\u6570 \u662f\u5426\u5fc5\u987b \u8bf4\u660e <code>withSpace</code> \u662f NebulaGraph \u56fe\u7a7a\u95f4\u540d\u79f0\u3002 <code>withEdge</code> \u662f \u5199\u5165\u8fb9\u65f6\u9700\u8981\u5173\u8054\u7684 Edge type \u540d\u79f0\u3002 <code>withSrcIdField</code> \u662f DataFrame \u4e2d\u4f5c\u4e3a\u8d77\u59cb\u70b9\u7684\u5217\u3002 <code>withSrcPolicy</code> \u5426 \u5199\u5165\u8d77\u59cb\u70b9\u65f6\uff0c\u91c7\u7528\u7684\u6620\u5c04\u51fd\u6570\uff0cNebulaGraph \u4ec5\u652f\u6301 HASH\u3002\u9ed8\u8ba4\u4e0d\u505a\u6620\u5c04\u3002 <code>withDstIdField</code> \u662f DataFrame \u4e2d\u4f5c\u4e3a\u76ee\u7684\u70b9\u7684\u5217\u3002 <code>withDstPolicy</code> \u5426 \u5199\u5165\u76ee\u7684\u70b9\u65f6\uff0c\u91c7\u7528\u7684\u6620\u5c04\u51fd\u6570\uff0cNebulaGraph \u4ec5\u652f\u6301 HASH\u3002\u9ed8\u8ba4\u4e0d\u505a\u6620\u5c04\u3002 <code>withRankField</code> \u5426 DataFrame \u4e2d\u4f5c\u4e3a rank \u7684\u5217\u3002\u9ed8\u8ba4\u4e0d\u5199\u5165 rank\u3002 <code>withSrcAsProperty</code> \u5426 DataFrame \u4e2d\u4f5c\u4e3a\u8d77\u59cb\u70b9\u7684\u5217\u662f\u5426\u4e5f\u4f5c\u4e3a\u5c5e\u6027\u5199\u5165\u3002\u9ed8\u8ba4\u503c\u4e3a<code>false</code>\u3002\u5982\u679c\u914d\u7f6e\u4e3a<code>true</code>\uff0c\u8bf7\u786e\u4fdd Edge type \u4e2d\u6709\u548c<code>SrcIdField</code>\u76f8\u540c\u7684\u5c5e\u6027\u540d\u3002 <code>withDstAsProperty</code> \u5426 DataFrame \u4e2d\u4f5c\u4e3a\u76ee\u7684\u70b9\u7684\u5217\u662f\u5426\u4e5f\u4f5c\u4e3a\u5c5e\u6027\u5199\u5165\u3002\u9ed8\u8ba4\u503c\u4e3a<code>false</code>\u3002\u5982\u679c\u914d\u7f6e\u4e3a<code>true</code>\uff0c\u8bf7\u786e\u4fdd Edge type \u4e2d\u6709\u548c<code>DstIdField</code>\u76f8\u540c\u7684\u5c5e\u6027\u540d\u3002 <code>withRankAsProperty</code> \u5426 DataFrame \u4e2d\u4f5c\u4e3a rank \u7684\u5217\u662f\u5426\u4e5f\u4f5c\u4e3a\u5c5e\u6027\u5199\u5165\u3002\u9ed8\u8ba4\u503c\u4e3a<code>false</code>\u3002\u5982\u679c\u914d\u7f6e\u4e3a<code>true</code>\uff0c\u8bf7\u786e\u4fdd Edge type \u4e2d\u6709\u548c<code>RankField</code>\u76f8\u540c\u7684\u5c5e\u6027\u540d\u3002 <code>withUser</code> \u5426 NebulaGraph \u7528\u6237\u540d\u3002\u82e5\u672a\u5f00\u542f\u8eab\u4efd\u9a8c\u8bc1\uff0c\u65e0\u9700\u914d\u7f6e\u7528\u6237\u540d\u548c\u5bc6\u7801\u3002 <code>withPasswd</code> \u5426 NebulaGraph \u7528\u6237\u540d\u5bf9\u5e94\u7684\u5bc6\u7801\u3002 <code>withBatch</code> \u662f \u4e00\u6b21\u5199\u5165\u7684\u6570\u636e\u884c\u6570\uff0c\u9ed8\u8ba4\u503c\u4e3a<code>512</code>\u3002\u5f53<code>withWriteMode</code>\u4e3a<code>update</code>\u65f6\uff0c\u8be5\u53c2\u6570\u7684\u6700\u5927\u503c\u4e3a<code>512</code>\u3002 <code>withWriteMode</code> \u5426 \u5199\u5165\u6a21\u5f0f\u3002\u53ef\u9009\u503c\u4e3a<code>insert</code>\u3001<code>update</code>\u548c<code>delete</code>\u3002\u9ed8\u8ba4\u4e3a<code>insert</code>\u3002 </li> </ul>"},{"location":"connector/nebula-spark-connector/#_7","title":"\u793a\u4f8b\u4ee3\u7801","text":"<p>\u8be6\u7ec6\u7684\u4f7f\u7528\u65b9\u5f0f\u53c2\u89c1 \u793a\u4f8b\u4ee3\u7801\u3002</p>"},{"location":"graph-computing/nebula-algorithm/","title":"NebulaGraph Algorithm","text":"<p>NebulaGraph Algorithm \uff08\u7b80\u79f0 Algorithm\uff09\u662f\u4e00\u6b3e\u57fa\u4e8e GraphX \u7684 Spark \u5e94\u7528\u7a0b\u5e8f\uff0c\u901a\u8fc7\u63d0\u4ea4 Spark \u4efb\u52a1\u7684\u5f62\u5f0f\u4f7f\u7528\u5b8c\u6574\u7684\u7b97\u6cd5\u5de5\u5177\u5bf9 NebulaGraph \u6570\u636e\u5e93\u4e2d\u7684\u6570\u636e\u6267\u884c\u56fe\u8ba1\u7b97\uff0c\u4e5f\u53ef\u4ee5\u901a\u8fc7\u7f16\u7a0b\u5f62\u5f0f\u8c03\u7528 lib \u5e93\u4e0b\u7684\u7b97\u6cd5\u9488\u5bf9 DataFrame \u6267\u884c\u56fe\u8ba1\u7b97\u3002</p>"},{"location":"graph-computing/nebula-algorithm/#_1","title":"\u7248\u672c\u517c\u5bb9\u6027","text":"<p>NebulaGraph Algorithm \u7248\u672c\u548c NebulaGraph \u5185\u6838\u7684\u7248\u672c\u5bf9\u5e94\u5173\u7cfb\u5982\u4e0b\u3002</p> NebulaGraph \u7248\u672c NebulaGraph Algorithm \u7248\u672c nightly 3.0-SNAPSHOT 3.0.0 ~ 3.6.x 3.x.0 2.6.x 2.6.x 2.5.0\u30012.5.1 2.5.0 2.0.0\u30012.0.1 2.1.0"},{"location":"graph-computing/nebula-algorithm/#_2","title":"\u524d\u63d0\u6761\u4ef6","text":"<p>\u5728\u4f7f\u7528 Algorithm \u4e4b\u524d\uff0c\u7528\u6237\u9700\u8981\u786e\u8ba4\u4ee5\u4e0b\u4fe1\u606f\uff1a</p> <ul> <li>NebulaGraph \u670d\u52a1\u5df2\u7ecf\u90e8\u7f72\u5e76\u542f\u52a8\u3002\u8be6\u7ec6\u4fe1\u606f\uff0c\u53c2\u8003 NebulaGraph \u5b89\u88c5\u90e8\u7f72\u3002</li> </ul> <ul> <li>Spark \u7248\u672c\u4e3a 2.4.x\u3002</li> </ul> <ul> <li>Scala \u7248\u672c\u4e3a 2.11\u3002</li> </ul> <ul> <li>\uff08\u53ef\u9009\uff09\u5982\u679c\u7528\u6237\u9700\u8981\u5728 Github \u4e2d\u514b\u9686\u6700\u65b0\u7684 Algorithm\uff0c\u5e76\u81ea\u884c\u7f16\u8bd1\u6253\u5305\uff0c\u53ef\u4ee5\u9009\u62e9\u5b89\u88c5 Maven\u3002</li> </ul>"},{"location":"graph-computing/nebula-algorithm/#_3","title":"\u4f7f\u7528\u9650\u5236","text":"<p>\u56fe\u8ba1\u7b97\u4f1a\u8f93\u51fa\u70b9\u7684\u6570\u636e\u96c6\uff0c\u7b97\u6cd5\u7ed3\u679c\u4f1a\u4ee5DataFrame\u5f62\u5f0f\u4f5c\u4e3a\u70b9\u7684\u5c5e\u6027\u5b58\u50a8\u3002\u7528\u6237\u53ef\u4ee5\u6839\u636e\u4e1a\u52a1\u9700\u6c42\uff0c\u81ea\u884c\u5bf9\u7b97\u6cd5\u7ed3\u679c\u505a\u8fdb\u4e00\u6b65\u64cd\u4f5c\uff0c\u4f8b\u5982\u7edf\u8ba1\u3001\u7b5b\u9009\u3002</p> <p>Compatibility</p> <p>Algorithm v3.1.0 \u7248\u672c\u4e4b\u524d\uff0c\u76f4\u63a5\u63d0\u4ea4\u7b97\u6cd5\u5305\u65f6\uff0c\u70b9 ID \u7684\u6570\u636e\u5fc5\u987b\u4e3a\u6574\u6570\uff0c\u5373\u70b9 ID \u53ef\u4ee5\u662f INT \u7c7b\u578b\uff0c\u6216\u8005\u662f String \u7c7b\u578b\u4f46\u6570\u636e\u672c\u8eab\u4e3a\u6574\u6570\u3002</p>"},{"location":"graph-computing/nebula-algorithm/#_4","title":"\u652f\u6301\u7b97\u6cd5","text":"<p>NebulaGraph Algorithm \u652f\u6301\u7684\u56fe\u8ba1\u7b97\u7b97\u6cd5\u5982\u4e0b\u3002</p> \u7b97\u6cd5\u540d \u8bf4\u660e \u5e94\u7528\u573a\u666f \u5c5e\u6027\u540d\u79f0 \u5c5e\u6027\u6570\u636e\u7c7b\u578b PageRank \u9875\u9762\u6392\u5e8f \u7f51\u9875\u6392\u5e8f\u3001\u91cd\u70b9\u8282\u70b9\u6316\u6398 pagerank double/string Louvain \u9c81\u6c76 \u793e\u56e2\u6316\u6398\u3001\u5c42\u6b21\u5316\u805a\u7c7b louvain int/string KCore K \u6838 \u793e\u533a\u53d1\u73b0\u3001\u91d1\u878d\u98ce\u63a7 kcore int/string LabelPropagation \u6807\u7b7e\u4f20\u64ad \u8d44\u8baf\u4f20\u64ad\u3001\u5e7f\u544a\u63a8\u8350\u3001\u793e\u533a\u53d1\u73b0 lpa int/string Hanp \u6807\u7b7e\u4f20\u64ad\u8fdb\u9636\u7248 \u793e\u533a\u53d1\u73b0\u3001\u63a8\u8350 hanp int/string ConnectedComponent \u5f31\u8054\u901a\u5206\u91cf \u793e\u533a\u53d1\u73b0\u3001\u5b64\u5c9b\u53d1\u73b0 cc int/string StronglyConnectedComponent \u5f3a\u8054\u901a\u5206\u91cf \u793e\u533a\u53d1\u73b0 scc int/string ShortestPath \u6700\u77ed\u8def\u5f84 \u8def\u5f84\u89c4\u5212\u3001\u7f51\u7edc\u89c4\u5212 shortestpath string TriangleCount \u4e09\u89d2\u5f62\u8ba1\u6570 \u7f51\u7edc\u7ed3\u6784\u5206\u6790 trianglecount int/string GraphTriangleCount \u5168\u56fe\u4e09\u89d2\u5f62\u8ba1\u6570 \u7f51\u7edc\u7ed3\u6784\u53ca\u7d27\u5bc6\u7a0b\u5ea6\u5206\u6790 count int BetweennessCentrality \u4e2d\u4ecb\u4e2d\u5fc3\u6027 \u5173\u952e\u8282\u70b9\u6316\u6398\uff0c\u8282\u70b9\u5f71\u54cd\u529b\u8ba1\u7b97 betweenness double/string ClosenessCentrality \u7d27\u5bc6\u4e2d\u5fc3\u6027 \u5173\u952e\u8282\u70b9\u6316\u6398\u3001\u8282\u70b9\u5f71\u54cd\u529b\u8ba1\u7b97 closeness double/string DegreeStatic \u5ea6\u7edf\u8ba1 \u56fe\u7ed3\u6784\u5206\u6790 degree,inDegree,outDegree int/string ClusteringCoefficient \u805a\u96c6\u7cfb\u6570 \u63a8\u8350\u3001\u7535\u4fe1\u8bc8\u9a97\u5206\u6790 clustercoefficient double/string Jaccard \u6770\u5361\u5fb7\u76f8\u4f3c\u5ea6\u8ba1\u7b97 \u76f8\u4f3c\u5ea6\u8ba1\u7b97\u3001\u63a8\u8350 jaccard string BFS \u5e7f\u5ea6\u4f18\u5148\u904d\u5386 \u5c42\u5e8f\u904d\u5386\u3001\u6700\u77ed\u8def\u5f84\u89c4\u5212 bfs string DFS \u6df1\u5ea6\u4f18\u5148\u904d\u5386 \u5c42\u5e8f\u904d\u5386\u3001\u6700\u77ed\u8def\u5f84\u89c4\u5212 dfs string Node2Vec - \u56fe\u5206\u7c7b node2vec string <p>Note</p> <p>\u5982\u679c\u9700\u8981\u5c06\u7b97\u6cd5\u7ed3\u679c\u5199\u5165\u5230 NebulaGraph \u4e2d\uff0c\u8bf7\u786e\u4fdd\u5bf9\u5e94\u56fe\u7a7a\u95f4\u4e2d\u7684 Tag \u6709\u548c\u4e0a\u8868\u5bf9\u5e94\u7684\u5c5e\u6027\u540d\u79f0\u548c\u6570\u636e\u7c7b\u578b\u3002</p>"},{"location":"graph-computing/nebula-algorithm/#_5","title":"\u5b9e\u73b0\u65b9\u6cd5","text":"<p>NebulaGraph Algorithm \u5b9e\u73b0\u56fe\u8ba1\u7b97\u7684\u6d41\u7a0b\u5982\u4e0b\uff1a</p> <ol> <li> <p>\u5229\u7528 NebulaGraph Spark Connector \u4ece NebulaGraph \u4e2d\u8bfb\u53d6\u56fe\u6570\u636e\u4e3a DataFrame\u3002</p> </li> <li> <p>\u5c06 DataFrame \u8f6c\u6362\u4e3a GraphX \u7684\u56fe\u3002</p> </li> <li> <p>\u8c03\u7528 GraphX \u63d0\u4f9b\u7684\u56fe\u7b97\u6cd5\uff08\u4f8b\u5982 PageRank\uff09\u6216\u8005\u81ea\u884c\u5b9e\u73b0\u7684\u7b97\u6cd5\uff08\u4f8b\u5982 Louvain \u793e\u533a\u53d1\u73b0\uff09\u3002</p> </li> </ol> <p>\u8be6\u7ec6\u7684\u5b9e\u73b0\u65b9\u6cd5\u53ef\u4ee5\u53c2\u89c1\u76f8\u5173 Scala \u6587\u4ef6\u3002</p>"},{"location":"graph-computing/nebula-algorithm/#nebulagraph_algorithm_1","title":"\u83b7\u53d6 NebulaGraph Algorithm","text":""},{"location":"graph-computing/nebula-algorithm/#_6","title":"\u7f16\u8bd1\u6253\u5305","text":"<ol> <li> <p>\u514b\u9686\u4ed3\u5e93<code>nebula-algorithm</code>\u3002</p> <pre><code>$ git clone -b v3.0.0 https://github.com/vesoft-inc/nebula-algorithm.git\n</code></pre> </li> <li> <p>\u8fdb\u5165\u76ee\u5f55<code>nebula-algorithm</code>\u3002</p> <pre><code>$ cd nebula-algorithm\n</code></pre> </li> <li> <p>\u7f16\u8bd1\u6253\u5305\u3002</p> <pre><code>$ mvn clean package -Dgpg.skip -Dmaven.javadoc.skip=true -Dmaven.test.skip=true\n</code></pre> </li> </ol> <p>\u7f16\u8bd1\u5b8c\u6210\u540e\uff0c\u5728\u76ee\u5f55<code>nebula-algorithm/target</code>\u4e0b\u751f\u6210\u7c7b\u4f3c\u6587\u4ef6<code>nebula-algorithm-3.x.x.jar</code>\u3002</p>"},{"location":"graph-computing/nebula-algorithm/#maven","title":"Maven \u8fdc\u7a0b\u4ed3\u5e93\u4e0b\u8f7d","text":"<p>\u4e0b\u8f7d\u5730\u5740</p>"},{"location":"graph-computing/nebula-algorithm/#_7","title":"\u4f7f\u7528\u65b9\u6cd5","text":"<p>Note</p> <p>\u5982\u679c\u6570\u636e\u7684\u5c5e\u6027\u503c\u5305\u542b\u4e2d\u6587\u5b57\u7b26\uff0c\u53ef\u80fd\u51fa\u73b0\u4e71\u7801\u3002\u8bf7\u5728\u63d0\u4ea4 Spark \u4efb\u52a1\u65f6\u52a0\u4e0a\u4ee5\u4e0b\u9009\u9879\uff1a</p> <pre><code>--conf spark.driver.extraJavaOptions=-Dfile.encoding=utf-8\n--conf spark.executor.extraJavaOptions=-Dfile.encoding=utf-8\n</code></pre>"},{"location":"graph-computing/nebula-algorithm/#_8","title":"\u8c03\u7528\u7b97\u6cd5\u63a5\u53e3\uff08\u63a8\u8350\uff09","text":"<p><code>lib</code>\u5e93\u4e2d\u63d0\u4f9b\u4e86 10 \u79cd\u5e38\u7528\u56fe\u8ba1\u7b97\u7b97\u6cd5\uff0c\u7528\u6237\u53ef\u4ee5\u901a\u8fc7\u7f16\u7a0b\u8c03\u7528\u7684\u5f62\u5f0f\u8c03\u7528\u7b97\u6cd5\u3002</p> <ol> <li> <p>\u5728\u6587\u4ef6<code>pom.xml</code>\u4e2d\u6dfb\u52a0\u4f9d\u8d56\u3002</p> <pre><code>&lt;dependency&gt;\n     &lt;groupId&gt;com.vesoft&lt;/groupId&gt;\n     &lt;artifactId&gt;nebula-algorithm&lt;/artifactId&gt;\n     &lt;version&gt;3.0.0&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre> </li> <li> <p>\u4f20\u5165\u53c2\u6570\u8c03\u7528\u7b97\u6cd5\uff08\u4ee5 PageRank \u4e3a\u4f8b\uff09\u3002\u66f4\u591a\u8c03\u7528\u793a\u4f8b\u8bf7\u53c2\u89c1\u793a\u4f8b\u3002</p> <p>Note</p> <p>\u6267\u884c\u7b97\u6cd5\u7684 DataFrame \u9ed8\u8ba4\u7b2c\u4e00\u5217\u662f\u8d77\u59cb\u70b9\uff0c\u7b2c\u4e8c\u5217\u662f\u76ee\u7684\u70b9\uff0c\u7b2c\u4e09\u5217\u662f\u8fb9\u6743\u91cd\uff08\u975e NebulaGraph \u4e2d\u7684 Rank\uff09\u3002</p> <pre><code>val prConfig = new PRConfig(5, 1.0)\nval prResult = PageRankAlgo.apply(spark, data, prConfig, false)\n</code></pre> <p>\u5982\u679c\u7528\u6237\u7684\u8282\u70b9 ID \u662f String \u7c7b\u578b\uff0c\u53ef\u4ee5\u53c2\u8003 PageRank \u7684\u793a\u4f8b\u3002\u793a\u4f8b\u4e2d\u8fdb\u884c\u4e86 ID \u8f6c\u6362\uff0c\u5c06 String \u7c7b\u578b\u7f16\u7801\u4e3a Long \u7c7b\u578b\uff0c \u5e76\u5728\u7b97\u6cd5\u7ed3\u679c\u4e2d\u5c06 Long \u7c7b\u578b ID \u89e3\u7801\u4e3a\u539f\u59cb\u7684 String \u7c7b\u578b\u3002</p> </li> </ol>"},{"location":"graph-computing/nebula-algorithm/#_9","title":"\u76f4\u63a5\u63d0\u4ea4\u7b97\u6cd5\u5305","text":"<ol> <li> <p>\u8bbe\u7f6e\u914d\u7f6e\u6587\u4ef6\u3002</p> <pre><code>{\n    # Spark \u76f8\u5173\u914d\u7f6e\n    spark: {\n    app: {\n        name: LPA\n        # Spark \u5206\u7247\u6570\u91cf\n        partitionNum:100\n    }\n    master:local\n    }\n\n    data: {\n    # \u6570\u636e\u6e90\uff0c\u53ef\u9009\u503c\u4e3a nebula\u3001csv\u3001json\u3002\n    source: nebula\n    # \u6570\u636e\u843d\u5e93\uff0c\u5373\u56fe\u8ba1\u7b97\u7684\u7ed3\u679c\u5199\u5165\u7684\u76ee\u6807\uff0c\u53ef\u9009\u503c\u4e3a nebula\u3001csv\u3001json\u3002\n    sink: nebula\n    # \u7b97\u6cd5\u662f\u5426\u9700\u8981\u6743\u91cd\u3002\n    hasWeight: false\n    }\n\n    #  NebulaGraph \u76f8\u5173\u914d\u7f6e\n    nebula: {\n    # \u6570\u636e\u6e90\u3002 NebulaGraph \u4f5c\u4e3a\u56fe\u8ba1\u7b97\u7684\u6570\u636e\u6e90\u65f6\uff0cnebula.read \u7684\u914d\u7f6e\u624d\u751f\u6548\u3002\n    read: {\n        # \u6240\u6709 Meta \u670d\u52a1\u7684 IP \u5730\u5740\u548c\u7aef\u53e3\uff0c\u591a\u4e2a\u5730\u5740\u7528\u82f1\u6587\u9017\u53f7\uff08,\uff09\u5206\u9694\u3002\u683c\u5f0f\uff1a\"ip1:port1,ip2:port2\"\u3002\n        # \u4f7f\u7528 docker-compose \u90e8\u7f72\uff0c\u7aef\u53e3\u9700\u8981\u586b\u5199 docker-compose \u6620\u5c04\u5230\u5916\u90e8\u7684\u7aef\u53e3\n        # \u53ef\u4ee5\u7528`docker-compose ps`\u67e5\u770b\n        metaAddress: \"192.168.*.10:9559\"\n        #  NebulaGraph \u56fe\u7a7a\u95f4\u540d\u79f0\n        space: basketballplayer\n        # NebulaGraph Edge type, \u591a\u4e2a labels \u65f6\uff0c\u591a\u4e2a\u8fb9\u7684\u6570\u636e\u5c06\u5408\u5e76\u3002\n        labels: [\"serve\"]\n        # NebulaGraph \u6bcf\u4e2a Edge type \u7684\u5c5e\u6027\u540d\u79f0\uff0c\u6b64\u5c5e\u6027\u5c06\u4f5c\u4e3a\u7b97\u6cd5\u7684\u6743\u91cd\u5217\uff0c\u8bf7\u786e\u4fdd\u548c Edge type \u5bf9\u5e94\u3002\n        weightCols: [\"start_year\"]\n    }\n\n    # \u6570\u636e\u843d\u5e93\u3002\u56fe\u8ba1\u7b97\u7ed3\u679c\u843d\u5e93\u5230 NebulaGraph \u65f6\uff0cnebula.write \u7684\u914d\u7f6e\u624d\u751f\u6548\u3002\n    write:{\n        # Graph \u670d\u52a1\u7684 IP \u5730\u5740\u548c\u7aef\u53e3\uff0c\u591a\u4e2a\u5730\u5740\u7528\u82f1\u6587\u9017\u53f7\uff08,\uff09\u5206\u9694\u3002\u683c\u5f0f\uff1a\"ip1:port1,ip2:port2\"\u3002\n        # \u4f7f\u7528 docker-compose \u90e8\u7f72\uff0c\u7aef\u53e3\u9700\u8981\u586b\u5199 docker-compose \u6620\u5c04\u5230\u5916\u90e8\u7684\u7aef\u53e3\n        # \u53ef\u4ee5\u7528`docker-compose ps`\u67e5\u770b\n        graphAddress: \"192.168.*.11:9669\"\n        # \u6240\u6709 Meta \u670d\u52a1\u7684 IP \u5730\u5740\u548c\u7aef\u53e3\uff0c\u591a\u4e2a\u5730\u5740\u7528\u82f1\u6587\u9017\u53f7\uff08,\uff09\u5206\u9694\u3002\u683c\u5f0f\uff1a\"ip1:port1,ip2:port2\"\u3002\n        # \u4f7f\u7528 docker-compose \u90e8\u7f72\uff0c\u7aef\u53e3\u9700\u8981\u586b\u5199 docker-compose \u6620\u5c04\u5230\u5916\u90e8\u7684\u7aef\u53e3\n        # \u53ef\u4ee5\u7528`docker-compose ps`\u67e5\u770b\n        metaAddress: \"192.168.*.12:9559\"\n        user:root\n        pswd:nebula\n        # \u5728\u63d0\u4ea4\u56fe\u8ba1\u7b97\u4efb\u52a1\u4e4b\u524d\u9700\u8981\u81ea\u884c\u521b\u5efa\u56fe\u7a7a\u95f4\u53ca Tag\n        #  NebulaGraph \u56fe\u7a7a\u95f4\u540d\u79f0\n        space:nb\n        # NebulaGraph Tag \u540d\u79f0\uff0c\u56fe\u8ba1\u7b97\u7ed3\u679c\u4f1a\u5199\u5165\u8be5 Tag\u3002Tag \u4e2d\u7684\u5c5e\u6027\u540d\u79f0\u56fa\u5b9a\u5982\u4e0b\uff1a\n        # PageRank\uff1apagerank\n        # Louvain\uff1alouvain\n        # ConnectedComponent\uff1acc\n        # StronglyConnectedComponent\uff1ascc\n        # LabelPropagation\uff1alpa\n        # ShortestPath\uff1ashortestpath\n        # DegreeStatic\uff1adegree\u3001inDegree\u3001outDegree\n        # KCore\uff1akcore\n        # TriangleCount\uff1atranglecpunt\n        # BetweennessCentrality\uff1abetweennedss\n        tag:pagerank\n    }\n    }  \n\n    local: {\n    # \u6570\u636e\u6e90\u3002\u56fe\u8ba1\u7b97\u7684\u6570\u636e\u6e90\u4e3a csv \u6587\u4ef6\u6216 json \u6587\u4ef6\u65f6\uff0clocal.read \u7684\u914d\u7f6e\u624d\u751f\u6548\u3002\n    read:{\n        filePath: \"hdfs://127.0.0.1:9000/edge/work_for.csv\"\n        # \u5982\u679c CSV \u6587\u4ef6\u6ca1\u6709\u8868\u5934\uff0c\u4f7f\u7528 [_c0, _c1, _c2, ..., _cn] \u8868\u793a\u5176\u8868\u5934\uff0c\u6709\u8868\u5934\u6216\u8005\u662f json \u6587\u4ef6\u65f6\uff0c\u76f4\u63a5\u4f7f\u7528\u8868\u5934\u540d\u79f0\u5373\u53ef\u3002\n        # \u8d77\u59cb\u70b9 ID \u5217\u7684\u8868\u5934\u3002\n        srcId:\"_c0\"\n        # \u76ee\u7684\u70b9 ID \u5217\u7684\u8868\u5934\u3002\n        dstId:\"_c1\"\n        # \u6743\u91cd\u5217\u7684\u8868\u5934\n        weight: \"_c2\"\n        # csv \u6587\u4ef6\u662f\u5426\u6709\u8868\u5934\n        header: false\n        # csv \u6587\u4ef6\u7684\u5206\u9694\u7b26\n        delimiter:\",\"\n    }\n\n    # \u6570\u636e\u843d\u5e93\u3002\u56fe\u8ba1\u7b97\u7ed3\u679c\u843d\u5e93\u5230 csv \u6587\u4ef6\u6216 text \u6587\u4ef6\u65f6\uff0clocal.write \u7684\u914d\u7f6e\u624d\u751f\u6548\u3002\n    write:{\n        resultPath:/tmp/\n    }\n\n    algorithm: {\n    # \u9700\u8981\u6267\u884c\u7684\u7b97\u6cd5\uff0c\u53ef\u9009\u503c\u4e3a\uff1a\n    # pagerank\u3001louvain\u3001connectedcomponent\u3001labelpropagation\u3001shortestpaths\u3001\n    # degreestatic\u3001kcore\u3001stronglyconnectedcomponent\u3001trianglecount\u3001\n    # betweenness\u3001graphtriangleCount\u3002\n    executeAlgo: pagerank\n\n    # PageRank \u53c2\u6570\n    pagerank: {\n        maxIter: 10\n        resetProb: 0.15  \n        encodeId:false # \u5982\u679c\u70b9 ID \u662f\u5b57\u7b26\u4e32\u7c7b\u578b\uff0c\u8bf7\u914d\u7f6e\u4e3a true\u3002\n    }\n\n    # Louvain \u53c2\u6570\n    louvain: {\n        maxIter: 20\n        internalIter: 10\n        tol: 0.5\n        encodeId:false # \u5982\u679c\u70b9 ID \u662f\u5b57\u7b26\u4e32\u7c7b\u578b\uff0c\u8bf7\u914d\u7f6e\u4e3a true\u3002\n    }\n\n    # ...\n    }\n    }\n}\n</code></pre> <p>Note</p> <p>\u5f53\u914d\u7f6e\u4e3a <code>sink: nebula</code> \u7684\u65f6\u5019\uff0c\u610f\u5473\u7740\u7b97\u6cd5\u8fd0\u7b97\u7ed3\u679c\u5c06\u88ab\u5199\u56de NebulaGraph \u96c6\u7fa4\uff0c\u8fd9\u5bf9\u5199\u56de\u5230\u7684 TAG \u4e2d\u7684\u5c5e\u6027\u540d\u6709\u9690\u542b\u7684\u7ea6\u5b9a\u3002\u8be6\u60c5\u53c2\u8003\u672c\u6587\u652f\u6301\u7b97\u6cd5\u90e8\u5206\u3002</p> </li> <li> <p>\u63d0\u4ea4\u56fe\u8ba1\u7b97\u4efb\u52a1\u3002</p> <pre><code>${SPARK_HOME}/bin/spark-submit --master &lt;mode&gt; --class com.vesoft.nebula.algorithm.Main &lt;nebula-algorithm-3.0.0.jar_path&gt; -p &lt;application.conf_path&gt;\n</code></pre> <p>\u793a\u4f8b\uff1a</p> <pre><code>${SPARK_HOME}/bin/spark-submit --master \"local\" --class com.vesoft.nebula.algorithm.Main /root/nebula-algorithm/target/nebula-algorithm-3.0-SNAPSHOT.jar -p /root/nebula-algorithm/src/main/resources/application.conf\n</code></pre> </li> </ol>"},{"location":"graph-computing/nebula-algorithm/#_10","title":"\u89c6\u9891","text":"<ul> <li>\u56fe\u8ba1\u7b97\u5de5\u5177\u2014\u2014NebulaGraph Algorithm \u4ecb\u7ecd\uff082 \u5206 36 \u79d2\uff09</li> </ul>"},{"location":"import-export/use-importer/","title":"NebulaGraph Importer","text":"<p>NebulaGraph Importer\uff08\u7b80\u79f0 Importer\uff09\u662f\u4e00\u6b3e NebulaGraph \u7684 CSV \u6587\u4ef6\u5355\u673a\u5bfc\u5165\u5de5\u5177\uff0c\u53ef\u4ee5\u8bfb\u53d6\u5e76\u6279\u91cf\u5bfc\u5165\u591a\u79cd\u6570\u636e\u6e90\u7684 CSV \u6587\u4ef6\u6570\u636e\uff0c\u8fd8\u652f\u6301\u6279\u91cf\u66f4\u65b0\u548c\u5220\u9664\u64cd\u4f5c\u3002</p>"},{"location":"import-export/use-importer/#_1","title":"\u529f\u80fd","text":"<ul> <li>\u652f\u6301\u591a\u79cd\u6570\u636e\u6e90\uff0c\u5305\u62ec\u672c\u5730\u3001S3\u3001OSS\u3001HDFS\u3001FTP\u3001SFTP\u3001GCS\u3002</li> <li>\u652f\u6301\u5bfc\u5165 CSV \u683c\u5f0f\u6587\u4ef6\u7684\u6570\u636e\u3002\u5355\u4e2a\u6587\u4ef6\u5185\u53ef\u4ee5\u5305\u542b\u591a\u79cd Tag\u3001\u591a\u79cd Edge type \u6216\u8005\u4e8c\u8005\u6df7\u5408\u7684\u6570\u636e\u3002</li> <li>\u652f\u6301\u8fc7\u6ee4\u6570\u636e\u6e90\u6570\u636e\u3002</li> <li>\u652f\u6301\u6279\u91cf\u64cd\u4f5c\uff0c\u5305\u62ec\u5bfc\u5165\u3001\u66f4\u65b0\u3001\u5220\u9664\u3002</li> <li>\u652f\u6301\u540c\u65f6\u8fde\u63a5\u591a\u4e2a Graph \u670d\u52a1\u8fdb\u884c\u5bfc\u5165\u5e76\u4e14\u52a8\u6001\u8d1f\u8f7d\u5747\u8861\u3002</li> <li>\u652f\u6301\u5931\u8d25\u540e\u91cd\u8fde\u3001\u91cd\u8bd5\u3002</li> <li>\u652f\u6301\u591a\u7ef4\u5ea6\u663e\u793a\u7edf\u8ba1\u4fe1\u606f\uff0c\u5305\u62ec\u5bfc\u5165\u65f6\u95f4\u3001\u5bfc\u5165\u767e\u5206\u6bd4\u7b49\u3002\u7edf\u8ba1\u4fe1\u606f\u652f\u6301\u6253\u5370\u5728 Console \u6216\u65e5\u5fd7\u4e2d\u3002</li> <li>\u652f\u6301 SSL \u52a0\u5bc6\u3002</li> </ul>"},{"location":"import-export/use-importer/#_2","title":"\u4f18\u52bf","text":"<ul> <li>\u8f7b\u91cf\u5feb\u6377\uff1a\u4e0d\u9700\u8981\u590d\u6742\u73af\u5883\u5373\u53ef\u4f7f\u7528\uff0c\u5feb\u901f\u5bfc\u5165\u6570\u636e\u3002</li> </ul> <ul> <li>\u7075\u6d3b\u7b5b\u9009\uff1a\u901a\u8fc7\u914d\u7f6e\u6587\u4ef6\u53ef\u4ee5\u5b9e\u73b0\u5bf9 CSV \u6587\u4ef6\u6570\u636e\u7684\u7075\u6d3b\u7b5b\u9009\u3002</li> </ul>"},{"location":"import-export/use-importer/#_3","title":"\u7248\u672c\u517c\u5bb9\u6027","text":"<p>NebulaGraph Importer \u7248\u672c\u548c NebulaGraph \u5185\u6838\u7684\u7248\u672c\u5bf9\u5e94\u5173\u7cfb\u5982\u4e0b\u3002</p> NebulaGraph \u7248\u672c NebulaGraph Importer \u7248\u672c 3.x.x 3.x.x\u30014.x.x 2.x.x 2.x.x\u30013.x.x <p>Note</p> <p>Importer 4.0.0 \u5bf9 Importer \u8fdb\u884c\u4e86\u91cd\u505a\uff0c\u6027\u80fd\u5f97\u5230\u4e86\u63d0\u9ad8\uff0c\u4f46\u914d\u7f6e\u6587\u4ef6\u4e0d\u517c\u5bb9\u65e7\u7248\u672c\u3002\u5efa\u8bae\u4f7f\u7528\u65b0\u7248 Importer\u3002</p>"},{"location":"import-export/use-importer/#_4","title":"\u66f4\u65b0\u8bf4\u660e","text":"<p>Release notes</p>"},{"location":"import-export/use-importer/#_5","title":"\u524d\u63d0\u6761\u4ef6","text":"<p>\u5728\u4f7f\u7528 NebulaGraph Importer \u4e4b\u524d\uff0c\u8bf7\u786e\u4fdd\uff1a</p> <ul> <li> <p>\u5df2\u90e8\u7f72 NebulaGraph \u670d\u52a1\u3002\u90e8\u7f72\u65b9\u5f0f\u5982\u4e0b\uff1a</p> <ul> <li>RPM/DEB \u5305\u5b89\u88c5</li> </ul> <ul> <li>Docker Compose \u90e8\u7f72</li> </ul> <ul> <li>\u6e90\u7801\u7f16\u8bd1\u5b89\u88c5</li> </ul> </li> </ul> <ul> <li>NebulaGraph \u4e2d\u5df2\u521b\u5efa Schema\uff0c\u5305\u62ec\u56fe\u7a7a\u95f4\u3001Tag \u548c Edge type\uff0c\u6216\u8005\u901a\u8fc7\u53c2\u6570<code>manager.hooks.before.statements</code>\u8bbe\u7f6e\u3002</li> </ul>"},{"location":"import-export/use-importer/#_6","title":"\u64cd\u4f5c\u6b65\u9aa4","text":""},{"location":"import-export/use-importer/#csv","title":"\u521b\u5efa CSV \u6587\u4ef6","text":"<p>\u51c6\u5907\u597d\u5f85\u5bfc\u5165\u7684 CSV \u6587\u4ef6\u5e76\u914d\u7f6e YAML \u6587\u4ef6\uff0c\u5373\u53ef\u4f7f\u7528\u672c\u5de5\u5177\u5411 NebulaGraph \u6279\u91cf\u5bfc\u5165\u6570\u636e\u3002</p> <p>Note</p> <p>YAML \u914d\u7f6e\u6587\u4ef6\u8bf4\u660e\u8bf7\u53c2\u89c1\u4e0b\u6587\u7684\u914d\u7f6e\u6587\u4ef6\u8bf4\u660e\u3002</p>"},{"location":"import-export/use-importer/#_7","title":"\u4e0b\u8f7d\u4e8c\u8fdb\u5236\u5305\u8fd0\u884c","text":"<ol> <li> <p>\u5728 Release \u9875\u9762\u4e0b\u8f7d\u548c\u5b89\u88c5\u4e8c\u8fdb\u5236\u5305\uff0c\u5e76\u6dfb\u52a0\u6267\u884c\u6743\u9650\u3002</p> <p>Note</p> <p>\u4f7f\u7528 RPM/DEB \u5305\u5b89\u88c5\u7684\u6587\u4ef6\u8def\u5f84\u4e3a<code>/usr/bin/nebula-importer</code>\u3002</p> </li> <li> <p>\u5728<code>nebula-importer</code>\u7684\u5b89\u88c5\u76ee\u5f55\u4e0b\uff0c\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\u5bfc\u5165\u6570\u636e\u3002</p> <pre><code>$ ./&lt;binary_file_name&gt; --config &lt;yaml_config_file_path&gt;\n</code></pre> </li> </ol>"},{"location":"import-export/use-importer/#_8","title":"\u6e90\u7801\u7f16\u8bd1\u8fd0\u884c","text":"<p>\u7f16\u8bd1\u6e90\u7801\u9700\u8981\u90e8\u7f72 Golang \u73af\u5883\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1 Golang \u73af\u5883\u642d\u5efa\u3002</p> <ol> <li> <p>\u514b\u9686\u4ed3\u5e93\u3002</p> <pre><code>$ git clone -b release-4.1 https://github.com/vesoft-inc/nebula-importer.git\n</code></pre> <p>Note</p> <p>\u8bf7\u4f7f\u7528\u6b63\u786e\u7684\u5206\u652f\u3002\u4e0d\u540c\u5206\u652f\u7684 rpc \u534f\u8bae\u4e0d\u540c\u3002</p> </li> <li> <p>\u8fdb\u5165\u76ee\u5f55<code>nebula-importer</code>\u3002</p> <pre><code>$ cd nebula-importer\n</code></pre> </li> <li> <p>\u7f16\u8bd1\u6e90\u7801\u3002</p> <pre><code>$ make build\n</code></pre> </li> <li> <p>\u5f00\u59cb\u5bfc\u5165\u6570\u636e\u3002</p> <pre><code>$ ./bin/nebula-importer --config &lt;yaml_config_file_path&gt;\n</code></pre> </li> </ol>"},{"location":"import-export/use-importer/#docker","title":"Docker \u65b9\u5f0f\u8fd0\u884c","text":"<p>\u4f7f\u7528 Docker \u53ef\u4ee5\u4e0d\u5fc5\u5728\u672c\u5730\u5b89\u88c5 Go \u8bed\u8a00\u73af\u5883\uff0c\u53ea\u9700\u8981\u62c9\u53d6 NebulaGraph Importer \u7684\u955c\u50cf\uff0c\u5e76\u5c06\u672c\u5730\u914d\u7f6e\u6587\u4ef6\u548c CSV \u6570\u636e\u6587\u4ef6\u6302\u8f7d\u5230\u5bb9\u5668\u4e2d\u3002\u547d\u4ee4\u5982\u4e0b\uff1a</p> <pre><code>$ docker pull vesoft/nebula-importer:&lt;version&gt;\n$ docker run --rm -ti \\\n      --network=host \\\n      -v &lt;config_file&gt;:&lt;config_file&gt; \\\n      -v &lt;data_dir&gt;:&lt;data_dir&gt; \\\n      vesoft/nebula-importer:&lt;version&gt; \\\n      --config &lt;config_file&gt;\n</code></pre> <ul> <li><code>&lt;config_file&gt;</code>\uff1a\u586b\u5199 YAML \u914d\u7f6e\u6587\u4ef6\u7684\u7edd\u5bf9\u8def\u5f84\u3002</li> <li><code>&lt;data_dir&gt;</code>\uff1a\u586b\u5199 CSV \u6570\u636e\u6587\u4ef6\u7684\u7edd\u5bf9\u8def\u5f84\u3002\u5982\u679c\u6587\u4ef6\u4e0d\u5728\u672c\u5730\uff0c\u8bf7\u5ffd\u7565\u8be5\u53c2\u6570\u3002</li> <li><code>&lt;version&gt;</code>\uff1a\u586b\u5199 Importer \u7684\u7248\u672c\u53f7\uff0c\u8bf7\u586b\u5199<code>v4</code>\u3002</li> </ul> <p>Note</p> <p>\u5efa\u8bae\u4f7f\u7528\u76f8\u5bf9\u8def\u5f84\u3002\u5982\u679c\u4f7f\u7528\u672c\u5730\u7edd\u5bf9\u8def\u5f84\uff0c\u8bf7\u68c0\u67e5\u8def\u5f84\u6620\u5c04\u5230 Docker \u4e2d\u7684\u8def\u5f84\u3002</p> <p>\u4f8b\u5982\uff1a</p> <pre><code>$ docker pull vesoft/nebula-importer:v4\n$ docker run --rm -ti \\\n      --network=host \\\n      -v /home/user/config.yaml:/home/user/config.yaml \\\n      -v /home/user/data:/home/user/data \\\n      vesoft/nebula-importer:v4 \\\n      --config /home/user/config.yaml\n</code></pre>"},{"location":"import-export/use-importer/#_9","title":"\u914d\u7f6e\u6587\u4ef6\u8bf4\u660e","text":"<p>NebulaGraph Importer \u7684 Github \u5185\u63d0\u4f9b\u591a\u79cd\u793a\u4f8b\u914d\u7f6e\u6587\u4ef6\u3002\u914d\u7f6e\u6587\u4ef6\u7528\u6765\u63cf\u8ff0\u5f85\u5bfc\u5165\u6587\u4ef6\u4fe1\u606f\u3001 NebulaGraph \u670d\u52a1\u5668\u4fe1\u606f\u7b49\u3002\u4e0b\u6587\u5c06\u5206\u7c7b\u4ecb\u7ecd\u914d\u7f6e\u6587\u4ef6\u5185\u7684\u5b57\u6bb5\u3002</p> <p>Note</p> <p>\u5982\u679c\u7528\u6237\u4e0b\u8f7d\u7684\u662f\u4e8c\u8fdb\u5236\u5305\uff0c\u8bf7\u624b\u52a8\u521b\u5efa\u914d\u7f6e\u6587\u4ef6\u3002</p>"},{"location":"import-export/use-importer/#client","title":"Client \u914d\u7f6e","text":"<p>Client \u914d\u7f6e\u5b58\u50a8\u5ba2\u6237\u7aef\u8fde\u63a5 NebulaGraph \u76f8\u5173\u7684\u914d\u7f6e\u3002</p> <p>\u793a\u4f8b\u914d\u7f6e\u5982\u4e0b\uff1a</p> <pre><code>client:\n  version: v3\n  address: \"192.168.1.100:9669,192.168.1.101:9669\"\n  user: root\n  password: nebula\n  ssl:\n    enable: true\n    certPath: \"/home/xxx/cert/importer.crt\"\n    keyPath: \"/home/xxx/cert/importer.key\"\n    caPath: \"/home/xxx/cert/root.crt\"\n    insecureSkipVerify: false\n  concurrencyPerAddress: 10\n  reconnectInitialInterval: 1s\n  retry: 3\n  retryInitialInterval: 1s\n</code></pre> \u53c2\u6570 \u9ed8\u8ba4\u503c \u662f\u5426\u5fc5\u987b \u8bf4\u660e <code>client.version</code> <code>v3</code> \u662f \u6307\u5b9a\u8fde\u63a5\u7684 NebulaGraph \u7684\u5927\u7248\u672c\u3002\u5f53\u524d\u4ec5\u652f\u6301<code>v3</code>\u3002 <code>client.address</code> <code>\"127.0.0.1:9669\"</code> \u662f \u6307\u5b9a\u8fde\u63a5\u7684 NebulaGraph \u5730\u5740\u3002\u591a\u4e2a\u5730\u5740\u7528\u82f1\u6587\u9017\u53f7\uff08,\uff09\u5206\u9694\u3002 <code>client.user</code> <code>root</code> \u5426 NebulaGraph \u7684\u7528\u6237\u540d\u3002 <code>client.password</code> <code>nebula</code> \u5426 NebulaGraph \u7528\u6237\u540d\u5bf9\u5e94\u7684\u5bc6\u7801\u3002 <code>client.ssl.enable</code> <code>false</code> \u5426 \u6307\u5b9a\u662f\u5426\u5f00\u542f SSL \u8ba4\u8bc1\u3002 <code>client.ssl.certPath</code> - \u5426 \u6307\u5b9a SSL \u516c\u94a5\u8bc1\u4e66\u7684\u5b58\u50a8\u8def\u5f84\u3002\u5f00\u542f SSL \u8ba4\u8bc1\u540e\u8be5\u53c2\u6570\u5fc5\u586b\u3002 <code>client.ssl.keyPath</code> - \u5426 \u6307\u5b9a SSL \u5bc6\u94a5\u7684\u5b58\u50a8\u8def\u5f84\u3002\u5f00\u542f SSL \u8ba4\u8bc1\u540e\u8be5\u53c2\u6570\u5fc5\u586b\u3002 <code>client.ssl.caPath</code> - \u5426 \u6307\u5b9a CA \u6839\u8bc1\u4e66\u7684\u5b58\u50a8\u8def\u5f84\u3002\u5f00\u542f SSL \u8ba4\u8bc1\u540e\u8be5\u53c2\u6570\u5fc5\u586b\u3002 <code>client.ssl.insecureSkipVerify</code> <code>false</code> \u5426 \u6307\u5b9a\u662f\u5426\u8df3\u8fc7\u9a8c\u8bc1\u670d\u52a1\u7aef\u7684\u8bc1\u4e66\u94fe\u548c\u4e3b\u673a\u540d\u3002\u5982\u679c\u8bbe\u7f6e\u4e3a<code>true</code>\uff0c\u5219\u63a5\u53d7\u670d\u52a1\u7aef\u63d0\u4f9b\u7684\u4efb\u4f55\u8bc1\u4e66\u94fe\u548c\u4e3b\u673a\u540d\u3002 <code>client.concurrencyPerAddress</code> <code>10</code> \u5426 \u5355\u4e2a Graph \u670d\u52a1\u7684\u5ba2\u6237\u7aef\u5e76\u53d1\u8fde\u63a5\u6570\u3002 <code>client.retryInitialInterval</code> <code>1s</code> \u5426 \u91cd\u8fde\u95f4\u9694\u65f6\u95f4\u3002 <code>client.retry</code> <code>3</code> \u5426 nGQL \u8bed\u53e5\u6267\u884c\u5931\u8d25\u7684\u91cd\u8bd5\u6b21\u6570\u3002 <code>client.retryInitialInterval</code> <code>1s</code> \u5426 \u91cd\u8bd5\u95f4\u9694\u65f6\u95f4\u3002"},{"location":"import-export/use-importer/#manager","title":"Manager \u914d\u7f6e","text":"<p>Manager \u914d\u7f6e\u662f\u8fde\u63a5\u6570\u636e\u5e93\u540e\u7684\u4eba\u4e3a\u63a7\u5236\u914d\u7f6e\u3002</p> <p>\u793a\u4f8b\u914d\u7f6e\u5982\u4e0b\uff1a</p> <pre><code>manager:\n  spaceName: basic_string_examples\n  batch: 128\n  readerConcurrency: 50\n  importerConcurrency: 512\n  statsInterval: 10s\n  hooks:\n    before:\n      - statements:\n        - |\n            DROP SPACE IF EXISTS basic_string_examples;\n            CREATE SPACE IF NOT EXISTS basic_string_examples(partition_num=5, replica_factor=1, vid_type=int);\n            USE basic_string_examples;\n        wait: 10s\n    after:\n      - statements:\n          - |\n            SHOW SPACES;\n</code></pre> \u53c2\u6570 \u9ed8\u8ba4\u503c \u662f\u5426\u5fc5\u987b \u8bf4\u660e <code>manager.spaceName</code> - \u662f \u6307\u5b9a\u6570\u636e\u8981\u5bfc\u5165\u7684\u56fe\u7a7a\u95f4\u3002\u4e0d\u652f\u6301\u540c\u65f6\u5bfc\u5165\u591a\u4e2a\u56fe\u7a7a\u95f4\u3002 <code>manager.batch</code> <code>128</code> \u5426 \u6267\u884c\u8bed\u53e5\u7684\u6279\u5904\u7406\u91cf\uff08\u5168\u5c40\u914d\u7f6e\uff09\u3002\u5bf9\u67d0\u4e2a\u6570\u636e\u6e90\u5355\u72ec\u8bbe\u7f6e\u6279\u5904\u7406\u91cf\u53ef\u4ee5\u4f7f\u7528\u4e0b\u6587\u7684<code>sources.batch</code>\u3002 <code>manager.readerConcurrency</code> <code>50</code> \u5426 \u8bfb\u53d6\u5668\u8bfb\u53d6\u6570\u636e\u6e90\u7684\u5e76\u53d1\u6570\u3002 <code>manager.importerConcurrency</code> <code>512</code> \u5426 \u751f\u6210\u5f85\u6267\u884c\u7684 nGQL \u8bed\u53e5\u7684\u5e76\u53d1\u6570\uff0c\u7136\u540e\u4f1a\u8c03\u7528\u5ba2\u6237\u7aef\u6267\u884c\u8fd9\u4e9b\u8bed\u53e5\u3002 <code>manager.statsInterval</code> <code>10s</code> \u5426 \u6253\u5370\u7edf\u8ba1\u4fe1\u606f\u7684\u65f6\u95f4\u95f4\u9694\u3002 <code>manager.hooks.before.[].statements</code> - \u5426 \u5bfc\u5165\u524d\u5728\u56fe\u7a7a\u95f4\u5185\u6267\u884c\u7684\u547d\u4ee4\u3002 <code>manager.hooks.before.[].wait</code> - \u5426 \u6267\u884c<code>statements</code>\u8bed\u53e5\u540e\u7684\u7b49\u5f85\u65f6\u95f4\u3002 <code>manager.hooks.after.[].statements</code> - \u5426 \u5bfc\u5165\u540e\u5728\u56fe\u7a7a\u95f4\u5185\u6267\u884c\u7684\u547d\u4ee4\u3002 <code>manager.hooks.after.[].wait</code> - \u5426 \u6267\u884c<code>statements</code>\u8bed\u53e5\u540e\u7684\u7b49\u5f85\u65f6\u95f4\u3002"},{"location":"import-export/use-importer/#log","title":"Log \u914d\u7f6e","text":"<p>Log \u914d\u7f6e\u662f\u8bbe\u7f6e\u65e5\u5fd7\u76f8\u5173\u914d\u7f6e\u3002</p> <p>\u793a\u4f8b\u914d\u7f6e\u5982\u4e0b\uff1a</p> <pre><code>log:\n  level: INFO\n  console: true\n  files:\n    - logs/nebula-importer.log   \n</code></pre> \u53c2\u6570 \u9ed8\u8ba4\u503c \u662f\u5426\u5fc5\u987b \u8bf4\u660e <code>log.level</code> <code>INFO</code> \u5426 \u65e5\u5fd7\u7ea7\u522b\u3002\u53ef\u9009\u503c\u4e3a<code>DEBUG</code>\u3001<code>INFO</code>\u3001<code>WARN</code>\u3001<code>ERROR</code>\u3001<code>PANIC</code>\u3001<code>FATAL</code>\u3002 <code>log.console</code> <code>true</code> \u5426 \u5b58\u50a8\u65e5\u5fd7\u65f6\u662f\u5426\u5c06\u65e5\u5fd7\u540c\u6b65\u6253\u5370\u5230 Console\u3002 <code>log.files</code> - \u5426 \u65e5\u5fd7\u6587\u4ef6\u8def\u5f84\u3002\u9700\u624b\u52a8\u521b\u5efa\u65e5\u5fd7\u6587\u4ef6\u76ee\u5f55\u3002"},{"location":"import-export/use-importer/#source","title":"Source \u914d\u7f6e","text":"<p>Source \u914d\u7f6e\u4e2d\u9700\u8981\u914d\u7f6e\u6570\u636e\u6e90\u4fe1\u606f\u3001\u6570\u636e\u5904\u7406\u65b9\u5f0f\u548c Schema \u6620\u5c04\u3002</p> <p>\u793a\u4f8b\u914d\u7f6e\u5982\u4e0b\uff1a</p> <pre><code>sources:\n  - path: ./person.csv  # \u6307\u5b9a\u5b58\u50a8\u6570\u636e\u6587\u4ef6\u7684\u8def\u5f84\u3002\u5982\u679c\u4f7f\u7528\u76f8\u5bf9\u8def\u5f84\uff0c\u5219\u8def\u5f84\u548c\u5f53\u524d\u914d\u7f6e\u6587\u4ef6\u76ee\u5f55\u62fc\u63a5\u3002\u4e5f\u652f\u6301\u901a\u914d\u7b26\u6587\u4ef6\u540d\uff0c\u4f8b\u5982\uff1a./follower-*.csv\uff0c\u8bf7\u786e\u4fdd\u6240\u6709\u5339\u914d\u7684\u6587\u4ef6\u5177\u6709\u76f8\u540c\u7684\u67b6\u6784\u3002\n#  - s3: # AWS S3\n#      endpoint: endpoint    # \u53ef\u9009\u3002S3 \u670d\u52a1\u7aef\u70b9\uff0c\u5982\u679c\u4f7f\u7528 AWS S3 \u53ef\u4ee5\u7701\u7565\u3002\n#      region: us-east-1     # \u5fc5\u586b\u3002S3 \u670d\u52a1\u7684\u533a\u57df\u3002\n#      bucket: gdelt-open-data    # \u5fc5\u586b\u3002S3 \u670d\u52a1\u4e2d\u7684 bucket\u3002\n#      key: events/20190918.export.csv     # \u5fc5\u586b\u3002S3 \u670d\u52a1\u4e2d\u6587\u4ef6\u7684 key\u3002\n#      accessKeyID: \"\"    # \u53ef\u9009\u3002S3 \u670d\u52a1\u7684\u8bbf\u95ee\u5bc6\u94a5\u3002\u5982\u679c\u662f\u516c\u5171\u6570\u636e\uff0c\u5219\u65e0\u9700\u914d\u7f6e\u3002\n#      accessKeySecret: \"\"     # \u53ef\u9009\u3002S3 \u670d\u52a1\u7684\u5bc6\u94a5\u3002\u5982\u679c\u662f\u516c\u5171\u6570\u636e\uff0c\u5219\u65e0\u9700\u914d\u7f6e\u3002\n#  - oss:\n#      endpoint: https://oss-cn-hangzhou.aliyuncs.com    # \u5fc5\u586b\u3002OSS \u670d\u52a1\u7aef\u70b9\u3002\n#      bucket: bucketName    # \u5fc5\u586b\u3002OSS \u670d\u52a1\u4e2d\u7684 bucket\u3002\n#      key: objectKey    # \u5fc5\u586b\u3002OSS \u670d\u52a1\u4e2d\u6587\u4ef6\u7684 object key\u3002\n#      accessKeyID: accessKey    # \u5fc5\u586b\u3002OSS \u670d\u52a1\u7684\u8bbf\u95ee\u5bc6\u94a5\u3002\n#      accessKeySecret: secretKey    # \u5fc5\u586b\u3002OSS \u670d\u52a1\u7684\u79d8\u94a5\u3002\n#  - ftp:\n#      host: 192.168.0.10    # \u5fc5\u586b\u3002FTP \u670d\u52a1\u7684\u4e3b\u673a\u3002\n#      port: 21    # \u5fc5\u586b\u3002FTP \u670d\u52a1\u7684\u7aef\u53e3\u3002\n#      user: user    # \u5fc5\u586b\u3002FTP \u670d\u52a1\u7684\u7528\u6237\u540d\u3002\n#      password: password    # \u5fc5\u586b\u3002FTP \u670d\u52a1\u7684\u5bc6\u7801\u3002\n#      path: \"/events/20190918.export.csv\"    # FTP \u670d\u52a1\u4e2d\u6587\u4ef6\u7684\u8def\u5f84\u3002\n#  - sftp:\n#      host: 192.168.0.10    # \u5fc5\u586b\u3002SFTP \u670d\u52a1\u7684\u4e3b\u673a\u3002\n#      port: 22    # \u5fc5\u586b\u3002SFTP \u670d\u52a1\u7684\u7aef\u53e3\u3002\n#      user: user    # \u5fc5\u586b\u3002SFTP \u670d\u52a1\u7684\u7528\u6237\u540d\u3002\n#      password: password    # \u53ef\u9009\u3002SFTP \u670d\u52a1\u7684\u5bc6\u7801\u3002\n#      keyFile: keyFile    # \u53ef\u9009\u3002SFTP \u670d\u52a1\u7684 SSH \u5bc6\u94a5\u6587\u4ef6\u8def\u5f84\u3002\n#      keyData: keyData    $ \u53ef\u9009\u3002SFTP \u670d\u52a1\u7684 SSH \u5bc6\u94a5\u6587\u4ef6\u5185\u5bb9\u3002\n#      passphrase: passphrase    # \u53ef\u9009\u3002SFTP \u670d\u52a1\u7684 SSH \u5bc6\u94a5\u5bc6\u7801\u3002\n#      path: \"/events/20190918.export.csv\"    # \u5fc5\u586b\u3002SFTP \u670d\u52a1\u4e2d\u6587\u4ef6\u7684\u8def\u5f84\u3002\n#  - hdfs:\n#      address: \"127.0.0.1:8020\"    # \u5fc5\u586b\u3002HDFS \u670d\u52a1\u7684\u5730\u5740\u3002\n#      user: \"hdfs\"    # \u53ef\u9009\u3002HDFS \u670d\u52a1\u7684\u7528\u6237\u540d\u3002\n#      servicePrincipalName: &lt;Kerberos Service Principal Name&gt;  # \u53ef\u9009\u3002\u542f\u7528 Kerberos \u8ba4\u8bc1\u65f6\uff0cHDFS \u670d\u52a1\u7684 Kerberos \u670d\u52a1\u5b9e\u4f8b\u540d\u79f0\u3002\n#      krb5ConfigFile: &lt;Kerberos config file&gt;  # \u53ef\u9009\u3002\u542f\u7528 Kerberos \u8ba4\u8bc1\u65f6\uff0cHDFS \u670d\u52a1\u7684 Kerberos \u914d\u7f6e\u6587\u4ef6\u8def\u5f84\uff0c\u9ed8\u8ba4\u4e3a`/etc/krb5.conf`\u3002\n#      ccacheFile: &lt;Kerberos ccache file&gt;  # \u53ef\u9009\u3002\u542f\u7528 Kerberos \u8ba4\u8bc1\u65f6\uff0cHDFS \u670d\u52a1\u7684 Kerberos ccache \u6587\u4ef6\u8def\u5f84\u3002\n#      keyTabFile: &lt;Kerberos keytab file&gt;  # \u53ef\u9009\u3002\u542f\u7528 Kerberos \u8ba4\u8bc1\u65f6\uff0cHDFS \u670d\u52a1\u7684 Kerberos keytab \u6587\u4ef6\u8def\u5f84\u3002\n#      password: &lt;Kerberos password&gt;  # \u53ef\u9009\u3002\u542f\u7528 Kerberos \u8ba4\u8bc1\u65f6\uff0cHDFS \u670d\u52a1\u7684 Kerberos \u5bc6\u7801\u3002\n#      dataTransferProtection: &lt;Kerberos Data Transfer Protection&gt;  # \u53ef\u9009\u3002\u542f\u7528 Kerberos \u8ba4\u8bc1\u65f6\u7684\u4f20\u8f93\u52a0\u5bc6\u7c7b\u578b\u3002\u53ef\u9009\u503c\u4e3a`authentication`\u3001`integrity`\u3001`privacy`\u3002\n#      disablePAFXFAST: false  # \u53ef\u9009\u3002\u662f\u5426\u7981\u6b62\u5ba2\u6237\u7aef\u4f7f\u7528\u9884\u8eab\u4efd\u9a8c\u8bc1\uff08PA_FX_FAST\uff09\u3002\n#      path: \"/events/20190918.export.csv\"    # \u5fc5\u586b\u3002HDFS \u670d\u52a1\u4e2d\u6587\u4ef6\u7684\u8def\u5f84\u3002\u4e5f\u652f\u6301\u901a\u914d\u7b26\u6587\u4ef6\u540d\uff0c\u4f8b\u5982\uff1a/events/*.export.csv\uff0c\u8bf7\u786e\u4fdd\u6240\u6709\u5339\u914d\u7684\u6587\u4ef6\u5177\u6709\u76f8\u540c\u7684\u67b6\u6784\u3002\n#  - gcs: # Google Cloud Storage\n#      bucket: chicago-crime-sample  # \u5fc5\u586b\u3002GCS \u670d\u52a1\u4e2d\u7684 bucket \u540d\u79f0\u3002\n#      key: stats/000000000000.csv  # \u5fc5\u586b\u3002GCS \u670d\u52a1\u4e2d\u6587\u4ef6\u7684\u8def\u5f84\u3002\n#      withoutAuthentication: false  # \u53ef\u9009\u3002\u662f\u5426\u533f\u540d\u8bbf\u95ee\u3002\u9ed8\u8ba4\u4e3a false\uff0c\u5373\u4f7f\u7528\u51ed\u8bc1\u8bbf\u95ee\u3002\n#      # \u4f7f\u7528\u51ed\u8bc1\u8bbf\u95ee\u65f6\uff0ccredentialsFile \u548c credentialsJSON \u53c2\u6570\u4e8c\u9009\u4e00\u5373\u53ef\u3002\n#      credentialsFile: \"/path/to/your/credentials/file\"  # \u53ef\u9009\u3002GCS \u670d\u52a1\u7684\u51ed\u8bc1\u6587\u4ef6\u8def\u5f84\u3002\n#      credentialsJSON: '{  # \u53ef\u9009\u3002GCS \u670d\u52a1\u7684\u51ed\u8bc1 JSON \u5185\u5bb9\u3002\n#        \"type\": \"service_account\",\n#        \"project_id\": \"your-project-id\",\n#        \"private_key_id\": \"key-id\",\n#        \"private_key\": \"-----BEGIN PRIVATE KEY-----\\nxxxxx\\n-----END PRIVATE KEY-----\\n\",\n#        \"client_email\": \"your-client@your-project-id.iam.gserviceaccount.com\",\n#        \"client_id\": \"client-id\",\n#        \"auth_uri\": \"https://accounts.google.com/o/oauth2/auth\",\n#        \"token_uri\": \"https://oauth2.googleapis.com/token\",\n#        \"auth_provider_x509_cert_url\": \"https://www.googleapis.com/oauth2/v1/certs\",\n#        \"client_x509_cert_url\": \"https://www.googleapis.com/robot/v1/metadata/x509/your-client%40your-project-id.iam.gserviceaccount.com\",\n#        \"universe_domain\": \"googleapis.com\"\n#      }'\n\n    batch: 256\n    csv:\n      delimiter: \"|\"\n      withHeader: false\n      lazyQuotes: false\n    tags:\n    - name: Person\n#      mode: INSERT\n#      filter:  \n#        expr: Record[1] == \"XXX\"\n      id:\n        type: \"STRING\"\n        function: \"hash\"\n#       index: 0        \n        concatItems:\n          - person_\n          - 0\n          - _id\n      props:\n        - name: \"firstName\"\n          type: \"STRING\"\n          index: 1\n        - name: \"lastName\"\n          type: \"STRING\"\n          index: 2\n        - name: \"gender\"\n          type: \"STRING\"\n          index: 3\n          nullable: true\n          defaultValue: female\n        - name: \"birthday\"\n          type: \"DATE\"\n          index: 4\n          nullable: true\n          nullValue: _NULL_\n        - name: \"creationDate\"\n          type: \"DATETIME\"\n          index: 5\n        - name: \"locationIP\"\n          type: \"STRING\"\n          index: 6\n        - name: \"browserUsed\"\n          type: \"STRING\"\n          index: 7\n  - path: ./knows.csv\n    batch: 256\n    edges:\n    - name: KNOWS # person_knows_person\n#      mode: INSERT\n#      filter:  \n#        expr: Record[1] == \"XXX\"\n      src:\n        id:\n          type: \"STRING\"\n          concatItems:\n            - person_\n            - 0\n            - _id\n      dst:\n        id:\n          type: \"STRING\"\n          concatItems:\n            - person_\n            - 1\n            - _id\n      props:\n        - name: \"creationDate\"\n          type: \"DATETIME\"\n          index: 2\n          nullable: true\n          nullValue: _NULL_\n          defaultValue: 0000-00-00T00:00:00\n</code></pre> <p>\u914d\u7f6e\u4e3b\u8981\u5305\u62ec\u4ee5\u4e0b\u51e0\u4e2a\u90e8\u5206\uff1a</p> <ul> <li>\u6307\u5b9a\u6570\u636e\u6e90\u4fe1\u606f\u3002</li> <li>\u6307\u5b9a\u6267\u884c\u8bed\u53e5\u7684\u6279\u5904\u7406\u91cf\u3002</li> <li>\u6307\u5b9a CSV \u6587\u4ef6\u683c\u5f0f\u4fe1\u606f\u3002</li> <li>\u6307\u5b9a Tag \u7684\u6a21\u5f0f\u6620\u5c04\u3002</li> <li>\u6307\u5b9a Edge type \u7684\u6a21\u5f0f\u6620\u5c04\u3002</li> </ul> \u53c2\u6570 \u9ed8\u8ba4\u503c \u662f\u5426\u5fc5\u987b \u8bf4\u660e <code>sources.path</code><code>sources.s3</code><code>sources.oss</code><code>sources.ftp</code><code>sources.sftp</code><code>sources.hdfs</code> - \u5426 \u6307\u5b9a\u6570\u636e\u6e90\u4fe1\u606f\uff0c\u4f8b\u5982\u672c\u5730\u6587\u4ef6\u3001HDFS\u3001S3 \u7b49\u3002\u4e00\u4e2a<code>source</code>\u53ea\u80fd\u914d\u7f6e\u4e00\u79cd\u6570\u636e\u6e90\uff0c\u914d\u7f6e\u591a\u4e2a\u6570\u636e\u6e90\u8bf7\u5728\u591a\u4e2a<code>source</code>\u5185\u914d\u7f6e\u3002\u4e0d\u540c\u6570\u636e\u6e90\u7684\u914d\u7f6e\u9879\u8bf4\u660e\u8bf7\u53c2\u89c1\u793a\u4f8b\u5185\u7684\u6ce8\u91ca\u3002 <code>sources.batch</code> <code>256</code> \u5426 \u5bfc\u5165\u8be5\u6570\u636e\u6e90\u65f6\u6267\u884c\u8bed\u53e5\u7684\u6279\u5904\u7406\u91cf\u3002\u4f18\u5148\u7ea7\u9ad8\u4e8e<code>manager.batch</code>\u3002 <code>sources.csv.delimiter</code> <code>,</code> \u5426 CSV \u6587\u4ef6\u7684\u5206\u9694\u7b26\u3002\u4ec5\u652f\u6301 1 \u4e2a\u5b57\u7b26\u7684\u5b57\u7b26\u4e32\u5206\u9694\u7b26\u3002\u4f7f\u7528\u7279\u6b8a\u5b57\u7b26\u505a\u5206\u9694\u7b26\u65f6\u9700\u8981\u8fdb\u884c\u8f6c\u4e49\u3002\u4f8b\u5982\u5f53\u5206\u9694\u7b26\u4e3a\u5341\u516d\u8fdb\u5236<code>0x03</code>\u5373<code>Ctrl+C</code>\u65f6\uff0c\u8f6c\u4e49\u7684\u5199\u6cd5\u4e3a\uff1a<code>\"\\x03\"</code>\u6216<code>\"\\u0003\"</code>\u3002\u5173\u4e8e yaml \u683c\u5f0f\u7279\u6b8a\u5b57\u7b26\u8f6c\u4e49\u7684\u7ec6\u8282\u8bf7\u53c2\u89c1Escaped Characters\u3002 <code>sources.csv.withHeader</code> <code>false</code> \u5426 \u662f\u5426\u5ffd\u7565 CSV \u6587\u4ef6\u4e2d\u7684\u7b2c\u4e00\u6761\u8bb0\u5f55\u3002 <code>sources.csv.lazyQuotes</code> <code>false</code> \u5426 \u662f\u5426\u5141\u8bb8\u60f0\u6027\u89e3\u6790\u5f15\u53f7\u3002\u5982\u679c\u503c\u4e3a<code>true</code>\uff0c\u5f15\u53f7\u53ef\u4ee5\u51fa\u73b0\u5728\u975e\u5f15\u53f7\u5b57\u6bb5\u4e2d\uff0c\u975e\u53cc\u5f15\u53f7\u53ef\u4ee5\u51fa\u73b0\u5728\u5f15\u53f7\u5b57\u6bb5\u4e2d\uff0c\u800c\u4e0d\u4f1a\u5f15\u53d1\u89e3\u6790\u9519\u8bef\u3002 <code>sources.tags.name</code> - \u662f Tag \u540d\u79f0\u3002 <code>sources.tags.mode</code> <code>INSERT</code> \u5426 \u6279\u91cf\u64cd\u4f5c\u7c7b\u578b\uff0c\u5305\u62ec\u5bfc\u5165\u3001\u66f4\u65b0\u548c\u5220\u9664\u3002\u53ef\u9009\u503c\u4e3a<code>INSERT</code>\u3001<code>UPDATE</code>\u548c<code>DELETE</code>\u3002 <code>sources.tags.filter.expr</code> - \u5426 \u8fc7\u6ee4\u6570\u636e\uff0c\u6ee1\u8db3\u8fc7\u6ee4\u6761\u4ef6\u7684\u624d\u4f1a\u5bfc\u5165\u3002\u652f\u6301\u7684\u6bd4\u8f83\u7b26\u4e3a<code>==</code>\u3001<code>!=</code>\u3001<code>&lt;</code>\u3001<code>&gt;</code>\u3001<code>&lt;=</code>\u548c<code>&gt;=</code>\u3002\u652f\u6301\u7684\u903b\u8f91\u8fd0\u7b97\u7b26\u4e3a<code>not</code>\uff08!\uff09\u3001<code>and</code>\uff08&amp;&amp;\uff09\u548c<code>or</code>\uff08||\uff09\u3002\u4f8b\u5982<code>(Record[0] == \"Mahinda\" or Record[0] == \"Michael\") and Record[3] == \"male\"</code>\u3002 <code>sources.tags.id.type</code> <code>STRING</code> \u5426 VID \u7684\u7c7b\u578b\u3002 <code>sources.tags.id.function</code> - \u5426 \u751f\u6210 VID \u7684\u51fd\u6570\u3002\u76ee\u524d\u4ec5\u652f\u6301<code>hash</code>\u3002 <code>sources.tags.id.index</code> - \u5426 VID \u5bf9\u5e94\u7684\u6570\u636e\u6587\u4ef6\u4e2d\u7684\u5217\u53f7\u3002\u5982\u679c\u672a\u914d\u7f6e<code>sources.tags.id.concatItems</code>\uff0c\u8be5\u53c2\u6570\u5fc5\u987b\u914d\u7f6e\u3002 <code>sources.tags.id.concatItems</code> - \u5426 \u7528\u4e8e\u8fde\u63a5\u4e24\u4e2a\u6216\u591a\u4e2a\u6570\u7ec4\uff0c\u8fde\u63a5\u9879\u53ef\u4ee5\u662f<code>string</code>\u3001<code>int</code>\u6216\u8005\u6df7\u5408\u3002<code>string</code>\u4ee3\u8868\u5e38\u91cf\uff0c<code>int</code>\u8868\u793a\u7d22\u5f15\u5217\u3002\u5982\u679c\u8bbe\u7f6e\u4e86\u8be5\u53c2\u6570\uff0c<code>sources.tags.id.index</code>\u53c2\u6570\u5c06\u4e0d\u751f\u6548\u3002 <code>sources.tags.ignoreExistedIndex</code> <code>true</code> \u5426 \u662f\u5426\u542f\u7528<code>IGNORE_EXISTED_INDEX</code>\uff0c\u5373\u63d2\u5165\u70b9\u540e\u4e0d\u66f4\u65b0\u7d22\u5f15\u3002 <code>sources.tags.props.name</code> - \u662f VID \u4e0a\u7684\u5c5e\u6027\u540d\u79f0\uff0c\u5fc5\u987b\u4e0e\u6570\u636e\u5e93\u4e2d\u7684\u5c5e\u6027\u76f8\u540c\u3002 <code>sources.tags.props.type</code> <code>STRING</code> \u5426 VID \u4e0a\u5c5e\u6027\u7684\u6570\u636e\u7c7b\u578b\u3002\u76ee\u524d\u652f\u6301<code>BOOL</code>\u3001<code>INT</code>\u3001<code>FLOAT</code>\u3001<code>DOUBLE</code>\u3001<code>STRING</code>\u3001<code>TIME</code>\u3001<code>TIMESTAMP</code>\u3001<code>DATE</code>\u3001<code>DATETIME</code>\u3001<code>GEOGRAPHY</code>\u3001<code>GEOGRAPHY(POINT)</code>\u3001<code>GEOGRAPHY(LINESTRING)</code>\u3001<code>GEOGRAPHY(POLYGON)</code>\u3002 <code>sources.tags.props.index</code> - \u662f \u5c5e\u6027\u503c\u5bf9\u5e94\u7684\u6570\u636e\u6587\u4ef6\u4e2d\u7684\u5217\u53f7\u3002 <code>sources.tags.props.nullable</code> <code>false</code> \u5426 \u5c5e\u6027\u662f\u5426\u53ef\u4ee5\u4e3a<code>NULL</code>\uff0c\u53ef\u9009<code>true</code>\u6216\u8005<code>false</code>\u3002 <code>sources.tags.props.nullValue</code> - \u5426 <code>nullable</code>\u8bbe\u7f6e\u4e3a<code>true</code>\u65f6\uff0c\u5c5e\u6027\u7684\u503c\u4e0e<code>nullValue</code>\u76f8\u7b49\u5219\u5c06\u8be5\u5c5e\u6027\u503c\u8bbe\u7f6e\u4e3a<code>NULL</code>\u3002 <code>sources.tags.props.alternativeIndices</code> - \u5426 \u5f53<code>nullable</code>\u4e3a<code>false</code>\u65f6\u5ffd\u7565\u3002\u8be5\u5c5e\u6027\u6839\u636e\u7d22\u5f15\u987a\u5e8f\u4ece\u6587\u4ef6\u4e2d\u83b7\u53d6\uff0c\u76f4\u5230\u4e0d\u7b49\u4e8e<code>nullValue</code>\u3002 <code>sources.tags.props.defaultValue</code> - \u5426 \u5f53<code>nullable</code>\u4e3a<code>false</code>\u65f6\u5ffd\u7565\u3002\u6839\u636e<code>index</code>\u548c<code>alternativeIndices</code>\u83b7\u53d6\u7684\u6240\u6709\u503c\u4e3a<code>nullValue</code>\u65f6\u8bbe\u7f6e\u9ed8\u8ba4\u503c\u3002 <code>sources.edges.name</code> - \u662f Edge type \u540d\u79f0\u3002 <code>sources.edges.mode</code> <code>INSERT</code> \u5426 \u6279\u91cf\u64cd\u4f5c\u7c7b\u578b\uff0c\u5305\u62ec\u5bfc\u5165\u3001\u66f4\u65b0\u548c\u5220\u9664\u3002\u53ef\u9009\u503c\u4e3a<code>INSERT</code>\u3001<code>UPDATE</code>\u548c<code>DELETE</code>\u3002 <code>sources.edges.filter.expr</code> - \u5426 \u8fc7\u6ee4\u6570\u636e\uff0c\u6ee1\u8db3\u8fc7\u6ee4\u6761\u4ef6\u7684\u624d\u4f1a\u5bfc\u5165\u3002\u652f\u6301\u7684\u6bd4\u8f83\u7b26\u4e3a<code>==</code>\u3001<code>!=</code>\u3001<code>&lt;</code>\u3001<code>&gt;</code>\u3001<code>&lt;=</code>\u548c<code>&gt;=</code>\u3002\u652f\u6301\u7684\u903b\u8f91\u8fd0\u7b97\u7b26\u4e3a<code>not</code>\uff08!\uff09\u3001<code>and</code>\uff08&amp;&amp;\uff09\u548c<code>or</code>\uff08||\uff09\u3002\u4f8b\u5982<code>(Record[0] == \"Mahinda\" or Record[0] == \"Michael\") and Record[3] == \"male\"</code>\u3002 <code>sources.edges.src.id.type</code> <code>STRING</code> \u5426 \u8fb9\u4e0a\u8d77\u70b9 VID \u7684\u6570\u636e\u7c7b\u578b\u3002 <code>sources.edges.src.id.index</code> - \u662f \u8fb9\u4e0a\u8d77\u70b9 VID \u5bf9\u5e94\u7684\u6570\u636e\u6587\u4ef6\u4e2d\u7684\u5217\u53f7\u3002 <code>sources.edges.dst.id.type</code> <code>STRING</code> \u5426 \u8fb9\u4e0a\u7ec8\u70b9 VID \u7684\u6570\u636e\u7c7b\u578b\u3002 <code>sources.edges.dst.id.index</code> - \u662f \u8fb9\u4e0a\u7ec8\u70b9 VID \u5bf9\u5e94\u7684\u6570\u636e\u6587\u4ef6\u4e2d\u7684\u5217\u53f7\u3002 <code>sources.edges.rank.index</code> - \u5426 \u8fb9\u4e0a RANK \u5bf9\u5e94\u7684\u6570\u636e\u6587\u4ef6\u4e2d\u7684\u5217\u53f7\u3002 <code>sources.edges.ignoreExistedIndex</code> <code>true</code> \u5426 \u662f\u5426\u542f\u7528<code>IGNORE_EXISTED_INDEX</code>\uff0c\u5373\u63d2\u5165\u70b9\u540e\u4e0d\u66f4\u65b0\u7d22\u5f15\u3002 <code>sources.edges.props.name</code> - \u5426 \u8fb9\u4e0a\u5c5e\u6027\u7684\u540d\u79f0\uff0c\u5fc5\u987b\u4e0e\u6570\u636e\u5e93\u4e2d\u7684\u5c5e\u6027\u76f8\u540c\u3002 <code>sources.edges.props.type</code> <code>STRING</code> \u5426 \u8fb9\u4e0a\u5c5e\u6027\u7684\u6570\u636e\u7c7b\u578b\u3002\u76ee\u524d\u652f\u6301<code>BOOL</code>\u3001<code>INT</code>\u3001<code>FLOAT</code>\u3001<code>DOUBLE</code>\u3001<code>STRING</code>\u3001<code>TIME</code>\u3001<code>TIMESTAMP</code>\u3001<code>DATE</code>\u3001<code>DATETIME</code>\u3001<code>GEOGRAPHY</code>\u3001<code>GEOGRAPHY(POINT)</code>\u3001<code>GEOGRAPHY(LINESTRING)</code>\u3001<code>GEOGRAPHY(POLYGON)</code>\u3002 <code>sources.edges.props.index</code> - \u5426 \u5c5e\u6027\u503c\u5bf9\u5e94\u7684\u6570\u636e\u6587\u4ef6\u4e2d\u7684\u5217\u53f7\u3002 <code>sources.edges.props.nullable</code> - \u5426 \u5c5e\u6027\u662f\u5426\u53ef\u4ee5\u4e3a<code>NULL</code>\uff0c\u53ef\u9009<code>true</code>\u6216\u8005<code>false</code>\u3002 <code>sources.edges.props.nullValue</code> - \u5426 <code>nullable</code>\u8bbe\u7f6e\u4e3a<code>true</code>\u65f6\uff0c\u5c5e\u6027\u7684\u503c\u4e0e<code>nullValue</code>\u76f8\u7b49\u5219\u5c06\u8be5\u5c5e\u6027\u503c\u8bbe\u7f6e\u4e3a<code>NULL</code>\u3002 <code>sources.edges.props.defaultValue</code> - \u5426 \u5f53<code>nullable</code>\u4e3a<code>false</code>\u65f6\u5ffd\u7565\u3002\u6839\u636e<code>index</code>\u548c<code>alternativeIndices</code>\u83b7\u53d6\u7684\u6240\u6709\u503c\u4e3a<code>nullValue</code>\u65f6\u8bbe\u7f6e\u9ed8\u8ba4\u503c\u3002 <p>Note</p> <p>CSV \u6587\u4ef6\u4e2d\u5217\u7684\u5e8f\u53f7\u4ece 0 \u5f00\u59cb\uff0c\u5373\u7b2c\u4e00\u5217\u7684\u5e8f\u53f7\u4e3a 0\uff0c\u7b2c\u4e8c\u5217\u7684\u5e8f\u53f7\u4e3a 1\u3002</p>"},{"location":"import-export/use-importer/#_10","title":"\u793e\u533a\u7528\u6237\u5b9e\u8df5","text":"<ul> <li>NebulaGraph Importer \u6570\u636e\u5bfc\u5165\u5b9e\u8df5\u548c\u603b\u7ed3</li> <li>\u57fa\u4e8e Nebula-Importer \u6279\u91cf\u5bfc\u5165\u5de5\u5177\u6027\u80fd\u9a8c\u8bc1\u65b9\u6848\u603b\u7ed3</li> <li>\u8be6\u89e3 nebula-importer \u6027\u80fd\u6d4b\u8bd5\u548c\u6570\u636e\u5bfc\u5165\u8c03\u4f18</li> </ul> <p>Note</p> <p>\u9605\u8bfb\u4ed6\u4eba\u5b9e\u8df5\u540e\u5018\u82e5\u60f3\u6309\u539f\u6587\u5b9e\u8df5\uff0c\u8bf7\u7559\u610f\u539f\u6587\u6240\u7528\u7684\u5185\u6838\u548c\u5468\u8fb9\u5de5\u5177\u7248\u672c\u53f7\uff0c\u8bf7\u786e\u4fdd\u4f60\u7684\u8f6f\u4ef6\u73af\u5883\u548c\u539f\u6587\u517c\u5bb9\u3002</p>"},{"location":"import-export/write-tools/","title":"\u5bfc\u5165\u5de5\u5177\u9009\u62e9","text":"<p>\u6709\u591a\u79cd\u65b9\u5f0f\u53ef\u4ee5\u5c06\u6570\u636e\u5199\u5165 NebulaGraph master\uff1a</p> <ul> <li>\u4f7f\u7528\u547d\u4ee4\u884c -f \u7684\u65b9\u5f0f\u5bfc\u5165\uff1a\u53ef\u4ee5\u5bfc\u5165\u5c11\u91cf\u51c6\u5907\u597d\u7684 nGQL \u6587\u4ef6\uff0c\u9002\u5408\u5c11\u91cf\u624b\u5de5\u6d4b\u8bd5\u6570\u636e\u51c6\u5907\uff1b</li> </ul> <ul> <li>\u4f7f\u7528 Studio \u5bfc\u5165\uff1a\u53ef\u4ee5\u7528\u8fc7\u6d4f\u89c8\u5668\u5bfc\u5165\u672c\u673a\u591a\u4e2a csv \u6587\u4ef6\uff0c\u683c\u5f0f\u6709\u9650\u5236\uff1b </li> </ul> <ul> <li>\u4f7f\u7528 Importer \u5bfc\u5165\uff1a\u5bfc\u5165\u5355\u673a\u591a\u4e2a csv \u6587\u4ef6\uff0c\u5927\u5c0f\u6ca1\u6709\u9650\u5236\uff0c\u683c\u5f0f\u7075\u6d3b\uff1b\u6570\u636e\u91cf\u5341\u4ebf\u7ea7\u4ee5\u5185\uff1b</li> <li>\u4f7f\u7528 Exchange \u5bfc\u5165\uff1a\u4ece Neo4j, Hive, MySQL \u7b49\u591a\u79cd\u6e90\u5206\u5e03\u5f0f\u5bfc\u5165\uff0c\u9700\u8981\u6709 Spark \u96c6\u7fa4\uff1b\u6570\u636e\u91cf\u5341\u4ebf\u7ea7\u4ee5\u4e0a</li> <li>\u4f7f\u7528 Spark-connector/Flink-connector \u5bfc\u5165\uff1a\u6709\u76f8\u5e94\u7ec4\u4ef6 (Spark/Flink)\uff0c\u64b0\u5199\u5c11\u91cf\u4ee3\u7801\uff1b</li> <li>\u4f7f\u7528 C++/GO/Java/Python SDK\uff1a\u7f16\u5199\u7a0b\u5e8f\u7684\u65b9\u5f0f\u5bfc\u5165\uff0c\u9700\u8981\u6709\u4e00\u5b9a\u7f16\u7a0b\u548c\u8c03\u4f18\u80fd\u529b\u3002</li> </ul> <p>\u4e0b\u56fe\u7ed9\u51fa\u4e86\u51e0\u79cd\u65b9\u5f0f\u7684\u5b9a\u4f4d\uff1a</p> <p></p>"},{"location":"import-export/nebula-exchange/ex-ug-FAQ/","title":"Exchange \u5e38\u89c1\u95ee\u9898","text":""},{"location":"import-export/nebula-exchange/ex-ug-FAQ/#_1","title":"\u7f16\u8bd1\u95ee\u9898","text":""},{"location":"import-export/nebula-exchange/ex-ug-FAQ/#q_central_could_not_resolve_dependencies_for_project_xxx","title":"Q\uff1a\u90e8\u5206\u975e central \u4ed3\u5e93\u7684\u5305\u4e0b\u8f7d\u5931\u8d25\uff0c\u62a5\u9519<code>Could not resolve dependencies for project xxx</code>","text":"<p>\u8bf7\u68c0\u67e5 Maven \u5b89\u88c5\u76ee\u5f55\u4e0b<code>libexec/conf/settings.xml</code>\u6587\u4ef6\u7684<code>mirror</code>\u90e8\u5206\uff1a</p> <pre><code>&lt;mirror&gt;\n    &lt;id&gt;alimaven&lt;/id&gt;\n    &lt;mirrorOf&gt;central&lt;/mirrorOf&gt;\n    &lt;name&gt;aliyun maven&lt;/name&gt;\n    &lt;url&gt;http://maven.aliyun.com/nexus/content/repositories/central/&lt;/url&gt;\n&lt;/mirror&gt;\n</code></pre> <p>\u68c0\u67e5<code>mirrorOf</code>\u7684\u503c\u662f\u5426\u914d\u7f6e\u4e3a<code>*</code>\uff0c\u5982\u679c\u4e3a<code>*</code>\uff0c\u8bf7\u4fee\u6539\u4e3a<code>central</code>\u6216<code>*,!SparkPackagesRepo,!bintray-streamnative-maven</code>\u3002</p> <p>\u539f\u56e0\uff1aExchange \u7684<code>pom.xml</code>\u4e2d\u6709\u4e24\u4e2a\u4f9d\u8d56\u5305\u4e0d\u5728 Maven \u7684 central \u4ed3\u5e93\u4e2d\uff0c<code>pom.xml</code>\u914d\u7f6e\u4e86\u8fd9\u4e24\u4e2a\u4f9d\u8d56\u6240\u5728\u7684\u4ed3\u5e93\u5730\u5740\u3002\u5982\u679c maven \u4e2d\u914d\u7f6e\u7684\u955c\u50cf\u5730\u5740\u5bf9\u5e94\u7684<code>mirrorOf</code>\u503c\u4e3a<code>*</code>\uff0c\u90a3\u4e48\u6240\u6709\u4f9d\u8d56\u90fd\u4f1a\u5728 central \u4ed3\u5e93\u4e0b\u8f7d\uff0c\u5bfc\u81f4\u4e0b\u8f7d\u5931\u8d25\u3002</p>"},{"location":"import-export/nebula-exchange/ex-ug-FAQ/#q_exchange_snapshot","title":"Q\uff1a\u7f16\u8bd1 Exchange \u65f6\u65e0\u6cd5\u4e0b\u8f7d SNAPSHOT \u5305","text":"<p>\u73b0\u8c61\uff1a\u7f16\u8bd1\u65f6\u63d0\u793a<code>Could not find artifact com.vesoft:client:jar:xxx-SNAPSHOT</code>\u3002</p> <p>\u539f\u56e0\uff1a\u672c\u5730 maven \u6ca1\u6709\u914d\u7f6e\u7528\u4e8e\u4e0b\u8f7d SNAPSHOT \u7684\u4ed3\u5e93\u3002maven \u4e2d\u9ed8\u8ba4\u7684 central \u4ed3\u5e93\u7528\u4e8e\u5b58\u653e\u6b63\u5f0f\u53d1\u5e03\u7248\u672c\uff0c\u800c\u4e0d\u662f\u5f00\u53d1\u7248\u672c\uff08SNAPSHOT\uff09\u3002</p> <p>\u89e3\u51b3\u65b9\u6848\uff1a\u5728 maven \u7684 setting.xml\u6587\u4ef6\u7684<code>profiles</code>\u4f5c\u7528\u57df\u5185\u4e2d\u589e\u52a0\u4ee5\u4e0b\u914d\u7f6e\uff1a</p> <pre><code>  &lt;profile&gt;\n     &lt;activation&gt;\n        &lt;activeByDefault&gt;true&lt;/activeByDefault&gt;\n     &lt;/activation&gt;\n     &lt;repositories&gt;\n        &lt;repository&gt;\n            &lt;id&gt;snapshots&lt;/id&gt;\n            &lt;url&gt;https://oss.sonatype.org/content/repositories/snapshots/&lt;/url&gt;\n            &lt;snapshots&gt;\n               &lt;enabled&gt;true&lt;/enabled&gt;\n            &lt;/snapshots&gt;\n      &lt;/repository&gt;\n     &lt;/repositories&gt;\n  &lt;/profile&gt;\n</code></pre>"},{"location":"import-export/nebula-exchange/ex-ug-FAQ/#_2","title":"\u6267\u884c\u95ee\u9898","text":""},{"location":"import-export/nebula-exchange/ex-ug-FAQ/#qjavalangclassnotfoundexception_comvesoftnebulaexchangeexchange","title":"Q\uff1a\u62a5\u9519<code>java.lang.ClassNotFoundException: com.vesoft.nebula.exchange.Exchange</code>","text":"<p>\u5728 Yarn-Cluster \u6a21\u5f0f\u4e0b\u63d0\u4ea4\u4efb\u52a1\uff0c\u8bf7\u53c2\u8003\u5982\u4e0b\u547d\u4ee4\uff0c\u5c24\u5176\u662f\u793a\u4f8b\u4e2d\u7684\u4e24\u4e2a<code>--conf</code>\uff1a</p> <pre><code>$SPARK_HOME/bin/spark-submit --class com.vesoft.nebula.exchange.Exchange \\\n--master yarn-cluster \\\n--files application.conf \\\n--conf spark.driver.extraClassPath=./ \\\n--conf spark.executor.extraClassPath=./ \\\nnebula-exchange-3.0.0.jar \\\n-c application.conf\n</code></pre>"},{"location":"import-export/nebula-exchange/ex-ug-FAQ/#qmethod_name_xxx_not_found","title":"Q\uff1a\u62a5\u9519<code>method name xxx not found</code>","text":"<p>\u4e00\u822c\u662f\u7aef\u53e3\u914d\u7f6e\u9519\u8bef\uff0c\u9700\u68c0\u67e5 Meta \u670d\u52a1\u3001Graph \u670d\u52a1\u3001Storage \u670d\u52a1\u7684\u7aef\u53e3\u914d\u7f6e\u3002</p>"},{"location":"import-export/nebula-exchange/ex-ug-FAQ/#q_nosuchmethodmethodnotfound_exception_in_thread_main_javalangnosuchmethoderror","title":"Q\uff1a\u62a5 NoSuchMethod\u3001MethodNotFound \u9519\u8bef\uff08<code>Exception in thread \"main\" java.lang.NoSuchMethodError</code>\u7b49\uff09","text":"<p>\u7edd\u5927\u591a\u6570\u662f\u56e0\u4e3a JAR \u5305\u51b2\u7a81\u548c\u7248\u672c\u51b2\u7a81\u5bfc\u81f4\u7684\u62a5\u9519\uff0c\u8bf7\u68c0\u67e5\u62a5\u9519\u670d\u52a1\u7684\u7248\u672c\uff0c\u4e0e Exchange \u4e2d\u4f7f\u7528\u7684\u7248\u672c\u8fdb\u884c\u5bf9\u6bd4\uff0c\u68c0\u67e5\u662f\u5426\u4e00\u81f4\uff0c\u5c24\u5176\u662f Spark \u7248\u672c\u3001Scala \u7248\u672c\u3001Hive \u7248\u672c\u3002</p>"},{"location":"import-export/nebula-exchange/ex-ug-FAQ/#qexchange_hive_exception_in_thread_main_orgapachesparksqlanalysisexception_table_or_view_not_found","title":"Q\uff1aExchange \u5bfc\u5165 Hive \u6570\u636e\u65f6\u62a5\u9519<code>Exception in thread \"main\" org.apache.spark.sql.AnalysisException: Table or view not found</code>","text":"<p>\u68c0\u67e5\u63d0\u4ea4 exchange \u4efb\u52a1\u7684\u547d\u4ee4\u4e2d\u662f\u5426\u9057\u6f0f\u53c2\u6570<code>-h</code>\uff0c\u68c0\u67e5 table \u548c database \u662f\u5426\u6b63\u786e\uff0c\u5728 spark-sql \u4e2d\u6267\u884c\u7528\u6237\u914d\u7f6e\u7684 exec \u8bed\u53e5\uff0c\u9a8c\u8bc1 exec \u8bed\u53e5\u7684\u6b63\u786e\u6027\u3002</p>"},{"location":"import-export/nebula-exchange/ex-ug-FAQ/#qcomfacebookthriftprotocoltprotocolexception_expected_protocol_id_xxx","title":"Q\uff1a\u8fd0\u884c\u65f6\u62a5\u9519<code>com.facebook.thrift.protocol.TProtocolException: Expected protocol id xxx</code>","text":"<p>\u8bf7\u68c0\u67e5 NebulaGraph \u670d\u52a1\u7aef\u53e3\u914d\u7f6e\u662f\u5426\u6b63\u786e\u3002</p> <ul> <li>\u5982\u679c\u662f\u6e90\u7801\u3001RPM \u6216 DEB \u5b89\u88c5\uff0c\u8bf7\u914d\u7f6e\u5404\u4e2a\u670d\u52a1\u7684\u914d\u7f6e\u6587\u4ef6\u4e2d<code>--port</code>\u5bf9\u5e94\u7684\u7aef\u53e3\u53f7\u3002</li> </ul> <ul> <li>\u5982\u679c\u662f docker \u5b89\u88c5\uff0c\u8bf7\u914d\u7f6e docker \u6620\u5c04\u51fa\u6765\u7684\u7aef\u53e3\u53f7\uff0c\u67e5\u770b\u65b9\u5f0f\u5982\u4e0b\uff1a<p>\u5728<code>nebula-docker-compose</code>\u76ee\u5f55\u4e0b\u6267\u884c<code>docker-compose ps</code>\uff0c\u4f8b\u5982\uff1a</p> <pre><code>$ docker-compose ps\n              Name                             Command                  State                                                         Ports\n---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------\nnebula-docker-compose_graphd_1      /usr/local/nebula/bin/nebu ...   Up (healthy)   0.0.0.0:33205-&gt;19669/tcp, 0.0.0.0:33204-&gt;19670/tcp, 0.0.0.0:9669-&gt;9669/tcp\nnebula-docker-compose_metad0_1      ./bin/nebula-metad --flagf ...   Up (healthy)   0.0.0.0:33165-&gt;19559/tcp, 0.0.0.0:33162-&gt;19560/tcp, 0.0.0.0:33167-&gt;9559/tcp, 9560/tcp\nnebula-docker-compose_metad1_1      ./bin/nebula-metad --flagf ...   Up (healthy)   0.0.0.0:33166-&gt;19559/tcp, 0.0.0.0:33163-&gt;19560/tcp, 0.0.0.0:33168-&gt;9559/tcp, 9560/tcp\nnebula-docker-compose_metad2_1      ./bin/nebula-metad --flagf ...   Up (healthy)   0.0.0.0:33161-&gt;19559/tcp, 0.0.0.0:33160-&gt;19560/tcp, 0.0.0.0:33164-&gt;9559/tcp, 9560/tcp\nnebula-docker-compose_storaged0_1   ./bin/nebula-storaged --fl ...   Up (healthy)   0.0.0.0:33180-&gt;19779/tcp, 0.0.0.0:33178-&gt;19780/tcp, 9777/tcp, 9778/tcp, 0.0.0.0:33183-&gt;9779/tcp, 9780/tcp\nnebula-docker-compose_storaged1_1   ./bin/nebula-storaged --fl ...   Up (healthy)   0.0.0.0:33175-&gt;19779/tcp, 0.0.0.0:33172-&gt;19780/tcp, 9777/tcp, 9778/tcp, 0.0.0.0:33177-&gt;9779/tcp, 9780/tcp\nnebula-docker-compose_storaged2_1   ./bin/nebula-storaged --fl ...   Up (healthy)   0.0.0.0:33184-&gt;19779/tcp, 0.0.0.0:33181-&gt;19780/tcp, 9777/tcp, 9778/tcp, 0.0.0.0:33185-&gt;9779/tcp, 9780/tcp\n</code></pre> <p>\u67e5\u770b<code>Ports</code>\u5217\uff0c\u67e5\u627e docker \u6620\u5c04\u7684\u7aef\u53e3\u53f7\uff0c\u4f8b\u5982\uff1a</p> <p>- Graph \u670d\u52a1\u53ef\u7528\u7684\u7aef\u53e3\u53f7\u662f 9669\u3002</p> <p>- Meta \u670d\u52a1\u53ef\u7528\u7684\u7aef\u53e3\u53f7\u6709 33167\u300133168\u300133164\u3002</p> <p>- Storage \u670d\u52a1\u53ef\u7528\u7684\u7aef\u53e3\u53f7\u6709 33183\u300133177\u300133185\u3002</p> </li> </ul>"},{"location":"import-export/nebula-exchange/ex-ug-FAQ/#qexception_in_thread_main_comfacebookthriftprotocoltprotocolexception_the_field_code_has_been_assigned_the_invalid_value_-4","title":"Q\uff1a\u8fd0\u884c\u65f6\u62a5\u9519<code>Exception in thread \"main\" com.facebook.thrift.protocol.TProtocolException: The field 'code' has been assigned the invalid value -4</code>","text":"<p>\u68c0\u67e5 Exchange \u7248\u672c\u4e0e NebulaGraph \u7248\u672c\u662f\u5426\u5339\u914d\uff0c\u8be6\u7ec6\u4fe1\u606f\u53ef\u53c2\u8003\u4f7f\u7528\u9650\u5236\u3002</p>"},{"location":"import-export/nebula-exchange/ex-ug-FAQ/#qspark","title":"Q\uff1aSpark \u73af\u5883\u4e2d\u5bfc\u5165\u6570\u636e\u65f6\u51fa\u73b0\u4e71\u7801\u5982\u4f55\u89e3\u51b3\uff1f","text":"<p>\u5982\u679c\u6570\u636e\u7684\u5c5e\u6027\u503c\u5305\u542b\u4e2d\u6587\u5b57\u7b26\uff0c\u53ef\u80fd\u51fa\u73b0\u4e71\u7801\u3002\u89e3\u51b3\u65b9\u6848\u662f\u5728\u5bfc\u5165\u547d\u4ee4\u4e2d\u7684 JAR \u5305\u8def\u5f84\u524d\u52a0\u4e0a\u4ee5\u4e0b\u9009\u9879\uff1a</p> <pre><code>--conf spark.driver.extraJavaOptions=-Dfile.encoding=utf-8\n--conf spark.executor.extraJavaOptions=-Dfile.encoding=utf-8\n</code></pre> <p>\u5373\uff1a</p> <pre><code>&lt;spark_install_path&gt;/bin/spark-submit --master \"local\" \\\n--conf spark.driver.extraJavaOptions=-Dfile.encoding=utf-8 \\\n--conf spark.executor.extraJavaOptions=-Dfile.encoding=utf-8 \\\n--class com.vesoft.nebula.exchange.Exchange \\\n&lt;nebula-exchange-3.x.y.jar_path&gt; -c &lt;application.conf_path&gt;\n</code></pre> <p>\u5982\u679c\u662f\u5728 YARN \u4e2d\uff0c\u5219\u7528\u4ee5\u4e0b\u547d\u4ee4\uff1a</p> <pre><code>&lt;spark_install_path&gt;/bin/spark-submit \\\n--class com.vesoft.nebula.exchange.Exchange \\\n--master yarn-cluster \\\n--files &lt;application.conf_path&gt; \\\n--conf spark.driver.extraClassPath=./ \\\n--conf spark.executor.extraClassPath=./ \\\n--conf spark.driver.extraJavaOptions=-Dfile.encoding=utf-8 \\\n--conf spark.executor.extraJavaOptions=-Dfile.encoding=utf-8 \\\n&lt;nebula-exchange-3.x.y.jar_path&gt; \\\n-c application.conf\n</code></pre>"},{"location":"import-export/nebula-exchange/ex-ug-FAQ/#qhive_schema","title":"Q\uff1aHive \u6570\u636e\u5bfc\u5165\u65f6\u63d0\u793a schema \u7248\u672c\u4e0d\u4e00\u81f4","text":"<p>Spark \u65e5\u5fd7\u63d0\u793a <code>Hive Schema version 1.2.0 does not match metastore's schema version 2.1.0 Metastore is not upgraded or corrupt</code> \u7684\u539f\u56e0\u662f Hive \u73af\u5883\u4e2d\u914d\u7f6e\u7684 metastore schema \u7248\u672c\u548c Spark \u4f7f\u7528\u7684 metastore \u7248\u672c\u4e0d\u4e00\u81f4\u3002</p> <p>\u89e3\u51b3\u65b9\u6cd5\uff1a</p> <ol> <li> <p>\u5c06 Hive \u73af\u5883\u4e2d\u5b58\u50a8 Hive metastore \u4fe1\u606f\u7684 MySQL version \u4fe1\u606f\u66f4\u65b0\u4e3a Spark \u4e2d\u4f7f\u7528\u7684 metastore \u7248\u672c\u3002</p> <p>\u5047\u8bbe Hive \u5728 MySQL \u4e2d\u5b58\u50a8 metastore \u7684\u6570\u636e\u5e93\u662f<code>hive</code>\uff0c\u9700\u8981\u6309\u5982\u4e0b\u65b9\u5f0f\u4fee\u6539 <code>hive.VERSION</code> \u8868\u4e2d\u7684 <code>version</code> \u5b57\u6bb5\uff1a</p> <pre><code>update hive.VERSION set SCHEMA_VERSION=\"2.1.0\" where VER_ID=1\n</code></pre> </li> <li> <p>\u5728 Hive \u73af\u5883\u7684 <code>hive-site.xml</code> \u6587\u4ef6\u4e2d\u589e\u52a0\u5982\u4e0b\u914d\u7f6e\uff1a</p> <pre><code>&lt;property&gt;\n&lt;name&gt;hive.metastore.schema.verification&lt;/name&gt;\n&lt;value&gt;false&lt;/value&gt;\n&lt;/property&gt;\n</code></pre> </li> <li> <p>\u91cd\u542f Hive\u3002</p> </li> </ol>"},{"location":"import-export/nebula-exchange/ex-ug-FAQ/#q_sst_orgrocksdbrocksdbexception_while_open_a_file_for_appending_pathsst1-xxxsst_no_such_file_or_directory","title":"Q: \u751f\u6210 SST \u65f6\u63d0\u793a org.rocksdb.RocksDBException: While open a file for appending: /path/sst/1-xxx.sst: No such file or directory","text":"<p>\u6392\u67e5\u65b9\u6cd5\uff1a</p> <ol> <li>\u68c0\u67e5<code>/path</code>\u662f\u5426\u5b58\u5728\uff0c\u5982\u6ca1\u6709\u6216\u8005\u8def\u5f84\u8bbe\u7f6e\u9519\u8bef\uff0c\u521b\u5efa\u6216\u4fee\u6b63\u8def\u5f84\u3002</li> <li>\u68c0\u67e5 Spark \u5728\u6bcf\u53f0\u673a\u5668\u4e0a\u7684\u5f53\u524d\u7528\u6237\u5bf9<code>/path</code>\u662f\u5426\u6709\u64cd\u4f5c\u6743\u9650\uff0c\u5982\u6ca1\u6709\uff0c\u6dfb\u52a0\u6743\u9650\u3002</li> </ol>"},{"location":"import-export/nebula-exchange/ex-ug-FAQ/#_3","title":"\u914d\u7f6e\u95ee\u9898","text":""},{"location":"import-export/nebula-exchange/ex-ug-FAQ/#q","title":"Q\uff1a\u54ea\u4e9b\u914d\u7f6e\u9879\u5f71\u54cd\u5bfc\u5165\u6027\u80fd\uff1f","text":"<ul> <li>batch\uff1a\u6bcf\u6b21\u53d1\u9001\u7ed9 NebulaGraph \u670d\u52a1\u7684 nGQL \u8bed\u53e5\u4e2d\u5305\u542b\u7684\u6570\u636e\u6761\u6570\u3002</li> </ul> <ul> <li>partition\uff1a\u6570\u636e\u5199\u5165 NebulaGraph \u65f6\u9700\u8981\u521b\u5efa\u7684\u5206\u533a\u6570\uff0c\u8868\u793a\u6570\u636e\u5bfc\u5165\u7684\u5e76\u53d1\u6570\u3002</li> </ul> <ul> <li>nebula.rate\uff1a\u5411 NebulaGraph \u53d1\u9001\u8bf7\u6c42\u524d\u5148\u53bb\u4ee4\u724c\u6876\u83b7\u53d6\u4ee4\u724c\u3002<p>- limit\uff1a\u8868\u793a\u4ee4\u724c\u6876\u7684\u5927\u5c0f\u3002</p> <p>- timeout\uff1a\u8868\u793a\u83b7\u53d6\u4ee4\u724c\u7684\u8d85\u65f6\u65f6\u95f4\u3002</p> </li> </ul> <p>\u6839\u636e\u673a\u5668\u6027\u80fd\u53ef\u9002\u5f53\u8c03\u6574\u8fd9\u56db\u9879\u53c2\u6570\u7684\u503c\u3002\u5982\u679c\u5728\u5bfc\u5165\u8fc7\u7a0b\u4e2d\uff0cStorage \u670d\u52a1\u7684 leader \u53d8\u66f4\uff0c\u53ef\u4ee5\u9002\u5f53\u8c03\u5c0f\u8fd9\u56db\u9879\u53c2\u6570\u7684\u503c\uff0c\u964d\u4f4e\u5bfc\u5165\u901f\u5ea6\u3002</p>"},{"location":"import-export/nebula-exchange/ex-ug-FAQ/#_4","title":"\u5176\u4ed6\u95ee\u9898","text":""},{"location":"import-export/nebula-exchange/ex-ug-FAQ/#qexchange_nebulagraph","title":"Q\uff1aExchange \u652f\u6301\u54ea\u4e9b\u7248\u672c\u7684 NebulaGraph \uff1f","text":"<p>\u8bf7\u53c2\u89c1 Exchange \u7684\u4f7f\u7528\u9650\u5236\u3002</p>"},{"location":"import-export/nebula-exchange/ex-ug-FAQ/#qexchange_spark_writer","title":"Q\uff1aExchange \u4e0e Spark Writer \u6709\u4ec0\u4e48\u5173\u7cfb\uff1f","text":"<p>Exchange \u662f\u5728 Spark Writer \u57fa\u7840\u4e0a\u5f00\u53d1\u7684 Spark \u5e94\u7528\u7a0b\u5e8f\uff0c\u4e8c\u8005\u5747\u9002\u7528\u4e8e\u5728\u5206\u5e03\u5f0f\u73af\u5883\u4e2d\u5c06\u96c6\u7fa4\u7684\u6570\u636e\u6279\u91cf\u8fc1\u79fb\u5230 NebulaGraph \u4e2d\uff0c\u4f46\u662f\u540e\u671f\u7684\u7ef4\u62a4\u5de5\u4f5c\u5c06\u96c6\u4e2d\u5728 Exchange \u4e0a\u3002\u4e0e Spark Writer \u76f8\u6bd4\uff0cExchange \u6709\u4ee5\u4e0b\u6539\u8fdb\uff1a</p> <ul> <li>\u652f\u6301\u66f4\u4e30\u5bcc\u7684\u6570\u636e\u6e90\uff0c\u5982 MySQL\u3001Neo4j\u3001Hive\u3001HBase\u3001Kafka\u3001Pulsar \u7b49\u3002</li> </ul> <ul> <li>\u4fee\u590d\u4e86 Spark Writer \u7684\u90e8\u5206\u95ee\u9898\u3002\u4f8b\u5982 Spark \u8bfb\u53d6 HDFS \u91cc\u7684\u6570\u636e\u65f6\uff0c\u9ed8\u8ba4\u8bfb\u53d6\u5230\u7684\u6e90\u6570\u636e\u5747\u4e3a String \u7c7b\u578b\uff0c\u53ef\u80fd\u4e0e NebulaGraph \u5b9a\u4e49\u7684 Schema \u4e0d\u540c\uff0c\u6240\u4ee5 Exchange \u589e\u52a0\u4e86\u6570\u636e\u7c7b\u578b\u7684\u81ea\u52a8\u5339\u914d\u548c\u7c7b\u578b\u8f6c\u6362\uff0c\u5f53 NebulaGraph \u5b9a\u4e49\u7684 Schema \u4e2d\u6570\u636e\u7c7b\u578b\u4e3a\u975e String \u7c7b\u578b\uff08\u5982 double\uff09\u65f6\uff0cExchange \u4f1a\u5c06 String \u7c7b\u578b\u7684\u6e90\u6570\u636e\u8f6c\u6362\u4e3a\u5bf9\u5e94\u7684\u7c7b\u578b\uff08\u5982 double\uff09\u3002</li> </ul>"},{"location":"import-export/nebula-exchange/ex-ug-FAQ/#qexchange","title":"Q\uff1aExchange \u4f20\u8f93\u6570\u636e\u7684\u6027\u80fd\u5982\u4f55\uff1f","text":"<p>Exchange \u7684\u6027\u80fd\u6d4b\u8bd5\u6570\u636e\u548c\u6d4b\u8bd5\u65b9\u6cd5\u53c2\u89c1 NebulaGraph Exchange test result\u3002</p>"},{"location":"import-export/nebula-exchange/ex-ug-compile/","title":"\u83b7\u53d6 NebulaGraph Exchange","text":"<p>\u672c\u6587\u4ecb\u7ecd\u5982\u4f55\u83b7\u53d6 NebulaGraph Exchange \u7684 JAR \u6587\u4ef6\u3002</p>"},{"location":"import-export/nebula-exchange/ex-ug-compile/#jar","title":"\u76f4\u63a5\u4e0b\u8f7d JAR \u6587\u4ef6","text":"<p>\u793e\u533a\u7248 Exchange \u7684 JAR \u6587\u4ef6\u53ef\u4ee5\u76f4\u63a5\u4e0b\u8f7d\u3002</p> <p>\u8981\u4e0b\u8f7d\u4f01\u4e1a\u7248 Exchange\uff0c\u9700\u5148\u8054\u7cfb\u6211\u4eec\u3002</p>"},{"location":"import-export/nebula-exchange/ex-ug-compile/#jar_1","title":"\u7f16\u8bd1\u6e90\u4ee3\u7801\u83b7\u53d6 JAR \u6587\u4ef6","text":"<p>\u793e\u533a\u7248 Exchange \u7684 JAR \u6587\u4ef6\u8fd8\u53ef\u4ee5\u901a\u8fc7\u7f16\u8bd1\u6e90\u4ee3\u7801\u83b7\u53d6\u3002\u4e0b\u6587\u4ecb\u7ecd\u5982\u4f55\u7f16\u8bd1 Exchange \u6e90\u4ee3\u7801\u3002</p> <p>Enterpriseonly</p> <p>\u4f01\u4e1a\u7248 Exchange \u4ec5\u80fd\u5728 NebulaGraph \u4f01\u4e1a\u7248\u5957\u9910\u4e2d\u83b7\u53d6\u3002</p>"},{"location":"import-export/nebula-exchange/ex-ug-compile/#_1","title":"\u524d\u63d0\u6761\u4ef6","text":"<ul> <li>\u5b89\u88c5 Maven\u3002</li> <li>\u6839\u636e\u6570\u636e\u6e90\u5b89\u88c5\u9700\u8981\u7684 Spark \u7248\u672c\uff0c\u4ece\u5404\u6570\u636e\u6e90\u5bfc\u51fa\u6570\u636e\u652f\u6301\u7684 Spark \u7248\u672c\u53c2\u89c1\u8f6f\u4ef6\u4f9d\u8d56\u3002</li> </ul>"},{"location":"import-export/nebula-exchange/ex-ug-compile/#_2","title":"\u64cd\u4f5c\u6b65\u9aa4","text":"<ol> <li> <p>\u5728\u6839\u76ee\u5f55\u514b\u9686\u4ed3\u5e93<code>nebula-exchange</code>\u3002</p> <pre><code>git clone -b release-3.7 https://github.com/vesoft-inc/nebula-exchange.git\n</code></pre> </li> <li> <p>\u5207\u6362\u5230\u76ee\u5f55<code>nebula-exchange</code>\u3002</p> <pre><code>cd nebula-exchange\n</code></pre> </li> <li> <p>\u6839\u636e Exchange \u4f7f\u7528\u73af\u5883\u4e2d\u7684 Spark \u7248\u672c\u6253\u5305 Exchange\u3002</p> <ul> <li> <p>Spark 2.2\uff1a</p> <pre><code>mvn clean package -Dmaven.test.skip=true -Dgpg.skip -Dmaven.javadoc.skip=true \\\n-pl nebula-exchange_spark_2.2 -am -Pscala-2.11 -Pspark-2.2\n</code></pre> </li> </ul> <ul> <li> <p>Spark 2.4\uff1a</p> <pre><code>mvn clean package -Dmaven.test.skip=true -Dgpg.skip -Dmaven.javadoc.skip=true \\\n-pl nebula-exchange_spark_2.4 -am -Pscala-2.11 -Pspark-2.4\n</code></pre> </li> </ul> <ul> <li> <p>Spark 3.0\uff1a</p> <pre><code>mvn clean package -Dmaven.test.skip=true -Dgpg.skip -Dmaven.javadoc.skip=true \\\n-pl nebula-exchange_spark_3.0 -am -Pscala-2.12 -Pspark-3.0\n</code></pre> </li> </ul> </li> </ol> <p>\u7f16\u8bd1\u6210\u529f\u540e\uff0c\u53ef\u4ee5\u5728<code>nebula-exchange_spark_x.x/target/</code>\u76ee\u5f55\u91cc\u627e\u5230<code>nebula-exchange_spark_x.x-release-3.7.jar</code>\u6587\u4ef6\u3002<code>x.x</code>\u4ee3\u8868 Spark \u7248\u672c\uff0c\u4f8b\u5982<code>2.4</code>\u3002</p> <p>Note</p> <p>JAR \u6587\u4ef6\u7248\u672c\u53f7\u4f1a\u56e0 NebulaGraph Java Client \u7684\u53d1\u5e03\u7248\u672c\u800c\u53d8\u5316\u3002\u7528\u6237\u53ef\u4ee5\u5728 Releases \u9875\u9762\u67e5\u770b\u6700\u65b0\u7248\u672c\u3002</p> <p>\u8fc1\u79fb\u6570\u636e\u65f6\uff0c\u7528\u6237\u53ef\u4ee5\u53c2\u8003\u914d\u7f6e\u6587\u4ef6 <code>target/classes/application.conf</code>\u3002</p>"},{"location":"import-export/nebula-exchange/ex-ug-compile/#_3","title":"\u4e0b\u8f7d\u4f9d\u8d56\u5305\u5931\u8d25","text":"<p>\u5982\u679c\u7f16\u8bd1\u65f6\u4e0b\u8f7d\u4f9d\u8d56\u5305\u5931\u8d25\uff1a</p> <ul> <li>\u68c0\u67e5\u7f51\u7edc\u8bbe\u7f6e\uff0c\u786e\u8ba4\u7f51\u7edc\u6b63\u5e38\u3002</li> </ul> <ul> <li> <p>\u4fee\u6539 Maven \u5b89\u88c5\u76ee\u5f55\u4e0b<code>libexec/conf/settings.xml</code>\u6587\u4ef6\u7684<code>mirror</code>\u90e8\u5206\uff1a</p> <pre><code>&lt;mirror&gt;\n &lt;id&gt;alimaven&lt;/id&gt;\n &lt;mirrorOf&gt;central&lt;/mirrorOf&gt;\n &lt;name&gt;aliyun maven&lt;/name&gt;\n &lt;url&gt;http://maven.aliyun.com/nexus/content/repositories/central/&lt;/url&gt;\n&lt;/mirror&gt;\n</code></pre> </li> </ul>"},{"location":"import-export/nebula-exchange/about-exchange/ex-ug-limitations/","title":"\u4f7f\u7528\u9650\u5236","text":"<p>\u672c\u6587\u63cf\u8ff0 Exchange 3.7.0 \u7684\u4e00\u4e9b\u4f7f\u7528\u9650\u5236\u3002</p>"},{"location":"import-export/nebula-exchange/about-exchange/ex-ug-limitations/#_2","title":"\u4f7f\u7528\u73af\u5883","text":"<p>Exchange 3.x \u652f\u6301\u4ee5\u4e0b\u64cd\u4f5c\u7cfb\u7edf\uff1a</p> <ul> <li>CentOS 7</li> <li>macOS</li> </ul>"},{"location":"import-export/nebula-exchange/about-exchange/ex-ug-limitations/#_3","title":"\u8f6f\u4ef6\u4f9d\u8d56","text":"<p>\u4e3a\u4fdd\u8bc1 Exchange \u6b63\u5e38\u5de5\u4f5c\uff0c\u8bf7\u786e\u8ba4\u673a\u5668\u4e0a\u5df2\u7ecf\u5b89\u88c5\u5982\u4e0b\u8f6f\u4ef6\uff1a</p> <ul> <li>Java 1.8 \u7248\u672c</li> </ul> <ul> <li>Scala 2.10.7\u30012.11.12 \u6216 2.12.10 \u7248\u672c</li> </ul> <ul> <li> <p>Apache Spark\u3002\u4f7f\u7528 Exchange \u4ece\u4e0d\u540c\u6570\u636e\u6e90\u5bfc\u51fa\u6570\u636e\u5bf9 Spark \u7248\u672c\u7684\u8981\u6c42\u5982\u4e0b\uff1a</p> <p>Note</p> <p>\u4f7f\u7528 Exchange \u65f6\uff0c\u9700\u6839\u636e Spark \u7248\u672c\u9009\u62e9\u76f8\u5e94\u7684 JAR \u6587\u4ef6\u3002\u4f8b\u5982\uff0c\u5f53 Spark \u7248\u672c\u4e3a 2.4 \u65f6\uff0c\u9009\u62e9 nebula-exchange_spark_2.4-3.7.0.jar\u3002</p> \u6570\u636e\u6e90 Spark 2.2 Spark 2.4 Spark 3 CSV \u6587\u4ef6 \u652f\u6301 \u652f\u6301 \u652f\u6301 JSON \u6587\u4ef6 \u652f\u6301 \u652f\u6301 \u652f\u6301 ORC \u6587\u4ef6 \u652f\u6301 \u652f\u6301 \u652f\u6301 Parquet \u6587\u4ef6 \u652f\u6301 \u652f\u6301 \u652f\u6301 HBase \u652f\u6301 \u652f\u6301 \u652f\u6301 MySQL \u652f\u6301 \u652f\u6301 \u652f\u6301 PostgreSQL \u652f\u6301 \u652f\u6301 \u652f\u6301 Oracle \u652f\u6301 \u652f\u6301 \u652f\u6301 ClickHouse \u652f\u6301 \u652f\u6301 \u652f\u6301 Neo4j \u4e0d\u652f\u6301 \u652f\u6301 \u4e0d\u652f\u6301 Hive \u652f\u6301 \u652f\u6301 \u652f\u6301 MaxCompute \u4e0d\u652f\u6301 \u652f\u6301 \u4e0d\u652f\u6301 Pulsar \u4e0d\u652f\u6301 \u652f\u6301 \u672a\u6d4b\u8bd5 Kafka \u4e0d\u652f\u6301 \u652f\u6301 \u672a\u6d4b\u8bd5 NebulaGraph \u4e0d\u652f\u6301 \u652f\u6301 \u4e0d\u652f\u6301 </li> </ul> <p>\u5728\u4ee5\u4e0b\u4f7f\u7528\u573a\u666f\uff0c\u8fd8\u9700\u8981\u90e8\u7f72 Hadoop Distributed File System (HDFS)\uff1a</p> <ul> <li>\u8fc1\u79fb HDFS \u7684\u6570\u636e</li> <li>\u751f\u6210 SST \u6587\u4ef6</li> </ul>"},{"location":"import-export/nebula-exchange/about-exchange/ex-ug-what-is-exchange/","title":"\u4ec0\u4e48\u662f NebulaGraph Exchange","text":"<p>NebulaGraph Exchange\uff08\u7b80\u79f0 Exchange\uff09\u662f\u4e00\u6b3e Apache Spark\u2122 \u5e94\u7528\uff0c\u7528\u4e8e\u5728\u5206\u5e03\u5f0f\u73af\u5883\u4e2d\u5c06\u96c6\u7fa4\u4e2d\u7684\u6570\u636e\u6279\u91cf\u8fc1\u79fb\u5230 NebulaGraph \u4e2d\uff0c\u80fd\u652f\u6301\u591a\u79cd\u4e0d\u540c\u683c\u5f0f\u7684\u6279\u5f0f\u6570\u636e\u548c\u6d41\u5f0f\u6570\u636e\u7684\u8fc1\u79fb\u3002</p> <p>Exchange \u7531 Reader\u3001Processor \u548c Writer \u4e09\u90e8\u5206\u7ec4\u6210\u3002Reader \u8bfb\u53d6\u4e0d\u540c\u6765\u6e90\u7684\u6570\u636e\u8fd4\u56de DataFrame \u540e\uff0cProcessor \u904d\u5386 DataFrame \u7684\u6bcf\u4e00\u884c\uff0c\u6839\u636e\u914d\u7f6e\u6587\u4ef6\u4e2d<code>fields</code>\u7684\u6620\u5c04\u5173\u7cfb\uff0c\u6309\u5217\u540d\u83b7\u53d6\u5bf9\u5e94\u7684\u503c\u3002\u5728\u904d\u5386\u6307\u5b9a\u6279\u5904\u7406\u7684\u884c\u6570\u540e\uff0cWriter \u4f1a\u5c06\u83b7\u53d6\u7684\u6570\u636e\u4e00\u6b21\u6027\u5199\u5165\u5230 NebulaGraph \u4e2d\u3002\u4e0b\u56fe\u63cf\u8ff0\u4e86 Exchange \u5b8c\u6210\u6570\u636e\u8f6c\u6362\u548c\u8fc1\u79fb\u7684\u8fc7\u7a0b\u3002</p> <p></p>"},{"location":"import-export/nebula-exchange/about-exchange/ex-ug-what-is-exchange/#_1","title":"\u7248\u672c\u7cfb\u5217","text":"<p>Exchange \u6709\u793e\u533a\u7248\u548c\u4f01\u4e1a\u7248\u4e24\u4e2a\u7cfb\u5217\uff0c\u4e8c\u8005\u529f\u80fd\u4e0d\u540c\u3002\u793e\u533a\u7248\u5728 GitHub \u5f00\u6e90\u5f00\u53d1\uff0c\u4f01\u4e1a\u7248\u5c5e\u4e8e NebulaGraph \u4f01\u4e1a\u5957\u9910\u3002</p>"},{"location":"import-export/nebula-exchange/about-exchange/ex-ug-what-is-exchange/#_2","title":"\u9002\u7528\u573a\u666f","text":"<p>Exchange \u9002\u7528\u4e8e\u4ee5\u4e0b\u573a\u666f\uff1a</p> <ul> <li>\u9700\u8981\u5c06\u6765\u81ea Kafka\u3001Pulsar \u5e73\u53f0\u7684\u6d41\u5f0f\u6570\u636e\uff0c\u5982\u65e5\u5fd7\u6587\u4ef6\u3001\u7f51\u8d2d\u6570\u636e\u3001\u6e38\u620f\u5185\u73a9\u5bb6\u6d3b\u52a8\u3001\u793e\u4ea4\u7f51\u7ad9\u4fe1\u606f\u3001\u91d1\u878d\u4ea4\u6613\u6216\u5730\u7406\u7a7a\u95f4\u670d\u52a1\uff0c\u4ee5\u53ca\u6765\u81ea\u6570\u636e\u4e2d\u5fc3\u5185\u6240\u8fde\u63a5\u8bbe\u5907\u6216\u4eea\u5668\u7684\u9065\u6d4b\u6570\u636e\u7b49\u8f6c\u5316\u4e3a\u5c5e\u6027\u56fe\u7684\u70b9\u6216\u8fb9\u6570\u636e\uff0c\u5e76\u5bfc\u5165 NebulaGraph \u3002</li> </ul> <ul> <li>\u9700\u8981\u4ece\u5173\u7cfb\u578b\u6570\u636e\u5e93\uff08\u5982 MySQL\uff09\u6216\u8005\u5206\u5e03\u5f0f\u6587\u4ef6\u7cfb\u7edf\uff08\u5982 HDFS\uff09\u4e2d\u8bfb\u53d6\u6279\u5f0f\u6570\u636e\uff0c\u5982\u67d0\u4e2a\u65f6\u95f4\u6bb5\u5185\u7684\u6570\u636e\uff0c\u5c06\u5b83\u4eec\u8f6c\u5316\u4e3a\u5c5e\u6027\u56fe\u7684\u70b9\u6216\u8fb9\u6570\u636e\uff0c\u5e76\u5bfc\u5165 NebulaGraph \u3002</li> </ul> <ul> <li>\u9700\u8981\u5c06\u5927\u6279\u91cf\u6570\u636e\u751f\u6210 NebulaGraph \u80fd\u8bc6\u522b\u7684 SST \u6587\u4ef6\uff0c\u518d\u5bfc\u5165 NebulaGraph \u3002</li> </ul> <ul> <li> <p>\u9700\u8981\u5bfc\u51fa NebulaGraph \u4e2d\u4fdd\u5b58\u7684\u6570\u636e\u3002</p> <p>Enterpriseonly</p> <p>\u4ec5\u4f01\u4e1a\u7248 Exchange \u652f\u6301\u4ece NebulaGraph \u4e2d\u5bfc\u51fa\u6570\u636e\u3002</p> </li> </ul>"},{"location":"import-export/nebula-exchange/about-exchange/ex-ug-what-is-exchange/#_3","title":"\u4ea7\u54c1\u4f18\u70b9","text":"<p>Exchange \u5177\u6709\u4ee5\u4e0b\u4f18\u70b9\uff1a</p> <ul> <li>\u9002\u5e94\u6027\u5f3a\uff1a\u652f\u6301\u5c06\u591a\u79cd\u4e0d\u540c\u683c\u5f0f\u6216\u4e0d\u540c\u6765\u6e90\u7684\u6570\u636e\u5bfc\u5165 NebulaGraph\uff0c\u4fbf\u4e8e\u8fc1\u79fb\u6570\u636e\u3002</li> </ul> <ul> <li>\u652f\u6301\u5bfc\u5165 SST\uff1a\u652f\u6301\u5c06\u4e0d\u540c\u6765\u6e90\u7684\u6570\u636e\u8f6c\u6362\u4e3a SST \u6587\u4ef6\uff0c\u7528\u4e8e\u6570\u636e\u5bfc\u5165\u3002</li> </ul> <ul> <li>\u652f\u6301 SSL \u52a0\u5bc6\uff1a\u652f\u6301\u5728 Exchange \u4e0e NebulaGraph \u4e4b\u95f4\u5efa\u7acb SSL \u52a0\u5bc6\u4f20\u8f93\u901a\u9053\uff0c\u4fdd\u969c\u6570\u636e\u5b89\u5168\u3002</li> </ul> <ul> <li> <p>\u652f\u6301\u65ad\u70b9\u7eed\u4f20\uff1a\u5bfc\u5165\u6570\u636e\u65f6\u652f\u6301\u65ad\u70b9\u7eed\u4f20\uff0c\u6709\u52a9\u4e8e\u8282\u7701\u65f6\u95f4\uff0c\u63d0\u9ad8\u6570\u636e\u5bfc\u5165\u6548\u7387\u3002</p> <p>Note</p> <p>\u76ee\u524d\u4ec5\u8fc1\u79fb Neo4j \u6570\u636e\u65f6\u652f\u6301\u65ad\u70b9\u7eed\u4f20\u3002</p> </li> </ul> <ul> <li>\u5f02\u6b65\u64cd\u4f5c\uff1a\u4f1a\u5728\u6e90\u6570\u636e\u4e2d\u751f\u6210\u4e00\u6761\u63d2\u5165\u8bed\u53e5\uff0c\u53d1\u9001\u7ed9 Graph \u670d\u52a1\uff0c\u6700\u540e\u518d\u6267\u884c\u63d2\u5165\u64cd\u4f5c\u3002</li> </ul> <ul> <li>\u7075\u6d3b\u6027\u5f3a\uff1a\u652f\u6301\u540c\u65f6\u5bfc\u5165\u591a\u4e2a Tag \u548c Edge type\uff0c\u4e0d\u540c Tag \u548c Edge type \u53ef\u4ee5\u662f\u4e0d\u540c\u7684\u6570\u636e\u6765\u6e90\u6216\u683c\u5f0f\u3002</li> </ul> <ul> <li>\u7edf\u8ba1\u529f\u80fd\uff1a\u4f7f\u7528 Apache Spark\u2122 \u4e2d\u7684\u7d2f\u52a0\u5668\u7edf\u8ba1\u63d2\u5165\u64cd\u4f5c\u7684\u6210\u529f\u548c\u5931\u8d25\u6b21\u6570\u3002</li> </ul> <ul> <li>\u6613\u4e8e\u4f7f\u7528\uff1a\u91c7\u7528 HOCON\uff08Human-Optimized Config Object Notation\uff09\u914d\u7f6e\u6587\u4ef6\u683c\u5f0f\uff0c\u5177\u6709\u9762\u5411\u5bf9\u8c61\u98ce\u683c\uff0c\u4fbf\u4e8e\u7406\u89e3\u548c\u64cd\u4f5c\u3002</li> </ul>"},{"location":"import-export/nebula-exchange/about-exchange/ex-ug-what-is-exchange/#_4","title":"\u7248\u672c\u517c\u5bb9\u6027","text":"<p>Exchange \u652f\u6301 Spark \u7248\u672c 2.2.x\u30012.4.x \u548c 3.x.x\uff0c\u9488\u5bf9\u4e0d\u540c Spark \u7248\u672c\u547d\u540d\u4e3a\uff1a<code>nebula-exchange_spark_2.2</code>\u3001<code>nebula-exchange_spark_2.4</code>\u548c<code>nebula-exchange_spark_3.0</code>\u3002</p> <p>NebulaGraph Exchange \u7248\u672c\uff08\u5373 JAR \u5305\u7248\u672c\uff09\u3001 NebulaGraph \u5185\u6838\u7248\u672c\u548c Spark \u7248\u672c\u5bf9\u5e94\u5173\u7cfb\u5982\u4e0b\u3002</p> Exchange \u7248\u672c NebulaGraph \u7248\u672c Spark \u7248\u672c nebula-exchange_spark_3.0-3.0-SNAPSHOT.jar nightly 3.3.x\u30013.2.x\u30013.1.x\u30013.0.x nebula-exchange_spark_2.4-3.0-SNAPSHOT.jar nightly 2.4.x nebula-exchange_spark_2.2-3.0-SNAPSHOT.jar nightly 2.2.x nebula-exchange_spark_3.0-3.4.0.jar 3.x.x 3.3.x\u30013.2.x\u30013.1.x\u30013.0.x nebula-exchange_spark_2.4-3.4.0.jar 3.x.x 2.4.x nebula-exchange_spark_2.2-3.4.0.jar 3.x.x 2.2.x nebula-exchange_spark_3.0-3.3.0.jar 3.x.x 3.3.x\u30013.2.x\u30013.1.x\u30013.0.x nebula-exchange_spark_2.4-3.3.0.jar 3.x.x 2.4.x nebula-exchange_spark_2.2-3.3.0.jar 3.x.x 2.2.x nebula-exchange_spark_3.0-3.0.0.jar 3.x.x 3.3.x\u30013.2.x\u30013.1.x\u30013.0.x nebula-exchange_spark_2.4-3.0.0.jar 3.x.x 2.4.x nebula-exchange_spark_2.2-3.0.0.jar 3.x.x 2.2.x nebula-exchange-2.6.3.jar 2.6.1\u30012.6.0 2.4.x nebula-exchange-2.6.2.jar 2.6.1\u30012.6.0 2.4.x nebula-exchange-2.6.1.jar 2.6.1\u30012.6.0 2.4.x nebula-exchange-2.6.0.jar 2.6.1\u30012.6.0 2.4.x nebula-exchange-2.5.2.jar 2.5.1\u30012.5.0 2.4.x nebula-exchange-2.5.1.jar 2.5.1\u30012.5.0 2.4.x nebula-exchange-2.5.0.jar 2.5.1\u30012.5.0 2.4.x nebula-exchange-2.1.0.jar 2.0.1\u30012.0.0 2.4.x nebula-exchange-2.0.1.jar 2.0.1\u30012.0.0 2.4.x nebula-exchange-2.0.0.jar 2.0.1\u30012.0.0 2.4.x <p>JAR \u5305\u6709\u4e24\u79cd\u83b7\u53d6\u65b9\u5f0f\uff1a\u81ea\u884c\u7f16\u8bd1\u6216\u8005\u4ece maven \u4ed3\u5e93\u4e0b\u8f7d\u3002</p>"},{"location":"import-export/nebula-exchange/about-exchange/ex-ug-what-is-exchange/#_5","title":"\u6570\u636e\u6e90","text":"<p>Exchange 3.7.0 \u652f\u6301\u5c06\u4ee5\u4e0b\u683c\u5f0f\u6216\u6765\u6e90\u7684\u6570\u636e\u8f6c\u6362\u4e3a NebulaGraph \u80fd\u8bc6\u522b\u7684\u70b9\u548c\u8fb9\u6570\u636e\uff0c\u7136\u540e\u901a\u8fc7 nGQL \u8bed\u53e5\u7684\u5f62\u5f0f\u5bfc\u5165 NebulaGraph \uff1a</p> <ul> <li>\u5b58\u50a8\u5728 HDFS \u6216\u672c\u5730\u7684\u6570\u636e\uff1a<ul> <li>Apache Parquet</li> <li>Apache ORC</li> <li>JSON</li> <li>CSV</li> </ul> </li> </ul> <ul> <li>Apache HBase\u2122</li> </ul> <ul> <li> <p>\u6570\u636e\u4ed3\u5e93\uff1a</p> <ul> <li>Hive</li> <li>MaxCompute</li> </ul> </li> </ul> <ul> <li>\u56fe\u6570\u636e\u5e93\uff1aNeo4j\uff08Client \u7248\u672c 2.4.5-M1\uff09</li> </ul> <ul> <li>\u5173\u7cfb\u578b\u6570\u636e\u5e93\uff1a<ul> <li>MySQL</li> <li>PostgreSQL</li> <li>Oracle</li> </ul> </li> </ul> <ul> <li>\u5217\u5f0f\u6570\u636e\u5e93\uff1aClickHouse</li> </ul> <ul> <li>\u6d41\u5904\u7406\u8f6f\u4ef6\u5e73\u53f0\uff1aApache Kafka\u00ae</li> </ul> <ul> <li>\u53d1\u5e03/\u8ba2\u9605\u6d88\u606f\u5e73\u53f0\uff1aApache Pulsar 2.4.5</li> </ul> <ul> <li>JDBC \u6570\u636e\u6e90</li> </ul> <p>\u9664\u4e86\u7528 nGQL \u8bed\u53e5\u7684\u5f62\u5f0f\u5bfc\u5165\u6570\u636e\uff0cExchange \u8fd8\u652f\u6301\u5c06\u6570\u636e\u6e90\u7684\u6570\u636e\u751f\u6210 SST \u6587\u4ef6\uff0c\u7136\u540e\u901a\u8fc7 Console \u5bfc\u5165 SST \u6587\u4ef6\u3002</p>"},{"location":"import-export/nebula-exchange/about-exchange/ex-ug-what-is-exchange/#_6","title":"\u66f4\u65b0\u8bf4\u660e","text":"<p>Release</p>"},{"location":"import-export/nebula-exchange/about-exchange/ex-ug-what-is-exchange/#_7","title":"\u89c6\u9891","text":"<ul> <li>NebulaGraph \u6570\u636e\u5bfc\u5165\u5de5\u5177\u2014\u2014Exchange\uff083 \u5206 08 \u79d2\uff09</li> </ul>"},{"location":"import-export/nebula-exchange/parameter-reference/ex-ug-para-import-command/","title":"\u5bfc\u5165\u547d\u4ee4\u53c2\u6570","text":"<p>\u5b8c\u6210\u914d\u7f6e\u6587\u4ef6\u4fee\u6539\u540e\uff0c\u53ef\u4ee5\u8fd0\u884c\u4ee5\u4e0b\u547d\u4ee4\u5c06\u6307\u5b9a\u6765\u6e90\u7684\u6570\u636e\u5bfc\u5165 NebulaGraph \u6570\u636e\u5e93\u3002</p>"},{"location":"import-export/nebula-exchange/parameter-reference/ex-ug-para-import-command/#_2","title":"\u5bfc\u5165\u6570\u636e","text":"<pre><code>&lt;spark_install_path&gt;/bin/spark-submit --master \"spark://HOST:PORT\" --class com.vesoft.nebula.exchange.Exchange &lt;nebula-exchange-2.x.y.jar_path&gt; -c &lt;application.conf_path&gt; \n</code></pre> <p>Note</p> <p>\u5982\u679c\u6570\u636e\u7684\u5c5e\u6027\u503c\u5305\u542b\u4e2d\u6587\u5b57\u7b26\uff0c\u53ef\u80fd\u51fa\u73b0\u4e71\u7801\u3002\u8bf7\u5728\u63d0\u4ea4 Spark \u4efb\u52a1\u65f6\u52a0\u4e0a\u4ee5\u4e0b\u9009\u9879\uff1a</p> <pre><code>--conf spark.driver.extraJavaOptions=-Dfile.encoding=utf-8\n--conf spark.executor.extraJavaOptions=-Dfile.encoding=utf-8\n</code></pre> <p>\u53c2\u6570\u8bf4\u660e\u5982\u4e0b\u3002</p> \u53c2\u6570 \u662f\u5426\u5fc5\u9700 \u9ed8\u8ba4\u503c \u8bf4\u660e <code>--class</code> \u662f \u65e0 \u6307\u5b9a\u9a71\u52a8\u7684\u4e3b\u7c7b\u3002 <code>--master</code> \u662f \u65e0 \u6307\u5b9a Spark \u96c6\u7fa4\u7684 master URL\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1 master-urls\u3002\u53ef\u9009\u503c\u4e3a\uff1a<code>local</code>\uff1a\u672c\u5730\u6a21\u5f0f\uff0c\u4f7f\u7528\u5355\u4e2a\u7ebf\u7a0b\u8fd0\u884c Spark \u5e94\u7528\u7a0b\u5e8f\u3002\u9002\u5408\u5728\u6d4b\u8bd5\u73af\u5883\u8fdb\u884c\u5c0f\u6570\u636e\u91cf\u5bfc\u5165\u3002<code>yarn</code>\uff1a\u5728 YARN \u96c6\u7fa4\u4e0a\u8fd0\u884c Spark \u5e94\u7528\u7a0b\u5e8f\u3002\u9002\u5408\u5728\u7ebf\u4e0a\u73af\u5883\u8fdb\u884c\u5927\u6570\u636e\u91cf\u5bfc\u5165\u3002<code>spark://HOST:PORT</code>\uff1a\u8fde\u63a5\u5230\u6307\u5b9a\u7684 Spark standalone \u96c6\u7fa4\u3002<code>mesos://HOST:PORT</code>\uff1a\u8fde\u63a5\u5230\u6307\u5b9a\u7684 Mesos \u96c6\u7fa4\u3002<code>k8s://HOST:PORT</code>\uff1a\u8fde\u63a5\u5230\u6307\u5b9a\u7684 Kubernetes \u96c6\u7fa4\u3002 <code>-c</code>/<code>--config</code> \u662f \u65e0 \u6307\u5b9a\u914d\u7f6e\u6587\u4ef6\u7684\u8def\u5f84\u3002 <code>-h</code>/<code>--hive</code> \u5426 <code>false</code> \u6dfb\u52a0\u8fd9\u4e2a\u53c2\u6570\u8868\u793a\u652f\u6301\u4ece Hive \u4e2d\u5bfc\u5165\u6570\u636e\u3002 <code>-D</code>/<code>--dry</code> \u5426 <code>false</code> \u6307\u5b9a\u662f\u5426\u68c0\u67e5\u914d\u7f6e\u6587\u4ef6\u7684\u683c\u5f0f\u3002\u8be5\u53c2\u6570\u4ec5\u7528\u4e8e\u68c0\u67e5\u914d\u7f6e\u6587\u4ef6\u7684\u683c\u5f0f\uff0c\u4e0d\u68c0\u67e5<code>tags</code>\u548c<code>edges</code>\u914d\u7f6e\u9879\u7684\u6709\u6548\u6027\uff0c\u4e5f\u4e0d\u4f1a\u5bfc\u5165\u6570\u636e\u3002\u9700\u8981\u5bfc\u5165\u6570\u636e\u65f6\u4e0d\u8981\u6dfb\u52a0\u8fd9\u4e2a\u53c2\u6570\u3002 <code>-r</code>/<code>--reload</code> \u5426 \u65e0 \u6307\u5b9a\u9700\u8981\u91cd\u65b0\u52a0\u8f7d\u7684 reload \u6587\u4ef6\u8def\u5f84\u3002 <p>\u66f4\u591a Spark \u7684\u53c2\u6570\u914d\u7f6e\u8bf4\u660e\u8bf7\u53c2\u89c1 Spark Configuration\u3002</p> <p>Note</p> <ul> <li>JAR \u6587\u4ef6\u7248\u672c\u53f7\u4ee5\u5b9e\u9645\u7f16\u8bd1\u5f97\u5230\u7684 JAR \u6587\u4ef6\u540d\u79f0\u4e3a\u51c6\u3002</li> </ul> <ul> <li>\u5982\u679c\u4f7f\u7528 yarn \u6a21\u5f0f\u63d0\u4ea4\u4efb\u52a1\uff0c\u8bf7\u53c2\u8003\u5982\u4e0b\u793a\u4f8b\uff0c\u5c24\u5176\u662f\u793a\u4f8b\u4e2d\u7684\u4e24\u4e2a<code>--conf</code>\u3002</li> </ul> <pre><code>$SPARK_HOME/bin/spark-submit     --master yarn \\\n--class com.vesoft.nebula.exchange.Exchange \\\n--files application.conf \\\n--conf spark.driver.extraClassPath=./ \\\n--conf spark.executor.extraClassPath=./ \\\nnebula-exchange-3.7.0.jar \\\n-c application.conf\n</code></pre>"},{"location":"import-export/nebula-exchange/parameter-reference/ex-ug-para-import-command/#reload","title":"\u5bfc\u5165 reload \u6587\u4ef6","text":"<p>\u5982\u679c\u5bfc\u5165\u6570\u636e\u65f6\u6709\u4e00\u4e9b\u6570\u636e\u5bfc\u5165\u5931\u8d25\uff0c\u4f1a\u5c06\u5bfc\u5165\u5931\u8d25\u7684\u6570\u636e\u5b58\u5165 reload \u6587\u4ef6\uff0c\u53ef\u4ee5\u7528\u53c2\u6570<code>-r</code>\u5c1d\u8bd5\u5bfc\u5165 reload \u6587\u4ef6\u4e2d\u7684\u6570\u636e\u3002</p> <pre><code>&lt;spark_install_path&gt;/bin/spark-submit --master \"spark://HOST:PORT\" --class com.vesoft.nebula.exchange.Exchange &lt;nebula-exchange-2.x.y.jar_path&gt; -c &lt;application.conf_path&gt; -r \"&lt;reload_file_path&gt;\" \n</code></pre> <p>\u5982\u679c\u4ecd\u7136\u5bfc\u5165\u5931\u8d25\uff0c\u8bf7\u5230\u8bba\u575b\u5bfb\u6c42\u5e2e\u52a9\u3002</p>"},{"location":"import-export/nebula-exchange/parameter-reference/ex-ug-parameter/","title":"\u914d\u7f6e\u8bf4\u660e","text":"<p>\u672c\u6587\u4ecb\u7ecd\u4f7f\u7528 NebulaGraph Exchange \u65f6\u5982\u4f55\u81ea\u52a8\u751f\u6210\u793a\u4f8b\u914d\u7f6e\u6587\u4ef6\uff0c\u4ee5\u53ca\u4ecb\u7ecd\u914d\u7f6e\u6587\u4ef6 <code>application.conf</code>\u3002</p>"},{"location":"import-export/nebula-exchange/parameter-reference/ex-ug-parameter/#_2","title":"\u81ea\u52a8\u751f\u6210\u793a\u4f8b\u914d\u7f6e\u6587\u4ef6","text":"<p>\u901a\u8fc7\u5982\u4e0b\u547d\u4ee4\uff0c\u6307\u5b9a\u8981\u5bfc\u5165\u7684\u6570\u636e\u6e90\uff0c\u5373\u53ef\u83b7\u5f97\u8be5\u6570\u636e\u6e90\u6240\u5bf9\u5e94\u7684\u914d\u7f6e\u6587\u4ef6\u793a\u4f8b\u3002</p> <pre><code>java -cp &lt;exchange_jar_package&gt; com.vesoft.exchange.common.GenerateConfigTemplate -s &lt;source_type&gt; -p\n&lt;config_file_save_path&gt;\n</code></pre> <p>\u4f8b\u5982\uff1a</p> <pre><code>java -cp nebula-exchange_spark_2.4-3.0-SNAPSHOT.jar com.vesoft.exchange.common.GenerateConfigTemplate -s csv -p /home/nebula/csv_application.conf\n</code></pre>"},{"location":"import-export/nebula-exchange/parameter-reference/ex-ug-parameter/#_3","title":"\u4f7f\u7528\u52a0\u5bc6\u5bc6\u7801","text":"<p>\u7528\u6237\u5728\u914d\u7f6e\u6587\u4ef6\u91cc\u8bbe\u7f6e\u8fde\u63a5 NebulaGraph \u7684\u5bc6\u7801\u65f6\uff0c\u53ef\u4ee5\u4f7f\u7528\u660e\u6587\u5bc6\u7801\uff0c\u4e5f\u53ef\u4ee5\u4f7f\u7528 RSA \u52a0\u5bc6\u540e\u7684\u5bc6\u7801\u3002</p> <p>\u5982\u679c\u9700\u8981\u4f7f\u7528 RSA \u52a0\u5bc6\u540e\u7684\u5bc6\u7801\uff0c\u9700\u8981\u5728\u914d\u7f6e\u6587\u4ef6\u5185\u8fdb\u884c\u5982\u4e0b\u8bbe\u7f6e\uff1a</p> <ul> <li><code>nebula.pswd</code>\u914d\u7f6e\u4e3a RSA \u52a0\u5bc6\u540e\u7684\u5bc6\u7801\u3002</li> <li><code>nebula.privateKey</code>\u914d\u7f6e\u4e3a RSA \u52a0\u5bc6\u7684\u5bc6\u94a5\u3002</li> <li><code>nebula.enableRSA</code>\u914d\u7f6e\u4e3a<code>true</code>\u3002</li> </ul> <p>\u7528\u6237\u53ef\u4ee5\u4f7f\u7528\u81ea\u5df1\u7684\u5de5\u5177\u52a0\u5bc6\uff0c\u4e5f\u53ef\u4ee5\u4f7f\u7528 Exchange \u7684 JAR \u5305\u5185\u63d0\u4f9b\u7684\u52a0\u5bc6\u5de5\u5177\uff0c\u4f8b\u5982\uff1a</p> <pre><code>spark-submit --master local --class com.vesoft.exchange.common.PasswordEncryption nebula-exchange_spark_2.4-3.0-SNAPSHOT.jar -p nebula\n</code></pre> <p>\u8fd4\u56de\u7ed3\u679c\u5982\u4e0b\uff1a</p> <pre><code>=================== public key begin ===================\nMIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQCLl7LaNSEXlZo2hYiJqzxgyFBQdkxbQXYU/xQthsBJwjOPhkiY37nokzKnjNlp6mv5ZUomqxLsoNQHEJ6BZD4VPiaiElFAkTD+gyul1v8f3A446Fr2rnVLogWHnz8ECPt7X8jwmpiKOXkOPIhqU5E0Cua+Kk0nnVosbos/VShfiQIDAQAB\n=================== public key end ===================\n\n\n=================== private key begin ===================\nMIICeAIBADANBgkqhkiG9w0BAQEFAASCAmIwggJeAgEAAoGBAIuXsto1IReVmjaFiImrPGDIUFB2TFtBdhT/FC2GwEnCM4+GSJjfueiTMqeM2Wnqa/llSiarEuyg1AcQnoFkPhU+JqISUUCRMP6DK6XW/x/cDjjoWvaudUuiBYefPwQI+3tfyPCamIo5eQ48iGpTkTQK5r4qTSedWixuiz9VKF+JAgMBAAECgYADWbfEPwQ1UbTq3Bej3kVLuWMcG0rH4fFYnaq5UQOqgYvFRR7W9H+80lOj6+CIB0ViLgkylmaU4WNVbBOx3VsUFFWSqIIIviKubg8m8ey7KAd9X2wMEcUHi4JyS2+/WSacaXYS5LOmMevvuaOwLEV0QmyM+nNGRIjUdzCLR1935QJBAM+IF8YD5GnoAPPjGIDS1Ljhu/u/Gj6/YBCQKSHQ5+HxHEKjQ/YxQZ/otchmMZanYelf1y+byuJX3NZ04/KSGT8CQQCsMaoFO2rF5M84HpAXPi6yH2chbtz0VTKZworwUnpmMVbNUojf4VwzAyOhT1U5o0PpFbpi+NqQhC63VUN5k003AkEArI8vnVGNMlZbvG7e5/bmM9hWs2viSbxdB0inOtv2g1M1OV+B2gp405ru0/PNVcRV0HQFfCuhVfTSxmspQoAihwJBAJW6EZa/FZbB4JVxreUoAr6Lo8dkeOhT9M3SZbGWZivaFxot/Cp/8QXCYwbuzrJxjqlsZUeOD6694Uk08JkURn0CQQC8V6aRa8ylMhLJFkGkMDHLqHcQCmY53Kd73mUu4+mjMJLZh14zQD9ydFtc0lbLXTeBAMWV3uEdeLhRvdAo3OwV\n=================== private key end ===================\n\n\n=================== encrypted  password begin ===================\nIo+3y3mLOMnZJJNUPHZ8pKb4VfTvg6wUh6jSu5xdmLAoX/59tK1HTwoN40aOOWJwa1a5io7S4JqcX/jEcAorw7pelITr+F4oB0AMCt71d+gJuu3/lw9bjUEl9tF4Raj82y2Dg39wYbagN84fZMgCD63TPiDIevSr6+MFKASpGrY=\n=================== encrypted  password end ===================\ncheck: the real password decrypted by private key and encrypted password is: nebula\n</code></pre>"},{"location":"import-export/nebula-exchange/parameter-reference/ex-ug-parameter/#_4","title":"\u914d\u7f6e\u8bf4\u660e","text":"<p>\u4fee\u6539\u914d\u7f6e\u6587\u4ef6\u4e4b\u524d\uff0c\u5efa\u8bae\u6839\u636e\u6570\u636e\u6e90\u590d\u5236\u5e76\u4fee\u6539\u6587\u4ef6\u540d\u79f0\uff0c\u4fbf\u4e8e\u533a\u5206\u3002\u4f8b\u5982\u6570\u636e\u6e90\u4e3a CSV \u6587\u4ef6\uff0c\u53ef\u4ee5\u590d\u5236\u4e3a<code>csv_application.conf</code>\u3002</p> <p>\u914d\u7f6e\u6587\u4ef6\u7684\u5185\u5bb9\u4e3b\u8981\u5206\u4e3a\u5982\u4e0b\u51e0\u7c7b\uff1a</p> <ul> <li>Spark \u76f8\u5173\u914d\u7f6e</li> </ul> <ul> <li>Hive \u914d\u7f6e\uff08\u53ef\u9009\uff09</li> </ul> <ul> <li>NebulaGraph \u76f8\u5173\u914d\u7f6e</li> </ul> <ul> <li>\u70b9\u914d\u7f6e</li> </ul> <ul> <li>\u8fb9\u914d\u7f6e</li> </ul>"},{"location":"import-export/nebula-exchange/parameter-reference/ex-ug-parameter/#spark","title":"Spark \u76f8\u5173\u914d\u7f6e","text":"<p>\u672c\u6587\u53ea\u5217\u51fa\u90e8\u5206 Spark \u53c2\u6570\uff0c\u66f4\u591a\u53c2\u6570\u8bf7\u53c2\u89c1\u5b98\u65b9\u6587\u6863\u3002</p> \u53c2\u6570 \u6570\u636e\u7c7b\u578b \u9ed8\u8ba4\u503c \u662f\u5426\u5fc5\u987b \u8bf4\u660e <code>spark.app.name</code> string - \u5426 Spark \u9a71\u52a8\u7a0b\u5e8f\u540d\u79f0\u3002 <code>spark.driver.cores</code> int <code>1</code> \u5426 \u9a71\u52a8\u7a0b\u5e8f\u4f7f\u7528\u7684 CPU \u6838\u6570\uff0c\u4ec5\u9002\u7528\u4e8e\u96c6\u7fa4\u6a21\u5f0f\u3002 <code>spark.driver.maxResultSize</code> string <code>1G</code> \u5426 \u5355\u4e2a Spark \u64cd\u4f5c\uff08\u4f8b\u5982 collect\uff09\u65f6\uff0c\u6240\u6709\u5206\u533a\u7684\u5e8f\u5217\u5316\u7ed3\u679c\u7684\u603b\u5927\u5c0f\u9650\u5236\uff08\u5b57\u8282\u4e3a\u5355\u4f4d\uff09\u3002\u6700\u5c0f\u503c\u4e3a 1M\uff0c0 \u8868\u793a\u65e0\u9650\u5236\u3002 <code>spark.executor.memory</code> string <code>1G</code> \u5426 Spark \u9a71\u52a8\u7a0b\u5e8f\u4f7f\u7528\u7684\u5185\u5b58\u91cf\uff0c\u53ef\u4ee5\u6307\u5b9a\u5355\u4f4d\uff0c\u4f8b\u5982 512M\u30011G\u3002 <code>spark.cores.max</code> int <code>16</code> \u5426 \u5f53\u9a71\u52a8\u7a0b\u5e8f\u4ee5\u201c\u7c97\u7c92\u5ea6\u201d\u5171\u4eab\u6a21\u5f0f\u5728\u72ec\u7acb\u90e8\u7f72\u96c6\u7fa4\u6216 Mesos \u96c6\u7fa4\u4e0a\u8fd0\u884c\u65f6\uff0c\u8de8\u96c6\u7fa4\uff08\u800c\u975e\u4ece\u6bcf\u53f0\u8ba1\u7b97\u673a\uff09\u8bf7\u6c42\u5e94\u7528\u7a0b\u5e8f\u7684\u6700\u5927 CPU \u6838\u6570\u3002\u5982\u679c\u672a\u8bbe\u7f6e\uff0c\u5219\u503c\u4e3a Spark \u7684\u72ec\u7acb\u96c6\u7fa4\u7ba1\u7406\u5668\u4e0a\u7684<code>spark.deploy.defaultCores</code>\u6216 Mesos \u4e0a\u7684 infinite\uff08\u6240\u6709\u53ef\u7528\u7684\u5185\u6838\uff09\u3002"},{"location":"import-export/nebula-exchange/parameter-reference/ex-ug-parameter/#hive","title":"Hive \u914d\u7f6e\uff08\u53ef\u9009\uff09","text":"<p>\u5982\u679c Spark \u548c Hive \u90e8\u7f72\u5728\u4e0d\u540c\u96c6\u7fa4\uff0c\u624d\u9700\u8981\u914d\u7f6e\u8fde\u63a5 Hive \u7684\u53c2\u6570\uff0c\u5426\u5219\u8bf7\u5ffd\u7565\u8fd9\u4e9b\u914d\u7f6e\u3002</p> \u53c2\u6570 \u6570\u636e\u7c7b\u578b \u9ed8\u8ba4\u503c \u662f\u5426\u5fc5\u987b \u8bf4\u660e <code>hive.warehouse</code> string - \u662f HDFS \u4e2d\u7684 warehouse \u8def\u5f84\u3002\u7528\u53cc\u5f15\u53f7\u62ec\u8d77\u8def\u5f84\uff0c\u4ee5<code>hdfs://</code>\u5f00\u5934\u3002 <code>hive.connectionURL</code> string - \u662f JDBC \u8fde\u63a5\u7684 URL\u3002\u4f8b\u5982<code>\"jdbc:mysql://127.0.0.1:3306/hive_spark?characterEncoding=UTF-8\"</code>\u3002 <code>hive.connectionDriverName</code> string <code>\"com.mysql.jdbc.Driver\"</code> \u662f \u9a71\u52a8\u540d\u79f0\u3002 <code>hive.connectionUserName</code> list[string] - \u662f \u8fde\u63a5\u7684\u7528\u6237\u540d\u3002 <code>hive.connectionPassword</code> list[string] - \u662f \u7528\u6237\u540d\u5bf9\u5e94\u7684\u5bc6\u7801\u3002"},{"location":"import-export/nebula-exchange/parameter-reference/ex-ug-parameter/#nebulagraph","title":"NebulaGraph\u76f8\u5173\u914d\u7f6e","text":"\u53c2\u6570 \u6570\u636e\u7c7b\u578b \u9ed8\u8ba4\u503c \u662f\u5426\u5fc5\u987b \u8bf4\u660e <code>nebula.address.graph</code> list[string] <code>[\"127.0.0.1:9669\"]</code> \u662f \u6240\u6709 Graph \u670d\u52a1\u7684\u5730\u5740\uff0c\u5305\u62ec IP \u548c\u7aef\u53e3\uff0c\u591a\u4e2a\u5730\u5740\u7528\u82f1\u6587\u9017\u53f7\uff08,\uff09\u5206\u9694\u3002\u683c\u5f0f\u4e3a<code>[\"ip1:port1\",\"ip2:port2\",\"ip3:port3\"]</code>\u3002 <code>nebula.address.meta</code> list[string] <code>[\"127.0.0.1:9559\"]</code> \u662f \u6240\u6709 Meta \u670d\u52a1\u7684\u5730\u5740\uff0c\u5305\u62ec IP \u548c\u7aef\u53e3\uff0c\u591a\u4e2a\u5730\u5740\u7528\u82f1\u6587\u9017\u53f7\uff08,\uff09\u5206\u9694\u3002\u683c\u5f0f\u4e3a<code>[\"ip1:port1\",\"ip2:port2\",\"ip3:port3\"]</code>\u3002 <code>nebula.user</code> string - \u662f \u62e5\u6709 NebulaGraph \u5199\u6743\u9650\u7684\u7528\u6237\u540d\u3002 <code>nebula.pswd</code> string - \u662f \u7528\u6237\u540d\u5bf9\u5e94\u7684\u5bc6\u7801\u3002\u5bc6\u7801\u652f\u6301\u660e\u6587\u6216\u8005 RSA \u52a0\u5bc6\u540e\u7684\u5bc6\u7801\u3002\u5982\u679c\u4f7f\u7528 RSA \u52a0\u5bc6\u540e\u7684\u5bc6\u7801\uff0c\u9700\u8981\u8bbe\u7f6e<code>enableRSA</code>\u548c<code>privateKey</code>\u3002\u5982\u4f55\u52a0\u5bc6\u5bc6\u7801\uff0c\u53c2\u89c1\u4e0a\u6587\u4f7f\u7528\u52a0\u5bc6\u5bc6\u7801\u3002 <code>nebula.enableRSA</code> bool <code>false</code> \u5426 \u662f\u5426\u4f7f\u7528 RSA \u52a0\u5bc6\u7684\u5bc6\u7801\u3002 <code>nebula.privateKey</code> string - \u5426 RSA \u52a0\u5bc6\u7684\u5bc6\u94a5\u3002 <code>nebula.space</code> string - \u662f \u9700\u8981\u5bfc\u5165\u6570\u636e\u7684\u7684\u56fe\u7a7a\u95f4\u540d\u79f0\u3002 <code>nebula.ssl.enable.graph</code> bool <code>false</code> \u662f \u5f00\u542f Exchange \u4e0e Graph \u670d\u52a1\u4e4b\u95f4\u7684 SSL \u52a0\u5bc6\u4f20\u8f93\u3002\u5f53\u503c\u4e3a<code>true</code>\u65f6\u5f00\u542f\uff0c\u4e0b\u65b9\u7684 SSL \u76f8\u5173\u53c2\u6570\u751f\u6548\u3002\u5982\u679c Exchange \u8fd0\u884c\u5728\u591a\u673a\u96c6\u7fa4\u4e0a\uff0c\u5728\u8bbe\u7f6e\u4ee5\u4e0b SSL \u76f8\u5173\u8def\u5f84\u65f6\uff0c\u9700\u8981\u5728\u6bcf\u53f0\u673a\u5668\u7684\u76f8\u540c\u8def\u5f84\u90fd\u5b58\u50a8\u76f8\u5e94\u7684\u6587\u4ef6\u3002 <code>nebula.ssl.enable.meta</code> bool <code>false</code> \u662f \u5f00\u542f Exchange \u4e0e Meta \u670d\u52a1\u4e4b\u95f4\u7684 SSL \u52a0\u5bc6\u4f20\u8f93\u3002\u5f53\u503c\u4e3a<code>true</code>\u65f6\u5f00\u542f\uff0c\u4e0b\u65b9\u7684 SSL \u76f8\u5173\u53c2\u6570\u751f\u6548\u3002\u5982\u679c Exchange \u8fd0\u884c\u5728\u591a\u673a\u96c6\u7fa4\u4e0a\uff0c\u5728\u8bbe\u7f6e\u4ee5\u4e0b SSL \u76f8\u5173\u8def\u5f84\u65f6\uff0c\u9700\u8981\u5728\u6bcf\u53f0\u673a\u5668\u7684\u76f8\u540c\u8def\u5f84\u90fd\u5b58\u50a8\u76f8\u5e94\u7684\u6587\u4ef6\u3002 <code>nebula.ssl.sign</code> string <code>ca</code> \u662f \u7b7e\u540d\u65b9\u5f0f\uff0c\u53ef\u9009\u503c\uff1a<code>ca</code>\uff08CA \u7b7e\u540d\uff09\u6216<code>self</code>\uff08\u81ea\u7b7e\u540d\uff09\u3002 <code>nebula.ssl.ca.param.caCrtFilePath</code> string <code>\"/path/caCrtFilePath\"</code> \u662f <code>nebula.ssl.sign</code>\u7684\u503c\u4e3a<code>ca</code>\u65f6\u751f\u6548\uff0c\u7528\u4e8e\u6307\u5b9a CA \u8bc1\u4e66\u7684\u5b58\u50a8\u8def\u5f84\u3002 <code>nebula.ssl.ca.param.crtFilePath</code> string <code>\"/path/crtFilePath\"</code> \u662f <code>nebula.ssl.sign</code>\u7684\u503c\u4e3a<code>ca</code>\u65f6\u751f\u6548\uff0c\u7528\u4e8e\u6307\u5b9a CRT \u8bc1\u4e66\u7684\u5b58\u50a8\u8def\u5f84\u3002 <code>nebula.ssl.ca.param.keyFilePath</code> string <code>\"/path/keyFilePath\"</code> \u662f <code>nebula.ssl.sign</code>\u7684\u503c\u4e3a<code>ca</code>\u65f6\u751f\u6548\uff0c\u7528\u4e8e\u6307\u5b9a\u79c1\u94a5\u6587\u4ef6\u7684\u5b58\u50a8\u8def\u5f84\u3002 <code>nebula.ssl.self.param.crtFilePath</code> string <code>\"/path/crtFilePath\"</code> \u662f <code>nebula.ssl.sign</code>\u7684\u503c\u4e3a<code>self</code>\u65f6\u751f\u6548\uff0c\u7528\u4e8e\u6307\u5b9a CRT \u8bc1\u4e66\u7684\u5b58\u50a8\u8def\u5f84\u3002 <code>nebula.ssl.self.param.keyFilePath</code> string <code>\"/path/keyFilePath\"</code> \u662f <code>nebula.ssl.sign</code>\u7684\u503c\u4e3a<code>self</code>\u65f6\u751f\u6548\uff0c\u7528\u4e8e\u6307\u5b9a\u79c1\u94a5\u6587\u4ef6\u7684\u5b58\u50a8\u8def\u5f84\u3002 <code>nebula.ssl.self.param.password</code> string <code>\"nebula\"</code> \u662f <code>nebula.ssl.sign</code>\u7684\u503c\u4e3a<code>self</code>\u65f6\u751f\u6548\uff0c\u7528\u4e8e\u6307\u5b9a\u5bc6\u7801\u6587\u4ef6\u7684\u5b58\u50a8\u8def\u5f84\u3002 <code>nebula.path.local</code> string <code>\"/tmp\"</code> \u5426 \u5bfc\u5165 SST \u6587\u4ef6\u65f6\u9700\u8981\u8bbe\u7f6e\u672c\u5730 SST \u6587\u4ef6\u8def\u5f84\u3002 <code>nebula.path.remote</code> string <code>\"/sst\"</code> \u5426 \u5bfc\u5165 SST \u6587\u4ef6\u65f6\u9700\u8981\u8bbe\u7f6e\u8fdc\u7aef SST \u6587\u4ef6\u8def\u5f84\u3002 <code>nebula.path.hdfs.namenode</code> string <code>\"hdfs://name_node:9000\"</code> \u5426 \u5bfc\u5165 SST \u6587\u4ef6\u65f6\u9700\u8981\u8bbe\u7f6e HDFS \u7684 namenode\u3002 <code>nebula.connection.timeout</code> int <code>3000</code> \u5426 Thrift \u8fde\u63a5\u7684\u8d85\u65f6\u65f6\u95f4\uff0c\u5355\u4f4d\u4e3a ms\u3002 <code>nebula.connection.retry</code> int <code>3</code> \u5426 Thrift \u8fde\u63a5\u91cd\u8bd5\u6b21\u6570\u3002 <code>nebula.execution.retry</code> int <code>3</code> \u5426 nGQL \u8bed\u53e5\u6267\u884c\u91cd\u8bd5\u6b21\u6570\u3002 <code>nebula.error.max</code> int <code>32</code> \u5426 \u5bfc\u5165\u8fc7\u7a0b\u4e2d\u7684\u6700\u5927\u5931\u8d25\u6b21\u6570\u3002\u5f53\u5931\u8d25\u6b21\u6570\u8fbe\u5230\u6700\u5927\u503c\u65f6\uff0c\u63d0\u4ea4\u7684 Spark \u4f5c\u4e1a\u5c06\u81ea\u52a8\u505c\u6b62\u3002 <code>nebula.error.output</code> string <code>/tmp/errors</code> \u5426 \u8f93\u51fa\u9519\u8bef\u65e5\u5fd7\u7684\u8def\u5f84\u3002\u9519\u8bef\u65e5\u5fd7\u4fdd\u5b58\u6267\u884c\u5931\u8d25\u7684 nGQL \u8bed\u53e5\u3002 <code>nebula.rate.limit</code> int <code>1024</code> \u5426 \u5bfc\u5165\u6570\u636e\u65f6\u4ee4\u724c\u6876\u7684\u4ee4\u724c\u6570\u91cf\u9650\u5236\u3002 <code>nebula.rate.timeout</code> int <code>1000</code> \u5426 \u4ee4\u724c\u6876\u4e2d\u62ff\u53d6\u4ee4\u724c\u7684\u8d85\u65f6\u65f6\u95f4\uff0c\u5355\u4f4d\uff1a\u6beb\u79d2\u3002 <p>Note</p> <p>NebulaGraph \u9ed8\u8ba4\u4e0d\u652f\u6301\u65e0 Tag \u7684\u70b9\u3002\u5982\u679c\u9700\u8981\u5bfc\u5165\u65e0 Tag \u7684\u70b9\uff0c\u9700\u8981\u5148\u5728\u96c6\u7fa4\u5185\u5f00\u542f\u652f\u6301\u65e0 Tag \u70b9\uff0c\u7136\u540e\u5728 Exchange \u7684\u914d\u7f6e\u6587\u4ef6\u5185\u65b0\u589e<code>nebula.enableTagless</code>\u53c2\u6570\uff0c\u503c\u4e3a<code>true</code>\u3002\u793a\u4f8b\u5982\u4e0b\uff1a</p> <pre><code>nebula: {\n    address:{\n      graph:[\"127.0.0.1:9669\"]\n      meta:[\"127.0.0.1:9559\"]\n    }\n    user: root\n    pswd: nebula\n    space: test\n    enableTagless: true\n    ......\n\n }\n</code></pre>"},{"location":"import-export/nebula-exchange/parameter-reference/ex-ug-parameter/#_5","title":"\u70b9\u914d\u7f6e","text":"<p>\u5bf9\u4e8e\u4e0d\u540c\u7684\u6570\u636e\u6e90\uff0c\u70b9\u7684\u914d\u7f6e\u4e5f\u6709\u6240\u4e0d\u540c\uff0c\u6709\u5f88\u591a\u901a\u7528\u53c2\u6570\uff0c\u4e5f\u6709\u90e8\u5206\u7279\u6709\u53c2\u6570\uff0c\u914d\u7f6e\u65f6\u9700\u8981\u914d\u7f6e\u901a\u7528\u53c2\u6570\u548c\u4e0d\u540c\u6570\u636e\u6e90\u7684\u7279\u6709\u53c2\u6570\u3002</p>"},{"location":"import-export/nebula-exchange/parameter-reference/ex-ug-parameter/#_6","title":"\u901a\u7528\u53c2\u6570","text":"\u53c2\u6570 \u6570\u636e\u7c7b\u578b \u9ed8\u8ba4\u503c \u662f\u5426\u5fc5\u987b \u8bf4\u660e <code>tags.name</code> string - \u662f NebulaGraph \u4e2d\u5b9a\u4e49\u7684 Tag \u540d\u79f0\u3002 <code>tags.type.source</code> string - \u662f \u6307\u5b9a\u6570\u636e\u6e90\u3002\u4f8b\u5982<code>csv</code>\u3002 <code>tags.type.sink</code> string <code>client</code> \u662f \u6307\u5b9a\u5bfc\u5165\u65b9\u5f0f\uff0c\u53ef\u9009\u503c\u4e3a<code>client</code>\u548c<code>SST</code>\u3002 <code>tags.writeMode</code> string <code>INSERT</code> \u5426 \u5bf9\u6570\u636e\u7684\u6279\u91cf\u64cd\u4f5c\u7c7b\u578b\uff0c\u5305\u62ec\u6279\u91cf\u5bfc\u5165\u3001\u66f4\u65b0\u548c\u5220\u9664\u3002\u53ef\u9009\u503c\u4e3a<code>INSERT</code>\u3001<code>UPDATE</code>\u3001<code>DELETE</code>\u3002 <code>tags.deleteEdge</code> string <code>false</code> \u5426 \u8fdb\u884c\u6279\u91cf\u5220\u9664\u64cd\u4f5c\u65f6\u662f\u5426\u5220\u9664\u8be5\u70b9\u5173\u8054\u7684\u51fa\u8fb9\u548c\u5165\u8fb9\u3002<code>tags.writeMode</code>\u4e3a<code>DELETE</code>\u65f6\u8be5\u53c2\u6570\u751f\u6548\u3002 <code>tags.fields</code> list[string] - \u662f \u5c5e\u6027\u5bf9\u5e94\u7684\u5217\u7684\u8868\u5934\u6216\u5217\u540d\u3002\u5982\u679c\u6709\u8868\u5934\u6216\u5217\u540d\uff0c\u8bf7\u76f4\u63a5\u4f7f\u7528\u8be5\u540d\u79f0\u3002\u5982\u679c CSV \u6587\u4ef6\u6ca1\u6709\u8868\u5934\uff0c\u7528<code>[_c0, _c1, _c2]</code>\u7684\u5f62\u5f0f\u8868\u793a\u7b2c\u4e00\u5217\u3001\u7b2c\u4e8c\u5217\u3001\u7b2c\u4e09\u5217\uff0c\u4ee5\u6b64\u7c7b\u63a8\u3002 <code>tags.nebula.fields</code> list[string] - \u662f NebulaGraph \u4e2d\u5b9a\u4e49\u7684\u5c5e\u6027\u540d\u79f0\uff0c\u987a\u5e8f\u5fc5\u987b\u548c<code>tags.fields</code>\u4e00\u4e00\u5bf9\u5e94\u3002\u4f8b\u5982<code>[_c1, _c2]</code>\u5bf9\u5e94<code>[name, age]</code>\uff0c\u8868\u793a\u7b2c\u4e8c\u5217\u4e3a\u5c5e\u6027 name \u7684\u503c\uff0c\u7b2c\u4e09\u5217\u4e3a\u5c5e\u6027 age \u7684\u503c\u3002 <code>tags.vertex.field</code> string - \u662f \u70b9 ID \u7684\u5217\u3002\u4f8b\u5982 CSV \u6587\u4ef6\u6ca1\u6709\u8868\u5934\u65f6\uff0c\u53ef\u4ee5\u7528<code>_c0</code>\u8868\u793a\u7b2c\u4e00\u5217\u7684\u503c\u4f5c\u4e3a\u70b9 ID\u3002 <code>tags.vertex.udf.separator</code> string - \u5426 \u901a\u8fc7\u81ea\u5b9a\u4e49\u89c4\u5219\u5408\u5e76\u591a\u5217\uff0c\u8be5\u53c2\u6570\u6307\u5b9a\u8fde\u63a5\u7b26\u3002 <code>tags.vertex.udf.oldColNames</code> list - \u5426 \u901a\u8fc7\u81ea\u5b9a\u4e49\u89c4\u5219\u5408\u5e76\u591a\u5217\uff0c\u8be5\u53c2\u6570\u6307\u5b9a\u5f85\u5408\u5e76\u7684\u5217\u540d\u3002\u591a\u4e2a\u5217\u7528\u82f1\u6587\u9017\u53f7\uff08,\uff09\u5206\u9694\u3002 <code>tags.vertex.udf.newColName</code> string - \u5426 \u901a\u8fc7\u81ea\u5b9a\u4e49\u89c4\u5219\u5408\u5e76\u591a\u5217\uff0c\u8be5\u53c2\u6570\u6307\u5b9a\u65b0\u5217\u7684\u5217\u540d\u3002 <code>tags.vertex.prefix</code> string - \u5426 \u4e3a VID \u589e\u52a0\u6307\u5b9a\u7684\u524d\u7f00\u3002\u4f8b\u5982 VID \u4e3a<code>12345</code>\uff0c\u589e\u52a0\u524d\u7f00<code>tag1</code>\u540e\u4e3a<code>tag1_12345</code>\u3002\u4e0b\u5212\u7ebf\u65e0\u6cd5\u4fee\u6539\u3002 <code>tags.vertex.policy</code> string - \u5426 \u4ec5\u652f\u6301\u53d6\u503c<code>hash</code>\u3002\u5bf9 string \u7c7b\u578b\u7684 VID \u8fdb\u884c\u54c8\u5e0c\u5316\u64cd\u4f5c\u3002 <code>tags.batch</code> int <code>256</code> \u662f \u5355\u6279\u6b21\u5199\u5165 NebulaGraph \u7684\u6700\u5927\u70b9\u6570\u91cf\u3002 <code>tags.partition</code> int <code>32</code> \u662f \u6570\u636e\u5199\u5165 NebulaGraph \u65f6\u9700\u8981\u521b\u5efa\u7684\u5206\u533a\u6570\u3002\u5982\u679c<code>tags.partition \u2264 1</code>\uff0c\u5728 NebulaGraph \u4e2d\u521b\u5efa\u7684\u5206\u533a\u6570\u548c\u6570\u636e\u6e90\u7684\u5206\u533a\u6570\u76f8\u540c\u3002"},{"location":"import-export/nebula-exchange/parameter-reference/ex-ug-parameter/#parquetjsonorc","title":"Parquet/JSON/ORC \u6e90\u7279\u6709\u53c2\u6570","text":"\u53c2\u6570 \u6570\u636e\u7c7b\u578b \u9ed8\u8ba4\u503c \u662f\u5426\u5fc5\u987b \u8bf4\u660e <code>tags.path</code> string - \u662f HDFS \u4e2d\u70b9\u6570\u636e\u6587\u4ef6\u7684\u8def\u5f84\u3002\u7528\u53cc\u5f15\u53f7\u62ec\u8d77\u8def\u5f84\uff0c\u4ee5<code>hdfs://</code>\u5f00\u5934\u3002"},{"location":"import-export/nebula-exchange/parameter-reference/ex-ug-parameter/#csv","title":"CSV \u6e90\u7279\u6709\u53c2\u6570","text":"\u53c2\u6570 \u6570\u636e\u7c7b\u578b \u9ed8\u8ba4\u503c \u662f\u5426\u5fc5\u987b \u8bf4\u660e <code>tags.path</code> string - \u662f HDFS \u4e2d\u70b9\u6570\u636e\u6587\u4ef6\u7684\u8def\u5f84\u3002\u7528\u53cc\u5f15\u53f7\u62ec\u8d77\u8def\u5f84\uff0c\u4ee5<code>hdfs://</code>\u5f00\u5934\u3002 <code>tags.separator</code> string <code>,</code> \u662f \u5206\u9694\u7b26\u3002\u9ed8\u8ba4\u503c\u4e3a\u82f1\u6587\u9017\u53f7\uff08,\uff09\u3002\u5bf9\u4e8e\u7279\u6b8a\u5b57\u7b26\uff0c\u5982\u63a7\u5236\u7b26<code>^A</code>,\u53ef\u4ee5\u7528 ASCII \u516b\u8fdb\u5236<code>\\001</code>\u6216 UNICODE \u7f16\u7801\u5341\u516d\u8fdb\u5236<code>\\u0001</code>\u8868\u793a\uff0c\u63a7\u5236\u7b26<code>^B</code>\uff0c\u7528 ASCII \u516b\u8fdb\u5236<code>\\002</code>\u6216 UNICODE \u7f16\u7801\u5341\u516d\u8fdb\u5236<code>\\u0002</code>\u8868\u793a\uff0c\u63a7\u5236\u7b26<code>^C</code>\uff0c\u7528 ASCII \u516b\u8fdb\u5236<code>\\003</code>\u6216 UNICODE \u7f16\u7801\u5341\u516d\u8fdb\u5236<code>\\u0003</code>\u8868\u793a\u3002 <code>tags.header</code> bool <code>true</code> \u662f \u6587\u4ef6\u662f\u5426\u6709\u8868\u5934\u3002"},{"location":"import-export/nebula-exchange/parameter-reference/ex-ug-parameter/#hive_1","title":"Hive \u6e90\u7279\u6709\u53c2\u6570","text":"\u53c2\u6570 \u6570\u636e\u7c7b\u578b \u9ed8\u8ba4\u503c \u662f\u5426\u5fc5\u987b \u8bf4\u660e <code>tags.exec</code> string - \u662f \u67e5\u8be2\u6570\u636e\u6e90\u7684\u8bed\u53e5\u3002\u4f8b\u5982<code>select name,age from mooc.users</code>\u3002"},{"location":"import-export/nebula-exchange/parameter-reference/ex-ug-parameter/#maxcompute","title":"MaxCompute \u6e90\u7279\u6709\u53c2\u6570","text":"\u53c2\u6570 \u6570\u636e\u7c7b\u578b \u9ed8\u8ba4\u503c \u662f\u5426\u5fc5\u987b \u8bf4\u660e <code>tags.table</code> string - \u662f MaxCompute \u7684\u8868\u540d\u3002 <code>tags.project</code> string - \u662f MaxCompute \u7684\u9879\u76ee\u540d\u3002 <code>tags.odpsUrl</code> string - \u662f MaxCompute \u670d\u52a1\u7684 odpsUrl\u3002\u5730\u5740\u53ef\u6839\u636e\u963f\u91cc\u4e91\u6587\u6863\u67e5\u770b\u3002 <code>tags.tunnelUrl</code> string - \u662f MaxCompute \u670d\u52a1\u7684 tunnelUrl\u3002\u5730\u5740\u53ef\u6839\u636e\u963f\u91cc\u4e91\u6587\u6863\u67e5\u770b\u3002 <code>tags.accessKeyId</code> string - \u662f MaxCompute \u670d\u52a1\u7684 accessKeyId\u3002 <code>tags.accessKeySecret</code> string - \u662f MaxCompute \u670d\u52a1\u7684 accessKeySecret\u3002 <code>tags.partitionSpec</code> string - \u5426 MaxCompute \u8868\u7684\u5206\u533a\u63cf\u8ff0\u3002 <code>tags.numPartitions</code> int <code>1</code> \u5426 MaxCompute \u7684 Spark \u8fde\u63a5\u5668\u5728\u8bfb\u53d6 MaxCompute \u6570\u636e\u65f6\u4f7f\u7528\u7684\u5206\u533a\u6570\u3002 <code>tags.sentence</code> string - \u5426 \u67e5\u8be2\u6570\u636e\u6e90\u7684\u8bed\u53e5\u3002SQL \u8bed\u53e5\u4e2d\u7684\u8868\u540d\u548c\u4e0a\u65b9 table \u7684\u503c\u76f8\u540c\u3002"},{"location":"import-export/nebula-exchange/parameter-reference/ex-ug-parameter/#neo4j","title":"Neo4j \u6e90\u7279\u6709\u53c2\u6570","text":"\u53c2\u6570 \u6570\u636e\u7c7b\u578b \u9ed8\u8ba4\u503c \u662f\u5426\u5fc5\u987b \u8bf4\u660e <code>tags.exec</code> string - \u662f \u67e5\u8be2\u6570\u636e\u6e90\u7684\u8bed\u53e5\u3002\u4f8b\u5982<code>match (n:label) return n.neo4j-field-0</code>\u3002 <code>tags.server</code> string <code>\"bolt://127.0.0.1:7687\"</code> \u662f Neo4j \u670d\u52a1\u5668\u5730\u5740\u3002 <code>tags.user</code> string - \u662f \u62e5\u6709\u8bfb\u53d6\u6743\u9650\u7684 Neo4j \u7528\u6237\u540d\u3002 <code>tags.password</code> string - \u662f \u7528\u6237\u540d\u5bf9\u5e94\u5bc6\u7801\u3002 <code>tags.database</code> string - \u662f Neo4j \u4e2d\u4fdd\u5b58\u6e90\u6570\u636e\u7684\u6570\u636e\u5e93\u540d\u3002 <code>tags.check_point_path</code> string <code>/tmp/test</code> \u5426 \u8bbe\u7f6e\u4fdd\u5b58\u5bfc\u5165\u8fdb\u5ea6\u4fe1\u606f\u7684\u76ee\u5f55\uff0c\u7528\u4e8e\u65ad\u70b9\u7eed\u4f20\u3002\u5982\u679c\u672a\u8bbe\u7f6e\uff0c\u8868\u793a\u4e0d\u542f\u7528\u65ad\u70b9\u7eed\u4f20\u3002"},{"location":"import-export/nebula-exchange/parameter-reference/ex-ug-parameter/#mysqlpostgresql","title":"MySQL/PostgreSQL \u6e90\u7279\u6709\u53c2\u6570","text":"\u53c2\u6570 \u6570\u636e\u7c7b\u578b \u9ed8\u8ba4\u503c \u662f\u5426\u5fc5\u987b \u8bf4\u660e <code>tags.host</code> string - \u662f MySQL/PostgreSQL \u670d\u52a1\u5668\u5730\u5740\u3002 <code>tags.port</code> string - \u662f MySQL/PostgreSQL \u670d\u52a1\u5668\u7aef\u53e3\u3002 <code>tags.database</code> string - \u662f \u6570\u636e\u5e93\u540d\u79f0\u3002 <code>tags.table</code> string - \u662f \u9700\u8981\u4f5c\u4e3a\u6570\u636e\u6e90\u7684\u8868\u540d\u79f0\u3002 <code>tags.user</code> string - \u662f \u62e5\u6709\u8bfb\u53d6\u6743\u9650\u7684 MySQL/PostgreSQL \u7528\u6237\u540d\u3002 <code>tags.password</code> string - \u662f \u7528\u6237\u540d\u5bf9\u5e94\u5bc6\u7801\u3002 <code>tags.sentence</code> string - \u662f \u67e5\u8be2\u6570\u636e\u6e90\u7684\u8bed\u53e5\u3002\u4f8b\u5982<code>\"select teamid, name from team order by teamid\"</code>\u3002"},{"location":"import-export/nebula-exchange/parameter-reference/ex-ug-parameter/#oracle","title":"Oracle \u6e90\u7279\u6709\u53c2\u6570","text":"\u53c2\u6570 \u6570\u636e\u7c7b\u578b \u9ed8\u8ba4\u503c \u662f\u5426\u5fc5\u987b \u8bf4\u660e <code>tags.url</code> string - \u662f Oracle \u6570\u636e\u5e93\u8fde\u63a5\u5730\u5740\u3002 <code>tags.driver</code> string - \u662f Oracle \u9a71\u52a8\u5730\u5740\u3002 <code>tags.user</code> string - \u662f \u62e5\u6709\u8bfb\u53d6\u6743\u9650\u7684 Oracle \u7528\u6237\u540d\u3002 <code>tags.password</code> string - \u662f \u7528\u6237\u540d\u5bf9\u5e94\u5bc6\u7801\u3002 <code>tags.table</code> string - \u662f \u9700\u8981\u4f5c\u4e3a\u6570\u636e\u6e90\u7684\u8868\u540d\u79f0\u3002 <code>tags.sentence</code> string - \u662f \u67e5\u8be2\u6570\u636e\u6e90\u7684\u8bed\u53e5\u3002\u4f8b\u5982<code>\"select playerid, name, age from player\"</code>\u3002"},{"location":"import-export/nebula-exchange/parameter-reference/ex-ug-parameter/#clickhouse","title":"ClickHouse \u6e90\u7279\u6709\u53c2\u6570","text":"\u53c2\u6570 \u6570\u636e\u7c7b\u578b \u9ed8\u8ba4\u503c \u662f\u5426\u5fc5\u987b \u8bf4\u660e <code>tags.url</code> string - \u662f ClickHouse \u7684 JDBC URL\u3002 <code>tags.user</code> string - \u662f \u6709\u8bfb\u53d6\u6743\u9650\u7684 ClickHouse \u7528\u6237\u540d\u3002 <code>tags.password</code> string - \u662f \u7528\u6237\u540d\u5bf9\u5e94\u5bc6\u7801\u3002 <code>tags.numPartition</code> string - \u662f ClickHouse \u5206\u533a\u6570\u3002 <code>tags.sentence</code> string - \u662f \u67e5\u8be2\u6570\u636e\u6e90\u7684\u8bed\u53e5\u3002"},{"location":"import-export/nebula-exchange/parameter-reference/ex-ug-parameter/#hbase","title":"Hbase \u6e90\u7279\u6709\u53c2\u6570","text":"\u53c2\u6570 \u6570\u636e\u7c7b\u578b \u9ed8\u8ba4\u503c \u662f\u5426\u5fc5\u987b \u8bf4\u660e <code>tags.host</code> string <code>127.0.0.1</code> \u662f Hbase \u670d\u52a1\u5668\u5730\u5740\u3002 <code>tags.port</code> string <code>2181</code> \u662f Hbase \u670d\u52a1\u5668\u7aef\u53e3\u3002 <code>tags.table</code> string - \u662f \u9700\u8981\u4f5c\u4e3a\u6570\u636e\u6e90\u7684\u8868\u540d\u79f0\u3002 <code>tags.columnFamily</code> string - \u662f \u8868\u6240\u5c5e\u7684\u5217\u65cf\uff08column family\uff09\u3002"},{"location":"import-export/nebula-exchange/parameter-reference/ex-ug-parameter/#pulsar","title":"Pulsar \u6e90\u7279\u6709\u53c2\u6570","text":"\u53c2\u6570 \u6570\u636e\u7c7b\u578b \u9ed8\u8ba4\u503c \u662f\u5426\u5fc5\u987b \u8bf4\u660e <code>tags.service</code> string <code>\"pulsar://localhost:6650\"</code> \u662f Pulsar \u670d\u52a1\u5668\u5730\u5740\u3002 <code>tags.admin</code> string <code>\"http://localhost:8081\"</code> \u662f \u8fde\u63a5 pulsar \u7684 admin.url\u3002 <code>tags.options.&lt;topic|topics|topicsPattern&gt;</code> string - \u662f Pulsar \u7684\u9009\u9879\uff0c\u53ef\u4ee5\u4ece<code>topic</code>\u3001<code>topics</code>\u548c<code>topicsPattern</code>\u9009\u62e9\u4e00\u4e2a\u8fdb\u884c\u914d\u7f6e\u3002 <code>tags.interval.seconds</code> int <code>10</code> \u662f \u8bfb\u53d6\u6d88\u606f\u7684\u95f4\u9694\u3002\u5355\u4f4d\uff1a\u79d2\u3002"},{"location":"import-export/nebula-exchange/parameter-reference/ex-ug-parameter/#kafka","title":"Kafka \u6e90\u7279\u6709\u53c2\u6570","text":"\u53c2\u6570 \u6570\u636e\u7c7b\u578b \u9ed8\u8ba4\u503c \u662f\u5426\u5fc5\u987b \u8bf4\u660e <code>tags.service</code> string - \u662f Kafka \u670d\u52a1\u5668\u5730\u5740\u3002 <code>tags.topic</code> string - \u662f \u6d88\u606f\u7c7b\u522b\u3002 <code>tags.interval.seconds</code> int <code>10</code> \u662f \u8bfb\u53d6\u6d88\u606f\u7684\u95f4\u9694\u3002\u5355\u4f4d\uff1a\u79d2\u3002 <code>tags.securityProtocol</code> string - \u5426 Kafka \u5b89\u5168\u534f\u8bae\u3002 <code>tags.mechanism</code> string - \u5426 Kafka SASL \u5b89\u5168\u8ba4\u8bc1\u673a\u5236\u3002 <code>tags.kerberos</code> bool <code>false</code> \u5426 \u662f\u5426\u542f\u7528 Kerberos \u8fdb\u884c\u5b89\u5168\u8ba4\u8bc1\u3002\u5982\u679c<code>tags.mechanism</code>\u4e3a<code>kerberos</code>\uff0c\u8be5\u53c2\u6570\u5fc5\u987b\u8bbe\u7f6e\u4e3a<code>true</code>\u3002 <code>tags.kerberosServiceName</code> string - \u5426 Kerberos \u670d\u52a1\u540d\u79f0\u3002\u5982\u679c<code>tags.kerberos</code>\u4e3a<code>true</code>\uff0c\u8be5\u53c2\u6570\u5fc5\u586b\u3002"},{"location":"import-export/nebula-exchange/parameter-reference/ex-ug-parameter/#sst","title":"\u751f\u6210 SST \u65f6\u7684\u7279\u6709\u53c2\u6570","text":"\u53c2\u6570 \u6570\u636e\u7c7b\u578b \u9ed8\u8ba4\u503c \u662f\u5426\u5fc5\u987b \u8bf4\u660e <code>tags.path</code> string - \u662f \u6307\u5b9a\u9700\u8981\u751f\u6210 SST \u6587\u4ef6\u7684\u6e90\u6587\u4ef6\u7684\u8def\u5f84\u3002 <code>tags.repartitionWithNebula</code> bool <code>true</code> \u5426 \u751f\u6210 SST \u6587\u4ef6\u65f6\u662f\u5426\u8981\u57fa\u4e8e NebulaGraph \u4e2d\u56fe\u7a7a\u95f4\u7684 partition \u8fdb\u884c\u6570\u636e\u91cd\u5206\u533a\u3002\u5f00\u542f\u8be5\u529f\u80fd\u53ef\u51cf\u5c11 DOWNLOAD \u548c INGEST SST \u6587\u4ef6\u9700\u8981\u7684\u65f6\u95f4\u3002"},{"location":"import-export/nebula-exchange/parameter-reference/ex-ug-parameter/#_7","title":"\u8fb9\u914d\u7f6e","text":"<p>\u5bf9\u4e8e\u4e0d\u540c\u7684\u6570\u636e\u6e90\uff0c\u8fb9\u7684\u914d\u7f6e\u4e5f\u6709\u6240\u4e0d\u540c\uff0c\u6709\u5f88\u591a\u901a\u7528\u53c2\u6570\uff0c\u4e5f\u6709\u90e8\u5206\u7279\u6709\u53c2\u6570\uff0c\u914d\u7f6e\u65f6\u9700\u8981\u914d\u7f6e\u901a\u7528\u53c2\u6570\u548c\u4e0d\u540c\u6570\u636e\u6e90\u7684\u7279\u6709\u53c2\u6570\u3002</p> <p>\u8fb9\u914d\u7f6e\u7684\u4e0d\u540c\u6570\u636e\u6e90\u7279\u6709\u53c2\u6570\u8bf7\u53c2\u89c1\u4e0a\u65b9\u70b9\u914d\u7f6e\u5185\u7684\u7279\u6709\u53c2\u6570\u4ecb\u7ecd\uff0c\u6ce8\u610f\u533a\u5206 tags \u548c edges \u5373\u53ef\u3002</p>"},{"location":"import-export/nebula-exchange/parameter-reference/ex-ug-parameter/#_8","title":"\u901a\u7528\u53c2\u6570","text":"\u53c2\u6570 \u6570\u636e\u7c7b\u578b \u9ed8\u8ba4\u503c \u662f\u5426\u5fc5\u987b \u8bf4\u660e <code>edges.name</code> string - \u662f NebulaGraph \u4e2d\u5b9a\u4e49\u7684 Edge type \u540d\u79f0\u3002 <code>edges.type.source</code> string - \u662f \u6307\u5b9a\u6570\u636e\u6e90\u3002\u4f8b\u5982<code>csv</code>\u3002 <code>edges.type.sink</code> string <code>client</code> \u662f \u6307\u5b9a\u5bfc\u5165\u65b9\u5f0f\uff0c\u53ef\u9009\u503c\u4e3a<code>client</code>\u548c<code>SST</code>\u3002 <code>edges.writeMode</code> string <code>INSERT</code> \u5426 \u5bf9\u6570\u636e\u7684\u6279\u91cf\u64cd\u4f5c\u7c7b\u578b\uff0c\u5305\u62ec\u6279\u91cf\u5bfc\u5165\u3001\u66f4\u65b0\u548c\u5220\u9664\u3002\u53ef\u9009\u503c\u4e3a<code>INSERT</code>\u3001<code>UPDATE</code>\u3001<code>DELETE</code>\u3002 <code>edges.fields</code> list[string] - \u662f \u5c5e\u6027\u5bf9\u5e94\u7684\u5217\u7684\u8868\u5934\u6216\u5217\u540d\u3002\u5982\u679c\u6709\u8868\u5934\u6216\u5217\u540d\uff0c\u8bf7\u76f4\u63a5\u4f7f\u7528\u8be5\u540d\u79f0\u3002\u5982\u679c CSV \u6587\u4ef6\u6ca1\u6709\u8868\u5934\uff0c\u7528<code>[_c0, _c1, _c2]</code>\u7684\u5f62\u5f0f\u8868\u793a\u7b2c\u4e00\u5217\u3001\u7b2c\u4e8c\u5217\u3001\u7b2c\u4e09\u5217\uff0c\u4ee5\u6b64\u7c7b\u63a8\u3002 <code>edges.nebula.fields</code> list[string] - \u662f NebulaGraph \u4e2d\u5b9a\u4e49\u7684\u5c5e\u6027\u540d\u79f0\uff0c\u987a\u5e8f\u5fc5\u987b\u548c<code>edges.fields</code>\u4e00\u4e00\u5bf9\u5e94\u3002\u4f8b\u5982<code>[_c2, _c3]</code>\u5bf9\u5e94<code>[start_year, end_year]</code>\uff0c\u8868\u793a\u7b2c\u4e09\u5217\u4e3a\u5f00\u59cb\u5e74\u4efd\u7684\u503c\uff0c\u7b2c\u56db\u5217\u4e3a\u7ed3\u675f\u5e74\u4efd\u7684\u503c\u3002 <code>edges.source.field</code> string - \u662f \u8fb9\u7684\u8d77\u59cb\u70b9\u7684\u5217\u3002\u4f8b\u5982<code>_c0</code>\u8868\u793a\u7b2c\u4e00\u5217\u7684\u503c\u4f5c\u4e3a\u8fb9\u7684\u8d77\u59cb\u70b9\u3002 <code>edges.source.prefix</code> string - \u5426 \u4e3a VID \u589e\u52a0\u6307\u5b9a\u7684\u524d\u7f00\u3002\u4f8b\u5982 VID \u4e3a<code>12345</code>\uff0c\u589e\u52a0\u524d\u7f00<code>tag1</code>\u540e\u4e3a<code>tag1_12345</code>\u3002\u4e0b\u5212\u7ebf\u65e0\u6cd5\u4fee\u6539\u3002 <code>edges.source.policy</code> string - \u5426 \u4ec5\u652f\u6301\u53d6\u503c<code>hash</code>\u3002\u5bf9 string \u7c7b\u578b\u7684 VID \u8fdb\u884c\u54c8\u5e0c\u5316\u64cd\u4f5c\u3002 <code>edges.target.field</code> string - \u662f \u8fb9\u7684\u76ee\u7684\u70b9\u7684\u5217\u3002\u4f8b\u5982<code>_c1</code>\u8868\u793a\u7b2c\u4e8c\u5217\u7684\u503c\u4f5c\u4e3a\u8fb9\u7684\u76ee\u7684\u70b9\u3002 <code>edges.target.prefix</code> string - \u5426 \u4e3a VID \u589e\u52a0\u6307\u5b9a\u7684\u524d\u7f00\u3002\u4f8b\u5982 VID \u4e3a<code>12345</code>\uff0c\u589e\u52a0\u524d\u7f00<code>tag1</code>\u540e\u4e3a<code>tag1_12345</code>\u3002\u4e0b\u5212\u7ebf\u65e0\u6cd5\u4fee\u6539\u3002 <code>edges.target.policy</code> string - \u5426 \u4ec5\u652f\u6301\u53d6\u503c<code>hash</code>\u3002\u5bf9 string \u7c7b\u578b\u7684 VID \u8fdb\u884c\u54c8\u5e0c\u5316\u64cd\u4f5c\u3002 <code>edges.ranking</code> int - \u5426 rank \u503c\u7684\u5217\u3002\u6ca1\u6709\u6307\u5b9a\u65f6\uff0c\u9ed8\u8ba4\u6240\u6709 rank \u503c\u4e3a<code>0</code>\u3002 <code>edges.batch</code> int <code>256</code> \u662f \u5355\u6279\u6b21\u5199\u5165 NebulaGraph \u7684\u6700\u5927\u8fb9\u6570\u91cf\u3002 <code>edges.partition</code> int <code>32</code> \u662f \u6570\u636e\u5199\u5165 NebulaGraph \u65f6\u9700\u8981\u521b\u5efa\u7684\u5206\u533a\u6570\u3002\u5982\u679c<code>edges.partition \u2264 1</code>\uff0c\u5728 NebulaGraph \u4e2d\u521b\u5efa\u7684\u5206\u533a\u6570\u548c\u6570\u636e\u6e90\u7684\u5206\u533a\u6570\u76f8\u540c\u3002"},{"location":"import-export/nebula-exchange/parameter-reference/ex-ug-parameter/#sst_1","title":"\u751f\u6210 SST \u65f6\u7684\u7279\u6709\u53c2\u6570","text":"\u53c2\u6570 \u6570\u636e\u7c7b\u578b \u9ed8\u8ba4\u503c \u662f\u5426\u5fc5\u987b \u8bf4\u660e <code>edges.path</code> string - \u662f \u6307\u5b9a\u9700\u8981\u751f\u6210 SST \u6587\u4ef6\u7684\u6e90\u6587\u4ef6\u7684\u8def\u5f84\u3002 <code>edges.repartitionWithNebula</code> bool <code>true</code> \u5426 \u751f\u6210 SST \u6587\u4ef6\u65f6\u662f\u5426\u8981\u57fa\u4e8e NebulaGraph \u4e2d\u56fe\u7a7a\u95f4\u7684 partition \u8fdb\u884c\u6570\u636e\u91cd\u5206\u533a\u3002\u5f00\u542f\u8be5\u529f\u80fd\u53ef\u51cf\u5c11 DOWNLOAD \u548c INGEST SST \u6587\u4ef6\u9700\u8981\u7684\u65f6\u95f4\u3002"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-clickhouse/","title":"\u5bfc\u5165 ClickHouse \u6570\u636e","text":"<p>\u672c\u6587\u4ee5\u4e00\u4e2a\u793a\u4f8b\u8bf4\u660e\u5982\u4f55\u4f7f\u7528 Exchange \u5c06\u5b58\u50a8\u5728 ClickHouse \u4e0a\u7684\u6570\u636e\u5bfc\u5165 NebulaGraph \u3002</p>"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-clickhouse/#_1","title":"\u6570\u636e\u96c6","text":"<p>\u672c\u6587\u4ee5 basketballplayer \u6570\u636e\u96c6\u4e3a\u4f8b\u3002</p>"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-clickhouse/#_2","title":"\u73af\u5883\u914d\u7f6e","text":"<p>\u672c\u6587\u793a\u4f8b\u5728 MacOS \u4e0b\u5b8c\u6210\uff0c\u4ee5\u4e0b\u662f\u76f8\u5173\u7684\u73af\u5883\u914d\u7f6e\u4fe1\u606f\uff1a</p> <ul> <li>\u786c\u4ef6\u89c4\u683c\uff1a<ul> <li>CPU\uff1a1.7 GHz Quad-Core Intel Core i7</li> <li>\u5185\u5b58\uff1a16 GB</li> </ul> </li> </ul> <ul> <li>Spark\uff1a2.4.7\uff0c\u5355\u673a\u7248</li> </ul> <ul> <li>ClickHouse\uff1adocker \u90e8\u7f72 yandex/clickhouse-server tag: latest(2021.07.01)</li> </ul> <ul> <li>NebulaGraph \uff1amaster\u3002</li> </ul>"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-clickhouse/#_3","title":"\u524d\u63d0\u6761\u4ef6","text":"<p>\u5f00\u59cb\u5bfc\u5165\u6570\u636e\u4e4b\u524d\uff0c\u7528\u6237\u9700\u8981\u786e\u8ba4\u4ee5\u4e0b\u4fe1\u606f\uff1a</p> <ul> <li> <p>\u5df2\u7ecf\u5b89\u88c5\u90e8\u7f72 NebulaGraph  \u5e76\u83b7\u53d6\u5982\u4e0b\u4fe1\u606f\uff1a</p> <ul> <li>Graph \u670d\u52a1\u548c Meta \u670d\u52a1\u7684\u7684 IP \u5730\u5740\u548c\u7aef\u53e3\u3002</li> </ul> <ul> <li>\u62e5\u6709 NebulaGraph \u5199\u6743\u9650\u7684\u7528\u6237\u540d\u548c\u5bc6\u7801\u3002</li> </ul> </li> </ul> <ul> <li>\u5df2\u7ecf\u7f16\u8bd1 Exchange\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1\u7f16\u8bd1 Exchange\u3002\u672c\u793a\u4f8b\u4e2d\u4f7f\u7528 Exchange 3.7.0\u3002</li> </ul> <ul> <li>\u5df2\u7ecf\u5b89\u88c5 Spark\u3002</li> </ul> <ul> <li>\u4e86\u89e3 NebulaGraph \u4e2d\u521b\u5efa Schema \u7684\u4fe1\u606f\uff0c\u5305\u62ec Tag \u548c Edge type \u7684\u540d\u79f0\u3001\u5c5e\u6027\u7b49\u3002</li> </ul>"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-clickhouse/#_4","title":"\u64cd\u4f5c\u6b65\u9aa4","text":""},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-clickhouse/#1_nebulagraph_schema","title":"\u6b65\u9aa4 1\uff1a\u5728 NebulaGraph \u4e2d\u521b\u5efa Schema","text":"<p>\u5206\u6790\u6570\u636e\uff0c\u6309\u4ee5\u4e0b\u6b65\u9aa4\u5728 NebulaGraph \u4e2d\u521b\u5efa Schema\uff1a</p> <ol> <li> <p>\u786e\u8ba4 Schema \u8981\u7d20\u3002 NebulaGraph \u4e2d\u7684 Schema \u8981\u7d20\u5982\u4e0b\u8868\u6240\u793a\u3002</p> \u8981\u7d20 \u540d\u79f0 \u5c5e\u6027 Tag <code>player</code> <code>name string, age int</code> Tag <code>team</code> <code>name string</code> Edge Type <code>follow</code> <code>degree int</code> Edge Type <code>serve</code> <code>start_year int, end_year int</code> </li> <li> <p>\u5728 NebulaGraph \u4e2d\u521b\u5efa\u4e00\u4e2a\u56fe\u7a7a\u95f4 basketballplayer\uff0c\u5e76\u521b\u5efa\u4e00\u4e2a Schema\uff0c\u5982\u4e0b\u6240\u793a\u3002</p> <pre><code>## \u521b\u5efa\u56fe\u7a7a\u95f4\nnebula&gt; CREATE SPACE basketballplayer \\\n        (partition_num = 10, \\\n        replica_factor = 1, \\\n        vid_type = FIXED_STRING(30));\n\n## \u9009\u62e9\u56fe\u7a7a\u95f4 basketballplayer\nnebula&gt; USE basketballplayer;\n\n## \u521b\u5efa Tag player\nnebula&gt; CREATE TAG player(name string, age int);\n\n## \u521b\u5efa Tag team\nnebula&gt; CREATE TAG team(name string);\n\n## \u521b\u5efa Edge type follow\nnebula&gt; CREATE EDGE follow(degree int);\n\n## \u521b\u5efa Edge type serve\nnebula&gt; CREATE EDGE serve(start_year int, end_year int);\n</code></pre> </li> </ol> <p>\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u89c1\u5feb\u901f\u5f00\u59cb\u3002</p>"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-clickhouse/#2","title":"\u6b65\u9aa4 2\uff1a\u4fee\u6539\u914d\u7f6e\u6587\u4ef6","text":"<p>\u7f16\u8bd1 Exchange \u540e\uff0c\u590d\u5236<code>target/classes/application.conf</code>\u6587\u4ef6\u8bbe\u7f6e ClickHouse \u6570\u636e\u6e90\u76f8\u5173\u7684\u914d\u7f6e\u3002\u5728\u672c\u793a\u4f8b\u4e2d\uff0c\u590d\u5236\u7684\u6587\u4ef6\u540d\u4e3a<code>clickhouse_application.conf</code>\u3002\u5404\u4e2a\u914d\u7f6e\u9879\u7684\u8be6\u7ec6\u8bf4\u660e\u8bf7\u53c2\u89c1\u914d\u7f6e\u8bf4\u660e\u3002</p> <pre><code>{\n  # Spark \u76f8\u5173\u914d\u7f6e\n  spark: {\n    app: {\n      name: Nebula Exchange 3.7.0\n    }\n    driver: {\n      cores: 1\n      maxResultSize: 1G\n    }\n    cores: {\n      max: 16\n    }\n  }\n\n#  NebulaGraph \u76f8\u5173\u914d\u7f6e\n  nebula: {\n    address:{\n      # \u4ee5\u4e0b\u4e3a NebulaGraph \u7684 Graph \u670d\u52a1\u548c Meta \u670d\u52a1\u6240\u5728\u673a\u5668\u7684 IP \u5730\u5740\u53ca\u7aef\u53e3\u3002\n      # \u5982\u679c\u6709\u591a\u4e2a\u5730\u5740\uff0c\u683c\u5f0f\u4e3a \"ip1:port\",\"ip2:port\",\"ip3:port\"\u3002\n      # \u4e0d\u540c\u5730\u5740\u4e4b\u95f4\u4ee5\u82f1\u6587\u9017\u53f7 (,) \u9694\u5f00\u3002\n      graph:[\"127.0.0.1:9669\"]\n\n      #\u4efb\u610f\u4e00\u4e2a Meta \u670d\u52a1\u7684\u5730\u5740\u3002\n      #\u5982\u679c\u60a8\u7684 NebulaGraph \u5728\u865a\u62df\u7f51\u7edc\u4e2d\uff0c\u5982k8s\uff0c\u8bf7\u914d\u7f6e Leader Meta\u7684\u5730\u5740\u3002\n      meta:[\"127.0.0.1:9559\"]\n    }\n    # \u586b\u5199\u7684\u8d26\u53f7\u5fc5\u987b\u62e5\u6709 NebulaGraph \u76f8\u5e94\u56fe\u7a7a\u95f4\u7684\u5199\u6570\u636e\u6743\u9650\u3002\n    user: root\n    pswd: nebula\n    # \u662f\u5426\u4f7f\u7528 RSA \u52a0\u5bc6\u7684\u5bc6\u7801\u3002\n    # enableRSA: true\n    # \u4f7f\u7528 RSA \u52a0\u5bc6\u5bc6\u7801\u65f6\u7684\u5bc6\u94a5\u3002\n    # privateKey: \"\"\n    # \u586b\u5199 NebulaGraph \u4e2d\u9700\u8981\u5199\u5165\u6570\u636e\u7684\u56fe\u7a7a\u95f4\u540d\u79f0\u3002\n    space: basketballplayer\n    connection: {\n      timeout: 3000\n      retry: 3\n    }\n    execution: {\n      retry: 3\n    }\n    error: {\n      max: 32\n      output: /tmp/errors\n    }\n    rate: {\n      limit: 1024\n      timeout: 1000\n    }\n  }\n  # \u5904\u7406\u70b9\n  tags: [\n    # \u8bbe\u7f6e Tag player \u76f8\u5173\u4fe1\u606f\u3002\n    {\n      name: player\n      type: {\n        # \u6307\u5b9a\u6570\u636e\u6e90\u6587\u4ef6\u683c\u5f0f\uff0c\u8bbe\u7f6e\u4e3a ClickHouse\u3002\n        source: clickhouse\n        # \u6307\u5b9a\u5982\u4f55\u5c06\u70b9\u6570\u636e\u5bfc\u5165 NebulaGraph \uff1aClient \u6216 SST\u3002\n        sink: client\n      }\n\n      # ClickHouse \u7684 JDBC URL\n      url:\"jdbc:clickhouse://192.168.*.*:8123/basketballplayer\"\n\n      user:\"user\"\n      password:\"123456\"\n\n      # ClickHouse \u5206\u533a\u6570\n      numPartition:\"5\"\n\n      table:\"player\"\n      sentence:\"select * from player\"\n\n      # \u5728 fields \u91cc\u6307\u5b9a player \u8868\u4e2d\u7684\u5217\u540d\u79f0\uff0c\u5176\u5bf9\u5e94\u7684 value \u4f1a\u4f5c\u4e3a NebulaGraph \u4e2d\u6307\u5b9a\u5c5e\u6027\u3002\n      # fields \u548c nebula.fields \u91cc\u7684\u914d\u7f6e\u5fc5\u987b\u4e00\u4e00\u5bf9\u5e94\u3002\n      # \u5982\u679c\u9700\u8981\u6307\u5b9a\u591a\u4e2a\u5217\u540d\u79f0\uff0c\u7528\u82f1\u6587\u9017\u53f7\uff08,\uff09\u9694\u5f00\u3002\n      fields: [name,age]\n      nebula.fields: [name,age]\n\n      # \u6307\u5b9a\u8868\u4e2d\u67d0\u4e00\u5217\u6570\u636e\u4e3a NebulaGraph \u4e2d\u70b9 VID \u7684\u6765\u6e90\u3002\n      vertex: {\n        field:playerid\n      # udf:{\n      #            separator:\"_\"\n      #            oldColNames:[field-0,field-1,field-2]\n      #            newColName:new-field\n      #        }\n      # \u4e3a VID \u589e\u52a0\u6307\u5b9a\u7684\u524d\u7f00\u3002\u4f8b\u5982 VID \u4e3a 12345\uff0c\u589e\u52a0\u524d\u7f00 tag1 \u540e\u4e3a tag1_12345\u3002\u4e0b\u5212\u7ebf\u65e0\u6cd5\u4fee\u6539\u3002\n      # prefix:\"tag1\"\n      # \u5bf9 string \u7c7b\u578b\u7684 VID \u8fdb\u884c\u54c8\u5e0c\u5316\u64cd\u4f5c\u3002\n      # policy:hash\n      }\n\n      # \u6279\u91cf\u64cd\u4f5c\u7c7b\u578b\uff0c\u5305\u62ec INSERT\u3001UPDATE \u548c DELETE\u3002\u9ed8\u8ba4\u4e3a INSERT\u3002\n      #writeMode: INSERT\n\n      # \u6279\u91cf\u5220\u9664\u65f6\u662f\u5426\u5220\u9664\u8be5\u70b9\u5173\u8054\u7684\u51fa\u8fb9\u548c\u5165\u8fb9\u3002`writeMode`\u4e3a`DELETE`\u65f6\u8be5\u53c2\u6570\u751f\u6548\u3002\n      #deleteEdge: false\n\n      # \u5355\u6279\u6b21\u5199\u5165 NebulaGraph \u7684\u6570\u636e\u6761\u6570\u3002\n      batch: 256\n\n      # \u6570\u636e\u5199\u5165 NebulaGraph \u65f6\u9700\u8981\u521b\u5efa\u7684\u5206\u533a\u6570\u3002\n      partition: 32\n    }\n\n    # \u8bbe\u7f6e Tag team \u76f8\u5173\u4fe1\u606f\u3002\n    {\n      name: team\n      type: {\n        source: clickhouse\n        sink: client\n      }\n      url:\"jdbc:clickhouse://192.168.*.*:8123/basketballplayer\"\n      user:\"user\"\n      password:\"123456\"\n      numPartition:\"5\"\n      table:\"team\"\n      sentence:\"select * from team\"\n      fields: [name]\n      nebula.fields: [name]\n      vertex: {\n        field:teamid\n      }\n\n      batch: 256\n      partition: 32\n    }\n  ]\n\n  # \u5904\u7406\u8fb9\u6570\u636e\n  edges: [\n    # \u8bbe\u7f6e Edge type follow \u76f8\u5173\u4fe1\u606f\n    {\n      #  NebulaGraph \u4e2d\u5bf9\u5e94\u7684 Edge type \u540d\u79f0\u3002\n      name: follow\n\n      type: {\n        # \u6307\u5b9a\u6570\u636e\u6e90\u6587\u4ef6\u683c\u5f0f\uff0c\u8bbe\u7f6e\u4e3a ClickHouse\u3002\n        source: clickhouse\n\n        # \u6307\u5b9a\u8fb9\u6570\u636e\u5bfc\u5165 NebulaGraph \u7684\u65b9\u5f0f\uff0c\n        # \u6307\u5b9a\u5982\u4f55\u5c06\u70b9\u6570\u636e\u5bfc\u5165 NebulaGraph \uff1aClient \u6216 SST\u3002\n        sink: client\n      }\n\n      # ClickHouse \u7684 JDBC URL\n      url:\"jdbc:clickhouse://192.168.*.*:8123/basketballplayer\"\n\n      user:\"user\"\n      password:\"123456\"\n\n      # ClickHouse \u5206\u533a\u6570\n      numPartition:\"5\"\n\n      table:\"follow\"\n      sentence:\"select * from follow\"\n\n      # \u5728 fields \u91cc\u6307\u5b9a follow \u8868\u4e2d\u7684\u5217\u540d\u79f0\uff0c\u5176\u5bf9\u5e94\u7684 value \u4f1a\u4f5c\u4e3a NebulaGraph \u4e2d\u6307\u5b9a\u5c5e\u6027\u3002\n      # fields \u548c nebula.fields \u91cc\u7684\u914d\u7f6e\u5fc5\u987b\u4e00\u4e00\u5bf9\u5e94\u3002\n      # \u5982\u679c\u9700\u8981\u6307\u5b9a\u591a\u4e2a\u5217\u540d\u79f0\uff0c\u7528\u82f1\u6587\u9017\u53f7\uff08,\uff09\u9694\u5f00\u3002\n      fields: [degree]\n      nebula.fields: [degree]\n\n      # \u5728 source \u91cc\uff0c\u5c06 follow \u8868\u4e2d\u67d0\u4e00\u5217\u4f5c\u4e3a\u8fb9\u7684\u8d77\u59cb\u70b9\u6570\u636e\u6e90\u3002\n      source: {\n        field:src_player\n      # udf:{\n      #            separator:\"_\"\n      #            oldColNames:[field-0,field-1,field-2]\n      #            newColName:new-field\n      #        }\n      # \u4e3a VID \u589e\u52a0\u6307\u5b9a\u7684\u524d\u7f00\u3002\u4f8b\u5982 VID \u4e3a 12345\uff0c\u589e\u52a0\u524d\u7f00 tag1 \u540e\u4e3a tag1_12345\u3002\u4e0b\u5212\u7ebf\u65e0\u6cd5\u4fee\u6539\u3002\n      # prefix:\"tag1\"\n      # \u5bf9 string \u7c7b\u578b\u7684 VID \u8fdb\u884c\u54c8\u5e0c\u5316\u64cd\u4f5c\u3002\n      # policy:hash\n      }\n\n      # \u5728 target \u91cc\uff0c\u5c06 follow \u8868\u4e2d\u67d0\u4e00\u5217\u4f5c\u4e3a\u8fb9\u7684\u76ee\u7684\u70b9\u6570\u636e\u6e90\u3002\n      target: {\n        field:dst_player\n      # udf:{\n      #            separator:\"_\"\n      #            oldColNames:[field-0,field-1,field-2]\n      #            newColName:new-field\n      #        }\n      # \u4e3a VID \u589e\u52a0\u6307\u5b9a\u7684\u524d\u7f00\u3002\u4f8b\u5982 VID \u4e3a 12345\uff0c\u589e\u52a0\u524d\u7f00 tag1 \u540e\u4e3a tag1_12345\u3002\u4e0b\u5212\u7ebf\u65e0\u6cd5\u4fee\u6539\u3002\n      # prefix:\"tag1\"\n      # \u5bf9 string \u7c7b\u578b\u7684 VID \u8fdb\u884c\u54c8\u5e0c\u5316\u64cd\u4f5c\u3002\n      # policy:hash\n      }\n\n      # \u6307\u5b9a\u4e00\u4e2a\u5217\u4f5c\u4e3a rank \u7684\u6e90\uff08\u53ef\u9009\uff09\u3002\n      #ranking: rank\n\n      # \u6279\u91cf\u64cd\u4f5c\u7c7b\u578b\uff0c\u5305\u62ec INSERT\u3001UPDATE \u548c DELETE\u3002\u9ed8\u8ba4\u4e3a INSERT\u3002\n      #writeMode: INSERT\n\n      # \u5355\u6279\u6b21\u5199\u5165 NebulaGraph \u7684\u6570\u636e\u6761\u6570\u3002\n      batch: 256\n\n      # \u6570\u636e\u5199\u5165 NebulaGraph \u65f6\u9700\u8981\u521b\u5efa\u7684\u5206\u533a\u6570\u3002\n      partition: 32\n    }\n\n    # \u8bbe\u7f6e Edge type serve \u76f8\u5173\u4fe1\u606f\n    {\n      name: serve\n      type: {\n        source: clickhouse\n        sink: client\n      }\n      url:\"jdbc:clickhouse://192.168.*.*:8123/basketballplayer\"\n      user:\"user\"\n      password:\"123456\"\n      numPartition:\"5\"\n      sentence:\"select * from serve\"\n      fields: [start_year,end_year]\n      nebula.fields: [start_year,end_year]\n      source: {\n        field:playerid\n      }\n      target: {\n        field:teamid\n      }\n\n      # \u6307\u5b9a\u4e00\u4e2a\u5217\u4f5c\u4e3a rank \u7684\u6e90\uff08\u53ef\u9009\uff09\u3002\n      #ranking: rank\n\n      batch: 256\n      partition: 32\n    }\n  ]\n}\n</code></pre>"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-clickhouse/#3_nebulagraph","title":"\u6b65\u9aa4 3\uff1a\u5411 NebulaGraph \u5bfc\u5165\u6570\u636e","text":"<p>\u8fd0\u884c\u5982\u4e0b\u547d\u4ee4\u5c06 ClickHouse \u6570\u636e\u5bfc\u5165\u5230 NebulaGraph \u4e2d\u3002\u5173\u4e8e\u53c2\u6570\u7684\u8bf4\u660e\uff0c\u8bf7\u53c2\u89c1\u5bfc\u5165\u547d\u4ee4\u53c2\u6570\u3002</p> <pre><code>${SPARK_HOME}/bin/spark-submit --master \"local\" --class com.vesoft.nebula.exchange.Exchange &lt;nebula-exchange.jar_path&gt; -c &lt;clickhouse_application.conf_path&gt;\n</code></pre> <p>Note</p> <p>JAR \u5305\u6709\u4e24\u79cd\u83b7\u53d6\u65b9\u5f0f\uff1a\u81ea\u884c\u7f16\u8bd1\u6216\u8005\u4ece maven \u4ed3\u5e93\u4e0b\u8f7d\u3002</p> <p>\u793a\u4f8b\uff1a</p> <pre><code>${SPARK_HOME}/bin/spark-submit  --master \"local\" --class com.vesoft.nebula.exchange.Exchange  /root/nebula-exchange/nebula-exchange/target/nebula-exchange_spark_2.4-3.7.0.jar  -c /root/nebula-exchange/nebula-exchange/target/classes/clickhouse_application.conf\n</code></pre> <p>\u7528\u6237\u53ef\u4ee5\u5728\u8fd4\u56de\u4fe1\u606f\u4e2d\u641c\u7d22<code>batchSuccess.&lt;tag_name/edge_name&gt;</code>\uff0c\u786e\u8ba4\u6210\u529f\u7684\u6570\u91cf\u3002\u4f8b\u5982<code>batchSuccess.follow: 300</code>\u3002</p>"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-clickhouse/#4","title":"\u6b65\u9aa4 4\uff1a\uff08\u53ef\u9009\uff09\u9a8c\u8bc1\u6570\u636e","text":"<p>\u7528\u6237\u53ef\u4ee5\u5728 NebulaGraph \u5ba2\u6237\u7aef\uff08\u4f8b\u5982 NebulaGraph Studio\uff09\u4e2d\u6267\u884c\u67e5\u8be2\u8bed\u53e5\uff0c\u786e\u8ba4\u6570\u636e\u662f\u5426\u5df2\u5bfc\u5165\u3002\u4f8b\u5982\uff1a</p> <pre><code>LOOKUP ON player YIELD id(vertex);\n</code></pre> <p>\u7528\u6237\u4e5f\u53ef\u4ee5\u4f7f\u7528\u547d\u4ee4 <code>SHOW STATS</code> \u67e5\u770b\u7edf\u8ba1\u6570\u636e\u3002</p>"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-clickhouse/#5_nebulagraph","title":"\u6b65\u9aa4 5\uff1a\uff08\u5982\u6709\uff09\u5728 NebulaGraph \u4e2d\u91cd\u5efa\u7d22\u5f15","text":"<p>\u5bfc\u5165\u6570\u636e\u540e\uff0c\u7528\u6237\u53ef\u4ee5\u5728 NebulaGraph \u4e2d\u91cd\u65b0\u521b\u5efa\u5e76\u91cd\u5efa\u7d22\u5f15\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1\u7d22\u5f15\u4ecb\u7ecd\u3002</p>"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-csv/","title":"\u5bfc\u5165 CSV \u6587\u4ef6\u6570\u636e","text":"<p>\u672c\u6587\u4ee5\u4e00\u4e2a\u793a\u4f8b\u8bf4\u660e\u5982\u4f55\u4f7f\u7528 Exchange \u5c06\u5b58\u50a8\u5728 HDFS \u6216\u672c\u5730\u7684 CSV \u6587\u4ef6\u6570\u636e\u5bfc\u5165 NebulaGraph \u3002</p>"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-csv/#_1","title":"\u6570\u636e\u96c6","text":"<p>\u672c\u6587\u4ee5 basketballplayer \u6570\u636e\u96c6\u4e3a\u4f8b\u3002</p>"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-csv/#_2","title":"\u73af\u5883\u914d\u7f6e","text":"<p>\u672c\u6587\u793a\u4f8b\u5728 MacOS \u4e0b\u5b8c\u6210\uff0c\u4ee5\u4e0b\u662f\u76f8\u5173\u7684\u73af\u5883\u914d\u7f6e\u4fe1\u606f\uff1a</p> <ul> <li>\u786c\u4ef6\u89c4\u683c\uff1a<ul> <li>CPU\uff1a1.7 GHz Quad-Core Intel Core i7</li> <li>\u5185\u5b58\uff1a16 GB</li> </ul> </li> </ul> <ul> <li>Spark\uff1a2.4.7 \u5355\u673a\u7248</li> </ul> <ul> <li>Hadoop\uff1a2.9.2 \u4f2a\u5206\u5e03\u5f0f\u90e8\u7f72</li> </ul> <ul> <li>NebulaGraph \uff1amaster\u3002</li> </ul>"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-csv/#_3","title":"\u524d\u63d0\u6761\u4ef6","text":"<p>\u5f00\u59cb\u5bfc\u5165\u6570\u636e\u4e4b\u524d\uff0c\u7528\u6237\u9700\u8981\u786e\u8ba4\u4ee5\u4e0b\u4fe1\u606f\uff1a</p> <ul> <li> <p>\u5df2\u7ecf\u5b89\u88c5\u90e8\u7f72 NebulaGraph  \u5e76\u83b7\u53d6\u5982\u4e0b\u4fe1\u606f\uff1a</p> <ul> <li>Graph \u670d\u52a1\u548c Meta \u670d\u52a1\u7684\u7684 IP \u5730\u5740\u548c\u7aef\u53e3\u3002</li> </ul> <ul> <li>\u62e5\u6709 NebulaGraph \u5199\u6743\u9650\u7684\u7528\u6237\u540d\u548c\u5bc6\u7801\u3002</li> </ul> </li> </ul> <ul> <li>\u5df2\u7ecf\u7f16\u8bd1 Exchange\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1\u7f16\u8bd1 Exchange\u3002\u672c\u793a\u4f8b\u4e2d\u4f7f\u7528 Exchange 3.7.0\u3002</li> </ul> <ul> <li>\u5df2\u7ecf\u5b89\u88c5 Spark\u3002</li> </ul> <ul> <li>\u4e86\u89e3 NebulaGraph \u4e2d\u521b\u5efa Schema \u7684\u4fe1\u606f\uff0c\u5305\u62ec Tag \u548c Edge type \u7684\u540d\u79f0\u3001\u5c5e\u6027\u7b49\u3002</li> </ul> <ul> <li>\u5982\u679c\u6587\u4ef6\u5b58\u50a8\u5728 HDFS \u4e0a\uff0c\u9700\u8981\u786e\u8ba4 Hadoop \u670d\u52a1\u8fd0\u884c\u6b63\u5e38\u3002</li> </ul> <ul> <li>\u5982\u679c\u6587\u4ef6\u5b58\u50a8\u5728\u672c\u5730\u4e14 NebulaGraph \u662f\u96c6\u7fa4\u67b6\u6784\uff0c\u9700\u8981\u5728\u96c6\u7fa4\u6bcf\u53f0\u673a\u5668\u672c\u5730\u76f8\u540c\u76ee\u5f55\u4e0b\u653e\u7f6e\u6587\u4ef6\u3002</li> </ul>"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-csv/#_4","title":"\u64cd\u4f5c\u6b65\u9aa4","text":""},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-csv/#1_nebulagraph_schema","title":"\u6b65\u9aa4 1\uff1a\u5728 NebulaGraph \u4e2d\u521b\u5efa Schema","text":"<p>\u5206\u6790 CSV \u6587\u4ef6\u4e2d\u7684\u6570\u636e\uff0c\u6309\u4ee5\u4e0b\u6b65\u9aa4\u5728 NebulaGraph \u4e2d\u521b\u5efa Schema\uff1a</p> <ol> <li> <p>\u786e\u8ba4 Schema \u8981\u7d20\u3002 NebulaGraph \u4e2d\u7684 Schema \u8981\u7d20\u5982\u4e0b\u8868\u6240\u793a\u3002</p> \u8981\u7d20 \u540d\u79f0 \u5c5e\u6027 Tag <code>player</code> <code>name string, age int</code> Tag <code>team</code> <code>name string</code> Edge Type <code>follow</code> <code>degree int</code> Edge Type <code>serve</code> <code>start_year int, end_year int</code> </li> <li> <p>\u4f7f\u7528 NebulaGraph Console \u521b\u5efa\u4e00\u4e2a\u56fe\u7a7a\u95f4 basketballplayer\uff0c\u5e76\u521b\u5efa\u4e00\u4e2a Schema\uff0c\u5982\u4e0b\u6240\u793a\u3002</p> <pre><code>## \u521b\u5efa\u56fe\u7a7a\u95f4\nnebula&gt; CREATE SPACE basketballplayer \\\n        (partition_num = 10, \\\n        replica_factor = 1, \\\n        vid_type = FIXED_STRING(30));\n\n## \u9009\u62e9\u56fe\u7a7a\u95f4 basketballplayer\nnebula&gt; USE basketballplayer;\n\n## \u521b\u5efa Tag player\nnebula&gt; CREATE TAG player(name string, age int);\n\n## \u521b\u5efa Tag team\nnebula&gt; CREATE TAG team(name string);\n\n## \u521b\u5efa Edge type follow\nnebula&gt; CREATE EDGE follow(degree int);\n\n## \u521b\u5efa Edge type serve\nnebula&gt; CREATE EDGE serve(start_year int, end_year int);\n</code></pre> </li> </ol> <p>\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u89c1\u5feb\u901f\u5f00\u59cb\u3002</p>"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-csv/#2_csv","title":"\u6b65\u9aa4 2\uff1a\u5904\u7406 CSV \u6587\u4ef6","text":"<p>\u786e\u8ba4\u4ee5\u4e0b\u4fe1\u606f\uff1a</p> <ol> <li> <p>\u5904\u7406 CSV \u6587\u4ef6\u4ee5\u6ee1\u8db3 Schema \u7684\u8981\u6c42\u3002</p> <p>Note</p> <p>Exchange \u652f\u6301\u4e0a\u4f20\u6709\u8868\u5934\u6216\u8005\u65e0\u8868\u5934\u7684 CSV \u6587\u4ef6\u3002</p> </li> <li> <p>\u83b7\u53d6 CSV \u6587\u4ef6\u5b58\u50a8\u8def\u5f84\u3002</p> </li> </ol>"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-csv/#3","title":"\u6b65\u9aa4 3\uff1a\u4fee\u6539\u914d\u7f6e\u6587\u4ef6","text":"<p>\u7f16\u8bd1 Exchange \u540e\uff0c\u590d\u5236<code>target/classes/application.conf</code>\u6587\u4ef6\u8bbe\u7f6e CSV \u6570\u636e\u6e90\u76f8\u5173\u7684\u914d\u7f6e\u3002\u5728\u672c\u793a\u4f8b\u4e2d\uff0c\u590d\u5236\u7684\u6587\u4ef6\u540d\u4e3a<code>csv_application.conf</code>\u3002\u5404\u4e2a\u914d\u7f6e\u9879\u7684\u8be6\u7ec6\u8bf4\u660e\u8bf7\u53c2\u89c1\u914d\u7f6e\u8bf4\u660e\u3002</p> <pre><code>{\n  # Spark \u76f8\u5173\u914d\u7f6e\n  spark: {\n    app: {\n      name: NebulaGraph Exchange 3.7.0\n    }\n    driver: {\n      cores: 1\n      maxResultSize: 1G\n    }\n    executor: {\n        memory:1G\n    }\n\n    cores: {\n      max: 16\n    }\n  }\n\n  # NebulaGraph \u76f8\u5173\u914d\u7f6e\n  nebula: {\n    address:{\n      # \u6307\u5b9a Graph \u670d\u52a1\u548c\u6240\u6709 Meta \u670d\u52a1\u7684 IP \u5730\u5740\u548c\u7aef\u53e3\u3002\n      # \u5982\u679c\u6709\u591a\u53f0\u670d\u52a1\u5668\uff0c\u5730\u5740\u4e4b\u95f4\u7528\u82f1\u6587\u9017\u53f7\uff08,\uff09\u5206\u9694\u3002\n      # \u683c\u5f0f\uff1a\"ip1:port\",\"ip2:port\",\"ip3:port\"\n      graph:[\"127.0.0.1:9669\"]\n      #\u4efb\u610f\u4e00\u4e2a Meta \u670d\u52a1\u7684\u5730\u5740\u3002\n      #\u5982\u679c\u60a8\u7684 NebulaGraph \u5728\u865a\u62df\u7f51\u7edc\u4e2d\uff0c\u5982k8s\uff0c\u8bf7\u914d\u7f6e Leader Meta\u7684\u5730\u5740\u3002\n      meta:[\"127.0.0.1:9559\"]\n    }\n\n    # \u6307\u5b9a\u62e5\u6709 NebulaGraph \u5199\u6743\u9650\u7684\u7528\u6237\u540d\u548c\u5bc6\u7801\u3002\n    user: root\n    pswd: nebula\n    # \u662f\u5426\u4f7f\u7528 RSA \u52a0\u5bc6\u7684\u5bc6\u7801\u3002\n    # enableRSA: true\n    # \u4f7f\u7528 RSA \u52a0\u5bc6\u5bc6\u7801\u65f6\u7684\u5bc6\u94a5\u3002\n    # privateKey: \"\"\n    # \u6307\u5b9a\u56fe\u7a7a\u95f4\u540d\u79f0\u3002\n    space: basketballplayer\n    connection: {\n      timeout: 3000\n      retry: 3\n    }\n    execution: {\n      retry: 3\n    }\n    error: {\n      max: 32\n      output: /tmp/errors\n    }\n    rate: {\n      limit: 1024\n      timeout: 1000\n    }\n  }\n\n  # \u5904\u7406\u70b9\n  tags: [\n    # \u8bbe\u7f6e Tag player \u76f8\u5173\u4fe1\u606f\u3002\n    {\n      # \u6307\u5b9a NebulaGraph \u4e2d\u5b9a\u4e49\u7684 Tag \u540d\u79f0\u3002\n      name: player\n      type: {\n        # \u6307\u5b9a\u6570\u636e\u6e90\uff0c\u4f7f\u7528 CSV\u3002\n        source: csv\n\n        # \u6307\u5b9a\u5982\u4f55\u5c06\u70b9\u6570\u636e\u5bfc\u5165 NebulaGraph \uff1aClient \u6216 SST\u3002\n        sink: client\n      }\n\n      # \u6307\u5b9a CSV \u6587\u4ef6\u7684\u8def\u5f84\u3002\n      # \u5982\u679c\u6587\u4ef6\u5b58\u50a8\u5728 HDFS \u4e0a\uff0c\u7528\u53cc\u5f15\u53f7\u62ec\u8d77\u8def\u5f84\uff0c\u4ee5 hdfs://\u5f00\u5934\uff0c\u4f8b\u5982\"hdfs://ip:port/xx/xx\"\u3002\n      # \u5982\u679c\u6587\u4ef6\u5b58\u50a8\u5728\u672c\u5730\uff0c\u7528\u53cc\u5f15\u53f7\u62ec\u8d77\u8def\u5f84\uff0c\u4ee5 file://\u5f00\u5934\uff0c\u4f8b\u5982\"file:///tmp/xx.csv\"\u3002\n      path: \"hdfs://192.168.*.*:9000/data/vertex_player.csv\"\n\n      # \u5982\u679c CSV \u6587\u4ef6\u6ca1\u6709\u8868\u5934\uff0c\u4f7f\u7528 [_c0, _c1, _c2, ..., _cn] \u8868\u793a\u5176\u8868\u5934\uff0c\u5e76\u5c06\u5217\u6307\u793a\u4e3a\u5c5e\u6027\u503c\u7684\u6e90\u3002\n      # \u5982\u679c CSV \u6587\u4ef6\u6709\u8868\u5934\uff0c\u5219\u4f7f\u7528\u5b9e\u9645\u7684\u5217\u540d\u3002\n      fields: [_c1, _c2]\n\n      # \u6307\u5b9a NebulaGraph \u4e2d\u5b9a\u4e49\u7684\u5c5e\u6027\u540d\u79f0\u3002\n      # fields \u4e0e nebula.fields \u7684\u987a\u5e8f\u5fc5\u987b\u4e00\u4e00\u5bf9\u5e94\u3002\n      nebula.fields: [age, name]\n\n      # \u6307\u5b9a\u4e00\u4e2a\u5217\u4f5c\u4e3a VID \u7684\u6e90\u3002\n      # vertex \u7684\u503c\u5fc5\u987b\u4e0e\u4e0a\u8ff0 fields \u6216\u8005 csv.fields \u4e2d\u7684\u5217\u540d\u4fdd\u6301\u4e00\u81f4\u3002\n      # \u76ee\u524d\uff0cNebulaGraph  master\u4ec5\u652f\u6301\u5b57\u7b26\u4e32\u6216\u6574\u6570\u7c7b\u578b\u7684 VID\u3002\n      vertex: {\n        field:_c0\n      # udf:{\n      #            separator:\"_\"\n      #            oldColNames:[field-0,field-1,field-2]\n      #            newColName:new-field\n      #        }\n      # \u4e3a VID \u589e\u52a0\u6307\u5b9a\u7684\u524d\u7f00\u3002\u4f8b\u5982 VID \u4e3a 12345\uff0c\u589e\u52a0\u524d\u7f00 tag1 \u540e\u4e3a tag1_12345\u3002\u4e0b\u5212\u7ebf\u65e0\u6cd5\u4fee\u6539\u3002\n      # prefix:\"tag1\"\n      # \u5bf9 string \u7c7b\u578b\u7684 VID \u8fdb\u884c\u54c8\u5e0c\u5316\u64cd\u4f5c\u3002\n      # policy:hash\n      }\n\n      # \u6307\u5b9a\u7684\u5206\u9694\u7b26\u3002\u9ed8\u8ba4\u503c\u4e3a\u82f1\u6587\u9017\u53f7\uff08,\uff09\u3002\n      separator: \",\"\n\n      # \u5982\u679c CSV \u6587\u4ef6\u6709\u8868\u5934\uff0c\u8bf7\u5c06 header \u8bbe\u7f6e\u4e3a true\u3002\n      # \u5982\u679c CSV \u6587\u4ef6\u6ca1\u6709\u8868\u5934\uff0c\u8bf7\u5c06 header \u8bbe\u7f6e\u4e3a false\u3002\u9ed8\u8ba4\u503c\u4e3a false\u3002\n      header: false\n\n      # \u6279\u91cf\u64cd\u4f5c\u7c7b\u578b\uff0c\u5305\u62ec INSERT\u3001UPDATE \u548c DELETE\u3002\u9ed8\u8ba4\u4e3a INSERT\u3002\n      #writeMode: INSERT\n\n      # \u6279\u91cf\u5220\u9664\u65f6\u662f\u5426\u5220\u9664\u8be5\u70b9\u5173\u8054\u7684\u51fa\u8fb9\u548c\u5165\u8fb9\u3002`writeMode`\u4e3a`DELETE`\u65f6\u8be5\u53c2\u6570\u751f\u6548\u3002\n      #deleteEdge: false\n\n      # \u6307\u5b9a\u5355\u6279\u6b21\u5199\u5165 NebulaGraph \u7684\u6700\u5927\u70b9\u6570\u91cf\u3002\n      batch: 256\n\n      # \u6570\u636e\u5199\u5165 NebulaGraph \u65f6\u9700\u8981\u521b\u5efa\u7684\u5206\u533a\u6570\u3002\n      partition: 32\n    }\n\n    # \u8bbe\u7f6e Tag team \u76f8\u5173\u4fe1\u606f\u3002\n    {\n      name: team\n      type: {\n        source: csv\n        sink: client\n      }\n      path: \"hdfs://192.168.*.*:9000/data/vertex_team.csv\"\n      fields: [_c1]\n      nebula.fields: [name]\n      vertex: {\n        field:_c0\n      }\n      separator: \",\"\n      header: false\n      batch: 256\n      partition: 32\n    }\n    # \u5982\u679c\u9700\u8981\u6dfb\u52a0\u66f4\u591a\u70b9\uff0c\u8bf7\u53c2\u8003\u524d\u9762\u7684\u914d\u7f6e\u8fdb\u884c\u6dfb\u52a0\u3002\n  ]\n  # \u5904\u7406\u8fb9\n  edges: [\n    # \u8bbe\u7f6e Edge type follow \u76f8\u5173\u4fe1\u606f\u3002\n    {\n      # \u6307\u5b9a NebulaGraph \u4e2d\u5b9a\u4e49\u7684 Edge type \u540d\u79f0\u3002\n      name: follow\n      type: {\n        # \u6307\u5b9a\u6570\u636e\u6e90\uff0c\u4f7f\u7528 CSV\u3002\n        source: csv\n\n        # \u6307\u5b9a\u5982\u4f55\u5c06\u70b9\u6570\u636e\u5bfc\u5165 NebulaGraph \uff1aClient \u6216 SST\u3002\n        sink: client\n      }\n\n      # \u6307\u5b9a CSV \u6587\u4ef6\u7684\u8def\u5f84\u3002\n      # \u5982\u679c\u6587\u4ef6\u5b58\u50a8\u5728 HDFS \u4e0a\uff0c\u7528\u53cc\u5f15\u53f7\u62ec\u8d77\u8def\u5f84\uff0c\u4ee5 hdfs://\u5f00\u5934\uff0c\u4f8b\u5982\"hdfs://ip:port/xx/xx\"\u3002\n      # \u5982\u679c\u6587\u4ef6\u5b58\u50a8\u5728\u672c\u5730\uff0c\u7528\u53cc\u5f15\u53f7\u62ec\u8d77\u8def\u5f84\uff0c\u4ee5 file://\u5f00\u5934\uff0c\u4f8b\u5982\"file:///tmp/xx.csv\"\u3002\n      path: \"hdfs://192.168.*.*:9000/data/edge_follow.csv\"\n\n      # \u5982\u679c CSV \u6587\u4ef6\u6ca1\u6709\u8868\u5934\uff0c\u4f7f\u7528 [_c0, _c1, _c2, ..., _cn] \u8868\u793a\u5176\u8868\u5934\uff0c\u5e76\u5c06\u5217\u6307\u793a\u4e3a\u5c5e\u6027\u503c\u7684\u6e90\u3002\n      # \u5982\u679c CSV \u6587\u4ef6\u6709\u8868\u5934\uff0c\u5219\u4f7f\u7528\u5b9e\u9645\u7684\u5217\u540d\u3002\n      fields: [_c2]\n\n      # \u6307\u5b9a NebulaGraph \u4e2d\u5b9a\u4e49\u7684\u5c5e\u6027\u540d\u79f0\u3002\n      # fields \u4e0e nebula.fields \u7684\u987a\u5e8f\u5fc5\u987b\u4e00\u4e00\u5bf9\u5e94\u3002\n      nebula.fields: [degree]\n\n      # \u6307\u5b9a\u4e00\u4e2a\u5217\u4f5c\u4e3a\u8d77\u59cb\u70b9\u548c\u76ee\u7684\u70b9\u7684\u6e90\u3002\n      # vertex \u7684\u503c\u5fc5\u987b\u4e0e\u4e0a\u8ff0 fields \u6216\u8005 csv.fields \u4e2d\u7684\u5217\u540d\u4fdd\u6301\u4e00\u81f4\u3002\n      # \u76ee\u524d\uff0cNebulaGraph  master\u4ec5\u652f\u6301\u5b57\u7b26\u4e32\u6216\u6574\u6570\u7c7b\u578b\u7684 VID\u3002\n      source: {\n        field: _c0\n      # udf:{\n      #            separator:\"_\"\n      #            oldColNames:[field-0,field-1,field-2]\n      #            newColName:new-field\n      #        }\n      # \u4e3a VID \u589e\u52a0\u6307\u5b9a\u7684\u524d\u7f00\u3002\u4f8b\u5982 VID \u4e3a 12345\uff0c\u589e\u52a0\u524d\u7f00 tag1 \u540e\u4e3a tag1_12345\u3002\u4e0b\u5212\u7ebf\u65e0\u6cd5\u4fee\u6539\u3002\n      # prefix:\"tag1\"\n      # \u5bf9 string \u7c7b\u578b\u7684 VID \u8fdb\u884c\u54c8\u5e0c\u5316\u64cd\u4f5c\u3002\n      # policy:hash\n      }\n      target: {\n        field: _c1\n      # udf:{\n      #            separator:\"_\"\n      #            oldColNames:[field-0,field-1,field-2]\n      #            newColName:new-field\n      #        }\n      # \u4e3a VID \u589e\u52a0\u6307\u5b9a\u7684\u524d\u7f00\u3002\u4f8b\u5982 VID \u4e3a 12345\uff0c\u589e\u52a0\u524d\u7f00 tag1 \u540e\u4e3a tag1_12345\u3002\u4e0b\u5212\u7ebf\u65e0\u6cd5\u4fee\u6539\u3002\n      # prefix:\"tag1\"\n      # \u5bf9 string \u7c7b\u578b\u7684 VID \u8fdb\u884c\u54c8\u5e0c\u5316\u64cd\u4f5c\u3002\n      # policy:hash\n      }\n\n      # \u6307\u5b9a\u7684\u5206\u9694\u7b26\u3002\u9ed8\u8ba4\u503c\u4e3a\u82f1\u6587\u9017\u53f7\uff08,\uff09\u3002\n      separator: \",\"\n\n      # \u6307\u5b9a\u4e00\u4e2a\u5217\u4f5c\u4e3a rank \u7684\u6e90\uff08\u53ef\u9009\uff09\u3002\n\n      #ranking: rank\n\n      # \u5982\u679c CSV \u6587\u4ef6\u6709\u8868\u5934\uff0c\u8bf7\u5c06 header \u8bbe\u7f6e\u4e3a true\u3002\n      # \u5982\u679c CSV \u6587\u4ef6\u6ca1\u6709\u8868\u5934\uff0c\u8bf7\u5c06 header \u8bbe\u7f6e\u4e3a false\u3002\u9ed8\u8ba4\u503c\u4e3a false\u3002\n      header: false\n\n      # \u6279\u91cf\u64cd\u4f5c\u7c7b\u578b\uff0c\u5305\u62ec INSERT\u3001UPDATE \u548c DELETE\u3002\u9ed8\u8ba4\u4e3a INSERT\u3002\n      #writeMode: INSERT\n\n      # \u6307\u5b9a\u5355\u6279\u6b21\u5199\u5165 NebulaGraph \u7684\u6700\u5927\u8fb9\u6570\u91cf\u3002\n      batch: 256\n\n      # \u6570\u636e\u5199\u5165 NebulaGraph \u65f6\u9700\u8981\u521b\u5efa\u7684\u5206\u533a\u6570\u3002\n      partition: 32\n    }\n\n    # \u8bbe\u7f6e Edge type serve \u76f8\u5173\u4fe1\u606f\u3002\n    {\n      name: serve\n      type: {\n        source: csv\n        sink: client\n      }\n      path: \"hdfs://192.168.*.*:9000/data/edge_serve.csv\"\n      fields: [_c2,_c3]\n      nebula.fields: [start_year, end_year]\n      source: {\n        field: _c0\n      }\n      target: {\n        field: _c1\n      }\n      separator: \",\"\n      header: false\n      batch: 256\n      partition: 32\n    }\n\n  ]\n  # \u5982\u679c\u9700\u8981\u6dfb\u52a0\u66f4\u591a\u8fb9\uff0c\u8bf7\u53c2\u8003\u524d\u9762\u7684\u914d\u7f6e\u8fdb\u884c\u6dfb\u52a0\u3002\n}\n</code></pre>"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-csv/#4_nebulagraph","title":"\u6b65\u9aa4 4\uff1a\u5411 NebulaGraph \u5bfc\u5165\u6570\u636e","text":"<p>\u8fd0\u884c\u5982\u4e0b\u547d\u4ee4\u5c06 CSV \u6587\u4ef6\u6570\u636e\u5bfc\u5165\u5230 NebulaGraph \u4e2d\u3002\u5173\u4e8e\u53c2\u6570\u7684\u8bf4\u660e\uff0c\u8bf7\u53c2\u89c1\u5bfc\u5165\u547d\u4ee4\u53c2\u6570\u3002</p> <pre><code>${SPARK_HOME}/bin/spark-submit --master \"local\" --class com.vesoft.nebula.exchange.Exchange &lt;nebula-exchange.jar_path&gt; -c &lt;csv_application.conf_path&gt; \n</code></pre> <p>Note</p> <p>JAR \u5305\u6709\u4e24\u79cd\u83b7\u53d6\u65b9\u5f0f\uff1a\u81ea\u884c\u7f16\u8bd1\u6216\u8005\u4ece maven \u4ed3\u5e93\u4e0b\u8f7d\u3002</p> <p>\u793a\u4f8b\uff1a</p> <pre><code>${SPARK_HOME}/bin/spark-submit  --master \"local\" --class com.vesoft.nebula.exchange.Exchange  /root/nebula-exchange/nebula-exchange/target/nebula-exchange_spark_2.4-3.7.0.jar  -c /root/nebula-exchange/nebula-exchange/target/classes/csv_application.conf\n</code></pre> <p>\u7528\u6237\u53ef\u4ee5\u5728\u8fd4\u56de\u4fe1\u606f\u4e2d\u641c\u7d22<code>batchSuccess.&lt;tag_name/edge_name&gt;</code>\uff0c\u786e\u8ba4\u6210\u529f\u7684\u6570\u91cf\u3002\u4f8b\u5982<code>batchSuccess.follow: 300</code>\u3002</p>"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-csv/#5","title":"\u6b65\u9aa4 5\uff1a\uff08\u53ef\u9009\uff09\u9a8c\u8bc1\u6570\u636e","text":"<p>\u7528\u6237\u53ef\u4ee5\u5728 NebulaGraph \u5ba2\u6237\u7aef\uff08\u4f8b\u5982 NebulaGraph Studio\uff09\u4e2d\u6267\u884c\u67e5\u8be2\u8bed\u53e5\uff0c\u786e\u8ba4\u6570\u636e\u662f\u5426\u5df2\u5bfc\u5165\u3002\u4f8b\u5982\uff1a</p> <pre><code>LOOKUP ON player YIELD id(vertex);\n</code></pre> <p>\u7528\u6237\u4e5f\u53ef\u4ee5\u4f7f\u7528\u547d\u4ee4 <code>SHOW STATS</code> \u67e5\u770b\u7edf\u8ba1\u6570\u636e\u3002</p>"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-csv/#6_nebulagraph","title":"\u6b65\u9aa4 6\uff1a\uff08\u5982\u6709\uff09\u5728 NebulaGraph \u4e2d\u91cd\u5efa\u7d22\u5f15","text":"<p>\u5bfc\u5165\u6570\u636e\u540e\uff0c\u7528\u6237\u53ef\u4ee5\u5728 NebulaGraph \u4e2d\u91cd\u65b0\u521b\u5efa\u5e76\u91cd\u5efa\u7d22\u5f15\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1\u7d22\u5f15\u4ecb\u7ecd\u3002</p>"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-hbase/","title":"\u5bfc\u5165 HBase \u6570\u636e","text":"<p>\u672c\u6587\u4ee5\u4e00\u4e2a\u793a\u4f8b\u8bf4\u660e\u5982\u4f55\u4f7f\u7528 Exchange \u5c06\u5b58\u50a8\u5728 HBase \u4e0a\u7684\u6570\u636e\u5bfc\u5165 NebulaGraph \u3002</p>"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-hbase/#_1","title":"\u6570\u636e\u96c6","text":"<p>\u672c\u6587\u4ee5 basketballplayer \u6570\u636e\u96c6\u4e3a\u4f8b\u3002</p> <p>\u5728\u672c\u793a\u4f8b\u4e2d\uff0c\u8be5\u6570\u636e\u96c6\u5df2\u7ecf\u5b58\u5165 HBase \u4e2d\uff0c\u4ee5<code>player</code>\u3001<code>team</code>\u3001<code>follow</code>\u548c<code>serve</code>\u56db\u4e2a\u8868\u5b58\u50a8\u4e86\u6240\u6709\u70b9\u548c\u8fb9\u7684\u4fe1\u606f\u3002\u4ee5\u4e0b\u4e3a\u5404\u4e2a\u8868\u7684\u90e8\u5206\u6570\u636e\u3002</p> <pre><code>hbase(main):002:0&gt; scan \"player\"\nROW                                COLUMN+CELL\n player100                         column=cf:age, timestamp=1618881347530, value=42\n player100                         column=cf:name, timestamp=1618881354604, value=Tim Duncan\n player101                         column=cf:age, timestamp=1618881369124, value=36\n player101                         column=cf:name, timestamp=1618881379102, value=Tony Parker\n player102                         column=cf:age, timestamp=1618881386987, value=33\n player102                         column=cf:name, timestamp=1618881393370, value=LaMarcus Aldridge\n player103                         column=cf:age, timestamp=1618881402002, value=32\n player103                         column=cf:name, timestamp=1618881407882, value=Rudy Gay\n ...\n\nhbase(main):003:0&gt; scan \"team\"\nROW                                COLUMN+CELL\n team200                           column=cf:name, timestamp=1618881445563, value=Warriors\n team201                           column=cf:name, timestamp=1618881453636, value=Nuggets\n ...\n\nhbase(main):004:0&gt; scan \"follow\"\nROW                                COLUMN+CELL\n player100                         column=cf:degree, timestamp=1618881804853, value=95\n player100                         column=cf:dst_player, timestamp=1618881791522, value=player101\n player101                         column=cf:degree, timestamp=1618881824685, value=90\n player101                         column=cf:dst_player, timestamp=1618881816042, value=player102\n ...\n\nhbase(main):005:0&gt; scan \"serve\"\nROW                                COLUMN+CELL\n player100                         column=cf:end_year, timestamp=1618881899333, value=2016\n player100                         column=cf:start_year, timestamp=1618881890117, value=1997\n player100                         column=cf:teamid, timestamp=1618881875739, value=team204\n ...\n</code></pre>"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-hbase/#_2","title":"\u73af\u5883\u914d\u7f6e","text":"<p>\u672c\u6587\u793a\u4f8b\u5728 MacOS \u4e0b\u5b8c\u6210\uff0c\u4ee5\u4e0b\u662f\u76f8\u5173\u7684\u73af\u5883\u914d\u7f6e\u4fe1\u606f\uff1a</p> <ul> <li>\u786c\u4ef6\u89c4\u683c\uff1a<ul> <li>CPU\uff1a1.7 GHz Quad-Core Intel Core i7</li> <li>\u5185\u5b58\uff1a16 GB</li> </ul> </li> </ul> <ul> <li>Spark\uff1a2.4.7\uff0c\u5355\u673a\u7248</li> </ul> <ul> <li>HBase\uff1a2.2.7</li> </ul> <ul> <li>NebulaGraph \uff1amaster\u3002</li> </ul>"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-hbase/#_3","title":"\u524d\u63d0\u6761\u4ef6","text":"<p>\u5f00\u59cb\u5bfc\u5165\u6570\u636e\u4e4b\u524d\uff0c\u7528\u6237\u9700\u8981\u786e\u8ba4\u4ee5\u4e0b\u4fe1\u606f\uff1a</p> <ul> <li> <p>\u5df2\u7ecf\u5b89\u88c5\u90e8\u7f72 NebulaGraph  \u5e76\u83b7\u53d6\u5982\u4e0b\u4fe1\u606f\uff1a</p> <ul> <li>Graph \u670d\u52a1\u548c Meta \u670d\u52a1\u7684\u7684 IP \u5730\u5740\u548c\u7aef\u53e3\u3002</li> </ul> <ul> <li>\u62e5\u6709 NebulaGraph \u5199\u6743\u9650\u7684\u7528\u6237\u540d\u548c\u5bc6\u7801\u3002</li> </ul> </li> </ul> <ul> <li>\u5df2\u7ecf\u7f16\u8bd1 Exchange\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1\u7f16\u8bd1 Exchange\u3002\u672c\u793a\u4f8b\u4e2d\u4f7f\u7528 Exchange 3.7.0\u3002</li> </ul> <ul> <li>\u5df2\u7ecf\u5b89\u88c5 Spark\u3002</li> </ul> <ul> <li>\u4e86\u89e3 NebulaGraph \u4e2d\u521b\u5efa Schema \u7684\u4fe1\u606f\uff0c\u5305\u62ec Tag \u548c Edge type \u7684\u540d\u79f0\u3001\u5c5e\u6027\u7b49\u3002</li> </ul>"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-hbase/#_4","title":"\u64cd\u4f5c\u6b65\u9aa4","text":""},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-hbase/#1_nebulagraph_schema","title":"\u6b65\u9aa4 1\uff1a\u5728 NebulaGraph \u4e2d\u521b\u5efa Schema","text":"<p>\u5206\u6790\u6570\u636e\uff0c\u6309\u4ee5\u4e0b\u6b65\u9aa4\u5728 NebulaGraph \u4e2d\u521b\u5efa Schema\uff1a</p> <ol> <li> <p>\u786e\u8ba4 Schema \u8981\u7d20\u3002 NebulaGraph \u4e2d\u7684 Schema \u8981\u7d20\u5982\u4e0b\u8868\u6240\u793a\u3002</p> \u8981\u7d20 \u540d\u79f0 \u5c5e\u6027 Tag <code>player</code> <code>name string, age int</code> Tag <code>team</code> <code>name string</code> Edge Type <code>follow</code> <code>degree int</code> Edge Type <code>serve</code> <code>start_year int, end_year int</code> </li> <li> <p>\u5728 NebulaGraph \u4e2d\u521b\u5efa\u4e00\u4e2a\u56fe\u7a7a\u95f4 basketballplayer\uff0c\u5e76\u521b\u5efa\u4e00\u4e2a Schema\uff0c\u5982\u4e0b\u6240\u793a\u3002</p> <pre><code>## \u521b\u5efa\u56fe\u7a7a\u95f4\nnebula&gt; CREATE SPACE basketballplayer \\\n        (partition_num = 10, \\\n        replica_factor = 1, \\\n        vid_type = FIXED_STRING(30));\n\n## \u9009\u62e9\u56fe\u7a7a\u95f4 basketballplayer\nnebula&gt; USE basketballplayer;\n\n## \u521b\u5efa Tag player\nnebula&gt; CREATE TAG player(name string, age int);\n\n## \u521b\u5efa Tag team\nnebula&gt; CREATE TAG team(name string);\n\n## \u521b\u5efa Edge type follow\nnebula&gt; CREATE EDGE follow(degree int);\n\n## \u521b\u5efa Edge type serve\nnebula&gt; CREATE EDGE serve(start_year int, end_year int);\n</code></pre> </li> </ol> <p>\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u89c1\u5feb\u901f\u5f00\u59cb\u3002</p>"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-hbase/#2","title":"\u6b65\u9aa4 2\uff1a\u4fee\u6539\u914d\u7f6e\u6587\u4ef6","text":"<p>\u7f16\u8bd1 Exchange \u540e\uff0c\u590d\u5236<code>target/classes/application.conf</code>\u6587\u4ef6\u8bbe\u7f6e HBase \u6570\u636e\u6e90\u76f8\u5173\u7684\u914d\u7f6e\u3002\u5728\u672c\u793a\u4f8b\u4e2d\uff0c\u590d\u5236\u7684\u6587\u4ef6\u540d\u4e3a<code>hbase_application.conf</code>\u3002\u5404\u4e2a\u914d\u7f6e\u9879\u7684\u8be6\u7ec6\u8bf4\u660e\u8bf7\u53c2\u89c1\u914d\u7f6e\u8bf4\u660e\u3002</p> <pre><code>{\n  # Spark \u76f8\u5173\u914d\u7f6e\n  spark: {\n    app: {\n      name: NebulaGraph Exchange 3.7.0\n    }\n    driver: {\n      cores: 1\n      maxResultSize: 1G\n    }\n    cores: {\n      max: 16\n    }\n  }\n\n  # NebulaGraph \u76f8\u5173\u914d\u7f6e\n  nebula: {\n    address:{\n      # \u4ee5\u4e0b\u4e3a NebulaGraph \u7684 Graph \u670d\u52a1\u548c Meta \u670d\u52a1\u6240\u5728\u673a\u5668\u7684 IP \u5730\u5740\u53ca\u7aef\u53e3\u3002\n      # \u5982\u679c\u6709\u591a\u4e2a\u5730\u5740\uff0c\u683c\u5f0f\u4e3a \"ip1:port\",\"ip2:port\",\"ip3:port\"\u3002\n      # \u4e0d\u540c\u5730\u5740\u4e4b\u95f4\u4ee5\u82f1\u6587\u9017\u53f7 (,) \u9694\u5f00\u3002\n      graph:[\"127.0.0.1:9669\"]\n      #\u4efb\u610f\u4e00\u4e2a Meta \u670d\u52a1\u7684\u5730\u5740\u3002\n      #\u5982\u679c\u60a8\u7684 NebulaGraph \u5728\u865a\u62df\u7f51\u7edc\u4e2d\uff0c\u5982k8s\uff0c\u8bf7\u914d\u7f6e Leader Meta\u7684\u5730\u5740\u3002\n      meta:[\"127.0.0.1:9559\"]\n    }\n    # \u586b\u5199\u7684\u8d26\u53f7\u5fc5\u987b\u62e5\u6709 NebulaGraph \u76f8\u5e94\u56fe\u7a7a\u95f4\u7684\u5199\u6570\u636e\u6743\u9650\u3002\n    user: root\n    pswd: nebula\n    # \u662f\u5426\u4f7f\u7528 RSA \u52a0\u5bc6\u7684\u5bc6\u7801\u3002\n    # enableRSA: true\n    # \u4f7f\u7528 RSA \u52a0\u5bc6\u5bc6\u7801\u65f6\u7684\u5bc6\u94a5\u3002\n    # privateKey: \"\"\n    # \u586b\u5199 NebulaGraph \u4e2d\u9700\u8981\u5199\u5165\u6570\u636e\u7684\u56fe\u7a7a\u95f4\u540d\u79f0\u3002\n    space: basketballplayer\n    connection: {\n      timeout: 3000\n      retry: 3\n    }\n    execution: {\n      retry: 3\n    }\n    error: {\n      max: 32\n      output: /tmp/errors\n    }\n    rate: {\n      limit: 1024\n      timeout: 1000\n    }\n  }\n  # \u5904\u7406\u70b9\n  tags: [\n    # \u8bbe\u7f6e Tag player \u76f8\u5173\u4fe1\u606f\u3002\n    # \u5982\u679c\u9700\u8981\u5c06 rowkey \u8bbe\u7f6e\u4e3a\u6570\u636e\u6e90\uff0c\u8bf7\u586b\u5199\u201crowkey\u201d, \u5217\u65cf\u5185\u7684\u5217\u8bf7\u586b\u5199\u5b9e\u9645\u5217\u540d\u3002\n    {\n      # NebulaGraph \u4e2d\u5bf9\u5e94\u7684 Tag \u540d\u79f0\u3002\n      name: player\n      type: {\n        # \u6307\u5b9a\u6570\u636e\u6e90\u6587\u4ef6\u683c\u5f0f\uff0c\u8bbe\u7f6e\u4e3a HBase\u3002\n        source: hbase\n        # \u6307\u5b9a\u5982\u4f55\u5c06\u70b9\u6570\u636e\u5bfc\u5165 NebulaGraph \uff1aClient \u6216 SST\u3002\n        sink: client\n      }\n      host:192.168.*.*\n      port:2181\n      table:\"player\"\n      columnFamily:\"cf\"\n\n      # \u5728 fields \u91cc\u6307\u5b9a player \u8868\u4e2d\u7684\u5217\u540d\u79f0\uff0c\u5176\u5bf9\u5e94\u7684 value \u4f1a\u4f5c\u4e3a NebulaGraph \u4e2d\u6307\u5b9a\u5c5e\u6027\u3002\n      # fields \u548c nebula.fields \u91cc\u7684\u914d\u7f6e\u5fc5\u987b\u4e00\u4e00\u5bf9\u5e94\u3002\n      # \u5982\u679c\u9700\u8981\u6307\u5b9a\u591a\u4e2a\u5217\u540d\u79f0\uff0c\u7528\u82f1\u6587\u9017\u53f7\uff08,\uff09\u9694\u5f00\u3002\n      fields: [age,name]\n      nebula.fields: [age,name]\n\n      # \u6307\u5b9a\u8868\u4e2d\u67d0\u4e00\u5217\u6570\u636e\u4e3a NebulaGraph \u4e2d\u70b9 VID \u7684\u6765\u6e90\u3002\n      # \u4f8b\u5982 rowkey \u4f5c\u4e3a VID \u7684\u6765\u6e90\uff0c\u8bf7\u586b\u5199\u201crowkey\u201d\u3002\n      vertex:{\n          field:rowkey\n      # udf:{\n      #            separator:\"_\"\n      #            oldColNames:[field-0,field-1,field-2]\n      #            newColName:new-field\n      #        }\n      # \u4e3a VID \u589e\u52a0\u6307\u5b9a\u7684\u524d\u7f00\u3002\u4f8b\u5982 VID \u4e3a 12345\uff0c\u589e\u52a0\u524d\u7f00 tag1 \u540e\u4e3a tag1_12345\u3002\u4e0b\u5212\u7ebf\u65e0\u6cd5\u4fee\u6539\u3002\n      # prefix:\"tag1\"\n      # \u5bf9 string \u7c7b\u578b\u7684 VID \u8fdb\u884c\u54c8\u5e0c\u5316\u64cd\u4f5c\u3002\n      # policy:hash\n      }\n\n      # \u6279\u91cf\u64cd\u4f5c\u7c7b\u578b\uff0c\u5305\u62ec INSERT\u3001UPDATE \u548c DELETE\u3002\u9ed8\u8ba4\u4e3a INSERT\u3002\n      #writeMode: INSERT\n\n      # \u6279\u91cf\u5220\u9664\u65f6\u662f\u5426\u5220\u9664\u8be5\u70b9\u5173\u8054\u7684\u51fa\u8fb9\u548c\u5165\u8fb9\u3002`writeMode`\u4e3a`DELETE`\u65f6\u8be5\u53c2\u6570\u751f\u6548\u3002\n      #deleteEdge: false\n\n      # \u5355\u6279\u6b21\u5199\u5165 NebulaGraph \u7684\u6570\u636e\u6761\u6570\u3002\n      batch: 256\n\n      # \u6570\u636e\u5199\u5165 NebulaGraph \u65f6\u9700\u8981\u521b\u5efa\u7684\u5206\u533a\u6570\u3002\n      partition: 32\n    }\n    # \u8bbe\u7f6e Tag team \u76f8\u5173\u4fe1\u606f\u3002\n    {\n      name: team\n      type: {\n        source: hbase\n        sink: client\n      }\n      host:192.168.*.*\n      port:2181\n      table:\"team\"\n      columnFamily:\"cf\"\n      fields: [name]\n      nebula.fields: [name]\n      vertex:{\n          field:rowkey\n      }\n      batch: 256\n      partition: 32\n    }\n\n  ]\n\n  # \u5904\u7406\u8fb9\u6570\u636e\n  edges: [\n    # \u8bbe\u7f6e Edge type follow \u76f8\u5173\u4fe1\u606f\n    {\n      # NebulaGraph \u4e2d\u5bf9\u5e94\u7684 Edge type \u540d\u79f0\u3002\n      name: follow\n\n      type: {\n        # \u6307\u5b9a\u6570\u636e\u6e90\u6587\u4ef6\u683c\u5f0f\uff0c\u8bbe\u7f6e\u4e3a HBase\u3002\n        source: hbase\n\n        # \u6307\u5b9a\u8fb9\u6570\u636e\u5bfc\u5165 NebulaGraph \u7684\u65b9\u5f0f\uff0c\n        # \u6307\u5b9a\u5982\u4f55\u5c06\u70b9\u6570\u636e\u5bfc\u5165 NebulaGraph \uff1aClient \u6216 SST\u3002\n        sink: client\n      }\n\n      host:192.168.*.*\n      port:2181\n      table:\"follow\"\n      columnFamily:\"cf\"\n\n      # \u5728 fields \u91cc\u6307\u5b9a follow \u8868\u4e2d\u7684\u5217\u540d\u79f0\uff0c\u5176\u5bf9\u5e94\u7684 value \u4f1a\u4f5c\u4e3a NebulaGraph \u4e2d\u6307\u5b9a\u5c5e\u6027\u3002\n      # fields \u548c nebula.fields \u91cc\u7684\u914d\u7f6e\u5fc5\u987b\u4e00\u4e00\u5bf9\u5e94\u3002\n      # \u5982\u679c\u9700\u8981\u6307\u5b9a\u591a\u4e2a\u5217\u540d\u79f0\uff0c\u7528\u82f1\u6587\u9017\u53f7\uff08,\uff09\u9694\u5f00\u3002\n      fields: [degree]\n      nebula.fields: [degree]\n\n      # \u5728 source \u91cc\uff0c\u5c06 follow \u8868\u4e2d\u67d0\u4e00\u5217\u4f5c\u4e3a\u8fb9\u7684\u8d77\u59cb\u70b9\u6570\u636e\u6e90\u3002\u793a\u4f8b\u4f7f\u7528 rowkey\u3002\n      # \u5728 target \u91cc\uff0c\u5c06 follow \u8868\u4e2d\u67d0\u4e00\u5217\u4f5c\u4e3a\u8fb9\u7684\u76ee\u7684\u70b9\u6570\u636e\u6e90\u3002\u793a\u4f8b\u4f7f\u7528\u5217 dst_player\u3002\n      source:{\n          field:rowkey\n      # udf:{\n      #            separator:\"_\"\n      #            oldColNames:[field-0,field-1,field-2]\n      #            newColName:new-field\n      #        }\n      # \u4e3a VID \u589e\u52a0\u6307\u5b9a\u7684\u524d\u7f00\u3002\u4f8b\u5982 VID \u4e3a 12345\uff0c\u589e\u52a0\u524d\u7f00 tag1 \u540e\u4e3a tag1_12345\u3002\u4e0b\u5212\u7ebf\u65e0\u6cd5\u4fee\u6539\u3002\n      # prefix:\"tag1\"\n      # \u5bf9 string \u7c7b\u578b\u7684 VID \u8fdb\u884c\u54c8\u5e0c\u5316\u64cd\u4f5c\u3002\n      # policy:hash\n      }\n\n      target:{\n          field:dst_player\n      # udf:{\n      #            separator:\"_\"\n      #            oldColNames:[field-0,field-1,field-2]\n      #            newColName:new-field\n      #        }\n      # \u4e3a VID \u589e\u52a0\u6307\u5b9a\u7684\u524d\u7f00\u3002\u4f8b\u5982 VID \u4e3a 12345\uff0c\u589e\u52a0\u524d\u7f00 tag1 \u540e\u4e3a tag1_12345\u3002\u4e0b\u5212\u7ebf\u65e0\u6cd5\u4fee\u6539\u3002\n      # prefix:\"tag1\"\n      # \u5bf9 string \u7c7b\u578b\u7684 VID \u8fdb\u884c\u54c8\u5e0c\u5316\u64cd\u4f5c\u3002\n      # policy:hash\n      }\n\n      # \u6307\u5b9a\u4e00\u4e2a\u5217\u4f5c\u4e3a rank \u7684\u6e90\uff08\u53ef\u9009\uff09\u3002\n      #ranking: rank\n\n      # \u6279\u91cf\u64cd\u4f5c\u7c7b\u578b\uff0c\u5305\u62ec INSERT\u3001UPDATE \u548c DELETE\u3002\u9ed8\u8ba4\u4e3a INSERT\u3002\n      #writeMode: INSERT\n\n      # \u5355\u6279\u6b21\u5199\u5165 NebulaGraph \u7684\u6570\u636e\u6761\u6570\u3002\n      batch: 256\n\n      # \u6570\u636e\u5199\u5165 NebulaGraph \u65f6\u9700\u8981\u521b\u5efa\u7684\u5206\u533a\u6570\u3002\n      partition: 32\n    }\n\n    # \u8bbe\u7f6e Edge type serve \u76f8\u5173\u4fe1\u606f\n    {\n      name: serve\n      type: {\n        source: hbase\n        sink: client\n      }\n      host:192.168.*.*\n      port:2181\n      table:\"serve\"\n      columnFamily:\"cf\"\n\n      fields: [start_year,end_year]\n      nebula.fields: [start_year,end_year]\n      source:{\n          field:rowkey\n      }\n\n      target:{\n          field:teamid\n      }\n\n      # \u6307\u5b9a\u4e00\u4e2a\u5217\u4f5c\u4e3a rank \u7684\u6e90\uff08\u53ef\u9009\uff09\u3002\n      #ranking: rank\n\n      batch: 256\n      partition: 32\n    }\n  ]\n}\n</code></pre>"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-hbase/#3_nebulagraph","title":"\u6b65\u9aa4 3\uff1a\u5411 NebulaGraph \u5bfc\u5165\u6570\u636e","text":"<p>\u8fd0\u884c\u5982\u4e0b\u547d\u4ee4\u5c06 HBase \u6570\u636e\u5bfc\u5165\u5230 NebulaGraph \u4e2d\u3002\u5173\u4e8e\u53c2\u6570\u7684\u8bf4\u660e\uff0c\u8bf7\u53c2\u89c1\u5bfc\u5165\u547d\u4ee4\u53c2\u6570\u3002</p> <pre><code>${SPARK_HOME}/bin/spark-submit --master \"local\" --class com.vesoft.nebula.exchange.Exchange &lt;nebula-exchange.jar_path&gt; -c &lt;hbase_application.conf_path&gt;\n</code></pre> <p>Note</p> <p>JAR \u5305\u6709\u4e24\u79cd\u83b7\u53d6\u65b9\u5f0f\uff1a\u81ea\u884c\u7f16\u8bd1\u6216\u8005\u4ece maven \u4ed3\u5e93\u4e0b\u8f7d\u3002</p> <p>\u793a\u4f8b\uff1a</p> <pre><code>${SPARK_HOME}/bin/spark-submit  --master \"local\" --class com.vesoft.nebula.exchange.Exchange  /root/nebula-exchange/nebula-exchange/target/nebula-exchange_spark_2.4-3.7.0.jar  -c /root/nebula-exchange/nebula-exchange/target/classes/hbase_application.conf\n</code></pre> <p>\u7528\u6237\u53ef\u4ee5\u5728\u8fd4\u56de\u4fe1\u606f\u4e2d\u641c\u7d22<code>batchSuccess.&lt;tag_name/edge_name&gt;</code>\uff0c\u786e\u8ba4\u6210\u529f\u7684\u6570\u91cf\u3002\u4f8b\u5982<code>batchSuccess.follow: 300</code>\u3002</p>"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-hbase/#4","title":"\u6b65\u9aa4 4\uff1a\uff08\u53ef\u9009\uff09\u9a8c\u8bc1\u6570\u636e","text":"<p>\u7528\u6237\u53ef\u4ee5\u5728 NebulaGraph \u5ba2\u6237\u7aef\uff08\u4f8b\u5982 NebulaGraph Studio\uff09\u4e2d\u6267\u884c\u67e5\u8be2\u8bed\u53e5\uff0c\u786e\u8ba4\u6570\u636e\u662f\u5426\u5df2\u5bfc\u5165\u3002\u4f8b\u5982\uff1a</p> <pre><code>LOOKUP ON player YIELD id(vertex);\n</code></pre> <p>\u7528\u6237\u4e5f\u53ef\u4ee5\u4f7f\u7528\u547d\u4ee4 <code>SHOW STATS</code> \u67e5\u770b\u7edf\u8ba1\u6570\u636e\u3002</p>"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-hbase/#5_nebulagraph","title":"\u6b65\u9aa4 5\uff1a\uff08\u5982\u6709\uff09\u5728 NebulaGraph \u4e2d\u91cd\u5efa\u7d22\u5f15","text":"<p>\u5bfc\u5165\u6570\u636e\u540e\uff0c\u7528\u6237\u53ef\u4ee5\u5728 NebulaGraph \u4e2d\u91cd\u65b0\u521b\u5efa\u5e76\u91cd\u5efa\u7d22\u5f15\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1\u7d22\u5f15\u4ecb\u7ecd\u3002</p>"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-hive/","title":"\u5bfc\u5165 Hive \u6570\u636e","text":"<p>\u672c\u6587\u4ee5\u4e00\u4e2a\u793a\u4f8b\u8bf4\u660e\u5982\u4f55\u4f7f\u7528 Exchange \u5c06\u5b58\u50a8\u5728 Hive \u4e0a\u7684\u6570\u636e\u5bfc\u5165 NebulaGraph \u3002</p>"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-hive/#_1","title":"\u6570\u636e\u96c6","text":"<p>\u672c\u6587\u4ee5 basketballplayer \u6570\u636e\u96c6\u4e3a\u4f8b\u3002</p> <p>\u5728\u672c\u793a\u4f8b\u4e2d\uff0c\u8be5\u6570\u636e\u96c6\u5df2\u7ecf\u5b58\u5165 Hive \u4e2d\u540d\u4e3a<code>basketball</code>\u7684\u6570\u636e\u5e93\u4e2d\uff0c\u4ee5<code>player</code>\u3001<code>team</code>\u3001<code>follow</code>\u548c<code>serve</code>\u56db\u4e2a\u8868\u5b58\u50a8\u4e86\u6240\u6709\u70b9\u548c\u8fb9\u7684\u4fe1\u606f\u3002\u4ee5\u4e0b\u4e3a\u5404\u4e2a\u8868\u7684\u7ed3\u6784\u3002</p> <pre><code>scala&gt; spark.sql(\"describe basketball.player\").show\n+--------+---------+-------+\n|col_name|data_type|comment|\n+--------+---------+-------+\n|playerid|   string|   null|\n|     age|   bigint|   null|\n|    name|   string|   null|\n+--------+---------+-------+\n\nscala&gt; spark.sql(\"describe basketball.team\").show\n+----------+---------+-------+\n|  col_name|data_type|comment|\n+----------+---------+-------+\n|    teamid|   string|   null|\n|      name|   string|   null|\n+----------+---------+-------+\n\nscala&gt; spark.sql(\"describe basketball.follow\").show\n+----------+---------+-------+\n|  col_name|data_type|comment|\n+----------+---------+-------+\n|src_player|   string|   null|\n|dst_player|   string|   null|\n|    degree|   bigint|   null|\n+----------+---------+-------+\n\nscala&gt; spark.sql(\"describe basketball.serve\").show\n+----------+---------+-------+\n|  col_name|data_type|comment|\n+----------+---------+-------+\n|  playerid|   string|   null|\n|    teamid|   string|   null|\n|start_year|   bigint|   null|\n|  end_year|   bigint|   null|\n+----------+---------+-------+\n</code></pre> <p>\u8bf4\u660e\uff1aHive \u7684\u6570\u636e\u7c7b\u578b<code>bigint</code>\u4e0e NebulaGraph \u7684<code>int</code>\u5bf9\u5e94\u3002</p>"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-hive/#_2","title":"\u73af\u5883\u914d\u7f6e","text":"<p>\u672c\u6587\u793a\u4f8b\u5728 MacOS \u4e0b\u5b8c\u6210\uff0c\u4ee5\u4e0b\u662f\u76f8\u5173\u7684\u73af\u5883\u914d\u7f6e\u4fe1\u606f\uff1a</p> <ul> <li>\u786c\u4ef6\u89c4\u683c\uff1a<ul> <li>CPU\uff1a1.7 GHz Quad-Core Intel Core i7</li> <li>\u5185\u5b58\uff1a16 GB</li> </ul> </li> </ul> <ul> <li>Spark\uff1a2.4.7\uff0c\u5355\u673a\u7248</li> </ul> <ul> <li>Hive\uff1a2.3.7\uff0cHive Metastore \u6570\u636e\u5e93\u4e3a MySQL 8.0.22</li> </ul> <ul> <li>NebulaGraph \uff1amaster\u3002</li> </ul>"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-hive/#_3","title":"\u524d\u63d0\u6761\u4ef6","text":"<p>\u5f00\u59cb\u5bfc\u5165\u6570\u636e\u4e4b\u524d\uff0c\u7528\u6237\u9700\u8981\u786e\u8ba4\u4ee5\u4e0b\u4fe1\u606f\uff1a</p> <ul> <li> <p>\u5df2\u7ecf\u5b89\u88c5\u90e8\u7f72 NebulaGraph  \u5e76\u83b7\u53d6\u5982\u4e0b\u4fe1\u606f\uff1a</p> <ul> <li>Graph \u670d\u52a1\u548c Meta \u670d\u52a1\u7684\u7684 IP \u5730\u5740\u548c\u7aef\u53e3\u3002</li> </ul> <ul> <li>\u62e5\u6709 NebulaGraph \u5199\u6743\u9650\u7684\u7528\u6237\u540d\u548c\u5bc6\u7801\u3002</li> </ul> </li> </ul> <ul> <li>\u5df2\u7ecf\u7f16\u8bd1 Exchange\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1\u7f16\u8bd1 Exchange\u3002\u672c\u793a\u4f8b\u4e2d\u4f7f\u7528 Exchange 3.7.0\u3002</li> </ul> <ul> <li>\u5df2\u7ecf\u5b89\u88c5 Spark\u3002</li> </ul> <ul> <li>\u4e86\u89e3 NebulaGraph \u4e2d\u521b\u5efa Schema \u7684\u4fe1\u606f\uff0c\u5305\u62ec Tag \u548c Edge type \u7684\u540d\u79f0\u3001\u5c5e\u6027\u7b49\u3002</li> </ul> <ul> <li>\u5df2\u7ecf\u542f\u52a8 Hive Metastore \u6570\u636e\u5e93\uff08\u672c\u793a\u4f8b\u4e2d\u4e3a MySQL\uff09\u3002</li> </ul>"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-hive/#_4","title":"\u64cd\u4f5c\u6b65\u9aa4","text":""},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-hive/#1_nebulagraph_schema","title":"\u6b65\u9aa4 1\uff1a\u5728 NebulaGraph \u4e2d\u521b\u5efa Schema","text":"<p>\u5206\u6790\u6570\u636e\uff0c\u6309\u4ee5\u4e0b\u6b65\u9aa4\u5728 NebulaGraph \u4e2d\u521b\u5efa Schema\uff1a</p> <ol> <li> <p>\u786e\u8ba4 Schema \u8981\u7d20\u3002 NebulaGraph \u4e2d\u7684 Schema \u8981\u7d20\u5982\u4e0b\u8868\u6240\u793a\u3002</p> \u8981\u7d20 \u540d\u79f0 \u5c5e\u6027 Tag <code>player</code> <code>name string, age int</code> Tag <code>team</code> <code>name string</code> Edge Type <code>follow</code> <code>degree int</code> Edge Type <code>serve</code> <code>start_year int, end_year int</code> </li> <li> <p>\u5728 NebulaGraph \u4e2d\u521b\u5efa\u4e00\u4e2a\u56fe\u7a7a\u95f4 basketballplayer\uff0c\u5e76\u521b\u5efa\u4e00\u4e2a Schema\uff0c\u5982\u4e0b\u6240\u793a\u3002</p> <pre><code>## \u521b\u5efa\u56fe\u7a7a\u95f4\nnebula&gt; CREATE SPACE basketballplayer \\\n        (partition_num = 10, \\\n        replica_factor = 1, \\\n        vid_type = FIXED_STRING(30));\n\n## \u9009\u62e9\u56fe\u7a7a\u95f4 basketballplayer\nnebula&gt; USE basketballplayer;\n\n## \u521b\u5efa Tag player\nnebula&gt; CREATE TAG player(name string, age int);\n\n## \u521b\u5efa Tag team\nnebula&gt; CREATE TAG team(name string);\n\n## \u521b\u5efa Edge type follow\nnebula&gt; CREATE EDGE follow(degree int);\n\n## \u521b\u5efa Edge type serve\nnebula&gt; CREATE EDGE serve(start_year int, end_year int);\n</code></pre> </li> </ol> <p>\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u89c1\u5feb\u901f\u5f00\u59cb\u3002</p>"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-hive/#2_spark_sql_hive_sql","title":"\u6b65\u9aa4 2\uff1a\u4f7f\u7528 Spark SQL \u786e\u8ba4 Hive SQL \u8bed\u53e5","text":"<p>\u542f\u52a8 spark-shell \u73af\u5883\u540e\uff0c\u4f9d\u6b21\u8fd0\u884c\u4ee5\u4e0b\u8bed\u53e5\uff0c\u786e\u8ba4 Spark \u80fd\u8bfb\u53d6 Hive \u4e2d\u7684\u6570\u636e\u3002</p> <pre><code>scala&gt; sql(\"select playerid, age, name from basketball.player\").show\nscala&gt; sql(\"select teamid, name from basketball.team\").show\nscala&gt; sql(\"select src_player, dst_player, degree from basketball.follow\").show\nscala&gt; sql(\"select playerid, teamid, start_year, end_year from basketball.serve\").show\n</code></pre> <p>\u4ee5\u4e0b\u4e3a\u8868<code>basketball.player</code>\u4e2d\u8bfb\u51fa\u7684\u7ed3\u679c\u3002</p> <pre><code>+---------+----+-----------------+\n| playerid| age|             name|\n+---------+----+-----------------+\n|player100|  42|       Tim Duncan|\n|player101|  36|      Tony Parker|\n|player102|  33|LaMarcus Aldridge|\n|player103|  32|         Rudy Gay|\n|player104|  32|  Marco Belinelli|\n+---------+----+-----------------+\n...\n</code></pre>"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-hive/#3","title":"\u6b65\u9aa4 3\uff1a\u4fee\u6539\u914d\u7f6e\u6587\u4ef6","text":"<p>\u7f16\u8bd1 Exchange \u540e\uff0c\u590d\u5236<code>target/classes/application.conf</code>\u6587\u4ef6\u8bbe\u7f6e Hive \u6570\u636e\u6e90\u76f8\u5173\u7684\u914d\u7f6e\u3002\u5728\u672c\u793a\u4f8b\u4e2d\uff0c\u590d\u5236\u7684\u6587\u4ef6\u540d\u4e3a<code>hive_application.conf</code>\u3002\u5404\u4e2a\u914d\u7f6e\u9879\u7684\u8be6\u7ec6\u8bf4\u660e\u8bf7\u53c2\u89c1\u914d\u7f6e\u8bf4\u660e\u3002</p> <pre><code>{\n  # Spark \u76f8\u5173\u914d\u7f6e\n  spark: {\n    app: {\n      name: NebulaGraph Exchange 3.7.0\n    }\n    driver: {\n      cores: 1\n      maxResultSize: 1G\n    }\n    cores: {\n      max: 16\n    }\n  }\n\n  # \u5982\u679c Spark \u548c Hive \u90e8\u7f72\u5728\u4e0d\u540c\u96c6\u7fa4\uff0c\u624d\u9700\u8981\u914d\u7f6e\u8fde\u63a5 Hive \u7684\u53c2\u6570\uff0c\u5426\u5219\u8bf7\u5ffd\u7565\u8fd9\u4e9b\u914d\u7f6e\u3002\n  #hive: {\n  #  waredir: \"hdfs://NAMENODE_IP:9000/apps/svr/hive-xxx/warehouse/\"\n  #  connectionURL: \"jdbc:mysql://your_ip:3306/hive_spark?characterEncoding=UTF-8\"\n  #  connectionDriverName: \"com.mysql.jdbc.Driver\"\n  #  connectionUserName: \"user\"\n  #  connectionPassword: \"password\"\n  #}\n\n  # NebulaGraph \u76f8\u5173\u914d\u7f6e\n  nebula: {\n    address:{\n      # \u4ee5\u4e0b\u4e3a NebulaGraph \u7684 Graph \u670d\u52a1\u548c\u6240\u6709 Meta \u670d\u52a1\u6240\u5728\u673a\u5668\u7684 IP \u5730\u5740\u53ca\u7aef\u53e3\u3002\n      # \u5982\u679c\u6709\u591a\u4e2a\u5730\u5740\uff0c\u683c\u5f0f\u4e3a \"ip1:port\",\"ip2:port\",\"ip3:port\"\u3002\n      # \u4e0d\u540c\u5730\u5740\u4e4b\u95f4\u4ee5\u82f1\u6587\u9017\u53f7 (,) \u9694\u5f00\u3002\n      graph:[\"127.0.0.1:9669\"]\n      #\u4efb\u610f\u4e00\u4e2a Meta \u670d\u52a1\u7684\u5730\u5740\u3002\n      #\u5982\u679c\u60a8\u7684 NebulaGraph \u5728\u865a\u62df\u7f51\u7edc\u4e2d\uff0c\u5982k8s\uff0c\u8bf7\u914d\u7f6e Leader Meta\u7684\u5730\u5740\u3002\n      meta:[\"127.0.0.1:9559\"]\n    }\n    # \u586b\u5199\u7684\u8d26\u53f7\u5fc5\u987b\u62e5\u6709 NebulaGraph \u76f8\u5e94\u56fe\u7a7a\u95f4\u7684\u5199\u6570\u636e\u6743\u9650\u3002\n    user: root\n    pswd: nebula\n    # \u662f\u5426\u4f7f\u7528 RSA \u52a0\u5bc6\u7684\u5bc6\u7801\u3002\n    # enableRSA: true\n    # \u4f7f\u7528 RSA \u52a0\u5bc6\u5bc6\u7801\u65f6\u7684\u5bc6\u94a5\u3002\n    # privateKey: \"\"\n    # \u586b\u5199 NebulaGraph \u4e2d\u9700\u8981\u5199\u5165\u6570\u636e\u7684\u56fe\u7a7a\u95f4\u540d\u79f0\u3002\n    space: basketballplayer\n    connection: {\n      timeout: 3000\n      retry: 3\n    }\n    execution: {\n      retry: 3\n    }\n    error: {\n      max: 32\n      output: /tmp/errors\n    }\n    rate: {\n      limit: 1024\n      timeout: 1000\n    }\n  }\n  # \u5904\u7406\u70b9\n  tags: [\n    # \u8bbe\u7f6e Tag player \u76f8\u5173\u4fe1\u606f\u3002\n    {\n      # NebulaGraph \u4e2d\u5bf9\u5e94\u7684 Tag \u540d\u79f0\u3002\n      name: player\n      type: {\n        # \u6307\u5b9a\u6570\u636e\u6e90\u6587\u4ef6\u683c\u5f0f\uff0c\u8bbe\u7f6e\u4e3a hive\u3002\n        source: hive\n        # \u6307\u5b9a\u5982\u4f55\u5c06\u70b9\u6570\u636e\u5bfc\u5165 NebulaGraph \uff1aClient \u6216 SST\u3002\n        sink: client\n      }\n\n      # \u8bbe\u7f6e\u8bfb\u53d6\u6570\u636e\u5e93 basketball \u4e2d player \u8868\u6570\u636e\u7684 SQL \u8bed\u53e5\n      exec: \"select playerid, age, name from basketball.player\"\n\n      # \u5728 fields \u91cc\u6307\u5b9a player \u8868\u4e2d\u7684\u5217\u540d\u79f0\uff0c\u5176\u5bf9\u5e94\u7684 value \u4f1a\u4f5c\u4e3a NebulaGraph \u4e2d\u6307\u5b9a\u5c5e\u6027\u3002\n      # fields \u548c nebula.fields \u91cc\u7684\u914d\u7f6e\u5fc5\u987b\u4e00\u4e00\u5bf9\u5e94\u3002\n      # \u5982\u679c\u9700\u8981\u6307\u5b9a\u591a\u4e2a\u5217\u540d\u79f0\uff0c\u7528\u82f1\u6587\u9017\u53f7\uff08,\uff09\u9694\u5f00\u3002\n      fields: [age,name]\n      nebula.fields: [age,name]\n\n      # \u6307\u5b9a\u8868\u4e2d\u67d0\u4e00\u5217\u6570\u636e\u4e3a NebulaGraph \u4e2d\u70b9 VID \u7684\u6765\u6e90\u3002\n      vertex:{\n        field:playerid\n      # udf:{\n      #            separator:\"_\"\n      #            oldColNames:[field-0,field-1,field-2]\n      #            newColName:new-field\n      #        }\n      # \u4e3a VID \u589e\u52a0\u6307\u5b9a\u7684\u524d\u7f00\u3002\u4f8b\u5982 VID \u4e3a 12345\uff0c\u589e\u52a0\u524d\u7f00 tag1 \u540e\u4e3a tag1_12345\u3002\u4e0b\u5212\u7ebf\u65e0\u6cd5\u4fee\u6539\u3002\n      # prefix:\"tag1\"\n      # \u5bf9 string \u7c7b\u578b\u7684 VID \u8fdb\u884c\u54c8\u5e0c\u5316\u64cd\u4f5c\u3002\n      # policy:hash\n      }\n\n      # \u6279\u91cf\u64cd\u4f5c\u7c7b\u578b\uff0c\u5305\u62ec INSERT\u3001UPDATE \u548c DELETE\u3002\u9ed8\u8ba4\u4e3a INSERT\u3002\n      #writeMode: INSERT\n\n      # \u6279\u91cf\u5220\u9664\u65f6\u662f\u5426\u5220\u9664\u8be5\u70b9\u5173\u8054\u7684\u51fa\u8fb9\u548c\u5165\u8fb9\u3002`writeMode`\u4e3a`DELETE`\u65f6\u8be5\u53c2\u6570\u751f\u6548\u3002\n      #deleteEdge: false\n\n      # \u5355\u6279\u6b21\u5199\u5165 NebulaGraph \u7684\u6700\u5927\u6570\u636e\u6761\u6570\u3002\n      batch: 256\n\n      # \u6570\u636e\u5199\u5165 NebulaGraph \u65f6\u9700\u8981\u521b\u5efa\u7684\u5206\u533a\u6570\u3002\n      partition: 32\n    }\n    # \u8bbe\u7f6e Tag team \u76f8\u5173\u4fe1\u606f\u3002\n    {\n      name: team\n      type: {\n        source: hive\n        sink: client\n      }\n      exec: \"select teamid, name from basketball.team\"\n      fields: [name]\n      nebula.fields: [name]\n      vertex: {\n        field: teamid\n      }\n      batch: 256\n      partition: 32\n    }\n\n  ]\n\n  # \u5904\u7406\u8fb9\u6570\u636e\n  edges: [\n    # \u8bbe\u7f6e Edge type follow \u76f8\u5173\u4fe1\u606f\n    {\n      # NebulaGraph \u4e2d\u5bf9\u5e94\u7684 Edge type \u540d\u79f0\u3002\n      name: follow\n\n      type: {\n        # \u6307\u5b9a\u6570\u636e\u6e90\u6587\u4ef6\u683c\u5f0f\uff0c\u8bbe\u7f6e\u4e3a hive\u3002\n        source: hive\n\n        # \u6307\u5b9a\u8fb9\u6570\u636e\u5bfc\u5165 NebulaGraph \u7684\u65b9\u5f0f\uff0c\n        # \u6307\u5b9a\u5982\u4f55\u5c06\u70b9\u6570\u636e\u5bfc\u5165 NebulaGraph \uff1aClient \u6216 SST\u3002\n        sink: client\n      }\n\n      # \u8bbe\u7f6e\u8bfb\u53d6\u6570\u636e\u5e93 basketball \u4e2d follow \u8868\u6570\u636e\u7684 SQL \u8bed\u53e5\u3002\n      exec: \"select src_player, dst_player, degree from basketball.follow\"\n\n      # \u5728 fields \u91cc\u6307\u5b9a follow \u8868\u4e2d\u7684\u5217\u540d\u79f0\uff0c\u5176\u5bf9\u5e94\u7684 value \u4f1a\u4f5c\u4e3a NebulaGraph \u4e2d\u6307\u5b9a\u5c5e\u6027\u3002\n      # fields \u548c nebula.fields \u91cc\u7684\u914d\u7f6e\u5fc5\u987b\u4e00\u4e00\u5bf9\u5e94\u3002\n      # \u5982\u679c\u9700\u8981\u6307\u5b9a\u591a\u4e2a\u5217\u540d\u79f0\uff0c\u7528\u82f1\u6587\u9017\u53f7\uff08,\uff09\u9694\u5f00\u3002\n      fields: [degree]\n      nebula.fields: [degree]\n\n      # \u5728 source \u91cc\uff0c\u5c06 follow \u8868\u4e2d\u67d0\u4e00\u5217\u4f5c\u4e3a\u8fb9\u7684\u8d77\u59cb\u70b9\u6570\u636e\u6e90\u3002\n      # \u5728 target \u91cc\uff0c\u5c06 follow \u8868\u4e2d\u67d0\u4e00\u5217\u4f5c\u4e3a\u8fb9\u7684\u76ee\u7684\u70b9\u6570\u636e\u6e90\u3002\n      source: {\n        field: src_player\n      # udf:{\n      #            separator:\"_\"\n      #            oldColNames:[field-0,field-1,field-2]\n      #            newColName:new-field\n      #        }\n      # \u4e3a VID \u589e\u52a0\u6307\u5b9a\u7684\u524d\u7f00\u3002\u4f8b\u5982 VID \u4e3a 12345\uff0c\u589e\u52a0\u524d\u7f00 tag1 \u540e\u4e3a tag1_12345\u3002\u4e0b\u5212\u7ebf\u65e0\u6cd5\u4fee\u6539\u3002\n      # prefix:\"tag1\"\n      # \u5bf9 string \u7c7b\u578b\u7684 VID \u8fdb\u884c\u54c8\u5e0c\u5316\u64cd\u4f5c\u3002\n      # policy:hash\n      }\n\n      target: {\n        field: dst_player\n      # udf:{\n      #            separator:\"_\"\n      #            oldColNames:[field-0,field-1,field-2]\n      #            newColName:new-field\n      #        }\n      # \u4e3a VID \u589e\u52a0\u6307\u5b9a\u7684\u524d\u7f00\u3002\u4f8b\u5982 VID \u4e3a 12345\uff0c\u589e\u52a0\u524d\u7f00 tag1 \u540e\u4e3a tag1_12345\u3002\u4e0b\u5212\u7ebf\u65e0\u6cd5\u4fee\u6539\u3002\n      # prefix:\"tag1\"\n      # \u5bf9 string \u7c7b\u578b\u7684 VID \u8fdb\u884c\u54c8\u5e0c\u5316\u64cd\u4f5c\u3002\n      # policy:hash\n      }\n\n      # \u6307\u5b9a\u4e00\u4e2a\u5217\u4f5c\u4e3a rank \u7684\u6e90\uff08\u53ef\u9009\uff09\u3002\n      #ranking: rank\n\n      # \u6279\u91cf\u64cd\u4f5c\u7c7b\u578b\uff0c\u5305\u62ec INSERT\u3001UPDATE \u548c DELETE\u3002\u9ed8\u8ba4\u4e3a INSERT\u3002\n      #writeMode: INSERT\n\n      # \u5355\u6279\u6b21\u5199\u5165 NebulaGraph \u7684\u6700\u5927\u6570\u636e\u6761\u6570\u3002\n      batch: 256\n\n      # \u6570\u636e\u5199\u5165 NebulaGraph \u65f6\u9700\u8981\u521b\u5efa\u7684\u5206\u533a\u6570\u3002\n      partition: 32\n    }\n\n    # \u8bbe\u7f6e Edge type serve \u76f8\u5173\u4fe1\u606f\n    {\n      name: serve\n      type: {\n        source: hive\n        sink: client\n      }\n      exec: \"select playerid, teamid, start_year, end_year from basketball.serve\"\n      fields: [start_year,end_year]\n      nebula.fields: [start_year,end_year]\n      source: {\n        field: playerid\n      }\n      target: {\n        field: teamid\n      }\n\n      # \u6307\u5b9a\u4e00\u4e2a\u5217\u4f5c\u4e3a rank \u7684\u6e90\uff08\u53ef\u9009\uff09\u3002\n      #ranking: rank\n\n      batch: 256\n      partition: 32\n    }\n  ]\n}\n</code></pre>"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-hive/#4_nebulagraph","title":"\u6b65\u9aa4 4\uff1a\u5411 NebulaGraph \u5bfc\u5165\u6570\u636e","text":"<p>\u8fd0\u884c\u5982\u4e0b\u547d\u4ee4\u5c06 Hive \u6570\u636e\u5bfc\u5165\u5230 NebulaGraph \u4e2d\u3002\u5173\u4e8e\u53c2\u6570\u7684\u8bf4\u660e\uff0c\u8bf7\u53c2\u89c1\u5bfc\u5165\u547d\u4ee4\u53c2\u6570\u3002</p> <pre><code>${SPARK_HOME}/bin/spark-submit --master \"local\" --class com.vesoft.nebula.exchange.Exchange &lt;nebula-exchange.jar_path&gt; -c &lt;hive_application.conf_path&gt; -h\n</code></pre> <p>Note</p> <p>JAR \u5305\u6709\u4e24\u79cd\u83b7\u53d6\u65b9\u5f0f\uff1a\u81ea\u884c\u7f16\u8bd1\u6216\u8005\u4ece maven \u4ed3\u5e93\u4e0b\u8f7d\u3002</p> <p>\u793a\u4f8b\uff1a</p> <pre><code>${SPARK_HOME}/bin/spark-submit  --master \"local\" --class com.vesoft.nebula.exchange.Exchange  /root/nebula-exchange/nebula-exchange/target/nebula-exchange_spark_2.4-3.7.0.jar  -c /root/nebula-exchange/nebula-exchange/target/classes/hive_application.conf -h\n</code></pre> <p>\u7528\u6237\u53ef\u4ee5\u5728\u8fd4\u56de\u4fe1\u606f\u4e2d\u641c\u7d22<code>batchSuccess.&lt;tag_name/edge_name&gt;</code>\uff0c\u786e\u8ba4\u6210\u529f\u7684\u6570\u91cf\u3002\u4f8b\u5982<code>batchSuccess.follow: 300</code>\u3002</p>"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-hive/#5","title":"\u6b65\u9aa4 5\uff1a\uff08\u53ef\u9009\uff09\u9a8c\u8bc1\u6570\u636e","text":"<p>\u7528\u6237\u53ef\u4ee5\u5728 NebulaGraph \u5ba2\u6237\u7aef\uff08\u4f8b\u5982 NebulaGraph Studio\uff09\u4e2d\u6267\u884c\u67e5\u8be2\u8bed\u53e5\uff0c\u786e\u8ba4\u6570\u636e\u662f\u5426\u5df2\u5bfc\u5165\u3002\u4f8b\u5982\uff1a</p> <pre><code>LOOKUP ON player YIELD id(vertex);\n</code></pre> <p>\u7528\u6237\u4e5f\u53ef\u4ee5\u4f7f\u7528\u547d\u4ee4 <code>SHOW STATS</code> \u67e5\u770b\u7edf\u8ba1\u6570\u636e\u3002</p>"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-hive/#6_nebulagraph","title":"\u6b65\u9aa4 6\uff1a\uff08\u5982\u6709\uff09\u5728 NebulaGraph \u4e2d\u91cd\u5efa\u7d22\u5f15","text":"<p>\u5bfc\u5165\u6570\u636e\u540e\uff0c\u7528\u6237\u53ef\u4ee5\u5728 NebulaGraph \u4e2d\u91cd\u65b0\u521b\u5efa\u5e76\u91cd\u5efa\u7d22\u5f15\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1\u7d22\u5f15\u4ecb\u7ecd\u3002</p>"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-jdbc/","title":"\u5bfc\u5165\u901a\u7528 JDBC \u6570\u636e","text":"<p>JDBC \u6570\u636e\u662f\u6307\u7528 JDBC \u63a5\u53e3\u8bbf\u95ee\u7684\u5404\u7c7b\u6570\u636e\u5e93\u7684\u6570\u636e\u7684\u7edf\u79f0\u3002\u672c\u6587\u4ee5 MySQL \u6570\u636e\u5e93\u4e3a\u4f8b\u8bf4\u660e\u5982\u4f55\u4f7f\u7528 Exchange \u5c06 JDBC \u6570\u636e\u5bfc\u5165 NebulaGraph \u3002</p>"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-jdbc/#_1","title":"\u6570\u636e\u96c6","text":"<p>\u672c\u6587\u4ee5 basketballplayer \u6570\u636e\u96c6\u4e3a\u4f8b\u3002</p> <p>\u5728\u672c\u793a\u4f8b\u4e2d\uff0c\u8be5\u6570\u636e\u96c6\u5df2\u7ecf\u5b58\u5165 MySQL \u4e2d\u540d\u4e3a<code>basketball</code>\u7684\u6570\u636e\u5e93\u4e2d\uff0c\u4ee5<code>player</code>\u3001<code>team</code>\u3001<code>follow</code>\u548c<code>serve</code>\u56db\u4e2a\u8868\u5b58\u50a8\u4e86\u6240\u6709\u70b9\u548c\u8fb9\u7684\u4fe1\u606f\u3002\u4ee5\u4e0b\u4e3a\u5404\u4e2a\u8868\u7684\u7ed3\u6784\u3002</p> <pre><code>mysql&gt; desc player;\n+----------+-------------+------+-----+---------+-------+\n| Field    | Type        | Null | Key | Default | Extra |\n+----------+-------------+------+-----+---------+-------+\n| playerid | int         | YES  |     | NULL    |       |\n| age      | int         | YES  |     | NULL    |       |\n| name     | varchar(30) | YES  |     | NULL    |       |\n+----------+-------------+------+-----+---------+-------+\n\nmysql&gt; desc team;\n+--------+-------------+------+-----+---------+-------+\n| Field  | Type        | Null | Key | Default | Extra |\n+--------+-------------+------+-----+---------+-------+\n| teamid | int         | YES  |     | NULL    |       |\n| name   | varchar(30) | YES  |     | NULL    |       |\n+--------+-------------+------+-----+---------+-------+\n\nmysql&gt; desc follow;\n+------------+-------------+------+-----+---------+-------+\n| Field      | Type        | Null | Key | Default | Extra |\n+------------+-------------+------+-----+---------+-------+\n| src_player | int         | YES  |     | NULL    |       |\n| dst_player | int         | YES  |     | NULL    |       |\n| degree     | int         | YES  |     | NULL    |       |\n+------------+-------------+------+-----+---------+-------+\n\nmysql&gt; desc serve;\n+------------+-------------+------+-----+---------+-------+\n| Field      | Type        | Null | Key | Default | Extra |\n+------------+-------------+------+-----+---------+-------+\n| playerid   | int         | YES  |     | NULL    |       |\n| teamid     | int         | YES  |     | NULL    |       |\n| start_year | int         | YES  |     | NULL    |       |\n| end_year   | int         | YES  |     | NULL    |       |\n+------------+-------------+------+-----+---------+-------+\n</code></pre>"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-jdbc/#_2","title":"\u73af\u5883\u914d\u7f6e","text":"<p>\u672c\u6587\u793a\u4f8b\u5728 MacOS \u4e0b\u5b8c\u6210\uff0c\u4ee5\u4e0b\u662f\u76f8\u5173\u7684\u73af\u5883\u914d\u7f6e\u4fe1\u606f\uff1a</p> <ul> <li>\u786c\u4ef6\u89c4\u683c\uff1a<ul> <li>CPU\uff1a1.7 GHz Quad-Core Intel Core i7</li> <li>\u5185\u5b58\uff1a16 GB</li> </ul> </li> </ul> <ul> <li>Spark\uff1a2.3.0\uff0c\u5355\u673a\u7248</li> </ul> <ul> <li>NebulaGraph \uff1amaster\u3002</li> </ul>"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-jdbc/#_3","title":"\u524d\u63d0\u6761\u4ef6","text":"<p>\u5f00\u59cb\u5bfc\u5165\u6570\u636e\u4e4b\u524d\uff0c\u7528\u6237\u9700\u8981\u786e\u8ba4\u4ee5\u4e0b\u4fe1\u606f\uff1a</p> <ul> <li> <p>\u5df2\u7ecf\u5b89\u88c5\u90e8\u7f72 NebulaGraph  \u5e76\u83b7\u53d6\u5982\u4e0b\u4fe1\u606f\uff1a</p> <ul> <li>Graph \u670d\u52a1\u548c Meta \u670d\u52a1\u7684\u7684 IP \u5730\u5740\u548c\u7aef\u53e3\u3002</li> </ul> <ul> <li>\u62e5\u6709 NebulaGraph \u5199\u6743\u9650\u7684\u7528\u6237\u540d\u548c\u5bc6\u7801\u3002</li> </ul> </li> </ul> <ul> <li>\u5df2\u7ecf\u7f16\u8bd1 Exchange\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1\u7f16\u8bd1 Exchange\u3002\u672c\u793a\u4f8b\u4e2d\u4f7f\u7528 Exchange 3.7.0\u3002</li> </ul> <ul> <li>\u5df2\u7ecf\u5b89\u88c5 Spark\u3002</li> </ul> <ul> <li>\u4e86\u89e3 NebulaGraph \u4e2d\u521b\u5efa Schema \u7684\u4fe1\u606f\uff0c\u5305\u62ec Tag \u548c Edge type \u7684\u540d\u79f0\u3001\u5c5e\u6027\u7b49\u3002</li> </ul> <ul> <li>\u5982\u679c\u6587\u4ef6\u5b58\u50a8\u5728\u672c\u5730\u4e14 NebulaGraph \u662f\u96c6\u7fa4\u67b6\u6784\uff0c\u9700\u8981\u5728\u96c6\u7fa4\u6bcf\u53f0\u673a\u5668\u672c\u5730\u76f8\u540c\u76ee\u5f55\u4e0b\u653e\u7f6e\u6587\u4ef6\u3002</li> </ul>"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-jdbc/#_4","title":"\u6ce8\u610f\u4e8b\u9879","text":"<p>nebula-exchange_spark_2.2 \u4ec5\u652f\u6301\u5355\u8868\u67e5\u8be2\uff0c\u4e0d\u652f\u6301\u591a\u8868\u67e5\u8be2\u3002</p>"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-jdbc/#_5","title":"\u64cd\u4f5c\u6b65\u9aa4","text":""},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-jdbc/#1_nebulagraph_schema","title":"\u6b65\u9aa4 1\uff1a\u5728 NebulaGraph \u4e2d\u521b\u5efa Schema","text":"<p>\u5206\u6790\u6587\u4ef6\u4e2d\u7684\u6570\u636e\uff0c\u6309\u4ee5\u4e0b\u6b65\u9aa4\u5728 NebulaGraph \u4e2d\u521b\u5efa Schema\uff1a</p> <ol> <li> <p>\u786e\u8ba4 Schema \u8981\u7d20\u3002 NebulaGraph \u4e2d\u7684 Schema \u8981\u7d20\u5982\u4e0b\u8868\u6240\u793a\u3002</p> \u8981\u7d20 \u540d\u79f0 \u5c5e\u6027 Tag <code>player</code> <code>name string, age int</code> Tag <code>team</code> <code>name string</code> Edge Type <code>follow</code> <code>degree int</code> Edge Type <code>serve</code> <code>start_year int, end_year int</code> </li> <li> <p>\u4f7f\u7528 NebulaGraph Console \u521b\u5efa\u4e00\u4e2a\u56fe\u7a7a\u95f4 basketballplayer\uff0c\u5e76\u521b\u5efa\u4e00\u4e2a Schema\uff0c\u5982\u4e0b\u6240\u793a\u3002</p> <pre><code>## \u521b\u5efa\u56fe\u7a7a\u95f4\nnebula&gt; CREATE SPACE basketballplayer \\\n        (partition_num = 10, \\\n        replica_factor = 1, \\\n        vid_type = FIXED_STRING(30));\n\n## \u9009\u62e9\u56fe\u7a7a\u95f4 basketballplayer\nnebula&gt; USE basketballplayer;\n\n## \u521b\u5efa Tag player\nnebula&gt; CREATE TAG player(name string, age int);\n\n## \u521b\u5efa Tag team\nnebula&gt; CREATE TAG team(name string);\n\n## \u521b\u5efa Edge type follow\nnebula&gt; CREATE EDGE follow(degree int);\n\n## \u521b\u5efa Edge type serve\nnebula&gt; CREATE EDGE serve(start_year int, end_year int);\n</code></pre> </li> </ol> <p>\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u89c1\u5feb\u901f\u5f00\u59cb\u3002</p>"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-jdbc/#2","title":"\u6b65\u9aa4 2. \u4fee\u6539\u914d\u7f6e\u6587\u4ef6","text":"<p>\u7f16\u8bd1 Exchange \u540e\uff0c\u590d\u5236<code>target/classes/application.conf</code>\u6587\u4ef6\u8bbe\u7f6e JDBC \u6570\u636e\u6e90\u76f8\u5173\u7684\u914d\u7f6e\u3002\u5728\u672c\u793a\u4f8b\u4e2d\uff0c\u590d\u5236\u7684\u6587\u4ef6\u540d\u4e3a<code>jdbc_application.conf</code>\u3002\u5404\u4e2a\u914d\u7f6e\u9879\u7684\u8be6\u7ec6\u8bf4\u660e\u8bf7\u53c2\u89c1\u914d\u7f6e\u8bf4\u660e\u3002</p> <pre><code>{\n  # Spark \u76f8\u5173\u914d\u7f6e\n  spark: {\n    app: {\n      name: NebulaGraph Exchange 3.7.0\n    }\n    driver: {\n      cores: 1\n      maxResultSize: 1G\n    }\n    executor: {\n        memory:1G\n    }\n\n    cores: {\n      max: 16\n    }\n  }\n\n  # NebulaGraph \u76f8\u5173\u914d\u7f6e\n  nebula: {\n    address:{\n      # \u6307\u5b9a Graph \u670d\u52a1\u548c\u6240\u6709 Meta \u670d\u52a1\u7684 IP \u5730\u5740\u548c\u7aef\u53e3\u3002\n      # \u5982\u679c\u6709\u591a\u53f0\u670d\u52a1\u5668\uff0c\u5730\u5740\u4e4b\u95f4\u7528\u82f1\u6587\u9017\u53f7\uff08,\uff09\u5206\u9694\u3002\n      # \u683c\u5f0f\uff1a\"ip1:port\",\"ip2:port\",\"ip3:port\"\n      graph:[\"127.0.0.1:9669\"]\n      #\u4efb\u610f\u4e00\u4e2a Meta \u670d\u52a1\u7684\u5730\u5740\u3002\n      #\u5982\u679c\u60a8\u7684 NebulaGraph \u5728\u865a\u62df\u7f51\u7edc\u4e2d\uff0c\u5982k8s\uff0c\u8bf7\u914d\u7f6e Leader Meta\u7684\u5730\u5740\u3002\n      meta:[\"127.0.0.1:9559\"]\n    }\n\n    # \u6307\u5b9a\u62e5\u6709 NebulaGraph \u5199\u6743\u9650\u7684\u7528\u6237\u540d\u548c\u5bc6\u7801\u3002\n    user: root\n    pswd: nebula\n    # \u662f\u5426\u4f7f\u7528 RSA \u52a0\u5bc6\u7684\u5bc6\u7801\u3002\n    # enableRSA: true\n    # \u4f7f\u7528 RSA \u52a0\u5bc6\u5bc6\u7801\u65f6\u7684\u5bc6\u94a5\u3002\n    # privateKey: \"\"\n    # \u6307\u5b9a\u56fe\u7a7a\u95f4\u540d\u79f0\u3002\n    space: basketballplayer\n    connection: {\n      timeout: 3000\n      retry: 3\n    }\n    execution: {\n      retry: 3\n    }\n    error: {\n      max: 32\n      output: /tmp/errors\n    }\n    rate: {\n      limit: 1024\n      timeout: 1000\n    }\n  }\n\n  # \u5904\u7406\u70b9\n  tags: [\n    # \u8bbe\u7f6e Tag player \u76f8\u5173\u4fe1\u606f\u3002\n    {\n      # \u6307\u5b9a NebulaGraph \u4e2d\u5b9a\u4e49\u7684 Tag \u540d\u79f0\u3002\n      name: player\n      type: {\n        # \u6307\u5b9a\u6570\u636e\u6e90\uff0c\u4f7f\u7528 JDBC\u3002\n        source: jdbc\n\n        # \u6307\u5b9a\u5982\u4f55\u5c06\u70b9\u6570\u636e\u5bfc\u5165 NebulaGraph \uff1aClient \u6216 SST\u3002\n        sink: client\n      }\n\n      # JDBC \u6570\u636e\u6e90\u7684 URL\u3002\u793a\u4f8b\u4e3a MySql \u6570\u636e\u5e93\u3002\n      url:\"jdbc:mysql://127.0.0.1:3306/basketball?useUnicode=true&amp;characterEncoding=utf-8\"\n\n      # JDBC \u9a71\u52a8\u3002\n      driver:\"com.mysql.cj.jdbc.Driver\"\n\n      # \u6570\u636e\u5e93\u7528\u6237\u540d\u548c\u5bc6\u7801\u3002\n      user:\"root\"\n      password:\"12345\"\n\n      # \u626b\u63cf\u5355\u4e2a\u8868\u8bfb\u53d6\u6570\u636e\u3002\n      # nebula-exchange_spark_2.2 \u5fc5\u987b\u914d\u7f6e\u8be5\u53c2\u6570\uff0c\u8fd8\u53ef\u4ee5\u989d\u5916\u914d\u7f6e sentence\u3002\n      # nebula-exchange_spark_2.4 \u548c nebula-exchange_spark_3.0 \u53ef\u4ee5\u914d\u7f6e\u8be5\u53c2\u6570\uff0c\u4f46\u662f\u4e0d\u80fd\u548c sentence \u540c\u65f6\u914d\u7f6e\u3002\n      table:\"basketball.player\"\n\n      # \u901a\u8fc7\u67e5\u8be2\u8bed\u53e5\u8bfb\u53d6\u6570\u636e\u3002\n      # nebula-exchange_spark_2.2 \u53ef\u4ee5\u914d\u7f6e\u8be5\u53c2\u6570\u3002\u4e0d\u652f\u6301\u591a\u8868\u67e5\u8be2\u3002\u5728 from \u540e\u53ea\u9700\u8981\u5199\u8868\u540d\uff0c\u4e0d\u652f\u6301`\u5e93\u540d.\u8868\u540d`\u3002\n      # nebula-exchange_spark_2.4 \u548c nebula-exchange_spark_3.0 \u53ef\u4ee5\u914d\u7f6e\u8be5\u53c2\u6570\uff0c\u4f46\u662f\u4e0d\u80fd\u548c table \u540c\u65f6\u914d\u7f6e\u3002\u652f\u6301\u591a\u8868\u67e5\u8be2\u3002\n      # sentence:\"select playerid, age, name from player, team order by playerid\"\n\n      # \uff08\u53ef\u9009\uff09\u591a\u8fde\u63a5\u8bfb\u53d6\u53c2\u6570 \u53c2\u89c1 https://spark.apache.org/docs/latest/sql-data-sources-jdbc.html\n      partitionColumn:playerid    # \u53ef\u9009\u3002\u6570\u503c\u7c7b\u578b\u5fc5\u987b\u4e3a\u6570\u5b57\u3001\u65e5\u671f\u6216\u65f6\u95f4\u6233\u3002\n      lowerBound:1                # \u53ef\u9009\n      upperBound:5                # \u53ef\u9009\n      numPartitions:5             # \u53ef\u9009\n\n\n      fetchSize:2           # \u6bcf\u6b21\u8bf7\u6c42\u6570\u636e\u5e93\u8981\u8bfb\u53d6\u7684\u884c\u6570\u3002\n\n      # \u5728 fields \u91cc\u6307\u5b9a player \u8868\u4e2d\u7684\u5217\u540d\u79f0\uff0c\u5176\u5bf9\u5e94\u7684 value \u4f1a\u4f5c\u4e3a NebulaGraph \u4e2d\u6307\u5b9a\u5c5e\u6027\u3002\n      # fields \u548c nebula.fields \u91cc\u7684\u914d\u7f6e\u5fc5\u987b\u4e00\u4e00\u5bf9\u5e94\u3002\n      # \u5982\u679c\u9700\u8981\u6307\u5b9a\u591a\u4e2a\u5217\u540d\u79f0\uff0c\u7528\u82f1\u6587\u9017\u53f7\uff08,\uff09\u9694\u5f00\u3002\n      fields: [age,name]\n      nebula.fields: [age,name]\n\n      # \u6307\u5b9a\u8868\u4e2d\u67d0\u4e00\u5217\u6570\u636e\u4e3a NebulaGraph \u4e2d\u70b9 VID \u7684\u6765\u6e90\u3002\n      vertex: {\n        field:playerid\n      # udf:{\n      #            separator:\"_\"\n      #            oldColNames:[field-0,field-1,field-2]\n      #            newColName:new-field\n      #        }\n      # \u4e3a VID \u589e\u52a0\u6307\u5b9a\u7684\u524d\u7f00\u3002\u4f8b\u5982 VID \u4e3a 12345\uff0c\u589e\u52a0\u524d\u7f00 tag1 \u540e\u4e3a tag1_12345\u3002\u4e0b\u5212\u7ebf\u65e0\u6cd5\u4fee\u6539\u3002\n      # prefix:\"tag1\"\n      # \u5bf9 string \u7c7b\u578b\u7684 VID \u8fdb\u884c\u54c8\u5e0c\u5316\u64cd\u4f5c\u3002\n      # policy:hash\n      }\n\n      # \u6279\u91cf\u64cd\u4f5c\u7c7b\u578b\uff0c\u5305\u62ec INSERT\u3001UPDATE \u548c DELETE\u3002\u9ed8\u8ba4\u4e3a INSERT\u3002\n      #writeMode: INSERT\n\n      # \u6279\u91cf\u5220\u9664\u65f6\u662f\u5426\u5220\u9664\u8be5\u70b9\u5173\u8054\u7684\u51fa\u8fb9\u548c\u5165\u8fb9\u3002`writeMode`\u4e3a`DELETE`\u65f6\u8be5\u53c2\u6570\u751f\u6548\u3002\n      #deleteEdge: false\n\n      # \u5355\u6279\u6b21\u5199\u5165 NebulaGraph \u7684\u6570\u636e\u6761\u6570\u3002\n      batch: 256\n\n      # \u6570\u636e\u5199\u5165 NebulaGraph \u65f6\u9700\u8981\u521b\u5efa\u7684\u5206\u533a\u6570\u3002\n      partition: 32\n    }\n    # \u8bbe\u7f6e Tag team \u76f8\u5173\u4fe1\u606f\u3002\n    {\n      name: team\n      type: {\n        source: jdbc\n        sink: client\n      }\n\n\n      url:\"jdbc:mysql://127.0.0.1:3306/basketball?useUnicode=true&amp;characterEncoding=utf-8\"\n      driver:\"com.mysql.cj.jdbc.Driver\"\n      user:root\n      password:\"12345\"\n      table:team\n      sentence:\"select teamid, name from team order by teamid\"\n      partitionColumn:teamid    \n      lowerBound:1                \n      upperBound:5                \n      numPartitions:5             \n      fetchSize:2  \n\n      fields: [name]\n      nebula.fields: [name]\n      vertex: {\n        field: teamid\n      }\n      batch: 256\n      partition: 32\n    }\n\n  ]\n\n  # \u5904\u7406\u8fb9\u6570\u636e\n  edges: [\n    # \u8bbe\u7f6e Edge type follow \u76f8\u5173\u4fe1\u606f\n    {\n      # NebulaGraph \u4e2d\u5bf9\u5e94\u7684 Edge type \u540d\u79f0\u3002\n      name: follow\n\n      type: {\n        # \u6307\u5b9a\u6570\u636e\u6e90\u6587\u4ef6\u683c\u5f0f\uff0c\u8bbe\u7f6e\u4e3a JDBC\u3002\n        source: jdbc\n\n        # \u6307\u5b9a\u8fb9\u6570\u636e\u5bfc\u5165 NebulaGraph \u7684\u65b9\u5f0f\uff0c\n        # \u6307\u5b9a\u5982\u4f55\u5c06\u70b9\u6570\u636e\u5bfc\u5165 NebulaGraph \uff1aClient \u6216 SST\u3002\n        sink: client\n      }\n\n      url:\"jdbc:mysql://127.0.0.1:3306/basketball?useUnicode=true&amp;characterEncoding=utf-8\"\n      driver:\"com.mysql.cj.jdbc.Driver\"\n      user:root\n      password:\"12345\"\n\n      # \u626b\u63cf\u5355\u4e2a\u8868\u8bfb\u53d6\u6570\u636e\u3002\n      # nebula-exchange_spark_2.2 \u5fc5\u987b\u914d\u7f6e\u8be5\u53c2\u6570\uff0c\u8fd8\u53ef\u4ee5\u989d\u5916\u914d\u7f6e sentence\u3002\n      # nebula-exchange_spark_2.4 \u548c nebula-exchange_spark_3.0 \u53ef\u4ee5\u914d\u7f6e\u8be5\u53c2\u6570\uff0c\u4f46\u662f\u4e0d\u80fd\u548c sentence \u540c\u65f6\u914d\u7f6e\u3002\n      table:\"basketball.follow\"\n\n      # \u901a\u8fc7\u67e5\u8be2\u8bed\u53e5\u8bfb\u53d6\u6570\u636e\u3002\n      # nebula-exchange_spark_2.2 \u53ef\u4ee5\u914d\u7f6e\u8be5\u53c2\u6570\u3002\u4e0d\u652f\u6301\u591a\u8868\u67e5\u8be2\u3002\u5728 from \u540e\u53ea\u9700\u8981\u5199\u8868\u540d\uff0c\u4e0d\u652f\u6301`\u5e93\u540d.\u8868\u540d`\u3002\n      # nebula-exchange_spark_2.4 \u548c nebula-exchange_spark_3.0 \u53ef\u4ee5\u914d\u7f6e\u8be5\u53c2\u6570\uff0c\u4f46\u662f\u4e0d\u80fd\u548c table \u540c\u65f6\u914d\u7f6e\u3002\u652f\u6301\u591a\u8868\u67e5\u8be2\u3002\n      # sentence:\"select src_player,dst_player,degree from follow order by src_player\"\n\n      partitionColumn:src_player    \n      lowerBound:1                \n      upperBound:5                \n      numPartitions:5             \n      fetchSize:2  \n\n      # \u5728 fields \u91cc\u6307\u5b9a follow \u8868\u4e2d\u7684\u5217\u540d\u79f0\uff0c\u5176\u5bf9\u5e94\u7684 value \u4f1a\u4f5c\u4e3a NebulaGraph \u4e2d\u6307\u5b9a\u5c5e\u6027\u3002\n      # fields \u548c nebula.fields \u91cc\u7684\u914d\u7f6e\u5fc5\u987b\u4e00\u4e00\u5bf9\u5e94\u3002\n      # \u5982\u679c\u9700\u8981\u6307\u5b9a\u591a\u4e2a\u5217\u540d\u79f0\uff0c\u7528\u82f1\u6587\u9017\u53f7\uff08,\uff09\u9694\u5f00\u3002\n      fields: [degree]\n      nebula.fields: [degree]\n\n      # \u5728 source \u91cc\uff0c\u5c06 follow \u8868\u4e2d\u67d0\u4e00\u5217\u4f5c\u4e3a\u8fb9\u7684\u8d77\u59cb\u70b9\u6570\u636e\u6e90\u3002\n      # \u5728 target \u91cc\uff0c\u5c06 follow \u8868\u4e2d\u67d0\u4e00\u5217\u4f5c\u4e3a\u8fb9\u7684\u76ee\u7684\u70b9\u6570\u636e\u6e90\u3002\n      source: {\n        field: src_player\n      # udf:{\n      #            separator:\"_\"\n      #            oldColNames:[field-0,field-1,field-2]\n      #            newColName:new-field\n      #        }\n      # \u4e3a VID \u589e\u52a0\u6307\u5b9a\u7684\u524d\u7f00\u3002\u4f8b\u5982 VID \u4e3a 12345\uff0c\u589e\u52a0\u524d\u7f00 tag1 \u540e\u4e3a tag1_12345\u3002\u4e0b\u5212\u7ebf\u65e0\u6cd5\u4fee\u6539\u3002\n      # prefix:\"tag1\"\n      # \u5bf9 string \u7c7b\u578b\u7684 VID \u8fdb\u884c\u54c8\u5e0c\u5316\u64cd\u4f5c\u3002\n      # policy:hash\n      }\n\n      target: {\n        field: dst_player\n      # udf:{\n      #            separator:\"_\"\n      #            oldColNames:[field-0,field-1,field-2]\n      #            newColName:new-field\n      #        }\n      # \u4e3a VID \u589e\u52a0\u6307\u5b9a\u7684\u524d\u7f00\u3002\u4f8b\u5982 VID \u4e3a 12345\uff0c\u589e\u52a0\u524d\u7f00 tag1 \u540e\u4e3a tag1_12345\u3002\u4e0b\u5212\u7ebf\u65e0\u6cd5\u4fee\u6539\u3002\n      # prefix:\"tag1\"\n      # \u5bf9 string \u7c7b\u578b\u7684 VID \u8fdb\u884c\u54c8\u5e0c\u5316\u64cd\u4f5c\u3002\n      # policy:hash\n      }\n\n      # \u6307\u5b9a\u4e00\u4e2a\u5217\u4f5c\u4e3a rank \u7684\u6e90\uff08\u53ef\u9009\uff09\u3002\n      #ranking: rank\n\n      # \u6279\u91cf\u64cd\u4f5c\u7c7b\u578b\uff0c\u5305\u62ec INSERT\u3001UPDATE \u548c DELETE\u3002\u9ed8\u8ba4\u4e3a INSERT\u3002\n      #writeMode: INSERT\n\n      # \u5355\u6279\u6b21\u5199\u5165 NebulaGraph \u7684\u6570\u636e\u6761\u6570\u3002\n      batch: 256\n\n      # \u6570\u636e\u5199\u5165 NebulaGraph \u65f6\u9700\u8981\u521b\u5efa\u7684\u5206\u533a\u6570\u3002\n      partition: 32\n    }\n\n    # \u8bbe\u7f6e Edge type serve \u76f8\u5173\u4fe1\u606f\n    {\n      name: serve\n      type: {\n        source: jdbc\n        sink: client\n      }\n\n      url:\"jdbc:mysql://127.0.0.1:3306/basketball?useUnicode=true&amp;characterEncoding=utf-8\"\n      driver:\"com.mysql.cj.jdbc.Driver\"\n      user:root\n      password:\"12345\"\n      table:serve\n      sentence:\"select playerid,teamid,start_year,end_year from serve order by playerid\"\n      partitionColumn:playerid    \n      lowerBound:1                \n      upperBound:5                \n      numPartitions:5             \n      fetchSize:2\n\n      fields: [start_year,end_year]\n      nebula.fields: [start_year,end_year]\n      source: {\n        field: playerid\n      }\n      target: {\n        field: teamid\n      }\n\n      # \u6307\u5b9a\u4e00\u4e2a\u5217\u4f5c\u4e3a rank \u7684\u6e90\uff08\u53ef\u9009\uff09\u3002\n      #ranking: rank\n\n      batch: 256\n      partition: 32\n    }\n  ]\n}\n</code></pre>"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-jdbc/#4_nebulagraph","title":"\u6b65\u9aa4 4\uff1a\u5411 NebulaGraph \u5bfc\u5165\u6570\u636e","text":"<p>\u8fd0\u884c\u5982\u4e0b\u547d\u4ee4\u5c06 JDBC \u6570\u636e\u5bfc\u5165\u5230 NebulaGraph \u4e2d\u3002\u5173\u4e8e\u53c2\u6570\u7684\u8bf4\u660e\uff0c\u8bf7\u53c2\u89c1\u5bfc\u5165\u547d\u4ee4\u53c2\u6570\u3002</p> <pre><code>${SPARK_HOME}/bin/spark-submit --master \"local\" --class com.vesoft.nebula.exchange.Exchange &lt;nebula-exchange.jar_path&gt; -c &lt;jdbc_application.conf_path&gt; \n</code></pre> <p>Note</p> <p>JAR \u5305\u6709\u4e24\u79cd\u83b7\u53d6\u65b9\u5f0f\uff1a\u81ea\u884c\u7f16\u8bd1\u6216\u8005\u4ece maven \u4ed3\u5e93\u4e0b\u8f7d\u3002</p> <p>\u793a\u4f8b\uff1a</p> <pre><code>${SPARK_HOME}/bin/spark-submit  --master \"local\" --class com.vesoft.nebula.exchange.Exchange  /root/nebula-echange/nebula-exchange/target/nebula-exchange_spark_2.4-3.7.0.jar  -c /root/nebula-exchange/nebula-exchange/target/classes/jdbc_application.conf\n</code></pre> <p>\u7528\u6237\u53ef\u4ee5\u5728\u8fd4\u56de\u4fe1\u606f\u4e2d\u641c\u7d22<code>batchSuccess.&lt;tag_name/edge_name&gt;</code>\uff0c\u786e\u8ba4\u6210\u529f\u7684\u6570\u91cf\u3002\u4f8b\u5982<code>batchSuccess.follow: 300</code>\u3002</p>"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-jdbc/#5","title":"\u6b65\u9aa4 5\uff1a\uff08\u53ef\u9009\uff09\u9a8c\u8bc1\u6570\u636e","text":"<p>\u7528\u6237\u53ef\u4ee5\u5728 NebulaGraph \u5ba2\u6237\u7aef\uff08\u4f8b\u5982 NebulaGraph Studio\uff09\u4e2d\u6267\u884c\u67e5\u8be2\u8bed\u53e5\uff0c\u786e\u8ba4\u6570\u636e\u662f\u5426\u5df2\u5bfc\u5165\u3002\u4f8b\u5982\uff1a</p> <pre><code>LOOKUP ON player YIELD id(vertex);\n</code></pre> <p>\u7528\u6237\u4e5f\u53ef\u4ee5\u4f7f\u7528\u547d\u4ee4 <code>SHOW STATS</code> \u67e5\u770b\u7edf\u8ba1\u6570\u636e\u3002</p>"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-jdbc/#6_nebulagraph","title":"\u6b65\u9aa4 6\uff1a\uff08\u5982\u6709\uff09\u5728 NebulaGraph \u4e2d\u91cd\u5efa\u7d22\u5f15","text":"<p>\u5bfc\u5165\u6570\u636e\u540e\uff0c\u7528\u6237\u53ef\u4ee5\u5728 NebulaGraph \u4e2d\u91cd\u65b0\u521b\u5efa\u5e76\u91cd\u5efa\u7d22\u5f15\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1\u7d22\u5f15\u4ecb\u7ecd\u3002</p>"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-json/","title":"\u5bfc\u5165 JSON \u6587\u4ef6\u6570\u636e","text":"<p>\u672c\u6587\u4ee5\u4e00\u4e2a\u793a\u4f8b\u8bf4\u660e\u5982\u4f55\u4f7f\u7528 Exchange \u5c06\u5b58\u50a8\u5728 HDFS \u6216\u672c\u5730\u7684 JSON \u6587\u4ef6\u6570\u636e\u5bfc\u5165 NebulaGraph \u3002</p>"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-json/#_1","title":"\u6570\u636e\u96c6","text":"<p>\u672c\u6587\u4ee5 basketballplayer \u6570\u636e\u96c6\u4e3a\u4f8b\u3002\u90e8\u5206\u793a\u4f8b\u6570\u636e\u5982\u4e0b\uff1a</p> <ul> <li> <p>player</p> <pre><code>{\"id\":\"player100\",\"age\":42,\"name\":\"Tim Duncan\"}\n{\"id\":\"player101\",\"age\":36,\"name\":\"Tony Parker\"}\n{\"id\":\"player102\",\"age\":33,\"name\":\"LaMarcus Aldridge\"}\n{\"id\":\"player103\",\"age\":32,\"name\":\"Rudy Gay\"}\n...\n</code></pre> </li> </ul> <ul> <li> <p>team</p> <pre><code>{\"id\":\"team200\",\"name\":\"Warriors\"}\n{\"id\":\"team201\",\"name\":\"Nuggets\"}\n...\n</code></pre> </li> </ul> <ul> <li> <p>follow</p> <pre><code>{\"src\":\"player100\",\"dst\":\"player101\",\"degree\":95}\n{\"src\":\"player101\",\"dst\":\"player102\",\"degree\":90}\n...\n</code></pre> </li> </ul> <ul> <li> <p>serve</p> <pre><code>{\"src\":\"player100\",\"dst\":\"team204\",\"start_year\":\"1997\",\"end_year\":\"2016\"}\n{\"src\":\"player101\",\"dst\":\"team204\",\"start_year\":\"1999\",\"end_year\":\"2018\"}\n...\n</code></pre> </li> </ul>"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-json/#_2","title":"\u73af\u5883\u914d\u7f6e","text":"<p>\u672c\u6587\u793a\u4f8b\u5728 MacOS \u4e0b\u5b8c\u6210\uff0c\u4ee5\u4e0b\u662f\u76f8\u5173\u7684\u73af\u5883\u914d\u7f6e\u4fe1\u606f\uff1a</p> <ul> <li>\u786c\u4ef6\u89c4\u683c\uff1a<ul> <li>CPU\uff1a1.7 GHz Quad-Core Intel Core i7</li> <li>\u5185\u5b58\uff1a16 GB</li> </ul> </li> </ul> <ul> <li>Spark\uff1a2.3.0\uff0c\u5355\u673a\u7248</li> </ul> <ul> <li>Hadoop\uff1a2.9.2\uff0c\u4f2a\u5206\u5e03\u5f0f\u90e8\u7f72</li> </ul> <ul> <li>NebulaGraph \uff1amaster\u3002</li> </ul>"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-json/#_3","title":"\u524d\u63d0\u6761\u4ef6","text":"<p>\u5f00\u59cb\u5bfc\u5165\u6570\u636e\u4e4b\u524d\uff0c\u7528\u6237\u9700\u8981\u786e\u8ba4\u4ee5\u4e0b\u4fe1\u606f\uff1a</p> <ul> <li> <p>\u5df2\u7ecf\u5b89\u88c5\u90e8\u7f72 NebulaGraph  \u5e76\u83b7\u53d6\u5982\u4e0b\u4fe1\u606f\uff1a</p> <ul> <li>Graph \u670d\u52a1\u548c Meta \u670d\u52a1\u7684\u7684 IP \u5730\u5740\u548c\u7aef\u53e3\u3002</li> </ul> <ul> <li>\u62e5\u6709 NebulaGraph \u5199\u6743\u9650\u7684\u7528\u6237\u540d\u548c\u5bc6\u7801\u3002</li> </ul> </li> </ul> <ul> <li>\u5df2\u7ecf\u7f16\u8bd1 Exchange\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1\u7f16\u8bd1 Exchange\u3002\u672c\u793a\u4f8b\u4e2d\u4f7f\u7528 Exchange 3.7.0\u3002</li> </ul> <ul> <li>\u5df2\u7ecf\u5b89\u88c5 Spark\u3002</li> </ul> <ul> <li>\u4e86\u89e3 NebulaGraph \u4e2d\u521b\u5efa Schema \u7684\u4fe1\u606f\uff0c\u5305\u62ec Tag \u548c Edge type \u7684\u540d\u79f0\u3001\u5c5e\u6027\u7b49\u3002</li> </ul> <ul> <li>\u5982\u679c\u6587\u4ef6\u5b58\u50a8\u5728 HDFS \u4e0a\uff0c\u9700\u8981\u786e\u8ba4 Hadoop \u670d\u52a1\u8fd0\u884c\u6b63\u5e38\u3002</li> </ul> <ul> <li>\u5982\u679c\u6587\u4ef6\u5b58\u50a8\u5728\u672c\u5730\u4e14 NebulaGraph \u662f\u96c6\u7fa4\u67b6\u6784\uff0c\u9700\u8981\u5728\u96c6\u7fa4\u6bcf\u53f0\u673a\u5668\u672c\u5730\u76f8\u540c\u76ee\u5f55\u4e0b\u653e\u7f6e\u6587\u4ef6\u3002</li> </ul>"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-json/#_4","title":"\u64cd\u4f5c\u6b65\u9aa4","text":""},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-json/#1_nebulagraph_schema","title":"\u6b65\u9aa4 1\uff1a\u5728 NebulaGraph \u4e2d\u521b\u5efa Schema","text":"<p>\u5206\u6790\u6587\u4ef6\u4e2d\u7684\u6570\u636e\uff0c\u6309\u4ee5\u4e0b\u6b65\u9aa4\u5728 NebulaGraph \u4e2d\u521b\u5efa Schema\uff1a</p> <ol> <li> <p>\u786e\u8ba4 Schema \u8981\u7d20\u3002 NebulaGraph \u4e2d\u7684 Schema \u8981\u7d20\u5982\u4e0b\u8868\u6240\u793a\u3002</p> \u8981\u7d20 \u540d\u79f0 \u5c5e\u6027 Tag <code>player</code> <code>name string, age int</code> Tag <code>team</code> <code>name string</code> Edge Type <code>follow</code> <code>degree int</code> Edge Type <code>serve</code> <code>start_year int, end_year int</code> </li> <li> <p>\u4f7f\u7528 NebulaGraph Console \u521b\u5efa\u4e00\u4e2a\u56fe\u7a7a\u95f4 basketballplayer\uff0c\u5e76\u521b\u5efa\u4e00\u4e2a Schema\uff0c\u5982\u4e0b\u6240\u793a\u3002</p> <pre><code>## \u521b\u5efa\u56fe\u7a7a\u95f4\nnebula&gt; CREATE SPACE basketballplayer \\\n        (partition_num = 10, \\\n        replica_factor = 1, \\\n        vid_type = FIXED_STRING(30));\n\n## \u9009\u62e9\u56fe\u7a7a\u95f4 basketballplayer\nnebula&gt; USE basketballplayer;\n\n## \u521b\u5efa Tag player\nnebula&gt; CREATE TAG player(name string, age int);\n\n## \u521b\u5efa Tag team\nnebula&gt; CREATE TAG team(name string);\n\n## \u521b\u5efa Edge type follow\nnebula&gt; CREATE EDGE follow(degree int);\n\n## \u521b\u5efa Edge type serve\nnebula&gt; CREATE EDGE serve(start_year int, end_year int);\n</code></pre> </li> </ol> <p>\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u89c1\u5feb\u901f\u5f00\u59cb\u3002</p>"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-json/#2_json","title":"\u6b65\u9aa4 2\uff1a\u5904\u7406 JSON \u6587\u4ef6","text":"<p>\u786e\u8ba4\u4ee5\u4e0b\u4fe1\u606f\uff1a</p> <ol> <li> <p>\u5904\u7406 JSON \u6587\u4ef6\u4ee5\u6ee1\u8db3 Schema \u7684\u8981\u6c42\u3002</p> </li> <li> <p>\u83b7\u53d6 JSON \u6587\u4ef6\u5b58\u50a8\u8def\u5f84\u3002</p> </li> </ol>"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-json/#3","title":"\u6b65\u9aa4 3. \u4fee\u6539\u914d\u7f6e\u6587\u4ef6","text":"<p>\u7f16\u8bd1 Exchange \u540e\uff0c\u590d\u5236<code>target/classes/application.conf</code>\u6587\u4ef6\u8bbe\u7f6e JSON \u6570\u636e\u6e90\u76f8\u5173\u7684\u914d\u7f6e\u3002\u5728\u672c\u793a\u4f8b\u4e2d\uff0c\u590d\u5236\u7684\u6587\u4ef6\u540d\u4e3a<code>json_application.conf</code>\u3002\u5404\u4e2a\u914d\u7f6e\u9879\u7684\u8be6\u7ec6\u8bf4\u660e\u8bf7\u53c2\u89c1\u914d\u7f6e\u8bf4\u660e\u3002</p> <pre><code>{\n  # Spark \u76f8\u5173\u914d\u7f6e\n  spark: {\n    app: {\n      name: NebulaGraph Exchange 3.7.0\n    }\n    driver: {\n      cores: 1\n      maxResultSize: 1G\n    }\n    executor: {\n        memory:1G\n    }\n\n    cores: {\n      max: 16\n    }\n  }\n\n  # NebulaGraph \u76f8\u5173\u914d\u7f6e\n  nebula: {\n    address:{\n      # \u6307\u5b9a Graph \u670d\u52a1\u548c\u6240\u6709 Meta \u670d\u52a1\u7684 IP \u5730\u5740\u548c\u7aef\u53e3\u3002\n      # \u5982\u679c\u6709\u591a\u53f0\u670d\u52a1\u5668\uff0c\u5730\u5740\u4e4b\u95f4\u7528\u82f1\u6587\u9017\u53f7\uff08,\uff09\u5206\u9694\u3002\n      # \u683c\u5f0f\uff1a\"ip1:port\",\"ip2:port\",\"ip3:port\"\n      graph:[\"127.0.0.1:9669\"]\n      #\u4efb\u610f\u4e00\u4e2a Meta \u670d\u52a1\u7684\u5730\u5740\u3002\n      #\u5982\u679c\u60a8\u7684 NebulaGraph \u5728\u865a\u62df\u7f51\u7edc\u4e2d\uff0c\u5982k8s\uff0c\u8bf7\u914d\u7f6e Leader Meta\u7684\u5730\u5740\u3002\n      meta:[\"127.0.0.1:9559\"]\n    }\n\n    # \u6307\u5b9a\u62e5\u6709 NebulaGraph \u5199\u6743\u9650\u7684\u7528\u6237\u540d\u548c\u5bc6\u7801\u3002\n    user: root\n    pswd: nebula\n    # \u662f\u5426\u4f7f\u7528 RSA \u52a0\u5bc6\u7684\u5bc6\u7801\u3002\n    # enableRSA: true\n    # \u4f7f\u7528 RSA \u52a0\u5bc6\u5bc6\u7801\u65f6\u7684\u5bc6\u94a5\u3002\n    # privateKey: \"\"\n    # \u6307\u5b9a\u56fe\u7a7a\u95f4\u540d\u79f0\u3002\n    space: basketballplayer\n    connection: {\n      timeout: 3000\n      retry: 3\n    }\n    execution: {\n      retry: 3\n    }\n    error: {\n      max: 32\n      output: /tmp/errors\n    }\n    rate: {\n      limit: 1024\n      timeout: 1000\n    }\n  }\n\n  # \u5904\u7406\u70b9\n  tags: [\n    # \u8bbe\u7f6e Tag player \u76f8\u5173\u4fe1\u606f\u3002\n    {\n      # \u6307\u5b9a NebulaGraph \u4e2d\u5b9a\u4e49\u7684 Tag \u540d\u79f0\u3002\n      name: player\n      type: {\n        # \u6307\u5b9a\u6570\u636e\u6e90\uff0c\u4f7f\u7528 JSON\u3002\n        source: json\n\n        # \u6307\u5b9a\u5982\u4f55\u5c06\u70b9\u6570\u636e\u5bfc\u5165 NebulaGraph \uff1aClient \u6216 SST\u3002\n        sink: client\n      }\n\n      # \u6307\u5b9a JSON \u6587\u4ef6\u7684\u8def\u5f84\u3002\n      # \u5982\u679c\u6587\u4ef6\u5b58\u50a8\u5728 HDFS \u4e0a\uff0c\u7528\u53cc\u5f15\u53f7\u62ec\u8d77\u8def\u5f84\uff0c\u4ee5 hdfs://\u5f00\u5934\uff0c\u4f8b\u5982\"hdfs://ip:port/xx/xx\"\u3002\n      # \u5982\u679c\u6587\u4ef6\u5b58\u50a8\u5728\u672c\u5730\uff0c\u7528\u53cc\u5f15\u53f7\u62ec\u8d77\u8def\u5f84\uff0c\u4ee5 file://\u5f00\u5934\uff0c\u4f8b\u5982\"file:///tmp/xx.json\"\u3002\n      path: \"hdfs://192.168.*.*:9000/data/vertex_player.json\"\n\n      # \u5728 fields \u91cc\u6307\u5b9a JSON \u6587\u4ef6\u4e2d key \u540d\u79f0\uff0c\u5176\u5bf9\u5e94\u7684 value \u4f1a\u4f5c\u4e3a NebulaGraph \u4e2d\u6307\u5b9a\u5c5e\u6027\u7684\u6570\u636e\u6e90\u3002\n      # \u5982\u679c\u9700\u8981\u6307\u5b9a\u591a\u4e2a\u503c\uff0c\u7528\u82f1\u6587\u9017\u53f7\uff08,\uff09\u9694\u5f00\u3002\n      fields: [age,name]\n\n      # \u6307\u5b9a NebulaGraph \u4e2d\u5b9a\u4e49\u7684\u5c5e\u6027\u540d\u79f0\u3002\n      # fields \u4e0e nebula.fields \u7684\u987a\u5e8f\u5fc5\u987b\u4e00\u4e00\u5bf9\u5e94\u3002\n      nebula.fields: [age, name]\n\n      # \u6307\u5b9a\u4e00\u4e2a\u5217\u4f5c\u4e3a VID \u7684\u6e90\u3002\n      # vertex \u7684\u503c\u5fc5\u987b\u4e0e JSON \u6587\u4ef6\u4e2d\u7684\u5b57\u6bb5\u4fdd\u6301\u4e00\u81f4\u3002\n      # \u76ee\u524d\uff0cNebulaGraph  master\u4ec5\u652f\u6301\u5b57\u7b26\u4e32\u6216\u6574\u6570\u7c7b\u578b\u7684 VID\u3002\n      vertex: {\n        field:id\n      # udf:{\n      #            separator:\"_\"\n      #            oldColNames:[field-0,field-1,field-2]\n      #            newColName:new-field\n      #        }\n      # \u4e3a VID \u589e\u52a0\u6307\u5b9a\u7684\u524d\u7f00\u3002\u4f8b\u5982 VID \u4e3a 12345\uff0c\u589e\u52a0\u524d\u7f00 tag1 \u540e\u4e3a tag1_12345\u3002\u4e0b\u5212\u7ebf\u65e0\u6cd5\u4fee\u6539\u3002\n      # prefix:\"tag1\"\n      # \u5bf9 string \u7c7b\u578b\u7684 VID \u8fdb\u884c\u54c8\u5e0c\u5316\u64cd\u4f5c\u3002\n      # policy:hash\n      }\n\n      # \u6307\u5b9a\u5355\u6279\u6b21\u5199\u5165 NebulaGraph \u7684\u6700\u5927\u70b9\u6570\u91cf\u3002\n      batch: 256\n\n      # \u6570\u636e\u5199\u5165 NebulaGraph \u65f6\u9700\u8981\u521b\u5efa\u7684\u5206\u533a\u6570\u3002\n      partition: 32\n    }\n\n    # \u8bbe\u7f6e Tag team \u76f8\u5173\u4fe1\u606f\u3002\n    {\n      name: team\n      type: {\n        source: json\n        sink: client\n      }\n      path: \"hdfs://192.168.*.*:9000/data/vertex_team.json\"\n      fields: [name]\n      nebula.fields: [name]\n      vertex: {\n        field:id\n      }\n      batch: 256\n      partition: 32\n    }\n\n    # \u5982\u679c\u9700\u8981\u6dfb\u52a0\u66f4\u591a\u70b9\uff0c\u8bf7\u53c2\u8003\u524d\u9762\u7684\u914d\u7f6e\u8fdb\u884c\u6dfb\u52a0\u3002\n  ]\n  # \u5904\u7406\u8fb9\n  edges: [\n    # \u8bbe\u7f6e Edge type follow \u76f8\u5173\u4fe1\u606f\u3002\n    {\n      # \u6307\u5b9a NebulaGraph \u4e2d\u5b9a\u4e49\u7684 Edge type \u540d\u79f0\u3002\n      name: follow\n      type: {\n        # \u6307\u5b9a\u6570\u636e\u6e90\uff0c\u4f7f\u7528 JSON\u3002\n        source: json\n\n        # \u6307\u5b9a\u5982\u4f55\u5c06\u70b9\u6570\u636e\u5bfc\u5165 NebulaGraph \uff1aClient \u6216 SST\u3002\n        sink: client\n      }\n\n      # \u6307\u5b9a JSON \u6587\u4ef6\u7684\u8def\u5f84\u3002\n      # \u5982\u679c\u6587\u4ef6\u5b58\u50a8\u5728 HDFS \u4e0a\uff0c\u7528\u53cc\u5f15\u53f7\u62ec\u8d77\u8def\u5f84\uff0c\u4ee5 hdfs://\u5f00\u5934\uff0c\u4f8b\u5982\"hdfs://ip:port/xx/xx\"\u3002\n      # \u5982\u679c\u6587\u4ef6\u5b58\u50a8\u5728\u672c\u5730\uff0c\u7528\u53cc\u5f15\u53f7\u62ec\u8d77\u8def\u5f84\uff0c\u4ee5 file://\u5f00\u5934\uff0c\u4f8b\u5982\"file:///tmp/xx.json\"\u3002\n      path: \"hdfs://192.168.*.*:9000/data/edge_follow.json\"\n\n      # \u5728 fields \u91cc\u6307\u5b9a JSON \u6587\u4ef6\u4e2d key \u540d\u79f0\uff0c\u5176\u5bf9\u5e94\u7684 value \u4f1a\u4f5c\u4e3a NebulaGraph \u4e2d\u6307\u5b9a\u5c5e\u6027\u7684\u6570\u636e\u6e90\u3002\n      # \u5982\u679c\u9700\u8981\u6307\u5b9a\u591a\u4e2a\u503c\uff0c\u7528\u82f1\u6587\u9017\u53f7\uff08,\uff09\u9694\u5f00\u3002\n      fields: [degree]\n\n      # \u6307\u5b9a NebulaGraph \u4e2d\u5b9a\u4e49\u7684\u5c5e\u6027\u540d\u79f0\u3002\n      # fields \u4e0e nebula.fields \u7684\u987a\u5e8f\u5fc5\u987b\u4e00\u4e00\u5bf9\u5e94\u3002\n      nebula.fields: [degree]\n\n      # \u6307\u5b9a\u4e00\u4e2a\u5217\u4f5c\u4e3a\u8d77\u59cb\u70b9\u548c\u76ee\u7684\u70b9\u7684\u6e90\u3002\n      # vertex \u7684\u503c\u5fc5\u987b\u4e0e JSON \u6587\u4ef6\u4e2d\u7684\u5b57\u6bb5\u4fdd\u6301\u4e00\u81f4\u3002\n      # \u76ee\u524d\uff0cNebulaGraph  master\u4ec5\u652f\u6301\u5b57\u7b26\u4e32\u6216\u6574\u6570\u7c7b\u578b\u7684 VID\u3002\n      source: {\n        field: src\n      # udf:{\n      #            separator:\"_\"\n      #            oldColNames:[field-0,field-1,field-2]\n      #            newColName:new-field\n      #        }\n      # \u4e3a VID \u589e\u52a0\u6307\u5b9a\u7684\u524d\u7f00\u3002\u4f8b\u5982 VID \u4e3a 12345\uff0c\u589e\u52a0\u524d\u7f00 tag1 \u540e\u4e3a tag1_12345\u3002\u4e0b\u5212\u7ebf\u65e0\u6cd5\u4fee\u6539\u3002\n      # prefix:\"tag1\"\n      # \u5bf9 string \u7c7b\u578b\u7684 VID \u8fdb\u884c\u54c8\u5e0c\u5316\u64cd\u4f5c\u3002\n      # policy:hash\n      }\n      target: {\n        field: dst\n      # udf:{\n      #            separator:\"_\"\n      #            oldColNames:[field-0,field-1,field-2]\n      #            newColName:new-field\n      #        }\n      # \u4e3a VID \u589e\u52a0\u6307\u5b9a\u7684\u524d\u7f00\u3002\u4f8b\u5982 VID \u4e3a 12345\uff0c\u589e\u52a0\u524d\u7f00 tag1 \u540e\u4e3a tag1_12345\u3002\u4e0b\u5212\u7ebf\u65e0\u6cd5\u4fee\u6539\u3002\n      # prefix:\"tag1\"\n      # \u5bf9 string \u7c7b\u578b\u7684 VID \u8fdb\u884c\u54c8\u5e0c\u5316\u64cd\u4f5c\u3002\n      # policy:hash\n      }\n\n      # \u6307\u5b9a\u4e00\u4e2a\u5217\u4f5c\u4e3a rank \u7684\u6e90\uff08\u53ef\u9009\uff09\u3002\n      #ranking: rank\n\n      # \u6279\u91cf\u64cd\u4f5c\u7c7b\u578b\uff0c\u5305\u62ec INSERT\u3001UPDATE \u548c DELETE\u3002\u9ed8\u8ba4\u4e3a INSERT\u3002\n      #writeMode: INSERT\n\n      # \u6307\u5b9a\u5355\u6279\u6b21\u5199\u5165 NebulaGraph \u7684\u6700\u5927\u8fb9\u6570\u91cf\u3002\n      batch: 256\n\n      # \u6570\u636e\u5199\u5165 NebulaGraph \u65f6\u9700\u8981\u521b\u5efa\u7684\u5206\u533a\u6570\u3002\n      partition: 32\n    }\n\n    # \u8bbe\u7f6e Edge type serve \u76f8\u5173\u4fe1\u606f\u3002\n    {\n      name: serve\n      type: {\n        source: json\n        sink: client\n      }\n      path: \"hdfs://192.168.*.*:9000/data/edge_serve.json\"\n      fields: [start_year,end_year]\n      nebula.fields: [start_year, end_year]\n      source: {\n        field: src\n      }\n      target: {\n        field: dst\n      }\n      batch: 256\n      partition: 32\n    }\n\n  ]\n  # \u5982\u679c\u9700\u8981\u6dfb\u52a0\u66f4\u591a\u8fb9\uff0c\u8bf7\u53c2\u8003\u524d\u9762\u7684\u914d\u7f6e\u8fdb\u884c\u6dfb\u52a0\u3002\n}\n</code></pre>"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-json/#4_nebulagraph","title":"\u6b65\u9aa4 4\uff1a\u5411 NebulaGraph \u5bfc\u5165\u6570\u636e","text":"<p>\u8fd0\u884c\u5982\u4e0b\u547d\u4ee4\u5c06 JSON \u6587\u4ef6\u6570\u636e\u5bfc\u5165\u5230 NebulaGraph \u4e2d\u3002\u5173\u4e8e\u53c2\u6570\u7684\u8bf4\u660e\uff0c\u8bf7\u53c2\u89c1\u5bfc\u5165\u547d\u4ee4\u53c2\u6570\u3002</p> <pre><code>${SPARK_HOME}/bin/spark-submit --master \"local\" --class com.vesoft.nebula.exchange.Exchange &lt;nebula-exchange.jar_path&gt; -c &lt;json_application.conf_path&gt; \n</code></pre> <p>Note</p> <p>JAR \u5305\u6709\u4e24\u79cd\u83b7\u53d6\u65b9\u5f0f\uff1a\u81ea\u884c\u7f16\u8bd1\u6216\u8005\u4ece maven \u4ed3\u5e93\u4e0b\u8f7d\u3002</p> <p>\u793a\u4f8b\uff1a</p> <pre><code>${SPARK_HOME}/bin/spark-submit  --master \"local\" --class com.vesoft.nebula.exchange.Exchange  /root/nebula-echange/nebula-exchange/target/nebula-exchange_spark_2.4-3.7.0.jar  -c /root/nebula-exchange/nebula-exchange/target/classes/json_application.conf\n</code></pre> <p>\u7528\u6237\u53ef\u4ee5\u5728\u8fd4\u56de\u4fe1\u606f\u4e2d\u641c\u7d22<code>batchSuccess.&lt;tag_name/edge_name&gt;</code>\uff0c\u786e\u8ba4\u6210\u529f\u7684\u6570\u91cf\u3002\u4f8b\u5982<code>batchSuccess.follow: 300</code>\u3002</p>"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-json/#5","title":"\u6b65\u9aa4 5\uff1a\uff08\u53ef\u9009\uff09\u9a8c\u8bc1\u6570\u636e","text":"<p>\u7528\u6237\u53ef\u4ee5\u5728 NebulaGraph \u5ba2\u6237\u7aef\uff08\u4f8b\u5982 NebulaGraph Studio\uff09\u4e2d\u6267\u884c\u67e5\u8be2\u8bed\u53e5\uff0c\u786e\u8ba4\u6570\u636e\u662f\u5426\u5df2\u5bfc\u5165\u3002\u4f8b\u5982\uff1a</p> <pre><code>LOOKUP ON player YIELD id(vertex);\n</code></pre> <p>\u7528\u6237\u4e5f\u53ef\u4ee5\u4f7f\u7528\u547d\u4ee4 <code>SHOW STATS</code> \u67e5\u770b\u7edf\u8ba1\u6570\u636e\u3002</p>"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-json/#6_nebulagraph","title":"\u6b65\u9aa4 6\uff1a\uff08\u5982\u6709\uff09\u5728 NebulaGraph \u4e2d\u91cd\u5efa\u7d22\u5f15","text":"<p>\u5bfc\u5165\u6570\u636e\u540e\uff0c\u7528\u6237\u53ef\u4ee5\u5728 NebulaGraph \u4e2d\u91cd\u65b0\u521b\u5efa\u5e76\u91cd\u5efa\u7d22\u5f15\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1\u7d22\u5f15\u4ecb\u7ecd\u3002</p>"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-kafka/","title":"\u5bfc\u5165 Kafka \u6570\u636e","text":"<p>\u672c\u6587\u7b80\u5355\u8bf4\u660e\u5982\u4f55\u4f7f\u7528 Exchange \u5c06\u5b58\u50a8\u5728 Kafka \u4e0a\u7684\u6570\u636e\u5bfc\u5165 NebulaGraph \u3002</p> <p>Compatibility</p> <p>\u5bfc\u5165 Kafka \u6570\u636e\u65f6\u8bf7\u4f7f\u7528 Exchange 3.5.0/3.3.0/3.0.0 \u7248\u672c\u30023.4.0 \u7248\u672c\u589e\u52a0\u4e86\u5bf9\u5bfc\u5165\u6570\u636e\u7684\u7f13\u5b58\uff0c\u4e0d\u652f\u6301\u6d41\u5f0f\u6570\u636e\u5bfc\u5165\u3002</p>"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-kafka/#_1","title":"\u73af\u5883\u914d\u7f6e","text":"<p>\u672c\u6587\u793a\u4f8b\u5728 MacOS \u4e0b\u5b8c\u6210\uff0c\u4ee5\u4e0b\u662f\u76f8\u5173\u7684\u73af\u5883\u914d\u7f6e\u4fe1\u606f\uff1a</p> <ul> <li>\u786c\u4ef6\u89c4\u683c\uff1a<ul> <li>CPU\uff1a1.7 GHz Quad-Core Intel Core i7</li> <li>\u5185\u5b58\uff1a16 GB</li> </ul> </li> </ul> <ul> <li>Spark\uff1a2.4.7\uff0c\u5355\u673a\u7248</li> </ul> <ul> <li>NebulaGraph \uff1amaster\u3002</li> </ul>"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-kafka/#_2","title":"\u524d\u63d0\u6761\u4ef6","text":"<p>\u5f00\u59cb\u5bfc\u5165\u6570\u636e\u4e4b\u524d\uff0c\u7528\u6237\u9700\u8981\u786e\u8ba4\u4ee5\u4e0b\u4fe1\u606f\uff1a</p> <ul> <li> <p>\u5df2\u7ecf\u5b89\u88c5\u90e8\u7f72 NebulaGraph  \u5e76\u83b7\u53d6\u5982\u4e0b\u4fe1\u606f\uff1a</p> <ul> <li>Graph \u670d\u52a1\u548c Meta \u670d\u52a1\u7684\u7684 IP \u5730\u5740\u548c\u7aef\u53e3\u3002</li> </ul> <ul> <li>\u62e5\u6709 NebulaGraph \u5199\u6743\u9650\u7684\u7528\u6237\u540d\u548c\u5bc6\u7801\u3002</li> </ul> </li> </ul> <ul> <li>\u5df2\u7ecf\u7f16\u8bd1 Exchange\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1\u7f16\u8bd1 Exchange\u3002\u672c\u793a\u4f8b\u4e2d\u4f7f\u7528 Exchange 3.7.0\u3002</li> </ul> <ul> <li>\u5df2\u7ecf\u5b89\u88c5 Spark\u3002</li> </ul> <ul> <li> <p>\u4ee5\u4e0b JAR \u5305\u5df2\u7ecf\u4e0b\u8f7d\u5e76\u653e\u7f6e\u5728 Spark \u7684<code>SPARK_HOME/jars</code>\u76ee\u5f55\u4e0b\uff1a</p> <ul> <li>spark-streaming-kafka_xxx.jar</li> </ul> <ul> <li>spark-sql-kafka-0-10_xxx.jar</li> </ul> <ul> <li>kafka-clients-xxx.jar</li> </ul> </li> </ul> <ul> <li>\u4e86\u89e3 NebulaGraph \u4e2d\u521b\u5efa Schema \u7684\u4fe1\u606f\uff0c\u5305\u62ec Tag \u548c Edge type \u7684\u540d\u79f0\u3001\u5c5e\u6027\u7b49\u3002</li> </ul> <ul> <li>\u5df2\u7ecf\u5b89\u88c5\u5e76\u5f00\u542f Kafka \u670d\u52a1\u3002</li> </ul>"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-kafka/#_3","title":"\u6ce8\u610f\u4e8b\u9879","text":"<ul> <li>\u5bfc\u5165 Kafka \u6570\u636e\u65f6\u53ea\u652f\u6301 Client \u6a21\u5f0f\uff0c\u5373\u53c2\u6570<code>tags.type.sink</code>\u548c<code>edges.type.sink</code>\u7684\u503c\u4e3a<code>client</code>\u3002</li> </ul> <ul> <li>\u5bfc\u5165 Kafka \u6570\u636e\u65f6\u8bf7\u52ff\u4f7f\u7528 Exchange 3.4.0 \u7248\u672c\uff0c\u8be5\u7248\u672c\u589e\u52a0\u4e86\u5bf9\u5bfc\u5165\u6570\u636e\u7684\u7f13\u5b58\uff0c\u4e0d\u652f\u6301\u6d41\u5f0f\u6570\u636e\u5bfc\u5165\u3002\u8bf7\u4f7f\u7528 Exchange 3.0.0\u30013.3.0\u30013.5.0 \u7248\u672c\u3002</li> </ul>"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-kafka/#_4","title":"\u64cd\u4f5c\u6b65\u9aa4","text":""},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-kafka/#1_nebulagraph_schema","title":"\u6b65\u9aa4 1\uff1a\u5728 NebulaGraph \u4e2d\u521b\u5efa Schema","text":"<p>\u5206\u6790\u6570\u636e\uff0c\u6309\u4ee5\u4e0b\u6b65\u9aa4\u5728 NebulaGraph \u4e2d\u521b\u5efa Schema\uff1a</p> <ol> <li> <p>\u786e\u8ba4 Schema \u8981\u7d20\u3002 NebulaGraph \u4e2d\u7684 Schema \u8981\u7d20\u5982\u4e0b\u8868\u6240\u793a\u3002</p> \u8981\u7d20 \u540d\u79f0 \u5c5e\u6027 Tag <code>player</code> <code>name string, age int</code> Tag <code>team</code> <code>name string</code> Edge Type <code>follow</code> <code>degree int</code> Edge Type <code>serve</code> <code>start_year int, end_year int</code> </li> <li> <p>\u5728 NebulaGraph \u4e2d\u521b\u5efa\u4e00\u4e2a\u56fe\u7a7a\u95f4 basketballplayer\uff0c\u5e76\u521b\u5efa\u4e00\u4e2a Schema\uff0c\u5982\u4e0b\u6240\u793a\u3002</p> <pre><code>## \u521b\u5efa\u56fe\u7a7a\u95f4\nnebula&gt; CREATE SPACE basketballplayer \\\n        (partition_num = 10, \\\n        replica_factor = 1, \\\n        vid_type = FIXED_STRING(30));\n\n## \u9009\u62e9\u56fe\u7a7a\u95f4 basketballplayer\nnebula&gt; USE basketballplayer;\n\n## \u521b\u5efa Tag player\nnebula&gt; CREATE TAG player(name string, age int);\n\n## \u521b\u5efa Tag team\nnebula&gt; CREATE TAG team(name string);\n\n## \u521b\u5efa Edge type follow\nnebula&gt; CREATE EDGE follow(degree int);\n\n## \u521b\u5efa Edge type serve\nnebula&gt; CREATE EDGE serve(start_year int, end_year int);\n</code></pre> </li> </ol> <p>\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u89c1\u5feb\u901f\u5f00\u59cb\u3002</p>"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-kafka/#2","title":"\u6b65\u9aa4 2\uff1a\u4fee\u6539\u914d\u7f6e\u6587\u4ef6","text":"<p>\u7f16\u8bd1 Exchange \u540e\uff0c\u590d\u5236<code>target/classes/application.conf</code>\u6587\u4ef6\u8bbe\u7f6e Kafka \u6570\u636e\u6e90\u76f8\u5173\u7684\u914d\u7f6e\u3002\u5728\u672c\u793a\u4f8b\u4e2d\uff0c\u590d\u5236\u7684\u6587\u4ef6\u540d\u4e3a<code>kafka_application.conf</code>\u3002\u5404\u4e2a\u914d\u7f6e\u9879\u7684\u8be6\u7ec6\u8bf4\u660e\u8bf7\u53c2\u89c1\u914d\u7f6e\u8bf4\u660e\u3002</p> <p>Note</p> <p>\u5bfc\u5165 Kafka \u6570\u636e\u65f6\uff0c\u4e00\u4e2a\u914d\u7f6e\u6587\u4ef6\u53ea\u80fd\u5904\u7406\u4e00\u4e2a Tag \u6216 Edge type\u3002\u5982\u679c\u6709\u591a\u4e2a Tag \u6216 Edge type\uff0c\u9700\u8981\u521b\u5efa\u591a\u4e2a\u914d\u7f6e\u6587\u4ef6\u3002</p> <pre><code>{\n  # Spark \u76f8\u5173\u914d\u7f6e\n  spark: {\n    app: {\n      name: NebulaGraph Exchange 3.7.0\n    }\n    driver: {\n      cores: 1\n      maxResultSize: 1G\n    }\n    cores: {\n      max: 16\n    }\n  }\n\n  # NebulaGraph \u76f8\u5173\u914d\u7f6e\n  nebula: {\n    address:{\n      # \u4ee5\u4e0b\u4e3a NebulaGraph \u7684 Graph \u670d\u52a1\u548c Meta \u670d\u52a1\u6240\u5728\u673a\u5668\u7684 IP \u5730\u5740\u53ca\u7aef\u53e3\u3002\n      # \u5982\u679c\u6709\u591a\u4e2a\u5730\u5740\uff0c\u683c\u5f0f\u4e3a \"ip1:port\",\"ip2:port\",\"ip3:port\"\u3002\n      # \u4e0d\u540c\u5730\u5740\u4e4b\u95f4\u4ee5\u82f1\u6587\u9017\u53f7 (,) \u9694\u5f00\u3002\n      graph:[\"127.0.0.1:9669\"]\n      #\u4efb\u610f\u4e00\u4e2a Meta \u670d\u52a1\u7684\u5730\u5740\u3002\n      #\u5982\u679c\u60a8\u7684 NebulaGraph \u5728\u865a\u62df\u7f51\u7edc\u4e2d\uff0c\u5982k8s\uff0c\u8bf7\u914d\u7f6e Leader Meta\u7684\u5730\u5740\u3002\n      meta:[\"127.0.0.1:9559\"]\n    }\n    # \u586b\u5199\u7684\u8d26\u53f7\u5fc5\u987b\u62e5\u6709 NebulaGraph \u76f8\u5e94\u56fe\u7a7a\u95f4\u7684\u5199\u6570\u636e\u6743\u9650\u3002\n    user: root\n    pswd: nebula\n    # \u662f\u5426\u4f7f\u7528 RSA \u52a0\u5bc6\u7684\u5bc6\u7801\u3002\n    # enableRSA: true\n    # \u4f7f\u7528 RSA \u52a0\u5bc6\u5bc6\u7801\u65f6\u7684\u5bc6\u94a5\u3002\n    # privateKey: \"\"\n    # \u586b\u5199 NebulaGraph \u4e2d\u9700\u8981\u5199\u5165\u6570\u636e\u7684\u56fe\u7a7a\u95f4\u540d\u79f0\u3002\n    space: basketballplayer\n    connection: {\n      timeout: 3000\n      retry: 3\n    }\n    execution: {\n      retry: 3\n    }\n    error: {\n      max: 32\n      output: /tmp/errors\n    }\n    rate: {\n      limit: 1024\n      timeout: 1000\n    }\n  }\n  # \u5904\u7406\u70b9\n  tags: [\n    # \u8bbe\u7f6e Tag player \u76f8\u5173\u4fe1\u606f\u3002\n    {\n      # NebulaGraph \u4e2d\u5bf9\u5e94\u7684 Tag \u540d\u79f0\u3002\n      name: player\n      type: {\n        # \u6307\u5b9a\u6570\u636e\u6e90\u6587\u4ef6\u683c\u5f0f\uff0c\u8bbe\u7f6e\u4e3a Kafka\u3002\n        source: kafka\n        # \u6307\u5b9a\u5982\u4f55\u5c06\u6570\u636e\u5bfc\u5165 NebulaGraph \u3002\u53ea\u652f\u6301 Client\u3002\n        sink: client\n      }\n      # Kafka \u670d\u52a1\u5668\u5730\u5740\u3002\n      service: \"127.0.0.1:9092\"\n      # \u6d88\u606f\u7c7b\u522b\u3002\n      topic: \"topic_name1\"\n\n      # \u5982\u679c Kafka \u4f7f\u7528 Kerberos \u8fdb\u884c\u5b89\u5168\u8ba4\u8bc1\uff0c\u9700\u8981\u8bbe\u7f6e\u4ee5\u4e0b\u53c2\u6570\u3002\u5982\u679c Kafka \u4f7f\u7528 SASL \u6216 SASL_PLAINTEXT \u8fdb\u884c\u5b89\u5168\u8ba4\u8bc1\uff0c\u65e0\u9700\u8bbe\u7f6e kerberos \u548c kerberosServiceName\u3002\n      #securityProtocol: SASL_PLAINTEXT\n      #mechanism: GASSAPI\n      #kerberos: true\n      #kerberosServiceName: kafka\n\n      # \u5728 fields \u91cc\u6307\u5b9a Kafka value \u4e2d\u7684\u5b57\u6bb5\u540d\u79f0\uff0c\u591a\u4e2a\u5b57\u6bb5\u7528\u82f1\u6587\u9017\u53f7\uff08,\uff09\u9694\u5f00\u3002Spark Structured Streaming \u8bfb\u53d6 Kafka \u6570\u636e\u540e\u4f1a\u5c06\u5176\u4ee5 JSON \u683c\u5f0f\u5b58\u50a8\u4e8e value \u5b57\u6bb5\u4e2d\uff0c\u800c\u8fd9\u91cc\u7684 fields \u8981\u914d\u7f6e JSON \u7684 key \u540d\u3002\u793a\u4f8b\u5982\u4e0b\uff1a\n      fields: [personName, personAge]\n      # \u8bbe\u7f6e\u4e0e fields \u4e2d\u7684 key \u5bf9\u5e94\u7684 NebulaGraph \u5c5e\u6027\u540d\uff0ckey \u7684 value \u5c06\u4fdd\u5b58\u4e3a\u76f8\u5e94\u7684\u5c5e\u6027\u503c\u3002\u4e0b\u65b9\u8bbe\u7f6e\u4f1a\u5c06 personName \u7684 value \u4fdd\u5b58\u5230 NebulaGraph \u4e2d\u7684 name \u5c5e\u6027\uff0cpersonAge \u7684 value \u5219\u4fdd\u5b58\u5230 age \u5c5e\u6027\u3002\n      nebula.fields: [name, age]\n\n      # \u6307\u5b9a\u8868\u4e2d\u67d0\u4e00\u5217\u6570\u636e\u4e3a NebulaGraph \u4e2d\u70b9 VID \u7684\u6765\u6e90\u3002\n      # \u8fd9\u91cc\u7684\u503c key \u548c\u4e0a\u9762\u7684 key \u91cd\u590d\uff0c\u8868\u793a key \u65e2\u4f5c\u4e3a VID\uff0c\u4e5f\u4f5c\u4e3a\u5c5e\u6027 name\u3002\n      vertex:{\n          field:personId\n      # udf:{\n      #            separator:\"_\"\n      #            oldColNames:[field-0,field-1,field-2]\n      #            newColName:new-field\n      #        }\n      # \u4e3a VID \u589e\u52a0\u6307\u5b9a\u7684\u524d\u7f00\u3002\u4f8b\u5982 VID \u4e3a 12345\uff0c\u589e\u52a0\u524d\u7f00 tag1 \u540e\u4e3a tag1_12345\u3002\u4e0b\u5212\u7ebf\u65e0\u6cd5\u4fee\u6539\u3002\n      # prefix:\"tag1\"\n      # \u5bf9 string \u7c7b\u578b\u7684 VID \u8fdb\u884c\u54c8\u5e0c\u5316\u64cd\u4f5c\u3002\n      # policy:hash\n      }\n\n      # \u6279\u91cf\u64cd\u4f5c\u7c7b\u578b\uff0c\u5305\u62ec INSERT\u3001UPDATE \u548c DELETE\u3002\u9ed8\u8ba4\u4e3a INSERT\u3002\n      #writeMode: INSERT\n\n      # \u5355\u6279\u6b21\u5199\u5165 NebulaGraph \u7684\u6570\u636e\u6761\u6570\u3002\n      batch: 10\n\n      # \u6570\u636e\u5199\u5165 NebulaGraph \u65f6\u9700\u8981\u521b\u5efa\u7684\u5206\u533a\u6570\u3002\n      partition: 10\n      # \u8bfb\u53d6\u6d88\u606f\u7684\u95f4\u9694\u3002\u5355\u4f4d\uff1a\u79d2\u3002\n      interval.seconds: 10\n      # \u6d88\u8d39\u8d77\u70b9\uff0c\u9ed8\u8ba4\u503c latest\u3002 \u53ef\u9009 latest\u3001earliest\n      startingOffsets: latest\n      # \u6d41\u63a7\uff0c\u5bf9\u6bcf\u4e2a\u89e6\u53d1\u533a\u95f4\u5904\u7406\u7684\u6700\u5927\u504f\u79fb\u91cf\u7684\u901f\u7387\u9650\u5236\uff0c\u53ef\u4e0d\u914d\u7f6e\u3002\n      # maxOffsetsPerTrigger:10000\n    }\n  ]\n  # \u5904\u7406\u8fb9\u6570\u636e\n  #edges: [\n  #  # \u8bbe\u7f6e Edge type follow \u76f8\u5173\u4fe1\u606f\n  #  {\n  #    # NebulaGraph \u4e2d\u5bf9\u5e94\u7684 Edge type \u540d\u79f0\u3002\n  #    name: follow\n\n  #    type: {\n  #      # \u6307\u5b9a\u6570\u636e\u6e90\u6587\u4ef6\u683c\u5f0f\uff0c\u8bbe\u7f6e\u4e3a Kafka\u3002\n  #      source: kafka\n\n  #      # \u6307\u5b9a\u8fb9\u6570\u636e\u5bfc\u5165 NebulaGraph \u7684\u65b9\u5f0f\uff0c\n  #      # \u6307\u5b9a\u5982\u4f55\u5c06\u6570\u636e\u5bfc\u5165 NebulaGraph \u3002\u53ea\u652f\u6301 Client\u3002\n  #      sink: client\n  #    }\n\n  #    # Kafka \u670d\u52a1\u5668\u5730\u5740\u3002\n  #    service: \"127.0.0.1:9092\"\n  #    # \u6d88\u606f\u7c7b\u522b\u3002\n  #    topic: \"topic_name3\"\n\n  #    # \u5982\u679c Kafka \u542f\u7528 Kerberos \u8fdb\u884c\u5b89\u5168\u8ba4\u8bc1\uff0c\u9700\u8981\u8bbe\u7f6e\u4ee5\u4e0b\u53c2\u6570\u3002\u5982\u679c Kafka \u542f\u7528 SASL \u6216 SASL_PLAINTEXT \u8fdb\u884c\u5b89\u5168\u8ba4\u8bc1\uff0c\u65e0\u9700\u8bbe\u7f6e kerberos \u548c kerberosServiceName\u3002\n  #    #securityProtocol: SASL_PLAINTEXT\n  #    #mechanism: GASSAPI\n  #    #kerberos: true\n  #    #kerberosServiceName: kafka\n\n  #    # \u5728 fields \u91cc\u6307\u5b9a Kafka value \u4e2d\u7684\u5b57\u6bb5\u540d\u79f0\uff0c\u591a\u4e2a\u5b57\u6bb5\u7528\u82f1\u6587\u9017\u53f7\uff08,\uff09\u9694\u5f00\u3002Spark Structured Streaming \u8bfb\u53d6 Kafka \u6570\u636e\u540e\u4f1a\u5c06\u5176\u4ee5 JSON \u683c\u5f0f\u5b58\u50a8\u4e8e value \u5b57\u6bb5\u4e2d\uff0c\u800c\u8fd9\u91cc\u7684 fields \u8981\u914d\u7f6e JSON \u7684 key \u540d\u3002\u793a\u4f8b\u5982\u4e0b\uff1a\n  #    fields: [degree]\n  #    # \u8bbe\u7f6e\u4e0e fields \u4e2d\u7684 key \u5bf9\u5e94\u7684 NebulaGraph \u5c5e\u6027\u540d\uff0ckey \u7684 value \u5c06\u4fdd\u5b58\u4e3a\u76f8\u5e94\u7684\u5c5e\u6027\u503c\u3002\u4e0b\u65b9\u8bbe\u7f6e\u4f1a\u5c06 degree \u7684 value \u4fdd\u5b58\u5230 NebulaGraph \u4e2d\u7684 degree \u5c5e\u6027\u3002\n  #    nebula.fields: [degree]\n\n  #    # \u5728 source \u91cc\uff0c\u5c06 topic \u4e2d\u67d0\u4e00\u5217\u4f5c\u4e3a\u8fb9\u7684\u8d77\u59cb\u70b9\u6570\u636e\u6e90\u3002\n  #    # \u5728 target \u91cc\uff0c\u5c06 topic \u4e2d\u67d0\u4e00\u5217\u4f5c\u4e3a\u8fb9\u7684\u76ee\u7684\u70b9\u6570\u636e\u6e90\u3002\n  #    source:{\n  #        field:srcPersonId\n  #    # udf:{\n  #    #            separator:\"_\"\n  #    #            oldColNames:[field-0,field-1,field-2]\n  #    #            newColName:new-field\n  #    #        }\n  #    # \u4e3a VID \u589e\u52a0\u6307\u5b9a\u7684\u524d\u7f00\u3002\u4f8b\u5982 VID \u4e3a 12345\uff0c\u589e\u52a0\u524d\u7f00 tag1 \u540e\u4e3a tag1_12345\u3002\u4e0b\u5212\u7ebf\u65e0\u6cd5\u4fee\u6539\u3002\n  #    # prefix:\"tag1\"\n  #    # \u5bf9 string \u7c7b\u578b\u7684 VID \u8fdb\u884c\u54c8\u5e0c\u5316\u64cd\u4f5c\u3002\n  #    # policy:hash\n  #    }\n\n  #    target:{\n  #        field:dstPersonId\n  #    # udf:{\n  #    #            separator:\"_\"\n  #    #            oldColNames:[field-0,field-1,field-2]\n  #    #            newColName:new-field\n  #    #        }\n  #    # \u4e3a VID \u589e\u52a0\u6307\u5b9a\u7684\u524d\u7f00\u3002\u4f8b\u5982 VID \u4e3a 12345\uff0c\u589e\u52a0\u524d\u7f00 tag1 \u540e\u4e3a tag1_12345\u3002\u4e0b\u5212\u7ebf\u65e0\u6cd5\u4fee\u6539\u3002\n  #    # prefix:\"tag1\"\n  #    # \u5bf9 string \u7c7b\u578b\u7684 VID \u8fdb\u884c\u54c8\u5e0c\u5316\u64cd\u4f5c\u3002\n  #    # policy:hash\n  #    }\n\n  #    # \u6307\u5b9a\u4e00\u4e2a\u5217\u4f5c\u4e3a rank \u7684\u6e90\uff08\u53ef\u9009\uff09\u3002\n  #    #ranking: rank\n\n  #    # \u6279\u91cf\u64cd\u4f5c\u7c7b\u578b\uff0c\u5305\u62ec INSERT\u3001UPDATE \u548c DELETE\u3002\u9ed8\u8ba4\u4e3a INSERT\u3002\n  #    #writeMode: INSERT\n\n  #    # \u5355\u6279\u6b21\u5199\u5165 NebulaGraph \u7684\u6570\u636e\u6761\u6570\u3002\n  #    batch: 10\n\n  #    # \u6570\u636e\u5199\u5165 NebulaGraph \u65f6\u9700\u8981\u521b\u5efa\u7684\u5206\u533a\u6570\u3002\n  #    partition: 10\n\n  #    # \u8bfb\u53d6\u6d88\u606f\u7684\u95f4\u9694\u3002\u5355\u4f4d\uff1a\u79d2\u3002\n  #    interval.seconds: 10\n  #    # \u6d88\u8d39\u8d77\u70b9\uff0c\u9ed8\u8ba4\u503c latest\u3002 \u53ef\u9009 latest\u3001earliest\n  #    startingOffsets: latest\n  #    # \u6d41\u63a7\uff0c\u5bf9\u6bcf\u4e2a\u89e6\u53d1\u533a\u95f4\u5904\u7406\u7684\u6700\u5927\u504f\u79fb\u91cf\u7684\u901f\u7387\u9650\u5236\uff0c\u53ef\u4e0d\u914d\u7f6e\u3002\n  #    # maxOffsetsPerTrigger:10000\n  #  }\n  #]\n}\n</code></pre>"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-kafka/#3_nebulagraph","title":"\u6b65\u9aa4 3\uff1a\u5411 NebulaGraph \u5bfc\u5165\u6570\u636e","text":"<p>\u8fd0\u884c\u5982\u4e0b\u547d\u4ee4\u5c06 Kafka \u6570\u636e\u5bfc\u5165\u5230 NebulaGraph \u4e2d\u3002\u5173\u4e8e\u53c2\u6570\u7684\u8bf4\u660e\uff0c\u8bf7\u53c2\u89c1\u5bfc\u5165\u547d\u4ee4\u53c2\u6570\u3002</p> <pre><code>${SPARK_HOME}/bin/spark-submit --master \"local\" --class com.vesoft.nebula.exchange.Exchange &lt;nebula-exchange.jar_path&gt; -c &lt;kafka_application.conf_path&gt;\n</code></pre> <p>Note</p> <ul> <li>JAR \u5305\u9700\u8981\u4eceNebulaGraph\u5957\u9910\u4e2d\u83b7\u53d6\u3002</li> <li>\u5982\u679c Kafka \u542f\u7528\u4e86\u5b89\u5168\u8ba4\u8bc1\uff0c\u5bfc\u5165\u6570\u636e\u65f6\u9700\u8981\u914d\u7f6e\u9a71\u52a8\u7a0b\u5e8f\u548c\u6267\u884c\u5668\uff0c\u53c2\u89c1\u4e0b\u65b9\u793a\u4f8b\u3002</li> </ul> <p>\u793a\u4f8b\uff1a</p> <ul> <li> <p>\u65e0\u5b89\u5168\u8ba4\u8bc1</p> <pre><code>${SPARK_HOME}/bin/spark-submit  --master \"local\" \\\n--class com.vesoft.nebula.exchange.Exchange  /root/nebula-exchange/target/nebula-exchange_spark_2.4-3.7.0.jar  \\\n-c /root/nebula-exchange/target/classes/kafka_application.conf\n</code></pre> </li> </ul> <ul> <li> <p>\u542f\u7528 Kerberos \u5b89\u5168\u8ba4\u8bc1</p> <pre><code>${SPARK_HOME}/bin/spark-submit  --master \"local\" \\\n--conf \"spark.driver.extraJavaOptions=-Djava.security.auth.login.config=/path/kafka_client_jaas.conf -Djava.security.krb5.conf=/path/krb5.conf\" \\\n--conf \"spark.executor.extraJavaOptions=-Djava.security.auth.login.config=/path/kafka_client_jaas.conf -Djava.security.krb5.conf=/path/krb5.conf\" \\\n--files /local/path/kafka_client_jaas.conf,/local/path/kafka.keytab,/local/path/krb5.conf \\\n--class com.vesoft.nebula.exchange.Exchange  /root/nebula-exchange/target/nebula-exchange_spark_2.4-3.7.0.jar  \\\n-c /root/nebula-exchange/target/classes/kafka_application.conf\n</code></pre> </li> </ul> <ul> <li> <p>\u542f\u7528 SASL/SASL_PLAINTEXT \u5b89\u5168\u8ba4\u8bc1</p> <pre><code>${SPARK_HOME}/bin/spark-submit  --master \"local\" \\\n--conf \"spark.driver.extraJavaOptions=-Djava.security.auth.login.config=/path/kafka_client_jaas.conf\" \\\n--conf \"spark.executor.extraJavaOptions=-Djava.security.auth.login.config=/path/kafka_client_jaas.conf\" \\\n--files /local/path/kafka_client_jaas.conf \\\n--class com.vesoft.nebula.exchange.Exchange  /root/nebula-exchange/target/nebula-exchange_spark_2.4-3.7.0.jar  \\\n-c /root/nebula-exchange/target/classes/kafka_application.conf\n</code></pre> </li> </ul> <p>\u7528\u6237\u53ef\u4ee5\u5728\u8fd4\u56de\u4fe1\u606f\u4e2d\u641c\u7d22<code>batchSuccess.&lt;tag_name/edge_name&gt;</code>\uff0c\u786e\u8ba4\u6210\u529f\u7684\u6570\u91cf\u3002\u4f8b\u5982<code>batchSuccess.follow: 300</code>\u3002</p>"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-kafka/#4","title":"\u6b65\u9aa4 4\uff1a\uff08\u53ef\u9009\uff09\u9a8c\u8bc1\u6570\u636e","text":"<p>\u7528\u6237\u53ef\u4ee5\u5728 NebulaGraph \u5ba2\u6237\u7aef\uff08\u4f8b\u5982 NebulaGraph Studio\uff09\u4e2d\u6267\u884c\u67e5\u8be2\u8bed\u53e5\uff0c\u786e\u8ba4\u6570\u636e\u662f\u5426\u5df2\u5bfc\u5165\u3002\u4f8b\u5982\uff1a</p> <pre><code>LOOKUP ON player YIELD id(vertex);\n</code></pre> <p>\u7528\u6237\u4e5f\u53ef\u4ee5\u4f7f\u7528\u547d\u4ee4 <code>SHOW STATS</code> \u67e5\u770b\u7edf\u8ba1\u6570\u636e\u3002</p>"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-kafka/#5_nebulagraph","title":"\u6b65\u9aa4 5\uff1a\uff08\u5982\u6709\uff09\u5728 NebulaGraph \u4e2d\u91cd\u5efa\u7d22\u5f15","text":"<p>\u5bfc\u5165\u6570\u636e\u540e\uff0c\u7528\u6237\u53ef\u4ee5\u5728 NebulaGraph \u4e2d\u91cd\u65b0\u521b\u5efa\u5e76\u91cd\u5efa\u7d22\u5f15\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1\u7d22\u5f15\u4ecb\u7ecd\u3002</p>"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-maxcompute/","title":"\u5bfc\u5165 MaxCompute \u6570\u636e","text":"<p>\u672c\u6587\u4ee5\u4e00\u4e2a\u793a\u4f8b\u8bf4\u660e\u5982\u4f55\u4f7f\u7528 Exchange \u5c06\u5b58\u50a8\u5728 MaxCompute \u4e0a\u7684\u6570\u636e\u5bfc\u5165 NebulaGraph \u3002</p>"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-maxcompute/#_1","title":"\u6570\u636e\u96c6","text":"<p>\u672c\u6587\u4ee5 basketballplayer \u6570\u636e\u96c6\u4e3a\u4f8b\u3002</p>"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-maxcompute/#_2","title":"\u73af\u5883\u914d\u7f6e","text":"<p>\u672c\u6587\u793a\u4f8b\u5728 MacOS \u4e0b\u5b8c\u6210\uff0c\u4ee5\u4e0b\u662f\u76f8\u5173\u7684\u73af\u5883\u914d\u7f6e\u4fe1\u606f\uff1a</p> <ul> <li>\u786c\u4ef6\u89c4\u683c\uff1a<ul> <li>CPU\uff1a1.7 GHz Quad-Core Intel Core i7</li> <li>\u5185\u5b58\uff1a16 GB</li> </ul> </li> </ul> <ul> <li>Spark\uff1a2.4.7\uff0c\u5355\u673a\u7248</li> </ul> <ul> <li>MaxCompute\uff1a\u963f\u91cc\u4e91\u5b98\u65b9\u7248\u672c</li> </ul> <ul> <li>NebulaGraph \uff1amaster\u3002</li> </ul>"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-maxcompute/#_3","title":"\u524d\u63d0\u6761\u4ef6","text":"<p>\u5f00\u59cb\u5bfc\u5165\u6570\u636e\u4e4b\u524d\uff0c\u7528\u6237\u9700\u8981\u786e\u8ba4\u4ee5\u4e0b\u4fe1\u606f\uff1a</p> <ul> <li> <p>\u5df2\u7ecf\u5b89\u88c5\u90e8\u7f72 NebulaGraph  \u5e76\u83b7\u53d6\u5982\u4e0b\u4fe1\u606f\uff1a</p> <ul> <li>Graph \u670d\u52a1\u548c Meta \u670d\u52a1\u7684\u7684 IP \u5730\u5740\u548c\u7aef\u53e3\u3002</li> </ul> <ul> <li>\u62e5\u6709 NebulaGraph \u5199\u6743\u9650\u7684\u7528\u6237\u540d\u548c\u5bc6\u7801\u3002</li> </ul> </li> </ul> <ul> <li>\u5df2\u7ecf\u7f16\u8bd1 Exchange\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1\u7f16\u8bd1 Exchange\u3002\u672c\u793a\u4f8b\u4e2d\u4f7f\u7528 Exchange 3.7.0\u3002</li> </ul> <ul> <li>\u5df2\u7ecf\u5b89\u88c5 Spark\u3002</li> </ul> <ul> <li>\u4e86\u89e3 NebulaGraph \u4e2d\u521b\u5efa Schema \u7684\u4fe1\u606f\uff0c\u5305\u62ec Tag \u548c Edge type \u7684\u540d\u79f0\u3001\u5c5e\u6027\u7b49\u3002</li> </ul>"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-maxcompute/#_4","title":"\u64cd\u4f5c\u6b65\u9aa4","text":""},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-maxcompute/#1_nebulagraph_schema","title":"\u6b65\u9aa4 1\uff1a\u5728 NebulaGraph \u4e2d\u521b\u5efa Schema","text":"<p>\u5206\u6790\u6570\u636e\uff0c\u6309\u4ee5\u4e0b\u6b65\u9aa4\u5728 NebulaGraph \u4e2d\u521b\u5efa Schema\uff1a</p> <ol> <li> <p>\u786e\u8ba4 Schema \u8981\u7d20\u3002 NebulaGraph \u4e2d\u7684 Schema \u8981\u7d20\u5982\u4e0b\u8868\u6240\u793a\u3002</p> \u8981\u7d20 \u540d\u79f0 \u5c5e\u6027 Tag <code>player</code> <code>name string, age int</code> Tag <code>team</code> <code>name string</code> Edge Type <code>follow</code> <code>degree int</code> Edge Type <code>serve</code> <code>start_year int, end_year int</code> </li> <li> <p>\u5728 NebulaGraph \u4e2d\u521b\u5efa\u4e00\u4e2a\u56fe\u7a7a\u95f4 basketballplayer\uff0c\u5e76\u521b\u5efa\u4e00\u4e2a Schema\uff0c\u5982\u4e0b\u6240\u793a\u3002</p> <pre><code>## \u521b\u5efa\u56fe\u7a7a\u95f4\nnebula&gt; CREATE SPACE basketballplayer \\\n        (partition_num = 10, \\\n        replica_factor = 1, \\\n        vid_type = FIXED_STRING(30));\n\n## \u9009\u62e9\u56fe\u7a7a\u95f4 basketballplayer\nnebula&gt; USE basketballplayer;\n\n## \u521b\u5efa Tag player\nnebula&gt; CREATE TAG player(name string, age int);\n\n## \u521b\u5efa Tag team\nnebula&gt; CREATE TAG team(name string);\n\n## \u521b\u5efa Edge type follow\nnebula&gt; CREATE EDGE follow(degree int);\n\n## \u521b\u5efa Edge type serve\nnebula&gt; CREATE EDGE serve(start_year int, end_year int);\n</code></pre> </li> </ol> <p>\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u89c1\u5feb\u901f\u5f00\u59cb\u3002</p>"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-maxcompute/#2","title":"\u6b65\u9aa4 2\uff1a\u4fee\u6539\u914d\u7f6e\u6587\u4ef6","text":"<p>\u7f16\u8bd1 Exchange \u540e\uff0c\u590d\u5236<code>target/classes/application.conf</code>\u6587\u4ef6\u8bbe\u7f6e MaxCompute \u6570\u636e\u6e90\u76f8\u5173\u7684\u914d\u7f6e\u3002\u5728\u672c\u793a\u4f8b\u4e2d\uff0c\u590d\u5236\u7684\u6587\u4ef6\u540d\u4e3a<code>maxcompute_application.conf</code>\u3002\u5404\u4e2a\u914d\u7f6e\u9879\u7684\u8be6\u7ec6\u8bf4\u660e\u8bf7\u53c2\u89c1\u914d\u7f6e\u8bf4\u660e\u3002</p> <pre><code>{\n  # Spark \u76f8\u5173\u914d\u7f6e\n  spark: {\n    app: {\n      name: NebulaGraph Exchange 3.7.0\n    }\n    driver: {\n      cores: 1\n      maxResultSize: 1G\n    }\n    cores: {\n      max: 16\n    }\n  }\n\n# NebulaGraph \u76f8\u5173\u914d\u7f6e\n  nebula: {\n    address:{\n      # \u4ee5\u4e0b\u4e3a NebulaGraph \u7684 Graph \u670d\u52a1\u548c Meta \u670d\u52a1\u6240\u5728\u673a\u5668\u7684 IP \u5730\u5740\u53ca\u7aef\u53e3\u3002\n      # \u5982\u679c\u6709\u591a\u4e2a\u5730\u5740\uff0c\u683c\u5f0f\u4e3a \"ip1:port\",\"ip2:port\",\"ip3:port\"\u3002\n      # \u4e0d\u540c\u5730\u5740\u4e4b\u95f4\u4ee5\u82f1\u6587\u9017\u53f7 (,) \u9694\u5f00\u3002\n      graph:[\"127.0.0.1:9669\"]\n      #\u4efb\u610f\u4e00\u4e2a Meta \u670d\u52a1\u7684\u5730\u5740\u3002\n      #\u5982\u679c\u60a8\u7684 NebulaGraph \u5728\u865a\u62df\u7f51\u7edc\u4e2d\uff0c\u5982k8s\uff0c\u8bf7\u914d\u7f6e Leader Meta\u7684\u5730\u5740\u3002\n      meta:[\"127.0.0.1:9559\"]\n    }\n    # \u586b\u5199\u7684\u8d26\u53f7\u5fc5\u987b\u62e5\u6709 NebulaGraph \u76f8\u5e94\u56fe\u7a7a\u95f4\u7684\u5199\u6570\u636e\u6743\u9650\u3002\n    user: root\n    pswd: nebula\n    # \u662f\u5426\u4f7f\u7528 RSA \u52a0\u5bc6\u7684\u5bc6\u7801\u3002\n    # enableRSA: true\n    # \u4f7f\u7528 RSA \u52a0\u5bc6\u5bc6\u7801\u65f6\u7684\u5bc6\u94a5\u3002\n    # privateKey: \"\"\n    # \u586b\u5199 NebulaGraph \u4e2d\u9700\u8981\u5199\u5165\u6570\u636e\u7684\u56fe\u7a7a\u95f4\u540d\u79f0\u3002\n    space: basketballplayer\n    connection: {\n      timeout: 3000\n      retry: 3\n    }\n    execution: {\n      retry: 3\n    }\n    error: {\n      max: 32\n      output: /tmp/errors\n    }\n    rate: {\n      limit: 1024\n      timeout: 1000\n    }\n  }\n  # \u5904\u7406\u70b9\n  tags: [\n    # \u8bbe\u7f6e Tag player \u76f8\u5173\u4fe1\u606f\n    {\n      name: player\n      type: {\n        # \u6307\u5b9a\u6570\u636e\u6e90\u6587\u4ef6\u683c\u5f0f\uff0c\u8bbe\u7f6e\u4e3a MaxCompute\u3002\n        source: maxcompute\n        # \u6307\u5b9a\u5982\u4f55\u5c06\u70b9\u6570\u636e\u5bfc\u5165 NebulaGraph \uff1aClient \u6216 SST\u3002\n        sink: client\n      }\n\n      # MaxCompute \u7684\u8868\u540d\n      table:player\n\n      # MaxCompute \u7684\u9879\u76ee\u540d\n      project:project\n\n      # MaxCompute \u670d\u52a1\u7684 odpsUrl \u548c tunnelUrl\uff0c\n      # \u5730\u5740\u53ef\u5728 https://help.aliyun.com/document_detail/34951.html \u67e5\u770b\u3002\n      odpsUrl:\"http://service.cn-hangzhou.maxcompute.aliyun.com/api\"\n      tunnelUrl:\"http://dt.cn-hangzhou.maxcompute.aliyun.com\"\n\n      # MaxCompute \u670d\u52a1\u7684 accessKeyId \u548c accessKeySecret\u3002\n      accessKeyId:xxx\n      accessKeySecret:xxx\n\n      # MaxCompute \u8868\u7684\u5206\u533a\u63cf\u8ff0\uff0c\u8be5\u914d\u7f6e\u53ef\u9009\u3002\n      partitionSpec:\"dt='partition1'\"\n\n      # MaxCompute \u7684 Spark \u8fde\u63a5\u5668\u5728\u8bfb\u53d6 MaxCompute \u6570\u636e\u65f6\u4f7f\u7528\u7684\u5206\u533a\u6570\u3002\u9ed8\u8ba4\u4e3a1\uff0c\u8be5\u914d\u7f6e\u53ef\u9009\u3002\n      numPartitions:100\n\n      # \u8bf7\u786e\u4fdd SQL \u8bed\u53e5\u4e2d\u7684\u8868\u540d\u548c\u4e0a\u65b9 table \u7684\u503c\u76f8\u540c\uff0c\u8be5\u914d\u7f6e\u53ef\u9009\u3002 \n      sentence:\"select id, name, age, playerid from player where id &lt; 10\"\n\n      # \u5728 fields \u91cc\u6307\u5b9a player \u8868\u4e2d\u7684\u5217\u540d\u79f0\uff0c\u5176\u5bf9\u5e94\u7684 value \u4f1a\u4f5c\u4e3a NebulaGraph \u4e2d\u6307\u5b9a\u5c5e\u6027\u3002\n      # fields \u548c nebula.fields \u91cc\u7684\u914d\u7f6e\u5fc5\u987b\u4e00\u4e00\u5bf9\u5e94\u3002\n      # \u5982\u679c\u9700\u8981\u6307\u5b9a\u591a\u4e2a\u5217\u540d\u79f0\uff0c\u7528\u82f1\u6587\u9017\u53f7\uff08,\uff09\u9694\u5f00\u3002\n      fields:[name, age]\n      nebula.fields:[name, age]\n\n      # \u6307\u5b9a\u8868\u4e2d\u67d0\u4e00\u5217\u6570\u636e\u4e3a NebulaGraph \u4e2d\u70b9 VID \u7684\u6765\u6e90\u3002\n      vertex:{\n        field: playerid\n      # udf:{\n      #            separator:\"_\"\n      #            oldColNames:[field-0,field-1,field-2]\n      #            newColName:new-field\n      #        }\n      # \u4e3a VID \u589e\u52a0\u6307\u5b9a\u7684\u524d\u7f00\u3002\u4f8b\u5982 VID \u4e3a 12345\uff0c\u589e\u52a0\u524d\u7f00 tag1 \u540e\u4e3a tag1_12345\u3002\u4e0b\u5212\u7ebf\u65e0\u6cd5\u4fee\u6539\u3002\n      # prefix:\"tag1\"\n      # \u5bf9 string \u7c7b\u578b\u7684 VID \u8fdb\u884c\u54c8\u5e0c\u5316\u64cd\u4f5c\u3002\n      # policy:hash\n      }\n\n      # \u6279\u91cf\u64cd\u4f5c\u7c7b\u578b\uff0c\u5305\u62ec INSERT\u3001UPDATE \u548c DELETE\u3002\u9ed8\u8ba4\u4e3a INSERT\u3002\n      #writeMode: INSERT\n\n      # \u6279\u91cf\u5220\u9664\u65f6\u662f\u5426\u5220\u9664\u8be5\u70b9\u5173\u8054\u7684\u51fa\u8fb9\u548c\u5165\u8fb9\u3002`writeMode`\u4e3a`DELETE`\u65f6\u8be5\u53c2\u6570\u751f\u6548\u3002\n      #deleteEdge: false\n\n      # \u5355\u6279\u6b21\u5199\u5165 NebulaGraph \u7684\u6570\u636e\u6761\u6570\u3002\n      batch: 256\n\n      # \u6570\u636e\u5199\u5165 NebulaGraph \u65f6\u9700\u8981\u521b\u5efa\u7684\u5206\u533a\u6570\u3002\n      partition: 32\n    }\n\n    # \u8bbe\u7f6e Tag team \u76f8\u5173\u4fe1\u606f\u3002\n    {\n      name: team\n      type: {\n        source: maxcompute\n        sink: client\n      }\n      table:team\n      project:project\n      odpsUrl:\"http://service.cn-hangzhou.maxcompute.aliyun.com/api\"\n      tunnelUrl:\"http://dt.cn-hangzhou.maxcompute.aliyun.com\"\n      accessKeyId:xxx\n      accessKeySecret:xxx\n      partitionSpec:\"dt='partition1'\"\n      sentence:\"select id, name, teamid from team where id &lt; 10\"\n      fields:[name]\n      nebula.fields:[name]\n      vertex:{\n        field: teamid\n      }\n      batch: 256\n      partition: 32\n    }\n  ]\n\n  # \u5904\u7406\u8fb9\u6570\u636e\n  edges: [\n    # \u8bbe\u7f6e Edge type follow \u76f8\u5173\u4fe1\u606f\n    {\n      # NebulaGraph \u4e2d\u5bf9\u5e94\u7684 Edge type \u540d\u79f0\u3002\n      name: follow\n\n      type:{\n        # \u6307\u5b9a\u6570\u636e\u6e90\u6587\u4ef6\u683c\u5f0f\uff0c\u8bbe\u7f6e\u4e3a MaxCompute\u3002\n        source:maxcompute\n\n        # \u6307\u5b9a\u8fb9\u6570\u636e\u5bfc\u5165 NebulaGraph \u7684\u65b9\u5f0f\uff0c\n        # \u6307\u5b9a\u5982\u4f55\u5c06\u70b9\u6570\u636e\u5bfc\u5165 NebulaGraph \uff1aClient \u6216 SST\u3002\n        sink:client\n      }\n\n      # MaxCompute \u7684\u8868\u540d\n      table:follow\n\n      # MaxCompute \u7684\u9879\u76ee\u540d\n      project:project\n\n      # MaxCompute \u670d\u52a1\u7684 odpsUrl \u548c tunnelUrl\uff0c\n      # \u5730\u5740\u53ef\u5728 https://help.aliyun.com/document_detail/34951.html \u67e5\u770b\u3002\n      odpsUrl:\"http://service.cn-hangzhou.maxcompute.aliyun.com/api\"\n      tunnelUrl:\"http://dt.cn-hangzhou.maxcompute.aliyun.com\"\n\n      # MaxCompute \u670d\u52a1\u7684 accessKeyId \u548c accessKeySecret\u3002\n      accessKeyId:xxx\n      accessKeySecret:xxx\n\n      # MaxCompute \u8868\u7684\u5206\u533a\u63cf\u8ff0\uff0c\u8be5\u914d\u7f6e\u53ef\u9009\u3002\n      partitionSpec:\"dt='partition1'\"\n\n      # \u8bf7\u786e\u4fdd SQL \u8bed\u53e5\u4e2d\u7684\u8868\u540d\u548c\u4e0a\u65b9 table \u7684\u503c\u76f8\u540c\uff0c\u8be5\u914d\u7f6e\u53ef\u9009\u3002 \n      sentence:\"select * from follow\"\n\n      # \u5728 fields \u91cc\u6307\u5b9a follow \u8868\u4e2d\u7684\u5217\u540d\u79f0\uff0c\u5176\u5bf9\u5e94\u7684 value \u4f1a\u4f5c\u4e3a NebulaGraph \u4e2d\u6307\u5b9a\u5c5e\u6027\u3002\n      # fields \u548c nebula.fields \u91cc\u7684\u914d\u7f6e\u5fc5\u987b\u4e00\u4e00\u5bf9\u5e94\u3002\n      # \u5982\u679c\u9700\u8981\u6307\u5b9a\u591a\u4e2a\u5217\u540d\u79f0\uff0c\u7528\u82f1\u6587\u9017\u53f7\uff08,\uff09\u9694\u5f00\u3002\n      fields:[degree]\n      nebula.fields:[degree]\n\n      # \u5728 source \u91cc\uff0c\u5c06 follow \u8868\u4e2d\u67d0\u4e00\u5217\u4f5c\u4e3a\u8fb9\u7684\u8d77\u59cb\u70b9\u6570\u636e\u6e90\u3002\n      source:{\n        field: src_player\n      # udf:{\n      #            separator:\"_\"\n      #            oldColNames:[field-0,field-1,field-2]\n      #            newColName:new-field\n      #        }\n      # \u4e3a VID \u589e\u52a0\u6307\u5b9a\u7684\u524d\u7f00\u3002\u4f8b\u5982 VID \u4e3a 12345\uff0c\u589e\u52a0\u524d\u7f00 tag1 \u540e\u4e3a tag1_12345\u3002\u4e0b\u5212\u7ebf\u65e0\u6cd5\u4fee\u6539\u3002\n      # prefix:\"tag1\"\n      # \u5bf9 string \u7c7b\u578b\u7684 VID \u8fdb\u884c\u54c8\u5e0c\u5316\u64cd\u4f5c\u3002\n      # policy:hash\n      }\n\n      # \u5728 target \u91cc\uff0c\u5c06 follow \u8868\u4e2d\u67d0\u4e00\u5217\u4f5c\u4e3a\u8fb9\u7684\u76ee\u7684\u70b9\u6570\u636e\u6e90\u3002\n      target:{\n        field: dst_player\n      # udf:{\n      #            separator:\"_\"\n      #            oldColNames:[field-0,field-1,field-2]\n      #            newColName:new-field\n      #        }\n      # \u4e3a VID \u589e\u52a0\u6307\u5b9a\u7684\u524d\u7f00\u3002\u4f8b\u5982 VID \u4e3a 12345\uff0c\u589e\u52a0\u524d\u7f00 tag1 \u540e\u4e3a tag1_12345\u3002\u4e0b\u5212\u7ebf\u65e0\u6cd5\u4fee\u6539\u3002\n      # prefix:\"tag1\"\n      # \u5bf9 string \u7c7b\u578b\u7684 VID \u8fdb\u884c\u54c8\u5e0c\u5316\u64cd\u4f5c\u3002\n      # policy:hash\n      }\n\n      # \u6307\u5b9a\u4e00\u4e2a\u5217\u4f5c\u4e3a rank \u7684\u6e90\uff08\u53ef\u9009\uff09\u3002\n      #ranking: rank\n\n      # \u6279\u91cf\u64cd\u4f5c\u7c7b\u578b\uff0c\u5305\u62ec INSERT\u3001UPDATE \u548c DELETE\u3002\u9ed8\u8ba4\u4e3a INSERT\u3002\n      #writeMode: INSERT\n\n      # \u6570\u636e\u5199\u5165 NebulaGraph \u65f6\u9700\u8981\u521b\u5efa\u7684\u5206\u533a\u6570\u3002\n      partition:10\n\n      # \u5355\u6279\u6b21\u5199\u5165 NebulaGraph \u7684\u6570\u636e\u6761\u6570\u3002\n      batch:10\n    }\n\n    # \u8bbe\u7f6e Edge type serve \u76f8\u5173\u4fe1\u606f\n    {\n      name: serve\n      type:{\n        source:maxcompute\n        sink:client\n      }\n      table:serve\n      project:project\n      odpsUrl:\"http://service.cn-hangzhou.maxcompute.aliyun.com/api\"\n      tunnelUrl:\"http://dt.cn-hangzhou.maxcompute.aliyun.com\"\n      accessKeyId:xxx\n      accessKeySecret:xxx\n      partitionSpec:\"dt='partition1'\"\n      sentence:\"select * from serve\"\n      fields:[start_year,end_year]\n      nebula.fields:[start_year,end_year]\n      source:{\n        field: playerid\n      }\n      target:{\n        field: teamid\n      }\n\n      # \u6307\u5b9a\u4e00\u4e2a\u5217\u4f5c\u4e3a rank \u7684\u6e90\uff08\u53ef\u9009\uff09\u3002\n      #ranking: rank\n\n      partition:10\n      batch:10\n    }\n  ]\n}\n</code></pre>"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-maxcompute/#3_nebulagraph","title":"\u6b65\u9aa4 3\uff1a\u5411 NebulaGraph \u5bfc\u5165\u6570\u636e","text":"<p>\u8fd0\u884c\u5982\u4e0b\u547d\u4ee4\u5c06 MaxCompute \u6570\u636e\u5bfc\u5165\u5230 NebulaGraph \u4e2d\u3002\u5173\u4e8e\u53c2\u6570\u7684\u8bf4\u660e\uff0c\u8bf7\u53c2\u89c1\u5bfc\u5165\u547d\u4ee4\u53c2\u6570\u3002</p> <pre><code>${SPARK_HOME}/bin/spark-submit --master \"local\" --class com.vesoft.nebula.exchange.Exchange &lt;nebula-exchange.jar_path&gt; -c &lt;maxcompute_application.conf_path&gt;\n</code></pre> <p>Note</p> <p>JAR \u5305\u6709\u4e24\u79cd\u83b7\u53d6\u65b9\u5f0f\uff1a\u81ea\u884c\u7f16\u8bd1\u6216\u8005\u4ece maven \u4ed3\u5e93\u4e0b\u8f7d\u3002</p> <p>\u793a\u4f8b\uff1a</p> <pre><code>${SPARK_HOME}/bin/spark-submit  --master \"local\" --class com.vesoft.nebula.exchange.Exchange  /root/nebula-exchange/nebula-exchange/target/nebula-exchange_spark_2.4-3.7.0.jar  -c /root/nebula-exchange/nebula-exchange/target/classes/maxcompute_application.conf\n</code></pre> <p>\u7528\u6237\u53ef\u4ee5\u5728\u8fd4\u56de\u4fe1\u606f\u4e2d\u641c\u7d22<code>batchSuccess.&lt;tag_name/edge_name&gt;</code>\uff0c\u786e\u8ba4\u6210\u529f\u7684\u6570\u91cf\u3002\u4f8b\u5982<code>batchSuccess.follow: 300</code>\u3002</p>"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-maxcompute/#4","title":"\u6b65\u9aa4 4\uff1a\uff08\u53ef\u9009\uff09\u9a8c\u8bc1\u6570\u636e","text":"<p>\u7528\u6237\u53ef\u4ee5\u5728 NebulaGraph \u5ba2\u6237\u7aef\uff08\u4f8b\u5982 NebulaGraph Studio\uff09\u4e2d\u6267\u884c\u67e5\u8be2\u8bed\u53e5\uff0c\u786e\u8ba4\u6570\u636e\u662f\u5426\u5df2\u5bfc\u5165\u3002\u4f8b\u5982\uff1a</p> <pre><code>LOOKUP ON player YIELD id(vertex);\n</code></pre> <p>\u7528\u6237\u4e5f\u53ef\u4ee5\u4f7f\u7528\u547d\u4ee4 <code>SHOW STATS</code> \u67e5\u770b\u7edf\u8ba1\u6570\u636e\u3002</p>"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-maxcompute/#5_nebulagraph","title":"\u6b65\u9aa4 5\uff1a\uff08\u5982\u6709\uff09\u5728 NebulaGraph \u4e2d\u91cd\u5efa\u7d22\u5f15","text":"<p>\u5bfc\u5165\u6570\u636e\u540e\uff0c\u7528\u6237\u53ef\u4ee5\u5728 NebulaGraph \u4e2d\u91cd\u65b0\u521b\u5efa\u5e76\u91cd\u5efa\u7d22\u5f15\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1\u7d22\u5f15\u4ecb\u7ecd\u3002</p>"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-mysql/","title":"\u5bfc\u5165 MySQL/PostgreSQL \u6570\u636e","text":"<p>\u672c\u6587\u4ee5\u4e00\u4e2a\u793a\u4f8b\u8bf4\u660e\u5982\u4f55\u4f7f\u7528 Exchange \u5c06\u5b58\u50a8\u5728 MySQL \u4e0a\u7684\u6570\u636e\u5bfc\u5165 NebulaGraph\uff0c\u4e5f\u9002\u7528\u4e8e\u4ece PostgreSQL \u5bfc\u51fa\u6570\u636e\u5230 NebulaGraph \u3002</p>"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-mysql/#_1","title":"\u6570\u636e\u96c6","text":"<p>\u672c\u6587\u4ee5 basketballplayer \u6570\u636e\u96c6\u4e3a\u4f8b\u3002</p> <p>\u5728\u672c\u793a\u4f8b\u4e2d\uff0c\u8be5\u6570\u636e\u96c6\u5df2\u7ecf\u5b58\u5165 MySQL \u4e2d\u540d\u4e3a<code>basketball</code>\u7684\u6570\u636e\u5e93\u4e2d\uff0c\u4ee5<code>player</code>\u3001<code>team</code>\u3001<code>follow</code>\u548c<code>serve</code>\u56db\u4e2a\u8868\u5b58\u50a8\u4e86\u6240\u6709\u70b9\u548c\u8fb9\u7684\u4fe1\u606f\u3002\u4ee5\u4e0b\u4e3a\u5404\u4e2a\u8868\u7684\u7ed3\u6784\u3002</p> <pre><code>mysql&gt; desc player;\n+----------+-------------+------+-----+---------+-------+\n| Field    | Type        | Null | Key | Default | Extra |\n+----------+-------------+------+-----+---------+-------+\n| playerid | varchar(30) | YES  |     | NULL    |       |\n| age      | int         | YES  |     | NULL    |       |\n| name     | varchar(30) | YES  |     | NULL    |       |\n+----------+-------------+------+-----+---------+-------+\n\nmysql&gt; desc team;\n+--------+-------------+------+-----+---------+-------+\n| Field  | Type        | Null | Key | Default | Extra |\n+--------+-------------+------+-----+---------+-------+\n| teamid | varchar(30) | YES  |     | NULL    |       |\n| name   | varchar(30) | YES  |     | NULL    |       |\n+--------+-------------+------+-----+---------+-------+\n\nmysql&gt; desc follow;\n+------------+-------------+------+-----+---------+-------+\n| Field      | Type        | Null | Key | Default | Extra |\n+------------+-------------+------+-----+---------+-------+\n| src_player | varchar(30) | YES  |     | NULL    |       |\n| dst_player | varchar(30) | YES  |     | NULL    |       |\n| degree     | int         | YES  |     | NULL    |       |\n+------------+-------------+------+-----+---------+-------+\n\nmysql&gt; desc serve;\n+------------+-------------+------+-----+---------+-------+\n| Field      | Type        | Null | Key | Default | Extra |\n+------------+-------------+------+-----+---------+-------+\n| playerid   | varchar(30) | YES  |     | NULL    |       |\n| teamid     | varchar(30) | YES  |     | NULL    |       |\n| start_year | int         | YES  |     | NULL    |       |\n| end_year   | int         | YES  |     | NULL    |       |\n+------------+-------------+------+-----+---------+-------+\n</code></pre>"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-mysql/#_2","title":"\u73af\u5883\u914d\u7f6e","text":"<p>\u672c\u6587\u793a\u4f8b\u5728 MacOS \u4e0b\u5b8c\u6210\uff0c\u4ee5\u4e0b\u662f\u76f8\u5173\u7684\u73af\u5883\u914d\u7f6e\u4fe1\u606f\uff1a</p> <ul> <li>\u786c\u4ef6\u89c4\u683c\uff1a<ul> <li>CPU\uff1a1.7 GHz Quad-Core Intel Core i7</li> <li>\u5185\u5b58\uff1a16 GB</li> </ul> </li> </ul> <ul> <li>Spark\uff1a2.4.7\uff0c\u5355\u673a\u7248</li> </ul> <ul> <li>MySQL\uff1a 8.0.23</li> </ul> <ul> <li>NebulaGraph \uff1amaster\u3002</li> </ul>"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-mysql/#_3","title":"\u524d\u63d0\u6761\u4ef6","text":"<p>\u5f00\u59cb\u5bfc\u5165\u6570\u636e\u4e4b\u524d\uff0c\u7528\u6237\u9700\u8981\u786e\u8ba4\u4ee5\u4e0b\u4fe1\u606f\uff1a</p> <ul> <li> <p>\u5df2\u7ecf\u5b89\u88c5\u90e8\u7f72 NebulaGraph  \u5e76\u83b7\u53d6\u5982\u4e0b\u4fe1\u606f\uff1a</p> <ul> <li>Graph \u670d\u52a1\u548c Meta \u670d\u52a1\u7684\u7684 IP \u5730\u5740\u548c\u7aef\u53e3\u3002</li> </ul> <ul> <li>\u62e5\u6709 NebulaGraph \u5199\u6743\u9650\u7684\u7528\u6237\u540d\u548c\u5bc6\u7801\u3002</li> </ul> </li> </ul> <ul> <li>\u5df2\u7ecf\u7f16\u8bd1 Exchange\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1\u7f16\u8bd1 Exchange\u3002\u672c\u793a\u4f8b\u4e2d\u4f7f\u7528 Exchange 3.7.0\u3002</li> </ul> <ul> <li>\u5df2\u7ecf\u5b89\u88c5 Spark\u3002</li> </ul> <ul> <li>mysql-connector-java-xxx.jar \u5df2\u7ecf\u4e0b\u8f7d\u5e76\u653e\u7f6e\u5728 Spark \u7684<code>SPARK_HOME/jars</code>\u76ee\u5f55\u4e0b\u3002</li> </ul> <ul> <li>\u4e86\u89e3 NebulaGraph \u4e2d\u521b\u5efa Schema \u7684\u4fe1\u606f\uff0c\u5305\u62ec Tag \u548c Edge type \u7684\u540d\u79f0\u3001\u5c5e\u6027\u7b49\u3002</li> </ul> <ul> <li>\u5df2\u7ecf\u5b89\u88c5\u5e76\u5f00\u542f Hadoop \u670d\u52a1\u3002</li> </ul>"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-mysql/#_4","title":"\u6ce8\u610f\u4e8b\u9879","text":"<p>nebula-exchange_spark_2.2 \u4ec5\u652f\u6301\u5355\u8868\u67e5\u8be2\uff0c\u4e0d\u652f\u6301\u591a\u8868\u67e5\u8be2\u3002</p>"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-mysql/#_5","title":"\u64cd\u4f5c\u6b65\u9aa4","text":""},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-mysql/#1_nebulagraph_schema","title":"\u6b65\u9aa4 1\uff1a\u5728 NebulaGraph \u4e2d\u521b\u5efa Schema","text":"<p>\u5206\u6790\u6570\u636e\uff0c\u6309\u4ee5\u4e0b\u6b65\u9aa4\u5728 NebulaGraph \u4e2d\u521b\u5efa Schema\uff1a</p> <ol> <li> <p>\u786e\u8ba4 Schema \u8981\u7d20\u3002 NebulaGraph \u4e2d\u7684 Schema \u8981\u7d20\u5982\u4e0b\u8868\u6240\u793a\u3002</p> \u8981\u7d20 \u540d\u79f0 \u5c5e\u6027 Tag <code>player</code> <code>name string, age int</code> Tag <code>team</code> <code>name string</code> Edge Type <code>follow</code> <code>degree int</code> Edge Type <code>serve</code> <code>start_year int, end_year int</code> </li> <li> <p>\u5728 NebulaGraph \u4e2d\u521b\u5efa\u4e00\u4e2a\u56fe\u7a7a\u95f4 basketballplayer\uff0c\u5e76\u521b\u5efa\u4e00\u4e2a Schema\uff0c\u5982\u4e0b\u6240\u793a\u3002</p> <pre><code>## \u521b\u5efa\u56fe\u7a7a\u95f4\nnebula&gt; CREATE SPACE basketballplayer \\\n        (partition_num = 10, \\\n        replica_factor = 1, \\\n        vid_type = FIXED_STRING(30));\n\n## \u9009\u62e9\u56fe\u7a7a\u95f4 basketballplayer\nnebula&gt; USE basketballplayer;\n\n## \u521b\u5efa Tag player\nnebula&gt; CREATE TAG player(name string, age int);\n\n## \u521b\u5efa Tag team\nnebula&gt; CREATE TAG team(name string);\n\n## \u521b\u5efa Edge type follow\nnebula&gt; CREATE EDGE follow(degree int);\n\n## \u521b\u5efa Edge type serve\nnebula&gt; CREATE EDGE serve(start_year int, end_year int);\n</code></pre> </li> </ol> <p>\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u89c1\u5feb\u901f\u5f00\u59cb\u3002</p>"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-mysql/#2","title":"\u6b65\u9aa4 2\uff1a\u4fee\u6539\u914d\u7f6e\u6587\u4ef6","text":"<p>\u7f16\u8bd1 Exchange \u540e\uff0c\u590d\u5236<code>target/classes/application.conf</code>\u6587\u4ef6\u8bbe\u7f6e MySQL \u6570\u636e\u6e90\u76f8\u5173\u7684\u914d\u7f6e\u3002\u5728\u672c\u793a\u4f8b\u4e2d\uff0c\u590d\u5236\u7684\u6587\u4ef6\u540d\u4e3a<code>mysql_application.conf</code>\u3002\u5404\u4e2a\u914d\u7f6e\u9879\u7684\u8be6\u7ec6\u8bf4\u660e\u8bf7\u53c2\u89c1\u914d\u7f6e\u8bf4\u660e\u3002</p> <pre><code>{\n  # Spark \u76f8\u5173\u914d\u7f6e\n  spark: {\n    app: {\n      name: NebulaGraph Exchange 3.7.0\n    }\n    driver: {\n      cores: 1\n      maxResultSize: 1G\n    }\n    cores: {\n      max: 16\n    }\n  }\n\n# NebulaGraph \u76f8\u5173\u914d\u7f6e\n  nebula: {\n    address:{\n      # \u4ee5\u4e0b\u4e3a NebulaGraph \u7684 Graph \u670d\u52a1\u548c Meta \u670d\u52a1\u6240\u5728\u673a\u5668\u7684 IP \u5730\u5740\u53ca\u7aef\u53e3\u3002\n      # \u5982\u679c\u6709\u591a\u4e2a\u5730\u5740\uff0c\u683c\u5f0f\u4e3a \"ip1:port\",\"ip2:port\",\"ip3:port\"\u3002\n      # \u4e0d\u540c\u5730\u5740\u4e4b\u95f4\u4ee5\u82f1\u6587\u9017\u53f7 (,) \u9694\u5f00\u3002\n      graph:[\"127.0.0.1:9669\"]\n      #\u4efb\u610f\u4e00\u4e2a Meta \u670d\u52a1\u7684\u5730\u5740\u3002\n      #\u5982\u679c\u60a8\u7684 NebulaGraph \u5728\u865a\u62df\u7f51\u7edc\u4e2d\uff0c\u5982k8s\uff0c\u8bf7\u914d\u7f6e Leader Meta\u7684\u5730\u5740\u3002\n      meta:[\"127.0.0.1:9559\"]\n    }\n    # \u586b\u5199\u7684\u8d26\u53f7\u5fc5\u987b\u62e5\u6709 NebulaGraph \u76f8\u5e94\u56fe\u7a7a\u95f4\u7684\u5199\u6570\u636e\u6743\u9650\u3002\n    user: root\n    pswd: nebula\n    # \u662f\u5426\u4f7f\u7528 RSA \u52a0\u5bc6\u7684\u5bc6\u7801\u3002\n    # enableRSA: true\n    # \u4f7f\u7528 RSA \u52a0\u5bc6\u5bc6\u7801\u65f6\u7684\u5bc6\u94a5\u3002\n    # privateKey: \"\"\n    # \u586b\u5199 NebulaGraph \u4e2d\u9700\u8981\u5199\u5165\u6570\u636e\u7684\u56fe\u7a7a\u95f4\u540d\u79f0\u3002\n    space: basketballplayer\n    connection: {\n      timeout: 3000\n      retry: 3\n    }\n    execution: {\n      retry: 3\n    }\n    error: {\n      max: 32\n      output: /tmp/errors\n    }\n    rate: {\n      limit: 1024\n      timeout: 1000\n    }\n  }\n  # \u5904\u7406\u70b9\n  tags: [\n    # \u8bbe\u7f6e Tag player \u76f8\u5173\u4fe1\u606f\u3002\n    {\n      # NebulaGraph \u4e2d\u5bf9\u5e94\u7684 Tag \u540d\u79f0\u3002\n      name: player\n      type: {\n        # \u6307\u5b9a\u6570\u636e\u6e90\u6587\u4ef6\u683c\u5f0f\uff0c\u8bbe\u7f6e\u4e3a MySQL\u3002\n        source: mysql\n        # \u6307\u5b9a\u5982\u4f55\u5c06\u70b9\u6570\u636e\u5bfc\u5165 NebulaGraph \uff1aClient \u6216 SST\u3002\n        sink: client\n      }\n\n      host:192.168.*.*\n      port:3306\n      user:\"test\"\n      password:\"123456\"\n      database:\"basketball\"\n\n      # \u626b\u63cf\u5355\u4e2a\u8868\u8bfb\u53d6\u6570\u636e\u3002\n      # nebula-exchange_spark_2.2 \u5fc5\u987b\u914d\u7f6e\u8be5\u53c2\u6570\u3002\u4e0d\u652f\u6301\u914d\u7f6e sentence\u3002\n      # nebula-exchange_spark_2.4 \u548c nebula-exchange_spark_3.0 \u53ef\u4ee5\u914d\u7f6e\u8be5\u53c2\u6570\uff0c\u4f46\u662f\u4e0d\u80fd\u548c sentence \u540c\u65f6\u914d\u7f6e\u3002\n      table:\"basketball.player\"\n\n      # \u901a\u8fc7\u67e5\u8be2\u8bed\u53e5\u8bfb\u53d6\u6570\u636e\u3002\n      # nebula-exchange_spark_2.2 \u4e0d\u652f\u6301\u8be5\u53c2\u6570\u3002\n      # nebula-exchange_spark_2.4 \u548c nebula-exchange_spark_3.0 \u53ef\u4ee5\u914d\u7f6e\u8be5\u53c2\u6570\uff0c\u4f46\u662f\u4e0d\u80fd\u548c table \u540c\u65f6\u914d\u7f6e\u3002\u652f\u6301\u591a\u8868\u67e5\u8be2\u3002\n      # sentence: \"select * from  people, player, team\"\n\n      # \u5728 fields \u91cc\u6307\u5b9a player \u8868\u4e2d\u7684\u5217\u540d\u79f0\uff0c\u5176\u5bf9\u5e94\u7684 value \u4f1a\u4f5c\u4e3a NebulaGraph \u4e2d\u6307\u5b9a\u5c5e\u6027\u3002\n      # fields \u548c nebula.fields \u91cc\u7684\u914d\u7f6e\u5fc5\u987b\u4e00\u4e00\u5bf9\u5e94\u3002\n      # \u5982\u679c\u9700\u8981\u6307\u5b9a\u591a\u4e2a\u5217\u540d\u79f0\uff0c\u7528\u82f1\u6587\u9017\u53f7\uff08,\uff09\u9694\u5f00\u3002\n      fields: [age,name]\n      nebula.fields: [age,name]\n\n      # \u6307\u5b9a\u8868\u4e2d\u67d0\u4e00\u5217\u6570\u636e\u4e3a NebulaGraph \u4e2d\u70b9 VID \u7684\u6765\u6e90\u3002\n      vertex: {\n        field:playerid\n      # udf:{\n      #            separator:\"_\"\n      #            oldColNames:[field-0,field-1,field-2]\n      #            newColName:new-field\n      #        }\n      # \u4e3a VID \u589e\u52a0\u6307\u5b9a\u7684\u524d\u7f00\u3002\u4f8b\u5982 VID \u4e3a 12345\uff0c\u589e\u52a0\u524d\u7f00 tag1 \u540e\u4e3a tag1_12345\u3002\u4e0b\u5212\u7ebf\u65e0\u6cd5\u4fee\u6539\u3002\n      # prefix:\"tag1\"\n      # \u5bf9 string \u7c7b\u578b\u7684 VID \u8fdb\u884c\u54c8\u5e0c\u5316\u64cd\u4f5c\u3002\n      # policy:hash\n      }\n\n      # \u6279\u91cf\u64cd\u4f5c\u7c7b\u578b\uff0c\u5305\u62ec INSERT\u3001UPDATE \u548c DELETE\u3002\u9ed8\u8ba4\u4e3a INSERT\u3002\n      #writeMode: INSERT\n\n      # \u6279\u91cf\u5220\u9664\u65f6\u662f\u5426\u5220\u9664\u8be5\u70b9\u5173\u8054\u7684\u51fa\u8fb9\u548c\u5165\u8fb9\u3002`writeMode`\u4e3a`DELETE`\u65f6\u8be5\u53c2\u6570\u751f\u6548\u3002\n      #deleteEdge: false\n\n      # \u5355\u6279\u6b21\u5199\u5165 NebulaGraph \u7684\u6570\u636e\u6761\u6570\u3002\n      batch: 256\n\n      # \u6570\u636e\u5199\u5165 NebulaGraph \u65f6\u9700\u8981\u521b\u5efa\u7684\u5206\u533a\u6570\u3002\n      partition: 32\n    }\n    # \u8bbe\u7f6e Tag team \u76f8\u5173\u4fe1\u606f\u3002\n    {\n      name: team\n      type: {\n        source: mysql\n        sink: client\n      }\n\n      host:192.168.*.*\n      port:3306\n      database:\"basketball\"\n      table:\"team\"\n      user:\"test\"\n      password:\"123456\"\n      sentence:\"select teamid, name from team order by teamid\"\n\n      fields: [name]\n      nebula.fields: [name]\n      vertex: {\n        field: teamid\n      }\n      batch: 256\n      partition: 32\n    }\n\n  ]\n\n  # \u5904\u7406\u8fb9\u6570\u636e\n  edges: [\n    # \u8bbe\u7f6e Edge type follow \u76f8\u5173\u4fe1\u606f\n    {\n      # NebulaGraph \u4e2d\u5bf9\u5e94\u7684 Edge type \u540d\u79f0\u3002\n      name: follow\n\n      type: {\n        # \u6307\u5b9a\u6570\u636e\u6e90\u6587\u4ef6\u683c\u5f0f\uff0c\u8bbe\u7f6e\u4e3a MySQL\u3002\n        source: mysql\n\n        # \u6307\u5b9a\u8fb9\u6570\u636e\u5bfc\u5165 NebulaGraph \u7684\u65b9\u5f0f\uff0c\n        # \u6307\u5b9a\u5982\u4f55\u5c06\u70b9\u6570\u636e\u5bfc\u5165 NebulaGraph \uff1aClient \u6216 SST\u3002\n        sink: client\n      }\n\n      host:192.168.*.*\n      port:3306\n      user:\"test\"\n      password:\"123456\"\n      database:\"basketball\"\n\n      # \u626b\u63cf\u5355\u4e2a\u8868\u8bfb\u53d6\u6570\u636e\u3002\n      # nebula-exchange_spark_2.2 \u5fc5\u987b\u914d\u7f6e\u8be5\u53c2\u6570\u3002\u4e0d\u652f\u6301\u914d\u7f6e sentence\u3002\n      # nebula-exchange_spark_2.4 \u548c nebula-exchange_spark_3.0 \u53ef\u4ee5\u914d\u7f6e\u8be5\u53c2\u6570\uff0c\u4f46\u662f\u4e0d\u80fd\u548c sentence \u540c\u65f6\u914d\u7f6e\u3002\n      table:\"basketball.follow\"\n\n      # \u901a\u8fc7\u67e5\u8be2\u8bed\u53e5\u8bfb\u53d6\u6570\u636e\u3002\n      # nebula-exchange_spark_2.2 \u4e0d\u652f\u6301\u8be5\u53c2\u6570\u3002\n      # nebula-exchange_spark_2.4 \u548c nebula-exchange_spark_3.0 \u53ef\u4ee5\u914d\u7f6e\u8be5\u53c2\u6570\uff0c\u4f46\u662f\u4e0d\u80fd\u548c table \u540c\u65f6\u914d\u7f6e\u3002\u652f\u6301\u591a\u8868\u67e5\u8be2\u3002\n      # sentence: \"select * from  follow, serve\"\n\n      # \u5728 fields \u91cc\u6307\u5b9a follow \u8868\u4e2d\u7684\u5217\u540d\u79f0\uff0c\u5176\u5bf9\u5e94\u7684 value \u4f1a\u4f5c\u4e3a NebulaGraph \u4e2d\u6307\u5b9a\u5c5e\u6027\u3002\n      # fields \u548c nebula.fields \u91cc\u7684\u914d\u7f6e\u5fc5\u987b\u4e00\u4e00\u5bf9\u5e94\u3002\n      # \u5982\u679c\u9700\u8981\u6307\u5b9a\u591a\u4e2a\u5217\u540d\u79f0\uff0c\u7528\u82f1\u6587\u9017\u53f7\uff08,\uff09\u9694\u5f00\u3002\n      fields: [degree]\n      nebula.fields: [degree]\n\n      # \u5728 source \u91cc\uff0c\u5c06 follow \u8868\u4e2d\u67d0\u4e00\u5217\u4f5c\u4e3a\u8fb9\u7684\u8d77\u59cb\u70b9\u6570\u636e\u6e90\u3002\n      # \u5728 target \u91cc\uff0c\u5c06 follow \u8868\u4e2d\u67d0\u4e00\u5217\u4f5c\u4e3a\u8fb9\u7684\u76ee\u7684\u70b9\u6570\u636e\u6e90\u3002\n      source: {\n        field: src_player\n      # udf:{\n      #            separator:\"_\"\n      #            oldColNames:[field-0,field-1,field-2]\n      #            newColName:new-field\n      #        }\n      # \u4e3a VID \u589e\u52a0\u6307\u5b9a\u7684\u524d\u7f00\u3002\u4f8b\u5982 VID \u4e3a 12345\uff0c\u589e\u52a0\u524d\u7f00 tag1 \u540e\u4e3a tag1_12345\u3002\u4e0b\u5212\u7ebf\u65e0\u6cd5\u4fee\u6539\u3002\n      # prefix:\"tag1\"\n      # \u5bf9 string \u7c7b\u578b\u7684 VID \u8fdb\u884c\u54c8\u5e0c\u5316\u64cd\u4f5c\u3002\n      # policy:hash\n      }\n\n      target: {\n        field: dst_player\n      # udf:{\n      #            separator:\"_\"\n      #            oldColNames:[field-0,field-1,field-2]\n      #            newColName:new-field\n      #        }\n      # \u4e3a VID \u589e\u52a0\u6307\u5b9a\u7684\u524d\u7f00\u3002\u4f8b\u5982 VID \u4e3a 12345\uff0c\u589e\u52a0\u524d\u7f00 tag1 \u540e\u4e3a tag1_12345\u3002\u4e0b\u5212\u7ebf\u65e0\u6cd5\u4fee\u6539\u3002\n      # prefix:\"tag1\"\n      # \u5bf9 string \u7c7b\u578b\u7684 VID \u8fdb\u884c\u54c8\u5e0c\u5316\u64cd\u4f5c\u3002\n      # policy:hash\n      }\n\n      # \u6307\u5b9a\u4e00\u4e2a\u5217\u4f5c\u4e3a rank \u7684\u6e90\uff08\u53ef\u9009\uff09\u3002\n      #ranking: rank\n\n      # \u6279\u91cf\u64cd\u4f5c\u7c7b\u578b\uff0c\u5305\u62ec INSERT\u3001UPDATE \u548c DELETE\u3002\u9ed8\u8ba4\u4e3a INSERT\u3002\n      #writeMode: INSERT\n\n      # \u5355\u6279\u6b21\u5199\u5165 NebulaGraph \u7684\u6570\u636e\u6761\u6570\u3002\n      batch: 256\n\n      # \u6570\u636e\u5199\u5165 NebulaGraph \u65f6\u9700\u8981\u521b\u5efa\u7684\u5206\u533a\u6570\u3002\n      partition: 32\n    }\n\n    # \u8bbe\u7f6e Edge type serve \u76f8\u5173\u4fe1\u606f\n    {\n      name: serve\n      type: {\n        source: mysql\n        sink: client\n      }\n\n      host:192.168.*.*\n      port:3306\n      database:\"basketball\"\n      table:\"serve\"\n      user:\"test\"\n      password:\"123456\"\n      sentence:\"select playerid,teamid,start_year,end_year from serve order by playerid\"\n      fields: [start_year,end_year]\n      nebula.fields: [start_year,end_year]\n      source: {\n        field: playerid\n      }\n      target: {\n        field: teamid\n      }\n\n      # \u6307\u5b9a\u4e00\u4e2a\u5217\u4f5c\u4e3a rank \u7684\u6e90\uff08\u53ef\u9009\uff09\u3002\n      #ranking: rank\n\n      batch: 256\n      partition: 32\n    }\n  ]\n}\n</code></pre>"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-mysql/#3_nebulagraph","title":"\u6b65\u9aa4 3\uff1a\u5411 NebulaGraph \u5bfc\u5165\u6570\u636e","text":"<p>\u8fd0\u884c\u5982\u4e0b\u547d\u4ee4\u5c06 MySQL \u6570\u636e\u5bfc\u5165\u5230 NebulaGraph \u4e2d\u3002\u5173\u4e8e\u53c2\u6570\u7684\u8bf4\u660e\uff0c\u8bf7\u53c2\u89c1\u5bfc\u5165\u547d\u4ee4\u53c2\u6570\u3002</p> <pre><code>${SPARK_HOME}/bin/spark-submit --master \"local\" --class com.vesoft.nebula.exchange.Exchange &lt;nebula-exchange.jar_path&gt; -c &lt;mysql_application.conf_path&gt;\n</code></pre> <p>Note</p> <p>JAR \u5305\u6709\u4e24\u79cd\u83b7\u53d6\u65b9\u5f0f\uff1a\u81ea\u884c\u7f16\u8bd1\u6216\u8005\u4ece maven \u4ed3\u5e93\u4e0b\u8f7d\u3002</p> <p>\u793a\u4f8b\uff1a</p> <pre><code>${SPARK_HOME}/bin/spark-submit  --master \"local\" --class com.vesoft.nebula.exchange.Exchange  /root/nebula-exchange/nebula-exchange/target/nebula-exchange_spark_2.4-3.7.0.jar  -c /root/nebula-exchange/nebula-exchange/target/classes/mysql_application.conf\n</code></pre> <p>\u7528\u6237\u53ef\u4ee5\u5728\u8fd4\u56de\u4fe1\u606f\u4e2d\u641c\u7d22<code>batchSuccess.&lt;tag_name/edge_name&gt;</code>\uff0c\u786e\u8ba4\u6210\u529f\u7684\u6570\u91cf\u3002\u4f8b\u5982<code>batchSuccess.follow: 300</code>\u3002</p>"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-mysql/#4","title":"\u6b65\u9aa4 4\uff1a\uff08\u53ef\u9009\uff09\u9a8c\u8bc1\u6570\u636e","text":"<p>\u7528\u6237\u53ef\u4ee5\u5728 NebulaGraph \u5ba2\u6237\u7aef\uff08\u4f8b\u5982 NebulaGraph Studio\uff09\u4e2d\u6267\u884c\u67e5\u8be2\u8bed\u53e5\uff0c\u786e\u8ba4\u6570\u636e\u662f\u5426\u5df2\u5bfc\u5165\u3002\u4f8b\u5982\uff1a</p> <pre><code>LOOKUP ON player YIELD id(vertex);\n</code></pre> <p>\u7528\u6237\u4e5f\u53ef\u4ee5\u4f7f\u7528\u547d\u4ee4 <code>SHOW STATS</code> \u67e5\u770b\u7edf\u8ba1\u6570\u636e\u3002</p>"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-mysql/#5_nebulagraph","title":"\u6b65\u9aa4 5\uff1a\uff08\u5982\u6709\uff09\u5728 NebulaGraph \u4e2d\u91cd\u5efa\u7d22\u5f15","text":"<p>\u5bfc\u5165\u6570\u636e\u540e\uff0c\u7528\u6237\u53ef\u4ee5\u5728 NebulaGraph \u4e2d\u91cd\u65b0\u521b\u5efa\u5e76\u91cd\u5efa\u7d22\u5f15\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1\u7d22\u5f15\u4ecb\u7ecd\u3002</p>"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-neo4j/","title":"Macro Rendering Error","text":"<p>File: <code>import-export/nebula-exchange/use-exchange/ex-ug-import-from-neo4j.md</code></p> <p>UndefinedError: 'exchange_ent' is undefined</p> <pre><code>Traceback (most recent call last):\n  File \"/opt/hostedtoolcache/Python/3.8.18/x64/lib/python3.8/site-packages/mkdocs_macros/plugin.py\", line 527, in render\n    return md_template.render(**page_variables)\n  File \"/opt/hostedtoolcache/Python/3.8.18/x64/lib/python3.8/site-packages/jinja2/environment.py\", line 1301, in render\n    self.environment.handle_exception()\n  File \"/opt/hostedtoolcache/Python/3.8.18/x64/lib/python3.8/site-packages/jinja2/environment.py\", line 936, in handle_exception\n    raise rewrite_traceback_stack(source=source)\n  File \"&lt;template&gt;\", line 117, in top-level template code\n  File \"/opt/hostedtoolcache/Python/3.8.18/x64/lib/python3.8/site-packages/jinja2/environment.py\", line 485, in getattr\n    return getattr(obj, attribute)\njinja2.exceptions.UndefinedError: 'exchange_ent' is undefined\n</code></pre>"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-oracle/","title":"\u5bfc\u5165 Oracle \u6570\u636e","text":"<p>\u672c\u6587\u4ee5\u4e00\u4e2a\u793a\u4f8b\u8bf4\u660e\u5982\u4f55\u4f7f\u7528 Exchange \u5c06\u5b58\u50a8\u5728 Oracle \u4e0a\u7684\u6570\u636e\u5bfc\u5165 NebulaGraph \u3002</p>"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-oracle/#_1","title":"\u6570\u636e\u96c6","text":"<p>\u672c\u6587\u4ee5 basketballplayer \u6570\u636e\u96c6\u4e3a\u4f8b\u3002</p> <p>\u5728\u672c\u793a\u4f8b\u4e2d\uff0c\u8be5\u6570\u636e\u96c6\u5df2\u7ecf\u5b58\u5165 Oracle \u4e2d\u540d\u4e3a<code>basketball</code>\u7684\u6570\u636e\u5e93\u4e2d\uff0c\u4ee5<code>player</code>\u3001<code>team</code>\u3001<code>follow</code>\u548c<code>serve</code>\u56db\u4e2a\u8868\u5b58\u50a8\u4e86\u6240\u6709\u70b9\u548c\u8fb9\u7684\u4fe1\u606f\u3002\u4ee5\u4e0b\u4e3a\u5404\u4e2a\u8868\u7684\u7ed3\u6784\u3002</p> <pre><code>oracle&gt; desc player;\n+-----------+-------+---------------+ \n| Column    | Null  | Type          |\n+-----------+-------+---------------+ \n| PLAYERID  |  -    | VARCHAR2(30)  |\n| NAME      |  -    | VARCHAR2(30)  |\n| AGE       |  -    | NUMBER        |\n+-----------+-------+---------------+ \n\noracle&gt; desc team;\n+-----------+-------+---------------+ \n| Column    | Null  | Type          |\n+-----------+-------+---------------+ \n| TEAMID    |  -    | VARCHAR2(30)  |\n| NAME      |  -    | VARCHAR2(30)  |\n+-----------+-------+---------------+ \n\noracle&gt; desc follow;\n+-------------+-------+---------------+ \n| Column      | Null  | Type          |\n+-------------+-------+---------------+ \n| SRC_PLAYER  |  -    | VARCHAR2(30)  |\n| DST_PLAYER  |  -    | VARCHAR2(30)  |\n| DEGREE      |  -    | NUMBER        |\n+-------------+-------+---------------+ \n\noracle&gt; desc serve;\n+------------+-------+---------------+ \n| Column     | Null  | Type          |\n+------------+-------+---------------+ \n| PLAYERID   |  -    | VARCHAR2(30)  |\n| TEAMID     |  -    | VARCHAR2(30)  |\n| START_YEAR |  -    | NUMBER        |\n| END_YEAR   |  -    | NUMBER        |\n+------------+-------+---------------+ \n</code></pre>"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-oracle/#_2","title":"\u73af\u5883\u914d\u7f6e","text":"<p>\u672c\u6587\u793a\u4f8b\u5728 MacOS \u4e0b\u5b8c\u6210\uff0c\u4ee5\u4e0b\u662f\u76f8\u5173\u7684\u73af\u5883\u914d\u7f6e\u4fe1\u606f\uff1a</p> <ul> <li>\u786c\u4ef6\u89c4\u683c\uff1a<ul> <li>CPU\uff1a1.7 GHz Quad-Core Intel Core i7</li> <li>\u5185\u5b58\uff1a16 GB</li> </ul> </li> </ul> <ul> <li>Spark\uff1a2.4.7\uff0c\u5355\u673a\u7248</li> </ul> <ul> <li>NebulaGraph \uff1amaster\u3002</li> </ul>"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-oracle/#_3","title":"\u524d\u63d0\u6761\u4ef6","text":"<p>\u5f00\u59cb\u5bfc\u5165\u6570\u636e\u4e4b\u524d\uff0c\u7528\u6237\u9700\u8981\u786e\u8ba4\u4ee5\u4e0b\u4fe1\u606f\uff1a</p> <ul> <li> <p>\u5df2\u7ecf\u5b89\u88c5\u90e8\u7f72 NebulaGraph  \u5e76\u83b7\u53d6\u5982\u4e0b\u4fe1\u606f\uff1a</p> <ul> <li>Graph \u670d\u52a1\u548c Meta \u670d\u52a1\u7684\u7684 IP \u5730\u5740\u548c\u7aef\u53e3\u3002</li> </ul> <ul> <li>\u62e5\u6709 NebulaGraph \u5199\u6743\u9650\u7684\u7528\u6237\u540d\u548c\u5bc6\u7801\u3002</li> </ul> </li> </ul> <ul> <li>\u5df2\u7ecf\u7f16\u8bd1 Exchange\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1\u7f16\u8bd1 Exchange\u3002\u672c\u793a\u4f8b\u4e2d\u4f7f\u7528 Exchange 3.7.0\u3002</li> </ul> <ul> <li>\u5df2\u7ecf\u5b89\u88c5 Spark\u3002</li> </ul> <ul> <li>\u4e86\u89e3 NebulaGraph \u4e2d\u521b\u5efa\u7684 Schema \u4fe1\u606f\uff0c\u5305\u62ec Tag \u548c Edge type \u7684\u540d\u79f0\u3001\u5c5e\u6027\u7b49\u3002</li> </ul> <ul> <li>\u5df2\u7ecf\u5b89\u88c5\u5e76\u5f00\u542f Hadoop \u670d\u52a1\u3002</li> </ul>"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-oracle/#_4","title":"\u6ce8\u610f\u4e8b\u9879","text":"<p>nebula-exchange_spark_2.2 \u4ec5\u652f\u6301\u5355\u8868\u67e5\u8be2\uff0c\u4e0d\u652f\u6301\u591a\u8868\u67e5\u8be2\u3002</p>"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-oracle/#_5","title":"\u64cd\u4f5c\u6b65\u9aa4","text":""},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-oracle/#1_nebulagraph_schema","title":"\u6b65\u9aa4 1\uff1a\u5728 NebulaGraph \u4e2d\u521b\u5efa Schema","text":"<p>\u5206\u6790\u6570\u636e\uff0c\u6309\u4ee5\u4e0b\u6b65\u9aa4\u5728 NebulaGraph \u4e2d\u521b\u5efa Schema\uff1a</p> <ol> <li> <p>\u786e\u8ba4 Schema \u8981\u7d20\u3002 NebulaGraph \u4e2d\u7684 Schema \u8981\u7d20\u5982\u4e0b\u8868\u6240\u793a\u3002</p> \u8981\u7d20 \u540d\u79f0 \u5c5e\u6027 Tag <code>player</code> <code>name string, age int</code> Tag <code>team</code> <code>name string</code> Edge Type <code>follow</code> <code>degree int</code> Edge Type <code>serve</code> <code>start_year int, end_year int</code> </li> <li> <p>\u5728 NebulaGraph \u4e2d\u521b\u5efa\u4e00\u4e2a\u56fe\u7a7a\u95f4 basketballplayer\uff0c\u5e76\u521b\u5efa\u4e00\u4e2a Schema\uff0c\u5982\u4e0b\u6240\u793a\u3002</p> <pre><code>## \u521b\u5efa\u56fe\u7a7a\u95f4\nnebula&gt; CREATE SPACE basketballplayer \\\n        (partition_num = 10, \\\n        replica_factor = 1, \\\n        vid_type = FIXED_STRING(30));\n\n## \u9009\u62e9\u56fe\u7a7a\u95f4 basketballplayer\nnebula&gt; USE basketballplayer;\n\n## \u521b\u5efa Tag player\nnebula&gt; CREATE TAG player(name string, age int);\n\n## \u521b\u5efa Tag team\nnebula&gt; CREATE TAG team(name string);\n\n## \u521b\u5efa Edge type follow\nnebula&gt; CREATE EDGE follow(degree int);\n\n## \u521b\u5efa Edge type serve\nnebula&gt; CREATE EDGE serve(start_year int, end_year int);\n</code></pre> </li> </ol> <p>\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u89c1\u5feb\u901f\u5f00\u59cb\u3002</p>"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-oracle/#2","title":"\u6b65\u9aa4 2\uff1a\u4fee\u6539\u914d\u7f6e\u6587\u4ef6","text":"<p>\u7f16\u8bd1 Exchange \u540e\uff0c\u590d\u5236<code>target/classes/application.conf</code>\u6587\u4ef6\u8bbe\u7f6e Oracle \u6570\u636e\u6e90\u76f8\u5173\u7684\u914d\u7f6e\u3002\u5728\u672c\u793a\u4f8b\u4e2d\uff0c\u590d\u5236\u7684\u6587\u4ef6\u540d\u4e3a<code>oracle_application.conf</code>\u3002\u5404\u4e2a\u914d\u7f6e\u9879\u7684\u8be6\u7ec6\u8bf4\u660e\u8bf7\u53c2\u89c1\u914d\u7f6e\u8bf4\u660e\u3002</p> <pre><code>{\n  # Spark \u76f8\u5173\u914d\u7f6e\n  spark: {\n    app: {\n      name: NebulaGraph Exchange 3.7.0\n    }\n    driver: {\n      cores: 1\n      maxResultSize: 1G\n    }\n    cores: {\n      max: 16\n    }\n  }\n\n# NebulaGraph \u76f8\u5173\u914d\u7f6e\n  nebula: {\n    address:{\n      # \u4ee5\u4e0b\u4e3a NebulaGraph \u7684 Graph \u670d\u52a1\u548c Meta \u670d\u52a1\u6240\u5728\u673a\u5668\u7684 IP \u5730\u5740\u53ca\u7aef\u53e3\u3002\n      # \u5982\u679c\u6709\u591a\u4e2a\u5730\u5740\uff0c\u683c\u5f0f\u4e3a \"ip1:port\",\"ip2:port\",\"ip3:port\"\u3002\n      # \u4e0d\u540c\u5730\u5740\u4e4b\u95f4\u4ee5\u82f1\u6587\u9017\u53f7 (,) \u9694\u5f00\u3002\n      graph:[\"127.0.0.1:9669\"]\n      #\u4efb\u610f\u4e00\u4e2a Meta \u670d\u52a1\u7684\u5730\u5740\u3002\n      #\u5982\u679c\u60a8\u7684 NebulaGraph \u5728\u865a\u62df\u7f51\u7edc\u4e2d\uff0c\u5982k8s\uff0c\u8bf7\u914d\u7f6e Leader Meta\u7684\u5730\u5740\u3002\n      meta:[\"127.0.0.1:9559\"]\n    }\n    # \u586b\u5199\u7684\u8d26\u53f7\u5fc5\u987b\u62e5\u6709 NebulaGraph \u76f8\u5e94\u56fe\u7a7a\u95f4\u7684\u5199\u6570\u636e\u6743\u9650\u3002\n    user: root\n    pswd: nebula\n    # \u662f\u5426\u4f7f\u7528 RSA \u52a0\u5bc6\u7684\u5bc6\u7801\u3002\n    # enableRSA: true\n    # \u4f7f\u7528 RSA \u52a0\u5bc6\u5bc6\u7801\u65f6\u7684\u5bc6\u94a5\u3002\n    # privateKey: \"\"\n    # \u586b\u5199 NebulaGraph \u4e2d\u9700\u8981\u5199\u5165\u6570\u636e\u7684\u56fe\u7a7a\u95f4\u540d\u79f0\u3002\n    space: basketballplayer\n    connection: {\n      timeout: 3000\n      retry: 3\n    }\n    execution: {\n      retry: 3\n    }\n    error: {\n      max: 32\n      output: /tmp/errors\n    }\n    rate: {\n      limit: 1024\n      timeout: 1000\n    }\n  }\n  # \u5904\u7406\u70b9\n  tags: [\n    {\n      # NebulaGraph \u4e2d\u5bf9\u5e94\u7684 Tag \u540d\u79f0\u3002\n      name: player\n      type: {\n        # \u6307\u5b9a\u6570\u636e\u6e90\u6587\u4ef6\u683c\u5f0f\uff0c\u8bbe\u7f6e\u4e3a Oracle\u3002\n        source: oracle\n        # \u6307\u5b9a\u5982\u4f55\u5c06\u70b9\u6570\u636e\u5bfc\u5165 NebulaGraph \uff1aClient \u6216 SST\u3002\n        sink: client\n      }\n\n\n      url:\"jdbc:oracle:thin:@host:1521:basketball\"\n      driver: \"oracle.jdbc.driver.OracleDriver\"\n      user: \"root\"\n      password: \"123456\"\n\n      # \u626b\u63cf\u5355\u4e2a\u8868\u8bfb\u53d6\u6570\u636e\u3002\n      # nebula-exchange_spark_2.2 \u5fc5\u987b\u914d\u7f6e\u8be5\u53c2\u6570\u3002\u4e0d\u652f\u6301\u914d\u7f6e sentence\u3002\n      # nebula-exchange_spark_2.4 \u548c nebula-exchange_spark_3.0 \u53ef\u4ee5\u914d\u7f6e\u8be5\u53c2\u6570\uff0c\u4f46\u662f\u4e0d\u80fd\u548c sentence \u540c\u65f6\u914d\u7f6e\u3002\n      table:\"basketball.player\"\n\n      # \u901a\u8fc7\u67e5\u8be2\u8bed\u53e5\u8bfb\u53d6\u6570\u636e\u3002\n      # nebula-exchange_spark_2.2 \u4e0d\u652f\u6301\u8be5\u53c2\u6570\u3002\n      # nebula-exchange_spark_2.4 \u548c nebula-exchange_spark_3.0 \u53ef\u4ee5\u914d\u7f6e\u8be5\u53c2\u6570\uff0c\u4f46\u662f\u4e0d\u80fd\u548c table \u540c\u65f6\u914d\u7f6e\u3002\u652f\u6301\u591a\u8868\u67e5\u8be2\u3002\n      # sentence: \"select * from  people, player, team\"\n\n      # \u5728 fields \u91cc\u6307\u5b9a player \u8868\u4e2d\u7684\u5217\u540d\u79f0\uff0c\u5176\u5bf9\u5e94\u7684 value \u4f1a\u4f5c\u4e3a NebulaGraph \u4e2d\u6307\u5b9a\u5c5e\u6027\u3002\n      # fields \u548c nebula.fields \u91cc\u7684\u914d\u7f6e\u5fc5\u987b\u4e00\u4e00\u5bf9\u5e94\u3002\n      # \u5982\u679c\u9700\u8981\u6307\u5b9a\u591a\u4e2a\u5217\u540d\u79f0\uff0c\u7528\u82f1\u6587\u9017\u53f7\uff08,\uff09\u9694\u5f00\u3002\n      fields: [age,name]\n      nebula.fields: [age,name]\n\n      # \u6307\u5b9a\u8868\u4e2d\u67d0\u4e00\u5217\u6570\u636e\u4e3a NebulaGraph \u4e2d\u70b9 VID \u7684\u6765\u6e90\u3002\n      vertex: {\n        field:playerid\n      # udf:{\n      #            separator:\"_\"\n      #            oldColNames:[field-0,field-1,field-2]\n      #            newColName:new-field\n      #        }\n      # \u4e3a VID \u589e\u52a0\u6307\u5b9a\u7684\u524d\u7f00\u3002\u4f8b\u5982 VID \u4e3a 12345\uff0c\u589e\u52a0\u524d\u7f00 tag1 \u540e\u4e3a tag1_12345\u3002\u4e0b\u5212\u7ebf\u65e0\u6cd5\u4fee\u6539\u3002\n      # prefix:\"tag1\"\n      # \u5bf9 string \u7c7b\u578b\u7684 VID \u8fdb\u884c\u54c8\u5e0c\u5316\u64cd\u4f5c\u3002\n      # policy:hash\n      }\n\n      # \u6279\u91cf\u64cd\u4f5c\u7c7b\u578b\uff0c\u5305\u62ec INSERT\u3001UPDATE \u548c DELETE\u3002\u9ed8\u8ba4\u4e3a INSERT\u3002\n      #writeMode: INSERT\n\n      # \u6279\u91cf\u5220\u9664\u65f6\u662f\u5426\u5220\u9664\u8be5\u70b9\u5173\u8054\u7684\u51fa\u8fb9\u548c\u5165\u8fb9\u3002`writeMode`\u4e3a`DELETE`\u65f6\u8be5\u53c2\u6570\u751f\u6548\u3002\n      #deleteEdge: false\n\n      # \u5355\u6279\u6b21\u5199\u5165 NebulaGraph \u7684\u6570\u636e\u6761\u6570\u3002\n      batch: 256\n\n      # \u6570\u636e\u5199\u5165 NebulaGraph \u65f6\u9700\u8981\u521b\u5efa\u7684\u5206\u533a\u6570\u3002\n      partition: 32\n    }\n    # \u8bbe\u7f6e Tag team \u76f8\u5173\u4fe1\u606f\u3002\n    {\n      name: team\n      type: {\n        source: oracle\n        sink: client\n      }\n\n      url:\"jdbc:oracle:thin:@host:1521:db\"\n      driver: \"oracle.jdbc.driver.OracleDriver\"\n      user: \"root\"\n      password: \"123456\"\n      table: \"basketball.team\"\n      sentence: \"select teamid, name from team\"\n\n      fields: [name]\n      nebula.fields: [name]\n      vertex: {\n        field: teamid\n      }\n      batch: 256\n      partition: 32\n    }\n\n  ]\n\n  # \u5904\u7406\u8fb9\u6570\u636e\n  edges: [\n    # \u8bbe\u7f6e Edge type follow \u76f8\u5173\u4fe1\u606f\n    {\n      #  NebulaGraph \u4e2d\u5bf9\u5e94\u7684 Edge type \u540d\u79f0\u3002\n      name: follow\n\n      type: {\n        # \u6307\u5b9a\u6570\u636e\u6e90\u6587\u4ef6\u683c\u5f0f\uff0c\u8bbe\u7f6e\u4e3a Oracle\u3002\n        source: oracle\n\n        # \u6307\u5b9a\u8fb9\u6570\u636e\u5bfc\u5165 NebulaGraph \u7684\u65b9\u5f0f\uff0c\n        # \u6307\u5b9a\u5982\u4f55\u5c06\u70b9\u6570\u636e\u5bfc\u5165 NebulaGraph \uff1aClient \u6216 SST\u3002\n        sink: client\n      }\n\n      url:\"jdbc:oracle:thin:@host:1521:db\"\n      driver: \"oracle.jdbc.driver.OracleDriver\"\n      user: \"root\"\n      password: \"123456\"\n\n      # \u626b\u63cf\u5355\u4e2a\u8868\u8bfb\u53d6\u6570\u636e\u3002\n      # nebula-exchange_spark_2.2 \u5fc5\u987b\u914d\u7f6e\u8be5\u53c2\u6570\u3002\u4e0d\u652f\u6301\u914d\u7f6e sentence\u3002\n      # nebula-exchange_spark_2.4 \u548c nebula-exchange_spark_3.0 \u53ef\u4ee5\u914d\u7f6e\u8be5\u53c2\u6570\uff0c\u4f46\u662f\u4e0d\u80fd\u548c sentence \u540c\u65f6\u914d\u7f6e\u3002\n      table:\"basketball.follow\"\n\n      # \u901a\u8fc7\u67e5\u8be2\u8bed\u53e5\u8bfb\u53d6\u6570\u636e\u3002\n      # nebula-exchange_spark_2.2 \u4e0d\u652f\u6301\u8be5\u53c2\u6570\u3002\n      # nebula-exchange_spark_2.4 \u548c nebula-exchange_spark_3.0 \u53ef\u4ee5\u914d\u7f6e\u8be5\u53c2\u6570\uff0c\u4f46\u662f\u4e0d\u80fd\u548c table \u540c\u65f6\u914d\u7f6e\u3002\u652f\u6301\u591a\u8868\u67e5\u8be2\u3002\n      # sentence: \"select * from  follow, serve\"\n\n      # \u5728 fields \u91cc\u6307\u5b9a follow \u8868\u4e2d\u7684\u5217\u540d\u79f0\uff0c\u5176\u5bf9\u5e94\u7684 value \u4f1a\u4f5c\u4e3a NebulaGraph \u4e2d\u6307\u5b9a\u5c5e\u6027\u3002\n      # fields \u548c nebula.fields \u91cc\u7684\u914d\u7f6e\u5fc5\u987b\u4e00\u4e00\u5bf9\u5e94\u3002\n      # \u5982\u679c\u9700\u8981\u6307\u5b9a\u591a\u4e2a\u5217\u540d\u79f0\uff0c\u7528\u82f1\u6587\u9017\u53f7\uff08,\uff09\u9694\u5f00\u3002\n      fields: [degree]\n      nebula.fields: [degree]\n\n      # \u5728 source \u91cc\uff0c\u5c06 follow \u8868\u4e2d\u67d0\u4e00\u5217\u4f5c\u4e3a\u8fb9\u7684\u8d77\u59cb\u70b9\u6570\u636e\u6e90\u3002\n      # \u5728 target \u91cc\uff0c\u5c06 follow \u8868\u4e2d\u67d0\u4e00\u5217\u4f5c\u4e3a\u8fb9\u7684\u76ee\u7684\u70b9\u6570\u636e\u6e90\u3002\n      source: {\n        field: src_player\n      # udf:{\n      #            separator:\"_\"\n      #            oldColNames:[field-0,field-1,field-2]\n      #            newColName:new-field\n      #        }\n      # \u4e3a VID \u589e\u52a0\u6307\u5b9a\u7684\u524d\u7f00\u3002\u4f8b\u5982 VID \u4e3a 12345\uff0c\u589e\u52a0\u524d\u7f00 tag1 \u540e\u4e3a tag1_12345\u3002\u4e0b\u5212\u7ebf\u65e0\u6cd5\u4fee\u6539\u3002\n      # prefix:\"tag1\"\n      # \u5bf9 string \u7c7b\u578b\u7684 VID \u8fdb\u884c\u54c8\u5e0c\u5316\u64cd\u4f5c\u3002\n      # policy:hash\n      }\n\n      target: {\n        field: dst_player\n      # udf:{\n      #            separator:\"_\"\n      #            oldColNames:[field-0,field-1,field-2]\n      #            newColName:new-field\n      #        }\n      # \u4e3a VID \u589e\u52a0\u6307\u5b9a\u7684\u524d\u7f00\u3002\u4f8b\u5982 VID \u4e3a 12345\uff0c\u589e\u52a0\u524d\u7f00 tag1 \u540e\u4e3a tag1_12345\u3002\u4e0b\u5212\u7ebf\u65e0\u6cd5\u4fee\u6539\u3002\n      # prefix:\"tag1\"\n      # \u5bf9 string \u7c7b\u578b\u7684 VID \u8fdb\u884c\u54c8\u5e0c\u5316\u64cd\u4f5c\u3002\n      # policy:hash\n      }\n\n      # \u6307\u5b9a\u4e00\u4e2a\u5217\u4f5c\u4e3a rank \u7684\u6e90\uff08\u53ef\u9009\uff09\u3002\n      #ranking: rank\n\n      # \u6279\u91cf\u64cd\u4f5c\u7c7b\u578b\uff0c\u5305\u62ec INSERT\u3001UPDATE \u548c DELETE\u3002\u9ed8\u8ba4\u4e3a INSERT\u3002\n      #writeMode: INSERT\n\n      # \u5355\u6279\u6b21\u5199\u5165 NebulaGraph \u7684\u6570\u636e\u6761\u6570\u3002\n      batch: 256\n\n      # \u6570\u636e\u5199\u5165 NebulaGraph \u65f6\u9700\u8981\u521b\u5efa\u7684\u5206\u533a\u6570\u3002\n      partition: 32\n    }\n\n    # \u8bbe\u7f6e Edge type serve \u76f8\u5173\u4fe1\u606f\n    {\n      name: serve\n      type: {\n        source: oracle\n        sink: client\n      }\n\n      url:\"jdbc:oracle:thin:@host:1521:db\"\n      driver: \"oracle.jdbc.driver.OracleDriver\"\n      user: \"root\"\n      password: \"123456\"\n      table: \"basketball.serve\"\n      sentence: \"select playerid, teamid, start_year, end_year from serve\"\n\n      fields: [start_year,end_year]\n      nebula.fields: [start_year,end_year]\n      source: {\n        field: playerid\n      }\n      target: {\n        field: teamid\n      }\n\n      # \u6307\u5b9a\u4e00\u4e2a\u5217\u4f5c\u4e3a rank \u7684\u6e90\uff08\u53ef\u9009\uff09\u3002\n      #ranking: rank\n\n      batch: 256\n      partition: 32\n    }\n  ]\n}\n</code></pre>"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-oracle/#3_nebulagraph","title":"\u6b65\u9aa4 3\uff1a\u5411 NebulaGraph \u5bfc\u5165\u6570\u636e","text":"<p>\u8fd0\u884c\u5982\u4e0b\u547d\u4ee4\u5c06 Oracle \u6570\u636e\u5bfc\u5165\u5230 NebulaGraph \u4e2d\u3002\u5173\u4e8e\u53c2\u6570\u7684\u8bf4\u660e\uff0c\u8bf7\u53c2\u89c1\u5bfc\u5165\u547d\u4ee4\u53c2\u6570\u3002</p> <pre><code>${SPARK_HOME}/bin/spark-submit --master \"local\" --class com.vesoft.nebula.exchange.Exchange &lt;nebula-exchange.jar_path&gt; -c &lt;oracle_application.conf_path&gt;\n</code></pre> <p>Note</p> <p>JAR \u5305\u6709\u4e24\u79cd\u83b7\u53d6\u65b9\u5f0f\uff1a\u81ea\u884c\u7f16\u8bd1\u6216\u8005\u4ece maven \u4ed3\u5e93\u4e0b\u8f7d\u3002</p> <p>\u793a\u4f8b\uff1a</p> <pre><code>${SPARK_HOME}/bin/spark-submit  --master \"local\" --class com.vesoft.nebula.exchange.Exchange  /root/nebula-exchange/nebula-exchange/target/nebula-exchange_spark_2.4-3.7.0.jar  -c /root/nebula-exchange/nebula-exchange/target/classes/oracle_application.conf\n</code></pre> <p>\u7528\u6237\u53ef\u4ee5\u5728\u8fd4\u56de\u4fe1\u606f\u4e2d\u641c\u7d22<code>batchSuccess.&lt;tag_name/edge_name&gt;</code>\uff0c\u786e\u8ba4\u6210\u529f\u7684\u6570\u91cf\u3002\u4f8b\u5982<code>batchSuccess.follow: 300</code>\u3002</p>"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-oracle/#4","title":"\u6b65\u9aa4 4\uff1a\uff08\u53ef\u9009\uff09\u9a8c\u8bc1\u6570\u636e","text":"<p>\u7528\u6237\u53ef\u4ee5\u5728 NebulaGraph \u5ba2\u6237\u7aef\uff08\u4f8b\u5982 NebulaGraph Studio\uff09\u4e2d\u6267\u884c\u67e5\u8be2\u8bed\u53e5\uff0c\u786e\u8ba4\u6570\u636e\u662f\u5426\u5df2\u5bfc\u5165\u3002\u4f8b\u5982\uff1a</p> <pre><code>LOOKUP ON player YIELD id(vertex);\n</code></pre> <p>\u7528\u6237\u4e5f\u53ef\u4ee5\u4f7f\u7528\u547d\u4ee4 <code>SHOW STATS</code> \u67e5\u770b\u7edf\u8ba1\u6570\u636e\u3002</p>"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-oracle/#5_nebulagraph","title":"\u6b65\u9aa4 5\uff1a\uff08\u5982\u6709\uff09\u5728 NebulaGraph \u4e2d\u91cd\u5efa\u7d22\u5f15","text":"<p>\u5bfc\u5165\u6570\u636e\u540e\uff0c\u7528\u6237\u53ef\u4ee5\u5728 NebulaGraph \u4e2d\u91cd\u65b0\u521b\u5efa\u5e76\u91cd\u5efa\u7d22\u5f15\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1\u7d22\u5f15\u4ecb\u7ecd\u3002</p>"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-orc/","title":"\u5bfc\u5165 ORC \u6587\u4ef6\u6570\u636e","text":"<p>\u672c\u6587\u4ee5\u4e00\u4e2a\u793a\u4f8b\u8bf4\u660e\u5982\u4f55\u4f7f\u7528 Exchange \u5c06\u5b58\u50a8\u5728 HDFS \u6216\u672c\u5730\u7684 ORC \u6587\u4ef6\u6570\u636e\u5bfc\u5165 NebulaGraph\u3002</p>"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-orc/#_1","title":"\u6570\u636e\u96c6","text":"<p>\u672c\u6587\u4ee5 basketballplayer \u6570\u636e\u96c6\u4e3a\u4f8b\u3002</p>"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-orc/#_2","title":"\u73af\u5883\u914d\u7f6e","text":"<p>\u672c\u6587\u793a\u4f8b\u5728 MacOS \u4e0b\u5b8c\u6210\uff0c\u4ee5\u4e0b\u662f\u76f8\u5173\u7684\u73af\u5883\u914d\u7f6e\u4fe1\u606f\uff1a</p> <ul> <li>\u786c\u4ef6\u89c4\u683c\uff1a<ul> <li>CPU\uff1a1.7 GHz Quad-Core Intel Core i7</li> <li>\u5185\u5b58\uff1a16 GB</li> </ul> </li> </ul> <ul> <li>Spark\uff1a2.4.7 \u5355\u673a\u7248</li> </ul> <ul> <li>Hadoop\uff1a2.9.2 \u4f2a\u5206\u5e03\u5f0f\u90e8\u7f72</li> </ul> <ul> <li>NebulaGraph \uff1amaster\u3002</li> </ul>"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-orc/#_3","title":"\u524d\u63d0\u6761\u4ef6","text":"<p>\u5f00\u59cb\u5bfc\u5165\u6570\u636e\u4e4b\u524d\uff0c\u7528\u6237\u9700\u8981\u786e\u8ba4\u4ee5\u4e0b\u4fe1\u606f\uff1a</p> <ul> <li> <p>\u5df2\u7ecf\u5b89\u88c5\u90e8\u7f72 NebulaGraph  \u5e76\u83b7\u53d6\u5982\u4e0b\u4fe1\u606f\uff1a</p> <ul> <li>Graph \u670d\u52a1\u548c Meta \u670d\u52a1\u7684\u7684 IP \u5730\u5740\u548c\u7aef\u53e3\u3002</li> </ul> <ul> <li>\u62e5\u6709 NebulaGraph \u5199\u6743\u9650\u7684\u7528\u6237\u540d\u548c\u5bc6\u7801\u3002</li> </ul> </li> </ul> <ul> <li>\u5df2\u7ecf\u7f16\u8bd1 Exchange\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1\u7f16\u8bd1 Exchange\u3002\u672c\u793a\u4f8b\u4e2d\u4f7f\u7528 Exchange 3.7.0\u3002</li> </ul> <ul> <li>\u5df2\u7ecf\u5b89\u88c5 Spark\u3002</li> </ul> <ul> <li>\u4e86\u89e3 NebulaGraph \u4e2d\u521b\u5efa Schema \u7684\u4fe1\u606f\uff0c\u5305\u62ec Tag \u548c Edge type \u7684\u540d\u79f0\u3001\u5c5e\u6027\u7b49\u3002</li> </ul> <ul> <li>\u5982\u679c\u6587\u4ef6\u5b58\u50a8\u5728 HDFS \u4e0a\uff0c\u9700\u8981\u786e\u8ba4 Hadoop \u670d\u52a1\u8fd0\u884c\u6b63\u5e38\u3002</li> </ul> <ul> <li>\u5982\u679c\u6587\u4ef6\u5b58\u50a8\u5728\u672c\u5730\u4e14 NebulaGraph \u662f\u96c6\u7fa4\u67b6\u6784\uff0c\u9700\u8981\u5728\u96c6\u7fa4\u6bcf\u53f0\u673a\u5668\u672c\u5730\u76f8\u540c\u76ee\u5f55\u4e0b\u653e\u7f6e\u6587\u4ef6\u3002</li> </ul>"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-orc/#_4","title":"\u64cd\u4f5c\u6b65\u9aa4","text":""},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-orc/#1_nebulagraph_schema","title":"\u6b65\u9aa4 1\uff1a\u5728 NebulaGraph \u4e2d\u521b\u5efa Schema","text":"<p>\u5206\u6790 ORC \u6587\u4ef6\u4e2d\u7684\u6570\u636e\uff0c\u6309\u4ee5\u4e0b\u6b65\u9aa4\u5728 NebulaGraph \u4e2d\u521b\u5efa Schema\uff1a</p> <ol> <li> <p>\u786e\u8ba4 Schema \u8981\u7d20\u3002 NebulaGraph \u4e2d\u7684 Schema \u8981\u7d20\u5982\u4e0b\u8868\u6240\u793a\u3002</p> \u8981\u7d20 \u540d\u79f0 \u5c5e\u6027 Tag <code>player</code> <code>name string, age int</code> Tag <code>team</code> <code>name string</code> Edge Type <code>follow</code> <code>degree int</code> Edge Type <code>serve</code> <code>start_year int, end_year int</code> </li> <li> <p>\u4f7f\u7528 NebulaGraph Console \u521b\u5efa\u4e00\u4e2a\u56fe\u7a7a\u95f4 basketballplayer\uff0c\u5e76\u521b\u5efa\u4e00\u4e2a Schema\uff0c\u5982\u4e0b\u6240\u793a\u3002</p> <pre><code>## \u521b\u5efa\u56fe\u7a7a\u95f4\nnebula&gt; CREATE SPACE basketballplayer \\\n        (partition_num = 10, \\\n        replica_factor = 1, \\\n        vid_type = FIXED_STRING(30));\n\n## \u9009\u62e9\u56fe\u7a7a\u95f4 basketballplayer\nnebula&gt; USE basketballplayer;\n\n## \u521b\u5efa Tag player\nnebula&gt; CREATE TAG player(name string, age int);\n\n## \u521b\u5efa Tag team\nnebula&gt; CREATE TAG team(name string);\n\n## \u521b\u5efa Edge type follow\nnebula&gt; CREATE EDGE follow(degree int);\n\n## \u521b\u5efa Edge type serve\nnebula&gt; CREATE EDGE serve(start_year int, end_year int);\n</code></pre> </li> </ol> <p>\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u89c1\u5feb\u901f\u5f00\u59cb\u3002</p>"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-orc/#2_orc","title":"\u6b65\u9aa4 2\uff1a\u5904\u7406 ORC \u6587\u4ef6","text":"<p>\u786e\u8ba4\u4ee5\u4e0b\u4fe1\u606f\uff1a</p> <ol> <li> <p>\u5904\u7406 ORC \u6587\u4ef6\u4ee5\u6ee1\u8db3 Schema \u7684\u8981\u6c42\u3002</p> </li> <li> <p>\u83b7\u53d6 ORC \u6587\u4ef6\u5b58\u50a8\u8def\u5f84\u3002</p> </li> </ol>"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-orc/#3","title":"\u6b65\u9aa4 3\uff1a\u4fee\u6539\u914d\u7f6e\u6587\u4ef6","text":"<p>\u7f16\u8bd1 Exchange \u540e\uff0c\u590d\u5236<code>target/classes/application.conf</code>\u6587\u4ef6\u8bbe\u7f6e ORC \u6570\u636e\u6e90\u76f8\u5173\u7684\u914d\u7f6e\u3002\u5728\u672c\u793a\u4f8b\u4e2d\uff0c\u590d\u5236\u7684\u6587\u4ef6\u540d\u4e3a<code>orc_application.conf</code>\u3002\u5404\u4e2a\u914d\u7f6e\u9879\u7684\u8be6\u7ec6\u8bf4\u660e\u8bf7\u53c2\u89c1\u914d\u7f6e\u8bf4\u660e\u3002</p> <pre><code>{\n  # Spark \u76f8\u5173\u914d\u7f6e\n  spark: {\n    app: {\n      name: NebulaGraph Exchange 3.7.0\n    }\n    driver: {\n      cores: 1\n      maxResultSize: 1G\n    }\n    executor: {\n        memory:1G\n    }\n\n    cores: {\n      max: 16\n    }\n  }\n\n  #  NebulaGraph \u76f8\u5173\u914d\u7f6e\n  nebula: {\n    address:{\n      # \u6307\u5b9a Graph \u670d\u52a1\u548c\u6240\u6709 Meta \u670d\u52a1\u7684 IP \u5730\u5740\u548c\u7aef\u53e3\u3002\n      # \u5982\u679c\u6709\u591a\u53f0\u670d\u52a1\u5668\uff0c\u5730\u5740\u4e4b\u95f4\u7528\u82f1\u6587\u9017\u53f7\uff08,\uff09\u5206\u9694\u3002\n      # \u683c\u5f0f\uff1a\"ip1:port\",\"ip2:port\",\"ip3:port\"\n      graph:[\"127.0.0.1:9669\"]\n      #\u4efb\u610f\u4e00\u4e2a Meta \u670d\u52a1\u7684\u5730\u5740\u3002\n      #\u5982\u679c\u60a8\u7684 NebulaGraph \u5728\u865a\u62df\u7f51\u7edc\u4e2d\uff0c\u5982k8s\uff0c\u8bf7\u914d\u7f6e Leader Meta\u7684\u5730\u5740\u3002\n      meta:[\"127.0.0.1:9559\"]\n    }\n\n    # \u6307\u5b9a\u62e5\u6709 NebulaGraph \u5199\u6743\u9650\u7684\u7528\u6237\u540d\u548c\u5bc6\u7801\u3002\n    user: root\n    pswd: nebula\n    # \u662f\u5426\u4f7f\u7528 RSA \u52a0\u5bc6\u7684\u5bc6\u7801\u3002\n    # enableRSA: true\n    # \u4f7f\u7528 RSA \u52a0\u5bc6\u5bc6\u7801\u65f6\u7684\u5bc6\u94a5\u3002\n    # privateKey: \"\"\n\n    # \u6307\u5b9a\u56fe\u7a7a\u95f4\u540d\u79f0\u3002\n    space: basketballplayer\n    connection: {\n      timeout: 3000\n      retry: 3\n    }\n    execution: {\n      retry: 3\n    }\n    error: {\n      max: 32\n      output: /tmp/errors\n    }\n    rate: {\n      limit: 1024\n      timeout: 1000\n    }\n  }\n\n  # \u5904\u7406\u70b9\n  tags: [\n    # \u8bbe\u7f6e Tag player \u76f8\u5173\u4fe1\u606f\u3002\n    {\n      # \u6307\u5b9a NebulaGraph \u4e2d\u5b9a\u4e49\u7684 Tag \u540d\u79f0\u3002\n      name: player\n      type: {\n        # \u6307\u5b9a\u6570\u636e\u6e90\uff0c\u4f7f\u7528 ORC\u3002\n        source: orc\n\n        # \u6307\u5b9a\u5982\u4f55\u5c06\u70b9\u6570\u636e\u5bfc\u5165 NebulaGraph \uff1aClient \u6216 SST\u3002\n        sink: client\n      }\n\n      # \u6307\u5b9a ORC \u6587\u4ef6\u7684\u8def\u5f84\u3002\n      # \u5982\u679c\u6587\u4ef6\u5b58\u50a8\u5728 HDFS \u4e0a\uff0c\u7528\u53cc\u5f15\u53f7\u62ec\u8d77\u8def\u5f84\uff0c\u4ee5 hdfs://\u5f00\u5934\uff0c\u4f8b\u5982\"hdfs://ip:port/xx/xx\"\u3002\n      # \u5982\u679c\u6587\u4ef6\u5b58\u50a8\u5728\u672c\u5730\uff0c\u7528\u53cc\u5f15\u53f7\u62ec\u8d77\u8def\u5f84\uff0c\u4ee5 file://\u5f00\u5934\uff0c\u4f8b\u5982\"file:///tmp/xx.orc\"\u3002\n      path: \"hdfs://192.168.*.*:9000/data/vertex_player.orc\"\n\n      # \u5728 fields \u91cc\u6307\u5b9a ORC \u6587\u4ef6\u4e2d key \u540d\u79f0\uff0c\u5176\u5bf9\u5e94\u7684 value \u4f1a\u4f5c\u4e3a NebulaGraph \u4e2d\u6307\u5b9a\u5c5e\u6027\u7684\u6570\u636e\u6e90\u3002\n      # \u5982\u679c\u9700\u8981\u6307\u5b9a\u591a\u4e2a\u503c\uff0c\u7528\u82f1\u6587\u9017\u53f7\uff08,\uff09\u9694\u5f00\u3002\n      fields: [age,name]\n\n      # \u6307\u5b9a NebulaGraph \u4e2d\u5b9a\u4e49\u7684\u5c5e\u6027\u540d\u79f0\u3002\n      # fields \u4e0e nebula.fields \u7684\u987a\u5e8f\u5fc5\u987b\u4e00\u4e00\u5bf9\u5e94\u3002\n      nebula.fields: [age, name]\n\n      # \u6307\u5b9a\u4e00\u4e2a\u5217\u4f5c\u4e3a VID \u7684\u6e90\u3002\n      # vertex \u7684\u503c\u5fc5\u987b\u4e0e ORC \u6587\u4ef6\u4e2d\u7684\u5b57\u6bb5\u4fdd\u6301\u4e00\u81f4\u3002\n      # \u76ee\u524d\uff0cNebulaGraph  master\u4ec5\u652f\u6301\u5b57\u7b26\u4e32\u6216\u6574\u6570\u7c7b\u578b\u7684 VID\u3002\n      vertex: {\n        field:id\n      # udf:{\n      #            separator:\"_\"\n      #            oldColNames:[field-0,field-1,field-2]\n      #            newColName:new-field\n      #        }\n      # \u4e3a VID \u589e\u52a0\u6307\u5b9a\u7684\u524d\u7f00\u3002\u4f8b\u5982 VID \u4e3a 12345\uff0c\u589e\u52a0\u524d\u7f00 tag1 \u540e\u4e3a tag1_12345\u3002\u4e0b\u5212\u7ebf\u65e0\u6cd5\u4fee\u6539\u3002\n      # prefix:\"tag1\"\n      # \u5bf9 string \u7c7b\u578b\u7684 VID \u8fdb\u884c\u54c8\u5e0c\u5316\u64cd\u4f5c\u3002\n      # policy:hash\n      }\n\n      # \u6279\u91cf\u64cd\u4f5c\u7c7b\u578b\uff0c\u5305\u62ec INSERT\u3001UPDATE \u548c DELETE\u3002\u9ed8\u8ba4\u4e3a INSERT\u3002\n      #writeMode: INSERT\n\n      # \u6279\u91cf\u5220\u9664\u65f6\u662f\u5426\u5220\u9664\u8be5\u70b9\u5173\u8054\u7684\u51fa\u8fb9\u548c\u5165\u8fb9\u3002`writeMode`\u4e3a`DELETE`\u65f6\u8be5\u53c2\u6570\u751f\u6548\u3002\n      #deleteEdge: false\n\n      # \u6307\u5b9a\u5355\u6279\u6b21\u5199\u5165 NebulaGraph \u7684\u6700\u5927\u70b9\u6570\u91cf\u3002\n      batch: 256\n\n      # \u6570\u636e\u5199\u5165 NebulaGraph \u65f6\u9700\u8981\u521b\u5efa\u7684\u5206\u533a\u6570\u3002\n      partition: 32\n    }\n\n    # \u8bbe\u7f6e Tag team \u76f8\u5173\u4fe1\u606f\u3002\n    {\n      name: team\n      type: {\n        source: orc\n        sink: client\n      }\n      path: \"hdfs://192.168.*.*:9000/data/vertex_team.orc\"\n      fields: [name]\n      nebula.fields: [name]\n      vertex: {\n        field:id\n      }\n      batch: 256\n      partition: 32\n    }\n\n    # \u5982\u679c\u9700\u8981\u6dfb\u52a0\u66f4\u591a\u70b9\uff0c\u8bf7\u53c2\u8003\u524d\u9762\u7684\u914d\u7f6e\u8fdb\u884c\u6dfb\u52a0\u3002\n  ]\n  # \u5904\u7406\u8fb9\n  edges: [\n    # \u8bbe\u7f6e Edge type follow \u76f8\u5173\u4fe1\u606f\u3002\n    {\n      # \u6307\u5b9a NebulaGraph \u4e2d\u5b9a\u4e49\u7684 Edge type \u540d\u79f0\u3002\n      name: follow\n      type: {\n        # \u6307\u5b9a\u6570\u636e\u6e90\uff0c\u4f7f\u7528 ORC\u3002\n        source: orc\n\n        # \u6307\u5b9a\u5982\u4f55\u5c06\u70b9\u6570\u636e\u5bfc\u5165 NebulaGraph \uff1aClient \u6216 SST\u3002\n        sink: client\n      }\n\n      # \u6307\u5b9a ORC \u6587\u4ef6\u7684\u8def\u5f84\u3002\n      # \u5982\u679c\u6587\u4ef6\u5b58\u50a8\u5728 HDFS \u4e0a\uff0c\u7528\u53cc\u5f15\u53f7\u62ec\u8d77\u8def\u5f84\uff0c\u4ee5 hdfs://\u5f00\u5934\uff0c\u4f8b\u5982\"hdfs://ip:port/xx/xx\"\u3002\n      # \u5982\u679c\u6587\u4ef6\u5b58\u50a8\u5728\u672c\u5730\uff0c\u7528\u53cc\u5f15\u53f7\u62ec\u8d77\u8def\u5f84\uff0c\u4ee5 file://\u5f00\u5934\uff0c\u4f8b\u5982\"file:///tmp/xx.orc\"\u3002\n      path: \"hdfs://192.168.*.*:9000/data/edge_follow.orc\"\n\n      # \u5728 fields \u91cc\u6307\u5b9a ORC \u6587\u4ef6\u4e2d key \u540d\u79f0\uff0c\u5176\u5bf9\u5e94\u7684 value \u4f1a\u4f5c\u4e3a NebulaGraph \u4e2d\u6307\u5b9a\u5c5e\u6027\u7684\u6570\u636e\u6e90\u3002\n      # \u5982\u679c\u9700\u8981\u6307\u5b9a\u591a\u4e2a\u503c\uff0c\u7528\u82f1\u6587\u9017\u53f7\uff08,\uff09\u9694\u5f00\u3002\n      fields: [degree]\n\n      # \u6307\u5b9a NebulaGraph \u4e2d\u5b9a\u4e49\u7684\u5c5e\u6027\u540d\u79f0\u3002\n      # fields \u4e0e nebula.fields \u7684\u987a\u5e8f\u5fc5\u987b\u4e00\u4e00\u5bf9\u5e94\u3002\n      nebula.fields: [degree]\n\n      # \u6307\u5b9a\u4e00\u4e2a\u5217\u4f5c\u4e3a\u8d77\u59cb\u70b9\u548c\u76ee\u7684\u70b9\u7684\u6e90\u3002\n      # vertex \u7684\u503c\u5fc5\u987b\u4e0e ORC \u6587\u4ef6\u4e2d\u7684\u5b57\u6bb5\u4fdd\u6301\u4e00\u81f4\u3002\n      # \u76ee\u524d\uff0cNebulaGraph  master\u4ec5\u652f\u6301\u5b57\u7b26\u4e32\u6216\u6574\u6570\u7c7b\u578b\u7684 VID\u3002\n      source: {\n        field: src\n      # udf:{\n      #            separator:\"_\"\n      #            oldColNames:[field-0,field-1,field-2]\n      #            newColName:new-field\n      #        }\n      # \u4e3a VID \u589e\u52a0\u6307\u5b9a\u7684\u524d\u7f00\u3002\u4f8b\u5982 VID \u4e3a 12345\uff0c\u589e\u52a0\u524d\u7f00 tag1 \u540e\u4e3a tag1_12345\u3002\u4e0b\u5212\u7ebf\u65e0\u6cd5\u4fee\u6539\u3002\n      # prefix:\"tag1\"\n      # \u5bf9 string \u7c7b\u578b\u7684 VID \u8fdb\u884c\u54c8\u5e0c\u5316\u64cd\u4f5c\u3002\n      # policy:hash\n      }\n      target: {\n        field: dst\n      # udf:{\n      #            separator:\"_\"\n      #            oldColNames:[field-0,field-1,field-2]\n      #            newColName:new-field\n      #        }\n      # \u4e3a VID \u589e\u52a0\u6307\u5b9a\u7684\u524d\u7f00\u3002\u4f8b\u5982 VID \u4e3a 12345\uff0c\u589e\u52a0\u524d\u7f00 tag1 \u540e\u4e3a tag1_12345\u3002\u4e0b\u5212\u7ebf\u65e0\u6cd5\u4fee\u6539\u3002\n      # prefix:\"tag1\"\n      # \u5bf9 string \u7c7b\u578b\u7684 VID \u8fdb\u884c\u54c8\u5e0c\u5316\u64cd\u4f5c\u3002\n      # policy:hash\n      }\n\n      # \u6307\u5b9a\u4e00\u4e2a\u5217\u4f5c\u4e3a rank \u7684\u6e90\uff08\u53ef\u9009\uff09\u3002\n      #ranking: rank\n\n      # \u6279\u91cf\u64cd\u4f5c\u7c7b\u578b\uff0c\u5305\u62ec INSERT\u3001UPDATE \u548c DELETE\u3002\u9ed8\u8ba4\u4e3a INSERT\u3002\n      #writeMode: INSERT\n\n      # \u6307\u5b9a\u5355\u6279\u6b21\u5199\u5165 NebulaGraph \u7684\u6700\u5927\u8fb9\u6570\u91cf\u3002\n      batch: 256\n\n      # \u6570\u636e\u5199\u5165 NebulaGraph \u65f6\u9700\u8981\u521b\u5efa\u7684\u5206\u533a\u6570\u3002\n      partition: 32\n    }\n\n    # \u8bbe\u7f6e Edge type serve \u76f8\u5173\u4fe1\u606f\u3002\n    {\n      name: serve\n      type: {\n        source: orc\n        sink: client\n      }\n      path: \"hdfs://192.168.*.*:9000/data/edge_serve.orc\"\n      fields: [start_year,end_year]\n      nebula.fields: [start_year, end_year]\n      source: {\n        field: src\n      }\n      target: {\n        field: dst\n      }\n      batch: 256\n      partition: 32\n    }\n\n  ]\n  # \u5982\u679c\u9700\u8981\u6dfb\u52a0\u66f4\u591a\u8fb9\uff0c\u8bf7\u53c2\u8003\u524d\u9762\u7684\u914d\u7f6e\u8fdb\u884c\u6dfb\u52a0\u3002\n}\n</code></pre>"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-orc/#4_nebulagraph","title":"\u6b65\u9aa4 4\uff1a\u5411 NebulaGraph \u5bfc\u5165\u6570\u636e","text":"<p>\u8fd0\u884c\u5982\u4e0b\u547d\u4ee4\u5c06 ORC \u6587\u4ef6\u6570\u636e\u5bfc\u5165\u5230 NebulaGraph \u4e2d\u3002\u5173\u4e8e\u53c2\u6570\u7684\u8bf4\u660e\uff0c\u8bf7\u53c2\u89c1\u5bfc\u5165\u547d\u4ee4\u53c2\u6570\u3002</p> <pre><code>${SPARK_HOME}/bin/spark-submit --master \"local\" --class com.vesoft.nebula.exchange.Exchange &lt;nebula-exchange.jar_path&gt; -c &lt;orc_application.conf_path&gt; \n</code></pre> <p>Note</p> <p>JAR \u5305\u6709\u4e24\u79cd\u83b7\u53d6\u65b9\u5f0f\uff1a\u81ea\u884c\u7f16\u8bd1\u6216\u8005\u4ece maven \u4ed3\u5e93\u4e0b\u8f7d\u3002</p> <p>\u793a\u4f8b\uff1a</p> <pre><code>${SPARK_HOME}/bin/spark-submit  --master \"local\" --class com.vesoft.nebula.exchange.Exchange  /root/nebula-exchange/nebula-exchange/target/nebula-exchange_spark_2.4-3.7.0.jar  -c /root/nebula-exchange/nebula-exchange/target/classes/orc_application.conf\n</code></pre> <p>\u7528\u6237\u53ef\u4ee5\u5728\u8fd4\u56de\u4fe1\u606f\u4e2d\u641c\u7d22<code>batchSuccess.&lt;tag_name/edge_name&gt;</code>\uff0c\u786e\u8ba4\u6210\u529f\u7684\u6570\u91cf\u3002\u4f8b\u5982<code>batchSuccess.follow: 300</code>\u3002</p>"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-orc/#5","title":"\u6b65\u9aa4 5\uff1a\uff08\u53ef\u9009\uff09\u9a8c\u8bc1\u6570\u636e","text":"<p>\u7528\u6237\u53ef\u4ee5\u5728 NebulaGraph \u5ba2\u6237\u7aef\uff08\u4f8b\u5982 NebulaGraph Studio\uff09\u4e2d\u6267\u884c\u67e5\u8be2\u8bed\u53e5\uff0c\u786e\u8ba4\u6570\u636e\u662f\u5426\u5df2\u5bfc\u5165\u3002\u4f8b\u5982\uff1a</p> <pre><code>LOOKUP ON player YIELD id(vertex);\n</code></pre> <p>\u7528\u6237\u4e5f\u53ef\u4ee5\u4f7f\u7528\u547d\u4ee4 <code>SHOW STATS</code> \u67e5\u770b\u7edf\u8ba1\u6570\u636e\u3002</p>"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-orc/#6_nebulagraph","title":"\u6b65\u9aa4 6\uff1a\uff08\u5982\u6709\uff09\u5728 NebulaGraph \u4e2d\u91cd\u5efa\u7d22\u5f15","text":"<p>\u5bfc\u5165\u6570\u636e\u540e\uff0c\u7528\u6237\u53ef\u4ee5\u5728 NebulaGraph \u4e2d\u91cd\u65b0\u521b\u5efa\u5e76\u91cd\u5efa\u7d22\u5f15\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1\u7d22\u5f15\u4ecb\u7ecd\u3002</p>"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-parquet/","title":"\u5bfc\u5165 Parquet \u6587\u4ef6\u6570\u636e","text":"<p>\u672c\u6587\u4ee5\u4e00\u4e2a\u793a\u4f8b\u8bf4\u660e\u5982\u4f55\u4f7f\u7528 Exchange \u5c06\u5b58\u50a8\u5728 HDFS \u6216\u672c\u5730\u7684 Parquet \u6587\u4ef6\u6570\u636e\u5bfc\u5165 NebulaGraph \u3002</p>"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-parquet/#_1","title":"\u6570\u636e\u96c6","text":"<p>\u672c\u6587\u4ee5 basketballplayer \u6570\u636e\u96c6\u4e3a\u4f8b\u3002</p>"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-parquet/#_2","title":"\u73af\u5883\u914d\u7f6e","text":"<p>\u672c\u6587\u793a\u4f8b\u5728 MacOS \u4e0b\u5b8c\u6210\uff0c\u4ee5\u4e0b\u662f\u76f8\u5173\u7684\u73af\u5883\u914d\u7f6e\u4fe1\u606f\uff1a</p> <ul> <li>\u786c\u4ef6\u89c4\u683c\uff1a<ul> <li>CPU\uff1a1.7 GHz Quad-Core Intel Core i7</li> <li>\u5185\u5b58\uff1a16 GB</li> </ul> </li> </ul> <ul> <li>Spark\uff1a2.4.7 \u5355\u673a\u7248</li> </ul> <ul> <li>Hadoop\uff1a2.9.2 \u4f2a\u5206\u5e03\u5f0f\u90e8\u7f72</li> </ul> <ul> <li>NebulaGraph \uff1amaster\u3002</li> </ul>"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-parquet/#_3","title":"\u524d\u63d0\u6761\u4ef6","text":"<p>\u5f00\u59cb\u5bfc\u5165\u6570\u636e\u4e4b\u524d\uff0c\u7528\u6237\u9700\u8981\u786e\u8ba4\u4ee5\u4e0b\u4fe1\u606f\uff1a</p> <ul> <li> <p>\u5df2\u7ecf\u5b89\u88c5\u90e8\u7f72 NebulaGraph  \u5e76\u83b7\u53d6\u5982\u4e0b\u4fe1\u606f\uff1a</p> <ul> <li>Graph \u670d\u52a1\u548c Meta \u670d\u52a1\u7684\u7684 IP \u5730\u5740\u548c\u7aef\u53e3\u3002</li> </ul> <ul> <li>\u62e5\u6709 NebulaGraph \u5199\u6743\u9650\u7684\u7528\u6237\u540d\u548c\u5bc6\u7801\u3002</li> </ul> </li> </ul> <ul> <li>\u5df2\u7ecf\u7f16\u8bd1 Exchange\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1\u7f16\u8bd1 Exchange\u3002\u672c\u793a\u4f8b\u4e2d\u4f7f\u7528 Exchange 3.7.0\u3002</li> </ul> <ul> <li>\u5df2\u7ecf\u5b89\u88c5 Spark\u3002</li> </ul> <ul> <li>\u4e86\u89e3 NebulaGraph \u4e2d\u521b\u5efa Schema \u7684\u4fe1\u606f\uff0c\u5305\u62ec Tag \u548c Edge type \u7684\u540d\u79f0\u3001\u5c5e\u6027\u7b49\u3002</li> </ul> <ul> <li>\u5982\u679c\u6587\u4ef6\u5b58\u50a8\u5728 HDFS \u4e0a\uff0c\u9700\u8981\u786e\u8ba4 Hadoop \u670d\u52a1\u8fd0\u884c\u6b63\u5e38\u3002</li> </ul> <ul> <li>\u5982\u679c\u6587\u4ef6\u5b58\u50a8\u5728\u672c\u5730\u4e14 NebulaGraph \u662f\u96c6\u7fa4\u67b6\u6784\uff0c\u9700\u8981\u5728\u96c6\u7fa4\u6bcf\u53f0\u673a\u5668\u672c\u5730\u76f8\u540c\u76ee\u5f55\u4e0b\u653e\u7f6e\u6587\u4ef6\u3002</li> </ul>"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-parquet/#_4","title":"\u64cd\u4f5c\u6b65\u9aa4","text":""},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-parquet/#1_nebulagraph_schema","title":"\u6b65\u9aa4 1\uff1a\u5728 NebulaGraph \u4e2d\u521b\u5efa Schema","text":"<p>\u5206\u6790 Parquet \u6587\u4ef6\u4e2d\u7684\u6570\u636e\uff0c\u6309\u4ee5\u4e0b\u6b65\u9aa4\u5728 NebulaGraph \u4e2d\u521b\u5efa Schema\uff1a</p> <ol> <li> <p>\u786e\u8ba4 Schema \u8981\u7d20\u3002 NebulaGraph \u4e2d\u7684 Schema \u8981\u7d20\u5982\u4e0b\u8868\u6240\u793a\u3002</p> \u8981\u7d20 \u540d\u79f0 \u5c5e\u6027 Tag <code>player</code> <code>name string, age int</code> Tag <code>team</code> <code>name string</code> Edge Type <code>follow</code> <code>degree int</code> Edge Type <code>serve</code> <code>start_year int, end_year int</code> </li> <li> <p>\u4f7f\u7528 NebulaGraph Console \u521b\u5efa\u4e00\u4e2a\u56fe\u7a7a\u95f4 basketballplayer\uff0c\u5e76\u521b\u5efa\u4e00\u4e2a Schema\uff0c\u5982\u4e0b\u6240\u793a\u3002</p> <pre><code>## \u521b\u5efa\u56fe\u7a7a\u95f4\nnebula&gt; CREATE SPACE basketballplayer \\\n        (partition_num = 10, \\\n        replica_factor = 1, \\\n        vid_type = FIXED_STRING(30));\n\n## \u9009\u62e9\u56fe\u7a7a\u95f4 basketballplayer\nnebula&gt; USE basketballplayer;\n\n## \u521b\u5efa Tag player\nnebula&gt; CREATE TAG player(name string, age int);\n\n## \u521b\u5efa Tag team\nnebula&gt; CREATE TAG team(name string);\n\n## \u521b\u5efa Edge type follow\nnebula&gt; CREATE EDGE follow(degree int);\n\n## \u521b\u5efa Edge type serve\nnebula&gt; CREATE EDGE serve(start_year int, end_year int);\n</code></pre> </li> </ol> <p>\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u89c1\u5feb\u901f\u5f00\u59cb\u3002</p>"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-parquet/#2_parquet","title":"\u6b65\u9aa4 2\uff1a\u5904\u7406 Parquet \u6587\u4ef6","text":"<p>\u786e\u8ba4\u4ee5\u4e0b\u4fe1\u606f\uff1a</p> <ol> <li> <p>\u5904\u7406 Parquet \u6587\u4ef6\u4ee5\u6ee1\u8db3 Schema \u7684\u8981\u6c42\u3002</p> </li> <li> <p>\u83b7\u53d6 Parquet \u6587\u4ef6\u5b58\u50a8\u8def\u5f84\u3002</p> </li> </ol>"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-parquet/#3","title":"\u6b65\u9aa4 3\uff1a\u4fee\u6539\u914d\u7f6e\u6587\u4ef6","text":"<p>\u7f16\u8bd1 Exchange \u540e\uff0c\u590d\u5236<code>target/classes/application.conf</code>\u6587\u4ef6\u8bbe\u7f6e Parquet \u6570\u636e\u6e90\u76f8\u5173\u7684\u914d\u7f6e\u3002\u5728\u672c\u793a\u4f8b\u4e2d\uff0c\u590d\u5236\u7684\u6587\u4ef6\u540d\u4e3a<code>parquet_application.conf</code>\u3002\u5404\u4e2a\u914d\u7f6e\u9879\u7684\u8be6\u7ec6\u8bf4\u660e\u8bf7\u53c2\u89c1\u914d\u7f6e\u8bf4\u660e\u3002</p> <pre><code>{\n  # Spark \u76f8\u5173\u914d\u7f6e\n  spark: {\n    app: {\n      name: NebulaGraph Exchange 3.7.0\n    }\n    driver: {\n      cores: 1\n      maxResultSize: 1G\n    }\n    executor: {\n        memory:1G\n    }\n\n    cores: {\n      max: 16\n    }\n  }\n\n  # NebulaGraph \u76f8\u5173\u914d\u7f6e\n  nebula: {\n    address:{\n      # \u6307\u5b9a Graph \u670d\u52a1\u548c\u6240\u6709 Meta \u670d\u52a1\u7684 IP \u5730\u5740\u548c\u7aef\u53e3\u3002\n      # \u5982\u679c\u6709\u591a\u53f0\u670d\u52a1\u5668\uff0c\u5730\u5740\u4e4b\u95f4\u7528\u82f1\u6587\u9017\u53f7\uff08,\uff09\u5206\u9694\u3002\n      # \u683c\u5f0f\uff1a\"ip1:port\",\"ip2:port\",\"ip3:port\"\n      graph:[\"127.0.0.1:9669\"]\n      #\u4efb\u610f\u4e00\u4e2a Meta \u670d\u52a1\u7684\u5730\u5740\u3002\n      #\u5982\u679c\u60a8\u7684 NebulaGraph \u5728\u865a\u62df\u7f51\u7edc\u4e2d\uff0c\u5982k8s\uff0c\u8bf7\u914d\u7f6e Leader Meta\u7684\u5730\u5740\u3002\n      meta:[\"127.0.0.1:9559\"]\n    }\n\n    # \u6307\u5b9a\u62e5\u6709 NebulaGraph \u5199\u6743\u9650\u7684\u7528\u6237\u540d\u548c\u5bc6\u7801\u3002\n    user: root\n    pswd: nebula\n    # \u662f\u5426\u4f7f\u7528 RSA \u52a0\u5bc6\u7684\u5bc6\u7801\u3002\n    # enableRSA: true\n    # \u4f7f\u7528 RSA \u52a0\u5bc6\u5bc6\u7801\u65f6\u7684\u5bc6\u94a5\u3002\n    # privateKey: \"\"\n\n    # \u6307\u5b9a\u56fe\u7a7a\u95f4\u540d\u79f0\u3002\n    space: basketballplayer\n    connection: {\n      timeout: 3000\n      retry: 3\n    }\n    execution: {\n      retry: 3\n    }\n    error: {\n      max: 32\n      output: /tmp/errors\n    }\n    rate: {\n      limit: 1024\n      timeout: 1000\n    }\n  }\n\n  # \u5904\u7406\u70b9\n  tags: [\n    # \u8bbe\u7f6e Tag player \u76f8\u5173\u4fe1\u606f\u3002\n    {\n      # \u6307\u5b9a NebulaGraph \u4e2d\u5b9a\u4e49\u7684 Tag \u540d\u79f0\u3002\n      name: player\n      type: {\n        # \u6307\u5b9a\u6570\u636e\u6e90\uff0c\u4f7f\u7528 Parquet\u3002\n        source: parquet\n\n        # \u6307\u5b9a\u5982\u4f55\u5c06\u70b9\u6570\u636e\u5bfc\u5165 NebulaGraph \uff1aClient \u6216 SST\u3002\n        sink: client\n      }\n\n      # \u6307\u5b9a Parquet \u6587\u4ef6\u7684\u8def\u5f84\u3002\n      # \u5982\u679c\u6587\u4ef6\u5b58\u50a8\u5728 HDFS \u4e0a\uff0c\u7528\u53cc\u5f15\u53f7\u62ec\u8d77\u8def\u5f84\uff0c\u4ee5 hdfs://\u5f00\u5934\uff0c\u4f8b\u5982\"hdfs://ip:port/xx/xx\"\u3002\n      # \u5982\u679c\u6587\u4ef6\u5b58\u50a8\u5728\u672c\u5730\uff0c\u7528\u53cc\u5f15\u53f7\u62ec\u8d77\u8def\u5f84\uff0c\u4ee5 file://\u5f00\u5934\uff0c\u4f8b\u5982\"file:///tmp/xx.csv\"\u3002\n      path: \"hdfs://192.168.11.139000/data/vertex_player.parquet\"\n\n      # \u5728 fields \u91cc\u6307\u5b9a Parquet \u6587\u4ef6\u4e2d key \u540d\u79f0\uff0c\u5176\u5bf9\u5e94\u7684 value \u4f1a\u4f5c\u4e3a NebulaGraph \u4e2d\u6307\u5b9a\u5c5e\u6027\u7684\u6570\u636e\u6e90\u3002\n      # \u5982\u679c\u9700\u8981\u6307\u5b9a\u591a\u4e2a\u503c\uff0c\u7528\u82f1\u6587\u9017\u53f7\uff08,\uff09\u9694\u5f00\u3002\n      fields: [age,name]\n\n      # \u6307\u5b9a NebulaGraph \u4e2d\u5b9a\u4e49\u7684\u5c5e\u6027\u540d\u79f0\u3002\n      # fields \u4e0e nebula.fields \u7684\u987a\u5e8f\u5fc5\u987b\u4e00\u4e00\u5bf9\u5e94\u3002\n      nebula.fields: [age, name]\n\n      # \u6307\u5b9a\u4e00\u4e2a\u5217\u4f5c\u4e3a VID \u7684\u6e90\u3002\n      # vertex \u7684\u503c\u5fc5\u987b\u4e0e Parquet \u6587\u4ef6\u4e2d\u7684\u5b57\u6bb5\u4fdd\u6301\u4e00\u81f4\u3002\n      # \u76ee\u524d\uff0cNebulaGraph  master\u4ec5\u652f\u6301\u5b57\u7b26\u4e32\u6216\u6574\u6570\u7c7b\u578b\u7684 VID\u3002\n      vertex: {\n        field:id\n      # udf:{\n      #            separator:\"_\"\n      #            oldColNames:[field-0,field-1,field-2]\n      #            newColName:new-field\n      #        }\n      # \u4e3a VID \u589e\u52a0\u6307\u5b9a\u7684\u524d\u7f00\u3002\u4f8b\u5982 VID \u4e3a 12345\uff0c\u589e\u52a0\u524d\u7f00 tag1 \u540e\u4e3a tag1_12345\u3002\u4e0b\u5212\u7ebf\u65e0\u6cd5\u4fee\u6539\u3002\n      # prefix:\"tag1\"\n      # \u5bf9 string \u7c7b\u578b\u7684 VID \u8fdb\u884c\u54c8\u5e0c\u5316\u64cd\u4f5c\u3002\n      # policy:hash\n      }\n\n      # \u6279\u91cf\u64cd\u4f5c\u7c7b\u578b\uff0c\u5305\u62ec INSERT\u3001UPDATE \u548c DELETE\u3002\u9ed8\u8ba4\u4e3a INSERT\u3002\n      #writeMode: INSERT\n\n      # \u6279\u91cf\u5220\u9664\u65f6\u662f\u5426\u5220\u9664\u8be5\u70b9\u5173\u8054\u7684\u51fa\u8fb9\u548c\u5165\u8fb9\u3002`writeMode`\u4e3a`DELETE`\u65f6\u8be5\u53c2\u6570\u751f\u6548\u3002\n      #deleteEdge: false\n\n      # \u6307\u5b9a\u5355\u6279\u6b21\u5199\u5165 NebulaGraph \u7684\u6700\u5927\u70b9\u6570\u91cf\u3002\n      batch: 256\n\n      # \u6570\u636e\u5199\u5165 NebulaGraph \u65f6\u9700\u8981\u521b\u5efa\u7684\u5206\u533a\u6570\u3002\n      partition: 32\n    }\n\n    # \u8bbe\u7f6e Tag team \u76f8\u5173\u4fe1\u606f\u3002\n    {\n      name: team\n      type: {\n        source: parquet\n        sink: client\n      }\n      path: \"hdfs://192.168.11.13:9000/data/vertex_team.parquet\"\n      fields: [name]\n      nebula.fields: [name]\n      vertex: {\n        field:id\n      }\n      batch: 256\n      partition: 32\n    }\n\n    # \u5982\u679c\u9700\u8981\u6dfb\u52a0\u66f4\u591a\u70b9\uff0c\u8bf7\u53c2\u8003\u524d\u9762\u7684\u914d\u7f6e\u8fdb\u884c\u6dfb\u52a0\u3002\n  ]\n  # \u5904\u7406\u8fb9\n  edges: [\n    # \u8bbe\u7f6e Edge type follow \u76f8\u5173\u4fe1\u606f\u3002\n    {\n      # \u6307\u5b9a NebulaGraph \u4e2d\u5b9a\u4e49\u7684 Edge type \u540d\u79f0\u3002\n      name: follow\n      type: {\n        # \u6307\u5b9a\u6570\u636e\u6e90\uff0c\u4f7f\u7528 Parquet\u3002\n        source: parquet\n\n        # \u6307\u5b9a\u5982\u4f55\u5c06\u70b9\u6570\u636e\u5bfc\u5165 NebulaGraph \uff1aClient \u6216 SST\u3002\n        sink: client\n      }\n\n      # \u6307\u5b9a Parquet \u6587\u4ef6\u7684\u8def\u5f84\u3002\n      # \u5982\u679c\u6587\u4ef6\u5b58\u50a8\u5728 HDFS \u4e0a\uff0c\u7528\u53cc\u5f15\u53f7\u62ec\u8d77\u8def\u5f84\uff0c\u4ee5 hdfs://\u5f00\u5934\uff0c\u4f8b\u5982\"hdfs://ip:port/xx/xx\"\u3002\n      # \u5982\u679c\u6587\u4ef6\u5b58\u50a8\u5728\u672c\u5730\uff0c\u7528\u53cc\u5f15\u53f7\u62ec\u8d77\u8def\u5f84\uff0c\u4ee5 file://\u5f00\u5934\uff0c\u4f8b\u5982\"file:///tmp/xx.csv\"\u3002\n      path: \"hdfs://192.168.11.13:9000/data/edge_follow.parquet\"\n\n      # \u5728 fields \u91cc\u6307\u5b9a Parquet \u6587\u4ef6\u4e2d key \u540d\u79f0\uff0c\u5176\u5bf9\u5e94\u7684 value \u4f1a\u4f5c\u4e3a NebulaGraph \u4e2d\u6307\u5b9a\u5c5e\u6027\u7684\u6570\u636e\u6e90\u3002\n      # \u5982\u679c\u9700\u8981\u6307\u5b9a\u591a\u4e2a\u503c\uff0c\u7528\u82f1\u6587\u9017\u53f7\uff08,\uff09\u9694\u5f00\u3002\n      fields: [degree]\n\n      # \u6307\u5b9a NebulaGraph \u4e2d\u5b9a\u4e49\u7684\u5c5e\u6027\u540d\u79f0\u3002\n      # fields \u4e0e nebula.fields \u7684\u987a\u5e8f\u5fc5\u987b\u4e00\u4e00\u5bf9\u5e94\u3002\n      nebula.fields: [degree]\n\n      # \u6307\u5b9a\u4e00\u4e2a\u5217\u4f5c\u4e3a\u8d77\u59cb\u70b9\u548c\u76ee\u7684\u70b9\u7684\u6e90\u3002\n      # vertex \u7684\u503c\u5fc5\u987b\u4e0e Parquet \u6587\u4ef6\u4e2d\u7684\u5b57\u6bb5\u4fdd\u6301\u4e00\u81f4\u3002\n      # \u76ee\u524d\uff0cNebulaGraph  master\u4ec5\u652f\u6301\u5b57\u7b26\u4e32\u6216\u6574\u6570\u7c7b\u578b\u7684 VID\u3002\n      source: {\n        field: src\n      # udf:{\n      #            separator:\"_\"\n      #            oldColNames:[field-0,field-1,field-2]\n      #            newColName:new-field\n      #        }\n      # \u4e3a VID \u589e\u52a0\u6307\u5b9a\u7684\u524d\u7f00\u3002\u4f8b\u5982 VID \u4e3a 12345\uff0c\u589e\u52a0\u524d\u7f00 tag1 \u540e\u4e3a tag1_12345\u3002\u4e0b\u5212\u7ebf\u65e0\u6cd5\u4fee\u6539\u3002\n      # prefix:\"tag1\"\n      # \u5bf9 string \u7c7b\u578b\u7684 VID \u8fdb\u884c\u54c8\u5e0c\u5316\u64cd\u4f5c\u3002\n      # policy:hash\n      }\n      target: {\n        field: dst\n      # udf:{\n      #            separator:\"_\"\n      #            oldColNames:[field-0,field-1,field-2]\n      #            newColName:new-field\n      #        }\n      # \u4e3a VID \u589e\u52a0\u6307\u5b9a\u7684\u524d\u7f00\u3002\u4f8b\u5982 VID \u4e3a 12345\uff0c\u589e\u52a0\u524d\u7f00 tag1 \u540e\u4e3a tag1_12345\u3002\u4e0b\u5212\u7ebf\u65e0\u6cd5\u4fee\u6539\u3002\n      # prefix:\"tag1\"\n      # \u5bf9 string \u7c7b\u578b\u7684 VID \u8fdb\u884c\u54c8\u5e0c\u5316\u64cd\u4f5c\u3002\n      # policy:hash\n      }\n\n      # \u6307\u5b9a\u4e00\u4e2a\u5217\u4f5c\u4e3a rank \u7684\u6e90\uff08\u53ef\u9009\uff09\u3002\n      #ranking: rank\n\n      # \u6279\u91cf\u64cd\u4f5c\u7c7b\u578b\uff0c\u5305\u62ec INSERT\u3001UPDATE \u548c DELETE\u3002\u9ed8\u8ba4\u4e3a INSERT\u3002\n      #writeMode: INSERT\n\n      # \u6307\u5b9a\u5355\u6279\u6b21\u5199\u5165 NebulaGraph \u7684\u6700\u5927\u8fb9\u6570\u91cf\u3002\n      batch: 256\n\n      # \u6570\u636e\u5199\u5165 NebulaGraph \u65f6\u9700\u8981\u521b\u5efa\u7684\u5206\u533a\u6570\u3002\n      partition: 32\n    }\n\n    # \u8bbe\u7f6e Edge type serve \u76f8\u5173\u4fe1\u606f\u3002\n    {\n      name: serve\n      type: {\n        source: parquet\n        sink: client\n      }\n      path: \"hdfs://192.168.11.13:9000/data/edge_serve.parquet\"\n      fields: [start_year,end_year]\n      nebula.fields: [start_year, end_year]\n      source: {\n        field: src\n      }\n      target: {\n        field: dst\n      }\n      batch: 256\n      partition: 32\n    }\n\n  ]\n  # \u5982\u679c\u9700\u8981\u6dfb\u52a0\u66f4\u591a\u8fb9\uff0c\u8bf7\u53c2\u8003\u524d\u9762\u7684\u914d\u7f6e\u8fdb\u884c\u6dfb\u52a0\u3002\n}\n</code></pre>"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-parquet/#4_nebulagraph","title":"\u6b65\u9aa4 4\uff1a\u5411 NebulaGraph \u5bfc\u5165\u6570\u636e","text":"<p>\u8fd0\u884c\u5982\u4e0b\u547d\u4ee4\u5c06 Parquet \u6587\u4ef6\u6570\u636e\u5bfc\u5165\u5230 NebulaGraph \u4e2d\u3002\u5173\u4e8e\u53c2\u6570\u7684\u8bf4\u660e\uff0c\u8bf7\u53c2\u89c1\u5bfc\u5165\u547d\u4ee4\u53c2\u6570\u3002</p> <pre><code>${SPARK_HOME}/bin/spark-submit --master \"local\" --class com.vesoft.nebula.exchange.Exchange &lt;nebula-exchange.jar_path&gt; -c &lt;parquet_application.conf_path&gt; \n</code></pre> <p>Note</p> <p>JAR \u5305\u6709\u4e24\u79cd\u83b7\u53d6\u65b9\u5f0f\uff1a\u81ea\u884c\u7f16\u8bd1\u6216\u8005\u4ece maven \u4ed3\u5e93\u4e0b\u8f7d\u3002</p> <p>\u793a\u4f8b\uff1a</p> <pre><code>${SPARK_HOME}/bin/spark-submit  --master \"local\" --class com.vesoft.nebula.exchange.Exchange  /root/nebula-exchange/nebula-exchange/target/nebula-exchange_spark_2.4-3.7.0.jar  -c /root/nebula-exchange/nebula-exchange/target/classes/parquet_application.conf\n</code></pre> <p>\u7528\u6237\u53ef\u4ee5\u5728\u8fd4\u56de\u4fe1\u606f\u4e2d\u641c\u7d22<code>batchSuccess.&lt;tag_name/edge_name&gt;</code>\uff0c\u786e\u8ba4\u6210\u529f\u7684\u6570\u91cf\u3002\u4f8b\u5982<code>batchSuccess.follow: 300</code>\u3002</p>"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-parquet/#5","title":"\u6b65\u9aa4 5\uff1a\uff08\u53ef\u9009\uff09\u9a8c\u8bc1\u6570\u636e","text":"<p>\u7528\u6237\u53ef\u4ee5\u5728 NebulaGraph \u5ba2\u6237\u7aef\uff08\u4f8b\u5982 NebulaGraph Studio\uff09\u4e2d\u6267\u884c\u67e5\u8be2\u8bed\u53e5\uff0c\u786e\u8ba4\u6570\u636e\u662f\u5426\u5df2\u5bfc\u5165\u3002\u4f8b\u5982\uff1a</p> <pre><code>LOOKUP ON player YIELD id(vertex);\n</code></pre> <p>\u7528\u6237\u4e5f\u53ef\u4ee5\u4f7f\u7528\u547d\u4ee4 <code>SHOW STATS</code> \u67e5\u770b\u7edf\u8ba1\u6570\u636e\u3002</p>"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-parquet/#6_nebulagraph","title":"\u6b65\u9aa4 6\uff1a\uff08\u5982\u6709\uff09\u5728 NebulaGraph \u4e2d\u91cd\u5efa\u7d22\u5f15","text":"<p>\u5bfc\u5165\u6570\u636e\u540e\uff0c\u7528\u6237\u53ef\u4ee5\u5728 NebulaGraph \u4e2d\u91cd\u65b0\u521b\u5efa\u5e76\u91cd\u5efa\u7d22\u5f15\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1\u7d22\u5f15\u4ecb\u7ecd\u3002</p>"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-pulsar/","title":"\u5bfc\u5165 Pulsar \u6570\u636e","text":"<p>\u672c\u6587\u7b80\u5355\u8bf4\u660e\u5982\u4f55\u4f7f\u7528 Exchange \u5c06\u5b58\u50a8\u5728 Pulsar \u4e0a\u7684\u6570\u636e\u5bfc\u5165 NebulaGraph \u3002</p>"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-pulsar/#_1","title":"\u73af\u5883\u914d\u7f6e","text":"<p>\u672c\u6587\u793a\u4f8b\u5728 MacOS \u4e0b\u5b8c\u6210\uff0c\u4ee5\u4e0b\u662f\u76f8\u5173\u7684\u73af\u5883\u914d\u7f6e\u4fe1\u606f\uff1a</p> <ul> <li>\u786c\u4ef6\u89c4\u683c\uff1a<ul> <li>CPU\uff1a1.7 GHz Quad-Core Intel Core i7</li> <li>\u5185\u5b58\uff1a16 GB</li> </ul> </li> </ul> <ul> <li>Spark\uff1a2.4.7\uff0c\u5355\u673a\u7248</li> </ul> <ul> <li>NebulaGraph \uff1amaster\u3002</li> </ul>"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-pulsar/#_2","title":"\u524d\u63d0\u6761\u4ef6","text":"<p>\u5f00\u59cb\u5bfc\u5165\u6570\u636e\u4e4b\u524d\uff0c\u7528\u6237\u9700\u8981\u786e\u8ba4\u4ee5\u4e0b\u4fe1\u606f\uff1a</p> <ul> <li> <p>\u5df2\u7ecf\u5b89\u88c5\u90e8\u7f72 NebulaGraph  \u5e76\u83b7\u53d6\u5982\u4e0b\u4fe1\u606f\uff1a</p> <ul> <li>Graph \u670d\u52a1\u548c Meta \u670d\u52a1\u7684\u7684 IP \u5730\u5740\u548c\u7aef\u53e3\u3002</li> </ul> <ul> <li>\u62e5\u6709 NebulaGraph \u5199\u6743\u9650\u7684\u7528\u6237\u540d\u548c\u5bc6\u7801\u3002</li> </ul> </li> </ul> <ul> <li>\u5df2\u7ecf\u7f16\u8bd1 Exchange\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1\u7f16\u8bd1 Exchange\u3002\u672c\u793a\u4f8b\u4e2d\u4f7f\u7528 Exchange 3.7.0\u3002</li> </ul> <ul> <li>\u5df2\u7ecf\u5b89\u88c5 Spark\u3002</li> </ul> <ul> <li>\u4e86\u89e3 NebulaGraph \u4e2d\u521b\u5efa Schema \u7684\u4fe1\u606f\uff0c\u5305\u62ec Tag \u548c Edge type \u7684\u540d\u79f0\u3001\u5c5e\u6027\u7b49\u3002</li> </ul> <ul> <li>\u5df2\u7ecf\u5b89\u88c5\u5e76\u5f00\u542f Pulsar \u670d\u52a1\u3002</li> </ul>"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-pulsar/#_3","title":"\u6ce8\u610f\u4e8b\u9879","text":"<ul> <li>\u5bfc\u5165 Pulsar \u6570\u636e\u65f6\u53ea\u652f\u6301 Client \u6a21\u5f0f\uff0c\u5373\u53c2\u6570<code>tags.type.sink</code>\u548c<code>edges.type.sink</code>\u7684\u503c\u4e3a<code>client</code>\u3002</li> </ul> <ul> <li>\u5bfc\u5165 Pulsar \u6570\u636e\u65f6\u8bf7\u52ff\u4f7f\u7528 Exchange 3.4.0 \u7248\u672c\uff0c\u8be5\u7248\u672c\u589e\u52a0\u4e86\u5bf9\u5bfc\u5165\u6570\u636e\u7684\u7f13\u5b58\uff0c\u4e0d\u652f\u6301\u6d41\u5f0f\u6570\u636e\u5bfc\u5165\u3002\u8bf7\u4f7f\u7528 Exchange 3.0.0\u30013.3.0\u30013.5.0 \u7248\u672c\u3002</li> </ul>"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-pulsar/#_4","title":"\u64cd\u4f5c\u6b65\u9aa4","text":""},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-pulsar/#1_nebulagraph_schema","title":"\u6b65\u9aa4 1\uff1a\u5728 NebulaGraph \u4e2d\u521b\u5efa Schema","text":"<p>\u5206\u6790\u6570\u636e\uff0c\u6309\u4ee5\u4e0b\u6b65\u9aa4\u5728 NebulaGraph \u4e2d\u521b\u5efa Schema\uff1a</p> <ol> <li> <p>\u786e\u8ba4 Schema \u8981\u7d20\u3002 NebulaGraph \u4e2d\u7684 Schema \u8981\u7d20\u5982\u4e0b\u8868\u6240\u793a\u3002</p> \u8981\u7d20 \u540d\u79f0 \u5c5e\u6027 Tag <code>player</code> <code>name string, age int</code> Tag <code>team</code> <code>name string</code> Edge Type <code>follow</code> <code>degree int</code> Edge Type <code>serve</code> <code>start_year int, end_year int</code> </li> <li> <p>\u5728 NebulaGraph \u4e2d\u521b\u5efa\u4e00\u4e2a\u56fe\u7a7a\u95f4 basketballplayer\uff0c\u5e76\u521b\u5efa\u4e00\u4e2a Schema\uff0c\u5982\u4e0b\u6240\u793a\u3002</p> <pre><code>## \u521b\u5efa\u56fe\u7a7a\u95f4\nnebula&gt; CREATE SPACE basketballplayer \\\n        (partition_num = 10, \\\n        replica_factor = 1, \\\n        vid_type = FIXED_STRING(30));\n\n## \u9009\u62e9\u56fe\u7a7a\u95f4 basketballplayer\nnebula&gt; USE basketballplayer;\n\n## \u521b\u5efa Tag player\nnebula&gt; CREATE TAG player(name string, age int);\n\n## \u521b\u5efa Tag team\nnebula&gt; CREATE TAG team(name string);\n\n## \u521b\u5efa Edge type follow\nnebula&gt; CREATE EDGE follow(degree int);\n\n## \u521b\u5efa Edge type serve\nnebula&gt; CREATE EDGE serve(start_year int, end_year int);\n</code></pre> </li> </ol> <p>\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u89c1\u5feb\u901f\u5f00\u59cb\u3002</p>"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-pulsar/#2","title":"\u6b65\u9aa4 2\uff1a\u4fee\u6539\u914d\u7f6e\u6587\u4ef6","text":"<p>\u7f16\u8bd1 Exchange \u540e\uff0c\u590d\u5236<code>target/classes/application.conf</code>\u6587\u4ef6\u8bbe\u7f6e Pulsar \u6570\u636e\u6e90\u76f8\u5173\u7684\u914d\u7f6e\u3002\u5728\u672c\u793a\u4f8b\u4e2d\uff0c\u590d\u5236\u7684\u6587\u4ef6\u540d\u4e3a<code>pulsar_application.conf</code>\u3002\u5404\u4e2a\u914d\u7f6e\u9879\u7684\u8be6\u7ec6\u8bf4\u660e\u8bf7\u53c2\u89c1\u914d\u7f6e\u8bf4\u660e\u3002</p> <pre><code>{\n  # Spark \u76f8\u5173\u914d\u7f6e\n  spark: {\n    app: {\n      name: NebulaGraph Exchange 3.7.0\n    }\n    driver: {\n      cores: 1\n      maxResultSize: 1G\n    }\n    cores: {\n      max: 16\n    }\n  }\n\n  # NebulaGraph \u76f8\u5173\u914d\u7f6e\n  nebula: {\n    address:{\n      # \u4ee5\u4e0b\u4e3a NebulaGraph \u7684 Graph \u670d\u52a1\u548c Meta \u670d\u52a1\u6240\u5728\u673a\u5668\u7684 IP \u5730\u5740\u53ca\u7aef\u53e3\u3002\n      # \u5982\u679c\u6709\u591a\u4e2a\u5730\u5740\uff0c\u683c\u5f0f\u4e3a \"ip1:port\",\"ip2:port\",\"ip3:port\"\u3002\n      # \u4e0d\u540c\u5730\u5740\u4e4b\u95f4\u4ee5\u82f1\u6587\u9017\u53f7 (,) \u9694\u5f00\u3002\n      graph:[\"127.0.0.1:9669\"]\n      #\u4efb\u610f\u4e00\u4e2a Meta \u670d\u52a1\u7684\u5730\u5740\u3002\n      #\u5982\u679c\u60a8\u7684 NebulaGraph \u5728\u865a\u62df\u7f51\u7edc\u4e2d\uff0c\u5982k8s\uff0c\u8bf7\u914d\u7f6e Leader Meta\u7684\u5730\u5740\u3002\n      meta:[\"127.0.0.1:9559\"]\n    }\n    # \u586b\u5199\u7684\u8d26\u53f7\u5fc5\u987b\u62e5\u6709 NebulaGraph \u76f8\u5e94\u56fe\u7a7a\u95f4\u7684\u5199\u6570\u636e\u6743\u9650\u3002\n    user: root\n    pswd: nebula\n    # \u662f\u5426\u4f7f\u7528 RSA \u52a0\u5bc6\u7684\u5bc6\u7801\u3002\n    # enableRSA: true\n    # \u4f7f\u7528 RSA \u52a0\u5bc6\u5bc6\u7801\u65f6\u7684\u5bc6\u94a5\u3002\n    # privateKey: \"\"\n\n    # \u586b\u5199NebulaGraph\u4e2d\u9700\u8981\u5199\u5165\u6570\u636e\u7684\u56fe\u7a7a\u95f4\u540d\u79f0\u3002\n    space: basketballplayer\n    connection: {\n      timeout: 3000\n      retry: 3\n    }\n    execution: {\n      retry: 3\n    }\n    error: {\n      max: 32\n      output: /tmp/errors\n    }\n    rate: {\n      limit: 1024\n      timeout: 1000\n    }\n  }\n  # \u5904\u7406\u70b9\n  tags: [\n    # \u8bbe\u7f6e Tag player \u76f8\u5173\u4fe1\u606f\u3002\n    {\n      # NebulaGraph \u4e2d\u5bf9\u5e94\u7684 Tag \u540d\u79f0\u3002\n      name: player\n      type: {\n        # \u6307\u5b9a\u6570\u636e\u6e90\u6587\u4ef6\u683c\u5f0f\uff0c\u8bbe\u7f6e\u4e3a Pulsar\u3002\n        source: pulsar\n        # \u6307\u5b9a\u5982\u4f55\u5c06\u6570\u636e\u5bfc\u5165 NebulaGraph \u3002\u53ea\u652f\u6301 Client\u3002\n        sink: client\n      }\n      # Pulsar \u670d\u52a1\u5668\u5730\u5740\u3002\n      service: \"pulsar://127.0.0.1:6650\"\n      # \u8fde\u63a5 pulsar \u7684 admin.url\u3002\n      admin: \"http://127.0.0.1:8081\"\n      # Pulsar \u7684\u9009\u9879\uff0c\u53ef\u4ee5\u4ece topic\u3001topics \u548c topicsPattern \u9009\u62e9\u4e00\u4e2a\u8fdb\u884c\u914d\u7f6e\u3002\n      options: {\n        topics: \"topic1,topic2\"\n      }\n\n      # \u5728 fields \u91cc\u6307\u5b9a player \u8868\u4e2d\u7684\u5217\u540d\u79f0\uff0c\u5176\u5bf9\u5e94\u7684 value \u4f1a\u4f5c\u4e3a NebulaGraph \u4e2d\u6307\u5b9a\u5c5e\u6027\u3002\n      # fields \u548c nebula.fields \u91cc\u7684\u914d\u7f6e\u5fc5\u987b\u4e00\u4e00\u5bf9\u5e94\u3002\n      # \u5982\u679c\u9700\u8981\u6307\u5b9a\u591a\u4e2a\u5217\u540d\u79f0\uff0c\u7528\u82f1\u6587\u9017\u53f7\uff08,\uff09\u9694\u5f00\u3002\n      fields: [age,name]\n      nebula.fields: [age,name]\n\n      # \u6307\u5b9a\u8868\u4e2d\u67d0\u4e00\u5217\u6570\u636e\u4e3a NebulaGraph \u4e2d\u70b9 VID \u7684\u6765\u6e90\u3002\n      vertex:{\n          field:playerid\n      # udf:{\n      #            separator:\"_\"\n      #            oldColNames:[field-0,field-1,field-2]\n      #            newColName:new-field\n      #        }\n      # \u4e3a VID \u589e\u52a0\u6307\u5b9a\u7684\u524d\u7f00\u3002\u4f8b\u5982 VID \u4e3a 12345\uff0c\u589e\u52a0\u524d\u7f00 tag1 \u540e\u4e3a tag1_12345\u3002\u4e0b\u5212\u7ebf\u65e0\u6cd5\u4fee\u6539\u3002\n      # prefix:\"tag1\"\n      # \u5bf9 string \u7c7b\u578b\u7684 VID \u8fdb\u884c\u54c8\u5e0c\u5316\u64cd\u4f5c\u3002\n      # policy:hash\n      }\n\n      # \u6279\u91cf\u64cd\u4f5c\u7c7b\u578b\uff0c\u5305\u62ec INSERT\u3001UPDATE \u548c DELETE\u3002\u9ed8\u8ba4\u4e3a INSERT\u3002\n      #writeMode: INSERT\n\n      # \u6279\u91cf\u5220\u9664\u65f6\u662f\u5426\u5220\u9664\u8be5\u70b9\u5173\u8054\u7684\u51fa\u8fb9\u548c\u5165\u8fb9\u3002`writeMode`\u4e3a`DELETE`\u65f6\u8be5\u53c2\u6570\u751f\u6548\u3002\n      #deleteEdge: false\n\n      # \u5355\u6279\u6b21\u5199\u5165 NebulaGraph \u7684\u6570\u636e\u6761\u6570\u3002\n      batch: 10\n\n      # \u6570\u636e\u5199\u5165 NebulaGraph \u65f6\u9700\u8981\u521b\u5efa\u7684\u5206\u533a\u6570\u3002\n      partition: 10\n      # \u8bfb\u53d6\u6d88\u606f\u7684\u95f4\u9694\u3002\u5355\u4f4d\uff1a\u79d2\u3002\n      interval.seconds: 10\n    }\n    # \u8bbe\u7f6e Tag team \u76f8\u5173\u4fe1\u606f\u3002\n    {\n      name: team\n      type: {\n        source: pulsar\n        sink: client\n      }\n      service: \"pulsar://127.0.0.1:6650\"\n      admin: \"http://127.0.0.1:8081\"\n      options: {\n        topics: \"topic1,topic2\"\n      }\n      fields: [name]\n      nebula.fields: [name]\n      vertex:{\n          field:teamid\n      }\n      batch: 10\n      partition: 10\n      interval.seconds: 10\n    }\n\n  ]\n\n  # \u5904\u7406\u8fb9\u6570\u636e\n  edges: [\n    # \u8bbe\u7f6e Edge type follow \u76f8\u5173\u4fe1\u606f\n    {\n      # NebulaGraph \u4e2d\u5bf9\u5e94\u7684 Edge type \u540d\u79f0\u3002\n      name: follow\n\n      type: {\n        # \u6307\u5b9a\u6570\u636e\u6e90\u6587\u4ef6\u683c\u5f0f\uff0c\u8bbe\u7f6e\u4e3a Pulsar\u3002\n        source: pulsar\n\n        # \u6307\u5b9a\u8fb9\u6570\u636e\u5bfc\u5165 NebulaGraph \u7684\u65b9\u5f0f\uff0c\n        # \u6307\u5b9a\u5982\u4f55\u5c06\u6570\u636e\u5bfc\u5165 NebulaGraph \u3002\u53ea\u652f\u6301 Client\u3002\n        sink: client\n      }\n\n      # Pulsar \u670d\u52a1\u5668\u5730\u5740\u3002\n      service: \"pulsar://127.0.0.1:6650\"\n      # \u8fde\u63a5 pulsar \u7684 admin.url\u3002\n      admin: \"http://127.0.0.1:8081\"\n      # Pulsar \u7684\u9009\u9879\uff0c\u53ef\u4ee5\u4ece topic\u3001topics \u548c topicsPattern \u9009\u62e9\u4e00\u4e2a\u8fdb\u884c\u914d\u7f6e\u3002\n      options: {\n        topics: \"topic1,topic2\"\n      }\n\n      # \u5728 fields \u91cc\u6307\u5b9a follow \u8868\u4e2d\u7684\u5217\u540d\u79f0\uff0c\u5176\u5bf9\u5e94\u7684 value \u4f1a\u4f5c\u4e3a NebulaGraph \u4e2d\u6307\u5b9a\u5c5e\u6027\u3002\n      # fields \u548c nebula.fields \u91cc\u7684\u914d\u7f6e\u5fc5\u987b\u4e00\u4e00\u5bf9\u5e94\u3002\n      # \u5982\u679c\u9700\u8981\u6307\u5b9a\u591a\u4e2a\u5217\u540d\u79f0\uff0c\u7528\u82f1\u6587\u9017\u53f7\uff08,\uff09\u9694\u5f00\u3002\n      fields: [degree]\n      nebula.fields: [degree]\n\n      # \u5728 source \u91cc\uff0c\u5c06 follow \u8868\u4e2d\u67d0\u4e00\u5217\u4f5c\u4e3a\u8fb9\u7684\u8d77\u59cb\u70b9\u6570\u636e\u6e90\u3002\n      # \u5728 target \u91cc\uff0c\u5c06 follow \u8868\u4e2d\u67d0\u4e00\u5217\u4f5c\u4e3a\u8fb9\u7684\u76ee\u7684\u70b9\u6570\u636e\u6e90\u3002\n      source:{\n          field:src_player\n      # udf:{\n      #            separator:\"_\"\n      #            oldColNames:[field-0,field-1,field-2]\n      #            newColName:new-field\n      #        }\n      # \u4e3a VID \u589e\u52a0\u6307\u5b9a\u7684\u524d\u7f00\u3002\u4f8b\u5982 VID \u4e3a 12345\uff0c\u589e\u52a0\u524d\u7f00 tag1 \u540e\u4e3a tag1_12345\u3002\u4e0b\u5212\u7ebf\u65e0\u6cd5\u4fee\u6539\u3002\n      # prefix:\"tag1\"\n      # \u5bf9 string \u7c7b\u578b\u7684 VID \u8fdb\u884c\u54c8\u5e0c\u5316\u64cd\u4f5c\u3002\n      # policy:hash\n      }\n\n      target:{\n          field:dst_player\n      # udf:{\n      #            separator:\"_\"\n      #            oldColNames:[field-0,field-1,field-2]\n      #            newColName:new-field\n      #        }\n      # \u4e3a VID \u589e\u52a0\u6307\u5b9a\u7684\u524d\u7f00\u3002\u4f8b\u5982 VID \u4e3a 12345\uff0c\u589e\u52a0\u524d\u7f00 tag1 \u540e\u4e3a tag1_12345\u3002\u4e0b\u5212\u7ebf\u65e0\u6cd5\u4fee\u6539\u3002\n      # prefix:\"tag1\"\n      # \u5bf9 string \u7c7b\u578b\u7684 VID \u8fdb\u884c\u54c8\u5e0c\u5316\u64cd\u4f5c\u3002\n      # policy:hash\n      }\n\n      # \u6307\u5b9a\u4e00\u4e2a\u5217\u4f5c\u4e3a rank \u7684\u6e90\uff08\u53ef\u9009\uff09\u3002\n      #ranking: rank\n\n      # \u6279\u91cf\u64cd\u4f5c\u7c7b\u578b\uff0c\u5305\u62ec INSERT\u3001UPDATE \u548c DELETE\u3002\u9ed8\u8ba4\u4e3a INSERT\u3002\n      #writeMode: INSERT\n\n      # \u5355\u6279\u6b21\u5199\u5165 NebulaGraph \u7684\u6570\u636e\u6761\u6570\u3002\n      batch: 10\n\n      # \u6570\u636e\u5199\u5165 NebulaGraph \u65f6\u9700\u8981\u521b\u5efa\u7684\u5206\u533a\u6570\u3002\n      partition: 10\n\n      # \u8bfb\u53d6\u6d88\u606f\u7684\u95f4\u9694\u3002\u5355\u4f4d\uff1a\u79d2\u3002\n      interval.seconds: 10\n    }\n\n    # \u8bbe\u7f6e Edge type serve \u76f8\u5173\u4fe1\u606f\n    {\n      name: serve\n      type: {\n        source: Pulsar\n        sink: client\n      }\n      service: \"pulsar://127.0.0.1:6650\"\n      admin: \"http://127.0.0.1:8081\"\n      options: {\n        topics: \"topic1,topic2\"\n      }\n\n      fields: [start_year,end_year]\n      nebula.fields: [start_year,end_year]\n      source:{\n          field:playerid\n      }\n\n      target:{\n          field:teamid\n      }\n\n      # \u6307\u5b9a\u4e00\u4e2a\u5217\u4f5c\u4e3a rank \u7684\u6e90\uff08\u53ef\u9009\uff09\u3002\n      #ranking: rank\n\n      batch: 10\n      partition: 10\n      interval.seconds: 10\n    }\n  ]\n}\n</code></pre>"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-pulsar/#3_nebulagraph","title":"\u6b65\u9aa4 3\uff1a\u5411 NebulaGraph \u5bfc\u5165\u6570\u636e","text":"<p>\u8fd0\u884c\u5982\u4e0b\u547d\u4ee4\u5c06 Pulsar \u6570\u636e\u5bfc\u5165\u5230 NebulaGraph \u4e2d\u3002\u5173\u4e8e\u53c2\u6570\u7684\u8bf4\u660e\uff0c\u8bf7\u53c2\u89c1\u5bfc\u5165\u547d\u4ee4\u53c2\u6570\u3002</p> <pre><code>${SPARK_HOME}/bin/spark-submit --master \"local\" --class com.vesoft.nebula.exchange.Exchange &lt;nebula-exchange.jar_path&gt; -c &lt;pulsar_application.conf_path&gt;\n</code></pre> <p>Note</p> <p>JAR \u5305\u6709\u4e24\u79cd\u83b7\u53d6\u65b9\u5f0f\uff1a\u81ea\u884c\u7f16\u8bd1\u6216\u8005\u4ece maven \u4ed3\u5e93\u4e0b\u8f7d\u3002</p> <p>\u793a\u4f8b\uff1a</p> <pre><code>${SPARK_HOME}/bin/spark-submit  --master \"local\" --class com.vesoft.nebula.exchange.Exchange  /root/nebula-exchange/nebula-exchange/target/nebula-exchange_spark_2.4-3.7.0.jar  -c /root/nebula-exchange/nebula-exchange/target/classes/pulsar_application.conf\n</code></pre> <p>\u7528\u6237\u53ef\u4ee5\u5728\u8fd4\u56de\u4fe1\u606f\u4e2d\u641c\u7d22<code>batchSuccess.&lt;tag_name/edge_name&gt;</code>\uff0c\u786e\u8ba4\u6210\u529f\u7684\u6570\u91cf\u3002\u4f8b\u5982<code>batchSuccess.follow: 300</code>\u3002</p>"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-pulsar/#4","title":"\u6b65\u9aa4 4\uff1a\uff08\u53ef\u9009\uff09\u9a8c\u8bc1\u6570\u636e","text":"<p>\u7528\u6237\u53ef\u4ee5\u5728 NebulaGraph \u5ba2\u6237\u7aef\uff08\u4f8b\u5982 NebulaGraph Studio\uff09\u4e2d\u6267\u884c\u67e5\u8be2\u8bed\u53e5\uff0c\u786e\u8ba4\u6570\u636e\u662f\u5426\u5df2\u5bfc\u5165\u3002\u4f8b\u5982\uff1a</p> <pre><code>LOOKUP ON player YIELD id(vertex);\n</code></pre> <p>\u7528\u6237\u4e5f\u53ef\u4ee5\u4f7f\u7528\u547d\u4ee4 <code>SHOW STATS</code> \u67e5\u770b\u7edf\u8ba1\u6570\u636e\u3002</p>"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-pulsar/#5_nebulagraph","title":"\u6b65\u9aa4 5\uff1a\uff08\u5982\u6709\uff09\u5728 NebulaGraph \u4e2d\u91cd\u5efa\u7d22\u5f15","text":"<p>\u5bfc\u5165\u6570\u636e\u540e\uff0c\u7528\u6237\u53ef\u4ee5\u5728 NebulaGraph \u4e2d\u91cd\u65b0\u521b\u5efa\u5e76\u91cd\u5efa\u7d22\u5f15\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1\u7d22\u5f15\u4ecb\u7ecd\u3002</p>"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-sst/","title":"\u5bfc\u5165 SST \u6587\u4ef6\u6570\u636e","text":"<p>\u672c\u6587\u4ee5\u4e00\u4e2a\u793a\u4f8b\u8bf4\u660e\u5982\u4f55\u5c06\u6570\u636e\u6e90\u7684\u6570\u636e\u751f\u6210 SST\uff08Sorted String Table\uff09\u6587\u4ef6\u5e76\u4fdd\u5b58\u5728 HDFS \u4e0a\uff0c\u7136\u540e\u5bfc\u5165 NebulaGraph\uff0c\u793a\u4f8b\u6570\u636e\u6e90\u662f CSV \u6587\u4ef6\u3002</p>"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-sst/#_1","title":"\u6ce8\u610f\u4e8b\u9879","text":"<ul> <li>\u4ec5 Linux \u7cfb\u7edf\u652f\u6301\u5bfc\u5165 SST \u6587\u4ef6\u3002</li> </ul> <ul> <li>\u4e0d\u652f\u6301\u5c5e\u6027\u7684 Default \u503c\u3002</li> </ul>"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-sst/#_2","title":"\u80cc\u666f\u4fe1\u606f","text":"<p>Exchange \u652f\u6301\u4e24\u79cd\u6570\u636e\u5bfc\u5165\u6a21\u5f0f\uff1a</p> <ul> <li>\u76f4\u63a5\u5c06\u6570\u636e\u6e90\u7684\u6570\u636e\u901a\u8fc7 nGQL \u8bed\u53e5\u7684\u5f62\u5f0f\u5bfc\u5165 NebulaGraph \u3002</li> </ul> <ul> <li>\u5c06\u6570\u636e\u6e90\u7684\u6570\u636e\u751f\u6210 SST \u6587\u4ef6\uff0c\u7136\u540e\u501f\u52a9 Console \u5c06 SST \u6587\u4ef6\u5bfc\u5165 NebulaGraph \u3002</li> </ul> <p>\u4e0b\u6587\u5c06\u4ecb\u7ecd\u751f\u6210 SST \u6587\u4ef6\u5e76\u7528\u5176\u5bfc\u5165\u6570\u636e\u7684\u9002\u7528\u573a\u666f\u3001\u5b9e\u73b0\u65b9\u6cd5\u3001\u524d\u63d0\u6761\u4ef6\u3001\u64cd\u4f5c\u6b65\u9aa4\u7b49\u5185\u5bb9\u3002</p>"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-sst/#_3","title":"\u9002\u7528\u573a\u666f","text":"<ul> <li> <p>\u9002\u5408\u5728\u7ebf\u4e1a\u52a1\uff0c\u56e0\u4e3a\u751f\u6210\u65f6\u51e0\u4e4e\u4e0d\u4f1a\u5f71\u54cd\u4e1a\u52a1\uff08\u53ea\u662f\u8bfb\u53d6 Schema\uff09\uff0c\u5bfc\u5165\u901f\u5ea6\u5feb\u3002</p> <p>Caution</p> <p>\u5bfc\u5165\u671f\u95f4\uff08\u5927\u7ea6 10 \u79d2\uff09\u4f1a\u963b\u585e\u5bf9\u5e94\u7a7a\u95f4\u7684\u5199\u64cd\u4f5c\uff0c\u5e76\u4e14\u4e4b\u540e\u6570\u5c0f\u65f6\u5185\u53ef\u80fd\u6709\u5386\u53f2\u6570\u636e\u6574\u7406\uff0c\u5efa\u8bae\u5728\u4e1a\u52a1\u4f4e\u5cf0\u671f\u8fdb\u884c\u5bfc\u5165\u3002</p> </li> </ul> <ul> <li>\u9002\u5408\u6570\u636e\u6e90\u6570\u636e\u91cf\u8f83\u5927\u7684\u573a\u666f\uff0c\u5bfc\u5165\u901f\u5ea6\u5feb\u3002</li> </ul>"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-sst/#_4","title":"\u5b9e\u73b0\u65b9\u6cd5","text":"<p>NebulaGraph \u5e95\u5c42\u4f7f\u7528 RocksDB \u4f5c\u4e3a\u952e\u503c\u578b\u5b58\u50a8\u5f15\u64ce\u3002RocksDB \u662f\u57fa\u4e8e\u786c\u76d8\u7684\u5b58\u50a8\u5f15\u64ce\uff0c\u63d0\u4f9b\u4e86\u4e00\u7cfb\u5217 API \u7528\u4e8e\u521b\u5efa\u53ca\u5bfc\u5165 SST \u683c\u5f0f\u7684\u6587\u4ef6\uff0c\u6709\u52a9\u4e8e\u5feb\u901f\u5bfc\u5165\u6d77\u91cf\u6570\u636e\u3002</p> <p>SST \u6587\u4ef6\u662f\u4e00\u4e2a\u5185\u90e8\u5305\u542b\u4e86\u4efb\u610f\u957f\u5ea6\u7684\u6709\u5e8f\u952e\u503c\u5bf9\u96c6\u5408\u7684\u6587\u4ef6\uff0c\u7528\u4e8e\u9ad8\u6548\u5730\u5b58\u50a8\u5927\u91cf\u952e\u503c\u578b\u6570\u636e\u3002\u751f\u6210 SST \u6587\u4ef6\u7684\u6574\u4e2a\u8fc7\u7a0b\u4e3b\u8981\u7531 Exchange \u7684 Reader\u3001sstProcessor \u548c sstWriter \u5b8c\u6210\u3002\u6574\u4e2a\u6570\u636e\u5904\u7406\u8fc7\u7a0b\u5982\u4e0b\uff1a</p> <ol> <li> <p>Reader \u4ece\u6570\u636e\u6e90\u4e2d\u8bfb\u53d6\u6570\u636e\u3002</p> </li> <li> <p>sstProcessor \u6839\u636e NebulaGraph \u7684 Schema \u4fe1\u606f\u751f\u6210 SST \u6587\u4ef6\uff0c\u7136\u540e\u4e0a\u4f20\u81f3 HDFS\u3002SST \u6587\u4ef6\u7684\u683c\u5f0f\u8bf7\u53c2\u89c1\u6570\u636e\u5b58\u50a8\u683c\u5f0f\u3002</p> </li> <li> <p>sstWriter \u6253\u5f00\u4e00\u4e2a\u6587\u4ef6\u5e76\u63d2\u5165\u6570\u636e\u3002\u751f\u6210 SST \u6587\u4ef6\u65f6\uff0cKey \u5fc5\u987b\u6309\u7167\u987a\u5e8f\u5199\u5165\u3002</p> </li> <li> <p>\u751f\u6210 SST \u6587\u4ef6\u4e4b\u540e\uff0cRocksDB \u901a\u8fc7<code>IngestExternalFile()</code>\u65b9\u6cd5\u5c06 SST \u6587\u4ef6\u5bfc\u5165\u5230 NebulaGraph \u4e2d\u3002\u4f8b\u5982\uff1a</p> <pre><code>IngestExternalFileOptions ifo;\n# \u5bfc\u5165\u4e24\u4e2a SST \u6587\u4ef6\nStatus s = db_-&gt;IngestExternalFile({\"/home/usr/file1.sst\", \"/home/usr/file2.sst\"}, ifo);\nif (!s.ok()) {\n  printf(\"Error while adding file %s and %s, Error %s\\n\",\n         file_path1.c_str(), file_path2.c_str(), s.ToString().c_str());\n  return 1;\n}\n</code></pre> <p>\u8c03\u7528<code>IngestExternalFile()</code>\u65b9\u6cd5\u65f6\uff0cRocksDB \u9ed8\u8ba4\u4f1a\u5c06\u6587\u4ef6\u62f7\u8d1d\u5230\u6570\u636e\u76ee\u5f55\uff0c\u5e76\u4e14\u963b\u585e RocksDB \u5199\u5165\u64cd\u4f5c\u3002\u5982\u679c SST \u6587\u4ef6\u4e2d\u7684\u952e\u8303\u56f4\u8986\u76d6\u4e86 Memtable \u952e\u7684\u8303\u56f4\uff0c\u5219\u5c06 Memtable \u843d\u76d8\uff08flush\uff09\u5230\u786c\u76d8\u3002\u5c06 SST \u6587\u4ef6\u653e\u7f6e\u5728 LSM \u6811\u6700\u4f18\u4f4d\u7f6e\u540e\uff0c\u4e3a\u6587\u4ef6\u5206\u914d\u4e00\u4e2a\u5168\u5c40\u5e8f\u5217\u53f7\uff0c\u5e76\u6253\u5f00\u5199\u64cd\u4f5c\u3002</p> </li> </ol>"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-sst/#_5","title":"\u6570\u636e\u96c6","text":"<p>\u672c\u6587\u4ee5 basketballplayer \u6570\u636e\u96c6\u4e3a\u4f8b\u3002</p>"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-sst/#_6","title":"\u73af\u5883\u914d\u7f6e","text":"<p>\u672c\u6587\u793a\u4f8b\u5728 MacOS \u4e0b\u5b8c\u6210\uff0c\u4ee5\u4e0b\u662f\u76f8\u5173\u7684\u73af\u5883\u914d\u7f6e\u4fe1\u606f\uff1a</p> <ul> <li>\u786c\u4ef6\u89c4\u683c\uff1a<ul> <li>CPU\uff1a1.7 GHz Quad-Core Intel Core i7</li> <li>\u5185\u5b58\uff1a16 GB</li> </ul> </li> </ul> <ul> <li>Spark\uff1a2.4.7 \u5355\u673a\u7248</li> </ul> <ul> <li>Hadoop\uff1a2.9.2 \u4f2a\u5206\u5e03\u5f0f\u90e8\u7f72</li> </ul> <ul> <li>NebulaGraph \uff1amaster\u3002</li> </ul>"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-sst/#_7","title":"\u524d\u63d0\u6761\u4ef6","text":"<p>\u5f00\u59cb\u5bfc\u5165\u6570\u636e\u4e4b\u524d\uff0c\u7528\u6237\u9700\u8981\u786e\u8ba4\u4ee5\u4e0b\u4fe1\u606f\uff1a</p> <ul> <li> <p>\u5df2\u7ecf\u5b89\u88c5\u90e8\u7f72 NebulaGraph master \u5e76\u83b7\u53d6\u5982\u4e0b\u4fe1\u606f\uff1a</p> <ul> <li>Graph \u670d\u52a1\u548c Meta \u670d\u52a1\u7684\u7684 IP \u5730\u5740\u548c\u7aef\u53e3\u3002</li> </ul> <ul> <li>\u62e5\u6709 NebulaGraph \u5199\u6743\u9650\u7684\u7528\u6237\u540d\u548c\u5bc6\u7801\u3002</li> </ul> <ul> <li>Meta \u670d\u52a1\u914d\u7f6e\u6587\u4ef6\u4e2d\u7684<code>--ws_storage_http_port</code>\u548c Storage \u670d\u52a1\u914d\u7f6e\u6587\u4ef6\u4e2d\u7684<code>--ws_http_port</code>\u4e00\u81f4\u3002\u4f8b\u5982\u90fd\u4e3a<code>19779</code>\u3002</li> </ul> <ul> <li>Graph \u670d\u52a1\u914d\u7f6e\u6587\u4ef6\u4e2d\u7684<code>--ws_meta_http_port</code>\u548c Meta \u670d\u52a1\u914d\u7f6e\u6587\u4ef6\u4e2d\u7684<code>--ws_http_port</code>\u4e00\u81f4\u3002\u4f8b\u5982\u90fd\u4e3a<code>19559</code>\u3002</li> </ul> <ul> <li>Schema \u7684\u4fe1\u606f\uff0c\u5305\u62ec Tag \u548c Edge type \u7684\u540d\u79f0\u3001\u5c5e\u6027\u7b49\u3002</li> </ul> </li> </ul> <ul> <li>\u5df2\u7ecf\u7f16\u8bd1 Exchange\uff0c\u6216\u8005\u76f4\u63a5\u4e0b\u8f7d\u7f16\u8bd1\u5b8c\u6210\u7684 jar \u6587\u4ef6\u3002\u672c\u793a\u4f8b\u4e2d\u4f7f\u7528 Exchange 3.7.0\u3002</li> </ul> <ul> <li>\u5df2\u7ecf\u5b89\u88c5 Spark\u3002</li> </ul> <ul> <li>\u5df2\u7ecf\u5b89\u88c5 JDK 1.8 \u6216\u4ee5\u4e0a\u7248\u672c\uff0c\u5e76\u914d\u7f6e\u73af\u5883\u53d8\u91cf JAVA_HOME\u3002</li> </ul> <ul> <li> <p>\u786e\u8ba4 Hadoop \u670d\u52a1\u5728\u6240\u6709\u90e8\u7f72 Storage \u670d\u52a1\u7684\u673a\u5668\u4e0a\u8fd0\u884c\u6b63\u5e38\u3002</p> <p>Note</p> <ul> <li>\u5982\u679c\u9700\u8981\u751f\u6210\u5176\u4ed6\u6570\u636e\u6e90\u7684 SST \u6587\u4ef6\uff0c\u8bf7\u53c2\u89c1\u76f8\u5e94\u6570\u636e\u6e90\u7684\u6587\u6863\uff0c\u67e5\u770b\u524d\u63d0\u6761\u4ef6\u90e8\u5206\u3002</li> </ul> <ul> <li>\u5982\u679c\u53ea\u9700\u8981\u751f\u6210 SST \u6587\u4ef6\uff0c\u4e0d\u9700\u8981\u5728\u90e8\u7f72 Storage \u670d\u52a1\u7684\u673a\u5668\u4e0a\u5b89\u88c5 Hadoop \u670d\u52a1\u3002</li> </ul> <ul> <li>\u5982\u9700\u5728 INGEST\uff08\u6570\u636e\u5bfc\u5165\uff09\u7ed3\u675f\u540e\u81ea\u52a8\u79fb\u9664 SST \u6587\u4ef6\uff0c\u5728 Storage \u670d\u52a1\u914d\u7f6e\u6587\u4ef6\u4e2d\u589e\u52a0<code>--move_files=true</code>\uff0c\u8be5\u914d\u7f6e\u4f1a\u8ba9 NebulaGraph \u5728 INGEST \u540e\u5c06 SST \u6587\u4ef6\u79fb\u52a8\uff08<code>mv</code>\uff09\u5230<code>data</code>\u76ee\u5f55\u4e0b\u3002<code>--move_files</code>\u7684\u9ed8\u8ba4\u503c\u4e3a<code>false</code>\uff0c\u6b64\u65f6 NebulaGraph \u4f1a\u590d\u5236\uff08<code>cp</code>\uff09SST \u6587\u4ef6\u800c\u4e0d\u662f\u79fb\u52a8\u3002</li> </ul> </li> </ul>"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-sst/#_8","title":"\u64cd\u4f5c\u6b65\u9aa4","text":""},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-sst/#1_nebulagraph_schema","title":"\u6b65\u9aa4 1\uff1a\u5728 NebulaGraph \u4e2d\u521b\u5efa Schema","text":"<p>\u5206\u6790 CSV \u6587\u4ef6\u4e2d\u7684\u6570\u636e\uff0c\u6309\u4ee5\u4e0b\u6b65\u9aa4\u5728 NebulaGraph \u4e2d\u521b\u5efa Schema\uff1a</p> <ol> <li> <p>\u786e\u8ba4 Schema \u8981\u7d20\u3002 NebulaGraph \u4e2d\u7684 Schema \u8981\u7d20\u5982\u4e0b\u8868\u6240\u793a\u3002</p> \u8981\u7d20 \u540d\u79f0 \u5c5e\u6027 Tag <code>player</code> <code>name string, age int</code> Tag <code>team</code> <code>name string</code> Edge Type <code>follow</code> <code>degree int</code> Edge Type <code>serve</code> <code>start_year int, end_year int</code> </li> <li> <p>\u4f7f\u7528 NebulaGraph Console \u521b\u5efa\u4e00\u4e2a\u56fe\u7a7a\u95f4 basketballplayer\uff0c\u5e76\u521b\u5efa\u4e00\u4e2a Schema\uff0c\u5982\u4e0b\u6240\u793a\u3002</p> <pre><code>## \u521b\u5efa\u56fe\u7a7a\u95f4\nnebula&gt; CREATE SPACE basketballplayer \\\n        (partition_num = 10, \\\n        replica_factor = 1, \\\n        vid_type = FIXED_STRING(30));\n\n## \u9009\u62e9\u56fe\u7a7a\u95f4 basketballplayer\nnebula&gt; USE basketballplayer;\n\n## \u521b\u5efa Tag player\nnebula&gt; CREATE TAG player(name string, age int);\n\n## \u521b\u5efa Tag team\nnebula&gt; CREATE TAG team(name string);\n\n## \u521b\u5efa Edge type follow\nnebula&gt; CREATE EDGE follow(degree int);\n\n## \u521b\u5efa Edge type serve\nnebula&gt; CREATE EDGE serve(start_year int, end_year int);\n</code></pre> </li> </ol> <p>\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u89c1\u5feb\u901f\u5f00\u59cb\u3002</p>"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-sst/#2_csv","title":"\u6b65\u9aa4 2\uff1a\u5904\u7406 CSV \u6587\u4ef6","text":"<p>\u786e\u8ba4\u4ee5\u4e0b\u4fe1\u606f\uff1a</p> <ol> <li> <p>\u5904\u7406 CSV \u6587\u4ef6\u4ee5\u6ee1\u8db3 Schema \u7684\u8981\u6c42\u3002</p> <p>Note</p> <p>\u53ef\u4ee5\u4f7f\u7528\u6709\u8868\u5934\u6216\u8005\u65e0\u8868\u5934\u7684 CSV \u6587\u4ef6\u3002</p> </li> <li> <p>\u83b7\u53d6 CSV \u6587\u4ef6\u5b58\u50a8\u8def\u5f84\u3002</p> </li> </ol>"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-sst/#3","title":"\u6b65\u9aa4 3\uff1a\u4fee\u6539\u914d\u7f6e\u6587\u4ef6","text":"<p>\u7f16\u8bd1 Exchange \u540e\uff0c\u590d\u5236<code>target/classes/application.conf</code>\u6587\u4ef6\u8bbe\u7f6e\u76f8\u5173\u914d\u7f6e\u3002\u5728\u672c\u793a\u4f8b\u4e2d\uff0c\u590d\u5236\u7684\u6587\u4ef6\u540d\u4e3a<code>sst_application.conf</code>\u3002\u5404\u4e2a\u914d\u7f6e\u9879\u7684\u8be6\u7ec6\u8bf4\u660e\u8bf7\u53c2\u89c1\u914d\u7f6e\u8bf4\u660e\u3002</p> <pre><code>{\n  # Spark \u76f8\u5173\u914d\u7f6e\n  spark: {\n    app: {\n      name: NebulaGraph Exchange 3.7.0\n    }\n\n    master:local\n\n    driver: {\n      cores: 1\n      maxResultSize: 1G\n    }\n\n    executor: {\n        memory:1G\n    }\n\n    cores:{\n      max: 16\n    }\n  }\n\n  # NebulaGraph \u76f8\u5173\u914d\u7f6e\n  nebula: {\n    address:{\n      graph:[\"192.168.8.XXX:9669\"]\n      #\u4efb\u610f\u4e00\u4e2a Meta \u670d\u52a1\u7684\u5730\u5740\u3002\n      #\u5982\u679c\u60a8\u7684 NebulaGraph \u5728\u865a\u62df\u7f51\u7edc\u4e2d\uff0c\u5982k8s\uff0c\u8bf7\u914d\u7f6e Leader Meta\u7684\u5730\u5740\u3002\n      meta:[\"192.168.8.XXX:9559\"]\n    }\n    user: root\n    pswd: nebula\n    # \u662f\u5426\u4f7f\u7528 RSA \u52a0\u5bc6\u7684\u5bc6\u7801\u3002\n    # enableRSA: true\n    # \u4f7f\u7528 RSA \u52a0\u5bc6\u5bc6\u7801\u65f6\u7684\u5bc6\u94a5\u3002\n    # privateKey: \"\"\n\n    space: basketballplayer\n\n    # SST \u6587\u4ef6\u76f8\u5173\u914d\u7f6e\n    path:{\n        # \u672c\u5730\u4e34\u65f6\u5b58\u653e\u751f\u6210\u7684 SST \u6587\u4ef6\u7684\u76ee\u5f55\n        local:\"/tmp\"\n\n        # SST \u6587\u4ef6\u5728 HDFS \u7684\u5b58\u50a8\u8def\u5f84\n        remote:\"/sst\"\n\n        # HDFS \u7684 NameNode \u5730\u5740\uff0c\u4f8b\u5982 \"hdfs://&lt;ip/hostname&gt;:&lt;port&gt;\"\u3002\n        hdfs.namenode: \"hdfs://*.*.*.*:9000\"\n    }\n\n    # \u5ba2\u6237\u7aef\u8fde\u63a5\u53c2\u6570\n    connection: {\n      # socket \u8fde\u63a5\u3001\u6267\u884c\u7684\u8d85\u65f6\u65f6\u95f4\uff0c\u5355\u4f4d\uff1a\u6beb\u79d2\u3002\n      timeout: 30000\n    }\n\n    error: {\n      # \u6700\u5927\u5931\u8d25\u6570\uff0c\u8d85\u8fc7\u540e\u4f1a\u9000\u51fa\u5e94\u7528\u7a0b\u5e8f\u3002\n      max: 32\n      # \u5931\u8d25\u7684\u5bfc\u5165\u4f5c\u4e1a\u5c06\u8bb0\u5f55\u5728\u8f93\u51fa\u8def\u5f84\u4e2d\u3002\n      output: /tmp/errors\n    }\n\n    # \u4f7f\u7528Google Guava RateLimiter \u6765\u9650\u5236\u53d1\u9001\u5230 NebulaGraph \u7684\u8bf7\u6c42\u3002\n    rate: {\n      # RateLimiter \u7684\u7a33\u5b9a\u541e\u5410\u91cf\u3002\n      limit: 1024\n\n      # \u4ece RateLimiter \u83b7\u53d6\u5141\u8bb8\u7684\u8d85\u65f6\u65f6\u95f4\uff0c\u5355\u4f4d\uff1a\u6beb\u79d2\n      timeout: 1000\n    }\n  }\n\n  # \u5904\u7406\u70b9\n  tags: [\n    # \u8bbe\u7f6e Tag player \u76f8\u5173\u4fe1\u606f\u3002\n    {\n      # \u6307\u5b9a NebulaGraph \u4e2d\u5b9a\u4e49\u7684 Tag \u540d\u79f0\u3002\n      name: player\n      type: {\n        # \u6307\u5b9a\u6570\u636e\u6e90\uff0c\u4f7f\u7528 CSV\u3002\n        source: csv\n\n        # \u6307\u5b9a\u5982\u4f55\u5c06\u70b9\u6570\u636e\u5bfc\u5165 NebulaGraph \uff1aClient \u6216 SST\u3002\n        sink: sst\n      }\n\n      # \u6307\u5b9a CSV \u6587\u4ef6\u7684\u8def\u5f84\u3002\n      # \u6587\u4ef6\u5b58\u50a8\u5728 HDFS \u4e0a\uff0c\u7528\u53cc\u5f15\u53f7\u62ec\u8d77\u8def\u5f84\uff0c\u4ee5 hdfs://\u5f00\u5934\uff0c\u4f8b\u5982\"hdfs://ip:port/xx/xx.csv\"\u3002\n      path: \"hdfs://*.*.*.*:9000/dataset/vertex_player.csv\"\n\n      # \u5982\u679c CSV \u6587\u4ef6\u6ca1\u6709\u8868\u5934\uff0c\u4f7f\u7528 [_c0, _c1, _c2, ..., _cn] \u8868\u793a\u5176\u8868\u5934\uff0c\u5e76\u5c06\u5217\u6307\u793a\u4e3a\u5c5e\u6027\u503c\u7684\u6e90\u3002\n      # \u5982\u679c CSV \u6587\u4ef6\u6709\u8868\u5934\uff0c\u5219\u4f7f\u7528\u5b9e\u9645\u7684\u5217\u540d\u3002\n      fields: [_c1, _c2]\n\n      # \u6307\u5b9a NebulaGraph \u4e2d\u5b9a\u4e49\u7684\u5c5e\u6027\u540d\u79f0\u3002\n      # fields \u4e0e nebula.fields \u7684\u987a\u5e8f\u5fc5\u987b\u4e00\u4e00\u5bf9\u5e94\u3002\n      nebula.fields: [age, name]\n\n      # \u6307\u5b9a\u4e00\u4e2a\u5217\u4f5c\u4e3a VID \u7684\u6e90\u3002\n      # vertex \u7684\u503c\u5fc5\u987b\u4e0e\u4e0a\u8ff0 fields \u6216\u8005 csv.fields \u4e2d\u7684\u5217\u540d\u4fdd\u6301\u4e00\u81f4\u3002\n      # \u76ee\u524d\uff0cNebulaGraph  master\u4ec5\u652f\u6301\u5b57\u7b26\u4e32\u6216\u6574\u6570\u7c7b\u578b\u7684 VID\u3002\n      vertex: {\n        field:_c0\n      # \u4e3a VID \u589e\u52a0\u6307\u5b9a\u7684\u524d\u7f00\u3002\u4f8b\u5982 VID \u4e3a 12345\uff0c\u589e\u52a0\u524d\u7f00 tag1 \u540e\u4e3a tag1_12345\u3002\u4e0b\u5212\u7ebf\u65e0\u6cd5\u4fee\u6539\u3002\n      # prefix:\"tag1\"\n      # \u5bf9 string \u7c7b\u578b\u7684 VID \u8fdb\u884c\u54c8\u5e0c\u5316\u64cd\u4f5c\u3002\n      # policy:hash\n      }\n\n      # \u6307\u5b9a\u7684\u5206\u9694\u7b26\u3002\u9ed8\u8ba4\u503c\u4e3a\u82f1\u6587\u9017\u53f7\uff08,\uff09\u3002\n      separator: \",\"\n\n      # \u5982\u679c CSV \u6587\u4ef6\u6709\u8868\u5934\uff0c\u8bf7\u5c06 header \u8bbe\u7f6e\u4e3a true\u3002\n      # \u5982\u679c CSV \u6587\u4ef6\u6ca1\u6709\u8868\u5934\uff0c\u8bf7\u5c06 header \u8bbe\u7f6e\u4e3a false\u3002\u9ed8\u8ba4\u503c\u4e3a false\u3002\n      header: false\n\n      # \u6279\u91cf\u64cd\u4f5c\u7c7b\u578b\uff0c\u5305\u62ec INSERT\u3001UPDATE \u548c DELETE\u3002\u9ed8\u8ba4\u4e3a INSERT\u3002\n      #writeMode: INSERT\n\n      # \u6307\u5b9a\u5355\u6279\u6b21\u5199\u5165 NebulaGraph \u7684\u6700\u5927\u70b9\u6570\u91cf\u3002\n      batch: 256\n\n      # \u6570\u636e\u5199\u5165 NebulaGraph \u65f6\u9700\u8981\u521b\u5efa\u7684\u5206\u533a\u6570\u3002\n      partition: 32\n\n      # \u751f\u6210 SST \u6587\u4ef6\u65f6\u662f\u5426\u8981\u57fa\u4e8e NebulaGraph \u4e2d\u56fe\u7a7a\u95f4\u7684 partition \u8fdb\u884c\u6570\u636e\u91cd\u5206\u533a\u3002\n      repartitionWithNebula: false\n    }\n\n    # \u8bbe\u7f6e Tag team \u76f8\u5173\u4fe1\u606f\u3002\n    {\n      name: team\n      type: {\n        source: csv\n        sink: sst\n      }\n      path: \"hdfs://*.*.*.*:9000/dataset/vertex_team.csv\"\n      fields: [_c1]\n      nebula.fields: [name]\n      vertex: {\n        field:_c0\n      }\n      separator: \",\"\n      header: false\n      batch: 256\n      partition: 32\n      repartitionWithNebula: false\n    }\n\n    # \u5982\u679c\u9700\u8981\u6dfb\u52a0\u66f4\u591a\u70b9\uff0c\u8bf7\u53c2\u8003\u524d\u9762\u7684\u914d\u7f6e\u8fdb\u884c\u6dfb\u52a0\u3002\n  ]\n  # \u5904\u7406\u8fb9\n  edges: [\n    # \u8bbe\u7f6e Edge type follow \u76f8\u5173\u4fe1\u606f\u3002\n    {\n      # \u6307\u5b9a NebulaGraph \u4e2d\u5b9a\u4e49\u7684 Edge type \u540d\u79f0\u3002\n      name: follow\n      type: {\n        # \u6307\u5b9a\u6570\u636e\u6e90\uff0c\u4f7f\u7528 CSV\u3002\n        source: csv\n\n        # \u6307\u5b9a\u5982\u4f55\u5c06\u70b9\u6570\u636e\u5bfc\u5165 NebulaGraph \uff1aClient \u6216 SST\u3002\n        sink: sst\n      }\n\n      # \u6307\u5b9a CSV \u6587\u4ef6\u7684\u8def\u5f84\u3002\n      # \u6587\u4ef6\u5b58\u50a8\u5728 HDFS \u4e0a\uff0c\u7528\u53cc\u5f15\u53f7\u62ec\u8d77\u8def\u5f84\uff0c\u4ee5 hdfs://\u5f00\u5934\uff0c\u4f8b\u5982\"hdfs://&lt;ip/hostname&gt;:port/xx/xx.csv\"\u3002\n      path: \"hdfs://*.*.*.*:9000/dataset/edge_follow.csv\"\n\n      # \u5982\u679c CSV \u6587\u4ef6\u6ca1\u6709\u8868\u5934\uff0c\u4f7f\u7528 [_c0, _c1, _c2, ..., _cn] \u8868\u793a\u5176\u8868\u5934\uff0c\u5e76\u5c06\u5217\u6307\u793a\u4e3a\u5c5e\u6027\u503c\u7684\u6e90\u3002\n      # \u5982\u679c CSV \u6587\u4ef6\u6709\u8868\u5934\uff0c\u5219\u4f7f\u7528\u5b9e\u9645\u7684\u5217\u540d\u3002\n      fields: [_c2]\n\n      # \u6307\u5b9a NebulaGraph \u4e2d\u5b9a\u4e49\u7684\u5c5e\u6027\u540d\u79f0\u3002\n      # fields \u4e0e nebula.fields \u7684\u987a\u5e8f\u5fc5\u987b\u4e00\u4e00\u5bf9\u5e94\u3002\n      nebula.fields: [degree]\n\n      # \u6307\u5b9a\u4e00\u4e2a\u5217\u4f5c\u4e3a\u8d77\u59cb\u70b9\u548c\u76ee\u7684\u70b9\u7684\u6e90\u3002\n      # vertex \u7684\u503c\u5fc5\u987b\u4e0e\u4e0a\u8ff0 fields \u6216\u8005 csv.fields \u4e2d\u7684\u5217\u540d\u4fdd\u6301\u4e00\u81f4\u3002\n      # \u76ee\u524d\uff0cNebulaGraph  master\u4ec5\u652f\u6301\u5b57\u7b26\u4e32\u6216\u6574\u6570\u7c7b\u578b\u7684 VID\u3002\n      source: {\n        field: _c0\n      # \u4e3a VID \u589e\u52a0\u6307\u5b9a\u7684\u524d\u7f00\u3002\u4f8b\u5982 VID \u4e3a 12345\uff0c\u589e\u52a0\u524d\u7f00 tag1 \u540e\u4e3a tag1_12345\u3002\u4e0b\u5212\u7ebf\u65e0\u6cd5\u4fee\u6539\u3002\n      # prefix:\"tag1\"\n      # \u5bf9 string \u7c7b\u578b\u7684 VID \u8fdb\u884c\u54c8\u5e0c\u5316\u64cd\u4f5c\u3002\n      # policy:hash\n      }\n      target: {\n        field: _c1\n      # \u4e3a VID \u589e\u52a0\u6307\u5b9a\u7684\u524d\u7f00\u3002\u4f8b\u5982 VID \u4e3a 12345\uff0c\u589e\u52a0\u524d\u7f00 tag1 \u540e\u4e3a tag1_12345\u3002\u4e0b\u5212\u7ebf\u65e0\u6cd5\u4fee\u6539\u3002\n      # prefix:\"tag1\"\n      # \u5bf9 string \u7c7b\u578b\u7684 VID \u8fdb\u884c\u54c8\u5e0c\u5316\u64cd\u4f5c\u3002\n      # policy:hash\n      }\n\n      # \u6307\u5b9a\u7684\u5206\u9694\u7b26\u3002\u9ed8\u8ba4\u503c\u4e3a\u82f1\u6587\u9017\u53f7\uff08,\uff09\u3002\n      separator: \",\"\n\n      # \u6307\u5b9a\u4e00\u4e2a\u5217\u4f5c\u4e3a rank \u7684\u6e90\uff08\u53ef\u9009\uff09\u3002\n\n      #ranking: rank\n\n      # \u5982\u679c CSV \u6587\u4ef6\u6709\u8868\u5934\uff0c\u8bf7\u5c06 header \u8bbe\u7f6e\u4e3a true\u3002\n      # \u5982\u679c CSV \u6587\u4ef6\u6ca1\u6709\u8868\u5934\uff0c\u8bf7\u5c06 header \u8bbe\u7f6e\u4e3a false\u3002\u9ed8\u8ba4\u503c\u4e3a false\u3002\n      header: false\n\n      # \u6279\u91cf\u64cd\u4f5c\u7c7b\u578b\uff0c\u5305\u62ec INSERT\u3001UPDATE \u548c DELETE\u3002\u9ed8\u8ba4\u4e3a INSERT\u3002\n      #writeMode: INSERT\n\n      # \u6307\u5b9a\u5355\u6279\u6b21\u5199\u5165 NebulaGraph \u7684\u6700\u5927\u8fb9\u6570\u91cf\u3002\n      batch: 256\n\n      # \u6570\u636e\u5199\u5165 NebulaGraph \u65f6\u9700\u8981\u521b\u5efa\u7684\u5206\u533a\u6570\u3002\n      partition: 32\n\n      # \u751f\u6210 SST \u6587\u4ef6\u65f6\u662f\u5426\u8981\u57fa\u4e8e NebulaGraph \u4e2d\u56fe\u7a7a\u95f4\u7684 partition \u8fdb\u884c\u6570\u636e\u91cd\u5206\u533a\u3002\n      repartitionWithNebula: false\n    }\n\n    # \u8bbe\u7f6e Edge type serve \u76f8\u5173\u4fe1\u606f\u3002\n    {\n      name: serve\n      type: {\n        source: csv\n        sink: sst\n      }\n      path: \"hdfs://*.*.*.*:9000/dataset/edge_serve.csv\"\n      fields: [_c2,_c3]\n      nebula.fields: [start_year, end_year]\n      source: {\n        field: _c0\n      }\n      target: {\n        field: _c1\n      }\n      separator: \",\"\n      header: false\n      batch: 256\n      partition: 32\n      repartitionWithNebula: false\n    }\n\n  ]\n  # \u5982\u679c\u9700\u8981\u6dfb\u52a0\u66f4\u591a\u8fb9\uff0c\u8bf7\u53c2\u8003\u524d\u9762\u7684\u914d\u7f6e\u8fdb\u884c\u6dfb\u52a0\u3002\n}\n</code></pre>"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-sst/#4_sst","title":"\u6b65\u9aa4 4\uff1a\u751f\u6210 SST \u6587\u4ef6","text":"<p>\u8fd0\u884c\u5982\u4e0b\u547d\u4ee4\u5c06 CSV \u6e90\u6587\u4ef6\u751f\u6210\u4e3a SST \u6587\u4ef6\u3002\u5173\u4e8e\u53c2\u6570\u7684\u8bf4\u660e\uff0c\u8bf7\u53c2\u89c1\u547d\u4ee4\u53c2\u6570\u3002</p> <pre><code>${SPARK_HOME}/bin/spark-submit --master \"local\" --conf spark.sql.shuffle.partitions=&lt;shuffle_concurrency&gt; --class com.vesoft.nebula.exchange.Exchange &lt;nebula-exchange.jar_path&gt; -c &lt;sst_application.conf_path&gt; \n</code></pre> <p>Note</p> <p>\u751f\u6210 SST \u6587\u4ef6\u65f6\uff0c\u4f1a\u6d89\u53ca\u5230 Spark \u7684 shuffle \u64cd\u4f5c\uff0c\u8bf7\u6ce8\u610f\u5728\u63d0\u4ea4\u547d\u4ee4\u4e2d\u589e\u52a0<code>spark.sql.shuffle.partitions</code>\u7684\u914d\u7f6e\u3002</p> <p>Note</p> <p>JAR \u5305\u6709\u4e24\u79cd\u83b7\u53d6\u65b9\u5f0f\uff1a\u81ea\u884c\u7f16\u8bd1\u6216\u8005\u4ece maven \u4ed3\u5e93\u4e0b\u8f7d\u3002</p> <p>\u793a\u4f8b\uff1a</p> <pre><code>${SPARK_HOME}/bin/spark-submit  --master \"local\" --conf spark.sql.shuffle.partitions=200 --class com.vesoft.nebula.exchange.Exchange  /root/nebula-exchange/nebula-exchange/target/nebula-exchange_spark_2.4-3.7.0.jar  -c /root/nebula-exchange/nebula-exchange/target/classes/sst_application.conf\n</code></pre> <p>\u4efb\u52a1\u6267\u884c\u5b8c\u6210\u540e\uff0c\u53ef\u4ee5\u5728 HDFS \u4e0a\u7684<code>/sst</code>\u76ee\u5f55\uff08<code>nebula.path.remote</code>\u53c2\u6570\u6307\u5b9a\uff09\u5185\u67e5\u770b\u5230\u751f\u6210\u7684 SST \u6587\u4ef6\u3002</p> <p>Note</p> <p>\u5982\u679c\u5bf9 Schema \u6709\u4fee\u6539\u64cd\u4f5c\uff0c\u4f8b\u5982\u91cd\u5efa\u56fe\u7a7a\u95f4\u3001\u4fee\u6539 Tag\u3001\u4fee\u6539 Edge type \u7b49\uff0c\u9700\u8981\u91cd\u65b0\u751f\u6210 SST \u6587\u4ef6\uff0c\u56e0\u4e3a SST \u6587\u4ef6\u4f1a\u9a8c\u8bc1 Space ID\u3001Tag ID\u3001Edge ID \u7b49\u4fe1\u606f\u3002</p>"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-sst/#5_sst","title":"\u6b65\u9aa4 5\uff1a\u5bfc\u5165 SST \u6587\u4ef6","text":"<p>Note</p> <p>\u5bfc\u5165\u524d\u8bf7\u786e\u8ba4\u4ee5\u4e0b\u4fe1\u606f\uff1a</p> <ul> <li>\u786e\u8ba4\u6240\u6709\u90e8\u7f72 Storage \u670d\u52a1\u7684\u673a\u5668\u4e0a\u90fd\u5df2\u90e8\u7f72 Hadoop \u670d\u52a1\uff0c\u5e76\u914d\u7f6e HADOOP_HOME \u548c JAVA_HOME\u3002</li> </ul> <ul> <li>Meta \u670d\u52a1\u914d\u7f6e\u6587\u4ef6\u4e2d\u7684<code>--ws_storage_http_port</code>\uff08\u5982\u679c\u6ca1\u6709\uff0c\u8bf7\u624b\u52a8\u6dfb\u52a0\uff09\u548c Storage \u670d\u52a1\u914d\u7f6e\u6587\u4ef6\u4e2d\u7684<code>--ws_http_port</code>\u4e00\u81f4\u3002\u4f8b\u5982\u90fd\u4e3a<code>19779</code>\u3002</li> </ul> <ul> <li>Graph \u670d\u52a1\u914d\u7f6e\u6587\u4ef6\u4e2d\u7684<code>--ws_meta_http_port</code>\uff08\u5982\u679c\u6ca1\u6709\uff0c\u8bf7\u624b\u52a8\u6dfb\u52a0\uff09\u548c Meta \u670d\u52a1\u914d\u7f6e\u6587\u4ef6\u4e2d\u7684<code>--ws_http_port</code>\u4e00\u81f4\u3002\u4f8b\u5982\u90fd\u4e3a<code>19559</code>\u3002</li> </ul> <p>\u4f7f\u7528\u5ba2\u6237\u7aef\u5de5\u5177\u8fde\u63a5 NebulaGraph\uff0c\u6309\u5982\u4e0b\u64cd\u4f5c\u5bfc\u5165 SST \u6587\u4ef6\uff1a</p> <ol> <li> <p>\u6267\u884c\u547d\u4ee4\u9009\u62e9\u4e4b\u524d\u521b\u5efa\u7684\u56fe\u7a7a\u95f4\u3002</p> <pre><code>nebula&gt; USE basketballplayer;\n</code></pre> </li> <li> <p>\u6267\u884c\u547d\u4ee4\u4e0b\u8f7d SST \u6587\u4ef6\uff1a</p> <pre><code>nebula&gt; SUBMIT JOB DOWNLOAD HDFS \"hdfs://&lt;hadoop_address&gt;:&lt;hadoop_port&gt;/&lt;sst_file_path&gt;\";\n</code></pre> <p>\u793a\u4f8b\uff1a</p> <pre><code>nebula&gt; SUBMIT JOB DOWNLOAD HDFS \"hdfs://*.*.*.*:9000/sst\";\n</code></pre> </li> <li> <p>\u6267\u884c\u547d\u4ee4\u5bfc\u5165 SST \u6587\u4ef6\uff1a</p> <pre><code>nebula&gt; SUBMIT JOB INGEST;\n</code></pre> </li> </ol> <p>Note</p> <ul> <li>\u5982\u679c\u9700\u8981\u91cd\u65b0\u4e0b\u8f7d\uff0c\u8bf7\u5728 NebulaGraph \u5b89\u88c5\u8def\u5f84\u5185\u7684<code>data/storage/nebula</code>\u76ee\u5f55\u5185\uff0c\u5c06\u5bf9\u5e94 Space ID \u76ee\u5f55\u5185\u7684<code>download</code>\u6587\u4ef6\u5939\u5220\u9664\uff0c\u7136\u540e\u91cd\u65b0\u4e0b\u8f7d SST \u6587\u4ef6\u3002\u5982\u679c\u56fe\u7a7a\u95f4\u662f\u591a\u526f\u672c\uff0c\u4fdd\u5b58\u526f\u672c\u7684\u6240\u6709\u673a\u5668\u90fd\u9700\u8981\u5220\u9664<code>download</code>\u6587\u4ef6\u5939\u3002</li> </ul> <ul> <li>\u5982\u679c\u5bfc\u5165\u65f6\u51fa\u73b0\u95ee\u9898\u9700\u8981\u91cd\u65b0\u5bfc\u5165\uff0c\u91cd\u65b0\u6267\u884c<code>SUBMIT JOB INGEST;</code>\u5373\u53ef\u3002</li> </ul>"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-sst/#6","title":"\u6b65\u9aa4 6\uff1a\uff08\u53ef\u9009\uff09\u9a8c\u8bc1\u6570\u636e","text":"<p>\u7528\u6237\u53ef\u4ee5\u5728 NebulaGraph \u5ba2\u6237\u7aef\uff08\u4f8b\u5982 NebulaGraph Studio\uff09\u4e2d\u6267\u884c\u67e5\u8be2\u8bed\u53e5\uff0c\u786e\u8ba4\u6570\u636e\u662f\u5426\u5df2\u5bfc\u5165\u3002\u4f8b\u5982\uff1a</p> <pre><code>LOOKUP ON player YIELD id(vertex);\n</code></pre> <p>\u7528\u6237\u4e5f\u53ef\u4ee5\u4f7f\u7528\u547d\u4ee4 <code>SHOW STATS</code> \u67e5\u770b\u7edf\u8ba1\u6570\u636e\u3002</p>"},{"location":"import-export/nebula-exchange/use-exchange/ex-ug-import-from-sst/#7_nebulagraph","title":"\u6b65\u9aa4 7\uff1a\uff08\u5982\u6709\uff09\u5728 NebulaGraph \u4e2d\u91cd\u5efa\u7d22\u5f15","text":"<p>\u5bfc\u5165\u6570\u636e\u540e\uff0c\u7528\u6237\u53ef\u4ee5\u5728 NebulaGraph \u4e2d\u91cd\u65b0\u521b\u5efa\u5e76\u91cd\u5efa\u7d22\u5f15\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1\u7d22\u5f15\u4ecb\u7ecd\u3002</p>"},{"location":"k8s-operator/1.introduction-to-nebula-operator/","title":"\u4ec0\u4e48\u662f NebulaGraph Operator","text":""},{"location":"k8s-operator/1.introduction-to-nebula-operator/#_1","title":"\u57fa\u672c\u6982\u5ff5","text":"<p>NebulaGraph Operator \u662f\u7528\u4e8e\u5728 Kubernetes \u7cfb\u7edf\u4e0a\u81ea\u52a8\u5316\u90e8\u7f72\u548c\u8fd0\u7ef4 NebulaGraph \u96c6\u7fa4\u7684\u5de5\u5177\u3002\u4f9d\u6258\u4e8e Kubernetes \u6269\u5c55\u673a\u5236\uff0cNebulaGraph \u5c06\u5176\u8fd0\u7ef4\u9886\u57df\u7684\u77e5\u8bc6\u5168\u9762\u6ce8\u5165\u81f3 Kubernetes \u7cfb\u7edf\u4e2d\uff0c\u8ba9 NebulaGraph \u6210\u4e3a\u771f\u6b63\u7684\u4e91\u539f\u751f\u56fe\u6570\u636e\u5e93\u3002</p> <p></p>"},{"location":"k8s-operator/1.introduction-to-nebula-operator/#_2","title":"\u5de5\u4f5c\u539f\u7406","text":"<p>\u5bf9\u4e8e Kubernetes \u7cfb\u7edf\u5185\u4e0d\u5b58\u5728\u7684\u8d44\u6e90\u7c7b\u578b\uff0c\u7528\u6237\u53ef\u4ee5\u901a\u8fc7\u6dfb\u52a0\u81ea\u5b9a\u4e49 API \u5bf9\u8c61\u7684\u65b9\u5f0f\u6ce8\u518c\uff0c\u5e38\u89c1\u7684\u65b9\u6cd5\u662f\u4f7f\u7528 CustomResourceDefinition\uff08CRD\uff09\u3002</p> <p>NebulaGraph Operator \u5c06 NebulaGraph \u96c6\u7fa4\u7684\u90e8\u7f72\u7ba1\u7406\u62bd\u8c61\u4e3a CRD\u3002\u901a\u8fc7\u7ed3\u5408\u591a\u4e2a\u5185\u7f6e\u7684 API \u5bf9\u8c61\uff0c\u5305\u62ec StatefulSet\u3001Service \u548c ConfigMap\uff0cNebulaGraph \u96c6\u7fa4\u7684\u65e5\u5e38\u7ba1\u7406\u548c\u7ef4\u62a4\u88ab\u7f16\u7801\u4e3a\u4e00\u4e2a\u63a7\u5236\u5faa\u73af\u3002\u5728 Kubernetes \u7cfb\u7edf\u5185\uff0c\u6bcf\u4e00\u79cd\u5185\u7f6e\u8d44\u6e90\u5bf9\u8c61\uff0c\u90fd\u8fd0\u884c\u7740\u4e00\u4e2a\u7279\u5b9a\u7684\u63a7\u5236\u5faa\u73af\uff0c\u5c06\u5b83\u7684\u5b9e\u9645\u72b6\u6001\u901a\u8fc7\u4e8b\u5148\u89c4\u5b9a\u597d\u7684\u7f16\u6392\u52a8\u4f5c\uff0c\u9010\u6b65\u8c03\u6574\u4e3a\u6700\u7ec8\u7684\u671f\u671b\u72b6\u6001\u3002\u5f53\u4e00\u4e2a CR \u5b9e\u4f8b\u88ab\u63d0\u4ea4\u65f6\uff0cNebulaGraph Operator \u4f1a\u6839\u636e\u63a7\u5236\u6d41\u7a0b\u9a71\u52a8\u6570\u636e\u5e93\u96c6\u7fa4\u8fdb\u5165\u6700\u7ec8\u72b6\u6001\u3002</p>"},{"location":"k8s-operator/1.introduction-to-nebula-operator/#_3","title":"\u529f\u80fd\u4ecb\u7ecd","text":"<p>NebulaGraph Operator \u5df2\u5177\u5907\u7684\u529f\u80fd\u5982\u4e0b\uff1a</p> <ul> <li>\u96c6\u7fa4\u521b\u5efa\u548c\u5378\u8f7d\uff1aNebulaGraph Operator \u7b80\u5316\u4e86\u7528\u6237\u90e8\u7f72\u548c\u5378\u8f7d\u96c6\u7fa4\u7684\u8fc7\u7a0b\u3002\u7528\u6237\u53ea\u9700\u63d0\u4f9b\u5bf9\u5e94\u7684 CR \u6587\u4ef6\uff0cNebulaGraph Operator \u5373\u53ef\u5feb\u901f\u521b\u5efa\u6216\u8005\u5220\u9664\u4e00\u4e2a\u5bf9\u5e94\u7684 NebulaGraph \u96c6\u7fa4\u3002\u66f4\u591a\u4fe1\u606f\u53c2\u89c1\u521b\u5efa NebulaGraph \u96c6\u7fa4\u3002</li> </ul> <ul> <li>\u96c6\u7fa4\u5347\u7ea7\uff1a\u652f\u6301\u5347\u7ea7 3.5.0 \u7248\u7684 NebulaGraph \u96c6\u7fa4\u81f3 3.6.0 \u7248\u3002  </li> </ul> <ul> <li>\u6545\u969c\u81ea\u6108\uff1aNebulaGraph Operator \u8c03\u7528 NebulaGraph \u96c6\u7fa4\u63d0\u4f9b\u7684\u63a5\u53e3\uff0c\u52a8\u6001\u5730\u611f\u77e5\u670d\u52a1\u72b6\u6001\u3002\u4e00\u65e6\u53d1\u73b0\u5f02\u5e38\uff0cNebulaGraph Operator \u81ea\u52a8\u8fdb\u884c\u5bb9\u9519\u5904\u7406\u3002\u66f4\u591a\u4fe1\u606f\u53c2\u8003\u6545\u969c\u81ea\u6108\u3002</li> </ul> <ul> <li>\u5747\u8861\u8c03\u5ea6\uff1a\u57fa\u4e8e\u8c03\u5ea6\u5668\u6269\u5c55\u63a5\u53e3\uff0cNebulaGraph Operator \u63d0\u4f9b\u7684\u8c03\u5ea6\u5668\u53ef\u4ee5\u5c06\u5e94\u7528 Pods \u5747\u5300\u5730\u5206\u5e03\u5728 NebulaGraph \u96c6\u7fa4\u4e2d\u3002</li> </ul>"},{"location":"k8s-operator/1.introduction-to-nebula-operator/#_4","title":"\u4f7f\u7528\u9650\u5236","text":""},{"location":"k8s-operator/1.introduction-to-nebula-operator/#_5","title":"\u7248\u672c\u9650\u5236","text":"<p>NebulaGraph Operator \u4e0d\u652f\u6301 v1.x \u7248\u672c\u7684 NebulaGraph\uff0c\u5176\u4e0e NebulaGraph \u7248\u672c\u7684\u5bf9\u5e94\u5173\u7cfb\u5982\u4e0b\uff1a</p> NebulaGraph \u7248\u672c NebulaGraph Operator \u7248\u672c 3.5.x ~ 3.6.0 1.5.0 ~ 1.7.x 3.0.0 ~ 3.4.1 1.3.0\u30011.4.0 ~ 1.4.2 3.0.0 ~ 3.3.x 1.0.0\u30011.1.0\u30011.2.0 2.5.x ~ 2.6.x 0.9.0 2.5.x 0.8.0 <p>\u5386\u53f2\u7248\u672c\u517c\u5bb9\u6027</p> <ul> <li>1.x \u7248\u672c\u7684 NebulaGraph Operator \u4e0d\u517c\u5bb9 3.x \u4ee5\u4e0b\u7248\u672c\u7684 NebulaGraph.</li> <li>\u7531\u4e8e 0.9.0 \u7248\u672c\u7684 NebulaGraph Operator \u7684\u65e5\u5fd7\u76d8\u548c\u6570\u636e\u76d8\u5206\u5f00\u5b58\u50a8\uff0c\u56e0\u6b64\u7528 0.9.0 \u7248\u7684 NebulaGraph Operator \u7ba1\u7406\u901a\u8fc7 0.8.0 \u7248\u672c\u521b\u5efa\u7684 2.5.x \u7248\u672c\u7684 NebulaGraph \u96c6\u7fa4\u4f1a\u5bfc\u81f4\u517c\u5bb9\u6027\u95ee\u9898\u3002\u7528\u6237\u53ef\u4ee5\u5907\u4efd 2.5.x \u7248\u672c\u7684 NebulaGraph \u96c6\u7fa4\uff0c\u7136\u540e\u4f7f\u7528 0.9.0 \u7248\u672c\u7684 Operator \u521b\u5efa 2.6.x \u7248\u672c\u96c6\u7fa4\u3002</li> </ul>"},{"location":"k8s-operator/1.introduction-to-nebula-operator/#_6","title":"\u66f4\u65b0\u8bf4\u660e","text":"<p>Release</p>"},{"location":"k8s-operator/5.FAQ/","title":"\u5e38\u89c1\u95ee\u9898","text":""},{"location":"k8s-operator/5.FAQ/#nebulagraph_operator_v1x_nebulagraph","title":"NebulaGraph Operator \u652f\u6301 v1.x \u7248\u672c\u7684 NebulaGraph \u5417\uff1f","text":"<p>\u4e0d\u652f\u6301\uff0c\u56e0\u4e3a v1.x \u7248\u672c\u7684 NebulaGraph \u4e0d\u652f\u6301 DNS\uff0c\u800c NebulaGraph Operator \u9700\u8981\u4f7f\u7528 DNS\u3002</p>"},{"location":"k8s-operator/5.FAQ/#_2","title":"\u4f7f\u7528\u672c\u5730\u5b58\u50a8\u662f\u5426\u53ef\u4ee5\u4fdd\u8bc1\u96c6\u7fa4\u7a33\u5b9a\u6027\uff1f","text":"<p>\u65e0\u6cd5\u4fdd\u8bc1\u3002\u4f7f\u7528\u672c\u5730\u5b58\u50a8\u610f\u5473\u7740 Pod \u88ab\u7ed1\u5b9a\u5230\u4e00\u4e2a\u7279\u5b9a\u7684\u8282\u70b9\uff0cNebulaGraph Operator \u76ee\u524d\u4e0d\u652f\u6301\u5728\u7ed1\u5b9a\u7684\u8282\u70b9\u53d1\u751f\u6545\u969c\u65f6\u8fdb\u884c\u6545\u969c\u8f6c\u79fb\u3002</p>"},{"location":"k8s-operator/5.FAQ/#_3","title":"\u6269\u7f29\u5bb9\u96c6\u7fa4\u65f6\uff0c\u5982\u4f55\u786e\u4fdd\u7a33\u5b9a\u6027\uff1f","text":"<p>\u5efa\u8bae\u63d0\u524d\u5907\u4efd\u6570\u636e\uff0c\u4ee5\u4fbf\u6545\u969c\u53d1\u751f\u65f6\u56de\u6eda\u6570\u636e\u3002</p>"},{"location":"k8s-operator/5.FAQ/#operator_replica_nebulagraph_replica","title":"Operator \u6587\u6863\u4e2d\u7684 replica \u548c NebulaGraph \u5185\u6838\u6587\u6863\u4e2d\u7684 replica \u662f\u4e00\u6837\u7684\u5417\uff1f","text":"<p>\u4e8c\u8005\u662f\u4e0d\u540c\u7684\u6982\u5ff5\u3002Operator \u6587\u6863\u4e2d\u7684 replica \u662f K8s \u4e2d\u7684 Pod \u526f\u672c\uff0c\u800c\u5185\u6838\u6587\u6863\u4e2d\u7684 replica \u662f NebulaGraph \u4e2d\u7684\u5206\u7247\u526f\u672c\u3002</p>"},{"location":"k8s-operator/5.FAQ/#nebulagraph","title":"\u5982\u4f55\u67e5\u770b NebulaGraph \u96c6\u7fa4\u4e2d\u5404\u670d\u52a1\u7684\u65e5\u5fd7\uff1f","text":"<p>\u7528\u6237\u53ef\u4ee5\u901a\u8fc7\u8fdb\u5165\u5bb9\u5668\u5e76\u5728\u5bb9\u5668\u5185\u67e5\u770b\u65e5\u5fd7\u6587\u4ef6\u7684\u65b9\u5f0f\u6765\u83b7\u53d6 NebulaGraph \u96c6\u7fa4\u5404\u670d\u52a1\u65e5\u5fd7\u3002</p> <p>\u64cd\u4f5c\u5982\u4e0b\uff1a</p> <pre><code># \u67e5\u627e\u8981\u8fdb\u5165\u7684\u5bb9\u5668\u6240\u5728\u7684 Pod \u540d\u79f0\u3002\u5176\u4e2d &lt;cluster-name&gt; \u4e3a\u96c6\u7fa4\u540d\u79f0\u3002\nkubectl get pods -l app.kubernetes.io/cluster=&lt;cluster-name&gt;\n\n# \u8fdb\u5165 Pod \u4e2d\u7684\u5bb9\u5668\uff0c\u4f8b\u5982\u8fdb\u5165 nebula-graphd-0 \u5bb9\u5668\u3002\nkubectl exec -it nebula-graphd-0 -- /bin/bash\n\n# \u8fdb\u5165 /usr/local/nebula/logs \u76ee\u5f55\uff0c\u67e5\u770b\u65e5\u5fd7\u6587\u4ef6\u3002\ncd /usr/local/nebula/logs\n</code></pre>"},{"location":"k8s-operator/5.FAQ/#host_not_foundnebula-metadstoragedgraphd-0nebulametadstoragedgraphd-headlessdefaultsvcclusterlocal","title":"<code>host not found:nebula-&lt;metad|storaged|graphd&gt;-0.nebula.&lt;metad|storaged|graphd&gt;-headless.default.svc.cluster.local</code>\u9519\u8bef\u5982\u4f55\u89e3\u51b3\uff1f","text":"<p>\u8fd9\u4e2a\u9519\u8bef\u4e00\u822c\u662f\u7531\u4e8e DNS \u89e3\u6790\u5931\u8d25\u5bfc\u81f4\u7684\uff0c\u9700\u68c0\u67e5\u662f\u5426\u4fee\u6539\u4e86\u96c6\u7fa4\u57df\u540d\u3002\u5982\u679c\u4fee\u6539\u4e86\u96c6\u7fa4\u57df\u540d\uff0c\u9700\u8981\u540c\u6b65\u4fee\u6539 Operator \u914d\u7f6e\u6587\u4ef6\u4e2d\u7684<code>kubernetesClusterDomain</code>\u5b57\u6bb5\u3002\u540c\u6b65\u4fee\u6539 Operator \u914d\u7f6e\u6587\u4ef6\u7684\u64cd\u4f5c\u5982\u4e0b\uff1a</p> <ol> <li> <p>\u67e5\u770b Operator \u914d\u7f6e\u6587\u4ef6\u3002</p> <pre><code>[abby@master ~]$ helm show values nebula-operator/nebula-operator   \nimage:\n  nebulaOperator:\n    image: vesoft/nebula-operator:v1.7.5\n    imagePullPolicy: Always\n  kubeRBACProxy:\n    image: bitnami/kube-rbac-proxy:0.14.2\n    imagePullPolicy: Always\n  kubeScheduler:\n    image: registry.k8s.io/kube-scheduler:v1.24.11\n    imagePullPolicy: Always\n\nimagePullSecrets: []\nkubernetesClusterDomain: \"\"  # \u96c6\u7fa4\u57df\u540d\uff0c\u9ed8\u8ba4\u4e3a cluster.local\u3002\n</code></pre> </li> <li> <p>\u4fee\u6539<code>kubernetesClusterDomain</code>\u5b57\u6bb5\u7684\u503c\u4e3a\u96c6\u7fa4\u57df\u540d\u3002</p> <p><pre><code>helm upgrade nebula-operator nebula-operator/nebula-operator --namespace=&lt;nebula-operator-system&gt; --version=1.7.5 --set kubernetesClusterDomain=&lt;cluster-domain&gt;\n</code></pre> \u4e3a Operator \u6240\u5728\u7684\u547d\u540d\u7a7a\u95f4\uff0c\u4e3a\u66f4\u65b0\u540e\u7684\u96c6\u7fa4\u57df\u540d\u3002"},{"location":"k8s-operator/2.get-started/2.1.install-operator/","title":"\u5b89\u88c5 NebulaGraph Operator","text":"<p>\u7528\u6237\u53ef\u4f7f\u7528 Helm \u5de5\u5177\u90e8\u7f72 NebulaGraph Operator\u3002</p>"},{"location":"k8s-operator/2.get-started/2.1.install-operator/#_1","title":"\u80cc\u666f\u4fe1\u606f","text":"<p>NebulaGraph Operator \u4e3a\u7528\u6237\u7ba1\u7406 NebulaGraph \u96c6\u7fa4\uff0c\u4f7f\u7528\u6237\u65e0\u9700\u5728\u751f\u4ea7\u73af\u5883\u4e2d\u624b\u52a8\u5b89\u88c5\u3001\u6269\u5c55\u3001\u5347\u7ea7\u548c\u5378\u8f7d NebulaGraph\uff0c\u51cf\u8f7b\u7528\u6237\u7ba1\u7406\u4e0d\u540c\u5e94\u7528\u7248\u672c\u7684\u8d1f\u62c5\u3002</p>"},{"location":"k8s-operator/2.get-started/2.1.install-operator/#_2","title":"\u524d\u63d0\u6761\u4ef6","text":"<p>\u5b89\u88c5 NebulaGraph Operator \u524d\uff0c\u7528\u6237\u9700\u8981\u5b89\u88c5\u4ee5\u4e0b\u8f6f\u4ef6\u5e76\u786e\u4fdd\u5b89\u88c5\u7248\u672c\u7684\u6b63\u786e\u6027\u3002</p> \u8f6f\u4ef6 \u7248\u672c\u8981\u6c42 Kubernetes &gt;= 1.18 Helm &gt;= 3.2.0 CoreDNS &gt;= 1.6.0 <p>Note</p> <ul> <li>\u5982\u679c\u4f7f\u7528\u57fa\u4e8e\u89d2\u8272\u7684\u8bbf\u95ee\u63a7\u5236\u7684\u7b56\u7565\uff0c\u7528\u6237\u9700\u5f00\u542f RBAC\uff08\u53ef\u9009\uff09\u3002</li> <li>CoreDNS \u662f\u4e00\u4e2a\u7075\u6d3b\u7684\u3001\u53ef\u6269\u5c55\u7684 DNS \u670d\u52a1\u5668\uff0c\u88ab\u5b89\u88c5\u5728\u96c6\u7fa4\u5185\u4f5c\u4e3a\u96c6\u7fa4\u5185 Pods \u7684 DNS \u670d\u52a1\u5668\u3002 NebulaGraph \u96c6\u7fa4\u4e2d\u7684\u6bcf\u4e2a\u7ec4\u4ef6\u901a\u8fc7 DNS \u89e3\u6790\u7c7b\u4f3c<code>x.default.svc.cluster.local</code>\u8fd9\u6837\u7684\u57df\u540d\u76f8\u4e92\u901a\u4fe1\u3002</li> </ul>"},{"location":"k8s-operator/2.get-started/2.1.install-operator/#_3","title":"\u64cd\u4f5c\u6b65\u9aa4","text":"<ol> <li> <p>\u6dfb\u52a0 NebulaGraph Operator Helm \u4ed3\u5e93\u3002</p> <pre><code>helm repo add nebula-operator https://vesoft-inc.github.io/nebula-operator/charts\n</code></pre> </li> <li> <p>\u62c9\u53d6\u6700\u65b0\u7684 Operator Helm \u4ed3\u5e93\u3002</p> <pre><code>helm repo update\n</code></pre> <p>\u53c2\u8003 Helm \u4ed3\u5e93\u83b7\u53d6\u66f4\u591a<code>helm repo</code>\u76f8\u5173\u4fe1\u606f\u3002</p> </li> <li> <p>\u521b\u5efa\u547d\u540d\u7a7a\u95f4\u7528\u4e8e\u5b89\u88c5 NebulaGraph Operator\u3002</p> <pre><code>kubectl create namespace &lt;namespace_name&gt;\n</code></pre> <p>\u4f8b\u5982\uff0c\u521b\u5efa<code>nebula-operator-system</code>\u547d\u540d\u7a7a\u95f4\u3002</p> <p><pre><code>kubectl create namespace nebula-operator-system\n</code></pre> nebula-operator chart \u4e2d\u7684\u6240\u6709\u8d44\u6e90\u90fd\u4f1a\u5b89\u88c5\u5728\u8be5\u547d\u540d\u7a7a\u95f4\u4e0b\u3002</p> </li> <li> <p>\u5b89\u88c5 NebulaGraph Operator\u3002</p> <pre><code>helm install nebula-operator nebula-operator/nebula-operator --namespace=&lt;namespace_name&gt; --version=${chart_version}\n</code></pre> <p>\u4f8b\u5982\uff0c\u5b89\u88c51.7.5\u7248\u7684 Operator \u547d\u4ee4\u5982\u4e0b\u3002</p> <pre><code>helm install nebula-operator nebula-operator/nebula-operator --namespace=nebula-operator-system --version=1.7.5\n</code></pre> <p><code>1.7.5</code>\u4e3a nebula-operator chart \u7684\u7248\u672c\uff0c\u4e0d\u6307\u5b9a<code>--version</code>\u65f6\u9ed8\u8ba4\u4f7f\u7528\u6700\u65b0\u7248\u7684 chart\u3002</p> <p>\u6267\u884c<code>helm search repo -l nebula-operator</code>\u67e5\u770b chart \u7248\u672c\u3002</p> <p>\u60a8\u53ef\u5728\u6267\u884c\u5b89\u88c5 NebulaGraph Operator chart \u547d\u4ee4\u65f6\u81ea\u5b9a\u4e49 Operator \u7684\u914d\u7f6e\u3002\u66f4\u591a\u4fe1\u606f\uff0c\u67e5\u770b\u81ea\u5b9a\u4e49 Operator \u914d\u7f6e\u3002</p> </li> <li> <p>\u67e5\u770b\u9ed8\u8ba4\u521b\u5efa\u7684 CRD \u4fe1\u606f\u3002</p> <pre><code>kubectl get crd\n</code></pre> <p>\u8fd4\u56de\u793a\u4f8b\uff1a</p> <pre><code>NAME                                                 CREATED AT\nnebulaautoscalers.autoscaling.nebula-graph.io        2023-11-01T04:16:51Z\nnebulaclusters.apps.nebula-graph.io                  2023-10-12T07:55:32Z\nnebularestores.apps.nebula-graph.io                  2023-02-04T23:01:00Z\n</code></pre> </li> </ol>"},{"location":"k8s-operator/2.get-started/2.1.install-operator/#_4","title":"\u540e\u7eed\u64cd\u4f5c","text":"<p>\u521b\u5efa\u96c6\u7fa4</p>"},{"location":"k8s-operator/2.get-started/2.3.create-cluster/","title":"\u5feb\u901f\u521b\u5efa\u96c6\u7fa4","text":"<p>\u672c\u6587\u5c06\u4ecb\u7ecd\u521b\u5efa NebulaGraph \u96c6\u7fa4\u7684\u4e24\u79cd\u65b9\u5f0f\uff1a</p> <ul> <li>\u4f7f\u7528 Helm \u521b\u5efa NebulaGraph \u96c6\u7fa4</li> <li>\u4f7f\u7528 Kubectl \u521b\u5efa NebulaGraph \u96c6\u7fa4</li> </ul>"},{"location":"k8s-operator/2.get-started/2.3.create-cluster/#_2","title":"\u524d\u63d0\u6761\u4ef6","text":"<ul> <li>\u5b89\u88c5 NebulaGraph Operator</li> </ul> <ul> <li>\u5df2\u521b\u5efa StorageClass</li> </ul>"},{"location":"k8s-operator/2.get-started/2.3.create-cluster/#helm_nebulagraph","title":"\u4f7f\u7528 Helm \u521b\u5efa NebulaGraph \u96c6\u7fa4","text":"<p>\u5386\u53f2\u7248\u672c\u517c\u5bb9\u6027</p> <p>1.x \u7248\u672c\u7684 NebulaGraph Operator \u4e0d\u517c\u5bb9 3.x \u4ee5\u4e0b\u7248\u672c\u7684 NebulaGraph \u3002</p> <ol> <li> <p>\u6dfb\u52a0 NebulaGraph Operator Helm \u4ed3\u5e93\u3002</p> <pre><code>helm repo add nebula-operator https://vesoft-inc.github.io/nebula-operator/charts\n</code></pre> </li> <li> <p>\u66f4\u65b0 Helm \u4ed3\u5e93\uff0c\u62c9\u53d6\u6700\u65b0\u4ed3\u5e93\u8d44\u6e90\u3002</p> <pre><code>helm repo update\n</code></pre> </li> <li> <p>\u4e3a\u5b89\u88c5\u96c6\u7fa4\u6240\u9700\u7684\u914d\u7f6e\u53c2\u6570\u8bbe\u7f6e\u73af\u5883\u53d8\u91cf\u3002</p> <pre><code>export NEBULA_CLUSTER_NAME=nebula         # NebulaGraph \u96c6\u7fa4\u7684\u540d\u5b57\u3002\nexport NEBULA_CLUSTER_NAMESPACE=nebula    # NebulaGraph \u96c6\u7fa4\u6240\u5904\u7684\u547d\u540d\u7a7a\u95f4\u7684\u540d\u5b57\u3002\nexport STORAGE_CLASS_NAME=fast-disks             # NebulaGraph \u96c6\u7fa4\u7684 StorageClass\u3002\n</code></pre> </li> <li> <p>\u4e3a NebulaGraph \u96c6\u7fa4\u521b\u5efa\u547d\u540d\u7a7a\u95f4\uff08\u5982\u5df2\u521b\u5efa\uff0c\u7565\u8fc7\u6b64\u6b65\uff09\u3002</p> <pre><code>kubectl create namespace \"${NEBULA_CLUSTER_NAMESPACE}\"\n</code></pre> </li> <li> <p>\u521b\u5efa NebulaGraph \u96c6\u7fa4\u3002</p> <pre><code>helm install \"${NEBULA_CLUSTER_NAME}\" nebula-operator/nebula-cluster \\\n    --set nameOverride=\"${NEBULA_CLUSTER_NAME}\" \\\n    --set nebula.storageClassName=\"${STORAGE_CLASS_NAME}\" \\\n    # \u6307\u5b9a NebulaGraph \u96c6\u7fa4\u7684\u7248\u672c\u3002\n    --set nebula.version=vmaster \\\n    # \u6307\u5b9a\u96c6\u7fa4 chart \u7684\u7248\u672c\uff0c\u4e0d\u6307\u5b9a\u5219\u9ed8\u8ba4\u5b89\u88c5\u6700\u65b0\u7248\u672c chart\u3002\n    # \u6267\u884c helm search repo - l nebula-operator/nebula-cluster \u547d\u4ee4\u53ef\u67e5\u770b\u6240\u6709 chart \u7248\u672c\u3002\n    --version=1.7.5 \\\n    --namespace=\"${NEBULA_CLUSTER_NAMESPACE}\" \\      \n</code></pre> </li> </ol>"},{"location":"k8s-operator/2.get-started/2.3.create-cluster/#kubectl_nebulagraph","title":"\u4f7f\u7528 Kubectl \u521b\u5efa NebulaGraph \u96c6\u7fa4","text":"<p>\u5386\u53f2\u7248\u672c\u517c\u5bb9\u6027</p> <p>1.x \u7248\u672c\u7684 NebulaGraph Operator \u4e0d\u517c\u5bb9 3.x \u4ee5\u4e0b\u7248\u672c\u7684 NebulaGraph \u3002</p> <p>\u4e0b\u9762\u4ee5\u521b\u5efa\u540d\u4e3a<code>nebula</code>\u7684\u96c6\u7fa4\u4e3a\u4f8b\uff0c\u8bf4\u660e\u5982\u4f55\u90e8\u7f72 NebulaGraph \u96c6\u7fa4\u3002</p> <ol> <li> <p>\u521b\u5efa\u547d\u540d\u7a7a\u95f4\uff0c\u4f8b\u5982<code>nebula</code>\u3002\u5982\u679c\u4e0d\u6307\u5b9a\u547d\u540d\u7a7a\u95f4\uff0c\u9ed8\u8ba4\u4f7f\u7528<code>default</code>\u547d\u540d\u7a7a\u95f4\u3002</p> <pre><code>kubectl create namespace nebula\n</code></pre> </li> <li> <p>\u521b\u5efa\u96c6\u7fa4\u914d\u7f6e\u6587\u4ef6\uff0c\u4f8b\u5982<code>nebulacluster.yaml</code>\u3002</p> \u5c55\u5f00\u67e5\u770b\u96c6\u7fa4\u7684\u793a\u4f8b\u914d\u7f6e <pre><code>apiVersion: apps.nebula-graph.io/v1alpha1\nkind: NebulaCluster\nmetadata:\n  name: nebula\n  namespace: default\nspec:\n  topologySpreadConstraints:\n  - topologyKey: \"kubernetes.io/hostname\"\n    whenUnsatisfiable: \"ScheduleAnyway\"\n  graphd:\n    # Graph \u670d\u52a1\u7684\u5bb9\u5668\u955c\u50cf\u3002\n    image: vesoft/nebula-graphd\n    logVolumeClaim:\n      resources:\n        requests:\n          storage: 2Gi\n      # \u7528\u4e8e\u5b58\u50a8 Graph \u670d\u52a1\u7684\u65e5\u5fd7\u7684\u5b58\u50a8\u7c7b\u540d\u79f0\u3002\n      storageClassName: local-sc\n    replicas: 1\n    resources:\n      limits:\n        cpu: \"1\"\n        memory: 1Gi\n      requests:\n        cpu: 500m\n        memory: 500Mi\n    version: vmaster\n  imagePullPolicy: Always\n  metad:\n    # Meta \u670d\u52a1\u7684\u5bb9\u5668\u955c\u50cf\u3002\n    image: vesoft/nebula-metad\n    logVolumeClaim:\n      resources:\n        requests:\n          storage: 2Gi\n      storageClassName: local-sc\n    dataVolumeClaim:\n      resources:\n        requests:\n          storage: 2Gi\n      storageClassName: local-sc\n    replicas: 1\n    resources:\n      limits:\n        cpu: \"1\"\n        memory: 1Gi\n      requests:\n        cpu: 500m\n        memory: 500Mi\n    version: vmaster\n  reference:\n    name: statefulsets.apps\n    version: v1\n  schedulerName: default-scheduler\n  storaged:\n    # Storage \u670d\u52a1\u7684\u5bb9\u5668\u955c\u50cf\u3002\n    image: vesoft/nebula-storaged\n    logVolumeClaim:\n      resources:\n        requests:\n          storage: 2Gi\n      storageClassName: local-sc\n    dataVolumeClaims:\n    - resources:\n        requests:\n          storage: 2Gi\n      storageClassName: local-sc\n    replicas: 1\n    resources:\n      limits:\n        cpu: \"1\"\n        memory: 1Gi\n      requests:\n        cpu: 500m\n        memory: 500Mi\n    version: vmaster\n</code></pre> <p>\u5173\u4e8e\u5176\u5b83\u53c2\u6570\u7684\u8be6\u60c5\uff0c\u8bf7\u53c2\u8003\u521b\u5efa NebulaGraph \u96c6\u7fa4\u3002</p> </li> <li> <p>\u521b\u5efa NebulaGraph \u96c6\u7fa4\u3002</p> <pre><code>kubectl create -f nebulacluster.yaml\n</code></pre> <p>\u8fd4\u56de\uff1a</p> <pre><code>nebulacluster.apps.nebula-graph.io/nebula created\n</code></pre> </li> <li> <p>\u67e5\u770b NebulaGraph \u96c6\u7fa4\u72b6\u6001\u3002</p> <pre><code>kubectl get nc nebula\n</code></pre> <p>\u8fd4\u56de\uff1a</p> <pre><code>NAME     READY     GRAPHD-DESIRED   GRAPHD-READY   METAD-DESIRED   METAD-READY   STORAGED-DESIRED   STORAGED-READY   AGE\nnebula    True      1                1              1               1             1                  1                86s\n</code></pre> </li> </ol>"},{"location":"k8s-operator/2.get-started/2.3.create-cluster/#_3","title":"\u540e\u7eed\u64cd\u4f5c","text":"<p>\u8fde\u63a5\u96c6\u7fa4</p>"},{"location":"k8s-operator/2.get-started/2.4.connect-to-cluster/","title":"\u8fde\u63a5 NebulaGraph \u96c6\u7fa4","text":"<p>\u4f7f\u7528 NebulaGraph Operator \u521b\u5efa NebulaGraph \u96c6\u7fa4\u540e\uff0c\u7528\u6237\u53ef\u5728 NebulaGraph \u96c6\u7fa4\u5185\u90e8\u8bbf\u95ee NebulaGraph\uff0c\u4e5f\u53ef\u5728\u96c6\u7fa4\u5916\u8bbf\u95ee NebulaGraph \u3002\u5982\u679c\u7528\u6237\u5728\u96c6\u7fa4\u5185\u90e8\uff0c\u53ef\u4ee5\u901a\u8fc7\u8bbf\u95ee\u96c6\u7fa4\u5185\u7684\u865a\u62df IP \u5730\u5740\uff08ClusterIP\uff09\u8bbf\u95ee\u6570\u636e\u5e93\u3002\u800c\u5982\u679c\u7528\u6237\u5728\u96c6\u7fa4\u5916\u90e8\uff0c\u5219\u9700\u8981\u4f7f\u7528\u96c6\u7fa4\u8282\u70b9\u7684\u516c\u5171 IP \u5730\u5740\u6216\u8005\u901a\u8fc7\u90e8\u7f72 Nginx Ingress \u63a7\u5236\u5668\u6765\u8bbf\u95ee NebulaGraph \u3002IP \u5730\u5740\u7c7b\u578b\u53ef\u4ee5\u5728\u521b\u5efa\u96c6\u7fa4\u7684\u914d\u7f6e\u6587\u4ef6\u4e2d\uff0c\u901a\u8fc7<code>spec.graphd.service</code>\u6307\u5b9a\u3002\u5173\u4e8e Service \u7684\u66f4\u591a\u4fe1\u606f\uff0c\u53c2\u8003 Service\u3002</p>"},{"location":"k8s-operator/2.get-started/2.4.connect-to-cluster/#_1","title":"\u524d\u63d0\u6761\u4ef6","text":"<p>\u5df2\u4f7f\u7528 NebulaGraph Operator \u521b\u5efa NebulaGraph \u96c6\u7fa4\u3002\u5177\u4f53\u6b65\u9aa4\u53c2\u8003\u5feb\u901f\u521b\u5efa\u96c6\u7fa4\u3002</p>"},{"location":"k8s-operator/2.get-started/2.4.connect-to-cluster/#nebulagraph_nebulagraph","title":"\u5728 NebulaGraph \u96c6\u7fa4\u5185\u8fde\u63a5 NebulaGraph","text":"<p>\u7528\u6237\u53ef\u4ee5\u521b\u5efa<code>ClusterIP</code>\u7c7b\u578b\u7684 Service\uff0c\u4e3a\u96c6\u7fa4\u5185\u7684\u5176\u4ed6 Pod \u63d0\u4f9b\u8bbf\u95ee NebulaGraph \u7684\u5165\u53e3\u3002\u901a\u8fc7\u8be5 Service \u7684 IP \u548c\u6570\u636e\u5e93 Graph \u670d\u52a1\u7684\u7aef\u53e3\u53f7\uff08<code>9669</code>\uff09\uff0c\u53ef\u8fde\u63a5 NebulaGraph \u3002\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u8003 ClusterIP\u3002</p> <ol> <li> <p>\u521b\u5efa\u540d\u4e3a<code>graphd-clusterip-service.yaml</code>\u7684\u6587\u4ef6\u3002\u793a\u4f8b\u5185\u5bb9\u5982\u4e0b\uff1a</p> <pre><code>apiVersion: v1\nkind: Service\nmetadata:\n  labels:\n    app.kubernetes.io/cluster: nebula\n    app.kubernetes.io/component: graphd\n    app.kubernetes.io/managed-by: nebula-operator\n    app.kubernetes.io/name: nebula-graph\n  name: nebula-graphd-svc\n  namespace: default\nspec:\n  ports:\n  - name: thrift\n    port: 9669\n    protocol: TCP\n    targetPort: 9669\n  - name: http\n    port: 19669\n    protocol: TCP\n    targetPort: 19669\n  selector:\n    app.kubernetes.io/cluster: nebula\n    app.kubernetes.io/component: graphd\n    app.kubernetes.io/managed-by: nebula-operator\n    app.kubernetes.io/name: nebula-graph\n  type: ClusterIP  # \u8bbe\u7f6e Service \u7c7b\u578b\u4e3a ClusterIP\u3002\n</code></pre> <ul> <li>NebulaGraph \u9ed8\u8ba4\u4f7f\u7528<code>9669</code>\u7aef\u53e3\u4e3a\u5ba2\u6237\u7aef\u63d0\u4f9b\u670d\u52a1\u3002<code>19669</code>\u4e3a Graph \u670d\u52a1\u7684 HTTP \u7aef\u53e3\u53f7\u3002</li> <li><code>targetPort</code>\u7684\u503c\u4e3a\u6620\u5c04\u81f3 Pod \u7684\u7aef\u53e3\uff0c\u53ef\u81ea\u5b9a\u4e49\u3002</li> </ul> </li> <li> <p>\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\u4f7f Service \u670d\u52a1\u5728\u96c6\u7fa4\u4e2d\u751f\u6548\u3002</p> <pre><code>kubectl create -f graphd-clusterip-service.yaml   \n</code></pre> </li> <li> <p>\u67e5\u770b Service\uff0c\u547d\u4ee4\u5982\u4e0b\uff1a</p> <pre><code>$ kubectl get service -l app.kubernetes.io/cluster=&lt;nebula&gt;  #&lt;nebula&gt;\u4e3a\u53d8\u91cf\u503c\uff0c\u8bf7\u7528\u5b9e\u9645\u96c6\u7fa4\u540d\u79f0\u66ff\u6362\u3002\nNAME                       TYPE        CLUSTER-IP     EXTERNAL-IP   PORT(S)                                          AGE\nnebula-graphd-svc          ClusterIP   10.98.213.34   &lt;none&gt;        9669/TCP,19669/TCP,19670/TCP                     23h\n...\n</code></pre> </li> <li> <p>\u4f7f\u7528\u4e0a\u8ff0<code>&lt;cluster-name&gt;-graphd-svc</code> Service \u7684 IP \u8fde\u63a5 NebulaGraph \uff1a</p> <pre><code>kubectl run -ti --image vesoft/nebula-console:v3.6.0 --restart=Never -- &lt;nebula_console_name&gt; -addr &lt;cluster_ip&gt;  -port &lt;service_port&gt; -u &lt;username&gt; -p &lt;password&gt;\n</code></pre> <p>\u793a\u4f8b\uff1a</p> <pre><code>kubectl run -ti --image vesoft/nebula-console:v3.6.0 --restart=Never -- nebula-console -addr 10.98.213.34  -port 9669 -u root -p vesoft\n</code></pre> <ul> <li><code>--image</code>\uff1a\u4e3a\u8fde\u63a5 NebulaGraph \u7684\u5de5\u5177 NebulaGraph Console \u7684\u955c\u50cf\u3002</li> <li><code>&lt;nebula-console&gt;</code>\uff1a\u81ea\u5b9a\u4e49\u7684 Pod \u540d\u79f0\u3002</li> <li><code>-addr</code>\uff1a\u8fde\u63a5 Graphd \u670d\u52a1\u7684 IP \u5730\u5740\uff0c\u5373<code>ClusterIP</code>\u7c7b\u578b\u7684 Service IP \u5730\u5740\u3002</li> <li><code>-port</code>\uff1a\u8fde\u63a5 Graphd \u670d\u52a1\u7684\u7aef\u53e3\u3002\u9ed8\u8ba4\u7aef\u53e3\u4e3a<code>9669</code>\u3002</li> <li><code>-u</code>\uff1a NebulaGraph \u8d26\u53f7\u7684\u7528\u6237\u540d\u3002\u672a\u542f\u7528\u8eab\u4efd\u8ba4\u8bc1\u65f6\uff0c\u53ef\u4ee5\u4f7f\u7528\u4efb\u610f\u5df2\u5b58\u5728\u7684\u7528\u6237\u540d\uff08\u9ed8\u8ba4\u4e3a<code>root</code>\uff09\u3002</li> <li><code>-p</code>\uff1a\u7528\u6237\u540d\u5bf9\u5e94\u7684\u5bc6\u7801\u3002\u672a\u542f\u7528\u8eab\u4efd\u8ba4\u8bc1\u65f6\uff0c\u5bc6\u7801\u53ef\u4ee5\u586b\u5199\u4efb\u610f\u5b57\u7b26\u3002</li> </ul> <p>\u5982\u679c\u8fd4\u56de\u4ee5\u4e0b\u5185\u5bb9\uff0c\u8bf4\u660e\u6210\u529f\u8fde\u63a5\u6570\u636e\u5e93\uff1a</p> <pre><code>If you don't see a command prompt, try pressing enter.\n\n(root@nebula) [(none)]&gt;\n</code></pre> </li> </ol> <p>\u7528\u6237\u8fd8\u53ef\u4ee5\u4f7f\u7528\u5b8c\u5168\u9650\u5b9a\u57df\u540d\uff08FQDN\uff09\u8fde\u63a5\u6570\u636e\u5e93\uff0c\u57df\u540d\u683c\u5f0f\u4e3a<code>&lt;cluster-name&gt;-graphd.&lt;cluster-namespace&gt;.svc.&lt;CLUSTER_DOMAIN&gt;</code>\uff0c<code>CLUSTER_DOMAIN</code>\u7684\u9ed8\u8ba4\u503c\u4e3a<code>cluster.local</code>\u3002</p> <pre><code>kubectl run -ti --image vesoft/nebula-console:v3.6.0 --restart=Never -- &lt;nebula_console_name&gt; -addr &lt;cluster_name&gt;-graphd-svc.default.svc.cluster.local -port &lt;service_port&gt; -u &lt;username&gt; -p &lt;password&gt;\n</code></pre> <ul> <li> <p><code>&lt;service_port&gt;</code>\u4e3a Graph \u670d\u52a1\u9ed8\u8ba4\u7684\u7aef\u53e3<code>9669</code>\u3002</p> <p>Note</p> <p>\u5982\u679c\u5728\u96c6\u7fa4\u914d\u7f6e\u6587\u4ef6\u4e2d\u8bbe\u7f6e\u4e86<code>spec.console</code>\u5b57\u6bb5\uff0c\u60a8\u8fd8\u53ef\u4ee5\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\u8fde\u63a5\u5230 NebulaGraph \u6570\u636e\u5e93\uff1a</p> <pre><code># \u8fdb\u5165 nebula-console Pod\u3002\nkubectl exec -it nebula-console -- /bin/sh\n\n# \u8fde\u63a5\u5230\u6570\u636e\u5e93\u3002\nnebula-console -addr nebula-graphd-svc.default.svc.cluster.local -port 9669 -u &lt;username&gt; -p &lt;password&gt;\n</code></pre> <p>\u6709\u5173<code>nebula-console</code>\u5bb9\u5668\u7684\u914d\u7f6e\uff0c\u8bf7\u53c2\u89c1 nebula-console\u3002</p> </li> </ul>"},{"location":"k8s-operator/2.get-started/2.4.connect-to-cluster/#nodeport_nebulagraph_nebulagraph","title":"\u901a\u8fc7<code>NodePort</code>\u5728 NebulaGraph \u96c6\u7fa4\u5916\u90e8\u8fde\u63a5 NebulaGraph","text":"<p>\u7528\u6237\u53ef\u521b\u5efa<code>NodePort</code>\u7c7b\u578b\u7684 Service\uff0c\u901a\u8fc7\u96c6\u7fa4\u4efb\u4e00\u8282\u70b9 IP \u548c\u66b4\u9732\u7684\u8282\u70b9\u7aef\u53e3\uff0c\u4ece\u96c6\u7fa4\u5916\u90e8\u8bbf\u95ee\u96c6\u7fa4\u5185\u90e8\u7684\u670d\u52a1\u3002\u7528\u6237\u4e5f\u53ef\u4ee5\u4f7f\u7528\u4e91\u5382\u5546\uff08\u4f8b\u5982 Azure\u3001AWS \u7b49\uff09\u63d0\u4f9b\u7684\u8d1f\u8f7d\u5747\u8861\u670d\u52a1\uff0c\u8bbe\u7f6e Service \u7684\u7c7b\u578b\u4e3a<code>LoadBalancer</code>\uff0c\u901a\u8fc7\u4e91\u5382\u5546\u63d0\u4f9b\u7684\u8d1f\u8f7d\u5747\u8861\u5668\u7684\u516c\u7f51 IP \u548c\u7aef\u53e3\uff0c\u4ece\u96c6\u7fa4\u5916\u90e8\u8bbf\u95ee\u96c6\u7fa4\u5185\u90e8\u7684\u670d\u52a1\u3002</p> <p><code>NodePort</code>\u7c7b\u578b\u7684 Service \u901a\u8fc7\u6807\u7b7e\u9009\u62e9\u5668<code>spec.selector</code>\u5c06\u524d\u7aef\u7684\u8bf7\u6c42\u8f6c\u53d1\u5230\u5e26\u6709\u6807\u7b7e<code>app.kubernetes.io/cluster: &lt;cluster-name&gt;</code>\u3001<code>app.kubernetes.io/component: graphd</code>\u7684 Graphd pod \u4e2d\u3002</p> <p>\u5f53\u6839\u636e\u96c6\u7fa4\u793a\u4f8b\u6a21\u677f\uff0c\u5176\u4e2d<code>spec.graphd.service.type=NodePort</code>\uff0c\u521b\u5efa NebulaGraph \u96c6\u7fa4\u540e\uff0cNebulaGraph Operator \u4f1a\u81ea\u52a8\u5728\u540c\u4e00\u547d\u540d\u7a7a\u95f4\u4e0b\uff0c\u521b\u5efa\u540d\u4e3a<code>&lt;cluster-name&gt;-graphd-svc</code>\u3001\u7c7b\u578b\u4e3a<code>NodePort</code>\u7684 Service\u3002\u901a\u8fc7\u4efb\u4e00\u8282\u70b9 IP \u548c\u66b4\u9732\u7684\u8282\u70b9\u7aef\u53e3\uff0c\u53ef\u76f4\u63a5\u8fde\u63a5 NebulaGraph \u6570\u636e\u5e93\uff08\u53c2\u89c1\u4e0b\u6587\u7b2c 4 \u6b65\uff09\u3002\u7528\u6237\u4e5f\u53ef\u4ee5\u6839\u636e\u81ea\u5df1\u7684\u9700\u6c42\uff0c\u521b\u5efa\u81ea\u5b9a\u4e49\u7684 Service\u3002</p> <p>\u64cd\u4f5c\u6b65\u9aa4\u5982\u4e0b\uff1a</p> <ol> <li> <p>\u521b\u5efa\u540d\u4e3a<code>graphd-nodeport-service.yaml</code>\u7684\u6587\u4ef6\u3002\u793a\u4f8b\u5185\u5bb9\u5982\u4e0b\uff1a</p> <pre><code>apiVersion: v1\nkind: Service\nmetadata:\n  labels:\n    app.kubernetes.io/cluster: nebula\n    app.kubernetes.io/component: graphd\n    app.kubernetes.io/managed-by: nebula-operator\n    app.kubernetes.io/name: nebula-graph\n  name: nebula-graphd-svc-nodeport\n  namespace: default\nspec:\n  externalTrafficPolicy: Local\n  ports:\n  - name: thrift\n    port: 9669\n    protocol: TCP\n    targetPort: 9669\n  - name: http\n    port: 19669\n    protocol: TCP\n    targetPort: 19669\n  selector:\n    app.kubernetes.io/cluster: nebula\n    app.kubernetes.io/component: graphd\n    app.kubernetes.io/managed-by: nebula-operator\n    app.kubernetes.io/name: nebula-graph\n  type: NodePort  # \u8bbe\u7f6e Service \u7c7b\u578b\u4e3a NodePort\u3002\n</code></pre> <ul> <li>NebulaGraph \u9ed8\u8ba4\u4f7f\u7528<code>9669</code>\u7aef\u53e3\u4e3a\u5ba2\u6237\u7aef\u63d0\u4f9b\u670d\u52a1\u3002<code>19669</code>\u4e3a Graph \u670d\u52a1\u7684 HTTP \u7aef\u53e3\u53f7\u3002</li> <li><code>targetPort</code>\u7684\u503c\u4e3a\u6620\u5c04\u81f3 Pod \u7684\u7aef\u53e3\uff0c\u53ef\u81ea\u5b9a\u4e49\u3002</li> </ul> </li> <li> <p>\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\u4f7f Service \u670d\u52a1\u5728\u96c6\u7fa4\u4e2d\u751f\u6548\u3002</p> <pre><code>kubectl create -f graphd-nodeport-service.yaml\n</code></pre> </li> <li> <p>\u67e5\u770b Service \u4e2d NebulaGraph \u6620\u5c04\u81f3\u96c6\u7fa4\u8282\u70b9\u7684\u7aef\u53e3\u3002</p> <pre><code>kubectl get services -l app.kubernetes.io/cluster=&lt;nebula&gt;  #&lt;nebula&gt;\u4e3a\u53d8\u91cf\u503c\uff0c\u8bf7\u7528\u5b9e\u9645\u96c6\u7fa4\u540d\u79f0\u66ff\u6362\u3002\n</code></pre> <p>\u8fd4\u56de\uff1a</p> <pre><code>NAME                           TYPE        CLUSTER-IP     EXTERNAL-IP   PORT(S)                                          AGE\nnebula-graphd-svc-nodeport     NodePort    10.107.153.129 &lt;none&gt;        9669:32236/TCP,19669:31674/TCP,19670:31057/TCP   24h\n...\n</code></pre> <p><code>NodePort</code>\u7c7b\u578b\u7684 Service \u4e2d\uff0c\u6620\u5c04\u81f3\u96c6\u7fa4\u8282\u70b9\u7684\u7aef\u53e3\u4e3a<code>32236</code>\u3002</p> </li> <li> <p>\u4f7f\u7528\u8282\u70b9 IP \u548c\u4e0a\u8ff0\u6620\u5c04\u7684\u8282\u70b9\u7aef\u53e3\u8fde\u63a5 NebulaGraph \u3002</p> <pre><code>kubectl run -ti --image vesoft/nebula-console:v3.6.0 --restart=Never -- &lt;nebula_console_name&gt; -addr &lt;node_ip&gt; -port &lt;node_port&gt; -u &lt;username&gt; -p &lt;password&gt;\n</code></pre> <p>\u793a\u4f8b\u5982\u4e0b\uff1a</p> <pre><code>kubectl run -ti --image vesoft/nebula-console:v3.6.0 --restart=Never -- nebula-console -addr 192.168.8.24 -port 32236 -u root -p vesoft\nIf you don't see a command prompt, try pressing enter.\n\n(root@nebula) [(none)]&gt;\n</code></pre> <ul> <li><code>--image</code>\uff1a\u4e3a\u8fde\u63a5 NebulaGraph \u7684\u5de5\u5177 Console \u7684\u955c\u50cf\u3002</li> <li><code>&lt;nebula-console&gt;</code>\uff1a\u81ea\u5b9a\u4e49\u7684 Pod \u540d\u79f0\u3002\u672c\u793a\u4f8b\u4e3a<code>nebula-console</code>\u3002</li> <li><code>-addr</code>\uff1a NebulaGraph \u96c6\u7fa4\u4e2d\u4efb\u4e00\u8282\u70b9 IP \u5730\u5740\u3002\u672c\u793a\u4f8b\u4e3a<code>192.168.8.24</code>\u3002</li> <li><code>-port</code>\uff1a NebulaGraph \u6620\u5c04\u81f3\u8282\u70b9\u7684\u7aef\u53e3\u3002\u672c\u793a\u4f8b\u4e3a<code>32236</code>\u3002</li> <li><code>-u</code>\uff1a NebulaGraph \u8d26\u53f7\u7684\u7528\u6237\u540d\u3002\u672a\u542f\u7528\u8eab\u4efd\u8ba4\u8bc1\u65f6\uff0c\u53ef\u4ee5\u4f7f\u7528\u4efb\u610f\u5df2\u5b58\u5728\u7684\u7528\u6237\u540d\uff08\u9ed8\u8ba4\u4e3a root\uff09\u3002</li> <li><code>-p</code>\uff1a\u7528\u6237\u540d\u5bf9\u5e94\u7684\u5bc6\u7801\u3002\u672a\u542f\u7528\u8eab\u4efd\u8ba4\u8bc1\u65f6\uff0c\u5bc6\u7801\u53ef\u4ee5\u586b\u5199\u4efb\u610f\u5b57\u7b26\u3002</li> </ul> <p>Note</p> <p>\u5982\u679c\u5728\u96c6\u7fa4\u914d\u7f6e\u6587\u4ef6\u4e2d\u8bbe\u7f6e\u4e86<code>spec.console</code>\u5b57\u6bb5\uff0c\u60a8\u8fd8\u53ef\u4ee5\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\u8fde\u63a5\u5230 NebulaGraph \u6570\u636e\u5e93\uff1a</p> <pre><code># \u8fdb\u5165nebula-console Pod\u3002\nkubectl exec -it nebula-console -- /bin/sh\n\n# \u8fde\u63a5\u5230\u6570\u636e\u5e93\u3002\nnebula-console -addr &lt;node_ip&gt; -port &lt;node_port&gt; -u &lt;username&gt; -p &lt;password&gt;\n</code></pre> <p>\u6709\u5173<code>nebula-console</code>\u5bb9\u5668\u7684\u914d\u7f6e\uff0c\u8bf7\u53c2\u89c1 nebula-console\u3002</p> </li> </ol>"},{"location":"k8s-operator/2.get-started/2.4.connect-to-cluster/#ingress_nebulagraph_nebulagraph","title":"\u901a\u8fc7<code>Ingress</code>\u5728 NebulaGraph \u96c6\u7fa4\u5916\u90e8\u8fde\u63a5 NebulaGraph","text":"<p>\u5f53\u96c6\u7fa4\u4e2d\u6709\u591a\u4e2a Pod \u65f6\uff0c\u4e3a\u6bcf\u4e2a Pod \u5206\u522b\u63d0\u4f9b\u670d\u52a1\u4f1a\u53d8\u5f97\u975e\u5e38\u56f0\u96be\u548c\u7e41\u7410\uff0c\u800c\u4f7f\u7528 Ingress \u53ef\u4ee5\u8f7b\u677e\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\u3002Ingress \u53ef\u4ee5\u5c06\u6d41\u91cf\u8def\u7531\u5230\u96c6\u7fa4\u5185\u90e8\u7684\u591a\u4e2a Pod\u3002</p> <p>Nginx Ingress \u662f Kubernetes \u4e2d\u7684\u4e00\u4e2a Ingress \u63a7\u5236\u5668\uff08Controller\uff09\uff0c\u662f\u5bf9 Kubernetes Ingress \u8d44\u6e90\u7684\u4e00\u4e2a\u5b9e\u73b0\uff0c\u901a\u8fc7 Watch \u673a\u5236\u611f\u77e5 Kubernetes \u96c6\u7fa4\u4e2d\u7684 Ingress \u8d44\u6e90\u3002\u5b83\u5c06\u8fd9\u4e9b Ingress \u89c4\u5219\u8f6c\u6362\u4e3a Nginx \u914d\u7f6e\u5e76\u542f\u52a8\u4e00\u4e2a Nginx \u5b9e\u4f8b\u6765\u5904\u7406\u6d41\u91cf\u3002</p> <p>\u7528\u6237\u53ef\u4ee5\u901a\u8fc7 HostNetwork \u548c DaemonSet \u7ec4\u5408\u7684\u6a21\u5f0f\u4f7f\u7528 Nginx Ingress \u4ece\u96c6\u7fa4\u5916\u90e8\u8fde\u63a5 NebulaGraph \u96c6\u7fa4\u3002</p> <p>\u7531\u4e8e\u4f7f\u7528 HostNetwork\uff0cNginx Ingress \u7684 Pods \u53ef\u80fd\u88ab\u8c03\u5ea6\u5728\u540c\u4e00\u4e2a\u8282\u70b9\u4e0a\uff08\u5f53\u591a\u4e2a Pod \u5c1d\u8bd5\u5728\u540c\u4e00\u4e2a\u8282\u70b9\u4e0a\u76d1\u542c\u76f8\u540c\u7684\u7aef\u53e3\u65f6\uff0c\u5c06\u4f1a\u51fa\u73b0\u7aef\u53e3\u51b2\u7a81\uff09\u3002\u4e3a\u4e86\u907f\u514d\u8fd9\u79cd\u60c5\u51b5\uff0cNginx Ingress \u4ee5 DaemonSet \u6a21\u5f0f\uff08\u786e\u4fdd\u96c6\u7fa4\u4e2d\u6bcf\u4e2a\u8282\u70b9\u90fd\u8fd0\u884c\u4e00\u4e2a Pod \u526f\u672c\uff09\u90e8\u7f72\u5728\u8fd9\u4e9b\u8282\u70b9\u4e0a\uff0c\u9700\u5148\u9009\u62e9\u4e00\u4e9b\u8282\u70b9\u5e76\u4e3a\u8282\u70b9\u6253\u4e0a\u6807\u7b7e\uff0c\u4e13\u95e8\u7528\u4e8e\u90e8\u7f72 Nginx Ingress\u3002 </p> <p>\u7531\u4e8e Ingress \u4e0d\u652f\u6301 TCP \u6216 UDP \u670d\u52a1\uff0c\u4e3a\u6b64 nginx-ingress-controller \u4f7f\u7528<code>--tcp-services-configmap</code>\u548c<code>--udp-services-configmap</code>\u53c2\u6570\u6307\u5411\u4e00\u4e2a ConfigMap\uff0c\u8be5 ConfigMap \u4e2d\u7684\u952e\u6307\u9700\u8981\u4f7f\u7528\u7684\u5916\u90e8\u7aef\u53e3\uff0c\u503c\u6307\u8981\u516c\u5f00\u7684\u670d\u52a1\u7684\u683c\u5f0f\uff0c\u503c\u7684\u683c\u5f0f\u4e3a<code>&lt;\u547d\u540d\u7a7a\u95f4/\u670d\u52a1\u540d\u79f0&gt;:&lt;\u670d\u52a1\u7aef\u53e3&gt;</code>\u3002</p> <p>\u4f8b\u5982\u6307\u5411\u540d\u4e3a<code>tcp-services</code>\u7684 ConfigMap \u7684\u914d\u7f6e\u5982\u4e0b\uff1a</p> <pre><code>apiVersion: v1\nkind: ConfigMap\nmetadata:\n  name: tcp-services\n  namespace: nginx-ingress\ndata:\n  9769: \"default/nebula-graphd-svc:9669\"\n</code></pre> <p>\u64cd\u4f5c\u6b65\u9aa4\u5982\u4e0b\uff1a</p> <ol> <li> <p>\u521b\u5efa\u540d\u4e3a<code>nginx-ingress-daemonset-hostnetwork.yaml</code>\u7684\u6587\u4ef6\u3002</p> <p>\u5355\u51fb nginx-ingress-daemonset-hostnetwork.yaml \u67e5\u770b\u5b8c\u6574\u7684 YAML \u793a\u4f8b\u5185\u5bb9\u3002</p> <p>Note</p> <p>\u4e0a\u8ff0 YAML \u4e2d\u7684\u8d44\u6e90\u5bf9\u8c61\u5747\u4f7f\u7528<code>nginx-ingress</code>\u547d\u540d\u7a7a\u95f4\u3002\u7528\u6237\u53ef\u6267\u884c<code>kubectl create namesapce nginx-ingress</code>\u521b\u5efa\u547d\u540d\u7a7a\u95f4\uff0c\u6216\u8005\u81ea\u5b9a\u4e49\u5176\u4ed6\u547d\u540d\u7a7a\u95f4\u3002</p> </li> <li> <p>\u4e3a\u4efb\u4e00\u8282\u70b9\uff08\u672c\u793a\u4f8b\u4f7f\u7528\u7684\u8282\u70b9\u540d\u4e3a<code>worker2</code>\uff0cIP \u4e3a<code>192.168.8.160</code>\uff09\u6253\u4e0a\u6807\u7b7e\uff0c\u4ee5\u8fd0\u884c\u4e0a\u8ff0 YAML \u6587\u4ef6\u4e2d\u540d\u4e3a<code>nginx-ingress-controller</code>\u7684 DaemonSet\u3002</p> <pre><code>kubectl label node worker2 nginx-ingress=true\n</code></pre> </li> <li> <p>\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\u4f7f Nginx Ingress \u5728\u96c6\u7fa4\u4e2d\u751f\u6548\u3002</p> <pre><code>kubectl create -f nginx-ingress-daemonset-hostnetwork.yaml\n</code></pre> <p>\u8fd4\u56de\uff1a</p> <pre><code>configmap/nginx-ingress-controller created\nconfigmap/tcp-services created\nserviceaccount/nginx-ingress created\nserviceaccount/nginx-ingress-backend created\nclusterrole.rbac.authorization.k8s.io/nginx-ingress created\nclusterrolebinding.rbac.authorization.k8s.io/nginx-ingress created\nrole.rbac.authorization.k8s.io/nginx-ingress created\nrolebinding.rbac.authorization.k8s.io/nginx-ingress created\nservice/nginx-ingress-controller-metrics created\nservice/nginx-ingress-default-backend created\nservice/nginx-ingress-proxy-tcp created\ndaemonset.apps/nginx-ingress-controller created\n</code></pre> <p>\u6210\u529f\u90e8\u7f72 Nginx Ingress \u540e\uff0c\u7531\u4e8e Nginx Ingress \u4e2d\u914d\u7f6e\u7684\u7f51\u7edc\u7c7b\u578b\u4e3a<code>hostNetwork</code>\uff0c\u56e0\u6b64\u7528\u6237\u53ef\u901a\u8fc7\u90e8\u7f72\u4e86 Nginx Ingress \u7684\u8282\u70b9\u7684 IP\uff08<code>192.168.8.160</code>\uff09\u548c\u5916\u90e8\u7aef\u53e3\uff08<code>9769</code>\uff09\u8bbf\u95ee NebulaGraph \u670d\u52a1\u3002</p> </li> <li> <p>\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\u90e8\u7f72\u8fde\u63a5 NebulaGraph \u670d\u52a1\u7684 Console \u5e76\u901a\u8fc7\u5bbf\u4e3b\u673a IP\uff08\u672c\u793a\u4f8b\u4e3a<code>192.168.8.160</code>\uff09\u548c\u4e0a\u8ff0\u914d\u7f6e\u7684\u5916\u90e8\u7aef\u53e3\u8bbf\u95ee NebulaGraph \u670d\u52a1\u3002</p> <pre><code>kubectl run -ti --image vesoft/nebula-console:v3.6.0 --restart=Never -- &lt;nebula_console_name&gt; -addr &lt;host_ip&gt; -port &lt;external_port&gt; -u &lt;username&gt; -p &lt;password&gt;\n</code></pre> <p>\u793a\u4f8b\uff1a</p> <pre><code>kubectl run -ti --image vesoft/nebula-console:v3.6.0 --restart=Never -- nebula-console -addr 192.168.8.160 -port 9769 -u root -p vesoft\n</code></pre> <ul> <li><code>--image</code>\uff1a\u4e3a\u8fde\u63a5 NebulaGraph \u7684\u5de5\u5177 NebulaGraph Console \u7684\u955c\u50cf\u3002</li> <li><code>&lt;nebula-console&gt;</code>\uff1a\u81ea\u5b9a\u4e49\u7684 Pod \u540d\u79f0\u3002\u672c\u793a\u4f8b\u4e3a<code>nebula-console</code>\u3002</li> <li><code>-addr</code>\uff1a\u90e8\u7f72 Nginx Ingress \u7684\u8282\u70b9 IP\uff0c\u672c\u793a\u4f8b\u4e3a<code>192.168.8.160</code>\u3002</li> <li><code>-port</code>\uff1a\u5916\u7f51\u8bbf\u95ee\u4f7f\u7528\u7684\u7684\u7aef\u53e3\u3002\u672c\u793a\u4f8b\u8bbe\u7f6e\u4e3a<code>9769</code>\u3002</li> <li><code>-u</code>\uff1a NebulaGraph \u8d26\u53f7\u7684\u7528\u6237\u540d\u3002\u672a\u542f\u7528\u8eab\u4efd\u8ba4\u8bc1\u65f6\uff0c\u53ef\u4ee5\u4f7f\u7528\u4efb\u610f\u5df2\u5b58\u5728\u7684\u7528\u6237\u540d\uff08\u9ed8\u8ba4\u4e3a root\uff09\u3002</li> <li><code>-p</code>\uff1a\u7528\u6237\u540d\u5bf9\u5e94\u7684\u5bc6\u7801\u3002\u672a\u542f\u7528\u8eab\u4efd\u8ba4\u8bc1\u65f6\uff0c\u5bc6\u7801\u53ef\u4ee5\u586b\u5199\u4efb\u610f\u5b57\u7b26\u3002</li> </ul> <p>\u5982\u679c\u8fd4\u56de\u4ee5\u4e0b\u5185\u5bb9\uff0c\u8bf4\u660e\u6210\u529f\u8fde\u63a5\u6570\u636e\u5e93\uff1a</p> <pre><code>If you don't see a command prompt, try pressing enter.\n\n(root@nebula) [(none)]&gt;\n</code></pre> <p>Note</p> <p>\u5982\u679c\u5728\u96c6\u7fa4\u914d\u7f6e\u6587\u4ef6\u4e2d\u8bbe\u7f6e\u4e86<code>spec.console</code>\u5b57\u6bb5\uff0c\u60a8\u8fd8\u53ef\u4ee5\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\u8fde\u63a5\u5230 NebulaGraph \u6570\u636e\u5e93\uff1a</p> <pre><code># \u8fdb\u5165nebula-console Pod\u3002\nkubectl exec -it nebula-console -- /bin/sh\n\n# \u8fde\u63a5\u5230\u6570\u636e\u5e93\u3002\nnebula-console -addr &lt;ingress_host_ip&gt; -port &lt;external_port&gt; -u &lt;username&gt; -p &lt;password&gt;\n</code></pre> <p>\u6709\u5173<code>nebula-console</code>\u5bb9\u5668\u7684\u914d\u7f6e\uff0c\u8bf7\u53c2\u89c1 nebula-console\u3002</p> </li> </ol>"},{"location":"k8s-operator/3.operator-management/3.1.customize-installation/","title":"\u81ea\u5b9a\u4e49\u5b89\u88c5\u914d\u7f6e","text":"<p>\u672c\u6587\u5c06\u4ecb\u7ecd\u5982\u4f55\u5728\u5b89\u88c5 NebulaGraph Operator \u65f6\u81ea\u5b9a\u4e49\u9ed8\u8ba4\u914d\u7f6e\u9879\u3002</p>"},{"location":"k8s-operator/3.operator-management/3.1.customize-installation/#_2","title":"\u914d\u7f6e\u9879","text":"<p>\u5728\u6267\u884c<code>helm install [NAME] [CHART] [flags]</code>\u547d\u4ee4\u5b89\u88c5 Chart \u65f6\uff0c\u53ef\u6307\u5b9a Chart \u914d\u7f6e\u3002\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u8003\u5b89\u88c5\u524d\u81ea\u5b9a\u4e49 Chart\u3002</p> <p>\u7528\u6237\u53ef\u4ee5\u5728 nebula-operator chart \u914d\u7f6e\u6587\u4ef6\u4e2d\u67e5\u770b\u76f8\u5173\u7684\u914d\u7f6e\u9009\u9879\u3002</p> <p>\u6216\u8005\u6267\u884c\u547d\u4ee4<code>helm show values nebula-operator/nebula-operator</code>\u67e5\u770b\u53ef\u914d\u7f6e\u7684\u9009\u9879\uff0c\u8fd4\u56de\u7ed3\u679c\u5982\u4e0b\u3002</p> <pre><code>[root@master ~]$ helm show values nebula-operator/nebula-operator   \nimage:\n  nebulaOperator:\n    image: vesoft/nebula-operator:v1.7.5\n    imagePullPolicy: Always\n\nimagePullSecrets: [ ]\nkubernetesClusterDomain: \"\"\n\ncontrollerManager:\n  create: true\n  replicas: 2\n  env: [ ]\n  resources:\n    limits:\n      cpu: 200m\n      memory: 200Mi\n    requests:\n      cpu: 100m\n      memory: 100Mi\n\nadmissionWebhook:\n  create: false\n  # Webhook \u670d\u52a1\u5668\u76d1\u542c\u548c\u63a5\u53d7\u4f20\u5165\u8bf7\u6c42\u7684\u7aef\u53e3\uff0c\u9ed8\u8ba4 9443\u3002\n  webhookBindPort: 9443\n\nscheduler:\n  create: true\n  schedulerName: nebula-scheduler\n  replicas: 2\n  env: [ ]\n  resources:\n    limits:\n      cpu: 200m\n      memory: 200Mi\n    requests:\n      cpu: 100m\n      memory: 100Mi\n  verbosity: 0\n  plugins:\n    enabled: [\"NodeZone\"]\n    disabled: [] \n...\n</code></pre> <p>\u90e8\u5206\u53c2\u6570\u63cf\u8ff0\u5982\u4e0b\uff1a</p> \u53c2\u6570 \u9ed8\u8ba4\u503c \u63cf\u8ff0 <code>image.nebulaOperator.image</code> <code>vesoft/nebula-operator:v1.7.5</code> NebulaGraph Operator \u7684\u955c\u50cf\uff0c\u7248\u672c\u4e3a1.7.5\u3002 <code>image.nebulaOperator.imagePullPolicy</code> <code>IfNotPresent</code> \u955c\u50cf\u62c9\u53d6\u7b56\u7565\u3002 <code>imagePullSecrets</code> <code>[]</code> \u955c\u50cf\u62c9\u53d6\u5bc6\u94a5\uff0c\u4f8b\u5982<code>imagePullSecrets[0].name=\"vesoft\"</code>\u3002 <code>kubernetesClusterDomain</code> <code>cluster.local</code> \u96c6\u7fa4\u57df\u540d\u3002 <code>controllerManager.create</code> <code>true</code> \u662f\u5426\u542f\u7528 controller-manager\u3002 <code>controllerManager.replicas</code> <code>2</code> controller-manager \u526f\u672c\u6570\u3002 <code>admissionWebhook.create</code> <code>false</code> \u662f\u5426\u542f\u7528 Admission Webhook\u3002\u9ed8\u8ba4\u5173\u95ed\uff0c\u5982\u9700\u5f00\u542f\uff0c\u9700\u8bbe\u7f6e\u4e3a<code>true</code>\u5e76\u4e14\u9700\u8981\u5b89\u88c5 cert-manager\u3002\u8be6\u60c5\u53c2\u89c1\u5f00\u542f\u51c6\u5165\u63a7\u5236\u3002 <code>scheduler.create</code> <code>true</code> \u662f\u5426\u542f\u7528 Scheduler\u3002 <code>scheduler.schedulerName</code> <code>nebula-scheduler</code> NebulaGraph Operator \u81ea\u5b9a\u4e49\u7684\u8c03\u5ea6\u5668\u540d\u79f0\u3002\u7528\u4e8e\u5f00\u542f Zone \u65f6\uff0c\u5747\u5300\u8c03\u5ea6 Storage Pods \u5230\u4e0d\u540c\u7684 Zone \u4e2d\u3002\u4ec5\u9002\u7528\u4e8e\u4f01\u4e1a\u7248\u96c6\u7fa4\u3002 <code>scheduler.replicas</code> <code>2</code> nebula-scheduler \u526f\u672c\u6570\u3002"},{"location":"k8s-operator/3.operator-management/3.1.customize-installation/#_3","title":"\u793a\u4f8b","text":"<p>\u4ee5\u4e0b\u793a\u4f8b\u4e3a\u5728\u5b89\u88c5 NebulaGraph Operator \u65f6\uff0c\u6307\u5b9a NebulaGraph Operator \u7684 AdmissionWebhook \u673a\u5236\u4e3a\u5f00\u542f\u72b6\u6001\uff08\u9ed8\u8ba4\u5173\u95ed AdmissionWebhook\uff09\uff1a</p> <pre><code>helm install nebula-operator nebula-operator/nebula-operator --namespace=&lt;nebula-operator-system&gt; --set admissionWebhook.create=true\n</code></pre> <p>\u9a8c\u8bc1\u662f\u5426\u5f00\u542f AdmissionWebhook\uff1a</p> <pre><code>helm get values nebula-operator -n &lt;nebula-operator-system&gt;\n</code></pre> <p>\u793a\u4f8b\u8f93\u51fa\uff1a</p> <pre><code>USER-SUPPLIED VALUES:\nadmissionWebhook:\n  create: true\n</code></pre> <p>\u5173\u4e8e<code>helm install</code>\u547d\u4ee4\u66f4\u591a\u4fe1\u606f, \u53c2\u89c1 Helm Install\u3002</p>"},{"location":"k8s-operator/3.operator-management/3.2.update-operator/","title":"\u66f4\u65b0 NebulaGraph Operator \u914d\u7f6e","text":"<p>\u672c\u6587\u5c06\u4ecb\u7ecd\u5982\u4f55\u66f4\u65b0 NebulaGraph Operator \u7684\u914d\u7f6e\u3002</p>"},{"location":"k8s-operator/3.operator-management/3.2.update-operator/#_1","title":"\u64cd\u4f5c\u6b65\u9aa4","text":"<ol> <li> <p>\u62c9\u53d6\u6700\u65b0\u7684 Helm \u4ed3\u5e93\u3002</p> <pre><code>helm repo update\n</code></pre> </li> <li> <p>\u67e5\u770b NebulaGraph Operator \u7684\u9ed8\u8ba4\u914d\u7f6e\u3002</p> <pre><code>helm show values nebula-operator/nebula-operator\n</code></pre> </li> <li> <p>\u901a\u8fc7<code>--set</code>\u4f20\u9012\u914d\u7f6e\u53c2\u6570\uff0c\u66f4\u65b0 NebulaGraph Operator\u3002</p> <ul> <li><code>--set</code>\uff1a\u901a\u8fc7\u547d\u4ee4\u884c\u7684\u65b9\u5f0f\u65b0\u589e\u6216\u8986\u76d6\u6307\u5b9a\u9879\u3002\u6709\u5173\u53ef\u4ee5\u66f4\u65b0\u7684\u914d\u7f6e\u9879\uff0c\u8bf7\u67e5\u770b\u81ea\u5b9a\u4e49\u914d\u7f6e\u3002</li> </ul> <p>\u4f8b\u5982\uff0c\u66f4\u65b0 NebulaGraph Operator \u7684 AdmissionWebhook \u673a\u5236\u4e3a\u5f00\u542f\u72b6\u6001\u3002</p> <pre><code>helm upgrade nebula-operator nebula-operator/nebula-operator --namespace=nebula-operator-system --version=1.7.5 --set admissionWebhook.create=true\n</code></pre> <p>\u66f4\u591a\u4fe1\u606f\uff0c\u53c2\u8003 Helm \u5347\u7ea7\u3002</p> </li> <li> <p>\u67e5\u770b NebulaGraph Operator \u7684\u914d\u7f6e\u662f\u5426\u66f4\u65b0\u6210\u529f\u3002</p> <pre><code>helm get values nebula-operator -n nebula-operator-system\n</code></pre> <p>\u793a\u4f8b\u8f93\u51fa\uff1a</p> <pre><code>USER-SUPPLIED VALUES:\nadmissionWebhook:\n  create: true\n</code></pre> </li> </ol>"},{"location":"k8s-operator/3.operator-management/3.3.upgrade-operator/","title":"\u5347\u7ea7 NebulaGraph Operator","text":"<p>\u672c\u6587\u5c06\u4ecb\u7ecd\u5982\u4f55\u5347\u7ea7 NebulaGraph Operator \u7248\u672c\u3002</p> <p>\u5386\u53f2\u7248\u672c\u517c\u5bb9\u6027</p> <ul> <li>\u4e0d\u652f\u6301\u5347\u7ea7 0.9.0 \u53ca\u4ee5\u4e0b\u7248\u672c\u7684 NebulaGraph Operator \u81f3 1.x \u7248\u672c\u3002</li> <li>1.x \u7248\u672c\u7684 NebulaGraph Operator \u4e0d\u517c\u5bb9 3.x \u4ee5\u4e0b\u7248\u672c\u7684 NebulaGraph\u3002</li> </ul>"},{"location":"k8s-operator/3.operator-management/3.3.upgrade-operator/#_1","title":"\u64cd\u4f5c\u6b65\u9aa4","text":"<ol> <li> <p>\u67e5\u770b\u5f53\u524d NebulaGraph Operator \u7684\u7248\u672c\u3002</p> <pre><code>helm list --all-namespaces\n</code></pre> <p>\u8fd4\u56de\u793a\u4f8b\uff1a</p> <pre><code>NAME              NAMESPACE               REVISION    UPDATED                                 STATUS      CHART                   APP VERSION\nnebula-operator   nebula-operator-system  3           2023-11-06 12:06:24.742397418 +0800 CST deployed    nebula-operator-1.7.0   1.7.0\n</code></pre> </li> <li> <p>\u62c9\u53d6\u6700\u65b0\u7684 Helm \u4ed3\u5e93\u3002</p> <pre><code>helm repo update\n</code></pre> </li> <li> <p>\u67e5\u770b\u6700\u65b0\u7684 NebulaGraph Operator \u7248\u672c\u3002</p> <pre><code>helm search repo nebula-operator/nebula-operator\n</code></pre> <p>\u8fd4\u56de\u793a\u4f8b\uff1a</p> <pre><code>NAME                              CHART VERSION   APP VERSION DESCRIPTION\nnebula-operator/nebula-operator   1.7.5           1.7.5       Nebula Operator Helm chart for Kubernetes\n</code></pre> </li> <li> <p>\u5347\u7ea7 NebulaGraph Operator \u81f3 1.7.5 \u7248\u672c\u3002</p> <pre><code>helm upgrade nebula-operator nebula-operator/nebula-operator --namespace=&lt;namespace_name&gt; --version=1.7.5\n</code></pre> <p>\u793a\u4f8b\uff1a</p> <pre><code>helm upgrade nebula-operator nebula-operator/nebula-operator --namespace=nebula-operator-system --version=1.7.5\n</code></pre> <p>\u8f93\u51fa\uff1a</p> <pre><code>Release \"nebula-operator\" has been upgraded. Happy Helming!\nNAME: nebula-operator\nLAST DEPLOYED: Tue Nov 16 02:21:08 2021\nNAMESPACE: nebula-operator-system\nSTATUS: deployed\nREVISION: 3\nTEST SUITE: None\nNOTES:\nNebulaGraph Operator installed!\n</code></pre> </li> <li> <p>\u62c9\u53d6\u6700\u65b0\u7684 CRD \u914d\u7f6e\u6587\u4ef6\u3002</p> <p>Note</p> <p>\u5347\u7ea7 Operator \u540e\uff0c\u9700\u8981\u540c\u65f6\u5347\u7ea7\u76f8\u5e94\u7684 CRD \u914d\u7f6e\uff0c\u5426\u5219 NebulaGraph \u96c6\u7fa4\u521b\u5efa\u4f1a\u5931\u8d25\u3002\u6709\u5173 CRD \u7684\u914d\u7f6e\uff0c\u53c2\u89c1 apps.nebula-graph.io_nebulaclusters.yaml\u3002</p> <ol> <li> <p>\u4e0b\u8f7d NebulaGraph Operator chart \u81f3\u672c\u5730\u3002</p> <pre><code>helm pull nebula-operator/nebula-operator --version=1.7.5\n</code></pre> <ul> <li><code>--version</code>: \u5347\u7ea7\u7248\u672c\u53f7\u3002\u5982\u4e0d\u6307\u5b9a\uff0c\u5219\u9ed8\u8ba4\u4e3a\u6700\u65b0\u7248\u672c\u3002</li> </ul> </li> <li> <p>\u6267\u884c<code>tar -zxvf</code>\u89e3\u538b\u5b89\u88c5\u5305\u3002</p> <p>\u4f8b\u5982\uff1a\u89e3\u538b 1.7.5 chart \u5305\u81f3<code>/tmp</code>\u8def\u5f84\u4e0b\u3002</p> <pre><code>tar -zxvf nebula-operator-1.7.5.tgz -C /tmp\n</code></pre> <ul> <li><code>-C /tmp</code>: \u5982\u4e0d\u6307\u5b9a\uff0c\u5219\u9ed8\u8ba4\u89e3\u538b\u81f3\u5f53\u524d\u8def\u5f84\u3002</li> </ul> </li> </ol> </li> <li> <p>\u5728<code>nebula-operator</code>\u76ee\u5f55\u4e0b\u5e94\u7528\u6700\u65b0\u7684 CRD \u914d\u7f6e\u6587\u4ef6\u3002</p> <pre><code>kubectl apply -f crds/nebulaclusters.yaml\n</code></pre> <p>\u8f93\u51fa\uff1a</p> <pre><code>customresourcedefinition.apiextensions.k8s.io/nebulaclusters.apps.nebula-graph.io configured\n</code></pre> </li> </ol>"},{"location":"k8s-operator/3.operator-management/3.4.unistall-operator/","title":"\u5378\u8f7d NebulaGraph Operator","text":"<p>\u672c\u6587\u5c06\u4ecb\u7ecd\u5982\u4f55\u5378\u8f7d NebulaGraph Operator\u3002</p>"},{"location":"k8s-operator/3.operator-management/3.4.unistall-operator/#_1","title":"\u64cd\u4f5c\u6b65\u9aa4","text":"<ol> <li> <p>\u5378\u8f7d NebulaGraph Operator chart\u3002</p> <pre><code>helm uninstall nebula-operator --namespace=&lt;nebula-operator-system&gt;\n</code></pre> </li> <li> <p>\u67e5\u770b\u9ed8\u8ba4\u521b\u5efa\u7684 CRD \u4fe1\u606f\u3002</p> <pre><code>kubectl get crd\n</code></pre> <p>\u8fd4\u56de\u793a\u4f8b\uff1a</p> <pre><code>NAME                                                 CREATED AT\nnebulaautoscalers.autoscaling.nebula-graph.io        2023-11-01T04:16:51Z\nnebulaclusters.apps.nebula-graph.io                  2023-10-12T07:55:32Z\nnebularestores.apps.nebula-graph.io                  2023-02-04T23:01:00Z\n</code></pre> </li> <li> <p>\u5220\u9664 CRD\u3002</p> <pre><code>kubectl delete crd nebulaclusters.apps.nebula-graph.io nebularestores.apps.nebula-graph.io nebulaautoscalers.autoscaling.nebula-graph.io\n</code></pre> </li> </ol>"},{"location":"k8s-operator/4.cluster-administration/4.2.configuration/","title":"\u66f4\u65b0 NebulaGraph \u96c6\u7fa4\u7684\u914d\u7f6e","text":"<p>NebulaGraph \u96c6\u7fa4\u4e2d Meta\u3001Storage\u3001Graph \u670d\u52a1\u90fd\u6709\u5404\u81ea\u7684\u9ed8\u8ba4\u914d\u7f6e\u3002NebulaGraph Operator \u652f\u6301\u81ea\u5b9a\u4e49\u96c6\u7fa4\u670d\u52a1\u7684\u914d\u7f6e\u3002\u672c\u6587\u4ecb\u7ecd\u5982\u4f55\u4fee\u6539 NebulaGraph \u96c6\u7fa4\u7684\u9ed8\u8ba4\u914d\u7f6e\u3002</p> <p>Note</p> <p>\u6682\u4e0d\u652f\u6301\u901a\u8fc7 Helm \u81ea\u5b9a\u4e49 NebulaGraph \u96c6\u7fa4\u7684\u914d\u7f6e\u53c2\u6570\u3002</p>"},{"location":"k8s-operator/4.cluster-administration/4.2.configuration/#_1","title":"\u524d\u63d0\u6761\u4ef6","text":"<p>\u5df2\u4f7f\u7528 NebulaGraph Operator \u521b\u5efa\u4e00\u4e2a\u96c6\u7fa4\u3002\u5177\u4f53\u6b65\u9aa4\uff0c\u53c2\u89c1\u521b\u5efa NebulaGraph \u96c6\u7fa4\u3002</p>"},{"location":"k8s-operator/4.cluster-administration/4.2.configuration/#_2","title":"\u914d\u7f6e\u65b9\u5f0f","text":"<p>\u96c6\u7fa4\u670d\u52a1\u7684\u914d\u7f6e\u5728\u521b\u5efa\u96c6\u7fa4\u7684 YAML \u6587\u4ef6\u4e2d\uff0c\u901a\u8fc7<code>spec.&lt;metad|graphd|storaged&gt;.config</code>\u53c2\u6570\u6307\u5b9a\u3002NebulaGraph Operator \u4f1a\u5c06<code>config</code>\u4e2d\u7684\u914d\u7f6e\u5199\u5165\u5230\u5bf9\u5e94\u670d\u52a1\u7684 ConfigMap \u4e2d\uff0c\u7136\u540e\u5728\u670d\u52a1\u542f\u52a8\u65f6\u5c06 ConfigMap \u6302\u8f7d\u5230\u670d\u52a1\u7684\u914d\u7f6e\u6587\u4ef6\u76ee\u5f55<code>/usr/local/nebula/etc/</code>\u4e0b\u3002</p> <p><code>config</code>\u7ed3\u6784\u5982\u4e0b\uff1a</p> <pre><code>Config map[string]string `json:\"config,omitempty\"`\n</code></pre> <p>\u4f8b\u5982\uff0c\u4fee\u6539 Graph \u670d\u52a1\u7684<code>enable_authorize</code>\u53c2\u6570\u7684\u914d\u7f6e\uff0c\u53ef\u4ee5\u5728\u521b\u5efa\u96c6\u7fa4\u65f6\u6216\u8005\u4e4b\u540e\uff0c\u901a\u8fc7<code>spec.graphd.config</code>\u53c2\u6570\u6307\u5b9a\u3002</p> <pre><code>apiVersion: apps.nebula-graph.io/v1alpha1\nkind: NebulaCluster\nmetadata:\n  name: nebula\n  namespace: default\nspec:\n  graphd:\n    ...\n    config: // \u4e3a Graph \u670d\u52a1\u81ea\u5b9a\u4e49\u53c2\u6570\u3002\n      \"enable_authorize\": \"true\"  // \u542f\u7528\u6388\u6743\u3002\u9ed8\u8ba4\u503c\u4e3a false\u3002\n...\n</code></pre> <p>\u5982\u679c\u9700\u8981\u4e3a Meta \u670d\u52a1\u548c Storage \u670d\u52a1\u914d\u7f6e<code>config</code>\uff0c\u5219\u5728<code>spec.metad.config</code>\u548c<code>spec.storaged.config</code>\u4e2d\u6dfb\u52a0\u5bf9\u5e94\u7684\u914d\u7f6e\u9879\u3002</p>"},{"location":"k8s-operator/4.cluster-administration/4.2.configuration/#_3","title":"\u53ef\u914d\u7f6e\u7684\u53c2\u6570","text":"<p>\u5728<code>config</code>\u5b57\u6bb5\u4e0b\u53ef\u914d\u7f6e\u7684\u53c2\u6570\u8be6\u60c5\uff0c\u8bf7\u5206\u522b\u53c2\u89c1\uff1a - Meta \u670d\u52a1\u914d\u7f6e\u53c2\u6570 - Storage \u670d\u52a1\u914d\u7f6e\u53c2\u6570 - Graph \u670d\u52a1\u914d\u7f6e\u53c2\u6570</p>"},{"location":"k8s-operator/4.cluster-administration/4.2.configuration/#pod","title":"\u53c2\u6570\u66f4\u65b0\u4e0e Pod \u91cd\u542f\u89c4\u5219","text":"<p>\u96c6\u7fa4\u670d\u52a1\u7684\u914d\u7f6e\u53c2\u6570\u5206\u4e3a\u4e24\u7c7b\uff1a\u4e00\u7c7b\u662f\u5fc5\u9700\u91cd\u542f\u670d\u52a1\u624d\u80fd\u66f4\u65b0\u7684\u914d\u7f6e\uff1b\u53e6\u4e00\u7c7b\u662f\u53ef\u4ee5\u5728\u670d\u52a1\u8fd0\u884c\u65f6\u52a8\u6001\u66f4\u65b0\u7684\u914d\u7f6e\uff0c\u5728\u670d\u52a1\u8fd0\u884c\u65f6\u66f4\u65b0\u7684\u914d\u7f6e\u4e0d\u4f1a\u88ab\u6301\u4e45\u5316\uff0c\u91cd\u542f\u670d\u52a1\u540e\uff0c\u914d\u7f6e\u4f1a\u6062\u590d\u5230\u914d\u7f6e\u6587\u4ef6\u4e2d\u7684\u503c\u3002</p> <p>\u5173\u4e8e\u670d\u52a1\u7684\u914d\u7f6e\u53c2\u6570\u662f\u5426\u652f\u6301\u8fd0\u884c\u65f6\u52a8\u6001\u66f4\u65b0\uff0c\u8bf7\u67e5\u770b\u4e0a\u8ff0\u670d\u52a1\u914d\u7f6e\u53c2\u6570\u8be6\u60c5\u9875\u5404\u4e2a\u8868\u683c\u4e2d\u662f\u5426\u652f\u6301\u8fd0\u884c\u65f6\u52a8\u6001\u4fee\u6539\u4e00\u5217\uff1b\u6216\u8005\u67e5\u770b Dynamic runtime flags\u3002</p> <p>\u5728\u66f4\u65b0\u96c6\u7fa4\u670d\u52a1\u7684\u914d\u7f6e\u65f6\uff0c\u9700\u8981\u6ce8\u610f\u4ee5\u4e0b\u51e0\u70b9\uff1a</p> <ul> <li>\u5982\u679c<code>config</code>\u4e0b\u66f4\u65b0\u7684\u53c2\u6570\u5747\u4e3a\u652f\u6301\u8fd0\u884c\u65f6\u52a8\u6001\u66f4\u65b0\u7684\u53c2\u6570\uff0c\u5219\u4e0d\u4f1a\u89e6\u53d1\u670d\u52a1 Pod \u7684\u91cd\u542f\uff0c\u5e76\u4e14\u914d\u7f6e\u53c2\u6570\u7684\u66f4\u65b0\u4e0d\u4f1a\u88ab\u6301\u4e45\u5316\u3002</li> <li>\u5982\u679c<code>config</code>\u4e0b\u66f4\u65b0\u7684\u53c2\u6570\u5305\u542b\u4e00\u4e2a\u6216\u591a\u4e2a\u4e0d\u652f\u6301\u8fd0\u884c\u65f6\u52a8\u6001\u66f4\u65b0\u7684\u53c2\u6570\uff0c\u5219\u4f1a\u89e6\u53d1\u670d\u52a1 Pod \u7684\u91cd\u542f\uff0c\u5e76\u4e14\u53ea\u6709\u4e0d\u652f\u6301\u8fd0\u884c\u65f6\u52a8\u6001\u53c2\u6570\u7684\u66f4\u65b0\u624d\u4f1a\u88ab\u6301\u4e45\u5316\u3002</li> </ul> <p>Note</p> <p>\u82e5\u8981\u5728\u96c6\u7fa4\u8fd0\u884c\u65f6\u52a8\u6001\u4fee\u6539\u53c2\u6570\u914d\u7f6e\u4e14\u4e0d\u89e6\u53d1 Pod \u91cd\u542f\uff0c\u8bf7\u786e\u4fdd\u5f53\u524d\u4fee\u6539\u7684\u53c2\u6570\u5168\u90e8\u652f\u6301\u8fd0\u884c\u65f6\u52a8\u6001\u4fee\u6539\u3002</p>"},{"location":"k8s-operator/4.cluster-administration/4.2.configuration/#_4","title":"\u81ea\u5b9a\u4e49\u7aef\u53e3\u914d\u7f6e","text":"<p>\u672c\u793a\u4f8b\u6f14\u793a\u5982\u4f55\u81ea\u5b9a\u4e49 Meta\u3001Storage\u3001Graph \u670d\u52a1\u7684\u7aef\u53e3\u914d\u7f6e\u3002</p> <p>\u53ef\u4ee5\u5728<code>config</code>\u5b57\u6bb5\u4e2d\u6dfb\u52a0<code>port</code>\u548c<code>ws_http_port</code>\u53c2\u6570\uff0c\u4ece\u800c\u914d\u7f6e\u81ea\u5b9a\u4e49\u7684\u7aef\u53e3\u3002\u8fd9\u4e24\u4e2a\u53c2\u6570\u7684\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u89c1Meta \u670d\u52a1\u914d\u7f6e\u53c2\u6570\u3001Storage \u670d\u52a1\u914d\u7f6e\u53c2\u6570\u3001Graph \u670d\u52a1\u914d\u7f6e\u53c2\u6570\u7684 networking \u914d\u7f6e\u4e00\u8282\u3002</p> <p>Note</p> <ul> <li>\u81ea\u5b9a\u4e49<code>port</code>\u548c<code>ws_http_port</code>\u53c2\u6570\u914d\u7f6e\u540e\uff0c\u4f1a\u89e6\u53d1 Pod \u91cd\u542f\uff0c\u5e76\u5728\u91cd\u542f\u540e\u751f\u6548\u3002 </li> <li>\u5728\u96c6\u7fa4\u542f\u52a8\u540e\uff0c\u4e0d\u5efa\u8bae\u4fee\u6539<code>port</code>\u53c2\u6570\u3002</li> </ul> <ol> <li> <p>\u4fee\u6539\u96c6\u7fa4\u914d\u7f6e\u6587\u4ef6\u3002</p> <ol> <li>\u6253\u5f00\u96c6\u7fa4\u914d\u7f6e\u6587\u4ef6\u3002</li> </ol> <pre><code>kubectl edit nc nebula\n</code></pre> <ol> <li>\u4fee\u6539\u914d\u7f6e\u6587\u4ef6\uff0c\u6dfb\u52a0<code>config</code>\u5b57\u6bb5\uff0c\u914d\u7f6e\u81ea\u5b9a\u4e49\u7aef\u53e3\u3002</li> </ol> <pre><code>apiVersion: apps.nebula-graph.io/v1alpha1\nkind: NebulaCluster\nmetadata:\n  name: nebula\n  namespace: default\nspec:\n  graphd:\n    config:  # \u4e3a Graph \u670d\u52a1\u81ea\u5b9a\u4e49\u7aef\u53e3\u914d\u7f6e\u3002\n      port: \"3669\"\n      ws_http_port: \"8080\"\n    resources:\n      requests:\n        cpu: \"200m\"\n        memory: \"500Mi\"\n      limits:\n        cpu: \"1\"\n        memory: \"1Gi\"\n    replicas: 1\n    image: vesoft/nebula-graphd\n    version: master\n  metad: \n    config:  # \u4e3a Meta \u670d\u52a1\u81ea\u5b9a\u4e49\u7aef\u53e3\u914d\u7f6e\u3002\n      ws_http_port: 8081\n    resources:\n      requests:\n        cpu: \"300m\"\n        memory: \"500Mi\"\n      limits:\n        cpu: \"1\"\n        memory: \"1Gi\"\n    replicas: 1\n    image: vesoft/nebula-metad\n    version: master\n    dataVolumeClaim:\n      resources:\n        requests:\n          storage: 2Gi\n      storageClassName: local-path\n  storaged:  \n    config:  # \u4e3a Storage \u670d\u52a1\u81ea\u5b9a\u4e49\u7aef\u53e3\u914d\u7f6e\u3002\n      ws_http_port: 8082\n    resources:\n      requests:\n        cpu: \"300m\"\n        memory: \"500Mi\"\n      limits:\n        cpu: \"1\"\n        memory: \"1Gi\"\n    replicas: 1\n    image: vesoft/nebula-storaged\n    version: master\n    dataVolumeClaims:\n    - resources:\n        requests:\n          storage: 2Gi\n      storageClassName: local-path\n    enableAutoBalance: true\n  reference:\n    name: statefulsets.apps\n    version: v1\n  schedulerName: default-scheduler\n  imagePullPolicy: IfNotPresent\n  imagePullSecrets:\n  - name: nebula-image\n  enablePVReclaim: true\n  topologySpreadConstraints:\n  - topologyKey: kubernetes.io/hostname\n    whenUnsatisfiable: \"ScheduleAnyway\"\n</code></pre> </li> <li> <p>\u4fdd\u5b58\u914d\u7f6e\u6587\u4ef6\u3002</p> <p>\u914d\u7f6e\u6587\u4ef6\u4fdd\u5b58\u540e\uff0cNebulaGraph Operator \u4f1a\u81ea\u52a8\u66f4\u65b0\u96c6\u7fa4\u914d\u7f6e\u3002</p> <ol> <li>\u6309<code>Esc</code>\u952e\u9000\u51fa\u7f16\u8f91\u6a21\u5f0f\u3002</li> <li>\u8f93\u5165<code>:wq</code>\u4fdd\u5b58\u914d\u7f6e\u6587\u4ef6\u5e76\u9000\u51fa\u3002</li> </ol> </li> <li> <p>\u9a8c\u8bc1\u914d\u7f6e\u5df2\u7ecf\u751f\u6548\u3002</p> <pre><code>kubectl get svc\n</code></pre> <p>\u8fd4\u56de\u793a\u4f8b\uff1a</p> <pre><code>NAME                        TYPE        CLUSTER-IP       EXTERNAL-IP   PORT(S)                      AGE\nnebula-graphd-headless      ClusterIP   None             &lt;none&gt;        3669/TCP,8080/TCP            10m\nnebula-graphd-svc           ClusterIP   10.102.13.115    &lt;none&gt;        3669/TCP,8080/TCP            10m\nnebula-metad-headless       ClusterIP   None             &lt;none&gt;        9559/TCP,8081/TCP            11m\nnebula-storaged-headless    ClusterIP   None             &lt;none&gt;        9779/TCP,8082/TCP,9778/TCP   11m\n</code></pre> <p>\u53ef\u4ee5\u770b\u5230\uff0cGraph \u670d\u52a1\u7684 RPC \u5b88\u62a4\u8fdb\u7a0b\u76d1\u542c\u7aef\u53e3\u5df2\u7ecf\u53d8\u4e3a<code>3669</code>\uff08\u9ed8\u8ba4<code>9669</code>\uff09\uff0cHTTP \u7aef\u53e3\u5df2\u7ecf\u53d8\u4e3a<code>8080</code>\uff08\u9ed8\u8ba4<code>19669</code>\uff09\uff1bMeta \u670d\u52a1\u7684 HTTP \u7aef\u53e3\u5df2\u7ecf\u53d8\u4e3a<code>8081</code>\uff08\u9ed8\u8ba4<code>19559</code>\uff09\uff1bStorage \u670d\u52a1\u7684 HTTP \u7aef\u53e3\u5df2\u7ecf\u53d8\u4e3a<code>8082</code>\uff08\u9ed8\u8ba4<code>19779</code>\uff09\u3002</p> </li> </ol>"},{"location":"k8s-operator/4.cluster-administration/4.5.logging/","title":"\u7ba1\u7406\u96c6\u7fa4\u65e5\u5fd7","text":"<p>NebulaGraph \u96c6\u7fa4\u5404\u670d\u52a1\uff08graphd\u3001metad\u3001storaged\uff09\u5728\u8fd0\u884c\u671f\u95f4\u4f1a\u751f\u6210\u8fd0\u884c\u65e5\u5fd7\uff0c\u65e5\u5fd7\u9ed8\u8ba4\u5b58\u653e\u5728\u5404\u4e2a\u670d\u52a1\u5bb9\u5668\u7684<code>/usr/local/nebula/logs</code>\u76ee\u5f55\u4e0b\u3002</p>"},{"location":"k8s-operator/4.cluster-administration/4.5.logging/#_2","title":"\u67e5\u770b\u8fd0\u884c\u65e5\u5fd7","text":"<p>\u5982\u679c\u60a8\u9700\u8981\u67e5\u770b NebulaGraph \u96c6\u7fa4\u7684\u8fd0\u884c\u65e5\u5fd7\uff0c\u53ef\u4ee5\u901a\u8fc7<code>kubectl logs</code>\u547d\u4ee4\u67e5\u770b\u3002</p> <p>\u4f8b\u5982\uff0c\u67e5\u770b Storage \u670d\u52a1\u7684\u8fd0\u884c\u65e5\u5fd7\uff1a</p> <pre><code>// \u67e5\u770b Storage \u670d\u52a1 Pod \u7684\u540d\u79f0\uff08nebula-storaged-0\uff09\u3002\n$ kubectl get pods -l app.kubernetes.io/component=storaged\nNAME                               READY   STATUS    RESTARTS      AGE\nnebula-storaged-0                  1/1     Running   0             45h\n...\n\n// \u8fdb\u5165 Storage \u670d\u52a1\u6240\u5728\u5bb9\u5668 storaged\u3002\n$ kubectl exec -it nebula-storaged-0 -c storaged -- /bin/bash\n\n// \u67e5\u770b Storage \u670d\u52a1\u7684\u8fd0\u884c\u65e5\u5fd7\u3002\n$ cd /usr/local/nebula/logs\n</code></pre>"},{"location":"k8s-operator/4.cluster-administration/4.5.logging/#_3","title":"\u6e05\u7406\u65e5\u5fd7","text":"<p>\u96c6\u7fa4\u670d\u52a1\u5728\u8fd0\u884c\u671f\u95f4\u751f\u6210\u7684\u8fd0\u884c\u65e5\u5fd7\u4f1a\u5360\u7528\u78c1\u76d8\u7a7a\u95f4\uff0c\u4e3a\u907f\u514d\u5360\u7528\u8fc7\u591a\u78c1\u76d8\u7a7a\u95f4\uff0cOperator \u4f7f\u7528 sidecar \u5bb9\u5668\u5b9a\u671f\u6e05\u7406\u548c\u5f52\u6863\u65e5\u5fd7\u3002</p> <p>\u4e3a\u4e86\u65b9\u4fbf\u65e5\u5fd7\u7684\u91c7\u96c6\u548c\u7ba1\u7406\uff0c\u6bcf\u4e2a NebulaGraph \u670d\u52a1\u90fd\u4f1a\u90e8\u7f72\u4e00\u4e2a sidecar \u5bb9\u5668\uff0c\u8d1f\u8d23\u6536\u96c6\u8be5\u670d\u52a1\u5bb9\u5668\u4ea7\u751f\u7684\u65e5\u5fd7\uff0c\u5e76\u5c06\u5176\u53d1\u9001\u5230\u6307\u5b9a\u7684\u65e5\u5fd7\u78c1\u76d8\u4e2d\u3002sidecar \u5bb9\u5668\u4f7f\u7528 logrotate \u5de5\u5177\u81ea\u52a8\u6e05\u7406\u548c\u5f52\u6863\u65e5\u5fd7\u3002</p> <p>\u5728\u96c6\u7fa4\u5b9e\u4f8b\u7684 YAML \u914d\u7f6e\u6587\u4ef6\u4e2d\uff0c\u901a\u8fc7<code>spec.logRotate</code>\u5b57\u6bb5\u5f00\u542f\u65e5\u5fd7\u8f6e\u8f6c\u529f\u80fd\uff0c\u540c\u65f6\u5728<code>spec.&lt;graphd|metad|storaged&gt;.config</code>\u4e0b\u8bbe\u7f6e<code>timestamp_in_logfile_name</code>\u503c\u4e3a<code>false</code>\u4ee5\u81ea\u52a8\u5bf9\u5404\u670d\u52a1\u65e5\u5fd7\u8fdb\u884c\u6e05\u7406\u548c\u5f52\u6863\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u65e5\u5fd7\u8f6e\u8f6c\u529f\u80fd\u662f\u5173\u95ed\u7684\u3002\u4e3a NebulaGraph \u5404\u4e2a\u670d\u52a1\u90fd\u5f00\u542f\u65e5\u5fd7\u8f6e\u8f6c\u529f\u80fd\u793a\u4f8b\u5982\u4e0b\uff1a</p> <pre><code>...\nspec:\n  graphd:\n    config:\n      # \u662f\u5426\u5728\u65e5\u5fd7\u6587\u4ef6\u540d\u4e2d\u5305\u542b\u65f6\u95f4\u6233\uff0c\u9700\u8bbe\u7f6e\u4e3a false \u4ee5\u5b9e\u73b0\u65e5\u5fd7\u8f6e\u8f6c\u3002\u9ed8\u8ba4\u503c\u4e3a true\u3002\n      \"timestamp_in_logfile_name\": \"false\"\n  metad:\n    config:\n      \"timestamp_in_logfile_name\": \"false\"\n  storaged:\n    config:\n      \"timestamp_in_logfile_name\": \"false\"\n  logRotate: # \u65e5\u5fd7\u8f6e\u8f6c\u914d\u7f6e\n    # \u65e5\u5fd7\u6587\u4ef6\u5728\u88ab\u5220\u9664\u524d\u4f1a\u88ab\u8f6e\u8f6c\u7684\u6b21\u6570\u3002\u9ed8\u8ba4\u503c\u4e3a 5\uff0c0 \u8868\u793a\u5220\u9664\u524d\u4e0d\u4f1a\u88ab\u8f6e\u8f6c\u3002\n    rotate: 5\n    # \u4ec5\u5f53\u65e5\u5fd7\u6587\u4ef6\u589e\u957f\u8d85\u8fc7\u5b9a\u4e49\u7684\u5b57\u8282\u5927\u5c0f\u65f6\u624d\u4f1a\u8f6e\u8f6c\u65e5\u5fd7\u6587\u4ef6\u3002\u9ed8\u8ba4\u503c\u4e3a 200M\u3002\n    size: \"200M\"\n</code></pre>"},{"location":"k8s-operator/4.cluster-administration/4.5.logging/#_4","title":"\u6536\u96c6\u65e5\u5fd7","text":"<p>\u5982\u679c\u4e0d\u60f3\u6302\u8f7d\u989d\u5916\u7684\u65e5\u5fd7\u78c1\u76d8\u5907\u4efd\u65e5\u5fd7\u6587\u4ef6\uff0c\u6216\u8005\u60f3\u901a\u8fc7\u8bf8\u5982 fluent-bit \u4e4b\u7c7b\u7684\u670d\u52a1\u6536\u96c6\u65e5\u5fd7\u5e76\u5c06\u5176\u53d1\u9001\u5230\u65e5\u5fd7\u4e2d\u5fc3\uff0c\u53ef\u4ee5\u914d\u7f6e\u65e5\u5fd7\u81f3\u6807\u51c6\u9519\u8bef\u8f93\u51fa\u3002Operator \u4f7f\u7528 glog \u5de5\u5177\u5c06\u65e5\u5fd7\u8bb0\u5f55\u5230\u6807\u51c6\u9519\u8bef\u8f93\u51fa\u3002</p> <p>Note</p> <p>\u76ee\u524d Operator \u4ec5\u6536\u96c6\u6807\u51c6\u9519\u8bef\u65e5\u5fd7\u3002</p> <p>\u5728\u96c6\u7fa4\u5b9e\u4f8b\u7684 YAML \u914d\u7f6e\u6587\u4ef6\u4e2d\uff0c\u53ef\u4ee5\u5728\u5404\u4e2a\u670d\u52a1\u4e0b\u7684<code>config</code>\u548c<code>env</code>\u5b57\u6bb5\u4e2d\u914d\u7f6e\u65e5\u5fd7\u8bb0\u5f55\u5230\u6807\u51c6\u9519\u8bef\u8f93\u51fa\u3002</p> <pre><code>...\nspec:\n  graphd:\n    config:\n      # \u662f\u5426\u5c06\u6807\u51c6\u9519\u8bef\u91cd\u5b9a\u5411\u5230\u5355\u72ec\u7684\u8f93\u51fa\u6587\u4ef6\u3002\u9ed8\u8ba4\u503c\u4e3a false\uff0c\u8868\u793a\u4e0d\u91cd\u5b9a\u5411\u3002\n      redirect_stdout: \"false\"\n      # \u65e5\u5fd7\u5185\u5bb9\u7684\u4e25\u91cd\u7a0b\u5ea6\u7ea7\u522b\uff1aINFO\u3001WARNING\u3001ERROR \u548c FATAL\u3002\u53d6\u503c\u5206\u522b\u4e3a 0\u30011\u30012 \u548c 3\u3002\n      stderrthreshold: \"0\"\n    env: \n    - name: GLOG_logtostderr # \u65e5\u5fd7\u5199\u5165\u6807\u51c6\u9519\u8bef\u800c\u4e0d\u662f\u6587\u4ef6\u3002\n      value: \"1\" # 1 \u8868\u793a\u5199\u5165\u6807\u51c6\u9519\u8bef\uff0c0 \u8868\u793a\u5199\u5165\u6587\u4ef6\u4e2d\u3002\n    image: vesoft/nebula-graphd\n    replicas: 1\n    resources:\n      requests:\n        cpu: 500m\n        memory: 500Mi\n    service:\n      externalTrafficPolicy: Local\n      type: NodePort\n    version: vmaster\n  metad:\n    config:\n      redirect_stdout: \"false\"\n      stderrthreshold: \"0\"\n    dataVolumeClaim:\n      resources:\n        requests:\n          storage: 1Gi\n      storageClassName: ebs-sc\n    env:\n    - name: GLOG_logtostderr\n      value: \"1\"\n    image: vesoft/nebula-metad\n  ...\n</code></pre>"},{"location":"k8s-operator/4.cluster-administration/4.1.installation/4.1.1.cluster-install/","title":"\u4f7f\u7528 NebulaGraph Operator \u5b89\u88c5 NebulaGraph \u96c6\u7fa4","text":"<p>\u91c7\u7528 NebulaGraph Operator \u5b89\u88c5 NebulaGraph \u96c6\u7fa4\uff0c\u80fd\u591f\u5b9e\u73b0\u96c6\u7fa4\u7ba1\u7406\u7684\u81ea\u52a8\u5316\uff0c\u540c\u65f6\u5177\u5907\u81ea\u52a8\u9519\u8bef\u6062\u590d\u7684\u529f\u80fd\u3002\u672c\u6587\u4ecb\u7ecd<code>kubectl apply</code>\u548c<code>helm</code>\u4e24\u79cd\u65b9\u5f0f\u6765\u4f7f\u7528 NebulaGraph Operator \u5b89\u88c5 NebulaGraph \u96c6\u7fa4\u3002</p> <p>\u5386\u53f2\u7248\u672c\u517c\u5bb9\u6027</p> <p>1.x \u7248\u672c\u7684 NebulaGraph Operator \u4e0d\u517c\u5bb9 3.x \u4ee5\u4e0b\u7248\u672c\u7684 NebulaGraph \u3002</p>"},{"location":"k8s-operator/4.cluster-administration/4.1.installation/4.1.1.cluster-install/#_1","title":"\u524d\u63d0\u6761\u4ef6","text":"<ul> <li>\u5b89\u88c5 NebulaGraph Operator</li> <li>\u5df2\u521b\u5efa StorageClass</li> </ul>"},{"location":"k8s-operator/4.cluster-administration/4.1.installation/4.1.1.cluster-install/#kubectl_apply","title":"\u4f7f\u7528<code>kubectl apply</code>","text":"<ol> <li> <p>\u521b\u5efa\u547d\u540d\u7a7a\u95f4\uff0c\u7528\u4e8e\u5b58\u653e NebulaGraph \u96c6\u7fa4\u76f8\u5173\u8d44\u6e90\u3002\u4f8b\u5982\uff0c\u521b\u5efa<code>nebula</code>\u547d\u540d\u7a7a\u95f4\u3002</p> <pre><code>kubectl create namespace nebula\n</code></pre> </li> <li> <p>\u521b\u5efa\u96c6\u7fa4\u7684 YAML \u914d\u7f6e\u6587\u4ef6<code>nebulacluster.yaml</code>\u3002\u4f8b\u5982\uff0c\u521b\u5efa\u540d\u4e3a<code>nebula</code>\u7684\u96c6\u7fa4\u3002</p> \u5c55\u5f00\u67e5\u770b<code>nebula</code>\u96c6\u7fa4\u7684\u793a\u4f8b\u914d\u7f6e <pre><code>apiVersion: apps.nebula-graph.io/v1alpha1\nkind: NebulaCluster\nmetadata:\n  name: nebula\n  namespace: default\nspec:\n  # \u63a7\u5236 Pod \u7684\u8c03\u5ea6\u7b56\u7565\u3002\n  topologySpreadConstraints:\n  - topologyKey: \"kubernetes.io/hostname\"\n    whenUnsatisfiable: \"ScheduleAnyway\"\n  # \u662f\u5426\u56de\u6536 PV\u3002\n  enablePVReclaim: false\n  # \u662f\u5426\u542f\u7528\u5907\u4efd\u548c\u6062\u590d\u529f\u80fd\u3002\n  exporter:\n    image: vesoft/nebula-stats-exporter\n    version: v3.3.0\n    replicas: 1\n    maxRequests: 20\n  # \u81ea\u5b9a\u4e49 Agent \u955c\u50cf\uff0c\u7528\u4e8e\u96c6\u7fa4\u5907\u4efd\u548c\u6062\u590d\u53ca\u65e5\u5fd7\u6e05\u7406\u3002\n  agent:\n    image: vesoft/nebula-agent\n    version: latest\n    resources:\n      requests:\n        cpu: \"100m\"\n        memory: \"128Mi\"\n      limits:\n        cpu: \"200m\"\n        memory: \"256Mi\"  \n  # \u914d\u7f6e\u955c\u50cf\u62c9\u53d6\u7b56\u7565\u3002\n  imagePullPolicy: Always\n  # \u9009\u62e9 Pod \u88ab\u8c03\u5ea6\u7684\u8282\u70b9\u3002\n  nodeSelector:\n    nebula: cloud\n  # \u4f9d\u8d56\u7684\u63a7\u5236\u5668\u540d\u79f0\u3002\n  reference:\n    name: statefulsets.apps\n    version: v1\n  # \u8c03\u5ea6\u5668\u540d\u79f0\u3002\n  schedulerName: default-scheduler   \n  # \u542f\u52a8 NebulaGraph Console \u670d\u52a1\uff0c\u7528\u4e8e\u8fde\u63a5 Graph \u670d\u52a1\u3002\n  console:\n    image: vesoft/nebula-console\n    version: nightly\n    username: \"demo\"\n    password: \"test\"                 \n  # Graph \u670d\u52a1\u7684\u76f8\u5173\u914d\u7f6e\u3002 \n  graphd:\n  # \u7528\u4e8e\u68c0\u6d4b Graph \u670d\u52a1\u662f\u5426\u6b63\u5e38\u8fd0\u884c\u3002\n  #  readinessProbe:\n  #    failureThreshold: 3\n  #    httpGet:\n  #      path: /status\n  #      port: 19669\n  #      scheme: HTTP\n  #    initialDelaySeconds: 40\n  #    periodSeconds: 10\n  #    successThreshold: 1\n  #    timeoutSeconds: 10\n    # Graph \u670d\u52a1\u7684\u5bb9\u5668\u955c\u50cf\u3002\n    image: vesoft/nebula-graphd\n    logVolumeClaim:\n      resources:\n        requests:\n          storage: 2Gi\n      # \u7528\u4e8e\u5b58\u50a8 Graph \u670d\u52a1\u7684\u65e5\u5fd7\u7684\u5b58\u50a8\u7c7b\u540d\u79f0\u3002\n      storageClassName: local-sc\n    # Graph \u670d\u52a1\u7684 Pod \u526f\u672c\u6570\u3002\n    replicas: 1\n    # Graph \u670d\u52a1\u7684\u8d44\u6e90\u914d\u7f6e\u3002\n    resources:\n      limits:\n        cpu: \"1\"\n        memory: 1Gi\n      requests:\n        cpu: 500m\n        memory: 500Mi\n    # Graph \u670d\u52a1\u7684\u7248\u672c\u3002\n    version: vmaster\n    # \u81ea\u5b9a\u4e49 Graph \u670d\u52a1\u7684 flags \u914d\u7f6e\u9879\u3002\n    config: {}\n  # Meta \u670d\u52a1\u7684\u76f8\u5173\u914d\u7f6e\u3002\n  metad:\n  #  readinessProbe:\n  #    failureThreshold: 3\n  #    httpGet:\n  #      path: /status\n  #      port: 19559\n  #      scheme: HTTP\n  #    initialDelaySeconds: 5\n  #    periodSeconds: 5\n  #    successThreshold: 1\n  #   timeoutSeconds: 5\n    # Meta \u670d\u52a1\u7684\u5bb9\u5668\u955c\u50cf\u3002\n    image: vesoft/nebula-metad\n    logVolumeClaim:\n      resources:\n        requests:\n          storage: 2Gi\n      storageClassName: local-sc\n    dataVolumeClaim:\n      resources:\n        requests:\n          storage: 2Gi\n      storageClassName: local-sc\n    replicas: 1\n    resources:\n      limits:\n        cpu: \"1\"\n        memory: 1Gi\n      requests:\n        cpu: 500m\n        memory: 500Mi\n    version: vmaster\n    # \u81ea\u5b9a\u4e49 Meta \u670d\u52a1\u7684 flags \u914d\u7f6e\u9879\u3002\n    config: {}          \n  # Storage \u670d\u52a1\u7684\u76f8\u5173\u914d\u7f6e\u3002\n  storaged:\n  #  readinessProbe:\n  #    failureThreshold: 3\n  #    httpGet:\n  #      path: /status\n  #      port: 19779\n  #      scheme: HTTP\n  #    initialDelaySeconds: 40\n  #    periodSeconds: 10\n  #    successThreshold: 1\n  #    timeoutSeconds: 5\n    # Storage \u670d\u52a1\u7684\u5bb9\u5668\u955c\u50cf\u3002\n    image: vesoft/nebula-storaged\n    logVolumeClaim:\n      resources:\n        requests:\n          storage: 2Gi\n      storageClassName: local-sc\n    dataVolumeClaims:\n    - resources:\n        requests:\n          storage: 2Gi\n      storageClassName: local-sc\n    replicas: 1\n    resources:\n      limits:\n        cpu: \"1\"\n        memory: 1Gi\n      requests:\n        cpu: 500m\n        memory: 500Mi\n    version: vmaster\n    # \u81ea\u5b9a\u4e49 Storage \u670d\u52a1\u7684 flags \u914d\u7f6e\u9879\u3002\n    config: {} \n</code></pre> <p>\u6709\u5173\u53c2\u6570\u7684\u8be6\u7ec6\u8bf4\u660e\uff0c\u8bf7\u53c2\u89c1\u4e0b\u6587\u7684\u96c6\u7fa4\u914d\u7f6e\u53c2\u6570\u3002</p> </li> <li> <p>\u521b\u5efa NebulaGraph \u96c6\u7fa4\u3002</p> <pre><code>kubectl create -f apps_v1alpha1_nebulacluster.yaml -n nebula\n</code></pre> <p>\u8fd4\u56de\uff1a</p> <pre><code>nebulacluster.apps.nebula-graph.io/nebula created\n</code></pre> <p>\u5982\u679c\u4e0d\u901a\u8fc7<code>-n</code>\u6307\u5b9a\u547d\u540d\u7a7a\u95f4\uff0c\u9ed8\u8ba4\u4f7f\u7528<code>default</code>\u547d\u540d\u7a7a\u95f4\u3002</p> </li> <li> <p>\u67e5\u770b NebulaGraph \u96c6\u7fa4\u72b6\u6001\u3002</p> <pre><code>kubectl get nebulaclusters nebula -n nebula\n</code></pre> <p>\u8fd4\u56de\uff1a</p> <pre><code>NAME      READY   GRAPHD-DESIRED   GRAPHD-READY   METAD-DESIRED   METAD-READY   STORAGED-DESIRED   STORAGED-READY   AGE\nnebula    True    1                1              1               1             1                  1                86s\n</code></pre> </li> </ol>"},{"location":"k8s-operator/4.cluster-administration/4.1.installation/4.1.1.cluster-install/#helm","title":"\u4f7f\u7528<code>helm</code>","text":"<ol> <li> <p>\u6dfb\u52a0 NebulaGraph Operator Helm \u4ed3\u5e93\uff08\u5982\u679c\u5df2\u6dfb\u52a0\uff0c\u6267\u884c\u4e0b\u6b65\u9aa4\uff09\u3002</p> <pre><code>helm repo add nebula-operator https://vesoft-inc.github.io/nebula-operator/charts\n</code></pre> </li> <li> <p>\u66f4\u65b0 Helm \u4ed3\u5e93\uff0c\u62c9\u53d6\u6700\u65b0\u4ed3\u5e93\u8d44\u6e90\u3002</p> <pre><code>helm repo update nebula-operator\n</code></pre> </li> <li> <p>\u4e3a\u5b89\u88c5\u96c6\u7fa4\u6240\u9700\u7684\u914d\u7f6e\u53c2\u6570\u8bbe\u7f6e\u73af\u5883\u53d8\u91cf\u3002</p> <pre><code>export NEBULA_CLUSTER_NAME=nebula         # NebulaGraph \u96c6\u7fa4\u7684\u540d\u5b57\u3002\nexport NEBULA_CLUSTER_NAMESPACE=nebula    # NebulaGraph \u96c6\u7fa4\u6240\u5904\u7684\u547d\u540d\u7a7a\u95f4\u7684\u540d\u5b57\u3002\nexport STORAGE_CLASS_NAME=local-sc         # NebulaGraph \u96c6\u7fa4\u7684 StorageClass\u3002\n</code></pre> </li> <li> <p>\u4e3a NebulaGraph \u96c6\u7fa4\u521b\u5efa\u547d\u540d\u7a7a\u95f4\uff08\u5982\u5df2\u521b\u5efa\uff0c\u7565\u8fc7\u6b64\u6b65\uff09\u3002</p> <pre><code>kubectl create namespace \"${NEBULA_CLUSTER_NAMESPACE}\"\n</code></pre> </li> <li> <p>\u67e5\u770b\u521b\u5efa\u96c6\u7fa4\u65f6\uff0c<code>nebula-operator</code>\u7684<code>nebula-cluster</code> chart \u7684\u53ef\u81ea\u5b9a\u4e49\u7684\u914d\u7f6e\u9879\u3002</p> <ul> <li> <p>\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\u67e5\u770b\u6240\u6709\u53ef\u4ee5\u914d\u7f6e\u7684\u53c2\u6570\u3002</p> <pre><code>helm show values nebula-operator/nebula-cluster\n</code></pre> </li> </ul> <ul> <li>\u5355\u51fb nebula-cluster/values.yaml  \u67e5\u770b NebulaGraph \u96c6\u7fa4\u7684\u6240\u6709\u914d\u7f6e\u53c2\u6570\u3002\u5355\u51fb Chart parameters \u67e5\u770b\u53c2\u6570\u7684\u63cf\u8ff0\u53ca\u9ed8\u8ba4\u503c\u3002</li> </ul> </li> <li> <p>\u521b\u5efa NebulaGraph \u96c6\u7fa4\u3002</p> <p>\u901a\u8fc7<code>--set</code>\u53c2\u6570\u81ea\u5b9a\u4e49 NebulaGraph \u96c6\u7fa4\u914d\u7f6e\u9879\u7684\u9ed8\u8ba4\u503c\uff0c\u4f8b\u5982\uff0c<code>--set nebula.storaged.replicas=3</code>\u53ef\u8bbe\u7f6e NebulaGraph \u96c6\u7fa4\u4e2d Storage \u670d\u52a1\u7684\u526f\u672c\u6570\u4e3a 3\u3002</p> <pre><code>helm install \"${NEBULA_CLUSTER_NAME}\" nebula-operator/nebula-cluster \\\n\n    # \u6307\u5b9a\u96c6\u7fa4 chart \u7684\u7248\u672c\uff0c\u4e0d\u6307\u5b9a\u5219\u9ed8\u8ba4\u5b89\u88c5\u6700\u65b0\u7248\u672c chart\u3002\n    # \u6267\u884c helm search repo -l nebula-operator/nebula-cluster \u547d\u4ee4\u53ef\u67e5\u770b\u6240\u6709 chart \u7248\u672c\u3002\n    --version=1.7.5 \\\n    # \u6307\u5b9a NebulaGraph \u96c6\u7fa4\u6240\u5904\u7684\u547d\u540d\u7a7a\u95f4\u3002\n    --namespace=\"${NEBULA_CLUSTER_NAMESPACE}\" \\\n    # \u81ea\u5b9a\u4e49\u96c6\u7fa4\u540d\u79f0\u3002\n    --set nameOverride=\"${NEBULA_CLUSTER_NAME}\" \\\n    --set nebula.storageClassName=\"${STORAGE_CLASS_NAME}\" \\\n    # \u6307\u5b9a NebulaGraph \u96c6\u7fa4\u7684\u7248\u672c\u3002\n    --set nebula.version=vmaster \n</code></pre> </li> <li> <p>\u67e5\u770b NebulaGraph \u96c6\u7fa4 Pod \u7684\u542f\u52a8\u72b6\u6001\u3002</p> <pre><code>kubectl -n \"${NEBULA_CLUSTER_NAMESPACE}\" get pod -l \"app.kubernetes.io/cluster=${NEBULA_CLUSTER_NAME}\"\n</code></pre> <p>\u8fd4\u56de\uff1a </p> <pre><code>NAME                               READY   STATUS    RESTARTS   AGE\nnebula-exporter-854c76989c-mp725   1/1     Running   0          14h\nnebula-graphd-0                    1/1     Running   0          14h\nnebula-graphd-1                    1/1     Running   0          14h\nnebula-metad-0                     1/1     Running   0          14h\nnebula-metad-1                     1/1     Running   0          14h\nnebula-metad-2                     1/1     Running   0          14h\nnebula-storaged-0                  1/1     Running   0          14h\nnebula-storaged-1                  1/1     Running   0          14h\nnebula-storaged-2                  1/1     Running   0          14h\n</code></pre> </li> </ol>"},{"location":"k8s-operator/4.cluster-administration/4.1.installation/4.1.1.cluster-install/#_2","title":"\u96c6\u7fa4\u914d\u7f6e\u53c2\u6570","text":"<p>\u4ee5\u4e0b\u8868\u683c\u5217\u51fa\u4e86\u4f7f\u7528 YAML \u6587\u4ef6\u521b\u5efa NebulaGraph \u96c6\u7fa4\u65f6\uff0c\u53ef\u914d\u7f6e\u7684\u53c2\u6570\u53ca\u63cf\u8ff0\u3002</p> \u53c2\u6570 \u9ed8\u8ba4\u503c \u63cf\u8ff0 <code>metadata.name</code> - \u521b\u5efa\u7684 NebulaGraph \u96c6\u7fa4\u540d\u79f0\u3002 <code>spec.console</code> - \u542f\u52a8 Console \u5bb9\u5668\u7528\u4e8e\u8fde\u63a5 Graph \u670d\u52a1\u3002\u914d\u7f6e\u8be6\u60c5\uff0c\u53c2\u89c1 nebula-console. <code>spec.topologySpreadConstraints</code> - \u63a7\u5236 Pod \u7684\u8c03\u5ea6\u7b56\u7565\u3002\u8be6\u60c5\u53c2\u89c1 Topology Spread Constraints\u3002\u5f53<code>topologyKey</code>\u7684\u503c\u4e3a<code>kubernetes.io/zone</code>\u65f6\uff0c<code>whenUnsatisfiable</code>\u7684\u503c\u9700\u4e3a<code>DoNotSchedule</code>\u5e76\u4e14<code>spec.schedulerName</code>\u7684\u503c\u4e3a<code>nebula-scheduler</code>\u3002 <code>spec.graphd.replicas</code> <code>1</code> Graphd \u670d\u52a1\u7684\u526f\u672c\u6570\u3002 <code>spec.graphd.image</code> <code>vesoft/nebula-graphd</code> Graphd \u670d\u52a1\u7684\u5bb9\u5668\u955c\u50cf\u3002 <code>spec.graphd.version</code> <code>master</code> Graphd \u670d\u52a1\u7684\u7248\u672c\u53f7\u3002 <code>spec.graphd.service</code> \u8bbf\u95ee Graphd \u670d\u52a1\u7684 Service \u914d\u7f6e\u3002 <code>spec.graphd.logVolumeClaim.storageClassName</code> - Graphd \u670d\u52a1\u7684\u65e5\u5fd7\u76d8\u5b58\u50a8\u5377\u7684\u5b58\u50a8\u7c7b\u540d\u79f0\u3002\u4f7f\u7528\u793a\u4f8b\u914d\u7f6e\u65f6\u9700\u8981\u5c06\u5176\u66ff\u6362\u4e3a\u4e8b\u5148\u521b\u5efa\u7684\u5b58\u50a8\u7c7b\u540d\u79f0\uff0c\u53c2\u89c1 Storage Classes \u67e5\u770b\u521b\u5efa\u5b58\u50a8\u7c7b\u8be6\u60c5\u3002 <code>spec.metad.replicas</code> <code>1</code> Metad \u670d\u52a1\u7684\u526f\u672c\u6570\u3002 <code>spec.metad.image</code> <code>vesoft/nebula-metad</code> Metad \u670d\u52a1\u7684\u5bb9\u5668\u955c\u50cf\u3002 <code>spec.metad.version</code> <code>master</code> Metad \u670d\u52a1\u7684\u7248\u672c\u53f7\u3002 <code>spec.metad.dataVolumeClaim.storageClassName</code> - Metad \u670d\u52a1\u7684\u6570\u636e\u76d8\u5b58\u50a8\u914d\u7f6e\u3002\u4f7f\u7528\u793a\u4f8b\u914d\u7f6e\u65f6\u9700\u8981\u5c06\u5176\u66ff\u6362\u4e3a\u4e8b\u5148\u521b\u5efa\u7684\u5b58\u50a8\u7c7b\u540d\u79f0\uff0c\u53c2\u89c1 Storage Classes \u67e5\u770b\u521b\u5efa\u5b58\u50a8\u7c7b\u8be6\u60c5\u3002 <code>spec.metad.logVolumeClaim.storageClassName</code> - Metad \u670d\u52a1\u7684\u65e5\u5fd7\u76d8\u5b58\u50a8\u914d\u7f6e\u3002\u4f7f\u7528\u793a\u4f8b\u914d\u7f6e\u65f6\u9700\u8981\u5c06\u5176\u66ff\u6362\u4e3a\u4e8b\u5148\u521b\u5efa\u7684\u5b58\u50a8\u7c7b\u540d\u79f0\uff0c\u53c2\u89c1 Storage Classes \u67e5\u770b\u521b\u5efa\u5b58\u50a8\u7c7b\u8be6\u60c5\u3002 <code>spec.storaged.replicas</code> <code>3</code> Storaged \u670d\u52a1\u7684\u526f\u672c\u6570\u3002 <code>spec.storaged.image</code> <code>vesoft/nebula-storaged</code> Storaged \u670d\u52a1\u7684\u5bb9\u5668\u955c\u50cf\u3002 <code>spec.storaged.version</code> <code>master</code> Storaged \u670d\u52a1\u7684\u7248\u672c\u53f7\u3002 <code>spec.storaged.dataVolumeClaims.resources.requests.storage</code> - Storaged \u670d\u52a1\u7684\u6570\u636e\u76d8\u5b58\u50a8\u5927\u5c0f\uff0c\u53ef\u6307\u5b9a\u591a\u5757\u6570\u636e\u76d8\u5b58\u50a8\u6570\u636e\u3002\u5f53\u6307\u5b9a\u591a\u5757\u6570\u636e\u76d8\u65f6\uff0c\u8def\u5f84\u4e3a\uff1a<code>/usr/local/nebula/data1</code>\u3001<code>/usr/local/nebula/data2</code>\u7b49\u3002 <code>spec.storaged.dataVolumeClaims.storageClassName</code> - Storaged \u670d\u52a1\u7684\u6570\u636e\u76d8\u5b58\u50a8\u914d\u7f6e\u3002\u4f7f\u7528\u793a\u4f8b\u914d\u7f6e\u65f6\u9700\u8981\u5c06\u5176\u66ff\u6362\u4e3a\u4e8b\u5148\u521b\u5efa\u7684\u5b58\u50a8\u7c7b\u540d\u79f0\uff0c\u53c2\u89c1 Storage Classes \u67e5\u770b\u521b\u5efa\u5b58\u50a8\u7c7b\u8be6\u60c5\u3002 <code>spec.storaged.logVolumeClaim.storageClassName</code> - Storaged \u670d\u52a1\u7684\u65e5\u5fd7\u76d8\u5b58\u50a8\u914d\u7f6e\u3002\u4f7f\u7528\u793a\u4f8b\u914d\u7f6e\u65f6\u9700\u8981\u5c06\u5176\u66ff\u6362\u4e3a\u4e8b\u5148\u521b\u5efa\u7684\u5b58\u50a8\u7c7b\u540d\u79f0\uff0c\u53c2\u89c1 Storage Classes \u67e5\u770b\u521b\u5efa\u5b58\u50a8\u7c7b\u8be6\u60c5\u3002 <code>spec.&lt;metad|storaged|graphd&gt;.securityContext</code> <code>{}</code> \u5b9a\u4e49\u96c6\u7fa4\u5bb9\u5668\u7684\u6743\u9650\u548c\u8bbf\u95ee\u63a7\u5236\uff0c\u4ee5\u63a7\u5236\u8bbf\u95ee\u548c\u6267\u884c\u5bb9\u5668\u7684\u64cd\u4f5c\u3002\u8be6\u60c5\u53c2\u89c1 SecurityContext\u3002 <code>spec.agent</code> <code>{}</code> Agent \u670d\u52a1\u7684\u914d\u7f6e\u3002\u7528\u4e8e\u5907\u4efd\u548c\u6062\u590d\u53ca\u65e5\u5fd7\u6e05\u7406\u529f\u80fd\uff0c\u5982\u679c\u4e0d\u81ea\u5b9a\u4e49\u8be5\u914d\u7f6e\uff0c\u5c06\u4f7f\u7528\u9ed8\u8ba4\u914d\u7f6e\u3002 <code>spec.reference.name</code> <code>{}</code> \u4f9d\u8d56\u7684\u63a7\u5236\u5668\u540d\u79f0\u3002 <code>spec.schedulerName</code> <code>default-scheduler</code> \u8c03\u5ea6\u5668\u540d\u79f0\u3002 <code>spec.imagePullPolicy</code> <code>Always</code> NebulaGraph \u955c\u50cf\u7684\u62c9\u53d6\u7b56\u7565\u3002\u5173\u4e8e\u62c9\u53d6\u7b56\u7565\u8be6\u60c5\uff0c\u8bf7\u53c2\u8003 Image pull policy\u3002 <code>spec.logRotate</code> <code>{}</code> \u65e5\u5fd7\u8f6e\u8f6c\u914d\u7f6e\u3002\u8be6\u60c5\u53c2\u89c1\u7ba1\u7406\u96c6\u7fa4\u65e5\u5fd7\u3002 <code>spec.enablePVReclaim</code> <code>false</code> \u5b9a\u4e49\u662f\u5426\u5728\u5220\u9664\u96c6\u7fa4\u540e\u81ea\u52a8\u5220\u9664 PVC \u4ee5\u91ca\u653e\u6570\u636e\u3002\u8be6\u60c5\u53c2\u89c1\u56de\u6536 PV\u3002"},{"location":"k8s-operator/4.cluster-administration/4.1.installation/4.1.2.cluster-upgrade/","title":"\u4f7f\u7528 NebulaGraph Operator \u5347\u7ea7 NebulaGraph \u96c6\u7fa4\u7248\u672c","text":"<p>\u672c\u6587\u4ecb\u7ecd\u5982\u4f55\u4f7f\u7528 NebulaGraph Operator \u5728 Kubernetes \u73af\u5883\u4e2d\u5347\u7ea7 NebulaGraph \u96c6\u7fa4\u7684\u7248\u672c\u3002</p> <p>\u5386\u53f2\u7248\u672c\u517c\u5bb9\u6027</p> <p>1.x \u7248\u672c\u7684 NebulaGraph Operator \u4e0d\u517c\u5bb9 3.x \u4ee5\u4e0b\u7248\u672c\u7684 NebulaGraph\u3002</p>"},{"location":"k8s-operator/4.cluster-administration/4.1.installation/4.1.2.cluster-upgrade/#_1","title":"\u4f7f\u7528\u9650\u5236","text":"<ul> <li>\u53ea\u652f\u6301\u5347\u7ea7\u4f7f\u7528 NebulaGraph Operator \u521b\u5efa\u7684 NebulaGraph \u96c6\u7fa4\u3002</li> </ul> <ul> <li>\u53ea\u652f\u6301\u5347\u7ea7 NebulaGraph 3.5.0 \u81f3 3.6.0 \u7248\u672c\u3002</li> </ul> <ul> <li>\u5982\u9700\u5347\u7ea7 NebulaGraph \u4f01\u4e1a\u7248\uff0c\u8054\u7cfb\u6211\u4eec\u3002</li> </ul>"},{"location":"k8s-operator/4.cluster-administration/4.1.installation/4.1.2.cluster-upgrade/#_2","title":"\u524d\u63d0\u6761\u4ef6","text":"<p>\u5df2\u521b\u5efa NebulaGraph \u96c6\u7fa4\u3002\u5177\u4f53\u6b65\u9aa4\uff0c\u53c2\u89c1\u521b\u5efa NebulaGraph \u96c6\u7fa4\u3002</p>"},{"location":"k8s-operator/4.cluster-administration/4.1.installation/4.1.2.cluster-upgrade/#kubectl_nebulagraph","title":"\u4f7f\u7528<code>kubectl</code>\u5347\u7ea7 NebulaGraph \u96c6\u7fa4","text":"<p>\u672c\u793a\u4f8b\u4e2d\u5f85\u5347\u7ea7\u7684 NebulaGraph \u7248\u672c\u4e3a 3.5.0\u3002</p> <ol> <li> <p>\u67e5\u770b\u96c6\u7fa4\u4e2d\u670d\u52a1\u7684\u955c\u50cf\u7248\u672c\u3002</p> <pre><code>kubectl get pods -l app.kubernetes.io/cluster=nebula  -o jsonpath=\"{.items[*].spec.containers[*].image}\" |tr -s '[[:space:]]' '\\n' |sort |uniq -c\n</code></pre> <p>\u8fd4\u56de\u793a\u4f8b\uff1a</p> <pre><code>      1 vesoft/nebula-graphd:v3.5.0\n      1 vesoft/nebula-metad:v3.5.0\n      3 vesoft/nebula-storaged:v3.5.0  \n</code></pre> </li> <li> <p>\u7f16\u8f91<code>nebula</code>\u96c6\u7fa4\u914d\u7f6e\uff0c\u5c06\u96c6\u7fa4\u670d\u52a1\u7684<code>version</code>\u7684\u503c\u4ece 3.5.0 \u4fee\u6539\u81f3 master\u3002</p> <ol> <li> <p>\u6253\u5f00<code>nebula</code>\u96c6\u7fa4\u7684 YAML \u6587\u4ef6\u3002</p> <pre><code>kubectl edit nebulacluster nebula -n &lt;namespace&gt;\n</code></pre> </li> <li> <p>\u66f4\u65b0<code>version</code>\u7684\u503c\u3002</p> <p>\u4fee\u6539\u540e\u7684 YAML \u6587\u4ef6\u5185\u5bb9\u5982\u4e0b\uff1a</p> <pre><code>apiVersion: apps.nebula-graph.io/v1alpha1\nkind: NebulaCluster\nmetadata:\n  name: nebula\nspec:\n  graphd:\n    version: master //\u5c06\u503c\u4ece 3.5.0 \u4fee\u6539\u81f3 master\u3002\n    ...\n  metad:\n    version: master //\u5c06\u503c\u4ece 3.5.0 \u4fee\u6539\u81f3 master\u3002\n    ...\n  storaged:\n    version: master //\u5c06\u503c\u4ece 3.5.0 \u4fee\u6539\u81f3 master\u3002\n    ...\n</code></pre> </li> </ol> </li> <li> <p>\u5e94\u7528\u914d\u7f6e\u3002</p> <p>\u4fdd\u5b58 YAML \u6587\u4ef6\u5e76\u9000\u51fa\u540e\uff0cKubernetes \u4f1a\u81ea\u52a8\u66f4\u65b0\u96c6\u7fa4\u7684\u914d\u7f6e\uff0c\u5e76\u5f00\u59cb\u5347\u7ea7\u96c6\u7fa4\u3002</p> </li> <li> <p>\u7b49\u5f85\u7ea6 2 \u5206\u949f\u540e\uff0c\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\u53ef\u67e5\u770b\u5230\u670d\u52a1\u7684\u955c\u50cf\u7248\u672c\u53d8\u66f4\u4e3a master\u3002</p> <pre><code>kubectl get pods -l app.kubernetes.io/cluster=nebula  -o jsonpath=\"{.items[*].spec.containers[*].image}\" |tr -s '[[:space:]]' '\\n' |sort |uniq -c\n</code></pre> <p>\u8fd4\u56de\uff1a</p> <pre><code>      1 vesoft/nebula-graphd:master\n      1 vesoft/nebula-metad:master\n      3 vesoft/nebula-storaged:master  \n</code></pre> </li> </ol>"},{"location":"k8s-operator/4.cluster-administration/4.1.installation/4.1.2.cluster-upgrade/#helm_nebulagraph","title":"\u4f7f\u7528<code>helm</code>\u5347\u7ea7 NebulaGraph \u96c6\u7fa4","text":"<ol> <li> <p>\u66f4\u65b0 Helm \u4ed3\u5e93\uff0c\u62c9\u53d6\u6700\u65b0\u7684\u4ed3\u5e93\u8d44\u6e90\u3002</p> <pre><code>helm repo update\n</code></pre> </li> <li> <p>\u914d\u7f6e Helm \u7684\u73af\u5883\u53d8\u91cf\u3002</p> <pre><code>export NEBULA_CLUSTER_NAME=nebula         # NebulaGraph \u96c6\u7fa4\u7684\u540d\u5b57\u3002\nexport NEBULA_CLUSTER_NAMESPACE=nebula    # NebulaGraph \u96c6\u7fa4\u6240\u5904\u7684\u547d\u540d\u7a7a\u95f4\u7684\u540d\u5b57\u3002\n</code></pre> </li> <li> <p>\u5347\u7ea7 NebulaGraph \u96c6\u7fa4\u3002</p> <p>\u4f8b\u5982\u5347\u7ea7\u81f3 master NebulaGraph \u96c6\u7fa4\u7684\u547d\u4ee4\u5982\u4e0b\u3002</p> <pre><code>helm upgrade \"${NEBULA_CLUSTER_NAME}\" nebula-operator/nebula-cluster \\\n    --namespace=\"${NEBULA_CLUSTER_NAMESPACE}\" \\\n    --set nameOverride=${NEBULA_CLUSTER_NAME} \\\n    --set nebula.version=master\n</code></pre> <p><code>--set nebula.version</code>\u7684\u503c\u6307\u9700\u8981\u5347\u7ea7\u96c6\u7fa4\u7684\u76ee\u6807\u7248\u672c\u53f7\u3002</p> </li> <li> <p>\u67e5\u770b\u96c6\u7fa4\u72b6\u6001\u53ca\u96c6\u7fa4\u7248\u672c\u3002</p> <p>\u67e5\u770b\u96c6\u7fa4\u72b6\u6001\uff1a</p> <pre><code>$ kubectl -n \"${NEBULA_CLUSTER_NAMESPACE}\" get pod -l \"app.kubernetes.io/cluster=${NEBULA_CLUSTER_NAME}\"\nNAME                READY   STATUS    RESTARTS   AGE\nnebula-graphd-0     1/1     Running   0          2m\nnebula-graphd-1     1/1     Running   0          2m\nnebula-metad-0      1/1     Running   0          2m\nnebula-metad-1      1/1     Running   0          2m\nnebula-metad-2      1/1     Running   0          2m\nnebula-storaged-0   1/1     Running   0          2m\nnebula-storaged-1   1/1     Running   0          2m\nnebula-storaged-2   1/1     Running   0          2m\n</code></pre> <p>\u67e5\u770b\u96c6\u7fa4\u7248\u672c\uff1a</p> <pre><code>$ kubectl get pods -l app.kubernetes.io/cluster=nebula  -o jsonpath=\"{.items[*].spec.containers[*].image}\" |tr -s '[[:space:]]' '\\n' |sort |uniq -c\n      1 vesoft/nebula-graphd:master\n      1 vesoft/nebula-metad:master\n      3 vesoft/nebula-storaged:master\n</code></pre> </li> </ol>"},{"location":"k8s-operator/4.cluster-administration/4.1.installation/4.1.2.cluster-upgrade/#_3","title":"\u52a0\u901f\u5347\u7ea7\u8fc7\u7a0b","text":"<p>\u96c6\u7fa4\u7684\u5347\u7ea7\u8fc7\u7a0b\u662f\u4e00\u4e2a\u6eda\u52a8\u66f4\u65b0\u7684\u8fc7\u7a0b\u4e5f\u662f\u8017\u65f6\u7684\u8fc7\u7a0b\uff0c\u56e0\u4e3a Storage \u670d\u52a1\u7684 Leader \u5206\u7247\u526f\u672c\u4f1a\u8fdb\u884c\u72b6\u6001\u8f6c\u79fb\u3002\u7528\u6237\u53ef\u5728\u96c6\u7fa4\u5b9e\u4f8b\u7684 YAML \u6587\u4ef6\u4e2d\u914d\u7f6e<code>enableForceUpdate</code>\u53c2\u6570\uff0c\u6765\u7565\u8fc7 Leader \u5206\u7247\u526f\u672c\u8f6c\u79fb\u64cd\u4f5c\uff0c\u4ee5\u8fbe\u5230\u52a0\u901f\u5347\u7ea7\u7684\u8fc7\u7a0b\u3002\u8be6\u60c5\u53c2\u89c1\u914d\u7f6e\u6eda\u52a8\u66f4\u65b0\u7b56\u7565\u3002</p>"},{"location":"k8s-operator/4.cluster-administration/4.1.installation/4.1.2.cluster-upgrade/#_4","title":"\u6545\u969c\u6392\u67e5","text":"<p>\u5347\u7ea7\u8fc7\u7a0b\u4e2d\uff0c\u5982\u679c\u9047\u5230\u95ee\u9898\uff0c\u67e5\u770b\u96c6\u7fa4\u670d\u52a1 Pod \u7684\u65e5\u5fd7\u3002</p> <pre><code>kubectl logs &lt;pod-name&gt; -n &lt;namespace&gt;\n</code></pre> <p>\u540c\u65f6\uff0c\u68c0\u67e5\u96c6\u7fa4\u7684\u72b6\u6001\u548c\u4e8b\u4ef6\u3002</p> <pre><code>kubectl describe nebulaclusters &lt;cluster-name&gt; -n &lt;namespace&gt;\n</code></pre>"},{"location":"k8s-operator/4.cluster-administration/4.1.installation/4.1.3.cluster-uninstall/","title":"\u5220\u9664\u96c6\u7fa4","text":"<p>\u672c\u6587\u4ecb\u7ecd\u5982\u4f55\u5220\u9664\u4f7f\u7528 NebulaGraph Operator \u521b\u5efa\u7684 NebulaGraph \u96c6\u7fa4\u3002</p>"},{"location":"k8s-operator/4.cluster-administration/4.1.installation/4.1.3.cluster-uninstall/#_2","title":"\u4f7f\u7528\u9650\u5236","text":"<p>\u53ea\u652f\u6301\u5220\u9664\u4f7f\u7528 NebulaGraph Operator \u521b\u5efa\u7684 NebulaGraph \u96c6\u7fa4\u3002</p>"},{"location":"k8s-operator/4.cluster-administration/4.1.installation/4.1.3.cluster-uninstall/#kubectl_nebulagraph","title":"\u4f7f\u7528<code>kubectl</code>\u5220\u9664 NebulaGraph \u96c6\u7fa4","text":"<ol> <li> <p>\u67e5\u770b\u6240\u6709\u521b\u5efa\u7684\u96c6\u7fa4\u3002</p> <pre><code>kubectl get nc --all-namespaces\n</code></pre> <p>\u8fd4\u56de\u793a\u4f8b\uff1a</p> <pre><code>NAMESPACE   NAME      READY   GRAPHD-DESIRED   GRAPHD-READY   METAD-DESIRED   METAD-READY   STORAGED-DESIRED   STORAGED-READY   AGE\ndefault     nebula    True    2                2              3               3             3                  3                38h\nnebula      nebula2   True    1                1              1               1             1                  1                2m7s\n</code></pre> </li> <li> <p>\u5220\u9664\u96c6\u7fa4\u3002\u4f8b\u5982\uff0c\u5220\u9664\u540d\u4e3a<code>nebula2</code>\u7684\u96c6\u7fa4\u3002</p> <pre><code>kubectl delete nc nebula2 -n nebula\n</code></pre> <p>\u8fd4\u56de\u793a\u4f8b\uff1a</p> <pre><code>nebulacluster.nebula-graph.io \"nebula2\" deleted\n</code></pre> </li> <li> <p>\u786e\u8ba4\u5220\u9664\u3002</p> <pre><code>kubectl get nc nebula2 -n nebula\n</code></pre> <p>\u8fd4\u56de\u793a\u4f8b\uff1a</p> <pre><code>No resources found in nebula namespace.\n</code></pre> </li> </ol>"},{"location":"k8s-operator/4.cluster-administration/4.1.installation/4.1.3.cluster-uninstall/#helm_nebulagraph","title":"\u4f7f\u7528<code>helm</code>\u5220\u9664 NebulaGraph \u96c6\u7fa4","text":"<ol> <li> <p>\u67e5\u770b\u6240\u6709\u7684 Helm \u53d1\u5e03\u5b9e\u4f8b\u3002</p> <pre><code>helm list --all-namespaces\n</code></pre> <p>\u8fd4\u56de\u793a\u4f8b\uff1a</p> <pre><code>NAME              NAMESPACE               REVISION    UPDATED                                 STATUS      CHART                   APP VERSION\nnebula            default                 1           2023-11-06 20:16:07.913136377 +0800 CST deployed    nebula-cluster-1.7.1    1.7.1\nnebula-operator   nebula-operator-system  3           2023-11-06 12:06:24.742397418 +0800 CST deployed    nebula-operator-1.7.1   1.7.1\n</code></pre> </li> <li> <p>\u67e5\u770b Helm \u53d1\u5e03\u5b9e\u4f8b\u7684\u8be6\u7ec6\u4fe1\u606f\u3002\u4f8b\u5982\uff0c\u67e5\u770b\u540d\u4e3a<code>nebula</code>\u7684 Helm \u53d1\u5e03\u5b9e\u4f8b\u7684\u96c6\u7fa4\u4fe1\u606f\u3002</p> <pre><code>helm get values nebula -n default\n</code></pre> <p>\u8fd4\u56de\u793a\u4f8b\uff1a</p> <pre><code>USER-SUPPLIED VALUES:\nimagePullSecrets:\n- name: secret_for_pull_image\nnameOverride: nebula # \u96c6\u7fa4\u540d\u79f0\nnebula:\n  graphd:\n    image: reg.vesoft-inc.com/xx\n  metad:\n    image: reg.vesoft-inc.com/xx\n    licenseManagerURL: xxx:9119\n  storageClassName: local-sc\n  storaged:\n    image: reg.vesoft-inc.com/xx\n  version: v1.7.5 # \u96c6\u7fa4\u7248\u672c\n</code></pre> </li> <li> <p>\u5220\u9664 Helm \u53d1\u5e03\u5b9e\u4f8b\u3002\u4f8b\u5982\uff0c\u5220\u9664\u540d\u4e3a<code>nebula</code>\u7684 Helm \u53d1\u5e03\u5b9e\u4f8b\u3002</p> <pre><code>helm uninstall nebula -n default\n</code></pre> <p>\u8fd4\u56de\u793a\u4f8b\uff1a</p> <pre><code>release \"nebula\" uninstalled\n</code></pre> <p>\u5f53 Helm \u53d1\u5e03\u5b9e\u4f8b\u88ab\u5220\u9664\u540e\uff0cNebulaGraph Operator \u4f1a\u81ea\u52a8\u5220\u9664\u4e0e\u8be5\u5b9e\u4f8b\u76f8\u5173\u7684\u6240\u6709 K8s \u8d44\u6e90\u3002</p> </li> <li> <p>\u786e\u8ba4\u96c6\u7fa4\u8d44\u6e90\u88ab\u5220\u9664\u3002</p> <pre><code>kubectl get nc nebula -n default\n</code></pre> <p>\u8fd4\u56de\u793a\u4f8b\uff1a</p> <pre><code>No resources found in default namespace.\n</code></pre> </li> </ol>"},{"location":"k8s-operator/4.cluster-administration/4.4.storage-management/4.4.1.use-local-pv/","title":"NebulaGraph\u96c6\u7fa4\u4e2d\u4f7f\u7528\u672c\u5730\u6301\u4e45\u5316\u5b58\u50a8\u5377","text":"<p>\u672c\u5730\u6301\u4e45\u5316\u5b58\u50a8\u5377\uff08Local Persistent Volumes\uff0cLocal PV\uff09\u5728 K8s \u4e2d\uff0c\u76f4\u63a5\u4f7f\u7528\u8282\u70b9\u7684\u672c\u5730\u78c1\u76d8\u76ee\u5f55\u5b58\u50a8\u5bb9\u5668\u6570\u636e\u3002\u76f8\u6bd4\u7f51\u7edc\u5b58\u50a8\uff0cLocal PV \u63d0\u4f9b\u66f4\u9ad8\u7684 IOPS \u548c\u66f4\u4f4e\u7684\u8bfb\u5199\u5ef6\u8fdf\uff0c\u9002\u5408\u6570\u636e\u5bc6\u96c6\u578b\u5e94\u7528\u3002\u672c\u6587\u4ecb\u7ecd\u5982\u4f55\u5728NebulaGraph\u96c6\u7fa4\u4e2d\u4f7f\u7528 Local PV \u4ee5\u53ca\u5728\u4f7f\u7528 Local PV \u8fc7\u7a0b\u4e2d\u8282\u70b9\u53d1\u751f\u6545\u969c\u7684\u5904\u7406\u65b9\u6cd5\u3002</p> <p>\u867d\u7136\u4f7f\u7528 Local PV \u80fd\u63d0\u5347\u6027\u80fd\uff0c\u4f46\u662f\u4e0d\u540c\u4e8e\u7f51\u7edc\u5b58\u50a8\uff0c\u672c\u5730\u5b58\u50a8\u6570\u636e\u4e0d\u4f1a\u81ea\u52a8\u5907\u4efd\u3002\u5982\u679c\u8282\u70b9\u56e0\u4efb\u4f55\u539f\u56e0\u505c\u6b62\uff0c\u672c\u5730\u5b58\u50a8\u4e0a\u7684\u6240\u6709\u6570\u636e\u53ef\u80fd\u4f1a\u4e22\u5931\u3002\u56e0\u6b64\uff0c\u4f7f\u7528 Local PV \u65f6\uff0c\u9700\u8981\u5728\u670d\u52a1\u53ef\u7528\u6027\u3001\u6570\u636e\u6301\u4e45\u6027\u548c\u7075\u6d3b\u6027\u65b9\u9762\u505a\u51fa\u4e00\u5b9a\u6743\u8861\u53d6\u820d\u3002</p>"},{"location":"k8s-operator/4.cluster-administration/4.4.storage-management/4.4.1.use-local-pv/#_1","title":"\u80cc\u666f\u4fe1\u606f","text":"<p>K8s\u4e2d\uff0c\u6570\u636e\u7684\u6301\u4e45\u5316\u4e3b\u8981\u4f9d\u8d56\u4e8e\u6301\u4e45\u5b58\u50a8\u5377\uff08Persistent Volume\uff0cPV\uff09\u3002K8s \u63d0\u4f9b\u7684 PV \u7c7b\u578b\u4e3b\u8981\u5206\u4e3a\u5927\u81f4\u53ef\u4ee5\u5206\u4e3a\u672c\u5730\u5b58\u50a8\u548c\u7f51\u7edc\u5b58\u50a8\u4e24\u7c7b\u3002\u8be6\u60c5\u53c2\u89c1\u6301\u4e45\u5316\u5b58\u50a8\u5377\u7c7b\u578b\u3002</p>"},{"location":"k8s-operator/4.cluster-administration/4.4.storage-management/4.4.1.use-local-pv/#_2","title":"\u524d\u63d0\u6761\u4ef6","text":"<p>\u5df2\u5b89\u88c5 NebulaGraph Operator\u3002\u8be6\u60c5\u53c2\u89c1\u5b89\u88c5 NebulaGraph Operator\u3002</p>"},{"location":"k8s-operator/4.cluster-administration/4.4.storage-management/4.4.1.use-local-pv/#local_pv","title":"\u4f7f\u7528 Local PV","text":"<p>\u4f7f\u7528 Local PV \u6d89\u53ca\u5230\u914d\u7f6e\u672c\u5730\u5b58\u50a8\u3001\u521b\u5efa Local PV \u7b49\u6b65\u9aa4\u3002\u9759\u6001\u914d\u7f6e PV \u5de5\u5177 Local Persistence Volume Static Provisioner \u53ef\u4ee5\u81ea\u52a8\u5316\u7ba1\u7406 Local PV\u3002 Local PV \u9700\u8981\u5728\u6bcf\u4e2a\u8282\u70b9\u4e0a\u624b\u52a8\u914d\u7f6e\u5b58\u50a8\u5377\uff0c\u653e\u5728\u7279\u5b9a\u76ee\u5f55\u4e0b\u540e\uff0cLocal Persistence Volume Static Provisioner \u5c31\u4f1a\u81ea\u52a8\u4e3a\u5b83\u4eec\u521b\u5efa\u76f8\u5e94\u7684 PV\uff0c\u5e76\u5728\u4e0d\u9700\u8981\u65f6\u6e05\u7406\u8fd9\u4e9b PV\u3002</p> <ol> <li> <p>\u51c6\u5907\u548c\u914d\u7f6e\u672c\u5730\u5b58\u50a8\u76d8\u3002</p> <p>\u9488\u5bf9\u4e0d\u540c\u78c1\u76d8\u6302\u8f7d\u65b9\u5f0f\uff0c\u9700\u8981\u5728\u6bcf\u4e2a\u8282\u70b9\u4e0a\u505a\u4e0d\u540c\u7684\u51c6\u5907\u548c\u914d\u7f6e\u5de5\u4f5c\u3002\u8be6\u60c5\u53c2\u89c1 Prepare and set up local volumes in discovery directory\u3002</p> </li> <li> <p>\u521b\u5efa\u793a\u4f8b\u6587\u4ef6\u540d\u4e3a<code>default_example_storageclass.yaml</code>\u7684 StorageClass\u3002</p> <pre><code>kubectl create -f deployment/kubernetes/example/default_example_storageclass.yaml\n</code></pre> <p>\u8be5 StorageClass \u7684\u914d\u7f6e\u6587\u4ef6\u5185\u5bb9\u5982\u4e0b\u6240\u793a\uff1a</p> <pre><code># Only create this for K8s 1.9+\napiVersion: storage.k8s.io/v1\nkind: StorageClass\nmetadata:\n  name: local-storage\nprovisioner: kubernetes.io/no-provisioner\nvolumeBindingMode: WaitForFirstConsumer\n# Supported policies: Delete, Retain\nreclaimPolicy: Delete\n</code></pre> <p>Note</p> <p>Local PV \u7684<code>volumeBindingMode</code>\u5fc5\u987b\u8bbe\u7f6e\u4e3a<code>WaitForFirstConsumer</code>\u3002\u8be6\u60c5\u53c2\u89c1 How to Use a Local Persistent Volume\u3002</p> </li> <li> <p>\u90e8\u7f72 Local Persistence Volume Static Provisioner\u3002</p> </li> <li> <p>\u67e5\u770b\u81ea\u52a8\u521b\u5efa\u7684 Local PV\u3002</p> <pre><code>$ kubectl get pv\nNAME                CAPACITY    ACCESSMODES   RECLAIMPOLICY   STATUS      CLAIM     STORAGECLASS    REASON    AGE\nlocal-pv-ce05be60   1024220Ki   RWO           Delete          Available             local-storage             26s\n\n$ kubectl describe pv local-pv-ce05be60\nName:     local-pv-ce05be60\nLabels:       &lt;none&gt;\nAnnotations:  pv.kubernetes.io/provisioned-by=local-volume-provisioner-minikube-18f57fb2-a186-11e7-b543-080027d51893\nStorageClass: local-storage\nStatus:       Available\nClaim:\nReclaim Policy:   Delete\nAccess Modes: RWO\nCapacity: 1024220Ki\nNodeAffinity:\n  Required Terms:\n      Term 0:  kubernetes.io/hostname in [my-node]\nMessage:\nSource:\n    Type: LocalVolume (a persistent volume backed by local storage on a node)\n    Path: /mnt/disks/vol1\nEvents:       &lt;none&gt;\n</code></pre> </li> <li> <p>\u5728\u96c6\u7fa4\u914d\u7f6e\u6587\u4ef6\u4e2d\uff0c\u901a\u8fc7<code>spec.storaged.dataVolumeClaims</code>\u6216<code>spec.metad.dataVolumeClaim</code>\u5b9a\u4e49\u7684 PVC \u548c StorageClass \u6765\u7ed1\u5b9a Local PV\u3002\u5177\u4f53\u64cd\u4f5c\u6b65\u9aa4\uff0c\u53c2\u89c1\u521b\u5efaNebulaGraph\u96c6\u7fa4\u3002</p> </li> </ol>"},{"location":"k8s-operator/4.cluster-administration/4.4.storage-management/4.4.1.use-local-pv/#local_pv_1","title":"Local PV \u7684\u6545\u969c\u8f6c\u79fb","text":"<p>\u4f7f\u7528\u7f51\u7edc\u5b58\u50a8\uff08\u5982 AWS EBS\u3001Google Cloud Persistent Disk\u3001Azure Disk Storage\u3001Ceph\u3001NFS \u7b49\uff09\u4f5c\u4e3a PV\uff0c\u5b58\u50a8\u8d44\u6e90\u4e0d\u4f9d\u8d56\u4e8e\u4efb\u4f55\u7279\u5b9a\u8282\u70b9\uff0c\u56e0\u6b64\u65e0\u8bba Pod \u88ab\u8c03\u5ea6\u5230\u54ea\u4e2a\u8282\u70b9\uff0c\u90fd\u80fd\u6302\u8f7d\u5e76\u4f7f\u7528\u6b64\u5b58\u50a8\u8d44\u6e90\u3002\u7136\u800c\uff0c\u4f7f\u7528\u672c\u5730\u5b58\u50a8\u76d8\u4f5c\u4e3a PV \u65f6\uff0c\u7531\u4e8e\u8282\u70b9\u4eb2\u548c\u6027\uff08NodeAffinity\uff09\uff0c\u5b58\u50a8\u8d44\u6e90\u53ea\u80fd\u88ab\u7279\u5b9a\u8282\u70b9\u4e0a\u7684 Pod \u4f7f\u7528\u3002</p> <p>NebulaGraph\u7684 Storage \u670d\u52a1\u5177\u5907\u6570\u636e\u5197\u4f59\u80fd\u529b\uff0c\u53ef\u4ee5\u8bbe\u7f6e\u591a\u4e2a\u5947\u6570\u5206\u7247\u526f\u672c\u3002\u8282\u70b9\u6545\u969c\u65f6\uff0c\u5173\u8054\u5206\u7247\u4f1a\u81ea\u52a8\u8fc1\u79fb\u5230\u5065\u5eb7\u8282\u70b9\u3002\u4f46\u662f\uff0c\u4f7f\u7528 Local PV \u7684 Storage Pod \u7531\u4e8e\u8282\u70b9\u4eb2\u548c\u6027\uff0c\u4e0d\u80fd\u5728\u5176\u4ed6\u8282\u70b9\u8fd0\u884c\uff0c\u5fc5\u987b\u7b49\u5f85\u8282\u70b9\u6062\u590d\u3002\u82e5\u8981\u5728\u5176\u4ed6\u8282\u70b9\u8fd0\u884c\uff0c\u9700\u8981\u89e3\u9664 Pod \u4e0e Local PV \u7684\u7ed1\u5b9a\u3002</p> <p>\u9488\u5bf9\u4f7f\u7528 Local PV \u8fc7\u7a0b\u4e2d\u53d1\u751f\u8282\u70b9\u6545\u969c\u7684\u60c5\u51b5\uff0cNebulaGraph Operator \u652f\u6301\u8fdb\u884c\u81ea\u52a8\u6545\u969c\u8f6c\u79fb\u64cd\u4f5c\u3002\u901a\u8fc7\u5728\u96c6\u7fa4\u7684\u914d\u7f6e\u6587\u4ef6\u4e2d\u8bbe\u7f6e<code>spec.enableAutoFailover</code>\u4e3a<code>true</code>\uff0c\u81ea\u52a8\u89e3\u9664 Pod \u4e0e Local PV \u7684\u7ed1\u5b9a\uff0c\u4ece\u800c\u4f7f Pod \u80fd\u5728\u5176\u4ed6\u8282\u70b9\u4e0a\u8fd0\u884c\u3002</p> <p>\u793a\u4f8b\u5982\u4e0b\uff1a</p> <pre><code>...\nspec:\n  # \u5f00\u542f\u81ea\u52a8\u6545\u969c\u8f6c\u79fb\n  enableAutoFailover: true\n  # Storage \u670d\u52a1\u4e3a`OFFLINE`\u72b6\u6001\u540e\u7b49\u5f85\u81ea\u52a8\u6545\u969c\u8f6c\u79fb\u7684\u65f6\u95f4\u3002\n  # \u9ed8\u8ba4\u503c 5 \u5206\u949f\u3002\n  # \u5982\u679c Storage \u670d\u52a1\u5728\u6b64\u671f\u95f4\u5185\u6062\u590d\u6b63\u5e38\u72b6\u6001\uff0c\u4e0d\u4f1a\u89e6\u53d1\u6545\u969c\u8f6c\u79fb\u3002\n  failoverPeriod: \"2m\"\n  ...\n</code></pre>"},{"location":"k8s-operator/4.cluster-administration/4.4.storage-management/4.4.2.pv-expansion/","title":"\u52a8\u6001\u5728\u7ebf\u6269\u5bb9\u5b58\u50a8\u5377","text":"<p>\u5728 K8s \u73af\u5883\u4e2d\uff0cNebulaGraph \u7684\u6570\u636e\u5b58\u50a8\u5728\u6301\u4e45\u5316\u5b58\u50a8\u5377\uff08PV\uff09\u4e0a\u3002\u52a8\u6001\u5728\u7ebf\u6269\u5bb9\u5b58\u50a8\u5377\u6307\u7684\u662f\u5728\u4e0d\u505c\u673a\u7684\u60c5\u51b5\u4e0b\u589e\u52a0\u5b58\u50a8\u5377\u7684\u5bb9\u91cf\uff0c\u4ee5\u6ee1\u8db3 NebulaGraph \u6570\u636e\u589e\u957f\u7684\u9700\u6c42\u3002\u672c\u6587\u4ecb\u7ecd\u5982\u4f55\u5728 K8s \u73af\u5883\u4e2d\u4e3a NebulaGraph \u7684\u670d\u52a1\u52a8\u6001\u5728\u7ebf\u6269\u5bb9\u5b58\u50a8\u5377\u3002</p> <p>Note</p> <ul> <li>\u96c6\u7fa4\u521b\u5efa\u540e\uff0c\u4e0d\u652f\u6301\u5728\u96c6\u7fa4\u8fd0\u884c\u65f6\u52a8\u6001\u589e\u52a0 PV \u7684\u6570\u91cf\u3002</li> <li>\u672c\u6587\u4ecb\u7ecd\u7684\u65b9\u6cd5\u4ec5\u4f7f\u7528\u5728\u7ebf\u6269\u5bb9\u5b58\u50a8\u5377\uff0c\u4e0d\u652f\u6301\u5728\u7ebf\u7f29\u5bb9\u5b58\u50a8\u5377\u3002</li> </ul>"},{"location":"k8s-operator/4.cluster-administration/4.4.storage-management/4.4.2.pv-expansion/#_2","title":"\u80cc\u666f\u4fe1\u606f","text":"<p>K8s \u4e2d\uff0cStorageClass \u662f\u5b9a\u4e49\u4e86\u4e00\u79cd\u5b58\u50a8\u7c7b\u578b\u7684\u8d44\u6e90\uff0c\u5b83\u63cf\u8ff0\u4e86\u4e00\u79cd\u5b58\u50a8\u7684\u7c7b\uff0c\u5305\u62ec\u5b58\u50a8\u7684\u63d0\u4f9b\u8005\uff08provisioner\uff09\u3001\u53c2\u6570\u548c\u5176\u4ed6\u7ec6\u8282\u3002\u5f53\u521b\u5efa\u4e00\u4e2a PersistentVolumeClaim\uff08PVC\uff09\u5e76\u6307\u5b9a\u4e00\u4e2a StorageClass \u65f6\uff0cK8s \u4f1a\u81ea\u52a8\u521b\u5efa\u4e00\u4e2a\u5bf9\u5e94\u7684 PV\u3002\u52a8\u6001\u6269\u5bb9\u5b58\u50a8\u5377\u7684\u539f\u7406\u662f\u7f16\u8f91 PVC \u5e76\u589e\u52a0\u5b58\u50a8\u5377\u7684\u5bb9\u91cf\uff0c\u7136\u540e K8s \u4f1a\u6839\u636e PVC \u4e2d\u6307\u5b9a\u7684<code>storageClassName</code>\u81ea\u52a8\u6269\u5bb9\u8be5 PVC \u5bf9\u5e94\u7684 PV \u7684\u5bb9\u91cf\u3002\u5728\u8fd9\u4e2a\u8fc7\u7a0b\u4e2d\uff0c\u4e0d\u4f1a\u521b\u5efa\u65b0\u7684 PV\uff0c\u800c\u662f\u6539\u53d8\u73b0\u6709\u7684 PV \u7684\u5bb9\u91cf\u5927\u5c0f\u3002\u53ea\u6709\u52a8\u6001\u5b58\u50a8\u5377\u624d\u652f\u6301\u5b58\u50a8\u5377\u7684\u52a8\u6001\u6269\u5bb9\uff0c\u5373\u914d\u7f6e\u4e86<code>storageClassName</code>\u7684 PVC\u3002\u540c\u65f6 StorageClass \u7684<code>allowVolumeExpansion</code>\u5b57\u6bb5\u5fc5\u987b\u4e3a<code>true</code>\u3002\u8be6\u60c5\u53c2\u89c1 Expanding Persistent Volumes Claims\u3002</p> <p>\u5728 Operator \u4e2d\uff0c\u4e0d\u80fd\u76f4\u63a5\u7f16\u8f91 PVC\uff0c\u56e0\u4e3a Operator \u4f1a\u6839\u636e NebulaGraph \u96c6\u7fa4\u670d\u52a1\u7684\u914d\u7f6e<code>spec.&lt;metad|storaged&gt;.dataVolumeClaim</code>\u81ea\u52a8\u521b\u5efa PVC\u3002\u56e0\u6b64\uff0c\u9700\u8981\u901a\u8fc7\u4fee\u6539\u96c6\u7fa4\u7684\u914d\u7f6e\u6765\u5b9e\u73b0 PVC \u7684\u914d\u7f6e\u66f4\u65b0\uff0c\u7136\u540e\u81ea\u52a8\u89e6\u53d1 PV \u7684\u52a8\u6001\u5728\u7ebf\u6269\u5bb9\u3002</p>"},{"location":"k8s-operator/4.cluster-administration/4.4.storage-management/4.4.2.pv-expansion/#_3","title":"\u524d\u63d0\u6761\u4ef6","text":"<ul> <li>K8s \u7684\u7248\u672c\u7b49\u4e8e\u6216\u9ad8\u4e8e 1.18\u3002</li> <li>\u5df2\u5728 K8s \u73af\u5883\u4e2d\u521b\u5efa StorageClass\u3002\u8be6\u60c5\u53c2\u89c1 Expanding Persistent Volumes Claims\u3002<ul> <li>\u786e\u4fdd StorageClass \u914d\u7f6e\u4e86<code>allowVolumeExpansion</code>\u5b57\u6bb5\u5e76\u4e14\u503c\u4e3a<code>true</code>\u3002</li> <li>\u786e\u4fdd StorageClass \u914d\u7f6e\u7684<code>provisioner</code>\u652f\u6301\u52a8\u6001\u6269\u5bb9\u3002</li> </ul> </li> <li>\u5728 K8s \u4e2d\u521b\u5efa\u4e00\u4e2a NebulaGraph \u96c6\u7fa4\u3002\u5177\u4f53\u6b65\u9aa4\uff0c\u53c2\u89c1\u521b\u5efa NebulaGraph \u96c6\u7fa4\u3002</li> <li>NebulaGraph \u96c6\u7fa4 Pod \u5904\u4e8e\u8fd0\u884c\u72b6\u6001\u3002</li> </ul>"},{"location":"k8s-operator/4.cluster-administration/4.4.storage-management/4.4.2.pv-expansion/#_4","title":"\u5728\u7ebf\u6269\u5bb9\u5b58\u50a8\u5377\u793a\u4f8b","text":"<p>\u4ee5\u4e0b\u793a\u4f8b\u5047\u8bbe StorageClass \u7684\u540d\u79f0\u4e3a<code>ebs-sc</code>\uff0cNebulaGraph \u96c6\u7fa4\u7684\u540d\u79f0\u4e3a<code>nebula</code>\uff0c\u6f14\u793a\u5982\u4f55\u5728\u7ebf\u6269\u5bb9 Storage \u670d\u52a1\u7684\u5b58\u50a8\u5377\u3002</p> <ol> <li> <p>\u67e5\u770b Storage \u670d\u52a1 Pod \u7684\u72b6\u6001\u3002</p> <pre><code>kubectl get pod\n</code></pre> <p>\u793a\u4f8b\u8f93\u51fa\uff1a <pre><code>nebula-storaged-0                                                1/1     Running   0                43h\n</code></pre></p> </li> <li> <p>\u67e5\u770b Storage \u670d\u52a1\u7684 PVC \u548c PV \u4fe1\u606f\u3002</p> <pre><code># \u67e5\u770b PVC \u4fe1\u606f\nkubectl get pvc\n</code></pre> <p>\u793a\u4f8b\u8f93\u51fa\uff1a <pre><code>storaged-data-nebula-storaged-0   Bound    pvc-36ca3871-9265-460f-b812-7e73a718xxxx   5Gi        RWO            ebs-sc     43h\n</code></pre></p> <pre><code># \u67e5\u770b PV \u4fe1\u606f\uff0c\u786e\u8ba4 PV \u7684\u5bb9\u91cf\u4e3a 5Gi\nkubectl get pv\n</code></pre> <p>\u793a\u4f8b\u8f93\u51fa\uff1a</p> <pre><code>pvc-36ca3871-9265-460f-b812-xxx   5Gi        RWO            Delete           Bound       default/storaged-data-nebula-storaged-0   ebs-sc              43h\n</code></pre> </li> <li> <p>\u5728\u7b26\u5408\u524d\u63d0\u6761\u4ef6\u7684\u60c5\u51b5\u4e0b\uff0c\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\u8bf7\u6c42\u6269\u5bb9 Storage \u670d\u52a1\u7684\u5b58\u50a8\u5377\u81f3 10Gi\u3002</p> <pre><code>kubectl patch nc nebula --type='merge' --patch '{\"spec\": {\"storaged\": {\"dataVolumeClaims\":[{\"resources\": {\"requests\": {\"storage\": \"10Gi\"}}, \"storageClassName\": \"ebs-sc\"}]}}}'\n</code></pre> <p>\u793a\u4f8b\u8f93\u51fa\uff1a <pre><code>nebulacluster.apps.nebula-graph.io/nebula patched\n</code></pre></p> </li> <li> <p>\u7b49\u5f85\u4e00\u5206\u949f\u5de6\u53f3\u67e5\u770b\u6269\u5bb9\u540e\u7684 PVC \u548c PV \u4fe1\u606f\u3002</p> <pre><code>kubectl get pvc\n</code></pre> <p>\u793a\u4f8b\u8f93\u51fa\uff1a <pre><code>storaged-data-nebula-storaged-0   Bound    pvc-36ca3871-9265-460f-b812-7e73a718xxxx   10Gi        RWO            ebs-sc     43h\n</code></pre></p> <pre><code>kubectl get pv\n</code></pre> <p>\u793a\u4f8b\u8f93\u51fa\uff1a <pre><code>pvc-36ca3871-9265-460f-b812-xxx   10Gi        RWO            Delete           Bound       default/storaged-data-nebula-storaged-0   ebs-sc              43h\n</code></pre></p> <p>\u7531\u4e0a\u53ef\u89c1\uff0cPVC \u548c PV \u7684\u5bb9\u91cf\u90fd\u5df2\u6269\u5bb9\u81f3 10Gi\u3002</p> </li> </ol>"},{"location":"k8s-operator/4.cluster-administration/4.4.storage-management/4.4.3.configure-pv-reclaim/","title":"\u56de\u6536 PV","text":"<p>NebulaGraph Operator \u4f7f\u7528\u6301\u4e45\u5316\u5377 PV\uff08Persistent Volume\uff09\u548c\u6301\u4e45\u5316\u5377\u58f0\u660e PVC\uff08Persistent Volume Claim\uff09\u6765\u5b58\u50a8\u6301\u4e45\u5316\u6570\u636e\u3002\u5982\u679c\u7528\u6237\u4e0d\u5c0f\u5fc3\u5220\u9664\u4e86\u4e00\u4e2a NebulaGraph \u96c6\u7fa4\uff0c\u9ed8\u8ba4 PV \u548c PVC \u5bf9\u8c61\u53ca\u5176\u6570\u636e\u4ecd\u53ef\u4fdd\u7559\uff0c\u4ee5\u786e\u4fdd\u6570\u636e\u5b89\u5168\u3002</p> <p>\u7528\u6237\u4e5f\u53ef\u4ee5\u5728\u96c6\u7fa4\u5b9e\u4f8b\u7684\u914d\u7f6e\u6587\u4ef6\u4e2d\u901a\u8fc7\u8bbe\u7f6e\u53c2\u6570<code>spec.enablePVReclaim</code>\u4e3a<code>true</code>\u6765\u5b9a\u4e49\u5728\u5220\u9664\u96c6\u7fa4\u540e\u81ea\u52a8\u5220\u9664 PVC \u4ee5\u91ca\u653e\u6570\u636e\u3002\u81f3\u4e8e\u5728\u5220\u9664 PVC \u540e\u662f\u5426\u5220\u9664 PV\uff0c\u7528\u6237\u9700\u8981\u81ea\u5b9a\u4e49 PV \u7684\u56de\u6536\u7b56\u7565\u3002\u53c2\u89c1 StorageClass \u4e2d\u8bbe\u7f6e reclaimPolicy \u548c PV Reclaiming \u4e86\u89e3 PV \u56de\u6536\u7b56\u7565\u3002</p>"},{"location":"k8s-operator/4.cluster-administration/4.4.storage-management/4.4.3.configure-pv-reclaim/#_1","title":"\u524d\u63d0\u6761\u4ef6","text":"<p>\u5728 K8s \u4e2d\u521b\u5efa\u4e00\u4e2a NebulaGraph \u96c6\u7fa4\u3002\u5177\u4f53\u6b65\u9aa4\uff0c\u53c2\u89c1\u521b\u5efa NebulaGraph \u96c6\u7fa4\u3002</p>"},{"location":"k8s-operator/4.cluster-administration/4.4.storage-management/4.4.3.configure-pv-reclaim/#_2","title":"\u64cd\u4f5c\u6b65\u9aa4","text":"<p>\u4ee5\u4e0b\u793a\u4f8b\u4f7f\u7528\u540d\u4e3a<code>nebula</code>\u7684\u96c6\u7fa4\u3001\u540d\u4e3a<code>nebula_cluster.yaml</code>\u7684 YAML \u914d\u7f6e\u6587\u4ef6\uff0c\u8bf4\u660e\u5982\u4f55\u8bbe\u7f6e<code>enablePVReclaim</code>\uff1a</p> <ol> <li> <p>\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\u8fdb\u5165<code>nebula</code>\u96c6\u7fa4\u7684\u7f16\u8f91\u9875\u9762\u3002</p> <pre><code>kubectl edit nebulaclusters.apps.nebula-graph.io nebula\n</code></pre> </li> <li> <p>\u5728 YAML \u6587\u4ef6\u7684<code>spec</code>\u914d\u7f6e\u9879\u4e2d\uff0c\u6dfb\u52a0<code>enablePVReclaim</code>\u5e76\u8bbe\u7f6e\u5176\u503c\u4e3a<code>true</code>\u3002</p> <pre><code>apiVersion: apps.nebula-graph.io/v1alpha1\nkind: NebulaCluster\nmetadata:\n  name: nebula\nspec:\n  enablePVReclaim: true  //\u8bbe\u7f6e\u5176\u503c\u4e3a true\u3002\n  graphd:\n    image: vesoft/nebula-graphd\n    logVolumeClaim:\n      resources:\n        requests:\n          storage: 2Gi\n      storageClassName: fast-disks\n    replicas: 1\n    resources:\n      limits:\n        cpu: \"1\"\n        memory: 1Gi\n      requests:\n        cpu: 500m\n        memory: 500Mi\n    version: master\n  imagePullPolicy: IfNotPresent\n  metad:\n    dataVolumeClaim:\n      resources:\n        requests:\n          storage: 2Gi\n      storageClassName: fast-disks\n    image: vesoft/nebula-metad\n    logVolumeClaim:\n      resources:\n        requests:\n          storage: 2Gi\n      storageClassName: fast-disks\n    replicas: 1\n    resources:\n      limits:\n        cpu: \"1\"\n        memory: 1Gi\n      requests:\n        cpu: 500m\n        memory: 500Mi\n    version: master\n  nodeSelector:\n    nebula: cloud\n  reference:\n    name: statefulsets.apps\n    version: v1\n  schedulerName: default-scheduler\n  storaged:\n    dataVolumeClaims:\n    - resources:\n        requests:\n          storage: 2Gi\n      storageClassName: fast-disks\n    - resources:\n        requests:\n          storage: 2Gi\n      storageClassName: fast-disks\n    image: vesoft/nebula-storaged\n    logVolumeClaim:\n      resources:\n        requests:\n          storage: 2Gi\n      storageClassName: fast-disks\n    replicas: 3\n    resources:\n      limits:\n        cpu: \"1\"\n        memory: 1Gi\n      requests:\n        cpu: 500m\n        memory: 500Mi\n    version: master\n...    \n</code></pre> </li> <li> <p>\u6267\u884c<code>kubectl apply -f nebula_cluster.yaml</code>\u4f7f\u4e0a\u8ff0\u66f4\u65b0\u751f\u6548\u3002</p> </li> </ol> <p>\u5728\u4e0a\u8ff0\u64cd\u4f5c\u5373<code>enablePVReclaim</code>\u8bbe\u7f6e\u4e3a<code>true</code>\u540e\uff0c\u5f53\u96c6\u7fa4\u5220\u9664\u65f6\uff0c\u7cfb\u7edf\u5c06\u4f1a\u81ea\u52a8\u5220\u9664 PVC \u4ee5\u56de\u6536\u5b58\u50a8\u8d44\u6e90\u3002\u662f\u5426\u5220\u9664 PV\uff0c\u53d6\u51b3\u4e8e PV \u7684\u56de\u6536\u7b56\u7565\u3002</p>"},{"location":"k8s-operator/4.cluster-administration/4.7.security/4.7.2.enable-admission-control/","title":"\u5f00\u542f\u51c6\u5165\u63a7\u5236","text":"<p>K8s \u7684\u51c6\u5165\u63a7\u5236\uff08Admission Control\uff09\u662f\u4e00\u79cd\u5b89\u5168\u673a\u5236\uff0c\u5e76\u5728\u8fd0\u884c\u65f6\u4f5c\u4e3a Webhook \u8fd0\u884c\u3002\u901a\u8fc7\u51c6\u5165 Webhook \u5bf9\u8bf7\u6c42\u8fdb\u884c\u62e6\u622a\u548c\u4fee\u6539\uff0c\u4ece\u800c\u4fdd\u8bc1\u96c6\u7fa4\u7684\u5b89\u5168\u6027\u3002\u51c6\u5165 Webhook \u64cd\u4f5c\u5305\u62ec\u9a8c\u8bc1\uff08Validating\uff09\u548c\u53d8\u66f4\uff08Mutating\uff09\u4e24\u7c7b\u3002NebulaGraph Operator \u4ec5\u652f\u6301\u9a8c\u8bc1\u64cd\u4f5c\uff0c\u5e76\u63d0\u4f9b\u4e00\u4e9b\u9ed8\u8ba4\u7684\u51c6\u5165\u63a7\u5236\u89c4\u5219\u3002\u672c\u6587\u4ecb\u7ecd NebulaGraph Operator \u7684\u9ed8\u8ba4\u51c6\u5165\u63a7\u5236\u89c4\u5219\u53ca\u5982\u4f55\u5f00\u542f\u51c6\u5165\u63a7\u5236\u3002</p>"},{"location":"k8s-operator/4.cluster-administration/4.7.security/4.7.2.enable-admission-control/#_2","title":"\u524d\u63d0\u6761\u4ef6","text":"<p>\u5df2\u4f7f\u7528 K8s \u521b\u5efa\u4e00\u4e2a\u96c6\u7fa4\u3002\u5177\u4f53\u6b65\u9aa4\uff0c\u53c2\u89c1\u521b\u5efa NebulaGraph \u96c6\u7fa4\u3002</p>"},{"location":"k8s-operator/4.cluster-administration/4.7.security/4.7.2.enable-admission-control/#_3","title":"\u51c6\u5165\u63a7\u5236\u89c4\u5219","text":"<p>K8s \u7684\u51c6\u5165\u63a7\u5236\u5141\u8bb8\u7528\u6237\u5728 Kubernetes API Server \u5904\u7406\u8bf7\u6c42\u4e4b\u524d\uff0c\u63d2\u5165\u81ea\u5b9a\u4e49\u7684\u903b\u8f91\u6216\u7b56\u7565\u3002\u8fd9\u79cd\u673a\u5236\u53ef\u4ee5\u7528\u4e8e\u5b9e\u73b0\u4e00\u4e9b\u5b89\u5168\u7b56\u7565\uff0c\u6bd4\u5982\u9650\u5236 Pod \u7684\u8d44\u6e90\u4f7f\u7528\u91cf\uff0c\u6216\u8005\u9650\u5236 Pod \u7684\u8bbf\u95ee\u6743\u9650\u7b49\u3002NebulaGraph Operator \u4ec5\u652f\u6301\u9a8c\u8bc1\u64cd\u4f5c\uff0c\u5373\u5bf9\u8bf7\u6c42\u8fdb\u884c\u9a8c\u8bc1\u548c\u62e6\u622a\uff0c\u4e0d\u652f\u6301\u5bf9\u8bf7\u6c42\u8fdb\u884c\u53d8\u66f4\u64cd\u4f5c\u3002NebulaGraph Operator \u9ed8\u8ba4\u7684\u51c6\u5165\u9a8c\u8bc1\u63a7\u5236\u89c4\u5219\u5305\u62ec\uff1a</p> <ul> <li> <p>\u6ee1\u8db3\u9ad8\u53ef\u7528\u6a21\u5f0f\u4e0b\u7684\u6700\u5c0f\u526f\u672c\u6570\uff1a</p> <ul> <li>Graph \u670d\u52a1\uff1a\u81f3\u5c11\u9700\u8981 2 \u4e2a\u526f\u672c\u3002</li> <li>Meta \u670d\u52a1\uff1a\u81f3\u5c11\u9700\u8981 3 \u4e2a\u526f\u672c\u3002</li> <li>Storage \u670d\u52a1\uff1a\u81f3\u5c11\u9700\u8981 3 \u4e2a\u526f\u672c\u3002</li> </ul> <p>Note</p> <p>\u9ad8\u53ef\u7528\u6a21\u5f0f\u662f\u6307 NebulaGraph \u96c6\u7fa4\u670d\u52a1\u7684\u9ad8\u53ef\u7528\u3002Storage \u670d\u52a1\u548c Meta \u670d\u52a1\u662f\u6709\u72b6\u6001\u7684\u670d\u52a1\uff0c\u5176\u526f\u672c\u6570\u636e\u901a\u8fc7 Raft \u534f\u8bae\u4fdd\u6301\u4e00\u81f4\u6027\u4e14\u526f\u672c\u6570\u91cf\u4e0d\u80fd\u4e3a\u5076\u6570\u3002\u56e0\u6b64\uff0c\u9ad8\u53ef\u7528\u6a21\u5f0f\u4e0b\uff0c\u81f3\u5c11\u9700\u8981 3 \u4e2a Storage \u670d\u52a1\u548c 3 \u4e2a Meta \u670d\u52a1\u3002Graph \u670d\u52a1\u4e3a\u65e0\u72b6\u6001\u7684\u670d\u52a1\uff0c\u56e0\u6b64\u5176\u526f\u672c\u6570\u91cf\u53ef\u4ee5\u4e3a\u5076\u6570\uff0c\u4f46\u81f3\u5c11\u9700\u8981 2 \u4e2a\u526f\u672c\u3002</p> </li> </ul> <ul> <li>\u7981\u6b62\u901a\u8fc7<code>dataVolumeClaims</code>\u4e3a Storage \u670d\u52a1\u8ffd\u52a0\u989d\u5916\u7684 PV\u3002</li> </ul> <ul> <li>\u7981\u6b62\u7f29\u5c0f\u6240\u6709\u670d\u52a1\u7684 PVC \u7684\u5bb9\u91cf\uff0c\u4f46\u662f\u53ef\u4ee5\u6269\u5bb9\u3002</li> </ul> <ul> <li>\u7981\u6b62\u5728 Storage \u670d\u52a1\u6269\u7f29\u5bb9\u671f\u95f4\uff0c\u8fdb\u884c\u4efb\u4f55\u4e8c\u6b21\u64cd\u4f5c\u3002</li> </ul>"},{"location":"k8s-operator/4.cluster-administration/4.7.security/4.7.2.enable-admission-control/#webhook","title":"\u4e3a\u51c6\u5165 Webhook \u521b\u5efa\u8bc1\u4e66","text":"<p>\u4e3a\u4e86\u786e\u4fdd\u901a\u4fe1\u7684\u5b89\u5168\u6027\u548c\u6570\u636e\u7684\u5b8c\u6574\u6027\uff0cK8s \u7684 API server \u548c\u51c6\u5165 Webhook \u4e4b\u95f4\u7684\u901a\u4fe1\u9ed8\u8ba4\u901a\u8fc7 HTTPS \u534f\u8bae\u8fdb\u884c\uff0c\u56e0\u6b64\u4f7f\u7528\u51c6\u5165\u63a7\u5236\u8fd8\u9700\u8981\u4e3a\u51c6\u5165 Webhook \u63d0\u4f9b TLS \u8bc1\u4e66\u3002cert-manager \u662f\u4e00\u4e2a K8s \u7684\u8bc1\u4e66\u7ba1\u7406\u63a7\u5236\u5668\uff0c\u53ef\u4ee5\u81ea\u52a8\u5316\u8bc1\u4e66\u7684\u7b7e\u53d1\u548c\u66f4\u65b0\u3002NebulaGraph Operator \u4f7f\u7528 cert-manager \u6765\u7ba1\u7406\u8bc1\u4e66\u3002</p> <p>\u5f53 cert-manager \u5b89\u88c5\u5b8c\u6210\u5e76\u4e14\u5f00\u542f\u51c6\u5165\u63a7\u5236\u65f6\uff0cNebulaGraph Operator \u4f1a\u81ea\u52a8\u521b\u5efa\u4e00\u4e2a Issuer\uff0c\u7528\u4e8e\u7b7e\u53d1\u51c6\u5165 Webhook \u6240\u9700\u7684\u8bc1\u4e66\uff0c\u540c\u65f6\u4f1a\u521b\u5efa\u4e00\u4e2a Certificate\uff0c\u7528\u4e8e\u5b58\u50a8\u7b7e\u53d1\u7684\u8bc1\u4e66\u3002\u7b7e\u53d1\u7684\u8bc1\u4e66\u88ab\u5b58\u50a8\u5728 <code>nebula-operator-webhook-secret</code>\u7684 Secret \u4e2d\u3002</p>"},{"location":"k8s-operator/4.cluster-administration/4.7.security/4.7.2.enable-admission-control/#_4","title":"\u5f00\u542f\u51c6\u5165\u63a7\u5236","text":"<ol> <li> <p>\u5b89\u88c5\u90e8\u7f72 cert-manager\u3002</p> <pre><code>kubectl apply -f https://github.com/cert-manager/cert-manager/releases/download/v1.13.1/cert-manager.yaml\n</code></pre> <p>\u5efa\u8bae\u90e8\u7f72\u6700\u65b0\u7248\u672c cert-manager\u3002\u8be6\u60c5\u53c2\u89c1 cert-manager \u5b98\u65b9\u6587\u6863\u3002</p> </li> <li> <p>\u4fee\u6539 NebulaGraph Operator \u7684\u914d\u7f6e\u6587\u4ef6\uff0c\u5f00\u542f\u51c6\u5165\u63a7\u5236\u3002\u9ed8\u8ba4\u51c6\u5165\u63a7\u5236\u662f\u5173\u95ed\u7684\uff0c\u9700\u8981\u624b\u52a8\u5f00\u542f\u3002</p> <pre><code># \u67e5\u770b\u5f53\u524d\u7684\u914d\u7f6e\nhelm show values nebula-operator/nebula-operator \n</code></pre> <pre><code># \u4fee\u6539\u914d\u7f6e\uff0c\u5c06`enableAdmissionWebhook`\u8bbe\u7f6e\u4e3a`true`\u3002\nhelm upgrade nebula-operator nebula-operator/nebula-operator --set enableAdmissionWebhook=true \n</code></pre> <p>Note</p> <p><code>nebula-operator</code>\u4e3a chart \u6240\u5728\u4ed3\u5e93\u7684\u540d\u79f0\uff0c<code>nebula-operator/nebula-operator</code>\u4e3a chart \u7684\u540d\u79f0\u3002\u5982\u679c\u6ca1\u6709\u6307\u5b9a chart \u7684\u547d\u540d\u7a7a\u95f4\uff0c\u9ed8\u8ba4\u4e3a<code>default</code>\u3002</p> </li> <li> <p>\u67e5\u770b\u51c6\u5165 Webhook \u7684\u8bc1\u4e66 Secret\u3002</p> <pre><code>kubectl get secret nebula-operator-webhook-secret -o yaml\n</code></pre> <p>\u5982\u679c\u8f93\u51fa\u7684\u7ed3\u679c\u4e2d\u5305\u542b\u8bc1\u4e66\u5185\u5bb9\uff0c\u5219\u8868\u793a\u51c6\u5165 Webhook \u7684\u8bc1\u4e66\u5df2\u7ecf\u521b\u5efa\u6210\u529f\u3002</p> </li> <li> <p>\u9a8c\u8bc1\u63a7\u5236\u89c4\u5219\u3002</p> <ul> <li> <p>\u9a8c\u8bc1\u9ad8\u53ef\u7528\u6a21\u5f0f\u4e0b\u7684\u6700\u5c0f\u526f\u672c\u6570\u3002</p> <pre><code># \u6807\u6ce8\u96c6\u7fa4\u4e3a\u9ad8\u53ef\u7528\u6a21\u5f0f\n$ kubectl annotate nc nebula nebula-graph.io/ha-mode=true\n# \u9a8c\u8bc1 Graph \u670d\u52a1\u7684\u6700\u5c0f\u526f\u672c\u6570\n$ kubectl patch nc nebula  --type='merge' --patch '{\"spec\": {\"graphd\": {\"replicas\":1}}}'\nError from server: admission webhook \"nebulaclustervalidating.nebula-graph.io\" denied the request: spec.graphd.replicas: Invalid value: 1: should be at least 2 in HA mode\n</code></pre> </li> </ul> <ul> <li> <p>\u9a8c\u8bc1\u7981\u6b62\u901a\u8fc7<code>dataVolumeClaims</code>\u4e3a Storage \u670d\u52a1\u8ffd\u52a0\u989d\u5916\u7684 PV\u3002</p> <pre><code>$ kubectl patch nc nebula  --type='merge' --patch '{\"spec\": {\"storaged\": {\"dataVolumeClaims\":[{\"resources\": {\"requests\": {\"storage\": \"2Gi\"}}, \"storageClassName\": \"local-path\"},{\"resources\": {\"requests\": {\"storage\": \"3Gi\"}}, \"storageClassName\": \"fask-disks\"}]}}}'\nError from server: admission webhook \"nebulaclustervalidating.nebula-graph.io\" denied the request: spec.storaged.dataVolumeClaims: Forbidden: storaged dataVolumeClaims is immutable\n</code></pre> </li> </ul> <ul> <li> <p>\u9a8c\u8bc1\u7981\u6b62\u7f29\u5c0f Storage \u670d\u52a1\u7684 PVC \u7684\u5bb9\u91cf\u3002</p> <pre><code>$ kubectl patch nc nebula  --type='merge' --patch '{\"spec\": {\"storaged\": {\"dataVolumeClaims\":[{\"resources\": {\"requests\": {\"storage\": \"1Gi\"}}, \"storageClassName\": \"fast-disks\"}]}}}'\nError from server: admission webhook \"nebulaclustervalidating.nebula-graph.io\" denied the request: spec.storaged.dataVolumeClaims: Invalid value: resource.Quantity{i:resource.int64Amount{value:1073741824, scale:0}, d:resource.infDecAmount{Dec:(*inf.Dec)(nil)}, s:\"1Gi\", Format:\"BinarySI\"}: data volume size can only be increased\n</code></pre> </li> </ul> <ul> <li> <p>\u9a8c\u8bc1\u7981\u6b62\u5728 Storage \u670d\u52a1\u7f29\u5bb9\u671f\u95f4\uff0c\u8fdb\u884c\u4efb\u4f55\u4e8c\u6b21\u64cd\u4f5c\u3002</p> <pre><code>$ kubectl patch nc nebula  --type='merge' --patch '{\"spec\": {\"storaged\": {\"replicas\": 5}}}'\nnebulacluster.apps.nebula-graph.io/nebula patched\n$ kubectl patch nc nebula  --type='merge' --patch '{\"spec\": {\"storaged\": {\"replicas\": 3}}}'\nError from server: admission webhook \"nebulaclustervalidating.nebula-graph.io\" denied the request: [spec.storaged: Forbidden: field is immutable while in ScaleOut phase, spec.storaged.replicas: Invalid value: 3: field is immutable while not in Running phase]\n</code></pre> </li> </ul> </li> </ol>"},{"location":"k8s-operator/4.cluster-administration/4.8.ha-and-balancing/4.8.1.self-healing/","title":"\u6545\u969c\u81ea\u6108","text":"<p>NebulaGraph Operator \u8c03\u7528 NebulaGraph \u96c6\u7fa4\u63d0\u4f9b\u7684\u63a5\u53e3\uff0c\u52a8\u6001\u5730\u611f\u77e5\u670d\u52a1\u662f\u5426\u6b63\u5e38\u8fd0\u884c\u3002\u5f53 NebulaGraph \u96c6\u7fa4\u4e2d\u67d0\u4e00\u7ec4\u4ef6\u505c\u6b62\u8fd0\u884c\u65f6\uff0cNebulaGraph Operator \u4f1a\u81ea\u52a8\u5730\u8fdb\u884c\u5bb9\u9519\u5904\u7406\u3002\u672c\u6587\u901a\u8fc7\u5220\u9664 NebulaGraph \u96c6\u7fa4\u4e2d 1 \u4e2a Storage \u670d\u52a1 Pod\uff0c\u6a21\u62df\u96c6\u7fa4\u6545\u969c\u4e3a\u4f8b\uff0c\u8bf4\u660e Nebular Operator \u5982\u4f55\u8fdb\u884c\u6545\u969c\u81ea\u6108\u3002</p>"},{"location":"k8s-operator/4.cluster-administration/4.8.ha-and-balancing/4.8.1.self-healing/#_2","title":"\u524d\u63d0\u6761\u4ef6","text":"<p>\u5b89\u88c5 NebulaGraph Operator</p>"},{"location":"k8s-operator/4.cluster-administration/4.8.ha-and-balancing/4.8.1.self-healing/#_3","title":"\u64cd\u4f5c\u6b65\u9aa4","text":"<ol> <li> <p>\u521b\u5efa NebulaGraph \u96c6\u7fa4\u3002\u5177\u4f53\u6b65\u9aa4\u53c2\u8003\u521b\u5efa NebulaGraph \u96c6\u7fa4\u3002</p> </li> <li> <p>\u5f85\u6240\u6709 Pods \u90fd\u5904\u4e8e<code>Running</code>\u72b6\u6001\u65f6\uff0c\u6a21\u62df\u6545\u969c\uff0c\u5220\u9664\u540d\u4e3a<code>&lt;cluster_name&gt;-storaged-2</code> Pod\u3002</p> <p><pre><code>kubectl delete pod &lt;cluster-name&gt;-storaged-2 --now\n</code></pre> <code>&lt;cluster_name&gt;</code>\u4e3a NebulaGraph \u96c6\u7fa4\u7684\u540d\u79f0\u3002</p> </li> <li> <p>NebulaGraph Operator \u81ea\u52a8\u521b\u5efa\u540d\u4e3a<code>&lt;cluster-name&gt;-storaged-2</code>\u7684 Pod\uff0c\u4ee5\u4fee\u590d\u6545\u969c\u3002</p> <p>\u6267\u884c<code>kubectl get pods</code>\u67e5\u770b<code>&lt;cluster-name&gt;-storaged-2</code>Pod \u7684\u521b\u5efa\u72b6\u6001\u3002</p> <pre><code>...\nnebula-cluster-storaged-1        1/1     Running             0          5d23h\nnebula-cluster-storaged-2        0/1     ContainerCreating   0          1s\n...\n</code></pre> <p><pre><code>...\nnebula-cluster-storaged-1        1/1     Running     0          5d23h\nnebula-cluster-storaged-2        1/1     Running     0          4m2s\n...\n</code></pre> \u5f53<code>&lt;cluster-name&gt;-storaged-2</code>\u7684\u72b6\u6001\u7531<code>ContainerCreating</code>\u53d8\u4e3a<code>Running</code>\u65f6\uff0c\u8bf4\u660e\u81ea\u6108\u6210\u529f\u3002</p> </li> </ol>"},{"location":"k8s-operator/4.cluster-administration/4.9.advanced/4.9.1.rolling-update-strategy/","title":"\u4f18\u5316\u6eda\u52a8\u66f4\u65b0\u4e2d\u7684 Leader \u5206\u5e03","text":"<p>NebulaGraph \u96c6\u7fa4\u4f7f\u7528\u5206\u5e03\u5f0f\u67b6\u6784\u5c06\u6570\u636e\u5206\u6210\u591a\u4e2a\u903b\u8f91\u5206\u7247\uff0c\u8fd9\u4e9b\u5206\u7247\u901a\u5e38\u5747\u5206\u5728\u4e0d\u540c\u7684\u8282\u70b9\u4e0a\u3002\u5206\u5e03\u5f0f\u7cfb\u7edf\u4e2d\uff0c\u540c\u4e00\u4efd\u6570\u636e\u901a\u5e38\u4f1a\u6709\u591a\u4e2a\u526f\u672c\u3002\u4e3a\u4e86\u4fdd\u8bc1\u591a\u4e2a\u526f\u672c\u6570\u636e\u7684\u4e00\u81f4\u6027\uff0cNebulaGraph \u96c6\u7fa4\u4f7f\u7528 Raft \u534f\u8bae\u5b9e\u73b0\u4e86\u591a\u5206\u7247\u526f\u672c\u540c\u6b65\u3002Raft \u534f\u8bae\u4e2d\uff0c\u6bcf\u4e2a\u5206\u7247\u90fd\u4f1a\u9009\u4e3e\u51fa\u4e00\u4e2a Leader \u526f\u672c\uff0cLeader \u526f\u672c\u8d1f\u8d23\u5904\u7406\u5199\u8bf7\u6c42\uff0cFollower \u526f\u672c\u8d1f\u8d23\u5904\u7406\u8bfb\u8bf7\u6c42\u3002</p> <p>\u901a\u8fc7 Operator \u521b\u5efa\u7684 NebulaGraph \u96c6\u7fa4\u5728\u6eda\u52a8\u66f4\u65b0\u8fc7\u7a0b\u4e2d\uff0c\u4e00\u4e2a\u5b58\u50a8\u8282\u70b9\u4f1a\u6682\u65f6\u505c\u6b62\u63d0\u4f9b\u670d\u52a1\u4ee5\u8fdb\u884c\u66f4\u65b0\u3002\u5173\u4e8e\u6eda\u52a8\u66f4\u65b0\u7684\u6982\u8ff0\uff0c\u53c2\u89c1\u6267\u884c\u6eda\u52a8\u66f4\u65b0\u3002\u5982\u679c Leader \u526f\u672c\u6240\u5728\u7684\u8282\u70b9\u505c\u6b62\u63d0\u4f9b\u670d\u52a1\uff0c\u4f1a\u5bfc\u81f4\u8be5\u5206\u7247\u7684\u8bfb\u5199\u4e0d\u53ef\u7528\u3002\u4e3a\u4e86\u907f\u514d\u8fd9\u79cd\u60c5\u51b5\uff0cOperator \u4f1a\u5728 NebulaGraph \u96c6\u7fa4\u6eda\u52a8\u66f4\u65b0\u8fc7\u7a0b\u4e2d\uff0c\u9ed8\u8ba4\u5c06 Leader \u526f\u672c\u8fc1\u79fb\u5230\u5176\u4ed6\u672a\u53d7\u5f71\u54cd\u8282\u70b9\u4e0a\u3002\u8fd9\u6837\uff0c\u5f53\u4e00\u4e2a\u5b58\u50a8\u8282\u70b9\u5904\u4e8e\u66f4\u65b0\u72b6\u6001\u65f6\uff0c\u5176\u4ed6\u8282\u70b9\u4e0a\u7684 Leader \u526f\u672c\u80fd\u591f\u7ee7\u7eed\u5904\u7406\u5ba2\u6237\u7aef\u8bf7\u6c42\uff0c\u4ee5\u4fdd\u8bc1\u96c6\u7fa4\u7684\u8bfb\u5199\u53ef\u7528\u6027\u3002</p> <p>\u4e00\u4e2a\u5b58\u50a8\u8282\u70b9\u4e0a\u7684\u6240\u6709 Leader \u526f\u672c\u5168\u90e8\u8fc1\u79fb\u5230\u5176\u4ed6\u8282\u70b9\u7684\u8fd9\u4e2a\u8fc7\u7a0b\u53ef\u80fd\u4f1a\u6301\u7eed\u8f83\u957f\u65f6\u95f4\u3002\u4e3a\u4e86\u66f4\u597d\u5730\u63a7\u5236\u6eda\u52a8\u66f4\u65b0\u7684\u65f6\u95f4\uff0cOperator \u63d0\u4f9b\u4e86\u4e00\u4e2a\u540d\u4e3a<code>enableForceUpdate</code>\u53c2\u6570\u3002\u5f53\u786e\u5b9a\u6ca1\u6709\u5916\u90e8\u8bbf\u95ee\u6d41\u91cf\u65f6\uff0c\u53ef\u5c06\u8be5\u53c2\u6570\u8bbe\u7f6e\u4e3a<code>true</code>\uff0c\u8fd9\u6837\uff0cLeader \u526f\u672c\u5c06\u4e0d\u4f1a\u88ab\u8fc1\u79fb\u5230\u5176\u4ed6\u8282\u70b9\u4e0a\uff0c\u4ece\u800c\u52a0\u5feb\u6eda\u52a8\u66f4\u65b0\u7684\u901f\u5ea6\u3002</p>"},{"location":"k8s-operator/4.cluster-administration/4.9.advanced/4.9.1.rolling-update-strategy/#_1","title":"\u6eda\u52a8\u66f4\u65b0\u89e6\u53d1\u6761\u4ef6","text":"<p>Operator \u4f1a\u5728\u4ee5\u4e0b\u60c5\u51b5\u4e0b\u89e6\u53d1 NebulaGraph \u96c6\u7fa4\u7684\u6eda\u52a8\u66f4\u65b0\uff1a</p> <ul> <li>NebulaGraph \u96c6\u7fa4\u7684\u7248\u672c\u53d1\u751f\u53d8\u5316\u3002</li> <li>NebulaGraph \u96c6\u7fa4\u7684\u914d\u7f6e\u53d1\u751f\u53d8\u5316\u3002</li> <li>NebulaGraph \u96c6\u7fa4\u7684\u670d\u52a1\u6267\u884c\u91cd\u542f\u64cd\u4f5c\u3002</li> </ul>"},{"location":"k8s-operator/4.cluster-administration/4.9.advanced/4.9.1.rolling-update-strategy/#_2","title":"\u914d\u7f6e\u6eda\u52a8\u66f4\u65b0\u7b56\u7565","text":"<p>\u5728\u521b\u5efa\u96c6\u7fa4\u5b9e\u4f8b\u7684 YAML \u6587\u4ef6\u4e2d\uff0c\u6dfb\u52a0<code>spec.storaged.enableForceUpdate</code>\u53c2\u6570\uff0c\u8bbe\u7f6e\u4e3a<code>true</code>\u6216<code>false</code>\uff0c\u4ee5\u63a7\u5236\u6eda\u52a8\u66f4\u65b0\u7684\u901f\u5ea6\u3002</p> <p>\u5f53<code>enableForceUpdate</code>\u4e3a<code>true</code>\u65f6\uff0c\u8868\u793a\u4e0d\u8fc1\u79fb\u5206\u7247 Leader \u526f\u672c\uff0c\u4ece\u800c\u52a0\u5feb\u6eda\u52a8\u66f4\u65b0\u7684\u901f\u5ea6\uff1b\u53cd\u4e4b\uff0c\u8868\u793a\u8fc1\u79fb\u5206\u7247 Leader \u526f\u672c\uff0c\u4ee5\u4fdd\u8bc1\u96c6\u7fa4\u7684\u8bfb\u5199\u53ef\u7528\u6027\u3002\u9ed8\u8ba4\u503c\u4e3a<code>false</code>\u3002</p> <p>Warning</p> <p>\u8bbe\u7f6e<code>enableForceUpdate</code>\u4e3a<code>true</code>\u65f6\uff0c\u786e\u4fdd\u6ca1\u6709\u6d41\u91cf\u8fdb\u5165\u96c6\u7fa4\u8fdb\u884c\u8bfb\u5199\u64cd\u4f5c\u3002\u56e0\u4e3a\u8be5\u8bbe\u7f6e\u4f1a\u5f3a\u5236\u91cd\u5efa\u96c6\u7fa4 Pod\uff0c\u6b64\u8fc7\u7a0b\u4f1a\u53d1\u751f\u6570\u636e\u4e22\u5931\u6216\u5ba2\u6237\u7aef\u8bf7\u6c42\u5931\u8d25\u7684\u60c5\u51b5\u3002</p> <p>\u914d\u7f6e\u793a\u4f8b\uff1a</p> <pre><code>...\nspec:\n...\n  storaged:\n    enableForceUpdate: true // \u8bbe\u7f6e\u4e3a true \u65f6\uff0c\u8868\u793a\u4e0d\u8fc1\u79fb\u5206\u7247 Leader \u526f\u672c\uff0c\u800c\u662f\u76f4\u63a5\u91cd\u5efa\u96c6\u7fa4 Pod\u3002\n    ...\n</code></pre>"},{"location":"k8s-operator/4.cluster-administration/4.9.advanced/4.9.2.restart-cluster/","title":"\u91cd\u542f K8s \u4e0a\u7684NebulaGraph\u96c6\u7fa4\u670d\u52a1","text":"<p>Note</p> <p>\u91cd\u542f\u96c6\u7fa4\u670d\u52a1 Pod \u529f\u80fd\u4e3a Alpha \u7248\u672c\u529f\u80fd\u3002</p> <p>\u5728\u65e5\u5e38\u7ef4\u62a4\u65f6\uff0c\u51fa\u4e8e\u5404\u79cd\u539f\u56e0\u9700\u8981\u91cd\u542fNebulaGraph\u96c6\u7fa4\u7684\u67d0\u4e2a\u670d\u52a1 Pod\uff0c\u4f8b\u5982 Pod \u72b6\u6001\u5f02\u5e38\u6216\u662f\u6267\u884c\u5f3a\u884c\u91cd\u542f\u903b\u8f91\u3002Pod \u91cd\u542f\u7684\u672c\u8d28\u662f\u91cd\u542f\u670d\u52a1\u8fdb\u7a0b\uff0c\u4e3a\u4e86\u786e\u4fdd\u670d\u52a1\u7684\u9ad8\u53ef\u7528\u6027\uff0cNebulaGraph Operator \u652f\u6301\u4f18\u96c5\u6eda\u52a8\u91cd\u542f\u96c6\u7fa4\u5185\u6240\u6709 Graph\uff0cMeta\uff0c\u6216 Storage \u670d\u52a1 Pod\uff0c\u4e5f\u652f\u6301\u4f18\u96c5\u91cd\u542f\u5355\u4e2a Storage \u670d\u52a1 Pod\u3002</p>"},{"location":"k8s-operator/4.cluster-administration/4.9.advanced/4.9.2.restart-cluster/#_1","title":"\u524d\u63d0\u6761\u4ef6","text":"<p>\u5df2\u7ecf\u5728 K8s \u73af\u5883\u4e2d\u521b\u5efa\u4e86\u4e00\u4e2aNebulaGraph\u96c6\u7fa4\u3002\u5177\u4f53\u6b65\u9aa4\uff0c\u53c2\u89c1\u521b\u5efaNebulaGraph\u96c6\u7fa4\u3002</p>"},{"location":"k8s-operator/4.cluster-administration/4.9.advanced/4.9.2.restart-cluster/#pod","title":"\u4f18\u96c5\u6eda\u52a8\u91cd\u542f\u96c6\u7fa4\u5185\u67d0\u7c7b\u670d\u52a1\u7684\u6240\u6709 Pod","text":"<p>\u901a\u8fc7\u5728\u4e0d\u540c\u670d\u52a1 StatefulSet \u63a7\u5236\u5668\u7684\u914d\u7f6e\u4e2d\u6dfb\u52a0\u6ce8\u89e3\uff08annotation\uff09<code>nebula-graph.io/restart-timestamp</code>\u5e76\u5c06\u503c\u8bbe\u7f6e\u4e3a\u5f53\u524d\u65f6\u95f4\u6765\u5b9e\u73b0\u4f18\u96c5\u6eda\u52a8\u91cd\u542f\u96c6\u7fa4\u540c\u7c7b\u670d\u52a1 Pod\u3002\u5f53 NebulaGraph Operator \u68c0\u6d4b\u5230\u76f8\u5e94\u670d\u52a1\u7684 StatefulSet \u63a7\u5236\u5668\u5b58\u5728\u6ce8\u89e3<code>nebula-graph.io/restart-timestamp</code>\u5e76\u4e14\u5176\u503c\u53d1\u751f\u4e86\u53d8\u66f4\uff0c\u5373\u4f1a\u89e6\u53d1\u4f18\u96c5\u6eda\u52a8\u91cd\u542f\u96c6\u7fa4\u5185\u67d0\u7c7b\u670d\u52a1\u7684\u6240\u6709 Pod \u7684\u64cd\u4f5c\u3002</p> <p>\u4ee5\u4e0b\u793a\u4f8b\u4e2d\uff0c\u4e3a\u6240\u6709 Graph \u670d\u52a1\u90fd\u8bbe\u7f6e\u6ce8\u89e3\uff0c\u8868\u793a\u5c06\u9010\u4e2a\u91cd\u542f\u6240\u6709 Graph \u670d\u52a1 Pod\u3002</p> <p>\u5047\u8bbe\u6240\u6709\u96c6\u7fa4\u540d\u4e3a<code>nebula</code>\uff0c\u96c6\u7fa4\u8d44\u6e90\u90fd\u653e\u5728<code>default</code>\u547d\u540d\u7a7a\u95f4\u4e0b\uff0c\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\uff1a</p> <ol> <li> <p>\u67e5\u770b StatefulSet \u63a7\u5236\u5668\u7684\u540d\u79f0\u3002</p> <pre><code>kubectl get statefulset \n</code></pre> <p>\u793a\u4f8b\u8f93\u51fa\uff1a</p> <pre><code>NAME              READY   AGE\nnebula-graphd     2/2     33s\nnebula-metad      3/3     69s\nnebula-storaged   3/3     69s\n</code></pre> </li> <li> <p>\u83b7\u53d6\u5f53\u524d\u65f6\u95f4\u6233\u3002</p> <p><pre><code>date -u +%s\n</code></pre> \u793a\u4f8b\u8f93\u51fa\uff1a</p> <pre><code>1700547115\n</code></pre> </li> <li> <p>\u8986\u76d6 StatefulSet \u63a7\u5236\u5668\u65f6\u95f4\u6233\u6ce8\u89e3\u4ee5\u89e6\u53d1\u4f18\u96c5\u6eda\u52a8\u91cd\u542f\u64cd\u4f5c\u3002</p> <pre><code>kubectl annotate statefulset nebula-graphd nebula-graph.io/restart-timestamp=\"1700547115\" --overwrite\n</code></pre> <p>\u793a\u4f8b\u8f93\u51fa\uff1a</p> <pre><code>statefulset.apps/nebula-graphd annotate\n</code></pre> </li> <li> <p>\u89c2\u5bdf\u91cd\u542f\u8fc7\u7a0b\u3002</p> <pre><code>kubectl get pods -l app.kubernetes.io/cluster=nebula,app.kubernetes.io/component=graphd -w\n</code></pre> <p>\u793a\u4f8b\u8f93\u51fa\uff1a</p> <pre><code>NAME              READY   STATUS    RESTARTS   AGE\nnebula-graphd-0   1/1     Running   0          9m37s\nnebula-graphd-1   0/1     Running   0          17s\nnebula-graphd-1   1/1     Running   0          20s\nnebula-graphd-0   1/1     Terminating   0          9m40s\nnebula-graphd-0   0/1     Terminating   0          9m41s\nnebula-graphd-0   0/1     Terminating   0          9m42s\nnebula-graphd-0   0/1     Terminating   0          9m42s\nnebula-graphd-0   0/1     Terminating   0          9m42s\nnebula-graphd-0   0/1     Pending       0          0s\nnebula-graphd-0   0/1     Pending       0          0s\nnebula-graphd-0   0/1     ContainerCreating   0          0s\nnebula-graphd-0   0/1     Running             0          2s\n</code></pre> <p>\u4e0a\u8ff0\u8f93\u51fa\u663e\u793a\u6240\u6709 Graph \u670d\u52a1 Pod \u91cd\u542f\u8fc7\u7a0b\u3002</p> </li> <li> <p>\u786e\u8ba4 StatefulSet \u63a7\u5236\u5668\u6ce8\u89e3\u66f4\u65b0\u3002</p> <pre><code>kubectl get statefulset nebula-graphd -o yaml | grep \"nebula-graph.io/restart-timestamp\"\n</code></pre> <p>\u793a\u4f8b\u8f93\u51fa\uff1a</p> <pre><code>nebula-graph.io/last-applied-configuration: '{\"persistentVolumeClaimRetentionPolicy\":{\"whenDeleted\":\"Retain\",\"whenScaled\":\"Retain\"},\"podManagementPolicy\":\"Parallel\",\"replicas\":2,\"revisionHistoryLimit\":10,\"selector\":{\"matchLabels\":{\"app.kubernetes.io/cluster\":\"nebula\",\"app.kubernetes.io/component\":\"graphd\",\"app.kubernetes.io/managed-by\":\"nebula-operator\",\"app.kubernetes.io/name\":\"nebula-graph\"}},\"serviceName\":\"nebula-graphd-headless\",\"template\":{\"metadata\":{\"annotations\":{\"nebula-graph.io/cm-hash\":\"7c55c0e5ac74e85f\",\"nebula-graph.io/restart-timestamp\":\"1700547815\"},\"creationTimestamp\":null,\"labels\":{\"app.kubernetes.io/cluster\":\"nebula\",\"app.kubernetes.io/component\":\"graphd\",\"app.kubernetes.io/managed-by\":\"nebula-operator\",\"app.kubernetes.io/name\":\"nebula-graph\"}},\"spec\":{\"containers\":[{\"command\":[\"/bin/sh\",\"-ecx\",\"exec\nnebula-graph.io/restart-timestamp: \"1700547115\"\n    nebula-graph.io/restart-timestamp: \"1700547815\" \n</code></pre> </li> </ol> <p>\u7531\u4e0a\u8ff0\u8f93\u51fa\u53ef\u77e5\uff0cStatefulSet \u63a7\u5236\u5668\u7684\u6ce8\u89e3\u5df2\u7ecf\u66f4\u65b0\u5e76\u4e14 Graph \u670d\u52a1\u7684\u6240\u6709 Pod \u5df2\u7ecf\u91cd\u542f\u3002</p>"},{"location":"k8s-operator/4.cluster-administration/4.9.advanced/4.9.2.restart-cluster/#storage_pod","title":"\u4f18\u96c5\u6eda\u52a8\u91cd\u542f\u5355\u4e2a Storage \u670d\u52a1 Pod","text":"<p>\u901a\u8fc7\u5728 Storage \u670d\u52a1\u7684 StatefulSet \u63a7\u5236\u5668\u7684\u914d\u7f6e\u4e2d\u6dfb\u52a0\u6ce8\u89e3\uff08annotation\uff09<code>nebula-graph.io/restart-ordinal</code>\u5e76\u5c06\u503c\u8bbe\u7f6e\u4e3a Storage \u670d\u52a1 Pod \u7684\u5e8f\u53f7\u6765\u5b9e\u73b0\u4f18\u96c5\u6eda\u52a8\u91cd\u542f\u5355\u4e2a Storage \u670d\u52a1 Pod\uff0c\u5373\u6267\u884c\u72b6\u6001\u8f6c\u79fb\u64cd\u4f5c\u3002\u5728 Storage \u670d\u52a1 Pod \u91cd\u542f\u540e\uff0c\u6dfb\u52a0\u7684\u6ce8\u89e3\u4f1a\u88ab\u5220\u9664\u3002</p> <p>\u4ee5\u4e0b\u793a\u4f8b\u4e3a\u5e8f\u53f7\u4e3a<code>1</code>\u7684 Storage Pod \u6dfb\u52a0\u6ce8\u89e3\uff0c\u8868\u793a\u5c06\u4f18\u96c5\u91cd\u542f\u540d\u4e3a<code>nebula-storaged-1</code>\u7684 Storage \u670d\u52a1 Pod\u3002</p> <p>\u5047\u8bbe\u6240\u6709\u96c6\u7fa4\u540d\u4e3a<code>nebula</code>\uff0c\u96c6\u7fa4\u8d44\u6e90\u90fd\u653e\u5728<code>default</code>\u547d\u540d\u7a7a\u95f4\u4e0b\uff0c\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\uff1a</p> <ol> <li> <p>\u67e5\u770b StatefulSet \u63a7\u5236\u5668\u540d\u79f0\u3002</p> <pre><code>kubectl get statefulset \n</code></pre> <p>\u793a\u4f8b\u8f93\u51fa\uff1a</p> <pre><code>NAME              READY   AGE\nnebula-graphd     2/2     33s\nnebula-metad      3/3     69s\nnebula-storaged   3/3     69s\n</code></pre> </li> <li> <p>\u83b7\u53d6 Storage \u670d\u52a1 Pod \u7684\u5e8f\u53f7\u3002</p> <pre><code>kubectl get pods -l app.kubernetes.io/cluster=nebula,app.kubernetes.io/component=storaged\n</code></pre> <p>\u793a\u4f8b\u8f93\u51fa\uff1a</p> <pre><code>NAME                READY   STATUS    RESTARTS   AGE\nnebula-storaged-0   1/1     Running   0          13h\nnebula-storaged-1   1/1     Running   0          13h\nnebula-storaged-2   1/1     Running   0          13h\nnebula-storaged-3   1/1     Running   0          13h\nnebula-storaged-4   1/1     Running   0          13h\nnebula-storaged-5   1/1     Running   0          13h\nnebula-storaged-6   1/1     Running   0          13h\nnebula-storaged-7   1/1     Running   0          13h\nnebula-storaged-8   1/1     Running   0          13h\n</code></pre> </li> <li> <p>\u4e3a<code>nebula-storaged-1</code> Pod \u6dfb\u52a0\u6ce8\u89e3\u4ee5\u89e6\u53d1\u4f18\u96c5\u6eda\u52a8\u91cd\u542f\u8be5 Pod \u64cd\u4f5c\u3002</p> <pre><code>kubectl annotate statefulset nebula-storaged nebula-graph.io/restart-ordinal=\"1\" \n</code></pre> <p>\u793a\u4f8b\u8f93\u51fa\uff1a</p> <pre><code>statefulset.apps/nebula-storaged annotate\n</code></pre> </li> <li> <p>\u89c2\u5bdf\u91cd\u542f\u8fc7\u7a0b\u3002</p> <pre><code>kubectl get pods -l app.kubernetes.io/cluster=nebula,app.kubernetes.io/component=storaged -w\n</code></pre> <p>\u793a\u4f8b\u8f93\u51fa\uff1a</p> <p>```bash NAME                READY   STATUS    RESTARTS   AGE nebula-storaged-0   1/1     Running   0          13h nebula-storaged-1   1/1     Running   0          13h nebula-storaged-2   1/1     Running   0          13h nebula-storaged-3   1/1     Running   0          13h nebula-storaged-4   1/1     Running   0          13h nebula-storaged-5   1/1     Running   0          12h nebula-storaged-6   1/1     Running   0          12h nebula-storaged-7   1/1     Running   0          12h nebula-storaged-8   1/1     Running   0          12h</p> <p>nebula-storaged-1   1/1     Running   0          13h nebula-storaged-1   1/1     Terminating   0          13h nebula-storaged-1   0/1     Terminating   0          13h nebula-storaged-1   0/1     Terminating   0          13h nebula-storaged-1   0/1     Terminating   0          13h nebula-storaged-1   0/1     Terminating   0          13h nebula-storaged-1   0/1     Pending       0          0s nebula-storaged-1   0/1     Pending       0          0s nebula-storaged-1   0/1     ContainerCreating   0          0s nebula-storaged-1   0/1     Running             0          1s nebula-storaged-1   1/1     Running             0          10s</p> </li> </ol> <p>\u7531\u4e0a\u8ff0\u8f93\u51fa\u53ef\u77e5\uff0c<code>nebula-storaged-1</code> Storage \u670d\u52a1 Pod \u5df2\u7ecf\u91cd\u542f\u3002</p>"},{"location":"nebula-dashboard/1.what-is-dashboard/","title":"\u4ec0\u4e48\u662f NebulaGraph Dashboard\uff08\u793e\u533a\u7248\uff09","text":"<p>NebulaGraph Dashboard\uff08\u7b80\u79f0 Dashboard\uff09\u662f\u4e00\u6b3e\u7528\u4e8e\u76d1\u63a7 NebulaGraph \u96c6\u7fa4\u4e2d\u673a\u5668\u548c\u670d\u52a1\u72b6\u6001\u7684\u53ef\u89c6\u5316\u5de5\u5177\u3002</p> <p>Enterpriseonly</p> <p>\u4f01\u4e1a\u7248\u589e\u52a0\u4e86\u53ef\u89c6\u5316\u521b\u5efa\u96c6\u7fa4\u3001\u6279\u91cf\u5bfc\u5165\u96c6\u7fa4\u3001\u5feb\u901f\u6269\u7f29\u5bb9\u7b49\u529f\u80fd\uff0c\u70b9\u51fb\u5b9a\u4ef7\u67e5\u770b\u66f4\u591a\u3002\u7528\u6237\u8fd8\u53ef\u4ee5\u5728\u963f\u91cc\u4e91\u4e0a\u514d\u8d39\u8bd5\u7528\u3002</p>"},{"location":"nebula-dashboard/1.what-is-dashboard/#_1","title":"\u4ea7\u54c1\u529f\u80fd","text":"<ul> <li>\u76d1\u63a7\u96c6\u7fa4\u4e2d\u6240\u6709\u673a\u5668\u7684\u72b6\u6001\uff0c\u5305\u62ec CPU\u3001\u5185\u5b58\u3001\u8d1f\u8f7d\u3001\u78c1\u76d8\u548c\u6d41\u91cf\u3002</li> </ul> <ul> <li>\u76d1\u63a7\u96c6\u7fa4\u4e2d\u6240\u6709\u670d\u52a1\u7684\u4fe1\u606f\uff0c\u5305\u62ec\u670d\u52a1 IP \u5730\u5740\u3001\u7248\u672c\u548c\u76d1\u63a7\u6307\u6807\uff08\u4f8b\u5982\u67e5\u8be2\u6570\u91cf\u3001\u67e5\u8be2\u5ef6\u8fdf\u3001\u5fc3\u8df3\u5ef6\u8fdf\u7b49\uff09\u3002</li> </ul> <ul> <li>\u76d1\u63a7\u96c6\u7fa4\u672c\u8eab\u7684\u4fe1\u606f\uff0c\u5305\u62ec\u96c6\u7fa4\u7684\u670d\u52a1\u4fe1\u606f\u3001\u5206\u533a\u4fe1\u606f\u3001\u914d\u7f6e\u548c\u957f\u65f6\u4efb\u52a1\u3002</li> </ul> <ul> <li>\u652f\u6301\u5168\u5c40\u8c03\u6574\u76d1\u63a7\u6570\u636e\u7684\u9875\u9762\u66f4\u65b0\u9891\u7387\u3002</li> </ul>"},{"location":"nebula-dashboard/1.what-is-dashboard/#_2","title":"\u9002\u7528\u573a\u666f","text":"<p>\u5982\u679c\u6709\u4ee5\u4e0b\u4efb\u4e00\u9700\u6c42\uff0c\u90fd\u53ef\u4ee5\u4f7f\u7528 Dashboard\uff1a</p> <ul> <li>\u9700\u8981\u65b9\u4fbf\u5feb\u6377\u5730\u76d1\u6d4b\u5173\u952e\u6307\u6807\uff0c\u96c6\u4e2d\u5448\u73b0\u4e1a\u52a1\u7684\u591a\u4e2a\u91cd\u70b9\u4fe1\u606f\uff0c\u4fdd\u8bc1\u4e1a\u52a1\u6b63\u5e38\u8fd0\u884c\u3002</li> </ul> <ul> <li>\u9700\u8981\u591a\u7ef4\u5ea6\uff08\u4f8b\u5982\u65f6\u95f4\u6bb5\u3001\u805a\u5408\u89c4\u5219\u3001\u6307\u6807\uff09\u76d1\u63a7\u96c6\u7fa4\u3002</li> </ul> <ul> <li>\u6545\u969c\u53d1\u751f\u540e\uff0c\u9700\u8981\u590d\u76d8\u95ee\u9898\uff0c\u786e\u8ba4\u6545\u969c\u53d1\u751f\u65f6\u95f4\u3001\u5f02\u5e38\u73b0\u8c61\u3002</li> </ul>"},{"location":"nebula-dashboard/1.what-is-dashboard/#_3","title":"\u6ce8\u610f\u4e8b\u9879","text":"<p>\u76d1\u63a7\u6570\u636e\u9ed8\u8ba4\u4fdd\u7559 14 \u5929\uff0c\u5373\u53ea\u80fd\u67e5\u8be2\u6700\u8fd1 14 \u5929\u5185\u4efb\u610f\u65f6\u95f4\u6bb5\u7684\u76d1\u63a7\u6570\u636e\u3002</p> <p>Note</p> <p>\u76d1\u63a7\u670d\u52a1\u7531 prometheus \u63d0\u4f9b\uff0c\u66f4\u65b0\u9891\u7387\u548c\u4fdd\u7559\u65f6\u95f4\u7b49\u90fd\u53ef\u4ee5\u81ea\u884c\u4fee\u6539\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1 prometheus \u5b98\u65b9\u6587\u6863\u3002</p>"},{"location":"nebula-dashboard/1.what-is-dashboard/#_4","title":"\u7248\u672c\u517c\u5bb9\u6027","text":"<p>NebulaGraph \u7684\u7248\u672c\u548c Dashboard \u793e\u533a\u7248\u7684\u7248\u672c\u5bf9\u5e94\u5173\u7cfb\u5982\u4e0b\u3002</p> NebulaGraph \u7248\u672c Dashboard \u7248\u672c 3.6.0 3.4.0 3.5.x 3.4.0 3.4.0 ~ 3.4.1 3.4.0\u30013.2.0 3.3.0 3.2.0 2.5.0 ~ 3.2.0 3.1.0 2.5.x ~ 3.1.0 1.1.1 2.0.1 ~ 2.5.1 1.0.2 2.0.1 ~ 2.5.1 1.0.1"},{"location":"nebula-dashboard/1.what-is-dashboard/#_5","title":"\u66f4\u65b0\u8bf4\u660e","text":"<p>Release</p>"},{"location":"nebula-dashboard/2.deploy-dashboard/","title":"\u90e8\u7f72 Dashboard \u793e\u533a\u7248","text":"<p>\u672c\u6587\u5c06\u4ecb\u7ecd\u5982\u4f55\u901a\u8fc7 TAR \u5305\u5b89\u88c5\u90e8\u7f72 NebulaGraph Dashboard\u3002</p> <p>\u4e0b\u8f7d\u548c\u7f16\u8bd1 Dashboard \u7684\u6700\u65b0\u6e90\u7801\uff0c\u53c2\u89c1 GitHub NebulaGraph dashboard \u9875\u9762\u7684\u8bf4\u660e\u3002</p>"},{"location":"nebula-dashboard/2.deploy-dashboard/#_1","title":"\u524d\u63d0\u6761\u4ef6","text":"<p>\u5728\u90e8\u7f72 Dashboard \u4e4b\u524d\uff0c\u7528\u6237\u9700\u8981\u786e\u8ba4\u4ee5\u4e0b\u4fe1\u606f\uff1a</p> <ul> <li>NebulaGraph \u670d\u52a1\u5df2\u7ecf\u90e8\u7f72\u5e76\u542f\u52a8\u3002\u8be6\u7ec6\u4fe1\u606f\u53c2\u8003 NebulaGraph \u5b89\u88c5\u90e8\u7f72\u3002</li> </ul> <ul> <li> <p>\u786e\u4fdd\u4ee5\u4e0b\u7aef\u53e3\u672a\u88ab\u4f7f\u7528\uff1a</p> <ul> <li>9200</li> </ul> <ul> <li>9100</li> </ul> <ul> <li>9090</li> </ul> <ul> <li>8090</li> </ul> <ul> <li>7003</li> </ul> </li> </ul> <ul> <li>\u5f85\u76d1\u63a7\u7684\u673a\u5668\u4e0a\u5df2\u7ecf\u5b89\u88c5 node-exporter\u3002\u5b89\u88c5\u65b9\u6cd5\u8bf7\u53c2\u89c1 Prometheus \u5b98\u65b9\u6587\u6863\u3002</li> </ul>"},{"location":"nebula-dashboard/2.deploy-dashboard/#_2","title":"\u64cd\u4f5c\u6b65\u9aa4","text":"<ol> <li> <p>\u4e0b\u8f7d TAR \u5305 nebula-dashboard-3.4.0.x86_64.tar.gz\u3002</p> </li> <li> <p>\u6267\u884c\u547d\u4ee4<code>tar -xvf nebula-dashboard-3.4.0.x86_64.tar.gz</code>\u89e3\u538b\u7f29\u3002</p> </li> <li> <p>\u8fdb\u5165\u89e3\u538b\u7f29\u7684<code>nebula-dashboard</code>\u6587\u4ef6\u5939\uff0c\u5e76\u4fee\u6539\u914d\u7f6e\u6587\u4ef6<code>config.yaml</code>\u3002</p> <p>\u914d\u7f6e\u6587\u4ef6\u5185\u4e3b\u8981\u5305\u542b 4 \u79cd\u4f9d\u8d56\u670d\u52a1\u7684\u914d\u7f6e\u548c\u96c6\u7fa4\u7684\u914d\u7f6e\u3002\u4f9d\u8d56\u670d\u52a1\u7684\u8bf4\u660e\u5982\u4e0b\u3002</p> \u670d\u52a1\u540d\u79f0 \u9ed8\u8ba4\u7aef\u53e3\u53f7 \u8bf4\u660e nebula-http-gateway 8090 \u4e3a\u96c6\u7fa4\u670d\u52a1\u63d0\u4f9b HTTP \u63a5\u53e3\uff0c\u6267\u884c nGQL \u8bed\u53e5\u4e0e NebulaGraph \u8fdb\u884c\u4ea4\u4e92\u3002 nebula-stats-exporter 9200 \u6536\u96c6\u96c6\u7fa4\u7684\u6027\u80fd\u6307\u6807\uff0c\u5305\u62ec\u670d\u52a1 IP \u5730\u5740\u3001\u7248\u672c\u548c\u76d1\u63a7\u6307\u6807\uff08\u4f8b\u5982\u67e5\u8be2\u6570\u91cf\u3001\u67e5\u8be2\u5ef6\u8fdf\u3001\u5fc3\u8df3\u5ef6\u8fdf  \u7b49\uff09\u3002 node-exporter 9100 \u6536\u96c6\u96c6\u7fa4\u4e2d\u673a\u5668\u7684\u8d44\u6e90\u4fe1\u606f\uff0c\u5305\u62ec CPU\u3001\u5185\u5b58\u3001\u8d1f\u8f7d\u3001\u78c1\u76d8\u548c\u6d41\u91cf\u3002 prometheus 9090 \u5b58\u50a8\u76d1\u63a7\u6570\u636e\u7684\u65f6\u95f4\u5e8f\u5217\u6570\u636e\u5e93\u3002 <p>\u914d\u7f6e\u6587\u4ef6\u8bf4\u660e\u5982\u4e0b\u3002</p> <pre><code>port: 7003   # Web \u670d\u52a1\u7aef\u53e3\u3002\ngateway:\n  ip: hostIP   # \u90e8\u7f72 Dashboard \u7684\u673a\u5668 IP\u3002\n  port: 8090\n  https: false  # \u662f\u5426\u4e3a HTTPS \u7aef\u53e3\u3002\n  runmode: dev  # \u7a0b\u5e8f\u8fd0\u884c\u6a21\u5f0f\uff0c\u5305\u62ec dev\u3001test\u3001prod\u3002\u4e00\u822c\u7528\u4e8e\u533a\u5206\u4e0d\u540c\u8fd0\u884c\u73af\u5883\u3002\nstats-exporter:\n  ip: hostIP   # \u90e8\u7f72 Dashboard \u7684\u673a\u5668 IP\u3002\n  nebulaPort: 9200\n  https: false  # \u662f\u5426\u4e3a HTTPS \u7aef\u53e3\u3002\nnode-exporter:\n  - ip: nebulaHostIP_1 # \u90e8\u7f72 NebulaGraph \u7684\u673a\u5668 IP\u3002\n    port: 9100\n    https: false # \u662f\u5426\u4e3a HTTPS \u7aef\u53e3\u3002\n# - ip: nebulaHostIP_2\n#   port: 9100\n#   https: false\nprometheus:\n  ip: hostIP    # \u90e8\u7f72 Dashboard \u7684\u673a\u5668 IP\u3002\n  prometheusPort: 9090\n  https: false  # \u662f\u5426\u4e3a HTTPS \u7aef\u53e3\u3002\n  scrape_interval: 5s  # \u6536\u96c6\u76d1\u63a7\u6570\u636e\u7684\u95f4\u9694\u65f6\u95f4\u3002\u9ed8\u8ba4\u4e3a 1 \u5206\u949f\u3002\n  evaluation_interval: 5s  # \u544a\u8b66\u89c4\u5219\u626b\u63cf\u65f6\u95f4\u95f4\u9694\u3002\u9ed8\u8ba4\u4e3a 1 \u5206\u949f\u3002\n# \u96c6\u7fa4\u8282\u70b9\u4fe1\u606f\nnebula-cluster:\n  name: 'default' # \u96c6\u7fa4\u540d\u79f0\n  metad:\n    - name: metad0\n      endpointIP: nebulaMetadIP  # \u90e8\u7f72 Meta \u670d\u52a1\u7684\u673a\u5668 IP\u3002\n      port: 9559\n      endpointPort: 19559\n  # - name: metad1\n  #   endpointIP: nebulaMetadIP\n  #   port: 9559\n  #   endpointPort: 19559  \n  graphd:\n    - name: graphd0\n      endpointIP: GraphdIP  # \u90e8\u7f72 Graph \u670d\u52a1\u7684\u673a\u5668 IP\u3002\n      port: 9669\n      endpointPort: 19669\n  # - name: graphd1\n  #   endpointIP: GraphdIP\n  #   port: 9669\n  #   endpointPort: 19669  \n  storaged:\n    - name: storaged0\n      endpointIP: StoragedIP  # \u90e8\u7f72 Storage \u670d\u52a1\u7684\u673a\u5668 IP\u3002\n      port: 9779\n      endpointPort: 19779\n  # - name: storaged1\n  #   endpointIP: StoragedIP\n  #   port: 9779\n  #   endpointPort: 19779  \n</code></pre> </li> <li> <p>\u6267\u884c<code>./dashboard.service start all</code>\u4e00\u952e\u542f\u52a8\u670d\u52a1\u3002</p> </li> </ol>"},{"location":"nebula-dashboard/2.deploy-dashboard/#_3","title":"\u5bb9\u5668\u90e8\u7f72","text":"<p>\u5982\u679c\u4f7f\u7528\u5bb9\u5668\u90e8\u7f72 Dashboard\uff0c\u540c\u6837\u662f\u4fee\u6539\u914d\u7f6e\u6587\u4ef6<code>config.yaml</code>\uff0c\u4fee\u6539\u5b8c\u6210\u540e\uff0c\u6267\u884c<code>docker-compose up -d</code>\u5373\u53ef\u542f\u52a8\u5bb9\u5668\u3002</p> <p>Note</p> <p>\u5982\u679c\u4fee\u6539\u4e86<code>config.yaml</code>\u5185\u7684\u7aef\u53e3\u53f7\uff0c<code>docker-compose.yaml</code>\u91cc\u7684\u7aef\u53e3\u53f7\u4e5f\u9700\u8981\u4fdd\u6301\u4e00\u81f4\u3002</p> <p>\u6267\u884c<code>docker-compose stop</code>\u547d\u4ee4\u505c\u6b62\u5bb9\u5668\u90e8\u7f72\u7684 Dashboard\u3002</p>"},{"location":"nebula-dashboard/2.deploy-dashboard/#dashboard_1","title":"\u7ba1\u7406 Dashboard \u670d\u52a1","text":"<p>Dashboard \u4f7f\u7528\u811a\u672c<code>dashboard.service</code>\u7ba1\u7406\u670d\u52a1\uff0c\u5305\u62ec\u542f\u52a8\u3001\u91cd\u542f\u3001\u505c\u6b62\u548c\u67e5\u770b\u72b6\u6001\u3002</p> <pre><code>sudo &lt;dashboard_path&gt;/dashboard.service\n[-v] [-h]\n&lt;start|restart|stop|status&gt;  &lt;prometheus|webserver|exporter|gateway|all&gt;\n</code></pre> \u53c2\u6570 \u8bf4\u660e <code>dashboard_path</code> Dashboard \u5b89\u88c5\u8def\u5f84\u3002 <code>-v</code> \u663e\u793a\u8be6\u7ec6\u8c03\u8bd5\u4fe1\u606f\u3002 <code>-h</code> \u663e\u793a\u5e2e\u52a9\u4fe1\u606f\u3002 <code>start</code> \u542f\u52a8\u670d\u52a1\u3002 <code>restart</code> \u91cd\u542f\u670d\u52a1\u3002 <code>stop</code> \u505c\u6b62\u670d\u52a1\u3002 <code>status</code> \u67e5\u770b\u670d\u52a1\u72b6\u6001\u3002 <code>prometheus</code> \u7ba1\u7406 prometheus \u670d\u52a1\u3002 <code>webserver</code> \u7ba1\u7406 webserver \u670d\u52a1\u3002 <code>exporter</code> \u7ba1\u7406 exporter \u670d\u52a1\u3002 <code>gateway</code> \u7ba1\u7406 gateway \u670d\u52a1\u3002 <code>all</code> \u7ba1\u7406\u6240\u6709\u670d\u52a1\u3002 <p>Note</p> <p>\u67e5\u770b Dashboard \u7248\u672c\u53ef\u4ee5\u4f7f\u7528\u547d\u4ee4<code>./dashboard.service -version</code>\u3002</p>"},{"location":"nebula-dashboard/2.deploy-dashboard/#_4","title":"\u540e\u7eed\u64cd\u4f5c","text":"<p>\u8fde\u63a5 Dashboard</p>"},{"location":"nebula-dashboard/3.connect-dashboard/","title":"\u8fde\u63a5 Dashboard","text":"<p>Dashboard \u90e8\u7f72\u5b8c\u6210\u540e\uff0c\u53ef\u4ee5\u901a\u8fc7\u6d4f\u89c8\u5668\u767b\u5f55\u4f7f\u7528 Dashboard\u3002</p>"},{"location":"nebula-dashboard/3.connect-dashboard/#_1","title":"\u524d\u63d0\u6761\u4ef6","text":"<ul> <li>Dashboard \u76f8\u5173\u670d\u52a1\u5df2\u7ecf\u542f\u52a8\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1\u90e8\u7f72 Dashboard\u3002</li> </ul> <ul> <li>\u5efa\u8bae\u4f7f\u7528 Chrome 89 \u53ca\u4ee5\u4e0a\u7684\u7248\u672c\u7684 Chrome \u6d4f\u89c8\u5668\uff0c\u5426\u5219\u53ef\u80fd\u6709\u517c\u5bb9\u95ee\u9898\u3002</li> </ul>"},{"location":"nebula-dashboard/3.connect-dashboard/#_2","title":"\u64cd\u4f5c\u6b65\u9aa4","text":"<ol> <li> <p>\u786e\u8ba4 Dashboard \u670d\u52a1\u6240\u5728\u673a\u5668\u7684 IP \u5730\u5740\uff0c\u5728\u6d4f\u89c8\u5668\u4e2d\u8f93\u5165<code>&lt;IP&gt;:7003</code>\u6253\u5f00\u767b\u5f55\u9875\u9762\u3002</p> </li> <li> <p>\u8f93\u5165 NebulaGraph \u6570\u636e\u5e93\u7684\u8d26\u53f7\u548c\u5bc6\u7801\u3002</p> <ul> <li>\u5982\u679c NebulaGraph \u5df2\u7ecf\u542f\u7528\u8eab\u4efd\u9a8c\u8bc1\uff0c\u7528\u6237\u53ef\u4ee5\u4f7f\u7528\u5df2\u521b\u5efa\u7684\u8d26\u53f7\u8fde\u63a5 Dashboard\u3002</li> </ul> <ul> <li>\u5982\u679c NebulaGraph \u672a\u542f\u7528\u8eab\u4efd\u9a8c\u8bc1\uff0c\u7528\u6237\u53ea\u80fd\u4f7f\u7528\u9ed8\u8ba4\u7528\u6237<code>root</code>\u548c\u4efb\u610f\u5bc6\u7801\u8fde\u63a5 Dashboard\u3002</li> </ul> <p>\u6709\u5173\u5982\u4f55\u542f\u7528\u8eab\u4efd\u9a8c\u8bc1\u8bf7\u53c2\u89c1\u8eab\u4efd\u9a8c\u8bc1\u3002</p> </li> <li> <p>\u5355\u51fb\u767b\u5f55\u3002</p> </li> </ol>"},{"location":"nebula-dashboard/4.use-dashboard/","title":"Dashboard \u9875\u9762\u4ecb\u7ecd","text":"<p>Dashboard \u9875\u9762\u4e3b\u8981\u5206\u4e3a\u673a\u5668\u3001\u670d\u52a1\u3001\u7ba1\u7406\u4e09\u4e2a\u90e8\u5206\uff0c\u672c\u6587\u5c06\u8be6\u7ec6\u4ecb\u7ecd\u8fd9\u4e9b\u754c\u9762\u3002</p>"},{"location":"nebula-dashboard/4.use-dashboard/#_1","title":"\u9875\u9762\u6982\u89c8","text":""},{"location":"nebula-dashboard/4.use-dashboard/#_2","title":"\u673a\u5668\u9875\u9762\u4ecb\u7ecd","text":"<p>\u5355\u51fb\u673a\u5668-&gt;\u6982\u89c8\u8fdb\u5165\u673a\u5668\u6982\u89c8\u9875\u9762\u3002</p> <p>\u7528\u6237\u53ef\u5feb\u901f\u67e5\u770b CPU\u3001Memory\u3001Load\u3001Disk \u548c Network In/Out \u53d8\u5316\u60c5\u51b5\u3002</p> <ul> <li>\u9ed8\u8ba4\u6700\u591a\u53ef\u9009\u62e9 14 \u5929\u7684\u76d1\u63a7\u6570\u636e\u8fdb\u884c\u67e5\u770b\uff0c\u652f\u6301\u9009\u62e9\u65f6\u95f4\u6bb5\uff0c\u4e5f\u53ef\u4ee5\u5feb\u6377\u9009\u62e9\u6700\u8fd1 1 \u5c0f\u65f6\u30016 \u5c0f\u65f6\u300112 \u5c0f\u65f6\u30011 \u5929\u30013 \u5929\u30017 \u5929\u548c 14 \u5929\u3002</li> <li>\u9ed8\u8ba4\u52fe\u9009\u663e\u793a\u6240\u6709\u5b9e\u4f8b\u7684\u76d1\u63a7\u6570\u636e\uff0c\u53ef\u4ee5\u5728\u5b9e\u4f8b\u6846\u5185\u8c03\u6574\u3002</li> <li>\u9875\u9762\u7684\u76d1\u63a7\u6570\u636e\u9ed8\u8ba4\u4e0d\u81ea\u52a8\u66f4\u65b0\uff0c\u53ef\u4ee5\u8c03\u6574\u66f4\u65b0\u9891\u7387\u8ba9\u9875\u9762\u81ea\u52a8\u66f4\u65b0\uff0c\u4e5f\u53ef\u4ee5\u5355\u51fb\u6309\u94ae\u624b\u52a8\u66f4\u65b0\u3002</li> <li>\u5982\u679c\u9700\u8981\u8bbe\u7f6e\u57fa\u7ebf\uff0c\u4f5c\u4e3a\u53c2\u8003\u6807\u51c6\u7ebf\uff0c\u53ef\u4ee5\u5355\u51fb\u6a21\u5757\u53f3\u4e0a\u89d2\u7684 \u6309\u94ae\u3002</li> <li> <p>\u5982\u679c\u9700\u8981\u67e5\u770b\u67d0\u4e00\u9879\u66f4\u8be6\u7ec6\u7684\u76d1\u63a7\u6307\u6807\uff0c\u53ef\u4ee5\u5355\u51fb\u6a21\u5757\u53f3\u4e0a\u89d2\u7684 \u6309\u94ae\uff0c\u5728\u793a\u4f8b\u4e2d\u9009\u62e9<code>Load</code>\u67e5\u770b\u8be6\u60c5\u4fe1\u606f\uff0c\u5982\u4e0b\u56fe\u3002</p> <p></p> <ul> <li>\u53ef\u4ee5\u8bbe\u7f6e\u76d1\u63a7\u65f6\u95f4\u6bb5\u3001\u5b9e\u4f8b\u3001\u66f4\u65b0\u9891\u7387\u548c\u57fa\u7ebf\u3002</li> <li>\u53ef\u4ee5\u641c\u7d22\u548c\u52fe\u9009\u6307\u6807\u3002\u76d1\u63a7\u6307\u6807\u8be6\u60c5\u8bf7\u53c2\u89c1\u76d1\u63a7\u6307\u6807\u8bf4\u660e\u3002</li> <li>\u53ef\u4ee5\u6682\u65f6\u9690\u85cf\u4e0d\u9700\u8981\u67e5\u770b\u7684\u8282\u70b9\u3002</li> <li>\u53ef\u4ee5\u5355\u51fb \u6309\u94ae\u67e5\u770b\u6307\u6807\u8be6\u60c5\u3002</li> </ul> </li> </ul>"},{"location":"nebula-dashboard/4.use-dashboard/#_3","title":"\u670d\u52a1\u9875\u9762\u4ecb\u7ecd","text":"<p>\u5355\u51fb\u670d\u52a1-&gt;\u6982\u89c8\u8fdb\u5165\u670d\u52a1\u6982\u89c8\u9875\u9762\u3002</p> <p>\u7528\u6237\u53ef\u5feb\u901f\u67e5\u770b Graph\u3001Meta\u3001Storage \u670d\u52a1\u7684\u4fe1\u606f\u3002</p> <p>Note</p> <p>\u670d\u52a1\u76d1\u63a7\u9875\u4ec5\u652f\u6301\u6bcf\u79cd\u670d\u52a1\u8bbe\u7f6e\u4e24\u4e2a\u76d1\u63a7\u6307\u6807\uff0c\u53ef\u4ee5\u5355\u51fb\u6a21\u5757\u5185\u7684\u8bbe\u7f6e\u6309\u94ae\u8fdb\u884c\u8c03\u6574\u3002</p> <ul> <li>\u9ed8\u8ba4\u6700\u591a\u53ef\u9009\u62e9 14 \u5929\u7684\u76d1\u63a7\u6570\u636e\u8fdb\u884c\u67e5\u770b\uff0c\u652f\u6301\u9009\u62e9\u65f6\u95f4\u6bb5\uff0c\u4e5f\u53ef\u4ee5\u5feb\u6377\u9009\u62e9\u6700\u8fd1 1 \u5c0f\u65f6\u30016 \u5c0f\u65f6\u300112 \u5c0f\u65f6\u30011 \u5929\u30013 \u5929\u30017 \u5929\u548c 14 \u5929\u3002</li> <li>\u9ed8\u8ba4\u52fe\u9009\u663e\u793a\u6240\u6709\u5b9e\u4f8b\u7684\u76d1\u63a7\u6570\u636e\uff0c\u53ef\u4ee5\u5728\u5b9e\u4f8b\u6846\u5185\u8c03\u6574\u3002</li> <li>\u9875\u9762\u7684\u76d1\u63a7\u6570\u636e\u9ed8\u8ba4\u4e0d\u81ea\u52a8\u66f4\u65b0\uff0c\u53ef\u4ee5\u8c03\u6574\u66f4\u65b0\u9891\u7387\u8ba9\u9875\u9762\u81ea\u52a8\u66f4\u65b0\uff0c\u4e5f\u53ef\u4ee5\u5355\u51fb\u6309\u94ae\u624b\u52a8\u66f4\u65b0\u3002</li> <li>\u53ef\u4ee5\u67e5\u770b\u96c6\u7fa4\u5185\u6240\u6709\u670d\u52a1\u7684\u72b6\u6001\u3002</li> <li> <p>\u5982\u679c\u9700\u8981\u67e5\u770b\u67d0\u4e00\u9879\u66f4\u8be6\u7ec6\u7684\u76d1\u63a7\u6307\u6807\uff0c\u53ef\u4ee5\u5355\u51fb\u6a21\u5757\u53f3\u4e0a\u89d2\u7684 \u6309\u94ae\uff0c\u5728\u793a\u4f8b\u4e2d\u9009\u62e9 <code>Graph</code> \u67e5\u770b\u8be6\u60c5\u4fe1\u606f\uff0c\u5982\u4e0b\u56fe\u3002</p> <p></p> <ul> <li>\u53ef\u4ee5\u8bbe\u7f6e\u76d1\u63a7\u65f6\u95f4\u6bb5\u3001\u5b9e\u4f8b\u3001\u66f4\u65b0\u9891\u7387\u3001\u5468\u671f\u3001\u805a\u5408\u65b9\u5f0f\u548c\u57fa\u7ebf\u3002</li> <li>\u53ef\u4ee5\u641c\u7d22\u548c\u52fe\u9009\u6307\u6807\u3002\u76d1\u63a7\u6307\u6807\u8be6\u60c5\u8bf7\u53c2\u89c1\u76d1\u63a7\u6307\u6807\u8bf4\u660e\u3002</li> <li>\u53ef\u4ee5\u6682\u65f6\u9690\u85cf\u4e0d\u9700\u8981\u67e5\u770b\u7684\u8282\u70b9\u3002</li> <li>\u53ef\u4ee5\u5355\u51fb \u6309\u94ae\u67e5\u770b\u6307\u6807\u8be6\u60c5\u3002</li> <li>Graph \u670d\u52a1\u652f\u6301\u4e00\u7cfb\u5217\u57fa\u4e8e\u56fe\u7a7a\u95f4\u7684\u76d1\u63a7\u6307\u6807\u3002\u8be6\u60c5\u53c2\u89c1\u4e0b\u6587\u56fe\u7a7a\u95f4\u76d1\u63a7\u3002</li> </ul> </li> </ul>"},{"location":"nebula-dashboard/4.use-dashboard/#_4","title":"\u56fe\u7a7a\u95f4\u76d1\u63a7","text":"<p>Caution</p> <p>\u4f7f\u7528\u56fe\u7a7a\u95f4\u6307\u6807\u524d\uff0c\u7528\u6237\u9700\u8981\u5728 Graph \u670d\u52a1\u4e2d\uff0c\u8bbe\u7f6e<code>enable_space_level_metrics</code>\u4e3a<code>true</code>\u3002\u5177\u4f53\u64cd\u4f5c\uff0c\u53c2\u89c1Graph \u670d\u52a1\u914d\u7f6e\u3002</p> <p>\u56fe\u76d1\u63a7\u6307\u6807\u4e0d\u517c\u5bb9\u6027</p> <p>\u5982\u679c\u56fe\u7a7a\u95f4\u7684\u540d\u79f0\u5305\u62ec\u7279\u6b8a\u5b57\u7b26\uff0c\u53ef\u80fd\u4f1a\u6709\u56fe\u7a7a\u95f4\u76d1\u63a7\u6307\u6807\u6570\u636e\u4e0d\u663e\u793a\u7684\u95ee\u9898\u3002</p> <p>\u670d\u52a1\u76d1\u63a7\u9875\u9762\u8fd8\u53ef\u4ee5\u76d1\u63a7\u56fe\u7a7a\u95f4\u7ea7\u522b\u6307\u6807\u3002\u53ea\u6709\u5f53\u56fe\u7a7a\u95f4\u6307\u6807\u7684\u884c\u4e3a\u88ab\u89e6\u53d1\u540e\uff0c\u7528\u6237\u624d\u80fd\u6307\u5b9a\u56fe\u7a7a\u95f4\u67e5\u770b\u5bf9\u5e94\u7684\u56fe\u7a7a\u95f4\u6307\u6807\u7684\u4fe1\u606f\u3002\u56fe\u7a7a\u95f4\u7684\u76d1\u63a7\u6307\u6807\u8bb0\u5f55\u4e0d\u540c\u56fe\u7a7a\u95f4\u7684\u6570\u636e\u3002\u76ee\u524d\uff0c\u53ea\u6709 Graph \u670d\u52a1\u652f\u6301\u57fa\u4e8e\u56fe\u7a7a\u95f4\u7684\u76d1\u63a7\u6307\u6807\u3002</p> <p>Dashboard \u652f\u6301\u7684\u56fe\u7a7a\u95f4\u6307\u6807\uff0c\u53c2\u89c1\u56fe\u7a7a\u95f4\u7ea7\u522b\u76d1\u63a7\u6307\u6807\u3002</p>"},{"location":"nebula-dashboard/4.use-dashboard/#_5","title":"\u7ba1\u7406\u9875\u9762\u4ecb\u7ecd","text":""},{"location":"nebula-dashboard/4.use-dashboard/#_6","title":"\u4fe1\u606f\u603b\u89c8","text":"<p>\u7528\u6237\u53ef\u4ee5\u5728\u4fe1\u606f\u603b\u89c8\u9875\u9762\u67e5\u770b NebulaGraph \u5185\u6838\u76f8\u5173\u4fe1\u606f\uff0c\u5305\u62ec Storage \u670d\u52a1\u4fe1\u606f\u3001Storage Leader \u5206\u5e03\u3001 NebulaGraph \u5404\u4e2a\u670d\u52a1\u7684\u7248\u672c\u4fe1\u606f\u53ca\u6240\u5728\u8282\u70b9\u4fe1\u606f\u3001\u5206\u7247\u7684\u5206\u5e03\u60c5\u51b5\u53ca\u8be6\u7ec6\u4fe1\u606f\u3002</p> <p></p>"},{"location":"nebula-dashboard/4.use-dashboard/#storage_leader","title":"Storage Leader \u5206\u5e03","text":"<p>\u663e\u793a Leader \u6570\u91cf\u53ca Leader \u7684\u5206\u5e03\u3002</p> <ul> <li>\u5355\u51fb\u53f3\u4e0a\u89d2\u7684 Balance Leader \u6309\u94ae\u53ef\u4ee5\u5feb\u901f\u5728 NebulaGraph \u96c6\u7fa4\u4e2d\u5747\u8861\u5206\u5e03 Leader\u3002\u5173\u4e8e Leader \u7684\u8be6\u7ec6\u4fe1\u606f\uff0c\u53c2\u89c1 Storage \u670d\u52a1\u3002</li> </ul> <ul> <li>\u5355\u51fb\u53f3\u4e0a\u89d2\u7684\u8be6\u60c5\uff0c\u67e5\u770b Leader \u5206\u5e03\u7684\u8be6\u7ec6\u4fe1\u606f\u3002</li> </ul>"},{"location":"nebula-dashboard/4.use-dashboard/#_7","title":"\u7248\u672c","text":"<p>\u663e\u793a NebulaGraph \u6240\u6709\u670d\u52a1\u7248\u672c\u53ca\u670d\u52a1\u5730\u5740\u3002\u5355\u51fb\u53f3\u4e0a\u89d2\u7684\u8be6\u60c5\uff0c\u67e5\u770b\u66f4\u591a\u4fe1\u606f\u3002</p>"},{"location":"nebula-dashboard/4.use-dashboard/#_8","title":"\u670d\u52a1\u4fe1\u606f","text":"<p>\u5c55\u793a Storage \u670d\u52a1\u7684\u57fa\u672c\u4fe1\u606f\u3002\u53c2\u6570\u8bf4\u660e\u5982\u4e0b\uff1a</p> \u53c2\u6570 \u8bf4\u660e <code>Host</code> \u4e3b\u673a\u5730\u5740 <code>Port</code> \u4e3b\u673a\u7aef\u53e3\u53f7 <code>Status</code> \u4e3b\u673a\u72b6\u6001 <code>Git Info Sha</code> \u7248\u672c Commit ID <code>Leader Count</code> Leader \u603b\u6570 <code>Partition Distribution</code> \u5206\u7247\u5206\u5e03 <code>Leader Distribution</code> Leader \u5206\u5e03 <p>\u5355\u51fb\u53f3\u4e0a\u89d2\u7684\u8be6\u60c5\uff0c\u67e5\u770b\u66f4\u591a\u4fe1\u606f\u3002</p>"},{"location":"nebula-dashboard/4.use-dashboard/#partition","title":"Partition \u5206\u5e03","text":"<p>\u5de6\u4e0a\u65b9\u9009\u62e9\u6307\u5b9a\u56fe\u7a7a\u95f4\uff0c\u67e5\u770b\u56fe\u7a7a\u95f4\u7684\u5206\u7247\u5206\u5e03\u60c5\u51b5\u3002\u663e\u793a\u6240\u6709 Storage \u670d\u52a1\u7684 IP \u5730\u5740\u3001\u7aef\u53e3\uff0c\u53ca\u5bf9\u5e94 Storage \u670d\u52a1\u4e2d\u7684\u5206\u7247\u6570\u91cf\u3002</p> <p>\u5355\u51fb\u53f3\u4e0a\u89d2\u7684\u8be6\u60c5\uff0c\u67e5\u770b\u66f4\u591a\u4fe1\u606f\u3002</p>"},{"location":"nebula-dashboard/4.use-dashboard/#_9","title":"\u5206\u7247\u4fe1\u606f","text":"<p>\u663e\u793a\u5206\u7247\u4fe1\u606f\u3002\u7528\u6237\u9700\u8981\u5728\u5de6\u4e0a\u89d2\u9009\u62e9\u56fe\u7a7a\u95f4\uff0c\u67e5\u770b\u5206\u7247\u4fe1\u606f\u3002\u53c2\u6570\u8bf4\u660e\u5982\u4e0b\uff1a</p> \u53c2\u6570 \u8bf4\u660e <code>Partition ID</code> \u5206\u7247\u5e8f\u53f7\u3002 <code>Leader</code> \u5206\u7247\u7684 leader \u526f\u672c\u7684 IP \u5730\u5740\u548c\u7aef\u53e3\u3002 <code>Peers</code> \u5206\u7247\u6240\u6709\u526f\u672c\u7684 IP \u5730\u5740\u548c\u7aef\u53e3\u3002 <code>Losts</code> \u5206\u7247\u7684\u6545\u969c\u526f\u672c\u7684 IP \u5730\u5740\u548c\u7aef\u53e3\u3002 <p>\u5355\u51fb\u53f3\u4e0a\u89d2\u7684\u8be6\u60c5\uff0c\u67e5\u770b\u66f4\u591a\u4fe1\u606f\uff0c\u901a\u8fc7\u53f3\u4e0a\u89d2\u7684\u8f93\u5165\u6846\uff0c\u8f93\u5165\u5206\u7247 ID\uff0c\u7b5b\u9009\u5c55\u793a\u7684\u6570\u636e\u3002</p>"},{"location":"nebula-dashboard/4.use-dashboard/#_10","title":"\u914d\u7f6e","text":"<p>\u5c55\u793a\u670d\u52a1\u7684\u914d\u7f6e\u4fe1\u606f\u3002\u6682\u4e0d\u652f\u6301\u5728\u7ebf\u4fee\u6539\u914d\u7f6e\u3002</p>"},{"location":"nebula-dashboard/4.use-dashboard/#_11","title":"\u5176\u4ed6","text":"<p>\u5728\u9875\u9762\u5de6\u4e0b\u89d2\uff0c\u8fd8\u53ef\u4ee5\u8fdb\u884c\u5982\u4e0b\u64cd\u4f5c\uff1a</p> <ul> <li>\u9000\u51fa\u767b\u5f55</li> </ul> <ul> <li>\u5207\u6362\u4e2d\u82f1\u6587</li> </ul> <ul> <li>\u67e5\u770b\u5f53\u524d Dashboard \u7248\u672c</li> </ul> <ul> <li>\u67e5\u770b\u5e2e\u52a9\u4fe1\u606f</li> </ul> <ul> <li>\u6298\u53e0\u4fa7\u8fb9\u680f</li> </ul>"},{"location":"nebula-dashboard/6.monitor-parameter/","title":"\u76d1\u63a7\u6307\u6807\u8bf4\u660e","text":"<p>\u672c\u6587\u4ecb\u7ecd Dashboard \u4e2d\u5c55\u793a\u7684 NebulaGraph \u76d1\u63a7\u6307\u6807\u3002</p>"},{"location":"nebula-dashboard/6.monitor-parameter/#_2","title":"\u673a\u5668","text":"<p>Note</p> <ul> <li>\u4ee5\u4e0b\u673a\u5668\u6307\u6807\u9002\u7528\u4e8e Linux \u64cd\u4f5c\u7cfb\u7edf\u3002</li> <li>\u78c1\u76d8\u5bb9\u91cf\u548c\u6d41\u91cf\u7684\u9ed8\u8ba4\u5355\u4f4d\u4e3a\u5b57\u8282\uff08Byte\uff09\uff0c\u9875\u9762\u663e\u793a\u65f6\u5355\u4f4d\u4f1a\u968f\u7740\u6570\u636e\u91cf\u7ea7\u800c\u53d8\u5316\uff0c\u4f8b\u5982\u6d41\u91cf\u4f4e\u4e8e 1 KB/s \u65f6\u5355\u4f4d\u4e3a Bytes/s\u3002</li> <li>\u5bf9\u4e8e\u9ad8\u4e8e v1.0.2 \u7248\u672c\u7684\u793e\u533a\u7248 Dashboard\uff0c\u673a\u5668\u7684 Buff \u548c Cache \u6240\u5360\u7684\u5185\u5b58\u6ca1\u6709\u88ab\u8ba1\u7b97\u5728\u5185\u5b58\u4f7f\u7528\u7387\u4e2d\u3002</li> </ul>"},{"location":"nebula-dashboard/6.monitor-parameter/#cpu","title":"CPU","text":"\u53c2\u6570 \u8bf4\u660e <code>cpu_utilization</code> CPU \u5df2\u4f7f\u7528\u767e\u5206\u6bd4 <code>cpu_idle</code> CPU \u7a7a\u95f2\u767e\u5206\u6bd4 <code>cpu_wait</code> \u7b49\u5f85 IO \u64cd\u4f5c\u7684 CPU \u767e\u5206\u6bd4 <code>cpu_user</code> \u7528\u6237\u7a7a\u95f4\uff08\u975e NebulaGraph \u56fe\u7a7a\u95f4\uff09\u5360\u7528\u7684 CPU \u767e\u5206\u6bd4 <code>cpu_system</code> \u5185\u6838\u7a7a\u95f4\uff08\u975e NebulaGraph \u5185\u6838\u7a7a\u95f4\uff09\u5360\u7528\u7684 CPU \u767e\u5206\u6bd4"},{"location":"nebula-dashboard/6.monitor-parameter/#_3","title":"\u5185\u5b58","text":"\u53c2\u6570 \u8bf4\u660e <code>memory_utilization</code> \u5185\u5b58\u5df2\u4f7f\u7528\u767e\u5206\u6bd4 <code>memory_used</code> \u5df2\u4f7f\u7528\u5185\u5b58\uff08\u4e0d\u5305\u62ec\u7f13\u5b58\uff09\u3002 <code>memory_free</code> \u7a7a\u95f2\u5185\u5b58"},{"location":"nebula-dashboard/6.monitor-parameter/#_4","title":"\u8d1f\u8f7d","text":"\u53c2\u6570 \u8bf4\u660e <code>load_1m</code> \u6700\u8fd1 1 \u5206\u949f\u7cfb\u7edf\u5e73\u5747\u8d1f\u8f7d <code>load_5m</code> \u6700\u8fd1 5 \u5206\u949f\u7cfb\u7edf\u5e73\u5747\u8d1f\u8f7d <code>load_15m</code> \u6700\u8fd1 15 \u5206\u949f\u7cfb\u7edf\u5e73\u5747\u8d1f\u8f7d"},{"location":"nebula-dashboard/6.monitor-parameter/#_5","title":"\u78c1\u76d8","text":"\u53c2\u6570 \u8bf4\u660e <code>disk_used_percentage</code> \u78c1\u76d8\u4f7f\u7528\u7387 <code>disk_used</code> \u78c1\u76d8\u5df2\u4f7f\u7528\u5b58\u50a8\u7a7a\u95f4 <code>disk_free</code> \u78c1\u76d8\u5269\u4f59\u5b58\u50a8\u7a7a\u95f4 <code>disk_readbytes</code> \u78c1\u76d8\u6bcf\u79d2\u8bfb\u53d6\u7684\u5b57\u8282\u6570 <code>disk_writebytes</code> \u78c1\u76d8\u6bcf\u79d2\u5199\u5165\u7684\u5b57\u8282\u6570 <code>disk_readiops</code> \u78c1\u76d8\u6bcf\u79d2\u7684\u8bfb\u8bf7\u6c42\u6570\u91cf <code>disk_writeiops</code> \u78c1\u76d8\u6bcf\u79d2\u7684\u5199\u8bf7\u6c42\u6570\u91cf <code>inode_utilization</code> inode \u5df2\u4f7f\u7528\u767e\u5206\u6bd4"},{"location":"nebula-dashboard/6.monitor-parameter/#_6","title":"\u6d41\u91cf","text":"\u53c2\u6570 \u8bf4\u660e <code>network_in_rate</code> \u7f51\u5361\u6bcf\u79d2\u63a5\u6536\u7684\u5b57\u8282\u6570 <code>network_out_rate</code> \u7f51\u5361\u6bcf\u79d2\u53d1\u9001\u7684\u5b57\u8282\u6570 <code>network_in_errs</code> \u7f51\u5361\u6bcf\u79d2\u63a5\u6536\u9519\u8bef\u7684\u5b57\u8282\u6570 <code>network_out_errs</code> \u7f51\u5361\u6bcf\u79d2\u53d1\u9001\u9519\u8bef\u7684\u5b57\u8282\u6570 <code>network_in_packets</code> \u7f51\u5361\u6bcf\u79d2\u63a5\u6536\u7684\u6570\u636e\u5305\u6570\u91cf <code>network_out_packets</code> \u7f51\u5361\u6bcf\u79d2\u53d1\u9001\u7684\u6570\u636e\u5305\u6570\u91cf"},{"location":"nebula-dashboard/6.monitor-parameter/#_7","title":"\u670d\u52a1","text":""},{"location":"nebula-dashboard/6.monitor-parameter/#_8","title":"\u5468\u671f","text":"<p>\u6307\u6807\u7edf\u8ba1\u7684\u65f6\u95f4\u8303\u56f4\uff0c\u5f53\u524d\u652f\u6301 5 \u79d2\u300160 \u79d2\u3001600 \u79d2\u548c 3600 \u79d2\uff0c\u5206\u522b\u8868\u793a\u6700\u8fd1 5 \u79d2\u3001\u6700\u8fd1 1 \u5206\u949f\u3001\u6700\u8fd1 10 \u5206\u949f\u548c\u6700\u8fd1 1 \u5c0f\u65f6\u3002</p>"},{"location":"nebula-dashboard/6.monitor-parameter/#_9","title":"\u805a\u5408\u65b9\u5f0f","text":"\u53c2\u6570 \u8bf4\u660e <code>rate</code> \u5468\u671f\u5185\u5e73\u5747\u6bcf\u79d2\u64cd\u4f5c\u7684\u901f\u7387 <code>sum</code> \u5468\u671f\u5185\u64cd\u4f5c\u7684\u603b\u548c <code>avg</code> \u5468\u671f\u5185\u54cd\u5e94\u5e73\u5747\u8017\u65f6 <code>P75</code> \u5468\u671f\u5185\u54cd\u5e94\u8017\u65f6\u4ece\u5c0f\u5230\u5927\u6392\u5217\uff0c\u987a\u5e8f\u5904\u4e8e 75%\u4f4d\u7f6e\u7684\u5206\u4f4d\u6570 <code>P95</code> \u5468\u671f\u5185\u54cd\u5e94\u8017\u65f6\u4ece\u5c0f\u5230\u5927\u6392\u5217\uff0c\u987a\u5e8f\u5904\u4e8e 95%\u4f4d\u7f6e\u7684\u5206\u4f4d\u6570 <code>P99</code> \u5468\u671f\u5185\u54cd\u5e94\u8017\u65f6\u4ece\u5c0f\u5230\u5927\u6392\u5217\uff0c\u987a\u5e8f\u5904\u4e8e 99%\u4f4d\u7f6e\u7684\u5206\u4f4d\u6570 <code>P999</code> \u5468\u671f\u5185\u54cd\u5e94\u8017\u65f6\u4ece\u5c0f\u5230\u5927\u6392\u5217\uff0c\u987a\u5e8f\u5904\u4e8e 99.9%\u4f4d\u7f6e\u7684\u5206\u4f4d\u6570 <p>Note</p> <p>\u4ee5\u4e0b\u4e3a Dashboard \u83b7\u53d6\u5185\u6838\u7684\u5168\u91cf\u6307\u6807\uff0c\u4f46 Dashboard \u4ec5\u5c55\u793a\u91cd\u8981\u7684\u6307\u6807\u3002</p>"},{"location":"nebula-dashboard/6.monitor-parameter/#graph","title":"Graph","text":"\u53c2\u6570 \u8bf4\u660e <code>num_active_queries</code> \u6d3b\u8dc3\u7684\u67e5\u8be2\u8bed\u53e5\u6570\u7684\u53d8\u5316\u6570\u3002\u8ba1\u7b97\u516c\u5f0f\uff1a\u65f6\u95f4\u8303\u56f4\u5185\u5f00\u59cb\u6267\u884c\u7684\u8bed\u53e5\u6570\u51cf\u53bb\u6267\u884c\u5b8c\u6bd5\u7684\u8bed\u53e5\u6570\u3002 <code>num_active_sessions</code> \u6d3b\u8dc3\u7684\u4f1a\u8bdd\u6570\u7684\u53d8\u5316\u6570\u3002\u8ba1\u7b97\u516c\u5f0f\uff1a\u65f6\u95f4\u8303\u56f4\u5185\u767b\u5f55\u7684\u4f1a\u8bdd\u6570\u51cf\u53bb\u767b\u51fa\u7684\u4f1a\u8bdd\u6570\u3002\u4f8b\u5982\u67e5\u8be2num_active_sessions.sum.5\uff0c\u8fc7\u53bb 5 \u79d2\u4e2d\u767b\u5f55\u4e86 10 \u4e2a\u4f1a\u8bdd\u6570\uff0c\u767b\u51fa\u4e86 30 \u4e2a\u4f1a\u8bdd\u6570\uff0c\u90a3\u4e48\u8be5\u6307\u6807\u503c\u5c31\u662f<code>-20</code>\uff0810-30\uff09\u3002 <code>num_aggregate_executors</code> \u805a\u5408\uff08Aggregate\uff09\u7b97\u5b50\u6267\u884c\u65f6\u95f4\u3002 <code>num_auth_failed_sessions_bad_username_password</code> \u56e0\u7528\u6237\u540d\u5bc6\u7801\u9519\u8bef\u5bfc\u9a8c\u8bc1\u5931\u8d25\u7684\u4f1a\u8bdd\u6570\u91cf\u3002 <code>num_auth_failed_sessions_out_of_max_allowed</code> \u56e0\u4e3a\u8d85\u8fc7<code>FLAG_OUT_OF_MAX_ALLOWED_CONNECTIONS</code>\u53c2\u6570\u5bfc\u81f4\u7684\u9a8c\u8bc1\u767b\u5f55\u7684\u5931\u8d25\u7684\u4f1a\u8bdd\u6570\u91cf\u3002 <code>num_auth_failed_sessions</code> \u767b\u5f55\u9a8c\u8bc1\u5931\u8d25\u7684\u4f1a\u8bdd\u6570\u91cf\u3002 <code>num_indexscan_executors</code> \u7d22\u5f15\u626b\u63cf\uff08IndexScan\uff09\u7b97\u5b50\u6267\u884c\u65f6\u95f4\u3002 <code>num_killed_queries</code> \u88ab\u7ec8\u6b62\u7684\u67e5\u8be2\u6570\u91cf\u3002 <code>num_opened_sessions</code> \u670d\u52a1\u7aef\u5efa\u7acb\u8fc7\u7684\u4f1a\u8bdd\u6570\u91cf\u3002 <code>num_queries</code> \u67e5\u8be2\u6b21\u6570\u3002 <code>num_query_errors_leader_changes</code> \u56e0\u67e5\u8be2\u9519\u8bef\u800c\u5bfc\u81f4\u7684 Leader \u53d8\u66f4\u7684\u6b21\u6570\u3002 <code>num_query_errors</code> \u67e5\u8be2\u9519\u8bef\u6b21\u6570\u3002 <code>num_reclaimed_expired_sessions</code> \u670d\u52a1\u7aef\u4e3b\u52a8\u56de\u6536\u7684\u8fc7\u671f\u7684\u4f1a\u8bdd\u6570\u91cf\u3002 <code>num_rpc_sent_to_metad_failed</code> Graphd \u670d\u52a1\u53d1\u7ed9 Metad \u7684 RPC \u8bf7\u6c42\u5931\u8d25\u7684\u6570\u91cf\u3002 <code>num_rpc_sent_to_metad</code> Graphd \u670d\u52a1\u53d1\u7ed9 Metad \u670d\u52a1\u7684 RPC \u8bf7\u6c42\u6570\u91cf\u3002 <code>num_rpc_sent_to_storaged_failed</code> Graphd \u670d\u52a1\u53d1\u7ed9 Storaged \u670d\u52a1\u7684 RPC \u8bf7\u6c42\u5931\u8d25\u7684\u6570\u91cf\u3002 <code>num_rpc_sent_to_storaged</code> Graphd \u670d\u52a1\u53d1\u7ed9 Storaged \u670d\u52a1\u7684 RPC \u8bf7\u6c42\u6570\u91cf\u3002 <code>num_sentences</code> Graphd \u670d\u52a1\u63a5\u6536\u7684\u8bed\u53e5\u6570\u3002 <code>num_slow_queries</code> \u6162\u67e5\u8be2\u6b21\u6570\u3002 <code>num_sort_executors</code> \u6392\u5e8f\uff08Sort\uff09\u7b97\u5b50\u6267\u884c\u65f6\u95f4\u3002 <code>optimizer_latency_us</code> \u4f18\u5316\u5668\u9636\u6bb5\u5ef6\u8fdf\u65f6\u95f4\u3002 <code>query_latency_us</code> \u67e5\u8be2\u5ef6\u8fdf\u65f6\u95f4\u3002 <code>slow_query_latency_us</code> \u6162\u67e5\u8be2\u5ef6\u8fdf\u65f6\u95f4\u3002 <code>num_queries_hit_memory_watermark</code> \u8fbe\u5230\u5185\u5b58\u6c34\u4f4d\u7ebf\u7684\u8bed\u53e5\u7684\u6570\u91cf\u3002 <code>resp_part_completeness</code> \u90e8\u5206\u6210\u529f\u7684\u5b8c\u6574\u6027\u3002\u9700\u8981\u5728 Graph \u914d\u7f6e\u4e2d\u8bbe\u7f6e<code>accept_partial_success</code>\u4e3a<code>true</code>\u3002"},{"location":"nebula-dashboard/6.monitor-parameter/#meta","title":"Meta","text":"\u53c2\u6570 \u8bf4\u660e <code>commit_log_latency_us</code> Raft \u534f\u8bae\u4e2d Commit \u65e5\u5fd7\u7684\u5ef6\u8fdf\u65f6\u95f4\u3002 <code>commit_snapshot_latency_us</code> Raft \u534f\u8bae\u4e2d Commit \u5feb\u7167\u7684\u5ef6\u8fdf\u65f6\u95f4\u3002 <code>heartbeat_latency_us</code> \u5fc3\u8df3\u5ef6\u8fdf\u65f6\u95f4\u3002 <code>num_heartbeats</code> \u5fc3\u8df3\u6b21\u6570\u3002 <code>num_raft_votes</code> Raft \u534f\u8bae\u4e2d\u6295\u7968\u7684\u6b21\u6570\u3002 <code>transfer_leader_latency_us</code> Raft \u534f\u8bae\u4e2d\u8f6c\u79fb Leader \u7684\u5ef6\u8fdf\u65f6\u95f4\u3002 <code>num_agent_heartbeats</code> AgentHBProcessor \u5fc3\u8df3\u6b21\u6570\u3002 <code>agent_heartbeat_latency_us</code> AgentHBProcessor \u5ef6\u8fdf\u65f6\u95f4\u3002 <code>replicate_log_latency_us</code> Raft \u590d\u5236\u65e5\u5fd7\u81f3\u5927\u591a\u6570\u8282\u70b9\u7684\u5ef6\u8fdf\u3002 <code>num_send_snapshot</code> Raft \u53d1\u9001\u5feb\u7167\u81f3\u5176\u4ed6\u8282\u70b9\u7684\u6b21\u6570\u3002 <code>append_log_latency_us</code> Raft \u590d\u5236\u65e5\u5fd7\u5230\u5355\u4e2a\u8282\u70b9\u7684\u5ef6\u8fdf\u3002 <code>append_wal_latency_us</code> Raft \u5199\u5165\u5355\u6761 WAL \u7684\u5ef6\u8fdf\u3002 <code>num_grant_votes</code> Raft \u6295\u7968\u7ed9\u5176\u4ed6\u8282\u70b9\u7684\u6b21\u6570\u3002 <code>num_start_elect</code> Raft \u53d1\u8d77\u6295\u7968\u7684\u6b21\u6570\u3002"},{"location":"nebula-dashboard/6.monitor-parameter/#storage","title":"Storage","text":"\u53c2\u6570 \u8bf4\u660e <code>add_edges_latency_us</code> \u6dfb\u52a0\u8fb9\u7684\u5ef6\u8fdf\u65f6\u95f4\u3002 <code>add_vertices_latency_us</code> \u6dfb\u52a0\u70b9\u7684\u5ef6\u8fdf\u65f6\u95f4\u3002 <code>commit_log_latency_us</code> Raft \u534f\u8bae\u4e2d Commit \u65e5\u5fd7\u7684\u5ef6\u8fdf\u65f6\u95f4\u3002 <code>commit_snapshot_latency_us</code> Raft \u534f\u8bae\u4e2d Commit \u5feb\u7167\u7684\u5ef6\u8fdf\u65f6\u95f4\u3002 <code>delete_edges_latency_us</code> \u5220\u9664\u8fb9\u7684\u5ef6\u8fdf\u65f6\u95f4\u3002 <code>delete_vertices_latency_us</code> \u5220\u9664\u70b9\u7684\u5ef6\u8fdf\u65f6\u95f4\u3002 <code>get_neighbors_latency_us</code> \u67e5\u8be2\u90bb\u5c45\u5ef6\u8fdf\u65f6\u95f4\u3002 <code>get_dst_by_src_latency_us</code> \u901a\u8fc7\u8d77\u59cb\u70b9\u83b7\u53d6\u7ec8\u70b9\u7684\u5ef6\u8fdf\u65f6\u95f4\u3002 <code>num_get_prop</code> GetPropProcessor \u6267\u884c\u7684\u6b21\u6570\u3002 <code>num_get_neighbors_errors</code> GetNeighborsProcessor \u6267\u884c\u51fa\u9519\u7684\u6b21\u6570\u3002 <code>num_get_dst_by_src_errors</code> GetDstBySrcProcessor \u6267\u884c\u51fa\u9519\u7684\u6b21\u6570\u3002 <code>get_prop_latency_us</code> GetPropProcessor \u6267\u884c\u7684\u5ef6\u8fdf\u65f6\u95f4\u3002 <code>num_edges_deleted</code> \u5220\u9664\u7684\u8fb9\u6570\u91cf\u3002 <code>num_edges_inserted</code> \u63d2\u5165\u7684\u8fb9\u6570\u91cf\u3002 <code>num_raft_votes</code> Raft \u534f\u8bae\u4e2d\u6295\u7968\u7684\u6b21\u6570\u3002 <code>num_rpc_sent_to_metad_failed</code> Storaged \u670d\u52a1\u53d1\u7ed9 Metad \u670d\u52a1\u7684 RPC \u8bf7\u6c42\u5931\u8d25\u7684\u6570\u91cf\u3002 <code>num_rpc_sent_to_metad</code> Storaged \u670d\u52a1\u53d1\u7ed9 Metad \u670d\u52a1\u7684 RPC \u8bf7\u6c42\u6570\u91cf\u3002 <code>num_tags_deleted</code> \u5220\u9664\u7684 Tag \u6570\u91cf\u3002 <code>num_vertices_deleted</code> \u5220\u9664\u7684\u70b9\u6570\u91cf\u3002 <code>num_vertices_inserted</code> \u63d2\u5165\u7684\u70b9\u6570\u91cf\u3002 <code>transfer_leader_latency_us</code> Raft \u534f\u8bae\u4e2d\u8f6c\u79fb Leader \u7684\u5ef6\u8fdf\u65f6\u95f4\u3002 <code>lookup_latency_us</code> LookupProcessor \u6267\u884c\u7684\u5ef6\u8fdf\u65f6\u95f4\u3002 <code>num_lookup_errors</code> LookupProcessor \u6267\u884c\u65f6\u51fa\u9519\u7684\u6b21\u6570\u3002 <code>num_scan_vertex</code> ScanVertexProcessor \u6267\u884c\u7684\u6b21\u6570\u3002 <code>num_scan_vertex_errors</code> ScanVertexProcessor \u6267\u884c\u65f6\u51fa\u9519\u7684\u6b21\u6570\u3002 <code>update_edge_latency_us</code> UpdateEdgeProcessor \u6267\u884c\u7684\u5ef6\u8fdf\u65f6\u95f4\u3002 <code>num_update_vertex</code> UpdateVertexProcessor \u6267\u884c\u7684\u6b21\u6570\u3002 <code>num_update_vertex_errors</code> UpdateVertexProcessor \u6267\u884c\u65f6\u51fa\u9519\u7684\u6b21\u6570\u3002 <code>kv_get_latency_us</code> Getprocessor \u7684\u5ef6\u8fdf\u65f6\u95f4\u3002 <code>kv_put_latency_us</code> PutProcessor \u7684\u5ef6\u8fdf\u65f6\u95f4\u3002 <code>kv_remove_latency_us</code> RemoveProcessor \u7684\u5ef6\u8fdf\u65f6\u95f4\u3002 <code>num_kv_get_errors</code> GetProcessor \u6267\u884c\u51fa\u9519\u6b21\u6570\u3002 <code>num_kv_get</code> GetProcessor \u6267\u884c\u6b21\u6570\u3002 <code>num_kv_put_errors</code> PutProcessor \u6267\u884c\u51fa\u9519\u6b21\u6570\u3002 <code>num_kv_put</code> PutProcessor \u6267\u884c\u6b21\u6570\u3002 <code>num_kv_remove_errors</code> RemoveProcessor \u6267\u884c\u51fa\u9519\u6b21\u6570\u3002 <code>num_kv_remove</code> RemoveProcessor \u6267\u884c\u6b21\u6570\u3002 <code>forward_tranx_latency_us</code> \u4f20\u8f93\u5ef6\u8fdf\u65f6\u95f4\u3002 <code>scan_edge_latency_us</code> ScanEdgeProcessor \u6267\u884c\u7684\u5ef6\u8fdf\u65f6\u95f4\u3002 <code>num_scan_edge_errors</code> ScanEdgeProcessor \u6267\u884c\u65f6\u51fa\u9519\u7684\u6b21\u6570\u3002 <code>num_scan_edge</code> ScanEdgeProcessor \u6267\u884c\u7684\u6b21\u6570\u3002 <code>scan_vertex_latency_us</code> ScanVertexProcessor \u6267\u884c\u7684\u5ef6\u8fdf\u65f6\u95f4\u3002 <code>num_add_edges</code> \u6dfb\u52a0\u8fb9\u7684\u6b21\u6570\u3002 <code>num_add_edges_errors</code> \u6dfb\u52a0\u8fb9\u65f6\u51fa\u9519\u7684\u6b21\u6570\u3002 <code>num_add_vertices</code> \u6dfb\u52a0\u70b9\u7684\u6b21\u6570\u3002 <code>num_start_elect</code> Raft \u53d1\u8d77\u6295\u7968\u7684\u6b21\u6570 <code>num_add_vertices_errors</code> \u6dfb\u52a0\u70b9\u65f6\u51fa\u9519\u7684\u6b21\u6570\u3002 <code>num_delete_vertices_errors</code> \u5220\u9664\u70b9\u65f6\u51fa\u9519\u7684\u6b21\u6570\u3002 <code>append_log_latency_us</code> Raft \u590d\u5236\u65e5\u5fd7\u5230\u5355\u4e2a\u8282\u70b9\u7684\u5ef6\u8fdf\u3002 <code>num_grant_votes</code> Raft \u6295\u7968\u7ed9\u5176\u4ed6\u8282\u70b9\u7684\u6b21\u6570\u3002 <code>replicate_log_latency_us</code> Raft \u590d\u5236\u65e5\u5fd7\u5230\u5927\u591a\u6570\u8282\u70b9\u7684\u5ef6\u8fdf\u3002 <code>num_delete_tags</code> \u5220\u9664 Tag \u7684\u6b21\u6570\u3002 <code>num_delete_tags_errors</code> \u5220\u9664 Tag \u65f6\u51fa\u9519\u7684\u6b21\u6570\u3002 <code>num_delete_edges</code> \u5220\u9664\u8fb9\u7684\u6b21\u6570\u3002 <code>num_delete_edges_errors</code> \u5220\u9664\u8fb9\u65f6\u51fa\u9519\u7684\u6b21\u6570\u3002 <code>num_send_snapshot</code> \u53d1\u9001\u5feb\u7167\u7684\u6b21\u6570\u3002 <code>update_vertex_latency_us</code> UpdateVertexProcessor \u6267\u884c\u7684\u5ef6\u8fdf\u65f6\u95f4\u3002 <code>append_wal_latency_us</code> Raft \u5199\u5165\u5355\u6761 WAL \u7684\u5ef6\u8fdf\u3002 <code>num_update_edge</code> UpdateEdgeProcessor \u6267\u884c\u7684\u6b21\u6570\u3002 <code>delete_tags_latency_us</code> \u5220\u9664 Tag \u7684\u5ef6\u8fdf\u65f6\u95f4\u3002 <code>num_update_edge_errors</code> UpdateEdgeProcessor \u6267\u884c\u65f6\u51fa\u9519\u7684\u6b21\u6570\u3002 <code>num_get_neighbors</code> GetNeighborsProcessor \u6267\u884c\u7684\u6b21\u6570\u3002 <code>num_get_dst_by_src</code> GetDstBySrcProcessor \u6267\u884c\u7684\u6b21\u6570\u3002 <code>num_get_prop_errors</code> GetPropProcessor \u6267\u884c\u65f6\u51fa\u9519\u7684\u6b21\u6570\u3002 <code>num_delete_vertices</code> \u5220\u9664\u70b9\u7684\u6b21\u6570\u3002 <code>num_lookup</code> LookupProcessor \u6267\u884c\u7684\u6b21\u6570\u3002 <code>num_sync_data</code> Storage \u540c\u6b65 Drainer \u6570\u636e\u7684\u6b21\u6570\u3002 <code>num_sync_data_errors</code> Storage \u540c\u6b65 Drainer \u6570\u636e\u51fa\u9519\u7684\u6b21\u6570\u3002 <code>sync_data_latency_us</code> Storage \u540c\u6b65 Drainer \u6570\u636e\u7684\u5ef6\u8fdf\u65f6\u95f4\u3002"},{"location":"nebula-dashboard/6.monitor-parameter/#_10","title":"\u56fe\u7a7a\u95f4\u7ea7\u522b\u76d1\u63a7\u6307\u6807","text":"<p>Note</p> <p>\u56fe\u7a7a\u95f4\u7ea7\u522b\u76d1\u63a7\u6307\u6807\u662f\u52a8\u6001\u521b\u5efa\u7684, \u53ea\u6709\u5f53\u56fe\u7a7a\u95f4\u5185\u89e6\u53d1\u8be5\u884c\u4e3a\u65f6\uff0c\u5bf9\u5e94\u7684\u6307\u6807\u624d\u4f1a\u521b\u5efa\uff0c\u7528\u6237\u624d\u80fd\u67e5\u8be2\u5230\u3002</p> \u53c2\u6570 \u8bf4\u660e <code>num_active_queries</code> \u5f53\u524d\u6b63\u5728\u6267\u884c\u7684\u67e5\u8be2\u6570\u3002 <code>num_queries</code> \u67e5\u8be2\u6b21\u6570\u3002 <code>num_sentences</code> Graphd \u670d\u52a1\u63a5\u6536\u7684\u8bed\u53e5\u6570\u3002 <code>optimizer_latency_us</code> \u4f18\u5316\u5668\u9636\u6bb5\u5ef6\u8fdf\u65f6\u95f4\u3002 <code>query_latency_us</code> \u67e5\u8be2\u5ef6\u8fdf\u65f6\u95f4\u3002 <code>num_slow_queries</code> \u6162\u67e5\u8be2\u6b21\u6570\u3002 <code>num_query_errors</code> \u67e5\u8be2\u62a5\u9519\u8bed\u53e5\u6570\u91cf\u3002 <code>num_query_errors_leader_changes</code> \u56e0\u67e5\u8be2\u9519\u8bef\u800c\u5bfc\u81f4\u7684 Leader \u53d8\u66f4\u7684\u6b21\u6570\u3002 <code>num_killed_queries</code> \u88ab\u7ec8\u6b62\u7684\u67e5\u8be2\u6570\u91cf\u3002 <code>num_aggregate_executors</code> \u805a\u5408\uff08Aggregate\uff09\u7b97\u5b50\u6267\u884c\u65f6\u95f4\u3002 <code>num_sort_executors</code> \u6392\u5e8f\uff08Sort\uff09\u7b97\u5b50\u6267\u884c\u65f6\u95f4\u3002 <code>num_indexscan_executors</code> \u7d22\u5f15\u626b\u63cf\uff08IndexScan\uff09\u7b97\u5b50\u6267\u884c\u65f6\u95f4\u3002 <code>num_auth_failed_sessions_bad_username_password</code> \u56e0\u7528\u6237\u540d\u5bc6\u7801\u9519\u8bef\u5bfc\u9a8c\u8bc1\u5931\u8d25\u7684\u4f1a\u8bdd\u6570\u91cf\u3002 <code>num_auth_failed_sessions</code> \u767b\u5f55\u9a8c\u8bc1\u5931\u8d25\u7684\u4f1a\u8bdd\u6570\u91cf\u3002 <code>num_opened_sessions</code> \u670d\u52a1\u7aef\u5efa\u7acb\u8fc7\u7684\u4f1a\u8bdd\u6570\u91cf\u3002 <code>num_queries_hit_memory_watermark</code> \u8fbe\u5230\u5185\u5b58\u6c34\u4f4d\u7ebf\u7684\u8bed\u53e5\u7684\u6570\u91cf\u3002 <code>num_reclaimed_expired_sessions</code> \u670d\u52a1\u7aef\u4e3b\u52a8\u56de\u6536\u7684\u8fc7\u671f\u7684\u4f1a\u8bdd\u6570\u91cf\u3002 <code>num_rpc_sent_to_metad_failed</code> Graphd \u670d\u52a1\u53d1\u7ed9 Metad \u7684 RPC \u8bf7\u6c42\u5931\u8d25\u7684\u6570\u91cf\u3002 <code>num_rpc_sent_to_metad</code> Graphd \u670d\u52a1\u53d1\u7ed9 Metad \u670d\u52a1\u7684 RPC \u8bf7\u6c42\u6570\u91cf\u3002 <code>num_rpc_sent_to_storaged_failed</code> Graphd \u670d\u52a1\u53d1\u7ed9 Storaged \u670d\u52a1\u7684 RPC \u8bf7\u6c42\u5931\u8d25\u7684\u6570\u91cf\u3002 <code>num_rpc_sent_to_storaged</code> Graphd \u670d\u52a1\u53d1\u7ed9 Storaged \u670d\u52a1\u7684 RPC \u8bf7\u6c42\u6570\u91cf\u3002 <code>slow_query_latency_us</code> \u6162\u67e5\u8be2\u5ef6\u8fdf\u65f6\u95f4\u3002"},{"location":"nebula-studio/about-studio/st-ug-limitations/","title":"\u4f7f\u7528\u9650\u5236","text":"<p>\u672c\u6587\u63cf\u8ff0\u4f7f\u7528 Studio \u7684\u9650\u5236\u3002</p>"},{"location":"nebula-studio/about-studio/st-ug-limitations/#_2","title":"\u7cfb\u7edf\u67b6\u6784","text":"<p>Studio \u76ee\u524d\u4ec5\u652f\u6301 x86_64 \u67b6\u6784\u3002</p>"},{"location":"nebula-studio/about-studio/st-ug-limitations/#_3","title":"\u6570\u636e\u4e0a\u4f20","text":"<p>Studio \u4e0a\u4f20\u6570\u636e\u4ec5\u652f\u6301\u4e0a\u4f20\u65e0\u8868\u5934\u7684 CSV \u6587\u4ef6\uff0c\u4f46\u662f\uff0c\u5355\u4e2a\u6587\u4ef6\u5927\u5c0f\u53ca\u4fdd\u5b58\u65f6\u95f4\u4e0d\u53d7\u9650\u5236\uff0c\u800c\u4e14\u6570\u636e\u603b\u91cf\u4ee5\u672c\u5730\u5b58\u50a8\u5bb9\u91cf\u4e3a\u51c6\u3002</p>"},{"location":"nebula-studio/about-studio/st-ug-limitations/#_4","title":"\u6570\u636e\u5907\u4efd","text":"<p>\u76ee\u524d\u4ec5\u652f\u6301\u5728 \u63a7\u5236\u53f0 \u4e0a\u4ee5 CSV \u683c\u5f0f\u5bfc\u51fa\u67e5\u8be2\u7ed3\u679c\uff0c\u4e0d\u652f\u6301\u5176\u4ed6\u6570\u636e\u5907\u4efd\u65b9\u5f0f\u3002</p>"},{"location":"nebula-studio/about-studio/st-ug-limitations/#ngql","title":"nGQL \u652f\u6301","text":"<p>\u9664\u4ee5\u4e0b\u5185\u5bb9\u5916\uff0c\u7528\u6237\u53ef\u4ee5\u5728 \u63a7\u5236\u53f0 \u4e0a\u6267\u884c\u6240\u6709 nGQL \u8bed\u53e5\uff1a</p> <ul> <li><code>USE &lt;space_name&gt;</code>\uff1a\u53ea\u80fd\u5728 Space \u4e0b\u62c9\u5217\u8868\u4e2d\u9009\u62e9\u56fe\u7a7a\u95f4\uff0c\u4e0d\u80fd\u8fd0\u884c\u8fd9\u4e2a\u8bed\u53e5\u9009\u62e9\u56fe\u7a7a\u95f4\u3002</li> <li>\u63a7\u5236\u53f0 \u4e0a\u4f7f\u7528 nGQL \u8bed\u53e5\u65f6\uff0c\u7528\u6237\u53ef\u4ee5\u76f4\u63a5\u56de\u8f66\u6362\u884c\uff0c\u4e0d\u80fd\u4f7f\u7528\u6362\u884c\u7b26\u3002</li> </ul>"},{"location":"nebula-studio/about-studio/st-ug-limitations/#_5","title":"\u6d4f\u89c8\u5668\u652f\u6301","text":"<p>\u5efa\u8bae\u4f7f\u7528\u6700\u65b0\u7248\u672c\u7684 Chrome \u8bbf\u95ee Studio\u3002\u5426\u5219\u4f1a\u51fa\u73b0\u6837\u5f0f\u663e\u793a\u5f02\u5e38\u548c\u4ea4\u4e92\u5f02\u5e38\u7b49\u95ee\u9898\u3002</p>"},{"location":"nebula-studio/about-studio/st-ug-what-is-graph-studio/","title":"\u4ec0\u4e48\u662f NebulaGraph Studio","text":"<p>NebulaGraph Studio\uff08\u7b80\u79f0 Studio\uff09\u662f\u4e00\u6b3e\u53ef\u4ee5\u901a\u8fc7 Web \u8bbf\u95ee\u7684\u5f00\u6e90\u56fe\u6570\u636e\u5e93\u53ef\u89c6\u5316\u5de5\u5177\uff0c\u642d\u914d NebulaGraph  \u5185\u6838\u4f7f\u7528\uff0c\u63d0\u4f9b\u6784\u56fe\u3001\u6570\u636e\u5bfc\u5165\u3001\u7f16\u5199 nGQL \u67e5\u8be2\u7b49\u4e00\u7ad9\u5f0f\u670d\u52a1\u3002\u7528\u6237\u53ef\u4ee5\u5728 NebulaGraph GitHub \u4ed3\u5e93\u4e2d\u67e5\u770b\u6700\u65b0\u6e90\u7801\uff0c\u8be6\u60c5\u53c2\u89c1 nebula-studio\u3002</p> <p>Note</p> <p>\u7528\u6237\u53ef\u4ee5\u5728\u7ebf\u8bd5\u7528 Studio \u90e8\u5206\u529f\u80fd\u3002\u4f01\u4e1a\u7248 NebulaGraph \u63d0\u4f9b\u529f\u80fd\u66f4\u5f3a\u5927\u7684\u53ef\u89c6\u5316\u5de5\u5177\uff0c\u70b9\u51fb\u514d\u8d39\u8bd5\u7528\u5373\u53ef\u5728\u963f\u91cc\u4e91\u4e0a\u4f53\u9a8c\u3002</p>"},{"location":"nebula-studio/about-studio/st-ug-what-is-graph-studio/#_1","title":"\u53d1\u884c\u7248\u672c","text":"<p>\u7528\u6237\u53ef\u4ee5\u4f7f\u7528 RPM \u5305\u3001DEB \u5305\u3001tar \u5305\u548c Docker \u670d\u52a1\u5b89\u88c5\u90e8\u7f72 Studio\uff0c\u5728 Kubernetes \u96c6\u7fa4\u91cc\u8fd8\u652f\u6301\u4f7f\u7528 Helm \u5b89\u88c5\u90e8\u7f72 Studio\u3002\u8be6\u7ec6\u4fe1\u606f\u53c2\u8003 \u90e8\u7f72 Studio\u3002</p> <p>\u51e0\u79cd\u90e8\u7f72\u65b9\u5f0f\u529f\u80fd\u57fa\u672c\u76f8\u540c\uff0c\u5728\u4f7f\u7528 Studio \u65f6\u53ef\u80fd\u4f1a\u53d7\u5230\u9650\u5236\u3002\u8be6\u7ec6\u4fe1\u606f\uff0c\u53c2\u8003\u4f7f\u7528\u9650\u5236\u3002</p>"},{"location":"nebula-studio/about-studio/st-ug-what-is-graph-studio/#_2","title":"\u4ea7\u54c1\u529f\u80fd","text":"<p>Studio \u53ef\u4ee5\u65b9\u4fbf\u7ba1\u7406 NebulaGraph \u6570\u636e\uff0c\u5177\u5907\u4ee5\u4e0b\u529f\u80fd\uff1a</p> <ul> <li>\u4f7f\u7528 Schema \u7ba1\u7406\u529f\u80fd\uff0c\u7528\u6237\u53ef\u4ee5\u4f7f\u7528\u56fe\u5f62\u754c\u9762\u5b8c\u6210\u56fe\u7a7a\u95f4\u3001Tag\uff08\u6807\u7b7e\uff09\u3001Edge Type\uff08\u8fb9\u7c7b\u578b\uff09\u3001\u7d22\u5f15\u7684\u521b\u5efa\uff0c\u67e5\u770b\u56fe\u7a7a\u95f4\u7684\u7edf\u8ba1\u6570\u636e\uff0c\u5feb\u901f\u4e0a\u624b NebulaGraph \u3002</li> </ul> <ul> <li>\u4f7f\u7528\u5bfc\u5165\u529f\u80fd\uff0c\u901a\u8fc7\u7b80\u5355\u7684\u914d\u7f6e\uff0c\u7528\u6237\u5373\u80fd\u6279\u91cf\u5bfc\u5165\u70b9\u548c\u8fb9\u6570\u636e\uff0c\u5e76\u80fd\u5b9e\u65f6\u67e5\u770b\u6570\u636e\u5bfc\u5165\u65e5\u5fd7\u3002</li> </ul> <ul> <li>\u4f7f\u7528\u63a7\u5236\u53f0\u529f\u80fd\uff0c\u7528\u6237\u53ef\u4ee5\u4f7f\u7528 nGQL \u8bed\u53e5\u521b\u5efa Schema\uff0c\u5e76\u5bf9\u6570\u636e\u6267\u884c\u589e\u5220\u6539\u67e5\u64cd\u4f5c\u3002</li> </ul>"},{"location":"nebula-studio/about-studio/st-ug-what-is-graph-studio/#_3","title":"\u9002\u7528\u573a\u666f","text":"<p>\u5982\u679c\u6709\u4ee5\u4e0b\u4efb\u4e00\u9700\u6c42\uff0c\u90fd\u53ef\u4ee5\u4f7f\u7528 Studio\uff1a</p> <ul> <li>\u5df2\u7ecf\u5b89\u88c5\u90e8\u7f72\u4e86 NebulaGraph\uff0c\u60f3\u4f7f\u7528 GUI \u5de5\u5177\u521b\u5efa Schema\u3001\u5bfc\u5165\u6570\u636e\u3001\u6267\u884c nGQL \u8bed\u53e5\u67e5\u8be2\u3002</li> <li>\u521a\u5f00\u59cb\u5b66\u4e60 nGQL\uff08NebulaGraph Query Language\uff09\uff0c\u4f46\u662f\u4e0d\u4e60\u60ef\u7528\u547d\u4ee4\u884c\u5de5\u5177\uff0c\u66f4\u5e0c\u671b\u4f7f\u7528 GUI \u5de5\u5177\u67e5\u770b\u8bed\u53e5\u8f93\u51fa\u7684\u7ed3\u679c\u3002</li> </ul>"},{"location":"nebula-studio/about-studio/st-ug-what-is-graph-studio/#_4","title":"\u8eab\u4efd\u9a8c\u8bc1","text":"<p>\u56e0\u4e3a NebulaGraph \u9ed8\u8ba4\u4e0d\u542f\u7528\u8eab\u4efd\u9a8c\u8bc1\uff0c\u6240\u4ee5\u7528\u6237\u53ef\u4ee5\u4f7f\u7528 <code>root</code> \u8d26\u53f7\u548c\u4efb\u610f\u5bc6\u7801\u767b\u5f55 Studio\u3002</p> <p>\u5f53 NebulaGraph \u542f\u7528\u4e86\u8eab\u4efd\u9a8c\u8bc1\u540e\uff0c\u7528\u6237\u53ea\u80fd\u4f7f\u7528\u6307\u5b9a\u7684\u8d26\u53f7\u548c\u5bc6\u7801\u767b\u5f55 Studio\u3002\u5173\u4e8e NebulaGraph \u7684\u8eab\u4efd\u9a8c\u8bc1\u529f\u80fd\uff0c\u53c2\u8003 \u8eab\u4efd\u9a8c\u8bc1\u3002</p>"},{"location":"nebula-studio/about-studio/st-ug-what-is-graph-studio/#_5","title":"\u7248\u672c\u517c\u5bb9\u6027","text":"<p>Note</p> <p>Studio \u7248\u672c\u53d1\u5e03\u8282\u594f\u72ec\u7acb\u4e8e NebulaGraph \u5185\u6838\uff0c\u5176\u547d\u540d\u65b9\u5f0f\u4e5f\u4e0d\u53c2\u7167\u5185\u6838\u547d\u540d\u89c4\u5219\uff0c\u4e24\u8005\u517c\u5bb9\u5bf9\u5e94\u5173\u7cfb\u5982\u4e0b\u8868\u3002</p> NebulaGraph \u7248\u672c Studio \u7248\u672c 3.6.0 3.8.0\u30013.7.0 3.5.x 3.7.0 3.4.0 ~ 3.4.1 3.7.0\u30013.6.0\u30013.5.1\u30013.5.0 3.3.0 3.5.1\u30013.5.0 3.0.0 \uff5e 3.2.x 3.4.1\u30013.4.0 3.1.0 3.3.2 3.0.0 3.2.x 2.6.x 3.1.x 2.6.x 3.1.x 2.0 &amp; 2.0.1 2.x 1.x 1.x"},{"location":"nebula-studio/about-studio/st-ug-what-is-graph-studio/#_6","title":"\u7248\u672c\u66f4\u65b0","text":"<p>Studio \u5904\u4e8e\u6301\u7eed\u5f00\u53d1\u72b6\u6001\u4e2d\u3002\u7528\u6237\u53ef\u4ee5\u901a\u8fc7 Studio \u7248\u672c\u66f4\u65b0\u8bf4\u660e\u67e5\u770b\u6700\u65b0\u53d1\u5e03\u7684\u529f\u80fd\u3002</p> <p>\u6210\u529f\u8fde\u63a5 Studio \u540e\uff0c\u7528\u6237\u53ef\u4ee5\u5728\u9875\u9762\u53f3\u4e0a\u89d2\u70b9\u51fb\u7528\u6237\u5934\u50cf\uff0c\u518d\u70b9\u51fb \u66f4\u65b0\u65e5\u5fd7\uff0c\u67e5\u770b Studio \u7684\u7248\u672c\u66f4\u65b0\u8bf4\u660e\u3002</p> <p></p>"},{"location":"nebula-studio/deploy-connect/st-ug-connect/","title":"\u8fde\u63a5\u6570\u636e\u5e93","text":"<p>\u5728\u6210\u529f\u542f\u52a8 Studio \u540e\uff0c\u7528\u6237\u9700\u8981\u914d\u7f6e\u8fde\u63a5 NebulaGraph \u3002\u672c\u6587\u4e3b\u8981\u63cf\u8ff0 Studio \u5982\u4f55\u8fde\u63a5 NebulaGraph \u3002</p>"},{"location":"nebula-studio/deploy-connect/st-ug-connect/#_2","title":"\u524d\u63d0\u6761\u4ef6","text":"<p>\u5728\u8fde\u63a5 NebulaGraph \u6570\u636e\u5e93\u524d\uff0c\u7528\u6237\u9700\u8981\u786e\u8ba4\u4ee5\u4e0b\u4fe1\u606f\uff1a</p> <ul> <li>Studio \u5df2\u7ecf\u542f\u52a8\u3002\u8be6\u7ec6\u4fe1\u606f\u53c2\u8003\u90e8\u7f72 Studio\u3002</li> </ul> <ul> <li>NebulaGraph \u7684 Graph \u670d\u52a1\u672c\u673a IP \u5730\u5740\u4ee5\u53ca\u670d\u52a1\u6240\u7528\u7aef\u53e3\u3002\u9ed8\u8ba4\u7aef\u53e3\u4e3a <code>9669</code>\u3002</li> </ul> <ul> <li>NebulaGraph \u767b\u5f55\u8d26\u53f7\u4fe1\u606f\uff0c\u5305\u62ec\u7528\u6237\u540d\u548c\u5bc6\u7801\u3002</li> </ul>"},{"location":"nebula-studio/deploy-connect/st-ug-connect/#_3","title":"\u64cd\u4f5c\u6b65\u9aa4","text":"<p>\u6309\u4ee5\u4e0b\u6b65\u9aa4\u8fde\u63a5 NebulaGraph \uff1a</p> <ol> <li> <p>\u5728\u6d4f\u89c8\u5668\u5730\u5740\u680f\u8f93\u5165 <code>http://&lt;ip_address&gt;:7001</code>\u3002</p> <p>\u5728\u6d4f\u89c8\u5668\u7a97\u53e3\u4e2d\u770b\u5230\u4ee5\u4e0b\u767b\u5f55\u754c\u9762\u8868\u793a\u5df2\u7ecf\u6210\u529f\u90e8\u7f72\u5e76\u542f\u52a8\u4e86 Studio\u3002</p> <p></p> </li> <li> <p>\u5728 Studio \u7684 \u914d\u7f6e\u6570\u636e\u5e93 \u9875\u9762\u4e0a\uff0c\u8f93\u5165\u4ee5\u4e0b\u4fe1\u606f\uff1a</p> <ul> <li> <p>Graphd IP \u5730\u5740\uff1a\u586b\u5199 NebulaGraph \u7684 Graph \u670d\u52a1\u672c\u673a IP \u5730\u5740\u3002\u4f8b\u5982<code>192.168.10.100</code>\u3002</p> <p>Note</p> <ul> <li>\u5373\u4f7f NebulaGraph \u4e0e Studio \u90e8\u7f72\u5728\u540c\u4e00\u53f0\u673a\u5668\u4e0a\uff0c\u7528\u6237\u4e5f\u5fc5\u987b\u586b\u5199\u8fd9\u53f0\u673a\u5668\u7684\u672c\u673a IP \u5730\u5740\uff0c\u800c\u4e0d\u662f <code>127.0.0.1</code> \u6216\u8005 <code>localhost</code>\u3002</li> <li>\u5728\u65b0\u7684\u6807\u7b7e\u9875\u8fde\u63a5\u53e6\u4e00\u4e2a NebulaGraph \u65f6\uff0c\u4f1a\u8986\u76d6\u65e7\u6807\u7b7e\u9875\u7684\u4f1a\u8bdd\u3002\u5982\u679c\u9700\u8981\u540c\u65f6\u767b\u5f55\u591a\u4e2a NebulaGraph\uff0c\u53ef\u4ee5\u7528\u4e0d\u540c\u7684\u6d4f\u89c8\u5668\u6216\u8005\u65e0\u75d5\u6a21\u5f0f\u3002</li> </ul> </li> </ul> <ul> <li>Port\uff1aGraphd \u670d\u52a1\u7684\u7aef\u53e3\u3002\u9ed8\u8ba4\u4e3a<code>9669</code>\u3002</li> </ul> <ul> <li>\u7528\u6237\u540d \u548c \u5bc6\u7801\uff1a\u6839\u636e NebulaGraph \u7684\u8eab\u4efd\u9a8c\u8bc1\u8bbe\u7f6e\u586b\u5199\u767b\u5f55\u8d26\u53f7\u548c\u5bc6\u7801\u3002<ul> <li>\u5982\u679c\u672a\u542f\u7528\u8eab\u4efd\u9a8c\u8bc1\uff0c\u53ef\u4ee5\u586b\u5199\u9ed8\u8ba4\u7528\u6237\u540d <code>root</code> \u548c\u4efb\u610f\u5bc6\u7801\u3002</li> <li>\u5982\u679c\u5df2\u542f\u7528\u8eab\u4efd\u9a8c\u8bc1\uff0c\u4f46\u662f\u672a\u521b\u5efa\u8d26\u53f7\u4fe1\u606f\uff0c\u7528\u6237\u53ea\u80fd\u4ee5 GOD \u89d2\u8272\u767b\u5f55\uff0c\u5fc5\u987b\u586b\u5199 <code>root</code> \u53ca\u5bf9\u5e94\u7684\u5bc6\u7801 <code>nebula</code>\u3002</li> <li>\u5982\u679c\u5df2\u542f\u7528\u8eab\u4efd\u9a8c\u8bc1\uff0c\u540c\u65f6\u53c8\u521b\u5efa\u4e86\u4e0d\u540c\u7684\u7528\u6237\u5e76\u5206\u914d\u4e86\u89d2\u8272\uff0c\u4e0d\u540c\u89d2\u8272\u7684\u7528\u6237\u4f7f\u7528\u81ea\u5df1\u7684\u8d26\u53f7\u548c\u5bc6\u7801\u767b\u5f55\u3002</li> </ul> </li> </ul> </li> <li> <p>\u5b8c\u6210\u8bbe\u7f6e\u540e\uff0c\u70b9\u51fb \u8fde\u63a5 \u6309\u94ae\u3002  </p> <p>Note</p> <p>\u4e00\u6b21\u8fde\u63a5\u4f1a\u8bdd\u6301\u7eed 30 \u5206\u949f\u3002\u5982\u679c\u8d85\u8fc7 30 \u5206\u949f\u6ca1\u6709\u64cd\u4f5c\uff0c\u4f1a\u8bdd\u5373\u65ad\u5f00\uff0c\u7528\u6237\u9700\u8981\u91cd\u65b0\u767b\u5f55\u6570\u636e\u5e93\u3002</p> </li> </ol> <p>\u9996\u6b21\u767b\u5f55\u4f1a\u663e\u793a\u6b22\u8fce\u9875\uff0c\u6839\u636e\u4f7f\u7528\u6d41\u7a0b\u5c55\u793a\u76f8\u5173\u529f\u80fd\uff0c\u5e76\u4e14\u652f\u6301\u81ea\u52a8\u4e0b\u8f7d\u5e76\u5bfc\u5165\u6d4b\u8bd5\u6570\u636e\u96c6\u3002</p> <p>\u60f3\u8981\u518d\u6b21\u8bbf\u95ee\u6b22\u8fce\u9875\uff0c\u5355\u51fb \u3002</p>"},{"location":"nebula-studio/deploy-connect/st-ug-connect/#_4","title":"\u540e\u7eed\u64cd\u4f5c","text":"<p>\u6210\u529f\u8fde\u63a5 NebulaGraph \u540e\uff0c\u7528\u6237\u53ef\u4ee5\u6267\u884c\u4ee5\u4e0b\u64cd\u4f5c\uff1a</p> <ul> <li>\u4f7f\u7528\u63a7\u5236\u53f0\u6216\u8005 Schema \u9875\u9762\u7ba1\u7406 Schema\u3002</li> <li>\u6279\u91cf\u5bfc\u5165\u6570\u636e\u3002</li> <li>\u5728 \u63a7\u5236\u53f0 \u9875\u9762\u4e0a\u6267\u884c nGQL \u8bed\u53e5\u67e5\u8be2\u6570\u636e\u3002</li> <li>\u5728 Schema \u8349\u56fe\u9875\u9762\u56fe\u5f62\u5316\u8bbe\u8ba1 Schema\u3002</li> </ul> <p>Note</p> <p>\u8d26\u53f7\u7684\u6743\u9650\u51b3\u5b9a\u4e86\u80fd\u6267\u884c\u54ea\u4e9b\u64cd\u4f5c\u3002\u8be6\u60c5\u53c2\u89c1\u5185\u7f6e\u89d2\u8272\u6743\u9650\u3002</p>"},{"location":"nebula-studio/deploy-connect/st-ug-connect/#_5","title":"\u767b\u51fa","text":"<p>\u5982\u679c\u9700\u8981\u91cd\u65b0\u8fde\u63a5 NebulaGraph\uff0c\u53ef\u4ee5\u767b\u51fa\u540e\u91cd\u65b0\u914d\u7f6e\u6570\u636e\u5e93\u3002</p> <p>\u5728\u9875\u9762\u53f3\u4e0a\u89d2\u5355\u51fb\u7528\u6237\u5934\u50cf\uff0c\u5355\u51fb \u767b\u51fa\u3002</p>"},{"location":"nebula-studio/deploy-connect/st-ug-deploy/","title":"\u90e8\u7f72 Studio","text":"<p>\u672c\u6587\u4ecb\u7ecd\u5982\u4f55\u5728\u672c\u5730\u901a\u8fc7 RPM\u3001DEB\u3001tar \u5305\u548c Docker \u90e8\u7f72 Studio\u3002</p>"},{"location":"nebula-studio/deploy-connect/st-ug-deploy/#rpm_studio","title":"RPM \u90e8\u7f72 Studio","text":""},{"location":"nebula-studio/deploy-connect/st-ug-deploy/#_1","title":"\u524d\u63d0\u6761\u4ef6","text":"<p>\u5728\u90e8\u7f72 RPM \u7248 Studio \u4e4b\u524d\uff0c\u7528\u6237\u9700\u8981\u786e\u8ba4\u4ee5\u4e0b\u4fe1\u606f\uff1a</p> <ul> <li>NebulaGraph \u670d\u52a1\u5df2\u7ecf\u90e8\u7f72\u5e76\u542f\u52a8\u3002\u8be6\u7ec6\u4fe1\u606f\uff0c\u53c2\u8003 NebulaGraph \u5b89\u88c5\u90e8\u7f72\u3002</li> </ul> <ul> <li>\u4f7f\u7528\u7684 Linux \u53d1\u884c\u7248\u4e3a CentOS \uff0c\u5df2\u5b89\u88c5 lsof\u3002</li> </ul> <ul> <li> <p>\u786e\u4fdd\u4ee5\u4e0b\u7aef\u53e3\u672a\u88ab\u5360\u7528\u3002</p> \u7aef\u53e3\u53f7 \u8bf4\u660e 7001 Studio \u63d0\u4f9b web \u670d\u52a1\u4f7f\u7528\u3002 </li> </ul>"},{"location":"nebula-studio/deploy-connect/st-ug-deploy/#_2","title":"\u5b89\u88c5","text":"<ol> <li> <p>\u6839\u636e\u9700\u8981\u9009\u62e9\u5e76\u4e0b\u8f7d RPM \u5305\uff0c\u5efa\u8bae\u9009\u62e9\u6700\u65b0\u7248\u672c\u3002\u5e38\u7528\u4e0b\u8f7d\u94fe\u63a5\u5982\u4e0b\uff1a</p> \u5b89\u88c5\u5305 \u68c0\u9a8c\u548c \u9002\u7528 NebulaGraph \u7248\u672c nebula-graph-studio-3.8.0.x86_64.rpm nebula-graph-studio-3.8.0.x86_64.rpm.sha256 master </li> <li> <p>\u4f7f\u7528<code>sudo rpm -i &lt;rpm_name&gt;</code>\u547d\u4ee4\u5b89\u88c5 RPM \u5305\u3002</p> <p>\u4f8b\u5982\uff0c\u5b89\u88c5 Studio 3.8.0 \u7248\u672c\u9700\u8981\u8fd0\u884c\u4ee5\u4e0b\u547d\u4ee4\uff0c\u9ed8\u8ba4\u5b89\u88c5\u8def\u5f84\u4e3a<code>/usr/local/nebula-graph-studio</code>\uff1a</p> <p><pre><code>$ sudo rpm -i nebula-graph-studio-3.8.0.x86_64.rpm\n</code></pre>  \u4e5f\u53ef\u4ee5\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\u5b89\u88c5\u5230\u6307\u5b9a\u8def\u5f84\uff1a  <pre><code>$ sudo rpm -i nebula-graph-studio-3.8.0.x86_64.rpm --prefix=&lt;path&gt; \n</code></pre></p> <p>\u5f53\u5c4f\u5e55\u8fd4\u56de\u4ee5\u4e0b\u4fe1\u606f\u65f6\uff0c\u8868\u793a PRM \u7248 Studio \u5df2\u7ecf\u6210\u529f\u542f\u52a8\u3002</p> <pre><code>Start installing NebulaGraph Studio now...\nNebulaGraph Studio has been installed.\nNebulaGraph Studio started automatically.\n</code></pre> </li> <li> <p>\u542f\u52a8\u6210\u529f\u540e\uff0c\u5728\u6d4f\u89c8\u5668\u5730\u5740\u680f\u8f93\u5165 <code>http://&lt;ip address&gt;:7001</code>\u3002</p> <p>\u5982\u679c\u5728\u6d4f\u89c8\u5668\u7a97\u53e3\u4e2d\u80fd\u770b\u5230\u4ee5\u4e0b\u767b\u5f55\u754c\u9762\uff0c\u8868\u793a\u5df2\u7ecf\u6210\u529f\u90e8\u7f72\u5e76\u542f\u52a8 Studio\u3002</p> <p></p> </li> </ol>"},{"location":"nebula-studio/deploy-connect/st-ug-deploy/#_3","title":"\u5378\u8f7d","text":"<p>\u7528\u6237\u53ef\u4ee5\u4f7f\u7528\u4ee5\u4e0b\u7684\u547d\u4ee4\u5378\u8f7d Studio\u3002</p> <pre><code>$ sudo rpm -e nebula-graph-studio-3.8.0.x86_64\n</code></pre> <p>\u5f53\u5c4f\u5e55\u8fd4\u56de\u4ee5\u4e0b\u4fe1\u606f\u65f6\uff0c\u8868\u793a PRM \u7248 Studio \u5df2\u7ecf\u5378\u8f7d\u3002 <pre><code>NebulaGraph Studio removed, bye~\n</code></pre></p>"},{"location":"nebula-studio/deploy-connect/st-ug-deploy/#_4","title":"\u5f02\u5e38\u5904\u7406","text":"<p>\u5982\u679c\u5728\u5b89\u88c5\u8fc7\u7a0b\u4e2d\u81ea\u52a8\u542f\u52a8\u5931\u8d25\u6216\u662f\u9700\u8981\u624b\u52a8\u542f\u52a8\u6216\u505c\u6b62\u670d\u52a1\uff0c\u8bf7\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\uff1a</p> <ul> <li>\u624b\u52a8\u542f\u52a8\u670d\u52a1 <pre><code>$ bash /usr/local/nebula-graph-studio/scripts/rpm/start.sh\n</code></pre></li> </ul> <ul> <li>\u624b\u52a8\u505c\u6b62\u670d\u52a1 <pre><code>$ bash /usr/local/nebula-graph-studio/scripts/rpm/stop.sh\n</code></pre></li> </ul> <p>\u5982\u679c\u542f\u52a8\u670d\u52a1\u65f6\u9047\u5230\u62a5\u9519 <code>ERROR: bind EADDRINUSE 0.0.0.0:7001</code>\uff0c\u7528\u6237\u53ef\u4ee5\u901a\u8fc7\u4ee5\u4e0b\u547d\u4ee4\u67e5\u770b\u7aef\u53e3 7001 \u662f\u5426\u88ab\u5360\u7528\u3002 <pre><code>$ lsof -i:7001\n</code></pre></p> <p>\u5982\u679c\u7aef\u53e3\u88ab\u5360\u7528\uff0c\u4e14\u65e0\u6cd5\u7ed3\u675f\u8be5\u7aef\u53e3\u4e0a\u8fdb\u7a0b\uff0c\u7528\u6237\u53ef\u4ee5\u4fee\u6539 studio \u914d\u7f6e\u5185\u7684\u542f\u52a8\u7aef\u53e3\uff0c\u5e76\u91cd\u65b0\u542f\u52a8\u670d\u52a1\u3002 <pre><code>//\u4fee\u6539 studio \u670d\u52a1\u914d\u7f6e\u3002\u914d\u7f6e\u6587\u4ef6\u9ed8\u8ba4\u8def\u5f84\u4e3a`/usr/local/nebula-graph-studio`\u3002\n$ vi etc/studio-api.yaml\n\n//\u4fee\u6539\u7aef\u53e3\u53f7\uff0c\u6539\u6210\u4efb\u610f\u4e00\u4e2a\u5f53\u524d\u53ef\u7528\u7684\u5373\u53ef\u3002\nPort: 7001\n\n//\u91cd\u542f\u670d\u52a1\n$ systemctl restart nebula-graph-studio.service\n</code></pre></p>"},{"location":"nebula-studio/deploy-connect/st-ug-deploy/#deb_studio","title":"DEB \u90e8\u7f72 Studio","text":""},{"location":"nebula-studio/deploy-connect/st-ug-deploy/#_5","title":"\u524d\u63d0\u6761\u4ef6","text":"<p>\u5728\u901a\u8fc7 DEB \u90e8\u7f72\u5b89\u88c5 Studio \u4e4b\u524d\uff0c\u7528\u6237\u9700\u8981\u786e\u8ba4\u4ee5\u4e0b\u4fe1\u606f\uff1a</p> <ul> <li>NebulaGraph \u670d\u52a1\u5df2\u7ecf\u90e8\u7f72\u5e76\u542f\u52a8\u3002\u8be6\u7ec6\u4fe1\u606f\uff0c\u53c2\u8003 NebulaGraph \u5b89\u88c5\u90e8\u7f72\u3002</li> </ul> <ul> <li>\u4f7f\u7528\u7684 Linux \u53d1\u884c\u7248\u4e3a Ubuntu\u3002</li> </ul> <ul> <li> <p>\u786e\u4fdd\u4ee5\u4e0b\u7aef\u53e3\u672a\u88ab\u5360\u7528\u3002</p> \u7aef\u53e3\u53f7 \u8bf4\u660e 7001 Studio \u63d0\u4f9b\u7684 web \u670d\u52a1 </li> </ul> <ul> <li>\u786e\u4fdd\u7cfb\u7edf\u4e2d\u5b58\u5728<code>/usr/lib/systemd/system</code>\u76ee\u5f55\u3002\u5982\u6ca1\u6709\u8be5\u76ee\u5f55\uff0c\u9700\u624b\u52a8\u521b\u5efa\u3002</li> </ul>"},{"location":"nebula-studio/deploy-connect/st-ug-deploy/#_6","title":"\u5b89\u88c5","text":"<ol> <li> <p>\u6839\u636e\u9700\u8981\u9009\u62e9\u5e76\u4e0b\u8f7d DEB \u5305\uff0c\u5efa\u8bae\u9009\u62e9\u6700\u65b0\u7248\u672c\u3002\u5e38\u7528\u4e0b\u8f7d\u94fe\u63a5\u5982\u4e0b\uff1a</p> \u5b89\u88c5\u5305 \u68c0\u9a8c\u548c \u9002\u7528 NebulaGraph \u7248\u672c nebula-graph-studio-3.8.0.x86_64.deb nebula-graph-studio-3.8.0.x86_64.deb.sha256 master </li> <li> <p>\u4f7f\u7528<code>sudo dpkg -i &lt;deb_name&gt;</code>\u547d\u4ee4\u5b89\u88c5 DEB \u5305\u3002</p> <p>\u4f8b\u5982\uff0c\u5b89\u88c5 Studio 3.8.0 \u7248\u672c\u9700\u8981\u8fd0\u884c\u4ee5\u4e0b\u547d\u4ee4\uff1a</p> <pre><code>$ sudo dpkg -i nebula-graph-studio-3.8.0.x86_64.deb\n</code></pre> </li> <li> <p>\u542f\u52a8\u6210\u529f\u540e\uff0c\u5728\u6d4f\u89c8\u5668\u5730\u5740\u680f\u8f93\u5165 <code>http://&lt;ip address&gt;:7001</code>\u3002</p> <p>\u5982\u679c\u5728\u6d4f\u89c8\u5668\u7a97\u53e3\u4e2d\u80fd\u770b\u5230\u4ee5\u4e0b\u767b\u5f55\u754c\u9762\uff0c\u8868\u793a\u5df2\u7ecf\u6210\u529f\u90e8\u7f72\u5e76\u542f\u52a8 Studio\u3002</p> <p></p> </li> </ol>"},{"location":"nebula-studio/deploy-connect/st-ug-deploy/#_7","title":"\u5378\u8f7d","text":"<p>\u7528\u6237\u53ef\u4ee5\u4f7f\u7528\u4ee5\u4e0b\u7684\u547d\u4ee4\u5378\u8f7d Studio\u3002</p> <pre><code>$ sudo dpkg -r nebula-graph-studio\n</code></pre>"},{"location":"nebula-studio/deploy-connect/st-ug-deploy/#tar_studio","title":"tar \u5305\u90e8\u7f72 Studio","text":""},{"location":"nebula-studio/deploy-connect/st-ug-deploy/#_8","title":"\u524d\u63d0\u6761\u4ef6","text":"<p>\u5728\u90e8\u7f72 tar \u5305\u5b89\u88c5\u7684 Studio \u4e4b\u524d\uff0c\u7528\u6237\u9700\u8981\u786e\u8ba4\u4ee5\u4e0b\u4fe1\u606f\uff1a</p> <ul> <li>NebulaGraph \u670d\u52a1\u5df2\u7ecf\u90e8\u7f72\u5e76\u542f\u52a8\u3002\u8be6\u7ec6\u4fe1\u606f\uff0c\u53c2\u8003 NebulaGraph \u5b89\u88c5\u90e8\u7f72\u3002</li> </ul> <ul> <li> <p>\u786e\u4fdd\u4ee5\u4e0b\u7aef\u53e3\u672a\u88ab\u5360\u7528\u3002</p> \u7aef\u53e3\u53f7 \u8bf4\u660e 7001 Studio \u63d0\u4f9b\u7684 web \u670d\u52a1 </li> </ul>"},{"location":"nebula-studio/deploy-connect/st-ug-deploy/#_9","title":"\u5b89\u88c5\u90e8\u7f72","text":"<ol> <li> <p>\u6839\u636e\u9700\u8981\u4e0b\u8f7d tar \u5305\uff0c\u5efa\u8bae\u9009\u62e9\u6700\u65b0\u7248\u672c\u3002</p> \u5b89\u88c5\u5305 Studio \u7248\u672c \u9002\u7528 NebulaGraph \u7248\u672c nebula-graph-studio-3.8.0.x86_64.tar.gz 3.8.0 master </li> <li> <p>\u89e3\u538b tar \u5305\u3002</p> <pre><code>tar -xvf nebula-graph-studio-3.8.0.x86_64.tar.gz\n</code></pre> </li> <li> <p>\u90e8\u7f72 nebula-graph-studio \u5e76\u542f\u52a8\u3002</p> <pre><code>$ cd nebula-graph-studio\n$ ./server\n</code></pre> </li> <li> <p>\u542f\u52a8\u6210\u529f\u540e\uff0c\u5728\u6d4f\u89c8\u5668\u5730\u5740\u680f\u8f93\u5165 <code>http://&lt;ip address&gt;:7001</code>\u3002</p> <p>\u5982\u679c\u5728\u6d4f\u89c8\u5668\u7a97\u53e3\u4e2d\u80fd\u770b\u5230\u4ee5\u4e0b\u767b\u5f55\u754c\u9762\uff0c\u8868\u793a\u5df2\u7ecf\u6210\u529f\u90e8\u7f72\u5e76\u542f\u52a8 Studio\u3002</p> <p></p> </li> </ol> <p>\u7528\u6237\u53ef\u4ee5\u91c7\u7528 <code>kill &lt;pid&gt;</code> \u7684\u65b9\u5f0f\u6765\u5173\u505c\u670d\u52a1\uff1a <pre><code>$ kill $(lsof -t -i :7001) # stop nebula-graph-studio\n</code></pre></p>"},{"location":"nebula-studio/deploy-connect/st-ug-deploy/#_10","title":"\u505c\u6b62\u670d\u52a1","text":""},{"location":"nebula-studio/deploy-connect/st-ug-deploy/#docker_studio","title":"Docker \u90e8\u7f72 Studio","text":""},{"location":"nebula-studio/deploy-connect/st-ug-deploy/#_11","title":"\u524d\u63d0\u6761\u4ef6","text":"<p>\u5728\u90e8\u7f72 Docker \u7248 Studio \u4e4b\u524d\uff0c\u7528\u6237\u9700\u8981\u786e\u8ba4\u4ee5\u4e0b\u4fe1\u606f\uff1a</p> <ul> <li>NebulaGraph \u670d\u52a1\u5df2\u7ecf\u90e8\u7f72\u5e76\u542f\u52a8\u3002\u8be6\u7ec6\u4fe1\u606f\uff0c\u53c2\u8003 NebulaGraph \u5b89\u88c5\u90e8\u7f72\u3002</li> </ul> <ul> <li>\u5728\u5373\u5c06\u8fd0\u884c Docker \u7248 Studio \u7684\u673a\u5668\u4e0a\u5b89\u88c5\u5e76\u542f\u52a8 Docker Compose\u3002\u8be6\u7ec6\u4fe1\u606f\u53c2\u8003 Docker Compose \u6587\u6863\u3002</li> <li> <p>\u786e\u4fdd\u4ee5\u4e0b\u7aef\u53e3\u672a\u88ab\u5360\u7528\u3002</p> \u7aef\u53e3\u53f7 \u8bf4\u660e 7001 Studio \u63d0\u4f9b\u7684 web \u670d\u52a1 </li> </ul> <ul> <li> <p>\uff08\u53ef\u9009\uff09\u5728\u4e2d\u56fd\u5927\u9646\u4ece Docker Hub \u62c9\u53d6 Docker \u955c\u50cf\u7684\u901f\u5ea6\u53ef\u80fd\u6bd4\u8f83\u6162\uff0c\u7528\u6237\u53ef\u4ee5\u4f7f\u7528 <code>registry-mirrors</code> \u53c2\u6570\u914d\u7f6e\u52a0\u901f\u955c\u50cf\u3002\u4f8b\u5982\uff0c\u5982\u679c\u8981\u4f7f\u7528 Docker \u4e2d\u56fd\u533a\u5b98\u65b9\u955c\u50cf\u3001\u7f51\u6613\u955c\u50cf\u548c\u4e2d\u56fd\u79d1\u6280\u5927\u5b66\u7684\u955c\u50cf\uff0c\u5219\u6309\u4ee5\u4e0b\u683c\u5f0f\u914d\u7f6e <code>registry-mirrors</code> \u53c2\u6570\uff1a</p> <pre><code>{\n\"registry-mirrors\": [\n  \"https://registry.docker-cn.com\",\n  \"http://hub-mirror.c.163.com\",\n  \"https://docker.mirrors.ustc.edu.cn\"\n  ]\n}\n</code></pre> <p>\u914d\u7f6e\u6587\u4ef6\u7684\u8def\u5f84\u548c\u65b9\u6cd5\u56e0\u64cd\u4f5c\u7cfb\u7edf\u548c/\u6216 Docker Desktop \u7248\u672c\u800c\u5f02\u3002\u8be6\u7ec6\u4fe1\u606f\u53c2\u8003 Docker Daemon \u914d\u7f6e\u6587\u6863\u3002</p> </li> </ul>"},{"location":"nebula-studio/deploy-connect/st-ug-deploy/#_12","title":"\u64cd\u4f5c\u6b65\u9aa4","text":"<p>\u5728\u547d\u4ee4\u884c\u5de5\u5177\u4e2d\u6309\u4ee5\u4e0b\u6b65\u9aa4\u4f9d\u6b21\u8fd0\u884c\u547d\u4ee4\uff0c\u90e8\u7f72\u5e76\u542f\u52a8 Docker \u7248 Studio\uff0c\u8fd9\u91cc\u6211\u4eec\u7528 NebulaGraph \u7248\u672c\u4e3a master \u7684\u8fdb\u884c\u6f14\u793a\uff1a</p> <ol> <li> <p>\u4e0b\u8f7d Studio \u7684\u90e8\u7f72\u914d\u7f6e\u6587\u4ef6\u3002</p> \u5b89\u88c5\u5305 \u9002\u7528 NebulaGraph \u7248\u672c nebula-graph-studio-3.8.0.tar.gz master </li> <li> <p>\u521b\u5efa<code>nebula-graph-studio-3.8.0</code>\u76ee\u5f55\uff0c\u5e76\u5c06\u5b89\u88c5\u5305\u89e3\u538b\u81f3\u76ee\u5f55\u4e2d\u3002</p> <pre><code>mkdir nebula-graph-studio-3.8.0 &amp;&amp; tar -zxvf nebula-graph-studio-3.8.0.tar.gz -C nebula-graph-studio-3.8.0\n</code></pre> </li> <li> <p>\u89e3\u538b\u540e\u8fdb\u5165 <code>nebula-graph-studio-3.8.0</code> \u76ee\u5f55\u3002</p> <pre><code>cd nebula-graph-studio-3.8.0\n</code></pre> </li> <li> <p>\u62c9\u53d6 Studio \u7684 Docker \u955c\u50cf\u3002</p> <pre><code>docker-compose pull\n</code></pre> </li> <li> <p>\u6784\u5efa\u5e76\u542f\u52a8 Studio \u670d\u52a1\u3002\u5176\u4e2d\uff0c<code>-d</code> \u8868\u793a\u5728\u540e\u53f0\u8fd0\u884c\u670d\u52a1\u5bb9\u5668\u3002</p> <pre><code>docker-compose up -d\n</code></pre> <p>\u5f53\u5c4f\u5e55\u8fd4\u56de\u4ee5\u4e0b\u4fe1\u606f\u65f6\uff0c\u8868\u793a Docker \u7248 Studio \u5df2\u7ecf\u6210\u529f\u542f\u52a8\u3002</p> <pre><code>Creating docker_web_1      ... done\n</code></pre> </li> <li> <p>\u542f\u52a8\u6210\u529f\u540e\uff0c\u5728\u6d4f\u89c8\u5668\u5730\u5740\u680f\u8f93\u5165 <code>http://&lt;ip address&gt;:7001</code>\u3002</p> <p>Note</p> <p>\u5728\u8fd0\u884c Docker \u7248 Studio \u7684\u673a\u5668\u4e0a\uff0c\u7528\u6237\u53ef\u4ee5\u8fd0\u884c <code>ifconfig</code> \u6216\u8005 <code>ipconfig</code> \u83b7\u53d6\u672c\u673a IP \u5730\u5740\u3002\u5982\u679c\u4f7f\u7528\u8fd9\u53f0\u673a\u5668\u8bbf\u95ee Studio\uff0c\u53ef\u4ee5\u5728\u6d4f\u89c8\u5668\u5730\u5740\u680f\u91cc\u8f93\u5165 <code>http://localhost:7001</code>\u3002</p> <p>\u5982\u679c\u5728\u6d4f\u89c8\u5668\u7a97\u53e3\u4e2d\u80fd\u770b\u5230\u4ee5\u4e0b\u767b\u5f55\u754c\u9762\uff0c\u8868\u793a\u5df2\u7ecf\u6210\u529f\u90e8\u7f72\u5e76\u542f\u52a8 Studio\u3002</p> <p></p> </li> </ol>"},{"location":"nebula-studio/deploy-connect/st-ug-deploy/#helm_studio","title":"Helm \u90e8\u7f72 Studio","text":"<p>\u672c\u5c0f\u8282\u4ecb\u7ecd\u5982\u4f55\u5728 Kubernetes \u4e2d\u4f7f\u7528 Helm \u90e8\u7f72\u5e76\u542f\u52a8 Studio\u3002</p>"},{"location":"nebula-studio/deploy-connect/st-ug-deploy/#_13","title":"\u524d\u63d0\u6761\u4ef6","text":"<p>\u5b89\u88c5 Studio \u524d\uff0c\u7528\u6237\u9700\u8981\u5b89\u88c5\u4ee5\u4e0b\u8f6f\u4ef6\u5e76\u786e\u4fdd\u5b89\u88c5\u7248\u672c\u7684\u6b63\u786e\u6027\uff1a</p> \u8f6f\u4ef6 \u7248\u672c\u8981\u6c42 Kubernetes &gt;= 1.14 Helm &gt;= 3.2.0"},{"location":"nebula-studio/deploy-connect/st-ug-deploy/#_14","title":"\u64cd\u4f5c\u6b65\u9aa4","text":"<ol> <li> <p>\u514b\u9686 Studio \u7684\u6e90\u4ee3\u7801\u5230\u4e3b\u673a\u3002</p> <pre><code>$ git clone https://github.com/vesoft-inc/nebula-studio.git\n</code></pre> </li> <li> <p>\u8fdb\u5165<code>nebula-studio</code>\u76ee\u5f55\u3002</p> <pre><code>$ cd nebula-studio\n</code></pre> </li> <li> <p>\u66f4\u65b0\u5e76\u5b89\u88c5 Helm Chart\uff0c\u547d\u540d\u4e3a<code>my-studio</code>\u3002</p> <pre><code>$ helm upgrade --install my-studio --set service.type=NodePort --set service.port={30070} deployment/helm\n</code></pre> <p>Helm Chart \u914d\u7f6e\u53c2\u6570\u8bf4\u660e\u5982\u4e0b\u3002</p> \u53c2\u6570 \u9ed8\u8ba4\u503c \u63cf\u8ff0 replicaCount 0 Deployment \u7684\u526f\u672c\u6570\u3002 image.nebulaStudio.name vesoft/nebula-graph-studio nebula-graph-studio \u955c\u50cf\u7684\u4ed3\u5e93\u5730\u5740\u3002 image.nebulaStudio.version v3.9.0 nebula-graph-studio \u7684\u7248\u672c\u3002 service.type ClusterIP \u670d\u52a1\u7c7b\u578b\uff0c\u5fc5\u987b\u4e3a<code>NodePort</code>\uff0c<code>ClusterIP</code>\u6216<code>LoadBalancer</code>\u5176\u4e2d\u4e4b\u4e00\u3002 service.port 7001 nebula-graph-studio \u4e2d web \u670d\u52a1\u7684\u7aef\u53e3\u3002 service.nodePort 32701 Kubernetes \u96c6\u7fa4\u5916\u90e8\u8bbf\u95ee nebula-studio \u7684\u4ee3\u7406\u7aef\u53e3\u3002 resources.nebulaStudio {} nebula-studio \u7684\u8d44\u6e90\u9650\u5236/\u8bf7\u6c42\u3002 persistent.storageClassName \"\" storageClass \u540d\u79f0\uff0c\u5982\u679c\u4e0d\u6307\u5b9a\u5c31\u4f7f\u7528\u9ed8\u8ba4\u503c\u3002 persistent.size 5Gi \u5b58\u50a8\u76d8\u5927\u5c0f\u3002 </li> <li> <p>\u542f\u52a8\u6210\u529f\u540e\uff0c\u5728\u6d4f\u89c8\u5668\u5730\u5740\u680f\u8f93\u5165<code>http://&lt;node_address&gt;:30070</code>\u3002    \u5982\u679c\u5728\u6d4f\u89c8\u5668\u7a97\u53e3\u4e2d\u80fd\u770b\u5230\u4ee5\u4e0b\u767b\u5f55\u754c\u9762\uff0c\u8868\u793a\u5df2\u7ecf\u6210\u529f\u90e8\u7f72\u5e76\u542f\u52a8 Studio\u3002</p> <p></p> </li> </ol>"},{"location":"nebula-studio/deploy-connect/st-ug-deploy/#_15","title":"\u5378\u8f7d","text":"<pre><code>$ helm uninstall my-studio\n</code></pre>"},{"location":"nebula-studio/deploy-connect/st-ug-deploy/#_16","title":"\u540e\u7eed\u64cd\u4f5c","text":"<p>\u8fdb\u5165 Studio \u767b\u5f55\u754c\u9762\u540e\uff0c\u7528\u6237\u9700\u8981\u8fde\u63a5 NebulaGraph \u3002\u8be6\u7ec6\u4fe1\u606f\uff0c\u53c2\u8003\u8fde\u63a5\u6570\u636e\u5e93\u3002</p>"},{"location":"nebula-studio/manage-schema/st-ug-crud-edge-type/","title":"\u64cd\u4f5c Edge type","text":"<p>\u5728 NebulaGraph \u4e2d\u521b\u5efa\u56fe\u7a7a\u95f4\u540e\uff0c\u7528\u6237\u53ef\u80fd\u9700\u8981\u521b\u5efa Edge type\uff08\u8fb9\u7c7b\u578b\uff09\u3002\u7528\u6237\u53ef\u4ee5\u9009\u62e9\u4f7f\u7528 \u63a7\u5236\u53f0 \u6216\u8005 Schema \u64cd\u4f5c Edge type\u3002\u672c\u6587\u4ec5\u8bf4\u660e\u5982\u4f55\u4f7f\u7528 Schema \u64cd\u4f5c Edge type\u3002</p>"},{"location":"nebula-studio/manage-schema/st-ug-crud-edge-type/#_1","title":"\u524d\u63d0\u6761\u4ef6","text":"<p>\u5728 Studio \u4e0a\u64cd\u4f5c Edge type \u4e4b\u524d\uff0c\u7528\u6237\u5fc5\u987b\u786e\u8ba4\u4ee5\u4e0b\u4fe1\u606f\uff1a</p> <ul> <li>Studio \u5df2\u7ecf\u8fde\u63a5\u5230 NebulaGraph \u3002</li> </ul> <ul> <li>\u56fe\u7a7a\u95f4\u5df2\u7ecf\u521b\u5efa\u3002</li> </ul> <ul> <li>\u5f53\u524d\u767b\u5f55\u7684\u8d26\u53f7\u62e5\u6709 GOD\u3001ADMIN \u6216\u8005 DBA \u7684\u6743\u9650\u3002</li> </ul>"},{"location":"nebula-studio/manage-schema/st-ug-crud-edge-type/#_2","title":"\u521b\u5efa\u8fb9\u7c7b\u578b","text":"<ol> <li> <p>\u5728\u9876\u90e8\u5bfc\u822a\u680f\u4e2d\uff0c\u70b9\u51fb Schema \u9875\u7b7e\u3002</p> </li> <li> <p>\u5728 \u56fe\u7a7a\u95f4\u5217\u8868 \u4e2d\uff0c\u627e\u5230\u56fe\u7a7a\u95f4\uff0c\u70b9\u51fb\u56fe\u7a7a\u95f4\u540d\u79f0\u6216\u8005\u5728 \u64cd\u4f5c \u5217\u4e2d\u70b9\u51fb Schema\u3002</p> </li> <li> <p>\u5728 \u5f53\u524d\u56fe\u7a7a\u95f4 \u91cc\u786e\u8ba4\u56fe\u7a7a\u95f4\u540d\u79f0\u3002\u7528\u6237\u4e5f\u53ef\u4ee5\u901a\u8fc7\u9009\u62e9\u56fe\u7a7a\u95f4\u540d\u79f0\u5207\u6362\u56fe\u7a7a\u95f4\u3002</p> </li> <li> <p>\u70b9\u51fb \u8fb9\u7c7b\u578b \u9875\u7b7e\uff0c\u5e76\u70b9\u51fb + \u521b\u5efa \u6309\u94ae\u3002</p> </li> <li> <p>\u5728 \u521b\u5efa\u8fb9\u7c7b\u578b \u9875\u9762\u4e0a\uff0c\u5b8c\u6210\u4ee5\u4e0b\u8bbe\u7f6e\uff1a</p> <ol> <li> <p>\u540d\u79f0\uff1a\u8f93\u5165 Edge type \u540d\u79f0\u3002\u672c\u793a\u4f8b\u4e2d\uff0c\u8f93\u5165 <code>serve</code>\u3002</p> </li> <li> <p>\u63cf\u8ff0\uff08\u53ef\u9009\uff09\uff1a\u8f93\u5165 Edge type \u7684\u5907\u6ce8\u3002</p> </li> <li> <p>\u5b9a\u4e49\u5c5e\u6027\uff08\u53ef\u9009\uff09\uff1a\u5982\u679c Edge type \u9700\u8981\u5c5e\u6027\uff0c\u70b9\u51fb + \u6dfb\u52a0\u5c5e\u6027\uff0c\u6dfb\u52a0\u4e00\u4e2a\u6216\u591a\u4e2a\u5c5e\u6027\uff1a</p> <ul> <li>\u8f93\u5165\u5c5e\u6027\u540d\u79f0\u3002</li> <li>\u9009\u62e9\u6570\u636e\u7c7b\u578b\u3002</li> <li>\u9009\u62e9\u662f\u5426\u5141\u8bb8\u7a7a\u503c\u3002 </li> <li>\uff08\u53ef\u9009\uff09\u8f93\u5165\u9ed8\u8ba4\u503c\u3002</li> <li>\uff08\u53ef\u9009\uff09\u8f93\u5165\u5c5e\u6027\u5907\u6ce8\u3002</li> </ul> </li> <li> <p>\u8bbe\u7f6eTTL\uff08\u5b58\u6d3b\u65f6\u95f4\uff09\uff08\u53ef\u9009\uff09\uff1aEdge type \u672a\u8bbe\u7f6e\u7d22\u5f15\u65f6\uff0c\u7528\u6237\u53ef\u4ee5\u8bbe\u7f6e TTL\u3002\u52fe\u9009\u8bbe\u7f6eTTL\uff08\u5b58\u6d3b\u65f6\u95f4\uff09\uff0c\u8bbe\u7f6e<code>TTL_COL</code>\u548c<code>TTL_DURATION</code>\uff08\u5355\u4f4d\uff1a\u79d2\uff09\u3002\u8be6\u60c5\u53c2\u8003 TTL \u914d\u7f6e\u3002</p> </li> </ol> </li> <li> <p>\u5b8c\u6210\u8bbe\u7f6e\u540e\uff0c\u5728 \u5bf9\u5e94\u7684 nGQL \u8bed\u53e5 \u9762\u677f\u4e0a\uff0c\u7528\u6237\u80fd\u770b\u5230\u4e0e\u4e0a\u8ff0\u914d\u7f6e\u7b49\u4ef7\u7684 nGQL \u8bed\u53e5\u3002  </p> <p></p> </li> <li> <p>\u786e\u8ba4\u65e0\u8bef\u540e\uff0c\u70b9\u51fb \u521b\u5efa \u6309\u94ae\u3002</p> </li> </ol> <p>\u5982\u679c Edge Type \u521b\u5efa\u6210\u529f\uff0c\u8fb9\u7c7b\u578b \u9762\u677f\u4f1a\u663e\u793a\u8fd9\u4e2a Edge type \u7684\u5c5e\u6027\u5217\u8868\u3002</p>"},{"location":"nebula-studio/manage-schema/st-ug-crud-edge-type/#edge_type_1","title":"\u4fee\u6539 Edge type","text":"<p>\u6309\u4ee5\u4e0b\u6b65\u9aa4\u4f7f\u7528 Schema \u4fee\u6539 Edge type\uff1a</p> <ol> <li> <p>\u5728\u9876\u90e8\u5bfc\u822a\u680f\u4e2d\uff0c\u70b9\u51fb Schema \u9875\u7b7e\u3002</p> </li> <li> <p>\u5728 \u56fe\u7a7a\u95f4\u5217\u8868 \u4e2d\uff0c\u627e\u5230\u56fe\u7a7a\u95f4\uff0c\u70b9\u51fb\u56fe\u7a7a\u95f4\u540d\u79f0\u6216\u8005\u5728 \u64cd\u4f5c \u5217\u4e2d\u70b9\u51fb Schema\u3002</p> </li> <li> <p>\u5728 \u5f53\u524d\u56fe\u7a7a\u95f4 \u91cc\u786e\u8ba4\u56fe\u7a7a\u95f4\u540d\u79f0\u3002\u7528\u6237\u4e5f\u53ef\u4ee5\u901a\u8fc7\u9009\u62e9\u56fe\u7a7a\u95f4\u540d\u79f0\u5b8c\u6210\u56fe\u7a7a\u95f4\u5207\u6362\u3002</p> </li> <li> <p>\u70b9\u51fb \u8fb9\u7c7b\u578b \u9875\u7b7e\uff0c\u627e\u5230\u9700\u8981\u4fee\u6539\u7684 Edge Type\uff0c\u5e76\u5728 \u64cd\u4f5c \u5217\u4e2d\uff0c\u70b9\u51fb  \u56fe\u6807\u3002</p> </li> <li> <p>\u5728 \u7f16\u8f91 \u9875\u9762\uff0c\u7528\u6237\u53ef\u4ee5\u9009\u62e9\u4ee5\u4e0b\u64cd\u4f5c\uff1a</p> <ul> <li>\u5982\u679c\u8981\u4fee\u6539\u63cf\u8ff0\uff1a\u5728 \u63cf\u8ff0 \u53f3\u4fa7\u70b9\u51fb \u7f16\u8f91\uff0c\u4fee\u6539\u540e\u70b9\u51fb \u786e\u8ba4\u3002</li> <li>\u5982\u679c\u8981\u4fee\u6539\u5c5e\u6027\uff1a\u5728 \u5b9a\u4e49\u5c5e\u6027 \u533a\u57df\uff0c\u627e\u5230\u9700\u8981\u4fee\u6539\u7684\u5c5e\u6027\uff0c\u5728\u53f3\u4fa7\u70b9\u51fb \u7f16\u8f91\uff0c\u4fee\u6539\u540e\u70b9\u51fb \u786e\u8ba4\u3002</li> <li>\u5982\u679c\u8981\u5220\u9664\u5c5e\u6027\uff1a\u5728 \u5b9a\u4e49\u5c5e\u6027 \u533a\u57df\uff0c\u627e\u5230\u9700\u8981\u5220\u9664\u7684\u5c5e\u6027\uff0c\u5728\u53f3\u4fa7\u70b9\u51fb \u5220\u9664\uff0c\u7136\u540e\u70b9\u51fb \u786e\u8ba4\u3002</li> <li>\u5982\u679c\u8981\u6dfb\u52a0\u5c5e\u6027\uff1a\u5728 \u5b9a\u4e49\u5c5e\u6027 \u533a\u57df\uff0c\u70b9\u51fb + \u6dfb\u52a0\u5c5e\u6027\uff0c\u8bbe\u7f6e\u5c5e\u6027\u4fe1\u606f\uff0c\u70b9\u51fb \u786e\u8ba4\u3002\u8be6\u7ec6\u8bf4\u660e\u53c2\u8003\u521b\u5efa\u8fb9\u7c7b\u578b \u3002</li> <li>\u5982\u679c\u8981\u4fee\u6539 TTL \u4fe1\u606f\uff1a\u5728 \u8bbe\u7f6e TTL \u533a\u57df\uff0c\u70b9\u51fb \u7f16\u8f91\uff0c\u4fee\u6539\u540e\u70b9\u51fb \u786e\u8ba4\u3002\u8be6\u60c5\u53c2\u8003 TTL \u914d\u7f6e\u3002</li> <li>\u5982\u679c\u8981\u5220\u9664\u5df2\u7ecf\u914d\u7f6e\u7684 TTL \u4fe1\u606f\uff1a\u5728 \u8bbe\u7f6e TTL \u533a\u57df\uff0c\u53d6\u6d88\u52fe\u9009 \u8bbe\u7f6eTTL\uff08\u5b58\u6d3b\u65f6\u95f4\uff09\uff0c\u7136\u540e\u70b9\u51fb \u786e\u5b9a\u3002</li> <li> <p>\u5982\u679c\u8981\u914d\u7f6e TTL \u4fe1\u606f\uff1a\u5728 \u8bbe\u7f6e TTL \u533a\u57df\uff0c\u52fe\u9009 \u8bbe\u7f6eTTL\uff08\u5b58\u6d3b\u65f6\u95f4\uff09\uff0c\u8bbe\u7f6e<code>TTL_COL</code>\u548c<code>TTL_DURATION</code>\uff08\u5355\u4f4d\uff1a\u79d2\uff09\uff0c\u70b9\u51fb \u786e\u8ba4\u3002\u8be6\u60c5\u53c2\u8003 TTL \u914d\u7f6e\u3002</p> <p>Note</p> <p>TTL \u4e0e\u7d22\u5f15\u7684\u5171\u5b58\u95ee\u9898\uff0c\u8be6\u60c5\u8bf7\u89c1 TTL\u3002</p> </li> </ul> </li> </ol>"},{"location":"nebula-studio/manage-schema/st-ug-crud-edge-type/#edge_type_2","title":"\u5220\u9664 Edge type","text":"<p>Danger</p> <p>\u5220\u9664 Edge type \u524d\u5148\u786e\u8ba4\u5f71\u54cd\uff0c\u5df2\u5220\u9664\u7684\u6570\u636e\u5982\u672a\u5907\u4efd\u65e0\u6cd5\u6062\u590d\u3002</p> <ol> <li> <p>\u5728\u9876\u90e8\u5bfc\u822a\u680f\u4e2d\uff0c\u70b9\u51fb Schema \u9875\u7b7e\u3002</p> </li> <li> <p>\u5728 \u56fe\u7a7a\u95f4\u5217\u8868 \u4e2d\uff0c\u627e\u5230\u56fe\u7a7a\u95f4\uff0c\u70b9\u51fb\u56fe\u7a7a\u95f4\u540d\u79f0\u6216\u8005\u5728 \u64cd\u4f5c \u5217\u4e2d\u70b9\u51fb Schema\u3002</p> </li> <li> <p>\u5728 \u5f53\u524d\u56fe\u7a7a\u95f4 \u91cc\u786e\u8ba4\u56fe\u7a7a\u95f4\u540d\u79f0\u3002\u7528\u6237\u4e5f\u53ef\u4ee5\u901a\u8fc7\u9009\u62e9\u56fe\u7a7a\u95f4\u540d\u79f0\u5207\u6362\u56fe\u7a7a\u95f4\u3002</p> </li> <li> <p>\u70b9\u51fb \u8fb9\u7c7b\u578b \u9875\u7b7e\uff0c\u627e\u5230\u9700\u8981\u4fee\u6539\u7684 Edge type\uff0c\u5e76\u5728 \u64cd\u4f5c \u5217\u4e2d\uff0c\u70b9\u51fb  \u56fe\u6807\u3002</p> </li> <li> <p>\u5728\u5f39\u51fa\u7684\u5bf9\u8bdd\u6846\u4e2d\u70b9\u51fb \u786e\u8ba4\u3002</p> </li> </ol>"},{"location":"nebula-studio/manage-schema/st-ug-crud-edge-type/#_3","title":"\u540e\u7eed\u64cd\u4f5c","text":"<p>Edge type \u521b\u5efa\u6210\u529f\u540e\uff0c\u7528\u6237\u53ef\u4ee5\u5728 \u63a7\u5236\u53f0 \u4e0a\u9010\u6761\u63d2\u5165\u8fb9\u6570\u636e\uff0c\u6216\u8005\u4f7f\u7528 \u5bfc\u5165 \u529f\u80fd\u6279\u91cf\u63d2\u5165\u8fb9\u6570\u636e\u3002</p>"},{"location":"nebula-studio/manage-schema/st-ug-crud-index/","title":"\u64cd\u4f5c\u7d22\u5f15","text":"<p>\u7528\u6237\u53ef\u4ee5\u4e3a Tag \u548c Edge type \u521b\u5efa\u7d22\u5f15\uff0c\u4f7f\u5f97\u56fe\u67e5\u8be2\u65f6\u53ef\u4ee5\u4ece\u62e5\u6709\u5171\u540c\u5c5e\u6027\u7684\u540c\u4e00\u7c7b\u578b\u7684\u70b9\u6216\u8fb9\u5f00\u59cb\u904d\u5386\uff0c\u4f7f\u5927\u578b\u56fe\u7684\u67e5\u8be2\u66f4\u4e3a\u9ad8\u6548\u3002\u7528\u6237\u53ef\u4ee5\u9009\u62e9\u4f7f\u7528 \u63a7\u5236\u53f0 \u6216\u8005 Schema \u64cd\u4f5c\u7d22\u5f15\u3002\u672c\u6587\u4ec5\u8bf4\u660e\u5982\u4f55\u4f7f\u7528 Schema \u64cd\u4f5c\u7d22\u5f15\u3002</p> <p>Note</p> <p>\u4e00\u822c\u5728\u521b\u5efa\u4e86 Tag \u6216\u8005 Edge type \u4e4b\u540e\u5373\u53ef\u521b\u5efa\u7d22\u5f15\uff0c\u4f46\u662f\uff0c\u7d22\u5f15\u4f1a\u5f71\u54cd\u5199\u6027\u80fd\uff0c\u6240\u4ee5\uff0c\u5efa\u8bae\u5148\u5bfc\u5165\u6570\u636e\uff0c\u518d\u6279\u91cf\u91cd\u5efa\u7d22\u5f15\u3002\u5173\u4e8e\u7d22\u5f15\u7684\u8be6\u7ec6\u4fe1\u606f\uff0c\u53c2\u8003 \u7d22\u5f15\u4ecb\u7ecd\u3002</p>"},{"location":"nebula-studio/manage-schema/st-ug-crud-index/#_2","title":"\u524d\u63d0\u6761\u4ef6","text":"<p>\u5728 Studio \u4e0a\u64cd\u4f5c\u7d22\u5f15\u4e4b\u524d\uff0c\u7528\u6237\u5fc5\u987b\u786e\u8ba4\u4ee5\u4e0b\u4fe1\u606f\uff1a</p> <ul> <li>Studio \u5df2\u7ecf\u8fde\u63a5\u5230 NebulaGraph \u3002</li> <li>\u56fe\u7a7a\u95f4\u3001Tag \u548c Edge type \u5df2\u7ecf\u521b\u5efa\u3002</li> <li>\u5f53\u524d\u767b\u5f55\u7684\u8d26\u53f7\u62e5\u6709 GOD\u3001ADMIN \u6216\u8005 DBA \u7684\u6743\u9650\u3002</li> </ul>"},{"location":"nebula-studio/manage-schema/st-ug-crud-index/#_3","title":"\u521b\u5efa\u7d22\u5f15","text":"<ol> <li> <p>\u5728\u9876\u90e8\u5bfc\u822a\u680f\u4e2d\uff0c\u70b9\u51fb Schema \u9875\u7b7e\u3002</p> </li> <li> <p>\u5728 \u56fe\u7a7a\u95f4\u5217\u8868 \u4e2d\uff0c\u627e\u5230\u56fe\u7a7a\u95f4\uff0c\u70b9\u51fb\u56fe\u7a7a\u95f4\u540d\u79f0\u6216\u8005\u5728 \u64cd\u4f5c \u5217\u4e2d\u70b9\u51fb Schema\u3002</p> </li> <li> <p>\u5728 \u5f53\u524d\u56fe\u7a7a\u95f4 \u91cc\u786e\u8ba4\u56fe\u7a7a\u95f4\u540d\u79f0\u3002\u7528\u6237\u4e5f\u53ef\u4ee5\u901a\u8fc7\u9009\u62e9\u56fe\u7a7a\u95f4\u540d\u79f0\u5207\u6362\u56fe\u7a7a\u95f4\u3002</p> </li> <li> <p>\u70b9\u51fb \u7d22\u5f15 \u9875\u7b7e\uff0c\u5e76\u70b9\u51fb + \u521b\u5efa \u6309\u94ae\u3002</p> </li> <li> <p>\u5728 \u521b\u5efa\u7d22\u5f15 \u9875\u9762\u4e0a\uff0c\u5b8c\u6210\u4ee5\u4e0b\u8bbe\u7f6e\uff1a</p> <ol> <li>\u7d22\u5f15\u7c7b\u578b\uff1a\u9009\u62e9\u7d22\u5f15\u7c7b\u578b\uff0c\u5373 Tag \u6216\u8005 Edge type\u3002\u672c\u793a\u4f8b\u4e2d\u9009\u62e9 Edge type\u3002</li> <li>\u5173\u8054\u540d\u79f0\uff1a\u9009\u62e9\u8981\u5173\u8054\u7684 Tag \u6216 Edge type \u540d\u79f0\u3002\u672c\u793a\u4f8b\u4e2d\u9009\u62e9 follow\u3002</li> <li>\u7d22\u5f15\u540d\u79f0\uff1a\u8f93\u5165\u7d22\u5f15\u540d\u79f0\u3002\u672c\u793a\u4f8b\u4e2d\uff0c\u8f93\u5165 follow_index\u3002</li> <li>\u63cf\u8ff0\uff08\u53ef\u9009\uff09\uff1a\u8f93\u5165\u7d22\u5f15\u7684\u5907\u6ce8\u3002</li> <li> <p>\u7d22\u5f15\u5c5e\u6027\uff08\u53ef\u9009\uff09\uff1a\u70b9\u51fb + \u6dfb\u52a0\u5c5e\u6027\uff0c\u5728\u5f39\u51fa\u7684\u5bf9\u8bdd\u6846\u5217\u8868\u91cc\u9009\u62e9\u9700\u8981\u5173\u8054\u7684\u5c5e\u6027\uff0c\u70b9\u51fb \u786e\u8ba4\u3002\u5982\u679c\u9700\u8981\u5173\u8054\u591a\u4e2a\u5c5e\u6027\uff0c\u91cd\u590d\u8fd9\u4e00\u6b65\u9aa4\u3002\u7528\u6237\u53ef\u4ee5\u6309\u754c\u9762\u63d0\u793a\u91cd\u6392\u7d22\u5f15\u5c5e\u6027\u7684\u987a\u5e8f\u3002\u672c\u793a\u4f8b\u4e2d\u9009\u62e9 <code>degree</code>\u3002</p> <p>Note</p> <p>\u7d22\u5f15\u5c5e\u6027\u7684\u987a\u5e8f\u4f1a\u5f71\u54cd <code>LOOKUP</code> \u8bed\u53e5\u7684\u67e5\u8be2\u7ed3\u679c\u3002\u8be6\u7ec6\u4fe1\u606f\uff0c\u53c2\u8003 LOOKUP\u3002</p> </li> </ol> </li> <li> <p>\u5b8c\u6210\u8bbe\u7f6e\u540e\uff0c\u5728 \u5bf9\u5e94\u7684 nGQL \u9762\u677f\uff0c\u7528\u6237\u80fd\u770b\u5230\u4e0e\u4e0a\u8ff0\u914d\u7f6e\u7b49\u4ef7\u7684 nGQL \u8bed\u53e5\u3002  </p> <p></p> </li> <li> <p>\u786e\u8ba4\u65e0\u8bef\u540e\uff0c\u70b9\u51fb \u521b\u5efa \u6309\u94ae\u3002</p> </li> </ol> <p>\u5982\u679c\u7d22\u5f15\u521b\u5efa\u6210\u529f\uff0c\u7d22\u5f15 \u9762\u677f\u4f1a\u663e\u793a\u8fd9\u4e2a\u7d22\u5f15\u7684\u5c5e\u6027\u5217\u8868\u3002</p>"},{"location":"nebula-studio/manage-schema/st-ug-crud-index/#_4","title":"\u67e5\u770b\u7d22\u5f15","text":"<ol> <li> <p>\u5728\u9876\u90e8\u5bfc\u822a\u680f\u4e2d\uff0c\u70b9\u51fb Schema \u9875\u7b7e\u3002</p> </li> <li> <p>\u5728 \u56fe\u7a7a\u95f4\u5217\u8868 \u4e2d\uff0c\u627e\u5230\u56fe\u7a7a\u95f4\uff0c\u70b9\u51fb\u56fe\u7a7a\u95f4\u540d\u79f0\u6216\u8005\u5728 \u64cd\u4f5c \u5217\u4e2d\u70b9\u51fb Schema\u3002</p> </li> <li> <p>\u5728 \u5f53\u524d\u56fe\u7a7a\u95f4 \u91cc\u786e\u8ba4\u56fe\u7a7a\u95f4\u540d\u79f0\u3002\u7528\u6237\u4e5f\u53ef\u4ee5\u901a\u8fc7\u9009\u62e9\u56fe\u7a7a\u95f4\u540d\u79f0\u5207\u6362\u56fe\u7a7a\u95f4\u3002</p> </li> <li> <p>\u70b9\u51fb \u7d22\u5f15 \u9875\u7b7e\uff0c\u5728\u5217\u8868\u5de6\u4e0a\u65b9\uff0c\u9009\u62e9\u9700\u8981\u67e5\u770b\u7684\u7d22\u5f15\u7c7b\u578b\u3002</p> </li> <li> <p>\u5728\u5217\u8868\u4e2d\uff0c\u627e\u5230\u9700\u8981\u67e5\u770b\u7684\u7d22\u5f15\uff0c\u70b9\u51fb\u7d22\u5f15\u6240\u5728\u884c\u5373\u53ef\u5c55\u5f00\u67e5\u770b\u8be5\u7d22\u5f15\u76f8\u5173\u7684\u6240\u6709\u5c5e\u6027\u540d\u79f0\u3001\u6570\u636e\u7c7b\u578b\u3002</p> </li> </ol>"},{"location":"nebula-studio/manage-schema/st-ug-crud-index/#_5","title":"\u91cd\u5efa\u7d22\u5f15","text":"<ol> <li> <p>\u5728\u9876\u90e8\u5bfc\u822a\u680f\u4e2d\uff0c\u70b9\u51fb Schema \u9875\u7b7e\u3002</p> </li> <li> <p>\u5728 \u56fe\u7a7a\u95f4\u5217\u8868 \u4e2d\uff0c\u627e\u5230\u56fe\u7a7a\u95f4\uff0c\u70b9\u51fb\u56fe\u7a7a\u95f4\u540d\u79f0\u6216\u8005\u5728 \u64cd\u4f5c \u5217\u4e2d\u70b9\u51fb Schema\u3002</p> </li> <li> <p>\u5728 \u5f53\u524d\u56fe\u7a7a\u95f4 \u91cc\u786e\u8ba4\u56fe\u7a7a\u95f4\u540d\u79f0\u3002\u7528\u6237\u4e5f\u53ef\u4ee5\u901a\u8fc7\u9009\u62e9\u56fe\u7a7a\u95f4\u540d\u79f0\u5207\u6362\u56fe\u7a7a\u95f4\u3002</p> </li> <li> <p>\u70b9\u51fb \u7d22\u5f15 \u9875\u7b7e\uff0c\u5728\u5217\u8868\u5de6\u4e0a\u65b9\uff0c\u9009\u62e9\u7d22\u5f15\u7c7b\u578b\u3002</p> </li> <li> <p>\u627e\u5230\u9700\u8981\u91cd\u5efa\u7684\u7d22\u5f15\uff0c\u5728 \u64cd\u4f5c\u5217 \u70b9\u51fb \u91cd\u5efa\u7d22\u5f15\u3002</p> </li> </ol> <p>Note</p> <p>\u5173\u4e8e\u91cd\u5efa\u7d22\u5f15\uff0c\u8be6\u60c5\u53c2\u89c1 REBUILD INDEX\u3002</p>"},{"location":"nebula-studio/manage-schema/st-ug-crud-index/#_6","title":"\u5220\u9664\u7d22\u5f15","text":"<ol> <li> <p>\u5728\u9876\u90e8\u5bfc\u822a\u680f\u4e2d\uff0c\u70b9\u51fb Schema \u9875\u7b7e\u3002</p> </li> <li> <p>\u5728 \u56fe\u7a7a\u95f4\u5217\u8868 \u4e2d\uff0c\u627e\u5230\u56fe\u7a7a\u95f4\uff0c\u70b9\u51fb\u56fe\u7a7a\u95f4\u540d\u79f0\u6216\u8005\u5728 \u64cd\u4f5c \u5217\u4e2d\u70b9\u51fb Schema\u3002</p> </li> <li> <p>\u5728 \u5f53\u524d\u56fe\u7a7a\u95f4 \u91cc\u786e\u8ba4\u56fe\u7a7a\u95f4\u540d\u79f0\u3002\u7528\u6237\u4e5f\u53ef\u4ee5\u901a\u8fc7\u9009\u62e9\u56fe\u7a7a\u95f4\u540d\u79f0\u5207\u6362\u56fe\u7a7a\u95f4\u3002</p> </li> <li> <p>\u70b9\u51fb \u7d22\u5f15 \u9875\u7b7e\uff0c\u5728\u5217\u8868\u5de6\u4e0a\u65b9\uff0c\u9009\u62e9\u7d22\u5f15\u7c7b\u578b\u3002</p> </li> <li> <p>\u627e\u5230\u9700\u8981\u5220\u9664\u7684\u7d22\u5f15\uff0c\u5e76\u5728 \u64cd\u4f5c \u5217\u4e2d\uff0c\u70b9\u51fb  \u56fe\u6807\u3002</p> </li> <li> <p>\u5728\u5f39\u51fa\u7684\u5bf9\u8bdd\u6846\u4e2d\u70b9\u51fb \u786e\u8ba4\u3002</p> </li> </ol>"},{"location":"nebula-studio/manage-schema/st-ug-crud-space/","title":"\u64cd\u4f5c\u56fe\u7a7a\u95f4","text":"<p>Studio \u8fde\u63a5\u5230 NebulaGraph \u540e\uff0c\u7528\u6237\u53ef\u4ee5\u521b\u5efa\u6216\u5220\u9664\u56fe\u7a7a\u95f4\u3002\u7528\u6237\u53ef\u4ee5\u4f7f\u7528 \u63a7\u5236\u53f0 \u6216\u8005 Schema \u64cd\u4f5c\u56fe\u7a7a\u95f4\u3002\u672c\u6587\u4ec5\u8bf4\u660e\u5982\u4f55\u4f7f\u7528 Schema \u64cd\u4f5c\u56fe\u7a7a\u95f4\u3002</p>"},{"location":"nebula-studio/manage-schema/st-ug-crud-space/#_2","title":"\u524d\u63d0\u6761\u4ef6","text":"<p>\u64cd\u4f5c\u56fe\u7a7a\u95f4\u4e4b\u524d\uff0c\u7528\u6237\u9700\u8981\u786e\u4fdd\u4ee5\u4e0b\u4fe1\u606f\uff1a</p> <ul> <li>Studio \u5df2\u7ecf\u8fde\u63a5\u5230 NebulaGraph \u3002</li> <li>\u5f53\u524d\u767b\u5f55\u7684\u8d26\u53f7\u62e5\u6709\u521b\u5efa\u6216\u5220\u9664\u56fe\u7a7a\u95f4\u7684\u6743\u9650\uff0c\u5373\uff1a<ul> <li>\u5982\u679c NebulaGraph \u672a\u5f00\u542f\u8eab\u4efd\u9a8c\u8bc1\uff0c\u7528\u6237\u4ee5\u9ed8\u8ba4\u7528\u6237\u540d <code>user</code> \u8d26\u53f7\u548c\u4efb\u610f\u5bc6\u7801\u767b\u5f55\u3002</li> <li>\u5982\u679c NebulaGraph \u5df2\u5f00\u542f\u8eab\u4efd\u9a8c\u8bc1\uff0c\u7528\u6237\u4ee5 <code>root</code> \u8d26\u53f7\u53ca\u5176\u5bc6\u7801\u767b\u5f55\u3002</li> </ul> </li> </ul>"},{"location":"nebula-studio/manage-schema/st-ug-crud-space/#_3","title":"\u521b\u5efa\u56fe\u7a7a\u95f4","text":"<ol> <li> <p>\u5728\u9876\u90e8\u5bfc\u822a\u680f\u91cc\uff0c\u70b9\u51fb Schema \u9875\u7b7e\u3002</p> </li> <li> <p>\u5728\u56fe\u7a7a\u95f4\u5217\u8868\u4e0a\u65b9\uff0c\u70b9\u51fb + \u521b\u5efa\u56fe\u7a7a\u95f4 \u6309\u94ae\uff0c\u5b8c\u6210\u4ee5\u4e0b\u914d\u7f6e\uff1a</p> <ul> <li>\u540d\u79f0\uff1a\u6307\u5b9a\u56fe\u7a7a\u95f4\u540d\u79f0\uff0c\u672c\u793a\u4f8b\u4e2d\u8bbe\u7f6e\u4e3a <code>basketballplayer</code>\u3002\u4e0d\u53ef\u4e0e\u5df2\u6709\u7684\u56fe\u7a7a\u95f4\u540d\u79f0\u91cd\u590d\u3002</li> </ul> <ul> <li>vid type\uff1a\u56fe\u7a7a\u95f4\u4e2d\u70b9 ID\uff08VID\uff09\u7684\u6570\u636e\u7c7b\u578b\uff0c\u53ef\u9009\u503c\u4e3a\u5b9a\u957f\u5b57\u7b26\u4e32 <code>FIXED_STRING(&lt;N&gt;)</code> \u6216 <code>INT64</code>\uff0c\u4e00\u65e6\u5b9a\u4e49\u65e0\u6cd5\u4fee\u6539\u3002\u672c\u793a\u4f8b\u8bbe\u7f6e\u4e3a<code>FIXED_STRING(32)</code>\u3002\u8be6\u7ec6\u4fe1\u606f\uff0c\u53c2\u8003 VID\u3002</li> </ul> <ul> <li>\u63cf\u8ff0\uff1a\u56fe\u7a7a\u95f4\u7684\u63cf\u8ff0\uff0c\u6700\u5927\u4e3a 256 \u5b57\u8282\u3002\u9ed8\u8ba4\u65e0\u63cf\u8ff0\u3002\u672c\u793a\u4f8b\u8bbe\u7f6e\u4e3a<code>Statistics of basketball players</code>\u3002</li> </ul> <ul> <li>\u53ef\u9009\u53c2\u6570\uff1a\u5206\u522b\u8bbe\u7f6e <code>partition_num</code>\u3001<code>replica_factor</code> \u7684\u503c\u3002\u5728\u672c\u793a\u4f8b\u4e2d\uff0c\u4e24\u4e2a\u53c2\u6570\u5206\u522b\u8bbe\u7f6e\u4e3a <code>100</code>\u3001<code>1</code>\u3002\u8be6\u7ec6\u4fe1\u606f\uff0c\u53c2\u8003 <code>CREATE SPACE</code> \u8bed\u6cd5\u3002</li> </ul> <p>\u5728 \u5bf9\u5e94\u7684 nGQL \u8bed\u53e5 \u9762\u677f\u4e0a\uff0c\u7528\u6237\u80fd\u770b\u5230\u4e0a\u8ff0\u8bbe\u7f6e\u5bf9\u5e94\u7684 nGQL \u8bed\u53e5\u3002\u5982\u4e0b\u6240\u793a\uff1a</p> <pre><code>CREATE SPACE basketballplayer (partition_num = 100, replica_factor = 1, vid_type = FIXED_STRING(32)) COMMENT = \"Statistics of basketball players\"\n</code></pre> </li> <li> <p>\u914d\u7f6e\u786e\u8ba4\u65e0\u8bef\u540e\uff0c\u70b9\u51fb \u521b\u5efa \u6309\u94ae\u3002   \u5982\u679c\u9875\u9762\u56de\u5230 \u56fe\u7a7a\u95f4\u5217\u8868\uff0c\u800c\u4e14\u5217\u8868\u4e2d\u663e\u793a\u521a\u521b\u5efa\u7684\u56fe\u7a7a\u95f4\u4fe1\u606f\uff0c\u8868\u793a\u56fe\u7a7a\u95f4\u521b\u5efa\u6210\u529f\u3002</p> </li> </ol> <p></p>"},{"location":"nebula-studio/manage-schema/st-ug-crud-space/#_4","title":"\u5220\u9664\u56fe\u7a7a\u95f4","text":"<p>Danger</p> <p>\u5220\u9664\u56fe\u7a7a\u95f4\u4f1a\u5220\u9664\u5176\u4e2d\u7684\u6240\u6709\u6570\u636e\uff0c\u5df2\u5220\u9664\u7684\u6570\u636e\u5982\u672a\u5907\u4efd\u65e0\u6cd5\u6062\u590d\u3002</p> <ol> <li> <p>\u5728\u9876\u90e8\u5bfc\u822a\u680f\u91cc\uff0c\u70b9\u51fb Schema \u9875\u7b7e\u3002</p> </li> <li> <p>\u5728\u56fe\u7a7a\u95f4\u5217\u8868\u91cc\uff0c\u627e\u5230\u9700\u8981\u5220\u9664\u7684\u56fe\u7a7a\u95f4\uff0c\u5e76\u5728 \u64cd\u4f5c \u5217\u4e2d\uff0c\u9009\u62e9 \u5220\u9664\u56fe\u7a7a\u95f4\u3002</p> <p></p> </li> <li> <p>\u5728\u5f39\u51fa\u7684\u5bf9\u8bdd\u6846\u4e2d\u70b9\u51fb \u786e\u8ba4\u3002</p> </li> </ol>"},{"location":"nebula-studio/manage-schema/st-ug-crud-space/#_5","title":"\u540e\u7eed\u64cd\u4f5c","text":"<p>\u56fe\u7a7a\u95f4\u521b\u5efa\u6210\u529f\u540e\uff0c\u7528\u6237\u53ef\u4ee5\u5f00\u59cb\u521b\u5efa\u6216\u4fee\u6539 Schema\uff0c\u5305\u62ec\uff1a</p> <ul> <li>\u64cd\u4f5c Tag</li> <li>\u64cd\u4f5c Edge type</li> <li>\u64cd\u4f5c\u7d22\u5f15</li> </ul>"},{"location":"nebula-studio/manage-schema/st-ug-crud-tag/","title":"\u64cd\u4f5c Tag\uff08\u70b9\u7c7b\u578b\uff09","text":"<p>\u5728 NebulaGraph \u4e2d\u521b\u5efa\u56fe\u7a7a\u95f4\u540e\uff0c\u7528\u6237\u9700\u8981\u521b\u5efa Tag\uff08\u70b9\u7c7b\u578b\uff09\u3002\u7528\u6237\u53ef\u4ee5\u9009\u62e9\u4f7f\u7528 \u63a7\u5236\u53f0 \u6216\u8005 Schema \u7ba1\u7406\u529f\u80fd\u64cd\u4f5c Tag\u3002\u672c\u6587\u4ec5\u8bf4\u660e\u5982\u4f55\u4f7f\u7528 Schema \u7ba1\u7406\u529f\u80fd\u64cd\u4f5c Tag\u3002</p>"},{"location":"nebula-studio/manage-schema/st-ug-crud-tag/#_1","title":"\u524d\u63d0\u6761\u4ef6","text":"<p>\u5728 Studio \u4e0a\u64cd\u4f5c Tag \u4e4b\u524d\uff0c\u7528\u6237\u5fc5\u987b\u786e\u8ba4\u4ee5\u4e0b\u4fe1\u606f\uff1a</p> <ul> <li>Studio \u5df2\u7ecf\u8fde\u63a5\u5230 NebulaGraph \u3002</li> <li>\u56fe\u7a7a\u95f4\u5df2\u7ecf\u521b\u5efa\u3002</li> <li>\u5f53\u524d\u767b\u5f55\u7684\u8d26\u53f7\u62e5\u6709 GOD\u3001ADMIN \u6216\u8005 DBA \u7684\u6743\u9650\u3002</li> </ul>"},{"location":"nebula-studio/manage-schema/st-ug-crud-tag/#tag_1","title":"\u521b\u5efa Tag","text":"<ol> <li> <p>\u5728\u9876\u90e8\u5bfc\u822a\u680f\u4e2d\uff0c\u70b9\u51fb Schema \u9875\u7b7e\u3002</p> </li> <li> <p>\u5728 \u56fe\u7a7a\u95f4\u5217\u8868 \u4e2d\uff0c\u627e\u5230\u56fe\u7a7a\u95f4\uff0c\u70b9\u51fb\u56fe\u7a7a\u95f4\u540d\u79f0\u6216\u8005\u5728 \u64cd\u4f5c \u5217\u4e2d\u70b9\u51fb Schema\u3002</p> </li> <li> <p>\u5728 \u5f53\u524d\u56fe\u7a7a\u95f4 \u91cc\u786e\u8ba4\u56fe\u7a7a\u95f4\u540d\u79f0\u3002\u7528\u6237\u4e5f\u53ef\u4ee5\u901a\u8fc7\u9009\u62e9\u56fe\u7a7a\u95f4\u540d\u79f0\u5207\u6362\u56fe\u7a7a\u95f4\u3002</p> </li> <li> <p>\u70b9\u51fb \u6807\u7b7e \u9875\u7b7e\uff0c\u5e76\u70b9\u51fb + \u521b\u5efa \u6309\u94ae\u3002</p> </li> <li> <p>\u5728 \u521b\u5efa\u6807\u7b7e \u9875\u9762\u4e0a\uff0c\u5b8c\u6210\u4ee5\u4e0b\u8bbe\u7f6e\uff1a</p> <ol> <li> <p>\u540d\u79f0\uff1a\u8f93\u5165 Tag \u540d\u79f0\u3002\u672c\u793a\u4f8b\u4e2d\uff0c\u8f93\u5165 <code>player</code>\u3002</p> </li> <li> <p>\u63cf\u8ff0\uff08\u53ef\u9009\uff09\uff1a\u8f93\u5165 Tag \u7684\u5907\u6ce8\u3002</p> </li> <li> <p>\u5b9a\u4e49\u5c5e\u6027\uff08\u53ef\u9009\uff09\uff1a\u5982\u679c Tag \u9700\u8981\u5c5e\u6027\uff0c\u70b9\u51fb + \u6dfb\u52a0\u5c5e\u6027\uff0c\u6dfb\u52a0\u4e00\u4e2a\u6216\u591a\u4e2a\u5c5e\u6027\uff1a </p> <ul> <li>\u8f93\u5165\u5c5e\u6027\u540d\u79f0\u3002</li> </ul> <ul> <li>\u9009\u62e9\u6570\u636e\u7c7b\u578b\u3002</li> </ul> <ul> <li>\u9009\u62e9\u662f\u5426\u5141\u8bb8\u7a7a\u503c\u3002</li> </ul> <ul> <li>\uff08\u53ef\u9009\uff09\u8f93\u5165\u9ed8\u8ba4\u503c\u3002</li> </ul> <ul> <li>\uff08\u53ef\u9009\uff09\u8f93\u5165\u5c5e\u6027\u5907\u6ce8\u3002</li> </ul> </li> <li> <p>\u8bbe\u7f6eTTL\uff08\u5b58\u6d3b\u65f6\u95f4\uff09\uff08\u53ef\u9009\uff09\uff1aTag \u672a\u8bbe\u7f6e\u7d22\u5f15\u65f6\uff0c\u7528\u6237\u53ef\u4ee5\u8bbe\u7f6e TTL\u3002\u52fe\u9009\u8bbe\u7f6eTTL\uff08\u5b58\u6d3b\u65f6\u95f4\uff09\uff0c\u8bbe\u7f6e<code>TTL_COL</code>\u548c<code>TTL_DURATION</code>\uff08\u5355\u4f4d\uff1a\u79d2\uff09\u3002\u8be6\u60c5\u53c2\u8003 TTL \u914d\u7f6e\u3002</p> </li> </ol> </li> <li> <p>\u5b8c\u6210\u8bbe\u7f6e\u540e\uff0c\u5728 \u5bf9\u5e94\u7684nGQL\u8bed\u53e5 \u9762\u677f\uff0c\u7528\u6237\u80fd\u770b\u5230\u4e0e\u4e0a\u8ff0\u914d\u7f6e\u7b49\u4ef7\u7684 nGQL \u8bed\u53e5\u3002</p> <p></p> </li> <li> <p>\u786e\u8ba4\u65e0\u8bef\u540e\uff0c\u70b9\u51fb \u521b\u5efa \u6309\u94ae\u3002</p> </li> </ol> <p>\u5982\u679c Tag \u521b\u5efa\u6210\u529f\uff0c\u6807\u7b7e \u9762\u677f\u4f1a\u663e\u793a\u8fd9\u4e2a Tag \u7684\u5c5e\u6027\u5217\u8868\u3002</p>"},{"location":"nebula-studio/manage-schema/st-ug-crud-tag/#tag_2","title":"\u4fee\u6539 Tag","text":"<ol> <li> <p>\u5728\u9876\u90e8\u5bfc\u822a\u680f\u4e2d\uff0c\u70b9\u51fb Schema \u9875\u7b7e\u3002</p> </li> <li> <p>\u5728 \u56fe\u7a7a\u95f4\u5217\u8868 \u4e2d\uff0c\u627e\u5230\u56fe\u7a7a\u95f4\uff0c\u70b9\u51fb\u56fe\u7a7a\u95f4\u540d\u79f0\u6216\u8005\u5728 \u64cd\u4f5c \u5217\u4e2d\u70b9\u51fb Schema\u3002</p> </li> <li> <p>\u5728 \u5f53\u524d\u56fe\u7a7a\u95f4 \u91cc\u786e\u8ba4\u56fe\u7a7a\u95f4\u540d\u79f0\u3002\u7528\u6237\u4e5f\u53ef\u4ee5\u901a\u8fc7\u9009\u62e9\u56fe\u7a7a\u95f4\u540d\u79f0\u5207\u6362\u56fe\u7a7a\u95f4\u3002</p> </li> <li> <p>\u70b9\u51fb \u6807\u7b7e \u9875\u7b7e\uff0c\u627e\u5230\u9700\u8981\u4fee\u6539\u7684 Tag\uff0c\u5e76\u5728 \u64cd\u4f5c \u5217\u4e2d\uff0c\u70b9\u51fb  \u56fe\u6807\u3002</p> </li> <li> <p>\u5728 \u7f16\u8f91 \u9875\u9762\uff0c\u7528\u6237\u53ef\u4ee5\u9009\u62e9\u4ee5\u4e0b\u64cd\u4f5c\uff1a</p> <ul> <li>\u5982\u679c\u8981\u4fee\u6539\u63cf\u8ff0\uff1a\u5728 \u63cf\u8ff0 \u53f3\u4fa7\u70b9\u51fb \u7f16\u8f91\uff0c\u4fee\u6539\u540e\u70b9\u51fb \u786e\u8ba4\u3002</li> <li>\u5982\u679c\u8981\u4fee\u6539\u5c5e\u6027\uff1a\u5728 \u5b9a\u4e49\u5c5e\u6027 \u533a\u57df\uff0c\u627e\u5230\u9700\u8981\u4fee\u6539\u7684\u5c5e\u6027\uff0c\u5728\u53f3\u4fa7\u70b9\u51fb \u7f16\u8f91\uff0c\u4fee\u6539\u540e\u70b9\u51fb \u786e\u8ba4\u3002</li> <li>\u5982\u679c\u8981\u5220\u9664\u5c5e\u6027\uff1a\u5728 \u5b9a\u4e49\u5c5e\u6027 \u533a\u57df\uff0c\u627e\u5230\u9700\u8981\u5220\u9664\u7684\u5c5e\u6027\uff0c\u5728\u53f3\u4fa7\u70b9\u51fb \u5220\u9664\uff0c\u7136\u540e\u70b9\u51fb \u786e\u8ba4\u3002</li> <li>\u5982\u679c\u8981\u6dfb\u52a0\u5c5e\u6027\uff1a\u5728 \u5b9a\u4e49\u5c5e\u6027 \u533a\u57df\uff0c\u70b9\u51fb + \u6dfb\u52a0\u5c5e\u6027\uff0c\u8bbe\u7f6e\u5c5e\u6027\u4fe1\u606f\uff0c\u70b9\u51fb \u786e\u8ba4\u3002\u8be6\u7ec6\u8bf4\u660e\u53c2\u8003\u521b\u5efa Tag \u3002</li> <li>\u5982\u679c\u8981\u4fee\u6539 TTL \u4fe1\u606f\uff1a\u5728 \u8bbe\u7f6e TTL \u533a\u57df\uff0c\u70b9\u51fb \u7f16\u8f91\uff0c\u4fee\u6539\u540e\u70b9\u51fb \u786e\u8ba4\u3002\u8be6\u60c5\u53c2\u8003 TTL \u914d\u7f6e\u3002</li> <li>\u5982\u679c\u8981\u5220\u9664\u5df2\u7ecf\u914d\u7f6e\u7684 TTL \u4fe1\u606f\uff1a\u5728 \u8bbe\u7f6e TTL \u533a\u57df\uff0c\u53d6\u6d88\u52fe\u9009 \u8bbe\u7f6eTTL\uff08\u5b58\u6d3b\u65f6\u95f4\uff09\uff0c\u7136\u540e\u70b9\u51fb \u786e\u5b9a\u3002</li> <li> <p>\u5982\u679c\u8981\u914d\u7f6e TTL \u4fe1\u606f\uff1a\u5728 \u8bbe\u7f6e TTL \u533a\u57df\uff0c\u52fe\u9009 \u8bbe\u7f6eTTL\uff08\u5b58\u6d3b\u65f6\u95f4\uff09\uff0c\u8bbe\u7f6e<code>TTL_COL</code>\u548c<code>TTL_DURATION</code>\uff08\u5355\u4f4d\uff1a\u79d2\uff09\uff0c\u70b9\u51fb \u786e\u8ba4\u3002\u8be6\u60c5\u53c2\u8003 TTL \u914d\u7f6e\u3002</p> <p>Note</p> <p>TTL \u4e0e\u7d22\u5f15\u7684\u5171\u5b58\u95ee\u9898\uff0c\u8be6\u60c5\u53c2\u8003 TTL\u3002</p> </li> </ul> </li> </ol>"},{"location":"nebula-studio/manage-schema/st-ug-crud-tag/#tag_3","title":"\u5220\u9664 Tag","text":"<p>Danger</p> <p>\u5220\u9664 Tag \u524d\u5148\u786e\u8ba4\u5f71\u54cd\uff0c\u5df2\u5220\u9664\u7684\u6570\u636e\u5982\u672a\u5907\u4efd\u65e0\u6cd5\u6062\u590d\u3002</p> <ol> <li> <p>\u5728\u9876\u90e8\u5bfc\u822a\u680f\u4e2d\uff0c\u70b9\u51fb Schema \u9875\u7b7e\u3002</p> </li> <li> <p>\u5728 \u56fe\u7a7a\u95f4\u5217\u8868 \u4e2d\uff0c\u627e\u5230\u56fe\u7a7a\u95f4\uff0c\u70b9\u51fb\u56fe\u7a7a\u95f4\u540d\u79f0\u6216\u8005\u5728 \u64cd\u4f5c \u5217\u4e2d\u70b9\u51fb Schema\u3002</p> </li> <li> <p>\u5728 \u5f53\u524d\u56fe\u7a7a\u95f4 \u91cc\u786e\u8ba4\u56fe\u7a7a\u95f4\u540d\u79f0\u3002\u7528\u6237\u4e5f\u53ef\u4ee5\u901a\u8fc7\u9009\u62e9\u56fe\u7a7a\u95f4\u540d\u79f0\u5207\u6362\u56fe\u7a7a\u95f4\u3002</p> </li> <li> <p>\u70b9\u51fb \u6807\u7b7e \u9875\u7b7e\uff0c\u627e\u5230\u9700\u8981\u5220\u9664\u7684 Tag\uff0c\u5e76\u5728 \u64cd\u4f5c \u5217\u4e2d\uff0c\u70b9\u51fb\u56fe\u6807\u3002</p> </li> <li> <p>\u5728\u5f39\u51fa\u7684\u5bf9\u8bdd\u6846\u4e2d\u70b9\u51fb \u786e\u8ba4\u3002</p> </li> </ol>"},{"location":"nebula-studio/manage-schema/st-ug-crud-tag/#_2","title":"\u540e\u7eed\u64cd\u4f5c","text":"<p>Tag \u521b\u5efa\u6210\u529f\u540e\uff0c\u7528\u6237\u53ef\u4ee5\u5728 \u63a7\u5236\u53f0 \u4e0a\u9010\u6761\u63d2\u5165\u70b9\u6570\u636e\uff0c\u6216\u8005\u4f7f\u7528 \u5bfc\u5165 \u529f\u80fd\u6279\u91cf\u63d2\u5165\u70b9\u6570\u636e\u3002</p>"},{"location":"nebula-studio/manage-schema/st-ug-view-schema/","title":"\u67e5\u770b Schema","text":"<p>\u7528\u6237\u53ef\u4ee5\u5728 Studio \u4e0a\u53ef\u89c6\u5316\u5730\u67e5\u770b Schema\u3002</p>"},{"location":"nebula-studio/manage-schema/st-ug-view-schema/#_1","title":"\u64cd\u4f5c\u6b65\u9aa4","text":"<ol> <li> <p>\u5728\u9876\u90e8\u5bfc\u822a\u680f\u91cc\uff0c\u70b9\u51fb Schema \u9875\u7b7e\u3002</p> </li> <li> <p>\u5728\u56fe\u7a7a\u95f4\u5217\u8868\u4e2d\uff0c\u627e\u5230\u56fe\u7a7a\u95f4\uff0c\u5355\u51fb\u56fe\u7a7a\u95f4\u540d\u79f0\u6216\u8005\u5728\u64cd\u4f5c\u5217\u4e2d\u5355\u51fb Schema\u3002</p> </li> <li> <p>\u5355\u51fb\u67e5\u770b Schema \u9875\u7b7e\uff0c\u5355\u51fb\u83b7\u53d6 Schema\u3002</p> </li> </ol>"},{"location":"nebula-studio/manage-schema/st-ug-view-schema/#_2","title":"\u5176\u4ed6\u64cd\u4f5c","text":"<p>\u5728\u56fe\u7a7a\u95f4\u5217\u8868\u4e2d\uff0c\u627e\u5230\u56fe\u7a7a\u95f4\uff0c\u5728\u64cd\u4f5c\u5217\u53ef\u4ee5\u6267\u884c\u5982\u4e0b\u64cd\u4f5c\uff1a</p> <ul> <li>\u67e5\u770b Schema DDL\uff1a\u663e\u793a\u8be5\u56fe\u7a7a\u95f4\u7684 Schema \u521b\u5efa\u8bed\u53e5\uff0c\u5305\u62ec\u56fe\u7a7a\u95f4\u3001Tag\u3001Edge type \u548c\u7d22\u5f15\u3002</li> <li>\u514b\u9686\u56fe\u7a7a\u95f4\uff1a\u514b\u9686\u8be5\u56fe\u7a7a\u95f4\u7684 Schema \u5230\u65b0\u7684\u56fe\u7a7a\u95f4\u3002</li> <li>\u5220\u9664\u56fe\u7a7a\u95f4\uff1a\u5220\u9664\u8be5\u56fe\u7a7a\u95f4\uff0c\u5305\u62ec Schema \u548c\u6240\u6709\u70b9\u8fb9\u6570\u636e\u3002</li> </ul>"},{"location":"nebula-studio/quick-start/draft/","title":"Schema \u8349\u56fe","text":"<p>Studio \u652f\u6301 Schema \u8349\u56fe\u529f\u80fd\u3002\u7528\u6237\u53ef\u4ee5\u5728\u753b\u677f\u4e0a\u81ea\u884c\u8bbe\u8ba1 Schema\uff0c\u53ef\u4ee5\u76f4\u89c2\u5c55\u793a\u70b9\u8fb9\u5173\u7cfb\uff0c\u8bbe\u8ba1\u5b8c\u6210\u540e\u53ef\u4ee5\u5c06 Schema \u5e94\u7528\u5230\u6307\u5b9a\u56fe\u7a7a\u95f4\u3002</p>"},{"location":"nebula-studio/quick-start/draft/#_1","title":"\u529f\u80fd\u8bf4\u660e","text":"<ul> <li>\u56fe\u5f62\u5316\u8bbe\u8ba1 Schema\u3002</li> <li>\u5e94\u7528 Schema \u5230\u6307\u5b9a\u56fe\u7a7a\u95f4\u3002</li> <li>\u5bfc\u51fa Schema \u4e3a PNG \u683c\u5f0f\u56fe\u7247\u3002</li> </ul>"},{"location":"nebula-studio/quick-start/draft/#_2","title":"\u5165\u53e3","text":"<p>\u5728\u9876\u90e8\u5bfc\u822a\u680f\u91cc\uff0c\u70b9\u51fb  \u56fe\u6807\u3002</p>"},{"location":"nebula-studio/quick-start/draft/#schema_1","title":"\u8bbe\u8ba1 Schema","text":"<p>\u4ee5<code>basketballplayer</code>\u7684 Schema \u4e3a\u4f8b\uff0c\u8bf4\u660e\u5982\u4f55\u8bbe\u8ba1 Schema\u3002</p> <ol> <li>\u5728\u9875\u9762\u5de6\u4e0a\u89d2\u5355\u51fb\u65b0\u5efa\u3002</li> <li>\u5728\u753b\u5e03\u4e0b\u65b9\u9009\u62e9\u5408\u9002\u989c\u8272\u7684 Tag \u6807\u7b7e\uff0c\u6309\u4f4f\u5de6\u952e\u62d6\u62fd\u81f3\u753b\u5e03\u4e2d\uff0c\u521b\u5efa\u4e00\u4e2a Tag\u3002</li> <li>\u5355\u51fb Tag\uff0c\u5728\u53f3\u4fa7\u586b\u5199\u6807\u7b7e\u540d\u79f0<code>player</code>\u3001\u63cf\u8ff0\uff0c\u5e76\u4e14\u6dfb\u52a0\u5c5e\u6027<code>name</code>\u548c<code>age</code>\u3002</li> <li>\u518d\u6b21\u521b\u5efa\u4e00\u4e2a Tag\uff0c\u6807\u7b7e\u540d\u79f0\u4e3a<code>team</code>\uff0c\u5c5e\u6027\u4e3a<code>name</code>\u3002</li> <li>\u4ece Tag <code>player</code>\u4e0a\u7684\u951a\u70b9\u8fde\u63a5\u81f3 Tag <code>team</code>\u7684\u951a\u70b9\uff0c\u5355\u51fb\u751f\u6210\u7684\u8fb9\uff0c\u5728\u53f3\u4fa7\u586b\u5199\u8fb9\u7c7b\u578b\u540d\u79f0<code>serve</code>\uff0c\u5e76\u4e14\u6dfb\u52a0\u5c5e\u6027<code>start_year</code>\u548c<code>end_year</code>\u3002</li> <li>\u4ece Tag <code>player</code>\u4e0a\u7684\u951a\u70b9\u8fde\u63a5\u81f3\u81ea\u8eab\u53e6\u4e00\u4e2a\u951a\u70b9\uff0c\u5355\u51fb\u751f\u6210\u7684\u8fb9\uff0c\u5728\u53f3\u4fa7\u586b\u5199\u8fb9\u7c7b\u578b\u540d\u79f0<code>follow</code>\uff0c\u5e76\u4e14\u6dfb\u52a0\u5c5e\u6027<code>degree</code>\u3002</li> <li>\u8bbe\u8ba1\u5b8c\u6210\u540e\uff0c\u5728\u9875\u9762\u4e0a\u65b9\u5355\u51fb  \u4fee\u6539\u8349\u56fe\u540d\u79f0\uff0c\u7136\u540e\u5728\u53f3\u4e0a\u89d2\u5355\u51fb  \u4fdd\u5b58\u8349\u56fe\u3002</li> </ol> <p></p>"},{"location":"nebula-studio/quick-start/draft/#schema_2","title":"\u5e94\u7528 Schema","text":"<ol> <li>\u5728\u9875\u9762\u5de6\u4fa7\u7684\u8349\u56fe\u5217\u8868\u5185\u9009\u62e9\u9700\u8981\u5bfc\u5165\u7684 Schema \u8349\u56fe\uff0c\u7136\u540e\u5728\u53f3\u4e0a\u89d2\u5355\u51fb\u5e94\u7528\u5230\u56fe\u7a7a\u95f4\u3002</li> <li> <p>\u9009\u62e9\u5c06 Schema \u5bfc\u5165\u65b0\u5efa\u56fe\u7a7a\u95f4\u6216\u8005\u5df2\u521b\u5efa\u7684\u56fe\u7a7a\u95f4\uff0c\u5355\u51fb\u786e\u8ba4\u3002</p> <p>Note</p> <ul> <li>\u521b\u5efa\u56fe\u7a7a\u95f4\u7684\u53c2\u6570\u8bf4\u660e\u53c2\u89c1CREATE SPACE\u3002</li> <li>\u5982\u679c\u56fe\u7a7a\u95f4\u4e2d\u5df2\u6709\u91cd\u540d Schema\uff0c\u5bfc\u5165\u64cd\u4f5c\u4f1a\u5931\u8d25\uff0c\u5e76\u63d0\u793a\u4fee\u6539\u540d\u79f0\u6216\u66f4\u6362\u56fe\u7a7a\u95f4\u3002</li> </ul> </li> </ol>"},{"location":"nebula-studio/quick-start/draft/#schema_3","title":"\u4fee\u6539 Schema","text":"<p>\u5728\u9875\u9762\u5de6\u4fa7\u7684\u8349\u56fe\u5217\u8868\u5185\u9009\u62e9\u9700\u8981\u4fee\u6539\u7684 Schema \u8349\u56fe\uff0c\u4fee\u6539\u5b8c\u6210\u540e\u5728\u53f3\u4e0a\u89d2\u5355\u51fb  \u4fdd\u5b58\u3002</p> <p>Note</p> <p>\u5df2\u5e94\u7528 Schema \u7684\u56fe\u7a7a\u95f4\u4e0d\u4f1a\u540c\u6b65\u4fee\u6539\u3002</p>"},{"location":"nebula-studio/quick-start/draft/#schema_4","title":"\u5220\u9664 Schema","text":"<p>\u5728\u9875\u9762\u5de6\u4fa7\u7684\u8349\u56fe\u5217\u8868\u5185\u627e\u5230\u9700\u8981\u5220\u9664\u7684 Schema \u8349\u56fe\uff0c\u5728\u7f29\u7565\u56fe\u53f3\u4e0a\u89d2\u5355\u51fbX\u5e76\u786e\u8ba4\u5373\u53ef\u5220\u9664\u3002</p>"},{"location":"nebula-studio/quick-start/draft/#schema_5","title":"\u5bfc\u51fa Schema","text":"<p>\u5728\u9875\u9762\u53f3\u4e0a\u89d2\u5355\u51fb  \u53ef\u4ee5\u5bfc\u51fa Schema \u4e3a PNG \u683c\u5f0f\u56fe\u7247\u3002</p>"},{"location":"nebula-studio/quick-start/st-ug-console/","title":"\u63a7\u5236\u53f0\u754c\u9762","text":"<p>\u672c\u6587\u4ecb\u7ecd Studio \u7684\u63a7\u5236\u53f0\u754c\u9762\u3002</p> <p></p> <p>\u4e0b\u8868\u5217\u51fa\u4e86\u63a7\u5236\u53f0\u754c\u9762\u4e0a\u7684\u5404\u79cd\u529f\u80fd\u3002</p> \u7f16\u53f7 \u529f\u80fd \u8bf4\u660e 1 \u5de5\u5177\u680f \u70b9\u51fb \u63a7\u5236\u53f0 \u9875\u7b7e\u8fdb\u5165\u63a7\u5236\u53f0\u9875\u9762\u3002 2 \u9009\u62e9\u56fe\u7a7a\u95f4 \u5728 \u5f53\u524d\u56fe\u7a7a\u95f4 \u5217\u8868\u4e2d\u9009\u62e9\u4e00\u4e2a\u56fe\u7a7a\u95f4\u3002  \u8bf4\u660e\uff1aStudio \u4e0d\u652f\u6301\u76f4\u63a5\u5728\u8f93\u5165\u6846\u4e2d\u8fd0\u884c <code>USE &lt;space_name&gt;</code> \u8bed\u53e5\u3002 3 \u6536\u85cf\u5939 \u70b9\u51fb \u6309\u94ae\uff0c\u5c55\u5f00\u6536\u85cf\u5939\uff0c\u70b9\u51fb\u5176\u4e2d\u4e00\u4e2a\u8bed\u53e5\uff0c\u8f93\u5165\u6846\u4e2d\u5373\u81ea\u52a8\u8f93\u5165\u8be5\u8bed\u53e5\u3002 4 \u5386\u53f2\u6e05\u5355 \u70b9\u51fb  \u6309\u94ae\uff0c\u5728\u8bed\u53e5\u8fd0\u884c\u8bb0\u5f55\u5217\u8868\u91cc\uff0c\u70b9\u51fb\u5176\u4e2d\u4e00\u4e2a\u8bed\u53e5\uff0c\u8f93\u5165\u6846\u4e2d\u5373\u81ea\u52a8\u8f93\u5165\u8be5\u8bed\u53e5\u3002\u5217\u8868\u91cc\u63d0\u4f9b\u6700\u8fd1 15 \u6b21\u8bed\u53e5\u8fd0\u884c\u8bb0\u5f55\u3002 5 \u6e05\u7a7a\u8f93\u5165\u6846 \u70b9\u51fb  \u6309\u94ae\uff0c\u6e05\u7a7a\u8f93\u5165\u6846\u4e2d\u5df2\u7ecf\u8f93\u5165\u7684\u5185\u5bb9\u3002 6 \u8fd0\u884c \u5728\u8f93\u5165\u6846\u4e2d\u8f93\u5165 nGQL \u8bed\u53e5\u540e\uff0c\u70b9\u51fb  \u6309\u94ae\u5373\u5f00\u59cb\u8fd0\u884c\u8bed\u53e5\u3002 7 \u81ea\u5b9a\u4e49\u53c2\u6570\u5c55\u793a \u70b9\u51fb \u6309\u94ae\u53ef\u5c55\u5f00\u81ea\u5b9a\u4e49\u53c2\u6570\uff0c\u7528\u4e8e\u53c2\u6570\u5316\u67e5\u8be2\uff0c\u8be6\u60c5\u4fe1\u606f\u53ef\u89c1\u7ba1\u7406\u53c2\u6570\u3002 8 \u8f93\u5165\u6846 \u5728\u8f93\u5165\u6846\u4e2d\u8f93\u5165 nGQL \u8bed\u53e5\u540e\uff0c\u70b9\u51fb  \u6309\u94ae\u8fd0\u884c\u8bed\u53e5\u3002\u7528\u6237\u53ef\u4ee5\u540c\u65f6\u8f93\u5165\u591a\u4e2a\u8bed\u53e5\u540c\u65f6\u8fd0\u884c\uff0c\u8bed\u53e5\u4e4b\u95f4\u4ee5 <code>;</code> \u5206\u9694\u3002\u652f\u6301\u7528<code>//</code>\u6dfb\u52a0\u6ce8\u91ca\u3002 9 \u8bed\u53e5\u8fd0\u884c\u72b6\u6001 \u8fd0\u884c nGQL \u8bed\u53e5\u540e\uff0c\u8fd9\u91cc\u663e\u793a\u8bed\u53e5\u8fd0\u884c\u72b6\u6001\u3002\u5982\u679c\u8bed\u53e5\u8fd0\u884c\u6210\u529f\uff0c\u8bed\u53e5\u4ee5\u7eff\u8272\u663e\u793a\u3002\u5982\u679c\u8bed\u53e5\u8fd0\u884c\u5931\u8d25\uff0c\u8bed\u53e5\u4ee5\u7ea2\u8272\u663e\u793a\u3002 10 \u6dfb\u52a0\u5230\u6536\u85cf\u5939 \u70b9\u51fb \u6309\u94ae\uff0c\u5c06\u8bed\u53e5\u5b58\u5165\u6536\u85cf\u5939\u4e2d\uff0c\u5df2\u6536\u85cf\u7684\u8bed\u53e5\u8be5\u6309\u94ae\u4ee5\u9ec4\u8272\u5c55\u793a\u3002 11 \u5bfc\u51fa CSV \u6587\u4ef6\u6216 PNG \u683c\u5f0f\u56fe\u7247 \u8fd0\u884c nGQL \u8bed\u53e5\u8fd4\u56de\u7ed3\u679c\u540e\uff0c\u8fd4\u56de\u7ed3\u679c\u4e3a\u8868\u683c\u5f62\u5f0f\u65f6\uff0c\u70b9\u51fb  \u6309\u94ae\u5373\u80fd\u5c06\u7ed3\u679c\u4ee5 CSV \u6587\u4ef6\u7684\u5f62\u5f0f\u5bfc\u51fa\u3002\u5207\u6362\u5230\u53ef\u89c6\u5316\u7a97\u53e3\uff0c\u70b9\u51fb  \u6309\u94ae\u5373\u80fd\u5c06\u7ed3\u679c\u4ee5 CSV \u6587\u4ef6\u6216 PNG \u56fe\u7247\u7684\u5f62\u5f0f\u5bfc\u51fa\u3002 12 \u5c55\u5f00/\u9690\u85cf\u6267\u884c\u7ed3\u679c \u70b9\u51fb  \u6309\u94ae\uff0c\u9690\u85cf\u6b64\u6761 nGQL \u8bed\u53e5\u8fd4\u56de\u7684\u7ed3\u679c\u6216\u70b9\u51fb \u6309\u94ae\uff0c\u5c55\u5f00\u6b64\u6761 nGQL \u8bed\u53e5\u8fd4\u56de\u7684\u7ed3\u679c. 13 \u5173\u95ed\u6267\u884c\u7ed3\u679c \u70b9\u51fb \u6309\u94ae\uff0c\u5173\u95ed\u6b64\u6761 nGQL \u8bed\u53e5\u8fd4\u56de\u7684\u7ed3\u679c\u3002 14 \u8868\u683c\u7a97\u53e3 \u663e\u793a\u8bed\u53e5\u8fd0\u884c\u7ed3\u679c\u3002\u5982\u679c\u8bed\u53e5\u4f1a\u8fd4\u56de\u7ed3\u679c\uff0c\u7a97\u53e3\u4f1a\u4ee5\u8868\u683c\u5f62\u5f0f\u5448\u73b0\u8fd4\u56de\u7684\u7ed3\u679c\u3002 15 \u53ef\u89c6\u5316\u7a97\u53e3 \u663e\u793a\u8bed\u53e5\u8fd0\u884c\u7ed3\u679c\u3002\u5982\u679c\u8bed\u53e5\u4f1a\u8fd4\u56de\u5b8c\u6574\u7684\u70b9\u8fb9\u7ed3\u679c\uff0c\u7a97\u53e3\u4f1a\u4ee5\u53ef\u89c6\u5316\u5f62\u5f0f\u5448\u73b0\u8fd4\u56de\u7684\u7ed3\u679c\u3002\u70b9\u51fb\u53f3\u65b9 \u6309\u94ae\uff0c\u5c55\u5f00\u6570\u636e\u6982\u89c8\u9762\u677f\u3002"},{"location":"nebula-studio/quick-start/st-ug-create-schema/","title":"\u521b\u5efa Schema","text":"<p>\u5728 NebulaGraph \u4e2d\uff0c\u7528\u6237\u5fc5\u987b\u5148\u6709 Schema\uff0c\u624d\u80fd\u5411\u5176\u4e2d\u5199\u5165\u70b9\u6570\u636e\u548c\u8fb9\u6570\u636e\u3002\u672c\u6587\u63cf\u8ff0\u5982\u4f55\u4f7f\u7528 NebulaGraph \u7684\u63a7\u5236\u53f0\u6216 Schema \u529f\u80fd\u521b\u5efa Schema\u3002</p> <p>Note</p> <ul> <li>\u7528\u6237\u53ef\u4ee5\u4f7f\u7528 nebula-console \u521b\u5efa Schema\u3002\u8be6\u60c5\u53c2\u89c1 NebulaGraph \u4f7f\u7528\u624b\u518c\u548c NebulaGraph \u5feb\u901f\u5f00\u59cb\u3002</li> <li>\u7528\u6237\u53ef\u4ee5\u4f7f\u7528 Schema \u8349\u56fe\u529f\u80fd\u56fe\u5f62\u5316\u8bbe\u8ba1 Schema\u3002\u8be6\u60c5\u53c2\u89c1 Schema \u8349\u56fe\u3002</li> </ul>"},{"location":"nebula-studio/quick-start/st-ug-create-schema/#_1","title":"\u524d\u63d0\u6761\u4ef6","text":"<p>\u5728 Studio \u4e0a\u521b\u5efa Schema \u4e4b\u524d\uff0c\u7528\u6237\u9700\u8981\u786e\u8ba4\u4ee5\u4e0b\u4fe1\u606f\uff1a</p> <ul> <li>Studio \u5df2\u7ecf\u8fde\u63a5\u5230 NebulaGraph \u6570\u636e\u5e93\u3002</li> </ul> <ul> <li>\u8d26\u53f7\u62e5\u6709 GOD\u3001ADMIN \u6216 DBA \u6743\u9650\u3002\u8be6\u7ec6\u4fe1\u606f\uff0c\u53c2\u8003 NebulaGraph \u5185\u7f6e\u89d2\u8272\u3002</li> </ul> <ul> <li>\u5df2\u7ecf\u89c4\u5212 Schema \u7684\u8981\u7d20\u3002</li> </ul> <ul> <li>\u5df2\u7ecf\u521b\u5efa\u56fe\u7a7a\u95f4\u3002</li> </ul> <p>Note</p> <p>\u672c\u793a\u4f8b\u5df2\u7ecf\u521b\u5efa\u56fe\u7a7a\u95f4\u3002\u5982\u679c\u8d26\u53f7\u62e5\u6709 GOD \u6743\u9650\uff0c\u4e5f\u53ef\u4ee5\u5728 \u63a7\u5236\u53f0 \u6216 Schema \u4e0a\u521b\u5efa\u4e00\u4e2a\u56fe\u7a7a\u95f4\u3002</p>"},{"location":"nebula-studio/quick-start/st-ug-create-schema/#schema_schema","title":"\u4f7f\u7528 Schema \u7ba1\u7406\u529f\u80fd\u521b\u5efa Schema","text":"<p>\u6309\u4ee5\u4e0b\u6b65\u9aa4\u4f7f\u7528 Schema \u7ba1\u7406\u529f\u80fd\u521b\u5efa Schema\uff1a</p> <ol> <li> <p>\u521b\u5efa Tag\u3002\u8be6\u7ec6\u4fe1\u606f\uff0c\u53c2\u8003\u64cd\u4f5c Tag\u3002</p> </li> <li> <p>\u521b\u5efa Edge type\u3002\u8be6\u7ec6\u4fe1\u606f\uff0c\u53c2\u8003\u64cd\u4f5c Edge type\u3002</p> </li> </ol>"},{"location":"nebula-studio/quick-start/st-ug-create-schema/#schema_1","title":"\u4f7f\u7528\u63a7\u5236\u53f0\u521b\u5efa Schema","text":"<ol> <li> <p>\u5728\u9876\u90e8\u5bfc\u822a\u680f\u91cc\uff0c\u70b9\u51fb \u63a7\u5236\u53f0 \u9875\u7b7e\u3002</p> </li> <li> <p>\u5728 \u5f53\u524d Space \u4e2d\u9009\u62e9\u4e00\u4e2a\u56fe\u7a7a\u95f4\u3002\u5728\u672c\u793a\u4f8b\u4e2d\uff0c\u9009\u62e9 basketballplayer\u3002</p> <p></p> </li> <li> <p>\u5728\u547d\u4ee4\u884c\u4e2d\uff0c\u4f9d\u6b21\u8f93\u5165\u4ee5\u4e0b\u8bed\u53e5\uff0c\u5e76\u70b9\u51fb\u53f3\u4fa7\u7684\u8fd0\u884c\u6309\u94ae\u3002</p> <pre><code>// \u521b\u5efa Tag player\uff0c\u5e26\u6709 2 \u4e2a\u5c5e\u6027\nCREATE TAG player(name string, age int);\n\n// \u521b\u5efa Tag team\uff0c\u5e26\u6709 1 \u4e2a\u5c5e\u6027\nCREATE TAG team(name string);\n\n// \u521b\u5efa Edge type follow\uff0c\u5e26\u6709 1 \u4e2a\u5c5e\u6027\nCREATE EDGE follow(degree int);\n\n// \u521b\u5efa Edge type serve\uff0c\u5e26\u6709 2 \u4e2a\u5c5e\u6027\nCREATE EDGE serve(start_year int, end_year int);\n</code></pre> </li> </ol> <p>\u81f3\u6b64\uff0c\u7528\u6237\u5df2\u7ecf\u5b8c\u6210\u4e86 Schema \u521b\u5efa\u3002\u7528\u6237\u53ef\u4ee5\u8fd0\u884c\u4ee5\u4e0b\u8bed\u53e5\u67e5\u770b Tag \u4e0e Edge type \u7684\u5b9a\u4e49\u662f\u5426\u6b63\u786e\u3001\u5b8c\u6574\u3002</p> <pre><code>// \u5217\u51fa\u5f53\u524d\u56fe\u7a7a\u95f4\u4e2d\u6240\u6709 Tag\nSHOW TAGS;\n\n// \u5217\u51fa\u5f53\u524d\u56fe\u7a7a\u95f4\u4e2d\u6240\u6709 Edge type\nSHOW EDGES;\n\n// \u67e5\u770b\u6bcf\u79cd Tag \u548c Edge type \u7684\u7ed3\u6784\u662f\u5426\u6b63\u786e\nDESCRIBE TAG player;\nDESCRIBE TAG team;\nDESCRIBE EDGE follow;\nDESCRIBE EDGE serve;\n</code></pre>"},{"location":"nebula-studio/quick-start/st-ug-create-schema/#_2","title":"\u540e\u7eed\u64cd\u4f5c","text":"<p>\u521b\u5efa Schema \u540e\uff0c\u7528\u6237\u53ef\u4ee5\u5f00\u59cb\u5bfc\u5165\u6570\u636e\u3002</p>"},{"location":"nebula-studio/quick-start/st-ug-import-data/","title":"\u5bfc\u5165\u6570\u636e","text":"<p>Studio \u652f\u6301\u754c\u9762\u5316\u5730\u5c06 CSV \u683c\u5f0f\u6570\u636e\u5bfc\u5165\u81f3 NebulaGraph \u4e2d\u3002</p>"},{"location":"nebula-studio/quick-start/st-ug-import-data/#_2","title":"\u524d\u63d0\u6761\u4ef6","text":"<p>\u5bfc\u5165\u6570\u636e\u4e4b\u524d\uff0c\u9700\u8981\u786e\u8ba4\u4ee5\u4e0b\u4fe1\u606f\uff1a</p> <ul> <li>NebulaGraph \u91cc\u5df2\u7ecf\u521b\u5efa Schema\u3002</li> </ul> <ul> <li>CSV \u6587\u4ef6\u7b26\u5408 Schema \u8981\u6c42\u3002</li> </ul> <ul> <li>\u8d26\u53f7\u62e5\u6709 GOD\u3001ADMIN \u6216 DBA \u6743\u9650\u3002\u8be6\u60c5\u53c2\u89c1 NebulaGraph \u5185\u7f6e\u89d2\u8272\u3002</li> </ul>"},{"location":"nebula-studio/quick-start/st-ug-import-data/#_3","title":"\u5165\u53e3","text":"<p>\u5728\u9876\u90e8\u5bfc\u822a\u680f\u91cc\uff0c\u5355\u51fb  \u56fe\u6807\u3002</p> <p>\u5bfc\u5165\u6570\u636e\u4e3b\u8981\u5206\u4e3a 2 \u4e2a\u90e8\u5206\uff0c\u65b0\u5efa\u6570\u636e\u6e90\u548c\u521b\u5efa\u5bfc\u5165\u4efb\u52a1\uff0c\u63a5\u4e0b\u6765\u5c06\u8be6\u7ec6\u4ecb\u7ecd\u3002</p>"},{"location":"nebula-studio/quick-start/st-ug-import-data/#_4","title":"\u65b0\u5efa\u6570\u636e\u6e90","text":"<p>\u5728\u9875\u9762\u53f3\u4e0a\u89d2\u5355\u51fb\u65b0\u5efa\u6570\u636e\u6e90\uff0c\u8bbe\u7f6e\u6570\u636e\u6765\u6e90\u53ca\u5176\u76f8\u5173\u8bbe\u7f6e\u3002\u5f53\u524d\u652f\u6301 3 \u79cd\u7c7b\u578b\u7684\u6570\u636e\u6e90\u3002</p> \u6570\u636e\u6e90\u7c7b\u578b \u8bf4\u660e \u4e91\u5b58\u50a8 \u6dfb\u52a0\u4e91\u5b58\u50a8\u4f5c\u4e3a CSV \u6587\u4ef6\u6765\u6e90\uff0c\u53ea\u652f\u6301\u517c\u5bb9 Amazon S3\u63a5\u53e3\u7684\u4e91\u670d\u52a1\u3002 SFTP \u6dfb\u52a0 SFTP \u4f5c\u4e3a CSV \u6587\u4ef6\u6765\u6e90\u3002 \u672c\u5730\u6587\u4ef6 \u4e0a\u4f20\u672c\u5730 CSV \u6587\u4ef6\u3002\u6587\u4ef6\u5927\u5c0f\u4e0d\u80fd\u8d85\u8fc7 200 MB\uff0c\u8d85\u8fc7\u9650\u5236\u7684\u6587\u4ef6\u8bf7\u653e\u5165\u5176\u4ed6\u65b9\u5f0f\u7684\u6570\u636e\u6e90\u4e2d\u3002 <p>Note</p> <ul> <li>\u4e0a\u4f20\u672c\u5730 CSV \u6587\u4ef6\u65f6\uff0c\u4e00\u6b21\u53ef\u4ee5\u9009\u62e9\u591a\u4e2a CSV \u6587\u4ef6\u3002</li> <li>\u6570\u636e\u6e90\u6dfb\u52a0\u540e\uff0c\u53ef\u4ee5\u5728\u9875\u9762\u4e0a\u65b9\u5355\u51fb\u6570\u636e\u6e90\u7ba1\u7406\uff0c\u5207\u6362\u9875\u7b7e\u5373\u53ef\u67e5\u770b\u4e0d\u540c\u7c7b\u578b\u7684\u6570\u636e\u6e90\u8be6\u60c5\uff0c\u4e5f\u53ef\u4ee5\u7f16\u8f91\u6216\u5220\u9664\u6570\u636e\u6e90\u3002</li> </ul>"},{"location":"nebula-studio/quick-start/st-ug-import-data/#_5","title":"\u521b\u5efa\u5bfc\u5165\u4efb\u52a1","text":"<ol> <li> <p>\u5728\u9875\u9762\u5de6\u4e0a\u89d2\u5355\u51fb\u521b\u5efa\u5bfc\u5165\u4efb\u52a1\uff0c\u5b8c\u6210\u5982\u4e0b\u8bbe\u7f6e\uff1a</p> <p>Caution</p> <p>\u7528\u6237\u4e5f\u53ef\u4ee5\u5355\u51fb\u5bfc\u5165\u6a21\u7248\uff0c\u4e0b\u8f7d\u793a\u4f8b\u914d\u7f6e\u6587\u4ef6<code>example.yaml</code>\uff0c\u914d\u7f6e\u540e\u518d\u4e0a\u4f20\u914d\u7f6e\u6587\u4ef6\u3002\u914d\u7f6e\u65b9\u5f0f\u4e0e NebulaGraph Importer\u5927\u81f4\u76f8\u540c\u3002</p> <ul> <li>\u56fe\u7a7a\u95f4\uff1a\u9700\u8981\u5bfc\u5165\u6570\u636e\u7684\u56fe\u7a7a\u95f4\u540d\u79f0\u3002</li> <li>\u4efb\u52a1\u540d\u79f0\uff1a\u9ed8\u8ba4\u81ea\u52a8\u751f\u6210\uff0c\u53ef\u4ee5\u4fee\u6539\u3002</li> <li>\u66f4\u591a\u914d\u7f6e\uff08\u53ef\u9009\uff09\uff1a\u53ef\u4ee5\u81ea\u5b9a\u4e49\u8bbe\u7f6e\u5e76\u53d1\u6570\u3001\u6279\u5904\u7406\u91cf\u3001\u91cd\u8bd5\u6b21\u6570\u3001\u8bfb\u53d6\u5e76\u53d1\u6570\u548c\u5bfc\u5165\u5e76\u53d1\u6570\u3002</li> <li> <p>\u5173\u8054\u6807\u7b7e\uff1a</p> <ol> <li>\u5355\u51fb\u6dfb\u52a0 Tag\uff0c\u7136\u540e\u5728\u4e0b\u65b9\u65b0\u589e\u7684\u6807\u7b7e\u5185\u9009\u62e9 Tag\u3002</li> <li>\u5355\u51fb\u6dfb\u52a0\u5bfc\u5165\u6587\u4ef6\uff0c\u5728\u6587\u4ef6\u6e90\u91cc\u9009\u62e9\u6570\u636e\u6e90\u7c7b\u578b\u548c\u6587\u4ef6\u8def\u5f84\uff0c\u627e\u5230\u9700\u8981\u5bfc\u5165\u7684\u6587\u4ef6\uff0c\u7136\u540e\u5355\u51fb\u6dfb\u52a0\u3002</li> <li>\u5728\u9884\u89c8\u9875\u9762\u8bbe\u7f6e\u6587\u4ef6\u7684\u5206\u9694\u7b26\u548c\u662f\u5426\u643a\u5e26\u8868\u5934\uff0c\u7136\u540e\u5355\u51fb\u786e\u8ba4\u3002</li> <li>\u5728VID \u5217\u4e3a VID \u9009\u62e9\u5bf9\u5e94\u7684\u5217\u3002\u652f\u6301\u9009\u62e9\u591a\u4e2a\u5217\u5408\u5e76\u4e3a VID\uff0c\u4e5f\u53ef\u4ee5\u4e3a VID \u6dfb\u52a0\u524d\u7f00\u6216\u540e\u7f00\u3002</li> <li>\u5728\u5c5e\u6027\u6846\u5185\u4e3a\u5c5e\u6027\u9009\u62e9\u5bf9\u5e94\u7684\u5217\u3002\u5bf9\u4e8e\u53ef\u4ee5\u4e3a<code>NULL</code>\u6216\u8bbe\u7f6e\u4e86<code>DEFAULT</code>\u7684\u5c5e\u6027\uff0c\u53ef\u4ee5\u4e0d\u6307\u5b9a\u5bf9\u5e94\u7684\u5217\u3002</li> <li>\u91cd\u590d 2 ~ 5 \u6b65\u9aa4\u5c06\u6b65\u9aa4 1 \u6240\u9009 Tag \u7684\u6570\u636e\u6587\u4ef6\u5168\u90e8\u5bfc\u5165\u3002</li> <li>\u91cd\u590d 1 ~ 6 \u6b65\u9aa4\u5c06\u6240\u6709\u9700\u8981\u5bfc\u5165\u7684 Tag \u6570\u636e\u5168\u90e8\u5bfc\u5165\u3002</li> </ol> </li> </ul> <ul> <li>\u5173\u8054\u8fb9\uff1a\u4e0e\u5173\u8054\u6807\u7b7e\u7684\u64cd\u4f5c\u76f8\u540c\u3002</li> </ul> <p></p> </li> <li> <p>\u5b8c\u6210\u8bbe\u7f6e\u540e\uff0c\u5355\u51fb\u5bfc\u5165,\u8f93\u5165 NebulaGraph \u8d26\u53f7\u7684\u5bc6\u7801\u5e76\u786e\u8ba4\u3002</p> </li> </ol> <p>\u5bfc\u5165\u4efb\u52a1\u521b\u5efa\u540e\uff0c\u53ef\u4ee5\u5728\u5bfc\u5165\u6570\u636e\u9875\u7b7e\u5185\u67e5\u770b\u5bfc\u5165\u4efb\u52a1\u7684\u8fdb\u5ea6\uff0c\u652f\u6301\u6839\u636e\u56fe\u7a7a\u95f4\u7b5b\u9009\u4efb\u52a1\u3001\u7f16\u8f91\u4efb\u52a1\u3001\u67e5\u770b\u65e5\u5fd7\u3001\u4e0b\u8f7d\u65e5\u5fd7\u3001\u91cd\u65b0\u5bfc\u5165\u3001\u4e0b\u8f7d\u914d\u7f6e\u6587\u4ef6\u3001\u5220\u9664\u4efb\u52a1\u7b49\u64cd\u4f5c\u3002</p>"},{"location":"nebula-studio/quick-start/st-ug-import-data/#_6","title":"\u540e\u7eed\u64cd\u4f5c","text":"<p>\u5b8c\u6210\u6570\u636e\u5bfc\u5165\u540e\uff0c\u7528\u6237\u53ef\u4ee5\u8fdb\u5165\u63a7\u5236\u53f0\u9875\u9762\u3002</p>"},{"location":"nebula-studio/quick-start/st-ug-plan-schema/","title":"\u89c4\u5212 Schema","text":"<p>\u5728\u4f7f\u7528 Studio \u4e4b\u524d\uff0c\u7528\u6237\u9700\u8981\u5148\u6839\u636e NebulaGraph \u7684\u8981\u6c42\u89c4\u5212 Schema\uff08\u6a21\u5f0f\uff09\u3002</p> <p>Schema \u81f3\u5c11\u8981\u5305\u542b\u4ee5\u4e0b\u8981\u7d20\uff1a</p> <ul> <li>Tag\uff0c\u4ee5\u53ca\u6bcf\u79cd Tag \u7684\u5c5e\u6027\u3002</li> </ul> <ul> <li>Edge type\uff0c\u4ee5\u53ca\u6bcf\u79cd Edge type \u7684\u5c5e\u6027\u3002</li> </ul> <p>\u7528\u6237\u53ef\u4ee5\u4e0b\u8f7d NebulaGraph \u793a\u4f8b\u6570\u636e\u96c6 basketballplayer \uff0c\u672c\u6587\u5c06\u901a\u8fc7\u8be5\u793a\u4f8b\u8bf4\u660e\u5982\u4f55\u89c4\u5212 Schema\u3002</p> <p>\u4e0b\u8868\u5217\u51fa\u4e86 Schema \u8981\u7d20\u3002</p> \u7c7b\u578b \u540d\u79f0 \u5c5e\u6027\u540d\uff08\u6570\u636e\u7c7b\u578b\uff09 \u8bf4\u660e Tag player - <code>name</code> \uff08<code>string</code>\uff09 - <code>age</code> \uff08<code>int</code>\uff09 \u8868\u793a\u7403\u5458\u3002 Tag team - <code>name</code> \uff08<code>string</code>\uff09 \u8868\u793a\u7403\u961f\u3002 Edge type serve - <code>start_year</code> \uff08<code>int</code>\uff09  - <code>end_year</code> \uff08<code>int</code>\uff09 \u8868\u793a\u7403\u5458\u7684\u884c\u4e3a\u3002\u8be5\u884c\u4e3a\u5c06\u7403\u5458\u548c\u7403\u961f\u8054\u7cfb\u8d77\u6765\uff0c\u65b9\u5411\u662f\u4ece\u7403\u5458\u5230\u7403\u961f\u3002 Edge type follow - <code>degree</code>\uff08<code>int</code>\uff09 \u8868\u793a\u7403\u5458\u7684\u884c\u4e3a\u3002\u8be5\u884c\u4e3a\u5c06\u4e24\u4e2a\u7403\u5458\u8054\u7cfb\u8d77\u6765\uff0c\u65b9\u5411\u662f\u4ece\u4e00\u4e2a\u7403\u5458\u5230\u53e6\u4e00\u4e2a\u7403\u5458\u3002 <p>\u4e0b\u56fe\u8bf4\u660e\u793a\u4f8b\u4e2d player \u7c7b\u70b9\u4e0e team \u7c7b\u70b9\u4e4b\u95f4\u5982\u4f55\u53d1\u751f\u5173\u7cfb\uff08serve/follow\uff09\u3002</p> <p></p>"},{"location":"nebula-studio/troubleshooting/st-ug-config-server-errors/","title":"\u8fde\u63a5\u6570\u636e\u5e93\u9519\u8bef","text":""},{"location":"nebula-studio/troubleshooting/st-ug-config-server-errors/#_2","title":"\u95ee\u9898\u63cf\u8ff0","text":"<p>\u6309\u8fde\u63a5 Studio \u6587\u6863\u64cd\u4f5c\uff0c\u63d0\u793a \u914d\u7f6e\u5931\u8d25\u3002</p>"},{"location":"nebula-studio/troubleshooting/st-ug-config-server-errors/#_3","title":"\u53ef\u80fd\u7684\u539f\u56e0\u53ca\u89e3\u51b3\u65b9\u6cd5","text":"<p>\u7528\u6237\u53ef\u4ee5\u6309\u4ee5\u4e0b\u6b65\u9aa4\u6392\u67e5\u95ee\u9898\u3002</p>"},{"location":"nebula-studio/troubleshooting/st-ug-config-server-errors/#1_host","title":"\u7b2c 1 \u6b65\u3002\u786e\u8ba4 Host \u5b57\u6bb5\u7684\u683c\u5f0f\u662f\u5426\u6b63\u786e","text":"<p>\u5fc5\u987b\u586b\u5199 NebulaGraph \u56fe\u6570\u636e\u5e93 Graph \u670d\u52a1\u7684 IP \u5730\u5740\uff08<code>graph_server_ip</code>\uff09\u548c\u7aef\u53e3\u3002\u5982\u679c\u672a\u505a\u4fee\u6539\uff0c\u7aef\u53e3\u9ed8\u8ba4\u4e3a <code>9669</code>\u3002\u5373\u4f7f NebulaGraph \u4e0e Studio \u90fd\u90e8\u7f72\u5728\u5f53\u524d\u673a\u5668\u4e0a\uff0c\u7528\u6237\u4e5f\u5fc5\u987b\u4f7f\u7528\u672c\u673a IP \u5730\u5740\uff0c\u800c\u4e0d\u80fd\u4f7f\u7528 <code>127.0.0.1</code>\u3001<code>localhost</code> \u6216\u8005 <code>0.0.0.0</code>\u3002</p>"},{"location":"nebula-studio/troubleshooting/st-ug-config-server-errors/#2","title":"\u7b2c 2 \u6b65\u3002\u786e\u8ba4 \u7528\u6237\u540d \u548c \u5bc6\u7801 \u662f\u5426\u6b63\u786e","text":"<p>\u5982\u679c NebulaGraph \u6ca1\u6709\u5f00\u542f\u8eab\u4efd\u8ba4\u8bc1\uff0c\u7528\u6237\u53ef\u4ee5\u586b\u5199\u4efb\u610f\u5b57\u7b26\u4e32\u767b\u5f55\u3002</p> <p>\u5982\u679c\u5df2\u7ecf\u5f00\u542f\u8eab\u4efd\u8ba4\u8bc1\uff0c\u7528\u6237\u5fc5\u987b\u4f7f\u7528\u5206\u914d\u7684\u8d26\u53f7\u767b\u5f55\u3002</p>"},{"location":"nebula-studio/troubleshooting/st-ug-config-server-errors/#3_nebulagraph","title":"\u7b2c 3 \u6b65\u3002\u786e\u8ba4 NebulaGraph \u670d\u52a1\u662f\u5426\u6b63\u5e38","text":"<p>\u68c0\u67e5 NebulaGraph \u670d\u52a1\u72b6\u6001\u3002\u5173\u4e8e\u67e5\u770b\u670d\u52a1\u7684\u64cd\u4f5c\uff1a</p> <ul> <li>\u5982\u679c\u5728 Linux \u670d\u52a1\u5668\u4e0a\u901a\u8fc7\u7f16\u8bd1\u90e8\u7f72\u7684 NebulaGraph\uff0c\u53c2\u8003\u67e5\u770b NebulaGraph \u670d\u52a1\u3002</li> <li>\u5982\u679c\u4f7f\u7528 Docker Compose \u90e8\u7f72\u548c RPM \u90e8\u7f72\u7684 NebulaGraph\uff0c\u53c2\u8003\u67e5\u770b NebulaGraph \u670d\u52a1\u72b6\u6001\u548c\u7aef\u53e3\u3002</li> </ul> <p>\u5982\u679c NebulaGraph \u670d\u52a1\u6b63\u5e38\uff0c\u8fdb\u5165\u7b2c 4 \u6b65\u7ee7\u7eed\u6392\u67e5\u95ee\u9898\u3002\u5426\u5219\uff0c\u8bf7\u91cd\u542f NebulaGraph \u670d\u52a1\u3002</p> <p>Note</p> <p>\u5982\u679c\u4e4b\u524d\u4f7f\u7528 <code>docker-compose up -d</code> \u542f\u52a8 NebulaGraph\uff0c\u5fc5\u987b\u8fd0\u884c <code>docker-compose down</code> \u547d\u4ee4\u505c\u6b62 NebulaGraph \u3002</p>"},{"location":"nebula-studio/troubleshooting/st-ug-config-server-errors/#4_graph","title":"\u7b2c 4 \u6b65\u3002\u786e\u8ba4 Graph \u670d\u52a1\u7684\u7f51\u7edc\u8fde\u63a5\u662f\u5426\u6b63\u5e38","text":"<p>\u5728 Studio \u673a\u5668\u4e0a\u8fd0\u884c\u547d\u4ee4\uff08\u4f8b\u5982 <code>telnet &lt;graph_server_ip&gt; 9669</code>\uff09\u786e\u8ba4 NebulaGraph \u7684 Graph \u670d\u52a1\u7f51\u7edc\u8fde\u63a5\u662f\u5426\u6b63\u5e38\u3002</p> <p>\u5982\u679c\u8fde\u63a5\u5931\u8d25\uff0c\u5219\u6309\u4ee5\u4e0b\u8981\u6c42\u68c0\u67e5\uff1a</p> <ul> <li>\u5982\u679c Studio \u4e0e NebulaGraph \u5728\u540c\u4e00\u53f0\u673a\u5668\u4e0a\uff0c\u68c0\u67e5\u7aef\u53e3\u662f\u5426\u5df2\u66b4\u9732\u3002</li> <li>\u5982\u679c\u4e24\u8005\u4e0d\u5728\u540c\u4e00\u53f0\u673a\u5668\u4e0a\uff0c\u68c0\u67e5 NebulaGraph \u670d\u52a1\u5668\u7684\u7f51\u7edc\u914d\u7f6e\uff0c\u4f8b\u5982\uff0c\u9632\u706b\u5899\u3001\u7f51\u5173\u4ee5\u53ca\u7aef\u53e3\u3002</li> </ul> <p>\u5982\u679c\u6309\u4e0a\u8ff0\u6b65\u9aa4\u6392\u67e5\u540e\u4ecd\u65e0\u6cd5\u8fde\u63a5 NebulaGraph \u670d\u52a1\uff0c\u8bf7\u524d\u5f80 NebulaGraph \u5b98\u65b9\u8bba\u575b\u54a8\u8be2\u3002</p>"},{"location":"nebula-studio/troubleshooting/st-ug-connection-errors/","title":"\u65e0\u6cd5\u8bbf\u95ee Studio","text":""},{"location":"nebula-studio/troubleshooting/st-ug-connection-errors/#_1","title":"\u95ee\u9898\u63cf\u8ff0","text":"<p>\u6211\u6309\u7167\u6587\u6863\u63cf\u8ff0\u542f\u52a8 Studio \u540e\u8bbf\u95ee <code>127.0.0.1:7001</code> \u6216\u8005 <code>0.0.0.0:7001</code>\uff0c\u4f46\u662f\u6253\u4e0d\u5f00\u9875\u9762\uff0c\u4e3a\u4ec0\u4e48\uff1f</p>"},{"location":"nebula-studio/troubleshooting/st-ug-connection-errors/#_2","title":"\u53ef\u80fd\u7684\u539f\u56e0\u53ca\u89e3\u51b3\u65b9\u6cd5","text":"<p>\u7528\u6237\u53ef\u4ee5\u6309\u4ee5\u4e0b\u987a\u5e8f\u6392\u67e5\u95ee\u9898\u3002</p>"},{"location":"nebula-studio/troubleshooting/st-ug-connection-errors/#1","title":"1.\u786e\u8ba4\u7cfb\u7edf\u67b6\u6784","text":"<p>\u9700\u8981\u786e\u8ba4\u90e8\u7f72 Studio \u670d\u52a1\u7684\u673a\u5668\u662f\u5426\u4e3a x86_64 \u67b6\u6784\u3002\u76ee\u524d Studio \u4ec5\u652f\u6301 x86_64 \u7cfb\u7edf\u67b6\u6784\u3002</p>"},{"location":"nebula-studio/troubleshooting/st-ug-connection-errors/#2_studio","title":"2.\u68c0\u67e5 Studio \u670d\u52a1\u662f\u5426\u6b63\u5e38\u542f\u52a8","text":"<ul> <li>\u4f7f\u7528 RPM \u6216 DEB \u5305\u90e8\u7f72\u7684 Studio\uff0c\u4f7f\u7528<code>systemctl status nebula-graph-studio</code>\u67e5\u770b\u8fd0\u884c\u72b6\u6001\u3002</li> </ul> <ul> <li>\u4f7f\u7528 tar \u5305\u90e8\u7f72\u7684 Studio\uff0c\u4f7f\u7528<code>sudo lsof -i:7001</code>\u67e5\u770b\u7aef\u53e3\u72b6\u6001\u3002</li> </ul> <ul> <li> <p>\u4f7f\u7528 Docker-compose \u90e8\u7f72\u7684 Studio\uff0c\u4f7f\u7528<code>docker-compose ps</code>\u67e5\u770b\u8fd0\u884c\u72b6\u6001\u3002  </p> <p>\u5982\u679c\u670d\u52a1\u6b63\u5e38\uff0c\u8fd4\u56de\u7ed3\u679c\u5982\u4e0b\u3002\u5176\u4e2d\uff0c<code>State</code> \u5217\u5e94\u5168\u90e8\u663e\u793a\u4e3a <code>Up</code>\u3002</p> <pre><code>     Name                          Command               State               Ports\n------------------------------------------------------------------------------------------------------\nnebula-web-docker_client_1     ./nebula-go-api                  Up      0.0.0.0:32782-&gt;8080/tcp\nnebula-web-docker_importer_1   nebula-importer --port=569 ...   Up      0.0.0.0:32783-&gt;5699/tcp\nnebula-web-docker_nginx_1      /docker-entrypoint.sh ngin ...   Up      0.0.0.0:7001-&gt;7001/tcp, 80/tcp\nnebula-web-docker_web_1        docker-entrypoint.sh npm r ...   Up      0.0.0.0:32784-&gt;7001/tcp\n</code></pre> <p>Note</p> <p>\u5982\u679c\u4e4b\u524d\u4f7f\u7528 <code>docker-compose up -d</code> \u542f\u52a8 Studio\uff0c\u5fc5\u987b\u8fd0\u884c <code>docker-compose down</code> \u547d\u4ee4\u505c\u6b62 Studio\u3002</p> </li> </ul> <p>\u5982\u679c\u670d\u52a1\u6ca1\u6709\u6b63\u5e38\u8fd0\u884c\uff0c\u8bf7\u91cd\u65b0\u542f\u52a8 Studio\u3002\u8be6\u7ec6\u4fe1\u606f\uff0c\u53c2\u8003\u90e8\u7f72 Studio\u3002</p>"},{"location":"nebula-studio/troubleshooting/st-ug-connection-errors/#3","title":"3.\u786e\u8ba4\u8bbf\u95ee\u5730\u5740","text":"<p>\u5982\u679c Studio \u4e0e\u6d4f\u89c8\u5668\u5728\u540c\u4e00\u53f0\u673a\u5668\u4e0a\uff0c\u7528\u6237\u53ef\u4ee5\u5728\u6d4f\u89c8\u5668\u91cc\u4f7f\u7528 <code>localhost:7001</code>\u3001<code>127.0.0.1:7001</code> \u6216\u8005 <code>0.0.0.0:7001</code> \u8bbf\u95ee Studio\u3002</p> <p>\u5982\u679c\u4e24\u8005\u4e0d\u5728\u540c\u4e00\u53f0\u673a\u5668\u4e0a\uff0c\u5fc5\u987b\u5728\u6d4f\u89c8\u5668\u91cc\u8f93\u5165 <code>&lt;studio_server_ip&gt;:7001</code>\u3002\u5176\u4e2d\uff0c<code>studio_server_ip</code> \u662f\u6307\u90e8\u7f72 Studio \u670d\u52a1\u7684\u673a\u5668\u7684 IP \u5730\u5740\u3002</p>"},{"location":"nebula-studio/troubleshooting/st-ug-connection-errors/#4","title":"4.\u786e\u8ba4\u7f51\u7edc\u8fde\u901a\u6027","text":"<p>\u8fd0\u884c <code>curl &lt;studio_server_ip&gt;:7001 -I</code> \u786e\u8ba4\u662f\u5426\u6b63\u5e38\u3002\u5982\u679c\u8fd4\u56de <code>HTTP/1.1 200 OK</code>\uff0c\u8868\u793a\u7f51\u7edc\u8fde\u901a\u6b63\u5e38\u3002</p> <p>\u5982\u679c\u8fde\u63a5\u88ab\u62d2\u7edd\uff0c\u5219\u6309\u4ee5\u4e0b\u8981\u6c42\u68c0\u67e5\uff1a</p> <ul> <li>\u5982\u679c\u6d4f\u89c8\u5668\u4e0e Studio \u5728\u540c\u4e00\u53f0\u673a\u5668\u4e0a\uff0c\u68c0\u67e5\u7aef\u53e3\u662f\u5426\u5df2\u66b4\u9732\u3002</li> <li>\u5982\u679c\u4e24\u8005\u4e0d\u5728\u540c\u4e00\u53f0\u673a\u5668\u4e0a\uff0c\u68c0\u67e5 Studio \u6240\u5728\u673a\u5668\u7684\u7f51\u7edc\u914d\u7f6e\uff0c\u4f8b\u5982\uff0c\u9632\u706b\u5899\u3001\u7f51\u5173\u4ee5\u53ca\u7aef\u53e3\u3002</li> </ul> <p>\u5982\u679c\u6309\u4e0a\u8ff0\u6b65\u9aa4\u6392\u67e5\u540e\u4ecd\u65e0\u6cd5\u8bbf\u95ee Studio\uff0c\u8bf7\u524d\u5f80 NebulaGraph \u5b98\u65b9\u8bba\u575b\u54a8\u8be2\u3002</p>"},{"location":"nebula-studio/troubleshooting/st-ug-faq/","title":"\u5e38\u89c1\u95ee\u9898","text":"<p>\u4e3a\u4ec0\u4e48\u6211\u65e0\u6cd5\u4f7f\u7528\u67d0\u4e2a\u529f\u80fd\uff1f</p> <p>\u5982\u679c\u53d1\u73b0\u65e0\u6cd5\u4f7f\u7528\u67d0\u4e2a\u529f\u80fd\uff0c\u5efa\u8bae\u6309\u4ee5\u4e0b\u6b65\u9aa4\u6392\u9664\u95ee\u9898\uff1a</p> <ol> <li>\u786e\u8ba4 NebulaGraph \u662f\u6700\u65b0\u7248\u672c\u3002\u5982\u679c\u4f7f\u7528 Docker Compose \u90e8\u7f72 NebulaGraph \u6570\u636e\u5e93\uff0c\u5efa\u8bae\u8fd0\u884c <code>docker-compose pull &amp;&amp; docker-compose up -d</code> \u62c9\u53d6\u6700\u65b0\u7684 Docker \u955c\u50cf\uff0c\u5e76\u542f\u52a8\u5bb9\u5668\u3002</li> <li>\u786e\u8ba4 Studio \u662f\u6700\u65b0\u7248\u672c\u3002\u8be6\u7ec6\u4fe1\u606f\u53c2\u8003\u7248\u672c\u66f4\u65b0\u3002</li> <li>\u641c\u7d22\u8bba\u575b\u6216 GitHub \u7684 nebula \u548c nebula-web-docker \u9879\u76ee\uff0c\u786e\u8ba4\u662f\u5426\u5df2\u7ecf\u6709\u7c7b\u4f3c\u7684\u95ee\u9898\u3002</li> <li>\u5982\u679c\u4e0a\u8ff0\u64cd\u4f5c\u5747\u672a\u89e3\u51b3\u95ee\u9898\uff0c\u6b22\u8fce\u5728\u8bba\u575b\u4e0a\u63d0\u4ea4\u95ee\u9898\u3002</li> </ol>"},{"location":"reuse/source-monitoring-metrics/","title":"Source monitoring metrics","text":""},{"location":"reuse/source-monitoring-metrics/#graph","title":"Graph","text":"\u53c2\u6570 \u8bf4\u660e <code>num_active_queries</code> \u6d3b\u8dc3\u7684\u67e5\u8be2\u8bed\u53e5\u6570\u7684\u53d8\u5316\u6570\u3002\u8ba1\u7b97\u516c\u5f0f\uff1a\u65f6\u95f4\u8303\u56f4\u5185\u5f00\u59cb\u6267\u884c\u7684\u8bed\u53e5\u6570\u51cf\u53bb\u6267\u884c\u5b8c\u6bd5\u7684\u8bed\u53e5\u6570\u3002 <code>num_active_sessions</code> \u6d3b\u8dc3\u7684\u4f1a\u8bdd\u6570\u7684\u53d8\u5316\u6570\u3002\u8ba1\u7b97\u516c\u5f0f\uff1a\u65f6\u95f4\u8303\u56f4\u5185\u767b\u5f55\u7684\u4f1a\u8bdd\u6570\u51cf\u53bb\u767b\u51fa\u7684\u4f1a\u8bdd\u6570\u3002\u4f8b\u5982\u67e5\u8be2num_active_sessions.sum.5\uff0c\u8fc7\u53bb 5 \u79d2\u4e2d\u767b\u5f55\u4e86 10 \u4e2a\u4f1a\u8bdd\u6570\uff0c\u767b\u51fa\u4e86 30 \u4e2a\u4f1a\u8bdd\u6570\uff0c\u90a3\u4e48\u8be5\u6307\u6807\u503c\u5c31\u662f<code>-20</code>\uff0810-30\uff09\u3002 <code>num_aggregate_executors</code> \u805a\u5408\uff08Aggregate\uff09\u7b97\u5b50\u6267\u884c\u65f6\u95f4\u3002 <code>num_auth_failed_sessions_bad_username_password</code> \u56e0\u7528\u6237\u540d\u5bc6\u7801\u9519\u8bef\u5bfc\u9a8c\u8bc1\u5931\u8d25\u7684\u4f1a\u8bdd\u6570\u91cf\u3002 <code>num_auth_failed_sessions_out_of_max_allowed</code> \u56e0\u4e3a\u8d85\u8fc7<code>FLAG_OUT_OF_MAX_ALLOWED_CONNECTIONS</code>\u53c2\u6570\u5bfc\u81f4\u7684\u9a8c\u8bc1\u767b\u5f55\u7684\u5931\u8d25\u7684\u4f1a\u8bdd\u6570\u91cf\u3002 <code>num_auth_failed_sessions</code> \u767b\u5f55\u9a8c\u8bc1\u5931\u8d25\u7684\u4f1a\u8bdd\u6570\u91cf\u3002 <code>num_indexscan_executors</code> \u7d22\u5f15\u626b\u63cf\uff08IndexScan\uff09\u7b97\u5b50\u6267\u884c\u65f6\u95f4\u3002 <code>num_killed_queries</code> \u88ab\u7ec8\u6b62\u7684\u67e5\u8be2\u6570\u91cf\u3002 <code>num_opened_sessions</code> \u670d\u52a1\u7aef\u5efa\u7acb\u8fc7\u7684\u4f1a\u8bdd\u6570\u91cf\u3002 <code>num_queries</code> \u67e5\u8be2\u6b21\u6570\u3002 <code>num_query_errors_leader_changes</code> \u56e0\u67e5\u8be2\u9519\u8bef\u800c\u5bfc\u81f4\u7684 Leader \u53d8\u66f4\u7684\u6b21\u6570\u3002 <code>num_query_errors</code> \u67e5\u8be2\u9519\u8bef\u6b21\u6570\u3002 <code>num_reclaimed_expired_sessions</code> \u670d\u52a1\u7aef\u4e3b\u52a8\u56de\u6536\u7684\u8fc7\u671f\u7684\u4f1a\u8bdd\u6570\u91cf\u3002 <code>num_rpc_sent_to_metad_failed</code> Graphd \u670d\u52a1\u53d1\u7ed9 Metad \u7684 RPC \u8bf7\u6c42\u5931\u8d25\u7684\u6570\u91cf\u3002 <code>num_rpc_sent_to_metad</code> Graphd \u670d\u52a1\u53d1\u7ed9 Metad \u670d\u52a1\u7684 RPC \u8bf7\u6c42\u6570\u91cf\u3002 <code>num_rpc_sent_to_storaged_failed</code> Graphd \u670d\u52a1\u53d1\u7ed9 Storaged \u670d\u52a1\u7684 RPC \u8bf7\u6c42\u5931\u8d25\u7684\u6570\u91cf\u3002 <code>num_rpc_sent_to_storaged</code> Graphd \u670d\u52a1\u53d1\u7ed9 Storaged \u670d\u52a1\u7684 RPC \u8bf7\u6c42\u6570\u91cf\u3002 <code>num_sentences</code> Graphd \u670d\u52a1\u63a5\u6536\u7684\u8bed\u53e5\u6570\u3002 <code>num_slow_queries</code> \u6162\u67e5\u8be2\u6b21\u6570\u3002 <code>num_sort_executors</code> \u6392\u5e8f\uff08Sort\uff09\u7b97\u5b50\u6267\u884c\u65f6\u95f4\u3002 <code>optimizer_latency_us</code> \u4f18\u5316\u5668\u9636\u6bb5\u5ef6\u8fdf\u65f6\u95f4\u3002 <code>query_latency_us</code> \u67e5\u8be2\u5ef6\u8fdf\u65f6\u95f4\u3002 <code>slow_query_latency_us</code> \u6162\u67e5\u8be2\u5ef6\u8fdf\u65f6\u95f4\u3002 <code>num_queries_hit_memory_watermark</code> \u8fbe\u5230\u5185\u5b58\u6c34\u4f4d\u7ebf\u7684\u8bed\u53e5\u7684\u6570\u91cf\u3002 <code>resp_part_completeness</code> \u90e8\u5206\u6210\u529f\u7684\u5b8c\u6574\u6027\u3002\u9700\u8981\u5728 Graph \u914d\u7f6e\u4e2d\u8bbe\u7f6e<code>accept_partial_success</code>\u4e3a<code>true</code>\u3002"},{"location":"reuse/source-monitoring-metrics/#meta","title":"Meta","text":"\u53c2\u6570 \u8bf4\u660e <code>commit_log_latency_us</code> Raft \u534f\u8bae\u4e2d Commit \u65e5\u5fd7\u7684\u5ef6\u8fdf\u65f6\u95f4\u3002 <code>commit_snapshot_latency_us</code> Raft \u534f\u8bae\u4e2d Commit \u5feb\u7167\u7684\u5ef6\u8fdf\u65f6\u95f4\u3002 <code>heartbeat_latency_us</code> \u5fc3\u8df3\u5ef6\u8fdf\u65f6\u95f4\u3002 <code>num_heartbeats</code> \u5fc3\u8df3\u6b21\u6570\u3002 <code>num_raft_votes</code> Raft \u534f\u8bae\u4e2d\u6295\u7968\u7684\u6b21\u6570\u3002 <code>transfer_leader_latency_us</code> Raft \u534f\u8bae\u4e2d\u8f6c\u79fb Leader \u7684\u5ef6\u8fdf\u65f6\u95f4\u3002 <code>num_agent_heartbeats</code> AgentHBProcessor \u5fc3\u8df3\u6b21\u6570\u3002 <code>agent_heartbeat_latency_us</code> AgentHBProcessor \u5ef6\u8fdf\u65f6\u95f4\u3002 <code>replicate_log_latency_us</code> Raft \u590d\u5236\u65e5\u5fd7\u81f3\u5927\u591a\u6570\u8282\u70b9\u7684\u5ef6\u8fdf\u3002 <code>num_send_snapshot</code> Raft \u53d1\u9001\u5feb\u7167\u81f3\u5176\u4ed6\u8282\u70b9\u7684\u6b21\u6570\u3002 <code>append_log_latency_us</code> Raft \u590d\u5236\u65e5\u5fd7\u5230\u5355\u4e2a\u8282\u70b9\u7684\u5ef6\u8fdf\u3002 <code>append_wal_latency_us</code> Raft \u5199\u5165\u5355\u6761 WAL \u7684\u5ef6\u8fdf\u3002 <code>num_grant_votes</code> Raft \u6295\u7968\u7ed9\u5176\u4ed6\u8282\u70b9\u7684\u6b21\u6570\u3002 <code>num_start_elect</code> Raft \u53d1\u8d77\u6295\u7968\u7684\u6b21\u6570\u3002"},{"location":"reuse/source-monitoring-metrics/#storage","title":"Storage","text":"\u53c2\u6570 \u8bf4\u660e <code>add_edges_latency_us</code> \u6dfb\u52a0\u8fb9\u7684\u5ef6\u8fdf\u65f6\u95f4\u3002 <code>add_vertices_latency_us</code> \u6dfb\u52a0\u70b9\u7684\u5ef6\u8fdf\u65f6\u95f4\u3002 <code>commit_log_latency_us</code> Raft \u534f\u8bae\u4e2d Commit \u65e5\u5fd7\u7684\u5ef6\u8fdf\u65f6\u95f4\u3002 <code>commit_snapshot_latency_us</code> Raft \u534f\u8bae\u4e2d Commit \u5feb\u7167\u7684\u5ef6\u8fdf\u65f6\u95f4\u3002 <code>delete_edges_latency_us</code> \u5220\u9664\u8fb9\u7684\u5ef6\u8fdf\u65f6\u95f4\u3002 <code>delete_vertices_latency_us</code> \u5220\u9664\u70b9\u7684\u5ef6\u8fdf\u65f6\u95f4\u3002 <code>get_neighbors_latency_us</code> \u67e5\u8be2\u90bb\u5c45\u5ef6\u8fdf\u65f6\u95f4\u3002 <code>get_dst_by_src_latency_us</code> \u901a\u8fc7\u8d77\u59cb\u70b9\u83b7\u53d6\u7ec8\u70b9\u7684\u5ef6\u8fdf\u65f6\u95f4\u3002 <code>num_get_prop</code> GetPropProcessor \u6267\u884c\u7684\u6b21\u6570\u3002 <code>num_get_neighbors_errors</code> GetNeighborsProcessor \u6267\u884c\u51fa\u9519\u7684\u6b21\u6570\u3002 <code>num_get_dst_by_src_errors</code> GetDstBySrcProcessor \u6267\u884c\u51fa\u9519\u7684\u6b21\u6570\u3002 <code>get_prop_latency_us</code> GetPropProcessor \u6267\u884c\u7684\u5ef6\u8fdf\u65f6\u95f4\u3002 <code>num_edges_deleted</code> \u5220\u9664\u7684\u8fb9\u6570\u91cf\u3002 <code>num_edges_inserted</code> \u63d2\u5165\u7684\u8fb9\u6570\u91cf\u3002 <code>num_raft_votes</code> Raft \u534f\u8bae\u4e2d\u6295\u7968\u7684\u6b21\u6570\u3002 <code>num_rpc_sent_to_metad_failed</code> Storaged \u670d\u52a1\u53d1\u7ed9 Metad \u670d\u52a1\u7684 RPC \u8bf7\u6c42\u5931\u8d25\u7684\u6570\u91cf\u3002 <code>num_rpc_sent_to_metad</code> Storaged \u670d\u52a1\u53d1\u7ed9 Metad \u670d\u52a1\u7684 RPC \u8bf7\u6c42\u6570\u91cf\u3002 <code>num_tags_deleted</code> \u5220\u9664\u7684 Tag \u6570\u91cf\u3002 <code>num_vertices_deleted</code> \u5220\u9664\u7684\u70b9\u6570\u91cf\u3002 <code>num_vertices_inserted</code> \u63d2\u5165\u7684\u70b9\u6570\u91cf\u3002 <code>transfer_leader_latency_us</code> Raft \u534f\u8bae\u4e2d\u8f6c\u79fb Leader \u7684\u5ef6\u8fdf\u65f6\u95f4\u3002 <code>lookup_latency_us</code> LookupProcessor \u6267\u884c\u7684\u5ef6\u8fdf\u65f6\u95f4\u3002 <code>num_lookup_errors</code> LookupProcessor \u6267\u884c\u65f6\u51fa\u9519\u7684\u6b21\u6570\u3002 <code>num_scan_vertex</code> ScanVertexProcessor \u6267\u884c\u7684\u6b21\u6570\u3002 <code>num_scan_vertex_errors</code> ScanVertexProcessor \u6267\u884c\u65f6\u51fa\u9519\u7684\u6b21\u6570\u3002 <code>update_edge_latency_us</code> UpdateEdgeProcessor \u6267\u884c\u7684\u5ef6\u8fdf\u65f6\u95f4\u3002 <code>num_update_vertex</code> UpdateVertexProcessor \u6267\u884c\u7684\u6b21\u6570\u3002 <code>num_update_vertex_errors</code> UpdateVertexProcessor \u6267\u884c\u65f6\u51fa\u9519\u7684\u6b21\u6570\u3002 <code>kv_get_latency_us</code> Getprocessor \u7684\u5ef6\u8fdf\u65f6\u95f4\u3002 <code>kv_put_latency_us</code> PutProcessor \u7684\u5ef6\u8fdf\u65f6\u95f4\u3002 <code>kv_remove_latency_us</code> RemoveProcessor \u7684\u5ef6\u8fdf\u65f6\u95f4\u3002 <code>num_kv_get_errors</code> GetProcessor \u6267\u884c\u51fa\u9519\u6b21\u6570\u3002 <code>num_kv_get</code> GetProcessor \u6267\u884c\u6b21\u6570\u3002 <code>num_kv_put_errors</code> PutProcessor \u6267\u884c\u51fa\u9519\u6b21\u6570\u3002 <code>num_kv_put</code> PutProcessor \u6267\u884c\u6b21\u6570\u3002 <code>num_kv_remove_errors</code> RemoveProcessor \u6267\u884c\u51fa\u9519\u6b21\u6570\u3002 <code>num_kv_remove</code> RemoveProcessor \u6267\u884c\u6b21\u6570\u3002 <code>forward_tranx_latency_us</code> \u4f20\u8f93\u5ef6\u8fdf\u65f6\u95f4\u3002 <code>scan_edge_latency_us</code> ScanEdgeProcessor \u6267\u884c\u7684\u5ef6\u8fdf\u65f6\u95f4\u3002 <code>num_scan_edge_errors</code> ScanEdgeProcessor \u6267\u884c\u65f6\u51fa\u9519\u7684\u6b21\u6570\u3002 <code>num_scan_edge</code> ScanEdgeProcessor \u6267\u884c\u7684\u6b21\u6570\u3002 <code>scan_vertex_latency_us</code> ScanVertexProcessor \u6267\u884c\u7684\u5ef6\u8fdf\u65f6\u95f4\u3002 <code>num_add_edges</code> \u6dfb\u52a0\u8fb9\u7684\u6b21\u6570\u3002 <code>num_add_edges_errors</code> \u6dfb\u52a0\u8fb9\u65f6\u51fa\u9519\u7684\u6b21\u6570\u3002 <code>num_add_vertices</code> \u6dfb\u52a0\u70b9\u7684\u6b21\u6570\u3002 <code>num_start_elect</code> Raft \u53d1\u8d77\u6295\u7968\u7684\u6b21\u6570 <code>num_add_vertices_errors</code> \u6dfb\u52a0\u70b9\u65f6\u51fa\u9519\u7684\u6b21\u6570\u3002 <code>num_delete_vertices_errors</code> \u5220\u9664\u70b9\u65f6\u51fa\u9519\u7684\u6b21\u6570\u3002 <code>append_log_latency_us</code> Raft \u590d\u5236\u65e5\u5fd7\u5230\u5355\u4e2a\u8282\u70b9\u7684\u5ef6\u8fdf\u3002 <code>num_grant_votes</code> Raft \u6295\u7968\u7ed9\u5176\u4ed6\u8282\u70b9\u7684\u6b21\u6570\u3002 <code>replicate_log_latency_us</code> Raft \u590d\u5236\u65e5\u5fd7\u5230\u5927\u591a\u6570\u8282\u70b9\u7684\u5ef6\u8fdf\u3002 <code>num_delete_tags</code> \u5220\u9664 Tag \u7684\u6b21\u6570\u3002 <code>num_delete_tags_errors</code> \u5220\u9664 Tag \u65f6\u51fa\u9519\u7684\u6b21\u6570\u3002 <code>num_delete_edges</code> \u5220\u9664\u8fb9\u7684\u6b21\u6570\u3002 <code>num_delete_edges_errors</code> \u5220\u9664\u8fb9\u65f6\u51fa\u9519\u7684\u6b21\u6570\u3002 <code>num_send_snapshot</code> \u53d1\u9001\u5feb\u7167\u7684\u6b21\u6570\u3002 <code>update_vertex_latency_us</code> UpdateVertexProcessor \u6267\u884c\u7684\u5ef6\u8fdf\u65f6\u95f4\u3002 <code>append_wal_latency_us</code> Raft \u5199\u5165\u5355\u6761 WAL \u7684\u5ef6\u8fdf\u3002 <code>num_update_edge</code> UpdateEdgeProcessor \u6267\u884c\u7684\u6b21\u6570\u3002 <code>delete_tags_latency_us</code> \u5220\u9664 Tag \u7684\u5ef6\u8fdf\u65f6\u95f4\u3002 <code>num_update_edge_errors</code> UpdateEdgeProcessor \u6267\u884c\u65f6\u51fa\u9519\u7684\u6b21\u6570\u3002 <code>num_get_neighbors</code> GetNeighborsProcessor \u6267\u884c\u7684\u6b21\u6570\u3002 <code>num_get_dst_by_src</code> GetDstBySrcProcessor \u6267\u884c\u7684\u6b21\u6570\u3002 <code>num_get_prop_errors</code> GetPropProcessor \u6267\u884c\u65f6\u51fa\u9519\u7684\u6b21\u6570\u3002 <code>num_delete_vertices</code> \u5220\u9664\u70b9\u7684\u6b21\u6570\u3002 <code>num_lookup</code> LookupProcessor \u6267\u884c\u7684\u6b21\u6570\u3002 <code>num_sync_data</code> Storage \u540c\u6b65 Drainer \u6570\u636e\u7684\u6b21\u6570\u3002 <code>num_sync_data_errors</code> Storage \u540c\u6b65 Drainer \u6570\u636e\u51fa\u9519\u7684\u6b21\u6570\u3002 <code>sync_data_latency_us</code> Storage \u540c\u6b65 Drainer \u6570\u636e\u7684\u5ef6\u8fdf\u65f6\u95f4\u3002"},{"location":"reuse/source-monitoring-metrics/#_1","title":"\u56fe\u7a7a\u95f4\u7ea7\u522b\u76d1\u63a7\u6307\u6807","text":"<p>Note</p> <p>\u56fe\u7a7a\u95f4\u7ea7\u522b\u76d1\u63a7\u6307\u6807\u662f\u52a8\u6001\u521b\u5efa\u7684, \u53ea\u6709\u5f53\u56fe\u7a7a\u95f4\u5185\u89e6\u53d1\u8be5\u884c\u4e3a\u65f6\uff0c\u5bf9\u5e94\u7684\u6307\u6807\u624d\u4f1a\u521b\u5efa\uff0c\u7528\u6237\u624d\u80fd\u67e5\u8be2\u5230\u3002</p> \u53c2\u6570 \u8bf4\u660e <code>num_active_queries</code> \u5f53\u524d\u6b63\u5728\u6267\u884c\u7684\u67e5\u8be2\u6570\u3002 <code>num_queries</code> \u67e5\u8be2\u6b21\u6570\u3002 <code>num_sentences</code> Graphd \u670d\u52a1\u63a5\u6536\u7684\u8bed\u53e5\u6570\u3002 <code>optimizer_latency_us</code> \u4f18\u5316\u5668\u9636\u6bb5\u5ef6\u8fdf\u65f6\u95f4\u3002 <code>query_latency_us</code> \u67e5\u8be2\u5ef6\u8fdf\u65f6\u95f4\u3002 <code>num_slow_queries</code> \u6162\u67e5\u8be2\u6b21\u6570\u3002 <code>num_query_errors</code> \u67e5\u8be2\u62a5\u9519\u8bed\u53e5\u6570\u91cf\u3002 <code>num_query_errors_leader_changes</code> \u56e0\u67e5\u8be2\u9519\u8bef\u800c\u5bfc\u81f4\u7684 Leader \u53d8\u66f4\u7684\u6b21\u6570\u3002 <code>num_killed_queries</code> \u88ab\u7ec8\u6b62\u7684\u67e5\u8be2\u6570\u91cf\u3002 <code>num_aggregate_executors</code> \u805a\u5408\uff08Aggregate\uff09\u7b97\u5b50\u6267\u884c\u65f6\u95f4\u3002 <code>num_sort_executors</code> \u6392\u5e8f\uff08Sort\uff09\u7b97\u5b50\u6267\u884c\u65f6\u95f4\u3002 <code>num_indexscan_executors</code> \u7d22\u5f15\u626b\u63cf\uff08IndexScan\uff09\u7b97\u5b50\u6267\u884c\u65f6\u95f4\u3002 <code>num_auth_failed_sessions_bad_username_password</code> \u56e0\u7528\u6237\u540d\u5bc6\u7801\u9519\u8bef\u5bfc\u9a8c\u8bc1\u5931\u8d25\u7684\u4f1a\u8bdd\u6570\u91cf\u3002 <code>num_auth_failed_sessions</code> \u767b\u5f55\u9a8c\u8bc1\u5931\u8d25\u7684\u4f1a\u8bdd\u6570\u91cf\u3002 <code>num_opened_sessions</code> \u670d\u52a1\u7aef\u5efa\u7acb\u8fc7\u7684\u4f1a\u8bdd\u6570\u91cf\u3002 <code>num_queries_hit_memory_watermark</code> \u8fbe\u5230\u5185\u5b58\u6c34\u4f4d\u7ebf\u7684\u8bed\u53e5\u7684\u6570\u91cf\u3002 <code>num_reclaimed_expired_sessions</code> \u670d\u52a1\u7aef\u4e3b\u52a8\u56de\u6536\u7684\u8fc7\u671f\u7684\u4f1a\u8bdd\u6570\u91cf\u3002 <code>num_rpc_sent_to_metad_failed</code> Graphd \u670d\u52a1\u53d1\u7ed9 Metad \u7684 RPC \u8bf7\u6c42\u5931\u8d25\u7684\u6570\u91cf\u3002 <code>num_rpc_sent_to_metad</code> Graphd \u670d\u52a1\u53d1\u7ed9 Metad \u670d\u52a1\u7684 RPC \u8bf7\u6c42\u6570\u91cf\u3002 <code>num_rpc_sent_to_storaged_failed</code> Graphd \u670d\u52a1\u53d1\u7ed9 Storaged \u670d\u52a1\u7684 RPC \u8bf7\u6c42\u5931\u8d25\u7684\u6570\u91cf\u3002 <code>num_rpc_sent_to_storaged</code> Graphd \u670d\u52a1\u53d1\u7ed9 Storaged \u670d\u52a1\u7684 RPC \u8bf7\u6c42\u6570\u91cf\u3002 <code>slow_query_latency_us</code> \u6162\u67e5\u8be2\u5ef6\u8fdf\u65f6\u95f4\u3002"},{"location":"reuse/source_connect-to-nebula-graph/","title":"Source connect to nebula graph","text":"<p>\u672c\u6587\u4ecb\u7ecd\u5982\u4f55\u4f7f\u7528\u539f\u751f\u547d\u4ee4\u884c\u5ba2\u6237\u7aef NebulaGraph Console \u8fde\u63a5 NebulaGraph \u3002</p> <p>Caution</p> <p>\u9996\u6b21\u8fde\u63a5\u5230 NebulaGraph \u540e\uff0c\u5fc5\u987b\u5148\u6ce8\u518c Storage \u670d\u52a1\uff0c\u624d\u80fd\u6b63\u5e38\u67e5\u8be2\u6570\u636e\u3002</p> <p>NebulaGraph \u652f\u6301\u591a\u79cd\u7c7b\u578b\u7684\u5ba2\u6237\u7aef\uff0c\u5305\u62ec\u547d\u4ee4\u884c\u5ba2\u6237\u7aef\u3001\u53ef\u89c6\u5316\u754c\u9762\u5ba2\u6237\u7aef\u548c\u6d41\u884c\u7f16\u7a0b\u8bed\u8a00\u5ba2\u6237\u7aef\u3002\u8be6\u60c5\u53c2\u89c1\u5ba2\u6237\u7aef\u5217\u8868\u3002</p>"},{"location":"reuse/source_connect-to-nebula-graph/#_1","title":"\u524d\u63d0\u6761\u4ef6","text":"<ul> <li>NebulaGraph \u670d\u52a1\u5df2\u542f\u52a8\u3002</li> </ul> <ul> <li>\u8fd0\u884c NebulaGraph Console \u7684\u673a\u5668\u548c\u8fd0\u884c NebulaGraph \u7684\u670d\u52a1\u5668\u7f51\u7edc\u4e92\u901a\u3002</li> </ul> <ul> <li> <p>NebulaGraph Console \u7684\u7248\u672c\u517c\u5bb9 NebulaGraph \u7684\u7248\u672c\u3002</p> <p>Note</p> <p>\u7248\u672c\u76f8\u540c\u7684 NebulaGraph Console \u548c NebulaGraph \u517c\u5bb9\u7a0b\u5ea6\u6700\u9ad8\uff0c\u7248\u672c\u4e0d\u540c\u7684 NebulaGraph Console \u8fde\u63a5 NebulaGraph \u65f6\uff0c\u53ef\u80fd\u4f1a\u6709\u517c\u5bb9\u95ee\u9898\uff0c\u6216\u8005\u65e0\u6cd5\u8fde\u63a5\u5e76\u62a5\u9519<code>incompatible version between client and server</code>\u3002</p> </li> </ul>"},{"location":"reuse/source_connect-to-nebula-graph/#_2","title":"\u64cd\u4f5c\u6b65\u9aa4","text":"<ol> <li> <p>\u5728 NebulaGraph Console \u4e0b\u8f7d\u9875\u9762\uff0c\u786e\u8ba4\u9700\u8981\u7684\u7248\u672c\uff0c\u5355\u51fb Assets\u3002</p> <p>Note</p> <p>\u5efa\u8bae\u9009\u62e9\u6700\u65b0\u7248\u672c\u3002</p> </li> <li> <p>\u5728 Assets \u533a\u57df\u627e\u5230\u673a\u5668\u8fd0\u884c\u6240\u9700\u7684\u4e8c\u8fdb\u5236\u6587\u4ef6\uff0c\u4e0b\u8f7d\u6587\u4ef6\u5230\u673a\u5668\u4e0a\u3002</p> </li> <li> <p>\uff08\u53ef\u9009\uff09\u4e3a\u65b9\u4fbf\u4f7f\u7528\uff0c\u91cd\u547d\u540d\u6587\u4ef6\u4e3a<code>nebula-console</code>\u3002</p> <p>Note</p> <p>\u5728 Windows \u7cfb\u7edf\u4e2d\uff0c\u8bf7\u91cd\u547d\u540d\u4e3a<code>nebula-console.exe</code>\u3002</p> </li> <li> <p>\u5728\u8fd0\u884c NebulaGraph Console \u7684\u673a\u5668\u4e0a\u6267\u884c\u5982\u4e0b\u547d\u4ee4\uff0c\u4e3a\u7528\u6237\u6388\u4e88 nebula-console \u6587\u4ef6\u7684\u6267\u884c\u6743\u9650\u3002</p> <p>Note</p> <p>Windows \u7cfb\u7edf\u8bf7\u8df3\u8fc7\u6b64\u6b65\u9aa4\u3002</p> <pre><code>$ chmod 111 nebula-console\n</code></pre> </li> <li> <p>\u5728\u547d\u4ee4\u884c\u754c\u9762\u4e2d\uff0c\u5207\u6362\u5de5\u4f5c\u76ee\u5f55\u81f3 nebula-console \u6587\u4ef6\u6240\u5728\u76ee\u5f55\u3002</p> </li> <li> <p>\u6267\u884c\u5982\u4e0b\u547d\u4ee4\u8fde\u63a5 NebulaGraph \u3002</p> <ul> <li> <p>Linux \u6216 macOS</p> <pre><code>$ ./nebula-console -addr &lt;ip&gt; -port &lt;port&gt; -u &lt;username&gt; -p &lt;password&gt;\n  [-t 120] [-e \"nGQL_statement\" | -f filename.nGQL]\n</code></pre> </li> </ul> <ul> <li> <p>Windows</p> <pre><code>&gt; nebula-console.exe -addr &lt;ip&gt; -port &lt;port&gt; -u &lt;username&gt; -p &lt;password&gt;\n  [-t 120] [-e \"nGQL_statement\" | -f filename.nGQL]\n</code></pre> </li> </ul> <p>\u53c2\u6570\u8bf4\u660e\u5982\u4e0b\u3002</p> \u53c2\u6570 \u8bf4\u660e <code>-h/-help</code> \u663e\u793a\u5e2e\u52a9\u83dc\u5355\u3002 <code>-addr/-address</code> \u8bbe\u7f6e\u8981\u8fde\u63a5\u7684 Graph \u670d\u52a1\u7684 IP \u6216\u4e3b\u673a\u540d\u3002\u9ed8\u8ba4\u5730\u5740\u4e3a 127.0.0.1\u3002 <code>-P/-port</code> \u8bbe\u7f6e\u8981\u8fde\u63a5\u7684 Graph \u670d\u52a1\u7684\u7aef\u53e3\u3002\u9ed8\u8ba4\u7aef\u53e3\u4e3a 9669\u3002 <code>-u/-user</code> \u8bbe\u7f6e NebulaGraph \u8d26\u53f7\u7684\u7528\u6237\u540d\u3002\u672a\u542f\u7528\u8eab\u4efd\u8ba4\u8bc1\u65f6\uff0c\u53ef\u4ee5\u4f7f\u7528\u4efb\u610f\u5df2\u5b58\u5728\u7684\u7528\u6237\u540d\uff08\u9ed8\u8ba4\u4e3a<code>root</code>\uff09\u3002 <code>-p/-password</code> \u8bbe\u7f6e\u7528\u6237\u540d\u5bf9\u5e94\u7684\u5bc6\u7801\u3002\u672a\u542f\u7528\u8eab\u4efd\u8ba4\u8bc1\u65f6\uff0c\u5bc6\u7801\u53ef\u4ee5\u586b\u5199\u4efb\u610f\u5b57\u7b26\u3002 <code>-t/-timeout</code> \u8bbe\u7f6e\u6574\u6570\u7c7b\u578b\u7684\u8fde\u63a5\u8d85\u65f6\u65f6\u95f4\u3002\u5355\u4f4d\u4e3a\u6beb\u79d2\uff0c\u9ed8\u8ba4\u503c\u4e3a 120\u3002 <code>-e/-eval</code> \u8bbe\u7f6e\u5b57\u7b26\u4e32\u7c7b\u578b\u7684 nGQL \u8bed\u53e5\u3002\u8fde\u63a5\u6210\u529f\u540e\u4f1a\u6267\u884c\u4e00\u6b21\u8be5\u8bed\u53e5\u5e76\u8fd4\u56de\u7ed3\u679c\uff0c\u7136\u540e\u81ea\u52a8\u65ad\u5f00\u8fde\u63a5\u3002 <code>-f/-file</code> \u8bbe\u7f6e\u5b58\u50a8 nGQL \u8bed\u53e5\u7684\u6587\u4ef6\u7684\u8def\u5f84\u3002\u8fde\u63a5\u6210\u529f\u540e\u4f1a\u6267\u884c\u8be5\u6587\u4ef6\u5185\u7684 nGQL \u8bed\u53e5\u5e76\u8fd4\u56de\u7ed3\u679c\uff0c\u6267\u884c\u5b8c\u6bd5\u540e\u81ea\u52a8\u65ad\u5f00\u8fde\u63a5\u3002 <code>-enable_ssl</code> \u8fde\u63a5 NebulaGraph \u65f6\u4f7f\u7528 SSL \u52a0\u5bc6\u3002 <code>-ssl_root_ca_path</code> \u6307\u5b9a CA \u8bc1\u4e66\u7684\u5b58\u50a8\u8def\u5f84\u3002 <code>-ssl_cert_path</code> \u6307\u5b9a CRT \u8bc1\u4e66\u7684\u5b58\u50a8\u8def\u5f84\u3002 <code>-ssl_private_key_path</code> \u6307\u5b9a\u79c1\u94a5\u6587\u4ef6\u7684\u5b58\u50a8\u8def\u5f84\u3002 <p>\u66f4\u591a\u53c2\u6570\u53c2\u89c1\u9879\u76ee\u4ed3\u5e93\u3002</p> </li> </ol>"},{"location":"reuse/source_create_instance_aliyun/","title":"Source create instance aliyun","text":""},{"location":"reuse/source_create_instance_aliyun/#_1","title":"\u8d26\u53f7\u4e0e\u6743\u9650","text":"<ul> <li>\u51c6\u5907\u963f\u91cc\u4e91\u8d26\u53f7\u3002</li> <li> <p>\u5982\u679c\u4f7f\u7528 RAM \u7528\u6237\u521b\u5efa\u5b9e\u4f8b\uff0c\u9700\u4e3a\u5176\u6dfb\u52a0\u4ee5\u4e0b\u6743\u9650\uff1a</p> <ul> <li>AliyunECSFullAccess</li> <li>AliyunVPCFullAccess</li> <li>AliyunROSFullAccess</li> <li>AliyunCloudMonitorFullAccess</li> <li>AliyunComputeNestUserFullAccess</li> </ul> </li> </ul>"},{"location":"reuse/source_create_instance_aliyun/#_2","title":"\u8d44\u6e90\u4e0e\u8d39\u7528","text":"<p>NebulaGraph Cloud \u963f\u91cc\u4e91\u7248\u652f\u6301\u514d\u8d39\u8bd5\u7528\u548c\u4ed8\u8d39\u4f7f\u7528\uff0c\u4e8c\u8005\u7684\u8be6\u7ec6\u8bf4\u660e\u5982\u4e0b\u8868\u3002</p> \u9879\u76ee \u514d\u8d39\u8bd5\u7528\u7248 \u4ed8\u8d39\u7248 \u4e91\u8d44\u6e90\u5f52\u5c5e \u963f\u91cc\u4e91\u5b98\u65b9\u8d26\u53f7 \u7528\u6237\u8d26\u53f7 \u4e91\u8d44\u6e90\u8d39\u7528 \u963f\u91cc\u4e91\u627f\u62c5 \u7528\u6237\u627f\u62c5 \u4e91\u8d44\u6e90\u4f7f\u7528\u65f6\u957f 30 \u5929\uff08\u4e0d\u53ef\u7eed\u671f\uff09 \u7528\u6237\u521b\u5efa\u5b9e\u4f8b\u65f6\u9009\u62e9 NebulaGraph \u8bb8\u53ef\u8bc1\u8d39\u7528 \u8bd5\u7528\u671f\u5185\u514d\u8d39 \u7528\u6237\u627f\u62c5 NebulaGraph \u670d\u52a1\u8bb8\u53ef\u8bc1\u6709\u6548\u671f 30 \u5929 \u7528\u6237\u521b\u5efa\u5b9e\u4f8b\u65f6\u9009\u62e9 \u8bb8\u53ef\u8bc1\u8fc7\u671f\u540e\u6570\u636e\u662f\u5426\u4fdd\u7559 \u5426\uff08\u56e0\u4e91\u8d44\u6e90\u4f1a\u540c\u65f6\u5230\u671f\uff09 \u662f \u4e91\u8d44\u6e90\u5230\u671f\u540e\u6570\u636e\u662f\u5426\u4fdd\u7559 \u5426 \u5426 \u6570\u636e\u76d8\u5feb\u7167\u8d39\u7528 \u963f\u91cc\u4e91\u627f\u62c5 \u7528\u6237\u627f\u62c5\uff08\u53ef\u5173\u95ed\u529f\u80fd\uff09"},{"location":"reuse/source_create_instance_aliyun/#_3","title":"\u6570\u636e\u5907\u4efd","text":"<p>\u5728\u521b\u5efa\u670d\u52a1\u5b9e\u4f8b\u65f6\uff0c\u7cfb\u7edf\u4f1a\u9ed8\u8ba4\u5f00\u542f\u6570\u636e\u76d8\u81ea\u52a8\u5feb\u7167\u5907\u4efd\uff0c\u7528\u4e8e\u5468\u671f\u6027\u5907\u4efd NebulaGraph \u6570\u636e\u3002</p> <p>\u521b\u5efa\u4ed8\u8d39\u7248\u670d\u52a1\u5b9e\u4f8b\u524d\u9700\u5f00\u901a\u5feb\u7167\u3002\u514d\u8d39\u8bd5\u7528\u5b9e\u4f8b\u4f7f\u7528\u7684\u662f\u963f\u91cc\u4e91\u5b98\u65b9\u8d26\u53f7\u4e0b\u7684\u8d44\u6e90\uff0c\u5df2\u5f00\u901a\u5feb\u7167\uff0c\u65e0\u9700\u7528\u6237\u624b\u52a8\u5f00\u901a\u3002</p> <p>\u9ed8\u8ba4\u7684\u5feb\u7167\u5907\u4efd\u7b56\u7565\u4e3a\u6bcf\u5929 00:00 \u521b\u5efa\u5feb\u7167\u3002</p> <p>\u521b\u5efa\u5feb\u7167\u4f1a\u4ea7\u751f\u8d39\u7528\uff0c\u8be6\u60c5\u53c2\u89c1\u5feb\u7167\u8ba1\u8d39\u3002</p> <p>\u5982\u9700\u5220\u9664\u5feb\u7167\u3001\u4fee\u6539\u6216\u5220\u9664\u81ea\u52a8\u5feb\u7167\u7b56\u7565\uff0c\u53c2\u89c1\u5feb\u7167\u6587\u6863\u3002</p>"},{"location":"reuse/source_create_instance_aliyun/#_4","title":"\u5957\u9910\u7248\u672c","text":"<p>NebulaGraph Cloud \u963f\u91cc\u4e91\u7248\u652f\u6301\u5982\u4e0b\u5957\u9910\u7248\u672c\u3002</p> \u5957\u9910\u7248\u672c \u8bf4\u660e \u57fa\u7840\u7248 \u5c06\u6240\u6709 NebulaGraph \u670d\u52a1\u8282\u70b9\u90e8\u7f72\u5728 1 \u53f0 ECS \u670d\u52a1\u5668\u4e0a\u3002 \u6807\u51c6\u7248 \u5c06 Graph \u670d\u52a1\u548c Storage \u670d\u52a1\u5206\u522b\u90e8\u7f72\u5728\u4e0d\u540c\u7684 ECS \u670d\u52a1\u5668\u4e0a\uff0c\u6bcf\u4e2a\u670d\u52a1\u90fd\u662f\u5355\u8282\u70b9\uff081 \u53f0 ECS\uff09\u3002\u5c06\u751f\u6001\u5de5\u5177\u6df7\u5408\u90e8\u7f72\u5728 1 \u53f0 ECS \u670d\u52a1\u5668\u4e0a\u3002 \u9ad8\u53ef\u7528\u7248 \u5c06 Graph \u670d\u52a1\u548c Storage \u670d\u52a1\u5206\u522b\u90e8\u7f72\u5728\u4e0d\u540c\u7684 ECS \u670d\u52a1\u5668\u4e0a\uff0c\u6bcf\u4e2a\u670d\u52a1\u90fd\u5305\u542b 3 \u8282\u70b9\uff083 \u53f0 ECS\uff09\u3002\u5c06\u751f\u6001\u5de5\u5177\u6df7\u5408\u90e8\u7f72\u5728 1 \u53f0 ECS \u670d\u52a1\u5668\u4e0a\u3002 <p>\u4ed8\u8d39\u7248\u548c\u514d\u8d39\u8bd5\u7528\u7248\u670d\u52a1\u5b9e\u4f8b\u652f\u6301\u7684\u5957\u9910\u7248\u672c\u6709\u6240\u4e0d\u540c\uff0c\u8be6\u60c5\u53c2\u89c1\u521b\u5efa\u5b9e\u4f8b\u9875\u9762\u3002</p>"},{"location":"reuse/source_create_instance_aliyun/#_5","title":"\u521b\u5efa\u4ed8\u8d39\u7248\u670d\u52a1\u5b9e\u4f8b","text":"<ol> <li> <p>\u767b\u5f55\u963f\u91cc\u4e91\u63a7\u5236\u53f0\u3002</p> </li> <li> <p>\u6253\u5f00\u4e91\u5e02\u573a\u7684 NebulaGraph \u4ea7\u54c1\u9875\u3002</p> </li> <li> <p>\u9009\u62e9\u5957\u9910\u7248\u672c\u548c\u8d2d\u4e70\u65f6\u957f\uff08\u5373 NebulaGraph \u670d\u52a1\u7684\u8bb8\u53ef\u8bc1\u6709\u6548\u671f\uff09\uff0c\u5e76\u5355\u51fb\u7acb\u5373\u8d2d\u4e70\u3002</p> <p>Caution</p> <p>\u5f53\u524d\u4e91\u5e02\u573a\u663e\u793a\u7684\u90e8\u5206\u4ef7\u683c\u5e76\u975e\u5b9e\u9645\u552e\u4ef7\uff0c\u8d2d\u4e70\u65f6\u9700\u901a\u8fc7\u53f3\u4fa7\u7684\u9489\u9489\u5ba2\u670d\u786e\u8ba4\u5b9e\u9645\u4ef7\u683c\u3002</p> </li> <li> <p>\u5728\u521b\u5efa\u670d\u52a1\u5b9e\u4f8b\u9875\uff0c\u4fdd\u6301\u9009\u62e9\u6a21\u677f\u5904\u7684\u9009\u62e9\u4e0d\u53d8\u3002\u5982\u9700\u5207\u6362\u90e8\u7f72\u67b6\u6784\uff0c\u53ef\u6539\u53d8\u9009\u4e2d\u7684\u9009\u9879\uff0c\u91cd\u65b0\u9009\u62e9\u6a21\u677f\u3002</p> <p>Note</p> <p>\u6539\u53d8\u6a21\u677f\u4f1a\u6539\u53d8\u4e4b\u524d\u9009\u62e9\u7684\u5957\u9910\u7248\u672c\uff0c\u8f6f\u4ef6\u8d39\u7528\uff08 NebulaGraph \u8bb8\u53ef\u8bc1\u8d39\u7528\uff09\u548c\u521b\u5efa\u670d\u52a1\u5b9e\u4f8b\u9700\u8981\u7684\u8d44\u6e90\u4e5f\u4f1a\u6539\u53d8\u3002</p> </li> <li> <p>\uff08\u53ef\u9009\uff09\u8bbe\u7f6e\u670d\u52a1\u5b9e\u4f8b\u540d\u79f0\u3002\u9ed8\u8ba4\u503c\u4e3a\u670d\u52a1\u5b9e\u4f8b ID\u3002</p> </li> <li> <p>\u9009\u62e9\u8981\u521b\u5efa\u670d\u52a1\u5b9e\u4f8b\u7684\u5730\u57df\u3002</p> </li> <li> <p>\u5728\u4ed8\u8d39\u6a21\u5f0f\u8bbe\u7f6e\u533a\u57df\uff0c\u6307\u5b9a ECS \u670d\u52a1\u5668\u7684\u4ed8\u8d39\u65b9\u5f0f\u3002\u9ed8\u8ba4\u4e3a\u6309\u91cf\u4ed8\u8d39\u3002</p> <ul> <li>\u6309\u91cf\u4ed8\u8d39\uff1a\u6309\u7167\u8ba1\u8d39\u5468\u671f\u8ba1\u8d39\uff0c\u5728\u6bcf\u4e2a\u7ed3\u7b97\u5468\u671f\u751f\u6210\u8d26\u5355\u5e76\u4ece\u8d26\u6237\u4e2d\u6263\u9664\u76f8\u5e94\u8d39\u7528\u3002\u8be6\u60c5\u53c2\u89c1\u6309\u91cf\u4ed8\u8d39\u3002</li> </ul> <ul> <li>\u5305\u5e74\u5305\u6708\uff1a\u5148\u4ed8\u8d39\u540e\u4f7f\u7528\u3002\u8be6\u60c5\u53c2\u89c1\u5305\u5e74\u5305\u6708\u3002\u9009\u62e9\u5305\u5e74\u5305\u6708\u6a21\u5f0f\u9700\u8981\u6307\u5b9a\u8d2d\u4e70\u65f6\u957f\u5468\u671f\u548c\u8d2d\u4e70\u65f6\u957f\u3002\u8d2d\u4e70\u65f6\u957f\u5468\u671f\u5f53\u524d\u4ec5\u652f\u6301 Month\uff0c\u5373\u6309\u6708\u8d2d\u4e70\u3002</li> </ul> </li> <li> <p>\u5728  NebulaGraph \u914d\u7f6e\u533a\u57df\uff0c\u5b8c\u6210\u6570\u636e\u76d8\u548c ECS \u670d\u52a1\u5668\u5bc6\u7801\u8bbe\u7f6e\u3002</p> </li> <li> <p>\u5728\u57fa\u7840\u8bbe\u65bd\u914d\u7f6e\u533a\u57df\uff0c\u5b8c\u6210\u4ee5\u4e0b\u8bbe\u7f6e\u3002</p> <ol> <li> <p>\u9009\u62e9\u4e13\u6709\u7f51\u7edc VPC \u5b9e\u4f8b ID\u3002</p> <p>\u5982\u679c\u4e0b\u62c9\u5217\u8868\u4e3a\u7a7a\uff0c\u5148\u5355\u51fb\u5176\u53f3\u4fa7\u7684\u65b0\u5efa\u4e13\u6709\u7f51\u7edc\uff0c\u5b8c\u6210\u4e13\u6709\u7f51\u7edc\u521b\u5efa\u3002</p> </li> <li> <p>\u9009\u62e9\u4ea4\u6362\u673a\u53ef\u7528\u533a\u3002</p> </li> <li> <p>\u9009\u62e9\u4e1a\u52a1\u7f51\u7edc\u4ea4\u6362\u673a\u7684\u5b9e\u4f8b ID\u3002</p> <p>\u5982\u679c\u4e0b\u62c9\u5217\u8868\u4e3a\u7a7a\uff0c\u5148\u5355\u51fb\u5176\u53f3\u4fa7\u7684\u65b0\u5efa\u4ea4\u6362\u673a\uff0c\u5b8c\u6210\u4ea4\u6362\u673a\u521b\u5efa\u3002</p> </li> </ol> </li> <li> <p>\u5b8c\u6210\u6743\u9650\u786e\u8ba4\uff0c\u5e76\u9009\u4e2d\u6211\u540c\u610f\u6388\u6743\u670d\u52a1\u5546\uff08\u676d\u5dde\u60a6\u6570\u79d1\u6280\u6709\u9650\u516c\u53f8\uff09\u83b7\u53d6\u4e0a\u8ff0\u6743\u9650\u4ee5\u63d0\u4f9b\u4ee3\u8fd0\u7ef4\u670d\u52a1\u3002</p> </li> <li> <p>\u5728\u9875\u9762\u5e95\u90e8\uff0c\u5355\u51fb\u4e0b\u4e00\u6b65\uff1a\u786e\u8ba4\u8ba2\u5355\u3002</p> </li> <li> <p>\u5728\u670d\u52a1\u6761\u6b3e\u533a\u57df\uff0c\u52fe\u9009\u6211\u5df2\u9605\u8bfb\u5e76\u540c\u610f\u300a\u5546\u54c1\u5728\u7ebf\u534f\u8bae\u300b\u300a\u4e91\u5e02\u573a\u5e73\u53f0\u670d\u52a1\u534f\u8bae\u300b\u300a\u8ba1\u7b97\u5de2\u670d\u52a1\u534f\u8bae\u300b\u3002</p> </li> <li> <p>\u5728\u9875\u9762\u5e95\u90e8\uff0c\u5355\u51fb\u7acb\u5373\u652f\u4ed8\u3002</p> </li> <li> <p>\u5728\u652f\u4ed8\u9875\u9762\uff0c\u9009\u62e9\u652f\u4ed8\u65b9\u5f0f\uff0c\u4e4b\u540e\u5355\u51fb\u9875\u9762\u5e95\u90e8\u7684\u652f\u4ed8\u3002</p> </li> <li> <p>\u5728\u652f\u4ed8\u5b8c\u6210\u9875\u9762\uff0c\u5355\u51fb\u7ba1\u7406\u63a7\u5236\u53f0\u3002</p> </li> <li> <p>\u5728\u5df2\u8d2d\u4e70\u7684\u670d\u52a1\u9875\u9762\uff0c\u5355\u51fb\u8981\u521b\u5efa\u7684\u5b9e\u4f8b\u53f3\u4fa7\u7684\u7acb\u5373\u8fdb\u5165\u8ba1\u7b97\u5de2\u90e8\u7f72\u6216\u67e5\u770b\u90e8\u7f72\u8be6\u60c5\u3002</p> <p>Note</p> <p>\u5982\u679c\u5df2\u8d2d\u4e70\u7684\u670d\u52a1\u5217\u8868\u4e2d\u672a\u663e\u793a\u8981\u521b\u5efa\u7684\u5b9e\u4f8b\uff0c\u5237\u65b0\u9875\u9762\u3002</p> </li> <li> <p>\u5728\u670d\u52a1\u5b9e\u4f8b\u8be6\u60c5\u9875\u67e5\u770b\u5b9e\u4f8b\u7684\u72b6\u6001\uff0c\u786e\u4fdd\u72b6\u6001\u4e3a\u90e8\u7f72\u4e2d\u3002</p> <p>\u90e8\u7f72\u7684\u5e73\u5747\u8017\u65f6\u4e3a 10 \u5206\u949f\u3002\u5b8c\u6210\u540e\u5b9e\u4f8b\u7684\u72b6\u6001\u53d8\u4e3a\u5df2\u90e8\u7f72\u3002</p> </li> </ol>"},{"location":"reuse/source_create_instance_aliyun/#_6","title":"\u521b\u5efa\u514d\u8d39\u7248\u8bd5\u7528\u7248\u670d\u52a1\u5b9e\u4f8b","text":"<p>Danger</p> <p>\u514d\u8d39\u8bd5\u7528\u5b9e\u4f8b\u4e0d\u53ef\u5728\u751f\u4ea7\u73af\u5883\u4e2d\u4f7f\u7528\u3002</p> <ol> <li> <p>\u767b\u5f55\u963f\u91cc\u4e91\u8ba1\u7b97\u5de2\u63a8\u8350\u670d\u52a1\u9875\u9762\uff0c\u641c\u7d22 NebulaGraph\u3002</p> </li> <li> <p>\u5728  NebulaGraph \u96c6\u7fa4\u7248\u5361\u7247\u4e0a\uff0c\u5355\u51fb\u514d\u8d39\u8bd5\u7528\u3002</p> </li> <li> <p>\u7cfb\u7edf\u4f1a\u4e3a\u9996\u6b21\u521b\u5efa NebulaGraph \u670d\u52a1\u5b9e\u4f8b\u7684\u7528\u6237\u5f39\u51fa\u7533\u8bf7\u5bf9\u8bdd\u6846\u3002\u5728\u7533\u8bf7\u6743\u9650\u5bf9\u8bdd\u6846\u4e2d\u586b\u5199\u7533\u8bf7\u4eba\u4fe1\u606f\u3002\u5e26\u6709\u7ea2\u8272\u661f\u53f7\uff08*\uff09\u7684\u4e3a\u5fc5\u586b\u9879\u3002</p> <p>Note</p> <p>\u7533\u8bf7\u901a\u8fc7\u540e\u9700\u4ece\u7b2c 1 \u6b65\u91cd\u65b0\u5f00\u59cb\u3002</p> </li> <li> <p>\uff08\u53ef\u9009\uff09\u8bbe\u7f6e\u670d\u52a1\u5b9e\u4f8b\u540d\u79f0\u3002\u9ed8\u8ba4\u503c\u4e3a\u670d\u52a1\u5b9e\u4f8b ID\u3002</p> </li> <li> <p>\u9009\u62e9\u8981\u521b\u5efa\u5b9e\u4f8b\u7684\u5730\u57df\u3002</p> </li> <li> <p>\u5728  NebulaGraph \u914d\u7f6e\u533a\u57df\uff0c\u5b8c\u6210\u6570\u636e\u76d8\u548c ECS \u670d\u52a1\u5668\u5bc6\u7801\u8bbe\u7f6e\u3002</p> </li> <li> <p>\u5728\u57fa\u7840\u8bbe\u65bd\u914d\u7f6e\u533a\u57df\uff0c\u9009\u62e9\u4ea4\u6362\u673a\u53ef\u7528\u533a\u3002</p> </li> <li> <p>\u5b8c\u6210\u6743\u9650\u786e\u8ba4\uff0c\u5e76\u9009\u4e2d\u6211\u540c\u610f\u6388\u6743\u670d\u52a1\u5546\uff08\u676d\u5dde\u60a6\u6570\u79d1\u6280\u6709\u9650\u516c\u53f8\uff09\u83b7\u53d6\u4e0a\u8ff0\u6743\u9650\u4ee5\u63d0\u4f9b\u4ee3\u8fd0\u7ef4\u670d\u52a1\u3002</p> </li> <li> <p>\u5728\u9875\u9762\u5e95\u90e8\uff0c\u5355\u51fb\u4e0b\u4e00\u6b65\uff1a\u786e\u8ba4\u8ba2\u5355\u3002</p> </li> <li> <p>\u5728\u670d\u52a1\u6761\u6b3e\u533a\u57df\uff0c\u52fe\u9009\u6211\u5df2\u9605\u8bfb\u5e76\u540c\u610f\u300a\u8ba1\u7b97\u5de2\u670d\u52a1\u534f\u8bae\u300b\u3002</p> </li> <li> <p>\u5728\u9875\u9762\u5e95\u90e8\uff0c\u5355\u51fb\u5f00\u59cb\u514d\u8d39\u8bd5\u7528\u3002</p> </li> <li> <p>\u5728\u63d0\u4ea4\u6210\u529f\u9875\u9762\uff0c\u5355\u51fb\u53bb\u5217\u8868\u67e5\u770b\u3002</p> </li> <li> <p>\u5728\u5b9e\u4f8b\u5217\u8868\u4e2d\u67e5\u770b\u76ee\u6807\u5b9e\u4f8b\u7684\u72b6\u6001\uff0c\u786e\u4fdd\u72b6\u6001\u4e3a\u90e8\u7f72\u4e2d\u3002</p> <p>\u90e8\u7f72\u7684\u5e73\u5747\u8017\u65f6\u4e3a 10 \u5206\u949f\u3002\u5b8c\u6210\u540e\u5b9e\u4f8b\u7684\u72b6\u6001\u53d8\u4e3a\u5df2\u90e8\u7f72\u3002</p> </li> </ol>"},{"location":"reuse/source_create_instance_aliyun/#_7","title":"\u5e38\u89c1\u95ee\u9898","text":"<p>Q\uff1a\u670d\u52a1\u5b9e\u4f8b\u7684\u72b6\u6001\u663e\u793a\u4e3a\u90e8\u7f72\u5931\u8d25\u600e\u4e48\u5904\u7406\uff1f</p> <ol> <li>\u5982\u679c\u4f7f\u7528 RAM \u8d26\u53f7\u521b\u5efa\u7684\u5b9e\u4f8b\uff0c\u786e\u8ba4\u4e3a\u8be5\u8d26\u53f7\u6388\u4e88\u4e86\u672c\u6587\u524d\u63d0\u6761\u4ef6\u4e2d\u6307\u5b9a\u7684\u6743\u9650\u3002</li> <li>\u5982\u679c\u6743\u9650\u7b26\u5408\u8981\u6c42\uff0c\u5220\u9664\u521b\u5efa\u5931\u8d25\u7684\u5b9e\u4f8b\uff0c\u5c1d\u8bd5\u91cd\u65b0\u521b\u5efa\u3002</li> <li>\u5982\u679c\u4ecd\u7136\u521b\u5efa\u5931\u8d25\uff0c\u5230 NebulaGraph \u8bba\u575b\u5bfb\u6c42\u5e2e\u52a9\u3002</li> </ol>"},{"location":"reuse/source_install-nebula-graph-by-rpm-or-deb/","title":"Source install nebula graph by rpm or deb","text":"<p>RPM \u548c DEB \u662f Linux \u7cfb\u7edf\u4e0b\u5e38\u89c1\u7684\u4e24\u79cd\u5b89\u88c5\u5305\u683c\u5f0f\uff0c\u672c\u6587\u4ecb\u7ecd\u5982\u4f55\u4f7f\u7528 RPM \u6216 DEB \u6587\u4ef6\u5728\u4e00\u53f0\u673a\u5668\u4e0a\u5feb\u901f\u5b89\u88c5 NebulaGraph \u3002</p> <p>Note</p> <p>\u90e8\u7f72 NebulaGraph \u96c6\u7fa4\u7684\u65b9\u5f0f\u53c2\u89c1\u4f7f\u7528 RPM/DEB \u5305\u90e8\u7f72\u96c6\u7fa4\u3002</p>"},{"location":"reuse/source_install-nebula-graph-by-rpm-or-deb/#_1","title":"\u524d\u63d0\u6761\u4ef6","text":"<ul> <li>\u5b89\u88c5<code>wget</code>\u5de5\u5177\u3002</li> </ul>"},{"location":"reuse/source_install-nebula-graph-by-rpm-or-deb/#_2","title":"\u4e0b\u8f7d\u5b89\u88c5\u5305","text":"<p>Note</p> <ul> <li>\u5f53\u524d\u4ec5\u652f\u6301\u5728 Linux \u7cfb\u7edf\u4e0b\u5b89\u88c5 NebulaGraph\uff0c\u4e14\u4ec5\u652f\u6301 CentOS 7.x\u3001CentOS 8.x\u3001Ubuntu 16.04\u3001Ubuntu 18.04\u3001Ubuntu 20.04 \u64cd\u4f5c\u7cfb\u7edf\u3002</li> </ul> <ul> <li>\u5982\u679c\u7528\u6237\u4f7f\u7528\u7684\u662f\u56fd\u4ea7\u5316\u7684 Linux \u64cd\u4f5c\u7cfb\u7edf\uff0c\u8bf7\u5b89\u88c5\u4f01\u4e1a\u7248 NebulaGraph \u3002  </li> </ul>"},{"location":"reuse/source_install-nebula-graph-by-rpm-or-deb/#oss","title":"\u963f\u91cc\u4e91 OSS \u4e0b\u8f7d","text":"<ul> <li>\u4e0b\u8f7d release \u7248\u672c<p>URL \u683c\u5f0f\u5982\u4e0b\uff1a</p> <pre><code>//Centos 7\nhttps://oss-cdn.nebula-graph.com.cn/package/&lt;release_version&gt;/nebula-graph-&lt;release_version&gt;.el7.x86_64.rpm\n\n//Centos 8\nhttps://oss-cdn.nebula-graph.com.cn/package/&lt;release_version&gt;/nebula-graph-&lt;release_version&gt;.el8.x86_64.rpm\n\n//Ubuntu 1604\nhttps://oss-cdn.nebula-graph.com.cn/package/&lt;release_version&gt;/nebula-graph-&lt;release_version&gt;.ubuntu1604.amd64.deb\n\n//Ubuntu 1804\nhttps://oss-cdn.nebula-graph.com.cn/package/&lt;release_version&gt;/nebula-graph-&lt;release_version&gt;.ubuntu1804.amd64.deb\n\n//Ubuntu 2004\nhttps://oss-cdn.nebula-graph.com.cn/package/&lt;release_version&gt;/nebula-graph-&lt;release_version&gt;.ubuntu2004.amd64.deb\n</code></pre> <p>\u4f8b\u5982\u8981\u4e0b\u8f7d\u9002\u7528\u4e8e<code>Centos 7.5</code>\u7684<code>master</code>\u5b89\u88c5\u5305\uff1a</p> <pre><code>wget https://oss-cdn.nebula-graph.com.cn/package/master/nebula-graph-master.el7.x86_64.rpm\nwget https://oss-cdn.nebula-graph.com.cn/package/master/nebula-graph-master.el7.x86_64.rpm.sha256sum.txt\n</code></pre> <p>\u4e0b\u8f7d\u9002\u7528\u4e8e<code>ubuntu 1804</code>\u7684<code>master</code>\u5b89\u88c5\u5305\uff1a   <pre><code>wget https://oss-cdn.nebula-graph.com.cn/package/master/nebula-graph-master.ubuntu1804.amd64.deb\nwget https://oss-cdn.nebula-graph.com.cn/package/master/nebula-graph-master.ubuntu1804.amd64.deb.sha256sum.txt\n</code></pre></p> </li> </ul> <ul> <li> <p>\u4e0b\u8f7d\u65e5\u5e38\u5f00\u53d1\u7248\u672c (nightly)</p> <p>Danger</p> <ul> <li>nightly \u7248\u672c\u901a\u5e38\u7528\u4e8e\u6d4b\u8bd5\u65b0\u529f\u80fd\u3001\u65b0\u7279\u6027\uff0c\u8bf7\u4e0d\u8981\u5728\u751f\u4ea7\u73af\u5883\u4e2d\u4f7f\u7528 nightly \u7248\u672c\u3002</li> <li>nightly \u7248\u672c\u4e0d\u4fdd\u8bc1\u6bcf\u65e5\u90fd\u80fd\u5b8c\u6574\u53d1\u5e03\uff0c\u4e5f\u4e0d\u4fdd\u8bc1\u662f\u5426\u4f1a\u66f4\u6539\u6587\u4ef6\u540d\u3002</li> </ul> <p>URL \u683c\u5f0f\u5982\u4e0b\uff1a</p> <pre><code>//Centos 7\nhttps://oss-cdn.nebula-graph.com.cn/package/nightly/&lt;yyyy.mm.dd&gt;/nebula-graph-&lt;yyyy.mm.dd&gt;-nightly.el7.x86_64.rpm\n\n//Centos 8\nhttps://oss-cdn.nebula-graph.com.cn/package/nightly/&lt;yyyy.mm.dd&gt;/nebula-graph-&lt;yyyy.mm.dd&gt;-nightly.el8.x86_64.rpm\n\n//Ubuntu 1604\nhttps://oss-cdn.nebula-graph.com.cn/package/nightly/&lt;yyyy.mm.dd&gt;/nebula-graph-&lt;yyyy.mm.dd&gt;-nightly.ubuntu1604.amd64.deb\n\n//Ubuntu 1804\nhttps://oss-cdn.nebula-graph.com.cn/package/nightly/&lt;yyyy.mm.dd&gt;/nebula-graph-&lt;yyyy.mm.dd&gt;-nightly.ubuntu1804.amd64.deb\n\n//Ubuntu 2004\nhttps://oss-cdn.nebula-graph.com.cn/package/nightly/&lt;yyyy.mm.dd&gt;/nebula-graph-&lt;yyyy.mm.dd&gt;-nightly.ubuntu2004.amd64.deb\n</code></pre> <p>\u4f8b\u5982\u8981\u4e0b\u8f7d<code>2021.11.24</code>\u9002\u7528\u4e8e<code>Centos 7.5</code>\u7684<code>2.x</code>\u5b89\u88c5\u5305\uff1a</p> <pre><code>wget https://oss-cdn.nebula-graph.com.cn/package/nightly/2021.11.24/nebula-graph-2021.11.24-nightly.el7.x86_64.rpm\nwget https://oss-cdn.nebula-graph.com.cn/package/nightly/2021.11.24/nebula-graph-2021.11.24-nightly.el7.x86_64.rpm.sha256sum.txt\n</code></pre> <p>\u8981\u4e0b\u8f7d<code>2021.11.24</code>\u9002\u7528\u4e8e<code>Ubuntu 1804</code>\u7684<code>2.x</code>\u5b89\u88c5\u5305\uff1a   <pre><code>wget https://oss-cdn.nebula-graph.com.cn/package/nightly/2021.11.24/nebula-graph-2021.11.24-nightly.ubuntu1804.amd64.deb\nwget https://oss-cdn.nebula-graph.com.cn/package/nightly/2021.11.24/nebula-graph-2021.11.24-nightly.ubuntu1804.amd64.deb.sha256sum.txt\n</code></pre></p> </li> </ul>"},{"location":"reuse/source_install-nebula-graph-by-rpm-or-deb/#nebulagraph","title":"\u5b89\u88c5 NebulaGraph","text":"<ul> <li> <p>\u5b89\u88c5 RPM \u5305</p> <pre><code>$ sudo rpm -ivh --prefix=&lt;installation_path&gt; &lt;package_name&gt;\n</code></pre> <p><code>--prefix</code>\u4e3a\u53ef\u9009\u9879\uff0c\u7528\u4e8e\u6307\u5b9a\u5b89\u88c5\u8def\u5f84\u3002\u5982\u4e0d\u8bbe\u7f6e\uff0c\u7cfb\u7edf\u4f1a\u5c06 NebulaGraph \u5b89\u88c5\u5230\u9ed8\u8ba4\u8def\u5f84<code>/usr/local/nebula/</code>\u3002</p> <p>\u4f8b\u5982\uff0c\u8981\u5728\u9ed8\u8ba4\u8def\u5f84\u4e0b\u5b89\u88c5master\u7248\u672c\u7684 RPM \u5305\uff0c\u8fd0\u884c\u5982\u4e0b\u547d\u4ee4\uff1a</p> <pre><code>sudo rpm -ivh nebula-graph-master.el7.x86_64.rpm\n</code></pre> </li> </ul> <ul> <li> <p>\u5b89\u88c5 DEB \u5305</p> <pre><code>$ sudo dpkg -i &lt;package_name&gt;\n</code></pre> <p>Note</p> <p>\u4f7f\u7528 DEB \u5305\u5b89\u88c5 NebulaGraph \u65f6\u4e0d\u652f\u6301\u81ea\u5b9a\u4e49\u5b89\u88c5\u8def\u5f84\u3002\u9ed8\u8ba4\u5b89\u88c5\u8def\u5f84\u4e3a<code>/usr/local/nebula/</code>\u3002</p> <p>\u4f8b\u5982\u5b89\u88c5master\u7248\u672c\u7684 DEB \u5305\uff1a</p> <pre><code>sudo dpkg -i nebula-graph-master.ubuntu1804.amd64.deb\n</code></pre> </li> </ul>"},{"location":"reuse/source_install-nebula-graph-by-rpm-or-deb/#_3","title":"\u540e\u7eed\u64cd\u4f5c","text":"<ul> <li>\u542f\u52a8 NebulaGraph </li> <li>\u8fde\u63a5 NebulaGraph </li> </ul>"},{"location":"reuse/source_manage-service/","title":"Source manage service","text":"<p>NebulaGraph \u652f\u6301\u901a\u8fc7\u811a\u672c\u7ba1\u7406\u670d\u52a1\u3002</p>"},{"location":"reuse/source_manage-service/#_1","title":"\u4f7f\u7528\u811a\u672c\u7ba1\u7406\u670d\u52a1","text":"<p>\u4f7f\u7528\u811a\u672c<code>nebula.service</code>\u7ba1\u7406\u670d\u52a1\uff0c\u5305\u62ec\u542f\u52a8\u3001\u505c\u6b62\u3001\u91cd\u542f\u3001\u4e2d\u6b62\u548c\u67e5\u770b\u3002</p> <p>Note</p> <p><code>nebula.service</code>\u7684\u9ed8\u8ba4\u8def\u5f84\u662f<code>/usr/local/nebula/scripts</code>\uff0c\u5982\u679c\u4fee\u6539\u8fc7\u5b89\u88c5\u8def\u5f84\uff0c\u8bf7\u4f7f\u7528\u5b9e\u9645\u8def\u5f84\u3002</p>"},{"location":"reuse/source_manage-service/#_2","title":"\u8bed\u6cd5","text":"<pre><code>$ sudo /usr/local/nebula/scripts/nebula.service\n[-v] [-c &lt;config_file_path&gt;]\n&lt;start | stop | restart | kill | status&gt;\n&lt;metad | graphd | storaged | all&gt;\n</code></pre> \u53c2\u6570 \u8bf4\u660e <code>-v</code> \u663e\u793a\u8be6\u7ec6\u8c03\u8bd5\u4fe1\u606f\u3002 <code>-c</code> \u6307\u5b9a\u914d\u7f6e\u6587\u4ef6\u8def\u5f84\uff0c\u9ed8\u8ba4\u8def\u5f84\u4e3a<code>/usr/local/nebula/etc/</code>\u3002 <code>start</code> \u542f\u52a8\u670d\u52a1\u3002 <code>stop</code> \u505c\u6b62\u670d\u52a1\u3002 <code>restart</code> \u91cd\u542f\u670d\u52a1\u3002 <code>kill</code> \u4e2d\u6b62\u670d\u52a1\u3002 <code>status</code> \u67e5\u770b\u670d\u52a1\u72b6\u6001\u3002 <code>metad</code> \u7ba1\u7406 Meta \u670d\u52a1\u3002 <code>graphd</code> \u7ba1\u7406 Graph \u670d\u52a1\u3002 <code>storaged</code> \u7ba1\u7406 Storage \u670d\u52a1\u3002 <code>all</code> \u7ba1\u7406\u6240\u6709\u670d\u52a1\u3002"},{"location":"reuse/source_manage-service/#nebulagraph","title":"\u542f\u52a8 NebulaGraph \u670d\u52a1","text":"<p>\u6267\u884c\u5982\u4e0b\u547d\u4ee4\u542f\u52a8\u670d\u52a1\uff1a</p> <pre><code>$ sudo /usr/local/nebula/scripts/nebula.service start all\n[INFO] Starting nebula-metad...\n[INFO] Done\n[INFO] Starting nebula-graphd...\n[INFO] Done\n[INFO] Starting nebula-storaged...\n[INFO] Done\n</code></pre>"},{"location":"reuse/source_manage-service/#nebulagraph_1","title":"\u505c\u6b62 NebulaGraph \u670d\u52a1","text":"<p>Danger</p> <p>\u8bf7\u52ff\u4f7f\u7528<code>kill -9</code> \u547d\u4ee4\u5f3a\u5236\u7ec8\u6b62\u8fdb\u7a0b\uff0c\u5426\u5219\u53ef\u80fd\u8f83\u5c0f\u6982\u7387\u51fa\u73b0\u6570\u636e\u4e22\u5931\u3002</p> <p>\u6267\u884c\u5982\u4e0b\u547d\u4ee4\u505c\u6b62 NebulaGraph \u670d\u52a1\uff1a</p> <pre><code>$ sudo /usr/local/nebula/scripts/nebula.service stop all\n[INFO] Stopping nebula-metad...\n[INFO] Done\n[INFO] Stopping nebula-graphd...\n[INFO] Done\n[INFO] Stopping nebula-storaged...\n[INFO] Done\n</code></pre>"},{"location":"reuse/source_manage-service/#nebulagraph_2","title":"\u67e5\u770b NebulaGraph \u670d\u52a1","text":"<p>\u6267\u884c\u5982\u4e0b\u547d\u4ee4\u67e5\u770b NebulaGraph \u670d\u52a1\u72b6\u6001\uff1a</p> <pre><code>$ sudo /usr/local/nebula/scripts/nebula.service status all\n</code></pre> <ul> <li> <p>\u5982\u679c\u8fd4\u56de\u5982\u4e0b\u7ed3\u679c\uff0c\u8868\u793a NebulaGraph \u670d\u52a1\u6b63\u5e38\u8fd0\u884c\u3002</p> <pre><code>[INFO] nebula-metad(33fd35e): Running as 29020, Listening on 9559\n[INFO] nebula-graphd(33fd35e): Running as 29095, Listening on 9669\n[WARN] nebula-storaged after v3.0.0 will not start service until it is added to cluster.\n[WARN] See Manage Storage hosts:ADD HOSTS in https://docs.nebula-graph.io/\n[INFO] nebula-storaged(33fd35e): Running as 29147, Listening on 9779\n</code></pre> <p>Note</p> <p>\u6b63\u5e38\u542f\u52a8 NebulaGraph \u540e\uff0c<code>nebula-storaged</code>\u8fdb\u7a0b\u7684\u7aef\u53e3\u663e\u793a\u7ea2\u8272\u3002\u8fd9\u662f\u56e0\u4e3a<code>nebula-storaged</code>\u5728\u542f\u52a8\u6d41\u7a0b\u4e2d\u4f1a\u7b49\u5f85<code>nebula-metad</code>\u6dfb\u52a0\u5f53\u524d Storage \u670d\u52a1\uff0c\u5f53\u524d Storage \u670d\u52a1\u6536\u5230 Ready \u4fe1\u53f7\u540e\u624d\u4f1a\u6b63\u5f0f\u542f\u52a8\u670d\u52a1\u3002\u4ece 3.0.0 \u7248\u672c\u5f00\u59cb\uff0c\u5728\u914d\u7f6e\u6587\u4ef6\u4e2d\u6dfb\u52a0\u7684 Storage \u8282\u70b9\u65e0\u6cd5\u76f4\u63a5\u8bfb\u5199\uff0c\u914d\u7f6e\u6587\u4ef6\u7684\u4f5c\u7528\u4ec5\u4ec5\u662f\u5c06 Storage \u8282\u70b9\u6ce8\u518c\u81f3 Meta \u670d\u52a1\u4e2d\u3002\u5fc5\u987b\u4f7f\u7528<code>ADD HOSTS</code>\u547d\u4ee4\u540e\uff0c\u624d\u80fd\u6b63\u5e38\u8bfb\u5199 Storage \u8282\u70b9\u3002\u66f4\u591a\u4fe1\u606f\uff0c\u53c2\u89c1\u7ba1\u7406 Storage \u4e3b\u673a\u3002</p> </li> </ul> <ul> <li>\u5982\u679c\u8fd4\u56de\u7c7b\u4f3c\u5982\u4e0b\u7ed3\u679c\uff0c\u8868\u793a NebulaGraph \u670d\u52a1\u5f02\u5e38\uff0c\u53ef\u4ee5\u6839\u636e\u5f02\u5e38\u670d\u52a1\u4fe1\u606f\u8fdb\u4e00\u6b65\u6392\u67e5\uff0c\u6216\u8005\u5728 NebulaGraph \u793e\u533a\u5bfb\u6c42\u5e2e\u52a9\u3002<pre><code>[INFO] nebula-metad: Running as 25600, Listening on 9559\n[INFO] nebula-graphd: Exited\n[INFO] nebula-storaged: Running as 25646, Listening on 9779\n</code></pre> </li> </ul> <p>NebulaGraph \u670d\u52a1\u7531 Meta \u670d\u52a1\u3001Graph \u670d\u52a1\u548c Storage \u670d\u52a1\u5171\u540c\u63d0\u4f9b\uff0c\u8fd9\u4e09\u79cd\u670d\u52a1\u7684\u914d\u7f6e\u6587\u4ef6\u90fd\u4fdd\u5b58\u5728\u5b89\u88c5\u76ee\u5f55\u7684<code>etc</code>\u76ee\u5f55\u5185\uff0c\u9ed8\u8ba4\u8def\u5f84\u4e3a<code>/usr/local/nebula/etc/</code>\uff0c\u7528\u6237\u53ef\u4ee5\u68c0\u67e5\u76f8\u5e94\u7684\u914d\u7f6e\u6587\u4ef6\u6392\u67e5\u95ee\u9898\u3002</p>"},{"location":"reuse/source_manage-service/#_3","title":"\u4e0b\u4e00\u6b65","text":"<ul> <li>\u8fde\u63a5 NebulaGraph </li> </ul>"},{"location":"reuse/source_ngql_for_quick_start/","title":"Source ngql for quick start","text":""},{"location":"reuse/source_ngql_for_quick_start/#_1","title":"\u4f7f\u7528\u8bf4\u660e","text":""},{"location":"reuse/source_ngql_for_quick_start/#schema","title":"\u56fe\u7a7a\u95f4\u548c Schema","text":"<p>\u4e00\u4e2a NebulaGraph \u5b9e\u4f8b\u7531\u4e00\u4e2a\u6216\u591a\u4e2a\u56fe\u7a7a\u95f4\u7ec4\u6210\u3002\u6bcf\u4e2a\u56fe\u7a7a\u95f4\u90fd\u662f\u7269\u7406\u9694\u79bb\u7684\uff0c\u7528\u6237\u53ef\u4ee5\u5728\u540c\u4e00\u4e2a\u5b9e\u4f8b\u4e2d\u4f7f\u7528\u4e0d\u540c\u7684\u56fe\u7a7a\u95f4\u5b58\u50a8\u4e0d\u540c\u7684\u6570\u636e\u96c6\u3002</p> <p></p> <p>\u4e3a\u4e86\u5728\u56fe\u7a7a\u95f4\u4e2d\u63d2\u5165\u6570\u636e\uff0c\u9700\u8981\u4e3a\u56fe\u6570\u636e\u5e93\u5b9a\u4e49\u4e00\u4e2a Schema\u3002 NebulaGraph \u7684 Schema \u662f\u7531\u5982\u4e0b\u51e0\u90e8\u5206\u7ec4\u6210\u3002</p> \u7ec4\u6210\u90e8\u5206 \u8bf4\u660e \u70b9\uff08Vertex\uff09 \u8868\u793a\u73b0\u5b9e\u4e16\u754c\u4e2d\u7684\u5b9e\u4f53\u3002\u4e00\u4e2a\u70b9\u53ef\u4ee5\u6709 0 \u5230\u591a\u4e2a\u6807\u7b7e\u3002 \u6807\u7b7e\uff08Tag\uff09 \u70b9\u7684\u7c7b\u578b\uff0c\u5b9a\u4e49\u4e86\u4e00\u7ec4\u63cf\u8ff0\u70b9\u7c7b\u578b\u7684\u5c5e\u6027\u3002 \u8fb9\uff08Edge\uff09 \u8868\u793a\u4e24\u4e2a\u70b9\u4e4b\u95f4\u6709\u65b9\u5411\u7684\u5173\u7cfb\u3002 \u8fb9\u7c7b\u578b\uff08Edge type\uff09 \u8fb9\u7684\u7c7b\u578b\uff0c\u5b9a\u4e49\u4e86\u4e00\u7ec4\u63cf\u8ff0\u8fb9\u7684\u7c7b\u578b\u7684\u5c5e\u6027\u3002 <p>\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u89c1\u6570\u636e\u7ed3\u6784\u3002</p> <p>\u672c\u6587\u5c06\u4f7f\u7528\u4e0b\u56fe\u7684\u6570\u636e\u96c6\u6f14\u793a\u57fa\u7840\u64cd\u4f5c\u7684\u8bed\u6cd5\u3002</p> <p></p>"},{"location":"reuse/source_ngql_for_quick_start/#_2","title":"\u5f02\u6b65\u5b9e\u73b0\u521b\u5efa\u548c\u4fee\u6539","text":"<p>Caution</p> <p>\u5728 NebulaGraph \u4e2d\uff0c\u4e0b\u5217\u521b\u5efa\u548c\u4fee\u6539\u64cd\u4f5c\u662f\u5f02\u6b65\u5b9e\u73b0\u7684\u3002\u8981\u5728\u4e0b\u4e00\u4e2a\u5fc3\u8df3\u5468\u671f\u4e4b\u540e\u624d\u80fd\u751f\u6548\uff0c\u5426\u5219\u8bbf\u95ee\u4f1a\u62a5\u9519\u3002\u4e3a\u786e\u4fdd\u6570\u636e\u540c\u6b65\uff0c\u540e\u7eed\u64cd\u4f5c\u80fd\u987a\u5229\u8fdb\u884c\uff0c\u8bf7\u7b49\u5f85 2 \u4e2a\u5fc3\u8df3\u5468\u671f\uff0820 \u79d2\uff09\u3002</p> <ul> <li><code>CREATE SPACE</code></li> <li><code>CREATE TAG</code></li> <li><code>CREATE EDGE</code></li> <li><code>ALTER TAG</code></li> <li><code>ALTER EDGE</code></li> <li><code>CREATE TAG INDEX</code></li> <li><code>CREATE EDGE INDEX</code></li> </ul> <p>Note</p> <p>\u9ed8\u8ba4\u5fc3\u8df3\u5468\u671f\u662f 10 \u79d2\u3002\u4fee\u6539\u5fc3\u8df3\u5468\u671f\u53c2\u6570<code>heartbeat_interval_secs</code>\uff0c\u8bf7\u53c2\u89c1\u914d\u7f6e\u7b80\u4ecb\u3002</p>"},{"location":"reuse/source_ngql_for_quick_start/#_3","title":"\u7b2c\u4e00\u6b65\uff1a\u521b\u5efa\u548c\u9009\u62e9\u56fe\u7a7a\u95f4","text":""},{"location":"reuse/source_ngql_for_quick_start/#ngql","title":"nGQL \u8bed\u6cd5","text":"<ul> <li>\u521b\u5efa\u56fe\u7a7a\u95f4<pre><code>CREATE SPACE [IF NOT EXISTS] &lt;graph_space_name&gt; (\n[partition_num = &lt;partition_number&gt;,]\n[replica_factor = &lt;replica_number&gt;,]\nvid_type = {FIXED_STRING(&lt;N&gt;) | INT64}\n)\n\n[COMMENT = '&lt;comment&gt;'];\n</code></pre> <p>\u53c2\u6570\u8be6\u60c5\u8bf7\u53c2\u89c1 CREATE SPACE\u3002</p> </li> </ul> <ul> <li>\u5217\u51fa\u521b\u5efa\u6210\u529f\u7684\u56fe\u7a7a\u95f4<pre><code>nebula&gt; SHOW SPACES;\n</code></pre> </li> </ul> <ul> <li>\u9009\u62e9\u5df2\u521b\u5efa\u7684\u56fe\u7a7a\u95f4<pre><code>USE &lt;graph_space_name&gt;;\n</code></pre> </li> </ul>"},{"location":"reuse/source_ngql_for_quick_start/#_4","title":"\u793a\u4f8b","text":"<ol> <li> <p>\u6267\u884c\u5982\u4e0b\u8bed\u53e5\u521b\u5efa\u540d\u4e3a<code>basketballplayer</code>\u7684\u56fe\u7a7a\u95f4\u3002</p> <pre><code>nebula&gt; CREATE SPACE basketballplayer(partition_num=15, replica_factor=1, vid_type=fixed_string(30));\n</code></pre> <p>Note</p> <p>\u5982\u679c\u62a5\u9519\u63d0\u793a<code>[ERROR (-1005)]: Host not enough!</code>\uff0c\u8bf7\u68c0\u67e5\u662f\u5426\u5df2\u6dfb\u52a0 Storage \u4e3b\u673a\u3002</p> </li> <li> <p>\u6267\u884c\u547d\u4ee4<code>SHOW HOSTS</code>\u68c0\u67e5\u5206\u7247\u7684\u5206\u5e03\u60c5\u51b5\uff0c\u786e\u4fdd\u5e73\u8861\u5206\u5e03\u3002</p> <pre><code>nebula&gt; SHOW HOSTS;\n+-------------+-----------+-----------+--------------+----------------------------------+------------------------+---------+\n| Host        | Port      | Status    | Leader count | Leader distribution              | Partition distribution | Version |\n+-------------+-----------+-----------+--------------+----------------------------------+------------------------+---------+\n| \"storaged0\" | 9779      | \"ONLINE\"  | 5            | \"basketballplayer:5\"             | \"basketballplayer:5\"   | \"master\" |\n| \"storaged1\" | 9779      | \"ONLINE\"  | 5            | \"basketballplayer:5\"             | \"basketballplayer:5\"   | \"master\" |\n| \"storaged2\" | 9779      | \"ONLINE\"  | 5            | \"basketballplayer:5\"             | \"basketballplayer:5\"   | \"master\" |\n+-------------+-----------+-----------+--------------+----------------------------------+------------------------+---------+\n</code></pre> <p>\u5982\u679c Leader distribution \u5206\u5e03\u4e0d\u5747\u5300\uff0c\u8bf7\u6267\u884c\u547d\u4ee4<code>BALANCE LEADER</code>\u91cd\u65b0\u5206\u914d\u3002\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u89c1 Storage \u8d1f\u8f7d\u5747\u8861\u3002</p> </li> <li> <p>\u9009\u62e9\u56fe\u7a7a\u95f4<code>basketballplayer</code>\u3002</p> <pre><code>nebula[(none)]&gt; USE basketballplayer;\n</code></pre> <p>\u7528\u6237\u53ef\u4ee5\u6267\u884c\u547d\u4ee4<code>SHOW SPACES</code>\u67e5\u770b\u521b\u5efa\u7684\u56fe\u7a7a\u95f4\u3002</p> <pre><code>nebula&gt; SHOW SPACES;\n+--------------------+\n| Name               |\n+--------------------+\n| \"basketballplayer\" |\n+--------------------+\n</code></pre> </li> </ol>"},{"location":"reuse/source_ngql_for_quick_start/#tag_edge_type","title":"\u7b2c\u4e8c\u6b65\uff1a\u521b\u5efa Tag \u548c Edge type","text":""},{"location":"reuse/source_ngql_for_quick_start/#ngql_1","title":"nGQL \u8bed\u6cd5","text":"<pre><code>CREATE {TAG | EDGE} [IF NOT EXISTS] {&lt;tag_name&gt; | &lt;edge_type_name&gt;}\n    (\n      &lt;prop_name&gt; &lt;data_type&gt; [NULL | NOT NULL] [DEFAULT &lt;default_value&gt;] [COMMENT '&lt;comment&gt;']\n      [{, &lt;prop_name&gt; &lt;data_type&gt; [NULL | NOT NULL] [DEFAULT &lt;default_value&gt;] [COMMENT '&lt;comment&gt;']} ...] \n    )\n    [TTL_DURATION = &lt;ttl_duration&gt;]\n    [TTL_COL = &lt;prop_name&gt;]\n    [COMMENT = '&lt;comment&gt;'];\n</code></pre> <p>\u53c2\u6570\u8be6\u60c5\u8bf7\u53c2\u89c1 CREATE TAG \u548c CREATE EDGE\u3002</p>"},{"location":"reuse/source_ngql_for_quick_start/#_5","title":"\u793a\u4f8b","text":"<p>\u521b\u5efa Tag:<code>player</code>\u548c<code>team</code>\uff0c\u4ee5\u53ca Edge type:<code>follow</code>\u548c<code>serve</code>\u3002\u8bf4\u660e\u5982\u4e0b\u8868\u3002</p> \u540d\u79f0 \u7c7b\u578b \u5c5e\u6027 player Tag name (string), age (int) team Tag name (string) follow Edge type degree (int) serve Edge type start_year (int), end_year (int) <pre><code>nebula&gt; CREATE TAG player(name string, age int);\n\nnebula&gt; CREATE TAG team(name string);\n\nnebula&gt; CREATE EDGE follow(degree int);\n\nnebula&gt; CREATE EDGE serve(start_year int, end_year int);\n</code></pre>"},{"location":"reuse/source_ngql_for_quick_start/#_6","title":"\u7b2c\u4e09\u6b65\uff1a\u63d2\u5165\u6570\u636e","text":"<p>\u7528\u6237\u53ef\u4ee5\u4f7f\u7528<code>INSERT</code>\u8bed\u53e5\uff0c\u57fa\u4e8e\u73b0\u6709\u7684 Tag \u63d2\u5165\u70b9\uff0c\u6216\u8005\u57fa\u4e8e\u73b0\u6709\u7684 Edge type \u63d2\u5165\u8fb9\u3002</p>"},{"location":"reuse/source_ngql_for_quick_start/#ngql_2","title":"nGQL \u8bed\u6cd5","text":"<ul> <li>\u63d2\u5165\u70b9<pre><code>INSERT VERTEX [IF NOT EXISTS] [tag_props, [tag_props] ...]\nVALUES &lt;vid&gt;: ([prop_value_list])\n\ntag_props:\n  tag_name ([prop_name_list])\n\nprop_name_list:\n   [prop_name [, prop_name] ...]\n\nprop_value_list:\n   [prop_value [, prop_value] ...]  \n</code></pre> <p><code>vid</code>\u662f Vertex ID \u7684\u7f29\u5199\uff0c<code>vid</code>\u5728\u4e00\u4e2a\u56fe\u7a7a\u95f4\u4e2d\u662f\u552f\u4e00\u7684\u3002\u53c2\u6570\u8be6\u60c5\u8bf7\u53c2\u89c1 INSERT VERTEX\u3002</p> </li> </ul> <ul> <li>\u63d2\u5165\u8fb9<pre><code>INSERT EDGE [IF NOT EXISTS] &lt;edge_type&gt; ( &lt;prop_name_list&gt; ) VALUES \n&lt;src_vid&gt; -&gt; &lt;dst_vid&gt;[@&lt;rank&gt;] : ( &lt;prop_value_list&gt; )\n[, &lt;src_vid&gt; -&gt; &lt;dst_vid&gt;[@&lt;rank&gt;] : ( &lt;prop_value_list&gt; ), ...];\n\n&lt;prop_name_list&gt; ::=\n[ &lt;prop_name&gt; [, &lt;prop_name&gt; ] ...]\n\n&lt;prop_value_list&gt; ::=\n[ &lt;prop_value&gt; [, &lt;prop_value&gt; ] ...]\n</code></pre> <p>\u53c2\u6570\u8be6\u60c5\u8bf7\u53c2\u89c1 INSERT EDGE\u3002</p> </li> </ul>"},{"location":"reuse/source_ngql_for_quick_start/#_7","title":"\u793a\u4f8b","text":"<ul> <li>\u63d2\u5165\u4ee3\u8868\u7403\u5458\u548c\u7403\u961f\u7684\u70b9\u3002<pre><code>nebula&gt; INSERT VERTEX player(name, age) VALUES \"player100\":(\"Tim Duncan\", 42);\n\nnebula&gt; INSERT VERTEX player(name, age) VALUES \"player101\":(\"Tony Parker\", 36);\n\nnebula&gt; INSERT VERTEX player(name, age) VALUES \"player102\":(\"LaMarcus Aldridge\", 33);\n\nnebula&gt; INSERT VERTEX team(name) VALUES \"team203\":(\"Trail Blazers\"), \"team204\":(\"Spurs\");\n</code></pre> </li> </ul> <ul> <li>\u63d2\u5165\u4ee3\u8868\u7403\u5458\u548c\u7403\u961f\u4e4b\u95f4\u5173\u7cfb\u7684\u8fb9\u3002<pre><code>nebula&gt; INSERT EDGE follow(degree) VALUES \"player101\" -&gt; \"player100\":(95);\n\nnebula&gt; INSERT EDGE follow(degree) VALUES \"player101\" -&gt; \"player102\":(90);\n\nnebula&gt; INSERT EDGE follow(degree) VALUES \"player102\" -&gt; \"player100\":(75);\n\nnebula&gt; INSERT EDGE serve(start_year, end_year) VALUES \"player101\" -&gt; \"team204\":(1999, 2018),\"player102\" -&gt; \"team203\":(2006,  2015);\n</code></pre> </li> </ul>"},{"location":"reuse/source_ngql_for_quick_start/#_8","title":"\u7b2c\u56db\u6b65\uff1a\u67e5\u8be2\u6570\u636e","text":"<ul> <li>GO \u8bed\u53e5\u53ef\u4ee5\u6839\u636e\u6307\u5b9a\u7684\u6761\u4ef6\u904d\u5386\u6570\u636e\u5e93\u3002<code>GO</code>\u8bed\u53e5\u4ece\u4e00\u4e2a\u6216\u591a\u4e2a\u70b9\u5f00\u59cb\uff0c\u6cbf\u7740\u4e00\u6761\u6216\u591a\u6761\u8fb9\u904d\u5386\uff0c\u8fd4\u56de<code>YIELD</code>\u5b50\u53e5\u4e2d\u6307\u5b9a\u7684\u4fe1\u606f\u3002</li> </ul> <ul> <li>FETCH \u8bed\u53e5\u53ef\u4ee5\u83b7\u5f97\u70b9\u6216\u8fb9\u7684\u5c5e\u6027\u3002</li> </ul> <ul> <li>LOOKUP \u8bed\u53e5\u662f\u57fa\u4e8e\u7d22\u5f15\u7684\uff0c\u548c<code>WHERE</code>\u5b50\u53e5\u4e00\u8d77\u4f7f\u7528\uff0c\u67e5\u627e\u7b26\u5408\u7279\u5b9a\u6761\u4ef6\u7684\u6570\u636e\u3002</li> </ul> <ul> <li>MATCH \u8bed\u53e5\u662f\u67e5\u8be2\u56fe\u6570\u636e\u6700\u5e38\u7528\u7684\uff0c\u53ef\u4ee5\u7075\u6d3b\u7684\u63cf\u8ff0\u5404\u79cd\u56fe\u6a21\u5f0f\uff0c\u4f46\u662f\u5b83\u4f9d\u8d56\u7d22\u5f15\u53bb\u5339\u914d NebulaGraph \u4e2d\u7684\u6570\u636e\u6a21\u578b\uff0c\u6027\u80fd\u4e5f\u8fd8\u9700\u8981\u8c03\u4f18\u3002</li> </ul>"},{"location":"reuse/source_ngql_for_quick_start/#ngql_3","title":"nGQL \u8bed\u6cd5","text":"<ul> <li><code>GO</code><pre><code>GO [[&lt;M&gt; TO] &lt;N&gt; {STEP|STEPS}] FROM &lt;vertex_list&gt;\nOVER &lt;edge_type_list&gt; [{REVERSELY | BIDIRECT}]\n[ WHERE &lt;conditions&gt; ]\nYIELD [DISTINCT] &lt;return_list&gt;\n[{ SAMPLE &lt;sample_list&gt; | &lt;limit_by_list_clause&gt; }]\n[| GROUP BY {&lt;col_name&gt; | expression&gt; | &lt;position&gt;} YIELD &lt;col_name&gt;]\n[| ORDER BY &lt;expression&gt; [{ASC | DESC}]]\n[| LIMIT [&lt;offset&gt;,] &lt;number_rows&gt;];\n</code></pre> </li> </ul> <ul> <li> <p><code>FETCH</code></p> <ul> <li> <p>\u67e5\u8be2 Tag \u5c5e\u6027</p> <pre><code>FETCH PROP ON {&lt;tag_name&gt;[, tag_name ...] | *}\n&lt;vid&gt; [, vid ...]\nYIELD &lt;return_list&gt; [AS &lt;alias&gt;];\n</code></pre> </li> </ul> <ul> <li> <p>\u67e5\u8be2\u8fb9\u5c5e\u6027</p> <pre><code>FETCH PROP ON &lt;edge_type&gt; &lt;src_vid&gt; -&gt; &lt;dst_vid&gt;[@&lt;rank&gt;] [, &lt;src_vid&gt; -&gt; &lt;dst_vid&gt; ...]\nYIELD &lt;output&gt;;\n</code></pre> </li> </ul> </li> </ul> <ul> <li><code>LOOKUP</code><pre><code>LOOKUP ON {&lt;vertex_tag&gt; | &lt;edge_type&gt;}\n[WHERE &lt;expression&gt; [AND &lt;expression&gt; ...]]\nYIELD &lt;return_list&gt; [AS &lt;alias&gt;];\n\n&lt;return_list&gt;\n    &lt;prop_name&gt; [AS &lt;col_alias&gt;] [, &lt;prop_name&gt; [AS &lt;prop_alias&gt;] ...];\n</code></pre> </li> </ul> <ul> <li><code>MATCH</code><pre><code>MATCH &lt;pattern&gt; [&lt;clause_1&gt;]  RETURN &lt;output&gt;  [&lt;clause_2&gt;];\n</code></pre> </li> </ul>"},{"location":"reuse/source_ngql_for_quick_start/#go","title":"<code>GO</code>\u8bed\u53e5\u793a\u4f8b","text":"<ul> <li>\u4ece VID \u4e3a<code>player101</code>\u7684\u7403\u5458\u5f00\u59cb\uff0c\u6cbf\u7740\u8fb9<code>follow</code>\u627e\u5230\u8fde\u63a5\u7684\u7403\u5458\u3002<pre><code>nebula&gt; GO FROM \"player101\" OVER follow YIELD id($$);\n+-------------+\n| id($$)      |\n+-------------+\n| \"player100\" |\n| \"player102\" |\n+-------------+\n</code></pre> </li> </ul> <ul> <li>\u4ece VID \u4e3a<code>player101</code>\u7684\u7403\u5458\u5f00\u59cb\uff0c\u6cbf\u7740\u8fb9<code>follow</code>\u67e5\u627e\u5e74\u9f84\u5927\u4e8e\u6216\u7b49\u4e8e 35 \u5c81\u7684\u7403\u5458\uff0c\u5e76\u8fd4\u56de\u4ed6\u4eec\u7684\u59d3\u540d\u548c\u5e74\u9f84\uff0c\u540c\u65f6\u91cd\u547d\u540d\u5bf9\u5e94\u7684\u5217\u3002<pre><code>nebula&gt; GO FROM \"player101\" OVER follow WHERE properties($$).age &gt;= 35 \\\n        YIELD properties($$).name AS Teammate, properties($$).age AS Age;\n+-----------------+-----+\n| Teammate        | Age |\n+-----------------+-----+\n| \"Tim Duncan\"    | 42  |\n+-----------------+-----+\n</code></pre> \u5b50\u53e5/\u7b26\u53f7 \u8bf4\u660e <code>YIELD</code> \u6307\u5b9a\u8be5\u67e5\u8be2\u9700\u8981\u8fd4\u56de\u7684\u503c\u6216\u7ed3\u679c\u3002 <code>$$</code> \u8868\u793a\u8fb9\u7684\u7ec8\u70b9\u3002 <code>\\</code> \u8868\u793a\u6362\u884c\u7ee7\u7eed\u8f93\u5165\u3002 </li> </ul> <ul> <li> <p>\u4ece VID \u4e3a<code>player101</code>\u7684\u7403\u5458\u5f00\u59cb\uff0c\u6cbf\u7740\u8fb9<code>follow</code>\u67e5\u627e\u8fde\u63a5\u7684\u7403\u5458\uff0c\u7136\u540e\u68c0\u7d22\u8fd9\u4e9b\u7403\u5458\u7684\u7403\u961f\u3002\u4e3a\u4e86\u5408\u5e76\u8fd9\u4e24\u4e2a\u67e5\u8be2\u8bf7\u6c42\uff0c\u53ef\u4ee5\u4f7f\u7528\u7ba1\u9053\u7b26\u6216\u4e34\u65f6\u53d8\u91cf\u3002</p> <ul> <li> <p>\u4f7f\u7528\u7ba1\u9053\u7b26</p> <pre><code>nebula&gt; GO FROM \"player101\" OVER follow YIELD dst(edge) AS id | \\\n        GO FROM $-.id OVER serve YIELD properties($$).name AS Team, \\\n        properties($^).name AS Player;\n+-----------------+---------------------+\n| Team            | Player              |\n+-----------------+---------------------+\n| \"Trail Blazers\" | \"LaMarcus Aldridge\" |\n+-----------------+---------------------+\n</code></pre> \u5b50\u53e5/\u7b26\u53f7 \u8bf4\u660e <code>$^</code> \u8868\u793a\u8fb9\u7684\u8d77\u70b9\u3002 <code>|</code> \u7ec4\u5408\u591a\u4e2a\u67e5\u8be2\u7684\u7ba1\u9053\u7b26\uff0c\u5c06\u524d\u4e00\u4e2a\u67e5\u8be2\u7684\u7ed3\u679c\u96c6\u7528\u4e8e\u540e\u4e00\u4e2a\u67e5\u8be2\u3002 <code>$-</code> \u8868\u793a\u7ba1\u9053\u7b26\u524d\u9762\u7684\u67e5\u8be2\u8f93\u51fa\u7684\u7ed3\u679c\u96c6\u3002 </li> </ul> <ul> <li> <p>\u4f7f\u7528\u4e34\u65f6\u53d8\u91cf</p> <p>Note</p> <p>\u5f53\u590d\u5408\u8bed\u53e5\u4f5c\u4e3a\u4e00\u4e2a\u6574\u4f53\u63d0\u4ea4\u7ed9\u670d\u52a1\u5668\u65f6\uff0c\u5176\u4e2d\u7684\u4e34\u65f6\u53d8\u91cf\u4f1a\u5728\u8bed\u53e5\u7ed3\u675f\u65f6\u88ab\u91ca\u653e\u3002</p> <pre><code>nebula&gt; $var = GO FROM \"player101\" OVER follow YIELD dst(edge) AS id; \\\n        GO FROM $var.id OVER serve YIELD properties($$).name AS Team, \\\n        properties($^).name AS Player;\n+-----------------+---------------------+\n| Team            | Player              |\n+-----------------+---------------------+\n| \"Trail Blazers\" | \"LaMarcus Aldridge\" |\n+-----------------+---------------------+\n</code></pre> </li> </ul> </li> </ul>"},{"location":"reuse/source_ngql_for_quick_start/#fetch","title":"<code>FETCH</code>\u8bed\u53e5\u793a\u4f8b","text":"<p>\u67e5\u8be2 VID \u4e3a<code>player100</code>\u7684\u7403\u5458\u7684\u5c5e\u6027\u3002</p> <pre><code>nebula&gt; FETCH PROP ON player \"player100\" YIELD properties(vertex);\n+-------------------------------+\n| properties(VERTEX)            |\n+-------------------------------+\n| {age: 42, name: \"Tim Duncan\"} |\n+-------------------------------+\n</code></pre> <p>Note</p> <p><code>LOOKUP</code>\u548c<code>MATCH</code>\u7684\u793a\u4f8b\u5728\u4e0b\u6587\u7684\u7d22\u5f15 \u90e8\u5206\u67e5\u770b\u3002</p>"},{"location":"reuse/source_ngql_for_quick_start/#_9","title":"\u5176\u4ed6\u64cd\u4f5c","text":""},{"location":"reuse/source_ngql_for_quick_start/#_10","title":"\u4fee\u6539\u70b9\u548c\u8fb9","text":"<p>\u7528\u6237\u53ef\u4ee5\u4f7f\u7528<code>UPDATE</code>\u8bed\u53e5\u6216<code>UPSERT</code>\u8bed\u53e5\u4fee\u6539\u73b0\u6709\u6570\u636e\u3002</p> <p><code>UPSERT</code>\u662f<code>UPDATE</code>\u548c<code>INSERT</code>\u7684\u7ed3\u5408\u4f53\u3002\u5f53\u4f7f\u7528<code>UPSERT</code>\u66f4\u65b0\u4e00\u4e2a\u70b9\u6216\u8fb9\uff0c\u5982\u679c\u5b83\u4e0d\u5b58\u5728\uff0c\u6570\u636e\u5e93\u4f1a\u81ea\u52a8\u63d2\u5165\u4e00\u4e2a\u65b0\u7684\u70b9\u6216\u8fb9\u3002</p> <p>Note</p> <p>\u6bcf\u4e2a partition \u5185\u90e8\uff0c<code>UPSERT</code> \u64cd\u4f5c\u662f\u4e00\u4e2a\u4e32\u884c\u64cd\u4f5c\uff0c\u6240\u4ee5\u6267\u884c\u901f\u5ea6\u6bd4\u6267\u884c <code>INSERT</code> \u6216 <code>UPDATE</code> \u6162\u5f88\u591a\u3002\u5176\u4ec5\u5728\u591a\u4e2a partition \u4e4b\u95f4\u6709\u5e76\u53d1\u3002</p>"},{"location":"reuse/source_ngql_for_quick_start/#ngql_4","title":"nGQL \u8bed\u6cd5","text":"<ul> <li><code>UPDATE</code>\u70b9<pre><code>UPDATE VERTEX &lt;vid&gt; SET &lt;properties to be updated&gt;\n[WHEN &lt;condition&gt;] [YIELD &lt;columns&gt;];\n</code></pre> </li> </ul> <ul> <li><code>UPDATE</code>\u8fb9<pre><code>UPDATE EDGE ON &lt;edge_type&gt; &lt;source vid&gt; -&gt; &lt;destination vid&gt; [@rank] \nSET &lt;properties to be updated&gt; [WHEN &lt;condition&gt;] [YIELD &lt;columns to be output&gt;];\n</code></pre> </li> </ul> <ul> <li><code>UPSERT</code>\u70b9\u6216\u8fb9<pre><code>UPSERT {VERTEX &lt;vid&gt; | EDGE &lt;edge_type&gt;} SET &lt;update_columns&gt;\n[WHEN &lt;condition&gt;] [YIELD &lt;columns&gt;];\n</code></pre> </li> </ul>"},{"location":"reuse/source_ngql_for_quick_start/#_11","title":"\u793a\u4f8b","text":"<ul> <li>\u7528<code>UPDATE</code>\u4fee\u6539 VID \u4e3a<code>player100</code>\u7684\u7403\u5458\u7684<code>name</code>\u5c5e\u6027\uff0c\u7136\u540e\u7528<code>FETCH</code>\u8bed\u53e5\u68c0\u67e5\u7ed3\u679c\u3002<pre><code>nebula&gt; UPDATE VERTEX \"player100\" SET player.name = \"Tim\";\n\nnebula&gt; FETCH PROP ON player \"player100\" YIELD properties(vertex);\n+------------------------+\n| properties(VERTEX)     |\n+------------------------+\n| {age: 42, name: \"Tim\"} |\n+------------------------+\n</code></pre> </li> </ul> <ul> <li>\u7528<code>UPDATE</code>\u4fee\u6539\u67d0\u6761\u8fb9\u7684<code>degree</code>\u5c5e\u6027\uff0c\u7136\u540e\u7528<code>FETCH</code>\u68c0\u67e5\u7ed3\u679c\u3002<pre><code>nebula&gt; UPDATE EDGE ON follow \"player101\" -&gt; \"player100\" SET degree = 96;\n\nnebula&gt; FETCH PROP ON follow \"player101\" -&gt; \"player100\" YIELD properties(edge);\n+------------------+\n| properties(EDGE) |\n+------------------+\n| {degree: 96}     |\n+------------------+\n</code></pre> </li> </ul> <ul> <li>\u7528<code>INSERT</code>\u63d2\u5165\u4e00\u4e2a VID \u4e3a<code>player111</code>\u7684\u70b9\uff0c\u7136\u540e\u7528<code>UPSERT</code>\u66f4\u65b0\u5b83\u3002<pre><code>nebula&gt; INSERT VERTEX player(name,age) VALUES \"player111\":(\"David West\", 38);\n\nnebula&gt; UPSERT VERTEX \"player111\" SET player.name = \"David\", player.age = $^.player.age + 11 \\\n        WHEN $^.player.name == \"David West\" AND $^.player.age &gt; 20 \\\n        YIELD $^.player.name AS Name, $^.player.age AS Age;\n+---------+-----+\n| Name    | Age |\n+---------+-----+\n| \"David\" | 49  |\n+---------+-----+\n</code></pre> </li> </ul>"},{"location":"reuse/source_ngql_for_quick_start/#_12","title":"\u5220\u9664\u70b9\u548c\u8fb9","text":""},{"location":"reuse/source_ngql_for_quick_start/#ngql_5","title":"nGQL \u8bed\u6cd5","text":"<ul> <li>\u5220\u9664\u70b9<pre><code>DELETE VERTEX &lt;vid1&gt;[, &lt;vid2&gt;...]\n</code></pre> </li> </ul> <ul> <li>\u5220\u9664\u8fb9<pre><code>DELETE EDGE &lt;edge_type&gt; &lt;src_vid&gt; -&gt; &lt;dst_vid&gt;[@&lt;rank&gt;]\n[, &lt;src_vid&gt; -&gt; &lt;dst_vid&gt;...]\n</code></pre> </li> </ul>"},{"location":"reuse/source_ngql_for_quick_start/#_13","title":"\u793a\u4f8b","text":"<ul> <li>\u5220\u9664\u70b9<pre><code>nebula&gt; DELETE VERTEX \"player111\", \"team203\";\n</code></pre> </li> </ul> <ul> <li>\u5220\u9664\u8fb9<pre><code>nebula&gt; DELETE EDGE follow \"player101\" -&gt; \"team204\";\n</code></pre> </li> </ul>"},{"location":"reuse/source_ngql_for_quick_start/#_14","title":"\u4f7f\u7528\u7d22\u5f15","text":"<p>\u7528\u6237\u53ef\u4ee5\u901a\u8fc7 CREATE INDEX \u8bed\u53e5\u4e3a Tag \u548c Edge type \u589e\u52a0\u7d22\u5f15\u3002</p> <p>Caution</p> <p><code>MATCH</code>\u548c<code>LOOKUP</code>\u8bed\u53e5\u7684\u6267\u884c\u90fd\u4f9d\u8d56\u7d22\u5f15\uff0c\u4f46\u662f\u7d22\u5f15\u4f1a\u5bfc\u81f4\u5199\u6027\u80fd\u5927\u5e45\u964d\u4f4e\u3002\u8bf7\u4e0d\u8981\u968f\u610f\u5728\u751f\u4ea7\u73af\u5883\u4e2d\u4f7f\u7528\u7d22\u5f15\uff0c\u9664\u975e\u5f88\u6e05\u695a\u4f7f\u7528\u7d22\u5f15\u5bf9\u4e1a\u52a1\u7684\u5f71\u54cd\u3002</p> <p>\u5fc5\u987b\u4e3a\u201c\u5df2\u5199\u5165\u4f46\u672a\u6784\u5efa\u7d22\u5f15\u201d\u7684\u6570\u636e\u91cd\u5efa\u7d22\u5f15\uff0c\u5426\u5219\u65e0\u6cd5\u5728<code>MATCH</code>\u548c<code>LOOKUP</code>\u8bed\u53e5\u4e2d\u8fd4\u56de\u8fd9\u4e9b\u6570\u636e\u3002\u53c2\u89c1\u91cd\u5efa\u7d22\u5f15\u3002</p>"},{"location":"reuse/source_ngql_for_quick_start/#ngql_6","title":"nGQL \u8bed\u6cd5","text":"<ul> <li>\u521b\u5efa\u7d22\u5f15<pre><code>CREATE {TAG | EDGE} INDEX [IF NOT EXISTS] &lt;index_name&gt;\nON {&lt;tag_name&gt; | &lt;edge_name&gt;} ([&lt;prop_name_list&gt;]) [COMMENT = '&lt;comment&gt;'];\n</code></pre> </li> </ul> <ul> <li>\u91cd\u5efa\u7d22\u5f15<pre><code>REBUILD {TAG | EDGE} INDEX &lt;index_name&gt;;\n</code></pre> </li> </ul> <p>Note</p> <p>\u4e3a\u6ca1\u6709\u6307\u5b9a\u957f\u5ea6\u7684\u53d8\u91cf\u5c5e\u6027\u521b\u5efa\u7d22\u5f15\u65f6\uff0c\u9700\u8981\u6307\u5b9a\u7d22\u5f15\u957f\u5ea6\u3002\u5728 utf-8 \u7f16\u7801\u4e2d\uff0c\u4e00\u4e2a\u4e2d\u6587\u5b57\u7b26\u5360 3 \u5b57\u8282\uff0c\u8bf7\u6839\u636e\u53d8\u91cf\u5c5e\u6027\u957f\u5ea6\u8bbe\u7f6e\u5408\u9002\u7684\u7d22\u5f15\u957f\u5ea6\u3002\u4f8b\u5982 10 \u4e2a\u4e2d\u6587\u5b57\u7b26\uff0c\u7d22\u5f15\u957f\u5ea6\u9700\u8981\u4e3a 30\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1\u521b\u5efa\u7d22\u5f15\u3002</p>"},{"location":"reuse/source_ngql_for_quick_start/#lookupmatch","title":"\u57fa\u4e8e\u7d22\u5f15\u7684<code>LOOKUP</code>\u548c<code>MATCH</code>\u793a\u4f8b","text":"<p>\u786e\u4fdd<code>LOOKUP</code>\u6216<code>MATCH</code>\u6709\u4e00\u4e2a\u7d22\u5f15\u53ef\u7528\u3002\u5982\u679c\u6ca1\u6709\uff0c\u8bf7\u5148\u521b\u5efa\u7d22\u5f15\u3002</p> <p>\u627e\u5230 Tag \u4e3a<code>player</code>\u7684\u70b9\u7684\u4fe1\u606f\uff0c\u5b83\u7684<code>name</code>\u5c5e\u6027\u503c\u4e3a<code>Tony Parker</code>\u3002</p> <pre><code>// \u4e3a name \u5c5e\u6027\u521b\u5efa\u7d22\u5f15 player_index_1\u3002\nnebula&gt; CREATE TAG INDEX IF NOT EXISTS player_index_1 ON player(name(20));\n\n// \u91cd\u5efa\u7d22\u5f15\u786e\u4fdd\u80fd\u5bf9\u5df2\u5b58\u5728\u6570\u636e\u751f\u6548\u3002\nnebula&gt; REBUILD TAG INDEX player_index_1\n+------------+\n| New Job Id |\n+------------+\n| 31         |\n+------------+\n\n// \u4f7f\u7528 LOOKUP \u8bed\u53e5\u68c0\u7d22\u70b9\u7684\u5c5e\u6027\u3002\nnebula&gt; LOOKUP ON player WHERE player.name == \"Tony Parker\" \\\n        YIELD properties(vertex).name AS name, properties(vertex).age AS age;\n+---------------+-----+\n| name          | age |\n+---------------+-----+\n| \"Tony Parker\" | 36  |\n+---------------+-----+\n\n// \u4f7f\u7528 MATCH \u8bed\u53e5\u68c0\u7d22\u70b9\u7684\u5c5e\u6027\u3002\nnebula&gt; MATCH (v:player{name:\"Tony Parker\"}) RETURN v;\n+-----------------------------------------------------+\n| v                                                   |\n+-----------------------------------------------------+\n| (\"player101\" :player{age: 36, name: \"Tony Parker\"}) |\n+-----------------------------------------------------+\n</code></pre>"},{"location":"synchronization-and-migration/2.balance-syntax/","title":"\u8d1f\u8f7d\u5747\u8861","text":"<p>\u6211\u4eec\u53ef\u4ee5\u63d0\u4ea4\u4efb\u52a1\u8ba9 NebulaGraph \u7684 Storage \u670d\u52a1\u5b9e\u73b0\u8d1f\u8f7d\u5747\u8861\u3002\u8be6\u7ec6\u793a\u4f8b\u8bf7\u53c2\u89c1 Storage \u8d1f\u8f7d\u5747\u8861\u3002</p> <p>Note</p> <p>\u5176\u4ed6\u4f5c\u4e1a\u7ba1\u7406\u547d\u4ee4\u8bf7\u53c2\u89c1\u4f5c\u4e1a\u7ba1\u7406\u3002</p> <p>\u8d1f\u8f7d\u5747\u8861\u76f8\u5173\u7684\u8bed\u6cd5\u8bf4\u660e\u5982\u4e0b\u3002</p> \u8bed\u6cd5 \u8bf4\u660e <code>SUBMIT JOB BALANCE LEADER</code> \u542f\u52a8\u4efb\u52a1\u5747\u8861\u5206\u5e03\u6240\u6709\u56fe\u7a7a\u95f4\u4e2d\u7684 leader\u3002\u8be5\u547d\u4ee4\u4f1a\u8fd4\u56de\u4efb\u52a1 ID\uff08<code>job_id</code>\uff09\u3002 <p>\u67e5\u770b\u3001\u505c\u6b62\u3001\u91cd\u542f\u4efb\u52a1\uff0c\u8bf7\u53c2\u89c1\u4f5c\u4e1a\u7ba1\u7406\u3002</p>"}]}