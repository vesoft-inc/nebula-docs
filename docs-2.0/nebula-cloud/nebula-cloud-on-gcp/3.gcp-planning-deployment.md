# Planning the deployment

Before you start deploying service clusters of NebulaGraph on GCP, you need to have some knowledge about Google Cloud Platform and NebulaGraph, get your Google Cloud accounts ready and prepare your resources.

## Specialized knowledge

The deployment requires a moderate level of familiarity with Google Cloud services, especially Compute Engine and VPC. If you're new to Google Cloud, see [Google Cloud essentials](https://cloud.google.com/docs/get-started#google-cloud-essentials).

## Account and permissions

If you don't have an Google Cloud account, [create an account](https://console.cloud.google.com/freetrial?_ga=2.189064299.1320456914.1661838962-704336122.1649316074&_gac=1.261769087.1661841350.CjwKCAjwx7GYBhB7EiwA0d8oe1BnSsVFHk3AFov1HWrFGX4ZqXZfHXVLk3LwdY_yyxWWYElEA5m8yxoCN8EQAvD_BwE).

The account used for the deployment must have access to your project and the [permissions](https://cloud.google.com/deployment-manager/docs/access-control) for the necessary Google Cloud resources.

## Project and billing

You must have a Google Cloud project for the deployment. If you don't have a project or want to use a new one, [create a project](https://cloud.google.com/resource-manager/docs/creating-managing-projects) before the deployment.

To deploy NebulaGraph with Deployment Manager, you must make sure that billing is enabled for your project. To check if billing is enabled, see [Verify the billing status of your projects](https://cloud.google.com/billing/docs/how-to/verify-billing-enabled). If it is not, [enable billing](https://support.google.com/cloud/answer/6293499#enable-billing).

## Resource quotas

Before the deployment starts, check the resource quota on the [Quotas page](https://console.cloud.google.com/iam-admin/quotas) and [Deployment Manager limits and quotas page](https://cloud.google.com/deployment-manager/quotas) to make sure that there are sufficient resources for the deployment. The required resources for deploying a standard [NebulaGraph architecture](2.gcp-architecture.md) are as follows:

| Resource | This deployment uses |
| - | - |
| Networks | 1 |
| Firewall rules | 5 |
| Virtual machine instances (NebulaGraph Dashboard hosts) | 1 |
| Virtual machine instances (NebulaGraph Explorer hosts) | 1 |
| Virtual machine instances (graphd hosts) | 3 |
| Virtual machine instances (metad hosts) | 3  |
| Virtual machine instances (storaged hosts) | 3 |

You can customize the architecture according to your needs. The number of virtual machine instances used depends on the actual deployment architecture. For the number of graphd, metad, and storaged hosts:

- You can have multiple graphd hosts.
- You must have an odd number of storaged hosts, because the Storage Service depends on the raft consensus protocol, which is based on a vote-by-majority mechanism.
- It is recommended to use 3 metad hosts for a production cluster. The Meta Service also applies the raft protocol.

If the required resource quota is insufficient, request service quota increases first.

## GCP Regions and Zones

If you require specific types of machines, check the [available regions and zones](https://cloud.google.com/compute/docs/regions-zones) first. 

<!-- For the deployment in a Region other than the default Region, you are recommended to confirm that the target Region supports all the GCP services required for the deployment on the [Products available by location page](https://cloud.google.com/about/locations#americas). -->
